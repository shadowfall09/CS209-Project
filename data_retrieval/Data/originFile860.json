{"items":[{"tags":["java","hibernate","spring-data-jpa","hibernate-mapping","entity-relationship"],"answers":[{"tags":[],"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669223205,"creation_date":1655456486,"answer_id":72656846,"question_id":72655802,"body_markdown":"There are many options because there are many different use cases.\r\n\r\n1. Choosing between Bidirectional and uni has an impact on the Java Object mapping the entities, how the association is mapped on the database and which query Hibernate will use to load entities (or convert HQL queries). I&#39;m not going into the details of everything - [the documentation does already a great job at it][1] - but if we take the following bidirectional association:\r\n   ```\r\n   @Entity(name = &quot;Person&quot;)\r\n   @Table(name=&quot;PERSON_TABLE&quot;)\r\n   class Person {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n     @OneToMany(mappedBy = &quot;person&quot;)\r\n\t private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\r\n\r\n   }\r\n\r\n   @Entity\r\n   @Table(name=&quot;PHONE_TABLE&quot;)\r\n   class Phone {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n\t @ManyToOne\r\n\t private Person person;\r\n\r\n   }\r\n   ```\r\n\r\n   Hibernate will map it adding a column `person_id` on the table `PHONE_TABLE`.\r\n\r\n   If instead we map it as a unidirectional one-to-many:\r\n   ```\r\n   @Entity(name = &quot;Person&quot;)\r\n   @Table(name=&quot;PERSON_TABLE&quot;)\r\n   class Person {\r\n\r\n     @Id\t\r\n \t private Long id;\r\n\r\n\t @OneToMany(mappedBy = &quot;person&quot;)\r\n\t private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\r\n\r\n   }\r\n\r\n   @Entity\r\n   @Table(name=&quot;PHONE_TABLE&quot;)\r\n   class Phone {\r\n\r\n     @Id\t\r\n\t private Long id;\r\n\r\n     // No many-to-one in this class\r\n\r\n   }\r\n   ```\r\n\r\n   Hibernate creates an extra table `Person_Phone` (a bridge between `PHONE_TABLE` and `PERSON_TABLE`), that contains two columns `person_id` and `phone_id`.\r\n\r\n2. It depends what type of content you expect the association to contain and how you want it returned: does it have duplicates? Is it ordered? Do you want the result as they appear on the db or do you want to use a comparable on the collection? Which mapping are you using? List is usually a good generic option, but you might have better performances using another implementation in some cases, like when you many-to-many associations or when you want to load multiple associations eagerly.\r\n   This question on stack overflow explains why [one cannot load multiple lists eagerly][2] and the documentation [list all the available collections][3] ([there are many more  articles on-line][4]). Here&#39;s an excerpt from the docs:\r\n   &gt;  unidirectional bags are not as efficient when it comes to modifying the collection structure (removing or reshuffling elements).\r\n   &gt;\r\n   &gt; Because the parent-side cannot uniquely identify each individual child, Hibernate deletes all link table rows associated with the parent entity and re-adds the remaining ones that are found in the current collection state.\r\n\r\n3. `@JoinColumn` is optional, and it&#39;s usually necessary when users want to change some of the defaults. For example, when you want to change the column name mapping the association:\r\n   ```\r\n   @Entity\r\n   class Book {\r\n\r\n      // Default column name would be `author_id` but we change it to `a_id`,\r\n      // if you are fine with author_id, than `@JoinColumn` is not necessary\r\n      @ManyToOne\r\n      @JoinColumn(name = &quot;a_id&quot;)\r\n      Author author;\r\n   }\r\n   ```\r\n\r\n   In regard to `@ManyToOne(fetch = FetchType.LAZY)`, Hibernate cannot always fetch many-to-one associations lazily. So the default is `EAGER`. When Hibernate load an association lazily, it creates a proxy object of the expected class. The problem is that you could have code like this:\r\n   ```\r\n   Book book = session.find(Book.class, 5);\r\n   if ( book.getAuthor() == null ) {\r\n    // do something ...\r\n   }\r\n   ``` \r\n\r\n   If Hibernate creates a proxy every time, `getAuthor()` will never return null. So if hibernate can guess that the author exists without querying the associated table, it will load it lazily (for example, when one specifies that the association always exists), otherwise it will just query the associated table and create the object eagerly.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations\r\n  [2]: https://stackoverflow.com/questions/13334831/multiplebagfetchexception-thrown-by-hibernate\r\n  [3]: https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#collections-entity\r\n  [4]: https://thorben-janssen.com/association-mappings-bag-list-set/#Don8217t_use_a_List_for_many-to-many_associations","title":"Hibernate relationship confusion with uni and bidirectional","body":"<p>There are many options because there are many different use cases.</p>\n<ol>\n<li><p>Choosing between Bidirectional and uni has an impact on the Java Object mapping the entities, how the association is mapped on the database and which query Hibernate will use to load entities (or convert HQL queries). I'm not going into the details of everything - <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#associations\" rel=\"nofollow noreferrer\">the documentation does already a great job at it</a> - but if we take the following bidirectional association:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name=&quot;PERSON_TABLE&quot;)\nclass Person {\n\n  @Id    \n  private Long id;\n\n  @OneToMany(mappedBy = &quot;person&quot;)\n  private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\n\n}\n\n@Entity\n@Table(name=&quot;PHONE_TABLE&quot;)\nclass Phone {\n\n  @Id    \n  private Long id;\n\n  @ManyToOne\n  private Person person;\n\n}\n</code></pre>\n<p>Hibernate will map it adding a column <code>person_id</code> on the table <code>PHONE_TABLE</code>.</p>\n<p>If instead we map it as a unidirectional one-to-many:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name=&quot;PERSON_TABLE&quot;)\nclass Person {\n\n  @Id    \n  private Long id;\n\n  @OneToMany(mappedBy = &quot;person&quot;)\n  private List&lt;Phone&gt; phones = new ArrayList&lt;&gt;();\n\n}\n\n@Entity\n@Table(name=&quot;PHONE_TABLE&quot;)\nclass Phone {\n\n  @Id    \n  private Long id;\n\n  // No many-to-one in this class\n\n}\n</code></pre>\n<p>Hibernate creates an extra table <code>Person_Phone</code> (a bridge between <code>PHONE_TABLE</code> and <code>PERSON_TABLE</code>), that contains two columns <code>person_id</code> and <code>phone_id</code>.</p>\n</li>\n<li><p>It depends what type of content you expect the association to contain and how you want it returned: does it have duplicates? Is it ordered? Do you want the result as they appear on the db or do you want to use a comparable on the collection? Which mapping are you using? List is usually a good generic option, but you might have better performances using another implementation in some cases, like when you many-to-many associations or when you want to load multiple associations eagerly.\nThis question on stack overflow explains why <a href=\"https://stackoverflow.com/questions/13334831/multiplebagfetchexception-thrown-by-hibernate\">one cannot load multiple lists eagerly</a> and the documentation <a href=\"https://docs.jboss.org/hibernate/orm/5.6/userguide/html_single/Hibernate_User_Guide.html#collections-entity\" rel=\"nofollow noreferrer\">list all the available collections</a> (<a href=\"https://thorben-janssen.com/association-mappings-bag-list-set/#Don8217t_use_a_List_for_many-to-many_associations\" rel=\"nofollow noreferrer\">there are many more  articles on-line</a>). Here's an excerpt from the docs:</p>\n<blockquote>\n<p>unidirectional bags are not as efficient when it comes to modifying the collection structure (removing or reshuffling elements).</p>\n<p>Because the parent-side cannot uniquely identify each individual child, Hibernate deletes all link table rows associated with the parent entity and re-adds the remaining ones that are found in the current collection state.</p>\n</blockquote>\n</li>\n<li><p><code>@JoinColumn</code> is optional, and it's usually necessary when users want to change some of the defaults. For example, when you want to change the column name mapping the association:</p>\n<pre><code>@Entity\nclass Book {\n\n   // Default column name would be `author_id` but we change it to `a_id`,\n   // if you are fine with author_id, than `@JoinColumn` is not necessary\n   @ManyToOne\n   @JoinColumn(name = &quot;a_id&quot;)\n   Author author;\n}\n</code></pre>\n<p>In regard to <code>@ManyToOne(fetch = FetchType.LAZY)</code>, Hibernate cannot always fetch many-to-one associations lazily. So the default is <code>EAGER</code>. When Hibernate load an association lazily, it creates a proxy object of the expected class. The problem is that you could have code like this:</p>\n<pre><code>Book book = session.find(Book.class, 5);\nif ( book.getAuthor() == null ) {\n // do something ...\n}\n</code></pre>\n<p>If Hibernate creates a proxy every time, <code>getAuthor()</code> will never return null. So if hibernate can guess that the author exists without querying the associated table, it will load it lazily (for example, when one specifies that the association always exists), otherwise it will just query the associated table and create the object eagerly.</p>\n</li>\n</ol>\n"}],"owner":{"display_name":"user19254373"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669223205,"creation_date":1655451146,"question_id":72655802,"body_markdown":"I have Spring Data JPA experience, but new for Hibernate and after looking at several tutorials and  articles, now I am too confused with some points. Could you please clarify me about the following issues?\r\n\r\n**1.** Regarding to OneToMany relationship, it is suggested to define this relationship in the table e.g. `Country` table instead of the related table e.g. `Employee` table with `country_id` map key. However, there are different kind of implementations for this and other relationships. \r\n\r\nWhat does Uni or Bidirectional relationship mean in Hibernate? \r\n\r\nCould you please give an example or suggest me a good example (except from documentation that also cunfused me) in order to understand all the relationships used in Hibernate? \r\n\r\n**2.** For the ManyToMany relationship, some example use `List&lt;T&gt;` while some others use `Set&lt;T&gt;`, `Collection&lt;T&gt;`. So, what is the proper way to define multiple relationship entity? \r\n\r\n**3.** There are also some unnecessary implementation e.g. `@ManyToOne(fetch = FetchType.LAZY)` or `@JoinColumn(name = &quot;book_id&quot;)` because these are default implementation. So, as far as I see, there is no need to imply these default settings as they have no impact. Is that true? ","title":"Hibernate relationship confusion with uni and bidirectional","body":"<p>I have Spring Data JPA experience, but new for Hibernate and after looking at several tutorials and  articles, now I am too confused with some points. Could you please clarify me about the following issues?</p>\n<p><strong>1.</strong> Regarding to OneToMany relationship, it is suggested to define this relationship in the table e.g. <code>Country</code> table instead of the related table e.g. <code>Employee</code> table with <code>country_id</code> map key. However, there are different kind of implementations for this and other relationships.</p>\n<p>What does Uni or Bidirectional relationship mean in Hibernate?</p>\n<p>Could you please give an example or suggest me a good example (except from documentation that also cunfused me) in order to understand all the relationships used in Hibernate?</p>\n<p><strong>2.</strong> For the ManyToMany relationship, some example use <code>List&lt;T&gt;</code> while some others use <code>Set&lt;T&gt;</code>, <code>Collection&lt;T&gt;</code>. So, what is the proper way to define multiple relationship entity?</p>\n<p><strong>3.</strong> There are also some unnecessary implementation e.g. <code>@ManyToOne(fetch = FetchType.LAZY)</code> or <code>@JoinColumn(name = &quot;book_id&quot;)</code> because these are default implementation. So, as far as I see, there is no need to imply these default settings as they have no impact. Is that true?</p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"score":0,"creation_date":1669222890,"post_id":74550511,"comment_id":131597501,"body_markdown":"Please show the exception stack trace. Please indicate which line is throwing the NullPointerException.","body":"Please show the exception stack trace. Please indicate which line is throwing the NullPointerException."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1669222924,"post_id":74550511,"comment_id":131597518,"body_markdown":"You haven&#39;t told us anything about where the exception is, or what the content of the file is. That makes it really hard to help you. The `readFile` method does seem to go to the *end* of the file, then read an extra line - I strongly suspect that `line` is null. It&#39;s not at all clear why you&#39;ve got that while loop to basically exhaust the scanner *before* you try to use it.","body":"You haven&#39;t told us anything about where the exception is, or what the content of the file is. That makes it really hard to help you. The <code>readFile</code> method does seem to go to the <i>end</i> of the file, then read an extra line - I strongly suspect that <code>line</code> is null. It&#39;s not at all clear why you&#39;ve got that while loop to basically exhaust the scanner <i>before</i> you try to use it."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1669222960,"post_id":74550511,"comment_id":131597528,"body_markdown":"Welcome to Stack Overflow. Please read [ask]. What **specific things** did you try already, in order to **understand** where the NullPointerException comes from? What **line of code** do you think has the exception? (Did you try to **read** the stack trace?) What **value** appears to be null, when you read the error message? Do you **understand why** it causes a problem, if that value is null? Do you believe, that some other part of the code **should be making it** not be null? If so, **why and how**?","body":"Welcome to Stack Overflow. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. What <b>specific things</b> did you try already, in order to <b>understand</b> where the NullPointerException comes from? What <b>line of code</b> do you think has the exception? (Did you try to <b>read</b> the stack trace?) What <b>value</b> appears to be null, when you read the error message? Do you <b>understand why</b> it causes a problem, if that value is null? Do you believe, that some other part of the code <b>should be making it</b> not be null? If so, <b>why and how</b>?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1669222989,"post_id":74550511,"comment_id":131597539,"body_markdown":"There are two variables called `file`.  You initialize one ... and use the other one.   That is the cause of the NPE.","body":"There are two variables called <code>file</code>.  You initialize one ... and use the other one.   That is the cause of the NPE."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1669223005,"post_id":74550511,"comment_id":131597548,"body_markdown":"Unrelated issue but you have a typo here: `while (scanner.hasNextLine());{` This semicolon is breaking this loop. Delete the semicolon.","body":"Unrelated issue but you have a typo here: <code>while (scanner.hasNextLine());{</code> This semicolon is breaking this loop. Delete the semicolon."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1669223332,"post_id":74550511,"comment_id":131597676,"body_markdown":"The `static` block is going to execute **before** the `main` method ... which is where you are attempt to initialize (the wrong) `file`.  Don&#39;t use a `static` block.  Put that logic into a method ...","body":"The <code>static</code> block is going to execute <b>before</b> the <code>main</code> method ... which is where you are attempt to initialize (the wrong) <code>file</code>.  Don&#39;t use a <code>static</code> block.  Put that logic into a method ..."}],"answers":[{"tags":[],"owner":{"account_id":446566,"reputation":18084,"user_id":839689,"accept_rate":71,"display_name":"Nayuki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669223043,"creation_date":1669223043,"answer_id":74550557,"question_id":74550511,"body_markdown":"Pretty sure your problem is here:\r\n\r\n    public class Exception2 {\r\n        public static File file;\r\n    \r\n        static {\r\n            try {\r\n                scanner = new Scanner(file); // &lt;-- NullPointerException\r\n            } catch (FileNotFoundException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nThis is because all class fields are initialized to `null`, and the `static { }` block executes before `main()`.\r\n\r\nTo solve this problem, you should move the initialization of `scanner` into `main()`.","title":"Why this code give me NullPointException?","body":"<p>Pretty sure your problem is here:</p>\n<pre><code>public class Exception2 {\n    public static File file;\n\n    static {\n        try {\n            scanner = new Scanner(file); // &lt;-- NullPointerException\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>This is because all class fields are initialized to <code>null</code>, and the <code>static { }</code> block executes before <code>main()</code>.</p>\n<p>To solve this problem, you should move the initialization of <code>scanner</code> into <code>main()</code>.</p>\n"}],"owner":{"account_id":24592309,"reputation":3,"user_id":20377554,"display_name":"housemice"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1669223142,"accepted_answer_id":74550557,"answer_count":1,"score":-2,"last_activity_date":1669223043,"creation_date":1669222787,"question_id":74550511,"body_markdown":"I have the code which below and file is on the same path but it gives error NullPointException\r\n\r\n```\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.File;\r\nimport java.util.Scanner;\r\nimport java.util.Arrays;\r\nimport static java.io.File.separator;\r\n\r\n\r\npublic class Exception2 {\r\n    public static File file;\r\n    static Scanner scanner;\r\n\r\n    public static void main(String[] args) {\r\n        String seporator = separator;\r\n        String path = &quot;C:&quot;+separator+&quot;Users&quot;+separator+&quot;asus&quot;+separator+&quot;Desktop&quot;+separator+&quot;1.txt&quot;;\r\n        File file = new File(path);\r\n        try {\r\n            readFile();\r\n            System.out.println(&quot;Everything is okay.&quot;);\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;Error.&quot;);\r\n        }\r\n    }\r\n\r\n    static {\r\n        try {\r\n            scanner = new Scanner(file);\r\n        } catch (FileNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public static void readFile() throws FileNotFoundException {\r\n\r\n        while (scanner.hasNextLine());{\r\n            System.out.println(scanner.nextLine() );\r\n        }\r\n        scanner.close();\r\n        String line = scanner.nextLine();\r\n        String [] words = line.split(&quot; &quot;);\r\n        System.out.println(Arrays.toString(words));\r\n    }\r\n\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nI want to make file reader with my own exceptions\r\nThe meaning of programm that it will read strings from file which places on the path which i wrote and then will give me that strings back but and i added some exceptions triggered if file will be not find out ","title":"Why this code give me NullPointException?","body":"<p>I have the code which below and file is on the same path but it gives error NullPointException</p>\n<pre><code>\nimport java.io.FileNotFoundException;\nimport java.io.File;\nimport java.util.Scanner;\nimport java.util.Arrays;\nimport static java.io.File.separator;\n\n\npublic class Exception2 {\n    public static File file;\n    static Scanner scanner;\n\n    public static void main(String[] args) {\n        String seporator = separator;\n        String path = &quot;C:&quot;+separator+&quot;Users&quot;+separator+&quot;asus&quot;+separator+&quot;Desktop&quot;+separator+&quot;1.txt&quot;;\n        File file = new File(path);\n        try {\n            readFile();\n            System.out.println(&quot;Everything is okay.&quot;);\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;Error.&quot;);\n        }\n    }\n\n    static {\n        try {\n            scanner = new Scanner(file);\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void readFile() throws FileNotFoundException {\n\n        while (scanner.hasNextLine());{\n            System.out.println(scanner.nextLine() );\n        }\n        scanner.close();\n        String line = scanner.nextLine();\n        String [] words = line.split(&quot; &quot;);\n        System.out.println(Arrays.toString(words));\n    }\n\n\n}\n\n</code></pre>\n<p>I want to make file reader with my own exceptions\nThe meaning of programm that it will read strings from file which places on the path which i wrote and then will give me that strings back but and i added some exceptions triggered if file will be not find out</p>\n"},{"tags":["java","arrays","function"],"answers":[{"tags":[],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669198703,"creation_date":1669197075,"answer_id":74544779,"question_id":74544557,"body_markdown":"The code is giving you an ArrayIndexOutOfBoundsException, as you are trying to address an array index which is beyond array limits. The reason for this is, that arrays are 0-indexed, so an array of length 10 has indexes 0-9. Your code does not take this into account when defining field `j`.\r\n\r\nThe only change you need to make is change that line:\r\n\r\n    int j = array.length;\r\n\r\ninto this one:\r\n\r\n    int j = array.length - 1;\r\n\r\nYou could also do some more refactoring and rewrite method as:\r\n\r\n    public static int[] reversea(int array[]) {\r\n        int swap;\r\n        for (int i = 0, j = array.length-1; i &lt; j; i++, j--) {\r\n            swap = array[i];\r\n            array[i] = array[j];\r\n            array[j] = swap;\r\n        }\r\n        return array;\r\n    }\r\n\r\nInstead of returning useless value of `j` after reversing, the refactored method returns the array in reversed order. \r\n\r\nPS: Please use CamelCase for your class names.\r\n","title":"I want to reverse an array but dont know why this error comes?","body":"<p>The code is giving you an ArrayIndexOutOfBoundsException, as you are trying to address an array index which is beyond array limits. The reason for this is, that arrays are 0-indexed, so an array of length 10 has indexes 0-9. Your code does not take this into account when defining field <code>j</code>.</p>\n<p>The only change you need to make is change that line:</p>\n<pre><code>int j = array.length;\n</code></pre>\n<p>into this one:</p>\n<pre><code>int j = array.length - 1;\n</code></pre>\n<p>You could also do some more refactoring and rewrite method as:</p>\n<pre><code>public static int[] reversea(int array[]) {\n    int swap;\n    for (int i = 0, j = array.length-1; i &lt; j; i++, j--) {\n        swap = array[i];\n        array[i] = array[j];\n        array[j] = swap;\n    }\n    return array;\n}\n</code></pre>\n<p>Instead of returning useless value of <code>j</code> after reversing, the refactored method returns the array in reversed order.</p>\n<p>PS: Please use CamelCase for your class names.</p>\n"},{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222777,"creation_date":1669218690,"answer_id":74549606,"question_id":74544557,"body_markdown":"The logic is in method &quot;reverseArray(int[] array)&quot;\r\n\r\n    import java.util.Arrays;\r\n\r\npublic class ArrayReverse {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\r\n\t\tSystem.out.println(&quot;original array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\r\n\t\treverseArray(array);\r\n\t\tSystem.out.println(&quot;reversed array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\r\n\t}\r\n\r\n\tpublic static void reverseArray(int[] array) {\r\n\t\t// We will iterate on the half of the array length\r\n\t\t// If the array size is an even number (e.g.: {1 ,2 ,3 ,4} we will iterate on\r\n\t\t// the half of the array size (e.g.: 2 numbers)\r\n\t\t// If the array size is an odd number (e.g.: {1 ,2 ,3 ,4 ,5} we will iterate on\r\n\t\t// the half of the array size minus 1 (e.g.: 2 numbers)\r\n\t\tfor (int i = 0; i &lt; array.length / 2; i++) {\r\n\t\t\t// We add the value of the number at index i in array (let&#39;s say its value is x)\r\n\t\t\t// to the value of the number at index (length of array-i-1) of the array (let&#39;s\r\n\t\t\t// say value y)\r\n\t\t\tarray[i] = array[i] + array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[i] is x+y\r\n\t\t\t// We retrieve the value of the number at index (length of array-i-1) from the\r\n\t\t\t// number at index i in array\r\n\t\t\tarray[array.length - 1 - i] = array[i] - array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[length of array-i-1] is (x+y)-y=x\r\n\t\t\t// And finally, we retrieve the value of the number at index (length of\r\n\t\t\t// array-i-1) from number at index i in array\r\n\t\t\tarray[i] = array[i] - array[array.length - 1 - i];\r\n\t\t\t// Now the value of array[i] is (x+y)-x=y\r\n\t\t\t// We have swapped x and y values in the array\r\n\t\t}\r\n\t}\r\n}\r\n\r\nThis can seem a bit complicated but this method only use addition and substraction, no complicated algorithm.\r\nFurthermore, there is no variable instance created except variable &quot;i&quot; as a counter on array index.\r\nAnd, finally, no new array is created. The reversed array is the original array instance simply reversed.","title":"I want to reverse an array but dont know why this error comes?","body":"<p>The logic is in method &quot;reverseArray(int[] array)&quot;</p>\n<pre><code>import java.util.Arrays;\n</code></pre>\n<p>public class ArrayReverse {</p>\n<pre><code>public static void main(String[] args) {\n    int[] array = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };\n    System.out.println(&quot;original array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\n    reverseArray(array);\n    System.out.println(&quot;reversed array :: &quot; + array + &quot; : &quot; + Arrays.toString(array));\n}\n\npublic static void reverseArray(int[] array) {\n    // We will iterate on the half of the array length\n    // If the array size is an even number (e.g.: {1 ,2 ,3 ,4} we will iterate on\n    // the half of the array size (e.g.: 2 numbers)\n    // If the array size is an odd number (e.g.: {1 ,2 ,3 ,4 ,5} we will iterate on\n    // the half of the array size minus 1 (e.g.: 2 numbers)\n    for (int i = 0; i &lt; array.length / 2; i++) {\n        // We add the value of the number at index i in array (let's say its value is x)\n        // to the value of the number at index (length of array-i-1) of the array (let's\n        // say value y)\n        array[i] = array[i] + array[array.length - 1 - i];\n        // Now the value of array[i] is x+y\n        // We retrieve the value of the number at index (length of array-i-1) from the\n        // number at index i in array\n        array[array.length - 1 - i] = array[i] - array[array.length - 1 - i];\n        // Now the value of array[length of array-i-1] is (x+y)-y=x\n        // And finally, we retrieve the value of the number at index (length of\n        // array-i-1) from number at index i in array\n        array[i] = array[i] - array[array.length - 1 - i];\n        // Now the value of array[i] is (x+y)-x=y\n        // We have swapped x and y values in the array\n    }\n}\n</code></pre>\n<p>}</p>\n<p>This can seem a bit complicated but this method only use addition and substraction, no complicated algorithm.\nFurthermore, there is no variable instance created except variable &quot;i&quot; as a counter on array index.\nAnd, finally, no new array is created. The reversed array is the original array instance simply reversed.</p>\n"}],"owner":{"account_id":26877071,"reputation":1,"user_id":20458153,"display_name":"Bilal Sahi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74544779,"answer_count":2,"score":0,"last_activity_date":1669222777,"creation_date":1669196135,"question_id":74544557,"body_markdown":"i dont kow ehy my programs dont run.\r\ni am trying to reverse my array through user defined function.\r\ni can give an input but cannot find out the answer.\r\n\r\n    import java.util.*;\r\n    public class reverseanarray{\r\n    public static int reversea(int array[]){\r\n        int swap;\r\n        int j=array.length;\r\n        for(int i=0;i&lt;array.length/2;i++){\r\n            swap=array[i];\r\n            array[i]=array[j];\r\n            array[j]=swap;\r\n            j--;\r\n        }\r\n        return j;\r\n    }      \r\n    public static void main(String args[]){\r\n       Scanner sc = new Scanner(System.in);\r\n       //System.out.println();\r\n       //int a = sc.nextInt();\r\n       System.out.println(&quot;please input the length&quot;);\r\n       int y=sc.nextInt();//INPUT OF LENGTH OF ARRAY\r\n       int arr[]=new int[y];\r\n           //INPUT ARRAY\r\n           for(int r=0;r&lt;arr.length;r++){\r\n               System.out.println(&quot;please input the &quot;+r+&quot; index value&quot;);\r\n               arr[r]=sc.nextInt();\r\n           }\r\n           System.out.println(reversea(arr));\r\n           for(int i=0;i&lt;y;i++){\r\n            System.out.println(arr[i]);\r\n           }\r\n          \r\n        }\r\n\r\n    }\r\n","title":"I want to reverse an array but dont know why this error comes?","body":"<p>i dont kow ehy my programs dont run.\ni am trying to reverse my array through user defined function.\ni can give an input but cannot find out the answer.</p>\n<pre><code>import java.util.*;\npublic class reverseanarray{\npublic static int reversea(int array[]){\n    int swap;\n    int j=array.length;\n    for(int i=0;i&lt;array.length/2;i++){\n        swap=array[i];\n        array[i]=array[j];\n        array[j]=swap;\n        j--;\n    }\n    return j;\n}      \npublic static void main(String args[]){\n   Scanner sc = new Scanner(System.in);\n   //System.out.println();\n   //int a = sc.nextInt();\n   System.out.println(&quot;please input the length&quot;);\n   int y=sc.nextInt();//INPUT OF LENGTH OF ARRAY\n   int arr[]=new int[y];\n       //INPUT ARRAY\n       for(int r=0;r&lt;arr.length;r++){\n           System.out.println(&quot;please input the &quot;+r+&quot; index value&quot;);\n           arr[r]=sc.nextInt();\n       }\n       System.out.println(reversea(arr));\n       for(int i=0;i&lt;y;i++){\n        System.out.println(arr[i]);\n       }\n      \n    }\n\n}\n</code></pre>\n"},{"tags":["java","sql","oracle","spring-boot","jdbctemplate"],"comments":[{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":1,"creation_date":1669028192,"post_id":74517670,"comment_id":131541653,"body_markdown":"Your code looks like you have hard-coded the phone number into the query (line 13) rather than using the parameter you defined. You don&#39;t have any parameters in your SQL at all - you should look to fix that first.","body":"Your code looks like you have hard-coded the phone number into the query (line 13) rather than using the parameter you defined. You don&#39;t have any parameters in your SQL at all - you should look to fix that first."},{"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"score":0,"creation_date":1669084237,"post_id":74517670,"comment_id":131557822,"body_markdown":"Sorry that my mistake when copy the code while I testing without parameter. In my code there are parameter for phone number","body":"Sorry that my mistake when copy the code while I testing without parameter. In my code there are parameter for phone number"}],"answers":[{"tags":[],"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222767,"creation_date":1669222767,"answer_id":74550506,"question_id":74517670,"body_markdown":"I have solved the problem by using materialized view and create scheduler to reset it every 24h, the query now much faster about 800ms.","title":"Oracle JDBC Template extremely slow with parameters","body":"<p>I have solved the problem by using materialized view and create scheduler to reset it every 24h, the query now much faster about 800ms.</p>\n"}],"owner":{"account_id":20967180,"reputation":1,"user_id":15405127,"display_name":"H&#242;a V&#245;"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669222767,"creation_date":1669027522,"question_id":74517670,"body_markdown":"I have a problem, I use JDBCTemplate in SpringBoot with oracle 19c and using this following query:\r\n\r\n``` sql\r\nSELECT\r\n    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\r\n    CLIENT_EXTRA_INFO.FULL_NAME,\r\nFROM\r\n     CONTRACT\r\n        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\r\nWHERE\r\n    CLIENT_EXTRA_INFO.MBPHONE = &#39;0343423223&#39;\r\n  and CONTRACT.STATUS = &#39;ACTIVE&#39;\r\n  and CONTRACT.FLAG IN (&#39;2&#39;, &#39;5&#39;) FETCH  FIRST  10 ROWS ONLY;\r\n```\r\nIt run fast on console, about 300ms, but when add use it with JDBC and add parameter to phone number:\r\n\r\n``` java\r\n@Override\r\n    public ResponsePagingDTO&lt;RetailCustomerDTO&gt; getDuplicateRetailCustomerWithPhoneNumber(DuplicatePhoneNumberRequest request) {\r\n        MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource();\r\n        mapSqlParameterSource.addValue(&quot;phone&quot;, request.getPhoneNumber());\r\n        mapSqlParameterSource.addValue(&quot;row&quot;, request.getSize());\r\n        String sql =&quot;SELECT\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.FULL_NAME,\\n&quot; +\r\n        &quot;FROM\\n&quot; +\r\n        &quot;     CONTRACT\\n&quot; +\r\n        &quot;        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\\n&quot; +\r\n        &quot;WHERE\\n&quot; +\r\n        &quot;    CLIENT_EXTRA_INFO.MBPHONE = :phone\\n&quot; +\r\n        &quot;  and CONTRACT.STATUS = &#39;ACTIVE&#39;\\n&quot; +\r\n        &quot;  and CONTRACT.FLAG IN (&#39;2&#39;, &#39;5&#39;) FETCH  FIRST  :row ROWS ONLY&quot;;\r\n\r\n\r\n        ResponsePagingDTO&lt;RetailCustomerDTO&gt; responsePagingDTO = new ResponsePagingDTO&lt;&gt;();\r\n\r\n\r\n        List&lt;RetailCustomerDTO&gt; retailCustomerDTOS = new ArrayList&lt;&gt;();\r\n        pulseOpsTemplateJdbc.query(sql, mapSqlParameterSource, (result -&gt; {\r\n            RetailCustomerDTO retailCustomer = new RetailCustomerDTO();\r\n            retailCustomer.setClientNumber(result.getString(ClientConstant.CLIENT_NUM));\r\n            retailCustomer.setFullName(result.getString(ClientConstant.FULL_NAME));\r\n            retailCustomer.setPhoneNumber(request.getPhoneNumber());\r\n            retailCustomerDTOS.add(retailCustomer);\r\n        }));\r\n        responsePagingDTO.setData(retailCustomerDTOS);\r\n        return responsePagingDTO;\r\n    }\r\n}\r\n```\r\nThe performance is very low, around 7 min to response compared to run it in console (300ms). Total data is about 80 million records, I have tried many solutions but none of them improve performance, all column in where statement have been indexed.\r\n\r\n\r\n\r\nHave anyone got any solution for this problem? Many thanks to you guys.","title":"Oracle JDBC Template extremely slow with parameters","body":"<p>I have a problem, I use JDBCTemplate in SpringBoot with oracle 19c and using this following query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT\n    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\n    CLIENT_EXTRA_INFO.FULL_NAME,\nFROM\n     CONTRACT\n        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\nWHERE\n    CLIENT_EXTRA_INFO.MBPHONE = '0343423223'\n  and CONTRACT.STATUS = 'ACTIVE'\n  and CONTRACT.FLAG IN ('2', '5') FETCH  FIRST  10 ROWS ONLY;\n</code></pre>\n<p>It run fast on console, about 300ms, but when add use it with JDBC and add parameter to phone number:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public ResponsePagingDTO&lt;RetailCustomerDTO&gt; getDuplicateRetailCustomerWithPhoneNumber(DuplicatePhoneNumberRequest request) {\n        MapSqlParameterSource mapSqlParameterSource = new MapSqlParameterSource();\n        mapSqlParameterSource.addValue(&quot;phone&quot;, request.getPhoneNumber());\n        mapSqlParameterSource.addValue(&quot;row&quot;, request.getSize());\n        String sql =&quot;SELECT\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.CLIENT_NUMBER,\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.FULL_NAME,\\n&quot; +\n        &quot;FROM\\n&quot; +\n        &quot;     CONTRACT\\n&quot; +\n        &quot;        JOIN CLIENT_EXTRA_INFO on (CONTRACT.CLIENTID = CLIENT_EXTRA_INFO.ID)\\n&quot; +\n        &quot;WHERE\\n&quot; +\n        &quot;    CLIENT_EXTRA_INFO.MBPHONE = :phone\\n&quot; +\n        &quot;  and CONTRACT.STATUS = 'ACTIVE'\\n&quot; +\n        &quot;  and CONTRACT.FLAG IN ('2', '5') FETCH  FIRST  :row ROWS ONLY&quot;;\n\n\n        ResponsePagingDTO&lt;RetailCustomerDTO&gt; responsePagingDTO = new ResponsePagingDTO&lt;&gt;();\n\n\n        List&lt;RetailCustomerDTO&gt; retailCustomerDTOS = new ArrayList&lt;&gt;();\n        pulseOpsTemplateJdbc.query(sql, mapSqlParameterSource, (result -&gt; {\n            RetailCustomerDTO retailCustomer = new RetailCustomerDTO();\n            retailCustomer.setClientNumber(result.getString(ClientConstant.CLIENT_NUM));\n            retailCustomer.setFullName(result.getString(ClientConstant.FULL_NAME));\n            retailCustomer.setPhoneNumber(request.getPhoneNumber());\n            retailCustomerDTOS.add(retailCustomer);\n        }));\n        responsePagingDTO.setData(retailCustomerDTOS);\n        return responsePagingDTO;\n    }\n}\n</code></pre>\n<p>The performance is very low, around 7 min to response compared to run it in console (300ms). Total data is about 80 million records, I have tried many solutions but none of them improve performance, all column in where statement have been indexed.</p>\n<p>Have anyone got any solution for this problem? Many thanks to you guys.</p>\n"},{"tags":["java","string","sorting","collections"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1669206590,"post_id":74546731,"comment_id":131591096,"body_markdown":"Change `Collection&lt;Person&gt; people` to `List&lt;Person&gt; people` which will let you use `people.sort(Comparator.comparing(Object::toString))`. Currently you are sorting array created via `people.toArray()`, not `people` list itself.","body":"Change <code>Collection&lt;Person&gt; people</code> to <code>List&lt;Person&gt; people</code> which will let you use <code>people.sort(Comparator.comparing(Object::toString))</code>. Currently you are sorting array created via <code>people.toArray()</code>, not <code>people</code> list itself."}],"answers":[{"tags":[],"owner":{"display_name":"user6073886"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1669206546,"creation_date":1669206546,"answer_id":74546794,"question_id":74546731,"body_markdown":"Your problem is that you are converting your Collection/ArrayList to an array and then sort that Array.\r\n\r\nSorting that Array will have no effect on the original ArrayList.\r\n\r\nIf you want to sort your List you first need to declare it as a List, because Collections themself have no predefined order and therefor no sort method for them exists, and then in a second step use the corresponding method to sort that list:\r\n\r\n    public static void main(final String[] args) {\r\n        final List&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n        \r\n        people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\r\n        people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\r\n        people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\r\n\r\n        Collections.sort(people, Comparator.comparing(Person::toString));\r\n        \r\n        System.out.println(people);\r\n        \r\n    }\r\n\r\nWill output\r\n\r\n&gt; [aaaaaa, aaahhh, aaauuu]","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>Your problem is that you are converting your Collection/ArrayList to an array and then sort that Array.</p>\n<p>Sorting that Array will have no effect on the original ArrayList.</p>\n<p>If you want to sort your List you first need to declare it as a List, because Collections themself have no predefined order and therefor no sort method for them exists, and then in a second step use the corresponding method to sort that list:</p>\n<pre><code>public static void main(final String[] args) {\n    final List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n    \n    people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\n    people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\n    people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\n\n    Collections.sort(people, Comparator.comparing(Person::toString));\n    \n    System.out.println(people);\n    \n}\n</code></pre>\n<p>Will output</p>\n<blockquote>\n<p>[aaaaaa, aaahhh, aaauuu]</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669222505,"creation_date":1669222505,"answer_id":74550443,"question_id":74546731,"body_markdown":"Plot twist\r\n\r\nThe following\r\n\r\n\r\n    public static void main(String[] args) {\r\n    \r\n                Person[] peopleArray = {\r\n                        new Person(&quot;aaa&quot;, &quot;hhh&quot;),\r\n                        new Person(&quot;aaa&quot;, &quot;aaa&quot;),\r\n                        new Person(&quot;aaa&quot;, &quot;uuu&quot;)\r\n                };\r\n    \r\n                Collection&lt;Person&gt; people = Arrays.asList(peopleArray);\r\n    \r\n                Arrays.sort(peopleArray, Comparator.comparing(Object::toString));\r\n    \r\n                System.out.println(people);\r\n            }\r\n\r\nWill print you the `[aaa aaa, aaa hhh, aaa uuu]` which is what you expect.\r\n\r\nIf you don&#39;t sort it and remove the line `Arrays.sort(peopleArray, Comparator.comparing(Object::toString));` it will print you the `[aaa hhh, aaa aaa, aaa uuu]`.\r\n\r\nReason why this would work -&gt; `Arrays.asList()` is backed directly by the array, so when you sort the array you see the same sorting in the collection .\r\n\r\n`java.util.ArrayList()` on the other side is not backed directly by any array that stores the elements since the `ArrayList` supports dynamic list size.","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>Plot twist</p>\n<p>The following</p>\n<pre><code>public static void main(String[] args) {\n\n            Person[] peopleArray = {\n                    new Person(&quot;aaa&quot;, &quot;hhh&quot;),\n                    new Person(&quot;aaa&quot;, &quot;aaa&quot;),\n                    new Person(&quot;aaa&quot;, &quot;uuu&quot;)\n            };\n\n            Collection&lt;Person&gt; people = Arrays.asList(peopleArray);\n\n            Arrays.sort(peopleArray, Comparator.comparing(Object::toString));\n\n            System.out.println(people);\n        }\n</code></pre>\n<p>Will print you the <code>[aaa aaa, aaa hhh, aaa uuu]</code> which is what you expect.</p>\n<p>If you don't sort it and remove the line <code>Arrays.sort(peopleArray, Comparator.comparing(Object::toString));</code> it will print you the <code>[aaa hhh, aaa aaa, aaa uuu]</code>.</p>\n<p>Reason why this would work -&gt; <code>Arrays.asList()</code> is backed directly by the array, so when you sort the array you see the same sorting in the collection .</p>\n<p><code>java.util.ArrayList()</code> on the other side is not backed directly by any array that stores the elements since the <code>ArrayList</code> supports dynamic list size.</p>\n"}],"owner":{"account_id":21774282,"reputation":15,"user_id":16076953,"display_name":"user16076953"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74546794,"answer_count":2,"score":0,"last_activity_date":1669222505,"creation_date":1669206187,"question_id":74546731,"body_markdown":"So I&#39;m trying to lexicographically sort this collection but with no success. The same unsorted collection is in the input and the output of the sort method. \r\n\r\n\r\n    class Person {\r\n        \r\n        private String privateName;\r\n        private String lastName;\r\n        \r\n        public Person(String privateName, String lastName) {\r\n            this.privateName = privateName;\r\n            this.lastName = lastName;\r\n        }\r\n        \r\n        public String toString() {\r\n            return privateName + &quot; &quot; + lastName;\r\n        }\r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            Collection&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n            \r\n            people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\r\n            people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\r\n            people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\r\n    \r\n            Arrays.sort(people.toArray(), Comparator.comparing(Object::toString));\r\n        }\r\n    }\r\n\r\n\r\nThe order of the elements in the output collection:\r\n&quot;aaa hhh&quot; -&gt; &quot;aaa aaa&quot; -&gt; &quot;aaa uuu&quot; \r\n\r\nWhile I want it to be:\r\n&quot;aaa aaa&quot; -&gt; &quot;aaa hhh&quot; -&gt; &quot;aaa uuu&quot; \r\n\r\nCan somebody tell me why?","title":"Java - Sorting collection with toString method doesn&#39;t work","body":"<p>So I'm trying to lexicographically sort this collection but with no success. The same unsorted collection is in the input and the output of the sort method.</p>\n<pre><code>class Person {\n    \n    private String privateName;\n    private String lastName;\n    \n    public Person(String privateName, String lastName) {\n        this.privateName = privateName;\n        this.lastName = lastName;\n    }\n    \n    public String toString() {\n        return privateName + &quot; &quot; + lastName;\n    }\n}\n\nclass Main {\n    public static void main(String[] args) {\n        Collection&lt;Person&gt; people = new ArrayList&lt;&gt;();\n        \n        people.add(new Person(&quot;aaa&quot;, &quot;hhh&quot;));\n        people.add(new Person(&quot;aaa&quot;, &quot;aaa&quot;));\n        people.add(new Person(&quot;aaa&quot;, &quot;uuu&quot;));\n\n        Arrays.sort(people.toArray(), Comparator.comparing(Object::toString));\n    }\n}\n</code></pre>\n<p>The order of the elements in the output collection:\n&quot;aaa hhh&quot; -&gt; &quot;aaa aaa&quot; -&gt; &quot;aaa uuu&quot;</p>\n<p>While I want it to be:\n&quot;aaa aaa&quot; -&gt; &quot;aaa hhh&quot; -&gt; &quot;aaa uuu&quot;</p>\n<p>Can somebody tell me why?</p>\n"},{"tags":["java","liferay","portlet","liferay-7","portletbridge"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1669222425,"post_id":74550382,"comment_id":131597336,"body_markdown":"1990s technology.  Who would go back to that?","body":"1990s technology.  Who would go back to that?"},{"owner":{"account_id":11382931,"reputation":41,"user_id":14993633,"display_name":"Sachin"},"score":0,"creation_date":1669224657,"post_id":74550382,"comment_id":131598190,"body_markdown":"yeah. But not sure what latest tech can help to achieve it?","body":"yeah. But not sure what latest tech can help to achieve it?"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1669235338,"post_id":74550382,"comment_id":131601272,"body_markdown":"This needs a lot of clarity: You mention (and tag) Liferay, but the direction of what&#39;s included where is absolutely unclear to me. Current Liferay versions make it trivial to embed your own vue application, so you can do whatever you want in that vue app, without relying on server-side integrations. Please see [ask] and edit your question to contain a [mcve]","body":"This needs a lot of clarity: You mention (and tag) Liferay, but the direction of what&#39;s included where is absolutely unclear to me. Current Liferay versions make it trivial to embed your own vue application, so you can do whatever you want in that vue app, without relying on server-side integrations. Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and edit your question to contain a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":11382931,"reputation":41,"user_id":14993633,"display_name":"Sachin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669222152,"creation_date":1669222152,"question_id":74550382,"body_markdown":"I got a requirement where I need to display an other teams jsp page into my application (vue.js/jsp application) in a iframe without using company network. Their url only works in company network. Some team achieved it long back via jboss portlet bridge technology. have no idea it works? Not much material available online as well. I heard liferay can be used but I have no idea about it too. Can some one please help. Thanks ","title":"How to use jboss portlet bridge or liferay bridge?","body":"<p>I got a requirement where I need to display an other teams jsp page into my application (vue.js/jsp application) in a iframe without using company network. Their url only works in company network. Some team achieved it long back via jboss portlet bridge technology. have no idea it works? Not much material available online as well. I heard liferay can be used but I have no idea about it too. Can some one please help. Thanks</p>\n"},{"tags":["java","mongodb","spring-boot","enums"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1669249117,"post_id":74550333,"comment_id":131604236,"body_markdown":"Tip: By convention, enum objects in Java are named in ALL UPPERCASE. Abiding this convention would make moot your issue.","body":"Tip: By convention, enum objects in Java are named in ALL UPPERCASE. Abiding this convention would make moot your issue."},{"owner":{"account_id":23296940,"reputation":19,"user_id":17378208,"display_name":"Prathap H N"},"score":0,"creation_date":1669902975,"post_id":74550333,"comment_id":131752096,"body_markdown":"Agree ..@BasilBourque.  It is too old code, right now no option to modify it.","body":"Agree ..@BasilBourque.  It is too old code, right now no option to modify it."}],"owner":{"account_id":23296940,"reputation":19,"user_id":17378208,"display_name":"Prathap H N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669221922,"creation_date":1669221922,"question_id":74550333,"body_markdown":"I am unable to fetch the data from the Mongo DB when the enum value (one of the fields) is of a different case in the database.\r\n\r\nMy main class looks like below...\r\n\r\n\r\n```\r\npublic class Test {\r\n\r\n\r\n   public static void main(String[] args){\r\n\r\n   -------\r\n   --------\r\n\r\n   Optional&lt;UserAccount&gt; userAccountInfo= userAccountRepo.findById(id);\r\n\r\n   -------\r\n   --------\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\npublic class UserAccount{\r\n\r\n    private String id;\t\r\n    private String firstName;\r\n    private String secondName;\r\n    private AccountStatusEnum status;\r\n    private String address;\r\n    \r\n}\r\n```\r\n\r\n\r\n```\r\npublic enum AccountStatusEnum {\r\n\r\n    created,\r\n    failed,\r\n    inprogress;\r\n  \r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n@Repository\r\npublic interface UserAccountRepo extends MongoRepository&lt;UserAccount, String&gt; {\r\n\r\n    Optional&lt;UserAccount&gt; findById(String id);\r\n\r\n}\r\n```\r\n\r\nData in the collection/table.\r\n\r\n \r\n```\r\n{\r\n  &quot;id&quot;:&quot;0123&quot;,\r\n  &quot;firstName&quot;:&quot;Rama&quot;,\r\n  &quot;lastName&quot;:&quot;Bharath&quot;,\r\n   &quot;status&quot;:&quot;CREATED&quot;,\r\n   &quot;address&quot;:&quot;Bengaluru Dist, Karnataka&quot;\r\n}\r\n\r\n```\r\n\r\nNote: Getting like below \r\n\r\n java.lang.IllegalArgumentException: No enum constant com.test.enums.AccountStatusEnum.CREATED\r\n\r\n\r\n\r\n\r\n\r\n\r\nAdded the below property also to ignore the enum cases, but it didn&#39;t work.\r\n\r\n\r\n```\r\nspring.jackson.mapper.accept-case-insensitive-enums=true\r\n\r\n```\r\n\r\nExpectation: I should be able to retrieve the data from DB, irrespective of cases(upper/lower) in DB.","title":"How to make an enum as a case insensitive file fetching the data from the DB and converting it into java object ? ( serialization/Deserialization)","body":"<p>I am unable to fetch the data from the Mongo DB when the enum value (one of the fields) is of a different case in the database.</p>\n<p>My main class looks like below...</p>\n<pre><code>public class Test {\n\n\n   public static void main(String[] args){\n\n   -------\n   --------\n\n   Optional&lt;UserAccount&gt; userAccountInfo= userAccountRepo.findById(id);\n\n   -------\n   --------\n\n   }\n\n}\n</code></pre>\n<pre><code>public class UserAccount{\n\n    private String id;  \n    private String firstName;\n    private String secondName;\n    private AccountStatusEnum status;\n    private String address;\n    \n}\n</code></pre>\n<pre><code>public enum AccountStatusEnum {\n\n    created,\n    failed,\n    inprogress;\n  \n}\n\n</code></pre>\n<pre><code>@Repository\npublic interface UserAccountRepo extends MongoRepository&lt;UserAccount, String&gt; {\n\n    Optional&lt;UserAccount&gt; findById(String id);\n\n}\n</code></pre>\n<p>Data in the collection/table.</p>\n<pre><code>{\n  &quot;id&quot;:&quot;0123&quot;,\n  &quot;firstName&quot;:&quot;Rama&quot;,\n  &quot;lastName&quot;:&quot;Bharath&quot;,\n   &quot;status&quot;:&quot;CREATED&quot;,\n   &quot;address&quot;:&quot;Bengaluru Dist, Karnataka&quot;\n}\n\n</code></pre>\n<p>Note: Getting like below</p>\n<p>java.lang.IllegalArgumentException: No enum constant com.test.enums.AccountStatusEnum.CREATED</p>\n<p>Added the below property also to ignore the enum cases, but it didn't work.</p>\n<pre><code>spring.jackson.mapper.accept-case-insensitive-enums=true\n\n</code></pre>\n<p>Expectation: I should be able to retrieve the data from DB, irrespective of cases(upper/lower) in DB.</p>\n"},{"tags":["java","spring","spring-boot","stream","java-stream"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669220163,"post_id":74549501,"comment_id":131596431,"body_markdown":"@Chaosfire Not actually, I want to get the 3 countries that has the most cities.","body":"@Chaosfire Not actually, I want to get the 3 countries that has the most cities."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669221787,"creation_date":1669219237,"answer_id":74549752,"question_id":74549501,"body_markdown":"# Sorting\r\n\r\nThe simplest approach would be to group the data by `countryCode` by generating an auxiliary map of type `Map&lt;String, Long&gt;`, associating each `countryCode` with the count of cities.\r\n\r\nThen generate a stream over the map entries and sort it in the reverse order by *Value* (*i.e. in Descending order of the city count*).\r\n\r\nThat how it might be implemented:\r\n\r\n    public static List&lt;String&gt; getTopNCodes(List&lt;City&gt; cities,\r\n                                            int limit) {\r\n        return cities.stream()\r\n            .collect(Collectors.groupingBy( // creates a Map&lt;String, Long&gt;\r\n                City::getCountryCode,\r\n                Collectors.counting()\r\n            ))\r\n            .entrySet().stream()\r\n            .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())\r\n            .limit(limit) // &lt;- retain top N\r\n            .map(Map.Entry::getKey)\r\n            .toList();\r\n    }\r\n\r\nTime complexity of this approach is **O(n * log n)** doe to sorting, which would be downside would be if number of elements to retrieve it small (like `3`), meanwhile the data is massive.\r\n\r\nWe can do better.\r\n\r\n# Partial sorting using Custom Collector\r\n\r\nInstead of sorting all entries of the auxiliary map, we can perform partial sorting using `PriorityQueue` (this class is an implementation of the *Binary Heap* offered by JDK).\r\n\r\nFor that, we can implement a custom collector using static factory method `Collector.of()`.\r\n\r\nAn instance of `PriorityQueue` would be used as a mutable container of the Collector. Each map entry from the stream would be compared with the *root* element of the Heap. If the element is greater (entry holds a larger count) the next entry gets added to the queue root. And in case if the limit is exceeded, the root element should be removed.\r\n\r\nTo make the code reusable we can gentrify it. The first part (creating an intermediate map with Values representing frequencies of Keys) remains the same.\r\n\r\n    public static &lt;T, K&gt; List&lt;K&gt; getTopN(List&lt;T&gt; list,\r\n                                              Function&lt;T, K&gt; keyExtractor,\r\n                                              int limit) {\r\n        return list.stream()\r\n            .collect(Collectors.groupingBy(\r\n                keyExtractor,\r\n                Collectors.counting()\r\n            ))\r\n            .entrySet().stream()\r\n            .collect(getMaxN(\r\n                limit,\r\n                Map.Entry.&lt;K, Long&gt;comparingByValue().reversed(),\r\n                Map.Entry::getKey\r\n            ));\r\n    }\r\n\r\nMin Heap-based Collector:\r\n\r\n    public static &lt;T, R&gt; Collector&lt;T, ?, List&lt;R&gt;&gt; getMaxN(int size,\r\n                                                          Comparator&lt;T&gt; comparator,\r\n                                                          Function&lt;T, R&gt; keyExtractor) {\r\n        \r\n        return Collector.of(\r\n            () -&gt; new PriorityQueue&lt;&gt;(comparator),\r\n            (Queue&lt;T&gt; queue, T next) -&gt; tryAdd(queue, next, comparator, size),\r\n            (Queue&lt;T&gt; left, Queue&lt;T&gt; right) -&gt; {\r\n                right.forEach(next -&gt; tryAdd(left, next, comparator, size));\r\n                return left;\r\n            },\r\n            (Queue&lt;T&gt; queue) -&gt; queue.stream().map(keyExtractor).toList(),\r\n            Collector.Characteristics.UNORDERED\r\n        );\r\n    }\r\n\r\n    public static &lt;T&gt; void tryAdd(Queue&lt;T&gt; queue, T next, Comparator&lt;T&gt; comparator, int size) {\r\n        if (queue.size() == size &amp;&amp; comparator.compare(queue.element(), next) &lt; 0)\r\n            queue.remove(); // if next value is greater than the smallest element in the queue and max size has been exceeded the smallest element needs to be removed from the queue\r\n        if (queue.size() &lt; size) queue.add(next);\r\n    }","title":"Java Stream group by a field and order by this field count?","body":"<h1>Sorting</h1>\n<p>The simplest approach would be to group the data by <code>countryCode</code> by generating an auxiliary map of type <code>Map&lt;String, Long&gt;</code>, associating each <code>countryCode</code> with the count of cities.</p>\n<p>Then generate a stream over the map entries and sort it in the reverse order by <em>Value</em> (<em>i.e. in Descending order of the city count</em>).</p>\n<p>That how it might be implemented:</p>\n<pre><code>public static List&lt;String&gt; getTopNCodes(List&lt;City&gt; cities,\n                                        int limit) {\n    return cities.stream()\n        .collect(Collectors.groupingBy( // creates a Map&lt;String, Long&gt;\n            City::getCountryCode,\n            Collectors.counting()\n        ))\n        .entrySet().stream()\n        .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())\n        .limit(limit) // &lt;- retain top N\n        .map(Map.Entry::getKey)\n        .toList();\n}\n</code></pre>\n<p>Time complexity of this approach is <strong>O(n * log n)</strong> doe to sorting, which would be downside would be if number of elements to retrieve it small (like <code>3</code>), meanwhile the data is massive.</p>\n<p>We can do better.</p>\n<h1>Partial sorting using Custom Collector</h1>\n<p>Instead of sorting all entries of the auxiliary map, we can perform partial sorting using <code>PriorityQueue</code> (this class is an implementation of the <em>Binary Heap</em> offered by JDK).</p>\n<p>For that, we can implement a custom collector using static factory method <code>Collector.of()</code>.</p>\n<p>An instance of <code>PriorityQueue</code> would be used as a mutable container of the Collector. Each map entry from the stream would be compared with the <em>root</em> element of the Heap. If the element is greater (entry holds a larger count) the next entry gets added to the queue root. And in case if the limit is exceeded, the root element should be removed.</p>\n<p>To make the code reusable we can gentrify it. The first part (creating an intermediate map with Values representing frequencies of Keys) remains the same.</p>\n<pre><code>public static &lt;T, K&gt; List&lt;K&gt; getTopN(List&lt;T&gt; list,\n                                          Function&lt;T, K&gt; keyExtractor,\n                                          int limit) {\n    return list.stream()\n        .collect(Collectors.groupingBy(\n            keyExtractor,\n            Collectors.counting()\n        ))\n        .entrySet().stream()\n        .collect(getMaxN(\n            limit,\n            Map.Entry.&lt;K, Long&gt;comparingByValue().reversed(),\n            Map.Entry::getKey\n        ));\n}\n</code></pre>\n<p>Min Heap-based Collector:</p>\n<pre><code>public static &lt;T, R&gt; Collector&lt;T, ?, List&lt;R&gt;&gt; getMaxN(int size,\n                                                      Comparator&lt;T&gt; comparator,\n                                                      Function&lt;T, R&gt; keyExtractor) {\n    \n    return Collector.of(\n        () -&gt; new PriorityQueue&lt;&gt;(comparator),\n        (Queue&lt;T&gt; queue, T next) -&gt; tryAdd(queue, next, comparator, size),\n        (Queue&lt;T&gt; left, Queue&lt;T&gt; right) -&gt; {\n            right.forEach(next -&gt; tryAdd(left, next, comparator, size));\n            return left;\n        },\n        (Queue&lt;T&gt; queue) -&gt; queue.stream().map(keyExtractor).toList(),\n        Collector.Characteristics.UNORDERED\n    );\n}\n\npublic static &lt;T&gt; void tryAdd(Queue&lt;T&gt; queue, T next, Comparator&lt;T&gt; comparator, int size) {\n    if (queue.size() == size &amp;&amp; comparator.compare(queue.element(), next) &lt; 0)\n        queue.remove(); // if next value is greater than the smallest element in the queue and max size has been exceeded the smallest element needs to be removed from the queue\n    if (queue.size() &lt; size) queue.add(next);\n}\n</code></pre>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74549752,"answer_count":1,"score":1,"last_activity_date":1669221787,"creation_date":1669218270,"question_id":74549501,"body_markdown":"\r\n\r\nI am trying to get countryCode of the 3 countries that has max cities by usimng Java Stream on the following entity:\r\n\r\n\r\n***City:***\r\n\r\n```\r\nid   | name     | countryCode |\r\n------------------------------\r\n1    | Berlin   | DE          |\r\n2    | Munich   | DE          |\r\n3    | K&#246;ln     | DE          |\r\n4    | Paris    | FR          |\r\n5    | Kopenhag | DK          |\r\n...\r\n```\r\n\r\n\r\n\r\n\r\nI tried something, but not working as expected. So, what is the most proper way to get top 3 country code (top 3 mostly repeated country code)? \r\n\r\n```\r\nfinal Map&lt;String, City&gt; airportCodes2 = airportService.getCities().stream()\r\n                .map(City::getCountryCode, Function.identity())\r\n                .toMap();\r\n```","title":"Java Stream group by a field and order by this field count?","body":"<p>I am trying to get countryCode of the 3 countries that has max cities by usimng Java Stream on the following entity:</p>\n<p><em><strong>City:</strong></em></p>\n<pre><code>id   | name     | countryCode |\n------------------------------\n1    | Berlin   | DE          |\n2    | Munich   | DE          |\n3    | Kln     | DE          |\n4    | Paris    | FR          |\n5    | Kopenhag | DK          |\n...\n</code></pre>\n<p>I tried something, but not working as expected. So, what is the most proper way to get top 3 country code (top 3 mostly repeated country code)?</p>\n<pre><code>final Map&lt;String, City&gt; airportCodes2 = airportService.getCities().stream()\n                .map(City::getCountryCode, Function.identity())\n                .toMap();\n</code></pre>\n"},{"tags":["java","netbeans","jframe"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1669230161,"post_id":74549509,"comment_id":131599945,"body_markdown":"You can use `SwingUtilties.windowForComponent(....)` to get the top level container for a given component.","body":"You can use <code>SwingUtilties.windowForComponent(....)</code> to get the top level container for a given component."}],"answers":[{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669221614,"creation_date":1669221614,"answer_id":74550265,"question_id":74549509,"body_markdown":"You should create you JFrame instance in a way that it will be visible in your whole class.\r\n\r\nYou can achieve this by declaring a JFrame as a private member of your class. Then you will be able to access it in all class methods:\r\n\r\n    \r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class JFrameDemo {\r\n\tprivate JFrame frame;\r\n\r\n\tpublic JFrameDemo() {\r\n\t\tthis.frame=new JFrame(&quot;Demo #1&quot;);\r\n\t\tinitComponents();\r\n\t\tcreated();\r\n\t}\r\n\r\n\tprivate void initComponents() {\r\n\t\t// Do your stuff here\r\n\t}\r\n\r\n\tpublic void created() {\r\n\t\tint degisken = 1;\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.setBounds(0, 0, 100, 100);\r\n\t\tpanel.setPreferredSize(new Dimension(640, 480));\r\n\t\tpanel.setBackground(new Color(255, 128, 112));\r\n\t\tthis.frame.getContentPane().add(panel);\r\n\t\tthis.frame.pack();\r\n\t\tthis.frame.setVisible(true);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrameDemo frameDemo = new JFrameDemo();\r\n\t}\r\n}\r\n\r\n\r\nAnother solution is that your class extends JFrame. This way, you will access the JFrame instance using the `this` keyword because `this` is your class and thus your JFrame:\r\n\r\n    import java.awt.Color;\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class JFrameDemo2 extends JFrame {\r\n\r\n\tpublic JFrameDemo2() {\r\n\t\tsuper(&quot;Demo #2&quot;);\r\n\t\tinitComponents();\r\n\t\tcreated();\r\n\t}\r\n\r\n\tprivate void initComponents() {\r\n\t\t// Do your stuff here\r\n\t}\r\n\r\n\tpublic void created() {\r\n\t\tint degisken = 1;\r\n\t\tJPanel panel = new JPanel();\r\n\t\tpanel.setBounds(0, 0, 100, 100);\r\n\t\tpanel.setPreferredSize(new Dimension(640, 480));\r\n\t\tpanel.setBackground(new Color(255, 128, 112));\r\n\t\tthis.getContentPane().add(panel);\r\n\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrameDemo2 frameDemo = new JFrameDemo2();\r\n\t\tframeDemo.pack();\r\n\t\tframeDemo.setVisible(true);\r\n\t}\r\n}\r\n\r\nAnother remark: don&#39;t add your component directly on your JFrame but on the underlying container:\r\n\r\n    yourFrameInstance.getContentPane().add(yourComponentInstance)","title":"Selecting JFrame without using &#39;this&#39; command","body":"<p>You should create you JFrame instance in a way that it will be visible in your whole class.</p>\n<p>You can achieve this by declaring a JFrame as a private member of your class. Then you will be able to access it in all class methods:</p>\n<p>import java.awt.Color;\nimport java.awt.Dimension;</p>\n<p>import javax.swing.JFrame;\nimport javax.swing.JPanel;</p>\n<p>public class JFrameDemo {\nprivate JFrame frame;</p>\n<pre><code>public JFrameDemo() {\n    this.frame=new JFrame(&quot;Demo #1&quot;);\n    initComponents();\n    created();\n}\n\nprivate void initComponents() {\n    // Do your stuff here\n}\n\npublic void created() {\n    int degisken = 1;\n    JPanel panel = new JPanel();\n    panel.setBounds(0, 0, 100, 100);\n    panel.setPreferredSize(new Dimension(640, 480));\n    panel.setBackground(new Color(255, 128, 112));\n    this.frame.getContentPane().add(panel);\n    this.frame.pack();\n    this.frame.setVisible(true);\n}\n\npublic static void main(String[] args) {\n    JFrameDemo frameDemo = new JFrameDemo();\n}\n</code></pre>\n<p>}</p>\n<p>Another solution is that your class extends JFrame. This way, you will access the JFrame instance using the <code>this</code> keyword because <code>this</code> is your class and thus your JFrame:</p>\n<pre><code>import java.awt.Color;\n</code></pre>\n<p>import java.awt.Dimension;</p>\n<p>import javax.swing.JFrame;\nimport javax.swing.JPanel;</p>\n<p>public class JFrameDemo2 extends JFrame {</p>\n<pre><code>public JFrameDemo2() {\n    super(&quot;Demo #2&quot;);\n    initComponents();\n    created();\n}\n\nprivate void initComponents() {\n    // Do your stuff here\n}\n\npublic void created() {\n    int degisken = 1;\n    JPanel panel = new JPanel();\n    panel.setBounds(0, 0, 100, 100);\n    panel.setPreferredSize(new Dimension(640, 480));\n    panel.setBackground(new Color(255, 128, 112));\n    this.getContentPane().add(panel);\n\n}\n\npublic static void main(String[] args) {\n    JFrameDemo2 frameDemo = new JFrameDemo2();\n    frameDemo.pack();\n    frameDemo.setVisible(true);\n}\n</code></pre>\n<p>}</p>\n<p>Another remark: don't add your component directly on your JFrame but on the underlying container:</p>\n<pre><code>yourFrameInstance.getContentPane().add(yourComponentInstance)\n</code></pre>\n"}],"owner":{"account_id":26606857,"reputation":1,"user_id":20227546,"display_name":"Abdullah Yeil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669221614,"creation_date":1669218333,"question_id":74549509,"body_markdown":"```\r\n\r\n```\r\n        \r\n\r\n```\r\n public main() {\r\n        initComponents();\r\n JPanel panel=new JPanel();\r\n        panel.setBounds(0, 0, 100, 100);\r\n        panel.setBackground(Jtrue);\r\n        this.add(panel);\r\n}\r\n```\r\n\r\n```\r\n\r\n```\r\n\r\nI am able to add Jframe object using this command\r\n\r\n\r\nHowever, when I write this in a separate method, I cannot add because the &#39;this&#39; method is inside that object.\r\n\r\n\r\n```\r\n   public void created(){\r\n        \r\n        \r\n        int degisken=1;\r\n        JPanel panel=new JPanel();\r\n        panel.setBounds(0, 0, 100, 100);\r\n        panel.setBackground(Jtrue);\r\n        this.add(panel);\r\n       \r\n      \r\n      \r\n    }\r\n    \r\n```\r\nHow can I select that jframe instead of &#39;this&#39;\r\n\r\n\r\n\r\n\r\nI don&#39;t want to create a new jframe because there is already one\r\n","title":"Selecting JFrame without using &#39;this&#39; command","body":"<pre><code>\n</code></pre>\n<pre><code> public main() {\n        initComponents();\n JPanel panel=new JPanel();\n        panel.setBounds(0, 0, 100, 100);\n        panel.setBackground(Jtrue);\n        this.add(panel);\n}\n</code></pre>\n<pre><code>\n</code></pre>\n<p>I am able to add Jframe object using this command</p>\n<p>However, when I write this in a separate method, I cannot add because the 'this' method is inside that object.</p>\n<pre><code>   public void created(){\n        \n        \n        int degisken=1;\n        JPanel panel=new JPanel();\n        panel.setBounds(0, 0, 100, 100);\n        panel.setBackground(Jtrue);\n        this.add(panel);\n       \n      \n      \n    }\n    \n</code></pre>\n<p>How can I select that jframe instead of 'this'</p>\n<p>I don't want to create a new jframe because there is already one</p>\n"},{"tags":["java","android","android-fragments","android-intent","android-activity"],"answers":[{"tags":[],"owner":{"account_id":24296999,"reputation":169,"user_id":18241066,"display_name":""},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669080149,"creation_date":1669080149,"answer_id":74526527,"question_id":74526167,"body_markdown":"- Is Category serialized?\r\n- You can use BroadcastReceiver as an internal class, and then update the data of Adpater when it receives the data, because the code runs very fast, and it is not necessary to register for monitoring, and it will be processed immediately.","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<ul>\n<li>Is Category serialized?</li>\n<li>You can use BroadcastReceiver as an internal class, and then update the data of Adpater when it receives the data, because the code runs very fast, and it is not necessary to register for monitoring, and it will be processed immediately.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669081418,"creation_date":1669081036,"answer_id":74526611,"question_id":74526167,"body_markdown":"I guess the way you pass the data from `MainActivity` to `HomeFragment` is incorrect.\r\n\r\n**WHAT YOU EXPECT**\r\n\r\n1. Call `MainActivity#GetBooksAsync`\r\n2. Wait till `onPostExecute` has been called\r\n3. `HomeFragment` is ready to receive the broadcast message, then update UI\r\n4. Broadcast the message from `MainActivity` to the fragment\r\n\r\n**WHAT IS HAPPENING HERE**\r\n1. Call `MainActivity#GetBooksAsync`\r\n2. Wait till `onPostExecute` has been called\r\n3. Broadcast the message from `MainActivity`. There is no receiver to receive this message!\r\n4. `HomeFragment` is ready to receive the broadcast message, then update UI\r\n\r\n---\r\n**HOW SHALL YOU PASS THE DATA THEN?**\r\n\r\nThere are several way. \r\n\r\n1. Broadcast data between the UI component like the things you did. But you will **need to beaware the life cycle of the components**. That is, when you broadcast the data, the receiver must already init and the UI component is in active.\r\n\r\n2. Build a singleton class to store the data. Your activity and fragment treats the singleton class as a common place for the data storage.\r\n\r\n3. Use **Intent** and the **extra** property to pass the data IF the data size is small enough.\r\n\r\n4. Use LiveData. I believe it is the most modern way recommended by the community. Though I am not sure how its work.\r\n\r\n----\r\n\r\nTo verify the fact that it is an life cycle issue,\r\n\r\nyou can try to add a delay before you sending the broadcast message.\r\n\r\n```\r\nclass GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\r\n...\r\n    @Override\r\n    protected void onPostExecute(Void aVoid) {\r\n        super.onPostExecute(aVoid);\r\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n        intent.putExtra(&quot;categories&quot;, categories);\r\n        \r\n        TimerTask task = new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                manager.sendBroadcast(intent);\r\n            }\r\n        };\r\n\r\n        Timer timer = new Timer();\r\n        timer.schedule(task, 5 * 1000); // Delay the broadcast after 5 seconds\r\n\r\n        \r\n        replaceFragment(new HomeFragment());\r\n    }\r\n\r\n\r\n\r\n```","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I guess the way you pass the data from <code>MainActivity</code> to <code>HomeFragment</code> is incorrect.</p>\n<p><strong>WHAT YOU EXPECT</strong></p>\n<ol>\n<li>Call <code>MainActivity#GetBooksAsync</code></li>\n<li>Wait till <code>onPostExecute</code> has been called</li>\n<li><code>HomeFragment</code> is ready to receive the broadcast message, then update UI</li>\n<li>Broadcast the message from <code>MainActivity</code> to the fragment</li>\n</ol>\n<p><strong>WHAT IS HAPPENING HERE</strong></p>\n<ol>\n<li>Call <code>MainActivity#GetBooksAsync</code></li>\n<li>Wait till <code>onPostExecute</code> has been called</li>\n<li>Broadcast the message from <code>MainActivity</code>. There is no receiver to receive this message!</li>\n<li><code>HomeFragment</code> is ready to receive the broadcast message, then update UI</li>\n</ol>\n<hr />\n<p><strong>HOW SHALL YOU PASS THE DATA THEN?</strong></p>\n<p>There are several way.</p>\n<ol>\n<li><p>Broadcast data between the UI component like the things you did. But you will <strong>need to beaware the life cycle of the components</strong>. That is, when you broadcast the data, the receiver must already init and the UI component is in active.</p>\n</li>\n<li><p>Build a singleton class to store the data. Your activity and fragment treats the singleton class as a common place for the data storage.</p>\n</li>\n<li><p>Use <strong>Intent</strong> and the <strong>extra</strong> property to pass the data IF the data size is small enough.</p>\n</li>\n<li><p>Use LiveData. I believe it is the most modern way recommended by the community. Though I am not sure how its work.</p>\n</li>\n</ol>\n<hr />\n<p>To verify the fact that it is an life cycle issue,</p>\n<p>you can try to add a delay before you sending the broadcast message.</p>\n<pre><code>class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\n...\n    @Override\n    protected void onPostExecute(Void aVoid) {\n        super.onPostExecute(aVoid);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        \n        TimerTask task = new TimerTask() {\n            @Override\n            public void run() {\n                manager.sendBroadcast(intent);\n            }\n        };\n\n        Timer timer = new Timer();\n        timer.schedule(task, 5 * 1000); // Delay the broadcast after 5 seconds\n\n        \n        replaceFragment(new HomeFragment());\n    }\n\n\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24296999,"reputation":169,"user_id":18241066,"display_name":""},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669081675,"creation_date":1669081675,"answer_id":74526667,"question_id":74526167,"body_markdown":"Your Adapter should be written like this.\r\n```\r\n    class CategoryAdapter extends RecyclerView.Adapter&lt;CategoryAdapter.VHolder&gt;{\r\n        \r\n        private ArrayList&lt;Category&gt; list = new ArrayList&lt;Category&gt;();\r\n\r\n        public void setList(ArrayList&lt;Category&gt; list) {\r\n            this.list = list;\r\n            notifyDataSetChanged();\r\n        }\r\n\r\n        public CategoryAdapter(Context context) {\r\n            // Do not pass a list in the constructor, because the list may be empty\r\n        }\r\n         \r\n        class VHolder extends RecyclerView.ViewHolder {\r\n\r\n            public VHolder(@NonNull View itemView) {\r\n                super(itemView);\r\n            }\r\n        }\r\n        \r\n        ......\r\n}\r\n```\r\n\r\nYour fragment should have a global Adapter for BroadcastReceiver to update data\r\n```\r\npublic class Test extends Fragment {\r\n\r\n    // Create a global Adapter for BroadcastReceiver to call and update data\r\n    private CategoryAdapter adapter;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        adapter = new CategoryAdapter(getContext());\r\n        initBroadCastReceiver();\r\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n        recyclerView = view.findViewById(R.id.parent_rv);\r\n        recyclerView.setAdapter(categoryAdapter);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        return view;\r\n    }\r\n\r\n    private void initBroadCastReceiver() {\r\n        manager = LocalBroadcastManager.getInstance(getContext());\r\n        MyBroadCastReceiver receiver = new MyBroadCastReceiver();\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(&quot;com.android.mainapp&quot;);\r\n        manager.registerReceiver(receiver,filter);\r\n    }\r\n\r\n    class MyBroadCastReceiver extends BroadcastReceiver {\r\n\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            //get the categories from the intent\r\n            ArrayList&lt;Category&gt; categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\r\n            adapter.setList(categories);\r\n        }\r\n    }\r\n}\r\n```","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>Your Adapter should be written like this.</p>\n<pre><code>    class CategoryAdapter extends RecyclerView.Adapter&lt;CategoryAdapter.VHolder&gt;{\n        \n        private ArrayList&lt;Category&gt; list = new ArrayList&lt;Category&gt;();\n\n        public void setList(ArrayList&lt;Category&gt; list) {\n            this.list = list;\n            notifyDataSetChanged();\n        }\n\n        public CategoryAdapter(Context context) {\n            // Do not pass a list in the constructor, because the list may be empty\n        }\n         \n        class VHolder extends RecyclerView.ViewHolder {\n\n            public VHolder(@NonNull View itemView) {\n                super(itemView);\n            }\n        }\n        \n        ......\n}\n</code></pre>\n<p>Your fragment should have a global Adapter for BroadcastReceiver to update data</p>\n<pre><code>public class Test extends Fragment {\n\n    // Create a global Adapter for BroadcastReceiver to call and update data\n    private CategoryAdapter adapter;\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        adapter = new CategoryAdapter(getContext());\n        initBroadCastReceiver();\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\n        recyclerView = view.findViewById(R.id.parent_rv);\n        recyclerView.setAdapter(categoryAdapter);\n        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n        return view;\n    }\n\n    private void initBroadCastReceiver() {\n        manager = LocalBroadcastManager.getInstance(getContext());\n        MyBroadCastReceiver receiver = new MyBroadCastReceiver();\n        IntentFilter filter = new IntentFilter();\n        filter.addAction(&quot;com.android.mainapp&quot;);\n        manager.registerReceiver(receiver,filter);\n    }\n\n    class MyBroadCastReceiver extends BroadcastReceiver {\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            //get the categories from the intent\n            ArrayList&lt;Category&gt; categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\n            adapter.setList(categories);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669221142,"creation_date":1669221142,"answer_id":74550165,"question_id":74526167,"body_markdown":"I think there are several problems with your code:\r\n\r\n1. Your task is running in a different thread than the UIThread (which schedules the task and processes the result). That means it most probably runs on a different processor/core. Processed values (such as your collection) are cached in a processor and somewhen after execution the data is written back to RAM. But that might happen after the `onPostExecute` method is called, which takes the collection to another processor cache as well. But when this is done before the collection is returned to the RAM from the task, it&#39;s still empty. That&#39;s called a **race condition**.\r\n\r\nNow there are several ways to solve that. The simplest one is to use [`Collections.synchronizedList(categories)`][1]\r\nThis prevents the processor from caching list values and always return it to the RAM (or using L3 cache which is shared between all processors/cores).\r\n\r\n2. I&#39;m not sure what exactly you pass to the collection. Intents (and it&#39;s data) need to be serializable and what you add to your collection is probably not serializable.\r\n\r\nThen I would use the `AsyncTask` parameters:\r\n \r\n\r\n    class GetBooksAsync extends AsyncTask&lt;ECategories, Void, Collection&lt;Category&gt;&gt; {\r\n            LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\r\n        @Override\r\n        protected Void doInBackground(ECategories... eCategories) {\r\n            Collection&lt;Category&gt; categories = [whatever you want to use];\r\n            for (ECategories category : eCategories) {\r\n                try {\r\n                    categories.add(new Category(category.toString(), apiClient.getBooks(category)));\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            return categories;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(Collection&lt;Category&gt; categories) {\r\n            super.onPostExecute(categories);\r\n            Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n            intent.putExtra(&quot;categories&quot;, categories);\r\n            manager.sendBroadcast(intent);\r\n            replaceFragment(new HomeFragment());\r\n        }\r\n    }\r\n\r\nAnd note that `AsyncTask` and `LocalBroadcastManager` are deprecated.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List)","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I think there are several problems with your code:</p>\n<ol>\n<li>Your task is running in a different thread than the UIThread (which schedules the task and processes the result). That means it most probably runs on a different processor/core. Processed values (such as your collection) are cached in a processor and somewhen after execution the data is written back to RAM. But that might happen after the <code>onPostExecute</code> method is called, which takes the collection to another processor cache as well. But when this is done before the collection is returned to the RAM from the task, it's still empty. That's called a <strong>race condition</strong>.</li>\n</ol>\n<p>Now there are several ways to solve that. The simplest one is to use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.synchronizedList(categories)</code></a>\nThis prevents the processor from caching list values and always return it to the RAM (or using L3 cache which is shared between all processors/cores).</p>\n<ol start=\"2\">\n<li>I'm not sure what exactly you pass to the collection. Intents (and it's data) need to be serializable and what you add to your collection is probably not serializable.</li>\n</ol>\n<p>Then I would use the <code>AsyncTask</code> parameters:</p>\n<pre><code>class GetBooksAsync extends AsyncTask&lt;ECategories, Void, Collection&lt;Category&gt;&gt; {\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\n    @Override\n    protected Void doInBackground(ECategories... eCategories) {\n        Collection&lt;Category&gt; categories = [whatever you want to use];\n        for (ECategories category : eCategories) {\n            try {\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return categories;\n    }\n    @Override\n    protected void onPostExecute(Collection&lt;Category&gt; categories) {\n        super.onPostExecute(categories);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        manager.sendBroadcast(intent);\n        replaceFragment(new HomeFragment());\n    }\n}\n</code></pre>\n<p>And note that <code>AsyncTask</code> and <code>LocalBroadcastManager</code> are deprecated.</p>\n"}],"owner":{"account_id":27007195,"reputation":51,"user_id":20567458,"display_name":"YOUSSEF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74550165,"answer_count":4,"score":0,"last_activity_date":1669221142,"creation_date":1669076138,"question_id":74526167,"body_markdown":"I&#39;m trying to pass an ArrayList from an AsyncTask in the MainActivity to a fragment, but I&#39;m getting a *NullPointerException* for invoking \r\n``\r\nCategoryAdapter.getItemCount()`` even if I&#39;m passing the array after the BroadCastReceiver Invoke.\r\n\r\nWhat Am I doing wrong?\r\n\r\n\r\n\r\n\r\n**MainActivity**\r\n```java\r\n class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\r\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\r\n    @Override\r\n    protected Void doInBackground(Void... voids) {\r\n        for (ECategories category : ECategories.values()) {\r\n            try {\r\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    @Override\r\n    protected void onPostExecute(Void aVoid) {\r\n        super.onPostExecute(aVoid);\r\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\r\n        intent.putExtra(&quot;categories&quot;, categories);\r\n        manager.sendBroadcast(intent);\r\n        replaceFragment(new HomeFragment());\r\n    }\r\n}\r\n```\r\n**HomeFragment**\r\n```java\r\n@Override\r\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                         Bundle savedInstanceState) {\r\n    initBroadCastReceiver();\r\n    categoryAdapter = new CategoryAdapter(categories,getContext());\r\n    View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n    recyclerView = view.findViewById(R.id.parent_rv);\r\n    recyclerView.setAdapter(categoryAdapter);\r\n    recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\r\n    categoryAdapter.notifyDataSetChanged();\r\n    return view;\r\n}\r\n\r\nprivate void initBroadCastReceiver() {\r\n    manager = LocalBroadcastManager.getInstance(getContext());\r\n    MyBroadCastReceiver receiver = new MyBroadCastReceiver();\r\n    IntentFilter filter = new IntentFilter();\r\n    filter.addAction(&quot;com.android.mainapp&quot;);\r\n    manager.registerReceiver(receiver,filter);\r\n}\r\n\r\nclass MyBroadCastReceiver extends BroadcastReceiver {\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        //get the categories from the intent\r\n        categories = new ArrayList&lt;Category&gt;();\r\n        categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\r\n    }\r\n}\r\n```\r\ni&#39;ve also tried attaching the recyclerView from the OnReceive Method, but it&#39;s not getting attached.\r\nThank you in advance!\r\n","title":"Passing data from Activity to Fragment using AsyncTask - Android","body":"<p>I'm trying to pass an ArrayList from an AsyncTask in the MainActivity to a fragment, but I'm getting a <em>NullPointerException</em> for invoking\n<code> CategoryAdapter.getItemCount()</code> even if I'm passing the array after the BroadCastReceiver Invoke.</p>\n<p>What Am I doing wrong?</p>\n<p><strong>MainActivity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code> class GetBooksAsync extends AsyncTask&lt;Void, Void, Void&gt; {\n        LocalBroadcastManager manager = LocalBroadcastManager.getInstance(getApplicationContext());\n    @Override\n    protected Void doInBackground(Void... voids) {\n        for (ECategories category : ECategories.values()) {\n            try {\n                categories.add(new Category(category.toString(), apiClient.getBooks(category)));\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return null;\n    }\n    @Override\n    protected void onPostExecute(Void aVoid) {\n        super.onPostExecute(aVoid);\n        Intent intent = new Intent(&quot;com.android.mainapp&quot;);\n        intent.putExtra(&quot;categories&quot;, categories);\n        manager.sendBroadcast(intent);\n        replaceFragment(new HomeFragment());\n    }\n}\n</code></pre>\n<p><strong>HomeFragment</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    initBroadCastReceiver();\n    categoryAdapter = new CategoryAdapter(categories,getContext());\n    View view = inflater.inflate(R.layout.fragment_home, container, false);\n    recyclerView = view.findViewById(R.id.parent_rv);\n    recyclerView.setAdapter(categoryAdapter);\n    recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));\n    categoryAdapter.notifyDataSetChanged();\n    return view;\n}\n\nprivate void initBroadCastReceiver() {\n    manager = LocalBroadcastManager.getInstance(getContext());\n    MyBroadCastReceiver receiver = new MyBroadCastReceiver();\n    IntentFilter filter = new IntentFilter();\n    filter.addAction(&quot;com.android.mainapp&quot;);\n    manager.registerReceiver(receiver,filter);\n}\n\nclass MyBroadCastReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        //get the categories from the intent\n        categories = new ArrayList&lt;Category&gt;();\n        categories = (ArrayList&lt;Category&gt;) intent.getSerializableExtra(&quot;categories&quot;);\n    }\n}\n</code></pre>\n<p>i've also tried attaching the recyclerView from the OnReceive Method, but it's not getting attached.\nThank you in advance!</p>\n"},{"tags":["java","android","file","android-intent","storage"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1669066826,"post_id":74525037,"comment_id":131554681,"body_markdown":"&quot;The file is created, but the file itself is empty; 0 byte.&quot; -- you do not show any code where you are writing anything. Did you put code in an `onActivityResult()` method to use the `Uri` that you get, then use `ContentResolver` and `openOutputStream()` to get a stream to write to?","body":"&quot;The file is created, but the file itself is empty; 0 byte.&quot; -- you do not show any code where you are writing anything. Did you put code in an <code>onActivityResult()</code> method to use the <code>Uri</code> that you get, then use <code>ContentResolver</code> and <code>openOutputStream()</code> to get a stream to write to?"},{"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"score":0,"creation_date":1669220495,"post_id":74525037,"comment_id":131596545,"body_markdown":"Yep. You had the right idea. In my onActivitiesResult, I created a ContentResolver and used it to openOutputStream(uri) for an OutputStream variable (called os). What I forgot to do was to store the bytes in variable and then use os.write(bytes). Thanks for suggestion!","body":"Yep. You had the right idea. In my onActivitiesResult, I created a ContentResolver and used it to openOutputStream(uri) for an OutputStream variable (called os). What I forgot to do was to store the bytes in variable and then use os.write(bytes). Thanks for suggestion!"}],"answers":[{"tags":[],"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669220720,"creation_date":1669220720,"answer_id":74550070,"question_id":74525037,"body_markdown":"Using CommonsWare suggestions, I created an onActivityResult() and passed in the CREATE_FILE request code from createFile(File url) like so.\r\n```\r\n   @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {\r\n        super.onActivityResult(requestCode, resultCode, intent);\r\n        if (requestCode == CREATE_FILE) {\r\n            Uri uri = intent.getData();\r\n            final ContentResolver resolver = getContentResolver();\r\n            try {\r\n                OutputStream os = resolver.openOutputStream(uri);\r\n                if (os != null)\r\n                    os.write(encryptedFileBytes);\r\n                os.close();\r\n\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n```\r\nThanks!","title":"Files created from Intent.ACTION_OPEN_DOCUMENT is 0 byte (Storage Access Framework)","body":"<p>Using CommonsWare suggestions, I created an onActivityResult() and passed in the CREATE_FILE request code from createFile(File url) like so.</p>\n<pre><code>   @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {\n        super.onActivityResult(requestCode, resultCode, intent);\n        if (requestCode == CREATE_FILE) {\n            Uri uri = intent.getData();\n            final ContentResolver resolver = getContentResolver();\n            try {\n                OutputStream os = resolver.openOutputStream(uri);\n                if (os != null)\n                    os.write(encryptedFileBytes);\n                os.close();\n\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n</code></pre>\n<p>Thanks!</p>\n"}],"owner":{"account_id":27006050,"reputation":11,"user_id":20566510,"display_name":"Khiem Luong"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669220720,"creation_date":1669065773,"question_id":74525037,"body_markdown":"I am trying to create a file manager app but I am running into issues with creating new files.\r\n\r\nI am able to open and read files from the app using Intent.ACTION_VIEW and I have implemented a function that sets the Mime Type, so incorrect directories are not the issue.\r\n\r\nBut I wanted to save that file to another directory, so I added another Intent for creating files using the Storage Access Framework (SAF). As seen below:\r\n\r\n```\r\npublic void createFile(File url) {\r\n    Uri uri = Uri.fromFile(url);\r\n    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);\r\n    intent.addCategory(Intent.CATEGORY_OPENABLE);\r\n    USBUtils.intentUriFilter(url, intent);\r\n\r\n    intent.putExtra(Intent.EXTRA_TITLE, url.getName());\r\n\r\n    intent.putExtra(DocumentsContract.EXTRA_INITIAL_URI, uri);\r\n    startActivityForResult(intent, CREATE_FILE);\r\n}\r\n```\r\n\r\nAgain, I dynamically set the Mime Type from the URL that was passed in and the SAF popup does appear allowing me to choose where the file is downloaded. In the example below I tried to save a copy of 0005.jpg as 0005b.jpg, [as seen in the Emulator display below](https://i.stack.imgur.com/XX1kt.png).\r\n\r\nThe file is created, but the file itself is [empty; 0 byte][1].\r\n\r\nIs there a way to write a byte array to this intent file similar to Files.write(outputFile.toPath(), dataForWriting), where dataForWriting is the byte array? Or maybe move the file created from Files.write() using Intent, not Files.move() or Files.copy()?\r\n\r\n**Some caveats from my attempts at solving this issue:**\r\n1. Files.write() does work, however I want the user to be able to specify where the written file goes through the SAF.\r\n2. With Android 10/API 29 (My target version) I have to deal with scoped storage, so I passed in these flags in the AndroidManifest.xml\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n```\r\n\r\nand\r\n\r\n```\r\nandroid:requestLegacyExternalStorage=&quot;true&quot;\r\n```\r\n\r\nin the application tag. I also have a permission check function which states that I do have write and read external storage permission. This means that Files.write() did not work on some directories, and I have to create files through the SAF.\r\n\r\n3. I am trying to write data to a USB drive that&#39;s connected to the phone (this is basically an app that manages files on a USB). With that being said, Files.write() does not have permission to write directly to a USB, because USBs don&#39;t have an &quot;emulated&quot; folder.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0VCrr.png","title":"Files created from Intent.ACTION_OPEN_DOCUMENT is 0 byte (Storage Access Framework)","body":"<p>I am trying to create a file manager app but I am running into issues with creating new files.</p>\n<p>I am able to open and read files from the app using Intent.ACTION_VIEW and I have implemented a function that sets the Mime Type, so incorrect directories are not the issue.</p>\n<p>But I wanted to save that file to another directory, so I added another Intent for creating files using the Storage Access Framework (SAF). As seen below:</p>\n<pre><code>public void createFile(File url) {\n    Uri uri = Uri.fromFile(url);\n    Intent intent = new Intent(Intent.ACTION_CREATE_DOCUMENT);\n    intent.addCategory(Intent.CATEGORY_OPENABLE);\n    USBUtils.intentUriFilter(url, intent);\n\n    intent.putExtra(Intent.EXTRA_TITLE, url.getName());\n\n    intent.putExtra(DocumentsContract.EXTRA_INITIAL_URI, uri);\n    startActivityForResult(intent, CREATE_FILE);\n}\n</code></pre>\n<p>Again, I dynamically set the Mime Type from the URL that was passed in and the SAF popup does appear allowing me to choose where the file is downloaded. In the example below I tried to save a copy of 0005.jpg as 0005b.jpg, <a href=\"https://i.stack.imgur.com/XX1kt.png\" rel=\"nofollow noreferrer\">as seen in the Emulator display below</a>.</p>\n<p>The file is created, but the file itself is <a href=\"https://i.stack.imgur.com/0VCrr.png\" rel=\"nofollow noreferrer\">empty; 0 byte</a>.</p>\n<p>Is there a way to write a byte array to this intent file similar to Files.write(outputFile.toPath(), dataForWriting), where dataForWriting is the byte array? Or maybe move the file created from Files.write() using Intent, not Files.move() or Files.copy()?</p>\n<p><strong>Some caveats from my attempts at solving this issue:</strong></p>\n<ol>\n<li>Files.write() does work, however I want the user to be able to specify where the written file goes through the SAF.</li>\n<li>With Android 10/API 29 (My target version) I have to deal with scoped storage, so I passed in these flags in the AndroidManifest.xml</li>\n</ol>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n</code></pre>\n<p>and</p>\n<pre><code>android:requestLegacyExternalStorage=&quot;true&quot;\n</code></pre>\n<p>in the application tag. I also have a permission check function which states that I do have write and read external storage permission. This means that Files.write() did not work on some directories, and I have to create files through the SAF.</p>\n<ol start=\"3\">\n<li>I am trying to write data to a USB drive that's connected to the phone (this is basically an app that manages files on a USB). With that being said, Files.write() does not have permission to write directly to a USB, because USBs don't have an &quot;emulated&quot; folder.</li>\n</ol>\n"},{"tags":["java","arrays","recursion"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1669223161,"post_id":74549900,"comment_id":131597617,"body_markdown":"You&#39;ve almost got it. when you call printArray(arr, arr.length - 1); The if statement passes, the call to printArray is called with arr.length, which is fine, but then you&#39;re calling arr[i] but i == arr.length. Switch the order, or even better just use i+1.","body":"You&#39;ve almost got it. when you call printArray(arr, arr.length - 1); The if statement passes, the call to printArray is called with arr.length, which is fine, but then you&#39;re calling arr[i] but i == arr.length. Switch the order, or even better just use i+1."}],"answers":[{"tags":[],"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669220511,"creation_date":1669220162,"answer_id":74549951,"question_id":74549900,"body_markdown":"`++i` increments the value - it actually changes it (and evaluates as the updated value.) \r\n\r\n`++i`, `i++` and the subtle distinction between them has been the cause of many and frustrating bugs. This is just my opinion, but I advise never using either one of them except as a single-line statement when you need to increment something. The brevity isn&#39;t worth the risk of bugs.\r\n\r\nSo if you enter `printArray` with `i=arr.length-1`, then you get past your i guard, increment i, make the recursive call (which returns), and then try to access `arr[arr.length - 1 + 1], which is out of bounds.\r\n\r\nIf you&#39;re just learning about recursion, you might be confused at how local variables and returns work in a method. Each time you call a method, that&#39;s a new stack frame (a section of memory) with completely different values for its local variables, and which returns independently. `i` is not &quot;`i` in every usage of the method named `printArray`&quot;, it&#39;s only &quot;`i` in the current application of the method `printArray`.&quot; Similarly when you return, you cease to run the *current* application of `printArray`, but not every application.\r\n\r\nSorry if that part&#39;s all stuff you know - I find it&#39;s one of those things that&#39;s completely mind boggling to people starting out, and then becomes completely obvious a week later.","title":"why my code give error of arrayIndex out of bound?","body":"<p><code>++i</code> increments the value - it actually changes it (and evaluates as the updated value.)</p>\n<p><code>++i</code>, <code>i++</code> and the subtle distinction between them has been the cause of many and frustrating bugs. This is just my opinion, but I advise never using either one of them except as a single-line statement when you need to increment something. The brevity isn't worth the risk of bugs.</p>\n<p>So if you enter <code>printArray</code> with <code>i=arr.length-1</code>, then you get past your i guard, increment i, make the recursive call (which returns), and then try to access `arr[arr.length - 1 + 1], which is out of bounds.</p>\n<p>If you're just learning about recursion, you might be confused at how local variables and returns work in a method. Each time you call a method, that's a new stack frame (a section of memory) with completely different values for its local variables, and which returns independently. <code>i</code> is not &quot;<code>i</code> in every usage of the method named <code>printArray</code>&quot;, it's only &quot;<code>i</code> in the current application of the method <code>printArray</code>.&quot; Similarly when you return, you cease to run the <em>current</em> application of <code>printArray</code>, but not every application.</p>\n<p>Sorry if that part's all stuff you know - I find it's one of those things that's completely mind boggling to people starting out, and then becomes completely obvious a week later.</p>\n"},{"tags":[],"owner":{"account_id":27026595,"reputation":24,"user_id":20583761,"display_name":"arctic_fox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669220538,"creation_date":1669220478,"answer_id":74550023,"question_id":74549900,"body_markdown":"Replace ++i with i+1\r\n\r\nYou are incrementing the value of local variable in function. Instead of incrementing, send next value to other function as you will use that local variable value while printing in your function.","title":"why my code give error of arrayIndex out of bound?","body":"<p>Replace ++i with i+1</p>\n<p>You are incrementing the value of local variable in function. Instead of incrementing, send next value to other function as you will use that local variable value while printing in your function.</p>\n"}],"owner":{"account_id":24440789,"reputation":1,"user_id":18364522,"display_name":"1018_csds_Pranjal Sharma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1669220674,"answer_count":2,"score":-3,"last_activity_date":1669220538,"creation_date":1669219936,"question_id":74549900,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class recursion_4 {\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int n = sc.nextInt();\r\n        int a[] = new int[n];\r\n        for (int i = 0; i &lt; n; i++) {\r\n            a[i] = sc.nextInt();\r\n        }\r\n        printArray(a, 0);\r\n        sc.close();\r\n    }\r\n\r\n    static void printArray(int arr[], int i) {\r\n        if (i == arr.length) {\r\n            return;\r\n        }\r\n        printArray(arr, ++i);\r\n        System.out.println(arr[i]);\r\n    }\r\n}\r\n```\r\n\r\nI am try to print array element using recursion.\r\n\r\nBut it give error of arrayIndex Out of bound.","title":"why my code give error of arrayIndex out of bound?","body":"<pre><code>import java.util.Scanner;\n\npublic class recursion_4 {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        int a[] = new int[n];\n        for (int i = 0; i &lt; n; i++) {\n            a[i] = sc.nextInt();\n        }\n        printArray(a, 0);\n        sc.close();\n    }\n\n    static void printArray(int arr[], int i) {\n        if (i == arr.length) {\n            return;\n        }\n        printArray(arr, ++i);\n        System.out.println(arr[i]);\n    }\n}\n</code></pre>\n<p>I am try to print array element using recursion.</p>\n<p>But it give error of arrayIndex Out of bound.</p>\n"},{"tags":["java","gradle","openapi-generator"],"owner":{"account_id":297370,"reputation":3213,"user_id":602856,"accept_rate":40,"display_name":"rainer198"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669220510,"creation_date":1669220510,"question_id":74550029,"body_markdown":"How would you structure a Gradle project which should do the following?\r\n\r\n- generate a spring boot skeleton for an openapi REST api spec.\r\n- building a spring boot application which implents this skeleton. This will be the server application.\r\n- generate a Java client from the same openapi spec, which is published to something like artifactory and can be used by other projects.\r\n\r\nThe challenges I see here are:\r\n- Where to put the `openapi.yml`. In a separate gradle subproject which only provided the openapi spec as a resource and which is a dependency for a server and client subproject? How can I refer to the spec in the `inputSpec` property of the openApiGenerate task?\r\n- There have to be two openapi generator tasks, one for the server code and one for the client. Should is be in the same gradle subproject? How is this possible technically? To me, this seems wrong anyway, since you actively have to define which packages to include when building the client jar. And the server code would also contain the client classes by default.\r\n\r\n\r\n","title":"What it the best structure for an openapi api-first gradle project?","body":"<p>How would you structure a Gradle project which should do the following?</p>\n<ul>\n<li>generate a spring boot skeleton for an openapi REST api spec.</li>\n<li>building a spring boot application which implents this skeleton. This will be the server application.</li>\n<li>generate a Java client from the same openapi spec, which is published to something like artifactory and can be used by other projects.</li>\n</ul>\n<p>The challenges I see here are:</p>\n<ul>\n<li>Where to put the <code>openapi.yml</code>. In a separate gradle subproject which only provided the openapi spec as a resource and which is a dependency for a server and client subproject? How can I refer to the spec in the <code>inputSpec</code> property of the openApiGenerate task?</li>\n<li>There have to be two openapi generator tasks, one for the server code and one for the client. Should is be in the same gradle subproject? How is this possible technically? To me, this seems wrong anyway, since you actively have to define which packages to include when building the client jar. And the server code would also contain the client classes by default.</li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1669200916,"post_id":74545627,"comment_id":131589114,"body_markdown":"Does this answer your question? [How to convert a string with Unicode encoding to a string of letters](https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters\">How to convert a string with Unicode encoding to a string of letters</a>"},{"owner":{"account_id":27020486,"reputation":1,"user_id":20578534,"display_name":"TGXZereF"},"score":1,"creation_date":1669201371,"post_id":74545627,"comment_id":131589277,"body_markdown":"@f1sh unfortunately no, I have gone through the answers but the problem here is I have to display an emoji and not normal characters. The unescapeJava() method or the other codes don&#39;t help.","body":"@f1sh unfortunately no, I have gone through the answers but the problem here is I have to display an emoji and not normal characters. The unescapeJava() method or the other codes don&#39;t help."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1669220470,"creation_date":1669201450,"answer_id":74545768,"question_id":74545627,"body_markdown":"U+1F601 describes [a Unicode codepoint][1].\r\n\r\n*Often* when you want to convert a codepoint to a `String` in Java then what you describe will work.\r\n\r\n*However* it only works when the codepoint is in [the Basic Multilingual Plane][2], which basically means it&#39;s smaller than U+10000 (i.e. at most 4 hex digits). The BMP includes *most* frequently used characters, but is notably *not* home to many newer emojis.\r\n\r\nIf it&#39;s above that point, then you need to use two `char` values to combine into a single codepoint with [some math][3].\r\n\r\nLuckily you don&#39;t have to do that math on your own, but can use [this version of `Character.toString`][4] instead:\r\n\r\n    Character.toString(0x1F601);\r\n\r\nAnd to fully implement the replacement, we can simply [use `Matcher.replaceAll`][5]:\r\n\r\n    String input = &quot;Hello U+1F601&quot;;\r\n    Pattern p = Pattern.compile(&quot;U\\\\+([0-9a-fA-F]{4,6})&quot;);\r\n    String result = p.matcher(input).replaceAll(r -&gt; Character.toString(Integer.parseInt(r.group(1), 16)));\r\n    System.out.println(result);\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Unicode#Codespace_and_Code_Points\r\n  [2]: https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\r\n  [3]: https://en.wikipedia.org/wiki/UTF-16#Code_points_from_U+010000_to_U+10FFFF\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#toString(int)\r\n  [5]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)","title":"How do I convert Unicode U+xxxx representation of an emoji into the emoji in Java?","body":"<p>U+1F601 describes <a href=\"https://en.wikipedia.org/wiki/Unicode#Codespace_and_Code_Points\" rel=\"nofollow noreferrer\">a Unicode codepoint</a>.</p>\n<p><em>Often</em> when you want to convert a codepoint to a <code>String</code> in Java then what you describe will work.</p>\n<p><em>However</em> it only works when the codepoint is in <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">the Basic Multilingual Plane</a>, which basically means it's smaller than U+10000 (i.e. at most 4 hex digits). The BMP includes <em>most</em> frequently used characters, but is notably <em>not</em> home to many newer emojis.</p>\n<p>If it's above that point, then you need to use two <code>char</code> values to combine into a single codepoint with <a href=\"https://en.wikipedia.org/wiki/UTF-16#Code_points_from_U+010000_to_U+10FFFF\" rel=\"nofollow noreferrer\">some math</a>.</p>\n<p>Luckily you don't have to do that math on your own, but can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#toString(int)\" rel=\"nofollow noreferrer\">this version of <code>Character.toString</code></a> instead:</p>\n<pre><code>Character.toString(0x1F601);\n</code></pre>\n<p>And to fully implement the replacement, we can simply <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#replaceAll(java.util.function.Function)\" rel=\"nofollow noreferrer\">use <code>Matcher.replaceAll</code></a>:</p>\n<pre><code>String input = &quot;Hello U+1F601&quot;;\nPattern p = Pattern.compile(&quot;U\\\\+([0-9a-fA-F]{4,6})&quot;);\nString result = p.matcher(input).replaceAll(r -&gt; Character.toString(Integer.parseInt(r.group(1), 16)));\nSystem.out.println(result);\n</code></pre>\n"}],"owner":{"account_id":27020486,"reputation":1,"user_id":20578534,"display_name":"TGXZereF"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669220470,"creation_date":1669200779,"question_id":74545627,"body_markdown":"I have a string with Unicode representation of emoji like this:\r\n\r\n&quot;Hello U+1F601&quot;\r\n\r\nI want to convert this into:\r\n\r\n&quot;Hello &#128513;&quot;\r\n\r\nI have tried decoding them using the `parseInt()` method and converting it to `char`, but I keep getting a black and white glyph like this - &#128437;.\r\n\r\nAny pointers how can I can achieve the intended result with Java?\r\n\r\nP.S: `unescapeJava()` method doesn&#39;t work here. I have tried it and also some other answers from other similar threads.","title":"How do I convert Unicode U+xxxx representation of an emoji into the emoji in Java?","body":"<p>I have a string with Unicode representation of emoji like this:</p>\n<p>&quot;Hello U+1F601&quot;</p>\n<p>I want to convert this into:</p>\n<p>&quot;Hello &quot;</p>\n<p>I have tried decoding them using the <code>parseInt()</code> method and converting it to <code>char</code>, but I keep getting a black and white glyph like this - .</p>\n<p>Any pointers how can I can achieve the intended result with Java?</p>\n<p>P.S: <code>unescapeJava()</code> method doesn't work here. I have tried it and also some other answers from other similar threads.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":27026319,"reputation":51,"user_id":20583527,"display_name":"S&#252;rmu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669219274,"creation_date":1669219274,"answer_id":74549759,"question_id":74544450,"body_markdown":"I didn&#39;t use `BottomNavigationActivity`, but you normally use controls (such as your `textView`) inside the `Fragment` itself (eg. in the `onViewCreated` method after inflation of the according layout). Take a look at [this post][1].\r\nProbably that&#39;s the reason, why it&#39;s not inflated, because you did not do it in the `Fragment`.\r\n\r\nTo communicate between `Fragments` and/or `Activity` you can use `ViewModels`. You define a `ViewModel` for the Activity and get it in the Fragment with \r\n\r\n    new ViewModelProvider(getActivity()).get(YourModel.class)\r\n\r\nIn the ViewModel itself it&#39;s best do define `(Mutable)LiveData&lt;&gt;` and observe it. So whenever you change the data, you are notified, plus you don&#39;t need to worry about the fragment state. LiveData checks, whether your fragment still exists and removes it from the list of observers when it&#39;s destroyed.\r\n\r\nWithin the \r\n\r\n  [1]: https://guides.codepath.com/android/Creating-and-Using-Fragments","title":"How to connect Activity and Fragment when creating activity(Android)","body":"<p>I didn't use <code>BottomNavigationActivity</code>, but you normally use controls (such as your <code>textView</code>) inside the <code>Fragment</code> itself (eg. in the <code>onViewCreated</code> method after inflation of the according layout). Take a look at <a href=\"https://guides.codepath.com/android/Creating-and-Using-Fragments\" rel=\"nofollow noreferrer\">this post</a>.\nProbably that's the reason, why it's not inflated, because you did not do it in the <code>Fragment</code>.</p>\n<p>To communicate between <code>Fragments</code> and/or <code>Activity</code> you can use <code>ViewModels</code>. You define a <code>ViewModel</code> for the Activity and get it in the Fragment with</p>\n<pre><code>new ViewModelProvider(getActivity()).get(YourModel.class)\n</code></pre>\n<p>In the ViewModel itself it's best do define <code>(Mutable)LiveData&lt;&gt;</code> and observe it. So whenever you change the data, you are notified, plus you don't need to worry about the fragment state. LiveData checks, whether your fragment still exists and removes it from the list of observers when it's destroyed.</p>\n<p>Within the</p>\n"}],"owner":{"account_id":24233662,"reputation":3,"user_id":18187077,"display_name":"Dust"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74549759,"answer_count":1,"score":0,"last_activity_date":1669219274,"creation_date":1669195667,"question_id":74544450,"body_markdown":"I created an android project using the **Bottom Navigation Activity template**, but I found it difficult to connect Activity and Fragment. For example, when a activity star the MainActivity, and there&#39;s a textView in the HomeFragment, I want to set the text in the onCreate() func in MainActivity. I&#39;ve try\r\n```java\r\n((TextView) binding.getRoot().getViewById(R.id.textView)).setText(test);\r\n```\r\nbut it seems the Fragment not be created yet so I get null pointer.\r\nThe project structure and the MainActivity Class as follow,\r\n[enter image description here](https://i.stack.imgur.com/TTi1Q.png)\r\nThe textView is a View id in navigation_home\r\nI am new in android development, thks.\r\n\r\n\r\nThe way to connect the Activity and the Fragment in it","title":"How to connect Activity and Fragment when creating activity(Android)","body":"<p>I created an android project using the <strong>Bottom Navigation Activity template</strong>, but I found it difficult to connect Activity and Fragment. For example, when a activity star the MainActivity, and there's a textView in the HomeFragment, I want to set the text in the onCreate() func in MainActivity. I've try</p>\n<pre class=\"lang-java prettyprint-override\"><code>((TextView) binding.getRoot().getViewById(R.id.textView)).setText(test);\n</code></pre>\n<p>but it seems the Fragment not be created yet so I get null pointer.\nThe project structure and the MainActivity Class as follow,\n<a href=\"https://i.stack.imgur.com/TTi1Q.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThe textView is a View id in navigation_home\nI am new in android development, thks.</p>\n<p>The way to connect the Activity and the Fragment in it</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669218866,"creation_date":1669218866,"answer_id":74549657,"question_id":74549597,"body_markdown":"In Java 11, all of the so-called &quot;enterprise&quot; modules got removed from the JDK and JRE. That includes APIs like JAXB, but also the Java Activation Framework. That&#39;s needed by JavaMail, but your application is missing it (as shown by the error message).\r\n\r\nAdd this dependency: https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2. Make sure to stay away from version 2.x and higher, those have a different package name.","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>In Java 11, all of the so-called &quot;enterprise&quot; modules got removed from the JDK and JRE. That includes APIs like JAXB, but also the Java Activation Framework. That's needed by JavaMail, but your application is missing it (as shown by the error message).</p>\n<p>Add this dependency: <a href=\"https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/jakarta.activation/jakarta.activation-api/1.2.2</a>. Make sure to stay away from version 2.x and higher, those have a different package name.</p>\n"},{"tags":[],"owner":{"account_id":27015200,"reputation":71,"user_id":20574184,"display_name":"mttt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669219157,"creation_date":1669219157,"answer_id":74549737,"question_id":74549597,"body_markdown":"java.lang.NoClassDefFoundError means the class can&#39; t be found in the classpath, based on your description I think you are creating a jar by ant and then execute it with java -jar. \r\nYou should check:\r\n\r\n 1. in the java command there is a -cp option with the needed jar\r\n 2. the needed jar is correctly pointed at","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>java.lang.NoClassDefFoundError means the class can' t be found in the classpath, based on your description I think you are creating a jar by ant and then execute it with java -jar.\nYou should check:</p>\n<ol>\n<li>in the java command there is a -cp option with the needed jar</li>\n<li>the needed jar is correctly pointed at</li>\n</ol>\n"}],"owner":{"account_id":26721652,"reputation":13,"user_id":20325375,"display_name":"Dox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":866,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74549657,"answer_count":2,"score":1,"last_activity_date":1669219265,"creation_date":1669218659,"question_id":74549597,"body_markdown":"I&#39;m trying to create an Java Swing (with Ant) application to send an email to a desired address(My first time).The application builds successfully but when I click the button to send the email I get a lot of different error messages, with the first being a java.lang.NoClassDefFoundError: javax/activation/DataSource .The sender email is new and I did not assosciate it with a phone number(I was told it might lead to issues). I&#39;ve also have already added the mail.jar to the project library. The catch JOptionPane did not print any errors as well so I&#39;m having a hard time figuring this out. I&#39;ve attached the code as well as a [screenshot](https://i.stack.imgur.com/MpxLL.png) of the error.\r\n\r\n&gt;     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \r\n&gt;         \r\n&gt;         String toEmail= &quot;email1&quot;;//Changed emails for securityPurposes\r\n&gt; \r\n&gt;         String fromEmail = &quot;email2&quot;;\r\n&gt;         String fromEmailPassword=&quot;Password&quot;;\r\n&gt;         String subject=&quot;This is the subject&quot;;\r\n&gt; \r\n&gt;         Properties properties = new Properties();\r\n&gt;         properties.put(&quot;mail.smtp.auth&quot;,&quot;true&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.host&quot;,&quot;smtp.gmail.com&quot;);\r\n&gt;         properties.put(&quot;mail.smtp.port&quot;,&quot;587&quot;);\r\n&gt;         \r\n&gt;         Session session=Session.getDefaultInstance(properties,new &gt;javax.mail.Authenticator(){\r\n&gt;         @Override\r\n&gt;         protected PasswordAuthentication getPasswordAuthentication(){\r\n&gt;         return new PasswordAuthentication(fromEmail,fromEmailPassword);\r\n&gt;         }\r\n&gt;         });\r\n&gt;         try{\r\n&gt;             MimeMessage message=new MimeMessage(session);\r\n&gt;             message.setFrom(new InternetAddress(fromEmail));\r\n&gt;             message.addRecipient(Message.RecipientType.TO,new &gt;InternetAddress(toEmail));\r\n&gt;             message.setSubject(subject);\r\n&gt;             message.setText(&quot;Hello&quot;);\r\n&gt;             Transport.send(message);\r\n&gt;         }\r\n&gt;         catch(Exception ex){\r\n&gt;             JOptionPane.showMessageDialog(null, ex);\r\n&gt;         }\r\n&gt;     \r\n&gt;         \r\n&gt;     }                                        \r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve looked but haven&#39;t found any similar cases or solutions.","title":"java.lang.NoClassDefFoundError: javax/activation/DataSource exception when I try to send an email in my Java Swing application","body":"<p>I'm trying to create an Java Swing (with Ant) application to send an email to a desired address(My first time).The application builds successfully but when I click the button to send the email I get a lot of different error messages, with the first being a java.lang.NoClassDefFoundError: javax/activation/DataSource .The sender email is new and I did not assosciate it with a phone number(I was told it might lead to issues). I've also have already added the mail.jar to the project library. The catch JOptionPane did not print any errors as well so I'm having a hard time figuring this out. I've attached the code as well as a <a href=\"https://i.stack.imgur.com/MpxLL.png\" rel=\"nofollow noreferrer\">screenshot</a> of the error.</p>\n<blockquote>\n<pre><code>private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    \n    String toEmail= &quot;email1&quot;;//Changed emails for securityPurposes\n\n    String fromEmail = &quot;email2&quot;;\n    String fromEmailPassword=&quot;Password&quot;;\n    String subject=&quot;This is the subject&quot;;\n\n    Properties properties = new Properties();\n    properties.put(&quot;mail.smtp.auth&quot;,&quot;true&quot;);\n    properties.put(&quot;mail.smtp.starttls.enable&quot;,&quot;true&quot;);\n    properties.put(&quot;mail.smtp.host&quot;,&quot;smtp.gmail.com&quot;);\n    properties.put(&quot;mail.smtp.port&quot;,&quot;587&quot;);\n    \n    Session session=Session.getDefaultInstance(properties,new &gt;javax.mail.Authenticator(){\n    @Override\n    protected PasswordAuthentication getPasswordAuthentication(){\n    return new PasswordAuthentication(fromEmail,fromEmailPassword);\n    }\n    });\n    try{\n        MimeMessage message=new MimeMessage(session);\n        message.setFrom(new InternetAddress(fromEmail));\n        message.addRecipient(Message.RecipientType.TO,new &gt;InternetAddress(toEmail));\n        message.setSubject(subject);\n        message.setText(&quot;Hello&quot;);\n        Transport.send(message);\n    }\n    catch(Exception ex){\n        JOptionPane.showMessageDialog(null, ex);\n    }\n\n    \n}                                        \n</code></pre>\n</blockquote>\n<p>I've looked but haven't found any similar cases or solutions.</p>\n"},{"tags":["java","function"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1668940561,"post_id":74507335,"comment_id":131523915,"body_markdown":"If we want no input and some output, we can use a lambda of type [`Supplier` (`docs.oracle.com`)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Supplier.html).","body":"If we want no input and some output, we can use a lambda of type <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Supplier.html\" rel=\"nofollow noreferrer\"><code>Supplier</code> (<code>docs.oracle.com</code>)</a>."},{"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"score":0,"creation_date":1668941127,"post_id":74507335,"comment_id":131523993,"body_markdown":"The problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as `func()` as well as `func(double min, double max, Random rn, double seed)`.","body":"The problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as <code>func()</code> as well as <code>func(double min, double max, Random rn, double seed)</code>."},{"owner":{"account_id":8316417,"reputation":565,"user_id":6249539,"accept_rate":83,"display_name":"yashpandey8055"},"score":0,"creation_date":1668941606,"post_id":74507335,"comment_id":131524062,"body_markdown":"Can you paste you function because I think you trying to do some integer operations on Object Type which cant be possible because Object class is broader than Integer.","body":"Can you paste you function because I think you trying to do some integer operations on Object Type which cant be possible because Object class is broader than Integer."},{"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"score":0,"creation_date":1668959446,"post_id":74507335,"comment_id":131527467,"body_markdown":"The function is just a test function I made up it&#39;s declared as `public static double goodFunc(int goodNum){ return (double) goodNum-1; }`.","body":"The function is just a test function I made up it&#39;s declared as <code>public static double goodFunc(int goodNum){ return (double) goodNum-1; }</code>."}],"answers":[{"tags":[],"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669218973,"creation_date":1668960314,"answer_id":74509696,"question_id":74507335,"body_markdown":"After some research, I found out that:\r\n\r\n - The interface `Function&lt;T, R&gt;` is specifically designed for a 1-input 1-output function.\r\n - In the parent package (`java.util.function`) there is no interface for a function that takes more than 1 argument. (Edit: as pointed in the comments, there also are interfaces that take two arguments. Still, that doesn&#39;t solve my problem.)\r\n\r\nThe solution might be to force the function given as parameter to accept an array of objects as the only argument, then parse them as required.\r\n\r\nAn example of this would be something like:\r\n```java\r\npublic static double func(Object[] args){\r\n  int a = (int) args[0];\r\n  int b = (int) args[1];\r\n  return (double) a * b;\r\n}\r\n```\r\n(The parsing isn&#39;t done in a try-catch block because I want an exception thrown anyway if the wrong args are given to the function)","title":"Function&lt;T, R&gt; Object in Java with no specified parameters as input and Double as output","body":"<p>After some research, I found out that:</p>\n<ul>\n<li>The interface <code>Function&lt;T, R&gt;</code> is specifically designed for a 1-input 1-output function.</li>\n<li>In the parent package (<code>java.util.function</code>) there is no interface for a function that takes more than 1 argument. (Edit: as pointed in the comments, there also are interfaces that take two arguments. Still, that doesn't solve my problem.)</li>\n</ul>\n<p>The solution might be to force the function given as parameter to accept an array of objects as the only argument, then parse them as required.</p>\n<p>An example of this would be something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static double func(Object[] args){\n  int a = (int) args[0];\n  int b = (int) args[1];\n  return (double) a * b;\n}\n</code></pre>\n<p>(The parsing isn't done in a try-catch block because I want an exception thrown anyway if the wrong args are given to the function)</p>\n"}],"owner":{"account_id":18526357,"reputation":11,"user_id":13498157,"display_name":"DVD_DAVIDE"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74509696,"answer_count":1,"score":-1,"last_activity_date":1669218973,"creation_date":1668940268,"question_id":74507335,"body_markdown":"I&#39;ve made a Matrix class in java and I wanted to add some `init()` functions.\\\r\nI need one that takes as the first argument a `Function` object, and the function&#39;s arguments if needed as the second.\\\r\nI have encountered two problems:\\\r\n- If the function only takes one argument, the notation `init(Function&lt;&gt; func, Object... args)` gives an error is thrown when compiling: `incompatible types: java.lang.Object cannot be converted to int`.\r\n- If I work around that (by calling `init(FuncClass::Func, 7, null)`, which doesn&#39;t seem such a good idea), I have an error thrown at `func.apply(args)` because `incompatible types: java.lang.Object cannot be converted to int`.\r\n\r\nThe current function definition is this:\r\n\r\n```java\r\npublic void init(Function&lt;Object, Double&gt; function, Object... args){\r\n    for (int i = 0; i &lt; this.rows; i++) {\r\n        for (int j = 0; j &lt; this.cols; j++) {\r\n            this.data[i][j] = function.apply(args);\r\n        }\r\n    }\r\n}\r\n```\r\nThe `data` object is defined as:\\\r\n`double[][] data = new double[rows][cols];`\r\n\r\nEdit: since it came up in the comments, I noticed that the title can be misunderstood.\\\r\nThe problem isn&#39;t no input at all. It shouldn&#39;t have a predetermined input. I mean, it could be defined as `func()` as well as `func(double min, double max, Random rn, double seed)`.\\\r\nIf you can suggest a more explanative title, please do.","title":"Function&lt;T, R&gt; Object in Java with no specified parameters as input and Double as output","body":"<p>I've made a Matrix class in java and I wanted to add some <code>init()</code> functions.<br />\nI need one that takes as the first argument a <code>Function</code> object, and the function's arguments if needed as the second.<br />\nI have encountered two problems:\\</p>\n<ul>\n<li>If the function only takes one argument, the notation <code>init(Function&lt;&gt; func, Object... args)</code> gives an error is thrown when compiling: <code>incompatible types: java.lang.Object cannot be converted to int</code>.</li>\n<li>If I work around that (by calling <code>init(FuncClass::Func, 7, null)</code>, which doesn't seem such a good idea), I have an error thrown at <code>func.apply(args)</code> because <code>incompatible types: java.lang.Object cannot be converted to int</code>.</li>\n</ul>\n<p>The current function definition is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void init(Function&lt;Object, Double&gt; function, Object... args){\n    for (int i = 0; i &lt; this.rows; i++) {\n        for (int j = 0; j &lt; this.cols; j++) {\n            this.data[i][j] = function.apply(args);\n        }\n    }\n}\n</code></pre>\n<p>The <code>data</code> object is defined as:<br />\n<code>double[][] data = new double[rows][cols];</code></p>\n<p>Edit: since it came up in the comments, I noticed that the title can be misunderstood.<br />\nThe problem isn't no input at all. It shouldn't have a predetermined input. I mean, it could be defined as <code>func()</code> as well as <code>func(double min, double max, Random rn, double seed)</code>.<br />\nIf you can suggest a more explanative title, please do.</p>\n"},{"tags":["java","eclipse","eclipse-plugin","jmockit"],"comments":[{"owner":{"account_id":1483555,"reputation":2434,"user_id":1392312,"accept_rate":92,"display_name":"Rossiar"},"score":0,"creation_date":1441355906,"post_id":32036544,"comment_id":52655904,"body_markdown":"Possible duplicate of http://stackoverflow.com/questions/2905735/jmockit-initialization-problem","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/2905735/jmockit-initialization-problem\" title=\"jmockit initialization problem\">stackoverflow.com/questions/2905735/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2046719,"reputation":1734,"user_id":1826647,"display_name":"JChrist"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1441394643,"creation_date":1441394643,"answer_id":32405215,"question_id":32036544,"body_markdown":"I would expect that `@RunWith(JMockit.class)` should have taken care of this problem.\r\n\r\nIn any case, from JMockit tutorial [here][1], there are some notes that you should check, in case these resolve your issue. In particular, these two seem to be most relevant:\r\n&gt; - (Note for Eclipse users: when specifying the order of jars in the &gt;classpath, make sure to use the &quot;Order and Export&quot; tab of the &quot;Java Build &gt;Path&quot; window. Also, make sure the Eclipse project uses the JRE from a JDK &gt;installation instead of a &quot;plain&quot; JRE, since the latter lacks the &gt;&quot;attach&quot; native library.)\r\n&gt; - In other situations (like running on JDK implementations other than &gt;the Oracle JDKs), you may need to pass &quot;-javaagent:&lt;proper &gt;path&gt;/jmockit.jar&quot; as a JVM initialization parameter. This can be done in &gt;the &quot;Run/Debug Configuration&quot; for both Eclipse and IntelliJ IDEA, or with &gt;build tools such as Ant and Maven.\r\n\r\n  [1]: http://jmockit.org/tutorial/Introduction.html#runningTests","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>I would expect that <code>@RunWith(JMockit.class)</code> should have taken care of this problem.</p>\n\n<p>In any case, from JMockit tutorial <a href=\"http://jmockit.org/tutorial/Introduction.html#runningTests\" rel=\"nofollow\">here</a>, there are some notes that you should check, in case these resolve your issue. In particular, these two seem to be most relevant:</p>\n\n<blockquote>\n  <ul>\n  <li>(Note for Eclipse users: when specifying the order of jars in the >classpath, make sure to use the \"Order and Export\" tab of the \"Java Build >Path\" window. Also, make sure the Eclipse project uses the JRE from a JDK >installation instead of a \"plain\" JRE, since the latter lacks the >\"attach\" native library.)</li>\n  <li>In other situations (like running on JDK implementations other than >the Oracle JDKs), you may need to pass \"-javaagent:path>/jmockit.jar\" as a JVM initialization parameter. This can be done in >the \"Run/Debug Configuration\" for both Eclipse and IntelliJ IDEA, or with >build tools such as Ant and Maven.</li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6462334,"reputation":997,"user_id":5005676,"display_name":"Shubham Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466496835,"creation_date":1466496835,"answer_id":37938973,"question_id":32036544,"body_markdown":"Right click your project in Package Explorer \r\n&gt; click Properties.\r\n&gt; go to Java Build Path.\r\n&gt; Libraries tab.\r\n&gt; click on &#39;Add Library&#39; button select JUnit click Next. \r\nYou should be able to handle it from there.\r\n\r\nAfter that if you use coverage as : you will be able to see the coverage.","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>Right click your project in Package Explorer </p>\n\n<blockquote>\n  <p>click Properties.\n  go to Java Build Path.\n  Libraries tab.\n  click on 'Add Library' button select JUnit click Next. \n  You should be able to handle it from there.</p>\n</blockquote>\n\n<p>After that if you use coverage as : you will be able to see the coverage.</p>\n"},{"tags":[],"owner":{"account_id":7749923,"reputation":563,"user_id":5866166,"accept_rate":60,"display_name":"Pavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669218934,"creation_date":1669218934,"answer_id":74549672,"question_id":32036544,"body_markdown":"pass the following paramter through the VM args.\r\n\r\n    -javaagent:&lt;path&gt;/jmockit.jar","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>pass the following paramter through the VM args.</p>\n<pre><code>-javaagent:&lt;path&gt;/jmockit.jar\n</code></pre>\n"}],"owner":{"account_id":47700,"reputation":3323,"user_id":141408,"accept_rate":68,"display_name":"Sergey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3910,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1669218934,"creation_date":1439737542,"question_id":32036544,"body_markdown":"I am developing a plugin for Eclipse Kepler. Adding @RunWith(JMockit.class) to my test class causes the following error:\r\n\r\n        JMockit: Reinitializing under custom class loader org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader@b7ccec1[com.mypackage.myclass:2.3.9.201508161221(id=1)]\r\n    java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)\r\n            at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:407)\r\n    Caused by: java.lang.VerifyError\r\n            at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)\r\n            at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:170)\r\n            at mockit.internal.startup.Startup.redefineMethods(Startup.java:242)\r\n            at mockit.internal.startup.Startup.redefineMethods(Startup.java:236)\r\n            at mockit.internal.mockups.MockClassSetup.applyClassModifications(MockClassSetup.java:134)\r\n            at mockit.internal.mockups.MockClassSetup.redefineMethodsInClassHierarchy(MockClassSetup.java:91)\r\n            at mockit.internal.mockups.MockClassSetup.redefineMethods(MockClassSetup.java:76)\r\n            at mockit.MockUp.redefineMethods(MockUp.java:240)\r\n            at mockit.MockUp.redefineClassOrImplementInterface(MockUp.java:222)\r\n            at mockit.MockUp.&lt;init&gt;(MockUp.java:131)\r\n            at mockit.integration.junit4.internal.RunNotifierDecorator.&lt;init&gt;(RunNotifierDecorator.java:21)\r\n            at mockit.internal.startup.JMockitInitialization.loadInternalStartupMocksForJUnitIntegration(JMockitInitialization.java:42)\r\n            at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:27)\r\n            at mockit.internal.startup.Startup.applyStartupMocks(Startup.java:72)\r\n            at mockit.internal.startup.Startup.reapplyStartupMocks(Startup.java:124)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:94)\r\n            at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:159)\r\n            at mockit.internal.startup.Startup.reinitializeJMockitUnderCustomClassLoader(Startup.java:118)\r\n            at mockit.internal.startup.Startup.agentmain(Startup.java:101)\r\n            ... 6 more\r\n    java.lang.IllegalStateException: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\r\n            at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:262)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n            at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)\r\n            at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:156)\r\n            at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:82)\r\n            at org.eclipse.tycho.surefire.osgibooter.OsgiSurefireBooter.run(OsgiSurefireBooter.java:91)\r\n            at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication$1.run(AbstractUITestApplication.java:35)\r\n            at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\r\n            at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)\r\n            at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4145)\r\n            at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3762)\r\n            at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1113)\r\n            at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n            at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:997)\r\n            at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:140)\r\n            at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:611)\r\n            at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n            at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:567)\r\n            at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)\r\n            at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\r\n            at org.eclipse.tycho.surefire.osgibooter.UITestApplication.runApplication(UITestApplication.java:31)\r\n            at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication.run(AbstractUITestApplication.java:120)\r\n            at org.eclipse.tycho.surefire.osgibooter.UITestApplication.start(UITestApplication.java:37)\r\n            at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\r\n            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\r\n            at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\r\n            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\r\n            at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.lang.reflect.Method.invoke(Method.java:606)\r\n            at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)\r\n            at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)\r\n            at org.eclipse.equinox.launcher.Main.run(Main.java:1450)\r\n            at org.eclipse.equinox.launcher.Main.main(Main.java:1426)\r\n    Caused by: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\r\n            ... 39 more\r\n\r\nAm I doing something wrong or it is a JMockIt bug? I am using version JMockIt  1.18, JUnit 4.12","title":"JMockIt fails with AgentInitializationException: Agent JAR loaded but agent failed to initialize","body":"<p>I am developing a plugin for Eclipse Kepler. Adding @RunWith(JMockit.class) to my test class causes the following error:</p>\n\n<pre><code>    JMockit: Reinitializing under custom class loader org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader@b7ccec1[com.mypackage.myclass:2.3.9.201508161221(id=1)]\njava.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:382)\n        at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:407)\nCaused by: java.lang.VerifyError\n        at sun.instrument.InstrumentationImpl.redefineClasses0(Native Method)\n        at sun.instrument.InstrumentationImpl.redefineClasses(InstrumentationImpl.java:170)\n        at mockit.internal.startup.Startup.redefineMethods(Startup.java:242)\n        at mockit.internal.startup.Startup.redefineMethods(Startup.java:236)\n        at mockit.internal.mockups.MockClassSetup.applyClassModifications(MockClassSetup.java:134)\n        at mockit.internal.mockups.MockClassSetup.redefineMethodsInClassHierarchy(MockClassSetup.java:91)\n        at mockit.internal.mockups.MockClassSetup.redefineMethods(MockClassSetup.java:76)\n        at mockit.MockUp.redefineMethods(MockUp.java:240)\n        at mockit.MockUp.redefineClassOrImplementInterface(MockUp.java:222)\n        at mockit.MockUp.&lt;init&gt;(MockUp.java:131)\n        at mockit.integration.junit4.internal.RunNotifierDecorator.&lt;init&gt;(RunNotifierDecorator.java:21)\n        at mockit.internal.startup.JMockitInitialization.loadInternalStartupMocksForJUnitIntegration(JMockitInitialization.java:42)\n        at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:27)\n        at mockit.internal.startup.Startup.applyStartupMocks(Startup.java:72)\n        at mockit.internal.startup.Startup.reapplyStartupMocks(Startup.java:124)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:94)\n        at mockit.internal.util.MethodReflection.invoke(MethodReflection.java:159)\n        at mockit.internal.startup.Startup.reinitializeJMockitUnderCustomClassLoader(Startup.java:118)\n        at mockit.internal.startup.Startup.agentmain(Startup.java:101)\n        ... 6 more\njava.lang.IllegalStateException: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:262)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\n        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)\n        at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:156)\n        at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:82)\n        at org.eclipse.tycho.surefire.osgibooter.OsgiSurefireBooter.run(OsgiSurefireBooter.java:91)\n        at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication$1.run(AbstractUITestApplication.java:35)\n        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)\n        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)\n        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4145)\n        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3762)\n        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1113)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n        at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:997)\n        at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:140)\n        at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:611)\n        at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:567)\n        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)\n        at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\n        at org.eclipse.tycho.surefire.osgibooter.UITestApplication.runApplication(UITestApplication.java:31)\n        at org.eclipse.tycho.surefire.osgibooter.AbstractUITestApplication.run(AbstractUITestApplication.java:120)\n        at org.eclipse.tycho.surefire.osgibooter.UITestApplication.start(UITestApplication.java:37)\n        at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\n        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)\n        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.lang.reflect.Method.invoke(Method.java:606)\n        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)\n        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)\n        at org.eclipse.equinox.launcher.Main.run(Main.java:1450)\n        at org.eclipse.equinox.launcher.Main.main(Main.java:1426)\nCaused by: com.sun.tools.attach.AgentInitializationException: Agent JAR loaded but agent failed to initialize\n        ... 39 more\n</code></pre>\n\n<p>Am I doing something wrong or it is a JMockIt bug? I am using version JMockIt  1.18, JUnit 4.12</p>\n"},{"tags":["java","android","progressive-web-apps","offlineapps","trusted-web-activity"],"comments":[{"owner":{"account_id":18884032,"reputation":11,"user_id":13775855,"display_name":"Toushirou"},"score":0,"creation_date":1669218811,"post_id":74535401,"comment_id":131595933,"body_markdown":"this has been solved","body":"this has been solved"}],"owner":{"account_id":18884032,"reputation":11,"user_id":13775855,"display_name":"Toushirou"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669218859,"creation_date":1669132156,"question_id":74535401,"body_markdown":"This is my first Android project using Java and XML. (Which has been a process)\r\n\r\nI&#39;m having problems extending my `LauncherActivity` to display an Offline-Screen \r\n\r\nI have been following [Offline-First Trusted Web Activities](https://developer.chrome.com/docs/android/trusted-web-activity/offline-first/#create-a-custom-launcheractivity)\r\n\r\nWhen this didn&#39;t work I followed some other Stackoverflows [Taking users to offline activity](https://stackoverflow.com/questions/67648775/take-user-to-offline-activity-screen-when-no-internet-connection-in-android-stud) |  [No internet Layout](https://stackoverflow.com/questions/51070623/how-to-use-a-custom-no-internet-connection-available-layout-when-user-is-offline)\r\n\r\nI noticed the key elements for this to work. \r\n1. adding `user network perms to Mani fest. `\r\n2. calling the new `offline activity` extend the `Launcher Activity` | *`Java file`*.\r\n3. registering `offline activity in the Mani fest.` \r\n4. Error handling | *`Java file`*\r\n5. adding helpers `ConnectivityManager` / rendering `Layout activity` | *`Java file &amp; XML`*\r\n\r\nwhen I run the build - I still get the Dinosaur. \r\n\r\nI used the code demo from - Chrome Dev as referenced above and followed up by using code from\r\n[Offline First Demo](https://github.com/GoogleChrome/android-browser-helper/tree/main/demos/twa-offline-first)","title":"TWA - Struggling w/ Offline Screen implementation","body":"<p>This is my first Android project using Java and XML. (Which has been a process)</p>\n<p>I'm having problems extending my <code>LauncherActivity</code> to display an Offline-Screen</p>\n<p>I have been following <a href=\"https://developer.chrome.com/docs/android/trusted-web-activity/offline-first/#create-a-custom-launcheractivity\" rel=\"nofollow noreferrer\">Offline-First Trusted Web Activities</a></p>\n<p>When this didn't work I followed some other Stackoverflows <a href=\"https://stackoverflow.com/questions/67648775/take-user-to-offline-activity-screen-when-no-internet-connection-in-android-stud\">Taking users to offline activity</a> |  <a href=\"https://stackoverflow.com/questions/51070623/how-to-use-a-custom-no-internet-connection-available-layout-when-user-is-offline\">No internet Layout</a></p>\n<p>I noticed the key elements for this to work.</p>\n<ol>\n<li>adding <code>user network perms to Mani fest. </code></li>\n<li>calling the new <code>offline activity</code> extend the <code>Launcher Activity</code> | <em><code>Java file</code></em>.</li>\n<li>registering <code>offline activity in the Mani fest.</code></li>\n<li>Error handling | <em><code>Java file</code></em></li>\n<li>adding helpers <code>ConnectivityManager</code> / rendering <code>Layout activity</code> | <em><code>Java file &amp; XML</code></em></li>\n</ol>\n<p>when I run the build - I still get the Dinosaur.</p>\n<p>I used the code demo from - Chrome Dev as referenced above and followed up by using code from\n<a href=\"https://github.com/GoogleChrome/android-browser-helper/tree/main/demos/twa-offline-first\" rel=\"nofollow noreferrer\">Offline First Demo</a></p>\n"},{"tags":["java","spring","exception","dropwizard","model-validation"],"owner":{"account_id":27026152,"reputation":11,"user_id":20583392,"display_name":"Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669218334,"creation_date":1669218334,"question_id":74549511,"body_markdown":"When I have @Auth and a body(object) in a POST API in Dropwizard getting the following error while running Tests:\r\n\r\n`Caused by: org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.`\r\n\r\nHere is my API code:\r\n`\r\n```\r\n@POST\r\n@Path(&quot;api/v2/test/{id}/status&quot;)\r\n@Timed\r\n@ApiOperation(value = &quot;Post your status&quot;,\r\n        response = Response.class)\r\npublic Response postStatus(@Context HttpServletRequest requestContext,\r\n                           @Context UriInfo requestUri,\r\n                           PostStatusReq postStatusReq,\r\n                           @Auth TestAAAuthenticator equip,\r\n                           @PathParam(&quot;id&quot;) Long id\r\n\r\n) {\r\n    log.warn(&quot;postStatus: &quot;+ postStatusReq);\r\n    return Response.ok(&quot;OK&quot;).build();\r\n}\r\n```\r\n`\r\nI have these in my Parent class file:\r\n`\r\n```\r\n\r\n```\r\n```\r\nfinal OAuthCredentialAuthFilter&lt;User&gt; oAuthCredentialAuthFilter = new OAuthCredentialAuthFilter.Builder&lt;User&gt;()\r\n        .setAuthenticator(authenticator)\r\n        .setAuthorizer(new AAAuthorizer())\r\n        .setPrefix(&quot;Bearer&quot;)\r\n        .buildAuthFilter();\r\nenvironment.jersey().register(new AuthDynamicFeature(oAuthCredentialAuthFilter));\r\n```\r\n```\r\n\r\nenvironment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(User.class));\r\n```\r\n`\r\nUsing Versions:\r\nMaven: 3.6.1\r\nJava: 17\r\nDropwizard: 2.0.28\r\n\r\nTried looking up in stackoverflow and github for similar problem:\r\nhttps://github.com/dropwizard/dropwizard/issues/783\r\nhttps://github.com/dropwizard/dropwizard/issues/1329\r\n\r\nBut I already have these in my code.\r\n\r\nBtwn I&#39;m using @Pathparam from javax.ws.rs\r\nNote: If I remove @Auth TestAAAuthenticator equip or PostStatusReq postStatusReq from the API request everything works fine. But I need both in API. Any help will be much appreciated. Thank you!","title":"ModelValidationException: Validation of the application resource model has failed during application initialization","body":"<p>When I have @Auth and a body(object) in a POST API in Dropwizard getting the following error while running Tests:</p>\n<p><code>Caused by: org.glassfish.jersey.server.model.ModelValidationException: Validation of the application resource model has failed during application initialization.</code></p>\n<p>Here is my API code:\n`</p>\n<pre><code>@POST\n@Path(&quot;api/v2/test/{id}/status&quot;)\n@Timed\n@ApiOperation(value = &quot;Post your status&quot;,\n        response = Response.class)\npublic Response postStatus(@Context HttpServletRequest requestContext,\n                           @Context UriInfo requestUri,\n                           PostStatusReq postStatusReq,\n                           @Auth TestAAAuthenticator equip,\n                           @PathParam(&quot;id&quot;) Long id\n\n) {\n    log.warn(&quot;postStatus: &quot;+ postStatusReq);\n    return Response.ok(&quot;OK&quot;).build();\n}\n</code></pre>\n<p><code>I have these in my Parent class file:</code></p>\n<pre><code>\n</code></pre>\n<pre><code>final OAuthCredentialAuthFilter&lt;User&gt; oAuthCredentialAuthFilter = new OAuthCredentialAuthFilter.Builder&lt;User&gt;()\n        .setAuthenticator(authenticator)\n        .setAuthorizer(new AAAuthorizer())\n        .setPrefix(&quot;Bearer&quot;)\n        .buildAuthFilter();\nenvironment.jersey().register(new AuthDynamicFeature(oAuthCredentialAuthFilter));\n</code></pre>\n<pre><code>\nenvironment.jersey().register(new AuthValueFactoryProvider.Binder&lt;&gt;(User.class));\n</code></pre>\n<p>`\nUsing Versions:\nMaven: 3.6.1\nJava: 17\nDropwizard: 2.0.28</p>\n<p>Tried looking up in stackoverflow and github for similar problem:\n<a href=\"https://github.com/dropwizard/dropwizard/issues/783\" rel=\"nofollow noreferrer\">https://github.com/dropwizard/dropwizard/issues/783</a>\n<a href=\"https://github.com/dropwizard/dropwizard/issues/1329\" rel=\"nofollow noreferrer\">https://github.com/dropwizard/dropwizard/issues/1329</a></p>\n<p>But I already have these in my code.</p>\n<p>Btwn I'm using @Pathparam from javax.ws.rs\nNote: If I remove @Auth TestAAAuthenticator equip or PostStatusReq postStatusReq from the API request everything works fine. But I need both in API. Any help will be much appreciated. Thank you!</p>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1669056135,"post_id":74522692,"comment_id":131551639,"body_markdown":"Check out that you are actually using org.mapstruct.Named and not javax.inject.Named.","body":"Check out that you are actually using org.mapstruct.Named and not javax.inject.Named."},{"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"score":0,"creation_date":1669104179,"post_id":74522692,"comment_id":131561577,"body_markdown":"Yes, I&#39;m using `org.mapstruct.Named`, `org.mapstruct.Context`.","body":"Yes, I&#39;m using <code>org.mapstruct.Named</code>, <code>org.mapstruct.Context</code>."}],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669218106,"creation_date":1669217634,"answer_id":74549364,"question_id":74522692,"body_markdown":"As mentioned in the referenced answer, you could solve it in two ways described below.\r\n\r\n### `@Context`\r\n\r\nThis solution sets `valueWithName` after mapping of `Child` object. Iteration through those objects is done only once, but it requires passing a `ParentNameContext` object to the mapping method.\r\n```java\r\n@Mapper\r\npublic interface MyMapper {\r\n  ParentDto map(Parent parent, @Context ParentNameContext parentNameContext);\r\n}\r\n```\r\n```java\r\npublic class ParentNameContext {\r\n\r\n  private String parentName;\r\n\r\n  @AfterMapping\r\n  public void afterChildMapping(@MappingTarget ChildDto childDto, Child child) {\r\n    childDto.setValueWithName(child.getValue() + parentName);\r\n  }\r\n}\r\n```\r\n\r\n### `@AfterMapping`\r\n\r\nThis solution doesn&#39;t require any additional objects to be passed to the mapping method, but it iterates twice through `Child` objects because `valueWithName` is set after `Parent` object mapping.\r\n```java\r\n@Mapper\r\npublic interface MyMapper {\r\n  ParentDto map(Parent parent);\r\n\r\n  @AfterMapping\r\n  default void afterMapping(@MappingTarget ParentDto parentDto, Parent parent) {\r\n    List&lt;Child&gt; children = parent.getChildren();\r\n    List&lt;ChildDto&gt; dtoChildren = parentDto.getChildren();\r\n    for (int i = 0; i &lt; children.size(); i++)\r\n      dtoChildren.get(i).setValueWithName(children.get(i).getValue() + parent.getName());\r\n  }\r\n}\r\n```\r\n\r\nTo suppress the &quot;Unmapped target property&quot; warning check [Anatoly&#39;s answer][1]. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/54656081/10231374","title":"MapStruct - pass parent to child in list mapping","body":"<p>As mentioned in the referenced answer, you could solve it in two ways described below.</p>\n<h3><code>@Context</code></h3>\n<p>This solution sets <code>valueWithName</code> after mapping of <code>Child</code> object. Iteration through those objects is done only once, but it requires passing a <code>ParentNameContext</code> object to the mapping method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface MyMapper {\n  ParentDto map(Parent parent, @Context ParentNameContext parentNameContext);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ParentNameContext {\n\n  private String parentName;\n\n  @AfterMapping\n  public void afterChildMapping(@MappingTarget ChildDto childDto, Child child) {\n    childDto.setValueWithName(child.getValue() + parentName);\n  }\n}\n</code></pre>\n<h3><code>@AfterMapping</code></h3>\n<p>This solution doesn't require any additional objects to be passed to the mapping method, but it iterates twice through <code>Child</code> objects because <code>valueWithName</code> is set after <code>Parent</code> object mapping.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface MyMapper {\n  ParentDto map(Parent parent);\n\n  @AfterMapping\n  default void afterMapping(@MappingTarget ParentDto parentDto, Parent parent) {\n    List&lt;Child&gt; children = parent.getChildren();\n    List&lt;ChildDto&gt; dtoChildren = parentDto.getChildren();\n    for (int i = 0; i &lt; children.size(); i++)\n      dtoChildren.get(i).setValueWithName(children.get(i).getValue() + parent.getName());\n  }\n}\n</code></pre>\n<p>To suppress the &quot;Unmapped target property&quot; warning check <a href=\"https://stackoverflow.com/a/54656081/10231374\">Anatoly's answer</a>.</p>\n"}],"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2163,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1669218106,"creation_date":1669051402,"question_id":74522692,"body_markdown":"I map classes to DTO with MapStruct. But I need to pass parent object to child mapper because I have to use values from parent for mapping child.\r\n\r\nI try to pass parent with `@Context`:\r\n\r\n    @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\r\n    ChildDto map(Child child, @Context Parent parent);\r\n    \r\n    @Named(&quot;getValueWithName&quot;)\r\n    default String getValueWithName(Child child, @Context Parent parent) {\r\n        return child.getValue() + parent.getName();\r\n    }\r\n\r\nBut it cause compilation error:\r\n\r\n    Example.java:44:19\r\n    java: Unmapped target property: &quot;valueWithName&quot;. Mapping from Collection element &quot;Example.Child children&quot; to &quot;Example.ChildDto children&quot;.\r\n\r\n\r\nHere is simple full working example:\r\n\r\n    public class Example {\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class Parent {\r\n            private String name;\r\n            private List&lt;Child&gt; children;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class Child {\r\n            private String value;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class ParentDto {\r\n            private String name;\r\n            private List&lt;ChildDto&gt; children;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        public static class ChildDto {\r\n            private String valueWithName;\r\n        }\r\n    \r\n        @Mapper\r\n        public interface MyMapper {\r\n    \r\n            ParentDto map(Parent parent);\r\n    \r\n            @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\r\n            ChildDto map(Child child);\r\n    \r\n            @Named(&quot;getValueWithName&quot;)\r\n            default String getValueWithName(Child child) {\r\n                return child.getValue() + &quot;name from parent&quot;; // TODO\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            MyMapper mapper = Mappers.getMapper(MyMapper.class);\r\n            Parent parent = new Parent(&quot;a&quot;, List.of(new Child(&quot;b&quot;)));\r\n            ParentDto parentDto = mapper.map(parent);\r\n    \r\n            System.out.println(parentDto.getName()); // a\r\n            System.out.println(parentDto.getChildren().get(0).getValueWithName()); // expect: ba\r\n        }\r\n    }\r\n\r\nI saw similar [question with answer][1] but I think it&#39;s different case or I don&#39;t know how to use `@AfterMapping` in my case (notice that `child.getValue() + parent.getName()` is only example, I need to use many fields from parent, so I need to access to parent when mapping child; and also I have list of children).\r\n\r\nMapStruct version 1.5.3.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/53878367/mapstruct-propagate-parent-field-value-to-collection-of-nested-objects/53896638#53896638","title":"MapStruct - pass parent to child in list mapping","body":"<p>I map classes to DTO with MapStruct. But I need to pass parent object to child mapper because I have to use values from parent for mapping child.</p>\n<p>I try to pass parent with <code>@Context</code>:</p>\n<pre><code>@Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\nChildDto map(Child child, @Context Parent parent);\n\n@Named(&quot;getValueWithName&quot;)\ndefault String getValueWithName(Child child, @Context Parent parent) {\n    return child.getValue() + parent.getName();\n}\n</code></pre>\n<p>But it cause compilation error:</p>\n<pre><code>Example.java:44:19\njava: Unmapped target property: &quot;valueWithName&quot;. Mapping from Collection element &quot;Example.Child children&quot; to &quot;Example.ChildDto children&quot;.\n</code></pre>\n<p>Here is simple full working example:</p>\n<pre><code>public class Example {\n\n    @Data\n    @AllArgsConstructor\n    public static class Parent {\n        private String name;\n        private List&lt;Child&gt; children;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class Child {\n        private String value;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class ParentDto {\n        private String name;\n        private List&lt;ChildDto&gt; children;\n    }\n\n    @Data\n    @AllArgsConstructor\n    public static class ChildDto {\n        private String valueWithName;\n    }\n\n    @Mapper\n    public interface MyMapper {\n\n        ParentDto map(Parent parent);\n\n        @Mapping(target = &quot;valueWithName&quot;, source = &quot;child&quot;, qualifiedByName = &quot;getValueWithName&quot;)\n        ChildDto map(Child child);\n\n        @Named(&quot;getValueWithName&quot;)\n        default String getValueWithName(Child child) {\n            return child.getValue() + &quot;name from parent&quot;; // TODO\n        }\n    }\n\n    public static void main(String[] args) {\n        MyMapper mapper = Mappers.getMapper(MyMapper.class);\n        Parent parent = new Parent(&quot;a&quot;, List.of(new Child(&quot;b&quot;)));\n        ParentDto parentDto = mapper.map(parent);\n\n        System.out.println(parentDto.getName()); // a\n        System.out.println(parentDto.getChildren().get(0).getValueWithName()); // expect: ba\n    }\n}\n</code></pre>\n<p>I saw similar <a href=\"https://stackoverflow.com/questions/53878367/mapstruct-propagate-parent-field-value-to-collection-of-nested-objects/53896638#53896638\">question with answer</a> but I think it's different case or I don't know how to use <code>@AfterMapping</code> in my case (notice that <code>child.getValue() + parent.getName()</code> is only example, I need to use many fields from parent, so I need to access to parent when mapping child; and also I have list of children).</p>\n<p>MapStruct version 1.5.3.</p>\n"},{"tags":["java","reactive-programming","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1669206540,"post_id":74545881,"comment_id":131591081,"body_markdown":"Where is doSomething used?","body":"Where is doSomething used?"},{"owner":{"account_id":24502312,"reputation":1,"user_id":18417772,"display_name":"Steph"},"score":0,"creation_date":1669218067,"post_id":74545881,"comment_id":131595664,"body_markdown":"It&#39;s the method in the useCase","body":"It&#39;s the method in the useCase"},{"owner":{"account_id":6889297,"reputation":310,"user_id":5293388,"display_name":"Maciej Stpyra"},"score":0,"creation_date":1669218481,"post_id":74545881,"comment_id":131595814,"body_markdown":"If i think correctly - doOnNext expects void response and does not subscribe to doSomething result","body":"If i think correctly - doOnNext expects void response and does not subscribe to doSomething result"}],"owner":{"account_id":24502312,"reputation":1,"user_id":18417772,"display_name":"Steph"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":560,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669218040,"creation_date":1669201927,"question_id":74545881,"body_markdown":"I&#39;m creating a reactive endpoint where some actions need to be performed. I want user to see an exception only &#39;retrieveServiceByParam&#39; fails, but any other error shouldn&#39;t be returned, only added in the logs.\r\nThis is my controller:\r\n\r\n```\r\n\r\nprivate final Map&lt;String, MyUseCase&gt; myUseCase; //map of the different implementations of my service\r\n\r\nretrieveServiceByParam(param)\r\n    .doOnNext(\r\n        useCase -&gt;\r\n            useCase.doSomething(xxx)\r\n    .subscribeOn(Schedulers.boundedElastic())\r\n    .subscribe();\r\n\r\nreturn retrieveServiceByParam(param).find().then();\r\n\r\n\r\nprivate Mono&lt;MyUseCase&gt; retrieveServiceByParam(final String param) {\r\n  return MyEnum.find(param)\r\n      .doOnError(\r\n          throwable -&gt; {\r\n            throw new NotFoundException(&quot;xxx&quot;);\r\n          })\r\n      .map(myUseCase::get);\r\n}\r\n\r\n```\r\n\r\nHere&#39;s the use case implementation (where the doOnError/doOnSuccess is not executed):\r\n\r\n\r\n```\r\n@Override\r\npublic Mono&lt;Void&gt; doSomething(final InputValues inputValues) {\r\n  return Mono.when(\r\n          firstAction(xxx),\r\n          secondAction(xxx)\r\n      .onErrorContinue((throwable,o) -&gt; log.error(&quot;ERROR&quot;))\r\n      .doOnSuccess(a -&gt; log.info(&quot;SUCCESS&quot;));\r\n}\r\n```\r\nBoth firstAction and secondAction return Mono&lt;Void&gt; and no matter if they fail or are successful, the onErrorContinue or doOnSuccess are never executed. \r\n\r\n\r\n\r\nIf in the controller I put everything in the &#39;return&#39; statement, the &#39;doOnError&#39;/&#39;doOnSuccess&#39; are executed correctly, but then the API returns an error if anything in the useCase fails (which I don&#39;t want it to). \r\n\r\n","title":"Spring WebFlux doOnSuccess/doOnError/onErrorContinue never executed","body":"<p>I'm creating a reactive endpoint where some actions need to be performed. I want user to see an exception only 'retrieveServiceByParam' fails, but any other error shouldn't be returned, only added in the logs.\nThis is my controller:</p>\n<pre><code>\nprivate final Map&lt;String, MyUseCase&gt; myUseCase; //map of the different implementations of my service\n\nretrieveServiceByParam(param)\n    .doOnNext(\n        useCase -&gt;\n            useCase.doSomething(xxx)\n    .subscribeOn(Schedulers.boundedElastic())\n    .subscribe();\n\nreturn retrieveServiceByParam(param).find().then();\n\n\nprivate Mono&lt;MyUseCase&gt; retrieveServiceByParam(final String param) {\n  return MyEnum.find(param)\n      .doOnError(\n          throwable -&gt; {\n            throw new NotFoundException(&quot;xxx&quot;);\n          })\n      .map(myUseCase::get);\n}\n\n</code></pre>\n<p>Here's the use case implementation (where the doOnError/doOnSuccess is not executed):</p>\n<pre><code>@Override\npublic Mono&lt;Void&gt; doSomething(final InputValues inputValues) {\n  return Mono.when(\n          firstAction(xxx),\n          secondAction(xxx)\n      .onErrorContinue((throwable,o) -&gt; log.error(&quot;ERROR&quot;))\n      .doOnSuccess(a -&gt; log.info(&quot;SUCCESS&quot;));\n}\n</code></pre>\n<p>Both firstAction and secondAction return Mono and no matter if they fail or are successful, the onErrorContinue or doOnSuccess are never executed.</p>\n<p>If in the controller I put everything in the 'return' statement, the 'doOnError'/'doOnSuccess' are executed correctly, but then the API returns an error if anything in the useCase fails (which I don't want it to).</p>\n"},{"tags":["java","android","firebase","kotlin","google-cloud-firestore"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1668891843,"post_id":74503713,"comment_id":131518060,"body_markdown":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please don&#39;t post screenshots of your code, or other textual content. Instead post the actual text, and use the formatting tools of Stack Overflow to mark it up. Also see: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1669018441,"post_id":74503713,"comment_id":131538435,"body_markdown":"Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo","body":"Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo"},{"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"score":0,"creation_date":1669050363,"post_id":74503713,"comment_id":131549849,"body_markdown":"How to make each wallpaper have a different info description according to the clicked wallpaper? for my case all wallpapers have the same info description.. whereas every contributor to the wallpaper should be different @AlexMamo","body":"How to make each wallpaper have a different info description according to the clicked wallpaper? for my case all wallpapers have the same info description.. whereas every contributor to the wallpaper should be different @AlexMamo"},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1669052286,"post_id":74503713,"comment_id":131550494,"body_markdown":"Are you passing any info about the wallpaper the user clicked on into the activity?","body":"Are you passing any info about the wallpaper the user clicked on into the activity?"},{"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"score":0,"creation_date":1669054936,"post_id":74503713,"comment_id":131551334,"body_markdown":"I&#39;m confused about how to provide info on each wallpaper with different contributor names @FrankvanPuffelen","body":"I&#39;m confused about how to provide info on each wallpaper with different contributor names @FrankvanPuffelen"}],"answers":[{"tags":[],"owner":{"account_id":27026256,"reputation":1,"user_id":20583476,"display_name":"user20583476"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217885,"creation_date":1669217885,"answer_id":74549423,"question_id":74503713,"body_markdown":"you should be learning how to convert from json into array in kotlin ways and you should be working on Parcelable Data Class for eficiency data transfer.\r\n\r\nEach pressed button/list item should passing a certain data object includes Contributor, Document ID,etc to a detail screen using Parcelable Data Class.\r\n","title":"How to retrieve Firestore data ID on each different Wallpaper?","body":"<p>you should be learning how to convert from json into array in kotlin ways and you should be working on Parcelable Data Class for eficiency data transfer.</p>\n<p>Each pressed button/list item should passing a certain data object includes Contributor, Document ID,etc to a detail screen using Parcelable Data Class.</p>\n"}],"owner":{"account_id":25383123,"reputation":1,"user_id":19195242,"display_name":"Syimicode"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669217885,"creation_date":1668891682,"question_id":74503713,"body_markdown":"I found a problem when (all) wallpaper is clicked, then the retrieved data is not the data it should be. Here&#39;s the application..\r\n\r\nWhat the app looks like:\r\n![1](https://i.stack.imgur.com/hejI1.jpg)\r\n\r\nThis is my firestore data with different `name` and `secretariat` in each wallpaper:\r\n\r\n![2](https://i.stack.imgur.com/p0pVq.jpg)\r\n\r\n\r\n![3](https://i.stack.imgur.com/hTMYX.jpg)\r\n\r\n\r\nThis is the code to retrieve data from the firestore into `textViewContributor` and `textViewSekretariat` located in `FinalWallpaperActivity`\r\n\r\n    lateinit var binding: ActivityInfoBinding\r\n    private var firestore = FirebaseFirestore.getInstance()\r\n\r\n    private lateinit var tvInputKontributor: TextView\r\n    private lateinit var tvInputSekretariat: TextView\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityInfoBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        tvInputKontributor = findViewById(R.id.inputKontributor)\r\n        tvInputSekretariat = findViewById(R.id.inputSekretariat)\r\n\r\n        firestore.collection(&quot;wallpaper&quot;)\r\n            .get()\r\n            .addOnSuccessListener { result -&gt;\r\n                for (document in result) {\r\n                    Log.d(TAG, &quot;${document.id} =&gt; ${document.data}&quot;)\r\n\r\n                    if (document != null) {\r\n                        val name = document.data[&quot;name&quot;].toString()\r\n                        val sekretariat = document.data[&quot;sekretariat&quot;].toString()\r\n\r\n                        tvInputKontributor.text = name\r\n                        tvInputSekretariat.text = sekretariat\r\n                    }\r\n                }\r\n            }\r\n            .addOnFailureListener { exception -&gt;\r\n                Log.d(TAG, &quot;Error getting documents: &quot;, exception)\r\n            }\r\n\r\nThis is the `btnInfo` declaration to open the `InfoActivity`\r\n\r\n        btnInfo.setOnClickListener {\r\n            val i = Intent(this, InfoActivity::class.java)\r\n            startActivity(i)\r\n        }\r\n\r\n**How to make each wallpaper have a different info description according to the clicked wallpaper? For my case all wallpapers have the same info description.. Whereas every contributor to the wallpaper should be different**\r\n\r\n![6](https://i.stack.imgur.com/5BDOh.png)","title":"How to retrieve Firestore data ID on each different Wallpaper?","body":"<p>I found a problem when (all) wallpaper is clicked, then the retrieved data is not the data it should be. Here's the application..</p>\n<p>What the app looks like:\n<img src=\"https://i.stack.imgur.com/hejI1.jpg\" alt=\"1\" /></p>\n<p>This is my firestore data with different <code>name</code> and <code>secretariat</code> in each wallpaper:</p>\n<p><img src=\"https://i.stack.imgur.com/p0pVq.jpg\" alt=\"2\" /></p>\n<p><img src=\"https://i.stack.imgur.com/hTMYX.jpg\" alt=\"3\" /></p>\n<p>This is the code to retrieve data from the firestore into <code>textViewContributor</code> and <code>textViewSekretariat</code> located in <code>FinalWallpaperActivity</code></p>\n<pre><code>lateinit var binding: ActivityInfoBinding\nprivate var firestore = FirebaseFirestore.getInstance()\n\nprivate lateinit var tvInputKontributor: TextView\nprivate lateinit var tvInputSekretariat: TextView\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    binding = ActivityInfoBinding.inflate(layoutInflater)\n    setContentView(binding.root)\n\n    tvInputKontributor = findViewById(R.id.inputKontributor)\n    tvInputSekretariat = findViewById(R.id.inputSekretariat)\n\n    firestore.collection(&quot;wallpaper&quot;)\n        .get()\n        .addOnSuccessListener { result -&gt;\n            for (document in result) {\n                Log.d(TAG, &quot;${document.id} =&gt; ${document.data}&quot;)\n\n                if (document != null) {\n                    val name = document.data[&quot;name&quot;].toString()\n                    val sekretariat = document.data[&quot;sekretariat&quot;].toString()\n\n                    tvInputKontributor.text = name\n                    tvInputSekretariat.text = sekretariat\n                }\n            }\n        }\n        .addOnFailureListener { exception -&gt;\n            Log.d(TAG, &quot;Error getting documents: &quot;, exception)\n        }\n</code></pre>\n<p>This is the <code>btnInfo</code> declaration to open the <code>InfoActivity</code></p>\n<pre><code>    btnInfo.setOnClickListener {\n        val i = Intent(this, InfoActivity::class.java)\n        startActivity(i)\n    }\n</code></pre>\n<p><strong>How to make each wallpaper have a different info description according to the clicked wallpaper? For my case all wallpapers have the same info description.. Whereas every contributor to the wallpaper should be different</strong></p>\n<p><img src=\"https://i.stack.imgur.com/5BDOh.png\" alt=\"6\" /></p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":0,"creation_date":1423584687,"post_id":28436239,"comment_id":45202726,"body_markdown":"Note that if the doWork method does not change the state of the Foo instance (and particularly if Foo is immutable), then no synchronization is required.","body":"Note that if the doWork method does not change the state of the Foo instance (and particularly if Foo is immutable), then no synchronization is required."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1423587132,"post_id":28436239,"comment_id":45204441,"body_markdown":"+1 @JamesWatson who gave the only answer that told you to make `xx` private.  No point in providing synchronized methods to operate on data that other methods can access without synchronization.","body":"+1 @JamesWatson who gave the only answer that told you to make <code>xx</code> private.  No point in providing synchronized methods to operate on data that other methods can access without synchronization."}],"answers":[{"tags":[],"owner":{"account_id":413891,"reputation":3932,"user_id":787793,"accept_rate":70,"display_name":"nebula"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1423586591,"creation_date":1423584403,"answer_id":28436262,"question_id":28436239,"body_markdown":"You can use `synchronized` key word.\r\n\r\n\r\n     public synchronized void doWork(){\r\n           x.action();\r\n        }\r\n\r\nThis will make the method thread safe. More on synchronized methods on [Oracle documentation][1].\r\n\r\n**With the updated question:**\r\nUse static method as synchronized, then the lock will be on the class not on individual object. \r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html","title":"How to make this Threadsafe","body":"<p>You can use <code>synchronized</code> key word.</p>\n\n<pre><code> public synchronized void doWork(){\n       x.action();\n    }\n</code></pre>\n\n<p>This will make the method thread safe. More on synchronized methods on <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow\">Oracle documentation</a>.</p>\n\n<p><strong>With the updated question:</strong>\nUse static method as synchronized, then the lock will be on the class not on individual object. </p>\n"},{"tags":[],"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1423584441,"creation_date":1423584441,"answer_id":28436274,"question_id":28436239,"body_markdown":"Java has a `synchronized` keyword that you can use in this situation.\r\n\r\n    public synchronized void doWork() \r\n\r\n**Reading**\r\n\r\n* There&#39;s a full explanation of the keyword in the [Java Docs](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html).","title":"How to make this Threadsafe","body":"<p>Java has a <code>synchronized</code> keyword that you can use in this situation.</p>\n\n<pre><code>public synchronized void doWork() \n</code></pre>\n\n<p><strong>Reading</strong></p>\n\n<ul>\n<li>There's a full explanation of the keyword in the <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html\" rel=\"nofollow\">Java Docs</a>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669217871,"creation_date":1423585005,"answer_id":28436469,"question_id":28436239,"body_markdown":"And here is an alternative advise:\r\n\r\n&gt; Do ***not*** use `synchronized`.\r\n\r\nCode that uses `synchronized` tends to be complex, buggy, and tends to perform poorly. Worst of all, it tends to suffer from race conditions. ([Wikipedia](https://en.wikipedia.org/wiki/Race_condition).) \r\n\r\nThe inconvenient thing about race conditions is that there exists no kind of test that will catch them. Unit Testing certainly won&#39;t. You might *think* that stress-testing will catch them, but in fact it will not necessarily catch them either, because they can be incredibly elusive: you may have a race condition which manifests itself on average every million seconds of continuous runtime; this means that in order to witness this race condition happening even once, you would have to be running your software day and night for 11 days straight, which of course you will not do; however, once your software is deployed to a million customers out there, the laws of statistics say that one random customer will be experiencing it roughly every second.\r\n\r\nJava was introduced in the early nineties, so it had to support the predominant-at-the-time mechanism for sharing data across threads, which was synchronization. Thus, Java has had the `synchronized` keyword since version 1. This inevitably lead to situations where application programmers who used to be coding in COBOL in their previous job were now writing code in Java and trying to make use of `volatile` and `synchronized`; needless to say, there was much weeping and wailing and gnashing of teeth. Synchronization is very difficult; Entire books have been written on the subject; the tiniest mistake is catastrophic, you cannot avoid tiny mistakes unless you are an expert, and few people on the planet are considered experts.\r\n\r\nIn the decades that followed since then, the Software Industry has been realizing the importance of Software Testing and therefore the importance of Testability. For this reason, synchronization has been falling out of grace and being abandoned. Using the `synchronized` keyword nowadays is indicative of a certain disconnection from the best practices of our times.\r\n\r\nSo, ***do not*** use the `synchronized` keyword; this means: ***do not*** share state between your threads; instead, follow the modern ***Share-Nothing*** approach. This approach can be summarized as follows:\r\n\r\nCreate an **immutable** class which you will call `Message` to communicate between your threads, and use a `BlockingQueue` (from package `java.util.concurrent`) in which other threads store messages intended to be processed by your main thread. Then, in your main thread, just keep popping messages from the queue and processing them.  If the main thread needs to communicate results to another thread, then create another queue for that thread. Simple, elegant, testable, foolproof.\r\n\r\nThe implementation of `BlockingQueue` does internally make use of synchronization techniques, but it has been written by people who knew what they were doing, and it has been thoroughly tested, so it is known to work. That single data structure is the only place in your entire system that should contain synchronization.\r\n","title":"How to make this Threadsafe","body":"<p>And here is an alternative advise:</p>\n<blockquote>\n<p>Do <em><strong>not</strong></em> use <code>synchronized</code>.</p>\n</blockquote>\n<p>Code that uses <code>synchronized</code> tends to be complex, buggy, and tends to perform poorly. Worst of all, it tends to suffer from race conditions. (<a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">Wikipedia</a>.)</p>\n<p>The inconvenient thing about race conditions is that there exists no kind of test that will catch them. Unit Testing certainly won't. You might <em>think</em> that stress-testing will catch them, but in fact it will not necessarily catch them either, because they can be incredibly elusive: you may have a race condition which manifests itself on average every million seconds of continuous runtime; this means that in order to witness this race condition happening even once, you would have to be running your software day and night for 11 days straight, which of course you will not do; however, once your software is deployed to a million customers out there, the laws of statistics say that one random customer will be experiencing it roughly every second.</p>\n<p>Java was introduced in the early nineties, so it had to support the predominant-at-the-time mechanism for sharing data across threads, which was synchronization. Thus, Java has had the <code>synchronized</code> keyword since version 1. This inevitably lead to situations where application programmers who used to be coding in COBOL in their previous job were now writing code in Java and trying to make use of <code>volatile</code> and <code>synchronized</code>; needless to say, there was much weeping and wailing and gnashing of teeth. Synchronization is very difficult; Entire books have been written on the subject; the tiniest mistake is catastrophic, you cannot avoid tiny mistakes unless you are an expert, and few people on the planet are considered experts.</p>\n<p>In the decades that followed since then, the Software Industry has been realizing the importance of Software Testing and therefore the importance of Testability. For this reason, synchronization has been falling out of grace and being abandoned. Using the <code>synchronized</code> keyword nowadays is indicative of a certain disconnection from the best practices of our times.</p>\n<p>So, <em><strong>do not</strong></em> use the <code>synchronized</code> keyword; this means: <em><strong>do not</strong></em> share state between your threads; instead, follow the modern <em><strong>Share-Nothing</strong></em> approach. This approach can be summarized as follows:</p>\n<p>Create an <strong>immutable</strong> class which you will call <code>Message</code> to communicate between your threads, and use a <code>BlockingQueue</code> (from package <code>java.util.concurrent</code>) in which other threads store messages intended to be processed by your main thread. Then, in your main thread, just keep popping messages from the queue and processing them.  If the main thread needs to communicate results to another thread, then create another queue for that thread. Simple, elegant, testable, foolproof.</p>\n<p>The implementation of <code>BlockingQueue</code> does internally make use of synchronization techniques, but it has been written by people who knew what they were doing, and it has been thoroughly tested, so it is known to work. That single data structure is the only place in your entire system that should contain synchronization.</p>\n"},{"tags":[],"owner":{"account_id":352837,"reputation":9838,"user_id":690139,"accept_rate":83,"display_name":"Mark Fisher"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1423585079,"creation_date":1423585079,"answer_id":28436496,"question_id":28436239,"body_markdown":"If you have changing data, consider using immutable objects, not just simply slapping on a synchronized keyword.\r\n\r\nRead\r\n\r\n - [This stackoverflow question on immutable data and thread safety][1]\r\n - [Oracle&#39;s documentation on immutability][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3770539/does-using-only-immutable-data-types-make-a-java-program-thread-safe\r\n  [2]: http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html","title":"How to make this Threadsafe","body":"<p>If you have changing data, consider using immutable objects, not just simply slapping on a synchronized keyword.</p>\n\n<p>Read</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3770539/does-using-only-immutable-data-types-make-a-java-program-thread-safe\">This stackoverflow question on immutable data and thread safety</a></li>\n<li><a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html\" rel=\"nofollow noreferrer\">Oracle's documentation on immutability</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1493453,"reputation":464,"user_id":1399956,"accept_rate":100,"display_name":"James Watson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1423587078,"creation_date":1423585417,"answer_id":28436609,"question_id":28436239,"body_markdown":"    public class Utility{\r\n      private final Foo xx;\r\n      \r\n      public Utility(Foo xx){\r\n        this.xx = xx;\r\n      }\r\n\r\n      public void doWork() {\r\n        // ensures only one thread can be calling action\r\n        synchronized(xx) {\r\n          xx.action();\r\n        }\r\n      }\r\n    }\r\n\r\nA few changes below:\r\n\r\n 1. Make `xx` `final` and `private`.  Making it `private` enforces controls on how `xx` can be accessed.\r\n 2. `synchronize` on `xx` before calling `doWork`.  You can put `synchronized` on the method declaration but I prefer to be explicit about what object you are locking on.  Note that this doesn&#39;t &quot;synchronize xx&quot;.  It simply uses `xx` as the lock.  You must use synchronized blocks with the same monitor object everywhere you are accessing potentially dangerous code blocks.","title":"How to make this Threadsafe","body":"<pre><code>public class Utility{\n  private final Foo xx;\n\n  public Utility(Foo xx){\n    this.xx = xx;\n  }\n\n  public void doWork() {\n    // ensures only one thread can be calling action\n    synchronized(xx) {\n      xx.action();\n    }\n  }\n}\n</code></pre>\n\n<p>A few changes below:</p>\n\n<ol>\n<li>Make <code>xx</code> <code>final</code> and <code>private</code>.  Making it <code>private</code> enforces controls on how <code>xx</code> can be accessed.</li>\n<li><code>synchronize</code> on <code>xx</code> before calling <code>doWork</code>.  You can put <code>synchronized</code> on the method declaration but I prefer to be explicit about what object you are locking on.  Note that this doesn't \"synchronize xx\".  It simply uses <code>xx</code> as the lock.  You must use synchronized blocks with the same monitor object everywhere you are accessing potentially dangerous code blocks.</li>\n</ol>\n"}],"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":28436609,"answer_count":5,"score":1,"last_activity_date":1669217871,"creation_date":1423584349,"question_id":28436239,"body_markdown":"I have been reading a lot about threading yet I am not sure of the right way to handle this situation. Lets say I have a utility class that references an object. The utility class does work on the object and it can be called from multiple threads\r\n\r\n      class Utility{\r\n         Foo xx;\r\n         public Utility(Foo xx){\r\n             this.xx = xx;\r\n         }\r\n         \r\n        public void doWork(){\r\n           x.action();\r\n        }\r\n      }\r\n\r\nNow if I have two threads that will will be accessing the utility class and calling doWork() where xx will always refers to the same object, how can I make it thread safe?\r\n\r\n\r\nEDIT: There are 2 instances of the utility class ( one per thread) but the same referenced xx object. See Edit:\r\n\r\n    public class ThreadSafety {\r\n     \r\n        public static void main(String[] args) throws InterruptedException {\r\n            Foo xx = new Foo();\r\n            Utility util1 =  new Utility(xx); \r\n            Utility util2 =  new Utility(xx); \r\n            Thread t1 = new Thread(new MyRunnable(util1) , &quot;t1&quot;);\r\n            Thread t2 = new Thread(new MyRunnable(util2) , &quot;t2&quot;);\r\n            \r\n            t1.start();\r\n            t2.start();\r\n            t1.join();\r\n            t2.join();\r\n    \r\n        }\r\n     \r\n    }\r\n     \r\n    class MyRunnable implements Runnable{\r\n        Utility util;\r\n         \r\n        @Override\r\n        public void run() {\r\n            util.doWork();\r\n        }\r\n     \r\n      \r\n        private void MyRunnable (Utility util) {\r\n            this.util = util;\r\n        }\r\n         \r\n    }\r\n\r\n","title":"How to make this Threadsafe","body":"<p>I have been reading a lot about threading yet I am not sure of the right way to handle this situation. Lets say I have a utility class that references an object. The utility class does work on the object and it can be called from multiple threads</p>\n\n<pre><code>  class Utility{\n     Foo xx;\n     public Utility(Foo xx){\n         this.xx = xx;\n     }\n\n    public void doWork(){\n       x.action();\n    }\n  }\n</code></pre>\n\n<p>Now if I have two threads that will will be accessing the utility class and calling doWork() where xx will always refers to the same object, how can I make it thread safe?</p>\n\n<p>EDIT: There are 2 instances of the utility class ( one per thread) but the same referenced xx object. See Edit:</p>\n\n<pre><code>public class ThreadSafety {\n\n    public static void main(String[] args) throws InterruptedException {\n        Foo xx = new Foo();\n        Utility util1 =  new Utility(xx); \n        Utility util2 =  new Utility(xx); \n        Thread t1 = new Thread(new MyRunnable(util1) , \"t1\");\n        Thread t2 = new Thread(new MyRunnable(util2) , \"t2\");\n\n        t1.start();\n        t2.start();\n        t1.join();\n        t2.join();\n\n    }\n\n}\n\nclass MyRunnable implements Runnable{\n    Utility util;\n\n    @Override\n    public void run() {\n        util.doWork();\n    }\n\n\n    private void MyRunnable (Utility util) {\n        this.util = util;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jersey","grizzly"],"answers":[{"tags":[],"owner":{"account_id":5752727,"reputation":1642,"user_id":4541832,"display_name":"Maciej Lach"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1439982889,"creation_date":1439982889,"answer_id":32093934,"question_id":32093217,"body_markdown":"In your case, static data should be located in `/static` folder in root of your disk.\r\n\r\nThere are a couple of options where the static resources can be located:\r\n\r\n  - you can serve static resources from your filesystem via absolute path (e.g. `/www/static/`):\r\n\r\n        StaticHttpHandler staticHttpHandler = new StaticHttpHandler(&quot;/www/static/&quot;);\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\n  - or embedded your resources into jar archive (e.g. `/www/static.jar`):\r\n\r\n        StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(new URLClassLoader(new URL[] {new URL(&quot;file:///www/static.jar&quot;)}));\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\n  - or embed static resources inside your application jar:\r\n\r\n        StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\r\n        server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n","title":"Static content in Grizzly jersey","body":"<p>In your case, static data should be located in <code>/static</code> folder in root of your disk.</p>\n\n<p>There are a couple of options where the static resources can be located:</p>\n\n<ul>\n<li><p>you can serve static resources from your filesystem via absolute path (e.g. <code>/www/static/</code>):</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new StaticHttpHandler(\"/www/static/\");\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n<li><p>or embedded your resources into jar archive (e.g. <code>/www/static.jar</code>):</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(new URLClassLoader(new URL[] {new URL(\"file:///www/static.jar\")}));\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n<li><p>or embed static resources inside your application jar:</p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13342410,"reputation":33,"user_id":9630238,"display_name":"Francesco Rosso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217323,"creation_date":1669217323,"answer_id":74549295,"question_id":32093217,"body_markdown":"**ATTENTION**\r\nCannot cast from CLStaticHttpHandler to StaticHttpHandler!\r\n\r\n    CLStaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\r\n    server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);","title":"Static content in Grizzly jersey","body":"<p><strong>ATTENTION</strong>\nCannot cast from CLStaticHttpHandler to StaticHttpHandler!</p>\n<pre><code>CLStaticHttpHandler staticHttpHandler = new CLStaticHttpHandler(YourApp.class.getClassLoader());\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\n</code></pre>\n"}],"owner":{"account_id":2134790,"reputation":477,"user_id":1894846,"accept_rate":58,"display_name":"Rentonie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2618,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1669217323,"creation_date":1439980921,"question_id":32093217,"body_markdown":"   I want to serve static html pages in / and /index.html\r\n\r\n    final HttpServer server = GrizzlyHttpServerFactory.createHttpServer(URI.create(BASE_URI), rc);\r\n\r\nBASE_URL = http://locahost:8080/api/\r\n\r\n    StaticHttpHandler staticHttpHandler = new StaticHttpHandler(&quot;/static&quot;);\r\n    server.getServerConfiguration().addHttpHandler(staticHttpHandler, &quot;/&quot;);\r\n\r\nMy question is where should i put the static file in","title":"Static content in Grizzly jersey","body":"<p>I want to serve static html pages in / and /index.html</p>\n\n<pre><code>final HttpServer server = GrizzlyHttpServerFactory.createHttpServer(URI.create(BASE_URI), rc);\n</code></pre>\n\n<p>BASE_URL = <a href=\"http://locahost:8080/api/\" rel=\"nofollow\">http://locahost:8080/api/</a></p>\n\n<pre><code>StaticHttpHandler staticHttpHandler = new StaticHttpHandler(\"/static\");\nserver.getServerConfiguration().addHttpHandler(staticHttpHandler, \"/\");\n</code></pre>\n\n<p>My question is where should i put the static file in</p>\n"},{"tags":["java","android","gpx"],"comments":[{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1669216147,"post_id":74548483,"comment_id":131594850,"body_markdown":"What is the value of `stringUrl` ? Give and example.  Given that your are trying to parse a string for the Uri suggests that the Uri is not of the of the right type for `getContentResolver`, so where did you get `stringUrl` from?","body":"What is the value of <code>stringUrl</code> ? Give and example.  Given that your are trying to parse a string for the Uri suggests that the Uri is not of the of the right type for <code>getContentResolver</code>, so where did you get <code>stringUrl</code> from?"}],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669217231,"creation_date":1669217231,"answer_id":74549270,"question_id":74548483,"body_markdown":"getContentResolver is to get data from a [ContentResolver][1] not from any random Url, it is for getting data from other processes and usually takes the string form of `content://....`\r\n\r\nYou need to download the gpx first with something like [HttpURLConnection][2] and it&#39;s `getInputStream()` method to get an `inputStream` to use with the parser.\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/providers/content-providers\r\n  [2]: https://developer.android.com/reference/java/net/HttpURLConnection","title":"GPX parser android - No content provider","body":"<p>getContentResolver is to get data from a <a href=\"https://developer.android.com/guide/topics/providers/content-providers\" rel=\"nofollow noreferrer\">ContentResolver</a> not from any random Url, it is for getting data from other processes and usually takes the string form of <code>content://....</code></p>\n<p>You need to download the gpx first with something like <a href=\"https://developer.android.com/reference/java/net/HttpURLConnection\" rel=\"nofollow noreferrer\">HttpURLConnection</a> and it's <code>getInputStream()</code> method to get an <code>inputStream</code> to use with the parser.</p>\n"}],"owner":{"account_id":27025527,"reputation":5,"user_id":20582870,"display_name":"maciek_123_123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74549270,"answer_count":1,"score":-1,"last_activity_date":1669217231,"creation_date":1669213963,"question_id":74548483,"body_markdown":"In my application I would like to use a gpx file downloaded from the server.\r\n\r\n\r\n\r\nI use  GPXParser from https://github.com/ticofab/android-gpx-parser .\r\n\r\nWhen I was trying to parse gpx file, I got warring &quot;java.io.FileNotFoundException: No content provider&quot;\r\n\r\n```\r\nGpx parsedGpx = null;\r\nGPXParser parser = new GPXParser();\r\nInputStream inputStream = getContentResolver().openInputStream(Uri.parse(stringUrl));\r\nparsedGpx = parser.parse(inputStream);\r\n```\r\n\r\n\r\nHow can I solve my problem?\r\n\r\n","title":"GPX parser android - No content provider","body":"<p>In my application I would like to use a gpx file downloaded from the server.</p>\n<p>I use  GPXParser from <a href=\"https://github.com/ticofab/android-gpx-parser\" rel=\"nofollow noreferrer\">https://github.com/ticofab/android-gpx-parser</a> .</p>\n<p>When I was trying to parse gpx file, I got warring &quot;java.io.FileNotFoundException: No content provider&quot;</p>\n<pre><code>Gpx parsedGpx = null;\nGPXParser parser = new GPXParser();\nInputStream inputStream = getContentResolver().openInputStream(Uri.parse(stringUrl));\nparsedGpx = parser.parse(inputStream);\n</code></pre>\n<p>How can I solve my problem?</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1398780553,"post_id":23366900,"comment_id":35790813,"body_markdown":"I&#39;m not really sure what are you trying to achieve... could you elaborate?","body":"I&#39;m not really sure what are you trying to achieve... could you elaborate?"},{"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"score":0,"creation_date":1398780745,"post_id":23366900,"comment_id":35790990,"body_markdown":"Are you trying to create a list with a generic type of the field?","body":"Are you trying to create a list with a generic type of the field?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1398780797,"post_id":23366900,"comment_id":35791030,"body_markdown":"Generics are a compile time feature.  They doesn&#39;t do anything at runtime. What are you trying to achieve?","body":"Generics are a compile time feature.  They doesn&#39;t do anything at runtime. What are you trying to achieve?"},{"owner":{"account_id":3013011,"reputation":12977,"user_id":2555999,"accept_rate":75,"display_name":"ZuzEL"},"score":0,"creation_date":1398781102,"post_id":23366900,"comment_id":35791274,"body_markdown":"Guys, I&#39;am trying to generate random data for tests. For this purpose I fill all my Entity fields with random values through reflections. But I can not create new List&lt;T&gt; and assign it to the field. But it seems my bad","body":"Guys, I&#39;am trying to generate random data for tests. For this purpose I fill all my Entity fields with random values through reflections. But I can not create new List&lt;T&gt; and assign it to the field. But it seems my bad"},{"owner":{"account_id":2671187,"reputation":3406,"user_id":2308571,"display_name":"jgitter"},"score":0,"creation_date":1398781314,"post_id":23366900,"comment_id":35791448,"body_markdown":"If it&#39;s just for testing, then you probably should probably just make `List&lt;?&gt;s` and suppress the warnings.  :-)","body":"If it&#39;s just for testing, then you probably should probably just make <code>List&lt;?&gt;s</code> and suppress the warnings.  :-)"}],"answers":[{"tags":[],"owner":{"account_id":2671187,"reputation":3406,"user_id":2308571,"display_name":"jgitter"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1398780667,"creation_date":1398780285,"answer_id":23366992,"question_id":23366900,"body_markdown":"You can&#39;t do that at runtime.  The best you could do is to create a List&amp;lt;?&amp;gt; and do runtime type checking yourself.\r\n\r\nIf you&#39;re curious why this is, check out &quot;type erasure&quot;.  http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\r\n\r\nAlternatively, you could attempt to *clone* the old list, but only the implementations of list have a clone() method, not the List interface, and it will only perform a shallow copy.\r\n\r\nGood luck!","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>You can't do that at runtime.  The best you could do is to create a List&lt;?&gt; and do runtime type checking yourself.</p>\n\n<p>If you're curious why this is, check out \"type erasure\".  <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/java/generics/erasure.html</a></p>\n\n<p>Alternatively, you could attempt to <em>clone</em> the old list, but only the implementations of list have a clone() method, not the List interface, and it will only perform a shallow copy.</p>\n\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":141282,"reputation":10126,"user_id":348189,"accept_rate":89,"display_name":"TacB0sS"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1398781580,"creation_date":1398781580,"answer_id":23367509,"question_id":23366900,"body_markdown":"\r\nWhat I normally do is:\r\n\r\n    public void populateListAndSetToField(Field field,Class&lt;?&gt; type, Object instance, Object... params) throws IllegalArgumentException, IllegalAccessException {\r\n\t\tList&lt;?&gt; list = getGenericList(type, params);\r\n\t\tfield.set(instance, list);\r\n\t}\r\n\r\n\tprivate &lt;Type&gt; List&lt;Type&gt; getGenericList(Class&lt;Type&gt; type, Object... params) {\r\n\t\tList&lt;Type&gt; l = new ArrayList&lt;Type&gt;();\r\n\t\tfor (int i = 0; i &lt; params.length; i++) {\r\n\t\t\tl.add((Type) params[i]);\r\n\t\t}\r\n\t\treturn l;\r\n\t}\r\n\r\nThere are runtime constrains and checks you need to apply but I&#39;ve used this too many times and it works, thing is when I get to these implementations, the entire surrounding architecture relay on unknown object types, it is tricky.","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>What I normally do is:</p>\n\n<pre><code>public void populateListAndSetToField(Field field,Class&lt;?&gt; type, Object instance, Object... params) throws IllegalArgumentException, IllegalAccessException {\n    List&lt;?&gt; list = getGenericList(type, params);\n    field.set(instance, list);\n}\n\nprivate &lt;Type&gt; List&lt;Type&gt; getGenericList(Class&lt;Type&gt; type, Object... params) {\n    List&lt;Type&gt; l = new ArrayList&lt;Type&gt;();\n    for (int i = 0; i &lt; params.length; i++) {\n        l.add((Type) params[i]);\n    }\n    return l;\n}\n</code></pre>\n\n<p>There are runtime constrains and checks you need to apply but I've used this too many times and it works, thing is when I get to these implementations, the entire surrounding architecture relay on unknown object types, it is tricky.</p>\n"},{"tags":[],"owner":{"account_id":1909411,"reputation":6847,"user_id":1723626,"accept_rate":70,"display_name":"Optimus Prime"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669217222,"creation_date":1669217222,"answer_id":74549269,"question_id":23366900,"body_markdown":"This is how I was able to create a list,\r\n\r\n```\r\n// Get the class from the type\r\nClass fieldClass = Class.forName(((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0].getTypeName());\r\n// Create a new instance\r\nObject instance = fieldClass.newInstance();\r\nreturn List.of(instance);\r\n```","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>This is how I was able to create a list,</p>\n<pre><code>// Get the class from the type\nClass fieldClass = Class.forName(((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0].getTypeName());\n// Create a new instance\nObject instance = fieldClass.newInstance();\nreturn List.of(instance);\n</code></pre>\n"}],"owner":{"account_id":3013011,"reputation":12977,"user_id":2555999,"accept_rate":75,"display_name":"ZuzEL"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4946,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":23366992,"answer_count":3,"score":5,"last_activity_date":1669217222,"creation_date":1398780092,"question_id":23366900,"body_markdown":"I have a Field f, after I check it and it turns out that it is of type List&lt;T&gt;, I can get its generic type.\r\n\r\nBut how do I create a new List&lt;type&gt; with this generic type and put new instances inside?\r\n\r\n    if (List.class.isAssignableFrom(f.getType())) {\r\n\r\n\t\tType genericType = f.getGenericType();\r\n\t\tList&lt;genericType&gt; a = new ArrayList(); // ?????? Error\r\n       \r\n\t}\r\n\r\n___\r\nFor example I have a field with type `List&lt;MyObject&gt;`\r\n\r\nIs it possible to create an new instance of `ArrayList&lt;MyObject&gt;` through reflections?","title":"How to create a new List&lt;T&gt; knowing the Type through reflection?","body":"<p>I have a Field f, after I check it and it turns out that it is of type List, I can get its generic type.</p>\n\n<p>But how do I create a new List with this generic type and put new instances inside?</p>\n\n<pre><code>if (List.class.isAssignableFrom(f.getType())) {\n\n    Type genericType = f.getGenericType();\n    List&lt;genericType&gt; a = new ArrayList(); // ?????? Error\n\n}\n</code></pre>\n\n<hr>\n\n<p>For example I have a field with type <code>List&lt;MyObject&gt;</code></p>\n\n<p>Is it possible to create an new instance of <code>ArrayList&lt;MyObject&gt;</code> through reflections?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-annotations"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1669184999,"post_id":74542588,"comment_id":131584265,"body_markdown":"No class implements that interface. Let&#39;s start with why you think it&#39;s useful to autowire a non-existing implementation?","body":"No class implements that interface. Let&#39;s start with why you think it&#39;s useful to autowire a non-existing implementation?"},{"owner":{"account_id":23861350,"reputation":3,"user_id":17864251,"display_name":"Md. Ashikul Islam"},"score":0,"creation_date":1669194312,"post_id":74542588,"comment_id":131586752,"body_markdown":"I am a bit confused about that as well but I think MongoRepository contains some functionalities that I needed in the project. (For example MongoClient, MongoConverter). I created an empty interface that implements the mongo interface. If I am doing things wrong can you kindly help me visualize it?","body":"I am a bit confused about that as well but I think MongoRepository contains some functionalities that I needed in the project. (For example MongoClient, MongoConverter). I created an empty interface that implements the mongo interface. If I am doing things wrong can you kindly help me visualize it?"}],"answers":[{"tags":[],"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669185592,"creation_date":1669185592,"answer_id":74542689,"question_id":74542588,"body_markdown":"Spring boot uses `@EnableJpaRepositories` which all interfaces/classes that extend/implement a spring data [repository](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html). In turn spring then provides an implementation which is added to the container.\r\n\r\nAs [MongoRepository](https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html) is spring JPA repository, the extending interfaces are being picked up and provided as autowireable dependencies. So when you annotate your `PostRepository` with `@Component` it is picked up twice by spring, causing the multiple beans found exception.\r\n\r\nFor more info on this topic check [baeldung](https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa) and [docs](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/)","title":"Spring Boot @Component annotation not used on interface but still bean is being provided with @Autowired","body":"<p>Spring boot uses <code>@EnableJpaRepositories</code> which all interfaces/classes that extend/implement a spring data <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html\" rel=\"nofollow noreferrer\">repository</a>. In turn spring then provides an implementation which is added to the container.</p>\n<p>As <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/repository/MongoRepository.html\" rel=\"nofollow noreferrer\">MongoRepository</a> is spring JPA repository, the extending interfaces are being picked up and provided as autowireable dependencies. So when you annotate your <code>PostRepository</code> with <code>@Component</code> it is picked up twice by spring, causing the multiple beans found exception.</p>\n<p>For more info on this topic check <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-data-jpa\" rel=\"nofollow noreferrer\">baeldung</a> and <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/\" rel=\"nofollow noreferrer\">docs</a></p>\n"}],"owner":{"account_id":23861350,"reputation":3,"user_id":17864251,"display_name":"Md. Ashikul Islam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74542689,"answer_count":1,"score":0,"last_activity_date":1669216958,"creation_date":1669184825,"question_id":74542588,"body_markdown":"I am a new learner of Spring Boot. As far as I learned by now, we need to use `@Component` above a class/interface for Spring to store the bean in the Spring container. And we can inject that bean by using `@Autowired`. I&#39;ve been working on a demo project where I can&#39;t see `@Component` on an interface but somehow the bean of that interface is being provided correctly. If I add `@Component` it says multiple beans found. \r\n\r\nPost Controller Class:\r\n\r\n```\r\npackage com.ashik.jobmarket.controller;\r\n\r\nimport com.ashik.jobmarket.repository.PostRepository;\r\nimport com.ashik.jobmarket.model.Post;\r\nimport com.ashik.jobmarket.repository.SearchRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\r\npublic class PostController {\r\n\r\n    @Autowired\r\n    PostRepository repo;\r\n    @Autowired\r\n    SearchRepository srepo;\r\n\r\n    @GetMapping(&quot;/allPosts&quot;)\r\n    @CrossOrigin\r\n    public List&lt;Post&gt; getAllPosts(){\r\n        return repo.findAll();\r\n    }\r\n\r\n    @GetMapping(&quot;/posts/{text}&quot;)\r\n    @CrossOrigin\r\n    public List&lt;Post&gt; search(@PathVariable String text){\r\n        return srepo.findByText(text);\r\n    }\r\n\r\n\r\n    @PostMapping(&quot;/post&quot;)\r\n    @CrossOrigin\r\n    public Post addPost(@RequestBody Post post){\r\n        return repo.save(post);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nThe Post Repository Interface:\r\n\r\n```\r\npackage com.ashik.jobmarket.repository;\r\nimport com.ashik.jobmarket.model.Post;\r\nimport org.springframework.data.mongodb.repository.MongoRepository;\r\n\r\npublic interface PostRepository extends MongoRepository&lt;Post, String&gt;{}\r\n```\r\n\r\n\r\n***No Class implemented Post Repository.***\r\n\r\nI tried adding `@Component` myself but it&#39;s saying that I have multiple beans of the same name. I am trying to understand the process, and how the bean is being delivered without `@Component` annotation.","title":"Spring Boot @Component annotation not used on interface but still bean is being provided with @Autowired","body":"<p>I am a new learner of Spring Boot. As far as I learned by now, we need to use <code>@Component</code> above a class/interface for Spring to store the bean in the Spring container. And we can inject that bean by using <code>@Autowired</code>. I've been working on a demo project where I can't see <code>@Component</code> on an interface but somehow the bean of that interface is being provided correctly. If I add <code>@Component</code> it says multiple beans found.</p>\n<p>Post Controller Class:</p>\n<pre><code>package com.ashik.jobmarket.controller;\n\nimport com.ashik.jobmarket.repository.PostRepository;\nimport com.ashik.jobmarket.model.Post;\nimport com.ashik.jobmarket.repository.SearchRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@CrossOrigin(origins = &quot;http://localhost:3000&quot;)\npublic class PostController {\n\n    @Autowired\n    PostRepository repo;\n    @Autowired\n    SearchRepository srepo;\n\n    @GetMapping(&quot;/allPosts&quot;)\n    @CrossOrigin\n    public List&lt;Post&gt; getAllPosts(){\n        return repo.findAll();\n    }\n\n    @GetMapping(&quot;/posts/{text}&quot;)\n    @CrossOrigin\n    public List&lt;Post&gt; search(@PathVariable String text){\n        return srepo.findByText(text);\n    }\n\n\n    @PostMapping(&quot;/post&quot;)\n    @CrossOrigin\n    public Post addPost(@RequestBody Post post){\n        return repo.save(post);\n    }\n\n}\n</code></pre>\n<p>The Post Repository Interface:</p>\n<pre><code>package com.ashik.jobmarket.repository;\nimport com.ashik.jobmarket.model.Post;\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\npublic interface PostRepository extends MongoRepository&lt;Post, String&gt;{}\n</code></pre>\n<p><em><strong>No Class implemented Post Repository.</strong></em></p>\n<p>I tried adding <code>@Component</code> myself but it's saying that I have multiple beans of the same name. I am trying to understand the process, and how the bean is being delivered without <code>@Component</code> annotation.</p>\n"},{"tags":["java","nullpointerexception","java-stream","option-type"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1669123344,"creation_date":1669122510,"answer_id":74533138,"question_id":74533076,"body_markdown":"Something like this:\r\n\r\n    public Optional&lt;Employee&gt; findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull) // &lt;---------------\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst();\r\n    }\r\n\r\nThis will return an empty `Optional` if no result is found. The first filter will filter all non-null employees, then the second filter will check the id.\r\n\r\n---\r\nIf you want to get Employee instead of Optional, then you can use:\r\n\r\n    public Employee findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull)\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst()\r\n                .orElse(null);\r\n    }\r\n\r\nOr if you want to go deeper, you even throw an exception if no employee is found, for example:\r\n\r\n    public Employee findEmployee(int id) {\r\n        return Stream.of(employees)\r\n                .filter(Objects::nonNull)\r\n                .filter(employee -&gt; employee.getId() == id)\r\n                .findFirst()\r\n                .orElseThrow(() -&gt; new RuntimeException(&quot;No employee found.&quot;));\r\n    }\r\n","title":"How to get rid of NullPointerException in a method using Streams API and Optional?","body":"<p>Something like this:</p>\n<pre><code>public Optional&lt;Employee&gt; findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull) // &lt;---------------\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst();\n}\n</code></pre>\n<p>This will return an empty <code>Optional</code> if no result is found. The first filter will filter all non-null employees, then the second filter will check the id.</p>\n<hr />\n<p>If you want to get Employee instead of Optional, then you can use:</p>\n<pre><code>public Employee findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull)\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst()\n            .orElse(null);\n}\n</code></pre>\n<p>Or if you want to go deeper, you even throw an exception if no employee is found, for example:</p>\n<pre><code>public Employee findEmployee(int id) {\n    return Stream.of(employees)\n            .filter(Objects::nonNull)\n            .filter(employee -&gt; employee.getId() == id)\n            .findFirst()\n            .orElseThrow(() -&gt; new RuntimeException(&quot;No employee found.&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1669216529,"accepted_answer_id":74533138,"answer_count":1,"score":-2,"last_activity_date":1669216600,"creation_date":1669122241,"question_id":74533076,"body_markdown":"Given the following task.\r\nWe have an `Employee` and a `Company` classes. Each instance of `Employee` class is stored in array `Employee[] employees` in the `Company` class. I need a method which finds an instance of `Employee` in the array `Employee[] employees` by `id`.\r\n\r\nI managed to write the following code:\r\n\r\n    public class Employee {\r\n    \tprotected final int id;\r\n    \tprotected String name;\r\n    \r\n    \tpublic Employee(int id, String name) {\r\n    \t\tthis.id = id;\r\n    \t\tthis.name= name;\r\n    \t}\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    }\r\n    \r\n    public class Company {\r\n    \tprivate Employee[] employees;\r\n    \tprivate int size;\r\n    \tprivate static final int defaultCapacity = 5;\r\n    \t\r\n    \tpublic Company() {\r\n    \t\tthis(defaultCapacity);\r\n    \t}\r\n    \t\r\n    \tpublic Company(int capacity) {\r\n    \t\tif (capacity &lt;= 0)\r\n    \t\t\t throw new RuntimeException(&quot;capacity is required&quot;);\r\n    \t\temployees = new Employee[capacity];\r\n    \t}\r\n    \r\n    \tpublic Employee findEmployee(int id) {\r\n    \t\tfor (int i = 0; i &lt; size; i++) {\r\n    \t\t\tif(employees[i].getId() == id) {\r\n    \t\t\t\treturn employees[i];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\nThe problem is that my method `public Employee findEmployee(int id)` throws `NullPointerException` if an element of the `Employee[] employees` equals `null`.\r\n\r\nHow can I rewrite the method `public Employee findEmployee(int id)` using Streams API and Optional in order to get rid of `NullPointerException` in the method public `Employee findEmployee(int id)`?\r\n","title":"How to get rid of NullPointerException in a method using Streams API and Optional?","body":"<p>Given the following task.\nWe have an <code>Employee</code> and a <code>Company</code> classes. Each instance of <code>Employee</code> class is stored in array <code>Employee[] employees</code> in the <code>Company</code> class. I need a method which finds an instance of <code>Employee</code> in the array <code>Employee[] employees</code> by <code>id</code>.</p>\n<p>I managed to write the following code:</p>\n<pre><code>public class Employee {\n    protected final int id;\n    protected String name;\n\n    public Employee(int id, String name) {\n        this.id = id;\n        this.name= name;\n    }\n    public int getId() {\n        return id;\n    }\n}\n\npublic class Company {\n    private Employee[] employees;\n    private int size;\n    private static final int defaultCapacity = 5;\n    \n    public Company() {\n        this(defaultCapacity);\n    }\n    \n    public Company(int capacity) {\n        if (capacity &lt;= 0)\n             throw new RuntimeException(&quot;capacity is required&quot;);\n        employees = new Employee[capacity];\n    }\n\n    public Employee findEmployee(int id) {\n        for (int i = 0; i &lt; size; i++) {\n            if(employees[i].getId() == id) {\n                return employees[i];\n            }\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>The problem is that my method <code>public Employee findEmployee(int id)</code> throws <code>NullPointerException</code> if an element of the <code>Employee[] employees</code> equals <code>null</code>.</p>\n<p>How can I rewrite the method <code>public Employee findEmployee(int id)</code> using Streams API and Optional in order to get rid of <code>NullPointerException</code> in the method public <code>Employee findEmployee(int id)</code>?</p>\n"},{"tags":["java","double","precision"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":4,"creation_date":1669215823,"post_id":74548868,"comment_id":131594726,"body_markdown":"Never trust on double equality in code. Either use a smal allowed delta (this is what JUnit&#39;s `assertEquals(double, double, double)` does), or use `BigDecimal`.","body":"Never trust on double equality in code. Either use a smal allowed delta (this is what JUnit&#39;s <code>assertEquals(double, double, double)</code> does), or use <code>BigDecimal</code>."},{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":3,"creation_date":1669215824,"post_id":74548868,"comment_id":131594729,"body_markdown":"Can you please provide an [mre]?","body":"Can you please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669215956,"post_id":74548868,"comment_id":131594767,"body_markdown":"This might also be a HW difference - as Rob said, always count with precision issues in floating point math (which this is).","body":"This might also be a HW difference - as Rob said, always count with precision issues in floating point math (which this is)."},{"owner":{"account_id":13359761,"reputation":391,"user_id":10079966,"display_name":"Vml11"},"score":0,"creation_date":1669216168,"post_id":74548868,"comment_id":131594857,"body_markdown":"Yeah it seems i might need to go with Delta checks. In any case does someone know why this difference can happen on doubles? \nMinimal reproducible example is kinda hard to tell just a bunch of doubles that i sum. I guess Java might take some of the decimals as BigDecimal and when they sum the precision is different.","body":"Yeah it seems i might need to go with Delta checks. In any case does someone know why this difference can happen on doubles?  Minimal reproducible example is kinda hard to tell just a bunch of doubles that i sum. I guess Java might take some of the decimals as BigDecimal and when they sum the precision is different."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1669216441,"post_id":74548868,"comment_id":131594968,"body_markdown":"Because floating point numbers are like this. Check [Is floating point math broken?](https://stackoverflow.com/questions/588004/is-floating-point-math-broken)","body":"Because floating point numbers are like this. Check <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}],"answers":[{"tags":[],"owner":{"account_id":6746752,"reputation":298,"user_id":5198144,"display_name":"Pekinek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669216350,"creation_date":1669216350,"answer_id":74549034,"question_id":74548868,"body_markdown":"Our computers cannot store exact representation of double type. They must be rounded to be saved. That&#39;s why comparing them directly with == might produce unexpected results. You can read more [here][1] about this topic.\r\n\r\nExample of correct comparison of doubles in plain java:\r\n\r\n    double epsilon = 0.000001d;\r\n    assertThat(Math.abs(d1 - d2) &lt; epsilon).isTrue();\r\n\r\n  [1]: https://www.baeldung.com/java-comparing-doubles","title":"Same Java version produces different output for double value","body":"<p>Our computers cannot store exact representation of double type. They must be rounded to be saved. That's why comparing them directly with == might produce unexpected results. You can read more <a href=\"https://www.baeldung.com/java-comparing-doubles\" rel=\"nofollow noreferrer\">here</a> about this topic.</p>\n<p>Example of correct comparison of doubles in plain java:</p>\n<pre><code>double epsilon = 0.000001d;\nassertThat(Math.abs(d1 - d2) &lt; epsilon).isTrue();\n</code></pre>\n"}],"owner":{"account_id":13359761,"reputation":391,"user_id":10079966,"display_name":"Vml11"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74549034,"answer_count":1,"score":0,"last_activity_date":1669216350,"creation_date":1669215624,"question_id":74548868,"body_markdown":"I have a long sum of doubles that produces an output.\r\nProblem comes when I execute the tests E2E my local environment gets a result with certain amount of decimals but in the dev machine despite it has the same architecture and same java version the decimals do not match for certain sums.\r\n\r\nFor instance:\r\n\r\n```\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  6764785.117418662 ---&gt; dev\r\n  6764785.11741866  ---&gt; Local\r\n\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  9.7787576643837 ---&gt; dev\r\n  9.778757664383699 ---&gt; Local\r\n\r\nmatch failed: EQUALS\r\n  $ | not equal (NUMBER:NUMBER)\r\n  2.0465350497710526 ---&gt; dev\r\n  2.046535049771075 ---&gt; Local\r\n\r\n```\r\n\r\nThese are just some examples.\r\n\r\nI am using openjdk version &quot;11.0.15&quot; 2022-04-19 from temurin\r\n\r\nI also tried another java version but it keeps happening the same. Any idea of what might i be doing wrong? Also using intelliJ latest version.","title":"Same Java version produces different output for double value","body":"<p>I have a long sum of doubles that produces an output.\nProblem comes when I execute the tests E2E my local environment gets a result with certain amount of decimals but in the dev machine despite it has the same architecture and same java version the decimals do not match for certain sums.</p>\n<p>For instance:</p>\n<pre><code>match failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  6764785.117418662 ---&gt; dev\n  6764785.11741866  ---&gt; Local\n\nmatch failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  9.7787576643837 ---&gt; dev\n  9.778757664383699 ---&gt; Local\n\nmatch failed: EQUALS\n  $ | not equal (NUMBER:NUMBER)\n  2.0465350497710526 ---&gt; dev\n  2.046535049771075 ---&gt; Local\n\n</code></pre>\n<p>These are just some examples.</p>\n<p>I am using openjdk version &quot;11.0.15&quot; 2022-04-19 from temurin</p>\n<p>I also tried another java version but it keeps happening the same. Any idea of what might i be doing wrong? Also using intelliJ latest version.</p>\n"},{"tags":["java","spring","spring-data"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1669211108,"post_id":74547755,"comment_id":131592713,"body_markdown":"Isn&#39;t the point of `nativeQuery = true` that the query should be just plain SQL? If so, &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome)&quot; doesn&#39;t look appropriate to me.","body":"Isn&#39;t the point of <code>nativeQuery = true</code> that the query should be just plain SQL? If so, &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome)&quot; doesn&#39;t look appropriate to me."},{"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"score":0,"creation_date":1669211197,"post_id":74547755,"comment_id":131592762,"body_markdown":"Looks like your list is empty. check the similar post https://stackoverflow.com/questions/38877775/org-postgresql-util-psqlexception-error-syntax-error-at-or-near","body":"Looks like your list is empty. check the similar post <a href=\"https://stackoverflow.com/questions/38877775/org-postgresql-util-psqlexception-error-syntax-error-at-or-near\" title=\"org postgresql util psqlexception error syntax error at or near\">stackoverflow.com/questions/38877775/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669212170,"post_id":74547755,"comment_id":131593174,"body_markdown":"Constructing a DTO onl works in JPQL not in SQL.","body":"Constructing a DTO onl works in JPQL not in SQL."}],"answers":[{"tags":[],"owner":{"account_id":23515844,"reputation":5,"user_id":17563773,"display_name":"Victor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669216274,"creation_date":1669216274,"answer_id":74549017,"question_id":74547755,"body_markdown":"Works when I Change to JPQL.\r\n\r\n    @Query(value = &quot;select new com.tcc.tccbackend.dtos.AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from Agendamento a &quot; + &quot;join Paciente p on p.id = a.id &quot; + &quot;join Profissional pro on pro.id = a.id &quot; + &quot;join Servico s on s.id = a.id&quot;)\r\n        List&lt;AgendamentoDTO&gt; agendamentos3();","title":"JAVA ERROR in SQL: syntax error at or near &quot;(&quot; Position: 26","body":"<p>Works when I Change to JPQL.</p>\n<pre><code>@Query(value = &quot;select new com.tcc.tccbackend.dtos.AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from Agendamento a &quot; + &quot;join Paciente p on p.id = a.id &quot; + &quot;join Profissional pro on pro.id = a.id &quot; + &quot;join Servico s on s.id = a.id&quot;)\n    List&lt;AgendamentoDTO&gt; agendamentos3();\n</code></pre>\n"}],"owner":{"account_id":23515844,"reputation":5,"user_id":17563773,"display_name":"Victor"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669216274,"creation_date":1669210884,"question_id":74547755,"body_markdown":"I am getting this error\r\n\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;(&quot;\r\n      Position: 26\r\n\r\nwhen I try use following method \r\n\r\n**Repository**\r\n\r\n    @Query(value = &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from agendamento a &quot; + &quot;join pacientes p on p.id = a.paciente_id &quot; + &quot;join profissionais pro on pro.id = a.profissional_id &quot; + &quot;join servico s on s.id = a.servico_id&quot;, nativeQuery = true)\r\n        List&lt;AgendamentoDTO&gt; agendamentos3();\r\n\r\n**DTO**\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    public class AgendamentoDTO {\r\n        private Integer id;\r\n        private String data;\r\n        private String servico;\r\n        private String paciente;\r\n        private String profissional;\r\n    \r\n        public AgendamentoDTO(Integer id, String paciente, String data, String profissional, String servico) {\r\n            this.id = id;\r\n            this.data = data;\r\n            this.servico = servico;\r\n            this.paciente = paciente;\r\n            this.profissional = profissional;\r\n        }\r\n    }\r\n\r\nSpringData - 2.7.0\r\n\r\nDatabase - PostgreSQL\r\n\r\n","title":"JAVA ERROR in SQL: syntax error at or near &quot;(&quot; Position: 26","body":"<p>I am getting this error</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;(&quot;\n  Position: 26\n</code></pre>\n<p>when I try use following method</p>\n<p><strong>Repository</strong></p>\n<pre><code>@Query(value = &quot;select new AgendamentoDTO(a.id, a.data, s.nome, p.nome, pro.nome) &quot; + &quot;from agendamento a &quot; + &quot;join pacientes p on p.id = a.paciente_id &quot; + &quot;join profissionais pro on pro.id = a.profissional_id &quot; + &quot;join servico s on s.id = a.servico_id&quot;, nativeQuery = true)\n    List&lt;AgendamentoDTO&gt; agendamentos3();\n</code></pre>\n<p><strong>DTO</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\npublic class AgendamentoDTO {\n    private Integer id;\n    private String data;\n    private String servico;\n    private String paciente;\n    private String profissional;\n\n    public AgendamentoDTO(Integer id, String paciente, String data, String profissional, String servico) {\n        this.id = id;\n        this.data = data;\n        this.servico = servico;\n        this.paciente = paciente;\n        this.profissional = profissional;\n    }\n}\n</code></pre>\n<p>SpringData - 2.7.0</p>\n<p>Database - PostgreSQL</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669216123,"creation_date":1669216123,"answer_id":74548979,"question_id":74546589,"body_markdown":"When you execute a query against the Firebase Database, there will potentially be multiple results. So the snapshot contains a list of those results. Even if there is only a single result, the snapshot will contain a list of one result.\r\n\r\nYour `onDataChange` needs to handle this list by looping over `snapshot.getChildren()`:\r\n\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        for (DataSnapshot shopUserSnapshot: snapshot.getChildren()) {\r\n            phone=shopUserSnapshot.getValue(ShopUser.class).getNumberphone_shop();\r\n        }\r\n    }\r\n\r\nAlso: please never leave `onCancelled` empty, as you&#39;re ignoring potential errors. At its very least it should look like:\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n        throw error.toException()l\r\n    }","title":"I can not get data from firebase from a specific user (using the uid check method)","body":"<p>When you execute a query against the Firebase Database, there will potentially be multiple results. So the snapshot contains a list of those results. Even if there is only a single result, the snapshot will contain a list of one result.</p>\n<p>Your <code>onDataChange</code> needs to handle this list by looping over <code>snapshot.getChildren()</code>:</p>\n<pre><code>public void onDataChange(@NonNull DataSnapshot snapshot) {\n    for (DataSnapshot shopUserSnapshot: snapshot.getChildren()) {\n        phone=shopUserSnapshot.getValue(ShopUser.class).getNumberphone_shop();\n    }\n}\n</code></pre>\n<p>Also: please never leave <code>onCancelled</code> empty, as you're ignoring potential errors. At its very least it should look like:</p>\n<pre><code>@Override\npublic void onCancelled(@NonNull DatabaseError error) {\n    throw error.toException()l\n}\n</code></pre>\n"}],"owner":{"account_id":26884422,"reputation":11,"user_id":20467834,"display_name":"shestakovski.erchim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669216123,"creation_date":1669205432,"question_id":74546589,"body_markdown":"I ordered that when a user adds information, he also transfers his uid from another user with it; when receiving a uid, the received uid is compared with the uid from the folder with users.  If they match, the data of a certain user (number, name) is received.  User Model\r\n```\r\npublic class ShopUser {\r\n    private String client_shop,numberphone_shop,ShopInfouid;\r\n    public ShopUser(){\r\n    }\r\n    public ShopUser(String client_shop, String numberphone_shop, String shopInfouid) {\r\n        this.client_shop = client_shop;\r\n        this.numberphone_shop = numberphone_shop;\r\n    this.ShopInfouid=shopInfouid;\r\n    }\r\n    public String getClient_shop() {\r\n        return client_shop;\r\n    }\r\n    public void setClient_shop(String client_shop) {\r\n        this.client_shop = client_shop;\r\n    }\r\n    public String getNumberphone_shop() {\r\n        return numberphone_shop;\r\n    }\r\n    public void setNumberphone_shop(String numberphone_shop) {\r\n        this.numberphone_shop = numberphone_shop;\r\n    }\r\n    public String getShopInfouid() {\r\n        return ShopInfouid;\r\n    }\r\n    public void setShopInfouid(String shopInfouid) {\r\n        ShopInfouid = shopInfouid;\r\n    }\r\n}\r\n```\r\nvalidation method\r\n```\r\nShopInfoRef.orderByChild(&quot;ShopInfouid&quot;).equalTo(getIntent().getExtras().get(&quot;UidShop&quot;).toString())\r\n////UidSop   uid       ShopInfouid  uid     ////\r\n            .addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    if (snapshot.exists() &amp;&amp; snapshot.getChildrenCount() &gt; 0) {\r\nphone=snapshot.getValue(ShopUser.class).getNumberphone_shop();\r\n                    }else {\r\n                        Toast.makeText(OplataActivity.this, &quot; &quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n                }\r\n            });\r\n```\r\ninitialization\r\n```\r\nprivate String phone;\r\n    ShopInfoRef=FirebaseDatabase.getInstance().getReference().child(&quot;shop&quot;);\r\n```\r\ntried to check in the log d but gave an error that the phone string has a null value and tried to pass this string to the phone open method, but the required number does not appear there, here is the method\r\n```\r\nimage_phone_shop.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Intent ohoneIntent=new Intent(Intent.ACTION_DIAL);\r\n                ohoneIntent.setData(Uri.parse(&quot;tel:&quot;+ phone));\r\n                startActivity(ohoneIntent);\r\n            }\r\n        });\r\n```\r\nHere is the users folder in which the uids of users from it are compared with the accepted uid\r\n[![user][1]][1]\r\n\r\n\r\nHere is the data folder where the uid is taken from for comparison\r\n[![data][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vTX6r.jpg\r\n  [2]: https://i.stack.imgur.com/RlLY9.jpg","title":"I can not get data from firebase from a specific user (using the uid check method)","body":"<p>I ordered that when a user adds information, he also transfers his uid from another user with it; when receiving a uid, the received uid is compared with the uid from the folder with users.  If they match, the data of a certain user (number, name) is received.  User Model</p>\n<pre><code>public class ShopUser {\n    private String client_shop,numberphone_shop,ShopInfouid;\n    public ShopUser(){\n    }\n    public ShopUser(String client_shop, String numberphone_shop, String shopInfouid) {\n        this.client_shop = client_shop;\n        this.numberphone_shop = numberphone_shop;\n    this.ShopInfouid=shopInfouid;\n    }\n    public String getClient_shop() {\n        return client_shop;\n    }\n    public void setClient_shop(String client_shop) {\n        this.client_shop = client_shop;\n    }\n    public String getNumberphone_shop() {\n        return numberphone_shop;\n    }\n    public void setNumberphone_shop(String numberphone_shop) {\n        this.numberphone_shop = numberphone_shop;\n    }\n    public String getShopInfouid() {\n        return ShopInfouid;\n    }\n    public void setShopInfouid(String shopInfouid) {\n        ShopInfouid = shopInfouid;\n    }\n}\n</code></pre>\n<p>validation method</p>\n<pre><code>ShopInfoRef.orderByChild(&quot;ShopInfouid&quot;).equalTo(getIntent().getExtras().get(&quot;UidShop&quot;).toString())\n////UidSop   uid       ShopInfouid  uid     ////\n            .addValueEventListener(new ValueEventListener() {\n                @Override\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\n                    if (snapshot.exists() &amp;&amp; snapshot.getChildrenCount() &gt; 0) {\nphone=snapshot.getValue(ShopUser.class).getNumberphone_shop();\n                    }else {\n                        Toast.makeText(OplataActivity.this, &quot; &quot;, Toast.LENGTH_SHORT).show();\n                    }\n                }\n                @Override\n                public void onCancelled(@NonNull DatabaseError error) {\n                }\n            });\n</code></pre>\n<p>initialization</p>\n<pre><code>private String phone;\n    ShopInfoRef=FirebaseDatabase.getInstance().getReference().child(&quot;shop&quot;);\n</code></pre>\n<p>tried to check in the log d but gave an error that the phone string has a null value and tried to pass this string to the phone open method, but the required number does not appear there, here is the method</p>\n<pre><code>image_phone_shop.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Intent ohoneIntent=new Intent(Intent.ACTION_DIAL);\n                ohoneIntent.setData(Uri.parse(&quot;tel:&quot;+ phone));\n                startActivity(ohoneIntent);\n            }\n        });\n</code></pre>\n<p>Here is the users folder in which the uids of users from it are compared with the accepted uid\n<a href=\"https://i.stack.imgur.com/vTX6r.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vTX6r.jpg\" alt=\"user\" /></a></p>\n<p>Here is the data folder where the uid is taken from for comparison\n<a href=\"https://i.stack.imgur.com/RlLY9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RlLY9.jpg\" alt=\"data\" /></a></p>\n"},{"tags":["java","spring","spring-boot","exception","runtime-error"],"comments":[{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669221620,"post_id":74548945,"comment_id":131596983,"body_markdown":"You can take a look here https://stackoverflow.com/a/74550143/14263933. I just wrote solution to a similar problem. Solution should be same.","body":"You can take a look here <a href=\"https://stackoverflow.com/a/74550143/14263933\">stackoverflow.com/a/74550143/14263933</a>. I just wrote solution to a similar problem. Solution should be same."},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669235451,"post_id":74548945,"comment_id":131601295,"body_markdown":"Yes that&#39;s great and work! Thank you so much, I have a small question :) you know, MethodArgumentNotValidException returns us a message. When I get this message in bulk, it is very detailed and long. I can get the content of the message &quot;There is already user with this email!&quot; no problem here. \n\n\nHowever, I want to get the &quot;path&quot; information of it, I want to get PropertyPath by using &quot;constraintViolation.getPropertyPath().toString()&quot; but I could not find this property in MethodArgumentNotValidException. \n\nThank you so much","body":"Yes that&#39;s great and work! Thank you so much, I have a small question :) you know, MethodArgumentNotValidException returns us a message. When I get this message in bulk, it is very detailed and long. I can get the content of the message &quot;There is already user with this email!&quot; no problem here.    However, I want to get the &quot;path&quot; information of it, I want to get PropertyPath by using &quot;constraintViolation.getPropertyPath().toString()&quot; but I could not find this property in MethodArgumentNotValidException.   Thank you so much"},{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669301748,"post_id":74548945,"comment_id":131617632,"body_markdown":"MethodArgumentNotValidException doesn&#39;t have getPropertyPath() method. You can try this  List&lt;FieldError&gt; bindingResult = ex.getBindingResult().getFieldErrors();  &amp; see the options available there. By the way, plz upvote my original answer if you found it useful :)","body":"MethodArgumentNotValidException doesn&#39;t have getPropertyPath() method. You can try this  List&lt;FieldError&gt; bindingResult = ex.getBindingResult().getFieldErrors();  &amp; see the options available there. By the way, plz upvote my original answer if you found it useful :)"}],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669216001,"creation_date":1669216001,"question_id":74548945,"body_markdown":"I want to catch errors from a global point with Controller Advice. \r\n\r\nI created my ControllerAdvice class in this way, but I get an error when running the project. \r\n\r\n``` @ControllerAdvice\r\npublic class RestExceptionHandler extends ResponseEntityExceptionHandler {\r\n\tList&lt;ErrorEntity&gt; localerrorEntitiesList = new ArrayList&lt;&gt;();\r\n\r\n\t@ExceptionHandler(MethodArgumentNotValidException.class)\r\n\t@ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\r\n\tprotected ResponseEntity&lt;Object&gt; MethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException){\r\n\r\n\t\ttry {\r\n\r\n\t\t\tfor (FieldError methodArgument : methodArgumentNotValidException.getBindingResult().getFieldErrors()) {\r\n\t\t\t\tlocalerrorEntitiesList.add(new ErrorEntity(methodArgument.getField(),methodArgument.toString()));\r\n\t\t\t}\r\n\r\n\t\t\treturn new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList),HttpStatus.BAD_REQUEST);\r\n\r\n\t\t}catch (Exception e){\r\n\t\t\treturn new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList), HttpStatus.BAD_REQUEST);\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\r\n} \r\n````\r\n\r\nI have successfully caught many errors before, but I get an error when I want to catch MethodArgumentNotValidException. \r\nError output : \r\n\r\n\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;handlerExceptionResolver&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method &#39;handlerExceptionResolver&#39; threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\r\n    \tat mywebapp.demowebapp.DemoWebAppApplication.main(DemoWebAppApplication.java:17) ~[main/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.5.jar:2.7.5]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method &#39;handlerExceptionResolver&#39; threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \t... 24 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\r\n    \tat org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:114) ~[spring-web-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.&lt;init&gt;(ExceptionHandlerMethodResolver.java:78) ~[spring-web-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache(ExceptionHandlerExceptionResolver.java:291) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.afterPropertiesSet(ExceptionHandlerExceptionResolver.java:268) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.addDefaultHandlerExceptionResolvers(WebMvcConfigurationSupport.java:1090) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.handlerExceptionResolver(WebMvcConfigurationSupport.java:1032) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.23.jar:5.3.23]\r\n    \t... 25 common frames omitted\r\n    \r\n    \r\n    Process finished with exit code 0","title":"@ControllerAdvice not catch MethodArgumentNotValidException","body":"<p>I want to catch errors from a global point with Controller Advice.</p>\n<p>I created my ControllerAdvice class in this way, but I get an error when running the project.</p>\n<pre><code>public class RestExceptionHandler extends ResponseEntityExceptionHandler {\n    List&lt;ErrorEntity&gt; localerrorEntitiesList = new ArrayList&lt;&gt;();\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    @ResponseStatus(HttpStatus.UNPROCESSABLE_ENTITY)\n    protected ResponseEntity&lt;Object&gt; MethodArgumentNotValidException(MethodArgumentNotValidException methodArgumentNotValidException){\n\n        try {\n\n            for (FieldError methodArgument : methodArgumentNotValidException.getBindingResult().getFieldErrors()) {\n                localerrorEntitiesList.add(new ErrorEntity(methodArgument.getField(),methodArgument.toString()));\n            }\n\n            return new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList),HttpStatus.BAD_REQUEST);\n\n        }catch (Exception e){\n            return new ResponseEntity&lt;&gt;(new ErrorResponse(localerrorEntitiesList), HttpStatus.BAD_REQUEST);\n        }\n\n\n    }\n\n\n} \n</code></pre>\n<p>I have successfully caught many errors before, but I get an error when I want to catch MethodArgumentNotValidException.\nError output :</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'handlerExceptionResolver' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\n    at mywebapp.demowebapp.DemoWebAppApplication.main(DemoWebAppApplication.java:17) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.7.5.jar:2.7.5]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerExceptionResolver]: Factory method 'handlerExceptionResolver' threw exception; nested exception is java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 24 common frames omitted\nCaused by: java.lang.IllegalStateException: Ambiguous @ExceptionHandler method mapped for [class org.springframework.web.bind.MethodArgumentNotValidException]: {protected org.springframework.http.ResponseEntity mywebapp.demowebapp.exception.RestExceptionHandler.MethodArgumentNotValidException(org.springframework.web.bind.MethodArgumentNotValidException), public final org.springframework.http.ResponseEntity org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler.handleException(java.lang.Exception,org.springframework.web.context.request.WebRequest) throws java.lang.Exception}\n    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.addExceptionMapping(ExceptionHandlerMethodResolver.java:114) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.method.annotation.ExceptionHandlerMethodResolver.&lt;init&gt;(ExceptionHandlerMethodResolver.java:78) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.initExceptionHandlerAdviceCache(ExceptionHandlerExceptionResolver.java:291) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.afterPropertiesSet(ExceptionHandlerExceptionResolver.java:268) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.addDefaultHandlerExceptionResolvers(WebMvcConfigurationSupport.java:1090) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport.handlerExceptionResolver(WebMvcConfigurationSupport.java:1032) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 25 common frames omitted\n\n\nProcess finished with exit code 0\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-security-oauth2"],"comments":[{"owner":{"account_id":15178453,"reputation":113,"user_id":10952475,"display_name":"Daniel Jos&#233; Mart&#237;nez Parra"},"score":0,"creation_date":1561746948,"post_id":56811656,"comment_id":100177798,"body_markdown":"The current implementation works either for jwt or opaque Tokens. I would like to preserve this feature","body":"The current implementation works either for jwt or opaque Tokens. I would like to preserve this feature"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1561762866,"post_id":56811656,"comment_id":100181856,"body_markdown":"you can read about spring security jwts here https://docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/htmlsingle/#oauth2resourceserver-sansboot","body":"you can read about spring security jwts here <a href=\"https://docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/htmlsingle/#oauth2resourceserver-sansboot\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/5.2.0.M3/reference/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":13547347,"reputation":2140,"user_id":9773274,"display_name":"NatFar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1561869014,"creation_date":1561869014,"answer_id":56822382,"question_id":56811656,"body_markdown":"Unfortunately, the [Spring Boot auto-configuration](https://github.com/spring-projects/spring-security-oauth2-boot/blob/master/spring-security-oauth2-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/resource/ResourceServerTokenServicesConfiguration.java) doesn&#39;t seem to provide a way to replace the `DefaultAccessTokenConverter`, which is the default token converter in `RemoteTokenServices`. To replace the converter, you would have to replace the `RemoteTokenServices` that&#39;s created by default.\r\n\r\nIf your converter is a bean, you could set it on your own `RemoteTokenServices` object, which you can then set on `ResourceServerSecurityConfigurer` (so that it could be applied to the `OAuth2AuthenticationManager` behind the scenes):\r\n\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\r\n    // ...\r\n\r\n    @Autowired\r\n    private ResourceServerProperties resource;\r\n\r\n    @Autowired\r\n    private CustomAccessTokenConverter customConverter;\r\n\r\n    @Override\r\n    public void configure(ResourceServerSecurityConfigurer resources) {\r\n        resources.tokenServices(customTokenServices());\r\n        // ..\r\n    }\r\n\r\n    private RemoteTokenServices customTokenServices() {\r\n        RemoteTokenServices services = new RemoteTokenServices();\r\n        services.setAccessTokenConverter(this.customConverter);\r\n\r\n        // configure based on .properties file \r\n\t\tservices.setCheckTokenEndpointUrl(this.resource.getTokenInfoUri());\r\n\t\tservices.setClientId(this.resource.getClientId());\r\n\t    services.setClientSecret(this.resource.getClientSecret());\r\n\t\t\r\n        return services;\r\n    }\r\n\r\n    // ..\r\n\r\n  \r\n```\r\n","title":"How to extract claims from Spring Security OAuth2 Boot in the Resource Server?","body":"<p>Unfortunately, the <a href=\"https://github.com/spring-projects/spring-security-oauth2-boot/blob/master/spring-security-oauth2-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/security/oauth2/resource/ResourceServerTokenServicesConfiguration.java\" rel=\"nofollow noreferrer\">Spring Boot auto-configuration</a> doesn't seem to provide a way to replace the <code>DefaultAccessTokenConverter</code>, which is the default token converter in <code>RemoteTokenServices</code>. To replace the converter, you would have to replace the <code>RemoteTokenServices</code> that's created by default.</p>\n\n<p>If your converter is a bean, you could set it on your own <code>RemoteTokenServices</code> object, which you can then set on <code>ResourceServerSecurityConfigurer</code> (so that it could be applied to the <code>OAuth2AuthenticationManager</code> behind the scenes):</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\n    // ...\n\n    @Autowired\n    private ResourceServerProperties resource;\n\n    @Autowired\n    private CustomAccessTokenConverter customConverter;\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n        resources.tokenServices(customTokenServices());\n        // ..\n    }\n\n    private RemoteTokenServices customTokenServices() {\n        RemoteTokenServices services = new RemoteTokenServices();\n        services.setAccessTokenConverter(this.customConverter);\n\n        // configure based on .properties file \n        services.setCheckTokenEndpointUrl(this.resource.getTokenInfoUri());\n        services.setClientId(this.resource.getClientId());\n        services.setClientSecret(this.resource.getClientSecret());\n\n        return services;\n    }\n\n    // ..\n\n\n</code></pre>\n"}],"owner":{"account_id":15178453,"reputation":113,"user_id":10952475,"display_name":"Daniel Jos&#233; Mart&#237;nez Parra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3410,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56822382,"answer_count":1,"score":2,"last_activity_date":1669215958,"creation_date":1561746306,"question_id":56811656,"body_markdown":"I have an Authorization Server built in .Net Core Using [Identity Server 4](https://identityserver4.readthedocs.io/en/latest/)! It is working as expected to authorize clients and resources from Node Js and .Net. Now I&#39;m trying to add a Java spring Boot 2 API (jdk 1.8) as a Protected Resource. I have achieved that goal by using the [OAuth2 Boot Documentation](https://docs.spring.io/spring-security-oauth2-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-oauth2-resource-server)! Everything works fine so far. Now, I need to extract the claims from the access token generated by the Authorization Server. This is a Bearer Token of Type JWT. The implementation I have for this is the following:\r\n```\r\n@Configuration\r\n@EnableResourceServer\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\r\n  public String resourceId;\r\n\r\n  @Autowired\r\n  public SecurityConfiguration(@Value(&quot;${security.oauth2.resource.id}&quot;) String resourceId) {\r\n    this.resourceId = resourceId;\r\n  }\r\n\r\n@Override\r\n  public void configure(ResourceServerSecurityConfigurer resources) {\r\n    resources.resourceId(this.resourceId);\r\n}\r\n\r\n  @Override\r\n  public void configure(HttpSecurity httpSecurity) throws Exception {\r\n    httpSecurity\r\n        .csrf()\r\n        .disable()\r\n        .authorizeRequests()\r\n        .antMatchers(&quot;/swagger-ui.html&quot;, &quot;/webjars/**&quot;, &quot;/swagger-resources/**&quot;, &quot;/**/api-docs/**&quot;, &quot;/actuator/**&quot;)\r\n        .permitAll()\r\n        .and()\r\n        .authorizeRequests().anyRequest().fullyAuthenticated();\r\n  }\r\n````\r\n\r\nThe problem is that when I try to access the claims inside a controller, they are not available. I have checked the default extractAuthentication Method from DefaultAccessTokenConverter, inside spring security, and indeed It is ignoring all non-default claims. What cross my mind is creating a new Converter extending the DefaultAccessToken Converter, as following: \r\n\r\n```\r\n@Component\r\npublic class CustomAccessTokenConverter extends DefaultAccessTokenConverter {\r\n\r\n  @Override\r\n  public OAuth2Authentication extractAuthentication(Map&lt;String, ?&gt; claims) {\r\n    OAuth2Authentication authentication = super.extractAuthentication(claims);\r\n    authentication.setDetails(claims);\r\n    return authentication;\r\n  }\r\n}\r\n```\r\nBut I have not figured out where to inject or reference this new converter.","title":"How to extract claims from Spring Security OAuth2 Boot in the Resource Server?","body":"<p>I have an Authorization Server built in .Net Core Using <a href=\"https://identityserver4.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Identity Server 4</a>! It is working as expected to authorize clients and resources from Node Js and .Net. Now I'm trying to add a Java spring Boot 2 API (jdk 1.8) as a Protected Resource. I have achieved that goal by using the <a href=\"https://docs.spring.io/spring-security-oauth2-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security-oauth2-resource-server\" rel=\"nofollow noreferrer\">OAuth2 Boot Documentation</a>! Everything works fine so far. Now, I need to extract the claims from the access token generated by the Authorization Server. This is a Bearer Token of Type JWT. The implementation I have for this is the following:</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends ResourceServerConfigurerAdapter {\n  public String resourceId;\n\n  @Autowired\n  public SecurityConfiguration(@Value(\"${security.oauth2.resource.id}\") String resourceId) {\n    this.resourceId = resourceId;\n  }\n\n@Override\n  public void configure(ResourceServerSecurityConfigurer resources) {\n    resources.resourceId(this.resourceId);\n}\n\n  @Override\n  public void configure(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity\n        .csrf()\n        .disable()\n        .authorizeRequests()\n        .antMatchers(\"/swagger-ui.html\", \"/webjars/**\", \"/swagger-resources/**\", \"/**/api-docs/**\", \"/actuator/**\")\n        .permitAll()\n        .and()\n        .authorizeRequests().anyRequest().fullyAuthenticated();\n  }\n</code></pre>\n\n<p>The problem is that when I try to access the claims inside a controller, they are not available. I have checked the default extractAuthentication Method from DefaultAccessTokenConverter, inside spring security, and indeed It is ignoring all non-default claims. What cross my mind is creating a new Converter extending the DefaultAccessToken Converter, as following: </p>\n\n<pre><code>@Component\npublic class CustomAccessTokenConverter extends DefaultAccessTokenConverter {\n\n  @Override\n  public OAuth2Authentication extractAuthentication(Map&lt;String, ?&gt; claims) {\n    OAuth2Authentication authentication = super.extractAuthentication(claims);\n    authentication.setDetails(claims);\n    return authentication;\n  }\n}\n</code></pre>\n\n<p>But I have not figured out where to inject or reference this new converter.</p>\n"},{"tags":["java","selenium","automation","appium"],"answers":[{"tags":[],"owner":{"account_id":13721490,"reputation":9809,"user_id":9901261,"display_name":"Arundeep Chohan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656568414,"creation_date":1656568047,"answer_id":72810834,"question_id":72810672,"body_markdown":"    driver.get(&#39;url&#39;)\r\n    navigationStart = driver.execute_script(&quot;return window.performance.timing.navigationStart&quot;)\r\n    responseStart = driver.execute_script(&quot;return window.performance.timing.responseStart&quot;)\r\n    domComplete = driver.execute_script(&quot;return window.performance.timing.domComplete&quot;)\r\n     \r\n    backendPerformance_calc = responseStart - navigationStart\r\n    frontendPerformance_calc = domComplete - responseStart\r\n     \r\n    print(&quot;Back End: %s&quot; % backendPerformance_calc)\r\n    print(&quot;Front End: %s&quot; % frontendPerformance_calc)\r\n\r\n\r\nYou can use this for page loads. Not sure of the Java way for this.\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor)driver;\r\n    js.executeAsyncScript(&quot;return window.performance.timing.navigationStart&quot;);\t\r\n","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<pre><code>driver.get('url')\nnavigationStart = driver.execute_script(&quot;return window.performance.timing.navigationStart&quot;)\nresponseStart = driver.execute_script(&quot;return window.performance.timing.responseStart&quot;)\ndomComplete = driver.execute_script(&quot;return window.performance.timing.domComplete&quot;)\n \nbackendPerformance_calc = responseStart - navigationStart\nfrontendPerformance_calc = domComplete - responseStart\n \nprint(&quot;Back End: %s&quot; % backendPerformance_calc)\nprint(&quot;Front End: %s&quot; % frontendPerformance_calc)\n</code></pre>\n<p>You can use this for page loads. Not sure of the Java way for this.</p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor)driver;\njs.executeAsyncScript(&quot;return window.performance.timing.navigationStart&quot;);  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16581218,"reputation":1,"user_id":13612863,"display_name":"Itay Sasson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658759250,"creation_date":1658759250,"answer_id":73110908,"question_id":72810672,"body_markdown":"You can measure the duration.\r\nStart stopwatch when you start loading the application/page.\r\nAnd stop it when the last element is loaded.\r\n","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<p>You can measure the duration.\nStart stopwatch when you start loading the application/page.\nAnd stop it when the last element is loaded.</p>\n"},{"tags":[],"owner":{"account_id":27025508,"reputation":1,"user_id":20582851,"display_name":"Bhanu Pratap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669215836,"creation_date":1669215808,"answer_id":74548913,"question_id":72810672,"body_markdown":"Hi You can find the exact time of loading a homepage by using stopwatch class.\r\nUse below code:\r\n\r\nStopWatch loadTime = new StopWatch();\r\n\r\n\t\tdriver.get(&quot;url&quot;);\r\n\t\tloadTime.start();\r\n\t\t\r\n\t\tboolean appLoaded = new WebDriverWait(driver, 30).until(\r\n\t\t        ExpectedConditions.elementToBeClickable(MobileBy.xpath(&quot;any xpath of expected page&quot;))).isDisplayed();\r\n\t\t\r\n\t\tloadTime.stop();\r\n\t\t\r\n\t\tSystem.out.println(&quot;is App loaded : &quot; +appLoaded);\r\n\t\tlong pageLoadTime_ms = loadTime.getTime();\r\n\t\tSystem.out.println(&quot; Load Time: &quot; + pageLoadTime_ms + &quot; milliseconds&quot;);","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<p>Hi You can find the exact time of loading a homepage by using stopwatch class.\nUse below code:</p>\n<p>StopWatch loadTime = new StopWatch();</p>\n<pre><code>    driver.get(&quot;url&quot;);\n    loadTime.start();\n    \n    boolean appLoaded = new WebDriverWait(driver, 30).until(\n            ExpectedConditions.elementToBeClickable(MobileBy.xpath(&quot;any xpath of expected page&quot;))).isDisplayed();\n    \n    loadTime.stop();\n    \n    System.out.println(&quot;is App loaded : &quot; +appLoaded);\n    long pageLoadTime_ms = loadTime.getTime();\n    System.out.println(&quot; Load Time: &quot; + pageLoadTime_ms + &quot; milliseconds&quot;);\n</code></pre>\n"}],"owner":{"account_id":25672426,"reputation":1,"user_id":19436446,"display_name":"Umesha H N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":575,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1669215836,"creation_date":1656566802,"question_id":72810672,"body_markdown":"&gt;Hi Team, I need to calculate the Mobile app Page loading time when we navigate from one screen to other screen for Mobile Application.\r\n\r\n**I have Tried below Approach:** \r\n\r\nBefore Clicking on Element, get the current Time in MS and after clicking on the element, Waiting for expected element to be visible then again getting current time in MS and Subtract the times.\r\n\r\nPlease Help me out with better approach to calculate accurate page load time.\r\n\r\nThank you.","title":"How can we get exact time to load a Mobile Application page using Appium and Java?","body":"<blockquote>\n<p>Hi Team, I need to calculate the Mobile app Page loading time when we navigate from one screen to other screen for Mobile Application.</p>\n</blockquote>\n<p><strong>I have Tried below Approach:</strong></p>\n<p>Before Clicking on Element, get the current Time in MS and after clicking on the element, Waiting for expected element to be visible then again getting current time in MS and Subtract the times.</p>\n<p>Please Help me out with better approach to calculate accurate page load time.</p>\n<p>Thank you.</p>\n"},{"tags":["java","database","jdbc"],"comments":[{"owner":{"account_id":21949,"reputation":5449,"user_id":53744,"accept_rate":100,"display_name":"Will"},"score":1,"creation_date":1269196369,"post_id":2488206,"comment_id":2481151,"body_markdown":"As always, the answer depends on your needs.  Could you explain the role that the relational database plays in your project?  Also, can you clarify what is meant by &quot;it&#39;s the only one I can really use&quot;?","body":"As always, the answer depends on your needs.  Could you explain the role that the relational database plays in your project?  Also, can you clarify what is meant by &quot;it&#39;s the only one I can really use&quot;?"},{"owner":{"account_id":600500,"reputation":709,"user_id":295044,"accept_rate":100,"display_name":"aadersh patel"},"score":0,"creation_date":1269298587,"post_id":2488206,"comment_id":2490490,"body_markdown":"i am trying to implement access controls using a category based model in a banking environment.  The database will hold data about &quot;customers&quot; and their transactions, accounts etc.  It also will hold details about employees.  this data will then be used to categorise each user of the system, and in turn will decide whether actions performed by the users will be permitted or denied.  \n\n&quot;only one i can really use&quot; meaning its the only thing i have learnt about at university, but in theory only - not in practice. \n\nhope that helps...?!","body":"i am trying to implement access controls using a category based model in a banking environment.  The database will hold data about &quot;customers&quot; and their transactions, accounts etc.  It also will hold details about employees.  this data will then be used to categorise each user of the system, and in turn will decide whether actions performed by the users will be permitted or denied.    &quot;only one i can really use&quot; meaning its the only thing i have learnt about at university, but in theory only - not in practice.   hope that helps...?!"}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1282271855,"creation_date":1269196356,"answer_id":2488214,"question_id":2488206,"body_markdown":"In fact, you can use every database which is accessible through a [JDBC driver][1]. Almost all self-respected RDBMS vendors provides a fullworthy JDBC driver for download at their homepage. Just Google &quot;[vendorname] jdbc driver download&quot; to find it. Here&#39;s an overview:\r\n\r\n- [MySQL JDBC driver][2]\r\n- [PostgreSQL JDBC driver][3] (note: older versions doesn&#39;t support generated keys).\r\n- [Oracle JDBC driver][4] (note: older versions doesn&#39;t support generated keys).\r\n- [MSSQL JDBC driver][5] (or performancewise better, the [jTDS JDBC driver][6])\r\n- DB2 JDBC driver is hard to find in IBM&#39;s online forest, but it&#39;s usually already included in the `/java` folder of the DB2 installation.\r\n\r\nThis way you can use the [JDBC API][7] transparently to access either of the databases. \r\n\r\nAs to which database to choose, just look at the features, robustness, performance, etc the RDBMS provides and the budget you have -if it isn&#39;t freeware. I myself tend to prefer PostgreSQL.\r\n\r\nInstead of a fullfledged database server, you can also consider an *embedded* Javabased database, such as [&lt;strike&gt;Sun&lt;/strike&gt; Oracle JavaDB][8], [Apache Derby][9], [HSQLDB][10] or [SQLite][11], each which are of course accessible through the JDBC API the usual way.\r\n\r\n\r\n  [1]: http://developers.sun.com/product/jdbc/drivers\r\n  [2]: http://dev.mysql.com/downloads/connector/j/\r\n  [3]: http://jdbc.postgresql.org/download.html\r\n  [4]: http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html\r\n  [5]: http://www.microsoft.com/downloads/details.aspx?FamilyID=99B21B65-E98F-4A61-B811-19912601FDC9&amp;displaylang=en\r\n  [6]: http://jtds.sourceforge.net/\r\n  [7]: http://java.sun.com/docs/books/tutorial/jdbc/index.html\r\n  [8]: http://www.oracle.com/technetwork/java/javadb/overview/index.html\r\n  [9]: http://db.apache.org/derby/\r\n  [10]: http://hsqldb.org/\r\n  [11]: http://www.sqlite.org/","title":"what databases can be used with java?","body":"<p>In fact, you can use every database which is accessible through a <a href=\"http://developers.sun.com/product/jdbc/drivers\" rel=\"noreferrer\">JDBC driver</a>. Almost all self-respected RDBMS vendors provides a fullworthy JDBC driver for download at their homepage. Just Google \"[vendorname] jdbc driver download\" to find it. Here's an overview:</p>\n\n<ul>\n<li><a href=\"http://dev.mysql.com/downloads/connector/j/\" rel=\"noreferrer\">MySQL JDBC driver</a></li>\n<li><a href=\"http://jdbc.postgresql.org/download.html\" rel=\"noreferrer\">PostgreSQL JDBC driver</a> (note: older versions doesn't support generated keys).</li>\n<li><a href=\"http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html\" rel=\"noreferrer\">Oracle JDBC driver</a> (note: older versions doesn't support generated keys).</li>\n<li><a href=\"http://www.microsoft.com/downloads/details.aspx?FamilyID=99B21B65-E98F-4A61-B811-19912601FDC9&amp;displaylang=en\" rel=\"noreferrer\">MSSQL JDBC driver</a> (or performancewise better, the <a href=\"http://jtds.sourceforge.net/\" rel=\"noreferrer\">jTDS JDBC driver</a>)</li>\n<li>DB2 JDBC driver is hard to find in IBM's online forest, but it's usually already included in the <code>/java</code> folder of the DB2 installation.</li>\n</ul>\n\n<p>This way you can use the <a href=\"http://java.sun.com/docs/books/tutorial/jdbc/index.html\" rel=\"noreferrer\">JDBC API</a> transparently to access either of the databases. </p>\n\n<p>As to which database to choose, just look at the features, robustness, performance, etc the RDBMS provides and the budget you have -if it isn't freeware. I myself tend to prefer PostgreSQL.</p>\n\n<p>Instead of a fullfledged database server, you can also consider an <em>embedded</em> Javabased database, such as <a href=\"http://www.oracle.com/technetwork/java/javadb/overview/index.html\" rel=\"noreferrer\"><strike>Sun</strike> Oracle JavaDB</a>, <a href=\"http://db.apache.org/derby/\" rel=\"noreferrer\">Apache Derby</a>, <a href=\"http://hsqldb.org/\" rel=\"noreferrer\">HSQLDB</a> or <a href=\"http://www.sqlite.org/\" rel=\"noreferrer\">SQLite</a>, each which are of course accessible through the JDBC API the usual way.</p>\n"},{"tags":[],"owner":{"account_id":104520,"reputation":21516,"user_id":279395,"accept_rate":96,"display_name":"Marcos Placona"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1269196440,"creation_date":1269196440,"answer_id":2488218,"question_id":2488206,"body_markdown":"You could have used pretty much **ANY** database. MSSQL, SQLite, Postgre, Oracle or [put your choice here]\r\n\r\nThere&#39;s a driver for pretty much any database to integrate with Java. [This][1] is a great place to find out all the DB&#39;s java support, as well as how to integrate\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: http://devapp.sun.com/product/jdbc/drivers#skip2content","title":"what databases can be used with java?","body":"<p>You could have used pretty much <strong>ANY</strong> database. MSSQL, SQLite, Postgre, Oracle or [put your choice here]</p>\n\n<p>There's a driver for pretty much any database to integrate with Java. <a href=\"http://devapp.sun.com/product/jdbc/drivers#skip2content\" rel=\"nofollow noreferrer\">This</a> is a great place to find out all the DB's java support, as well as how to integrate</p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1269196446,"creation_date":1269196446,"answer_id":2488219,"question_id":2488206,"body_markdown":"You can use any relational database that has a JDBC driver.  These would include PostgreSQL, Hypersonic SQL, MySQL, SQLLite on the free side and Oracle, MS SQL Server, and others on the paid side.\r\n\r\nThe biggest advantage accrued to MySQL in your case is that it&#39;s free and you know it. That&#39;s enough to make it suitable for what you want to accomplish.\r\n","title":"what databases can be used with java?","body":"<p>You can use any relational database that has a JDBC driver.  These would include PostgreSQL, Hypersonic SQL, MySQL, SQLLite on the free side and Oracle, MS SQL Server, and others on the paid side.</p>\n\n<p>The biggest advantage accrued to MySQL in your case is that it's free and you know it. That's enough to make it suitable for what you want to accomplish.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1269198898,"creation_date":1269198898,"answer_id":2488368,"question_id":2488206,"body_markdown":"Have a look at the [list of vendors who have endorsed the JDBC API][1] maintained by Sun. Also see the list of third-party [JDBC technology-enabled drivers][2] which are currently shipping.\r\n\r\n\r\n  [1]: http://java.sun.com/products/jdbc/reference/industrysupport/index.html\r\n  [2]: http://developers.sun.com/product/jdbc/drivers","title":"what databases can be used with java?","body":"<p>Have a look at the <a href=\"http://java.sun.com/products/jdbc/reference/industrysupport/index.html\" rel=\"nofollow noreferrer\">list of vendors who have endorsed the JDBC API</a> maintained by Sun. Also see the list of third-party <a href=\"http://developers.sun.com/product/jdbc/drivers\" rel=\"nofollow noreferrer\">JDBC technology-enabled drivers</a> which are currently shipping.</p>\n"},{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1269200054,"creation_date":1269200054,"answer_id":2488424,"question_id":2488206,"body_markdown":"You mentioned MySQL and database. For the case you are free to usa a non RDBMS you can check [db4o][1]. \r\n\r\nAdvantage: pure OO/Java persistence. \r\n\r\n\r\n  [1]: http://www.db4o.com/","title":"what databases can be used with java?","body":"<p>You mentioned MySQL and database. For the case you are free to usa a non RDBMS you can check <a href=\"http://www.db4o.com/\" rel=\"nofollow noreferrer\">db4o</a>. </p>\n\n<p>Advantage: pure OO/Java persistence. </p>\n"},{"tags":[],"owner":{"account_id":26348958,"reputation":16,"user_id":20006878,"display_name":"java-enthusiast"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669215300,"creation_date":1669215300,"answer_id":74548780,"question_id":2488206,"body_markdown":"Many have said this already, but pretty much any database will work. Consider including [the top 5][1] (based on rankings, popularity) in your writeup.\r\n\r\n\r\n  [1]: https://ashintech.medium.com/5-best-databases-to-use-with-java-a9d3d601daec","title":"what databases can be used with java?","body":"<p>Many have said this already, but pretty much any database will work. Consider including <a href=\"https://ashintech.medium.com/5-best-databases-to-use-with-java-a9d3d601daec\" rel=\"nofollow noreferrer\">the top 5</a> (based on rankings, popularity) in your writeup.</p>\n"}],"owner":{"account_id":600500,"reputation":709,"user_id":295044,"accept_rate":100,"display_name":"aadersh patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12054,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":2488214,"answer_count":6,"score":10,"last_activity_date":1669215300,"creation_date":1269196224,"question_id":2488206,"body_markdown":"I am doing an undergrad final project, and need to justify my choice of MySQL for the database element of my project.  Truth is, it&#39;s the only one I can really use, and hence I went for it.\r\n\r\nWhat other database systems could I have used? Any advantages and disadvantages of these over MySQL?","title":"what databases can be used with java?","body":"<p>I am doing an undergrad final project, and need to justify my choice of MySQL for the database element of my project.  Truth is, it's the only one I can really use, and hence I went for it.</p>\n\n<p>What other database systems could I have used? Any advantages and disadvantages of these over MySQL?</p>\n"},{"tags":["java","technical-debt"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1669215064,"post_id":74547899,"comment_id":131594416,"body_markdown":"if your files are too large to read into memory, looping over the values as you read each line of a file is possible, but hard to test properly.","body":"if your files are too large to read into memory, looping over the values as you read each line of a file is possible, but hard to test properly."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1669217323,"post_id":74547899,"comment_id":131595358,"body_markdown":"Did you try _any_ implementation yet and measure it&#39;s performance?","body":"Did you try <i>any</i> implementation yet and measure it&#39;s performance?"},{"owner":{"account_id":27024221,"reputation":3,"user_id":20581752,"display_name":"DGF"},"score":0,"creation_date":1669218293,"post_id":74547899,"comment_id":131595734,"body_markdown":"@cyberbrain\nNo, I&#39;m at the beginning of the implementation.","body":"@cyberbrain No, I&#39;m at the beginning of the implementation."}],"answers":[{"tags":[],"owner":{"account_id":20240228,"reputation":496,"user_id":14844306,"display_name":"Ben Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669215107,"creation_date":1669215107,"answer_id":74548733,"question_id":74547899,"body_markdown":"To make an efficient solution, the assumptions and preconditions of the system must be considered.\r\n\r\n## Assuming the file sizes are small\r\n\r\nIf each file is going to be relatively small, then I&#39;d recommend caching the contents of the files.\r\n\r\n### When search patterns are unpredictable\r\n\r\nIf you cannot predict the possible search terms or the contents of the files cannot be split into searchable items, then simply checking the cached file contents with `String#contains` will have to do.\r\n\r\nHowever, if search terms are predictable, or files contain a set number of search terms, then you can attempt to index these terms using the methods discussed below (each have different computation requirements).\r\n\r\n### O(`m`) time complexity approach - where `m` is number of files\r\n\r\nAssuming each search term is going to be a word in the file, it&#39;s a good idea to store the file contents as a `HashSet` (to take advantage of the O(1) time complexity of `HashSet#contains`), with each element being a word or potential search term.\r\n\r\nThat way, you could have a `Map` like so:\r\n```java\r\n//the following code runs once at startup\r\n//map containing file names against their words as a HashSet\r\nMap&lt;String, HashSet&lt;String&gt;&gt; fileContents = new HashMap&lt;&gt;();\r\n\r\n//add files to Map (assuming parseFileContents returns a HashSet&lt;String&gt;)\r\nfileContents.put(&quot;file1&quot;, parseFileContents(&quot;file1&quot;));\r\nfileContents.put(&quot;file2&quot;, parseFileContents(&quot;file2&quot;));\r\nfileContents.put(&quot;file3&quot;, parseFileContents(&quot;file3&quot;));\r\n\r\n//the following code runs every time a request is made\r\n//get files containing the word &quot;dog&quot; (time complexity is O(m) where m is the number of files)\r\nfileContents.entrySet()\r\n    .stream()\r\n    .filter(e -&gt; e.getValue().contains(&quot;dog&quot;))\r\n    .map(Map.Entry::getKey)\r\n    .collect(LinkedList::new);\r\n```\r\n\r\n### O(1) time complexity approach\r\n\r\nIf the search patterns were predictable and there weren&#39;t many, then you could create a `Map` where search terms are keys and a `List` of files are the values:\r\n```java\r\n//the following code runs once at startup\r\n//map containing possible search patterns against files that they appear in\r\nMap&lt;String, List&lt;String&gt;&gt; patternsAgainstFiles = new HashMap&lt;&gt;();\r\n\r\n//then loop through all files and each term found in the file as a key to the map,\r\n//with the file being added to the list in the value\r\n\r\n//the following code runs every time a request is made\r\n//get files containing the word &quot;dog&quot; (time complexity is O(1) after initial computation at startup)\r\npatternsAgainstFiles.getOrDefault(&quot;dog&quot;, new LinkedList&lt;&gt;());\r\n```\r\n\r\n## Other option\r\n\r\nUse this option when:\r\n- Files are too large to store in memory\r\n- Files could change during program execution\r\n\r\nIn this case, you have no choice but to actually search the file in secondary storage every time you wish to search for the given pattern in the file.\r\n\r\nThe best method I can think for doing this at the time of writing, is opening a `FileInputStream` (or something similar) for each file, then reading one byte at a time and appending it to a &#39;current buffer&#39; which is never longer than the length of the search term in bytes. Whenever the &#39;current buffer&#39; has the same length (in bytes) as the search term, it is evaluated against the search term, and if they match then the search term is in the file, but if they don&#39;t match pop the first byte in the &#39;current buffer&#39; and continue.\r\n\r\n\r\nThe above is all my suggestions and there may be more efficient ways to achieve the task at hand. These are just the best approaches I could think of as of writing. ","title":"Java Programmingtechnic to check files performant?","body":"<p>To make an efficient solution, the assumptions and preconditions of the system must be considered.</p>\n<h2>Assuming the file sizes are small</h2>\n<p>If each file is going to be relatively small, then I'd recommend caching the contents of the files.</p>\n<h3>When search patterns are unpredictable</h3>\n<p>If you cannot predict the possible search terms or the contents of the files cannot be split into searchable items, then simply checking the cached file contents with <code>String#contains</code> will have to do.</p>\n<p>However, if search terms are predictable, or files contain a set number of search terms, then you can attempt to index these terms using the methods discussed below (each have different computation requirements).</p>\n<h3>O(<code>m</code>) time complexity approach - where <code>m</code> is number of files</h3>\n<p>Assuming each search term is going to be a word in the file, it's a good idea to store the file contents as a <code>HashSet</code> (to take advantage of the O(1) time complexity of <code>HashSet#contains</code>), with each element being a word or potential search term.</p>\n<p>That way, you could have a <code>Map</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//the following code runs once at startup\n//map containing file names against their words as a HashSet\nMap&lt;String, HashSet&lt;String&gt;&gt; fileContents = new HashMap&lt;&gt;();\n\n//add files to Map (assuming parseFileContents returns a HashSet&lt;String&gt;)\nfileContents.put(&quot;file1&quot;, parseFileContents(&quot;file1&quot;));\nfileContents.put(&quot;file2&quot;, parseFileContents(&quot;file2&quot;));\nfileContents.put(&quot;file3&quot;, parseFileContents(&quot;file3&quot;));\n\n//the following code runs every time a request is made\n//get files containing the word &quot;dog&quot; (time complexity is O(m) where m is the number of files)\nfileContents.entrySet()\n    .stream()\n    .filter(e -&gt; e.getValue().contains(&quot;dog&quot;))\n    .map(Map.Entry::getKey)\n    .collect(LinkedList::new);\n</code></pre>\n<h3>O(1) time complexity approach</h3>\n<p>If the search patterns were predictable and there weren't many, then you could create a <code>Map</code> where search terms are keys and a <code>List</code> of files are the values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//the following code runs once at startup\n//map containing possible search patterns against files that they appear in\nMap&lt;String, List&lt;String&gt;&gt; patternsAgainstFiles = new HashMap&lt;&gt;();\n\n//then loop through all files and each term found in the file as a key to the map,\n//with the file being added to the list in the value\n\n//the following code runs every time a request is made\n//get files containing the word &quot;dog&quot; (time complexity is O(1) after initial computation at startup)\npatternsAgainstFiles.getOrDefault(&quot;dog&quot;, new LinkedList&lt;&gt;());\n</code></pre>\n<h2>Other option</h2>\n<p>Use this option when:</p>\n<ul>\n<li>Files are too large to store in memory</li>\n<li>Files could change during program execution</li>\n</ul>\n<p>In this case, you have no choice but to actually search the file in secondary storage every time you wish to search for the given pattern in the file.</p>\n<p>The best method I can think for doing this at the time of writing, is opening a <code>FileInputStream</code> (or something similar) for each file, then reading one byte at a time and appending it to a 'current buffer' which is never longer than the length of the search term in bytes. Whenever the 'current buffer' has the same length (in bytes) as the search term, it is evaluated against the search term, and if they match then the search term is in the file, but if they don't match pop the first byte in the 'current buffer' and continue.</p>\n<p>The above is all my suggestions and there may be more efficient ways to achieve the task at hand. These are just the best approaches I could think of as of writing.</p>\n"}],"owner":{"account_id":27024221,"reputation":3,"user_id":20581752,"display_name":"DGF"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74548733,"answer_count":1,"score":0,"last_activity_date":1669215107,"creation_date":1669211458,"question_id":74547899,"body_markdown":"I&#39;m searching for a pattern or programming technic in Java for my service.\r\n\r\nThe Input of the service is an Array of Strings. These Strings represent a file and some information.\r\n\r\nThe output of the service is a Map of the exact String and a Boolean. The Boolean represents that the information exists in the file.\r\n\r\ne.g. Input \r\n```\r\n[&quot;file1/dog&quot;,&quot;file2/cat&quot;,&quot;file1/rabbit&quot;]\r\n\r\n```\r\n\r\nOutput \r\n```\r\n{&quot;file1/dog&quot;:&quot;false&quot;,&quot;file2/cat&quot;:&quot;true&quot;,&quot;file1/rabbit&quot;:&quot;true&quot;}\r\n```\r\n\r\nI want to open files only once and search for all information in this file. e.g. Open file one and search for Dog and rabbit.\r\n\r\nHow to do this fast in Java? \r\n\r\nShould I use a Map with the file as a key to gathering the information?\r\ne.g. \r\n```\r\n{&quot;file1&quot;: [&quot;dog&quot;,&quot;rabbit&quot;], &quot;file2&quot;: [&quot;cat&quot;]}\r\n\r\n```\r\nThe next step is to loop over the keys to check every file.","title":"Java Programmingtechnic to check files performant?","body":"<p>I'm searching for a pattern or programming technic in Java for my service.</p>\n<p>The Input of the service is an Array of Strings. These Strings represent a file and some information.</p>\n<p>The output of the service is a Map of the exact String and a Boolean. The Boolean represents that the information exists in the file.</p>\n<p>e.g. Input</p>\n<pre><code>[&quot;file1/dog&quot;,&quot;file2/cat&quot;,&quot;file1/rabbit&quot;]\n\n</code></pre>\n<p>Output</p>\n<pre><code>{&quot;file1/dog&quot;:&quot;false&quot;,&quot;file2/cat&quot;:&quot;true&quot;,&quot;file1/rabbit&quot;:&quot;true&quot;}\n</code></pre>\n<p>I want to open files only once and search for all information in this file. e.g. Open file one and search for Dog and rabbit.</p>\n<p>How to do this fast in Java?</p>\n<p>Should I use a Map with the file as a key to gathering the information?\ne.g.</p>\n<pre><code>{&quot;file1&quot;: [&quot;dog&quot;,&quot;rabbit&quot;], &quot;file2&quot;: [&quot;cat&quot;]}\n\n</code></pre>\n<p>The next step is to loop over the keys to check every file.</p>\n"},{"tags":["java","soapui","maven-plugin"],"owner":{"account_id":216108,"reputation":1219,"user_id":471137,"accept_rate":10,"display_name":"troger19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669215022,"creation_date":1555256423,"question_id":55677082,"body_markdown":"Is there a version of this plugin **soapui-maven-plugin** working with Java 11? I am getting this error with the newest version 5.5.0 as well as with older:\r\n\r\n    Caused by: java.nio.file.InvalidPathException: Illegal char &lt;*&gt; at index 95: C:\\Users\\username\\.m2\\repository\\com\\smartbear\\utils\\analytics\\out-app-analytics-provider\\lib\\*.jar\r\n\r\nI tried some exlusions which works on older Java versions, but errors still persist. \r\n\r\n    &lt;exclusion&gt;\r\n      &lt;groupId&gt;com.smartbear.utils.analytics&lt;/groupId&gt;\r\n       &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n    &lt;/exclusion&gt;\r\n\r\nIf not, can somebody suggest similiar plugin, where you can write SoapUI tests suite and execute them during build. Of course compatible with Java 11. Thanks","title":"SoapUI maven plugin with Java 11","body":"<p>Is there a version of this plugin <strong>soapui-maven-plugin</strong> working with Java 11? I am getting this error with the newest version 5.5.0 as well as with older:</p>\n\n<pre><code>Caused by: java.nio.file.InvalidPathException: Illegal char &lt;*&gt; at index 95: C:\\Users\\username\\.m2\\repository\\com\\smartbear\\utils\\analytics\\out-app-analytics-provider\\lib\\*.jar\n</code></pre>\n\n<p>I tried some exlusions which works on older Java versions, but errors still persist. </p>\n\n<pre><code>&lt;exclusion&gt;\n  &lt;groupId&gt;com.smartbear.utils.analytics&lt;/groupId&gt;\n   &lt;artifactId&gt;*&lt;/artifactId&gt;\n&lt;/exclusion&gt;\n</code></pre>\n\n<p>If not, can somebody suggest similiar plugin, where you can write SoapUI tests suite and execute them during build. Of course compatible with Java 11. Thanks</p>\n"},{"tags":["c#","java","python","c++","algorithm"],"comments":[{"owner":{"account_id":154071,"reputation":13182,"user_id":369759,"accept_rate":63,"display_name":"ses"},"score":0,"creation_date":1359575281,"post_id":5730330,"comment_id":20404658,"body_markdown":"if a={-5,-3,0,1,-3} = 4\nthen a={-5,-5,-6,-6,-6} = 0 or 1?\n\nif 0 then &#39; a={-5,-3,0,1,-3}&#39; should return 3","body":"if a={-5,-3,0,1,-3} = 4 then a={-5,-5,-6,-6,-6} = 0 or 1?  if 0 then &#39; a={-5,-3,0,1,-3}&#39; should return 3"},{"owner":{"account_id":451418,"reputation":483,"user_id":847309,"accept_rate":88,"display_name":"Alex"},"score":1,"creation_date":1359666608,"post_id":5730330,"comment_id":20444278,"body_markdown":"why {-5,-5,-6,-6,-6} = 0 or even 1. It is 2 -&gt; |-5| = 5 and |-6| = 6","body":"why {-5,-5,-6,-6,-6} = 0 or even 1. It is 2 -&gt; |-5| = 5 and |-6| = 6"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1669214845,"creation_date":1303303299,"answer_id":5730464,"question_id":5730330,"body_markdown":"If the array is sorted you can find duplicates by looking a neighbours.  To compare absolute values to need to start at both the start and the end.  This avoid creating a new structure.\r\n\r\nEDIT: IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function.  I would have thought not creating object which be much much faster but appears to be only 4x fast on my machine.\r\n\r\nIn summary, you can see that using a Set is simpler, clearer and easier to maintain.  It is still very fast and would be the best solution in 98% of cases.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        for (int len : new int[]{100 * 1000 * 1000, 10 * 1000 * 1000, 1000 * 1000, 100 * 1000, 10 * 1000, 1000}) {\r\n            int[] nums = new int[len];\r\n            for (int i = 0; i &lt; len; i++)\r\n                nums[i] = (int) (Math.random() * (Math.random() * 2001 - 1000));\r\n            Arrays.sort(nums);\r\n\r\n            long timeArray = 0;\r\n            long timeSet = 0;\r\n            int runs = len &gt; 1000 * 1000 ? 10 : len &gt;= 100 * 1000 ? 100 : 1000;\r\n            for (int i = 0; i &lt; runs; i++) {\r\n                long time1 = System.nanoTime();\r\n                int count = countDistinct(nums);\r\n                long time2 = System.nanoTime();\r\n                int count2 = countDistinctUsingSet(nums);\r\n                long time3 = System.nanoTime();\r\n                timeArray += time2 - time1;\r\n                timeSet += time3 - time2;\r\n                assert count == count2;\r\n            }\r\n            System.out.printf(&quot;For %,d numbers, using an array took %,d us on average, using a Set took %,d us on average, ratio=%.1f%n&quot;,\r\n                    len, timeArray / 1000 / runs, timeSet / 1000 / runs, 1.0 * timeSet / timeArray);\r\n        }\r\n    }\r\n\r\n    private static int countDistinct(int[] nums) {\r\n        int lastLeft = Math.abs(nums[0]);\r\n        int lastRight = Math.abs(nums[nums.length - 1]);\r\n        int count = 0;\r\n        for (int a = 1, b = nums.length - 2; a &lt;= b;) {\r\n            int left = Math.abs(nums[a]);\r\n            int right = Math.abs(nums[b]);\r\n            if (left == lastLeft) {\r\n                a++;\r\n                lastLeft = left;\r\n            } else if (right == lastRight) {\r\n                b--;\r\n                lastRight = right;\r\n            } else if (lastLeft == lastRight) {\r\n                a++;\r\n                b--;\r\n                lastLeft = left;\r\n                lastRight = right;\r\n                count++;\r\n            } else if (lastLeft &gt; lastRight) {\r\n                count++;\r\n                a++;\r\n                lastLeft = left;\r\n            } else {\r\n                count++;\r\n                b--;\r\n                lastRight = right;\r\n            }\r\n        }\r\n        count += (lastLeft == lastRight ? 1 : 2);\r\n        return count;\r\n    }\r\n\r\n    private static int countDistinctUsingSet(int[] nums) {\r\n        Set&lt;Integer&gt; s = new HashSet&lt;Integer&gt;();\r\n        for (int n : nums)\r\n            s.add(Math.abs(n));\r\n        int count = s.size();\r\n        return count;\r\n    }\r\n\r\nprints\r\n\r\nFor 100,000,000 numbers, using an array took 279,623 us on average, using a Set took 1,270,029 us on average, ratio=4.5\r\n\r\nFor 10,000,000 numbers, using an array took 28,525 us on average, using a Set took 126,591 us on average, ratio=4.4\r\n\r\nFor 1,000,000 numbers, using an array took 2,846 us on average, using a Set took 12,131 us on average, ratio=4.3\r\n\r\nFor 100,000 numbers, using an array took 297 us on average, using a Set took 1,239 us on average, ratio=4.2\r\n\r\nFor 10,000 numbers, using an array took 42 us on average, using a Set took 156 us on average, ratio=3.7\r\n\r\nFor 1,000 numbers, using an array took 8 us on average, using a Set took 30 us on average, ratio=3.6\r\n\r\n---\r\n\r\nOn @Kevin K&#39;s point, even Integer can have collision even through it&#39;s hash values are unique, it can map to the same bucket as the capacity is limited.\r\n\r\n    public static int hash(int h) {\r\n        // This function ensures that hashCodes that differ only by\r\n        // constant multiples at each bit position have a bounded\r\n        // number of collisions (approximately 8 at default load factor).\r\n        h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\r\n        return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(32, 2.0f);\r\n        for (int i = 0; i &lt; 10000 &amp;&amp; map.size() &lt; 32 * 2; i++) {\r\n            if (hash(i) % 32 == 0)\r\n                map.put(i, i);\r\n        }\r\n        System.out.println(map.keySet());\r\n    }\r\n\r\nprints\r\n\r\n[2032, 2002, 1972, 1942, 1913, 1883, 1853, 1823, 1763, 1729, 1703, 1669, 1642, 1608, 1582, 1548, 1524, 1494, 1456, 1426, 1405, 1375, 1337, 1307, 1255, 1221, 1187, 1153, 1134, 1100, 1066, 1032, 1016, 986, 956, 926, 881, 851, 821, 791, 747, 713, 687, 653, 610, 576, 550, 516, 508, 478, 440, 410, 373, 343, 305, 275, 239, 205, 171, 137, 102, 68, 34, 0]\r\n\r\n\r\n\r\nThe values are in reverse order because the HashMap has generated into a LinkedList.","title":"codility absolute distinct count from an array","body":"<p>If the array is sorted you can find duplicates by looking a neighbours.  To compare absolute values to need to start at both the start and the end.  This avoid creating a new structure.</p>\n<p>EDIT: IMHO HashMap/HashSet is O(log(log(n)) due to collisions, it is only O(1) if there is a perfect hash function.  I would have thought not creating object which be much much faster but appears to be only 4x fast on my machine.</p>\n<p>In summary, you can see that using a Set is simpler, clearer and easier to maintain.  It is still very fast and would be the best solution in 98% of cases.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    for (int len : new int[]{100 * 1000 * 1000, 10 * 1000 * 1000, 1000 * 1000, 100 * 1000, 10 * 1000, 1000}) {\n        int[] nums = new int[len];\n        for (int i = 0; i &lt; len; i++)\n            nums[i] = (int) (Math.random() * (Math.random() * 2001 - 1000));\n        Arrays.sort(nums);\n\n        long timeArray = 0;\n        long timeSet = 0;\n        int runs = len &gt; 1000 * 1000 ? 10 : len &gt;= 100 * 1000 ? 100 : 1000;\n        for (int i = 0; i &lt; runs; i++) {\n            long time1 = System.nanoTime();\n            int count = countDistinct(nums);\n            long time2 = System.nanoTime();\n            int count2 = countDistinctUsingSet(nums);\n            long time3 = System.nanoTime();\n            timeArray += time2 - time1;\n            timeSet += time3 - time2;\n            assert count == count2;\n        }\n        System.out.printf(&quot;For %,d numbers, using an array took %,d us on average, using a Set took %,d us on average, ratio=%.1f%n&quot;,\n                len, timeArray / 1000 / runs, timeSet / 1000 / runs, 1.0 * timeSet / timeArray);\n    }\n}\n\nprivate static int countDistinct(int[] nums) {\n    int lastLeft = Math.abs(nums[0]);\n    int lastRight = Math.abs(nums[nums.length - 1]);\n    int count = 0;\n    for (int a = 1, b = nums.length - 2; a &lt;= b;) {\n        int left = Math.abs(nums[a]);\n        int right = Math.abs(nums[b]);\n        if (left == lastLeft) {\n            a++;\n            lastLeft = left;\n        } else if (right == lastRight) {\n            b--;\n            lastRight = right;\n        } else if (lastLeft == lastRight) {\n            a++;\n            b--;\n            lastLeft = left;\n            lastRight = right;\n            count++;\n        } else if (lastLeft &gt; lastRight) {\n            count++;\n            a++;\n            lastLeft = left;\n        } else {\n            count++;\n            b--;\n            lastRight = right;\n        }\n    }\n    count += (lastLeft == lastRight ? 1 : 2);\n    return count;\n}\n\nprivate static int countDistinctUsingSet(int[] nums) {\n    Set&lt;Integer&gt; s = new HashSet&lt;Integer&gt;();\n    for (int n : nums)\n        s.add(Math.abs(n));\n    int count = s.size();\n    return count;\n}\n</code></pre>\n<p>prints</p>\n<p>For 100,000,000 numbers, using an array took 279,623 us on average, using a Set took 1,270,029 us on average, ratio=4.5</p>\n<p>For 10,000,000 numbers, using an array took 28,525 us on average, using a Set took 126,591 us on average, ratio=4.4</p>\n<p>For 1,000,000 numbers, using an array took 2,846 us on average, using a Set took 12,131 us on average, ratio=4.3</p>\n<p>For 100,000 numbers, using an array took 297 us on average, using a Set took 1,239 us on average, ratio=4.2</p>\n<p>For 10,000 numbers, using an array took 42 us on average, using a Set took 156 us on average, ratio=3.7</p>\n<p>For 1,000 numbers, using an array took 8 us on average, using a Set took 30 us on average, ratio=3.6</p>\n<hr />\n<p>On @Kevin K's point, even Integer can have collision even through it's hash values are unique, it can map to the same bucket as the capacity is limited.</p>\n<pre><code>public static int hash(int h) {\n    // This function ensures that hashCodes that differ only by\n    // constant multiples at each bit position have a bounded\n    // number of collisions (approximately 8 at default load factor).\n    h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);\n    return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);\n}\n\npublic static void main(String[] args) throws Exception {\n    Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;(32, 2.0f);\n    for (int i = 0; i &lt; 10000 &amp;&amp; map.size() &lt; 32 * 2; i++) {\n        if (hash(i) % 32 == 0)\n            map.put(i, i);\n    }\n    System.out.println(map.keySet());\n}\n</code></pre>\n<p>prints</p>\n<p>[2032, 2002, 1972, 1942, 1913, 1883, 1853, 1823, 1763, 1729, 1703, 1669, 1642, 1608, 1582, 1548, 1524, 1494, 1456, 1426, 1405, 1375, 1337, 1307, 1255, 1221, 1187, 1153, 1134, 1100, 1066, 1032, 1016, 986, 956, 926, 881, 851, 821, 791, 747, 713, 687, 653, 610, 576, 550, 516, 508, 478, 440, 410, 373, 343, 305, 275, 239, 205, 171, 137, 102, 68, 34, 0]</p>\n<p>The values are in reverse order because the HashMap has generated into a LinkedList.</p>\n"},{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1303303314,"creation_date":1303303314,"answer_id":5730468,"question_id":5730330,"body_markdown":"You should have pay attention to the fact that **the array is sorted in ascending order**.\r\n\r\nLets assume that there are only positive numbers, or the question was not about **absolute** distinct.\r\n\r\nThe you could count the Number by iterating trough the list, and increment the counter by one, if the actual element is different from the last.  (and +1 for the first element)\r\n\r\nIf you understand that, you can add the **absolute** distinct constraint. For example by improving the algorithm by two pointers, one starting from the begin, one from the end. Then you have also to take care that both pointers works like in parallel, so that both pointers will end at 0 or the absoulte lowest number (positive/negative) - This will complicate the whole stuff a bit, but it is possible.","title":"codility absolute distinct count from an array","body":"<p>You should have pay attention to the fact that <strong>the array is sorted in ascending order</strong>.</p>\n\n<p>Lets assume that there are only positive numbers, or the question was not about <strong>absolute</strong> distinct.</p>\n\n<p>The you could count the Number by iterating trough the list, and increment the counter by one, if the actual element is different from the last.  (and +1 for the first element)</p>\n\n<p>If you understand that, you can add the <strong>absolute</strong> distinct constraint. For example by improving the algorithm by two pointers, one starting from the begin, one from the end. Then you have also to take care that both pointers works like in parallel, so that both pointers will end at 0 or the absoulte lowest number (positive/negative) - This will complicate the whole stuff a bit, but it is possible.</p>\n"},{"tags":[],"owner":{"account_id":328117,"reputation":14517,"user_id":650891,"display_name":"Stephen Chung"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1303304002,"creation_date":1303303544,"answer_id":5730533,"question_id":5730330,"body_markdown":"Well, to be absolutely honest, you need to do better than this.\r\n\r\nJudging from the question, I assume the list do not contain duplicates.  Again, obviously the trick is the pre-sorted list.  Which means that while +5 may be at the right end of the line, -5 will be at the left end of the line, since negative numbers sort in reverse to their absolute magnitude.\r\n\r\nStart from both ends, work inwards.  If the two numbers are -1 of each other, then it is not distinct.  Otherwise, they are distinct, and move the end that is absolutely larger.\r\n\r\nGo until you reach zero, or you bump into the next list -- in that case, take everything remaining in the next list as distinct as well.\r\n\r\nThis algorithm needs no hashes, no dictionaries, no data structures, and runs in O(n) time, going through the whole list exactly once.\r\n","title":"codility absolute distinct count from an array","body":"<p>Well, to be absolutely honest, you need to do better than this.</p>\n\n<p>Judging from the question, I assume the list do not contain duplicates.  Again, obviously the trick is the pre-sorted list.  Which means that while +5 may be at the right end of the line, -5 will be at the left end of the line, since negative numbers sort in reverse to their absolute magnitude.</p>\n\n<p>Start from both ends, work inwards.  If the two numbers are -1 of each other, then it is not distinct.  Otherwise, they are distinct, and move the end that is absolutely larger.</p>\n\n<p>Go until you reach zero, or you bump into the next list -- in that case, take everything remaining in the next list as distinct as well.</p>\n\n<p>This algorithm needs no hashes, no dictionaries, no data structures, and runs in O(n) time, going through the whole list exactly once.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303313436,"creation_date":1303305544,"answer_id":5730972,"question_id":5730330,"body_markdown":"Your solution is at least one of the easiest way to do it (more readable, easier to maintain). It surely is not the most efficient one (neither the worst) and should be acceptable if not used in a time critical code.   \r\n\r\nBut you should have mentioned that and suggested that there is a more efficient solution like traversing the list from both ends (as already answered). Maybe you would have got an extra point for discussing the advantages of both solution.  \r\n\r\nTested your solution (on old (slow) laptop):  \r\n\r\n- less than 2 milliseconds for 10000 numbers  \r\n- ~450 ms for 1000000","title":"codility absolute distinct count from an array","body":"<p>Your solution is at least one of the easiest way to do it (more readable, easier to maintain). It surely is not the most efficient one (neither the worst) and should be acceptable if not used in a time critical code.   </p>\n\n<p>But you should have mentioned that and suggested that there is a more efficient solution like traversing the list from both ends (as already answered). Maybe you would have got an extra point for discussing the advantages of both solution.  </p>\n\n<p>Tested your solution (on old (slow) laptop):  </p>\n\n<ul>\n<li>less than 2 milliseconds for 10000 numbers  </li>\n<li>~450 ms for 1000000</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":195706,"reputation":7004,"user_id":438758,"accept_rate":89,"display_name":"BiGYaN"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1303365425,"creation_date":1303365425,"answer_id":5740135,"question_id":5730330,"body_markdown":"The solution is to use the fact that the array is sorted. What you can do is to have two pointers pointing at beginning and end of the array respectively. Then based on the abs value, decrease/increase the end-pointer/beginning pointer. At the same time you&#39;ll have to keep track of repeated elements in sequence like {3,3,3,4} (the 3 should be counted once).\r\n\r\nIn all it wouldn&#39;t be too complex, I think with 20-25 loc in C.","title":"codility absolute distinct count from an array","body":"<p>The solution is to use the fact that the array is sorted. What you can do is to have two pointers pointing at beginning and end of the array respectively. Then based on the abs value, decrease/increase the end-pointer/beginning pointer. At the same time you'll have to keep track of repeated elements in sequence like {3,3,3,4} (the 3 should be counted once).</p>\n\n<p>In all it wouldn't be too complex, I think with 20-25 loc in C.</p>\n"},{"tags":[],"owner":{"account_id":105356,"reputation":2071,"user_id":281191,"accept_rate":0,"display_name":"goroncy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327663788,"creation_date":1319637627,"answer_id":7903734,"question_id":5730330,"body_markdown":"Please find below implementation which is even much faster than Peter&#39;s.\r\n\r\n    if (A == null || A.length == 0) {\r\n      return 0;\r\n    } else if (A.length == 1 || A[0] == A[A.length - 1]) {\r\n      return 1;\r\n    }\r\n\r\n    int absDistinct = 0;\r\n    int leftCurrent;\r\n    int leftNext;\r\n    int rightCurrent;\r\n    int rightPrevious;\r\n\r\n    for (int i = 0, j = A.length; i &lt; j; ) {\r\n\r\n      leftCurrent = A[i];\r\n      rightCurrent = A[j];\r\n      leftNext = A[i + 1];\r\n      rightPrevious = A[j - 1];\r\n\r\n      if (leftCurrent + rightCurrent == 0) {\r\n        while (A[i] - A[i + 1] == 0) {\r\n          i++;\r\n        }\r\n        while (A[j] - A[j - 1] == 0) {\r\n          j--;\r\n        }\r\n        i++;\r\n        j--;\r\n        absDistinct++;\r\n      } else {\r\n        if (leftCurrent + rightCurrent &lt; 0) {\r\n          if (leftCurrent - leftNext != 0) {\r\n            absDistinct++;\r\n          }\r\n          i++;\r\n        } else {\r\n          if (rightCurrent - rightPrevious != 0) {\r\n            absDistinct++;\r\n          }\r\n          j--;\r\n        }\r\n      }\r\n    }\r\n\r\n    return absDistinct;\r\n\r\nThe distribution of numbers is important. But if there will be lot of series of the same numbers this algo will perform better. This shows that the algorythms complexity is not the only barier to overcome. When you have the algo with the propper complexity this might be just one of the options. Linear correction of the algo is still possible. The character of input is sometimes also important.","title":"codility absolute distinct count from an array","body":"<p>Please find below implementation which is even much faster than Peter's.</p>\n\n<pre><code>if (A == null || A.length == 0) {\n  return 0;\n} else if (A.length == 1 || A[0] == A[A.length - 1]) {\n  return 1;\n}\n\nint absDistinct = 0;\nint leftCurrent;\nint leftNext;\nint rightCurrent;\nint rightPrevious;\n\nfor (int i = 0, j = A.length; i &lt; j; ) {\n\n  leftCurrent = A[i];\n  rightCurrent = A[j];\n  leftNext = A[i + 1];\n  rightPrevious = A[j - 1];\n\n  if (leftCurrent + rightCurrent == 0) {\n    while (A[i] - A[i + 1] == 0) {\n      i++;\n    }\n    while (A[j] - A[j - 1] == 0) {\n      j--;\n    }\n    i++;\n    j--;\n    absDistinct++;\n  } else {\n    if (leftCurrent + rightCurrent &lt; 0) {\n      if (leftCurrent - leftNext != 0) {\n        absDistinct++;\n      }\n      i++;\n    } else {\n      if (rightCurrent - rightPrevious != 0) {\n        absDistinct++;\n      }\n      j--;\n    }\n  }\n}\n\nreturn absDistinct;\n</code></pre>\n\n<p>The distribution of numbers is important. But if there will be lot of series of the same numbers this algo will perform better. This shows that the algorythms complexity is not the only barier to overcome. When you have the algo with the propper complexity this might be just one of the options. Linear correction of the algo is still possible. The character of input is sometimes also important.</p>\n"},{"tags":[],"owner":{"account_id":426075,"reputation":1013,"user_id":807077,"display_name":"Michelin Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352315006,"creation_date":1320410184,"answer_id":8009261,"question_id":5730330,"body_markdown":"Here is a recursive algorithm that will return the absolute unique entries in a list in a single pass, that is in O(n) time. It relies on the fact that the array is sorted and it is not using a java.util.Set.\r\n\r\nConsider this example array {-5,-5,-3,0,1,3}\r\n\r\n- Because the array is sorted, one of the two elements at either end of the array will have the absolute highest value: -5\r\n- Again because the array is sorted, if that element is going to have a match, it will be its neighbour, or neighbours for multiple matches.\r\n- So for -5 we do a single check with its neighbour: they are equal. -5 is a duplicate, so remove it, don&#39;t increase our running total and recurse.\r\n\r\n{-5,-3,0,1,3}\r\nNow we pick -5, its unique therefore increase running total to 1 and then remove it.\r\n\r\n{-3,0,1,3}\r\nIf they two ends have equal absolute values, just remove one, it doesnt matter which, just so long as its just one. Say the first. We don&#39;t increment our running total because the value we removed was a duplicate.\r\n\r\n{0,1,3}\r\nNow we pick 3, its unique, running total goes to 2.\r\n\r\n{0,1}\r\nPick 1, its unique, running total 3.\r\n\r\n{0}\r\nSize is 1, the value is unique, increment running total and return it. 4 Correct!\r\n\r\n\r\n    package com.codility.tests;\r\n\r\n    import java.util.ArrayList; \r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n\r\n    public class AbsDistinct {\r\n\r\n    /**\r\n     * Count the number of absolute distinct elements in an array.\r\n     * The array is sorted in ascending order.\r\n     */\r\n    private static int countAbsDistinct(List&lt;Integer&gt; list, int count) {\r\n        int lastIndex = list.size() - 1;\r\n        if (lastIndex == -1) { // zero size list, terminate\r\n            return 0;\r\n        }\r\n        if (lastIndex == 0) { // one element list, terminate\r\n            return ++count;\r\n        }\r\n        if (Math.abs(list.get(0)) == Math.abs(list.get(lastIndex))) {\r\n            // doesn&#39;t matter which end is removed, but to remove _only_ 1\r\n            list.remove(0);\r\n        } else if (Math.abs(list.get(0)) &gt; Math.abs(list.get(lastIndex))) {\r\n            // if different to its nighbour, its unique hence count it\r\n            if (list.get(0) != list.get(1)) {\r\n                count++;\r\n            }\r\n            // now that its been accounted for, remove it\r\n            list.remove(0);\r\n        } else {\r\n            // same logic but for the other end of the list\r\n            if (list.get(lastIndex) != list.get(lastIndex - 1)) {\r\n                count++;\r\n            }\r\n            list.remove(lastIndex);\r\n        }\r\n        return countAbsDistinct(list, count);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        if (args.length == 0) { // just run the tests\r\n            List&lt;Integer&gt; testList = new ArrayList&lt;Integer&gt;(Arrays.asList(-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8));\r\n            List&lt;Integer&gt; empty = new ArrayList&lt;Integer&gt;();\r\n            List&lt;Integer&gt; singleElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1));\r\n            List&lt;Integer&gt; sameElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 1, 1, 1, 1, 1));\r\n            System.out.println(&quot;test array: &quot; + countAbsDistinct(testList, 0));\r\n            System.out.println(&quot;empty array: &quot; + countAbsDistinct(empty, 0));\r\n            System.out.println(&quot;single element array: &quot; + countAbsDistinct(singleElement, 0));\r\n            System.out.println(&quot;same element array: &quot; + countAbsDistinct(sameElement, 0));\r\n        } else {\r\n            List&lt;String&gt; argStringList = new ArrayList&lt;String&gt;(Arrays.asList(args));\r\n            List&lt;Integer&gt; argList = new ArrayList&lt;Integer&gt;();\r\n            for (String s : argStringList) {\r\n                argList.add(Integer.parseInt(s));\r\n            }\r\n            System.out.println(&quot;argument array: &quot; + countAbsDistinct(argList, 0));\r\n        }\r\n    }\r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is a recursive algorithm that will return the absolute unique entries in a list in a single pass, that is in O(n) time. It relies on the fact that the array is sorted and it is not using a java.util.Set.</p>\n\n<p>Consider this example array {-5,-5,-3,0,1,3}</p>\n\n<ul>\n<li>Because the array is sorted, one of the two elements at either end of the array will have the absolute highest value: -5</li>\n<li>Again because the array is sorted, if that element is going to have a match, it will be its neighbour, or neighbours for multiple matches.</li>\n<li>So for -5 we do a single check with its neighbour: they are equal. -5 is a duplicate, so remove it, don't increase our running total and recurse.</li>\n</ul>\n\n<p>{-5,-3,0,1,3}\nNow we pick -5, its unique therefore increase running total to 1 and then remove it.</p>\n\n<p>{-3,0,1,3}\nIf they two ends have equal absolute values, just remove one, it doesnt matter which, just so long as its just one. Say the first. We don't increment our running total because the value we removed was a duplicate.</p>\n\n<p>{0,1,3}\nNow we pick 3, its unique, running total goes to 2.</p>\n\n<p>{0,1}\nPick 1, its unique, running total 3.</p>\n\n<p>{0}\nSize is 1, the value is unique, increment running total and return it. 4 Correct!</p>\n\n<pre><code>package com.codility.tests;\n\nimport java.util.ArrayList; \nimport java.util.Arrays;\nimport java.util.List;\n\npublic class AbsDistinct {\n\n/**\n * Count the number of absolute distinct elements in an array.\n * The array is sorted in ascending order.\n */\nprivate static int countAbsDistinct(List&lt;Integer&gt; list, int count) {\n    int lastIndex = list.size() - 1;\n    if (lastIndex == -1) { // zero size list, terminate\n        return 0;\n    }\n    if (lastIndex == 0) { // one element list, terminate\n        return ++count;\n    }\n    if (Math.abs(list.get(0)) == Math.abs(list.get(lastIndex))) {\n        // doesn't matter which end is removed, but to remove _only_ 1\n        list.remove(0);\n    } else if (Math.abs(list.get(0)) &gt; Math.abs(list.get(lastIndex))) {\n        // if different to its nighbour, its unique hence count it\n        if (list.get(0) != list.get(1)) {\n            count++;\n        }\n        // now that its been accounted for, remove it\n        list.remove(0);\n    } else {\n        // same logic but for the other end of the list\n        if (list.get(lastIndex) != list.get(lastIndex - 1)) {\n            count++;\n        }\n        list.remove(lastIndex);\n    }\n    return countAbsDistinct(list, count);\n}\n\npublic static void main(String[] args) {\n    if (args.length == 0) { // just run the tests\n        List&lt;Integer&gt; testList = new ArrayList&lt;Integer&gt;(Arrays.asList(-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8));\n        List&lt;Integer&gt; empty = new ArrayList&lt;Integer&gt;();\n        List&lt;Integer&gt; singleElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1));\n        List&lt;Integer&gt; sameElement = new ArrayList&lt;Integer&gt;(Arrays.asList(1, 1, 1, 1, 1, 1));\n        System.out.println(\"test array: \" + countAbsDistinct(testList, 0));\n        System.out.println(\"empty array: \" + countAbsDistinct(empty, 0));\n        System.out.println(\"single element array: \" + countAbsDistinct(singleElement, 0));\n        System.out.println(\"same element array: \" + countAbsDistinct(sameElement, 0));\n    } else {\n        List&lt;String&gt; argStringList = new ArrayList&lt;String&gt;(Arrays.asList(args));\n        List&lt;Integer&gt; argList = new ArrayList&lt;Integer&gt;();\n        for (String s : argStringList) {\n            argList.add(Integer.parseInt(s));\n        }\n        System.out.println(\"argument array: \" + countAbsDistinct(argList, 0));\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1145456,"reputation":111,"user_id":1128338,"display_name":"Rabi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1325612161,"creation_date":1325612161,"answer_id":8716288,"question_id":5730330,"body_markdown":"Here is a simple solution for this.\r\n\r\n    public class test{\r\n    \r\n    public static int dis(Integer[] arr) {\r\n        out.println(Arrays.asList(arr));\r\n        if (arr.length == 0) {\r\n            return 0;\r\n        }\r\n        int i = 0;\r\n        int j = arr.length - 1;\r\n        int c = 0;\r\n        while (i &lt;= j) {\r\n            if ((j != arr.length - 1) &amp;&amp; (Math.abs(arr[j]) == Math.abs(arr[j + 1]))) {\r\n                out.println(&quot;skipping J==&quot; + j);\r\n                j--; continue;\r\n            }\r\n            if ((i != 0) &amp;&amp; (Math.abs(arr[i]) == Math.abs(arr[i - 1]))) {\r\n                out.println(&quot;skipping I==&quot; + i);\r\n                i++; continue;\r\n            }\r\n            if (Math.abs(arr[i]) &lt; Math.abs(arr[j])) {\r\n                j--;\r\n                c++;\r\n            }\r\n            else if (Math.abs(arr[i]) &gt; Math.abs(arr[j])) {\r\n                i++; c++;\r\n            }\r\n            else {\r\n                i++; j--; c++;\r\n            }\r\n    \r\n            out.println(&quot;I=&quot; + i + &quot; J=&quot; + j + &quot; C=&quot; + c);\r\n        }\r\n        return c;\r\n    }\r\n    \r\n    \r\n   \r\n\r\n    public static void main(String[] arg){\r\n    \r\n    //Integer[] a = {34,2,3,4,3,-2,3};\r\n    //out.println(&quot;distinct elements are&quot; + dis(a));\r\n    Integer[] aa={-5,-3,0,1,3};\r\n    out.println(&quot;distinct elements count &quot; + dis(aa));\r\n    Integer[] ab={-5,-3,0,1,3, 4, 6, 7};\r\n    out.println(&quot;distinct elements count &quot; + dis(ab));\r\n    Integer[] ac={-5};\r\n    out.println(&quot;distinct elements count &quot; + dis(ac));\r\n    Integer[] acc={9};\r\n    out.println(&quot;distinct elements count &quot; + dis(acc));\r\n    Integer[] ad={9,9,9};\r\n    out.println(&quot;distinct elements count &quot; + dis(ad));\r\n    Integer[] ae={-5,-5};\r\n    out.println(&quot;distinct elements count &quot; + dis(ae));\r\n    Integer[] aee={1,5,5,5,5};\r\n    out.println(&quot;distinct elements count &quot; + dis(aee));\r\n    Integer[] af={-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8};\r\n    out.println(&quot;distinct elements count &quot; + dis(af));\r\n    \r\n    }\r\n        \r\n  }\r\n\r\n\r\n\r\nout put is \r\n\r\n\r\n    [-5, -3, 0, 1, 3]\r\n    distinct elements count 4\r\n    [-5, -3, 0, 1, 3, 4, 6, 7]\r\n    distinct elements count 7\r\n    [-5]\r\n    distinct elements count 1\r\n    [9]\r\n    distinct elements count 1\r\n    [9, 9, 9]\r\n    distinct elements count 1\r\n    [-5, -5]\r\n    distinct elements count 1\r\n    [1, 5, 5, 5, 5]\r\n    distinct elements count 2\r\n    [-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8]\r\n    distinct elements count 8\r\n\r\n\r\n\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is a simple solution for this.</p>\n\n<pre><code>public class test{\n\npublic static int dis(Integer[] arr) {\n    out.println(Arrays.asList(arr));\n    if (arr.length == 0) {\n        return 0;\n    }\n    int i = 0;\n    int j = arr.length - 1;\n    int c = 0;\n    while (i &lt;= j) {\n        if ((j != arr.length - 1) &amp;&amp; (Math.abs(arr[j]) == Math.abs(arr[j + 1]))) {\n            out.println(\"skipping J==\" + j);\n            j--; continue;\n        }\n        if ((i != 0) &amp;&amp; (Math.abs(arr[i]) == Math.abs(arr[i - 1]))) {\n            out.println(\"skipping I==\" + i);\n            i++; continue;\n        }\n        if (Math.abs(arr[i]) &lt; Math.abs(arr[j])) {\n            j--;\n            c++;\n        }\n        else if (Math.abs(arr[i]) &gt; Math.abs(arr[j])) {\n            i++; c++;\n        }\n        else {\n            i++; j--; c++;\n        }\n\n        out.println(\"I=\" + i + \" J=\" + j + \" C=\" + c);\n    }\n    return c;\n}\n\n\n\n\npublic static void main(String[] arg){\n\n//Integer[] a = {34,2,3,4,3,-2,3};\n//out.println(\"distinct elements are\" + dis(a));\nInteger[] aa={-5,-3,0,1,3};\nout.println(\"distinct elements count \" + dis(aa));\nInteger[] ab={-5,-3,0,1,3, 4, 6, 7};\nout.println(\"distinct elements count \" + dis(ab));\nInteger[] ac={-5};\nout.println(\"distinct elements count \" + dis(ac));\nInteger[] acc={9};\nout.println(\"distinct elements count \" + dis(acc));\nInteger[] ad={9,9,9};\nout.println(\"distinct elements count \" + dis(ad));\nInteger[] ae={-5,-5};\nout.println(\"distinct elements count \" + dis(ae));\nInteger[] aee={1,5,5,5,5};\nout.println(\"distinct elements count \" + dis(aee));\nInteger[] af={-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8};\nout.println(\"distinct elements count \" + dis(af));\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>out put is </p>\n\n<pre><code>[-5, -3, 0, 1, 3]\ndistinct elements count 4\n[-5, -3, 0, 1, 3, 4, 6, 7]\ndistinct elements count 7\n[-5]\ndistinct elements count 1\n[9]\ndistinct elements count 1\n[9, 9, 9]\ndistinct elements count 1\n[-5, -5]\ndistinct elements count 1\n[1, 5, 5, 5, 5]\ndistinct elements count 2\n[-9, -6, -5, -5, -5, -5, -3, -3, 0, 0, 1, 5, 6, 7, 7, 8]\ndistinct elements count 8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1179649,"reputation":9,"user_id":1154874,"display_name":"ordurio"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1326834205,"creation_date":1326834205,"answer_id":8901705,"question_id":5730330,"body_markdown":"here is a python proposal i just did to practice:\r\n\r\n        \r\n    def abs_distinct(A):\r\n        if not A:\r\n            return -1\r\n        #assume A is sorted\r\n        n = len(A)\r\n        left_cursor = 0\r\n        right_cursor = n-1\r\n        left_value = A[0]\r\n        right_value = A[n-1]\r\n        nb_abs_distinct = len(set([abs(left_value),abs(right_value)]))\r\n\r\n        while left_value != right_value:\r\n            # case 1: decrease right_cursor down to the next different value\r\n            if abs(left_value) &lt; abs(right_value):\r\n                while A[right_cursor] == right_value:\r\n                    right_cursor -= 1\r\n                right_value = A[right_cursor]\r\n                if abs(right_value) != abs(left_value):\r\n                    nb_abs_distinct += 1\r\n            # case 2: increase left_cursor to the next different value\r\n            elif abs(left_value) &gt; abs(right_value):\r\n                while A[left_cursor] == left_value:\r\n                    left_cursor += 1\r\n                left_value = A[left_cursor]\r\n                if abs(left_value) != abs(right_value): \r\n                    nb_abs_distinct += 1\r\n                \r\n            else:\r\n                while abs(left_value) == abs(right_value):\r\n                    left_cursor += 1\r\n                    left_value = A[left_cursor]\r\n                nb_abs_distinct += 1\r\n            \r\n        return nb_abs_distinct\r\n","title":"codility absolute distinct count from an array","body":"<p>here is a python proposal i just did to practice:</p>\n\n<pre><code>def abs_distinct(A):\n    if not A:\n        return -1\n    #assume A is sorted\n    n = len(A)\n    left_cursor = 0\n    right_cursor = n-1\n    left_value = A[0]\n    right_value = A[n-1]\n    nb_abs_distinct = len(set([abs(left_value),abs(right_value)]))\n\n    while left_value != right_value:\n        # case 1: decrease right_cursor down to the next different value\n        if abs(left_value) &lt; abs(right_value):\n            while A[right_cursor] == right_value:\n                right_cursor -= 1\n            right_value = A[right_cursor]\n            if abs(right_value) != abs(left_value):\n                nb_abs_distinct += 1\n        # case 2: increase left_cursor to the next different value\n        elif abs(left_value) &gt; abs(right_value):\n            while A[left_cursor] == left_value:\n                left_cursor += 1\n            left_value = A[left_cursor]\n            if abs(left_value) != abs(right_value): \n                nb_abs_distinct += 1\n\n        else:\n            while abs(left_value) == abs(right_value):\n                left_cursor += 1\n                left_value = A[left_cursor]\n            nb_abs_distinct += 1\n\n    return nb_abs_distinct\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477300,"reputation":21,"user_id":1387395,"display_name":"FelixW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350768561,"creation_date":1336660870,"answer_id":10536419,"question_id":5730330,"body_markdown":"This is my version. What do you think?\r\n\r\n    int count(vector&lt;int&gt; testVector){\r\n\t\r\n      for(unsigned int i = 0; i &lt; testVector.size(); i++){\r\n\t\t// empty array, return 0\r\n\t\tif(testVector.empty()) return 0;\r\n\r\n\t\t// one number left, must be unique, return 1;\r\n\t\tif(testVector.size() == 1) return 1;\r\n\r\n\t\t// neighbour elements are the same, delete first element\r\n\t\tif(testVector[0] == testVector[1]) {\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t\treturn count(testVector);\r\n\t\t}\r\n\r\n\t\t// absolute value of first and last element identical, delete first element\r\n\t\tif(abs(testVector[0]) == abs(testVector[testVector.size() - 1])){\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t\treturn count(testVector);\r\n\t\t}\r\n\r\n\t\t// if absolute value of beginning is greater than absolute value of end, delete beginning, otherwise end\r\n\t\tif(abs(testVector[0]) &gt; abs(testVector[testVector.size() - 1])){\r\n\t\t\ttestVector.erase(testVector.begin());\r\n\t\t} else {\r\n\t\t\ttestVector.erase(testVector.end() - 1);\r\n\t\t}\t\t\r\n\t\t// increase counter and recurse\r\n\t\treturn 1 + count(testVector);\r\n      }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>This is my version. What do you think?</p>\n\n<pre><code>int count(vector&lt;int&gt; testVector){\n\n  for(unsigned int i = 0; i &lt; testVector.size(); i++){\n    // empty array, return 0\n    if(testVector.empty()) return 0;\n\n    // one number left, must be unique, return 1;\n    if(testVector.size() == 1) return 1;\n\n    // neighbour elements are the same, delete first element\n    if(testVector[0] == testVector[1]) {\n        testVector.erase(testVector.begin());\n        return count(testVector);\n    }\n\n    // absolute value of first and last element identical, delete first element\n    if(abs(testVector[0]) == abs(testVector[testVector.size() - 1])){\n        testVector.erase(testVector.begin());\n        return count(testVector);\n    }\n\n    // if absolute value of beginning is greater than absolute value of end, delete beginning, otherwise end\n    if(abs(testVector[0]) &gt; abs(testVector[testVector.size() - 1])){\n        testVector.erase(testVector.begin());\n    } else {\n        testVector.erase(testVector.end() - 1);\n    }       \n    // increase counter and recurse\n    return 1 + count(testVector);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1501661,"reputation":31,"user_id":1406106,"display_name":"Chris C Napier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1337600016,"creation_date":1337509291,"answer_id":10672606,"question_id":5730330,"body_markdown":"    int count(vector&lt;int&gt; &amp;A) {\r\n    \r\n        int len = B.size();\r\n        if (len &lt;= 0)\r\n            return 0;\r\n    \t\r\n        // make a copy and calc absolutes of all items\r\n        vector&lt;int&gt; B = vector&lt;int&gt;(A);\r\n        for (int i = 0; i &lt; len; i++) {\r\n            if (B[i] &lt; 0) \r\n            B[i] = -B[i];\r\n        }\r\n    \r\n        // and sort so we have a simple absolute count\r\n        sort(B.begin(), B.end());\r\n    \r\n        int result = 1;\t//count first number always\r\n        for (int j = 1; j &lt; len; j++) {\r\n            if (B[j] != B[j-1])\r\n                result++;\r\n        }\r\n        return result;\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<pre><code>int count(vector&lt;int&gt; &amp;A) {\n\n    int len = B.size();\n    if (len &lt;= 0)\n        return 0;\n\n    // make a copy and calc absolutes of all items\n    vector&lt;int&gt; B = vector&lt;int&gt;(A);\n    for (int i = 0; i &lt; len; i++) {\n        if (B[i] &lt; 0) \n        B[i] = -B[i];\n    }\n\n    // and sort so we have a simple absolute count\n    sort(B.begin(), B.end());\n\n    int result = 1; //count first number always\n    for (int j = 1; j &lt; len; j++) {\n        if (B[j] != B[j-1])\n            result++;\n    }\n    return result;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1597121,"reputation":1,"user_id":1478940,"display_name":"Raymond"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1350768060,"creation_date":1340592709,"answer_id":11182974,"question_id":5730330,"body_markdown":"    class Program\r\n    {\r\n        static int CountArray(int[] MyIntArray)\r\n        {\r\n            int countNum = 0;\r\n            int[] TempIntArray = new int[MyIntArray.Length];\r\n            for (int i = 0; i &lt; MyIntArray.Length; i++)\r\n            {\r\n                TempIntArray[i] = Math.Abs(MyIntArray[i]);\r\n            }\r\n            var queryResults = from n in TempIntArray \r\n                               select n;\r\n            countNum = queryResults.Distinct().ToArray().Length;\r\n            return countNum;\r\n        }\r\n\r\n        static void Main(string[] args)\r\n        {\r\n            Console.WriteLine(&quot;demoX6FVFB-KX8&quot;);\r\n            Random randomNumber = new Random();\r\n            int[] TheArray = new int[100];\r\n            for (int j = 0; j &lt; TheArray.Length; j++)\r\n\t\t\t{\r\n\t\t\t    TheArray[j] = randomNumber.Next(-50, 50);\r\n\t\t\t}\r\n            int counta = Program.CountArray(TheArray);\r\n            Console.WriteLine(counta);\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<pre><code>class Program\n{\n    static int CountArray(int[] MyIntArray)\n    {\n        int countNum = 0;\n        int[] TempIntArray = new int[MyIntArray.Length];\n        for (int i = 0; i &lt; MyIntArray.Length; i++)\n        {\n            TempIntArray[i] = Math.Abs(MyIntArray[i]);\n        }\n        var queryResults = from n in TempIntArray \n                           select n;\n        countNum = queryResults.Distinct().ToArray().Length;\n        return countNum;\n    }\n\n    static void Main(string[] args)\n    {\n        Console.WriteLine(\"demoX6FVFB-KX8\");\n        Random randomNumber = new Random();\n        int[] TheArray = new int[100];\n        for (int j = 0; j &lt; TheArray.Length; j++)\n        {\n            TheArray[j] = randomNumber.Next(-50, 50);\n        }\n        int counta = Program.CountArray(TheArray);\n        Console.WriteLine(counta);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1743684,"reputation":21,"user_id":1594361,"display_name":"readedited"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1344829512,"creation_date":1344829512,"answer_id":11927959,"question_id":5730330,"body_markdown":"this is what i came up with, not sure if the fact that it contains a for loop inside the while deems it as typical noobie mistake.\r\n\r\n    \r\n\r\n        private int getDistict(int[] myaa) {\r\n    \t\tint dupcount=0;\r\n    \t\tint i = 0;\r\n    \t\tint j = myaa.length - 1;\r\n    \t\twhile (i &lt; j) {\r\n    \t//\t\tcheck neighbors \r\n    \t\t\tif(Math.abs(myaa[i]) == Math.abs(myaa[i+1])) {\r\n    \t\t\t\tdupcount++;\r\n    \t\t\t\ti++;\r\n    \t\t\t\tcontinue;\r\n    \t\t\t}\r\n    //\t\tcheck the other side\r\n    \t\t\tif(myaa[i] &lt; 0) {\r\n    \t\t\t\tfor(int k = j; Math.abs(myaa[i]) &lt;= Math.abs(myaa[k]); k-- ) {\r\n    \t\t\t\t\tif(Math.abs(myaa[i])==Math.abs(myaa[k])){\r\n    \t\t\t\t\t\tdupcount++;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\t\t\t\t\r\n    \t\t\t}\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t\treturn myaa.length - dupcount;\r\n    \t}","title":"codility absolute distinct count from an array","body":"<p>this is what i came up with, not sure if the fact that it contains a for loop inside the while deems it as typical noobie mistake.</p>\n\n<pre><code>    private int getDistict(int[] myaa) {\n        int dupcount=0;\n        int i = 0;\n        int j = myaa.length - 1;\n        while (i &lt; j) {\n    //      check neighbors \n            if(Math.abs(myaa[i]) == Math.abs(myaa[i+1])) {\n                dupcount++;\n                i++;\n                continue;\n            }\n//      check the other side\n            if(myaa[i] &lt; 0) {\n                for(int k = j; Math.abs(myaa[i]) &lt;= Math.abs(myaa[k]); k-- ) {\n                    if(Math.abs(myaa[i])==Math.abs(myaa[k])){\n                        dupcount++;\n                    }\n                }               \n            }\n            i++;\n        }\n        return myaa.length - dupcount;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":154071,"reputation":13182,"user_id":369759,"accept_rate":63,"display_name":"ses"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359576018,"creation_date":1359575701,"answer_id":14612511,"question_id":5730330,"body_markdown":"        \r\n    import java.util.Arrays;\r\n    \r\n    public class DistinctNumbers {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n           int[][] tests = new int[][] {\r\n                                     {-5,-3, 0, 1, 3},    //4\r\n                                     {-5,-5,-5,-5,-5},   // 1\r\n                                     { 1, 2, 3, 4, 5},   // 5\r\n                                     { 1},               // 1\r\n                                     { 1, 2},            // 2\r\n                                     { 1, 1},            // 1\r\n                            };\r\n    \r\n           for (int[] test : tests) {\r\n               int count = findDistinctNumberCount( test );\r\n               System.out.println(count);\r\n           }\r\n    \r\n        }\r\n    \r\n        static int findDistinctNumberCount(int[] numbers) {\r\n    \r\n            // 1. make everything abs.\r\n            for (int i=0; i&lt;numbers.length; i++) {\r\n              if (numbers[i] &lt;0) {\r\n                  numbers[i] = Math.abs(numbers[i]);\r\n              }\r\n            }\r\n    \r\n            // 2. sort them\r\n            Arrays.sort(numbers);\r\n    \r\n            // 3. find\r\n            int count = numbers.length;\r\n    \r\n            for (int i=0; i&lt;numbers.length; i++) {\r\n    \r\n                // skip if not distinct (equal)\r\n                i = skipIfNeededAndGentNextIndex(i, numbers);\r\n    \r\n            }\r\n    \r\n            return count;\r\n    \r\n        }\r\n    \r\n        public static int skipIfNeededAndGentNextIndex(int currentIndex, int[] numbers) {\r\n    \r\n            int count = numbers.length;\r\n    \r\n            int nextIndex = currentIndex;\r\n    \r\n            if ( (nextIndex + 1) != numbers.length)  {\r\n    \r\n                nextIndex += 1;\r\n    \r\n                while(numbers[currentIndex] == numbers[nextIndex]) {\r\n    \r\n                    count -= 1;\r\n    \r\n                    if ( (nextIndex + 1) != numbers.length) {\r\n                        nextIndex += 1;\r\n                    } else {\r\n                        break;\r\n                    }\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n            return count;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<pre><code>import java.util.Arrays;\n\npublic class DistinctNumbers {\n\n    public static void main(String[] args) {\n\n       int[][] tests = new int[][] {\n                                 {-5,-3, 0, 1, 3},    //4\n                                 {-5,-5,-5,-5,-5},   // 1\n                                 { 1, 2, 3, 4, 5},   // 5\n                                 { 1},               // 1\n                                 { 1, 2},            // 2\n                                 { 1, 1},            // 1\n                        };\n\n       for (int[] test : tests) {\n           int count = findDistinctNumberCount( test );\n           System.out.println(count);\n       }\n\n    }\n\n    static int findDistinctNumberCount(int[] numbers) {\n\n        // 1. make everything abs.\n        for (int i=0; i&lt;numbers.length; i++) {\n          if (numbers[i] &lt;0) {\n              numbers[i] = Math.abs(numbers[i]);\n          }\n        }\n\n        // 2. sort them\n        Arrays.sort(numbers);\n\n        // 3. find\n        int count = numbers.length;\n\n        for (int i=0; i&lt;numbers.length; i++) {\n\n            // skip if not distinct (equal)\n            i = skipIfNeededAndGentNextIndex(i, numbers);\n\n        }\n\n        return count;\n\n    }\n\n    public static int skipIfNeededAndGentNextIndex(int currentIndex, int[] numbers) {\n\n        int count = numbers.length;\n\n        int nextIndex = currentIndex;\n\n        if ( (nextIndex + 1) != numbers.length)  {\n\n            nextIndex += 1;\n\n            while(numbers[currentIndex] == numbers[nextIndex]) {\n\n                count -= 1;\n\n                if ( (nextIndex + 1) != numbers.length) {\n                    nextIndex += 1;\n                } else {\n                    break;\n                }\n\n            }\n\n        }\n\n        return count;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":965806,"reputation":5686,"user_id":989256,"accept_rate":73,"display_name":"Michal B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360072038,"creation_date":1360072038,"answer_id":14709020,"question_id":5730330,"body_markdown":".NET C#:\r\n\r\n    static int absoluteDistinctNumbers(int[] arr)\r\n    {\r\n        int same = 0;\r\n        int l = 0;\r\n        int r = arr.Length - 1;\r\n\r\n        while (l &lt; r)\r\n        {\r\n            if (Math.Abs(arr[l]) == Math.Abs(arr[r]))\r\n                ++same;\r\n\r\n            if (Math.Abs(arr[l]) &gt; Math.Abs(arr[r]))\r\n                ++l;\r\n            else\r\n                --r;\r\n        }\r\n\r\n        return arr.Length - same; \r\n    }\r\n\r\nIs there a problem with this solution? It looks much simpler than the other ones presented...and it took me like 10 minutes, so I am quite sure I did something wrong, but I have no idea what... My tests:\r\n\r\n    var arr = new int[] { 4, 2, 1, 1, -1, -5 };\r\n    var result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(4 == result);\r\n\r\n    arr = new int[] { 1, -1 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(0 == result);\r\n\r\n    arr = new int[] { 2 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { 3, 3, -3 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(1 == result);\r\n\r\n    arr = new int[] { 2, 0, 0, 0 };\r\n    result = absoluteDistinctNumbers(arr);\r\n    Debug.Assert(2 == result);","title":"codility absolute distinct count from an array","body":"<p>.NET C#:</p>\n\n<pre><code>static int absoluteDistinctNumbers(int[] arr)\n{\n    int same = 0;\n    int l = 0;\n    int r = arr.Length - 1;\n\n    while (l &lt; r)\n    {\n        if (Math.Abs(arr[l]) == Math.Abs(arr[r]))\n            ++same;\n\n        if (Math.Abs(arr[l]) &gt; Math.Abs(arr[r]))\n            ++l;\n        else\n            --r;\n    }\n\n    return arr.Length - same; \n}\n</code></pre>\n\n<p>Is there a problem with this solution? It looks much simpler than the other ones presented...and it took me like 10 minutes, so I am quite sure I did something wrong, but I have no idea what... My tests:</p>\n\n<pre><code>var arr = new int[] { 4, 2, 1, 1, -1, -5 };\nvar result = absoluteDistinctNumbers(arr);\nDebug.Assert(4 == result);\n\narr = new int[] { 1, -1 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(0 == result);\n\narr = new int[] { 2 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { 3, 3, -3 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(1 == result);\n\narr = new int[] { 2, 0, 0, 0 };\nresult = absoluteDistinctNumbers(arr);\nDebug.Assert(2 == result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":358236,"reputation":41,"user_id":698870,"display_name":"danny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431691582,"creation_date":1360281612,"answer_id":14763456,"question_id":5730330,"body_markdown":"The shortest version here for time complexity O(n) and O(1) memory:\r\n\r\n    int countAbsDistinct(int[] A) {\r\n        int start = 0;\r\n        int end = A.length - 1;\r\n        if (end == -1) { // zero size list\r\n            return 0;\r\n        }\r\n    \r\n        int c = 1; // at least one abs distinct for non-empty array\r\n        while(A[start]&lt;A[end]){\r\n    \t    int l = Math.abs(A[start]);\r\n    \t    int r = Math.abs(A[end]);\r\n\t    c++;\r\n    \t\r\n    \t    if (r&gt;=l){\r\n    \t        while(A[end]==list.get(--end)); // move left until different value\r\n    \t    }\r\n    \t    if (l&gt;=r){\r\n                while(A[start]==list.get(++start)); // move right until different value\r\n    \t    }\r\n        }\r\n        if(start&gt;end){ // if last movements made start index bigger than end\r\n            c--;\r\n        }\r\n        return c;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>The shortest version here for time complexity O(n) and O(1) memory:</p>\n\n<pre><code>int countAbsDistinct(int[] A) {\n    int start = 0;\n    int end = A.length - 1;\n    if (end == -1) { // zero size list\n        return 0;\n    }\n\n    int c = 1; // at least one abs distinct for non-empty array\n    while(A[start]&lt;A[end]){\n        int l = Math.abs(A[start]);\n        int r = Math.abs(A[end]);\n    c++;\n\n        if (r&gt;=l){\n            while(A[end]==list.get(--end)); // move left until different value\n        }\n        if (l&gt;=r){\n            while(A[start]==list.get(++start)); // move right until different value\n        }\n    }\n    if(start&gt;end){ // if last movements made start index bigger than end\n        c--;\n    }\n    return c;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2681029,"reputation":1,"user_id":2316424,"display_name":"Tianyu Zheng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367074236,"creation_date":1367060877,"answer_id":16251380,"question_id":5730330,"body_markdown":"In the case of Java, Arrays.sort() method has the best average performance. The expectation of time complexity is said to be O(N*log2N). So why not use it?\r\n\r\nHere is a solution.\r\n\r\n1. Go through the array, turn all the negative numbers into their absolute numbers.\r\nFor example, from {-5, -3, 0, 1, 3} to {5, 3, 0, 1, 3}.\r\n2. User Arrays.sort() to resort the array.\r\nFor example, from {5, 3, 0, 1, 3} to {0, 1, 3, 3, 5}.\r\n3. Go through the array again, if the neighbors do not have the same value, count up.\r\n\r\nHere is the source in Java.\r\n\r\n\tint countDistinct(int[] A) {\r\n\t\t\r\n\t\tint size = A.length;\r\n\t\tif(size == 0) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tfor(int i = 0; i &lt; size; i++) {\r\n\t\t\tif(A[i] &lt; 0) {\r\n\t\t\t\tA[i] = (-1) * A[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tArrays.sort(A);\r\n\t\t\r\n\t\tint count = 1;\r\n\t\tfor(int i = 0; i &lt; size - 1; i++) {\r\n\t\t\tif(A[i] != A[i + 1]) {\r\n\t\t\t\tcount++;\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\treturn count;\r\n\t}","title":"codility absolute distinct count from an array","body":"<p>In the case of Java, Arrays.sort() method has the best average performance. The expectation of time complexity is said to be O(N*log2N). So why not use it?</p>\n\n<p>Here is a solution.</p>\n\n<ol>\n<li>Go through the array, turn all the negative numbers into their absolute numbers.\nFor example, from {-5, -3, 0, 1, 3} to {5, 3, 0, 1, 3}.</li>\n<li>User Arrays.sort() to resort the array.\nFor example, from {5, 3, 0, 1, 3} to {0, 1, 3, 3, 5}.</li>\n<li>Go through the array again, if the neighbors do not have the same value, count up.</li>\n</ol>\n\n<p>Here is the source in Java.</p>\n\n<pre><code>int countDistinct(int[] A) {\n\n    int size = A.length;\n    if(size == 0) {\n        return 0;\n    }\n    for(int i = 0; i &lt; size; i++) {\n        if(A[i] &lt; 0) {\n            A[i] = (-1) * A[i];\n        }\n    }\n\n    Arrays.sort(A);\n\n    int count = 1;\n    for(int i = 0; i &lt; size - 1; i++) {\n        if(A[i] != A[i + 1]) {\n            count++;\n        } \n    }\n\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2596359,"reputation":4683,"user_id":2249962,"accept_rate":62,"display_name":"JNL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1373320219,"creation_date":1371688194,"answer_id":17203514,"question_id":5730330,"body_markdown":"Heres what I coded.....Let me know if it can be improved....\r\n\r\n    import java.util.Arrays;\r\n    import java.util.HashSet;\r\n    \r\n    /********\r\n    Joel \r\n    Jun 19, 2013\r\n     ********/\r\n    \r\n    public class CodilityTest {\r\n    \t\r\n    \tprivate int[] inputArray;\r\n    \tpublic static int count=0;\r\n    \t\r\n    \tpublic void setInput(int [] givenIP){\r\n    \t\tthis.inputArray= new int[givenIP.length];\r\n    \t\tfor(int i=0; i&lt;givenIP.length;i++)\r\n    \t\t{ inputArray[i] = givenIP[i];}\r\n    \t}\r\n    \t\r\n    \tpublic int[] getInput(){\r\n    \t\treturn this.inputArray;\r\n    \t}\r\n    \t\r\n    \tpublic CodilityTest(){\r\n    \t\tcount=0;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tCodilityTest o_tc = new CodilityTest();\r\n    \t\t\r\n    \t\tint [] x = {1,2,-3,4,-5,-11,-2,3,-4,5};\r\n    \t\tint [] y = new int[0];\r\n    \t\to_tc.setInput(x);\r\n    \t\to_tc.getOutput(x);\r\n    \t\tSystem.out.println(count);\r\n    \t\t\r\n    \t\tCodilityTest o_tc1 = new CodilityTest();\r\n    \t\to_tc1.getOutput(y);\t\t\r\n    \t}\r\n    \t\r\n    \tpublic void getOutput(int [] givenInput)\r\n    \t{\r\n    \t\tif(givenInput == null)\r\n    \t\t{System.out.println(&quot;Please Enter some variables Sir.&quot;); return;}\r\n    \t\t\r\n    \t\tif(givenInput.length&lt;1)\r\n    \t\t{System.out.println(&quot;Please Enter some variables Sir.&quot;); return; }\r\n    \t\t\r\n    \t\tif(givenInput.length &lt; 2)\r\n    \t\t{count+=1; return;}\r\n    \t\t\r\n    \t\tHashSet&lt;Integer&gt; o_hs = new HashSet&lt;Integer&gt;();\r\n    \t\tfor(int numCount=0; numCount&lt;givenInput.length;numCount++)\r\n    \t\t{\t\t\t\r\n    \t\t\tif(o_hs.add(Math.abs(givenInput[numCount])))\r\n    \t\t\t{count+=1;}\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Heres what I coded.....Let me know if it can be improved....</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.HashSet;\n\n/********\nJoel \nJun 19, 2013\n ********/\n\npublic class CodilityTest {\n\n    private int[] inputArray;\n    public static int count=0;\n\n    public void setInput(int [] givenIP){\n        this.inputArray= new int[givenIP.length];\n        for(int i=0; i&lt;givenIP.length;i++)\n        { inputArray[i] = givenIP[i];}\n    }\n\n    public int[] getInput(){\n        return this.inputArray;\n    }\n\n    public CodilityTest(){\n        count=0;\n    }\n\n    public static void main(String[] args) throws Exception {\n        // TODO Auto-generated method stub\n\n        CodilityTest o_tc = new CodilityTest();\n\n        int [] x = {1,2,-3,4,-5,-11,-2,3,-4,5};\n        int [] y = new int[0];\n        o_tc.setInput(x);\n        o_tc.getOutput(x);\n        System.out.println(count);\n\n        CodilityTest o_tc1 = new CodilityTest();\n        o_tc1.getOutput(y);     \n    }\n\n    public void getOutput(int [] givenInput)\n    {\n        if(givenInput == null)\n        {System.out.println(\"Please Enter some variables Sir.\"); return;}\n\n        if(givenInput.length&lt;1)\n        {System.out.println(\"Please Enter some variables Sir.\"); return; }\n\n        if(givenInput.length &lt; 2)\n        {count+=1; return;}\n\n        HashSet&lt;Integer&gt; o_hs = new HashSet&lt;Integer&gt;();\n        for(int numCount=0; numCount&lt;givenInput.length;numCount++)\n        {           \n            if(o_hs.add(Math.abs(givenInput[numCount])))\n            {count+=1;}\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2932748,"reputation":1,"user_id":2512502,"display_name":"guest01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371938479,"creation_date":1371937306,"answer_id":17255588,"question_id":5730330,"body_markdown":"    def solution1(A):\r\n        indneg = -1\r\n        lena = len(A)\r\n        lneg = list()\r\n        lpos = list()\r\n        \r\n        for i in range(lena-1):\r\n            if A[i] != A[i+1]:\r\n                if A[i] &lt; 0:\r\n                    lneg.append(A[i])\r\n                else:\r\n                    lpos.append(A[i])\r\n        print(lneg)\r\n        print(lpos)\r\n    \r\n        deltalen = 0\r\n    \r\n        for i in lneg:\r\n            if -i in lpos: deltalen +=1\r\n    \r\n        return(len(lneg)+len(lpos)-deltalen)","title":"codility absolute distinct count from an array","body":"<pre><code>def solution1(A):\n    indneg = -1\n    lena = len(A)\n    lneg = list()\n    lpos = list()\n\n    for i in range(lena-1):\n        if A[i] != A[i+1]:\n            if A[i] &lt; 0:\n                lneg.append(A[i])\n            else:\n                lpos.append(A[i])\n    print(lneg)\n    print(lpos)\n\n    deltalen = 0\n\n    for i in lneg:\n        if -i in lpos: deltalen +=1\n\n    return(len(lneg)+len(lpos)-deltalen)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2981669,"reputation":11,"user_id":2531512,"display_name":"Indu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1372415857,"creation_date":1372415508,"answer_id":17362683,"question_id":5730330,"body_markdown":"    int[] arr= new int[]{-5,-5,-6,-6,-6};\r\n    Set&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;();\r\n    for(int i=0;i&lt;arr.length;i++)\r\n      newSet.add(Math.abs(arr[i]));    \r\n    \r\n    System.out.println(newSet.size());","title":"codility absolute distinct count from an array","body":"<pre><code>int[] arr= new int[]{-5,-5,-6,-6,-6};\nSet&lt;Integer&gt; newSet = new HashSet&lt;Integer&gt;();\nfor(int i=0;i&lt;arr.length;i++)\n  newSet.add(Math.abs(arr[i]));    \n\nSystem.out.println(newSet.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2658289,"reputation":131,"user_id":2298531,"display_name":"vic-nik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600794597,"creation_date":1374766494,"answer_id":17862516,"question_id":5730330,"body_markdown":"Binary search based solution\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class AbsoluteDistinct {\r\n\r\n        private int absoluteDistinct(int[] a) {\r\n            if (a.length == 0 || a.length == 1) return a.length;\r\n\r\n            Arrays.sort(a);\r\n\r\n            int dist = 1;\r\n            int N = a.length;\r\n            for (int i = 0; i &lt; N; i++) {\r\n                if (i + 1 == N) break;\r\n                int temp = Math.abs(a[i]);\r\n                if (temp == Math.abs(a[i+1])) continue;\r\n                if (Arrays.binarySearch(a, (i + 1), N, temp) &lt; 0) dist++;\r\n            }\r\n            \r\n            return dist;\r\n        }\r\n\r\n    \r\n        public static void main(String[] args) {\r\n            //generate array of 1 Million random values\r\n            int LIMIT = 1000000;\r\n            int[] a = new int[LIMIT];\r\n            for (int i = 0; i &lt; LIMIT; i++) {\r\n                int r = (int) (Math.random() * (LIMIT + LIMIT + 1)) - LIMIT;\r\n                a[i] = r;\r\n            }\r\n            //print absolute distinct numbers \r\n            System.out.println(new AbsoluteDistinct().absoluteDistinct(a));\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>Binary search based solution</p>\n<pre><code>import java.util.Arrays;\n\npublic class AbsoluteDistinct {\n\n    private int absoluteDistinct(int[] a) {\n        if (a.length == 0 || a.length == 1) return a.length;\n\n        Arrays.sort(a);\n\n        int dist = 1;\n        int N = a.length;\n        for (int i = 0; i &lt; N; i++) {\n            if (i + 1 == N) break;\n            int temp = Math.abs(a[i]);\n            if (temp == Math.abs(a[i+1])) continue;\n            if (Arrays.binarySearch(a, (i + 1), N, temp) &lt; 0) dist++;\n        }\n        \n        return dist;\n    }\n\n\n    public static void main(String[] args) {\n        //generate array of 1 Million random values\n        int LIMIT = 1000000;\n        int[] a = new int[LIMIT];\n        for (int i = 0; i &lt; LIMIT; i++) {\n            int r = (int) (Math.random() * (LIMIT + LIMIT + 1)) - LIMIT;\n            a[i] = r;\n        }\n        //print absolute distinct numbers \n        System.out.println(new AbsoluteDistinct().absoluteDistinct(a));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3354300,"reputation":1,"user_id":2817630,"display_name":"bbpeter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380161512,"creation_date":1380161512,"answer_id":19018205,"question_id":5730330,"body_markdown":"Here is my ruby version 100/100 test on codility, based on the codility test cases, an array with identical absolute values  [3,-3] or [3,3] should return 1,\r\nhere is the example list [link][1]  \r\n\r\n  [1]: http://codility.com/train/\r\n\r\n    def absolute(a)\r\n\t    b = Hash.new(0)\r\n\t    a.each do |x|\r\n\t\t    x = x.abs\r\n\t\t    b[x] += 1\r\n\t    end \r\n\t    return b.size\r\n    end ","title":"codility absolute distinct count from an array","body":"<p>Here is my ruby version 100/100 test on codility, based on the codility test cases, an array with identical absolute values  [3,-3] or [3,3] should return 1,\nhere is the example list <a href=\"http://codility.com/train/\" rel=\"nofollow\">link</a>  </p>\n\n<pre><code>def absolute(a)\n    b = Hash.new(0)\n    a.each do |x|\n        x = x.abs\n        b[x] += 1\n    end \n    return b.size\nend \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1206543,"reputation":177,"user_id":1701059,"accept_rate":80,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393184263,"creation_date":1393184263,"answer_id":21973455,"question_id":5730330,"body_markdown":"Here is python implementation:\r\nMight not be too different from the accepted solution, but it based on two pointers idea.\r\n\r\n    def distinct(items):\r\n        l=0\r\n        r=len(items)-1\r\n        count=len( set( [abs( items[l] ),abs( items[r] )] ) )\r\n        a=1\r\n        b=r-1\r\n        while(a&lt;b):\r\n            if items[a]==items[l]:\r\n                a+=1\r\n            elif items[b]==items[r]:\r\n                b-=1\r\n            elif abs(items[a])==abs(items[b]):\r\n                count+=1\r\n                l=a\r\n                r=b\r\n                a+=1\r\n                b-=1\r\n            else:\r\n                count+=2\r\n                l=a\r\n                r=b\r\n                a+=1\r\n                b-=1\r\n        if(abs(items[a])!=abs(items[l]) and abs(items[a])!=abs(items[r]) and abs(items[b])!=abs(items[l]) and abs(items[b])!=abs(items[r])):\r\n            count+=1\r\n        return count","title":"codility absolute distinct count from an array","body":"<p>Here is python implementation:\nMight not be too different from the accepted solution, but it based on two pointers idea.</p>\n\n<pre><code>def distinct(items):\n    l=0\n    r=len(items)-1\n    count=len( set( [abs( items[l] ),abs( items[r] )] ) )\n    a=1\n    b=r-1\n    while(a&lt;b):\n        if items[a]==items[l]:\n            a+=1\n        elif items[b]==items[r]:\n            b-=1\n        elif abs(items[a])==abs(items[b]):\n            count+=1\n            l=a\n            r=b\n            a+=1\n            b-=1\n        else:\n            count+=2\n            l=a\n            r=b\n            a+=1\n            b-=1\n    if(abs(items[a])!=abs(items[l]) and abs(items[a])!=abs(items[r]) and abs(items[b])!=abs(items[l]) and abs(items[b])!=abs(items[r])):\n        count+=1\n    return count\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3377852,"reputation":2456,"user_id":2835640,"accept_rate":95,"display_name":"crogg01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400028098,"creation_date":1400027546,"answer_id":23643786,"question_id":5730330,"body_markdown":"Here is C++ code for both implementations with code that generates a randomly sorted integer vector:\r\n\r\n    #include &lt;vector&gt;\r\n    #include &lt;set&gt;\r\n    #include &lt;iostream&gt;\r\n    #include &lt;random&gt;\r\n    #include &lt;cstdlib&gt;\r\n    using namespace std;\r\n    int main(int argc, char** argv) {\r\n\r\n        // generate a vector with random negative and positive integers, then sort it\r\n        // vector&lt;int&gt; vQ2{ -5, -4, -4, -2, 0, 3, 4, 5, 5, 7, 12, 14};\r\n        vector&lt;int&gt; vQ2;\r\n        std::default_random_engine e;\r\n        std::uniform_int_distribution&lt;&gt; d(-10, 10);\r\n        std::function&lt;int()&gt; rnd = std::bind(d, e);\r\n        for(int n=0; n&lt;10; ++n)\r\n            vQ2.push_back(rnd());\r\n        sort(vQ2.begin(),vQ2.end());\r\n    \r\n        // set (hashfunction) solution (hash)\r\n        set&lt;int&gt; sQ2;\r\n        for_each(vQ2.cbegin(),vQ2.cend(),[&amp;sQ2](const int input) -&gt; void { sQ2.insert( std::abs(input) ); } );\r\n        cout &lt;&lt; sQ2.size() &lt;&lt; endl;\r\n    \r\n        // pointers-meeting-in-the-middle solution        \r\n        int absUniqueCount = 0;\r\n        vector&lt;int&gt;::iterator it1 = vQ2.begin();\r\n        vector&lt;int&gt;::iterator it2 = prev(vQ2.end());\r\n        int valueIt1Prev = *it1;\r\n        int valueIt2Prev = *it2;\r\n        while(valueIt1Prev &lt;= valueIt2Prev)\r\n        {\r\n            ++absUniqueCount;\r\n            while(valueIt1Prev == *it1 &amp;&amp; abs(valueIt1Prev) &gt;= abs(valueIt2Prev))\r\n            {   advance(it1,1); } // using advance in case of non contiguous memory container (e.g. list)\r\n            while(valueIt2Prev == *it2 &amp;&amp; abs(valueIt2Prev) &gt;= abs(valueIt1Prev))\r\n            {   advance(it2,-1); } \r\n            valueIt1Prev = *it1;\r\n            valueIt2Prev = *it2;\r\n        }\r\n        copy(vQ2.cbegin(),vQ2.cend(),ostream_iterator&lt;int&gt;(cout,&quot;,&quot;)); cout &lt;&lt; endl;\r\n        cout &lt;&lt; absUniqueCount &lt;&lt; endl;\r\n            \r\n        return 0;\r\n    }\r\n\r\nWhich gives:\r\n\r\n    6\r\n    -9,-8,-8,-8,-5,0,4,4,6,6,\r\n    6\r\n\r\n\r\n\r\n\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>Here is C++ code for both implementations with code that generates a randomly sorted integer vector:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;set&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\nint main(int argc, char** argv) {\n\n    // generate a vector with random negative and positive integers, then sort it\n    // vector&lt;int&gt; vQ2{ -5, -4, -4, -2, 0, 3, 4, 5, 5, 7, 12, 14};\n    vector&lt;int&gt; vQ2;\n    std::default_random_engine e;\n    std::uniform_int_distribution&lt;&gt; d(-10, 10);\n    std::function&lt;int()&gt; rnd = std::bind(d, e);\n    for(int n=0; n&lt;10; ++n)\n        vQ2.push_back(rnd());\n    sort(vQ2.begin(),vQ2.end());\n\n    // set (hashfunction) solution (hash)\n    set&lt;int&gt; sQ2;\n    for_each(vQ2.cbegin(),vQ2.cend(),[&amp;sQ2](const int input) -&gt; void { sQ2.insert( std::abs(input) ); } );\n    cout &lt;&lt; sQ2.size() &lt;&lt; endl;\n\n    // pointers-meeting-in-the-middle solution        \n    int absUniqueCount = 0;\n    vector&lt;int&gt;::iterator it1 = vQ2.begin();\n    vector&lt;int&gt;::iterator it2 = prev(vQ2.end());\n    int valueIt1Prev = *it1;\n    int valueIt2Prev = *it2;\n    while(valueIt1Prev &lt;= valueIt2Prev)\n    {\n        ++absUniqueCount;\n        while(valueIt1Prev == *it1 &amp;&amp; abs(valueIt1Prev) &gt;= abs(valueIt2Prev))\n        {   advance(it1,1); } // using advance in case of non contiguous memory container (e.g. list)\n        while(valueIt2Prev == *it2 &amp;&amp; abs(valueIt2Prev) &gt;= abs(valueIt1Prev))\n        {   advance(it2,-1); } \n        valueIt1Prev = *it1;\n        valueIt2Prev = *it2;\n    }\n    copy(vQ2.cbegin(),vQ2.cend(),ostream_iterator&lt;int&gt;(cout,\",\")); cout &lt;&lt; endl;\n    cout &lt;&lt; absUniqueCount &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>6\n-9,-8,-8,-8,-5,0,4,4,6,6,\n6\n</code></pre>\n"},{"tags":[],"owner":{"account_id":52083,"reputation":11602,"user_id":155639,"accept_rate":64,"display_name":"Andrej Kaurin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424871933,"creation_date":1424871933,"answer_id":28720615,"question_id":5730330,"body_markdown":"JavaScript: 100/100\r\n\r\n\r\n    function solution(A) {\r\n        var count = 1,\r\n            len = A.length,\r\n            S = A.map(function(x){ return Math.abs(x) }).sort();\r\n            \r\n        for(var i=1;i&lt;len;i++) {\r\n            if(S[i] != S[i-1]) count++;        \r\n        }\r\n        \r\n        return count;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>JavaScript: 100/100</p>\n\n<pre><code>function solution(A) {\n    var count = 1,\n        len = A.length,\n        S = A.map(function(x){ return Math.abs(x) }).sort();\n\n    for(var i=1;i&lt;len;i++) {\n        if(S[i] != S[i-1]) count++;        \n    }\n\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3155243,"reputation":1467,"user_id":2667792,"accept_rate":78,"display_name":"max3d"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438879728,"creation_date":1438879728,"answer_id":31861448,"question_id":5730330,"body_markdown":"100/100 Java  O(N)\r\n\r\n    public class Distinct {\r\n\r\n        public static int solution(int[] A) {\r\n\r\n            Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n            for (int i : A) {\r\n                set.add(i);\r\n            }\r\n            return set.size();\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>100/100 Java  O(N)</p>\n\n<pre><code>public class Distinct {\n\n    public static int solution(int[] A) {\n\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\n        for (int i : A) {\n            set.add(i);\n        }\n        return set.size();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":421111,"reputation":1410,"user_id":799162,"display_name":"moxi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439128090,"creation_date":1439069314,"answer_id":31898766,"question_id":5730330,"body_markdown":"Java 100/100\r\nhttps://codility.com/demo/results/demoMTWUSD-S9M/\r\n\r\nA O(N) solution without using sets and without using Sort, inspired by the Programming Pearls book, Chapter 1:\r\n\r\n    public int solutionWithoutSetCountUntilInputLength(int[] A) {\r\n           int length = A.length;\r\n           int inputLimit = 1000000;\r\n           int[] positives = new int[inputLimit];\r\n           int[] negatives = new int[inputLimit]; // should be length - 1 not counting zero\r\n           \r\n           for (int element : A) {\r\n               if ( element &gt;=0 ) {\r\n                   ++positives[element];\r\n               } else {\r\n                   int abs = element * -1;\r\n                   ++negatives[abs];\r\n               }\r\n           }\r\n                   \r\n           int countDistincts = 0;\r\n           \r\n           for (int i: A) {\r\n               if (i &gt;= 0 ) {\r\n                   if ( positives[i] &gt;= 1 ) {\r\n                       ++countDistincts;   \r\n                       positives[i] = 0;\r\n                   }\r\n               } else {\r\n                   if ( negatives[i * -1] &gt;= 1 ) {\r\n                       ++countDistincts;   \r\n                       negatives[i * -1] = 0;\r\n                   }\r\n               }\r\n           }        \r\n           return countDistincts ;\r\n       }\r\n\r\nI was thinking of improving the last answer, is I did some research of Bit operations with Java, and I found the next solutions with for me it performs better, it uses less space and less CPU cycles:\r\n\r\nimport java.util.Set;\r\n\r\n    public class Distinct {\r\n    public int solution(int[] A) {\r\n            // first part for negatives, second part for positives and adding 1\r\n            // to count the zero as part of the positives section\r\n            int offset = 1_000_000;\r\n            BitSet bitSet = new BitSet( (offset * 2) + 1 );\r\n    \r\n            for (int element : A ) {\r\n                int index = element &gt;= 0 ? offset + element : (element * -1);\r\n                bitSet.set(index);\r\n            }\r\n    \r\n            return bitSet.cardinality();\r\n        }\r\n    }\r\n\r\nHere&#39;s the codility link 100/100:\r\nhttps://codility.com/demo/results/demoN57YUC-G9Z/\r\n\r\nYou can see my other attempts here:\r\n[Distinct][1]\r\n\r\n\r\n  [1]: https://github.com/moxi/codility-lessons/blob/master/Codility/Sorting/Distinct.java","title":"codility absolute distinct count from an array","body":"<p>Java 100/100\n<a href=\"https://codility.com/demo/results/demoMTWUSD-S9M/\" rel=\"nofollow\">https://codility.com/demo/results/demoMTWUSD-S9M/</a></p>\n\n<p>A O(N) solution without using sets and without using Sort, inspired by the Programming Pearls book, Chapter 1:</p>\n\n<pre><code>public int solutionWithoutSetCountUntilInputLength(int[] A) {\n       int length = A.length;\n       int inputLimit = 1000000;\n       int[] positives = new int[inputLimit];\n       int[] negatives = new int[inputLimit]; // should be length - 1 not counting zero\n\n       for (int element : A) {\n           if ( element &gt;=0 ) {\n               ++positives[element];\n           } else {\n               int abs = element * -1;\n               ++negatives[abs];\n           }\n       }\n\n       int countDistincts = 0;\n\n       for (int i: A) {\n           if (i &gt;= 0 ) {\n               if ( positives[i] &gt;= 1 ) {\n                   ++countDistincts;   \n                   positives[i] = 0;\n               }\n           } else {\n               if ( negatives[i * -1] &gt;= 1 ) {\n                   ++countDistincts;   \n                   negatives[i * -1] = 0;\n               }\n           }\n       }        \n       return countDistincts ;\n   }\n</code></pre>\n\n<p>I was thinking of improving the last answer, is I did some research of Bit operations with Java, and I found the next solutions with for me it performs better, it uses less space and less CPU cycles:</p>\n\n<p>import java.util.Set;</p>\n\n<pre><code>public class Distinct {\npublic int solution(int[] A) {\n        // first part for negatives, second part for positives and adding 1\n        // to count the zero as part of the positives section\n        int offset = 1_000_000;\n        BitSet bitSet = new BitSet( (offset * 2) + 1 );\n\n        for (int element : A ) {\n            int index = element &gt;= 0 ? offset + element : (element * -1);\n            bitSet.set(index);\n        }\n\n        return bitSet.cardinality();\n    }\n}\n</code></pre>\n\n<p>Here's the codility link 100/100:\n<a href=\"https://codility.com/demo/results/demoN57YUC-G9Z/\" rel=\"nofollow\">https://codility.com/demo/results/demoN57YUC-G9Z/</a></p>\n\n<p>You can see my other attempts here:\n<a href=\"https://github.com/moxi/codility-lessons/blob/master/Codility/Sorting/Distinct.java\" rel=\"nofollow\">Distinct</a></p>\n"},{"tags":[],"owner":{"account_id":354646,"reputation":3890,"user_id":4185364,"display_name":"milos.ai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445278218,"creation_date":1445278218,"answer_id":33221106,"question_id":5730330,"body_markdown":"Very easy to do in Scala:\r\n\r\n    \r\n    object Solution {\r\n        def solution(A: Array[Int]): Int = {\r\n            \r\n            return(A.map(v =&gt; math.abs(v)).distinct.length)\r\n        }\r\n    }\r\n\r\nHere&#39;s link to [test](https://codility.com/demo/results/training75AZPR-AVK/).","title":"codility absolute distinct count from an array","body":"<p>Very easy to do in Scala:</p>\n\n<pre><code>object Solution {\n    def solution(A: Array[Int]): Int = {\n\n        return(A.map(v =&gt; math.abs(v)).distinct.length)\n    }\n}\n</code></pre>\n\n<p>Here's link to <a href=\"https://codility.com/demo/results/training75AZPR-AVK/\" rel=\"nofollow\">test</a>.</p>\n"},{"tags":[],"owner":{"account_id":7807297,"reputation":1,"user_id":5904753,"display_name":"Hassan M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455042170,"creation_date":1455042170,"answer_id":35299386,"question_id":5730330,"body_markdown":"    //java code scored 100/100 \r\n    class Solution{\r\n    public int solution(int[] A){\r\n    int distinct = 0;\r\n    Arrays.sort(A);\r\n        if (A.length == 0){\r\n            distinct= 0;\r\n           }\r\n        else{\r\n            distinct= 1;\r\n        }\r\n    \r\n     for(int i=1; i&lt;A.length;i++){\r\n        if(A[i] == A[i-1]){continue;}\r\n        else {\r\n        distinct +=1;\r\n        }\r\n    }\r\n    return distinct;\r\n    }\r\n    public static void main(String[] args){\r\n    int A [] = {2,1,1,2,3,1};\r\n    System.out.println(solution(A));\r\n    \r\n    }\r\n    }","title":"codility absolute distinct count from an array","body":"<pre><code>//java code scored 100/100 \nclass Solution{\npublic int solution(int[] A){\nint distinct = 0;\nArrays.sort(A);\n    if (A.length == 0){\n        distinct= 0;\n       }\n    else{\n        distinct= 1;\n    }\n\n for(int i=1; i&lt;A.length;i++){\n    if(A[i] == A[i-1]){continue;}\n    else {\n    distinct +=1;\n    }\n}\nreturn distinct;\n}\npublic static void main(String[] args){\nint A [] = {2,1,1,2,3,1};\nSystem.out.println(solution(A));\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8525433,"reputation":51,"user_id":6391016,"display_name":"Vertigo cache"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464436104,"creation_date":1464436104,"answer_id":37498601,"question_id":5730330,"body_markdown":"This is my c# solution which got 100/100 for performance and correctness. It provides a simple solution to the problem.\r\n\r\n    using System;\r\n    \r\n    class Solution {\r\n        public int solution(int[] A) {\r\n            int arrLength = A.Length;\r\n            \r\n            Array.Sort(A);\r\n            \r\n            int[] arrNegative = new int[1000002];\r\n            \r\n            int[] arrPositive = new int[1000002];\r\n            \r\n            int i,counter = 0,holder = 0;\r\n            \r\n            bool zero = false;\r\n            \r\n            for (i=0; i &lt; arrLength; i++){     \r\n                if(A[i]&lt;0){\r\n                    holder = Math.Abs(A[i]);\r\n                    if(arrNegative[holder]==0) arrNegative[holder] = holder;   \r\n                }\r\n                else{\r\n                    if(A[i]==0) zero = true;\r\n                    \r\n                    if(arrPositive[A[i]]==0) arrPositive[A[i]] = A[i];\r\n                }\r\n            }\r\n            \r\n            foreach(int c in arrNegative){\r\n                if(c!=0) counter++;\r\n            }\r\n            \r\n            foreach(int c in arrPositive){\r\n                if(c!=0) counter++;\r\n            }\r\n            \r\n            if(zero) counter++;\r\n            \r\n            return counter;\r\n        }\r\n    }","title":"codility absolute distinct count from an array","body":"<p>This is my c# solution which got 100/100 for performance and correctness. It provides a simple solution to the problem.</p>\n\n<pre><code>using System;\n\nclass Solution {\n    public int solution(int[] A) {\n        int arrLength = A.Length;\n\n        Array.Sort(A);\n\n        int[] arrNegative = new int[1000002];\n\n        int[] arrPositive = new int[1000002];\n\n        int i,counter = 0,holder = 0;\n\n        bool zero = false;\n\n        for (i=0; i &lt; arrLength; i++){     \n            if(A[i]&lt;0){\n                holder = Math.Abs(A[i]);\n                if(arrNegative[holder]==0) arrNegative[holder] = holder;   \n            }\n            else{\n                if(A[i]==0) zero = true;\n\n                if(arrPositive[A[i]]==0) arrPositive[A[i]] = A[i];\n            }\n        }\n\n        foreach(int c in arrNegative){\n            if(c!=0) counter++;\n        }\n\n        foreach(int c in arrPositive){\n            if(c!=0) counter++;\n        }\n\n        if(zero) counter++;\n\n        return counter;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1659893,"reputation":189,"user_id":1528378,"display_name":"cimey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471341732,"creation_date":1471341732,"answer_id":38971954,"question_id":5730330,"body_markdown":"A more Catterpalistic C# solution with 100/100 score.\r\n\r\nGot tips from below link.\r\nhttps://codesays.com/2014/solution-to-abs-distinct-by-codility/\r\n\r\n     using System;\r\n\r\n    class Solution {\r\n    public int solution(int[] A) {\r\n        // write your code in C# 6.0 with .NET 4.5 (Mono)\r\n        var head = 0; \r\n        var tail = A.Length -1;\r\n        var absCount = 1;\r\n        var current = A[0] &gt; 0 ? A[0] : -A[0];\r\n        while(head &lt;= tail)\r\n        {\r\n            var former = A[head] &gt; 0 ? A[head] : -A[head];\r\n            if(former == current)\r\n            {\r\n                head ++;\r\n                continue;\r\n            }\r\n            \r\n            var latter = A[tail] &gt; 0 ? A[tail] : -A[tail];\r\n            if(latter == current)\r\n            {\r\n                tail--;\r\n                continue;\r\n            }\r\n        \r\n            if(former &gt;= latter)\r\n            {\r\n                current = former;\r\n                head ++;\r\n            }\r\n            else \r\n            {\r\n                current = latter;\r\n                tail--;\r\n            \r\n            }\r\n            \r\n            absCount++;\r\n        }\r\n        \r\n        return absCount;\r\n    }\r\n}","title":"codility absolute distinct count from an array","body":"<p>A more Catterpalistic C# solution with 100/100 score.</p>\n\n<p>Got tips from below link.\n<a href=\"https://codesays.com/2014/solution-to-abs-distinct-by-codility/\" rel=\"nofollow\">https://codesays.com/2014/solution-to-abs-distinct-by-codility/</a></p>\n\n<pre><code> using System;\n\nclass Solution {\npublic int solution(int[] A) {\n    // write your code in C# 6.0 with .NET 4.5 (Mono)\n    var head = 0; \n    var tail = A.Length -1;\n    var absCount = 1;\n    var current = A[0] &gt; 0 ? A[0] : -A[0];\n    while(head &lt;= tail)\n    {\n        var former = A[head] &gt; 0 ? A[head] : -A[head];\n        if(former == current)\n        {\n            head ++;\n            continue;\n        }\n\n        var latter = A[tail] &gt; 0 ? A[tail] : -A[tail];\n        if(latter == current)\n        {\n            tail--;\n            continue;\n        }\n\n        if(former &gt;= latter)\n        {\n            current = former;\n            head ++;\n        }\n        else \n        {\n            current = latter;\n            tail--;\n\n        }\n\n        absCount++;\n    }\n\n    return absCount;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":10513148,"reputation":53,"user_id":7748148,"display_name":"Guillermo Abbona"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595281796,"creation_date":1595281796,"answer_id":63004330,"question_id":5730330,"body_markdown":"Very simple and straightforward with Java 8.\r\n\r\n    return (int) Arrays.stream(A).map(Math::abs)\r\n                .distinct().count();","title":"codility absolute distinct count from an array","body":"<p>Very simple and straightforward with Java 8.</p>\n<pre><code>return (int) Arrays.stream(A).map(Math::abs)\n            .distinct().count();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18957997,"reputation":164,"user_id":13834173,"display_name":"dimi_fn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610325742,"creation_date":1610325742,"answer_id":65660045,"question_id":5730330,"body_markdown":"Since there&#39;s also the Python tag in the question asked, below is my simple solution in Python which might be useful to future users, and which gets 100% score, correctness, and performance on Codility:\r\n\r\n    def solution(N):\r\n\r\n      list_of_absolute_values = list(map(lambda x:abs(x), N))\r\n\r\n      return len(set(list_of_absolute_values))\r\n\r\nIn the 1st line of the function, *map()* converts all values to their absolute ones. We then return the number of distinct absolute values via the [set()][1] function which removes duplicates.\r\n\r\n\r\n\r\n\r\n  [1]: https://python-reference.readthedocs.io/en/latest/docs/sets/","title":"codility absolute distinct count from an array","body":"<p>Since there's also the Python tag in the question asked, below is my simple solution in Python which might be useful to future users, and which gets 100% score, correctness, and performance on Codility:</p>\n<pre><code>def solution(N):\n\n  list_of_absolute_values = list(map(lambda x:abs(x), N))\n\n  return len(set(list_of_absolute_values))\n</code></pre>\n<p>In the 1st line of the function, <em>map()</em> converts all values to their absolute ones. We then return the number of distinct absolute values via the <a href=\"https://python-reference.readthedocs.io/en/latest/docs/sets/\" rel=\"nofollow noreferrer\">set()</a> function which removes duplicates.</p>\n"},{"tags":[],"owner":{"account_id":16058888,"reputation":51,"user_id":11590404,"display_name":"Kunal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623142203,"creation_date":1623142203,"answer_id":67884382,"question_id":5730330,"body_markdown":"  public static int solution(int[] A) {\r\n\t\t  \r\n\t\t  Map&lt;Integer, Long&gt; map= Arrays.stream(A).boxed().collect(Collectors.groupingBy(Function.identity(),Collectors.counting()));\r\n\t\t  int size=map.entrySet().size();\r\n\t\t  return size;\r\n\t    }","title":"codility absolute distinct count from an array","body":"<p>public static int solution(int[] A) {</p>\n<pre><code>      Map&lt;Integer, Long&gt; map= Arrays.stream(A).boxed().collect(Collectors.groupingBy(Function.identity(),Collectors.counting()));\n      int size=map.entrySet().size();\n      return size;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3173783,"reputation":52223,"user_id":2682142,"display_name":"L&#225;szl&#243; Papp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636669650,"creation_date":1636669650,"answer_id":69935702,"question_id":5730330,"body_markdown":"I would like to share the explanation of my algorithm and C++ implementation with you.\r\n\r\n  Caterpillar mathod\r\n\r\n  1. Set the back index to the left end.\r\n  2. Set the front index to the right end.\r\n  3. Skip duplicated values at any point on both ends.\r\n  4. If the absolute value on the left is greater than the absolute value on the right, then increase the back index.\r\n    \r\n  5. If the absolute value on the right is greater than the absolute value on the left, then decrease the front index.\r\n    \r\n  6. If the absolute value on the right equals to the absolute value on the left, then increase the back index and decrease the front index.\r\n\r\n  7. Continue this until we have processed all the elements. This will happen when the last element is processed. This is in worst case when the back and front indices have the same value and/or element. Handle this final element and then exit the iteration. \r\n   \r\n  The runtime complexity is `O(N)` since we go through over each element in the input array.\r\n\r\n  The space complexity is `O(1)` because we do not have any additional array or set, like we would have with the trivial unordered_set solution. So, whilst this approach maintains the same runtime complexity, the space complexity is more efficient.\r\n\r\n    int solution(vector&lt;int&gt; &amp;A)\r\n    {                  \r\n      int N = A.size();           \r\n      int distinct_abs_values = 0;                                             \r\n      for (int back = 0, front = N - 1; back &lt;= front; ++distinct_abs_values) {\r\n        while (back &lt; N - 1 and A[back] == A[back + 1]) ++back;\r\n        while (front &gt; 0 and A[front] == A[front - 1]) --front;\r\n                                         \r\n        const uint64_t eb = abs(A[back]); \r\n        const uint64_t ef = abs(A[front]);\r\n                            \r\n        if (eb &gt; ef) ++back;      \r\n        else if (eb &lt; ef) --front;             \r\n        else if (eb == ef) { ++back; --front; }\r\n      }\r\n                                 \r\n      return distinct_abs_values;\r\n    }","title":"codility absolute distinct count from an array","body":"<p>I would like to share the explanation of my algorithm and C++ implementation with you.</p>\n<p>Caterpillar mathod</p>\n<ol>\n<li><p>Set the back index to the left end.</p>\n</li>\n<li><p>Set the front index to the right end.</p>\n</li>\n<li><p>Skip duplicated values at any point on both ends.</p>\n</li>\n<li><p>If the absolute value on the left is greater than the absolute value on the right, then increase the back index.</p>\n</li>\n<li><p>If the absolute value on the right is greater than the absolute value on the left, then decrease the front index.</p>\n</li>\n<li><p>If the absolute value on the right equals to the absolute value on the left, then increase the back index and decrease the front index.</p>\n</li>\n<li><p>Continue this until we have processed all the elements. This will happen when the last element is processed. This is in worst case when the back and front indices have the same value and/or element. Handle this final element and then exit the iteration.</p>\n</li>\n</ol>\n<p>The runtime complexity is <code>O(N)</code> since we go through over each element in the input array.</p>\n<p>The space complexity is <code>O(1)</code> because we do not have any additional array or set, like we would have with the trivial unordered_set solution. So, whilst this approach maintains the same runtime complexity, the space complexity is more efficient.</p>\n<pre><code>int solution(vector&lt;int&gt; &amp;A)\n{                  \n  int N = A.size();           \n  int distinct_abs_values = 0;                                             \n  for (int back = 0, front = N - 1; back &lt;= front; ++distinct_abs_values) {\n    while (back &lt; N - 1 and A[back] == A[back + 1]) ++back;\n    while (front &gt; 0 and A[front] == A[front - 1]) --front;\n                                     \n    const uint64_t eb = abs(A[back]); \n    const uint64_t ef = abs(A[front]);\n                        \n    if (eb &gt; ef) ++back;      \n    else if (eb &lt; ef) --front;             \n    else if (eb == ef) { ++back; --front; }\n  }\n                             \n  return distinct_abs_values;\n}\n</code></pre>\n"}],"owner":{"account_id":246709,"reputation":1175,"user_id":520989,"accept_rate":83,"display_name":"yahh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32542,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":5730464,"answer_count":35,"score":14,"last_activity_date":1669214845,"creation_date":1303302740,"question_id":5730330,"body_markdown":"so i took the codility interview test yesterday and was informed today that i failed, unfortunately i wasnt given any other information by either codility nor the employer as to where i screwed up so i would appreciate some help in knowing where i went wrong. i know codility pays alot of emphasis on how fast the program runs and how it behaves for large numbers. now i didnt copy paste the questions so this the approx of what i remember\r\n\r\n2. count the number of elements in an array a which are absolute distinct, what it means is if an array had -3 and 3 in it these numbers are not distinct because|-3|=|3|. i think an example would clear it up better\r\n\r\na={-5,-3,0,1,-3}\r\nthe result would be 4 because there are 4 absolute distinct elements in this array.\r\n\r\nThe question also stated that a.length would be &lt;=10000, and most importantly it stated that assume that the **array is sorted in ascending order** but i didnt really understand why we would need it to be sorted\r\n\r\n***IF YOU THINK I MISSED SOMETHING ASK AND I WILL TRY TO CLEAR UP THE QUESTION FURTHER.***\r\n\r\n**here is my code**\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    \r\n    public class test2 {\r\n    \r\n    \tint test(int[] a){\r\n    \t\tSet&lt;Integer&gt; s=new HashSet&lt;Integer&gt;();\r\n    \t\t\r\n    \t\tfor(int i=0;i&lt;a.length;i++){\r\n    \t\t\ts.add(Math.abs(a[i]));\r\n    \t\t\t\r\n    \t\t}\r\n    \t\treturn s.size();\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\ttest2 t=new test2();\r\n    \t\tint[] a={1,1,1,2,-1};\r\n    \t\tSystem.out.println(t.test(a));\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"codility absolute distinct count from an array","body":"<p>so i took the codility interview test yesterday and was informed today that i failed, unfortunately i wasnt given any other information by either codility nor the employer as to where i screwed up so i would appreciate some help in knowing where i went wrong. i know codility pays alot of emphasis on how fast the program runs and how it behaves for large numbers. now i didnt copy paste the questions so this the approx of what i remember</p>\n\n<ol>\n<li>count the number of elements in an array a which are absolute distinct, what it means is if an array had -3 and 3 in it these numbers are not distinct because|-3|=|3|. i think an example would clear it up better</li>\n</ol>\n\n<p>a={-5,-3,0,1,-3}\nthe result would be 4 because there are 4 absolute distinct elements in this array.</p>\n\n<p>The question also stated that a.length would be &lt;=10000, and most importantly it stated that assume that the <strong>array is sorted in ascending order</strong> but i didnt really understand why we would need it to be sorted</p>\n\n<p><em><strong>IF YOU THINK I MISSED SOMETHING ASK AND I WILL TRY TO CLEAR UP THE QUESTION FURTHER.</em></strong></p>\n\n<p><strong>here is my code</strong></p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\n\n\npublic class test2 {\n\n    int test(int[] a){\n        Set&lt;Integer&gt; s=new HashSet&lt;Integer&gt;();\n\n        for(int i=0;i&lt;a.length;i++){\n            s.add(Math.abs(a[i]));\n\n        }\n        return s.size();\n\n    }\n\n    public static void main(String[] args) {\n        test2 t=new test2();\n        int[] a={1,1,1,2,-1};\n        System.out.println(t.test(a));\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":2,"creation_date":1669217703,"post_id":74548640,"comment_id":131595508,"body_markdown":"I have the impression that you need to quote with double quotes. So the first attempt is wrong because `sFcmName` is unquoted. In the second attmept, replace single quotes with double: `sCellFormula = &quot;IF(B&quot;+iRow+&quot;=\\&quot;&quot;+sFcmName+&quot;\\&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;`","body":"I have the impression that you need to quote with double quotes. So the first attempt is wrong because <code>sFcmName</code> is unquoted. In the second attmept, replace single quotes with double: <code>sCellFormula = &quot;IF(B&quot;+iRow+&quot;=\\&quot;&quot;+sFcmName+&quot;\\&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;&zwnj;&#8203;;</code>"},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":2,"creation_date":1669219637,"post_id":74548640,"comment_id":131596253,"body_markdown":"Set the formula you want in Microsoft Excel, save the file, read it back in Apache POI, and see how Excel likes to have it formatted?","body":"Set the formula you want in Microsoft Excel, save the file, read it back in Apache POI, and see how Excel likes to have it formatted?"}],"owner":{"account_id":18529576,"reputation":101,"user_id":13500687,"display_name":"Prashant Naik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669214667,"creation_date":1669214667,"question_id":74548640,"body_markdown":"I am facing one issue when setting cell formula when a string is passed. I am getting below error. I dont know how to fix this error. Any help will be highly appreciated.\r\n\r\n**org.apache.poi.ss.formula.FormulaParseException: Specified named range &#39;Edelweiss&#39; does not exist in the current workbook.**\r\n\r\nBelow is the code snipped. String sFcmName can be anything. I just coded to show the example.\r\n\r\n    String sFcmName = &quot;Edelweiss&quot;;\r\n    cell = currentRow.createCell(iTrialExpiration, CellType.STRING);\r\n    sCellFormula = &quot;IF(B&quot;+iRow+&quot;=&quot;+sFcmName+&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\r\n    cell.setCellFormula(sCellFormula);\r\n    cell.setCellStyle(dateStyle);\r\n\r\nI even tried the below code. but it gave me some different error.\r\n\r\n**org.apache.poi.ss.formula.FormulaParseException: Parse error near char 7 &#39;&#39;&#39; in specified formula &#39;IF(B21=&#39;Edelweiss&#39;,J21-1,J21+F$7-1)&#39;. Expected number, string, defined name, or data table**\r\n\r\nThis is the below code\r\n    \r\n    String sFcmName = &quot;Edelweiss&quot;;\r\n    cell = currentRow.createCell(iTrialExpiration, CellType.STRING);\r\n    sCellFormula = &quot;IF(B&quot;+iRow+&quot;=&#39;&quot;+sFcmName+&quot;&#39;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\r\n    cell.setCellFormula(sCellFormula);\r\n    cell.setCellStyle(dateStyle);\r\n\r\n\r\n","title":"java apache poi: how to pass string value to cell formula","body":"<p>I am facing one issue when setting cell formula when a string is passed. I am getting below error. I dont know how to fix this error. Any help will be highly appreciated.</p>\n<p><strong>org.apache.poi.ss.formula.FormulaParseException: Specified named range 'Edelweiss' does not exist in the current workbook.</strong></p>\n<p>Below is the code snipped. String sFcmName can be anything. I just coded to show the example.</p>\n<pre><code>String sFcmName = &quot;Edelweiss&quot;;\ncell = currentRow.createCell(iTrialExpiration, CellType.STRING);\nsCellFormula = &quot;IF(B&quot;+iRow+&quot;=&quot;+sFcmName+&quot;,J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\ncell.setCellFormula(sCellFormula);\ncell.setCellStyle(dateStyle);\n</code></pre>\n<p>I even tried the below code. but it gave me some different error.</p>\n<p><strong>org.apache.poi.ss.formula.FormulaParseException: Parse error near char 7 ''' in specified formula 'IF(B21='Edelweiss',J21-1,J21+F$7-1)'. Expected number, string, defined name, or data table</strong></p>\n<p>This is the below code</p>\n<pre><code>String sFcmName = &quot;Edelweiss&quot;;\ncell = currentRow.createCell(iTrialExpiration, CellType.STRING);\nsCellFormula = &quot;IF(B&quot;+iRow+&quot;='&quot;+sFcmName+&quot;',J&quot;+iRow+&quot;-1,J&quot;+iRow+&quot;+F$7-1)&quot;;\ncell.setCellFormula(sCellFormula);\ncell.setCellStyle(dateStyle);\n</code></pre>\n"},{"tags":["java","spring-boot","prometheus","spring-micrometer"],"comments":[{"owner":{"account_id":3281466,"reputation":2250,"user_id":2761985,"accept_rate":38,"display_name":"Jens Baitinger"},"score":0,"creation_date":1669048180,"post_id":74514841,"comment_id":131549079,"body_markdown":"Are you using also `io.micrometer.core.aop.TimedAspect`? And if not, why not?","body":"Are you using also <code>io.micrometer.core.aop.TimedAspect</code>? And if not, why not?"},{"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":" "},"score":0,"creation_date":1669052285,"post_id":74514841,"comment_id":131550492,"body_markdown":"if also add TimedAspect, will be the same error.","body":"if also add TimedAspect, will be the same error."}],"answers":[{"tags":[],"owner":{"account_id":3281466,"reputation":2250,"user_id":2761985,"accept_rate":38,"display_name":"Jens Baitinger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669214629,"creation_date":1669214629,"answer_id":74548630,"question_id":74514841,"body_markdown":"The problem youre discribing has nothing to do with pointcuts. There is one piece of code that generates a Timer with three tags (`class`, `exception`, `method`) and another one creating the timer with the exact same same with 5 tags (`exception`, `method`, `outcome`, `status`, `uri`) and the framework clearly says, that this is now allowed. \r\n\r\nThere are several possibilites to solve the issue: \r\n\r\n-  simply use another name for the timer (if you need the other one)\r\n-  find the other piece of code that generates that timer and deactivate it. Maybe you need to use the debugger and set an conditional breakpoint in MeterRegistry.register()` that registers the meters with the condition that the meter name matches. \r\n\r\nPS: using the URI as a tag is not a good practice. The issue is that anyone access your service using different URIs (e.g. by just adding a random number) that will end up in a very high number of meters, which will finally kill your prometheus.","title":"Prometheus requires that all meters with the same name have the same set of tag keys","body":"<p>The problem youre discribing has nothing to do with pointcuts. There is one piece of code that generates a Timer with three tags (<code>class</code>, <code>exception</code>, <code>method</code>) and another one creating the timer with the exact same same with 5 tags (<code>exception</code>, <code>method</code>, <code>outcome</code>, <code>status</code>, <code>uri</code>) and the framework clearly says, that this is now allowed.</p>\n<p>There are several possibilites to solve the issue:</p>\n<ul>\n<li>simply use another name for the timer (if you need the other one)</li>\n<li>find the other piece of code that generates that timer and deactivate it. Maybe you need to use the debugger and set an conditional breakpoint in MeterRegistry.register()` that registers the meters with the condition that the meter name matches.</li>\n</ul>\n<p>PS: using the URI as a tag is not a good practice. The issue is that anyone access your service using different URIs (e.g. by just adding a random number) that will end up in a very high number of meters, which will finally kill your prometheus.</p>\n"}],"owner":{"account_id":22560169,"reputation":11,"user_id":16747918,"display_name":" "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669214629,"creation_date":1669010708,"question_id":74514841,"body_markdown":"If @Around only @Timed annotated method like this:   \r\n\r\n package ru.fabit.visor.config.aop;\r\n    \r\n    import io.micrometer.core.annotation.Timed;\r\n    import io.micrometer.core.instrument.MeterRegistry;\r\n    import io.micrometer.core.instrument.Tag;\r\n    import io.micrometer.core.instrument.Tags;\r\n    import io.micrometer.core.instrument.Timer;\r\n    import io.micrometer.core.lang.NonNullApi;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.cloud.stream.annotation.StreamListener;\r\n    import org.springframework.scheduling.annotation.Scheduled;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.function.Function;\r\n    \r\n    /**\r\n     * The type Targeted timed aspect.\r\n     */\r\n    @Aspect\r\n    @NonNullApi\r\n    public class TargetedTimedAspect {\r\n    \r\n        public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\r\n    \r\n        public static final String EXCEPTION_TAG = &quot;exception&quot;;\r\n        public static final String BINDING_TAG = &quot;binding&quot;;\r\n        public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\r\n    \r\n        private final MeterRegistry registry;\r\n        private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry) {\r\n            this(registry, pjp -&gt;\r\n                Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\r\n                    &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\r\n            );\r\n        }\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\r\n            this.registry = registry;\r\n            this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\r\n        }\r\n    \r\n        // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\r\n        @Around(&quot;timedAnnotatedPointcut() )&quot;)\r\n        public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\r\n            Method method = ((MethodSignature) pjp.getSignature()).getMethod();\r\n    \r\n            StreamListener streamListener = method.getAnnotation(StreamListener.class);\r\n            Scheduled scheduled = method.getAnnotation(Scheduled.class);\r\n            // timed can be on method or class\r\n            Timed timed = method.getAnnotation(Timed.class);\r\n            if (timed == null) {\r\n                method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\r\n                timed = method.getAnnotation(Timed.class);\r\n            }\r\n    \r\n            final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\r\n            Timer.Sample sample = Timer.start(registry);\r\n            String exceptionClass = &quot;none&quot;;\r\n    \r\n            try {\r\n                return pjp.proceed();\r\n            } catch (Exception ex) {\r\n                exceptionClass = ex.getClass().getSimpleName();\r\n                throw ex;\r\n            } finally {\r\n                try {\r\n                    Timer.Builder timerBuilder = Timer.builder(metricName)\r\n                        .description(timed.description().isEmpty() ? null : timed.description())\r\n                        .tags(timed.extraTags())\r\n                        .tags(EXCEPTION_TAG, exceptionClass)\r\n                        .tags(tagsBasedOnJoinPoint.apply(pjp))\r\n                        .publishPercentileHistogram(timed.histogram())\r\n                        .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\r\n    \r\n                    if (streamListener != null) {\r\n                        timerBuilder.tags(\r\n                            BINDING_TAG,\r\n                            streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\r\n                        );\r\n                    } else if (scheduled != null) {\r\n                        timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\r\n                    }\r\n    \r\n                    sample.stop(timerBuilder.register(registry));\r\n                } catch (Exception e) {\r\n                    // ignoring on purpose\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Pointcut(\r\n            &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\r\n            &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\r\n        )\r\n        public void asyncAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\r\n            &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\r\n        public void allowedMethodPointcut() {\r\n             // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\r\n        public void timedAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n    }\r\n\r\n\r\nThen return: java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;web_photos_gotten_list_seconds&#39; containing tag keys [class, exception, method]. The meter you are attempting to register has keys [exception, method, outcome, status, uri].\r\n\r\n\r\nBut, if add all @Timed method in Pointcut, all good work, i dont understand, why we need all annotated method add to Pointcut separately?\r\n\r\nThis work:\r\n\r\n        package ru.fabit.visor.config.aop;\r\n    \r\n    import io.micrometer.core.annotation.Timed;\r\n    import io.micrometer.core.instrument.MeterRegistry;\r\n    import io.micrometer.core.instrument.Tag;\r\n    import io.micrometer.core.instrument.Tags;\r\n    import io.micrometer.core.instrument.Timer;\r\n    import io.micrometer.core.lang.NonNullApi;\r\n    import org.aspectj.lang.ProceedingJoinPoint;\r\n    import org.aspectj.lang.annotation.Around;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.aspectj.lang.reflect.MethodSignature;\r\n    import org.springframework.cloud.stream.annotation.StreamListener;\r\n    import org.springframework.scheduling.annotation.Scheduled;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.function.Function;\r\n    \r\n    /**\r\n     * The type Targeted timed aspect.\r\n     */\r\n    @Aspect\r\n    @NonNullApi\r\n    public class TargetedTimedAspect {\r\n    \r\n        public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\r\n    \r\n        public static final String EXCEPTION_TAG = &quot;exception&quot;;\r\n        public static final String BINDING_TAG = &quot;binding&quot;;\r\n        public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\r\n    \r\n        private final MeterRegistry registry;\r\n        private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry) {\r\n            this(registry, pjp -&gt;\r\n                Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\r\n                    &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\r\n            );\r\n        }\r\n    \r\n        public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\r\n            this.registry = registry;\r\n            this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\r\n        }\r\n    \r\n        // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\r\n        @Around(&quot;timedAnnotatedPointcut() &amp;&amp; (asyncAnnotatedPointcut() || allowedMethodPointcut())&quot;)\r\n        public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\r\n            Method method = ((MethodSignature) pjp.getSignature()).getMethod();\r\n    \r\n            StreamListener streamListener = method.getAnnotation(StreamListener.class);\r\n            Scheduled scheduled = method.getAnnotation(Scheduled.class);\r\n            // timed can be on method or class\r\n            Timed timed = method.getAnnotation(Timed.class);\r\n            if (timed == null) {\r\n                method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\r\n                timed = method.getAnnotation(Timed.class);\r\n            }\r\n    \r\n            final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\r\n            Timer.Sample sample = Timer.start(registry);\r\n            String exceptionClass = &quot;none&quot;;\r\n    \r\n            try {\r\n                return pjp.proceed();\r\n            } catch (Exception ex) {\r\n                exceptionClass = ex.getClass().getSimpleName();\r\n                throw ex;\r\n            } finally {\r\n                try {\r\n                    Timer.Builder timerBuilder = Timer.builder(metricName)\r\n                        .description(timed.description().isEmpty() ? null : timed.description())\r\n                        .tags(timed.extraTags())\r\n                        .tags(EXCEPTION_TAG, exceptionClass)\r\n                        .tags(tagsBasedOnJoinPoint.apply(pjp))\r\n                        .publishPercentileHistogram(timed.histogram())\r\n                        .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\r\n    \r\n                    if (streamListener != null) {\r\n                        timerBuilder.tags(\r\n                            BINDING_TAG,\r\n                            streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\r\n                        );\r\n                    } else if (scheduled != null) {\r\n                        timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\r\n                    }\r\n    \r\n                    sample.stop(timerBuilder.register(registry));\r\n                } catch (Exception e) {\r\n                    // ignoring on purpose\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Pointcut(\r\n            &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\r\n            &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\r\n        )\r\n        public void asyncAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\r\n            &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\r\n        public void allowedMethodPointcut() {\r\n             // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n        @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\r\n        public void timedAnnotatedPointcut() {\r\n            // Method is empty as this is just a Pointcut, the implementations are in the advices.\r\n        }\r\n    \r\n    }\r\n\r\npom.xml:\r\n\r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\r\n                &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\n","title":"Prometheus requires that all meters with the same name have the same set of tag keys","body":"<p>If @Around only @Timed annotated method like this:</p>\n<p>package ru.fabit.visor.config.aop;</p>\n<pre><code>import io.micrometer.core.annotation.Timed;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Tag;\nimport io.micrometer.core.instrument.Tags;\nimport io.micrometer.core.instrument.Timer;\nimport io.micrometer.core.lang.NonNullApi;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.scheduling.annotation.Scheduled;\n\nimport java.lang.reflect.Method;\nimport java.util.function.Function;\n\n/**\n * The type Targeted timed aspect.\n */\n@Aspect\n@NonNullApi\npublic class TargetedTimedAspect {\n\n    public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\n\n    public static final String EXCEPTION_TAG = &quot;exception&quot;;\n    public static final String BINDING_TAG = &quot;binding&quot;;\n    public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\n\n    private final MeterRegistry registry;\n    private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\n\n    public TargetedTimedAspect(MeterRegistry registry) {\n        this(registry, pjp -&gt;\n            Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\n                &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\n        );\n    }\n\n    public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\n        this.registry = registry;\n        this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\n    }\n\n    // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\n    @Around(&quot;timedAnnotatedPointcut() )&quot;)\n    public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\n        Method method = ((MethodSignature) pjp.getSignature()).getMethod();\n\n        StreamListener streamListener = method.getAnnotation(StreamListener.class);\n        Scheduled scheduled = method.getAnnotation(Scheduled.class);\n        // timed can be on method or class\n        Timed timed = method.getAnnotation(Timed.class);\n        if (timed == null) {\n            method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\n            timed = method.getAnnotation(Timed.class);\n        }\n\n        final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\n        Timer.Sample sample = Timer.start(registry);\n        String exceptionClass = &quot;none&quot;;\n\n        try {\n            return pjp.proceed();\n        } catch (Exception ex) {\n            exceptionClass = ex.getClass().getSimpleName();\n            throw ex;\n        } finally {\n            try {\n                Timer.Builder timerBuilder = Timer.builder(metricName)\n                    .description(timed.description().isEmpty() ? null : timed.description())\n                    .tags(timed.extraTags())\n                    .tags(EXCEPTION_TAG, exceptionClass)\n                    .tags(tagsBasedOnJoinPoint.apply(pjp))\n                    .publishPercentileHistogram(timed.histogram())\n                    .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\n\n                if (streamListener != null) {\n                    timerBuilder.tags(\n                        BINDING_TAG,\n                        streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\n                    );\n                } else if (scheduled != null) {\n                    timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\n                }\n\n                sample.stop(timerBuilder.register(registry));\n            } catch (Exception e) {\n                // ignoring on purpose\n            }\n        }\n    }\n\n    @Pointcut(\n        &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\n        &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\n    )\n    public void asyncAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\n        &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\n    public void allowedMethodPointcut() {\n         // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\n    public void timedAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n}\n</code></pre>\n<p>Then return: java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'web_photos_gotten_list_seconds' containing tag keys [class, exception, method]. The meter you are attempting to register has keys [exception, method, outcome, status, uri].</p>\n<p>But, if add all @Timed method in Pointcut, all good work, i dont understand, why we need all annotated method add to Pointcut separately?</p>\n<p>This work:</p>\n<pre><code>    package ru.fabit.visor.config.aop;\n\nimport io.micrometer.core.annotation.Timed;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport io.micrometer.core.instrument.Tag;\nimport io.micrometer.core.instrument.Tags;\nimport io.micrometer.core.instrument.Timer;\nimport io.micrometer.core.lang.NonNullApi;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.scheduling.annotation.Scheduled;\n\nimport java.lang.reflect.Method;\nimport java.util.function.Function;\n\n/**\n * The type Targeted timed aspect.\n */\n@Aspect\n@NonNullApi\npublic class TargetedTimedAspect {\n\n    public static final String DEFAULT_METRIC_NAME = &quot;method.timed&quot;;\n\n    public static final String EXCEPTION_TAG = &quot;exception&quot;;\n    public static final String BINDING_TAG = &quot;binding&quot;;\n    public static final String SCHEDULED_CRON_TAG = &quot;cron&quot;;\n\n    private final MeterRegistry registry;\n    private final Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint;\n\n    public TargetedTimedAspect(MeterRegistry registry) {\n        this(registry, pjp -&gt;\n            Tags.of(&quot;class&quot;, pjp.getStaticPart().getSignature().getDeclaringTypeName(),\n                &quot;method&quot;, pjp.getStaticPart().getSignature().getName())\n        );\n    }\n\n    public TargetedTimedAspect(MeterRegistry registry, Function&lt;ProceedingJoinPoint, Iterable&lt;Tag&gt;&gt; tagsBasedOnJoinPoint) {\n        this.registry = registry;\n        this.tagsBasedOnJoinPoint = tagsBasedOnJoinPoint;\n    }\n\n    // enable TimedAspect only for @StreamListener and @Scheduled annotated methods or allowed methods pointcut\n    @Around(&quot;timedAnnotatedPointcut() &amp;&amp; (asyncAnnotatedPointcut() || allowedMethodPointcut())&quot;)\n    public Object timedMethod(ProceedingJoinPoint pjp) throws Throwable {\n        Method method = ((MethodSignature) pjp.getSignature()).getMethod();\n\n        StreamListener streamListener = method.getAnnotation(StreamListener.class);\n        Scheduled scheduled = method.getAnnotation(Scheduled.class);\n        // timed can be on method or class\n        Timed timed = method.getAnnotation(Timed.class);\n        if (timed == null) {\n            method = pjp.getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());\n            timed = method.getAnnotation(Timed.class);\n        }\n\n        final String metricName = timed.value().isEmpty() ? DEFAULT_METRIC_NAME : timed.value();\n        Timer.Sample sample = Timer.start(registry);\n        String exceptionClass = &quot;none&quot;;\n\n        try {\n            return pjp.proceed();\n        } catch (Exception ex) {\n            exceptionClass = ex.getClass().getSimpleName();\n            throw ex;\n        } finally {\n            try {\n                Timer.Builder timerBuilder = Timer.builder(metricName)\n                    .description(timed.description().isEmpty() ? null : timed.description())\n                    .tags(timed.extraTags())\n                    .tags(EXCEPTION_TAG, exceptionClass)\n                    .tags(tagsBasedOnJoinPoint.apply(pjp))\n                    .publishPercentileHistogram(timed.histogram())\n                    .publishPercentiles(timed.percentiles().length == 0 ? null : timed.percentiles());\n\n                if (streamListener != null) {\n                    timerBuilder.tags(\n                        BINDING_TAG,\n                        streamListener.value().isEmpty() ? streamListener.target() : streamListener.value()\n                    );\n                } else if (scheduled != null) {\n                    timerBuilder.tags(SCHEDULED_CRON_TAG, scheduled.cron());\n                }\n\n                sample.stop(timerBuilder.register(registry));\n            } catch (Exception e) {\n                // ignoring on purpose\n            }\n        }\n    }\n\n    @Pointcut(\n        &quot;(@annotation(org.springframework.cloud.stream.annotation.StreamListener) ||&quot; +\n        &quot;@annotation(org.springframework.scheduling.annotation.Scheduled))&quot;\n    )\n    public void asyncAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;execution(public * ru.fabit.visor.service.impl.StorageClientImpl.*(..)) ||&quot; +\n        &quot;execution(public * ru.fabit.visor.service.s3storage.S3StorageClientImpl.*(..))&quot;)\n    public void allowedMethodPointcut() {\n         // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n    @Pointcut(&quot;@annotation(io.micrometer.core.annotation.Timed)&quot;)\n    public void timedAnnotatedPointcut() {\n        // Method is empty as this is just a Pointcut, the implementations are in the advices.\n    }\n\n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;\n            &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","selenium","automation","ui-automation","browser-automation"],"answers":[{"tags":[],"owner":{"account_id":6746752,"reputation":298,"user_id":5198144,"display_name":"Pekinek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669208320,"creation_date":1669208320,"answer_id":74547191,"question_id":74547050,"body_markdown":"You probably want to use some external library to parse response to Java object, for example [Jackson][1]\r\n\r\nSimple solution (using JsonNode):\r\n\r\n    String jsonString = &quot;{&#39;accountId&#39;: &#39;42515896&#39;}&quot;;\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    JsonNode actualObj = mapper.readTree(jsonString);\r\n    actualObj.get(&quot;accountId&quot;).textValue(); //returns 42515896\r\n    \r\n\r\n  [1]: https://www.baeldung.com/jackson","title":"Is it possible to take element from the API response on Java?","body":"<p>You probably want to use some external library to parse response to Java object, for example <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">Jackson</a></p>\n<p>Simple solution (using JsonNode):</p>\n<pre><code>String jsonString = &quot;{'accountId': '42515896'}&quot;;\nObjectMapper mapper = new ObjectMapper();\nJsonNode actualObj = mapper.readTree(jsonString);\nactualObj.get(&quot;accountId&quot;).textValue(); //returns 42515896\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9455787,"reputation":644,"user_id":7031148,"display_name":"Alex Karamfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669214487,"creation_date":1669214487,"answer_id":74548592,"question_id":74547050,"body_markdown":"You can use json path:\r\n```\r\n    public static void main(String[] args) {\r\n        String myJson = &quot;{\\&quot;accountId\\&quot;: \\&quot;42515896\\&quot;}&quot;;\r\n        String accountId = JsonPath.read(myJson, &quot;$.accountId&quot;);\r\n        System.out.println(accountId);\r\n    }\r\n```\r\nDependency:\r\n\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/com.jayway.jsonpath/json-path --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n    &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```","title":"Is it possible to take element from the API response on Java?","body":"<p>You can use json path:</p>\n<pre><code>    public static void main(String[] args) {\n        String myJson = &quot;{\\&quot;accountId\\&quot;: \\&quot;42515896\\&quot;}&quot;;\n        String accountId = JsonPath.read(myJson, &quot;$.accountId&quot;);\n        System.out.println(accountId);\n    }\n</code></pre>\n<p>Dependency:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.jayway.jsonpath/json-path --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n    &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n"}],"owner":{"account_id":21734633,"reputation":19,"user_id":16042806,"display_name":"Danny Fenton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1669214487,"creation_date":1669207674,"question_id":74547050,"body_markdown":"I&#39;m newbie in Java and wanna ask you question. Let&#39;s imagine the situation. I generate account for testing purposes using API and in response I get line e.g. such as:\r\n\r\n```\r\n{\r\n &quot;accountId&quot;: &quot;42515896&quot;\r\n}\r\n```\r\nHow could I write method that will take this &quot;42515896&quot; from the response and insert it into some int variable that I declared before?\r\n\r\n\r\n```\r\npublic class failedAuthorization {\r\n    // created reference variable for WebDriver\r\n    WebDriver driver;\r\n\r\n    @BeforeMethod\r\n    public void setup() {\r\n\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\imagineName.imagineSurname\\\\chromedriver\\\\chromedriver.exe&quot;);\r\n// initializing driver variable using Chrome Driver\r\n        driver=new ChromeDriver();\r\n        driver.manage().deleteAllCookies();\r\n// launching google.com on the browser\r\n        driver.get(&quot;https://login.live.com/&quot;);\r\n// maximized the browser window\r\n        driver.manage().window().maximize();\r\n        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);\r\n\r\n    }\r\n```\r\ne.g. I have some API request that generate me account and in response I get data that I will need further to login. How to use generated data?","title":"Is it possible to take element from the API response on Java?","body":"<p>I'm newbie in Java and wanna ask you question. Let's imagine the situation. I generate account for testing purposes using API and in response I get line e.g. such as:</p>\n<pre><code>{\n &quot;accountId&quot;: &quot;42515896&quot;\n}\n</code></pre>\n<p>How could I write method that will take this &quot;42515896&quot; from the response and insert it into some int variable that I declared before?</p>\n<pre><code>public class failedAuthorization {\n    // created reference variable for WebDriver\n    WebDriver driver;\n\n    @BeforeMethod\n    public void setup() {\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Users\\\\imagineName.imagineSurname\\\\chromedriver\\\\chromedriver.exe&quot;);\n// initializing driver variable using Chrome Driver\n        driver=new ChromeDriver();\n        driver.manage().deleteAllCookies();\n// launching google.com on the browser\n        driver.get(&quot;https://login.live.com/&quot;);\n// maximized the browser window\n        driver.manage().window().maximize();\n        driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);\n\n    }\n</code></pre>\n<p>e.g. I have some API request that generate me account and in response I get data that I will need further to login. How to use generated data?</p>\n"},{"tags":["java","spring-boot","rest","swagger"],"comments":[{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1669213125,"post_id":74547442,"comment_id":131593544,"body_markdown":"You&#39;ll need 2 separate schemas/classes.","body":"You&#39;ll need 2 separate schemas/classes."}],"answers":[{"tags":[],"owner":{"account_id":1722137,"reputation":36,"user_id":13180602,"display_name":"Ela Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213879,"creation_date":1669213879,"answer_id":74548464,"question_id":74547442,"body_markdown":"You cannot set required on **@ApiModelProperty** with optional condition. You can either have two seperate model or you can use **@ApiParam** on the parameters so that you can specify whether the parameter is required or optional. \r\n\r\nYou can check the usage of @ApiParam here : https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:~:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios.","title":"@ApiModelProperty: set the property &#39;required = true&#39; conditionally","body":"<p>You cannot set required on <strong>@ApiModelProperty</strong> with optional condition. You can either have two seperate model or you can use <strong>@ApiParam</strong> on the parameters so that you can specify whether the parameter is required or optional.</p>\n<p>You can check the usage of @ApiParam here : <a href=\"https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:%7E:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios\" rel=\"nofollow noreferrer\">https://www.baeldung.com/swagger-apiparam-vs-apimodelproperty#:~:text=The%20%40ApiModelProperty%20annotation%20allows%20us,the%20property%20in%20certain%20scenarios</a>.</p>\n"}],"owner":{"account_id":6162914,"reputation":87,"user_id":4803870,"display_name":"Arthur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":843,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669213879,"creation_date":1669209575,"question_id":74547442,"body_markdown":"I am trying to implement two endpoints in a spring boot application:\r\n\r\nPOST: api/v1/student\r\n\r\nPUT: api/v1/student/{student_id}\r\n\r\nThe request payload these API takes are same i.e. StudentCreation.java\r\n\r\n```\r\n@Data\r\npublic class StudentCreation {\r\n\r\n\t@ApiModelProperty(required = true)\r\n\tprivate String firstName;\r\n\r\n    @ApiModelProperty(required = true)\r\n\tprivate String lastName;\r\n\r\n\t@ApiModelProperty(required = true)\r\n\tprivate String address;\r\n\r\n}\r\n```\r\n\r\nFor POST endpoint all the fields are required in the payload, but for PUT one the firstName, lastName is optional.\r\n\r\nThe worst case I need to have two different classes for POST and PUT payload requests.\r\nSo, is there any way we can achieve this with a single class i.e. keep the required=true for POST only and required=false for PUT request?\r\n\r\nOr any other better approach is also appreciated.","title":"@ApiModelProperty: set the property &#39;required = true&#39; conditionally","body":"<p>I am trying to implement two endpoints in a spring boot application:</p>\n<p>POST: api/v1/student</p>\n<p>PUT: api/v1/student/{student_id}</p>\n<p>The request payload these API takes are same i.e. StudentCreation.java</p>\n<pre><code>@Data\npublic class StudentCreation {\n\n    @ApiModelProperty(required = true)\n    private String firstName;\n\n    @ApiModelProperty(required = true)\n    private String lastName;\n\n    @ApiModelProperty(required = true)\n    private String address;\n\n}\n</code></pre>\n<p>For POST endpoint all the fields are required in the payload, but for PUT one the firstName, lastName is optional.</p>\n<p>The worst case I need to have two different classes for POST and PUT payload requests.\nSo, is there any way we can achieve this with a single class i.e. keep the required=true for POST only and required=false for PUT request?</p>\n<p>Or any other better approach is also appreciated.</p>\n"},{"tags":["java","android","xml","xpath","vtd-xml"],"comments":[{"owner":{"account_id":733521,"reputation":37853,"user_id":695343,"accept_rate":100,"display_name":"Jens Erat"},"score":0,"creation_date":1374077559,"post_id":17704235,"comment_id":25800562,"body_markdown":"Is a _single_ query taking 3-4 ms or all the ones in that loop together? What does your document look like?","body":"Is a <i>single</i> query taking 3-4 ms or all the ones in that loop together? What does your document look like?"},{"owner":{"account_id":1403299,"reputation":22488,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"score":0,"creation_date":1374129532,"post_id":17704235,"comment_id":25821334,"body_markdown":"One query takes about 3-4 Seconds(!). My document has one root node and lots of child nodes. No grandchildren.","body":"One query takes about 3-4 Seconds(!). My document has one root node and lots of child nodes. No grandchildren."},{"owner":{"account_id":44242,"reputation":3329,"user_id":129732,"accept_rate":100,"display_name":"vtd-xml-author"},"score":0,"creation_date":1374639928,"post_id":17704235,"comment_id":26014749,"body_markdown":"Ronvcan you add a vtd-xml tag to this question?","body":"Ronvcan you add a vtd-xml tag to this question?"}],"answers":[{"tags":[],"owner":{"account_id":3024185,"reputation":5027,"user_id":2564557,"accept_rate":75,"display_name":"snrlx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374135764,"creation_date":1374078261,"answer_id":17705234,"question_id":17704235,"body_markdown":"XPath itself is not very efficient when it comes to iterating through big XML-documents. I myself made the experience that parsing values out of a ~200kb XML-file took around 10 seconds on a low-end device. \r\n\r\nAfter that I reimplemented the parser as a SAXParser and had huge performance increases of around 2 orders of magnitude. So I would propose that you try the SAXParser. It is actually not too hard to implement and there are a couple of tutorials out there.\r\n\r\nThere also exists a question on stackoverflow that deals with the topic of the various parsing methods: [SAX vs. DOM vs. XPath][1]\r\n\r\nI also assume that the evaluation is done in no time when you don&#39;t use NodeSet because it will only look for a single node and return as soon as it has found a matching node.\r\n\r\n**EDIT:**\r\n\r\nParsing the XML-document with SAX means that you iterate through it and store the sought information within objects. Take a look at this tutorial: [SAX Tutorial][2]\r\n\r\nThere the author parses staff information and transforms it into objects so I guess that&#39;s exactly what you need.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/689097/is-xpath-much-more-efficient-as-compared-to-dom-and-sax\r\n  [2]: http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/","title":"Android - XPath evaluate very slow","body":"<p>XPath itself is not very efficient when it comes to iterating through big XML-documents. I myself made the experience that parsing values out of a ~200kb XML-file took around 10 seconds on a low-end device. </p>\n\n<p>After that I reimplemented the parser as a SAXParser and had huge performance increases of around 2 orders of magnitude. So I would propose that you try the SAXParser. It is actually not too hard to implement and there are a couple of tutorials out there.</p>\n\n<p>There also exists a question on stackoverflow that deals with the topic of the various parsing methods: <a href=\"https://stackoverflow.com/questions/689097/is-xpath-much-more-efficient-as-compared-to-dom-and-sax\">SAX vs. DOM vs. XPath</a></p>\n\n<p>I also assume that the evaluation is done in no time when you don't use NodeSet because it will only look for a single node and return as soon as it has found a matching node.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Parsing the XML-document with SAX means that you iterate through it and store the sought information within objects. Take a look at this tutorial: <a href=\"http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/\" rel=\"nofollow noreferrer\">SAX Tutorial</a></p>\n\n<p>There the author parses staff information and transforms it into objects so I guess that's exactly what you need.</p>\n"},{"tags":[],"owner":{"account_id":1403299,"reputation":22488,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669213834,"creation_date":1374147733,"answer_id":17722485,"question_id":17704235,"body_markdown":"Thanks to @nvrmnd I tried a bit around and found a way better parser:\r\n\r\n[VTD-XML][1]\r\n\r\nHere&#39;s a [example][2] from the devlopers.\r\n\r\nBut this [Tutorial][3] is way better...\r\n\r\n  [1]: http://vtd-xml.sourceforge.net/\r\n  [2]: http://vtd-xml.sourceforge.net/codeSample/cs1.html\r\n  [3]: http://fahdshariff.blogspot.de/2010/08/faster-xpaths-with-vtd-xml.html","title":"Android - XPath evaluate very slow","body":"<p>Thanks to @nvrmnd I tried a bit around and found a way better parser:</p>\n<p><a href=\"http://vtd-xml.sourceforge.net/\" rel=\"nofollow noreferrer\">VTD-XML</a></p>\n<p>Here's a <a href=\"http://vtd-xml.sourceforge.net/codeSample/cs1.html\" rel=\"nofollow noreferrer\">example</a> from the devlopers.</p>\n<p>But this <a href=\"http://fahdshariff.blogspot.de/2010/08/faster-xpaths-with-vtd-xml.html\" rel=\"nofollow noreferrer\">Tutorial</a> is way better...</p>\n"}],"owner":{"account_id":1403299,"reputation":22488,"user_id":1331671,"accept_rate":96,"display_name":"Ron"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2062,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":17722485,"answer_count":2,"score":2,"last_activity_date":1669213834,"creation_date":1374075591,"question_id":17704235,"body_markdown":"I&#39;m using `XPath` to query my `XML-file` which has at the moment about `100KB`.\r\n\r\nI&#39;m iterating of an array and query for every value in the list. \r\n\r\n**Unfortunately a single query takes about 3-4 seconds** under the debugger and slightly less with debugger disabled.\r\n\r\nAny ideas why this is so slow? I use a `Galaxy S2` for testing.\r\n\r\nHere&#39;s my code:\r\n\r\n    XPath xpath = XPathFactory.newInstance().newXPath();\r\n    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\r\n    builderFactory.setNamespaceAware(true);\r\n    DocumentBuilder builder = builderFactory.newDocumentBuilder();\r\n    \r\n    Document document = builder.parse(new File(file_on_internal_sd_url)));\r\n\r\n    int size = mPrefs.getInt(&quot;no_ids&quot;, 0);\r\n    for(int i=0;i&lt;size;i++) {\r\n        String id= mPrefs.getString(&quot;id_&quot; + i, null);\r\n        String expression = &quot;/tag1/tag2[@id = &#39;&quot; + id+ &quot;&#39;]&quot;;\r\n        NodeList nodes = (NodeList) xpath.evaluate(expression, document, XPathConstants.NODESET);\r\n        if(nodes.getLength()&gt;0) {\r\n            myElements.add((Element)nodes.item(0));\r\n        }\r\n    }\r\n\r\n**Update**\r\n\r\nWhen I leave out the `XPathConstants.NODESET` the evalution is done in no time but I don&#39;t get a `NodeList`. It returns an empty string instead...","title":"Android - XPath evaluate very slow","body":"<p>I'm using <code>XPath</code> to query my <code>XML-file</code> which has at the moment about <code>100KB</code>.</p>\n\n<p>I'm iterating of an array and query for every value in the list. </p>\n\n<p><strong>Unfortunately a single query takes about 3-4 seconds</strong> under the debugger and slightly less with debugger disabled.</p>\n\n<p>Any ideas why this is so slow? I use a <code>Galaxy S2</code> for testing.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>XPath xpath = XPathFactory.newInstance().newXPath();\nDocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\nbuilderFactory.setNamespaceAware(true);\nDocumentBuilder builder = builderFactory.newDocumentBuilder();\n\nDocument document = builder.parse(new File(file_on_internal_sd_url)));\n\nint size = mPrefs.getInt(\"no_ids\", 0);\nfor(int i=0;i&lt;size;i++) {\n    String id= mPrefs.getString(\"id_\" + i, null);\n    String expression = \"/tag1/tag2[@id = '\" + id+ \"']\";\n    NodeList nodes = (NodeList) xpath.evaluate(expression, document, XPathConstants.NODESET);\n    if(nodes.getLength()&gt;0) {\n        myElements.add((Element)nodes.item(0));\n    }\n}\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>When I leave out the <code>XPathConstants.NODESET</code> the evalution is done in no time but I don't get a <code>NodeList</code>. It returns an empty string instead...</p>\n"},{"tags":["java","selenium","getattribute","constraint-validation-api"],"answers":[{"tags":[],"owner":{"account_id":16170777,"reputation":60,"user_id":11674612,"display_name":"SeleniumNT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561019031,"creation_date":1561016138,"answer_id":56681168,"question_id":56681079,"body_markdown":"Pass your email xpath in this method. You will get entered text\r\n\r\n        public String getTextofInputBox(By by) {\r\n        \r\n        JavascriptExecutor js = (JavascriptExecutor) driver; \r\n        String value = (String)((js).executeScript(&quot;return arguments[0].value&quot;,driver.findElement(by)));\r\n        return value;\r\n    }","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>Pass your email xpath in this method. You will get entered text</p>\n\n<pre><code>    public String getTextofInputBox(By by) {\n\n    JavascriptExecutor js = (JavascriptExecutor) driver; \n    String value = (String)((js).executeScript(\"return arguments[0].value\",driver.findElement(by)));\n    return value;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":344910,"reputation":7321,"user_id":677518,"display_name":"Ardesco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561019874,"creation_date":1561019874,"answer_id":56682122,"question_id":56681079,"body_markdown":"You are pulling back the wrong attribute, the one you want to use is value:\r\n\r\n    email.getAttribute(&quot;value&quot;);","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>You are pulling back the wrong attribute, the one you want to use is value:</p>\n\n<pre><code>email.getAttribute(\"value\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561047056,"creation_date":1561047056,"answer_id":56690032,"question_id":56681079,"body_markdown":"`&lt;input&gt;` element\r\n---------------\r\nAs per the documentation **HTML** [**`&lt;input&gt;`**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input) **element** is an interactive controls for HTML forms to accept data from the user.\r\n\r\n\r\n----------\r\n\r\n\r\nData validation\r\n--------------------\r\n[Data validation](https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation) helps us to ensure that user have filled in the desired fields in the correct format to ensure that submitted data will be successfully accepted by the Application/Web Server.\r\n\r\nAs per the snapshot:\r\n\r\n[![validate][1]][1]\r\n\r\nThe `&lt;input&gt;` element contains JavaScript validation through the attribute **`data-validate`** which have 2 sub-validations as **`&#39;validate-email&#39;:true`** and **`&#39;required&#39;:true`**. These Javasript validations validates the text entered within the `&lt;input&gt;` field.\r\n\r\nSo once the Javasript validation completes you can extract the text you have entered in the **EMAIL** field i.e. **arjun_123@gmail.com** inducing _WebDriverWait_ using the following solution:\r\n\r\n\tSystem.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(email).getAttribute(&quot;value&quot;));\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JoeUR.png","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<h2><code>&lt;input&gt;</code> element</h2>\n\n<p>As per the documentation <strong>HTML</strong> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input\" rel=\"nofollow noreferrer\"><strong><code>&lt;input&gt;</code></strong></a> <strong>element</strong> is an interactive controls for HTML forms to accept data from the user.</p>\n\n<hr>\n\n<h2>Data validation</h2>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation\" rel=\"nofollow noreferrer\">Data validation</a> helps us to ensure that user have filled in the desired fields in the correct format to ensure that submitted data will be successfully accepted by the Application/Web Server.</p>\n\n<p>As per the snapshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JoeUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JoeUR.png\" alt=\"validate\"></a></p>\n\n<p>The <code>&lt;input&gt;</code> element contains JavaScript validation through the attribute <strong><code>data-validate</code></strong> which have 2 sub-validations as <strong><code>'validate-email':true</code></strong> and <strong><code>'required':true</code></strong>. These Javasript validations validates the text entered within the <code>&lt;input&gt;</code> field.</p>\n\n<p>So once the Javasript validation completes you can extract the text you have entered in the <strong>EMAIL</strong> field i.e. <strong>arjun_123@gmail.com</strong> inducing <em>WebDriverWait</em> using the following solution:</p>\n\n<pre><code>System.out.println(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(email).getAttribute(\"value\"));\n</code></pre>\n"}],"owner":{"account_id":2437205,"reputation":341,"user_id":2126805,"accept_rate":89,"display_name":"Arjun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":624,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1669213740,"creation_date":1561015793,"question_id":56681079,"body_markdown":"I want to Get the email id entered &quot;arjun_123@gmail.com&quot; using java code. \r\nI tried the below codes, but it always returned null. \r\n\r\nWhat I really need is, I want to check whether email is successfully entered or not. Sometimes, email is not getting entered.  So I want to check whether field is empty or not and retrieve the text entered.    \r\n\r\n    email.getAttribute(&quot;innerText&quot;);\r\n    email.getAttribute(&quot;innerHTML&quot;);\r\n    email.getAttribute(&quot;textContent&quot;);\r\n    email.getText();\r\n\r\n\r\n[![code snippet][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4DmQA.jpg","title":"How to get the Email/Text entered into a field when there is no &quot;value&quot; attribute or text in the code snippet for Java Selenium","body":"<p>I want to Get the email id entered \"arjun_123@gmail.com\" using java code. \nI tried the below codes, but it always returned null. </p>\n\n<p>What I really need is, I want to check whether email is successfully entered or not. Sometimes, email is not getting entered.  So I want to check whether field is empty or not and retrieve the text entered.    </p>\n\n<pre><code>email.getAttribute(\"innerText\");\nemail.getAttribute(\"innerHTML\");\nemail.getAttribute(\"textContent\");\nemail.getText();\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/4DmQA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4DmQA.jpg\" alt=\"code snippet\"></a></p>\n"},{"tags":["java","android","rx-java","rx-android"],"comments":[{"owner":{"account_id":24127,"reputation":69392,"user_id":61158,"accept_rate":98,"display_name":"akarnokd"},"score":0,"creation_date":1669205613,"post_id":74544537,"comment_id":131590774,"body_markdown":"It&#39;s `fromIterable` in RxJava 3.","body":"It&#39;s <code>fromIterable</code> in RxJava 3."},{"owner":{"account_id":26699892,"reputation":1,"user_id":20307135,"display_name":"Andrei Aleksandrov"},"score":0,"creation_date":1669213385,"post_id":74544537,"comment_id":131593661,"body_markdown":"Yeah, okay, but it doesn&#39;t really work because it defeats the purpose of the async execution. If I&#39;m getting results after all the tasks are finished, I might as well just run it on the main thread. The question is more about how to keep track of the process so I could execute onComplete after all the tasks are finished","body":"Yeah, okay, but it doesn&#39;t really work because it defeats the purpose of the async execution. If I&#39;m getting results after all the tasks are finished, I might as well just run it on the main thread. The question is more about how to keep track of the process so I could execute onComplete after all the tasks are finished"}],"owner":{"account_id":26699892,"reputation":1,"user_id":20307135,"display_name":"Andrei Aleksandrov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669213628,"creation_date":1669196054,"question_id":74544537,"body_markdown":"I have multiple tasks, each being executed on `Schedulers.newThread()`. The task is a method, which returns `Observable&lt;Long&gt;`.\r\n\r\nThe overall structure looks like this:\r\n\r\n```\r\npublic void createAndPerformOperations(int mDataStructureSize, int operationsAmount) {\r\n    disposables.add(Single.fromCallable(() -&gt;\r\n                    (new OperationsFactory()).getOperations((new DataStructureFactory()).getMaps(mDataStructureSize)))\r\n            .subscribeOn(Schedulers.newThread())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe(operations -&gt; {\r\n                for (int i = 0; i &lt; operations.size(); i++) {\r\n                    performOperation(operations.get(i), i, operationsAmount);\r\n                }\r\n            }));\r\n}\r\n\r\nprivate void performOperation(Operation operation, int id, int operationsAmount) {\r\n    disposables.add(Observable.defer(() -&gt; operation\r\n                    .executeAndReturnUptime(operationsAmount))\r\n            .subscribeOn(Schedulers.newThread())\r\n            .observeOn(AndroidSchedulers.mainThread())\r\n            .subscribe(upTime -&gt; uptimeStream.onNext(new Pair&lt;&gt;(id, upTime))));\r\n}\r\n```\r\n\r\nThe `uptimeStream` is a PublishSubject, which is observed in a Fragment.\r\nI need to somehow call the PublishSubject&#39;s observer onComplete method, but only when all tasks are finished and all Pairs are consumed. \r\n\r\nAlthough the amount of tasks is known, I&#39;m trying to avoid implementing any type of hardcoded counter for consumed items, since the code should be reusable if that amount changes. I&#39;ve tried calling onComplete method directly from different places, but nothing seems to really work. The main problem is that I don&#39;t need just a confirmation that all tasks are finished, but I also need to process all the values in the parent Fragment\r\n\r\nI&#39;m fine with removing PublishSubject in general, if other solution works.\r\n\r\nUPD: I&#39;m aware of [this solution][1], but I can&#39;t find `Observable.from` in RXJava 3, and [in this solution][2] `.zip()` doesn&#39;t work for me, since I can&#39;t manually list all the observables + need to include ID field besides the actual return value\r\n\r\nUPD2: I deleted the HashMap thing because I&#39;ve got to thinking, and the main point here is to still get the results one by one, and execute only onComplete after the tasks are completed. So the solution with `fromIterable` does not really fit there. \r\n\r\n  [1]: https://stackoverflow.com/a/35365371/20307135\r\n  [2]: https://stackoverflow.com/a/35363084/20307135","title":"How to wait for completion of multiple Observables in RXJava?","body":"<p>I have multiple tasks, each being executed on <code>Schedulers.newThread()</code>. The task is a method, which returns <code>Observable&lt;Long&gt;</code>.</p>\n<p>The overall structure looks like this:</p>\n<pre><code>public void createAndPerformOperations(int mDataStructureSize, int operationsAmount) {\n    disposables.add(Single.fromCallable(() -&gt;\n                    (new OperationsFactory()).getOperations((new DataStructureFactory()).getMaps(mDataStructureSize)))\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(operations -&gt; {\n                for (int i = 0; i &lt; operations.size(); i++) {\n                    performOperation(operations.get(i), i, operationsAmount);\n                }\n            }));\n}\n\nprivate void performOperation(Operation operation, int id, int operationsAmount) {\n    disposables.add(Observable.defer(() -&gt; operation\n                    .executeAndReturnUptime(operationsAmount))\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(upTime -&gt; uptimeStream.onNext(new Pair&lt;&gt;(id, upTime))));\n}\n</code></pre>\n<p>The <code>uptimeStream</code> is a PublishSubject, which is observed in a Fragment.\nI need to somehow call the PublishSubject's observer onComplete method, but only when all tasks are finished and all Pairs are consumed.</p>\n<p>Although the amount of tasks is known, I'm trying to avoid implementing any type of hardcoded counter for consumed items, since the code should be reusable if that amount changes. I've tried calling onComplete method directly from different places, but nothing seems to really work. The main problem is that I don't need just a confirmation that all tasks are finished, but I also need to process all the values in the parent Fragment</p>\n<p>I'm fine with removing PublishSubject in general, if other solution works.</p>\n<p>UPD: I'm aware of <a href=\"https://stackoverflow.com/a/35365371/20307135\">this solution</a>, but I can't find <code>Observable.from</code> in RXJava 3, and <a href=\"https://stackoverflow.com/a/35363084/20307135\">in this solution</a> <code>.zip()</code> doesn't work for me, since I can't manually list all the observables + need to include ID field besides the actual return value</p>\n<p>UPD2: I deleted the HashMap thing because I've got to thinking, and the main point here is to still get the results one by one, and execute only onComplete after the tasks are completed. So the solution with <code>fromIterable</code> does not really fit there.</p>\n"},{"tags":["java","java-stream","reduce"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669213563,"creation_date":1669213187,"answer_id":74548278,"question_id":74548124,"body_markdown":"You shouldn&#39;t use `null` as the identity element. The `reduce` method with identity can be regarded as this:\r\n\r\n```\r\nBigDecimal result = identity;\r\nfor (BigDecimal value : list) {\r\n    result = result.add(value);\r\n}\r\n```\r\nAs you see, if the identity is `nul`, you will get a `NullPointerException`. That&#39;s exactly what I got when I tried your code.\r\n\r\n----------\r\n\r\nThe identity value has an important rule though. For an operation `f`, the identity value should be such that, for each value `x`, `f.apply(identity, x)` equals `x`. If it doesn&#39;t, you can get some odd results. For instance:\r\n\r\n```\r\nBigDecimal result1 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .reduce(BigDecimal.ONE, BigDecimal::add);\r\n// result1 is 1 (identity) + 1 (first value) + 10 (second value), so 12\r\n\r\nBigDecimal result2 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .parallel()\r\n        .reduce(BigDecimal.ONE, BigDecimal::add);\r\n// result2 is (1 (identity) + 1 (first value)) + (1 (identity) + 10 (second value)), so 13\r\n\r\nBigDecimal result3 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\r\n        .parallel()\r\n        .reduce(BigDecimal.ZERO, BigDecimal::add)\r\n        .add(BigDecimal.ONE);\r\n// result3 is (0 (identity) + 1 (first value)) + (0 (identity) + 10 (second value)) + 1, so 12\r\n```\r\nThe reason for this is that, as soon as you go parallel, the stream is split into parts, each part gets reduced on its own, and then the results of the parts are combined using the operator.\r\n\r\n----------\r\n\r\nIf you want to get `null` as result for empty streams, use the `reduce` method without identity:\r\n\r\n```\r\nlist.stream()\r\n        .filter(Objects::nonNull)\r\n        .reduce(BigDecimal::add) // returns Optional&lt;BigDecimal&gt;\r\n        .orElse(null);\r\n```","title":"Obtaining NULL as default value with Java Stream reduce when all items are null still getting non null when some items are non null","body":"<p>You shouldn't use <code>null</code> as the identity element. The <code>reduce</code> method with identity can be regarded as this:</p>\n<pre><code>BigDecimal result = identity;\nfor (BigDecimal value : list) {\n    result = result.add(value);\n}\n</code></pre>\n<p>As you see, if the identity is <code>nul</code>, you will get a <code>NullPointerException</code>. That's exactly what I got when I tried your code.</p>\n<hr />\n<p>The identity value has an important rule though. For an operation <code>f</code>, the identity value should be such that, for each value <code>x</code>, <code>f.apply(identity, x)</code> equals <code>x</code>. If it doesn't, you can get some odd results. For instance:</p>\n<pre><code>BigDecimal result1 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .reduce(BigDecimal.ONE, BigDecimal::add);\n// result1 is 1 (identity) + 1 (first value) + 10 (second value), so 12\n\nBigDecimal result2 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .parallel()\n        .reduce(BigDecimal.ONE, BigDecimal::add);\n// result2 is (1 (identity) + 1 (first value)) + (1 (identity) + 10 (second value)), so 13\n\nBigDecimal result3 = Stream.of(BigDecimal.ONE, BigDecimal.TEN)\n        .parallel()\n        .reduce(BigDecimal.ZERO, BigDecimal::add)\n        .add(BigDecimal.ONE);\n// result3 is (0 (identity) + 1 (first value)) + (0 (identity) + 10 (second value)) + 1, so 12\n</code></pre>\n<p>The reason for this is that, as soon as you go parallel, the stream is split into parts, each part gets reduced on its own, and then the results of the parts are combined using the operator.</p>\n<hr />\n<p>If you want to get <code>null</code> as result for empty streams, use the <code>reduce</code> method without identity:</p>\n<pre><code>list.stream()\n        .filter(Objects::nonNull)\n        .reduce(BigDecimal::add) // returns Optional&lt;BigDecimal&gt;\n        .orElse(null);\n</code></pre>\n"}],"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":74548278,"answer_count":1,"score":-2,"last_activity_date":1669213563,"creation_date":1669212500,"question_id":74548124,"body_markdown":"My example is about BigDecimal but might apply to other reducable (summable) classes also.\r\n\r\n    @Test\r\n    void streamWithNullsTest() {\r\n      final var list = new ArrayList&lt;BigDecimal&gt;();\r\n      // Ok, gives seed null for empty list\r\n      assertNull(list.stream().reduce(null, BigDecimal::add));\r\n\r\n      // Ok, gives seed 1 for empty list\r\n      assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\r\n      \r\n      // Ok, if nulls filtered, gives seed null.\r\n      list.add(null);\r\n      assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\r\n  \r\n      // Ok, if nulls filtered, gives seed 1.\r\n      assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\r\n  \r\n      // Not ok, because seems to add BigDecimal.ONE to seed null?\r\n      // Need a null if all items are null or sum if any ot items is not null\r\n      list.add(BigDecimal.ONE);\r\n      assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\r\n    }\r\n\r\nSo the last one is the problem. I guess I should implement some sort of reducer function (maybe with generics to apply other classes also) or so but is there any other way?\r\n","title":"Obtaining NULL as default value with Java Stream reduce when all items are null still getting non null when some items are non null","body":"<p>My example is about BigDecimal but might apply to other reducable (summable) classes also.</p>\n<pre><code>@Test\nvoid streamWithNullsTest() {\n  final var list = new ArrayList&lt;BigDecimal&gt;();\n  // Ok, gives seed null for empty list\n  assertNull(list.stream().reduce(null, BigDecimal::add));\n\n  // Ok, gives seed 1 for empty list\n  assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\n  \n  // Ok, if nulls filtered, gives seed null.\n  list.add(null);\n  assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\n\n  // Ok, if nulls filtered, gives seed 1.\n  assertEquals(BigDecimal.ONE, list.stream().filter(Objects::nonNull).reduce(BigDecimal.ONE, BigDecimal::add));\n\n  // Not ok, because seems to add BigDecimal.ONE to seed null?\n  // Need a null if all items are null or sum if any ot items is not null\n  list.add(BigDecimal.ONE);\n  assertNull(list.stream().filter(Objects::nonNull).reduce(null, BigDecimal::add));\n}\n</code></pre>\n<p>So the last one is the problem. I guess I should implement some sort of reducer function (maybe with generics to apply other classes also) or so but is there any other way?</p>\n"},{"tags":["python","java","jdbc","sybase","jaydebeapi"],"answers":[{"tags":[],"owner":{"account_id":8244213,"reputation":306,"user_id":6200901,"display_name":"Stykes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1661707643,"creation_date":1661707643,"answer_id":73520769,"question_id":73514224,"body_markdown":"I fixed the problem by adding several file paths to the `$CLASSPATH` variable and ensuring that the environment variables were present in the script. Ultimately, I needed more than one file added to `$CLASSPATH`. Solution below (your file paths will obviously differ)\r\n\r\n```python\r\nos.environ[&#39;Path&#39;] = os.environ[&#39;Path&#39;]+f&#39;;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32&#39;\r\nos.environ[&#39;JAVA_HOME&#39;] = &#39;C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.15.10-hotspot&#39;\r\nos.environ[&#39;CLASSPATH&#39;] = (f&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Java\\\\sajdbc4.jar;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32\\\\dbjdbc16.dll;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\classes\\\\jconn4.jar;&#39;+\r\nf&#39;D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\devclasses\\\\jconn4.jar&#39;)\r\n```","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>I fixed the problem by adding several file paths to the <code>$CLASSPATH</code> variable and ensuring that the environment variables were present in the script. Ultimately, I needed more than one file added to <code>$CLASSPATH</code>. Solution below (your file paths will obviously differ)</p>\n<pre class=\"lang-py prettyprint-override\"><code>os.environ['Path'] = os.environ['Path']+f';D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32'\nos.environ['JAVA_HOME'] = 'C:\\\\Program Files\\\\Microsoft\\\\jdk-11.0.15.10-hotspot'\nos.environ['CLASSPATH'] = (f'D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Java\\\\sajdbc4.jar;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\IQ-16_0\\\\Bin32\\\\dbjdbc16.dll;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\classes\\\\jconn4.jar;'+\nf'D:\\\\Users\\\\{user}\\\\Sybase\\\\jConnect-7_0\\\\devclasses\\\\jconn4.jar')\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24277841,"reputation":1,"user_id":18224885,"display_name":"sifirbinard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213532,"creation_date":1669040859,"answer_id":74520467,"question_id":73514224,"body_markdown":"For me, the solution was to copy jconn4.jar to &quot;&lt;JAVA_HOME&gt;/jre/lib/ext&quot;","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>For me, the solution was to copy jconn4.jar to &quot;&lt;JAVA_HOME&gt;/jre/lib/ext&quot;</p>\n"}],"owner":{"account_id":8244213,"reputation":306,"user_id":6200901,"display_name":"Stykes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":937,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73520769,"answer_count":2,"score":1,"last_activity_date":1669213532,"creation_date":1661632225,"question_id":73514224,"body_markdown":"I am trying to use the [jaydebeapi][1] python package to create a jdbc database connection, but no matter what argument I put in the `connect` method I get the same error: &quot;TypeError: Class [first_argurment_str] is not found&quot;\r\n\r\n    import jaydebeapi\r\n    \r\n    conn = jaydebeapi.connect(&#39;sajdbc4.jar&#39;, connectionString,[userName, Password])\r\n\r\nI tried adding jar files to the directory, and referring directly to the paths in `$CLASSPATH` neither changed the error. \r\n\r\nOriginally, I was trying to connect to a [Sybase][2] database, but I&#39;d settle for anything at this point. \r\n\r\nFull Error Text: \r\n\r\n        File &quot;H:\\Data-Sources\\Connection-Examples\\Sybase\\jayBeaOnly.py&quot;, line 2, in &lt;module&gt;\r\n        conn = jaydebeapi.connect(&quot;org.hsqldb.jdbcDriver&quot;,\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 412, in connect\r\n        jconn = _jdbc_connect(jclassname, url, driver_args, jars, libs)\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 221, in _jdbc_connect_jpype\r\n    jpype.JClass(jclassname)\r\n        File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jpype\\_jclass.py&quot;, line 99, in __new__\r\n    return _jpype._getClass(jc)\r\n        TypeError: Class org.hsqldb.jdbcDriver is not found\r\n\r\npython 3.9;\r\n\r\nWindows 10; \r\n\r\nJayDeBeApi 1.2.3;\r\n\r\nopenjdk version &quot;1.8.0_332&quot;\r\n\r\n  [1]: https://pypi.org/project/JayDeBeApi/\r\n  [2]: https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01776.1600/doc/html/san1357754910584.html\r\n\r\n","title":"jaydebeapi.connect always returning: &quot;TypeError: Class sajdbc4.jar is not found&quot;","body":"<p>I am trying to use the <a href=\"https://pypi.org/project/JayDeBeApi/\" rel=\"nofollow noreferrer\">jaydebeapi</a> python package to create a jdbc database connection, but no matter what argument I put in the <code>connect</code> method I get the same error: &quot;TypeError: Class [first_argurment_str] is not found&quot;</p>\n<pre><code>import jaydebeapi\n\nconn = jaydebeapi.connect('sajdbc4.jar', connectionString,[userName, Password])\n</code></pre>\n<p>I tried adding jar files to the directory, and referring directly to the paths in <code>$CLASSPATH</code> neither changed the error.</p>\n<p>Originally, I was trying to connect to a <a href=\"https://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc01776.1600/doc/html/san1357754910584.html\" rel=\"nofollow noreferrer\">Sybase</a> database, but I'd settle for anything at this point.</p>\n<p>Full Error Text:</p>\n<pre><code>    File &quot;H:\\Data-Sources\\Connection-Examples\\Sybase\\jayBeaOnly.py&quot;, line 2, in &lt;module&gt;\n    conn = jaydebeapi.connect(&quot;org.hsqldb.jdbcDriver&quot;,\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 412, in connect\n    jconn = _jdbc_connect(jclassname, url, driver_args, jars, libs)\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jaydebeapi\\__init__.py&quot;, line 221, in _jdbc_connect_jpype\njpype.JClass(jclassname)\n    File &quot;C:\\Users\\username\\AppData\\Roaming\\Python\\Python39\\site-packages\\jpype\\_jclass.py&quot;, line 99, in __new__\nreturn _jpype._getClass(jc)\n    TypeError: Class org.hsqldb.jdbcDriver is not found\n</code></pre>\n<p>python 3.9;</p>\n<p>Windows 10;</p>\n<p>JayDeBeApi 1.2.3;</p>\n<p>openjdk version &quot;1.8.0_332&quot;</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":3,"creation_date":1669042050,"post_id":74520539,"comment_id":131546674,"body_markdown":"`session.createQuery(&quot;FROM customers&quot;)` your entity is not called `customers` it is called `QLKH_DTO`","body":"<code>session.createQuery(&quot;FROM customers&quot;)</code> your entity is not called <code>customers</code> it is called <code>QLKH_DTO</code>"},{"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"score":0,"creation_date":1669042121,"post_id":74520539,"comment_id":131546708,"body_markdown":"The QLKH_DTO mapping to &quot;customers&quot; in database","body":"The QLKH_DTO mapping to &quot;customers&quot; in database"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1669042156,"post_id":74520539,"comment_id":131546724,"body_markdown":"Hibernate doesn&#39;t care about what its called in the database. It cares about your code","body":"Hibernate doesn&#39;t care about what its called in the database. It cares about your code"},{"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"score":0,"creation_date":1669042358,"post_id":74520539,"comment_id":131546818,"body_markdown":"oh thanks it work,such a dump question","body":"oh thanks it work,such a dump question"},{"owner":{"account_id":3193335,"reputation":111,"user_id":12420532,"display_name":"kvardekkvar"},"score":0,"creation_date":1686756115,"post_id":74520539,"comment_id":134843565,"body_markdown":"For those who google the error message: In my case, entity class wasn&#39;t added to session factory, like`.addAnnotatedClass(User.class)`","body":"For those who google the error message: In my case, entity class wasn&#39;t added to session factory, like<code>.addAnnotatedClass(User.class)</code>"}],"answers":[{"tags":[],"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"down_vote_count":1,"up_vote_count":9,"is_accepted":true,"score":8,"last_activity_date":1669213341,"creation_date":1669042631,"answer_id":74520843,"question_id":74520539,"body_markdown":"XtremeBauumer answered it in the comments:\r\n\r\n&gt; session.createQuery(&quot;FROM customers&quot;) your entity is not called customers it is called QLKH_DTO\r\n \r\n&gt; Hibernate doesn&#39;t care about what its called in the database. It cares about your code","title":"org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity","body":"<p>XtremeBauumer answered it in the comments:</p>\n<blockquote>\n<p>session.createQuery(&quot;FROM customers&quot;) your entity is not called customers it is called QLKH_DTO</p>\n</blockquote>\n<blockquote>\n<p>Hibernate doesn't care about what its called in the database. It cares about your code</p>\n</blockquote>\n"}],"owner":{"account_id":22634806,"reputation":117,"user_id":16811742,"display_name":"Ni No"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16767,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74520843,"answer_count":1,"score":1,"last_activity_date":1669213341,"creation_date":1669041208,"question_id":74520539,"body_markdown":"It work in another example but this one it not.I&#39;m copy code and edit line from line but it keep showing the error.i dont know what wrong with the QLKH_DTO class\r\nIm using netbean 15 and hibernate 6.\r\nThe entity class\r\n`\r\n```\r\n\r\npackage DTO;\r\n\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n\r\n@Entity\r\n@Table(name = &quot;customers&quot;, catalog = &quot;market&quot;)\r\n\r\npublic class QLKH_DTO implements java.io.Serializable {\r\n    private Integer CustomerID;\r\n    private String Password;\r\n    private String Fullname; \r\n    private String Address;\r\n    private String City;\r\n    \r\n    public QLKH_DTO(){}\r\n     public QLKH_DTO(String Password,String Fullname, String Address, String City) {\r\n        this.Password = Password;\r\n        this.Fullname = Fullname;\r\n        this.Address = Address;\r\n        this.City = City;\r\n    }\r\n     \r\n    @Id\r\n    @GeneratedValue(strategy =GenerationType.IDENTITY)\r\n    \r\n    @Column(name = &quot;CustomerID&quot;)\r\n    public Integer getCustomerID() {\r\n        return CustomerID;\r\n    }\r\n\r\n    public void setCustomerID(Integer CustomerID) {\r\n        this.CustomerID = CustomerID;\r\n    }\r\n    @Column(name = &quot;Password&quot;)\r\n    public String getPassword() {\r\n        return Password;\r\n    }\r\n\r\n    public void setPassword(String PassWord) {\r\n        this.Password = PassWord;\r\n    }\r\n    @Column(name = &quot;Fullname&quot;)\r\n    public String getFullname() {\r\n        return Fullname;\r\n    }\r\n\r\n    public void setFullname(String FullName) {\r\n        this.Fullname = FullName;\r\n    }\r\n    @Column(name = &quot;Address&quot;, length = 20)\r\n    public String getAddress() {\r\n        return Address;\r\n    }\r\n\r\n    public void setAddress(String Address) {\r\n        this.Address = Address;\r\n    }\r\n    @Column(name = &quot;City&quot;, length = 20)\r\n    public String getCity() {\r\n        return City;\r\n    }\r\n\r\n    public void setCity(String City) {\r\n        this.City = City;\r\n    }\r\n   \r\n}\r\n\r\n```\r\n`\r\nThe test class\r\n`\r\n```\r\n\r\npackage GUI.QLKH;\r\n\r\n\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n \r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\n \r\nimport DTO.QLKH_DTO;\r\nimport utils.HibernateUtil;\r\n \r\npublic class QLKH {\r\n    private static SessionFactory factory;\r\n \r\n    public static void main(String[] args) {\r\n        // get session factory\r\n        factory = HibernateUtil.getSessionFactory();\r\n \r\n        // create manageEmployee object\r\n        QLKH Customer = new QLKH();\r\n \r\n        \r\n        System.out.println(&quot;List down all the customers:&quot;);\r\n        Customer.listCustomers();\r\n}\r\n     public void listCustomers() {\r\n        Session session = factory.openSession();\r\n        try {\r\n            List customers = session.createQuery(&quot;FROM customers&quot;).list();\r\n            for (Iterator iterator = customers.iterator(); iterator.hasNext();) {\r\n                QLKH_DTO customer = (QLKH_DTO) iterator.next();\r\n                System.out.print(&quot;ID &quot; + customer.getCustomerID());\r\n                System.out.print(&quot;Password &quot; + customer.getPassword());\r\n                System.out.print(&quot;Fullname &quot; + customer.getFullname());\r\n                System.out.println(&quot;Address &quot; + customer.getAddress());\r\n                System.out.println(&quot;City &quot; + customer.getCity());\r\n            }\r\n        } catch (HibernateException e) {\r\n            \r\n        } finally {\r\n            session.close();\r\n        }\r\n    }}\r\n```\r\n`\r\n\r\nThe HibernateUtill Class\r\n`\r\n```\r\npackage utils;\r\n \r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.boot.Metadata;\r\nimport org.hibernate.boot.MetadataSources;\r\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\r\nimport org.hibernate.service.ServiceRegistry;\r\n \r\npublic class HibernateUtil {\r\n    private static final SessionFactory sessionFactory = buildSessionFactory();\r\n    public static SessionFactory buildSessionFactory() {\r\n        try {\r\n            ServiceRegistry serviceRegistry;\r\n            serviceRegistry = new StandardServiceRegistryBuilder()\r\n                    .configure()\r\n                    .build();\r\n            Metadata metadata = new MetadataSources(serviceRegistry)                                     \r\n                        .getMetadataBuilder().build();\r\n            return metadata.getSessionFactoryBuilder().build();\r\n        } catch (Throwable ex) {\r\n        }\r\n        return sessionFactory;\r\n    }\r\n    public static SessionFactory getSessionFactory() {\r\n        return sessionFactory;\r\n    }\r\n}\r\n```\r\n`\r\nThe hibernate.cfg.xml\r\n`\r\n```\r\n&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration SYSTEM \r\n&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n   &lt;session-factory&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.dialect&quot;&gt;\r\n         org.hibernate.dialect.MySQLDialect\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.driver_class&quot;&gt;\r\n         com.mysql.jdbc.Driver\r\n      &lt;/property&gt;\r\n\r\n      &lt;!-- Assume students is the database name --&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.url&quot;&gt;\r\n          jdbc:mysql://localhost:3306/market\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.username&quot;&gt;\r\n         root\r\n      &lt;/property&gt;\r\n   \r\n      &lt;property name = &quot;hibernate.connection.password&quot;&gt;\r\n         \r\n      &lt;/property&gt;\r\n    &lt;mapping class=&quot;DTO.QLKH_DTO&quot; /&gt;\r\n   &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n`\r\nThe sql\r\n`\r\n```\r\nCREATE TABLE `Customers` (\r\n  `CustomerID` int(10) NOT NULL auto_increment,\r\n  `Password` varchar(20) NOT NULL,\r\n  `Fullname` varchar(40) NOT NULL,\r\n  `Address` varchar(50) DEFAULT NULL,\r\n  `City` varchar(20) DEFAULT NULL,\r\n    PRIMARY KEY (CustomerID)\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\r\n\r\n--\r\n-- Dumping data for table `Customers`\r\n--\r\n\r\nINSERT INTO `Customers` (`CustomerID`, `Password`, `Fullname`, `Address`, `City`) VALUES\r\n(1, &#39;Abcd1234&#39;, &#39;John Smith&#39;, &#39;30 Broadway&#39;, &#39;London&#39;),\r\n(2, &#39;Abcd1234&#39;, &#39;Jonny English&#39;, &#39;99 River View&#39;, &#39;Reading&#39;),\r\n(3, &#39;Abcd1234&#39;, &#39;Elizabeth&#39;, &#39;23 Buckinghamshire&#39;, &#39;York&#39;),\r\n(4, &#39;Abcd1234&#39;, &#39;Beatrix&#39;, &#39;66 Royal Crescent&#39;, &#39;Bath&#39;);\r\n```\r\n`\r\nThe Error log\r\n`\r\n```\r\nNov 21, 2022 9:27:01 PM org.hibernate.Version logVersion\r\nINFO: HHH000412: Hibernate ORM core version 6.1.5.Final\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001005: Loaded JDBC driver class: com.mysql.jdbc.Driver\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:mysql://localhost:3306/market]\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001001: Connection properties: {password=****, user=root}\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\nINFO: HHH10001003: Autocommit mode: false\r\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\r\nINFO: HHH10001115: Connection pool size: 20 (min=1)\r\nNov 21, 2022 9:27:09 PM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\r\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\nNov 21, 2022 9:27:13 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\r\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\nList down all the customers:\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity &#39;customers&#39;\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\r\n\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:761)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:663)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:127)\r\n\tat GUI.QLKH.QLKH.listCustomers(QLKH.java:32)\r\n\tat GUI.QLKH.QLKH.main(QLKH.java:27)\r\nCaused by: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity &#39;customers&#39;\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:1628)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$RootEntityContext.accept(HqlParser.java:1873)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1548)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1539)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:833)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:629)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1218)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:623)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:243)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1131)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:399)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:358)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:285)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.lambda$createQuery$2(AbstractSharedSessionContract.java:748)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:745)\r\n\t... 4 more\r\nCommand execution failed.\r\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\r\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\r\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\r\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\r\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n```\r\n`\r\nIt look like the problem mostly in the entity class but i don&#39;t know where\r\nAnyhelp would be appreciate","title":"org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity","body":"<p>It work in another example but this one it not.I'm copy code and edit line from line but it keep showing the error.i dont know what wrong with the QLKH_DTO class\nIm using netbean 15 and hibernate 6.\nThe entity class\n`</p>\n<pre><code>\npackage DTO;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n\n@Entity\n@Table(name = &quot;customers&quot;, catalog = &quot;market&quot;)\n\npublic class QLKH_DTO implements java.io.Serializable {\n    private Integer CustomerID;\n    private String Password;\n    private String Fullname; \n    private String Address;\n    private String City;\n    \n    public QLKH_DTO(){}\n     public QLKH_DTO(String Password,String Fullname, String Address, String City) {\n        this.Password = Password;\n        this.Fullname = Fullname;\n        this.Address = Address;\n        this.City = City;\n    }\n     \n    @Id\n    @GeneratedValue(strategy =GenerationType.IDENTITY)\n    \n    @Column(name = &quot;CustomerID&quot;)\n    public Integer getCustomerID() {\n        return CustomerID;\n    }\n\n    public void setCustomerID(Integer CustomerID) {\n        this.CustomerID = CustomerID;\n    }\n    @Column(name = &quot;Password&quot;)\n    public String getPassword() {\n        return Password;\n    }\n\n    public void setPassword(String PassWord) {\n        this.Password = PassWord;\n    }\n    @Column(name = &quot;Fullname&quot;)\n    public String getFullname() {\n        return Fullname;\n    }\n\n    public void setFullname(String FullName) {\n        this.Fullname = FullName;\n    }\n    @Column(name = &quot;Address&quot;, length = 20)\n    public String getAddress() {\n        return Address;\n    }\n\n    public void setAddress(String Address) {\n        this.Address = Address;\n    }\n    @Column(name = &quot;City&quot;, length = 20)\n    public String getCity() {\n        return City;\n    }\n\n    public void setCity(String City) {\n        this.City = City;\n    }\n   \n}\n\n</code></pre>\n<p><code>The test class</code></p>\n<pre><code>\npackage GUI.QLKH;\n\n\nimport java.util.Iterator;\nimport java.util.List;\n \nimport org.hibernate.HibernateException;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\n \nimport DTO.QLKH_DTO;\nimport utils.HibernateUtil;\n \npublic class QLKH {\n    private static SessionFactory factory;\n \n    public static void main(String[] args) {\n        // get session factory\n        factory = HibernateUtil.getSessionFactory();\n \n        // create manageEmployee object\n        QLKH Customer = new QLKH();\n \n        \n        System.out.println(&quot;List down all the customers:&quot;);\n        Customer.listCustomers();\n}\n     public void listCustomers() {\n        Session session = factory.openSession();\n        try {\n            List customers = session.createQuery(&quot;FROM customers&quot;).list();\n            for (Iterator iterator = customers.iterator(); iterator.hasNext();) {\n                QLKH_DTO customer = (QLKH_DTO) iterator.next();\n                System.out.print(&quot;ID &quot; + customer.getCustomerID());\n                System.out.print(&quot;Password &quot; + customer.getPassword());\n                System.out.print(&quot;Fullname &quot; + customer.getFullname());\n                System.out.println(&quot;Address &quot; + customer.getAddress());\n                System.out.println(&quot;City &quot; + customer.getCity());\n            }\n        } catch (HibernateException e) {\n            \n        } finally {\n            session.close();\n        }\n    }}\n</code></pre>\n<p>`</p>\n<p>The HibernateUtill Class\n`</p>\n<pre><code>package utils;\n \nimport org.hibernate.SessionFactory;\nimport org.hibernate.boot.Metadata;\nimport org.hibernate.boot.MetadataSources;\nimport org.hibernate.boot.registry.StandardServiceRegistryBuilder;\nimport org.hibernate.service.ServiceRegistry;\n \npublic class HibernateUtil {\n    private static final SessionFactory sessionFactory = buildSessionFactory();\n    public static SessionFactory buildSessionFactory() {\n        try {\n            ServiceRegistry serviceRegistry;\n            serviceRegistry = new StandardServiceRegistryBuilder()\n                    .configure()\n                    .build();\n            Metadata metadata = new MetadataSources(serviceRegistry)                                     \n                        .getMetadataBuilder().build();\n            return metadata.getSessionFactoryBuilder().build();\n        } catch (Throwable ex) {\n        }\n        return sessionFactory;\n    }\n    public static SessionFactory getSessionFactory() {\n        return sessionFactory;\n    }\n}\n</code></pre>\n<p><code>The hibernate.cfg.xml</code></p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;utf-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration SYSTEM \n&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n   &lt;session-factory&gt;\n   \n      &lt;property name = &quot;hibernate.dialect&quot;&gt;\n         org.hibernate.dialect.MySQLDialect\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.driver_class&quot;&gt;\n         com.mysql.jdbc.Driver\n      &lt;/property&gt;\n\n      &lt;!-- Assume students is the database name --&gt;\n   \n      &lt;property name = &quot;hibernate.connection.url&quot;&gt;\n          jdbc:mysql://localhost:3306/market\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.username&quot;&gt;\n         root\n      &lt;/property&gt;\n   \n      &lt;property name = &quot;hibernate.connection.password&quot;&gt;\n         \n      &lt;/property&gt;\n    &lt;mapping class=&quot;DTO.QLKH_DTO&quot; /&gt;\n   &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><code>The sql</code></p>\n<pre><code>CREATE TABLE `Customers` (\n  `CustomerID` int(10) NOT NULL auto_increment,\n  `Password` varchar(20) NOT NULL,\n  `Fullname` varchar(40) NOT NULL,\n  `Address` varchar(50) DEFAULT NULL,\n  `City` varchar(20) DEFAULT NULL,\n    PRIMARY KEY (CustomerID)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n--\n-- Dumping data for table `Customers`\n--\n\nINSERT INTO `Customers` (`CustomerID`, `Password`, `Fullname`, `Address`, `City`) VALUES\n(1, 'Abcd1234', 'John Smith', '30 Broadway', 'London'),\n(2, 'Abcd1234', 'Jonny English', '99 River View', 'Reading'),\n(3, 'Abcd1234', 'Elizabeth', '23 Buckinghamshire', 'York'),\n(4, 'Abcd1234', 'Beatrix', '66 Royal Crescent', 'Bath');\n</code></pre>\n<p><code>The Error log</code></p>\n<pre><code>Nov 21, 2022 9:27:01 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate ORM core version 6.1.5.Final\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using built-in connection pool (not intended for production use)\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: Loaded JDBC driver class: com.mysql.jdbc.Driver\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001012: Connecting with JDBC URL [jdbc:mysql://localhost:3306/market]\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {password=****, user=root}\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nNov 21, 2022 9:27:07 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl$PooledConnections &lt;init&gt;\nINFO: HHH10001115: Connection pool size: 20 (min=1)\nNov 21, 2022 9:27:09 PM org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl logSelectedDialect\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\nNov 21, 2022 9:27:13 PM org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator initiateService\nINFO: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\nList down all the customers:\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity 'customers'\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:175)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:182)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:761)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:663)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:127)\n    at GUI.QLKH.QLKH.listCustomers(QLKH.java:32)\n    at GUI.QLKH.QLKH.main(QLKH.java:27)\nCaused by: org.hibernate.query.sqm.UnknownEntityException: Could not resolve root entity 'customers'\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:1628)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitRootEntity(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$RootEntityContext.accept(HqlParser.java:1873)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1548)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1539)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:833)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:629)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1218)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:623)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:243)\n    at org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1131)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:399)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:358)\n    at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:285)\n    at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:81)\n    at org.hibernate.internal.AbstractSharedSessionContract.lambda$createQuery$2(AbstractSharedSessionContract.java:748)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:745)\n    ... 4 more\nCommand execution failed.\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n    at org.apache.commons.exec.DefaultExecutor.executeInternal (DefaultExecutor.java:404)\n    at org.apache.commons.exec.DefaultExecutor.execute (DefaultExecutor.java:166)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:982)\n    at org.codehaus.mojo.exec.ExecMojo.executeCommandLine (ExecMojo.java:929)\n    at org.codehaus.mojo.exec.ExecMojo.execute (ExecMojo.java:457)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n</code></pre>\n<p>`\nIt look like the problem mostly in the entity class but i don't know where\nAnyhelp would be appreciate</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1694200203,"post_id":67691575,"comment_id":135864968,"body_markdown":"Anyone reading this today, I strongly believe _every bean_ should be in a`@Configuration` class. `@ComponentScan` is brittle and unclear. Move a component to a new package, for instance, and you may not notice the bean is no longer created. This can/will result in issues that only occur at runtime. If everything is in a configuration class, refactoring is safe. Any invalid package names will be caught by the compiler or your IDE will automatically update package names. Any non-trivial project should use `@Configuration`.","body":"Anyone reading this today, I strongly believe <i>every bean</i> should be in a<code>@Configuration</code> class. <code>@ComponentScan</code> is brittle and unclear. Move a component to a new package, for instance, and you may not notice the bean is no longer created. This can/will result in issues that only occur at runtime. If everything is in a configuration class, refactoring is safe. Any invalid package names will be caught by the compiler or your IDE will automatically update package names. Any non-trivial project should use <code>@Configuration</code>."}],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1621959143,"creation_date":1621959143,"answer_id":67691811,"question_id":67691575,"body_markdown":"&gt;What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?\r\n\r\nI think what you&#39;re asking is the difference between `@Bean` annotated methods, and annotating a `@Component` class. In this case, https://stackoverflow.com/questions/10604298/spring-component-versus-bean should really help clarify that. The main difference is `@Bean` allows you to decouple the bean definition from the class itself. Your class can be a simple POJO with no Spring annotation/code in it. It can also be a third-party class.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<blockquote>\n<p>What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?</p>\n</blockquote>\n<p>I think what you're asking is the difference between <code>@Bean</code> annotated methods, and annotating a <code>@Component</code> class. In this case, <a href=\"https://stackoverflow.com/questions/10604298/spring-component-versus-bean\">Spring: @Component versus @Bean</a> should really help clarify that. The main difference is <code>@Bean</code> allows you to decouple the bean definition from the class itself. Your class can be a simple POJO with no Spring annotation/code in it. It can also be a third-party class.</p>\n"},{"tags":[],"owner":{"account_id":10214167,"reputation":213,"user_id":7540379,"display_name":"Axella Geraldinc"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1622000348,"creation_date":1622000348,"answer_id":67698213,"question_id":67691575,"body_markdown":"I&#39;m answering based on my experience at work, so here it goes\r\n\r\n### @Configuration ###\r\nWhen you utilize a 3rd party library (most of the time we do) and we need to have that library as a singleton, then we declare it as bean using `@Bean` inside our `@Configuration`, because we can&#39;t annotate a 3rd party library using `@Component` right?\r\n\r\n### @Component (and other stereotype annotations) ###\r\nUsing this annotation make your codes more readable and simple. Because there are some cases that your class will have many dependencies, defining it using `@Bean` inside `@Configuration` class will need you to inject those dependencies &quot;manually&quot; one by one through -for example- constructor.\r\n\r\nIn my opinion, as long as you can achieve your objective by marking your class with `@Component` or other stereotype annotation, you should do that for the sake of readability and maintainability.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I'm answering based on my experience at work, so here it goes</p>\n<h3>@Configuration</h3>\n<p>When you utilize a 3rd party library (most of the time we do) and we need to have that library as a singleton, then we declare it as bean using <code>@Bean</code> inside our <code>@Configuration</code>, because we can't annotate a 3rd party library using <code>@Component</code> right?</p>\n<h3>@Component (and other stereotype annotations)</h3>\n<p>Using this annotation make your codes more readable and simple. Because there are some cases that your class will have many dependencies, defining it using <code>@Bean</code> inside <code>@Configuration</code> class will need you to inject those dependencies &quot;manually&quot; one by one through -for example- constructor.</p>\n<p>In my opinion, as long as you can achieve your objective by marking your class with <code>@Component</code> or other stereotype annotation, you should do that for the sake of readability and maintainability.</p>\n"},{"tags":[],"owner":{"account_id":14613517,"reputation":132,"user_id":10554317,"display_name":"Oleksandr  Bereziuk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622005547,"creation_date":1622001769,"answer_id":67698350,"question_id":67691575,"body_markdown":"Using @Configuration makes the project much more manageable - because you can always quickly refer to the one (or several) dedicated places to figure out the whole picture of dependencies between your beans, instead of hopping back and forth between classes marked with @Component-family annotations.\r\nIt is not a big difference for simple projects, but in case of complex projects and complex beans it helps a lot, especially when you have a non-trivial logic of instantiation. \r\n\r\nPlus, you might narrow component scan scope (so startup time) using a limited number of well-know configuration classes.\r\n\r\nAdditionally, @Component family beans most often are injected as @Autowired,\r\n**which is antipattern itself**, while @Configuration is dealing mostly with constructor injection\r\n\r\nShort, but very good related article:\r\nhttps://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>Using @Configuration makes the project much more manageable - because you can always quickly refer to the one (or several) dedicated places to figure out the whole picture of dependencies between your beans, instead of hopping back and forth between classes marked with @Component-family annotations.\nIt is not a big difference for simple projects, but in case of complex projects and complex beans it helps a lot, especially when you have a non-trivial logic of instantiation.</p>\n<p>Plus, you might narrow component scan scope (so startup time) using a limited number of well-know configuration classes.</p>\n<p>Additionally, @Component family beans most often are injected as @Autowired,\n<strong>which is antipattern itself</strong>, while @Configuration is dealing mostly with constructor injection</p>\n<p>Short, but very good related article:\n<a href=\"https://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly\" rel=\"nofollow noreferrer\">https://dzone.com/articles/spring-di-patterns-the-good-the-bad-and-the-ugly</a></p>\n"},{"tags":[],"owner":{"account_id":8343385,"reputation":409,"user_id":13387301,"display_name":"ropa8"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1622022523,"creation_date":1622003102,"answer_id":67698510,"question_id":67691575,"body_markdown":"I had the same question in my mind before and searched a lot about it. According to my searches and own experiences, I think below link can help you.\r\n\r\nhttps://www.javahabit.com/2018/12/30/spring-bean-vs-component/\r\n\r\n**Important parts of the link:**\r\n\r\nA simple way to decide between `@Component` and `@Bean` is that\r\n\r\n - if you want to use third-party classes or jar then use `@Bean`.\r\n - If you are writing your own classes for your application then use\r\n    Component.\r\n - If you want to use a third party class or jar that is not written\r\n   using Spring Component then use `@Bean`.\r\n\r\n\r\nHope to be helpful.","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I had the same question in my mind before and searched a lot about it. According to my searches and own experiences, I think below link can help you.</p>\n<p><a href=\"https://www.javahabit.com/2018/12/30/spring-bean-vs-component/\" rel=\"nofollow noreferrer\">https://www.javahabit.com/2018/12/30/spring-bean-vs-component/</a></p>\n<p><strong>Important parts of the link:</strong></p>\n<p>A simple way to decide between <code>@Component</code> and <code>@Bean</code> is that</p>\n<ul>\n<li>if you want to use third-party classes or jar then use <code>@Bean</code>.</li>\n<li>If you are writing your own classes for your application then use\nComponent.</li>\n<li>If you want to use a third party class or jar that is not written\nusing Spring Component then use <code>@Bean</code>.</li>\n</ul>\n<p>Hope to be helpful.</p>\n"},{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1669213300,"creation_date":1622004336,"answer_id":67698655,"question_id":67691575,"body_markdown":"### short answer\r\n\r\n- **@Component** in a java class is to tell to spring: Register me **automatically** at the startup in your context so any other class could use me using dependency injection: **@Autowire**\r\n- **@Configuration** and **@Bean** are used to add **manually** a java class to the spring context at the startup. Commonly @Bean is used when you can&#39;t annotate a class with some annotation. Sample: Libraries not compatible with spring, old libraries or just any class that requires more than a simple instantation.\r\n\r\n### long answer\r\n\r\nIn spring all is related to dependency injection. Spring allow us to register our awesome classes manually or automatically. \r\n\r\nSo if you have a java class (Foo.java) with an awesome method (doSomething) that you need to use in any part of your spring project and you want to avoid the manually instantation, you need to annotate this java class with **@Component**. \r\n\r\n    @Component\r\n    public class Foo {\r\n    ....\r\n    }\r\n\r\nAfter that you can use Foo.java in any class of you your spring project:\r\n\r\n    public class Bar { \r\n    ....\r\n    @Autowire\r\n    Foo foo;\r\n\r\n    public void hello( ) {\r\n      foo.doSomething\r\n    }\r\n\r\nBut if Foo.java is inside of a library, is not compatible with spring, is an old library or just a simple instantation is not enough, **@Configuration** and **@Bean** comes to rescue\r\n\r\n    @Configuration\r\n    public class Application { \r\n    ....\r\n    @Bean\r\n    public Foo configureFoo() {\r\n      //load some crazy configuration\r\n      //some crazy algorithm\r\n      return new Foo(crazyConfig, param1,param2,etc)\r\n    }\r\n\r\n","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<h3>short answer</h3>\n<ul>\n<li><strong>@Component</strong> in a java class is to tell to spring: Register me <strong>automatically</strong> at the startup in your context so any other class could use me using dependency injection: <strong>@Autowire</strong></li>\n<li><strong>@Configuration</strong> and <strong>@Bean</strong> are used to add <strong>manually</strong> a java class to the spring context at the startup. Commonly @Bean is used when you can't annotate a class with some annotation. Sample: Libraries not compatible with spring, old libraries or just any class that requires more than a simple instantation.</li>\n</ul>\n<h3>long answer</h3>\n<p>In spring all is related to dependency injection. Spring allow us to register our awesome classes manually or automatically.</p>\n<p>So if you have a java class (Foo.java) with an awesome method (doSomething) that you need to use in any part of your spring project and you want to avoid the manually instantation, you need to annotate this java class with <strong>@Component</strong>.</p>\n<pre><code>@Component\npublic class Foo {\n....\n}\n</code></pre>\n<p>After that you can use Foo.java in any class of you your spring project:</p>\n<pre><code>public class Bar { \n....\n@Autowire\nFoo foo;\n\npublic void hello( ) {\n  foo.doSomething\n}\n</code></pre>\n<p>But if Foo.java is inside of a library, is not compatible with spring, is an old library or just a simple instantation is not enough, <strong>@Configuration</strong> and <strong>@Bean</strong> comes to rescue</p>\n<pre><code>@Configuration\npublic class Application { \n....\n@Bean\npublic Foo configureFoo() {\n  //load some crazy configuration\n  //some crazy algorithm\n  return new Foo(crazyConfig, param1,param2,etc)\n}\n</code></pre>\n"}],"owner":{"account_id":19594795,"reputation":121,"user_id":14341091,"display_name":"Fredrik Folkesson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5476,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":67698655,"answer_count":5,"score":3,"last_activity_date":1669213300,"creation_date":1621958278,"question_id":67691575,"body_markdown":"I am trying to understand the Spring Framework better and my question is basically:\r\nWhat is the benefit of the @Configuration annotation compared to @Service/@Controller/@Repository (or @Component if it is none of the other 3)\r\n\r\nAs I understand the @Configuration is meant to be a source of beans, but by just marking my classes with for example @Service it becomes a bean and will be picked up by the component scanning?\r\n\r\nAs I understand it I could either have a @Configuration class that has methods that create a couple of beans (say some services) or just have the classes annotated with @Service directly.\r\n\r\nWhat would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?\r\n\r\nI read somewhere that the @Value annotation can be used in a @Configuration annotated class, but I can see in our codebase that we use it in other places, that are not @Configuration marked, so that does not seem to be required\r\n\r\nI&#39;ve been told there is a thread here:\r\nhttps://stackoverflow.com/questions/39174669/what-is-the-difference-between-configuration-and-component-in-spring\r\n\r\nBut I feel that it only starts explaining what the difference is between the annotations, not WHEN/What the benefit of using one over the other is.\r\n\r\nThanks!","title":"When should you use @Configuration instead of @Service/@Controller/@Component for defining beans","body":"<p>I am trying to understand the Spring Framework better and my question is basically:\nWhat is the benefit of the @Configuration annotation compared to @Service/@Controller/@Repository (or @Component if it is none of the other 3)</p>\n<p>As I understand the @Configuration is meant to be a source of beans, but by just marking my classes with for example @Service it becomes a bean and will be picked up by the component scanning?</p>\n<p>As I understand it I could either have a @Configuration class that has methods that create a couple of beans (say some services) or just have the classes annotated with @Service directly.</p>\n<p>What would be the benefit of having the @Configuration class? Or is the @Configuration mostly useful for some edge cases that I have missed?</p>\n<p>I read somewhere that the @Value annotation can be used in a @Configuration annotated class, but I can see in our codebase that we use it in other places, that are not @Configuration marked, so that does not seem to be required</p>\n<p>I've been told there is a thread here:\n<a href=\"https://stackoverflow.com/questions/39174669/what-is-the-difference-between-configuration-and-component-in-spring\">What is the difference between @Configuration and @Component in Spring?</a></p>\n<p>But I feel that it only starts explaining what the difference is between the annotations, not WHEN/What the benefit of using one over the other is.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","hibernate-validator"],"comments":[{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669194995,"post_id":74543673,"comment_id":131586976,"body_markdown":"I cannot see the  createUser method in UserService. Do you have it?","body":"I cannot see the  createUser method in UserService. Do you have it?"},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669197451,"post_id":74543673,"comment_id":131587902,"body_markdown":"@Tris hello yes  have. I wanted to write as short as possible, so I removed the unnecessary parts. I have now edited it again.","body":"@Tris hello yes  have. I wanted to write as short as possible, so I removed the unnecessary parts. I have now edited it again."},{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669201446,"post_id":74543673,"comment_id":131589307,"body_markdown":"I see that you are applying validation to User which is an entity object, did you try with the validation in DTO object UserRequestDTO which you actually get in REST layer. There is no point going to DAO layer if the request is not valid. The code which might be causing issue &#39;User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));&#39;","body":"I see that you are applying validation to User which is an entity object, did you try with the validation in DTO object UserRequestDTO which you actually get in REST layer. There is no point going to DAO layer if the request is not valid. The code which might be causing issue &#39;User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequ&zwnj;&#8203;estDTO));&#39;"},{"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"score":0,"creation_date":1669211849,"post_id":74543673,"comment_id":131593033,"body_markdown":"@Tris As you mentioned, the User object is in my Entity layer. However, I was getting UserDTO in the controller. \n\nFor this reason, since there was no control in UserDTO, &quot;Null&quot; was coming to the validation section when transferring data between layers.\n\nFor this reason, the program was giving Null error while running. \n\nI removed all annotations from the user entity class and transferred all validation annotations to &quot;userdto&quot;. \n\nThe problem was solved in this way.","body":"@Tris As you mentioned, the User object is in my Entity layer. However, I was getting UserDTO in the controller.   For this reason, since there was no control in UserDTO, &quot;Null&quot; was coming to the validation section when transferring data between layers.  For this reason, the program was giving Null error while running.   I removed all annotations from the user entity class and transferred all validation annotations to &quot;userdto&quot;.   The problem was solved in this way."}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669201678,"creation_date":1669199185,"answer_id":74545283,"question_id":74543673,"body_markdown":"It seems that the autowiring of your `UserService` does not work correctly which leads to a NPE when the validator tries to call the `findUserByUserEmail` on your `UserService`. Try the following validator:\r\n```java\r\n@Documented\r\n@Target(FIELD)\r\n@Retention(RUNTIME)\r\n@Constraint(validatedBy = UniqueEmail.Validator.class)\r\npublic @interface UniqueEmail {\r\n\r\n    String message() default &quot;There is already a user with this email!&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n    class Validator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n\r\n        @Autowired\r\n        private UserService userService;\r\n\r\n        @Override\r\n        public void initialize(UniqueEmail constraintAnnotation) {}\r\n\r\n        @Override\r\n        public boolean isValid(String email, ConstraintValidatorContext context) {\r\n            return value != null &amp;&amp; !userService.findUserByUserEmail(value);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nMake sure to define a `LocalValidatorFactoryBean` as well:\r\n```java\r\n@Configuration\r\npublic class ValidationConfiguration {\r\n\r\n    @Bean\r\n    @Primary\r\n    LocalValidatorFactoryBean localValidatorFactoryBean() {\r\n        return new LocalValidatorFactoryBean();\r\n    }\r\n\r\n}\r\n```\r\n\r\nFor me, this apporach worked at several places.\r\n\r\nBy the way, I strongly recommend using exists queries instead of find queries and then checking if the object is not null. With your way, you load the whole entity from the database just to check if it is present. It is much more performant if you let your JPA provider execute a SQL exists query instead. You can write exists queries in your repository as follows:\r\n```java\r\npublic interface UserRepository extends JpaRepository&lt;User,Long&gt; {\r\n\r\n   boolean existsByEmail(String email);\r\n\r\n   boolean existsByUsername(String email);\r\n\r\n}\r\n```\r\n\r\nFor more information check the [Spring Reference](https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#appendix.query.method.subject) or this [Baeldung article](https://www.baeldung.com/spring-data-exists-query).","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>It seems that the autowiring of your <code>UserService</code> does not work correctly which leads to a NPE when the validator tries to call the <code>findUserByUserEmail</code> on your <code>UserService</code>. Try the following validator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Documented\n@Target(FIELD)\n@Retention(RUNTIME)\n@Constraint(validatedBy = UniqueEmail.Validator.class)\npublic @interface UniqueEmail {\n\n    String message() default &quot;There is already a user with this email!&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    class Validator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n\n        @Autowired\n        private UserService userService;\n\n        @Override\n        public void initialize(UniqueEmail constraintAnnotation) {}\n\n        @Override\n        public boolean isValid(String email, ConstraintValidatorContext context) {\n            return value != null &amp;&amp; !userService.findUserByUserEmail(value);\n        }\n\n    }\n}\n</code></pre>\n<p>Make sure to define a <code>LocalValidatorFactoryBean</code> as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ValidationConfiguration {\n\n    @Bean\n    @Primary\n    LocalValidatorFactoryBean localValidatorFactoryBean() {\n        return new LocalValidatorFactoryBean();\n    }\n\n}\n</code></pre>\n<p>For me, this apporach worked at several places.</p>\n<p>By the way, I strongly recommend using exists queries instead of find queries and then checking if the object is not null. With your way, you load the whole entity from the database just to check if it is present. It is much more performant if you let your JPA provider execute a SQL exists query instead. You can write exists queries in your repository as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends JpaRepository&lt;User,Long&gt; {\n\n   boolean existsByEmail(String email);\n\n   boolean existsByUsername(String email);\n\n}\n</code></pre>\n<p>For more information check the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#appendix.query.method.subject\" rel=\"nofollow noreferrer\">Spring Reference</a> or this <a href=\"https://www.baeldung.com/spring-data-exists-query\" rel=\"nofollow noreferrer\">Baeldung article</a>.</p>\n"},{"tags":[],"owner":{"account_id":480584,"reputation":8226,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669203040,"creation_date":1669203040,"answer_id":74546085,"question_id":74543673,"body_markdown":"I created an example project based on your code fragments in your original post. \r\n\r\nBut I slightly changed the implementation of ConstraintValidator.\r\n\r\n```java\r\n@RequiredArgsConstructor\r\nclass UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n    private final UserAccountRepository userAccounts;\r\n\r\n    @Override\r\n    public void initialize(UniqueEmail constraintAnnotation) {\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String value, ConstraintValidatorContext context) {\r\n        if (StringUtils.hasText(value)) {\r\n            return !userAccounts.existsByEmail(value);\r\n        }\r\n\r\n        // empty or blank text, skip to use @NotBlank @NotEmpty to validate it.\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nAnd I added a simple test to verify it. \r\n\r\n```java\r\n@Test\r\npublic void testSaveUserAccount() throws Exception {\r\n        when(userAccounts.existsByEmail(anyString())).thenReturn(true);\r\n\r\n        var body = objectMapper.writeValueAsBytes(new CreateUserAccountCommand(&quot;foo@bar.com&quot;, &quot;test&quot;));\r\n        mockMvc.perform(post(&quot;/users&quot;).contentType(MediaType.APPLICATION_JSON).content(body))\r\n                .andExpect(status().isBadRequest());\r\n\r\n        verify(userAccounts, atLeastOnce()).existsByEmail(anyString());\r\n        verifyNoMoreInteractions(userAccounts);\r\n}\r\n```\r\n\r\nRun the tests in IDE, you can the constraints violations in the console like this.\r\n\r\n```bash\r\n[Field error in object &#39;createUserAccountCommand&#39; on field &#39;email&#39;: \r\nrejected value [foo@bar.com]; \r\ncodes [UniqueEmail.createUserAccountCommand.email,UniqueEmail.email,UniqueEmail.java.lang.String,UniqueEmail];\r\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [createUserAccountCommand.email,email]; \r\narguments []; default message [email]]; \r\ndefault message [There is already user with this email!]] ]\r\n```\r\n\r\nCheck [my example project](https://github.com/hantsy/spring-puzzles/tree/master/custom-validator) from my Github.","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>I created an example project based on your code fragments in your original post.</p>\n<p>But I slightly changed the implementation of ConstraintValidator.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\nclass UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n    private final UserAccountRepository userAccounts;\n\n    @Override\n    public void initialize(UniqueEmail constraintAnnotation) {\n    }\n\n    @Override\n    public boolean isValid(String value, ConstraintValidatorContext context) {\n        if (StringUtils.hasText(value)) {\n            return !userAccounts.existsByEmail(value);\n        }\n\n        // empty or blank text, skip to use @NotBlank @NotEmpty to validate it.\n        return true;\n    }\n}\n</code></pre>\n<p>And I added a simple test to verify it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testSaveUserAccount() throws Exception {\n        when(userAccounts.existsByEmail(anyString())).thenReturn(true);\n\n        var body = objectMapper.writeValueAsBytes(new CreateUserAccountCommand(&quot;foo@bar.com&quot;, &quot;test&quot;));\n        mockMvc.perform(post(&quot;/users&quot;).contentType(MediaType.APPLICATION_JSON).content(body))\n                .andExpect(status().isBadRequest());\n\n        verify(userAccounts, atLeastOnce()).existsByEmail(anyString());\n        verifyNoMoreInteractions(userAccounts);\n}\n</code></pre>\n<p>Run the tests in IDE, you can the constraints violations in the console like this.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[Field error in object 'createUserAccountCommand' on field 'email': \nrejected value [foo@bar.com]; \ncodes [UniqueEmail.createUserAccountCommand.email,UniqueEmail.email,UniqueEmail.java.lang.String,UniqueEmail];\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [createUserAccountCommand.email,email]; \narguments []; default message [email]]; \ndefault message [There is already user with this email!]] ]\n</code></pre>\n<p>Check <a href=\"https://github.com/hantsy/spring-puzzles/tree/master/custom-validator\" rel=\"nofollow noreferrer\">my example project</a> from my Github.</p>\n"},{"tags":[],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212186,"creation_date":1669212186,"answer_id":74548052,"question_id":74543673,"body_markdown":"Solution for my side \r\n\r\n have user entity class I removed all validation annotations from the pure entity class. \r\n\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @Table(name = &quot;users&quot;)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class User {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long userid;\r\n    \tprivate String username;\r\n    \tprivate String userDisplayName;\r\n    \tprivate String email;\r\n    \tprivate String password;\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\nUserDTO -&gt; I put all the properties related to validation in the DTO class and requested the DTO data from the client in the controller layer. \r\n\r\n\r\n\r\n    @Getter\r\n    @Setter\r\n    public class UserRequestDTO implements Serializable {\r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \t@Size(min = 2,max = 20)\r\n    \tprivate String username;\r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \t@Size(min = 2,max = 20)\r\n    \t@UsernameControl\r\n    \tprivate String email;\r\n    \r\n    \r\n    \r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \tprivate String userDisplayName;\r\n    \r\n    \t@Column\r\n    \t@NotNull\r\n    \t@NotEmpty\r\n    \tprivate String password;\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n**thanks to these 2 wonderful people for their ideas and for helping me solve the problem**:[Hantsy][1] and [Times][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/893898/hantsy\r\n  [2]: https://stackoverflow.com/users/5151202/times","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>Solution for my side</p>\n<p> have user entity class I removed all validation annotations from the pure entity class.</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;users&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long userid;\n    private String username;\n    private String userDisplayName;\n    private String email;\n    private String password;\n\n}\n</code></pre>\n<p>UserDTO -&gt; I put all the properties related to validation in the DTO class and requested the DTO data from the client in the controller layer.</p>\n<pre><code>@Getter\n@Setter\npublic class UserRequestDTO implements Serializable {\n\n\n    @NotNull\n    @NotEmpty\n    @Size(min = 2,max = 20)\n    private String username;\n\n\n    @NotNull\n    @NotEmpty\n    @Size(min = 2,max = 20)\n    @UsernameControl\n    private String email;\n\n\n\n    @NotNull\n    @NotEmpty\n    private String userDisplayName;\n\n    @Column\n    @NotNull\n    @NotEmpty\n    private String password;\n\n}\n</code></pre>\n<p><strong>thanks to these 2 wonderful people for their ideas and for helping me solve the problem</strong>:<a href=\"https://stackoverflow.com/users/893898/hantsy\">Hantsy</a> and <a href=\"https://stackoverflow.com/users/5151202/times\">Times</a></p>\n"}],"owner":{"account_id":19847496,"reputation":41,"user_id":14538782,"display_name":"smhylc"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2175,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74545283,"answer_count":3,"score":2,"last_activity_date":1669213264,"creation_date":1669191691,"question_id":74543673,"body_markdown":"I will try to explain it as simple as I can.  I have one entity class, one service, one repository. \r\n\r\n\r\n\r\nUser.class\r\n\r\n```java\r\n@NotNull\r\n@NotEmpty\r\n@UniqueEmail\r\nprivate String email;\r\n```\r\n\r\n\r\nUserRepo\r\n\r\n\r\n```java\r\npublic interface UserRepository extends JpaRepository&lt;User,Long&gt; {\r\n\r\n   boolean findByEmail(String email);\r\n\r\n}\r\n```\r\n\r\n\r\nUserService \r\n\r\n```java\r\n@Service\r\npublic class UserService {\r\n\r\n\tprivate final UserRepository userRepository;\r\n\r\n\tPasswordEncoder passwordEncoder;\r\n\r\n\tpublic UserService(UserRepository userRepository) {\r\n\t\tthis.userRepository = userRepository;\r\n\t\tthis.passwordEncoder = new BCryptPasswordEncoder();\r\n\r\n\t}\r\n\r\n\r\n\tpublic UserResponseDTO createUser(UserRequestDTO userRequestDTO){\r\n\t\tuserRequestDTO.setPassword(passwordEncoder.encode(userRequestDTO.getPassword()));\r\n\t\tUser u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));\r\n\t\treturn UserMapper.INSTANCE.toEntity(u);\r\n\t}\r\n\r\n\tpublic boolean findUserByUserName(String email){\r\n\r\n\t\tif(userRepository.findByUsername(email)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tpublic boolean findUserByUserEmail(String email){\r\n\r\n\t\tif(userRepository.findByEmail(email)){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nUserController\r\n\r\n\r\n```java\r\n@CrossOrigin\r\n@RestController\r\npublic class UserController {\r\n\r\n\r\n   private final String endPointName = &quot;api&quot;;\r\n\r\n\r\n   @Autowired\r\n   private UserService userService;\r\n\r\n\r\n   @ResponseStatus(HttpStatus.CREATED)\r\n   @PostMapping(path = endPointName+&quot;/addUser&quot;, consumes = &quot;application/json&quot;)\r\n   public GenericResponseMessage addUser(@Valid @RequestBody UserRequestDTO userRequestDTO){\r\n\r\n      userService.createUser(userRequestDTO);\r\n      return new GenericResponseMessage(&quot;ok&quot;);\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nValidator Annotation \r\n\r\n\r\n```java\r\n@Constraint(validatedBy = UniqueEmailValidator.class)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target({ ElementType.FIELD })\r\npublic @interface UniqueEmail {\r\n\r\n   public String message() default &quot;There is already user with this email!&quot;;\r\n\r\n   public Class&lt;?&gt;[] groups() default {};\r\n\r\n   public Class&lt;? extends Payload&gt;[] payload() default{};\r\n\r\n}\r\n```\r\n\r\nUniqueEmailValidator class \r\n\r\n\r\n```java\r\n@Component\r\npublic class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\r\n\r\n   @Autowired\r\n   private UserService userService;\r\n\r\n   @Override\r\n   public boolean isValid(String value, ConstraintValidatorContext context) {\r\n      return value != null &amp;&amp; !userService.findUserByUserEmail(value);\r\n   }\r\n\r\n}\r\n```\r\n\r\n**[API ERROR][1]**\r\n\r\n```json\r\n{\r\n     &quot;timestamp&quot;: &quot;2022-11-23T08:51:07.717+00:00&quot;,\r\n     &quot;status&quot;: 500,\r\n     &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n     &quot;trace&quot;: &quot;javax.validation.ValidationException: HV000028: Unexpected exception during isValid call.\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:186)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\\n\\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\\n\\tat bla bla bla&quot;,\r\n     &quot;message&quot;: &quot;HV000028: Unexpected exception during isValid call.&quot;,\r\n     &quot;path&quot;: &quot;/api/addUser&quot;\r\n}\r\n```\r\n\r\n\r\n\r\nINTELLIJ ERROR: \r\n\r\n\r\n    java.lang.NullPointerException: null\r\n\tat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:22) ~[main/:na]\r\n\tat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:13) ~[main/:na]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.preInsert(EntityIdentityInsertAction.java:188) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.5.jar:2.7.5]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.5.jar:2.7.5]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat com.sun.proxy.$Proxy109.save(Unknown Source) ~[na:na]\r\n\tat mywebapp.demowebapp.service.UserService.createUser(UserService.java:35) ~[main/:na]\r\n\tat mywebapp.demowebapp.controller.UserController.addUser(UserController.java:32) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\r\n\tat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n\r\n\r\n\r\nI added `@Component` annotation **but it did not work.**\r\n\r\nI edit and try `@Valid` annotation `@Valited` ***but it did not work***.\r\n\r\nI add\r\n\r\n&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot; \r\n\r\nin application.properties file. If I add this, **the error goes away but the &quot;validation&quot; in the whole system is disabled.**\r\n\r\n\r\nIf I remove\r\n\r\n**&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;** \r\n\r\nall validations like @NotNull, @NotEmpty, @Pattern etc are working except the annotation I created. \r\n\r\nBut if I add\r\n\r\n**&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;**\r\n\r\nall of them are disabled, and the data is entered into the database without any checks. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ue8N1.png","title":"ConstraintValidator is not working (how can I do it?)","body":"<p>I will try to explain it as simple as I can.  I have one entity class, one service, one repository.</p>\n<p>User.class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NotNull\n@NotEmpty\n@UniqueEmail\nprivate String email;\n</code></pre>\n<p>UserRepo</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends JpaRepository&lt;User,Long&gt; {\n\n   boolean findByEmail(String email);\n\n}\n</code></pre>\n<p>UserService</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserService {\n\n    private final UserRepository userRepository;\n\n    PasswordEncoder passwordEncoder;\n\n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n        this.passwordEncoder = new BCryptPasswordEncoder();\n\n    }\n\n\n    public UserResponseDTO createUser(UserRequestDTO userRequestDTO){\n        userRequestDTO.setPassword(passwordEncoder.encode(userRequestDTO.getPassword()));\n        User u = userRepository.save(UserMapper.INSTANCE.entityToDto(userRequestDTO));\n        return UserMapper.INSTANCE.toEntity(u);\n    }\n\n    public boolean findUserByUserName(String email){\n\n        if(userRepository.findByUsername(email)){\n            return true;\n        }\n\n        return false;\n\n    }\n\n    public boolean findUserByUserEmail(String email){\n\n        if(userRepository.findByEmail(email)){\n            return true;\n        }\n\n        return false;\n    }\n\n}\n</code></pre>\n<p>UserController</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin\n@RestController\npublic class UserController {\n\n\n   private final String endPointName = &quot;api&quot;;\n\n\n   @Autowired\n   private UserService userService;\n\n\n   @ResponseStatus(HttpStatus.CREATED)\n   @PostMapping(path = endPointName+&quot;/addUser&quot;, consumes = &quot;application/json&quot;)\n   public GenericResponseMessage addUser(@Valid @RequestBody UserRequestDTO userRequestDTO){\n\n      userService.createUser(userRequestDTO);\n      return new GenericResponseMessage(&quot;ok&quot;);\n\n   }\n\n}\n</code></pre>\n<p>Validator Annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Constraint(validatedBy = UniqueEmailValidator.class)\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ ElementType.FIELD })\npublic @interface UniqueEmail {\n\n   public String message() default &quot;There is already user with this email!&quot;;\n\n   public Class&lt;?&gt;[] groups() default {};\n\n   public Class&lt;? extends Payload&gt;[] payload() default{};\n\n}\n</code></pre>\n<p>UniqueEmailValidator class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class UniqueEmailValidator implements ConstraintValidator&lt;UniqueEmail, String&gt; {\n\n   @Autowired\n   private UserService userService;\n\n   @Override\n   public boolean isValid(String value, ConstraintValidatorContext context) {\n      return value != null &amp;&amp; !userService.findUserByUserEmail(value);\n   }\n\n}\n</code></pre>\n<p><strong><a href=\"https://i.stack.imgur.com/ue8N1.png\" rel=\"nofollow noreferrer\">API ERROR</a></strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n     &quot;timestamp&quot;: &quot;2022-11-23T08:51:07.717+00:00&quot;,\n     &quot;status&quot;: 500,\n     &quot;error&quot;: &quot;Internal Server Error&quot;,\n     &quot;trace&quot;: &quot;javax.validation.ValidationException: HV000028: Unexpected exception during isValid call.\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:186)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62)\\n\\tat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130)\\n\\tat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123)\\n\\tat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555)\\n\\tat bla bla bla&quot;,\n     &quot;message&quot;: &quot;HV000028: Unexpected exception during isValid call.&quot;,\n     &quot;path&quot;: &quot;/api/addUser&quot;\n}\n</code></pre>\n<p>INTELLIJ ERROR:</p>\n<pre><code>java.lang.NullPointerException: null\nat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:22) ~[main/:na]\nat mywebapp.demowebapp.constraint.UniqueEmailValidator.isValid(UniqueEmailValidator.java:13) ~[main/:na]\nat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateSingleConstraint(ConstraintTree.java:180) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.constraintvalidation.SimpleConstraintTree.validateConstraints(SimpleConstraintTree.java:62) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.constraintvalidation.ConstraintTree.validateConstraints(ConstraintTree.java:75) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.metadata.core.MetaConstraint.doValidateConstraint(MetaConstraint.java:130) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:123) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateMetaConstraint(ValidatorImpl.java:555) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForSingleDefaultGroupElement(ValidatorImpl.java:518) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:488) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:450) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:400) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:172) ~[hibernate-validator-6.2.5.Final.jar:6.2.5.Final]\nat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.validate(BeanValidationEventListener.java:116) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.cfg.beanvalidation.BeanValidationEventListener.onPreInsert(BeanValidationEventListener.java:80) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.action.internal.EntityIdentityInsertAction.preInsert(EntityIdentityInsertAction.java:188) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:78) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:317) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:330) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:123) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:185) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:128) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:55) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:756) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:742) ~[hibernate-core-5.6.12.Final.jar:5.6.12.Final]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311) ~[spring-orm-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy105.persist(Unknown Source) ~[na:na]\nat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:666) ~[spring-data-jpa-2.7.5.jar:2.7.5]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81) ~[spring-data-commons-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.7.5.jar:2.7.5]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.23.jar:5.3.23]\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.23.jar:5.3.23]\nat com.sun.proxy.$Proxy109.save(Unknown Source) ~[na:na]\nat mywebapp.demowebapp.service.UserService.createUser(UserService.java:35) ~[main/:na]\nat mywebapp.demowebapp.controller.UserController.addUser(UserController.java:32) ~[main/:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\nat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.68.jar:9.0.68]\nat java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\n</code></pre>\n<p>I added <code>@Component</code> annotation <strong>but it did not work.</strong></p>\n<p>I edit and try <code>@Valid</code> annotation <code>@Valited</code> <em><strong>but it did not work</strong></em>.</p>\n<p>I add</p>\n<p>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</p>\n<p>in application.properties file. If I add this, <strong>the error goes away but the &quot;validation&quot; in the whole system is disabled.</strong></p>\n<p>If I remove</p>\n<p><strong>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</strong></p>\n<p>all validations like @NotNull, @NotEmpty, @Pattern etc are working except the annotation I created.</p>\n<p>But if I add</p>\n<p><strong>&quot;spring.jpa.properties.javax.persistence.validation.mode = none&quot;</strong></p>\n<p>all of them are disabled, and the data is entered into the database without any checks.</p>\n"},{"tags":["java","hibernate","jpa","repository","persistence"],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669213256,"creation_date":1669213256,"answer_id":74548295,"question_id":74548182,"body_markdown":"You need to avoid making a call to repository.save() then. You can use JPA EnityManager.\r\n\r\n    list.forEach(item -&gt; entityManager.persist(item));","title":"Avoid select before update in Hibernate/Repository save - Java","body":"<p>You need to avoid making a call to repository.save() then. You can use JPA EnityManager.</p>\n<pre><code>list.forEach(item -&gt; entityManager.persist(item));\n</code></pre>\n"}],"owner":{"account_id":26470931,"reputation":41,"user_id":20111572,"display_name":"Matheus Hoffmann"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669213256,"creation_date":1669212717,"question_id":74548182,"body_markdown":"I already do a select in the database (oracle) before starting the process to have the data recovered.\r\n\r\nThen I see if it exists and assemble the objects according to the returned id.\r\n\r\nWhen doing the repository.save() of my list, I&#39;m doing a select before each update and I don&#39;t want that because it&#39;s taking too long to execute, because I already guaranteed initially with the select that the data is in the database.\r\n\r\nIs it possible for me to add some configuration that never selects before the update?\r\n\r\nI already tried using the @SelectBeforeUpdate(false) notation inside my entities, but it didn&#39;t make any difference.","title":"Avoid select before update in Hibernate/Repository save - Java","body":"<p>I already do a select in the database (oracle) before starting the process to have the data recovered.</p>\n<p>Then I see if it exists and assemble the objects according to the returned id.</p>\n<p>When doing the repository.save() of my list, I'm doing a select before each update and I don't want that because it's taking too long to execute, because I already guaranteed initially with the select that the data is in the database.</p>\n<p>Is it possible for me to add some configuration that never selects before the update?</p>\n<p>I already tried using the @SelectBeforeUpdate(false) notation inside my entities, but it didn't make any difference.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":4698323,"reputation":6170,"user_id":3802631,"accept_rate":86,"display_name":"Jan B."},"score":0,"creation_date":1485642672,"post_id":41915413,"comment_id":71012484,"body_markdown":"Following this logic you just need to increase the number of threads by ``n`` to reduce the total processing time by ``1/n``.","body":"Following this logic you just need to increase the number of threads by <code>n</code> to reduce the total processing time by <code>1&#47;n</code>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1485648806,"post_id":41915413,"comment_id":71014004,"body_markdown":"The network isn&#39;t multi-threaded. You can use as many threads as you like but once you saturate the network, that&#39;s it, no further improvement possible.","body":"The network isn&#39;t multi-threaded. You can use as many threads as you like but once you saturate the network, that&#39;s it, no further improvement possible."}],"answers":[{"tags":[],"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485641830,"creation_date":1485641830,"answer_id":41915454,"question_id":41915413,"body_markdown":"No, you shouldn&#39;t get x/5 seconds.  You are not thinking about the fact that you are getting 5 times the number of records in the same amount of time.  It&#39;s about throughput, not about time.","title":"Reading from Database through multiple threads in java","body":"<p>No, you shouldn't get x/5 seconds.  You are not thinking about the fact that you are getting 5 times the number of records in the same amount of time.  It's about throughput, not about time.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669213203,"creation_date":1485642182,"answer_id":41915500,"question_id":41915413,"body_markdown":"Your database presumably lies on a single disk; that disk is connected to a motherboard using a single data cable; if the database server is on a network, then it is connected to that network using a single network cable; so, there is just one path that all that data has to pass through before it can arrive at your different threads and be processed.\r\n\r\nThe result is, of course, bad performance.\r\n\r\nThe lesson to take home is this:\r\n\r\n&gt; Massive I/O from the same device can never be improved by multithreading.\r\n\r\nTo put it in different terms: parallelism never increases performance when the bottleneck is the transferring of the data, and all the data come from a single sequential source.\r\n\r\nIf you had 5 different databases stored on 5 different disks, that would work better.\r\n\r\nIf transferring the data was only taking half of the total time, and the other half of the time was consumed in doing computations with the data, then you would be able to halve the total time by desynchronizing the transferring from the processing, but that would require only 2 threads. (And halving the total time would be the best that you could achieve: more threads would not increase performance.)\r\n\r\n------------------\r\n\r\nAs for why reading 20 thousand records appears to perform almost as bad as reading 20 million records, I am not sure why this is happening, but it could be due to a silly implementation of the database system that you are using.\r\n\r\nWhat ***may*** be happening is that your database system is implementing the `offset` and `limit` clauses on the database driver, meaning that it implements them on the client instead of on the server. If this is in fact what is happening, then all 20 million records are being sent from the server to the client each time, and then the `offset` and `limit` clauses on the client throw most of them away and only give you the 20 thousand that you asked for.\r\n\r\nYou might think that you should be able to trick the system to work correctly by turning the query into a subquery nested inside another query, but my experience when I tried this a long time ago with some database system that I do not remember anymore is that it would result in an error saying that `offset` and `limit` cannot appear in a subquery, they must always appear in a top-level query.  (Precisely because the database driver needed to be able to do its incredibly counter-productive filtering on the client.)\r\n\r\nAnother approach would be to assign an incrementing unique integer id to each row which has no gaps in the numbering, so that you can `select ... where unique_id &gt;= start and unique_id &lt;= (start + 20000)` which will definitely be executed on the server rather than on the client.\r\n\r\nHowever, as I wrote above, this will probably not allow you to achieve any increase in performance by parallelizing things, because you will still have to wait for a total of 20 million rows to be transmitted from the server to the client, and it does not matter whether this is done in one go or in 1000 gos of 20 thousand rows each. You cannot have two stream of rows simultaneously flying down a single wire.\r\n","title":"Reading from Database through multiple threads in java","body":"<p>Your database presumably lies on a single disk; that disk is connected to a motherboard using a single data cable; if the database server is on a network, then it is connected to that network using a single network cable; so, there is just one path that all that data has to pass through before it can arrive at your different threads and be processed.</p>\n<p>The result is, of course, bad performance.</p>\n<p>The lesson to take home is this:</p>\n<blockquote>\n<p>Massive I/O from the same device can never be improved by multithreading.</p>\n</blockquote>\n<p>To put it in different terms: parallelism never increases performance when the bottleneck is the transferring of the data, and all the data come from a single sequential source.</p>\n<p>If you had 5 different databases stored on 5 different disks, that would work better.</p>\n<p>If transferring the data was only taking half of the total time, and the other half of the time was consumed in doing computations with the data, then you would be able to halve the total time by desynchronizing the transferring from the processing, but that would require only 2 threads. (And halving the total time would be the best that you could achieve: more threads would not increase performance.)</p>\n<hr />\n<p>As for why reading 20 thousand records appears to perform almost as bad as reading 20 million records, I am not sure why this is happening, but it could be due to a silly implementation of the database system that you are using.</p>\n<p>What <em><strong>may</strong></em> be happening is that your database system is implementing the <code>offset</code> and <code>limit</code> clauses on the database driver, meaning that it implements them on the client instead of on the server. If this is in fact what is happening, then all 20 million records are being sent from the server to the client each time, and then the <code>offset</code> and <code>limit</code> clauses on the client throw most of them away and only give you the 20 thousand that you asked for.</p>\n<p>You might think that you should be able to trick the system to work correctly by turning the query into a subquery nested inside another query, but my experience when I tried this a long time ago with some database system that I do not remember anymore is that it would result in an error saying that <code>offset</code> and <code>limit</code> cannot appear in a subquery, they must always appear in a top-level query.  (Precisely because the database driver needed to be able to do its incredibly counter-productive filtering on the client.)</p>\n<p>Another approach would be to assign an incrementing unique integer id to each row which has no gaps in the numbering, so that you can <code>select ... where unique_id &gt;= start and unique_id &lt;= (start + 20000)</code> which will definitely be executed on the server rather than on the client.</p>\n<p>However, as I wrote above, this will probably not allow you to achieve any increase in performance by parallelizing things, because you will still have to wait for a total of 20 million rows to be transmitted from the server to the client, and it does not matter whether this is done in one go or in 1000 gos of 20 thousand rows each. You cannot have two stream of rows simultaneously flying down a single wire.</p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485643208,"creation_date":1485642876,"answer_id":41915594,"question_id":41915413,"body_markdown":"I will not repeat what Mike Nakis says as it is true and well explained : \r\n\r\n&gt; I/O from a physical disk cannot be improved by multithreading\r\n\r\n\r\nNevertheless I would like to add something.\r\n\r\nWhen you execute a query like that :\r\n   \r\n     select * from tableName order by colname limit 20000 offset start*20000.\r\n\r\nfrom the client side you may handle the result of the query that you could improve by using multiple threads.&lt;br&gt;\r\n\r\nBut from the database side you have not the hand on the processing of the query and the Vertica database is probably designed to execute your query by performing parallel tasks according to the machine possibilities.&lt;br&gt;\r\n\r\nSo from the client side you may split the execution of your query in one, two or three parallel threads, it should not change many things finally as a professional database is designed to optimize the response time according to the number of requests it receives and machine possibilities.&lt;br&gt;\r\n\r\n\r\n","title":"Reading from Database through multiple threads in java","body":"<p>I will not repeat what Mike Nakis says as it is true and well explained : </p>\n\n<blockquote>\n  <p>I/O from a physical disk cannot be improved by multithreading</p>\n</blockquote>\n\n<p>Nevertheless I would like to add something.</p>\n\n<p>When you execute a query like that :</p>\n\n<pre><code> select * from tableName order by colname limit 20000 offset start*20000.\n</code></pre>\n\n<p>from the client side you may handle the result of the query that you could improve by using multiple threads.<br></p>\n\n<p>But from the database side you have not the hand on the processing of the query and the Vertica database is probably designed to execute your query by performing parallel tasks according to the machine possibilities.<br></p>\n\n<p>So from the client side you may split the execution of your query in one, two or three parallel threads, it should not change many things finally as a professional database is designed to optimize the response time according to the number of requests it receives and machine possibilities.<br></p>\n"},{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635949714,"creation_date":1635949714,"answer_id":69826633,"question_id":41915413,"body_markdown":"In my opinion, the following is a good solution.  It has worked for us to stream and process millions of records without much of a memory and processing overhead.\r\n```\r\nPreparedStatement pstmt = conn.prepareStatement(sql, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);\r\npstmt.setFetchSize(Integer.MIN_VALUE);\r\nResultSet rs = pstmt.executeQuery();\r\nwhile(rs.next()) {\r\n\t// Do the thing\r\n}\r\n```\r\nUsing `OFFSET x LIMIT 20000` will result in the same query being executed again and again.  For 20 million records and for 20K records per execution, the query will get executed 1000 times.\r\n`OFFSET 0 LIMIT 20000` will perform well, but `OFFSET 19980000 LIMIT 20000` itself will take a lot of time.  As the query will be executed fully and then from the top it will have to ignore 19980000 records and give the last 20000.\r\n\r\nBut using the `ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY` options and setting the fetch size to `Integer.MIN_VALUE` will result in the query being executed only ONCE and the records will be streamed in chunks, and can be processed in a single thread.","title":"Reading from Database through multiple threads in java","body":"<p>In my opinion, the following is a good solution.  It has worked for us to stream and process millions of records without much of a memory and processing overhead.</p>\n<pre><code>PreparedStatement pstmt = conn.prepareStatement(sql, ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY);\npstmt.setFetchSize(Integer.MIN_VALUE);\nResultSet rs = pstmt.executeQuery();\nwhile(rs.next()) {\n    // Do the thing\n}\n</code></pre>\n<p>Using <code>OFFSET x LIMIT 20000</code> will result in the same query being executed again and again.  For 20 million records and for 20K records per execution, the query will get executed 1000 times.\n<code>OFFSET 0 LIMIT 20000</code> will perform well, but <code>OFFSET 19980000 LIMIT 20000</code> itself will take a lot of time.  As the query will be executed fully and then from the top it will have to ignore 19980000 records and give the last 20000.</p>\n<p>But using the <code>ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY</code> options and setting the fetch size to <code>Integer.MIN_VALUE</code> will result in the query being executed only ONCE and the records will be streamed in chunks, and can be processed in a single thread.</p>\n"}],"owner":{"account_id":6943198,"reputation":19,"user_id":5328738,"display_name":"Parikh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4634,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1669213203,"creation_date":1485641534,"question_id":41915413,"body_markdown":"I am reading data from vertica database using multiple threads in java. \r\nI have around 20 million records and I am opening 5 different threads having select queries like this....\r\n\r\n    start = threadnum;\r\n\r\n    while (start*20000&lt;=totalRecords){\r\n\r\n        select * from tableName order by colname limit 20000 offset start*20000.\r\n\r\n        start +=5;\r\n\r\n    }\r\n\r\nThe above query assigns 20K distinct records to read from db to each thread.\r\nfor eg the first thread will read first 20k records then 20K records starting from 100 000 position,etc\r\n\r\nBut I am not getting performance improvement. In fact using a single thread if it takes x seconds to read 20 million records then it is taking almost x seconds for each thread to read from database.\r\nShouldn&#39;t there be some improvement from x seconds (was expecting x/5 seconds)?\r\n\r\nCan anybody pinpoint what is going wrong?","title":"Reading from Database through multiple threads in java","body":"<p>I am reading data from vertica database using multiple threads in java. \nI have around 20 million records and I am opening 5 different threads having select queries like this....</p>\n\n<pre><code>start = threadnum;\n\nwhile (start*20000&lt;=totalRecords){\n\n    select * from tableName order by colname limit 20000 offset start*20000.\n\n    start +=5;\n\n}\n</code></pre>\n\n<p>The above query assigns 20K distinct records to read from db to each thread.\nfor eg the first thread will read first 20k records then 20K records starting from 100 000 position,etc</p>\n\n<p>But I am not getting performance improvement. In fact using a single thread if it takes x seconds to read 20 million records then it is taking almost x seconds for each thread to read from database.\nShouldn't there be some improvement from x seconds (was expecting x/5 seconds)?</p>\n\n<p>Can anybody pinpoint what is going wrong?</p>\n"},{"tags":["java","algorithm","sorting","arraylist","comparator"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1669188504,"post_id":74543041,"comment_id":131585089,"body_markdown":"[This page](https://www.baeldung.com/java-8-comparator-comparing) has a pretty reasonable explanation of how to do this.","body":"<a href=\"https://www.baeldung.com/java-8-comparator-comparing\" rel=\"nofollow noreferrer\">This page</a> has a pretty reasonable explanation of how to do this."}],"answers":[{"tags":[],"owner":{"account_id":9596641,"reputation":873,"user_id":7125557,"display_name":"dimirsen Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669194532,"creation_date":1669194532,"answer_id":74544202,"question_id":74543041,"body_markdown":"Looks like you need to sort the array or list based on the modulus (the function Math.abs()).\r\n    \r\n        String[] ss = {&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;};\r\n        List&lt;String&gt; strings = Arrays.asList(ss);\r\n        Collections.sort(strings, new Comparator&lt;String&gt;() {\r\n            @Override\r\n            public int compare(String o1, String o2) {\r\n                int intA = Integer.parseInt(o1);\r\n                int intB = Integer.parseInt(o2);\r\n                return Integer.compare(Math.abs(intA), Math.abs(intB));\r\n            }\r\n        });\r\n    ","title":"How to sort items of List in ascending order of function in java?","body":"<p>Looks like you need to sort the array or list based on the modulus (the function Math.abs()).</p>\n<pre><code>    String[] ss = {&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;};\n    List&lt;String&gt; strings = Arrays.asList(ss);\n    Collections.sort(strings, new Comparator&lt;String&gt;() {\n        @Override\n        public int compare(String o1, String o2) {\n            int intA = Integer.parseInt(o1);\n            int intB = Integer.parseInt(o2);\n            return Integer.compare(Math.abs(intA), Math.abs(intB));\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23543440,"reputation":1,"user_id":17587281,"display_name":"DARA Solutions"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669213151,"creation_date":1669195824,"answer_id":74544490,"question_id":74543041,"body_markdown":"I resolved this by returning \r\n\r\n    return calculatedA &gt; calculatedB ? -1 : (calculatedA &lt; calculatedB) ? 1 : 0;\r\n\r\nand after I used Collections.sort():\r\n\r\n    public void sort(List&lt;String&gt; sourceList) {\r\n        Collections.sort(sourceList, new ListComparator());\r\n        Collections.reverse(sourceList);\r\n    }\r\n\r\nI tried to use this in order to get it in ascending order but it can&#39;t help:\r\n\r\n    return calculatedA &gt; calculatedB ? 1 : (calculatedA &lt; calculatedB) ? -1 : 0;\r\n    \r\nAny idea how to get it in ascending order, so that I don&#39;t use         `Collections.reverse(sourceList);` ?\r\n\r\n\r\n\r\n\r\n","title":"How to sort items of List in ascending order of function in java?","body":"<p>I resolved this by returning</p>\n<pre><code>return calculatedA &gt; calculatedB ? -1 : (calculatedA &lt; calculatedB) ? 1 : 0;\n</code></pre>\n<p>and after I used Collections.sort():</p>\n<pre><code>public void sort(List&lt;String&gt; sourceList) {\n    Collections.sort(sourceList, new ListComparator());\n    Collections.reverse(sourceList);\n}\n</code></pre>\n<p>I tried to use this in order to get it in ascending order but it can't help:</p>\n<pre><code>return calculatedA &gt; calculatedB ? 1 : (calculatedA &lt; calculatedB) ? -1 : 0;\n</code></pre>\n<p>Any idea how to get it in ascending order, so that I don't use         <code>Collections.reverse(sourceList);</code> ?</p>\n"}],"owner":{"account_id":23543440,"reputation":1,"user_id":17587281,"display_name":"DARA Solutions"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669213151,"creation_date":1669187997,"question_id":74543041,"body_markdown":"Input: \r\n```\r\n[&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;]\r\n```\r\nOutput: \r\n```\r\n[&quot;0&quot;, &quot;-5&quot;, &quot;9&quot;, &quot;-12&quot;, &quot;-20&quot;, &quot;20&quot;, &quot;37&quot;]\r\n```\r\n\r\nWhat logic should I use in order to get minimum of function result?\r\n\r\nI have a class with function which compares 2 items (int) and returns min of them: \r\n\r\n```\r\nclass ListComparator implements Comparator&lt;String&gt; {\r\n    @Override\r\n    public int compare(String a, String b) {\r\n        int intA = Integer.parseInt(a);\r\n        int intB = Integer.parseInt(b);\r\n        int calculatedA = calc(intA);\r\n        int calculatedB = calc(intB);\r\n        return (calculatedA &lt; calculatedB) ? intA : intB;\r\n    }\r\n\r\n    private int calc(int x) {\r\n        double form = Math.pow(5*x, 2) + 3;\r\n        int result = (int) form;\r\n        return result;\r\n    }\r\n}\r\n```\r\n\r\n```\r\n```\r\n","title":"How to sort items of List in ascending order of function in java?","body":"<p>Input:</p>\n<pre><code>[&quot;-5&quot;, &quot;-12&quot;, &quot;0&quot;, &quot;20&quot;, &quot;9&quot;, &quot;-20&quot;, &quot;37&quot;]\n</code></pre>\n<p>Output:</p>\n<pre><code>[&quot;0&quot;, &quot;-5&quot;, &quot;9&quot;, &quot;-12&quot;, &quot;-20&quot;, &quot;20&quot;, &quot;37&quot;]\n</code></pre>\n<p>What logic should I use in order to get minimum of function result?</p>\n<p>I have a class with function which compares 2 items (int) and returns min of them:</p>\n<pre><code>class ListComparator implements Comparator&lt;String&gt; {\n    @Override\n    public int compare(String a, String b) {\n        int intA = Integer.parseInt(a);\n        int intB = Integer.parseInt(b);\n        int calculatedA = calc(intA);\n        int calculatedB = calc(intB);\n        return (calculatedA &lt; calculatedB) ? intA : intB;\n    }\n\n    private int calc(int x) {\n        double form = Math.pow(5*x, 2) + 3;\n        int result = (int) form;\n        return result;\n    }\n}\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","postgresql","jpa","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":8069490,"reputation":1385,"user_id":6082685,"accept_rate":73,"display_name":"Geha"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1511645439,"creation_date":1511645439,"answer_id":47490701,"question_id":47490199,"body_markdown":"I&#39;ve found solution:\r\n\r\n    @Query(value = &quot;SELECT nextval(&#39;item_id_seq&#39;)&quot;, nativeQuery =\r\n                true)\r\n        Long getNextSeriesId();\r\n\r\nMy mistake was that I used oracle syntax instead of postgreSQL, which I am using.","title":"Getting next value from sequence with jpa repository in postgreSQL","body":"<p>I've found solution:</p>\n\n<pre><code>@Query(value = \"SELECT nextval('item_id_seq')\", nativeQuery =\n            true)\n    Long getNextSeriesId();\n</code></pre>\n\n<p>My mistake was that I used oracle syntax instead of postgreSQL, which I am using.</p>\n"}],"owner":{"account_id":8069490,"reputation":1385,"user_id":6082685,"accept_rate":73,"display_name":"Geha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19343,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":47490701,"answer_count":1,"score":10,"last_activity_date":1669213052,"creation_date":1511641446,"question_id":47490199,"body_markdown":"I&#39;ve seen the similar question, but in my situation it doesn&#39;t work.\r\nI need to get the next value of the sequence.\r\n\r\nModel class:\r\n    \r\n    @Entity\r\n    @Table(name = &quot;item&quot;)\r\n    public class Item {\r\n        @Id\r\n        @SequenceGenerator(name = &quot;id_seq&quot;, sequenceName = &quot;item_id_seq&quot;, allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;id_seq&quot;)\r\n        @Column(name = &quot;id&quot;, updatable = false)\r\n        protected Long id;\r\n    }\r\n\r\nJpa Repository:\r\n\r\n    public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\r\n        List&lt;Item&gt; findFirst10ByOrderByPublicationDateDesc();\r\n    \r\n        @Query(value = &quot;SELECT item_id_seq.nextval FROM item&quot;, nativeQuery = \r\n        true)\r\n        Long getNextSeriesId();\r\n    }\r\n\r\nI would appreciate any help.","title":"Getting next value from sequence with jpa repository in postgreSQL","body":"<p>I've seen the similar question, but in my situation it doesn't work.\nI need to get the next value of the sequence.</p>\n\n<p>Model class:</p>\n\n<pre><code>@Entity\n@Table(name = \"item\")\npublic class Item {\n    @Id\n    @SequenceGenerator(name = \"id_seq\", sequenceName = \"item_id_seq\", allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"id_seq\")\n    @Column(name = \"id\", updatable = false)\n    protected Long id;\n}\n</code></pre>\n\n<p>Jpa Repository:</p>\n\n<pre><code>public interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {\n    List&lt;Item&gt; findFirst10ByOrderByPublicationDateDesc();\n\n    @Query(value = \"SELECT item_id_seq.nextval FROM item\", nativeQuery = \n    true)\n    Long getNextSeriesId();\n}\n</code></pre>\n\n<p>I would appreciate any help.</p>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":88102,"reputation":9793,"user_id":243925,"accept_rate":93,"display_name":"Tony"},"score":0,"creation_date":1288088345,"post_id":4021739,"comment_id":4313463,"body_markdown":"From your description I understand you are storing expressions in a database table but are you looking for a parser to use in SQL or Java? Are the expressions, which are stored in the table, then used in a subsequent SQL query built by your Java code? Please add some more information as to how you are using these expressions, thanks.","body":"From your description I understand you are storing expressions in a database table but are you looking for a parser to use in SQL or Java? Are the expressions, which are stored in the table, then used in a subsequent SQL query built by your Java code? Please add some more information as to how you are using these expressions, thanks."},{"owner":{"account_id":65804,"reputation":591,"user_id":193404,"accept_rate":69,"display_name":"kane77"},"score":0,"creation_date":1288089850,"post_id":4021739,"comment_id":4313654,"body_markdown":"Yes, you&#39;re right, there is expression stored in db column and I also have some parsing and further processing of the expression in Java code. Currently the parsing is very simplistic and rules are hardcoded and rely on knowledge how expressions are constructed (in other part of code so for example it is hardcoded that &quot;SOME_PROPERTY=\\\\d+&quot; which would cause problem if it is changed to &quot;SOME_PROPERTY IN (1,2,3) which is legal in column). I&#39;d like to enhance it so that it&#39;d be able to parse more extensively.","body":"Yes, you&#39;re right, there is expression stored in db column and I also have some parsing and further processing of the expression in Java code. Currently the parsing is very simplistic and rules are hardcoded and rely on knowledge how expressions are constructed (in other part of code so for example it is hardcoded that &quot;SOME_PROPERTY=\\\\d+&quot; which would cause problem if it is changed to &quot;SOME_PROPERTY IN (1,2,3) which is legal in column). I&#39;d like to enhance it so that it&#39;d be able to parse more extensively."}],"answers":[{"tags":[],"owner":{"account_id":227660,"reputation":1,"user_id":489462,"display_name":"Tito"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1288221061,"creation_date":1288221061,"answer_id":4038464,"question_id":4021739,"body_markdown":"I don&#39;t know how you are developing your project. But if your are using hibernate you can use criteria queries. \r\n[Cirteria queries][1]\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html","title":"Parser for Expression Filter","body":"<p>I don't know how you are developing your project. But if your are using hibernate you can use criteria queries. \n<a href=\"http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html\" rel=\"nofollow\">Cirteria queries</a></p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212874,"creation_date":1661352379,"answer_id":73475210,"question_id":4021739,"body_markdown":"You could use [jOOQ&#39;s parser][1]. Given this requirement:\r\n\r\n&gt; It would totally suffice if it would return list of properties in expression and either value (in case of = operator) or list of all values (even if one property appears more than once in expression)\r\n\r\nYou could run this piece of code:\r\n\r\n```java\r\nMap&lt;Field&lt;?&gt;, List&lt;QueryPart&gt;&gt; result =\r\nDSL.using(SQLDialect.DEFAULT)\r\n   .parser()\r\n   // Parse the SQL string to a jOOQ expression tree\r\n   .parseCondition(\r\n       &quot;&quot;&quot;\r\n       (PROPERTY IN (&#39;foo&#39;, &#39;bar&#39;)\r\n           AND (PROPERTY IN (&#39;foo1&#39;, &#39;bar2&#39;) OR OTHER_PROPERTY IN (&#39;etc&#39;)))\r\n       &quot;&quot;&quot;)\r\n   // Traverse the jOOQ expression tree using Traversers and Collectors\r\n   // You can also traverse the tree using imperative APIs, of course\r\n   .$traverse(Traversers.collecting(\r\n       Collectors.filtering(p -&gt; p instanceof InList \r\n                              || p instanceof CompareCondition,\r\n           Collectors.groupingBy(p -&gt;\r\n                 p instanceof InList&lt;?&gt; i\r\n               ? i.$arg1()\r\n               : p instanceof CompareCondition&lt;?&gt; c\r\n               ? c.$arg1()\r\n               : null,\r\n               Collectors.mapping(p -&gt;\r\n                     p instanceof InList&lt;?&gt; i\r\n                   ? i.$arg2()\r\n                   : p instanceof CompareCondition&lt;?&gt; c\r\n                   ? c.$arg2()\r\n                   : null,\r\n                   Collectors.toList()\r\n               )\r\n           )\r\n       )\r\n   ));\r\nSystem.out.println(result);\r\n```\r\n\r\nIt produces this output:\r\n\r\n```none\r\n{PROPERTY=[&#39;foo&#39;, &#39;bar&#39;, &#39;foo1&#39;, &#39;bar2&#39;], OTHER_PROPERTY=[&#39;etc&#39;]}\r\n```\r\n\r\nNot sure if this exactly matches your requirements, but it should be straightforward to tweak the code accordingly\r\n\r\nDisclaimer: I work for the company behind jOOQ\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/","title":"Parser for Expression Filter","body":"<p>You could use <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/\" rel=\"nofollow noreferrer\">jOOQ's parser</a>. Given this requirement:</p>\n<blockquote>\n<p>It would totally suffice if it would return list of properties in expression and either value (in case of = operator) or list of all values (even if one property appears more than once in expression)</p>\n</blockquote>\n<p>You could run this piece of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Field&lt;?&gt;, List&lt;QueryPart&gt;&gt; result =\nDSL.using(SQLDialect.DEFAULT)\n   .parser()\n   // Parse the SQL string to a jOOQ expression tree\n   .parseCondition(\n       &quot;&quot;&quot;\n       (PROPERTY IN ('foo', 'bar')\n           AND (PROPERTY IN ('foo1', 'bar2') OR OTHER_PROPERTY IN ('etc')))\n       &quot;&quot;&quot;)\n   // Traverse the jOOQ expression tree using Traversers and Collectors\n   // You can also traverse the tree using imperative APIs, of course\n   .$traverse(Traversers.collecting(\n       Collectors.filtering(p -&gt; p instanceof InList \n                              || p instanceof CompareCondition,\n           Collectors.groupingBy(p -&gt;\n                 p instanceof InList&lt;?&gt; i\n               ? i.$arg1()\n               : p instanceof CompareCondition&lt;?&gt; c\n               ? c.$arg1()\n               : null,\n               Collectors.mapping(p -&gt;\n                     p instanceof InList&lt;?&gt; i\n                   ? i.$arg2()\n                   : p instanceof CompareCondition&lt;?&gt; c\n                   ? c.$arg2()\n                   : null,\n                   Collectors.toList()\n               )\n           )\n       )\n   ));\nSystem.out.println(result);\n</code></pre>\n<p>It produces this output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>{PROPERTY=['foo', 'bar', 'foo1', 'bar2'], OTHER_PROPERTY=['etc']}\n</code></pre>\n<p>Not sure if this exactly matches your requirements, but it should be straightforward to tweak the code accordingly</p>\n<p>Disclaimer: I work for the company behind jOOQ</p>\n"}],"owner":{"account_id":65804,"reputation":591,"user_id":193404,"accept_rate":69,"display_name":"kane77"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1024,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1669212874,"creation_date":1288080265,"question_id":4021739,"body_markdown":"I have table column with expression filter applied. Is there any existing parser that would allow me to parse this column? the column can contain simple conditions such as \r\n\r\n```sql\r\nPROPERTY = &#39;name&#39; AND PROPERTY2 = &#39;something else&#39;\r\n``` \r\n\r\n or more advanced like \r\n\r\n```sql\r\n(PROPERTY IN (&#39;foo&#39;, &#39;bar&#39;) \r\n  AND (PROPERTY IN (&#39;foo1&#39;, &#39;bar2&#39;) OR OTHER_PROPERTY IN (&#39;etc&#39;))\r\n``` \r\n \r\nIt would totally suffice if it would return list of properties in expression and either value (in case of = operator) or list of all values (even if one property appears more than once in expression). Is there such parser available or do I have to write it myself?","title":"Parser for Expression Filter","body":"<p>I have table column with expression filter applied. Is there any existing parser that would allow me to parse this column? the column can contain simple conditions such as</p>\n<pre class=\"lang-sql prettyprint-override\"><code>PROPERTY = 'name' AND PROPERTY2 = 'something else'\n</code></pre>\n<p>or more advanced like</p>\n<pre class=\"lang-sql prettyprint-override\"><code>(PROPERTY IN ('foo', 'bar') \n  AND (PROPERTY IN ('foo1', 'bar2') OR OTHER_PROPERTY IN ('etc'))\n</code></pre>\n<p>It would totally suffice if it would return list of properties in expression and either value (in case of = operator) or list of all values (even if one property appears more than once in expression). Is there such parser available or do I have to write it myself?</p>\n"},{"tags":["java","html","selenium-webdriver","webdriverwait","constraint-validation-api"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1553290025,"post_id":55307160,"comment_id":97344163,"body_markdown":"It&#39;s not a JS alert. If I remember correctly, it&#39;s a browser(Chrome)-specific warning message that you can&#39;t detect using Selenium.","body":"It&#39;s not a JS alert. If I remember correctly, it&#39;s a browser(Chrome)-specific warning message that you can&#39;t detect using Selenium."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553587923,"creation_date":1553587923,"answer_id":55352477,"question_id":55307160,"body_markdown":"The _HTML5 Constraint validation_ message is the outcome of [Constraint API&#39;s element.setCustomValidity()](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation#Controlling_the_text_of_constraints_violation) method.\r\n\r\n&gt;**Note**: HTML5 Constraint validation doesn&#39;t remove the need for validation on the server side. Even though far fewer invalid form requests are to be expected, invalid ones can still be sent by non-compliant browsers (for instance, browsers without HTML5 and without JavaScript) or by bad guys trying to trick your web application. Therefore, like with HTML4, you need to also validate input constraints on the server side, in a way that is consistent with what is done on the client side.\r\n\r\nSolution\r\n--------\r\nTo retrieve the text which results out from the `element.setCustomValidity()` method, you can use the following solution:\r\n\r\n- Code Block:\r\n\r\n\t\timport org.openqa.selenium.By;\r\n\t\timport org.openqa.selenium.WebDriver;\r\n\t\timport org.openqa.selenium.WebElement;\r\n\t\timport org.openqa.selenium.chrome.ChromeDriver;\r\n\t\timport org.openqa.selenium.chrome.ChromeOptions;\r\n\t\timport org.openqa.selenium.support.ui.ExpectedConditions;\r\n\t\timport org.openqa.selenium.support.ui.WebDriverWait;\r\n\r\n\t\tpublic class validationmessage {\r\n\r\n\t\t\tpublic static void main(String[] args) {\r\n\r\n\t\t\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Utility\\\\BrowserDrivers\\\\chromedriver.exe&quot;);\r\n\t\t\t\tChromeOptions options = new ChromeOptions();\r\n\t\t\t\toptions.addArguments(&quot;start-maximized&quot;);\r\n\t\t\t\toptions.addArguments(&quot;disable-infobars&quot;);\r\n\t\t\t\toptions.addArguments(&quot;--disable-extensions&quot;); \r\n\t\t\t\tWebDriver driver =  new ChromeDriver(options);\r\n\t\t\t\tdriver.get(&quot;http://132.148.19.159:8086/panel/#/login&quot;);\r\n\t\t\t\tWebElement username = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;input.form-control.ng-pristine.ng-invalid.ng-invalid-required.ng-touched[placeholder=&#39;Usuario&#39;]&quot;)));\r\n\t\t\t\tSystem.out.println(username.getAttribute(&quot;validationMessage&quot;));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n- Console Output:\r\n \r\n\t\tPlease fill out this field.","title":"How to validate html5 constraint validation message using Selenium-Webdriver and Java","body":"<p>The <em>HTML5 Constraint validation</em> message is the outcome of <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation#Controlling_the_text_of_constraints_violation\" rel=\"nofollow noreferrer\">Constraint API's element.setCustomValidity()</a> method.</p>\n\n<blockquote>\n  <p><strong>Note</strong>: HTML5 Constraint validation doesn't remove the need for validation on the server side. Even though far fewer invalid form requests are to be expected, invalid ones can still be sent by non-compliant browsers (for instance, browsers without HTML5 and without JavaScript) or by bad guys trying to trick your web application. Therefore, like with HTML4, you need to also validate input constraints on the server side, in a way that is consistent with what is done on the client side.</p>\n</blockquote>\n\n<h2>Solution</h2>\n\n<p>To retrieve the text which results out from the <code>element.setCustomValidity()</code> method, you can use the following solution:</p>\n\n<ul>\n<li><p>Code Block:</p>\n\n<pre><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class validationmessage {\n\n    public static void main(String[] args) {\n\n        System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\Utility\\\\BrowserDrivers\\\\chromedriver.exe\");\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(\"start-maximized\");\n        options.addArguments(\"disable-infobars\");\n        options.addArguments(\"--disable-extensions\"); \n        WebDriver driver =  new ChromeDriver(options);\n        driver.get(\"http://132.148.19.159:8086/panel/#/login\");\n        WebElement username = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(\"input.form-control.ng-pristine.ng-invalid.ng-invalid-required.ng-touched[placeholder='Usuario']\")));\n        System.out.println(username.getAttribute(\"validationMessage\"));\n    }\n}\n</code></pre></li>\n<li><p>Console Output:</p>\n\n<pre><code>Please fill out this field.\n</code></pre></li>\n</ul>\n"}],"owner":{"account_id":9828809,"reputation":21,"user_id":11064150,"display_name":"Victor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1669212600,"answer_count":1,"score":2,"last_activity_date":1669212861,"creation_date":1553285502,"question_id":55307160,"body_markdown":"How do I validate the following message? The required class has the floating message.: \r\n\r\n[![][1]][1]\r\n\r\ntry the following, but I get the error &quot;no such alert&quot;\r\n\r\n    package firsttestngpackage;\r\n    import org.openqa.selenium.Alert;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    import org.testng.Assert;\r\n    import org.testng.annotations.Test;\r\n\r\n    public class LoginBambu {\r\n  \t\r\n    public String baseUrl = &quot;http://132.148.19.159:8086/panel/#/login&quot;;\r\n    String driverPath = &quot;H:\\\\chromedriver.exe&quot;;\r\n    public WebDriver driver; \t\r\n\r\n    @Test\r\n    public void IniciarSesion() {\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, driverPath);\r\n    driver = new ChromeDriver();\r\n    driver.get(baseUrl);\r\n\t  \t  \r\n    WebElement login = driver.findElement(By.cssSelector(&quot;#page-top &gt; div.margen-panel-60.ng-scope &gt; div &gt; div.row.container-fluid.ng-scope &gt; div:nth-child(1) &gt; div &gt; form &gt; button&quot;));\r\n\t  login.click();\r\n\t  \r\n\t  String mensaje=driver.switchTo().alert().getText();\r\n\t  System.out.println(mensaje);\t  \r\n    }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CFye3.png","title":"How to validate html5 constraint validation message using Selenium-Webdriver and Java","body":"<p>How do I validate the following message? The required class has the floating message.: </p>\n\n<p><a href=\"https://i.stack.imgur.com/CFye3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CFye3.png\" alt=\"\"></a></p>\n\n<p>try the following, but I get the error \"no such alert\"</p>\n\n<pre><code>package firsttestngpackage;\nimport org.openqa.selenium.Alert;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\nimport org.testng.Assert;\nimport org.testng.annotations.Test;\n\npublic class LoginBambu {\n\npublic String baseUrl = \"http://132.148.19.159:8086/panel/#/login\";\nString driverPath = \"H:\\\\chromedriver.exe\";\npublic WebDriver driver;    \n\n@Test\npublic void IniciarSesion() {\nSystem.setProperty(\"webdriver.chrome.driver\", driverPath);\ndriver = new ChromeDriver();\ndriver.get(baseUrl);\n\nWebElement login = driver.findElement(By.cssSelector(\"#page-top &gt; div.margen-panel-60.ng-scope &gt; div &gt; div.row.container-fluid.ng-scope &gt; div:nth-child(1) &gt; div &gt; form &gt; button\"));\n  login.click();\n\n  String mensaje=driver.switchTo().alert().getText();\n  System.out.println(mensaje);    \n}\n}\n</code></pre>\n"},{"tags":["java","stored-procedures","jdbc","h2"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":1,"creation_date":1641456339,"post_id":70479900,"comment_id":124810264,"body_markdown":"You should post the error message as text, not as an image.","body":"You should post the error message as text, not as an image."}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641480814,"creation_date":1641422462,"answer_id":70600447,"question_id":70479900,"body_markdown":"The problem is that in H2 there are not explicit procedures or functions as you are trying defining.\r\n\r\nFor that purpose, H2 allows you to create used defined functions instead. Please, consider reed the appropriate [documentation](http://www.h2database.com/html/features.html#user_defined_functions).\r\n\r\nBasically, you create a user defined function by declaring an `ALIAS` for a bunch of Java code.\r\n\r\nFor example, in your use case, your `CREATE_PROCEDURE_INITPSEUDOS` could look similar to this:\r\n\r\n```\r\nCREATE ALIAS INIT_PSEUDOS AS  $$\r\nimport java.sql.Connection;\r\nimport java.sql.Statement;\r\nimport java.sql.SQLException;\r\n@CODE\r\nvoid init_pseudos(final Connection conn, final int maxPseudo) throws SQLException {\r\n  try (Statement stmt = conn.createStatement()) {\r\n    while (maxPseudo &gt;= 0) do {\r\n      stmt.execute(&quot;INSERT INTO Pseudos (indexPseudo)  VALUES (MaxPseudo);&quot;);\r\n      maxPseudo = maxPseudo - 1;\r\n    }\r\n  }\r\n}\r\n$$;\r\n```\r\n\r\nNote the following:\r\n\r\n - As I said, you define a user defined function as Java code. That Java code should be enclosed between two `$$` delimiters.\r\n - Although I included explicitly some imports, you can use any class in the `java.util` or `java.sql` packages in your code. If you want to included explicitly some imports, or if you require classes from other packages than the mentioned, the corresponding imports should be provided right after the first `$$` token. In addition, you need to include `@CODE` the signal H2 where your imports end and your actual Java method starts.\r\n - If you need a reference to a `Connection` to the database in your code, it should be the first argument of your method.\r\n - Prefer to raise and not hide exceptions: it will allow your transactions to be committed or rollbacked as a whole appropriately.\r\n\r\nYou can invoke such a function as usual:\r\n\r\n```\r\nCALL INIT_PSEUDOS (5);\r\n```\r\n\r\nPlease, provide the appropriate value for the `maxPseudo` argument.\r\n\r\nPlease, consider the provided code as just an example of use: you can improve the code in different ways, like using `PreparedStatement`s instead of `Statement`s for efficiency purposes, checking parameters for nullability, etcetera.","title":"JDBC with H2 and MySQL mode: create procedure fails","body":"<p>The problem is that in H2 there are not explicit procedures or functions as you are trying defining.</p>\n<p>For that purpose, H2 allows you to create used defined functions instead. Please, consider reed the appropriate <a href=\"http://www.h2database.com/html/features.html#user_defined_functions\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>Basically, you create a user defined function by declaring an <code>ALIAS</code> for a bunch of Java code.</p>\n<p>For example, in your use case, your <code>CREATE_PROCEDURE_INITPSEUDOS</code> could look similar to this:</p>\n<pre><code>CREATE ALIAS INIT_PSEUDOS AS  $$\nimport java.sql.Connection;\nimport java.sql.Statement;\nimport java.sql.SQLException;\n@CODE\nvoid init_pseudos(final Connection conn, final int maxPseudo) throws SQLException {\n  try (Statement stmt = conn.createStatement()) {\n    while (maxPseudo &gt;= 0) do {\n      stmt.execute(&quot;INSERT INTO Pseudos (indexPseudo)  VALUES (MaxPseudo);&quot;);\n      maxPseudo = maxPseudo - 1;\n    }\n  }\n}\n$$;\n</code></pre>\n<p>Note the following:</p>\n<ul>\n<li>As I said, you define a user defined function as Java code. That Java code should be enclosed between two <code>$$</code> delimiters.</li>\n<li>Although I included explicitly some imports, you can use any class in the <code>java.util</code> or <code>java.sql</code> packages in your code. If you want to included explicitly some imports, or if you require classes from other packages than the mentioned, the corresponding imports should be provided right after the first <code>$$</code> token. In addition, you need to include <code>@CODE</code> the signal H2 where your imports end and your actual Java method starts.</li>\n<li>If you need a reference to a <code>Connection</code> to the database in your code, it should be the first argument of your method.</li>\n<li>Prefer to raise and not hide exceptions: it will allow your transactions to be committed or rollbacked as a whole appropriately.</li>\n</ul>\n<p>You can invoke such a function as usual:</p>\n<pre><code>CALL INIT_PSEUDOS (5);\n</code></pre>\n<p>Please, provide the appropriate value for the <code>maxPseudo</code> argument.</p>\n<p>Please, consider the provided code as just an example of use: you can improve the code in different ways, like using <code>PreparedStatement</code>s instead of <code>Statement</code>s for efficiency purposes, checking parameters for nullability, etcetera.</p>\n"},{"tags":[],"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1641457705,"creation_date":1641457705,"answer_id":70604344,"question_id":70479900,"body_markdown":"The &quot;MySQL Compatibility Mode&quot; doesn&#39;t make H2 100% compatible with MySQL. It just changes a few things. The [documentation](http://www.h2database.com/html/features.html#compatibility) lists them:\r\n\r\n- Creating indexes in the CREATE TABLE statement is allowed using INDEX(..) or KEY(..). Example: create table test(id int primary key, name varchar(255), key idx_name(name));\r\n- When converting a floating point number to an integer, the fractional digits are not truncated, but the value is rounded.\r\n- ON DUPLICATE KEY UPDATE is supported in INSERT statements, due to this feature VALUES has special non-standard meaning is some contexts.\r\n- INSERT IGNORE is partially supported and may be used to skip rows with duplicate keys if ON DUPLICATE KEY UPDATE is not specified.\r\n- REPLACE INTO is partially supported.\r\n- Spaces are trimmed from the right side of CHAR values.\r\n- REGEXP_REPLACE() uses \\ for back-references.\r\n- Datetime value functions return the same value within a command.\r\n- 0x literals are parsed as binary string literals.\r\n- Unrelated expressions in ORDER BY clause of DISTINCT queries are allowed.\r\n- Some MySQL-specific ALTER TABLE commands are partially supported.\r\n- TRUNCATE TABLE restarts next values of generated columns.\r\n- If value of an identity column was manually specified, its sequence is updated to generate values after inserted.\r\n- NULL value works like DEFAULT value is assignments to identity columns.\r\n- Referential constraints don&#39;t require an existing primary key or unique constraint on referenced columns and create a unique constraint automatically if such constraint doesn&#39;t exist.\r\n- LIMIT / OFFSET clauses are supported.\r\n- AUTO_INCREMENT clause can be used.\r\n- YEAR data type is treated like SMALLINT data type.\r\n- GROUP BY clause can contain 1-based positions of expressions from the SELECT list.\r\n- Unsafe comparison operators between numeric and boolean values are allowed.\r\n\r\nThat&#39;s all. There is nothing about procedures. As @jccampanero pointed out in the other answer, you must use the syntax specific to H2 if you want to create stored procedures.\r\n","title":"JDBC with H2 and MySQL mode: create procedure fails","body":"<p>The &quot;MySQL Compatibility Mode&quot; doesn't make H2 100% compatible with MySQL. It just changes a few things. The <a href=\"http://www.h2database.com/html/features.html#compatibility\" rel=\"nofollow noreferrer\">documentation</a> lists them:</p>\n<ul>\n<li>Creating indexes in the CREATE TABLE statement is allowed using INDEX(..) or KEY(..). Example: create table test(id int primary key, name varchar(255), key idx_name(name));</li>\n<li>When converting a floating point number to an integer, the fractional digits are not truncated, but the value is rounded.</li>\n<li>ON DUPLICATE KEY UPDATE is supported in INSERT statements, due to this feature VALUES has special non-standard meaning is some contexts.</li>\n<li>INSERT IGNORE is partially supported and may be used to skip rows with duplicate keys if ON DUPLICATE KEY UPDATE is not specified.</li>\n<li>REPLACE INTO is partially supported.</li>\n<li>Spaces are trimmed from the right side of CHAR values.</li>\n<li>REGEXP_REPLACE() uses \\ for back-references.</li>\n<li>Datetime value functions return the same value within a command.</li>\n<li>0x literals are parsed as binary string literals.</li>\n<li>Unrelated expressions in ORDER BY clause of DISTINCT queries are allowed.</li>\n<li>Some MySQL-specific ALTER TABLE commands are partially supported.</li>\n<li>TRUNCATE TABLE restarts next values of generated columns.</li>\n<li>If value of an identity column was manually specified, its sequence is updated to generate values after inserted.</li>\n<li>NULL value works like DEFAULT value is assignments to identity columns.</li>\n<li>Referential constraints don't require an existing primary key or unique constraint on referenced columns and create a unique constraint automatically if such constraint doesn't exist.</li>\n<li>LIMIT / OFFSET clauses are supported.</li>\n<li>AUTO_INCREMENT clause can be used.</li>\n<li>YEAR data type is treated like SMALLINT data type.</li>\n<li>GROUP BY clause can contain 1-based positions of expressions from the SELECT list.</li>\n<li>Unsafe comparison operators between numeric and boolean values are allowed.</li>\n</ul>\n<p>That's all. There is nothing about procedures. As @jccampanero pointed out in the other answer, you must use the syntax specific to H2 if you want to create stored procedures.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669212817,"creation_date":1661353645,"answer_id":73475568,"question_id":70479900,"body_markdown":"### Using H2 as a test database product\r\n\r\nHistorically, H2 has been used a lot as a test replacement for the actual production database product. But this means you&#39;re limiting yourself to the least common denominator between H2 and MySQL, in your case. Including, as others pointed out, the lack of support for stored procedures. You could re-implement all the stored procedures in H2 (very tedious and error prone), or, you could just use [testcontainers][1] and run actual integration tests on MySQL directly.\r\n\r\nI really think that using H2 as an integration test database is an outdated concept [as I&#39;ve shown in this blog post][2] (unless you&#39;re also using H2 in production). You&#39;ll be much happier developing and testing everything against MySQL directly!\r\n\r\n### Using recursive SQL instead\r\n\r\nYou don&#39;t really need that procedure, I think? You probably wrote it to avoid too many round trips to the database for that loop. But you could batch the inserts or generate the following recursive SQL:\r\n\r\n```sql\r\nINSERT INTO Pseudos (indexPseudo)\r\nWITH RECURSIVE\r\n  p (i) AS (\r\n    SELECT MaxPseudo\r\n    UNION ALL\r\n    SELECT i - 1 FROM p WHERE i &gt;= 0\r\n  )\r\nSELECT i FROM p;\r\n```\r\n\r\nNow there&#39;s no more need to place this in a procedure, you can run the query directly.\r\n\r\n### Translating your procedure to H2\r\n\r\nJust to be complete, for translation of simple procedural logic, [jOOQ would offer the feature transparently][3]. [You can try it online, here][4]. It&#39;s probably overkill, I recommend the other approaches, but perhaps worth a try.\r\n\r\nDisclaimer: I work for the company behind jOOQ.\r\n\r\n\r\n\r\n  [1]: https://testcontainers.org\r\n  [2]: https://blog.jooq.org/using-h2-as-a-test-database-product/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-execution/parsing-connection/\r\n  [4]: https://www.jooq.org/translate/","title":"JDBC with H2 and MySQL mode: create procedure fails","body":"<h3>Using H2 as a test database product</h3>\n<p>Historically, H2 has been used a lot as a test replacement for the actual production database product. But this means you're limiting yourself to the least common denominator between H2 and MySQL, in your case. Including, as others pointed out, the lack of support for stored procedures. You could re-implement all the stored procedures in H2 (very tedious and error prone), or, you could just use <a href=\"https://testcontainers.org\" rel=\"nofollow noreferrer\">testcontainers</a> and run actual integration tests on MySQL directly.</p>\n<p>I really think that using H2 as an integration test database is an outdated concept <a href=\"https://blog.jooq.org/using-h2-as-a-test-database-product/\" rel=\"nofollow noreferrer\">as I've shown in this blog post</a> (unless you're also using H2 in production). You'll be much happier developing and testing everything against MySQL directly!</p>\n<h3>Using recursive SQL instead</h3>\n<p>You don't really need that procedure, I think? You probably wrote it to avoid too many round trips to the database for that loop. But you could batch the inserts or generate the following recursive SQL:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO Pseudos (indexPseudo)\nWITH RECURSIVE\n  p (i) AS (\n    SELECT MaxPseudo\n    UNION ALL\n    SELECT i - 1 FROM p WHERE i &gt;= 0\n  )\nSELECT i FROM p;\n</code></pre>\n<p>Now there's no more need to place this in a procedure, you can run the query directly.</p>\n<h3>Translating your procedure to H2</h3>\n<p>Just to be complete, for translation of simple procedural logic, <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/parsing-connection/\" rel=\"nofollow noreferrer\">jOOQ would offer the feature transparently</a>. <a href=\"https://www.jooq.org/translate/\" rel=\"nofollow noreferrer\">You can try it online, here</a>. It's probably overkill, I recommend the other approaches, but perhaps worth a try.</p>\n<p>Disclaimer: I work for the company behind jOOQ.</p>\n"}],"owner":{"account_id":20683611,"reputation":1177,"user_id":15186569,"display_name":"ThrowsError"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1223,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70604344,"answer_count":3,"score":4,"last_activity_date":1669212817,"creation_date":1640433862,"question_id":70479900,"body_markdown":"# Description of code\r\n\r\n## Database connection\r\n\r\nI try to to store Java object locally database without use external database.\r\nFor this I use JDBC with H2 via Hibernate :\r\n\r\n```Java\r\n    /**\r\n     * @param connection the connection to set\r\n     */\r\n    public static void setConnectionHibernate() {\r\n        Properties connectionProps = new Properties();\r\n        connectionProps.put(&quot;user&quot;, &quot;sa&quot;);\r\n        try {\r\n            Class.forName(&quot;org.h2.Driver&quot;);\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n        url = &quot;jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MODE=MySQL;&quot;;\r\n    }\r\n ```\r\n\r\n## Query\r\n\r\nI store the PROCEDURE in String with this code :\r\n\r\n```Java\r\n    static final String CREATE_PROCEDURE_INITPSEUDOS = &quot;CREATE OR REPLACE PROCEDURE init_pseudos (MaxPseudo INT) BEGIN WHILE MaxPseudo &gt;= 0 DO&quot;\r\n            +\r\n            &quot; INSERT INTO Pseudos (indexPseudo)&quot; +\r\n            &quot; VALUES (MaxPseudo);&quot; +\r\n            &quot; SET MaxPseudo = MaxPseudo - 1;&quot; +\r\n            &quot; END WHILE;&quot; +\r\n            &quot; END init_pseudos;&quot;;\r\n```\r\n\r\n## Query execution\r\n\r\nAnd I execute the statement with this code :\r\n\r\n```Java\r\n    public static void initBaseDonneePseudos() {\r\n        try (Connection connection = DriverManager.getConnection(url, connectionProps);\r\n                Statement stmt = connection.createStatement()) {\r\n            stmt.execute(RequetesSQL.CREATE_TABLE_PSEUDOS);\r\n            stmt.execute(RequetesSQL.CREATE_PROCEDURE_INITPSEUDOS);\r\n            stmt.execute(RequetesSQL.CREATE_FUNCTION_RECUPEREPSEUDO);\r\n            stmt.execute(RequetesSQL.INIT_TABLE_PSEUDOS);\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\n# Problem\r\n\r\n## Test\r\n\r\nI execute this test to test statement :\r\n\r\n```Java\r\n    @Nested\r\n    class BaseDonneeInteractionTest {\r\n\r\n        @BeforeEach\r\n        public void setUp() {\r\n            BaseDonnee.setConnectionHibernate();\r\n        }\r\n\r\n        @Test\r\n        void testInitBaseDonnee() {\r\n            assertDoesNotThrow(() -&gt; BaseDonnee.initBaseDonneePseudos());\r\n        }\r\n\r\n    }\r\n```\r\n\r\n## Error\r\n\r\nBut I obtain this error\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5MU1x.png\r\n\r\nI didn&#39;t find the problem of the query, anybody have the solution to solve this ?","title":"JDBC with H2 and MySQL mode: create procedure fails","body":"<h1>Description of code</h1>\n<h2>Database connection</h2>\n<p>I try to to store Java object locally database without use external database.\nFor this I use JDBC with H2 via Hibernate :</p>\n<pre><code>    /**\n     * @param connection the connection to set\n     */\n    public static void setConnectionHibernate() {\n        Properties connectionProps = new Properties();\n        connectionProps.put(&quot;user&quot;, &quot;sa&quot;);\n        try {\n            Class.forName(&quot;org.h2.Driver&quot;);\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        }\n        url = &quot;jdbc:h2:mem:db1;DB_CLOSE_DELAY=-1;MODE=MySQL;&quot;;\n    }\n</code></pre>\n<h2>Query</h2>\n<p>I store the PROCEDURE in String with this code :</p>\n<pre><code>    static final String CREATE_PROCEDURE_INITPSEUDOS = &quot;CREATE OR REPLACE PROCEDURE init_pseudos (MaxPseudo INT) BEGIN WHILE MaxPseudo &gt;= 0 DO&quot;\n            +\n            &quot; INSERT INTO Pseudos (indexPseudo)&quot; +\n            &quot; VALUES (MaxPseudo);&quot; +\n            &quot; SET MaxPseudo = MaxPseudo - 1;&quot; +\n            &quot; END WHILE;&quot; +\n            &quot; END init_pseudos;&quot;;\n</code></pre>\n<h2>Query execution</h2>\n<p>And I execute the statement with this code :</p>\n<pre><code>    public static void initBaseDonneePseudos() {\n        try (Connection connection = DriverManager.getConnection(url, connectionProps);\n                Statement stmt = connection.createStatement()) {\n            stmt.execute(RequetesSQL.CREATE_TABLE_PSEUDOS);\n            stmt.execute(RequetesSQL.CREATE_PROCEDURE_INITPSEUDOS);\n            stmt.execute(RequetesSQL.CREATE_FUNCTION_RECUPEREPSEUDO);\n            stmt.execute(RequetesSQL.INIT_TABLE_PSEUDOS);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<h1>Problem</h1>\n<h2>Test</h2>\n<p>I execute this test to test statement :</p>\n<pre><code>    @Nested\n    class BaseDonneeInteractionTest {\n\n        @BeforeEach\n        public void setUp() {\n            BaseDonnee.setConnectionHibernate();\n        }\n\n        @Test\n        void testInitBaseDonnee() {\n            assertDoesNotThrow(() -&gt; BaseDonnee.initBaseDonneePseudos());\n        }\n\n    }\n</code></pre>\n<h2>Error</h2>\n<p>But I obtain this error</p>\n<p><a href=\"https://i.stack.imgur.com/5MU1x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5MU1x.png\" alt=\"enter image description here\" /></a></p>\n<p>I didn't find the problem of the query, anybody have the solution to solve this ?</p>\n"},{"tags":["java","exit-code","runtime.exec","errorlevel"],"comments":[{"owner":{"account_id":178640,"reputation":9194,"user_id":410747,"accept_rate":85,"display_name":"netbrain"},"score":0,"creation_date":1326958449,"post_id":8922485,"comment_id":11163361,"body_markdown":"have you tried escaping %? e.g \\%errprlevel\\%","body":"have you tried escaping %? e.g \\%errprlevel\\%"}],"answers":[{"tags":[],"owner":{"account_id":260060,"reputation":712,"user_id":543405,"display_name":"Markus Eisele"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326958537,"creation_date":1326958537,"answer_id":8922510,"question_id":8922485,"body_markdown":"you are looking for this:\r\n\r\nSystem.getenv(&quot;errorlevel&quot;);\r\n\r\nThanks,\r\nM","title":"How to execute echo %errorlevel% in java","body":"<p>you are looking for this:</p>\n\n<p>System.getenv(\"errorlevel\");</p>\n\n<p>Thanks,\nM</p>\n"},{"tags":[],"owner":{"account_id":439254,"reputation":10081,"user_id":828077,"accept_rate":62,"display_name":"Rajesh Pantula"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326958537,"creation_date":1326958537,"answer_id":8922511,"question_id":8922485,"body_markdown":"if You are trying to get &quot;errorlevel&quot; environment variable, you can use System.getenv() \r\n\r\n\r\n    String errorlevel = System.getenv(&quot;errorlevel&quot;);\r\n\r\nBut the above method is deprecated and it is advisable to use\r\n\r\n\r\n    String errorlevel = System.getProperty(&quot;errorlevel&quot;);","title":"How to execute echo %errorlevel% in java","body":"<p>if You are trying to get \"errorlevel\" environment variable, you can use System.getenv() </p>\n\n<pre><code>String errorlevel = System.getenv(\"errorlevel\");\n</code></pre>\n\n<p>But the above method is deprecated and it is advisable to use</p>\n\n<pre><code>String errorlevel = System.getProperty(\"errorlevel\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":937694,"reputation":1753,"user_id":966314,"accept_rate":60,"display_name":"Husain Basrawala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1326958851,"creation_date":1326958851,"answer_id":8922553,"question_id":8922485,"body_markdown":"Not sure what are you using this for. But it seems that you want exit code of the command you executed in you program.\r\nIf you have `Process` object (corresponding to your command) available, you can either use `process.waitFor()` or `process.exitValue()` methods to get the exit code of your process.","title":"How to execute echo %errorlevel% in java","body":"<p>Not sure what are you using this for. But it seems that you want exit code of the command you executed in you program.\nIf you have <code>Process</code> object (corresponding to your command) available, you can either use <code>process.waitFor()</code> or <code>process.exitValue()</code> methods to get the exit code of your process.</p>\n"},{"tags":[],"owner":{"account_id":307410,"reputation":2571,"user_id":618685,"accept_rate":86,"display_name":"jkj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326958987,"creation_date":1326958987,"answer_id":8922576,"question_id":8922485,"body_markdown":"    Process process = Runtime.exec(original_command);\r\n    int exitCode = process.waitFor();\r\n    System.out.println(&quot;Command returned &quot; + exitCode);","title":"How to execute echo %errorlevel% in java","body":"<pre><code>Process process = Runtime.exec(original_command);\nint exitCode = process.waitFor();\nSystem.out.println(\"Command returned \" + exitCode);\n</code></pre>\n"}],"owner":{"account_id":931382,"reputation":4561,"user_id":961215,"accept_rate":71,"display_name":"Abhishek_Mishra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3323,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":8922553,"answer_count":4,"score":1,"last_activity_date":1669212783,"creation_date":1326958342,"question_id":8922485,"body_markdown":"I want to read the return code of a `cmd` command in Java. For that I used:\r\n\r\n    Runtime.exec(&quot;echo %errorlevel%&quot;)\r\n\r\nbut instead of echoing the error code it is echoing `%errorlevel%`.\r\n","title":"How to execute echo %errorlevel% in java","body":"<p>I want to read the return code of a <code>cmd</code> command in Java. For that I used:</p>\n<pre><code>Runtime.exec(&quot;echo %errorlevel%&quot;)\n</code></pre>\n<p>but instead of echoing the error code it is echoing <code>%errorlevel%</code>.</p>\n"},{"tags":["java","c#","ubuntu","named-pipes","plc"],"comments":[{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":1,"creation_date":1669170305,"post_id":74541011,"comment_id":131581955,"body_markdown":"`\\\\\\\\.\\\\pipe\\\\pipename` is a thing on Windows, which has named pipes in a different namespace. Obviously you&#39;ll need to use the Linux named pipe if you&#39;re on Linux. Not to mention the trailing space may give you trouble. Also never use paths that way, always use [verbatim string](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/strings/#verbatim-string-literals) like `@&quot;\\\\.\\pipe\\pipename&quot;` or raw string literal like `&quot;&quot;&quot;&lt;newline&gt;\\\\.\\pipe\\pipename&lt;newline&gt;&quot;&quot;&quot;` for readability","body":"<code>\\\\\\\\.\\\\pipe\\\\pipename</code> is a thing on Windows, which has named pipes in a different namespace. Obviously you&#39;ll need to use the Linux named pipe if you&#39;re on Linux. Not to mention the trailing space may give you trouble. Also never use paths that way, always use <a href=\"https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/strings/#verbatim-string-literals\" rel=\"nofollow noreferrer\">verbatim string</a> like <code>@&quot;\\\\.\\pipe\\pipename&quot;</code> or raw string literal like <code>&quot;&quot;&quot;&lt;newline&gt;\\\\.\\pipe\\pipename&lt;newline&gt;&quot;&quot;&quot;</code> for readability"},{"owner":{"account_id":2428490,"reputation":13926,"user_id":2119941,"display_name":"Hrvoje"},"score":0,"creation_date":1669180921,"post_id":74541011,"comment_id":131583498,"body_markdown":"@phuclv space is error. I just use &quot;@pipename&quot; in windows that pipe ends up in \\\\.\\pipe\\pipename on Windows as you said but where do I find it when I build that and deploy on Linux?","body":"@phuclv space is error. I just use &quot;@pipename&quot; in windows that pipe ends up in \\\\.\\pipe\\pipename on Windows as you said but where do I find it when I build that and deploy on Linux?"},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1669188103,"post_id":74541011,"comment_id":131584984,"body_markdown":"on Linux everything is just files, including special files like sockets or named pipes. So you can just create the pipe file anywhere, typically /tmp","body":"on Linux everything is just files, including special files like sockets or named pipes. So you can just create the pipe file anywhere, typically /tmp"},{"owner":{"account_id":2428490,"reputation":13926,"user_id":2119941,"display_name":"Hrvoje"},"score":0,"creation_date":1669190966,"post_id":74541011,"comment_id":131585736,"body_markdown":"@phuclv I know that but this is Windows .NET app built for linux-64, I got to find pipe which this process is creating on Ubuntu. See my edit - I manage to find all processes that are writting something in Ubuntu. I see references to pipe files but don&#39;t know which is right one to use with Java...","body":"@phuclv I know that but this is Windows .NET app built for linux-64, I got to find pipe which this process is creating on Ubuntu. See my edit - I manage to find all processes that are writting something in Ubuntu. I see references to pipe files but don&#39;t know which is right one to use with Java..."},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1669212601,"post_id":74541011,"comment_id":131593337,"body_markdown":".NET Core is a cross-platform framework. So it&#39;s not *Windows .NET* but **.NET** only. Those file descriptors have nothing to do with &quot;writing process&quot;, they&#39;re simply files that the process is opening. You said the test client is working but what are they? How do they work","body":".NET Core is a cross-platform framework. So it&#39;s not <i>Windows .NET</i> but <b>.NET</b> only. Those file descriptors have nothing to do with &quot;writing process&quot;, they&#39;re simply files that the process is opening. You said the test client is working but what are they? How do they work"},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1669212842,"post_id":74541011,"comment_id":131593435,"body_markdown":"`which one is the pipe` who knows? You&#39;re the one who created the pipe with the server, why don&#39;t you know its name? You must have a name when you create the pipe, exactly like when you create any other files","body":"<code>which one is the pipe</code> who knows? You&#39;re the one who created the pipe with the server, why don&#39;t you know its name? You must have a name when you create the pipe, exactly like when you create any other files"},{"owner":{"account_id":1475,"reputation":533764,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1669213537,"post_id":74541011,"comment_id":131593742,"body_markdown":".NET named pipes are apparently implemented via sockets for Linux (rather than via named pipes, which are a related but distinct concept in POSIX); see https://github.com/dotnet/runtime/issues/14633. So in your Java application you&#39;ll want to use sockets rather than file IO. Or I guess you could try to read the socket FD as a file in Java but I have no idea whether/how that would work.","body":".NET named pipes are apparently implemented via sockets for Linux (rather than via named pipes, which are a related but distinct concept in POSIX); see <a href=\"https://github.com/dotnet/runtime/issues/14633\" rel=\"nofollow noreferrer\">github.com/dotnet/runtime/issues/14633</a>. So in your Java application you&#39;ll want to use sockets rather than file IO. Or I guess you could try to read the socket FD as a file in Java but I have no idea whether/how that would work."},{"owner":{"account_id":2428490,"reputation":13926,"user_id":2119941,"display_name":"Hrvoje"},"score":0,"creation_date":1669256755,"post_id":74541011,"comment_id":131605298,"body_markdown":"Thank you @KonradRudolph , that gives answers to a lot of the issues we where facing.","body":"Thank you @KonradRudolph , that gives answers to a lot of the issues we where facing."}],"owner":{"account_id":2428490,"reputation":13926,"user_id":2119941,"display_name":"Hrvoje"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669212782,"creation_date":1669169235,"question_id":74541011,"body_markdown":"I&#39;ve built a PLC server and test client for linux-x64 in Visual Studio with \r\nhttps://github.com/S7NetPlus/s7netplus\r\n\r\nAll run OK on Ubuntu 22.04. The PLC server created a named pipe which I have to write to with the Java app.\r\n\r\nSo the Java app will only have to write &quot;1&quot; to this existing named pipe. Nothing else. I&#39;m using something like:\r\n\r\n    RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\pipename &quot;, &quot;rw&quot;);\r\n                    short sVal = 1;\r\n                    pipe.write((byte) sVal);\r\n\r\nBut the server is not changing status of pipename when writing from Java.\r\n\r\nI googled all over ,thread like [this][1] and similar but for starters I&#39;m unable to locate where this named pipe lives in my Ubuntu?\r\nSo this part is troubling me `&quot;\\\\\\\\.\\\\pipe\\\\pipename &quot;`\r\nThis is probably incorrect but I don&#39;t understand how to find and reference named pipe in Java.\r\n\r\nThe pipe is definitely existing on Ubuntu since the PLC server and test client are working OK.\r\n\r\n**EDIT**\r\n\r\nSo when running PLC server I can find all processes to which the server process is writing. The server process is implementing 2 pipes:\r\n\r\n    userjo@UBUNTU-VM:~$ sudo ls -l /proc/428576/fd\r\n    total 0\r\n    lrwx------ 1 root root 64 stu  23 08:56 0 -&gt; /dev/pts/6\r\n    lrwx------ 1 root root 64 stu  23 08:56 1 -&gt; /dev/pts/6\r\n    lrwx------ 1 root root 64 stu  23 08:58 10 -&gt; &#39;socket:[85449454]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 12 -&gt; &#39;pipe:[85449455]&#39;\r\n    l-wx------ 1 root root 64 stu  23 08:58 13 -&gt; &#39;pipe:[85449455]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 14 -&gt; /home/userjo/plc/plcserver/userjoplcserver.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 15 -&gt; /home/userjo/plc/plcserver/userjoplcserver.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 16 -&gt; /home/userjo/plc/plcserver/System.Runtime.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 17 -&gt; /home/userjo/plc/plcserver/System.Console.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 18 -&gt; /home/userjo/plc/plcserver/System.Threading.Thread.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 19 -&gt; /home/userjo/plc/plcserver/System.Threading.Tasks.dll\r\n    lrwx------ 1 root root 64 stu  23 08:56 2 -&gt; /dev/pts/6\r\n    lr-x------ 1 root root 64 stu  23 08:58 20 -&gt; /home/userjo/plc/plcserver/System.Runtime.Extensions.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 21 -&gt; /home/userjo/plc/plcserver/System.Threading.dll\r\n    lrwx------ 1 root root 64 stu  23 08:58 22 -&gt; /dev/pts/6\r\n    lr-x------ 1 root root 64 stu  23 08:58 23 -&gt; /home/userjo/plc/plcserver/System.Collections.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 24 -&gt; /home/userjo/plc/plcserver/System.Text.Encoding.Extensions.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 25 -&gt; /dev/urandom\r\n    lr-x------ 1 root root 64 stu  23 08:58 26 -&gt; /home/userjo/plc/plcserver/S7.Net.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 27 -&gt; /home/userjo/plc/plcserver/System.IO.Pipes.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 28 -&gt; /home/userjo/plc/plcserver/System.Net.Sockets.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 29 -&gt; /home/userjo/plc/plcserver/S7.Net.dll\r\n    lr-x------ 1 root root 64 stu  23 08:56 3 -&gt; &#39;pipe:[85449450]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 30 -&gt; /home/userjo/plc/plcserver/netstandard.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 31 -&gt; /home/userjo/plc/plcserver/System.Net.Primitives.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 32 -&gt; /home/userjo/plc/plcserver/Microsoft.Win32.Primitives.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 33 -&gt; /home/userjo/plc/plcserver/System.Diagnostics.Tracing.dll\r\n    lrwx------ 1 root root 64 stu  23 08:58 34 -&gt; &#39;socket:[85448469]&#39;\r\n    lrwx------ 1 root root 64 stu  23 08:58 35 -&gt; &#39;socket:[85452277]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 36 -&gt; /home/userjo/plc/plcserver/System.Memory.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 37 -&gt; /home/userjo/plc/plcserver/System.Threading.ThreadPool.dll\r\n    lr-x------ 1 root root 64 stu  23 08:58 38 -&gt; /home/userjo/plc/plcserver/System.Collections.Concurrent.dll\r\n    lrwx------ 1 root root 64 stu  23 08:58 39 -&gt; &#39;anon_inode:[eventpoll]&#39;\r\n    l-wx------ 1 root root 64 stu  23 08:58 4 -&gt; &#39;pipe:[85449450]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 40 -&gt; &#39;pipe:[85452278]&#39;\r\n    l-wx------ 1 root root 64 stu  23 08:58 41 -&gt; &#39;pipe:[85452278]&#39;\r\n    lrwx------ 1 root root 64 stu  23 08:58 42 -&gt; &#39;socket:[85454101]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 43 -&gt; /home/userjo/plc/plcserver/System.Runtime.InteropServices.dll\r\n    lrwx------ 1 root root 64 stu  23 08:58 44 -&gt; &#39;socket:[85449498]&#39;\r\n    lrwx------ 1 root root 64 stu  23 08:58 45 -&gt; &#39;socket:[85452306]&#39;\r\n    lr-x------ 1 root root 64 stu  23 08:58 46 -&gt; &#39;pipe:[85453000]&#39;\r\n    l-wx------ 1 root root 64 stu  23 08:58 47 -&gt; &#39;pipe:[85453000]&#39;\r\n    lrwx------ 1 root root 64 stu  23 08:56 5 -&gt; /dev/pts/6\r\n    lrwx------ 1 root root 64 stu  23 08:58 6 -&gt; /dev/pts/6\r\n    lrwx------ 1 root root 64 stu  23 08:58 7 -&gt; /dev/pts/6\r\n    lr-x------ 1 root root 64 stu  23 08:58 9 -&gt; /home/userjo/plc/plcserver/System.Private.CoreLib.dll\r\n\r\nThe question is - which one is the pipe I&#39;m supposed to write to from Java and how to reference it?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/4974989/concurrent-read-write-of-named-pipe-in-java-on-windows","title":"Windows named pipe build for Linux - how to read named pipe from Java app","body":"<p>I've built a PLC server and test client for linux-x64 in Visual Studio with\n<a href=\"https://github.com/S7NetPlus/s7netplus\" rel=\"nofollow noreferrer\">https://github.com/S7NetPlus/s7netplus</a></p>\n<p>All run OK on Ubuntu 22.04. The PLC server created a named pipe which I have to write to with the Java app.</p>\n<p>So the Java app will only have to write &quot;1&quot; to this existing named pipe. Nothing else. I'm using something like:</p>\n<pre><code>RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\pipename &quot;, &quot;rw&quot;);\n                short sVal = 1;\n                pipe.write((byte) sVal);\n</code></pre>\n<p>But the server is not changing status of pipename when writing from Java.</p>\n<p>I googled all over ,thread like <a href=\"https://stackoverflow.com/questions/4974989/concurrent-read-write-of-named-pipe-in-java-on-windows\">this</a> and similar but for starters I'm unable to locate where this named pipe lives in my Ubuntu?\nSo this part is troubling me <code>&quot;\\\\\\\\.\\\\pipe\\\\pipename &quot;</code>\nThis is probably incorrect but I don't understand how to find and reference named pipe in Java.</p>\n<p>The pipe is definitely existing on Ubuntu since the PLC server and test client are working OK.</p>\n<p><strong>EDIT</strong></p>\n<p>So when running PLC server I can find all processes to which the server process is writing. The server process is implementing 2 pipes:</p>\n<pre><code>userjo@UBUNTU-VM:~$ sudo ls -l /proc/428576/fd\ntotal 0\nlrwx------ 1 root root 64 stu  23 08:56 0 -&gt; /dev/pts/6\nlrwx------ 1 root root 64 stu  23 08:56 1 -&gt; /dev/pts/6\nlrwx------ 1 root root 64 stu  23 08:58 10 -&gt; 'socket:[85449454]'\nlr-x------ 1 root root 64 stu  23 08:58 12 -&gt; 'pipe:[85449455]'\nl-wx------ 1 root root 64 stu  23 08:58 13 -&gt; 'pipe:[85449455]'\nlr-x------ 1 root root 64 stu  23 08:58 14 -&gt; /home/userjo/plc/plcserver/userjoplcserver.dll\nlr-x------ 1 root root 64 stu  23 08:58 15 -&gt; /home/userjo/plc/plcserver/userjoplcserver.dll\nlr-x------ 1 root root 64 stu  23 08:58 16 -&gt; /home/userjo/plc/plcserver/System.Runtime.dll\nlr-x------ 1 root root 64 stu  23 08:58 17 -&gt; /home/userjo/plc/plcserver/System.Console.dll\nlr-x------ 1 root root 64 stu  23 08:58 18 -&gt; /home/userjo/plc/plcserver/System.Threading.Thread.dll\nlr-x------ 1 root root 64 stu  23 08:58 19 -&gt; /home/userjo/plc/plcserver/System.Threading.Tasks.dll\nlrwx------ 1 root root 64 stu  23 08:56 2 -&gt; /dev/pts/6\nlr-x------ 1 root root 64 stu  23 08:58 20 -&gt; /home/userjo/plc/plcserver/System.Runtime.Extensions.dll\nlr-x------ 1 root root 64 stu  23 08:58 21 -&gt; /home/userjo/plc/plcserver/System.Threading.dll\nlrwx------ 1 root root 64 stu  23 08:58 22 -&gt; /dev/pts/6\nlr-x------ 1 root root 64 stu  23 08:58 23 -&gt; /home/userjo/plc/plcserver/System.Collections.dll\nlr-x------ 1 root root 64 stu  23 08:58 24 -&gt; /home/userjo/plc/plcserver/System.Text.Encoding.Extensions.dll\nlr-x------ 1 root root 64 stu  23 08:58 25 -&gt; /dev/urandom\nlr-x------ 1 root root 64 stu  23 08:58 26 -&gt; /home/userjo/plc/plcserver/S7.Net.dll\nlr-x------ 1 root root 64 stu  23 08:58 27 -&gt; /home/userjo/plc/plcserver/System.IO.Pipes.dll\nlr-x------ 1 root root 64 stu  23 08:58 28 -&gt; /home/userjo/plc/plcserver/System.Net.Sockets.dll\nlr-x------ 1 root root 64 stu  23 08:58 29 -&gt; /home/userjo/plc/plcserver/S7.Net.dll\nlr-x------ 1 root root 64 stu  23 08:56 3 -&gt; 'pipe:[85449450]'\nlr-x------ 1 root root 64 stu  23 08:58 30 -&gt; /home/userjo/plc/plcserver/netstandard.dll\nlr-x------ 1 root root 64 stu  23 08:58 31 -&gt; /home/userjo/plc/plcserver/System.Net.Primitives.dll\nlr-x------ 1 root root 64 stu  23 08:58 32 -&gt; /home/userjo/plc/plcserver/Microsoft.Win32.Primitives.dll\nlr-x------ 1 root root 64 stu  23 08:58 33 -&gt; /home/userjo/plc/plcserver/System.Diagnostics.Tracing.dll\nlrwx------ 1 root root 64 stu  23 08:58 34 -&gt; 'socket:[85448469]'\nlrwx------ 1 root root 64 stu  23 08:58 35 -&gt; 'socket:[85452277]'\nlr-x------ 1 root root 64 stu  23 08:58 36 -&gt; /home/userjo/plc/plcserver/System.Memory.dll\nlr-x------ 1 root root 64 stu  23 08:58 37 -&gt; /home/userjo/plc/plcserver/System.Threading.ThreadPool.dll\nlr-x------ 1 root root 64 stu  23 08:58 38 -&gt; /home/userjo/plc/plcserver/System.Collections.Concurrent.dll\nlrwx------ 1 root root 64 stu  23 08:58 39 -&gt; 'anon_inode:[eventpoll]'\nl-wx------ 1 root root 64 stu  23 08:58 4 -&gt; 'pipe:[85449450]'\nlr-x------ 1 root root 64 stu  23 08:58 40 -&gt; 'pipe:[85452278]'\nl-wx------ 1 root root 64 stu  23 08:58 41 -&gt; 'pipe:[85452278]'\nlrwx------ 1 root root 64 stu  23 08:58 42 -&gt; 'socket:[85454101]'\nlr-x------ 1 root root 64 stu  23 08:58 43 -&gt; /home/userjo/plc/plcserver/System.Runtime.InteropServices.dll\nlrwx------ 1 root root 64 stu  23 08:58 44 -&gt; 'socket:[85449498]'\nlrwx------ 1 root root 64 stu  23 08:58 45 -&gt; 'socket:[85452306]'\nlr-x------ 1 root root 64 stu  23 08:58 46 -&gt; 'pipe:[85453000]'\nl-wx------ 1 root root 64 stu  23 08:58 47 -&gt; 'pipe:[85453000]'\nlrwx------ 1 root root 64 stu  23 08:56 5 -&gt; /dev/pts/6\nlrwx------ 1 root root 64 stu  23 08:58 6 -&gt; /dev/pts/6\nlrwx------ 1 root root 64 stu  23 08:58 7 -&gt; /dev/pts/6\nlr-x------ 1 root root 64 stu  23 08:58 9 -&gt; /home/userjo/plc/plcserver/System.Private.CoreLib.dll\n</code></pre>\n<p>The question is - which one is the pipe I'm supposed to write to from Java and how to reference it?</p>\n"},{"tags":["java","nio"],"comments":[{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1668688644,"post_id":74200939,"comment_id":131469785,"body_markdown":"Does https://stackoverflow.com/questions/4645242/how-do-i-move-a-file-from-one-location-to-another-in-java and/or https://stackoverflow.com/questions/300559/move-copy-file-operations-in-java answers your question?","body":"Does <a href=\"https://stackoverflow.com/questions/4645242/how-do-i-move-a-file-from-one-location-to-another-in-java\" title=\"how do i move a file from one location to another in java\">stackoverflow.com/questions/4645242/&hellip;</a> and/or <a href=\"https://stackoverflow.com/questions/300559/move-copy-file-operations-in-java\" title=\"move copy file operations in java\">stackoverflow.com/questions/300559/&hellip;</a> answers your question?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1668688819,"post_id":74200939,"comment_id":131469840,"body_markdown":"I saw the code examples. You idea is to copy-paste the code and then to delete the source file?","body":"I saw the code examples. You idea is to copy-paste the code and then to delete the source file?"},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1668690467,"post_id":74200939,"comment_id":131470506,"body_markdown":"Over both question there are three methods to achive your goal. Moving a file is an ordinary copy and delete it. The second offered way is using `renameTo` method. The third offered way is using the move method. But there also two tiny hints, put it into comment section, you should be insure all object are closed, bevor you move files.","body":"Over both question there are three methods to achive your goal. Moving a file is an ordinary copy and delete it. The second offered way is using <code>renameTo</code> method. The third offered way is using the move method. But there also two tiny hints, put it into comment section, you should be insure all object are closed, bevor you move files."},{"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"score":0,"creation_date":1668690590,"post_id":74200939,"comment_id":131470555,"body_markdown":"I think the source of your trouble is following line: &quot;C:\\csv\\nov\\07_06_26.csv -&gt; C:\\csv\\nov\\07_06_26.csv\\processed &quot;. The concatination of `Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);` is wrong","body":"I think the source of your trouble is following line: &quot;C:\\csv\\nov\\07_06_26.csv -&gt; C:\\csv\\nov\\07_06_26.csv\\processed &quot;. The concatination of <code>Paths.get(file.getAbsolutePath() + &quot;&#47;processed&quot;);</code> is wrong"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668602073,"creation_date":1668602073,"answer_id":74460552,"question_id":74200939,"body_markdown":"&gt; ```java\r\n&gt; new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)\r\n&gt; ```\r\n\r\nThis parts creates a _resource_. A resource is an object that represents an underlying heavy thing - a thing that you can have very few of. In this case, it represents an underlying OS file handle.\r\n\r\n__You must always safely close these__. There are really only 2 ways to do it correctly:\r\n\r\n* Use try-with-resources\r\n* Save it to a field, and make yourself `AutoClosable` so the code that uses of instances of this class can use try-with-resources\r\n\r\n```\r\ntry (var br = new FileReader(file, StandardCharsets.UTF_16)) {\r\n  List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\r\n                    .....\r\n                    .build()\r\n                    .parse();\r\n}\r\n```\r\n\r\nIs the answer. ","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)\n</code></pre>\n</blockquote>\n<p>This parts creates a <em>resource</em>. A resource is an object that represents an underlying heavy thing - a thing that you can have very few of. In this case, it represents an underlying OS file handle.</p>\n<p><strong>You must always safely close these</strong>. There are really only 2 ways to do it correctly:</p>\n<ul>\n<li>Use try-with-resources</li>\n<li>Save it to a field, and make yourself <code>AutoClosable</code> so the code that uses of instances of this class can use try-with-resources</li>\n</ul>\n<pre><code>try (var br = new FileReader(file, StandardCharsets.UTF_16)) {\n  List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\n                    .....\n                    .build()\n                    .parse();\n}\n</code></pre>\n<p>Is the answer.</p>\n"},{"tags":[],"owner":{"account_id":128739,"reputation":3915,"user_id":326807,"accept_rate":100,"display_name":"Reporter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668691463,"creation_date":1668691084,"answer_id":74476155,"question_id":74200939,"body_markdown":"The line in error message \r\n\r\n&gt;  Caused by: java.lang.RuntimeException:\r\n&gt; java.nio.file.FileSystemException: C:\\csv\\nov\\07_06_26.csv -&gt;\r\n&gt; **C:\\csv\\nov\\07_06_26.csv\\processed**: The process cannot access the file\r\n&gt; because it is being used by another process\r\n\r\nI think you want to move the file from `C:\\csv\\nov` to `C:\\csv\\nov\\processed`, so\r\nyou have to change following line:\r\n\r\n    Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n\r\nto \r\n\r\n     Path copied = Paths.get(file.getParent() + &quot;/processed&quot;);\r\n\r\nbecause `file.getAbsolutePath()` returns the complete path, include the name of file.\r\n\r\n\r\n\r\n\r\n","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<p>The line in error message</p>\n<blockquote>\n<p>Caused by: java.lang.RuntimeException:\njava.nio.file.FileSystemException: C:\\csv\\nov\\07_06_26.csv -&gt;\n<strong>C:\\csv\\nov\\07_06_26.csv\\processed</strong>: The process cannot access the file\nbecause it is being used by another process</p>\n</blockquote>\n<p>I think you want to move the file from <code>C:\\csv\\nov</code> to <code>C:\\csv\\nov\\processed</code>, so\nyou have to change following line:</p>\n<pre><code>Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n</code></pre>\n<p>to</p>\n<pre><code> Path copied = Paths.get(file.getParent() + &quot;/processed&quot;);\n</code></pre>\n<p>because <code>file.getAbsolutePath()</code> returns the complete path, include the name of file.</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668982099,"creation_date":1668960437,"answer_id":74509720,"question_id":74200939,"body_markdown":"Although I agree completely with the answer and comments of @rzwitserloot, note the following in your error stack trace:\r\n\r\n```\r\njava.nio.file.FileSystemException: C:\\csv\\nov\\07_06_26.csv -&gt; C:\\csv\\nov\\07_06_26.csv\\processed: The process cannot access the file because it is being used by another process\r\n```\r\n\r\nYou are trying moving your file to the backup directory, but note you are doing it to the wrong path, `C:\\csv\\nov\\07_06_26.csv\\processed`, in the example.\r\n\r\nPlease, try the following:\r\n\r\n```java\r\n@Override\r\npublic void execute(JobExecutionContext context) {\r\n\r\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\r\n    // Create a new subfolder called &quot;processed&quot; into source directory\r\n    // Hold a reference to the processed files directory path, we will\r\n    // use it later\r\n    Path processedDirectoryPath;\r\n    try {\r\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\r\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\r\n            Files.createDirectory(processedDirectoryPath);\r\n        }\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\r\n        String lowercaseName = name.toLowerCase();\r\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n    // List of all the csv files\r\n    File filesList[] = directoryPath.listFiles(textFileFilter);\r\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\r\n    for(File file : filesList) {\r\n\r\n        try {\r\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\r\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\r\n                        ......\r\n                        .build()\r\n                        .parse();\r\n\r\n            for (CsvLine item : beans) {\r\n\r\n                .....\r\n                if (isFound.isPresent()) {\r\n                    .........\r\n        }}\r\n\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Move here file into new subdirectory when file processing is finished\r\n        // In my opinion, here is the error:\r\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n        Path originalPath = file.toPath();\r\n        try {\r\n            // Note the use of the path we defined before\r\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\r\n                StandardCopyOption.REPLACE_EXISTING);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf you need to increase the throughput of files processed, you could try splitting them in batches, say for certain pattern in their name like a month name or a job number, for instance. The simple solution could be to use the provided `JobExecutionContext` of every job to include some split criteria. That criteria will be used in your `FilenameFilter` causing every job to process only a certain portion of the whole amount of files that need to be processed. I think the solution is preferable to any kind of locking or similar mechanism..\r\n\r\nFor example, consider the following:\r\n\r\n```java\r\n@Override\r\npublic void execute(JobExecutionContext context) {\r\n\r\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\r\n    // Create a new subfolder called &quot;processed&quot; into source directory\r\n    // Hold a reference to the processed files directory path, we will\r\n    // use it later\r\n    Path processedDirectoryPath;\r\n    try {\r\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\r\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\r\n            Files.createDirectory(processedDirectoryPath);\r\n        }\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n    // We obtain the file processing criteria using a job parameter\r\n    JobDataMap data = context.getJobDetail().getJobDataMap();\r\n    String filenameProcessingCriteria = data.getString(&quot;FILENAME_PROCESSING_CRITERIA&quot;);\r\n    // Use the provided criteria to restrict the files that this job\r\n    // will process \r\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\r\n        String lowercaseName = name.toLowerCase();\r\n        if (lowercaseName.endsWith(&quot;.csv&quot;) &amp;&amp; lowercaseName.indexOf(filenameProcessingCriteria) &gt; 0) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n    // List of all the csv files\r\n    File filesList[] = directoryPath.listFiles(textFileFilter);\r\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\r\n    for(File file : filesList) {\r\n\r\n        try {\r\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\r\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\r\n                        ......\r\n                        .build()\r\n                        .parse();\r\n\r\n            for (CsvLine item : beans) {\r\n\r\n                .....\r\n                if (isFound.isPresent()) {\r\n                    .........\r\n        }}\r\n\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Move here file into new subdirectory when file processing is finished\r\n        // In my opinion, here is the error:\r\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n        Path originalPath = file.toPath();\r\n        try {\r\n            // Note the use of the path we defined before\r\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\r\n                StandardCopyOption.REPLACE_EXISTING);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou need to pass the required parameter to your jobs:\r\n\r\n```java\r\nJobDetail job1 = ...;\r\njob1.getJobDataMap().put(&quot;FILENAME_PROCESSING_CRITERIA&quot;, &quot;job1pattern&quot;);\r\n```\r\n\r\nAn even simpler approach, based on the same idea, could be splitting the files in different folders and pass the folder name that need to be processed as a job parameter:\r\n\r\n```java\r\n@Override\r\npublic void execute(JobExecutionContext context) {\r\n\r\n    // We obtain the directory path as a job parameter\r\n    JobDataMap data = context.getJobDetail().getJobDataMap();\r\n    String directoryPathName = data.getString(&quot;DIRECTORY_PATH_NAME&quot;);\r\n\r\n    File directoryPath = new File(directoryPathName);\r\n    // Create a new subfolder called &quot;processed&quot; into source directory\r\n    // Hold a reference to the processed files directory path, we will\r\n    // use it later\r\n    Path processedDirectoryPath;\r\n    try {\r\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\r\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\r\n            Files.createDirectory(processedDirectoryPath);\r\n        }\r\n    } catch (IOException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\r\n        String lowercaseName = name.toLowerCase();\r\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n    // List of all the csv files\r\n    File filesList[] = directoryPath.listFiles(textFileFilter);\r\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\r\n    for(File file : filesList) {\r\n\r\n        try {\r\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\r\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\r\n                        ......\r\n                        .build()\r\n                        .parse();\r\n\r\n            for (CsvLine item : beans) {\r\n\r\n                .....\r\n                if (isFound.isPresent()) {\r\n                    .........\r\n        }}\r\n\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Move here file into new subdirectory when file processing is finished\r\n        // In my opinion, here is the error:\r\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n        Path originalPath = file.toPath();\r\n        try {\r\n            // Note the use of the path we defined before\r\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\r\n                StandardCopyOption.REPLACE_EXISTING);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd pass a different folder to every different job:\r\n\r\n```java\r\nJobDetail job1 = ...;\r\njob1.getJobDataMap().put(&quot;DIRECTORY_PATH_NAME&quot;, &quot;C:\\\\csv\\\\nov&quot;);\r\n```\r\n\r\nPlease, consider refactor your code and define methods for file processing, file backup, etc, it will make your code easy to understand and handle.","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<p>Although I agree completely with the answer and comments of @rzwitserloot, note the following in your error stack trace:</p>\n<pre><code>java.nio.file.FileSystemException: C:\\csv\\nov\\07_06_26.csv -&gt; C:\\csv\\nov\\07_06_26.csv\\processed: The process cannot access the file because it is being used by another process\n</code></pre>\n<p>You are trying moving your file to the backup directory, but note you are doing it to the wrong path, <code>C:\\csv\\nov\\07_06_26.csv\\processed</code>, in the example.</p>\n<p>Please, try the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void execute(JobExecutionContext context) {\n\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\n    // Create a new subfolder called &quot;processed&quot; into source directory\n    // Hold a reference to the processed files directory path, we will\n    // use it later\n    Path processedDirectoryPath;\n    try {\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\n            Files.createDirectory(processedDirectoryPath);\n        }\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\n        String lowercaseName = name.toLowerCase();\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n    // List of all the csv files\n    File filesList[] = directoryPath.listFiles(textFileFilter);\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\n    for(File file : filesList) {\n\n        try {\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\n                        ......\n                        .build()\n                        .parse();\n\n            for (CsvLine item : beans) {\n\n                .....\n                if (isFound.isPresent()) {\n                    .........\n        }}\n\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n        // Move here file into new subdirectory when file processing is finished\n        // In my opinion, here is the error:\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n        Path originalPath = file.toPath();\n        try {\n            // Note the use of the path we defined before\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\n                StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>If you need to increase the throughput of files processed, you could try splitting them in batches, say for certain pattern in their name like a month name or a job number, for instance. The simple solution could be to use the provided <code>JobExecutionContext</code> of every job to include some split criteria. That criteria will be used in your <code>FilenameFilter</code> causing every job to process only a certain portion of the whole amount of files that need to be processed. I think the solution is preferable to any kind of locking or similar mechanism..</p>\n<p>For example, consider the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void execute(JobExecutionContext context) {\n\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\n    // Create a new subfolder called &quot;processed&quot; into source directory\n    // Hold a reference to the processed files directory path, we will\n    // use it later\n    Path processedDirectoryPath;\n    try {\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\n            Files.createDirectory(processedDirectoryPath);\n        }\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n\n    // We obtain the file processing criteria using a job parameter\n    JobDataMap data = context.getJobDetail().getJobDataMap();\n    String filenameProcessingCriteria = data.getString(&quot;FILENAME_PROCESSING_CRITERIA&quot;);\n    // Use the provided criteria to restrict the files that this job\n    // will process \n    FilenameFilter textFileFilter = (dir, name) -&gt; {\n        String lowercaseName = name.toLowerCase();\n        if (lowercaseName.endsWith(&quot;.csv&quot;) &amp;&amp; lowercaseName.indexOf(filenameProcessingCriteria) &gt; 0) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n    // List of all the csv files\n    File filesList[] = directoryPath.listFiles(textFileFilter);\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\n    for(File file : filesList) {\n\n        try {\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\n                        ......\n                        .build()\n                        .parse();\n\n            for (CsvLine item : beans) {\n\n                .....\n                if (isFound.isPresent()) {\n                    .........\n        }}\n\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n        // Move here file into new subdirectory when file processing is finished\n        // In my opinion, here is the error:\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n        Path originalPath = file.toPath();\n        try {\n            // Note the use of the path we defined before\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\n                StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>You need to pass the required parameter to your jobs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JobDetail job1 = ...;\njob1.getJobDataMap().put(&quot;FILENAME_PROCESSING_CRITERIA&quot;, &quot;job1pattern&quot;);\n</code></pre>\n<p>An even simpler approach, based on the same idea, could be splitting the files in different folders and pass the folder name that need to be processed as a job parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void execute(JobExecutionContext context) {\n\n    // We obtain the directory path as a job parameter\n    JobDataMap data = context.getJobDetail().getJobDataMap();\n    String directoryPathName = data.getString(&quot;DIRECTORY_PATH_NAME&quot;);\n\n    File directoryPath = new File(directoryPathName);\n    // Create a new subfolder called &quot;processed&quot; into source directory\n    // Hold a reference to the processed files directory path, we will\n    // use it later\n    Path processedDirectoryPath;\n    try {\n        processedDirectoryPath = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\n        if (!Files.exists(processedDirectoryPath) || !Files.isDirectory(processedDirectoryPath)) {\n            Files.createDirectory(processedDirectoryPath);\n        }\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\n        String lowercaseName = name.toLowerCase();\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n    // List of all the csv files\n    File filesList[] = directoryPath.listFiles(textFileFilter);\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\n    for(File file : filesList) {\n\n        try {\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\n                        ......\n                        .build()\n                        .parse();\n\n            for (CsvLine item : beans) {\n\n                .....\n                if (isFound.isPresent()) {\n                    .........\n        }}\n\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n        // Move here file into new subdirectory when file processing is finished\n        // In my opinion, here is the error:\n        // Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n        Path originalPath = file.toPath();\n        try {\n            // Note the use of the path we defined before\n            Files.move(originalPath, processedDirectoryPath.resolve(originalPath.getFileName()),\n                StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>And pass a different folder to every different job:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JobDetail job1 = ...;\njob1.getJobDataMap().put(&quot;DIRECTORY_PATH_NAME&quot;, &quot;C:\\\\csv\\\\nov&quot;);\n</code></pre>\n<p>Please, consider refactor your code and define methods for file processing, file backup, etc, it will make your code easy to understand and handle.</p>\n"},{"tags":[],"owner":{"account_id":82472,"reputation":4043,"user_id":231860,"accept_rate":40,"display_name":"Luke Machowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669175082,"creation_date":1669175082,"answer_id":74541544,"question_id":74200939,"body_markdown":"Im pretty sure that the file is being locked by the file reader that you create but never close in the following line:\r\n\r\n    List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16))\r\n\r\nRefactor your code so that you have that reader in a try finally block or close it explicitly.\r\n\r\nThe unintuitive behavior you might see is that those files are released at seemingly random times. This is because when the garbage collector frees up those readers, they will then release the files. Clean them up explicitly instead. ","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<p>Im pretty sure that the file is being locked by the file reader that you create but never close in the following line:</p>\n<pre><code>List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16))\n</code></pre>\n<p>Refactor your code so that you have that reader in a try finally block or close it explicitly.</p>\n<p>The unintuitive behavior you might see is that those files are released at seemingly random times. This is because when the garbage collector frees up those readers, they will then release the files. Clean them up explicitly instead.</p>\n"},{"tags":[],"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669212677,"creation_date":1669212677,"answer_id":74548176,"question_id":74200939,"body_markdown":"Assuming we have `File file = new File(&quot;c:/test.txt&quot;)`, and print the the following paths:\r\n\r\n    Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n    Path originalPath = file.toPath();\r\n\r\nWe will get the result:\r\n\r\n    copied: C:\\test.txt\\processed\r\n\toriginalPath: C:\\test.txt\r\n\r\nSo its incorrect. You should try to get the parent path plus the processed folder **plus** the file name.\r\n\r\n    Path copied = Paths.get(file.getParentFile().getAbsolutePath() + &quot;/processed/&quot; + file.getName());\r\n    Path originalPath = file.toPath();","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<p>Assuming we have <code>File file = new File(&quot;c:/test.txt&quot;)</code>, and print the the following paths:</p>\n<pre><code>Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\nPath originalPath = file.toPath();\n</code></pre>\n<p>We will get the result:</p>\n<pre><code>copied: C:\\test.txt\\processed\noriginalPath: C:\\test.txt\n</code></pre>\n<p>So its incorrect. You should try to get the parent path plus the processed folder <strong>plus</strong> the file name.</p>\n<pre><code>Path copied = Paths.get(file.getParentFile().getAbsolutePath() + &quot;/processed/&quot; + file.getName());\nPath originalPath = file.toPath();\n</code></pre>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1817,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74548176,"answer_count":5,"score":1,"last_activity_date":1669212677,"creation_date":1666738446,"question_id":74200939,"body_markdown":"I want to create a  Quartz job which reads .csv files and moves them when file is processed. I tried this:\r\n\r\n    @Override\r\n    public void execute(JobExecutionContext context) {\r\n    \r\n        File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\r\n        // Create a new subfolder called &quot;processed&quot; into source directory\r\n        try {\r\n            Files.createDirectory(Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    \r\n        FilenameFilter textFileFilter = (dir, name) -&gt; {\r\n            String lowercaseName = name.toLowerCase();\r\n            if (lowercaseName.endsWith(&quot;.csv&quot;)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        };\r\n        // List of all the csv files\r\n        File filesList[] = directoryPath.listFiles(textFileFilter);\r\n        System.out.println(&quot;List of the text files in the specified directory:&quot;);\r\n\r\n        Optional&lt;File&gt; csvFile = Arrays.stream(filesList).findFirst();\r\n        File file = csvFile.get();\r\n      \r\n        for(File file : filesList) {\r\n    \r\n            try {\r\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16))\r\n                        .....\r\n                        .build()\r\n                        .parse();\r\n    \r\n                for(CsvLine item: beans){\r\n    \r\n                        ....... sql queries\r\n    \r\n                        Optional&lt;ProcessedWords&gt; isFound = processedWordsService.findByKeyword(item.getKeyword());\r\n    \r\n                        ......................................\r\n                }\r\n    \r\n            } catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            // Move here file into new subdirectory when file processing is finished\r\n            Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n            Path originalPath = file.toPath();\r\n            try {\r\n                Files.move(originalPath, copied, StandardCopyOption.REPLACE_EXISTING);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\nFolder `processed` is created when the job is started but I get exception:\r\n\r\n            2022-11-17 23:12:51.470 ERROR 16512 --- [cessor_Worker-4] org.quartz.core.JobRunShell              : Job DEFAULT.keywordPostJobDetail threw an unhandled Exception: \r\n    \r\n    java.lang.RuntimeException: java.nio.file.FileSystemException: C:\\csv\\nov\\11_42_33.csv -&gt; C:\\csv\\nov\\processed\\11_42_33.csv: The process cannot access the file because it is being used by another process\r\n    \tat com.wordscore.engine.processor.ImportCsvFilePostJob.execute(ImportCsvFilePostJob.java:127) ~[main/:na]\r\n    \tat org.quartz.core.JobRunShell.run(JobRunShell.java:202) ~[quartz-2.3.2.jar:na]\r\n    \tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573) ~[quartz-2.3.2.jar:na]\r\n    Caused by: java.nio.file.FileSystemException: C:\\csv\\nov\\11_42_33.csv -&gt; C:\\csv\\nov\\processed\\11_42_33.csv: The process cannot access the file because it is being used by another process\r\n    \tat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:92) ~[na:na]\r\n    \tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103) ~[na:na]\r\n    \tat java.base/sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:403) ~[na:na]\r\n    \tat java.base/sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:293) ~[na:na]\r\n    \tat java.base/java.nio.file.Files.move(Files.java:1432) ~[na:na]\r\n    \tat com.wordscore.engine.processor.ImportCsvFilePostJob.execute(ImportCsvFilePostJob.java:125) ~[main/:na]\r\n    \t... 2 common frames omitted\r\n\r\nDo you know how I can release the file and move it into a sub directory?\r\n\r\n***EDIT: Update code with try-catch***\r\n\r\n    @Override\r\n    public void execute(JobExecutionContext context) {\r\n    \r\n        File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\r\n        // Create a new subfolder called &quot;processed&quot; into source directory\r\n        try {\r\n            Path path = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\r\n            if (!Files.exists(path) || !Files.isDirectory(path)) {\r\n                Files.createDirectory(path);\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    \r\n        FilenameFilter textFileFilter = (dir, name) -&gt; {\r\n            String lowercaseName = name.toLowerCase();\r\n            if (lowercaseName.endsWith(&quot;.csv&quot;)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        };\r\n        // List of all the csv files\r\n        File filesList[] = directoryPath.listFiles(textFileFilter);\r\n        System.out.println(&quot;List of the text files in the specified directory:&quot;);\r\n        \r\n        Optional&lt;File&gt; csvFile = Arrays.stream(filesList).findFirst();\r\n        File file = csvFile.get();\r\n         \r\n        for(File file : filesList) {\r\n    \r\n            try {\r\n                try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\r\n                    List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\r\n                            ......\r\n                            .build()\r\n                            .parse();\r\n    \r\n                for (CsvLine item : beans) {\r\n    \r\n                    .....\r\n                    if (isFound.isPresent()) {\r\n                        .........\r\n            }}\r\n    \r\n            } catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            // Move here file into new subdirectory when file processing is finished\r\n            Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\r\n            Path originalPath = file.toPath();\r\n            try {\r\n                Files.move(originalPath, copied, StandardCopyOption.REPLACE_EXISTING);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        \r\n    }\r\n\r\n*Quartz config:*\r\n\r\n    @Configuration\r\n    public class SchedulerConfig {\r\n    \r\n        private static final Logger LOG = LoggerFactory.getLogger(SchedulerConfig.class);\r\n    \r\n        private ApplicationContext applicationContext;\r\n    \r\n        @Autowired\r\n        public SchedulerConfig(ApplicationContext applicationContext) {\r\n            this.applicationContext = applicationContext;\r\n        }\r\n    \r\n        @Bean\r\n        public JobFactory jobFactory() {\r\n            AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\r\n            jobFactory.setApplicationContext(applicationContext);\r\n            return jobFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public SchedulerFactoryBean schedulerFactoryBean(Trigger simpleJobTrigger) throws IOException {\r\n    \r\n            SchedulerFactoryBean schedulerFactory = new SchedulerFactoryBean();\r\n            schedulerFactory.setQuartzProperties(quartzProperties());\r\n            schedulerFactory.setWaitForJobsToCompleteOnShutdown(true);\r\n            schedulerFactory.setAutoStartup(true);\r\n            schedulerFactory.setTriggers(simpleJobTrigger);\r\n            schedulerFactory.setJobFactory(jobFactory());\r\n            return schedulerFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public SimpleTriggerFactoryBean simpleJobTrigger(@Qualifier(&quot;keywordPostJobDetail&quot;) JobDetail jobDetail,\r\n                                                         @Value(&quot;${simplejob.frequency}&quot;) long frequency) {\r\n            LOG.info(&quot;simpleJobTrigger&quot;);\r\n    \r\n            SimpleTriggerFactoryBean factoryBean = new SimpleTriggerFactoryBean();\r\n            factoryBean.setJobDetail(jobDetail);\r\n            factoryBean.setStartDelay(1000);\r\n            factoryBean.setRepeatInterval(frequency);\r\n            factoryBean.setRepeatCount(4); //         factoryBean.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);\r\n            return factoryBean;\r\n        }\r\n    \r\n        @Bean\r\n        public JobDetailFactoryBean keywordPostJobDetail() {\r\n            JobDetailFactoryBean factoryBean = new JobDetailFactoryBean();\r\n            factoryBean.setJobClass(ImportCsvFilePostJob.class);\r\n            factoryBean.setDurability(true);\r\n            return factoryBean;\r\n        }\r\n    \r\n        public Properties quartzProperties() throws IOException {\r\n            PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\r\n            propertiesFactoryBean.setLocation(new ClassPathResource(&quot;/quartz.properties&quot;));\r\n            propertiesFactoryBean.afterPropertiesSet();\r\n            return propertiesFactoryBean.getObject();\r\n        }\r\n    }\r\n\r\n*Quartz config:*\r\n\r\n    org.quartz.scheduler.instanceName=wordscore-processor\r\n    org.quartz.scheduler.instanceId=AUTO\r\n    org.quartz.threadPool.threadCount=5\r\n    org.quartz.jobStore.class=org.quartz.simpl.RAMJobStore\r\n\r\nAs you can see I wan to have 5 threads in order to execute 5 parallel jobs. Do you know how I can process the files without this exception?\r\n\r\n","title":"The process cannot access the file because it is being used by another process when file is moved","body":"<p>I want to create a  Quartz job which reads .csv files and moves them when file is processed. I tried this:</p>\n<pre><code>@Override\npublic void execute(JobExecutionContext context) {\n\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\n    // Create a new subfolder called &quot;processed&quot; into source directory\n    try {\n        Files.createDirectory(Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;));\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\n        String lowercaseName = name.toLowerCase();\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n    // List of all the csv files\n    File filesList[] = directoryPath.listFiles(textFileFilter);\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\n\n    Optional&lt;File&gt; csvFile = Arrays.stream(filesList).findFirst();\n    File file = csvFile.get();\n  \n    for(File file : filesList) {\n\n        try {\n            List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16))\n                    .....\n                    .build()\n                    .parse();\n\n            for(CsvLine item: beans){\n\n                    ....... sql queries\n\n                    Optional&lt;ProcessedWords&gt; isFound = processedWordsService.findByKeyword(item.getKeyword());\n\n                    ......................................\n            }\n\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n        // Move here file into new subdirectory when file processing is finished\n        Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n        Path originalPath = file.toPath();\n        try {\n            Files.move(originalPath, copied, StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Folder <code>processed</code> is created when the job is started but I get exception:</p>\n<pre><code>        2022-11-17 23:12:51.470 ERROR 16512 --- [cessor_Worker-4] org.quartz.core.JobRunShell              : Job DEFAULT.keywordPostJobDetail threw an unhandled Exception: \n\njava.lang.RuntimeException: java.nio.file.FileSystemException: C:\\csv\\nov\\11_42_33.csv -&gt; C:\\csv\\nov\\processed\\11_42_33.csv: The process cannot access the file because it is being used by another process\n    at com.wordscore.engine.processor.ImportCsvFilePostJob.execute(ImportCsvFilePostJob.java:127) ~[main/:na]\n    at org.quartz.core.JobRunShell.run(JobRunShell.java:202) ~[quartz-2.3.2.jar:na]\n    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573) ~[quartz-2.3.2.jar:na]\nCaused by: java.nio.file.FileSystemException: C:\\csv\\nov\\11_42_33.csv -&gt; C:\\csv\\nov\\processed\\11_42_33.csv: The process cannot access the file because it is being used by another process\n    at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:92) ~[na:na]\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103) ~[na:na]\n    at java.base/sun.nio.fs.WindowsFileCopy.move(WindowsFileCopy.java:403) ~[na:na]\n    at java.base/sun.nio.fs.WindowsFileSystemProvider.move(WindowsFileSystemProvider.java:293) ~[na:na]\n    at java.base/java.nio.file.Files.move(Files.java:1432) ~[na:na]\n    at com.wordscore.engine.processor.ImportCsvFilePostJob.execute(ImportCsvFilePostJob.java:125) ~[main/:na]\n    ... 2 common frames omitted\n</code></pre>\n<p>Do you know how I can release the file and move it into a sub directory?</p>\n<p><em><strong>EDIT: Update code with try-catch</strong></em></p>\n<pre><code>@Override\npublic void execute(JobExecutionContext context) {\n\n    File directoryPath = new File(&quot;C:\\\\csv\\\\nov&quot;);\n    // Create a new subfolder called &quot;processed&quot; into source directory\n    try {\n        Path path = Path.of(directoryPath.getAbsolutePath() + &quot;/processed&quot;);\n        if (!Files.exists(path) || !Files.isDirectory(path)) {\n            Files.createDirectory(path);\n        }\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n\n    FilenameFilter textFileFilter = (dir, name) -&gt; {\n        String lowercaseName = name.toLowerCase();\n        if (lowercaseName.endsWith(&quot;.csv&quot;)) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n    // List of all the csv files\n    File filesList[] = directoryPath.listFiles(textFileFilter);\n    System.out.println(&quot;List of the text files in the specified directory:&quot;);\n    \n    Optional&lt;File&gt; csvFile = Arrays.stream(filesList).findFirst();\n    File file = csvFile.get();\n     \n    for(File file : filesList) {\n\n        try {\n            try (var br = new FileReader(file.getAbsolutePath(), StandardCharsets.UTF_16)){\n                List&lt;CsvLine&gt; beans = new CsvToBeanBuilder(br)\n                        ......\n                        .build()\n                        .parse();\n\n            for (CsvLine item : beans) {\n\n                .....\n                if (isFound.isPresent()) {\n                    .........\n        }}\n\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n\n        // Move here file into new subdirectory when file processing is finished\n        Path copied = Paths.get(file.getAbsolutePath() + &quot;/processed&quot;);\n        Path originalPath = file.toPath();\n        try {\n            Files.move(originalPath, copied, StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    \n}\n</code></pre>\n<p><em>Quartz config:</em></p>\n<pre><code>@Configuration\npublic class SchedulerConfig {\n\n    private static final Logger LOG = LoggerFactory.getLogger(SchedulerConfig.class);\n\n    private ApplicationContext applicationContext;\n\n    @Autowired\n    public SchedulerConfig(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    @Bean\n    public JobFactory jobFactory() {\n        AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\n        jobFactory.setApplicationContext(applicationContext);\n        return jobFactory;\n    }\n\n    @Bean\n    public SchedulerFactoryBean schedulerFactoryBean(Trigger simpleJobTrigger) throws IOException {\n\n        SchedulerFactoryBean schedulerFactory = new SchedulerFactoryBean();\n        schedulerFactory.setQuartzProperties(quartzProperties());\n        schedulerFactory.setWaitForJobsToCompleteOnShutdown(true);\n        schedulerFactory.setAutoStartup(true);\n        schedulerFactory.setTriggers(simpleJobTrigger);\n        schedulerFactory.setJobFactory(jobFactory());\n        return schedulerFactory;\n    }\n\n    @Bean\n    public SimpleTriggerFactoryBean simpleJobTrigger(@Qualifier(&quot;keywordPostJobDetail&quot;) JobDetail jobDetail,\n                                                     @Value(&quot;${simplejob.frequency}&quot;) long frequency) {\n        LOG.info(&quot;simpleJobTrigger&quot;);\n\n        SimpleTriggerFactoryBean factoryBean = new SimpleTriggerFactoryBean();\n        factoryBean.setJobDetail(jobDetail);\n        factoryBean.setStartDelay(1000);\n        factoryBean.setRepeatInterval(frequency);\n        factoryBean.setRepeatCount(4); //         factoryBean.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);\n        return factoryBean;\n    }\n\n    @Bean\n    public JobDetailFactoryBean keywordPostJobDetail() {\n        JobDetailFactoryBean factoryBean = new JobDetailFactoryBean();\n        factoryBean.setJobClass(ImportCsvFilePostJob.class);\n        factoryBean.setDurability(true);\n        return factoryBean;\n    }\n\n    public Properties quartzProperties() throws IOException {\n        PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\n        propertiesFactoryBean.setLocation(new ClassPathResource(&quot;/quartz.properties&quot;));\n        propertiesFactoryBean.afterPropertiesSet();\n        return propertiesFactoryBean.getObject();\n    }\n}\n</code></pre>\n<p><em>Quartz config:</em></p>\n<pre><code>org.quartz.scheduler.instanceName=wordscore-processor\norg.quartz.scheduler.instanceId=AUTO\norg.quartz.threadPool.threadCount=5\norg.quartz.jobStore.class=org.quartz.simpl.RAMJobStore\n</code></pre>\n<p>As you can see I wan to have 5 threads in order to execute 5 parallel jobs. Do you know how I can process the files without this exception?</p>\n"},{"tags":["java","hibernate","hql"],"answers":[{"tags":[],"owner":{"account_id":113895,"reputation":2748,"user_id":299758,"accept_rate":38,"display_name":"Fanooos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1396359411,"creation_date":1396359411,"answer_id":22787621,"question_id":22787137,"body_markdown":"Try this\r\n\r\nupdate CommitteeMemberShip cms set cms.isDeleted=1 \r\nwhere cms.id = some(select cmsIn.id from CommitteeMemberShip cmsIn inner join \r\ncmsIn.committeeCycle cc inner join cc.committee c where c.id=:committeeId)","title":"Update using join or nasted sub-query Hibernate (HQL)","body":"<p>Try this</p>\n\n<p>update CommitteeMemberShip cms set cms.isDeleted=1 \nwhere cms.id = some(select cmsIn.id from CommitteeMemberShip cmsIn inner join \ncmsIn.committeeCycle cc inner join cc.committee c where c.id=:committeeId)</p>\n"},{"tags":[],"owner":{"account_id":4361950,"reputation":141,"user_id":3558722,"display_name":"Shaam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471870330,"creation_date":1471868368,"answer_id":39079386,"question_id":22787137,"body_markdown":"Try this \r\n&quot;UPDATE table1 r SET r.column = @value WHERE r.column IN(&quot;SELECT rd.Id FROM r.table2 rd WHERE rd.Column=&#39;&quot;+@value+&quot;&#39; AND rd.Column=&#39;&quot;+value+&quot;&#39;&quot;;","title":"Update using join or nasted sub-query Hibernate (HQL)","body":"<p>Try this \n\"UPDATE table1 r SET r.column = @value WHERE r.column IN(\"SELECT rd.Id FROM r.table2 rd WHERE rd.Column='\"+@value+\"' AND rd.Column='\"+value+\"'\";</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212663,"creation_date":1661416219,"answer_id":73484301,"question_id":22787137,"body_markdown":"It seems that HQL does not yet support path expressions / implicit joins in DML statements. [Here&#39;s how jOOQ does it][1] (in SQL, assuming all paths are to-one relationships (Disclaimer: I work for the company behind jOOQ)):\r\n\r\n```sql\r\nUPDATE CommitteeMemberShip cms\r\nSET cms.isDeleted = 1\r\nWHERE (\r\n  SELECT Committee.id\r\n  FROM Committee\r\n  WHERE (\r\n    SELECT CommitteeCycle.committeeId\r\n    FROM CommitteeCycle\r\n    WHERE CommitteeCycle.id = cms.committeeCycleId\r\n  ) = Committee.id \r\n) = :committeeId\r\n```\r\n\r\nYour own approach didn&#39;t work because you repeated the `CommitteeMemberShip` entity unnecessarily. That&#39;s a known MySQL limitation, see:\r\nhttps://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause\r\n\r\nThis would have worked, I suspect?\r\n\r\n```sql\r\nUPDATE CommitteeMemberShip cms\r\nSET cms.isDeleted = 1\r\nWHERE cms.committeeCycleId IN (\r\n  SELECT CommitteeCycle.id\r\n  FROM CommitteeCycle cc\r\n  JOIN cc.committee c\r\n  WHERE c.id = :committeeId\r\n)\r\n```\r\n\r\nStarting with Hibernate 6 and their support for derived tables, you might be able to work around MySQL&#39;s limitation like this ([the same way as jOOQ does it out of the box, see here][2]):\r\n\r\n```sql\r\nUPDATE CommitteeMemberShip cms \r\nSET cms.isDeleted=1 \r\nWHERE cms.id IN (\r\n  -- Wrap the query once more in a derived table\r\n  SELECT t.id\r\n  FROM (\r\n    SELECT cmsIn.id \r\n    FROM CommitteeMemberShip cmsIn \r\n    JOIN cmsIn.committeeCycle cc \r\n    JOIN cc.committee c WHERE c.id=:committeeId\r\n  ) t\r\n)\r\n```\r\n\r\n\r\n  [1]: https://blog.jooq.org/jooq-3-17-supports-implicit-join-also-in-dml/\r\n  [2]: https://github.com/jOOQ/jOOQ/issues/6583","title":"Update using join or nasted sub-query Hibernate (HQL)","body":"<p>It seems that HQL does not yet support path expressions / implicit joins in DML statements. <a href=\"https://blog.jooq.org/jooq-3-17-supports-implicit-join-also-in-dml/\" rel=\"nofollow noreferrer\">Here's how jOOQ does it</a> (in SQL, assuming all paths are to-one relationships (Disclaimer: I work for the company behind jOOQ)):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE CommitteeMemberShip cms\nSET cms.isDeleted = 1\nWHERE (\n  SELECT Committee.id\n  FROM Committee\n  WHERE (\n    SELECT CommitteeCycle.committeeId\n    FROM CommitteeCycle\n    WHERE CommitteeCycle.id = cms.committeeCycleId\n  ) = Committee.id \n) = :committeeId\n</code></pre>\n<p>Your own approach didn't work because you repeated the <code>CommitteeMemberShip</code> entity unnecessarily. That's a known MySQL limitation, see:\n<a href=\"https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause\">MySQL Error 1093 - Can&#39;t specify target table for update in FROM clause</a></p>\n<p>This would have worked, I suspect?</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE CommitteeMemberShip cms\nSET cms.isDeleted = 1\nWHERE cms.committeeCycleId IN (\n  SELECT CommitteeCycle.id\n  FROM CommitteeCycle cc\n  JOIN cc.committee c\n  WHERE c.id = :committeeId\n)\n</code></pre>\n<p>Starting with Hibernate 6 and their support for derived tables, you might be able to work around MySQL's limitation like this (<a href=\"https://github.com/jOOQ/jOOQ/issues/6583\" rel=\"nofollow noreferrer\">the same way as jOOQ does it out of the box, see here</a>):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE CommitteeMemberShip cms \nSET cms.isDeleted=1 \nWHERE cms.id IN (\n  -- Wrap the query once more in a derived table\n  SELECT t.id\n  FROM (\n    SELECT cmsIn.id \n    FROM CommitteeMemberShip cmsIn \n    JOIN cmsIn.committeeCycle cc \n    JOIN cc.committee c WHERE c.id=:committeeId\n  ) t\n)\n</code></pre>\n"}],"owner":{"account_id":181735,"reputation":66,"user_id":3415555,"display_name":"Ahmed Adel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1782,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1669212663,"creation_date":1396358347,"question_id":22787137,"body_markdown":"I have a problem creating HQL that updates entity CommitteeMembership with nested queries or using joins, i tried this query first:\r\n\r\n    update CommitteeMemberShip cms set cms.isDeleted=1 \r\n    where cms.committeeCycle.committee.id=:committeeId\r\n\r\nbut the generated SQL was wrong as following:\r\n\r\n    update CommitteeMemberShip cross join  set isDeleted=1 where committee_id=?\r\n\r\nwithout any this after &quot;cross join&quot; makes Hibernate throws SQLGrammarException\r\n\r\nAfter that, i have changed my query to use sub-query:\r\n\r\n    update CommitteeMemberShip cms set cms.isDeleted=1 \r\n    where cms.id in (select cmsIn.id from CommitteeMemberShip cmsIn inner join \r\n    cmsIn.committeeCycle cc inner join cc.committee c where c.id=:committeeId)\r\n\r\nnow Hibernate throws \r\n\r\n    java.sql.SQLException: You can&#39;t specify target table &#39;CommitteeMemberShip&#39; for \r\n    update in FROM clause\r\n\r\nany one have any idea how i can write this update query in HQL??","title":"Update using join or nasted sub-query Hibernate (HQL)","body":"<p>I have a problem creating HQL that updates entity CommitteeMembership with nested queries or using joins, i tried this query first:</p>\n\n<pre><code>update CommitteeMemberShip cms set cms.isDeleted=1 \nwhere cms.committeeCycle.committee.id=:committeeId\n</code></pre>\n\n<p>but the generated SQL was wrong as following:</p>\n\n<pre><code>update CommitteeMemberShip cross join  set isDeleted=1 where committee_id=?\n</code></pre>\n\n<p>without any this after \"cross join\" makes Hibernate throws SQLGrammarException</p>\n\n<p>After that, i have changed my query to use sub-query:</p>\n\n<pre><code>update CommitteeMemberShip cms set cms.isDeleted=1 \nwhere cms.id in (select cmsIn.id from CommitteeMemberShip cmsIn inner join \ncmsIn.committeeCycle cc inner join cc.committee c where c.id=:committeeId)\n</code></pre>\n\n<p>now Hibernate throws </p>\n\n<pre><code>java.sql.SQLException: You can't specify target table 'CommitteeMemberShip' for \nupdate in FROM clause\n</code></pre>\n\n<p>any one have any idea how i can write this update query in HQL??</p>\n"},{"tags":["java","sql","database","parsing"],"answers":[{"tags":[],"owner":{"account_id":5439,"reputation":28408,"user_id":8753,"display_name":"laz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1321043067,"creation_date":1321031187,"answer_id":8097441,"question_id":8096083,"body_markdown":"Have you had a look at [JsqlParser][1]? I don&#39;t know how it compares feature wise, but I&#39;ve seen it used in production code and it works extremely well.\r\n\r\n\r\n  [1]: http://jsqlparser.sourceforge.net/","title":"Are there any alternatives to GSP (General SQL Parser)?","body":"<p>Have you had a look at <a href=\"http://jsqlparser.sourceforge.net/\" rel=\"nofollow\">JsqlParser</a>? I don't know how it compares feature wise, but I've seen it used in production code and it works extremely well.</p>\n"},{"tags":[],"owner":{"account_id":940306,"reputation":463,"user_id":968490,"display_name":"James Wang"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1321929149,"creation_date":1321929149,"answer_id":8221257,"question_id":8096083,"body_markdown":"I&#39;m James from gudu software(company that developed [General SQL Parser][1]). Due to the complexity of SQL language of various databases such as Oracle, SQL Server, DB2, MySQL, Teradata, PostgreSQL, the SQL Parser we created to support those databases was a little bit complicated as well. \r\n\r\nI have to admit that the document of General SQL Parser is really poor, Maybe we should put more effort on the document rather than SQL library itself. \r\n\r\nFortunately, we have created [a rich set of demos][2] to help people getting started quickly.\r\n\r\nIf are still interested in using General SQL Parser, please kindly let me know(I can be reached via info@sqlparser.com). We are happy to help.\r\n\r\n\r\n\r\n  [1]: http://www.sqlparser.com\r\n  [2]: http://www.dpriver.com/blog/list-of-demos-illustrate-how-to-use-general-sql-parser/","title":"Are there any alternatives to GSP (General SQL Parser)?","body":"<p>I'm James from gudu software(company that developed <a href=\"http://www.sqlparser.com\">General SQL Parser</a>). Due to the complexity of SQL language of various databases such as Oracle, SQL Server, DB2, MySQL, Teradata, PostgreSQL, the SQL Parser we created to support those databases was a little bit complicated as well. </p>\n\n<p>I have to admit that the document of General SQL Parser is really poor, Maybe we should put more effort on the document rather than SQL library itself. </p>\n\n<p>Fortunately, we have created <a href=\"http://www.dpriver.com/blog/list-of-demos-illustrate-how-to-use-general-sql-parser/\">a rich set of demos</a> to help people getting started quickly.</p>\n\n<p>If are still interested in using General SQL Parser, please kindly let me know(I can be reached via info@sqlparser.com). We are happy to help.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212602,"creation_date":1661434132,"answer_id":73488409,"question_id":8096083,"body_markdown":"[jOOQ&#39;s parser][1] is an alternative. While jOOQ is historically perceived as an internal DSL that allows for writing type safe, embedded SQL queries in Java, you can also parse all sorts of SQL, procedural code, etc, from and to 30+ RDBMS dialects. and access / transform the resulting expression tree. You can execute it, or just re-generate the SQL.\r\n\r\nThere are different ways to interact with the parser:\r\n\r\n- [Programmatically, through its API][2]\r\n- [On the command line, via a CLI][3]\r\n- [Online, on the jOOQ website][4]\r\n\r\nIts documentation is vast, both in terms of the [manual][5] and [Javadoc][6]. Obviously, the documentation&#39;s main purpose is to document the DSL use case, not the parser use case, although for most parser usages this doesn&#39;t really matter.\r\n\r\nDisclaimer: I work for the company behind jOOQ\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-api/\r\n  [3]: https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-cli/\r\n  [4]: https://www.jooq.org/translate/\r\n  [5]: https://www.jooq.org/doc/latest/manual/\r\n  [6]: https://www.jooq.org/javadoc/latest/org.jooq/module-summary.html","title":"Are there any alternatives to GSP (General SQL Parser)?","body":"<p><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/\" rel=\"nofollow noreferrer\">jOOQ's parser</a> is an alternative. While jOOQ is historically perceived as an internal DSL that allows for writing type safe, embedded SQL queries in Java, you can also parse all sorts of SQL, procedural code, etc, from and to 30+ RDBMS dialects. and access / transform the resulting expression tree. You can execute it, or just re-generate the SQL.</p>\n<p>There are different ways to interact with the parser:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-api/\" rel=\"nofollow noreferrer\">Programmatically, through its API</a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-building/sql-parser/sql-parser-cli/\" rel=\"nofollow noreferrer\">On the command line, via a CLI</a></li>\n<li><a href=\"https://www.jooq.org/translate/\" rel=\"nofollow noreferrer\">Online, on the jOOQ website</a></li>\n</ul>\n<p>Its documentation is vast, both in terms of the <a href=\"https://www.jooq.org/doc/latest/manual/\" rel=\"nofollow noreferrer\">manual</a> and <a href=\"https://www.jooq.org/javadoc/latest/org.jooq/module-summary.html\" rel=\"nofollow noreferrer\">Javadoc</a>. Obviously, the documentation's main purpose is to document the DSL use case, not the parser use case, although for most parser usages this doesn't really matter.</p>\n<p>Disclaimer: I work for the company behind jOOQ</p>\n"}],"owner":{"account_id":339704,"reputation":1273,"user_id":669341,"accept_rate":76,"display_name":"someName"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7009,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1669212602,"creation_date":1321024877,"question_id":8096083,"body_markdown":"[General SQL Parser][1] (GSP) is a quite feature rich SQL parser (to the extent that I have played with it) that allows for modifying SQL statements in a robust way by altering the parse tree itself. Furthermore, it supports SQL flavors for most popular databases. However, a big minus with GSP is that it is horribly, simply horribly, documented: the javadoc&#39;s consist mostly of the raw method and property names (with almost no comments), there are really no documentation that outlines the core functionality and the meaning of most important properties and methods; and it seems like they have just exposed everything as public members, making the API very hard to grasp by looking at it.\r\nThe only documentation is a bunch of practical examples from which you have to reverse-engineer the meaning of the API calls yourself.\r\n\r\nI do not like producing production critical software with a library like that. So due to the above, I would prefer using another parser, but have unfortunately failed to find any alternatives (for java) with similar functionality and support for multiple SQL flavors.\r\n\r\nAre there any comparable (!) alternatives to GSP for java out there?\r\n\r\n  [1]: http://sqlparser.com","title":"Are there any alternatives to GSP (General SQL Parser)?","body":"<p><a href=\"http://sqlparser.com\">General SQL Parser</a> (GSP) is a quite feature rich SQL parser (to the extent that I have played with it) that allows for modifying SQL statements in a robust way by altering the parse tree itself. Furthermore, it supports SQL flavors for most popular databases. However, a big minus with GSP is that it is horribly, simply horribly, documented: the javadoc's consist mostly of the raw method and property names (with almost no comments), there are really no documentation that outlines the core functionality and the meaning of most important properties and methods; and it seems like they have just exposed everything as public members, making the API very hard to grasp by looking at it.\nThe only documentation is a bunch of practical examples from which you have to reverse-engineer the meaning of the API calls yourself.</p>\n\n<p>I do not like producing production critical software with a library like that. So due to the above, I would prefer using another parser, but have unfortunately failed to find any alternatives (for java) with similar functionality and support for multiple SQL flavors.</p>\n\n<p>Are there any comparable (!) alternatives to GSP for java out there?</p>\n"},{"tags":["java","identity","hashcode"],"comments":[{"owner":{"account_id":28564,"reputation":19183,"user_id":76393,"accept_rate":65,"display_name":"ivan_ivanovich_ivanoff"},"score":43,"creation_date":1243332457,"post_id":909843,"comment_id":717680,"body_markdown":"Mostly for &#39;debugging&#39; reasons ;) To be able to say: Ah, same object!","body":"Mostly for &#39;debugging&#39; reasons ;) To be able to say: Ah, same object!"},{"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"score":7,"creation_date":1243334286,"post_id":909843,"comment_id":717786,"body_markdown":"For this purpose the System.identityHashcode() is likely of some use. I wouldn&#39;t rely on it for implementing code functionality, however. If you want to identify objects uniquely, you could use AspectJ and code-weave in a unique id per created object. More work, though","body":"For this purpose the System.identityHashcode() is likely of some use. I wouldn&#39;t rely on it for implementing code functionality, however. If you want to identify objects uniquely, you could use AspectJ and code-weave in a unique id per created object. More work, though"},{"owner":{"account_id":38395,"reputation":10185,"user_id":110177,"display_name":"Igor Krivokon"},"score":9,"creation_date":1243334535,"post_id":909843,"comment_id":717807,"body_markdown":"Just keep in mind that hashCode is NOT guaranteed to be unique. Even if the implementaiton uses memory address as the default hashCode. Why is it not unique? Because  objects get garbage collected, and memory is reused.","body":"Just keep in mind that hashCode is NOT guaranteed to be unique. Even if the implementaiton uses memory address as the default hashCode. Why is it not unique? Because  objects get garbage collected, and memory is reused."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1243334610,"post_id":909843,"comment_id":717812,"body_markdown":"Note this CR for API docs: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873","body":"Note this CR for API docs: <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873\" rel=\"nofollow noreferrer\">bugs.sun.com/bugdatabase/view_bug.do?bug_id=6321873</a>"},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":8,"creation_date":1243335118,"post_id":909843,"comment_id":717830,"body_markdown":"If you want to decide, if two objects are the same use == instead of hashCode(). The latter is not guaranteed to be unique, even in the original implementation.","body":"If you want to decide, if two objects are the same use == instead of hashCode(). The latter is not guaranteed to be unique, even in the original implementation."},{"owner":{"account_id":375461,"reputation":2234,"user_id":726315,"accept_rate":89,"display_name":"arkon"},"score":0,"creation_date":1370795507,"post_id":909843,"comment_id":24582912,"body_markdown":"Just generate your own unique ID during instantiation via a `static AtomicInteger()`","body":"Just generate your own unique ID during instantiation via a <code>static AtomicInteger()</code>"},{"owner":{"account_id":457601,"reputation":1190,"user_id":857029,"display_name":"Chris Westin"},"score":13,"creation_date":1428610438,"post_id":909843,"comment_id":47247748,"body_markdown":"None of the answers answer the real question because they get tangled up in discussing hashCode(), which was incidental here. If I look at reference variables in Eclipse, it shows me a unique immutable &quot;id=xxx.&quot; How do we get to that value programmatically without having to use our own id generator? I want access to that value for debugging purposes (logging) in order to identify distinct instances of objects. Does anybody know how to get your hands on that value?","body":"None of the answers answer the real question because they get tangled up in discussing hashCode(), which was incidental here. If I look at reference variables in Eclipse, it shows me a unique immutable &quot;id=xxx.&quot; How do we get to that value programmatically without having to use our own id generator? I want access to that value for debugging purposes (logging) in order to identify distinct instances of objects. Does anybody know how to get your hands on that value?"},{"owner":{"account_id":881880,"reputation":8346,"user_id":270143,"accept_rate":88,"display_name":"ycomp"},"score":0,"creation_date":1510131042,"post_id":909843,"comment_id":81299474,"body_markdown":"@Mnementh for debugging sometimes objects are equal but you&#39;d still like to know if they are different objects, probably better to refer to those 2 objects as _equivalent_ rather than _the same_ - although I&#39;m not sure the correct terminology in computer-speak but in English that makes the most sense. Otherwise it can be confusing","body":"@Mnementh for debugging sometimes objects are equal but you&#39;d still like to know if they are different objects, probably better to refer to those 2 objects as <i>equivalent</i> rather than <i>the same</i> - although I&#39;m not sure the correct terminology in computer-speak but in English that makes the most sense. Otherwise it can be confusing"},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":0,"creation_date":1510222651,"post_id":909843,"comment_id":81346910,"body_markdown":"@ycomp:In Java == compares references, which means it is only true for the same object. To compare the equalness, you should use the method euqals(). Say a= new Integer(1);b = new Integer(1); a==b is false while a.equals(b) is true.","body":"@ycomp:In Java == compares references, which means it is only true for the same object. To compare the equalness, you should use the method euqals(). Say a= new Integer(1);b = new Integer(1); a==b is false while a.equals(b) is true."},{"owner":{"account_id":881880,"reputation":8346,"user_id":270143,"accept_rate":88,"display_name":"ycomp"},"score":0,"creation_date":1510225894,"post_id":909843,"comment_id":81349075,"body_markdown":"@Mnementh sorry my apologies, using kotlin as my main language really fried my brain when it comes to java (when I&#39;m tired)","body":"@Mnementh sorry my apologies, using kotlin as my main language really fried my brain when it comes to java (when I&#39;m tired)"},{"owner":{"account_id":2485164,"reputation":2314,"user_id":2163727,"accept_rate":80,"display_name":"MasterHD"},"score":0,"creation_date":1561719761,"post_id":909843,"comment_id":100165448,"body_markdown":"Does your unique identifier need to be an integer/String ID? Why not just use the `Object` instance itself? It&#39;s basically a unique pointer to anything that inherits from an object.","body":"Does your unique identifier need to be an integer/String ID? Why not just use the <code>Object</code> instance itself? It&#39;s basically a unique pointer to anything that inherits from an object."}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":422,"is_accepted":true,"score":422,"last_activity_date":1476831081,"creation_date":1243331201,"answer_id":909861,"question_id":909843,"body_markdown":"[System.identityHashCode(yourObject)][1] will give the &#39;original&#39; hash code of yourObject as an integer. Uniqueness isn&#39;t necessarily guaranteed. The Sun JVM implementation will give you a value which is related to the original memory address for this object, but that&#39;s an implementation detail and you shouldn&#39;t rely on it.\r\n\r\nEDIT: Answer modified following Tom&#39;s comment below re. memory addresses and moving objects.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29\" rel=\"noreferrer\">System.identityHashCode(yourObject)</a> will give the 'original' hash code of yourObject as an integer. Uniqueness isn't necessarily guaranteed. The Sun JVM implementation will give you a value which is related to the original memory address for this object, but that's an implementation detail and you shouldn't rely on it.</p>\n\n<p>EDIT: Answer modified following Tom's comment below re. memory addresses and moving objects.</p>\n"},{"tags":[],"owner":{"account_id":36493,"reputation":11667,"user_id":104117,"accept_rate":89,"display_name":"Valentin Rocher"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1403959060,"creation_date":1243331240,"answer_id":909864,"question_id":909843,"body_markdown":"The javadoc for Object specifies that \r\n\r\n&gt; This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the JavaTM programming language.\r\n\r\nIf a class overrides hashCode, it means that it wants to generate a specific id, which will (one can hope) have the right behaviour.\r\n\r\nYou can use [System.identityHashCode][1] to get that id for any class.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>The javadoc for Object specifies that </p>\n\n<blockquote>\n  <p>This is typically implemented by converting the internal address of the object into an integer, but this implementation technique is not required by the JavaTM programming language.</p>\n</blockquote>\n\n<p>If a class overrides hashCode, it means that it wants to generate a specific id, which will (one can hope) have the right behaviour.</p>\n\n<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode(java.lang.Object)\" rel=\"noreferrer\">System.identityHashCode</a> to get that id for any class.</p>\n"},{"tags":[],"owner":{"account_id":1659920,"reputation":22819,"user_id":1528401,"display_name":"Glen Best"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374637483,"creation_date":1374637483,"answer_id":17824844,"question_id":909843,"body_markdown":"Just to augment the other answers from a different angle.\r\n\r\nIf you want to reuse hashcode(s) from &#39;above&#39; and derive new ones using your class&#39; immutatable state, then a call to super will work.  While this may/may not cascade all the way up to Object (i.e. some ancestor may not call super), it will allow you to derive hashcodes by reuse.\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        int ancestorHash = super.hashCode();\r\n        // now derive new hash from ancestorHash plus immutable instance vars (id fields)\r\n    }\r\n      ","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>Just to augment the other answers from a different angle.</p>\n\n<p>If you want to reuse hashcode(s) from 'above' and derive new ones using your class' immutatable state, then a call to super will work.  While this may/may not cascade all the way up to Object (i.e. some ancestor may not call super), it will allow you to derive hashcodes by reuse.</p>\n\n<pre><code>@Override\npublic int hashCode() {\n    int ancestorHash = super.hashCode();\n    // now derive new hash from ancestorHash plus immutable instance vars (id fields)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1927754,"reputation":5883,"user_id":1737819,"accept_rate":89,"display_name":"Developer Marius ilnas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415947239,"creation_date":1415947239,"answer_id":26924358,"question_id":909843,"body_markdown":"There is a difference between hashCode() and identityHashCode() returns. It is possible that for two unequal (tested with ==) objects o1, o2 hashCode() can be the same. See the example below how this is true.\r\n\r\n    class SeeDifferences\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            String s1 = &quot;stackoverflow&quot;;\r\n            String s2 = new String(&quot;stackoverflow&quot;);\r\n            String s3 = &quot;stackoverflow&quot;;\r\n            System.out.println(s1.hashCode());\r\n            System.out.println(s2.hashCode());\r\n            System.out.println(s3.hashCode());\r\n            System.out.println(System.identityHashCode(s1));\r\n            System.out.println(System.identityHashCode(s2));\r\n            System.out.println(System.identityHashCode(s3));\r\n            if (s1 == s2)\r\n            {\r\n                System.out.println(&quot;s1 and s2 equal&quot;);\r\n            } \r\n            else\r\n            {\r\n                System.out.println(&quot;s1 and s2 not equal&quot;);\r\n            }\r\n            if (s1 == s3)\r\n            {\r\n                System.out.println(&quot;s1 and s3 equal&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;s1 and s3 not equal&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>There is a difference between hashCode() and identityHashCode() returns. It is possible that for two unequal (tested with ==) objects o1, o2 hashCode() can be the same. See the example below how this is true.</p>\n\n<pre><code>class SeeDifferences\n{\n    public static void main(String[] args)\n    {\n        String s1 = \"stackoverflow\";\n        String s2 = new String(\"stackoverflow\");\n        String s3 = \"stackoverflow\";\n        System.out.println(s1.hashCode());\n        System.out.println(s2.hashCode());\n        System.out.println(s3.hashCode());\n        System.out.println(System.identityHashCode(s1));\n        System.out.println(System.identityHashCode(s2));\n        System.out.println(System.identityHashCode(s3));\n        if (s1 == s2)\n        {\n            System.out.println(\"s1 and s2 equal\");\n        } \n        else\n        {\n            System.out.println(\"s1 and s2 not equal\");\n        }\n        if (s1 == s3)\n        {\n            System.out.println(\"s1 and s3 equal\");\n        }\n        else\n        {\n            System.out.println(\"s1 and s3 not equal\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4600028,"reputation":2423,"user_id":3731039,"display_name":"John Pang"},"down_vote_count":3,"up_vote_count":10,"is_accepted":false,"score":7,"last_activity_date":1416610081,"creation_date":1416610081,"answer_id":27071654,"question_id":909843,"body_markdown":"Maybe this quick, dirty solution will work?\r\n\r\n    public class A {\r\n        static int UNIQUE_ID = 0;\r\n        int uid = ++UNIQUE_ID;\r\n\r\n        public int hashCode() {\r\n            return uid;\r\n        }\r\n    }\r\n\r\nThis also gives the number of instance of a class being initialized.","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>Maybe this quick, dirty solution will work?</p>\n\n<pre><code>public class A {\n    static int UNIQUE_ID = 0;\n    int uid = ++UNIQUE_ID;\n\n    public int hashCode() {\n        return uid;\n    }\n}\n</code></pre>\n\n<p>This also gives the number of instance of a class being initialized.</p>\n"},{"tags":[],"owner":{"account_id":221057,"reputation":8513,"user_id":478831,"accept_rate":44,"display_name":"ovunccetin"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1587739179,"creation_date":1420198804,"answer_id":27741600,"question_id":909843,"body_markdown":"`hashCode()` method is not for providing a unique identifier for an object. It rather digests the object&#39;s state (i.e. values of member fields) to a single integer. This value is mostly used by some hash based data structures like maps and sets to effectively store and retrieve objects.\r\n\r\nIf you need an identifier for your objects, I recommend you to add your own method instead of overriding `hashCode`. For this purpose, you can create a base interface (or an abstract class) like below.\r\n\r\n    public interface IdentifiedObject&lt;I&gt; {\r\n        I getId();\r\n    }\r\n\r\nExample usage:\r\n\r\n    public class User implements IdentifiedObject&lt;Integer&gt; {\r\n        private Integer studentId;\r\n\r\n        public User(Integer studentId) {\r\n            this.studentId = studentId;\r\n        }\r\n        \r\n        @Override\r\n        public Integer getId() {\r\n            return studentId;\r\n        }\r\n    }\r\n","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p><code>hashCode()</code> method is not for providing a unique identifier for an object. It rather digests the object's state (i.e. values of member fields) to a single integer. This value is mostly used by some hash based data structures like maps and sets to effectively store and retrieve objects.</p>\n\n<p>If you need an identifier for your objects, I recommend you to add your own method instead of overriding <code>hashCode</code>. For this purpose, you can create a base interface (or an abstract class) like below.</p>\n\n<pre><code>public interface IdentifiedObject&lt;I&gt; {\n    I getId();\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre><code>public class User implements IdentifiedObject&lt;Integer&gt; {\n    private Integer studentId;\n\n    public User(Integer studentId) {\n        this.studentId = studentId;\n    }\n\n    @Override\n    public Integer getId() {\n        return studentId;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7597490,"reputation":425,"user_id":5763245,"display_name":"Aaron Mansheim"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452263573,"creation_date":1452263573,"answer_id":34679482,"question_id":909843,"body_markdown":"If it&#39;s a class that you can modify, you could declare a class variable `static java.util.concurrent.atomic.AtomicInteger nextInstanceId`. (You&#39;ll have to give it an initial value in the obvious way.) Then declare an instance variable `int instanceId = nextInstanceId.getAndIncrement()`.","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>If it's a class that you can modify, you could declare a class variable <code>static java.util.concurrent.atomic.AtomicInteger nextInstanceId</code>. (You'll have to give it an initial value in the obvious way.) Then declare an instance variable <code>int instanceId = nextInstanceId.getAndIncrement()</code>.</p>\n"},{"tags":[],"owner":{"account_id":2819099,"reputation":928,"user_id":2423283,"accept_rate":86,"display_name":"NateW"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1473802127,"creation_date":1473802127,"answer_id":39479276,"question_id":909843,"body_markdown":"I had the same issue and was not satisfied with any of the answers so far since none of them guaranteed unique IDs.\r\n\r\nI too wanted to print object IDs for debugging purposed. I knew there must be some way to do it, because in the Eclipse debugger, it specifies unique IDs for each object.\r\n\r\nI came up with a solution based on the fact that the &quot;==&quot; operator for objects only returns true if the two objects are actually the same instance.\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    /**\r\n     *  Utility for assigning a unique ID to objects and fetching objects given\r\n     *  a specified ID\r\n     */\r\n    public class ObjectIDBank {\r\n\r\n        /**Singleton instance*/\r\n        private static ObjectIDBank instance;\r\n\t\r\n        /**Counting value to ensure unique incrementing IDs*/\r\n        private long nextId = 1;\r\n\t\r\n        /** Map from ObjectEntry to the objects corresponding ID*/\r\n        private Map&lt;ObjectEntry, Long&gt; ids = new HashMap&lt;ObjectEntry, Long&gt;();\r\n\t\r\n        /** Map from assigned IDs to their corresponding objects */\r\n        private Map&lt;Long, Object&gt; objects = new HashMap&lt;Long, Object&gt;();\r\n\t\r\n        /**Private constructor to ensure it is only instantiated by the singleton pattern*/\r\n        private ObjectIDBank(){}\r\n\t\r\n        /**Fetches the singleton instance of ObjectIDBank */\r\n        public static ObjectIDBank instance() {\r\n            if(instance == null)\r\n                instance = new ObjectIDBank();\r\n\t\t\r\n            return instance;\r\n        }\r\n\t\r\n        /** Fetches a unique ID for the specified object. If this method is called multiple\r\n         * times with the same object, it is guaranteed to return the same value. It is also guaranteed\r\n         * to never return the same value for different object instances (until we run out of IDs that can\r\n         * be represented by a long of course)\r\n         * @param obj The object instance for which we want to fetch an ID\r\n         * @return Non zero unique ID or 0 if obj == null\r\n         */\r\n        public long getId(Object obj) {\r\n\t\t\r\n            if(obj == null)\r\n                return 0;\r\n\t\t\r\n            ObjectEntry objEntry = new ObjectEntry(obj);\r\n\t\t\r\n            if(!ids.containsKey(objEntry)) {\r\n                ids.put(objEntry, nextId);\r\n                objects.put(nextId++, obj);\r\n            }\r\n\t\t\r\n            return ids.get(objEntry);\r\n        }\r\n\t\r\n        /**\r\n         * Fetches the object that has been assigned the specified ID, or null if no object is\r\n         * assigned the given id\r\n         * @param id Id of the object\r\n         * @return The corresponding object or null\r\n         */\r\n        public Object getObject(long id) {\r\n            return objects.get(id);\r\n        }\r\n\t\r\n\t\r\n        /**\r\n         * Wrapper around an Object used as the key for the ids map. The wrapper is needed to\r\n         * ensure that the equals method only returns true if the two objects are the same instance\r\n         * and to ensure that the hash code is always the same for the same instance.\r\n         */\r\n        private class ObjectEntry {\r\n            private Object obj;\r\n\t\t\r\n            /** Instantiates an ObjectEntry wrapper around the specified object*/\r\n            public ObjectEntry(Object obj) {\r\n                this.obj = obj;\r\n            }\r\n\t\t\r\n\t\t\r\n            /** Returns true if and only if the objects contained in this wrapper and the other\r\n             * wrapper are the exact same object (same instance, not just equivalent)*/\r\n            @Override\r\n            public boolean equals(Object other) {\r\n                return obj == ((ObjectEntry)other).obj;\r\n            }\r\n\t\t\r\n\t\t\r\n            /**\r\n             * Returns the contained object&#39;s identityHashCode. Note that identityHashCode values\r\n             * are not guaranteed to be unique from object to object, but the hash code is guaranteed to\r\n             * not change over time for a given instance of an Object.\r\n             */\r\n            @Override\r\n            public int hashCode() {\r\n                return System.identityHashCode(obj);\r\n            }\r\n        }\r\n    }\r\n\r\nI believe that this should ensure unique IDs throughout the lifetime of the program. Note, however, that you probably don&#39;t want to use this in a production application because it maintains references to all of the objects for which you generate IDs. This means that any objects for which you create an ID will never be garbage collected.\r\n\r\nSince I&#39;m using this for debug purposes, I&#39;m not too concerned with the memory being freed.\r\n\r\nYou could modify this to allow clearing Objects or removing individual objects if freeing memory is a concern.","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>I had the same issue and was not satisfied with any of the answers so far since none of them guaranteed unique IDs.</p>\n\n<p>I too wanted to print object IDs for debugging purposed. I knew there must be some way to do it, because in the Eclipse debugger, it specifies unique IDs for each object.</p>\n\n<p>I came up with a solution based on the fact that the \"==\" operator for objects only returns true if the two objects are actually the same instance.</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\n/**\n *  Utility for assigning a unique ID to objects and fetching objects given\n *  a specified ID\n */\npublic class ObjectIDBank {\n\n    /**Singleton instance*/\n    private static ObjectIDBank instance;\n\n    /**Counting value to ensure unique incrementing IDs*/\n    private long nextId = 1;\n\n    /** Map from ObjectEntry to the objects corresponding ID*/\n    private Map&lt;ObjectEntry, Long&gt; ids = new HashMap&lt;ObjectEntry, Long&gt;();\n\n    /** Map from assigned IDs to their corresponding objects */\n    private Map&lt;Long, Object&gt; objects = new HashMap&lt;Long, Object&gt;();\n\n    /**Private constructor to ensure it is only instantiated by the singleton pattern*/\n    private ObjectIDBank(){}\n\n    /**Fetches the singleton instance of ObjectIDBank */\n    public static ObjectIDBank instance() {\n        if(instance == null)\n            instance = new ObjectIDBank();\n\n        return instance;\n    }\n\n    /** Fetches a unique ID for the specified object. If this method is called multiple\n     * times with the same object, it is guaranteed to return the same value. It is also guaranteed\n     * to never return the same value for different object instances (until we run out of IDs that can\n     * be represented by a long of course)\n     * @param obj The object instance for which we want to fetch an ID\n     * @return Non zero unique ID or 0 if obj == null\n     */\n    public long getId(Object obj) {\n\n        if(obj == null)\n            return 0;\n\n        ObjectEntry objEntry = new ObjectEntry(obj);\n\n        if(!ids.containsKey(objEntry)) {\n            ids.put(objEntry, nextId);\n            objects.put(nextId++, obj);\n        }\n\n        return ids.get(objEntry);\n    }\n\n    /**\n     * Fetches the object that has been assigned the specified ID, or null if no object is\n     * assigned the given id\n     * @param id Id of the object\n     * @return The corresponding object or null\n     */\n    public Object getObject(long id) {\n        return objects.get(id);\n    }\n\n\n    /**\n     * Wrapper around an Object used as the key for the ids map. The wrapper is needed to\n     * ensure that the equals method only returns true if the two objects are the same instance\n     * and to ensure that the hash code is always the same for the same instance.\n     */\n    private class ObjectEntry {\n        private Object obj;\n\n        /** Instantiates an ObjectEntry wrapper around the specified object*/\n        public ObjectEntry(Object obj) {\n            this.obj = obj;\n        }\n\n\n        /** Returns true if and only if the objects contained in this wrapper and the other\n         * wrapper are the exact same object (same instance, not just equivalent)*/\n        @Override\n        public boolean equals(Object other) {\n            return obj == ((ObjectEntry)other).obj;\n        }\n\n\n        /**\n         * Returns the contained object's identityHashCode. Note that identityHashCode values\n         * are not guaranteed to be unique from object to object, but the hash code is guaranteed to\n         * not change over time for a given instance of an Object.\n         */\n        @Override\n        public int hashCode() {\n            return System.identityHashCode(obj);\n        }\n    }\n}\n</code></pre>\n\n<p>I believe that this should ensure unique IDs throughout the lifetime of the program. Note, however, that you probably don't want to use this in a production application because it maintains references to all of the objects for which you generate IDs. This means that any objects for which you create an ID will never be garbage collected.</p>\n\n<p>Since I'm using this for debug purposes, I'm not too concerned with the memory being freed.</p>\n\n<p>You could modify this to allow clearing Objects or removing individual objects if freeing memory is a concern.</p>\n"},{"tags":[],"owner":{"account_id":1713802,"reputation":470,"user_id":1571329,"display_name":"Howard Swope"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1481318535,"creation_date":1481318535,"answer_id":41069117,"question_id":909843,"body_markdown":"I came up with this solution which works in my case where I have objects created on multiple threads and are serializable:\r\n\r\n    public abstract class ObjBase implements Serializable\r\n        private static final long serialVersionUID = 1L;\r\n        private static final AtomicLong atomicRefId = new AtomicLong();\r\n        \r\n        // transient field is not serialized\r\n        private transient long refId;\r\n\r\n        // default constructor will be called on base class even during deserialization\r\n        public ObjBase() {\r\n           refId = atomicRefId.incrementAndGet()\r\n        }\r\n\r\n        public long getRefId() {\r\n            return refId;\r\n        }\r\n    }","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>I came up with this solution which works in my case where I have objects created on multiple threads and are serializable:</p>\n\n<pre><code>public abstract class ObjBase implements Serializable\n    private static final long serialVersionUID = 1L;\n    private static final AtomicLong atomicRefId = new AtomicLong();\n\n    // transient field is not serialized\n    private transient long refId;\n\n    // default constructor will be called on base class even during deserialization\n    public ObjBase() {\n       refId = atomicRefId.incrementAndGet()\n    }\n\n    public long getRefId() {\n        return refId;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26201,"reputation":24755,"user_id":67945,"accept_rate":87,"display_name":"Frankie"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1550541691,"creation_date":1550541691,"answer_id":54757831,"question_id":909843,"body_markdown":"    // looking for that last hex?\r\n    org.joda.DateTime@57110da6\r\n\r\nIf you&#39;re looking into the `hashcode` Java types when you do a `.toString()` on an object the underlying code is this:\r\n\r\n    Integer.toHexString(hashCode())","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<pre><code>// looking for that last hex?\norg.joda.DateTime@57110da6\n</code></pre>\n\n<p>If you're looking into the <code>hashcode</code> Java types when you do a <code>.toString()</code> on an object the underlying code is this:</p>\n\n<pre><code>Integer.toHexString(hashCode())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4394469,"reputation":3058,"user_id":3585768,"accept_rate":80,"display_name":"Jonathan Benn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669212447,"creation_date":1669211757,"answer_id":74547960,"question_id":909843,"body_markdown":"Since `Object.hashCode()` and `System.identityHashCode()` do not provide IDs that are guaranteed to be unique, I think the correct answer is to generate a UUID or GUID:\r\n\r\n\r\n    java.util.UUID.randomUUID()\r\n\r\n\r\nThis answer is **thread-safe** and will work across **different virtual machines**.\r\n\r\nFor example, the `Identifiable` class could be extended as follows to provide any class with a unique ID:\r\n\r\n    public abstract class Identifiable {\r\n        public final UUID id = UUID.randomUUID();\r\n    }\r\n\r\n    ...\r\n\r\n    public class Example extends Identifiable {}\r\n\r\n    ...\r\n\r\n    public static void main(String[] args) {\r\n\r\n        Example example1 = new Example();\r\n        Example example2 = new Example();\r\n\r\n        example1.id.toString(); // e.g. 8308798d-7cec-427d-b7f8-7be762f3b5c7\r\n        example1.id.equals(example1.id); // true\r\n        example1.id.equals(example2.id); // false\r\n    }","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>Since <code>Object.hashCode()</code> and <code>System.identityHashCode()</code> do not provide IDs that are guaranteed to be unique, I think the correct answer is to generate a UUID or GUID:</p>\n<pre><code>java.util.UUID.randomUUID()\n</code></pre>\n<p>This answer is <strong>thread-safe</strong> and will work across <strong>different virtual machines</strong>.</p>\n<p>For example, the <code>Identifiable</code> class could be extended as follows to provide any class with a unique ID:</p>\n<pre><code>public abstract class Identifiable {\n    public final UUID id = UUID.randomUUID();\n}\n\n...\n\npublic class Example extends Identifiable {}\n\n...\n\npublic static void main(String[] args) {\n\n    Example example1 = new Example();\n    Example example2 = new Example();\n\n    example1.id.toString(); // e.g. 8308798d-7cec-427d-b7f8-7be762f3b5c7\n    example1.id.equals(example1.id); // true\n    example1.id.equals(example2.id); // false\n}\n</code></pre>\n"}],"owner":{"account_id":28564,"reputation":19183,"user_id":76393,"accept_rate":65,"display_name":"ivan_ivanovich_ivanoff"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":279811,"favorite_count":0,"down_vote_count":0,"up_vote_count":282,"accepted_answer_id":909861,"answer_count":11,"score":282,"last_activity_date":1669212447,"creation_date":1243330922,"question_id":909843,"body_markdown":"When a class in Java doesn&#39;t override **hashCode()**, \r\nprinting an instance of this class gives a nice unique number.\r\n\r\nThe Javadoc of Object says about **hashCode()**:\r\n&gt; *As much as is reasonably practical, the hashCode method defined by class Object does return distinct integers for distinct objects.*\r\n\r\nBut when the class overrides **hashCode()**, how can I get\r\nits unique number?","title":"How to get the unique ID of an object which overrides hashCode()?","body":"<p>When a class in Java doesn't override <strong>hashCode()</strong>, \nprinting an instance of this class gives a nice unique number.</p>\n\n<p>The Javadoc of Object says about <strong>hashCode()</strong>:</p>\n\n<blockquote>\n  <p><em>As much as is reasonably practical, the hashCode method defined by class Object does return distinct integers for distinct objects.</em></p>\n</blockquote>\n\n<p>But when the class overrides <strong>hashCode()</strong>, how can I get\nits unique number?</p>\n"},{"tags":["java","android","android-ksoap2","ksoap"],"answers":[{"tags":[],"owner":{"account_id":4093834,"reputation":1,"user_id":3361173,"display_name":"D.Djaber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669212388,"creation_date":1669212177,"answer_id":74548050,"question_id":74545834,"body_markdown":"I have found the solution :\r\n\r\nadd soapEnvelope.addMapping(Util.getWebServiceGed(), &quot;filesList&quot;, Vector.class);\r\n\r\nand change  arrayList&lt; Integer &gt; to  Vector&lt; Integer &gt;","title":"Android Ksoap2 cannot serialize Array of int","body":"<p>I have found the solution :</p>\n<p>add soapEnvelope.addMapping(Util.getWebServiceGed(), &quot;filesList&quot;, Vector.class);</p>\n<p>and change  arrayList&lt; Integer &gt; to  Vector&lt; Integer &gt;</p>\n"}],"owner":{"account_id":4093834,"reputation":1,"user_id":3361173,"display_name":"D.Djaber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669212388,"creation_date":1669201718,"question_id":74545834,"body_markdown":"I&#39;m having a problem trying to send an object which contains array of int to .net web service.\r\n\r\n**Here my XML**\r\n\r\n```\r\n      &lt;Token&gt;string&lt;/Token&gt;\r\n      &lt;Type&gt;string&lt;/Type&gt;\r\n      &lt;DownloadSelectionInfo&gt;\r\n        &lt;filesListCount&gt;int&lt;/filesListCount&gt;\r\n        &lt;filesList&gt;\r\n          &lt;int&gt;int&lt;/int&gt;\r\n          &lt;int&gt;int&lt;/int&gt;\r\n        &lt;/filesList&gt;\r\n        &lt;Filename&gt;string&lt;/Filename&gt;\r\n      &lt;/DownloadSelectionInfo&gt;\r\n```\r\n\r\n**Here my Serializable class**\r\n\r\n```\r\npublic class DownloadSelectionInfo implements KvmSerializable {\r\n    ....\r\n    private ArrayList&lt;Integer&gt; filesList;\r\n    ...\r\n    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {\r\n          ...\r\n            case 1:\r\n                info.type = PropertyInfo.VECTOR_CLASS;;\r\n                info.name = &quot;filesList&quot;;\r\n                break;\r\n         ...\r\n    }\r\n\r\n    public void setProperty(int index, Object value) {\r\n              ....\r\n            case 1:\r\n                filesList.add(Integer.parseInt(value.toString()));\r\n            .....\r\n    }\r\n}\r\n```\r\n\r\n**Here webservice call**\r\n\r\n```\r\n\r\n //add filesList\r\n SoapObject soFilesList = new SoapObject(Util.getWebService(),&quot;filesList&quot;);\r\n for(Integer i : downloadSelectionInfo.getFilesList()){\r\n     soFilesList.addProperty(&quot;int&quot;,i);\r\n }\r\n soDownloadSelectionInfo.addSoapObject(soFilesList);\r\n\r\n PropertyInfo pi = new PropertyInfo();\r\n pi.setName(&quot;DownloadSelectionInfo&quot;);\r\n pi.setValue(downloadSelectionInfo);\r\n pi.setType(DownloadSelectionInfo.class);\r\n Request.addProperty(pi);\r\n\r\n soapEnvelope.addMapping(Util.getWebService(), &quot;DownloadSelectionInfo&quot;,DownloadSelectionInfo.class);\r\n```\r\n\r\nBut I get error &quot;java.lang.RuntimeException: Cannot serialize \\[10,9,1\\]&quot;. Any help please?","title":"Android Ksoap2 cannot serialize Array of int","body":"<p>I'm having a problem trying to send an object which contains array of int to .net web service.</p>\n<p><strong>Here my XML</strong></p>\n<pre><code>      &lt;Token&gt;string&lt;/Token&gt;\n      &lt;Type&gt;string&lt;/Type&gt;\n      &lt;DownloadSelectionInfo&gt;\n        &lt;filesListCount&gt;int&lt;/filesListCount&gt;\n        &lt;filesList&gt;\n          &lt;int&gt;int&lt;/int&gt;\n          &lt;int&gt;int&lt;/int&gt;\n        &lt;/filesList&gt;\n        &lt;Filename&gt;string&lt;/Filename&gt;\n      &lt;/DownloadSelectionInfo&gt;\n</code></pre>\n<p><strong>Here my Serializable class</strong></p>\n<pre><code>public class DownloadSelectionInfo implements KvmSerializable {\n    ....\n    private ArrayList&lt;Integer&gt; filesList;\n    ...\n    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {\n          ...\n            case 1:\n                info.type = PropertyInfo.VECTOR_CLASS;;\n                info.name = &quot;filesList&quot;;\n                break;\n         ...\n    }\n\n    public void setProperty(int index, Object value) {\n              ....\n            case 1:\n                filesList.add(Integer.parseInt(value.toString()));\n            .....\n    }\n}\n</code></pre>\n<p><strong>Here webservice call</strong></p>\n<pre><code>\n //add filesList\n SoapObject soFilesList = new SoapObject(Util.getWebService(),&quot;filesList&quot;);\n for(Integer i : downloadSelectionInfo.getFilesList()){\n     soFilesList.addProperty(&quot;int&quot;,i);\n }\n soDownloadSelectionInfo.addSoapObject(soFilesList);\n\n PropertyInfo pi = new PropertyInfo();\n pi.setName(&quot;DownloadSelectionInfo&quot;);\n pi.setValue(downloadSelectionInfo);\n pi.setType(DownloadSelectionInfo.class);\n Request.addProperty(pi);\n\n soapEnvelope.addMapping(Util.getWebService(), &quot;DownloadSelectionInfo&quot;,DownloadSelectionInfo.class);\n</code></pre>\n<p>But I get error &quot;java.lang.RuntimeException: Cannot serialize [10,9,1]&quot;. Any help please?</p>\n"},{"tags":["java","mysql","spring","jpa","h2"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669212321,"creation_date":1663246459,"answer_id":73731528,"question_id":73731442,"body_markdown":"The [H2 MySQL compatibility mode][1] doesn&#39;t mention anything about an `IF()` function support. Your options are (at least):\r\n\r\n- [Request it from H2][2]\r\n- Replace `IF(a, b, c)` by standard SQL `CASE WHEN a THEN b ELSE c END`\r\n- Use testcontainers to run integration tests directly on MySQL rather than on H2 ([I&#39;ve blogged about this here, as I highly recommend it, irrespective of the ORM used][3])\r\n- Use a [SQL translator like jOOQ][4] to translate your native SQL to the target dialect, under the hood. Disclaimer: I work for the company behind jOOQ\r\n\r\nThe quickest fix is to use `CASE`. But personally, I recommend integration testing directly on MySQL, unless you&#39;re using H2 also as a production database product.\r\n\r\n\r\n  [1]: https://www.h2database.com/html/features.html?highlight=compatibility&amp;search=compat#compatibility\r\n  [2]: https://github.com/h2database/h2database/issues/new\r\n  [3]: https://blog.jooq.org/using-h2-as-a-test-database-product/\r\n  [4]: https://blog.jooq.org/using-jooq-to-write-vendor-agnostic-sql-with-jpas-native-query-or-formula/","title":"Native Query resulting in error only in H2 database","body":"<p>The <a href=\"https://www.h2database.com/html/features.html?highlight=compatibility&amp;search=compat#compatibility\" rel=\"nofollow noreferrer\">H2 MySQL compatibility mode</a> doesn't mention anything about an <code>IF()</code> function support. Your options are (at least):</p>\n<ul>\n<li><a href=\"https://github.com/h2database/h2database/issues/new\" rel=\"nofollow noreferrer\">Request it from H2</a></li>\n<li>Replace <code>IF(a, b, c)</code> by standard SQL <code>CASE WHEN a THEN b ELSE c END</code></li>\n<li>Use testcontainers to run integration tests directly on MySQL rather than on H2 (<a href=\"https://blog.jooq.org/using-h2-as-a-test-database-product/\" rel=\"nofollow noreferrer\">I've blogged about this here, as I highly recommend it, irrespective of the ORM used</a>)</li>\n<li>Use a <a href=\"https://blog.jooq.org/using-jooq-to-write-vendor-agnostic-sql-with-jpas-native-query-or-formula/\" rel=\"nofollow noreferrer\">SQL translator like jOOQ</a> to translate your native SQL to the target dialect, under the hood. Disclaimer: I work for the company behind jOOQ</li>\n</ul>\n<p>The quickest fix is to use <code>CASE</code>. But personally, I recommend integration testing directly on MySQL, unless you're using H2 also as a production database product.</p>\n"}],"owner":{"account_id":8017300,"reputation":197,"user_id":6047129,"accept_rate":40,"display_name":"Felipe Hogrefe Bento"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1247,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73731528,"answer_count":1,"score":2,"last_activity_date":1669212321,"creation_date":1663246125,"question_id":73731442,"body_markdown":"I have a query that runs on MySQL databases but not on h2.\r\n\r\nThis is my repository:\r\n \r\n\r\n     @Query(value = &quot;SELECT r.* FROM rewards r &quot;\r\n          + &quot;INNER JOIN models m ON r.model_id = m.model_pk  &quot;\r\n          + &quot;WHERE m.printer_family = :businessPrinterFamily &quot;\r\n          + &quot;AND r.reward_type IN (:rewardTypes) &quot;\r\n          + &quot;AND IF(:isOpportunities, m.model_pk IN (:businessPrinterModels), TRUE) &quot;\r\n          + &quot;ORDER BY :sortingMethod&quot;,\r\n          countQuery = &quot;SELECT r.* FROM rewards r &quot;\r\n              + &quot;INNER JOIN models m ON r.model_id = m.model_pk  &quot;\r\n              + &quot;WHERE m.printer_family = :businessPrinterFamily &quot;\r\n              + &quot;AND r.reward_type IN (:rewardTypes) &quot;\r\n              + &quot;AND IF(:isOpportunities, m.model_pk IN (:businessPrinterModels), TRUE) &quot;,\r\n          nativeQuery = true)\r\n      List&lt;Reward&gt; getFilteredRewards(@Param(&quot;sortingMethod&quot;) String sortingMethod,\r\n          @Param(&quot;isOpportunities&quot;) boolean isOpportunities,\r\n          @Param(&quot;businessPrinterModels&quot;) List&lt;Integer&gt; businessPrinterModels,\r\n          @Param(&quot;rewardTypes&quot;) List&lt;Integer&gt; rewardTypes,\r\n          @Param(&quot;businessPrinterFamily&quot;) int businessPrinterFamily, Pageable pageable);\r\n\r\nBut only on h2 I get the following error:\r\n\r\n\r\n    could not prepare statement; SQL [SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\r\n    org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement; SQL [SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\r\n    ...\r\n    Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND [*]IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?&quot;; expected &quot;INTERSECTS (, NOT, EXISTS, UNIQUE, INTERSECTS&quot;; SQL statement:\r\n    SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ? [42001-214]\r\n\r\n    \t\r\n\r\nIn the logs I get the following:\r\n\r\n    2022-09-15 09:35:15.647 ERROR 267713 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : Syntax error in SQL statement &quot;SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND [*]IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?&quot;; expected &quot;INTERSECTS (, NOT, EXISTS, UNIQUE, INTERSECTS&quot;; SQL statement:\r\n    SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ? [42001-214]\r\n\r\nMy h2 database is configured as follows:\r\n\r\n    spring:\r\n      datasource:\r\n        url: jdbc:h2:mem:testdb;MODE=MySQL\r\n        username: sa\r\n        password:\r\n        driver-class-name: org.h2.Driver\r\n      jpa:\r\n        defer-datasource-initialization: false\r\n      h2:\r\n        console:\r\n          enabled: true\r\n          path: /h2-console\r\n\r\nAny ideas of whats wrong?","title":"Native Query resulting in error only in H2 database","body":"<p>I have a query that runs on MySQL databases but not on h2.</p>\n<p>This is my repository:</p>\n<pre><code> @Query(value = &quot;SELECT r.* FROM rewards r &quot;\n      + &quot;INNER JOIN models m ON r.model_id = m.model_pk  &quot;\n      + &quot;WHERE m.printer_family = :businessPrinterFamily &quot;\n      + &quot;AND r.reward_type IN (:rewardTypes) &quot;\n      + &quot;AND IF(:isOpportunities, m.model_pk IN (:businessPrinterModels), TRUE) &quot;\n      + &quot;ORDER BY :sortingMethod&quot;,\n      countQuery = &quot;SELECT r.* FROM rewards r &quot;\n          + &quot;INNER JOIN models m ON r.model_id = m.model_pk  &quot;\n          + &quot;WHERE m.printer_family = :businessPrinterFamily &quot;\n          + &quot;AND r.reward_type IN (:rewardTypes) &quot;\n          + &quot;AND IF(:isOpportunities, m.model_pk IN (:businessPrinterModels), TRUE) &quot;,\n      nativeQuery = true)\n  List&lt;Reward&gt; getFilteredRewards(@Param(&quot;sortingMethod&quot;) String sortingMethod,\n      @Param(&quot;isOpportunities&quot;) boolean isOpportunities,\n      @Param(&quot;businessPrinterModels&quot;) List&lt;Integer&gt; businessPrinterModels,\n      @Param(&quot;rewardTypes&quot;) List&lt;Integer&gt; rewardTypes,\n      @Param(&quot;businessPrinterFamily&quot;) int businessPrinterFamily, Pageable pageable);\n</code></pre>\n<p>But only on h2 I get the following error:</p>\n<pre><code>could not prepare statement; SQL [SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement; SQL [SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\n...\nCaused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement &quot;SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND [*]IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?&quot;; expected &quot;INTERSECTS (, NOT, EXISTS, UNIQUE, INTERSECTS&quot;; SQL statement:\nSELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ? [42001-214]\n\n    \n</code></pre>\n<p>In the logs I get the following:</p>\n<pre><code>2022-09-15 09:35:15.647 ERROR 267713 --- [    Test worker] o.h.engine.jdbc.spi.SqlExceptionHelper   : Syntax error in SQL statement &quot;SELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND [*]IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ?&quot;; expected &quot;INTERSECTS (, NOT, EXISTS, UNIQUE, INTERSECTS&quot;; SQL statement:\nSELECT r.* FROM rewards r INNER JOIN models m ON r.model_id = m.model_pk  WHERE m.printer_family = ? AND r.reward_type IN (?, ?) AND IF(?, m.model_pk IN (?), TRUE) ORDER BY ? limit ? [42001-214]\n</code></pre>\n<p>My h2 database is configured as follows:</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:h2:mem:testdb;MODE=MySQL\n    username: sa\n    password:\n    driver-class-name: org.h2.Driver\n  jpa:\n    defer-datasource-initialization: false\n  h2:\n    console:\n      enabled: true\n      path: /h2-console\n</code></pre>\n<p>Any ideas of whats wrong?</p>\n"},{"tags":["java","android","android-r8","rt.jar"],"comments":[{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1669165075,"post_id":74540471,"comment_id":131581212,"body_markdown":"What Java `rt.jar` good for inside APK/AAR? I find that highly questionable.","body":"What Java <code>rt.jar</code> good for inside APK/AAR? I find that highly questionable."},{"owner":{"account_id":1167860,"reputation":12125,"user_id":1145744,"accept_rate":76,"display_name":"AndreaF"},"score":0,"creation_date":1669165343,"post_id":74540471,"comment_id":131581243,"body_markdown":"@MartinZeitler It doesn&#39;t include rt.jar in App released, but it avoid optimization to strip away some Java SE libraries without the need to configure all special exception one by one.","body":"@MartinZeitler It doesn&#39;t include rt.jar in App released, but it avoid optimization to strip away some Java SE libraries without the need to configure all special exception one by one."},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1669166266,"post_id":74540471,"comment_id":131581394,"body_markdown":"Well, the Java SE SDK `rt.jar` has absolutely nothing to do with Android SDK `android.jar`. This does not belong into the package, because the target device has the runtime anyway. Don&#39;t mix Standard Edition (desktop) with Android Java (mobile). This means, even if you somehow manage to stuff it into the package, it&#39;s just bloat which might even be optimized (not packaged, because it&#39;s not being used).","body":"Well, the Java SE SDK <code>rt.jar</code> has absolutely nothing to do with Android SDK <code>android.jar</code>. This does not belong into the package, because the target device has the runtime anyway. Don&#39;t mix Standard Edition (desktop) with Android Java (mobile). This means, even if you somehow manage to stuff it into the package, it&#39;s just bloat which might even be optimized (not packaged, because it&#39;s not being used)."},{"owner":{"account_id":1167860,"reputation":12125,"user_id":1145744,"accept_rate":76,"display_name":"AndreaF"},"score":0,"creation_date":1669166644,"post_id":74540471,"comment_id":131581443,"body_markdown":"@MartinZeitler Of course it is not part of Android SDK (the point to include it is exactly this),  but you are failing to understand the reason why I do this.  I guess you have used thirdy party jars not part of Android SDK!?! That is what I&#39;m doing, the only difference is that these are also part of Java Se and I avoid a lot of time wasted in keep this keep that in obfuscator config with just a code line, including rt.jar is nothing more than a whitelist trick for shrinker/obfuscator in this case.","body":"@MartinZeitler Of course it is not part of Android SDK (the point to include it is exactly this),  but you are failing to understand the reason why I do this.  I guess you have used thirdy party jars not part of Android SDK!?! That is what I&#39;m doing, the only difference is that these are also part of Java Se and I avoid a lot of time wasted in keep this keep that in obfuscator config with just a code line, including rt.jar is nothing more than a whitelist trick for shrinker/obfuscator in this case."},{"owner":{"account_id":1167860,"reputation":12125,"user_id":1145744,"accept_rate":76,"display_name":"AndreaF"},"score":0,"creation_date":1669167453,"post_id":74540471,"comment_id":131581543,"body_markdown":"Consider the whole resulting apk is just 7MB (and it doesn&#39;t include any native code that may cause compatibility issues). I have used this method for long time, the problem is only with R8 shrinker now that I have migrated my code to Java 11 due to jmods.","body":"Consider the whole resulting apk is just 7MB (and it doesn&#39;t include any native code that may cause compatibility issues). I have used this method for long time, the problem is only with R8 shrinker now that I have migrated my code to Java 11 due to jmods."},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1669199778,"post_id":74540471,"comment_id":131588740,"body_markdown":"The target device has `rt.jar` and `android.jar`... and this `rt.jar` will not be processed anyway. And you don&#39;t even have to use R8, but ProGuard can still be applied: https://github.com/Guardsquare/proguard","body":"The target device has <code>rt.jar</code> and <code>android.jar</code>... and this <code>rt.jar</code> will not be processed anyway. And you don&#39;t even have to use R8, but ProGuard can still be applied: <a href=\"https://github.com/Guardsquare/proguard\" rel=\"nofollow noreferrer\">github.com/Guardsquare/proguard</a>"}],"answers":[{"tags":[],"owner":{"account_id":2812752,"reputation":4008,"user_id":2418642,"display_name":"sgjesse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669211457,"creation_date":1669211457,"answer_id":74547897,"question_id":74540471,"body_markdown":"When R8 is _not_ used for Android projects (where `android.jar` is the runtime library) one needs the Java runtime library, which was in `rt.jar` until Java 8. For later JDKs a file system provider is included in `$JAVA_HOME/lib/jrt-fs.jar`. R8 has support for using that by passing the `JAVA_HOME` directory as the library path to R8, so:\r\n```\r\n  $JAVA_HOME/bin/java -cp r8-jar com.android.tools.r8.R8 --lib $JAVA_HOME ...\r\n```\r\nWill work for all JDK versions. If the `JAVA_HOME` has a `rt.jar` that is used and otherwise the file system provider is used to find the runtime library. See the code for handling this [here](https://r8.googlesource.com/r8/+/d940a4dfc8149f4f65dba5dce6b27bd5fa5e8e8c/src/main/java/com/android/tools/r8/BaseCompilerCommandParser.java#284).\r\n\r\nNote, this does not work when using `-libraryjars` in a configuration file, only for the `--lib` argument directly to R8. Opened [issue 260213385](https://issuetracker.google.com/260213385) on that.\r\n\r\nAlso note that, that when the file system provider is loaded it will always expose the runtime of the _running_ JVM, so doing this\r\n```\r\n  $JAVA_HOME_1/bin/java -cp r8-jar com.android.tools.r8.R8 --lib $JAVA_HOME_2 ...\r\n```\r\nyou will still see the the runtime of `JAVA_HOME_1` if `JAVA_HOME_2` is for JDK-9 or newer.","title":"How to include jmods with R8 in Android?","body":"<p>When R8 is <em>not</em> used for Android projects (where <code>android.jar</code> is the runtime library) one needs the Java runtime library, which was in <code>rt.jar</code> until Java 8. For later JDKs a file system provider is included in <code>$JAVA_HOME/lib/jrt-fs.jar</code>. R8 has support for using that by passing the <code>JAVA_HOME</code> directory as the library path to R8, so:</p>\n<pre><code>  $JAVA_HOME/bin/java -cp r8-jar com.android.tools.r8.R8 --lib $JAVA_HOME ...\n</code></pre>\n<p>Will work for all JDK versions. If the <code>JAVA_HOME</code> has a <code>rt.jar</code> that is used and otherwise the file system provider is used to find the runtime library. See the code for handling this <a href=\"https://r8.googlesource.com/r8/+/d940a4dfc8149f4f65dba5dce6b27bd5fa5e8e8c/src/main/java/com/android/tools/r8/BaseCompilerCommandParser.java#284\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Note, this does not work when using <code>-libraryjars</code> in a configuration file, only for the <code>--lib</code> argument directly to R8. Opened <a href=\"https://issuetracker.google.com/260213385\" rel=\"nofollow noreferrer\">issue 260213385</a> on that.</p>\n<p>Also note that, that when the file system provider is loaded it will always expose the runtime of the <em>running</em> JVM, so doing this</p>\n<pre><code>  $JAVA_HOME_1/bin/java -cp r8-jar com.android.tools.r8.R8 --lib $JAVA_HOME_2 ...\n</code></pre>\n<p>you will still see the the runtime of <code>JAVA_HOME_1</code> if <code>JAVA_HOME_2</code> is for JDK-9 or newer.</p>\n"}],"owner":{"account_id":1167860,"reputation":12125,"user_id":1145744,"accept_rate":76,"display_name":"AndreaF"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669211457,"creation_date":1669163101,"question_id":74540471,"body_markdown":"With older JDK versions I included `rt.jar` in R8 configuration with\r\n\r\n    -libraryjars &lt;java.home&gt;/lib/rt.jar\r\n\r\nIn order to meet requirements of various java libraries not Android-specific (NOTE this doesn&#39;t mean that whole `rt.jar` will be included in App, it&#39;s just a practical way to avoid R8 optimization to strip away important Java SE code without configuring all keep whitelist one by one)\r\n\r\nWith JDK above 8 `rt.jar` is no longer available and it has been replaced by `jmods`, searching seems the proguart syntax to include equivalent jmods alternative to `rt.jar` seems to be \r\n\r\n    -libraryjars  &lt;java.home&gt;/jmods/java.base.jmod(!**.jar,!module-info.class)\r\n\r\nSo I have tried it, but unfortunately with R8 I get this error:\r\n\r\n    Unexpected input type. Only archive types are supported, e.g., .jar, .zip, etc.\r\n\r\nWhat is the correct way to include it?","title":"How to include jmods with R8 in Android?","body":"<p>With older JDK versions I included <code>rt.jar</code> in R8 configuration with</p>\n<pre><code>-libraryjars &lt;java.home&gt;/lib/rt.jar\n</code></pre>\n<p>In order to meet requirements of various java libraries not Android-specific (NOTE this doesn't mean that whole <code>rt.jar</code> will be included in App, it's just a practical way to avoid R8 optimization to strip away important Java SE code without configuring all keep whitelist one by one)</p>\n<p>With JDK above 8 <code>rt.jar</code> is no longer available and it has been replaced by <code>jmods</code>, searching seems the proguart syntax to include equivalent jmods alternative to <code>rt.jar</code> seems to be</p>\n<pre><code>-libraryjars  &lt;java.home&gt;/jmods/java.base.jmod(!**.jar,!module-info.class)\n</code></pre>\n<p>So I have tried it, but unfortunately with R8 I get this error:</p>\n<pre><code>Unexpected input type. Only archive types are supported, e.g., .jar, .zip, etc.\n</code></pre>\n<p>What is the correct way to include it?</p>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1661850260,"post_id":73539723,"comment_id":129863547,"body_markdown":"Please share the full stacktrace of the error. It is not possible to understand the root cause from what you shared.","body":"Please share the full stacktrace of the error. It is not possible to understand the root cause from what you shared."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1661850420,"post_id":73539723,"comment_id":129863603,"body_markdown":"The issue is your statement requires that exactly one result is returned, but there are no results returned","body":"The issue is your statement requires that exactly one result is returned, but there are no results returned"},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661850796,"post_id":73539723,"comment_id":129863759,"body_markdown":"Hi, thanks for your reply:\nFull error stack: https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing","body":"Hi, thanks for your reply: Full error stack: <a href=\"https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851141,"post_id":73539723,"comment_id":129863871,"body_markdown":"The issue is not his statement, but one of spring-batch(org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307)(","body":"The issue is not his statement, but one of spring-batch(org.springframework.batch.core.repository.dao.J&zwnj;&#8203;dbcJobExecutionDao.s&zwnj;&#8203;ynchronizeStatus(Jdb&zwnj;&#8203;cJobExecutionDao.jav&zwnj;&#8203;a:307)("},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851329,"post_id":73539723,"comment_id":129863940,"body_markdown":"4.3.6 source code: https://github.com/spring-projects/spring-batch/blob/4.3.6/spring-batch-core/src/main/java/org/springframework/batch/core/repository/dao/JdbcJobExecutionDao.java","body":"4.3.6 source code: <a href=\"https://github.com/spring-projects/spring-batch/blob/4.3.6/spring-batch-core/src/main/java/org/springframework/batch/core/repository/dao/JdbcJobExecutionDao.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-batch/blob/4.3.6/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851429,"post_id":73539723,"comment_id":129863996,"body_markdown":"It is the query: &quot;SELECT VERSION FROM %PREFIX%JOB_EXECUTION WHERE JOB_EXECUTION_ID=?&quot;","body":"It is the query: &quot;SELECT VERSION FROM %PREFIX%JOB_EXECUTION WHERE JOB_EXECUTION_ID=?&quot;"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851499,"post_id":73539723,"comment_id":129864025,"body_markdown":"Your update seems to have brought (spring-batch)data into an inconsistent state..","body":"Your update seems to have brought (spring-batch)data into an inconsistent state.."},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661853098,"post_id":73539723,"comment_id":129864600,"body_markdown":"@MahmoudBenHassine I have added the logs can you please have a look","body":"@MahmoudBenHassine I have added the logs can you please have a look"},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661853145,"post_id":73539723,"comment_id":129864620,"body_markdown":"@xerx593, Hi man, can you please help with the resolution.","body":"@xerx593, Hi man, can you please help with the resolution."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1661888352,"post_id":73539723,"comment_id":129877972,"body_markdown":"Yes, something seems to be wrong with your Batch meta-data. The only way to help you in an efficient way is to share a [minimal complete example](https://stackoverflow.com/help/minimal-reproducible-example) that reproduces the issue.","body":"Yes, something seems to be wrong with your Batch meta-data. The only way to help you in an efficient way is to share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal complete example</a> that reproduces the issue."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661889788,"post_id":73539723,"comment_id":129878443,"body_markdown":"i&#39;d investigate the data(base), debug..., read upgrade guides (carefully!), and keep in mind, that spring-batch is not only a lib, but commonly also a (complete) database (schema).","body":"i&#39;d investigate the data(base), debug..., read upgrade guides (carefully!), and keep in mind, that spring-batch is not only a lib, but commonly also a (complete) database (schema)."},{"owner":{"account_id":151905,"reputation":3027,"user_id":366053,"accept_rate":76,"display_name":"Manish Khot"},"score":0,"creation_date":1668067873,"post_id":73539723,"comment_id":131318431,"body_markdown":"I am facing a similar issue and the scenario also is same where we upgraded the Spring boot batch version from 2.1.7 to 2.4.0 @AmitChaudhary","body":"I am facing a similar issue and the scenario also is same where we upgraded the Spring boot batch version from 2.1.7 to 2.4.0 @AmitChaudhary"}],"answers":[{"tags":[],"owner":{"account_id":27025100,"reputation":1,"user_id":20582496,"display_name":"xandar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1669211290,"creation_date":1669211290,"answer_id":74547851,"question_id":73539723,"body_markdown":"In my case the problem was in spring.datasource.hikari.auto-commit=false. After changing it to true it worked.","title":"Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In my case the problem was in spring.datasource.hikari.auto-commit=false. After changing it to true it worked.</p>\n"}],"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":982,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1669211290,"creation_date":1661849923,"question_id":73539723,"body_markdown":"I am upgrading my Spring boot/batch code from 1.4.0 to 2.7.2. The migration is done and most of the code is working. The code gets deployed to JBOSS7/wildfly.\r\n\r\nI am getting an error while executing the job.\r\n\r\nError:\r\n\r\n```\r\n2022-08-30 08:16:04,280 INFO  [com.xyz.om.apm.batch.rest.ManualBatchTrigger] (default task-1) batchTrigger inside ManualBatchTrigger with date::: 20220714  ::::  triggered at::: Tue Aug 30 08:16:04 UTC 2022\r\n2022-08-30 08:16:04,316 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] launched with the following parameters: [{JobID=1661847364286, date=1657756800000}]\r\n\r\n2022-08-30 08:16:04,370 ERROR [org.springframework.batch.core.job.AbstractJob] (default task-1) Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.22.jar:5.3.22]\r\n\t\r\n\r\n2022-08-30 08:16:04,382 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] failed unexpectedly and fatally with the following parameters: [{JobID=1661847364286, date=1657756800000}]: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:378) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\r\n\r\n```\r\nI am not able to understand the issue here.\r\n\r\nCode:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/rest&quot;)\r\npublic class ManualBatchTrigger {\r\n\t\r\n\tprivate final static Logger logger = LoggerFactory.getLogger(ManualBatchTrigger.class);\r\n\t\r\n\t@Autowired\r\n\tprivate Environment environment;\r\n\t@Autowired\r\n\tprivate SimpleJobLauncher jobLauncher;\r\n\t@Autowired\r\n\tprivate Step baseApplicationDataExtractorStep;\r\n\t@Autowired\r\n\tprivate Job baseApplicationDataExtractorJob;\r\n\t@Autowired\r\n\tprivate FTSUtils ftsUtils;\r\n\r\n@RequestMapping(value = &quot;/triggerbatch/{date}&quot;, method = RequestMethod.GET)\r\n\tpublic String batchTrigger(@PathVariable String date) throws ParseException {\r\n\r\n\t\tlogger.info(&quot;batchTrigger inside ManualBatchTrigger with date::: &quot; + date + &quot;  ::::  triggered at::: &quot; + new Date());\r\n\r\n\t\tDateFormat format = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n\r\n\t\tJobExecution execution = null;\r\n\t\ttry {\r\n\t\t\tJobParameters param = new JobParametersBuilder()\r\n\t\t\t\t\t.addString(&quot;JobID&quot;, String.valueOf(System.currentTimeMillis()))\r\n\t\t\t\t\t.addDate(&quot;date&quot;, format.parse(date))\r\n\t\t\t\t\t.toJobParameters();\r\n\r\n\t\t\texecution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\r\n\t\t} catch(Exception e) {\r\n\t\t\tlogger.error(&quot;@@ Error in Manual Batch Trigger  2@@  :  &quot;, e);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif(execution != null) {\r\n\t\t\tlogger.info(&quot;execution != null&quot;);\r\n\t\t\tlogger.info(&quot;Job finished with status :&quot; + execution.getStatus());\r\n\t\t\treturn execution.getStatus().toString();\r\n\t\t}\t\t\t\r\n\t\treturn &quot;Job Failed!&quot;;\r\n\t}\r\n\r\n\tprivate Job baseApplicationDataExtractorJob(Step baseApplicationDataExtractorStep2) {\r\n\t\treturn baseApplicationDataExtractorJob;\r\n\t}\r\n```\r\n\r\n**Error is at this line:**\r\nI have googled the error 100 times but the error does not relate to any of solutions/queries asked.\r\n```\r\nexecution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\r\n```\r\n\r\n**FULL ERROR STACK: ** https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing","title":"Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I am upgrading my Spring boot/batch code from 1.4.0 to 2.7.2. The migration is done and most of the code is working. The code gets deployed to JBOSS7/wildfly.</p>\n<p>I am getting an error while executing the job.</p>\n<p>Error:</p>\n<pre><code>2022-08-30 08:16:04,280 INFO  [com.xyz.om.apm.batch.rest.ManualBatchTrigger] (default task-1) batchTrigger inside ManualBatchTrigger with date::: 20220714  ::::  triggered at::: Tue Aug 30 08:16:04 UTC 2022\n2022-08-30 08:16:04,316 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] launched with the following parameters: [{JobID=1661847364286, date=1657756800000}]\n\n2022-08-30 08:16:04,370 ERROR [org.springframework.batch.core.job.AbstractJob] (default task-1) Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n    at org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.22.jar:5.3.22]\n    \n\n2022-08-30 08:16:04,382 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] failed unexpectedly and fatally with the following parameters: [{JobID=1661847364286, date=1657756800000}]: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n    at org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:378) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\n\n</code></pre>\n<p>I am not able to understand the issue here.</p>\n<p>Code:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/rest&quot;)\npublic class ManualBatchTrigger {\n    \n    private final static Logger logger = LoggerFactory.getLogger(ManualBatchTrigger.class);\n    \n    @Autowired\n    private Environment environment;\n    @Autowired\n    private SimpleJobLauncher jobLauncher;\n    @Autowired\n    private Step baseApplicationDataExtractorStep;\n    @Autowired\n    private Job baseApplicationDataExtractorJob;\n    @Autowired\n    private FTSUtils ftsUtils;\n\n@RequestMapping(value = &quot;/triggerbatch/{date}&quot;, method = RequestMethod.GET)\n    public String batchTrigger(@PathVariable String date) throws ParseException {\n\n        logger.info(&quot;batchTrigger inside ManualBatchTrigger with date::: &quot; + date + &quot;  ::::  triggered at::: &quot; + new Date());\n\n        DateFormat format = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\n\n        JobExecution execution = null;\n        try {\n            JobParameters param = new JobParametersBuilder()\n                    .addString(&quot;JobID&quot;, String.valueOf(System.currentTimeMillis()))\n                    .addDate(&quot;date&quot;, format.parse(date))\n                    .toJobParameters();\n\n            execution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\n        } catch(Exception e) {\n            logger.error(&quot;@@ Error in Manual Batch Trigger  2@@  :  &quot;, e);\n            e.printStackTrace();\n        }\n        \n        if(execution != null) {\n            logger.info(&quot;execution != null&quot;);\n            logger.info(&quot;Job finished with status :&quot; + execution.getStatus());\n            return execution.getStatus().toString();\n        }           \n        return &quot;Job Failed!&quot;;\n    }\n\n    private Job baseApplicationDataExtractorJob(Step baseApplicationDataExtractorStep2) {\n        return baseApplicationDataExtractorJob;\n    }\n</code></pre>\n<p><strong>Error is at this line:</strong>\nI have googled the error 100 times but the error does not relate to any of solutions/queries asked.</p>\n<pre><code>execution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\n</code></pre>\n<p>**FULL ERROR STACK: ** <a href=\"https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing</a></p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"score":1,"creation_date":1572246673,"post_id":58585654,"comment_id":103487208,"body_markdown":"This exception probably occures because the `sort` method of the list adds the element a second time to the list while sorting. Therefore your solution to use a copy of the list to sort it is a quite good solution I think.","body":"This exception probably occures because the <code>sort</code> method of the list adds the element a second time to the list while sorting. Therefore your solution to use a copy of the list to sort it is a quite good solution I think."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1572273499,"post_id":58585654,"comment_id":103498796,"body_markdown":"If I had to guess, this is probably something that needs to be done using a `ListView` and not a `VBox`.","body":"If I had to guess, this is probably something that needs to be done using a <code>ListView</code> and not a <code>VBox</code>."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1572273740,"post_id":58585654,"comment_id":103498931,"body_markdown":"https://gist.github.com/uphy/6dc368160f182cd2f80f","body":"<a href=\"https://gist.github.com/uphy/6dc368160f182cd2f80f\" rel=\"nofollow noreferrer\">gist.github.com/uphy/6dc368160f182cd2f80f</a>"},{"owner":{"account_id":9191414,"reputation":521,"user_id":6831795,"display_name":"Alex"},"score":0,"creation_date":1572293170,"post_id":58585654,"comment_id":103507999,"body_markdown":"I am pretty sure Tobias is right and your solution seems like the only way to do it.","body":"I am pretty sure Tobias is right and your solution seems like the only way to do it."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572296240,"post_id":58585654,"comment_id":103509117,"body_markdown":"The `ObservableList` used for the `children` list is an instance of `VetoableListDecorator` and that decorator does not override `List#sort`. This causes a problem because the default sort method calls `set` on itself without removing any elements first, thus the `IllegalArgumentException`. I consider this a bug since the other `ObservableList` implementations _do_ override `sort` so that only one change event is fired for the entire operation. Your solution is likely the only workaround.","body":"The <code>ObservableList</code> used for the <code>children</code> list is an instance of <code>VetoableListDecorator</code> and that decorator does not override <code>List#sort</code>. This causes a problem because the default sort method calls <code>set</code> on itself without removing any elements first, thus the <code>IllegalArgumentException</code>. I consider this a bug since the other <code>ObservableList</code> implementations <i>do</i> override <code>sort</code> so that only one change event is fired for the entire operation. Your solution is likely the only workaround."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572297804,"post_id":58585654,"comment_id":103509678,"body_markdown":"I submitted a bug report. Waiting to see if it&#39;s accepted.","body":"I submitted a bug report. Waiting to see if it&#39;s accepted."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572427495,"post_id":58585654,"comment_id":103552381,"body_markdown":"Bug accepted: https://bugs.openjdk.java.net/browse/JDK-8233179","body":"Bug accepted: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8233179\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8233179</a>"},{"owner":{"account_id":16472927,"reputation":1155,"user_id":11901563,"display_name":"Andy"},"score":0,"creation_date":1573032867,"post_id":58585654,"comment_id":103745244,"body_markdown":"Thank you very much, although I haven&#39;t found any other way at the moment.","body":"Thank you very much, although I haven&#39;t found any other way at the moment."}],"answers":[{"tags":[],"owner":{"account_id":27025135,"reputation":11,"user_id":20582531,"display_name":"Newbie"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669211107,"creation_date":1669211107,"answer_id":74547812,"question_id":58585654,"body_markdown":"For me it works like this:\r\n\r\n        private static class CoparaterAscending&lt;T&gt; implements Comparator&lt;T&gt; {\r\n\r\n        @Override\r\n        public int compare(T o1, T o2) {\r\n\r\n            int numberNode1 = Integer.parseInt(((CheckBox)o1).getText());\r\n            int numberNode2 = Integer.parseInt(((CheckBox)o2).getText());\r\n            System.out.println(numberNode1 + &quot; &quot; + numberNode2);\r\n            if ((numberNode1 &gt; numberNode2)) {\r\n                return 1;\r\n            } else if ((numberNode1 &lt; numberNode2)) {\r\n                return -1;\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n    \r\n    comp = new CoparaterAscending&lt;Node&gt;();\r\n    FXCollections.sort(selectedItemsView.getChildren(), comp);\r\n\r\n\r\nWhere the selectedItemsView is a VBox populated with CheckBoxes that are labled with unique numbers.","title":"How to sort node in the VBox in JavaFX? I Have a &quot;duplicate children added&quot; Exception","body":"<p>For me it works like this:</p>\n<pre><code>    private static class CoparaterAscending&lt;T&gt; implements Comparator&lt;T&gt; {\n\n    @Override\n    public int compare(T o1, T o2) {\n\n        int numberNode1 = Integer.parseInt(((CheckBox)o1).getText());\n        int numberNode2 = Integer.parseInt(((CheckBox)o2).getText());\n        System.out.println(numberNode1 + &quot; &quot; + numberNode2);\n        if ((numberNode1 &gt; numberNode2)) {\n            return 1;\n        } else if ((numberNode1 &lt; numberNode2)) {\n            return -1;\n        }\n        return 0;\n    }\n}\n\ncomp = new CoparaterAscending&lt;Node&gt;();\nFXCollections.sort(selectedItemsView.getChildren(), comp);\n</code></pre>\n<p>Where the selectedItemsView is a VBox populated with CheckBoxes that are labled with unique numbers.</p>\n"}],"owner":{"account_id":16472927,"reputation":1155,"user_id":11901563,"display_name":"Andy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":940,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1669211107,"creation_date":1572235451,"question_id":58585654,"body_markdown":"I have got a JavaFX 8 VBox,and want to sort node in the VBox,But I have a Exception&quot;Children: duplicate children added&quot;.\r\n```Java\r\n    private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\r\n        if (!addList.isEmpty()) {\r\n\r\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\r\n            titledPane.setItems(addList);\r\n\r\n            stackedTitledPanes.getChildren().add(titledPane);\r\n            stackedTitledPanes.getChildren().sort(comparatorTitledPane);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI found a quick fix,but I think there might be a better solution.\r\n\r\n\r\n\r\n\r\n```Java\r\n  private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\r\n        if (!addList.isEmpty()) {\r\n\r\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\r\n            titledPane.setItems(addList);\r\n\r\n            stackedTitledPanes.getChildren().add(titledPane);\r\n\r\n            List list = new ArrayList(stackedTitledPanes.getChildren());\r\n\r\n            list.sort(comparatorTitledPane);\r\n            Collections.reverse(list);\r\n            stackedTitledPanes.getChildren().clear();\r\n            stackedTitledPanes.getChildren().addAll(list);\r\n        }\r\n    }\r\n```\r\n\r\nThis is the full stack trace\r\n\r\n```Java\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox@2cdae672\r\n\tat javafx.scene.Parent$2.onProposedChange(Parent.java:454)\r\n\tat com.sun.javafx.collections.VetoableListDecorator$VetoableListIteratorDecorator.set(VetoableListDecorator.java:768)\r\n\tat java.util.List.sort(List.java:482)\r\n\tat app.control.mytomato.StackedPanes.addTitledPane(StackedPanes.java:93)\r\n\tat app.control.mytomato.StackedPanes.access$000(StackedPanes.java:16)\r\n\tat app.control.mytomato.StackedPanes$3.onChanged(StackedPanes.java:62)\r\n\tat com.sun.javafx.collections.MapListenerHelper$SingleChange.fireValueChangedEvent(MapListenerHelper.java:163)\r\n\tat com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)\r\n\tat com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)\r\n\tat com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173)\r\n\tat app.control.mytomato.StackedPanes.addItem(StackedPanes.java:127)\r\n\tat app.control.mytomato.StackedPanes.addItems(StackedPanes.java:119)\r\n\tat app.view.EditDialogControl.lambda$handleOkButton$0(EditDialogControl.java:88)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\r\n\tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat com.sun.glass.ui.win.WinApplication.lambda$null$3(WinApplication.java:177)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","title":"How to sort node in the VBox in JavaFX? I Have a &quot;duplicate children added&quot; Exception","body":"<p>I have got a JavaFX 8 VBox,and want to sort node in the VBox,But I have a Exception\"Children: duplicate children added\".</p>\n\n<pre><code>    private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\n        if (!addList.isEmpty()) {\n\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\n            titledPane.setItems(addList);\n\n            stackedTitledPanes.getChildren().add(titledPane);\n            stackedTitledPanes.getChildren().sort(comparatorTitledPane);\n        }\n    }\n</code></pre>\n\n<p>I found a quick fix,but I think there might be a better solution.</p>\n\n<pre><code>  private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\n        if (!addList.isEmpty()) {\n\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\n            titledPane.setItems(addList);\n\n            stackedTitledPanes.getChildren().add(titledPane);\n\n            List list = new ArrayList(stackedTitledPanes.getChildren());\n\n            list.sort(comparatorTitledPane);\n            Collections.reverse(list);\n            stackedTitledPanes.getChildren().clear();\n            stackedTitledPanes.getChildren().addAll(list);\n        }\n    }\n</code></pre>\n\n<p>This is the full stack trace</p>\n\n<pre><code>Exception in thread \"JavaFX Application Thread\" java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox@2cdae672\n    at javafx.scene.Parent$2.onProposedChange(Parent.java:454)\n    at com.sun.javafx.collections.VetoableListDecorator$VetoableListIteratorDecorator.set(VetoableListDecorator.java:768)\n    at java.util.List.sort(List.java:482)\n    at app.control.mytomato.StackedPanes.addTitledPane(StackedPanes.java:93)\n    at app.control.mytomato.StackedPanes.access$000(StackedPanes.java:16)\n    at app.control.mytomato.StackedPanes$3.onChanged(StackedPanes.java:62)\n    at com.sun.javafx.collections.MapListenerHelper$SingleChange.fireValueChangedEvent(MapListenerHelper.java:163)\n    at com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)\n    at com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)\n    at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173)\n    at app.control.mytomato.StackedPanes.addItem(StackedPanes.java:127)\n    at app.control.mytomato.StackedPanes.addItems(StackedPanes.java:119)\n    at app.view.EditDialogControl.lambda$handleOkButton$0(EditDialogControl.java:88)\n    at com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$null$3(WinApplication.java:177)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","java-17"],"comments":[{"owner":{"account_id":7195741,"reputation":1,"user_id":6110094,"accept_rate":83,"display_name":"0___________"},"score":0,"creation_date":1669020368,"post_id":74516048,"comment_id":131539073,"body_markdown":"Do not spam tags. How was C related to this question","body":"Do not spam tags. How was C related to this question"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669021249,"post_id":74516048,"comment_id":131539314,"body_markdown":"JDK source code is from c","body":"JDK source code is from c"},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":2,"creation_date":1669046950,"post_id":74516048,"comment_id":131548647,"body_markdown":"There is a comment in BufferedInputStream right at the beginning:  &quot;As this class is used early during bootstrap, it&#39;s motivated to use Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater (or VarHandles) to reduce dependencies and improve startup time.&quot;","body":"There is a comment in BufferedInputStream right at the beginning:  &quot;As this class is used early during bootstrap, it&#39;s motivated to use Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater (or VarHandles) to reduce dependencies and improve startup time.&quot;"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669096054,"post_id":74516048,"comment_id":131559574,"body_markdown":"@StefanZobel Of course I know the comment,I just want to know more details about it.","body":"@StefanZobel Of course I know the comment,I just want to know more details about it."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":1,"creation_date":1669102641,"post_id":74516048,"comment_id":131561108,"body_markdown":"Well, that comment should at least answer your &quot;Why is necessary to use compareAndSetReference method?&quot; question.","body":"Well, that comment should at least answer your &quot;Why is necessary to use compareAndSetReference method?&quot; question."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1669106532,"post_id":74516048,"comment_id":131562300,"body_markdown":"Dont ask two different questions at once. What does BUF_OFFSET field mean and Why is necessary to use compareAndSetReference are entirely unrelated.","body":"Dont ask two different questions at once. What does BUF_OFFSET field mean and Why is necessary to use compareAndSetReference are entirely unrelated."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669110658,"post_id":74516048,"comment_id":131563747,"body_markdown":"@Holger ok,I have amended it.Only to ask what BUF_OFFSET is first.","body":"@Holger ok,I have amended it.Only to ask what BUF_OFFSET is first."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1669110930,"post_id":74516048,"comment_id":131563862,"body_markdown":"This is an extreme implementation detail that you shouldn&#39;t concern yourself with unless you&#39;re going to be contributing to OpenJDK itself. As I said earlier, as a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to use it. You&#39;ll likely just get lost in details like this, and it will in fact not learn you how to program/use Java well.","body":"This is an extreme implementation detail that you shouldn&#39;t concern yourself with unless you&#39;re going to be contributing to OpenJDK itself. As I said earlier, as a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to use it. You&#39;ll likely just get lost in details like this, and it will in fact not learn you how to program/use Java well."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1669110941,"post_id":74516048,"comment_id":131563866,"body_markdown":"As the comment cited by Stefan Zobel already told, this class is deliberately not using `AtomicReferenceFieldUpdater` nor `VarHandle`, but a lowlevel class named `Unsafe` for the atomic update. This alternative does not encapsulate a `Field` object or equivalent but requires the raw offset into the object, to identify the field (memory location) to update. Thats why you see `BUF_OFFSET = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;)`  find the offset of the field `buf` and `U.compareAndSetReference(this, BUF_OFFSET, )`  update the field `buf` of the current object (`this`).","body":"As the comment cited by Stefan Zobel already told, this class is deliberately not using <code>AtomicReferenceFieldUpdater</code> nor <code>VarHandle</code>, but a lowlevel class named <code>Unsafe</code> for the atomic update. This alternative does not encapsulate a <code>Field</code> object or equivalent but requires the raw offset into the object, to identify the field (memory location) to update. Thats why you see <code>BUF_OFFSET = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;)</code>  find the offset of the field <code>buf</code> and <code>U.compareAndSetReference(this, BUF_OFFSET, )</code>  update the field <code>buf</code> of the current object (<code>this</code>)."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669114360,"post_id":74516048,"comment_id":131565165,"body_markdown":"@Holger Can I understand like this: the buf has a offset,the new longer array nbuf has a offset,too.The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset,so that let buf = nuf in the nextline.","body":"@Holger Can I understand like this: the buf has a offset,the new longer array nbuf has a offset,too.The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset,so that let buf = nuf in the nextline."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669115227,"post_id":74516048,"comment_id":131565458,"body_markdown":"@MarkRotteveel Thank you for your attention and advice!My Java level is probably for Google programming.I know the Java rules and grammar.When I start to write code,I am not familiar with the functions in details,that&#39;s why I am now reading source code.And that&#39;s no doubt to rise many problems when reading,but luckily I have found the treasure site--stackoverflow.So I begin to ask questions here.","body":"@MarkRotteveel Thank you for your attention and advice!My Java level is probably for Google programming.I know the Java rules and grammar.When I start to write code,I am not familiar with the functions in details,that&#39;s why I am now reading source code.And that&#39;s no doubt to rise many problems when reading,but luckily I have found the treasure site--stackoverflow.So I begin to ask questions here."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":2,"creation_date":1669119969,"post_id":74516048,"comment_id":131567006,"body_markdown":"&quot;The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset ...&quot;. No, not at all. The `compareAndSetReference` call atomically updates the member variable `buf` to `nbuf` if it is currently holding `buffer`. Nothing else is happening here.","body":"&quot;The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset ...&quot;. No, not at all. The <code>compareAndSetReference</code> call atomically updates the member variable <code>buf</code> to <code>nbuf</code> if it is currently holding <code>buffer</code>. Nothing else is happening here."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669122232,"post_id":74516048,"comment_id":131567832,"body_markdown":"@StefanZobel But &quot;buffer=nbuf&quot; has been written after &quot;if(!U.compareAndSetReference)&quot;,what will happened if I remove the if statement?","body":"@StefanZobel But &quot;buffer=nbuf&quot; has been written after &quot;if(!U.compareAndSetReference)&quot;,what will happened if I remove the if statement?"},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":1,"creation_date":1669123315,"post_id":74516048,"comment_id":131568245,"body_markdown":"&quot;buffer=nbuf&quot; sets `buffer`, not `buf`","body":"&quot;buffer=nbuf&quot; sets <code>buffer</code>, not <code>buf</code>"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669143367,"post_id":74516048,"comment_id":131576037,"body_markdown":"@StefanZobel I searched the word:&quot;AtomicReferenceFieldUpdater&quot; in google,and I realize it was using to change the volatile field&#39;s value.So the compareAndSetReference nearly does the samething?I guess,because of the word &quot;volatile&quot;,the buf couldn&#39;t let buf=nbuf directly,so it needs the compareAndSetReference to let nbuf replace the buf.","body":"@StefanZobel I searched the word:&quot;AtomicReferenceFieldUpdater&quot; in google,and I realize it was using to change the volatile field&#39;s value.So the compareAndSetReference nearly does the samething?I guess,because of the word &quot;volatile&quot;,the buf couldn&#39;t let buf=nbuf directly,so it needs the compareAndSetReference to let nbuf replace the buf."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":4,"creation_date":1669146727,"post_id":74516048,"comment_id":131577039,"body_markdown":"It is `if buf == buffer buf = nbuf;` but in an atomic way. It&#39;s like `compareAndSet` in AtomicReferenceFieldUpdater. What is important is not only that the field is volatile but that the whole process of comparing (reading) the field against the expected value (`buffer`) and if that is matched setting the field to its new value (`nbuf`) is an `atomic` operation. As the comment says that could have been done with an AtomicReferenceFieldUpdater at the cost of loading additional classes during JVM startup (slowing down the startup) and that is what they wanted to avoid by using the Unsafe API.","body":"It is <code>if buf == buffer buf = nbuf;</code> but in an atomic way. It&#39;s like <code>compareAndSet</code> in AtomicReferenceFieldUpdater. What is important is not only that the field is volatile but that the whole process of comparing (reading) the field against the expected value (<code>buffer</code>) and if that is matched setting the field to its new value (<code>nbuf</code>) is an <code>atomic</code> operation. As the comment says that could have been done with an AtomicReferenceFieldUpdater at the cost of loading additional classes during JVM startup (slowing down the startup) and that is what they wanted to avoid by using the Unsafe API."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669178735,"post_id":74516048,"comment_id":131583156,"body_markdown":"@StefanZobel I finally understand ! Thank you for your patience.I want to accept your answer.Would you want to copy your comments to the answer column so that I can accept it?","body":"@StefanZobel I finally understand ! Thank you for your patience.I want to accept your answer.Would you want to copy your comments to the answer column so that I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669111061,"creation_date":1669111061,"answer_id":74530699,"question_id":74516048,"body_markdown":"`BUF_OFFSET` is simply the offset of the `buf` field in the `BufferedInputStream` object and required to access that field using the method `Unsafe.compareAndSetReference`. As the usage of [the (not officially documented) `sun.misc.Unsafe` class][1] implies this is low-level code that unsafely interacts with assumptions about objects and their access.\r\n\r\n This method in turn is used as an alternative to [`AtomicReferenceFieldUpdater`][2] as described in the comment at the beginning of the class:\r\n\r\n&gt; As this class is used early during bootstrap, it&#39;s motivated to use\r\n      Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater\r\n      (or VarHandles) to reduce dependencies and improve startup time.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5574241/why-does-sun-misc-unsafe-exist-and-how-can-it-be-used-in-the-real-world\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p><code>BUF_OFFSET</code> is simply the offset of the <code>buf</code> field in the <code>BufferedInputStream</code> object and required to access that field using the method <code>Unsafe.compareAndSetReference</code>. As the usage of <a href=\"https://stackoverflow.com/questions/5574241/why-does-sun-misc-unsafe-exist-and-how-can-it-be-used-in-the-real-world\">the (not officially documented) <code>sun.misc.Unsafe</code> class</a> implies this is low-level code that unsafely interacts with assumptions about objects and their access.</p>\n<p>This method in turn is used as an alternative to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html\" rel=\"nofollow noreferrer\"><code>AtomicReferenceFieldUpdater</code></a> as described in the comment at the beginning of the class:</p>\n<blockquote>\n<p>As this class is used early during bootstrap, it's motivated to use\nUnsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater\n(or VarHandles) to reduce dependencies and improve startup time.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669211001,"creation_date":1669211001,"answer_id":74547788,"question_id":74516048,"body_markdown":"The `fill()` method fills the internal `buf` member with more data replacing it by another array of a different size when necessary.\r\nCalls to fill() are protected by an internal lock (or synchronized when BufferedInputStream is sub-classed). When the InputStream gets closed `buf` is set to `null` to indicate that the stream is closed.\r\nHowever, calls to `close()` can be asynchronous in the sense that close() is **not** protected against concurrent access in the way that calls to `fill()` are.\r\nHence, the need arises to check whether `buf == null` (stream is closed) in `fill()` and do `if (buf == buffer) buf = null;` (`buf` hasn&#39;t been changed concurrently by fill()) in `close()` in a threadsafe (atomic) manner.\r\n\r\nThis is done by using atomic CAS (compare-and-swap / compare-and-set) instructions which compare the content of a memory location with a given value and, only if they are the same, modifies the content of that location to a given new value as a *single atomic operation*.\r\nAtomicity guarantees that the write is conditional on the current value being up-to-date (i.e., not being modified by another thread in the meantime).\r\n\r\nThere are several ways to do this in Java: the AtomicXyzFieldUpdater classes in the j.u.concurrent.atomic package, the j.l.invoke VarHandle API introduced in Java 9 and a JDK-internal `Unsafe` API not intended for public use.\r\n\r\nSince BufferedInputStream is used early in the JVM bootstrap (that means the initialization phase at JVM startup) it is important to a) avoid using APIs that may not have been initialized at that time (wich can lead to dependency cycles) and b) to avoid slowing down the bootstrap by using APIs that have to be initialized first to be usable. That&#39;s the rationale for using the internal `Unsafe` API in this case.\r\n\r\nThe Unsafe method we are talking about is the following:\r\n\r\n    /**\r\n     * Atomically updates Java variable to {@code x} if it is currently\r\n     * holding {@code expected}.\r\n     *\r\n     * &lt;p&gt;This operation has memory semantics of a {@code volatile} read\r\n     * and write.  Corresponds to C11 atomic_compare_exchange_strong.\r\n     *\r\n     * @return {@code true} if successful\r\n     */\r\n    @IntrinsicCandidate\r\n    public final native boolean compareAndSetReference(Object o, long offset,\r\n                                                       Object expected,\r\n                                                       Object x);\r\n\r\nThe first argument is the object instance whose field should be set, the second argument is the offset of the field to be updated in that object (in effect a relative memory address), the third argument is the value that we expect to be currently in that field and the fourth argument is the value that we want to be stored in that field if our expectation turns out to be correct.\r\n\r\nThe offset of the field can be determined by using\r\n\r\n    /**\r\n     * Reports the location of the field with a given name in the storage\r\n     * allocation of its class.\r\n     *\r\n     * @throws NullPointerException if any parameter is {@code null}.\r\n     * @throws InternalError if there is no field named {@code name} declared\r\n     *         in class {@code c}, i.e., if {@code c.getDeclaredField(name)}\r\n     *         would throw {@code java.lang.NoSuchFieldException}.\r\n     *\r\n     * @see #objectFieldOffset(Field)\r\n     */\r\n    public long objectFieldOffset(Class&lt;?&gt; c, String name) {\r\n        if (c == null || name == null) {\r\n            throw new NullPointerException();\r\n        }\r\n\r\n        return objectFieldOffset1(c, name);\r\n    }\r\n\r\nThe field offset is a constant that needs to be determined only once and it is usually stored in a `static final long`. This is what **BUF_OFFSET** is (the offset of the `buf` field inside a BufferedInputStream instance).\r\n\r\nSo, the (threadsafe) code \r\n\r\n    if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\r\n        throw new IOException(&quot;Stream closed&quot;);\r\n    }\r\n\r\nis logically equivalent to the (single-threaded) code\r\n\r\n    if (buf == buffer) {\r\n        buf = nbuf;\r\n    } else {\r\n        throw new IOException(&quot;Stream closed&quot;);\r\n    }\r\n\r\nThe only difference is that `compareAndSetReference` is atomic while the latter code is not.\r\n\r\n","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p>The <code>fill()</code> method fills the internal <code>buf</code> member with more data replacing it by another array of a different size when necessary.\nCalls to fill() are protected by an internal lock (or synchronized when BufferedInputStream is sub-classed). When the InputStream gets closed <code>buf</code> is set to <code>null</code> to indicate that the stream is closed.\nHowever, calls to <code>close()</code> can be asynchronous in the sense that close() is <strong>not</strong> protected against concurrent access in the way that calls to <code>fill()</code> are.\nHence, the need arises to check whether <code>buf == null</code> (stream is closed) in <code>fill()</code> and do <code>if (buf == buffer) buf = null;</code> (<code>buf</code> hasn't been changed concurrently by fill()) in <code>close()</code> in a threadsafe (atomic) manner.</p>\n<p>This is done by using atomic CAS (compare-and-swap / compare-and-set) instructions which compare the content of a memory location with a given value and, only if they are the same, modifies the content of that location to a given new value as a <em>single atomic operation</em>.\nAtomicity guarantees that the write is conditional on the current value being up-to-date (i.e., not being modified by another thread in the meantime).</p>\n<p>There are several ways to do this in Java: the AtomicXyzFieldUpdater classes in the j.u.concurrent.atomic package, the j.l.invoke VarHandle API introduced in Java 9 and a JDK-internal <code>Unsafe</code> API not intended for public use.</p>\n<p>Since BufferedInputStream is used early in the JVM bootstrap (that means the initialization phase at JVM startup) it is important to a) avoid using APIs that may not have been initialized at that time (wich can lead to dependency cycles) and b) to avoid slowing down the bootstrap by using APIs that have to be initialized first to be usable. That's the rationale for using the internal <code>Unsafe</code> API in this case.</p>\n<p>The Unsafe method we are talking about is the following:</p>\n<pre><code>/**\n * Atomically updates Java variable to {@code x} if it is currently\n * holding {@code expected}.\n *\n * &lt;p&gt;This operation has memory semantics of a {@code volatile} read\n * and write.  Corresponds to C11 atomic_compare_exchange_strong.\n *\n * @return {@code true} if successful\n */\n@IntrinsicCandidate\npublic final native boolean compareAndSetReference(Object o, long offset,\n                                                   Object expected,\n                                                   Object x);\n</code></pre>\n<p>The first argument is the object instance whose field should be set, the second argument is the offset of the field to be updated in that object (in effect a relative memory address), the third argument is the value that we expect to be currently in that field and the fourth argument is the value that we want to be stored in that field if our expectation turns out to be correct.</p>\n<p>The offset of the field can be determined by using</p>\n<pre><code>/**\n * Reports the location of the field with a given name in the storage\n * allocation of its class.\n *\n * @throws NullPointerException if any parameter is {@code null}.\n * @throws InternalError if there is no field named {@code name} declared\n *         in class {@code c}, i.e., if {@code c.getDeclaredField(name)}\n *         would throw {@code java.lang.NoSuchFieldException}.\n *\n * @see #objectFieldOffset(Field)\n */\npublic long objectFieldOffset(Class&lt;?&gt; c, String name) {\n    if (c == null || name == null) {\n        throw new NullPointerException();\n    }\n\n    return objectFieldOffset1(c, name);\n}\n</code></pre>\n<p>The field offset is a constant that needs to be determined only once and it is usually stored in a <code>static final long</code>. This is what <strong>BUF_OFFSET</strong> is (the offset of the <code>buf</code> field inside a BufferedInputStream instance).</p>\n<p>So, the (threadsafe) code</p>\n<pre><code>if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\n    throw new IOException(&quot;Stream closed&quot;);\n}\n</code></pre>\n<p>is logically equivalent to the (single-threaded) code</p>\n<pre><code>if (buf == buffer) {\n    buf = nbuf;\n} else {\n    throw new IOException(&quot;Stream closed&quot;);\n}\n</code></pre>\n<p>The only difference is that <code>compareAndSetReference</code> is atomic while the latter code is not.</p>\n"}],"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":74547788,"answer_count":2,"score":0,"last_activity_date":1669211001,"creation_date":1669019338,"question_id":74516048,"body_markdown":"This is the field.\r\n```\r\nprivate static final long BUF_OFFSET\r\n        = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;);\r\n```\r\n\r\nThis is code which using BUF_OFFSET.\r\n\r\n```\r\nprivate void fill() throws IOException {\r\n    byte[] buffer = getBufIfOpen();\r\n    if (markpos &lt; 0)\r\n        pos = 0;            /* no mark: throw away the buffer */\r\n    else if (pos &gt;= buffer.length) { /* no room left in buffer */\r\n        if (markpos &gt; 0) {  /* can throw away early part of the buffer */\r\n            int sz = pos - markpos;\r\n            System.arraycopy(buffer, markpos, buffer, 0, sz);\r\n            pos = sz;\r\n            markpos = 0;\r\n        } else if (buffer.length &gt;= marklimit) {\r\n            markpos = -1;   /* buffer got too big, invalidate mark */\r\n            pos = 0;        /* drop buffer contents */\r\n        } else {            /* grow buffer */\r\n            int nsz = ArraysSupport.newLength(pos,\r\n                    1,  /* minimum growth */\r\n                    pos /* preferred growth */);\r\n            if (nsz &gt; marklimit)\r\n                nsz = marklimit;\r\n            byte[] nbuf = new byte[nsz];\r\n            System.arraycopy(buffer, 0, nbuf, 0, pos);\r\n            **if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\r\n                // Can&#39;t replace buf if there was an async close.\r\n                // Note: This would need to be changed if fill()\r\n                // is ever made accessible to multiple threads.\r\n                // But for now, the only way CAS can fail is via close.\r\n                // assert buf == null;\r\n                throw new IOException(&quot;Stream closed&quot;);\r\n            }**\r\n            buffer = nbuf;\r\n        }\r\n    }\r\n    count = pos;\r\n    int n = getInIfOpen().read(buffer, pos, buffer.length - pos);\r\n    if (n &gt; 0)\r\n        count = n + pos;\r\n}\r\n```\r\n\r\nThis is the code in JDK source about return the value of BUF_OFFSET.\r\n\r\n\r\n```\r\nstatic jlong find_field_offset(jclass clazz, jstring name, TRAPS) {\r\n  assert(clazz != NULL, &quot;clazz must not be NULL&quot;);\r\n  assert(name != NULL, &quot;name must not be NULL&quot;);\r\n\r\n  ResourceMark rm(THREAD);\r\n  char *utf_name = java_lang_String::as_utf8_string(JNIHandles::resolve_non_null(name));\r\n\r\n  InstanceKlass* k = InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz)));\r\n\r\n  jint offset = -1;\r\n  for (JavaFieldStream fs(k); !fs.done(); fs.next()) {\r\n    Symbol *name = fs.name();\r\n    if (name-&gt;equals(utf_name)) {\r\n      **offset** = fs.offset();\r\n      break;\r\n    }\r\n  }\r\n  if (offset &lt; 0) {\r\n    THROW_0(vmSymbols::java_lang_InternalError());\r\n  }\r\n  return field_offset_from_byte_offset(offset);\r\n}\r\n```\r\n\r\nWhat does BUF_OFFSET field mean in BufferedInputStream?\r\n\r\nI check the BUF_OFFSET out in JDK source code\r\ngithub:https://github.com/openjdk/jdk/tree/jdk-17%2B35\r\nI have asked a question about what JavaFieldStream is in here.But I am still confused about the BUF_OFFSET.\r\n\r\nI guess...Maybe BUF_OFFSET is simliar with the param off which is from FileInputStream&#39;s read method?\r\n```\r\npublic int read(byte b[], int off, int len) throws IOException {\r\n    return readBytes(b, off, len);\r\n}\r\n```\r\nIn here,off means where the data copys and fills in from C array to the Java array.So BUF_OFFSET means where  data fills in JVM?It&#39;s just my guess.\r\n\r\n","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p>This is the field.</p>\n<pre><code>private static final long BUF_OFFSET\n        = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;);\n</code></pre>\n<p>This is code which using BUF_OFFSET.</p>\n<pre><code>private void fill() throws IOException {\n    byte[] buffer = getBufIfOpen();\n    if (markpos &lt; 0)\n        pos = 0;            /* no mark: throw away the buffer */\n    else if (pos &gt;= buffer.length) { /* no room left in buffer */\n        if (markpos &gt; 0) {  /* can throw away early part of the buffer */\n            int sz = pos - markpos;\n            System.arraycopy(buffer, markpos, buffer, 0, sz);\n            pos = sz;\n            markpos = 0;\n        } else if (buffer.length &gt;= marklimit) {\n            markpos = -1;   /* buffer got too big, invalidate mark */\n            pos = 0;        /* drop buffer contents */\n        } else {            /* grow buffer */\n            int nsz = ArraysSupport.newLength(pos,\n                    1,  /* minimum growth */\n                    pos /* preferred growth */);\n            if (nsz &gt; marklimit)\n                nsz = marklimit;\n            byte[] nbuf = new byte[nsz];\n            System.arraycopy(buffer, 0, nbuf, 0, pos);\n            **if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\n                // Can't replace buf if there was an async close.\n                // Note: This would need to be changed if fill()\n                // is ever made accessible to multiple threads.\n                // But for now, the only way CAS can fail is via close.\n                // assert buf == null;\n                throw new IOException(&quot;Stream closed&quot;);\n            }**\n            buffer = nbuf;\n        }\n    }\n    count = pos;\n    int n = getInIfOpen().read(buffer, pos, buffer.length - pos);\n    if (n &gt; 0)\n        count = n + pos;\n}\n</code></pre>\n<p>This is the code in JDK source about return the value of BUF_OFFSET.</p>\n<pre><code>static jlong find_field_offset(jclass clazz, jstring name, TRAPS) {\n  assert(clazz != NULL, &quot;clazz must not be NULL&quot;);\n  assert(name != NULL, &quot;name must not be NULL&quot;);\n\n  ResourceMark rm(THREAD);\n  char *utf_name = java_lang_String::as_utf8_string(JNIHandles::resolve_non_null(name));\n\n  InstanceKlass* k = InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz)));\n\n  jint offset = -1;\n  for (JavaFieldStream fs(k); !fs.done(); fs.next()) {\n    Symbol *name = fs.name();\n    if (name-&gt;equals(utf_name)) {\n      **offset** = fs.offset();\n      break;\n    }\n  }\n  if (offset &lt; 0) {\n    THROW_0(vmSymbols::java_lang_InternalError());\n  }\n  return field_offset_from_byte_offset(offset);\n}\n</code></pre>\n<p>What does BUF_OFFSET field mean in BufferedInputStream?</p>\n<p>I check the BUF_OFFSET out in JDK source code\ngithub:<a href=\"https://github.com/openjdk/jdk/tree/jdk-17%2B35\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/jdk-17%2B35</a>\nI have asked a question about what JavaFieldStream is in here.But I am still confused about the BUF_OFFSET.</p>\n<p>I guess...Maybe BUF_OFFSET is simliar with the param off which is from FileInputStream's read method?</p>\n<pre><code>public int read(byte b[], int off, int len) throws IOException {\n    return readBytes(b, off, len);\n}\n</code></pre>\n<p>In here,off means where the data copys and fills in from C array to the Java array.So BUF_OFFSET means where  data fills in JVM?It's just my guess.</p>\n"},{"tags":["java","elasticsearch","gradle","intellij-idea","migration"],"comments":[{"owner":{"account_id":5843921,"reputation":210855,"user_id":4604579,"display_name":"Val"},"score":1,"creation_date":1669211141,"post_id":74547732,"comment_id":131592730,"body_markdown":"`class file has wrong version 61.0, should be 55.0` this usually means you don&#39;t have the correct JAVA version. 8.5.1 requires [Java 17 or higher](https://www.elastic.co/support/matrix#matrix_jvm)","body":"<code>class file has wrong version 61.0, should be 55.0</code> this usually means you don&#39;t have the correct JAVA version. 8.5.1 requires <a href=\"https://www.elastic.co/support/matrix#matrix_jvm\" rel=\"nofollow noreferrer\">Java 17 or higher</a>"}],"owner":{"account_id":21666948,"reputation":11,"user_id":15985151,"display_name":"karthick m"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669210798,"creation_date":1669210798,"question_id":74547732,"body_markdown":"```\r\n/Query.java:3: error: cannot access QueryBuilder\r\nimport org.elasticsearch.index.query.QueryBuilder;\r\n                                    ^\r\n  bad class file: /home/runner/.gradle/caches/modules-2/files-2.1/org.elasticsearch/elasticsearch/8.5.1/67dbb2f5b343de39ec14b8eb1894be353343bce1/elasticsearch-8.5.1.jar(/org/elasticsearch/index/query/QueryBuilder.class)\r\n    class file has wrong version 61.0, should be 55.0\r\n    Please remove or make sure it appears in the correct subdirectory of the classpath.\r\n```\r\n\r\n\r\nI tried gradle clean and rebuild the project. it still happens","title":"error: cannot access QueryBuilder Elasticserach 8.5.1","body":"<pre><code>/Query.java:3: error: cannot access QueryBuilder\nimport org.elasticsearch.index.query.QueryBuilder;\n                                    ^\n  bad class file: /home/runner/.gradle/caches/modules-2/files-2.1/org.elasticsearch/elasticsearch/8.5.1/67dbb2f5b343de39ec14b8eb1894be353343bce1/elasticsearch-8.5.1.jar(/org/elasticsearch/index/query/QueryBuilder.class)\n    class file has wrong version 61.0, should be 55.0\n    Please remove or make sure it appears in the correct subdirectory of the classpath.\n</code></pre>\n<p>I tried gradle clean and rebuild the project. it still happens</p>\n"},{"tags":["java","hibernate","hql","hibernate3"],"comments":[{"owner":{"account_id":7664445,"reputation":3648,"user_id":5808553,"accept_rate":64,"display_name":"Rajeev Ranjan"},"score":2,"creation_date":1508749167,"post_id":1239723,"comment_id":80718082,"body_markdown":"I am using `Hibernate-5.0.12`. Is this still not available? It would be really heavy to get a million or so records and then apply the filter on it- `setMaxResults` over it as noticed by @Rachel in the answer by @skaffman.","body":"I am using <code>Hibernate-5.0.12</code>. Is this still not available? It would be really heavy to get a million or so records and then apply the filter on it- <code>setMaxResults</code> over it as noticed by @Rachel in the answer by @skaffman."}],"answers":[{"tags":[],"owner":{"account_id":26360,"reputation":17149,"user_id":68524,"accept_rate":71,"display_name":"pjp"},"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1249573014,"creation_date":1249573014,"answer_id":1239739,"question_id":1239723,"body_markdown":"If you don&#39;t want to use `setMaxResults()` on the `Query` object then you could always revert back to using normal SQL.","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If you don't want to use <code>setMaxResults()</code> on the <code>Query</code> object then you could always revert back to using normal SQL.</p>\n"},{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":336,"is_accepted":true,"score":336,"last_activity_date":1292145393,"creation_date":1249573073,"answer_id":1239745,"question_id":1239723,"body_markdown":"[This was posted][1] on the Hibernate forum a few years back when asked about why this worked in Hibernate 2 but not in Hibernate 3:\r\n\r\n&gt; Limit was *never* a supported clause\r\n&gt; in HQL. You are meant to use\r\n&gt; setMaxResults().\r\n\r\nSo if it worked in Hibernate 2, it seems that was by coincidence, rather than by design. I *think* this was because the Hibernate 2 HQL parser would replace the bits of the query that it recognised as HQL, and leave the rest as it was, so you could sneak in some native SQL. Hibernate 3, however, has a proper AST HQL Parser, and it&#39;s a lot less forgiving.\r\n\r\nI think `Query.setMaxResults()` really is your only option.\r\n\r\n  [1]: https://forum.hibernate.org/viewtopic.php?f=9&amp;t=939314","title":"How do you do a limit query in JPQL or HQL?","body":"<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=9&amp;t=939314\" rel=\"noreferrer\">This was posted</a> on the Hibernate forum a few years back when asked about why this worked in Hibernate 2 but not in Hibernate 3:</p>\n\n<blockquote>\n  <p>Limit was <em>never</em> a supported clause\n  in HQL. You are meant to use\n  setMaxResults().</p>\n</blockquote>\n\n<p>So if it worked in Hibernate 2, it seems that was by coincidence, rather than by design. I <em>think</em> this was because the Hibernate 2 HQL parser would replace the bits of the query that it recognised as HQL, and leave the rest as it was, so you could sneak in some native SQL. Hibernate 3, however, has a proper AST HQL Parser, and it's a lot less forgiving.</p>\n\n<p>I think <code>Query.setMaxResults()</code> really is your only option.</p>\n"},{"tags":[],"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260295818,"creation_date":1260295818,"answer_id":1868806,"question_id":1239723,"body_markdown":"If you don&#39;t want to use setMaxResults, you can also use Query.scroll instead of list, and fetch the rows you desire. Useful for paging for instance. ","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If you don't want to use setMaxResults, you can also use Query.scroll instead of list, and fetch the rows you desire. Useful for paging for instance. </p>\n"},{"tags":[],"owner":{"account_id":635102,"reputation":9,"user_id":403013,"display_name":"Xingsheng "},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1280211094,"creation_date":1280211094,"answer_id":3341132,"question_id":1239723,"body_markdown":"My observation is that even you have limit in the HQL (hibernate 3.x), it will be either causing parsing error or just ignored. (if you have order by + desc/asc before limit, it will be ignored, if you don&#39;t have desc/asc before limit, it will cause parsing error)","title":"How do you do a limit query in JPQL or HQL?","body":"<p>My observation is that even you have limit in the HQL (hibernate 3.x), it will be either causing parsing error or just ignored. (if you have order by + desc/asc before limit, it will be ignored, if you don't have desc/asc before limit, it will cause parsing error)</p>\n"},{"tags":[],"owner":{"account_id":694493,"reputation":51,"user_id":572316,"display_name":"Dilawar"},"down_vote_count":5,"up_vote_count":6,"is_accepted":false,"score":1,"last_activity_date":1320767792,"creation_date":1294814790,"answer_id":4666044,"question_id":1239723,"body_markdown":"`String hql = &quot;select userName from AccountInfo order by points desc 5&quot;;`\r\n\r\nThis worked for me without using `setmaxResults();`\r\n\r\nJust provide the max value in the last (in this case 5) without using the keyword `limit`.\r\n:P\r\n\t\t","title":"How do you do a limit query in JPQL or HQL?","body":"<p><code>String hql = \"select userName from AccountInfo order by points desc 5\";</code></p>\n\n<p>This worked for me without using <code>setmaxResults();</code></p>\n\n<p>Just provide the max value in the last (in this case 5) without using the keyword <code>limit</code>.\n:P</p>\n"},{"tags":[],"owner":{"account_id":52105,"reputation":2069,"user_id":155688,"accept_rate":91,"display_name":"Jessu"},"down_vote_count":0,"up_vote_count":158,"is_accepted":false,"score":158,"last_activity_date":1297675724,"creation_date":1297675724,"answer_id":4990560,"question_id":1239723,"body_markdown":"     // SQL: SELECT * FROM table LIMIT start, maxRows;\r\n    \r\n    Query q = session.createQuery(&quot;FROM table&quot;);\r\n    q.setFirstResult(start);\r\n    q.setMaxResults(maxRows);\r\n    \r\n\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code> // SQL: SELECT * FROM table LIMIT start, maxRows;\n\nQuery q = session.createQuery(\"FROM table\");\nq.setFirstResult(start);\nq.setMaxResults(maxRows);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user538167"},"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1435135793,"creation_date":1319785260,"answer_id":7926105,"question_id":1239723,"body_markdown":"If can manage a limit in this mode\r\n\r\n    public List&lt;ExampleModel&gt; listExampleModel() {\r\n\t\treturn listExampleModel(null, null);\r\n\t}\r\n\r\n\tpublic List&lt;ExampleModel&gt; listExampleModel(Integer first, Integer count) {\r\n\t\tQuery tmp = getSession().createQuery(&quot;from ExampleModel&quot;);\r\n\r\n\t\tif (first != null)\r\n\t\t\ttmp.setFirstResult(first);\r\n\t\tif (count != null)\r\n\t\t\ttmp.setMaxResults(count);\r\n\r\n\t\treturn (List&lt;ExampleModel&gt;)tmp.list();\r\n\t}\r\n\r\nThis is a really simple code to handle a limit or a list. ","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If can manage a limit in this mode</p>\n\n<pre><code>public List&lt;ExampleModel&gt; listExampleModel() {\n    return listExampleModel(null, null);\n}\n\npublic List&lt;ExampleModel&gt; listExampleModel(Integer first, Integer count) {\n    Query tmp = getSession().createQuery(\"from ExampleModel\");\n\n    if (first != null)\n        tmp.setFirstResult(first);\n    if (count != null)\n        tmp.setMaxResults(count);\n\n    return (List&lt;ExampleModel&gt;)tmp.list();\n}\n</code></pre>\n\n<p>This is a really simple code to handle a limit or a list. </p>\n"},{"tags":[],"owner":{"account_id":8761593,"reputation":45,"user_id":6551400,"accept_rate":0,"display_name":"Deep Chand Jaipur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468665381,"creation_date":1468665381,"answer_id":38410260,"question_id":1239723,"body_markdown":"    Criteria criteria=curdSession.createCriteria(DTOCLASS.class).addOrder(Order.desc(&quot;feild_name&quot;));\r\n        \t\t\tcriteria.setMaxResults(3);\r\n        \t\t\tList&lt;DTOCLASS&gt; users = (List&lt;DTOCLASS&gt;) criteria.list();\r\n    for (DTOCLASS user : users) {\r\n    \t\t\t\tSystem.out.println(user.getStart());\r\n    \t\t\t}","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code>Criteria criteria=curdSession.createCriteria(DTOCLASS.class).addOrder(Order.desc(\"feild_name\"));\n                criteria.setMaxResults(3);\n                List&lt;DTOCLASS&gt; users = (List&lt;DTOCLASS&gt;) criteria.list();\nfor (DTOCLASS user : users) {\n                System.out.println(user.getStart());\n            }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3779781,"reputation":667,"user_id":3139600,"display_name":"swatisinghi"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1524808632,"creation_date":1524808632,"answer_id":50056107,"question_id":1239723,"body_markdown":"You need to write a native query, refer [this][1].\r\n\r\n    @Query(value =\r\n        &quot;SELECT * FROM user_metric UM WHERE UM.user_id = :userId AND UM.metric_id = :metricId LIMIT :limit&quot;, nativeQuery = true)\r\n    List&lt;UserMetricValue&gt; findTopNByUserIdAndMetricId(\r\n        @Param(&quot;userId&quot;) String userId, @Param(&quot;metricId&quot;) Long metricId,\r\n        @Param(&quot;limit&quot;) int limit);\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#_native_queries","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You need to write a native query, refer <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#_native_queries\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<pre><code>@Query(value =\n    \"SELECT * FROM user_metric UM WHERE UM.user_id = :userId AND UM.metric_id = :metricId LIMIT :limit\", nativeQuery = true)\nList&lt;UserMetricValue&gt; findTopNByUserIdAndMetricId(\n    @Param(\"userId\") String userId, @Param(\"metricId\") Long metricId,\n    @Param(\"limit\") int limit);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10121858,"reputation":21,"user_id":7478518,"display_name":"Leena Varshney"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1552633990,"creation_date":1552633848,"answer_id":55177358,"question_id":1239723,"body_markdown":"    @Query(nativeQuery = true,\r\n           value = &quot;select from otp u where u.email =:email order by u.dateTime desc limit 1&quot;)\r\n    public List&lt;otp&gt; findOtp(@Param(&quot;email&quot;) String email);","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code>@Query(nativeQuery = true,\n       value = \"select from otp u where u.email =:email order by u.dateTime desc limit 1\")\npublic List&lt;otp&gt; findOtp(@Param(\"email\") String email);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2220824,"reputation":16635,"user_id":3168721,"accept_rate":97,"display_name":"tk_"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1562150399,"creation_date":1562150399,"answer_id":56868270,"question_id":1239723,"body_markdown":"You can easily use pagination for this.\r\n\r\n        @QueryHints({ @QueryHint(name = &quot;org.hibernate.cacheable&quot;, value = &quot;true&quot;) })\r\n    \t@Query(&quot;select * from a_table order by a_table_column desc&quot;)\r\n    \tList&lt;String&gt; getStringValue(Pageable pageable);\r\n\r\n\r\nyou have to pass `new PageRequest(0, 1)`to fetch records and **from the list fetch the first record.**\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You can easily use pagination for this.</p>\n\n<pre><code>    @QueryHints({ @QueryHint(name = \"org.hibernate.cacheable\", value = \"true\") })\n    @Query(\"select * from a_table order by a_table_column desc\")\n    List&lt;String&gt; getStringValue(Pageable pageable);\n</code></pre>\n\n<p>you have to pass <code>new PageRequest(0, 1)</code>to fetch records and <strong>from the list fetch the first record.</strong></p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1653999128,"creation_date":1582616154,"answer_id":60389562,"question_id":1239723,"body_markdown":"The `setFirstResult` and `setMaxResults` `Query` methods\r\n--------------------------------------------------------\r\n\r\nFor a JPA and Hibernate `Query`, the `setFirstResult` method is the equivalent of `OFFSET`, and the `setMaxResults` method is the equivalent of LIMIT:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n    \tselect p\r\n    \tfrom Post p\r\n    \torder by p.createdOn\r\n    \t&quot;&quot;&quot;)\r\n    .setFirstResult(10)\r\n    .setMaxResults(10)\r\n    .getResultList();\r\n\r\nThe `LimitHandler` abstraction\r\n------------------------------\r\n\r\nThe Hibernate `LimitHandler` defines the database-specific pagination logic, and as illustrated by the following diagram, Hibernate supports many database-specific pagination options:\r\n\r\n[![`LimitHandler` implementations][1]][1]\r\n\r\nNow, depending on the underlying relational database system you are using, the above JPQL query will use the proper pagination syntax.\r\n\r\nMySQL\r\n-----\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?, ?\r\n\r\nPostgreSQL\r\n----------\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?\r\n    OFFSET ?\r\n\r\nSQL Server\r\n----------\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_on2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    OFFSET ? ROWS \r\n    FETCH NEXT ? ROWS ONLY\r\n\r\nOracle\r\n------\r\n\r\n    SELECT *\r\n    FROM (\r\n        SELECT \r\n            row_.*, rownum rownum_\r\n        FROM (\r\n            SELECT \r\n                p.id AS id1_0_,\r\n                p.created_on AS created_on2_0_,\r\n                p.title AS title3_0_\r\n            FROM post p\r\n            ORDER BY p.created_on\r\n        ) row_\r\n        WHERE rownum &lt;= ?\r\n    )\r\n    WHERE rownum_ &gt; ?\r\n\r\nThe advantage of using `setFirstResult` and `setMaxResults` is that Hibernate can generate the database-specific pagination syntax for any supported relational databases.\r\n\r\nAnd, you are not limited to JPQL queries only. You can use the `setFirstResult` and `setMaxResults` method seven for native SQL queries.\r\n\r\nNative SQL queries\r\n------------------\r\n\r\nYou don&#39;t have to hardcode the database-specific pagination when using native SQL queries. Hibernate can add that to your queries.\r\n\r\nSo, if you&#39;re executing this SQL query on PostgreSQL:\r\n\r\n    List&lt;Tuple&gt; posts = entityManager.createNativeQuery(\r\n    \tSELECT\r\n    \t   p.id AS id,\r\n    \t   p.title AS title\r\n    \tfrom post p\r\n    \tORDER BY p.created_on\r\n    \t&quot;&quot;&quot;, Tuple.class)\r\n    .setFirstResult(10)\r\n    .setMaxResults(10)\r\n    .getResultList();\r\n\r\nHibernate will transform it as follows:\r\n\r\n    SELECT p.id AS id,\r\n           p.title AS title\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?\r\n    OFFSET ?\r\n\r\nCool, right?\r\n\r\nBeyond SQL-based pagination\r\n---------------------------\r\n\r\nPagination is good when you can index the filtering and sorting criteria. If your pagination requirements imply dynamic filtering, it&#39;s a much better approach to use an inverted-index solution, like ElasticSearch. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IGtD2.png","title":"How do you do a limit query in JPQL or HQL?","body":"<h2>The <code>setFirstResult</code> and <code>setMaxResults</code> <code>Query</code> methods</h2>\n<p>For a JPA and Hibernate <code>Query</code>, the <code>setFirstResult</code> method is the equivalent of <code>OFFSET</code>, and the <code>setMaxResults</code> method is the equivalent of LIMIT:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    order by p.createdOn\n    &quot;&quot;&quot;)\n.setFirstResult(10)\n.setMaxResults(10)\n.getResultList();\n</code></pre>\n<h2>The <code>LimitHandler</code> abstraction</h2>\n<p>The Hibernate <code>LimitHandler</code> defines the database-specific pagination logic, and as illustrated by the following diagram, Hibernate supports many database-specific pagination options:</p>\n<p><a href=\"https://i.stack.imgur.com/IGtD2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IGtD2.png\" alt=\"LimitHandler implementations\" /></a></p>\n<p>Now, depending on the underlying relational database system you are using, the above JPQL query will use the proper pagination syntax.</p>\n<h2>MySQL</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nLIMIT ?, ?\n</code></pre>\n<h2>PostgreSQL</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nLIMIT ?\nOFFSET ?\n</code></pre>\n<h2>SQL Server</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_on2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nOFFSET ? ROWS \nFETCH NEXT ? ROWS ONLY\n</code></pre>\n<h2>Oracle</h2>\n<pre><code>SELECT *\nFROM (\n    SELECT \n        row_.*, rownum rownum_\n    FROM (\n        SELECT \n            p.id AS id1_0_,\n            p.created_on AS created_on2_0_,\n            p.title AS title3_0_\n        FROM post p\n        ORDER BY p.created_on\n    ) row_\n    WHERE rownum &lt;= ?\n)\nWHERE rownum_ &gt; ?\n</code></pre>\n<p>The advantage of using <code>setFirstResult</code> and <code>setMaxResults</code> is that Hibernate can generate the database-specific pagination syntax for any supported relational databases.</p>\n<p>And, you are not limited to JPQL queries only. You can use the <code>setFirstResult</code> and <code>setMaxResults</code> method seven for native SQL queries.</p>\n<h2>Native SQL queries</h2>\n<p>You don't have to hardcode the database-specific pagination when using native SQL queries. Hibernate can add that to your queries.</p>\n<p>So, if you're executing this SQL query on PostgreSQL:</p>\n<pre><code>List&lt;Tuple&gt; posts = entityManager.createNativeQuery(\n    SELECT\n       p.id AS id,\n       p.title AS title\n    from post p\n    ORDER BY p.created_on\n    &quot;&quot;&quot;, Tuple.class)\n.setFirstResult(10)\n.setMaxResults(10)\n.getResultList();\n</code></pre>\n<p>Hibernate will transform it as follows:</p>\n<pre><code>SELECT p.id AS id,\n       p.title AS title\nFROM post p\nORDER BY p.created_on\nLIMIT ?\nOFFSET ?\n</code></pre>\n<p>Cool, right?</p>\n<h2>Beyond SQL-based pagination</h2>\n<p>Pagination is good when you can index the filtering and sorting criteria. If your pagination requirements imply dynamic filtering, it's a much better approach to use an inverted-index solution, like ElasticSearch.</p>\n"},{"tags":[],"owner":{"account_id":9177643,"reputation":99,"user_id":6822729,"display_name":"Virendra khade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669210711,"creation_date":1582883646,"answer_id":60449228,"question_id":1239723,"body_markdown":"You can use below query\r\n```\r\nNativeQuery&lt;Object[]&gt; query = session.createNativeQuery(&quot;select * from employee limit ?&quot;);\r\nquery.setparameter(1,1);\r\n```","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You can use below query</p>\n<pre><code>NativeQuery&lt;Object[]&gt; query = session.createNativeQuery(&quot;select * from employee limit ?&quot;);\nquery.setparameter(1,1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584434821,"creation_date":1584434821,"answer_id":60718923,"question_id":1239723,"body_markdown":"Below snippet is used to perform limit query using HQL.\r\n\r\n    Query query = session.createQuery(&quot;....&quot;);\r\n    query.setFirstResult(startPosition);\r\n    query.setMaxResults(maxRows);\r\n\r\n\r\nYou can get demo application at this [link][1].\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2020/03/spring-jpa-hql-limit-query-example.html","title":"How do you do a limit query in JPQL or HQL?","body":"<p>Below snippet is used to perform limit query using HQL.</p>\n\n<pre><code>Query query = session.createQuery(\"....\");\nquery.setFirstResult(startPosition);\nquery.setMaxResults(maxRows);\n</code></pre>\n\n<p>You can get demo application at this <a href=\"https://self-learning-java-tutorial.blogspot.com/2020/03/spring-jpa-hql-limit-query-example.html\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}],"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389534,"favorite_count":0,"down_vote_count":0,"up_vote_count":270,"accepted_answer_id":1239745,"answer_count":14,"score":270,"last_activity_date":1669210711,"creation_date":1249572802,"question_id":1239723,"body_markdown":"In Hibernate 3, is there a way to do the equivalent of the following MySQL limit in HQL?\r\n\r\n    select * from a_table order by a_table_column desc limit 0, 20;\r\n\r\nI don&#39;t want to use setMaxResults if possible. This definitely was possible in the older version of Hibernate/HQL, but it seems to have disappeared.\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<p>In Hibernate 3, is there a way to do the equivalent of the following MySQL limit in HQL?</p>\n\n<pre><code>select * from a_table order by a_table_column desc limit 0, 20;\n</code></pre>\n\n<p>I don't want to use setMaxResults if possible. This definitely was possible in the older version of Hibernate/HQL, but it seems to have disappeared.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669209869,"creation_date":1669049877,"answer_id":74522398,"question_id":74521326,"body_markdown":"&gt; clone entire apache kafka source code\r\n\r\nFalse. Apache Kafka download (binaries, rather than needing source), come with Kafka Connect already included. \r\n\r\nKafka Connect is not unique to Confluent. They (and others) write _plugins_. You put the code in the `plugin.path` property value as JARs.  Related - https://stackoverflow.com/questions/56958382/use-confluent-hub-without-confluent-platform-installation/57051446\r\n\r\n&gt; When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? \r\n\r\nThe JVM classpath. \r\n\r\n&gt; kubernetes kafka cluster locally\r\n\r\nStrimzi has `kind: KafkaConnect` resources to make this easier, including installing Connector plugins. ","title":"How to deploy apache kafka connect locally (without Confluent)","body":"<blockquote>\n<p>clone entire apache kafka source code</p>\n</blockquote>\n<p>False. Apache Kafka download (binaries, rather than needing source), come with Kafka Connect already included.</p>\n<p>Kafka Connect is not unique to Confluent. They (and others) write <em>plugins</em>. You put the code in the <code>plugin.path</code> property value as JARs.  Related - <a href=\"https://stackoverflow.com/questions/56958382/use-confluent-hub-without-confluent-platform-installation/57051446\">Use Confluent Hub without Confluent Platform installation</a></p>\n<blockquote>\n<p>When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it?</p>\n</blockquote>\n<p>The JVM classpath.</p>\n<blockquote>\n<p>kubernetes kafka cluster locally</p>\n</blockquote>\n<p>Strimzi has <code>kind: KafkaConnect</code> resources to make this easier, including installing Connector plugins.</p>\n"}],"owner":{"account_id":11944159,"reputation":767,"user_id":8739916,"accept_rate":71,"display_name":"JollyRoger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74522398,"answer_count":1,"score":0,"last_activity_date":1669209869,"creation_date":1669044900,"question_id":74521326,"body_markdown":"I could not find any simple explanation on how the Apache Kafka Connect works practically. For instance, in the official [tutorial][1], it says that we run certain shell scripts under the bin directory and we need to configure some `.properties` files. \r\n\r\nThis is clear. I am guessing that we need to clone entire apache kafka source code because those shell files are using a lot of other shell scripts and java classes inside the apache kafka source code. \r\n\r\nBut where do we place our connector code and in which format? As source code or as a jar file? When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? Could someone clear these up or point out to some tutorials? Note, I am running everything, including my kubernetes kafka cluster locally and I am not willing to use Confluent.\r\n\r\n\r\n\r\n  [1]: https://kafka.apache.org/documentation/#connect","title":"How to deploy apache kafka connect locally (without Confluent)","body":"<p>I could not find any simple explanation on how the Apache Kafka Connect works practically. For instance, in the official <a href=\"https://kafka.apache.org/documentation/#connect\" rel=\"nofollow noreferrer\">tutorial</a>, it says that we run certain shell scripts under the bin directory and we need to configure some <code>.properties</code> files.</p>\n<p>This is clear. I am guessing that we need to clone entire apache kafka source code because those shell files are using a lot of other shell scripts and java classes inside the apache kafka source code.</p>\n<p>But where do we place our connector code and in which format? As source code or as a jar file? When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? Could someone clear these up or point out to some tutorials? Note, I am running everything, including my kubernetes kafka cluster locally and I am not willing to use Confluent.</p>\n"},{"tags":["java","http","proxy"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669209635,"creation_date":1669130346,"answer_id":74534973,"question_id":74534794,"body_markdown":"The encrypted communication goes from the client to the server, and the proxy is unaware. However the byte stream traverses two TCP connections:\r\nThe one from the client to the proxy, and the one from the proxy to the server.\r\n\r\nIf either one of them gets terminated the proxy can close the other. Termination is indicated by the network stack, and the proxy just forwards that message into the other connection.\r\n\r\nSo if the client hangs up, the proxy would notice a hangup on client side and terminate it&#39;s connection to the server. On the server side a termination on client side is noticed. And if the server hangs up, the same happens in the other direction.\r\n\r\nNow the question would be to figure out in Java whether the connection was lost. Typically the proxy application should either be waiting for data or writing data to the other stream. Without having created the code myself, I strongly believe if the network stack communicates that a connection is down it would resolve in an IOException, either thrown during the read operation from the input stream or thrown during the write operation for the other stream.","title":"How an HTTP proxy knows when to close the connection","body":"<p>The encrypted communication goes from the client to the server, and the proxy is unaware. However the byte stream traverses two TCP connections:\nThe one from the client to the proxy, and the one from the proxy to the server.</p>\n<p>If either one of them gets terminated the proxy can close the other. Termination is indicated by the network stack, and the proxy just forwards that message into the other connection.</p>\n<p>So if the client hangs up, the proxy would notice a hangup on client side and terminate it's connection to the server. On the server side a termination on client side is noticed. And if the server hangs up, the same happens in the other direction.</p>\n<p>Now the question would be to figure out in Java whether the connection was lost. Typically the proxy application should either be waiting for data or writing data to the other stream. Without having created the code myself, I strongly believe if the network stack communicates that a connection is down it would resolve in an IOException, either thrown during the read operation from the input stream or thrown during the write operation for the other stream.</p>\n"},{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669131890,"creation_date":1669131890,"answer_id":74535340,"question_id":74534794,"body_markdown":"Http connection is nothing but network connection between two sockets. To end an HTTP connection socket.close() needs to be called. Normal HTTP connections (not pipelined) use this method.\r\n\r\nThere are multiple scenarios how it is done. Let&#39;s take a simple example to emulate your scenario.\r\n\r\n - Client calls proxy server. That is a HTTP connection between client &amp;\r\n   proxy, Let&#39;s call it **connection A**.\r\n - Proxy calls destination using new separate HTTP connection. Let&#39;s\r\n   call it **connection B**.\r\n - Destination sends encrypted data to proxy via **connection A**.\r\n - Proxy forwards the data packet to client via **connection B**.\r\n - Client reads the data &amp; decrypts it. It gets to know response payload\r\n   size from **Content-Length** header.\r\n - Once client is done reading that many bytes, it decides to call\r\n   socket.close() on **Connection A**.\r\n - Proxy detects **connection A** got closed. So it doesn&#39;t need to maintain\r\n   **connection B** to destination &amp; closes it.\r\n \r\nSo both HTTP connections got terminated. And it didn&#39;t need proxy to\r\n   read encrypted data.","title":"How an HTTP proxy knows when to close the connection","body":"<p>Http connection is nothing but network connection between two sockets. To end an HTTP connection socket.close() needs to be called. Normal HTTP connections (not pipelined) use this method.</p>\n<p>There are multiple scenarios how it is done. Let's take a simple example to emulate your scenario.</p>\n<ul>\n<li>Client calls proxy server. That is a HTTP connection between client &amp;\nproxy, Let's call it <strong>connection A</strong>.</li>\n<li>Proxy calls destination using new separate HTTP connection. Let's\ncall it <strong>connection B</strong>.</li>\n<li>Destination sends encrypted data to proxy via <strong>connection A</strong>.</li>\n<li>Proxy forwards the data packet to client via <strong>connection B</strong>.</li>\n<li>Client reads the data &amp; decrypts it. It gets to know response payload\nsize from <strong>Content-Length</strong> header.</li>\n<li>Once client is done reading that many bytes, it decides to call\nsocket.close() on <strong>Connection A</strong>.</li>\n<li>Proxy detects <strong>connection A</strong> got closed. So it doesn't need to maintain\n<strong>connection B</strong> to destination &amp; closes it.</li>\n</ul>\n<p>So both HTTP connections got terminated. And it didn't need proxy to\nread encrypted data.</p>\n"}],"owner":{"account_id":2242924,"reputation":732,"user_id":1976997,"display_name":"ravenskater"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669209635,"creation_date":1669129617,"question_id":74534794,"body_markdown":"This question applies only for HTTPS requests.\r\n\r\nLets divide the problem in 3 areas.\r\n1. The origin. This is the user sending an HTTPS request.\r\n2. The proxy. This will handle the request, forward it to the remote and vice-versa.\r\n3. The remote. This is the server where the request is supposed to arrive.\r\n\r\nWhen you make an HTTPS request through a proxy, this is what happens:\r\n\r\n1. Origin sends with HTTP (this is not encrypted):\r\n\r\n    CONNECT remote.url:443 HTTP/1.1\r\n    ...\r\n\r\n2. Proxy replies:\r\n\r\n    HTTP/1.1 200 Connection established\r\n\r\n3. Origin sends the request to the proxy, totally encrypted:\r\n\r\n    Ci J,H;U*#cR{g WuY&lt;u#1#jiHk...\r\n\r\n4. Proxy takes it as it is, and it forwards it to remote:\r\n\r\n    Ci J,H;U*#cR{g WuY&lt;u#1#jiHk...\r\n\r\n5. Remote replies, it is also totally encrypted:\r\n\r\n    cR{g WuY&lt;u#1...\r\n\r\n6. Proxy passes this to the origin:\r\n\r\n    cR{g WuY&lt;u#1...\r\n\r\n7. Origin knows how to decrypt this and it is happy to receive the response.\r\n\r\nThe question is, how does the proxy knows that the response is terminated?. The proxy is just reading streams, and cannot know the end of it. Moreover, it cannot read HTTP headers to know the length because they are encrypted.\r\n\r\nI am facing this issue in Java and I don&#39;t know how to deal with that.","title":"How an HTTP proxy knows when to close the connection","body":"<p>This question applies only for HTTPS requests.</p>\n<p>Lets divide the problem in 3 areas.</p>\n<ol>\n<li>The origin. This is the user sending an HTTPS request.</li>\n<li>The proxy. This will handle the request, forward it to the remote and vice-versa.</li>\n<li>The remote. This is the server where the request is supposed to arrive.</li>\n</ol>\n<p>When you make an HTTPS request through a proxy, this is what happens:</p>\n<ol>\n<li><p>Origin sends with HTTP (this is not encrypted):</p>\n<p>CONNECT remote.url:443 HTTP/1.1\n...</p>\n</li>\n<li><p>Proxy replies:</p>\n<p>HTTP/1.1 200 Connection established</p>\n</li>\n<li><p>Origin sends the request to the proxy, totally encrypted:</p>\n<p>Ci J,H;U*#cR{g WuY&lt;u#1#jiHk...</p>\n</li>\n<li><p>Proxy takes it as it is, and it forwards it to remote:</p>\n<p>Ci J,H;U*#cR{g WuY&lt;u#1#jiHk...</p>\n</li>\n<li><p>Remote replies, it is also totally encrypted:</p>\n<p>cR{g WuY&lt;u#1...</p>\n</li>\n<li><p>Proxy passes this to the origin:</p>\n<p>cR{g WuY&lt;u#1...</p>\n</li>\n<li><p>Origin knows how to decrypt this and it is happy to receive the response.</p>\n</li>\n</ol>\n<p>The question is, how does the proxy knows that the response is terminated?. The proxy is just reading streams, and cannot know the end of it. Moreover, it cannot read HTTP headers to know the length because they are encrypted.</p>\n<p>I am facing this issue in Java and I don't know how to deal with that.</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669206710,"post_id":74546763,"comment_id":131591131,"body_markdown":"@AlexanderIvanchenko Arrays","body":"@AlexanderIvanchenko Arrays"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669206769,"post_id":74546763,"comment_id":131591152,"body_markdown":"And since questions looking for &quot;the best&quot; &quot;most neat&quot; way to perform something are considered to be off-topic as opinionated, I kindly advise to change the phrasing.","body":"And since questions looking for &quot;the best&quot; &quot;most neat&quot; way to perform something are considered to be off-topic as opinionated, I kindly advise to change the phrasing."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669206797,"post_id":74546763,"comment_id":131591161,"body_markdown":"I wouldn&#39;t care about &quot;most elegant&quot; but rather &quot;working&quot;, &quot;maintainable&quot;, &quot;readable&quot;, &quot;robust&quot;. &quot;elegant&quot; might imply &quot;little code&quot; whereas sometime a little more code makes a solution more robust and readable.","body":"I wouldn&#39;t care about &quot;most elegant&quot; but rather &quot;working&quot;, &quot;maintainable&quot;, &quot;readable&quot;, &quot;robust&quot;. &quot;elegant&quot; might imply &quot;little code&quot; whereas sometime a little more code makes a solution more robust and readable."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669206830,"post_id":74546763,"comment_id":131591170,"body_markdown":"On the topic itself: is that string basically defining a 3x3 grid of numbers?","body":"On the topic itself: is that string basically defining a 3x3 grid of numbers?"},{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669207038,"post_id":74546763,"comment_id":131591241,"body_markdown":"@Thomas It is defining a NxN grid of numbers.","body":"@Thomas It is defining a NxN grid of numbers."},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1669207106,"post_id":74546763,"comment_id":131591267,"body_markdown":"It is a good idea to do units of work in separate methods so move this logic to a method and call that method.   e.g. `int[][] square = buildSquare(args[1]);`  One of the benefits of doing this is that it makes your code cleaner where the method is being invoked.","body":"It is a good idea to do units of work in separate methods so move this logic to a method and call that method.   e.g. <code>int[][] square = buildSquare(args[1]);</code>  One of the benefits of doing this is that it makes your code cleaner where the method is being invoked."},{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669207156,"post_id":74546763,"comment_id":131591284,"body_markdown":"@vsfDawg Thanks. Already did that.","body":"@vsfDawg Thanks. Already did that."}],"answers":[{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669207406,"creation_date":1669207037,"answer_id":74546913,"question_id":74546763,"body_markdown":"I assume `&quot;&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;&quot;` would define a 3x3 grid so I would use the following approach:\r\n\r\n- split the string into a string per row so we get `&quot;num-num-num&quot;`. That means:\r\n  - remove the leading and trailing angular brackets\r\n  - split at `&quot;&gt;&lt;&quot;` and remove it\r\n- split each row at `&quot;-&quot;` to get the individual numbers\r\n- parse the numbers and assign them to the grid\r\n\r\nSome code example:\r\n\r\n    String input = &quot;&lt;11-12-13&gt;&lt;21-22-23&gt;&lt;31-32-33&gt;&quot;;\r\n\t \r\n    //remove leading &lt; and trailing &gt; then split at &gt;&lt;   \r\n    String[] inputRows = input.substring(1,input.length()-1).split(&quot;&gt;&lt;&quot;);\r\n\t    \r\n    int[][] grid = new int[inputRows.length][];\r\n\t    \r\n    for( int r = 0; r &lt; inputRows.length; r++) {\r\n        //split the row at -\r\n\t   \tString[] cells = inputRows[r].split(&quot;-&quot;);\r\n\t    \t\r\n        //convert the array of strings to an array of int by parsing each cell\r\n    \tgrid[r] = Arrays.stream(cells).mapToInt(Integer::parseInt).toArray();\r\n    }","title":"How to turn a String into a nested Array","body":"<p>I assume <code>&quot;&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;&quot;</code> would define a 3x3 grid so I would use the following approach:</p>\n<ul>\n<li>split the string into a string per row so we get <code>&quot;num-num-num&quot;</code>. That means:\n<ul>\n<li>remove the leading and trailing angular brackets</li>\n<li>split at <code>&quot;&gt;&lt;&quot;</code> and remove it</li>\n</ul>\n</li>\n<li>split each row at <code>&quot;-&quot;</code> to get the individual numbers</li>\n<li>parse the numbers and assign them to the grid</li>\n</ul>\n<p>Some code example:</p>\n<pre><code>String input = &quot;&lt;11-12-13&gt;&lt;21-22-23&gt;&lt;31-32-33&gt;&quot;;\n \n//remove leading &lt; and trailing &gt; then split at &gt;&lt;   \nString[] inputRows = input.substring(1,input.length()-1).split(&quot;&gt;&lt;&quot;);\n    \nint[][] grid = new int[inputRows.length][];\n    \nfor( int r = 0; r &lt; inputRows.length; r++) {\n    //split the row at -\n    String[] cells = inputRows[r].split(&quot;-&quot;);\n        \n    //convert the array of strings to an array of int by parsing each cell\n    grid[r] = Arrays.stream(cells).mapToInt(Integer::parseInt).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669209402,"creation_date":1669207838,"answer_id":74547085,"question_id":74546763,"body_markdown":"Here&#39;s how it can be done using Java 9 [`Matcher.results()`][results].\r\n\r\nFirst, let&#39;s define a pattern that captures a group of digits interlaid with dashes `-`:\r\n\r\n```\r\npublic static final Pattern ANGLE_BRACKETS = Pattern.compile(&quot;&lt;([\\\\d-]*)&gt;&quot;);\r\n```\r\n\r\nUsing this pattern, we can create a matcher, and with `Matcher.results()` generate a stream of `MatchResult`s, which is an object representing the captured sequence of characters.\r\n\r\nWe can obtain the matching substring using [`MatchResult.group()`][group] (`1` *should be passed as an argument, since we need a substring without brackets*). \r\n\r\nTo split each group, we can use either `Pattern.splitAsStream()` or `Arrays.split()`. In this case, the latter is preferred because splitting a string on dashes `&quot;-&quot;` can be done without compiling a regular expression and utilizing regex engine. `Pattern.splitAsStream()` might be more beneficial when array is large (`splitAsStream()` generates a stream directly from the regex engine with need to allocate an intermediate array), or we need to split a string using a regex, and not a regular string like `&quot;-&quot;`.\r\n\r\n```\r\nString parameter = &quot;&lt;1-2-3&gt;&lt;4-5-6&gt;&lt;7-8-9&gt;&quot;;\r\n    \r\nint[][] matrix = ANGLE_BRACKETS1.matcher(parameter).results()\r\n    .map(matchResult -&gt; matchResult.group(1))\r\n    .map(str -&gt; Arrays.stream(str.split(&quot;-&quot;)).mapToInt(Integer::parseInt).toArray())\r\n    .toArray(int[][]::new);\r\n    \r\nSystem.out.println(Arrays.deepToString(matrix));\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\r\n```\r\n\r\n\r\n   [results]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\r\n\r\n   [group]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/MatchResult.html#group(int)","title":"How to turn a String into a nested Array","body":"<p>Here's how it can be done using Java 9 <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\" rel=\"nofollow noreferrer\"><code>Matcher.results()</code></a>.</p>\n<p>First, let's define a pattern that captures a group of digits interlaid with dashes <code>-</code>:</p>\n<pre><code>public static final Pattern ANGLE_BRACKETS = Pattern.compile(&quot;&lt;([\\\\d-]*)&gt;&quot;);\n</code></pre>\n<p>Using this pattern, we can create a matcher, and with <code>Matcher.results()</code> generate a stream of <code>MatchResult</code>s, which is an object representing the captured sequence of characters.</p>\n<p>We can obtain the matching substring using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/MatchResult.html#group(int)\" rel=\"nofollow noreferrer\"><code>MatchResult.group()</code></a> (<code>1</code> <em>should be passed as an argument, since we need a substring without brackets</em>).</p>\n<p>To split each group, we can use either <code>Pattern.splitAsStream()</code> or <code>Arrays.split()</code>. In this case, the latter is preferred because splitting a string on dashes <code>&quot;-&quot;</code> can be done without compiling a regular expression and utilizing regex engine. <code>Pattern.splitAsStream()</code> might be more beneficial when array is large (<code>splitAsStream()</code> generates a stream directly from the regex engine with need to allocate an intermediate array), or we need to split a string using a regex, and not a regular string like <code>&quot;-&quot;</code>.</p>\n<pre><code>String parameter = &quot;&lt;1-2-3&gt;&lt;4-5-6&gt;&lt;7-8-9&gt;&quot;;\n    \nint[][] matrix = ANGLE_BRACKETS1.matcher(parameter).results()\n    .map(matchResult -&gt; matchResult.group(1))\n    .map(str -&gt; Arrays.stream(str.split(&quot;-&quot;)).mapToInt(Integer::parseInt).toArray())\n    .toArray(int[][]::new);\n    \nSystem.out.println(Arrays.deepToString(matrix));\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n"}],"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74546913,"answer_count":2,"score":-1,"last_activity_date":1669209516,"creation_date":1669206345,"question_id":74546763,"body_markdown":"I get a String of the format \r\n`&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;`. I want to turn this into a nested Array of Ints with each Array being the content between the `&lt;&gt;`. \r\n\r\nThis is what I got so far:\r\n```java\r\nString parameter = args[1];\r\n// split the string into an array of strings at &gt;\r\n\r\nString[] splitString = parameter.split(&quot;&gt;&quot;);\r\nint[][] square = new int[splitString.length][splitString.length];\r\n\r\n// remove &lt;, &gt; and - characters and push the numbers into the square\r\n\r\nfor (int i = 0; i &lt; splitString.length; i++) {\r\n    splitString[i] = splitString[i].replaceAll(&quot;[&lt;&gt;-]&quot;, &quot;&quot;);\r\n\r\n    for (int j = 0; j &lt; splitString.length; j++) {\r\n        square[i][j] = Integer.parseInt(splitString[i].substring(j, j + 1));\r\n    }\r\n}\r\n```\r\n\r\nI don&#39;t feel like this is very clean, but it works. Does anyone have an idea on how to improve readability?","title":"How to turn a String into a nested Array","body":"<p>I get a String of the format\n<code>&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;</code>. I want to turn this into a nested Array of Ints with each Array being the content between the <code>&lt;&gt;</code>.</p>\n<p>This is what I got so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String parameter = args[1];\n// split the string into an array of strings at &gt;\n\nString[] splitString = parameter.split(&quot;&gt;&quot;);\nint[][] square = new int[splitString.length][splitString.length];\n\n// remove &lt;, &gt; and - characters and push the numbers into the square\n\nfor (int i = 0; i &lt; splitString.length; i++) {\n    splitString[i] = splitString[i].replaceAll(&quot;[&lt;&gt;-]&quot;, &quot;&quot;);\n\n    for (int j = 0; j &lt; splitString.length; j++) {\n        square[i][j] = Integer.parseInt(splitString[i].substring(j, j + 1));\n    }\n}\n</code></pre>\n<p>I don't feel like this is very clean, but it works. Does anyone have an idea on how to improve readability?</p>\n"},{"tags":["java","split","max"],"comments":[{"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"score":0,"creation_date":1669201831,"post_id":74545829,"comment_id":131589456,"body_markdown":"Shouldn&#39;t be &#39;\\\\d+&#39;?","body":"Shouldn&#39;t be &#39;\\\\d+&#39;?"},{"owner":{"account_id":957028,"reputation":15133,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1669201855,"post_id":74545829,"comment_id":131589470,"body_markdown":"As nearly always: your Regex is incorrect. You only match one digit.","body":"As nearly always: your Regex is incorrect. You only match one digit."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1669201857,"post_id":74545829,"comment_id":131589471,"body_markdown":"Well, if you want to split by `;` have you considered actually doing `split(&quot;;&quot;)`? `split(&quot;&quot;)` will give you an array where every string has a length of 1.","body":"Well, if you want to split by <code>;</code> have you considered actually doing <code>split(&quot;;&quot;)</code>? <code>split(&quot;&quot;)</code> will give you an array where every string has a length of 1."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669202618,"post_id":74545829,"comment_id":131589723,"body_markdown":"@OHGODSPIDERS I have considered splitting by ; although that wouldn&#39;t be possible as the splitters in the file are all different. One line is split by &quot; &quot;, second &quot; ; &quot; etc.","body":"@OHGODSPIDERS I have considered splitting by ; although that wouldn&#39;t be possible as the splitters in the file are all different. One line is split by &quot; &quot;, second &quot; ; &quot; etc."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669202839,"post_id":74545829,"comment_id":131589796,"body_markdown":"@kofemann Ive tried to use the &quot;\\\\d+&quot; but it still only shows one digit for some reason","body":"@kofemann Ive tried to use the &quot;\\\\d+&quot; but it still only shows one digit for some reason"},{"owner":{"account_id":2506013,"reputation":89,"user_id":2179720,"display_name":"Luponius"},"score":0,"creation_date":1669203519,"post_id":74545829,"comment_id":131590041,"body_markdown":"Was the `\\\\d+` also included in the maxInt pattern compilation check?","body":"Was the <code>\\\\d+</code> also included in the maxInt pattern compilation check?"},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669204490,"post_id":74545829,"comment_id":131590387,"body_markdown":"@Luponius Yes, When I add it to the seperator checker &amp; maxInt it comes back with:\n\nOperation{seperator=SEMICOLON}\nOptionalInt[6]","body":"@Luponius Yes, When I add it to the seperator checker &amp; maxInt it comes back with:  Operation{seperator=SEMICOLON} OptionalInt[6]"},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1669205276,"post_id":74545829,"comment_id":131590663,"body_markdown":"@wieszak09 Well in that case: You say you already have a method to find the separator, so you should use that found `SeperatorEnum separator` for splitting. Since you didn&#39;t include it I don&#39;t know how exactly the class `SeperatorEnum` looks like, but maybe something like `data.split(seperator.getSeparatorStringValue())` is possible (Where getSeparatorStringValue would return &quot;;&quot; for the enum SEMICOLON). However you want to accomplish it, in the end you need to split by what is actually separating your numbers and not just do `data.split(&quot;&quot;)` in your maxInt method as that is simply wrong.","body":"@wieszak09 Well in that case: You say you already have a method to find the separator, so you should use that found <code>SeperatorEnum separator</code> for splitting. Since you didn&#39;t include it I don&#39;t know how exactly the class <code>SeperatorEnum</code> looks like, but maybe something like <code>data.split(seperator.getSeparatorStringValue())</code> is possible (Where getSeparatorStringValue would return &quot;;&quot; for the enum SEMICOLON). However you want to accomplish it, in the end you need to split by what is actually separating your numbers and not just do <code>data.split(&quot;&quot;)</code> in your maxInt method as that is simply wrong."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669205916,"post_id":74545829,"comment_id":131590877,"body_markdown":"Thank you @OHGODSPIDERS The above has solved the issue :) many thanks for your input","body":"Thank you @OHGODSPIDERS The above has solved the issue :) many thanks for your input"}],"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209446,"creation_date":1669201665,"question_id":74545829,"body_markdown":"I&#39;m working on a problem where I have to find a separator of the data and also find the highest number from it. I have found the separator, although when I&#39;m trying to complete `findMax` from the data and there is number 33, for example, it doesn&#39;t recognize it as 33 but rather it sees it as 3 and 3 separatley.\r\n\r\nCould you advise?\r\n\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n        String data = &quot;1;2;33;4;6&quot;;\r\n        Operation operation = new Operation();\r\n        operation.findSeperator(data);\r\n        System.out.println(operation);\r\n\r\n        System.out.println(operation.maxInt(data));\r\n    }\r\n\r\n    public class Operation {\r\n\r\n    private SeperatorEnum seperator;\r\n    private String data;\r\n\r\n    public void findSeperator(String data) {\r\n        Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\r\n        Optional&lt;String&gt; optional = Arrays.stream(data.split(&quot;&quot;))\r\n                .filter(e -&gt; !pattern.matcher(e).matches())\r\n                .findFirst();\r\n        this.seperator = Arrays.stream(SeperatorEnum.values())\r\n                .filter(e -&gt; e.getSeperator().equals(optional.orElse(null)))\r\n                .findFirst()\r\n                .orElseThrow();\r\n    }\r\n\r\n    public OptionalInt maxInt (String data) {\r\n        Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\r\n        return Arrays.stream(data.split(&quot;&quot;))\r\n              .filter(e -&gt; pattern.matcher(e).matches())\r\n                .mapToInt(Integer::parseInt)\r\n                .max();\r\n    }\r\n\r\nHere is a sample of the data:\r\n\r\n    String data = &quot;1;2;33;4;6&quot;;\r\n\r\n","title":"max() doesn&#39;t return 10 it returns 1 then 0","body":"<p>I'm working on a problem where I have to find a separator of the data and also find the highest number from it. I have found the separator, although when I'm trying to complete <code>findMax</code> from the data and there is number 33, for example, it doesn't recognize it as 33 but rather it sees it as 3 and 3 separatley.</p>\n<p>Could you advise?</p>\n<pre><code>public class Main {\npublic static void main(String[] args) {\n    String data = &quot;1;2;33;4;6&quot;;\n    Operation operation = new Operation();\n    operation.findSeperator(data);\n    System.out.println(operation);\n\n    System.out.println(operation.maxInt(data));\n}\n\npublic class Operation {\n\nprivate SeperatorEnum seperator;\nprivate String data;\n\npublic void findSeperator(String data) {\n    Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\n    Optional&lt;String&gt; optional = Arrays.stream(data.split(&quot;&quot;))\n            .filter(e -&gt; !pattern.matcher(e).matches())\n            .findFirst();\n    this.seperator = Arrays.stream(SeperatorEnum.values())\n            .filter(e -&gt; e.getSeperator().equals(optional.orElse(null)))\n            .findFirst()\n            .orElseThrow();\n}\n\npublic OptionalInt maxInt (String data) {\n    Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\n    return Arrays.stream(data.split(&quot;&quot;))\n          .filter(e -&gt; pattern.matcher(e).matches())\n            .mapToInt(Integer::parseInt)\n            .max();\n}\n</code></pre>\n<p>Here is a sample of the data:</p>\n<pre><code>String data = &quot;1;2;33;4;6&quot;;\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":166892,"reputation":4102,"user_id":391338,"display_name":"Sentry"},"score":0,"creation_date":1472246932,"post_id":39174839,"comment_id":65692066,"body_markdown":"You&#39;re trying to start a thread that is already running. That won&#39;t work by definition. Maybe you&#39;re confusing the Thread class or object with the thread concept?","body":"You&#39;re trying to start a thread that is already running. That won&#39;t work by definition. Maybe you&#39;re confusing the Thread class or object with the thread concept?"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1472247021,"post_id":39174839,"comment_id":65692093,"body_markdown":"Well, create one Runnable instance, and several Thread instances from this Runnable instance. Also, don&#39;t use busy-loops to wait for something to happen.","body":"Well, create one Runnable instance, and several Thread instances from this Runnable instance. Also, don&#39;t use busy-loops to wait for something to happen."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1472247055,"post_id":39174839,"comment_id":65692103,"body_markdown":"A pool of Executors should be preferred to using bare Threads.  There&#39;s a reason for the new concurrency package.","body":"A pool of Executors should be preferred to using bare Threads.  There&#39;s a reason for the new concurrency package."}],"answers":[{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472247047,"creation_date":1472247047,"answer_id":39174882,"question_id":39174839,"body_markdown":"Because you cannot call start on a thread twice. \r\n\r\n[Thread API:][1]\r\n\r\n&gt; It is never legal to start a thread more than once. In particular, a\r\n&gt; thread may not be restarted once it has completed execution.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start()\r\n\r\nYou must put in run() a *unit of work* - the code that needs to be executed by multiple threads. And then instantiate as many threads as you need (calling start on each, but only once).","title":"More than one start on one Thread","body":"<p>Because you cannot call start on a thread twice. </p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start()\" rel=\"nofollow\">Thread API:</a></p>\n\n<blockquote>\n  <p>It is never legal to start a thread more than once. In particular, a\n  thread may not be restarted once it has completed execution.</p>\n</blockquote>\n\n<p>You must put in run() a <em>unit of work</em> - the code that needs to be executed by multiple threads. And then instantiate as many threads as you need (calling start on each, but only once).</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669209270,"creation_date":1472247080,"answer_id":39174890,"question_id":39174839,"body_markdown":"Forget starting your own thread or threads and orchestrating them with your own semaphores. This constitutes a) overengineering, and b) not using the right tools for the job.\r\n\r\nThe threads can be managed by a threadpool, and all the semaphores can be replaced with a single concurrent (thread-safe) queue.\r\n\r\nWith a threadpool you can run methods known as &quot;runners&quot;. You could create a new runner whenever you need a new one, but it is easier to just reuse an existing runner simply by making it run in a loop. The trick is that in each iteration of the loop, the runner picks the next item to work on from the queue and processes it.\r\n\r\nSo, in your example, you stuff all of your smartphones in a queue, and then each &quot;runner&quot; waits until a smartphone is available to dequeue, dequeues it, performs the test, and repeats. The implementation of the concurrent blocking queue guarantees that it will share its contents fairly between consumers.\r\n\r\nIf you have N runners and you want them to gracefully stop, enqueue N instances of a special sentinel value which means &quot;please quit&quot;. When a runner sees this special value, it quits. This will cause exactly N runners to quit.\r\n\r\nRead up on `java.util.concurrent.BlockingQueue` and on `ThreadPoolExecutor`, they are the tool to use for the job.\r\n","title":"More than one start on one Thread","body":"<p>Forget starting your own thread or threads and orchestrating them with your own semaphores. This constitutes a) overengineering, and b) not using the right tools for the job.</p>\n<p>The threads can be managed by a threadpool, and all the semaphores can be replaced with a single concurrent (thread-safe) queue.</p>\n<p>With a threadpool you can run methods known as &quot;runners&quot;. You could create a new runner whenever you need a new one, but it is easier to just reuse an existing runner simply by making it run in a loop. The trick is that in each iteration of the loop, the runner picks the next item to work on from the queue and processes it.</p>\n<p>So, in your example, you stuff all of your smartphones in a queue, and then each &quot;runner&quot; waits until a smartphone is available to dequeue, dequeues it, performs the test, and repeats. The implementation of the concurrent blocking queue guarantees that it will share its contents fairly between consumers.</p>\n<p>If you have N runners and you want them to gracefully stop, enqueue N instances of a special sentinel value which means &quot;please quit&quot;. When a runner sees this special value, it quits. This will cause exactly N runners to quit.</p>\n<p>Read up on <code>java.util.concurrent.BlockingQueue</code> and on <code>ThreadPoolExecutor</code>, they are the tool to use for the job.</p>\n"},{"tags":[],"owner":{"account_id":8643075,"reputation":2470,"user_id":6471170,"accept_rate":60,"display_name":"nasukkin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472247208,"creation_date":1472247208,"answer_id":39174913,"question_id":39174839,"body_markdown":"Extract your Thread implementation into its own class, instantiate some instances of those, and start them one-by-one. Example:\r\n\r\n    public class MyThread extends Thread {\r\n        @Override\r\n        public void run() {\r\n           // Do some cool stuff here!\r\n        }\r\n    }\r\n\r\n... And then, elsewhere in your code, when you want to start multiple &quot;copies&quot; of your thread...\r\n\r\n    public void startThreads() {\r\n        MyThread threadA = new MyThread(),\r\n                 threadB = new MyThread(),\r\n                 threadC = new MyThread();\r\n        threadA.start();\r\n        threadB.start();\r\n        threadC.start();\r\n        // make as many as you need, then invoke start on them.\r\n    }\r\n\r\nBUT, as others have already pointed out, each instance of Thread can only be `start()`ed one time.","title":"More than one start on one Thread","body":"<p>Extract your Thread implementation into its own class, instantiate some instances of those, and start them one-by-one. Example:</p>\n\n<pre><code>public class MyThread extends Thread {\n    @Override\n    public void run() {\n       // Do some cool stuff here!\n    }\n}\n</code></pre>\n\n<p>... And then, elsewhere in your code, when you want to start multiple \"copies\" of your thread...</p>\n\n<pre><code>public void startThreads() {\n    MyThread threadA = new MyThread(),\n             threadB = new MyThread(),\n             threadC = new MyThread();\n    threadA.start();\n    threadB.start();\n    threadC.start();\n    // make as many as you need, then invoke start on them.\n}\n</code></pre>\n\n<p>BUT, as others have already pointed out, each instance of Thread can only be <code>start()</code>ed one time.</p>\n"}],"owner":{"account_id":5028159,"reputation":37,"user_id":4039299,"accept_rate":100,"display_name":"DynamicBit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":39174890,"answer_count":3,"score":0,"last_activity_date":1669209270,"creation_date":1472246824,"question_id":39174839,"body_markdown":"Iam trying to start a thread more than one time. But I read that is not possible, because I get a the IllegalThreadStateException for it. Iam trying to do the following thing. I have **n** smartphone. I would like to do an automatic test on apps. the tests are parallel, one app per device.  any idea to solve it? Here is my Code?\r\n\r\n    Semaphore smartphones = new Semaphore(androidComponents.size());\r\n    Thread evaluationProcess = new Thread() {\r\n            public void run() {\r\n                try {\r\n                    smartphones.acquire();\r\n                    [CODE FOR TESTING]\r\n                    smartphones.release();\r\n            }\r\n        };\r\n\r\n        while (!evaluationCompleted(apps)) {\r\n            evaluationProcess.start();\r\n            while (smartphones.availablePermits() == 0) ;\r\n        }","title":"More than one start on one Thread","body":"<p>Iam trying to start a thread more than one time. But I read that is not possible, because I get a the IllegalThreadStateException for it. Iam trying to do the following thing. I have <strong>n</strong> smartphone. I would like to do an automatic test on apps. the tests are parallel, one app per device.  any idea to solve it? Here is my Code?</p>\n\n<pre><code>Semaphore smartphones = new Semaphore(androidComponents.size());\nThread evaluationProcess = new Thread() {\n        public void run() {\n            try {\n                smartphones.acquire();\n                [CODE FOR TESTING]\n                smartphones.release();\n        }\n    };\n\n    while (!evaluationCompleted(apps)) {\n        evaluationProcess.start();\n        while (smartphones.availablePermits() == 0) ;\n    }\n</code></pre>\n"},{"tags":["java","java.util.scanner","branch","joptionpane"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669207472,"post_id":74546898,"comment_id":131591409,"body_markdown":"Please provide a [mre]. Currently we don&#39;t know what `dataLogin` is and does. (Btw: Java Naming Conventions says that class names shall start uppercase) Please [edit] your question accordingly, and also add the input, output and expected output.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Currently we don&#39;t know what <code>dataLogin</code> is and does. (Btw: Java Naming Conventions says that class names shall start uppercase) Please <a href=\"https://stackoverflow.com/posts/74546898/edit\">edit</a> your question accordingly, and also add the input, output and expected output."},{"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"score":0,"creation_date":1669207793,"post_id":74546898,"comment_id":131591529,"body_markdown":"Sorry, this is my first time asking on Stack Overflow","body":"Sorry, this is my first time asking on Stack Overflow"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669207882,"post_id":74546898,"comment_id":131591569,"body_markdown":"Don&#39;t worry, be sure to check out the link I posted and to edit your question accordingly. For further reference, be sure to take the [tour] and have a look at [ask]","body":"Don&#39;t worry, be sure to check out the link I posted and to edit your question accordingly. For further reference, be sure to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and have a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"score":0,"creation_date":1669209314,"post_id":74546898,"comment_id":131592014,"body_markdown":"Is my qustion appropriate?","body":"Is my qustion appropriate?"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669209775,"post_id":74546898,"comment_id":131592191,"body_markdown":"No, you have not provided a [mre]. Somebody trying to help you cannot simply take your code and run it themselves. So try to fix all compilation problems and to provide the correct code, otherwise people won&#39;t be able to help you.","body":"No, you have not provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Somebody trying to help you cannot simply take your code and run it themselves. So try to fix all compilation problems and to provide the correct code, otherwise people won&#39;t be able to help you."},{"owner":{"account_id":2392155,"reputation":2372,"user_id":2091803,"accept_rate":86,"display_name":"Abdullah Leghari"},"score":0,"creation_date":1669216989,"post_id":74546898,"comment_id":131595197,"body_markdown":"It does display JOptionPane on my system. Java 11, Windows 10 64-bit.","body":"It does display JOptionPane on my system. Java 11, Windows 10 64-bit."},{"owner":{"account_id":24518100,"reputation":1845,"user_id":18431570,"display_name":"Jagroop"},"score":0,"creation_date":1669217228,"post_id":74546898,"comment_id":131595312,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209240,"creation_date":1669206979,"question_id":74546898,"body_markdown":"[This is the output][1]\r\n\r\nThis is my school assignment. I want to make a program using Scanner and JOptionPane. But my program is stuck on branching. Can anyone help me? Somehow the JOptionPane doesn&#39;t want to appear. I want that when I type the number 1, the OPtionPane will appear. I&#39;m a complete newbie at this.\r\n\r\n\r\nThis is the script:\r\n\r\n\r\n           int choice;\r\n           \r\n           do{\r\n               System.out.print(&quot;MAIN MENU&quot; + &quot;\\n--------------------&quot;\r\n                       + &quot;\\nOption Menu :&quot; + &quot;\\n1. LOGIN&quot; + &quot;\\n2. EXIT&quot; + &quot;\\n--------------------&quot; + &quot;\\nYour choice: &quot;);\r\n               choice = in.nextInt();\r\n               \r\n               if(choice == 1){\r\n                   String user = &quot;&quot;;\r\n                   user = JOptionPane.showInputDialog(&quot;Username : &quot;);\r\n                   \r\n                   String pass = &quot;&quot;;\r\n                   pass = JOptionPane.showInputDialog(&quot;Password : &quot;);\r\n           } while (choice != 2);\r\n      }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rRD12.png","title":"Can JOptionPane be included in a branching program (if)?","body":"<p><a href=\"https://i.stack.imgur.com/rRD12.png\" rel=\"nofollow noreferrer\">This is the output</a></p>\n<p>This is my school assignment. I want to make a program using Scanner and JOptionPane. But my program is stuck on branching. Can anyone help me? Somehow the JOptionPane doesn't want to appear. I want that when I type the number 1, the OPtionPane will appear. I'm a complete newbie at this.</p>\n<p>This is the script:</p>\n<pre><code>       int choice;\n       \n       do{\n           System.out.print(&quot;MAIN MENU&quot; + &quot;\\n--------------------&quot;\n                   + &quot;\\nOption Menu :&quot; + &quot;\\n1. LOGIN&quot; + &quot;\\n2. EXIT&quot; + &quot;\\n--------------------&quot; + &quot;\\nYour choice: &quot;);\n           choice = in.nextInt();\n           \n           if(choice == 1){\n               String user = &quot;&quot;;\n               user = JOptionPane.showInputDialog(&quot;Username : &quot;);\n               \n               String pass = &quot;&quot;;\n               pass = JOptionPane.showInputDialog(&quot;Password : &quot;);\n       } while (choice != 2);\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","interface","crud-repository"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1669211792,"post_id":74547351,"comment_id":131593007,"body_markdown":"Don&#39;t... This is so wrong. Don&#39;t construct an `ApplicationContext` or `BeanFactory` because you need a bean, instead autowire the `UserService` in the controller.","body":"Don&#39;t... This is so wrong. Don&#39;t construct an <code>ApplicationContext</code> or <code>BeanFactory</code> because you need a bean, instead autowire the <code>UserService</code> in the controller."},{"owner":{"account_id":27023840,"reputation":1,"user_id":20581431,"display_name":"Zeeshan"},"score":0,"creation_date":1669220332,"post_id":74547351,"comment_id":131596481,"body_markdown":"Hi Deinum, I started to learn Spring so would like to test each behaviour to understand Sping for a real world application. Thx. Any advise please to fix this? I am using STS Spring boot.","body":"Hi Deinum, I started to learn Spring so would like to test each behaviour to understand Sping for a real world application. Thx. Any advise please to fix this? I am using STS Spring boot."}],"owner":{"account_id":27023840,"reputation":1,"user_id":20581431,"display_name":"Zeeshan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209196,"creation_date":1669209112,"question_id":74547351,"body_markdown":"When I try to @Autowire my repository interface extending crudrepository, the autowired reference becomes null. It only happens when I use spring.xml (xml-based configuration) to get my service class object into the controller. Spring.xml does not allow me to create beans for my repo because it requires a class, whereas the repo is an interface.\r\n\r\n&lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt;\r\n\r\nError is \r\n\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n\r\n```\r\njava.lang.NullPointerException: null \r\nat com.myspringproject1.service.SignupService.doSignup(SignupService.java:81) ~[classes/:na]\r\n\tat com.myspringproject1.controller.TestController.doSignup(TestController.java:42) ~[classes/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\r\n```\r\n\r\n    \r\nspring.xml\r\n```\r\n&lt;bean ..... &gt;\r\n&lt;context:annotation-config/&gt;\r\n    \r\n    &lt;bean id=&quot;signupServiceBean&quot; class=&quot;com.myspringproject1.service.SignupService&quot;&gt;&lt;/bean&gt;\r\n    &lt;!-- &lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt; --&gt; //commented. repo interface bean\r\n     \r\n    &lt;jpa:repositories base-package=&quot;com.myspringproject1.repo&quot;/&gt;\r\n    \r\n&lt;/beans&gt;\r\n```\r\n\r\n\r\nController.class\r\n```\r\n@Controller\r\npublic class TestController {\r\n\r\n@RequestMapping(method = RequestMethod.POST, value = &quot;signup&quot;)\r\n\tpublic ModelAndView doSignup(HttpServletRequest request) {\r\n\t\t\r\n\t\tBeanFactory factory = new XmlBeanFactory(new ClassPathResource(&quot;spring.xml&quot;));\r\n\t\tSignupService signupService = (SignupService) factory.getBean(&quot;signupServiceBean&quot;);\r\n\t\t\r\n\t\t\r\n\t\tModelAndView mv = new ModelAndView();\r\n\t\t\r\n\t\tboolean result = signupService.doSignup(request);\r\n\t\tif (result == true) {\r\n\t\t\tUser newUser = (User) request.getSession().getAttribute(&quot;user&quot;);\r\n\t\t\tmv.setViewName(&quot;signup_result&quot;);\r\n\t\t\tmv.addObject(&quot;newUser&quot;, newUser);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t\r\n\t\telse {\r\n\t\t\tmv.setViewName(&quot;signup_result&quot;);\r\n\t\t\tmv.addObject(&quot;newUser&quot;, null);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nRepository interface\r\n```\r\n@Repository\r\npublic interface StudentRepo extends CrudRepository&lt;User, Integer&gt;{\r\n\r\n}\r\n\r\nService class.\r\n\r\n```\r\n@Service\r\npublic class SignupService {\r\n\t\r\n\t@Autowired\r\n\tprivate StudentRepo studentRepo;\r\n        User result = studentRepo.save(user); // This fails as studentRepo is coming null.\r\n\r\n\r\n\r\n\r\nI would appreciate your help in resolving this issue. The whole project works when I don&#39;t use spring.xml and just use @component over my service class and autowire it as well in my controller.\r\n\r\nI doubt if autowire + xml based config works together!","title":"Autowiring repository gives null in Spring Boot?","body":"<p>When I try to @Autowire my repository interface extending crudrepository, the autowired reference becomes null. It only happens when I use spring.xml (xml-based configuration) to get my service class object into the controller. Spring.xml does not allow me to create beans for my repo because it requires a class, whereas the repo is an interface.</p>\n<p></p>\n<p>Error is</p>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause</p>\n<pre><code>java.lang.NullPointerException: null \nat com.myspringproject1.service.SignupService.doSignup(SignupService.java:81) ~[classes/:na]\n    at com.myspringproject1.controller.TestController.doSignup(TestController.java:42) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\n</code></pre>\n<p>spring.xml</p>\n<pre><code>&lt;bean ..... &gt;\n&lt;context:annotation-config/&gt;\n    \n    &lt;bean id=&quot;signupServiceBean&quot; class=&quot;com.myspringproject1.service.SignupService&quot;&gt;&lt;/bean&gt;\n    &lt;!-- &lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt; --&gt; //commented. repo interface bean\n     \n    &lt;jpa:repositories base-package=&quot;com.myspringproject1.repo&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p>Controller.class</p>\n<pre><code>@Controller\npublic class TestController {\n\n@RequestMapping(method = RequestMethod.POST, value = &quot;signup&quot;)\n    public ModelAndView doSignup(HttpServletRequest request) {\n        \n        BeanFactory factory = new XmlBeanFactory(new ClassPathResource(&quot;spring.xml&quot;));\n        SignupService signupService = (SignupService) factory.getBean(&quot;signupServiceBean&quot;);\n        \n        \n        ModelAndView mv = new ModelAndView();\n        \n        boolean result = signupService.doSignup(request);\n        if (result == true) {\n            User newUser = (User) request.getSession().getAttribute(&quot;user&quot;);\n            mv.setViewName(&quot;signup_result&quot;);\n            mv.addObject(&quot;newUser&quot;, newUser);\n            return mv;\n        }\n    \n        else {\n            mv.setViewName(&quot;signup_result&quot;);\n            mv.addObject(&quot;newUser&quot;, null);\n            return mv;\n        }\n    }\n</code></pre>\n<p>Repository interface</p>\n<pre><code>@Repository\npublic interface StudentRepo extends CrudRepository&lt;User, Integer&gt;{\n\n}\n\nService class.\n\n</code></pre>\n<p>@Service\npublic class SignupService {</p>\n<pre><code>@Autowired\nprivate StudentRepo studentRepo;\n    User result = studentRepo.save(user); // This fails as studentRepo is coming null.\n</code></pre>\n<p>I would appreciate your help in resolving this issue. The whole project works when I don't use spring.xml and just use @component over my service class and autowire it as well in my controller.</p>\n<p>I doubt if autowire + xml based config works together!</p>\n"},{"tags":["java","arraylist","java-8","hashmap"],"answers":[{"tags":[],"owner":{"account_id":11227882,"reputation":61,"user_id":8236993,"display_name":"Joxtacy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669095393,"creation_date":1669095393,"answer_id":74527935,"question_id":74527893,"body_markdown":"I don&#39;t know what the class `StudentBean` look like, but something like the following might work.\r\n\r\n```java\r\nfor (StudentBean studentBean : resultList) {\r\n    originalStudentDetails.put(studentBean.getStudentId(), studentBean);\r\n}\r\n```\r\n\r\nThis is assuming that `StudentBean` has a method called `getStudentId` that returns an `int` or `Integer`.","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>I don't know what the class <code>StudentBean</code> look like, but something like the following might work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (StudentBean studentBean : resultList) {\n    originalStudentDetails.put(studentBean.getStudentId(), studentBean);\n}\n</code></pre>\n<p>This is assuming that <code>StudentBean</code> has a method called <code>getStudentId</code> that returns an <code>int</code> or <code>Integer</code>.</p>\n"},{"tags":[],"owner":{"account_id":27000035,"reputation":34,"user_id":20561457,"display_name":"npe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669096535,"creation_date":1669096535,"answer_id":74528048,"question_id":74527893,"body_markdown":"Java 8, by lambda:\r\n```\r\nMap&lt;Integer, StudentBean&gt; map = resultList.stream().filter(t -&gt; t != null || t.getStudentId() != null).collect(Collectors.toMap(StudentBean::getStudentId, t -&gt; t));\r\n```\r\nStudentId must not be repeat or null, or there will be a duplicate key exception.","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>Java 8, by lambda:</p>\n<pre><code>Map&lt;Integer, StudentBean&gt; map = resultList.stream().filter(t -&gt; t != null || t.getStudentId() != null).collect(Collectors.toMap(StudentBean::getStudentId, t -&gt; t));\n</code></pre>\n<p>StudentId must not be repeat or null, or there will be a duplicate key exception.</p>\n"},{"tags":[],"owner":{"account_id":11415719,"reputation":7030,"user_id":10584605,"display_name":"ETO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669209038,"creation_date":1669209038,"answer_id":74547339,"question_id":74527893,"body_markdown":"In addition to Joxtacy&#39;s [correct approach][1]:\r\n\r\n```java\r\nresultList.forEach(s -&gt; originalStudentDetails.put(s.getStudentId(), s));\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74527935/10584605","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>In addition to Joxtacy's <a href=\"https://stackoverflow.com/a/74527935/10584605\">correct approach</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>resultList.forEach(s -&gt; originalStudentDetails.put(s.getStudentId(), s));\n</code></pre>\n"}],"owner":{"account_id":20276759,"reputation":255,"user_id":14871599,"display_name":"Ranyk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74547339,"answer_count":3,"score":2,"last_activity_date":1669209038,"creation_date":1669095075,"question_id":74527893,"body_markdown":"I have a List:\r\n \r\n`List&lt;StudentBean&gt; resultList`\r\n\r\nStudentBean has something like with getters and setters:\r\n\r\n`{ Integer StudentId, String StudentName, String Section}`.\r\n\r\n\r\nI have a map with values: `Map&lt;Integer, StudentBean&gt; orginialStudentDetails`\r\n\r\nNow I want to add/replace the values from resultList to orginialStudentDetails, how can I achieve that?\r\n\r\nTried:\r\n\r\n```\r\nfor (Map.Entry&lt;Integer, StudentBean&gt; entry : resultList .size()){\r\n     orginialStudentDetails.put(entry.getKey(), resultList );\r\n}","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>I have a List:</p>\n<p><code>List&lt;StudentBean&gt; resultList</code></p>\n<p>StudentBean has something like with getters and setters:</p>\n<p><code>{ Integer StudentId, String StudentName, String Section}</code>.</p>\n<p>I have a map with values: <code>Map&lt;Integer, StudentBean&gt; orginialStudentDetails</code></p>\n<p>Now I want to add/replace the values from resultList to orginialStudentDetails, how can I achieve that?</p>\n<p>Tried:</p>\n<pre><code>for (Map.Entry&lt;Integer, StudentBean&gt; entry : resultList .size()){\n     orginialStudentDetails.put(entry.getKey(), resultList );\n}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669193719,"creation_date":1669193719,"answer_id":74544055,"question_id":74543988,"body_markdown":"If you click on the arrow present just after `Current File`, you will find an option called `Edit Configurations`. There you can add your own variables for running your application. And yes, you can save your configuration using the `Save TEST_CLASS_NAME Configuration`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gzs7I.png","title":"IntelliJ IDEA Run applications","body":"<p>If you click on the arrow present just after <code>Current File</code>, you will find an option called <code>Edit Configurations</code>. There you can add your own variables for running your application. And yes, you can save your configuration using the <code>Save TEST_CLASS_NAME Configuration</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/gzs7I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gzs7I.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":26970512,"reputation":1,"user_id":20536602,"display_name":"D_W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669208932,"creation_date":1669193450,"question_id":74543988,"body_markdown":"Excuse me, the Run applications of IntelliJ IDEA in the picture below have questions about variables.\r\nAfter the Run applications are running, will they save the previously executed variables like the JShell console of IntelliJ IDEA, and they can be used in the next execution?\r\n\r\n\r\n![enter image description here](https://i.stack.imgur.com/gU9W1.png)\r\n\r\n\r\nI want to know whether Run applications has such a function, or only JShell console can do it.\r\n\r\n","title":"IntelliJ IDEA Run applications","body":"<p>Excuse me, the Run applications of IntelliJ IDEA in the picture below have questions about variables.\nAfter the Run applications are running, will they save the previously executed variables like the JShell console of IntelliJ IDEA, and they can be used in the next execution?</p>\n<p><img src=\"https://i.stack.imgur.com/gU9W1.png\" alt=\"enter image description here\" /></p>\n<p>I want to know whether Run applications has such a function, or only JShell console can do it.</p>\n"},{"tags":["java","scala","sbt","intellij-plugin"],"comments":[{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1669215591,"post_id":74545975,"comment_id":131594621,"body_markdown":"Can you build your project without IntelliJ (outside IntelliJ)? `sbt clean compile`","body":"Can you build your project without IntelliJ (outside IntelliJ)? <code>sbt clean compile</code>"},{"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"score":0,"creation_date":1669239141,"post_id":74545975,"comment_id":131602214,"body_markdown":"@DmytroMitin I did it and I&#39;m stuck with this message: &quot;getting org.scala-sbt sbt 1.8.0  (this may take some time)...&quot;. I waited for 30 minutes approx","body":"@DmytroMitin I did it and I&#39;m stuck with this message: &quot;getting org.scala-sbt sbt 1.8.0  (this may take some time)...&quot;. I waited for 30 minutes approx"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1669255245,"post_id":74545975,"comment_id":131605109,"body_markdown":"There was a problem with IntelliJ that two different IntelliJ sbt processes or one outside Intellij and one inside can hang https://youtrack.jetbrains.com/issue/SCL-18626/SBT-locks-forever-waiting-for-.sbt-idea-lock@for  https://youtrack.jetbrains.com/issue/SCL-7355 But if you experience difficulties without IntelliJ (and restarting/killing the process doesn&#39;t help) this can be also some connectivity issue. Are you behind proxy?","body":"There was a problem with IntelliJ that two different IntelliJ sbt processes or one outside Intellij and one inside can hang <a href=\"https://youtrack.jetbrains.com/issue/SCL-18626/SBT-locks-forever-waiting-for-.sbt-idea-lock@for\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/SCL-18626/&hellip;</a>  <a href=\"https://youtrack.jetbrains.com/issue/SCL-7355\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/SCL-7355</a> But if you experience difficulties without IntelliJ (and restarting/killing the process doesn&#39;t help) this can be also some connectivity issue. Are you behind proxy?"},{"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"score":0,"creation_date":1669287110,"post_id":74545975,"comment_id":131612694,"body_markdown":"I don&#39;t use proxy at all. I tried to play with different projects at the same time to detect some concurrencies, but nothing works.","body":"I don&#39;t use proxy at all. I tried to play with different projects at the same time to detect some concurrencies, but nothing works."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1670456283,"post_id":74545975,"comment_id":131882898,"body_markdown":"https://github.com/lampepfl/dotty/discussions/14979","body":"<a href=\"https://github.com/lampepfl/dotty/discussions/14979\" rel=\"nofollow noreferrer\">github.com/lampepfl/dotty/discussions/14979</a>"}],"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":339,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669208794,"creation_date":1669202484,"question_id":74545975,"body_markdown":"I have a problem with my scala project. \r\nI try to create a new project with SBT builder but once I create it I am stuck with this message:\r\n**sbt: extracting project structure from sbt**\r\n\r\nI use:\r\nsbt 1.8.0,\r\nscala 2.13.10,\r\nIntellij 2022.2.3,\r\nSDT 1.8/11/17/19\r\n\r\nI will be really grateful if someone has any idea how can I solve it.\r\n\r\n\r\n![communicate](https://i.stack.imgur.com/TtjXY.png)\r\n\r\n![SBT shell](https://i.stack.imgur.com/vAMvH.png)\r\n\r\nI tired to use different version of SBT, scala, JDK, installing/uninstalling ItelliJ, removing sbt.boot.lock or importing external sources of sbt and scala. Nothing works.","title":"endless import: &quot;sbt: extracting project structure from sbt&quot; - SCALA project","body":"<p>I have a problem with my scala project.\nI try to create a new project with SBT builder but once I create it I am stuck with this message:\n<strong>sbt: extracting project structure from sbt</strong></p>\n<p>I use:\nsbt 1.8.0,\nscala 2.13.10,\nIntellij 2022.2.3,\nSDT 1.8/11/17/19</p>\n<p>I will be really grateful if someone has any idea how can I solve it.</p>\n<p><img src=\"https://i.stack.imgur.com/TtjXY.png\" alt=\"communicate\" /></p>\n<p><img src=\"https://i.stack.imgur.com/vAMvH.png\" alt=\"SBT shell\" /></p>\n<p>I tired to use different version of SBT, scala, JDK, installing/uninstalling ItelliJ, removing sbt.boot.lock or importing external sources of sbt and scala. Nothing works.</p>\n"},{"tags":["java","spring","spring-cloud-contract"],"answers":[{"tags":[],"owner":{"account_id":14325595,"reputation":91,"user_id":10347787,"display_name":"mackesmilian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669208327,"creation_date":1669208327,"answer_id":74547195,"question_id":74546996,"body_markdown":"Found the issue, was a careless oversight. My base class is located in at.* and i set it as com.*","title":"Spring Cloud Contract and Gradle Setup Question","body":"<p>Found the issue, was a careless oversight. My base class is located in at.* and i set it as com.*</p>\n"}],"owner":{"account_id":14325595,"reputation":91,"user_id":10347787,"display_name":"mackesmilian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669208327,"creation_date":1669207426,"question_id":74546996,"body_markdown":"I&#39;m trying out Spring Cloud Contract but cannot get it to run properly. \r\nI have followed a couple of tutorials and looked into the spring-provided repository. The outcome is always the same:\r\n\r\n```\r\nerror: cannot find symbol\r\nimport com.wolf.dependencies.BaseTest;\r\n                            ^\r\n  symbol:   class BaseTest\r\n  location: package com.wolf.dependencies\r\n```\r\n\r\nThis is how my build.gradle looks:\r\n\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.7.5&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.0.15.RELEASE&#39;\r\n\tid &quot;org.springframework.cloud.contract&quot; version &quot;3.1.5&quot;\r\n}\r\n\r\ngroup = &#39;at.wolf&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\next {\r\n\tset(&#39;springCloudContractVersion&#39;, &quot;3.1.5&quot;)\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\truntimeOnly &#39;com.h2database:h2&#39;\r\n    testImplementation &#39;junit:junit:4.13.1&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.cloud:spring-cloud-starter-contract-verifier&#39;\r\n}\r\n\r\ndependencyManagement {\r\n\timports {\r\n\t\tmavenBom &quot;org.springframework.cloud:spring-cloud-contract-dependencies:${springCloudContractVersion}&quot;\r\n\t}\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n\r\ncontracts {\r\n\tbaseClassForTests = &#39;com.wolf.dependencies.BaseTest&#39;\r\n}\r\n```\r\nAnd the BaseTest class:\r\n\r\n```\r\npackage at.wolf.dependencies;\r\n\r\nimport at.wolf.dependencies.controller.CustomerController;\r\nimport io.restassured.module.mockmvc.RestAssuredMockMvc;\r\nimport org.junit.Before;\r\nimport org.junit.runner.RunWith;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.cloud.contract.verifier.messaging.boot.AutoConfigureMessageVerifier;\r\nimport org.springframework.test.annotation.DirtiesContext;\r\nimport org.springframework.test.context.junit4.SpringRunner;\r\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\r\nimport org.springframework.test.web.servlet.setup.StandaloneMockMvcBuilder;\r\n\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\r\n@DirtiesContext\r\n@AutoConfigureMessageVerifier\r\nclass BaseTest {\r\n\r\n\t@Autowired\r\n\tprivate CustomerController customerController;\r\n\r\n\t@Before\r\n\tpublic void setup() {\r\n\t\tStandaloneMockMvcBuilder standaloneMockMvcBuilder\r\n\t\t\t\t= MockMvcBuilders.standaloneSetup(customerController);\r\n\t\tRestAssuredMockMvc.standaloneSetup(standaloneMockMvcBuilder);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI suspect I have some mistake in my BaseTest class, but I&#39;m not familiar enough with spring boot tests to determine what it is. Any help would be appreciated.","title":"Spring Cloud Contract and Gradle Setup Question","body":"<p>I'm trying out Spring Cloud Contract but cannot get it to run properly.\nI have followed a couple of tutorials and looked into the spring-provided repository. The outcome is always the same:</p>\n<pre><code>error: cannot find symbol\nimport com.wolf.dependencies.BaseTest;\n                            ^\n  symbol:   class BaseTest\n  location: package com.wolf.dependencies\n</code></pre>\n<p>This is how my build.gradle looks:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.5'\n    id 'io.spring.dependency-management' version '1.0.15.RELEASE'\n    id &quot;org.springframework.cloud.contract&quot; version &quot;3.1.5&quot;\n}\n\ngroup = 'at.wolf'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    set('springCloudContractVersion', &quot;3.1.5&quot;)\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    runtimeOnly 'com.h2database:h2'\n    testImplementation 'junit:junit:4.13.1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.cloud:spring-cloud-starter-contract-verifier'\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-contract-dependencies:${springCloudContractVersion}&quot;\n    }\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\ncontracts {\n    baseClassForTests = 'com.wolf.dependencies.BaseTest'\n}\n</code></pre>\n<p>And the BaseTest class:</p>\n<pre><code>package at.wolf.dependencies;\n\nimport at.wolf.dependencies.controller.CustomerController;\nimport io.restassured.module.mockmvc.RestAssuredMockMvc;\nimport org.junit.Before;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.cloud.contract.verifier.messaging.boot.AutoConfigureMessageVerifier;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\nimport org.springframework.test.web.servlet.setup.StandaloneMockMvcBuilder;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\n@DirtiesContext\n@AutoConfigureMessageVerifier\nclass BaseTest {\n\n    @Autowired\n    private CustomerController customerController;\n\n    @Before\n    public void setup() {\n        StandaloneMockMvcBuilder standaloneMockMvcBuilder\n                = MockMvcBuilders.standaloneSetup(customerController);\n        RestAssuredMockMvc.standaloneSetup(standaloneMockMvcBuilder);\n    }\n\n}\n</code></pre>\n<p>I suspect I have some mistake in my BaseTest class, but I'm not familiar enough with spring boot tests to determine what it is. Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","friendly-url","prettyfaces"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669208409,"post_id":74547162,"comment_id":131591719,"body_markdown":"Please include code/configuration as code blocks not links to off-site resources. Also read https://stackoverflow.com/help/how-to-ask and improve your question.","body":"Please include code/configuration as code blocks not links to off-site resources. Also read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and improve your question."}],"owner":{"account_id":22511489,"reputation":11,"user_id":16768944,"display_name":"bordinhon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669208197,"creation_date":1669208155,"question_id":74547162,"body_markdown":"i have a problem with Pretty Faces... I&#39;m trying mapping the urls in the file &quot;pretty-config.xml&quot; but the file doesn&#39;t read. When i try to access an url the console says that &quot;No mapping for GET &lt;my url&gt;&quot;\r\n\r\n[error in console](https://i.stack.imgur.com/ipNoi.png)\r\n\r\n[pretty-config.xml](https://i.stack.imgur.com/YLIBA.png)\r\n\r\n[my browser](https://i.stack.imgur.com/EBXvn.png)\r\n\r\nI tried add a filter in my SpringBootAplication but without success (error 500)","title":"Pretty faces does not work in spring-boot","body":"<p>i have a problem with Pretty Faces... I'm trying mapping the urls in the file &quot;pretty-config.xml&quot; but the file doesn't read. When i try to access an url the console says that &quot;No mapping for GET &quot;</p>\n<p><a href=\"https://i.stack.imgur.com/ipNoi.png\" rel=\"nofollow noreferrer\">error in console</a></p>\n<p><a href=\"https://i.stack.imgur.com/YLIBA.png\" rel=\"nofollow noreferrer\">pretty-config.xml</a></p>\n<p><a href=\"https://i.stack.imgur.com/EBXvn.png\" rel=\"nofollow noreferrer\">my browser</a></p>\n<p>I tried add a filter in my SpringBootAplication but without success (error 500)</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":2,"creation_date":1519850043,"post_id":49038048,"comment_id":85081299,"body_markdown":"When you say  &quot;unique&quot;, do you  mean it only counts a specific vowel once? Give an example input and output.","body":"When you say  &quot;unique&quot;, do you  mean it only counts a specific vowel once? Give an example input and output."},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":2,"creation_date":1519850097,"post_id":49038048,"comment_id":85081328,"body_markdown":"I sometimes give this task on interviews. And **NOT A SINGLE SOUL** ever asked &quot;Vowels in which language?&quot;","body":"I sometimes give this task on interviews. And <b>NOT A SINGLE SOUL</b> ever asked &quot;Vowels in which language?&quot;"},{"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"score":0,"creation_date":1519850131,"post_id":49038048,"comment_id":85081346,"body_markdown":"Yes various occurrences of same vowel shouldn&#39;t count","body":"Yes various occurrences of same vowel shouldn&#39;t count"},{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1519850174,"post_id":49038048,"comment_id":85081367,"body_markdown":"Give an example input and the desired output.","body":"Give an example input and the desired output."},{"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"score":0,"creation_date":1519850232,"post_id":49038048,"comment_id":85081395,"body_markdown":"input&quot;AAAEEEE&quot; output &quot;2&quot;","body":"input&quot;AAAEEEE&quot; output &quot;2&quot;"},{"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"score":0,"creation_date":1519850297,"post_id":49038048,"comment_id":85081429,"body_markdown":"Is this for an assignment?","body":"Is this for an assignment?"},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":0,"creation_date":1519850395,"post_id":49038048,"comment_id":85081479,"body_markdown":"It works absolutely fine for me,  input &quot;AAAEEEE&quot; gives me 7, which I&#39;d expect from the name of the method","body":"It works absolutely fine for me,  input &quot;AAAEEEE&quot; gives me 7, which I&#39;d expect from the name of the method"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1519850428,"post_id":49038048,"comment_id":85081496,"body_markdown":"@Fubar:  If you&#39;re looking for &quot;distinct&quot; vowels, you should get two since only &quot;A&quot; and &quot;E&quot; appear.","body":"@Fubar:  If you&#39;re looking for &quot;distinct&quot; vowels, you should get two since only &quot;A&quot; and &quot;E&quot; appear."},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":0,"creation_date":1519850488,"post_id":49038048,"comment_id":85081527,"body_markdown":"@Makoto absolutely","body":"@Makoto absolutely"}],"answers":[{"tags":[],"owner":{"account_id":2845296,"reputation":130,"user_id":2443879,"display_name":"amalgamat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519850108,"creation_date":1519850108,"answer_id":49038084,"question_id":49038048,"body_markdown":"You could use Set data structure and instead of incrementing the counter just add vowels to the set. At the end you can return just the size of the set.","title":"Print the number of unique vowels in a string, Java","body":"<p>You could use Set data structure and instead of incrementing the counter just add vowels to the set. At the end you can return just the size of the set.</p>\n"},{"tags":[],"owner":{"display_name":"user3335083"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519850222,"creation_date":1519850222,"answer_id":49038112,"question_id":49038048,"body_markdown":"there&#39;s definitely an issue here with this counting. at the very least. you should rethink this:\r\n\r\n    if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n                    || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;)\r\n    \r\n                count++;","title":"Print the number of unique vowels in a string, Java","body":"<p>there's definitely an issue here with this counting. at the very least. you should rethink this:</p>\n\n<pre><code>if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                || str.charAt(i) == 'o' || str.charAt(i) == 'u')\n\n            count++;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13025234,"reputation":321,"user_id":9413440,"display_name":"Moriz Martiner"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1519851573,"creation_date":1519850291,"answer_id":49038132,"question_id":49038048,"body_markdown":"You could use the method `contains`     \r\n\r\n    public static int count_Vowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = 0;\r\n        count += string.contains(&quot;a&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;e&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;i&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;o&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;u&quot;) ? 1 : 0;\r\n        return count;\r\n    }\r\n\r\n","title":"Print the number of unique vowels in a string, Java","body":"<p>You could use the method <code>contains</code>     </p>\n\n<pre><code>public static int count_Vowels(String str) {\n    str = str.toLowerCase();\n    int count = 0;\n    count += string.contains(\"a\") ? 1 : 0;\n    count += string.contains(\"e\") ? 1 : 0;\n    count += string.contains(\"i\") ? 1 : 0;\n    count += string.contains(\"o\") ? 1 : 0;\n    count += string.contains(\"u\") ? 1 : 0;\n    return count;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1519850461,"creation_date":1519850461,"answer_id":49038170,"question_id":49038048,"body_markdown":"I would start with five variables (one for each vowel) set to `0`, iterate the characters in the input and set the corresponding variable to `1` if I find a match, and simply return the accumulated value of said variables. Like,\r\n\r\n\tpublic static int count_Vowels(String str) {\r\n\t\tint a = 0, e = 0, i = 0, o = 0, u = 0;\r\n\t\tfor (char ch : str.toLowerCase().toCharArray()) {\r\n\t\t\tif (ch == &#39;a&#39;) {\r\n\t\t\t\ta = 1;\r\n\t\t\t} else if (ch == &#39;e&#39;) {\r\n\t\t\t\te = 1;\r\n\t\t\t} else if (ch == &#39;i&#39;) {\r\n\t\t\t\ti = 1;\r\n\t\t\t} else if (ch == &#39;o&#39;) {\r\n\t\t\t\to = 1;\r\n\t\t\t} else if (ch == &#39;u&#39;) {\r\n\t\t\t\tu = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a + e + i + o + u;\r\n\t}","title":"Print the number of unique vowels in a string, Java","body":"<p>I would start with five variables (one for each vowel) set to <code>0</code>, iterate the characters in the input and set the corresponding variable to <code>1</code> if I find a match, and simply return the accumulated value of said variables. Like,</p>\n\n<pre><code>public static int count_Vowels(String str) {\n    int a = 0, e = 0, i = 0, o = 0, u = 0;\n    for (char ch : str.toLowerCase().toCharArray()) {\n        if (ch == 'a') {\n            a = 1;\n        } else if (ch == 'e') {\n            e = 1;\n        } else if (ch == 'i') {\n            i = 1;\n        } else if (ch == 'o') {\n            o = 1;\n        } else if (ch == 'u') {\n            u = 1;\n        }\n    }\n    return a + e + i + o + u;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysaw Moskal"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1519851611,"creation_date":1519850495,"answer_id":49038179,"question_id":49038048,"body_markdown":"I made explanations in the comments to the code:\r\n\r\n    public static int count_Vowels(String str) {\r\n    \t    str = str.toLowerCase();\r\n    \t    Set&lt;Character&gt; setOfUsedChars = new HashSet&lt;&gt;(); // Here you store used vowels\r\n    \t    for (int i = 0; i &lt; str.length(); i++) {\r\n    \t        if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n    \t                || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;) { // if currently checked character is vowel...\r\n    \t        \tsetOfUsedChars.add(str.charAt(i)); // add this vowel to setOfUsedChars\r\n    \t        }\r\n    \t    }\r\n    \t    return setOfUsedChars.size(); // size of this sets is a number of vowels present in input String\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<p>I made explanations in the comments to the code:</p>\n\n<pre><code>public static int count_Vowels(String str) {\n        str = str.toLowerCase();\n        Set&lt;Character&gt; setOfUsedChars = new HashSet&lt;&gt;(); // Here you store used vowels\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                    || str.charAt(i) == 'o' || str.charAt(i) == 'u') { // if currently checked character is vowel...\n                setOfUsedChars.add(str.charAt(i)); // add this vowel to setOfUsedChars\n            }\n        }\n        return setOfUsedChars.size(); // size of this sets is a number of vowels present in input String\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10436649,"reputation":5754,"user_id":7694740,"display_name":"Juan Carlos Mendoza"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1519852165,"creation_date":1519850549,"answer_id":49038191,"question_id":49038048,"body_markdown":"The problem in your code is that you are not counting the distinct vowels, but all the vowels in the string. A Java-8 way to this:\r\n\r\n    public static int countDistinctVowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = (int) str.chars()                     // get IntStream of chars\r\n                .mapToObj(c -&gt; (char) c)                  // cast to char\r\n                .filter(c -&gt; &quot;aeiou&quot;.indexOf(c) &gt; -1)     // remove all non-vowels\r\n                .distinct()                               // keep the distinct values\r\n                .count();                                 // count the values\r\n\r\n        return count;\r\n    }\r\n\r\nAlso use proper Java naming conventions: `countDistinctVowels`, no `count_Distinct_Vowels`.","title":"Print the number of unique vowels in a string, Java","body":"<p>The problem in your code is that you are not counting the distinct vowels, but all the vowels in the string. A Java-8 way to this:</p>\n\n<pre><code>public static int countDistinctVowels(String str) {\n    str = str.toLowerCase();\n    int count = (int) str.chars()                     // get IntStream of chars\n            .mapToObj(c -&gt; (char) c)                  // cast to char\n            .filter(c -&gt; \"aeiou\".indexOf(c) &gt; -1)     // remove all non-vowels\n            .distinct()                               // keep the distinct values\n            .count();                                 // count the values\n\n    return count;\n}\n</code></pre>\n\n<p>Also use proper Java naming conventions: <code>countDistinctVowels</code>, no <code>count_Distinct_Vowels</code>.</p>\n"},{"tags":[],"owner":{"account_id":15823939,"reputation":1,"user_id":11417469,"display_name":"Shoeb Shaul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556307031,"creation_date":1556307031,"answer_id":55873887,"question_id":49038048,"body_markdown":"    static void vow(String input){\t\t\t\r\n\t\tString output=input.toLowerCase();\r\n\t\tint flaga=0,flage=0,flagi=0,flago=0,flagu=0;\r\n\t\tfor(int i=0;i&lt;input.length();i++) {\r\n\t\t\tif((output.charAt(i))==&#39;a&#39; &amp;&amp; flaga==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflaga++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;e&#39; &amp;&amp; flage==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflage++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;i&#39; &amp;&amp; flagi==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflagi++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;o&#39; &amp;&amp; flago==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflago++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;u&#39; &amp;&amp; flagu==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflagu++;\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>static void vow(String input){          \n    String output=input.toLowerCase();\n    int flaga=0,flage=0,flagi=0,flago=0,flagu=0;\n    for(int i=0;i&lt;input.length();i++) {\n        if((output.charAt(i))=='a' &amp;&amp; flaga==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flaga++;\n        }\n        if(output.charAt(i)=='e' &amp;&amp; flage==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flage++;\n        }\n        if(output.charAt(i)=='i' &amp;&amp; flagi==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flagi++;\n        }\n        if(output.charAt(i)=='o' &amp;&amp; flago==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flago++;\n        }\n        if(output.charAt(i)=='u' &amp;&amp; flagu==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flagu++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18692559,"reputation":1,"user_id":13626584,"display_name":"anjali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590575726,"creation_date":1590575726,"answer_id":62041071,"question_id":49038048,"body_markdown":"\r\n\tpublic static void main(String args[]) {\r\n\t\tString sentence;\r\n\t\tint v=0,c=0,ws=0;\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\tsentence = sc.nextLine();\r\n\t\tsc.close();\r\n\t\tsentence.toLowerCase();\r\n\t\tString res=&quot;&quot;;\r\n\t\tfor(int i=0;i&lt;sentence.length();i++) {\r\n\t\t\t\r\n\t\t\tif(sentence.charAt(i)==&#39;a&#39;||sentence.charAt(i)==&#39;e&#39;||sentence.charAt(i)==&#39;i&#39;||sentence.charAt(i)==&#39;o&#39;||sentence.charAt(i)==&#39;u&#39;) {\r\n\t\t\tif(res.indexOf(sentence.charAt(i))&lt;0) {\r\n\t\t\t\tres+=sentence.charAt(i);\r\n\t\t\tv++;\r\n\t\t\t}//System.out.println(res.indexOf(sentence.charAt(i)));\r\n\t\t\t\t}\r\n\t\t\telse if(sentence.charAt(i)==&#39; &#39;)\r\n\t\t\t\tws++;\r\n\t\t\telse c++;\r\n\t\t}\r\n\t\tSystem.out.println(res);\r\n\t\tSystem.out.println(&quot;no of vowels: &quot;+v+&quot;\\n&quot;+&quot;no of consonants: &quot;+c+&quot;\\n&quot;+&quot;no of \r\n       white spaces: &quot;+ws);\r\n\t}\r\n","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>public static void main(String args[]) {\n    String sentence;\n    int v=0,c=0,ws=0;\n    Scanner sc= new Scanner(System.in);\n    sentence = sc.nextLine();\n    sc.close();\n    sentence.toLowerCase();\n    String res=\"\";\n    for(int i=0;i&lt;sentence.length();i++) {\n\n        if(sentence.charAt(i)=='a'||sentence.charAt(i)=='e'||sentence.charAt(i)=='i'||sentence.charAt(i)=='o'||sentence.charAt(i)=='u') {\n        if(res.indexOf(sentence.charAt(i))&lt;0) {\n            res+=sentence.charAt(i);\n        v++;\n        }//System.out.println(res.indexOf(sentence.charAt(i)));\n            }\n        else if(sentence.charAt(i)==' ')\n            ws++;\n        else c++;\n    }\n    System.out.println(res);\n    System.out.println(\"no of vowels: \"+v+\"\\n\"+\"no of consonants: \"+c+\"\\n\"+\"no of \n   white spaces: \"+ws);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22985879,"reputation":1,"user_id":17112116,"display_name":"Dhruv Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633762773,"creation_date":1633762773,"answer_id":69504457,"question_id":49038048,"body_markdown":"You can use this Method to Find Count of Distinct vowels.\r\n```\r\npublic static int count_Vowels(String str) {\r\n    char[] c = str.toLowerCase().toCharArray();\r\n    int Counter=0;\r\n     String NewString=&quot;&quot;;\r\n     for(int i=0;i&lt;c.length;i++){\r\n         String tempString=&quot;&quot;;\r\n         tempString+=c[i];\r\n         if(!NewString.contains(tempString) &amp;&amp; (c[i]==&#39;a&#39;||c[i]==&#39;e&#39;||c[i]==&#39;i&#39;||c[i]==&#39;o&#39;||c[i]==&#39;u&#39;)){\r\n             Counter++;\r\n             NewString+=c[i];\r\n         }\r\n     }\r\n    return Counter;\r\n}\r\n```","title":"Print the number of unique vowels in a string, Java","body":"<p>You can use this Method to Find Count of Distinct vowels.</p>\n<pre><code>public static int count_Vowels(String str) {\n    char[] c = str.toLowerCase().toCharArray();\n    int Counter=0;\n     String NewString=&quot;&quot;;\n     for(int i=0;i&lt;c.length;i++){\n         String tempString=&quot;&quot;;\n         tempString+=c[i];\n         if(!NewString.contains(tempString) &amp;&amp; (c[i]=='a'||c[i]=='e'||c[i]=='i'||c[i]=='o'||c[i]=='u')){\n             Counter++;\n             NewString+=c[i];\n         }\n     }\n    return Counter;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26975854,"reputation":1,"user_id":20541108,"display_name":"Benjamin Ross"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668786574,"creation_date":1668786574,"answer_id":74492170,"question_id":49038048,"body_markdown":"Here is a solve for this problem without using objects. It&#39;s a crude but great solve for beginners who encounter this problem with limited js experience.\r\n\r\nHow to count unique vowels is a string;\r\n\r\n    function hasUniqueFourVowels(str){\r\n    let va = 0\r\n    let ve = 0  \r\n    let vi = 0\r\n    let vo = 0\r\n    let vu = 0\r\n    let sum = 0\r\n    for(let i = 0; i &lt; str.length; i++){\r\n     let char = str[i];\r\n       if(char === &quot;i&quot;){\r\n        vi = 1\r\n      }\r\n        if(char === &quot;e&quot;){\r\n        ve = 1\r\n      }\r\n       if(char === &quot;a&quot;){\r\n        va = 1\r\n      }\r\n      if(char === &quot;o&quot;){\r\n       vo = 1\r\n       }\r\n      if(char === &quot;u&quot;){\r\n      vu = 1\r\n      }\r\n      sum = va + vi + vo + ve + vu\r\n      if (sum &gt;= 4){\r\n       return true\r\n       }\r\n     }\r\n       return false\r\n  \r\n     }","title":"Print the number of unique vowels in a string, Java","body":"<p>Here is a solve for this problem without using objects. It's a crude but great solve for beginners who encounter this problem with limited js experience.</p>\n<p>How to count unique vowels is a string;</p>\n<pre><code>function hasUniqueFourVowels(str){\nlet va = 0\nlet ve = 0  \nlet vi = 0\nlet vo = 0\nlet vu = 0\nlet sum = 0\nfor(let i = 0; i &lt; str.length; i++){\n let char = str[i];\n   if(char === &quot;i&quot;){\n    vi = 1\n  }\n    if(char === &quot;e&quot;){\n    ve = 1\n  }\n   if(char === &quot;a&quot;){\n    va = 1\n  }\n  if(char === &quot;o&quot;){\n   vo = 1\n   }\n  if(char === &quot;u&quot;){\n  vu = 1\n  }\n  sum = va + vi + vo + ve + vu\n  if (sum &gt;= 4){\n   return true\n   }\n }\n   return false\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27024594,"reputation":1,"user_id":20582063,"display_name":"ilandirayan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669207668,"creation_date":1669207668,"answer_id":74547047,"question_id":49038048,"body_markdown":"      @Test\r\n    public void numfindVoweles(){\r\n        String s=&quot;aeiouaedtesssiou&quot;;\r\n        char a[]=s.toCharArray();\r\n        HashMap&lt;Character,Integer&gt; hp= new HashMap&lt;Character, Integer&gt;();\r\n        for(char ch:a){\r\n            if(hp.containsKey(ch) &amp;&amp; (ch==&#39;a&#39; || ch==&#39;e&#39; || ch==&#39;i&#39; || ch==&#39;o&#39; || ch==&#39;u&#39;)){\r\n               hp.put(ch,hp.get(ch)+1);\r\n           }\r\n            else if(ch==&#39;a&#39; || ch==&#39;e&#39; || ch==&#39;i&#39; || ch==&#39;o&#39; || ch==&#39;u&#39;){\r\n                hp.put(ch,1);\r\n            }\r\n        }\r\n        System.out.println(hp);\r\n\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>  @Test\npublic void numfindVoweles(){\n    String s=&quot;aeiouaedtesssiou&quot;;\n    char a[]=s.toCharArray();\n    HashMap&lt;Character,Integer&gt; hp= new HashMap&lt;Character, Integer&gt;();\n    for(char ch:a){\n        if(hp.containsKey(ch) &amp;&amp; (ch=='a' || ch=='e' || ch=='i' || ch=='o' || ch=='u')){\n           hp.put(ch,hp.get(ch)+1);\n       }\n        else if(ch=='a' || ch=='e' || ch=='i' || ch=='o' || ch=='u'){\n            hp.put(ch,1);\n        }\n    }\n    System.out.println(hp);\n\n}\n</code></pre>\n"}],"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4820,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"accepted_answer_id":49038170,"answer_count":11,"score":1,"last_activity_date":1669207668,"creation_date":1519849959,"question_id":49038048,"body_markdown":"I need to find the number of distinct vowels. I came up with the code below but it can&#39;t make distinction between same vowels:\r\n\r\n    public static int count_Vowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = 0;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n                    || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<p>I need to find the number of distinct vowels. I came up with the code below but it can't make distinction between same vowels:</p>\n\n<pre><code>public static int count_Vowels(String str) {\n    str = str.toLowerCase();\n    int count = 0;\n    for (int i = 0; i &lt; str.length(); i++) {\n        if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                || str.charAt(i) == 'o' || str.charAt(i) == 'u') {\n            count++;\n        }\n    }\n    return count;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669200335,"post_id":74545494,"comment_id":131588941,"body_markdown":"You could try to change the web driver scope to prototype and use a method in `SingletonUtilsObject` that&#39;s annotated with `@Lookup`.","body":"You could try to change the web driver scope to prototype and use a method in <code>SingletonUtilsObject</code> that&#39;s annotated with <code>@Lookup</code>."}],"answers":[{"tags":[],"owner":{"account_id":9914886,"reputation":126,"user_id":7340161,"display_name":"Sai Srikar Mutya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669207637,"creation_date":1669207637,"answer_id":74547041,"question_id":74545494,"body_markdown":" 1. Prototype scope - if you want to get a new instance every time you call for getInstance.\r\n 2. Request scope if you are using HTTP requests and you need an instance for each request.\r\n\r\nYou can refer to: https://www.baeldung.com/spring-bean-scopes","title":"Spring autowire Bean again on each call","body":"<ol>\n<li>Prototype scope - if you want to get a new instance every time you call for getInstance.</li>\n<li>Request scope if you are using HTTP requests and you need an instance for each request.</li>\n</ol>\n<p>You can refer to: <a href=\"https://www.baeldung.com/spring-bean-scopes\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-bean-scopes</a></p>\n"}],"owner":{"account_id":7482273,"reputation":95,"user_id":5686679,"display_name":"Wojciech Kope"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669207637,"creation_date":1669200065,"question_id":74545494,"body_markdown":"I&#39;m developing framework used for E2E frontend testing using primarily Selenium&#39;s WebDriver and I would like to add Spring framework to it. Got some issues regarding WebDriver object, let me explain:\r\n\r\nWhenever I need current WebDriver instance I use this method:\r\n\r\n     public class DriverManager {\r\n     (...)\r\n    //@Bean //For further explanation\r\n     public WebDriver getWebDriver() {\r\n        return getOrCreateWebDriver();\r\n    }\r\n     (...)\r\n    }\r\n\r\nAs written above, It will create WebDriver object if it is `null` (meaning, was not even once initialized or was disposed (`quit` method called) ) or return existing instance. This method is used **ALL ACROSS** the framework and always retrieve correct WebDriver instance. This method was previously `static` and now, introducing Spring, it is refactored as instance.\r\n\r\nI could `@Autowired` DriverManager instance almost everywhere and just call `getWebDriver` but I&#39;m looking for better solution.\r\n\r\n\r\nIdeally I would like to achieve something like this:\r\n        \r\n        @Scope(&quot;singleton&quot;)\r\n        public class SingletonUtilsObject {\r\n        \r\n        @Autowired\r\n        WebDriver webDriver;\r\n        }\r\n\r\n\r\nBUT WebDriver instance could change and it won&#39;t be picked up by `SingletonUtilsObject` instance after autowiring is resolved and beans initialized.\r\n\r\nWhat I was thinking is to somehow dispose @Autowired WebDriver after call and &#39;force&#39; beanFactory to autowire it again on next call - just as it happens on first Bean call if it&#39;s `@Lazy` \r\n\r\nIs there any way to achieve this?","title":"Spring autowire Bean again on each call","body":"<p>I'm developing framework used for E2E frontend testing using primarily Selenium's WebDriver and I would like to add Spring framework to it. Got some issues regarding WebDriver object, let me explain:</p>\n<p>Whenever I need current WebDriver instance I use this method:</p>\n<pre><code> public class DriverManager {\n (...)\n//@Bean //For further explanation\n public WebDriver getWebDriver() {\n    return getOrCreateWebDriver();\n}\n (...)\n}\n</code></pre>\n<p>As written above, It will create WebDriver object if it is <code>null</code> (meaning, was not even once initialized or was disposed (<code>quit</code> method called) ) or return existing instance. This method is used <strong>ALL ACROSS</strong> the framework and always retrieve correct WebDriver instance. This method was previously <code>static</code> and now, introducing Spring, it is refactored as instance.</p>\n<p>I could <code>@Autowired</code> DriverManager instance almost everywhere and just call <code>getWebDriver</code> but I'm looking for better solution.</p>\n<p>Ideally I would like to achieve something like this:</p>\n<pre><code>    @Scope(&quot;singleton&quot;)\n    public class SingletonUtilsObject {\n    \n    @Autowired\n    WebDriver webDriver;\n    }\n</code></pre>\n<p>BUT WebDriver instance could change and it won't be picked up by <code>SingletonUtilsObject</code> instance after autowiring is resolved and beans initialized.</p>\n<p>What I was thinking is to somehow dispose @Autowired WebDriver after call and 'force' beanFactory to autowire it again on next call - just as it happens on first Bean call if it's <code>@Lazy</code></p>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java","reactive-programming","reactive-streams","mutiny"],"comments":[{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1657033734,"post_id":72849522,"comment_id":128710545,"body_markdown":"Could you elaborate more on your use case? Would you want the upstream `service.getTransactions()` first valid item to be emitted then cancel all the polling altogether (i.e. emit one item and cancel all next ticks)? Do you expect one `transaction` item to be valid (matching your `&quot;test&quot;` predicate)?","body":"Could you elaborate more on your use case? Would you want the upstream <code>service.getTransactions()</code> first valid item to be emitted then cancel all the polling altogether (i.e. emit one item and cancel all next ticks)? Do you expect one <code>transaction</code> item to be valid (matching your <code>&quot;test&quot;</code> predicate)?"},{"owner":{"account_id":2176611,"reputation":556,"user_id":1927161,"accept_rate":70,"display_name":"Panos Karampis"},"score":1,"creation_date":1657043343,"post_id":72849522,"comment_id":128714111,"body_markdown":"My use case is to poll an API for a max amount of time (= while `isOngoing == true`) or until the first transaction that matches the predicate is found. If one of the two happens, cancel the ticking and process further the one emitted transaction. `service.getTransactions()` then is completed, parent is cancelled, i can start another ticking when needed without abusing resources.","body":"My use case is to poll an API for a max amount of time (= while <code>isOngoing == true</code>) or until the first transaction that matches the predicate is found. If one of the two happens, cancel the ticking and process further the one emitted transaction. <code>service.getTransactions()</code> then is completed, parent is cancelled, i can start another ticking when needed without abusing resources."}],"answers":[{"tags":[],"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1657119442,"creation_date":1657119442,"answer_id":72885769,"question_id":72849522,"body_markdown":"You approach is almost correct, though,\r\n* there is no need to create a custom `MultiEmitter` out of an existing `Multi` (or transformed `Uni`) as you can leverage the different `Multi` operators on top of your source `service#getTransaction` result\r\n* you missed the `EmptyMulti` source which will automatically complete downstream subscriber chain and which you can use to signal an absence of valid item (i.e. `Transaction`)\r\n* you need to select the first valid item (being non-null) then transform your `Multi` to `Uni` which will result in the upstream subscription being cancelled automatically once an item is received\r\n\r\nHere down what the stream pipeline would look like:\r\n\r\n    Multi.createFrom()\r\n            .ticks()\r\n            .every(Duration.ofSeconds(5))\r\n            .onItem()\r\n            // flat map the ticks to the `service#getTransactions` result\r\n            .transformToMultiAndMerge(tick -&gt; service.getTransactions()\r\n                    .toMulti()\r\n                    .onItem()\r\n                    // flatten Collection&lt;Transaction&gt; to Multi&lt;Transaction&gt;\r\n                    .transformToIterable(Function.identity())\r\n                    .onItem()\r\n                    .transformToMultiAndMerge(transaction -&gt; {\r\n                        if (!verification.isOngoing()) {\r\n                            return Multi.createFrom().failure(new TransactionVerificationException());\r\n                        } else {\r\n                            boolean transactionFound = transaction.getAmount()\r\n                                    .stream()\r\n                                    .anyMatch(amount -&gt; amount.getQuantity().equals(&quot;test&quot;));\r\n                            if (transactionFound) {\r\n                                return Multi.createFrom().item(transaction);\r\n                            } else {\r\n                                return Multi.createFrom().empty();\r\n                            }\r\n                        }\r\n                    })\r\n            )\r\n            .select()\r\n            .first(Objects::nonNull)\r\n            .toUni()\r\n            .subscribe()\r\n            .with(transaction -&gt; log.info(transaction), x -&gt; x.printStackTrace());\r\n","title":"Mutiny - Propagate completion to parent multi / polling","body":"<p>You approach is almost correct, though,</p>\n<ul>\n<li>there is no need to create a custom <code>MultiEmitter</code> out of an existing <code>Multi</code> (or transformed <code>Uni</code>) as you can leverage the different <code>Multi</code> operators on top of your source <code>service#getTransaction</code> result</li>\n<li>you missed the <code>EmptyMulti</code> source which will automatically complete downstream subscriber chain and which you can use to signal an absence of valid item (i.e. <code>Transaction</code>)</li>\n<li>you need to select the first valid item (being non-null) then transform your <code>Multi</code> to <code>Uni</code> which will result in the upstream subscription being cancelled automatically once an item is received</li>\n</ul>\n<p>Here down what the stream pipeline would look like:</p>\n<pre><code>Multi.createFrom()\n        .ticks()\n        .every(Duration.ofSeconds(5))\n        .onItem()\n        // flat map the ticks to the `service#getTransactions` result\n        .transformToMultiAndMerge(tick -&gt; service.getTransactions()\n                .toMulti()\n                .onItem()\n                // flatten Collection&lt;Transaction&gt; to Multi&lt;Transaction&gt;\n                .transformToIterable(Function.identity())\n                .onItem()\n                .transformToMultiAndMerge(transaction -&gt; {\n                    if (!verification.isOngoing()) {\n                        return Multi.createFrom().failure(new TransactionVerificationException());\n                    } else {\n                        boolean transactionFound = transaction.getAmount()\n                                .stream()\n                                .anyMatch(amount -&gt; amount.getQuantity().equals(&quot;test&quot;));\n                        if (transactionFound) {\n                            return Multi.createFrom().item(transaction);\n                        } else {\n                            return Multi.createFrom().empty();\n                        }\n                    }\n                })\n        )\n        .select()\n        .first(Objects::nonNull)\n        .toUni()\n        .subscribe()\n        .with(transaction -&gt; log.info(transaction), x -&gt; x.printStackTrace());\n</code></pre>\n"}],"owner":{"account_id":2176611,"reputation":556,"user_id":1927161,"accept_rate":70,"display_name":"Panos Karampis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72885769,"answer_count":1,"score":1,"last_activity_date":1669207488,"creation_date":1656878359,"question_id":72849522,"body_markdown":"I am writing a little polling mechanism using Mutiny, part of me learning the library and i am kinda stuck in cancelling the polling when result is found.\r\nI tried using the tick() and what i came up with looks like\r\n\r\n    Multi.createFrom().ticks().every(Duration.ofSeconds(5))\r\n        .onItem().transformToMultiAndMerge(tick -&gt; {\r\n          System.out.println(&quot;Tick:&quot; + tick);\r\n          return Multi.createFrom()\r\n              .&lt;Transaction&gt;emitter(\r\n                  emitter -&gt; {\r\n                    service.getTransactions().toMulti()\r\n                        .onItem().transformToMultiAndMerge(\r\n                            transactions -&gt; Multi.createFrom().iterable(transactions))\r\n                        .subscribe().with(transaction -&gt; {\r\n                          if (!verification.isOngoing()) {\r\n                            emitter.fail(new TransactionVerificationException());\r\n                          } else {\r\n                            boolean transactionFound = transaction.getAmount().stream().anyMatch(\r\n                                amount -&gt; amount.getQuantity()\r\n                                    .equals(&quot;test&quot;));\r\n                            if (transactionFound) {\r\n                              emitter.emit(transaction);\r\n                              emitter.complete();\r\n                            } \r\n                          }\r\n                        });\r\n                  });\r\n        })\r\n        .subscribe()\r\n        .with(transaction -&gt; log.info(transaction),\r\n            x -&gt; x.printStackTrace());\r\n\r\nProblem here is that the Multi from ticks() is running forever and the only way i think of to cancel it would be to propagate somehow that the emitter has completed.\r\nThe case here is that i want to emit, and process only if certain conditions are met.\r\n","title":"Mutiny - Propagate completion to parent multi / polling","body":"<p>I am writing a little polling mechanism using Mutiny, part of me learning the library and i am kinda stuck in cancelling the polling when result is found.\nI tried using the tick() and what i came up with looks like</p>\n<pre><code>Multi.createFrom().ticks().every(Duration.ofSeconds(5))\n    .onItem().transformToMultiAndMerge(tick -&gt; {\n      System.out.println(&quot;Tick:&quot; + tick);\n      return Multi.createFrom()\n          .&lt;Transaction&gt;emitter(\n              emitter -&gt; {\n                service.getTransactions().toMulti()\n                    .onItem().transformToMultiAndMerge(\n                        transactions -&gt; Multi.createFrom().iterable(transactions))\n                    .subscribe().with(transaction -&gt; {\n                      if (!verification.isOngoing()) {\n                        emitter.fail(new TransactionVerificationException());\n                      } else {\n                        boolean transactionFound = transaction.getAmount().stream().anyMatch(\n                            amount -&gt; amount.getQuantity()\n                                .equals(&quot;test&quot;));\n                        if (transactionFound) {\n                          emitter.emit(transaction);\n                          emitter.complete();\n                        } \n                      }\n                    });\n              });\n    })\n    .subscribe()\n    .with(transaction -&gt; log.info(transaction),\n        x -&gt; x.printStackTrace());\n</code></pre>\n<p>Problem here is that the Multi from ticks() is running forever and the only way i think of to cancel it would be to propagate somehow that the emitter has completed.\nThe case here is that i want to emit, and process only if certain conditions are met.</p>\n"},{"tags":["java","list","filtering","distinct-values"],"comments":[{"owner":{"account_id":14617965,"reputation":584,"user_id":10557540,"display_name":"zhrgci"},"score":0,"creation_date":1669041125,"post_id":74520402,"comment_id":131546342,"body_markdown":"I see, okay I&#39;ll start making a version with loops and clarify it with that as example. Also the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was  a property in `fruit` that I didn&#39;t include. @AlexanderIvanchenko","body":"I see, okay I&#39;ll start making a version with loops and clarify it with that as example. Also the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was  a property in <code>fruit</code> that I didn&#39;t include. @AlexanderIvanchenko"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669047450,"creation_date":1669041743,"answer_id":74520653,"question_id":74520402,"body_markdown":"As a possible option you can group `FruitColor` instances by the `name` property of their `fruit`s by storing them into a `Map`. And then dump the values into a list.\r\n\r\nIt can be implemented with Stream API using Collector [`toMap(keyMapper,valueMapper,mergeFunction)`][toMap].\r\n\r\n&gt; the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was a property in fruit\r\n\r\nTo implement the `mergeFunction`, which is meant to resolve values mapped to the same key we can use static method [`BinaryOpearator.maxBy()`][maxBy], which expects a `Comparator`.\r\n\r\nComparator that compares `FruitColor` instances based `rape` property of the `fruit` field might be expressed in the following way:\r\n\r\n```\r\nComparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\r\n```\r\n\r\nor alternatively as:\r\n\r\n```\r\nComparator.comparing(\r\n    FruitColor::getFruit,\r\n    Comparator.comparingInt(Fruit::getRipe)\r\n)\r\n```\r\n\r\nThat&#39;s the overall implementation might look like:\r\n\r\n```\r\nList&lt;FruitColor&gt; fruitColors = // initializing the list\r\n        \r\nList&lt;FruitColor&gt; fruitColorsDistinct = fruitColors.stream()\r\n    .collect(Collectors.toMap(\r\n        fruitColor -&gt; fruitColor.getFruit().getFruitName(), // keyMapper\r\n        Function.identity(),  // valueMapper\r\n        BinaryOperator.maxBy( // mergeFunction - resolving duplicates\r\n            Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\r\n        )\r\n    ))\r\n    .values().stream()\r\n    .toList();\r\n```\r\n\r\n\r\n\r\n   [toMap]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\r\n\r\n   [maxBy]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BinaryOperator.html#maxBy(java.util.Comparator)","title":"Find duplicates in List by 2 level deep property","body":"<p>As a possible option you can group <code>FruitColor</code> instances by the <code>name</code> property of their <code>fruit</code>s by storing them into a <code>Map</code>. And then dump the values into a list.</p>\n<p>It can be implemented with Stream API using Collector <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>toMap(keyMapper,valueMapper,mergeFunction)</code></a>.</p>\n<blockquote>\n<p>the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was a property in fruit</p>\n</blockquote>\n<p>To implement the <code>mergeFunction</code>, which is meant to resolve values mapped to the same key we can use static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BinaryOperator.html#maxBy(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>BinaryOpearator.maxBy()</code></a>, which expects a <code>Comparator</code>.</p>\n<p>Comparator that compares <code>FruitColor</code> instances based <code>rape</code> property of the <code>fruit</code> field might be expressed in the following way:</p>\n<pre><code>Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\n</code></pre>\n<p>or alternatively as:</p>\n<pre><code>Comparator.comparing(\n    FruitColor::getFruit,\n    Comparator.comparingInt(Fruit::getRipe)\n)\n</code></pre>\n<p>That's the overall implementation might look like:</p>\n<pre><code>List&lt;FruitColor&gt; fruitColors = // initializing the list\n        \nList&lt;FruitColor&gt; fruitColorsDistinct = fruitColors.stream()\n    .collect(Collectors.toMap(\n        fruitColor -&gt; fruitColor.getFruit().getFruitName(), // keyMapper\n        Function.identity(),  // valueMapper\n        BinaryOperator.maxBy( // mergeFunction - resolving duplicates\n            Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\n        )\n    ))\n    .values().stream()\n    .toList();\n</code></pre>\n"}],"owner":{"account_id":14617965,"reputation":584,"user_id":10557540,"display_name":"zhrgci"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1669206930,"creation_date":1669040578,"question_id":74520402,"body_markdown":"I&#39;m not sure what to call the property that&#39;s 2 layers deep.\r\n\r\nBut let&#39;s say we have `List&lt;FruitColor&gt;` where `Fruit` and `Color` are 2 entities. (These are all example entities) A `fruit` can have different `color`s, but `color`s can also have different `fruit`s.\r\n\r\n```\r\npublic class FruitColor {\r\n    private String fruitColorId;\r\n    private Fruit fruit;\r\n    private Color color;\r\n    private int ripe; //1 to 3 where 1 unripe 2 normal 3 ripe\r\n\r\n    // more props, getters, etc.\r\n}\r\n\r\npublic class Fruit {\r\n    private String fruitId;\r\n    private String fruitName;\r\n\r\n    // getters, etc.\r\n}\r\n\r\npublic class Color {\r\n    private String colorId;\r\n    private String colorName;\r\n\r\n    // getters, etc.\r\n}\r\n```\r\n\r\nI&#39;m thinking it in the following steps:\r\n\r\n 1. Filter all the duplicates by `fruitName`\r\n 2. Pick one of the two &#39;duplicates&#39;. I say &#39;duplicates&#39; because they only have the same `name`, but not the same `color`. The rule to choose which one to keep is the season/time-transition indicator `systemTransition`, which is described by the `double` property `systemTransition` that ranges from `0` to a `100`.\r\n 3. Remove the other &#39;duplicate&#39;.\r\n 4. If there is a duplicate, makes the fruit less ripe by `0.5`\r\n 5. Set the `factorialRipeness`, which is `ripe * systemTransition`\r\n or `ripe * (100 - systemTransition)` depending on how far we are in the season, halfway is the threshold.\r\n6. Return suggested `FruitColors` with the right `Color`, sorted by `FactorialRipeness`\r\nThe thing is, this is probably do-able with a lot of for loops, but I&#39;m just wondering if there are any ways that are more efficient.\r\n\r\nI did find this source on how to filter by property, but this solution doesn&#39;t let me filter on the property of a property(=`fruitName`).\r\nhttps://stackoverflow.com/questions/23699371/java-8-distinct-by-property \r\n\r\nI&#39;ve made a code example (again different entities) that works. Are there any parts that could be made more efficient? By more efficient I mean, if the code could be shorter and/or faster. I&#39;ll definitely refactor the method into smaller parts later. Sorry for the confusing bits, this problem is really hard to explain without using the exact same entities.\r\n\r\n```\r\n//logic in the method\r\n{\t\r\n\tList&lt;FruitColor&gt; fruitColors = getAllFCs();\r\n\t\r\n\t//Remove if FC is neither colors that were chosen\r\n\tfruitColors.removeIf(fc -&gt; fc.getColor().getColorId() != presentColor.getColor().getColorId()\r\n\t\t\t&amp;&amp; fc.getColor().getColorId() != futureColor.getColor().getColorId());\r\n\tList&lt;FruitColor&gt; suggestedFruits = new ArrayList&lt;&gt;();\r\n\r\n\t//Systemtransition is the season/time from 0 to 100, where 100 the fruit should be completely ripe with the corresponding color.\r\n\t//If the time is less than half, it should pick the present color, which is the less ripe color.\r\n\tboolean getPresentColorFruit = systemTransition &lt; 50;\r\n\r\n\t// ---&gt;This whole for-if-if-else-elseif-if-else part I wanted to make more &quot;efficient&quot; &lt;---\r\n\tfor (FruitColor fruitColor : fruitColors) {\r\n\t\t//First check for duplicate FCs \r\n\t\tList&lt;FruitColor&gt; sameNameFruits = fruitColors.stream()\r\n\t\t\t\t.filter(fc -&gt; fc.getFruit().getName().equals(itemColor.getFruit().getName()))\r\n\t\t\t\t.collect(Collectors.toList());\r\n\t\t\t\t\r\n\t\t//If there is only one of the fruit, check if it&#39;s added already. If not, than add with proper ripeness\r\n\t\t//FactorialRipeness is the &quot;true&quot; ripeness.\r\n\t\tif (sameNameFruits.size() == 1 &amp;&amp; !suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))) {\r\n\t\t\tFruitColor onlyOne = sameNameFruits.get(0);\r\n\t\t\tif (onlyOne.getColor().getColorId() == presentColor.getColor().getColorId()) {\r\n\t\t\t\tonlyOne.setFactorialRipeness(onlyOne.getRipeness() * systemTransition);\r\n\t\t\t} else {\r\n\t\t\t\tonlyOne.setFactorialRipeness(onlyOne.getRipeness() * (100 - systemTransition));\r\n\t\t\t}\r\n\t\t\tsuggestedFruits.add(onlyOne);\r\n\t\t  // If there are multiple FCs, than the ripeness has to go down. Which prioritizes duplicate FCs more. (this part isn&#39;t logical with these entities, sorry)\r\n\t\t} else if(!suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))){\r\n\t\t\tif (getPresentColorFruit) {\r\n\t\t\t\tFruitColor fcWithPresentColor = sameNameFruits.stream()\r\n\t\t\t\t\t\t.filter(fc -&gt; fc.getColor().getColorId() == presentColor.getColor().getColorId()).findFirst()\r\n\t\t\t\t\t\t.get();\r\n\t\t\t\tfcWithPresentColor.setFactorialRipeness((fcWithPresentColor.getRipeness() - 0.5) * systemTransition);\r\n\t\t\t\tsuggestedFruits.add(fcWithPresentColor);\r\n\t\t\t} else {\r\n\t\t\t\tFruitColor fcWithFutureColor = sameNameFruits.stream()\r\n\t\t\t\t\t\t.filter(fc -&gt; fc.getColor().getColorId() == futureColor.getColor().getColorId()).findFirst()\r\n\t\t\t\t\t\t.get();\r\n\t\t\t\t//This part is also not logical, but if the presentColor is not chosen. Than we need to multiply by the opposite amount of the systemTransition\r\n\t\t\t\tfcWithFutureColor.setFactorialRipeness((fcWithFutureColor.getRipeness() - 0.5) * (100 - systemTransition)); \r\n\t\t\t\tsuggestedFruits.add(fcWithFutureColor);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//Sort by &quot;true&quot; ripeness value, from lowest to highest\r\n\tCollections.sort(suggestedFruits, new FruitColorRipenessComparator());\r\n\treturn suggestedFruits;\r\n}\r\n\r\n/**\r\n * @source https://stackoverflow.com/questions/2839137/how-to-use-comparator-in-java-to-sort\r\n */\r\npublic class FruitColorRipenessComparator implements Comparator&lt;FruitColor&gt; {\r\n\t@Override\r\n\tpublic int compare(FruitColor a, FruitColor b){\r\n\t\treturn a.getFactorialRipeness() &lt; b.getFactorialRipeness() ? -1 : a.getFactorialRipeness() == b.getFactorialRipeness() ? 0 : 1;\r\n\t}\r\n}\r\n```\r\n\r\n","title":"Find duplicates in List by 2 level deep property","body":"<p>I'm not sure what to call the property that's 2 layers deep.</p>\n<p>But let's say we have <code>List&lt;FruitColor&gt;</code> where <code>Fruit</code> and <code>Color</code> are 2 entities. (These are all example entities) A <code>fruit</code> can have different <code>color</code>s, but <code>color</code>s can also have different <code>fruit</code>s.</p>\n<pre><code>public class FruitColor {\n    private String fruitColorId;\n    private Fruit fruit;\n    private Color color;\n    private int ripe; //1 to 3 where 1 unripe 2 normal 3 ripe\n\n    // more props, getters, etc.\n}\n\npublic class Fruit {\n    private String fruitId;\n    private String fruitName;\n\n    // getters, etc.\n}\n\npublic class Color {\n    private String colorId;\n    private String colorName;\n\n    // getters, etc.\n}\n</code></pre>\n<p>I'm thinking it in the following steps:</p>\n<ol>\n<li>Filter all the duplicates by <code>fruitName</code></li>\n<li>Pick one of the two 'duplicates'. I say 'duplicates' because they only have the same <code>name</code>, but not the same <code>color</code>. The rule to choose which one to keep is the season/time-transition indicator <code>systemTransition</code>, which is described by the <code>double</code> property <code>systemTransition</code> that ranges from <code>0</code> to a <code>100</code>.</li>\n<li>Remove the other 'duplicate'.</li>\n<li>If there is a duplicate, makes the fruit less ripe by <code>0.5</code></li>\n<li>Set the <code>factorialRipeness</code>, which is <code>ripe * systemTransition</code>\nor <code>ripe * (100 - systemTransition)</code> depending on how far we are in the season, halfway is the threshold.</li>\n<li>Return suggested <code>FruitColors</code> with the right <code>Color</code>, sorted by <code>FactorialRipeness</code>\nThe thing is, this is probably do-able with a lot of for loops, but I'm just wondering if there are any ways that are more efficient.</li>\n</ol>\n<p>I did find this source on how to filter by property, but this solution doesn't let me filter on the property of a property(=<code>fruitName</code>).\n<a href=\"https://stackoverflow.com/questions/23699371/java-8-distinct-by-property\">Java 8 Distinct by property</a></p>\n<p>I've made a code example (again different entities) that works. Are there any parts that could be made more efficient? By more efficient I mean, if the code could be shorter and/or faster. I'll definitely refactor the method into smaller parts later. Sorry for the confusing bits, this problem is really hard to explain without using the exact same entities.</p>\n<pre><code>//logic in the method\n{   \n    List&lt;FruitColor&gt; fruitColors = getAllFCs();\n    \n    //Remove if FC is neither colors that were chosen\n    fruitColors.removeIf(fc -&gt; fc.getColor().getColorId() != presentColor.getColor().getColorId()\n            &amp;&amp; fc.getColor().getColorId() != futureColor.getColor().getColorId());\n    List&lt;FruitColor&gt; suggestedFruits = new ArrayList&lt;&gt;();\n\n    //Systemtransition is the season/time from 0 to 100, where 100 the fruit should be completely ripe with the corresponding color.\n    //If the time is less than half, it should pick the present color, which is the less ripe color.\n    boolean getPresentColorFruit = systemTransition &lt; 50;\n\n    // ---&gt;This whole for-if-if-else-elseif-if-else part I wanted to make more &quot;efficient&quot; &lt;---\n    for (FruitColor fruitColor : fruitColors) {\n        //First check for duplicate FCs \n        List&lt;FruitColor&gt; sameNameFruits = fruitColors.stream()\n                .filter(fc -&gt; fc.getFruit().getName().equals(itemColor.getFruit().getName()))\n                .collect(Collectors.toList());\n                \n        //If there is only one of the fruit, check if it's added already. If not, than add with proper ripeness\n        //FactorialRipeness is the &quot;true&quot; ripeness.\n        if (sameNameFruits.size() == 1 &amp;&amp; !suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))) {\n            FruitColor onlyOne = sameNameFruits.get(0);\n            if (onlyOne.getColor().getColorId() == presentColor.getColor().getColorId()) {\n                onlyOne.setFactorialRipeness(onlyOne.getRipeness() * systemTransition);\n            } else {\n                onlyOne.setFactorialRipeness(onlyOne.getRipeness() * (100 - systemTransition));\n            }\n            suggestedFruits.add(onlyOne);\n          // If there are multiple FCs, than the ripeness has to go down. Which prioritizes duplicate FCs more. (this part isn't logical with these entities, sorry)\n        } else if(!suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))){\n            if (getPresentColorFruit) {\n                FruitColor fcWithPresentColor = sameNameFruits.stream()\n                        .filter(fc -&gt; fc.getColor().getColorId() == presentColor.getColor().getColorId()).findFirst()\n                        .get();\n                fcWithPresentColor.setFactorialRipeness((fcWithPresentColor.getRipeness() - 0.5) * systemTransition);\n                suggestedFruits.add(fcWithPresentColor);\n            } else {\n                FruitColor fcWithFutureColor = sameNameFruits.stream()\n                        .filter(fc -&gt; fc.getColor().getColorId() == futureColor.getColor().getColorId()).findFirst()\n                        .get();\n                //This part is also not logical, but if the presentColor is not chosen. Than we need to multiply by the opposite amount of the systemTransition\n                fcWithFutureColor.setFactorialRipeness((fcWithFutureColor.getRipeness() - 0.5) * (100 - systemTransition)); \n                suggestedFruits.add(fcWithFutureColor);\n            }\n        }\n    }\n    //Sort by &quot;true&quot; ripeness value, from lowest to highest\n    Collections.sort(suggestedFruits, new FruitColorRipenessComparator());\n    return suggestedFruits;\n}\n\n/**\n * @source https://stackoverflow.com/questions/2839137/how-to-use-comparator-in-java-to-sort\n */\npublic class FruitColorRipenessComparator implements Comparator&lt;FruitColor&gt; {\n    @Override\n    public int compare(FruitColor a, FruitColor b){\n        return a.getFactorialRipeness() &lt; b.getFactorialRipeness() ? -1 : a.getFactorialRipeness() == b.getFactorialRipeness() ? 0 : 1;\n    }\n}\n</code></pre>\n"},{"tags":["java","annotation-processing"],"comments":[{"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"score":1,"creation_date":1670113288,"post_id":74546841,"comment_id":131798350,"body_markdown":"The compiler tree api, in the answers you are linking to, requires that the source for the methods in question are presently being compiled, otherwise the AST will not be available. This is probably what you are encountering.","body":"The compiler tree api, in the answers you are linking to, requires that the source for the methods in question are presently being compiled, otherwise the AST will not be available. This is probably what you are encountering."},{"owner":{"account_id":6406447,"reputation":3104,"user_id":4967497,"accept_rate":83,"display_name":"JojOatXGME"},"score":0,"creation_date":1672016849,"post_id":74546841,"comment_id":132208342,"body_markdown":"It might be possible to open the class files of classes which are not currently compiled. You could analyze these class files with ASM instead of using the Compiler Tree API. However, ASM would not work on classes to be compiled, so you would have to maintain two separate branches, one for classes currently compiled, one for classes in other modules.","body":"It might be possible to open the class files of classes which are not currently compiled. You could analyze these class files with ASM instead of using the Compiler Tree API. However, ASM would not work on classes to be compiled, so you would have to maintain two separate branches, one for classes currently compiled, one for classes in other modules."}],"owner":{"account_id":24287116,"reputation":408,"user_id":18232723,"display_name":"kylie.zoltan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669206736,"creation_date":1669206736,"question_id":74546841,"body_markdown":"I have a class that is annotated with my annotation and then I want to get all the class fields and then check if their methods contain a call to a specific service.\r\n\r\nThe issue is that the method body is always null in this case.\r\n\r\nJust a small note the classes of the fields live in another module.\r\n\r\n```\r\npublic boolean process( Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv )\r\n{\r\n    Set&lt;? extends Element&gt; annotatedClasses = getAnnotatedClasses( annotations, roundEnv );\r\n    \r\n    annotatedClasses.forEach(annotatedClass -&gt; {\r\n        List&lt;? extends Element&gt; fields = getFields( annotatedClass );\r\n\r\n        fields.forEach( field -&gt; {\r\n            List&lt;ExecutableElement&gt; methods = getMethods( field );\r\n\r\n            methods.forEach( method -&gt; {\r\n                MethodScanner methodScanner = new MethodScanner();\r\n                MethodTree methodTree = methodScanner.scan( method, this.trees );\r\n                BlockTree body = methodTree.getBody();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `MethodScanner` class comes from here: https://stackoverflow.com/questions/6373145/accessing-source-code-from-java-annotation-processor\r\n\r\nAny way of getting the method source code?\r\n\r\nThanks","title":"Get method source code on annotation processor","body":"<p>I have a class that is annotated with my annotation and then I want to get all the class fields and then check if their methods contain a call to a specific service.</p>\n<p>The issue is that the method body is always null in this case.</p>\n<p>Just a small note the classes of the fields live in another module.</p>\n<pre><code>public boolean process( Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv )\n{\n    Set&lt;? extends Element&gt; annotatedClasses = getAnnotatedClasses( annotations, roundEnv );\n    \n    annotatedClasses.forEach(annotatedClass -&gt; {\n        List&lt;? extends Element&gt; fields = getFields( annotatedClass );\n\n        fields.forEach( field -&gt; {\n            List&lt;ExecutableElement&gt; methods = getMethods( field );\n\n            methods.forEach( method -&gt; {\n                MethodScanner methodScanner = new MethodScanner();\n                MethodTree methodTree = methodScanner.scan( method, this.trees );\n                BlockTree body = methodTree.getBody();\n            }\n        }\n    }\n}\n</code></pre>\n<p>The <code>MethodScanner</code> class comes from here: <a href=\"https://stackoverflow.com/questions/6373145/accessing-source-code-from-java-annotation-processor\">Accessing source code from Java Annotation Processor</a></p>\n<p>Any way of getting the method source code?</p>\n<p>Thanks</p>\n"},{"tags":["java","dictionary","hashmap"],"comments":[{"owner":{"account_id":1816200,"reputation":18958,"user_id":1651233,"accept_rate":67,"display_name":"BobTheBuilder"},"score":0,"creation_date":1362466108,"post_id":15217438,"comment_id":21448948,"body_markdown":"Maybe it just put 2 on every insert? cause you insert 1 in first if and increment in the second if","body":"Maybe it just put 2 on every insert? cause you insert 1 in first if and increment in the second if"},{"owner":{"account_id":2383678,"reputation":1413,"user_id":2085106,"display_name":"Pawe Wyrwiski"},"score":0,"creation_date":1362467124,"post_id":15217438,"comment_id":21449339,"body_markdown":"[http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java](http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java) may be of interest to you.","body":"<a href=\"http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java\">http://stackoverflow.com/questions/81346/most-efficient-way-&zwnj;&#8203;to-increment-a-map-v&zwnj;&#8203;alue-in-java</a> may be of interest to you."},{"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"score":0,"creation_date":1362467226,"post_id":15217438,"comment_id":21449389,"body_markdown":"@PaweWyrwiski, maybe such a micro benchmark analysis is way, *way*, **WAY** too complex for this context. Before making it fast, one needs to make it right.","body":"@PaweWyrwiski, maybe such a micro benchmark analysis is way, <i>way</i>, <b>WAY</b> too complex for this context. Before making it fast, one needs to make it right."}],"answers":[{"tags":[],"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1628147085,"creation_date":1362466188,"answer_id":15217519,"question_id":15217438,"body_markdown":"There&#39;s a much more concise (and easier to reason about) way to achieve what you want:\r\n\r\n    final ConcurrentMap&lt;String, AtomicInteger&gt; map = new ConcurrentHashMap&lt;&gt;();\r\n    final Scanner input = new Scanner(file);\r\n    while (input.hasNext()) {\r\n      final String key = input.next();\r\n      if (key.length() &gt; 0) {\r\n        map.putIfAbsent(key, new AtomicInteger(0));\r\n        map.get(key).incrementAndGet();\r\n      }\r\n    }\r\n\r\nLet&#39;s analyze why does this work.\r\n\r\nWhenever the `Scanner` encounters a keyword, there are 2 possible cases: you either have encountered it before (ie, it is a *known keyword*), or it is an yet *unseen keyword*.\r\n\r\n - If it is an **unseen keyword**: [`putIfAbsent`][1] will put an [`AtomicInteger`][2] with value 0 in the map, and `incrementAndGet()` will set it to 1 right after, and, from now on, it becomes a *known keyword*;\r\n - If it is a **known keyword**: `putIfAbsent` will do nothing, and [`incrementAndGet()`][3] will increment the value that is already present in the map.\r\n\r\nThen, if you want the key set, you do:\r\n\r\n    final Set&lt;String&gt; keys = map.keySet();\r\n\r\nTo print all the values, you could do something like:\r\n\r\n    for (final String k : map.keySet()) {\r\n      System.out.println(k + &quot;: &quot; + map.get(k).get());\r\n    }\r\n\r\nYou are not forced to use the two &quot;different&quot; classes I used above, [`ConcurrentMap`][4] and `AtomicInteger`. It is just easier to use them because they encapsulate much of the logic that you tried to write by yourself (and failed). The logic that they encapsulate is exactly all the other answers describe (ie, test if the value is present, if not set it to 0, then get whatever value is present, increment it and put it back into the map).\r\n\r\nTo maintain the keys of the map (our words being counted) in alphabetical order, use a [`ConcurrentNavigableMap`][5] such as [`ConcurrentSkipListMap `][6]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentNavigableMap.html\r\n  [6]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html","title":"Counting occurrences of a key in a Map in Java","body":"<p>There's a much more concise (and easier to reason about) way to achieve what you want:</p>\n<pre><code>final ConcurrentMap&lt;String, AtomicInteger&gt; map = new ConcurrentHashMap&lt;&gt;();\nfinal Scanner input = new Scanner(file);\nwhile (input.hasNext()) {\n  final String key = input.next();\n  if (key.length() &gt; 0) {\n    map.putIfAbsent(key, new AtomicInteger(0));\n    map.get(key).incrementAndGet();\n  }\n}\n</code></pre>\n<p>Let's analyze why does this work.</p>\n<p>Whenever the <code>Scanner</code> encounters a keyword, there are 2 possible cases: you either have encountered it before (ie, it is a <em>known keyword</em>), or it is an yet <em>unseen keyword</em>.</p>\n<ul>\n<li>If it is an <strong>unseen keyword</strong>: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\" rel=\"nofollow noreferrer\"><code>putIfAbsent</code></a> will put an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\"><code>AtomicInteger</code></a> with value 0 in the map, and <code>incrementAndGet()</code> will set it to 1 right after, and, from now on, it becomes a <em>known keyword</em>;</li>\n<li>If it is a <strong>known keyword</strong>: <code>putIfAbsent</code> will do nothing, and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()\" rel=\"nofollow noreferrer\"><code>incrementAndGet()</code></a> will increment the value that is already present in the map.</li>\n</ul>\n<p>Then, if you want the key set, you do:</p>\n<pre><code>final Set&lt;String&gt; keys = map.keySet();\n</code></pre>\n<p>To print all the values, you could do something like:</p>\n<pre><code>for (final String k : map.keySet()) {\n  System.out.println(k + &quot;: &quot; + map.get(k).get());\n}\n</code></pre>\n<p>You are not forced to use the two &quot;different&quot; classes I used above, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentMap</code></a> and <code>AtomicInteger</code>. It is just easier to use them because they encapsulate much of the logic that you tried to write by yourself (and failed). The logic that they encapsulate is exactly all the other answers describe (ie, test if the value is present, if not set it to 0, then get whatever value is present, increment it and put it back into the map).</p>\n<p>To maintain the keys of the map (our words being counted) in alphabetical order, use a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentNavigableMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentNavigableMap</code></a> such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentSkipListMap </code></a>.</p>\n"},{"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1362466557,"creation_date":1362466237,"answer_id":15217535,"question_id":15217438,"body_markdown":"For every key you scan you create a new entry in the map (overriding the existing one). Then, the next condition holds so you increment the count by 1, reaching the value 2.\r\n\r\nThe inner part should be something like:\r\n\r\n            if (keywordSet.contains(key))\r\n            {\r\n                Integer value = map.get(key);\r\n                if (value == null)\r\n                    value = 0;\r\n                value++;\r\n                map.put(key, value);\r\n            }\r\n\r\nAnyway, consider using some kind of a mutable integer to make this more efficient. You won&#39;t have to override entries in the map, and you won&#39;t be doing too much Integer boxing operations.","title":"Counting occurrences of a key in a Map in Java","body":"<p>For every key you scan you create a new entry in the map (overriding the existing one). Then, the next condition holds so you increment the count by 1, reaching the value 2.</p>\n\n<p>The inner part should be something like:</p>\n\n<pre><code>        if (keywordSet.contains(key))\n        {\n            Integer value = map.get(key);\n            if (value == null)\n                value = 0;\n            value++;\n            map.put(key, value);\n        }\n</code></pre>\n\n<p>Anyway, consider using some kind of a mutable integer to make this more efficient. You won't have to override entries in the map, and you won't be doing too much Integer boxing operations.</p>\n"},{"tags":[],"owner":{"account_id":1816200,"reputation":18958,"user_id":1651233,"accept_rate":67,"display_name":"BobTheBuilder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362466263,"creation_date":1362466263,"answer_id":15217544,"question_id":15217438,"body_markdown":"You always set the value to 1 and then update it by another one. What you need is to update the map value (and not setting it to 1 again).\r\n\r\nInstead of: \r\n\r\n    map.put(key, 1);\r\n\r\nuse:\r\n\r\n    Integer value = map.get(key);\r\n    if (value == null){\r\n        value = 0\r\n    }\r\n    value++;\r\n    map.put(key, value);\r\n\r\nAnd drop the second if.","title":"Counting occurrences of a key in a Map in Java","body":"<p>You always set the value to 1 and then update it by another one. What you need is to update the map value (and not setting it to 1 again).</p>\n\n<p>Instead of: </p>\n\n<pre><code>map.put(key, 1);\n</code></pre>\n\n<p>use:</p>\n\n<pre><code>Integer value = map.get(key);\nif (value == null){\n    value = 0\n}\nvalue++;\nmap.put(key, value);\n</code></pre>\n\n<p>And drop the second if.</p>\n"},{"tags":[],"owner":{"account_id":2118345,"reputation":12755,"user_id":1882149,"display_name":"Achintya Jha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1362467061,"creation_date":1362466597,"answer_id":15217621,"question_id":15217438,"body_markdown":"    Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n    Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\r\n    Scanner input = new Scanner(file);\r\n    \r\n    while (input.hasNext()){\r\n         String key = input.next();\r\n         if (key.length() &gt; 0)\r\n            if (keywordSet.contains(key)){\r\n               Integer counter = map.get(key);\r\n        \r\n               if (counter == null)\r\n                   map.put(key, 1);\r\n               else\r\n                   map.put(key, count + 1);\r\n             }\r\n    }","title":"Counting occurrences of a key in a Map in Java","body":"<pre><code>Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\nSet&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\nScanner input = new Scanner(file);\n\nwhile (input.hasNext()){\n     String key = input.next();\n     if (key.length() &gt; 0)\n        if (keywordSet.contains(key)){\n           Integer counter = map.get(key);\n\n           if (counter == null)\n               map.put(key, 1);\n           else\n               map.put(key, count + 1);\n         }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1634809585,"creation_date":1436261661,"answer_id":31264901,"question_id":15217438,"body_markdown":"Even more concise using [`Map.merge`][1] (since Java 8):\r\n\r\n    if (keywordSet.contains(key)) {\r\n        map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\r\n    }\r\n\r\nHere is a generic implementation of a **counting map** - a map with values representing the count of their keys:\r\n\r\n    public static &lt;K&gt; void count(K key, Map&lt;K, Integer&gt; map) {\r\n        map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n        count(&quot;A&quot;, map);\r\n        count(&quot;B&quot;, map);\r\n        count(&quot;A&quot;, map);\r\n        count(&quot;Z&quot;, map);\r\n        count(&quot;A&quot;, map);\r\n        System.out.println(map); // {A=3, B=1, Z=1}\r\n    }\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-","title":"Counting occurrences of a key in a Map in Java","body":"<p>Even more concise using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\"><code>Map.merge</code></a> (since Java 8):</p>\n<pre><code>if (keywordSet.contains(key)) {\n    map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\n}\n</code></pre>\n<p>Here is a generic implementation of a <strong>counting map</strong> - a map with values representing the count of their keys:</p>\n<pre><code>public static &lt;K&gt; void count(K key, Map&lt;K, Integer&gt; map) {\n    map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\n}\n\npublic static void main(String[] args) {\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    count(&quot;A&quot;, map);\n    count(&quot;B&quot;, map);\n    count(&quot;A&quot;, map);\n    count(&quot;Z&quot;, map);\n    count(&quot;A&quot;, map);\n    System.out.println(map); // {A=3, B=1, Z=1}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2640370,"reputation":2355,"user_id":2284160,"display_name":"Lars"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206728,"creation_date":1669206728,"answer_id":74546837,"question_id":15217438,"body_markdown":"    map.compute(key, (k, value) -&gt; (value == null) ? 1 : (value + 1));","title":"Counting occurrences of a key in a Map in Java","body":"<pre><code>map.compute(key, (k, value) -&gt; (value == null) ? 1 : (value + 1));\n</code></pre>\n"}],"owner":{"account_id":2304476,"reputation":93,"user_id":2024027,"accept_rate":50,"display_name":"Justin Ertley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33914,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":15217535,"answer_count":6,"score":6,"last_activity_date":1669206728,"creation_date":1362465825,"question_id":15217438,"body_markdown":"I&#39;m writing a project that captures Java keywords from a .java file and keeps track of the occurrences with a map. I&#39;ve used a similar method in the past successfully, but I can&#39;t seem to adopt this method for my intended use here.\r\n\r\n        Map&lt;String,Integer&gt; map = new TreeMap&lt;String,Integer&gt;();\r\n        Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\r\n\t\tScanner input = new Scanner(file);\r\n\t\tint counter = 0;\r\n\t\twhile (input.hasNext())\r\n\t\t{\r\n\t\t\tString key = input.next();\r\n\t\t\tif (key.length() &gt; 0)\r\n\t\t\t{\r\n\t\t\t\tif (keywordSet.contains(key))\r\n\t\t\t\t{\r\n\t\t\t\t\tmap.put(key, 1);\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tif(map.containsKey(key)) &lt;--tried inner loop here, failed\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tint value = map.get(key);\r\n\t\t\t\t\t\tvalue++;\r\n\t\t\t\t\t\tmap.put(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\nThis block of code is supposed to add the keyword to the key, and increment the value each time the same key occurs. So far, it adds the keywords, but fails to properly increment the value. here is a sample output:\r\n\r\n    {assert=2, class=2, continue=2, default=2, else=2, ...} \r\nBasically it increments every value in the map instead of the ones it&#39;s supposed to. I&#39;m not sure if I&#39;m over-thinking this or what. I&#39;ve tried an inner loop and it gave me insane results. I really hope I&#39;m just over-thinking this. Any help is greatly appreciated!","title":"Counting occurrences of a key in a Map in Java","body":"<p>I'm writing a project that captures Java keywords from a .java file and keeps track of the occurrences with a map. I've used a similar method in the past successfully, but I can't seem to adopt this method for my intended use here.</p>\n\n<pre><code>    Map&lt;String,Integer&gt; map = new TreeMap&lt;String,Integer&gt;();\n    Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\n    Scanner input = new Scanner(file);\n    int counter = 0;\n    while (input.hasNext())\n    {\n        String key = input.next();\n        if (key.length() &gt; 0)\n        {\n            if (keywordSet.contains(key))\n            {\n                map.put(key, 1);\n                counter++;\n            }\n\n                if(map.containsKey(key)) &lt;--tried inner loop here, failed\n                {\n                    int value = map.get(key);\n                    value++;\n                    map.put(key, value);\n                }\n\n        }\n</code></pre>\n\n<p>This block of code is supposed to add the keyword to the key, and increment the value each time the same key occurs. So far, it adds the keywords, but fails to properly increment the value. here is a sample output:</p>\n\n<pre><code>{assert=2, class=2, continue=2, default=2, else=2, ...} \n</code></pre>\n\n<p>Basically it increments every value in the map instead of the ones it's supposed to. I'm not sure if I'm over-thinking this or what. I've tried an inner loop and it gave me insane results. I really hope I'm just over-thinking this. Any help is greatly appreciated!</p>\n"},{"tags":["java","ubuntu","log4j","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":15529491,"reputation":68,"user_id":11203419,"display_name":"dpoerschke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206669,"creation_date":1669206669,"answer_id":74546822,"question_id":73414457,"body_markdown":"I had the same problem on a 10.0.23 Tomcat. In my case the solution was to use an absolute path instead of an relative one: After changing\r\n\r\n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;../logs/myApp.log&quot;\r\n\r\nto\r\n\r\n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/usr/local/tomcat/apache-tomcat-10/apache-tomcat-10.0.23/logs/myApp.log&quot; \r\n\r\nit worked in my case but it is still not a nice solution because now the value of fileName has to be updated on each machine (depending on tomcat&#39;s path). Currently I can only guess that it might have to do something with the used log4j version..\r\n\r\n","title":"Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs","body":"<p>I had the same problem on a 10.0.23 Tomcat. In my case the solution was to use an absolute path instead of an relative one: After changing</p>\n<pre><code>&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;../logs/myApp.log&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/usr/local/tomcat/apache-tomcat-10/apache-tomcat-10.0.23/logs/myApp.log&quot; \n</code></pre>\n<p>it worked in my case but it is still not a nice solution because now the value of fileName has to be updated on each machine (depending on tomcat's path). Currently I can only guess that it might have to do something with the used log4j version..</p>\n"}],"owner":{"account_id":20794822,"reputation":61,"user_id":15272074,"display_name":"Ravi Teja RVN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2706,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669206669,"creation_date":1660900392,"question_id":73414457,"body_markdown":"I have upgraded my tomcat9 9.0.31 to 9.0.65\r\n\r\nSo, after upgrading I have updated the existing war file. Default tomcat logs like catalina.out , localhost.log , localhost_acess.log are genrating fine.\r\n\r\nWe have configured our service logs of which the war was deployed. Those are not getting generated.\r\n\r\nI have seen the below error in catalina.out log file. What does this mean.\r\n\r\n\r\n    2022-08-19 07:30:10,205 main DEBUG DefaultRolloverStrategy$Builder(max=&quot;10&quot;, min=&quot;null&quot;, fileIndex=&quot;null&quot;, compressionLevel=&quot;null&quot;, ={}, stopCustomActionsOnError=&quot;null&quot;, tempCompressedFilePattern=&quot;null&quot;, Configuration(/opt/tomcat/webapps/server/WEB-INF/classes/log4j2.xml))\r\n    2022-08-19 07:30:10,207 main DEBUG Building Plugin[name=appender, class=org.apache.logging.log4j.core.appender.RollingFileAppender].\r\n    2022-08-19 07:30:10,219 main DEBUG RollingFileAppender$Builder(fileName=&quot;logs/connectivityserver.log&quot;, filePattern=&quot;logs/connectivityserver-%i.log&quot;, append=&quot;null&quot;, locking=&quot;null&quot;, Policies(CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)])), DefaultRolloverStrategy(DefaultRolloverStrategy(min=1, max=10, useMax=true)), advertise=&quot;null&quot;, advertiseUri=&quot;null&quot;, createOnDemand=&quot;null&quot;, filePermissions=&quot;null&quot;, fileOwner=&quot;null&quot;, fileGroup=&quot;null&quot;, bufferedIo=&quot;null&quot;, bufferSize=&quot;null&quot;, immediateFlush=&quot;null&quot;, ignoreExceptions=&quot;null&quot;, PatternLayout(%d{DEFAULT} %-5p [%t] [%logger] - %m%n), name=&quot;RollingFile&quot;, Configuration(/opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml), Filter=null, ={})\r\n    2022-08-19 07:30:10,224 main ERROR Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs\r\n    \tat org.apache.logging.log4j.core.util.FileUtils.mkdir(FileUtils.java:120)\r\n    \tat org.apache.logging.log4j.core.util.FileUtils.makeParentDirs(FileUtils.java:137)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:732)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:716)\r\n    \tat org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:144)\r\n    \tat org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \r\n    2022-08-19 07:30:10,227 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]] java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]]\r\n    \tat org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \r\n    2022-08-19 07:30:10,230 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:238)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\r\n\r\n\r\nAlso, the below is the /opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml file\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;Configuration status=&quot;debug&quot;&gt; \r\n      &lt;Appenders&gt;  \r\n    \t&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/connectivityserver.log&quot; filePattern=&quot;logs/connectivityserver-%i.log&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d{DEFAULT} %-5p [%t] [%logger] - %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n          &lt;Policies&gt;\r\n          \t&lt;SizeBasedTriggeringPolicy size=&quot;10mb&quot;/&gt;\r\n          &lt;/Policies&gt;\r\n          &lt;DefaultRolloverStrategy max=&quot;10&quot; /&gt;\r\n        &lt;/RollingFile&gt;\r\n        \r\n        &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    \t \t&lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;\r\n    \t&lt;/Console&gt;  \r\n      &lt;/Appenders&gt;\r\n    \r\n      &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;UserLogs&quot; level=&quot;trace&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;UserLogs&quot; /&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;debug&quot;&gt;\r\n     \t\t&lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\r\n     \t\t&lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n         &lt;/Root&gt;\t\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n\r\nThanks in advance.","title":"Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs","body":"<p>I have upgraded my tomcat9 9.0.31 to 9.0.65</p>\n<p>So, after upgrading I have updated the existing war file. Default tomcat logs like catalina.out , localhost.log , localhost_acess.log are genrating fine.</p>\n<p>We have configured our service logs of which the war was deployed. Those are not getting generated.</p>\n<p>I have seen the below error in catalina.out log file. What does this mean.</p>\n<pre><code>2022-08-19 07:30:10,205 main DEBUG DefaultRolloverStrategy$Builder(max=&quot;10&quot;, min=&quot;null&quot;, fileIndex=&quot;null&quot;, compressionLevel=&quot;null&quot;, ={}, stopCustomActionsOnError=&quot;null&quot;, tempCompressedFilePattern=&quot;null&quot;, Configuration(/opt/tomcat/webapps/server/WEB-INF/classes/log4j2.xml))\n2022-08-19 07:30:10,207 main DEBUG Building Plugin[name=appender, class=org.apache.logging.log4j.core.appender.RollingFileAppender].\n2022-08-19 07:30:10,219 main DEBUG RollingFileAppender$Builder(fileName=&quot;logs/connectivityserver.log&quot;, filePattern=&quot;logs/connectivityserver-%i.log&quot;, append=&quot;null&quot;, locking=&quot;null&quot;, Policies(CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)])), DefaultRolloverStrategy(DefaultRolloverStrategy(min=1, max=10, useMax=true)), advertise=&quot;null&quot;, advertiseUri=&quot;null&quot;, createOnDemand=&quot;null&quot;, filePermissions=&quot;null&quot;, fileOwner=&quot;null&quot;, fileGroup=&quot;null&quot;, bufferedIo=&quot;null&quot;, bufferSize=&quot;null&quot;, immediateFlush=&quot;null&quot;, ignoreExceptions=&quot;null&quot;, PatternLayout(%d{DEFAULT} %-5p [%t] [%logger] - %m%n), name=&quot;RollingFile&quot;, Configuration(/opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml), Filter=null, ={})\n2022-08-19 07:30:10,224 main ERROR Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs\n    at org.apache.logging.log4j.core.util.FileUtils.mkdir(FileUtils.java:120)\n    at org.apache.logging.log4j.core.util.FileUtils.makeParentDirs(FileUtils.java:137)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:732)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:716)\n    at org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:144)\n    at org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n\n2022-08-19 07:30:10,227 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]] java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]]\n    at org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:146)\n    at org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n\n2022-08-19 07:30:10,230 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:238)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n</code></pre>\n<p>Also, the below is the /opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;Configuration status=&quot;debug&quot;&gt; \n  &lt;Appenders&gt;  \n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/connectivityserver.log&quot; filePattern=&quot;logs/connectivityserver-%i.log&quot;&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d{DEFAULT} %-5p [%t] [%logger] - %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n      &lt;Policies&gt;\n        &lt;SizeBasedTriggeringPolicy size=&quot;10mb&quot;/&gt;\n      &lt;/Policies&gt;\n      &lt;DefaultRolloverStrategy max=&quot;10&quot; /&gt;\n    &lt;/RollingFile&gt;\n    \n    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n        &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;\n    &lt;/Console&gt;  \n  &lt;/Appenders&gt;\n\n  &lt;Loggers&gt;\n    &lt;Logger name=&quot;UserLogs&quot; level=&quot;trace&quot;&gt;\n        &lt;AppenderRef ref=&quot;UserLogs&quot; /&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=&quot;debug&quot;&gt;\n        &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\n        &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n     &lt;/Root&gt;    \n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","jpa","distinct"],"comments":[{"owner":{"account_id":5631811,"reputation":747,"user_id":4458543,"accept_rate":100,"display_name":"Samuel Owino"},"score":0,"creation_date":1578788796,"post_id":1346181,"comment_id":105553771,"body_markdown":"What specific role does @Id  play in the lifecycle of an entity","body":"What specific role does @Id  play in the lifecycle of an entity"}],"answers":[{"tags":[],"owner":{"account_id":23969,"reputation":8008,"user_id":60593,"accept_rate":100,"display_name":"kazanaki"},"down_vote_count":4,"up_vote_count":17,"is_accepted":true,"score":13,"last_activity_date":1475591805,"creation_date":1251474050,"answer_id":1347814,"question_id":1346181,"body_markdown":"**Update: See the top-voted answer please.**\r\n\r\n**My own is currently obsolete. Only kept here for historical reasons.**\r\n\r\n\r\n----------\r\n\r\n\r\nDistinct in HQL is usually needed in Joins and not in simple examples like your own.\r\n\r\nSee also [https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p><strong>Update: See the top-voted answer please.</strong></p>\n\n<p><strong>My own is currently obsolete. Only kept here for historical reasons.</strong></p>\n\n<hr>\n\n<p>Distinct in HQL is usually needed in Joins and not in simple examples like your own.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql\">How do you create a Distinct query in HQL</a></p>\n"},{"tags":[],"owner":{"account_id":6292,"reputation":5329,"user_id":10523,"accept_rate":100,"display_name":"Tomasz"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1346193898,"creation_date":1346193898,"answer_id":12168588,"question_id":1346181,"body_markdown":"    @Entity\r\n    @NamedQuery(name = &quot;Customer.listUniqueNames&quot;, \r\n                query = &quot;SELECT DISTINCT c.name FROM Customer c&quot;)\r\n    public class Customer {\r\n    \t    ...\r\n    \r\n            private String name;\r\n    \r\n            public static List&lt;String&gt; listUniqueNames() {\r\n    \t\t     return = getEntityManager().createNamedQuery(\r\n    \t\t\t\t   &quot;Customer.listUniqueNames&quot;, String.class)\r\n    \t\t\t\t   .getResultList();\r\n    \t    }\r\n    }\r\n\r\n","title":"How does DISTINCT work when using JPA and Hibernate","body":"<pre><code>@Entity\n@NamedQuery(name = \"Customer.listUniqueNames\", \n            query = \"SELECT DISTINCT c.name FROM Customer c\")\npublic class Customer {\n        ...\n\n        private String name;\n\n        public static List&lt;String&gt; listUniqueNames() {\n             return = getEntityManager().createNamedQuery(\n                   \"Customer.listUniqueNames\", String.class)\n                   .getResultList();\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1904786,"reputation":4277,"user_id":1719877,"display_name":"agelbess"},"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1351087090,"creation_date":1351087090,"answer_id":13050816,"question_id":1346181,"body_markdown":"You are close.\r\n\r\n    select DISTINCT(c.name) from Customer c","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>You are close.</p>\n\n<pre><code>select DISTINCT(c.name) from Customer c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2063259,"reputation":12403,"user_id":1839360,"display_name":"Yan Khonski"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1476891914,"creation_date":1476891914,"answer_id":40136090,"question_id":1346181,"body_markdown":"I agree with *kazanaki*&#39;s answer, and it helped me.\r\nI wanted to select the whole entity, so I used\r\n\r\n     select DISTINCT(c) from Customer c\r\n\r\nIn my case I have many-to-many relationship, and I want to load entities with collections in one query.\r\n\r\nI used LEFT JOIN FETCH and at the end I had to make the result distinct.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I agree with <em>kazanaki</em>'s answer, and it helped me.\nI wanted to select the whole entity, so I used</p>\n\n<pre><code> select DISTINCT(c) from Customer c\n</code></pre>\n\n<p>In my case I have many-to-many relationship, and I want to load entities with collections in one query.</p>\n\n<p>I used LEFT JOIN FETCH and at the end I had to make the result distinct.</p>\n"},{"tags":[],"owner":{"account_id":3351358,"reputation":531,"user_id":2815365,"accept_rate":100,"display_name":"finrod"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1498717924,"creation_date":1498717924,"answer_id":44817882,"question_id":1346181,"body_markdown":"I would use JPA&#39;s constructor expression feature. See also following answer:\r\n\r\nhttps://stackoverflow.com/questions/12271305/jpql-constructor-expression-org-hibernate-hql-ast-querysyntaxexceptiontable-i\r\n\r\nFollowing the example in the question, it would be something like this.\r\n\r\n    SELECT DISTINCT new com.mypackage.MyNameType(c.name) from Customer c","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I would use JPA's constructor expression feature. See also following answer:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12271305/jpql-constructor-expression-org-hibernate-hql-ast-querysyntaxexceptiontable-i\">JPQL Constructor Expression - org.hibernate.hql.ast.QuerySyntaxException:Table is not mapped</a></p>\n\n<p>Following the example in the question, it would be something like this.</p>\n\n<pre><code>SELECT DISTINCT new com.mypackage.MyNameType(c.name) from Customer c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1669206648,"creation_date":1542780184,"answer_id":53406102,"question_id":1346181,"body_markdown":"Depending on the underlying JPQL or Criteria API query type, `DISTINCT` has two meanings in JPA.\r\n\r\nScalar queries\r\n--------------\r\n\r\nFor scalar queries, which return a scalar projection, like the following query:\r\n\r\n    List&lt;Integer&gt; publicationYears = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct year(p.createdOn)\r\n        from Post p\r\n        order by year(p.createdOn)\r\n    \t&quot;&quot;&quot;, Integer.class)\r\n    .getResultList();\r\n\r\n    LOGGER.info(&quot;Publication years: {}&quot;, publicationYears);\r\n\r\nThe `DISTINCT` keyword should be passed to the underlying SQL statement because we want the DB engine to filter duplicates prior to returning the result set:\r\n\r\n    SELECT DISTINCT\r\n        extract(YEAR FROM p.created_on) AS col_0_0_\r\n    FROM\r\n        post p\r\n    ORDER BY\r\n        extract(YEAR FROM p.created_on)\r\n\r\n    -- Publication years: [2016, 2018]\r\n\r\nHibernate 6\r\n-----------\r\n\r\nHibernate 6 can deduplicate parent entity references automatically, so you don&#39;t need to use the `DISTINCT` keyword, as it were the case with Hibernate 5.\r\n\r\nTherefore, when running the following query:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n    \r\n    assertEquals(1, posts.size());\r\n    assertEquals(2, posts.get(0).getComments().size());\r\n\r\nWe can see that a single `Post` entity was fetched even if it has two associated `PostComment` child entities.\r\n\r\nHibernate 5 entity queries\r\n--------------------------\r\n\r\nIn JPA, for entity queries, `DISTINCT` has a different meaning.\r\n\r\nWithout using `DISTINCT`, a query like the following one:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n    \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nis going to JOIN the `post` and the `post_comment` tables like this:\r\n\r\n    SELECT p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n\r\n    -- Fetched the following Post entity identifiers: [1, 1]\r\n\r\nBut the parent `post` records are duplicated in the result set for each associated `post_comment` row. For this reason, the `List` of `Post` entities will contain duplicate `Post` entity references. \r\n\r\nTo eliminate the `Post` entity references, we need to use `DISTINCT`:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n     \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nBut then `DISTINCT` is also passed to the SQL query, and that&#39;s not desirable at all:\r\n\r\n    SELECT DISTINCT\r\n           p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n     \r\n    -- Fetched the following Post entity identifiers: [1]\r\n\r\nBy passing `DISTINCT` to the SQL query, the EXECUTION PLAN is going to execute an extra **Sort** phase which adds overhead without bringing any value since the parent-child combinations always return unique records because of the child PK column:\r\n\r\n    Unique  (cost=23.71..23.72 rows=1 width=1068) (actual time=0.131..0.132 rows=2 loops=1)\r\n      -&gt;  Sort  (cost=23.71..23.71 rows=1 width=1068) (actual time=0.131..0.131 rows=2 loops=1)\r\n            Sort Key: p.id, pc.id, p.created_on, pc.post_id, pc.review\r\n            Sort Method: quicksort  Memory: 25kB\r\n            -&gt;  Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.054..0.058 rows=2 loops=1)\r\n                  Hash Cond: (pc.post_id = p.id)\r\n                  -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.010..0.010 rows=2 loops=1)\r\n                  -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.027..0.027 rows=1 loops=1)\r\n                        Buckets: 1024  Batches: 1  Memory Usage: 9kB\r\n                        -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.017..0.018 rows=1 loops=1)\r\n                              Filter: ((title)::text = &#39;High-Performance Java Persistence eBook has been released!&#39;::text)\r\n                              Rows Removed by Filter: 3\r\n    Planning time: 0.227 ms\r\n    Execution time: 0.179 ms\r\n\r\nHibernate 5 entity queries with HINT_PASS_DISTINCT_THROUGH \r\n----------------------------------------------------------\r\n\r\nTo eliminate the Sort phase from the execution plan, we need to use the [`HINT_PASS_DISTINCT_THROUGH`](https://vladmihalcea.com/jpql-distinct-jpa-hibernate/) JPA query hint:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\r\n    .getResultList();\r\n     \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nAnd now, the SQL query will not contain `DISTINCT` but `Post` entity reference duplicates are going to be removed:\r\n\r\n    SELECT\r\n           p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n     \r\n    -- Fetched the following Post entity identifiers: [1]\r\n\r\nAnd the Execution Plan is going to confirm that we no longer have an extra Sort phase this time:\r\n\r\n    Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.066..0.069 rows=2 loops=1)\r\n      Hash Cond: (pc.post_id = p.id)\r\n      -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.011..0.011 rows=2 loops=1)\r\n      -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.041..0.041 rows=1 loops=1)\r\n            Buckets: 1024  Batches: 1  Memory Usage: 9kB\r\n            -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.036..0.037 rows=1 loops=1)\r\n                  Filter: ((title)::text = &#39;High-Performance Java Persistence eBook has been released!&#39;::text)\r\n                  Rows Removed by Filter: 3\r\n    Planning time: 1.184 ms\r\n    Execution time: 0.160 ms\r\n\r\n&gt; If you&#39;re using Hibernate 6, you no longer need the `QueryHints.HINT_PASS_DISTINCT_THROUGH`, and you should remove it as it got removed from the framework.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>Depending on the underlying JPQL or Criteria API query type, <code>DISTINCT</code> has two meanings in JPA.</p>\n<h2>Scalar queries</h2>\n<p>For scalar queries, which return a scalar projection, like the following query:</p>\n<pre><code>List&lt;Integer&gt; publicationYears = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct year(p.createdOn)\n    from Post p\n    order by year(p.createdOn)\n    &quot;&quot;&quot;, Integer.class)\n.getResultList();\n\nLOGGER.info(&quot;Publication years: {}&quot;, publicationYears);\n</code></pre>\n<p>The <code>DISTINCT</code> keyword should be passed to the underlying SQL statement because we want the DB engine to filter duplicates prior to returning the result set:</p>\n<pre><code>SELECT DISTINCT\n    extract(YEAR FROM p.created_on) AS col_0_0_\nFROM\n    post p\nORDER BY\n    extract(YEAR FROM p.created_on)\n\n-- Publication years: [2016, 2018]\n</code></pre>\n<h2>Hibernate 6</h2>\n<p>Hibernate 6 can deduplicate parent entity references automatically, so you don't need to use the <code>DISTINCT</code> keyword, as it were the case with Hibernate 5.</p>\n<p>Therefore, when running the following query:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n\nassertEquals(1, posts.size());\nassertEquals(2, posts.get(0).getComments().size());\n</code></pre>\n<p>We can see that a single <code>Post</code> entity was fetched even if it has two associated <code>PostComment</code> child entities.</p>\n<h2>Hibernate 5 entity queries</h2>\n<p>In JPA, for entity queries, <code>DISTINCT</code> has a different meaning.</p>\n<p>Without using <code>DISTINCT</code>, a query like the following one:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n\nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>is going to JOIN the <code>post</code> and the <code>post_comment</code> tables like this:</p>\n<pre><code>SELECT p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n\n-- Fetched the following Post entity identifiers: [1, 1]\n</code></pre>\n<p>But the parent <code>post</code> records are duplicated in the result set for each associated <code>post_comment</code> row. For this reason, the <code>List</code> of <code>Post</code> entities will contain duplicate <code>Post</code> entity references.</p>\n<p>To eliminate the <code>Post</code> entity references, we need to use <code>DISTINCT</code>:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n \nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>But then <code>DISTINCT</code> is also passed to the SQL query, and that's not desirable at all:</p>\n<pre><code>SELECT DISTINCT\n       p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n \n-- Fetched the following Post entity identifiers: [1]\n</code></pre>\n<p>By passing <code>DISTINCT</code> to the SQL query, the EXECUTION PLAN is going to execute an extra <strong>Sort</strong> phase which adds overhead without bringing any value since the parent-child combinations always return unique records because of the child PK column:</p>\n<pre><code>Unique  (cost=23.71..23.72 rows=1 width=1068) (actual time=0.131..0.132 rows=2 loops=1)\n  -&gt;  Sort  (cost=23.71..23.71 rows=1 width=1068) (actual time=0.131..0.131 rows=2 loops=1)\n        Sort Key: p.id, pc.id, p.created_on, pc.post_id, pc.review\n        Sort Method: quicksort  Memory: 25kB\n        -&gt;  Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.054..0.058 rows=2 loops=1)\n              Hash Cond: (pc.post_id = p.id)\n              -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.010..0.010 rows=2 loops=1)\n              -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.027..0.027 rows=1 loops=1)\n                    Buckets: 1024  Batches: 1  Memory Usage: 9kB\n                    -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.017..0.018 rows=1 loops=1)\n                          Filter: ((title)::text = 'High-Performance Java Persistence eBook has been released!'::text)\n                          Rows Removed by Filter: 3\nPlanning time: 0.227 ms\nExecution time: 0.179 ms\n</code></pre>\n<h2>Hibernate 5 entity queries with HINT_PASS_DISTINCT_THROUGH</h2>\n<p>To eliminate the Sort phase from the execution plan, we need to use the <a href=\"https://vladmihalcea.com/jpql-distinct-jpa-hibernate/\" rel=\"noreferrer\"><code>HINT_PASS_DISTINCT_THROUGH</code></a> JPA query hint:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\n.getResultList();\n \nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>And now, the SQL query will not contain <code>DISTINCT</code> but <code>Post</code> entity reference duplicates are going to be removed:</p>\n<pre><code>SELECT\n       p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n \n-- Fetched the following Post entity identifiers: [1]\n</code></pre>\n<p>And the Execution Plan is going to confirm that we no longer have an extra Sort phase this time:</p>\n<pre><code>Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.066..0.069 rows=2 loops=1)\n  Hash Cond: (pc.post_id = p.id)\n  -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.011..0.011 rows=2 loops=1)\n  -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.041..0.041 rows=1 loops=1)\n        Buckets: 1024  Batches: 1  Memory Usage: 9kB\n        -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.036..0.037 rows=1 loops=1)\n              Filter: ((title)::text = 'High-Performance Java Persistence eBook has been released!'::text)\n              Rows Removed by Filter: 3\nPlanning time: 1.184 ms\nExecution time: 0.160 ms\n</code></pre>\n<blockquote>\n<p>If you're using Hibernate 6, you no longer need the <code>QueryHints.HINT_PASS_DISTINCT_THROUGH</code>, and you should remove it as it got removed from the framework.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16237670,"reputation":1180,"user_id":11724795,"display_name":"ToddEmon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656408235,"creation_date":1656408235,"answer_id":72783873,"question_id":1346181,"body_markdown":"I&#39;m adding an answer who is slightly specific, in case someone encounters the same issue as I did and finds this question. \r\n\r\nI used JPQL with query annotations (no query building). \r\nAnd I needed to get distinct values for an Entity that was *embedded* into another entity, the relationship was asserted via a Many To One annotation. \r\n\r\nI have two database tables : \r\n- **MainEntity**, which I want with distinct values\r\n- **LinkEntity**, which is a relationship table between MainEntity and another table. It has a composite primary key formed with its three columns. \r\n\r\nIn Java Spring code, this leads to three classes implemented : \r\n\r\n**LinkEntity :**\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name=&quot;link_entity&quot;)\r\n    public class LinkEntity implements Entity {\r\n    \r\n        @EmbeddedId\r\n        private LinkEntityPK pk;\r\n\r\n        // ... Getter, setter, toString()\r\n    }\r\n\r\n**LinkEntityPK :**\r\n\r\n    @Embeddable\r\n    public class LinkEntityPK implements Entity, Serializable {\r\n    \r\n        /** The main entity we want to have distinct values of */\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;code_entity&quot;)\r\n        private MainEntity mainEntity;\r\n    \r\n        /** */\r\n        @Column(name = &quot;code_pk2&quot;)\r\n        private String codeOperation;\r\n    \r\n        /** */\r\n        @Column(name = &quot;code_pk3&quot;)\r\n        private String codeFonction;\r\n\r\n**MainEntity :**\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;main_entity&quot;)\r\n    public class MainEntity implements Entity {\r\n    \r\n        /** We use this for LinkEntity*/\r\n        @Id\r\n        @Column(name=&quot;code_entity&quot;)\r\n        private String codeEntity;\r\n    \r\n\r\n        private String name;\r\n        // And other attributes, getters and setters\r\n\r\n\r\nSo the final query to get distinct values for the main entity is : \r\n\r\n    @Repository\r\n    public interface EntityRepository extends JpaRepository&lt;LinkEntity, String&gt; {\r\n    \r\n        @Query(\r\n            &quot;Select &quot; +\r\n                &quot;Distinct linkEntity.pk.intervenant &quot; +\r\n            &quot;From &quot; +\r\n                &quot;LinkEntity as linkEntity &quot; +\r\n                &quot;Join MainEntity as mainEntity On &quot; +\r\n                     &quot;mainEntity = linkEntity.pk.mainEntity &quot;)\r\n        List&lt;MainEntity&gt; getMainEntityList();\r\n    \r\n    }\r\n\r\nHope this can help someone.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I'm adding an answer who is slightly specific, in case someone encounters the same issue as I did and finds this question.</p>\n<p>I used JPQL with query annotations (no query building).\nAnd I needed to get distinct values for an Entity that was <em>embedded</em> into another entity, the relationship was asserted via a Many To One annotation.</p>\n<p>I have two database tables :</p>\n<ul>\n<li><strong>MainEntity</strong>, which I want with distinct values</li>\n<li><strong>LinkEntity</strong>, which is a relationship table between MainEntity and another table. It has a composite primary key formed with its three columns.</li>\n</ul>\n<p>In Java Spring code, this leads to three classes implemented :</p>\n<p><strong>LinkEntity :</strong></p>\n<pre><code>@Entity\n@Immutable\n@Table(name=&quot;link_entity&quot;)\npublic class LinkEntity implements Entity {\n\n    @EmbeddedId\n    private LinkEntityPK pk;\n\n    // ... Getter, setter, toString()\n}\n</code></pre>\n<p><strong>LinkEntityPK :</strong></p>\n<pre><code>@Embeddable\npublic class LinkEntityPK implements Entity, Serializable {\n\n    /** The main entity we want to have distinct values of */\n    @ManyToOne\n    @JoinColumn(name = &quot;code_entity&quot;)\n    private MainEntity mainEntity;\n\n    /** */\n    @Column(name = &quot;code_pk2&quot;)\n    private String codeOperation;\n\n    /** */\n    @Column(name = &quot;code_pk3&quot;)\n    private String codeFonction;\n</code></pre>\n<p><strong>MainEntity :</strong></p>\n<pre><code>@Entity\n@Immutable\n@Table(name = &quot;main_entity&quot;)\npublic class MainEntity implements Entity {\n\n    /** We use this for LinkEntity*/\n    @Id\n    @Column(name=&quot;code_entity&quot;)\n    private String codeEntity;\n\n\n    private String name;\n    // And other attributes, getters and setters\n</code></pre>\n<p>So the final query to get distinct values for the main entity is :</p>\n<pre><code>@Repository\npublic interface EntityRepository extends JpaRepository&lt;LinkEntity, String&gt; {\n\n    @Query(\n        &quot;Select &quot; +\n            &quot;Distinct linkEntity.pk.intervenant &quot; +\n        &quot;From &quot; +\n            &quot;LinkEntity as linkEntity &quot; +\n            &quot;Join MainEntity as mainEntity On &quot; +\n                 &quot;mainEntity = linkEntity.pk.mainEntity &quot;)\n    List&lt;MainEntity&gt; getMainEntityList();\n\n}\n</code></pre>\n<p>Hope this can help someone.</p>\n"}],"owner":{"account_id":24830,"reputation":10800,"user_id":63379,"accept_rate":92,"display_name":"Steve Claridge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235483,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":1347814,"answer_count":7,"score":74,"last_activity_date":1669206648,"creation_date":1251455516,"question_id":1346181,"body_markdown":"What column does DISTINCT work with in JPA and is it possible to change it?\r\n\r\nHere&#39;s an example JPA query using DISTINCT:\r\n\r\n    select DISTINCT c from Customer c\r\n\r\nWhich doesn&#39;t make a lot of sense - what column is the distinct based on? Is it specified on the Entity as an annotation because I couldn&#39;t find one?\r\n\r\nI would like to specify the column to make the distinction on, something like:\r\n\r\n    select DISTINCT(c.name) c from Customer c\r\n\r\nI&#39;m using MySQL and Hibernate.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>What column does DISTINCT work with in JPA and is it possible to change it?</p>\n\n<p>Here's an example JPA query using DISTINCT:</p>\n\n<pre><code>select DISTINCT c from Customer c\n</code></pre>\n\n<p>Which doesn't make a lot of sense - what column is the distinct based on? Is it specified on the Entity as an annotation because I couldn't find one?</p>\n\n<p>I would like to specify the column to make the distinction on, something like:</p>\n\n<pre><code>select DISTINCT(c.name) c from Customer c\n</code></pre>\n\n<p>I'm using MySQL and Hibernate.</p>\n"},{"tags":["java","concurrency","synchronization","locking"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669206674,"post_id":74546762,"comment_id":131591122,"body_markdown":"Can you give the reason why you can&#39;t or won&#39;t use `ReentrantReadWriteLock`?","body":"Can you give the reason why you can&#39;t or won&#39;t use <code>ReentrantReadWriteLock</code>?"},{"owner":{"account_id":20522571,"reputation":21,"user_id":15061821,"display_name":"Maor Cohen"},"score":0,"creation_date":1669207281,"post_id":74546762,"comment_id":131591332,"body_markdown":"It is not allowed in the assignment, so I wrote an alternative solution and now I want to know how good it is.","body":"It is not allowed in the assignment, so I wrote an alternative solution and now I want to know how good it is."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669211353,"post_id":74546762,"comment_id":131592823,"body_markdown":"The busy-waiting (the while loop) definitely needs improvement. If you want to wait for the write lock to be released, why not lock and immediately unlock it?","body":"The busy-waiting (the while loop) definitely needs improvement. If you want to wait for the write lock to be released, why not lock and immediately unlock it?"}],"owner":{"account_id":20522571,"reputation":21,"user_id":15061821,"display_name":"Maor Cohen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669206344,"creation_date":1669206344,"question_id":74546762,"body_markdown":"I&#39;m looking for a way to implement a **multi-read exclusive-write** synchronizer, without using ReentrantReadWriteLock.\r\n\r\nThese are the two methods that I wrote:\r\n\r\n```\r\npublic int getDiff() {\r\n    boolean isCurrentThread = false; // does the current thread hold readLock\r\n    if (!readLock.isLocked()) {\r\n        readLock.lock();\r\n        isCurrentThread = true;\r\n    }\r\n    while (writeLock.isLocked());\r\n    try {\r\n        return Math.abs(x - y);\r\n    } finally {\r\n        if (isCurrentThread)\r\n            readLock.unlock();\r\n    }\r\n}\r\n\r\npublic void update(int dx, int dy) {\r\n    writeLock.lock();\r\n    readLock.lock();\r\n    try {\r\n        x = x + dx;\r\n        y = y + dy;\r\n    } finally {\r\n        writeLock.unlock();\r\n        readLock.unlock();\r\n    }\r\n}\r\n```\r\n`readLock`, `writeLock` are ReentrantLock properties. `x`, `y` are integers.\r\n\r\nThe while loop in `getDiff` doesn&#39;t seem right, but I couldn&#39;t think of any other solution.\r\n\r\nAlso, how can I debug this code?","title":"Implementing ReentrantReadWriteLock using ReentrantLock","body":"<p>I'm looking for a way to implement a <strong>multi-read exclusive-write</strong> synchronizer, without using ReentrantReadWriteLock.</p>\n<p>These are the two methods that I wrote:</p>\n<pre><code>public int getDiff() {\n    boolean isCurrentThread = false; // does the current thread hold readLock\n    if (!readLock.isLocked()) {\n        readLock.lock();\n        isCurrentThread = true;\n    }\n    while (writeLock.isLocked());\n    try {\n        return Math.abs(x - y);\n    } finally {\n        if (isCurrentThread)\n            readLock.unlock();\n    }\n}\n\npublic void update(int dx, int dy) {\n    writeLock.lock();\n    readLock.lock();\n    try {\n        x = x + dx;\n        y = y + dy;\n    } finally {\n        writeLock.unlock();\n        readLock.unlock();\n    }\n}\n</code></pre>\n<p><code>readLock</code>, <code>writeLock</code> are ReentrantLock properties. <code>x</code>, <code>y</code> are integers.</p>\n<p>The while loop in <code>getDiff</code> doesn't seem right, but I couldn't think of any other solution.</p>\n<p>Also, how can I debug this code?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":27014371,"reputation":1,"user_id":20573489,"display_name":"Flower"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206252,"creation_date":1669206252,"answer_id":74546741,"question_id":74534772,"body_markdown":"If your.py file takes a long time to run then you shouldn&#39;t use Process and use ProcessBuilder instead.\r\n```java\r\npublic ArrayList&lt;String&gt; getPasswords(String path) throws IOException {\r\n        String result = &quot;&quot;;\r\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;D:\\\\anaconda\\\\python.exe &quot;, &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\main.py&quot;,path);\r\n  //The path here is me.py needs to be passed in\r\n        processBuilder.redirectErrorStream(true);\r\n        final Process process = processBuilder.start();\r\n        final BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n        String s = null;\r\n        int i = 0;\r\n        while ((s = in.readLine()) != null)//This if is I need to ignore some of the output\r\n        {\r\n            i++;\r\n            if (i &gt;6) {\r\n                result += s + &#39;\\n&#39;;\r\n            }\r\n        }\r\n        if (!result.equals(&quot;&quot;)){\r\n            return new ArrayList&lt;String&gt;(Arrays.asList(result.split(&quot;\\n&quot;)));\r\n        }\r\n        return new ArrayList&lt;String&gt;();\r\n\r\n    }\r\n```\r\nYou may run an error &quot;DLL load failed while importing XXXX&quot;.\r\nPlease update the packages required for python.\r\n\r\n\r\n","title":"I&#39;m writing a method using spring-boot that calls a.py file, and when I request this method, the code for py doesn&#39;t run","body":"<p>If your.py file takes a long time to run then you shouldn't use Process and use ProcessBuilder instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ArrayList&lt;String&gt; getPasswords(String path) throws IOException {\n        String result = &quot;&quot;;\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;D:\\\\anaconda\\\\python.exe &quot;, &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\main.py&quot;,path);\n  //The path here is me.py needs to be passed in\n        processBuilder.redirectErrorStream(true);\n        final Process process = processBuilder.start();\n        final BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        String s = null;\n        int i = 0;\n        while ((s = in.readLine()) != null)//This if is I need to ignore some of the output\n        {\n            i++;\n            if (i &gt;6) {\n                result += s + '\\n';\n            }\n        }\n        if (!result.equals(&quot;&quot;)){\n            return new ArrayList&lt;String&gt;(Arrays.asList(result.split(&quot;\\n&quot;)));\n        }\n        return new ArrayList&lt;String&gt;();\n\n    }\n</code></pre>\n<p>You may run an error &quot;DLL load failed while importing XXXX&quot;.\nPlease update the packages required for python.</p>\n"}],"owner":{"account_id":27014371,"reputation":1,"user_id":20573489,"display_name":"Flower"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669206252,"creation_date":1669129519,"question_id":74534772,"body_markdown":"I call the.py file in a basic java project and it takes about 30 seconds to run.\r\n\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\n\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Process proc;\r\n        String line =&quot;&quot;;\r\n        BufferedReader in;\r\n        try {\r\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\r\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\r\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower1.jpg&quot;);\r\n            proc.waitFor();\r\n            in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n\r\n            while ((line = in.readLine()) != null) {\r\n                System.out.println(line);\r\n            }\r\n            in.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nresult:\r\n[enter image description here](https://i.stack.imgur.com/Sg8wS.jpg)\r\nBut this code is skipped when I use spring-boot.\r\n\r\n```java\r\n@GetMapping(&quot;test&quot;)\r\n    public String test(){\r\n        System.out.println(1);\r\n        Process proc;\r\n        String line = &quot;&quot;;\r\n        String result = &quot;&quot;;\r\n        try {\r\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\r\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\r\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower3.jpg&quot;);// py\r\n            proc.waitFor();\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n\r\n            while ((line = in.readLine()) != null) {\r\n                System.out.println(line);\r\n                result += line;\r\n            }\r\n            in.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        System.out.println(2);\r\n        return result;\r\n    }\r\n```\r\nresult:\r\n[enter image description here](https://i.stack.imgur.com/4PqZ9.jpg)\r\n\r\n\r\n\r\n\r\n\r\nI want to know how to run spring-boot properly.\r\nthanks.","title":"I&#39;m writing a method using spring-boot that calls a.py file, and when I request this method, the code for py doesn&#39;t run","body":"<p>I call the.py file in a basic java project and it takes about 30 seconds to run.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\n\npublic class Main {\n    public static void main(String[] args) {\n        Process proc;\n        String line =&quot;&quot;;\n        BufferedReader in;\n        try {\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower1.jpg&quot;);\n            proc.waitFor();\n            in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n\n            while ((line = in.readLine()) != null) {\n                System.out.println(line);\n            }\n            in.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>result:\n<a href=\"https://i.stack.imgur.com/Sg8wS.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\nBut this code is skipped when I use spring-boot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;test&quot;)\n    public String test(){\n        System.out.println(1);\n        Process proc;\n        String line = &quot;&quot;;\n        String result = &quot;&quot;;\n        try {\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower3.jpg&quot;);// py\n            proc.waitFor();\n            BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n\n            while ((line = in.readLine()) != null) {\n                System.out.println(line);\n                result += line;\n            }\n            in.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(2);\n        return result;\n    }\n</code></pre>\n<p>result:\n<a href=\"https://i.stack.imgur.com/4PqZ9.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I want to know how to run spring-boot properly.\nthanks.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669195371,"post_id":74544252,"comment_id":131587100,"body_markdown":"Is this your properties file name &quot;sample.properties&quot; ?","body":"Is this your properties file name &quot;sample.properties&quot; ?"},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669195439,"post_id":74544252,"comment_id":131587124,"body_markdown":"yes&lt; its my propery filename","body":"yes&lt; its my propery filename"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669195694,"post_id":74544252,"comment_id":131587225,"body_markdown":"You are creating a new instance yourself, rendering all those annotations useless.","body":"You are creating a new instance yourself, rendering all those annotations useless."},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669195821,"post_id":74544252,"comment_id":131587264,"body_markdown":"So we can&#39;t write a main in the same class ?","body":"So we can&#39;t write a main in the same class ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669196491,"post_id":74544252,"comment_id":131587537,"body_markdown":"You need to use spring Boot to detect this class, pull it from the context and use it (or construct a context yourself using this class and retrieve it and use it).","body":"You need to use spring Boot to detect this class, pull it from the context and use it (or construct a context yourself using this class and retrieve it and use it)."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1669196606,"post_id":74544252,"comment_id":131587571,"body_markdown":"When you do `Test t=new Test();`, you are explicitly NOT using Spring, so all those Spring annotations are useless.   Instead, to run a Spring application, use `SpringApplication.run(Test.class, args);`, as shown in https://spring.io/guides/gs/spring-boot/","body":"When you do <code>Test t=new Test();</code>, you are explicitly NOT using Spring, so all those Spring annotations are useless.   Instead, to run a Spring application, use <code>SpringApplication.run(Test.class, args);</code>, as shown in <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/spring-boot</a>"},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669201006,"post_id":74544252,"comment_id":131589151,"body_markdown":"SpringApplication.run(Test.class, args); also giving null, it is not reading from that properties file, is there something i&#39;m missing","body":"SpringApplication.run(Test.class, args); also giving null, it is not reading from that properties file, is there something i&#39;m missing"}],"answers":[{"tags":[],"owner":{"account_id":17611422,"reputation":178,"user_id":12779384,"display_name":"Malav Mevada"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669206173,"creation_date":1669206173,"answer_id":74546727,"question_id":74544252,"body_markdown":"your test class,\r\n\r\n```\r\n\r\n@Configuration\r\npublic class Tester {\r\n    @Value(&quot;${student.name}&quot;)\r\n    private String name;\r\n     \r\n    public String getName(){\r\n       return name;\r\n    }\r\n}\r\n\r\n```\r\n\r\nYou should use application context provided by spring boot like this,\r\n\r\n```\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication application = new SpringApplication(DemoApplication.class);\r\n        ApplicationContext context = application.run(args);\r\n\r\n        // you can get object of any class like this.\r\n        Test testObj = context.getBean(Test.class);  \r\n        System.out.println(&quot;Student Name : &quot;+testObj.getName());\r\n    }\r\n}\r\n```\r\n\r\nHope it helps.","title":"Unable to fetch data from properties file","body":"<p>your test class,</p>\n<pre><code>\n@Configuration\npublic class Tester {\n    @Value(&quot;${student.name}&quot;)\n    private String name;\n     \n    public String getName(){\n       return name;\n    }\n}\n\n</code></pre>\n<p>You should use application context provided by spring boot like this,</p>\n<pre><code>\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication application = new SpringApplication(DemoApplication.class);\n        ApplicationContext context = application.run(args);\n\n        // you can get object of any class like this.\n        Test testObj = context.getBean(Test.class);  \n        System.out.println(&quot;Student Name : &quot;+testObj.getName());\n    }\n}\n</code></pre>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546727,"answer_count":1,"score":0,"last_activity_date":1669206173,"creation_date":1669194723,"question_id":74544252,"body_markdown":"In my current application I am having a properties file which has certain properties of student and I am writing a class with a main function to extract those properties and Iam using below code, but I am getting null values for all properties,I tried using getproperty() and it is working fine but I need to do this using @Value . Any solution?\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:sample.properties&quot;)\r\n    public class Test\r\n    {\r\n      @Value(&quot;${student.name}&quot;)\r\n      private String name;\r\n\r\n     public void test()\r\n     {\r\n      System.out.println(&quot;name &quot;+name);\r\n     }\r\n     public static void main(String args[])\r\n     {\r\n       Test t=new Test();\r\n       t.test();\r\n     }\r\n\r\n\r\nI&#39;m getting\r\n\r\nname = null","title":"Unable to fetch data from properties file","body":"<p>In my current application I am having a properties file which has certain properties of student and I am writing a class with a main function to extract those properties and Iam using below code, but I am getting null values for all properties,I tried using getproperty() and it is working fine but I need to do this using @Value . Any solution?</p>\n<pre><code>@Configuration\n@PropertySource(&quot;classpath:sample.properties&quot;)\npublic class Test\n{\n  @Value(&quot;${student.name}&quot;)\n  private String name;\n\n public void test()\n {\n  System.out.println(&quot;name &quot;+name);\n }\n public static void main(String args[])\n {\n   Test t=new Test();\n   t.test();\n }\n</code></pre>\n<p>I'm getting</p>\n<p>name = null</p>\n"},{"tags":["java","docker","tomcat"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669203676,"post_id":74546190,"comment_id":131590096,"body_markdown":"Your container has mapped the ports `8080:8080`, which means no access to/from port 80, even if the application that runs in the container allows that traffic. Start the container with a different mapping","body":"Your container has mapped the ports <code>8080:8080</code>, which means no access to/from port 80, even if the application that runs in the container allows that traffic. Start the container with a different mapping"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1669203874,"post_id":74546190,"comment_id":131590157,"body_markdown":"Read the [documentation of docker](https://docs.docker.com/config/containers/container-networking/).","body":"Read the <a href=\"https://docs.docker.com/config/containers/container-networking/\" rel=\"nofollow noreferrer\">documentation of docker</a>."},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669203935,"post_id":74546190,"comment_id":131590177,"body_markdown":"please let me know how to give port 80 access to the container","body":"please let me know how to give port 80 access to the container"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669204008,"post_id":74546190,"comment_id":131590201,"body_markdown":"Start the container with the flag `-p 8080:80`, for example","body":"Start the container with the flag <code>-p 8080:80</code>, for example"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669204510,"post_id":74546190,"comment_id":131590399,"body_markdown":"ok How to access the port from the browser","body":"ok How to access the port from the browser"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669204747,"post_id":74546190,"comment_id":131590486,"body_markdown":"I added ports it shows like this 8080/tcp, 0.0.0.0:8091-&gt;80/tcp, :::8091-&gt;80/tcp","body":"I added ports it shows like this 8080/tcp, 0.0.0.0:8091-&gt;80/tcp, :::8091-&gt;80/tcp"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669205214,"post_id":74546190,"comment_id":131590640,"body_markdown":"Well, then try to access the application at port 8091","body":"Well, then try to access the application at port 8091"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669206286,"post_id":74546190,"comment_id":131590995,"body_markdown":"I tried to access it with http://hostip:8091  but it shows This site cant be reached (and redirected to https://hostip). Please let me know how to solve this issue","body":"I tried to access it with <a href=\"http://hostip:8091\" rel=\"nofollow noreferrer\">hostip:8091</a>  but it shows This site cant be reached (and redirected to <a href=\"https://hostip\" rel=\"nofollow noreferrer\">hostip</a>). Please let me know how to solve this issue"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669269476,"post_id":74546190,"comment_id":131607218,"body_markdown":"anyone, Please solve this issue","body":"anyone, Please solve this issue"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669271618,"post_id":74546190,"comment_id":131607662,"body_markdown":"Have you tried to (1) stop your container and (2) start it again with the most obvious mapping: `-p 80:80`? Then (3), the application *should* be available at `http://red-hat-server-ip/` (no port, you can explicitly pass `:80`).","body":"Have you tried to (1) stop your container and (2) start it again with the most obvious mapping: <code>-p 80:80</code>? Then (3), the application <i>should</i> be available at <code>http:&#47;&#47;red-hat-server-ip&#47;</code> (no port, you can explicitly pass <code>:80</code>)."},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669285883,"post_id":74546190,"comment_id":131612265,"body_markdown":"Actually, i created Container with 8091:80, So I want to access it with HTTP://hostip:8091","body":"Actually, i created Container with 8091:80, So I want to access it with <a href=\"HTTP://hostip:8091\" rel=\"nofollow noreferrer\">HTTP://hostip:8091</a>"}],"answers":[{"tags":[],"owner":{"account_id":21987179,"reputation":97,"user_id":16261242,"display_name":"Aissa Laribi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669205510,"creation_date":1669205510,"answer_id":74546602,"question_id":74546190,"body_markdown":"Try to stop the container, and run your container with \r\n\r\n    docker run --name rajesh --publish 8080:8080 &lt;other arguments&gt; centos\r\n\r\n","title":"How to access Docker application from browser?","body":"<p>Try to stop the container, and run your container with</p>\n<pre><code>docker run --name rajesh --publish 8080:8080 &lt;other arguments&gt; centos\n</code></pre>\n"}],"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74546602,"answer_count":1,"score":0,"last_activity_date":1669205510,"creation_date":1669203488,"question_id":74546190,"body_markdown":"I installed docker in RedHat8 and pull the centos8 image and create a container with port 8080 Shown Below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn that container, I  installed java and tomcat, and I deployed my wars in tomcat at webapps location and started tomcat the tomcat ran successfully. I gave 80 port (changed in server.xml)  to tomcat to access the application from the browser. After that, I tried to access my application with Url:\r\n\r\n&gt; https://40.6.254.159:8080/    (IP address was RedHat server IP)\r\n\r\nBut I am not able to access the application. Please let me know how to access web application\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VSfbl.png","title":"How to access Docker application from browser?","body":"<p>I installed docker in RedHat8 and pull the centos8 image and create a container with port 8080 Shown Below.</p>\n<p><a href=\"https://i.stack.imgur.com/VSfbl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VSfbl.png\" alt=\"enter image description here\" /></a></p>\n<p>In that container, I  installed java and tomcat, and I deployed my wars in tomcat at webapps location and started tomcat the tomcat ran successfully. I gave 80 port (changed in server.xml)  to tomcat to access the application from the browser. After that, I tried to access my application with Url:</p>\n<blockquote>\n<p><a href=\"https://40.6.254.159:8080/\" rel=\"nofollow noreferrer\">https://40.6.254.159:8080/</a>    (IP address was RedHat server IP)</p>\n</blockquote>\n<p>But I am not able to access the application. Please let me know how to access web application</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1496517411,"post_id":44347670,"comment_id":75697944,"body_markdown":"Your variable `i` is probably a mistake.  Read the spec: local variables are thread safe.  Making a loop counter global means it&#39;s subject to interference by other threads.  (Instance variables are effectively &quot;global&quot; in a multi-threaded environment.)  Try replacing `i` with just a regular local `int` and test it.","body":"Your variable <code>i</code> is probably a mistake.  Read the spec: local variables are thread safe.  Making a loop counter global means it&#39;s subject to interference by other threads.  (Instance variables are effectively &quot;global&quot; in a multi-threaded environment.)  Try replacing <code>i</code> with just a regular local <code>int</code> and test it."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1496517547,"post_id":44347670,"comment_id":75697984,"body_markdown":"@markspace I&#39;m betting that making `i` global is intentional.  If he makes it a local `int`, then he should expect `value_to_be_incremented_stored` would get up to 400000, not 100000.","body":"@markspace I&#39;m betting that making <code>i</code> global is intentional.  If he makes it a local <code>int</code>, then he should expect <code>value_to_be_incremented_stored</code> would get up to 400000, not 100000."},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496517681,"post_id":44347670,"comment_id":75698021,"body_markdown":"@markspace  I want overall value to be 100000. thanks for your reply.","body":"@markspace  I want overall value to be 100000. thanks for your reply."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1496517692,"post_id":44347670,"comment_id":75698022,"body_markdown":"@ajb But he sets it to 0 at the start of each loop.  That&#39;s got to produce inconsistent results.  *Something* is definitely funky with that loop.","body":"@ajb But he sets it to 0 at the start of each loop.  That&#39;s got to produce inconsistent results.  <i>Something</i> is definitely funky with that loop."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":1,"creation_date":1496517782,"post_id":44347670,"comment_id":75698049,"body_markdown":"@markspace yes, that part looks like a mistake; `i.set(0)` should probably be removed.  In fact, I&#39;m sure that&#39;s the answer to the problem.","body":"@markspace yes, that part looks like a mistake; <code>i.set(0)</code> should probably be removed.  In fact, I&#39;m sure that&#39;s the answer to the problem."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1496517796,"post_id":44347670,"comment_id":75698056,"body_markdown":"Well, each time a new thread calls `run()`, you reset the loop counter.  The total number of times that loop runs is indeterminate.  Try just removing the initialization in the for loop: `for ( ; i.get() &lt; 100000; i.incrementAndGet()) {`","body":"Well, each time a new thread calls <code>run()</code>, you reset the loop counter.  The total number of times that loop runs is indeterminate.  Try just removing the initialization in the for loop: <code>for ( ; i.get() &lt; 100000; i.incrementAndGet()) {</code>"},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496518042,"post_id":44347670,"comment_id":75698110,"body_markdown":"@markspace I removed i.set(0) but still i am getting value more than 100000. I have no clue whats going wrong.","body":"@markspace I removed i.set(0) but still i am getting value more than 100000. I have no clue whats going wrong."},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496518056,"post_id":44347670,"comment_id":75698112,"body_markdown":"@ajb I removed i.set(0) but still i am getting value more than 100000.","body":"@ajb I removed i.set(0) but still i am getting value more than 100000."},{"owner":{"account_id":5502972,"reputation":3853,"user_id":4371758,"display_name":"Bubletan"},"score":0,"creation_date":1496518741,"post_id":44347670,"comment_id":75698263,"body_markdown":"Try `while (i.getAndIncrement() &lt; 100000)`.","body":"Try <code>while (i.getAndIncrement() &lt; 100000)</code>."},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":0,"creation_date":1496518988,"post_id":44347670,"comment_id":75698325,"body_markdown":"Small side note, if I&#39;m not mistaken `value_to_be_incremented_stored` should equal 99,999 once the loop has finished, not 100,000.","body":"Small side note, if I&#39;m not mistaken <code>value_to_be_incremented_stored</code> should equal 99,999 once the loop has finished, not 100,000."}],"answers":[{"tags":[],"owner":{"account_id":429736,"reputation":5878,"user_id":812787,"accept_rate":25,"display_name":"tsolakp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496521056,"creation_date":1496517777,"answer_id":44347752,"question_id":44347670,"body_markdown":"Everytime a new thread enters the run method it will reset your `i` count to zero via the first statement in the for loop by calling `i.set(0)`.\r\n\r\n**Update:** Next step after fixing reset issue, is to step through the code and see how the threads will behave. \r\nLets say three threads get inside the for loop while the fourth thread increments `i`. What will happen is that `value_to_be_incremented_stored` will increment 3 times and `i` only one time.\r\n\r\n","title":"Java Multi-threading : Unexpected result","body":"<p>Everytime a new thread enters the run method it will reset your <code>i</code> count to zero via the first statement in the for loop by calling <code>i.set(0)</code>.</p>\n\n<p><strong>Update:</strong> Next step after fixing reset issue, is to step through the code and see how the threads will behave. \nLets say three threads get inside the for loop while the fourth thread increments <code>i</code>. What will happen is that <code>value_to_be_incremented_stored</code> will increment 3 times and <code>i</code> only one time.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669205480,"creation_date":1496518711,"answer_id":44347884,"question_id":44347670,"body_markdown":"Your &quot;demo program&quot; suffers from two simultaneous defects.\r\n\r\nDefect #1 is the `i.set( 0 )` pointed out by tsolakp.  You say you fixed that but you are still getting a value of more than 100000.  I also tried it and indeed, the final value is still larger than 100000.\r\n\r\nI modified the program to be able to create an arbitrary number of threads, and I tried with 3, 10, and 20 threads.  I got a final number of 100003, 100009, and 100019 respectively. See a pattern? So:\r\n\r\nDefect #2 is that on the last iteration, when the value of `i` is 99999, the expression `i.get() &lt; 100000` is true for all threads, so all threads proceed to execute once more.  The `i.incrementAndGet()` clause is visually sitting right next to `i.get() &lt; 1000000;` but it does not get executed until the end of the loop.  \r\n\r\nSo, all threads get a chance to increment `i` once more after the last iteration.","title":"Java Multi-threading : Unexpected result","body":"<p>Your &quot;demo program&quot; suffers from two simultaneous defects.</p>\n<p>Defect #1 is the <code>i.set( 0 )</code> pointed out by tsolakp.  You say you fixed that but you are still getting a value of more than 100000.  I also tried it and indeed, the final value is still larger than 100000.</p>\n<p>I modified the program to be able to create an arbitrary number of threads, and I tried with 3, 10, and 20 threads.  I got a final number of 100003, 100009, and 100019 respectively. See a pattern? So:</p>\n<p>Defect #2 is that on the last iteration, when the value of <code>i</code> is 99999, the expression <code>i.get() &lt; 100000</code> is true for all threads, so all threads proceed to execute once more.  The <code>i.incrementAndGet()</code> clause is visually sitting right next to <code>i.get() &lt; 1000000;</code> but it does not get executed until the end of the loop.</p>\n<p>So, all threads get a chance to increment <code>i</code> once more after the last iteration.</p>\n"},{"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1496595184,"creation_date":1496519192,"answer_id":44347943,"question_id":44347670,"body_markdown":"I found three defects.  One there is a race condition in the for loop between the point where you compare the loop counter, and where you increment it.  You should do this in one step to get an atomic operation:\r\n\r\n    for ( ; i.incrementAndGet() &lt; 100000;  ) {\r\n\r\nThe other is there is also a race condition between the increment of your counter, and placing it in the map.  Even though you increment these in series, any thread could be have a different value internally (it&#39;s at a different point in the loop) and it could put a previous value in the global map.  You need atomicity here to to make sure the value you increment is the value you place in the loop.\r\n\r\n    synchronized( lock ) { \r\n        value_to_be_incremented_stored.incrementAndGet();\r\n        map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n    }\r\n\r\n\r\n\r\nFinally for some reason the `&lt;` comparison produces a value of 99999 for me.  I had to use `&lt;=` to fix it.\r\n\r\n(And as we discussed in the comments, setting `i.set(0)` at the start of each `for` loop doesn&#39;t work for fairly obvious reasons.  Four defects, I guess.)\r\n\r\n    class ThreadTestX implements Runnable {\r\n    \r\n        static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\r\n        static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\r\n        static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\r\n        static final Object lock = new Object();\r\n    \r\n        @Override\r\n        public void run() {\r\n    \r\n            for ( ; i.incrementAndGet() &lt;= 100000;  ) {\r\n                /*\r\n                    This loop should run 100000 times and when loop terminates according to me value of variable \r\n                    &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \r\n                    100000 times the loop also runs 100000 times. \r\n                */\r\n                synchronized( lock ) {\r\n                    value_to_be_incremented_stored.incrementAndGet();\r\n        //            System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + \r\n        //                 &quot;  &quot; + value_to_be_incremented_stored.get());\r\n                    map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n                }\r\n            }\r\n    \r\n            System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() \r\n                    + &quot;     &quot; + map.toString());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            ThreadTestX t1 = new ThreadTestX();\r\n            Thread thread1 = new Thread(t1);\r\n            thread1.setName(&quot;Thread 1&quot;);\r\n    \r\n            Thread thread2 = new Thread(t1);\r\n            thread2.setName(&quot;Thread 2&quot;);\r\n    \r\n            Thread thread3 = new Thread(t1);\r\n            thread3.setName(&quot;Thread 3&quot;);\r\n    \r\n            Thread thread4 = new Thread(t1);\r\n            thread4.setName(&quot;Thread 4&quot;);\r\n    \r\n            thread1.start();\r\n            thread2.start();\r\n            thread3.start();\r\n            thread4.start();\r\n    \r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    run:\r\n    Output by Thread  Thread[Thread 4,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 3,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 1,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 2,5,main]     {TC=100000}\r\n    BUILD SUCCESSFUL (total time: 0 seconds)\r\n\r\n****\r\n\r\nAfterthoughts:  And in spite of getting marked correct, I&#39;m not sure I was correct.  The problem here is that you are trying to keep three things in sync: the loop counter `i`, the value to be incremented, and the map.  Allowing any of these to be executed outside of a synchronized block may invite them to be in an unexpected state.  I think the following may be safer:\r\n\r\n    @Override\r\n    public void run() {\r\n\r\n        for ( ;;  ) {\r\n            synchronized( lock ) {\r\n                if( i.incrementAndGet() &lt;= 100000 ) {\r\n                    value_to_be_incremented_stored.incrementAndGet();\r\n                    map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n                }\r\n                else\r\n                    break;\r\n            }\r\n        }\r\n        System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() \r\n                + &quot;     &quot; + map.toString());\r\n    }\r\n\r\nThis removes the need for declaring the variables as `AtomicInteger`, but I don&#39;t see how else you ensure that their values don&#39;t change (due to some other thread) as that loop executes.\r\n","title":"Java Multi-threading : Unexpected result","body":"<p>I found three defects.  One there is a race condition in the for loop between the point where you compare the loop counter, and where you increment it.  You should do this in one step to get an atomic operation:</p>\n\n<pre><code>for ( ; i.incrementAndGet() &lt; 100000;  ) {\n</code></pre>\n\n<p>The other is there is also a race condition between the increment of your counter, and placing it in the map.  Even though you increment these in series, any thread could be have a different value internally (it's at a different point in the loop) and it could put a previous value in the global map.  You need atomicity here to to make sure the value you increment is the value you place in the loop.</p>\n\n<pre><code>synchronized( lock ) { \n    value_to_be_incremented_stored.incrementAndGet();\n    map.put(\"TC\", value_to_be_incremented_stored.intValue());\n}\n</code></pre>\n\n<p>Finally for some reason the <code>&lt;</code> comparison produces a value of 99999 for me.  I had to use <code>&lt;=</code> to fix it.</p>\n\n<p>(And as we discussed in the comments, setting <code>i.set(0)</code> at the start of each <code>for</code> loop doesn't work for fairly obvious reasons.  Four defects, I guess.)</p>\n\n<pre><code>class ThreadTestX implements Runnable {\n\n    static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n    static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n    static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n    static final Object lock = new Object();\n\n    @Override\n    public void run() {\n\n        for ( ; i.incrementAndGet() &lt;= 100000;  ) {\n            /*\n                This loop should run 100000 times and when loop terminates according to me value of variable \n                \"value_to_be_incremented_stored\" should be 100000 as its value is incremented \n                100000 times the loop also runs 100000 times. \n            */\n            synchronized( lock ) {\n                value_to_be_incremented_stored.incrementAndGet();\n    //            System.out.println(\"Thread &gt; \" + Thread.currentThread() + \n    //                 \"  \" + value_to_be_incremented_stored.get());\n                map.put(\"TC\", value_to_be_incremented_stored.intValue());\n            }\n        }\n\n        System.out.println(\"Output by Thread  \" + Thread.currentThread() \n                + \"     \" + map.toString());\n    }\n\n    public static void main(String[] args) {\n\n        ThreadTestX t1 = new ThreadTestX();\n        Thread thread1 = new Thread(t1);\n        thread1.setName(\"Thread 1\");\n\n        Thread thread2 = new Thread(t1);\n        thread2.setName(\"Thread 2\");\n\n        Thread thread3 = new Thread(t1);\n        thread3.setName(\"Thread 3\");\n\n        Thread thread4 = new Thread(t1);\n        thread4.setName(\"Thread 4\");\n\n        thread1.start();\n        thread2.start();\n        thread3.start();\n        thread4.start();\n\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>run:\nOutput by Thread  Thread[Thread 4,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 3,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 1,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 2,5,main]     {TC=100000}\nBUILD SUCCESSFUL (total time: 0 seconds)\n</code></pre>\n\n<hr>\n\n<p>Afterthoughts:  And in spite of getting marked correct, I'm not sure I was correct.  The problem here is that you are trying to keep three things in sync: the loop counter <code>i</code>, the value to be incremented, and the map.  Allowing any of these to be executed outside of a synchronized block may invite them to be in an unexpected state.  I think the following may be safer:</p>\n\n<pre><code>@Override\npublic void run() {\n\n    for ( ;;  ) {\n        synchronized( lock ) {\n            if( i.incrementAndGet() &lt;= 100000 ) {\n                value_to_be_incremented_stored.incrementAndGet();\n                map.put(\"TC\", value_to_be_incremented_stored.intValue());\n            }\n            else\n                break;\n        }\n    }\n    System.out.println(\"Output by Thread  \" + Thread.currentThread() \n            + \"     \" + map.toString());\n}\n</code></pre>\n\n<p>This removes the need for declaring the variables as <code>AtomicInteger</code>, but I don't see how else you ensure that their values don't change (due to some other thread) as that loop executes.</p>\n"}],"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":44347943,"answer_count":3,"score":6,"last_activity_date":1669205480,"creation_date":1496517146,"question_id":44347670,"body_markdown":"I am working on a Enterprise application. I am facing some issues while running application in multithreaded environment. I am writing a program in which there is a variable whose value is getting updated(incremented) at very fast rate (for example 10000 updates/persecond). A loop runs for certain iterations and the value of the variable is incremented and stored in HashMap. Once the loop terminates and value the variable in HashMap is printed. I am getting unexpected value of the variable. \n\nHere is demo program (Please read comments for better understanding) :\n\n&lt;!-- language-all: lang-java --&gt;\n\n    class test implements Runnable {\n    \n        static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n        static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n        static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n    \n        @Override\n        public void run() {\n    \n            for (i.set(0); i.get() &lt; 100000; i.incrementAndGet()) {\n                /*\n                    This loop should run 100000 times and when loop terminates according to me value of variable \n                    &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \n                    100000 times the loop also runs 100000 times. \n                */\n                System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + &quot;  &quot; + value_to_be_incremented_stored.incrementAndGet());\n                map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\n            }\n    \n            System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() + &quot;     &quot; + map.toString());\n        }\n    \n        public static void main(String[] args) {\n    \n            test t1 = new test();\n            Thread thread1 = new Thread(t1);\n            thread1.setName(&quot;Thread 1&quot;);\n    \n            Thread thread2 = new Thread(t1);\n            thread2.setName(&quot;Thread 2&quot;);\n    \n            Thread thread3 = new Thread(t1);\n            thread3.setName(&quot;Thread 3&quot;);\n    \n            Thread thread4 = new Thread(t1);\n            thread4.setName(&quot;Thread 4&quot;);\n    \n            thread1.start();\n            thread2.start();\n            thread3.start();\n            thread4.start();\n    \n        }\n    }\n\n\n**Output** (it varies) :\n\n[![My output][1]][1]\n\n**Issue** :\nI am running loop for 100000 times `(i.get() &lt; 100000)` then how come value of variable `value_to_be_incremented_stored` becomes more than 100000.\n\n  [1]: https://i.stack.imgur.com/Ivz6p.png","title":"Java Multi-threading : Unexpected result","body":"<p>I am working on a Enterprise application. I am facing some issues while running application in multithreaded environment. I am writing a program in which there is a variable whose value is getting updated(incremented) at very fast rate (for example 10000 updates/persecond). A loop runs for certain iterations and the value of the variable is incremented and stored in HashMap. Once the loop terminates and value the variable in HashMap is printed. I am getting unexpected value of the variable.</p>\n<p>Here is demo program (Please read comments for better understanding) :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class test implements Runnable {\n\n    static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n    static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n    static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n\n    @Override\n    public void run() {\n\n        for (i.set(0); i.get() &lt; 100000; i.incrementAndGet()) {\n            /*\n                This loop should run 100000 times and when loop terminates according to me value of variable \n                &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \n                100000 times the loop also runs 100000 times. \n            */\n            System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + &quot;  &quot; + value_to_be_incremented_stored.incrementAndGet());\n            map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\n        }\n\n        System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() + &quot;     &quot; + map.toString());\n    }\n\n    public static void main(String[] args) {\n\n        test t1 = new test();\n        Thread thread1 = new Thread(t1);\n        thread1.setName(&quot;Thread 1&quot;);\n\n        Thread thread2 = new Thread(t1);\n        thread2.setName(&quot;Thread 2&quot;);\n\n        Thread thread3 = new Thread(t1);\n        thread3.setName(&quot;Thread 3&quot;);\n\n        Thread thread4 = new Thread(t1);\n        thread4.setName(&quot;Thread 4&quot;);\n\n        thread1.start();\n        thread2.start();\n        thread3.start();\n        thread4.start();\n\n    }\n}\n</code></pre>\n<p><strong>Output</strong> (it varies) :</p>\n<p><a href=\"https://i.stack.imgur.com/Ivz6p.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ivz6p.png\" alt=\"My output\" /></a></p>\n<p><strong>Issue</strong> :\nI am running loop for 100000 times <code>(i.get() &lt; 100000)</code> then how come value of variable <code>value_to_be_incremented_stored</code> becomes more than 100000.</p>\n"},{"tags":["java","amazon-s3","microstream"],"answers":[{"tags":[],"owner":{"account_id":17515210,"reputation":294,"user_id":12702336,"display_name":"MSHG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669204914,"creation_date":1669204914,"answer_id":74546484,"question_id":74526559,"body_markdown":"The simplest solution would be to increase the usable java heap space, please see here for [details][1].\r\n\r\nHere is a short explanation why the memory requirement of your example is unexpected high:\r\n-\tEach persisted java object also requires some additional management data in memory. A HashMap with 1 million entries results in 2M (key and value) + 1 (the map) objects to be persisted. \r\n-\tWhen storing data Microstream internally collects all necessary data before it is written to a storage target, this may require a lot of memory during the store operation if many objects are stored at once. In your example you are always storing the whole hash map and its content. \r\n-\tMicrostream also caches data.\r\n\r\nIf increasing the java heap size is no option you may also have look at the [Lazy-Loading][2] feature of Microstream.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/tools/java.html\r\n  [2]: https://docs.microstream.one/manual/storage/loading-data/index.html","title":"MicroStream + AWS S3 Blob example","body":"<p>The simplest solution would be to increase the usable java heap space, please see here for <a href=\"https://docs.oracle.com/en/java/javase/11/tools/java.html\" rel=\"nofollow noreferrer\">details</a>.</p>\n<p>Here is a short explanation why the memory requirement of your example is unexpected high:</p>\n<ul>\n<li>Each persisted java object also requires some additional management data in memory. A HashMap with 1 million entries results in 2M (key and value) + 1 (the map) objects to be persisted.</li>\n<li>When storing data Microstream internally collects all necessary data before it is written to a storage target, this may require a lot of memory during the store operation if many objects are stored at once. In your example you are always storing the whole hash map and its content.</li>\n<li>Microstream also caches data.</li>\n</ul>\n<p>If increasing the java heap size is no option you may also have look at the <a href=\"https://docs.microstream.one/manual/storage/loading-data/index.html\" rel=\"nofollow noreferrer\">Lazy-Loading</a> feature of Microstream.</p>\n"}],"owner":{"account_id":6961718,"reputation":25,"user_id":5340909,"display_name":"Gonzalo Mendoza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546484,"answer_count":1,"score":0,"last_activity_date":1669204914,"creation_date":1669080546,"question_id":74526559,"body_markdown":"I&#39;m trying to develop a simple application using MicroStream and AWS S3 as a Blob storage\r\nUsing the examples in the official page and others, I can&#39;t store and query some elements\r\n\r\nS3 Connection is working.\r\n\r\nMy Code\r\n\r\n```\r\nS3Client cli = S3Client.builder()\r\n      .region(Region.US_EAST_1)\r\n      .credentialsProvider(StaticCredentialsProvider.create(\r\n\r\n            AwsSessionCredentials.create(accessKey, secret, token)))\r\n      .build()\r\n      ;\r\n\r\nBlobStoreFileSystem fileSystem = BlobStoreFileSystem.New(\r\n      S3Connector.Caching(cli)\r\n);\r\n\r\nfinal EmbeddedStorageManager storageManager =EmbeddedStorage.start(fileSystem.ensureDirectoryPath(&quot;s3-folder&quot;));\r\n\r\nHashMap&lt;Integer, Object&gt; database = new HashMap&lt;&gt;();\r\n\r\nif (storageManager.root() == null) {\r\n   storageManager.setRoot(database);\r\n   storageManager.storeRoot();\r\n} else {\r\n   database = (HashMap&lt;Integer, Object&gt;) storageManager.root();\r\n}\r\n\r\nStorer storage = storageManager.createLazyStorer();\r\n\r\nfor(int i=0; i &lt; 1_000_000; i++) {\r\n   database.put(i, UUID.randomUUID().toString());\r\n\r\n   if (i == 500_000) {\r\n      System.out.println(&quot;Value: &quot; + database.get(500_000));\r\n   }\r\n}\r\n\r\nstorage.storeAll(database);\r\nstorage.commit();\r\n\r\nSystem.out.println(&quot;*************************&quot;);\r\nSystem.out.println(((Map&lt;String, Object&gt;)storageManager.root()).get(500_000));\r\n\r\nstorageManager.shutdown();\r\n\r\n```\r\nOutput\r\n`java.lang.OutOfMemoryError: Java heap space\r\nException in thread &quot;Daemon Thread 6&quot; java.lang.OutOfMemoryError: Java heap space`\r\n\r\n\r\nI&#39;m trying to persist and read objects from my collection in S3","title":"MicroStream + AWS S3 Blob example","body":"<p>I'm trying to develop a simple application using MicroStream and AWS S3 as a Blob storage\nUsing the examples in the official page and others, I can't store and query some elements</p>\n<p>S3 Connection is working.</p>\n<p>My Code</p>\n<pre><code>S3Client cli = S3Client.builder()\n      .region(Region.US_EAST_1)\n      .credentialsProvider(StaticCredentialsProvider.create(\n\n            AwsSessionCredentials.create(accessKey, secret, token)))\n      .build()\n      ;\n\nBlobStoreFileSystem fileSystem = BlobStoreFileSystem.New(\n      S3Connector.Caching(cli)\n);\n\nfinal EmbeddedStorageManager storageManager =EmbeddedStorage.start(fileSystem.ensureDirectoryPath(&quot;s3-folder&quot;));\n\nHashMap&lt;Integer, Object&gt; database = new HashMap&lt;&gt;();\n\nif (storageManager.root() == null) {\n   storageManager.setRoot(database);\n   storageManager.storeRoot();\n} else {\n   database = (HashMap&lt;Integer, Object&gt;) storageManager.root();\n}\n\nStorer storage = storageManager.createLazyStorer();\n\nfor(int i=0; i &lt; 1_000_000; i++) {\n   database.put(i, UUID.randomUUID().toString());\n\n   if (i == 500_000) {\n      System.out.println(&quot;Value: &quot; + database.get(500_000));\n   }\n}\n\nstorage.storeAll(database);\nstorage.commit();\n\nSystem.out.println(&quot;*************************&quot;);\nSystem.out.println(((Map&lt;String, Object&gt;)storageManager.root()).get(500_000));\n\nstorageManager.shutdown();\n\n</code></pre>\n<p>Output\n<code>java.lang.OutOfMemoryError: Java heap space Exception in thread &quot;Daemon Thread 6&quot; java.lang.OutOfMemoryError: Java heap space</code></p>\n<p>I'm trying to persist and read objects from my collection in S3</p>\n"},{"tags":["java","synchronization","semaphore"],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669204850,"creation_date":1669204850,"answer_id":74546472,"question_id":74546325,"body_markdown":"Semaphore works as a gate. It can&#39;t be qualified as thread-safe or thread-unsafe. Resources (in general objects) can be thread-safe or unsafe.\r\n\r\nIf it is binary semaphore, only one thread can access your resources at any given moment. So there is no need to think about thread-safety.\r\n\r\nBut if semaphore count is 2, two threads can simultaneously access the same resource. If your resource (some object) is thread-safe, you are good. Otherwise you would need to implement some kind of synchronization mechanism so that unsafe part can only be accessed by one thread at a time.","title":"Is semaphore thread-safe when its permits variable bigger than 1?","body":"<p>Semaphore works as a gate. It can't be qualified as thread-safe or thread-unsafe. Resources (in general objects) can be thread-safe or unsafe.</p>\n<p>If it is binary semaphore, only one thread can access your resources at any given moment. So there is no need to think about thread-safety.</p>\n<p>But if semaphore count is 2, two threads can simultaneously access the same resource. If your resource (some object) is thread-safe, you are good. Otherwise you would need to implement some kind of synchronization mechanism so that unsafe part can only be accessed by one thread at a time.</p>\n"}],"owner":{"account_id":27022507,"reputation":3,"user_id":20580286,"display_name":"angus600"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":305,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546472,"answer_count":1,"score":0,"last_activity_date":1669204850,"creation_date":1669204157,"question_id":74546325,"body_markdown":"Recently I have been studying the sleep barber, and I have comprehended that it seems like a binary semaphore when the permits value equals to 1. How about when it exceeds 1? Will one thread be exchanged by a new one without releasing when multiple threads acquired?\r\n\r\n\r\nI think it is unsafe but I am not sure .\r\nIt would be nice if you could tell me the difference between syncing and simultaneous access.","title":"Is semaphore thread-safe when its permits variable bigger than 1?","body":"<p>Recently I have been studying the sleep barber, and I have comprehended that it seems like a binary semaphore when the permits value equals to 1. How about when it exceeds 1? Will one thread be exchanged by a new one without releasing when multiple threads acquired?</p>\n<p>I think it is unsafe but I am not sure .\nIt would be nice if you could tell me the difference between syncing and simultaneous access.</p>\n"},{"tags":["java","if-statement","character"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1669114618,"post_id":74531462,"comment_id":131565265,"body_markdown":"Loop on the string, check every character with `charAt`, set a flag to false and bail out as soon as you encounter a character that is neither ?, 0 or 1. Then use that flag as the condition in the `if` statement.","body":"Loop on the string, check every character with <code>charAt</code>, set a flag to false and bail out as soon as you encounter a character that is neither ?, 0 or 1. Then use that flag as the condition in the <code>if</code> statement."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1669114685,"post_id":74531462,"comment_id":131565287,"body_markdown":"seems like a case for regular expressions: see Oracle&#39;s tutorial [Lesson: Regular Expressions](https://docs.oracle.com/javase/tutorial/essential/regex/) or the [`Pattern`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html) class","body":"seems like a case for regular expressions: see Oracle&#39;s tutorial <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow noreferrer\">Lesson: Regular Expressions</a> or the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\"><code>Pattern</code></a> class"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1669114835,"post_id":74531462,"comment_id":131565332,"body_markdown":"Using a regex this would become `if(text.matches(&quot;[\\\\?01]+&quot;))` (assuming the string must not be empty). Without regex you basically do what Federico suggested.","body":"Using a regex this would become <code>if(text.matches(&quot;[\\\\?01]+&quot;))</code> (assuming the string must not be empty). Without regex you basically do what Federico suggested."},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669115307,"post_id":74531462,"comment_id":131565487,"body_markdown":"Probably better to compile the pattern in advance if it&#39;s used often as the creation of the decision tree is relatively heavy operation","body":"Probably better to compile the pattern in advance if it&#39;s used often as the creation of the decision tree is relatively heavy operation"}],"answers":[{"tags":[],"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669115618,"creation_date":1669115091,"answer_id":74531591,"question_id":74531462,"body_markdown":"You can use regex for this with the following pattern: `[?01]+` which means 1 or more instances of the characters ?, 0 or 1. if you want to limit it to 0 or more instances of any of them you can use this pattern instead: `[?01]*` or for exactly 1 you can just omit the `*` at the end (`[?01]`)\r\n\r\nThe usage would be as follow:\r\n\r\n    private Pattern pattern = Pattern.compile(&quot;[?01]+&quot;);\r\n    \r\n    private boolean isMatching(String s) {\r\n       return pattern.matcher(s).matches();\r\n    }\r\n\r\nAn example of the usage would be (please note that in this case both the function and the pattern need to be static):\r\n\r\n     public static void main(String[] args) {\r\n         System.out.println(isMatching(&quot;?&quot;));\r\n         System.out.println(isMatching(&quot;?A&quot;));\r\n         System.out.println(isMatching(&quot;N?&quot;));\r\n         System.out.println(isMatching(&quot;3&quot;));\r\n         System.out.println(isMatching(&quot;01&quot;));\r\n    }\r\n\r\nWhich will follow this output:\r\n\r\n```log\r\ntrue\r\nfalse\r\nfalse\r\nfalse\r\ntrue\r\n```\r\n","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>You can use regex for this with the following pattern: <code>[?01]+</code> which means 1 or more instances of the characters ?, 0 or 1. if you want to limit it to 0 or more instances of any of them you can use this pattern instead: <code>[?01]*</code> or for exactly 1 you can just omit the <code>*</code> at the end (<code>[?01]</code>)</p>\n<p>The usage would be as follow:</p>\n<pre><code>private Pattern pattern = Pattern.compile(&quot;[?01]+&quot;);\n\nprivate boolean isMatching(String s) {\n   return pattern.matcher(s).matches();\n}\n</code></pre>\n<p>An example of the usage would be (please note that in this case both the function and the pattern need to be static):</p>\n<pre><code> public static void main(String[] args) {\n     System.out.println(isMatching(&quot;?&quot;));\n     System.out.println(isMatching(&quot;?A&quot;));\n     System.out.println(isMatching(&quot;N?&quot;));\n     System.out.println(isMatching(&quot;3&quot;));\n     System.out.println(isMatching(&quot;01&quot;));\n}\n</code></pre>\n<p>Which will follow this output:</p>\n<pre><code>true\nfalse\nfalse\nfalse\ntrue\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669204714,"creation_date":1669135695,"answer_id":74536267,"question_id":74531462,"body_markdown":"Assuming you are using a [Scanner](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Scanner.html#Scanner(java.lang.String)) to read from the console you can do it like this.\r\n- `[^01?]+` - use one or more characters other than `0,1, ?` as the input delimiter.\r\n\r\nFor demo purposes I am use a String as input.\r\n```\r\nString testString = &quot;ksks1ksks111;?001ksksksk10101 skksksk0ksks1ksk101010101jsjs&quot;;\r\n\r\nScanner s = new Scanner(testString).useDelimiter(&quot;[^01\\\\?]+&quot;);\r\n\r\nwhile (s.hasNext()) {\r\n    String in = s.next();\r\n    System.out.println(in);\r\n}\r\n```\r\nprints\r\n```\r\n1\r\n111\r\n?001\r\n10101\r\n0\r\n1\r\n101010101\r\n\r\n```\r\nTo actually read from the console you can set use `System.in` in place of `testString` above.  To terminate the input you can check for a specific combination of characters or signal an `eof` for the console.","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>Assuming you are using a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Scanner.html#Scanner(java.lang.String)\" rel=\"nofollow noreferrer\">Scanner</a> to read from the console you can do it like this.</p>\n<ul>\n<li><code>[^01?]+</code> - use one or more characters other than <code>0,1, ?</code> as the input delimiter.</li>\n</ul>\n<p>For demo purposes I am use a String as input.</p>\n<pre><code>String testString = &quot;ksks1ksks111;?001ksksksk10101 skksksk0ksks1ksk101010101jsjs&quot;;\n\nScanner s = new Scanner(testString).useDelimiter(&quot;[^01\\\\?]+&quot;);\n\nwhile (s.hasNext()) {\n    String in = s.next();\n    System.out.println(in);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>1\n111\n?001\n10101\n0\n1\n101010101\n\n</code></pre>\n<p>To actually read from the console you can set use <code>System.in</code> in place of <code>testString</code> above.  To terminate the input you can check for a specific combination of characters or signal an <code>eof</code> for the console.</p>\n"}],"owner":{"account_id":18727244,"reputation":3,"user_id":14779701,"display_name":"Saber"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74531591,"answer_count":2,"score":0,"last_activity_date":1669204714,"creation_date":1669114468,"question_id":74531462,"body_markdown":"Im trying to solve a problem which reads only characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39; from the console. I have been using the following if statement, but it only works when all three are included in the string.\r\n\r\nHow should the statement look like if I only want &#39;?&#39;, &#39;0&#39; and &#39;1&#39;? I want the program to stop if I use for instance &quot;10?=&quot;.\r\n\r\n```\r\n if(text.contains(&quot;?&quot;) &amp;&amp; text.contains(&quot;0&quot;) &amp;&amp; text.contains(&quot;1&quot;))\r\n        {\r\n            //do something\r\n        }\r\n``` \r\n\r\n","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>Im trying to solve a problem which reads only characters '?', '0' and '1' from the console. I have been using the following if statement, but it only works when all three are included in the string.</p>\n<p>How should the statement look like if I only want '?', '0' and '1'? I want the program to stop if I use for instance &quot;10?=&quot;.</p>\n<pre><code> if(text.contains(&quot;?&quot;) &amp;&amp; text.contains(&quot;0&quot;) &amp;&amp; text.contains(&quot;1&quot;))\n        {\n            //do something\n        }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9132,"page":860,"page_size":100}
