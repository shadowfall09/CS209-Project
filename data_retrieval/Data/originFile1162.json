{"items":[{"tags":["java","functional-programming","either","vavr"],"comments":[{"owner":{"account_id":301230,"reputation":28997,"user_id":608820,"accept_rate":89,"display_name":"Augusto"},"score":0,"creation_date":1642711388,"post_id":70791445,"comment_id":125151601,"body_markdown":"Unrelated comment: you can make the constructord of the VOs private and JPA will use them. Unrelated commend 2: drop vavr and use Kotlin or another JVM language that supports functional constructs your quality of life will improve dramatically :D.","body":"Unrelated comment: you can make the constructord of the VOs private and JPA will use them. Unrelated commend 2: drop vavr and use Kotlin or another JVM language that supports functional constructs your quality of life will improve dramatically :D."}],"answers":[{"tags":[],"owner":{"account_id":442405,"reputation":2504,"user_id":833009,"accept_rate":50,"display_name":"jvwilge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654002587,"creation_date":1654002587,"answer_id":72448404,"question_id":70791445,"body_markdown":"I&#39;d use `Validation` here since there you can collect (validation) errors.  :\r\n\r\nSince I don&#39;t have the object types of your example I came up with this:\r\n\r\n```\r\nValidation&lt;Seq&lt;? extends Number&gt;, String&gt; c = Validation.invalid(io.vavr.collection.List.of(1L));\r\nValidation&lt;Seq&lt;? extends Number&gt;, String&gt; d = Validation.valid(&quot;x&quot;);\r\n    \r\nfinal Validation&lt;Seq&lt;? extends Number&gt;, String&gt; result = c.flatMap(s -&gt; d);\r\n```\r\n\r\nValidation is basically a special case of Either (there is also a `.toEither` on the `Validation` object).\r\n\r\n`c` is the result of `UserName.create` and `d` `Password.create`\r\n\r\nThe &#39;trick&#39; is to use a `Seq` here instead of the Object type directly. I can&#39;t explain why (so I realize this might sound like bad advice).\r\n\r\nIn our project we use this construction extensively since we often can have multiple validation errors in our flows and then the left side is always the same and easy to carry over to other flows.","title":"Problem with Either and errors types incompatibility","body":"<p>I'd use <code>Validation</code> here since there you can collect (validation) errors.  :</p>\n<p>Since I don't have the object types of your example I came up with this:</p>\n<pre><code>Validation&lt;Seq&lt;? extends Number&gt;, String&gt; c = Validation.invalid(io.vavr.collection.List.of(1L));\nValidation&lt;Seq&lt;? extends Number&gt;, String&gt; d = Validation.valid(&quot;x&quot;);\n    \nfinal Validation&lt;Seq&lt;? extends Number&gt;, String&gt; result = c.flatMap(s -&gt; d);\n</code></pre>\n<p>Validation is basically a special case of Either (there is also a <code>.toEither</code> on the <code>Validation</code> object).</p>\n<p><code>c</code> is the result of <code>UserName.create</code> and <code>d</code> <code>Password.create</code></p>\n<p>The 'trick' is to use a <code>Seq</code> here instead of the Object type directly. I can't explain why (so I realize this might sound like bad advice).</p>\n<p>In our project we use this construction extensively since we often can have multiple validation errors in our flows and then the left side is always the same and easy to carry over to other flows.</p>\n"},{"tags":[],"owner":{"account_id":11394190,"reputation":331,"user_id":8353152,"display_name":"DBear"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658697853,"creation_date":1658697853,"answer_id":73102147,"question_id":70791445,"body_markdown":"The issue is that `Either&lt;WrongUserNameFormat, ...&gt;` does not extend `Either&lt;AccountError, ...&gt;` even though `WrongUserNameFormat` may extend `AccountError`. This is because Java does not have good support for [type parameter variance][1]. VAVr recognizes this issue, so it provides the `narrow` method for many of it&#39;s types including `Either`. So you can wrap the return value of `Account.create` with `Either.&lt;AccountError, Account&gt;narrow(...)`.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)","title":"Problem with Either and errors types incompatibility","body":"<p>The issue is that <code>Either&lt;WrongUserNameFormat, ...&gt;</code> does not extend <code>Either&lt;AccountError, ...&gt;</code> even though <code>WrongUserNameFormat</code> may extend <code>AccountError</code>. This is because Java does not have good support for <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">type parameter variance</a>. VAVr recognizes this issue, so it provides the <code>narrow</code> method for many of it's types including <code>Either</code>. So you can wrap the return value of <code>Account.create</code> with <code>Either.&lt;AccountError, Account&gt;narrow(...)</code>.</p>\n"}],"owner":{"account_id":19206274,"reputation":107,"user_id":14033074,"display_name":"Sampeteq"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1658697853,"creation_date":1642702727,"question_id":70791445,"body_markdown":"I have a problem with Either errors types incompatibility.\r\n\r\nA method to create Account entity:\r\n\r\n    static Either&lt;AccountError,Account&gt; create(\r\n    String userNameCandidate,\r\n    UserNameUniquenessValidator userNameUniquenessValidator,\r\n    String passwordCandidate,\r\n    PasswordEncoder passwordEncoder) {\r\n\r\n       return UserName\r\n                .create(userNameCandidate,userNameUniquenessValidator)\r\n                .flatMap(correctUserName -&gt; Password\r\n                        .create(passwordCandidate,passwordEncoder)\r\n                        .map(correctPassword -&gt; new Account(correctUserName,correctPassword)));\r\n    }\r\n\r\nUserName and Password value objects:\r\n\r\n    @Embeddable\r\n    final class UserName implements Serializable {\r\n\r\n    public static final Integer MIN_USER_NAME_LENGTH = 3;\r\n\r\n    public static final Integer MAX_USER_NAME_LENGTH = 15;\r\n\r\n    @Column\r\n    private final String userName;\r\n\r\n    UserName(String userNam) {\r\n        this.userName = userNam;\r\n    }\r\n\r\n    //For JPA only.Don&#39;t use!\r\n    public UserName() {\r\n\r\n        this.userName = &quot;default&quot;;\r\n    }\r\n\r\n    static Either&lt;WrongUserNameFormatError,UserName&gt; create(\r\n            String userNameCandidate,\r\n            UserNameUniquenessValidator userNameUniquenessValidator) {\r\n\r\n        if (userNameCandidate.isEmpty()) {\r\n\r\n            return Either.left(new WrongUserNameFormatError(&quot;Empty user name.&quot;));\r\n        }\r\n\r\n        var isUserNameCandidateLengthWrong =\r\n                userNameCandidate.length() &lt; MIN_USER_NAME_LENGTH &amp;&amp;\r\n                userNameCandidate.length() &gt; MAX_USER_NAME_LENGTH;\r\n\r\n        if (isUserNameCandidateLengthWrong) {\r\n\r\n            return Either.left(new WrongUserNameFormatError(\r\n                        &quot;Wrong user name length: &quot; + userNameCandidate.length() +\r\n                                &quot;.Min: &quot; + MIN_USER_NAME_LENGTH +\r\n                                &quot;.Max: &quot; + MAX_USER_NAME_LENGTH));\r\n        }\r\n\r\n        if (!userNameUniquenessValidator.isUnique(userNameCandidate)) {\r\n\r\n            return Either.left(new WrongUserNameFormatError(&quot;Not unique user name: &quot; + \r\n    userNameCandidate));\r\n        }\r\n\r\n        return Either.right(new UserName(userNameCandidate));\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n      }\r\n    }\r\n\r\n    @Embeddable\r\n    final class Password implements Serializable {\r\n\r\n    public static final Integer MIN_PASSWORD_LENGTH = 5;\r\n\r\n    @Column\r\n    private final String password;\r\n\r\n    private Password(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    //For JPA only.Don&#39;t use!\r\n    public Password() {\r\n\r\n        this.password = &quot;default&quot;;\r\n    }\r\n\r\n    static Either&lt;WrongPasswordFormatError,Password&gt; create(String passwordCandidate, PasswordEncoder passwordEncoder) {\r\n\r\n        if (passwordCandidate.length() &gt;= MIN_PASSWORD_LENGTH) {\r\n\r\n            var encodedPassword= passwordEncoder.encode(passwordCandidate);\r\n\r\n            return Either.right(new Password(encodedPassword));\r\n        }\r\n        else {\r\n\r\n            return Either.left(new WrongPasswordFormatError(\r\n                        &quot;Wrong password length: &quot; + passwordCandidate.length() +\r\n                                &quot;. Min: &quot; + MIN_PASSWORD_LENGTH));\r\n        }\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n}\r\n\r\nI get error: Required Either&lt;AccountError,Account&gt;, provided Either&lt;WrongUserNameFormat, Object&gt;, incompatible constraint: AccountError and WrongUserNameFormatError even though all errors extends AccountError.","title":"Problem with Either and errors types incompatibility","body":"<p>I have a problem with Either errors types incompatibility.</p>\n<p>A method to create Account entity:</p>\n<pre><code>static Either&lt;AccountError,Account&gt; create(\nString userNameCandidate,\nUserNameUniquenessValidator userNameUniquenessValidator,\nString passwordCandidate,\nPasswordEncoder passwordEncoder) {\n\n   return UserName\n            .create(userNameCandidate,userNameUniquenessValidator)\n            .flatMap(correctUserName -&gt; Password\n                    .create(passwordCandidate,passwordEncoder)\n                    .map(correctPassword -&gt; new Account(correctUserName,correctPassword)));\n}\n</code></pre>\n<p>UserName and Password value objects:</p>\n<pre><code>@Embeddable\nfinal class UserName implements Serializable {\n\npublic static final Integer MIN_USER_NAME_LENGTH = 3;\n\npublic static final Integer MAX_USER_NAME_LENGTH = 15;\n\n@Column\nprivate final String userName;\n\nUserName(String userNam) {\n    this.userName = userNam;\n}\n\n//For JPA only.Don't use!\npublic UserName() {\n\n    this.userName = &quot;default&quot;;\n}\n\nstatic Either&lt;WrongUserNameFormatError,UserName&gt; create(\n        String userNameCandidate,\n        UserNameUniquenessValidator userNameUniquenessValidator) {\n\n    if (userNameCandidate.isEmpty()) {\n\n        return Either.left(new WrongUserNameFormatError(&quot;Empty user name.&quot;));\n    }\n\n    var isUserNameCandidateLengthWrong =\n            userNameCandidate.length() &lt; MIN_USER_NAME_LENGTH &amp;&amp;\n            userNameCandidate.length() &gt; MAX_USER_NAME_LENGTH;\n\n    if (isUserNameCandidateLengthWrong) {\n\n        return Either.left(new WrongUserNameFormatError(\n                    &quot;Wrong user name length: &quot; + userNameCandidate.length() +\n                            &quot;.Min: &quot; + MIN_USER_NAME_LENGTH +\n                            &quot;.Max: &quot; + MAX_USER_NAME_LENGTH));\n    }\n\n    if (!userNameUniquenessValidator.isUnique(userNameCandidate)) {\n\n        return Either.left(new WrongUserNameFormatError(&quot;Not unique user name: &quot; + \nuserNameCandidate));\n    }\n\n    return Either.right(new UserName(userNameCandidate));\n}\n\npublic String getUserName() {\n    return userName;\n  }\n}\n\n@Embeddable\nfinal class Password implements Serializable {\n\npublic static final Integer MIN_PASSWORD_LENGTH = 5;\n\n@Column\nprivate final String password;\n\nprivate Password(String password) {\n    this.password = password;\n}\n\n//For JPA only.Don't use!\npublic Password() {\n\n    this.password = &quot;default&quot;;\n}\n\nstatic Either&lt;WrongPasswordFormatError,Password&gt; create(String passwordCandidate, PasswordEncoder passwordEncoder) {\n\n    if (passwordCandidate.length() &gt;= MIN_PASSWORD_LENGTH) {\n\n        var encodedPassword= passwordEncoder.encode(passwordCandidate);\n\n        return Either.right(new Password(encodedPassword));\n    }\n    else {\n\n        return Either.left(new WrongPasswordFormatError(\n                    &quot;Wrong password length: &quot; + passwordCandidate.length() +\n                            &quot;. Min: &quot; + MIN_PASSWORD_LENGTH));\n    }\n}\n\npublic String getPassword() {\n    return password;\n}\n</code></pre>\n<p>}</p>\n<p>I get error: Required Either&lt;AccountError,Account&gt;, provided Either&lt;WrongUserNameFormat, Object&gt;, incompatible constraint: AccountError and WrongUserNameFormatError even though all errors extends AccountError.</p>\n"},{"tags":["java","spring-boot","spring-security","swagger","swagger-ui"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":0,"creation_date":1611090639,"post_id":65797280,"comment_id":116337799,"body_markdown":"Did you see this? https://stackoverflow.com/questions/61859801/how-to-trim-swagger-docs-based-on-current-user-role-in-java-spring/61860729#61860729","body":"Did you see this? <a href=\"https://stackoverflow.com/questions/61859801/how-to-trim-swagger-docs-based-on-current-user-role-in-java-spring/61860729#61860729\" title=\"how to trim swagger docs based on current user role in java spring\">stackoverflow.com/questions/61859801/&hellip;</a>"},{"owner":{"account_id":1318923,"reputation":9011,"user_id":1265182,"accept_rate":100,"display_name":"Shar1er80"},"score":0,"creation_date":1611095248,"post_id":65797280,"comment_id":116339604,"body_markdown":"@aksappy I don&#39;t think I&#39;m wanting to &quot;trim operations displayed by swagger-ui.html&quot;, I want to restrict the UI all together.","body":"@aksappy I don&#39;t think I&#39;m wanting to &quot;trim operations displayed by swagger-ui.html&quot;, I want to restrict the UI all together."},{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1611179204,"post_id":65797280,"comment_id":116371511,"body_markdown":"I&#39;m questioning the the actual use case for such a change. A Swagger page is documentation for your API - surely a user that requires viewing the Swagger UI page would have needed to check the definition of your `/login` (or equivalent) endpoint to provide credentials which include the role you wish to check? Why does Basic Auth not suffice?","body":"I&#39;m questioning the the actual use case for such a change. A Swagger page is documentation for your API - surely a user that requires viewing the Swagger UI page would have needed to check the definition of your <code>&#47;login</code> (or equivalent) endpoint to provide credentials which include the role you wish to check? Why does Basic Auth not suffice?"}],"answers":[{"tags":[],"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611176443,"creation_date":1611150662,"answer_id":65810858,"question_id":65797280,"body_markdown":"The same way as the other endpoints. This will still let other download the swagger config, you could block `/api-docs/**` as well if you really need that level of control.\r\n\r\n```java\r\n...\r\n  .antMatchers(&quot;/swagger-ui/**&quot;) // For URI starting with swagger-ui\r\n  .hasRole(&quot;USER&quot;)\r\n  .antMatchers(&quot;/**/swagger-ui/**&quot;) // For URI that contains swagger-ui\r\n  .hasRole(&quot;USER&quot;)\r\n...\r\n```\r\n","title":"Restrict Swagger UIs to specific roles","body":"<p>The same way as the other endpoints. This will still let other download the swagger config, you could block <code>/api-docs/**</code> as well if you really need that level of control.</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n  .antMatchers(&quot;/swagger-ui/**&quot;) // For URI starting with swagger-ui\n  .hasRole(&quot;USER&quot;)\n  .antMatchers(&quot;/**/swagger-ui/**&quot;) // For URI that contains swagger-ui\n  .hasRole(&quot;USER&quot;)\n...\n</code></pre>\n"}],"owner":{"account_id":1318923,"reputation":9011,"user_id":1265182,"accept_rate":100,"display_name":"Shar1er80"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658697260,"creation_date":1611080569,"question_id":65797280,"body_markdown":"I&#39;m trying to limit access to the Swagger User Interface (UI) to specific roles (e.g. Swagger API user, System Admin user, etc...)\r\n\r\nI tried the answer in this SO question - https://stackoverflow.com/questions/39112974/restrict-access-to-swagger-ui\r\n\r\nSo my code class looks like \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \t/**\r\n    \t * XLogger.\r\n    \t */\r\n    \tprivate static final XLogger LOG = XLoggerFactory.getXLogger(WebSecurityConfig.class);\r\n    \r\n    \t@Value(&quot;${my.property.allowedOrigins}&quot;)\r\n    \tprivate String[] corsAllowedOrigins;\r\n    \r\n    \t@Value(&quot;${my.property.excludeUrlPattern}&quot;)\r\n    \tprivate String[] excludeUrlPattern;\r\n    \r\n    \t@Autowired\r\n    \tApplicationContext applicationContext;\r\n    \r\n    \t/**\r\n    \t * The AuthenticationSuccessHandler.\r\n    \t */\r\n    \t@Autowired\r\n    \tHSSAuthenticationSuccessHandler authenticationSuccessHandler;\r\n    \r\n    \t/**\r\n    \t * The runtime properties\r\n    \t */\r\n    \t@Autowired\r\n    \tRuntimeProperties runtimeProperties;\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\tLOG.entry(http);\r\n    \r\n    \t\tString[] noAuthPermitAllPatterns = runtimeProperties.getApplicationProperties().getNoAuthPermitAllPatterns();\r\n    \r\n    \t\thttp.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/swagger-ui/**&quot;, &quot;/**/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**/v3/api-docs/**&quot;)\r\n    \t\t\t\t.hasRole(&quot;ADMIN&quot;).antMatchers(noAuthPermitAllPatterns).permitAll().anyRequest().authenticated().and()\r\n    \t\t\t\t.formLogin().failureHandler(authenticationFailureHandler()).successHandler(authenticationSuccessHandler)\r\n    \t\t\t\t.loginPage(&quot;/saml/login&quot;).permitAll().and().logout().logoutSuccessUrl(&quot;/logoutSuccess&quot;).permitAll()\r\n    \t\t\t\t.invalidateHttpSession(true).and().csrf().disable().cors()\r\n    \t\t\t\t.configurationSource(corsConfigurationSource());\r\n    \t\thttp.addFilterBefore((MetadataGeneratorFilter) applicationContext.getBean(&quot;metadataGeneratorFilter&quot;),\r\n    \t\t\t\tChannelProcessingFilter.class).addFilterAfter(\r\n    \t\t\t\t\t\t(FilterChainProxy) applicationContext.getBean(&quot;samlFilter&quot;), BasicAuthenticationFilter.class);\r\n    \r\n    \t\tLOG.exit();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tCorsConfigurationSource corsConfigurationSource() {\r\n    \t\tLOG.entry();\r\n    \r\n    \t\tCorsConfiguration configuration = new CorsConfiguration();\r\n    \t\tconfiguration.setAllowedOrigins(Arrays.asList(corsAllowedOrigins));\r\n    \t\tconfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;));\r\n    \t\tconfiguration.setAllowCredentials(true);\r\n    \t\t// the below three lines will add the relevant CORS response headers\r\n    \t\tconfiguration.addAllowedOrigin(&quot;*&quot;);\r\n    \t\tconfiguration.addAllowedHeader(&quot;*&quot;);\r\n    \t\tconfiguration.addAllowedMethod(&quot;*&quot;);\r\n    \t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t\tsource.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n    \r\n    \t\treturn LOG.exit(source);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@Bean(name = &quot;webAuthenticationManagerBean&quot;)\r\n    \tpublic AuthenticationManager authenticationManagerBean() throws Exception {\r\n    \t\tLOG.entry();\r\n    \t\treturn LOG.exit(super.authenticationManagerBean());\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Authentication Failure Handler\r\n    \t *\r\n    \t * @return The Authentication Failure Handler\r\n    \t */\r\n    \t@Bean(name = &quot;authenticationFailureHandler&quot;)\r\n    \tprotected AuthenticationFailureHandler authenticationFailureHandler() {\r\n    \t\tLOG.entry();\r\n    \r\n    \t\tString defaultFailureUrl = runtimeProperties.getApplicationProperties().getDefaultFailureURL();\r\n    \t\tExceptionMappingAuthenticationFailureHandler authFailureHandler = new ExceptionMappingAuthenticationFailureHandler();\r\n    \t\tauthFailureHandler.setDefaultFailureUrl(defaultFailureUrl);\r\n    \t\tMap&lt;String, String&gt; mappings = new HashMap&lt;&gt;();\r\n    \t\tmappings.put(&quot;org.springframework.security.authentication.InternalAuthenticationServiceException&quot;,\r\n    \t\t\t\tdefaultFailureUrl);\r\n    \t\tmappings.put(&quot;org.springframework.security.saml.SAMLAuthenticationToken&quot;, defaultFailureUrl);\r\n    \t\tmappings.put(&quot;org.springframework.security.authentication.AuthenticationServiceException&quot;, defaultFailureUrl);\r\n    \t\tauthFailureHandler.setExceptionMappings(mappings);\r\n    \r\n    \t\treturn LOG.exit(authFailureHandler);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void configure(WebSecurity web) throws Exception {\r\n    \t\tLOG.entry(web);\r\n    \t\tweb.ignoring().antMatchers(excludeUrlPattern);\r\n    \t\tLOG.exit();\r\n    \t}\r\n    }\r\n\r\nThis still allows me to access the Swagger UI @\r\n`http://{localUrl}/swagger-ui/index.html?configUrl=/{localUrl}/v3/api-docs/swagger-config`\r\n\r\nAlso, what&#39;s the difference between two configure( ) methods, where one uses `HttpSecurity` and the other uses `WebSecurity`?  The excludeUrlPattern does include swagger patterns, so I wondered if that creates a conflict with what I&#39;m trying to do.\r\n\r\nI guess I&#39;m expecting a 401 Unauthorized response.  I&#39;m totally new to Swagger, so any advice is appreciated!","title":"Restrict Swagger UIs to specific roles","body":"<p>I'm trying to limit access to the Swagger User Interface (UI) to specific roles (e.g. Swagger API user, System Admin user, etc...)</p>\n<p>I tried the answer in this SO question - <a href=\"https://stackoverflow.com/questions/39112974/restrict-access-to-swagger-ui\">Restrict access to Swagger UI</a></p>\n<p>So my code class looks like</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    /**\n     * XLogger.\n     */\n    private static final XLogger LOG = XLoggerFactory.getXLogger(WebSecurityConfig.class);\n\n    @Value(&quot;${my.property.allowedOrigins}&quot;)\n    private String[] corsAllowedOrigins;\n\n    @Value(&quot;${my.property.excludeUrlPattern}&quot;)\n    private String[] excludeUrlPattern;\n\n    @Autowired\n    ApplicationContext applicationContext;\n\n    /**\n     * The AuthenticationSuccessHandler.\n     */\n    @Autowired\n    HSSAuthenticationSuccessHandler authenticationSuccessHandler;\n\n    /**\n     * The runtime properties\n     */\n    @Autowired\n    RuntimeProperties runtimeProperties;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        LOG.entry(http);\n\n        String[] noAuthPermitAllPatterns = runtimeProperties.getApplicationProperties().getNoAuthPermitAllPatterns();\n\n        http.authorizeRequests()\n                .antMatchers(&quot;/swagger-ui/**&quot;, &quot;/**/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**/v3/api-docs/**&quot;)\n                .hasRole(&quot;ADMIN&quot;).antMatchers(noAuthPermitAllPatterns).permitAll().anyRequest().authenticated().and()\n                .formLogin().failureHandler(authenticationFailureHandler()).successHandler(authenticationSuccessHandler)\n                .loginPage(&quot;/saml/login&quot;).permitAll().and().logout().logoutSuccessUrl(&quot;/logoutSuccess&quot;).permitAll()\n                .invalidateHttpSession(true).and().csrf().disable().cors()\n                .configurationSource(corsConfigurationSource());\n        http.addFilterBefore((MetadataGeneratorFilter) applicationContext.getBean(&quot;metadataGeneratorFilter&quot;),\n                ChannelProcessingFilter.class).addFilterAfter(\n                        (FilterChainProxy) applicationContext.getBean(&quot;samlFilter&quot;), BasicAuthenticationFilter.class);\n\n        LOG.exit();\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        LOG.entry();\n\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(corsAllowedOrigins));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;));\n        configuration.setAllowCredentials(true);\n        // the below three lines will add the relevant CORS response headers\n        configuration.addAllowedOrigin(&quot;*&quot;);\n        configuration.addAllowedHeader(&quot;*&quot;);\n        configuration.addAllowedMethod(&quot;*&quot;);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n\n        return LOG.exit(source);\n    }\n\n    @Override\n    @Bean(name = &quot;webAuthenticationManagerBean&quot;)\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        LOG.entry();\n        return LOG.exit(super.authenticationManagerBean());\n    }\n\n    /**\n     * Authentication Failure Handler\n     *\n     * @return The Authentication Failure Handler\n     */\n    @Bean(name = &quot;authenticationFailureHandler&quot;)\n    protected AuthenticationFailureHandler authenticationFailureHandler() {\n        LOG.entry();\n\n        String defaultFailureUrl = runtimeProperties.getApplicationProperties().getDefaultFailureURL();\n        ExceptionMappingAuthenticationFailureHandler authFailureHandler = new ExceptionMappingAuthenticationFailureHandler();\n        authFailureHandler.setDefaultFailureUrl(defaultFailureUrl);\n        Map&lt;String, String&gt; mappings = new HashMap&lt;&gt;();\n        mappings.put(&quot;org.springframework.security.authentication.InternalAuthenticationServiceException&quot;,\n                defaultFailureUrl);\n        mappings.put(&quot;org.springframework.security.saml.SAMLAuthenticationToken&quot;, defaultFailureUrl);\n        mappings.put(&quot;org.springframework.security.authentication.AuthenticationServiceException&quot;, defaultFailureUrl);\n        authFailureHandler.setExceptionMappings(mappings);\n\n        return LOG.exit(authFailureHandler);\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        LOG.entry(web);\n        web.ignoring().antMatchers(excludeUrlPattern);\n        LOG.exit();\n    }\n}\n</code></pre>\n<p>This still allows me to access the Swagger UI @\n<code>http://{localUrl}/swagger-ui/index.html?configUrl=/{localUrl}/v3/api-docs/swagger-config</code></p>\n<p>Also, what's the difference between two configure( ) methods, where one uses <code>HttpSecurity</code> and the other uses <code>WebSecurity</code>?  The excludeUrlPattern does include swagger patterns, so I wondered if that creates a conflict with what I'm trying to do.</p>\n<p>I guess I'm expecting a 401 Unauthorized response.  I'm totally new to Swagger, so any advice is appreciated!</p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-grid"],"answers":[{"tags":[],"owner":{"account_id":1831742,"reputation":1989,"user_id":1662997,"display_name":"Knoobie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1658696995,"creation_date":1658696995,"answer_id":73102069,"question_id":73101886,"body_markdown":"As stated in the notes you have screenshoted. Only / all properties of the address is send to the client. If you would supply the user instance, the whole user instance&#39; properties would be available in the client.","title":"Vaadin LitRenderer bean exposure to the client","body":"<p>As stated in the notes you have screenshoted. Only / all properties of the address is send to the client. If you would supply the user instance, the whole user instance' properties would be available in the client.</p>\n"}],"owner":{"account_id":15805840,"reputation":131,"user_id":11404383,"display_name":"Marcus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73102069,"answer_count":1,"score":0,"last_activity_date":1658696995,"creation_date":1658695266,"question_id":73101886,"body_markdown":"Currently I&#39;m using ComponentRenderers in my Vaadin application, but I would like to change it to LitRenderer (for better performance). \r\n\r\nI read the documentation and I&#39;m not sure about the &quot;Note&quot;. Does it mean that the whole Person bean is exposed to the client, or only the Address bean from the example? I&#39;m asking because I would like to use it for User bean which contains passwords...\r\n\r\nhttps://vaadin.com/docs/latest/components/grid/flow#using-lit-renderers\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OJ47X.png","title":"Vaadin LitRenderer bean exposure to the client","body":"<p>Currently I'm using ComponentRenderers in my Vaadin application, but I would like to change it to LitRenderer (for better performance).</p>\n<p>I read the documentation and I'm not sure about the &quot;Note&quot;. Does it mean that the whole Person bean is exposed to the client, or only the Address bean from the example? I'm asking because I would like to use it for User bean which contains passwords...</p>\n<p><a href=\"https://vaadin.com/docs/latest/components/grid/flow#using-lit-renderers\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/components/grid/flow#using-lit-renderers</a></p>\n<p><a href=\"https://i.stack.imgur.com/OJ47X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OJ47X.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","graph"],"comments":[{"owner":{"account_id":242372,"reputation":23523,"user_id":513838,"accept_rate":100,"display_name":"jzd"},"score":2,"creation_date":1303484786,"post_id":5756668,"comment_id":6590821,"body_markdown":"What is your specific question?","body":"What is your specific question?"},{"owner":{"account_id":48020,"reputation":33723,"user_id":142446,"display_name":"Brett Kail"},"score":1,"creation_date":1303485802,"post_id":5756668,"comment_id":6591056,"body_markdown":"ooks like your code snippet was truncated at the top.  If homework, please use &quot;homework&quot; tag.  Presumably you have questions about the I/O involved, but you&#39;ll need to show what you tried first.","body":"ooks like your code snippet was truncated at the top.  If homework, please use &quot;homework&quot; tag.  Presumably you have questions about the I/O involved, but you&#39;ll need to show what you tried first."},{"owner":{"account_id":371883,"reputation":31,"user_id":720645,"display_name":"DigiExpert"},"score":0,"creation_date":1303579015,"post_id":5756668,"comment_id":6603332,"body_markdown":"@jzd Ok.My specific question is how to start,or approach the creation of the graph.I am thinking to use a scanner object,then use something like BufferedReader object(am not sure if there&#39;s such in JAVA API),then use readLine().After doing that,either cast the value read into element of the EdgeListEdge object(or EdgeListVertex object).I am not very good at Java Syntax though,and woould appreciate any hint,tips..@bkail I am not sure what I/O is and which code snippet was truncated(the syntax for vertex creation or the start of the class)","body":"@jzd Ok.My specific question is how to start,or approach the creation of the graph.I am thinking to use a scanner object,then use something like BufferedReader object(am not sure if there&#39;s such in JAVA API),then use readLine().After doing that,either cast the value read into element of the EdgeListEdge object(or EdgeListVertex object).I am not very good at Java Syntax though,and woould appreciate any hint,tips..@bkail I am not sure what I/O is and which code snippet was truncated(the syntax for vertex creation or the start of the class)"}],"answers":[{"tags":[],"owner":{"account_id":404104,"reputation":729,"user_id":772240,"display_name":"Lane Aasen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1306504950,"creation_date":1306504950,"answer_id":6153332,"question_id":5756668,"body_markdown":"A good approach might be to create a new class with fields for vertex, name and coordinates. Then read in the data from a scanner into an [ArrayList](http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html) of the class you just created. After this, you could just pass the ArrayList into whatever you are using for graphing (which might require a few tweaks).\r\n\r\nExample scanner code (**untested**):\r\n\r\n    File graphFile = new File(filepath);\r\n    Scanner graphScanner = new Scanner(graphFile);\r\n\r\nThen, to read from the scanner (**untested**):\r\n\r\n    ArrayList&lt;graphClass&gt; dataPoints = new ArrayList&lt;graphClass&gt;(); //you will have to make graphClass\r\n    while(graphScanner.hasNextLine()) {\r\n        dataPoints.add(new graphClass(graphScanner.nextDouble(), graphScanner.next(), graphScanner.nextDouble(), graphScanner.nextDouble()); //assuming constructor of graphClass takes vertex, name, x, y in that order\r\n\r\nI hope this helps.\r\n        ","title":"How To Create A Java Graph File from .txt file","body":"<p>A good approach might be to create a new class with fields for vertex, name and coordinates. Then read in the data from a scanner into an <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"nofollow\">ArrayList</a> of the class you just created. After this, you could just pass the ArrayList into whatever you are using for graphing (which might require a few tweaks).</p>\n\n<p>Example scanner code (<strong>untested</strong>):</p>\n\n<pre><code>File graphFile = new File(filepath);\nScanner graphScanner = new Scanner(graphFile);\n</code></pre>\n\n<p>Then, to read from the scanner (<strong>untested</strong>):</p>\n\n<pre><code>ArrayList&lt;graphClass&gt; dataPoints = new ArrayList&lt;graphClass&gt;(); //you will have to make graphClass\nwhile(graphScanner.hasNextLine()) {\n    dataPoints.add(new graphClass(graphScanner.nextDouble(), graphScanner.next(), graphScanner.nextDouble(), graphScanner.nextDouble()); //assuming constructor of graphClass takes vertex, name, x, y in that order\n</code></pre>\n\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":371883,"reputation":31,"user_id":720645,"display_name":"DigiExpert"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7762,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658696540,"creation_date":1303484244,"question_id":5756668,"body_markdown":"I am trying to create a graph file .I have to read in values from a .gra file(which I think is a .txt file).We were told to tokenise lines based on a space in the format `&lt;vertex&gt; &lt;name&gt; &lt;x-coord&gt; &lt;y-coord&gt;`,same for edge\r\n\r\nI had a look at a couple of related questions,but still cant find the answer.\r\n\r\nHere&#39;s the code I was given:\r\n\r\n    \t\tpublic EdgeListVertex(V element) {\r\n    \t\t\tthis.element = element;\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic V element() {\r\n    \t\t\treturn element;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic String toString() {\r\n    \t\t\treturn element.toString();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate class EdgeListEdge implements Edge&lt;E&gt; {\r\n    \t\tPosition&lt;EdgeListEdge&gt; position;\r\n    \t\tE element;\r\n    \t\tEdgeListVertex start, end;\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic EdgeListEdge(EdgeListVertex start, EdgeListVertex end, E element) {\r\n    \t\t\tthis.start = start;\r\n    \t\t\tthis.end = end;\r\n    \t\t\tthis.element = element;\r\n    \t\t}\r\n    \t\t\r\n    \t\t@Override\r\n    \t\tpublic E element() {\r\n    \t\t\treturn element;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic String toString() {\r\n    \t\t\treturn element.toString();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate List&lt;EdgeListVertex&gt; vertices;\r\n    \tprivate List&lt;EdgeListEdge&gt; edges;\r\n    \t\r\n    \t\r\n    \tpublic EdgeListGraph() {\r\n    \t\tvertices = new LinkedList&lt;EdgeListVertex&gt;();\r\n    \t\tedges = new LinkedList&lt;EdgeListEdge&gt;();\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t@Override\r\n    \tpublic Vertex&lt;V&gt;[] endVertices(Edge&lt;E&gt; e) {\r\n    \t\tEdgeListEdge edge = (EdgeListEdge) e;\r\n    \t\tVertex&lt;V&gt;[] endpoints = (Vertex&lt;V&gt;[]) new Vertex[2];\r\n    \t\tendpoints[0] = edge.start;\r\n    \t\tendpoints[1] = edge.end;\r\n    \t\treturn endpoints;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Vertex&lt;V&gt; opposite(Vertex&lt;V&gt; v, Edge&lt;E&gt; e) {\r\n    \t\tVertex&lt;V&gt;[] endpoints = endVertices(e);\r\n    \t\tif (endpoints[0].equals(v)) {\r\n    \t\t\treturn endpoints[1];\r\n    \t\t} else if (endpoints[1].equals(v)) {\r\n    \t\t\treturn endpoints[0];\r\n    \t\t}\r\n    \t\tthrow new InvalidVertexException();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean areAdjacent(Vertex&lt;V&gt; v, Vertex&lt;V&gt; w) {\r\n    \t\tfor (EdgeListEdge edge: edges) {\r\n    \t\t\tif ((edge.start.equals(v)) &amp;&amp; (edge.end.equals(w))) return true;\r\n    \t\t\tif ((edge.end.equals(v)) &amp;&amp; (edge.start.equals(w))) return true;\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic V replace(Vertex&lt;V&gt; v, V x) {\r\n    \t\tEdgeListVertex vertex = (EdgeListVertex) v;\r\n    \t\tV temp = vertex.element;\r\n    \t\tvertex.element = x;\r\n    \t\treturn temp;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E replace(Edge&lt;E&gt; e, E x) {\r\n    \t\tEdgeListEdge edge = (EdgeListEdge) e;\r\n    \t\tE temp = edge.element;\r\n    \t\tedge.element = x;\r\n    \t\treturn temp;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Vertex&lt;V&gt; insertVertex(V v) {\r\n    \t\tEdgeListVertex vertex = new EdgeListVertex(v);\r\n    \t\tPosition&lt;EdgeListVertex&gt; position = vertices.insertLast(vertex);\r\n    \t\tvertex.position = position;\r\n    \t\treturn vertex;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Edge&lt;E&gt; insertEdge(Vertex&lt;V&gt; v, Vertex&lt;V&gt; w, E o) {\r\n    \t\tEdgeListEdge edge = new EdgeListEdge((EdgeListVertex) v, (EdgeListVertex) w, o);\r\n    \t\tPosition&lt;EdgeListEdge&gt; position = edges.insertLast(edge);\r\n    \t\tedge.position = position;\r\n    \t\treturn edge;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic V removeVertex(Vertex&lt;V&gt; v) {\r\n    \t\tIterator&lt;Edge&lt;E&gt;&gt; it = incidentEdges(v).iterator();\r\n    \t\twhile (it.hasNext()) it.remove();\r\n    \t\t\r\n    \t\tEdgeListVertex vertex = (EdgeListVertex) v;\r\n    \t\tvertices.remove(vertex.position);\r\n    \t\treturn vertex.element;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E removeEdge(Edge&lt;E&gt; e) {\r\n    \t\tEdgeListEdge edge = (EdgeListEdge) e;\r\n    \t\tedges.remove(edge.position);\r\n    \t\treturn edge.element;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;Edge&lt;E&gt;&gt; incidentEdges(Vertex&lt;V&gt; v) {\r\n    \t\tLinkedList&lt;Edge&lt;E&gt;&gt; list = new LinkedList&lt;Edge&lt;E&gt;&gt;();\r\n    \t\t\r\n    \t\tfor (EdgeListEdge edge : edges) {\r\n    \t\t\tif (edge.start.equals(v)) list.insertLast(edge);\r\n    \t\t\tif (edge.end.equals(v)) list.insertLast(edge);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn list;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;Vertex&lt;V&gt;&gt; vertices() {\r\n    \t\tLinkedList&lt;Vertex&lt;V&gt;&gt; list = new LinkedList&lt;Vertex&lt;V&gt;&gt;();\r\n    \t\tfor (EdgeListVertex vertex : vertices) {\r\n    \t\t\tlist.insertLast(vertex);\r\n    \t\t}\r\n    \t\treturn list;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic List&lt;Edge&lt;E&gt;&gt; edges() {\r\n    \t\tLinkedList&lt;Edge&lt;E&gt;&gt; list = new LinkedList&lt;Edge&lt;E&gt;&gt;();\r\n    \t\tfor (EdgeListEdge edge : edges) {\r\n    \t\t\tlist.insertLast(edge);\r\n    \t\t}\r\n    \t\treturn list;\r\n    \t}\r\n    \r\n    }\r\n\r\nAny tips?\r\n\r\n\r\n","title":"How To Create A Java Graph File from .txt file","body":"<p>I am trying to create a graph file .I have to read in values from a .gra file(which I think is a .txt file).We were told to tokenise lines based on a space in the format <code>&lt;vertex&gt; &lt;name&gt; &lt;x-coord&gt; &lt;y-coord&gt;</code>,same for edge</p>\n\n<p>I had a look at a couple of related questions,but still cant find the answer.</p>\n\n<p>Here's the code I was given:</p>\n\n<pre><code>        public EdgeListVertex(V element) {\n            this.element = element;\n        }\n\n        @Override\n        public V element() {\n            return element;\n        }\n\n        public String toString() {\n            return element.toString();\n        }\n    }\n\n    private class EdgeListEdge implements Edge&lt;E&gt; {\n        Position&lt;EdgeListEdge&gt; position;\n        E element;\n        EdgeListVertex start, end;\n\n\n        public EdgeListEdge(EdgeListVertex start, EdgeListVertex end, E element) {\n            this.start = start;\n            this.end = end;\n            this.element = element;\n        }\n\n        @Override\n        public E element() {\n            return element;\n        }\n\n        public String toString() {\n            return element.toString();\n        }\n    }\n\n    private List&lt;EdgeListVertex&gt; vertices;\n    private List&lt;EdgeListEdge&gt; edges;\n\n\n    public EdgeListGraph() {\n        vertices = new LinkedList&lt;EdgeListVertex&gt;();\n        edges = new LinkedList&lt;EdgeListEdge&gt;();\n\n    }\n\n    @SuppressWarnings(\"unchecked\")\n    @Override\n    public Vertex&lt;V&gt;[] endVertices(Edge&lt;E&gt; e) {\n        EdgeListEdge edge = (EdgeListEdge) e;\n        Vertex&lt;V&gt;[] endpoints = (Vertex&lt;V&gt;[]) new Vertex[2];\n        endpoints[0] = edge.start;\n        endpoints[1] = edge.end;\n        return endpoints;\n    }\n\n    @Override\n    public Vertex&lt;V&gt; opposite(Vertex&lt;V&gt; v, Edge&lt;E&gt; e) {\n        Vertex&lt;V&gt;[] endpoints = endVertices(e);\n        if (endpoints[0].equals(v)) {\n            return endpoints[1];\n        } else if (endpoints[1].equals(v)) {\n            return endpoints[0];\n        }\n        throw new InvalidVertexException();\n    }\n\n    @Override\n    public boolean areAdjacent(Vertex&lt;V&gt; v, Vertex&lt;V&gt; w) {\n        for (EdgeListEdge edge: edges) {\n            if ((edge.start.equals(v)) &amp;&amp; (edge.end.equals(w))) return true;\n            if ((edge.end.equals(v)) &amp;&amp; (edge.start.equals(w))) return true;\n        }\n        return false;\n    }\n\n    @Override\n    public V replace(Vertex&lt;V&gt; v, V x) {\n        EdgeListVertex vertex = (EdgeListVertex) v;\n        V temp = vertex.element;\n        vertex.element = x;\n        return temp;\n    }\n\n    @Override\n    public E replace(Edge&lt;E&gt; e, E x) {\n        EdgeListEdge edge = (EdgeListEdge) e;\n        E temp = edge.element;\n        edge.element = x;\n        return temp;\n    }\n\n    @Override\n    public Vertex&lt;V&gt; insertVertex(V v) {\n        EdgeListVertex vertex = new EdgeListVertex(v);\n        Position&lt;EdgeListVertex&gt; position = vertices.insertLast(vertex);\n        vertex.position = position;\n        return vertex;\n    }\n\n    @Override\n    public Edge&lt;E&gt; insertEdge(Vertex&lt;V&gt; v, Vertex&lt;V&gt; w, E o) {\n        EdgeListEdge edge = new EdgeListEdge((EdgeListVertex) v, (EdgeListVertex) w, o);\n        Position&lt;EdgeListEdge&gt; position = edges.insertLast(edge);\n        edge.position = position;\n        return edge;\n    }\n\n    @Override\n    public V removeVertex(Vertex&lt;V&gt; v) {\n        Iterator&lt;Edge&lt;E&gt;&gt; it = incidentEdges(v).iterator();\n        while (it.hasNext()) it.remove();\n\n        EdgeListVertex vertex = (EdgeListVertex) v;\n        vertices.remove(vertex.position);\n        return vertex.element;\n    }\n\n    @Override\n    public E removeEdge(Edge&lt;E&gt; e) {\n        EdgeListEdge edge = (EdgeListEdge) e;\n        edges.remove(edge.position);\n        return edge.element;\n    }\n\n    @Override\n    public List&lt;Edge&lt;E&gt;&gt; incidentEdges(Vertex&lt;V&gt; v) {\n        LinkedList&lt;Edge&lt;E&gt;&gt; list = new LinkedList&lt;Edge&lt;E&gt;&gt;();\n\n        for (EdgeListEdge edge : edges) {\n            if (edge.start.equals(v)) list.insertLast(edge);\n            if (edge.end.equals(v)) list.insertLast(edge);\n        }\n\n        return list;\n    }\n\n    @Override\n    public List&lt;Vertex&lt;V&gt;&gt; vertices() {\n        LinkedList&lt;Vertex&lt;V&gt;&gt; list = new LinkedList&lt;Vertex&lt;V&gt;&gt;();\n        for (EdgeListVertex vertex : vertices) {\n            list.insertLast(vertex);\n        }\n        return list;\n    }\n\n    @Override\n    public List&lt;Edge&lt;E&gt;&gt; edges() {\n        LinkedList&lt;Edge&lt;E&gt;&gt; list = new LinkedList&lt;Edge&lt;E&gt;&gt;();\n        for (EdgeListEdge edge : edges) {\n            list.insertLast(edge);\n        }\n        return list;\n    }\n\n}\n</code></pre>\n\n<p>Any tips?</p>\n"},{"tags":["java","file","dataoutputstream"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1658712829,"post_id":73101877,"comment_id":129111529,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658696444,"creation_date":1658696444,"answer_id":73102015,"question_id":73101877,"body_markdown":"As `java.io.DataOutputStream` wraps around just any other `java.io.OutputStream` (you have to specify an instance in the constructor) I would recommend that you use a `java.io.ByteArrayOutputStream` to collect the data in-memory and get the String of that later with the `.toString()` method.\r\n\r\nExample:\r\n``` lang-java\r\nByteArrayOutputStream inMemoryOutput = new ByteArrayOutputStream();\r\nDataOutputStream dataOutputStream = new DataOutputStream(inMemoryOutput);\r\n\r\n// use dataOutputStream here as intended\r\n\r\n// and then get the String data\r\nSystem.out.println(inMemoryOutput.toString());\r\n```\r\n\r\nIf the encoding of the collected bytes does not match the system default encoding, you might have to specify a Charset as parameter of the `toString`.","title":"How to write to a dummy DataOutputStream without using files?","body":"<p>As <code>java.io.DataOutputStream</code> wraps around just any other <code>java.io.OutputStream</code> (you have to specify an instance in the constructor) I would recommend that you use a <code>java.io.ByteArrayOutputStream</code> to collect the data in-memory and get the String of that later with the <code>.toString()</code> method.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ByteArrayOutputStream inMemoryOutput = new ByteArrayOutputStream();\nDataOutputStream dataOutputStream = new DataOutputStream(inMemoryOutput);\n\n// use dataOutputStream here as intended\n\n// and then get the String data\nSystem.out.println(inMemoryOutput.toString());\n</code></pre>\n<p>If the encoding of the collected bytes does not match the system default encoding, you might have to specify a Charset as parameter of the <code>toString</code>.</p>\n"}],"owner":{"account_id":7269580,"reputation":3,"user_id":5543138,"display_name":"DMan16"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1658712788,"accepted_answer_id":73102015,"answer_count":1,"score":-2,"last_activity_date":1658696444,"creation_date":1658695183,"question_id":73101877,"body_markdown":"I&#39;m using a specific library (unfortunately can&#39;t be avoided) that writes some information from a class to a file using a utility function that receives a DataOutputStream as the input.&lt;br/&gt;\r\nI would like to get the resulting file&#39;s content as a String without actually creating a file and writing into it as the writing can be pretty &quot;taxing&quot; (1000+ lines).&lt;br/&gt;\r\nIs this possible to do by using a dummy DataOutputStream or some other method and without resorting to creating a temporary file and reading the result from there?\r\n\r\n**P.S:** the final method that actually writes to the DataOutputStream changes from time to time so I would prefer not actually copy-paste it and redo it every time.","title":"How to write to a dummy DataOutputStream without using files?","body":"<p>I'm using a specific library (unfortunately can't be avoided) that writes some information from a class to a file using a utility function that receives a DataOutputStream as the input.<br/>\nI would like to get the resulting file's content as a String without actually creating a file and writing into it as the writing can be pretty &quot;taxing&quot; (1000+ lines).<br/>\nIs this possible to do by using a dummy DataOutputStream or some other method and without resorting to creating a temporary file and reading the result from there?</p>\n<p><strong>P.S:</strong> the final method that actually writes to the DataOutputStream changes from time to time so I would prefer not actually copy-paste it and redo it every time.</p>\n"},{"tags":["java","spring","mongodb","spring-data-mongodb"],"comments":[{"owner":{"account_id":15401119,"reputation":376,"user_id":11112728,"display_name":"Rau&#241;&#241;"},"score":0,"creation_date":1658090018,"post_id":72758036,"comment_id":128958882,"body_markdown":"After a bit of debugging, all I could found was that indeed when the .save is performed, I get the null values. If in the next line I try to fetch foo from the DB, I get all the values. I&#39;m not sure why .save() method is not able to fetch the DBRef data(only the Id...)","body":"After a bit of debugging, all I could found was that indeed when the .save is performed, I get the null values. If in the next line I try to fetch foo from the DB, I get all the values. I&#39;m not sure why .save() method is not able to fetch the DBRef data(only the Id...)"}],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658696268,"creation_date":1658511710,"answer_id":73084167,"question_id":72758036,"body_markdown":"If you check source code of `save` method:\r\n\r\n    public &lt;S extends T&gt; S save(S entity) {\r\n    \r\n    \t\tAssert.notNull(entity, &quot;Entity must not be null.&quot;);\r\n    \r\n    \t\tif (entityInformation.isNew(entity)) {\r\n    \t\t\tem.persist(entity);\r\n    \t\t\treturn entity;\r\n    \t\t} else {\r\n    \t\t\treturn em.merge(entity);\r\n    \t\t}\r\n    \t}\r\n\r\n\r\nWhat it does is to check if this entity on which you called save is new one or existing. If entity is existing entity -- which is the case for you, then it call `merge` rather than `persist`.\r\n\r\nNow, what actually happens in merge is it merge &amp; returns the managed instance that the state was merged with. What it means is it either returns entity which exists  PersistenceContext or creates a new instance all along.\r\n\r\n In any case, it will copy the state from the supplied entity, and return a managed copy. What it means in database terminology is it does `upsert` (INSERT or UPDATE) scenario.\r\n\r\n\r\nMeaning, it will insert if its new or update if its existing. Now in your case, since its already present entity, so it does update.\r\n\r\nIn update case,  the details which got updated are returned &amp; other fields which didn&#39;t get updated are not returned.  Means in your case, except `bar_name` everything else got updated in database against `id = ObjectId(&#39;62b795ea78aa537285762a1f&#39;)` as that&#39;s what you supplied in your input to save.\r\n\r\n\r\nOnce update successful, it returned what got updated &amp; not end result &amp; that is reason you will see `bar_name` as null when you directly do\r\n\r\n`return repository.save(foo);`  for existing record.\r\n\r\n\r\nIf you really want to return full entity &amp; not what got updated in database, you must do something like (provided your input will not necessarily containing all fields of entity) : \r\n\r\n\r\n\r\n    @PostMapping\r\n    public Foo addFoo(@RequestBody Foo foo) {\r\n        repository.save(foo);\r\n        return repository.findById(foo.getId()).get(); // here you can even throw exception as if entity didn&#39;t get saved as a part of save operation.\r\n    }\r\n\r\n\r\nFurther read : http://spitballer.blogspot.com/2010/04/jpa-persisting-vs-merging-entites.html","title":"How can I make mongoDB return all the data from DBRef using springboot?","body":"<p>If you check source code of <code>save</code> method:</p>\n<pre><code>public &lt;S extends T&gt; S save(S entity) {\n\n        Assert.notNull(entity, &quot;Entity must not be null.&quot;);\n\n        if (entityInformation.isNew(entity)) {\n            em.persist(entity);\n            return entity;\n        } else {\n            return em.merge(entity);\n        }\n    }\n</code></pre>\n<p>What it does is to check if this entity on which you called save is new one or existing. If entity is existing entity -- which is the case for you, then it call <code>merge</code> rather than <code>persist</code>.</p>\n<p>Now, what actually happens in merge is it merge &amp; returns the managed instance that the state was merged with. What it means is it either returns entity which exists  PersistenceContext or creates a new instance all along.</p>\n<p>In any case, it will copy the state from the supplied entity, and return a managed copy. What it means in database terminology is it does <code>upsert</code> (INSERT or UPDATE) scenario.</p>\n<p>Meaning, it will insert if its new or update if its existing. Now in your case, since its already present entity, so it does update.</p>\n<p>In update case,  the details which got updated are returned &amp; other fields which didn't get updated are not returned.  Means in your case, except <code>bar_name</code> everything else got updated in database against <code>id = ObjectId('62b795ea78aa537285762a1f')</code> as that's what you supplied in your input to save.</p>\n<p>Once update successful, it returned what got updated &amp; not end result &amp; that is reason you will see <code>bar_name</code> as null when you directly do</p>\n<p><code>return repository.save(foo);</code>  for existing record.</p>\n<p>If you really want to return full entity &amp; not what got updated in database, you must do something like (provided your input will not necessarily containing all fields of entity) :</p>\n<pre><code>@PostMapping\npublic Foo addFoo(@RequestBody Foo foo) {\n    repository.save(foo);\n    return repository.findById(foo.getId()).get(); // here you can even throw exception as if entity didn't get saved as a part of save operation.\n}\n</code></pre>\n<p>Further read : <a href=\"http://spitballer.blogspot.com/2010/04/jpa-persisting-vs-merging-entites.html\" rel=\"nofollow noreferrer\">http://spitballer.blogspot.com/2010/04/jpa-persisting-vs-merging-entites.html</a></p>\n"},{"tags":[],"owner":{"account_id":80984,"reputation":825,"user_id":228649,"display_name":"Corneil du Plessis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658688139,"creation_date":1658687688,"answer_id":73101034,"question_id":72758036,"body_markdown":"The main question would be how you would describe the relationships between Bar and Foo.\r\nYou seem to be treat it like a ManyToOne but the reference is store on Bar like a foreigh key in a relational database.\r\nBar points to Foo implies the Foo is the owner and therefore you could annotated Foo having @DBRef Set&lt;Bar&gt; bars.\r\nIf the relationship is bidirectional you need to annotate both sides.\r\n","title":"How can I make mongoDB return all the data from DBRef using springboot?","body":"<p>The main question would be how you would describe the relationships between Bar and Foo.\nYou seem to be treat it like a ManyToOne but the reference is store on Bar like a foreigh key in a relational database.\nBar points to Foo implies the Foo is the owner and therefore you could annotated Foo having @DBRef Set bars.\nIf the relationship is bidirectional you need to annotate both sides.</p>\n"}],"owner":{"account_id":15401119,"reputation":376,"user_id":11112728,"display_name":"Rau&#241;&#241;"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73084167,"answer_count":2,"score":2,"last_activity_date":1658696268,"creation_date":1656201148,"question_id":72758036,"body_markdown":"I have three classes in my Java project:\r\n\r\n    @Document(collection = &quot;foos&quot;)\r\n    public class Foo {\r\n     @Id\r\n     private String id;\r\n     private String foo_name;\r\n     private Set&lt;Bar&gt; bars;\r\n    }\r\n\r\n    @Document(collection = &quot;bazs&quot;)\r\n    public class Baz {\r\n     @Id\r\n     private String id;\r\n     private String baz_name;\r\n    }\r\n\r\n    public class Bar {\r\n     @DBRef\r\n     private Baz baz;\r\n     private String bar_name;\r\n    }\r\n\r\nThen, I have `/foo` POST endpoint that accepts the body of a foo and stores it in a database.\r\n    \r\n    @PostMapping\r\n    public Foo addFoo(@RequestBody Foo foo) {\r\n        return repository.save(foo);\r\n    }\r\n\r\nGiven a `Baz` already stored in mongoDB with the `id = ObjectId(&#39;62b795ea78aa537285762a1f&#39;)` and `name = the baz name`, and I can call the `/foo` endpoint with the following body:\r\n\r\n    { &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot; }, &quot;bar_name&quot; = &quot;the bar name&quot;] }\r\n\r\nI get a 200 OK, but the response looks like this:\r\n\r\n    { &quot;id&quot; = &quot;62b6e461cf1993ef423a28b3&quot;, &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot;, &quot;baz_name&quot; = null } , &quot;bar_name&quot; = &quot;the bar name&quot;]\r\n\r\nIf I use the GET endpoint `/foo/62b6e461cf1993ef423a28b3`, I do get all the @DBRef info:\r\n\r\n    { &quot;id&quot; = &quot;62b6e461cf1993ef423a28b3&quot;, &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot;, &quot;baz_name&quot; = &quot;the baz name&quot; } , &quot;bar_name&quot; = &quot;the bar name&quot;]\r\n\r\nNote the difference in the `baz_name` variable.\r\n\r\nHow can I make my code return all the data once I save a new item foo? Or, at least, don&#39;t send null values that are not real\r\n ","title":"How can I make mongoDB return all the data from DBRef using springboot?","body":"<p>I have three classes in my Java project:</p>\n<pre><code>@Document(collection = &quot;foos&quot;)\npublic class Foo {\n @Id\n private String id;\n private String foo_name;\n private Set&lt;Bar&gt; bars;\n}\n\n@Document(collection = &quot;bazs&quot;)\npublic class Baz {\n @Id\n private String id;\n private String baz_name;\n}\n\npublic class Bar {\n @DBRef\n private Baz baz;\n private String bar_name;\n}\n</code></pre>\n<p>Then, I have <code>/foo</code> POST endpoint that accepts the body of a foo and stores it in a database.</p>\n<pre><code>@PostMapping\npublic Foo addFoo(@RequestBody Foo foo) {\n    return repository.save(foo);\n}\n</code></pre>\n<p>Given a <code>Baz</code> already stored in mongoDB with the <code>id = ObjectId('62b795ea78aa537285762a1f')</code> and <code>name = the baz name</code>, and I can call the <code>/foo</code> endpoint with the following body:</p>\n<pre><code>{ &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot; }, &quot;bar_name&quot; = &quot;the bar name&quot;] }\n</code></pre>\n<p>I get a 200 OK, but the response looks like this:</p>\n<pre><code>{ &quot;id&quot; = &quot;62b6e461cf1993ef423a28b3&quot;, &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot;, &quot;baz_name&quot; = null } , &quot;bar_name&quot; = &quot;the bar name&quot;]\n</code></pre>\n<p>If I use the GET endpoint <code>/foo/62b6e461cf1993ef423a28b3</code>, I do get all the @DBRef info:</p>\n<pre><code>{ &quot;id&quot; = &quot;62b6e461cf1993ef423a28b3&quot;, &quot;foo_name&quot; = &quot;the foo name&quot;, &quot;bars&quot;= [&quot;baz&quot;= { &quot;id&quot; = &quot;62b795ea78aa537285762a1f&quot;, &quot;baz_name&quot; = &quot;the baz name&quot; } , &quot;bar_name&quot; = &quot;the bar name&quot;]\n</code></pre>\n<p>Note the difference in the <code>baz_name</code> variable.</p>\n<p>How can I make my code return all the data once I save a new item foo? Or, at least, don't send null values that are not real</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":2215707,"reputation":85,"user_id":1956378,"display_name":"dbiagi"},"score":0,"creation_date":1658693798,"post_id":73101598,"comment_id":129108822,"body_markdown":"Can you show the service code where you map from entity to your DTO?","body":"Can you show the service code where you map from entity to your DTO?"},{"owner":{"account_id":2303324,"reputation":915,"user_id":2023141,"accept_rate":20,"display_name":"user2023141"},"score":0,"creation_date":1658694729,"post_id":73101598,"comment_id":129109025,"body_markdown":"I&#39;ve added the service code","body":"I&#39;ve added the service code"},{"owner":{"account_id":6556336,"reputation":1128,"user_id":5128343,"display_name":"Jelaby"},"score":0,"creation_date":1658695682,"post_id":73101598,"comment_id":129109199,"body_markdown":"It would help future searchers if you copied and pasted the error stack trace, rather than inserting a screenshot.","body":"It would help future searchers if you copied and pasted the error stack trace, rather than inserting a screenshot."},{"owner":{"account_id":6556336,"reputation":1128,"user_id":5128343,"display_name":"Jelaby"},"score":0,"creation_date":1658697404,"post_id":73101598,"comment_id":129109501,"body_markdown":"Seriously @user2023141, it would help if you copied and pasted the stack trace instead of giving an image. While similar questions have been asked before, most of the questions are people who didn&#39;t realise that you had to pass the parameters at all (!) or are questions about the complexities of generics. I&#39;m astonished to find that noone&#39;s asked a question about what this error message means (which is that you&#39;re passing the wrong type).","body":"Seriously @user2023141, it would help if you copied and pasted the stack trace instead of giving an image. While similar questions have been asked before, most of the questions are people who didn&#39;t realise that you had to pass the parameters at all (!) or are questions about the complexities of generics. I&#39;m astonished to find that noone&#39;s asked a question about what this error message means (which is that you&#39;re passing the wrong type)."}],"answers":[{"tags":[],"owner":{"account_id":1653300,"reputation":968,"user_id":1523450,"display_name":"cdr89"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658695849,"creation_date":1658695514,"answer_id":73101914,"question_id":73101598,"body_markdown":"I see you are using a Converter coming from Spring (does not implement Function).\r\nIf you use the one in guava 27.0, the Converter abstract class (implements Function interface) has 2 abstract methods to implement:\r\n\r\n    import com.google.common.base.Converter;\r\n    //...\r\n\r\n        Page&lt;StockDto&gt; dtoPage = stocks.map(new Converter&lt;Stock, StockDto&gt;() {\r\n            @Override\r\n            protected StockDto doForward(final Stock stock) {\r\n                StockDto stockDto = new StockDto();\r\n                // ...\r\n                return stockDto;\r\n            }\r\n\r\n            @Override\r\n            protected Stock doBackward(final StockDto dto) {\r\n                // probably you don&#39;t need this, can just return a null,\r\n                return null;\r\n            }\r\n        });","title":"Spring : how to map Page&lt;Entity&gt; to Page&lt;Object&gt;","body":"<p>I see you are using a Converter coming from Spring (does not implement Function).\nIf you use the one in guava 27.0, the Converter abstract class (implements Function interface) has 2 abstract methods to implement:</p>\n<pre><code>import com.google.common.base.Converter;\n//...\n\n    Page&lt;StockDto&gt; dtoPage = stocks.map(new Converter&lt;Stock, StockDto&gt;() {\n        @Override\n        protected StockDto doForward(final Stock stock) {\n            StockDto stockDto = new StockDto();\n            // ...\n            return stockDto;\n        }\n\n        @Override\n        protected Stock doBackward(final StockDto dto) {\n            // probably you don't need this, can just return a null,\n            return null;\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6556336,"reputation":1128,"user_id":5128343,"display_name":"Jelaby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658695580,"creation_date":1658695580,"answer_id":73101918,"question_id":73101598,"body_markdown":"The error is pretty clear: `Page.map()` accepts a `Function`, but you&#39;ve given it a `Converter`. Replace `new Converter(` with `new Function(` and `convert(` with `apply(` and it&#39;ll compile:\r\n```java\r\nPage&lt;StockDto&gt; dtoPage = stocks.map(new Function&lt;Stock, StockDto&gt;() {\r\n    @Override\r\n    public StockDto apply(Stock entity) {\r\n        StockDto stockDto = new StockDto();\r\n        ...\r\n        return stockDto;\r\n    }\r\n});\r\n```\r\nBetter yet, use a lambda:\r\n```java\r\nPage&lt;StockDto&gt; dtoPage = stocks.map(entity -&gt; {\r\n        StockDto stockDto = new StockDto();\r\n        ...\r\n        return stockDto;\r\n    });\r\n```\r\n","title":"Spring : how to map Page&lt;Entity&gt; to Page&lt;Object&gt;","body":"<p>The error is pretty clear: <code>Page.map()</code> accepts a <code>Function</code>, but you've given it a <code>Converter</code>. Replace <code>new Converter(</code> with <code>new Function(</code> and <code>convert(</code> with <code>apply(</code> and it'll compile:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Page&lt;StockDto&gt; dtoPage = stocks.map(new Function&lt;Stock, StockDto&gt;() {\n    @Override\n    public StockDto apply(Stock entity) {\n        StockDto stockDto = new StockDto();\n        ...\n        return stockDto;\n    }\n});\n</code></pre>\n<p>Better yet, use a lambda:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Page&lt;StockDto&gt; dtoPage = stocks.map(entity -&gt; {\n        StockDto stockDto = new StockDto();\n        ...\n        return stockDto;\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658695690,"creation_date":1658695690,"answer_id":73101933,"question_id":73101598,"body_markdown":"I would like to suggest a slightly different approach, create a data projection and let the Repository just return a page of the DTO for you.\r\nHere&#39;s an example assuming that your DTO contains a `name` and `id` field.\r\n\r\n    public interface StockDTOView {\r\n       public getName();\r\n       public getId();\r\n    }\r\n\r\nThe repository method would be written like this:\r\n\r\n    Page&lt;StockDTOView&gt; findAllProjectedBy(Pageable pageable);\r\n\r\nWhen you call this method on your repository, you&#39;ll get back a page of the projection, there&#39;s no need to do any conversions.","title":"Spring : how to map Page&lt;Entity&gt; to Page&lt;Object&gt;","body":"<p>I would like to suggest a slightly different approach, create a data projection and let the Repository just return a page of the DTO for you.\nHere's an example assuming that your DTO contains a <code>name</code> and <code>id</code> field.</p>\n<pre><code>public interface StockDTOView {\n   public getName();\n   public getId();\n}\n</code></pre>\n<p>The repository method would be written like this:</p>\n<pre><code>Page&lt;StockDTOView&gt; findAllProjectedBy(Pageable pageable);\n</code></pre>\n<p>When you call this method on your repository, you'll get back a page of the projection, there's no need to do any conversions.</p>\n"}],"owner":{"account_id":2303324,"reputation":915,"user_id":2023141,"accept_rate":20,"display_name":"user2023141"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73101918,"answer_count":3,"score":0,"last_activity_date":1658695849,"creation_date":1658692648,"question_id":73101598,"body_markdown":"I have a Repositoy (StockRepository ) class which extends from JpaRepository.\r\nWhen calling the method  findAll(Pageable pageable);  the return result is  `Page&lt;Stock&gt;`.\r\n\r\nNow I want to convert the  `Page&lt;Stock&gt;` to  `Page&lt;StockDto&gt;`. But the compiler give the error below.\r\nHow can I correct this Compile error ? \r\n\r\n\r\n    import org.springframework.core.convert.converter.Converter;\r\n    ...\r\n        public Page&lt;StockDto&gt; getAllStocksPageable(int pageNumber, int pageSize) {\r\n        \r\n        \tPageable pageable = PageRequest.of(pageNumber, pageSize);\r\n        \tPage&lt;Stock&gt; stocks = stockRepository.findAll(pageable);\r\n        \r\n        \tPage&lt;StockDto&gt; dtoPage = stocks.map(new Converter&lt;Stock, StockDto&gt;() {\r\n        \t\t@Override\r\n        \t\tpublic StockDto convert(Stock entity) {\r\n        \t\t\tStockDto stockDto = new StockDto();\r\n                    ...\r\n        \t\t\treturn stockDto;\r\n        \t\t}\r\n        \r\n        \t});\r\n        \r\n        \treturn null;\r\n        \r\n        }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;stock&quot;)\r\n    public class Stock {\r\n            ....\r\n    }\r\n\r\n\r\n    // Pojo\r\n    public class StockDto {\r\n        ....\r\n     }\r\n\r\n\r\n    @Repository\r\n    public interface StockRepository extends JpaRepository&lt;Stock, Integer&gt; {\r\n        ....\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bpERi.png","title":"Spring : how to map Page&lt;Entity&gt; to Page&lt;Object&gt;","body":"<p>I have a Repositoy (StockRepository ) class which extends from JpaRepository.\nWhen calling the method  findAll(Pageable pageable);  the return result is  <code>Page&lt;Stock&gt;</code>.</p>\n<p>Now I want to convert the  <code>Page&lt;Stock&gt;</code> to  <code>Page&lt;StockDto&gt;</code>. But the compiler give the error below.\nHow can I correct this Compile error ?</p>\n<pre><code>import org.springframework.core.convert.converter.Converter;\n...\n    public Page&lt;StockDto&gt; getAllStocksPageable(int pageNumber, int pageSize) {\n    \n        Pageable pageable = PageRequest.of(pageNumber, pageSize);\n        Page&lt;Stock&gt; stocks = stockRepository.findAll(pageable);\n    \n        Page&lt;StockDto&gt; dtoPage = stocks.map(new Converter&lt;Stock, StockDto&gt;() {\n            @Override\n            public StockDto convert(Stock entity) {\n                StockDto stockDto = new StockDto();\n                ...\n                return stockDto;\n            }\n    \n        });\n    \n        return null;\n    \n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/bpERi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bpERi.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>@Entity\n@Table(name = &quot;stock&quot;)\npublic class Stock {\n        ....\n}\n\n\n// Pojo\npublic class StockDto {\n    ....\n }\n\n\n@Repository\npublic interface StockRepository extends JpaRepository&lt;Stock, Integer&gt; {\n    ....\n}\n</code></pre>\n"},{"tags":["java","constructor"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1658425980,"post_id":73070705,"comment_id":129054677,"body_markdown":"Does `A` actually contain `B` in your problem domain? Or does `A` simply assume some properties of `B`?","body":"Does <code>A</code> actually contain <code>B</code> in your problem domain? Or does <code>A</code> simply assume some properties of <code>B</code>?"},{"owner":{"account_id":20098273,"reputation":39,"user_id":14737335,"display_name":"pillow"},"score":0,"creation_date":1658426458,"post_id":73070705,"comment_id":129054834,"body_markdown":"`A` assumes a subset of properties from `B`. `A` also contains a subset of properties from another Entity class.","body":"<code>A</code> assumes a subset of properties from <code>B</code>. <code>A</code> also contains a subset of properties from another Entity class."},{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1658426507,"post_id":73070705,"comment_id":129054847,"body_markdown":"How are A and B related?","body":"How are A and B related?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1658426726,"post_id":73070705,"comment_id":129054919,"body_markdown":"@pillow then, imho, it shouldn&#39;t have a field of type `B`.","body":"@pillow then, imho, it shouldn&#39;t have a field of type <code>B</code>."},{"owner":{"account_id":20098273,"reputation":39,"user_id":14737335,"display_name":"pillow"},"score":0,"creation_date":1658427055,"post_id":73070705,"comment_id":129055026,"body_markdown":"@ChengThao I have added some additional details to the end of my question which should hopefully answer your question.\n\nFedericoklezCulloca thanks for your thoughts. Is there any literature you&#39;re aware of that explains why this makes the most sense?","body":"@ChengThao I have added some additional details to the end of my question which should hopefully answer your question.  FedericoklezCulloca thanks for your thoughts. Is there any literature you&#39;re aware of that explains why this makes the most sense?"},{"owner":{"account_id":16826591,"reputation":89,"user_id":12165732,"display_name":"Timo"},"score":0,"creation_date":1658427078,"post_id":73070705,"comment_id":129055033,"body_markdown":"Using the B class in the constructor of A results in a strong coupling of both classes.\nI would avoid the dependency on B to A.","body":"Using the B class in the constructor of A results in a strong coupling of both classes. I would avoid the dependency on B to A."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1658427137,"post_id":73070705,"comment_id":129055057,"body_markdown":"@pillow no, just professional experience, sorry :( . By the way, this seems like the kind of job for mapstruct.","body":"@pillow no, just professional experience, sorry :( . By the way, this seems like the kind of job for mapstruct."},{"owner":{"account_id":20098273,"reputation":39,"user_id":14737335,"display_name":"pillow"},"score":0,"creation_date":1658427432,"post_id":73070705,"comment_id":129055162,"body_markdown":"@FedericoklezCulloca Wow, mapstruct looks very much like something that would be useful in this use-case. Thank you!","body":"@FedericoklezCulloca Wow, mapstruct looks very much like something that would be useful in this use-case. Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658427785,"creation_date":1658427785,"answer_id":73071009,"question_id":73070705,"body_markdown":"Maybe this is what you are looking for.  A is a more general type and B is a more specialize type of A.  For example, a Person class and a Student class.  \r\n\r\n```\r\npublic class A {\r\n    private int x;\r\n    private int y;\r\n    private List&lt;&gt; list;\r\n\r\n    public A(int x, int y, List&lt;&gt; list) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.list = b.getList();\r\n    }\r\n}\r\n\r\npublic class B extends A {\r\n    private int z;\r\n    private String string;\r\n    private Set&lt;&gt; set;\r\n    \r\n    public B(int x, int y, List&lt;&gt; list, String string, Set&lt;&gt; set){\r\n       super(x,y,list);\r\n       this.string = string;\r\n       this.set = set;\r\n    }\r\n}\r\n```","title":"In my constructor, is it bad practice to set class variables by calling getters on an object I pass into a constructor?","body":"<p>Maybe this is what you are looking for.  A is a more general type and B is a more specialize type of A.  For example, a Person class and a Student class.</p>\n<pre><code>public class A {\n    private int x;\n    private int y;\n    private List&lt;&gt; list;\n\n    public A(int x, int y, List&lt;&gt; list) {\n        this.x = x;\n        this.y = y;\n        this.list = b.getList();\n    }\n}\n\npublic class B extends A {\n    private int z;\n    private String string;\n    private Set&lt;&gt; set;\n    \n    public B(int x, int y, List&lt;&gt; list, String string, Set&lt;&gt; set){\n       super(x,y,list);\n       this.string = string;\n       this.set = set;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25766864,"reputation":43,"user_id":19516617,"display_name":"camelCase"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658431915,"creation_date":1658431389,"answer_id":73071632,"question_id":73070705,"body_markdown":"With all the information that you have given, your colleague&#39;s suggestion of having ```B``` object as a class field of ```A``` is a bad design. As well as passing ```B``` on the ```A``` constructor.\r\n\r\nThe main problem here is on the ```A``` class constructor, not it&#39;s field.\r\nPassing ```B``` object directly to A constructor is a bad design/practice even if ```A``` takes a lot of properties from ```B```. If someone were to construct an ```A``` object that takes ```B``` as an argument, most of the time they would assume that ```A``` uses ```B``` or that they have a strong relationship. If your concern here is avoiding a lengthy constructor, then you&#39;re better off using ```A``` setters to take the ```B``` properties as shown below:\r\n```\r\n   A aClass = new A();\r\n   aclass.setX(bClass.getX());\r\n   aclass.setY(bClass.getY());\r\n```\r\nAnother way is creating a method in class ```A``` that takes required properties from ```B``` by taking ```B``` as an argument like:\r\n```\r\n  public class A {\r\n      \\\\fields\r\n      public void setRequiredPropertiesFromBClass(B bClass) {\r\n          this.x = bClass.getX();\r\n          \\\\\\other getters\r\n     }\r\n  }\r\n```\r\nThat way the intent of your code is clear, which is ```A``` needs certain properties from ```B``` not ```B``` itself. The example above can still be improved. I couldn&#39;t think of much better method name since I don&#39;t really know the complete implementations of these classes. Lastly, you mentioned that ```B``` and ```C``` are related so you can turn the method into a generic one so it can take ```B``` and ```C```.\r\n\r\nIf all of these suggestions are still not helpful. Just search for **Transfer Object Pattern** on the internet.\r\n","title":"In my constructor, is it bad practice to set class variables by calling getters on an object I pass into a constructor?","body":"<p>With all the information that you have given, your colleague's suggestion of having <code>B</code> object as a class field of <code>A</code> is a bad design. As well as passing <code>B</code> on the <code>A</code> constructor.</p>\n<p>The main problem here is on the <code>A</code> class constructor, not it's field.\nPassing <code>B</code> object directly to A constructor is a bad design/practice even if <code>A</code> takes a lot of properties from <code>B</code>. If someone were to construct an <code>A</code> object that takes <code>B</code> as an argument, most of the time they would assume that <code>A</code> uses <code>B</code> or that they have a strong relationship. If your concern here is avoiding a lengthy constructor, then you're better off using <code>A</code> setters to take the <code>B</code> properties as shown below:</p>\n<pre><code>   A aClass = new A();\n   aclass.setX(bClass.getX());\n   aclass.setY(bClass.getY());\n</code></pre>\n<p>Another way is creating a method in class <code>A</code> that takes required properties from <code>B</code> by taking <code>B</code> as an argument like:</p>\n<pre><code>  public class A {\n      \\\\fields\n      public void setRequiredPropertiesFromBClass(B bClass) {\n          this.x = bClass.getX();\n          \\\\\\other getters\n     }\n  }\n</code></pre>\n<p>That way the intent of your code is clear, which is <code>A</code> needs certain properties from <code>B</code> not <code>B</code> itself. The example above can still be improved. I couldn't think of much better method name since I don't really know the complete implementations of these classes. Lastly, you mentioned that <code>B</code> and <code>C</code> are related so you can turn the method into a generic one so it can take <code>B</code> and <code>C</code>.</p>\n<p>If all of these suggestions are still not helpful. Just search for <strong>Transfer Object Pattern</strong> on the internet.</p>\n"},{"tags":[],"owner":{"account_id":20098273,"reputation":39,"user_id":14737335,"display_name":"pillow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658695112,"creation_date":1658695112,"answer_id":73101870,"question_id":73070705,"body_markdown":"So I resolved this by creating a static mapper like this;\r\n\r\n```\r\npublic class Mapper {\r\n\r\n  public static A mapToA(B b) {\r\n\r\n    return A.builder()\r\n             .x(b.getX())\r\n             .y(b.getY())\r\n             .list(b.getList())\r\n             .build();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nObviously the mapper holds the relationship between `A` and `B` (and in my case also `C`). \r\n\r\nAs mentioned above `A` is a DTO and `B` and `C` are database entities. The existing application was actually quite poorly written with the Repository interfaces directly returning the DTO `A` as part of a HQL query. I changed these to directly return `B` and `C` and then mapped these to `A` in the service classes.","title":"In my constructor, is it bad practice to set class variables by calling getters on an object I pass into a constructor?","body":"<p>So I resolved this by creating a static mapper like this;</p>\n<pre><code>public class Mapper {\n\n  public static A mapToA(B b) {\n\n    return A.builder()\n             .x(b.getX())\n             .y(b.getY())\n             .list(b.getList())\n             .build();\n\n    }\n\n}\n</code></pre>\n<p>Obviously the mapper holds the relationship between <code>A</code> and <code>B</code> (and in my case also <code>C</code>).</p>\n<p>As mentioned above <code>A</code> is a DTO and <code>B</code> and <code>C</code> are database entities. The existing application was actually quite poorly written with the Repository interfaces directly returning the DTO <code>A</code> as part of a HQL query. I changed these to directly return <code>B</code> and <code>C</code> and then mapped these to <code>A</code> in the service classes.</p>\n"}],"owner":{"account_id":20098273,"reputation":39,"user_id":14737335,"display_name":"pillow"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":73101870,"answer_count":3,"score":-3,"last_activity_date":1658695112,"creation_date":1658425895,"question_id":73070705,"body_markdown":"So imagine I have a simple class with three variables which are ultimately derived from another object. I could insert that other object in the constructor like:\r\n\r\n```\r\npublic class A {\r\n\r\n    private int x;\r\n    private int y;\r\n    private List&lt;&gt; list;\r\n\r\n    public A(B b) {\r\n        this.x = b.getX();\r\n        this.y = b.getY();\r\n        this.list = b.getList();\r\n    }\r\n}\r\n\r\npublic class B {\r\n\r\n    private int x;\r\n    private int y;\r\n    private int z;\r\n    private String string;\r\n    private Set&lt;&gt; set;\r\n    private List&lt;&gt; list;\r\n\r\n//constructor, setters and getters\r\n}\r\n```\r\n\r\nA colleague has suggested I should instead do the following:\r\n\r\n```\r\npublic class A {\r\n  \r\n    private B b;\r\n\r\n    public A(B b) {\r\n        this.b=b\r\n    }\r\n\r\n}\r\n```\r\n\r\nNow in the application using their option will require a lot of refactoring from\r\n\r\n`a.getX()` to `a.getB().getX()` or `a.getList()` to `a.getB().getList()` for example. \r\n\r\nWhat I&#39;m struggling to find is what is there some best practice defined in this scenario and why.\r\n\r\nMy argument is I don&#39;t want objects that use A to be coupled to any class structure imposed by B. I think my colleague is concerned that my constructor should not be accepting B as an argument only to call getters on it&#39;s variables within the constructor of A. \r\n\r\nAn alternative would be to use a factory or something to create A from B but that isn&#39;t really feasible with my use case. (In my specific use case A is being constructed in a HQL query and B is an Entity class)\r\n\r\n\r\nEDIT:\r\nI typed this question out on my phone but realise I missed some details so will add them here.\r\n\r\nA consists of a subset of properties from `B`. `A` also consists of a subset of properties of another class `C`. The properties of `C` are currently individually assigned in the constructor in what you would consider a normal manner (because there are only a few). Because `A` takes a lot of properties from `B` I am inserting it in the manner illustrated above.\r\n\r\n`B` and `C` are Entity classes that represent a row from two separate (but related) tables.\r\n\r\n`A` is a class which is we use to do some business logic with somewhere else.","title":"In my constructor, is it bad practice to set class variables by calling getters on an object I pass into a constructor?","body":"<p>So imagine I have a simple class with three variables which are ultimately derived from another object. I could insert that other object in the constructor like:</p>\n<pre><code>public class A {\n\n    private int x;\n    private int y;\n    private List&lt;&gt; list;\n\n    public A(B b) {\n        this.x = b.getX();\n        this.y = b.getY();\n        this.list = b.getList();\n    }\n}\n\npublic class B {\n\n    private int x;\n    private int y;\n    private int z;\n    private String string;\n    private Set&lt;&gt; set;\n    private List&lt;&gt; list;\n\n//constructor, setters and getters\n}\n</code></pre>\n<p>A colleague has suggested I should instead do the following:</p>\n<pre><code>public class A {\n  \n    private B b;\n\n    public A(B b) {\n        this.b=b\n    }\n\n}\n</code></pre>\n<p>Now in the application using their option will require a lot of refactoring from</p>\n<p><code>a.getX()</code> to <code>a.getB().getX()</code> or <code>a.getList()</code> to <code>a.getB().getList()</code> for example.</p>\n<p>What I'm struggling to find is what is there some best practice defined in this scenario and why.</p>\n<p>My argument is I don't want objects that use A to be coupled to any class structure imposed by B. I think my colleague is concerned that my constructor should not be accepting B as an argument only to call getters on it's variables within the constructor of A.</p>\n<p>An alternative would be to use a factory or something to create A from B but that isn't really feasible with my use case. (In my specific use case A is being constructed in a HQL query and B is an Entity class)</p>\n<p>EDIT:\nI typed this question out on my phone but realise I missed some details so will add them here.</p>\n<p>A consists of a subset of properties from <code>B</code>. <code>A</code> also consists of a subset of properties of another class <code>C</code>. The properties of <code>C</code> are currently individually assigned in the constructor in what you would consider a normal manner (because there are only a few). Because <code>A</code> takes a lot of properties from <code>B</code> I am inserting it in the manner illustrated above.</p>\n<p><code>B</code> and <code>C</code> are Entity classes that represent a row from two separate (but related) tables.</p>\n<p><code>A</code> is a class which is we use to do some business logic with somewhere else.</p>\n"},{"tags":["java","either","vavr"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1654439905,"post_id":72508175,"comment_id":128086259,"body_markdown":"@andyczerwonka Then look again, perhaps. An `Either&lt;CE, CR&gt;` can store either precisely 1 CE, or precisely 1 CR. In contrast, a Calculation can store for exmaple 18 CEs and 14 CRs. It&#39;s more powerful.","body":"@andyczerwonka Then look again, perhaps. An <code>Either&lt;CE, CR&gt;</code> can store either precisely 1 CE, or precisely 1 CR. In contrast, a Calculation can store for exmaple 18 CEs and 14 CRs. It&#39;s more powerful."},{"owner":{"account_id":1636357,"reputation":133,"user_id":5841869,"display_name":"DDT"},"score":0,"creation_date":1654440027,"post_id":72508175,"comment_id":128086277,"body_markdown":"Sorry, I have edited my question. I need a class which stores list of successful and unsuccessful calculations.","body":"Sorry, I have edited my question. I need a class which stores list of successful and unsuccessful calculations."},{"owner":{"account_id":56119,"reputation":4240,"user_id":168086,"accept_rate":82,"display_name":"andyczerwonka"},"score":0,"creation_date":1654440558,"post_id":72508175,"comment_id":128086396,"body_markdown":"My mistake, I saw `Either` and I assumed Scala. I removed my answer as it is not helpful.","body":"My mistake, I saw <code>Either</code> and I assumed Scala. I removed my answer as it is not helpful."},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1654440863,"post_id":72508175,"comment_id":128086470,"body_markdown":"Heh, yeah vavr can throw you for a loop on that one @andy","body":"Heh, yeah vavr can throw you for a loop on that one @andy"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654440904,"creation_date":1654440384,"answer_id":72508308,"question_id":72508175,"body_markdown":"This can be easily done using a custom collector. With a bit of pseudo code representing the `Either`:\r\n\r\n```\r\nCollector&lt;Either&lt;CalculationError, CalculationResult&gt;, ?, Calculation&gt; collector = Collector.of(\r\n        Calculation::new,\r\n        (calc, either) -&gt; {\r\n            if (either has error) {\r\n                calc.calculationErrors.add(either.error);\r\n            } else {\r\n                calc.calculationResults.add(either.result);\r\n            }\r\n        },\r\n        (calc1, calc2) -&gt; {\r\n            calc1.calculationErrors.addAll(calc2.calculationErrors);\r\n            calc1.calculationResults.addAll(calc2.calculationResults);\r\n            return calc1;\r\n        }\r\n);\r\n\r\nCalculation calc = data.stream()\r\n        .map(this::calculate)\r\n        .collect(collector);\r\n```\r\n\r\nNote that `Calculation` should initialize its two lists (in the declaration or a new constructor).","title":"Transform list of Either into list of left and list of right","body":"<p>This can be easily done using a custom collector. With a bit of pseudo code representing the <code>Either</code>:</p>\n<pre><code>Collector&lt;Either&lt;CalculationError, CalculationResult&gt;, ?, Calculation&gt; collector = Collector.of(\n        Calculation::new,\n        (calc, either) -&gt; {\n            if (either has error) {\n                calc.calculationErrors.add(either.error);\n            } else {\n                calc.calculationResults.add(either.result);\n            }\n        },\n        (calc1, calc2) -&gt; {\n            calc1.calculationErrors.addAll(calc2.calculationErrors);\n            calc1.calculationResults.addAll(calc2.calculationResults);\n            return calc1;\n        }\n);\n\nCalculation calc = data.stream()\n        .map(this::calculate)\n        .collect(collector);\n</code></pre>\n<p>Note that <code>Calculation</code> should initialize its two lists (in the declaration or a new constructor).</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654441129,"creation_date":1654441129,"answer_id":72508436,"question_id":72508175,"body_markdown":"Well, you&#39;re using vavr, so &#39;neat&#39; is right out. Tends to happen when you use tools that are hostile to the idiomatic form of the language. But, then again, &#39;neat&#39; is a nebulous term with no clear defined meaning, so, I guess, whatever _you_ think is &#39;neat&#39;, is therefore &#39;neat&#39;. Neat, huh?\r\n\r\nEither itself has the `sequence` method - but both of them work the way Either is supposed to work: They are left-biased in the sense that any Lefts present is treated as erroneous conditions, and that means all the Right values are discarded if even one of your Eithers is a Left. Thus, you cannot use either of the `sequence` methods to let Either itself bake you a list of the Right values. Even `sequenceRight` won&#39;t do this for you (it stops on the first Left in the list and returns that instead). The filter stuff similarly doesn&#39;t work like that - Either very much isn&#39;t really an Either in the sense of what that word means if you open a dictionary: It does __not__ mean: A homogenous mix of 2 types. It&#39;s solely a non-java-like take on exception management: Right contains the &#39;answer&#39;, left contains the &#39;error&#39; (you&#39;re using it correctly), but as a consequence there&#39;s nothing in the Either API to help with this task - which in effect involves &#39;please filter out the errors and then do something&#39; (&quot;Silently ignore errors&quot; is rarely the right move. It _is_ what is needed here, but it makes sense that the Either API isn&#39;t going to hand you a footgun. Even if you need it here).\r\n\r\nThus, we just write it plain jane java:\r\n\r\n```java\r\nvar calculation = new Calculation();\r\nfor (var e : mix) {\r\n  if (e.isLeft()) calculation.calculationErrors.add(e.getLeft());\r\n  if (e.isRight()) calculation.calculationResult.add(e.getRight());\r\n}\r\n```\r\n\r\n(This presumes your Calculation constructor at least initializes those lists to empty mutables).\r\n\r\nNB: Rob Spoor&#39;s answer also assumes this and is much, much longer. Sometimes the functional way is the silly, slow, unwieldy, hard to read, way.\r\n\r\nNB2: `Either.sequence(mix).orElseRun(s -&gt; calculation.errors = s.asJava());` is a rather &#39;neat&#39; way (perhaps - it&#39;s in the eye of the beholder) of setting up the `errors` field of your Calculation class. No joy for such a &#39;neat&#39; trick to fill the &#39;results&#39; part of it all, however. That&#39;s what the bulk of my answer is trying to explain: There is no nice API for that in Either, and it&#39;s probably by design, as that involves intentionally ignoring the errors in the list of Eithers.","title":"Transform list of Either into list of left and list of right","body":"<p>Well, you're using vavr, so 'neat' is right out. Tends to happen when you use tools that are hostile to the idiomatic form of the language. But, then again, 'neat' is a nebulous term with no clear defined meaning, so, I guess, whatever <em>you</em> think is 'neat', is therefore 'neat'. Neat, huh?</p>\n<p>Either itself has the <code>sequence</code> method - but both of them work the way Either is supposed to work: They are left-biased in the sense that any Lefts present is treated as erroneous conditions, and that means all the Right values are discarded if even one of your Eithers is a Left. Thus, you cannot use either of the <code>sequence</code> methods to let Either itself bake you a list of the Right values. Even <code>sequenceRight</code> won't do this for you (it stops on the first Left in the list and returns that instead). The filter stuff similarly doesn't work like that - Either very much isn't really an Either in the sense of what that word means if you open a dictionary: It does <strong>not</strong> mean: A homogenous mix of 2 types. It's solely a non-java-like take on exception management: Right contains the 'answer', left contains the 'error' (you're using it correctly), but as a consequence there's nothing in the Either API to help with this task - which in effect involves 'please filter out the errors and then do something' (&quot;Silently ignore errors&quot; is rarely the right move. It <em>is</em> what is needed here, but it makes sense that the Either API isn't going to hand you a footgun. Even if you need it here).</p>\n<p>Thus, we just write it plain jane java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var calculation = new Calculation();\nfor (var e : mix) {\n  if (e.isLeft()) calculation.calculationErrors.add(e.getLeft());\n  if (e.isRight()) calculation.calculationResult.add(e.getRight());\n}\n</code></pre>\n<p>(This presumes your Calculation constructor at least initializes those lists to empty mutables).</p>\n<p>NB: Rob Spoor's answer also assumes this and is much, much longer. Sometimes the functional way is the silly, slow, unwieldy, hard to read, way.</p>\n<p>NB2: <code>Either.sequence(mix).orElseRun(s -&gt; calculation.errors = s.asJava());</code> is a rather 'neat' way (perhaps - it's in the eye of the beholder) of setting up the <code>errors</code> field of your Calculation class. No joy for such a 'neat' trick to fill the 'results' part of it all, however. That's what the bulk of my answer is trying to explain: There is no nice API for that in Either, and it's probably by design, as that involves intentionally ignoring the errors in the list of Eithers.</p>\n"},{"tags":[],"owner":{"account_id":11394190,"reputation":331,"user_id":8353152,"display_name":"DBear"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658694701,"creation_date":1658694701,"answer_id":73101822,"question_id":72508175,"body_markdown":"Since you are using VAVr, you may consider using `Traversable` instead of `Collection`. This will give you the method `partition`, which can be used to classify your list of `Either`s into two groups like so:\r\n```java\r\nTraversable&lt;Either&lt;CalculationError, CalculationResult&gt;&gt; calculations = ...;\r\nvar partitionedCalcs = calculations.partition(Either::isRight);\r\nvar results = partitionedCalcs._1.map(Either::getRight);\r\nvar errors = partitionedCalcs._2.map(Either::getLeft);\r\nCalculation calcs = new Calculation(results, errors);\r\n```\r\n\r\nIf you don&#39;t want to change your existing use of `Collection` to use a `Traversable`, then you can easily convert between them by using, for example, `List.ofAll(Iterator)` and `Value.toJavaCollection(Function)`.","title":"Transform list of Either into list of left and list of right","body":"<p>Since you are using VAVr, you may consider using <code>Traversable</code> instead of <code>Collection</code>. This will give you the method <code>partition</code>, which can be used to classify your list of <code>Either</code>s into two groups like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Traversable&lt;Either&lt;CalculationError, CalculationResult&gt;&gt; calculations = ...;\nvar partitionedCalcs = calculations.partition(Either::isRight);\nvar results = partitionedCalcs._1.map(Either::getRight);\nvar errors = partitionedCalcs._2.map(Either::getLeft);\nCalculation calcs = new Calculation(results, errors);\n</code></pre>\n<p>If you don't want to change your existing use of <code>Collection</code> to use a <code>Traversable</code>, then you can easily convert between them by using, for example, <code>List.ofAll(Iterator)</code> and <code>Value.toJavaCollection(Function)</code>.</p>\n"}],"owner":{"account_id":1636357,"reputation":133,"user_id":5841869,"display_name":"DDT"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1658694701,"creation_date":1654439496,"question_id":72508175,"body_markdown":"Vavr&#39;s Either seems to solve one of my problems were some method does a lot of checks and returns either CalculationError or CalculationResult.\r\n\r\n```java\r\nEither&lt;CalculationError, CalculationResult&gt; calculate (CalculationData calculationData) {\r\n// either returns Either.left(new CalculationError()) or Either.right(new CalculationResult())\r\n\r\n}\r\n```\r\n\r\nI have a wrapper which stores both errors and results\r\n\r\n```\r\nclass Calculation {\r\n List&lt;CalculationResult&gt; calculationResults;\r\n List&lt;CalculationError&gt; calculationErrors;\r\n}\r\n\r\n```\r\n\r\nIs there any neat solution to transform stream from &lt;code&gt;Collection\\&lt;CalculationData&gt; data&lt;/code&gt; to &lt;code&gt;Calculation&lt;/code&gt;?\r\n\r\n","title":"Transform list of Either into list of left and list of right","body":"<p>Vavr's Either seems to solve one of my problems were some method does a lot of checks and returns either CalculationError or CalculationResult.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Either&lt;CalculationError, CalculationResult&gt; calculate (CalculationData calculationData) {\n// either returns Either.left(new CalculationError()) or Either.right(new CalculationResult())\n\n}\n</code></pre>\n<p>I have a wrapper which stores both errors and results</p>\n<pre><code>class Calculation {\n List&lt;CalculationResult&gt; calculationResults;\n List&lt;CalculationError&gt; calculationErrors;\n}\n\n</code></pre>\n<p>Is there any neat solution to transform stream from <code>Collection&lt;CalculationData&gt; data</code> to <code>Calculation</code>?</p>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658695463,"post_id":73101543,"comment_id":129109163,"body_markdown":"So do you need to check if the nearest wearhouse has enougth resources for the lorry and if not go to the next nearest wearhouse? Am I correct?","body":"So do you need to check if the nearest wearhouse has enougth resources for the lorry and if not go to the next nearest wearhouse? Am I correct?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658700080,"post_id":73101543,"comment_id":129109970,"body_markdown":"@Mirco0 correct. But this is implemented already thanks this algorithm.  I need to update availability of warehouse (number of items) each time a lorry get on it and pick 2 items (lorries have a capacity by 2).","body":"@Mirco0 correct. But this is implemented already thanks this algorithm.  I need to update availability of warehouse (number of items) each time a lorry get on it and pick 2 items (lorries have a capacity by 2)."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658706394,"post_id":73101543,"comment_id":129110762,"body_markdown":"Oh, do you mean `sortmag.get(0).cap -= 2;` ?","body":"Oh, do you mean <code>sortmag.get(0).cap -= 2;</code> ?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658721609,"post_id":73101543,"comment_id":129112673,"body_markdown":"@Mirco0 exactly. I need to recall availability of each warehouses. Cap its capacita parameter in Magazzini (second pic that Ive uploaded).","body":"@Mirco0 exactly. I need to recall availability of each warehouses. Cap its capacita parameter in Magazzini (second pic that Ive uploaded)."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658735739,"post_id":73101543,"comment_id":129115598,"body_markdown":"Putting the code inside `moveTo` could help? In this way everytime a lorry moves to a warehouse the warehouse&#39;s availability decreases by two, can you post the `moveTo` method?","body":"Putting the code inside <code>moveTo</code> could help? In this way everytime a lorry moves to a warehouse the warehouse&#39;s availability decreases by two, can you post the <code>moveTo</code> method?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658736869,"post_id":73101543,"comment_id":129115971,"body_markdown":"@Mirco0 \nHeres the link of move to function\n\nhttps://anylogic.help/anylogic/agentbased/movement-gis.html#movement-with-moveto-functions-moving-an-agent-toward-a-destination\n\nanyway, what you said about decreasing its what I need to do","body":"@Mirco0  Heres the link of move to function  <a href=\"https://anylogic.help/anylogic/agentbased/movement-gis.html#movement-with-moveto-functions-moving-an-agent-toward-a-destination\" rel=\"nofollow noreferrer\">anylogic.help/anylogic/agentbased/&hellip;</a>  anyway, what you said about decreasing its what I need to do"},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658737072,"post_id":73101543,"comment_id":129116043,"body_markdown":"What about using `sortmag.get(0).cap -= 2;` right after `calling moveTo();` ?","body":"What about using <code>sortmag.get(0).cap -= 2;</code> right after <code>calling moveTo();</code> ?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1659120611,"post_id":73101543,"comment_id":129225963,"body_markdown":"@Mirco0 could you help me with this question? Thanks so much.\n\nhttps://stackoverflow.com/questions/73169822/anylogic-how-can-i-execute-my-model-ciclically","body":"@Mirco0 could you help me with this question? Thanks so much.  <a href=\"https://stackoverflow.com/questions/73169822/anylogic-how-can-i-execute-my-model-ciclically\" title=\"anylogic how can i execute my model ciclically\">stackoverflow.com/questions/73169822/&hellip;</a>"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1662309654,"post_id":73101543,"comment_id":129971583,"body_markdown":"@Mirco0 https://stackoverflow.com/questions/73601064/anylogic-how-to-get-value-parameters-into-excel-file\n\nCould you help me please? Thank you.","body":"@Mirco0 <a href=\"https://stackoverflow.com/questions/73601064/anylogic-how-to-get-value-parameters-into-excel-file\" title=\"anylogic how to get value parameters into excel file\">stackoverflow.com/questions/73601064/&hellip;</a>  Could you help me please? Thank you."}],"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658692860,"creation_date":1658692156,"question_id":73101543,"body_markdown":"I&#39;m working on a tool about humanitarian logistics. In this model I have some lorries which pick items for support affected people by an earthquake and, after picking them, go to eartquake epicenter to drop these items. I need to manage the availabilty of these warehouses: for example, if a warehouse has 5 items availables and lorries has a transport capacity by 2, availabilty have to become 3 for that warehouse. I need to realize obviously this process for all warehouse of my Supply Chain. I&#39;ve dropped (as you can see in the pic that I&#39;ve uploaded) a parameter (availability) in the class of the warehouses [named Magazzini]). \r\n\r\nThis is the algorithm that manages lorries movement, in which I need to code this command to change availabilty.\r\n\r\n\r\n    List &lt;Magazzini&gt; subsetlist = findAll(main.magazzinis, w-&gt;w.capacita&gt;0);\r\n    List &lt;Magazzini&gt; sortmag = new ArrayList&lt;Magazzini&gt;();\r\n    List &lt;Double&gt; distance = new ArrayList&lt;Double&gt;();\r\n    sortmag = subsetlist;\r\n    System.out.println(sortmag);\r\n    for (Magazzini m : subsetlist)\r\n    \t{\r\n    \t\tm.distance = distanceTo(m);\t\r\n    \t}\r\n    \tsortmag = sortAscending(sortmag, p-&gt; p.distance);\r\n    \t//main.magazzinis.cap = main.magazzinis.cap - 2;\r\n    \tmoveTo(sortmag.get(0));\t\r\n    \tSystem.out.println(sortmag);\r\n    partenza = time();\r\n\r\n\r\n\r\nI write a possible command to do it, but it doesn&#39;t work. How can I fix it?\r\n\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/K2dy2.png\r\n  [2]: https://i.stack.imgur.com/gwZx2.png","title":"How can I manage availability of warehouses?","body":"<p>I'm working on a tool about humanitarian logistics. In this model I have some lorries which pick items for support affected people by an earthquake and, after picking them, go to eartquake epicenter to drop these items. I need to manage the availabilty of these warehouses: for example, if a warehouse has 5 items availables and lorries has a transport capacity by 2, availabilty have to become 3 for that warehouse. I need to realize obviously this process for all warehouse of my Supply Chain. I've dropped (as you can see in the pic that I've uploaded) a parameter (availability) in the class of the warehouses [named Magazzini]).</p>\n<p>This is the algorithm that manages lorries movement, in which I need to code this command to change availabilty.</p>\n<pre><code>List &lt;Magazzini&gt; subsetlist = findAll(main.magazzinis, w-&gt;w.capacita&gt;0);\nList &lt;Magazzini&gt; sortmag = new ArrayList&lt;Magazzini&gt;();\nList &lt;Double&gt; distance = new ArrayList&lt;Double&gt;();\nsortmag = subsetlist;\nSystem.out.println(sortmag);\nfor (Magazzini m : subsetlist)\n    {\n        m.distance = distanceTo(m); \n    }\n    sortmag = sortAscending(sortmag, p-&gt; p.distance);\n    //main.magazzinis.cap = main.magazzinis.cap - 2;\n    moveTo(sortmag.get(0)); \n    System.out.println(sortmag);\npartenza = time();\n</code></pre>\n<p>I write a possible command to do it, but it doesn't work. How can I fix it?</p>\n<p><a href=\"https://i.stack.imgur.com/gwZx2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gwZx2.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/K2dy2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K2dy2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","lucene"],"comments":[{"owner":{"account_id":10448067,"reputation":777,"user_id":7702557,"display_name":"Kwright02"},"score":0,"creation_date":1658687254,"post_id":73100994,"comment_id":129107413,"body_markdown":"Java 9 is vastly different from Java 7. All your libraries and dependencies must be updated to support Java 9","body":"Java 9 is vastly different from Java 7. All your libraries and dependencies must be updated to support Java 9"},{"owner":{"account_id":25884575,"reputation":1,"user_id":19612965,"display_name":"Chenyu Mao"},"score":0,"creation_date":1658688020,"post_id":73100994,"comment_id":129107586,"body_markdown":"I change the jar library, and IntelliJ does not give me any warnings, but it fails when I run it. I am not sure the indexing process goes well, but it failed at this line of codeIndexReader reader = DirectoryReader.open(FSDirectory.open(Paths.get(&quot;D:\\IdeaProjects\\Lucene7.0\\src\\index1\\documents.index&quot;)));","body":"I change the jar library, and IntelliJ does not give me any warnings, but it fails when I run it. I am not sure the indexing process goes well, but it failed at this line of codeIndexReader reader = DirectoryReader.open(FSDirectory.open(Paths.get(&quot;D:\\IdeaProj&zwnj;&#8203;ects\\Lucene7.0\\src\\i&zwnj;&#8203;ndex1\\documents.inde&zwnj;&#8203;x&quot;)));"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1658689615,"post_id":73100994,"comment_id":129107920,"body_markdown":"@Kwright02 - the question is about Lucene 7.0 and Lucene 9.0; not about Java 7.0 or Java 9.0. But your point is valid - one needs to update all the _Lucene_ JARs (not just one of them).","body":"@Kwright02 - the question is about Lucene 7.0 and Lucene 9.0; not about Java 7.0 or Java 9.0. But your point is valid - one needs to update all the <i>Lucene</i> JARs (not just one of them)."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1658689719,"post_id":73100994,"comment_id":129107951,"body_markdown":"How are you managing your Lucene JARs? Manually, or using a tool such as Maven? Show us which Lucene JARs you are using (ideally as Maven POM dependencies) or just as a list of JARs, making it clear which JAR is from which version of Lucene.","body":"How are you managing your Lucene JARs? Manually, or using a tool such as Maven? Show us which Lucene JARs you are using (ideally as Maven POM dependencies) or just as a list of JARs, making it clear which JAR is from which version of Lucene."},{"owner":{"account_id":25884575,"reputation":1,"user_id":19612965,"display_name":"Chenyu Mao"},"score":0,"creation_date":1658692276,"post_id":73100994,"comment_id":129108496,"body_markdown":"I managed the jars manually by the project structure, and I put the image above in the link.","body":"I managed the jars manually by the project structure, and I put the image above in the link."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1658692587,"post_id":73100994,"comment_id":129108557,"body_markdown":"OK - but that screenshot shows you have _both_ `lucene-core-7.4.0.jar` _and_ `lucene-core-9.0.0.jar` at the same time - and you also have a list of other Lucene JARs which you have not upgraded. You need to upgrade _every_ Lucene JAR to v9.0.0. And you need to _remove_ every Lucene 7.4.0 JAR.  (And using Maven is much better, in the long run. It helps you to avoid these types of problem.)","body":"OK - but that screenshot shows you have <i>both</i> <code>lucene-core-7.4.0.jar</code> <i>and</i> <code>lucene-core-9.0.0.jar</code> at the same time - and you also have a list of other Lucene JARs which you have not upgraded. You need to upgrade <i>every</i> Lucene JAR to v9.0.0. And you need to <i>remove</i> every Lucene 7.4.0 JAR.  (And using Maven is much better, in the long run. It helps you to avoid these types of problem.)"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1658693059,"post_id":73100994,"comment_id":129108674,"body_markdown":"And also, if you want to use Lucene 9 to open an index which was created using Lucene 7, you will probably need the [Lucene 9 Backward Codecs](https://mvnrepository.com/artifact/org.apache.lucene/lucene-backward-codecs/9.0.0) JAR.","body":"And also, if you want to use Lucene 9 to open an index which was created using Lucene 7, you will probably need the <a href=\"https://mvnrepository.com/artifact/org.apache.lucene/lucene-backward-codecs/9.0.0\" rel=\"nofollow noreferrer\">Lucene 9 Backward Codecs</a> JAR."}],"owner":{"account_id":25884575,"reputation":1,"user_id":19612965,"display_name":"Chenyu Mao"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658692693,"creation_date":1658687153,"question_id":73100994,"body_markdown":"I was using Lucene 7.0 version to index files and search files and it went well, however when I changed the jar from Lucene 7 to Lucene 9, it fails at this line of code, and also gave me this error:\r\n\r\n```java\r\nIndexReader reader = DirectoryReader.open(FSDirectory.open(Paths\r\n        .get(&quot;D:\\\\IdeaProjects\\\\Lucene7.0\\\\src\\\\index1\\\\documents.index&quot;)));\r\n```\r\n\r\n```\r\nCaused by: java.lang.ClassNotFoundException: org.apache.lucene.codecs.blocktree.BlockTreeTermsWriter\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n\t... 26 more\r\n```\r\n\r\nThese are all the libs I use for the project. I first used Lucene-core-7.4, and then I changed to Lucene-core-9.0:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6VLLh.png","title":"Search function fails when changing from Lucene7.0 to Lucene 9.0","body":"<p>I was using Lucene 7.0 version to index files and search files and it went well, however when I changed the jar from Lucene 7 to Lucene 9, it fails at this line of code, and also gave me this error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>IndexReader reader = DirectoryReader.open(FSDirectory.open(Paths\n        .get(&quot;D:\\\\IdeaProjects\\\\Lucene7.0\\\\src\\\\index1\\\\documents.index&quot;)));\n</code></pre>\n<pre><code>Caused by: java.lang.ClassNotFoundException: org.apache.lucene.codecs.blocktree.BlockTreeTermsWriter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n    ... 26 more\n</code></pre>\n<p>These are all the libs I use for the project. I first used Lucene-core-7.4, and then I changed to Lucene-core-9.0:</p>\n<p><a href=\"https://i.stack.imgur.com/6VLLh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6VLLh.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":3784660,"reputation":1471,"user_id":3143009,"accept_rate":4,"display_name":"soung"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658692687,"creation_date":1658692687,"answer_id":73101601,"question_id":73097965,"body_markdown":"You have lot of options to do that. \r\n\r\n**Option 1 : Projections from Spring Data JPA without @Query**\r\n\r\n    interface MyProjection{\r\n        String getField1();\r\n        String getField3();\r\n    }\r\n    public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\r\n    \r\n        List&lt;MyProjection&gt; findAll();\r\n    }\r\n\r\n**Option 2 : Projections from Spring Data JPA with @Query (quite similar to Option 1)**\r\n\r\n\r\n    interface MyProjection{\r\n        String getField1();\r\n        String getField3();\r\n    }\r\n    public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\r\n        @Query(&quot;SELECT p FROM Entity p&quot;)\r\n        List&lt;MyProjection&gt; customFindEntity();\r\n    }\r\n\r\n**Option 3 : Projections from Spring Data JPA with @Query  without any interface**\r\n\r\n    public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\r\n        @Query(&quot;SELECT p.field1,  p.field2 FROM Entity p&quot;)\r\n        List&lt;Object&gt; customFindEntity();\r\n    }\r\n\r\n\r\n**Option 4 : Projections from Spring Data JPA with @Query an native query (quite similar to Option 2)**\r\n\r\n\r\n    interface MyProjection{\r\n        String getField1();\r\n        String getField3();\r\n    }\r\n    public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\r\n        @Query(&quot;SELECT field1, field3 FROM Entity p&quot;, nativeQuery = true)\r\n        List&lt;MyProjection&gt; customFindEntity();\r\n    }\r\n**Option 5 : Use Native query and return list of object array**\r\n\r\nYou have to extract your data from the list of array.\r\n\r\n\r\n    public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\r\n        @Query(&quot;SELECT field1, field3 FROM Entity p&quot;, nativeQuery = true)\r\n        List&lt;Object[]&gt; customFindEntity();\r\n    }\r\n\r\n","title":"JPA 2 different native queries with same class as entity","body":"<p>You have lot of options to do that.</p>\n<p><strong>Option 1 : Projections from Spring Data JPA without @Query</strong></p>\n<pre><code>interface MyProjection{\n    String getField1();\n    String getField3();\n}\npublic interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\n\n    List&lt;MyProjection&gt; findAll();\n}\n</code></pre>\n<p><strong>Option 2 : Projections from Spring Data JPA with @Query (quite similar to Option 1)</strong></p>\n<pre><code>interface MyProjection{\n    String getField1();\n    String getField3();\n}\npublic interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\n    @Query(&quot;SELECT p FROM Entity p&quot;)\n    List&lt;MyProjection&gt; customFindEntity();\n}\n</code></pre>\n<p><strong>Option 3 : Projections from Spring Data JPA with @Query  without any interface</strong></p>\n<pre><code>public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\n    @Query(&quot;SELECT p.field1,  p.field2 FROM Entity p&quot;)\n    List&lt;Object&gt; customFindEntity();\n}\n</code></pre>\n<p><strong>Option 4 : Projections from Spring Data JPA with @Query an native query (quite similar to Option 2)</strong></p>\n<pre><code>interface MyProjection{\n    String getField1();\n    String getField3();\n}\npublic interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\n    @Query(&quot;SELECT field1, field3 FROM Entity p&quot;, nativeQuery = true)\n    List&lt;MyProjection&gt; customFindEntity();\n}\n</code></pre>\n<p><strong>Option 5 : Use Native query and return list of object array</strong></p>\n<p>You have to extract your data from the list of array.</p>\n<pre><code>public interface MyRepository extends JpaRepository&lt;Entity, Integer&gt; {\n    @Query(&quot;SELECT field1, field3 FROM Entity p&quot;, nativeQuery = true)\n    List&lt;Object[]&gt; customFindEntity();\n}\n</code></pre>\n"}],"owner":{"account_id":13944487,"reputation":29,"user_id":10069557,"display_name":"Vaibhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":492,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658692687,"creation_date":1658662095,"question_id":73097965,"body_markdown":"I am new to JPA. Currently I am writing a native query with `@Query` annotation. I have a class similar to the below\r\n\r\n```java\r\n@Column(name=&quot;field1&quot;)\r\nPrivate String field1;\r\n\r\n@Column(name=&quot;field2&quot;)\r\nPrivate String field2;\r\n\r\n@Column(name=&quot;field3&quot;)\r\nPrivate String field3;\r\n```\r\n\r\nI am writing 2 queries where 1 query has field 2 included in select projection and other does not include field 2. How can I use same class for both of the queries? I tried `@Transient` annotation. But it made values of both queries as null.","title":"JPA 2 different native queries with same class as entity","body":"<p>I am new to JPA. Currently I am writing a native query with <code>@Query</code> annotation. I have a class similar to the below</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(name=&quot;field1&quot;)\nPrivate String field1;\n\n@Column(name=&quot;field2&quot;)\nPrivate String field2;\n\n@Column(name=&quot;field3&quot;)\nPrivate String field3;\n</code></pre>\n<p>I am writing 2 queries where 1 query has field 2 included in select projection and other does not include field 2. How can I use same class for both of the queries? I tried <code>@Transient</code> annotation. But it made values of both queries as null.</p>\n"},{"tags":["java","set"],"comments":[{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658684371,"post_id":73100591,"comment_id":129106774,"body_markdown":"I don&#39;t think I am using == anywhere for comparing the strings.","body":"I don&#39;t think I am using == anywhere for comparing the strings."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1658684694,"post_id":73100591,"comment_id":129106849,"body_markdown":"Please update your question with a main method so it can be run with test code.","body":"Please update your question with a main method so it can be run with test code."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1658684899,"post_id":73100591,"comment_id":129106889,"body_markdown":"Actuall, the problem is still comparing objects.  Use equals for the map values. too.  Try this to see the problem. `System.out.println(Integer.valueOf(29292) == Integer.valueOf(29292));`","body":"Actuall, the problem is still comparing objects.  Use equals for the map values. too.  Try this to see the problem. <code>System.out.println(Integer.valueOf(29292) == Integer.valueOf(29292));</code>"},{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658685119,"post_id":73100591,"comment_id":129106935,"body_markdown":"Is there anyway to do that in a TreeSet ? It is very weird that we can&#39;t even do such basic operations on data types such as strings.","body":"Is there anyway to do that in a TreeSet ? It is very weird that we can&#39;t even do such basic operations on data types such as strings."},{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658685356,"post_id":73100591,"comment_id":129106981,"body_markdown":"Any example ? I am not sure I really quite follow how to do that.","body":"Any example ? I am not sure I really quite follow how to do that."},{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658685791,"post_id":73100591,"comment_id":129107100,"body_markdown":"That didn&#39;t work.","body":"That didn&#39;t work."},{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658685861,"post_id":73100591,"comment_id":129107124,"body_markdown":"Also, foodRatingMap.get(A) returns an Integer not string.","body":"Also, foodRatingMap.get(A) returns an Integer not string."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1658687025,"post_id":73100591,"comment_id":129107366,"body_markdown":"change the rating, which is used by the `Comparator`, AFTER removing the food form the Set - by changing the rating but not the order, the Set is unable to correctly find the entry","body":"change the rating, which is used by the <code>Comparator</code>, AFTER removing the food form the Set - by changing the rating but not the order, the Set is unable to correctly find the entry"},{"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"score":0,"creation_date":1658688217,"post_id":73100591,"comment_id":129107632,"body_markdown":"You were right. It is the order that matters here. I would update the answer to include that.","body":"You were right. It is the order that matters here. I would update the answer to include that."},{"owner":{"account_id":16465470,"reputation":101,"user_id":11950199,"display_name":"YokedSinger8062"},"score":0,"creation_date":1658689990,"post_id":73100591,"comment_id":129108012,"body_markdown":"The problem is with the implementation of your compare method. If you were to do a simple a.compareTo(b) you would get the results you wanted. Could you explain the logic you are trying to implement in the compare method? It looks to me it may be violating the compareTo contract.","body":"The problem is with the implementation of your compare method. If you were to do a simple a.compareTo(b) you would get the results you wanted. Could you explain the logic you are trying to implement in the compare method? It looks to me it may be violating the compareTo contract."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1658697253,"post_id":73100591,"comment_id":129109470,"body_markdown":"If you change the comparison position of an element that&#39;s already in a TreeSet, what you get is a corrupt data structure that will give you many mysterious bugs.  Don&#39;t do that.","body":"If you change the comparison position of an element that&#39;s already in a TreeSet, what you get is a corrupt data structure that will give you many mysterious bugs.  Don&#39;t do that."}],"answers":[{"tags":[],"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658688929,"creation_date":1658688929,"answer_id":73101173,"question_id":73100591,"body_markdown":"Well. That was a very subtle issue to find. First the order in which the ratings were updated are wrong. The correct order was :-\r\n1) Remove the food from the sortedSet.\r\n2) Update the rating.\r\n3) Add the food back to the sorted set.\r\n\r\nChanges were done in two places. \r\nThe first one was to correct the order.\r\n```\r\npublic void changeRating(String food, int newRating) {\r\n\t\tfoodTypeMap.get(foodMap.get(food)).remove(food);\r\n\t\tfoodRatingMap.put(food, newRating);\r\n\t\tfoodTypeMap.get(foodMap.get(food)).add(food);\r\n\t}\r\n```\r\n\r\nThe second one was to use equals() when comparing integer values in the comparator.\r\n```\r\nclass SortedSetComparator implements Comparator&lt;String&gt; {\r\n\t\tpublic int compare(String A, String B) {\r\n\t\t\tif (foodRatingMap.get(A).equals(foodRatingMap.get(B))) {\r\n\t\t\t\treturn A.compareTo(B);\r\n\t\t\t}\r\n\t\t\treturn foodRatingMap.get(B).compareTo(foodRatingMap.get(A));\r\n\t\t}\r\n\t}\r\n```","title":"Why is remove() for TreeSet&lt;String&gt; not working?","body":"<p>Well. That was a very subtle issue to find. First the order in which the ratings were updated are wrong. The correct order was :-</p>\n<ol>\n<li>Remove the food from the sortedSet.</li>\n<li>Update the rating.</li>\n<li>Add the food back to the sorted set.</li>\n</ol>\n<p>Changes were done in two places.\nThe first one was to correct the order.</p>\n<pre><code>public void changeRating(String food, int newRating) {\n        foodTypeMap.get(foodMap.get(food)).remove(food);\n        foodRatingMap.put(food, newRating);\n        foodTypeMap.get(foodMap.get(food)).add(food);\n    }\n</code></pre>\n<p>The second one was to use equals() when comparing integer values in the comparator.</p>\n<pre><code>class SortedSetComparator implements Comparator&lt;String&gt; {\n        public int compare(String A, String B) {\n            if (foodRatingMap.get(A).equals(foodRatingMap.get(B))) {\n                return A.compareTo(B);\n            }\n            return foodRatingMap.get(B).compareTo(foodRatingMap.get(A));\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658692197,"creation_date":1658692197,"answer_id":73101545,"question_id":73100591,"body_markdown":"Well, it took me a while to find the problem. Besides the Integer compare issue which is only needed to sort equal ratings in lexical order.  You were updating the ratings prior to doing a remove. But since your set uses this structure in its comparator, things got out of sync.\r\n```\r\n public void changeRating(String food, int newRating) {\r\n            SortedSet&lt;String&gt; set = foodTypeMap.get(foodMap.get(food));\r\n            if (!set.remove(food)) {\r\n                System.out.println(&quot;Unable to find &quot; + food);\r\n            }\r\n            foodTypeMap.get(foodMap.get(food)).add(food);\r\n            foodRatingMap.put(food, newRating);\r\n }\r\n```\r\nAs soon as I moved `foodRatingMap.put(food, newRating);` to the bottom, it worked.  BTW, I would have written a `Food class` hold each foods type, rating, and cuisine.  Usually these test sites are only interested in results and efficiency, not how you did it.\r\n\r\n","title":"Why is remove() for TreeSet&lt;String&gt; not working?","body":"<p>Well, it took me a while to find the problem. Besides the Integer compare issue which is only needed to sort equal ratings in lexical order.  You were updating the ratings prior to doing a remove. But since your set uses this structure in its comparator, things got out of sync.</p>\n<pre><code> public void changeRating(String food, int newRating) {\n            SortedSet&lt;String&gt; set = foodTypeMap.get(foodMap.get(food));\n            if (!set.remove(food)) {\n                System.out.println(&quot;Unable to find &quot; + food);\n            }\n            foodTypeMap.get(foodMap.get(food)).add(food);\n            foodRatingMap.put(food, newRating);\n }\n</code></pre>\n<p>As soon as I moved <code>foodRatingMap.put(food, newRating);</code> to the bottom, it worked.  BTW, I would have written a <code>Food class</code> hold each foods type, rating, and cuisine.  Usually these test sites are only interested in results and efficiency, not how you did it.</p>\n"}],"owner":{"account_id":12877603,"reputation":127,"user_id":9316382,"display_name":"Abascus"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":73101545,"answer_count":2,"score":-2,"last_activity_date":1658692197,"creation_date":1658683715,"question_id":73100591,"body_markdown":"I am trying to solve the problem at https://leetcode.com/problems/design-a-food-rating-system and this is my solution.\r\n\r\n```\r\nclass FoodRatings {\r\n\r\n\t\tclass SortedSetComparator implements Comparator&lt;String&gt; {\r\n\t\t\tpublic int compare(String A, String B) {\r\n\t\t\t\tif (foodRatingMap.get(A) == foodRatingMap.get(B)) {\r\n\t\t\t\t\treturn A.compareTo(B);\r\n\t\t\t\t}\r\n\t\t\t\treturn foodRatingMap.get(B).compareTo(foodRatingMap.get(A));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tMap&lt;String, SortedSet&lt;String&gt;&gt; foodTypeMap;\r\n\t\tMap&lt;String, String&gt; foodMap;\r\n\t\tMap&lt;String, Integer&gt; foodRatingMap;\r\n\r\n\t\tpublic FoodRatings(String[] foods, String[] cuisines, int[] ratings) {\r\n\t\t\tfoodTypeMap = new HashMap&lt;&gt;();\r\n\t\t\tfoodMap = new HashMap&lt;&gt;();\r\n\t\t\tfoodRatingMap = new HashMap&lt;&gt;();\r\n\r\n\t\t\tfor (int i = 0; i&lt;foods.length; i++) {\r\n\t\t\t\tfoodTypeMap.putIfAbsent(cuisines[i], new TreeSet&lt;String&gt; (new SortedSetComparator()));\r\n\t\t\t\tfoodMap.put(foods[i], cuisines[i]);\r\n\t\t\t\tfoodRatingMap.put(foods[i], ratings[i]);\r\n\t\t\t\tfoodTypeMap.get(cuisines[i]).add(foods[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic void changeRating(String food, int newRating) {\r\n\t\t\tfoodRatingMap.put(food, newRating);\r\n\t\t\tSortedSet&lt;String&gt; set = foodTypeMap.get(foodMap.get(food));\r\n\t\t\tif (!set.remove(food)) {\r\n\t\t\t    System.out.println(&quot;Unable to find &quot; + food);\r\n\t\t\t}\r\n\t\t\tfoodTypeMap.get(foodMap.get(food)).add(food);\r\n\t\t}\r\n\t\t\r\n\t\tpublic String highestRated(String cuisine) {\r\n\t\t    return foodTypeMap.get(cuisine).first();\r\n\t    }\r\n\t\t\r\n\t}\r\n```\r\nCould anyone tell me why the TreeSet remove() method is not working ?\r\n\r\nHere is the input for the same.\r\n\r\n```\r\n\tpublic static void main(String args[]) {\r\n\r\n\t\tString[] foods = new String[] {\r\n\t\t\t&quot;czopaaeyl&quot;, &quot;lxoozsbh&quot;, &quot;kbaxapl&quot;\r\n\t\t};\r\n\t\tString[] cuisines = new String[] {\r\n\t\t\t&quot;dmnuqeatj&quot;, &quot;dmnuqeatj&quot;, &quot;dmnuqeatj&quot;\r\n\t\t};\r\n\t\tint[] ratings = new int[] {\r\n\t\t\t11, 2, 15\r\n\t\t};\r\n\r\n\t\tFoodRatings obj = new MyClass().new FoodRatings(foods, cuisines, ratings);\r\n\t\tobj.changeRating(&quot;czopaaeyl&quot;, 12);\r\n\t\tString food = obj.highestRated(&quot;dmnuqeatj&quot;);\r\n\t\tSystem.out.println(food);\r\n\t\tobj.changeRating(&quot;kbaxapl&quot;, 8);\r\n\t\tfood = obj.highestRated(&quot;dmnuqeatj&quot;);\r\n\t\tSystem.out.println(food);\r\n\t\tobj.changeRating(&quot;lxoozsbh&quot;, 5);\r\n\t\tfood = obj.highestRated(&quot;dmnuqeatj&quot;);\r\n\t\tSystem.out.println(food);\r\n\t}\r\n\r\n```\r\n\r\nI am not sure why the remove function is not working properly here. \r\n","title":"Why is remove() for TreeSet&lt;String&gt; not working?","body":"<p>I am trying to solve the problem at <a href=\"https://leetcode.com/problems/design-a-food-rating-system\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/design-a-food-rating-system</a> and this is my solution.</p>\n<pre><code>class FoodRatings {\n\n        class SortedSetComparator implements Comparator&lt;String&gt; {\n            public int compare(String A, String B) {\n                if (foodRatingMap.get(A) == foodRatingMap.get(B)) {\n                    return A.compareTo(B);\n                }\n                return foodRatingMap.get(B).compareTo(foodRatingMap.get(A));\n            }\n        }\n\n        Map&lt;String, SortedSet&lt;String&gt;&gt; foodTypeMap;\n        Map&lt;String, String&gt; foodMap;\n        Map&lt;String, Integer&gt; foodRatingMap;\n\n        public FoodRatings(String[] foods, String[] cuisines, int[] ratings) {\n            foodTypeMap = new HashMap&lt;&gt;();\n            foodMap = new HashMap&lt;&gt;();\n            foodRatingMap = new HashMap&lt;&gt;();\n\n            for (int i = 0; i&lt;foods.length; i++) {\n                foodTypeMap.putIfAbsent(cuisines[i], new TreeSet&lt;String&gt; (new SortedSetComparator()));\n                foodMap.put(foods[i], cuisines[i]);\n                foodRatingMap.put(foods[i], ratings[i]);\n                foodTypeMap.get(cuisines[i]).add(foods[i]);\n            }\n        }\n\n        public void changeRating(String food, int newRating) {\n            foodRatingMap.put(food, newRating);\n            SortedSet&lt;String&gt; set = foodTypeMap.get(foodMap.get(food));\n            if (!set.remove(food)) {\n                System.out.println(&quot;Unable to find &quot; + food);\n            }\n            foodTypeMap.get(foodMap.get(food)).add(food);\n        }\n        \n        public String highestRated(String cuisine) {\n            return foodTypeMap.get(cuisine).first();\n        }\n        \n    }\n</code></pre>\n<p>Could anyone tell me why the TreeSet remove() method is not working ?</p>\n<p>Here is the input for the same.</p>\n<pre><code>    public static void main(String args[]) {\n\n        String[] foods = new String[] {\n            &quot;czopaaeyl&quot;, &quot;lxoozsbh&quot;, &quot;kbaxapl&quot;\n        };\n        String[] cuisines = new String[] {\n            &quot;dmnuqeatj&quot;, &quot;dmnuqeatj&quot;, &quot;dmnuqeatj&quot;\n        };\n        int[] ratings = new int[] {\n            11, 2, 15\n        };\n\n        FoodRatings obj = new MyClass().new FoodRatings(foods, cuisines, ratings);\n        obj.changeRating(&quot;czopaaeyl&quot;, 12);\n        String food = obj.highestRated(&quot;dmnuqeatj&quot;);\n        System.out.println(food);\n        obj.changeRating(&quot;kbaxapl&quot;, 8);\n        food = obj.highestRated(&quot;dmnuqeatj&quot;);\n        System.out.println(food);\n        obj.changeRating(&quot;lxoozsbh&quot;, 5);\n        food = obj.highestRated(&quot;dmnuqeatj&quot;);\n        System.out.println(food);\n    }\n\n</code></pre>\n<p>I am not sure why the remove function is not working properly here.</p>\n"},{"tags":["java","validation","reference","xades4j"],"comments":[{"owner":{"account_id":1765998,"reputation":2065,"user_id":1611874,"display_name":"lgoncalves"},"score":0,"creation_date":1647683936,"post_id":71517367,"comment_id":126435937,"body_markdown":"At first glance, the code seems correct. The error you&#39;re getting is related to the digest value of the Reference, so not related to certificate validation. \nCould it be some problem when reading the file (e.g. encoding or so) that would make the contents look different?","body":"At first glance, the code seems correct. The error you&#39;re getting is related to the digest value of the Reference, so not related to certificate validation.  Could it be some problem when reading the file (e.g. encoding or so) that would make the contents look different?"},{"owner":{"account_id":18988736,"reputation":1,"user_id":13858460,"display_name":"moi glez"},"score":0,"creation_date":1647886397,"post_id":71517367,"comment_id":126479313,"body_markdown":"Another time, you are correct... putting new InputStreamReader(new FileInputStream(SIGNED), java.nio.charset.StandardCharsets.UTF_8)) instead of  FileReader(SIGNED), validation runs Ok! Thanks another time","body":"Another time, you are correct... putting new InputStreamReader(new FileInputStream(SIGNED), java.nio.charset.StandardCharsets.UTF_8)) instead of  FileReader(SIGNED), validation runs Ok! Thanks another time"}],"answers":[{"tags":[],"owner":{"account_id":25819156,"reputation":98,"user_id":19558604,"display_name":"bsanchezb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658691705,"creation_date":1658691705,"answer_id":73101495,"question_id":71517367,"body_markdown":"The problem is that you provide to the validator only the ds:Signature element:\r\n\r\n    NodeList nl = doc.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Signature&quot;);\r\n\r\nWhile you should provide the complete XML document, as the signature covers the enveloping content, see the first reference URI:\r\n\r\n    &lt;ds:Reference Id=&quot;Reference-bce06403-5236-41d2-876e-fa045b90290d&quot; URI=&quot;&quot;&gt;\r\n\r\nThe empty URI=&quot;&quot; means the validator needs to dereference the whole XML node containing the current signature, and in your case it fails, as it cannot find the enveloping content. See [XMLDSig][1] for more information about the signature dereference model.\r\n\r\n\r\n  [1]: https://www.w3.org/TR/xmldsig-core1/#sec-ReferenceProcessingModel","title":"xades4j validation error: Reference &#39;&#39; cannot be validated","body":"<p>The problem is that you provide to the validator only the ds:Signature element:</p>\n<pre><code>NodeList nl = doc.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Signature&quot;);\n</code></pre>\n<p>While you should provide the complete XML document, as the signature covers the enveloping content, see the first reference URI:</p>\n<pre><code>&lt;ds:Reference Id=&quot;Reference-bce06403-5236-41d2-876e-fa045b90290d&quot; URI=&quot;&quot;&gt;\n</code></pre>\n<p>The empty URI=&quot;&quot; means the validator needs to dereference the whole XML node containing the current signature, and in your case it fails, as it cannot find the enveloping content. See <a href=\"https://www.w3.org/TR/xmldsig-core1/#sec-ReferenceProcessingModel\" rel=\"nofollow noreferrer\">XMLDSig</a> for more information about the signature dereference model.</p>\n"}],"owner":{"account_id":18988736,"reputation":1,"user_id":13858460,"display_name":"moi glez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658691705,"creation_date":1647541773,"question_id":71517367,"body_markdown":"I get an error like this when I try to validate a XADES file:\r\n\r\n    xades4j.verification.ReferenceValueException: Reference &#39;&#39; cannot be validated\r\n\tat deployment.mora.war//xades4j.verification.XadesVerifierImpl.doCoreVerification(XadesVerifierImpl.java:354)\r\n\tat deployment.mora.war//xades4j.verification.XadesVerifierImpl.verify(XadesVerifierImpl.java:214)\r\n\r\nThe code to verify is this:\r\n\r\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n        factory.setNamespaceAware(true);\r\n        DocumentBuilder builder = factory.newDocumentBuilder();\r\n        org.w3c.dom.Document doc = builder.parse(new InputSource(new FileReader(SIGNED)));\r\n        DOMHelper.useIdAsXmlId(doc.getDocumentElement());\r\n\r\n        NodeList nl = doc.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Signature&quot;);\r\n\r\n        FileSystemDirectoryCertStore certStore = new FileSystemDirectoryCertStore(CERT_FOLDER);\r\n        KeyStore ks;\r\n        try (FileInputStream fis = new FileInputStream(CERT_FOLDER + KEY_STORE)) {\r\n            ks = KeyStore.getInstance(&quot;jks&quot;);\r\n            ks.load(fis, PASS.toCharArray());\r\n        }\r\n\r\n        CertificateValidationProvider provider = PKIXCertificateValidationProvider.builder(ks)\r\n                    .checkRevocation(false)\r\n                    .intermediateCertStores(certStore.getStore())\r\n                    .build();\r\n        XadesVerificationProfile profile = new XadesVerificationProfile(provider);\r\n        org.w3c.dom.Element sigElem = (org.w3c.dom.Element) nl.item(0);\r\n        XAdESVerificationResult r = profile.newVerifier().verify(sigElem, null);\r\n\r\nThe signature element inside the XADES is like that:\r\n\r\n```\r\n&lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;ds:SignedInfo&gt;\r\n&lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot; /&gt;\r\n&lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot; /&gt;\r\n\r\n&lt;ds:Reference Id=&quot;Reference-bce06403-5236-41d2-876e-fa045b90290d&quot; URI=&quot;&quot;&gt;\r\n&lt;ds:Transforms&gt;\r\n&lt;ds:Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot; /&gt;\r\n&lt;/ds:Transforms&gt;\r\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\r\n&lt;ds:DigestValue&gt;vj9jpZh17pKA28p7a34YsTC7rrwof55klvGjnf0bPPM=&lt;/ds:DigestValue&gt;\r\n&lt;/ds:Reference&gt;\r\n\r\n&lt;ds:Reference Id=&quot;ReferenceKeyInfo&quot; URI=&quot;#KeyInfoId-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\r\n&lt;ds:DigestValue&gt;GDh/QzYxs0rqhpR0pSmaJrsevT+OMoj/exTN0BvzlRw=&lt;/ds:DigestValue&gt;\r\n&lt;/ds:Reference&gt;\r\n\r\n&lt;ds:Reference Type=&quot;http://uri.etsi.org/01903#SignedProperties&quot; URI=&quot;#SignedProperties-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\r\n&lt;ds:DigestValue&gt;5q0IptSTJjVcURg4dQrEIKSBVHjP7sSmN5hwKzq2VZs=&lt;/ds:DigestValue&gt;\r\n&lt;/ds:Reference&gt;\r\n\r\n&lt;/ds:SignedInfo&gt;\r\n&lt;ds:SignatureValue Id=&quot;SignatureValue-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;N2iKgDKSy...==&lt;/ds:SignatureValue&gt;\r\n&lt;ds:KeyInfo Id=&quot;KeyInfoId-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;ds:X509Data&gt;\r\n&lt;ds:X509Certificate&gt;MIII8D...&lt;/ds:X509Certificate&gt;\r\n&lt;/ds:X509Data&gt;\r\n&lt;ds:KeyValue&gt;\r\n&lt;ds:RSAKeyValue&gt;\r\n&lt;ds:Modulus&gt;wgcwrorO+vOgKWGMzLCega0a/oNMdSHMTxmO6C7z7ISfU80ddnlODmutRl5OLaHLDgaRVCJ9KmNPpW8uW/c8KOvnCt6JMOyUb1yBnLJgl5YGgJSelLXmZrUNp3daRFqE46C1o53LS93ljQ63vWDlYQIdqaSBCMKYNpqBX0PBPHft8v8Od0NvuCEnRlWhOYXITo/Lu7p3mCuRNYiJ8MZHPf4faoalhMA5y9sFZHTqtr1XrDoM3D5UrTPbubVkKMFK1xQyDyb9Vj7m1NSwv63lgDpG2ouSK2t6ixzxgf/GTkN3el2Nx+6QhNro92IkicE3aRew9P756V5l3063PHyMzQ==&lt;/ds:Modulus&gt;\r\n&lt;ds:Exponent&gt;AQAB&lt;/ds:Exponent&gt;\r\n&lt;/ds:RSAKeyValue&gt;\r\n&lt;/ds:KeyValue&gt;\r\n&lt;/ds:KeyInfo&gt;\r\n&lt;ds:Object Id=&quot;XadesObjectId-642b3de2-fb1a-424e-87a6-59be13fadf1f&quot;&gt;\r\n&lt;xades:QualifyingProperties xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Id=&quot;QualifyingProperties-a522752d-2de4-4f5a-9d30-830370962953&quot; Target=&quot;#Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;xades:SignedProperties Id=&quot;SignedProperties-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\r\n&lt;xades:SignedSignatureProperties&gt;\r\n&lt;xades:SigningTime&gt;2022-02-08T10:04:05+01:00&lt;/xades:SigningTime&gt;\r\n&lt;xades:SigningCertificate&gt;\r\n&lt;xades:Cert&gt;\r\n&lt;xades:CertDigest&gt;\r\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\r\n&lt;ds:DigestValue&gt;gb86Dv+uNj+Dsup33d2FvOx7f22G/jX7UstM7uH8i4c=&lt;/ds:DigestValue&gt;\r\n&lt;/xades:CertDigest&gt;\r\n&lt;xades:IssuerSerial&gt;\r\n&lt;ds:X509IssuerName&gt;CN=AC Representaci&#243;n, OU=CERES, O=FNMT-RCM, C=ES&lt;/ds:X509IssuerName&gt;\r\n&lt;ds:X509SerialNumber&gt;81878359483328253772408023375514979749&lt;/ds:X509SerialNumber&gt;\r\n&lt;/xades:IssuerSerial&gt;\r\n&lt;/xades:Cert&gt;\r\n&lt;/xades:SigningCertificate&gt;\r\n&lt;/xades:SignedSignatureProperties&gt;\r\n&lt;xades:SignedDataObjectProperties&gt;\r\n&lt;xades:DataObjectFormat ObjectReference=&quot;#Reference-bce06403-5236-41d2-876e-fa045b90290d&quot;&gt;\r\n&lt;xades:MimeType&gt;text/xml&lt;/xades:MimeType&gt;\r\n&lt;xades:Encoding&gt;UTF-8&lt;/xades:Encoding&gt;\r\n&lt;/xades:DataObjectFormat&gt;\r\n&lt;/xades:SignedDataObjectProperties&gt;\r\n&lt;/xades:SignedProperties&gt;\r\n&lt;/xades:QualifyingProperties&gt;\r\n&lt;/ds:Object&gt;\r\n&lt;/ds:Signature&gt;\r\n```\r\n\r\nThe XADES is not generated using xades4j, but the file &quot;passes&quot; the validation of several online testers (https://tools.chilkat.io/xmlDsigVerify.cshtml#generatedCode, https://ec.europa.eu/cefdigital/DSS/webapp-demo/validation, https://validator.fina.hr/eSigWebApp-web/#validate), so I suppose that the xades4j validation I perform is stronger in some way...\r\n\r\nHow should I configure the CertificateValidationProvider in order to pass the validation? I mean that I only want to check the integrity of the XADES file (ensure that the content has not been altered, basically check the digests and the signature)\r\n\r\n","title":"xades4j validation error: Reference &#39;&#39; cannot be validated","body":"<p>I get an error like this when I try to validate a XADES file:</p>\n<pre><code>xades4j.verification.ReferenceValueException: Reference '' cannot be validated\nat deployment.mora.war//xades4j.verification.XadesVerifierImpl.doCoreVerification(XadesVerifierImpl.java:354)\nat deployment.mora.war//xades4j.verification.XadesVerifierImpl.verify(XadesVerifierImpl.java:214)\n</code></pre>\n<p>The code to verify is this:</p>\n<pre><code>    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    factory.setNamespaceAware(true);\n    DocumentBuilder builder = factory.newDocumentBuilder();\n    org.w3c.dom.Document doc = builder.parse(new InputSource(new FileReader(SIGNED)));\n    DOMHelper.useIdAsXmlId(doc.getDocumentElement());\n\n    NodeList nl = doc.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Signature&quot;);\n\n    FileSystemDirectoryCertStore certStore = new FileSystemDirectoryCertStore(CERT_FOLDER);\n    KeyStore ks;\n    try (FileInputStream fis = new FileInputStream(CERT_FOLDER + KEY_STORE)) {\n        ks = KeyStore.getInstance(&quot;jks&quot;);\n        ks.load(fis, PASS.toCharArray());\n    }\n\n    CertificateValidationProvider provider = PKIXCertificateValidationProvider.builder(ks)\n                .checkRevocation(false)\n                .intermediateCertStores(certStore.getStore())\n                .build();\n    XadesVerificationProfile profile = new XadesVerificationProfile(provider);\n    org.w3c.dom.Element sigElem = (org.w3c.dom.Element) nl.item(0);\n    XAdESVerificationResult r = profile.newVerifier().verify(sigElem, null);\n</code></pre>\n<p>The signature element inside the XADES is like that:</p>\n<pre><code>&lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;ds:SignedInfo&gt;\n&lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot; /&gt;\n&lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot; /&gt;\n\n&lt;ds:Reference Id=&quot;Reference-bce06403-5236-41d2-876e-fa045b90290d&quot; URI=&quot;&quot;&gt;\n&lt;ds:Transforms&gt;\n&lt;ds:Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot; /&gt;\n&lt;/ds:Transforms&gt;\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\n&lt;ds:DigestValue&gt;vj9jpZh17pKA28p7a34YsTC7rrwof55klvGjnf0bPPM=&lt;/ds:DigestValue&gt;\n&lt;/ds:Reference&gt;\n\n&lt;ds:Reference Id=&quot;ReferenceKeyInfo&quot; URI=&quot;#KeyInfoId-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\n&lt;ds:DigestValue&gt;GDh/QzYxs0rqhpR0pSmaJrsevT+OMoj/exTN0BvzlRw=&lt;/ds:DigestValue&gt;\n&lt;/ds:Reference&gt;\n\n&lt;ds:Reference Type=&quot;http://uri.etsi.org/01903#SignedProperties&quot; URI=&quot;#SignedProperties-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\n&lt;ds:DigestValue&gt;5q0IptSTJjVcURg4dQrEIKSBVHjP7sSmN5hwKzq2VZs=&lt;/ds:DigestValue&gt;\n&lt;/ds:Reference&gt;\n\n&lt;/ds:SignedInfo&gt;\n&lt;ds:SignatureValue Id=&quot;SignatureValue-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;N2iKgDKSy...==&lt;/ds:SignatureValue&gt;\n&lt;ds:KeyInfo Id=&quot;KeyInfoId-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;ds:X509Data&gt;\n&lt;ds:X509Certificate&gt;MIII8D...&lt;/ds:X509Certificate&gt;\n&lt;/ds:X509Data&gt;\n&lt;ds:KeyValue&gt;\n&lt;ds:RSAKeyValue&gt;\n&lt;ds:Modulus&gt;wgcwrorO+vOgKWGMzLCega0a/oNMdSHMTxmO6C7z7ISfU80ddnlODmutRl5OLaHLDgaRVCJ9KmNPpW8uW/c8KOvnCt6JMOyUb1yBnLJgl5YGgJSelLXmZrUNp3daRFqE46C1o53LS93ljQ63vWDlYQIdqaSBCMKYNpqBX0PBPHft8v8Od0NvuCEnRlWhOYXITo/Lu7p3mCuRNYiJ8MZHPf4faoalhMA5y9sFZHTqtr1XrDoM3D5UrTPbubVkKMFK1xQyDyb9Vj7m1NSwv63lgDpG2ouSK2t6ixzxgf/GTkN3el2Nx+6QhNro92IkicE3aRew9P756V5l3063PHyMzQ==&lt;/ds:Modulus&gt;\n&lt;ds:Exponent&gt;AQAB&lt;/ds:Exponent&gt;\n&lt;/ds:RSAKeyValue&gt;\n&lt;/ds:KeyValue&gt;\n&lt;/ds:KeyInfo&gt;\n&lt;ds:Object Id=&quot;XadesObjectId-642b3de2-fb1a-424e-87a6-59be13fadf1f&quot;&gt;\n&lt;xades:QualifyingProperties xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Id=&quot;QualifyingProperties-a522752d-2de4-4f5a-9d30-830370962953&quot; Target=&quot;#Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;xades:SignedProperties Id=&quot;SignedProperties-Signature-a0357d3c-02ff-4a71-888c-aab6fc2a8b1e&quot;&gt;\n&lt;xades:SignedSignatureProperties&gt;\n&lt;xades:SigningTime&gt;2022-02-08T10:04:05+01:00&lt;/xades:SigningTime&gt;\n&lt;xades:SigningCertificate&gt;\n&lt;xades:Cert&gt;\n&lt;xades:CertDigest&gt;\n&lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot; /&gt;\n&lt;ds:DigestValue&gt;gb86Dv+uNj+Dsup33d2FvOx7f22G/jX7UstM7uH8i4c=&lt;/ds:DigestValue&gt;\n&lt;/xades:CertDigest&gt;\n&lt;xades:IssuerSerial&gt;\n&lt;ds:X509IssuerName&gt;CN=AC Representacin, OU=CERES, O=FNMT-RCM, C=ES&lt;/ds:X509IssuerName&gt;\n&lt;ds:X509SerialNumber&gt;81878359483328253772408023375514979749&lt;/ds:X509SerialNumber&gt;\n&lt;/xades:IssuerSerial&gt;\n&lt;/xades:Cert&gt;\n&lt;/xades:SigningCertificate&gt;\n&lt;/xades:SignedSignatureProperties&gt;\n&lt;xades:SignedDataObjectProperties&gt;\n&lt;xades:DataObjectFormat ObjectReference=&quot;#Reference-bce06403-5236-41d2-876e-fa045b90290d&quot;&gt;\n&lt;xades:MimeType&gt;text/xml&lt;/xades:MimeType&gt;\n&lt;xades:Encoding&gt;UTF-8&lt;/xades:Encoding&gt;\n&lt;/xades:DataObjectFormat&gt;\n&lt;/xades:SignedDataObjectProperties&gt;\n&lt;/xades:SignedProperties&gt;\n&lt;/xades:QualifyingProperties&gt;\n&lt;/ds:Object&gt;\n&lt;/ds:Signature&gt;\n</code></pre>\n<p>The XADES is not generated using xades4j, but the file &quot;passes&quot; the validation of several online testers (<a href=\"https://tools.chilkat.io/xmlDsigVerify.cshtml#generatedCode\" rel=\"nofollow noreferrer\">https://tools.chilkat.io/xmlDsigVerify.cshtml#generatedCode</a>, <a href=\"https://ec.europa.eu/cefdigital/DSS/webapp-demo/validation\" rel=\"nofollow noreferrer\">https://ec.europa.eu/cefdigital/DSS/webapp-demo/validation</a>, <a href=\"https://validator.fina.hr/eSigWebApp-web/#validate\" rel=\"nofollow noreferrer\">https://validator.fina.hr/eSigWebApp-web/#validate</a>), so I suppose that the xades4j validation I perform is stronger in some way...</p>\n<p>How should I configure the CertificateValidationProvider in order to pass the validation? I mean that I only want to check the integrity of the XADES file (ensure that the content has not been altered, basically check the digests and the signature)</p>\n"},{"tags":["java","android","xml","materialcardview"],"answers":[{"tags":[],"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658691377,"creation_date":1658691377,"answer_id":73101461,"question_id":73101397,"body_markdown":"You&#39;re setting \r\n```\r\nandroid:layout_width=&quot;232dp&quot;\r\nandroid:layout_height=&quot;376dp&quot;\r\n```\r\n\r\nwhich are fixed values when you put `app:cardCornerRadius=&quot;120dp&quot;` which is very high it does not get the space to complete it&#39;s 120dp radius on a smaller screen..\r\nUse a background drawable or a different solution. This solution will work perfectly only in the 6.7 inch screen that you have and only that\r\n\r\n\r\n","title":"Weird issue with MaterialCardView","body":"<p>You're setting</p>\n<pre><code>android:layout_width=&quot;232dp&quot;\nandroid:layout_height=&quot;376dp&quot;\n</code></pre>\n<p>which are fixed values when you put <code>app:cardCornerRadius=&quot;120dp&quot;</code> which is very high it does not get the space to complete it's 120dp radius on a smaller screen..\nUse a background drawable or a different solution. This solution will work perfectly only in the 6.7 inch screen that you have and only that</p>\n"}],"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73101461,"answer_count":1,"score":0,"last_activity_date":1658691377,"creation_date":1658690760,"question_id":73101397,"body_markdown":"I&#39;m trying to make a rounded shape like this :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe code below works great on a device with 6.7&quot; as screen size.\r\n\r\n       &lt;com.google.android.material.card.MaterialCardView\r\n            android:id=&quot;@+id/resultHolder&quot;\r\n            android:layout_width=&quot;232dp&quot;\r\n            android:layout_height=&quot;376dp&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:rotation=&quot;15&quot;\r\n            android:outlineProvider=&quot;background&quot;\r\n            android:theme=&quot;@style/Theme.MaterialComponents.Light&quot;\r\n            app:cardBackgroundColor=&quot;@color/black&quot;\r\n            app:cardCornerRadius=&quot;120dp&quot;\r\n            app:cardElevation=&quot;0dp&quot;\r\n            app:strokeColor=&quot;@color/green_neon&quot;\r\n            app:strokeWidth=&quot;6dp&quot;&gt;\r\n    \r\n    \r\n            &lt;ImageView\r\n                android:src=&quot;@drawable/thumbnail&quot;\r\n                android:id=&quot;@+id/resultImageView&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:scaleType=&quot;centerCrop&quot; /&gt;\r\n    \r\n        &lt;/com.google.android.material.card.MaterialCardView&gt;\r\n\r\n\r\nBut when I test the app on device with 5.1&quot; as screen size. I get this :\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Mqizn.png\r\n  [2]: https://i.stack.imgur.com/yiOiM.png","title":"Weird issue with MaterialCardView","body":"<p>I'm trying to make a rounded shape like this :</p>\n<p><a href=\"https://i.stack.imgur.com/Mqizn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mqizn.png\" alt=\"enter image description here\" /></a></p>\n<p>The code below works great on a device with 6.7&quot; as screen size.</p>\n<pre><code>   &lt;com.google.android.material.card.MaterialCardView\n        android:id=&quot;@+id/resultHolder&quot;\n        android:layout_width=&quot;232dp&quot;\n        android:layout_height=&quot;376dp&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_centerVertical=&quot;true&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:gravity=&quot;center&quot;\n        android:rotation=&quot;15&quot;\n        android:outlineProvider=&quot;background&quot;\n        android:theme=&quot;@style/Theme.MaterialComponents.Light&quot;\n        app:cardBackgroundColor=&quot;@color/black&quot;\n        app:cardCornerRadius=&quot;120dp&quot;\n        app:cardElevation=&quot;0dp&quot;\n        app:strokeColor=&quot;@color/green_neon&quot;\n        app:strokeWidth=&quot;6dp&quot;&gt;\n\n\n        &lt;ImageView\n            android:src=&quot;@drawable/thumbnail&quot;\n            android:id=&quot;@+id/resultImageView&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:scaleType=&quot;centerCrop&quot; /&gt;\n\n    &lt;/com.google.android.material.card.MaterialCardView&gt;\n</code></pre>\n<p>But when I test the app on device with 5.1&quot; as screen size. I get this :</p>\n<p><a href=\"https://i.stack.imgur.com/yiOiM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yiOiM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xml","element","document","xml-namespaces"],"answers":[{"tags":[],"owner":{"account_id":25819156,"reputation":98,"user_id":19558604,"display_name":"bsanchezb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658691315,"creation_date":1658691315,"answer_id":73101455,"question_id":71668227,"body_markdown":"It seems like you need to apply canonicalization on the extracted xades:SignedProperties node.\r\nYou may try to use [Canonicalizer][1] from Apache Santuario library and canonicalize the extracted node:\r\n\r\n    public static byte[] canonicalizeSubtree(final String canonicalizationMethod, final Node node) {\r\n\t\ttry (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n\t\t\tfinal Canonicalizer c14n = Canonicalizer.getInstance(getCanonicalizationMethod(canonicalizationMethod));\r\n\t\t\tc14n.canonicalizeSubtree(node, baos);\r\n\t\t\treturn baos.toByteArray();\r\n\t\t} catch (Exception e) {\r\n\t\t\t// some logic here\r\n\t\t}\r\n\t}\r\n\r\nFor the canonicalization method, it more looks like an &quot;inclusive&quot; canonicalization, e.g.: &quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments&quot; (see [ALGO_ID_C14N_WITH_COMMENTS][2]).\r\n\r\n\r\n  [1]: https://santuario.apache.org/Java/api/org/apache/xml/security/c14n/Canonicalizer.html\r\n  [2]: https://santuario.apache.org/Java/api/org/apache/xml/security/c14n/Canonicalizer.html#ALGO_ID_C14N_WITH_COMMENTS","title":"How to get a node from xml with all inscope namespaces in root element","body":"<p>It seems like you need to apply canonicalization on the extracted xades:SignedProperties node.\nYou may try to use <a href=\"https://santuario.apache.org/Java/api/org/apache/xml/security/c14n/Canonicalizer.html\" rel=\"nofollow noreferrer\">Canonicalizer</a> from Apache Santuario library and canonicalize the extracted node:</p>\n<pre><code>public static byte[] canonicalizeSubtree(final String canonicalizationMethod, final Node node) {\n    try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n        final Canonicalizer c14n = Canonicalizer.getInstance(getCanonicalizationMethod(canonicalizationMethod));\n        c14n.canonicalizeSubtree(node, baos);\n        return baos.toByteArray();\n    } catch (Exception e) {\n        // some logic here\n    }\n}\n</code></pre>\n<p>For the canonicalization method, it more looks like an &quot;inclusive&quot; canonicalization, e.g.: &quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments&quot; (see <a href=\"https://santuario.apache.org/Java/api/org/apache/xml/security/c14n/Canonicalizer.html#ALGO_ID_C14N_WITH_COMMENTS\" rel=\"nofollow noreferrer\">ALGO_ID_C14N_WITH_COMMENTS</a>).</p>\n"}],"owner":{"account_id":19503945,"reputation":31,"user_id":14269384,"display_name":"keerthana k"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658691315,"creation_date":1648584593,"question_id":71668227,"body_markdown":"Here is my XML file content\r\n\r\n```\r\n&lt;Invoice xmlns=&quot;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2&quot; xmlns:cac=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2&quot; \r\nxmlns:cbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2&quot; xmlns:ds=&quot; http://www.w3.org/2000/09/xmldsig#&quot; xmlns:ext=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2&quot; xmlns:sac=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2&quot; \r\nxmlns:sbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureBasicComponents-2&quot; xmlns:sig=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2&quot;&gt;\r\n    &lt;ext:UBLExtensions&gt;\r\n        &lt;ext:UBLExtension&gt;\r\n            &lt;ext:ExtensionURI&gt;urn:oasis:names:specification:ubl:dsig:enveloped:xades&lt;/ext:ExtensionURI&gt;\r\n            &lt;ext:ExtensionContent&gt;\r\n              &lt;sig:UBLDocumentSignatures&gt;\r\n               &lt;sac:SignatureInformation&gt;\r\n                  &lt;cbc:ID&gt;urn:oasis:names:specification:ubl:signature:1&lt;/cbc:ID&gt;\r\n                  &lt;sbc:ReferencedSignatureID&gt;urn:oasis:names:specification:ubl:signature:Invoicesadas&lt;/sbc:ReferencedSignatureID&gt;\r\n                  &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;signature&quot;&gt;\r\n                     &lt;ds:SignedInfo&gt;\r\n                         &lt;!-- SOME CONTENT HERE --&gt;\r\n                    &lt;/ds:SignedInfo&gt;\r\n                     &lt;ds:SignatureValue&gt;&lt;/ds:SignatureValue&gt;\r\n                     &lt;ds:KeyInfo&gt;\r\n                        &lt;ds:X509Data&gt;\r\n                           &lt;ds:X509Certificate&gt;&lt;/ds:X509Certificate&gt;\r\n                        &lt;/ds:X509Data&gt;\r\n                     &lt;/ds:KeyInfo&gt;\r\n                     &lt;ds:Object&gt;\r\n                        &lt;xades:QualifyingProperties xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Target=&quot;signature&quot;&gt;\r\n                           &lt;xades:SignedProperties Id=&quot;xadesSignedProperties&quot;&gt;\r\n                              &lt;xades:SignedSignatureProperties&gt;\r\n                                 &lt;xades:SigningTime&gt;2020-12-25T12:57:51Z&lt;/xades:SigningTime&gt;\r\n                                 &lt;xades:SigningCertificate&gt;\r\n                                    &lt;xades:Cert&gt;\r\n                                       &lt;xades:CertDigest&gt;\r\n                                          &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;/&gt;\r\n                                          &lt;ds:DigestValue&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:DigestValue&gt;\r\n                                       &lt;/xades:CertDigest&gt;\r\n                                       &lt;xades:IssuerSerial&gt;\r\n                                          &lt;ds:X509IssuerName&gt;&lt;!-- SOME VALUE HERE--&gt;&lt;/ds:X509IssuerName&gt;\r\n                                          &lt;ds:X509SerialNumber&gt;&lt;!-- SOME VALUE HERE--&gt;&lt;/ds:X509SerialNumber&gt;\r\n                                       &lt;/xades:IssuerSerial&gt;\r\n                                    &lt;/xades:Cert&gt;\r\n                                 &lt;/xades:SigningCertificate&gt;\r\n                              &lt;/xades:SignedSignatureProperties&gt;\r\n                           &lt;/xades:SignedProperties&gt;\r\n                        &lt;/xades:QualifyingProperties&gt;\r\n                     &lt;/ds:Object&gt;\r\n                  &lt;/ds:Signature&gt;\r\n               &lt;/sac:SignatureInformation&gt;\r\n            &lt;/sig:UBLDocumentSignatures&gt;\r\n         &lt;/ext:ExtensionContent&gt;\r\n      &lt;/ext:UBLExtension&gt;\r\n   &lt;/ext:UBLExtensions&gt;\r\n   &lt;!-- SOME CONTENT HERE --&gt;\r\n&lt;/Invoice&gt;\r\n```\r\nI want to retrieve the SignedProperties element with all the in scope xmlns namespaces in the file.\r\nSample Output that i need looks like\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;xades:SignedProperties **xmlns=&quot;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2&quot; xmlns:cac=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2&quot;\r\n xmlns:cbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2&quot; xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; \r\nxmlns:ext=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2&quot; xmlns:sac=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2&quot; xmlns:sbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureBasicComponents-2&quot; \r\nxmlns:sig=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2&quot;** xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Id=&quot;xadesSignedProperties&quot;&gt;\r\n                                        &lt;xades:SignedSignatureProperties&gt;\r\n                                            &lt;xades:SigningTime&gt;020-12-25T12:57:51Z&lt;/xades:SigningTime&gt;\r\n                                            &lt;xades:SigningCertificate&gt;\r\n                                                &lt;xades:Cert&gt;\r\n                                                    &lt;xades:CertDigest&gt;\r\n                                                        &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;/&gt;\r\n                                                        &lt;ds:DigestValue&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:DigestValue&gt;\r\n                                                    &lt;/xades:CertDigest&gt;\r\n                                                    &lt;xades:IssuerSerial&gt;\r\n                                                        &lt;ds:X509IssuerName&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:X509IssuerName&gt;\r\n                                                        &lt;ds:X509SerialNumber&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:X509SerialNumber&gt;\r\n                                                    &lt;/xades:IssuerSerial&gt;\r\n                                                &lt;/xades:Cert&gt;\r\n                                            &lt;/xades:SigningCertificate&gt;\r\n                                        &lt;/xades:SignedSignatureProperties&gt;\r\n                                    &lt;/xades:SignedProperties&gt;\r\n```\r\nBut I am getting output without the namespaces defined in the root element in the file.\r\n\r\nHow should i get the element with all the namespaces declared in scope in the XML file?","title":"How to get a node from xml with all inscope namespaces in root element","body":"<p>Here is my XML file content</p>\n<pre><code>&lt;Invoice xmlns=&quot;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2&quot; xmlns:cac=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2&quot; \nxmlns:cbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2&quot; xmlns:ds=&quot; http://www.w3.org/2000/09/xmldsig#&quot; xmlns:ext=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2&quot; xmlns:sac=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2&quot; \nxmlns:sbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureBasicComponents-2&quot; xmlns:sig=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2&quot;&gt;\n    &lt;ext:UBLExtensions&gt;\n        &lt;ext:UBLExtension&gt;\n            &lt;ext:ExtensionURI&gt;urn:oasis:names:specification:ubl:dsig:enveloped:xades&lt;/ext:ExtensionURI&gt;\n            &lt;ext:ExtensionContent&gt;\n              &lt;sig:UBLDocumentSignatures&gt;\n               &lt;sac:SignatureInformation&gt;\n                  &lt;cbc:ID&gt;urn:oasis:names:specification:ubl:signature:1&lt;/cbc:ID&gt;\n                  &lt;sbc:ReferencedSignatureID&gt;urn:oasis:names:specification:ubl:signature:Invoicesadas&lt;/sbc:ReferencedSignatureID&gt;\n                  &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;signature&quot;&gt;\n                     &lt;ds:SignedInfo&gt;\n                         &lt;!-- SOME CONTENT HERE --&gt;\n                    &lt;/ds:SignedInfo&gt;\n                     &lt;ds:SignatureValue&gt;&lt;/ds:SignatureValue&gt;\n                     &lt;ds:KeyInfo&gt;\n                        &lt;ds:X509Data&gt;\n                           &lt;ds:X509Certificate&gt;&lt;/ds:X509Certificate&gt;\n                        &lt;/ds:X509Data&gt;\n                     &lt;/ds:KeyInfo&gt;\n                     &lt;ds:Object&gt;\n                        &lt;xades:QualifyingProperties xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Target=&quot;signature&quot;&gt;\n                           &lt;xades:SignedProperties Id=&quot;xadesSignedProperties&quot;&gt;\n                              &lt;xades:SignedSignatureProperties&gt;\n                                 &lt;xades:SigningTime&gt;2020-12-25T12:57:51Z&lt;/xades:SigningTime&gt;\n                                 &lt;xades:SigningCertificate&gt;\n                                    &lt;xades:Cert&gt;\n                                       &lt;xades:CertDigest&gt;\n                                          &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;/&gt;\n                                          &lt;ds:DigestValue&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:DigestValue&gt;\n                                       &lt;/xades:CertDigest&gt;\n                                       &lt;xades:IssuerSerial&gt;\n                                          &lt;ds:X509IssuerName&gt;&lt;!-- SOME VALUE HERE--&gt;&lt;/ds:X509IssuerName&gt;\n                                          &lt;ds:X509SerialNumber&gt;&lt;!-- SOME VALUE HERE--&gt;&lt;/ds:X509SerialNumber&gt;\n                                       &lt;/xades:IssuerSerial&gt;\n                                    &lt;/xades:Cert&gt;\n                                 &lt;/xades:SigningCertificate&gt;\n                              &lt;/xades:SignedSignatureProperties&gt;\n                           &lt;/xades:SignedProperties&gt;\n                        &lt;/xades:QualifyingProperties&gt;\n                     &lt;/ds:Object&gt;\n                  &lt;/ds:Signature&gt;\n               &lt;/sac:SignatureInformation&gt;\n            &lt;/sig:UBLDocumentSignatures&gt;\n         &lt;/ext:ExtensionContent&gt;\n      &lt;/ext:UBLExtension&gt;\n   &lt;/ext:UBLExtensions&gt;\n   &lt;!-- SOME CONTENT HERE --&gt;\n&lt;/Invoice&gt;\n</code></pre>\n<p>I want to retrieve the SignedProperties element with all the in scope xmlns namespaces in the file.\nSample Output that i need looks like</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;xades:SignedProperties **xmlns=&quot;urn:oasis:names:specification:ubl:schema:xsd:Invoice-2&quot; xmlns:cac=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2&quot;\n xmlns:cbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2&quot; xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; \nxmlns:ext=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2&quot; xmlns:sac=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2&quot; xmlns:sbc=&quot;urn:oasis:names:specification:ubl:schema:xsd:SignatureBasicComponents-2&quot; \nxmlns:sig=&quot;urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2&quot;** xmlns:xades=&quot;http://uri.etsi.org/01903/v1.3.2#&quot; Id=&quot;xadesSignedProperties&quot;&gt;\n                                        &lt;xades:SignedSignatureProperties&gt;\n                                            &lt;xades:SigningTime&gt;020-12-25T12:57:51Z&lt;/xades:SigningTime&gt;\n                                            &lt;xades:SigningCertificate&gt;\n                                                &lt;xades:Cert&gt;\n                                                    &lt;xades:CertDigest&gt;\n                                                        &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;/&gt;\n                                                        &lt;ds:DigestValue&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:DigestValue&gt;\n                                                    &lt;/xades:CertDigest&gt;\n                                                    &lt;xades:IssuerSerial&gt;\n                                                        &lt;ds:X509IssuerName&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:X509IssuerName&gt;\n                                                        &lt;ds:X509SerialNumber&gt; &lt;!-- SOME VALUE HERE --&gt;&lt;/ds:X509SerialNumber&gt;\n                                                    &lt;/xades:IssuerSerial&gt;\n                                                &lt;/xades:Cert&gt;\n                                            &lt;/xades:SigningCertificate&gt;\n                                        &lt;/xades:SignedSignatureProperties&gt;\n                                    &lt;/xades:SignedProperties&gt;\n</code></pre>\n<p>But I am getting output without the namespaces defined in the root element in the file.</p>\n<p>How should i get the element with all the namespaces declared in scope in the XML file?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1658482169,"creation_date":1658481711,"answer_id":73078028,"question_id":73077902,"body_markdown":"&gt; The difference is that in the latter case I&#39;m accessing the method without a named reference. Why does the compiler allow such access?\r\n\r\nNo, the difference is that in the latter case you&#39;re accessing the method *on the anonymous class* rather than on a reference of type `One`.\r\n\r\nLeaving aside the oddities around protected access, you can see the difference very easily by just creating an anonymous class with a public method:\r\n\r\n```java\r\nclass Test {\r\n    public static void main(String[] args) {\r\n        // This is fine...\r\n        new Object() {\r\n            public void method() {\r\n                System.out.println(&quot;Called&quot;);\r\n            }\r\n        }.method();\r\n        \r\n        // This is not, because Object doesn&#39;t contain a method called &quot;method&quot;.\r\n        Object o = new Object() {\r\n            public void method() {\r\n                System.out.println(&quot;Called&quot;);\r\n            }\r\n        };\r\n        o.method();        \r\n    }\r\n}\r\n```\r\n\r\nAs noted in comments, another way to see the same effect is to use `var`, so that the compile-time type of the variable is the anonymous class.\r\n\r\nEven private members within anonymous classes can be accessed within the containing scope, just as if they were normal nested classes.","title":"Accessing protected method of anonymous object vs by a named reference","body":"<blockquote>\n<p>The difference is that in the latter case I'm accessing the method without a named reference. Why does the compiler allow such access?</p>\n</blockquote>\n<p>No, the difference is that in the latter case you're accessing the method <em>on the anonymous class</em> rather than on a reference of type <code>One</code>.</p>\n<p>Leaving aside the oddities around protected access, you can see the difference very easily by just creating an anonymous class with a public method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n    public static void main(String[] args) {\n        // This is fine...\n        new Object() {\n            public void method() {\n                System.out.println(&quot;Called&quot;);\n            }\n        }.method();\n        \n        // This is not, because Object doesn't contain a method called &quot;method&quot;.\n        Object o = new Object() {\n            public void method() {\n                System.out.println(&quot;Called&quot;);\n            }\n        };\n        o.method();        \n    }\n}\n</code></pre>\n<p>As noted in comments, another way to see the same effect is to use <code>var</code>, so that the compile-time type of the variable is the anonymous class.</p>\n<p>Even private members within anonymous classes can be accessed within the containing scope, just as if they were normal nested classes.</p>\n"}],"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":918,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":73078028,"answer_count":1,"score":18,"last_activity_date":1658691173,"creation_date":1658481210,"question_id":73077902,"body_markdown":"Say I have this **abstract** class:\r\n\r\n```java\r\npackage test.one;\r\n\r\npublic abstract class One {\r\n  \r\n  protected abstract void whatever();\r\n\r\n  public void run() {\r\n    whatever();\r\n  }\r\n  \r\n}\r\n```\r\n\r\nAnd use it like this:\r\n\r\n```java\r\npackage test.two;\r\n\r\nimport test.one.One;\r\n\r\npublic class Three {\r\n\r\n  public static void main(String[] args) {\r\n    One one = new One() {\r\n      @Override\r\n      protected void whatever() {\r\n        System.out.println(&quot;Do whatever..&quot;);\r\n      }\r\n    };\r\n    one.whatever();\r\n  }\r\n}\r\n```\r\n\r\nThis code **fails on compilation** which is pretty much expected.\r\n\r\n```\r\ntest/two/Three.java:14: error: whatever() has protected access in One\r\n    one.whatever();\r\n       ^\r\n1 error\r\n```\r\n\r\nBut **the below code compiles successfully** which seems surprisingly:\r\n\r\n```java\r\npackage test.two;\r\n\r\nimport test.one.One;\r\n\r\npublic class Two {\r\n\r\n  public static void main(String[] args) {\r\n    new One() {\r\n      @Override\r\n      protected void whatever() {\r\n        System.out.println(&quot;Do whatever..&quot;);\r\n      }\r\n    }.whatever();\r\n  }\r\n}\r\n```\r\n\r\nThe difference is that in the latter case I&#39;m accessing the method without a named reference. Why does the compiler allow such access?","title":"Accessing protected method of anonymous object vs by a named reference","body":"<p>Say I have this <strong>abstract</strong> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test.one;\n\npublic abstract class One {\n  \n  protected abstract void whatever();\n\n  public void run() {\n    whatever();\n  }\n  \n}\n</code></pre>\n<p>And use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test.two;\n\nimport test.one.One;\n\npublic class Three {\n\n  public static void main(String[] args) {\n    One one = new One() {\n      @Override\n      protected void whatever() {\n        System.out.println(&quot;Do whatever..&quot;);\n      }\n    };\n    one.whatever();\n  }\n}\n</code></pre>\n<p>This code <strong>fails on compilation</strong> which is pretty much expected.</p>\n<pre><code>test/two/Three.java:14: error: whatever() has protected access in One\n    one.whatever();\n       ^\n1 error\n</code></pre>\n<p>But <strong>the below code compiles successfully</strong> which seems surprisingly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test.two;\n\nimport test.one.One;\n\npublic class Two {\n\n  public static void main(String[] args) {\n    new One() {\n      @Override\n      protected void whatever() {\n        System.out.println(&quot;Do whatever..&quot;);\n      }\n    }.whatever();\n  }\n}\n</code></pre>\n<p>The difference is that in the latter case I'm accessing the method without a named reference. Why does the compiler allow such access?</p>\n"},{"tags":["java","android","android-layout","android-recyclerview"],"answers":[{"tags":[],"owner":{"account_id":8296744,"reputation":4073,"user_id":6236752,"accept_rate":100,"display_name":"Nouman Ch"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1536130406,"creation_date":1536130406,"answer_id":52178869,"question_id":52178656,"body_markdown":"Here is a layout design of your requirment. \r\nTake reference of these images.\r\nlike \r\n       \r\n\r\n           TextView =  itemView.findViewById(R.id.nmr_of_students);  \r\n            CircularImageViewstudent1 =  itemView.findViewById(R.id.student1);             \r\n            CircularImageViewstudent2 =  itemView.findViewById(R.id.student2);\r\n            CircularImageViewstudent3 =  itemView.findViewById(R.id.student3);\r\n            CircularImageViewstudent4 =  itemView.findViewById(R.id.student4);\r\n            CircularImageViewstudent5 =  itemView.findViewById(R.id.student5);\r\n\r\nnow use below layout and assign value to them. and you are good to go.\r\n   \r\n &lt;FrameLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:paddingTop=&quot;8dp&quot;\r\n                android:paddingBottom=&quot;8dp&quot;\r\n                android:paddingLeft=&quot;16dp&quot;\r\n                android:paddingRight=&quot;16dp&quot;\r\n                &gt;\r\n    \r\n                &lt;RelativeLayout\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_gravity=&quot;center_vertical&quot;\r\n    \r\n                    &gt;\r\n                    &lt;FrameLayout\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n    \r\n                        android:id=&quot;@+id/frames&quot;\r\n                        android:layout_centerHorizontal=&quot;true&quot;\r\n                        android:layout_centerInParent=&quot;true&quot;\r\n                        &gt;\r\n                        &lt;com.mikhaellopez.circularimageview.CircularImageView\r\n                            android:id=&quot;@+id/student1&quot;\r\n                            android:src=&quot;@drawable/user&quot;\r\n                            android:layout_width=&quot;36dip&quot;\r\n                            android:layout_height=&quot;36dip&quot;\r\n                            app:civ_border_width=&quot;1dp&quot;\r\n                            app:civ_border_color=&quot;#ffffff&quot;\r\n                         \r\n                            /&gt;\r\n                        &lt;com.mikhaellopez.circularimageview.CircularImageView\r\n                            android:id=&quot;@+id/student2&quot;\r\n                            android:src=&quot;@drawable/user&quot;\r\n                            android:layout_width=&quot;36dip&quot;\r\n                            android:layout_height=&quot;36dip&quot;\r\n                            android:layout_marginLeft=&quot;20dip&quot;\r\n                            app:civ_border_width=&quot;1dp&quot;\r\n                            app:civ_border_color=&quot;#ffffff&quot;\r\n                           \r\n                            /&gt;\r\n                        &lt;com.mikhaellopez.circularimageview.CircularImageView\r\n                            android:id=&quot;@+id/student3&quot;\r\n                            android:src=&quot;@drawable/user&quot;\r\n                            android:layout_width=&quot;36dip&quot;\r\n                            android:layout_height=&quot;36dip&quot;\r\n                            android:layout_marginLeft=&quot;40dip&quot;\r\n                            app:civ_border_width=&quot;1dp&quot;\r\n                            app:civ_border_color=&quot;#ffffff&quot;\r\n                            \r\n                            /&gt;\r\n                        &lt;com.mikhaellopez.circularimageview.CircularImageView\r\n                            android:id=&quot;@+id/student4&quot;\r\n                            android:src=&quot;@drawable/user&quot;\r\n                            android:layout_width=&quot;36dip&quot;\r\n                            android:layout_height=&quot;36dip&quot;\r\n                            android:layout_marginLeft=&quot;60dip&quot;\r\n                            app:civ_border_width=&quot;1dp&quot;\r\n                            app:civ_border_color=&quot;#ffffff&quot;\r\n                           \r\n                            /&gt;\r\n                        &lt;com.mikhaellopez.circularimageview.CircularImageView\r\n                            android:id=&quot;@+id/student5&quot;\r\n                            android:src=&quot;@drawable/user&quot;\r\n                            android:layout_width=&quot;36dip&quot;\r\n                            android:layout_height=&quot;36dip&quot;\r\n                            android:layout_marginLeft=&quot;80dip&quot;\r\n                            app:civ_border_width=&quot;1dp&quot;\r\n                            app:civ_border_color=&quot;#ffffff&quot;\r\n                         \r\n                            /&gt;\r\n    \r\n                    &lt;/FrameLayout&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_toRightOf=&quot;@+id/frames&quot;\r\n                        android:layout_centerVertical=&quot;true&quot;\r\n                        android:layout_marginLeft=&quot;2dip&quot;\r\n                        android:textSize=&quot;@dimen/home_nmruser_textsize&quot;\r\n                        android:text=&quot;&quot;\r\n                        android:textStyle=&quot;bold&quot;\r\n                        android:textColor=&quot;@color/text_color_gray&quot;\r\n                        android:id=&quot;@+id/nmr_of_students&quot;\r\n                        /&gt;\r\n                    &lt;TextView\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:text=&quot;&quot;\r\n                        android:textSize=&quot;@dimen/home_other_textview&quot;\r\n                        android:layout_marginLeft=&quot;@dimen/home_other_marginleft&quot;\r\n                        android:layout_toRightOf=&quot;@+id/nmr_of_students&quot;\r\n                        android:layout_centerVertical=&quot;true&quot;\r\n                        /&gt;\r\n                &lt;/RelativeLayout&gt;\r\n            &lt;/FrameLayout&gt;","title":"Horizontally of circular images to show user profile picture","body":"<p>Here is a layout design of your requirment. \nTake reference of these images.\nlike </p>\n\n<pre><code>       TextView =  itemView.findViewById(R.id.nmr_of_students);  \n        CircularImageViewstudent1 =  itemView.findViewById(R.id.student1);             \n        CircularImageViewstudent2 =  itemView.findViewById(R.id.student2);\n        CircularImageViewstudent3 =  itemView.findViewById(R.id.student3);\n        CircularImageViewstudent4 =  itemView.findViewById(R.id.student4);\n        CircularImageViewstudent5 =  itemView.findViewById(R.id.student5);\n</code></pre>\n\n<p>now use below layout and assign value to them. and you are good to go.</p>\n\n<p></p>\n\n<pre><code>            &lt;RelativeLayout\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:layout_gravity=\"center_vertical\"\n\n                &gt;\n                &lt;FrameLayout\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n\n                    android:id=\"@+id/frames\"\n                    android:layout_centerHorizontal=\"true\"\n                    android:layout_centerInParent=\"true\"\n                    &gt;\n                    &lt;com.mikhaellopez.circularimageview.CircularImageView\n                        android:id=\"@+id/student1\"\n                        android:src=\"@drawable/user\"\n                        android:layout_width=\"36dip\"\n                        android:layout_height=\"36dip\"\n                        app:civ_border_width=\"1dp\"\n                        app:civ_border_color=\"#ffffff\"\n\n                        /&gt;\n                    &lt;com.mikhaellopez.circularimageview.CircularImageView\n                        android:id=\"@+id/student2\"\n                        android:src=\"@drawable/user\"\n                        android:layout_width=\"36dip\"\n                        android:layout_height=\"36dip\"\n                        android:layout_marginLeft=\"20dip\"\n                        app:civ_border_width=\"1dp\"\n                        app:civ_border_color=\"#ffffff\"\n\n                        /&gt;\n                    &lt;com.mikhaellopez.circularimageview.CircularImageView\n                        android:id=\"@+id/student3\"\n                        android:src=\"@drawable/user\"\n                        android:layout_width=\"36dip\"\n                        android:layout_height=\"36dip\"\n                        android:layout_marginLeft=\"40dip\"\n                        app:civ_border_width=\"1dp\"\n                        app:civ_border_color=\"#ffffff\"\n\n                        /&gt;\n                    &lt;com.mikhaellopez.circularimageview.CircularImageView\n                        android:id=\"@+id/student4\"\n                        android:src=\"@drawable/user\"\n                        android:layout_width=\"36dip\"\n                        android:layout_height=\"36dip\"\n                        android:layout_marginLeft=\"60dip\"\n                        app:civ_border_width=\"1dp\"\n                        app:civ_border_color=\"#ffffff\"\n\n                        /&gt;\n                    &lt;com.mikhaellopez.circularimageview.CircularImageView\n                        android:id=\"@+id/student5\"\n                        android:src=\"@drawable/user\"\n                        android:layout_width=\"36dip\"\n                        android:layout_height=\"36dip\"\n                        android:layout_marginLeft=\"80dip\"\n                        app:civ_border_width=\"1dp\"\n                        app:civ_border_color=\"#ffffff\"\n\n                        /&gt;\n\n                &lt;/FrameLayout&gt;\n                &lt;TextView\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:layout_toRightOf=\"@+id/frames\"\n                    android:layout_centerVertical=\"true\"\n                    android:layout_marginLeft=\"2dip\"\n                    android:textSize=\"@dimen/home_nmruser_textsize\"\n                    android:text=\"\"\n                    android:textStyle=\"bold\"\n                    android:textColor=\"@color/text_color_gray\"\n                    android:id=\"@+id/nmr_of_students\"\n                    /&gt;\n                &lt;TextView\n                    android:layout_width=\"wrap_content\"\n                    android:layout_height=\"wrap_content\"\n                    android:text=\"\"\n                    android:textSize=\"@dimen/home_other_textview\"\n                    android:layout_marginLeft=\"@dimen/home_other_marginleft\"\n                    android:layout_toRightOf=\"@+id/nmr_of_students\"\n                    android:layout_centerVertical=\"true\"\n                    /&gt;\n            &lt;/RelativeLayout&gt;\n        &lt;/FrameLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5856142,"reputation":4645,"user_id":4613320,"accept_rate":40,"display_name":"Maddy"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1536131800,"creation_date":1536131338,"answer_id":52179106,"question_id":52178656,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n&gt;OverlapImageViewActivity.kt\r\n\r\n\r\n\r\n    class OverlapImageViewActivity : AppCompatActivity(), RecyclerViewClickListener {\r\n    \r\n        private val mAdapter by lazy { OverlapRecyclerViewAdapter(this, this,overlapLimit) }\r\n    \r\n        //------limit number of items to be overlapped\r\n        private val overlapLimit = 5\r\n    \r\n        //------set value of item overlapping\r\n        private val overlapWidth = -50\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n    \r\n            //------create dummy list to set on recycler view\r\n            setDummyArrayList()\r\n    \r\n            //------set up recycler view\r\n            val layoutManager = LinearLayoutManager(this,\r\n                    LinearLayoutManager.HORIZONTAL, false)\r\n            recyclerView.layoutManager = layoutManager\r\n    \r\n            //------set item decoration for item overlapping\r\n            recyclerView.addItemDecoration(OverlapRecyclerViewDecoration(overlapLimit, overlapWidth))\r\n            recyclerView.adapter = mAdapter\r\n            mAdapter.setImageList(setDummyArrayList())\r\n    \r\n        }\r\n    \r\n        /**\r\n         * add dummy data to ArrayList\r\n         */\r\n        private fun setDummyArrayList(): ArrayList&lt;OverlapImageModel&gt; {\r\n            val mArrayList = ArrayList&lt;OverlapImageModel&gt;()\r\n    \r\n            //-----fill data in to array list\r\n            for (i in 0..30) {\r\n                val imageModel = OverlapImageModel()\r\n                imageModel.imageUrl = imageURLs[i % imageURLs.size]\r\n                mArrayList.add(imageModel)\r\n            }\r\n    \r\n            return mArrayList\r\n        }\r\n    \r\n        override fun onNormalItemClicked(adapterPosition: Int) {\r\n            toast(this,&quot;Normal item clicked &gt;&gt; $adapterPosition&quot;)\r\n        }\r\n    \r\n        override fun onNumberedItemClick(adapterPosition: Int) {\r\n            toast(this,&quot;Numbered item clicked &gt;&gt; $adapterPosition&quot;)\r\n        }\r\n    }\r\n\r\n&gt;activity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_margin=&quot;10dp&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        tools:context=&quot;.activities.OverlapImageViewActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;android.support.v7.widget.RecyclerView\r\n            android:id=&quot;@+id/recyclerView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:orientation=&quot;horizontal&quot;\r\n            android:paddingEnd=&quot;5dp&quot;\r\n            app:layoutManager=&quot;android.support.v7.widget.LinearLayoutManager&quot;\r\n            tools:listitem=&quot;@layout/row_image&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n&gt;OverLapRecyclerViewAdapter.kt\r\n\r\n    class OverlapRecyclerViewAdapter(private var mContext: Context, private var recyclerViewClickListener: RecyclerViewClickListener\r\n                                     , private val overlapLimit: Int) : RecyclerView.Adapter&lt;OverlapRecyclerViewAdapter.CustomViewHolder&gt;() {\r\n    \r\n        private val TAG = OverlapRecyclerViewAdapter::class.java.simpleName\r\n    \r\n        //----array list to be shown\r\n        private var mImageList = ArrayList&lt;OverlapImageModel&gt;()\r\n    \r\n        //----array list to be shown after expansion\r\n        private var mImageExpandedList = ArrayList&lt;OverlapImageModel&gt;()\r\n    \r\n        //----flag to indicate recyclerview is expanded or not\r\n        private var isExpanded = false\r\n    \r\n        override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CustomViewHolder {\r\n            val view = LayoutInflater.from(mContext).inflate(R.layout.row_image, parent, false)\r\n            return CustomViewHolder(view)\r\n        }\r\n    \r\n        override fun onBindViewHolder(holder: CustomViewHolder, position: Int) {\r\n            val mCurrentImageModel = mImageList[position]\r\n    \r\n            //----bind data to view\r\n            holder.bind(mCurrentImageModel)\r\n        }\r\n    \r\n        /**\r\n         * set array list over adapter\r\n         */\r\n        fun setImageList(mImageList: ArrayList&lt;OverlapImageModel&gt;) {\r\n            if (mImageList.size &gt; overlapLimit) {\r\n                for (mImageModel in mImageList) {\r\n                    if (this.mImageList.size &lt;= overlapLimit) {\r\n                        this.mImageList.add(mImageModel)\r\n                    } else {\r\n                        this.mImageExpandedList.add(mImageModel)\r\n                    }\r\n                }\r\n            } else {\r\n                this.mImageList = mImageList\r\n            }\r\n            notifyDataSetChanged()\r\n        }\r\n    \r\n        /**\r\n         * add items to array list\r\n         */\r\n        fun addItems(mImageList: ArrayList&lt;OverlapImageModel&gt;) {\r\n            this.mImageList.addAll(mImageList)\r\n            notifyDataSetChanged()\r\n        }\r\n    \r\n        override fun getItemCount(): Int {\r\n            return mImageList.size\r\n        }\r\n    \r\n        /**\r\n         * get item by its position\r\n         */\r\n        fun getItem(pos: Int): OverlapImageModel {\r\n            return mImageList[pos]\r\n        }\r\n    \r\n        inner class CustomViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\r\n    \r\n            private var requestOptions: RequestOptions? = null\r\n    \r\n            /**\r\n             * init request option for glide\r\n             */\r\n            private fun getGlideRequestOptions(): RequestOptions {\r\n                if (requestOptions == null) {\r\n                    requestOptions = RequestOptions()\r\n                    requestOptions?.error(R.mipmap.ic_launcher)\r\n                    requestOptions?.placeholder(R.mipmap.ic_launcher)\r\n                }\r\n                return requestOptions!!\r\n            }\r\n    \r\n            /**\r\n             * bind model data to item\r\n             */\r\n            fun bind(mImageModel: OverlapImageModel) {\r\n    \r\n                if (adapterPosition == overlapLimit &amp;&amp; !isExpanded) {\r\n    \r\n                    //----set text drawable to show count on last imageview\r\n                    val text = mImageExpandedList.size.toString()\r\n                    val drawable = TextDrawable.builder()\r\n                            .beginConfig()\r\n                            .textColor(Color.WHITE)\r\n                            .width(90)\r\n                            .height(90)\r\n                            .endConfig()\r\n                            .buildRound(text, Color.parseColor(&quot;#8FAE5D&quot;))\r\n                    itemView.imageView.setImageDrawable(drawable)\r\n                } else {\r\n    \r\n                    //----load image\r\n                    Glide.with(mContext)\r\n                            .load(mImageModel.imageUrl)\r\n                            .apply(getGlideRequestOptions())\r\n                            .into(itemView.imageView)\r\n                }\r\n    \r\n                //----handle item click\r\n                itemView.imageView.setOnClickListener {\r\n                    if (adapterPosition == overlapLimit &amp;&amp; !isExpanded) {\r\n                        recyclerViewClickListener.onNumberedItemClick(adapterPosition)\r\n                    } else {\r\n                        recyclerViewClickListener.onNormalItemClicked(adapterPosition)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n&gt;OverlapRecyclerViewDecoration.kt\r\n\r\n    class OverlapRecyclerViewDecoration(private val overlapLimit: Int, private val overlapWidth: Int) : RecyclerView.ItemDecoration() {\r\n        override fun getItemOffsets(outRect: Rect, view: View, parent: RecyclerView, state: RecyclerView.State?) {\r\n    \r\n            //-----get current position of item\r\n            val itemPosition = parent.getChildAdapterPosition(view)\r\n    \r\n            //-----avoid first item decoration else it will go of the screen\r\n            if (itemPosition == 0) {\r\n                return\r\n            } else {\r\n    \r\n                //-----apply decoration\r\n                when {\r\n                    itemPosition &lt;= overlapLimit -&gt; outRect.set(overlapWidth, 0, 0, 0)\r\n  \r\n                    else -&gt; outRect.set(0, 0, 0, 0)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n&gt;TextDrawable.kt\r\n\r\n    class TextDrawable(builder: Builder) : ShapeDrawable(builder.shape) {\r\n    \r\n        private val textPaint: Paint\r\n        private val borderPaint: Paint\r\n        private val text: String?\r\n        private val color: Int\r\n        private val shape: RectShape?\r\n        private val height: Int\r\n        private val width: Int\r\n        private val fontSize: Int\r\n        private val radius: Float\r\n        private val borderThickness: Int\r\n    \r\n        init {\r\n    \r\n            // shape properties\r\n            shape = builder.shape\r\n            height = builder.height\r\n            width = builder.width\r\n            radius = builder.radius\r\n    \r\n            // text and color\r\n            text = if (builder.toUpperCase) builder.text!!.toUpperCase() else builder.text\r\n            color = builder.color\r\n    \r\n            // text paint settings\r\n            fontSize = builder.fontSize\r\n            textPaint = Paint()\r\n            textPaint.color = builder.textColor\r\n            textPaint.isAntiAlias = true\r\n            textPaint.isFakeBoldText = builder.isBold\r\n            textPaint.style = Paint.Style.FILL\r\n            textPaint.typeface = builder.font\r\n            textPaint.textAlign = Paint.Align.CENTER\r\n            textPaint.strokeWidth = builder.borderThickness.toFloat()\r\n    \r\n            // border paint settings\r\n            borderThickness = builder.borderThickness\r\n            borderPaint = Paint()\r\n            borderPaint.color = getDarkerShade(builder.color)\r\n            borderPaint.style = Paint.Style.STROKE\r\n            borderPaint.strokeWidth = borderThickness.toFloat()\r\n    \r\n            // drawable paint color\r\n            val paint = paint\r\n            paint.color = color\r\n    \r\n        }\r\n    \r\n        private fun getDarkerShade(color: Int): Int {\r\n            return Color.rgb((SHADE_FACTOR * Color.red(color)).toInt(),\r\n                    (SHADE_FACTOR * Color.green(color)).toInt(),\r\n                    (SHADE_FACTOR * Color.blue(color)).toInt())\r\n        }\r\n    \r\n        override fun draw(canvas: Canvas) {\r\n            super.draw(canvas)\r\n            val r = bounds\r\n    \r\n    \r\n            // draw border\r\n            if (borderThickness &gt; 0) {\r\n                drawBorder(canvas)\r\n            }\r\n    \r\n            val count = canvas.save()\r\n            canvas.translate(r.left.toFloat(), r.top.toFloat())\r\n    \r\n            // draw text\r\n            val width = if (this.width &lt; 0) r.width() else this.width\r\n            val height = if (this.height &lt; 0) r.height() else this.height\r\n            val fontSize = if (this.fontSize &lt; 0) Math.min(width, height) / 2 else this.fontSize\r\n            textPaint.textSize = fontSize.toFloat()\r\n            canvas.drawText(text!!, (width / 2).toFloat(), height / 2 - (textPaint.descent() + textPaint.ascent()) / 2, textPaint)\r\n    \r\n            canvas.restoreToCount(count)\r\n    \r\n        }\r\n    \r\n        private fun drawBorder(canvas: Canvas) {\r\n            val rect = RectF(bounds)\r\n            rect.inset((borderThickness / 2).toFloat(), (borderThickness / 2).toFloat())\r\n    \r\n            when (shape) {\r\n                is OvalShape -&gt; canvas.drawOval(rect, borderPaint)\r\n                is RoundRectShape -&gt; canvas.drawRoundRect(rect, radius, radius, borderPaint)\r\n                else -&gt; canvas.drawRect(rect, borderPaint)\r\n            }\r\n        }\r\n    \r\n        override fun setAlpha(alpha: Int) {\r\n            textPaint.alpha = alpha\r\n        }\r\n    \r\n        override fun setColorFilter(cf: ColorFilter?) {\r\n            textPaint.colorFilter = cf\r\n        }\r\n    \r\n        override fun getOpacity(): Int {\r\n            return PixelFormat.TRANSLUCENT\r\n        }\r\n    \r\n        override fun getIntrinsicWidth(): Int {\r\n            return width\r\n        }\r\n    \r\n        override fun getIntrinsicHeight(): Int {\r\n            return height\r\n        }\r\n    \r\n        class Builder : IConfigBuilder, IShapeBuilder, IBuilder {\r\n    \r\n            var text: String? = null\r\n    \r\n            var color: Int = 0\r\n    \r\n            var borderThickness: Int = 0\r\n    \r\n            var borderColor: Int = 0\r\n    \r\n            var width: Int = 0\r\n    \r\n            var height: Int = 0\r\n    \r\n            var font: Typeface? = null\r\n    \r\n            var shape: RectShape? = null\r\n    \r\n            var textColor: Int = 0\r\n    \r\n            var fontSize: Int = 0\r\n    \r\n            var isBold: Boolean = false\r\n    \r\n            var toUpperCase: Boolean = false\r\n    \r\n            var radius: Float = 0.toFloat()\r\n    \r\n            init {\r\n                text = &quot;&quot;\r\n                color = Color.GRAY\r\n                textColor = Color.WHITE\r\n                borderThickness = 0\r\n                borderColor = 0\r\n                width = -1\r\n                height = -1\r\n                shape = RectShape()\r\n                font = Typeface.create(&quot;sans-serif-light&quot;, Typeface.NORMAL)\r\n                fontSize = -1\r\n                isBold = false\r\n                toUpperCase = false\r\n            }\r\n    \r\n            override fun width(width: Int): IConfigBuilder {\r\n                this.width = width\r\n                return this\r\n            }\r\n    \r\n            override fun height(height: Int): IConfigBuilder {\r\n                this.height = height\r\n                return this\r\n            }\r\n    \r\n            override fun textColor(color: Int): IConfigBuilder {\r\n                this.textColor = color\r\n                return this\r\n            }\r\n    \r\n            override fun withBorder(thickness: Int): IConfigBuilder {\r\n                this.borderThickness = thickness\r\n                return this\r\n            }\r\n    \r\n            override fun borderColor(color: Int): IConfigBuilder {\r\n                this.borderColor= borderColor\r\n                return this\r\n            }\r\n    \r\n            override fun useFont(font: Typeface): IConfigBuilder {\r\n                this.font = font\r\n                return this\r\n            }\r\n    \r\n            override fun fontSize(size: Int): IConfigBuilder {\r\n                this.fontSize = size\r\n                return this\r\n            }\r\n    \r\n            override fun bold(): IConfigBuilder {\r\n                this.isBold = true\r\n                return this\r\n            }\r\n    \r\n            override fun toUpperCase(): IConfigBuilder {\r\n                this.toUpperCase = true\r\n                return this\r\n            }\r\n    \r\n            override fun beginConfig(): IConfigBuilder {\r\n                return this\r\n            }\r\n    \r\n            override fun endConfig(): IShapeBuilder {\r\n                return this\r\n            }\r\n    \r\n            override fun rect(): IBuilder {\r\n                this.shape = RectShape()\r\n                return this\r\n            }\r\n    \r\n            override fun round(): IBuilder {\r\n                this.shape = OvalShape()\r\n                return this\r\n            }\r\n    \r\n            override fun roundRect(radius: Int): IBuilder {\r\n                this.radius = radius.toFloat()\r\n                val radii = floatArrayOf(radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat())\r\n                this.shape = RoundRectShape(radii, null, null)\r\n                return this\r\n            }\r\n    \r\n            override fun buildRect(text: String, color: Int): TextDrawable {\r\n                rect()\r\n                return build(text, color)\r\n            }\r\n    \r\n            override fun buildRoundRect(text: String, color: Int, radius: Int): TextDrawable {\r\n                roundRect(radius)\r\n                return build(text, color)\r\n            }\r\n    \r\n            override fun buildRound(text: String, color: Int): TextDrawable {\r\n                round()\r\n                return build(text, color)\r\n            }\r\n    \r\n            override fun build(text: String, color: Int): TextDrawable {\r\n                this.color = color\r\n                this.text = text\r\n                return TextDrawable(this)\r\n            }\r\n        }\r\n    \r\n        interface IConfigBuilder {\r\n            fun width(width: Int): IConfigBuilder\r\n    \r\n            fun height(height: Int): IConfigBuilder\r\n    \r\n            fun textColor(color: Int): IConfigBuilder\r\n    \r\n            fun withBorder(thickness: Int): IConfigBuilder\r\n    \r\n            fun borderColor(color: Int): IConfigBuilder\r\n    \r\n            fun useFont(font: Typeface): IConfigBuilder\r\n    \r\n            fun fontSize(size: Int): IConfigBuilder\r\n    \r\n            fun bold(): IConfigBuilder\r\n    \r\n            fun toUpperCase(): IConfigBuilder\r\n    \r\n            fun endConfig(): IShapeBuilder\r\n        }\r\n    \r\n        interface IBuilder {\r\n    \r\n            fun build(text: String, color: Int): TextDrawable\r\n        }\r\n    \r\n        interface IShapeBuilder {\r\n    \r\n            fun beginConfig(): IConfigBuilder\r\n    \r\n            fun rect(): IBuilder\r\n    \r\n            fun round(): IBuilder\r\n    \r\n            fun roundRect(radius: Int): IBuilder\r\n    \r\n            fun buildRect(text: String, color: Int): TextDrawable\r\n    \r\n            fun buildRoundRect(text: String, color: Int, radius: Int): TextDrawable\r\n    \r\n            fun buildRound(text: String, color: Int): TextDrawable\r\n        }\r\n    \r\n        companion object {\r\n            private val SHADE_FACTOR = 0.9f\r\n    \r\n            fun builder(): IShapeBuilder {\r\n                return Builder()\r\n            }\r\n        }\r\n    }\r\n\r\n&gt;RecyclerViewClickListener.kt\r\n\r\n    interface RecyclerViewClickListener {\r\n        fun onNormalItemClicked(adapterPosition: Int)\r\n    \r\n        fun onNumberedItemClick(adapterPosition: Int)\r\n    }\r\n\r\n&gt;OverlapImageModel.kt\r\n\r\n    class OverlapImageModel {\r\n        var imageUrl: String? = null\r\n    }\r\n&gt;row_image.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;@dimen/image_size&quot;\r\n        android:layout_height=&quot;@dimen/image_size&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:animateLayoutChanges=&quot;true&quot;&gt;\r\n    \r\n        &lt;de.hdodenhof.circleimageview.CircleImageView\r\n            android:id=&quot;@+id/imageView&quot;\r\n            app:civ_border_color=&quot;#ffffff&quot;\r\n            app:civ_border_width=&quot;2dp&quot;\r\n            android:layout_width=&quot;@dimen/image_size&quot;\r\n            android:layout_height=&quot;@dimen/image_size&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            tools:src=&quot;@mipmap/ic_launcher&quot; /&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/XBDFZ.png\r\n","title":"Horizontally of circular images to show user profile picture","body":"<p><a href=\"https://i.stack.imgur.com/XBDFZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XBDFZ.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>OverlapImageViewActivity.kt</p>\n</blockquote>\n\n<pre><code>class OverlapImageViewActivity : AppCompatActivity(), RecyclerViewClickListener {\n\n    private val mAdapter by lazy { OverlapRecyclerViewAdapter(this, this,overlapLimit) }\n\n    //------limit number of items to be overlapped\n    private val overlapLimit = 5\n\n    //------set value of item overlapping\n    private val overlapWidth = -50\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        //------create dummy list to set on recycler view\n        setDummyArrayList()\n\n        //------set up recycler view\n        val layoutManager = LinearLayoutManager(this,\n                LinearLayoutManager.HORIZONTAL, false)\n        recyclerView.layoutManager = layoutManager\n\n        //------set item decoration for item overlapping\n        recyclerView.addItemDecoration(OverlapRecyclerViewDecoration(overlapLimit, overlapWidth))\n        recyclerView.adapter = mAdapter\n        mAdapter.setImageList(setDummyArrayList())\n\n    }\n\n    /**\n     * add dummy data to ArrayList\n     */\n    private fun setDummyArrayList(): ArrayList&lt;OverlapImageModel&gt; {\n        val mArrayList = ArrayList&lt;OverlapImageModel&gt;()\n\n        //-----fill data in to array list\n        for (i in 0..30) {\n            val imageModel = OverlapImageModel()\n            imageModel.imageUrl = imageURLs[i % imageURLs.size]\n            mArrayList.add(imageModel)\n        }\n\n        return mArrayList\n    }\n\n    override fun onNormalItemClicked(adapterPosition: Int) {\n        toast(this,\"Normal item clicked &gt;&gt; $adapterPosition\")\n    }\n\n    override fun onNumberedItemClick(adapterPosition: Int) {\n        toast(this,\"Numbered item clicked &gt;&gt; $adapterPosition\")\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>activity_main.xml</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:layout_margin=\"10dp\"\n    android:orientation=\"vertical\"\n    tools:context=\".activities.OverlapImageViewActivity\"&gt;\n\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/recyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"horizontal\"\n        android:paddingEnd=\"5dp\"\n        app:layoutManager=\"android.support.v7.widget.LinearLayoutManager\"\n        tools:listitem=\"@layout/row_image\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<blockquote>\n  <p>OverLapRecyclerViewAdapter.kt</p>\n</blockquote>\n\n<pre><code>class OverlapRecyclerViewAdapter(private var mContext: Context, private var recyclerViewClickListener: RecyclerViewClickListener\n                                 , private val overlapLimit: Int) : RecyclerView.Adapter&lt;OverlapRecyclerViewAdapter.CustomViewHolder&gt;() {\n\n    private val TAG = OverlapRecyclerViewAdapter::class.java.simpleName\n\n    //----array list to be shown\n    private var mImageList = ArrayList&lt;OverlapImageModel&gt;()\n\n    //----array list to be shown after expansion\n    private var mImageExpandedList = ArrayList&lt;OverlapImageModel&gt;()\n\n    //----flag to indicate recyclerview is expanded or not\n    private var isExpanded = false\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): CustomViewHolder {\n        val view = LayoutInflater.from(mContext).inflate(R.layout.row_image, parent, false)\n        return CustomViewHolder(view)\n    }\n\n    override fun onBindViewHolder(holder: CustomViewHolder, position: Int) {\n        val mCurrentImageModel = mImageList[position]\n\n        //----bind data to view\n        holder.bind(mCurrentImageModel)\n    }\n\n    /**\n     * set array list over adapter\n     */\n    fun setImageList(mImageList: ArrayList&lt;OverlapImageModel&gt;) {\n        if (mImageList.size &gt; overlapLimit) {\n            for (mImageModel in mImageList) {\n                if (this.mImageList.size &lt;= overlapLimit) {\n                    this.mImageList.add(mImageModel)\n                } else {\n                    this.mImageExpandedList.add(mImageModel)\n                }\n            }\n        } else {\n            this.mImageList = mImageList\n        }\n        notifyDataSetChanged()\n    }\n\n    /**\n     * add items to array list\n     */\n    fun addItems(mImageList: ArrayList&lt;OverlapImageModel&gt;) {\n        this.mImageList.addAll(mImageList)\n        notifyDataSetChanged()\n    }\n\n    override fun getItemCount(): Int {\n        return mImageList.size\n    }\n\n    /**\n     * get item by its position\n     */\n    fun getItem(pos: Int): OverlapImageModel {\n        return mImageList[pos]\n    }\n\n    inner class CustomViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n\n        private var requestOptions: RequestOptions? = null\n\n        /**\n         * init request option for glide\n         */\n        private fun getGlideRequestOptions(): RequestOptions {\n            if (requestOptions == null) {\n                requestOptions = RequestOptions()\n                requestOptions?.error(R.mipmap.ic_launcher)\n                requestOptions?.placeholder(R.mipmap.ic_launcher)\n            }\n            return requestOptions!!\n        }\n\n        /**\n         * bind model data to item\n         */\n        fun bind(mImageModel: OverlapImageModel) {\n\n            if (adapterPosition == overlapLimit &amp;&amp; !isExpanded) {\n\n                //----set text drawable to show count on last imageview\n                val text = mImageExpandedList.size.toString()\n                val drawable = TextDrawable.builder()\n                        .beginConfig()\n                        .textColor(Color.WHITE)\n                        .width(90)\n                        .height(90)\n                        .endConfig()\n                        .buildRound(text, Color.parseColor(\"#8FAE5D\"))\n                itemView.imageView.setImageDrawable(drawable)\n            } else {\n\n                //----load image\n                Glide.with(mContext)\n                        .load(mImageModel.imageUrl)\n                        .apply(getGlideRequestOptions())\n                        .into(itemView.imageView)\n            }\n\n            //----handle item click\n            itemView.imageView.setOnClickListener {\n                if (adapterPosition == overlapLimit &amp;&amp; !isExpanded) {\n                    recyclerViewClickListener.onNumberedItemClick(adapterPosition)\n                } else {\n                    recyclerViewClickListener.onNormalItemClicked(adapterPosition)\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>OverlapRecyclerViewDecoration.kt</p>\n</blockquote>\n\n<pre><code>class OverlapRecyclerViewDecoration(private val overlapLimit: Int, private val overlapWidth: Int) : RecyclerView.ItemDecoration() {\n    override fun getItemOffsets(outRect: Rect, view: View, parent: RecyclerView, state: RecyclerView.State?) {\n\n        //-----get current position of item\n        val itemPosition = parent.getChildAdapterPosition(view)\n\n        //-----avoid first item decoration else it will go of the screen\n        if (itemPosition == 0) {\n            return\n        } else {\n\n            //-----apply decoration\n            when {\n                itemPosition &lt;= overlapLimit -&gt; outRect.set(overlapWidth, 0, 0, 0)\n\n                else -&gt; outRect.set(0, 0, 0, 0)\n            }\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>TextDrawable.kt</p>\n</blockquote>\n\n<pre><code>class TextDrawable(builder: Builder) : ShapeDrawable(builder.shape) {\n\n    private val textPaint: Paint\n    private val borderPaint: Paint\n    private val text: String?\n    private val color: Int\n    private val shape: RectShape?\n    private val height: Int\n    private val width: Int\n    private val fontSize: Int\n    private val radius: Float\n    private val borderThickness: Int\n\n    init {\n\n        // shape properties\n        shape = builder.shape\n        height = builder.height\n        width = builder.width\n        radius = builder.radius\n\n        // text and color\n        text = if (builder.toUpperCase) builder.text!!.toUpperCase() else builder.text\n        color = builder.color\n\n        // text paint settings\n        fontSize = builder.fontSize\n        textPaint = Paint()\n        textPaint.color = builder.textColor\n        textPaint.isAntiAlias = true\n        textPaint.isFakeBoldText = builder.isBold\n        textPaint.style = Paint.Style.FILL\n        textPaint.typeface = builder.font\n        textPaint.textAlign = Paint.Align.CENTER\n        textPaint.strokeWidth = builder.borderThickness.toFloat()\n\n        // border paint settings\n        borderThickness = builder.borderThickness\n        borderPaint = Paint()\n        borderPaint.color = getDarkerShade(builder.color)\n        borderPaint.style = Paint.Style.STROKE\n        borderPaint.strokeWidth = borderThickness.toFloat()\n\n        // drawable paint color\n        val paint = paint\n        paint.color = color\n\n    }\n\n    private fun getDarkerShade(color: Int): Int {\n        return Color.rgb((SHADE_FACTOR * Color.red(color)).toInt(),\n                (SHADE_FACTOR * Color.green(color)).toInt(),\n                (SHADE_FACTOR * Color.blue(color)).toInt())\n    }\n\n    override fun draw(canvas: Canvas) {\n        super.draw(canvas)\n        val r = bounds\n\n\n        // draw border\n        if (borderThickness &gt; 0) {\n            drawBorder(canvas)\n        }\n\n        val count = canvas.save()\n        canvas.translate(r.left.toFloat(), r.top.toFloat())\n\n        // draw text\n        val width = if (this.width &lt; 0) r.width() else this.width\n        val height = if (this.height &lt; 0) r.height() else this.height\n        val fontSize = if (this.fontSize &lt; 0) Math.min(width, height) / 2 else this.fontSize\n        textPaint.textSize = fontSize.toFloat()\n        canvas.drawText(text!!, (width / 2).toFloat(), height / 2 - (textPaint.descent() + textPaint.ascent()) / 2, textPaint)\n\n        canvas.restoreToCount(count)\n\n    }\n\n    private fun drawBorder(canvas: Canvas) {\n        val rect = RectF(bounds)\n        rect.inset((borderThickness / 2).toFloat(), (borderThickness / 2).toFloat())\n\n        when (shape) {\n            is OvalShape -&gt; canvas.drawOval(rect, borderPaint)\n            is RoundRectShape -&gt; canvas.drawRoundRect(rect, radius, radius, borderPaint)\n            else -&gt; canvas.drawRect(rect, borderPaint)\n        }\n    }\n\n    override fun setAlpha(alpha: Int) {\n        textPaint.alpha = alpha\n    }\n\n    override fun setColorFilter(cf: ColorFilter?) {\n        textPaint.colorFilter = cf\n    }\n\n    override fun getOpacity(): Int {\n        return PixelFormat.TRANSLUCENT\n    }\n\n    override fun getIntrinsicWidth(): Int {\n        return width\n    }\n\n    override fun getIntrinsicHeight(): Int {\n        return height\n    }\n\n    class Builder : IConfigBuilder, IShapeBuilder, IBuilder {\n\n        var text: String? = null\n\n        var color: Int = 0\n\n        var borderThickness: Int = 0\n\n        var borderColor: Int = 0\n\n        var width: Int = 0\n\n        var height: Int = 0\n\n        var font: Typeface? = null\n\n        var shape: RectShape? = null\n\n        var textColor: Int = 0\n\n        var fontSize: Int = 0\n\n        var isBold: Boolean = false\n\n        var toUpperCase: Boolean = false\n\n        var radius: Float = 0.toFloat()\n\n        init {\n            text = \"\"\n            color = Color.GRAY\n            textColor = Color.WHITE\n            borderThickness = 0\n            borderColor = 0\n            width = -1\n            height = -1\n            shape = RectShape()\n            font = Typeface.create(\"sans-serif-light\", Typeface.NORMAL)\n            fontSize = -1\n            isBold = false\n            toUpperCase = false\n        }\n\n        override fun width(width: Int): IConfigBuilder {\n            this.width = width\n            return this\n        }\n\n        override fun height(height: Int): IConfigBuilder {\n            this.height = height\n            return this\n        }\n\n        override fun textColor(color: Int): IConfigBuilder {\n            this.textColor = color\n            return this\n        }\n\n        override fun withBorder(thickness: Int): IConfigBuilder {\n            this.borderThickness = thickness\n            return this\n        }\n\n        override fun borderColor(color: Int): IConfigBuilder {\n            this.borderColor= borderColor\n            return this\n        }\n\n        override fun useFont(font: Typeface): IConfigBuilder {\n            this.font = font\n            return this\n        }\n\n        override fun fontSize(size: Int): IConfigBuilder {\n            this.fontSize = size\n            return this\n        }\n\n        override fun bold(): IConfigBuilder {\n            this.isBold = true\n            return this\n        }\n\n        override fun toUpperCase(): IConfigBuilder {\n            this.toUpperCase = true\n            return this\n        }\n\n        override fun beginConfig(): IConfigBuilder {\n            return this\n        }\n\n        override fun endConfig(): IShapeBuilder {\n            return this\n        }\n\n        override fun rect(): IBuilder {\n            this.shape = RectShape()\n            return this\n        }\n\n        override fun round(): IBuilder {\n            this.shape = OvalShape()\n            return this\n        }\n\n        override fun roundRect(radius: Int): IBuilder {\n            this.radius = radius.toFloat()\n            val radii = floatArrayOf(radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat(), radius.toFloat())\n            this.shape = RoundRectShape(radii, null, null)\n            return this\n        }\n\n        override fun buildRect(text: String, color: Int): TextDrawable {\n            rect()\n            return build(text, color)\n        }\n\n        override fun buildRoundRect(text: String, color: Int, radius: Int): TextDrawable {\n            roundRect(radius)\n            return build(text, color)\n        }\n\n        override fun buildRound(text: String, color: Int): TextDrawable {\n            round()\n            return build(text, color)\n        }\n\n        override fun build(text: String, color: Int): TextDrawable {\n            this.color = color\n            this.text = text\n            return TextDrawable(this)\n        }\n    }\n\n    interface IConfigBuilder {\n        fun width(width: Int): IConfigBuilder\n\n        fun height(height: Int): IConfigBuilder\n\n        fun textColor(color: Int): IConfigBuilder\n\n        fun withBorder(thickness: Int): IConfigBuilder\n\n        fun borderColor(color: Int): IConfigBuilder\n\n        fun useFont(font: Typeface): IConfigBuilder\n\n        fun fontSize(size: Int): IConfigBuilder\n\n        fun bold(): IConfigBuilder\n\n        fun toUpperCase(): IConfigBuilder\n\n        fun endConfig(): IShapeBuilder\n    }\n\n    interface IBuilder {\n\n        fun build(text: String, color: Int): TextDrawable\n    }\n\n    interface IShapeBuilder {\n\n        fun beginConfig(): IConfigBuilder\n\n        fun rect(): IBuilder\n\n        fun round(): IBuilder\n\n        fun roundRect(radius: Int): IBuilder\n\n        fun buildRect(text: String, color: Int): TextDrawable\n\n        fun buildRoundRect(text: String, color: Int, radius: Int): TextDrawable\n\n        fun buildRound(text: String, color: Int): TextDrawable\n    }\n\n    companion object {\n        private val SHADE_FACTOR = 0.9f\n\n        fun builder(): IShapeBuilder {\n            return Builder()\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>RecyclerViewClickListener.kt</p>\n</blockquote>\n\n<pre><code>interface RecyclerViewClickListener {\n    fun onNormalItemClicked(adapterPosition: Int)\n\n    fun onNumberedItemClick(adapterPosition: Int)\n}\n</code></pre>\n\n<blockquote>\n  <p>OverlapImageModel.kt</p>\n</blockquote>\n\n<pre><code>class OverlapImageModel {\n    var imageUrl: String? = null\n}\n</code></pre>\n\n<blockquote>\n  <p>row_image.xml</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"@dimen/image_size\"\n    android:layout_height=\"@dimen/image_size\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_gravity=\"center\"\n    android:animateLayoutChanges=\"true\"&gt;\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView\n        android:id=\"@+id/imageView\"\n        app:civ_border_color=\"#ffffff\"\n        app:civ_border_width=\"2dp\"\n        android:layout_width=\"@dimen/image_size\"\n        android:layout_height=\"@dimen/image_size\"\n        android:layout_centerInParent=\"true\"\n        tools:src=\"@mipmap/ic_launcher\" /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10396927,"reputation":68267,"user_id":7666442,"display_name":"AskNilesh"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1536132995,"creation_date":1536132995,"answer_id":52179593,"question_id":52178656,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nTry this here is the working code for java\r\n\r\n&gt;RecyclerViewActivity\r\n\r\n    public class RecyclerViewActivity extends AppCompatActivity {\r\n    \r\n    \r\n        private  final Integer[] IMAGES = {R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh,\r\n                R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh};\r\n        private ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\r\n    \r\n        RecyclerView myRecyclerView;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_recycler_view);\r\n    \r\n            Collections.addAll(arrayList, IMAGES);\r\n    \r\n            myRecyclerView=findViewById(R.id.myRecyclerView);\r\n            myRecyclerView.setLayoutManager(new LinearLayoutManager(this,\r\n                    LinearLayoutManager.HORIZONTAL,false));\r\n            myRecyclerView.addItemDecoration(new OverlapDecoration());\r\n            myRecyclerView.setHasFixedSize(true);\r\n            myRecyclerView.setAdapter(new DataAdapter(this,arrayList));\r\n    \r\n    \r\n        }\r\n    \r\n        public class OverlapDecoration extends RecyclerView.ItemDecoration {\r\n    \r\n            private final static int vertOverlap = -40;\r\n    \r\n            @Override\r\n            public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) {\r\n                final int itemPosition = parent.getChildAdapterPosition(view);\r\n    \r\n    \r\n                outRect.set(0, 0, vertOverlap, 0);\r\n    \r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n&gt;activity_recycler_view\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;?attr/colorBackgroundFloating&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n        &lt;android.support.v7.widget.RecyclerView\r\n            android:id=&quot;@+id/myRecyclerView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;250dp&quot;\r\n             /&gt;\r\n    \r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n&gt;DataAdapter\r\n\r\n    public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.ViewHolder&gt; {\r\n    \r\n        private Context context;\r\n        private ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\r\n    \r\n        public DataAdapter(Context context, ArrayList&lt;Integer&gt; imagesArray) {\r\n            this.context = context;\r\n            arrayList = imagesArray;\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n    \r\n            View imageLayout = LayoutInflater.from(context).inflate(R.layout.aa, parent, false);\r\n            return new ViewHolder(imageLayout);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n    \r\n            holder.imageView.setImageResource(arrayList.get(position));\r\n    \r\n            if (position == 3) {\r\n                holder.relativeLayout.setVisibility(View.VISIBLE);\r\n                holder.tvCount.setText(String.valueOf(arrayList.size()-4));\r\n            }else {\r\n                holder.relativeLayout.setVisibility(View.GONE);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return 4;\r\n        }\r\n    \r\n        public class ViewHolder extends RecyclerView.ViewHolder {\r\n    \r\n            RelativeLayout relativeLayout;\r\n            TextView tvCount;\r\n            CircleImageView imageView;\r\n    \r\n            public ViewHolder(View itemView) {\r\n                super(itemView);\r\n    \r\n                relativeLayout = itemView.findViewById(R.id.relative);\r\n                tvCount = itemView.findViewById(R.id.tvCount);\r\n                imageView = itemView\r\n                        .findViewById(R.id.profile_image);\r\n    \r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n&gt;layout.aa\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n    \r\n        &lt;de.hdodenhof.circleimageview.CircleImageView xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            android:id=&quot;@+id/profile_image&quot;\r\n            android:layout_width=&quot;96dp&quot;\r\n            android:layout_height=&quot;96dp&quot;\r\n            android:src=&quot;@drawable/kid&quot;\r\n            app:civ_border_color=&quot;#FF000000&quot;\r\n            app:civ_border_width=&quot;2dp&quot; /&gt;\r\n    \r\n        &lt;RelativeLayout\r\n            android:id=&quot;@+id/relative&quot;\r\n            android:visibility=&quot;gone&quot;\r\n            android:layout_marginLeft=&quot;-40dp&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n    \r\n            &lt;de.hdodenhof.circleimageview.CircleImageView\r\n                android:id=&quot;@+id/imageCircleImageView&quot;\r\n                android:layout_width=&quot;96dp&quot;\r\n                android:layout_height=&quot;96dp&quot;\r\n                android:src=&quot;#919191&quot;\r\n                app:civ_border_color=&quot;#FF000000&quot;\r\n                app:civ_border_width=&quot;2dp&quot;  /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/tvCount&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignBottom=&quot;@id/imageCircleImageView&quot;\r\n                android:layout_alignEnd=&quot;@id/imageCircleImageView&quot;\r\n                android:layout_alignStart=&quot;@id/imageCircleImageView&quot;\r\n                android:layout_alignTop=&quot;@id/imageCircleImageView&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:padding=&quot;10dp&quot;\r\n                android:text=&quot;&quot;\r\n                android:textColor=&quot;#FFFFFF&quot; /&gt;\r\n    \r\n        &lt;/RelativeLayout&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Xk4S.png","title":"Horizontally of circular images to show user profile picture","body":"<p><a href=\"https://i.stack.imgur.com/7Xk4S.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7Xk4S.png\" alt=\"enter image description here\"></a></p>\n\n<p>Try this here is the working code for java</p>\n\n<blockquote>\n  <p>RecyclerViewActivity</p>\n</blockquote>\n\n<pre><code>public class RecyclerViewActivity extends AppCompatActivity {\n\n\n    private  final Integer[] IMAGES = {R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh,\n            R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh, R.drawable.nilesh};\n    private ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\n\n    RecyclerView myRecyclerView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_recycler_view);\n\n        Collections.addAll(arrayList, IMAGES);\n\n        myRecyclerView=findViewById(R.id.myRecyclerView);\n        myRecyclerView.setLayoutManager(new LinearLayoutManager(this,\n                LinearLayoutManager.HORIZONTAL,false));\n        myRecyclerView.addItemDecoration(new OverlapDecoration());\n        myRecyclerView.setHasFixedSize(true);\n        myRecyclerView.setAdapter(new DataAdapter(this,arrayList));\n\n\n    }\n\n    public class OverlapDecoration extends RecyclerView.ItemDecoration {\n\n        private final static int vertOverlap = -40;\n\n        @Override\n        public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) {\n            final int itemPosition = parent.getChildAdapterPosition(view);\n\n\n            outRect.set(0, 0, vertOverlap, 0);\n\n\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>activity_recycler_view</p>\n</blockquote>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"?attr/colorBackgroundFloating\"\n    android:orientation=\"vertical\"&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=\"@+id/myRecyclerView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"250dp\"\n         /&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<blockquote>\n  <p>DataAdapter</p>\n</blockquote>\n\n<pre><code>public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.ViewHolder&gt; {\n\n    private Context context;\n    private ArrayList&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\n\n    public DataAdapter(Context context, ArrayList&lt;Integer&gt; imagesArray) {\n        this.context = context;\n        arrayList = imagesArray;\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n        View imageLayout = LayoutInflater.from(context).inflate(R.layout.aa, parent, false);\n        return new ViewHolder(imageLayout);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n\n        holder.imageView.setImageResource(arrayList.get(position));\n\n        if (position == 3) {\n            holder.relativeLayout.setVisibility(View.VISIBLE);\n            holder.tvCount.setText(String.valueOf(arrayList.size()-4));\n        }else {\n            holder.relativeLayout.setVisibility(View.GONE);\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return 4;\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n\n        RelativeLayout relativeLayout;\n        TextView tvCount;\n        CircleImageView imageView;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n\n            relativeLayout = itemView.findViewById(R.id.relative);\n            tvCount = itemView.findViewById(R.id.tvCount);\n            imageView = itemView\n                    .findViewById(R.id.profile_image);\n\n\n        }\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>layout.aa</p>\n</blockquote>\n\n<pre><code>&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"&gt;\n\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n        android:id=\"@+id/profile_image\"\n        android:layout_width=\"96dp\"\n        android:layout_height=\"96dp\"\n        android:src=\"@drawable/kid\"\n        app:civ_border_color=\"#FF000000\"\n        app:civ_border_width=\"2dp\" /&gt;\n\n    &lt;RelativeLayout\n        android:id=\"@+id/relative\"\n        android:visibility=\"gone\"\n        android:layout_marginLeft=\"-40dp\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"&gt;\n\n\n        &lt;de.hdodenhof.circleimageview.CircleImageView\n            android:id=\"@+id/imageCircleImageView\"\n            android:layout_width=\"96dp\"\n            android:layout_height=\"96dp\"\n            android:src=\"#919191\"\n            app:civ_border_color=\"#FF000000\"\n            app:civ_border_width=\"2dp\"  /&gt;\n\n        &lt;TextView\n            android:id=\"@+id/tvCount\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignBottom=\"@id/imageCircleImageView\"\n            android:layout_alignEnd=\"@id/imageCircleImageView\"\n            android:layout_alignStart=\"@id/imageCircleImageView\"\n            android:layout_alignTop=\"@id/imageCircleImageView\"\n            android:layout_gravity=\"center\"\n            android:gravity=\"center\"\n            android:padding=\"10dp\"\n            android:text=\"\"\n            android:textColor=\"#FFFFFF\" /&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20653164,"reputation":33,"user_id":15162947,"display_name":"sahand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658691163,"creation_date":1658691163,"answer_id":73101442,"question_id":52178656,"body_markdown":"you can use this.\r\n\r\n            fun createUsersPic(linearLayout: LinearLayout, images: List&lt;Int&gt;) {\r\n            val MAX_PIC = 4\r\n\r\n            val widthAndHeight = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 32f, linearLayout.context.resources.displayMetrics)\r\n            val margin = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, -16f, linearLayout.context.resources.displayMetrics)\r\n\r\n            linearLayout.removeAllViews()\r\n\r\n            val newList = images.subList(0, if (images.size &lt; MAX_PIC + 1) images.size else MAX_PIC)\r\n            newList.forEachIndexed { index, pic -&gt;\r\n                val img = ShapeableImageView(linearLayout.context).apply {\r\n                    shapeAppearanceModel = shapeAppearanceModel\r\n                        .toBuilder()\r\n                        .setAllCornerSizes(44F)\r\n                        .build()\r\n                    cropToPadding = true\r\n                    scaleType = ImageView.ScaleType.CENTER_CROP\r\n                    val params = LinearLayoutCompat.LayoutParams(widthAndHeight.toInt(), widthAndHeight.toInt())\r\n                    params.setMargins(if (index == 0) 0 else margin.toInt(), 0, 0, 0)\r\n                    layoutParams = params\r\n                    setImageResource(pic)\r\n                }\r\n                linearLayout.addView(img)\r\n            }\r\n            if (images.size &gt; MAX_PIC) {\r\n                val tv = TextView(linearLayout.context).apply {\r\n                    background = ContextCompat.getDrawable(context, R.drawable.sh_with_radius_30)\r\n                    val params = LinearLayoutCompat.LayoutParams(widthAndHeight.toInt(), widthAndHeight.toInt())\r\n                    params.setMargins(margin.toInt(), 0, 0, 0)\r\n                    layoutParams = params\r\n                    gravity = Gravity.CENTER\r\n                    text = &quot;+${images.size - MAX_PIC}&quot;\r\n                }\r\n                linearLayout.addView(tv)\r\n            }\r\n        }","title":"Horizontally of circular images to show user profile picture","body":"<p>you can use this.</p>\n<pre><code>        fun createUsersPic(linearLayout: LinearLayout, images: List&lt;Int&gt;) {\n        val MAX_PIC = 4\n\n        val widthAndHeight = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 32f, linearLayout.context.resources.displayMetrics)\n        val margin = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, -16f, linearLayout.context.resources.displayMetrics)\n\n        linearLayout.removeAllViews()\n\n        val newList = images.subList(0, if (images.size &lt; MAX_PIC + 1) images.size else MAX_PIC)\n        newList.forEachIndexed { index, pic -&gt;\n            val img = ShapeableImageView(linearLayout.context).apply {\n                shapeAppearanceModel = shapeAppearanceModel\n                    .toBuilder()\n                    .setAllCornerSizes(44F)\n                    .build()\n                cropToPadding = true\n                scaleType = ImageView.ScaleType.CENTER_CROP\n                val params = LinearLayoutCompat.LayoutParams(widthAndHeight.toInt(), widthAndHeight.toInt())\n                params.setMargins(if (index == 0) 0 else margin.toInt(), 0, 0, 0)\n                layoutParams = params\n                setImageResource(pic)\n            }\n            linearLayout.addView(img)\n        }\n        if (images.size &gt; MAX_PIC) {\n            val tv = TextView(linearLayout.context).apply {\n                background = ContextCompat.getDrawable(context, R.drawable.sh_with_radius_30)\n                val params = LinearLayoutCompat.LayoutParams(widthAndHeight.toInt(), widthAndHeight.toInt())\n                params.setMargins(margin.toInt(), 0, 0, 0)\n                layoutParams = params\n                gravity = Gravity.CENTER\n                text = &quot;+${images.size - MAX_PIC}&quot;\n            }\n            linearLayout.addView(tv)\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":11573295,"reputation":67,"user_id":8479444,"display_name":"Tharun Eniyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2612,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":52179593,"answer_count":4,"score":5,"last_activity_date":1658691163,"creation_date":1536129687,"question_id":52178656,"body_markdown":"\r\n\r\nI need to show the users profile picture who all are joining in a specified event and it should be in horizontal circular images one after other and after 5 images. it should show the remaining users total count. I need both java and xml file. These profile images will be from database. Please suggest me any library or a way to do it\r\n\r\n![I need like this][1]\r\n\r\n  [1]: https://i.stack.imgur.com/J9Vn2.png","title":"Horizontally of circular images to show user profile picture","body":"<p>I need to show the users profile picture who all are joining in a specified event and it should be in horizontal circular images one after other and after 5 images. it should show the remaining users total count. I need both java and xml file. These profile images will be from database. Please suggest me any library or a way to do it</p>\n\n<p><img src=\"https://i.stack.imgur.com/J9Vn2.png\" alt=\"I need like this\"></p>\n"},{"tags":["java","android","json","gson","location"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1658690311,"post_id":73101310,"comment_id":129108083,"body_markdown":"`android.location.Address` is not part of either library. It is part of [the Android SDK](https://developer.android.com/reference/kotlin/android/location/Address). The source code for it will be tied to the Android OS version, not the version of any Play Services library.","body":"<code>android.location.Address</code> is not part of either library. It is part of <a href=\"https://developer.android.com/reference/kotlin/android/location/Address\" rel=\"nofollow noreferrer\">the Android SDK</a>. The source code for it will be tied to the Android OS version, not the version of any Play Services library."},{"owner":{"account_id":15558590,"reputation":865,"user_id":11224260,"display_name":"dartKnightRises"},"score":0,"creation_date":1658690604,"post_id":73101310,"comment_id":129108141,"body_markdown":"I&#39;m really sorry for mentioning that, I will remove that but where I&#39;m going wrong in the above question.","body":"I&#39;m really sorry for mentioning that, I will remove that but where I&#39;m going wrong in the above question."},{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":2,"creation_date":1658696648,"post_id":73101310,"comment_id":129109365,"body_markdown":"Adding to @CommonsWare&#39;s comment; do not let Gson use reflection to serialize third-party classes because you will depend on implementation details which could change at any point (as seen in this situation). You will have to write a custom [`TypeAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html) which serializes and deserializes `Address`.","body":"Adding to @CommonsWare&#39;s comment; do not let Gson use reflection to serialize third-party classes because you will depend on implementation details which could change at any point (as seen in this situation). You will have to write a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapter.html\" rel=\"nofollow noreferrer\"><code>TypeAdapter</code></a> which serializes and deserializes <code>Address</code>."}],"owner":{"account_id":15558590,"reputation":865,"user_id":11224260,"display_name":"dartKnightRises"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658690808,"creation_date":1658690043,"question_id":73101310,"body_markdown":"\r\n\r\nDataType of addressList is List of Address, where Address belongs to **android.location.Address**\r\n\r\nI will be attaching four screenshot of my debug screen to demonstrate the same.\r\n\r\n1. Old Location library showing list of addresses:[![enter image description here][1]][1]\r\n\r\n\r\n2. Old Location library showing list of address after converting it to JSON string:[![enter image description here][2]][2]\r\n\r\n3. New Location library showing list of addresses:\r\n[![enter image description here][3]][3]\r\n\r\n4. New Location library showing empty result after converting it to JSON string:[![enter image description here][4]][4]\r\n\r\nAdding Address.java class of both the Location libraries:\r\n\r\n**Old Address Class:**\r\n```\r\npackage android.location;\r\n\r\nimport android.os.Bundle;\r\nimport android.os.Parcel;\r\nimport android.os.Parcelable;\r\nimport android.os.Parcelable.Creator;\r\nimport java.util.Locale;\r\n\r\npublic class Address implements Parcelable {\r\n    public static final Creator&lt;Address&gt; CREATOR = null;\r\n\r\n    public Address(Locale locale) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public Locale getLocale() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public int getMaxAddressLineIndex() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getAddressLine(int index) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setAddressLine(int index, String line) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getFeatureName() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setFeatureName(String featureName) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getAdminArea() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setAdminArea(String adminArea) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getSubAdminArea() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setSubAdminArea(String subAdminArea) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getLocality() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setLocality(String locality) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getSubLocality() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setSubLocality(String sublocality) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getThoroughfare() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setThoroughfare(String thoroughfare) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getSubThoroughfare() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setSubThoroughfare(String subthoroughfare) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getPremises() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setPremises(String premises) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getPostalCode() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setPostalCode(String postalCode) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getCountryCode() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setCountryCode(String countryCode) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getCountryName() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setCountryName(String countryName) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public boolean hasLatitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public double getLatitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setLatitude(double latitude) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void clearLatitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public boolean hasLongitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public double getLongitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setLongitude(double longitude) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void clearLongitude() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getPhone() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setPhone(String phone) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String getUrl() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setUrl(String Url) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public Bundle getExtras() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void setExtras(Bundle extras) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public String toString() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public int describeContents() {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n\r\n    public void writeToParcel(Parcel parcel, int flags) {\r\n        throw new RuntimeException(&quot;Stub!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n**New Address Class:**\r\n```\r\npackage android.location;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\nimport android.os.Bundle;\r\nimport android.os.Parcel;\r\nimport android.os.Parcelable;\r\n\r\n/**\r\n * A class representing an Address, i.e, a set of Strings describing a location.\r\n *\r\n * The address format is a simplified version of xAL (eXtensible Address Language)\r\n * http://www.oasis-open.org/committees/ciq/ciq.html#6\r\n */\r\npublic class Address implements Parcelable {\r\n\r\n    private Locale mLocale;\r\n\r\n    private String mFeatureName;\r\n    private HashMap&lt;Integer, String&gt; mAddressLines;\r\n    private int mMaxAddressLineIndex = -1;\r\n    private String mAdminArea;\r\n    private String mSubAdminArea;\r\n    private String mLocality;\r\n    private String mSubLocality;\r\n    private String mThoroughfare;\r\n    private String mSubThoroughfare;\r\n    private String mPremises;\r\n    private String mPostalCode;\r\n    private String mCountryCode;\r\n    private String mCountryName;\r\n    private double mLatitude;\r\n    private double mLongitude;\r\n    private boolean mHasLatitude = false;\r\n    private boolean mHasLongitude = false;\r\n    private String mPhone;\r\n    private String mUrl;\r\n    private Bundle mExtras = null;\r\n\r\n    /**\r\n     * Constructs a new Address object set to the given Locale and with all\r\n     * other fields initialized to null or false.\r\n     */\r\n    public Address(Locale locale) {\r\n        mLocale = locale;\r\n    }\r\n\r\n    /**\r\n     * Returns the Locale associated with this address.\r\n     */\r\n    public Locale getLocale() {\r\n        return mLocale;\r\n    }\r\n\r\n    /**\r\n     * Returns the largest index currently in use to specify an address line.\r\n     * If no address lines are specified, -1 is returned.\r\n     */\r\n    public int getMaxAddressLineIndex() {\r\n        return mMaxAddressLineIndex;\r\n    }\r\n\r\n    /**\r\n     * Returns a line of the address numbered by the given index\r\n     * (starting at 0), or null if no such line is present.\r\n     *\r\n     * @throws IllegalArgumentException if index &lt; 0\r\n     */\r\n    public String getAddressLine(int index) {\r\n        if (index &lt; 0) {\r\n            throw new IllegalArgumentException(&quot;index = &quot; + index + &quot; &lt; 0&quot;);\r\n        }\r\n        return mAddressLines == null? null :  mAddressLines.get(index);\r\n    }\r\n\r\n    /**\r\n     * Sets the line of the address numbered by index (starting at 0) to the\r\n     * given String, which may be null.\r\n     *\r\n     * @throws IllegalArgumentException if index &lt; 0\r\n     */\r\n    public void setAddressLine(int index, String line) {\r\n        if (index &lt; 0) {\r\n            throw new IllegalArgumentException(&quot;index = &quot; + index + &quot; &lt; 0&quot;);\r\n        }\r\n        if (mAddressLines == null) {\r\n            mAddressLines = new HashMap&lt;Integer, String&gt;();\r\n        }\r\n        mAddressLines.put(index, line);\r\n\r\n        if (line == null) {\r\n            // We&#39;ve eliminated a line, recompute the max index\r\n            mMaxAddressLineIndex = -1;\r\n            for (Integer i : mAddressLines.keySet()) {\r\n                mMaxAddressLineIndex = Math.max(mMaxAddressLineIndex, i);\r\n            }\r\n        } else {\r\n            mMaxAddressLineIndex = Math.max(mMaxAddressLineIndex, index);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the feature name of the address, for example, &quot;Golden Gate Bridge&quot;, or null\r\n     * if it is unknown\r\n     */\r\n    public String getFeatureName() {\r\n        return mFeatureName;\r\n    }\r\n\r\n    /**\r\n     * Sets the feature name of the address to the given String, which may be null\r\n     */\r\n    public void setFeatureName(String featureName) {\r\n        mFeatureName = featureName;\r\n    }\r\n\r\n    /**\r\n     * Returns the administrative area name of the address, for example, &quot;CA&quot;, or null if\r\n     * it is unknown\r\n     */\r\n    public String getAdminArea() {\r\n        return mAdminArea;\r\n    }\r\n\r\n    /**\r\n     * Sets the administrative area name of the address to the given String, which may be null\r\n     */\r\n    public void setAdminArea(String adminArea) {\r\n        this.mAdminArea = adminArea;\r\n    }\r\n\r\n    /**\r\n     * Returns the sub-administrative area name of the address, for example, &quot;Santa Clara County&quot;,\r\n     * or null if it is unknown\r\n     */\r\n    public String getSubAdminArea() {\r\n        return mSubAdminArea;\r\n    }\r\n\r\n    /**\r\n     * Sets the sub-administrative area name of the address to the given String, which may be null\r\n     */\r\n    public void setSubAdminArea(String subAdminArea) {\r\n        this.mSubAdminArea = subAdminArea;\r\n    }\r\n\r\n    /**\r\n     * Returns the locality of the address, for example &quot;Mountain View&quot;, or null if it is unknown.\r\n     */\r\n    public String getLocality() {\r\n        return mLocality;\r\n    }\r\n\r\n    /**\r\n     * Sets the locality of the address to the given String, which may be null.\r\n     */\r\n    public void setLocality(String locality) {\r\n        mLocality = locality;\r\n    }\r\n\r\n    /**\r\n     * Returns the sub-locality of the address, or null if it is unknown.\r\n     * For example, this may correspond to the neighborhood of the locality.\r\n     */\r\n    public String getSubLocality() {\r\n        return mSubLocality;\r\n    }\r\n\r\n    /**\r\n     * Sets the sub-locality of the address to the given String, which may be null.\r\n     */\r\n    public void setSubLocality(String sublocality) {\r\n        mSubLocality = sublocality;\r\n    }\r\n\r\n    /**\r\n     * Returns the thoroughfare name of the address, for example, &quot;1600 Ampitheater Parkway&quot;,\r\n     * which may be null\r\n     */\r\n    public String getThoroughfare() {\r\n        return mThoroughfare;\r\n    }\r\n\r\n    /**\r\n     * Sets the thoroughfare name of the address, which may be null.\r\n     */\r\n    public void setThoroughfare(String thoroughfare) {\r\n        this.mThoroughfare = thoroughfare;\r\n    }\r\n\r\n    /**\r\n     * Returns the sub-thoroughfare name of the address, which may be null.\r\n     * This may correspond to the street number of the address.\r\n     */\r\n    public String getSubThoroughfare() {\r\n        return mSubThoroughfare;\r\n    }\r\n\r\n    /**\r\n     * Sets the sub-thoroughfare name of the address, which may be null.\r\n     */\r\n    public void setSubThoroughfare(String subthoroughfare) {\r\n        this.mSubThoroughfare = subthoroughfare;\r\n    }\r\n\r\n    /**\r\n     * Returns the premises of the address, or null if it is unknown.\r\n     */\r\n    public String getPremises() {\r\n        return mPremises;\r\n    }\r\n\r\n    /**\r\n     * Sets the premises of the address to the given String, which may be null.\r\n     */\r\n    public void setPremises(String premises) {\r\n        mPremises = premises;\r\n    }\r\n\r\n    /**\r\n     * Returns the postal code of the address, for example &quot;94110&quot;,\r\n     * or null if it is unknown.\r\n     */\r\n    public String getPostalCode() {\r\n        return mPostalCode;\r\n    }\r\n\r\n    /**\r\n     * Sets the postal code of the address to the given String, which may\r\n     * be null.\r\n     */\r\n    public void setPostalCode(String postalCode) {\r\n        mPostalCode = postalCode;\r\n    }\r\n\r\n    /**\r\n     * Returns the country code of the address, for example &quot;US&quot;,\r\n     * or null if it is unknown.\r\n     */\r\n    public String getCountryCode() {\r\n        return mCountryCode;\r\n    }\r\n\r\n    /**\r\n     * Sets the country code of the address to the given String, which may\r\n     * be null.\r\n     */\r\n    public void setCountryCode(String countryCode) {\r\n        mCountryCode = countryCode;\r\n    }\r\n\r\n    /**\r\n     * Returns the localized country name of the address, for example &quot;Iceland&quot;,\r\n     * or null if it is unknown.\r\n     */\r\n    public String getCountryName() {\r\n        return mCountryName;\r\n    }\r\n\r\n    /**\r\n     * Sets the country name of the address to the given String, which may\r\n     * be null.\r\n     */\r\n    public void setCountryName(String countryName) {\r\n        mCountryName = countryName;\r\n    }\r\n\r\n    /**\r\n     * Returns true if a latitude has been assigned to this Address,\r\n     * false otherwise.\r\n     */\r\n    public boolean hasLatitude() {\r\n        return mHasLatitude;\r\n    }\r\n\r\n    /**\r\n     * Returns the latitude of the address if known.\r\n     *\r\n     * @throws IllegalStateException if this Address has not been assigned\r\n     * a latitude.\r\n     */\r\n    public double getLatitude() {\r\n        if (mHasLatitude) {\r\n            return mLatitude;\r\n        } else {\r\n            throw new IllegalStateException();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the latitude associated with this address.\r\n     */\r\n    public void setLatitude(double latitude) {\r\n        mLatitude = latitude;\r\n        mHasLatitude = true;\r\n    }\r\n\r\n    /**\r\n     * Removes any latitude associated with this address.\r\n     */\r\n    public void clearLatitude() {\r\n        mHasLatitude = false;\r\n    }\r\n\r\n    /**\r\n     * Returns true if a longitude has been assigned to this Address,\r\n     * false otherwise.\r\n     */\r\n    public boolean hasLongitude() {\r\n        return mHasLongitude;\r\n    }\r\n\r\n    /**\r\n     * Returns the longitude of the address if known.\r\n     *\r\n     * @throws IllegalStateException if this Address has not been assigned\r\n     * a longitude.\r\n     */\r\n    public double getLongitude() {\r\n        if (mHasLongitude) {\r\n            return mLongitude;\r\n        } else {\r\n            throw new IllegalStateException();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the longitude associated with this address.\r\n     */\r\n    public void setLongitude(double longitude) {\r\n        mLongitude = longitude;\r\n        mHasLongitude = true;\r\n    }\r\n\r\n    /**\r\n     * Removes any longitude associated with this address.\r\n     */\r\n    public void clearLongitude() {\r\n        mHasLongitude = false;\r\n    }\r\n\r\n    /**\r\n     * Returns the phone number of the address if known,\r\n     * or null if it is unknown.\r\n     *\r\n     * @throws IllegalStateException if this Address has not been assigned\r\n     * a phone number.\r\n     */\r\n    public String getPhone() {\r\n        return mPhone;\r\n    }\r\n\r\n    /**\r\n     * Sets the phone number associated with this address.\r\n     */\r\n    public void setPhone(String phone) {\r\n        mPhone = phone;\r\n    }\r\n\r\n    /**\r\n     * Returns the public URL for the address if known,\r\n     * or null if it is unknown.\r\n     */\r\n    public String getUrl() {\r\n        return mUrl;\r\n    }\r\n\r\n    /**\r\n     * Sets the public URL associated with this address.\r\n     */\r\n    public void setUrl(String Url) {\r\n        mUrl = Url;\r\n    }\r\n\r\n    /**\r\n     * Returns additional provider-specific information about the\r\n     * address as a Bundle.  The keys and values are determined\r\n     * by the provider.  If no additional information is available,\r\n     * null is returned.\r\n     *\r\n     * &lt;!--\r\n     * &lt;p&gt; A number of common key/value pairs are listed\r\n     * below. Providers that use any of the keys on this list must\r\n     * provide the corresponding value as described below.\r\n     *\r\n     * &lt;ul&gt;\r\n     * &lt;/ul&gt;\r\n     * --&gt;\r\n     */\r\n    public Bundle getExtras() {\r\n        return mExtras;\r\n    }\r\n\r\n    /**\r\n     * Sets the extra information associated with this fix to the\r\n     * given Bundle.\r\n     */\r\n    public void setExtras(Bundle extras) {\r\n        mExtras = (extras == null) ? null : new Bundle(extras);\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(&quot;Address[addressLines=[&quot;);\r\n        for (int i = 0; i &lt;= mMaxAddressLineIndex; i++) {\r\n            if (i &gt; 0) {\r\n                sb.append(&#39;,&#39;);\r\n            }\r\n            sb.append(i);\r\n            sb.append(&#39;:&#39;);\r\n            String line = mAddressLines.get(i);\r\n            if (line == null) {\r\n                sb.append(&quot;null&quot;);\r\n            } else {\r\n                sb.append(&#39;\\&quot;&#39;);\r\n                sb.append(line);\r\n                sb.append(&#39;\\&quot;&#39;);\r\n            }\r\n        }\r\n        sb.append(&#39;]&#39;);\r\n        sb.append(&quot;,feature=&quot;);\r\n        sb.append(mFeatureName);\r\n        sb.append(&quot;,admin=&quot;);\r\n        sb.append(mAdminArea);\r\n        sb.append(&quot;,sub-admin=&quot;);\r\n        sb.append(mSubAdminArea);\r\n        sb.append(&quot;,locality=&quot;);\r\n        sb.append(mLocality);\r\n        sb.append(&quot;,thoroughfare=&quot;);\r\n        sb.append(mThoroughfare);\r\n        sb.append(&quot;,postalCode=&quot;);\r\n        sb.append(mPostalCode);\r\n        sb.append(&quot;,countryCode=&quot;);\r\n        sb.append(mCountryCode);\r\n        sb.append(&quot;,countryName=&quot;);\r\n        sb.append(mCountryName);\r\n        sb.append(&quot;,hasLatitude=&quot;);\r\n        sb.append(mHasLatitude);\r\n        sb.append(&quot;,latitude=&quot;);\r\n        sb.append(mLatitude);\r\n        sb.append(&quot;,hasLongitude=&quot;);\r\n        sb.append(mHasLongitude);\r\n        sb.append(&quot;,longitude=&quot;);\r\n        sb.append(mLongitude);\r\n        sb.append(&quot;,phone=&quot;);\r\n        sb.append(mPhone);\r\n        sb.append(&quot;,url=&quot;);\r\n        sb.append(mUrl);\r\n        sb.append(&quot;,extras=&quot;);\r\n        sb.append(mExtras);\r\n        sb.append(&#39;]&#39;);\r\n        return sb.toString();\r\n    }\r\n\r\n    public static final @android.annotation.NonNull Parcelable.Creator&lt;Address&gt; CREATOR =\r\n        new Parcelable.Creator&lt;Address&gt;() {\r\n        public Address createFromParcel(Parcel in) {\r\n            String language = in.readString();\r\n            String country = in.readString();\r\n            Locale locale = country.length() &gt; 0 ?\r\n                new Locale(language, country) :\r\n                new Locale(language);\r\n            Address a = new Address(locale);\r\n\r\n            int N = in.readInt();\r\n            if (N &gt; 0) {\r\n                a.mAddressLines = new HashMap&lt;Integer, String&gt;(N);\r\n                for (int i = 0; i &lt; N; i++) {\r\n                    int index = in.readInt();\r\n                    String line = in.readString();\r\n                    a.mAddressLines.put(index, line);\r\n                    a.mMaxAddressLineIndex =\r\n                        Math.max(a.mMaxAddressLineIndex, index);\r\n                }\r\n            } else {\r\n                a.mAddressLines = null;\r\n                a.mMaxAddressLineIndex = -1;\r\n            }\r\n            a.mFeatureName = in.readString();\r\n            a.mAdminArea = in.readString();\r\n            a.mSubAdminArea = in.readString();\r\n            a.mLocality = in.readString();\r\n            a.mSubLocality = in.readString();\r\n            a.mThoroughfare = in.readString();\r\n            a.mSubThoroughfare = in.readString();\r\n            a.mPremises = in.readString();\r\n            a.mPostalCode = in.readString();\r\n            a.mCountryCode = in.readString();\r\n            a.mCountryName = in.readString();\r\n            a.mHasLatitude = in.readInt() == 0 ? false : true;\r\n            if (a.mHasLatitude) {\r\n                a.mLatitude = in.readDouble();\r\n            }\r\n            a.mHasLongitude = in.readInt() == 0 ? false : true;\r\n            if (a.mHasLongitude) {\r\n                a.mLongitude = in.readDouble();\r\n            }\r\n            a.mPhone = in.readString();\r\n            a.mUrl = in.readString();\r\n            a.mExtras = in.readBundle();\r\n            return a;\r\n        }\r\n\r\n        public Address[] newArray(int size) {\r\n            return new Address[size];\r\n        }\r\n    };\r\n\r\n    public int describeContents() {\r\n        return (mExtras != null) ? mExtras.describeContents() : 0;\r\n    }\r\n\r\n    public void writeToParcel(Parcel parcel, int flags) {\r\n        parcel.writeString(mLocale.getLanguage());\r\n        parcel.writeString(mLocale.getCountry());\r\n        if (mAddressLines == null) {\r\n            parcel.writeInt(0);\r\n        } else {\r\n            Set&lt;Map.Entry&lt;Integer, String&gt;&gt; entries = mAddressLines.entrySet();\r\n            parcel.writeInt(entries.size());\r\n            for (Map.Entry&lt;Integer, String&gt; e : entries) {\r\n                parcel.writeInt(e.getKey());\r\n                parcel.writeString(e.getValue());\r\n            }\r\n        }\r\n        parcel.writeString(mFeatureName);\r\n        parcel.writeString(mAdminArea);\r\n        parcel.writeString(mSubAdminArea);\r\n        parcel.writeString(mLocality);\r\n        parcel.writeString(mSubLocality);\r\n        parcel.writeString(mThoroughfare);\r\n        parcel.writeString(mSubThoroughfare);\r\n        parcel.writeString(mPremises);\r\n        parcel.writeString(mPostalCode);\r\n        parcel.writeString(mCountryCode);\r\n        parcel.writeString(mCountryName);\r\n        parcel.writeInt(mHasLatitude ? 1 : 0);\r\n        if (mHasLatitude) {\r\n            parcel.writeDouble(mLatitude);\r\n        }\r\n        parcel.writeInt(mHasLongitude ? 1 : 0);\r\n        if (mHasLongitude){\r\n            parcel.writeDouble(mLongitude);\r\n        }\r\n        parcel.writeString(mPhone);\r\n        parcel.writeString(mUrl);\r\n        parcel.writeBundle(mExtras);\r\n    }\r\n}\r\n```\r\n\r\nFor the new Address Library, I can use toString() method to get it into string format as it is inbuilt within it but I don&#39;t want to use it as I&#39;ve already created all the desired functions according to my need for the previous version. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3jW8P.png\r\n  [2]: https://i.stack.imgur.com/eUSVn.png\r\n  [3]: https://i.stack.imgur.com/XCGL9.png\r\n  [4]: https://i.stack.imgur.com/W5kbY.png","title":"Serialization of Address(android.location.address) into JSON String using Gson library returns empty string after upgrading project","body":"<p>DataType of addressList is List of Address, where Address belongs to <strong>android.location.Address</strong></p>\n<p>I will be attaching four screenshot of my debug screen to demonstrate the same.</p>\n<ol>\n<li><p>Old Location library showing list of addresses:<a href=\"https://i.stack.imgur.com/3jW8P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3jW8P.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Old Location library showing list of address after converting it to JSON string:<a href=\"https://i.stack.imgur.com/eUSVn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eUSVn.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>New Location library showing list of addresses:\n<a href=\"https://i.stack.imgur.com/XCGL9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XCGL9.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>New Location library showing empty result after converting it to JSON string:<a href=\"https://i.stack.imgur.com/W5kbY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W5kbY.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n<p>Adding Address.java class of both the Location libraries:</p>\n<p><strong>Old Address Class:</strong></p>\n<pre><code>package android.location;\n\nimport android.os.Bundle;\nimport android.os.Parcel;\nimport android.os.Parcelable;\nimport android.os.Parcelable.Creator;\nimport java.util.Locale;\n\npublic class Address implements Parcelable {\n    public static final Creator&lt;Address&gt; CREATOR = null;\n\n    public Address(Locale locale) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public Locale getLocale() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public int getMaxAddressLineIndex() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getAddressLine(int index) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setAddressLine(int index, String line) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getFeatureName() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setFeatureName(String featureName) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getAdminArea() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setAdminArea(String adminArea) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getSubAdminArea() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setSubAdminArea(String subAdminArea) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getLocality() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setLocality(String locality) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getSubLocality() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setSubLocality(String sublocality) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getThoroughfare() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setThoroughfare(String thoroughfare) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getSubThoroughfare() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setSubThoroughfare(String subthoroughfare) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getPremises() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setPremises(String premises) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getPostalCode() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setPostalCode(String postalCode) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getCountryCode() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setCountryCode(String countryCode) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getCountryName() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setCountryName(String countryName) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public boolean hasLatitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public double getLatitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setLatitude(double latitude) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void clearLatitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public boolean hasLongitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public double getLongitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setLongitude(double longitude) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void clearLongitude() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getPhone() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setPhone(String phone) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String getUrl() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setUrl(String Url) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public Bundle getExtras() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void setExtras(Bundle extras) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public String toString() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public int describeContents() {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n\n    public void writeToParcel(Parcel parcel, int flags) {\n        throw new RuntimeException(&quot;Stub!&quot;);\n    }\n}\n</code></pre>\n<p><strong>New Address Class:</strong></p>\n<pre><code>package android.location;\n\nimport java.util.HashMap;\nimport java.util.Locale;\nimport java.util.Map;\nimport java.util.Set;\n\nimport android.os.Bundle;\nimport android.os.Parcel;\nimport android.os.Parcelable;\n\n/**\n * A class representing an Address, i.e, a set of Strings describing a location.\n *\n * The address format is a simplified version of xAL (eXtensible Address Language)\n * http://www.oasis-open.org/committees/ciq/ciq.html#6\n */\npublic class Address implements Parcelable {\n\n    private Locale mLocale;\n\n    private String mFeatureName;\n    private HashMap&lt;Integer, String&gt; mAddressLines;\n    private int mMaxAddressLineIndex = -1;\n    private String mAdminArea;\n    private String mSubAdminArea;\n    private String mLocality;\n    private String mSubLocality;\n    private String mThoroughfare;\n    private String mSubThoroughfare;\n    private String mPremises;\n    private String mPostalCode;\n    private String mCountryCode;\n    private String mCountryName;\n    private double mLatitude;\n    private double mLongitude;\n    private boolean mHasLatitude = false;\n    private boolean mHasLongitude = false;\n    private String mPhone;\n    private String mUrl;\n    private Bundle mExtras = null;\n\n    /**\n     * Constructs a new Address object set to the given Locale and with all\n     * other fields initialized to null or false.\n     */\n    public Address(Locale locale) {\n        mLocale = locale;\n    }\n\n    /**\n     * Returns the Locale associated with this address.\n     */\n    public Locale getLocale() {\n        return mLocale;\n    }\n\n    /**\n     * Returns the largest index currently in use to specify an address line.\n     * If no address lines are specified, -1 is returned.\n     */\n    public int getMaxAddressLineIndex() {\n        return mMaxAddressLineIndex;\n    }\n\n    /**\n     * Returns a line of the address numbered by the given index\n     * (starting at 0), or null if no such line is present.\n     *\n     * @throws IllegalArgumentException if index &lt; 0\n     */\n    public String getAddressLine(int index) {\n        if (index &lt; 0) {\n            throw new IllegalArgumentException(&quot;index = &quot; + index + &quot; &lt; 0&quot;);\n        }\n        return mAddressLines == null? null :  mAddressLines.get(index);\n    }\n\n    /**\n     * Sets the line of the address numbered by index (starting at 0) to the\n     * given String, which may be null.\n     *\n     * @throws IllegalArgumentException if index &lt; 0\n     */\n    public void setAddressLine(int index, String line) {\n        if (index &lt; 0) {\n            throw new IllegalArgumentException(&quot;index = &quot; + index + &quot; &lt; 0&quot;);\n        }\n        if (mAddressLines == null) {\n            mAddressLines = new HashMap&lt;Integer, String&gt;();\n        }\n        mAddressLines.put(index, line);\n\n        if (line == null) {\n            // We've eliminated a line, recompute the max index\n            mMaxAddressLineIndex = -1;\n            for (Integer i : mAddressLines.keySet()) {\n                mMaxAddressLineIndex = Math.max(mMaxAddressLineIndex, i);\n            }\n        } else {\n            mMaxAddressLineIndex = Math.max(mMaxAddressLineIndex, index);\n        }\n    }\n\n    /**\n     * Returns the feature name of the address, for example, &quot;Golden Gate Bridge&quot;, or null\n     * if it is unknown\n     */\n    public String getFeatureName() {\n        return mFeatureName;\n    }\n\n    /**\n     * Sets the feature name of the address to the given String, which may be null\n     */\n    public void setFeatureName(String featureName) {\n        mFeatureName = featureName;\n    }\n\n    /**\n     * Returns the administrative area name of the address, for example, &quot;CA&quot;, or null if\n     * it is unknown\n     */\n    public String getAdminArea() {\n        return mAdminArea;\n    }\n\n    /**\n     * Sets the administrative area name of the address to the given String, which may be null\n     */\n    public void setAdminArea(String adminArea) {\n        this.mAdminArea = adminArea;\n    }\n\n    /**\n     * Returns the sub-administrative area name of the address, for example, &quot;Santa Clara County&quot;,\n     * or null if it is unknown\n     */\n    public String getSubAdminArea() {\n        return mSubAdminArea;\n    }\n\n    /**\n     * Sets the sub-administrative area name of the address to the given String, which may be null\n     */\n    public void setSubAdminArea(String subAdminArea) {\n        this.mSubAdminArea = subAdminArea;\n    }\n\n    /**\n     * Returns the locality of the address, for example &quot;Mountain View&quot;, or null if it is unknown.\n     */\n    public String getLocality() {\n        return mLocality;\n    }\n\n    /**\n     * Sets the locality of the address to the given String, which may be null.\n     */\n    public void setLocality(String locality) {\n        mLocality = locality;\n    }\n\n    /**\n     * Returns the sub-locality of the address, or null if it is unknown.\n     * For example, this may correspond to the neighborhood of the locality.\n     */\n    public String getSubLocality() {\n        return mSubLocality;\n    }\n\n    /**\n     * Sets the sub-locality of the address to the given String, which may be null.\n     */\n    public void setSubLocality(String sublocality) {\n        mSubLocality = sublocality;\n    }\n\n    /**\n     * Returns the thoroughfare name of the address, for example, &quot;1600 Ampitheater Parkway&quot;,\n     * which may be null\n     */\n    public String getThoroughfare() {\n        return mThoroughfare;\n    }\n\n    /**\n     * Sets the thoroughfare name of the address, which may be null.\n     */\n    public void setThoroughfare(String thoroughfare) {\n        this.mThoroughfare = thoroughfare;\n    }\n\n    /**\n     * Returns the sub-thoroughfare name of the address, which may be null.\n     * This may correspond to the street number of the address.\n     */\n    public String getSubThoroughfare() {\n        return mSubThoroughfare;\n    }\n\n    /**\n     * Sets the sub-thoroughfare name of the address, which may be null.\n     */\n    public void setSubThoroughfare(String subthoroughfare) {\n        this.mSubThoroughfare = subthoroughfare;\n    }\n\n    /**\n     * Returns the premises of the address, or null if it is unknown.\n     */\n    public String getPremises() {\n        return mPremises;\n    }\n\n    /**\n     * Sets the premises of the address to the given String, which may be null.\n     */\n    public void setPremises(String premises) {\n        mPremises = premises;\n    }\n\n    /**\n     * Returns the postal code of the address, for example &quot;94110&quot;,\n     * or null if it is unknown.\n     */\n    public String getPostalCode() {\n        return mPostalCode;\n    }\n\n    /**\n     * Sets the postal code of the address to the given String, which may\n     * be null.\n     */\n    public void setPostalCode(String postalCode) {\n        mPostalCode = postalCode;\n    }\n\n    /**\n     * Returns the country code of the address, for example &quot;US&quot;,\n     * or null if it is unknown.\n     */\n    public String getCountryCode() {\n        return mCountryCode;\n    }\n\n    /**\n     * Sets the country code of the address to the given String, which may\n     * be null.\n     */\n    public void setCountryCode(String countryCode) {\n        mCountryCode = countryCode;\n    }\n\n    /**\n     * Returns the localized country name of the address, for example &quot;Iceland&quot;,\n     * or null if it is unknown.\n     */\n    public String getCountryName() {\n        return mCountryName;\n    }\n\n    /**\n     * Sets the country name of the address to the given String, which may\n     * be null.\n     */\n    public void setCountryName(String countryName) {\n        mCountryName = countryName;\n    }\n\n    /**\n     * Returns true if a latitude has been assigned to this Address,\n     * false otherwise.\n     */\n    public boolean hasLatitude() {\n        return mHasLatitude;\n    }\n\n    /**\n     * Returns the latitude of the address if known.\n     *\n     * @throws IllegalStateException if this Address has not been assigned\n     * a latitude.\n     */\n    public double getLatitude() {\n        if (mHasLatitude) {\n            return mLatitude;\n        } else {\n            throw new IllegalStateException();\n        }\n    }\n\n    /**\n     * Sets the latitude associated with this address.\n     */\n    public void setLatitude(double latitude) {\n        mLatitude = latitude;\n        mHasLatitude = true;\n    }\n\n    /**\n     * Removes any latitude associated with this address.\n     */\n    public void clearLatitude() {\n        mHasLatitude = false;\n    }\n\n    /**\n     * Returns true if a longitude has been assigned to this Address,\n     * false otherwise.\n     */\n    public boolean hasLongitude() {\n        return mHasLongitude;\n    }\n\n    /**\n     * Returns the longitude of the address if known.\n     *\n     * @throws IllegalStateException if this Address has not been assigned\n     * a longitude.\n     */\n    public double getLongitude() {\n        if (mHasLongitude) {\n            return mLongitude;\n        } else {\n            throw new IllegalStateException();\n        }\n    }\n\n    /**\n     * Sets the longitude associated with this address.\n     */\n    public void setLongitude(double longitude) {\n        mLongitude = longitude;\n        mHasLongitude = true;\n    }\n\n    /**\n     * Removes any longitude associated with this address.\n     */\n    public void clearLongitude() {\n        mHasLongitude = false;\n    }\n\n    /**\n     * Returns the phone number of the address if known,\n     * or null if it is unknown.\n     *\n     * @throws IllegalStateException if this Address has not been assigned\n     * a phone number.\n     */\n    public String getPhone() {\n        return mPhone;\n    }\n\n    /**\n     * Sets the phone number associated with this address.\n     */\n    public void setPhone(String phone) {\n        mPhone = phone;\n    }\n\n    /**\n     * Returns the public URL for the address if known,\n     * or null if it is unknown.\n     */\n    public String getUrl() {\n        return mUrl;\n    }\n\n    /**\n     * Sets the public URL associated with this address.\n     */\n    public void setUrl(String Url) {\n        mUrl = Url;\n    }\n\n    /**\n     * Returns additional provider-specific information about the\n     * address as a Bundle.  The keys and values are determined\n     * by the provider.  If no additional information is available,\n     * null is returned.\n     *\n     * &lt;!--\n     * &lt;p&gt; A number of common key/value pairs are listed\n     * below. Providers that use any of the keys on this list must\n     * provide the corresponding value as described below.\n     *\n     * &lt;ul&gt;\n     * &lt;/ul&gt;\n     * --&gt;\n     */\n    public Bundle getExtras() {\n        return mExtras;\n    }\n\n    /**\n     * Sets the extra information associated with this fix to the\n     * given Bundle.\n     */\n    public void setExtras(Bundle extras) {\n        mExtras = (extras == null) ? null : new Bundle(extras);\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        sb.append(&quot;Address[addressLines=[&quot;);\n        for (int i = 0; i &lt;= mMaxAddressLineIndex; i++) {\n            if (i &gt; 0) {\n                sb.append(',');\n            }\n            sb.append(i);\n            sb.append(':');\n            String line = mAddressLines.get(i);\n            if (line == null) {\n                sb.append(&quot;null&quot;);\n            } else {\n                sb.append('\\&quot;');\n                sb.append(line);\n                sb.append('\\&quot;');\n            }\n        }\n        sb.append(']');\n        sb.append(&quot;,feature=&quot;);\n        sb.append(mFeatureName);\n        sb.append(&quot;,admin=&quot;);\n        sb.append(mAdminArea);\n        sb.append(&quot;,sub-admin=&quot;);\n        sb.append(mSubAdminArea);\n        sb.append(&quot;,locality=&quot;);\n        sb.append(mLocality);\n        sb.append(&quot;,thoroughfare=&quot;);\n        sb.append(mThoroughfare);\n        sb.append(&quot;,postalCode=&quot;);\n        sb.append(mPostalCode);\n        sb.append(&quot;,countryCode=&quot;);\n        sb.append(mCountryCode);\n        sb.append(&quot;,countryName=&quot;);\n        sb.append(mCountryName);\n        sb.append(&quot;,hasLatitude=&quot;);\n        sb.append(mHasLatitude);\n        sb.append(&quot;,latitude=&quot;);\n        sb.append(mLatitude);\n        sb.append(&quot;,hasLongitude=&quot;);\n        sb.append(mHasLongitude);\n        sb.append(&quot;,longitude=&quot;);\n        sb.append(mLongitude);\n        sb.append(&quot;,phone=&quot;);\n        sb.append(mPhone);\n        sb.append(&quot;,url=&quot;);\n        sb.append(mUrl);\n        sb.append(&quot;,extras=&quot;);\n        sb.append(mExtras);\n        sb.append(']');\n        return sb.toString();\n    }\n\n    public static final @android.annotation.NonNull Parcelable.Creator&lt;Address&gt; CREATOR =\n        new Parcelable.Creator&lt;Address&gt;() {\n        public Address createFromParcel(Parcel in) {\n            String language = in.readString();\n            String country = in.readString();\n            Locale locale = country.length() &gt; 0 ?\n                new Locale(language, country) :\n                new Locale(language);\n            Address a = new Address(locale);\n\n            int N = in.readInt();\n            if (N &gt; 0) {\n                a.mAddressLines = new HashMap&lt;Integer, String&gt;(N);\n                for (int i = 0; i &lt; N; i++) {\n                    int index = in.readInt();\n                    String line = in.readString();\n                    a.mAddressLines.put(index, line);\n                    a.mMaxAddressLineIndex =\n                        Math.max(a.mMaxAddressLineIndex, index);\n                }\n            } else {\n                a.mAddressLines = null;\n                a.mMaxAddressLineIndex = -1;\n            }\n            a.mFeatureName = in.readString();\n            a.mAdminArea = in.readString();\n            a.mSubAdminArea = in.readString();\n            a.mLocality = in.readString();\n            a.mSubLocality = in.readString();\n            a.mThoroughfare = in.readString();\n            a.mSubThoroughfare = in.readString();\n            a.mPremises = in.readString();\n            a.mPostalCode = in.readString();\n            a.mCountryCode = in.readString();\n            a.mCountryName = in.readString();\n            a.mHasLatitude = in.readInt() == 0 ? false : true;\n            if (a.mHasLatitude) {\n                a.mLatitude = in.readDouble();\n            }\n            a.mHasLongitude = in.readInt() == 0 ? false : true;\n            if (a.mHasLongitude) {\n                a.mLongitude = in.readDouble();\n            }\n            a.mPhone = in.readString();\n            a.mUrl = in.readString();\n            a.mExtras = in.readBundle();\n            return a;\n        }\n\n        public Address[] newArray(int size) {\n            return new Address[size];\n        }\n    };\n\n    public int describeContents() {\n        return (mExtras != null) ? mExtras.describeContents() : 0;\n    }\n\n    public void writeToParcel(Parcel parcel, int flags) {\n        parcel.writeString(mLocale.getLanguage());\n        parcel.writeString(mLocale.getCountry());\n        if (mAddressLines == null) {\n            parcel.writeInt(0);\n        } else {\n            Set&lt;Map.Entry&lt;Integer, String&gt;&gt; entries = mAddressLines.entrySet();\n            parcel.writeInt(entries.size());\n            for (Map.Entry&lt;Integer, String&gt; e : entries) {\n                parcel.writeInt(e.getKey());\n                parcel.writeString(e.getValue());\n            }\n        }\n        parcel.writeString(mFeatureName);\n        parcel.writeString(mAdminArea);\n        parcel.writeString(mSubAdminArea);\n        parcel.writeString(mLocality);\n        parcel.writeString(mSubLocality);\n        parcel.writeString(mThoroughfare);\n        parcel.writeString(mSubThoroughfare);\n        parcel.writeString(mPremises);\n        parcel.writeString(mPostalCode);\n        parcel.writeString(mCountryCode);\n        parcel.writeString(mCountryName);\n        parcel.writeInt(mHasLatitude ? 1 : 0);\n        if (mHasLatitude) {\n            parcel.writeDouble(mLatitude);\n        }\n        parcel.writeInt(mHasLongitude ? 1 : 0);\n        if (mHasLongitude){\n            parcel.writeDouble(mLongitude);\n        }\n        parcel.writeString(mPhone);\n        parcel.writeString(mUrl);\n        parcel.writeBundle(mExtras);\n    }\n}\n</code></pre>\n<p>For the new Address Library, I can use toString() method to get it into string format as it is inbuilt within it but I don't want to use it as I've already created all the desired functions according to my need for the previous version.</p>\n"},{"tags":["java","json","pretty-print","json-simple"],"comments":[{"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"&#230;"},"score":0,"creation_date":1622671252,"post_id":4105795,"comment_id":119862601,"body_markdown":"JsonParser.parseString(str): https://stackoverflow.com/a/63397831/5626568","body":"JsonParser.parseString(str): <a href=\"https://stackoverflow.com/a/63397831/5626568\">stackoverflow.com/a/63397831/5626568</a>"}],"answers":[{"tags":[],"owner":{"account_id":224610,"reputation":7733,"user_id":484566,"accept_rate":92,"display_name":"BuffaloBuffalo"},"down_vote_count":1,"up_vote_count":46,"is_accepted":false,"score":45,"last_activity_date":1441984675,"creation_date":1288960679,"answer_id":4105898,"question_id":4105795,"body_markdown":"It seems like [GSON][1] supports this, although I don&#39;t know if you want to switch from the library you are using.\r\n\r\nFrom the user guide:\r\n\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    String jsonOutput = gson.toJson(someObject);\r\n\r\n\r\n  [1]: https://github.com/google/gson","title":"Pretty-Print JSON in Java","body":"<p>It seems like <a href=\"https://github.com/google/gson\" rel=\"noreferrer\">GSON</a> supports this, although I don't know if you want to switch from the library you are using.</p>\n\n<p>From the user guide:</p>\n\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nString jsonOutput = gson.toJson(someObject);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":394033,"reputation":10807,"user_id":756233,"accept_rate":71,"display_name":"Ray Hulha"},"down_vote_count":2,"up_vote_count":366,"is_accepted":true,"score":364,"last_activity_date":1626807422,"creation_date":1315238787,"answer_id":7310424,"question_id":4105795,"body_markdown":"Google&#39;s [GSON][1] can do this in a nice way:\r\n\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    JsonParser jp = new JsonParser();\r\n    JsonElement je = jp.parse(uglyJsonString);\r\n    String prettyJsonString = gson.toJson(je);\r\n\r\nor since it is now recommended to use the static parse method from JsonParser you can also use this instead:\r\n\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    JsonElement je = JsonParser.parseString(uglyJsonString);\r\n    String prettyJsonString = gson.toJson(je);\r\n\r\nHere is the import statement:\r\n\r\n    import com.google.gson.*;\r\n\r\nHere is the Gradle dependency:\r\n\r\n    implementation &#39;com.google.code.gson:gson:2.8.7&#39;\r\n\r\n  [1]: https://github.com/google/gson","title":"Pretty-Print JSON in Java","body":"<p>Google's <a href=\"https://github.com/google/gson\" rel=\"noreferrer\">GSON</a> can do this in a nice way:</p>\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nJsonParser jp = new JsonParser();\nJsonElement je = jp.parse(uglyJsonString);\nString prettyJsonString = gson.toJson(je);\n</code></pre>\n<p>or since it is now recommended to use the static parse method from JsonParser you can also use this instead:</p>\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nJsonElement je = JsonParser.parseString(uglyJsonString);\nString prettyJsonString = gson.toJson(je);\n</code></pre>\n<p>Here is the import statement:</p>\n<pre><code>import com.google.gson.*;\n</code></pre>\n<p>Here is the Gradle dependency:</p>\n<pre><code>implementation 'com.google.code.gson:gson:2.8.7'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1049176,"reputation":2377,"user_id":1053487,"display_name":"Raghu Kiran"},"down_vote_count":1,"up_vote_count":218,"is_accepted":false,"score":217,"last_activity_date":1651088647,"creation_date":1331037340,"answer_id":9583835,"question_id":4105795,"body_markdown":"I used [org.json][1] built-in methods to pretty-print the data.\r\n\r\n    import org.json.JSONObject;\r\n    JSONObject json = new JSONObject(jsonString); // Convert text to object\r\n    System.out.println(json.toString(4)); // Print it with specified indentation\r\n\r\nThe order of fields in JSON is random per definition. A specific order is subject to parser implementation.\r\n\r\n\r\n  [1]: https://github.com/douglascrockford/JSON-java","title":"Pretty-Print JSON in Java","body":"<p>I used <a href=\"https://github.com/douglascrockford/JSON-java\" rel=\"noreferrer\">org.json</a> built-in methods to pretty-print the data.</p>\n<pre><code>import org.json.JSONObject;\nJSONObject json = new JSONObject(jsonString); // Convert text to object\nSystem.out.println(json.toString(4)); // Print it with specified indentation\n</code></pre>\n<p>The order of fields in JSON is random per definition. A specific order is subject to parser implementation.</p>\n"},{"tags":[],"owner":{"account_id":132300,"reputation":2222,"user_id":332897,"accept_rate":76,"display_name":"Enrique San Mart&#237;n"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1441986528,"creation_date":1332182217,"answer_id":9775878,"question_id":4105795,"body_markdown":"In JSONLib you can use this:\r\n\r\n    String jsonTxt = JSONUtils.valueToString(json, 8, 4);\r\n\r\nFrom the [Javadoc][1]:\r\n\r\n[![][2]][2]\r\n\r\n\r\n  [1]: http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/util/JSONUtils.html#valueToString(java.lang.Object,%20int,%20int)\r\n  [2]: http://i.stack.imgur.com/pWzAc.png","title":"Pretty-Print JSON in Java","body":"<p>In JSONLib you can use this:</p>\n\n<pre><code>String jsonTxt = JSONUtils.valueToString(json, 8, 4);\n</code></pre>\n\n<p>From the <a href=\"http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/util/JSONUtils.html#valueToString(java.lang.Object,%20int,%20int)\" rel=\"noreferrer\">Javadoc</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pWzAc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pWzAc.png\" alt=\"\"></a></p>\n"},{"tags":[],"owner":{"account_id":538874,"reputation":14099,"user_id":906658,"accept_rate":59,"display_name":"Bengt"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1442062296,"creation_date":1349379466,"answer_id":12734617,"question_id":4105795,"body_markdown":"Pretty printing with [GSON](https://github.com/google/gson) in one line:\r\n\r\n    System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(new JsonParser().parse(jsonString)));\r\n\r\nBesides inlining, this is equivalent to [the accepted answer][1].\r\n\r\n[1]: https://stackoverflow.com/a/7310424/906658","title":"Pretty-Print JSON in Java","body":"<p>Pretty printing with <a href=\"https://github.com/google/gson\" rel=\"noreferrer\">GSON</a> in one line:</p>\n\n<pre><code>System.out.println(new GsonBuilder().setPrettyPrinting().create().toJson(new JsonParser().parse(jsonString)));\n</code></pre>\n\n<p>Besides inlining, this is equivalent to <a href=\"https://stackoverflow.com/a/7310424/906658\">the accepted answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":162425,"reputation":148009,"user_id":383861,"display_name":"bdoughan"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1441985905,"creation_date":1371832093,"answer_id":17240069,"question_id":4105795,"body_markdown":"If you are using a Java API for JSON Processing (JSR-353) implementation then you can specify the `JsonGenerator.PRETTY_PRINTING` property when you create a `JsonGeneratorFactory`.\r\n\r\nThe following example has been originally published on my [blog post][1].\r\n\r\n    import java.util.*;\r\n    import javax.json.Json;\r\n    import javax.json.stream.*;\r\n    \r\n    Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;(1);\r\n    properties.put(JsonGenerator.PRETTY_PRINTING, true);\r\n    JsonGeneratorFactory jgf = Json.createGeneratorFactory(properties);\r\n    JsonGenerator jg = jgf.createGenerator(System.out);\r\n    \r\n    jg.writeStartObject()                    // {\r\n        .write(&quot;name&quot;, &quot;Jane Doe&quot;)           //    &quot;name&quot;:&quot;Jane Doe&quot;,\r\n        .writeStartObject(&quot;address&quot;)         //    &quot;address&quot;:{\r\n            .write(&quot;type&quot;, 1)                //        &quot;type&quot;:1,\r\n            .write(&quot;street&quot;, &quot;1 A Street&quot;)   //        &quot;street&quot;:&quot;1 A Street&quot;,\r\n            .writeNull(&quot;city&quot;)               //        &quot;city&quot;:null,\r\n            .write(&quot;verified&quot;, false)        //        &quot;verified&quot;:false\r\n        .writeEnd()                          //    },\r\n        .writeStartArray(&quot;phone-numbers&quot;)    //    &quot;phone-numbers&quot;:[\r\n            .writeStartObject()              //        {\r\n                .write(&quot;number&quot;, &quot;555-1111&quot;) //            &quot;number&quot;:&quot;555-1111&quot;,\r\n                .write(&quot;extension&quot;, &quot;123&quot;)   //            &quot;extension&quot;:&quot;123&quot;\r\n            .writeEnd()                      //        },\r\n            .writeStartObject()              //        {\r\n                .write(&quot;number&quot;, &quot;555-2222&quot;) //            &quot;number&quot;:&quot;555-2222&quot;,\r\n                .writeNull(&quot;extension&quot;)      //            &quot;extension&quot;:null\r\n            .writeEnd()                      //        }\r\n        .writeEnd()                          //    ]\r\n    .writeEnd()                              // }\r\n    .close();\r\n\r\n\r\n  [1]: http://blog.bdoughan.com/2013/04/java-api-for-json-processing-jsr-353.html","title":"Pretty-Print JSON in Java","body":"<p>If you are using a Java API for JSON Processing (JSR-353) implementation then you can specify the <code>JsonGenerator.PRETTY_PRINTING</code> property when you create a <code>JsonGeneratorFactory</code>.</p>\n\n<p>The following example has been originally published on my <a href=\"http://blog.bdoughan.com/2013/04/java-api-for-json-processing-jsr-353.html\" rel=\"noreferrer\">blog post</a>.</p>\n\n<pre><code>import java.util.*;\nimport javax.json.Json;\nimport javax.json.stream.*;\n\nMap&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;(1);\nproperties.put(JsonGenerator.PRETTY_PRINTING, true);\nJsonGeneratorFactory jgf = Json.createGeneratorFactory(properties);\nJsonGenerator jg = jgf.createGenerator(System.out);\n\njg.writeStartObject()                    // {\n    .write(\"name\", \"Jane Doe\")           //    \"name\":\"Jane Doe\",\n    .writeStartObject(\"address\")         //    \"address\":{\n        .write(\"type\", 1)                //        \"type\":1,\n        .write(\"street\", \"1 A Street\")   //        \"street\":\"1 A Street\",\n        .writeNull(\"city\")               //        \"city\":null,\n        .write(\"verified\", false)        //        \"verified\":false\n    .writeEnd()                          //    },\n    .writeStartArray(\"phone-numbers\")    //    \"phone-numbers\":[\n        .writeStartObject()              //        {\n            .write(\"number\", \"555-1111\") //            \"number\":\"555-1111\",\n            .write(\"extension\", \"123\")   //            \"extension\":\"123\"\n        .writeEnd()                      //        },\n        .writeStartObject()              //        {\n            .write(\"number\", \"555-2222\") //            \"number\":\"555-2222\",\n            .writeNull(\"extension\")      //            \"extension\":null\n        .writeEnd()                      //        }\n    .writeEnd()                          //    ]\n.writeEnd()                              // }\n.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1441987973,"creation_date":1392779865,"answer_id":21870321,"question_id":4105795,"body_markdown":"Now this can be achieved with the JSONLib library:\r\n\r\nhttp://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html\r\n\r\nIf (and only if) you use the overloaded `toString(int indentationFactor)` method and not the standard `toString()` method.\r\n\r\nI have verified this on the following version of the API:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n      &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n      &lt;version&gt;20140107&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Pretty-Print JSON in Java","body":"<p>Now this can be achieved with the JSONLib library:</p>\n\n<p><a href=\"http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html\" rel=\"noreferrer\">http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONObject.html</a></p>\n\n<p>If (and only if) you use the overloaded <code>toString(int indentationFactor)</code> method and not the standard <code>toString()</code> method.</p>\n\n<p>I have verified this on the following version of the API:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.json&lt;/groupId&gt;\n  &lt;artifactId&gt;json&lt;/artifactId&gt;\n  &lt;version&gt;20140107&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3253831,"reputation":654,"user_id":2743469,"display_name":"Agnes"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1426588837,"creation_date":1426582963,"answer_id":29094958,"question_id":4105795,"body_markdown":"My situation is my project uses a legacy (non-JSR) JSON parser that does not support pretty printing. However, I needed to produce pretty-printed JSON samples; this is possible without having to add any extra libraries as long as you are using Java 7 and above:\r\n\r\n    ScriptEngineManager manager = new ScriptEngineManager();\r\n    ScriptEngine scriptEngine = manager.getEngineByName(&quot;JavaScript&quot;);\r\n    scriptEngine.put(&quot;jsonString&quot;, jsonStringNoWhitespace);\r\n    scriptEngine.eval(&quot;result = JSON.stringify(JSON.parse(jsonString), null, 2)&quot;);\r\n    String prettyPrintedJson = (String) scriptEngine.get(&quot;result&quot;);\r\n","title":"Pretty-Print JSON in Java","body":"<p>My situation is my project uses a legacy (non-JSR) JSON parser that does not support pretty printing. However, I needed to produce pretty-printed JSON samples; this is possible without having to add any extra libraries as long as you are using Java 7 and above:</p>\n\n<pre><code>ScriptEngineManager manager = new ScriptEngineManager();\nScriptEngine scriptEngine = manager.getEngineByName(\"JavaScript\");\nscriptEngine.put(\"jsonString\", jsonStringNoWhitespace);\nscriptEngine.eval(\"result = JSON.stringify(JSON.parse(jsonString), null, 2)\");\nString prettyPrintedJson = (String) scriptEngine.get(\"result\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1911363,"reputation":7397,"user_id":1725096,"accept_rate":85,"display_name":"Jens Piegsa"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1441804317,"creation_date":1441804317,"answer_id":32480523,"question_id":4105795,"body_markdown":"Following the JSON-P 1.0 specs ([JSR-353][1]) a more current solution for a given `JsonStructure` (`JsonObject` or `JsonArray`) could look like this:\r\n\r\n\timport java.io.StringWriter;\r\n\timport java.util.HashMap;\r\n\timport java.util.Map;\r\n\t\r\n\timport javax.json.Json;\r\n\timport javax.json.JsonStructure;\r\n\timport javax.json.JsonWriter;\r\n\timport javax.json.JsonWriterFactory;\r\n\timport javax.json.stream.JsonGenerator;\r\n\t\r\n\tpublic class PrettyJson {\r\n\t\r\n\t\tprivate static JsonWriterFactory FACTORY_INSTANCE;\r\n\t\r\n\t\tpublic static String toString(final JsonStructure status) {\r\n\t\r\n\t\t\tfinal StringWriter stringWriter = new StringWriter();\r\n\t\r\n\t\t\tfinal JsonWriter jsonWriter = getPrettyJsonWriterFactory()\r\n                    .createWriter(stringWriter);\r\n\r\n\t\t\tjsonWriter.write(status);\r\n\t\t\tjsonWriter.close();\r\n\t\r\n\t\t\treturn stringWriter.toString();\r\n\t\t}\r\n\t\r\n\t\tprivate static JsonWriterFactory getPrettyJsonWriterFactory() {\r\n\t\t\tif (null == FACTORY_INSTANCE) {\r\n\t\t\t\tfinal Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(1);\r\n\t\t\t\tproperties.put(JsonGenerator.PRETTY_PRINTING, true);\r\n\t\t\t\tFACTORY_INSTANCE = Json.createWriterFactory(properties);\r\n\t\t\t}\r\n\t\t\treturn FACTORY_INSTANCE;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\n\r\n  [1]: https://jcp.org/en/jsr/detail?id=353","title":"Pretty-Print JSON in Java","body":"<p>Following the JSON-P 1.0 specs (<a href=\"https://jcp.org/en/jsr/detail?id=353\" rel=\"noreferrer\">JSR-353</a>) a more current solution for a given <code>JsonStructure</code> (<code>JsonObject</code> or <code>JsonArray</code>) could look like this:</p>\n\n<pre><code>import java.io.StringWriter;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.json.Json;\nimport javax.json.JsonStructure;\nimport javax.json.JsonWriter;\nimport javax.json.JsonWriterFactory;\nimport javax.json.stream.JsonGenerator;\n\npublic class PrettyJson {\n\n    private static JsonWriterFactory FACTORY_INSTANCE;\n\n    public static String toString(final JsonStructure status) {\n\n        final StringWriter stringWriter = new StringWriter();\n\n        final JsonWriter jsonWriter = getPrettyJsonWriterFactory()\n                .createWriter(stringWriter);\n\n        jsonWriter.write(status);\n        jsonWriter.close();\n\n        return stringWriter.toString();\n    }\n\n    private static JsonWriterFactory getPrettyJsonWriterFactory() {\n        if (null == FACTORY_INSTANCE) {\n            final Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;(1);\n            properties.put(JsonGenerator.PRETTY_PRINTING, true);\n            FACTORY_INSTANCE = Json.createWriterFactory(properties);\n        }\n        return FACTORY_INSTANCE;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8974122,"reputation":1683,"user_id":6691610,"display_name":"David Pham"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1475767725,"creation_date":1475767160,"answer_id":39899845,"question_id":4105795,"body_markdown":"You can use Gson like below\r\n\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    String jsonString = gson.toJson(object);\r\n\r\nFrom the post [JSON pretty print using Gson][1]\r\n\r\nAlternatively, You can use Jackson like below\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    String perttyStr = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(object);\r\n\r\nFrom the post [Pretty print JSON in Java (Jackson)][2]\r\n\r\nHope this help!\r\n\r\n  [1]: http://javabycode.com/java-core/json-tutorial/json-pretty-print-using-gson.html\r\n  [2]: http://javabycode.com/java-core/json-tutorial/pretty-print-json-in-java-jackson.html","title":"Pretty-Print JSON in Java","body":"<p>You can use Gson like below</p>\n\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nString jsonString = gson.toJson(object);\n</code></pre>\n\n<p>From the post <a href=\"http://javabycode.com/java-core/json-tutorial/json-pretty-print-using-gson.html\" rel=\"noreferrer\">JSON pretty print using Gson</a></p>\n\n<p>Alternatively, You can use Jackson like below</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nString perttyStr = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(object);\n</code></pre>\n\n<p>From the post <a href=\"http://javabycode.com/java-core/json-tutorial/pretty-print-json-in-java-jackson.html\" rel=\"noreferrer\">Pretty print JSON in Java (Jackson)</a></p>\n\n<p>Hope this help!</p>\n"},{"tags":[],"owner":{"account_id":2159033,"reputation":999,"user_id":1913626,"display_name":"oktieh"},"down_vote_count":0,"up_vote_count":74,"is_accepted":false,"score":74,"last_activity_date":1568523487,"creation_date":1495397910,"answer_id":44101386,"question_id":4105795,"body_markdown":"With Jackson (`com.fasterxml.jackson.databind`):\r\n    \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    System.out.println(mapper.writerWithDefaultPrettyPrinter().writeValueAsString(jsonObject))\r\n\r\n\r\nFrom: [How to enable pretty print JSON output (Jackson)][1]\r\n\r\nI know this is already in the answers, but I want to write it separately here because chances are, you already have Jackson as a dependency and so all you will need would be an extra line of code\r\n\r\n  [1]: https://www.mkyong.com/java/how-to-enable-pretty-print-json-output-jackson/","title":"Pretty-Print JSON in Java","body":"<p>With Jackson (<code>com.fasterxml.jackson.databind</code>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper mapper = new ObjectMapper();\nSystem.out.println(mapper.writerWithDefaultPrettyPrinter().writeValueAsString(jsonObject))\n</code></pre>\n\n<p>From: <a href=\"https://www.mkyong.com/java/how-to-enable-pretty-print-json-output-jackson/\" rel=\"noreferrer\">How to enable pretty print JSON output (Jackson)</a></p>\n\n<p>I know this is already in the answers, but I want to write it separately here because chances are, you already have Jackson as a dependency and so all you will need would be an extra line of code</p>\n"},{"tags":[],"owner":{"account_id":3070548,"reputation":72,"user_id":2601327,"display_name":"ObiWanKenobi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1518139911,"creation_date":1518139911,"answer_id":48697458,"question_id":4105795,"body_markdown":"This worked for me, using Jackson:\r\n\r\n    mapper.writerWithDefaultPrettyPrinter().writeValueAsString(JSONString)","title":"Pretty-Print JSON in Java","body":"<p>This worked for me, using Jackson:</p>\n\n<pre><code>mapper.writerWithDefaultPrettyPrinter().writeValueAsString(JSONString)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":143823,"reputation":1066,"user_id":352448,"accept_rate":100,"display_name":"asksw0rder"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1522355379,"creation_date":1522355379,"answer_id":49564514,"question_id":4105795,"body_markdown":"Most of the existing answers either depend on some external library, or requiring a special Java version. Here is a simple code to pretty print a JSON string, only using general Java APIs (available in Java 7 for higher; haven&#39;t tried older version although).\r\n\r\nThe basic idea is to tigger the formatting based on special characters in JSON. For example, if a &#39;{&#39; or &#39;[&#39; is observed, the code will create a new line and increase the indent level.\r\n\r\nDisclaimer: I only tested this for some simple JSON cases (basic key-value pair, list, nested JSON) so it may need some work for more general JSON text, like string value with quotes inside, or special characters (\\n, \\t etc.).\r\n\r\n    /**\r\n     * A simple implementation to pretty-print JSON file.\r\n     *\r\n     * @param unformattedJsonString\r\n     * @return\r\n     */\r\n    public static String prettyPrintJSON(String unformattedJsonString) {\r\n      StringBuilder prettyJSONBuilder = new StringBuilder();\r\n      int indentLevel = 0;\r\n      boolean inQuote = false;\r\n      for(char charFromUnformattedJson : unformattedJsonString.toCharArray()) {\r\n        switch(charFromUnformattedJson) {\r\n          case &#39;&quot;&#39;:\r\n            // switch the quoting status\r\n            inQuote = !inQuote;\r\n            prettyJSONBuilder.append(charFromUnformattedJson);\r\n            break;\r\n          case &#39; &#39;:\r\n            // For space: ignore the space if it is not being quoted.\r\n            if(inQuote) {\r\n              prettyJSONBuilder.append(charFromUnformattedJson);\r\n            }\r\n            break;\r\n          case &#39;{&#39;:\r\n          case &#39;[&#39;:\r\n            // Starting a new block: increase the indent level\r\n            prettyJSONBuilder.append(charFromUnformattedJson);\r\n            indentLevel++;\r\n            appendIndentedNewLine(indentLevel, prettyJSONBuilder);\r\n            break;\r\n          case &#39;}&#39;:\r\n          case &#39;]&#39;:\r\n            // Ending a new block; decrese the indent level\r\n            indentLevel--;\r\n            appendIndentedNewLine(indentLevel, prettyJSONBuilder);\r\n            prettyJSONBuilder.append(charFromUnformattedJson);\r\n            break;\r\n          case &#39;,&#39;:\r\n            // Ending a json item; create a new line after\r\n            prettyJSONBuilder.append(charFromUnformattedJson);\r\n            if(!inQuote) {\r\n              appendIndentedNewLine(indentLevel, prettyJSONBuilder);\r\n            }\r\n            break;\r\n          default:\r\n            prettyJSONBuilder.append(charFromUnformattedJson);\r\n        }\r\n      }\r\n      return prettyJSONBuilder.toString();\r\n    }\r\n  \r\n    /**\r\n     * Print a new line with indention at the beginning of the new line.\r\n     * @param indentLevel\r\n     * @param stringBuilder\r\n     */\r\n    private static void appendIndentedNewLine(int indentLevel, StringBuilder stringBuilder) {\r\n      stringBuilder.append(&quot;\\n&quot;);\r\n      for(int i = 0; i &lt; indentLevel; i++) {\r\n        // Assuming indention using 2 spaces\r\n        stringBuilder.append(&quot;  &quot;);\r\n      }\r\n    }","title":"Pretty-Print JSON in Java","body":"<p>Most of the existing answers either depend on some external library, or requiring a special Java version. Here is a simple code to pretty print a JSON string, only using general Java APIs (available in Java 7 for higher; haven't tried older version although).</p>\n\n<p>The basic idea is to tigger the formatting based on special characters in JSON. For example, if a '{' or '[' is observed, the code will create a new line and increase the indent level.</p>\n\n<p>Disclaimer: I only tested this for some simple JSON cases (basic key-value pair, list, nested JSON) so it may need some work for more general JSON text, like string value with quotes inside, or special characters (\\n, \\t etc.).</p>\n\n<pre><code>/**\n * A simple implementation to pretty-print JSON file.\n *\n * @param unformattedJsonString\n * @return\n */\npublic static String prettyPrintJSON(String unformattedJsonString) {\n  StringBuilder prettyJSONBuilder = new StringBuilder();\n  int indentLevel = 0;\n  boolean inQuote = false;\n  for(char charFromUnformattedJson : unformattedJsonString.toCharArray()) {\n    switch(charFromUnformattedJson) {\n      case '\"':\n        // switch the quoting status\n        inQuote = !inQuote;\n        prettyJSONBuilder.append(charFromUnformattedJson);\n        break;\n      case ' ':\n        // For space: ignore the space if it is not being quoted.\n        if(inQuote) {\n          prettyJSONBuilder.append(charFromUnformattedJson);\n        }\n        break;\n      case '{':\n      case '[':\n        // Starting a new block: increase the indent level\n        prettyJSONBuilder.append(charFromUnformattedJson);\n        indentLevel++;\n        appendIndentedNewLine(indentLevel, prettyJSONBuilder);\n        break;\n      case '}':\n      case ']':\n        // Ending a new block; decrese the indent level\n        indentLevel--;\n        appendIndentedNewLine(indentLevel, prettyJSONBuilder);\n        prettyJSONBuilder.append(charFromUnformattedJson);\n        break;\n      case ',':\n        // Ending a json item; create a new line after\n        prettyJSONBuilder.append(charFromUnformattedJson);\n        if(!inQuote) {\n          appendIndentedNewLine(indentLevel, prettyJSONBuilder);\n        }\n        break;\n      default:\n        prettyJSONBuilder.append(charFromUnformattedJson);\n    }\n  }\n  return prettyJSONBuilder.toString();\n}\n\n/**\n * Print a new line with indention at the beginning of the new line.\n * @param indentLevel\n * @param stringBuilder\n */\nprivate static void appendIndentedNewLine(int indentLevel, StringBuilder stringBuilder) {\n  stringBuilder.append(\"\\n\");\n  for(int i = 0; i &lt; indentLevel; i++) {\n    // Assuming indention using 2 spaces\n    stringBuilder.append(\"  \");\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1644307327,"creation_date":1549092819,"answer_id":54491031,"question_id":4105795,"body_markdown":"[Underscore-java][1] has static method `U.formatJson(json)`.\r\nFive format types are supported: 2, 3, 4, tabs and compact. [Live example][2]\r\n\r\n```lang-java\r\nimport com.github.underscore.U;\r\n\r\nimport static com.github.underscore.Json.JsonStringBuilder.Step.TABS;\r\nimport static com.github.underscore.Json.JsonStringBuilder.Step.TWO_SPACES;\r\n\r\npublic class MyClass {\r\n\r\n\tpublic static void main(String args[]) {\r\n\t\tString json = &quot;{\\&quot;Price\\&quot;: {&quot;\r\n\t\t+ &quot;    \\&quot;LineItems\\&quot;: {&quot;\r\n\t\t+ &quot;        \\&quot;LineItem\\&quot;: {&quot;\r\n\t\t+ &quot;            \\&quot;UnitOfMeasure\\&quot;: \\&quot;EACH\\&quot;, \\&quot;Quantity\\&quot;: 2, \\&quot;ItemID\\&quot;: \\&quot;ItemID\\&quot;&quot;\r\n\t\t+ &quot;        }&quot;\r\n\t\t+ &quot;    },&quot;\r\n\t\t+ &quot;    \\&quot;Currency\\&quot;: \\&quot;USD\\&quot;,&quot;\r\n\t\t+ &quot;    \\&quot;EnterpriseCode\\&quot;: \\&quot;EnterpriseCode\\&quot;&quot;\r\n\t\t+ &quot;}}&quot;;\r\n\t\tSystem.out.println(U.formatJson(json, TWO_SPACES)); \r\n\t\tSystem.out.println(U.formatJson(json, TABS)); \r\n\t}\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```json\r\n{\r\n  &quot;Price&quot;: {\r\n\t&quot;LineItems&quot;: {\r\n\t  &quot;LineItem&quot;: {\r\n\t\t&quot;UnitOfMeasure&quot;: &quot;EACH&quot;,\r\n\t\t&quot;Quantity&quot;: 2,\r\n\t\t&quot;ItemID&quot;: &quot;ItemID&quot;\r\n\t  }\r\n\t},\r\n\t&quot;Currency&quot;: &quot;USD&quot;,\r\n\t&quot;EnterpriseCode&quot;: &quot;EnterpriseCode&quot;\r\n  }\r\n}\r\n{\r\n\t&quot;Price&quot;: {\r\n\t\t&quot;LineItems&quot;: {\r\n\t\t\t&quot;LineItem&quot;: {\r\n\t\t\t\t&quot;UnitOfMeasure&quot;: &quot;EACH&quot;,\r\n\t\t\t\t&quot;Quantity&quot;: 2,\r\n\t\t\t\t&quot;ItemID&quot;: &quot;ItemID&quot;\r\n\t\t\t}\r\n\t\t},\r\n\t\t&quot;Currency&quot;: &quot;USD&quot;,\r\n\t\t&quot;EnterpriseCode&quot;: &quot;EnterpriseCode&quot;\r\n\t}\r\n}\r\n```\r\n\r\n  [1]: https://github.com/javadev/underscore-java\r\n  [2]: https://www.jdoodle.com/embed/v0/XrW","title":"Pretty-Print JSON in Java","body":"<p><a href=\"https://github.com/javadev/underscore-java\" rel=\"nofollow noreferrer\">Underscore-java</a> has static method <code>U.formatJson(json)</code>.\nFive format types are supported: 2, 3, 4, tabs and compact. <a href=\"https://www.jdoodle.com/embed/v0/XrW\" rel=\"nofollow noreferrer\">Live example</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.github.underscore.U;\n\nimport static com.github.underscore.Json.JsonStringBuilder.Step.TABS;\nimport static com.github.underscore.Json.JsonStringBuilder.Step.TWO_SPACES;\n\npublic class MyClass {\n\n    public static void main(String args[]) {\n        String json = &quot;{\\&quot;Price\\&quot;: {&quot;\n        + &quot;    \\&quot;LineItems\\&quot;: {&quot;\n        + &quot;        \\&quot;LineItem\\&quot;: {&quot;\n        + &quot;            \\&quot;UnitOfMeasure\\&quot;: \\&quot;EACH\\&quot;, \\&quot;Quantity\\&quot;: 2, \\&quot;ItemID\\&quot;: \\&quot;ItemID\\&quot;&quot;\n        + &quot;        }&quot;\n        + &quot;    },&quot;\n        + &quot;    \\&quot;Currency\\&quot;: \\&quot;USD\\&quot;,&quot;\n        + &quot;    \\&quot;EnterpriseCode\\&quot;: \\&quot;EnterpriseCode\\&quot;&quot;\n        + &quot;}}&quot;;\n        System.out.println(U.formatJson(json, TWO_SPACES)); \n        System.out.println(U.formatJson(json, TABS)); \n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;Price&quot;: {\n    &quot;LineItems&quot;: {\n      &quot;LineItem&quot;: {\n        &quot;UnitOfMeasure&quot;: &quot;EACH&quot;,\n        &quot;Quantity&quot;: 2,\n        &quot;ItemID&quot;: &quot;ItemID&quot;\n      }\n    },\n    &quot;Currency&quot;: &quot;USD&quot;,\n    &quot;EnterpriseCode&quot;: &quot;EnterpriseCode&quot;\n  }\n}\n{\n    &quot;Price&quot;: {\n        &quot;LineItems&quot;: {\n            &quot;LineItem&quot;: {\n                &quot;UnitOfMeasure&quot;: &quot;EACH&quot;,\n                &quot;Quantity&quot;: 2,\n                &quot;ItemID&quot;: &quot;ItemID&quot;\n            }\n        },\n        &quot;Currency&quot;: &quot;USD&quot;,\n        &quot;EnterpriseCode&quot;: &quot;EnterpriseCode&quot;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7143736,"reputation":139,"user_id":5460309,"display_name":"Anton Straka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581880997,"creation_date":1581880997,"answer_id":60252313,"question_id":4105795,"body_markdown":"You can use small [json][1] library \r\n\r\n    String jsonstring = ....;\r\n    JsonValue json = JsonParser.parse(jsonstring);\r\n    String jsonIndendedByTwoSpaces = json.toPrettyString(&quot;  &quot;);\r\n\r\n  [1]: https://github.com/antonsjava/json\r\n","title":"Pretty-Print JSON in Java","body":"<p>You can use small <a href=\"https://github.com/antonsjava/json\" rel=\"nofollow noreferrer\">json</a> library </p>\n\n<pre><code>String jsonstring = ....;\nJsonValue json = JsonParser.parse(jsonstring);\nString jsonIndendedByTwoSpaces = json.toPrettyString(\"  \");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1624976211,"creation_date":1582383409,"answer_id":60353419,"question_id":4105795,"body_markdown":"Using org json. Reference [link][1]\r\n\r\n    JSONObject jsonObject = new JSONObject(obj);\r\n    String prettyJson = jsonObject.toString(4);\r\n\r\n\r\nUsing Gson. Reference [link][2]\r\n\r\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    String json = gson.toJson(obj);\r\n\r\nUsing Jackson. Reference [link][3]\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n    String json = mapper.writeValueAsString(obj);\r\n\r\nUsing Genson. Reference [link][4].\r\n\r\n    Genson prettyGenson = new GensonBuilder().useIndentation(true).create();\r\n    String prettyJson = prettyGenson.serialize(obj);\r\n\r\nUsing javax.json. Reference [link][5].\r\n\r\n    Map&lt;String, Boolean&gt; config = new HashMap&lt;&gt;();\r\n    \r\n    config.put(JsonGenerator.PRETTY_PRINTING, true);\r\n    \r\n    JsonWriterFactory writerFactory = Json.createWriterFactory(config);\r\n    Writer writer = new StringWriter();\r\n    \r\n    writerFactory.createWriter(writer).write(jsonObject);\r\n    \r\n    String json = writer.toString();\r\n\r\nUsing Moshi library. Reference [link][6].\r\n\r\n    String json = jsonAdapter.indent(&quot;  &quot;).toJson(emp1);\r\n   (OR)\r\n\r\n    Buffer buffer = new Buffer();\r\n    JsonWriter jsonWriter = JsonWriter.of(buffer);\r\n    jsonWriter.setIndent(&quot;   &quot;);\r\n    \r\n    jsonAdapter.toJson(jsonWriter, emp1);\r\n    \r\n    json = buffer.readUtf8();\r\n\r\n\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2020/02/org-json-pretty-print-json.html\r\n  [2]: https://self-learning-java-tutorial.blogspot.com/2014/11/pretty-print-json-format.html\r\n  [3]: https://self-learning-java-tutorial.blogspot.com/2015/10/jackson-pretty-print-json.html\r\n  [4]: https://self-learning-java-tutorial.blogspot.com/2016/04/genson-pretty-json.html\r\n  [5]: https://self-learning-java-tutorial.blogspot.com/2021/03/javaxjson-pretty-print-json.html\r\n  [6]: https://self-learning-java-tutorial.blogspot.com/2021/06/moshi-pretty-print-json.html","title":"Pretty-Print JSON in Java","body":"<p>Using org json. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2020/02/org-json-pretty-print-json.html\" rel=\"noreferrer\">link</a></p>\n<pre><code>JSONObject jsonObject = new JSONObject(obj);\nString prettyJson = jsonObject.toString(4);\n</code></pre>\n<p>Using Gson. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2014/11/pretty-print-json-format.html\" rel=\"noreferrer\">link</a></p>\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\nString json = gson.toJson(obj);\n</code></pre>\n<p>Using Jackson. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2015/10/jackson-pretty-print-json.html\" rel=\"noreferrer\">link</a></p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.enable(SerializationFeature.INDENT_OUTPUT);\nString json = mapper.writeValueAsString(obj);\n</code></pre>\n<p>Using Genson. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2016/04/genson-pretty-json.html\" rel=\"noreferrer\">link</a>.</p>\n<pre><code>Genson prettyGenson = new GensonBuilder().useIndentation(true).create();\nString prettyJson = prettyGenson.serialize(obj);\n</code></pre>\n<p>Using javax.json. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2021/03/javaxjson-pretty-print-json.html\" rel=\"noreferrer\">link</a>.</p>\n<pre><code>Map&lt;String, Boolean&gt; config = new HashMap&lt;&gt;();\n\nconfig.put(JsonGenerator.PRETTY_PRINTING, true);\n\nJsonWriterFactory writerFactory = Json.createWriterFactory(config);\nWriter writer = new StringWriter();\n\nwriterFactory.createWriter(writer).write(jsonObject);\n\nString json = writer.toString();\n</code></pre>\n<p>Using Moshi library. Reference <a href=\"https://self-learning-java-tutorial.blogspot.com/2021/06/moshi-pretty-print-json.html\" rel=\"noreferrer\">link</a>.</p>\n<pre><code>String json = jsonAdapter.indent(&quot;  &quot;).toJson(emp1);\n</code></pre>\n<p>(OR)</p>\n<pre><code>Buffer buffer = new Buffer();\nJsonWriter jsonWriter = JsonWriter.of(buffer);\njsonWriter.setIndent(&quot;   &quot;);\n\njsonAdapter.toJson(jsonWriter, emp1);\n\njson = buffer.readUtf8();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"&#230;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1598210181,"creation_date":1597330715,"answer_id":63397831,"question_id":4105795,"body_markdown":"### Update:  `new JsonParser().parse(...)` is `@deprecated` \r\n\r\n----------\r\n\r\nBased on the javadoc for **Gson 2.8.6**:\r\n\r\n&gt; No need to instantiate this class, use the static methods instead.\r\n\r\n**JsonParser** static methods:\r\n\r\n    JsonParser.parseString(jsonString);\r\n    JsonParser.parseReader(reader);\r\n\r\n----------\r\n\r\nPackages:\r\n\r\n    import com.google.gson.Gson;\r\n    import com.google.gson.GsonBuilder;\r\n    import com.google.gson.JsonParser;\r\n\r\nExample:\r\n\r\n    private Gson GSON = new GsonBuilder().setPrettyPrinting().create();\r\n    public static String getPerfectJSON(String unformattedJSON) {\r\n        String perfectJSON = GSON.toJson(JsonParser.parseString(unformattedJSON));\r\n        return perfectJSON;\r\n    }\r\n\r\n----------\r\n\r\n**Google Gson** dependency using Maven:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.8.6&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n----------\r\n\r\n### Reference:\r\n\r\n- https://stackoverflow.com/questions/60771386/jsonparser-is-deprecated","title":"Pretty-Print JSON in Java","body":"<h3>Update:  <code>new JsonParser().parse(...)</code> is <code>@deprecated</code></h3>\n<hr />\n<p>Based on the javadoc for <strong>Gson 2.8.6</strong>:</p>\n<blockquote>\n<p>No need to instantiate this class, use the static methods instead.</p>\n</blockquote>\n<p><strong>JsonParser</strong> static methods:</p>\n<pre><code>JsonParser.parseString(jsonString);\nJsonParser.parseReader(reader);\n</code></pre>\n<hr />\n<p>Packages:</p>\n<pre><code>import com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.JsonParser;\n</code></pre>\n<p>Example:</p>\n<pre><code>private Gson GSON = new GsonBuilder().setPrettyPrinting().create();\npublic static String getPerfectJSON(String unformattedJSON) {\n    String perfectJSON = GSON.toJson(JsonParser.parseString(unformattedJSON));\n    return perfectJSON;\n}\n</code></pre>\n<hr />\n<p><strong>Google Gson</strong> dependency using Maven:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;version&gt;2.8.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<h3>Reference:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/60771386/jsonparser-is-deprecated\">JsonParser is deprecated</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15467484,"reputation":165,"user_id":11158426,"display_name":"Shimon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634106731,"creation_date":1634106731,"answer_id":69550723,"question_id":4105795,"body_markdown":"I also use the org.json.simple package. I have simply coded the formatter, but since I don&#39;t have nulls, numbers or booleans in my JSON objects in the program that I wrote, I only coded for strings, objects and arrays. If anyone is interested, let this just be in the public domain. You are welcome to add the missing data types (where it says in the comment &quot;it&#39;s a string&quot;). Also, you can add the indentation as a parameter whereas mine is just two spaces. Please reshare after you&#39;ve tested your improvements.\r\n\r\n**Usage**: ```printJsonObject(jsonObject, &quot;&quot;);```\r\n\r\n**Functions**:\r\n```\r\n    public static void printJsonObject(JSONObject object, String prefix) {\r\n        boolean notFirst = false;\r\n        System.out.println(prefix + &quot;{&quot;);\r\n        for (Object key : object.keySet()) {\r\n            if (notFirst) {\r\n                System.out.println(&quot;, &quot;);\r\n            }\r\n            notFirst = true;\r\n            Object value = object.get(key);\r\n            System.out.print(prefix + &quot;  &quot; + &quot;\\&quot;&quot; + key + &quot;\\&quot;&quot; + &quot;: &quot;);\r\n            if (value instanceof JSONObject) {\r\n                printJsonObject((JSONObject) value, prefix + &quot;  &quot;);\r\n            } else if (value instanceof JSONArray) {\r\n                printJsonArray((JSONArray) value, prefix + &quot;  &quot;);\r\n            } else {  // it&#39;s a string\r\n                System.out.print(&quot;\\&quot;&quot; + value + &quot;\\&quot;&quot;);\r\n            }\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n        System.out.print(prefix + &quot;}&quot;);\r\n    }\r\n\r\n    public static void printJsonArray(JSONArray array, String prefix) {\r\n        boolean notFirst = false;\r\n        System.out.println(&quot;[&quot;);\r\n        for (Object item : array) {\r\n            if (notFirst) {\r\n                System.out.println(&quot;, &quot;);\r\n            }\r\n            notFirst = true;\r\n            if (item instanceof JSONObject) {\r\n                printJsonObject((JSONObject) item, prefix + &quot;  &quot;);\r\n            } else if (item instanceof JSONArray) {\r\n                printJsonArray((JSONArray) item, prefix + &quot;  &quot;);\r\n            } else {\r\n                System.out.print(prefix + &quot;  &quot; + &quot;\\&quot;&quot; + item + &quot;\\&quot;&quot;);\r\n            }\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n        System.out.print(prefix + &quot;]&quot;);\r\n    }\r\n\r\n```\r\n","title":"Pretty-Print JSON in Java","body":"<p>I also use the org.json.simple package. I have simply coded the formatter, but since I don't have nulls, numbers or booleans in my JSON objects in the program that I wrote, I only coded for strings, objects and arrays. If anyone is interested, let this just be in the public domain. You are welcome to add the missing data types (where it says in the comment &quot;it's a string&quot;). Also, you can add the indentation as a parameter whereas mine is just two spaces. Please reshare after you've tested your improvements.</p>\n<p><strong>Usage</strong>: <code>printJsonObject(jsonObject, &quot;&quot;);</code></p>\n<p><strong>Functions</strong>:</p>\n<pre><code>    public static void printJsonObject(JSONObject object, String prefix) {\n        boolean notFirst = false;\n        System.out.println(prefix + &quot;{&quot;);\n        for (Object key : object.keySet()) {\n            if (notFirst) {\n                System.out.println(&quot;, &quot;);\n            }\n            notFirst = true;\n            Object value = object.get(key);\n            System.out.print(prefix + &quot;  &quot; + &quot;\\&quot;&quot; + key + &quot;\\&quot;&quot; + &quot;: &quot;);\n            if (value instanceof JSONObject) {\n                printJsonObject((JSONObject) value, prefix + &quot;  &quot;);\n            } else if (value instanceof JSONArray) {\n                printJsonArray((JSONArray) value, prefix + &quot;  &quot;);\n            } else {  // it's a string\n                System.out.print(&quot;\\&quot;&quot; + value + &quot;\\&quot;&quot;);\n            }\n        }\n        System.out.println(&quot;&quot;);\n        System.out.print(prefix + &quot;}&quot;);\n    }\n\n    public static void printJsonArray(JSONArray array, String prefix) {\n        boolean notFirst = false;\n        System.out.println(&quot;[&quot;);\n        for (Object item : array) {\n            if (notFirst) {\n                System.out.println(&quot;, &quot;);\n            }\n            notFirst = true;\n            if (item instanceof JSONObject) {\n                printJsonObject((JSONObject) item, prefix + &quot;  &quot;);\n            } else if (item instanceof JSONArray) {\n                printJsonArray((JSONArray) item, prefix + &quot;  &quot;);\n            } else {\n                System.out.print(prefix + &quot;  &quot; + &quot;\\&quot;&quot; + item + &quot;\\&quot;&quot;);\n            }\n        }\n        System.out.println(&quot;&quot;);\n        System.out.print(prefix + &quot;]&quot;);\n    }\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6731003,"reputation":89,"user_id":5187346,"display_name":"Babak Farhang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636837062,"creation_date":1636837062,"answer_id":69958176,"question_id":4105795,"body_markdown":"So I too like the `json-simple` lib, and looked into pretty printing its output. Unfortunately, while it&#39;s an [open issue there][1], I couldn&#39;t find any code for it. So I thought I&#39;d give it a try, here&#39;s what I came up with (using their own source)..\r\n\r\n    public class JsonPrinter {\r\n      \r\n      \r\n      \r\n      public static String toJson(Map&lt;?,?&gt; map) {\r\n        StringBuilder out = new StringBuilder(32);\r\n        new JsonPrinter(out).print(map);\r\n        return out.toString();\r\n      }\r\n      \r\n      \r\n      public static String toJson(List&lt;?&gt; list) {\r\n        StringBuilder out = new StringBuilder(32);\r\n        new JsonPrinter(out).print(list);\r\n        return out.toString();\r\n      }\r\n      \r\n      \r\n      \r\n      \r\n      \r\n      \r\n      \r\n      private final Appendable out;\r\n      private final String indentUnit;\r\n      private final String newLine;\r\n      \r\n      \r\n      private int indents;\r\n      \r\n      public JsonPrinter(Appendable out) {\r\n        this(out, &quot;  &quot;, System.lineSeparator());\r\n      }\r\n    \r\n      /**\r\n       * \r\n       */\r\n      public JsonPrinter(Appendable out, String indentUnit, String newLine) {\r\n        this.out = Objects.requireNonNull(out, &quot;null out&quot;);\r\n        this.indentUnit = Objects.requireNonNull(indentUnit, &quot;null indentUnit&quot;);\r\n        this.newLine = Objects.requireNonNull(newLine, &quot;null newLine&quot;);\r\n        \r\n        if (!indentUnit.isBlank())\r\n          throw new IllegalArgumentException(\r\n              &quot;indentUnit must be a blank sequence (quoted): &#39;&quot; + indentUnit + &quot;&#39;&quot;);\r\n        if (!&quot;\\r\\n&quot;.equals(newLine) &amp;&amp; ! &quot;\\n&quot;.equals(newLine))\r\n          throw new IllegalArgumentException(\r\n              &quot;unrecognized newLine (quoted): &#39;&quot; + newLine + &quot;&#39;&quot;);\r\n      }\r\n      \r\n      \r\n      public void print(List&lt;?&gt; list) throws UncheckedIOException {\r\n        try {\r\n          assert indents == 0;\r\n          printImpl(list);\r\n          assert indents == 0;\r\n        } catch (IOException iox) {\r\n          throw new UncheckedIOException(&quot;on print(List): &quot; + list, iox);\r\n        }\r\n      }\r\n      \r\n      \r\n      public void print(Map&lt;?,?&gt; map) throws UncheckedIOException {\r\n        try {\r\n          assert indents == 0;\r\n          printImpl(map);\r\n          assert indents == 0;\r\n        } catch (IOException iox) {\r\n          throw new UncheckedIOException(&quot;on print(Map): &quot; + map, iox);\r\n        }\r\n      }\r\n      \r\n      \r\n      protected void printImpl(List&lt;?&gt; list) throws IOException {\r\n        if (list == null) {\r\n          out.append(&quot;null&quot;);\r\n          return;\r\n        }\r\n        \r\n        \r\n        boolean first = true;\r\n        var iter = list.iterator();\r\n        \r\n        open(&#39;[&#39;);\r\n        while (iter.hasNext()) {\r\n          if (first)\r\n            first = false;\r\n          else\r\n            out.append(&#39;,&#39;);\r\n          \r\n          out.append(newLine);\r\n          appendIndents();\r\n          \r\n          appendValue(iter.next());\r\n        }\r\n        close(&#39;]&#39;);\r\n      }\r\n      \r\n      \r\n      protected void printImpl(Map&lt;?, ?&gt; map) throws IOException {\r\n        if (map == null) {\r\n          out.append(&quot;null&quot;);\r\n          return;\r\n        }\r\n        \r\n        \r\n        boolean first = true;\r\n        var iter = map.entrySet().iterator();\r\n        \r\n        open(&#39;{&#39;);\r\n        while (iter.hasNext()) {\r\n          if (first)\r\n            first = false;\r\n          else\r\n            out.append(&#39;,&#39;);\r\n          \r\n          out.append(newLine);\r\n          appendIndents();\r\n          \r\n          var entry = iter.next();\r\n          print(entry.getKey().toString(), entry.getValue());\r\n        }\r\n        close(&#39;}&#39;);\r\n      }\r\n      \r\n      \r\n      private void open(char c) throws IOException {\r\n        out.append(c);\r\n        ++indents;\r\n      }\r\n      \r\n      private void close(char c) throws IOException {\r\n        --indents;\r\n        out.append(newLine);\r\n        appendIndents();\r\n        out.append(c);\r\n      }\r\n      \r\n      private void appendIndents() throws IOException {\r\n        for (int count = indents; count-- &gt; 0; )\r\n          out.append(indentUnit);\r\n      }\r\n      \r\n      \r\n      \r\n      private void print(String key, Object value) throws IOException {\r\n        out.append(&#39;&quot;&#39;);\r\n        appendString(key);\r\n        out.append(&#39;&quot;&#39;).append(&#39;:&#39;).append(&#39; &#39;);\r\n        appendValue(value);\r\n      }\r\n      \r\n      \r\n      \r\n      private void appendString(String s) throws IOException {\r\n        for (int i = 0; i &lt; s.length(); i++) {\r\n          char ch = s.charAt(i);\r\n          switch(ch){\r\n          case &#39;&quot;&#39;:\r\n            out.append(&quot;\\\\\\&quot;&quot;);\r\n            break;\r\n          case &#39;\\\\&#39;:\r\n            out.append(&quot;\\\\\\\\&quot;);\r\n            break;\r\n          case &#39;\\b&#39;:\r\n            out.append(&quot;\\\\b&quot;);\r\n            break;\r\n          case &#39;\\f&#39;:\r\n            out.append(&quot;\\\\f&quot;);\r\n            break;\r\n          case &#39;\\n&#39;:\r\n            out.append(&quot;\\\\n&quot;);\r\n            break;\r\n          case &#39;\\r&#39;:\r\n            out.append(&quot;\\\\r&quot;);\r\n            break;\r\n          case &#39;\\t&#39;:\r\n            out.append(&quot;\\\\t&quot;);\r\n            break;\r\n          case &#39;/&#39;:\r\n            out.append(&quot;\\\\/&quot;);\r\n            break;\r\n          default:\r\n                    //Reference: http://www.unicode.org/versions/Unicode5.1.0/\r\n            if ((ch&gt;=&#39;\\u0000&#39; &amp;&amp; ch&lt;=&#39;\\u001F&#39;) || (ch&gt;=&#39;\\u007F&#39; &amp;&amp; ch&lt;=&#39;\\u009F&#39;) || (ch&gt;=&#39;\\u2000&#39; &amp;&amp; ch&lt;=&#39;\\u20FF&#39;)) {\r\n              String ss = Integer.toHexString(ch);\r\n              out.append(&quot;\\\\u&quot;);\r\n              for (int k=0; k &lt; 4-ss.length(); k++) {\r\n                out.append(&#39;0&#39;);\r\n              }\r\n              out.append(ss.toUpperCase());\r\n            }\r\n            else{\r\n              out.append(ch);\r\n            }\r\n          }\r\n        }//for\r\n      }\r\n      \r\n      \r\n      private void appendValue(Object value) throws IOException {\r\n        if (value == null) {\r\n          out.append(&quot;null&quot;);\r\n          \r\n        } else if (value instanceof String) {\r\n          out.append(&#39;&quot;&#39;);\r\n          appendString(value.toString());\r\n          out.append(&#39;&quot;&#39;);\r\n          \r\n        } else if (value instanceof Double) {\r\n          var num = (Double) value;\r\n          if (num.isInfinite() || num.isNaN())\r\n            out.append(&quot;null&quot;);\r\n          else\r\n            out.append(value.toString());\r\n          \r\n        } else if (value instanceof Float) {\r\n          var num = (Float) value;\r\n          if (num.isInfinite() || num.isNaN())\r\n            out.append(&quot;null&quot;);\r\n          else\r\n            out.append(value.toString());\r\n          \r\n        } else if (value instanceof Map) {\r\n          printImpl((Map&lt;?,?&gt;) value);\r\n          \r\n        } else if (value instanceof List) {\r\n          printImpl((List&lt;?&gt;) value);\r\n          \r\n    //    } else if (value instanceof Number || value instanceof Boolean) {\r\n    //      out.append(value.toString());\r\n          \r\n        } else {\r\n          out.append(value.toString());\r\n          \r\n        }\r\n      }\r\n    \r\n    }\r\n\r\nIt works for `JSONObject` and `JSONArray` even tho it has no dependeny on them.. cuz these are regular `Map` and `List` objects resp. (*and the fact code was lifted from same lib*).\r\n\r\nhttps://github.com/crums-io/io-util/blob/master/src/main/java/io/crums/util/json/JsonPrinter.java\r\n\r\n  [1]: https://github.com/fangyidong/json-simple/issues/136","title":"Pretty-Print JSON in Java","body":"<p>So I too like the <code>json-simple</code> lib, and looked into pretty printing its output. Unfortunately, while it's an <a href=\"https://github.com/fangyidong/json-simple/issues/136\" rel=\"nofollow noreferrer\">open issue there</a>, I couldn't find any code for it. So I thought I'd give it a try, here's what I came up with (using their own source)..</p>\n<pre><code>public class JsonPrinter {\n  \n  \n  \n  public static String toJson(Map&lt;?,?&gt; map) {\n    StringBuilder out = new StringBuilder(32);\n    new JsonPrinter(out).print(map);\n    return out.toString();\n  }\n  \n  \n  public static String toJson(List&lt;?&gt; list) {\n    StringBuilder out = new StringBuilder(32);\n    new JsonPrinter(out).print(list);\n    return out.toString();\n  }\n  \n  \n  \n  \n  \n  \n  \n  private final Appendable out;\n  private final String indentUnit;\n  private final String newLine;\n  \n  \n  private int indents;\n  \n  public JsonPrinter(Appendable out) {\n    this(out, &quot;  &quot;, System.lineSeparator());\n  }\n\n  /**\n   * \n   */\n  public JsonPrinter(Appendable out, String indentUnit, String newLine) {\n    this.out = Objects.requireNonNull(out, &quot;null out&quot;);\n    this.indentUnit = Objects.requireNonNull(indentUnit, &quot;null indentUnit&quot;);\n    this.newLine = Objects.requireNonNull(newLine, &quot;null newLine&quot;);\n    \n    if (!indentUnit.isBlank())\n      throw new IllegalArgumentException(\n          &quot;indentUnit must be a blank sequence (quoted): '&quot; + indentUnit + &quot;'&quot;);\n    if (!&quot;\\r\\n&quot;.equals(newLine) &amp;&amp; ! &quot;\\n&quot;.equals(newLine))\n      throw new IllegalArgumentException(\n          &quot;unrecognized newLine (quoted): '&quot; + newLine + &quot;'&quot;);\n  }\n  \n  \n  public void print(List&lt;?&gt; list) throws UncheckedIOException {\n    try {\n      assert indents == 0;\n      printImpl(list);\n      assert indents == 0;\n    } catch (IOException iox) {\n      throw new UncheckedIOException(&quot;on print(List): &quot; + list, iox);\n    }\n  }\n  \n  \n  public void print(Map&lt;?,?&gt; map) throws UncheckedIOException {\n    try {\n      assert indents == 0;\n      printImpl(map);\n      assert indents == 0;\n    } catch (IOException iox) {\n      throw new UncheckedIOException(&quot;on print(Map): &quot; + map, iox);\n    }\n  }\n  \n  \n  protected void printImpl(List&lt;?&gt; list) throws IOException {\n    if (list == null) {\n      out.append(&quot;null&quot;);\n      return;\n    }\n    \n    \n    boolean first = true;\n    var iter = list.iterator();\n    \n    open('[');\n    while (iter.hasNext()) {\n      if (first)\n        first = false;\n      else\n        out.append(',');\n      \n      out.append(newLine);\n      appendIndents();\n      \n      appendValue(iter.next());\n    }\n    close(']');\n  }\n  \n  \n  protected void printImpl(Map&lt;?, ?&gt; map) throws IOException {\n    if (map == null) {\n      out.append(&quot;null&quot;);\n      return;\n    }\n    \n    \n    boolean first = true;\n    var iter = map.entrySet().iterator();\n    \n    open('{');\n    while (iter.hasNext()) {\n      if (first)\n        first = false;\n      else\n        out.append(',');\n      \n      out.append(newLine);\n      appendIndents();\n      \n      var entry = iter.next();\n      print(entry.getKey().toString(), entry.getValue());\n    }\n    close('}');\n  }\n  \n  \n  private void open(char c) throws IOException {\n    out.append(c);\n    ++indents;\n  }\n  \n  private void close(char c) throws IOException {\n    --indents;\n    out.append(newLine);\n    appendIndents();\n    out.append(c);\n  }\n  \n  private void appendIndents() throws IOException {\n    for (int count = indents; count-- &gt; 0; )\n      out.append(indentUnit);\n  }\n  \n  \n  \n  private void print(String key, Object value) throws IOException {\n    out.append('&quot;');\n    appendString(key);\n    out.append('&quot;').append(':').append(' ');\n    appendValue(value);\n  }\n  \n  \n  \n  private void appendString(String s) throws IOException {\n    for (int i = 0; i &lt; s.length(); i++) {\n      char ch = s.charAt(i);\n      switch(ch){\n      case '&quot;':\n        out.append(&quot;\\\\\\&quot;&quot;);\n        break;\n      case '\\\\':\n        out.append(&quot;\\\\\\\\&quot;);\n        break;\n      case '\\b':\n        out.append(&quot;\\\\b&quot;);\n        break;\n      case '\\f':\n        out.append(&quot;\\\\f&quot;);\n        break;\n      case '\\n':\n        out.append(&quot;\\\\n&quot;);\n        break;\n      case '\\r':\n        out.append(&quot;\\\\r&quot;);\n        break;\n      case '\\t':\n        out.append(&quot;\\\\t&quot;);\n        break;\n      case '/':\n        out.append(&quot;\\\\/&quot;);\n        break;\n      default:\n                //Reference: http://www.unicode.org/versions/Unicode5.1.0/\n        if ((ch&gt;='\\u0000' &amp;&amp; ch&lt;='\\u001F') || (ch&gt;='\\u007F' &amp;&amp; ch&lt;='\\u009F') || (ch&gt;='\\u2000' &amp;&amp; ch&lt;='\\u20FF')) {\n          String ss = Integer.toHexString(ch);\n          out.append(&quot;\\\\u&quot;);\n          for (int k=0; k &lt; 4-ss.length(); k++) {\n            out.append('0');\n          }\n          out.append(ss.toUpperCase());\n        }\n        else{\n          out.append(ch);\n        }\n      }\n    }//for\n  }\n  \n  \n  private void appendValue(Object value) throws IOException {\n    if (value == null) {\n      out.append(&quot;null&quot;);\n      \n    } else if (value instanceof String) {\n      out.append('&quot;');\n      appendString(value.toString());\n      out.append('&quot;');\n      \n    } else if (value instanceof Double) {\n      var num = (Double) value;\n      if (num.isInfinite() || num.isNaN())\n        out.append(&quot;null&quot;);\n      else\n        out.append(value.toString());\n      \n    } else if (value instanceof Float) {\n      var num = (Float) value;\n      if (num.isInfinite() || num.isNaN())\n        out.append(&quot;null&quot;);\n      else\n        out.append(value.toString());\n      \n    } else if (value instanceof Map) {\n      printImpl((Map&lt;?,?&gt;) value);\n      \n    } else if (value instanceof List) {\n      printImpl((List&lt;?&gt;) value);\n      \n//    } else if (value instanceof Number || value instanceof Boolean) {\n//      out.append(value.toString());\n      \n    } else {\n      out.append(value.toString());\n      \n    }\n  }\n\n}\n</code></pre>\n<p>It works for <code>JSONObject</code> and <code>JSONArray</code> even tho it has no dependeny on them.. cuz these are regular <code>Map</code> and <code>List</code> objects resp. (<em>and the fact code was lifted from same lib</em>).</p>\n<p><a href=\"https://github.com/crums-io/io-util/blob/master/src/main/java/io/crums/util/json/JsonPrinter.java\" rel=\"nofollow noreferrer\">https://github.com/crums-io/io-util/blob/master/src/main/java/io/crums/util/json/JsonPrinter.java</a></p>\n"},{"tags":[],"owner":{"account_id":17143139,"reputation":637,"user_id":12406675,"display_name":"ivandax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658690593,"creation_date":1658690593,"answer_id":73101373,"question_id":4105795,"body_markdown":"This would be a public method to print a pretty version of your object (You need the Gson dependency installed:\r\n\r\n    import com.google.gson.GsonBuilder;\r\n    ...\r\n  \r\n    public void printMe(){\r\n        Gson gson = new GsonBuilder().setPrettyPrinting().create();\r\n        String prettyJSON = gson.toJson(this);\r\n        System.out.println(printable);\r\n    }","title":"Pretty-Print JSON in Java","body":"<p>This would be a public method to print a pretty version of your object (You need the Gson dependency installed:</p>\n<pre><code>import com.google.gson.GsonBuilder;\n...\n\npublic void printMe(){\n    Gson gson = new GsonBuilder().setPrettyPrinting().create();\n    String prettyJSON = gson.toJson(this);\n    System.out.println(printable);\n}\n</code></pre>\n"}],"owner":{"account_id":129836,"reputation":6537,"user_id":328681,"accept_rate":96,"display_name":"mabuzer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395229,"favorite_count":0,"down_vote_count":0,"up_vote_count":290,"accepted_answer_id":7310424,"answer_count":20,"score":290,"last_activity_date":1658690593,"creation_date":1288959848,"question_id":4105795,"body_markdown":"I&#39;m using [tag:json-simple] and I need to pretty-print JSON data (make it more human readable).\r\n\r\nI haven&#39;t been able to find this functionality within that library.\r\nHow is this commonly achieved?","title":"Pretty-Print JSON in Java","body":"<p>I'm using <a href=\"/questions/tagged/json-simple\" class=\"post-tag\" title=\"show questions tagged &#39;json-simple&#39;\" rel=\"tag\">json-simple</a> and I need to pretty-print JSON data (make it more human readable).</p>\n\n<p>I haven't been able to find this functionality within that library.\nHow is this commonly achieved?</p>\n"},{"tags":["java","sonarqube","replaceall"],"answers":[{"tags":[],"owner":{"account_id":1629132,"reputation":350,"user_id":1504041,"display_name":"Philipp Schneider"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658690155,"creation_date":1658690155,"answer_id":73101320,"question_id":73092773,"body_markdown":"https://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall\r\n\r\nIf you use it that way, you should use Pattern.compile instead. Sonarqube isn&#39;t able to check that you use a regular pattern.","title":"SonarQube regex security hotspot for replaceAll","body":"<p><a href=\"https://stackoverflow.com/questions/10827872/difference-between-string-replace-and-replaceall\">Difference between String replace() and replaceAll()</a></p>\n<p>If you use it that way, you should use Pattern.compile instead. Sonarqube isn't able to check that you use a regular pattern.</p>\n"}],"owner":{"account_id":12106937,"reputation":11,"user_id":8845410,"display_name":"career2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":863,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658690155,"creation_date":1658596570,"question_id":73092773,"body_markdown":"The following code flags a security hotspot in SonarQube due to backtracking when evaluating the regular expression which could lead to DoS. The regular expression is fine because it is not flagged elsewhere in the code, so this leads me to think SonarQube is flagging this because it is using ReplaceAll. I have read this post, https://stackoverflow.com/questions/57984300/is-use-of-replaceall-method-forbidden-in-sonarqube, but don&#39;t think this applies here. \r\nMy boss wants me to fix this wihtout using the //NOSONAR comment but not sure what needs fixing.\r\n\r\n```\r\n      final String MONGO_REG = &quot;(mongodb://.+:)(.*)(@.+)&quot;;\r\n      final String PASSWD_REPLACEMENT = &quot;XXXXXXXXXX&quot;;\r\n      String mongoUri = &quot;mongodb://myDBReader:D1fficultP%40ssw0rd@mongodb0.example.com:27017/?authSource=admin&quot;;\r\n      String newMongoUri = mongoUri.replaceAll(MONGO_REG, &quot;$1&quot; + PASSWD_REPLACEMENT + &quot;$3&quot;);\r\n      logger.info(&quot;&gt;&gt; {}&quot;, newMongoUri);\r\n```\r\nUsing Java 11\r\nCan anyone see how I can fix this?","title":"SonarQube regex security hotspot for replaceAll","body":"<p>The following code flags a security hotspot in SonarQube due to backtracking when evaluating the regular expression which could lead to DoS. The regular expression is fine because it is not flagged elsewhere in the code, so this leads me to think SonarQube is flagging this because it is using ReplaceAll. I have read this post, <a href=\"https://stackoverflow.com/questions/57984300/is-use-of-replaceall-method-forbidden-in-sonarqube\">Is use of ReplaceAll() method forbidden in SonarQube</a>, but don't think this applies here.\nMy boss wants me to fix this wihtout using the //NOSONAR comment but not sure what needs fixing.</p>\n<pre><code>      final String MONGO_REG = &quot;(mongodb://.+:)(.*)(@.+)&quot;;\n      final String PASSWD_REPLACEMENT = &quot;XXXXXXXXXX&quot;;\n      String mongoUri = &quot;mongodb://myDBReader:D1fficultP%40ssw0rd@mongodb0.example.com:27017/?authSource=admin&quot;;\n      String newMongoUri = mongoUri.replaceAll(MONGO_REG, &quot;$1&quot; + PASSWD_REPLACEMENT + &quot;$3&quot;);\n      logger.info(&quot;&gt;&gt; {}&quot;, newMongoUri);\n</code></pre>\n<p>Using Java 11\nCan anyone see how I can fix this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":1,"creation_date":1648013657,"post_id":71582097,"comment_id":126513466,"body_markdown":"Is all of this code in one file?","body":"Is all of this code in one file?"},{"owner":{"account_id":24654922,"reputation":11,"user_id":18551690,"display_name":"llamavibes"},"score":0,"creation_date":1648055907,"post_id":71582097,"comment_id":126529734,"body_markdown":"Not a file. It&#39;s in a like assignment on Zybooks. Some of the code is already included in the assignment and we have to modify it with the prompt.","body":"Not a file. It&#39;s in a like assignment on Zybooks. Some of the code is already included in the assignment and we have to modify it with the prompt."}],"answers":[{"tags":[],"owner":{"account_id":25526518,"reputation":23,"user_id":19315496,"display_name":"zero-senpai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658689753,"creation_date":1658689753,"answer_id":73101285,"question_id":71582097,"body_markdown":"Did the same lab. They make it seem intimidating with the amount of files and text thrown at you, but to pass the lab you just need to add the two lines to the end of Library.java:\r\n\r\n      System.out.println(&quot;Number of linked list operations: &quot; + linkedListLibrary.insertSorted(currNode, linkedListOperations));\r\n      System.out.println(&quot;Number of ArrayList operations: &quot; + arrayListLibrary.insertSorted(tempBook, arrayListOperations));\r\n\r\nTo explain:\r\nThe lab was to help you go through established code and read its set methods to learn how to do work in a class you haven&#39;t made. If you followed the development stubs (#TODO&#39;s) you would trace the path to finding what you need to do. This is what leads to the solution in this case!","title":"Library book sorting","body":"<p>Did the same lab. They make it seem intimidating with the amount of files and text thrown at you, but to pass the lab you just need to add the two lines to the end of Library.java:</p>\n<pre><code>  System.out.println(&quot;Number of linked list operations: &quot; + linkedListLibrary.insertSorted(currNode, linkedListOperations));\n  System.out.println(&quot;Number of ArrayList operations: &quot; + arrayListLibrary.insertSorted(tempBook, arrayListOperations));\n</code></pre>\n<p>To explain:\nThe lab was to help you go through established code and read its set methods to learn how to do work in a class you haven't made. If you followed the development stubs (#TODO's) you would trace the path to finding what you need to do. This is what leads to the solution in this case!</p>\n"}],"owner":{"account_id":24654922,"reputation":11,"user_id":18551690,"display_name":"llamavibes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3013,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658689753,"creation_date":1648012279,"question_id":71582097,"body_markdown":"I am in a java programming class and I cannot figure how to fix this error.\r\n\r\nThis is the error I keep getting:\r\n\r\nLibrary.java:120: error: class, interface, or enum expected\r\nimport java.util.ArrayList;\r\n^\r\n1 error\r\n\r\nThis is the task\r\n\r\nTwo sorted lists have been created, one implemented using a linked list (`LinkedListLibrary linkedListLibrary`) and the other implemented using the built-in ArrayList class (`ArrayListLibrary arrayListLibrary`). Each list contains 100 books (title, ISBN number, author), sorted in ascending order by ISBN number.\r\n\r\nComplete main() by inserting a new book into each list using the respective `LinkedListLibrary` and `ArrayListLibrary` insertSorted() methods and outputting the number of operations the computer must perform to insert the new book. Each insertSorted() returns the number of operations the computer performs.\r\n\r\nEx: If the input is:\r\n\r\n    The Catcher in the Rye\r\n    9787543321724\r\n    J.D. Salinger\r\n    \r\n\r\nthe output is:\r\n\r\n    Number of linked list operations: 1\r\n    Number of ArrayList operations: 1\r\n\r\nThis is my code:\r\n\r\n    import java.util.Scanner;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    public class Library {\r\n    public static void fillLibraries(LinkedListLibrary linkedListLibrary, ArrayListLibrary arrayListLibrary) throws IOException {\r\n       FileInputStream fileByteStream = null; // File input stream\r\n       Scanner inFS = null; // Scanner object\r\n       int linkedListOperations = 0;\r\n       int arrayListOperations = 0;    \r\n      \r\n       BookNode currNode;\r\n       Book tempBook;\r\n    \r\n       String bookTitle;\r\n       String bookAuthor;\r\n       long bookISBN;\r\n      \r\n       // Try to open file\r\n       fileByteStream = new FileInputStream(&quot;Books.txt&quot;);\r\n       inFS = new Scanner(fileByteStream);\r\n    \r\n       while (inFS.hasNextLine()) {\r\n           bookTitle = inFS.nextLine();\r\n           bookISBN = inFS.nextLong();\r\n           inFS.nextLine();\r\n           bookAuthor = inFS.nextLine();\r\n    \r\n           // Insert into linked list\r\n           currNode = new BookNode(bookTitle, bookAuthor, bookISBN);\r\n           linkedListOperations = linkedListLibrary.insertSorted(currNode, linkedListOperations);\r\n           linkedListLibrary.lastNode = currNode;\r\n    \r\n           // Insert into ArrayList\r\n           tempBook = new Book(bookTitle, bookAuthor, bookISBN);\r\n           arrayListOperations = arrayListLibrary.insertSorted(tempBook, arrayListOperations);\r\n       }\r\n      \r\n       fileByteStream.close(); // close() may throw IOException if fails\r\n       }\r\n    \r\n       public static void main (String[] args) throws IOException {\r\n           Scanner scnr = new Scanner(System.in);\r\n           int linkedListOperations = 0;\r\n           int arrayListOperations = 0;\r\n      \r\n           // Create libraries\r\n           LinkedListLibrary linkedListLibrary = new LinkedListLibrary();\r\n           ArrayListLibrary arrayListLibrary = new ArrayListLibrary();\r\n      \r\n           // Fill libraries with 100 books\r\n           fillLibraries(linkedListLibrary, arrayListLibrary);\r\n      \r\n           // Create new book to insert into libraries\r\n           BookNode currNode;\r\n           Book tempBook;\r\n      \r\n           String bookTitle;\r\n           String bookAuthor;\r\n           long bookISBN;\r\n      \r\n           bookTitle = scnr.nextLine();\r\n           bookISBN = scnr.nextLong();\r\n           scnr.nextLine();\r\n           bookAuthor = scnr.nextLine();\r\n    \r\n           // Insert into linked list\r\n           currNode = new BookNode(bookTitle, bookAuthor, bookISBN);\r\n           // TODO\r\n           int i = linkedListLibrary.insertSorted(currNode,0);\r\n      \r\n           linkedListLibrary.lastNode = currNode;\r\n      \r\n           // Insert into ArrayList\r\n           tempBook = new Book(bookTitle, bookAuthor, bookISBN);\r\n           // TODO\r\n           int j = arrayListLibrary.insertSorted(tempBook,0);\r\n      \r\n           // TODO: Print number of operations for linked list\r\n           System.out.println(&quot;Number of operations for linked list : &quot;+i);\r\n           // TODO: Print number of operations for ArrayList\r\n           System.out.println(&quot;Number of operations for ArrayList : &quot;+j);\r\n       }\r\n    }\r\n    \r\n    // Book.java\r\n    \r\n    public class Book{\r\n    \r\n       private String bookTitle;\r\n       private String bookAuthor;\r\n       private long bookISBN;\r\n    \r\n       public Book() {\r\n           bookTitle = &quot;&quot;;\r\n           bookAuthor = &quot;&quot;;\r\n           bookISBN = 0;\r\n       }\r\n    \r\n       public Book(String userBookTitle, String userBookAuthor, long userBookISBN) {\r\n           bookTitle = userBookTitle;\r\n           bookAuthor = userBookAuthor;\r\n           bookISBN = userBookISBN;\r\n       }\r\n      \r\n       public long getBookISBN() {\r\n           return bookISBN;\r\n       }\r\n      \r\n       public void printInfo(){\r\n           System.out.println(&quot;Title: &quot; + bookTitle);\r\n           System.out.println(&quot;Author: &quot; + bookAuthor);\r\n           System.out.println(&quot;ISBN: &quot; + bookISBN);\r\n       }\r\n    }\r\n    \r\n    // ArrayListLibrary.java\r\n    \r\n    import java.util.ArrayList;\r\n    public class ArrayListLibrary {\r\n       // ArraryList library\r\n       public ArrayList&lt;Book&gt; library;\r\n    \r\n       public ArrayListLibrary() {\r\n           library = new ArrayList&lt;Book&gt;();\r\n       }\r\n       public int insertSorted(Book newBook, int counter) {\r\n           Book currBook;\r\n           // Add an empty element at end of list\r\n           library.add(null);\r\n           // Loop through elements starting at the end\r\n           for (int i = library.size() - 2; i &gt;=0; --i) {\r\n               currBook = library.get(i);\r\n    \r\n               // If the current book&#39;s ISBN is larger than newBook&#39;s ISBN, shift\r\n               // the current book down 1, count shift operation\r\n               if(currBook.getBookISBN() &gt; newBook.getBookISBN()){\r\n                   library.set(i+1, currBook);\r\n                   ++counter;\r\n               }\r\n      \r\n               // Otherwise, place newBook at the next location (empty slot),\r\n               // count insert operation\r\n               else {\r\n                   library.set(i+1, newBook);\r\n                   ++counter;\r\n                   return counter;\r\n               }\r\n           }\r\n           // If we get to the top of the list, place newBook on top\r\n           library.set(0, newBook);\r\n           ++counter;\r\n      \r\n           return counter;\r\n       }\r\n      \r\n       public void printLibrary() {\r\n           for (int i = 0; i &lt; library.size(); ++i) {\r\n               library.get(i).printInfo();\r\n               System.out.println();\r\n           }\r\n       }\r\n    }\r\n    \r\n    // BookNode.java\r\n    \r\n    public class BookNode {\r\n       private String bookTitle;\r\n       private String bookAuthor;\r\n       private long bookISBN;\r\n       private BookNode nextNodePtr; // Reference to the next node   \r\n       public BookNode() {\r\n           bookTitle = &quot;&quot;;\r\n           bookAuthor = &quot;&quot;;\r\n           bookISBN = 0;\r\n           nextNodePtr = null;\r\n       }\r\n       // Constructor   \r\n       public BookNode(String bookTitleInit, String bookAuthorInit, long bookISBNInit) {\r\n           this.bookTitle = bookTitleInit;\r\n           this.bookAuthor = bookAuthorInit;\r\n           this.bookISBN = bookISBNInit;\r\n           this.nextNodePtr = null;\r\n       }\r\n       // Constructor   \r\n       public BookNode(String bookTitleInit, String bookAuthorInit, long bookISBNInit, BookNode nextLoc) {\r\n           this.bookTitle = bookTitleInit;\r\n           this.bookAuthor = bookAuthorInit;\r\n           this.bookISBN = bookISBNInit;\r\n           this.nextNodePtr = nextLoc;\r\n       }\r\n       // insertAfter\r\n       public void insertAfter(BookNode nodeLoc) {\r\n           BookNode tmpNext;\r\n    \r\n           tmpNext = this.nextNodePtr;\r\n           this.nextNodePtr = nodeLoc;\r\n           nodeLoc.nextNodePtr = tmpNext;\r\n       }\r\n       //setNext\r\n       public void setNext(BookNode nodeLoc) {\r\n           this.nextNodePtr = nodeLoc;\r\n       }\r\n       // Get location pointed by nextNodePtr   \r\n       public BookNode getNext() {\r\n           return this.nextNodePtr;\r\n       }\r\n       public long getBookISBN() {\r\n           return this.bookISBN;\r\n       }\r\n       // TODO: Print book information\r\n       public void printBookInfo() {\r\n           System.out.println(&quot;Title: &quot; + this.bookTitle);\r\n           System.out.println(&quot;Author: &quot; + this.bookAuthor);\r\n           System.out.println(&quot;ISBN: &quot; + this.bookISBN);\r\n       }\r\n    }\r\n    \r\n    // LinkedListLibrary.java\r\n    \r\n    public class LinkedListLibrary {\r\n       //Linked list nodes\r\n       BookNode headNode;\r\n       BookNode lastNode;\r\n    \r\n       LinkedListLibrary() {\r\n           // Front of nodes list   \r\n           headNode = new BookNode();\r\n           lastNode = headNode;\r\n       }\r\n    \r\n       public int insertSorted(BookNode newNode, int counter) {\r\n           BookNode currNode, nextNode;\r\n      \r\n           // Special case for head node\r\n           if (headNode == null || headNode.getBookISBN() &gt;= newNode.getBookISBN()) {\r\n               newNode.insertAfter(headNode);\r\n               headNode = newNode;\r\n           }\r\n           else {\r\n               // Locate the node before insertion point\r\n               currNode = headNode;\r\n      \r\n               while (currNode.getNext() != null &amp;&amp; currNode.getNext().getBookISBN() &lt; newNode.getBookISBN()) {\r\n                   currNode = currNode.getNext();\r\n               }\r\n               newNode.setNext(currNode.getNext());\r\n               currNode.insertAfter(newNode);\r\n           }\r\n      \r\n           ++counter;\r\n           return counter;\r\n       }\r\n    \r\n       public void printLibrary() {\r\n           BookNode currNode;\r\n    \r\n           currNode = headNode.getNext();\r\n           while (currNode != null) {\r\n               currNode.printBookInfo();\r\n               System.out.println();\r\n               currNode = currNode.getNext();\r\n           }\r\n       }\r\n    }","title":"Library book sorting","body":"<p>I am in a java programming class and I cannot figure how to fix this error.</p>\n<p>This is the error I keep getting:</p>\n<p>Library.java:120: error: class, interface, or enum expected\nimport java.util.ArrayList;\n^\n1 error</p>\n<p>This is the task</p>\n<p>Two sorted lists have been created, one implemented using a linked list (<code>LinkedListLibrary linkedListLibrary</code>) and the other implemented using the built-in ArrayList class (<code>ArrayListLibrary arrayListLibrary</code>). Each list contains 100 books (title, ISBN number, author), sorted in ascending order by ISBN number.</p>\n<p>Complete main() by inserting a new book into each list using the respective <code>LinkedListLibrary</code> and <code>ArrayListLibrary</code> insertSorted() methods and outputting the number of operations the computer must perform to insert the new book. Each insertSorted() returns the number of operations the computer performs.</p>\n<p>Ex: If the input is:</p>\n<pre><code>The Catcher in the Rye\n9787543321724\nJ.D. Salinger\n</code></pre>\n<p>the output is:</p>\n<pre><code>Number of linked list operations: 1\nNumber of ArrayList operations: 1\n</code></pre>\n<p>This is my code:</p>\n<pre><code>import java.util.Scanner;\nimport java.io.FileInputStream;\nimport java.io.IOException;\npublic class Library {\npublic static void fillLibraries(LinkedListLibrary linkedListLibrary, ArrayListLibrary arrayListLibrary) throws IOException {\n   FileInputStream fileByteStream = null; // File input stream\n   Scanner inFS = null; // Scanner object\n   int linkedListOperations = 0;\n   int arrayListOperations = 0;    \n  \n   BookNode currNode;\n   Book tempBook;\n\n   String bookTitle;\n   String bookAuthor;\n   long bookISBN;\n  \n   // Try to open file\n   fileByteStream = new FileInputStream(&quot;Books.txt&quot;);\n   inFS = new Scanner(fileByteStream);\n\n   while (inFS.hasNextLine()) {\n       bookTitle = inFS.nextLine();\n       bookISBN = inFS.nextLong();\n       inFS.nextLine();\n       bookAuthor = inFS.nextLine();\n\n       // Insert into linked list\n       currNode = new BookNode(bookTitle, bookAuthor, bookISBN);\n       linkedListOperations = linkedListLibrary.insertSorted(currNode, linkedListOperations);\n       linkedListLibrary.lastNode = currNode;\n\n       // Insert into ArrayList\n       tempBook = new Book(bookTitle, bookAuthor, bookISBN);\n       arrayListOperations = arrayListLibrary.insertSorted(tempBook, arrayListOperations);\n   }\n  \n   fileByteStream.close(); // close() may throw IOException if fails\n   }\n\n   public static void main (String[] args) throws IOException {\n       Scanner scnr = new Scanner(System.in);\n       int linkedListOperations = 0;\n       int arrayListOperations = 0;\n  \n       // Create libraries\n       LinkedListLibrary linkedListLibrary = new LinkedListLibrary();\n       ArrayListLibrary arrayListLibrary = new ArrayListLibrary();\n  \n       // Fill libraries with 100 books\n       fillLibraries(linkedListLibrary, arrayListLibrary);\n  \n       // Create new book to insert into libraries\n       BookNode currNode;\n       Book tempBook;\n  \n       String bookTitle;\n       String bookAuthor;\n       long bookISBN;\n  \n       bookTitle = scnr.nextLine();\n       bookISBN = scnr.nextLong();\n       scnr.nextLine();\n       bookAuthor = scnr.nextLine();\n\n       // Insert into linked list\n       currNode = new BookNode(bookTitle, bookAuthor, bookISBN);\n       // TODO\n       int i = linkedListLibrary.insertSorted(currNode,0);\n  \n       linkedListLibrary.lastNode = currNode;\n  \n       // Insert into ArrayList\n       tempBook = new Book(bookTitle, bookAuthor, bookISBN);\n       // TODO\n       int j = arrayListLibrary.insertSorted(tempBook,0);\n  \n       // TODO: Print number of operations for linked list\n       System.out.println(&quot;Number of operations for linked list : &quot;+i);\n       // TODO: Print number of operations for ArrayList\n       System.out.println(&quot;Number of operations for ArrayList : &quot;+j);\n   }\n}\n\n// Book.java\n\npublic class Book{\n\n   private String bookTitle;\n   private String bookAuthor;\n   private long bookISBN;\n\n   public Book() {\n       bookTitle = &quot;&quot;;\n       bookAuthor = &quot;&quot;;\n       bookISBN = 0;\n   }\n\n   public Book(String userBookTitle, String userBookAuthor, long userBookISBN) {\n       bookTitle = userBookTitle;\n       bookAuthor = userBookAuthor;\n       bookISBN = userBookISBN;\n   }\n  \n   public long getBookISBN() {\n       return bookISBN;\n   }\n  \n   public void printInfo(){\n       System.out.println(&quot;Title: &quot; + bookTitle);\n       System.out.println(&quot;Author: &quot; + bookAuthor);\n       System.out.println(&quot;ISBN: &quot; + bookISBN);\n   }\n}\n\n// ArrayListLibrary.java\n\nimport java.util.ArrayList;\npublic class ArrayListLibrary {\n   // ArraryList library\n   public ArrayList&lt;Book&gt; library;\n\n   public ArrayListLibrary() {\n       library = new ArrayList&lt;Book&gt;();\n   }\n   public int insertSorted(Book newBook, int counter) {\n       Book currBook;\n       // Add an empty element at end of list\n       library.add(null);\n       // Loop through elements starting at the end\n       for (int i = library.size() - 2; i &gt;=0; --i) {\n           currBook = library.get(i);\n\n           // If the current book's ISBN is larger than newBook's ISBN, shift\n           // the current book down 1, count shift operation\n           if(currBook.getBookISBN() &gt; newBook.getBookISBN()){\n               library.set(i+1, currBook);\n               ++counter;\n           }\n  \n           // Otherwise, place newBook at the next location (empty slot),\n           // count insert operation\n           else {\n               library.set(i+1, newBook);\n               ++counter;\n               return counter;\n           }\n       }\n       // If we get to the top of the list, place newBook on top\n       library.set(0, newBook);\n       ++counter;\n  \n       return counter;\n   }\n  \n   public void printLibrary() {\n       for (int i = 0; i &lt; library.size(); ++i) {\n           library.get(i).printInfo();\n           System.out.println();\n       }\n   }\n}\n\n// BookNode.java\n\npublic class BookNode {\n   private String bookTitle;\n   private String bookAuthor;\n   private long bookISBN;\n   private BookNode nextNodePtr; // Reference to the next node   \n   public BookNode() {\n       bookTitle = &quot;&quot;;\n       bookAuthor = &quot;&quot;;\n       bookISBN = 0;\n       nextNodePtr = null;\n   }\n   // Constructor   \n   public BookNode(String bookTitleInit, String bookAuthorInit, long bookISBNInit) {\n       this.bookTitle = bookTitleInit;\n       this.bookAuthor = bookAuthorInit;\n       this.bookISBN = bookISBNInit;\n       this.nextNodePtr = null;\n   }\n   // Constructor   \n   public BookNode(String bookTitleInit, String bookAuthorInit, long bookISBNInit, BookNode nextLoc) {\n       this.bookTitle = bookTitleInit;\n       this.bookAuthor = bookAuthorInit;\n       this.bookISBN = bookISBNInit;\n       this.nextNodePtr = nextLoc;\n   }\n   // insertAfter\n   public void insertAfter(BookNode nodeLoc) {\n       BookNode tmpNext;\n\n       tmpNext = this.nextNodePtr;\n       this.nextNodePtr = nodeLoc;\n       nodeLoc.nextNodePtr = tmpNext;\n   }\n   //setNext\n   public void setNext(BookNode nodeLoc) {\n       this.nextNodePtr = nodeLoc;\n   }\n   // Get location pointed by nextNodePtr   \n   public BookNode getNext() {\n       return this.nextNodePtr;\n   }\n   public long getBookISBN() {\n       return this.bookISBN;\n   }\n   // TODO: Print book information\n   public void printBookInfo() {\n       System.out.println(&quot;Title: &quot; + this.bookTitle);\n       System.out.println(&quot;Author: &quot; + this.bookAuthor);\n       System.out.println(&quot;ISBN: &quot; + this.bookISBN);\n   }\n}\n\n// LinkedListLibrary.java\n\npublic class LinkedListLibrary {\n   //Linked list nodes\n   BookNode headNode;\n   BookNode lastNode;\n\n   LinkedListLibrary() {\n       // Front of nodes list   \n       headNode = new BookNode();\n       lastNode = headNode;\n   }\n\n   public int insertSorted(BookNode newNode, int counter) {\n       BookNode currNode, nextNode;\n  \n       // Special case for head node\n       if (headNode == null || headNode.getBookISBN() &gt;= newNode.getBookISBN()) {\n           newNode.insertAfter(headNode);\n           headNode = newNode;\n       }\n       else {\n           // Locate the node before insertion point\n           currNode = headNode;\n  \n           while (currNode.getNext() != null &amp;&amp; currNode.getNext().getBookISBN() &lt; newNode.getBookISBN()) {\n               currNode = currNode.getNext();\n           }\n           newNode.setNext(currNode.getNext());\n           currNode.insertAfter(newNode);\n       }\n  \n       ++counter;\n       return counter;\n   }\n\n   public void printLibrary() {\n       BookNode currNode;\n\n       currNode = headNode.getNext();\n       while (currNode != null) {\n           currNode.printBookInfo();\n           System.out.println();\n           currNode = currNode.getNext();\n       }\n   }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":2,"creation_date":1563045869,"post_id":57022085,"comment_id":100574706,"body_markdown":"You can call getIntent in any function of an Activity.  There&#39;s nothing magic about it, its just a method.","body":"You can call getIntent in any function of an Activity.  There&#39;s nothing magic about it, its just a method."}],"answers":[{"tags":[],"owner":{"account_id":10152714,"reputation":199,"user_id":7498767,"display_name":"Akrit Khanna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563047659,"creation_date":1563047659,"answer_id":57022384,"question_id":57022085,"body_markdown":"You need to make String title and urlYoutube global( i.e. outside onCreate). and then Initialize both inside onCreate by this way you can use intent data outside onCreate method\r\n\r\nfor example \r\n\r\n    public class PlayerActivity extends AppCompatActivity {\r\n        SimpleExoPlayerView simpleExoPlayerView;\r\n        private String GRID_YOUTUBE_ID = &quot;s9-Id1WJQyo&quot;;\r\n        private String BASE_URL = &quot;https://www.youtube.com&quot;;\r\n        private String youtubeLink = BASE_URL + &quot;/watch?v=&quot; + GRID_YOUTUBE_ID;\r\n        public String title,urlYoutube; \r\n    //hello\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_player);\r\n            extractYoutubeUrl();\r\n            simpleExoPlayerView = findViewById(R.id.player);\r\n    \r\n    \r\n            title = getIntent().getExtras().getString(&quot;title&quot;);\r\n            urlYoutube = getIntent().getExtras().getString(&quot;videourl&quot;);\r\n    \r\n    \r\n        }\r\n\r\nI hope this solves your problem.","title":"I have want to getinent outside the oncreate() activity to extract my YouTube link in exoplayer from another class","body":"<p>You need to make String title and urlYoutube global( i.e. outside onCreate). and then Initialize both inside onCreate by this way you can use intent data outside onCreate method</p>\n\n<p>for example </p>\n\n<pre><code>public class PlayerActivity extends AppCompatActivity {\n    SimpleExoPlayerView simpleExoPlayerView;\n    private String GRID_YOUTUBE_ID = \"s9-Id1WJQyo\";\n    private String BASE_URL = \"https://www.youtube.com\";\n    private String youtubeLink = BASE_URL + \"/watch?v=\" + GRID_YOUTUBE_ID;\n    public String title,urlYoutube; \n//hello\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_player);\n        extractYoutubeUrl();\n        simpleExoPlayerView = findViewById(R.id.player);\n\n\n        title = getIntent().getExtras().getString(\"title\");\n        urlYoutube = getIntent().getExtras().getString(\"videourl\");\n\n\n    }\n</code></pre>\n\n<p>I hope this solves your problem.</p>\n"},{"tags":[],"owner":{"account_id":15909905,"reputation":543,"user_id":11480111,"display_name":"Alireza Tizfahm Fard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1563080211,"creation_date":1563080211,"answer_id":57024723,"question_id":57022085,"body_markdown":"You can use deeplink with specific structure\r\n\r\nAppend blew line manifest\r\n\r\nDefine ACTION_VIEW intent action so that the intent filter can be reached from Google Search\r\n\r\n    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\r\n\r\nAnd add BROWSABLE category in order to be accessible from a out off app\r\n\r\n    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\r\n\r\nAdd your link structure\r\n\r\n    &lt;data android:host=&quot;youtube&quot; android:pathPattern=&quot;.*&quot; android:scheme=&quot;https&quot;/&gt;\r\n\r\n\r\nGet data with intent\r\n\r\n    Intent intent = getIntent();\r\n    Uri data = intent.getData();\r\n\r\nSend data to app\r\n\r\n    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(&quot;https://youtube&quot;));\r\n    startActivity(launchIntent);\r\n\r\n\r\n\r\n ","title":"I have want to getinent outside the oncreate() activity to extract my YouTube link in exoplayer from another class","body":"<p>You can use deeplink with specific structure</p>\n\n<p>Append blew line manifest</p>\n\n<p>Define ACTION_VIEW intent action so that the intent filter can be reached from Google Search</p>\n\n<pre><code>&lt;action android:name=\"android.intent.action.VIEW\" /&gt;\n</code></pre>\n\n<p>And add BROWSABLE category in order to be accessible from a out off app</p>\n\n<pre><code>&lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n&lt;category android:name=\"android.intent.category.BROWSABLE\" /&gt;\n</code></pre>\n\n<p>Add your link structure</p>\n\n<pre><code>&lt;data android:host=\"youtube\" android:pathPattern=\".*\" android:scheme=\"https\"/&gt;\n</code></pre>\n\n<p>Get data with intent</p>\n\n<pre><code>Intent intent = getIntent();\nUri data = intent.getData();\n</code></pre>\n\n<p>Send data to app</p>\n\n<pre><code>Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(\"https://youtube\"));\nstartActivity(launchIntent);\n</code></pre>\n"}],"owner":{"account_id":15771323,"reputation":9,"user_id":11380295,"display_name":"Wasi Ch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57024723,"answer_count":2,"score":0,"last_activity_date":1658688982,"creation_date":1563045046,"question_id":57022085,"body_markdown":"From my recyclerview adapter class through intent put extra I am passing the URL of the video and I want to getintent outside the oncreate() activity.to pass the URL in another string which is outside my oncreate(). is there is any possibility to access getintent string outside the oncreate?\r\n\r\nin this class I want to getintent of video URL before the ONCREATE() to pass the URL instead of static URL;\r\n\r\n    package com.example.movies.uis;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.annotation.SuppressLint;\r\n    import android.content.pm.ActivityInfo;\r\n    import android.content.res.Configuration;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.util.SparseArray;\r\n    import android.view.View;\r\n    import android.view.WindowManager;\r\n    import android.widget.ImageButton;\r\n    import android.widget.LinearLayout;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import com.example.movies.R;\r\n    import com.google.android.exoplayer2.ui.AspectRatioFrameLayout;\r\n    import com.google.android.exoplayer2.ui.SimpleExoPlayerView;\r\n    \r\n    import at.huber.youtubeExtractor.Format;\r\n    import at.huber.youtubeExtractor.VideoMeta;\r\n    import at.huber.youtubeExtractor.YouTubeExtractor;\r\n    import at.huber.youtubeExtractor.YtFile;\r\n    \r\n    public class PlayerActivity extends AppCompatActivity {\r\n        SimpleExoPlayerView simpleExoPlayerView;\r\n        private String GRID_YOUTUBE_ID = &quot;s9-Id1WJQyo&quot;;\r\n        private String BASE_URL = &quot;https://www.youtube.com&quot;;\r\n        private String youtubeLink = BASE_URL + &quot;/watch?v=&quot; + GRID_YOUTUBE_ID;\r\n    //hello\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n    \r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_player);\r\n            extractYoutubeUrl();\r\n            simpleExoPlayerView = findViewById(R.id.player);\r\n            \r\n            \r\n            String title = getIntent().getExtras().getString(&quot;title&quot;);\r\n            String urlYoutube = getIntent().getExtras().getString(&quot;videourl&quot;);\r\n            \r\n            \r\n            TextView tv_name = findViewById(R.id.txt_title);\r\n            tv_name.setText(title);\r\n    \r\n    \r\n    \r\n    \r\n    \r\n        }\r\n    \r\n    \r\n        @SuppressLint(&quot;StaticFieldLeak&quot;)\r\n        private void extractYoutubeUrl() {\r\n            new YouTubeExtractor(this) {\r\n                @Override\r\n                public void onExtractionComplete(SparseArray&lt;YtFile&gt; sparseArray, VideoMeta vMeta) {\r\n                    //Log.d(&quot;======&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, &quot;onExtractionComplete: &quot;+ytFiles.toString());\r\n                    if (sparseArray != null) {\r\n                        for(int i=0, size = sparseArray.size(); i &lt; size; i++){\r\n                            YtFile ytFile = sparseArray.valueAt(i);\r\n                            Format frmt = ytFile.getFormat();\r\n                            if(frmt.getExt() == &quot;mp4&quot; || frmt.getExt() == &quot;webm&quot;){\r\n                              //  Log.d(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, &quot;index: &quot; + i+ &quot; path: &quot;+ytFile);\r\n                            }\r\n    \r\n    \r\n                            playVideo(ytFile.getUrl());\r\n    \r\n    \r\n                        }\r\n    \r\n                    }\r\n    \r\n                }\r\n            }.extract(youtubeLink, true, true);\r\n        }\r\n    \r\n        public void playVideo(String downloadUrl) {\r\n    \r\n            simpleExoPlayerView.setPlayer(ExoPlayerCustomise.getSharedInstance(PlayerActivity.this).getSimpleExoPlayerView().getPlayer());\r\n    \r\n            ExoPlayerCustomise.getSharedInstance(PlayerActivity.this).playStream(downloadUrl);\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    }\r\n\r\n  \r\n\r\n\r\n\r\n  and here is my adapter class code which is passing the URL to the activity \r\n onclick item\r\n\r\n\r\n\r\n             public void onBindViewHolder(RecyclerviewAdpaterFragment70s.RecyclerViewHolder holder, int position) {\r\n            \r\n                    Context context = holder.cardthumnail.getContext();\r\n                    Songsapis songs = songsapis.get(position);\r\n                    holder.cardtitle.setText(songs.getTitle());\r\n                        Picasso.with(context)\r\n                                .load(songs.getThumbnail())\r\n                                .into(holder.cardthumnail);\r\n                        holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                Context context = holder.itemView.getContext();\r\n                                Intent i = new Intent(context, PlayerActivity.class);\r\n                                i.putExtra(&quot;title&quot;,songsapis.get(position).getTitle());\r\n                                i.putExtra(&quot;videourl&quot;,songsapis.get(position).getUrl());\r\n                                context.startActivity(i);\r\n            \r\n            \r\n            \r\n            \r\n                            }\r\n                        });\r\n            \r\n                }","title":"I have want to getinent outside the oncreate() activity to extract my YouTube link in exoplayer from another class","body":"<p>From my recyclerview adapter class through intent put extra I am passing the URL of the video and I want to getintent outside the oncreate() activity.to pass the URL in another string which is outside my oncreate(). is there is any possibility to access getintent string outside the oncreate?</p>\n<p>in this class I want to getintent of video URL before the ONCREATE() to pass the URL instead of static URL;</p>\n<pre><code>package com.example.movies.uis;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.content.pm.ActivityInfo;\nimport android.content.res.Configuration;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.util.SparseArray;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.ImageButton;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.example.movies.R;\nimport com.google.android.exoplayer2.ui.AspectRatioFrameLayout;\nimport com.google.android.exoplayer2.ui.SimpleExoPlayerView;\n\nimport at.huber.youtubeExtractor.Format;\nimport at.huber.youtubeExtractor.VideoMeta;\nimport at.huber.youtubeExtractor.YouTubeExtractor;\nimport at.huber.youtubeExtractor.YtFile;\n\npublic class PlayerActivity extends AppCompatActivity {\n    SimpleExoPlayerView simpleExoPlayerView;\n    private String GRID_YOUTUBE_ID = &quot;s9-Id1WJQyo&quot;;\n    private String BASE_URL = &quot;https://www.youtube.com&quot;;\n    private String youtubeLink = BASE_URL + &quot;/watch?v=&quot; + GRID_YOUTUBE_ID;\n//hello\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_player);\n        extractYoutubeUrl();\n        simpleExoPlayerView = findViewById(R.id.player);\n        \n        \n        String title = getIntent().getExtras().getString(&quot;title&quot;);\n        String urlYoutube = getIntent().getExtras().getString(&quot;videourl&quot;);\n        \n        \n        TextView tv_name = findViewById(R.id.txt_title);\n        tv_name.setText(title);\n\n\n\n\n\n    }\n\n\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\n    private void extractYoutubeUrl() {\n        new YouTubeExtractor(this) {\n            @Override\n            public void onExtractionComplete(SparseArray&lt;YtFile&gt; sparseArray, VideoMeta vMeta) {\n                //Log.d(&quot;======&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, &quot;onExtractionComplete: &quot;+ytFiles.toString());\n                if (sparseArray != null) {\n                    for(int i=0, size = sparseArray.size(); i &lt; size; i++){\n                        YtFile ytFile = sparseArray.valueAt(i);\n                        Format frmt = ytFile.getFormat();\n                        if(frmt.getExt() == &quot;mp4&quot; || frmt.getExt() == &quot;webm&quot;){\n                          //  Log.d(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;, &quot;index: &quot; + i+ &quot; path: &quot;+ytFile);\n                        }\n\n\n                        playVideo(ytFile.getUrl());\n\n\n                    }\n\n                }\n\n            }\n        }.extract(youtubeLink, true, true);\n    }\n\n    public void playVideo(String downloadUrl) {\n\n        simpleExoPlayerView.setPlayer(ExoPlayerCustomise.getSharedInstance(PlayerActivity.this).getSimpleExoPlayerView().getPlayer());\n\n        ExoPlayerCustomise.getSharedInstance(PlayerActivity.this).playStream(downloadUrl);\n    }\n\n\n\n\n\n\n}\n</code></pre>\n<p>and here is my adapter class code which is passing the URL to the activity\nonclick item</p>\n<pre><code>         public void onBindViewHolder(RecyclerviewAdpaterFragment70s.RecyclerViewHolder holder, int position) {\n        \n                Context context = holder.cardthumnail.getContext();\n                Songsapis songs = songsapis.get(position);\n                holder.cardtitle.setText(songs.getTitle());\n                    Picasso.with(context)\n                            .load(songs.getThumbnail())\n                            .into(holder.cardthumnail);\n                    holder.itemView.setOnClickListener(new View.OnClickListener() {\n                        @Override\n                        public void onClick(View v) {\n                            Context context = holder.itemView.getContext();\n                            Intent i = new Intent(context, PlayerActivity.class);\n                            i.putExtra(&quot;title&quot;,songsapis.get(position).getTitle());\n                            i.putExtra(&quot;videourl&quot;,songsapis.get(position).getUrl());\n                            context.startActivity(i);\n        \n        \n        \n        \n                        }\n                    });\n        \n            }\n</code></pre>\n"},{"tags":["java","android","kotlin","admob"],"owner":{"account_id":204444,"reputation":357,"user_id":452666,"accept_rate":50,"display_name":"mehrdad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658688664,"creation_date":1658621106,"question_id":73094960,"body_markdown":"I&#39;m having trouble showing admob ads inside my VPN app\r\n\r\nWhen users from countries with low eCPM connect to VPNs from countries with higher eCPM, Google does not know the real country of the user and therefore limits the sending of ads.\r\n\r\nFor example, it shows ads that are in the UK to people in Japan and vice versa\r\n\r\nThere is no way that admob remembers the user&#39;s country during the initial implementation? or any other solution","title":"Problem with displaying admob ads inside vpn app","body":"<p>I'm having trouble showing admob ads inside my VPN app</p>\n<p>When users from countries with low eCPM connect to VPNs from countries with higher eCPM, Google does not know the real country of the user and therefore limits the sending of ads.</p>\n<p>For example, it shows ads that are in the UK to people in Japan and vice versa</p>\n<p>There is no way that admob remembers the user's country during the initial implementation? or any other solution</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1558020949,"post_id":14708386,"comment_id":98970771,"body_markdown":"See also https://stackoverflow.com/questions/34965201/customize-jackson-objectmapper-to-read-custom-annotation-and-mask-fields-annotat","body":"See also <a href=\"https://stackoverflow.com/questions/34965201/customize-jackson-objectmapper-to-read-custom-annotation-and-mask-fields-annotat\" title=\"customize jackson objectmapper to read custom annotation and mask fields annotat\">stackoverflow.com/questions/34965201/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":406358,"reputation":1944,"user_id":775823,"accept_rate":100,"display_name":"Ravi Khakhkhar"},"down_vote_count":0,"up_vote_count":84,"is_accepted":true,"score":84,"last_activity_date":1375276180,"creation_date":1360071851,"answer_id":14708961,"question_id":14708386,"body_markdown":"You have two options:\r\n\r\n1. Jackson works on setters-getters of fields. So, you can just remove getter of field which you want to omit in JSON. ( If you don&#39;t need getter at other place.)\r\n\r\n2. Or, you can use the `@JsonIgnore` [annotation of Jackson][1] on getter method of that field and you see there in no such key-value pair in resulted JSON. \r\n\r\n        @JsonIgnore\r\n        public int getSecurityCode(){\r\n           return securityCode;\r\n        }\r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonAnnotations","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>You have two options:</p>\n\n<ol>\n<li><p>Jackson works on setters-getters of fields. So, you can just remove getter of field which you want to omit in JSON. ( If you don't need getter at other place.)</p></li>\n<li><p>Or, you can use the <code>@JsonIgnore</code> <a href=\"http://wiki.fasterxml.com/JacksonAnnotations\" rel=\"noreferrer\">annotation of Jackson</a> on getter method of that field and you see there in no such key-value pair in resulted JSON. </p>\n\n<pre><code>@JsonIgnore\npublic int getSecurityCode(){\n   return securityCode;\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":447043,"reputation":5876,"user_id":840441,"display_name":"eugen"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1360073375,"creation_date":1360073375,"answer_id":14709443,"question_id":14708386,"body_markdown":"If you don&#39;t want to put annotations on your Pojos you can also use [Genson](http://code.google.com/p/genson/). \r\n\r\nHere is how you can exclude a field with it without any annotations (you can also use annotations if you want, but you have the choice).\r\n\r\n    Genson genson = new Genson.Builder().exclude(&quot;securityCode&quot;, User.class).create();\r\n    // and then\r\n    String json = genson.serialize(user);\r\n\r\n","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>If you don't want to put annotations on your Pojos you can also use <a href=\"http://code.google.com/p/genson/\" rel=\"noreferrer\">Genson</a>. </p>\n\n<p>Here is how you can exclude a field with it without any annotations (you can also use annotations if you want, but you have the choice).</p>\n\n<pre><code>Genson genson = new Genson.Builder().exclude(\"securityCode\", User.class).create();\n// and then\nString json = genson.serialize(user);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2606286,"reputation":683,"user_id":2257397,"accept_rate":38,"display_name":"Benjamin Fuentes"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1386601144,"creation_date":1386601144,"answer_id":20473686,"question_id":14708386,"body_markdown":"you also can gather all properties on an annotation class \r\n\r\n    @JsonIgnoreProperties( { &quot;applications&quot; })\r\n    public MyClass ...\r\n\r\n    String applications;","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>you also can gather all properties on an annotation class </p>\n\n<pre><code>@JsonIgnoreProperties( { \"applications\" })\npublic MyClass ...\n\nString applications;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2836916,"reputation":21,"user_id":2437346,"display_name":"tak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487958059,"creation_date":1487958059,"answer_id":42444994,"question_id":14708386,"body_markdown":"if you are using GSON you have to mark the field/member declarations as @Expose and use the GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()\r\n\r\nDon&#39;t forget to mark your sub classes with @Expose otherwise the fields won&#39;t show.","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>if you are using GSON you have to mark the field/member declarations as @Expose and use the GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()</p>\n\n<p>Don't forget to mark your sub classes with @Expose otherwise the fields won't show.</p>\n"},{"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1495658818,"creation_date":1495658818,"answer_id":44168171,"question_id":14708386,"body_markdown":"Adding this here because somebody else may search this again in future, like me. This Answer is an extension to the [Accepted Answer][1] \r\n\r\n    You have two options:\r\n    \r\n    1. Jackson works on setters-getters of fields. So, you can just remove getter of field which you want to omit in JSON. ( If you don&#39;t need getter at other place.)\r\n    \r\n    2. Or, you can use the `@JsonIgnore` [annotation of Jackson][1] on getter method of that field and you see there in no such key-value pair in resulted JSON. \r\n    \r\n            @JsonIgnore\r\n            public int getSecurityCode(){\r\n               return securityCode;\r\n            }\r\nActually, **newer version of Jackson added READ_ONLY and WRITE_ONLY annotation arguments for JsonProperty**. So you could also do something like this.\r\n\r\n    @JsonProperty(access = Access.WRITE_ONLY)\r\n    private String securityCode;\r\n\r\ninstead of \r\n\r\n    @JsonIgnore\r\n    public int getSecurityCode(){\r\n      return securityCode;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/14708961/6785908","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>Adding this here because somebody else may search this again in future, like me. This Answer is an extension to the <a href=\"https://stackoverflow.com/a/14708961/6785908\">Accepted Answer</a> </p>\n\n<pre><code>You have two options:\n\n1. Jackson works on setters-getters of fields. So, you can just remove getter of field which you want to omit in JSON. ( If you don't need getter at other place.)\n\n2. Or, you can use the `@JsonIgnore` [annotation of Jackson][1] on getter method of that field and you see there in no such key-value pair in resulted JSON. \n\n        @JsonIgnore\n        public int getSecurityCode(){\n           return securityCode;\n        }\n</code></pre>\n\n<p>Actually, <strong>newer version of Jackson added READ_ONLY and WRITE_ONLY annotation arguments for JsonProperty</strong>. So you could also do something like this.</p>\n\n<pre><code>@JsonProperty(access = Access.WRITE_ONLY)\nprivate String securityCode;\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>@JsonIgnore\npublic int getSecurityCode(){\n  return securityCode;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15519327,"reputation":11,"user_id":11195939,"display_name":"Puneet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561141494,"creation_date":1561130630,"answer_id":56706291,"question_id":14708386,"body_markdown":"I had a similar case where I needed some property to be deserialized (JSON to Object) but not serialized (Object to JSON)\r\n\r\nFirst i went for `@JsonIgnore` - it did prevent serialization of unwanted property, but failed to de-serialize it too. Trying `value` attribute didn&#39;t help either as it requires some condition.\r\n\r\nFinally, working `@JsonProperty` with `access` attribute worked like a charm.","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>I had a similar case where I needed some property to be deserialized (JSON to Object) but not serialized (Object to JSON)</p>\n\n<p>First i went for <code>@JsonIgnore</code> - it did prevent serialization of unwanted property, but failed to de-serialize it too. Trying <code>value</code> attribute didn't help either as it requires some condition.</p>\n\n<p>Finally, working <code>@JsonProperty</code> with <code>access</code> attribute worked like a charm.</p>\n"},{"tags":[],"owner":{"account_id":2204985,"reputation":1225,"user_id":1948438,"display_name":"CamelTM"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1561132197,"creation_date":1561132197,"answer_id":56706735,"question_id":14708386,"body_markdown":"\r\n\r\n\r\nField Level:\r\n\r\n    public class User {\r\n        private String name;\r\n        private int age;\r\n        @JsonIgnore\r\n        private int securityCode;\r\n    \r\n        // getters and setters\r\n    }\r\n\r\nClass Level:\r\n\r\n    @JsonIgnoreProperties(value = { &quot;securityCode&quot; })\r\n    public class User {\r\n        private String name;\r\n        private int age;\r\n        private int securityCode;\r\n    }","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>Field Level:</p>\n\n<pre><code>public class User {\n    private String name;\n    private int age;\n    @JsonIgnore\n    private int securityCode;\n\n    // getters and setters\n}\n</code></pre>\n\n<p>Class Level:</p>\n\n<pre><code>@JsonIgnoreProperties(value = { \"securityCode\" })\npublic class User {\n    private String name;\n    private int age;\n    private int securityCode;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10747673,"reputation":519,"user_id":7908330,"display_name":"Arnoldkk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644480789,"creation_date":1644480789,"answer_id":71061718,"question_id":14708386,"body_markdown":" I suggest you use this.\r\n\r\n       @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\r\n       private int securityCode;\r\n\r\nThis allows you to set the value of securityCode(especially if you use lombok @Setter) and also prevent the field from showing up in the GET request.","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>I suggest you use this.</p>\n<pre><code>   @JsonProperty(access = JsonProperty.Access.WRITE_ONLY)\n   private int securityCode;\n</code></pre>\n<p>This allows you to set the value of securityCode(especially if you use lombok @Setter) and also prevent the field from showing up in the GET request.</p>\n"}],"owner":{"account_id":1986060,"reputation":4978,"user_id":1814823,"accept_rate":65,"display_name":"sonicboom"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124393,"favorite_count":0,"down_vote_count":1,"up_vote_count":59,"accepted_answer_id":14708961,"answer_count":8,"score":58,"last_activity_date":1658688526,"creation_date":1360069995,"question_id":14708386,"body_markdown":"I have a User class that I want to map to JSON using Jackson.\r\n\r\n    public class User {\r\n    \tprivate String name;\r\n    \tprivate int age;\r\n    \tprivate int securityCode;\r\n    \r\n    \t// getters and setters\r\n    }\r\n\r\nI map this to a JSON string using -\r\n\r\n    User user = getUserFromDatabase();\r\n    \r\n    ObjectMapper mapper = new ObjectMapper();   \r\n    String json =  mapper.writeValueAsString(user);\r\n\r\n\r\nI don&#39;t want to map the `securityCode` variable. Is there any way of configuring the mapper so that it ignores this field?\r\n\r\nI know I can write custom data mappers or use the Streaming API but I would like to know if it possible to do it through configuration?","title":"Want to hide some fields of an object that are being mapped to JSON by Jackson","body":"<p>I have a User class that I want to map to JSON using Jackson.</p>\n<pre><code>public class User {\n    private String name;\n    private int age;\n    private int securityCode;\n\n    // getters and setters\n}\n</code></pre>\n<p>I map this to a JSON string using -</p>\n<pre><code>User user = getUserFromDatabase();\n\nObjectMapper mapper = new ObjectMapper();   \nString json =  mapper.writeValueAsString(user);\n</code></pre>\n<p>I don't want to map the <code>securityCode</code> variable. Is there any way of configuring the mapper so that it ignores this field?</p>\n<p>I know I can write custom data mappers or use the Streaming API but I would like to know if it possible to do it through configuration?</p>\n"},{"tags":["java","spring","spring-cloud-gateway"],"comments":[{"owner":{"account_id":2869610,"reputation":1140,"user_id":2463234,"display_name":"Dhananjay"},"score":0,"creation_date":1658710932,"post_id":73101024,"comment_id":129111249,"body_markdown":"I think Filters only apply request that matches a configured route - https://cloud.spring.io/spring-cloud-gateway/reference/html/#gateway-combined-global-filter-and-gatewayfilter-ordering","body":"I think Filters only apply request that matches a configured route - <a href=\"https://cloud.spring.io/spring-cloud-gateway/reference/html/#gateway-combined-global-filter-and-gatewayfilter-ordering\" rel=\"nofollow noreferrer\">cloud.spring.io/spring-cloud-gateway/reference/html/&hellip;</a>"},{"owner":{"account_id":2254304,"reputation":162,"user_id":1985826,"accept_rate":25,"display_name":"Maxiko"},"score":0,"creation_date":1658723336,"post_id":73101024,"comment_id":129112872,"body_markdown":"@Dhananjay ,yes. But also I want to log failed routing attempts and I have no idea how to do it","body":"@Dhananjay ,yes. But also I want to log failed routing attempts and I have no idea how to do it"}],"owner":{"account_id":2254304,"reputation":162,"user_id":1985826,"accept_rate":25,"display_name":"Maxiko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658687509,"creation_date":1658687509,"question_id":73101024,"body_markdown":"I need to log incoming requests. So I&#39;ve added this class to log incoming requests:\r\n```\r\n@Slf4j\r\n@Component\r\npublic class LoggingFilter implements GlobalFilter {\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        Set&lt;URI&gt; uris = exchange.getAttributeOrDefault(GATEWAY_ORIGINAL_REQUEST_URL_ATTR, Collections.emptySet());\r\n        String originalUri = (uris.isEmpty()) ? &quot;Unknown&quot; : uris.iterator().next().toString();\r\n        Route route = exchange.getAttribute(GATEWAY_ROUTE_ATTR);\r\n        URI routeUri = exchange.getAttribute(GATEWAY_REQUEST_URL_ATTR);\r\n        log.info(&quot;Incoming request &quot; + originalUri + &quot; is routed to id: &quot; + route.getId()\r\n            + &quot;, uri:&quot; + routeUri);\r\n        return chain.filter(exchange);\r\n    }\r\n}\r\n```\r\nIt works perfect with successful request. But when route not found there is no message in log. \r\nAny ideas how I can do that? Thanks!","title":"Spring Cloud Gateway log 404","body":"<p>I need to log incoming requests. So I've added this class to log incoming requests:</p>\n<pre><code>@Slf4j\n@Component\npublic class LoggingFilter implements GlobalFilter {\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        Set&lt;URI&gt; uris = exchange.getAttributeOrDefault(GATEWAY_ORIGINAL_REQUEST_URL_ATTR, Collections.emptySet());\n        String originalUri = (uris.isEmpty()) ? &quot;Unknown&quot; : uris.iterator().next().toString();\n        Route route = exchange.getAttribute(GATEWAY_ROUTE_ATTR);\n        URI routeUri = exchange.getAttribute(GATEWAY_REQUEST_URL_ATTR);\n        log.info(&quot;Incoming request &quot; + originalUri + &quot; is routed to id: &quot; + route.getId()\n            + &quot;, uri:&quot; + routeUri);\n        return chain.filter(exchange);\n    }\n}\n</code></pre>\n<p>It works perfect with successful request. But when route not found there is no message in log.\nAny ideas how I can do that? Thanks!</p>\n"},{"tags":["java","text","draw","centering","graphics2d"],"comments":[{"owner":{"account_id":1773188,"reputation":2439,"user_id":1617550,"accept_rate":50,"display_name":"mwarren"},"score":2,"creation_date":1419946019,"post_id":27706197,"comment_id":43824467,"body_markdown":"Looks like a duplicate of this: http://stackoverflow.com/questions/258486/calculate-the-display-width-of-a-string-in-java","body":"Looks like a duplicate of this: <a href=\"http://stackoverflow.com/questions/258486/calculate-the-display-width-of-a-string-in-java\" title=\"calculate the display width of a string in java\">stackoverflow.com/questions/258486/&hellip;</a>"},{"owner":{"account_id":17132,"reputation":7519,"user_id":38031,"accept_rate":78,"display_name":"richj"},"score":0,"creation_date":1419953153,"post_id":27706197,"comment_id":43827982,"body_markdown":"This is something that Swing makes you work for. Try this answer: http://stackoverflow.com/questions/23729944/java-how-to-visually-center-a-specific-string-not-just-a-font-in-a-rectangle If you&#39;ve just started writing your game, JavaFX is the most modern graphics toolkit included with the Java platform and might be a better choice than Swing.","body":"This is something that Swing makes you work for. Try this answer: <a href=\"http://stackoverflow.com/questions/23729944/java-how-to-visually-center-a-specific-string-not-just-a-font-in-a-rectangle\" title=\"java how to visually center a specific string not just a font in a rectangle\">stackoverflow.com/questions/23729944/&hellip;</a> If you&#39;ve just started writing your game, JavaFX is the most modern graphics toolkit included with the Java platform and might be a better choice than Swing."},{"owner":{"account_id":5214978,"reputation":3032,"user_id":4170242,"accept_rate":95,"display_name":"Daniel Kvist"},"score":0,"creation_date":1419965816,"post_id":27706197,"comment_id":43833819,"body_markdown":"@mwarren It is partly a duplicate, but there is one thing however. I wonder how I can get the height of the text, because `FontMetrics.getHeight() / 2` doesn&#39;t give me half of the &quot;real&quot; height of the text...\n@richj I&#39;ve done pretty much already, so I think that I won&#39;t switch to JavaFX. That will be for another game.","body":"@mwarren It is partly a duplicate, but there is one thing however. I wonder how I can get the height of the text, because <code>FontMetrics.getHeight() &#47; 2</code> doesn&#39;t give me half of the &quot;real&quot; height of the text... @richj I&#39;ve done pretty much already, so I think that I won&#39;t switch to JavaFX. That will be for another game."},{"owner":{"account_id":3101468,"reputation":3914,"user_id":2625478,"accept_rate":82,"display_name":"caprica"},"score":0,"creation_date":1419966177,"post_id":27706197,"comment_id":43833985,"body_markdown":"fontMetrics.getAscent() might be a bit better for your purposes. It does not include the &quot;leading&quot;.","body":"fontMetrics.getAscent() might be a bit better for your purposes. It does not include the &quot;leading&quot;."}],"answers":[{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1419966529,"creation_date":1419966529,"answer_id":27711103,"question_id":27706197,"body_markdown":"When I have to draw text, I usually need to center the text in a bounding rectangle.\r\n\r\n    /**\r\n     * This method centers a &lt;code&gt;String&lt;/code&gt; in \r\n     * a bounding &lt;code&gt;Rectangle&lt;/code&gt;.\r\n     * @param g - The &lt;code&gt;Graphics&lt;/code&gt; instance.\r\n     * @param r - The bounding &lt;code&gt;Rectangle&lt;/code&gt;.\r\n     * @param s - The &lt;code&gt;String&lt;/code&gt; to center in the\r\n     * bounding rectangle.\r\n     * @param font - The display font of the &lt;code&gt;String&lt;/code&gt;\r\n     * \r\n     * @see java.awt.Graphics\r\n     * @see java.awt.Rectangle\r\n     * @see java.lang.String\r\n     */\r\n    public void centerString(Graphics g, Rectangle r, String s, \r\n            Font font) {\r\n        FontRenderContext frc = \r\n                new FontRenderContext(null, true, true);\r\n         \r\n        Rectangle2D r2D = font.getStringBounds(s, frc);\r\n        int rWidth = (int) Math.round(r2D.getWidth());\r\n        int rHeight = (int) Math.round(r2D.getHeight());\r\n        int rX = (int) Math.round(r2D.getX());\r\n        int rY = (int) Math.round(r2D.getY());\r\n         \r\n        int a = (r.width / 2) - (rWidth / 2) - rX;\r\n        int b = (r.height / 2) - (rHeight / 2) - rY;\r\n         \r\n        g.setFont(font);\r\n        g.drawString(s, r.x + a, r.y + b);\r\n    }","title":"How can I center Graphics.drawString() in Java?","body":"<p>When I have to draw text, I usually need to center the text in a bounding rectangle.</p>\n\n<pre><code>/**\n * This method centers a &lt;code&gt;String&lt;/code&gt; in \n * a bounding &lt;code&gt;Rectangle&lt;/code&gt;.\n * @param g - The &lt;code&gt;Graphics&lt;/code&gt; instance.\n * @param r - The bounding &lt;code&gt;Rectangle&lt;/code&gt;.\n * @param s - The &lt;code&gt;String&lt;/code&gt; to center in the\n * bounding rectangle.\n * @param font - The display font of the &lt;code&gt;String&lt;/code&gt;\n * \n * @see java.awt.Graphics\n * @see java.awt.Rectangle\n * @see java.lang.String\n */\npublic void centerString(Graphics g, Rectangle r, String s, \n        Font font) {\n    FontRenderContext frc = \n            new FontRenderContext(null, true, true);\n\n    Rectangle2D r2D = font.getStringBounds(s, frc);\n    int rWidth = (int) Math.round(r2D.getWidth());\n    int rHeight = (int) Math.round(r2D.getHeight());\n    int rX = (int) Math.round(r2D.getX());\n    int rY = (int) Math.round(r2D.getY());\n\n    int a = (r.width / 2) - (rWidth / 2) - rX;\n    int b = (r.height / 2) - (rHeight / 2) - rY;\n\n    g.setFont(font);\n    g.drawString(s, r.x + a, r.y + b);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5214978,"reputation":3032,"user_id":4170242,"accept_rate":95,"display_name":"Daniel Kvist"},"down_vote_count":0,"up_vote_count":99,"is_accepted":true,"score":99,"last_activity_date":1491853034,"creation_date":1420192849,"answer_id":27740330,"question_id":27706197,"body_markdown":"I used the answer on [this question][1].\r\n\r\nThe code I used looks something like this:\r\n\r\n    /**\r\n     * Draw a String centered in the middle of a Rectangle.\r\n     *\r\n     * @param g The Graphics instance.\r\n     * @param text The String to draw.\r\n     * @param rect The Rectangle to center the text in.\r\n     */\r\n    public void drawCenteredString(Graphics g, String text, Rectangle rect, Font font) {\r\n        // Get the FontMetrics\r\n        FontMetrics metrics = g.getFontMetrics(font);\r\n        // Determine the X coordinate for the text\r\n        int x = rect.x + (rect.width - metrics.stringWidth(text)) / 2;\r\n        // Determine the Y coordinate for the text (note we add the ascent, as in java 2d 0 is top of the screen)\r\n        int y = rect.y + ((rect.height - metrics.getHeight()) / 2) + metrics.getAscent();\r\n        // Set the font\r\n        g.setFont(font);\r\n        // Draw the String\r\n        g.drawString(text, x, y);\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/23729944/java-how-to-visually-center-a-specific-string-not-just-a-font-in-a-rectangle","title":"How can I center Graphics.drawString() in Java?","body":"<p>I used the answer on <a href=\"https://stackoverflow.com/questions/23729944/java-how-to-visually-center-a-specific-string-not-just-a-font-in-a-rectangle\">this question</a>.</p>\n\n<p>The code I used looks something like this:</p>\n\n<pre><code>/**\n * Draw a String centered in the middle of a Rectangle.\n *\n * @param g The Graphics instance.\n * @param text The String to draw.\n * @param rect The Rectangle to center the text in.\n */\npublic void drawCenteredString(Graphics g, String text, Rectangle rect, Font font) {\n    // Get the FontMetrics\n    FontMetrics metrics = g.getFontMetrics(font);\n    // Determine the X coordinate for the text\n    int x = rect.x + (rect.width - metrics.stringWidth(text)) / 2;\n    // Determine the Y coordinate for the text (note we add the ascent, as in java 2d 0 is top of the screen)\n    int y = rect.y + ((rect.height - metrics.getHeight()) / 2) + metrics.getAscent();\n    // Set the font\n    g.setFont(font);\n    // Draw the String\n    g.drawString(text, x, y);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12156027,"reputation":13933,"user_id":8874958,"display_name":"Kishan Solanki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592214235,"creation_date":1592214235,"answer_id":62385508,"question_id":27706197,"body_markdown":"I did create a function to keep the text in center of the image\r\n\r\n        private static void setTextCenter(Graphics2D graphics2DImage, String string,\r\n                                            BufferedImage bgImage) {\r\n        int stringWidthLength = (int)\r\n                graphics2DImage.getFontMetrics().getStringBounds(string, graphics2DImage).getWidth();\r\n        int stringHeightLength = (int)\r\n                graphics2DImage.getFontMetrics().getStringBounds(string, graphics2DImage).getHeight();\r\n\r\n        int horizontalCenter = bgImage.getWidth() / 2 - stringWidthLength / 2;\r\n        int verticalCenter = bgImage.getHeight() / 2 - stringHeightLength / 2;\r\n        graphics2DImage.drawString(string, horizontalCenter, verticalCenter);\r\n    }\r\n\r\n\r\n\r\nwhere, `graphics2DImage` is.\r\n\r\n    Graphics2D graphics2DImage = bgImage.createGraphics();\r\n    graphics2DImage.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\r\n                RenderingHints.VALUE_ANTIALIAS_ON);\r\n\r\n        graphics2DImage.drawImage(bgImage, 0, 0, null);","title":"How can I center Graphics.drawString() in Java?","body":"<p>I did create a function to keep the text in center of the image</p>\n\n<pre><code>    private static void setTextCenter(Graphics2D graphics2DImage, String string,\n                                        BufferedImage bgImage) {\n    int stringWidthLength = (int)\n            graphics2DImage.getFontMetrics().getStringBounds(string, graphics2DImage).getWidth();\n    int stringHeightLength = (int)\n            graphics2DImage.getFontMetrics().getStringBounds(string, graphics2DImage).getHeight();\n\n    int horizontalCenter = bgImage.getWidth() / 2 - stringWidthLength / 2;\n    int verticalCenter = bgImage.getHeight() / 2 - stringHeightLength / 2;\n    graphics2DImage.drawString(string, horizontalCenter, verticalCenter);\n}\n</code></pre>\n\n<p>where, <code>graphics2DImage</code> is.</p>\n\n<pre><code>Graphics2D graphics2DImage = bgImage.createGraphics();\ngraphics2DImage.setRenderingHint(RenderingHints.KEY_ANTIALIASING,\n            RenderingHints.VALUE_ANTIALIAS_ON);\n\n    graphics2DImage.drawImage(bgImage, 0, 0, null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11721423,"reputation":1,"user_id":9464865,"display_name":"Cleverson Lira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658687436,"creation_date":1658687200,"answer_id":73100996,"question_id":27706197,"body_markdown":"    var text = &quot;trying something&quot;;\r\n    graphics.setFont(font);    \r\n    var textWidth = graphics.getFontMetrics().stringWidth(text);\r\n    var horizontalPosition = ((yourBufferedImage.getWidth())/2) - (textWidth/2);\r\n    var verticalPosition = yourBufferedImage.getHeight()/2;\r\n    graphics.drawString(text, horizontalPosition, verticalPosition);","title":"How can I center Graphics.drawString() in Java?","body":"<pre><code>var text = &quot;trying something&quot;;\ngraphics.setFont(font);    \nvar textWidth = graphics.getFontMetrics().stringWidth(text);\nvar horizontalPosition = ((yourBufferedImage.getWidth())/2) - (textWidth/2);\nvar verticalPosition = yourBufferedImage.getHeight()/2;\ngraphics.drawString(text, horizontalPosition, verticalPosition);\n</code></pre>\n"}],"owner":{"account_id":5214978,"reputation":3032,"user_id":4170242,"accept_rate":95,"display_name":"Daniel Kvist"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70543,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":27740330,"answer_count":4,"score":43,"last_activity_date":1658687436,"creation_date":1419945340,"question_id":27706197,"body_markdown":"I&#39;m currently working on the menu system for my *Java* game, and I wonder how I can center the text from `Graphics.drawString()`, so that if I want to draw a text whose center point is at `X: 50` and `Y: 50`, and the text is `30` pixels wide and `10` pixels tall, the text will start at `X: 35` and `Y: 45`.\r\n\r\nCan I determine the width of the text before I draw it?  \r\nThen it would be easy maths.\r\n\r\n**EDIT:** I also wonder if I can get the height of the text, so that I can center it vertically too.\r\n\r\nAny help is appreciated!","title":"How can I center Graphics.drawString() in Java?","body":"<p>I'm currently working on the menu system for my <em>Java</em> game, and I wonder how I can center the text from <code>Graphics.drawString()</code>, so that if I want to draw a text whose center point is at <code>X: 50</code> and <code>Y: 50</code>, and the text is <code>30</code> pixels wide and <code>10</code> pixels tall, the text will start at <code>X: 35</code> and <code>Y: 45</code>.</p>\n\n<p>Can I determine the width of the text before I draw it?<br>\nThen it would be easy maths.</p>\n\n<p><strong>EDIT:</strong> I also wonder if I can get the height of the text, so that I can center it vertically too.</p>\n\n<p>Any help is appreciated!</p>\n"},{"tags":["java","string","algorithm","palindrome"],"comments":[{"owner":{"account_id":7837113,"reputation":8165,"user_id":5924721,"accept_rate":100,"display_name":"Frank Puffer"},"score":0,"creation_date":1464040685,"post_id":37401155,"comment_id":62311095,"body_markdown":"Seems to be a popular question, see http://stackoverflow.com/questions/10577422/create-palindrome-from-existing-string-by-removing-characters?s=3|0.8945","body":"Seems to be a popular question, see <a href=\"http://stackoverflow.com/questions/10577422/create-palindrome-from-existing-string-by-removing-characters?s=3|0.8945\" title=\"create palindrome from existing string by removing characters\">stackoverflow.com/questions/10577422/&hellip;</a>"},{"owner":{"account_id":1065971,"reputation":1683,"user_id":1066531,"accept_rate":57,"display_name":"Zymus"},"score":0,"creation_date":1464040887,"post_id":37401155,"comment_id":62311156,"body_markdown":"As a slight optimization, you only need to reverse half of the string.","body":"As a slight optimization, you only need to reverse half of the string."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1464041064,"post_id":37401155,"comment_id":62311218,"body_markdown":"If the code is working, it might be better suited for [Code Review](http://codereview.stackexchange.com/).","body":"If the code is working, it might be better suited for <a href=\"http://codereview.stackexchange.com/\">Code Review</a>."},{"owner":{"account_id":1187908,"reputation":8617,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1464041980,"post_id":37401155,"comment_id":62311497,"body_markdown":"The main inefficiency is in editing the new string with `.insert()`.  There is a much better way to solve it.  Take the original string. Create another string to reverse it.   Walk the string (no editing required) starting at the first character, looking for exact character to character matches, allowing exactly one character removal.  If you get halfway through the string with only one error you&#39;re done.","body":"The main inefficiency is in editing the new string with <code>.insert()</code>.  There is a much better way to solve it.  Take the original string. Create another string to reverse it.   Walk the string (no editing required) starting at the first character, looking for exact character to character matches, allowing exactly one character removal.  If you get halfway through the string with only one error you&#39;re done."}],"answers":[{"tags":[],"owner":{"display_name":"user4668606"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1464085100,"creation_date":1464042411,"answer_id":37401538,"question_id":37401155,"body_markdown":"Well, there&#39;s of course the naive solution running in `O(n ^ 2)` by trying each possibility to remove one char.  \r\n\r\nBut we can certainly do better:  \r\nWe can define a palindrome recursively:  \r\n\r\n    palindrome = x.palindrome.x | x | x.x , where x is an arbitrary token\r\n\r\nSo how does that help us? Pretty simple: we can derive a rules that allow checking whether the string is palindromic in `O(n)`.  \r\n  \r\nA palindrome consists of a `char c`, followed by a string that must be empty or palindromic, followed by another `c`, if it&#39;s longer than 1 char. If it&#39;s of length 1, it&#39;s automatically palindromic.\r\n\r\nThus, the last character must be equal to the first, the second to the second to the last, and so on. So basically:\r\n\r\n    boolean isPalindrome(String s){\r\n        for(int i = 0 ; i &lt; s.length() / 2 ; i++)\r\n            if(s.charAt(i) != s.charAt(s.length() - i - 1))\r\n                return false;\r\n\r\n        return true;\r\n    }\r\n\r\nWe have to alter this rule a bit, since once we may remove a single character. This introduces splitting the whole problem into two parts, as we can see from a definition:\r\n\r\n    palindrome_1 = s.x.palindrome.reverse(s) | s.palindrome.x.reverse(s) | palindrome\r\n\r\nAs we can easily see, this contains the original palindrome-definition, but in addition allows introduction of one additional char `x`.\r\n\r\n    static boolean isPalindrome_1(String s){\r\n        for(int i = 0 ; i &lt; s.length() / 2 ; i++)\r\n\t        if(s.charAt(i) != s.charAt(s.length() - i - 1))\r\n\t            return isPalindrome(s , i + 1 , s.length() - i - 1) ||\r\n\t\t                isPalindrome(s , i , s.length() - i - 2);\r\n\r\n         return true;\r\n    }\r\n\r\n    static boolean isPalindrome(String s , int lower , int upper){\r\n        while(lower &lt; upper){\r\n\t        if(s.charAt(lower) != s.charAt(upper))\r\n\t            return false;\r\n\r\n\t        lower++;\r\n\t        upper--;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\nAn explanation/or at least an attempt to explain this:  \r\nThis piece of code:\r\n\r\n    if(s.charAt(i) != s.charAt(s.length() - i - 1))\r\n        return isPalindrome(s , i + 1 , s.length() - i - 1) ||\r\n            isPalindrome(s , i , s.length() - i - 2);\r\n\r\nIs required, if the definition of `palindrome` doesn&#39;t apply to our input-string. In that case, we have to check two possibilities, how the code was built:\r\n\r\n    s.x.palindrome.reverse(s)\r\n    s.palindrome.x.reverse(s)\r\n\r\nIf the definition of `palindrome` doesn&#39;t apply, we have reached a point, were we have to ommit either the character of at the start of the remaining string (`x.palindrome`) or the end of the remaining string (`palindrome.x`) and see, if the rest matches the definition of a palindrome. This is done by calling `isPalindrome(...)` with two different substrings, that are cut by one character at either the start or the end of the remaining string.\r\n\r\nAn few examples of how this code works:\r\n\r\n    A B C D E F E D C B A\r\n    |                   | portion that runs inside isPalindrome_1\r\n\r\n    A B D E F E D C B A\r\n    | |             | |  portion that can be checked inside isPalindrome_1\r\n        |       |        isPalindrome(s , i , s.length() - i - 2)\r\n          |       |      isPalindrome(s , i + 1 , s.length() - i - 1)\r\n\r\nAs we can see in the second example, the code searched for the first pair of chars that isn&#39;t equal. At this point, we have two substrings to search further, which each ommit one character, either at the beginning or the end of the string.\r\n\r\nEfficiency:  \r\nThis code runs in-place - there are never made any copies of the input-string. Runtime is `O(n)` (`O(2 * n)` to be precise). Building a faster solution won&#39;t be possible - at least until we get quantum computers ;)","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<p>Well, there's of course the naive solution running in <code>O(n ^ 2)</code> by trying each possibility to remove one char.  </p>\n\n<p>But we can certainly do better:<br>\nWe can define a palindrome recursively:  </p>\n\n<pre><code>palindrome = x.palindrome.x | x | x.x , where x is an arbitrary token\n</code></pre>\n\n<p>So how does that help us? Pretty simple: we can derive a rules that allow checking whether the string is palindromic in <code>O(n)</code>.  </p>\n\n<p>A palindrome consists of a <code>char c</code>, followed by a string that must be empty or palindromic, followed by another <code>c</code>, if it's longer than 1 char. If it's of length 1, it's automatically palindromic.</p>\n\n<p>Thus, the last character must be equal to the first, the second to the second to the last, and so on. So basically:</p>\n\n<pre><code>boolean isPalindrome(String s){\n    for(int i = 0 ; i &lt; s.length() / 2 ; i++)\n        if(s.charAt(i) != s.charAt(s.length() - i - 1))\n            return false;\n\n    return true;\n}\n</code></pre>\n\n<p>We have to alter this rule a bit, since once we may remove a single character. This introduces splitting the whole problem into two parts, as we can see from a definition:</p>\n\n<pre><code>palindrome_1 = s.x.palindrome.reverse(s) | s.palindrome.x.reverse(s) | palindrome\n</code></pre>\n\n<p>As we can easily see, this contains the original palindrome-definition, but in addition allows introduction of one additional char <code>x</code>.</p>\n\n<pre><code>static boolean isPalindrome_1(String s){\n    for(int i = 0 ; i &lt; s.length() / 2 ; i++)\n        if(s.charAt(i) != s.charAt(s.length() - i - 1))\n            return isPalindrome(s , i + 1 , s.length() - i - 1) ||\n                    isPalindrome(s , i , s.length() - i - 2);\n\n     return true;\n}\n\nstatic boolean isPalindrome(String s , int lower , int upper){\n    while(lower &lt; upper){\n        if(s.charAt(lower) != s.charAt(upper))\n            return false;\n\n        lower++;\n        upper--;\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>An explanation/or at least an attempt to explain this:<br>\nThis piece of code:</p>\n\n<pre><code>if(s.charAt(i) != s.charAt(s.length() - i - 1))\n    return isPalindrome(s , i + 1 , s.length() - i - 1) ||\n        isPalindrome(s , i , s.length() - i - 2);\n</code></pre>\n\n<p>Is required, if the definition of <code>palindrome</code> doesn't apply to our input-string. In that case, we have to check two possibilities, how the code was built:</p>\n\n<pre><code>s.x.palindrome.reverse(s)\ns.palindrome.x.reverse(s)\n</code></pre>\n\n<p>If the definition of <code>palindrome</code> doesn't apply, we have reached a point, were we have to ommit either the character of at the start of the remaining string (<code>x.palindrome</code>) or the end of the remaining string (<code>palindrome.x</code>) and see, if the rest matches the definition of a palindrome. This is done by calling <code>isPalindrome(...)</code> with two different substrings, that are cut by one character at either the start or the end of the remaining string.</p>\n\n<p>An few examples of how this code works:</p>\n\n<pre><code>A B C D E F E D C B A\n|                   | portion that runs inside isPalindrome_1\n\nA B D E F E D C B A\n| |             | |  portion that can be checked inside isPalindrome_1\n    |       |        isPalindrome(s , i , s.length() - i - 2)\n      |       |      isPalindrome(s , i + 1 , s.length() - i - 1)\n</code></pre>\n\n<p>As we can see in the second example, the code searched for the first pair of chars that isn't equal. At this point, we have two substrings to search further, which each ommit one character, either at the beginning or the end of the string.</p>\n\n<p>Efficiency:<br>\nThis code runs in-place - there are never made any copies of the input-string. Runtime is <code>O(n)</code> (<code>O(2 * n)</code> to be precise). Building a faster solution won't be possible - at least until we get quantum computers ;)</p>\n"},{"tags":[],"owner":{"account_id":8369347,"reputation":738,"user_id":6284935,"display_name":"Lee"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464042580,"creation_date":1464042580,"answer_id":37401581,"question_id":37401155,"body_markdown":"Only need to compare the first half to the second half.  Don&#39;t waste time reversing the whole String either.\r\n\r\n    private boolean isPalindrome(String string) {\r\n        char[] values = string.toCharArray();\r\n \r\n        for (int i = 0; i &lt; values.length / 2; i++) {\r\n           if (values[i] != values[values.length - 1 - i])\r\n               return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<p>Only need to compare the first half to the second half.  Don't waste time reversing the whole String either.</p>\n\n<pre><code>private boolean isPalindrome(String string) {\n    char[] values = string.toCharArray();\n\n    for (int i = 0; i &lt; values.length / 2; i++) {\n       if (values[i] != values[values.length - 1 - i])\n           return false;\n    }\n\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464074779,"creation_date":1464042659,"answer_id":37401589,"question_id":37401155,"body_markdown":"Hint 1: since this is an exercise, posting solutions is inappropriate.  (It detracts from the learning experience of doing the exercise yourself.)\r\n\r\nHint 2:  The following operations are all `O(N)` for an `N` character String or StringBuilder:\r\n\r\n  1.  Adding or removing a character from a StringBuilder\r\n  2.  Creating a new StringBuilder from an existing StringBuilder\r\n  3.  Reversing a StringBuilder\r\n  4.  Creating a String from a StringBuilder (`toString()`)\r\n  5.  Comparing two equal or &quot;almost equal&quot; String objects.\r\n\r\n(In most cases you copy or compare `N` characters.  For insertion and deletion, you copy on average `0.5 N` characters assuming that the buffer does not need to grow, but that is still `O(N)`.  For `equals` ... it is complicated, but the worst-case is clearly `O(N)`.)\r\n\r\nSo a *fast* palindrome tester for large strings needs to avoid these operations.\r\n\r\nHint 3: you can treat the string as an array of characters, either by converting it into a `char[]` or using `charAt(...)`.\r\n\r\nHint 4: you don&#39;t have to physically remove the char from the string.  You can just get your algorithm to pretend it isn&#39;t there.\r\n\r\n\r\n\r\n","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<p>Hint 1: since this is an exercise, posting solutions is inappropriate.  (It detracts from the learning experience of doing the exercise yourself.)</p>\n\n<p>Hint 2:  The following operations are all <code>O(N)</code> for an <code>N</code> character String or StringBuilder:</p>\n\n<ol>\n<li>Adding or removing a character from a StringBuilder</li>\n<li>Creating a new StringBuilder from an existing StringBuilder</li>\n<li>Reversing a StringBuilder</li>\n<li>Creating a String from a StringBuilder (<code>toString()</code>)</li>\n<li>Comparing two equal or \"almost equal\" String objects.</li>\n</ol>\n\n<p>(In most cases you copy or compare <code>N</code> characters.  For insertion and deletion, you copy on average <code>0.5 N</code> characters assuming that the buffer does not need to grow, but that is still <code>O(N)</code>.  For <code>equals</code> ... it is complicated, but the worst-case is clearly <code>O(N)</code>.)</p>\n\n<p>So a <em>fast</em> palindrome tester for large strings needs to avoid these operations.</p>\n\n<p>Hint 3: you can treat the string as an array of characters, either by converting it into a <code>char[]</code> or using <code>charAt(...)</code>.</p>\n\n<p>Hint 4: you don't have to physically remove the char from the string.  You can just get your algorithm to pretend it isn't there.</p>\n"},{"tags":[],"owner":{"account_id":121794,"reputation":739,"user_id":315140,"accept_rate":67,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591344432,"creation_date":1591344432,"answer_id":62210825,"question_id":37401155,"body_markdown":"We can solve this using LCS(Longest Common Sub-sequence).\r\nLCS tells us the length of the longest sub-sequence in two strings.\r\n\r\n    boolean isPalindromAfterRemovingOneChar(String s) {\r\n        int lengthOfLCS = lcs(s, s.reverse(), s.length());\r\n        return (s.length()- lengthOfLCS) == 1;\r\n    } ","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<p>We can solve this using LCS(Longest Common Sub-sequence).\nLCS tells us the length of the longest sub-sequence in two strings.</p>\n\n<pre><code>boolean isPalindromAfterRemovingOneChar(String s) {\n    int lengthOfLCS = lcs(s, s.reverse(), s.length());\n    return (s.length()- lengthOfLCS) == 1;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10258819,"reputation":1315,"user_id":7570861,"display_name":"Soban Arshad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658687151,"creation_date":1658687151,"answer_id":73100993,"question_id":37401155,"body_markdown":"    function test(s) {\r\n    const check = isPalindrome(s)\r\n    if (!check) {\r\n        const arr = s.split(&#39;&#39;)\r\n        const arrCheck = []\r\n        arr.forEach((element, i) =&gt; {\r\n            if (element !== arr[arr.length - i - 1]) {\r\n                const news = Array.from(arr)\r\n                console.log(arr, news.splice(i, 1))\r\n                isPalindrome(news.join(&#39;&#39;))\r\n            }\r\n        });\r\n        console.log(&#39;arrCheck&#39;, arrCheck)\r\n    }\r\n\r\n\r\n    function isPalindrome(s) {\r\n    var reversedString = s.split(&quot;&quot;).reverse().join(&quot;&quot;);\r\n    if (s === reversedString) {\r\n        console.log(&#39;this string is palindrome&#39;, s)\r\n        return true\r\n    } else {\r\n        console.log(&#39;no&#39;)\r\n        return false\r\n    }\r\n\r\n    test(&#39;aaab&#39;)","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<pre><code>function test(s) {\nconst check = isPalindrome(s)\nif (!check) {\n    const arr = s.split('')\n    const arrCheck = []\n    arr.forEach((element, i) =&gt; {\n        if (element !== arr[arr.length - i - 1]) {\n            const news = Array.from(arr)\n            console.log(arr, news.splice(i, 1))\n            isPalindrome(news.join(''))\n        }\n    });\n    console.log('arrCheck', arrCheck)\n}\n\n\nfunction isPalindrome(s) {\nvar reversedString = s.split(&quot;&quot;).reverse().join(&quot;&quot;);\nif (s === reversedString) {\n    console.log('this string is palindrome', s)\n    return true\n} else {\n    console.log('no')\n    return false\n}\n\ntest('aaab')\n</code></pre>\n"}],"owner":{"account_id":8098163,"reputation":132,"user_id":6101992,"display_name":"Rocky"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12575,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":37401538,"answer_count":5,"score":3,"last_activity_date":1658687151,"creation_date":1464040318,"question_id":37401155,"body_markdown":"I cant seem to find a proper solution to an exercise. The exercise asks to create a method that returns true if a string can be a palindrome by removing one character. I have a solution that works but fails tests of large (100,000 character) strings because its exceeding the time limit of 1 second. Can somebody point me in the right direction?\r\n\r\nI realize my approach is brute force and I&#39;m sure there&#39;s a better way to solve it. I&#39;m assuming my problem lies with the iteration.\r\n\r\n    public class Main {\r\n\r\n        public static boolean makePalindrome(String mjono) {\r\n\r\n            StringBuilder sb = new StringBuilder(mjono);\r\n        \r\n        \r\n            for (int i = 0; i &lt; mjono.length(); i++) {\r\n                sb.deleteCharAt(i);\r\n            \r\n                if(isPalindrome(sb.toString())){\r\n                    return true;\r\n                } else {\r\n                    sb.insert(i, mjono.charAt(i));\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private static boolean isPalindrome(String string) {\r\n            return string.equals(new StringBuilder(string).reverse().toString());\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(makePalindrome(&quot;ABCBXA&quot;));\r\n            System.out.println(makePalindrome(&quot;ABCBAX&quot;));\r\n            System.out.println(makePalindrome(&quot;ABCXBA&quot;));\r\n            System.out.println(makePalindrome(&quot;ABCDE&quot;));\r\n            System.out.println(makePalindrome(&quot;BAAAAC&quot;));\r\n        }\r\n    }\r\n\r\nThese are the tests it fails:\r\n\r\n    @Test(timeout=1000)\r\n    public void suuri2() {\r\n        int n = 100000;\r\n        char[] t = new char[n];\r\n        for (int i = 0; i &lt; n; i++) t[i] = &#39;A&#39;;\r\n        t[12345] = &#39;B&#39;;\r\n        testaaSuuri(new String(t), true);\r\n    }\r\n\r\n    @Test(timeout=1000)\r\n    public void suuri3() {\r\n        int n = 100000;\r\n        char[] t = new char[n];\r\n        for (int i = 0; i &lt; n; i++) t[i] = &#39;A&#39;;\r\n        t[12345] = &#39;B&#39;;\r\n        t[54321] = &#39;C&#39;;\r\n        testaaSuuri(new String(t), false);\r\n    }\r\n\r\nThanks in advance.","title":"Check if string is a palindrome after removing one character. My working solution is too slow","body":"<p>I cant seem to find a proper solution to an exercise. The exercise asks to create a method that returns true if a string can be a palindrome by removing one character. I have a solution that works but fails tests of large (100,000 character) strings because its exceeding the time limit of 1 second. Can somebody point me in the right direction?</p>\n\n<p>I realize my approach is brute force and I'm sure there's a better way to solve it. I'm assuming my problem lies with the iteration.</p>\n\n<pre><code>public class Main {\n\n    public static boolean makePalindrome(String mjono) {\n\n        StringBuilder sb = new StringBuilder(mjono);\n\n\n        for (int i = 0; i &lt; mjono.length(); i++) {\n            sb.deleteCharAt(i);\n\n            if(isPalindrome(sb.toString())){\n                return true;\n            } else {\n                sb.insert(i, mjono.charAt(i));\n            }\n        }\n        return false;\n    }\n\n    private static boolean isPalindrome(String string) {\n        return string.equals(new StringBuilder(string).reverse().toString());\n    }\n\n    public static void main(String[] args) {\n        System.out.println(makePalindrome(\"ABCBXA\"));\n        System.out.println(makePalindrome(\"ABCBAX\"));\n        System.out.println(makePalindrome(\"ABCXBA\"));\n        System.out.println(makePalindrome(\"ABCDE\"));\n        System.out.println(makePalindrome(\"BAAAAC\"));\n    }\n}\n</code></pre>\n\n<p>These are the tests it fails:</p>\n\n<pre><code>@Test(timeout=1000)\npublic void suuri2() {\n    int n = 100000;\n    char[] t = new char[n];\n    for (int i = 0; i &lt; n; i++) t[i] = 'A';\n    t[12345] = 'B';\n    testaaSuuri(new String(t), true);\n}\n\n@Test(timeout=1000)\npublic void suuri3() {\n    int n = 100000;\n    char[] t = new char[n];\n    for (int i = 0; i &lt; n; i++) t[i] = 'A';\n    t[12345] = 'B';\n    t[54321] = 'C';\n    testaaSuuri(new String(t), false);\n}\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","log4j2","slf4j","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":4620400,"reputation":1209,"user_id":3745667,"display_name":"fedup"},"score":0,"creation_date":1568756469,"post_id":57982214,"comment_id":102373881,"body_markdown":"Does your application use threads?  And are you logging messages within the new threads?  Or is all logging done within the main thread?","body":"Does your application use threads?  And are you logging messages within the new threads?  Or is all logging done within the main thread?"},{"owner":{"account_id":6421976,"reputation":180,"user_id":4978460,"accept_rate":40,"display_name":"futevolei"},"score":0,"creation_date":1568756751,"post_id":57982214,"comment_id":102373955,"body_markdown":"yes, it uses threads.  from the main entry point we have an @async method and it is only what happens in this method that we want to modify the logging as all the logging inside has its own appender","body":"yes, it uses threads.  from the main entry point we have an @async method and it is only what happens in this method that we want to modify the logging as all the logging inside has its own appender"}],"answers":[{"tags":[],"owner":{"account_id":4620400,"reputation":1209,"user_id":3745667,"display_name":"fedup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568756868,"creation_date":1568756868,"answer_id":57982479,"question_id":57982214,"body_markdown":"If you want to log within spawned threads you need to copy the MDC thread local context from the current thread into the new one.\r\n\r\nIn the main thread... \r\n\r\n     final Map&lt;String, String&gt; threadContext = MDC.getCopyOfContextMap();\r\n     Runnable mythread = () -&gt; { MDC.setContextMap(threadContext); \r\n                                 yourCode(); };\r\n     new Thread(mythread).start();\r\n   ","title":"Spring-Cloud-Sleuth enable MDC properties in pattern layout to log TraceId","body":"<p>If you want to log within spawned threads you need to copy the MDC thread local context from the current thread into the new one.</p>\n\n<p>In the main thread... </p>\n\n<pre><code> final Map&lt;String, String&gt; threadContext = MDC.getCopyOfContextMap();\n Runnable mythread = () -&gt; { MDC.setContextMap(threadContext); \n                             yourCode(); };\n new Thread(mythread).start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1976110,"reputation":10792,"user_id":1773866,"display_name":"Marcin Grzejszczak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568792971,"creation_date":1568792971,"answer_id":57987624,"question_id":57982214,"body_markdown":"Sleuth uses Brave under the hook. You have to add the `io.zipkin.brave:brave-context-log4j2` dependency to your classpath. Please check out Brave&#39;s documentation for more information https://github.com/openzipkin/brave/tree/master/context/log4j2 I&#39;ll copy it here for your convenience\r\n\r\n&gt; This adds trace and span IDs to the Log4J 2 Thread Context so that you\r\n&gt; can search or aggregate logs accordingly.\r\n&gt; \r\n&gt; To enable this, configure brave.Tracing with\r\n&gt; ThreadContextScopeDecorator like so:\r\n\r\nJust create a bean of `ThreadContextScopeDecorator` type and Sleuth will pick it up\r\n\r\n    @Bean\r\n    ScopeDecorator threadContextScopeDecorator() {\r\n    return new ThreadContextScopeDecorator();\r\n    }\r\n\r\n\r\n","title":"Spring-Cloud-Sleuth enable MDC properties in pattern layout to log TraceId","body":"<p>Sleuth uses Brave under the hook. You have to add the <code>io.zipkin.brave:brave-context-log4j2</code> dependency to your classpath. Please check out Brave's documentation for more information <a href=\"https://github.com/openzipkin/brave/tree/master/context/log4j2\" rel=\"nofollow noreferrer\">https://github.com/openzipkin/brave/tree/master/context/log4j2</a> I'll copy it here for your convenience</p>\n\n<blockquote>\n  <p>This adds trace and span IDs to the Log4J 2 Thread Context so that you\n  can search or aggregate logs accordingly.</p>\n  \n  <p>To enable this, configure brave.Tracing with\n  ThreadContextScopeDecorator like so:</p>\n</blockquote>\n\n<p>Just create a bean of <code>ThreadContextScopeDecorator</code> type and Sleuth will pick it up</p>\n\n<pre><code>@Bean\nScopeDecorator threadContextScopeDecorator() {\nreturn new ThreadContextScopeDecorator();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12013090,"reputation":288,"user_id":8789080,"display_name":"Mostafa Hassan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658686596,"creation_date":1658686596,"answer_id":73100947,"question_id":57982214,"body_markdown":"All you need to do is the following:\r\n\r\n - add io.zipkin.brave:brave-context-log4j2 dependency\r\n - Add org.springframework.boot:spring-boot-starter-log4j2 dependency\r\n - Add org.springframework.cloud:spring-cloud-starter-sleuth dependency\r\n\r\n - Exclude default spring logging\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n - in your log4j2.xml adjust the pattern layout \r\n\r\n \r\n\r\n       &lt;PatternLayout pattern=&quot;[%d{yyy-MM-dd HH:mm:ss:SSS}] [%X{traceId}, %X{spanId}] {%-5level} - %l - %m%n&quot; /&gt;\r\n\r\n\r\n","title":"Spring-Cloud-Sleuth enable MDC properties in pattern layout to log TraceId","body":"<p>All you need to do is the following:</p>\n<ul>\n<li><p>add io.zipkin.brave:brave-context-log4j2 dependency</p>\n</li>\n<li><p>Add org.springframework.boot:spring-boot-starter-log4j2 dependency</p>\n</li>\n<li><p>Add org.springframework.cloud:spring-cloud-starter-sleuth dependency</p>\n</li>\n<li><p>Exclude default spring logging</p>\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n     &lt;exclusions&gt;\n         &lt;exclusion&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n         &lt;/exclusion&gt;\n     &lt;/exclusions&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>in your log4j2.xml adjust the pattern layout</p>\n<pre><code>&lt;PatternLayout pattern=&quot;[%d{yyy-MM-dd HH:mm:ss:SSS}] [%X{traceId}, %X{spanId}] {%-5level} - %l - %m%n&quot; /&gt;\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":6421976,"reputation":180,"user_id":4978460,"accept_rate":40,"display_name":"futevolei"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5521,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1658686596,"creation_date":1568755257,"question_id":57982214,"body_markdown":"I am not seeing the TraceId or SpanId in our log files after adding the spring-cloud-sleuth dependency.  We use log4j2 and slf4j.  Apparently this works out of the box with logback but not log4j2.  It seems other people have had success using the json layout by adding properties=true in the config file but we use pattern layout and it doesn&#39;t seem that boolean is available.  I have configured the pattern correctly but that doesn&#39;t matter as when I set the debugger in the MDCPatternConverter class, the thread context map is empty.  I can make code changes and directly set MDC values but people downstream from us want us to use this dependency for some reason.  \r\n\r\nAdded log4j-JUL\r\nAdded spring-boot-starter-log4j2\r\n\r\n    &lt;Property name=&quot;STP_PATTERN&quot;&gt;%d{yyyy-MM-dd HH:mm:ss,SSS zzz} %-5p  [%X{X-B3-TraceId} TEST %X{X-B3-SpanId} %t:%c{1}:%x] -%m%n\r\n        &lt;/Property&gt;","title":"Spring-Cloud-Sleuth enable MDC properties in pattern layout to log TraceId","body":"<p>I am not seeing the TraceId or SpanId in our log files after adding the spring-cloud-sleuth dependency.  We use log4j2 and slf4j.  Apparently this works out of the box with logback but not log4j2.  It seems other people have had success using the json layout by adding properties=true in the config file but we use pattern layout and it doesn't seem that boolean is available.  I have configured the pattern correctly but that doesn't matter as when I set the debugger in the MDCPatternConverter class, the thread context map is empty.  I can make code changes and directly set MDC values but people downstream from us want us to use this dependency for some reason.  </p>\n\n<p>Added log4j-JUL\nAdded spring-boot-starter-log4j2</p>\n\n<pre><code>&lt;Property name=\"STP_PATTERN\"&gt;%d{yyyy-MM-dd HH:mm:ss,SSS zzz} %-5p  [%X{X-B3-TraceId} TEST %X{X-B3-SpanId} %t:%c{1}:%x] -%m%n\n    &lt;/Property&gt;\n</code></pre>\n"},{"tags":["java","generics","bounded-wildcard"],"answers":[{"tags":[],"owner":{"account_id":14486057,"reputation":264,"user_id":10463949,"display_name":"rostIvan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658685953,"creation_date":1592088469,"answer_id":62366425,"question_id":62364318,"body_markdown":"The problem with that one is:\r\n[get-put-principle](https://stackoverflow.com/questions/1292109/explanation-of-the-get-put-principle)\r\n\r\n&gt; The Get and Put Principle: use an extends wildcard when you only get\r\n&gt; values out of a structure, use super wildcard when you only put values\r\n&gt; into a structure, and don&#39;t use a wildcard when you both get and put.\r\n\r\n\r\nAccording to that:\r\n\r\n    List&lt;? super Number&gt; list1 = new ArrayList&lt;&gt;();\r\n    list1.add(new Integer(1));  // works\r\n    list1.add(new Double(2.2)); // works\r\n\r\n    List&lt;Number&gt; list2 = new ArrayList&lt;&gt;();\r\n    list2.add(new Integer(1));  // works\r\n    list2.add(new Double(2.2)); // works\r\n\r\n    List&lt;? extends Number&gt; list3 = new ArrayList&lt;&gt;();\r\n    list3.add(null);            // works\r\n    list3.add(new Integer(1));  // doesn&#39;t work\r\n    list3.add(new Double(2.2)); // doesn&#39;t work\r\n\r\nThe same story with your example:\r\n\r\n    map.forEach((key, value) -&gt; l.forEach(emp -&gt; {\r\n        final Number id = key.apply(emp);\r\n        value.accept(e, id);  // compiler error\r\n    }));\r\nWith the wildcard like `? extends Number` the only value can be used here is `null`\r\n\r\n    BiConsumer&lt;Employee, ? extends Number&gt; biConsumer = (emp, num) -&gt; {};\r\n    biConsumer.accept(new Employee(), null); // works","title":"Java Generics bounded wildcards","body":"<p>The problem with that one is:\n<a href=\"https://stackoverflow.com/questions/1292109/explanation-of-the-get-put-principle\">get-put-principle</a></p>\n<blockquote>\n<p>The Get and Put Principle: use an extends wildcard when you only get\nvalues out of a structure, use super wildcard when you only put values\ninto a structure, and don't use a wildcard when you both get and put.</p>\n</blockquote>\n<p>According to that:</p>\n<pre><code>List&lt;? super Number&gt; list1 = new ArrayList&lt;&gt;();\nlist1.add(new Integer(1));  // works\nlist1.add(new Double(2.2)); // works\n\nList&lt;Number&gt; list2 = new ArrayList&lt;&gt;();\nlist2.add(new Integer(1));  // works\nlist2.add(new Double(2.2)); // works\n\nList&lt;? extends Number&gt; list3 = new ArrayList&lt;&gt;();\nlist3.add(null);            // works\nlist3.add(new Integer(1));  // doesn't work\nlist3.add(new Double(2.2)); // doesn't work\n</code></pre>\n<p>The same story with your example:</p>\n<pre><code>map.forEach((key, value) -&gt; l.forEach(emp -&gt; {\n    final Number id = key.apply(emp);\n    value.accept(e, id);  // compiler error\n}));\n</code></pre>\n<p>With the wildcard like <code>? extends Number</code> the only value can be used here is <code>null</code></p>\n<pre><code>BiConsumer&lt;Employee, ? extends Number&gt; biConsumer = (emp, num) -&gt; {};\nbiConsumer.accept(new Employee(), null); // works\n</code></pre>\n"}],"owner":{"account_id":4600259,"reputation":1093,"user_id":3731212,"accept_rate":79,"display_name":"JavaNovice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":362,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658685953,"creation_date":1592074521,"question_id":62364318,"body_markdown":"This is a rather contrived example that I&#39;m using to learn Java streams but I&#39;m stuck with a generic wild card issue, I believe. My code is below. I&#39;m trying to read every Employee object from a list, apply a function to get the id and set it in a new employee object over again. However, the code won&#39;t compile right in the key.apply(emp) method. The error message isn&#39;t particularly useful to debug as it simply says, Required type: capture of ? extends Number Provided: capture of ? extends Number. The required and provided looks to be the same. What am I missing?\r\n   \r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.function.BiConsumer;\r\n    import java.util.function.Function;\r\n    \r\n    public class Employee {\r\n        private int id;\r\n        private String name;\r\n        Map&lt;Function&lt;Employee,? extends Number&gt;, BiConsumer&lt;Employee, ? extends Number&gt;&gt; map = new HashMap&lt;&gt;();\r\n    \r\n        public Employee(String name, int id) {\r\n            this.name = name;\r\n            this.id = id;\r\n        }\r\n    \r\n        public Employee() {\r\n        }\r\n    \r\n        public int getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(int id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public Function&lt;Employee, Integer&gt; func = Employee::getId;\r\n    \r\n        public BiConsumer&lt;Employee, Integer&gt; c = Employee::setId;\r\n    \r\n        public static void main(String[] args) {\r\n            Employee e = new Employee();\r\n            e.m1();\r\n        }\r\n    \r\n        private void m1() {\r\n            List&lt;Employee&gt; l = new ArrayList&lt;&gt;();\r\n            l.add(new Employee(&quot;A&quot;, 100));\r\n            l.add(new Employee(&quot;B&quot;, 100));\r\n            l.add(new Employee(&quot;A&quot;, 101));\r\n            l.add(new Employee(&quot;D&quot;, 102));\r\n            l.add(new Employee(&quot;E&quot;, 103));\r\n            l.add(new Employee(&quot;F&quot;, 104));\r\n            l.add(new Employee(&quot;F&quot;, 102));\r\n            Employee e = new Employee();\r\n            map.put(func, c);\r\n            map.forEach((key, value) -&gt; l.stream()\r\n                    .forEach(emp -&gt; value.accept(e, key.apply(emp)))); \r\n    // key.apply(emp) shows a squigly line as an error.\r\n    //The error is,\r\n    //Required type: capture of ? extends Number \r\n    //Provided: capture of ? extends Number. \r\n        }\r\n    }\r\n\r\n","title":"Java Generics bounded wildcards","body":"<p>This is a rather contrived example that I'm using to learn Java streams but I'm stuck with a generic wild card issue, I believe. My code is below. I'm trying to read every Employee object from a list, apply a function to get the id and set it in a new employee object over again. However, the code won't compile right in the key.apply(emp) method. The error message isn't particularly useful to debug as it simply says, Required type: capture of ? extends Number Provided: capture of ? extends Number. The required and provided looks to be the same. What am I missing?</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.function.BiConsumer;\nimport java.util.function.Function;\n\npublic class Employee {\n    private int id;\n    private String name;\n    Map&lt;Function&lt;Employee,? extends Number&gt;, BiConsumer&lt;Employee, ? extends Number&gt;&gt; map = new HashMap&lt;&gt;();\n\n    public Employee(String name, int id) {\n        this.name = name;\n        this.id = id;\n    }\n\n    public Employee() {\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public Function&lt;Employee, Integer&gt; func = Employee::getId;\n\n    public BiConsumer&lt;Employee, Integer&gt; c = Employee::setId;\n\n    public static void main(String[] args) {\n        Employee e = new Employee();\n        e.m1();\n    }\n\n    private void m1() {\n        List&lt;Employee&gt; l = new ArrayList&lt;&gt;();\n        l.add(new Employee(&quot;A&quot;, 100));\n        l.add(new Employee(&quot;B&quot;, 100));\n        l.add(new Employee(&quot;A&quot;, 101));\n        l.add(new Employee(&quot;D&quot;, 102));\n        l.add(new Employee(&quot;E&quot;, 103));\n        l.add(new Employee(&quot;F&quot;, 104));\n        l.add(new Employee(&quot;F&quot;, 102));\n        Employee e = new Employee();\n        map.put(func, c);\n        map.forEach((key, value) -&gt; l.stream()\n                .forEach(emp -&gt; value.accept(e, key.apply(emp)))); \n// key.apply(emp) shows a squigly line as an error.\n//The error is,\n//Required type: capture of ? extends Number \n//Provided: capture of ? extends Number. \n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","exception","java-stream"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1658594875,"post_id":73092536,"comment_id":129092594,"body_markdown":"I do not understand the question. What is the problem with the current approach of using `...orElseThrow(...)`? We normally use `Stream`s if we have multiple entries, but `findByEmail(...)` seems to return an `Optional` (i.e. 0 or 1 entries), so this is the &quot;correct&quot; approach.","body":"I do not understand the question. What is the problem with the current approach of using <code>...orElseThrow(...)</code>? We normally use <code>Stream</code>s if we have multiple entries, but <code>findByEmail(...)</code> seems to return an <code>Optional</code> (i.e. 0 or 1 entries), so this is the &quot;correct&quot; approach."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658595124,"post_id":73092536,"comment_id":129092650,"body_markdown":"I am not asking `findByEmail` method, it is ok of course. I am asking `create` method.","body":"I am not asking <code>findByEmail</code> method, it is ok of course. I am asking <code>create</code> method."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658595163,"post_id":73092536,"comment_id":129092666,"body_markdown":"@Turing85 Why vote down?","body":"@Turing85 Why vote down?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1658595891,"post_id":73092536,"comment_id":129092832,"body_markdown":"No. Your clarification got the problem across. There is, however, one point unclear: are we actually talking about a `null`-value for the list, or an empty list? If we are talking about a `null` value, where can it occur? Can the parameter itself be `null`, or can the value of `CsvHelper.csvToEmployees` be null? For `null` value, the default approach is using `Optional.ofNullable(...).orElseThrow(...)`. There is -as far as I know, no possibility to check if a `Stream` is empty without consuming it. So the depature of converting it to a `List` and checking that seems like a plausible solution.","body":"No. Your clarification got the problem across. There is, however, one point unclear: are we actually talking about a <code>null</code>-value for the list, or an empty list? If we are talking about a <code>null</code> value, where can it occur? Can the parameter itself be <code>null</code>, or can the value of <code>CsvHelper.csvToEmployees</code> be null? For <code>null</code> value, the default approach is using <code>Optional.ofNullable(...).orElseThrow(...)</code>. There is -as far as I know, no possibility to check if a <code>Stream</code> is empty without consuming it. So the depature of converting it to a <code>List</code> and checking that seems like a plausible solution."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596090,"post_id":73092536,"comment_id":129092889,"body_markdown":"@Turing85 Regarding to null, you are right I meant &quot;Empty&quot; and corrected comment, sorry.  As it is a list, when there is no record it will return null list and I want to handle this situation. But I am not sure if there is an elegant solution instead of using if block. Any idea?","body":"@Turing85 Regarding to null, you are right I meant &quot;Empty&quot; and corrected comment, sorry.  As it is a list, when there is no record it will return null list and I want to handle this situation. But I am not sure if there is an elegant solution instead of using if block. Any idea?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1658596231,"post_id":73092536,"comment_id":129092928,"body_markdown":"Wrap it in `Optional.ofNullable(...).orElseThrow(...)...`.","body":"Wrap it in <code>Optional.ofNullable(...).orElseThrow(...)...</code>."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596581,"post_id":73092536,"comment_id":129093023,"body_markdown":"Thanks, but as it is List, I need to check empty instead of null. I tried to be sure, but unfortunately not working. Any idea for this kind of situations using Java Stream?","body":"Thanks, but as it is List, I need to check empty instead of null. I tried to be sure, but unfortunately not working. Any idea for this kind of situations using Java Stream?"},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596632,"post_id":73092536,"comment_id":129093030,"body_markdown":"I am trying `Optional.empty(employees).orElseThrow(() -&gt;  new NoSuchElementFoundException(NO_RECORD));`","body":"I am trying <code>Optional.empty(employees).orElseThrow(() -&gt;  new NoSuchElementFoundException(NO_RECORD));</code>"},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596670,"post_id":73092536,"comment_id":129093031,"body_markdown":"But `empty()` does not expect any parameter :(","body":"But <code>empty()</code> does not expect any parameter :("},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596707,"post_id":73092536,"comment_id":129093041,"body_markdown":"Also tried `employees.isEmpty().orElseThrow(() -&gt;  new NoSuchElementFoundException(NO_RECORD));`, not working","body":"Also tried <code>employees.isEmpty().orElseThrow(() -&gt;  new NoSuchElementFoundException(NO_RECORD));</code>, not working"},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658596812,"post_id":73092536,"comment_id":129093068,"body_markdown":"Some people used like me, some others suggest like this (adding filter) : https://stackoverflow.com/questions/56869805/java-8-throw-exception-if-stream-returns-no-results","body":"Some people used like me, some others suggest like this (adding filter) : <a href=\"https://stackoverflow.com/questions/56869805/java-8-throw-exception-if-stream-returns-no-results\" title=\"java 8 throw exception if stream returns no results\">stackoverflow.com/questions/56869805/&hellip;</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":4,"creation_date":1658597689,"post_id":73092536,"comment_id":129093267,"body_markdown":"Your code is just fine the way it stands. I see no reasonable way to change it to throw the exception from within a stream pipeline.","body":"Your code is just fine the way it stands. I see no reasonable way to change it to throw the exception from within a stream pipeline."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658597883,"post_id":73092536,"comment_id":129093303,"body_markdown":"@OleV.V. You right, I have seen that after my search. But as I have not experience for this situations, just wanted to be sure by getting some suggestions. Thanks a lot.","body":"@OleV.V. You right, I have seen that after my search. But as I have not experience for this situations, just wanted to be sure by getting some suggestions. Thanks a lot."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658597906,"post_id":73092536,"comment_id":129093309,"body_markdown":"@Turing85 Thanks a lot to you also for your useful helps","body":"@Turing85 Thanks a lot to you also for your useful helps"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1658600637,"post_id":73092536,"comment_id":129093891,"body_markdown":"Thanks, hans. I am not going to post an answer, so if you think youve got your question answered, in half or in full, consider posting your own answer to it.","body":"Thanks, hans. I am not going to post an answer, so if you think youve got your question answered, in half or in full, consider posting your own answer to it."},{"owner":{"account_id":11394190,"reputation":331,"user_id":8353152,"display_name":"DBear"},"score":0,"creation_date":1658608976,"post_id":73092536,"comment_id":129095444,"body_markdown":"If you _really_ want to use Stream/Optional to throw the exception, you can do this: `Optional.of(employees).filter(e -&gt; !e.isEmpty()).orElseThrow(() -&gt; new NoSuchElementException())`. But this is beating around the bush, and your use of an if statement is better.","body":"If you <i>really</i> want to use Stream/Optional to throw the exception, you can do this: <code>Optional.of(employees).filter(e -&gt; !e.isEmpty()).orElseThrow(() -&gt; new NoSuchElementException())</code>. But this is beating around the bush, and your use of an if statement is better."},{"owner":{"display_name":"user19601508"},"score":0,"creation_date":1658618369,"post_id":73092536,"comment_id":129096846,"body_markdown":"@DBear You are right, then I will continue to use current approach. thanks a lot.","body":"@DBear You are right, then I will continue to use current approach. thanks a lot."}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658684316,"creation_date":1658662523,"answer_id":73098019,"question_id":73092536,"body_markdown":"You can use the following, which will be applied after the result is collected on the list and it will check if the result list is empty and if that is the case it will throw the exception\r\n\r\n\r\n        public void create(MultipartFile file) throws Exception {\r\n      List&lt;Employee&gt; employees = CsvHelper.csvToEmployees(file.getInputStream()).stream()\r\n              .map(EmployeeRequestMapper::mapToEntity)\r\n              .collect(Collectors.collectingAndThen(Collectors.toList(), result -&gt; {\r\n                if (result.isEmpty()) throw new NoSuchElementFoundException(NOT_CONTAINS_EMPLOYEE);\r\n                return result;\r\n               })); \r\n     employeeRepository.saveAll(employees);\r\n     }","title":"Java Stream API: Throwing custom exception for empty list","body":"<p>You can use the following, which will be applied after the result is collected on the list and it will check if the result list is empty and if that is the case it will throw the exception</p>\n<pre><code>    public void create(MultipartFile file) throws Exception {\n  List&lt;Employee&gt; employees = CsvHelper.csvToEmployees(file.getInputStream()).stream()\n          .map(EmployeeRequestMapper::mapToEntity)\n          .collect(Collectors.collectingAndThen(Collectors.toList(), result -&gt; {\n            if (result.isEmpty()) throw new NoSuchElementFoundException(NOT_CONTAINS_EMPLOYEE);\n            return result;\n           })); \n employeeRepository.saveAll(employees);\n }\n</code></pre>\n"}],"owner":{"display_name":"user19601508"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":598,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":1,"score":2,"last_activity_date":1658684316,"creation_date":1658594680,"question_id":73092536,"body_markdown":"I have the following service method:\r\n\r\n```\r\npublic void create(MultipartFile file) throws Exception {\r\n      List&lt;Employee&gt; employees = CsvHelper.csvToEmployees(file.getInputStream()).stream()\r\n              .map(EmployeeRequestMapper::mapToEntity)\r\n              .collect(Collectors.toList());\r\n     \r\n      // Can I use Stream and throw exception if employees is empty\r\n      if (employees.isEmpty()) {\r\n          throw new NoSuchElementFoundException(NOT_CONTAINS_EMPLOYEE);\r\n      }\r\n\r\n      employeeRepository.saveAll(employees);\r\n}\r\n```\r\n\r\nHere I read CSV file and if there is no record, throw my custom `NoSuchElementFoundException` exception. \r\n\r\nHowever, **regarding to if block**, I am not sure if there is a proper way using Java Stream as I use in the following example:\r\n\r\n```\r\npublic EmployeeDto findByEmail(String email) {\r\n    return employeeRepository.findByEmail(email)\r\n            .map(EmployeeDto::new)\r\n            .orElseThrow(() -&gt; new NoSuchElementFoundException(NO_ITEM_FOUND));\r\n}\r\n```\r\n\r\nSo, can I apply similar one to the `create()` method? ","title":"Java Stream API: Throwing custom exception for empty list","body":"<p>I have the following service method:</p>\n<pre><code>public void create(MultipartFile file) throws Exception {\n      List&lt;Employee&gt; employees = CsvHelper.csvToEmployees(file.getInputStream()).stream()\n              .map(EmployeeRequestMapper::mapToEntity)\n              .collect(Collectors.toList());\n     \n      // Can I use Stream and throw exception if employees is empty\n      if (employees.isEmpty()) {\n          throw new NoSuchElementFoundException(NOT_CONTAINS_EMPLOYEE);\n      }\n\n      employeeRepository.saveAll(employees);\n}\n</code></pre>\n<p>Here I read CSV file and if there is no record, throw my custom <code>NoSuchElementFoundException</code> exception.</p>\n<p>However, <strong>regarding to if block</strong>, I am not sure if there is a proper way using Java Stream as I use in the following example:</p>\n<pre><code>public EmployeeDto findByEmail(String email) {\n    return employeeRepository.findByEmail(email)\n            .map(EmployeeDto::new)\n            .orElseThrow(() -&gt; new NoSuchElementFoundException(NO_ITEM_FOUND));\n}\n</code></pre>\n<p>So, can I apply similar one to the <code>create()</code> method?</p>\n"},{"tags":["java","excel","apache","nullpointerexception","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1435840181,"post_id":31184499,"comment_id":50374605,"body_markdown":"I suspect the whole row 2 is blank. So this row will not be stored into the Excel file and `newSheet.getRow(1)` will return `NULL`. You have to check this. Try getting the row first, then check if it is not `NULL` and only if not, try getting the cell.","body":"I suspect the whole row 2 is blank. So this row will not be stored into the Excel file and <code>newSheet.getRow(1)</code> will return <code>NULL</code>. You have to check this. Try getting the row first, then check if it is not <code>NULL</code> and only if not, try getting the cell."},{"owner":{"account_id":6563178,"reputation":51,"user_id":5073652,"display_name":"Zman147"},"score":0,"creation_date":1435840723,"post_id":31184499,"comment_id":50374976,"body_markdown":"This worked perfectly. Thank you so much for your help!","body":"This worked perfectly. Thank you so much for your help!"}],"answers":[{"tags":[],"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1435858853,"creation_date":1435858853,"answer_id":31191178,"question_id":31184499,"body_markdown":"As explained in the [Apache POI Javadocs](https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html#getRow%28int%29), `Sheet.getRow(num)` can return null, if the row has never been used and therefore hasn&#39;t been written to the file\r\n\r\nAs covered in the [Apache POI docs on iterating over rows and cells](http://poi.apache.org/spreadsheet/quick-guide.html#Iterator), if you want to loop over all rows, then fetch one specific column, you need to do something like:\r\n\r\n    // Decide which rows to process\r\n    int rowStart = Math.min(15, sheet.getFirstRowNum());\r\n    int rowEnd = Math.max(1400, sheet.getLastRowNum());\r\n\r\n    for (int rowNum = rowStart; rowNum &lt; rowEnd; rowNum++) {\r\n       Row r = sheet.getRow(rowNum);\r\n       if (r == null) {\r\n          // No entries in this row\r\n          // Handle empty\r\n          continue;\r\n       }\r\n\r\n       int cn = 1;\r\n       Cell c = r.getCell(cn, Row.RETURN_BLANK_AS_NULL);\r\n       if (c == null) {\r\n          // The spreadsheet is empty in this cell\r\n       } else {\r\n          // Do something useful with the cell&#39;s contents\r\n       }\r\n    }","title":"Apache POI .getCell() error, java.lang.NullPointerException Cannot Read Cell if blank","body":"<p>As explained in the <a href=\"https://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html#getRow%28int%29\" rel=\"noreferrer\">Apache POI Javadocs</a>, <code>Sheet.getRow(num)</code> can return null, if the row has never been used and therefore hasn't been written to the file</p>\n\n<p>As covered in the <a href=\"http://poi.apache.org/spreadsheet/quick-guide.html#Iterator\" rel=\"noreferrer\">Apache POI docs on iterating over rows and cells</a>, if you want to loop over all rows, then fetch one specific column, you need to do something like:</p>\n\n<pre><code>// Decide which rows to process\nint rowStart = Math.min(15, sheet.getFirstRowNum());\nint rowEnd = Math.max(1400, sheet.getLastRowNum());\n\nfor (int rowNum = rowStart; rowNum &lt; rowEnd; rowNum++) {\n   Row r = sheet.getRow(rowNum);\n   if (r == null) {\n      // No entries in this row\n      // Handle empty\n      continue;\n   }\n\n   int cn = 1;\n   Cell c = r.getCell(cn, Row.RETURN_BLANK_AS_NULL);\n   if (c == null) {\n      // The spreadsheet is empty in this cell\n   } else {\n      // Do something useful with the cell's contents\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20050750,"reputation":21,"user_id":14699500,"display_name":"Pratyush"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606238085,"creation_date":1606224371,"answer_id":64987506,"question_id":31184499,"body_markdown":"I have tried the below code.. worked for me. If it throws NullPointerException, I have created a new cell along with the row at the same location of the sheet.\r\n\r\n    try {\r\n\t\trow = sheet.getRow(rowNum);\r\n\t\tif(row == null) {\r\n\t\t\trow = sheet.createRow(rowNum);\r\n\t\t}\r\n\t\tCell cell = row.getCell(colNum); \r\n\t\t\t\r\n\t\tif(cell == null) {\r\n\t\t\tcell=row.createCell(colNum);\r\n\t\t}\r\n\t\tcell.setCellValue(String);\r\n\t\t\t\t \r\n\t} catch (Exception e) {\r\n\t\tSystem.out.println(e);\r\n\t}","title":"Apache POI .getCell() error, java.lang.NullPointerException Cannot Read Cell if blank","body":"<p>I have tried the below code.. worked for me. If it throws NullPointerException, I have created a new cell along with the row at the same location of the sheet.</p>\n<pre><code>try {\n    row = sheet.getRow(rowNum);\n    if(row == null) {\n        row = sheet.createRow(rowNum);\n    }\n    Cell cell = row.getCell(colNum); \n        \n    if(cell == null) {\n        cell=row.createCell(colNum);\n    }\n    cell.setCellValue(String);\n             \n} catch (Exception e) {\n    System.out.println(e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8022768,"reputation":79,"user_id":6050906,"display_name":"rejdrouin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658684181,"creation_date":1658684181,"answer_id":73100651,"question_id":31184499,"body_markdown":"Using &quot;myExcelRow == null&quot; does not help for me.\r\nAs soon as the code hits an empty cell, I get the java.lang.NullPointerException\r\nIt occurs even in rows and columns that are not last of the worksheet.\r\n\r\nI am working with one specific workbook. Just changing the *format* of the cell, for example: font color, avoids the NullPointerException.","title":"Apache POI .getCell() error, java.lang.NullPointerException Cannot Read Cell if blank","body":"<p>Using &quot;myExcelRow == null&quot; does not help for me.\nAs soon as the code hits an empty cell, I get the java.lang.NullPointerException\nIt occurs even in rows and columns that are not last of the worksheet.</p>\n<p>I am working with one specific workbook. Just changing the <em>format</em> of the cell, for example: font color, avoids the NullPointerException.</p>\n"}],"owner":{"account_id":6563178,"reputation":51,"user_id":5073652,"display_name":"Zman147"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20234,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1658684181,"creation_date":1435839532,"question_id":31184499,"body_markdown":"I have been having trouble recently with Apache POI&#39;s .getCell() method for Excel files. If I try to implement Cell newCell = sheet.getRow(rowNumber).getCell(columnNumber) or something similar, I always get the error \r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat ExcelWriter.getWorkbook(ExcelWriter.java:80)\r\n\tat Gui2.&lt;init&gt;(Gui2.java:93)\r\n\tat Main.main(Main.java:24)\r\n\r\nwhich points to the line I am implementing the .getCell() method in if the cell is null. I have code that is supposed to determine if the cell is null and then print something if that is true, but it seems as though the cell being blank causes an error with the program. This only happens in some cases however, and I have found that if I create a sheet and make a for loop to create a new cell in every row, I can read a blank cell and determine it is blank. However, if I then type a value into any cell in that sheet, and then try to read a different null cell, I get the error message again. I do not understand why I get this error only when I try to read null cells, but I need to loop through them in my program. Here is a snippet of my code and what is causing the error.\r\n\r\n    public void getWorkbook(String fileName)\r\n\t{\r\n\t\ttry \r\n\t\t{\r\n\t\t\texistingFile = new FileInputStream(new File(fileName));\r\n\t\t\tworkbook = new XSSFWorkbook(existingFile);\r\n\t\t\tSheet newSheet = workbook.getSheet(&quot;Test3&quot;);\r\n\t\t\t//createSheet(&quot;Test3&quot;, workbook);\r\n\t\t\t\r\n\t\t\tCell newCell = newSheet.getRow(1).getCell(1);\r\n\t\t\tif(newCell == null)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Null&quot;);\r\n\t\t\t}\r\n\t\t\telse if(newCell.getCellType() == XSSFCell.CELL_TYPE_NUMERIC)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Number&quot;);\r\n\t\t\t}\r\n\t\t\t//System.out.println(newCell.getStringCellValue());\r\n\t\t} \r\n\t\tcatch (FileNotFoundException e) //Couldn&#39;t find file\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t} \r\n\t\tcatch (IOException e) //Couldn&#39;t create workbook\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nJust to be clear, the cell B2, which is referenced in the code, is blank. However, A1 is not, but when I read A1 the system prints &quot;Number&quot; as it is supposed to.\r\n","title":"Apache POI .getCell() error, java.lang.NullPointerException Cannot Read Cell if blank","body":"<p>I have been having trouble recently with Apache POI's .getCell() method for Excel files. If I try to implement Cell newCell = sheet.getRow(rowNumber).getCell(columnNumber) or something similar, I always get the error </p>\n\n<pre><code>Exception in thread \"main\" java.lang.NullPointerException\nat ExcelWriter.getWorkbook(ExcelWriter.java:80)\nat Gui2.&lt;init&gt;(Gui2.java:93)\nat Main.main(Main.java:24)\n</code></pre>\n\n<p>which points to the line I am implementing the .getCell() method in if the cell is null. I have code that is supposed to determine if the cell is null and then print something if that is true, but it seems as though the cell being blank causes an error with the program. This only happens in some cases however, and I have found that if I create a sheet and make a for loop to create a new cell in every row, I can read a blank cell and determine it is blank. However, if I then type a value into any cell in that sheet, and then try to read a different null cell, I get the error message again. I do not understand why I get this error only when I try to read null cells, but I need to loop through them in my program. Here is a snippet of my code and what is causing the error.</p>\n\n<pre><code>public void getWorkbook(String fileName)\n{\n    try \n    {\n        existingFile = new FileInputStream(new File(fileName));\n        workbook = new XSSFWorkbook(existingFile);\n        Sheet newSheet = workbook.getSheet(\"Test3\");\n        //createSheet(\"Test3\", workbook);\n\n        Cell newCell = newSheet.getRow(1).getCell(1);\n        if(newCell == null)\n        {\n            System.out.println(\"Null\");\n        }\n        else if(newCell.getCellType() == XSSFCell.CELL_TYPE_NUMERIC)\n        {\n            System.out.println(\"Number\");\n        }\n        //System.out.println(newCell.getStringCellValue());\n    } \n    catch (FileNotFoundException e) //Couldn't find file\n    {\n        e.printStackTrace();\n    } \n    catch (IOException e) //Couldn't create workbook\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Just to be clear, the cell B2, which is referenced in the code, is blank. However, A1 is not, but when I read A1 the system prints \"Number\" as it is supposed to.</p>\n"},{"tags":["java","spring-boot","azure-cosmosdb","azure-cosmosdb-sqlapi"],"comments":[{"owner":{"account_id":3913115,"reputation":1059,"user_id":3237814,"accept_rate":75,"display_name":"rns"},"score":0,"creation_date":1649679553,"post_id":71825710,"comment_id":126929673,"body_markdown":"its com.microsoft.azure.spring.data.cosmosdb.core.cosmosTemplate. which query you are referring to?","body":"its com.microsoft.azure.spring.data.cosmosdb.core.cosmosTemplate&zwnj;&#8203;. which query you are referring to?"}],"answers":[{"tags":[],"owner":{"account_id":17250869,"reputation":114,"user_id":12491066,"display_name":"Theo van Kraay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658683796,"creation_date":1658683796,"answer_id":73100599,"question_id":71825710,"body_markdown":"Strongly recommend upgrading to [spring-data-cosmosdb v3][1] (at least version 3.22.0). The v2 connector has been legacy for some time. Using the latest connector, the below would accomplish your goal.\r\n\r\n    Criteria filterCriteria = Criteria.getInstance(CriteriaType.ARRAY_CONTAINS, &quot;address&quot;,\r\n            Collections.singletonList(new ObjectMapper().readTree(&quot;{\\&quot;street\\&quot;:\\&quot;abc\\&quot;}&quot;)),\r\n            Part.IgnoreCaseType.NEVER);\r\n    CosmosQuery cosmosQuery = new CosmosQuery(filterCriteria);\r\n    Iterable&lt;User&gt; results = cosmosTemplate.find(cosmosQuery, User.class, COLLECTION_NAME);\r\n    for (User user : results)\r\n        System.out.println(&quot;doc id: &quot; + user.getId()); \r\n\r\n\r\n  [1]: https://learn.microsoft.com/azure/cosmos-db/sql/sql-api-sdk-java-spring-v3","title":"Query to search value in side array of object","body":"<p>Strongly recommend upgrading to <a href=\"https://learn.microsoft.com/azure/cosmos-db/sql/sql-api-sdk-java-spring-v3\" rel=\"nofollow noreferrer\">spring-data-cosmosdb v3</a> (at least version 3.22.0). The v2 connector has been legacy for some time. Using the latest connector, the below would accomplish your goal.</p>\n<pre><code>Criteria filterCriteria = Criteria.getInstance(CriteriaType.ARRAY_CONTAINS, &quot;address&quot;,\n        Collections.singletonList(new ObjectMapper().readTree(&quot;{\\&quot;street\\&quot;:\\&quot;abc\\&quot;}&quot;)),\n        Part.IgnoreCaseType.NEVER);\nCosmosQuery cosmosQuery = new CosmosQuery(filterCriteria);\nIterable&lt;User&gt; results = cosmosTemplate.find(cosmosQuery, User.class, COLLECTION_NAME);\nfor (User user : results)\n    System.out.println(&quot;doc id: &quot; + user.getId()); \n</code></pre>\n"}],"owner":{"account_id":3913115,"reputation":1059,"user_id":3237814,"accept_rate":75,"display_name":"rns"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658683796,"creation_date":1649670229,"question_id":71825710,"body_markdown":"I want to apply criteria inside object of array if it matches, but I am not able to find any documentation or example where I can find that using `spring-data-cosmosdb` library. I am using `2.3.0` version of library.\r\n\r\nExample of Json\r\n\r\n    {\r\n      &quot;id&quot; : 1,\r\n      &quot;address&quot; : [\r\n        {\r\n         &quot;street&quot; : &quot;abc&quot; \r\n         ...         \r\n        },\r\n        {\r\n         &quot;street&quot; : &quot;efg&quot; \r\n         ...\r\n        }\r\n      ]\r\n    }\r\n\r\nI wan to search all documents in which `address` is having street name equals `&quot;abc&quot;`. Below is spring boot code that I am using to search in cosmosDb. But it is not returning expected results.\r\n\r\n        List&lt;Criteria&gt; criteriaList = new ArrayList&lt;&gt;();\r\n        criteriaList.add(Criteria.getInstance(CriteriaType.IN, &quot;addresses.street&quot;, Collections.singletonList(&quot;abc&quot;)));\r\n        List&lt;User&gt; users = cosmosTemplate.find(new DocumentQuery(criteriaList.get(0), CriteriaType.AND)), User.class, COLLECTION_NAME);\r\n\r\n\r\nI also tried with `address[0].street`, but it is throwing exception of operation not supported.","title":"Query to search value in side array of object","body":"<p>I want to apply criteria inside object of array if it matches, but I am not able to find any documentation or example where I can find that using <code>spring-data-cosmosdb</code> library. I am using <code>2.3.0</code> version of library.</p>\n<p>Example of Json</p>\n<pre><code>{\n  &quot;id&quot; : 1,\n  &quot;address&quot; : [\n    {\n     &quot;street&quot; : &quot;abc&quot; \n     ...         \n    },\n    {\n     &quot;street&quot; : &quot;efg&quot; \n     ...\n    }\n  ]\n}\n</code></pre>\n<p>I wan to search all documents in which <code>address</code> is having street name equals <code>&quot;abc&quot;</code>. Below is spring boot code that I am using to search in cosmosDb. But it is not returning expected results.</p>\n<pre><code>    List&lt;Criteria&gt; criteriaList = new ArrayList&lt;&gt;();\n    criteriaList.add(Criteria.getInstance(CriteriaType.IN, &quot;addresses.street&quot;, Collections.singletonList(&quot;abc&quot;)));\n    List&lt;User&gt; users = cosmosTemplate.find(new DocumentQuery(criteriaList.get(0), CriteriaType.AND)), User.class, COLLECTION_NAME);\n</code></pre>\n<p>I also tried with <code>address[0].street</code>, but it is throwing exception of operation not supported.</p>\n"},{"tags":["java","android-studio","share"],"comments":[{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1658655799,"post_id":73096493,"comment_id":129100926,"body_markdown":"Why you added this `shareIntent.setType(&quot;video/*&quot;);` Type?","body":"Why you added this <code>shareIntent.setType(&quot;video&#47;*&quot;);</code> Type?"}],"owner":{"account_id":19885834,"reputation":173,"user_id":14568825,"display_name":"Aisha Kumari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658683556,"creation_date":1658647404,"question_id":73096493,"body_markdown":"I am trying to share an images from arraylist,when I click on share button app list appears to share but when I select an app to share,it shows null in another app.\r\n\r\nplease help me to find out the solution :(\r\n\r\nhere is my recycler onBindViewHolder code.\r\n\r\n    holder.send.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();\r\n                StrictMode.setVmPolicy(builder.build());\r\n                final String image_path = fileslist.get(position).getUri().toString();\r\n                File share = new File(image_path);\r\n                Uri uri = Uri.fromFile(share);\r\n                Intent shareIntent = new Intent();\r\n                shareIntent.setAction(Intent.ACTION_SEND);\r\n                shareIntent.setType(&quot;image/&quot;);\r\n                shareIntent.putExtra(Intent.EXTRA_STREAM, uri);\r\n                context.startActivity(Intent.createChooser(shareIntent, &quot;Share to.....&quot;));\r\n            }\r\n        });\r\n\r\nand here how my app is sharing\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j4cne.png","title":"How to share image from recyclerView arraylist?","body":"<p>I am trying to share an images from arraylist,when I click on share button app list appears to share but when I select an app to share,it shows null in another app.</p>\n<p>please help me to find out the solution :(</p>\n<p>here is my recycler onBindViewHolder code.</p>\n<pre><code>holder.send.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();\n            StrictMode.setVmPolicy(builder.build());\n            final String image_path = fileslist.get(position).getUri().toString();\n            File share = new File(image_path);\n            Uri uri = Uri.fromFile(share);\n            Intent shareIntent = new Intent();\n            shareIntent.setAction(Intent.ACTION_SEND);\n            shareIntent.setType(&quot;image/&quot;);\n            shareIntent.putExtra(Intent.EXTRA_STREAM, uri);\n            context.startActivity(Intent.createChooser(shareIntent, &quot;Share to.....&quot;));\n        }\n    });\n</code></pre>\n<p>and here how my app is sharing\n<a href=\"https://i.stack.imgur.com/j4cne.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j4cne.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","windows","winapi"],"comments":[{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":0,"creation_date":1373841795,"post_id":17644390,"comment_id":25693846,"body_markdown":"Is your program dealing with `JFileChooser` at the time of the crash? Take a look at [Bug ID 4879395](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4879395). Also try running your application as Administrator in the affected installations.","body":"Is your program dealing with <code>JFileChooser</code> at the time of the crash? Take a look at <a href=\"http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4879395\" rel=\"nofollow noreferrer\">Bug ID 4879395</a>. Also try running your application as Administrator in the affected installations."},{"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"score":0,"creation_date":1373842159,"post_id":17644390,"comment_id":25693925,"body_markdown":"We do use a `JFileChooser`, but users have reported that this happens before they do anything. It&#39;s possible that a `JFileChooser` has already been or is in the process of being constructed at the time of the exception, but we can&#39;t tell due to the exception happening on a different thread. (I saw the bug you mention when searching in regard to this problem back in 2010--the stack trace is a lot different from ours, and the property indicated for the workaround doesn&#39;t exist in Java 6 or 7.)","body":"We do use a <code>JFileChooser</code>, but users have reported that this happens before they do anything. It&#39;s possible that a <code>JFileChooser</code> has already been or is in the process of being constructed at the time of the exception, but we can&#39;t tell due to the exception happening on a different thread. (I saw the bug you mention when searching in regard to this problem back in 2010--the stack trace is a lot different from ours, and the property indicated for the workaround doesn&#39;t exist in Java 6 or 7.)"},{"owner":{"account_id":37860,"reputation":5949,"user_id":108368,"accept_rate":45,"display_name":"CodeBuddy"},"score":0,"creation_date":1424099749,"post_id":17644390,"comment_id":45402251,"body_markdown":"Did you get to the bottom of this?","body":"Did you get to the bottom of this?"},{"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"score":0,"creation_date":1424121669,"post_id":17644390,"comment_id":45414161,"body_markdown":"No, never have. I would still like to know the answer. (Actually, I&#39;d like Oracle to fix the bug...)","body":"No, never have. I would still like to know the answer. (Actually, I&#39;d like Oracle to fix the bug...)"}],"answers":[{"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1373849688,"creation_date":1373848611,"answer_id":17645219,"question_id":17644390,"body_markdown":"Well, there are several reports similar to yours (like [this one from jEdit](http://permalink.gmane.org/gmane.editors.jedit.devel/36827), [this one from codenameone](https://code.google.com/p/codenameone/issues/detail?id=740)  and [this one](http://www.java-forum.org/awt-swing-javafx-swt/97055-jfilechooser-could-not-bind-shell-folder-interface.html) - in german - which seems like a `JFileChooser` bug with a stack trace very close to yours in Windows 7 and Java 6). All seem related to `JFileChooser` and/or File Browsing in one way or another.\r\n\r\nSo I would approach this in one of two ways: \r\n\r\nEither go for the time-consuming / non speculative road and take dumps of the affected installations with tools such as [jstack](http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstack.html), [VisualVM](http://visualvm.java.net/) or [JConsole](http://openjdk.java.net/tools/svc/jconsole/) until you are able to isolate the root cause of the problem (which may or may not be the `JFileChooser`). If you choose that path, remember that either remote access to one of the affected installations or help from a technical savvy user is a must.\r\n\r\nOr try to take a shortcut, assume that the problem is indeed the `JFileChooser` (as anecdotal evidence shows) and release a custom version replacing the `JFileChooser` by [FileDialog](http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html). If it runs as expected on the affected machines case is closed; else give yourself a tap on the back for trying and take &quot;The Long and Winding Road&quot;.","title":"What causes an InternalError to be thrown by sun.awt.shell.Win32ShellFolder2.initSpecial()?","body":"<p>Well, there are several reports similar to yours (like <a href=\"http://permalink.gmane.org/gmane.editors.jedit.devel/36827\" rel=\"nofollow\">this one from jEdit</a>, <a href=\"https://code.google.com/p/codenameone/issues/detail?id=740\" rel=\"nofollow\">this one from codenameone</a>  and <a href=\"http://www.java-forum.org/awt-swing-javafx-swt/97055-jfilechooser-could-not-bind-shell-folder-interface.html\" rel=\"nofollow\">this one</a> - in german - which seems like a <code>JFileChooser</code> bug with a stack trace very close to yours in Windows 7 and Java 6). All seem related to <code>JFileChooser</code> and/or File Browsing in one way or another.</p>\n\n<p>So I would approach this in one of two ways: </p>\n\n<p>Either go for the time-consuming / non speculative road and take dumps of the affected installations with tools such as <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/share/jstack.html\" rel=\"nofollow\">jstack</a>, <a href=\"http://visualvm.java.net/\" rel=\"nofollow\">VisualVM</a> or <a href=\"http://openjdk.java.net/tools/svc/jconsole/\" rel=\"nofollow\">JConsole</a> until you are able to isolate the root cause of the problem (which may or may not be the <code>JFileChooser</code>). If you choose that path, remember that either remote access to one of the affected installations or help from a technical savvy user is a must.</p>\n\n<p>Or try to take a shortcut, assume that the problem is indeed the <code>JFileChooser</code> (as anecdotal evidence shows) and release a custom version replacing the <code>JFileChooser</code> by <a href=\"http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html\" rel=\"nofollow\">FileDialog</a>. If it runs as expected on the affected machines case is closed; else give yourself a tap on the back for trying and take \"The Long and Winding Road\".</p>\n"},{"tags":[],"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520072194,"creation_date":1520072194,"answer_id":49083064,"question_id":17644390,"body_markdown":"Had same problem and the answer was\r\n[java.awt.FileDialog][1]\r\n\r\nIf you look up VbScript solutions for &quot;Open File Dialog&quot;, it seems that there is no COM class doing the job for most of the windows platforms\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html\r\n\r\n","title":"What causes an InternalError to be thrown by sun.awt.shell.Win32ShellFolder2.initSpecial()?","body":"<p>Had same problem and the answer was\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html\" rel=\"nofollow noreferrer\">java.awt.FileDialog</a></p>\n\n<p>If you look up VbScript solutions for \"Open File Dialog\", it seems that there is no COM class doing the job for most of the windows platforms</p>\n"}],"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4034,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1658682557,"creation_date":1373840546,"question_id":17644390,"body_markdown":"Some of our Windows users get this stack trace shortly after launching our app:\r\n\r\n    java.lang.InternalError: Could not bind shell folder to interface\r\n      at sun.awt.shell.Win32ShellFolder2.initSpecial(Native Method) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2.access$300(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolderManager2$ComInvoker.invoke(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.ShellFolder.invoke(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2.&lt;init&gt;(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolderManager2.getNetwork(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2.getFileSystemPath(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2.access$400(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2$10.call(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolder2$10.call(Unknown Source) ~[na:1.7.0_25]\r\n      at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) ~[na:1.7.0_25]\r\n      at java.util.concurrent.FutureTask.run(Unknown Source) ~[na:1.7.0_25]\r\n      at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:1.7.0_25]\r\n      at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:1.7.0_25]\r\n      at sun.awt.shell.Win32ShellFolderManager2$ComInvoker$3.run(Unknown Source) ~[na:1.7.0_25]\r\n      at java.lang.Thread.run(Unknown Source) ~[na:1.7.0_25]\r\n\r\nObservations:\r\n\r\n* Every frame in the stack trace is something in the JDK, not in our code.\r\n* This happens only on Windows, but we&#39;ve had reports of it on both Vista and Windows 7.\r\n* This happens with various versions of Java: 1.6.0_19, 1.6.0_21, 1.7.0_11, 1.7.0_25.\r\n* The problem happens to only a handful of our users, but is 100% repeatable for those users. Unfortunately, we haven&#39;t been able to see anything which those users&#39; systems have in common other than exhibiting this issue, and none of our developers has ever experienced it themselves.\r\n* My search of Oracle&#39;s bug database turned up no bugs with the same or a similar stack trace.\r\n* There seem to be a lot of posts on the net about this particular issue without anyone having any idea what causes it.\r\n\r\nI&#39;m not holding out any hope of Oracle fixing whatever the problem is, if it is indeed a JDK bug---but if we knew what triggered the bug, we could at least help our users afflicted by it. Can anyone shed light on what causes this to happen?\r\n\r\n**Edit:** The relevant native function is this one, from [ShellFolder2.cpp](http://hg.openjdk.java.net/icedtea/jdk7/jdk/raw-file/c98afec1bf86/src/windows/native/sun/windows/ShellFolder2.cpp):\r\n\r\n    JNIEXPORT void JNICALL Java_sun_awt_shell_Win32ShellFolder2_initSpecial\r\n        (JNIEnv* env, jobject folder, jlong desktopIShellFolder, jint folderType)\r\n    {\r\n        // Get desktop IShellFolder interface\r\n        IShellFolder* pDesktop = (IShellFolder*)desktopIShellFolder;\r\n        if (pDesktop == NULL) {\r\n            JNU_ThrowInternalError(env, &quot;Desktop shell folder missing&quot;);\r\n            return;\r\n        }\r\n        // Get special folder relative PIDL\r\n        LPITEMIDLIST relPIDL;\r\n        HRESULT res = fn_SHGetSpecialFolderLocation(NULL, folderType,\r\n            &amp;relPIDL);\r\n        if (res != S_OK) {\r\n            JNU_ThrowIOException(env, &quot;Could not get shell folder ID list&quot;);\r\n            return;\r\n        }\r\n        // Set field ID for relative PIDL\r\n        env-&gt;CallVoidMethod(folder, MID_relativePIDL, (jlong)relPIDL);\r\n        // Get special folder IShellFolder interface\r\n        IShellFolder* pFolder;\r\n        res = pDesktop-&gt;BindToObject(relPIDL, NULL, IID_IShellFolder,\r\n            (void**)&amp;pFolder);\r\n        if (res != S_OK) {\r\n            JNU_ThrowInternalError(env,\r\n                &quot;Could not bind shell folder to interface&quot;);\r\n            return;\r\n        }\r\n        // Set field ID for pIShellFolder\r\n        env-&gt;CallVoidMethod(folder, MID_pIShellFolder, (jlong)pFolder);\r\n    }\r\n\r\nIn order to reach the &quot;Could not bind&quot; exception, it looks like `pDesktop != NULL` and `relPIDL` is retrieved successfully, but `pDesktop-&gt;BindToObject()` returns something other than `S_OK`. `pDesktop` is an [`IShellFolder*`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775075%28v=vs.85%29.aspx), which is apparently defined in Windows&#39;s `&lt;shellapi.h&gt;`. Aggravatingly, Java throws away the error code returned by [`IShellFolder::BindToObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775059%28v=vs.85%29.aspx).\r\n\r\nSo, I guess the question reduces to: What can cause `IShellFolder::BindToObject` to fail?\r\n\r\n**Edit 2**: Since `Win32ShellFolderManager2.getNetwork()` is what&#39;s calling the `Win32ShellFolder2` ctor at [Win32ShellFolderManager2.java:181](http://hg.openjdk.java.net/icedtea/jdk7/jdk/file/afaedb56b499/src/windows/classes/sun/awt/shell/Win32ShellFolderManager2.java), we can see that the last argument to `Win32ShellFolder2.initSpecial` must be `Win32ShellFolder2.NETWORK`. So, is something is wrong with the user&#39;s Network Neighborhood folder, perhaps?","title":"What causes an InternalError to be thrown by sun.awt.shell.Win32ShellFolder2.initSpecial()?","body":"<p>Some of our Windows users get this stack trace shortly after launching our app:</p>\n\n<pre><code>java.lang.InternalError: Could not bind shell folder to interface\n  at sun.awt.shell.Win32ShellFolder2.initSpecial(Native Method) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2.access$300(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2$1.call(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolderManager2$ComInvoker.invoke(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.ShellFolder.invoke(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2.&lt;init&gt;(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolderManager2.getNetwork(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2.getFileSystemPath(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2.access$400(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2$10.call(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolder2$10.call(Unknown Source) ~[na:1.7.0_25]\n  at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) ~[na:1.7.0_25]\n  at java.util.concurrent.FutureTask.run(Unknown Source) ~[na:1.7.0_25]\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:1.7.0_25]\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:1.7.0_25]\n  at sun.awt.shell.Win32ShellFolderManager2$ComInvoker$3.run(Unknown Source) ~[na:1.7.0_25]\n  at java.lang.Thread.run(Unknown Source) ~[na:1.7.0_25]\n</code></pre>\n\n<p>Observations:</p>\n\n<ul>\n<li>Every frame in the stack trace is something in the JDK, not in our code.</li>\n<li>This happens only on Windows, but we've had reports of it on both Vista and Windows 7.</li>\n<li>This happens with various versions of Java: 1.6.0_19, 1.6.0_21, 1.7.0_11, 1.7.0_25.</li>\n<li>The problem happens to only a handful of our users, but is 100% repeatable for those users. Unfortunately, we haven't been able to see anything which those users' systems have in common other than exhibiting this issue, and none of our developers has ever experienced it themselves.</li>\n<li>My search of Oracle's bug database turned up no bugs with the same or a similar stack trace.</li>\n<li>There seem to be a lot of posts on the net about this particular issue without anyone having any idea what causes it.</li>\n</ul>\n\n<p>I'm not holding out any hope of Oracle fixing whatever the problem is, if it is indeed a JDK bug---but if we knew what triggered the bug, we could at least help our users afflicted by it. Can anyone shed light on what causes this to happen?</p>\n\n<p><strong>Edit:</strong> The relevant native function is this one, from <a href=\"http://hg.openjdk.java.net/icedtea/jdk7/jdk/raw-file/c98afec1bf86/src/windows/native/sun/windows/ShellFolder2.cpp\" rel=\"nofollow\">ShellFolder2.cpp</a>:</p>\n\n<pre><code>JNIEXPORT void JNICALL Java_sun_awt_shell_Win32ShellFolder2_initSpecial\n    (JNIEnv* env, jobject folder, jlong desktopIShellFolder, jint folderType)\n{\n    // Get desktop IShellFolder interface\n    IShellFolder* pDesktop = (IShellFolder*)desktopIShellFolder;\n    if (pDesktop == NULL) {\n        JNU_ThrowInternalError(env, \"Desktop shell folder missing\");\n        return;\n    }\n    // Get special folder relative PIDL\n    LPITEMIDLIST relPIDL;\n    HRESULT res = fn_SHGetSpecialFolderLocation(NULL, folderType,\n        &amp;relPIDL);\n    if (res != S_OK) {\n        JNU_ThrowIOException(env, \"Could not get shell folder ID list\");\n        return;\n    }\n    // Set field ID for relative PIDL\n    env-&gt;CallVoidMethod(folder, MID_relativePIDL, (jlong)relPIDL);\n    // Get special folder IShellFolder interface\n    IShellFolder* pFolder;\n    res = pDesktop-&gt;BindToObject(relPIDL, NULL, IID_IShellFolder,\n        (void**)&amp;pFolder);\n    if (res != S_OK) {\n        JNU_ThrowInternalError(env,\n            \"Could not bind shell folder to interface\");\n        return;\n    }\n    // Set field ID for pIShellFolder\n    env-&gt;CallVoidMethod(folder, MID_pIShellFolder, (jlong)pFolder);\n}\n</code></pre>\n\n<p>In order to reach the \"Could not bind\" exception, it looks like <code>pDesktop != NULL</code> and <code>relPIDL</code> is retrieved successfully, but <code>pDesktop-&gt;BindToObject()</code> returns something other than <code>S_OK</code>. <code>pDesktop</code> is an <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/bb775075%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>IShellFolder*</code></a>, which is apparently defined in Windows's <code>&lt;shellapi.h&gt;</code>. Aggravatingly, Java throws away the error code returned by <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/bb775059%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>IShellFolder::BindToObject</code></a>.</p>\n\n<p>So, I guess the question reduces to: What can cause <code>IShellFolder::BindToObject</code> to fail?</p>\n\n<p><strong>Edit 2</strong>: Since <code>Win32ShellFolderManager2.getNetwork()</code> is what's calling the <code>Win32ShellFolder2</code> ctor at <a href=\"http://hg.openjdk.java.net/icedtea/jdk7/jdk/file/afaedb56b499/src/windows/classes/sun/awt/shell/Win32ShellFolderManager2.java\" rel=\"nofollow\">Win32ShellFolderManager2.java:181</a>, we can see that the last argument to <code>Win32ShellFolder2.initSpecial</code> must be <code>Win32ShellFolder2.NETWORK</code>. So, is something is wrong with the user's Network Neighborhood folder, perhaps?</p>\n"},{"tags":["java","math","vector","2d","gis"],"comments":[{"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"score":2,"creation_date":1234289643,"post_id":533467,"comment_id":346266,"body_markdown":"Unfortunately googling mostly ends up with pages on how to do this in ARCgis or Mapview.","body":"Unfortunately googling mostly ends up with pages on how to do this in ARCgis or Mapview."}],"answers":[{"tags":[],"owner":{"account_id":15525,"reputation":8694,"user_id":32878,"accept_rate":71,"display_name":"Jay Kominek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1234296342,"creation_date":1234296342,"answer_id":533947,"question_id":533467,"body_markdown":"You probably want to fit to closed bezier splines (curves).\r\n\r\nThere is a [page with a Java applet][1] that does such fitting. Take a look at their (uncommented, bleh) PSegment.java\r\n\r\nIf that doesn&#39;t do the job well enough, [Fitting B-Spline Curves to Point Clouds by \r\nSquared Distance Minimization][2] should be overkill for the task.\r\n\r\nFor more info, Google (Scholar) searches for things like &quot;b-spline fitting&quot; and &quot;closed bezier spline&quot; should help.\r\n\r\n  [1]: http://www.serc.iisc.ernet.in/~amohanty/SE288/lagrange/curves.html\r\n  [2]: http://www.cs.hku.hk/research/techreps/document/TR-2004-11.pdf","title":"How to approximate a vector contour from an elevation raster?","body":"<p>You probably want to fit to closed bezier splines (curves).</p>\n\n<p>There is a <a href=\"http://www.serc.iisc.ernet.in/~amohanty/SE288/lagrange/curves.html\" rel=\"nofollow noreferrer\">page with a Java applet</a> that does such fitting. Take a look at their (uncommented, bleh) PSegment.java</p>\n\n<p>If that doesn't do the job well enough, <a href=\"http://www.cs.hku.hk/research/techreps/document/TR-2004-11.pdf\" rel=\"nofollow noreferrer\">Fitting B-Spline Curves to Point Clouds by \nSquared Distance Minimization</a> should be overkill for the task.</p>\n\n<p>For more info, Google (Scholar) searches for things like \"b-spline fitting\" and \"closed bezier spline\" should help.</p>\n"},{"tags":[],"owner":{"account_id":19061,"reputation":185736,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1234306428,"creation_date":1234302638,"answer_id":534366,"question_id":533467,"body_markdown":"MATLAB does this with a contour plot: see the [`contour`][1] function -- it produces contour line data from a grid of f(x,y) data. I don&#39;t know much about the algorithm they use (they do have a [page which discusses it][2]) but maybe worth looking at the [Octave equivalent][3].\r\n\r\nthere&#39;s a [thesis on contour plotting][4] and a [CodeProject page][5] based on the thesis.\r\n\r\n\r\n  [1]: http://www.mathworks.com/access/helpdesk/help/techdoc/ref/contour.html\r\n  [2]: http://www.mathworks.com/access/helpdesk/help/techdoc/creating_plots/f10-2524.html#f10-2614\r\n  [3]: http://wiki.octave.org/wiki.pl?ContourScript\r\n  [4]: http://members.bellatlantic.net/~vze2vrva/thesis.html\r\n  [5]: http://www.codeproject.com/KB/recipes/contour.aspx","title":"How to approximate a vector contour from an elevation raster?","body":"<p>MATLAB does this with a contour plot: see the <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/ref/contour.html\" rel=\"nofollow noreferrer\"><code>contour</code></a> function -- it produces contour line data from a grid of f(x,y) data. I don't know much about the algorithm they use (they do have a <a href=\"http://www.mathworks.com/access/helpdesk/help/techdoc/creating_plots/f10-2524.html#f10-2614\" rel=\"nofollow noreferrer\">page which discusses it</a>) but maybe worth looking at the <a href=\"http://wiki.octave.org/wiki.pl?ContourScript\" rel=\"nofollow noreferrer\">Octave equivalent</a>.</p>\n\n<p>there's a <a href=\"http://members.bellatlantic.net/~vze2vrva/thesis.html\" rel=\"nofollow noreferrer\">thesis on contour plotting</a> and a <a href=\"http://www.codeproject.com/KB/recipes/contour.aspx\" rel=\"nofollow noreferrer\">CodeProject page</a> based on the thesis.</p>\n"},{"tags":[],"owner":{"account_id":310190,"reputation":1676,"user_id":623048,"accept_rate":25,"display_name":"Graham Asher"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658682386,"creation_date":1356379190,"answer_id":14025273,"question_id":533467,"body_markdown":"I use [GDAL][1]. And in my opinion you probably *don&#39;t* want to create B&#233;zier splines, which adds complexity. Short line segments are good enough.\r\n\r\nThe only problem is that you&#39;d have to create the contours at data preparation time, not in your Java app.\r\n\r\nHere&#39;s a map with some contours created from [USGS height data][2] using GDAL:\r\n\r\n![enter image description here][3]\r\n\r\n\r\n  [1]: https://gdal.org/gdal_contour.html\r\n  [2]: https://web.archive.org/web/20201021070957/https://dds.cr.usgs.gov/srtm/\r\n  [3]: https://i.stack.imgur.com/BEcXM.png","title":"How to approximate a vector contour from an elevation raster?","body":"<p>I use <a href=\"https://gdal.org/gdal_contour.html\" rel=\"nofollow noreferrer\">GDAL</a>. And in my opinion you probably <em>don't</em> want to create Bzier splines, which adds complexity. Short line segments are good enough.</p>\n<p>The only problem is that you'd have to create the contours at data preparation time, not in your Java app.</p>\n<p>Here's a map with some contours created from <a href=\"https://web.archive.org/web/20201021070957/https://dds.cr.usgs.gov/srtm/\" rel=\"nofollow noreferrer\">USGS height data</a> using GDAL:</p>\n<p><img src=\"https://i.stack.imgur.com/BEcXM.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7678,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1658682386,"creation_date":1234288968,"question_id":533467,"body_markdown":"I have an elevation map stored as a raster. I&#39;d like to fit a smooth &quot;vector&quot; curve to the contours of constant elevation. In my application, the data are actually geographic elevations, but the problem could be generalized to any function of two variables.\r\n\r\nI can produce another raster with anti-aliased contour lines, and use that as input to the vector-fitting process, if that helps.\r\n\r\n[This question][1] is similar, but I&#39;m looking for a free library that I can use in my Java application, or an explanation of the algorithm I (a non-mathematician) can implement myself. Also, in my case, I&#39;ve already found all of the &quot;edges&quot; I care about&amp;mdash;I just need to vectorize them.\r\n\r\n[Another question][2] touches on mine, but the poster never returned to explain how he implemented the final step, which is the part I&#39;m missing.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/188680/recommendations-for-converting-raster-images-to-vector-graphics\r\n  [2]: https://stackoverflow.com/questions/263305/drawing-a-topographical-map","title":"How to approximate a vector contour from an elevation raster?","body":"<p>I have an elevation map stored as a raster. I'd like to fit a smooth \"vector\" curve to the contours of constant elevation. In my application, the data are actually geographic elevations, but the problem could be generalized to any function of two variables.</p>\n\n<p>I can produce another raster with anti-aliased contour lines, and use that as input to the vector-fitting process, if that helps.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/188680/recommendations-for-converting-raster-images-to-vector-graphics\">This question</a> is similar, but I'm looking for a free library that I can use in my Java application, or an explanation of the algorithm I (a non-mathematician) can implement myself. Also, in my case, I've already found all of the \"edges\" I care about&mdash;I just need to vectorize them.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/263305/drawing-a-topographical-map\">Another question</a> touches on mine, but the poster never returned to explain how he implemented the final step, which is the part I'm missing.</p>\n"},{"tags":["java","string","algorithm","data-structures"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1658663422,"post_id":73098111,"comment_id":129102219,"body_markdown":"Please [edit] and improve your question so that it is clearer, more focused and easier to answer. 1) Please improve your question title so that it summarizes your actual problem. Your current title tells us little of use. 2) You mention that your code is having problems but you tell us nothing about what specific problems you may be having.","body":"Please <a href=\"https://stackoverflow.com/posts/73098111/edit\">edit</a> and improve your question so that it is clearer, more focused and easier to answer. 1) Please improve your question title so that it summarizes your actual problem. Your current title tells us little of use. 2) You mention that your code is having problems but you tell us nothing about what specific problems you may be having."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1658663425,"post_id":73098111,"comment_id":129102220,"body_markdown":"Please go through the [tour], the [help] and the [how to ask a good question](http://stackoverflow.com/help/how-to-ask) sections to see how this site works and to help you improve your current and future questions, which can help you get better answers. Please also have a look at [How do I ask and answer Homework questions](http://meta.stackexchange.com/a/10812/162852).","body":"Please go through the <a href=\"https://stackoverflow.com/tour\">tour</a>, the <a href=\"https://stackoverflow.com/help\">help center</a> and the <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask a good question</a> sections to see how this site works and to help you improve your current and future questions, which can help you get better answers. Please also have a look at <a href=\"http://meta.stackexchange.com/a/10812/162852\">How do I ask and answer Homework questions</a>."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":1,"creation_date":1658663530,"post_id":73098111,"comment_id":129102244,"body_markdown":"Please provide a few sample inputs, current outputs and expected outputs.","body":"Please provide a few sample inputs, current outputs and expected outputs."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1658663599,"post_id":73098111,"comment_id":129102264,"body_markdown":"Also, is this class supposed to be &quot;runnable&quot;, in other words, is it supposed to have a main method, or does that lie in another class? Either way, please show it.","body":"Also, is this class supposed to be &quot;runnable&quot;, in other words, is it supposed to have a main method, or does that lie in another class? Either way, please show it."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":3,"creation_date":1658663786,"post_id":73098111,"comment_id":129102293,"body_markdown":"&quot;Click HERE for the problem link.&quot; while links are nice as *additional* information, readers can&#39;t be *forced* to read linked content to understand the question because links tend to break. When the do question/answer becomes unclear and not very useful for others. That is why we *require* from posts to include *all necessary information* needed understand it *in the post itself*.","body":"&quot;Click HERE for the problem link.&quot; while links are nice as <i>additional</i> information, readers can&#39;t be <i>forced</i> to read linked content to understand the question because links tend to break. When the do question/answer becomes unclear and not very useful for others. That is why we <i>require</i> from posts to include <i>all necessary information</i> needed understand it <i>in the post itself</i>."},{"owner":{"account_id":19642142,"reputation":23,"user_id":14377954,"display_name":"Vishal"},"score":0,"creation_date":1658679378,"post_id":73098111,"comment_id":129105581,"body_markdown":"Thank you all for your feedback, I&#39;ll definitely keep these feedbacks in mind and will ask good questions with good explanations in the future. I am in a very bad mood while posting this question because I&#39;m not getting any source for help and it would be easier for me to explain my problem in my mother tongue. Thank you all :)","body":"Thank you all for your feedback, I&#39;ll definitely keep these feedbacks in mind and will ask good questions with good explanations in the future. I am in a very bad mood while posting this question because I&#39;m not getting any source for help and it would be easier for me to explain my problem in my mother tongue. Thank you all :)"}],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658668487,"creation_date":1658665725,"answer_id":73098403,"question_id":73098111,"body_markdown":"You have a logic error in that once you exhaust `k` the code then needs to return to the first replacement index to resume the search.\r\n\r\nYour implementation simply resumes the search from the last index where the `k` is exhausted.\r\n\r\nUsing the first failed case (`characterReplacement(&quot;BABABBA&quot;, 1)`) the posted code finds these subsequences (found subsequence in bold - first line is test case):\r\n\r\nBABABBA&lt;br/&gt;\r\n**BBB**ABBA&lt;br/&gt;\r\nBAB**AA**BA&lt;br/&gt;\r\nBABAB**BB**&lt;br/&gt;\r\n\r\nwhen it should find:\r\n\r\nBABABBA&lt;br/&gt;\r\n**BBB**ABBA&lt;br/&gt;\r\nB**AAA**BBA&lt;br/&gt;\r\nBA**BBBB**A           **&lt;-- OP code misses this one** &lt;br/&gt;\r\nBAB**AA**BA&lt;br/&gt;\r\nBABA**BBB**&lt;br/&gt;\r\nBABABB**A**&lt;br/&gt;\r\n\r\n\r\n\r\nTo fix this you should first change your for loop to a while loop:\r\n\r\n    i = 0;\r\n    while (i &lt; s.length()) {\r\n    }\r\n\r\nAnd introduce an index variable `lastStart` which indicates the beginning of the subsequence on first mismatch:\r\n\r\n    int lastStart = 0;\r\n\r\nAnd reset it to 0 as long as there is a sequence match:\r\n\r\n    if (count == 0) {\r\n        // .. existing code\r\n        lastStart = 0;\r\n    }\r\n\r\nAnd reset the loop variable when replacement is exhausted subsequence mismatch and maintain `lastStart` on **first** subsequence mismatch.\r\n\r\n    else {\r\n        if (ptr == 0) {\r\n            // existing code\r\n            i = lastStart;\r\n        }\r\n        if (ptr == k) lastStart = i;\r\n        // existing code\r\n    }\r\n\r\nResults:\r\n\r\n\r\n| Test | OP | Actual | Expected |\r\n| ---- | -- | ------ | -------- |\r\n| `characterReplacement(&quot;ABAB&quot;, 2)` | 4 | 4 | 4 |\r\n| `characterReplacement(&quot;AABABBA&quot;, 1)` | 4 | 4 | 4 |\r\n| `characterReplacement(&quot;BABABBA&quot;, 1))` | 3 | 4 | 4 |\r\n| `characterReplacement(&quot;BABABCBABBB&quot;, 2)` | 5 | 7 | 7 |\r\n\r\n\r\n----\r\n\r\nFull code:\r\n\r\n    public int characterReplacement(String s, int k) {\r\n        \r\n        int count = 0;\r\n        int max = Integer.MIN_VALUE; \r\n        int ptr = k;  \r\n        char ch = &#39; &#39;;\r\n        int i = 0;\r\n        int lastStart = 0;\r\n        \r\n        while (i &lt; s.length())\r\n        {\r\n            \r\n            \r\n            // if at sometime, ptr equals zero then count will also be zero\r\n            if(count == 0){\r\n                ch = s.charAt(i);\r\n                count = 1;\r\n                lastStart = 0;\r\n            }\r\n            else{\r\n                if(s.charAt(i) == ch){\r\n                    count++;\r\n                    max = Math.max(count, max);\r\n                }\r\n                else{\r\n                    if(ptr == 0){\r\n                        ch = s.charAt(i);\r\n                        ptr = k;\r\n                        count = 0;\r\n                        i = lastStart;\r\n                        continue;\r\n                    }\r\n                    if (ptr == k) lastStart = i;\r\n                    ptr--;\r\n                    count++;\r\n                    max = Math.max(count, max);\r\n                }\r\n            }\r\n            i++;\r\n        }\r\n        return max;\r\n    }\r\n","title":"Facing problem in a Leetcode practice problem related to String","body":"<p>You have a logic error in that once you exhaust <code>k</code> the code then needs to return to the first replacement index to resume the search.</p>\n<p>Your implementation simply resumes the search from the last index where the <code>k</code> is exhausted.</p>\n<p>Using the first failed case (<code>characterReplacement(&quot;BABABBA&quot;, 1)</code>) the posted code finds these subsequences (found subsequence in bold - first line is test case):</p>\n<p>BABABBA<br/>\n<strong>BBB</strong>ABBA<br/>\nBAB<strong>AA</strong>BA<br/>\nBABAB<strong>BB</strong><br/></p>\n<p>when it should find:</p>\n<p>BABABBA<br/>\n<strong>BBB</strong>ABBA<br/>\nB<strong>AAA</strong>BBA<br/>\nBA<strong>BBBB</strong>A           <strong>&lt;-- OP code misses this one</strong> <br/>\nBAB<strong>AA</strong>BA<br/>\nBABA<strong>BBB</strong><br/>\nBABABB<strong>A</strong><br/></p>\n<p>To fix this you should first change your for loop to a while loop:</p>\n<pre><code>i = 0;\nwhile (i &lt; s.length()) {\n}\n</code></pre>\n<p>And introduce an index variable <code>lastStart</code> which indicates the beginning of the subsequence on first mismatch:</p>\n<pre><code>int lastStart = 0;\n</code></pre>\n<p>And reset it to 0 as long as there is a sequence match:</p>\n<pre><code>if (count == 0) {\n    // .. existing code\n    lastStart = 0;\n}\n</code></pre>\n<p>And reset the loop variable when replacement is exhausted subsequence mismatch and maintain <code>lastStart</code> on <strong>first</strong> subsequence mismatch.</p>\n<pre><code>else {\n    if (ptr == 0) {\n        // existing code\n        i = lastStart;\n    }\n    if (ptr == k) lastStart = i;\n    // existing code\n}\n</code></pre>\n<p>Results:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Test</th>\n<th>OP</th>\n<th>Actual</th>\n<th>Expected</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>characterReplacement(&quot;ABAB&quot;, 2)</code></td>\n<td>4</td>\n<td>4</td>\n<td>4</td>\n</tr>\n<tr>\n<td><code>characterReplacement(&quot;AABABBA&quot;, 1)</code></td>\n<td>4</td>\n<td>4</td>\n<td>4</td>\n</tr>\n<tr>\n<td><code>characterReplacement(&quot;BABABBA&quot;, 1))</code></td>\n<td>3</td>\n<td>4</td>\n<td>4</td>\n</tr>\n<tr>\n<td><code>characterReplacement(&quot;BABABCBABBB&quot;, 2)</code></td>\n<td>5</td>\n<td>7</td>\n<td>7</td>\n</tr>\n</tbody>\n</table>\n</div><hr />\n<p>Full code:</p>\n<pre><code>public int characterReplacement(String s, int k) {\n    \n    int count = 0;\n    int max = Integer.MIN_VALUE; \n    int ptr = k;  \n    char ch = ' ';\n    int i = 0;\n    int lastStart = 0;\n    \n    while (i &lt; s.length())\n    {\n        \n        \n        // if at sometime, ptr equals zero then count will also be zero\n        if(count == 0){\n            ch = s.charAt(i);\n            count = 1;\n            lastStart = 0;\n        }\n        else{\n            if(s.charAt(i) == ch){\n                count++;\n                max = Math.max(count, max);\n            }\n            else{\n                if(ptr == 0){\n                    ch = s.charAt(i);\n                    ptr = k;\n                    count = 0;\n                    i = lastStart;\n                    continue;\n                }\n                if (ptr == k) lastStart = i;\n                ptr--;\n                count++;\n                max = Math.max(count, max);\n            }\n        }\n        i++;\n    }\n    return max;\n}\n</code></pre>\n"}],"owner":{"account_id":19642142,"reputation":23,"user_id":14377954,"display_name":"Vishal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":491,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":73098403,"answer_count":1,"score":-2,"last_activity_date":1658681333,"creation_date":1658663199,"question_id":73098111,"body_markdown":"Click [HERE][1] for the problem link.\r\n\r\n**Problem Statement** - You are given a string s and an integer k. You can choose any character of the string and change it to any other uppercase English character. You can perform this operation at most k times.\r\n\r\nReturn the length of the longest substring containing the same letter you can get after performing the above operations.\r\n\r\n \r\n\r\nExample 1:\r\n\r\nInput: s = &quot;ABAB&quot;, k = 2;\r\nOutput: 4\r\n\r\nExplanation: Replace the two &#39;A&#39;s with two &#39;B&#39;s or vice versa.\r\n\r\nExample 2:\r\n\r\nInput: s = &quot;AABABBA&quot;, k = 1;\r\nOutput: 4\r\n\r\nExplanation: Replace the one &#39;A&#39; in the middle with &#39;B&#39; and form &quot;AABBBBA&quot;.\r\nThe substring &quot;BBBB&quot; has the longest repeating letters, which is 4.\r\n \r\n\r\nConstraints:\r\n\r\n1 &lt;= s.length &lt;= 105\r\ns consists of only uppercase English letters.\r\n0 &lt;= k &lt;= s.length\r\n\r\n\r\n\r\n**MY APPROACH** - \r\n\r\nI have been trying to solve this problem since today, but I am lacking some knowledge. I am trying to solve this problem with the approach inspired by **VOYER&#39;s MOORE MAJORITY VOTING ALGORITHM**.\r\n\r\n\r\n- My intuition is that suppose the first character will have the max count, then if we find another character then decrease the value of ptr and increase the count along with storing the value in max.\r\n- if at some point, ptr == 0, and there are still characters remaining then make the current character as the max_character and repeat the same process. Similar to the majority voting algorithm.\r\n- But, I am making some mistakes, I don&#39;t know what but I&#39;m really close and want to solve this problem using this approach. \r\n```\r\nclass Solution {\r\n    public int characterReplacement(String s, int k) {\r\n        \r\n        int count = 0;\r\n\t\tint max = Integer.MIN_VALUE; \r\n\t\tint ptr = k;  \r\n        char ch = &#39; &#39;;\r\n        \r\n        for(int i = 0; i &lt; s.length(); i++){\r\n            \r\n\t\t\t// if at sometime, ptr equals zero then count will also be zero\r\n            if(count == 0){\r\n                ch = s.charAt(i);\r\n                count = 1;\r\n            }\r\n            else{\r\n                if(s.charAt(i) == ch){\r\n                    count++;\r\n                    max = Math.max(count, max);\r\n                }\r\n                else{\r\n                    if(ptr == 0){\r\n                        ch = s.charAt(i);\r\n                        ptr = k;\r\n                        count = 0;\r\n                        continue;\r\n                    }\r\n                    ptr--;\r\n                    count++;\r\n                    max = Math.max(count, max);\r\n                }\r\n            }\r\n        }\r\n        return max;\r\n    }\r\n}\r\n```\r\nI hope, I am able to explain my approach clearly, English is not my mother tongue, so grammatical mistakes can happen. And also, I know the approach to solve this problem using hashmap, but want to solve it using this approach.\r\n\r\n\r\n  [1]: https://leetcode.com/problems/longest-repeating-character-replacement/","title":"Facing problem in a Leetcode practice problem related to String","body":"<p>Click <a href=\"https://leetcode.com/problems/longest-repeating-character-replacement/\" rel=\"nofollow noreferrer\">HERE</a> for the problem link.</p>\n<p><strong>Problem Statement</strong> - You are given a string s and an integer k. You can choose any character of the string and change it to any other uppercase English character. You can perform this operation at most k times.</p>\n<p>Return the length of the longest substring containing the same letter you can get after performing the above operations.</p>\n<p>Example 1:</p>\n<p>Input: s = &quot;ABAB&quot;, k = 2;\nOutput: 4</p>\n<p>Explanation: Replace the two 'A's with two 'B's or vice versa.</p>\n<p>Example 2:</p>\n<p>Input: s = &quot;AABABBA&quot;, k = 1;\nOutput: 4</p>\n<p>Explanation: Replace the one 'A' in the middle with 'B' and form &quot;AABBBBA&quot;.\nThe substring &quot;BBBB&quot; has the longest repeating letters, which is 4.</p>\n<p>Constraints:</p>\n<p>1 &lt;= s.length &lt;= 105\ns consists of only uppercase English letters.\n0 &lt;= k &lt;= s.length</p>\n<p><strong>MY APPROACH</strong> -</p>\n<p>I have been trying to solve this problem since today, but I am lacking some knowledge. I am trying to solve this problem with the approach inspired by <strong>VOYER's MOORE MAJORITY VOTING ALGORITHM</strong>.</p>\n<ul>\n<li>My intuition is that suppose the first character will have the max count, then if we find another character then decrease the value of ptr and increase the count along with storing the value in max.</li>\n<li>if at some point, ptr == 0, and there are still characters remaining then make the current character as the max_character and repeat the same process. Similar to the majority voting algorithm.</li>\n<li>But, I am making some mistakes, I don't know what but I'm really close and want to solve this problem using this approach.</li>\n</ul>\n<pre><code>class Solution {\n    public int characterReplacement(String s, int k) {\n        \n        int count = 0;\n        int max = Integer.MIN_VALUE; \n        int ptr = k;  \n        char ch = ' ';\n        \n        for(int i = 0; i &lt; s.length(); i++){\n            \n            // if at sometime, ptr equals zero then count will also be zero\n            if(count == 0){\n                ch = s.charAt(i);\n                count = 1;\n            }\n            else{\n                if(s.charAt(i) == ch){\n                    count++;\n                    max = Math.max(count, max);\n                }\n                else{\n                    if(ptr == 0){\n                        ch = s.charAt(i);\n                        ptr = k;\n                        count = 0;\n                        continue;\n                    }\n                    ptr--;\n                    count++;\n                    max = Math.max(count, max);\n                }\n            }\n        }\n        return max;\n    }\n}\n</code></pre>\n<p>I hope, I am able to explain my approach clearly, English is not my mother tongue, so grammatical mistakes can happen. And also, I know the approach to solve this problem using hashmap, but want to solve it using this approach.</p>\n"},{"tags":["java","xml","rest","post"],"comments":[{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":1,"creation_date":1658676874,"post_id":73099662,"comment_id":129104998,"body_markdown":"Without sample controller code, it would be hard to answer your question. We don&#39;t know which framework you are using or how your validation logic is written.","body":"Without sample controller code, it would be hard to answer your question. We don&#39;t know which framework you are using or how your validation logic is written."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1658677821,"post_id":73099662,"comment_id":129105220,"body_markdown":"Welcome to Stack Overflow. You can take the [tour] and read [ask] for more guidance on how to write a good question. You can also take a look at [mre] for guidance on how to help the community recreate your specific problem. You will be more likely to receive relevant &amp; helpful answers, that way.","body":"Welcome to Stack Overflow. You can take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for more guidance on how to write a good question. You can also take a look at <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for guidance on how to help the community recreate your specific problem. You will be more likely to receive relevant &amp; helpful answers, that way."},{"owner":{"account_id":25883634,"reputation":9,"user_id":19612205,"display_name":"Alex"},"score":0,"creation_date":1658678077,"post_id":73099662,"comment_id":129105276,"body_markdown":"@aatwork, added more details","body":"@aatwork, added more details"}],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658680737,"creation_date":1658680737,"answer_id":73100225,"question_id":73099662,"body_markdown":"You can&#39;t use request body as a method parameter then. I believe the framework you are using (most likely Spring) doesn&#39;t have optional request body feature. You have to manually get the payload from request stream &amp; process it.\r\nIt should be something like:\r\n\r\n    @POST\r\n    @Path(&quot;/sites/{siteid}/filestatus&quot;)\r\n    public Response linkContent(\r\n            @ApiParam(value = &quot;site id&quot;, required = true) @PathParam(&quot;siteid&quot;) String siteId,\r\n            @ApiParam(value = &quot;status&quot;, required = true) @QueryParam(&quot;status&quot;) String status, HttpServletRequest request) {\r\n            byte[] payload = IOUtils.toByteArray(request.getReader(), request.getCharacterEncoding());      \r\n            String body =  new String(payload, request.getCharacterEncoding());\r\n            if(body == null){\r\n                // do something\r\n            } else {\r\n                // parse body to convert to xml object dueDatesDetails\r\n            }","title":"How to parse request body of POST request, if client set content-type=&quot;application/xml&quot; and body=null?","body":"<p>You can't use request body as a method parameter then. I believe the framework you are using (most likely Spring) doesn't have optional request body feature. You have to manually get the payload from request stream &amp; process it.\nIt should be something like:</p>\n<pre><code>@POST\n@Path(&quot;/sites/{siteid}/filestatus&quot;)\npublic Response linkContent(\n        @ApiParam(value = &quot;site id&quot;, required = true) @PathParam(&quot;siteid&quot;) String siteId,\n        @ApiParam(value = &quot;status&quot;, required = true) @QueryParam(&quot;status&quot;) String status, HttpServletRequest request) {\n        byte[] payload = IOUtils.toByteArray(request.getReader(), request.getCharacterEncoding());      \n        String body =  new String(payload, request.getCharacterEncoding());\n        if(body == null){\n            // do something\n        } else {\n            // parse body to convert to xml object dueDatesDetails\n        }\n</code></pre>\n"}],"owner":{"account_id":25883634,"reputation":9,"user_id":19612205,"display_name":"Alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":267,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1658680737,"creation_date":1658676234,"question_id":73099662,"body_markdown":"I have POST REST endpoint, which initially doesn&#39;t expect any request body. I want to add optional request body for this API. Optional, means I want all clients, which used this API with content-type=&quot;application/xml&quot; and empty body, to continue using API in the same manner, without rewriting any single row of code. For content-type=&quot;application/json&quot;, it works fine, no need client to alter his code. But for &quot;application/xml&quot;, clients now receive &quot;400 Bad request&quot; response. Is there any chance to introduce optional request body and support all existing API clients? \r\n\r\nREST endpoint is written in java, and annotations from  &quot;javax.xml.bind.annotation&quot; package are used to declare object model\r\n\r\nBelow is signature of endpoint, defined with swagger annotations. dueDatesDetails - object that is supposed to be added as optional: \r\n\r\n    @POST\r\n\t@Path(&quot;/sites/{siteid}/filestatus&quot;)\r\n\tpublic Response linkContent(\r\n\t\t\t@ApiParam(value = &quot;site id&quot;, required = true) @PathParam(&quot;siteid&quot;) String siteId,\r\n\t\t\t@ApiParam(value = &quot;status&quot;, required = true) @QueryParam(&quot;status&quot;) String status,\r\n\t\t\tDueDatesDetails dueDatesDetails) {\r\n\r\nHere is java object model, that must be optional:\r\n\r\n    @XmlRootElement(name = &quot;duedatesdetails&quot;)\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    public class DueDatesDetails\r\n    {\r\n\t    @Getter\r\n\t    @Setter\r\n\t    @XmlElement(name = &quot;duedatedetails&quot;)\r\n\t    @JsonProperty(&quot;duedatesdetails&quot;)\r\n\t    private List&lt;DueDateDetails&gt; dueDateDetailsList;\r\n    }","title":"How to parse request body of POST request, if client set content-type=&quot;application/xml&quot; and body=null?","body":"<p>I have POST REST endpoint, which initially doesn't expect any request body. I want to add optional request body for this API. Optional, means I want all clients, which used this API with content-type=&quot;application/xml&quot; and empty body, to continue using API in the same manner, without rewriting any single row of code. For content-type=&quot;application/json&quot;, it works fine, no need client to alter his code. But for &quot;application/xml&quot;, clients now receive &quot;400 Bad request&quot; response. Is there any chance to introduce optional request body and support all existing API clients?</p>\n<p>REST endpoint is written in java, and annotations from  &quot;javax.xml.bind.annotation&quot; package are used to declare object model</p>\n<p>Below is signature of endpoint, defined with swagger annotations. dueDatesDetails - object that is supposed to be added as optional:</p>\n<pre><code>@POST\n@Path(&quot;/sites/{siteid}/filestatus&quot;)\npublic Response linkContent(\n        @ApiParam(value = &quot;site id&quot;, required = true) @PathParam(&quot;siteid&quot;) String siteId,\n        @ApiParam(value = &quot;status&quot;, required = true) @QueryParam(&quot;status&quot;) String status,\n        DueDatesDetails dueDatesDetails) {\n</code></pre>\n<p>Here is java object model, that must be optional:</p>\n<pre><code>@XmlRootElement(name = &quot;duedatesdetails&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class DueDatesDetails\n{\n    @Getter\n    @Setter\n    @XmlElement(name = &quot;duedatedetails&quot;)\n    @JsonProperty(&quot;duedatesdetails&quot;)\n    private List&lt;DueDateDetails&gt; dueDateDetailsList;\n}\n</code></pre>\n"},{"tags":["java","docker","kubernetes","dockerfile"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1658662278,"post_id":73097936,"comment_id":129102006,"body_markdown":"I am not familiar with the spring-boot-maven-plugin, but have seen a similar concept in quarkus. The idea is to layer the image properly. Copy files in the order from &quot;less likely to change&quot; to &quot;more likely to change&quot;. The dependencies, for example, should be relatively stable, while the application changes frequently. This faciliates the reuse of layers, and in return less data has to be transmitted (to and from the registry).","body":"I am not familiar with the spring-boot-maven-plugin, but have seen a similar concept in quarkus. The idea is to layer the image properly. Copy files in the order from &quot;less likely to change&quot; to &quot;more likely to change&quot;. The dependencies, for example, should be relatively stable, while the application changes frequently. This faciliates the reuse of layers, and in return less data has to be transmitted (to and from the registry)."}],"answers":[{"tags":[],"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658680328,"creation_date":1658680328,"answer_id":73100172,"question_id":73097936,"body_markdown":"This setup produces an image that is smaller to download when you deploy an updated version of the image with just changed code, but not any of the changed dependencies.\r\n\r\nA Docker image is made of _layers_, and in the setup you show here, each `COPY` command is a separate layer.  In the first form, the `COPY` with the fat jar produces a single layer, and if you change anything in the application you have to download that entire layer again (including all of the unchanged dependencies).  In the second form, though, if the `dependencies` and `spring-boot-loader` trees haven&#39;t changed (which is probably the common case) then only the later layers will need to be downloaded.\r\n\r\nFor a more practical example, let&#39;s say you&#39;re labeling your Docker images with a date stamp, and the most recent build was `registry.example.com/your-image:20220722`.  Now if you rebuild with the second Dockerfile\r\n\r\n```sh\r\ndocker build -t registry.example.com/your-image:20220725 .\r\ndocker push registry.example.com/your-image:20220725\r\n```\r\n\r\nDocker will recognize that the registry already contains the &quot;dependencies&quot; layer and not push it again.  Similarly, if you update a Kubernetes manifest\r\n\r\n```yaml\r\nimage: registry.example.com/your-image:20220725 # was 20220722\r\n```\r\n\r\nthe cluster will download a piece of data called the _image manifest_ and realize it already has the base layers, so it only needs to download the updated application layer at the end.\r\n\r\nIf you&#39;re working totally locally, there&#39;s not especially a benefit to one approach over the other.\r\n\r\nThe Spring Boot documentation has a section on [Container Images](https://docs.spring.io/spring-boot/docs/current/reference/html/container-images.html#container-images) which discusses this specific approach further.","title":"Building docker image for Spring Boot app using Dockerfile and running using JarLauncher","body":"<p>This setup produces an image that is smaller to download when you deploy an updated version of the image with just changed code, but not any of the changed dependencies.</p>\n<p>A Docker image is made of <em>layers</em>, and in the setup you show here, each <code>COPY</code> command is a separate layer.  In the first form, the <code>COPY</code> with the fat jar produces a single layer, and if you change anything in the application you have to download that entire layer again (including all of the unchanged dependencies).  In the second form, though, if the <code>dependencies</code> and <code>spring-boot-loader</code> trees haven't changed (which is probably the common case) then only the later layers will need to be downloaded.</p>\n<p>For a more practical example, let's say you're labeling your Docker images with a date stamp, and the most recent build was <code>registry.example.com/your-image:20220722</code>.  Now if you rebuild with the second Dockerfile</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker build -t registry.example.com/your-image:20220725 .\ndocker push registry.example.com/your-image:20220725\n</code></pre>\n<p>Docker will recognize that the registry already contains the &quot;dependencies&quot; layer and not push it again.  Similarly, if you update a Kubernetes manifest</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>image: registry.example.com/your-image:20220725 # was 20220722\n</code></pre>\n<p>the cluster will download a piece of data called the <em>image manifest</em> and realize it already has the base layers, so it only needs to download the updated application layer at the end.</p>\n<p>If you're working totally locally, there's not especially a benefit to one approach over the other.</p>\n<p>The Spring Boot documentation has a section on <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/container-images.html#container-images\" rel=\"nofollow noreferrer\">Container Images</a> which discusses this specific approach further.</p>\n"}],"owner":{"account_id":3938317,"reputation":4776,"user_id":3253853,"accept_rate":66,"display_name":"Alex Man"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":804,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658680328,"creation_date":1658661848,"question_id":73097936,"body_markdown":"I was using a DockerFile for building a spring boot jar file, uploads to artifactory and deploys to K8S. For doing this I wrote a standard Dockerfile like as shown below\r\n\r\n\r\n    FROM maven:3.6.6-jdk-11 AS build\r\n    WORKDIR source\r\n    COPY . source\r\n    RUN mvn -q clean package -DskipTests\r\n    \r\n    \r\n    FROM maven:3.6.6-jdk-11\r\n    COPY --from=build source/app-0.0.1-SNAPSHOT.jar app.jar\r\n    EXPOSE 8080\r\n    RUN chmod +x app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n\r\nBut I have seen a different project where they have mentioned like as shown below\r\n\r\n    FROM maven:3.8.4-jdk-11 AS builder\r\n    WORKDIR source\r\n    COPY . .\r\n    RUN mvn -q clean package -DskipTests\r\n    RUN cp target/cdacapp-0.0.1-RELEASE.jar ./cdacapp.jar\r\n    RUN java -Djarmode=layertools -jar cdacapp.jar extract\r\n    \r\n    FROM openjdk:11-jre-slim\r\n    WORKDIR application\r\n    COPY --from=builder source/dependencies/ ./\r\n    COPY --from=builder source/spring-boot-loader/ ./\r\n    COPY --from=builder source/webjars/ ./\r\n    COPY --from=builder source/application/ ./\r\n    ENTRYPOINT [ &quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\r\n\r\nI would like to know what benefit we will get by running the application using JarLauncher","title":"Building docker image for Spring Boot app using Dockerfile and running using JarLauncher","body":"<p>I was using a DockerFile for building a spring boot jar file, uploads to artifactory and deploys to K8S. For doing this I wrote a standard Dockerfile like as shown below</p>\n<pre><code>FROM maven:3.6.6-jdk-11 AS build\nWORKDIR source\nCOPY . source\nRUN mvn -q clean package -DskipTests\n\n\nFROM maven:3.6.6-jdk-11\nCOPY --from=build source/app-0.0.1-SNAPSHOT.jar app.jar\nEXPOSE 8080\nRUN chmod +x app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n<p>But I have seen a different project where they have mentioned like as shown below</p>\n<pre><code>FROM maven:3.8.4-jdk-11 AS builder\nWORKDIR source\nCOPY . .\nRUN mvn -q clean package -DskipTests\nRUN cp target/cdacapp-0.0.1-RELEASE.jar ./cdacapp.jar\nRUN java -Djarmode=layertools -jar cdacapp.jar extract\n\nFROM openjdk:11-jre-slim\nWORKDIR application\nCOPY --from=builder source/dependencies/ ./\nCOPY --from=builder source/spring-boot-loader/ ./\nCOPY --from=builder source/webjars/ ./\nCOPY --from=builder source/application/ ./\nENTRYPOINT [ &quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]\n</code></pre>\n<p>I would like to know what benefit we will get by running the application using JarLauncher</p>\n"},{"tags":["java","scala","bazel","bazel-rules"],"comments":[{"owner":{"account_id":975399,"reputation":7972,"user_id":996815,"accept_rate":96,"display_name":"Vertexwahn"},"score":0,"creation_date":1658499970,"post_id":73076732,"comment_id":129074052,"body_markdown":"Please provide more context - what command did you type - what happens before this message appears?","body":"Please provide more context - what command did you type - what happens before this message appears?"},{"owner":{"account_id":8934828,"reputation":551,"user_id":6666008,"display_name":"ss301"},"score":0,"creation_date":1658557290,"post_id":73076732,"comment_id":129085725,"body_markdown":"bazel run applicationName","body":"bazel run applicationName"},{"owner":{"account_id":8934828,"reputation":551,"user_id":6666008,"display_name":"ss301"},"score":0,"creation_date":1658683554,"post_id":73076732,"comment_id":129106552,"body_markdown":"before this message it shows -&gt; INFO: Build completed successfully, 1 total action","body":"before this message it shows -&gt; INFO: Build completed successfully, 1 total action"}],"answers":[{"tags":[],"owner":{"account_id":975399,"reputation":7972,"user_id":996815,"accept_rate":96,"display_name":"Vertexwahn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658499892,"creation_date":1658499892,"answer_id":73081921,"question_id":73076732,"body_markdown":"Follow the installation guide [here](https://docs.bazel.build/versions/main/install-windows.html). You need to install MSYS2 x86_64 as described in the install manual.","title":"Rlocation, LAUNCHER ERROR while doing bazel run command","body":"<p>Follow the installation guide <a href=\"https://docs.bazel.build/versions/main/install-windows.html\" rel=\"nofollow noreferrer\">here</a>. You need to install MSYS2 x86_64 as described in the install manual.</p>\n"}],"owner":{"account_id":8934828,"reputation":551,"user_id":6666008,"display_name":"ss301"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658680251,"creation_date":1658475336,"question_id":73076732,"body_markdown":"Im getting the following error while doing bazel run command.\r\n\r\n```LAUNCHER ERROR: Rlocation failed on external\\local_jdk\\bin\\java.exe, path doesn&#39;t exist in MANIFEST file```\r\n\r\nBazel build seems to work fine but the run commands throws this error. \r\n\r\nI do have java installed with version\r\n\r\n```java version &quot;18.0.1.1&quot; 2022-04-22\r\nJava(TM) SE Runtime Environment (build 18.0.1.1+2-6)\r\nJava HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\r\n```\r\n\r\nBazel build command returns successful message - bazel build scalaBinaryName\r\n\r\n\r\nAppreciate any help or hint on this issue. Im searching in the dark here.","title":"Rlocation, LAUNCHER ERROR while doing bazel run command","body":"<p>Im getting the following error while doing bazel run command.</p>\n<p><code>LAUNCHER ERROR: Rlocation failed on external\\local_jdk\\bin\\java.exe, path doesn't exist in MANIFEST file</code></p>\n<p>Bazel build seems to work fine but the run commands throws this error.</p>\n<p>I do have java installed with version</p>\n<pre class=\"lang-java prettyprint-override\"><code>Java(TM) SE Runtime Environment (build 18.0.1.1+2-6)\nJava HotSpot(TM) 64-Bit Server VM (build 18.0.1.1+2-6, mixed mode, sharing)\n</code></pre>\n<p>Bazel build command returns successful message - bazel build scalaBinaryName</p>\n<p>Appreciate any help or hint on this issue. Im searching in the dark here.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1658419148,"post_id":73069221,"comment_id":129052299,"body_markdown":"`java -version` in command line pls?","body":"<code>java -version</code> in command line pls?"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1658419213,"post_id":73069221,"comment_id":129052332,"body_markdown":"Just to add class version 52 = java 8, which is not the latest version.  Suspect you may not be running the version of java you think.  Also, how are you running the jar?  Command line?  OS would also be helpful.","body":"Just to add class version 52 = java 8, which is not the latest version.  Suspect you may not be running the version of java you think.  Also, how are you running the jar?  Command line?  OS would also be helpful."}],"answers":[{"tags":[],"owner":{"account_id":22018813,"reputation":23,"user_id":16287918,"display_name":"Potato"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658680035,"creation_date":1658419943,"answer_id":73069510,"question_id":73069221,"body_markdown":"Update: I solved the issue by removing the javapath path variable and restarting.\r\n\r\nI believe it was the following I removed:\r\nC:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath","title":"Spring Boot Application has been compiled by more recent version of Java runtime","body":"<p>Update: I solved the issue by removing the javapath path variable and restarting.</p>\n<p>I believe it was the following I removed:\nC:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath</p>\n"}],"owner":{"account_id":22018813,"reputation":23,"user_id":16287918,"display_name":"Potato"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1289,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73069510,"answer_count":1,"score":2,"last_activity_date":1658680035,"creation_date":1658418591,"question_id":73069221,"body_markdown":"I am trying to launch my jar file for my spring boot application but I keep getting the error that it has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of Java Runtime only recognizes class file versions up to 52.0. I feel like I have tried everything I believe I am using the latest versions of Java. Is there anything I can do? If there is anything to download could you please link it?","title":"Spring Boot Application has been compiled by more recent version of Java runtime","body":"<p>I am trying to launch my jar file for my spring boot application but I keep getting the error that it has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of Java Runtime only recognizes class file versions up to 52.0. I feel like I have tried everything I believe I am using the latest versions of Java. Is there anything I can do? If there is anything to download could you please link it?</p>\n"},{"tags":["java","singleton","mutual-exclusion"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1467809323,"post_id":38224415,"comment_id":63870712,"body_markdown":"Have you checked the links in the &quot;Related&quot; section, on the right hand side of this page?","body":"Have you checked the links in the &quot;Related&quot; section, on the right hand side of this page?"},{"owner":{"account_id":3771295,"reputation":7247,"user_id":3133418,"accept_rate":100,"display_name":"nick zoum"},"score":0,"creation_date":1467811409,"post_id":38224415,"comment_id":63872153,"body_markdown":"Yeah, I&#39;ve found a few methods that can check if the app is already running. But i&#39;m also asking for 2 extra methods","body":"Yeah, I&#39;ve found a few methods that can check if the app is already running. But i&#39;m also asking for 2 extra methods"}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1467809843,"creation_date":1467809843,"answer_id":38224611,"question_id":38224415,"body_markdown":"Java applications works on different process. \r\n\r\nSo is not so easy to interact between two different process (already running application and the new one).\r\n\r\nWhat you can do is find a inter process communication mechanism and use it.\r\nTypical [inter process communications][1] use files or a common database.\r\n\r\nYou can store the id of the current main thread executing your java app.\r\n\r\nIf a new process starts check if there is an already running application. \r\nIf yes, you can use the same (or a new one) inter process communication system to send information that the main process should update. Then the secondary process kill itself.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Inter-process_communication","title":"Get instance of same Java application if it is already running","body":"<p>Java applications works on different process. </p>\n\n<p>So is not so easy to interact between two different process (already running application and the new one).</p>\n\n<p>What you can do is find a inter process communication mechanism and use it.\nTypical <a href=\"https://en.wikipedia.org/wiki/Inter-process_communication\" rel=\"nofollow\">inter process communications</a> use files or a common database.</p>\n\n<p>You can store the id of the current main thread executing your java app.</p>\n\n<p>If a new process starts check if there is an already running application. \nIf yes, you can use the same (or a new one) inter process communication system to send information that the main process should update. Then the secondary process kill itself.</p>\n"},{"tags":[],"owner":{"account_id":25883897,"reputation":11,"user_id":19612425,"display_name":"nafc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658679916,"creation_date":1658679916,"answer_id":73100127,"question_id":38224415,"body_markdown":"I know this is an old question, but I recently had to get count and PID of running instance in JAVA on Linux. Just thought I would post my solution in case it could help someone in the future. (I have been helped so much in the past, I figured I should pay back a little).\r\nSwitch return to lngPidOfrunning for PID of other instance rather than count. \r\n\r\n\r\n    public long checkIsAlreadyRunning(){\r\n        //Check if app is already running\r\n         long lngCountOfInstances = 0; //Use this to hold how many already running\r\n         String strProcessName = &quot;appNameToCheckFor&quot;;\r\n         //If it is required to also capture app running from within NetBeans, remove the .jar\r\n         System.out.println(&quot;ps -ef|grep &quot; + strProcessName);\r\n         try{\r\n             long lngPid = ProcessHandle.current().pid();//PID of this instance of the application\r\n             long lngPidOfRunning = 0; //Holder for PID of already running instance\r\n             System.out.println(lngPid+&quot;&quot;); //Only for verification\r\n             \r\n             Runtime rt = Runtime.getRuntime();\r\n             String[] cmd = {&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;ps -ef|grep &quot; + strProcessName };\r\n             Process proc = rt.exec(cmd);\r\n\r\n             delay_ms(2);//found I needed small delay to ensure buffer was ready\r\n             \r\n             BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n             \r\n             String strLineIn;\r\n             StringBuilder strOutput = new StringBuilder();\r\n             String strProcessId = &quot;&quot;;\r\n             while ((strLineIn = reader.readLine()) != null) {                   \r\n                if(!strLineIn.contains(&quot;grep&quot;) &amp;&amp; !strLineIn.contains(String.valueOf(lngPid))) {//ignore is PID is current, or line contais grep \r\n                    strOutput.append(strLineIn + &quot;\\r\\n&quot;);//Only here for debuging\r\n                    lngCountOfInstances++;\r\n                }\r\n             }\r\n             reader.close(); //always close the reader\r\n             String strReturn = removeDuplicates(strOutput.toString(),&quot; &quot;); // remove duplicate spaces frm reteun\r\n             String[] strArray = strReturn.split(&quot; &quot;);\r\n             if(strArray.length&gt;2){lngPidOfRunning = isLong(strArray[1]);}//Aray index 1 will be PID, isLong checks if valid long and if yes, retunrs long, esle 0;\r\n             System.out.println(lngPidOfRunning + &quot; --&gt; &quot; + strReturn); //Only here for debuging\r\n         }\r\n         catch(Exception ex){\r\n             ex.printStackTrace();\r\n             err(ex.getMessage(), ex); //remove this, I use funtion to log messages and stacktraces to file\r\n         }\r\n         //return lngPidOfrunning; //Use this is you would like to use the PID to bring running instance to front\r\n         return lngCountOfInstances; //use this if you just want to get count of running instances\r\n    }\r\n\r\n    private long isLong(String strValue){\r\n            if(NumberUtils.isParsable(strValue)){\r\n                return Long.parseLong(strValue);\r\n            }\r\n            return 0; \r\n    }","title":"Get instance of same Java application if it is already running","body":"<p>I know this is an old question, but I recently had to get count and PID of running instance in JAVA on Linux. Just thought I would post my solution in case it could help someone in the future. (I have been helped so much in the past, I figured I should pay back a little).\nSwitch return to lngPidOfrunning for PID of other instance rather than count.</p>\n<pre><code>public long checkIsAlreadyRunning(){\n    //Check if app is already running\n     long lngCountOfInstances = 0; //Use this to hold how many already running\n     String strProcessName = &quot;appNameToCheckFor&quot;;\n     //If it is required to also capture app running from within NetBeans, remove the .jar\n     System.out.println(&quot;ps -ef|grep &quot; + strProcessName);\n     try{\n         long lngPid = ProcessHandle.current().pid();//PID of this instance of the application\n         long lngPidOfRunning = 0; //Holder for PID of already running instance\n         System.out.println(lngPid+&quot;&quot;); //Only for verification\n         \n         Runtime rt = Runtime.getRuntime();\n         String[] cmd = {&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;ps -ef|grep &quot; + strProcessName };\n         Process proc = rt.exec(cmd);\n\n         delay_ms(2);//found I needed small delay to ensure buffer was ready\n         \n         BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n         \n         String strLineIn;\n         StringBuilder strOutput = new StringBuilder();\n         String strProcessId = &quot;&quot;;\n         while ((strLineIn = reader.readLine()) != null) {                   \n            if(!strLineIn.contains(&quot;grep&quot;) &amp;&amp; !strLineIn.contains(String.valueOf(lngPid))) {//ignore is PID is current, or line contais grep \n                strOutput.append(strLineIn + &quot;\\r\\n&quot;);//Only here for debuging\n                lngCountOfInstances++;\n            }\n         }\n         reader.close(); //always close the reader\n         String strReturn = removeDuplicates(strOutput.toString(),&quot; &quot;); // remove duplicate spaces frm reteun\n         String[] strArray = strReturn.split(&quot; &quot;);\n         if(strArray.length&gt;2){lngPidOfRunning = isLong(strArray[1]);}//Aray index 1 will be PID, isLong checks if valid long and if yes, retunrs long, esle 0;\n         System.out.println(lngPidOfRunning + &quot; --&gt; &quot; + strReturn); //Only here for debuging\n     }\n     catch(Exception ex){\n         ex.printStackTrace();\n         err(ex.getMessage(), ex); //remove this, I use funtion to log messages and stacktraces to file\n     }\n     //return lngPidOfrunning; //Use this is you would like to use the PID to bring running instance to front\n     return lngCountOfInstances; //use this if you just want to get count of running instances\n}\n\nprivate long isLong(String strValue){\n        if(NumberUtils.isParsable(strValue)){\n            return Long.parseLong(strValue);\n        }\n        return 0; \n}\n</code></pre>\n"}],"owner":{"account_id":3771295,"reputation":7247,"user_id":3133418,"accept_rate":100,"display_name":"nick zoum"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":950,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":38224611,"answer_count":2,"score":0,"last_activity_date":1658679916,"creation_date":1467809259,"question_id":38224415,"body_markdown":"Is it possible to check if a Java application is already running and if it is, get an instance of it?\r\nSay i have a jar that the first time it&#39;s clicked it opens a frame, and every time after that (until it&#39;s closed), it gets that frame and adds an object to it. This also needs to work without the main application having a close() method so the application will work again when reopened if it stops responding or it has been closed with task manager.","title":"Get instance of same Java application if it is already running","body":"<p>Is it possible to check if a Java application is already running and if it is, get an instance of it?\nSay i have a jar that the first time it's clicked it opens a frame, and every time after that (until it's closed), it gets that frame and adds an object to it. This also needs to work without the main application having a close() method so the application will work again when reopened if it stops responding or it has been closed with task manager.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1662511,"reputation":14161,"user_id":1530508,"accept_rate":100,"display_name":"ApproachingDarknessFish"},"score":0,"creation_date":1366844731,"post_id":16203662,"comment_id":23170001,"body_markdown":"You may be building your project without running it. What IDE are you using (eg eclipse, Netbeans)?","body":"You may be building your project without running it. What IDE are you using (eg eclipse, Netbeans)?"},{"owner":{"account_id":2079872,"reputation":19,"user_id":1852110,"display_name":"User1"},"score":0,"creation_date":1366845185,"post_id":16203662,"comment_id":23170133,"body_markdown":"Netbeans, I have been running the project though.","body":"Netbeans, I have been running the project though."}],"answers":[{"tags":[],"owner":{"account_id":204871,"reputation":19363,"user_id":453331,"accept_rate":100,"display_name":"kba"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1366844757,"creation_date":1366844757,"answer_id":16203722,"question_id":16203662,"body_markdown":"Your code is quite odd and creating a class to &quot;create lamps&quot; is very bad practice, but nevertheless, let&#39;s look at the problem at hand.\r\n\r\nWhen your program is being run, the `main` method of `Lamps` is being executed, but not the `main` method of `CreateLamps`. You need to call that method yourself. You could do that by putting `new CreateLamps(args)` in your `main` method in `Lamps`.\r\n\r\nBut still, I strongly advice against the structure of your program.","title":"Beginner Java Q","body":"<p>Your code is quite odd and creating a class to \"create lamps\" is very bad practice, but nevertheless, let's look at the problem at hand.</p>\n\n<p>When your program is being run, the <code>main</code> method of <code>Lamps</code> is being executed, but not the <code>main</code> method of <code>CreateLamps</code>. You need to call that method yourself. You could do that by putting <code>new CreateLamps(args)</code> in your <code>main</code> method in <code>Lamps</code>.</p>\n\n<p>But still, I strongly advice against the structure of your program.</p>\n"},{"tags":[],"owner":{"account_id":2509375,"reputation":1260,"user_id":2182220,"display_name":"Ray Stojonic"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1366845529,"creation_date":1366844760,"answer_id":16203723,"question_id":16203662,"body_markdown":"It looks like you have some basic misconceptions about how to best structure your classes.\r\n\r\nTypically, a class looks like this:\r\n\r\n    public class MyClass {\r\n        public MyClass() {\r\n            // constructor code\r\n        }\r\n\r\n        public static void main( String[] args ) {\r\n            MyClass myClass = new MyClass();\r\n            myClass.doStuff();\r\n        }\r\n\r\n        public void doStuff() {\r\n            // do stuff\r\n        }\r\n    }\r\n\r\nWhat you have is a mishmash of inner classes that are going to be a pain to work with and are  not how you want to start this adventure.","title":"Beginner Java Q","body":"<p>It looks like you have some basic misconceptions about how to best structure your classes.</p>\n\n<p>Typically, a class looks like this:</p>\n\n<pre><code>public class MyClass {\n    public MyClass() {\n        // constructor code\n    }\n\n    public static void main( String[] args ) {\n        MyClass myClass = new MyClass();\n        myClass.doStuff();\n    }\n\n    public void doStuff() {\n        // do stuff\n    }\n}\n</code></pre>\n\n<p>What you have is a mishmash of inner classes that are going to be a pain to work with and are  not how you want to start this adventure.</p>\n"},{"tags":[],"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366844769,"creation_date":1366844769,"answer_id":16203727,"question_id":16203662,"body_markdown":"You&#39;ve got classes and main methods all intermingled.  You need one class, `Lamp`, and a static main method in that class can test things out for you.  Something like this perhaps (I didn&#39;t try to compile it.)\r\n\r\nI also took the liberty of changing on the &quot;on/off&quot; variable to a boolean.\r\n\r\n    package lamps;\r\n\r\n    public class Lamp {\r\n\r\n       private boolean on = 0;\r\n       private int brightness = 0;\r\n\r\n       public void changeOn(boolean newValue) {\r\n           on = newValue;\r\n       }\r\n\r\n       public void changeBrightness(int newValue) {\r\n           brightness = newValue;\r\n       }\r\n\r\n       public void printStates() {\r\n           System.out.println(&quot;On:&quot; + on + \r\n                 &quot; brightness:&quot; + brightness);\r\n       }\r\n\r\n       public static void main(String[] args) {\r\n           Lamp lamp1 = new Lamp();\r\n           Lamp lamp2 = new Lamp();\r\n\r\n           lamp1.changeOn(true);\r\n           lamp1.changeBrightness(4);\r\n           lamp1.printStates();\r\n\r\n           lamp2.changeOn(true);\r\n           lamp2.changeBrightness(6);\r\n           lamp2.changeBrightness(4);\r\n           lamp2.changeOn(false);\r\n           lamp2.changeBrightness(0);\r\n           lamp2.printStates();\r\n        }\r\n    }\r\n","title":"Beginner Java Q","body":"<p>You've got classes and main methods all intermingled.  You need one class, <code>Lamp</code>, and a static main method in that class can test things out for you.  Something like this perhaps (I didn't try to compile it.)</p>\n\n<p>I also took the liberty of changing on the \"on/off\" variable to a boolean.</p>\n\n<pre><code>package lamps;\n\npublic class Lamp {\n\n   private boolean on = 0;\n   private int brightness = 0;\n\n   public void changeOn(boolean newValue) {\n       on = newValue;\n   }\n\n   public void changeBrightness(int newValue) {\n       brightness = newValue;\n   }\n\n   public void printStates() {\n       System.out.println(\"On:\" + on + \n             \" brightness:\" + brightness);\n   }\n\n   public static void main(String[] args) {\n       Lamp lamp1 = new Lamp();\n       Lamp lamp2 = new Lamp();\n\n       lamp1.changeOn(true);\n       lamp1.changeBrightness(4);\n       lamp1.printStates();\n\n       lamp2.changeOn(true);\n       lamp2.changeBrightness(6);\n       lamp2.changeBrightness(4);\n       lamp2.changeOn(false);\n       lamp2.changeBrightness(0);\n       lamp2.printStates();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2045455,"reputation":1274,"user_id":1825619,"accept_rate":77,"display_name":"orb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366897023,"creation_date":1366845362,"answer_id":16203828,"question_id":16203662,"body_markdown":"I think the important concept you are a little confused on here is what classes, methods, and fields are. Fields define data. methods define behavior to be applied to data (or cause some other effect). Classes group data (fields) with behavior (methods). Classes also perform encapsulation, which enables us to make data and methods private to a particular class, only available to the package the class belongs to (that is the default) or publicly available to any other class.\r\n\r\nIn this case you really only need one class. You can let the main method do most of the work. You can also keep those few methods you defined for setting field values and printing to System.out. You should make your methods and fields private unless you intend on allowing other classes to access them. Always use the highest level of privacy possible. It makes it possible for others to distinguish between your class&#39;s public API and the methods and fields  that are only meant to be used internally.\r\n\r\n    public class Lamp {\r\n\t    private int on = 0;\r\n\t    private int brightness = 0;\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    Lamp lamp1 = new Lamp();\r\n\t\t    Lamp lamp2 = new Lamp();\r\n\r\n\t\t    lamp1.changeOn(1);\r\n\t\t    lamp1.changeBrightness(4);\r\n\t\t    lamp1.printStates();\r\n\r\n\t\t    lamp2.changeOn(1);\r\n\t\t    lamp2.changeBrightness(6);\r\n\t\t    lamp2.changeBrightness(4);\r\n\t\t    lamp2.changeOn(0);\r\n\t\t    lamp2.changeBrightness(0);\r\n\t\t    lamp2.printStates();\r\n\t    }\r\n\r\n\t    public void changeOn(int newValue) {\r\n\t\t    on = newValue;\r\n\t    }\r\n\r\n\t    public void changeBrightness(int newValue) {\r\n\t\t    brightness = newValue;\r\n\t    }\r\n\r\n\t// maybe you don&#39;t want other classes to be able to print the state so make this method private\r\n\t    private void printStates() {\r\n\t\t     System.out.println(&quot;On/Off:&quot; + on + &quot; brightness:&quot; + brightness);\r\n\r\n\t    }\r\n    }\r\n","title":"Beginner Java Q","body":"<p>I think the important concept you are a little confused on here is what classes, methods, and fields are. Fields define data. methods define behavior to be applied to data (or cause some other effect). Classes group data (fields) with behavior (methods). Classes also perform encapsulation, which enables us to make data and methods private to a particular class, only available to the package the class belongs to (that is the default) or publicly available to any other class.</p>\n\n<p>In this case you really only need one class. You can let the main method do most of the work. You can also keep those few methods you defined for setting field values and printing to System.out. You should make your methods and fields private unless you intend on allowing other classes to access them. Always use the highest level of privacy possible. It makes it possible for others to distinguish between your class's public API and the methods and fields  that are only meant to be used internally.</p>\n\n<pre><code>public class Lamp {\n    private int on = 0;\n    private int brightness = 0;\n\n    public static void main(String[] args) {\n        Lamp lamp1 = new Lamp();\n        Lamp lamp2 = new Lamp();\n\n        lamp1.changeOn(1);\n        lamp1.changeBrightness(4);\n        lamp1.printStates();\n\n        lamp2.changeOn(1);\n        lamp2.changeBrightness(6);\n        lamp2.changeBrightness(4);\n        lamp2.changeOn(0);\n        lamp2.changeBrightness(0);\n        lamp2.printStates();\n    }\n\n    public void changeOn(int newValue) {\n        on = newValue;\n    }\n\n    public void changeBrightness(int newValue) {\n        brightness = newValue;\n    }\n\n// maybe you don't want other classes to be able to print the state so make this method private\n    private void printStates() {\n         System.out.println(\"On/Off:\" + on + \" brightness:\" + brightness);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7578033,"reputation":23,"user_id":5749690,"display_name":"Nolieman1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454701803,"creation_date":1454701501,"answer_id":35232276,"question_id":16203662,"body_markdown":"I know what your problem is. If you want to display a variable, you have to use the method:&lt;br&gt;\r\n\r\n    System.out.printf(&quot;&quot;);\r\n\r\nSo try this:\r\n\r\n    package lamps;\r\n\r\n    public class Lamps {\r\n\r\n    public static void main(String[] args) {\r\n        \r\n            int on = 0;\r\n            int brightness = 0;\r\n\r\n            void changeOn(int newValue) {\r\n                on = newValue;\r\n        }\r\n\r\n            void changeBrightness(int newValue) {\r\n                brightness = newValue;\r\n        }\r\n\r\n            void printStates() {\r\n                System.out.printf(&quot;On/Off: %d brightness %d&quot;on,brightness);\r\n                        \r\n\r\n        }\r\n    }\r\n\r\n        public void CreateLamps() {\r\n           Lamp lamp1 = new Lamp();\r\n           Lamp lamp2 = new Lamp();\r\n\r\n           lamp1.changeOn(1);\r\n           lamp1.changeBrightness(4);\r\n           lamp1.printStates();\r\n\r\n           lamp2.changeOn(1);\r\n           lamp2.changeBrightness(6);\r\n           lamp2.changeBrightness(4);\r\n           lamp2.changeOn(0);\r\n           lamp2.changeBrightness(0);\r\n           lamp2.printStates();\r\n    }\r\n\r\n\r\n        }\r\nThat should do it. &lt;br&gt;\r\nOh and also, You don&#39;t need 3 classes. Just create the method not the CreateLamps class.\r\n\r\n    ","title":"Beginner Java Q","body":"<p>I know what your problem is. If you want to display a variable, you have to use the method:<br></p>\n\n<pre><code>System.out.printf(\"\");\n</code></pre>\n\n<p>So try this:</p>\n\n<pre><code>package lamps;\n\npublic class Lamps {\n\npublic static void main(String[] args) {\n\n        int on = 0;\n        int brightness = 0;\n\n        void changeOn(int newValue) {\n            on = newValue;\n    }\n\n        void changeBrightness(int newValue) {\n            brightness = newValue;\n    }\n\n        void printStates() {\n            System.out.printf(\"On/Off: %d brightness %d\"on,brightness);\n\n\n    }\n}\n\n    public void CreateLamps() {\n       Lamp lamp1 = new Lamp();\n       Lamp lamp2 = new Lamp();\n\n       lamp1.changeOn(1);\n       lamp1.changeBrightness(4);\n       lamp1.printStates();\n\n       lamp2.changeOn(1);\n       lamp2.changeBrightness(6);\n       lamp2.changeBrightness(4);\n       lamp2.changeOn(0);\n       lamp2.changeBrightness(0);\n       lamp2.printStates();\n}\n\n\n    }\n</code></pre>\n\n<p>That should do it. <br>\nOh and also, You don't need 3 classes. Just create the method not the CreateLamps class.</p>\n"},{"tags":[],"owner":{"account_id":25883780,"reputation":1,"user_id":19612330,"display_name":"Megan Steinmasel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658679837,"creation_date":1658679837,"answer_id":73100114,"question_id":16203662,"body_markdown":"Structuring your classes will help you avoid confusion in the future. Using a beginner-friendly platform like NetBeans can help you do that. Netbeans has a feature that creates your main class for you. The main class in your program should initialize a class and then call the methods in that class you want to use, so shoot for something like this:\r\n\r\n    \r\n    public void main(String[] args) {\r\n        LampMethods lamp1 = new LampMehods();\r\n\r\n        lamp1.changeOn(1);\r\n        lamp1.changeBrightness(4);\r\n        lamp1.printStates();\r\n    }\r\n\r\nThen I recommend creating a new class (a different file that is still in the same package) to put all your methods in, maybe call it &quot;LampMethods&quot;. This way the structure is black and white. Main is for calling methods and LampMethods is where you store those methods.","title":"Beginner Java Q","body":"<p>Structuring your classes will help you avoid confusion in the future. Using a beginner-friendly platform like NetBeans can help you do that. Netbeans has a feature that creates your main class for you. The main class in your program should initialize a class and then call the methods in that class you want to use, so shoot for something like this:</p>\n<pre><code>public void main(String[] args) {\n    LampMethods lamp1 = new LampMehods();\n\n    lamp1.changeOn(1);\n    lamp1.changeBrightness(4);\n    lamp1.printStates();\n}\n</code></pre>\n<p>Then I recommend creating a new class (a different file that is still in the same package) to put all your methods in, maybe call it &quot;LampMethods&quot;. This way the structure is black and white. Main is for calling methods and LampMethods is where you store those methods.</p>\n"}],"owner":{"account_id":2079872,"reputation":19,"user_id":1852110,"display_name":"User1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":6,"score":0,"last_activity_date":1658679837,"creation_date":1366844430,"question_id":16203662,"body_markdown":"Just started learning Java, how can I change this so that it actually outputs `lamp1.printStates` and `lamp2.printStates?` When I run it, it just returns that it built successfully but nothing else.\r\n\r\n\r\n   \r\n\r\n     package lamps;\r\n        \r\n        public class Lamps {\r\n            \r\n        public static void main(String[] args) {\r\n            class Lamp {\r\n                int on = 0;\r\n                int brightness = 0;\r\n            \r\n                void changeOn(int newValue) {\r\n                    on = newValue;\r\n            }\r\n            \r\n                void changeBrightness(int newValue) {\r\n                    brightness = newValue;\r\n            }\r\n            \r\n                void printStates() {\r\n                    System.out.println(&quot;On/Off:&quot; + on + \r\n                            &quot; brightness:&quot; + brightness);\r\n                \r\n            }\r\n        }\r\n    \r\n        class CreateLamps {\r\n            public void main(String[] args) {\r\n               Lamp lamp1 = new Lamp();\r\n               Lamp lamp2 = new Lamp();\r\n        \r\n               lamp1.changeOn(1);\r\n               lamp1.changeBrightness(4);\r\n               lamp1.printStates();\r\n       \r\n               lamp2.changeOn(1);\r\n               lamp2.changeBrightness(6);\r\n               lamp2.changeBrightness(4);\r\n               lamp2.changeOn(0);\r\n               lamp2.changeBrightness(0);\r\n               lamp2.printStates();\r\n        }\r\n      \r\n        \r\n       }\r\n      }\r\n     }\r\n\r\n","title":"Beginner Java Q","body":"<p>Just started learning Java, how can I change this so that it actually outputs <code>lamp1.printStates</code> and <code>lamp2.printStates?</code> When I run it, it just returns that it built successfully but nothing else.</p>\n\n<pre><code> package lamps;\n\n    public class Lamps {\n\n    public static void main(String[] args) {\n        class Lamp {\n            int on = 0;\n            int brightness = 0;\n\n            void changeOn(int newValue) {\n                on = newValue;\n        }\n\n            void changeBrightness(int newValue) {\n                brightness = newValue;\n        }\n\n            void printStates() {\n                System.out.println(\"On/Off:\" + on + \n                        \" brightness:\" + brightness);\n\n        }\n    }\n\n    class CreateLamps {\n        public void main(String[] args) {\n           Lamp lamp1 = new Lamp();\n           Lamp lamp2 = new Lamp();\n\n           lamp1.changeOn(1);\n           lamp1.changeBrightness(4);\n           lamp1.printStates();\n\n           lamp2.changeOn(1);\n           lamp2.changeBrightness(6);\n           lamp2.changeBrightness(4);\n           lamp2.changeOn(0);\n           lamp2.changeBrightness(0);\n           lamp2.printStates();\n    }\n\n\n   }\n  }\n }\n</code></pre>\n"},{"tags":["java","android","multithreading"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1658677515,"post_id":73098278,"comment_id":129105157,"body_markdown":"By this line: `googleList.join();` you are blocking the main thread that will cause hangs in UI. Most of IO requests must be asynchronous that is, you request data and return immediately then the IO source respond with a callback that deliver the result. And you must implement that callback in order to deliver the result that obtained in a background process to the UI.","body":"By this line: <code>googleList.join();</code> you are blocking the main thread that will cause hangs in UI. Most of IO requests must be asynchronous that is, you request data and return immediately then the IO source respond with a callback that deliver the result. And you must implement that callback in order to deliver the result that obtained in a background process to the UI."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1658677694,"post_id":73098278,"comment_id":129105199,"body_markdown":"Since you are a beginner to threads this is one of the most handy ways to handle async operations. Let me show you an example implementation.","body":"Since you are a beginner to threads this is one of the most handy ways to handle async operations. Let me show you an example implementation."},{"owner":{"account_id":23393014,"reputation":120,"user_id":17457445,"display_name":"Toulis"},"score":0,"creation_date":1658678717,"post_id":73098278,"comment_id":129105427,"body_markdown":"@Kozmotronik So if i use another thread to keep track of googleList it should stop blocking UI? Let&#39;s say i use another thread that waits for googleList to join and then runOnUIThread to update view?","body":"@Kozmotronik So if i use another thread to keep track of googleList it should stop blocking UI? Let&#39;s say i use another thread that waits for googleList to join and then runOnUIThread to update view?"}],"answers":[{"tags":[],"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1658679504,"creation_date":1658679504,"answer_id":73100079,"question_id":73098278,"body_markdown":"Here is an example of how it can be implemented using a callback as I have mentioned in comments. For this, we need to define a callback inerface I named it as following, you can change the names for your convenience.\r\n\r\n**RequestConsumer** it is simple java interface.\r\n```lang-java\r\n/// Must be executed in the UI (main) thread.\r\n@MainThread\r\npublic interface RequestConsumer {\r\n\tvoid onRequestResult(List&lt;Bitmap&gt; bitmaps);\r\n}\r\n```\r\n\r\n**googleRequest** thread class.\r\n```lang-java\r\npublic class googleRequest extends Thread {\r\n\r\n    private ArrayList&lt;Bitmap&gt; imgRealList;\r\n    private final String keyword;\r\n    /*\r\n    We will use the request consumer callback in order to deliver the results\r\n    to the UI from background. Since we need to touch the UI by this callback\r\n    we ensure that it will execute within the UI thread&#39;s queue using the\r\n    uiHandler.\r\n    */\r\n    private final RequestConsumer requestConsumer;\r\n    private final Handler uiHandler = new Handler(Looper.getMainLooper());\r\n\r\n    public googleRequest(@NonNull String keyword, @NonNull RequestConsumer requestConsumer){\r\n        this.keyword = keyword;\r\n        this.requestConsumer = requestConsumer;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        String newKeyword = keyword.toLowerCase(Locale.ROOT);\r\n        newKeyword = newKeyword.replace(&#39; &#39;,&#39;+&#39;);\r\n        String url = &quot;https://www.google.gr/search?bih=427&amp;biw=1835&amp;hl=el&amp;gbv=1&amp;tbm=isch&amp;og=&amp;ags=&amp;q=&quot;+ newKeyword;\r\n        try {\r\n            Document document = Jsoup.connect(url).get();\r\n            imgRealList = new ArrayList&lt;&gt;();\r\n            Elements imgList = document.select(&quot;img&quot;);\r\n            for (int i=1;i&lt;imgList.size();i++) {\r\n                if(i==8)\r\n                    break;\r\n                String imgSrc = imgList.get(i).absUrl(&quot;src&quot;);\r\n                InputStream input = new java.net.URL(imgSrc).openStream();\r\n                Bitmap bitmap = BitmapFactory.decodeStream(input);\r\n                imgRealList.add(bitmap);\r\n            }\r\n\r\n            // I think according to your code; the data you&#39;ve requested is ready\r\n            // to deliver from now on. But attention! we post it to execute it in the UI thread\r\n            uiHandler.post(() -&gt; requestConsumer.onRequestResult(imgRealList));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**addItem** activity class\r\n```lang-java\r\npublic class addItem extends AppCompatActivity {\r\n\r\n    LoadingDialog loadingDialog;\r\n    RecyclerView imgList;\r\n    ArrayList&lt;Bitmap&gt; bitmapList = new ArrayList&lt;&gt;();\r\n    BitmapAdapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n       /*\r\n       / Code Unnecessary to the problem\r\n       */\r\n       et_title.setOnFocusChangeListener((v, hasFocus) -&gt; {\r\n            if(!hasFocus){\r\n                getImageLogo(et_title.getText().toString());\r\n            }\r\n        });\r\n    }\r\n\r\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n    private void getImageLogo(String serviceName){\r\n        googleRequest googleList = new googleRequest(serviceName, images -&gt; {\r\n\t\t\t// Here we get the delivered results in this callback\r\n\t\t\tif(images != null) {\r\n\t\t\t\tbitmapList.clear();\r\n\t\t\t\tbitmapList.addAll(images);\r\n\t\t\t}else {\r\n\t\t\t\tbitmapList.clear();\r\n\t\t\t}\r\n\t\t\tadapter.notifyDataSetChanged();\r\n        });\r\n        googleList.start();\r\n\r\n\r\n    }\r\n}\r\n```\r\n**Note** I&#39;ve written it in a text editor so the code needs some function test.","title":"How can i make my request run in background while filling other EditTexts (Thread)?","body":"<p>Here is an example of how it can be implemented using a callback as I have mentioned in comments. For this, we need to define a callback inerface I named it as following, you can change the names for your convenience.</p>\n<p><strong>RequestConsumer</strong> it is simple java interface.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/// Must be executed in the UI (main) thread.\n@MainThread\npublic interface RequestConsumer {\n    void onRequestResult(List&lt;Bitmap&gt; bitmaps);\n}\n</code></pre>\n<p><strong>googleRequest</strong> thread class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class googleRequest extends Thread {\n\n    private ArrayList&lt;Bitmap&gt; imgRealList;\n    private final String keyword;\n    /*\n    We will use the request consumer callback in order to deliver the results\n    to the UI from background. Since we need to touch the UI by this callback\n    we ensure that it will execute within the UI thread's queue using the\n    uiHandler.\n    */\n    private final RequestConsumer requestConsumer;\n    private final Handler uiHandler = new Handler(Looper.getMainLooper());\n\n    public googleRequest(@NonNull String keyword, @NonNull RequestConsumer requestConsumer){\n        this.keyword = keyword;\n        this.requestConsumer = requestConsumer;\n    }\n\n    @Override\n    public void run() {\n        String newKeyword = keyword.toLowerCase(Locale.ROOT);\n        newKeyword = newKeyword.replace(' ','+');\n        String url = &quot;https://www.google.gr/search?bih=427&amp;biw=1835&amp;hl=el&amp;gbv=1&amp;tbm=isch&amp;og=&amp;ags=&amp;q=&quot;+ newKeyword;\n        try {\n            Document document = Jsoup.connect(url).get();\n            imgRealList = new ArrayList&lt;&gt;();\n            Elements imgList = document.select(&quot;img&quot;);\n            for (int i=1;i&lt;imgList.size();i++) {\n                if(i==8)\n                    break;\n                String imgSrc = imgList.get(i).absUrl(&quot;src&quot;);\n                InputStream input = new java.net.URL(imgSrc).openStream();\n                Bitmap bitmap = BitmapFactory.decodeStream(input);\n                imgRealList.add(bitmap);\n            }\n\n            // I think according to your code; the data you've requested is ready\n            // to deliver from now on. But attention! we post it to execute it in the UI thread\n            uiHandler.post(() -&gt; requestConsumer.onRequestResult(imgRealList));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p><strong>addItem</strong> activity class</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class addItem extends AppCompatActivity {\n\n    LoadingDialog loadingDialog;\n    RecyclerView imgList;\n    ArrayList&lt;Bitmap&gt; bitmapList = new ArrayList&lt;&gt;();\n    BitmapAdapter adapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n       /*\n       / Code Unnecessary to the problem\n       */\n       et_title.setOnFocusChangeListener((v, hasFocus) -&gt; {\n            if(!hasFocus){\n                getImageLogo(et_title.getText().toString());\n            }\n        });\n    }\n\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    private void getImageLogo(String serviceName){\n        googleRequest googleList = new googleRequest(serviceName, images -&gt; {\n            // Here we get the delivered results in this callback\n            if(images != null) {\n                bitmapList.clear();\n                bitmapList.addAll(images);\n            }else {\n                bitmapList.clear();\n            }\n            adapter.notifyDataSetChanged();\n        });\n        googleList.start();\n\n\n    }\n}\n</code></pre>\n<p><strong>Note</strong> I've written it in a text editor so the code needs some function test.</p>\n"}],"owner":{"account_id":23393014,"reputation":120,"user_id":17457445,"display_name":"Toulis"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73100079,"answer_count":1,"score":2,"last_activity_date":1658679504,"creation_date":1658664406,"question_id":73098278,"body_markdown":"I&#39;m new to threading but I have an EditText view which whenever is getting out of focused it fills a RecyclerView with image logos using the user&#39;s input from EditText. But, whenever the user gets out of focuse and the method is called everything stops for a while(which mean im bad at threading). How can I improve this code so it can run smoothly?  \r\n\r\nMy activity class:\r\n```java\r\npublic class addItem extends AppCompatActivity {\r\n\r\n    LoadingDialog loadingDialog;\r\n    RecyclerView imgList;\r\n    ArrayList&lt;Bitmap&gt; bitmapList = new ArrayList&lt;&gt;();\r\n    BitmapAdapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n       /*\r\n       / Code Unnecessary to the problem\r\n       */\r\n       et_title.setOnFocusChangeListener((v, hasFocus) -&gt; {\r\n            if(!hasFocus){\r\n                getImageLogo(et_title.getText().toString());\r\n            }\r\n        });\r\n    }\r\n\r\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\r\n    private void getImageLogo(String serviceName){\r\n        googleRequest googleList = new googleRequest(serviceName);\r\n        googleList.start();\r\n        try {\r\n            googleList.join();\r\n        } catch (InterruptedException e) {\r\n            Log.e(&quot;Interrupted Error&quot;,&quot;Thread Was Interrupted unexpectedly&quot;,e);\r\n        }\r\n        if(googleList.getImgRealList() != null) {\r\n            bitmapList.clear();\r\n            bitmapList.addAll(googleList.getImgRealList());\r\n        }else {\r\n            bitmapList.clear();\r\n        }\r\n        adapter.notifyDataSetChanged();\r\n    }\r\n```\r\nMy googleRequest class:\r\n```java\r\npublic class googleRequest extends Thread {\r\n\r\n    private ArrayList&lt;Bitmap&gt; imgRealList;\r\n    private final String keyword;\r\n\r\n    public googleRequest(String keyword){\r\n        this.keyword = keyword;\r\n    }\r\n\r\n    public ArrayList&lt;Bitmap&gt; getImgRealList() {\r\n        return imgRealList;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        String newKeyword = keyword.toLowerCase(Locale.ROOT);\r\n        newKeyword = newKeyword.replace(&#39; &#39;,&#39;+&#39;);\r\n        String url = &quot;https://www.google.gr/search?bih=427&amp;biw=1835&amp;hl=el&amp;gbv=1&amp;tbm=isch&amp;og=&amp;ags=&amp;q=&quot;+ newKeyword;\r\n        try {\r\n            Document document = Jsoup.connect(url).get();\r\n            imgRealList = new ArrayList&lt;&gt;();\r\n            Elements imgList = document.select(&quot;img&quot;);\r\n            for (int i=1;i&lt;imgList.size();i++) {\r\n                if(i==8)\r\n                    break;\r\n                String imgSrc = imgList.get(i).absUrl(&quot;src&quot;);\r\n                InputStream input = new java.net.URL(imgSrc).openStream();\r\n                Bitmap bitmap = BitmapFactory.decodeStream(input);\r\n                imgRealList.add(bitmap);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```","title":"How can i make my request run in background while filling other EditTexts (Thread)?","body":"<p>I'm new to threading but I have an EditText view which whenever is getting out of focused it fills a RecyclerView with image logos using the user's input from EditText. But, whenever the user gets out of focuse and the method is called everything stops for a while(which mean im bad at threading). How can I improve this code so it can run smoothly?</p>\n<p>My activity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class addItem extends AppCompatActivity {\n\n    LoadingDialog loadingDialog;\n    RecyclerView imgList;\n    ArrayList&lt;Bitmap&gt; bitmapList = new ArrayList&lt;&gt;();\n    BitmapAdapter adapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n       /*\n       / Code Unnecessary to the problem\n       */\n       et_title.setOnFocusChangeListener((v, hasFocus) -&gt; {\n            if(!hasFocus){\n                getImageLogo(et_title.getText().toString());\n            }\n        });\n    }\n\n    @SuppressLint(&quot;NotifyDataSetChanged&quot;)\n    private void getImageLogo(String serviceName){\n        googleRequest googleList = new googleRequest(serviceName);\n        googleList.start();\n        try {\n            googleList.join();\n        } catch (InterruptedException e) {\n            Log.e(&quot;Interrupted Error&quot;,&quot;Thread Was Interrupted unexpectedly&quot;,e);\n        }\n        if(googleList.getImgRealList() != null) {\n            bitmapList.clear();\n            bitmapList.addAll(googleList.getImgRealList());\n        }else {\n            bitmapList.clear();\n        }\n        adapter.notifyDataSetChanged();\n    }\n</code></pre>\n<p>My googleRequest class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class googleRequest extends Thread {\n\n    private ArrayList&lt;Bitmap&gt; imgRealList;\n    private final String keyword;\n\n    public googleRequest(String keyword){\n        this.keyword = keyword;\n    }\n\n    public ArrayList&lt;Bitmap&gt; getImgRealList() {\n        return imgRealList;\n    }\n\n    @Override\n    public void run() {\n        String newKeyword = keyword.toLowerCase(Locale.ROOT);\n        newKeyword = newKeyword.replace(' ','+');\n        String url = &quot;https://www.google.gr/search?bih=427&amp;biw=1835&amp;hl=el&amp;gbv=1&amp;tbm=isch&amp;og=&amp;ags=&amp;q=&quot;+ newKeyword;\n        try {\n            Document document = Jsoup.connect(url).get();\n            imgRealList = new ArrayList&lt;&gt;();\n            Elements imgList = document.select(&quot;img&quot;);\n            for (int i=1;i&lt;imgList.size();i++) {\n                if(i==8)\n                    break;\n                String imgSrc = imgList.get(i).absUrl(&quot;src&quot;);\n                InputStream input = new java.net.URL(imgSrc).openStream();\n                Bitmap bitmap = BitmapFactory.decodeStream(input);\n                imgRealList.add(bitmap);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","linux","unix","process","grep"],"comments":[{"owner":{"account_id":1029121,"reputation":394,"user_id":1037797,"display_name":"Andrii Radyk"},"score":1,"creation_date":1323354346,"post_id":8422582,"comment_id":10419537,"body_markdown":"use *pgrep* instead of ps and 2 greps","body":"use <i>pgrep</i> instead of ps and 2 greps"}],"answers":[{"tags":[],"owner":{"account_id":923637,"reputation":5819,"user_id":954843,"accept_rate":89,"display_name":"Max"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1323292511,"creation_date":1323292511,"answer_id":8422655,"question_id":8422582,"body_markdown":"You&#39;re trying to use the &quot;|&quot; which is a pipe function that is particular to the shell, therefore you cannot do it in the java process. You could just try getting the process ID by using `pidof Xvfb`.","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>You're trying to use the \"|\" which is a pipe function that is particular to the shell, therefore you cannot do it in the java process. You could just try getting the process ID by using <code>pidof Xvfb</code>.</p>\n"},{"tags":[],"owner":{"account_id":552427,"reputation":11380,"user_id":917548,"display_name":"Roger Lindsj&#246;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1323292619,"creation_date":1323292619,"answer_id":8422677,"question_id":8422582,"body_markdown":"When you execute your command string directly you do not get a shell and it is the shell which handles the pipes. So, you would execute something like &quot;/bin/sh -e \\&quot;ps -ef | grep Xvfb | grep -v grep\\&quot;&quot;","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>When you execute your command string directly you do not get a shell and it is the shell which handles the pipes. So, you would execute something like \"/bin/sh -e \\\"ps -ef | grep Xvfb | grep -v grep\\\"\"</p>\n"},{"tags":[],"owner":{"account_id":463151,"reputation":95124,"user_id":865874,"accept_rate":100,"display_name":"rodrigo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1323292647,"creation_date":1323292647,"answer_id":8422686,"question_id":8422582,"body_markdown":"Maybe `Runtime.getRuntime().exec()` tries to execute the program as it is in the argument. That is, it runs the program `ps` with arguments `-ef`, `|`, `grep`, etc. And so, the program fails because it does not understand what&#39;s going on.\r\n\r\nIf you need to run piped commands, you should call the shell explicitly:\r\n\r\n    Runtime.getRuntime().exec(new String[] {&quot;sh&quot;, &quot;-c&quot;, &quot;ps -ef | grep Xvfb | grep -v grep&quot;});","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>Maybe <code>Runtime.getRuntime().exec()</code> tries to execute the program as it is in the argument. That is, it runs the program <code>ps</code> with arguments <code>-ef</code>, <code>|</code>, <code>grep</code>, etc. And so, the program fails because it does not understand what's going on.</p>\n\n<p>If you need to run piped commands, you should call the shell explicitly:</p>\n\n<pre><code>Runtime.getRuntime().exec(new String[] {\"sh\", \"-c\", \"ps -ef | grep Xvfb | grep -v grep\"});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3081394,"reputation":301,"user_id":2609505,"display_name":"jbrios777"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441333353,"creation_date":1441330717,"answer_id":32388831,"question_id":8422582,"body_markdown":"There&#39;s a lot of ways of doing this. You can use `java.lang.ProcessBuilder` and &quot;pgrep&quot; to get the process id (PID) with something like: `pgrep -fl java | awk {&#39;print $1&#39;}`. Or, if you are running under Linux, you can query the `/proc` directory.\r\n\r\nI know, this seems horrible, and non portable, and even poorly implemented, I agree. But because Java actually runs in a VM, for some absurd reason that I can&#39;t really figure out after more then 15 years working the JDK, is why it isn&#39;t possible to see things outside the JVM space, it&#39;s really ridiculous if you think about it. You can do everything else, even fork and join child processes (*those were an horrible way of multitasking when the world didn&#39;t know about **threads** or **pthreads**, what a hell! what&#39;s going on with Java?!* :).\r\n\r\nThis will give an immense discussion I know, but anyways, there&#39;s a very good API that I already used in my projects and it&#39;s stable enough (it&#39;s OSS so you still need to stress test every version you use before really trusting the API): https://github.com/jezhumble/javasysmon\r\n\r\nJavaDoc: http://jezhumble.github.io/javasysmon/, search for the class `com.jezhumble.javasysmon.OsProcess`, she will do the trick. Hope it helped, best of luck.","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>There's a lot of ways of doing this. You can use <code>java.lang.ProcessBuilder</code> and \"pgrep\" to get the process id (PID) with something like: <code>pgrep -fl java | awk {'print $1'}</code>. Or, if you are running under Linux, you can query the <code>/proc</code> directory.</p>\n\n<p>I know, this seems horrible, and non portable, and even poorly implemented, I agree. But because Java actually runs in a VM, for some absurd reason that I can't really figure out after more then 15 years working the JDK, is why it isn't possible to see things outside the JVM space, it's really ridiculous if you think about it. You can do everything else, even fork and join child processes (<em>those were an horrible way of multitasking when the world didn't know about <strong>threads</strong> or <strong>pthreads</strong>, what a hell! what's going on with Java?!</em> :).</p>\n\n<p>This will give an immense discussion I know, but anyways, there's a very good API that I already used in my projects and it's stable enough (it's OSS so you still need to stress test every version you use before really trusting the API): <a href=\"https://github.com/jezhumble/javasysmon\" rel=\"nofollow\">https://github.com/jezhumble/javasysmon</a></p>\n\n<p>JavaDoc: <a href=\"http://jezhumble.github.io/javasysmon/\" rel=\"nofollow\">http://jezhumble.github.io/javasysmon/</a>, search for the class <code>com.jezhumble.javasysmon.OsProcess</code>, she will do the trick. Hope it helped, best of luck.</p>\n"},{"tags":[],"owner":{"account_id":25883897,"reputation":11,"user_id":19612425,"display_name":"nafc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658679014,"creation_date":1658679014,"answer_id":73100024,"question_id":8422582,"body_markdown":"Not sure if this can help, but I just had to check is another instance of my app was running in Linux so I implemented this which can return the count or the PID of the other instance (so I can bring to front and halt loading the new instance).\r\n\r\n    public long checkIsAlreadyRunning(){\r\n        //Check if app is already running\r\n         long lngCountOfInstances = 0; //Use this to hold how many already running\r\n         String strProcessName = &quot;AG2_GetData&quot;;\r\n         //If it is required to also capture app running from within NetBeans, remove the .jar\r\n         so(&quot;ps -ef|grep &quot; + strProcessName);\r\n         try{\r\n             long lngPid = ProcessHandle.current().pid();//PID of this instance of the application\r\n             long lngPidOfRunning = 0; //Holder for PID of already running instance\r\n             System.out.println(lngPid+&quot;&quot;); //Only for verification\r\n             \r\n             Runtime rt = Runtime.getRuntime();\r\n             String[] cmd = {&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;ps -ef|grep &quot; + strProcessName };\r\n             Process proc = rt.exec(cmd);\r\n\r\n             delay_ms(2);//found I needed small delay to ensure buffer was ready\r\n             \r\n             BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n             \r\n             String strLineIn;\r\n             StringBuilder strOutput = new StringBuilder();\r\n             String strProcessId = &quot;&quot;;\r\n             while ((strLineIn = reader.readLine()) != null) {                   \r\n                if(!strLineIn.contains(&quot;grep&quot;) &amp;&amp; !strLineIn.contains(String.valueOf(lngPid))) {//ignore is PID is current, or line contais grep \r\n                    strOutput.append(strLineIn + &quot;\\r\\n&quot;);//Only here for debuging\r\n                    lngCountOfInstances++;\r\n                }\r\n             }\r\n             reader.close(); //always close the reader\r\n             String strReturn = removeDuplicates(strOutput.toString(),&quot; &quot;); // remove duplicate spaces frm reteun\r\n             String[] strArray = strReturn.split(&quot; &quot;);\r\n             if(strArray.length&gt;2){lngPidOfRunning = isLong(strArray[1]);}//Aray index 1 will be PID, isLong checks if valid long and if yes, retunrs long, esle 0;\r\n             System.out.println(lngPidOfRunning + &quot; --&gt; &quot; + strReturn); //Only here for debuging\r\n         }\r\n         catch(Exception ex){\r\n             ex.printStackTrace();\r\n             err(ex.getMessage(), ex); //remove this, I use function to log messages and stacktraces to file\r\n         }\r\n         //return lngPidOfrunning; //Use this is you would like to use the PID to bring running instance to front\r\n         return lngCountOfInstances; //use this if you just want to get count of running instances\r\n    }","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>Not sure if this can help, but I just had to check is another instance of my app was running in Linux so I implemented this which can return the count or the PID of the other instance (so I can bring to front and halt loading the new instance).</p>\n<pre><code>public long checkIsAlreadyRunning(){\n    //Check if app is already running\n     long lngCountOfInstances = 0; //Use this to hold how many already running\n     String strProcessName = &quot;AG2_GetData&quot;;\n     //If it is required to also capture app running from within NetBeans, remove the .jar\n     so(&quot;ps -ef|grep &quot; + strProcessName);\n     try{\n         long lngPid = ProcessHandle.current().pid();//PID of this instance of the application\n         long lngPidOfRunning = 0; //Holder for PID of already running instance\n         System.out.println(lngPid+&quot;&quot;); //Only for verification\n         \n         Runtime rt = Runtime.getRuntime();\n         String[] cmd = {&quot;/bin/sh&quot;, &quot;-c&quot;, &quot;ps -ef|grep &quot; + strProcessName };\n         Process proc = rt.exec(cmd);\n\n         delay_ms(2);//found I needed small delay to ensure buffer was ready\n         \n         BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n         \n         String strLineIn;\n         StringBuilder strOutput = new StringBuilder();\n         String strProcessId = &quot;&quot;;\n         while ((strLineIn = reader.readLine()) != null) {                   \n            if(!strLineIn.contains(&quot;grep&quot;) &amp;&amp; !strLineIn.contains(String.valueOf(lngPid))) {//ignore is PID is current, or line contais grep \n                strOutput.append(strLineIn + &quot;\\r\\n&quot;);//Only here for debuging\n                lngCountOfInstances++;\n            }\n         }\n         reader.close(); //always close the reader\n         String strReturn = removeDuplicates(strOutput.toString(),&quot; &quot;); // remove duplicate spaces frm reteun\n         String[] strArray = strReturn.split(&quot; &quot;);\n         if(strArray.length&gt;2){lngPidOfRunning = isLong(strArray[1]);}//Aray index 1 will be PID, isLong checks if valid long and if yes, retunrs long, esle 0;\n         System.out.println(lngPidOfRunning + &quot; --&gt; &quot; + strReturn); //Only here for debuging\n     }\n     catch(Exception ex){\n         ex.printStackTrace();\n         err(ex.getMessage(), ex); //remove this, I use function to log messages and stacktraces to file\n     }\n     //return lngPidOfrunning; //Use this is you would like to use the PID to bring running instance to front\n     return lngCountOfInstances; //use this if you just want to get count of running instances\n}\n</code></pre>\n"}],"owner":{"account_id":289930,"reputation":3657,"user_id":591182,"accept_rate":68,"display_name":"AWT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9321,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":8422655,"answer_count":5,"score":5,"last_activity_date":1658679014,"creation_date":1323292165,"question_id":8422582,"body_markdown":"I&#39;m having some weird problems with this.\r\n\r\nWe are using Xvfb virtual desktop manager and want to make sure it&#39;s running before I continue.  Using pure shell, I could do this easily:\r\n\r\n        ps -ef | grep Xvfb | grep -v grep\r\n\r\nAnd that gives me exactly what I need, a single line containing information about the Xvfb proc. Next, I want to incorporate this into my Java program and parse the results and store the PID of the running Xvfb process.  So I am trying this:\r\n\r\n        String line;\r\n        try {\r\n          Process p = Runtime.getRuntime().exec(&quot;ps -ef | grep Xvfb | grep -v grep&quot;);\r\n          BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n          while ((line = input.readLine()) != null)\r\n          {\r\n            System.out.println(line);\r\n          }\r\n        } catch (Exception err) {\r\n          System.out.println(err);\r\n        }\r\n\r\nThe bizarre thing is that if I use &quot;ps -ef&quot;, I get a huge list of processes dumped to my console when I run my app.  But if I use | grep to narrow the list of processes returned, I get zero results.  input.readLine() gets null every time.\r\n\r\nI have also tried:\r\n\r\n        ps -ef | grep Xvfb | grep -v grep | awk {&#39;print $2&#39;}\r\n\r\nTo just grab the process id.  Also, no luck.\r\n\r\nHas anyone else experienced this or know what I&#39;m doing wrong?","title":"Java - how to check whether another (non-Java) process is running on Linux","body":"<p>I'm having some weird problems with this.</p>\n\n<p>We are using Xvfb virtual desktop manager and want to make sure it's running before I continue.  Using pure shell, I could do this easily:</p>\n\n<pre><code>    ps -ef | grep Xvfb | grep -v grep\n</code></pre>\n\n<p>And that gives me exactly what I need, a single line containing information about the Xvfb proc. Next, I want to incorporate this into my Java program and parse the results and store the PID of the running Xvfb process.  So I am trying this:</p>\n\n<pre><code>    String line;\n    try {\n      Process p = Runtime.getRuntime().exec(\"ps -ef | grep Xvfb | grep -v grep\");\n      BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\n      while ((line = input.readLine()) != null)\n      {\n        System.out.println(line);\n      }\n    } catch (Exception err) {\n      System.out.println(err);\n    }\n</code></pre>\n\n<p>The bizarre thing is that if I use \"ps -ef\", I get a huge list of processes dumped to my console when I run my app.  But if I use | grep to narrow the list of processes returned, I get zero results.  input.readLine() gets null every time.</p>\n\n<p>I have also tried:</p>\n\n<pre><code>    ps -ef | grep Xvfb | grep -v grep | awk {'print $2'}\n</code></pre>\n\n<p>To just grab the process id.  Also, no luck.</p>\n\n<p>Has anyone else experienced this or know what I'm doing wrong?</p>\n"},{"tags":["java","arraylist","ioexception","iterable","serializable"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1658677105,"post_id":73099484,"comment_id":129105051,"body_markdown":"and (almost) NEVER EVER ignore exceptions, like is being done in the `save` method!!! (`catch IOException e) { // empty`) - How you know it saved anything?","body":"and (almost) NEVER EVER ignore exceptions, like is being done in the <code>save</code> method!!! (<code>catch IOException e) { &#47;&#47; empty</code>) - How you know it saved anything?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1658682189,"post_id":73099484,"comment_id":129106234,"body_markdown":"The purpose of exceptions is to tell you what went wrong and where.  You are discarding that that valuable information.  A `catch` block should always print or log an exceptions full stack trace (or wrap it in another thrown exception).  In this case, you can learn a lot about the problem by adding `e.printStackTrace();` to each of your catch blocks.","body":"The purpose of exceptions is to tell you what went wrong and where.  You are discarding that that valuable information.  A <code>catch</code> block should always print or log an exceptions full stack trace (or wrap it in another thrown exception).  In this case, you can learn a lot about the problem by adding <code>e.printStackTrace();</code> to each of your catch blocks."}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658677974,"creation_date":1658677974,"answer_id":73099895,"question_id":73099484,"body_markdown":"The problem is that your ```PlayerTime``` class is not serializable.\r\n\r\n``` public static class PlayerTime implements Comparable&lt;PlayerTime&gt; { } ```\r\n\r\n\r\nshould be\r\n\r\n```public static class PlayerTime implements Comparable&lt;PlayerTime&gt; implements Serializable { }```\r\n\r\nIt&#39;s not necessary to make ```BestTimes``` serializable unless you do write ```BestTimes``` object to file.  ","title":"IOException problem with file loading - Java /","body":"<p>The problem is that your <code>PlayerTime</code> class is not serializable.</p>\n<p><code>public static class PlayerTime implements Comparable&lt;PlayerTime&gt; { }</code></p>\n<p>should be</p>\n<p><code>public static class PlayerTime implements Comparable&lt;PlayerTime&gt; implements Serializable { }</code></p>\n<p>It's not necessary to make <code>BestTimes</code> serializable unless you do write <code>BestTimes</code> object to file.</p>\n"}],"owner":{"account_id":19230217,"reputation":7,"user_id":14052223,"display_name":"Radoslav Dugas"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1658710994,"accepted_answer_id":73099895,"answer_count":1,"score":-2,"last_activity_date":1658678816,"creation_date":1658674710,"question_id":73099484,"body_markdown":"How can i fix problem with load ArrayList from file?\r\n\r\nFull code is on the git:\r\n[project github link][1]\r\n\r\n\r\n  [1]: https://github.com/DagyOE/udemy-course/tree/master/src/sk/games/puzzle\r\n\r\nWhen I load data from file I&#39;ll get it back -&gt; IOException\r\n\r\nI&#39;m learning to use the stream so I&#39;m writing it to a file.\r\n\r\nAfter the end of the program, I want to write the time the user has reached in the arraylist and list all the times with which the game was finished.\r\n\r\n```\r\npackage sk.games.puzzle;\r\n\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class BestTimes implements Iterable&lt;BestTimes.PlayerTime&gt;, Serializable{\r\n\r\n    private static final String BESTTIME_DB = System.getProperty(&quot;user.home&quot;)\r\n            + System.getProperty(&quot;file.separator&quot;)\r\n            + &quot;best.time&quot;;\r\n\r\n    private List&lt;PlayerTime&gt; playerTimes = new ArrayList&lt;&gt;();\r\n\r\n    public Iterator&lt;PlayerTime&gt; iterator() {\r\n        return playerTimes.iterator();\r\n    }\r\n\r\n    public void addTime(String name, int time){\r\n        playerTimes.add(new PlayerTime(name, time));\r\n        Collections.sort(playerTimes);\r\n    }\r\n\r\n    public void load(){\r\n        ObjectInputStream load = null;\r\n        try {\r\n            load = new ObjectInputStream(new FileInputStream(BESTTIME_DB));\r\n            playerTimes = (ArrayList&lt;PlayerTime&gt;) load.readObject();\r\n        } catch (FileNotFoundException e) {\r\n            System.err.println(&quot;fail nebola najdena db&quot;);\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;fail nebola otvorena db&quot;);\r\n        } catch (ClassNotFoundException e) {\r\n            System.err.println(&quot;fail nebol najdeny zaznam&quot;);\r\n        } finally {\r\n            if (load != null) {\r\n                try {\r\n                    load.close();\r\n                } catch (IOException e) {\r\n                    //empty\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public void save() {\r\n        ObjectOutputStream save = null;\r\n        try {\r\n            save = new ObjectOutputStream(new FileOutputStream(BESTTIME_DB));\r\n            save.writeObject(playerTimes);\r\n        } catch (FileNotFoundException e) {\r\n            System.err.println(&quot;fail db neexistuje&quot;);\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;fail nepodarilo sa otvorit db&quot;);\r\n        } finally {\r\n            if (save != null) {\r\n                try {\r\n                    save.close();\r\n                } catch (IOException e) {\r\n                    //empty\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        Formatter f = new Formatter();\r\n        for (int i = 0; i &lt; playerTimes.size(); i++) {\r\n            PlayerTime pt = playerTimes.get(i);\r\n            f.format(&quot;%02d. %s - %ds.\\n&quot;, i, pt.getName(), pt.getTime());\r\n        }\r\n        return f.toString();\r\n    }\r\n\r\n    public static class PlayerTime implements Comparable&lt;PlayerTime&gt; {\r\n\r\n        private final String name;\r\n        private final int time;\r\n\r\n        public PlayerTime(String name, int time) {\r\n            this.name = name;\r\n            this.time = time;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public int getTime() {\r\n            return time;\r\n        }\r\n\r\n        @Override\r\n        public int compareTo(PlayerTime o){\r\n            return Integer.compare(this.time, o.getTime());\r\n        }\r\n    }\r\n}\r\n```","title":"IOException problem with file loading - Java /","body":"<p>How can i fix problem with load ArrayList from file?</p>\n<p>Full code is on the git:\n<a href=\"https://github.com/DagyOE/udemy-course/tree/master/src/sk/games/puzzle\" rel=\"nofollow noreferrer\">project github link</a></p>\n<p>When I load data from file I'll get it back -&gt; IOException</p>\n<p>I'm learning to use the stream so I'm writing it to a file.</p>\n<p>After the end of the program, I want to write the time the user has reached in the arraylist and list all the times with which the game was finished.</p>\n<pre><code>package sk.games.puzzle;\n\nimport java.io.*;\nimport java.util.*;\n\npublic class BestTimes implements Iterable&lt;BestTimes.PlayerTime&gt;, Serializable{\n\n    private static final String BESTTIME_DB = System.getProperty(&quot;user.home&quot;)\n            + System.getProperty(&quot;file.separator&quot;)\n            + &quot;best.time&quot;;\n\n    private List&lt;PlayerTime&gt; playerTimes = new ArrayList&lt;&gt;();\n\n    public Iterator&lt;PlayerTime&gt; iterator() {\n        return playerTimes.iterator();\n    }\n\n    public void addTime(String name, int time){\n        playerTimes.add(new PlayerTime(name, time));\n        Collections.sort(playerTimes);\n    }\n\n    public void load(){\n        ObjectInputStream load = null;\n        try {\n            load = new ObjectInputStream(new FileInputStream(BESTTIME_DB));\n            playerTimes = (ArrayList&lt;PlayerTime&gt;) load.readObject();\n        } catch (FileNotFoundException e) {\n            System.err.println(&quot;fail nebola najdena db&quot;);\n        } catch (IOException e) {\n            System.err.println(&quot;fail nebola otvorena db&quot;);\n        } catch (ClassNotFoundException e) {\n            System.err.println(&quot;fail nebol najdeny zaznam&quot;);\n        } finally {\n            if (load != null) {\n                try {\n                    load.close();\n                } catch (IOException e) {\n                    //empty\n                }\n            }\n        }\n    }\n\n    public void save() {\n        ObjectOutputStream save = null;\n        try {\n            save = new ObjectOutputStream(new FileOutputStream(BESTTIME_DB));\n            save.writeObject(playerTimes);\n        } catch (FileNotFoundException e) {\n            System.err.println(&quot;fail db neexistuje&quot;);\n        } catch (IOException e) {\n            System.err.println(&quot;fail nepodarilo sa otvorit db&quot;);\n        } finally {\n            if (save != null) {\n                try {\n                    save.close();\n                } catch (IOException e) {\n                    //empty\n                }\n            }\n        }\n    }\n\n    @Override\n    public String toString() {\n        Formatter f = new Formatter();\n        for (int i = 0; i &lt; playerTimes.size(); i++) {\n            PlayerTime pt = playerTimes.get(i);\n            f.format(&quot;%02d. %s - %ds.\\n&quot;, i, pt.getName(), pt.getTime());\n        }\n        return f.toString();\n    }\n\n    public static class PlayerTime implements Comparable&lt;PlayerTime&gt; {\n\n        private final String name;\n        private final int time;\n\n        public PlayerTime(String name, int time) {\n            this.name = name;\n            this.time = time;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public int getTime() {\n            return time;\n        }\n\n        @Override\n        public int compareTo(PlayerTime o){\n            return Integer.compare(this.time, o.getTime());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"score":0,"creation_date":1307604702,"post_id":6289458,"comment_id":7344374,"body_markdown":"+1 for mentioning &quot;super simple problem&quot;, in the title.","body":"+1 for mentioning &quot;super simple problem&quot;, in the title."}],"answers":[{"tags":[],"owner":{"account_id":139389,"reputation":5626,"user_id":344945,"accept_rate":95,"display_name":"Kevin"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1658678488,"creation_date":1307604588,"answer_id":6289472,"question_id":6289458,"body_markdown":"Because you&#39;ve made the variable `user` in your class `Cliente` static. If you remove the `static` keyword everything should work as you want.\r\n\r\nA `static` variable is shared across all instances of the class.\r\n\r\nThe [following site][1] has a good reference on the static keyword, I suggest you read it :).\r\n\r\n\r\n  [1]: http://xahlee.info/java-a-day/instance_vs_class_members.html","title":"Super simple problem with ArrayList in Java","body":"<p>Because you've made the variable <code>user</code> in your class <code>Cliente</code> static. If you remove the <code>static</code> keyword everything should work as you want.</p>\n<p>A <code>static</code> variable is shared across all instances of the class.</p>\n<p>The <a href=\"http://xahlee.info/java-a-day/instance_vs_class_members.html\" rel=\"nofollow noreferrer\">following site</a> has a good reference on the static keyword, I suggest you read it :).</p>\n"},{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307604661,"creation_date":1307604661,"answer_id":6289482,"question_id":6289458,"body_markdown":"The following are `static`, which means that they&#39;re shared by all instances of the class:\r\n\r\n    private static String user;\r\n    private static String password;\r\n\r\nRemove the `static` modifiers, and each instance will get its own `user` and `password`.","title":"Super simple problem with ArrayList in Java","body":"<p>The following are <code>static</code>, which means that they're shared by all instances of the class:</p>\n\n<pre><code>private static String user;\nprivate static String password;\n</code></pre>\n\n<p>Remove the <code>static</code> modifiers, and each instance will get its own <code>user</code> and <code>password</code>.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1307604665,"creation_date":1307604665,"answer_id":6289484,"question_id":6289458,"body_markdown":"You&#39;ve declared the fields in `Cliente` static. So the fields keep the last value that you&#39;ve set: and thats user `edu`.\r\n\r\nChange it to: \r\n\r\n    private String user;\r\n    private String password;","title":"Super simple problem with ArrayList in Java","body":"<p>You've declared the fields in <code>Cliente</code> static. So the fields keep the last value that you've set: and thats user <code>edu</code>.</p>\n\n<p>Change it to: </p>\n\n<pre><code>private String user;\nprivate String password;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":285358,"reputation":13115,"user_id":583980,"accept_rate":74,"display_name":"Swaranga Sarma"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1307604674,"creation_date":1307604674,"answer_id":6289488,"question_id":6289458,"body_markdown":"Static variables are Class level variables. To have separate copies of `String user;` and `String password;` for each instance of `Cliente`, make then non-static.\r\n","title":"Super simple problem with ArrayList in Java","body":"<p>Static variables are Class level variables. To have separate copies of <code>String user;</code> and <code>String password;</code> for each instance of <code>Cliente</code>, make then non-static.</p>\n"},{"tags":[],"owner":{"account_id":2892197,"reputation":452,"user_id":2480716,"accept_rate":71,"display_name":"Katie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438114143,"creation_date":1438114143,"answer_id":31686114,"question_id":6289458,"body_markdown":"Remove the static modifier, as it is used if there is a need for a variable to be common to all the objects of a single java class. An instance is not a must to modify the static variable, which is not required in case of user and password in your case.","title":"Super simple problem with ArrayList in Java","body":"<p>Remove the static modifier, as it is used if there is a need for a variable to be common to all the objects of a single java class. An instance is not a must to modify the static variable, which is not required in case of user and password in your case.</p>\n"}],"owner":{"account_id":756035,"reputation":117,"user_id":765182,"accept_rate":75,"display_name":"Peter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":6289488,"answer_count":5,"score":1,"last_activity_date":1658678488,"creation_date":1307604488,"question_id":6289458,"body_markdown":"I&#39;ve two different classes:\r\n\r\n**Cliente.java**\r\n\r\n    public class Cliente {\r\n    \tprivate static String user;\r\n    \tprivate static String password;\r\n    \tpublic Cliente (String usr, String pass) {\r\n    \t\tuser = usr;\r\n    \t\tpassword = pass;\r\n    \t}\r\n    \tpublic String getUser() {\r\n    \t\treturn user;\r\n    \t}\r\n    }\r\n\r\nAnd **AddToArrayList.java**, where I create a Client type ArrayList and and some clients:\r\n\r\n    public class AddToArrayList{\r\n        static ArrayList&lt;Cliente&gt; listaClientes = new ArrayList&lt;Cliente&gt;();\r\n       \r\n        public static void main(String[] args) throws IOException {\r\n    \r\n            Cliente c1 = new Cliente(&quot;pepe&quot;,&quot;pepe1&quot;);\r\n            Cliente c2 = new Cliente(&quot;jose&quot;,&quot;jose1&quot;);\r\n            Cliente c3 = new Cliente(&quot;edu&quot;,&quot;edu1&quot;);       \r\n            listaClientes.add(c1);\r\n            listaClientes.add(c2);\r\n            listaClientes.add(c3);\r\n           \r\n            printArraList();\r\n        }\r\n       \r\n        public static void printArraList() throws IOException {     \r\n            for (Cliente c : listaClientes) {\r\n                System.out.println(c.getUser());\r\n            } \r\n        }\r\n}\r\n\r\nWhy does this funciont prints me:&lt;br&gt;\r\n**edu&lt;br&gt;\r\nedu&lt;br&gt;\r\nedu**&lt;br&gt;\r\nInstead of:&lt;br&gt;\r\n**pepe&lt;br&gt;\r\njose&lt;br&gt;\r\nedu**&lt;br&gt;\r\n\r\nThanks in advance.","title":"Super simple problem with ArrayList in Java","body":"<p>I've two different classes:</p>\n\n<p><strong>Cliente.java</strong></p>\n\n<pre><code>public class Cliente {\n    private static String user;\n    private static String password;\n    public Cliente (String usr, String pass) {\n        user = usr;\n        password = pass;\n    }\n    public String getUser() {\n        return user;\n    }\n}\n</code></pre>\n\n<p>And <strong>AddToArrayList.java</strong>, where I create a Client type ArrayList and and some clients:</p>\n\n<pre><code>public class AddToArrayList{\n    static ArrayList&lt;Cliente&gt; listaClientes = new ArrayList&lt;Cliente&gt;();\n\n    public static void main(String[] args) throws IOException {\n\n        Cliente c1 = new Cliente(\"pepe\",\"pepe1\");\n        Cliente c2 = new Cliente(\"jose\",\"jose1\");\n        Cliente c3 = new Cliente(\"edu\",\"edu1\");       \n        listaClientes.add(c1);\n        listaClientes.add(c2);\n        listaClientes.add(c3);\n\n        printArraList();\n    }\n\n    public static void printArraList() throws IOException {     \n        for (Cliente c : listaClientes) {\n            System.out.println(c.getUser());\n        } \n    }\n</code></pre>\n\n<p>}</p>\n\n<p>Why does this funciont prints me:<br>\n<strong>edu<br>\nedu<br>\nedu</strong><br>\nInstead of:<br>\n<strong>pepe<br>\njose<br>\nedu</strong><br></p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","string","duplicates"],"comments":[{"owner":{"account_id":25389,"reputation":14608,"user_id":65230,"accept_rate":84,"display_name":"Ascalonian"},"score":0,"creation_date":1421421202,"post_id":27986896,"comment_id":44364780,"body_markdown":"Have you looked at `String#replace` or `String#replaceAll` ?","body":"Have you looked at <code>String#replace</code> or <code>String#replaceAll</code> ?"},{"owner":{"account_id":446135,"reputation":20184,"user_id":838992,"display_name":"J Richard Snape"},"score":0,"creation_date":1421421422,"post_id":27986896,"comment_id":44364952,"body_markdown":"Replacing with another randomly generated char after detecting a duplicate is probably not the way you want to go.  Although unlikely, in theory it might never terminate - and certainly might take an overly long time to do a simple task.  I would consider changing your logic for how to do this if you truly want to randomly select 4 from the 6 in any order.  The answer from @AndyBrown below shows one way to do this (http://stackoverflow.com/a/27987066/838992)","body":"Replacing with another randomly generated char after detecting a duplicate is probably not the way you want to go.  Although unlikely, in theory it might never terminate - and certainly might take an overly long time to do a simple task.  I would consider changing your logic for how to do this if you truly want to randomly select 4 from the 6 in any order.  The answer from @AndyBrown below shows one way to do this (<a href=\"http://stackoverflow.com/a/27987066/838992\">stackoverflow.com/a/27987066/838992</a>)"},{"owner":{"account_id":5636865,"reputation":542,"user_id":4462095,"accept_rate":89,"display_name":"Arrrow"},"score":0,"creation_date":1421433459,"post_id":27986896,"comment_id":44371966,"body_markdown":"I&#39;ve looked up so many questions here on StackOverflow, but now I see that I&#39;ve been looking at it in the wrong way all along. I tried String#replace and String#replaceAll, but it mostly ended up only replacing duplicates that follow eachother up, or replacing it with another duplicate.","body":"I&#39;ve looked up so many questions here on StackOverflow, but now I see that I&#39;ve been looking at it in the wrong way all along. I tried String#replace and String#replaceAll, but it mostly ended up only replacing duplicates that follow eachother up, or replacing it with another duplicate."}],"answers":[{"tags":[],"owner":{"account_id":2201295,"reputation":19001,"user_id":1945631,"display_name":"Andy Brown"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1421421370,"creation_date":1421421370,"answer_id":27987066,"question_id":27986896,"body_markdown":"It sounds like you only want to use each letter in `code` once? Why don&#39;t you set that up from the beginning using an `ArrayList`, and removing each character if it is randomly selected:\r\n\r\n    // copy `code` into a temporary arraylist\r\n    ArrayList&lt;Character&gt; possibleLetters = new ArrayList&lt;Character&gt;(code.length);\r\n    for (char c : code) possibleLetters.add(c);\r\n    // select randomly &quot;without replacement&quot;\r\n    for (int i = 0; i &lt; 4; i++) {\r\n    \tint index = random.nextInt(possibleLetters.size());\r\n    \tcodeLetters = possibleLetters.remove(index);\r\n        strings.append(codeLetters);\r\n    }","title":"java replace duplicate characters","body":"<p>It sounds like you only want to use each letter in <code>code</code> once? Why don't you set that up from the beginning using an <code>ArrayList</code>, and removing each character if it is randomly selected:</p>\n\n<pre><code>// copy `code` into a temporary arraylist\nArrayList&lt;Character&gt; possibleLetters = new ArrayList&lt;Character&gt;(code.length);\nfor (char c : code) possibleLetters.add(c);\n// select randomly \"without replacement\"\nfor (int i = 0; i &lt; 4; i++) {\n    int index = random.nextInt(possibleLetters.size());\n    codeLetters = possibleLetters.remove(index);\n    strings.append(codeLetters);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5624369,"reputation":163,"user_id":4453250,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1421421730,"creation_date":1421421730,"answer_id":27987182,"question_id":27986896,"body_markdown":"    import java.util.Random;\r\n    \r\n    public class Main {\r\n    \r\n    \tprivate static char[] code = new char[] { &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;};\r\n    \r\n    \tpublic static final void main(String[] args) {\r\n    \t\tchar codeLetters;\r\n    \t    String masterCode;\r\n    \t    StringBuilder strings = new StringBuilder(); \r\n    \t    Random random = new Random();\r\n    \r\n    \t    while (strings.length() &lt; 4) {\r\n    \t        char tmpcode = code[random.nextInt(code.length)];\r\n    \t        if (strings.toString().contains(tmpcode + &quot;&quot;)) {\r\n    \t            continue;\r\n    \t        }\r\n    \t        codeLetters = tmpcode;\r\n    \t        strings.append(codeLetters);\r\n    \t    }\r\n    \t    masterCode = strings.toString();\r\n    \t    System.out.println(masterCode);\r\n    \t}\r\n    }\r\n\r\nReplace your for loop with this one and then you don&#39;t need to do any replacing afterwards.\r\nThis will only insert characters that are not already in the string.","title":"java replace duplicate characters","body":"<pre><code>import java.util.Random;\n\npublic class Main {\n\n    private static char[] code = new char[] { 'A', 'B', 'C', 'D', 'E', 'F'};\n\n    public static final void main(String[] args) {\n        char codeLetters;\n        String masterCode;\n        StringBuilder strings = new StringBuilder(); \n        Random random = new Random();\n\n        while (strings.length() &lt; 4) {\n            char tmpcode = code[random.nextInt(code.length)];\n            if (strings.toString().contains(tmpcode + \"\")) {\n                continue;\n            }\n            codeLetters = tmpcode;\n            strings.append(codeLetters);\n        }\n        masterCode = strings.toString();\n        System.out.println(masterCode);\n    }\n}\n</code></pre>\n\n<p>Replace your for loop with this one and then you don't need to do any replacing afterwards.\nThis will only insert characters that are not already in the string.</p>\n"},{"tags":[],"owner":{"account_id":25883897,"reputation":11,"user_id":19612425,"display_name":"nafc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658678415,"creation_date":1658678248,"answer_id":73099929,"question_id":27986896,"body_markdown":"In my case, I needed to remove duplicates, but could not find the best answer for my situation, so I create a function to remove duplicate characters, supply String and String to remove duplicates of:\r\nThis could be easily modified to replace as well.\r\n(Just thought it may help someone not so well versed in Java like myself)\r\n\r\n    private String removeDuplicates(String strString, String strDupToRemove){\r\n        \r\n    String strLastChar = &quot;&quot;;\r\n    StringBuilder strReturn = new StringBuilder();\r\n       \r\n    for(int intIndex = 0;intIndex&lt;strString.length();intIndex = intIndex+strDupToRemove.length()){  \r\n            String strSub = strString.substring(intIndex,strDupToRemove.length() + intIndex);\r\n            if(!strSub.equals(strDupToRemove) || (strSub.equals(strDupToRemove) &amp;&amp; !strLastChar.equals(strDupToRemove))){//allow 1\r\n                strReturn.append(strSub);\r\n            }\r\n            strLastChar = strSub;\r\n        }       \r\n        //System.out.println(&quot;Dups removed: &quot; + strReturn.toString());\r\n        return strReturn.toString();\r\n    }","title":"java replace duplicate characters","body":"<p>In my case, I needed to remove duplicates, but could not find the best answer for my situation, so I create a function to remove duplicate characters, supply String and String to remove duplicates of:\nThis could be easily modified to replace as well.\n(Just thought it may help someone not so well versed in Java like myself)</p>\n<pre><code>private String removeDuplicates(String strString, String strDupToRemove){\n    \nString strLastChar = &quot;&quot;;\nStringBuilder strReturn = new StringBuilder();\n   \nfor(int intIndex = 0;intIndex&lt;strString.length();intIndex = intIndex+strDupToRemove.length()){  \n        String strSub = strString.substring(intIndex,strDupToRemove.length() + intIndex);\n        if(!strSub.equals(strDupToRemove) || (strSub.equals(strDupToRemove) &amp;&amp; !strLastChar.equals(strDupToRemove))){//allow 1\n            strReturn.append(strSub);\n        }\n        strLastChar = strSub;\n    }       \n    //System.out.println(&quot;Dups removed: &quot; + strReturn.toString());\n    return strReturn.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":5636865,"reputation":542,"user_id":4462095,"accept_rate":89,"display_name":"Arrrow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1005,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27987066,"answer_count":3,"score":1,"last_activity_date":1658678415,"creation_date":1421420818,"question_id":27986896,"body_markdown":"So for an assignment I have to generate a random code, and have someone guess the code in the console. Now My problem is that I can&#39;t seem to find a way to replace any duplicate characters in the code. The code must range in &quot;ABCDEF&quot;, and contain 4 letters. This is what I got so far: \t\t\r\n\r\n        char codeLetters;\r\n        String masterCode;\r\n        StringBuilder strings = new StringBuilder(); \r\n\t\tRandom random = new Random();\r\n\r\n\t\tfor (int i = 0; i &lt; 4; i++) {\r\n\t\t\tcodeLetters = code[random.nextInt(code.length)];\r\n\t\t\tstrings.append(codeLetters);\r\n\t\t}\r\n\t\tmasterCode = strings.toString();\r\n\t    String temp = &quot;&quot;;\r\n\t    boolean isDuplicate = false;\r\n\r\n\t    for (int i = 0; i &lt; masterCode.length(); i++) {\r\n\t        isDuplicate = false;\r\n\t        char comparisonChar = masterCode.charAt(i);\r\n\t        for (int j = i + 1; j &lt; masterCode.length(); j++) {\r\n\t            char nextChar = masterCode.charAt(j);\r\n\t            if (comparisonChar == nextChar) isDuplicate = true;\r\n\t        }\r\n\t        if (!isDuplicate) temp = temp + comparisonChar;\r\n\t    }\r\n\t\tmasterCode = temp;\r\n\r\n\t\tSystem.out.println(masterCode);\r\n\r\nit prints either a code consisting out of 2-3 letters, or a code containing 5 or 6 letters, and rarely a correct code with 4 letters. What this code does as far as I know is not add the duplicate characters, but I want it to Replace them instead with another character. Is there someway to replace the characters with another randomly generated char, which is not in the String yet, without using Sets?","title":"java replace duplicate characters","body":"<p>So for an assignment I have to generate a random code, and have someone guess the code in the console. Now My problem is that I can't seem to find a way to replace any duplicate characters in the code. The code must range in \"ABCDEF\", and contain 4 letters. This is what I got so far:        </p>\n\n<pre><code>    char codeLetters;\n    String masterCode;\n    StringBuilder strings = new StringBuilder(); \n    Random random = new Random();\n\n    for (int i = 0; i &lt; 4; i++) {\n        codeLetters = code[random.nextInt(code.length)];\n        strings.append(codeLetters);\n    }\n    masterCode = strings.toString();\n    String temp = \"\";\n    boolean isDuplicate = false;\n\n    for (int i = 0; i &lt; masterCode.length(); i++) {\n        isDuplicate = false;\n        char comparisonChar = masterCode.charAt(i);\n        for (int j = i + 1; j &lt; masterCode.length(); j++) {\n            char nextChar = masterCode.charAt(j);\n            if (comparisonChar == nextChar) isDuplicate = true;\n        }\n        if (!isDuplicate) temp = temp + comparisonChar;\n    }\n    masterCode = temp;\n\n    System.out.println(masterCode);\n</code></pre>\n\n<p>it prints either a code consisting out of 2-3 letters, or a code containing 5 or 6 letters, and rarely a correct code with 4 letters. What this code does as far as I know is not add the duplicate characters, but I want it to Replace them instead with another character. Is there someway to replace the characters with another randomly generated char, which is not in the String yet, without using Sets?</p>\n"},{"tags":["python","java","android","aes","cbc-mode"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1658644077,"post_id":73096148,"comment_id":129099197,"body_markdown":"`getRandomIV()` is missing.","body":"<code>getRandomIV()</code> is missing."},{"owner":{"account_id":12630919,"reputation":678,"user_id":9182385,"display_name":"Shakib Karami"},"score":0,"creation_date":1658644959,"post_id":73096148,"comment_id":129099334,"body_markdown":"@Topaco sorry, I just edited and added &#39;getRandomIV&#39;","body":"@Topaco sorry, I just edited and added &#39;getRandomIV&#39;"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":4,"creation_date":1658646558,"post_id":73096148,"comment_id":129099527,"body_markdown":"The Java code itself cannot work, because the ciphertext is hex encoded during encryption (`encryptedString`), but not hex decoded during decryption (`bytemsg`). Furthermore there are design issues concerning the generation of the random IV and the concatenation of IV and ciphertext. There are many examples for both on SO. These complicate porting, thus focus on fixing and refactoring the Java code first before porting.","body":"The Java code itself cannot work, because the ciphertext is hex encoded during encryption (<code>encryptedString</code>), but not hex decoded during decryption (<code>bytemsg</code>). Furthermore there are design issues concerning the generation of the random IV and the concatenation of IV and ciphertext. There are many examples for both on SO. These complicate porting, thus focus on fixing and refactoring the Java code first before porting."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1658660419,"post_id":73096148,"comment_id":129101677,"body_markdown":"Furthermore your code on Java side mixes up String and byte[]. Concating two strings and then call `getBytes(&quot;UTF-8&quot;)` does not always have the same result as converting both substrings to bytes and then concat them. When dealing with encrypted data always use `byte[]` variables, never String (unless the data has been hex or base64 encoded). BTW: why so complicated generation of IV? Just use `byte[] iv = new byte[16]; new SecureRandom().nextBytes(iv);`.","body":"Furthermore your code on Java side mixes up String and byte[]. Concating two strings and then call <code>getBytes(&quot;UTF-8&quot;)</code> does not always have the same result as converting both substrings to bytes and then concat them. When dealing with encrypted data always use <code>byte[]</code> variables, never String (unless the data has been hex or base64 encoded). BTW: why so complicated generation of IV? Just use <code>byte[] iv = new byte[16]; new SecureRandom().nextBytes(iv);</code>."},{"owner":{"account_id":12630919,"reputation":678,"user_id":9182385,"display_name":"Shakib Karami"},"score":0,"creation_date":1658677200,"post_id":73096148,"comment_id":129105075,"body_markdown":"@Robert Thank you Robert I really appreciate your comment, the concatenating was the problem and thank you for suggesting this way for generating IV, I have little experience with Java, If you post this as answer I can approve that cause it fixed my problem.","body":"@Robert Thank you Robert I really appreciate your comment, the concatenating was the problem and thank you for suggesting this way for generating IV, I have little experience with Java, If you post this as answer I can approve that cause it fixed my problem."},{"owner":{"account_id":12630919,"reputation":678,"user_id":9182385,"display_name":"Shakib Karami"},"score":0,"creation_date":1658677388,"post_id":73096148,"comment_id":129105118,"body_markdown":"@Topaco thank you so much yes the hex encoding was a mistake and I removed it but besides that convertng to strings and then concatenating was also a wrong thing to do, I really appreciate your help and suggestions.","body":"@Topaco thank you so much yes the hex encoding was a mistake and I removed it but besides that convertng to strings and then concatenating was also a wrong thing to do, I really appreciate your help and suggestions."}],"owner":{"account_id":12630919,"reputation":678,"user_id":9182385,"display_name":"Shakib Karami"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":411,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658677439,"creation_date":1658642658,"question_id":73096148,"body_markdown":"I am trying to encrypt the communications between a java and a python app and the problem is I&#39;m getting different result in decrypting the encrypted string from the other side in both apps.\r\nI searched a lot but I didn&#39;t found any problem in the code and I will be much appreciated if you guide me in this. \r\nHere is the encryption function in java side:\r\n\r\n    public static String encrypt(String value) {\r\n        try {\r\n            String privateKey = &quot;1234567887654321&quot;;\r\n            String stringIV = getRandomIV();\r\n            IvParameterSpec iv = new IvParameterSpec(stringIV.getBytes());\r\n            SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\r\n\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n            cipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);\r\n\r\n            byte[] encrypted = cipher.doFinal(value.getBytes(StandardCharsets.UTF_8));\r\n\r\n            String encryptedString = new String(encrypted)\r\n            String toEncrypt = stringIV + encryptedString;\r\n            return android.util.Base64.encodeToString(toEncrypt.getBytes(&quot;UTF-8&quot;), android.util.Base64.DEFAULT);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    static String getRandomIV() {\r\n        UUID randomUUID = UUID.randomUUID();\r\n        return randomUUID.toString().replaceAll(&quot;_&quot;, &quot;&quot;).replaceAll(&quot;-&quot;, &quot;&quot;).substring(0,16);\r\n    }\r\n\r\n\r\nand here is the decryption part in python:\r\n\r\n    msg_bytes=bytes(msg, encoding=&quot;utf8&quot;).decode(&quot;utf-8&quot;,&#39;ignore&#39;)\r\n    b64decoded=base64.b64decode(msg_bytes)\r\n    cipher = AES.new(&#39;1234567887654321&#39;.encode(&quot;utf8&quot;), AES.MODE_CBC, b64decoded[0:16])\r\n    decoded = cipher.decrypt(b64decoded[16:48])\r\n    decoded = bytes(decoded).decode(&quot;utf-8&quot;,&#39;ignore&#39;)\r\n\r\nI&#39;m testing this with a 32 byte message and I&#39;m getting different results with AES part, alse here is my java decryption function:\r\n\r\n    public static String decrypt(String encrypted) {\r\n        try {\r\n            String privateKey = &quot;1234567887654321&quot;;\r\n            Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n            byte[] base64decoded = new byte[0];\r\n            base64decoded = android.util.Base64.decode(encrypted, android.util.Base64.DEFAULT);\r\n            String base64decodedString = new String(base64decoded);\r\n            byte[] byteiv = Arrays.copyOfRange(base64decoded, 0, 16);\r\n            IvParameterSpec iv = new IvParameterSpec(byteiv);\r\n            SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes(), &quot;AES&quot;);\r\n            cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\r\n            byte[] bytes = Hex.decodeHex(hex(base64decodedString.substring(16,48).getBytes()).toCharArray());\r\n            byte[] original = new byte[0];\r\n            byte[] bytemsg = Arrays.copyOfRange(base64decoded, 16, base64decoded.length);\r\n            original = cipher.doFinal(bytemsg);\r\n            return new String(original.toString());\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\nand also python&#39;s encryption:\r\n\r\n    data = str(json.dumps(data))\r\n    iv = Random.get_random_bytes(16)\r\n    cipher = AES.new(&#39;1234567887654321&#39;.encode(&quot;utf8&quot;), AES.MODE_CBC, iv)\r\n    byte_iv = bytearray(iv)\r\n    encrypted = bytearray(cipher.encrypt(self.pad(data).encode(&quot;utf8&quot;)))\r\n    data = base64.b64encode(bytes(byte_iv + encrypted))\r\n    data = list(data)\r\n    data = bytes(data)\r\n\r\nAny help will be much appreciated.","title":"Different results in AES encryption between Python and Java","body":"<p>I am trying to encrypt the communications between a java and a python app and the problem is I'm getting different result in decrypting the encrypted string from the other side in both apps.\nI searched a lot but I didn't found any problem in the code and I will be much appreciated if you guide me in this.\nHere is the encryption function in java side:</p>\n<pre><code>public static String encrypt(String value) {\n    try {\n        String privateKey = &quot;1234567887654321&quot;;\n        String stringIV = getRandomIV();\n        IvParameterSpec iv = new IvParameterSpec(stringIV.getBytes());\n        SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\n\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n        cipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);\n\n        byte[] encrypted = cipher.doFinal(value.getBytes(StandardCharsets.UTF_8));\n\n        String encryptedString = new String(encrypted)\n        String toEncrypt = stringIV + encryptedString;\n        return android.util.Base64.encodeToString(toEncrypt.getBytes(&quot;UTF-8&quot;), android.util.Base64.DEFAULT);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    return null;\n}\n\n\nstatic String getRandomIV() {\n    UUID randomUUID = UUID.randomUUID();\n    return randomUUID.toString().replaceAll(&quot;_&quot;, &quot;&quot;).replaceAll(&quot;-&quot;, &quot;&quot;).substring(0,16);\n}\n</code></pre>\n<p>and here is the decryption part in python:</p>\n<pre><code>msg_bytes=bytes(msg, encoding=&quot;utf8&quot;).decode(&quot;utf-8&quot;,'ignore')\nb64decoded=base64.b64decode(msg_bytes)\ncipher = AES.new('1234567887654321'.encode(&quot;utf8&quot;), AES.MODE_CBC, b64decoded[0:16])\ndecoded = cipher.decrypt(b64decoded[16:48])\ndecoded = bytes(decoded).decode(&quot;utf-8&quot;,'ignore')\n</code></pre>\n<p>I'm testing this with a 32 byte message and I'm getting different results with AES part, alse here is my java decryption function:</p>\n<pre><code>public static String decrypt(String encrypted) {\n    try {\n        String privateKey = &quot;1234567887654321&quot;;\n        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n        byte[] base64decoded = new byte[0];\n        base64decoded = android.util.Base64.decode(encrypted, android.util.Base64.DEFAULT);\n        String base64decodedString = new String(base64decoded);\n        byte[] byteiv = Arrays.copyOfRange(base64decoded, 0, 16);\n        IvParameterSpec iv = new IvParameterSpec(byteiv);\n        SecretKeySpec skeySpec = new SecretKeySpec(privateKey.getBytes(), &quot;AES&quot;);\n        cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\n        byte[] bytes = Hex.decodeHex(hex(base64decodedString.substring(16,48).getBytes()).toCharArray());\n        byte[] original = new byte[0];\n        byte[] bytemsg = Arrays.copyOfRange(base64decoded, 16, base64decoded.length);\n        original = cipher.doFinal(bytemsg);\n        return new String(original.toString());\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n<p>and also python's encryption:</p>\n<pre><code>data = str(json.dumps(data))\niv = Random.get_random_bytes(16)\ncipher = AES.new('1234567887654321'.encode(&quot;utf8&quot;), AES.MODE_CBC, iv)\nbyte_iv = bytearray(iv)\nencrypted = bytearray(cipher.encrypt(self.pad(data).encode(&quot;utf8&quot;)))\ndata = base64.b64encode(bytes(byte_iv + encrypted))\ndata = list(data)\ndata = bytes(data)\n</code></pre>\n<p>Any help will be much appreciated.</p>\n"},{"tags":["java","treemap","system-design"],"comments":[{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":0,"creation_date":1658565877,"post_id":73089231,"comment_id":129087110,"body_markdown":"I think it&#39;s for consistency, substring behaves the same, so does sublist.","body":"I think it&#39;s for consistency, substring behaves the same, so does sublist."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1658566316,"post_id":73089231,"comment_id":129087181,"body_markdown":"my **guess** (this should have been asked to the developers of Java): because *often* in programming languages all indices are zero-based (e.g. arrays), so it is in Java - doing so allow doing `subMap(0, map.size())` using `size()` directly without having to subtract `1`","body":"my <b>guess</b> (this should have been asked to the developers of Java): because <i>often</i> in programming languages all indices are zero-based (e.g. arrays), so it is in Java - doing so allow doing <code>subMap(0, map.size())</code> using <code>size()</code> directly without having to subtract <code>1</code>"},{"owner":{"account_id":399622,"reputation":4096,"user_id":765091,"display_name":"slothrop"},"score":1,"creation_date":1658566430,"post_id":73089231,"comment_id":129087198,"body_markdown":"I like this author&#39;s way of thinking about it: https://blog.nelhage.com/2015/08/indices-point-between-elements/","body":"I like this author&#39;s way of thinking about it: <a href=\"https://blog.nelhage.com/2015/08/indices-point-between-elements/\" rel=\"nofollow noreferrer\">blog.nelhage.com/2015/08/indices-point-between-elements</a>"},{"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"score":1,"creation_date":1658567019,"post_id":73089231,"comment_id":129087279,"body_markdown":"You might also want to check this answer https://stackoverflow.com/questions/26631078/why-is-substring-method-substringstart-indexinclusive-end-index-exclusive#26631968","body":"You might also want to check this answer <a href=\"https://stackoverflow.com/questions/26631078/why-is-substring-method-substringstart-indexinclusive-end-index-exclusive#26631968\" title=\"why is substring method substringstart indexinclusive end index exclusive%2326631968\">stackoverflow.com/questions/26631078/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":17417109,"reputation":11,"user_id":12623289,"display_name":"kamran mt21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658567191,"creation_date":1658566132,"answer_id":73089311,"question_id":73089231,"body_markdown":"this is general in almost all programming languages I guess!\r\nlike I see in &#39;python&#39; and &#39;C&#39;.\r\n\r\nThis is kind of a rule of sets(collections) in mathematics. you can imagine this as below:\r\n```\r\nfromKey &lt;= x &lt; toKey\r\n```\r\neg:\r\n```\r\n0 &lt;= x &lt; 10\r\n```\r\nanyway, if you want to include `toKey` itself in any range, you should do:\r\n```\r\ntoKey + 1\r\n```\r\nor \r\n```\r\ntoKey ++\r\n```\r\n","title":"Why Java defaults to not include last value of a given range?","body":"<p>this is general in almost all programming languages I guess!\nlike I see in 'python' and 'C'.</p>\n<p>This is kind of a rule of sets(collections) in mathematics. you can imagine this as below:</p>\n<pre><code>fromKey &lt;= x &lt; toKey\n</code></pre>\n<p>eg:</p>\n<pre><code>0 &lt;= x &lt; 10\n</code></pre>\n<p>anyway, if you want to include <code>toKey</code> itself in any range, you should do:</p>\n<pre><code>toKey + 1\n</code></pre>\n<p>or</p>\n<pre><code>toKey ++\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25852451,"reputation":1,"user_id":19586246,"display_name":"Natanel"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1658566412,"creation_date":1658566412,"answer_id":73089350,"question_id":73089231,"body_markdown":"in java almost every method to get a sub part of a data structure it goes form the fromkey (included) to the tokey (not included) so what you have to do is do tokey +1 instead of just tokey.\r\nAs for example, if we do map.subMap(a,b); we will get the values from indexes a to b-1.\r\nHope this helps.","title":"Why Java defaults to not include last value of a given range?","body":"<p>in java almost every method to get a sub part of a data structure it goes form the fromkey (included) to the tokey (not included) so what you have to do is do tokey +1 instead of just tokey.\nAs for example, if we do map.subMap(a,b); we will get the values from indexes a to b-1.\nHope this helps.</p>\n"},{"tags":[],"owner":{"account_id":20013244,"reputation":1040,"user_id":14669853,"display_name":"Cactusroot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658568151,"creation_date":1658567291,"answer_id":73089438,"question_id":73089231,"body_markdown":"Indices in most programming languages start at `0`. Thus, the last element of any linear collection is `size - 1`.\r\n\r\nNow, any range is defined as start (inclusive) - end (exclusive), since it makes the code more readable.\r\n\r\n**Example**\r\n\r\nLet&#39;s say you have `&quot;Java&quot;` and you want to split it at the &quot;v&quot;.\r\n\r\nWith this definition, it is very easy:\r\n\r\n    String java = &quot;Java&quot;; // length: 4\r\n    int index = java.indexOf(&quot;v&quot;); // 2\r\n    \r\n    String start = java.substring(0, index); // from 0 (inclusive) to 2 (exclusive)\r\n    String end = java.substring(index); // from 2 (inclusive) to length (exclusive, implicit)\r\n    \r\n    System.out.println(start + &quot;, &quot; + end); // Ja, va","title":"Why Java defaults to not include last value of a given range?","body":"<p>Indices in most programming languages start at <code>0</code>. Thus, the last element of any linear collection is <code>size - 1</code>.</p>\n<p>Now, any range is defined as start (inclusive) - end (exclusive), since it makes the code more readable.</p>\n<p><strong>Example</strong></p>\n<p>Let's say you have <code>&quot;Java&quot;</code> and you want to split it at the &quot;v&quot;.</p>\n<p>With this definition, it is very easy:</p>\n<pre><code>String java = &quot;Java&quot;; // length: 4\nint index = java.indexOf(&quot;v&quot;); // 2\n\nString start = java.substring(0, index); // from 0 (inclusive) to 2 (exclusive)\nString end = java.substring(index); // from 2 (inclusive) to length (exclusive, implicit)\n\nSystem.out.println(start + &quot;, &quot; + end); // Ja, va\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1713714,"reputation":781,"user_id":1571268,"accept_rate":78,"display_name":"criztovyl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658568428,"creation_date":1658568428,"answer_id":73089565,"question_id":73089231,"body_markdown":"This has been &quot;answered&quot; for `String#substring` here:\r\n\r\nhttps://stackoverflow.com/a/26631968/1571268\r\n\r\n&gt; The question about the &quot;Why&quot; may be considered as philosophical or academic, and provoke answers along the line of &quot;That&#39;s just the way it is&quot;.\r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; However, regardless of which choice is made, and regardless how it is justified: It is important to be *consistent* throughout the whole API.","title":"Why Java defaults to not include last value of a given range?","body":"<p>This has been &quot;answered&quot; for <code>String#substring</code> here:</p>\n<p><a href=\"https://stackoverflow.com/a/26631968/1571268\">https://stackoverflow.com/a/26631968/1571268</a></p>\n<blockquote>\n<p>The question about the &quot;Why&quot; may be considered as philosophical or academic, and provoke answers along the line of &quot;That's just the way it is&quot;.</p>\n<p>[...]</p>\n<p>However, regardless of which choice is made, and regardless how it is justified: It is important to be <em>consistent</em> throughout the whole API.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5277236,"reputation":8320,"user_id":4213662,"accept_rate":80,"display_name":"Persixty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658677219,"creation_date":1658569659,"answer_id":73089688,"question_id":73089231,"body_markdown":"If you are going to specify ranges by specifying end-points it&#39;s generally best to specify the range as B&lt;=x&lt;E. \r\nAt the very least it means you can specify the empty range by B=E.\r\n\r\nBut when it comes to &#39;infinite&#39; value spaces it becomes essential.\r\n\r\nSuppose I want to specify every string beginning with C? \r\nIn the &#39;end exclusive&#39; model that&#39;s B=&quot;C&quot; and E=&quot;D&quot;.\r\nIn the &#39;end inclusive&#39; model that&#39;s B=&quot;C&quot; and E=&quot;CZZZZZZZZZZZZZZ...&quot; where E is some string we&#39;ve decided is longer than any string we&#39;re going to practically encounter.\r\n\r\nIt also makes it practical to define non-overlapping coverages as [B,E),[E,F) and so on.\r\n\r\n*NB: Mathematical convention is that [ indicates &gt;= and ) indicates &lt;*\r\n\r\nSome people argue it&#39;s a matter of taste. But in practice you can create a partition from ordered values A,B,C,D,E... as [A,B),[B,C),[C,D) without any fiddling around trying to identify (the potentially non-existent or unconstructable) value immediately before B.\r\n\r\nIt&#39;s somewhere between messy and impossible to construct the partition [A,B-e1],[B,C-e2]. Just duck the issue and use half-inclusive intervals!\r\nIt normally makes sense to use inclusive-exclusive ranges but the approach works the other way.","title":"Why Java defaults to not include last value of a given range?","body":"<p>If you are going to specify ranges by specifying end-points it's generally best to specify the range as B&lt;=x&lt;E.\nAt the very least it means you can specify the empty range by B=E.</p>\n<p>But when it comes to 'infinite' value spaces it becomes essential.</p>\n<p>Suppose I want to specify every string beginning with C?\nIn the 'end exclusive' model that's B=&quot;C&quot; and E=&quot;D&quot;.\nIn the 'end inclusive' model that's B=&quot;C&quot; and E=&quot;CZZZZZZZZZZZZZZ...&quot; where E is some string we've decided is longer than any string we're going to practically encounter.</p>\n<p>It also makes it practical to define non-overlapping coverages as [B,E),[E,F) and so on.</p>\n<p><em>NB: Mathematical convention is that [ indicates &gt;= and ) indicates &lt;</em></p>\n<p>Some people argue it's a matter of taste. But in practice you can create a partition from ordered values A,B,C,D,E... as [A,B),[B,C),[C,D) without any fiddling around trying to identify (the potentially non-existent or unconstructable) value immediately before B.</p>\n<p>It's somewhere between messy and impossible to construct the partition [A,B-e1],[B,C-e2]. Just duck the issue and use half-inclusive intervals!\nIt normally makes sense to use inclusive-exclusive ranges but the approach works the other way.</p>\n"}],"owner":{"account_id":25765271,"reputation":23,"user_id":19515437,"display_name":"GAURAV KABRA"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73089688,"answer_count":5,"score":-1,"last_activity_date":1658677219,"creation_date":1658565458,"question_id":73089231,"body_markdown":"I am going through official [TreeMap documentation][1]. I see subMap() prototype as:\r\n\r\n&gt; `public SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey)` is equivalent to `subMap(fromKey, true, toKey, false)`.\r\n\r\nI have seen everywhere, Java does not include the last value of a given range by default? Why was this decision made that default inclusion value for `toKey` will be false (and not true)?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html","title":"Why Java defaults to not include last value of a given range?","body":"<p>I am going through official <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html\" rel=\"nofollow noreferrer\">TreeMap documentation</a>. I see subMap() prototype as:</p>\n<blockquote>\n<p><code>public SortedMap&lt;K,V&gt; subMap(K fromKey, K toKey)</code> is equivalent to <code>subMap(fromKey, true, toKey, false)</code>.</p>\n</blockquote>\n<p>I have seen everywhere, Java does not include the last value of a given range by default? Why was this decision made that default inclusion value for <code>toKey</code> will be false (and not true)?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":1,"creation_date":1658661779,"post_id":73097000,"comment_id":129101932,"body_markdown":"Show your `application.properties` and/or `application.yml`","body":"Show your <code>application.properties</code> and/or <code>application.yml</code>"},{"owner":{"account_id":19818900,"reputation":69,"user_id":14515935,"display_name":"MyProblems"},"score":0,"creation_date":1658662356,"post_id":73097000,"comment_id":129102024,"body_markdown":"Hello and thanks for answering, i edited my post now, i don&#39;t know where is the problem, i used sysout to see where exactly that property change... in db is Easter, in rest when i query for Category it shows Christmas... in db is Easter, when i add Category to Store, it becomes Christmas in DB and in the Query as well...","body":"Hello and thanks for answering, i edited my post now, i don&#39;t know where is the problem, i used sysout to see where exactly that property change... in db is Easter, in rest when i query for Category it shows Christmas... in db is Easter, when i add Category to Store, it becomes Christmas in DB and in the Query as well..."}],"answers":[{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658677163,"creation_date":1658662858,"answer_id":73098071,"question_id":73097000,"body_markdown":"You can set `spring.jpa.hibernate.ddl-auto` explicitly and the standard Hibernate property values are `none`, `validate`, `update`, `create-drop`. Therefore, change\r\n\r\n```java\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\n```\r\n\r\nto \r\n\r\n```java\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\nor another value if you want (maybe `validate`).\r\n\r\nReference document https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-hibernate\r\n\r\nUpdate based on source code\r\n\r\n[![enter image description here][1]][1]\r\n\r\nfocus at\r\n\r\n```java\r\n@Bean\r\npublic LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean()\r\n{\r\n    LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\r\n    localContainerEntityManagerFactoryBean.setDataSource(dataSource());\r\n    Properties properties = new Properties();\r\n    properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create&quot;);\r\n    localContainerEntityManagerFactoryBean.setJpaProperties(properties);\r\n    localContainerEntityManagerFactoryBean.setJpaVendorAdapter(jpaVendorAdapter());\r\n    localContainerEntityManagerFactoryBean.setPackagesToScan(&quot;com.balabasciuc.shoppingprojectwithhibernate&quot;);\r\n    return localContainerEntityManagerFactoryBean;\r\n}\r\n```\r\nthis line\r\n```java\r\nproperties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create&quot;);\r\n```\r\nCause auto create schema.\r\n\r\n  [1]: https://i.stack.imgur.com/uTvtH.png","title":"Hibernate update my Entity without my consent","body":"<p>You can set <code>spring.jpa.hibernate.ddl-auto</code> explicitly and the standard Hibernate property values are <code>none</code>, <code>validate</code>, <code>update</code>, <code>create-drop</code>. Therefore, change</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.jpa.hibernate.ddl-auto=create-drop\n</code></pre>\n<p>to</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>or another value if you want (maybe <code>validate</code>).</p>\n<p>Reference document <a href=\"https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-hibernate\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/1.1.0.M1/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-hibernate</a></p>\n<p>Update based on source code</p>\n<p><a href=\"https://i.stack.imgur.com/uTvtH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uTvtH.png\" alt=\"enter image description here\" /></a></p>\n<p>focus at</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean()\n{\n    LocalContainerEntityManagerFactoryBean localContainerEntityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n    localContainerEntityManagerFactoryBean.setDataSource(dataSource());\n    Properties properties = new Properties();\n    properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create&quot;);\n    localContainerEntityManagerFactoryBean.setJpaProperties(properties);\n    localContainerEntityManagerFactoryBean.setJpaVendorAdapter(jpaVendorAdapter());\n    localContainerEntityManagerFactoryBean.setPackagesToScan(&quot;com.balabasciuc.shoppingprojectwithhibernate&quot;);\n    return localContainerEntityManagerFactoryBean;\n}\n</code></pre>\n<p>this line</p>\n<pre class=\"lang-java prettyprint-override\"><code>properties.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;create&quot;);\n</code></pre>\n<p>Cause auto create schema.</p>\n"}],"owner":{"account_id":19818900,"reputation":69,"user_id":14515935,"display_name":"MyProblems"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658677163,"creation_date":1658653152,"question_id":73097000,"body_markdown":"I have a Product Entity with filds like name, price, and so on\r\n\r\nI have a Category Entity with name, List of Products and a Promotion Interface which in runtime can be any subclass -&gt; So a Category is saved in DB like: Category(name = &quot;Biotics&quot;, List&lt;Product&gt; = products, promotion = EasterPromotionSeason) \r\n\r\nI have a Store which have a Set of Categories\r\n\r\nThe problem is, my program works fine untill the point that i need to call a REST Endpoint to add Categories in Store\r\n\r\nIf my Category have a Promotion of type EasterPromotionSeason, saved in DB, when i save that Category in Store set, that Promotion becomes ChristmasPromotionSeason and i don&#39;t want that\r\n\r\nI get it is because of Dirty Checking, but i didn&#39;t updated my Promotion  or anything like that, but Hibernate does:\r\n\r\n\r\n \r\n\r\n       Hibernate: insert into PROJECT_HIBERNATE_Store (STORE_LOCATION_CITY, STORE_LOCATION_COUNTRY, STORE_LOCATION_ZIPCODE, storeName, storeType, STORE_ID) values (?, ?, ?, ?, ?, ?)\r\n    Hibernate: select store0_.STORE_ID as store_id1_7_, store0_.PROMOTION_STORE_ID as promotio7_7_, store0_.STORE_LOCATION_CITY as store_lo2_7_, store0_.STORE_LOCATION_COUNTRY as store_lo3_7_, store0_.STORE_LOCATION_ZIPCODE as store_lo4_7_, store0_.storeName as storenam5_7_, store0_.storeType as storetyp6_7_ from PROJECT_HIBERNATE_Store store0_ where store0_.storeType=?\r\n    Hibernate: select category0_.CATEGORY_ID as category1_0_, category0_.CATEGORY_DESCRIPTION as category2_0_, category0_.CATEGORY_NAME as category3_0_, category0_.PROMOTION_ID as promotio4_0_ from PROJECT_HIBERNATE_Category category0_ where category0_.CATEGORY_NAME=?\r\n    Hibernate: select promotion0_.promotionId as promotio1_6_0_, promotion0_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_0_, promotion0_.PROMOTION_SEASON as promotio3_6_0_, promotion0_.PROMOTION_STORE_ID as promotio4_6_0_ from PROJECT_HIBERNATE_Promotion promotion0_ where promotion0_.promotionId=?\r\n    Hibernate: select productcol0_.PRODUCT_CATEGORY_ID as product11_5_0_, productcol0_.PRODUCT_ID as product_1_5_0_, productcol0_.PRODUCT_ID as product_1_5_1_, productcol0_.PRODUCT_DESCRIPTION as product_2_5_1_, productcol0_.PRODUCT_NAME as product_3_5_1_, productcol0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productcol0_.PRODUCT_PRICE as product_5_5_1_, productcol0_.PRODUCED_AT_ as produced6_5_1_, productcol0_.PRODUCT_QUANTITY as product_7_5_1_, productcol0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productcol0_ where productcol0_.PRODUCT_CATEGORY_ID=?\r\n    Hibernate: select pricecolle0_.PRODUCT_ID as product_3_4_0_, pricecolle0_.PRICE_ID as price_id1_4_0_, pricecolle0_.PRICE_ID as price_id1_4_1_, pricecolle0_.PRICE_AMOUNT as price_am2_4_1_, pricecolle0_.PRODUCT_ID as product_3_4_1_, pricecolle0_1_.CURRENCY_EUROPE as currency1_2_1_, pricecolle0_1_.SHIPPING_COSTS_IN_EU as shipping2_2_1_, pricecolle0_2_.US_CURRENCY as us_curre1_8_1_, pricecolle0_2_.SHIPPING_COSTS_IN_US as shipping2_8_1_, case when pricecolle0_1_.EUROPE_PRICE_ID is not null then 1 when pricecolle0_2_.US_PRICE_ID is not null then 2 when pricecolle0_.PRICE_ID is not null then 0 end as clazz_1_ from PROJECT_HIBERNATE_Price pricecolle0_ left outer join PROJECT_HIBERNATE_EuropePrice pricecolle0_1_ on pricecolle0_.PRICE_ID=pricecolle0_1_.EUROPE_PRICE_ID left outer join PROJECT_HIBERNATE_USPrice pricecolle0_2_ on pricecolle0_.PRICE_ID=pricecolle0_2_.US_PRICE_ID where pricecolle0_.PRODUCT_ID=?\r\n    Hibernate: select productlis0_.PROMOTION_PRODUCT_ID as promotio9_5_0_, productlis0_.PRODUCT_ID as product_1_5_0_, productlis0_.PRODUCT_ID as product_1_5_1_, productlis0_.PRODUCT_DESCRIPTION as product_2_5_1_, productlis0_.PRODUCT_NAME as product_3_5_1_, productlis0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productlis0_.PRODUCT_PRICE as product_5_5_1_, productlis0_.PRODUCED_AT_ as produced6_5_1_, productlis0_.PRODUCT_QUANTITY as product_7_5_1_, productlis0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productlis0_ where productlis0_.PROMOTION_PRODUCT_ID=?\r\n    Hibernate: select categoryse0_.CATEGORY_STORE_ID as category5_0_0_, categoryse0_.CATEGORY_ID as category1_0_0_, categoryse0_.CATEGORY_ID as category1_0_1_, categoryse0_.CATEGORY_DESCRIPTION as category2_0_1_, categoryse0_.CATEGORY_NAME as category3_0_1_, categoryse0_.PROMOTION_ID as promotio4_0_1_, promotion1_.promotionId as promotio1_6_2_, promotion1_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_2_, promotion1_.PROMOTION_SEASON as promotio3_6_2_, promotion1_.PROMOTION_STORE_ID as promotio4_6_2_ from PROJECT_HIBERNATE_Category categoryse0_ left outer join PROJECT_HIBERNATE_Promotion promotion1_ on categoryse0_.PROMOTION_ID=promotion1_.promotionId where categoryse0_.CATEGORY_STORE_ID=?\r\n    Hibernate: select category0_.CATEGORY_ID as category1_0_0_, category0_.CATEGORY_DESCRIPTION as category2_0_0_, category0_.CATEGORY_NAME as category3_0_0_, category0_.PROMOTION_ID as promotio4_0_0_, promotion1_.promotionId as promotio1_6_1_, promotion1_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_1_, promotion1_.PROMOTION_SEASON as promotio3_6_1_, promotion1_.PROMOTION_STORE_ID as promotio4_6_1_ from PROJECT_HIBERNATE_Category category0_ left outer join PROJECT_HIBERNATE_Promotion promotion1_ on category0_.PROMOTION_ID=promotion1_.promotionId where category0_.CATEGORY_ID=?\r\n    Hibernate: update PROJECT_HIBERNATE_Promotion set PROMOTION_SEASON=? where promotionId=?\r\n    Hibernate: update PROJECT_HIBERNATE_Category set CATEGORY_STORE_ID=? where CATEGORY_ID=?\r\n    Hibernate: select customerco0_.CUSTOMER_STORE_ID as customer8_1_0_, customerco0_.CUSTOMER_ID as customer1_1_0_, customerco0_.CUSTOMER_ID as customer1_1_1_, customerco0_.CUSTOMER_MONEY as customer2_1_1_, customerco0_.CUSTOMER_CITY as customer3_1_1_, customerco0_.CUSTOMER_COUNTRY as customer4_1_1_, customerco0_.CUSTOMER_EMAIL as customer5_1_1_, customerco0_.CUSTOMER_NAME as customer6_1_1_, customerco0_.CUSTOMER_PRENAME as customer7_1_1_ from PROJECT_HIBERNATE_Customer customerco0_ where customerco0_.CUSTOMER_STORE_ID=?\r\n    Hibernate: select productcol0_.PRODUCT_CATEGORY_ID as product11_5_0_, productcol0_.PRODUCT_ID as product_1_5_0_, productcol0_.PRODUCT_ID as product_1_5_1_, productcol0_.PRODUCT_DESCRIPTION as product_2_5_1_, productcol0_.PRODUCT_NAME as product_3_5_1_, productcol0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productcol0_.PRODUCT_PRICE as product_5_5_1_, productcol0_.PRODUCED_AT_ as produced6_5_1_, productcol0_.PRODUCT_QUANTITY as product_7_5_1_, productcol0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productcol0_ where productcol0_.PRODUCT_CATEGORY_ID=?\r\n    Hibernate: select pricecolle0_.PRODUCT_ID as product_3_4_0_, pricecolle0_.PRICE_ID as price_id1_4_0_, pricecolle0_.PRICE_ID as price_id1_4_1_, pricecolle0_.PRICE_AMOUNT as price_am2_4_1_, pricecolle0_.PRODUCT_ID as product_3_4_1_, pricecolle0_1_.CURRENCY_EUROPE as currency1_2_1_, pricecolle0_1_.SHIPPING_COSTS_IN_EU as shipping2_2_1_, pricecolle0_2_.US_CURRENCY as us_curre1_8_1_, pricecolle0_2_.SHIPPING_COSTS_IN_US as shipping2_8_1_, case when pricecolle0_1_.EUROPE_PRICE_ID is not null then 1 when pricecolle0_2_.US_PRICE_ID is not null then 2 when pricecolle0_.PRICE_ID is not null then 0 end as clazz_1_ from PROJECT_HIBERNATE_Price pricecolle0_ left outer join PROJECT_HIBERNATE_EuropePrice pricecolle0_1_ on pricecolle0_.PRICE_ID=pricecolle0_1_.EUROPE_PRICE_ID left outer join PROJECT_HIBERNATE_USPrice pricecolle0_2_ on pricecolle0_.PRICE_ID=pricecolle0_2_.US_PRICE_ID where pricecolle0_.PRODUCT_ID=?\r\n    Hibernate: select productlis0_.PROMOTION_PRODUCT_ID as promotio9_5_0_, productlis0_.PRODUCT_ID as product_1_5_0_, productlis0_.PRODUCT_ID as product_1_5_1_, productlis0_.PRODUCT_DESCRIPTION as product_2_5_1_, productlis0_.PRODUCT_NAME as product_3_5_1_, productlis0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productlis0_.PRODUCT_PRICE as product_5_5_1_, productlis0_.PRODUCED_AT_ as produced6_5_1_, productlis0_.PRODUCT_QUANTITY as product_7_5_1_, productlis0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productlis0_ where productlis0_.PROMOTION_PRODUCT_ID=?\r\n    Hibernate: select productlis0_.STORE_ID as store_id1_3_0_, productlis0_.PRODUCT_ID as product_2_3_0_, productlis0_.PRODUCT_POSITION as product_3_0_, product1_.PRODUCT_ID as product_1_5_1_, product1_.PRODUCT_DESCRIPTION as product_2_5_1_, product1_.PRODUCT_NAME as product_3_5_1_, product1_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, product1_.PRODUCT_PRICE as product_5_5_1_, product1_.PRODUCED_AT_ as produced6_5_1_, product1_.PRODUCT_QUANTITY as product_7_5_1_, product1_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_MANY_STORES_TO_MANY_PRODUCTS_IDS productlis0_ inner join PROJECT_HIBERNATE_Product product1_ on productlis0_.PRODUCT_ID=product1_.PRODUCT_ID where productlis0_.STORE_ID=?\r\n\r\n\r\nWhat can i do to avoid this:\r\n\r\n    Hibernate: update PROJECT_HIBERNATE_Promotion set PROMOTION_SEASON=? where promotionId=?\r\n    Hibernate: update PROJECT_HIBERNATE_Category set CATEGORY_STORE_ID=? where CATEGORY_ID=?\r\n\r\nEdited:\r\nMy app properties file:\r\n\r\n    spring.datasource.url=jdbc:h2:mem:shopping-project\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=so\r\n    spring.datasource.password=\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    \r\n    \r\n    spring.h2.console.enabled=true\r\n\r\n","title":"Hibernate update my Entity without my consent","body":"<p>I have a Product Entity with filds like name, price, and so on</p>\n<p>I have a Category Entity with name, List of Products and a Promotion Interface which in runtime can be any subclass -&gt; So a Category is saved in DB like: Category(name = &quot;Biotics&quot;, List = products, promotion = EasterPromotionSeason)</p>\n<p>I have a Store which have a Set of Categories</p>\n<p>The problem is, my program works fine untill the point that i need to call a REST Endpoint to add Categories in Store</p>\n<p>If my Category have a Promotion of type EasterPromotionSeason, saved in DB, when i save that Category in Store set, that Promotion becomes ChristmasPromotionSeason and i don't want that</p>\n<p>I get it is because of Dirty Checking, but i didn't updated my Promotion  or anything like that, but Hibernate does:</p>\n<pre><code>   Hibernate: insert into PROJECT_HIBERNATE_Store (STORE_LOCATION_CITY, STORE_LOCATION_COUNTRY, STORE_LOCATION_ZIPCODE, storeName, storeType, STORE_ID) values (?, ?, ?, ?, ?, ?)\nHibernate: select store0_.STORE_ID as store_id1_7_, store0_.PROMOTION_STORE_ID as promotio7_7_, store0_.STORE_LOCATION_CITY as store_lo2_7_, store0_.STORE_LOCATION_COUNTRY as store_lo3_7_, store0_.STORE_LOCATION_ZIPCODE as store_lo4_7_, store0_.storeName as storenam5_7_, store0_.storeType as storetyp6_7_ from PROJECT_HIBERNATE_Store store0_ where store0_.storeType=?\nHibernate: select category0_.CATEGORY_ID as category1_0_, category0_.CATEGORY_DESCRIPTION as category2_0_, category0_.CATEGORY_NAME as category3_0_, category0_.PROMOTION_ID as promotio4_0_ from PROJECT_HIBERNATE_Category category0_ where category0_.CATEGORY_NAME=?\nHibernate: select promotion0_.promotionId as promotio1_6_0_, promotion0_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_0_, promotion0_.PROMOTION_SEASON as promotio3_6_0_, promotion0_.PROMOTION_STORE_ID as promotio4_6_0_ from PROJECT_HIBERNATE_Promotion promotion0_ where promotion0_.promotionId=?\nHibernate: select productcol0_.PRODUCT_CATEGORY_ID as product11_5_0_, productcol0_.PRODUCT_ID as product_1_5_0_, productcol0_.PRODUCT_ID as product_1_5_1_, productcol0_.PRODUCT_DESCRIPTION as product_2_5_1_, productcol0_.PRODUCT_NAME as product_3_5_1_, productcol0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productcol0_.PRODUCT_PRICE as product_5_5_1_, productcol0_.PRODUCED_AT_ as produced6_5_1_, productcol0_.PRODUCT_QUANTITY as product_7_5_1_, productcol0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productcol0_ where productcol0_.PRODUCT_CATEGORY_ID=?\nHibernate: select pricecolle0_.PRODUCT_ID as product_3_4_0_, pricecolle0_.PRICE_ID as price_id1_4_0_, pricecolle0_.PRICE_ID as price_id1_4_1_, pricecolle0_.PRICE_AMOUNT as price_am2_4_1_, pricecolle0_.PRODUCT_ID as product_3_4_1_, pricecolle0_1_.CURRENCY_EUROPE as currency1_2_1_, pricecolle0_1_.SHIPPING_COSTS_IN_EU as shipping2_2_1_, pricecolle0_2_.US_CURRENCY as us_curre1_8_1_, pricecolle0_2_.SHIPPING_COSTS_IN_US as shipping2_8_1_, case when pricecolle0_1_.EUROPE_PRICE_ID is not null then 1 when pricecolle0_2_.US_PRICE_ID is not null then 2 when pricecolle0_.PRICE_ID is not null then 0 end as clazz_1_ from PROJECT_HIBERNATE_Price pricecolle0_ left outer join PROJECT_HIBERNATE_EuropePrice pricecolle0_1_ on pricecolle0_.PRICE_ID=pricecolle0_1_.EUROPE_PRICE_ID left outer join PROJECT_HIBERNATE_USPrice pricecolle0_2_ on pricecolle0_.PRICE_ID=pricecolle0_2_.US_PRICE_ID where pricecolle0_.PRODUCT_ID=?\nHibernate: select productlis0_.PROMOTION_PRODUCT_ID as promotio9_5_0_, productlis0_.PRODUCT_ID as product_1_5_0_, productlis0_.PRODUCT_ID as product_1_5_1_, productlis0_.PRODUCT_DESCRIPTION as product_2_5_1_, productlis0_.PRODUCT_NAME as product_3_5_1_, productlis0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productlis0_.PRODUCT_PRICE as product_5_5_1_, productlis0_.PRODUCED_AT_ as produced6_5_1_, productlis0_.PRODUCT_QUANTITY as product_7_5_1_, productlis0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productlis0_ where productlis0_.PROMOTION_PRODUCT_ID=?\nHibernate: select categoryse0_.CATEGORY_STORE_ID as category5_0_0_, categoryse0_.CATEGORY_ID as category1_0_0_, categoryse0_.CATEGORY_ID as category1_0_1_, categoryse0_.CATEGORY_DESCRIPTION as category2_0_1_, categoryse0_.CATEGORY_NAME as category3_0_1_, categoryse0_.PROMOTION_ID as promotio4_0_1_, promotion1_.promotionId as promotio1_6_2_, promotion1_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_2_, promotion1_.PROMOTION_SEASON as promotio3_6_2_, promotion1_.PROMOTION_STORE_ID as promotio4_6_2_ from PROJECT_HIBERNATE_Category categoryse0_ left outer join PROJECT_HIBERNATE_Promotion promotion1_ on categoryse0_.PROMOTION_ID=promotion1_.promotionId where categoryse0_.CATEGORY_STORE_ID=?\nHibernate: select category0_.CATEGORY_ID as category1_0_0_, category0_.CATEGORY_DESCRIPTION as category2_0_0_, category0_.CATEGORY_NAME as category3_0_0_, category0_.PROMOTION_ID as promotio4_0_0_, promotion1_.promotionId as promotio1_6_1_, promotion1_.NUMBER_PRODUCTS_AT_PROMOTION as number_p2_6_1_, promotion1_.PROMOTION_SEASON as promotio3_6_1_, promotion1_.PROMOTION_STORE_ID as promotio4_6_1_ from PROJECT_HIBERNATE_Category category0_ left outer join PROJECT_HIBERNATE_Promotion promotion1_ on category0_.PROMOTION_ID=promotion1_.promotionId where category0_.CATEGORY_ID=?\nHibernate: update PROJECT_HIBERNATE_Promotion set PROMOTION_SEASON=? where promotionId=?\nHibernate: update PROJECT_HIBERNATE_Category set CATEGORY_STORE_ID=? where CATEGORY_ID=?\nHibernate: select customerco0_.CUSTOMER_STORE_ID as customer8_1_0_, customerco0_.CUSTOMER_ID as customer1_1_0_, customerco0_.CUSTOMER_ID as customer1_1_1_, customerco0_.CUSTOMER_MONEY as customer2_1_1_, customerco0_.CUSTOMER_CITY as customer3_1_1_, customerco0_.CUSTOMER_COUNTRY as customer4_1_1_, customerco0_.CUSTOMER_EMAIL as customer5_1_1_, customerco0_.CUSTOMER_NAME as customer6_1_1_, customerco0_.CUSTOMER_PRENAME as customer7_1_1_ from PROJECT_HIBERNATE_Customer customerco0_ where customerco0_.CUSTOMER_STORE_ID=?\nHibernate: select productcol0_.PRODUCT_CATEGORY_ID as product11_5_0_, productcol0_.PRODUCT_ID as product_1_5_0_, productcol0_.PRODUCT_ID as product_1_5_1_, productcol0_.PRODUCT_DESCRIPTION as product_2_5_1_, productcol0_.PRODUCT_NAME as product_3_5_1_, productcol0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productcol0_.PRODUCT_PRICE as product_5_5_1_, productcol0_.PRODUCED_AT_ as produced6_5_1_, productcol0_.PRODUCT_QUANTITY as product_7_5_1_, productcol0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productcol0_ where productcol0_.PRODUCT_CATEGORY_ID=?\nHibernate: select pricecolle0_.PRODUCT_ID as product_3_4_0_, pricecolle0_.PRICE_ID as price_id1_4_0_, pricecolle0_.PRICE_ID as price_id1_4_1_, pricecolle0_.PRICE_AMOUNT as price_am2_4_1_, pricecolle0_.PRODUCT_ID as product_3_4_1_, pricecolle0_1_.CURRENCY_EUROPE as currency1_2_1_, pricecolle0_1_.SHIPPING_COSTS_IN_EU as shipping2_2_1_, pricecolle0_2_.US_CURRENCY as us_curre1_8_1_, pricecolle0_2_.SHIPPING_COSTS_IN_US as shipping2_8_1_, case when pricecolle0_1_.EUROPE_PRICE_ID is not null then 1 when pricecolle0_2_.US_PRICE_ID is not null then 2 when pricecolle0_.PRICE_ID is not null then 0 end as clazz_1_ from PROJECT_HIBERNATE_Price pricecolle0_ left outer join PROJECT_HIBERNATE_EuropePrice pricecolle0_1_ on pricecolle0_.PRICE_ID=pricecolle0_1_.EUROPE_PRICE_ID left outer join PROJECT_HIBERNATE_USPrice pricecolle0_2_ on pricecolle0_.PRICE_ID=pricecolle0_2_.US_PRICE_ID where pricecolle0_.PRODUCT_ID=?\nHibernate: select productlis0_.PROMOTION_PRODUCT_ID as promotio9_5_0_, productlis0_.PRODUCT_ID as product_1_5_0_, productlis0_.PRODUCT_ID as product_1_5_1_, productlis0_.PRODUCT_DESCRIPTION as product_2_5_1_, productlis0_.PRODUCT_NAME as product_3_5_1_, productlis0_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, productlis0_.PRODUCT_PRICE as product_5_5_1_, productlis0_.PRODUCED_AT_ as produced6_5_1_, productlis0_.PRODUCT_QUANTITY as product_7_5_1_, productlis0_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_Product productlis0_ where productlis0_.PROMOTION_PRODUCT_ID=?\nHibernate: select productlis0_.STORE_ID as store_id1_3_0_, productlis0_.PRODUCT_ID as product_2_3_0_, productlis0_.PRODUCT_POSITION as product_3_0_, product1_.PRODUCT_ID as product_1_5_1_, product1_.PRODUCT_DESCRIPTION as product_2_5_1_, product1_.PRODUCT_NAME as product_3_5_1_, product1_.PRODUCT_EXPIRES_AT_ as product_4_5_1_, product1_.PRODUCT_PRICE as product_5_5_1_, product1_.PRODUCED_AT_ as produced6_5_1_, product1_.PRODUCT_QUANTITY as product_7_5_1_, product1_.PRODUCT_STATUS as product_8_5_1_ from PROJECT_HIBERNATE_MANY_STORES_TO_MANY_PRODUCTS_IDS productlis0_ inner join PROJECT_HIBERNATE_Product product1_ on productlis0_.PRODUCT_ID=product1_.PRODUCT_ID where productlis0_.STORE_ID=?\n</code></pre>\n<p>What can i do to avoid this:</p>\n<pre><code>Hibernate: update PROJECT_HIBERNATE_Promotion set PROMOTION_SEASON=? where promotionId=?\nHibernate: update PROJECT_HIBERNATE_Category set CATEGORY_STORE_ID=? where CATEGORY_ID=?\n</code></pre>\n<p>Edited:\nMy app properties file:</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:shopping-project\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=so\nspring.datasource.password=\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=create-drop\n\n\nspring.h2.console.enabled=true\n</code></pre>\n"},{"tags":["java","java-time","xmlgregoriancalendar"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1650966925,"post_id":72011818,"comment_id":127243531,"body_markdown":"It depends a lot. `ZonedDateTime` is an option, but since an `XMLGregorianCalendar` so-called *timezone* isnt but a mere UTC offset, Id tend more towards `OffsetDateTime`. However, any field in an `XMLGreforianCalendar` may be undefined, so depending on concrete use in some situation `LocalDate`, `LocalDateTime` or about any java.time date or time class may be appropriate.","body":"It depends a lot. <code>ZonedDateTime</code> is an option, but since an <code>XMLGregorianCalendar</code> so-called <i>timezone</i> isnt but a mere UTC offset, Id tend more towards <code>OffsetDateTime</code>. However, any field in an <code>XMLGreforianCalendar</code> may be undefined, so depending on concrete use in some situation <code>LocalDate</code>, <code>LocalDateTime</code> or about any java.time date or time class may be appropriate."},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":2,"creation_date":1650967798,"post_id":72011818,"comment_id":127243858,"body_markdown":"Ok, it turns out you have to use an `OffsetDateTime` because your `String` `2019-10-09T19:20:45.677+02:00` does not contain a zone but an offset (one that several zones might have).","body":"Ok, it turns out you have to use an <code>OffsetDateTime</code> because your <code>String</code> <code>2019-10-09T19:20:45.677+02:00</code> does not contain a zone but an offset (one that several zones might have)."}],"answers":[{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1650969253,"creation_date":1650968233,"answer_id":72012215,"question_id":72011818,"body_markdown":"The `String` you have (`&quot;2019-10-09T19:20:45.677+02:00&quot;`) is in an ISO format that doesn&#39;t even need an extra formatter in order to parse it. The main reason for the use of an `OffsetDateTime` are the last 6 characters: `+02:00`, which denote an offset of 2 hours from UTC (more than just one time zone may actually have this offset at the same time).\r\n\r\nYou can convert this value into **the** proper `java.time` instance like this, for example:\r\n\r\n```lang-java\r\npublic static void main(String[] args) throws DatatypeConfigurationException {\r\n\t// your example datetime\r\n\tString lastModified = &quot;2019-10-09T19:20:45.677+02:00&quot;;\r\n\t// create an XMLGregorianCalendar for example purpose\r\n\tXMLGregorianCalendar xmlGC = DatatypeFactory.newInstance()\r\n\t\t\t\t\t\t\t\t\t\t\t\t.newXMLGregorianCalendar(lastModified);\r\n\t// print it once in order to see the values\r\n\tSystem.out.println(&quot;XMLGregorianCalendar: &quot; + xmlGC.toString());\r\n\t// parse its toString() method to an OffsetDateTime\r\n\tOffsetDateTime lastModOdt = OffsetDateTime.parse(xmlGC.toString());\r\n\t// format the content of the OffsetDateTime in ISO standard\r\n\tSystem.out.println(&quot;OffsetDateTime:       &quot; \r\n\t\t\t+ lastModOdt.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME));\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```lang-none\r\nXMLGregorianCalendar: 2019-10-09T19:20:45.677+02:00\r\nOffsetDateTime:       2019-10-09T19:20:45.677+02:00\r\n```\r\n\r\nThis should be correct (lossless enough by losing no information).","title":"Correct java.time representation of XMLGregorianCalendar","body":"<p>The <code>String</code> you have (<code>&quot;2019-10-09T19:20:45.677+02:00&quot;</code>) is in an ISO format that doesn't even need an extra formatter in order to parse it. The main reason for the use of an <code>OffsetDateTime</code> are the last 6 characters: <code>+02:00</code>, which denote an offset of 2 hours from UTC (more than just one time zone may actually have this offset at the same time).</p>\n<p>You can convert this value into <strong>the</strong> proper <code>java.time</code> instance like this, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws DatatypeConfigurationException {\n    // your example datetime\n    String lastModified = &quot;2019-10-09T19:20:45.677+02:00&quot;;\n    // create an XMLGregorianCalendar for example purpose\n    XMLGregorianCalendar xmlGC = DatatypeFactory.newInstance()\n                                                .newXMLGregorianCalendar(lastModified);\n    // print it once in order to see the values\n    System.out.println(&quot;XMLGregorianCalendar: &quot; + xmlGC.toString());\n    // parse its toString() method to an OffsetDateTime\n    OffsetDateTime lastModOdt = OffsetDateTime.parse(xmlGC.toString());\n    // format the content of the OffsetDateTime in ISO standard\n    System.out.println(&quot;OffsetDateTime:       &quot; \n            + lastModOdt.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME));\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>XMLGregorianCalendar: 2019-10-09T19:20:45.677+02:00\nOffsetDateTime:       2019-10-09T19:20:45.677+02:00\n</code></pre>\n<p>This should be correct (lossless enough by losing no information).</p>\n"},{"tags":[],"owner":{"account_id":2726971,"reputation":151,"user_id":2351753,"accept_rate":100,"display_name":"nigelg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658676465,"creation_date":1658676465,"answer_id":73099695,"question_id":72011818,"body_markdown":"I&#39;ve been struggling with a similar problem all morning and Ole&#39;s comments were more insightful than the accepted answer so thought I should post the conclusion I came to.\r\n\r\nTechnically yes, the exact equivalent to XMLGregorianCalendar is OffsetDateTime (assuming your example, where you have y-m-d h:m:s+z fields populated) as the time zone offset is known but which actual time zone it is is unknown (as per other comments, there are many time zones all with offset +2:00).  You can convert it easily like so, without going via an intermediary string:\r\n\r\n    xmlGC.toGregorianCalendar ().toZonedDateTime ().toOffsetDateTime ()\r\n\r\nBut I think the real answer is *it depends what you want to do with it*.  In my case, I want to display the date/time to the user.  If that is true, do you really care what time zone the date/time happened to be stored as in the XML?  The following are both effectively identical, i.e. they both represent the same point in time.\r\n\r\n    &lt;lastModified&gt;2019-10-09T19:20:45.677+02:00&lt;/lastModified&gt;\r\n    &lt;lastModified&gt;2019-10-09T20:20:45.677+01:00&lt;/lastModified&gt;\r\n\r\nIf you don&#39;t care about the time zone from the XML and just the point in time it reperesents, then the correct answer is Instant, which you can get like\r\n\r\n    xmlGC.toGregorianCalendar ().toInstant ()\r\n\r\nand from there apply whatever time zone the user is in, rather than the time zone from the XML.  So for me the right answer was to do:\r\n\r\n    xmlGC.toGregorianCalendar ().toInstant ().atZone (ZoneId.systemDefault ())","title":"Correct java.time representation of XMLGregorianCalendar","body":"<p>I've been struggling with a similar problem all morning and Ole's comments were more insightful than the accepted answer so thought I should post the conclusion I came to.</p>\n<p>Technically yes, the exact equivalent to XMLGregorianCalendar is OffsetDateTime (assuming your example, where you have y-m-d h:m:s+z fields populated) as the time zone offset is known but which actual time zone it is is unknown (as per other comments, there are many time zones all with offset +2:00).  You can convert it easily like so, without going via an intermediary string:</p>\n<pre><code>xmlGC.toGregorianCalendar ().toZonedDateTime ().toOffsetDateTime ()\n</code></pre>\n<p>But I think the real answer is <em>it depends what you want to do with it</em>.  In my case, I want to display the date/time to the user.  If that is true, do you really care what time zone the date/time happened to be stored as in the XML?  The following are both effectively identical, i.e. they both represent the same point in time.</p>\n<pre><code>&lt;lastModified&gt;2019-10-09T19:20:45.677+02:00&lt;/lastModified&gt;\n&lt;lastModified&gt;2019-10-09T20:20:45.677+01:00&lt;/lastModified&gt;\n</code></pre>\n<p>If you don't care about the time zone from the XML and just the point in time it reperesents, then the correct answer is Instant, which you can get like</p>\n<pre><code>xmlGC.toGregorianCalendar ().toInstant ()\n</code></pre>\n<p>and from there apply whatever time zone the user is in, rather than the time zone from the XML.  So for me the right answer was to do:</p>\n<pre><code>xmlGC.toGregorianCalendar ().toInstant ().atZone (ZoneId.systemDefault ())\n</code></pre>\n"}],"owner":{"account_id":13622749,"reputation":583,"user_id":9826710,"display_name":"Abid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":72012215,"answer_count":2,"score":1,"last_activity_date":1658676465,"creation_date":1650966479,"question_id":72011818,"body_markdown":"I have a XML element with the following content:\r\n\r\n    &lt;lastModified&gt;2019-10-09T19:20:45.677+02:00&lt;/lastModified&gt;\r\n\r\nThis is mapped to Java&#39;s `XMLGregorianCalendar`.\r\n\r\nI need to convert this value in an appropriate java.time instance.\r\n\r\nI am a little confused about which java.time class is the &quot;correct&quot; (i.e. lossless) representation of this `XMLGregorianCalendar` value.\r\n\r\nI suppose it should be `ZonedDateTime` or is `OffsetDateTime` the better choice?","title":"Correct java.time representation of XMLGregorianCalendar","body":"<p>I have a XML element with the following content:</p>\n<pre><code>&lt;lastModified&gt;2019-10-09T19:20:45.677+02:00&lt;/lastModified&gt;\n</code></pre>\n<p>This is mapped to Java's <code>XMLGregorianCalendar</code>.</p>\n<p>I need to convert this value in an appropriate java.time instance.</p>\n<p>I am a little confused about which java.time class is the &quot;correct&quot; (i.e. lossless) representation of this <code>XMLGregorianCalendar</code> value.</p>\n<p>I suppose it should be <code>ZonedDateTime</code> or is <code>OffsetDateTime</code> the better choice?</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-realtime-database"],"answers":[{"tags":[],"owner":{"account_id":14879349,"reputation":525,"user_id":10744522,"display_name":"Shobhith"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1658676321,"creation_date":1658676321,"answer_id":73099675,"question_id":73099565,"body_markdown":"You can save `addValueEventLister` call in a variable `yourListener` and then do this when switching to another activity or when the current activity is going to finish ( usually in `onPause()` or `onStop()`),\r\n\r\n    dbref.removeEventListener(yourListener);","title":"The code is pushed to the main thread, how to fix it?","body":"<p>You can save <code>addValueEventLister</code> call in a variable <code>yourListener</code> and then do this when switching to another activity or when the current activity is going to finish ( usually in <code>onPause()</code> or <code>onStop()</code>),</p>\n<pre><code>dbref.removeEventListener(yourListener);\n</code></pre>\n"}],"owner":{"account_id":24552559,"reputation":79,"user_id":18461575,"display_name":"Biron1gg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1658737657,"accepted_answer_id":73099675,"answer_count":1,"score":0,"last_activity_date":1658676321,"creation_date":1658675355,"question_id":73099565,"body_markdown":"This code works even when I exit the activity and go to another activity. In order to understand this, I went to another activity and deleted the path in Firebase and the application crashed due to the fact that this path no longer exists. I would like to disable this code when I exit the activity, how can I do this?\r\n\r\n```\r\nprivate void addRoomEventListener() {\r\n        messageRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                if (role.equals(&quot;host:&quot;)) {\r\n                    if (snapshot.getValue(String.class).contains(&quot;guest:&quot;)) {\r\n                        step.setEnabled(true);\r\n                        Toast.makeText(DuelGame.this, &quot;&quot; +\r\n                                snapshot.getValue(String.class).replace(&quot;guest:&quot;, &quot;&quot;), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } else {\r\n                    if (snapshot.getValue(String.class).contains(&quot;host:&quot;)) {\r\n                        step.setEnabled(true);\r\n                        Toast.makeText(DuelGame.this, &quot;&quot; +\r\n                                snapshot.getValue(String.class).replace(&quot;host:&quot;, &quot;&quot;), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                messageRef.setValue(message);\r\n            }\r\n        });\r\n    }\r\n```","title":"The code is pushed to the main thread, how to fix it?","body":"<p>This code works even when I exit the activity and go to another activity. In order to understand this, I went to another activity and deleted the path in Firebase and the application crashed due to the fact that this path no longer exists. I would like to disable this code when I exit the activity, how can I do this?</p>\n<pre><code>private void addRoomEventListener() {\n        messageRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                if (role.equals(&quot;host:&quot;)) {\n                    if (snapshot.getValue(String.class).contains(&quot;guest:&quot;)) {\n                        step.setEnabled(true);\n                        Toast.makeText(DuelGame.this, &quot;&quot; +\n                                snapshot.getValue(String.class).replace(&quot;guest:&quot;, &quot;&quot;), Toast.LENGTH_SHORT).show();\n                    }\n                } else {\n                    if (snapshot.getValue(String.class).contains(&quot;host:&quot;)) {\n                        step.setEnabled(true);\n                        Toast.makeText(DuelGame.this, &quot;&quot; +\n                                snapshot.getValue(String.class).replace(&quot;host:&quot;, &quot;&quot;), Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                messageRef.setValue(message);\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","transactions","ravendb"],"comments":[{"owner":{"account_id":7559363,"reputation":3364,"user_id":5737562,"accept_rate":86,"display_name":"Danielle"},"score":0,"creation_date":1658677566,"post_id":73099518,"comment_id":129105168,"body_markdown":"Java code examples can be found in RavenDB Demo examples (not all demos are completed for Jave yet). For example see: https://demo.ravendb.net/demos/java/basics/create-document","body":"Java code examples can be found in RavenDB Demo examples (not all demos are completed for Jave yet). For example see: <a href=\"https://demo.ravendb.net/demos/java/basics/create-document\" rel=\"nofollow noreferrer\">demo.ravendb.net/demos/java/basics/create-document</a>"}],"owner":{"account_id":25225705,"reputation":21,"user_id":19061608,"display_name":"ptr16"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1658675007,"creation_date":1658674979,"question_id":73099518,"body_markdown":"can someone help me with an example how to create a ravenDB transaction in Java? I&#39;ve found it in C#, but I&#39;m working in Java.","title":"Ravendb transaction in java example","body":"<p>can someone help me with an example how to create a ravenDB transaction in Java? I've found it in C#, but I'm working in Java.</p>\n"},{"tags":["java","multithreading","concurrency","microservices"],"comments":[{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":2,"creation_date":1658667673,"post_id":73098523,"comment_id":129103066,"body_markdown":"What is &quot;the CAS issue&quot;?","body":"What is &quot;the CAS issue&quot;?"},{"owner":{"account_id":2338221,"reputation":518,"user_id":2050092,"accept_rate":83,"display_name":"rgolovakha"},"score":0,"creation_date":1658673120,"post_id":73098523,"comment_id":129104245,"body_markdown":"Well, I think I did a mistake saying its an issue. In some specific scenario it might be slower than sync because : https://stackoverflow.com/questions/11551963/can-synchronized-blocks-be-faster-than-atomics.","body":"Well, I think I did a mistake saying its an issue. In some specific scenario it might be slower than sync because : <a href=\"https://stackoverflow.com/questions/11551963/can-synchronized-blocks-be-faster-than-atomics\" title=\"can synchronized blocks be faster than atomics\">stackoverflow.com/questions/11551963/&hellip;</a>."},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":1,"creation_date":1658682607,"post_id":73098523,"comment_id":129106341,"body_markdown":"In that case, I&#39;d say it doesn&#39;t matter here.","body":"In that case, I&#39;d say it doesn&#39;t matter here."}],"answers":[{"tags":[],"owner":{"account_id":2130509,"reputation":4379,"user_id":1891456,"display_name":"Yogesh Badke"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1658674866,"creation_date":1658674866,"answer_id":73099502,"question_id":73098523,"body_markdown":"1. Plain Old Java: Use in-memory synchronization using java lock semantics. You are correct about using AtomicInteger. However, this can only work if you have only one application instance running.\r\n\r\n2. With MySql: There is a feature called [`select for update`][1] that helps you achieve what you are looking for. Whenever someone clicks on the link, you do `select for update` in MySql to see if the bonus is still available. If it is, you do update in DB in the same transaction. Meanwhile, all other parallel reads and writes will be blocked. Hence you get end-to-end fully atomic operation.\r\n\r\n3. Redis won&#39;t work because even if `INCR` is atomic, the whole flow of reading the value from Redis, performing the business logic, and updating the value in Redis won&#39;t be atomic. E.g. Say the user count in Redis was `999_999` and 2 users concurrently click on the link. The application checks the count and it&#39;s under the threshold of `1_000_000` which means, both users are eligible for a discount and you end up giving a discount to both.\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html","title":"Java concurrent counter architecture design","body":"<ol>\n<li><p>Plain Old Java: Use in-memory synchronization using java lock semantics. You are correct about using AtomicInteger. However, this can only work if you have only one application instance running.</p>\n</li>\n<li><p>With MySql: There is a feature called <a href=\"https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html\" rel=\"nofollow noreferrer\"><code>select for update</code></a> that helps you achieve what you are looking for. Whenever someone clicks on the link, you do <code>select for update</code> in MySql to see if the bonus is still available. If it is, you do update in DB in the same transaction. Meanwhile, all other parallel reads and writes will be blocked. Hence you get end-to-end fully atomic operation.</p>\n</li>\n<li><p>Redis won't work because even if <code>INCR</code> is atomic, the whole flow of reading the value from Redis, performing the business logic, and updating the value in Redis won't be atomic. E.g. Say the user count in Redis was <code>999_999</code> and 2 users concurrently click on the link. The application checks the count and it's under the threshold of <code>1_000_000</code> which means, both users are eligible for a discount and you end up giving a discount to both.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":2338221,"reputation":518,"user_id":2050092,"accept_rate":83,"display_name":"rgolovakha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73099502,"answer_count":1,"score":0,"last_activity_date":1658674866,"creation_date":1658666851,"question_id":73098523,"body_markdown":"Having the following business case:\r\n&gt; Email promotional campaign says that first 1_000_000 users pressing the link will receive a Bonus. Users are going to see either the Bonus or &quot;Sorry&quot; message immediately during visiting web page.\r\n\r\nQuestion: how to design this solution?\r\n\r\n- Option 1: Monolith. AtomicInteger. Can the CAS issue take place here? Or 1_000_000 is not that amount that cause an issue in this case? What is the number which can &quot;do&quot; that?\r\n- Option 2: Monolith. sync should work here with no issues ?\r\n- Option 3: Microservices. Redis INCR method.\r\nIs there are any options for microservices architecture? Is there a way to use MySql for this purpose?","title":"Java concurrent counter architecture design","body":"<p>Having the following business case:</p>\n<blockquote>\n<p>Email promotional campaign says that first 1_000_000 users pressing the link will receive a Bonus. Users are going to see either the Bonus or &quot;Sorry&quot; message immediately during visiting web page.</p>\n</blockquote>\n<p>Question: how to design this solution?</p>\n<ul>\n<li>Option 1: Monolith. AtomicInteger. Can the CAS issue take place here? Or 1_000_000 is not that amount that cause an issue in this case? What is the number which can &quot;do&quot; that?</li>\n<li>Option 2: Monolith. sync should work here with no issues ?</li>\n<li>Option 3: Microservices. Redis INCR method.\nIs there are any options for microservices architecture? Is there a way to use MySql for this purpose?</li>\n</ul>\n"},{"tags":["java","netty"],"comments":[{"owner":{"account_id":6372433,"reputation":194,"user_id":4944495,"display_name":"Nikita"},"score":0,"creation_date":1660089346,"post_id":73099437,"comment_id":129449186,"body_markdown":"Which client do you use? Maybe an issue on the client side...","body":"Which client do you use? Maybe an issue on the client side..."}],"owner":{"account_id":18708061,"reputation":3,"user_id":13638717,"display_name":"Shing"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658674230,"creation_date":1658674230,"question_id":73099437,"body_markdown":"The next code is the netty http server handler, it can operation normally.\r\n```java\r\npackage com.sunquakes.jsonrpc4j.server;\r\n\r\nimport com.alibaba.fastjson.JSON;\r\nimport io.netty.buffer.ByteBuf;\r\nimport io.netty.buffer.Unpooled;\r\nimport io.netty.channel.ChannelFutureListener;\r\nimport io.netty.channel.ChannelHandlerContext;\r\nimport io.netty.channel.ChannelInboundHandlerAdapter;\r\nimport io.netty.handler.codec.http.*;\r\nimport io.netty.util.CharsetUtil;\r\nimport org.springframework.context.ApplicationContext;\r\n\r\npublic class JsonRpcNettyHttpServerHandler extends ChannelInboundHandlerAdapter {\r\n\r\n    private ApplicationContext applicationContext;\r\n\r\n    public JsonRpcNettyHttpServerHandler(ApplicationContext applicationContext) {\r\n        this.applicationContext = applicationContext;\r\n    }\r\n\r\n    @Override\r\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\r\n\r\n        FullHttpRequest httpRequest = (FullHttpRequest) msg;\r\n\r\n        ByteBuf buf = httpRequest.content();\r\n        HttpMethod method = httpRequest.method();\r\n        if (!HttpMethod.POST.equals(method)) {\r\n            send(ctx, &quot;&quot;, HttpResponseStatus.METHOD_NOT_ALLOWED);\r\n            return;\r\n        }\r\n\r\n        String body = buf.toString(CharsetUtil.UTF_8);\r\n\r\n        JsonRpcServerHandler jsonRpcServerHandler = new JsonRpcServerHandler(applicationContext);\r\n        Object res = jsonRpcServerHandler.handle(body);\r\n        String output = JSON.toJSONString(res);\r\n\r\n        send(ctx, output, HttpResponseStatus.OK);\r\n        httpRequest.release();\r\n    }\r\n\r\n    private void send(ChannelHandlerContext ctx, String context, HttpResponseStatus status) {\r\n        FullHttpResponse response = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, status, Unpooled.copiedBuffer(context, CharsetUtil.UTF_8));\r\n        response.headers().set(HttpHeaderNames.CONTENT_TYPE, &quot;application/json; charset=utf-8&quot;);\r\n        response.headers().set(HttpHeaderNames.CONNECTION, &quot;keep-alive&quot;);\r\n        ctx.channel().writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);\r\n    }\r\n}\r\n```\r\nBut when I drop **.addListener(ChannelFutureListener.CLOSE)**, The client won&#39;t receive message. I want to keep the channel keepalive. What can I do.","title":"How to keep netty channel keep opening after request more than once","body":"<p>The next code is the netty http server handler, it can operation normally.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.sunquakes.jsonrpc4j.server;\n\nimport com.alibaba.fastjson.JSON;\nimport io.netty.buffer.ByteBuf;\nimport io.netty.buffer.Unpooled;\nimport io.netty.channel.ChannelFutureListener;\nimport io.netty.channel.ChannelHandlerContext;\nimport io.netty.channel.ChannelInboundHandlerAdapter;\nimport io.netty.handler.codec.http.*;\nimport io.netty.util.CharsetUtil;\nimport org.springframework.context.ApplicationContext;\n\npublic class JsonRpcNettyHttpServerHandler extends ChannelInboundHandlerAdapter {\n\n    private ApplicationContext applicationContext;\n\n    public JsonRpcNettyHttpServerHandler(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    @Override\n    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {\n\n        FullHttpRequest httpRequest = (FullHttpRequest) msg;\n\n        ByteBuf buf = httpRequest.content();\n        HttpMethod method = httpRequest.method();\n        if (!HttpMethod.POST.equals(method)) {\n            send(ctx, &quot;&quot;, HttpResponseStatus.METHOD_NOT_ALLOWED);\n            return;\n        }\n\n        String body = buf.toString(CharsetUtil.UTF_8);\n\n        JsonRpcServerHandler jsonRpcServerHandler = new JsonRpcServerHandler(applicationContext);\n        Object res = jsonRpcServerHandler.handle(body);\n        String output = JSON.toJSONString(res);\n\n        send(ctx, output, HttpResponseStatus.OK);\n        httpRequest.release();\n    }\n\n    private void send(ChannelHandlerContext ctx, String context, HttpResponseStatus status) {\n        FullHttpResponse response = new DefaultFullHttpResponse(HttpVersion.HTTP_1_1, status, Unpooled.copiedBuffer(context, CharsetUtil.UTF_8));\n        response.headers().set(HttpHeaderNames.CONTENT_TYPE, &quot;application/json; charset=utf-8&quot;);\n        response.headers().set(HttpHeaderNames.CONNECTION, &quot;keep-alive&quot;);\n        ctx.channel().writeAndFlush(response).addListener(ChannelFutureListener.CLOSE);\n    }\n}\n</code></pre>\n<p>But when I drop <strong>.addListener(ChannelFutureListener.CLOSE)</strong>, The client won't receive message. I want to keep the channel keepalive. What can I do.</p>\n"},{"tags":["java","sockets","tcp"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1481236627,"post_id":41048549,"comment_id":69307715,"body_markdown":"You can&#39;t use TCP as a messaging system, with or without the Nagle algorithm. It is a byte-stream protocol.","body":"You can&#39;t use TCP as a messaging system, with or without the Nagle algorithm. It is a byte-stream protocol."},{"owner":{"account_id":2103969,"reputation":121,"user_id":1870797,"accept_rate":62,"display_name":"user1870797"},"score":0,"creation_date":1481290859,"post_id":41048549,"comment_id":69330130,"body_markdown":"That&#39;s a good point. But I really want to know I I can send whatever data immediately and receive the same without let the os decide if it needs to buffer the output for me. I want it to work like the output and input function","body":"That&#39;s a good point. But I really want to know I I can send whatever data immediately and receive the same without let the os decide if it needs to buffer the output for me. I want it to work like the output and input function"}],"answers":[{"tags":[],"owner":{"account_id":9810688,"reputation":510,"user_id":7268990,"display_name":"Iulian Dogariu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1481243969,"creation_date":1481233642,"answer_id":41049396,"question_id":41048549,"body_markdown":"I can reproduce the behavior you&#39;re seeing. But, this may disappoint you, the Nagle algorithm has nothing to do with what happens here.\r\n\r\nWhen you run the client and the server, and you inspect the network traffic using `tcpdump`, you can see that each call to `write` generates one TCP packet with the string `hello`. This happens both when you do call `setTcpNoDelay(true)` and when you don&#39;t. In conclusion, the sender works pretty much as expected: you&#39;re writing to an unbuffered `OutputStream` and data gets immediately sent out.\r\n\r\n[![Traffic dump][2]][2]\r\n\r\nSo the reason why you&#39;re reading four packets at once is because the packets get buffered up *on the receiving end*. I don&#39;t think there&#39;s much you can do about that. If you need to distinguish between successive messages in a TCP stream, you need to look at various [serialization][1] algorithms.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/tagged/serialization\r\n  [2]: https://i.stack.imgur.com/DemqW.png","title":"socket.setTcpNoDelay(true) is not working","body":"<p>I can reproduce the behavior you're seeing. But, this may disappoint you, the Nagle algorithm has nothing to do with what happens here.</p>\n\n<p>When you run the client and the server, and you inspect the network traffic using <code>tcpdump</code>, you can see that each call to <code>write</code> generates one TCP packet with the string <code>hello</code>. This happens both when you do call <code>setTcpNoDelay(true)</code> and when you don't. In conclusion, the sender works pretty much as expected: you're writing to an unbuffered <code>OutputStream</code> and data gets immediately sent out.</p>\n\n<p><a href=\"https://i.stack.imgur.com/DemqW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DemqW.png\" alt=\"Traffic dump\"></a></p>\n\n<p>So the reason why you're reading four packets at once is because the packets get buffered up <em>on the receiving end</em>. I don't think there's much you can do about that. If you need to distinguish between successive messages in a TCP stream, you need to look at various <a href=\"https://stackoverflow.com/questions/tagged/serialization\">serialization</a> algorithms.</p>\n"},{"tags":[],"owner":{"account_id":7479017,"reputation":23,"user_id":5684400,"display_name":"Lord Moon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578251110,"creation_date":1578251110,"answer_id":59603250,"question_id":41048549,"body_markdown":"You should use buffered readers and writers, separate each message with a newLine and use a reader to read each line:\r\n\r\nFirst, setup your streams:\r\n\r\n    bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\r\n    bufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n    bufferedWriter.flush();\r\n\r\nThen write messages at the server by calling a function like this:\r\n\r\n    private void rawSend(final String rawText) throws IOException {\r\n        bufferedWriter.write(rawText);\r\n        bufferedWriter.newLine();\r\n        bufferedWriter.flush();\r\n    }\r\n\r\nThen on the client, read lines like this:\r\n\r\n    final String rawPacket = bufferedReader.readLine();\r\n\r\n\r\n","title":"socket.setTcpNoDelay(true) is not working","body":"<p>You should use buffered readers and writers, separate each message with a newLine and use a reader to read each line:</p>\n\n<p>First, setup your streams:</p>\n\n<pre><code>bufferedWriter = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\nbufferedReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));\nbufferedWriter.flush();\n</code></pre>\n\n<p>Then write messages at the server by calling a function like this:</p>\n\n<pre><code>private void rawSend(final String rawText) throws IOException {\n    bufferedWriter.write(rawText);\n    bufferedWriter.newLine();\n    bufferedWriter.flush();\n}\n</code></pre>\n\n<p>Then on the client, read lines like this:</p>\n\n<pre><code>final String rawPacket = bufferedReader.readLine();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2835544,"reputation":152,"user_id":2714781,"display_name":"Johannes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658673433,"creation_date":1658503181,"answer_id":73082623,"question_id":41048549,"body_markdown":"You COULD use sender side&#39;s socket.setTcpNoDelay(true) and available() on the receiving side:\r\n\r\n        public void run() {\r\n            while (true) {\r\n                int bytesAvail = 0;\r\n                InputStream is = null;\r\n                try {\r\n                    is = socket.getInputStream();\r\n                    while (bytesAvail == 0) {\r\n                        bytesAvail = is.available();\r\n                        if (bytesAvail == 0) Thread.sleep(40); // ugly - use async IO\r\n                    }\r\n                    bytesAvail = is.read(buffer, 0, bytesAvail);\r\n                } catch (IOException e1) {\r\n                    // TODO Auto-generated catch block\r\n                    e1.printStackTrace();\r\n                }\r\n                    String rcvStr = new String(buffer, 0, bytesAvail);\r\n                    System.out.println(rcvStr);\r\n            }\r\n        }\r\n\r\n... but Lord Moon&#39;s answer&#39;s design is more robust.\r\n","title":"socket.setTcpNoDelay(true) is not working","body":"<p>You COULD use sender side's socket.setTcpNoDelay(true) and available() on the receiving side:</p>\n<pre><code>    public void run() {\n        while (true) {\n            int bytesAvail = 0;\n            InputStream is = null;\n            try {\n                is = socket.getInputStream();\n                while (bytesAvail == 0) {\n                    bytesAvail = is.available();\n                    if (bytesAvail == 0) Thread.sleep(40); // ugly - use async IO\n                }\n                bytesAvail = is.read(buffer, 0, bytesAvail);\n            } catch (IOException e1) {\n                // TODO Auto-generated catch block\n                e1.printStackTrace();\n            }\n                String rcvStr = new String(buffer, 0, bytesAvail);\n                System.out.println(rcvStr);\n        }\n    }\n</code></pre>\n<p>... but Lord Moon's answer's design is more robust.</p>\n"}],"owner":{"account_id":2103969,"reputation":121,"user_id":1870797,"accept_rate":62,"display_name":"user1870797"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4690,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":41049396,"answer_count":3,"score":2,"last_activity_date":1658673433,"creation_date":1481230120,"question_id":41048549,"body_markdown":"I have a problem in sending data packet using tcp socket. What my program does is pretty simple: Firstly, a client socket connects to a server socket. Then the server socket sends 5 &quot;hello&quot; back to the client and the client outputs the 5 &quot;hello&quot; to the console. Both the client and server run on my local computer and below is the full code:\r\n\r\n**Server:**\r\n\r\n    public class Server {\r\n\r\n\tprivate static ServerSocket serverSocket;\r\n\r\n\tpublic static void main(String[] args) throws IOException, InterruptedException {\r\n\t\tserverSocket = new ServerSocket(60009);\r\n\t\tserverSocket.setReuseAddress(true);\r\n\t\tSystem.out.println(&quot;Server started!&quot;);\r\n\t\tfinal Socket socket = serverSocket.accept();\r\n\t\tsocket.setTcpNoDelay(true);\r\n\t\tThread.sleep(1000);\r\n\t\tsocket.getOutputStream().write(&quot;hello&quot;.getBytes());\r\n\t\tsocket.getOutputStream().write(&quot;hello&quot;.getBytes());\r\n\t\tsocket.getOutputStream().write(&quot;hello&quot;.getBytes());\r\n\t\tsocket.getOutputStream().write(&quot;hello&quot;.getBytes());\r\n\t\tsocket.getOutputStream().write(&quot;hello&quot;.getBytes());\r\n\t\tInputStream is = socket.getInputStream();\r\n\t\tis.read(new byte[100]);\r\n\t}\r\n}\r\n\r\n**Client:**\r\n\r\n    public class Client {\r\n\tstatic Socket socket;\r\n\tstatic byte[] buffer;\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n        socket = new Socket();\r\n\t\tsocket.setTcpNoDelay(true);\r\n\t\tsocket.connect(new InetSocketAddress(&quot;localhost&quot;, 60009));\r\n\t\tbuffer = new byte[100];\r\n\r\n\t\tnew Thread(new Runnable() {\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\twhile (true) {\r\n\t\t\t\t\tInputStream is = null;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tis = socket.getInputStream();\r\n\t\t\t\t\t\tis.read(buffer);\r\n\t\t\t\t\t} catch (IOException e1) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te1.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tString rcvStr = new String(buffer);\r\n\t\t\t\t\t\tSystem.out.println(rcvStr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).start();\r\n\t}\r\n}\r\n\r\nGiven the code posted above, my expected output should be like this:\r\n\r\nhello\r\n\r\nhello\r\n\r\nhello\r\n\r\nhello\r\n\r\nhello\r\n\r\nHowever, the actual result I get is this:\r\n\r\nhello\r\n\r\nhellohellohellohello\r\n\r\nMy problem is right here. The result output does not follow the order I send them on server. I ask the server to send 5 &quot;hello&quot; one by one. But according to the result, it seems like what the server really does is it sends one &quot;hello&quot; at first and then sends the rest of four &quot;hello&quot; all together.\r\n\r\nAfter searching the google, I found many people relate this problem to the so called Nagle algorithm which will avoid tcp socket sending short data packet immediately for increasing the efficiency of network use. To disable the Nagle algorithm, you only need to call setTcpNoDelay(true) on socket. Then the computer will send whatever you ask it to send right away. But unfortunately, after I disabled the Nagle algorithm, my client still outputs the same result as above. Can you guys tell me what am I missing or doing wrong? Any help is much appreciated!\r\n","title":"socket.setTcpNoDelay(true) is not working","body":"<p>I have a problem in sending data packet using tcp socket. What my program does is pretty simple: Firstly, a client socket connects to a server socket. Then the server socket sends 5 \"hello\" back to the client and the client outputs the 5 \"hello\" to the console. Both the client and server run on my local computer and below is the full code:</p>\n\n<p><strong>Server:</strong></p>\n\n<pre><code>public class Server {\n\nprivate static ServerSocket serverSocket;\n\npublic static void main(String[] args) throws IOException, InterruptedException {\n    serverSocket = new ServerSocket(60009);\n    serverSocket.setReuseAddress(true);\n    System.out.println(\"Server started!\");\n    final Socket socket = serverSocket.accept();\n    socket.setTcpNoDelay(true);\n    Thread.sleep(1000);\n    socket.getOutputStream().write(\"hello\".getBytes());\n    socket.getOutputStream().write(\"hello\".getBytes());\n    socket.getOutputStream().write(\"hello\".getBytes());\n    socket.getOutputStream().write(\"hello\".getBytes());\n    socket.getOutputStream().write(\"hello\".getBytes());\n    InputStream is = socket.getInputStream();\n    is.read(new byte[100]);\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Client:</strong></p>\n\n<pre><code>public class Client {\nstatic Socket socket;\nstatic byte[] buffer;\n\npublic static void main(String[] args) throws IOException {\n    socket = new Socket();\n    socket.setTcpNoDelay(true);\n    socket.connect(new InetSocketAddress(\"localhost\", 60009));\n    buffer = new byte[100];\n\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n            while (true) {\n                InputStream is = null;\n                try {\n                    is = socket.getInputStream();\n                    is.read(buffer);\n                } catch (IOException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n                }\n                    String rcvStr = new String(buffer);\n                    System.out.println(rcvStr);\n            }\n        }\n    }).start();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Given the code posted above, my expected output should be like this:</p>\n\n<p>hello</p>\n\n<p>hello</p>\n\n<p>hello</p>\n\n<p>hello</p>\n\n<p>hello</p>\n\n<p>However, the actual result I get is this:</p>\n\n<p>hello</p>\n\n<p>hellohellohellohello</p>\n\n<p>My problem is right here. The result output does not follow the order I send them on server. I ask the server to send 5 \"hello\" one by one. But according to the result, it seems like what the server really does is it sends one \"hello\" at first and then sends the rest of four \"hello\" all together.</p>\n\n<p>After searching the google, I found many people relate this problem to the so called Nagle algorithm which will avoid tcp socket sending short data packet immediately for increasing the efficiency of network use. To disable the Nagle algorithm, you only need to call setTcpNoDelay(true) on socket. Then the computer will send whatever you ask it to send right away. But unfortunately, after I disabled the Nagle algorithm, my client still outputs the same result as above. Can you guys tell me what am I missing or doing wrong? Any help is much appreciated!</p>\n"},{"tags":["java","itext7"],"answers":[{"tags":[],"owner":{"account_id":2703230,"reputation":12011,"user_id":2333458,"accept_rate":75,"display_name":"Alexey Subach"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658673042,"creation_date":1658673042,"answer_id":73099284,"question_id":73073476,"body_markdown":"First of all, you have a bug in your code:\r\n\r\n```\r\nfloat maxHeight =  document.getPdfDocument().getDefaultPageSize().getWidth();\r\n```\r\n\r\nshould be replaced with\r\n\r\n```\r\nfloat maxHeight =  document.getPdfDocument().getDefaultPageSize().getHeight();\r\n```\r\n\r\nWhen you do so, your console output will have 5 lines instead of 4 already. This is still not the 6 lines you have on your page.\r\nThe difference comes from the fact that paragraph placement logic on a document does additional calculations and shifts of the first paragraph. To make sure there is not a lot of empty space at the start of the page, the first paragraph will use roughly half of the leading instead of the full leading. If you want to get precise calculations you&#39;d better add elements to your `Div` and calculate the height of a `Div` with several `Paragraph` elements inside. To make the code more optimal you can use binary search on the number of elements that would fit on a single page.","title":"Paragraph height is incorrectly calculated itext 7","body":"<p>First of all, you have a bug in your code:</p>\n<pre><code>float maxHeight =  document.getPdfDocument().getDefaultPageSize().getWidth();\n</code></pre>\n<p>should be replaced with</p>\n<pre><code>float maxHeight =  document.getPdfDocument().getDefaultPageSize().getHeight();\n</code></pre>\n<p>When you do so, your console output will have 5 lines instead of 4 already. This is still not the 6 lines you have on your page.\nThe difference comes from the fact that paragraph placement logic on a document does additional calculations and shifts of the first paragraph. To make sure there is not a lot of empty space at the start of the page, the first paragraph will use roughly half of the leading instead of the full leading. If you want to get precise calculations you'd better add elements to your <code>Div</code> and calculate the height of a <code>Div</code> with several <code>Paragraph</code> elements inside. To make the code more optimal you can use binary search on the number of elements that would fit on a single page.</p>\n"}],"owner":{"account_id":25334822,"reputation":101,"user_id":19154125,"display_name":"mobiw"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73099284,"answer_count":1,"score":0,"last_activity_date":1658673042,"creation_date":1658444086,"question_id":73073476,"body_markdown":"  if i calculate height of each element and compare with page height then only 4 elements intervene\r\n\r\n\r\n \r\n\r\n     PdfDocument pdf = new PdfDocument(new PdfWriter(DEST));\r\n            Document document = new Document(pdf);\r\n            pdf.setDefaultPageSize(PageSize.A5);\r\n        document.setMargins(0, 25, 25, 25);\r\n        float maxHeight =  document.getPdfDocument().getDefaultPageSize().getWidth() ;/* (mainPdf_model.getLeftMargin() +mainPdf_model.getRightMargin());*/\r\n        float height = 0;\r\n        String line = &quot;Hello! Welcome to iTextPdf&quot;;\r\n        Div div = new Div();\r\n        for (int i = 0; i &lt; 30; i++) {\r\n            Paragraph element = new Paragraph();\r\n    \r\n            element.add(line + &quot; &quot; + i);\r\n            element.setMargin(0);\r\n            element.setPadding(0);\r\n            element.setFixedLeading(100);\r\n            div.add(element);\r\n            IRenderer rendererSubTree = element.createRendererSubTree();\r\n            LayoutResult result = rendererSubTree.setParent(document.getRenderer()).\r\n                    layout(new LayoutContext(new LayoutArea(1, new Rectangle(10000, 1000))));\r\n            height+=result.getOccupiedArea().getBBox().getHeight();\r\n    \r\n            if(height&lt;maxHeight) {\r\n                System.out.println(element);\r\n            }else {\r\n    \r\n            }\r\n    \r\n    \r\n        }\r\n      document.add(div);\r\n            document.close();\r\n\r\n\r\n System.out.println:\r\n&gt; com.itextpdf.layout.element.Paragraph@319b92f3\r\n\r\n&gt; com.itextpdf.layout.element.Paragraph@fcd6521\r\n\r\n&gt; com.itextpdf.layout.element.Paragraph@27d415d9\r\n\r\n&gt; com.itextpdf.layout.element.Paragraph@5c18298f\r\n\r\nIn pdf i have 6 elements:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5s8Kq.png","title":"Paragraph height is incorrectly calculated itext 7","body":"<p>if i calculate height of each element and compare with page height then only 4 elements intervene</p>\n<pre><code> PdfDocument pdf = new PdfDocument(new PdfWriter(DEST));\n        Document document = new Document(pdf);\n        pdf.setDefaultPageSize(PageSize.A5);\n    document.setMargins(0, 25, 25, 25);\n    float maxHeight =  document.getPdfDocument().getDefaultPageSize().getWidth() ;/* (mainPdf_model.getLeftMargin() +mainPdf_model.getRightMargin());*/\n    float height = 0;\n    String line = &quot;Hello! Welcome to iTextPdf&quot;;\n    Div div = new Div();\n    for (int i = 0; i &lt; 30; i++) {\n        Paragraph element = new Paragraph();\n\n        element.add(line + &quot; &quot; + i);\n        element.setMargin(0);\n        element.setPadding(0);\n        element.setFixedLeading(100);\n        div.add(element);\n        IRenderer rendererSubTree = element.createRendererSubTree();\n        LayoutResult result = rendererSubTree.setParent(document.getRenderer()).\n                layout(new LayoutContext(new LayoutArea(1, new Rectangle(10000, 1000))));\n        height+=result.getOccupiedArea().getBBox().getHeight();\n\n        if(height&lt;maxHeight) {\n            System.out.println(element);\n        }else {\n\n        }\n\n\n    }\n  document.add(div);\n        document.close();\n</code></pre>\n<p>System.out.println:</p>\n<blockquote>\n<p>com.itextpdf.layout.element.Paragraph@319b92f3</p>\n</blockquote>\n<blockquote>\n<p>com.itextpdf.layout.element.Paragraph@fcd6521</p>\n</blockquote>\n<blockquote>\n<p>com.itextpdf.layout.element.Paragraph@27d415d9</p>\n</blockquote>\n<blockquote>\n<p>com.itextpdf.layout.element.Paragraph@5c18298f</p>\n</blockquote>\n<p>In pdf i have 6 elements:</p>\n<p><a href=\"https://i.stack.imgur.com/5s8Kq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5s8Kq.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","kotlin","interop","kotlin-coroutines"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1658541853,"post_id":73079313,"comment_id":129084009,"body_markdown":"Are you open to sharing the task to Java as a Future? There are extension functions that can do that. It would be a lot simpler to use. By the way, calling a suspend function &quot;async&quot; is incorrect because suspend functions are called synchronously.","body":"Are you open to sharing the task to Java as a Future? There are extension functions that can do that. It would be a lot simpler to use. By the way, calling a suspend function &quot;async&quot; is incorrect because suspend functions are called synchronously."},{"owner":{"account_id":117557,"reputation":8219,"user_id":307797,"accept_rate":89,"display_name":"B.Gen.Jack.O.Neill"},"score":0,"creation_date":1658561902,"post_id":73079313,"comment_id":129086403,"body_markdown":"Could you please show me how it would look like on my example? Do I need to wrap every single method in the &quot;TestLibrary&quot; in order to do so? Regarding async, you are right, it&#39;s not async as in Kotlin async{}, and that is a bit misleading. But I also wouldn&#39;t say they are called synchronously, traditionally I saw this used as executed in a single Thread in the Java / Reactive context. Sequentially would be probably bit better.","body":"Could you please show me how it would look like on my example? Do I need to wrap every single method in the &quot;TestLibrary&quot; in order to do so? Regarding async, you are right, it&#39;s not async as in Kotlin async{}, and that is a bit misleading. But I also wouldn&#39;t say they are called synchronously, traditionally I saw this used as executed in a single Thread in the Java / Reactive context. Sequentially would be probably bit better."}],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658672464,"creation_date":1658672464,"answer_id":73099222,"question_id":73079313,"body_markdown":"If you&#39;re OK with converting the suspend functions into Futures for use in Java, then you could do it like this.\r\n\r\nYou would need a CoroutineScope for running the coroutines that back up the Futures, and you would need a wrapper function for each suspend function that you want to use in Java.\r\n\r\nYou need to use the `kotlinx-coroutines-jdk8` library for this.\r\n\r\nIn this example, I believe I have used Kotlin and Java conventional naming for the functions. &quot;Async&quot; is never used in the names of suspend functions, but is typically used in function/method names that do not synchronously return a result. &quot;Sync&quot; is never used in function or method names.\r\n\r\n```kotlin\r\nclass AsyncTestLibrary {\r\n    private val testScope = CoroutineScope(SupervisorJob()) + CoroutineName(&quot;TestScope&quot;)\r\n\r\n    fun doActionA(){}\r\n    suspend fun doActionB(): String { return &quot;Test&quot; }\r\n    suspend fun doActionC(input: String) { println(input) }\r\n\r\n    fun doActionBAsync() = testScope.future { doActionB() }\r\n    fun doActionCAsync(input: String) = testScope.future { doActionC(input) }\r\n}\r\n```\r\n\r\n```java\r\n@Test\r\npublic void test(){\r\n    testLibraryInstance.doActionA();\r\n    testLibraryInstance.doActionBAsync()\r\n        .thenCompose(value -&gt; testLibraryInstance.doActionBAsync(value));\r\n}\r\n```\r\n\r\nI haven&#39;t personally done unit tests involving futures, so you&#39;ll have to look up how to wait for and assert results.","title":"Calling Coroutine functions from Java","body":"<p>If you're OK with converting the suspend functions into Futures for use in Java, then you could do it like this.</p>\n<p>You would need a CoroutineScope for running the coroutines that back up the Futures, and you would need a wrapper function for each suspend function that you want to use in Java.</p>\n<p>You need to use the <code>kotlinx-coroutines-jdk8</code> library for this.</p>\n<p>In this example, I believe I have used Kotlin and Java conventional naming for the functions. &quot;Async&quot; is never used in the names of suspend functions, but is typically used in function/method names that do not synchronously return a result. &quot;Sync&quot; is never used in function or method names.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class AsyncTestLibrary {\n    private val testScope = CoroutineScope(SupervisorJob()) + CoroutineName(&quot;TestScope&quot;)\n\n    fun doActionA(){}\n    suspend fun doActionB(): String { return &quot;Test&quot; }\n    suspend fun doActionC(input: String) { println(input) }\n\n    fun doActionBAsync() = testScope.future { doActionB() }\n    fun doActionCAsync(input: String) = testScope.future { doActionC(input) }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void test(){\n    testLibraryInstance.doActionA();\n    testLibraryInstance.doActionBAsync()\n        .thenCompose(value -&gt; testLibraryInstance.doActionBAsync(value));\n}\n</code></pre>\n<p>I haven't personally done unit tests involving futures, so you'll have to look up how to wait for and assert results.</p>\n"}],"owner":{"account_id":117557,"reputation":8219,"user_id":307797,"accept_rate":89,"display_name":"B.Gen.Jack.O.Neill"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1305,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658672464,"creation_date":1658487844,"question_id":73079313,"body_markdown":"I have written a small library for async testing in Kotlin with JUnit, which is based on coroutines with runBlocking scope. I would like to have at least some kind of interop with Java. My coroutine knowledge is limited, but my idea was that if I let Kotlin create the scope and only bridge suspend function calls in Java class, passing the Continuation created by Kotlin method to method it might work. Currently I have something like this construct\r\n\r\n    class AsyncTestLibrary {\r\n        fun doSyncAction(){}\r\n        suspend fun doAsyncAction(){}\r\n    }\r\n    // JAVA compatibility wrapper\r\n    fun runTest(lib: AsyncTestLibrary, testBody: suspend (lib: AsyncTestLibrary) -&gt; Unit) =\r\n        runBlocking {\r\n            testBody(lib)\r\n        }\r\nAnd following usage in Java\r\n\r\n    @Test\r\n    public void test(){\r\n    \trunTest(testLibraryInstance, (lib, continuation) -&gt; {\r\n    \t\tlib.doSyncAction();\r\n    \t\tlib.doAsyncAction(continuation);\r\n    \r\n    \t\treturn Unit.INSTANCE;\r\n    \t});\r\n    }\r\nUnfortunately this approach does not seem to be working, getting some strange behavior and classCastExceptions like `kotlin.coroutines.jvm.internal.CompletedContinuation cannot be cast to class kotlinx.coroutines.internal.DispatchedContinuation`\r\n\r\nIs there something fundamental about coroutines that means this will never work in general, or is there some interop library / approach I am missing?","title":"Calling Coroutine functions from Java","body":"<p>I have written a small library for async testing in Kotlin with JUnit, which is based on coroutines with runBlocking scope. I would like to have at least some kind of interop with Java. My coroutine knowledge is limited, but my idea was that if I let Kotlin create the scope and only bridge suspend function calls in Java class, passing the Continuation created by Kotlin method to method it might work. Currently I have something like this construct</p>\n<pre><code>class AsyncTestLibrary {\n    fun doSyncAction(){}\n    suspend fun doAsyncAction(){}\n}\n// JAVA compatibility wrapper\nfun runTest(lib: AsyncTestLibrary, testBody: suspend (lib: AsyncTestLibrary) -&gt; Unit) =\n    runBlocking {\n        testBody(lib)\n    }\n</code></pre>\n<p>And following usage in Java</p>\n<pre><code>@Test\npublic void test(){\n    runTest(testLibraryInstance, (lib, continuation) -&gt; {\n        lib.doSyncAction();\n        lib.doAsyncAction(continuation);\n\n        return Unit.INSTANCE;\n    });\n}\n</code></pre>\n<p>Unfortunately this approach does not seem to be working, getting some strange behavior and classCastExceptions like <code>kotlin.coroutines.jvm.internal.CompletedContinuation cannot be cast to class kotlinx.coroutines.internal.DispatchedContinuation</code></p>\n<p>Is there something fundamental about coroutines that means this will never work in general, or is there some interop library / approach I am missing?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1493500918,"post_id":43700502,"comment_id":74446204,"body_markdown":"What happens if you try to run maven from command line? `mvn archetype:generate` ?","body":"What happens if you try to run maven from command line? <code>mvn archetype:generate</code> ?"},{"owner":{"account_id":5847132,"reputation":386,"user_id":4606939,"accept_rate":92,"display_name":"prnjn"},"score":0,"creation_date":1493501689,"post_id":43700502,"comment_id":74446385,"body_markdown":"@JorgeCampos it downloads lot of files and then ask for \n&quot;Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): 966:) : &quot;\nI don&#39;t know what to do at this stage.","body":"@JorgeCampos it downloads lot of files and then ask for  &quot;Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): 966:) : &quot; I don&#39;t know what to do at this stage."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":0,"creation_date":1493513621,"post_id":43700502,"comment_id":74448654,"body_markdown":"Then try to configure the external maven in eclipse and use it.","body":"Then try to configure the external maven in eclipse and use it."},{"owner":{"account_id":5847132,"reputation":386,"user_id":4606939,"accept_rate":92,"display_name":"prnjn"},"score":0,"creation_date":1493531809,"post_id":43700502,"comment_id":74451445,"body_markdown":"@JorgeCampos I configured external maven in eclipse, but still i am getting the same error at same point when trying to create new maven project","body":"@JorgeCampos I configured external maven in eclipse, but still i am getting the same error at same point when trying to create new maven project"},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":1,"creation_date":1493564337,"post_id":43700502,"comment_id":74459551,"body_markdown":"Then increase the eclipse permgen space. On eclipse ini add these parameters: `-XX:PermSize=512M -XX:MaxPermSize=6144M` and test it. Read it here to see if you didn&#39;t get something wrong when you first try it: https://wiki.eclipse.org/FAQ_How_do_I_increase_the_permgen_size_available_to_Eclipse%3F","body":"Then increase the eclipse permgen space. On eclipse ini add these parameters: <code>-XX:PermSize=512M -XX:MaxPermSize=6144M</code> and test it. Read it here to see if you didn&#39;t get something wrong when you first try it: <a href=\"https://wiki.eclipse.org/FAQ_How_do_I_increase_the_permgen_size_available_to_Eclipse%3F\" rel=\"nofollow noreferrer\">wiki.eclipse.org/&hellip;</a>"},{"owner":{"account_id":7078904,"reputation":345,"user_id":5417974,"display_name":"Luis Carlos"},"score":0,"creation_date":1602771516,"post_id":43700502,"comment_id":113830840,"body_markdown":"Seems like a bug, I temporally solve the issue disabling Nexus indexer.\n\nWindows-&gt;Preferences-&gt;Maven-&gt;Archetypes.\n\nHope this help.","body":"Seems like a bug, I temporally solve the issue disabling Nexus indexer.  Windows-&gt;Preferences-&gt;Maven-&gt;Archetypes.  Hope this help."}],"answers":[{"tags":[],"owner":{"account_id":5847132,"reputation":386,"user_id":4606939,"accept_rate":92,"display_name":"prnjn"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1583908918,"creation_date":1493649306,"answer_id":43720868,"question_id":43700502,"body_markdown":"As suggested by Jorge Campos in the comments above, I increased Eclipse&#39;s `PermGen` space. On `eclipse.ini` add these parameters and restart Eclipse: \r\n```\r\n-XX:PermSize=512M \r\n-XX:MaxPermSize=6144M \r\n```\r\nIts working now. ","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>As suggested by Jorge Campos in the comments above, I increased Eclipse's <code>PermGen</code> space. On <code>eclipse.ini</code> add these parameters and restart Eclipse: </p>\n\n<pre><code>-XX:PermSize=512M \n-XX:MaxPermSize=6144M \n</code></pre>\n\n<p>Its working now. </p>\n"},{"tags":[],"owner":{"account_id":1374097,"reputation":564,"user_id":1308453,"accept_rate":100,"display_name":"Philip Rego"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1518794036,"creation_date":1518794036,"answer_id":48829695,"question_id":43700502,"body_markdown":"Switching the Workspace fixed it for me. File | Switch Workspace","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>Switching the Workspace fixed it for me. File | Switch Workspace</p>\n"},{"tags":[],"owner":{"account_id":13195059,"reputation":126,"user_id":9530216,"display_name":"Gagan V"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1525338549,"creation_date":1525336037,"answer_id":50150354,"question_id":43700502,"body_markdown":"Just clear your data in eclipse.ini copy paste below code into it \r\nsince your default memory is lesser than required, it is not able to retrieve archetype\r\n\r\n \r\n-----------------------eclipse.ini---------------------------\r\n\r\n    -startup\r\n    ../Eclipse/plugins/org.eclipse.equinox.launcher_1.3.100.v20150511-1540.jar\r\n    --launcher.library\r\n    ../Eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.300.v20150602-1417\r\n    -product\r\n    org.eclipse.epp.package.jee.product\r\n    --launcher.defaultAction\r\n    openFile\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.XXMaxPermSize\r\n    256m\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.appendVmargs\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.7\r\n    -XstartOnFirstThread\r\n    -Dorg.eclipse.swt.internal.carbon.smallFonts\r\n    -XX:MaxPermSize=512m\r\n    -Xms512m\r\n    -Xmx6144m\r\n    -Xdock:icon=../Resources/Eclipse.icns\r\n    -XstartOnFirstThread\r\n    -Dorg.eclipse.swt.internal.carbon.smallFonts  \r\n\r\n-------------------------------------------------------------------------","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>Just clear your data in eclipse.ini copy paste below code into it \nsince your default memory is lesser than required, it is not able to retrieve archetype</p>\n\n<p>-----------------------eclipse.ini---------------------------</p>\n\n<pre><code>-startup\n../Eclipse/plugins/org.eclipse.equinox.launcher_1.3.100.v20150511-1540.jar\n--launcher.library\n../Eclipse/plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.300.v20150602-1417\n-product\norg.eclipse.epp.package.jee.product\n--launcher.defaultAction\nopenFile\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Dosgi.requiredJavaVersion=1.7\n-XstartOnFirstThread\n-Dorg.eclipse.swt.internal.carbon.smallFonts\n-XX:MaxPermSize=512m\n-Xms512m\n-Xmx6144m\n-Xdock:icon=../Resources/Eclipse.icns\n-XstartOnFirstThread\n-Dorg.eclipse.swt.internal.carbon.smallFonts  \n</code></pre>\n\n<hr>\n"},{"tags":[],"owner":{"account_id":8323743,"reputation":1749,"user_id":6254435,"display_name":"Dan Ortega"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1548107935,"creation_date":1548107935,"answer_id":54298329,"question_id":43700502,"body_markdown":"Your workspace somehow got corrupted. \r\n\r\nIf you switch your workspace and try to create a new maven project the issue will be gone.\r\n\r\nJust in case: You can switch your workspace from File &gt; Switchworkspace &gt; ...\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fFxkJ.png","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>Your workspace somehow got corrupted. </p>\n\n<p>If you switch your workspace and try to create a new maven project the issue will be gone.</p>\n\n<p>Just in case: You can switch your workspace from File > Switchworkspace > ...\n<a href=\"https://i.stack.imgur.com/fFxkJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fFxkJ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":14525871,"reputation":1,"user_id":10492191,"display_name":"Radouan El ouardi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587496972,"creation_date":1587496972,"answer_id":61351534,"question_id":43700502,"body_markdown":"the same thing did happen to me, what i did is just restarting my laptop and it did work","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>the same thing did happen to me, what i did is just restarting my laptop and it did work</p>\n"},{"tags":[],"owner":{"account_id":4441937,"reputation":136,"user_id":9141838,"display_name":"Yahia El-Tayeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658672233,"creation_date":1658672233,"answer_id":73099195,"question_id":43700502,"body_markdown":"In my case, the problem was from the internet network I was using. When connecting my laptop to my hotspot mobile data instead, everything works fine. ","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>In my case, the problem was from the internet network I was using. When connecting my laptop to my hotspot mobile data instead, everything works fine.</p>\n"}],"owner":{"account_id":5847132,"reputation":386,"user_id":4606939,"accept_rate":92,"display_name":"prnjn"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12451,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":43720868,"answer_count":6,"score":7,"last_activity_date":1658672233,"creation_date":1493500143,"question_id":43700502,"body_markdown":"I am starting to learn Spring, So i am creating to new Maven project in eclipse.\r\n\r\nWhen i am trying to create a new Maven project , then it tries to retrieve archetype and gives the error \r\n\r\n    &quot;An internal error occurred during: &quot;Retrieving archetypes:&quot;\r\n    Java heap space\r\n[![Error window when creating maven project][1]][1]\r\n\r\nSteps that i followed : \r\nNew -&gt; Maven Project -&gt; use default worksppace location (checked) and click Next -&gt; waiting for retrieving archetype and error occurs.\r\n\r\nI have attached the screen shot for reference.\r\n\r\nNote : I have been trying to resolve this for hours, searched google and stack exchange, changed -Xmx size to 1024m from 512m in elclipse.ini file and tried to restart the eclipse, but that time eclipse refused to launch.\r\nAlso \r\n&#39;Window -&gt; Preferences -&gt; Maven -&gt; Download repository updates index on startup&#39; is NOT enabled in my eclpise as suggested in other answer to similar question in stackoverflow to disable it.\r\n\r\nPlease help me out with this. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YiX5u.jpg","title":"An internal error occurred during: &quot;Retrieving archetypes:&quot;. Java heap space when creating new Maven project","body":"<p>I am starting to learn Spring, So i am creating to new Maven project in eclipse.</p>\n\n<p>When i am trying to create a new Maven project , then it tries to retrieve archetype and gives the error </p>\n\n<pre><code>\"An internal error occurred during: \"Retrieving archetypes:\"\nJava heap space\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/YiX5u.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YiX5u.jpg\" alt=\"Error window when creating maven project\"></a></p>\n\n<p>Steps that i followed : \nNew -> Maven Project -> use default worksppace location (checked) and click Next -> waiting for retrieving archetype and error occurs.</p>\n\n<p>I have attached the screen shot for reference.</p>\n\n<p>Note : I have been trying to resolve this for hours, searched google and stack exchange, changed -Xmx size to 1024m from 512m in elclipse.ini file and tried to restart the eclipse, but that time eclipse refused to launch.\nAlso \n'Window -> Preferences -> Maven -> Download repository updates index on startup' is NOT enabled in my eclpise as suggested in other answer to similar question in stackoverflow to disable it.</p>\n\n<p>Please help me out with this. </p>\n"},{"tags":["java","mysql","hibernate","jdbc"],"comments":[{"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"score":0,"creation_date":1491242385,"post_id":43191294,"comment_id":73455580,"body_markdown":"Paste whole stack trace... Where is output of `System.out.println(&quot;Problem creating session factory&quot;);` Paste relevant code rather than whole project.","body":"Paste whole stack trace... Where is output of <code>System.out.println(&quot;Problem creating session factory&quot;);</code> Paste relevant code rather than whole project."},{"owner":{"account_id":5395171,"reputation":3745,"user_id":4296607,"display_name":"JUAN CALVOPINA M"},"score":0,"creation_date":1491246121,"post_id":43191294,"comment_id":73457648,"body_markdown":"According to the stack trace, the error is in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near `type=MyISAM` at line 1","body":"According to the stack trace, the error is in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near <code>type=MyISAM</code> at line 1"},{"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"score":0,"creation_date":1491279958,"post_id":43191294,"comment_id":73468474,"body_markdown":"Your error is &quot;Table &#39;test.user&#39; doesn&#39;t exist&quot;","body":"Your error is &quot;Table &#39;test.user&#39; doesn&#39;t exist&quot;"},{"owner":{"account_id":4221315,"reputation":820,"user_id":3456041,"accept_rate":67,"display_name":"WhiteShadow"},"score":2,"creation_date":1491658201,"post_id":43191294,"comment_id":73656191,"body_markdown":"The table it doen&#39;t exist, it should be created by hibernate. What&#39;s the point of using hibernate if I need to create the tables in database.","body":"The table it doen&#39;t exist, it should be created by hibernate. What&#39;s the point of using hibernate if I need to create the tables in database."}],"answers":[{"tags":[],"owner":{"account_id":10642649,"reputation":11,"user_id":7837164,"display_name":"alaa mezain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1491665246,"creation_date":1491656835,"answer_id":43294486,"question_id":43191294,"body_markdown":"I guess you are using an old version of hibernate. You can download the latest version, 5.2, from [here][1].\r\n\r\n\r\n  [1]: http://hibernate.org/orm/","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>I guess you are using an old version of hibernate. You can download the latest version, 5.2, from <a href=\"http://hibernate.org/orm/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":10477178,"reputation":1026,"user_id":7723337,"display_name":"JavaLearner"},"down_vote_count":0,"up_vote_count":101,"is_accepted":true,"score":101,"last_activity_date":1491660296,"creation_date":1491660296,"answer_id":43295074,"question_id":43191294,"body_markdown":"in your CFG file please change the hibernate dialect\r\n\r\n    &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>in your CFG file please change the hibernate dialect</p>\n\n<pre><code>&lt;!-- SQL dialect --&gt;\n    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1120665,"reputation":1381,"user_id":1109043,"accept_rate":50,"display_name":"neaGaze"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1512069305,"creation_date":1512069305,"answer_id":47580992,"question_id":43191294,"body_markdown":"First thing you need to do here is correct the hibernate dialect version like @JavaLearner has explained. Then you have make sure that all the versions of hibernate dependencies you are using are upto date. Typically you would need: database driver like `mysql-connector-java`, hibernate dependency: `hibernate-core` and hibernate entity manager: `hibernate-entitymanager`. Lastly don&#39;t forget to check that the database tables you are using are not the reserved words like `order`, `group`, `limit`, etc. It might save you a lot of headache.","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>First thing you need to do here is correct the hibernate dialect version like @JavaLearner has explained. Then you have make sure that all the versions of hibernate dependencies you are using are upto date. Typically you would need: database driver like <code>mysql-connector-java</code>, hibernate dependency: <code>hibernate-core</code> and hibernate entity manager: <code>hibernate-entitymanager</code>. Lastly don't forget to check that the database tables you are using are not the reserved words like <code>order</code>, <code>group</code>, <code>limit</code>, etc. It might save you a lot of headache.</p>\n"},{"tags":[],"owner":{"account_id":5396455,"reputation":5608,"user_id":4297539,"accept_rate":69,"display_name":"Siberia"},"down_vote_count":0,"up_vote_count":105,"is_accepted":false,"score":105,"last_activity_date":1524471975,"creation_date":1522406878,"answer_id":49573003,"question_id":43191294,"body_markdown":"I have got this error when trying to create JPA entity with the name &quot;User&quot; (in Postgres) that is reserved.\r\nSo the way it is resolved is to change the table name by @Table annotation:\r\n\r\n    @Entity\r\n    @Table(name=&quot;users&quot;)\r\n    public class User {..}\r\n\r\nOr change the table name manually. ","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>I have got this error when trying to create JPA entity with the name \"User\" (in Postgres) that is reserved.\nSo the way it is resolved is to change the table name by @Table annotation:</p>\n\n<pre><code>@Entity\n@Table(name=\"users\")\npublic class User {..}\n</code></pre>\n\n<p>Or change the table name manually. </p>\n"},{"tags":[],"owner":{"account_id":10253750,"reputation":211,"user_id":7567136,"display_name":"Chaman Gurjar"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1528301821,"creation_date":1528301821,"answer_id":50725092,"question_id":43191294,"body_markdown":"I got this same error when i was trying to make a table with name &quot;admin&quot;.\r\nThen I used @Table annotation and gave table a different name like \r\n@Table(name = &quot;admins&quot;). I think some words are reserved (like :- keywords in java) and you can not use them.\r\n\r\n    @Entity\r\n    @Table(name = &quot;admins&quot;)\r\n    public class Admin extends TrackedEntity {\r\n    \r\n    }","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>I got this same error when i was trying to make a table with name \"admin\".\nThen I used @Table annotation and gave table a different name like \n@Table(name = \"admins\"). I think some words are reserved (like :- keywords in java) and you can not use them.</p>\n\n<pre><code>@Entity\n@Table(name = \"admins\")\npublic class Admin extends TrackedEntity {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15124905,"reputation":51,"user_id":10914566,"display_name":"Sai Vankina"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1559481063,"creation_date":1559474578,"answer_id":56414550,"question_id":43191294,"body_markdown":"Dialects are removed in recent SQL so use \r\n```\r\n  &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.MySQL57Dialect&quot;/&gt;\r\n```\r\n\r\n","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>Dialects are removed in recent SQL so use </p>\n\n<pre><code>  &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.MySQL57Dialect\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16459737,"reputation":11,"user_id":11891098,"display_name":"Mike Ballesteros"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591812321,"creation_date":1591812321,"answer_id":62310189,"question_id":43191294,"body_markdown":"you have to be careful because reseved words are not only for table names, also you have to check column names, my mistake was that one of my columns was named &quot;user&quot;. If you are using PostgreSQL the correct dialect is: org.hibernate.dialect.PostgreSQLDialect\r\n\r\ncheers.","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>you have to be careful because reseved words are not only for table names, also you have to check column names, my mistake was that one of my columns was named \"user\". If you are using PostgreSQL the correct dialect is: org.hibernate.dialect.PostgreSQLDialect</p>\n\n<p>cheers.</p>\n"},{"tags":[],"owner":{"account_id":16652541,"reputation":21,"user_id":12034969,"display_name":"Manish Jangid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1599966461,"creation_date":1599966461,"answer_id":63866783,"question_id":43191294,"body_markdown":"`spring.jpa.hibernate.ddl-auto = update`\r\n\r\nchange `update` to `create`, and run it \r\n\r\nafter run safely again change `create` to `update` so again all tables will not create and you can use your previous data","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p><code>spring.jpa.hibernate.ddl-auto = update</code></p>\n<p>change <code>update</code> to <code>create</code>, and run it</p>\n<p>after run safely again change <code>create</code> to <code>update</code> so again all tables will not create and you can use your previous data</p>\n"},{"tags":[],"owner":{"account_id":16352528,"reputation":11,"user_id":11810634,"display_name":"Codding fox"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601843458,"creation_date":1601841568,"answer_id":64199299,"question_id":43191294,"body_markdown":"Another sneaky issue related to this is naming your columns with `-` instead of `_`.\r\n\r\nSomething like this will trigger an error at the moment your tables are getting created.\r\n\r\n    @Column(name=&quot;verification-token&quot;)","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>Another sneaky issue related to this is naming your columns with <code>-</code> instead of <code>_</code>.</p>\n<p>Something like this will trigger an error at the moment your tables are getting created.</p>\n<pre><code>@Column(name=&quot;verification-token&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14263555,"reputation":456,"user_id":10303503,"display_name":"Rajib Garai"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1602501372,"creation_date":1602501372,"answer_id":64316793,"question_id":43191294,"body_markdown":"Adding this configuration in **application.properties** file to fixed this issue easily.\r\n\r\n    spring.jpa.properties.hibernate.globally_quoted_identifiers=true","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>Adding this configuration in <strong>application.properties</strong> file to fixed this issue easily.</p>\n<pre><code>spring.jpa.properties.hibernate.globally_quoted_identifiers=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16267044,"reputation":715,"user_id":11746772,"display_name":"LaCodeM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622626523,"creation_date":1622626523,"answer_id":67802562,"question_id":43191294,"body_markdown":"Might help someone:\r\nIn my case it was just as @Kirill Ch said but my table name was called &quot;Order&quot;. After I changed it to the &quot;Orders&quot; and changed my hibernate dialect to `spring.jpa.com.human.HibernateConn.hibernate.dialect=org.hibernate.dialect.HSQLDialect` everything worked as a charm. \r\nIf nothing above works for you I suggest to check the list of the all reserved keywords for your DB. Here is the one for MySQL:\r\nhttps://dev.mysql.com/doc/refman/8.0/en/keywords.html.","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>Might help someone:\nIn my case it was just as @Kirill Ch said but my table name was called &quot;Order&quot;. After I changed it to the &quot;Orders&quot; and changed my hibernate dialect to <code>spring.jpa.com.human.HibernateConn.hibernate.dialect=org.hibernate.dialect.HSQLDialect</code> everything worked as a charm.\nIf nothing above works for you I suggest to check the list of the all reserved keywords for your DB. Here is the one for MySQL:\n<a href=\"https://dev.mysql.com/doc/refman/8.0/en/keywords.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/keywords.html</a>.</p>\n"},{"tags":[],"owner":{"account_id":22443986,"reputation":2042,"user_id":16648127,"display_name":"Enfield Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654622654,"creation_date":1654474431,"answer_id":72511938,"question_id":43191294,"body_markdown":"If non of the answers here works for you, chances are, you are:\r\n\r\n1. modifying column constraint but `references the wrong type`, so make sure the type of foreign key is align with the type of the other table&#39;s primary key;\r\n\r\n2. `useing DB reserved keyword as column name`, just google your db&#39;s reserved keyword, and change the column name;\r\n\r\nYou may find the exact cause, if you scroll to the middle of your stack trace. In my case, it was a `reserved keyword`, and had to reload the editor to solve it.","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>If non of the answers here works for you, chances are, you are:</p>\n<ol>\n<li><p>modifying column constraint but <code>references the wrong type</code>, so make sure the type of foreign key is align with the type of the other table's primary key;</p>\n</li>\n<li><p><code>useing DB reserved keyword as column name</code>, just google your db's reserved keyword, and change the column name;</p>\n</li>\n</ol>\n<p>You may find the exact cause, if you scroll to the middle of your stack trace. In my case, it was a <code>reserved keyword</code>, and had to reload the editor to solve it.</p>\n"},{"tags":[],"owner":{"account_id":23561044,"reputation":359,"user_id":17602404,"display_name":"Salami  Korede"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658589769,"creation_date":1658588911,"answer_id":73091810,"question_id":43191294,"body_markdown":"Try knowing the version of MySQL you&#39;re using, so as to configure your dialect in the application.properties.\r\n\r\nif you&#39;re using MySQL5. Try this:\r\n\r\n    spring.jpa.properties.hibernate.dialect =org.hibernate.dialect.MySQL5Dialect\r\n\r\nif you&#39;re using MySQL8. Try this:\r\n\r\n    spring.jpa.properties.hibernate.dialect =org.hibernate.dialect.MySQL8Dialect\r\n\r\n","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>Try knowing the version of MySQL you're using, so as to configure your dialect in the application.properties.</p>\n<p>if you're using MySQL5. Try this:</p>\n<pre><code>spring.jpa.properties.hibernate.dialect =org.hibernate.dialect.MySQL5Dialect\n</code></pre>\n<p>if you're using MySQL8. Try this:</p>\n<pre><code>spring.jpa.properties.hibernate.dialect =org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19787800,"reputation":89,"user_id":14491411,"display_name":"shalitha anuradha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658671873,"creation_date":1658671873,"answer_id":73099137,"question_id":43191294,"body_markdown":"I Just deleted @Table for the Entity Post. Then It works.Only @Entity annotation is there.","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>I Just deleted @Table for the Entity Post. Then It works.Only @Entity annotation is there.</p>\n"}],"owner":{"account_id":4221315,"reputation":820,"user_id":3456041,"accept_rate":67,"display_name":"WhiteShadow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192643,"favorite_count":0,"down_vote_count":1,"up_vote_count":60,"accepted_answer_id":43295074,"answer_count":14,"score":59,"last_activity_date":1658671873,"creation_date":1491242246,"question_id":43191294,"body_markdown":"I really need help I searched in all the questions I found on stackoverflow and nothing works. I have never used hibernate before and I don&#39;t know what I am doing wrong.\r\n&lt;br&gt;Here is my repository: https://github.com/ionutincau/test_db\r\n&lt;br&gt;&lt;br&gt;I get this error:\r\n\r\n    &quot;C:\\Program Files\\Java\\jdk1.8.0_111\\bin\\java&quot; &quot;-javaagent:E:\\Applications\\IntelliJ\\IntelliJ IDEA Community Edition 2017.1\\lib\\idea_rt.jar=50372:E:\\Applications\\IntelliJ\\IntelliJ IDEA Community Edition 2017.1\\bin&quot; -Dfile.encoding=UTF-8 -classpath &quot;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\rt.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\out\\production\\test_db;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\mysql-connector-java-5.1.41-bin.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-core-5.2.9.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\antlr-2.7.7.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\classmate-1.3.0.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\dom4j-1.6.1.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-commons-annotations-5.0.1.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-jpa-2.1-api-1.0.0.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jandex-2.0.3.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\javassist-3.20.0-GA.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jboss-logging-3.3.0.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jboss-transaction-api_1.2_spec-1.0.1.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-jpamodelgen-5.2.9.Final.jar&quot; Main\r\n    Apr 03, 2017 9:05:50 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {5.2.9.Final}\r\n    Apr 03, 2017 9:05:50 PM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\r\n    WARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/test]\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001001: Connection properties: {user=root, password=****}\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\r\n    INFO: HHH10001003: Autocommit mode: false\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.PooledConnections &lt;init&gt;\r\n    INFO: HHH000115: Hibernate connection pool size: 1 (min=1)\r\n    Apr 03, 2017 9:05:51 PM org.hibernate.dialect.Dialect &lt;init&gt;\r\n    INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n    Hibernate: drop table if exists User\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\r\n    INFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@3a12c404] for (non-JTA) DDL execution was not in auto-commit mode; the Connection &#39;local transaction&#39; will be committed and the Connection will be set into auto-commit mode.\r\n    Hibernate: create table User (userId integer not null, userName varchar(255), primary key (userId)) type=MyISAM\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\r\n    INFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@59b38691] for (non-JTA) DDL execution was not in auto-commit mode; the Connection &#39;local transaction&#39; will be committed and the Connection will be set into auto-commit mode.\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\r\n    WARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\r\n    \tat org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:726)\r\n    \tat Main.main(Main.java:19)\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near &#39;type=MyISAM&#39; at line 1\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:408)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)\r\n    \tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2497)\r\n    \tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2455)\r\n    \tat com.mysql.jdbc.StatementImpl.executeInternal(StatementImpl.java:839)\r\n    \tat com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:739)\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n    \t... 13 more\r\n    \r\n    Apr 03, 2017 9:05:52 PM org.hibernate.tool.schema.internal.SchemaCreatorImpl applyImportSources\r\n    INFO: HHH000476: Executing import script &#39;org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@487db668&#39;\r\n    Hibernate: insert into User (userName, userId) values (?, ?)\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n    WARN: SQL Error: 1146, SQLState: 42S02\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\n    ERROR: Table &#39;test.user&#39; doesn&#39;t exist\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\r\n    INFO: HHH000010: On release of batch it still contained JDBC statements\r\n    Apr 03, 2017 9:05:52 PM org.hibernate.internal.ExceptionMapperStandardImpl mapManagedFlushFailure\r\n    ERROR: HHH000346: Error during managed flush [org.hibernate.exception.SQLGrammarException: could not execute statement]\r\n    Exception in thread &quot;main&quot; javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\r\n    \tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1434)\r\n    \tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)\r\n    \tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3190)\r\n    \tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2404)\r\n    \tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:467)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:146)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:220)\r\n    \tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)\r\n    \tat Main.main(Main.java:23)\r\n    Caused by: org.hibernate.exception.SQLGrammarException: could not execute statement\r\n    \tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:208)\r\n    \tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3003)\r\n    \tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3503)\r\n    \tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\r\n    \tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\r\n    \tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\r\n    \tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\r\n    \tat org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1428)\r\n    \t... 9 more\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table &#39;test.user&#39; doesn&#39;t exist\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:408)\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)\r\n    \tat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)\r\n    \tat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)\r\n    \tat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2501)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104)\r\n    \tat com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:205)\r\n    \t... 18 more","title":"Hibernate Error executing DDL via JDBC Statement","body":"<p>I really need help I searched in all the questions I found on stackoverflow and nothing works. I have never used hibernate before and I don't know what I am doing wrong.\n<br>Here is my repository: <a href=\"https://github.com/ionutincau/test_db\" rel=\"noreferrer\">https://github.com/ionutincau/test_db</a>\n<br><br>I get this error:</p>\n\n<pre><code>\"C:\\Program Files\\Java\\jdk1.8.0_111\\bin\\java\" \"-javaagent:E:\\Applications\\IntelliJ\\IntelliJ IDEA Community Edition 2017.1\\lib\\idea_rt.jar=50372:E:\\Applications\\IntelliJ\\IntelliJ IDEA Community Edition 2017.1\\bin\" -Dfile.encoding=UTF-8 -classpath \"C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\charsets.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\deploy.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\access-bridge-64.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\cldrdata.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\dnsns.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\jaccess.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\jfxrt.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\localedata.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\nashorn.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunec.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunjce_provider.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunmscapi.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\sunpkcs11.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\ext\\zipfs.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\javaws.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jce.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jfr.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jfxswt.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\jsse.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\management-agent.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\plugin.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\resources.jar;C:\\Program Files\\Java\\jdk1.8.0_111\\jre\\lib\\rt.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\out\\production\\test_db;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\mysql-connector-java-5.1.41-bin.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-core-5.2.9.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\antlr-2.7.7.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\classmate-1.3.0.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\dom4j-1.6.1.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-commons-annotations-5.0.1.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-jpa-2.1-api-1.0.0.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jandex-2.0.3.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\javassist-3.20.0-GA.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jboss-logging-3.3.0.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\jboss-transaction-api_1.2_spec-1.0.1.Final.jar;C:\\Users\\ionut\\IdeaProjects\\test_db\\lib\\hibernate-jpamodelgen-5.2.9.Final.jar\" Main\nApr 03, 2017 9:05:50 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {5.2.9.Final}\nApr 03, 2017 9:05:50 PM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nApr 03, 2017 9:05:51 PM org.hibernate.annotations.common.reflection.java.JavaReflectionManager &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {5.0.1.Final}\nApr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure\nWARN: HHH10001002: Using Hibernate built-in connection pool (not for production use!)\nApr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001005: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/test]\nApr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001001: Connection properties: {user=root, password=****}\nApr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl buildCreator\nINFO: HHH10001003: Autocommit mode: false\nApr 03, 2017 9:05:51 PM org.hibernate.engine.jdbc.connections.internal.PooledConnections &lt;init&gt;\nINFO: HHH000115: Hibernate connection pool size: 1 (min=1)\nApr 03, 2017 9:05:51 PM org.hibernate.dialect.Dialect &lt;init&gt;\nINFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\nHibernate: drop table if exists User\nApr 03, 2017 9:05:52 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@3a12c404] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.\nHibernate: create table User (userId integer not null, userName varchar(255), primary key (userId)) type=MyISAM\nApr 03, 2017 9:05:52 PM org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl getIsolatedConnection\nINFO: HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@59b38691] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.\nApr 03, 2017 9:05:52 PM org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\nWARN: GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:424)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:315)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:155)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:726)\n    at Main.main(Main.java:19)\nCaused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'type=MyISAM' at line 1\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n    at com.mysql.jdbc.Util.getInstance(Util.java:408)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2497)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2455)\n    at com.mysql.jdbc.StatementImpl.executeInternal(StatementImpl.java:839)\n    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:739)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 13 more\n\nApr 03, 2017 9:05:52 PM org.hibernate.tool.schema.internal.SchemaCreatorImpl applyImportSources\nINFO: HHH000476: Executing import script 'org.hibernate.tool.schema.internal.exec.ScriptSourceInputNonExistentImpl@487db668'\nHibernate: insert into User (userName, userId) values (?, ?)\nApr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nWARN: SQL Error: 1146, SQLState: 42S02\nApr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nERROR: Table 'test.user' doesn't exist\nApr 03, 2017 9:05:52 PM org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\nINFO: HHH000010: On release of batch it still contained JDBC statements\nApr 03, 2017 9:05:52 PM org.hibernate.internal.ExceptionMapperStandardImpl mapManagedFlushFailure\nERROR: HHH000346: Error during managed flush [org.hibernate.exception.SQLGrammarException: could not execute statement]\nException in thread \"main\" javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:147)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:155)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:162)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1434)\n    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:484)\n    at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:3190)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2404)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:467)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:146)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:220)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:68)\n    at Main.main(Main.java:23)\nCaused by: org.hibernate.exception.SQLGrammarException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:63)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:111)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:97)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:208)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:45)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3003)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3503)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:89)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:586)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:460)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:337)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:39)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1428)\n    ... 9 more\nCaused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'test.user' doesn't exist\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)\n    at com.mysql.jdbc.Util.getInstance(Util.java:408)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:943)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2501)\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)\n    at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079)\n    at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013)\n    at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104)\n    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:205)\n    ... 18 more\n</code></pre>\n"},{"tags":["java","double"],"comments":[{"owner":{"account_id":17477690,"reputation":350,"user_id":12672179,"display_name":"The Grand J"},"score":1,"creation_date":1610428271,"post_id":65678297,"comment_id":116122454,"body_markdown":"What warning? Please provide a full [mre]","body":"What warning? Please provide a full <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"answers":[{"tags":[],"owner":{"account_id":18968107,"reputation":323,"user_id":14759299,"display_name":"L0raxeo C"},"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1610432087,"creation_date":1610428136,"answer_id":65678303,"question_id":65678297,"body_markdown":"You have two options. Add .0 at the end as such:\r\n```\r\ndouble a = 1000000000.0 / FPS;\r\n```\r\nor adding d at the end.\r\n```\r\ndouble a = 1000000000d / FPS;\r\n```","title":"Solve Integer division in floating point context","body":"<p>You have two options. Add .0 at the end as such:</p>\n<pre><code>double a = 1000000000.0 / FPS;\n</code></pre>\n<p>or adding d at the end.</p>\n<pre><code>double a = 1000000000d / FPS;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3596675,"reputation":3616,"user_id":3001150,"accept_rate":57,"display_name":"Raildex"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1610439904,"creation_date":1610439904,"answer_id":65680278,"question_id":65678297,"body_markdown":"The warning occurs because you divide two integers `1000000000` and `FPS`, and the variable you want to assign the result to is `double`, a floating point type.\r\n\r\nWhat you want instead is having a **floating point division**.  \r\nFor this, one of the operands of the division has to be a floating point type.\r\n\r\nYou can do it in the following ways:\r\n\r\n    1000000000.0 / FPS; // make operand a floating point type (double)\r\n    1000000000.0f / FPS; //(float)\r\n    1000000000d / FPS; //(double)\r\n    (double)1000000000 / FPS; // cast operand to a floating point type (may be necessary if your operand is a variable)\r\nand of course you can make `FPS` just a floating point variable instead of a integer variable.","title":"Solve Integer division in floating point context","body":"<p>The warning occurs because you divide two integers <code>1000000000</code> and <code>FPS</code>, and the variable you want to assign the result to is <code>double</code>, a floating point type.</p>\n<p>What you want instead is having a <strong>floating point division</strong>.<br />\nFor this, one of the operands of the division has to be a floating point type.</p>\n<p>You can do it in the following ways:</p>\n<pre><code>1000000000.0 / FPS; // make operand a floating point type (double)\n1000000000.0f / FPS; //(float)\n1000000000d / FPS; //(double)\n(double)1000000000 / FPS; // cast operand to a floating point type (may be necessary if your operand is a variable)\n</code></pre>\n<p>and of course you can make <code>FPS</code> just a floating point variable instead of a integer variable.</p>\n"},{"tags":[],"owner":{"account_id":17532494,"reputation":88,"user_id":12716256,"display_name":"Allen"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1610440837,"creation_date":1610440837,"answer_id":65680481,"question_id":65678297,"body_markdown":"double a = 1000000000.00 / FPS; It is true.","title":"Solve Integer division in floating point context","body":"<p>double a = 1000000000.00 / FPS; It is true.</p>\n"},{"tags":[],"owner":{"account_id":9686627,"reputation":6334,"user_id":7200133,"display_name":"Gk Mohammad Emon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652214317,"creation_date":1652214317,"answer_id":72192559,"question_id":65678297,"body_markdown":"Suppose if you are using a variable like this - \r\n\r\n    int totalPresentStudentCount,count;\r\n    (totalPresentStudentCount/count) * 100.00\r\nThen simply add **1.0** with any of the doubles like that - \r\n\r\n    int totalPresentStudentCount,count;\r\n    (totalPresentStudentCount*1.0/count) * 100.00","title":"Solve Integer division in floating point context","body":"<p>Suppose if you are using a variable like this -</p>\n<pre><code>int totalPresentStudentCount,count;\n(totalPresentStudentCount/count) * 100.00\n</code></pre>\n<p>Then simply add <strong>1.0</strong> with any of the doubles like that -</p>\n<pre><code>int totalPresentStudentCount,count;\n(totalPresentStudentCount*1.0/count) * 100.00\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13606200,"reputation":637,"user_id":9815277,"display_name":"devio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658630477,"creation_date":1658630477,"answer_id":73095435,"question_id":65678297,"body_markdown":"to get rid of this warning use a helper variable\r\nyou have \r\n\r\n    double a = 1000000000 / FPS;\r\n\r\n\r\nit become \r\n\r\n    double b =1000000000;\r\n    double a = b / FPS;\r\n\r\n\r\n","title":"Solve Integer division in floating point context","body":"<p>to get rid of this warning use a helper variable\nyou have</p>\n<pre><code>double a = 1000000000 / FPS;\n</code></pre>\n<p>it become</p>\n<pre><code>double b =1000000000;\ndouble a = b / FPS;\n</code></pre>\n"}],"owner":{"account_id":20428849,"reputation":171,"user_id":14988153,"display_name":"Dumm Coding"},"comment_count":1,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31854,"favorite_count":0,"down_vote_count":1,"up_vote_count":17,"closed_date":1658671563,"accepted_answer_id":65678303,"answer_count":5,"score":16,"last_activity_date":1658671567,"creation_date":1610428043,"question_id":65678297,"body_markdown":"When doing:\r\n```\r\ndouble a = 1000000000 / FPS;\r\n```\r\nIt gives me the warning:\r\n\r\n_Integer division in floating point context._\r\n\r\nHow can I solve this?","title":"Solve Integer division in floating point context","body":"<p>When doing:</p>\n<pre><code>double a = 1000000000 / FPS;\n</code></pre>\n<p>It gives me the warning:</p>\n<p><em>Integer division in floating point context.</em></p>\n<p>How can I solve this?</p>\n"},{"tags":["java","file","sorting"],"answers":[{"tags":[],"owner":{"account_id":2998939,"reputation":2194,"user_id":2544810,"accept_rate":33,"display_name":"Senthil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635996843,"creation_date":1635996843,"answer_id":69834261,"question_id":69834145,"body_markdown":"Try this generics HashMap&lt;String, Integer&gt;\r\n\r\nWhereas String is a combination of FromPhone+||+ToPhoneNumber and Value is No. of Calls Made. \r\n\r\nFollow this for sorting by Value https://www.geeksforgeeks.org/sorting-a-hashmap-according-to-values/\r\n\r\n // Sort the list\r\n  \r\n\r\n      Collections.sort(list, new Comparator&lt;Map.Entry&lt;String, Integer&gt; &gt;() {\r\n            public int compare(Map.Entry&lt;String, Integer&gt; o1,\r\n                               Map.Entry&lt;String, Integer&gt; o2)\r\n            {\r\n                return (o2.getValue()).compareTo(o1.getValue());\r\n            }\r\n        });\r\n         ","title":"Sort a list of objects with 2 props are String phoneNum and String name by frequency","body":"<p>Try this generics HashMap&lt;String, Integer&gt;</p>\n<p>Whereas String is a combination of FromPhone+||+ToPhoneNumber and Value is No. of Calls Made.</p>\n<p>Follow this for sorting by Value <a href=\"https://www.geeksforgeeks.org/sorting-a-hashmap-according-to-values/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/sorting-a-hashmap-according-to-values/</a></p>\n<p>// Sort the list</p>\n<pre><code>  Collections.sort(list, new Comparator&lt;Map.Entry&lt;String, Integer&gt; &gt;() {\n        public int compare(Map.Entry&lt;String, Integer&gt; o1,\n                           Map.Entry&lt;String, Integer&gt; o2)\n        {\n            return (o2.getValue()).compareTo(o1.getValue());\n        }\n    });\n     \n</code></pre>\n"}],"owner":{"account_id":23195748,"reputation":31,"user_id":17291416,"display_name":"Ho&#224;ng Huy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658671301,"creation_date":1635995445,"question_id":69834145,"body_markdown":"I have 2 files like this:\r\n\r\nFiles Phones.\r\n\r\n| phoneNumber | name |\r\n| -------- | -------------- |\r\n0963829993|Pham Thu Thao\r\n0378225220|Nguyen Khanh Trinh\r\n0909876987|Nguyen Huy Thong\r\n0989562571|Bui Van Nghia\r\n0768888995|Ly Viet Hang\r\nHere is my code to read data from Phones.txt\r\n\r\n    Class Phone {\r\n        private String phoneNum, name;\r\n    }\r\n        Class PhoneList {\r\n        private ArrayList&lt;Phone&gt; phones;\r\n    }\r\n\r\n    public void ReadDataFromFile(String filename) {\r\n        try{\r\n            FileReader f = new FileReader(filename);\r\n            BufferedReader br = new BufferedReader(f);\r\n            String line = &quot;&quot;;\r\n            while (true)\r\n            {   \r\n                line = br.readLine();\r\n                if(line == null)\r\n                    break;\r\n                String txt[] = line.split(&quot;[\\n\\\\|]&quot;);\r\n                String phoneNumber = txt[0];\r\n                System.out.println(&quot;Phone Number: &quot; + phoneNumber);\r\n                String customer = txt[1];\r\n                System.out.println(&quot;Customner: &quot; + customer);\r\n                phones.add(new Phone(phoneNumber, customer));\r\n            }\r\n            f.close();\r\n            br.close();\r\n        }\r\n        catch(FileNotFoundException ex) {\r\n            System.out.println(ex.getMessage());\r\n        } catch (IOException ex) {\r\n            System.out.println(ex.getMessage());\r\n        }\r\n    }\r\n\r\nCalls.txt: \r\n| From| To| Duration |\r\n| -------- | -------------- | --------|\r\n0963829993|0378225220|8\r\n0378225220|0989562571|15\r\n0963829993|0989562571|67\r\n0989562571|0378225220|10\r\n0989562571|0768888995|16\r\n0768888995|0378225220|32\r\n0963829993|0768888995|2\r\n\r\nHere is my code to read data from Calls.txt:\r\n\r\n        Class Call {\r\n        private String from, to;\r\n        private int duration;\r\n    }\r\n        Class CallList {\r\n        private ArrayList&lt;Call&gt; calls;\r\n    }\r\n\r\n\r\n        public void ReadDataFromFile(String filename, PhoneList phoneList) {\r\n        try{\r\n            FileReader f = new FileReader(filename);\r\n            BufferedReader br = new BufferedReader(f);\r\n            String line = &quot;&quot;;\r\n            while(true) {\r\n                line = br.readLine();\r\n                Phone phoneFrom = new Phone();\r\n                Phone phoneTo = new Phone();\r\n                int newDuration = 0;\r\n                if(line == null)\r\n                    break;\r\n                String txt[] = line.split(&quot;[\\n\\\\|]&quot;);\r\n\r\n                phoneFrom.setPhoneNumber(txt[0]);\r\n                phoneTo.setPhoneNumber(txt[1]);\r\n                newDuration = Integer.parseInt(txt[2]);\r\n                System.out.println(&quot;From: &quot; + phoneFrom.getPhoneNumber());\r\n                System.out.println(&quot;To: &quot; + phoneTo.getPhoneNumber());\r\n                System.out.println(&quot;Duration: &quot; + newDuration);\r\n                calls.add(new Call(phoneFrom, phoneTo, newDuration));\r\n            }\r\n            f.close();\r\n            br.close();\r\n        }\r\n        catch(FileNotFoundException ex) {\r\n            System.out.println(ex.getMessage());\r\n        } catch (IOException ex) {\r\n            System.out.println(ex.getMessage());\r\n        }\r\n    }\r\n\r\nI want to sort `PhoneList` phones by frequency appearing in file Calls.txt. I try to use `HashMap&lt;Phone, Integer&gt;` with Integer is the frequency of `phoneNumber` in Calls.txt, but it&#39;s not the same with my test requirement. The test output just have a list of `phoneNumber`.\r\nI got stuck and need help, please help m. Thanks !\r\n","title":"Sort a list of objects with 2 props are String phoneNum and String name by frequency","body":"<p>I have 2 files like this:</p>\n<p>Files Phones.</p>\n<p>| phoneNumber | name |\n| -------- | -------------- |\n0963829993|Pham Thu Thao\n0378225220|Nguyen Khanh Trinh\n0909876987|Nguyen Huy Thong\n0989562571|Bui Van Nghia\n0768888995|Ly Viet Hang\nHere is my code to read data from Phones.txt</p>\n<pre><code>Class Phone {\n    private String phoneNum, name;\n}\n    Class PhoneList {\n    private ArrayList&lt;Phone&gt; phones;\n}\n\npublic void ReadDataFromFile(String filename) {\n    try{\n        FileReader f = new FileReader(filename);\n        BufferedReader br = new BufferedReader(f);\n        String line = &quot;&quot;;\n        while (true)\n        {   \n            line = br.readLine();\n            if(line == null)\n                break;\n            String txt[] = line.split(&quot;[\\n\\\\|]&quot;);\n            String phoneNumber = txt[0];\n            System.out.println(&quot;Phone Number: &quot; + phoneNumber);\n            String customer = txt[1];\n            System.out.println(&quot;Customner: &quot; + customer);\n            phones.add(new Phone(phoneNumber, customer));\n        }\n        f.close();\n        br.close();\n    }\n    catch(FileNotFoundException ex) {\n        System.out.println(ex.getMessage());\n    } catch (IOException ex) {\n        System.out.println(ex.getMessage());\n    }\n}\n</code></pre>\n<p>Calls.txt:\n| From| To| Duration |\n| -------- | -------------- | --------|\n0963829993|0378225220|8\n0378225220|0989562571|15\n0963829993|0989562571|67\n0989562571|0378225220|10\n0989562571|0768888995|16\n0768888995|0378225220|32\n0963829993|0768888995|2</p>\n<p>Here is my code to read data from Calls.txt:</p>\n<pre><code>    Class Call {\n    private String from, to;\n    private int duration;\n}\n    Class CallList {\n    private ArrayList&lt;Call&gt; calls;\n}\n\n\n    public void ReadDataFromFile(String filename, PhoneList phoneList) {\n    try{\n        FileReader f = new FileReader(filename);\n        BufferedReader br = new BufferedReader(f);\n        String line = &quot;&quot;;\n        while(true) {\n            line = br.readLine();\n            Phone phoneFrom = new Phone();\n            Phone phoneTo = new Phone();\n            int newDuration = 0;\n            if(line == null)\n                break;\n            String txt[] = line.split(&quot;[\\n\\\\|]&quot;);\n\n            phoneFrom.setPhoneNumber(txt[0]);\n            phoneTo.setPhoneNumber(txt[1]);\n            newDuration = Integer.parseInt(txt[2]);\n            System.out.println(&quot;From: &quot; + phoneFrom.getPhoneNumber());\n            System.out.println(&quot;To: &quot; + phoneTo.getPhoneNumber());\n            System.out.println(&quot;Duration: &quot; + newDuration);\n            calls.add(new Call(phoneFrom, phoneTo, newDuration));\n        }\n        f.close();\n        br.close();\n    }\n    catch(FileNotFoundException ex) {\n        System.out.println(ex.getMessage());\n    } catch (IOException ex) {\n        System.out.println(ex.getMessage());\n    }\n}\n</code></pre>\n<p>I want to sort <code>PhoneList</code> phones by frequency appearing in file Calls.txt. I try to use <code>HashMap&lt;Phone, Integer&gt;</code> with Integer is the frequency of <code>phoneNumber</code> in Calls.txt, but it's not the same with my test requirement. The test output just have a list of <code>phoneNumber</code>.\nI got stuck and need help, please help m. Thanks !</p>\n"},{"tags":["java","spring","intellij-idea","spring-security"],"comments":[{"owner":{"account_id":2779202,"reputation":3606,"user_id":2392087,"display_name":"yxre"},"score":0,"creation_date":1514665247,"post_id":48037446,"comment_id":83045304,"body_markdown":"Are you building using Maven or Intellij?","body":"Are you building using Maven or Intellij?"},{"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"score":0,"creation_date":1514665301,"post_id":48037446,"comment_id":83045319,"body_markdown":"I&#39;m building using maven","body":"I&#39;m building using maven"},{"owner":{"account_id":2779202,"reputation":3606,"user_id":2392087,"display_name":"yxre"},"score":0,"creation_date":1514665337,"post_id":48037446,"comment_id":83045332,"body_markdown":"Does the error happen if you use maven on the command line?","body":"Does the error happen if you use maven on the command line?"},{"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"score":0,"creation_date":1514665528,"post_id":48037446,"comment_id":83045376,"body_markdown":"I don&#39;t know how to use maven command line in this project. It happens after deploying it using tomcat.","body":"I don&#39;t know how to use maven command line in this project. It happens after deploying it using tomcat."},{"owner":{"account_id":2273465,"reputation":15439,"user_id":2000323,"display_name":"Andrey"},"score":0,"creation_date":1514988016,"post_id":48037446,"comment_id":83131601,"body_markdown":"Double check that needed classes are on application classpath when you run it in container (if container does not provide the library, make sure it is included in the artifact (in artifact `WEB-INF/lib` folder) which you deploy.","body":"Double check that needed classes are on application classpath when you run it in container (if container does not provide the library, make sure it is included in the artifact (in artifact <code>WEB-INF&#47;lib</code> folder) which you deploy."}],"answers":[{"tags":[],"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1523784248,"creation_date":1523784248,"answer_id":49840397,"question_id":48037446,"body_markdown":"[![How to add artifact][1]][1]\r\n\r\nGo to Project Structure -&gt; Artifacts -&gt; Click green &#39;+&#39; button -&gt; and all Spring Security libaries\r\n\r\n  [1]: https://i.stack.imgur.com/pUaQz.png\r\n\r\n","title":"WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist","body":"<p><a href=\"https://i.stack.imgur.com/pUaQz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pUaQz.png\" alt=\"How to add artifact\"></a></p>\n\n<p>Go to Project Structure -> Artifacts -> Click green '+' button -> and all Spring Security libaries</p>\n"},{"tags":[],"owner":{"account_id":1510698,"reputation":288,"user_id":1412913,"display_name":"Isaac Riley"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1539789073,"creation_date":1539653464,"answer_id":52826747,"question_id":48037446,"body_markdown":"Currently, as of October 2018, if you are using Java 10, you&#39;ll encounter issues with the latest spring-security-config Maven dependency. The workaround is to download the  **spring-security-config-5.0.6.RELEASE.jar** [from here](https://mvnrepository.com/artifact/org.springframework.security/spring-security-config/5.0.6.RELEASE). Add the jar to your Classpath and that should resolve the issue.","title":"WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist","body":"<p>Currently, as of October 2018, if you are using Java 10, you'll encounter issues with the latest spring-security-config Maven dependency. The workaround is to download the  <strong>spring-security-config-5.0.6.RELEASE.jar</strong> <a href=\"https://mvnrepository.com/artifact/org.springframework.security/spring-security-config/5.0.6.RELEASE\" rel=\"nofollow noreferrer\">from here</a>. Add the jar to your Classpath and that should resolve the issue.</p>\n"},{"tags":[],"owner":{"account_id":22836251,"reputation":1,"user_id":16983980,"display_name":"Chatrati Venkata Phani Kishore"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1658670912,"creation_date":1658670861,"answer_id":73099015,"question_id":48037446,"body_markdown":"Actually in my case springdoc-openapi-ui dependency caused this error. After removing it, my application is working fine. If you have it in pom.xml try new versions or remove it.","title":"WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist","body":"<p>Actually in my case springdoc-openapi-ui dependency caused this error. After removing it, my application is working fine. If you have it in pom.xml try new versions or remove it.</p>\n"}],"owner":{"account_id":6809522,"reputation":337,"user_id":5240235,"accept_rate":100,"display_name":"Raspberry"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14104,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":49840397,"answer_count":3,"score":4,"last_activity_date":1658670912,"creation_date":1514664369,"question_id":48037446,"body_markdown":"after building spring app, I have this problem:\r\n\r\n\r\n      .../WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:181)\r\n\r\nMy pom.xml\r\n\r\n    &lt;properties&gt;\r\n        &lt;spring.version&gt;4.3.0.RELEASE&lt;/spring.version&gt;\r\n        &lt;springsecurity.version&gt;4.2.3.RELEASE&lt;/springsecurity.version&gt;\r\n        &lt;!--&lt;springsecurity.version&gt;5.0.0.RELEASE&lt;/springsecurity.version&gt;--&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\n    &lt;dependencies&gt;\r\n\r\n\r\n        &lt;!--spring security web and config--&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${springsecurity.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n            &lt;version&gt;${springsecurity.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${springsecurity.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\nSecurityConfig class:\r\n\r\n        @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.inMemoryAuthentication().withUser(&quot;john&quot;).password(&quot;secret123&quot;).roles(&quot;EMPLOYEE&quot;);\r\n            auth.inMemoryAuthentication().withUser(&quot;mary&quot;).password(&quot;secret123&quot;).roles(&quot;MANAGER&quot;);\r\n            auth.inMemoryAuthentication().withUser(&quot;susan&quot;).password(&quot;secret123&quot;).roles(&quot;ADMIN&quot;);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\nInizializer:\r\n\r\n    public class SecurityWebApplicationInitializer extends AbstractSecurityWebApplicationInitializer {\r\n}\r\n\r\nIt seems that it can&#39;t find jar file after build. I tried adding it to artifacts in Project Structure in IntelliJ Idea, but it didn&#39;t help.","title":"WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist","body":"<p>after building spring app, I have this problem:</p>\n\n<pre><code>  .../WebSecurityConfigurerAdapter.class] cannot be opened because it does not exist at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:181)\n</code></pre>\n\n<p>My pom.xml</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;spring.version&gt;4.3.0.RELEASE&lt;/spring.version&gt;\n    &lt;springsecurity.version&gt;4.2.3.RELEASE&lt;/springsecurity.version&gt;\n    &lt;!--&lt;springsecurity.version&gt;5.0.0.RELEASE&lt;/springsecurity.version&gt;--&gt;\n&lt;/properties&gt;\n\n\n&lt;dependencies&gt;\n\n\n    &lt;!--spring security web and config--&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;version&gt;${springsecurity.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;version&gt;${springsecurity.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n        &lt;version&gt;${springsecurity.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>SecurityConfig class:</p>\n\n<pre><code>    @Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication().withUser(\"john\").password(\"secret123\").roles(\"EMPLOYEE\");\n        auth.inMemoryAuthentication().withUser(\"mary\").password(\"secret123\").roles(\"MANAGER\");\n        auth.inMemoryAuthentication().withUser(\"susan\").password(\"secret123\").roles(\"ADMIN\");\n\n    }\n\n}\n</code></pre>\n\n<p>Inizializer:</p>\n\n<pre><code>public class SecurityWebApplicationInitializer extends AbstractSecurityWebApplicationInitializer {\n</code></pre>\n\n<p>}</p>\n\n<p>It seems that it can't find jar file after build. I tried adding it to artifacts in Project Structure in IntelliJ Idea, but it didn't help.</p>\n"},{"tags":["java","file","synchronization","filesystems","nio"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1537803105,"post_id":52481281,"comment_id":91906796,"body_markdown":"The OS should sync on a reboot. Calling sync explicitly is unlikely to make it more synced.","body":"The OS should sync on a reboot. Calling sync explicitly is unlikely to make it more synced."}],"answers":[{"tags":[],"owner":{"account_id":12210830,"reputation":335,"user_id":8912667,"display_name":"Fabien MIFSUD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537799728,"creation_date":1537799728,"answer_id":52481703,"question_id":52481281,"body_markdown":"I&#39;ll say the copy operation is depending on your OS JRE code, so if you want to be sure of the file Copy at OS level, continue to explicitly call the sync() method.","title":"Does java.nio.file.Files.copy call sync() on the file system?","body":"<p>I'll say the copy operation is depending on your OS JRE code, so if you want to be sure of the file Copy at OS level, continue to explicitly call the sync() method.</p>\n"},{"tags":[],"owner":{"account_id":249090,"reputation":4307,"user_id":524900,"display_name":"Lolo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1537852124,"creation_date":1537852124,"answer_id":52490956,"question_id":52481281,"body_markdown":"If you look at the source code for `Files.copy(...)`, you will see that it doesn&#39;t perform a `sync()`. In the end, it will perform a copy of an input stream into an output stream corresponding to the first 2 arguments passed to `Files.copy(...)`.\r\n\r\nFurthermore, the `FileDescriptor` is tied to the stream from which it is obtained. If you don&#39;t perform any I/O operation with this stream, other than creating a file with `new FileOutputStream(...)`, there will be nothing to `sync()` with the fie system, as is the case with the code you shared.\r\n\r\nThus, the only way I see to accomplish your goal is to &quot;revert&quot; to the old-fashioned `java.io` API and implement a stream-to-stream copy yourself. This will allow you to `sync()` on the file descriptor obtained from the same `FileOutputStream` that is used for the `copy` operation.","title":"Does java.nio.file.Files.copy call sync() on the file system?","body":"<p>If you look at the source code for <code>Files.copy(...)</code>, you will see that it doesn't perform a <code>sync()</code>. In the end, it will perform a copy of an input stream into an output stream corresponding to the first 2 arguments passed to <code>Files.copy(...)</code>.</p>\n\n<p>Furthermore, the <code>FileDescriptor</code> is tied to the stream from which it is obtained. If you don't perform any I/O operation with this stream, other than creating a file with <code>new FileOutputStream(...)</code>, there will be nothing to <code>sync()</code> with the fie system, as is the case with the code you shared.</p>\n\n<p>Thus, the only way I see to accomplish your goal is to \"revert\" to the old-fashioned <code>java.io</code> API and implement a stream-to-stream copy yourself. This will allow you to <code>sync()</code> on the file descriptor obtained from the same <code>FileOutputStream</code> that is used for the <code>copy</code> operation.</p>\n"},{"tags":[],"owner":{"account_id":181087,"reputation":131,"user_id":2491204,"display_name":"Infernoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658670889,"creation_date":1657734797,"answer_id":72970625,"question_id":52481281,"body_markdown":"This was because `SYNC` and `DSYNC` were annoyingly omitted from `StandardCopyOption` enum, yet were provided in `StandardOpenOption` enum for file targets, so you need to use `FileChannel` and `SeekableByteChannel` if supported by `FileSystemProvider`, like :\r\n```\r\nSet&lt;? extends OpenOption&gt; TARGET_OPEN_OPTIONS = EnumSet.of(StandardOpenOption.CREATE_NEW, StandardOpenOption.WRITE);\r\nFileChannel.out = target.getFileSystem().provider().newFileChannel(target, TARGET_OPEN_OPTIONS);\r\nSeekableByteChannel = Files.newByteChannel(source, StandardOpenOption.READ);\r\nout.transferFrom(source, 0, source.size());\r\nout.force(boolean metadata); // false == DSYNC, true == SYNC\r\n```\r\n\r\nUsing java.io.FileOutputStream.getFD().sync() is an obsolete &quot;solution&quot;, because you lose all support for NIO2 `FileSystems`, like the often bundled `ZipFileSystem`, and it can still fail if not supported by the native class implementations or OS!\r\n\r\nUsing DSYNC or SYNC when opening an OutputStream via a FileSystemProvider is another option, but may cause premature flushing of a FileSystem cache.","title":"Does java.nio.file.Files.copy call sync() on the file system?","body":"<p>This was because <code>SYNC</code> and <code>DSYNC</code> were annoyingly omitted from <code>StandardCopyOption</code> enum, yet were provided in <code>StandardOpenOption</code> enum for file targets, so you need to use <code>FileChannel</code> and <code>SeekableByteChannel</code> if supported by <code>FileSystemProvider</code>, like :</p>\n<pre><code>Set&lt;? extends OpenOption&gt; TARGET_OPEN_OPTIONS = EnumSet.of(StandardOpenOption.CREATE_NEW, StandardOpenOption.WRITE);\nFileChannel.out = target.getFileSystem().provider().newFileChannel(target, TARGET_OPEN_OPTIONS);\nSeekableByteChannel = Files.newByteChannel(source, StandardOpenOption.READ);\nout.transferFrom(source, 0, source.size());\nout.force(boolean metadata); // false == DSYNC, true == SYNC\n</code></pre>\n<p>Using java.io.FileOutputStream.getFD().sync() is an obsolete &quot;solution&quot;, because you lose all support for NIO2 <code>FileSystems</code>, like the often bundled <code>ZipFileSystem</code>, and it can still fail if not supported by the native class implementations or OS!</p>\n<p>Using DSYNC or SYNC when opening an OutputStream via a FileSystemProvider is another option, but may cause premature flushing of a FileSystem cache.</p>\n"}],"owner":{"account_id":8070042,"reputation":343,"user_id":6083103,"display_name":"Francesco Rogo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1672,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52490956,"answer_count":3,"score":1,"last_activity_date":1658670889,"creation_date":1537798366,"question_id":52481281,"body_markdown":"i&#39;m developing an application that has to reboot the system after a file has been uploaded and verified. The file system is on an sd card, so it must be synced to be sure the uploaded file has actually been saved on the device.\r\n\r\nI was wondering if java.io.file.Files.copy does the sync or not.\r\n\r\nMy code runs like this:\r\n\r\n    public int save(MultipartFile multipart) throws IOException {\r\n\r\n        Files.copy(multipart.getInputStream(), file, standardCopyOption.REPLACE_EXISTING);\r\n\r\n        if (validate(file)) {\r\n            sync(file); &lt;-- is it useless?\r\n            reboot();\r\n            return 0;\r\n        } else {\r\n            Files.delete(file);\r\n            return -1;\r\n        }\r\n    }\r\n\r\nI tried to find a way to call sync on the fs in the nio package, but the only solution that i&#39;ve found is:\r\n\r\n    public void sync(Path file) {\r\n        final FileOutputStream fos = new FileOutputStream(file.toFile());\r\n        final FileDescriptor fd = fos.getFD();\r\n        fd.sync();\r\n    }\r\n\r\nwhich relies on old java.io.File .\r\n\r\n","title":"Does java.nio.file.Files.copy call sync() on the file system?","body":"<p>i'm developing an application that has to reboot the system after a file has been uploaded and verified. The file system is on an sd card, so it must be synced to be sure the uploaded file has actually been saved on the device.</p>\n\n<p>I was wondering if java.io.file.Files.copy does the sync or not.</p>\n\n<p>My code runs like this:</p>\n\n<pre><code>public int save(MultipartFile multipart) throws IOException {\n\n    Files.copy(multipart.getInputStream(), file, standardCopyOption.REPLACE_EXISTING);\n\n    if (validate(file)) {\n        sync(file); &lt;-- is it useless?\n        reboot();\n        return 0;\n    } else {\n        Files.delete(file);\n        return -1;\n    }\n}\n</code></pre>\n\n<p>I tried to find a way to call sync on the fs in the nio package, but the only solution that i've found is:</p>\n\n<pre><code>public void sync(Path file) {\n    final FileOutputStream fos = new FileOutputStream(file.toFile());\n    final FileDescriptor fd = fos.getFD();\n    fd.sync();\n}\n</code></pre>\n\n<p>which relies on old java.io.File .</p>\n"},{"tags":["java","dss"],"answers":[{"tags":[],"owner":{"account_id":25819156,"reputation":98,"user_id":19558604,"display_name":"bsanchezb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658670849,"creation_date":1657918156,"answer_id":72999467,"question_id":68379313,"body_markdown":"You may try to sign using PKCS11 option, by providing the file to driver related to the smartcard/USB token you use.\r\n\r\nAlso you may try to sign using the [online version](https://ec.europa.eu/digital-building-blocks/DSS/webapp-demo/home) and [Nexu](https://github.com/nowina-solutions/nexu) application. I work for the company that develops Nexu.\r\n","title":"Signing with DSS Desktop App (Digital Signature Service)","body":"<p>You may try to sign using PKCS11 option, by providing the file to driver related to the smartcard/USB token you use.</p>\n<p>Also you may try to sign using the <a href=\"https://ec.europa.eu/digital-building-blocks/DSS/webapp-demo/home\" rel=\"nofollow noreferrer\">online version</a> and <a href=\"https://github.com/nowina-solutions/nexu\" rel=\"nofollow noreferrer\">Nexu</a> application. I work for the company that develops Nexu.</p>\n"}],"owner":{"account_id":8976929,"reputation":109,"user_id":6693412,"display_name":"Mehdi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658670849,"creation_date":1626270475,"question_id":68379313,"body_markdown":"I am trying to sign a PDF document with DSS Desktop Standlone App, and my problem is that I cannot use this application in MacOS environnement due to MSCAPI.\r\n\r\nThere is a solution for MacOs ? \r\n\r\n\r\n","title":"Signing with DSS Desktop App (Digital Signature Service)","body":"<p>I am trying to sign a PDF document with DSS Desktop Standlone App, and my problem is that I cannot use this application in MacOS environnement due to MSCAPI.</p>\n<p>There is a solution for MacOs ?</p>\n"},{"tags":["java","android","android-virtual-device"],"comments":[{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1658670898,"post_id":73098981,"comment_id":129103758,"body_markdown":"Welcome to StackOverFlow, in order to help we need to see the error you are getting. Connect the device to your PC, install and run the app on it. In Android Studio, check the &quot;LogCat&quot; tab and send us the errors reported there","body":"Welcome to StackOverFlow, in order to help we need to see the error you are getting. Connect the device to your PC, install and run the app on it. In Android Studio, check the &quot;LogCat&quot; tab and send us the errors reported there"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1658672693,"post_id":73098981,"comment_id":129104161,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":25883162,"reputation":1,"user_id":19611834,"display_name":"Swapnil Shivpuje"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658670648,"creation_date":1658670648,"question_id":73098981,"body_markdown":"    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n    }\r\n    \r\n    android {\r\n        compileSdk 33\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.example.google_lens_application&quot;\r\n            minSdk 22\r\n            targetSdk 33\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.4.2&#39;\r\n        implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;com.google.android.gms:play-services-vision:20.0.0&#39;\r\n        implementation &#39;com.google.firebase:firebase-ml-vision:24.0.3&#39;\r\n        implementation &#39;com.google.firebase:firebase-core:15.0.2&#39;\r\n        implementation &#39;com.google.firebase:firebase-ml-vision-image-label-model:20.0.1&#39;\r\n        implementation &#39;com.android.volley:volley:1.2.0&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    }\r\n\r\nis that above build.gradle can contain error i don&#39;t able to run app on my actual device it crashesh but it smoothly run on avd my avd api level is 22 while actual device is 31\r\n\r\n\r\n\r\n","title":"App is Not run on Actual Device, But run on AVD","body":"<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.google_lens_application&quot;\n        minSdk 22\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.2'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.android.gms:play-services-vision:20.0.0'\n    implementation 'com.google.firebase:firebase-ml-vision:24.0.3'\n    implementation 'com.google.firebase:firebase-core:15.0.2'\n    implementation 'com.google.firebase:firebase-ml-vision-image-label-model:20.0.1'\n    implementation 'com.android.volley:volley:1.2.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>is that above build.gradle can contain error i don't able to run app on my actual device it crashesh but it smoothly run on avd my avd api level is 22 while actual device is 31</p>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658668216,"post_id":73098608,"comment_id":129103184,"body_markdown":"So only the one object get sorted as the first object of   sortmag  ?","body":"So only the one object get sorted as the first object of   sortmag  ?"},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658668321,"post_id":73098608,"comment_id":129103201,"body_markdown":"Can you also post the method sortAscending?","body":"Can you also post the method sortAscending?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658668352,"post_id":73098608,"comment_id":129103208,"body_markdown":"exactly, just the first agent (lorry, in this case) which &quot;read&quot; this algorythm go towards the first warehouse that has availabilty. The second one which &quot;read&quot; algorytm go towards the same warehouse of the first. So, all lorries towards one warehouse.","body":"exactly, just the first agent (lorry, in this case) which &quot;read&quot; this algorythm go towards the first warehouse that has availabilty. The second one which &quot;read&quot; algorytm go towards the same warehouse of the first. So, all lorries towards one warehouse."},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658668455,"post_id":73098608,"comment_id":129103227,"body_markdown":"@Mirco0 public static &lt;T extends Comparable&lt;? super T&gt; void sortAscending( List&lt;T&gt; list )  Sorts the specified list in ascending order, according to the natural ordering of its elements.\n\nHere&#39;s the link:\n\nhttps://anylogic.help/anylogic/data/sort-collection.html#working-with-non-comparable-elements","body":"@Mirco0 public static &lt;T extends Comparable&lt;? super T&gt; void sortAscending( List&lt;T&gt; list )  Sorts the specified list in ascending order, according to the natural ordering of its elements.  Here&#39;s the link:  <a href=\"https://anylogic.help/anylogic/data/sort-collection.html#working-with-non-comparable-elements\" rel=\"nofollow noreferrer\">anylogic.help/anylogic/data/&hellip;</a>"},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658668948,"post_id":73098608,"comment_id":129103335,"body_markdown":"what about creating a distance in the object Magazzini, setting the value for every object in a loop and then sorting the ArrayList?","body":"what about creating a distance in the object Magazzini, setting the value for every object in a loop and then sorting the ArrayList?"},{"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"score":0,"creation_date":1658669110,"post_id":73098608,"comment_id":129103367,"body_markdown":"@Mirco0 so you mean to create a new array list in the object Magazzini?","body":"@Mirco0 so you mean to create a new array list in the object Magazzini?"},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1658669226,"post_id":73098608,"comment_id":129103386,"body_markdown":"I mean creating a property in the object magazzini called distance","body":"I mean creating a property in the object magazzini called distance"}],"answers":[{"tags":[],"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658670274,"creation_date":1658669375,"answer_id":73098829,"question_id":73098608,"body_markdown":"Maybe you could first set the `distance` value in a loop and then sort the Arraylist,\r\nin this case you also have to create a property called distance in Magazzini\r\nlike so\r\n```Java\r\nfor(Magazzini m: subsetList){\r\n    m.distance = distanceTo(m);\r\n}\r\nsortmag = sortAscending(subsetList, p-&gt; p.distance);\r\n```\r\nHope this helps","title":"[Anylogic]: how can i select the second nearest warehouse?","body":"<p>Maybe you could first set the <code>distance</code> value in a loop and then sort the Arraylist,\nin this case you also have to create a property called distance in Magazzini\nlike so</p>\n<pre><code>for(Magazzini m: subsetList){\n    m.distance = distanceTo(m);\n}\nsortmag = sortAscending(subsetList, p-&gt; p.distance);\n</code></pre>\n<p>Hope this helps</p>\n"}],"owner":{"account_id":25358435,"reputation":15,"user_id":19174162,"display_name":"Alfonso"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658670274,"creation_date":1658667489,"question_id":73098608,"body_markdown":"I am using Anylogic to develop a humanitarian logistic supply chain. This model needs to send lorries from Armies stations to warehouses\r\nfrom which to pick item to support people affected by eartquake and go to epicenter to drop them. This model have to select for each \r\nlorries, nearest warehouse which have availabilty of items in it. For example, if the nearest warehouse has not availablity, lorries have\r\nto select the second nearest warehouse which have availablity and go on it to pick item and go at the epicenter.   \r\nI realize this state chart in which I defined an algoyrthm that have to choose the nearest warehouse which have availabilty of items in it, as follow:\r\n\r\n```\r\nList &lt;Magazzini&gt; subsetlist = findAll(main.magazzinis, w-&gt;w.availabilty&gt;0); \r\n\r\n// I select just warehouses with availablity\r\n\r\nList &lt;Magazzini&gt; sortmag = new ArrayList&lt;&gt;();\r\n\r\nsortmag = subsetlist;\r\n\r\nfor (Warehouses m : subsetlist)\r\n\t{\r\n\t\t\r\n\t\tdistance.add(distanceTo(m));\r\n\t\t\r\n\t\tsortmag = sortAscending(sortmag, p-&gt; p.distanceTo(m));\t//anylogic function which sort agent according a condition (distances\r\n\t\t\t\t\t\t\t\t\t// from lorry in that case)\r\n\t\t\t\t\r\n\t}\t\r\n\t\r\n\tmoveTo(sortmag.get(0)); //move towards the first one warehouse of the sorting made in the for cycle\r\n\tSystem.out.println(sortmag); // just to print the result\r\n\tsortmag = new ArrayList&lt;&gt;();\r\n```\r\n\r\nAnyway, this algorythm doesn&#39;t work for all lorries which read it on the state chart (in the state named &quot;at_warehouse&quot;), but just for\r\nthe first one. Subsequently, all lorries &quot;read&quot; the same result elaborated for the first one.\r\n\r\nHow can I fix it? Please, answer just if you know Anylogic software and don&#39;t close this post. For any further infos, please answer and\r\nI&#39;ll give you that. I need to fix this problem for my thesis work. Thank you so much.\r\n\r\n\r\nPS: I&#39;ve uploaded also a pic in which you can see lorry which starts from Salerno and go to Bari and not towards Naples, where there is a warehouse with availabilty.\r\n[enter image description here][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KxjF5.png\r\n  [2]: https://i.stack.imgur.com/si1JM.png","title":"[Anylogic]: how can i select the second nearest warehouse?","body":"<p>I am using Anylogic to develop a humanitarian logistic supply chain. This model needs to send lorries from Armies stations to warehouses\nfrom which to pick item to support people affected by eartquake and go to epicenter to drop them. This model have to select for each\nlorries, nearest warehouse which have availabilty of items in it. For example, if the nearest warehouse has not availablity, lorries have\nto select the second nearest warehouse which have availablity and go on it to pick item and go at the epicenter.<br />\nI realize this state chart in which I defined an algoyrthm that have to choose the nearest warehouse which have availabilty of items in it, as follow:</p>\n<pre><code>List &lt;Magazzini&gt; subsetlist = findAll(main.magazzinis, w-&gt;w.availabilty&gt;0); \n\n// I select just warehouses with availablity\n\nList &lt;Magazzini&gt; sortmag = new ArrayList&lt;&gt;();\n\nsortmag = subsetlist;\n\nfor (Warehouses m : subsetlist)\n    {\n        \n        distance.add(distanceTo(m));\n        \n        sortmag = sortAscending(sortmag, p-&gt; p.distanceTo(m));  //anylogic function which sort agent according a condition (distances\n                                    // from lorry in that case)\n                \n    }   \n    \n    moveTo(sortmag.get(0)); //move towards the first one warehouse of the sorting made in the for cycle\n    System.out.println(sortmag); // just to print the result\n    sortmag = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Anyway, this algorythm doesn't work for all lorries which read it on the state chart (in the state named &quot;at_warehouse&quot;), but just for\nthe first one. Subsequently, all lorries &quot;read&quot; the same result elaborated for the first one.</p>\n<p>How can I fix it? Please, answer just if you know Anylogic software and don't close this post. For any further infos, please answer and\nI'll give you that. I need to fix this problem for my thesis work. Thank you so much.</p>\n<p>PS: I've uploaded also a pic in which you can see lorry which starts from Salerno and go to Bari and not towards Naples, where there is a warehouse with availabilty.\n<a href=\"https://i.stack.imgur.com/KxjF5.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/si1JM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/si1JM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hibernate","hibernate-mapping"],"comments":[{"owner":{"account_id":4034159,"reputation":141,"user_id":3319248,"accept_rate":29,"display_name":"lovelyim92"},"score":0,"creation_date":1483293681,"post_id":41417575,"comment_id":70040069,"body_markdown":"thanks.. i made hbm2ddl.auto silent. :D. anyway, could you please shed some light on VALIDATE, which you mentioned in your comment ?","body":"thanks.. i made hbm2ddl.auto silent. :D. anyway, could you please shed some light on VALIDATE, which you mentioned in your comment ?"}],"answers":[{"tags":[],"owner":{"account_id":6197622,"reputation":6095,"user_id":4828463,"accept_rate":91,"display_name":"Faraz"},"down_vote_count":2,"up_vote_count":2,"is_accepted":true,"score":0,"last_activity_date":1483293833,"creation_date":1483293833,"answer_id":41417709,"question_id":41417575,"body_markdown":"&gt; hbm2ddl.auto Validate :\r\nIf the value is validate then hibernate only validates whether the table and columns are exist or not. If the table doesnt exist then hibernate throws an exception. Validate is the default value for hbm2ddl.auto.\r\n\r\n&gt; hbm2ddl.auto update :\r\nIf the value is update then hibernate checks for the table and columns. If table doesnt exist then it creates a new table and if a column doesnt exist it creates new column for it.\r\n\r\nThis link has beautiful explanation on all of the values. \r\n\r\nhttp://www.onlinetutorialspoint.com/hibernate/hbm2ddl-auto-example-hibernate-xml-config.html\r\n\r\n`none` is unofficial value i guess. I found it somewhere in stackoverflow but I forgot where. ","title":"hbm2ddl.auto is set to &quot;UPDATE&quot;, but its trying to create table before every insertion","body":"<blockquote>\n  <p>hbm2ddl.auto Validate :\n  If the value is validate then hibernate only validates whether the table and columns are exist or not. If the table doesnt exist then hibernate throws an exception. Validate is the default value for hbm2ddl.auto.</p>\n  \n  <p>hbm2ddl.auto update :\n  If the value is update then hibernate checks for the table and columns. If table doesnt exist then it creates a new table and if a column doesnt exist it creates new column for it.</p>\n</blockquote>\n\n<p>This link has beautiful explanation on all of the values. </p>\n\n<p><a href=\"http://www.onlinetutorialspoint.com/hibernate/hbm2ddl-auto-example-hibernate-xml-config.html\" rel=\"nofollow noreferrer\">http://www.onlinetutorialspoint.com/hibernate/hbm2ddl-auto-example-hibernate-xml-config.html</a></p>\n\n<p><code>none</code> is unofficial value i guess. I found it somewhere in stackoverflow but I forgot where. </p>\n"},{"tags":[],"owner":{"account_id":17043784,"reputation":1,"user_id":12331071,"display_name":"Chinwendu Ochonma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658669388,"creation_date":1658233320,"answer_id":73036837,"question_id":41417575,"body_markdown":"This is what worked for me temporarily, I commented the &quot;**hibernate.hbmddl.auto**&quot; property entirely and hibernate stopped attempting to create the tables that already exist, see below.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC \r\n    &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \r\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    &lt;hibernate-configuration&gt;\r\n\t&lt;session-factory&gt;\r\n\t&lt;!-- Connection settings --&gt;\r\n\t&lt;property name=&quot;hibernate.connection.url&quot;&gt;******&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.username&quot;&gt;******&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.password&quot;&gt;******&lt;/property&gt;\r\n\t&lt;property \r\n    name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect\r\n    &lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.isolation&quot;&gt;2&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.provider_class&quot;&gt;\r\n    org.hibernate.service.jdbc.connections.internal.\r\n    C3P0ConnectionProvider\r\n    &lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;\r\n    org.postgresql.Driver\r\n    &lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.c3p0.unreturnedConnectionTimeout&quot;&gt;30\r\n    &lt;/property&gt;\r\n\t&lt;property  name=&quot;hibernate.c3p0.\r\n    debugUnreturnedConnectionStackTraces&quot;&gt;true&lt;/property&gt;\r\n\t&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\t&lt;!--&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;--&gt;\r\n\t&lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;100&lt;/property&gt;\r\n\t&lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;120&lt;/property&gt;\r\n\t&lt;mapping resource=&quot;dbstructure.hbm.xml&quot; /&gt;\r\n\t&lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nHowever I had to ensure additional update to the tables are well mapped in the mapping file and the POJO classes respectively\r\n\r\nAnd if there was going to be any error, I would see it in the log when it attempt to perform any DDL or DML operation\r\n\r\nCheers","title":"hbm2ddl.auto is set to &quot;UPDATE&quot;, but its trying to create table before every insertion","body":"<p>This is what worked for me temporarily, I commented the &quot;<strong>hibernate.hbmddl.auto</strong>&quot; property entirely and hibernate stopped attempting to create the tables that already exist, see below.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \n&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \n&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n&lt;session-factory&gt;\n&lt;!-- Connection settings --&gt;\n&lt;property name=&quot;hibernate.connection.url&quot;&gt;******&lt;/property&gt;\n&lt;property name=&quot;hibernate.connection.username&quot;&gt;******&lt;/property&gt;\n&lt;property name=&quot;hibernate.connection.password&quot;&gt;******&lt;/property&gt;\n&lt;property \nname=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect\n&lt;/property&gt;\n&lt;property name=&quot;hibernate.connection.isolation&quot;&gt;2&lt;/property&gt;\n&lt;property name=&quot;hibernate.connection.provider_class&quot;&gt;\norg.hibernate.service.jdbc.connections.internal.\nC3P0ConnectionProvider\n&lt;/property&gt;\n&lt;property name=&quot;hibernate.c3p0.acquire_increment&quot;&gt;5&lt;/property&gt;\n&lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;\norg.postgresql.Driver\n&lt;/property&gt;\n&lt;property name=&quot;hibernate.c3p0.unreturnedConnectionTimeout&quot;&gt;30\n&lt;/property&gt;\n&lt;property  name=&quot;hibernate.c3p0.\ndebugUnreturnedConnectionStackTraces&quot;&gt;true&lt;/property&gt;\n&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n&lt;!--&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;--&gt;\n&lt;property name=&quot;hibernate.c3p0.min_size&quot;&gt;5&lt;/property&gt;\n&lt;property name=&quot;hibernate.c3p0.max_size&quot;&gt;100&lt;/property&gt;\n&lt;property name=&quot;hibernate.c3p0.timeout&quot;&gt;120&lt;/property&gt;\n&lt;mapping resource=&quot;dbstructure.hbm.xml&quot; /&gt;\n&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>However I had to ensure additional update to the tables are well mapped in the mapping file and the POJO classes respectively</p>\n<p>And if there was going to be any error, I would see it in the log when it attempt to perform any DDL or DML operation</p>\n<p>Cheers</p>\n"}],"owner":{"account_id":4034159,"reputation":141,"user_id":3319248,"accept_rate":29,"display_name":"lovelyim92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3017,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":41417709,"answer_count":2,"score":5,"last_activity_date":1658669388,"creation_date":1483292790,"question_id":41417575,"body_markdown":"Correct me if i am wrong!.  \r\nGenerally, if hbm2ddl.auto is set to &quot;UPDATE&quot;, hibernate checks if the table exists in db or not, if not it creates that table and pushes the data, if table exists it just adds data to that table.  \r\nfor hbm2ddl.auto = update, What i observed is, before every insertion, hibernate is trying to create the table. though the table exists, it throws exception in log and then hibernate come to know that about the existence of table.  \r\nis this a normal behavior ? or i am missing something ?\r\n\r\nplease find below log generated with the help of log4j in console..\r\n\r\n    Hibernate: create table UsersCC (userID int4 not null, userDOB date, userEmail varchar(255), userPswd varchar(255), primary key (userID))\r\n    23:02:27,799  WARN ExceptionHandlerLoggedImpl:27 - GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\r\n    org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n    \tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:524)\r\n    \tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:470)\r\n    \tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.createTable(AbstractSchemaMigrator.java:273)\r\n    \tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:71)\r\n    \tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:203)\r\n    \tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:110)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)\r\n    \tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:726)\r\n    \tat com.hibernate.Setup.SetupTest.main(SetupTest.java:19)\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;userscc&quot; already exists\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2310)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2023)\r\n    \tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:217)\r\n    \tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:421)\r\n    \tat org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)\r\n    \tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:310)\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\r\n    \t... 13 more\r\n    Hibernate: insert into UsersCC (userDOB, userEmail, userPswd, userID) values (?, ?, ?, ?)\r\n    23:02:27,998 TRACE BasicBinder:65 - binding parameter [1] as [DATE] - [Sun Jan 01 23:02:25 IST 2017]\r\n    23:02:27,999 TRACE BasicBinder:65 - binding parameter [2] as [VARCHAR] - [motogg@support.com]\r\n    23:02:28,000 TRACE BasicBinder:65 - binding parameter [3] as [VARCHAR] - [lenovo18]\r\n    23:02:28,004 TRACE BasicBinder:65 - binding parameter [4] as [INTEGER] - [101]\r\n    23:02:28,013  INFO pooling:230 - HHH10001008: Cleaning up connection pool [jdbc:postgresql://localhost:5432/campusCafeDb]\r\n\r\n\r\n\r\nif its normal, then isn&#39;t it a performance issue ?","title":"hbm2ddl.auto is set to &quot;UPDATE&quot;, but its trying to create table before every insertion","body":"<p>Correct me if i am wrong!.<br>\nGenerally, if hbm2ddl.auto is set to \"UPDATE\", hibernate checks if the table exists in db or not, if not it creates that table and pushes the data, if table exists it just adds data to that table.<br>\nfor hbm2ddl.auto = update, What i observed is, before every insertion, hibernate is trying to create the table. though the table exists, it throws exception in log and then hibernate come to know that about the existence of table.<br>\nis this a normal behavior ? or i am missing something ?</p>\n\n<p>please find below log generated with the help of log4j in console..</p>\n\n<pre><code>Hibernate: create table UsersCC (userID int4 not null, userDOB date, userEmail varchar(255), userPswd varchar(255), primary key (userID))\n23:02:27,799  WARN ExceptionHandlerLoggedImpl:27 - GenerationTarget encountered exception accepting command : Error executing DDL via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:524)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:470)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.createTable(AbstractSchemaMigrator.java:273)\n    at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:71)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:203)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:110)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:309)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:445)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:710)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:726)\n    at com.hibernate.Setup.SetupTest.main(SetupTest.java:19)\nCaused by: org.postgresql.util.PSQLException: ERROR: relation \"userscc\" already exists\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2310)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2023)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:217)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:421)\n    at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:318)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:310)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 13 more\nHibernate: insert into UsersCC (userDOB, userEmail, userPswd, userID) values (?, ?, ?, ?)\n23:02:27,998 TRACE BasicBinder:65 - binding parameter [1] as [DATE] - [Sun Jan 01 23:02:25 IST 2017]\n23:02:27,999 TRACE BasicBinder:65 - binding parameter [2] as [VARCHAR] - [motogg@support.com]\n23:02:28,000 TRACE BasicBinder:65 - binding parameter [3] as [VARCHAR] - [lenovo18]\n23:02:28,004 TRACE BasicBinder:65 - binding parameter [4] as [INTEGER] - [101]\n23:02:28,013  INFO pooling:230 - HHH10001008: Cleaning up connection pool [jdbc:postgresql://localhost:5432/campusCafeDb]\n</code></pre>\n\n<p>if its normal, then isn't it a performance issue ?</p>\n"},{"tags":["java","spring","spring-boot","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2825991,"reputation":2000,"user_id":2428631,"display_name":"McPringle"},"score":0,"creation_date":1630876833,"post_id":69067277,"comment_id":122068458,"body_markdown":"Take a detailed look at the module names in the error message. Do you see the difference?","body":"Take a detailed look at the module names in the error message. Do you see the difference?"}],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1651872217,"creation_date":1651499983,"answer_id":72087822,"question_id":69067277,"body_markdown":"The error stack trace is indicating that a `NullPointerException` is happening when you are creating a new instance of `DefaultKafkaProducerFactory` in the `producerFactory()` method.\r\n\r\nInternally, `DefaultKafkaProducerFactory` [creates a `ConcurrentHashMap`](https://github.com/spring-projects/spring-kafka/blob/b0102611d05732a8c93bb51c413fc6f8680b1ae2/spring-kafka/src/main/java/org/springframework/kafka/core/DefaultKafkaProducerFactory.java#L205) with the provided information to maintain its configuration.\r\n\r\nAs you can see in the [`ConcurrentHashMap` javadocs](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#put-K-V-), the `put` method will raise `NullPointerException` if any of the provided keys or values are `null`.\r\n\r\nAs a consequence, probably one of or several of the variables `keySerializer`, `valueSerializer` or `bootstrapServers` are null.\r\n\r\nI assume these values are filled by dependency injection according to your `@ConfigurationProperties` `kafka.status.producer`. Please, be sure these properties are correctly defined in your Spring configuration.\r\n\r\nFor testing purposes, try removing the `@RefreshScope` annotation: it may be a cause of the problem.\r\n\r\nThe contrary can be a valid solution as well. As indicated in the Spring Cloud documentation when [talking about `@RefreshScope`](https://docs.spring.io/spring-cloud-commons/docs/3.1.2/reference/html/#refresh-scope):\r\n\r\n&gt; `@RefreshScope` works (technically) on a `@Configuration` class, \r\n&gt; but it might lead to surprising behavior. For example, it does not\r\n&gt; mean that all the `@Beans` defined in that class are themselves in\r\n&gt; `@RefreshScope`. Specifically, anything that depends on those beans\r\n&gt; cannot rely on them being updated when a refresh is initiated, unless\r\n&gt; it is itself in `@RefreshScope`. In that case, it is rebuilt on a\r\n&gt; refresh and its dependencies are re-injected. At that point, they are\r\n&gt; re-initialized from the refreshed `@Configuration`).\r\n\r\nFrom that point of view if make perfect sense to annotate with `@RefreshScope` the `producerFactory` bean as well. I would try:\r\n\r\n```java\r\nimport org.apache.kafka.clients.producer.ProducerConfig;\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\r\nimport org.springframework.kafka.core.KafkaTemplate;\r\nimport org.springframework.kafka.core.ProducerFactory;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Configuration\r\n@RefreshScope\r\n@ConfigurationProperties(prefix = &quot;kafka.status.producer&quot;)\r\npublic class StatusKafkaProducerConfig {\r\n\r\n  private String keySerializer;\r\n  private String valueSerializer;\r\n  private String bootstrapServers;\r\n\r\n  public void setKeySerializer(String keySerializer) {\r\n    this.keySerializer = keySerializer;\r\n  }\r\n\r\n  public void setValueSerializer(String valueSerializer) {\r\n    this.valueSerializer = valueSerializer;\r\n  }\r\n\r\n  public void setBootstrapServers(String bootstrapServers) {\r\n    this.bootstrapServers = bootstrapServers;\r\n  }\r\n\r\n  @Bean\r\n  @RefreshScope\r\n  public Map&lt;String, Object&gt; producerConfigs() {\r\n    Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n\r\n    properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializer);\r\n    properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializer);\r\n    properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n\r\n    return properties;\r\n  }\r\n\r\n  @Bean\r\n  @RefreshScope\r\n  public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n    return new KafkaTemplate&lt;&gt;(producerFactory());\r\n  }\r\n\r\n  @Bean\r\n  @RefreshScope\r\n  public ProducerFactory&lt;String, String&gt; producerFactory() {\r\n    return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\r\n  }    \r\n}\r\n```\r\n\r\nPlease, note the inclusion of the additional `@RefreshScope` annotations.\r\n\r\nFinally, consider review the Spring Kafka project documentation, it provides several examples about how to configure your project, whether you are using [Spring Boot](https://docs.spring.io/spring-kafka/reference/html/#spring-boot-producer-app) or [not](https://docs.spring.io/spring-kafka/reference/html/#with-java-configuration-no-spring-boot), and gives you further background about [`DefaultKafkaProducerFactory`](https://docs.spring.io/spring-kafka/reference/html/#producer-factory).\r\n\r\nAs you can see in the aforementioned docs, if you are using Spring Boot, like in you case, the code can be greatly simplified. Consider review the [`Spring Boot` related documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka) about the subject and [related properties configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.integration.spring.kafka.producer.bootstrap-servers).","title":"Bean instantiation via factory method failed; exception org.springframework.beans.BeanInstantiationException","body":"<p>The error stack trace is indicating that a <code>NullPointerException</code> is happening when you are creating a new instance of <code>DefaultKafkaProducerFactory</code> in the <code>producerFactory()</code> method.</p>\n<p>Internally, <code>DefaultKafkaProducerFactory</code> <a href=\"https://github.com/spring-projects/spring-kafka/blob/b0102611d05732a8c93bb51c413fc6f8680b1ae2/spring-kafka/src/main/java/org/springframework/kafka/core/DefaultKafkaProducerFactory.java#L205\" rel=\"nofollow noreferrer\">creates a <code>ConcurrentHashMap</code></a> with the provided information to maintain its configuration.</p>\n<p>As you can see in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#put-K-V-\" rel=\"nofollow noreferrer\"><code>ConcurrentHashMap</code> javadocs</a>, the <code>put</code> method will raise <code>NullPointerException</code> if any of the provided keys or values are <code>null</code>.</p>\n<p>As a consequence, probably one of or several of the variables <code>keySerializer</code>, <code>valueSerializer</code> or <code>bootstrapServers</code> are null.</p>\n<p>I assume these values are filled by dependency injection according to your <code>@ConfigurationProperties</code> <code>kafka.status.producer</code>. Please, be sure these properties are correctly defined in your Spring configuration.</p>\n<p>For testing purposes, try removing the <code>@RefreshScope</code> annotation: it may be a cause of the problem.</p>\n<p>The contrary can be a valid solution as well. As indicated in the Spring Cloud documentation when <a href=\"https://docs.spring.io/spring-cloud-commons/docs/3.1.2/reference/html/#refresh-scope\" rel=\"nofollow noreferrer\">talking about <code>@RefreshScope</code></a>:</p>\n<blockquote>\n<p><code>@RefreshScope</code> works (technically) on a <code>@Configuration</code> class,\nbut it might lead to surprising behavior. For example, it does not\nmean that all the <code>@Beans</code> defined in that class are themselves in\n<code>@RefreshScope</code>. Specifically, anything that depends on those beans\ncannot rely on them being updated when a refresh is initiated, unless\nit is itself in <code>@RefreshScope</code>. In that case, it is rebuilt on a\nrefresh and its dependencies are re-injected. At that point, they are\nre-initialized from the refreshed <code>@Configuration</code>).</p>\n</blockquote>\n<p>From that point of view if make perfect sense to annotate with <code>@RefreshScope</code> the <code>producerFactory</code> bean as well. I would try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.kafka.clients.producer.ProducerConfig;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.core.ProducerFactory;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Configuration\n@RefreshScope\n@ConfigurationProperties(prefix = &quot;kafka.status.producer&quot;)\npublic class StatusKafkaProducerConfig {\n\n  private String keySerializer;\n  private String valueSerializer;\n  private String bootstrapServers;\n\n  public void setKeySerializer(String keySerializer) {\n    this.keySerializer = keySerializer;\n  }\n\n  public void setValueSerializer(String valueSerializer) {\n    this.valueSerializer = valueSerializer;\n  }\n\n  public void setBootstrapServers(String bootstrapServers) {\n    this.bootstrapServers = bootstrapServers;\n  }\n\n  @Bean\n  @RefreshScope\n  public Map&lt;String, Object&gt; producerConfigs() {\n    Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n\n    properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializer);\n    properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializer);\n    properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n\n    return properties;\n  }\n\n  @Bean\n  @RefreshScope\n  public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n    return new KafkaTemplate&lt;&gt;(producerFactory());\n  }\n\n  @Bean\n  @RefreshScope\n  public ProducerFactory&lt;String, String&gt; producerFactory() {\n    return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\n  }    \n}\n</code></pre>\n<p>Please, note the inclusion of the additional <code>@RefreshScope</code> annotations.</p>\n<p>Finally, consider review the Spring Kafka project documentation, it provides several examples about how to configure your project, whether you are using <a href=\"https://docs.spring.io/spring-kafka/reference/html/#spring-boot-producer-app\" rel=\"nofollow noreferrer\">Spring Boot</a> or <a href=\"https://docs.spring.io/spring-kafka/reference/html/#with-java-configuration-no-spring-boot\" rel=\"nofollow noreferrer\">not</a>, and gives you further background about <a href=\"https://docs.spring.io/spring-kafka/reference/html/#producer-factory\" rel=\"nofollow noreferrer\"><code>DefaultKafkaProducerFactory</code></a>.</p>\n<p>As you can see in the aforementioned docs, if you are using Spring Boot, like in you case, the code can be greatly simplified. Consider review the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka\" rel=\"nofollow noreferrer\"><code>Spring Boot</code> related documentation</a> about the subject and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.integration.spring.kafka.producer.bootstrap-servers\" rel=\"nofollow noreferrer\">related properties configuration</a>.</p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20575,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":72087822,"answer_count":1,"score":3,"last_activity_date":1658669054,"creation_date":1630876701,"question_id":69067277,"body_markdown":"I have the following Spring configuration for Kafka:\r\n\r\n    import org.apache.kafka.clients.producer.ProducerConfig;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.cloud.context.config.annotation.RefreshScope;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.kafka.core.DefaultKafkaProducerFactory;\r\n    import org.springframework.kafka.core.KafkaTemplate;\r\n    import org.springframework.kafka.core.ProducerFactory;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    @Configuration\r\n    @RefreshScope\r\n    @ConfigurationProperties(prefix = &quot;kafka.status.producer&quot;)\r\n    public class StatusKafkaProducerConfig {\r\n    \r\n      private String keySerializer;\r\n      private String valueSerializer;\r\n      private String bootstrapServers;\r\n    \r\n      public void setKeySerializer(String keySerializer) {\r\n        this.keySerializer = keySerializer;\r\n      }\r\n    \r\n      public void setValueSerializer(String valueSerializer) {\r\n        this.valueSerializer = valueSerializer;\r\n      }\r\n    \r\n      public void setBootstrapServers(String bootstrapServers) {\r\n        this.bootstrapServers = bootstrapServers;\r\n      }\r\n    \r\n      @Bean\r\n      public Map&lt;String, Object&gt; producerConfigs() {\r\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n    \r\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializer);\r\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializer);\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n    \r\n        return properties;\r\n      }\r\n    \r\n      @Bean\r\n      @RefreshScope\r\n      public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n        return new KafkaTemplate&lt;&gt;(producerFactory());\r\n      }\r\n\r\n      @Bean\r\n      public ProducerFactory&lt;String, String&gt; producerFactory() {\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\r\n      }    \r\n    }\r\n\r\nI migrated the project to latest Spring cloud 2021.0.1 and Spring Boot 2.6.6. But I get the following error stack during boot time:\r\n\r\n        2022-04-30 19:14:08.350 ERROR 23684 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;producerFactory&#39; defined in class path resource [com/test/StatusUpdateKafkaProducerConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ProducerFactory]: Factory method &#39;producerFactory&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\r\n    \tat com.test.Application.main(Application.java:82) ~[main/:na]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ProducerFactory]: Factory method &#39;producerFactory&#39; threw exception; nested exception is java.lang.NullPointerException\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \t... 19 common frames omitted\r\n    Caused by: java.lang.NullPointerException: null\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.putAll(ConcurrentHashMap.java:1089) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ConcurrentHashMap.&lt;init&gt;(ConcurrentHashMap.java:852) ~[na:na]\r\n    \tat org.springframework.kafka.core.DefaultKafkaProducerFactory.&lt;init&gt;(DefaultKafkaProducerFactory.java:205) ~[spring-kafka-2.8.5.jar:2.8.5]\r\n    \tat org.springframework.kafka.core.DefaultKafkaProducerFactory.&lt;init&gt;(DefaultKafkaProducerFactory.java:168) ~[spring-kafka-2.8.5.jar:2.8.5]\r\n    \tat com.test.StatusUpdateKafkaProducerConfig.producerFactory(TransactionStatusUpdateKafkaProducerConfig.java:53) ~[commons-0.0.1-plain.jar:na]\r\n    \tat com.test.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88.CGLIB$producerFactory$0(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\r\n    \tat com.test.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88$$FastClassBySpringCGLIB$$db10662a.invoke(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.19.jar:5.3.19]\r\n    \tat com.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88.producerFactory(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) ~[spring-core-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:485) ~[spring-cloud-context-3.1.2.jar:3.1.2]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.19.jar:5.3.19]\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.19.jar:5.3.19]\r\n    \tat com.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$6800bd04.producerFactory(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.19.jar:5.3.19]\r\n    \t... 20 common frames omitted\r\n\r\n\r\nDo you know how I can fix this issue?","title":"Bean instantiation via factory method failed; exception org.springframework.beans.BeanInstantiationException","body":"<p>I have the following Spring configuration for Kafka:</p>\n<pre><code>import org.apache.kafka.clients.producer.ProducerConfig;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.core.ProducerFactory;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Configuration\n@RefreshScope\n@ConfigurationProperties(prefix = &quot;kafka.status.producer&quot;)\npublic class StatusKafkaProducerConfig {\n\n  private String keySerializer;\n  private String valueSerializer;\n  private String bootstrapServers;\n\n  public void setKeySerializer(String keySerializer) {\n    this.keySerializer = keySerializer;\n  }\n\n  public void setValueSerializer(String valueSerializer) {\n    this.valueSerializer = valueSerializer;\n  }\n\n  public void setBootstrapServers(String bootstrapServers) {\n    this.bootstrapServers = bootstrapServers;\n  }\n\n  @Bean\n  public Map&lt;String, Object&gt; producerConfigs() {\n    Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n\n    properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, keySerializer);\n    properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, valueSerializer);\n    properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n\n    return properties;\n  }\n\n  @Bean\n  @RefreshScope\n  public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n    return new KafkaTemplate&lt;&gt;(producerFactory());\n  }\n\n  @Bean\n  public ProducerFactory&lt;String, String&gt; producerFactory() {\n    return new DefaultKafkaProducerFactory&lt;&gt;(producerConfigs());\n  }    \n}\n</code></pre>\n<p>I migrated the project to latest Spring cloud 2021.0.1 and Spring Boot 2.6.6. But I get the following error stack during boot time:</p>\n<pre><code>    2022-04-30 19:14:08.350 ERROR 23684 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'producerFactory' defined in class path resource [com/test/StatusUpdateKafkaProducerConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ProducerFactory]: Factory method 'producerFactory' threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.19.jar:5.3.19]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\n    at com.test.Application.main(Application.java:82) ~[main/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.kafka.core.ProducerFactory]: Factory method 'producerFactory' threw exception; nested exception is java.lang.NullPointerException\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.3.19.jar:5.3.19]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653) ~[spring-beans-5.3.19.jar:5.3.19]\n    ... 19 common frames omitted\nCaused by: java.lang.NullPointerException: null\n    at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[na:na]\n    at java.base/java.util.concurrent.ConcurrentHashMap.putAll(ConcurrentHashMap.java:1089) ~[na:na]\n    at java.base/java.util.concurrent.ConcurrentHashMap.&lt;init&gt;(ConcurrentHashMap.java:852) ~[na:na]\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.&lt;init&gt;(DefaultKafkaProducerFactory.java:205) ~[spring-kafka-2.8.5.jar:2.8.5]\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory.&lt;init&gt;(DefaultKafkaProducerFactory.java:168) ~[spring-kafka-2.8.5.jar:2.8.5]\n    at com.test.StatusUpdateKafkaProducerConfig.producerFactory(TransactionStatusUpdateKafkaProducerConfig.java:53) ~[commons-0.0.1-plain.jar:na]\n    at com.test.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88.CGLIB$producerFactory$0(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\n    at com.test.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88$$FastClassBySpringCGLIB$$db10662a.invoke(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.19.jar:5.3.19]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.19.jar:5.3.19]\n    at com.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$e907de88.producerFactory(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282) ~[spring-core-5.3.19.jar:5.3.19]\n    at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:485) ~[spring-cloud-context-3.1.2.jar:3.1.2]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.19.jar:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763) ~[spring-aop-5.3.19.jar:5.3.19]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708) ~[spring-aop-5.3.19.jar:5.3.19]\n    at com.StatusUpdateKafkaProducerConfig$$EnhancerBySpringCGLIB$$6800bd04.producerFactory(&lt;generated&gt;) ~[commons-0.0.1-plain.jar:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.19.jar:5.3.19]\n    ... 20 common frames omitted\n</code></pre>\n<p>Do you know how I can fix this issue?</p>\n"},{"tags":["java","android","api","charts","mpandroidchart"],"comments":[{"owner":{"account_id":13113788,"reputation":10080,"user_id":9473786,"display_name":"Tyler V"},"score":0,"creation_date":1658622374,"post_id":73094872,"comment_id":129097180,"body_markdown":"What kind of value does `chartData.getTimeStamp()` return? The epoch millisecond value? If you add a log statement in `getFormattedValue` what incoming values do you see?","body":"What kind of value does <code>chartData.getTimeStamp()</code> return? The epoch millisecond value? If you add a log statement in <code>getFormattedValue</code> what incoming values do you see?"},{"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"score":0,"creation_date":1658649927,"post_id":73094872,"comment_id":129100033,"body_markdown":"@TylerV I&#39;ve updated the question according to what you want. In my response example below, I set the initial values returned in the timeStamp field in the chartData.","body":"@TylerV I&#39;ve updated the question according to what you want. In my response example below, I set the initial values returned in the timeStamp field in the chartData."}],"answers":[{"tags":[],"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658668141,"creation_date":1658668141,"answer_id":73098683,"question_id":73094872,"body_markdown":"I solved the problem as a result of my own experiments. Sometimes Y value was sent to the formatter side as I did not understand the reason. This is the reason for this error. \r\n\r\nI removed this section:\r\n\r\n    lineDataSet.setValueFormatter(new LineChartXAxisFormatter());\r\n\r\nAnd added this instead:\r\n\r\n    lineChart.getXAxis().setValueFormatter(new LineChartXAxisFormatter());\r\n\r\nIt&#39;s solved my problem.\r\n\r\n","title":"Chart formatter shows the wrong date (MPAndroidChart)","body":"<p>I solved the problem as a result of my own experiments. Sometimes Y value was sent to the formatter side as I did not understand the reason. This is the reason for this error.</p>\n<p>I removed this section:</p>\n<pre><code>lineDataSet.setValueFormatter(new LineChartXAxisFormatter());\n</code></pre>\n<p>And added this instead:</p>\n<pre><code>lineChart.getXAxis().setValueFormatter(new LineChartXAxisFormatter());\n</code></pre>\n<p>It's solved my problem.</p>\n"}],"owner":{"account_id":11416432,"reputation":578,"user_id":8369150,"display_name":"Halil Sahin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73098683,"answer_count":1,"score":1,"last_activity_date":1658668141,"creation_date":1658619435,"question_id":73094872,"body_markdown":"I want to get 7 days of coin exchange data using Coingecko api and show it on a chart. I used a formatter for this, but it always shows the same date as seen in the picture I shared below. When I test the code inside the formatter separately, there is no problem and they show the date information correctly.\r\n\r\n[Coingecko Example API GET Request][1]\r\n\r\n\r\nMy Error:\r\n[![Just showing Jan 1, 1970][2]][2]\r\n\r\n**My codes:**\r\n\r\nChartData.java:\r\n\r\n    @Data\r\n    public class ChartData {\r\n        private long timeStamp;\r\n        private double cost;\r\n    }\r\n\r\n\r\nFilling Chart Data:\r\n\r\n    List &lt; Entry &gt; lineList = new ArrayList &lt; &gt; ();\r\n    for (int i = 0; i &lt; chartDataList.size(); i) {\r\n      if (i % 10 == 0) {\r\n        ChartData chartData = chartDataList.get(i);\r\n        lineList.add(new Entry(chartData.getTimeStamp(), (float) chartData.getCost()));\r\n      }\r\n    }\r\n    drawLineChart(lineList);\r\n\r\n\r\nDrawline Method:\r\n\r\n    private void drawLineChart(List&lt;Entry&gt; lineList) {\r\n        Description description = new Description();\r\n        description.setText(trying);\r\n        lineChart.setDescription(description);\r\n        LineDataSet lineDataSet = new LineDataSet(lineList, &quot;Test&quot;);\r\n        lineDataSet.setValueFormatter(new LineChartXAxisFormatter());\r\n        lineDataSet.setFillAlpha(110);\r\n        lineDataSet.setColors(ColorTemplate.COLORFUL_COLORS);\r\n        lineDataSet.setMode(LineDataSet.Mode.CUBIC_BEZIER);\r\n        lineDataSet.setDrawFilled(true);\r\n        lineDataSet.setFillColor(Color.GREEN);\r\n    \r\n        LineData lineData = new LineData(lineDataSet);\r\n        lineChart.setData(lineData);\r\n        lineData.setValueTextSize(20f);\r\n        lineData.setValueTextColor(Color.BLACK);\r\n        lineChart.invalidate();\r\n    }\r\n\r\nMy Formatter (Note: I tried multiple emissionsMilliSince1970Time with 1000 and it&#39;s still same):\r\n\r\n    public class LineChartXAxisFormatter extends IndexAxisValueFormatter {\r\n        @Override\r\n        public String getFormattedValue(float value) {\r\n            long emissionsMilliSince1970Time = ((long) value);\r\n            Date timeMilliseconds = new Date(emissionsMilliSince1970Time);\r\n            DateFormat dateTimeFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.getDefault());\r\n            return dateTimeFormat.format(timeMilliseconds);\r\n        }\r\n    }\r\n\r\nFor my separately tests: (timestamp value is: `1658044843993`:\r\n\r\n    long emissionsMilliSince1970Time = chartData.getTimeStamp();\r\n    Date timeMilliseconds = new Date(emissionsMilliSince1970Time);\r\n    DateFormat dateTimeFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.getDefault());\r\n    String formattedDate = dateTimeFormat.format(timeMilliseconds);\r\n\r\nReturned value by; `formattedDate = Jul 17, 2022`\r\n\r\n\r\nIn summary I want it to display the date correctly but I don&#39;t know how. It&#39;s just showing `Jan 1, 1970`. \r\n\r\nHere is a example response from service, first one timestamp and second one is price:\r\n\r\n    [\r\n      1658008855204,\r\n      369452.2869662426\r\n    ],\r\n    [\r\n      1658012443271,\r\n      369353.01214527374\r\n    ],\r\n    [\r\n      1658016032181,\r\n      368759.6501746092\r\n    ],\r\n    [\r\n      1658019690976,\r\n      370378.3317357749\r\n    ],\r\n    [\r\n      1658023239165,\r\n      367820.598299985\r\n    ]\r\n\r\n  [1]: https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=try&amp;days=7\r\n  [2]: https://i.stack.imgur.com/WfbMq.png\r\n\r\n","title":"Chart formatter shows the wrong date (MPAndroidChart)","body":"<p>I want to get 7 days of coin exchange data using Coingecko api and show it on a chart. I used a formatter for this, but it always shows the same date as seen in the picture I shared below. When I test the code inside the formatter separately, there is no problem and they show the date information correctly.</p>\n<p><a href=\"https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=try&amp;days=7\" rel=\"nofollow noreferrer\">Coingecko Example API GET Request</a></p>\n<p>My Error:\n<a href=\"https://i.stack.imgur.com/WfbMq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WfbMq.png\" alt=\"Just showing Jan 1, 1970\" /></a></p>\n<p><strong>My codes:</strong></p>\n<p>ChartData.java:</p>\n<pre><code>@Data\npublic class ChartData {\n    private long timeStamp;\n    private double cost;\n}\n</code></pre>\n<p>Filling Chart Data:</p>\n<pre><code>List &lt; Entry &gt; lineList = new ArrayList &lt; &gt; ();\nfor (int i = 0; i &lt; chartDataList.size(); i) {\n  if (i % 10 == 0) {\n    ChartData chartData = chartDataList.get(i);\n    lineList.add(new Entry(chartData.getTimeStamp(), (float) chartData.getCost()));\n  }\n}\ndrawLineChart(lineList);\n</code></pre>\n<p>Drawline Method:</p>\n<pre><code>private void drawLineChart(List&lt;Entry&gt; lineList) {\n    Description description = new Description();\n    description.setText(trying);\n    lineChart.setDescription(description);\n    LineDataSet lineDataSet = new LineDataSet(lineList, &quot;Test&quot;);\n    lineDataSet.setValueFormatter(new LineChartXAxisFormatter());\n    lineDataSet.setFillAlpha(110);\n    lineDataSet.setColors(ColorTemplate.COLORFUL_COLORS);\n    lineDataSet.setMode(LineDataSet.Mode.CUBIC_BEZIER);\n    lineDataSet.setDrawFilled(true);\n    lineDataSet.setFillColor(Color.GREEN);\n\n    LineData lineData = new LineData(lineDataSet);\n    lineChart.setData(lineData);\n    lineData.setValueTextSize(20f);\n    lineData.setValueTextColor(Color.BLACK);\n    lineChart.invalidate();\n}\n</code></pre>\n<p>My Formatter (Note: I tried multiple emissionsMilliSince1970Time with 1000 and it's still same):</p>\n<pre><code>public class LineChartXAxisFormatter extends IndexAxisValueFormatter {\n    @Override\n    public String getFormattedValue(float value) {\n        long emissionsMilliSince1970Time = ((long) value);\n        Date timeMilliseconds = new Date(emissionsMilliSince1970Time);\n        DateFormat dateTimeFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.getDefault());\n        return dateTimeFormat.format(timeMilliseconds);\n    }\n}\n</code></pre>\n<p>For my separately tests: (timestamp value is: <code>1658044843993</code>:</p>\n<pre><code>long emissionsMilliSince1970Time = chartData.getTimeStamp();\nDate timeMilliseconds = new Date(emissionsMilliSince1970Time);\nDateFormat dateTimeFormat = DateFormat.getDateInstance(DateFormat.MEDIUM, Locale.getDefault());\nString formattedDate = dateTimeFormat.format(timeMilliseconds);\n</code></pre>\n<p>Returned value by; <code>formattedDate = Jul 17, 2022</code></p>\n<p>In summary I want it to display the date correctly but I don't know how. It's just showing <code>Jan 1, 1970</code>.</p>\n<p>Here is a example response from service, first one timestamp and second one is price:</p>\n<pre><code>[\n  1658008855204,\n  369452.2869662426\n],\n[\n  1658012443271,\n  369353.01214527374\n],\n[\n  1658016032181,\n  368759.6501746092\n],\n[\n  1658019690976,\n  370378.3317357749\n],\n[\n  1658023239165,\n  367820.598299985\n]\n</code></pre>\n"},{"tags":["java","spring-boot","junit","repository"],"answers":[{"tags":[],"owner":{"account_id":1410041,"reputation":7508,"user_id":1336841,"display_name":"Forketyfork"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658667223,"creation_date":1658667223,"answer_id":73098581,"question_id":73098503,"body_markdown":"The reason it works in tests is that the `@DataJpaTest` annotation contains the `@Transactional` meta-annotation. So the whole test method is covered with a transaction, and this allows `AlertRepository` methods to run without errors.\r\n\r\nIf you want to make it fail in tests, you can override the `@Transactional` annotation, as follows: \r\n```java\r\nDataJpaTest\r\n@Transactional(propagation = Propagation.NOT_SUPPORTED)\r\nclass MyNonTransactionalTests {\r\n\r\n    // ...\r\n\r\n}\r\n```\r\n\r\nSee the [documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa) for more information on this behavior.","title":"Spring repository : Junit test succeeds on custom delete even when @Transactional is missing","body":"<p>The reason it works in tests is that the <code>@DataJpaTest</code> annotation contains the <code>@Transactional</code> meta-annotation. So the whole test method is covered with a transaction, and this allows <code>AlertRepository</code> methods to run without errors.</p>\n<p>If you want to make it fail in tests, you can override the <code>@Transactional</code> annotation, as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DataJpaTest\n@Transactional(propagation = Propagation.NOT_SUPPORTED)\nclass MyNonTransactionalTests {\n\n    // ...\n\n}\n</code></pre>\n<p>See the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.spring-boot-applications.autoconfigured-spring-data-jpa\" rel=\"nofollow noreferrer\">documentation</a> for more information on this behavior.</p>\n"}],"owner":{"account_id":19931270,"reputation":103,"user_id":14604849,"display_name":"tristan19954"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73098581,"answer_count":1,"score":1,"last_activity_date":1658667223,"creation_date":1658666652,"question_id":73098503,"body_markdown":"I have a Spring repository that has a method like this :\r\n\r\n     Long deleteByStatusAndTriggeredBefore(String status, Timestamp triggered);\r\nWhen testing this method in a Junit Test, it does work as intended. \r\n\r\n    @DataJpaTest\r\n    public class AlertRepositoryTest {\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;alertRepository&quot;)\r\n        private AlertRepository underTest;\r\n    \r\n        @AfterEach\r\n        void tearDown(){\r\n            underTest.deleteAll();\r\n        }\r\n    \r\n        @Test\r\n        void testUpdateAndDelete() {\r\n            Timestamp triggered = java.sql.Timestamp.valueOf(&quot;2007-09-23 10:10:10.0&quot;);\r\n            Timestamp fixed = java.sql.Timestamp.valueOf(&quot;2012-09-23 10:10:10.0&quot;);\r\n    \r\n            Alert alert1 = new Alert(&quot;FIXED&quot;, &quot;event1&quot;, 0L, 0L, triggered, fixed, &quot;domain1&quot;, &quot;service1&quot;, &quot;metric1&quot;, &quot;context1&quot;, 1L, 1L);\r\n            Alert alert2 = new Alert(&quot;FIXED&quot;, &quot;event2&quot;, 0L, 0L, triggered, fixed, &quot;domain2&quot;, &quot;service2&quot;, &quot;metric2&quot;, &quot;context2&quot;, 1L, 1L);\r\n    \r\n            underTest.save(alert1);\r\n            underTest.save(alert2);\r\n            \r\n            // some other assertions ...\r\n    \r\n            // As expected, the elements get deleted and the database is empty\r\n            Timestamp deletion = java.sql.Timestamp.valueOf(&quot;2019-09-23 10:10:10.0&quot;);\r\n            underTest.deleteByStatusAndTriggeredBefore(&quot;FIXED&quot;, deletion);\r\n            Page&lt;Alert&gt; alertReturned = underTest.findByStatus(&quot;FIXED&quot;, Pageable.unpaged());\r\n            assertThat(alertReturned.getContent().size()).isEqualTo(0);  \r\n    \r\n        }\r\n    }\r\n\r\nHowever, the delete does not work on our production DB. For it to work on the production DB, we had to add the @Transactional annotation to the method in the repository\r\n\r\n    @Transactional\r\n    Long deleteByStatusAndTriggeredBefore(String status, Timestamp triggered);\r\n\r\nThis is an issue as the test works but it does not work in production. Is it possible to make this test fail when there is a transactional annotation missing? The tests are configured to run on an in-memory H2 database.","title":"Spring repository : Junit test succeeds on custom delete even when @Transactional is missing","body":"<p>I have a Spring repository that has a method like this :</p>\n<pre><code> Long deleteByStatusAndTriggeredBefore(String status, Timestamp triggered);\n</code></pre>\n<p>When testing this method in a Junit Test, it does work as intended.</p>\n<pre><code>@DataJpaTest\npublic class AlertRepositoryTest {\n\n    @Autowired\n    @Qualifier(&quot;alertRepository&quot;)\n    private AlertRepository underTest;\n\n    @AfterEach\n    void tearDown(){\n        underTest.deleteAll();\n    }\n\n    @Test\n    void testUpdateAndDelete() {\n        Timestamp triggered = java.sql.Timestamp.valueOf(&quot;2007-09-23 10:10:10.0&quot;);\n        Timestamp fixed = java.sql.Timestamp.valueOf(&quot;2012-09-23 10:10:10.0&quot;);\n\n        Alert alert1 = new Alert(&quot;FIXED&quot;, &quot;event1&quot;, 0L, 0L, triggered, fixed, &quot;domain1&quot;, &quot;service1&quot;, &quot;metric1&quot;, &quot;context1&quot;, 1L, 1L);\n        Alert alert2 = new Alert(&quot;FIXED&quot;, &quot;event2&quot;, 0L, 0L, triggered, fixed, &quot;domain2&quot;, &quot;service2&quot;, &quot;metric2&quot;, &quot;context2&quot;, 1L, 1L);\n\n        underTest.save(alert1);\n        underTest.save(alert2);\n        \n        // some other assertions ...\n\n        // As expected, the elements get deleted and the database is empty\n        Timestamp deletion = java.sql.Timestamp.valueOf(&quot;2019-09-23 10:10:10.0&quot;);\n        underTest.deleteByStatusAndTriggeredBefore(&quot;FIXED&quot;, deletion);\n        Page&lt;Alert&gt; alertReturned = underTest.findByStatus(&quot;FIXED&quot;, Pageable.unpaged());\n        assertThat(alertReturned.getContent().size()).isEqualTo(0);  \n\n    }\n}\n</code></pre>\n<p>However, the delete does not work on our production DB. For it to work on the production DB, we had to add the @Transactional annotation to the method in the repository</p>\n<pre><code>@Transactional\nLong deleteByStatusAndTriggeredBefore(String status, Timestamp triggered);\n</code></pre>\n<p>This is an issue as the test works but it does not work in production. Is it possible to make this test fail when there is a transactional annotation missing? The tests are configured to run on an in-memory H2 database.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10956768,"reputation":384,"user_id":8051287,"display_name":"ltp"},"score":0,"creation_date":1658655851,"post_id":73096814,"comment_id":129100938,"body_markdown":"what class does _onOptionsItemSelected_ codes belong to? Can you show it?","body":"what class does <i>onOptionsItemSelected</i> codes belong to? Can you show it?"},{"owner":{"account_id":25835130,"reputation":3,"user_id":19571652,"display_name":"java296642"},"score":0,"creation_date":1658657467,"post_id":73096814,"comment_id":129101219,"body_markdown":"@ltp onOptionsItemSelected codes belong DetailActivity.java as I said the problem is in the second case when delete an item then it should go from DetailActivity to MainActivity and get the result to (onActivityResult) to update items inside the RecyclerView.","body":"@ltp onOptionsItemSelected codes belong DetailActivity.java as I said the problem is in the second case when delete an item then it should go from DetailActivity to MainActivity and get the result to (onActivityResult) to update items inside the RecyclerView."},{"owner":{"account_id":10956768,"reputation":384,"user_id":8051287,"display_name":"ltp"},"score":0,"creation_date":1658666432,"post_id":73096814,"comment_id":129102795,"body_markdown":"Don&#39;t directly call the methods you put inside your dialog `onClick`. Move them into a single function inside _DetailActivity.java_ instead and then call that function from the dialog.","body":"Don&#39;t directly call the methods you put inside your dialog <code>onClick</code>. Move them into a single function inside <i>DetailActivity.java</i> instead and then call that function from the dialog."},{"owner":{"account_id":10956768,"reputation":384,"user_id":8051287,"display_name":"ltp"},"score":0,"creation_date":1658667045,"post_id":73096814,"comment_id":129102926,"body_markdown":"Great! I also posted the answer for others reference. Please mark correct if it fixed the issues. Thank you.","body":"Great! I also posted the answer for others reference. Please mark correct if it fixed the issues. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":10956768,"reputation":384,"user_id":8051287,"display_name":"ltp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658666940,"creation_date":1658666940,"answer_id":73098536,"question_id":73096814,"body_markdown":"Don&#39;t directly call the methods you put inside your alert dialog button&#39;s onClick. Move them into a single function inside _DetailActivity.java_ instead and then call that function from the alert dialog.\r\n\r\nIn _DetailActivity.java_\r\n\r\n    public void deleteNote(){\r\n       dbHelper.deleteNote(id);\r\n       Toast.makeText(getApplicationContext(), &quot;Note Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n       setResult(RESULT_OK, intent);\r\n       finish();    \r\n    }\r\n\r\nIn your AlertDialog\r\n\r\n    @Override\r\n    public void onClick(DialogInterface dialogInterface, int i) {\r\n         ((DetailActivity)requireActivity()).deleteNote()\r\n         dismiss()                             \r\n    }","title":"How to finish an Activity inside a dialog? I called finish(); and SecondActivity.this.finish(); but they didn&#39;t work","body":"<p>Don't directly call the methods you put inside your alert dialog button's onClick. Move them into a single function inside <em>DetailActivity.java</em> instead and then call that function from the alert dialog.</p>\n<p>In <em>DetailActivity.java</em></p>\n<pre><code>public void deleteNote(){\n   dbHelper.deleteNote(id);\n   Toast.makeText(getApplicationContext(), &quot;Note Deleted&quot;, Toast.LENGTH_SHORT).show();\n   setResult(RESULT_OK, intent);\n   finish();    \n}\n</code></pre>\n<p>In your AlertDialog</p>\n<pre><code>@Override\npublic void onClick(DialogInterface dialogInterface, int i) {\n     ((DetailActivity)requireActivity()).deleteNote()\n     dismiss()                             \n}\n</code></pre>\n"}],"owner":{"account_id":25835130,"reputation":3,"user_id":19571652,"display_name":"java296642"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73098536,"answer_count":1,"score":0,"last_activity_date":1658666940,"creation_date":1658651137,"question_id":73096814,"body_markdown":"In the first case, finish() works properly, but it doesn&#39;t work inside the dialog. \r\nThis code is from second Activity, in the first case when I call finish() it finishes and return back to MainActivity but in the second case inside the dialog when I call `finish();` the app crashes. \r\n\r\nI can do something like\r\n\r\n ` startActivity(new Intent(getBaseContext(), MainActivity.class));`\r\n\r\ninside the dialog, but I don&#39;t want to recreate the activity. I want to call finish(); inside the dialog.\r\n\r\n\r\n     @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n        Intent intent = new Intent();\r\n        String content = etContentDetail.getText().toString();\r\n        int id = getIntent().getIntExtra(&quot;id&quot;,0);\r\n        DbHelper dbHelper = new DbHelper(this);\r\n\r\n        switch (item.getItemId()) {\r\n\r\n            case R.id.update:\r\n\r\n                dbHelper.noteUpdate(id, content, DateTime.date(), DateTime.time(), System.currentTimeMillis());\r\n                setResult(RESULT_OK, intent);\r\n              finish()\r\n              break;\r\n\r\n            case R.id.delete:\r\n\r\n                AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n                builder.setTitle(&quot;Delete Note&quot;);\r\n                builder.setMessage(&quot;Are you sure you want to delete this note?&quot;);\r\n                builder.setPositiveButton(&quot;Continue &quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dbHelper.deleteNote(id);\r\n                        Toast.makeText(getApplicationContext(), &quot;Note Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                        setResult(RESULT_OK, intent);\r\n                        finish();\r\n                    }\r\n                });\r\n                builder.setNegativeButton(&quot;Cancel &quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n\r\n                    }\r\n                }).create().show();\r\n\r\n                break;\r\n        }\r\n            return true;\r\n        }\r\n","title":"How to finish an Activity inside a dialog? I called finish(); and SecondActivity.this.finish(); but they didn&#39;t work","body":"<p>In the first case, finish() works properly, but it doesn't work inside the dialog.\nThis code is from second Activity, in the first case when I call finish() it finishes and return back to MainActivity but in the second case inside the dialog when I call <code>finish();</code> the app crashes.</p>\n<p>I can do something like</p>\n<p><code> startActivity(new Intent(getBaseContext(), MainActivity.class));</code></p>\n<p>inside the dialog, but I don't want to recreate the activity. I want to call finish(); inside the dialog.</p>\n<pre><code> @Override\npublic boolean onOptionsItemSelected(@NonNull MenuItem item) {\n    Intent intent = new Intent();\n    String content = etContentDetail.getText().toString();\n    int id = getIntent().getIntExtra(&quot;id&quot;,0);\n    DbHelper dbHelper = new DbHelper(this);\n\n    switch (item.getItemId()) {\n\n        case R.id.update:\n\n            dbHelper.noteUpdate(id, content, DateTime.date(), DateTime.time(), System.currentTimeMillis());\n            setResult(RESULT_OK, intent);\n          finish()\n          break;\n\n        case R.id.delete:\n\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\n            builder.setTitle(&quot;Delete Note&quot;);\n            builder.setMessage(&quot;Are you sure you want to delete this note?&quot;);\n            builder.setPositiveButton(&quot;Continue &quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dbHelper.deleteNote(id);\n                    Toast.makeText(getApplicationContext(), &quot;Note Deleted&quot;, Toast.LENGTH_SHORT).show();\n                    setResult(RESULT_OK, intent);\n                    finish();\n                }\n            });\n            builder.setNegativeButton(&quot;Cancel &quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n\n                }\n            }).create().show();\n\n            break;\n    }\n        return true;\n    }\n</code></pre>\n"},{"tags":["java","spring","reactive-programming","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1569281984,"creation_date":1569281984,"answer_id":58071348,"question_id":58063807,"body_markdown":"Documentation is pretty clear\r\n\r\n&gt; timeout - the timeout before the onNext signal from **this** Mono\r\n\r\nSo in you example the timeout is only applied to the Mono returned from the last `then`.\r\n\r\n    .then( ... )\r\n    .timeout(3000L)\r\n\r\nthe correct answer is:\r\n\r\n*3) Only for the last operation (nOperation)*\r\n\r\nSince this is last in the chain.\r\n\r\nThere is no timeout for the sum of operations, why would you need that?","title":"What does timeout operator measure exactly for a Mono chain in Reactor and Webflux?","body":"<p>Documentation is pretty clear</p>\n\n<blockquote>\n  <p>timeout - the timeout before the onNext signal from <strong>this</strong> Mono</p>\n</blockquote>\n\n<p>So in you example the timeout is only applied to the Mono returned from the last <code>then</code>.</p>\n\n<pre><code>.then( ... )\n.timeout(3000L)\n</code></pre>\n\n<p>the correct answer is:</p>\n\n<p><em>3) Only for the last operation (nOperation)</em></p>\n\n<p>Since this is last in the chain.</p>\n\n<p>There is no timeout for the sum of operations, why would you need that?</p>\n"},{"tags":[],"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1569403604,"creation_date":1569352318,"answer_id":58086824,"question_id":58063807,"body_markdown":"The timeout operator measures the elapsed time between the time of subscription and the onNext/onComplete signal observed by the timeout operator.\r\n\r\nConsider the following example:\r\n```java\r\nMono.delay(Duration.ofMillis(1000))\r\n    .then(Mono.delay(Duration.ofMillis(1000)))\r\n    .then(Mono.delay(Duration.ofMillis(1000)))\r\n    .timeout(Duration.ofMillis(2500))\r\n    .block();\r\n```\r\nIf statement 2 (time measured between operations) or 3 (only the duration of last operation counts) were correct, then the above piece of code wouldn&#39;t throw any error.\r\n\r\nHowever, the case is that timeout operation measures the duration of everything upstream which makes **statement 1 (sum of all operations measured) CORRECT**.\r\n\r\nIn the example the sum of all operation (1000 + 1000 + 1000 = 3000ms) is bigger than the configured timeout (2500ms), thus the code results in an error.","title":"What does timeout operator measure exactly for a Mono chain in Reactor and Webflux?","body":"<p>The timeout operator measures the elapsed time between the time of subscription and the onNext/onComplete signal observed by the timeout operator.</p>\n\n<p>Consider the following example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Mono.delay(Duration.ofMillis(1000))\n    .then(Mono.delay(Duration.ofMillis(1000)))\n    .then(Mono.delay(Duration.ofMillis(1000)))\n    .timeout(Duration.ofMillis(2500))\n    .block();\n</code></pre>\n\n<p>If statement 2 (time measured between operations) or 3 (only the duration of last operation counts) were correct, then the above piece of code wouldn't throw any error.</p>\n\n<p>However, the case is that timeout operation measures the duration of everything upstream which makes <strong>statement 1 (sum of all operations measured) CORRECT</strong>.</p>\n\n<p>In the example the sum of all operation (1000 + 1000 + 1000 = 3000ms) is bigger than the configured timeout (2500ms), thus the code results in an error.</p>\n"}],"owner":{"account_id":2105451,"reputation":1322,"user_id":1871885,"accept_rate":65,"display_name":"Ermintar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2527,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":58086824,"answer_count":2,"score":3,"last_activity_date":1658666577,"creation_date":1569246021,"question_id":58063807,"body_markdown":"i&#39;m using Spring Webflux and trying to understand the timeout concept for a chain of Monos.\r\n\r\nFor example, there&#39;s a chain of Mono calls:\r\n\r\n\tmyService.firstOperation()\r\n\t.then(myService.secondOperation())\r\n\t...\r\n\t.then(myService.nOperation())\r\n\t.timeout(3000L)\r\n\r\n\r\nHow is timeout going to be applied:\r\n\r\n1) For the operations in general (sum time of operations)\r\n\r\n2) For ech operation (each operation should take no longer than timeout)\r\n\r\n3) Only for the last operation (nOperation)\r\n\r\n?\r\n\r\nI&#39;m almost sure that timeout is applied to the last publisher. If so, how can timeout be applied to to the sum of operations?\r\n","title":"What does timeout operator measure exactly for a Mono chain in Reactor and Webflux?","body":"<p>i'm using Spring Webflux and trying to understand the timeout concept for a chain of Monos.</p>\n\n<p>For example, there's a chain of Mono calls:</p>\n\n<pre><code>myService.firstOperation()\n.then(myService.secondOperation())\n...\n.then(myService.nOperation())\n.timeout(3000L)\n</code></pre>\n\n<p>How is timeout going to be applied:</p>\n\n<p>1) For the operations in general (sum time of operations)</p>\n\n<p>2) For ech operation (each operation should take no longer than timeout)</p>\n\n<p>3) Only for the last operation (nOperation)</p>\n\n<p>?</p>\n\n<p>I'm almost sure that timeout is applied to the last publisher. If so, how can timeout be applied to to the sum of operations?</p>\n"},{"tags":["java","spring-boot","docker","maven"],"answers":[{"tags":[],"owner":{"account_id":3267664,"reputation":1917,"user_id":2751829,"accept_rate":83,"display_name":"D. Caan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658663964,"creation_date":1658663964,"answer_id":73098218,"question_id":73097888,"body_markdown":"The docker-compose file was pointing to the standard Docker image and not the build folder with the dockerfile.\r\n\r\n      mymaven:\r\n        #image: maven (wrong)\r\n        build: mymaven\r\n        depends_on:\r\n         - server1\r\n         - server2\r\n       networks:\r\n         - mynetwork","title":"Maven in Docker Container. Error: No goals have been specified for this build","body":"<p>The docker-compose file was pointing to the standard Docker image and not the build folder with the dockerfile.</p>\n<pre><code>  mymaven:\n    #image: maven (wrong)\n    build: mymaven\n    depends_on:\n     - server1\n     - server2\n   networks:\n     - mynetwork\n</code></pre>\n"}],"owner":{"account_id":3267664,"reputation":1917,"user_id":2751829,"accept_rate":83,"display_name":"D. Caan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":925,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73098218,"answer_count":1,"score":0,"last_activity_date":1658663964,"creation_date":1658661332,"question_id":73097888,"body_markdown":"I am trying to run a Maven + Spring project in a docker file. As a Maven/Spring newbie, I am not sure why the executable doesn&#39;t run in a Docker container. The same build works after I &quot;Clean and Build&quot; in NetBeans IDE and run the java file manually from the IDE.\r\n\r\nThe error I get when trying to run the same in Docker via `docker-compose build` and `docker-compose run` is:\r\n\r\n`No goals have been specified for this build.` \r\n\r\n(Full error below, together with `POM`, `dockerfile` and `docker-compose` file)\r\n\r\nI have copied the built .jar file (myapp-1.0.jar) into the mymaven folder.\r\n\r\nWhat do I need to do to be able to build and run the executable programme in a Docker container?\r\n\r\nAny help here is appreciated :)\r\n\r\n**Dockerfile:**\r\n\r\n    FROM maven:3.6.3 AS maven\r\n    \r\n    WORKDIR /usr/src/app\r\n    COPY . /usr/src/app\r\n    RUN mvn install \r\n    \r\n    FROM adoptopenjdk/openjdk11:alpine-jre\r\n    \r\n    WORKDIR /opt/app\r\n    \r\n    COPY --from=maven mymaven/myapp-1.0.jar /opt/app/\r\n    \r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;myapp-1.0.jar&quot;]\r\n\r\n**docker-compose.yaml:**\r\n\r\n      mymaven:\r\n        image: maven\r\n        depends_on:\r\n          - server1\r\n          - server2\r\n        networks:\r\n          - mynetwork\r\n\r\n**pom.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.1&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.test&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mymaven&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n        &lt;name&gt;myapp&lt;/name&gt;\r\n        &lt;description&gt;My App&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n                 \r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;defaultGoal&gt;install&lt;/defaultGoal&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n**Error:**\r\n\r\n    [INFO] Scanning for projects...\r\n    \r\n    [INFO] ------------------------------------------------------------------------\r\n    \r\n    [INFO] BUILD FAILURE\r\n    \r\n    [INFO] ------------------------------------------------------------------------\r\n    \r\n    [INFO] Total time:  0.051 s\r\n    \r\n    [INFO] Finished at: 2022-07-24T10:58:03Z\r\n    \r\n    [INFO] ------------------------------------------------------------------------\r\n    \r\n    [ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal in the format &lt;plugin-prefix&gt;:&lt;goal&gt; or &lt;plugin-group-id&gt;:&lt;plugin-artifact-id&gt;[:&lt;plugin-version&gt;]:&lt;goal&gt;. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -&gt; [Help 1]","title":"Maven in Docker Container. Error: No goals have been specified for this build","body":"<p>I am trying to run a Maven + Spring project in a docker file. As a Maven/Spring newbie, I am not sure why the executable doesn't run in a Docker container. The same build works after I &quot;Clean and Build&quot; in NetBeans IDE and run the java file manually from the IDE.</p>\n<p>The error I get when trying to run the same in Docker via <code>docker-compose build</code> and <code>docker-compose run</code> is:</p>\n<p><code>No goals have been specified for this build.</code></p>\n<p>(Full error below, together with <code>POM</code>, <code>dockerfile</code> and <code>docker-compose</code> file)</p>\n<p>I have copied the built .jar file (myapp-1.0.jar) into the mymaven folder.</p>\n<p>What do I need to do to be able to build and run the executable programme in a Docker container?</p>\n<p>Any help here is appreciated :)</p>\n<p><strong>Dockerfile:</strong></p>\n<pre><code>FROM maven:3.6.3 AS maven\n\nWORKDIR /usr/src/app\nCOPY . /usr/src/app\nRUN mvn install \n\nFROM adoptopenjdk/openjdk11:alpine-jre\n\nWORKDIR /opt/app\n\nCOPY --from=maven mymaven/myapp-1.0.jar /opt/app/\n\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;myapp-1.0.jar&quot;]\n</code></pre>\n<p><strong>docker-compose.yaml:</strong></p>\n<pre><code>  mymaven:\n    image: maven\n    depends_on:\n      - server1\n      - server2\n    networks:\n      - mynetwork\n</code></pre>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.test&lt;/groupId&gt;\n    &lt;artifactId&gt;mymaven&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;name&gt;myapp&lt;/name&gt;\n    &lt;description&gt;My App&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n             \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;defaultGoal&gt;install&lt;/defaultGoal&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>Error:</strong></p>\n<pre><code>[INFO] Scanning for projects...\n\n[INFO] ------------------------------------------------------------------------\n\n[INFO] BUILD FAILURE\n\n[INFO] ------------------------------------------------------------------------\n\n[INFO] Total time:  0.051 s\n\n[INFO] Finished at: 2022-07-24T10:58:03Z\n\n[INFO] ------------------------------------------------------------------------\n\n[ERROR] No goals have been specified for this build. You must specify a valid lifecycle phase or a goal in the format &lt;plugin-prefix&gt;:&lt;goal&gt; or &lt;plugin-group-id&gt;:&lt;plugin-artifact-id&gt;[:&lt;plugin-version&gt;]:&lt;goal&gt;. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -&gt; [Help 1]\n</code></pre>\n"},{"tags":["java","function","jsp","struts"],"owner":{"account_id":25882378,"reputation":11,"user_id":19611185,"display_name":"simla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658662800,"creation_date":1658662800,"question_id":73098063,"body_markdown":"I am trying for a week that, Scenario: The table Alphabet having 3 values with two columns ID  Alphabet\r\n1      A\r\n2      B\r\n3      C\r\n\r\nThis values are pulling by java code which shows in JSP as Dropdown.\r\nIf user typed 2 in another textbox and submit. Automatically the Alphabet dropdown will select B and visible in dropdown. It should match the user typed value with the Dropdown ID and It should select B automatically in the dropdown.\r\n\r\nJSP\r\n\r\n      &lt;html:text property=&quot;usergivenID&quot; name=&quot;alphaForm&quot;/&gt; &lt;td&gt;\r\n      &lt;html:select property=&quot;alphaId&quot; name=&quot;alphaForm&quot; onchange=&quot;automate();&quot;&gt;\r\n     &lt;html:option value=&#39;&#39;&gt;&lt;bean:message key=&quot;default.dropDownValue&quot;/&gt;&lt;/html:option&gt;\r\n    &lt;html:options collection=&quot;alpList&quot; name=&quot;form&quot; property=&quot;label&quot; labelProperty=&quot;value&quot; /&gt;\r\n     &lt;/html:select&gt;&lt;/td&gt;\r\n        \r\n            function automate(){\r\n        \t    var options = document.forms[0].usergivenID.value;\r\n        \t    var opt=document.forms[0].alphatId.option;\r\n        \t    for (var i = 0; i &lt; options.length; i++) {\r\n        \t      if (options[i].text == document.forms[0].alphaId.option) {\r\n        \t          opt[i].selcted=true;\r\n        \t        break;}\r\n        \t      }\r\n        \t    }\r\n\r\n\r\nEg: If user gives  3 in usergivenID it should compare whit the alphabetID and should select B automatically.The above code I tried but ist not working ","title":"How to automatically select the dropdown which is pulling from the database by using id as an input","body":"<p>I am trying for a week that, Scenario: The table Alphabet having 3 values with two columns ID  Alphabet\n1      A\n2      B\n3      C</p>\n<p>This values are pulling by java code which shows in JSP as Dropdown.\nIf user typed 2 in another textbox and submit. Automatically the Alphabet dropdown will select B and visible in dropdown. It should match the user typed value with the Dropdown ID and It should select B automatically in the dropdown.</p>\n<p>JSP</p>\n<pre><code>  &lt;html:text property=&quot;usergivenID&quot; name=&quot;alphaForm&quot;/&gt; &lt;td&gt;\n  &lt;html:select property=&quot;alphaId&quot; name=&quot;alphaForm&quot; onchange=&quot;automate();&quot;&gt;\n &lt;html:option value=''&gt;&lt;bean:message key=&quot;default.dropDownValue&quot;/&gt;&lt;/html:option&gt;\n&lt;html:options collection=&quot;alpList&quot; name=&quot;form&quot; property=&quot;label&quot; labelProperty=&quot;value&quot; /&gt;\n &lt;/html:select&gt;&lt;/td&gt;\n    \n        function automate(){\n            var options = document.forms[0].usergivenID.value;\n            var opt=document.forms[0].alphatId.option;\n            for (var i = 0; i &lt; options.length; i++) {\n              if (options[i].text == document.forms[0].alphaId.option) {\n                  opt[i].selcted=true;\n                break;}\n              }\n            }\n</code></pre>\n<p>Eg: If user gives  3 in usergivenID it should compare whit the alphabetID and should select B automatically.The above code I tried but ist not working</p>\n"},{"tags":["java","jdbc","database-connection","resultset"],"comments":[{"owner":{"account_id":213468,"reputation":103488,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1658662636,"post_id":73097932,"comment_id":129102066,"body_markdown":"This is driver specific, and a lot of drivers will actually downgrade requests from TYPE_SCROLL_SENSITIVE to TYPE_SCROLL_INSENSITIVE because they don&#39;t support it. JDBC doesn&#39;t have a lot of requirements, just that it can happen, e.g. when the row is fetched again.","body":"This is driver specific, and a lot of drivers will actually downgrade requests from TYPE_SCROLL_SENSITIVE to TYPE_SCROLL_INSENSITIVE because they don&#39;t support it. JDBC doesn&#39;t have a lot of requirements, just that it can happen, e.g. when the row is fetched again."},{"owner":{"account_id":1873750,"reputation":2191,"user_id":1695427,"accept_rate":83,"display_name":"Majid Abdolhosseini"},"score":0,"creation_date":1658663217,"post_id":73097932,"comment_id":129102172,"body_markdown":"@MarkRotteveel thanks for your answer.\n Do you know any database driver which supports this? and if yes how how they implement it ?","body":"@MarkRotteveel thanks for your answer.  Do you know any database driver which supports this? and if yes how how they implement it ?"}],"owner":{"account_id":1873750,"reputation":2191,"user_id":1695427,"accept_rate":83,"display_name":"Majid Abdolhosseini"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658662720,"creation_date":1658661782,"question_id":73097932,"body_markdown":"When we query a database and retrieve a list of records, let&#39;s say we executed this query : ```SELECT * FROM students OFFSET 1 LIMIT 100```. If, while we are working with these items, another thread changes one of these records our resultSet object will get updated automatically? If yes then how? Is Java constantly running queries to retrieve the data and compare? Or does the database notify the change? If it&#39;s notification from database, could you please give me some examples how MySQL and PostgreSQL do this?\r\n\r\nIs it updated if another thread from our Java code updates those records or even if a connection from another source updates it we&#39;ll still get updated?","title":"How does JDBC implement ResultSet.TYPE_SCROLL_SENSITIVE?","body":"<p>When we query a database and retrieve a list of records, let's say we executed this query : <code>SELECT * FROM students OFFSET 1 LIMIT 100</code>. If, while we are working with these items, another thread changes one of these records our resultSet object will get updated automatically? If yes then how? Is Java constantly running queries to retrieve the data and compare? Or does the database notify the change? If it's notification from database, could you please give me some examples how MySQL and PostgreSQL do this?</p>\n<p>Is it updated if another thread from our Java code updates those records or even if a connection from another source updates it we'll still get updated?</p>\n"},{"tags":["java","kotlin","android-recyclerview","android-adapter","android-runtime"],"comments":[{"owner":{"account_id":7058934,"reputation":7802,"user_id":5405086,"accept_rate":87,"display_name":"xinaiz"},"score":0,"creation_date":1658660124,"post_id":73097730,"comment_id":129101630,"body_markdown":"You are trying to access non-existing resource `Resource ID #0xffffffff`. It&#39;s hex representation of value `-1`","body":"You are trying to access non-existing resource <code>Resource ID #0xffffffff</code>. It&#39;s hex representation of value <code>-1</code>"}],"answers":[{"tags":[],"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658661863,"creation_date":1658661863,"answer_id":73097938,"question_id":73097730,"body_markdown":"```logcat\r\njava.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.planetapp/com.example.planetapp.PlanetDetail}: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\r\nCaused by: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\r\n```\r\n\r\nThe error above tells you what is really happening.\r\n\r\nYou are trying to access a &quot;resource&quot; using `findViewById(int id)` when it&#39;s not existing at all.\r\n\r\nI recommend double-checking your code that uses `findViewById(...)` especially the code that intercepts the `onClick(View view)` event.\r\n\r\nFor example if you have an xml element with an ID like this:\r\n\r\n```xml\r\n&lt;... android:id=&quot;@+id/MY_EXCELLENT_ID&quot; ... /&gt;\r\n```\r\n\r\nYou might&#39;ve typed it like this:\r\n\r\n```java\r\nfindViewById(R.id.MY_EXCELLEND_ID);\r\n```","title":"How to get rid of the resource not found exception when clicked on item view on recycler view and instead of data and activity lauch, it crashes app","body":"<pre><code>java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.planetapp/com.example.planetapp.PlanetDetail}: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\nCaused by: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\n</code></pre>\n<p>The error above tells you what is really happening.</p>\n<p>You are trying to access a &quot;resource&quot; using <code>findViewById(int id)</code> when it's not existing at all.</p>\n<p>I recommend double-checking your code that uses <code>findViewById(...)</code> especially the code that intercepts the <code>onClick(View view)</code> event.</p>\n<p>For example if you have an xml element with an ID like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;... android:id=&quot;@+id/MY_EXCELLENT_ID&quot; ... /&gt;\n</code></pre>\n<p>You might've typed it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>findViewById(R.id.MY_EXCELLEND_ID);\n</code></pre>\n"}],"owner":{"account_id":24991189,"reputation":1,"user_id":18852354,"display_name":"Catch The Code"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658661863,"creation_date":1658659830,"question_id":73097730,"body_markdown":"I have built an app to learn the use of adapter and recycler view.\r\nIt contains a recycler view and adapter, it uses data class to show data on clicked to an item  of the recycler view, but the app crashes on runtime whenever I click on an item of the recycler view and showing **java resources not found exception**, could any one please help me out from this because I am a newbie to learning and debugging this\r\n\r\n\r\n\r\n```2022-07-24 16:00:14.899 11460-11460/com.example.planetapp E/ample.planetap: [qarth_debug:]  get PatchStore::createDisableExceptionQarthFile method fail.\r\n2022-07-24 16:00:14.903 11460-11460/com.example.planetapp E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.planetapp, PID: 11460\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.planetapp/com.example.planetapp.PlanetDetail}: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3614)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:86)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2199)\r\n        at android.os.Handler.dispatchMessage(Handler.java:112)\r\n        at android.os.Looper.loop(Looper.java:216)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7625)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:524)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:987)\r\n     Caused by: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\r\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:292)\r\n        at android.content.res.Resources.getValue(Resources.java:1540)\r\n        at androidx.appcompat.widget.ResourceManagerInternal.createDrawableIfNeeded(ResourceManagerInternal.java:180)\r\n        at androidx.appcompat.widget.ResourceManagerInternal.getDrawable(ResourceManagerInternal.java:145)\r\n        at androidx.appcompat.widget.ResourceManagerInternal.getDrawable(ResourceManagerInternal.java:136)\r\n        at androidx.appcompat.content.res.AppCompatResources.getDrawable(AppCompatResources.java:66)\r\n        at androidx.appcompat.widget.AppCompatImageHelper.setImageResource(AppCompatImageHelper.java:91)\r\n        at androidx.appcompat.widget.AppCompatImageView.setImageResource(AppCompatImageView.java:102)\r\n        at com.example.planetapp.PlanetDetail.setData(PlanetDetail.kt:37)\r\n        at com.example.planetapp.PlanetDetail.onCreate(PlanetDetail.kt:20)\r\n        at android.app.Activity.performCreate(Activity.java:7458)\r\n        at android.app.Activity.performCreate(Activity.java:7448)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1286)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3409)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3614)&#160;\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:86)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2199)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:112)&#160;\r\n        at android.os.Looper.loop(Looper.java:216)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:7625)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:524)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:987)```","title":"How to get rid of the resource not found exception when clicked on item view on recycler view and instead of data and activity lauch, it crashes app","body":"<p>I have built an app to learn the use of adapter and recycler view.\nIt contains a recycler view and adapter, it uses data class to show data on clicked to an item  of the recycler view, but the app crashes on runtime whenever I click on an item of the recycler view and showing <strong>java resources not found exception</strong>, could any one please help me out from this because I am a newbie to learning and debugging this</p>\n<pre><code>2022-07-24 16:00:14.903 11460-11460/com.example.planetapp E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.planetapp, PID: 11460\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.planetapp/com.example.planetapp.PlanetDetail}: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3430)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3614)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:86)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2199)\n        at android.os.Handler.dispatchMessage(Handler.java:112)\n        at android.os.Looper.loop(Looper.java:216)\n        at android.app.ActivityThread.main(ActivityThread.java:7625)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:524)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:987)\n     Caused by: android.content.res.Resources$NotFoundException: Resource ID #0xffffffff\n        at android.content.res.ResourcesImpl.getValue(ResourcesImpl.java:292)\n        at android.content.res.Resources.getValue(Resources.java:1540)\n        at androidx.appcompat.widget.ResourceManagerInternal.createDrawableIfNeeded(ResourceManagerInternal.java:180)\n        at androidx.appcompat.widget.ResourceManagerInternal.getDrawable(ResourceManagerInternal.java:145)\n        at androidx.appcompat.widget.ResourceManagerInternal.getDrawable(ResourceManagerInternal.java:136)\n        at androidx.appcompat.content.res.AppCompatResources.getDrawable(AppCompatResources.java:66)\n        at androidx.appcompat.widget.AppCompatImageHelper.setImageResource(AppCompatImageHelper.java:91)\n        at androidx.appcompat.widget.AppCompatImageView.setImageResource(AppCompatImageView.java:102)\n        at com.example.planetapp.PlanetDetail.setData(PlanetDetail.kt:37)\n        at com.example.planetapp.PlanetDetail.onCreate(PlanetDetail.kt:20)\n        at android.app.Activity.performCreate(Activity.java:7458)\n        at android.app.Activity.performCreate(Activity.java:7448)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1286)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3409)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3614)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:86)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2199)\n        at android.os.Handler.dispatchMessage(Handler.java:112)\n        at android.os.Looper.loop(Looper.java:216)\n        at android.app.ActivityThread.main(ActivityThread.java:7625)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:524)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:987)```\n</code></pre>\n"},{"tags":["java","arrays","printwriter"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1658661931,"post_id":73059783,"comment_id":129101957,"body_markdown":"You seem to be making it a lot more complicated than it needs to be. Do you simply have to generate ten random `double`s and print them? I copied and ran the code in your question (after fixing the compilation error) and it simply printed the exact same number several times. Do you think that is your problem?","body":"You seem to be making it a lot more complicated than it needs to be. Do you simply have to generate ten random <code>double</code>s and print them? I copied and ran the code in your question (after fixing the compilation error) and it simply printed the exact same number several times. Do you think that is your problem?"}],"answers":[{"tags":[],"owner":{"account_id":17092302,"reputation":9084,"user_id":12368154,"display_name":"Charchit Kapoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658660966,"creation_date":1658660495,"answer_id":73097795,"question_id":73059783,"body_markdown":"You are creating `PrintWriter` like this \r\n\r\n    PrintWriter writer  = new PrintWriter(System.out);\r\n\r\nThe variable is named `writer`, but you use it like this:\r\n\r\n    printr.print(arr[i]);\r\n\r\nUsing `printr` variable which doesn&#39;t exist. Do simply:\r\n    \r\n    writer.print(arr[i]);\r\n\r\nAlso, you need `PrintStream` acts as a buffer, so you will have to flush it&#39;s contents so that they are written to the output stream.\r\n\r\n    /*\r\n     * To change this license header, choose License Headers in Project Properties.\r\n     * To change this template file, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    \r\n    import java.io.PrintWriter;\r\n    import java.io.FileNotFoundException;\r\n    import java.util.Random;\r\n    \r\n    /**\r\n     * @author matthew.neesley\r\n     */\r\n    public class Assign6Array {\r\n    \r\n      /**\r\n       * @param args the command line arguments\r\n       * @throws java.io.FileNotFoundException\r\n       */\r\n      public static void main(String[] args) throws FileNotFoundException {\r\n        // TODO code application logic here\r\n        int[] array = new int[10];\r\n        int count = 0;\r\n        int numbers = 0;\r\n    \r\n        Random rd = new Random(); // creating Random object\r\n        double[] arr = new double[10];\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n          arr[i] = rd.nextInt(); // storing random integers in an array\r\n    \r\n          PrintWriter writer = new PrintWriter(System.out);\r\n          while (numbers != -1 &amp;&amp; count &lt;= 9) {\r\n            array[count] = numbers;\r\n            count++;\r\n            System.out.println(&quot;abc &quot; + arr[i]); // printing each array element\r\n            writer.println(arr[i]);\r\n            writer.flush();\r\n          }\r\n          writer.close();\r\n        }\r\n      }\r\n    }","title":"need assistance with writing random array values to a file in Java","body":"<p>You are creating <code>PrintWriter</code> like this</p>\n<pre><code>PrintWriter writer  = new PrintWriter(System.out);\n</code></pre>\n<p>The variable is named <code>writer</code>, but you use it like this:</p>\n<pre><code>printr.print(arr[i]);\n</code></pre>\n<p>Using <code>printr</code> variable which doesn't exist. Do simply:</p>\n<pre><code>writer.print(arr[i]);\n</code></pre>\n<p>Also, you need <code>PrintStream</code> acts as a buffer, so you will have to flush it's contents so that they are written to the output stream.</p>\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\n\nimport java.io.PrintWriter;\nimport java.io.FileNotFoundException;\nimport java.util.Random;\n\n/**\n * @author matthew.neesley\n */\npublic class Assign6Array {\n\n  /**\n   * @param args the command line arguments\n   * @throws java.io.FileNotFoundException\n   */\n  public static void main(String[] args) throws FileNotFoundException {\n    // TODO code application logic here\n    int[] array = new int[10];\n    int count = 0;\n    int numbers = 0;\n\n    Random rd = new Random(); // creating Random object\n    double[] arr = new double[10];\n    for (int i = 0; i &lt; array.length; i++) {\n      arr[i] = rd.nextInt(); // storing random integers in an array\n\n      PrintWriter writer = new PrintWriter(System.out);\n      while (numbers != -1 &amp;&amp; count &lt;= 9) {\n        array[count] = numbers;\n        count++;\n        System.out.println(&quot;abc &quot; + arr[i]); // printing each array element\n        writer.println(arr[i]);\n        writer.flush();\n      }\n      writer.close();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":25858041,"reputation":21,"user_id":19590964,"display_name":"Matthew Neesley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1658661151,"creation_date":1658367830,"question_id":73059783,"body_markdown":"I am struggling with a beginning Java class.  I have to modify a program to replace a user-generated integer array with a `Random()` number generated double precision floating point array.\r\n\r\nThis is what I have so far.  I think it is generating the correct dataset, but I can&#39;t get the `PrintWriter` section configured correctly.\r\n```java\r\n/*\r\n * To change this license header, choose License Headers in Project Properties.\r\n * To change this template file, choose Tools | Templates\r\n * and open the template in the editor.\r\n */\r\npackage assign6array;\r\nimport java.io.PrintWriter;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.Random;\r\n/**\r\n *\r\n * @author matthew.neesley\r\n */\r\npublic class Assign6Array {\r\n    /**\r\n     * @param args the command line arguments\r\n     * @throws java.io.FileNotFoundException\r\n     */\r\n    public static void main(String[] args) throws FileNotFoundException {\r\n        // TODO code application logic here\r\n        int[] array = new int[10];\r\n        int count = 0;\r\n        int numbers = 0;\r\n        Random rd = new Random(); // creating Random object\r\n        double[] arr = new double[10];\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            arr[i] = rd.nextInt(); // storing random integers in an array\r\n            while (numbers!= -1 &amp;&amp; count &lt;= 9)\r\n            {\r\n                array[count] = numbers;\r\n                count++;\r\n                System.out.println(arr[i]); // printing each array element\r\n                PrintWriter writer  = new PrintWriter(System.out);\r\n                printr.print(arr[i]);\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"need assistance with writing random array values to a file in Java","body":"<p>I am struggling with a beginning Java class.  I have to modify a program to replace a user-generated integer array with a <code>Random()</code> number generated double precision floating point array.</p>\n<p>This is what I have so far.  I think it is generating the correct dataset, but I can't get the <code>PrintWriter</code> section configured correctly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\npackage assign6array;\nimport java.io.PrintWriter;\nimport java.io.FileNotFoundException;\nimport java.util.Random;\n/**\n *\n * @author matthew.neesley\n */\npublic class Assign6Array {\n    /**\n     * @param args the command line arguments\n     * @throws java.io.FileNotFoundException\n     */\n    public static void main(String[] args) throws FileNotFoundException {\n        // TODO code application logic here\n        int[] array = new int[10];\n        int count = 0;\n        int numbers = 0;\n        Random rd = new Random(); // creating Random object\n        double[] arr = new double[10];\n        for (int i = 0; i &lt; array.length; i++) {\n            arr[i] = rd.nextInt(); // storing random integers in an array\n            while (numbers!= -1 &amp;&amp; count &lt;= 9)\n            {\n                array[count] = numbers;\n                count++;\n                System.out.println(arr[i]); // printing each array element\n                PrintWriter writer  = new PrintWriter(System.out);\n                printr.print(arr[i]);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":437987,"reputation":3973,"user_id":825968,"accept_rate":77,"display_name":"AndrasCsanyi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658659267,"creation_date":1658659267,"answer_id":73097660,"question_id":73096524,"body_markdown":"I made  multiple mistakes:\r\n\r\n - the main class should be a top class. In my case it was `com.encyclopediagalactica.sourceformats.application` which isn&#39;t the recommended --&gt; changed to `com.encyclopediagalactica.sourceformats`\r\n - when I run tests I need to include `install` too\r\n - IntelliJ sometimes not in sync with reality, many times I got compilation error from maven, but IntelliJ displayed no error. Removing `~/.m2/repository` and invalidating IntelliJ&#39;s cache helped\r\n - `@DataJpaTest` uses `TestEntityManager` which for some reason throws `javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist` making impossible to use seeding the database. Anyway, I generally use the repository own methods to seed the tables with data\r\n - in tests, it seems, only `@AutoWired` is accepted. Constructor injection causes error. I don&#39;t like it, but it seems it is a package Spring gives you... :S\r\n\r\nNow the application starts and serves the requests. Tests also running and they are green.\r\n","title":"Why Spring does not find my Bean when I use multi-module maven project?","body":"<p>I made  multiple mistakes:</p>\n<ul>\n<li>the main class should be a top class. In my case it was <code>com.encyclopediagalactica.sourceformats.application</code> which isn't the recommended --&gt; changed to <code>com.encyclopediagalactica.sourceformats</code></li>\n<li>when I run tests I need to include <code>install</code> too</li>\n<li>IntelliJ sometimes not in sync with reality, many times I got compilation error from maven, but IntelliJ displayed no error. Removing <code>~/.m2/repository</code> and invalidating IntelliJ's cache helped</li>\n<li><code>@DataJpaTest</code> uses <code>TestEntityManager</code> which for some reason throws <code>javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist</code> making impossible to use seeding the database. Anyway, I generally use the repository own methods to seed the tables with data</li>\n<li>in tests, it seems, only <code>@AutoWired</code> is accepted. Constructor injection causes error. I don't like it, but it seems it is a package Spring gives you... :S</li>\n</ul>\n<p>Now the application starts and serves the requests. Tests also running and they are green.</p>\n"}],"owner":{"account_id":437987,"reputation":3973,"user_id":825968,"accept_rate":77,"display_name":"AndrasCsanyi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1755,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1658659267,"creation_date":1658647796,"question_id":73096524,"body_markdown":"I have my project where `repository` and its tests - `repository.tests` are in separate modules. I like organising my project this way. The problem is that when I try to run tests Spring says there is no such bean. Detailed error message below. I don&#39;t get what dark magic Spring does here and why it run out of mana.\r\n\r\n&gt; [ERROR] shouldReturnAll  Time elapsed: 0.009 s  &lt;&lt;&lt; ERROR!\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests&#39;:\r\n&gt; Unsatisfied dependency expressed through field &#39;repository&#39;; nested\r\n&gt; exception is\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n&gt; Caused by:\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n\r\nWhat I tried so far:\r\n- putting the test class and the repository classes in the same package (however, they put into their place in the directory structure. Tests go to `src/test/java` while repository goes `src/main/java`) --&gt; the same error message\r\n- put repository test into the same module where the repository is --&gt; it causes circular dependencies due to that `application` project should be included (it might indicates a problem, but still can&#39;t wrap my head around)\r\n- I did my best to read through the relevant docs, but Spring&#39;s docs a bit messy for me still, and possibly I haven&#39;t found that half sentence I need... :S\r\n- I added `@Repository` annotation to the repository interface, but the error message hasn&#39;t changed\r\n- I took a good sleep --&gt; I still don&#39;t have any idea what is wrong here :) \r\n\r\nProject structure looks like below, and the problematic part is the `repositories` and `repository.tests`\r\n\r\n```\r\ncom.encyclopedia-galactica.sourceformats:application\r\n+- com.encyclopeia-galactica.sourceformats:entities\r\n+- com.encyclopeia-galactica.sourceformats:entities.tests\r\n+- com.encyclopeia-galactica.sourceformats:dtos\r\n+- com.encyclopeia-galactica.sourceformats:dtos.tests\r\n+- com.encyclopeia-galactica.sourceformats:mappers.interfaces\r\n+- com.encyclopeia-galactica.sourceformats:mappers.implementations\r\n+- com.encyclopeia-galactica.sourceformats:mappers.tests\r\n+- com.encyclopeia-galactica.sourceformats:controllers\r\n+- com.encyclopeia-galactica.sourceformats:controllers.tests\r\n+- com.encyclopeia-galactica.sourceformats:repositories\r\n+- com.encyclopeia-galactica.sourceformats:repositories.tests\r\n+- com.encyclopeia-galactica.sourceformats:services\r\n+- com.encyclopeia-galactica.sourceformats:services.tests\r\n```\r\n\r\npom.xml of `repositories`:\r\n\r\n``` lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\r\n    &lt;artifactId&gt;repositories&lt;/artifactId&gt;\r\n    &lt;name&gt;repositories&lt;/name&gt;\r\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\r\n            &lt;artifactId&gt;entities&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\npom.xml of `repositories.tests`:\r\n\r\n``` lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\r\n    &lt;artifactId&gt;repositories.tests&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\r\n            &lt;artifactId&gt;entities&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\r\n            &lt;artifactId&gt;repositories&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.encyclopedia-galactica.sourceformats&lt;/groupId&gt;\r\n            &lt;artifactId&gt;application&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nTest class (it is placed in `src/test/java`, but package name is the same as the repository class:\r\n``` lang-java\r\npackage com.encyclopediagalactica.sourceformats.repositories.sourceformat;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\nimport java.util.List;\r\nimport com.encyclopediagalactica.sourceformats.entities.SourceFormat;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\r\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\r\nimport org.springframework.test.context.ContextConfiguration;\r\n\r\n@DataJpaTest\r\n@ContextConfiguration(\r\n    classes = com.encyclopediagalactica.sourceformats.application.SourceFormatServiceApplication.class)\r\npublic class FindAllTests {\r\n\r\n  @Autowired\r\n  private TestEntityManager testEntityManager;\r\n\r\n  @Autowired\r\n  private SourceFormatRepository repository;\r\n\r\n  public FindAllTests() {\r\n  }\r\n\r\n  @Test\r\n  public void shouldReturnAll() {\r\n\r\n    // Arrange\r\n    SourceFormat sf1 = new SourceFormat(100L, &quot;asd&quot;);\r\n    SourceFormat sf2 = new SourceFormat(200L, &quot;asd2&quot;);\r\n    this.testEntityManager.persist(sf1);\r\n    this.testEntityManager.persist(sf2);\r\n\r\n    // Act \r\n    List&lt;SourceFormat&gt; sourceFormats = (List&lt;SourceFormat&gt;) this.repository.findAll();\r\n\r\n    // Assert\r\n    assertThat(sourceFormats.size()).isEqualTo(2);\r\n  }\r\n\r\n}\r\n```\r\n\r\nRepository base:\r\n``` lang-java\r\npackage com.encyclopediagalactica.sourceformats.repositories.sourceformat;\r\n\r\nimport org.springframework.data.repository.NoRepositoryBean;\r\nimport org.springframework.data.repository.PagingAndSortingRepository;\r\n\r\n@NoRepositoryBean\r\npublic interface SourceFormatBaseRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt; {\r\n  &lt;S extends T&gt; S save(S entity);\r\n\r\n  Iterable&lt;T&gt; findAll();\r\n}\r\n```\r\n\r\nRepository:\r\n``` lang-java\r\npackage com.encyclopediagalactica.sourceformats.repositories.sourceformat;\r\n\r\nimport com.encyclopediagalactica.sourceformats.entities.SourceFormat;\r\n\r\npublic interface SourceFormatRepository extends SourceFormatBaseRepository&lt;SourceFormat, Long&gt; {\r\n}\r\n```\r\n\r\nError message: (sorry for the formatting, it seems SO changed something in the blockquote since it doesn&#39;t show the content using monospace fonts)\r\n\r\n&gt; [INFO] Changes detected - recompiling the module! [INFO] Compiling 1\r\n&gt; source file to\r\n&gt; /Users/andrascsanyi/Dev/github.com/EncyclopediaGalactica/EG/repositories.tests/target/test-classes\r\n&gt; [INFO] [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @\r\n&gt; repositories.tests --- [INFO] [INFO]\r\n&gt; ------------------------------------------------------- [INFO]  T E S T S [INFO] -------------------------------------------------------\r\n&gt; [INFO] Running\r\n&gt; com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests\r\n&gt; 09:05:31.009 [main] DEBUG\r\n&gt;   .   ____          _            __ _ _  /\\\\ / ___&#39;_ __ _ _(_)_ __  __\r\n&gt; _ \\ \\ \\ \\ ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )   &#39;  |____| .__|_| |_|_| |_\\__, | / / / / \r\n&gt; =========|_|==============|___/=/_/_/_/  :: Spring Boot ::                (v2.7.1)\r\n&gt; \r\n&gt; 2022-07-24 09:05:31.864  INFO 43466 --- [           main]\r\n&gt; c.e.s.r.sourceformat.FindAllTests        : Starting FindAllTests using\r\n&gt; Java 18.0.2 on Andrass-MacBook-Pro.local with PID 43466 (started by\r\n&gt; andrascsanyi in\r\n&gt; /Users/andrascsanyi/Dev/github.com/EncyclopediaGalactica/EG/repositories.tests)\r\n&gt; 2022-07-24 09:05:31.865  INFO 43466 --- [           main]\r\n&gt; c.e.s.r.sourceformat.FindAllTests        : No active profile set,\r\n&gt; falling back to 1 default profile: &quot;default&quot; 2022-07-24 09:05:32.383 \r\n&gt; INFO 43466 --- [           main]\r\n&gt; .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data\r\n&gt; JPA repositories in DEFAULT mode. 2022-07-24 09:05:32.400  INFO 43466\r\n&gt; --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JPA\r\n&gt; repository interfaces. 2022-07-24 09:05:32.481  INFO 43466 --- [      \r\n&gt; main] beddedDataSourceBeanFactoryPostProcessor : Replacing\r\n&gt; &#39;dataSource&#39; DataSource bean with embedded version 2022-07-24\r\n&gt; 09:05:32.757  INFO 43466 --- [           main]\r\n&gt; o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database:\r\n&gt; url=&#39;jdbc:h2:mem:a66d2659-af0d-4752-b47b-5d96c1968039;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false&#39;,\r\n&gt; username=&#39;sa&#39; 2022-07-24 09:05:33.331  INFO 43466 --- [          \r\n&gt; main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing\r\n&gt; PersistenceUnitInfo [name: default] 2022-07-24 09:05:33.414  INFO\r\n&gt; 43466 --- [           main] org.hibernate.Version                    :\r\n&gt; HHH000412: Hibernate ORM core version 5.6.9.Final 2022-07-24\r\n&gt; 09:05:33.711  INFO 43466 --- [           main]\r\n&gt; o.hibernate.annotations.common.Version   : HCANN000001: Hibernate\r\n&gt; Commons Annotations {5.1.2.Final} 2022-07-24 09:05:33.900  INFO 43466\r\n&gt; --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect 2022-07-24\r\n&gt; 09:05:34.211  INFO 43466 --- [           main]\r\n&gt; o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using\r\n&gt; JtaPlatform implementation:\r\n&gt; [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n&gt; 2022-07-24 09:05:34.224  INFO 43466 --- [           main]\r\n&gt; j.LocalContainerEntityManagerFactoryBean : Initialized JPA\r\n&gt; EntityManagerFactory for persistence unit &#39;default&#39; 2022-07-24\r\n&gt; 09:05:34.408  INFO 43466 --- [           main]\r\n&gt; c.e.s.r.sourceformat.FindAllTests        : Started FindAllTests in\r\n&gt; 2.997 seconds (JVM running for 4.157)\r\n&gt; \r\n&gt; \r\n&gt; \r\n&gt; ============================ CONDITIONS EVALUATION REPORT\r\n&gt; ============================\r\n&gt; \r\n&gt; 2022-07-24 09:05:34.432 ERROR 43466 --- [           main]\r\n&gt; o.s.test.context.TestContextManager      : Caught exception while\r\n&gt; allowing TestExecutionListener\r\n&gt; [org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@c430e6c]\r\n&gt; to prepare test instance\r\n&gt; [com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests@6f43c82]\r\n&gt; \r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests&#39;:\r\n&gt; Unsatisfied dependency expressed through field &#39;repository&#39;; nested\r\n&gt; exception is\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n&gt;         at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:417)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:119)\r\n&gt; ~[spring-test-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n&gt; ~[spring-test-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\r\n&gt; ~[spring-boot-test-autoconfigure-2.7.1.jar:2.7.1]\r\n&gt;         at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n&gt; ~[spring-test-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n&gt; ~[spring-test-5.3.21.jar:5.3.21]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n&gt; ~[na:na]\r\n&gt;         at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n&gt; ~[na:na]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\r\n&gt;         at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\r\n&gt; ~[junit-jupiter-engine-5.8.2.jar:5.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n&gt; ~[junit-platform-engine-1.8.2.jar:1.8.2]\r\n&gt;         at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\r\n&gt; ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n&gt;         at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\r\n&gt; ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n&gt;         at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\r\n&gt; ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n&gt;         at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\r\n&gt; ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n&gt;         at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\r\n&gt; ~[junit-platform-launcher-1.3.1.jar:1.3.1]\r\n&gt;         at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)\r\n&gt; ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n&gt;         at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)\r\n&gt; ~[surefire-junit-platform-2.22.2.jar:2.22.2]\r\n&gt;         at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\r\n&gt; ~[surefire-booter-2.22.2.jar:2.22.2]\r\n&gt;         at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\r\n&gt; ~[surefire-booter-2.22.2.jar:2.22.2]\r\n&gt;         at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\r\n&gt; ~[surefire-booter-2.22.2.jar:2.22.2]\r\n&gt;         at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\r\n&gt; ~[surefire-booter-2.22.2.jar:2.22.2] Caused by:\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n&gt;         at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\r\n&gt; ~[spring-beans-5.3.21.jar:5.3.21]\r\n&gt;         ... 72 common frames omitted\r\n&gt; \r\n&gt; [ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time\r\n&gt; elapsed: 3.564 s &lt;&lt;&lt; FAILURE! - in\r\n&gt; com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests\r\n&gt; [ERROR] shouldReturnAll  Time elapsed: 0.009 s  &lt;&lt;&lt; ERROR!\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests&#39;:\r\n&gt; Unsatisfied dependency expressed through field &#39;repository&#39;; nested\r\n&gt; exception is\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n&gt; Caused by:\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations:\r\n&gt; {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n&gt; \r\n","title":"Why Spring does not find my Bean when I use multi-module maven project?","body":"<p>I have my project where <code>repository</code> and its tests - <code>repository.tests</code> are in separate modules. I like organising my project this way. The problem is that when I try to run tests Spring says there is no such bean. Detailed error message below. I don't get what dark magic Spring does here and why it run out of mana.</p>\n<blockquote>\n<p>[ERROR] shouldReturnAll  Time elapsed: 0.009 s  &lt;&lt;&lt; ERROR!\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests':\nUnsatisfied dependency expressed through field 'repository'; nested\nexception is\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}\nCaused by:\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p>What I tried so far:</p>\n<ul>\n<li>putting the test class and the repository classes in the same package (however, they put into their place in the directory structure. Tests go to <code>src/test/java</code> while repository goes <code>src/main/java</code>) --&gt; the same error message</li>\n<li>put repository test into the same module where the repository is --&gt; it causes circular dependencies due to that <code>application</code> project should be included (it might indicates a problem, but still can't wrap my head around)</li>\n<li>I did my best to read through the relevant docs, but Spring's docs a bit messy for me still, and possibly I haven't found that half sentence I need... :S</li>\n<li>I added <code>@Repository</code> annotation to the repository interface, but the error message hasn't changed</li>\n<li>I took a good sleep --&gt; I still don't have any idea what is wrong here :)</li>\n</ul>\n<p>Project structure looks like below, and the problematic part is the <code>repositories</code> and <code>repository.tests</code></p>\n<pre><code>com.encyclopedia-galactica.sourceformats:application\n+- com.encyclopeia-galactica.sourceformats:entities\n+- com.encyclopeia-galactica.sourceformats:entities.tests\n+- com.encyclopeia-galactica.sourceformats:dtos\n+- com.encyclopeia-galactica.sourceformats:dtos.tests\n+- com.encyclopeia-galactica.sourceformats:mappers.interfaces\n+- com.encyclopeia-galactica.sourceformats:mappers.implementations\n+- com.encyclopeia-galactica.sourceformats:mappers.tests\n+- com.encyclopeia-galactica.sourceformats:controllers\n+- com.encyclopeia-galactica.sourceformats:controllers.tests\n+- com.encyclopeia-galactica.sourceformats:repositories\n+- com.encyclopeia-galactica.sourceformats:repositories.tests\n+- com.encyclopeia-galactica.sourceformats:services\n+- com.encyclopeia-galactica.sourceformats:services.tests\n</code></pre>\n<p>pom.xml of <code>repositories</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\n    &lt;artifactId&gt;repositories&lt;/artifactId&gt;\n    &lt;name&gt;repositories&lt;/name&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\n            &lt;artifactId&gt;entities&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>pom.xml of <code>repositories.tests</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\n    &lt;artifactId&gt;repositories.tests&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n            &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\n            &lt;artifactId&gt;entities&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.encyclopeia-galactica.sourceformats&lt;/groupId&gt;\n            &lt;artifactId&gt;repositories&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.encyclopedia-galactica.sourceformats&lt;/groupId&gt;\n            &lt;artifactId&gt;application&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Test class (it is placed in <code>src/test/java</code>, but package name is the same as the repository class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.encyclopediagalactica.sourceformats.repositories.sourceformat;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\nimport java.util.List;\nimport com.encyclopediagalactica.sourceformats.entities.SourceFormat;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport org.springframework.test.context.ContextConfiguration;\n\n@DataJpaTest\n@ContextConfiguration(\n    classes = com.encyclopediagalactica.sourceformats.application.SourceFormatServiceApplication.class)\npublic class FindAllTests {\n\n  @Autowired\n  private TestEntityManager testEntityManager;\n\n  @Autowired\n  private SourceFormatRepository repository;\n\n  public FindAllTests() {\n  }\n\n  @Test\n  public void shouldReturnAll() {\n\n    // Arrange\n    SourceFormat sf1 = new SourceFormat(100L, &quot;asd&quot;);\n    SourceFormat sf2 = new SourceFormat(200L, &quot;asd2&quot;);\n    this.testEntityManager.persist(sf1);\n    this.testEntityManager.persist(sf2);\n\n    // Act \n    List&lt;SourceFormat&gt; sourceFormats = (List&lt;SourceFormat&gt;) this.repository.findAll();\n\n    // Assert\n    assertThat(sourceFormats.size()).isEqualTo(2);\n  }\n\n}\n</code></pre>\n<p>Repository base:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.encyclopediagalactica.sourceformats.repositories.sourceformat;\n\nimport org.springframework.data.repository.NoRepositoryBean;\nimport org.springframework.data.repository.PagingAndSortingRepository;\n\n@NoRepositoryBean\npublic interface SourceFormatBaseRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt; {\n  &lt;S extends T&gt; S save(S entity);\n\n  Iterable&lt;T&gt; findAll();\n}\n</code></pre>\n<p>Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.encyclopediagalactica.sourceformats.repositories.sourceformat;\n\nimport com.encyclopediagalactica.sourceformats.entities.SourceFormat;\n\npublic interface SourceFormatRepository extends SourceFormatBaseRepository&lt;SourceFormat, Long&gt; {\n}\n</code></pre>\n<p>Error message: (sorry for the formatting, it seems SO changed something in the blockquote since it doesn't show the content using monospace fonts)</p>\n<blockquote>\n<p>[INFO] Changes detected - recompiling the module! [INFO] Compiling 1\nsource file to\n/Users/andrascsanyi/Dev/github.com/EncyclopediaGalactica/EG/repositories.tests/target/test-classes\n[INFO] [INFO] --- maven-surefire-plugin:2.22.2:test (default-test) @\nrepositories.tests --- [INFO] [INFO]\n------------------------------------------------------- [INFO]  T E S T S [INFO] -------------------------------------------------------\n[INFO] Running\ncom.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests\n09:05:31.009 [main] DEBUG\n.   ____          _            __ _ _  /\\ / <em><em><em>'</em> __ _ <em>(</em>)</em> __  __\n_ \\ \\ \\ \\ ( ( )_</em>_ | '_ | '<em>| | '</em> / <em>` | \\ \\ \\ \\  \\/  __<em>)| |</em>)| | | | | || (</em>| |  ) ) ) )   '  |<strong><em><em>| .__|</em>| |</em>|<em>| |</em>_<em>, | / / / /\n=========|</em>|==============|</strong><em>/=/</em>/<em>/</em>/  :: Spring Boot ::                (v2.7.1)</p>\n<p>2022-07-24 09:05:31.864  INFO 43466 --- [           main]\nc.e.s.r.sourceformat.FindAllTests        : Starting FindAllTests using\nJava 18.0.2 on Andrass-MacBook-Pro.local with PID 43466 (started by\nandrascsanyi in\n/Users/andrascsanyi/Dev/github.com/EncyclopediaGalactica/EG/repositories.tests)\n2022-07-24 09:05:31.865  INFO 43466 --- [           main]\nc.e.s.r.sourceformat.FindAllTests        : No active profile set,\nfalling back to 1 default profile: &quot;default&quot; 2022-07-24 09:05:32.383\nINFO 43466 --- [           main]\n.s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data\nJPA repositories in DEFAULT mode. 2022-07-24 09:05:32.400  INFO 43466\n--- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JPA\nrepository interfaces. 2022-07-24 09:05:32.481  INFO 43466 --- [<br />\nmain] beddedDataSourceBeanFactoryPostProcessor : Replacing\n'dataSource' DataSource bean with embedded version 2022-07-24\n09:05:32.757  INFO 43466 --- [           main]\no.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database:\nurl='jdbc:h2:mem:a66d2659-af0d-4752-b47b-5d96c1968039;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false',\nusername='sa' 2022-07-24 09:05:33.331  INFO 43466 --- [<br />\nmain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing\nPersistenceUnitInfo [name: default] 2022-07-24 09:05:33.414  INFO\n43466 --- [           main] org.hibernate.Version                    :\nHHH000412: Hibernate ORM core version 5.6.9.Final 2022-07-24\n09:05:33.711  INFO 43466 --- [           main]\no.hibernate.annotations.common.Version   : HCANN000001: Hibernate\nCommons Annotations {5.1.2.Final} 2022-07-24 09:05:33.900  INFO 43466\n--- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect 2022-07-24\n09:05:34.211  INFO 43466 --- [           main]\no.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using\nJtaPlatform implementation:\n[org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2022-07-24 09:05:34.224  INFO 43466 --- [           main]\nj.LocalContainerEntityManagerFactoryBean : Initialized JPA\nEntityManagerFactory for persistence unit 'default' 2022-07-24\n09:05:34.408  INFO 43466 --- [           main]\nc.e.s.r.sourceformat.FindAllTests        : Started FindAllTests in\n2.997 seconds (JVM running for 4.157)</p>\n<h1>============================ CONDITIONS EVALUATION REPORT</h1>\n<p>2022-07-24 09:05:34.432 ERROR 43466 --- [           main]\no.s.test.context.TestContextManager      : Caught exception while\nallowing TestExecutionListener\n[org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@c430e6c]\nto prepare test instance\n[com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests@6f43c82]</p>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests':\nUnsatisfied dependency expressed through field 'repository'; nested\nexception is\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:417)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:119)\n~[spring-test-5.3.21.jar:5.3.21]\nat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n~[spring-test-5.3.21.jar:5.3.21]\nat org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n~[spring-boot-test-autoconfigure-2.7.1.jar:2.7.1]\nat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n~[spring-test-5.3.21.jar:5.3.21]\nat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n~[spring-test-5.3.21.jar:5.3.21]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n~[na:na]\nat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n~[na:na]\nat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n~[na:na]\nat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n~[na:na]\nat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n~[na:na]\nat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n~[na:na]\nat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n~[na:na]\nat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n~[na:na]\nat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n~[na:na]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\nat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\n~[junit-jupiter-engine-5.8.2.jar:5.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n~[junit-platform-engine-1.8.2.jar:1.8.2]\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220)\n~[junit-platform-launcher-1.3.1.jar:1.3.1]\nat org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188)\n~[junit-platform-launcher-1.3.1.jar:1.3.1]\nat org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202)\n~[junit-platform-launcher-1.3.1.jar:1.3.1]\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181)\n~[junit-platform-launcher-1.3.1.jar:1.3.1]\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n~[junit-platform-launcher-1.3.1.jar:1.3.1]\nat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150)\n~[surefire-junit-platform-2.22.2.jar:2.22.2]\nat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)\n~[surefire-junit-platform-2.22.2.jar:2.22.2]\nat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\n~[surefire-booter-2.22.2.jar:2.22.2]\nat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\n~[surefire-booter-2.22.2.jar:2.22.2]\nat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\n~[surefire-booter-2.22.2.jar:2.22.2]\nat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\n~[surefire-booter-2.22.2.jar:2.22.2] Caused by:\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n~[spring-beans-5.3.21.jar:5.3.21]\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\n~[spring-beans-5.3.21.jar:5.3.21]\n... 72 common frames omitted</p>\n<p>[ERROR] Tests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time\nelapsed: 3.564 s &lt;&lt;&lt; FAILURE! - in\ncom.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests\n[ERROR] shouldReturnAll  Time elapsed: 0.009 s  &lt;&lt;&lt; ERROR!\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.FindAllTests':\nUnsatisfied dependency expressed through field 'repository'; nested\nexception is\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}\nCaused by:\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'com.encyclopediagalactica.sourceformats.repositories.sourceformat.SourceFormatRepository'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations:\n{@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n"},{"tags":["java","android","android-toolbar"],"comments":[{"owner":{"account_id":1908412,"reputation":38019,"user_id":1722818,"accept_rate":58,"display_name":"duggu"},"score":0,"creation_date":1425368744,"post_id":28826486,"comment_id":45923486,"body_markdown":"you not close &lt;com.gc.materialdesign.views.ButtonFloat this on your xml ?","body":"you not close &lt;com.gc.materialdesign.views.ButtonFloat this on your xml ?"},{"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"score":0,"creation_date":1425368867,"post_id":28826486,"comment_id":45923554,"body_markdown":"@Duggu that is not required, please check https://github.com/navasmdc/MaterialDesignLibrary#float-button. Also i want to make it clear that app is working fine on Andriod 4.4.4. Thanks.","body":"@Duggu that is not required, please check <a href=\"https://github.com/navasmdc/MaterialDesignLibrary#float-button\" rel=\"nofollow noreferrer\">github.com/navasmdc/MaterialDesignLibrary#float-button</a>. Also i want to make it clear that app is working fine on Andriod 4.4.4. Thanks."},{"owner":{"account_id":5768937,"reputation":12238,"user_id":4552938,"accept_rate":64,"display_name":"Fahim"},"score":0,"creation_date":1425368941,"post_id":28826486,"comment_id":45923582,"body_markdown":"share ur toolbar.xml file","body":"share ur toolbar.xml file"},{"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"score":0,"creation_date":1425369219,"post_id":28826486,"comment_id":45923710,"body_markdown":"@Fahim i have added that too.","body":"@Fahim i have added that too."},{"owner":{"account_id":875420,"reputation":2807,"user_id":925164,"display_name":"Gorcyn"},"score":0,"creation_date":1425370494,"post_id":28826486,"comment_id":45924244,"body_markdown":"@ShajeelAfzal As Duggu said, the `&lt;com.gc.materialdesign.views.ButtonFloat` needs to be closed, with a `/&gt;`","body":"@ShajeelAfzal As Duggu said, the <code>&lt;com.gc.materialdesign.views.ButtonFloat</code> needs to be closed, with a <code>&#47;&gt;</code>"},{"owner":{"account_id":875420,"reputation":2807,"user_id":925164,"display_name":"Gorcyn"},"score":0,"creation_date":1425370963,"post_id":28826486,"comment_id":45924481,"body_markdown":"Also, your `onCreateOptionsMenu()` method doesn&#39;t return anything, this code, as it is, can&#39;t even compile.","body":"Also, your <code>onCreateOptionsMenu()</code> method doesn&#39;t return anything, this code, as it is, can&#39;t even compile."},{"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"score":0,"creation_date":1425371201,"post_id":28826486,"comment_id":45924586,"body_markdown":"@Gorcyn but it is working fine on Android 4.4.4 as i said earlier in the comment. Also it is returning `true`, i am sorry i missed to add it here on SO. Updating.","body":"@Gorcyn but it is working fine on Android 4.4.4 as i said earlier in the comment. Also it is returning <code>true</code>, i am sorry i missed to add it here on SO. Updating."},{"owner":{"account_id":875420,"reputation":2807,"user_id":925164,"display_name":"Gorcyn"},"score":0,"creation_date":1425371487,"post_id":28826486,"comment_id":45924735,"body_markdown":"@ShajeelAfzal If it works it shouldn&#39;t. This is how XML works: elements must be defined as in : `&lt;x.y.z /&gt;` or `&lt;x.y.z&gt;&lt;/x.y.z&gt;`","body":"@ShajeelAfzal If it works it shouldn&#39;t. This is how XML works: elements must be defined as in : <code>&lt;x.y.z &#47;&gt;</code> or <code>&lt;x.y.z&gt;&lt;&#47;x.y.z&gt;</code>"},{"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"score":1,"creation_date":1425371685,"post_id":28826486,"comment_id":45924836,"body_markdown":"@Gorcyn i updated the XML and return type in onCreateOptionsMenu method.","body":"@Gorcyn i updated the XML and return type in onCreateOptionsMenu method."},{"owner":{"account_id":392515,"reputation":1697,"user_id":753827,"accept_rate":85,"display_name":"Dominik"},"score":0,"creation_date":1428762491,"post_id":28826486,"comment_id":47306325,"body_markdown":"does anyone have a solution for this? I have the exact same problem.","body":"does anyone have a solution for this? I have the exact same problem."}],"answers":[{"tags":[],"owner":{"account_id":346515,"reputation":398,"user_id":680091,"accept_rate":0,"display_name":"pseudozach"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436953254,"creation_date":1436953254,"answer_id":31426820,"question_id":28826486,"body_markdown":"removing collapseActionView from app:showAsAction worked for me...","title":"Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView with Android 4 using AppCompact","body":"<p>removing collapseActionView from app:showAsAction worked for me...</p>\n"},{"tags":[],"owner":{"account_id":25870367,"reputation":1,"user_id":19601370,"display_name":"Deniz Saputra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658659247,"creation_date":1658492176,"answer_id":73080213,"question_id":28826486,"body_markdown":"```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;\r\n&lt;android.support.v7.view.menu.ActionMenuItemView \r\n    xmlns:android          = &quot;http://schemas.android.com/apk/res/android&quot; \r\n    android:textAppearance = &quot;?actionMenuTextAppearance&quot; \r\n    android:textColor      = &quot;?actionMenuTextColor&quot; \r\n    android:gravity        = &quot;center&quot; \r\n    android:layout_gravity = &quot;center&quot;\r\n    android:paddingLeft    = &quot;8.0dip&quot; \r\n    android:paddingTop     = &quot;4.0dip&quot;\r\n    android:paddingRight   = &quot;8.0dip&quot; \r\n    android:paddingBottom  = &quot;4.0dip&quot;\r\n    android:focusable      = &quot;true&quot; \r\n    android:layout_width   = &quot;wrap_content&quot; \r\n    android:layout_height  = &quot;wrap_content&quot;\r\n    style                  = &quot;?actionButtonStyle&quot;\r\n    /&gt;\r\n```","title":"Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView with Android 4 using AppCompact","body":"<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;\n&lt;android.support.v7.view.menu.ActionMenuItemView \n    xmlns:android          = &quot;http://schemas.android.com/apk/res/android&quot; \n    android:textAppearance = &quot;?actionMenuTextAppearance&quot; \n    android:textColor      = &quot;?actionMenuTextColor&quot; \n    android:gravity        = &quot;center&quot; \n    android:layout_gravity = &quot;center&quot;\n    android:paddingLeft    = &quot;8.0dip&quot; \n    android:paddingTop     = &quot;4.0dip&quot;\n    android:paddingRight   = &quot;8.0dip&quot; \n    android:paddingBottom  = &quot;4.0dip&quot;\n    android:focusable      = &quot;true&quot; \n    android:layout_width   = &quot;wrap_content&quot; \n    android:layout_height  = &quot;wrap_content&quot;\n    style                  = &quot;?actionButtonStyle&quot;\n    /&gt;\n</code></pre>\n"}],"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2950,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1658659247,"creation_date":1425368487,"question_id":28826486,"body_markdown":"Everytime i run the app on `Android 4` (working fine on Android 4.4.4) i get the following exception\r\n\r\n`Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView`\r\n\r\nat `TextView.java line 918 android.widget.TextView.&lt;init&gt;`\r\n\r\nThe full crash log is:\r\n\r\n    android.view.InflateException: Binary XML file line #17: Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView\r\n       at android.view.LayoutInflater.createView(LayoutInflater.java:613)\r\n       at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\r\n       at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\r\n       at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\r\n       at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\r\n       at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\r\n       at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\r\n       at android.os.Handler.handleCallback(Handler.java:615)\r\n       at android.os.Handler.dispatchMessage(Handler.java:92)\r\n       at android.os.Looper.loop(Looper.java:137)\r\n       at android.app.ActivityThread.main(ActivityThread.java:4921)\r\n       at java.lang.reflect.Method.invokeNative(Method.java)\r\n       at java.lang.reflect.Method.invoke(Method.java:511)\r\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\r\n       at dalvik.system.NativeStart.main(NativeStart.java)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n       at java.lang.reflect.Constructor.constructNative(Constructor.java)\r\n       at java.lang.reflect.Constructor.newInstance(Constructor.java:417)\r\n       at android.view.LayoutInflater.createView(LayoutInflater.java:587)\r\n       at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\r\n       at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\r\n       at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\r\n       at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\r\n       at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\r\n       at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\r\n       at android.os.Handler.handleCallback(Handler.java:615)\r\n       at android.os.Handler.dispatchMessage(Handler.java:92)\r\n       at android.os.Looper.loop(Looper.java:137)\r\n       at android.app.ActivityThread.main(ActivityThread.java:4921)\r\n       at java.lang.reflect.Method.invokeNative(Method.java)\r\n       at java.lang.reflect.Method.invoke(Method.java:511)\r\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\r\n       at dalvik.system.NativeStart.main(NativeStart.java)\r\n    Caused by: android.content.res.Resources$NotFoundException: Resource is not a ColorStateList (color or path): TypedValue{t=0x2/d=0x7f010026 a=-1}\r\n       at android.content.res.Resources.loadColorStateList(Resources.java:2068)\r\n       at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)\r\n       at android.widget.TextView.&lt;init&gt;(TextView.java:918)\r\n       at android.support.v7.internal.widget.CompatTextView.&lt;init&gt;(CompatTextView.java:45)\r\n       at android.support.v7.internal.view.menu.ActionMenuItemView.&lt;init&gt;(ActionMenuItemView.java:76)\r\n       at android.support.v7.internal.view.menu.ActionMenuItemView.&lt;init&gt;(ActionMenuItemView.java:72)\r\n       at java.lang.reflect.Constructor.constructNative(Constructor.java)\r\n       at java.lang.reflect.Constructor.newInstance(Constructor.java:417)\r\n       at android.view.LayoutInflater.createView(LayoutInflater.java:587)\r\n       at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\r\n       at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\r\n       at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\r\n       at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\r\n       at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\r\n       at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\r\n       at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\r\n       at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\r\n       at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\r\n       at android.os.Handler.handleCallback(Handler.java:615)\r\n       at android.os.Handler.dispatchMessage(Handler.java:92)\r\n       at android.os.Looper.loop(Looper.java:137)\r\n       at android.app.ActivityThread.main(ActivityThread.java:4921)\r\n       at java.lang.reflect.Method.invokeNative(Method.java)\r\n       at java.lang.reflect.Method.invoke(Method.java:511)\r\n       at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\r\n       at dalvik.system.NativeStart.main(NativeStart.java)\r\n\r\nMenu XML is as follows:\r\n\r\n    &lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; &gt;\r\n\r\n    &lt;item\r\n        android:id=&quot;@+id/action_search&quot;\r\n        android:icon=&quot;@drawable/action_search&quot;\r\n        android:orderInCategory=&quot;2&quot;\r\n        android:title=&quot;@string/action_search&quot;\r\n        app:actionViewClass=&quot;android.support.v7.widget.SearchView&quot;\r\n        app:showAsAction=&quot;always|collapseActionView&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/action_pending_invites&quot;\r\n        android:icon=&quot;@drawable/ic_action_social_notifications&quot;\r\n        android:orderInCategory=&quot;3&quot;\r\n        android:title=&quot;@string/pending_invites&quot;\r\n        app:showAsAction=&quot;always&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/action_sync&quot;\r\n        android:icon=&quot;@drawable/stat_notify_sync&quot;\r\n        android:orderInCategory=&quot;4&quot;\r\n        android:title=&quot;@string/action_sync&quot;\r\n        app:showAsAction=&quot;ifRoom|withText&quot;/&gt;\r\n    &lt;item\r\n        android:id=&quot;@+id/action_global_settings&quot;\r\n        android:icon=&quot;@drawable/action_search&quot;\r\n        android:orderInCategory=&quot;100&quot;\r\n        android:title=&quot;@string/settings&quot;\r\n        app:showAsAction=&quot;ifRoom|withText&quot;/&gt;\r\n    &lt;/menu&gt;\r\n\r\nThe layout for my Activity is:\r\n\r\n    &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    xmlns:ads=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:materialdesign=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:id=&quot;@+id/root&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot; &gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.HomeScreen&quot; &gt;\r\n\r\n        &lt;include\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            layout=&quot;@layout/toolbar&quot; /&gt;\r\n\r\n        &lt;com.google.android.gms.ads.AdView\r\n            android:id=&quot;@+id/adview&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_below=&quot;@id/toolbar&quot;\r\n            ads:adSize=&quot;SMART_BANNER&quot;\r\n            ads:adUnitId=&quot;xxxxxxxxxx&quot; /&gt;\r\n\r\n        &lt;ListView\r\n            android:id=&quot;@+id/listViewHomeScreen&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_below=&quot;@id/adview&quot; &gt;\r\n        &lt;/ListView&gt;\r\n\r\n        &lt;ProgressBar\r\n            android:id=&quot;@+id/progressBarHomeScreen&quot;\r\n            style=&quot;?android:attr/progressBarStyleLarge&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:visibility=&quot;gone&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/no_session_found_tv&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_centerHorizontal=&quot;true&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            android:layout_centerVertical=&quot;true&quot;\r\n            android:layout_marginLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:layout_marginRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:visibility=&quot;gone&quot; /&gt;\r\n    &lt;/RelativeLayout&gt;\r\n\r\n    &lt;com.gc.materialdesign.views.ButtonFloat\r\n        android:id=&quot;@+id/sessions_fab&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;end|bottom&quot;\r\n        android:layout_marginBottom=&quot;24dp&quot;\r\n        android:layout_marginEnd=&quot;24dp&quot;\r\n        android:layout_marginRight=&quot;24dp&quot;\r\n        android:background=&quot;@color/primary&quot;\r\n        materialdesign:iconDrawable=&quot;@drawable/ic_action_add&quot;/&gt;\r\n    &lt;/FrameLayout&gt;\r\n\r\nAnd the Activity code is:\r\n\r\n    @Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\tsetContentView(R.layout.activity_home_screen);\r\n\r\n\t\tmToolbar = (Toolbar) findViewById(R.id.toolbar);\r\n\t\tsetSupportActionBar(mToolbar);\r\n\r\n\r\n    }\r\n\r\n    \t@Override\r\n\tpublic boolean onCreateOptionsMenu(Menu menu) {\r\n\t\tgetMenuInflater().inflate(R.menu.home_screen, menu);\r\n\t\tmMenu = menu;\r\n\t\tmSearchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);\r\n\t\tMenuItem item = menu.findItem(R.id.action_search);\r\n\r\n\t\tSearchView searchView = (SearchView) MenuItemCompat.getActionView(item);\r\n\t\tif (searchView != null) {\r\n\t\t\tsearchView.setOnQueryTextListener(new OnQueryTextListener() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean onQueryTextSubmit(String query) {\r\n\t\t\t\t\t// new searchPhotoSession().execute();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean onQueryTextChange(String newText) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n    return true;\r\n    }\r\n\r\ntoolbar.xml is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.v7.widget.Toolbar xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/toolbar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@color/primary&quot;\r\n        app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;\r\n        app:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot; /&gt;\r\n\r\n**The app theme is:**\r\n\r\nvalues:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;resources xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    \r\n        &lt;style name=&quot;AppBaseTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;&lt;/style&gt;\r\n    \r\n        &lt;!-- Application theme. --&gt;\r\n        &lt;style name=&quot;AppTheme&quot; parent=&quot;AppBaseTheme&quot;&gt;\r\n            &lt;item name=&quot;colorPrimary&quot;&gt;@color/primary&lt;/item&gt;\r\n            &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/primary_dark&lt;/item&gt;\r\n            &lt;item name=&quot;colorAccent&quot;&gt;@color/accent&lt;/item&gt;\r\n            &lt;item name=&quot;android:fitsSystemWindows&quot;&gt;true&lt;/item&gt;\r\n            &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n            &lt;item name=&quot;android:textColorPrimary&quot;&gt;@color/primary_text&lt;/item&gt;\r\n        &lt;/style&gt;\r\n    \r\n    &lt;/resources&gt;\r\n\r\nvalues-19:\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;resources xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;style name=&quot;AppBaseTheme&quot; parent=&quot;Theme.AppCompat.Light&quot;&gt;&lt;/style&gt;\r\n\r\n    &lt;!-- Application theme. --&gt;\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;AppBaseTheme&quot;&gt;\r\n        &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:clipToPadding&quot;&gt;false&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimary&quot;&gt;@color/primary&lt;/item&gt;\r\n        &lt;item name=&quot;android:windowTranslucentNavigation&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/primary_dark&lt;/item&gt;\r\n        &lt;item name=&quot;colorAccent&quot;&gt;@color/accent&lt;/item&gt;\r\n        &lt;item name=&quot;android:fitsSystemWindows&quot;&gt;true&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColorPrimary&quot;&gt;@color/primary_text&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n&lt;/resources&gt;","title":"Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView with Android 4 using AppCompact","body":"<p>Everytime i run the app on <code>Android 4</code> (working fine on Android 4.4.4) i get the following exception</p>\n\n<p><code>Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView</code></p>\n\n<p>at <code>TextView.java line 918 android.widget.TextView.&lt;init&gt;</code></p>\n\n<p>The full crash log is:</p>\n\n<pre><code>android.view.InflateException: Binary XML file line #17: Error inflating class android.support.v7.internal.view.menu.ActionMenuItemView\n   at android.view.LayoutInflater.createView(LayoutInflater.java:613)\n   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\n   at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\n   at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\n   at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\n   at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\n   at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\n   at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\n   at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\n   at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\n   at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\n   at android.os.Handler.handleCallback(Handler.java:615)\n   at android.os.Handler.dispatchMessage(Handler.java:92)\n   at android.os.Looper.loop(Looper.java:137)\n   at android.app.ActivityThread.main(ActivityThread.java:4921)\n   at java.lang.reflect.Method.invokeNative(Method.java)\n   at java.lang.reflect.Method.invoke(Method.java:511)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\n   at dalvik.system.NativeStart.main(NativeStart.java)\nCaused by: java.lang.reflect.InvocationTargetException\n   at java.lang.reflect.Constructor.constructNative(Constructor.java)\n   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)\n   at android.view.LayoutInflater.createView(LayoutInflater.java:587)\n   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\n   at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\n   at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\n   at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\n   at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\n   at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\n   at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\n   at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\n   at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\n   at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\n   at android.os.Handler.handleCallback(Handler.java:615)\n   at android.os.Handler.dispatchMessage(Handler.java:92)\n   at android.os.Looper.loop(Looper.java:137)\n   at android.app.ActivityThread.main(ActivityThread.java:4921)\n   at java.lang.reflect.Method.invokeNative(Method.java)\n   at java.lang.reflect.Method.invoke(Method.java:511)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\n   at dalvik.system.NativeStart.main(NativeStart.java)\nCaused by: android.content.res.Resources$NotFoundException: Resource is not a ColorStateList (color or path): TypedValue{t=0x2/d=0x7f010026 a=-1}\n   at android.content.res.Resources.loadColorStateList(Resources.java:2068)\n   at android.content.res.TypedArray.getColorStateList(TypedArray.java:342)\n   at android.widget.TextView.&lt;init&gt;(TextView.java:918)\n   at android.support.v7.internal.widget.CompatTextView.&lt;init&gt;(CompatTextView.java:45)\n   at android.support.v7.internal.view.menu.ActionMenuItemView.&lt;init&gt;(ActionMenuItemView.java:76)\n   at android.support.v7.internal.view.menu.ActionMenuItemView.&lt;init&gt;(ActionMenuItemView.java:72)\n   at java.lang.reflect.Constructor.constructNative(Constructor.java)\n   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)\n   at android.view.LayoutInflater.createView(LayoutInflater.java:587)\n   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)\n   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.createItemView(BaseMenuPresenter.java:161)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.getItemView(BaseMenuPresenter.java:180)\n   at android.support.v7.widget.ActionMenuPresenter.getItemView(ActionMenuPresenter.java:170)\n   at android.support.v7.widget.ActionMenuPresenter.flagActionItems(ActionMenuPresenter.java:429)\n   at android.support.v7.internal.view.menu.MenuBuilder.flagActionItems(MenuBuilder.java:1129)\n   at android.support.v7.internal.view.menu.BaseMenuPresenter.updateMenuView(BaseMenuPresenter.java:91)\n   at android.support.v7.widget.ActionMenuPresenter.updateMenuView(ActionMenuPresenter.java:207)\n   at android.support.v7.internal.view.menu.MenuBuilder.dispatchPresenterUpdate(MenuBuilder.java:279)\n   at android.support.v7.internal.view.menu.MenuBuilder.onItemsChanged(MenuBuilder.java:1021)\n   at android.support.v7.internal.view.menu.MenuBuilder.startDispatchingItemsChanged(MenuBuilder.java:1044)\n   at android.support.v7.internal.app.ToolbarActionBar.populateOptionsMenu(ToolbarActionBar.java:465)\n   at android.support.v7.internal.app.ToolbarActionBar$1.run(ToolbarActionBar.java:69)\n   at android.os.Handler.handleCallback(Handler.java:615)\n   at android.os.Handler.dispatchMessage(Handler.java:92)\n   at android.os.Looper.loop(Looper.java:137)\n   at android.app.ActivityThread.main(ActivityThread.java:4921)\n   at java.lang.reflect.Method.invokeNative(Method.java)\n   at java.lang.reflect.Method.invoke(Method.java:511)\n   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)\n   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)\n   at dalvik.system.NativeStart.main(NativeStart.java)\n</code></pre>\n\n<p>Menu XML is as follows:</p>\n\n<pre><code>&lt;menu xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:app=\"http://schemas.android.com/apk/res-auto\" &gt;\n\n&lt;item\n    android:id=\"@+id/action_search\"\n    android:icon=\"@drawable/action_search\"\n    android:orderInCategory=\"2\"\n    android:title=\"@string/action_search\"\n    app:actionViewClass=\"android.support.v7.widget.SearchView\"\n    app:showAsAction=\"always|collapseActionView\"/&gt;\n&lt;item\n    android:id=\"@+id/action_pending_invites\"\n    android:icon=\"@drawable/ic_action_social_notifications\"\n    android:orderInCategory=\"3\"\n    android:title=\"@string/pending_invites\"\n    app:showAsAction=\"always\"/&gt;\n&lt;item\n    android:id=\"@+id/action_sync\"\n    android:icon=\"@drawable/stat_notify_sync\"\n    android:orderInCategory=\"4\"\n    android:title=\"@string/action_sync\"\n    app:showAsAction=\"ifRoom|withText\"/&gt;\n&lt;item\n    android:id=\"@+id/action_global_settings\"\n    android:icon=\"@drawable/action_search\"\n    android:orderInCategory=\"100\"\n    android:title=\"@string/settings\"\n    app:showAsAction=\"ifRoom|withText\"/&gt;\n&lt;/menu&gt;\n</code></pre>\n\n<p>The layout for my Activity is:</p>\n\n<pre><code>&lt;FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nxmlns:ads=\"http://schemas.android.com/apk/res-auto\"\nxmlns:materialdesign=\"http://schemas.android.com/apk/res-auto\"\nandroid:id=\"@+id/root\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"wrap_content\" &gt;\n\n&lt;RelativeLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".HomeScreen\" &gt;\n\n    &lt;include\n        android:id=\"@+id/toolbar\"\n        layout=\"@layout/toolbar\" /&gt;\n\n    &lt;com.google.android.gms.ads.AdView\n        android:id=\"@+id/adview\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_below=\"@id/toolbar\"\n        ads:adSize=\"SMART_BANNER\"\n        ads:adUnitId=\"xxxxxxxxxx\" /&gt;\n\n    &lt;ListView\n        android:id=\"@+id/listViewHomeScreen\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_below=\"@id/adview\" &gt;\n    &lt;/ListView&gt;\n\n    &lt;ProgressBar\n        android:id=\"@+id/progressBarHomeScreen\"\n        style=\"?android:attr/progressBarStyleLarge\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_centerInParent=\"true\"\n        android:layout_centerVertical=\"true\"\n        android:visibility=\"gone\" /&gt;\n\n    &lt;TextView\n        android:id=\"@+id/no_session_found_tv\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_centerHorizontal=\"true\"\n        android:layout_centerInParent=\"true\"\n        android:layout_centerVertical=\"true\"\n        android:layout_marginLeft=\"@dimen/activity_horizontal_margin\"\n        android:layout_marginRight=\"@dimen/activity_horizontal_margin\"\n        android:gravity=\"center\"\n        android:visibility=\"gone\" /&gt;\n&lt;/RelativeLayout&gt;\n\n&lt;com.gc.materialdesign.views.ButtonFloat\n    android:id=\"@+id/sessions_fab\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"end|bottom\"\n    android:layout_marginBottom=\"24dp\"\n    android:layout_marginEnd=\"24dp\"\n    android:layout_marginRight=\"24dp\"\n    android:background=\"@color/primary\"\n    materialdesign:iconDrawable=\"@drawable/ic_action_add\"/&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n\n<p>And the Activity code is:</p>\n\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_home_screen);\n\n    mToolbar = (Toolbar) findViewById(R.id.toolbar);\n    setSupportActionBar(mToolbar);\n\n\n}\n\n    @Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.home_screen, menu);\n    mMenu = menu;\n    mSearchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);\n    MenuItem item = menu.findItem(R.id.action_search);\n\n    SearchView searchView = (SearchView) MenuItemCompat.getActionView(item);\n    if (searchView != null) {\n        searchView.setOnQueryTextListener(new OnQueryTextListener() {\n\n            @Override\n            public boolean onQueryTextSubmit(String query) {\n                // new searchPhotoSession().execute();\n                return false;\n            }\n\n            @Override\n            public boolean onQueryTextChange(String newText) {\n                return true;\n            }\n        });\n    }\nreturn true;\n}\n</code></pre>\n\n<p>toolbar.xml is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.v7.widget.Toolbar xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/toolbar\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@color/primary\"\n    app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"\n    app:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\" /&gt;\n</code></pre>\n\n<p><strong>The app theme is:</strong></p>\n\n<p>values:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;style name=\"AppBaseTheme\" parent=\"Theme.AppCompat.Light\"&gt;&lt;/style&gt;\n\n    &lt;!-- Application theme. --&gt;\n    &lt;style name=\"AppTheme\" parent=\"AppBaseTheme\"&gt;\n        &lt;item name=\"colorPrimary\"&gt;@color/primary&lt;/item&gt;\n        &lt;item name=\"colorPrimaryDark\"&gt;@color/primary_dark&lt;/item&gt;\n        &lt;item name=\"colorAccent\"&gt;@color/accent&lt;/item&gt;\n        &lt;item name=\"android:fitsSystemWindows\"&gt;true&lt;/item&gt;\n        &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n        &lt;item name=\"android:textColorPrimary\"&gt;@color/primary_text&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n\n<p>values-19:\n\n</p>\n\n<pre><code>&lt;style name=\"AppBaseTheme\" parent=\"Theme.AppCompat.Light\"&gt;&lt;/style&gt;\n\n&lt;!-- Application theme. --&gt;\n&lt;style name=\"AppTheme\" parent=\"AppBaseTheme\"&gt;\n    &lt;item name=\"windowActionBar\"&gt;false&lt;/item&gt;\n    &lt;item name=\"android:windowTranslucentStatus\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:clipToPadding\"&gt;false&lt;/item&gt;\n    &lt;item name=\"colorPrimary\"&gt;@color/primary&lt;/item&gt;\n    &lt;item name=\"android:windowTranslucentNavigation\"&gt;true&lt;/item&gt;\n    &lt;item name=\"colorPrimaryDark\"&gt;@color/primary_dark&lt;/item&gt;\n    &lt;item name=\"colorAccent\"&gt;@color/accent&lt;/item&gt;\n    &lt;item name=\"android:fitsSystemWindows\"&gt;true&lt;/item&gt;\n    &lt;item name=\"android:textColorPrimary\"&gt;@color/primary_text&lt;/item&gt;\n&lt;/style&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","eclipse","javafx"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1580697856,"post_id":60032282,"comment_id":106169734,"body_markdown":"_the &quot;Testing2&quot; shouldn&#39;t have any module_ Not true. It is in the [unnamed module](https://www.logicbig.com/tutorials/core-java-tutorial/modules/unnamed-modules.html)","body":"<i>the &quot;Testing2&quot; shouldn&#39;t have any module</i> Not true. It is in the <a href=\"https://www.logicbig.com/tutorials/core-java-tutorial/modules/unnamed-modules.html\" rel=\"nofollow noreferrer\">unnamed module</a>"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1580698197,"post_id":60032282,"comment_id":106169786,"body_markdown":"_duplicate entry: module-info.class_ means two (or more) JARs contain the same class - because all your classes are in the _unnamed module_ (see my previous comment)","body":"<i>duplicate entry: module-info.class</i> means two (or more) JARs contain the same class - because all your classes are in the <i>unnamed module</i> (see my previous comment)"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1580698342,"post_id":60032282,"comment_id":106169808,"body_markdown":"Perhaps [this SO question](https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s) will help with your `Graphics Device initialization failed`","body":"Perhaps <a href=\"https://stackoverflow.com/questions/21185156/javafx-on-linux-is-showing-a-graphics-device-initialization-failed-for-es2-s\">this SO question</a> will help with your <code>Graphics Device initialization failed</code>"},{"owner":{"account_id":16396450,"reputation":189,"user_id":11843839,"display_name":"RobertB922"},"score":0,"creation_date":1580704550,"post_id":60032282,"comment_id":106170836,"body_markdown":"@Abra, The last reference you posted is a little outdated. It&#39;s dealing with 1.8.0 and Linux from about 4 years ago. Though I do appreciate the reference and will try, I wish my original post wasn&#39;t edited so you everyone would of known what I have already tried but Hovercraft Full of Eels apparently doesn&#39;t think relevant information pertains to the problem.","body":"@Abra, The last reference you posted is a little outdated. It&#39;s dealing with 1.8.0 and Linux from about 4 years ago. Though I do appreciate the reference and will try, I wish my original post wasn&#39;t edited so you everyone would of known what I have already tried but Hovercraft Full of Eels apparently doesn&#39;t think relevant information pertains to the problem."},{"owner":{"account_id":16396450,"reputation":189,"user_id":11843839,"display_name":"RobertB922"},"score":0,"creation_date":1580705113,"post_id":60032282,"comment_id":106170933,"body_markdown":"@Abra, thank you for the reference to the _unnamed module_. I actually managed to clear the error for **duplicate entry: module-info.java** with your help on that one. I didn&#39;t notice as I was creating new projects as **JavaFX** project that the **jre system library** was already trying to use the javafx.controls jar. By removing that I was able to get that error to clear when exporting as **Extract required libraries into generated jar**. Though its still not running when clicked or accessed through cmd, that&#39;s atleast one step in the right direction.","body":"@Abra, thank you for the reference to the <i>unnamed module</i>. I actually managed to clear the error for <b>duplicate entry: module-info.java</b> with your help on that one. I didn&#39;t notice as I was creating new projects as <b>JavaFX</b> project that the <b>jre system library</b> was already trying to use the javafx.controls jar. By removing that I was able to get that error to clear when exporting as <b>Extract required libraries into generated jar</b>. Though its still not running when clicked or accessed through cmd, that&#39;s atleast one step in the right direction."}],"answers":[{"tags":[],"owner":{"account_id":16396450,"reputation":189,"user_id":11843839,"display_name":"RobertB922"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1581076495,"creation_date":1581076495,"answer_id":60113010,"question_id":60032282,"body_markdown":"Alright I have figured it out (at least for me). I hope this helps anyone in the future. So I went into command prompt and changed my directory to where the .jar file was located by \r\n\r\n    cd path\\to\\file.jar\r\nFor ease I saved to desktop so it looked like `cd desktop`\r\n\r\nNext I set the path to JavaFx by \r\n\r\n    set PATH_TO_FX=&quot;path\\to\\JavaFX\\lib&quot;\r\nIn my case it looked like `set PATH_TO_FX=&quot;C:\\Program Files\\Java\\javafx-sdk-13.0.2\\lib&quot;` This is an important step, if you don&#39;t set the path the .jar file will not open!\r\n\r\nThen I added the VM arguments that are needed in Eclipse to get javaFX to run (at least with jdk13 and jfx13) which looked like this\r\n\r\n    java -jar --module-path %PATH_TO_FX% --add-modules javafx.controls,javafx.fxml Testing.jar\r\n\r\nApparently, I and many others keep forgetting that the VM arguments do not export with the .jar file. The only things you should need to modify with the above command lines are the paths to your jfx\\lib folder, and the name of .jar file. I showed how mine looked so if someone gets confused working in the command prompt they have a reference point. However, this still doesn&#39;t allow it to work by double clicking the .jar file. I am working on a solution for that and I edit this to reflect that method as well. ","title":"Executable .jar not running JavaFX - Ecliipse","body":"<p>Alright I have figured it out (at least for me). I hope this helps anyone in the future. So I went into command prompt and changed my directory to where the .jar file was located by </p>\n\n<pre><code>cd path\\to\\file.jar\n</code></pre>\n\n<p>For ease I saved to desktop so it looked like <code>cd desktop</code></p>\n\n<p>Next I set the path to JavaFx by </p>\n\n<pre><code>set PATH_TO_FX=\"path\\to\\JavaFX\\lib\"\n</code></pre>\n\n<p>In my case it looked like <code>set PATH_TO_FX=\"C:\\Program Files\\Java\\javafx-sdk-13.0.2\\lib\"</code> This is an important step, if you don't set the path the .jar file will not open!</p>\n\n<p>Then I added the VM arguments that are needed in Eclipse to get javaFX to run (at least with jdk13 and jfx13) which looked like this</p>\n\n<pre><code>java -jar --module-path %PATH_TO_FX% --add-modules javafx.controls,javafx.fxml Testing.jar\n</code></pre>\n\n<p>Apparently, I and many others keep forgetting that the VM arguments do not export with the .jar file. The only things you should need to modify with the above command lines are the paths to your jfx\\lib folder, and the name of .jar file. I showed how mine looked so if someone gets confused working in the command prompt they have a reference point. However, this still doesn't allow it to work by double clicking the .jar file. I am working on a solution for that and I edit this to reflect that method as well. </p>\n"},{"tags":[],"owner":{"account_id":20352922,"reputation":1,"user_id":14929161,"display_name":"Laki_Boy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658658965,"creation_date":1658419762,"answer_id":73069472,"question_id":60032282,"body_markdown":"Simply you can create `.bat` file in the `dist` folder to execute the `.jar` file by specifying the JavaFx module path.\r\n\r\nTo create `.bat` file you can insert following code into the text file (be sure to update the `&quot;path\\to\\JavaFX\\lib&quot;` to your JavaFx lib folder path and `&quot;YourApplicationName.jar&quot;` to your application name)\r\n\r\n    java -jar --module-path &quot;path\\to\\JavaFX\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;YourApplicationName.jar&quot;\r\n\r\nSave this text file as: `yourFileName.bat`\r\n\r\nNow you can execute your `.jar` file by double clicking the `yourFileName.bat` file\r\n\r\nIt&#39;s recommended to have copy of `.bat` file because when you rebuild the project, the original `.bat` file will be destroyed.\r\n\r\n","title":"Executable .jar not running JavaFX - Ecliipse","body":"<p>Simply you can create <code>.bat</code> file in the <code>dist</code> folder to execute the <code>.jar</code> file by specifying the JavaFx module path.</p>\n<p>To create <code>.bat</code> file you can insert following code into the text file (be sure to update the <code>&quot;path\\to\\JavaFX\\lib&quot;</code> to your JavaFx lib folder path and <code>&quot;YourApplicationName.jar&quot;</code> to your application name)</p>\n<pre><code>java -jar --module-path &quot;path\\to\\JavaFX\\lib&quot; --add-modules javafx.controls,javafx.fxml &quot;YourApplicationName.jar&quot;\n</code></pre>\n<p>Save this text file as: <code>yourFileName.bat</code></p>\n<p>Now you can execute your <code>.jar</code> file by double clicking the <code>yourFileName.bat</code> file</p>\n<p>It's recommended to have copy of <code>.bat</code> file because when you rebuild the project, the original <code>.bat</code> file will be destroyed.</p>\n"}],"owner":{"account_id":16396450,"reputation":189,"user_id":11843839,"display_name":"RobertB922"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7735,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":60113010,"answer_count":2,"score":1,"last_activity_date":1658658965,"creation_date":1580694890,"question_id":60032282,"body_markdown":"JDK Version - jdk-13.0.2 : environmental variable added as well as path variable\r\n\r\nJFX Version - javafx-sdk-13.0.2 : environmental variable added as well as path variable\r\n\r\nEclipse Version - 2019-12-R : e(fx)clipse plugin installed : scene builder \r\n\r\nOS - Windows 10 \r\n\r\n\r\n----------\r\n\r\n\r\nNow inside eclipse I have configured some things to allow JavaFX to run inside the IDE. So I will list what I have done inside the IDE configurations:\r\n\r\nWindow &gt; Preferences &gt; Java &gt; Installed JRE&#39;s &gt; Added jdk-13.0.2 under &quot;Standard VM&quot; option &gt; VM Argument *--module-path &quot;C:\\Program Files\\Java\\javafx-sdk-13.0.2\\lib&quot; --add-modules javafx.controls,javafx.fxml* .\r\n\r\nWindow &gt; Preferences &gt; Java &gt; Build Path &gt; User Libraries &gt; Created a new library containing *javafx.base, javafx.controls, javafx.fxml, javafx.graphics, javafx.media, javafx.swing, javafx.web, javafx-swt* .jar files.\r\n\r\nFor the individual projects I still have to add the new user library to the &quot;class-path&quot; so to do so I:\r\nRight-click Project folder &gt; Properties &gt; Java Build Path &gt; Libraries &gt; Delete the default JavaFX SDK folder (doesn&#39;t contain .jar files) &gt; Add New Library &gt; User Library &gt; Select my created JavaFX library that contains the .jars. At this point I can debug, and run anything Javafx inside the IDE. \r\n\r\n\r\n----------\r\n\r\nBoth test cases are just the basic build of 300x300 box with no other components in them (ruined an entire project before hand trying to figure this out). The difference between them is only 1 contains a module-info.java (created a module when project was created). The module-info.java contains:\r\n\r\n    module testing {\r\n    \texports application;\r\n    \trequires javafx.graphics;\r\n    \trequires javafx.base;\r\n    \trequires javafx.controls;\r\n    \trequires javafx.fxml;\r\n    \trequires javafx.media;\r\n    \trequires javafx.swing;\r\n    \trequires javafx.swt;\r\n    \trequires javafx.web;\r\n    }\r\n\r\nThe other &quot;Testing2&quot; does not have a module-info.java and one was not created when the project was (unchecked box). When I try to &quot;export&quot; either of them using Runnable Jar option then &quot;extract required libraries into generated jar&quot; it exports with the following error : *duplicate entry: module-info.class* . Which is confusing because the &quot;Testing2&quot; shouldn&#39;t have any module? If I export using the &quot;Package required libraries into generated jar&quot; I get no error upon export for either, but the .jar file itself when clicked opens the cmd box for about 0.5 seconds, closes and does nothing else. Same if I use a separate folder for libraries when exporting. Trying to open from the command line I get &quot;Unable to access Jarfile \\path\\jar.jar&quot;, and then if I open cmd as admin I get &quot;Missing Javafx Runtime components&quot; &amp;&amp; I have gotten \r\n\r\n    `Graphics Device initialization failed for :  d3d, sw\r\n    Error initializing QuantumRenderer: no suitable pipeline found\r\n    java.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n            at com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:280)\r\n            at com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:244)\r\n            at com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:260)\r\n            at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:267)\r\n            at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:158)\r\n            at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:658)\r\n            at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:678)\r\n            at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n            at java.base/java.lang.Thread.run(Thread.java:830)\r\n    Caused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\r\n            at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:94)\r\n            at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:124)\r\n            ... 1 more\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n            at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)\r\n    Caused by: java.lang.RuntimeException: No toolkit found\r\n            at com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:272)\r\n            at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:267)\r\n            at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:158)\r\n            at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:658)`enter code here`\r\n            at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:678)\r\n            at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n            at java.base/java.lang.Thread.run(Thread.java:830)\r\n\r\n\r\n----------\r\n\r\nNow the only thing I have not been able to completely test out in some of the answers I have found is the &quot;manifest&quot;. So far I have been under the impression that eclipse automatically creates one and when I choose the launch configuration at time of exporting I am choosing the entry point with my main class. I also have not been able to access one, and when I searched for how to create one in eclipse literally everyones answers are &quot;eclipse does it for you automatically&quot; or are using a 5+ year old version that I has screen steps that I simply do not have in the newest version of the IDE. If anyone could give me some insight on what might actually be going wrong here I would appreciate it very much. Thank you!","title":"Executable .jar not running JavaFX - Ecliipse","body":"<p>JDK Version - jdk-13.0.2 : environmental variable added as well as path variable</p>\n\n<p>JFX Version - javafx-sdk-13.0.2 : environmental variable added as well as path variable</p>\n\n<p>Eclipse Version - 2019-12-R : e(fx)clipse plugin installed : scene builder </p>\n\n<p>OS - Windows 10 </p>\n\n<hr>\n\n<p>Now inside eclipse I have configured some things to allow JavaFX to run inside the IDE. So I will list what I have done inside the IDE configurations:</p>\n\n<p>Window > Preferences > Java > Installed JRE's > Added jdk-13.0.2 under \"Standard VM\" option > VM Argument <em>--module-path \"C:\\Program Files\\Java\\javafx-sdk-13.0.2\\lib\" --add-modules javafx.controls,javafx.fxml</em> .</p>\n\n<p>Window > Preferences > Java > Build Path > User Libraries > Created a new library containing <em>javafx.base, javafx.controls, javafx.fxml, javafx.graphics, javafx.media, javafx.swing, javafx.web, javafx-swt</em> .jar files.</p>\n\n<p>For the individual projects I still have to add the new user library to the \"class-path\" so to do so I:\nRight-click Project folder > Properties > Java Build Path > Libraries > Delete the default JavaFX SDK folder (doesn't contain .jar files) > Add New Library > User Library > Select my created JavaFX library that contains the .jars. At this point I can debug, and run anything Javafx inside the IDE. </p>\n\n<hr>\n\n<p>Both test cases are just the basic build of 300x300 box with no other components in them (ruined an entire project before hand trying to figure this out). The difference between them is only 1 contains a module-info.java (created a module when project was created). The module-info.java contains:</p>\n\n<pre><code>module testing {\n    exports application;\n    requires javafx.graphics;\n    requires javafx.base;\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires javafx.media;\n    requires javafx.swing;\n    requires javafx.swt;\n    requires javafx.web;\n}\n</code></pre>\n\n<p>The other \"Testing2\" does not have a module-info.java and one was not created when the project was (unchecked box). When I try to \"export\" either of them using Runnable Jar option then \"extract required libraries into generated jar\" it exports with the following error : <em>duplicate entry: module-info.class</em> . Which is confusing because the \"Testing2\" shouldn't have any module? If I export using the \"Package required libraries into generated jar\" I get no error upon export for either, but the .jar file itself when clicked opens the cmd box for about 0.5 seconds, closes and does nothing else. Same if I use a separate folder for libraries when exporting. Trying to open from the command line I get \"Unable to access Jarfile \\path\\jar.jar\", and then if I open cmd as admin I get \"Missing Javafx Runtime components\" &amp;&amp; I have gotten </p>\n\n<pre><code>`Graphics Device initialization failed for :  d3d, sw\nError initializing QuantumRenderer: no suitable pipeline found\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n        at com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:280)\n        at com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:244)\n        at com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:260)\n        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:267)\n        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:158)\n        at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:658)\n        at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:678)\n        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n        at java.base/java.lang.Thread.run(Thread.java:830)\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n        at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:94)\n        at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:124)\n        ... 1 more\nException in thread \"main\" java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:61)\nCaused by: java.lang.RuntimeException: No toolkit found\n        at com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:272)\n        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:267)\n        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:158)\n        at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:658)`enter code here`\n        at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:678)\n        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n        at java.base/java.lang.Thread.run(Thread.java:830)\n</code></pre>\n\n<hr>\n\n<p>Now the only thing I have not been able to completely test out in some of the answers I have found is the \"manifest\". So far I have been under the impression that eclipse automatically creates one and when I choose the launch configuration at time of exporting I am choosing the entry point with my main class. I also have not been able to access one, and when I searched for how to create one in eclipse literally everyones answers are \"eclipse does it for you automatically\" or are using a 5+ year old version that I has screen steps that I simply do not have in the newest version of the IDE. If anyone could give me some insight on what might actually be going wrong here I would appreciate it very much. Thank you!</p>\n"},{"tags":["java","jaxb","jaxb2","docx4j"],"comments":[{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1427195434,"post_id":29217821,"comment_id":46668426,"body_markdown":"If you upload your docx to the docx4j webapp (or download the Word AddIn), do those instances of docx4j load your docx successfully?","body":"If you upload your docx to the docx4j webapp (or download the Word AddIn), do those instances of docx4j load your docx successfully?"},{"owner":{"account_id":2730129,"reputation":4790,"user_id":2354099,"accept_rate":74,"display_name":"pinkpanther"},"score":0,"creation_date":1427214146,"post_id":29217821,"comment_id":46681699,"body_markdown":"@JasonPlutext I uploaded my doc to http://webapp.docx4java.org/OnlineDemo/docx_to_pdf.html  and clicked process and I got pdf correctly.","body":"@JasonPlutext I uploaded my doc to <a href=\"http://webapp.docx4java.org/OnlineDemo/docx_to_pdf.html\" rel=\"nofollow noreferrer\">webapp.docx4java.org/OnlineDemo/docx_to_pdf.html</a>  and clicked process and I got pdf correctly."},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1427238639,"post_id":29217821,"comment_id":46694970,"body_markdown":"Please try http://webapp.docx4java.org/OnlineDemo/PartsList.html instead","body":"Please try <a href=\"http://webapp.docx4java.org/OnlineDemo/PartsList.html\" rel=\"nofollow noreferrer\">webapp.docx4java.org/OnlineDemo/PartsList.html</a> instead"},{"owner":{"account_id":2730129,"reputation":4790,"user_id":2354099,"accept_rate":74,"display_name":"pinkpanther"},"score":0,"creation_date":1427259767,"post_id":29217821,"comment_id":46700507,"body_markdown":"@JasonPlutext I tried, the page has shown [Content_Types].xml and parts information.","body":"@JasonPlutext I tried, the page has shown [Content_Types].xml and parts information."},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1427265678,"post_id":29217821,"comment_id":46702490,"body_markdown":"If you turn logging on, what does docx4j output before the stack trace?  Something like http://stackoverflow.com/questions/12363169/docx4j-no-suitable-jaxb-implementation-available-runtime-error-java-1-5 or http://www.docx4java.org/forums/docx-java-f6/invalidformatexception-by-using-docx4j-with-eclipse-t807.html the root cause for both of which is no JAXB implementation present","body":"If you turn logging on, what does docx4j output before the stack trace?  Something like <a href=\"http://stackoverflow.com/questions/12363169/docx4j-no-suitable-jaxb-implementation-available-runtime-error-java-1-5\" title=\"docx4j no suitable jaxb implementation available runtime error java 1 5\">stackoverflow.com/questions/12363169/&hellip;</a> or <a href=\"http://www.docx4java.org/forums/docx-java-f6/invalidformatexception-by-using-docx4j-with-eclipse-t807.html\" rel=\"nofollow noreferrer\">docx4java.org/forums/docx-java-f6/&hellip;</a> the root cause for both of which is no JAXB implementation present"},{"owner":{"account_id":2730129,"reputation":4790,"user_id":2354099,"accept_rate":74,"display_name":"pinkpanther"},"score":0,"creation_date":1427266597,"post_id":29217821,"comment_id":46702911,"body_markdown":"@JasonPlutext I&#39;m not sure how to do that logging thing...so I did the thing I&#39;ve mentioned in above update.  The exception is  `java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory`. Please see my update. thanks","body":"@JasonPlutext I&#39;m not sure how to do that logging thing...so I did the thing I&#39;ve mentioned in above update.  The exception is  <code>java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory</code>. Please see my update. thanks"}],"answers":[{"tags":[],"owner":{"account_id":2629832,"reputation":141,"user_id":2276097,"display_name":"Joe Doe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427140983,"creation_date":1427140983,"answer_id":29219320,"question_id":29217821,"body_markdown":"This works for me, try this out\r\n\r\n    import java.io.FileInputStream;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileOutputStream;\r\n    import java.io.OutputStream;\r\n    \r\n    import org.docx4j.Docx4J;\r\n    import org.docx4j.Docx4jProperties;\r\n    import org.docx4j.convert.out.HTMLSettings;\r\n    import org.docx4j.openpackaging.exceptions.Docx4JException;\r\n    import org.docx4j.openpackaging.packages.WordprocessingMLPackage;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String[] args) throws Docx4JException,\r\n    \t\t\tFileNotFoundException {\r\n    \t\tString inputfilepath = &quot;c:/file.docx&quot;;\r\n    \r\n    \r\n    \t\tWordprocessingMLPackage wordMLPackage = Docx4J\r\n    \t\t\t\t.load(new FileInputStream(inputfilepath));\r\n    \r\n    \t\t// HTML exporter setup (required)\r\n    \t\t//.. the HTMLSettings object\r\n    \t\tHTMLSettings htmlSettings = Docx4J.createHTMLSettings();\r\n    \r\n    \t\thtmlSettings.setImageDirPath(inputfilepath + &quot;_files&quot;);\r\n    \t\thtmlSettings.setImageTargetUri(inputfilepath.substring(inputfilepath\r\n    \t\t\t\t.lastIndexOf(&quot;/&quot;) + 1) + &quot;_files&quot;);\r\n    \t\thtmlSettings.setWmlPackage(wordMLPackage);\r\n    \r\n    \t\tOutputStream os = new FileOutputStream(inputfilepath + &quot;.html&quot;);\r\n    \r\n    \t\t// If you want XHTML output\r\n    \t\tDocx4jProperties.setProperty(&quot;docx4j.Convert.Out.HTML.OutputMethodXML&quot;, true);\r\n    \r\n    \t\t//Prefer the exporter, that uses a xsl transformation\r\n    \t\tDocx4J.toHTML(htmlSettings, os, Docx4J.FLAG_EXPORT_PREFER_XSL);\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Docx4j loading docx is giving NullPointerException","body":"<p>This works for me, try this out</p>\n\n<pre><code>import java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.OutputStream;\n\nimport org.docx4j.Docx4J;\nimport org.docx4j.Docx4jProperties;\nimport org.docx4j.convert.out.HTMLSettings;\nimport org.docx4j.openpackaging.exceptions.Docx4JException;\nimport org.docx4j.openpackaging.packages.WordprocessingMLPackage;\n\npublic class Test {\n    public static void main(String[] args) throws Docx4JException,\n            FileNotFoundException {\n        String inputfilepath = \"c:/file.docx\";\n\n\n        WordprocessingMLPackage wordMLPackage = Docx4J\n                .load(new FileInputStream(inputfilepath));\n\n        // HTML exporter setup (required)\n        //.. the HTMLSettings object\n        HTMLSettings htmlSettings = Docx4J.createHTMLSettings();\n\n        htmlSettings.setImageDirPath(inputfilepath + \"_files\");\n        htmlSettings.setImageTargetUri(inputfilepath.substring(inputfilepath\n                .lastIndexOf(\"/\") + 1) + \"_files\");\n        htmlSettings.setWmlPackage(wordMLPackage);\n\n        OutputStream os = new FileOutputStream(inputfilepath + \".html\");\n\n        // If you want XHTML output\n        Docx4jProperties.setProperty(\"docx4j.Convert.Out.HTML.OutputMethodXML\", true);\n\n        //Prefer the exporter, that uses a xsl transformation\n        Docx4J.toHTML(htmlSettings, os, Docx4J.FLAG_EXPORT_PREFER_XSL);\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1427274443,"creation_date":1427274443,"answer_id":29251422,"question_id":29217821,"body_markdown":"docx4j supports several different JAXB implementations:\r\n\r\n - the reference implementation\r\n - the one Sun/Oracle include in Java 6/7/8\r\n - EclipseLink MOXy\r\n\r\nIf you want to use MOXy, you need:\r\n\r\n1. the relevant EclipseLink jars\r\n2. docx4j-MOXy-JAXBContext-3.0.0.jar (which just contains the jaxb.properties files)\r\n\r\nThe jaxb.properties files just say:\r\n\r\njavax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory\r\n\r\nIf you are using maven, you&#39;ll just need to add:\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;docx4j-MOXy-JAXBContext&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\r\n    &lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\r\n    &lt;version&gt;2.5.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIs the docx4j-MOXy-JAXBContext jar on your classpath?  Either remove it, or add the relevant EclipseLink jars","title":"Docx4j loading docx is giving NullPointerException","body":"<p>docx4j supports several different JAXB implementations:</p>\n\n<ul>\n<li>the reference implementation</li>\n<li>the one Sun/Oracle include in Java 6/7/8</li>\n<li>EclipseLink MOXy</li>\n</ul>\n\n<p>If you want to use MOXy, you need:</p>\n\n<ol>\n<li>the relevant EclipseLink jars</li>\n<li>docx4j-MOXy-JAXBContext-3.0.0.jar (which just contains the jaxb.properties files)</li>\n</ol>\n\n<p>The jaxb.properties files just say:</p>\n\n<p>javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory</p>\n\n<p>If you are using maven, you'll just need to add:</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n&lt;artifactId&gt;docx4j-MOXy-JAXBContext&lt;/artifactId&gt;\n&lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;\n&lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;\n&lt;version&gt;2.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Is the docx4j-MOXy-JAXBContext jar on your classpath?  Either remove it, or add the relevant EclipseLink jars</p>\n"},{"tags":[],"owner":{"account_id":1289380,"reputation":757,"user_id":1241765,"accept_rate":67,"display_name":"ram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658658870,"creation_date":1658658870,"answer_id":73097615,"question_id":29217821,"body_markdown":"Ensure you&#39;ve all the right dependencies (including the appropriate JAXB Runtime)\r\n\r\n    implementation &#39;org.docx4j:docx4j-core:11.4.7&#39;\r\n    implementation &#39;org.docx4j:docx4j-MOXy-JAXBContext:6.0.0&#39;\r\n    implementation &#39;org.docx4j:docx4j-export-fo:11.4.7&#39;\r\n    implementation &#39;org.docx4j:docx4j-JAXB-Internal:8.3.8&#39;\r\n    implementation &#39;org.docx4j:docx4j-JAXB-ReferenceImpl:11.4.7&#39;\r\n    implementation &#39;org.docx4j:docx4j-JAXB-MOXy:11.4.7&#39;\r\n    implementation &#39;jakarta.xml.bind:jakarta.xml.bind-api:4.0.0&#39;\r\n    implementation &#39;org.glassfish.jaxb:jaxb-runtime:4.0.0&#39;\r\n    implementation &#39;jakarta.activation:jakarta.activation-api:2.1.0&#39;","title":"Docx4j loading docx is giving NullPointerException","body":"<p>Ensure you've all the right dependencies (including the appropriate JAXB Runtime)</p>\n<pre><code>implementation 'org.docx4j:docx4j-core:11.4.7'\nimplementation 'org.docx4j:docx4j-MOXy-JAXBContext:6.0.0'\nimplementation 'org.docx4j:docx4j-export-fo:11.4.7'\nimplementation 'org.docx4j:docx4j-JAXB-Internal:8.3.8'\nimplementation 'org.docx4j:docx4j-JAXB-ReferenceImpl:11.4.7'\nimplementation 'org.docx4j:docx4j-JAXB-MOXy:11.4.7'\nimplementation 'jakarta.xml.bind:jakarta.xml.bind-api:4.0.0'\nimplementation 'org.glassfish.jaxb:jaxb-runtime:4.0.0'\nimplementation 'jakarta.activation:jakarta.activation-api:2.1.0'\n</code></pre>\n"}],"owner":{"account_id":2730129,"reputation":4790,"user_id":2354099,"accept_rate":74,"display_name":"pinkpanther"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4219,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":29251422,"answer_count":3,"score":3,"last_activity_date":1658658870,"creation_date":1427135710,"question_id":29217821,"body_markdown":"I wanted to convert docx to html. I started writing the code same as examples given in github. This is just loading part. There itself I&#39;m getting the problem.\r\n\r\n    import org.docx4j.Docx4J;\r\n    import org.docx4j.openpackaging.exceptions.Docx4JException;\r\n    import org.docx4j.openpackaging.packages.WordprocessingMLPackage;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) throws Docx4JException, \r\n    \t\tString inputfilepath = &quot;myfilepathhere&quot;;\r\n    \r\n    \t\t\r\n    \t\tOutputStream os = new FileOutputStream(inputfilepath + &quot;.html&quot;);\r\n    \t\t\r\n    \t\tWordprocessingMLPackage wordMLPackage = Docx4J\r\n    \t\t\t\t.load(new FileInputStream(inputfilepath));\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nI&#39;m getting NullPointerException. Seeing the exception trace and navigating in source code in github, I suspect it has something to do with JAXB related thing from this class https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/jaxb/Context.java \r\n\r\nDocx4j source code is available at https://github.com/plutext/docx4j.\r\n\r\nException trace:\r\n\r\n    Exception in thread &quot;main&quot; org.docx4j.openpackaging.exceptions.Docx4JException: Couldn&#39;t get [Content_Types].xml from ZipFile\r\n    \tat org.docx4j.openpackaging.io3.Load3.get(Load3.java:134)\r\n    \tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:454)\r\n    \tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:371)\r\n    \tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:337)\r\n    \tat org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:302)\r\n    \tat org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:170)\r\n    \tat org.docx4j.Docx4J.load(Docx4J.java:195)\r\n    \tat Main.main(Main.java:29)\r\n    Caused by: org.docx4j.openpackaging.exceptions.InvalidFormatException: Bad [Content_Types].xml\r\n    \tat org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:713)\r\n    \tat org.docx4j.openpackaging.io3.Load3.get(Load3.java:132)\r\n    \t... 7 more\r\n    Caused by: java.lang.NullPointerException\r\n    \tat org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:679)\r\n    \t... 8 more\r\n\r\nThe docx document is good (created by Word 2010). I&#39;ve even unzipped it to see if the Content_Types.xml is there. It&#39;s there.\r\n\r\nI&#39;m using Eclipse and Java SE 7. I&#39;ve added all the required jar files to Java build path in project properties.\r\n\r\nPlease help me.\r\n\r\n**Update:**\r\n\r\nActually when I added this line from Context.java into my class to see if that&#39;s the problem.\r\n\r\n         JAXBContext.newInstance(&quot;org.docx4j.openpackaging.contenttype&quot;);\r\n\r\nI could see the following exception in my console:\r\n\r\n        Exception in thread &quot;main&quot; javax.xml.bind.JAXBException: Provider org.eclipse.persistence.jaxb.JAXBContextFactory not found\r\n     - with linked exception:\r\n    [java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory]\r\n    \tat javax.xml.bind.ContextFinder.newInstance(Unknown Source)\r\n    \tat javax.xml.bind.ContextFinder.find(Unknown Source)\r\n    \tat javax.xml.bind.JAXBContext.newInstance(Unknown Source)\r\n    \tat javax.xml.bind.JAXBContext.newInstance(Unknown Source)\r\n    \tat javax.xml.bind.JAXBContext.newInstance(Unknown Source)\r\n    \tat Main.main(Main.java:26)\r\n    Caused by: java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.net.URLClassLoader$1.run(Unknown Source)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n    \tat java.lang.ClassLoader.loadClass(Unknown Source)\r\n    \tat javax.xml.bind.ContextFinder.safeLoadClass(Unknown Source)\r\n    \t... 6 more\r\n\r\n\t\t\r\n\t\t  \r\n","title":"Docx4j loading docx is giving NullPointerException","body":"<p>I wanted to convert docx to html. I started writing the code same as examples given in github. This is just loading part. There itself I'm getting the problem.</p>\n\n<pre><code>import org.docx4j.Docx4J;\nimport org.docx4j.openpackaging.exceptions.Docx4JException;\nimport org.docx4j.openpackaging.packages.WordprocessingMLPackage;\n\npublic class Main {\n\n    public static void main(String[] args) throws Docx4JException, \n        String inputfilepath = \"myfilepathhere\";\n\n\n        OutputStream os = new FileOutputStream(inputfilepath + \".html\");\n\n        WordprocessingMLPackage wordMLPackage = Docx4J\n                .load(new FileInputStream(inputfilepath));\n\n    }\n}\n</code></pre>\n\n<p>I'm getting NullPointerException. Seeing the exception trace and navigating in source code in github, I suspect it has something to do with JAXB related thing from this class <a href=\"https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/jaxb/Context.java\" rel=\"nofollow\">https://github.com/plutext/docx4j/blob/master/src/main/java/org/docx4j/jaxb/Context.java</a> </p>\n\n<p>Docx4j source code is available at <a href=\"https://github.com/plutext/docx4j\" rel=\"nofollow\">https://github.com/plutext/docx4j</a>.</p>\n\n<p>Exception trace:</p>\n\n<pre><code>Exception in thread \"main\" org.docx4j.openpackaging.exceptions.Docx4JException: Couldn't get [Content_Types].xml from ZipFile\n    at org.docx4j.openpackaging.io3.Load3.get(Load3.java:134)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:454)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:371)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:337)\n    at org.docx4j.openpackaging.packages.OpcPackage.load(OpcPackage.java:302)\n    at org.docx4j.openpackaging.packages.WordprocessingMLPackage.load(WordprocessingMLPackage.java:170)\n    at org.docx4j.Docx4J.load(Docx4J.java:195)\n    at Main.main(Main.java:29)\nCaused by: org.docx4j.openpackaging.exceptions.InvalidFormatException: Bad [Content_Types].xml\n    at org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:713)\n    at org.docx4j.openpackaging.io3.Load3.get(Load3.java:132)\n    ... 7 more\nCaused by: java.lang.NullPointerException\n    at org.docx4j.openpackaging.contenttype.ContentTypeManager.parseContentTypesFile(ContentTypeManager.java:679)\n    ... 8 more\n</code></pre>\n\n<p>The docx document is good (created by Word 2010). I've even unzipped it to see if the Content_Types.xml is there. It's there.</p>\n\n<p>I'm using Eclipse and Java SE 7. I've added all the required jar files to Java build path in project properties.</p>\n\n<p>Please help me.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Actually when I added this line from Context.java into my class to see if that's the problem.</p>\n\n<pre><code>     JAXBContext.newInstance(\"org.docx4j.openpackaging.contenttype\");\n</code></pre>\n\n<p>I could see the following exception in my console:</p>\n\n<pre><code>    Exception in thread \"main\" javax.xml.bind.JAXBException: Provider org.eclipse.persistence.jaxb.JAXBContextFactory not found\n - with linked exception:\n[java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory]\n    at javax.xml.bind.ContextFinder.newInstance(Unknown Source)\n    at javax.xml.bind.ContextFinder.find(Unknown Source)\n    at javax.xml.bind.JAXBContext.newInstance(Unknown Source)\n    at javax.xml.bind.JAXBContext.newInstance(Unknown Source)\n    at javax.xml.bind.JAXBContext.newInstance(Unknown Source)\n    at Main.main(Main.java:26)\nCaused by: java.lang.ClassNotFoundException: org.eclipse.persistence.jaxb.JAXBContextFactory\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.net.URLClassLoader$1.run(Unknown Source)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at javax.xml.bind.ContextFinder.safeLoadClass(Unknown Source)\n    ... 6 more\n</code></pre>\n"},{"tags":["java","android","sorting","opencv","contour"],"comments":[{"owner":{"account_id":279665,"reputation":613,"user_id":574951,"display_name":"ivan_a"},"score":0,"creation_date":1429761063,"post_id":29808847,"comment_id":47754312,"body_markdown":"Just an advice, if you trying to detect those little circle locations template matching on normalized images should give you good results.","body":"Just an advice, if you trying to detect those little circle locations template matching on normalized images should give you good results."},{"owner":{"account_id":4227746,"reputation":155,"user_id":3460888,"accept_rate":42,"display_name":"Zain ul abdeen"},"score":0,"creation_date":1429770538,"post_id":29808847,"comment_id":47758003,"body_markdown":"@ivan_a couldn&#39;t understand , can you please elaborate?","body":"@ivan_a couldn&#39;t understand , can you please elaborate?"},{"owner":{"account_id":4474819,"reputation":41,"user_id":3640184,"display_name":"Riccardo Finazzi"},"score":0,"creation_date":1543492240,"post_id":29808847,"comment_id":93943964,"body_markdown":"Useful, but sometimes these algos can throw an exception: https://stackoverflow.com/questions/53538333/java-sorting-a-massive-arraylist-using-a-custom-comparator-sometimes-throws-iil","body":"Useful, but sometimes these algos can throw an exception: <a href=\"https://stackoverflow.com/questions/53538333/java-sorting-a-massive-arraylist-using-a-custom-comparator-sometimes-throws-iil\" title=\"java sorting a massive arraylist using a custom comparator sometimes throws iil\">stackoverflow.com/questions/53538333/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2835471,"reputation":19598,"user_id":2436175,"accept_rate":81,"display_name":"Antonio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429737637,"creation_date":1429737637,"answer_id":29809078,"question_id":29808847,"body_markdown":"You have the function [`boundingRect`](http://docs.opencv.org/java/org/opencv/imgproc/Imgproc.html#boundingRect%28org.opencv.core.MatOfPoint%29): With that you can find the topleft point of a bounding rectangle around the points. Then you can define a sorting function that orders the contours based on the location of this point for each contour.","title":"How to sort contours from top to bottom : Opencv , Android","body":"<p>You have the function <a href=\"http://docs.opencv.org/java/org/opencv/imgproc/Imgproc.html#boundingRect%28org.opencv.core.MatOfPoint%29\" rel=\"nofollow\"><code>boundingRect</code></a>: With that you can find the topleft point of a bounding rectangle around the points. Then you can define a sorting function that orders the contours based on the location of this point for each contour.</p>\n"},{"tags":[],"owner":{"account_id":13688154,"reputation":21,"user_id":9876747,"display_name":"user9876747"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527781877,"creation_date":1527781877,"answer_id":50628259,"question_id":29808847,"body_markdown":"I have the same problem and use the sort method of java.\r\n\r\n    //sort by y coordinates using the topleft point of every contour&#39;s bounding box\r\n        Collections.sort(contourList, new Comparator&lt;MatOfPoint&gt;() {\r\n            @Override\r\n            public int compare(MatOfPoint o1, MatOfPoint o2) {\r\n                Rect rect1 = Imgproc.boundingRect(o1);\r\n                Rect rect2 = Imgproc.boundingRect(o2);\r\n                int result = Double.compare(rect1.tl().y, rect2.tl().y);\r\n                return result;\r\n            }\r\n        } );\r\n\r\n\r\n\t//sort by x coordinates\r\n\tCollections.sort(contourList, new Comparator&lt;MatOfPoint&gt;() {\r\n            @Override\r\n            public int compare(MatOfPoint o1, MatOfPoint o2) {\r\n                Rect rect1 = Imgproc.boundingRect(o1);\r\n                Rect rect2 = Imgproc.boundingRect(o2);\r\n                int result = 0;\r\n                double total = rect1.tl().y/rect2.tl().y;\r\n                if (total&gt;=0.9 &amp;&amp; total&lt;=1.4 ){\r\n                    result = Double.compare(rect1.tl().x, rect2.tl().x);\r\n                }\r\n                return result;\r\n            }\r\n        });\r\n\r\n","title":"How to sort contours from top to bottom : Opencv , Android","body":"<p>I have the same problem and use the sort method of java.</p>\n\n<pre><code>//sort by y coordinates using the topleft point of every contour's bounding box\n    Collections.sort(contourList, new Comparator&lt;MatOfPoint&gt;() {\n        @Override\n        public int compare(MatOfPoint o1, MatOfPoint o2) {\n            Rect rect1 = Imgproc.boundingRect(o1);\n            Rect rect2 = Imgproc.boundingRect(o2);\n            int result = Double.compare(rect1.tl().y, rect2.tl().y);\n            return result;\n        }\n    } );\n\n\n//sort by x coordinates\nCollections.sort(contourList, new Comparator&lt;MatOfPoint&gt;() {\n        @Override\n        public int compare(MatOfPoint o1, MatOfPoint o2) {\n            Rect rect1 = Imgproc.boundingRect(o1);\n            Rect rect2 = Imgproc.boundingRect(o2);\n            int result = 0;\n            double total = rect1.tl().y/rect2.tl().y;\n            if (total&gt;=0.9 &amp;&amp; total&lt;=1.4 ){\n                result = Double.compare(rect1.tl().x, rect2.tl().x);\n            }\n            return result;\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15736708,"reputation":434,"user_id":11355432,"display_name":"Ismail Osunlana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658658354,"creation_date":1658658354,"answer_id":73097558,"question_id":29808847,"body_markdown":"@user9876747 solution works great for small contour list but throws the below exception for larger contour list.\r\n\r\n    java.lang.IllegalArgumentException: Comparison method violates its general contract!\r\n\r\n\r\nSo i was able to tweak the solution to below and it works fine for large contour lists.\r\n\r\n\r\n     Collections.sort(contours, new Comparator&lt;MatOfPoint&gt;() {\r\n            public int compare(MatOfPoint o1, MatOfPoint o2) {\r\n                org.opencv.core.Rect rect1 = Imgproc.boundingRect(o1);\r\n                org.opencv.core.Rect rect2 = Imgproc.boundingRect(o2);\r\n\r\n\r\n                int result = Double.compare(rect1.br().y, rect2.br().y);\r\n                double total = rect1.br().y / rect2.br().y;\r\n\r\n                if (total &lt; 1.1 &amp;&amp; total &gt; 1/1.1) {\r\n                    result = Double.compare(rect1.tl().x, rect2.tl().x);\r\n                }\r\n                return result;\r\n            }\r\n        });","title":"How to sort contours from top to bottom : Opencv , Android","body":"<p>@user9876747 solution works great for small contour list but throws the below exception for larger contour list.</p>\n<pre><code>java.lang.IllegalArgumentException: Comparison method violates its general contract!\n</code></pre>\n<p>So i was able to tweak the solution to below and it works fine for large contour lists.</p>\n<pre><code> Collections.sort(contours, new Comparator&lt;MatOfPoint&gt;() {\n        public int compare(MatOfPoint o1, MatOfPoint o2) {\n            org.opencv.core.Rect rect1 = Imgproc.boundingRect(o1);\n            org.opencv.core.Rect rect2 = Imgproc.boundingRect(o2);\n\n\n            int result = Double.compare(rect1.br().y, rect2.br().y);\n            double total = rect1.br().y / rect2.br().y;\n\n            if (total &lt; 1.1 &amp;&amp; total &gt; 1/1.1) {\n                result = Double.compare(rect1.tl().x, rect2.tl().x);\n            }\n            return result;\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":4227746,"reputation":155,"user_id":3460888,"accept_rate":42,"display_name":"Zain ul abdeen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3770,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1658658354,"creation_date":1429736826,"question_id":29808847,"body_markdown":"I have found the contour but the problem is that the findcontours() returns contours in random order like at contour(0) it shows some sontour from middle of the page. How can I sort them vertically? From top to bottom and then left to right? Given the image below I connected the components horizontally and connected every MCQ with their choices and then applied findcontours() and Now I want to sort them in an order that they should be retrieved sequentially \r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/BJq8M.jpg","title":"How to sort contours from top to bottom : Opencv , Android","body":"<p>I have found the contour but the problem is that the findcontours() returns contours in random order like at contour(0) it shows some sontour from middle of the page. How can I sort them vertically? From top to bottom and then left to right? Given the image below I connected the components horizontally and connected every MCQ with their choices and then applied findcontours() and Now I want to sort them in an order that they should be retrieved sequentially </p>\n\n<p><img src=\"https://i.stack.imgur.com/BJq8M.jpg\" alt=\"enter image description here\"></p>\n"},{"tags":["java","spring","rest","spring-webflux"],"comments":[{"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"score":0,"creation_date":1658406422,"post_id":73063760,"comment_id":129046835,"body_markdown":"Please share implementation of `employeeService.processDocs`","body":"Please share implementation of <code>employeeService.processDocs</code>"}],"answers":[{"tags":[],"owner":{"account_id":9571010,"reputation":161,"user_id":7108639,"display_name":"rajat behl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1658658150,"creation_date":1658658150,"answer_id":73097530,"question_id":73063760,"body_markdown":"Instead of using MultipartFile use FilePart to consume multipart content as per the [spring docs](https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux-multipart-forms)\r\n\r\nBelow is the working code snippet\r\n\r\n    @PostMapping(path = &quot;employees&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\r\n\tpublic Mono&lt;ResponseEntity&lt;Response&gt;&gt; processEmployeeDocs(@RequestPart Employee request, @RequestPart Flux&lt;FilePart&gt; files) {\r\n\t\tlog.info(&quot;processing request {}&quot;, request);\r\n\t\treturn files.flatMap(part -&gt; part.transferTo(Paths.get(&quot;temp&quot;, File.separator, part.filename())))\r\n\t\t\t\t.then(employeeService.processDocs(request))\r\n\t\t\t\t.then(Mono.just(ResponseEntity.ok().build()));\r\n\t}\r\n\r\nThe above code will save the files in &quot;temp&quot; directory. You can use those files for processing your logic.\r\n\r\nPostman Request\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jn38r.png","title":"How to consume Request Body (JSON) along with multiple files (multipart/form-data) via REST API in Spring Boot?","body":"<p>Instead of using MultipartFile use FilePart to consume multipart content as per the <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux-multipart-forms\" rel=\"nofollow noreferrer\">spring docs</a></p>\n<p>Below is the working code snippet</p>\n<pre><code>@PostMapping(path = &quot;employees&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\npublic Mono&lt;ResponseEntity&lt;Response&gt;&gt; processEmployeeDocs(@RequestPart Employee request, @RequestPart Flux&lt;FilePart&gt; files) {\n    log.info(&quot;processing request {}&quot;, request);\n    return files.flatMap(part -&gt; part.transferTo(Paths.get(&quot;temp&quot;, File.separator, part.filename())))\n            .then(employeeService.processDocs(request))\n            .then(Mono.just(ResponseEntity.ok().build()));\n}\n</code></pre>\n<p>The above code will save the files in &quot;temp&quot; directory. You can use those files for processing your logic.</p>\n<p>Postman Request\n<a href=\"https://i.stack.imgur.com/jn38r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jn38r.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25859424,"reputation":11,"user_id":19592110,"display_name":"Prateek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3885,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1658658150,"creation_date":1658395710,"question_id":73063760,"body_markdown":"I want to consume both JSON &amp; files in an API for my spring boot application (using Spring WebFlux). I tried multiple ways as was recommended over the internet ([Article1][1], [Article2][2], [Article3][3]), but it&#39;s not working for me. The API is not being hit and getting status 415 (Unsupported Media Type) from [Postman][4].\r\n\r\n**Spring-Boot version :** 2.5.3\r\n\r\n**Spring-Web/Webflux version :** 5.3.9 \r\n\r\n**Employee :**\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class Employee {\r\n    \t\r\n    \tprivate String name;\r\n    \tprivate int age;\r\n    \tprivate int mobileNo;\r\n    \tprivate List&lt;MultipartFile&gt; files;\r\n    \r\n    }\r\n\r\n**Controller :**\r\n\t\r\n  \t@PostMapping(path = &quot;employee&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\r\n\tpublic Mono&lt;Response&gt; processEmployeeDocs(@RequestPart Employee request, @RequestPart List&lt;MultipartFile&gt; files) {\r\n\t\tEmployee employee = new Employee(request.getName(), request.getAge(), request.getMobileNo(), files);\r\n\t\treturn employeeService.processDocs(employee);\r\n\t}\r\n  \r\n\r\n\r\n  [1]: https://blogs.perficient.com/2020/07/27/requestbody-and-multipart-on-spring-boot/\r\n  [2]: https://www.androidbugfix.com/2022/01/problem-with-modelattribute-while.html?m=1\r\n  [3]: https://www.baeldung.com/sprint-boot-multipart-requests\r\n  [4]: https://i.stack.imgur.com/aYWuw.png","title":"How to consume Request Body (JSON) along with multiple files (multipart/form-data) via REST API in Spring Boot?","body":"<p>I want to consume both JSON &amp; files in an API for my spring boot application (using Spring WebFlux). I tried multiple ways as was recommended over the internet (<a href=\"https://blogs.perficient.com/2020/07/27/requestbody-and-multipart-on-spring-boot/\" rel=\"nofollow noreferrer\">Article1</a>, <a href=\"https://www.androidbugfix.com/2022/01/problem-with-modelattribute-while.html?m=1\" rel=\"nofollow noreferrer\">Article2</a>, <a href=\"https://www.baeldung.com/sprint-boot-multipart-requests\" rel=\"nofollow noreferrer\">Article3</a>), but it's not working for me. The API is not being hit and getting status 415 (Unsupported Media Type) from <a href=\"https://i.stack.imgur.com/aYWuw.png\" rel=\"nofollow noreferrer\">Postman</a>.</p>\n<p><strong>Spring-Boot version :</strong> 2.5.3</p>\n<p><strong>Spring-Web/Webflux version :</strong> 5.3.9</p>\n<p><strong>Employee :</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Employee {\n    \n    private String name;\n    private int age;\n    private int mobileNo;\n    private List&lt;MultipartFile&gt; files;\n\n}\n</code></pre>\n<p><strong>Controller :</strong></p>\n<pre><code>@PostMapping(path = &quot;employee&quot;, consumes = {MediaType.APPLICATION_JSON_VALUE, MediaType.MULTIPART_FORM_DATA_VALUE})\npublic Mono&lt;Response&gt; processEmployeeDocs(@RequestPart Employee request, @RequestPart List&lt;MultipartFile&gt; files) {\n    Employee employee = new Employee(request.getName(), request.getAge(), request.getMobileNo(), files);\n    return employeeService.processDocs(employee);\n}\n</code></pre>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":25876439,"reputation":159,"user_id":19606347,"display_name":"Fede Cana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658656549,"creation_date":1658656549,"answer_id":73097359,"question_id":73097332,"body_markdown":"Make sure the Activity is placed inside the Manifest file. [Look here][1]\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/manifest/activity-element","title":"my app keeps crashing in android studio for some random reason","body":"<p>Make sure the Activity is placed inside the Manifest file. <a href=\"https://developer.android.com/guide/topics/manifest/activity-element\" rel=\"nofollow noreferrer\">Look here</a></p>\n"},{"tags":[],"owner":{"account_id":18571239,"reputation":4748,"user_id":13533028,"display_name":"Narendra_Nath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658657590,"creation_date":1658657590,"answer_id":73097469,"question_id":73097332,"body_markdown":"Open the app&gt;manifests . You&#39;ll find a File called AndroidManifest\r\n\r\nin between \r\n```\r\n&lt;application\r\n.\r\n.&lt;activity\r\n            android:name=&quot;com.example.&lt;your_package_name&gt;.ComponentInfo&quot; /&gt;\r\n.\r\n&gt;\r\n&lt;/application&gt;\r\n```\r\n\r\nThis might have happened because you created a class and created a layout file seperately.. hemceforth create it like so right clock New&gt; Activity &gt; Empty Activity\r\n\r\nThat way your layout files get created and the manifest entry gets added as well automatically\r\n\r\n\r\n\r\n","title":"my app keeps crashing in android studio for some random reason","body":"<p>Open the app&gt;manifests . You'll find a File called AndroidManifest</p>\n<p>in between</p>\n<pre><code>&lt;application\n.\n.&lt;activity\n            android:name=&quot;com.example.&lt;your_package_name&gt;.ComponentInfo&quot; /&gt;\n.\n&gt;\n&lt;/application&gt;\n</code></pre>\n<p>This might have happened because you created a class and created a layout file seperately.. hemceforth create it like so right clock New&gt; Activity &gt; Empty Activity</p>\n<p>That way your layout files get created and the manifest entry gets added as well automatically</p>\n"}],"owner":{"account_id":25882065,"reputation":7,"user_id":19610910,"display_name":"Kris lee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1658657590,"creation_date":1658656345,"question_id":73097332,"body_markdown":"so basically, i am trying to develop an app in android studio but it keeps crashing. I got no idea why. can som1 help?\r\n\r\nThis is the error code below:\r\n\r\n    2022-07-24 12:45:13.430 9938-9938/com.example.aviationista E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.aviationista, PID: 9938\r\n    java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.aviationista/com.example.aviationista.MainActivity}: java.lang.InstantiationException: java.lang.Class&lt;com.example.aviationista.MainActivity&gt; cannot be instantiated\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3545)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)\r\n        at android.os.Looper.loopOnce(Looper.java:201)\r\n        at android.os.Looper.loop(Looper.java:288)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7839)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\r\n     Caused by: java.lang.InstantiationException: java.lang.Class&lt;com.example.aviationista.MainActivity&gt; cannot be instantiated\r\n        at java.lang.Class.newInstance(Native Method)\r\n        at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\r\n        at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\r\n        at android.app.Instrumentation.newActivity(Instrumentation.java:1273)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3532)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)&#160;\r\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n        at android.os.Looper.loopOnce(Looper.java:201)&#160;\r\n        at android.os.Looper.loop(Looper.java:288)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:7839)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)&#160;\r\n\r\n\r\n","title":"my app keeps crashing in android studio for some random reason","body":"<p>so basically, i am trying to develop an app in android studio but it keeps crashing. I got no idea why. can som1 help?</p>\n<p>This is the error code below:</p>\n<pre><code>2022-07-24 12:45:13.430 9938-9938/com.example.aviationista E/AndroidRuntime: FATAL EXCEPTION: main\nProcess: com.example.aviationista, PID: 9938\njava.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.aviationista/com.example.aviationista.MainActivity}: java.lang.InstantiationException: java.lang.Class&lt;com.example.aviationista.MainActivity&gt; cannot be instantiated\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3545)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7839)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n Caused by: java.lang.InstantiationException: java.lang.Class&lt;com.example.aviationista.MainActivity&gt; cannot be instantiated\n    at java.lang.Class.newInstance(Native Method)\n    at android.app.AppComponentFactory.instantiateActivity(AppComponentFactory.java:95)\n    at androidx.core.app.CoreComponentFactory.instantiateActivity(CoreComponentFactory.java:45)\n    at android.app.Instrumentation.newActivity(Instrumentation.java:1273)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3532)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:103)\n    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2210)\n    at android.os.Handler.dispatchMessage(Handler.java:106)\n    at android.os.Looper.loopOnce(Looper.java:201)\n    at android.os.Looper.loop(Looper.java:288)\n    at android.app.ActivityThread.main(ActivityThread.java:7839)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1658656687,"post_id":73097226,"comment_id":129101083,"body_markdown":"It&#39;s not about the API, you are debugging an APK running on the device and that APK&#39;s source is different than what you have in your Android Studio. The API version you have is irrelevant. Is the APK you are debugging compiled from your PC?","body":"It&#39;s not about the API, you are debugging an APK running on the device and that APK&#39;s source is different than what you have in your Android Studio. The API version you have is irrelevant. Is the APK you are debugging compiled from your PC?"},{"owner":{"account_id":19498202,"reputation":305,"user_id":14368551,"display_name":"VanechikSpace"},"score":0,"creation_date":1658656903,"post_id":73097226,"comment_id":129101120,"body_markdown":"@DanBaruch yes, it is","body":"@DanBaruch yes, it is"},{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1658657554,"post_id":73097226,"comment_id":129101232,"body_markdown":"And were there any modification? Have you tried pressing the bug icon instead of the Play icon when you have Android Studio open with the phone connected?","body":"And were there any modification? Have you tried pressing the bug icon instead of the Play icon when you have Android Studio open with the phone connected?"},{"owner":{"account_id":19498202,"reputation":305,"user_id":14368551,"display_name":"VanechikSpace"},"score":0,"creation_date":1658657727,"post_id":73097226,"comment_id":129101255,"body_markdown":"@DanBaruch it is worth clarifying, this message appears when i&#39;m trying to look at android SDK&#39;s source file, but not my own one","body":"@DanBaruch it is worth clarifying, this message appears when i&#39;m trying to look at android SDK&#39;s source file, but not my own one"},{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1658658484,"post_id":73097226,"comment_id":129101362,"body_markdown":"By Android SDK you mean like a system app? i.e the file manager that comes with your phone? or maybe the settings app? If that&#39;s the case, you need the source of the vendor of your phone. The code of Android you find online is the Vanilla android, OEM change that code to benefit their product more.","body":"By Android SDK you mean like a system app? i.e the file manager that comes with your phone? or maybe the settings app? If that&#39;s the case, you need the source of the vendor of your phone. The code of Android you find online is the Vanilla android, OEM change that code to benefit their product more."},{"owner":{"account_id":19498202,"reputation":305,"user_id":14368551,"display_name":"VanechikSpace"},"score":0,"creation_date":1658659981,"post_id":73097226,"comment_id":129101611,"body_markdown":"i mean, i throw an exception that i am not trying to catch. Then i create java exception breakpoint. when i press bug icon my program stops on the place where i throw the exception. And now i can see stack trace. There is so many methods under the one where i threw the exception. All those are methods of Android SDK. When i choose one of them i can see messsage &quot;source code doesn&#39;t match bytecode&quot;, though my compileSdk and API that uses the phone are the same. @DanBaruch","body":"i mean, i throw an exception that i am not trying to catch. Then i create java exception breakpoint. when i press bug icon my program stops on the place where i throw the exception. And now i can see stack trace. There is so many methods under the one where i threw the exception. All those are methods of Android SDK. When i choose one of them i can see messsage &quot;source code doesn&#39;t match bytecode&quot;, though my compileSdk and API that uses the phone are the same. @DanBaruch"},{"owner":{"account_id":11873112,"reputation":1073,"user_id":8688810,"display_name":"Dan Baruch"},"score":0,"creation_date":1658660317,"post_id":73097226,"comment_id":129101660,"body_markdown":"I finally understand what you mean. No, you can&#39;t debug Android SDK like this, you&#39;ll need to download it to your PC and hope you can debug it from there. How ever, Android&#39;s code shouldn&#39;t be the cause of your exception. Meaning, you are probably using the code incorrectly. It would be better if you created a new question, providing info about the problem you are facing along with the code you are running","body":"I finally understand what you mean. No, you can&#39;t debug Android SDK like this, you&#39;ll need to download it to your PC and hope you can debug it from there. How ever, Android&#39;s code shouldn&#39;t be the cause of your exception. Meaning, you are probably using the code incorrectly. It would be better if you created a new question, providing info about the problem you are facing along with the code you are running"}],"owner":{"account_id":19498202,"reputation":305,"user_id":14368551,"display_name":"VanechikSpace"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1658657589,"creation_date":1658655374,"question_id":73097226,"body_markdown":"The following is all installed things in my android studio:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI have no other installed API or system images. This is my `build.gradle` file\r\n```\r\nplugins {\r\n\tid &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n\tcompileSdk 32\r\n\r\n\tdefaultConfig {\r\n\t\tapplicationId &quot;android.bignerdranch.quiz&quot;\r\n\t\tminSdk 19\r\n\t\ttargetSdk 32\r\n\t\tversionCode 1\r\n\t\tversionName &quot;1.0&quot;\r\n\r\n\t\ttestInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n\t}\r\n\r\n\tbuildTypes {\r\n\t\trelease {\r\n\t\t\tminifyEnabled false\r\n\t\t\tproguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n\t\t}\r\n\t}\r\n\tcompileOptions {\r\n\t\tsourceCompatibility JavaVersion.VERSION_1_8\r\n\t\ttargetCompatibility JavaVersion.VERSION_1_8\r\n\t}\r\n}\r\n\r\ndependencies {\r\n\r\n\timplementation &#39;androidx.appcompat:appcompat:1.4.2&#39;\r\n\timplementation &#39;com.google.android.material:material:1.6.1&#39;\r\n\timplementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n\ttestImplementation &#39;junit:junit:4.13.2&#39;\r\n\tandroidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n\tandroidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n}\r\n```\r\nBut despite i have API and system image that uses the same API while debugging, when i am in android SDK&#39;s source file, i get this writing:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p7S3v.png\r\n\r\nYeah, i know that there is this [topic](https://stackoverflow.com/questions/39990752/source-code-does-not-match-the-bytecode-when-debugging-on-a-device), but mostly people there advice to disable instant run that doesn&#39;t exist in the current version of android studio\r\n\r\n  [2]: https://i.stack.imgur.com/VL3Jp.png\r\n\r\nAdditionally, i tried to do next things:\r\n\r\n-Clean project\r\n\r\n-Reinstall SDK\r\n\r\n-Sync project with Gradle files\r\n\r\n-Refresh gradle dependencies\r\n\r\n-set minSdkVersion to be the same as Compile and Target\r\n\r\n-delete gradle cache file\r\n\r\nbut anyway i get this message. **Any idea how to fix it ?**\r\n\r\n","title":"how to fix &quot;source code doesn&#39;t match bytecode&quot;?","body":"<p>The following is all installed things in my android studio:\n<a href=\"https://i.stack.imgur.com/p7S3v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p7S3v.png\" alt=\"enter image description here\" /></a></p>\n<p>I have no other installed API or system images. This is my <code>build.gradle</code> file</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdk 32\n\n    defaultConfig {\n        applicationId &quot;android.bignerdranch.quiz&quot;\n        minSdk 19\n        targetSdk 32\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.2'\n    implementation 'com.google.android.material:material:1.6.1'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>But despite i have API and system image that uses the same API while debugging, when i am in android SDK's source file, i get this writing:\n<a href=\"https://i.stack.imgur.com/VL3Jp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VL3Jp.png\" alt=\"enter image description here\" /></a></p>\n<p>Yeah, i know that there is this <a href=\"https://stackoverflow.com/questions/39990752/source-code-does-not-match-the-bytecode-when-debugging-on-a-device\">topic</a>, but mostly people there advice to disable instant run that doesn't exist in the current version of android studio</p>\n<p>Additionally, i tried to do next things:</p>\n<p>-Clean project</p>\n<p>-Reinstall SDK</p>\n<p>-Sync project with Gradle files</p>\n<p>-Refresh gradle dependencies</p>\n<p>-set minSdkVersion to be the same as Compile and Target</p>\n<p>-delete gradle cache file</p>\n<p>but anyway i get this message. <strong>Any idea how to fix it ?</strong></p>\n"},{"tags":["java","post"],"comments":[{"owner":{"account_id":14966839,"reputation":400,"user_id":10804821,"display_name":"Rohit Babu"},"score":1,"creation_date":1658599475,"post_id":73092975,"comment_id":129093631,"body_markdown":"Does this answer your question? [Upload files from Java client to a HTTP server](https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2469451/upload-files-from-java-client-to-a-http-server\">Upload files from Java client to a HTTP server</a>"}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658657065,"creation_date":1658657065,"answer_id":73097404,"question_id":73092975,"body_markdown":"There are several Http clients available that you can try. The popular ones would be \r\n\r\n 1. [Apache Http client][1]\r\n 2. [OK Http client][2].\r\nI actually wrote my own Http client which is part of MgntUtils Open Source library written and maintained by me. The reason I wrote my own Http client is to provide a very simple option. It doesn&#39;t support all the features provided in other clients but is very simple in use, and it does support uploading and downloading binary information. Assuming from your code that `key`, `client_id`, and `direction_id` could be passed as request headers your code could be something like this\r\n\r\nbyte[] content = readFile() //Read file as bytes here\r\n\r\n    \r\n        byte[] content = readFile() //Read file as bytes hereHttpClient client = new HttpClient();\r\n        client.setContentType(&quot;image/jpeg&quot;);\r\n        client.setRequestHeader(&quot;key&quot;, key);\r\n        client.setRequestHeader(&quot;client_id&quot;, client_id);\r\n        client.setRequestHeader(&quot;direction_id&quot;, direction_id);\r\n        String result = client.sendHttpRequest(&quot; https://0x0.st&quot;, HttpMethod.POST, ByteBuffer.wrap(content));\r\n        System.out.println(&quot;Upload result: &quot; + result); //If you expect any textual reply\r\n        System.out.println(&quot;Upload HTTP response&quot; + client.getLastResponseCode() + &quot; &quot; + client.getLastResponseMessage());\r\n\r\nHere is Javadoc for [HttpClient][3] class. The library could be obtained as [Maven artifacts][4] or from [Github][5], including source code and Javadoc\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.1.x/\r\n  [2]: https://square.github.io/okhttp/\r\n  [3]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\r\n  [4]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [5]: https://github.com/michaelgantman/Mgnt/releases","title":"I can&#39;t figure out how to send a file via POST request to https://0x0.st in java","body":"<p>There are several Http clients available that you can try. The popular ones would be</p>\n<ol>\n<li><a href=\"https://hc.apache.org/httpcomponents-client-5.1.x/\" rel=\"nofollow noreferrer\">Apache Http client</a></li>\n<li><a href=\"https://square.github.io/okhttp/\" rel=\"nofollow noreferrer\">OK Http client</a>.\nI actually wrote my own Http client which is part of MgntUtils Open Source library written and maintained by me. The reason I wrote my own Http client is to provide a very simple option. It doesn't support all the features provided in other clients but is very simple in use, and it does support uploading and downloading binary information. Assuming from your code that <code>key</code>, <code>client_id</code>, and <code>direction_id</code> could be passed as request headers your code could be something like this</li>\n</ol>\n<p>byte[] content = readFile() //Read file as bytes here</p>\n<pre><code>    byte[] content = readFile() //Read file as bytes hereHttpClient client = new HttpClient();\n    client.setContentType(&quot;image/jpeg&quot;);\n    client.setRequestHeader(&quot;key&quot;, key);\n    client.setRequestHeader(&quot;client_id&quot;, client_id);\n    client.setRequestHeader(&quot;direction_id&quot;, direction_id);\n    String result = client.sendHttpRequest(&quot; https://0x0.st&quot;, HttpMethod.POST, ByteBuffer.wrap(content));\n    System.out.println(&quot;Upload result: &quot; + result); //If you expect any textual reply\n    System.out.println(&quot;Upload HTTP response&quot; + client.getLastResponseCode() + &quot; &quot; + client.getLastResponseMessage());\n</code></pre>\n<p>Here is Javadoc for <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/lifecycle/management/httpclient/HttpClient.html\" rel=\"nofollow noreferrer\">HttpClient</a> class. The library could be obtained as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">Maven artifacts</a> or from <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a>, including source code and Javadoc</p>\n"},{"tags":[],"owner":{"account_id":24342083,"reputation":192,"user_id":18279335,"display_name":"Duff"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658657538,"creation_date":1658657538,"answer_id":73097459,"question_id":73092975,"body_markdown":"Try this:\r\n\r\n    public static String uploadFile(String path, ContentType contentType) throws IOException {\r\n\t\tFile file = new File(path);\r\n\t\tURI serverURL = URI.create(&quot;https://0x0.st/&quot;);\r\n\t\t\r\n\t\ttry(CloseableHttpClient client = HttpClientBuilder.create().build()) {\r\n\t\t\tMultipartEntityBuilder builder = MultipartEntityBuilder.create();\r\n\t\t\tbuilder.addBinaryBody(&quot;file&quot;, file, contentType, file.getName());\r\n\t\t\tHttpEntity requestEntity = builder.build();\r\n\t\t\t\r\n\t\t\tHttpPost post = new HttpPost(serverURL);\r\n\t\t\tpost.setEntity(requestEntity);\r\n\t\t\t\r\n\t\t\ttry(CloseableHttpResponse response = client.execute(post)) {\r\n\t\t\t\tHttpEntity responseEntity = response.getEntity();\r\n\t\t\t\tint responseCode = response.getStatusLine().getStatusCode();\r\n\t\t\t\tString responseString = EntityUtils.toString(responseEntity, &quot;UTF-8&quot;);\r\n\t\t\t\t\r\n\t\t\t\tif(responseCode == 200)\r\n\t\t\t\t\treturn responseString;\r\n\t\t\t\telse throw new RuntimeException(responseCode + &quot;: &quot; + responseString);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\nThe key for your upload must be *file*, *url* or *shorten*, otherwise you will get a 400 *bad request* response. If the request is successful, the provided code returns the URL for your uploaded file.","title":"I can&#39;t figure out how to send a file via POST request to https://0x0.st in java","body":"<p>Try this:</p>\n<pre><code>public static String uploadFile(String path, ContentType contentType) throws IOException {\n    File file = new File(path);\n    URI serverURL = URI.create(&quot;https://0x0.st/&quot;);\n    \n    try(CloseableHttpClient client = HttpClientBuilder.create().build()) {\n        MultipartEntityBuilder builder = MultipartEntityBuilder.create();\n        builder.addBinaryBody(&quot;file&quot;, file, contentType, file.getName());\n        HttpEntity requestEntity = builder.build();\n        \n        HttpPost post = new HttpPost(serverURL);\n        post.setEntity(requestEntity);\n        \n        try(CloseableHttpResponse response = client.execute(post)) {\n            HttpEntity responseEntity = response.getEntity();\n            int responseCode = response.getStatusLine().getStatusCode();\n            String responseString = EntityUtils.toString(responseEntity, &quot;UTF-8&quot;);\n            \n            if(responseCode == 200)\n                return responseString;\n            else throw new RuntimeException(responseCode + &quot;: &quot; + responseString);\n        }\n    }\n}\n</code></pre>\n<p>The key for your upload must be <em>file</em>, <em>url</em> or <em>shorten</em>, otherwise you will get a 400 <em>bad request</em> response. If the request is successful, the provided code returns the URL for your uploaded file.</p>\n"}],"owner":{"account_id":19301834,"reputation":15,"user_id":14109539,"display_name":"CarryLove"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73097459,"answer_count":2,"score":0,"last_activity_date":1658657538,"creation_date":1658598146,"question_id":73092975,"body_markdown":"I can&#39;t figure out how to send a file via POST request to https://0x0.st in java\r\n\r\nMy code:\r\n\r\n    MultipartEntityBuilder builder = MultipartEntityBuilder.create();\r\n    \r\n    builder.addTextBody(&quot;key&quot;, key);\r\n    builder.addTextBody(&quot;client_id&quot;, client_id );\r\n    builder.addTextBody(&quot;direction_id&quot;, direction_id);\r\n    \r\n    ContentType fileContentType = ContentType.create(&quot;image/jpeg&quot;);\r\n    String fileName = file.getName();\r\n    builder.addBinaryBody(&quot;client_files&quot;, file, fileContentType, fileName);\r\n    \r\n    HttpEntity entity = builder.build();\r\n","title":"I can&#39;t figure out how to send a file via POST request to https://0x0.st in java","body":"<p>I can't figure out how to send a file via POST request to <a href=\"https://0x0.st\" rel=\"nofollow noreferrer\">https://0x0.st</a> in java</p>\n<p>My code:</p>\n<pre><code>MultipartEntityBuilder builder = MultipartEntityBuilder.create();\n\nbuilder.addTextBody(&quot;key&quot;, key);\nbuilder.addTextBody(&quot;client_id&quot;, client_id );\nbuilder.addTextBody(&quot;direction_id&quot;, direction_id);\n\nContentType fileContentType = ContentType.create(&quot;image/jpeg&quot;);\nString fileName = file.getName();\nbuilder.addBinaryBody(&quot;client_files&quot;, file, fileContentType, fileName);\n\nHttpEntity entity = builder.build();\n</code></pre>\n"},{"tags":["java","algorithm","recursion","binary-search"],"comments":[{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1658639653,"post_id":73095720,"comment_id":129098685,"body_markdown":"Look at the trace output generated: `Found!\ntest` - `test` should only be printed when not found, but the value was reported found?!. The main problem is that when you decide a recursive call should complete the work, you don&#39;t return it&#39;s result: `return BS(arr, target, first, last);`. (Minor: `first != last` isn&#39;t &quot;defensive&quot;.)","body":"Look at the trace output generated: <code>Found! test</code> - <code>test</code> should only be printed when not found, but the value was reported found?!. The main problem is that when you decide a recursive call should complete the work, you don&#39;t return it&#39;s result: <code>return BS(arr, target, first, last);</code>. (Minor: <code>first != last</code> isn&#39;t &quot;defensive&quot;.)"},{"owner":{"account_id":24887093,"reputation":23,"user_id":18759563,"display_name":"Shotto"},"score":0,"creation_date":1658640798,"post_id":73095720,"comment_id":129098801,"body_markdown":"@greybeard Thanks,Grey. Yes, you are right, I just realise that I have to return the BS . BTW, what &#39;s the meaning of the minor tips? I am curious about it.","body":"@greybeard Thanks,Grey. Yes, you are right, I just realise that I have to return the BS . BTW, what &#39;s the meaning of the minor tips? I am curious about it."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1658720944,"post_id":73095720,"comment_id":129112579,"body_markdown":"In every call, either `first` is increased, or `last` decreased. What if  `first` got *larger* than `last`? Does the code include a proof they will be equal? Bonus: When you use *crossed* to return *not found*, you don&#39;t need to handle value equality in two places.","body":"In every call, either <code>first</code> is increased, or <code>last</code> decreased. What if  <code>first</code> got <i>larger</i> than <code>last</code>? Does the code include a proof they will be equal? Bonus: When you use <i>crossed</i> to return <i>not found</i>, you don&#39;t need to handle value equality in two places."},{"owner":{"account_id":24887093,"reputation":23,"user_id":18759563,"display_name":"Shotto"},"score":0,"creation_date":1658822332,"post_id":73095720,"comment_id":129140427,"body_markdown":"Sorry, still confused. I understand the situation you mentioned, but I don&#39;t understand why first will be greater than last, cuz each time either of them will +1 only, they have to meet each other ( first == last).","body":"Sorry, still confused. I understand the situation you mentioned, but I don&#39;t understand why first will be greater than last, cuz each time either of them will +1 only, they have to meet each other ( first == last)."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1658824072,"post_id":73095720,"comment_id":129141096,"body_markdown":"*Defensive programming is [] to avoid problematic issues **before they arise***.","body":"<i>Defensive programming is [] to avoid problematic issues <b>before they arise</i></b>."}],"answers":[{"tags":[],"owner":{"account_id":1706785,"reputation":48162,"user_id":1565698,"accept_rate":38,"display_name":"Sylwester"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1658657373,"creation_date":1658657373,"answer_id":73097436,"question_id":73095720,"body_markdown":"When you have `return mid` 3 calls deep it is 2nd `BS` that gets that value and since it does not use the value it is lost. Instead it continues to the 3 last lines of the function since that is what the code tells it to do. Unless the element to be found is the first element you never return it.\r\n\r\nRecursive functions are not treated special. Their argument, local variables and state are different is not shared and a `return` only returns that one call and does not affect the other ongoing calls.\r\n\r\nYou could replace each recursive call with a similar function `BS1` that calls `BS2` etc. that produces the same code at each level and it will work the same. Then there will be no recursive call, but it will work the same way. A `return` in `BS4` will not affect `BS3` except for its returned value it should use. One `return` in `BS3` does not cancel the calls `BS2`, `BS1` as they are waiting for an answer to continue their flow. With a `return BS2(arr, target, first, last);` that continued flow is to return the value that the call to `BS2` returns. \r\n\r\nYour first calls that returns is `System.out.println`. If it worked that the first `return` was the final result then its value would be the result of your logic. ","title":"Binary Search: why it won&#39;t stop when I return the result","body":"<p>When you have <code>return mid</code> 3 calls deep it is 2nd <code>BS</code> that gets that value and since it does not use the value it is lost. Instead it continues to the 3 last lines of the function since that is what the code tells it to do. Unless the element to be found is the first element you never return it.</p>\n<p>Recursive functions are not treated special. Their argument, local variables and state are different is not shared and a <code>return</code> only returns that one call and does not affect the other ongoing calls.</p>\n<p>You could replace each recursive call with a similar function <code>BS1</code> that calls <code>BS2</code> etc. that produces the same code at each level and it will work the same. Then there will be no recursive call, but it will work the same way. A <code>return</code> in <code>BS4</code> will not affect <code>BS3</code> except for its returned value it should use. One <code>return</code> in <code>BS3</code> does not cancel the calls <code>BS2</code>, <code>BS1</code> as they are waiting for an answer to continue their flow. With a <code>return BS2(arr, target, first, last);</code> that continued flow is to return the value that the call to <code>BS2</code> returns.</p>\n<p>Your first calls that returns is <code>System.out.println</code>. If it worked that the first <code>return</code> was the final result then its value would be the result of your logic.</p>\n"}],"owner":{"account_id":24887093,"reputation":23,"user_id":18759563,"display_name":"Shotto"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73097436,"answer_count":1,"score":-1,"last_activity_date":1658657373,"creation_date":1658635898,"question_id":73095720,"body_markdown":"I can&#39;t understand why the function will not stop and return the mid, but it keeps going down to the return -1.\r\n~~~\r\npublic class BinarySearch {\r\n\r\n\tpublic static int BS(int[] arr, int target, int first, int last) {\r\n\t\tif(first != last) {\r\n\t\t\tint mid = first + (last - first)/2;\r\n\t\t\tSystem.out.println(&quot;arr[mid] = &quot;+arr[mid]);\r\n\t\t\tif(arr[mid] != target) {\r\n\t\t\t\tif(target &lt; arr[mid]) {\r\n\t\t\t\t\tlast = mid - 1;\r\n\t\t\t\t\tSystem.out.println(&quot;last is &quot;+last);\r\n\t\t\t\t\tBS(arr, target, first, last);\r\n\t\t\t\t}else {\r\n\t\t\t\t\tfirst = mid + 1;\r\n\t\t\t\t\tBS(arr, target, first, last);\r\n\t\t\t\t}\r\n\t\t\t}else {\r\n\t\t\t\tSystem.out.println(&quot;Found!&quot;);\r\n\t\t\t\treturn mid;\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;test&quot;);\r\n\t\t}\r\n\t\r\n\t\tif(arr[first] == target) return first;\r\n\t\tSystem.out.println(&quot;Not found!&quot;);\r\n\t\treturn -1;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] test = {0,1,2,4,6,7,9,10};\r\n\t\tint result = BS(test, 7, 0, test.length-1);\r\n\t\tSystem.out.println(result);\r\n\r\n\t}\r\n\r\n}\r\n~~~\r\n","title":"Binary Search: why it won&#39;t stop when I return the result","body":"<p>I can't understand why the function will not stop and return the mid, but it keeps going down to the return -1.</p>\n<pre><code>public class BinarySearch {\n\n    public static int BS(int[] arr, int target, int first, int last) {\n        if(first != last) {\n            int mid = first + (last - first)/2;\n            System.out.println(&quot;arr[mid] = &quot;+arr[mid]);\n            if(arr[mid] != target) {\n                if(target &lt; arr[mid]) {\n                    last = mid - 1;\n                    System.out.println(&quot;last is &quot;+last);\n                    BS(arr, target, first, last);\n                }else {\n                    first = mid + 1;\n                    BS(arr, target, first, last);\n                }\n            }else {\n                System.out.println(&quot;Found!&quot;);\n                return mid;\n            }\n            System.out.println(&quot;test&quot;);\n        }\n    \n        if(arr[first] == target) return first;\n        System.out.println(&quot;Not found!&quot;);\n        return -1;\n    }\n    \n    public static void main(String[] args) {\n        int[] test = {0,1,2,4,6,7,9,10};\n        int result = BS(test, 7, 0, test.length-1);\n        System.out.println(result);\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","clone"],"answers":[{"tags":[],"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1658657097,"creation_date":1266766059,"answer_id":2306343,"question_id":2306332,"body_markdown":"Josh Bloch in Effective Java also doesn&#39;t recommend to use clone () method.\r\n\r\nThere are several problems with this method:\r\n\r\n1) If cloneable object has not only primitive type fields but also object fields, then cloned object will receive just references to those objects but not real cloned objects. To avoid this all inner objects should be cloneable too.\r\n\r\n2) If you make a subclass of cloneable class, then it&#39;s cloneable too (even if you don&#39;t want). That&#39;s why you should override clone() method in a proper way to avoid possible problems.\r\n\r\nWhen you should use it: never if possible. You should use it very carefully. If all fields in object you want to make cloneable are of primitive type then it&#39;s not dangerous. In all other cases think twice before using it.","title":"use case for clone()","body":"<p>Josh Bloch in Effective Java also doesn't recommend to use clone () method.</p>\n<p>There are several problems with this method:</p>\n<ol>\n<li><p>If cloneable object has not only primitive type fields but also object fields, then cloned object will receive just references to those objects but not real cloned objects. To avoid this all inner objects should be cloneable too.</p>\n</li>\n<li><p>If you make a subclass of cloneable class, then it's cloneable too (even if you don't want). That's why you should override clone() method in a proper way to avoid possible problems.</p>\n</li>\n</ol>\n<p>When you should use it: never if possible. You should use it very carefully. If all fields in object you want to make cloneable are of primitive type then it's not dangerous. In all other cases think twice before using it.</p>\n"},{"tags":[],"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1266770250,"creation_date":1266770250,"answer_id":2306529,"question_id":2306332,"body_markdown":"`clone` is very convenient to make defensive copies of arrays passed to methods or constructors (as all array types are `Cloneable`, and the signature for `clone()`is covariant so that `boolean[].clone()` actually returns a `boolean[]` rather than an `Object`). That&#39;s the only really good use I&#39;ve seen of it in ten years, though...","title":"use case for clone()","body":"<p><code>clone</code> is very convenient to make defensive copies of arrays passed to methods or constructors (as all array types are <code>Cloneable</code>, and the signature for <code>clone()</code>is covariant so that <code>boolean[].clone()</code> actually returns a <code>boolean[]</code> rather than an <code>Object</code>). That's the only really good use I've seen of it in ten years, though...</p>\n"}],"owner":{"account_id":42079,"reputation":10061,"user_id":122466,"accept_rate":38,"display_name":"Aadith Ramia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1158,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1658657097,"creation_date":1266765927,"question_id":2306332,"body_markdown":"I have never seen clone() method put to use in any real code. I was reading about it and felt that its use could make the code very cumbersome.\r\nis there any specific use case for the clone() method? Under what circumstances would one have to use clone() and why would the use of normal conctructor not suffice?","title":"use case for clone()","body":"<p>I have never seen clone() method put to use in any real code. I was reading about it and felt that its use could make the code very cumbersome.\nis there any specific use case for the clone() method? Under what circumstances would one have to use clone() and why would the use of normal conctructor not suffice?</p>\n"},{"tags":["java","class","clone"],"answers":[{"tags":[],"owner":{"account_id":20618835,"reputation":31,"user_id":15136297,"display_name":"Philipp Kath&#246;fer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658656085,"creation_date":1658656085,"answer_id":73097300,"question_id":5798323,"body_markdown":"In Java classes are call-by-value. That means that when you pass an object to a method, this method has access to that object, not a copy of that object. So if the method manipulates that object, the original object also changes. If you want to prevent that, then you can pass object.clone() to the method.","title":"When and how can I use the Clone() method in real world situation?","body":"<p>In Java classes are call-by-value. That means that when you pass an object to a method, this method has access to that object, not a copy of that object. So if the method manipulates that object, the original object also changes. If you want to prevent that, then you can pass object.clone() to the method.</p>\n"}],"owner":{"account_id":318794,"reputation":417,"user_id":636195,"accept_rate":73,"display_name":"matiman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1658656984,"answer_count":1,"score":1,"last_activity_date":1658656971,"creation_date":1303867530,"question_id":5798323,"body_markdown":"I think the title is straight forward. I understood how clone() works and override in my class. However, I couldn&#39;t imagine a simple real world example where the clone() method is necessary. Can you give me a simple example where, when, and how can I use clone in my classes?\r\n","title":"When and how can I use the Clone() method in real world situation?","body":"<p>I think the title is straight forward. I understood how clone() works and override in my class. However, I couldn't imagine a simple real world example where the clone() method is necessary. Can you give me a simple example where, when, and how can I use clone in my classes?</p>\n"},{"tags":["java","junit5"],"answers":[{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658652727,"creation_date":1658652727,"answer_id":73096959,"question_id":73096757,"body_markdown":"A &quot;type-level annotation&quot; is an annotation, which is applied to a type. The documentation of [`ElementType.TYPE`](https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html#TYPE) defines it as follow:\r\n\r\n&gt; `public static final ElementType TYPE`\r\n&gt; \r\n&gt; Class, interface (including annotation type), or enum declaration\r\n\r\nSo you write this `@TestInstance` annotation most likely for your test suite class.","title":"What is type level annotation?","body":"<p>A &quot;type-level annotation&quot; is an annotation, which is applied to a type. The documentation of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/annotation/ElementType.html#TYPE\" rel=\"nofollow noreferrer\"><code>ElementType.TYPE</code></a> defines it as follow:</p>\n<blockquote>\n<p><code>public static final ElementType TYPE</code></p>\n<p>Class, interface (including annotation type), or enum declaration</p>\n</blockquote>\n<p>So you write this <code>@TestInstance</code> annotation most likely for your test suite class.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1658656493,"creation_date":1658652764,"answer_id":73096961,"question_id":73096757,"body_markdown":"This is not an official term - it doesn&#39;t appear in the [Java Language Specification][1]. But we can still understand what it means by combining the meaning of the three words &quot;type&quot;, &quot;level&quot; and &quot;annotation&quot;.\r\n\r\nA &quot;type level annotation&quot; is an annotation applied at the *type* level (in other words, on a type), rather than, say, at the method level.\r\n\r\n```\r\n@TestInstance(LifeCycle.PER_CLASS) // applied to the class\r\nclass MyTest {\r\n    // @TestInstance(LifeCycle.PER_CLASS) // should not annotate a method with this\r\n    @Test\r\n    public void fooWorks() { ... }\r\n}\r\n```\r\n\r\nThis is also suggested by the `@Target` annotation present on [`TestInstance`][2]:\r\n\r\n    @Target(value=TYPE)\r\n\r\nThe parameter is [`ElementType.TYPE`][3], which limits the annotation&#39;s target to the following things:\r\n\r\n&gt; Class, interface (including annotation interface), enum, or record declaration\r\n\r\nThese stack overflow posts ([1][4], [2][5], [3][6]) also use &quot;type level annotation&quot; in this way. I also found [this page][7] which uses the terms &quot;method level&quot; and &quot;field level&quot; annotations, which follows a similar logic.\r\n\r\nBasically, you can think of &quot;X-level annotation&quot; as &quot;this annotation marks an X&quot;, which in turn means &quot;X is one of the things in the annotation&#39;s `@Target` meta-annotation&quot;.\r\n\r\n&lt;hr&gt;\r\n\r\nNote that &quot;type level annotation&quot; should not be confused with &quot;[type annotation][8]&quot;, a term that *does* appear in the JLS. A &quot;type annotation&quot; is one that can annotate the *use* of a type (corresponds to `ElementType.TYPE_USE`), as opposed to declarations.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/index.html\r\n  [2]: https://junit.org/junit5/docs/5.0.1/api/org/junit/jupiter/api/TestInstance.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE\r\n  [4]: https://stackoverflow.com/questions/19359474/java-type-level-annotation-and-private-member-visibility\r\n  [5]: https://stackoverflow.com/questions/59050521/java-validation-type-level-annotation-for-multiple-types\r\n  [6]: https://stackoverflow.com/questions/63587444/is-a-type-level-annotation-always-inherited-by-public-methods-of-that-type\r\n  [7]: https://coderanch.com/t/649919/certification/Type-level-annotation-overriden-deployment\r\n  [8]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-9.html#jls-9.7.4","title":"What is type level annotation?","body":"<p>This is not an official term - it doesn't appear in the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/index.html\" rel=\"nofollow noreferrer\">Java Language Specification</a>. But we can still understand what it means by combining the meaning of the three words &quot;type&quot;, &quot;level&quot; and &quot;annotation&quot;.</p>\n<p>A &quot;type level annotation&quot; is an annotation applied at the <em>type</em> level (in other words, on a type), rather than, say, at the method level.</p>\n<pre><code>@TestInstance(LifeCycle.PER_CLASS) // applied to the class\nclass MyTest {\n    // @TestInstance(LifeCycle.PER_CLASS) // should not annotate a method with this\n    @Test\n    public void fooWorks() { ... }\n}\n</code></pre>\n<p>This is also suggested by the <code>@Target</code> annotation present on <a href=\"https://junit.org/junit5/docs/5.0.1/api/org/junit/jupiter/api/TestInstance.html\" rel=\"nofollow noreferrer\"><code>TestInstance</code></a>:</p>\n<pre><code>@Target(value=TYPE)\n</code></pre>\n<p>The parameter is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/annotation/ElementType.html#TYPE\" rel=\"nofollow noreferrer\"><code>ElementType.TYPE</code></a>, which limits the annotation's target to the following things:</p>\n<blockquote>\n<p>Class, interface (including annotation interface), enum, or record declaration</p>\n</blockquote>\n<p>These stack overflow posts (<a href=\"https://stackoverflow.com/questions/19359474/java-type-level-annotation-and-private-member-visibility\">1</a>, <a href=\"https://stackoverflow.com/questions/59050521/java-validation-type-level-annotation-for-multiple-types\">2</a>, <a href=\"https://stackoverflow.com/questions/63587444/is-a-type-level-annotation-always-inherited-by-public-methods-of-that-type\">3</a>) also use &quot;type level annotation&quot; in this way. I also found <a href=\"https://coderanch.com/t/649919/certification/Type-level-annotation-overriden-deployment\" rel=\"nofollow noreferrer\">this page</a> which uses the terms &quot;method level&quot; and &quot;field level&quot; annotations, which follows a similar logic.</p>\n<p>Basically, you can think of &quot;X-level annotation&quot; as &quot;this annotation marks an X&quot;, which in turn means &quot;X is one of the things in the annotation's <code>@Target</code> meta-annotation&quot;.</p>\n<hr>\n<p>Note that &quot;type level annotation&quot; should not be confused with &quot;<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-9.html#jls-9.7.4\" rel=\"nofollow noreferrer\">type annotation</a>&quot;, a term that <em>does</em> appear in the JLS. A &quot;type annotation&quot; is one that can annotate the <em>use</em> of a type (corresponds to <code>ElementType.TYPE_USE</code>), as opposed to declarations.</p>\n"}],"owner":{"account_id":19306526,"reputation":203,"user_id":14113217,"display_name":"Palak Kharbanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":73096961,"answer_count":2,"score":1,"last_activity_date":1658656493,"creation_date":1658650466,"question_id":73096757,"body_markdown":"What is a type level annotation?\r\n\r\nI was reading the doc of @TestInstance and there it is written that it is a type-level annotation. \r\n","title":"What is type level annotation?","body":"<p>What is a type level annotation?</p>\n<p>I was reading the doc of @TestInstance and there it is written that it is a type-level annotation.</p>\n"},{"tags":["java"],"owner":{"account_id":25881996,"reputation":11,"user_id":19610857,"display_name":"milk ad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1658656285,"creation_date":1658656285,"question_id":73097323,"body_markdown":"I just want to test `agrona.OneToOneRingBuffer`. i have one `Producer` to produce message,one `Consumer` to consume.But My consumer class has no output because countdownlatch doesn&#39;t zero out.\r\n```\r\npublic class Producer implements Runnable{\r\n    private final RingBuffer buffer;\r\n\r\n    public Producer(RingBuffer buffer) {\r\n\r\n        this.buffer = buffer;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        for(int i=0;i&lt;Config.SIZE;i++){\r\n            String s = String.format(&quot;i am %s&quot;,i);\r\n            System.out.println( &quot;name -&gt; &quot; + s);\r\n            UnsafeBuffer unsafeBuffer = new UnsafeBuffer(s.getBytes());\r\n            unsafeBuffer.wrap(s.getBytes());\r\n            buffer.write(1, unsafeBuffer, 0, s.length());\r\n        }\r\n\r\n    }\r\n}\r\n\r\npublic class Consumer implements Runnable {\r\n    private final RingBuffer buffer;\r\n\r\n    public Consumer(RingBuffer buffer) {\r\n        this.buffer = buffer;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        long start = System.currentTimeMillis();\r\n        CountDownLatch countDownLatch = new CountDownLatch(Config.SIZE);\r\n        while (countDownLatch.getCount() &gt; 0) {\r\n            buffer.read((msgTypeId, srcBuffer, index, length) -&gt; {\r\n                byte[] message = new byte[length];\r\n                srcBuffer.getBytes(index, message);\r\n                System.out.println(&quot;Consumer &lt;- &quot; + new String(message));\r\n                countDownLatch.countDown();\r\n            });\r\n        }\r\n\r\n        long end = System.currentTimeMillis();\r\n        System.out.println(&quot;cost time &quot; + (end - start));\r\n    }\r\n}\r\npublic class App {\r\n    private static final OneToOneRingBuffer BUFFER = new OneToOneRingBuffer(new UnsafeBuffer(\r\n            ByteBuffer.allocate(1024 + RingBufferDescriptor.TRAILER_LENGTH)));\r\n\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        ExecutorService executor = Executors.newCachedThreadPool();\r\n        executor.execute(new Producer(BUFFER));\r\n        executor.execute(new Consumer(BUFFER));\r\n\r\n        Thread.currentThread().join();\r\n    }\r\n}\r\n```\r\nThe Config.SIZE just set to 100_000 and when it was 10_000 ,the programe runs well.\r\nIs the OneToOneRingBuffer class a thread-unsafe class?\r\n","title":"how to use agrona.OneToOneRingBuffer","body":"<p>I just want to test <code>agrona.OneToOneRingBuffer</code>. i have one <code>Producer</code> to produce message,one <code>Consumer</code> to consume.But My consumer class has no output because countdownlatch doesn't zero out.</p>\n<pre><code>public class Producer implements Runnable{\n    private final RingBuffer buffer;\n\n    public Producer(RingBuffer buffer) {\n\n        this.buffer = buffer;\n    }\n\n    @Override\n    public void run() {\n        for(int i=0;i&lt;Config.SIZE;i++){\n            String s = String.format(&quot;i am %s&quot;,i);\n            System.out.println( &quot;name -&gt; &quot; + s);\n            UnsafeBuffer unsafeBuffer = new UnsafeBuffer(s.getBytes());\n            unsafeBuffer.wrap(s.getBytes());\n            buffer.write(1, unsafeBuffer, 0, s.length());\n        }\n\n    }\n}\n\npublic class Consumer implements Runnable {\n    private final RingBuffer buffer;\n\n    public Consumer(RingBuffer buffer) {\n        this.buffer = buffer;\n    }\n\n    @Override\n    public void run() {\n        long start = System.currentTimeMillis();\n        CountDownLatch countDownLatch = new CountDownLatch(Config.SIZE);\n        while (countDownLatch.getCount() &gt; 0) {\n            buffer.read((msgTypeId, srcBuffer, index, length) -&gt; {\n                byte[] message = new byte[length];\n                srcBuffer.getBytes(index, message);\n                System.out.println(&quot;Consumer &lt;- &quot; + new String(message));\n                countDownLatch.countDown();\n            });\n        }\n\n        long end = System.currentTimeMillis();\n        System.out.println(&quot;cost time &quot; + (end - start));\n    }\n}\npublic class App {\n    private static final OneToOneRingBuffer BUFFER = new OneToOneRingBuffer(new UnsafeBuffer(\n            ByteBuffer.allocate(1024 + RingBufferDescriptor.TRAILER_LENGTH)));\n\n\n    public static void main(String[] args) throws Exception {\n        ExecutorService executor = Executors.newCachedThreadPool();\n        executor.execute(new Producer(BUFFER));\n        executor.execute(new Consumer(BUFFER));\n\n        Thread.currentThread().join();\n    }\n}\n</code></pre>\n<p>The Config.SIZE just set to 100_000 and when it was 10_000 ,the programe runs well.\nIs the OneToOneRingBuffer class a thread-unsafe class?</p>\n"},{"tags":["java","gupshup"],"answers":[{"tags":[],"owner":{"account_id":25862915,"reputation":1,"user_id":19595096,"display_name":"Jyothi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658655767,"creation_date":1658412861,"answer_id":73067799,"question_id":70684414,"body_markdown":"The reason is its not responding to normal message is because of the `io.gupshup.developer.util.Constants` class:  \r\n```\r\n    public static final String TYPE_MSG = &quot;text&quot;;\r\n   // public static final String TYPE_MSG = &quot;msg&quot;;\r\n```\r\n\r\nPreviously it was assigned the value `msg`. If we change that to `text` it should work fine.","title":"My gupshup Bot is not responding to normal text messages, does anyone know why?","body":"<p>The reason is its not responding to normal message is because of the <code>io.gupshup.developer.util.Constants</code> class:</p>\n<pre><code>    public static final String TYPE_MSG = &quot;text&quot;;\n   // public static final String TYPE_MSG = &quot;msg&quot;;\n</code></pre>\n<p>Previously it was assigned the value <code>msg</code>. If we change that to <code>text</code> it should work fine.</p>\n"}],"owner":{"account_id":23920110,"reputation":1,"user_id":17916095,"display_name":"carlos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658655767,"creation_date":1642002205,"question_id":70684414,"body_markdown":"Cheers, I was testing the example gupshup bot in java following gupshup documentation: https://www.gupshup.io/developer/docs/bot-platform/guide/gupshup-bot-library-for-java\r\n\r\nI had a problem in step 6 of the documentation. The bot responds to me when I send images, files or when the connection is established (when using the &#39;proxy myBotName&#39; command) but it does not respond to me when I send it a normal message like &#39;hello&#39; **(this is my problem)**.\r\nThis is the class that is generated when loading the project archetype, it is the same as the one seen in the documentation:\r\n\r\n    import io.gupshup.developer.annotations.OnEvent;\r\n    import io.gupshup.developer.annotations.OnFile;\r\n    import io.gupshup.developer.annotations.OnHttpEndPointRequest;\r\n    import io.gupshup.developer.annotations.OnImage;\r\n    import io.gupshup.developer.annotations.OnMessage;\r\n    import io.gupshup.developer.bot.context.BotContext;\r\n    import io.gupshup.developer.bot.input.EventInput;\r\n    import io.gupshup.developer.bot.input.FileInput;\r\n    import io.gupshup.developer.bot.input.HttpEndPointRequestInput;\r\n    import io.gupshup.developer.bot.input.ImageInput;\r\n    import io.gupshup.developer.bot.input.MessageInput;\r\n    \r\n    /**\r\n     * @author Abhishek Nama\r\n     */\r\n    public class Bot {\r\n        @OnMessage\r\n        public void msgHandler(MessageInput input, BotContext context) {\r\n    \tcontext.logger.log(&quot;In message handler - &quot; + input.getMessage());\r\n    \tcontext.sendResponse(input.getMessage());\r\n        }\r\n    \r\n        @OnEvent\r\n        public void eventHandler(EventInput input, BotContext context) {\r\n    \tcontext.logger.log(&quot;In event handler - &quot; + input.getMessage());\r\n    \tcontext.sendResponse(input.getMessage());\r\n        }\r\n    \r\n        @OnImage\r\n        public void imgHandler(ImageInput input, BotContext context) {\r\n    \tcontext.logger.log(&quot;In image handler - &quot; + input.getMessage());\r\n    \tcontext.sendResponse(input.getMessage());\r\n        }\r\n    \r\n        @OnFile\r\n        public void fileHandler(FileInput input, BotContext context) {\r\n    \tcontext.logger.log(&quot;In file handler - &quot; + input.getMessage());\r\n    \tcontext.sendResponse(input.getMessage());\r\n        }\r\n    \r\n        @OnHttpEndPointRequest\r\n        public void httpEndPointRequestHandler(HttpEndPointRequestInput input, BotContext context) {\r\n    \tcontext.logger.log(&quot;In http end point request handler - &quot; + input.params.toString());\r\n    \tcontext.sendResponse(input.params.toString());\r\n        }\r\n    }\r\n\r\nand I leave a capture of the chat with the bot where it is seen that it responds to the connection (detecting an event) and the image but does not respond to normal messages\r\n\r\n[capture chat bot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eQYrt.png","title":"My gupshup Bot is not responding to normal text messages, does anyone know why?","body":"<p>Cheers, I was testing the example gupshup bot in java following gupshup documentation: <a href=\"https://www.gupshup.io/developer/docs/bot-platform/guide/gupshup-bot-library-for-java\" rel=\"nofollow noreferrer\">https://www.gupshup.io/developer/docs/bot-platform/guide/gupshup-bot-library-for-java</a></p>\n<p>I had a problem in step 6 of the documentation. The bot responds to me when I send images, files or when the connection is established (when using the 'proxy myBotName' command) but it does not respond to me when I send it a normal message like 'hello' <strong>(this is my problem)</strong>.\nThis is the class that is generated when loading the project archetype, it is the same as the one seen in the documentation:</p>\n<pre><code>import io.gupshup.developer.annotations.OnEvent;\nimport io.gupshup.developer.annotations.OnFile;\nimport io.gupshup.developer.annotations.OnHttpEndPointRequest;\nimport io.gupshup.developer.annotations.OnImage;\nimport io.gupshup.developer.annotations.OnMessage;\nimport io.gupshup.developer.bot.context.BotContext;\nimport io.gupshup.developer.bot.input.EventInput;\nimport io.gupshup.developer.bot.input.FileInput;\nimport io.gupshup.developer.bot.input.HttpEndPointRequestInput;\nimport io.gupshup.developer.bot.input.ImageInput;\nimport io.gupshup.developer.bot.input.MessageInput;\n\n/**\n * @author Abhishek Nama\n */\npublic class Bot {\n    @OnMessage\n    public void msgHandler(MessageInput input, BotContext context) {\n    context.logger.log(&quot;In message handler - &quot; + input.getMessage());\n    context.sendResponse(input.getMessage());\n    }\n\n    @OnEvent\n    public void eventHandler(EventInput input, BotContext context) {\n    context.logger.log(&quot;In event handler - &quot; + input.getMessage());\n    context.sendResponse(input.getMessage());\n    }\n\n    @OnImage\n    public void imgHandler(ImageInput input, BotContext context) {\n    context.logger.log(&quot;In image handler - &quot; + input.getMessage());\n    context.sendResponse(input.getMessage());\n    }\n\n    @OnFile\n    public void fileHandler(FileInput input, BotContext context) {\n    context.logger.log(&quot;In file handler - &quot; + input.getMessage());\n    context.sendResponse(input.getMessage());\n    }\n\n    @OnHttpEndPointRequest\n    public void httpEndPointRequestHandler(HttpEndPointRequestInput input, BotContext context) {\n    context.logger.log(&quot;In http end point request handler - &quot; + input.params.toString());\n    context.sendResponse(input.params.toString());\n    }\n}\n</code></pre>\n<p>and I leave a capture of the chat with the bot where it is seen that it responds to the connection (detecting an event) and the image but does not respond to normal messages</p>\n<p><a href=\"https://i.stack.imgur.com/eQYrt.png\" rel=\"nofollow noreferrer\">capture chat bot</a></p>\n"},{"tags":["java","spring-boot","google-cloud-storage"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1658412659,"post_id":73066897,"comment_id":129049684,"body_markdown":"What exactly is the problem with your code?","body":"What exactly is the problem with your code?"},{"owner":{"account_id":25862069,"reputation":9,"user_id":19594385,"display_name":"Techi"},"score":0,"creation_date":1658444492,"post_id":73066897,"comment_id":129059650,"body_markdown":"The code I mentioned,  is not working to read from google cloud storage. My question is what is the code to read from a Google cloud storage.\n\nThanks","body":"The code I mentioned,  is not working to read from google cloud storage. My question is what is the code to read from a Google cloud storage.  Thanks"}],"owner":{"account_id":25862069,"reputation":9,"user_id":19594385,"display_name":"Techi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1658655345,"creation_date":1658409176,"question_id":73066897,"body_markdown":"I am new to GCP storage. I want to read a large JSON file (2GB array of Objects) from GCP storage in my project (Spring Boot, Java). If I download the whole JSON file, may be I will get out of memory.\r\n\r\nSo any JSON streaming parsing available to parse without download whole file, like below.\r\n\r\n```java\r\n@Component\r\npublic class TestA {\r\n\r\n        @Value(&quot;classpath:/data-array-load.json&quot;)\r\n        Resource resourceFile;\r\n        @Autowired\r\n        ObjectMapper objectMapper;\r\n        \r\n        public void processData() {\r\n\r\n            int count = 0;\r\n        try {\r\n            JsonFactory factory = new JsonFactory();\r\n            File fileData = resourceFile.getFile();\r\n            ResponseObject classObject = null;\r\n            List&lt;ResponseObject&gt; listData = new ArrayList&lt;&gt;();\r\n            JsonParser parser = objectMapper.getFactory().createParser(fileData);\r\n            if ( parser.nextToken() != JsonToken.START_ARRAY ) {\r\n                throw new Exception( &quot;no array&quot; );\r\n            }\r\n            while ( parser.nextToken() == JsonToken.START_OBJECT ) {\r\n                classObject = objectMapper.readValue( parser, ResponseObject.class );\r\n                listData.add(classObject);\r\n                if(count == 50){\r\n                    log.info(&quot;Data size: {}&quot;, listData.size());\r\n                    // once 50 , will call another service\r\n                }\r\n                count++;\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n``` \r\n\r\nSample JSON file will be as below\r\n\r\n```json\r\n[\r\n  {\r\n    &quot;id&quot;: &quot;345345&quot;,\r\n    &quot;info&quot;: [\r\n      {\r\n        &quot;data&quot;: &quot;info&quot;\r\n      },\r\n      {\r\n        &quot;data&quot;: &quot;info2&quot;\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;456456&quot;,\r\n    &quot;info&quot;: [\r\n      {\r\n        &quot;data&quot;: &quot;info&quot;\r\n      },\r\n      {\r\n        &quot;data&quot;: &quot;info2&quot;\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    &quot;id&quot;: &quot;67868678&quot;,\r\n    &quot;info&quot;: [\r\n      {\r\n        &quot;data&quot;: &quot;info&quot;\r\n      },\r\n      {\r\n        &quot;data&quot;: &quot;info2&quot;\r\n      }\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nI am not getting any best approach to do this. Can any one please guide?\r\n","title":"What is the best approach to parse huge JSON file from GCP storage without download","body":"<p>I am new to GCP storage. I want to read a large JSON file (2GB array of Objects) from GCP storage in my project (Spring Boot, Java). If I download the whole JSON file, may be I will get out of memory.</p>\n<p>So any JSON streaming parsing available to parse without download whole file, like below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class TestA {\n\n        @Value(&quot;classpath:/data-array-load.json&quot;)\n        Resource resourceFile;\n        @Autowired\n        ObjectMapper objectMapper;\n        \n        public void processData() {\n\n            int count = 0;\n        try {\n            JsonFactory factory = new JsonFactory();\n            File fileData = resourceFile.getFile();\n            ResponseObject classObject = null;\n            List&lt;ResponseObject&gt; listData = new ArrayList&lt;&gt;();\n            JsonParser parser = objectMapper.getFactory().createParser(fileData);\n            if ( parser.nextToken() != JsonToken.START_ARRAY ) {\n                throw new Exception( &quot;no array&quot; );\n            }\n            while ( parser.nextToken() == JsonToken.START_OBJECT ) {\n                classObject = objectMapper.readValue( parser, ResponseObject.class );\n                listData.add(classObject);\n                if(count == 50){\n                    log.info(&quot;Data size: {}&quot;, listData.size());\n                    // once 50 , will call another service\n                }\n                count++;\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n<p>Sample JSON file will be as below</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;id&quot;: &quot;345345&quot;,\n    &quot;info&quot;: [\n      {\n        &quot;data&quot;: &quot;info&quot;\n      },\n      {\n        &quot;data&quot;: &quot;info2&quot;\n      }\n    ]\n  },\n  {\n    &quot;id&quot;: &quot;456456&quot;,\n    &quot;info&quot;: [\n      {\n        &quot;data&quot;: &quot;info&quot;\n      },\n      {\n        &quot;data&quot;: &quot;info2&quot;\n      }\n    ]\n  },\n  {\n    &quot;id&quot;: &quot;67868678&quot;,\n    &quot;info&quot;: [\n      {\n        &quot;data&quot;: &quot;info&quot;\n      },\n      {\n        &quot;data&quot;: &quot;info2&quot;\n      }\n    ]\n  }\n]\n</code></pre>\n<p>I am not getting any best approach to do this. Can any one please guide?</p>\n"},{"tags":["java","scala","docker","apache-spark","hadoop"],"answers":[{"tags":[],"owner":{"account_id":6798990,"reputation":185,"user_id":5233057,"display_name":"Matteo Tosato"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551290246,"creation_date":1551290246,"answer_id":54911726,"question_id":54903912,"body_markdown":"After many attempts and research I have come to the conclusion that the problem could be that I&#39;m using the windows version of spark-submit from my pc to submit the job.\r\n\r\nI could not fully understand but for now, moving the file directly to the master and worker node I was able to submit it from there.\r\n\r\nFirst copy on the container:\r\n\r\n    docker cp spark-streaming-assembly-1.0.jar 21b43cb2e698:/spark/bin\r\n\r\nThen I execute *(in /spark/bin folder)*:\r\n\r\n    ./spark-submit --class KafkaConsumer --deploy-mode cluster --master spark://spark-master:7077 spark-streaming-assembly-1.0.jar\r\n\r\nThis is the workaround that i found at the moment.","title":"Unable to submit a spark job on spark cluster on docker","body":"<p>After many attempts and research I have come to the conclusion that the problem could be that I'm using the windows version of spark-submit from my pc to submit the job.</p>\n\n<p>I could not fully understand but for now, moving the file directly to the master and worker node I was able to submit it from there.</p>\n\n<p>First copy on the container:</p>\n\n<pre><code>docker cp spark-streaming-assembly-1.0.jar 21b43cb2e698:/spark/bin\n</code></pre>\n\n<p>Then I execute <em>(in /spark/bin folder)</em>:</p>\n\n<pre><code>./spark-submit --class KafkaConsumer --deploy-mode cluster --master spark://spark-master:7077 spark-streaming-assembly-1.0.jar\n</code></pre>\n\n<p>This is the workaround that i found at the moment.</p>\n"},{"tags":[],"owner":{"account_id":15480241,"reputation":31,"user_id":11167763,"display_name":"Fasih Uddin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658654914,"creation_date":1658654914,"answer_id":73097181,"question_id":54903912,"body_markdown":"You can mount the directory of your jobs to your container by running your submit container like this\r\n\r\n \r\n\r\n    docker run -it --rm\\\r\n    --name spark-submit \\\r\n    --mount type=bind,source=&quot;$(pwd)&quot;/jobs,target=/home/jobs,readonly \\\r\n    --network spark-net \\\r\n    -p 4040:4040 \\\r\n    -p 18080:18080 \\\r\n    your-spark-image \\\r\n    bash\r\n\r\nThis command will mount your jobs folder directly to your container and you can change in host and those changes will automatically be present in your container","title":"Unable to submit a spark job on spark cluster on docker","body":"<p>You can mount the directory of your jobs to your container by running your submit container like this</p>\n<pre><code>docker run -it --rm\\\n--name spark-submit \\\n--mount type=bind,source=&quot;$(pwd)&quot;/jobs,target=/home/jobs,readonly \\\n--network spark-net \\\n-p 4040:4040 \\\n-p 18080:18080 \\\nyour-spark-image \\\nbash\n</code></pre>\n<p>This command will mount your jobs folder directly to your container and you can change in host and those changes will automatically be present in your container</p>\n"}],"owner":{"account_id":6798990,"reputation":185,"user_id":5233057,"display_name":"Matteo Tosato"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2100,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1658654914,"creation_date":1551265144,"question_id":54903912,"body_markdown":"Like anticipated by the title, I have some problems to submit a spark job to a spark cluster running on docker.\r\n\r\nI wrote a very simple spark job in scala, subscribe to a kafka server arrange some data and store these in an elastichsearch database.\r\nkafka and elasticsearch are already running in docker. \r\n\r\n**Everything works perfectly if I run the spark job from my Ide in my dev environment (Windows / IntelliJ).**\r\n\r\nThen (and I&#39;m not a java guy at all), I added a spark cluster following these instructions: https://github.com/big-data-europe/docker-spark\r\n\r\nThe cluster looks healthy when consulting its dashboard. I created a cluster consisting of a master and a worker.\r\n\r\nNow, this is my job written in scala:\r\n\r\n    import java.io.Serializable\r\n    \r\n    import org.apache.commons.codec.StringDecoder\r\n    import org.apache.hadoop.fs.LocalFileSystem\r\n    import org.apache.hadoop.hdfs.DistributedFileSystem\r\n    import org.apache.kafka.common.serialization.StringDeserializer\r\n    import org.apache.spark\r\n    import org.apache.spark.SparkConf\r\n    import org.elasticsearch.spark._\r\n    import org.apache.spark.sql.SQLContext\r\n    import org.apache.spark.streaming.dstream.InputDStream\r\n    import org.apache.spark.streaming.kafka010.LocationStrategies.PreferConsistent\r\n    import org.apache.spark.streaming.kafka010.{ConsumerStrategies, KafkaUtils}\r\n    import org.apache.spark.streaming.{Seconds, StreamingContext}\r\n    \r\n    import scala.util.parsing.json.JSON\r\n    \r\n    object KafkaConsumer {\r\n      def main(args: Array[String]): Unit = {\r\n    \r\n        val sc = new SparkConf()\r\n          .setMaster(&quot;local[*]&quot;)\r\n          .setAppName(&quot;Elastic Search Indexer App&quot;)\r\n    \r\n        sc.set(&quot;es.index.auto.create&quot;, &quot;true&quot;)\r\n    \r\n        val elasticResource = &quot;iot/demo&quot;\r\n        val ssc = new StreamingContext(sc, Seconds(10))\r\n    \r\n        //ssc.checkpoint(&quot;./checkpoint&quot;)\r\n    \r\n        val kafkaParams = Map(\r\n          &quot;bootstrap.servers&quot; -&gt; &quot;kafka:9092&quot;,\r\n          &quot;key.deserializer&quot; -&gt; classOf[StringDeserializer],\r\n          &quot;value.deserializer&quot; -&gt; classOf[StringDeserializer],\r\n          &quot;auto.offset.reset&quot; -&gt; &quot;earliest&quot;,\r\n          &quot;group.id&quot; -&gt; &quot;group0&quot;\r\n        )\r\n    \r\n        val topics = List(&quot;test&quot;)\r\n        val stream = KafkaUtils.createDirectStream(\r\n          ssc,\r\n          PreferConsistent,\r\n          ConsumerStrategies.Subscribe[String, String](topics.distinct, kafkaParams)\r\n        )\r\n    \r\n        case class message(key: String, timestamp: Long, payload: Object)\r\n        val rdds = stream.map(record =&gt; message(record.key, record.timestamp, record.value))\r\n    \r\n        val es_config: scala.collection.mutable.Map[String, String] =\r\n          scala.collection.mutable.Map(\r\n            &quot;pushdown&quot; -&gt; &quot;true&quot;,\r\n            &quot;es.nodes&quot; -&gt; &quot;http://docker-host&quot;,\r\n            &quot;es.nodes.wan.only&quot; -&gt; &quot;true&quot;,\r\n            &quot;es.resource&quot; -&gt; elasticResource,\r\n            &quot;es.ingest.pipeline&quot; -&gt; &quot;iot-test-pipeline&quot;\r\n          )\r\n    \r\n    \r\n        rdds.foreachRDD { rdd =&gt;\r\n          rdd.saveToEs(es_config)\r\n          rdd.collect().foreach(println)\r\n        }\r\n    \r\n        ssc.start()\r\n        ssc.awaitTermination()\r\n      }\r\n    }\r\n\r\nTo submit this to the cluster I did:\r\n\r\n- With &quot;sbt-assembly&quot; plugin, I created a fat jar file with all dependencies.\r\n- Define an assembly strategy in build.sbt to avoid deduplicate errors on merging ...\r\n\r\nThen submit with:\r\n\r\n&gt; ./spark-submit.cmd --class KafkaConsumer --master\r\n&gt; spark://docker-host:7077\r\n&gt; /c/Users/shams/Documents/Appunti/iot-demo-app/spark-streaming/target/scala-2.11/\r\n&gt; spark-streaming-assembly-1.0.jar\r\n\r\nBUT I have this error:\r\n\r\n&gt; 19/02/27 11:18:12 WARN NativeCodeLoader: Unable to load native-hadoop\r\n&gt; library for your platform... using builtin-java classes where\r\n&gt; applicable Exception in thread &quot;main&quot; java.io.IOException: **No\r\n&gt; FileSystem for scheme: C**\r\n&gt;         at org.apache.hadoop.fs.FileSystem.getFileSystemClass(FileSystem.java:2660)\r\n&gt;         at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2667)\r\n&gt;         at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:94)\r\n&gt;         at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2703)\r\n&gt;         at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2685)\r\n&gt;         at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:373)\r\n&gt;         at org.apache.spark.util.Utils$.getHadoopFileSystem(Utils.scala:1897)\r\n&gt;         at org.apache.spark.util.Utils$.doFetchFile(Utils.scala:694)\r\n&gt;         at org.apache.spark.deploy.DependencyUtils$.downloadFile(DependencyUtils.scala:135)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$$anonfun$doPrepareSubmitEnvironment$7.apply(SparkSubmit.scala:416)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$$anonfun$doPrepareSubmitEnvironment$7.apply(SparkSubmit.scala:416)\r\n&gt;         at scala.Option.map(Option.scala:146)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$.doPrepareSubmitEnvironment(SparkSubmit.scala:415)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$.prepareSubmitEnvironment(SparkSubmit.scala:250)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:171)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:137)\r\n&gt;         at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)\r\n\r\n**After a day of trying I have not solved and I can not understand where in my work wants to access a certain volume as seems to be said by the error**\r\n\r\nCan be related with the warning message?\r\nThen, how I should edit my script to avoid that problem?\r\n\r\nThanks in advance.\r\n\r\n**UPDATE:**\r\n\r\nProblem seems not related to my code because I tried tu submit a simple hello world app compiled in the same way but I have the same issue.","title":"Unable to submit a spark job on spark cluster on docker","body":"<p>Like anticipated by the title, I have some problems to submit a spark job to a spark cluster running on docker.</p>\n\n<p>I wrote a very simple spark job in scala, subscribe to a kafka server arrange some data and store these in an elastichsearch database.\nkafka and elasticsearch are already running in docker. </p>\n\n<p><strong>Everything works perfectly if I run the spark job from my Ide in my dev environment (Windows / IntelliJ).</strong></p>\n\n<p>Then (and I'm not a java guy at all), I added a spark cluster following these instructions: <a href=\"https://github.com/big-data-europe/docker-spark\" rel=\"nofollow noreferrer\">https://github.com/big-data-europe/docker-spark</a></p>\n\n<p>The cluster looks healthy when consulting its dashboard. I created a cluster consisting of a master and a worker.</p>\n\n<p>Now, this is my job written in scala:</p>\n\n<pre><code>import java.io.Serializable\n\nimport org.apache.commons.codec.StringDecoder\nimport org.apache.hadoop.fs.LocalFileSystem\nimport org.apache.hadoop.hdfs.DistributedFileSystem\nimport org.apache.kafka.common.serialization.StringDeserializer\nimport org.apache.spark\nimport org.apache.spark.SparkConf\nimport org.elasticsearch.spark._\nimport org.apache.spark.sql.SQLContext\nimport org.apache.spark.streaming.dstream.InputDStream\nimport org.apache.spark.streaming.kafka010.LocationStrategies.PreferConsistent\nimport org.apache.spark.streaming.kafka010.{ConsumerStrategies, KafkaUtils}\nimport org.apache.spark.streaming.{Seconds, StreamingContext}\n\nimport scala.util.parsing.json.JSON\n\nobject KafkaConsumer {\n  def main(args: Array[String]): Unit = {\n\n    val sc = new SparkConf()\n      .setMaster(\"local[*]\")\n      .setAppName(\"Elastic Search Indexer App\")\n\n    sc.set(\"es.index.auto.create\", \"true\")\n\n    val elasticResource = \"iot/demo\"\n    val ssc = new StreamingContext(sc, Seconds(10))\n\n    //ssc.checkpoint(\"./checkpoint\")\n\n    val kafkaParams = Map(\n      \"bootstrap.servers\" -&gt; \"kafka:9092\",\n      \"key.deserializer\" -&gt; classOf[StringDeserializer],\n      \"value.deserializer\" -&gt; classOf[StringDeserializer],\n      \"auto.offset.reset\" -&gt; \"earliest\",\n      \"group.id\" -&gt; \"group0\"\n    )\n\n    val topics = List(\"test\")\n    val stream = KafkaUtils.createDirectStream(\n      ssc,\n      PreferConsistent,\n      ConsumerStrategies.Subscribe[String, String](topics.distinct, kafkaParams)\n    )\n\n    case class message(key: String, timestamp: Long, payload: Object)\n    val rdds = stream.map(record =&gt; message(record.key, record.timestamp, record.value))\n\n    val es_config: scala.collection.mutable.Map[String, String] =\n      scala.collection.mutable.Map(\n        \"pushdown\" -&gt; \"true\",\n        \"es.nodes\" -&gt; \"http://docker-host\",\n        \"es.nodes.wan.only\" -&gt; \"true\",\n        \"es.resource\" -&gt; elasticResource,\n        \"es.ingest.pipeline\" -&gt; \"iot-test-pipeline\"\n      )\n\n\n    rdds.foreachRDD { rdd =&gt;\n      rdd.saveToEs(es_config)\n      rdd.collect().foreach(println)\n    }\n\n    ssc.start()\n    ssc.awaitTermination()\n  }\n}\n</code></pre>\n\n<p>To submit this to the cluster I did:</p>\n\n<ul>\n<li>With \"sbt-assembly\" plugin, I created a fat jar file with all dependencies.</li>\n<li>Define an assembly strategy in build.sbt to avoid deduplicate errors on merging ...</li>\n</ul>\n\n<p>Then submit with:</p>\n\n<blockquote>\n  <p>./spark-submit.cmd --class KafkaConsumer --master\n  spark://docker-host:7077\n  /c/Users/shams/Documents/Appunti/iot-demo-app/spark-streaming/target/scala-2.11/\n  spark-streaming-assembly-1.0.jar</p>\n</blockquote>\n\n<p>BUT I have this error:</p>\n\n<blockquote>\n  <p>19/02/27 11:18:12 WARN NativeCodeLoader: Unable to load native-hadoop\n  library for your platform... using builtin-java classes where\n  applicable Exception in thread \"main\" java.io.IOException: <strong>No\n  FileSystem for scheme: C</strong>\n          at org.apache.hadoop.fs.FileSystem.getFileSystemClass(FileSystem.java:2660)\n          at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:2667)\n          at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:94)\n          at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:2703)\n          at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:2685)\n          at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:373)\n          at org.apache.spark.util.Utils$.getHadoopFileSystem(Utils.scala:1897)\n          at org.apache.spark.util.Utils$.doFetchFile(Utils.scala:694)\n          at org.apache.spark.deploy.DependencyUtils$.downloadFile(DependencyUtils.scala:135)\n          at org.apache.spark.deploy.SparkSubmit$$anonfun$doPrepareSubmitEnvironment$7.apply(SparkSubmit.scala:416)\n          at org.apache.spark.deploy.SparkSubmit$$anonfun$doPrepareSubmitEnvironment$7.apply(SparkSubmit.scala:416)\n          at scala.Option.map(Option.scala:146)\n          at org.apache.spark.deploy.SparkSubmit$.doPrepareSubmitEnvironment(SparkSubmit.scala:415)\n          at org.apache.spark.deploy.SparkSubmit$.prepareSubmitEnvironment(SparkSubmit.scala:250)\n          at org.apache.spark.deploy.SparkSubmit$.submit(SparkSubmit.scala:171)\n          at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:137)\n          at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala)</p>\n</blockquote>\n\n<p><strong>After a day of trying I have not solved and I can not understand where in my work wants to access a certain volume as seems to be said by the error</strong></p>\n\n<p>Can be related with the warning message?\nThen, how I should edit my script to avoid that problem?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Problem seems not related to my code because I tried tu submit a simple hello world app compiled in the same way but I have the same issue.</p>\n"},{"tags":["java","rest","jackson","jackson-annotations"],"comments":[{"owner":{"account_id":6796917,"reputation":374,"user_id":5231798,"display_name":"Moemen"},"score":1,"creation_date":1658612503,"post_id":73094036,"comment_id":129095978,"body_markdown":"Do you use any kind of caching?","body":"Do you use any kind of caching?"},{"owner":{"account_id":10362429,"reputation":504,"user_id":7642510,"display_name":"Taha LAGHZALI"},"score":0,"creation_date":1658620648,"post_id":73094036,"comment_id":129097043,"body_markdown":"Yes, addressService.findByRivoliStreetNumber(code); methode uses @Cacheable annotation like : @Cacheable(\n            key = &quot;#root.methodName + &#39;_&#39; + #code&quot;,\n            unless = &quot;#result==null&quot;)","body":"Yes, addressService.findByRivoliStreetNumber(code); methode uses @Cacheable annotation like : @Cacheable(             key = &quot;#root.methodName + &#39;_&#39; + #code&quot;,             unless = &quot;#result==null&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":6796917,"reputation":374,"user_id":5231798,"display_name":"Moemen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1658654865,"creation_date":1658654865,"answer_id":73097174,"question_id":73094036,"body_markdown":"One solution is to remove the cache. Another better solution is to remove the conflicting setter by removing one of them or removing both as you are already using `@Data` annotation.\r\n\r\nIf you expect different zipCode formats from the json returned by `addressService.findByRivoliStreetNumber(code)` such as string and array of strings, then you can deal with both formates as different properties.\r\n\r\nIf you have a special reason to do this, please mention it. Maybe there is a better design handing of this case.","title":"Could not read JSON: Conflicting setter definitions for property","body":"<p>One solution is to remove the cache. Another better solution is to remove the conflicting setter by removing one of them or removing both as you are already using <code>@Data</code> annotation.</p>\n<p>If you expect different zipCode formats from the json returned by <code>addressService.findByRivoliStreetNumber(code)</code> such as string and array of strings, then you can deal with both formates as different properties.</p>\n<p>If you have a special reason to do this, please mention it. Maybe there is a better design handing of this case.</p>\n"}],"owner":{"account_id":10362429,"reputation":504,"user_id":7642510,"display_name":"Taha LAGHZALI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1596,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73097174,"answer_count":1,"score":1,"last_activity_date":1658654865,"creation_date":1658608521,"question_id":73094036,"body_markdown":"When I call the API for the first time, I receive a JSON response without any error.\r\n\r\nWhen I call the API for the second time, I receive: \r\n```\r\nCould not read JSON: Conflicting setter definitions for property &quot;zipCode&quot;: com.sfr.cacheaddress.api.model.Address#setZipCode(1 params) vs com.sfr.cacheaddress.api.model.Address#setZipCode(1 params)\r\n at [Source: (byte[])&quot;{&quot;@class&quot;:&quot;com.sfr.cacheaddress.api.model.MetaAddress&quot;,&quot;address&quot;:{&quot;id&quot;:&quot;3525622624&quot;,&quot;streetNumber&quot;:5,&quot;streetNumberComplement&quot;:&quot;A&quot;,&quot;streetType&quot;:&quot;RUE&quot;,&quot;streetName&quot;:&quot;RUE DES PERRIERES&quot;,&quot;streetNumberAndName&quot;:&quot;5 A RUE DES PERRIERES&quot;,&quot;zipCode&quot;:&quot;35800&quot;,&quot;city&quot;:&quot;ST BRIAC SUR MER&quot;,&quot;address&quot;:&quot;5 A RUE DES PERRIERES,\r\n    35800 ST BRIAC SUR MER&quot;,&quot;inseeCode&quot;:&quot;35256&quot;,&quot;enabled&quot;:false,&quot;codeRivoli&quot;:&quot;0611&quot;,&quot;matriculeVoie&quot;:&quot;00676767&quot;},&quot;complementCount&quot;:1}&quot;; line: 1, column: 11\r\n]; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Conflicting setter definitions for property &quot;zipCode&quot;: com.sfr.cacheaddress.api.model.Address#setZipCode(1 params) vs com.sfr.cacheaddress.api.model.Address#setZipCode(1 params)\r\n at [Source: (byte[])&quot;{&quot;@class&quot;:&quot;com.sfr.cacheaddress.api.model.MetaAddress&quot;,&quot;address&quot;:{&quot;id&quot;:&quot;3525622624&quot;,&quot;streetNumber&quot;:5,&quot;streetNumberComplement&quot;:&quot;A&quot;,&quot;streetType&quot;:&quot;RUE&quot;,&quot;streetName&quot;:&quot;RUE DES PERRIERES&quot;,&quot;streetNumberAndName&quot;:&quot;5 A RUE DES PERRIERES&quot;,&quot;zipCode&quot;:&quot;35800&quot;,&quot;city&quot;:&quot;ST BRIAC SUR MER&quot;,&quot;address&quot;:&quot;5 A RUE DES PERRIERES,\r\n    35800 ST BRIAC SUR MER&quot;,&quot;inseeCode&quot;:&quot;35256&quot;,&quot;enabled&quot;:false,&quot;codeRivoli&quot;:&quot;0611&quot;,&quot;matriculeVoie&quot;:&quot;00676767&quot;},&quot;complementCount&quot;:1}&quot;; line: 1, column: 11\r\n```\r\n\r\nThe Get API: \r\n```\r\n@GetMapping(&quot;streetNumber&quot;)\r\npublic MetaAddress getAddressByIdRivoliStreetNumber(String code) {\r\n        return addressService.findByRivoliStreetNumber(code);\r\n}\r\n```\r\n\r\nMetaAddress.java:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class MetaAddress {\r\n    Address address;\r\n    long complementCount;\r\n}\r\n```\r\n\r\nAddress.java:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic final class Address implements Serializable {\r\n\r\n    private String id;\r\n    private String zipCode;\r\n    private String city;\r\n\r\n    //@JsonIgnore\r\n    public void setZipCode(String zipCode) {\r\n        this.zipCode = zipCode;\r\n    }\r\n\r\n    @JsonSetter\r\n    public void setZipCode(String[] zipCode) {\r\n        this.zipCode = zipCode[0];\r\n    }\r\n}\r\n```\r\n\r\nDuring deserializing, the second `setZipCode(String[] zipCode)` is needed (which contains `@JsonSetter`), I tried to add `@JsonIgnore` to first method `public void setZipCode(String zipCode)` but the issue persists.\r\n\r\nPrecision: Other APIs which use `Adress` class (not `MetaAddres`) work fine. The issue happens just when I call the API that uses `MetaAddress` object\r\n\r\nAnyone encountered the same problem please?","title":"Could not read JSON: Conflicting setter definitions for property","body":"<p>When I call the API for the first time, I receive a JSON response without any error.</p>\n<p>When I call the API for the second time, I receive:</p>\n<pre><code>Could not read JSON: Conflicting setter definitions for property &quot;zipCode&quot;: com.sfr.cacheaddress.api.model.Address#setZipCode(1 params) vs com.sfr.cacheaddress.api.model.Address#setZipCode(1 params)\n at [Source: (byte[])&quot;{&quot;@class&quot;:&quot;com.sfr.cacheaddress.api.model.MetaAddress&quot;,&quot;address&quot;:{&quot;id&quot;:&quot;3525622624&quot;,&quot;streetNumber&quot;:5,&quot;streetNumberComplement&quot;:&quot;A&quot;,&quot;streetType&quot;:&quot;RUE&quot;,&quot;streetName&quot;:&quot;RUE DES PERRIERES&quot;,&quot;streetNumberAndName&quot;:&quot;5 A RUE DES PERRIERES&quot;,&quot;zipCode&quot;:&quot;35800&quot;,&quot;city&quot;:&quot;ST BRIAC SUR MER&quot;,&quot;address&quot;:&quot;5 A RUE DES PERRIERES,\n    35800 ST BRIAC SUR MER&quot;,&quot;inseeCode&quot;:&quot;35256&quot;,&quot;enabled&quot;:false,&quot;codeRivoli&quot;:&quot;0611&quot;,&quot;matriculeVoie&quot;:&quot;00676767&quot;},&quot;complementCount&quot;:1}&quot;; line: 1, column: 11\n]; nested exception is com.fasterxml.jackson.databind.JsonMappingException: Conflicting setter definitions for property &quot;zipCode&quot;: com.sfr.cacheaddress.api.model.Address#setZipCode(1 params) vs com.sfr.cacheaddress.api.model.Address#setZipCode(1 params)\n at [Source: (byte[])&quot;{&quot;@class&quot;:&quot;com.sfr.cacheaddress.api.model.MetaAddress&quot;,&quot;address&quot;:{&quot;id&quot;:&quot;3525622624&quot;,&quot;streetNumber&quot;:5,&quot;streetNumberComplement&quot;:&quot;A&quot;,&quot;streetType&quot;:&quot;RUE&quot;,&quot;streetName&quot;:&quot;RUE DES PERRIERES&quot;,&quot;streetNumberAndName&quot;:&quot;5 A RUE DES PERRIERES&quot;,&quot;zipCode&quot;:&quot;35800&quot;,&quot;city&quot;:&quot;ST BRIAC SUR MER&quot;,&quot;address&quot;:&quot;5 A RUE DES PERRIERES,\n    35800 ST BRIAC SUR MER&quot;,&quot;inseeCode&quot;:&quot;35256&quot;,&quot;enabled&quot;:false,&quot;codeRivoli&quot;:&quot;0611&quot;,&quot;matriculeVoie&quot;:&quot;00676767&quot;},&quot;complementCount&quot;:1}&quot;; line: 1, column: 11\n</code></pre>\n<p>The Get API:</p>\n<pre><code>@GetMapping(&quot;streetNumber&quot;)\npublic MetaAddress getAddressByIdRivoliStreetNumber(String code) {\n        return addressService.findByRivoliStreetNumber(code);\n}\n</code></pre>\n<p>MetaAddress.java:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class MetaAddress {\n    Address address;\n    long complementCount;\n}\n</code></pre>\n<p>Address.java:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic final class Address implements Serializable {\n\n    private String id;\n    private String zipCode;\n    private String city;\n\n    //@JsonIgnore\n    public void setZipCode(String zipCode) {\n        this.zipCode = zipCode;\n    }\n\n    @JsonSetter\n    public void setZipCode(String[] zipCode) {\n        this.zipCode = zipCode[0];\n    }\n}\n</code></pre>\n<p>During deserializing, the second <code>setZipCode(String[] zipCode)</code> is needed (which contains <code>@JsonSetter</code>), I tried to add <code>@JsonIgnore</code> to first method <code>public void setZipCode(String zipCode)</code> but the issue persists.</p>\n<p>Precision: Other APIs which use <code>Adress</code> class (not <code>MetaAddres</code>) work fine. The issue happens just when I call the API that uses <code>MetaAddress</code> object</p>\n<p>Anyone encountered the same problem please?</p>\n"},{"tags":["java","apache-flink","watermark"],"answers":[{"tags":[],"owner":{"account_id":5907827,"reputation":1534,"user_id":4648969,"display_name":"bzu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658654730,"creation_date":1658654730,"answer_id":73097154,"question_id":73064659,"body_markdown":"You should set periodic watermark interval:\r\n\r\n    env.getConfig().setAutoWatermarkInterval(millis);\r\n\r\nAlso, for Flink &lt; 1.12 you should enable event time:\r\n\r\n    env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\r\n\r\n\r\nhttps://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/event-time/generating_watermarks/#writing-a-periodic-watermarkgenerator\r\n\r\nIf you are trying to write tests, I would recommend using one of the provided test harnesses, since then you can input your own (deterministic) watermark and do not have to rely on auto watermark interval, which can give you different results on every run. In your case, the full input collection could be processed before a single watermark is generated, even if you set the auto watermark interval to 1 ms.\r\n\r\nhttps://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/testing/#unit-testing-stateful-or-timely-udfs--custom-operators","title":"Flink KeyedProcessFunction&lt;K,I,O&gt;.Context .timerService().currentWatermark() is always Long.MIN","body":"<p>You should set periodic watermark interval:</p>\n<pre><code>env.getConfig().setAutoWatermarkInterval(millis);\n</code></pre>\n<p>Also, for Flink &lt; 1.12 you should enable event time:</p>\n<pre><code>env.setStreamTimeCharacteristic(TimeCharacteristic.EventTime);\n</code></pre>\n<p><a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/event-time/generating_watermarks/#writing-a-periodic-watermarkgenerator\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/event-time/generating_watermarks/#writing-a-periodic-watermarkgenerator</a></p>\n<p>If you are trying to write tests, I would recommend using one of the provided test harnesses, since then you can input your own (deterministic) watermark and do not have to rely on auto watermark interval, which can give you different results on every run. In your case, the full input collection could be processed before a single watermark is generated, even if you set the auto watermark interval to 1 ms.</p>\n<p><a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/testing/#unit-testing-stateful-or-timely-udfs--custom-operators\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-release-1.15/docs/dev/datastream/testing/#unit-testing-stateful-or-timely-udfs--custom-operators</a></p>\n"}],"owner":{"account_id":25366057,"reputation":41,"user_id":19180624,"display_name":"Andra Turc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1658654730,"creation_date":1658399780,"question_id":73064659,"body_markdown":"I am currently trying to write some tests for our flink stream processing, and have something such as\r\n\r\n    env.fromCollection(events)\r\n                .assignTimestampsAndWatermarks(new BoundedOutOfOrdernessTimestampExtractor&lt;&gt;(Time.milliseconds(1000)) {\r\n                    @Override\r\n                    public long extractTimestamp(CallEvent element) {\r\n                        return element.getEventTimeStamp();\r\n                    }\r\n                })\r\n                .keyBy(CALL_EV_KEY_SELECTOR)\r\n                .process(new CallEventKeyedProcessFunction())\r\n                .map(new CallTimedEntityMapper())\r\n                .addSink(sink);\r\n\r\n        env.execute();\r\n\r\nin CallEventKeyedProcessFunction, when attempting to call ctx.timerService().currentWatermark();, this will always return Long.MIN.  Is there anything obvious I might be missing?","title":"Flink KeyedProcessFunction&lt;K,I,O&gt;.Context .timerService().currentWatermark() is always Long.MIN","body":"<p>I am currently trying to write some tests for our flink stream processing, and have something such as</p>\n<pre><code>env.fromCollection(events)\n            .assignTimestampsAndWatermarks(new BoundedOutOfOrdernessTimestampExtractor&lt;&gt;(Time.milliseconds(1000)) {\n                @Override\n                public long extractTimestamp(CallEvent element) {\n                    return element.getEventTimeStamp();\n                }\n            })\n            .keyBy(CALL_EV_KEY_SELECTOR)\n            .process(new CallEventKeyedProcessFunction())\n            .map(new CallTimedEntityMapper())\n            .addSink(sink);\n\n    env.execute();\n</code></pre>\n<p>in CallEventKeyedProcessFunction, when attempting to call ctx.timerService().currentWatermark();, this will always return Long.MIN.  Is there anything obvious I might be missing?</p>\n"},{"tags":["java","algorithm","sorting","mergesort","bubble-sort"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1658650760,"post_id":73096773,"comment_id":129100160,"body_markdown":"Bubble sort....","body":"Bubble sort...."},{"owner":{"account_id":413689,"reputation":40197,"user_id":787480,"accept_rate":69,"display_name":"Sneftel"},"score":0,"creation_date":1658651254,"post_id":73096773,"comment_id":129100247,"body_markdown":"@Asgar why would you think that?","body":"@Asgar why would you think that?"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":1,"creation_date":1658651896,"post_id":73096773,"comment_id":129100323,"body_markdown":"@Asgar, bubble sort swaps *neighboring* values only.","body":"@Asgar, bubble sort swaps <i>neighboring</i> values only."},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1658652554,"post_id":73096773,"comment_id":129100425,"body_markdown":"By bad, thanks for the lesson guys\\","body":"By bad, thanks for the lesson guys\\"},{"owner":{"account_id":413689,"reputation":40197,"user_id":787480,"accept_rate":69,"display_name":"Sneftel"},"score":0,"creation_date":1658654836,"post_id":73096773,"comment_id":129100766,"body_markdown":"@user16320675 While theres no reason to start the inner loop at `i`, swapping multiple times through the inner  loop is not necessarily slower, may be faster, and may be more efficient particularly on some embedded architectures.","body":"@user16320675 While theres no reason to start the inner loop at <code>i</code>, swapping multiple times through the inner  loop is not necessarily slower, may be faster, and may be more efficient particularly on some embedded architectures."}],"answers":[{"tags":[],"owner":{"account_id":413689,"reputation":40197,"user_id":787480,"accept_rate":69,"display_name":"Sneftel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658654643,"creation_date":1658651233,"answer_id":73096822,"question_id":73096773,"body_markdown":"Thats selection sort. You can tell because after iteration `i` of the outer loop, all elements of the array up to index `i` are in their final positions. The only nonstandard bit is that the active element is swapped each time a smaller element is found; this is not the case in the classic selection sort but is common in actual implementations (particularly in embedded systems).","title":"which category/type of sorting algorithm is this?","body":"<p>Thats selection sort. You can tell because after iteration <code>i</code> of the outer loop, all elements of the array up to index <code>i</code> are in their final positions. The only nonstandard bit is that the active element is swapped each time a smaller element is found; this is not the case in the classic selection sort but is common in actual implementations (particularly in embedded systems).</p>\n"}],"owner":{"account_id":10731021,"reputation":320,"user_id":7897131,"display_name":"Hexgear"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1658654643,"creation_date":1658650638,"question_id":73096773,"body_markdown":"This might be a dumb question. &lt;br/&gt;\r\nHowever, I am a little confused about categorizing this sort&lt;b/&gt;\r\n\r\nhere I am comparing the first element with all elements and then swapping with greater.\r\n&lt;br/&gt; then picking the second element compared with all next and then swapping with greater\r\n\r\n```java\r\nclass Sort{\r\n\r\n     public static void main(String[] arg)\r\n     {\r\n\r\n         System.out.println(&quot;Sort&quot;);\r\n\r\n         int[] unsorted = {2,5,2,5,3,3,6,2,7,3,1,84,3};\r\n\r\n         \r\n         for(int i=0;i&lt;unsorted.length;i++)\r\n         {\r\n            for(int j=i;j&lt;unsorted.length;j++)\r\n            {\r\n                if(unsorted[i] &gt; unsorted[j])\r\n                {\r\n                    swap(unsorted,i,j);\r\n                }\r\n            }      \r\n         }\r\n\r\n        System.out.println(Arrays.toString(unsorted));\r\n\r\n\r\n     }\r\n\r\n    public static void swap(int[] arr,int i,int j)\r\n    {\r\n        int tmp = arr[i];\r\n        arr[i]=arr[j];\r\n        arr[j]=tmp;\r\n    }\r\n\r\n\r\n }\r\n```","title":"which category/type of sorting algorithm is this?","body":"<p>This might be a dumb question. <br/>\nHowever, I am a little confused about categorizing this sort</p>\n<p>here I am comparing the first element with all elements and then swapping with greater.\n<br/> then picking the second element compared with all next and then swapping with greater</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Sort{\n\n     public static void main(String[] arg)\n     {\n\n         System.out.println(&quot;Sort&quot;);\n\n         int[] unsorted = {2,5,2,5,3,3,6,2,7,3,1,84,3};\n\n         \n         for(int i=0;i&lt;unsorted.length;i++)\n         {\n            for(int j=i;j&lt;unsorted.length;j++)\n            {\n                if(unsorted[i] &gt; unsorted[j])\n                {\n                    swap(unsorted,i,j);\n                }\n            }      \n         }\n\n        System.out.println(Arrays.toString(unsorted));\n\n\n     }\n\n    public static void swap(int[] arr,int i,int j)\n    {\n        int tmp = arr[i];\n        arr[i]=arr[j];\n        arr[j]=tmp;\n    }\n\n\n }\n</code></pre>\n"},{"tags":["java","swing","user-interface","awt","jlabel"],"comments":[{"owner":{"display_name":"user19606762"},"score":0,"creation_date":1658595791,"post_id":73092568,"comment_id":129092802,"body_markdown":"not sure if i got you but if you want to change the value n1 based on the new value of the jlabel l1 then create a new class that extend JLabel that has this int as field then change it as you like","body":"not sure if i got you but if you want to change the value n1 based on the new value of the jlabel l1 then create a new class that extend JLabel that has this int as field then change it as you like"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1658617033,"post_id":73092568,"comment_id":129096694,"body_markdown":"repeating: __do not__ do any hard-coded sizing or locating (aka: null layout) - instead use a suitable layout manager","body":"repeating: <b>do not</b> do any hard-coded sizing or locating (aka: null layout) - instead use a suitable layout manager"}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1658600518,"creation_date":1658597401,"answer_id":73092883,"question_id":73092568,"body_markdown":"AtomicInteger? You&#39;re barking up the wrong tree since this won&#39;t help you in the least. \r\n\r\nYour `n1` value *does* in fact change within the listener, but you&#39;re not changing the JLabel text at all, and that is what you need to do:\r\n\r\n* In the MouseListener, also call `setText(...)` on whatever JLabel (the one clicked perhaps) that you wish to have the text display change on.\r\n* While the `l1` JLabel&#39;s displayed text is created using `n1`&#39;s value, note that if `n1` ever changes, `l1`\r\ns text will not change on its own. Again, if you wish to change `l1`&#39;s text, you must do so with code, calling `.setText(...)` on it.\r\n\r\nSome suggestions based on your new requirements:\r\n\r\n* Create an array of int to hold the int values\r\n* Create a `List&lt;JLabels&gt;` to hold all the JLabels that will display the values held in the above collection of numbers\r\n* Create your JLabels in a for loop that loops through all the ints, and fill each JLabel with the appropriate number text\r\n* In that same for loop, add your JLabels to the JLabel-list mentioned above\r\n* Add a MouseListener (I usually use a MouseAdapter for this) to each JLabel in the for loop\r\n* Pass the for loop&#39;s index into your MouseListener&#39;s constructor to set a field of the class, so that the index of the selected JLabel is readily available\r\n* Use a JSpinner and SpinnerNumberModel to display the changable text\r\n* In the MouseLister, set the value that the spinner holds\r\n* Add a ChangeListener to the spinner so that when the numeric value changes, you update the appropriate JLabel with the new value\r\n* You will need to also remove the above ChangeListener before setting the spinner&#39;s value in the mouse listener and then re-add the same listener immediately after making this change.\r\n* Do *not* use AtomicInteger as it is completely unnecessary and is somewhat misleading to you\r\n* Avoid using null layouts but instead use layout managers\r\n\r\nProof of concept:\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.GridLayout;\r\nimport java.awt.event.MouseAdapter;\r\nimport java.awt.event.MouseEvent;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.border.Border;\r\nimport javax.swing.event.ChangeEvent;\r\nimport javax.swing.event.ChangeListener;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class GUI2 extends JPanel {\r\n    private static final Border UNSELECTED_BORDER = BorderFactory.createLineBorder(Color.LIGHT_GRAY, 3);\r\n    private static final Border SELECTED_BORDER = BorderFactory.createLineBorder(Color.PINK, 3);\r\n    private int[] intArray = { 6, 5, 8, 13, 17, 22, 55, 33, 2, 0, 23, 51, 0, 111, 200, 6, 5, 8, 13, 17, 22, 55, 33, 2,\r\n            0, 23, 51, 0, 111, 200, 6, 5, 8, 13, 17, 22, 55, 33, 2, 0, 23, 51, 0, 111, 200 };\r\n    private SpinnerNumberModel spinnerModel = new SpinnerNumberModel(0, 0, 10000, 1);\r\n    private JSpinner intSpinner = new JSpinner(spinnerModel);\r\n    private ChangeListener spinnerListener = new SpinnerListener();\r\n    private List&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\r\n    private int selectedIndex = -1;\r\n\r\n    public GUI2() {\r\n        JPanel topPanel = new JPanel();\r\n        topPanel.add(new JLabel(&quot;Current Selected Value:&quot;));\r\n        topPanel.add(Box.createHorizontalStrut(5));\r\n        topPanel.add(intSpinner);\r\n        intSpinner.addChangeListener(spinnerListener);\r\n\r\n        int gap = 3;\r\n        JPanel labelGridPanel = new JPanel(new GridLayout(0, 5, gap, gap));\r\n        for (int i = 0; i &lt; intArray.length; i++) {\r\n            String text = String.valueOf(intArray[i]);\r\n            JLabel label = new JLabel(text);\r\n            label.setBorder(UNSELECTED_BORDER);\r\n            label.addMouseListener(new MyMouse(i));\r\n            labelGridPanel.add(label);\r\n            labelList.add(label);\r\n        }\r\n\r\n        setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\r\n        setLayout(new BorderLayout(gap, gap));\r\n        add(topPanel, BorderLayout.PAGE_START);\r\n        add(labelGridPanel, BorderLayout.CENTER);\r\n    }\r\n\r\n    private class MyMouse extends MouseAdapter {\r\n        private int index;\r\n\r\n        public MyMouse(int index) {\r\n            this.index = index;\r\n        }\r\n\r\n        @Override\r\n        public void mousePressed(MouseEvent e) {\r\n            selectedIndex = index;\r\n            JLabel label = labelList.get(index);\r\n            int currentValue = Integer.parseInt(label.getText());\r\n\r\n            // remove change listener before making this change\r\n            intSpinner.removeChangeListener(spinnerListener);\r\n            intSpinner.setValue(currentValue);\r\n            // then re-add the change listener after\r\n            intSpinner.addChangeListener(spinnerListener);\r\n\r\n            // show by border which JLabel has been selected\r\n            for (JLabel jLabel : labelList) {\r\n                // first make all borders the default border\r\n                jLabel.setBorder(UNSELECTED_BORDER);\r\n            }\r\n            // then set the selected border\r\n            labelList.get(index).setBorder(SELECTED_BORDER);\r\n        }\r\n    }\r\n\r\n    private class SpinnerListener implements ChangeListener {\r\n\r\n        @Override\r\n        public void stateChanged(ChangeEvent e) {\r\n            // if we have not yet selected a JLabel, get out of here\r\n            if (selectedIndex &lt; 0) {\r\n                return;\r\n            }\r\n            int value = (int) spinnerModel.getValue();\r\n            labelList.get(selectedIndex).setText(Integer.toString(value));\r\n        }\r\n\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            GUI2 mainPanel = new GUI2();\r\n\r\n            JFrame frame = new JFrame(&quot;GUI&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n\r\n}\r\n```","title":"How to also change int if Jlabel is changed","body":"<p>AtomicInteger? You're barking up the wrong tree since this won't help you in the least.</p>\n<p>Your <code>n1</code> value <em>does</em> in fact change within the listener, but you're not changing the JLabel text at all, and that is what you need to do:</p>\n<ul>\n<li>In the MouseListener, also call <code>setText(...)</code> on whatever JLabel (the one clicked perhaps) that you wish to have the text display change on.</li>\n<li>While the <code>l1</code> JLabel's displayed text is created using <code>n1</code>'s value, note that if <code>n1</code> ever changes, <code>l1</code>\ns text will not change on its own. Again, if you wish to change <code>l1</code>'s text, you must do so with code, calling <code>.setText(...)</code> on it.</li>\n</ul>\n<p>Some suggestions based on your new requirements:</p>\n<ul>\n<li>Create an array of int to hold the int values</li>\n<li>Create a <code>List&lt;JLabels&gt;</code> to hold all the JLabels that will display the values held in the above collection of numbers</li>\n<li>Create your JLabels in a for loop that loops through all the ints, and fill each JLabel with the appropriate number text</li>\n<li>In that same for loop, add your JLabels to the JLabel-list mentioned above</li>\n<li>Add a MouseListener (I usually use a MouseAdapter for this) to each JLabel in the for loop</li>\n<li>Pass the for loop's index into your MouseListener's constructor to set a field of the class, so that the index of the selected JLabel is readily available</li>\n<li>Use a JSpinner and SpinnerNumberModel to display the changable text</li>\n<li>In the MouseLister, set the value that the spinner holds</li>\n<li>Add a ChangeListener to the spinner so that when the numeric value changes, you update the appropriate JLabel with the new value</li>\n<li>You will need to also remove the above ChangeListener before setting the spinner's value in the mouse listener and then re-add the same listener immediately after making this change.</li>\n<li>Do <em>not</em> use AtomicInteger as it is completely unnecessary and is somewhat misleading to you</li>\n<li>Avoid using null layouts but instead use layout managers</li>\n</ul>\n<p>Proof of concept:</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.GridLayout;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class GUI2 extends JPanel {\n    private static final Border UNSELECTED_BORDER = BorderFactory.createLineBorder(Color.LIGHT_GRAY, 3);\n    private static final Border SELECTED_BORDER = BorderFactory.createLineBorder(Color.PINK, 3);\n    private int[] intArray = { 6, 5, 8, 13, 17, 22, 55, 33, 2, 0, 23, 51, 0, 111, 200, 6, 5, 8, 13, 17, 22, 55, 33, 2,\n            0, 23, 51, 0, 111, 200, 6, 5, 8, 13, 17, 22, 55, 33, 2, 0, 23, 51, 0, 111, 200 };\n    private SpinnerNumberModel spinnerModel = new SpinnerNumberModel(0, 0, 10000, 1);\n    private JSpinner intSpinner = new JSpinner(spinnerModel);\n    private ChangeListener spinnerListener = new SpinnerListener();\n    private List&lt;JLabel&gt; labelList = new ArrayList&lt;&gt;();\n    private int selectedIndex = -1;\n\n    public GUI2() {\n        JPanel topPanel = new JPanel();\n        topPanel.add(new JLabel(&quot;Current Selected Value:&quot;));\n        topPanel.add(Box.createHorizontalStrut(5));\n        topPanel.add(intSpinner);\n        intSpinner.addChangeListener(spinnerListener);\n\n        int gap = 3;\n        JPanel labelGridPanel = new JPanel(new GridLayout(0, 5, gap, gap));\n        for (int i = 0; i &lt; intArray.length; i++) {\n            String text = String.valueOf(intArray[i]);\n            JLabel label = new JLabel(text);\n            label.setBorder(UNSELECTED_BORDER);\n            label.addMouseListener(new MyMouse(i));\n            labelGridPanel.add(label);\n            labelList.add(label);\n        }\n\n        setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));\n        setLayout(new BorderLayout(gap, gap));\n        add(topPanel, BorderLayout.PAGE_START);\n        add(labelGridPanel, BorderLayout.CENTER);\n    }\n\n    private class MyMouse extends MouseAdapter {\n        private int index;\n\n        public MyMouse(int index) {\n            this.index = index;\n        }\n\n        @Override\n        public void mousePressed(MouseEvent e) {\n            selectedIndex = index;\n            JLabel label = labelList.get(index);\n            int currentValue = Integer.parseInt(label.getText());\n\n            // remove change listener before making this change\n            intSpinner.removeChangeListener(spinnerListener);\n            intSpinner.setValue(currentValue);\n            // then re-add the change listener after\n            intSpinner.addChangeListener(spinnerListener);\n\n            // show by border which JLabel has been selected\n            for (JLabel jLabel : labelList) {\n                // first make all borders the default border\n                jLabel.setBorder(UNSELECTED_BORDER);\n            }\n            // then set the selected border\n            labelList.get(index).setBorder(SELECTED_BORDER);\n        }\n    }\n\n    private class SpinnerListener implements ChangeListener {\n\n        @Override\n        public void stateChanged(ChangeEvent e) {\n            // if we have not yet selected a JLabel, get out of here\n            if (selectedIndex &lt; 0) {\n                return;\n            }\n            int value = (int) spinnerModel.getValue();\n            labelList.get(selectedIndex).setText(Integer.toString(value));\n        }\n\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            GUI2 mainPanel = new GUI2();\n\n            JFrame frame = new JFrame(&quot;GUI&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1658598005,"creation_date":1658597620,"answer_id":73092914,"question_id":73092568,"body_markdown":"In your code, you only update ```n1``` regardless of which label is the ```currentEditLabel.```\r\n\r\nYour code:\r\n```\r\ncurrentEditLabel.setText(t.getText());\r\nAtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\r\nn1 = level.intValue();\r\ncurrentEditLabel = null;\r\n```\r\n\r\nSolution:  You need to know which label is the currentEditLabel so that you can update the correct variable.  Your action listener will need access to l1, l2 and l3.  So, instead of defining them in the constructor, define them as instance variables same way you defined n1, n2, and n3.\r\n\r\n```\r\ncurrentEditLabel.setText(t.getText());\r\nAtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\r\nif (currentEditLabel == l1) \r\n  n1 = level.intValue();\r\nelse if (currentEditLabel == l2) \r\n  n2 = level.intValue();\r\nelse \r\n  n3 = level.intValue();\r\ncurrentEditLabel = null;\r\n```","title":"How to also change int if Jlabel is changed","body":"<p>In your code, you only update <code>n1</code> regardless of which label is the <code>currentEditLabel.</code></p>\n<p>Your code:</p>\n<pre><code>currentEditLabel.setText(t.getText());\nAtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\nn1 = level.intValue();\ncurrentEditLabel = null;\n</code></pre>\n<p>Solution:  You need to know which label is the currentEditLabel so that you can update the correct variable.  Your action listener will need access to l1, l2 and l3.  So, instead of defining them in the constructor, define them as instance variables same way you defined n1, n2, and n3.</p>\n<pre><code>currentEditLabel.setText(t.getText());\nAtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\nif (currentEditLabel == l1) \n  n1 = level.intValue();\nelse if (currentEditLabel == l2) \n  n2 = level.intValue();\nelse \n  n3 = level.intValue();\ncurrentEditLabel = null;\n</code></pre>\n"}],"owner":{"account_id":25874315,"reputation":3,"user_id":19604632,"display_name":"John Carlton"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73092883,"answer_count":2,"score":-1,"last_activity_date":1658654405,"creation_date":1658594887,"question_id":73092568,"body_markdown":"I am trying to figure out how I can also change my int if my Jlabel is changed. I tried to use AtomicInteger and it works if I only want to change n1, but how do I make it that it looks at the label and then changes the correct int? At the moment I have n1 - n3, but in the future that will be 30.\r\n\r\nThis is my code at the moment:\r\n\r\n```java\r\npublic class GUI {\r\n    JLabel currentEditLabel = null;\r\n    JFrame frame;\r\n    int n1 = 6;\r\n    int n2 = 5;\r\n    int n3 = 8;\r\n\r\n    GUI() {\r\n        frame = new JFrame();//creating instance of JFrame\r\n        JLabel l1 = new JLabel(Integer.toString(n1));\r\n        JLabel l2 = new JLabel(Integer.toString(n2));\r\n        JLabel l3 = new JLabel(Integer.toString(n3));\r\n        JTextField t = new JTextField();\r\n\r\n        l1.setBounds(40, 50, 100, 40);\r\n        l2.setBounds(40, 100, 100, 40);\r\n        l3.setBounds(40, 150, 100, 40);\r\n        t.setBounds(20, 200, 100, 40);\r\n\r\n        frame.add(l1);\r\n        frame.add(l2);\r\n        frame.add(l3);\r\n        frame.add(t);\r\n\r\n        t.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                if (currentEditLabel != null) {\r\n                    currentEditLabel.setText(t.getText());\r\n                    AtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\r\n                    n1 = level.intValue();\r\n                    currentEditLabel = null;\r\n                }\r\n            }\r\n        });\r\n\r\n        addMouseListener(l1, t);\r\n        addMouseListener(l2, t);\r\n        addMouseListener(l3, t);\r\n\r\n        frame.setSize(400, 500);//400 width and 500 height\r\n        frame.setLayout(null);//using no layout managers\r\n        frame.setVisible(true);//making the frame visible\r\n    }\r\n\r\n    private void addMouseListener(JLabel label, JTextField t) {\r\n        label.addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mouseClicked(MouseEvent e) {\r\n                currentEditLabel = (JLabel) e.getComponent();\r\n                t.setText(currentEditLabel.getText());\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new GUI();\r\n    }\r\n}\r\n```","title":"How to also change int if Jlabel is changed","body":"<p>I am trying to figure out how I can also change my int if my Jlabel is changed. I tried to use AtomicInteger and it works if I only want to change n1, but how do I make it that it looks at the label and then changes the correct int? At the moment I have n1 - n3, but in the future that will be 30.</p>\n<p>This is my code at the moment:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GUI {\n    JLabel currentEditLabel = null;\n    JFrame frame;\n    int n1 = 6;\n    int n2 = 5;\n    int n3 = 8;\n\n    GUI() {\n        frame = new JFrame();//creating instance of JFrame\n        JLabel l1 = new JLabel(Integer.toString(n1));\n        JLabel l2 = new JLabel(Integer.toString(n2));\n        JLabel l3 = new JLabel(Integer.toString(n3));\n        JTextField t = new JTextField();\n\n        l1.setBounds(40, 50, 100, 40);\n        l2.setBounds(40, 100, 100, 40);\n        l3.setBounds(40, 150, 100, 40);\n        t.setBounds(20, 200, 100, 40);\n\n        frame.add(l1);\n        frame.add(l2);\n        frame.add(l3);\n        frame.add(t);\n\n        t.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if (currentEditLabel != null) {\n                    currentEditLabel.setText(t.getText());\n                    AtomicInteger level = new AtomicInteger(Integer.parseInt(currentEditLabel.getText()));\n                    n1 = level.intValue();\n                    currentEditLabel = null;\n                }\n            }\n        });\n\n        addMouseListener(l1, t);\n        addMouseListener(l2, t);\n        addMouseListener(l3, t);\n\n        frame.setSize(400, 500);//400 width and 500 height\n        frame.setLayout(null);//using no layout managers\n        frame.setVisible(true);//making the frame visible\n    }\n\n    private void addMouseListener(JLabel label, JTextField t) {\n        label.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseClicked(MouseEvent e) {\n                currentEditLabel = (JLabel) e.getComponent();\n                t.setText(currentEditLabel.getText());\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        new GUI();\n    }\n}\n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8830,"page":1162,"page_size":100}
