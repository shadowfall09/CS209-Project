{"items":[{"tags":["java","eclipse","javadoc"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1683209567,"post_id":76173551,"comment_id":134334323,"body_markdown":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)","body":"What do you have for the &quot;JRE source compatibility&quot; option on the third page of the wizard (don&#39;t just press Finish immediately use Next to go through all the pages)"}],"answers":[{"comments":[{"owner":{"account_id":6134502,"reputation":333,"user_id":4783796,"display_name":"Knupel"},"score":0,"creation_date":1683229606,"post_id":76174097,"comment_id":134339044,"body_markdown":"Thanks a lot, I search for that from few days, weeks, months !!!!!!!!","body":"Thanks a lot, I search for that from few days, weeks, months !!!!!!!!"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683244192,"creation_date":1683209099,"answer_id":76174097,"question_id":76173551,"body_markdown":"Eclipse is doing what you asked it to do.\r\n\r\n`javac17` can still be configured to compile java 8 code. Just like, say, &#39;Word 2024&#39; can still open files made with &#39;word 2016&#39;.\r\n\r\nAnd.. it is. That&#39;s what the `-source 8` is about: You&#39;re running `javadoc -source 8 ....`.\r\n\r\nClick on &#39;next&#39; twice. You will see the option &#39;JRE source compatibility&#39;. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling `javac` (invoked by `javadoc` to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren&#39;t compatible with that.\r\n","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>Eclipse is doing what you asked it to do.</p>\n<p><code>javac17</code> can still be configured to compile java 8 code. Just like, say, 'Word 2024' can still open files made with 'word 2016'.</p>\n<p>And.. it is. That's what the <code>-source 8</code> is about: You're running <code>javadoc -source 8 ....</code>.</p>\n<p>Click on 'next' twice. You will see the option 'JRE source compatibility'. Set that to at least 15; it is currently on 8, so eclipse is dutifully telling <code>javac</code> (invoked by <code>javadoc</code> to parse the doc comments and signature out) to parse it as if its java 8 compatible source, and expression-switches aren't compatible with that.</p>\n"}],"owner":{"account_id":6134502,"reputation":333,"user_id":4783796,"display_name":"Knupel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174097,"answer_count":1,"score":0,"last_activity_date":1683244192,"creation_date":1683205520,"question_id":76173551,"body_markdown":"I&#39;ve my project in Eclipse and since few weeks that&#39;s failed do build my javadoc, because I&#39;ve a syntax problem with arrow in it.\r\nThe console return I need to use an upper version of Java 14 to to it.\r\nThe problem, it&#39;s my java is java 17, so I don&#39;t understand where I must look... to fix that.\r\nIndeed, I&#39;ve no problem to build my library!!! just for the javadoc.\r\n```\r\nerror: switch rules are not supported in -source 8\r\n          case &#39;[&#39; -&gt;\r\n                   ^\r\n  (use -source 14 or higher to enable switch rules)\r\n```\r\n\r\nmy setting :\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6whuh.png","title":"Fail to build Javadoc with java 17 in Eclipse","body":"<p>I've my project in Eclipse and since few weeks that's failed do build my javadoc, because I've a syntax problem with arrow in it.\nThe console return I need to use an upper version of Java 14 to to it.\nThe problem, it's my java is java 17, so I don't understand where I must look... to fix that.\nIndeed, I've no problem to build my library!!! just for the javadoc.</p>\n<pre><code>error: switch rules are not supported in -source 8\n          case '[' -&gt;\n                   ^\n  (use -source 14 or higher to enable switch rules)\n</code></pre>\n<p>my setting :\n<a href=\"https://i.stack.imgur.com/6whuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6whuh.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","mqtt","iot","paho"],"comments":[{"owner":{"account_id":8967184,"reputation":570,"user_id":9305266,"display_name":"Manish Ahire"},"score":0,"creation_date":1683266119,"post_id":76175743,"comment_id":134343269,"body_markdown":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;","body":"please add this line in manifest file         &lt;service android:name=&quot;org.eclipse.paho.android.service.MqttService&quot; /&gt;"},{"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"score":0,"creation_date":1683282579,"post_id":76175743,"comment_id":134346387,"body_markdown":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button.","body":"No this doesn&#39;t work The app still crashes at runtime as soon as I press the button."}],"owner":{"account_id":27665703,"reputation":1,"user_id":21117569,"display_name":"KAI"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683243710,"creation_date":1683220285,"question_id":76175743,"body_markdown":"I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.\r\n\r\nHere is the stack trace and code for `MainActivity.java` file.\r\n\r\n```\r\npackage com.tanmay.helloworld;\r\n\r\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport org.eclipse.paho.android.service.MqttAndroidClient;\r\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\r\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\r\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\r\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\r\nimport org.eclipse.paho.client.mqttv3.MqttClient;\r\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\r\nimport org.eclipse.paho.client.mqttv3.MqttException;\r\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\r\n    String clientId = &quot;123&quot;;\r\n    \r\n    \r\n    Button button;\r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    \r\n        button = findViewById(R.id.button);\r\n    \r\n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\r\n        MqttConnectOptions options = new MqttConnectOptions();\r\n        options.setCleanSession(true);\r\n        options.setUserName(&quot;Admin&quot;);\r\n        options.setPassword(&quot;Admin&quot;.toCharArray());\r\n    \r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                try {\r\n                    IMqttToken token = client.connect(options);\r\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\r\n                } catch (MqttException e) {\r\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\r\n                    throw new RuntimeException(&quot;String error&quot;+e);\r\n                }\r\n            }\r\n        });    \r\n    }\r\n}\r\n```\r\n\r\n```\r\n2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\r\nProcess: com.tanmay.helloworld, PID: 468\r\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\r\nat android.view.View.performClick(View.java:7448)\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\r\nat android.view.View.performClickInternal(View.java:7425)\r\nat android.view.View.access$3600(View.java:80)\r\nat android.view.View$PerformClick.run(View.java:28305)\r\nat android.os.Handler.handleCallback(Handler.java:938)\r\nat android.os.Handler.dispatchMessage(Handler.java:99)\r\nat android.os.Looper.loop(Looper.java:223)\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\nCaused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\r\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\r\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)&#160;\r\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)&#160;\r\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)&#160;\r\nat android.view.View.performClick(View.java:7448)&#160;\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)&#160;\r\nat android.view.View.performClickInternal(View.java:7425)&#160;\r\nat android.view.View.access$3600(View.java:80)&#160;\r\nat android.view.View$PerformClick.run(View.java:28305)&#160;\r\nat android.os.Handler.handleCallback(Handler.java:938)&#160;\r\nat android.os.Handler.dispatchMessage(Handler.java:99)&#160;\r\nat android.os.Looper.loop(Looper.java:223)&#160;\r\nat android.app.ActivityThread.main(ActivityThread.java:7656)&#160;\r\nat java.lang.reflect.Method.invoke(Native Method)&#160;\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)&#160;\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nI am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.","title":"I am trying to establish an MQTT connection in Android but there are some runtime errors","body":"<p>I have this code for MQTT Test Client and I am trying to connect with public HiveMQ Broker but there are some runtime exceptions and I am not able to solve this problem.</p>\n<p>Here is the stack trace and code for <code>MainActivity.java</code> file.</p>\n<pre><code>package com.tanmay.helloworld;\n\nimport static androidx.constraintlayout.helper.widget.MotionEffect.TAG;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport org.eclipse.paho.android.service.MqttAndroidClient;\nimport org.eclipse.paho.client.mqttv3.IMqttActionListener;\nimport org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;\nimport org.eclipse.paho.client.mqttv3.IMqttToken;\nimport org.eclipse.paho.client.mqttv3.MqttCallback;\nimport org.eclipse.paho.client.mqttv3.MqttCallbackExtended;\nimport org.eclipse.paho.client.mqttv3.MqttClient;\nimport org.eclipse.paho.client.mqttv3.MqttConnectOptions;\nimport org.eclipse.paho.client.mqttv3.MqttException;\nimport org.eclipse.paho.client.mqttv3.MqttMessage;\n\npublic class MainActivity extends AppCompatActivity {\n\n    String serverUrl = &quot;tcp://broker.hivemq.com:1883&quot;;\n    String clientId = &quot;123&quot;;\n    \n    \n    Button button;\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    \n        button = findViewById(R.id.button);\n    \n        MqttAndroidClient client = new MqttAndroidClient(getApplicationContext(),serverUrl,clientId);\n        MqttConnectOptions options = new MqttConnectOptions();\n        options.setCleanSession(true);\n        options.setUserName(&quot;Admin&quot;);\n        options.setPassword(&quot;Admin&quot;.toCharArray());\n    \n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                try {\n                    IMqttToken token = client.connect(options);\n                    Toast.makeText(MainActivity.this, &quot;Client Connected&quot;, Toast.LENGTH_SHORT).show();\n                } catch (MqttException e) {\n                    Toast.makeText(MainActivity.this, &quot;Client was not able to connect&quot;, Toast.LENGTH_SHORT).show();\n                    throw new RuntimeException(&quot;String error&quot;+e);\n                }\n            }\n        });    \n    }\n}\n</code></pre>\n<pre><code>2023-05-04 22:30:57.44 468-468 AndroidRuntime          com.tanmay.helloworld                E  FATAL EXCEPTION: main\nProcess: com.tanmay.helloworld, PID: 468\njava.lang.NoClassDefFoundError: Failed resolution of: Landroid/support/v4/content/LocalBroadcastManager;\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428)\nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334)\nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50)\nat android.view.View.performClick(View.java:7448)\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202)\nat android.view.View.performClickInternal(View.java:7425)\nat android.view.View.access$3600(View.java:80)\nat android.view.View$PerformClick.run(View.java:28305)\nat android.os.Handler.handleCallback(Handler.java:938)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loop(Looper.java:223)\nat android.app.ActivityThread.main(ActivityThread.java:7656)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;android.support.v4.content.LocalBroadcastManager&quot; on path: DexPathList[[zip file &quot;/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~qPAk0jHRCk_VS0tccfnOQ==/com.tanmay.helloworld-Q-5Yca9SapvvvBY2CXk2Gw==/lib/x86, /system/lib, /system_ext/lib]]\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:207)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:32)\nat org.eclipse.paho.android.service.MqttAndroidClient.registerReceiver(MqttAndroidClient.java:450) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:428) \nat org.eclipse.paho.android.service.MqttAndroidClient.connect(MqttAndroidClient.java:334) \nat com.tanmay.helloworld.MainActivity$.onClick(MainActivity.java:50) \nat android.view.View.performClick(View.java:7448) \nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:202) \nat android.view.View.performClickInternal(View.java:7425) \nat android.view.View.access$3600(View.java:80) \nat android.view.View$PerformClick.run(View.java:28305) \nat android.os.Handler.handleCallback(Handler.java:938) \nat android.os.Handler.dispatchMessage(Handler.java:99) \nat android.os.Looper.loop(Looper.java:223) \nat android.app.ActivityThread.main(ActivityThread.java:7656) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>I am trying to create an App that can  publish and subscribe JSON payloads over an MQTT protocal.</p>\n"},{"tags":["java","intellij-idea","javadoc","intellij-14"],"comments":[{"owner":{"account_id":5743051,"reputation":66,"user_id":4535117,"display_name":"Brunaldo"},"score":0,"creation_date":1423848175,"post_id":28505097,"comment_id":45329499,"body_markdown":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    `/*\n    Hello\n     */` . Only have one start after the first forward slash.","body":"Sorry if I&#39;m wrong here but that&#39;s how that comment is suppose to me, I think you&#39;re looking for    <code>&#47;*     Hello      *&#47;</code> . Only have one start after the first forward slash."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848462,"post_id":28505097,"comment_id":45329671,"body_markdown":"@Brunaldo javadocs commonly start with \n/** see http://www.oracle.com/technetwork/articles/java/index-137868.html","body":"@Brunaldo javadocs commonly start with  /** see <a href=\"http://www.oracle.com/technetwork/articles/java/index-137868.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/articles/java/index-137868.html</a>"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1423848587,"post_id":28505097,"comment_id":45329758,"body_markdown":"@rsavchenko The javadoc block style comments include the `*` on the newline and the javadoc compiler removes them. IntelliJ is following the convention.","body":"@rsavchenko The javadoc block style comments include the <code>*</code> on the newline and the javadoc compiler removes them. IntelliJ is following the convention."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1423848780,"post_id":28505097,"comment_id":45329851,"body_markdown":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star","body":"@ElliottFrisch the one star is fine but each time i hit enter I get 2 3 4 5 *&#39;s on the same line. So when I hit enter I get  * (cursor) * I don&#39;t   want the trailing star"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1423848907,"post_id":28505097,"comment_id":45329928,"body_markdown":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know...","body":"@rsavchenko Ahh.. sounds like you edited the default configuration in the preferences... I&#39;m not 100% sure howto reset that with intellij but I expect someone will know..."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1423856797,"post_id":28505097,"comment_id":45334101,"body_markdown":"@rsavchenko Did you know you can format, `ctrl-alt-L`, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format.","body":"@rsavchenko Did you know you can format, <code>ctrl-alt-L</code>, and have your words auto fit the rows with the *s? Wondering if you don&#39;t like the *s because you go back and add text and manually format."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":0,"creation_date":1424241413,"post_id":28505097,"comment_id":45463610,"body_markdown":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently.","body":"I am also seeing this behavior, and it began after a recent update. I doubt it has to do with any preference... and if it does, the update either changed a preference without asking me, or the update started interpreting a setting differently."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301066,"post_id":28505097,"comment_id":45498109,"body_markdown":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though.","body":"@DilumRanatunga it looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though."},{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301109,"post_id":28505097,"comment_id":45498129,"body_markdown":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters.","body":"@NESPowerGlove sadly the auto format doesn&#39;t remove the extra **** characters."},{"owner":{"account_id":4082028,"reputation":5506,"user_id":3352285,"display_name":"NESPowerGlove"},"score":0,"creation_date":1424303012,"post_id":28505097,"comment_id":45498808,"body_markdown":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment.","body":"@rsavchenko I meant that it would keep the asterisks but allow for easy typing of whatever you want, it would place them asterisks in for you, so you don&#39;t have to fight manually moving asterisks around when you wanted to add text in the middle of a preexisting comment."}],"answers":[{"comments":[{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":1,"creation_date":1424301242,"post_id":28508114,"comment_id":45498181,"body_markdown":"I wan&#39;t javadoc comments. The problem is not one star at each line. The problem is a star is added at every newline so u can get 2,3,4,5 etc *&#39;s per line","body":"I wan&#39;t javadoc comments. The problem is not one star at each line. The problem is a star is added at every newline so u can get 2,3,4,5 etc *&#39;s per line"}],"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423858854,"creation_date":1423858854,"answer_id":28508114,"question_id":28505097,"body_markdown":"What you&#39;re typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those *should* have a * at every line. So just delete the extra * after the first / and you&#39;ll be fine.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>What you're typing are not normal block comments (/* ... */) but Javadoc comments (/** ... */), and those <em>should</em> have a * at every line. So just delete the extra * after the first / and you'll be fine.</p>\n"},{"comments":[{"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"score":0,"creation_date":1424301172,"post_id":28577729,"comment_id":45498152,"body_markdown":"This seems likely. Although It looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though.","body":"This seems likely. Although It looks like it did have to do with a preference. I deleted my Intellij configuration directory and the problem went away. Sucks that I had to redo all my settings. But it must have been something in there, because when I import my old setting it comes back. Can&#39;t pinpoint the setting causing this though."},{"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"score":0,"creation_date":1424362196,"post_id":28577729,"comment_id":45526002,"body_markdown":"Thanks for the update @rsavchenko -- I guess I should now upload my settings to the ticket...","body":"Thanks for the update @rsavchenko -- I guess I should now upload my settings to the ticket..."}],"tags":[],"owner":{"account_id":25300,"reputation":13294,"user_id":64967,"accept_rate":75,"display_name":"Dilum Ranatunga"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1424749198,"creation_date":1424242530,"answer_id":28577729,"question_id":28505097,"body_markdown":"I suspect this is a defect/regression. I&#39;ve created an issue on YouTrack: https://youtrack.jetbrains.com/issue/IDEA-136673\r\n\r\n---\r\n\r\n**Update**\r\n\r\nThe IntelliJ team isolated the issue to Gauge plugin. I&#39;ve logged the issue with plugin authors: https://github.com/getgauge/Intellij-Plugin/issues/39","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I suspect this is a defect/regression. I've created an issue on YouTrack: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-136673\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136673</a></p>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>The IntelliJ team isolated the issue to Gauge plugin. I've logged the issue with plugin authors: <a href=\"https://github.com/getgauge/Intellij-Plugin/issues/39\" rel=\"nofollow\">https://github.com/getgauge/Intellij-Plugin/issues/39</a></p>\n"},{"tags":[],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424717550,"creation_date":1424717550,"answer_id":28681180,"question_id":28505097,"body_markdown":"Looks like it&#39;s a bug in the Gauge plugin I was using for &quot;.md&quot; file support. Uninstalled that and the issue was gone.\r\n \r\nhttps://youtrack.jetbrains.com/issue/IDEA-136182","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>Looks like it's a bug in the Gauge plugin I was using for \".md\" file support. Uninstalled that and the issue was gone.</p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/IDEA-136182\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/IDEA-136182</a></p>\n"},{"tags":[],"owner":{"account_id":13151841,"reputation":391,"user_id":9500212,"display_name":"Corey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683243622,"creation_date":1683243622,"answer_id":76178003,"question_id":28505097,"body_markdown":"I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I had this problem recently. It turns out it was caused by the AWS Toolkit plugin.</p>\n"}],"owner":{"account_id":985588,"reputation":353,"user_id":1004190,"accept_rate":100,"display_name":"rsavchenko"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1009,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":28577729,"answer_count":4,"score":5,"last_activity_date":1683243622,"creation_date":1423847841,"question_id":28505097,"body_markdown":"I&#39;m having a super strange problem with Idea. \r\n\r\nEvery time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \r\nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can&#39;t seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? \r\n\r\nExample:\r\n\r\n     /**\r\n     * Some comment (pressing enter 3 times)\r\n     * \r\n     * \r\n     * (cursor is here)* * * * \r\n     */\r\nAnother Example:\r\n\r\n    /**\r\n    * Some comment (press enter)\r\n    * (cursor is here)*\r\n    */\r\n        \r\n\r\n\r\n","title":"IntelliJ adds extra * every time I hit enter in a block comment","body":"<p>I'm having a super strange problem with Idea. </p>\n\n<p>Every time I hit enter in a block comment it adds an extra * on the line. It gets really annoying to have to delete it before typing each line. \nI have tried importing several coworkers code style settings who are not having this issue to no avail. I also can't seem to find the setting that would be doing this, and nothing on google. Anyone know a setting that could be causing this? </p>\n\n<p>Example:</p>\n\n<pre><code> /**\n * Some comment (pressing enter 3 times)\n * \n * \n * (cursor is here)* * * * \n */\n</code></pre>\n\n<p>Another Example:</p>\n\n<pre><code>/**\n* Some comment (press enter)\n* (cursor is here)*\n*/\n</code></pre>\n"},{"tags":["java","animation","javafx","bezier","cubic-bezier"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683060802,"post_id":76158109,"comment_id":134308177,"body_markdown":"What _specific_ thing do you need help with relating to this code though?","body":"What <i>specific</i> thing do you need help with relating to this code though?"},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683062472,"post_id":76158109,"comment_id":134308484,"body_markdown":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths.","body":"I&#39;m sorry this is my first question here, I am trying to write a handleMouseReleased() method that restores the original state of the path (after it has been dragged and deformed by handleMouseDragged(). I tried searching online and I believe I should be using the Timeline class, but I need some guidance. I saved the original state of the paths in the List&lt;Path&gt; initialPaths."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1683064956,"post_id":76158109,"comment_id":134308824,"body_markdown":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state.","body":"If you&#39;re just responding to mouse events, then there&#39;s no real reason to use a timeline, simply cache the original state, and on mouse release, replace the current state with the cached state."},{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683069894,"post_id":76158109,"comment_id":134309376,"body_markdown":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you","body":"You are right my comment was too vague. My intention is to make a simple animation transitioning from the dragged state to the original state. But I will start applying your suggestion, first things first :) thank you"},{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1683243583,"post_id":76158109,"comment_id":134341243,"body_markdown":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution.","body":"Just for your info, saving the paths (in initialPaths) makes no difference. Because the moment you dragged, the path properties are already updated and there is no way to get the initial values. For that you need to take backup of each property. Check my answer for a possible solution."}],"answers":[{"comments":[{"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"score":0,"creation_date":1683876820,"post_id":76177991,"comment_id":134436567,"body_markdown":"Sorry for the delay in my comment - thank you! This was very useful and it put me on the right path :)","body":"Sorry for the delay in my comment - thank you! This was very useful and it put me on the right path :)"}],"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683243316,"creation_date":1683243316,"answer_id":76177991,"question_id":76158109,"body_markdown":"For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.\r\n\r\nBelow is the output, if you add the below changes to your code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    private double x1, y1, x2, y2;\r\n    \r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                x1 = curve.getControlX1();\r\n                y1 = curve.getControlY1();\r\n                x2 = curve.getControlX2();\r\n                y2 = curve.getControlY2();\r\n            }\r\n        }\r\n    }\r\n    \r\n    private void handleMouseReleased(MouseEvent event) {\r\n        Path path = (Path) event.getSource();\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                // Create key values to reset the properties to the initial state\r\n                KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\r\n                KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\r\n                KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\r\n                KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\r\n                // Change the speed as per your needs\r\n                Duration speed = Duration.millis(300);\r\n                Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\r\n                tl.play();\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/qy2ha.gif","title":"JavaFX animation to restore a Path original state","body":"<p>For this requirement, all you need to do is to store the initial values of controlX1,Y1,X2,Y2 and reset the curves control properties to the initial values using a Timeline.</p>\n<p>Below is the output, if you add the below changes to your code:</p>\n<p><a href=\"https://i.stack.imgur.com/qy2ha.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qy2ha.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>private double x1, y1, x2, y2;\n\nprivate void handleMousePressed(MouseEvent event) {\n    dragStartX = event.getX();\n    dragStartY = event.getY();\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            x1 = curve.getControlX1();\n            y1 = curve.getControlY1();\n            x2 = curve.getControlX2();\n            y2 = curve.getControlY2();\n        }\n    }\n}\n\nprivate void handleMouseReleased(MouseEvent event) {\n    Path path = (Path) event.getSource();\n    for (PathElement element : path.getElements()) {\n        if (element instanceof CubicCurveTo curve) {\n            // Create key values to reset the properties to the initial state\n            KeyValue kx1 = new KeyValue(curve.controlX1Property(), x1);\n            KeyValue ky1 = new KeyValue(curve.controlY1Property(), y1);\n            KeyValue kx2 = new KeyValue(curve.controlX2Property(), x2);\n            KeyValue ky2 = new KeyValue(curve.controlY2Property(), y2);\n            // Change the speed as per your needs\n            Duration speed = Duration.millis(300);\n            Timeline tl = new Timeline(new KeyFrame(speed, kx1, ky1, kx2, ky2));\n            tl.play();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28485772,"reputation":3,"user_id":21799078,"display_name":"Dario Peluso"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177991,"answer_count":1,"score":0,"last_activity_date":1683243316,"creation_date":1683054468,"question_id":76158109,"body_markdown":"I&#39;m a beginner in JavaFX, and I&#39;m working on a project where I&#39;m using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.\r\n\r\nWhile I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I&#39;m just trying to explore JavaFX&#39;s capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.\r\n\r\nI tried working with Timeline and Keyframes&#39; interpolation, I can&#39;t seem to find any other question on this exact topic and I&#39;m finding it hard to grasp. This is the state of my code at the moment:\r\n\r\n\r\n```\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.CubicCurveTo;\r\n    import javafx.scene.shape.MoveTo;\r\n    import javafx.scene.shape.Path;\r\n    import javafx.scene.shape.PathElement;\r\n    import javafx.stage.Stage;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n\r\n    public class BezierCurves extends Application {\r\n\r\n    private double dragStartX;\r\n    private double dragStartY;\r\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\r\n    private Pane pane;\r\n\r\n\r\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\r\n        Path path = new Path();\r\n        switch (color) {\r\n            case 0 -&gt; path.setStroke(Color.RED);\r\n            case 1 -&gt; path.setStroke(Color.BLUE);\r\n            case 2 -&gt; path.setStroke(Color.GREEN);\r\n            case 3 -&gt; path.setStroke(Color.ORANGE);\r\n            default -&gt; path.setStroke(Color.BLACK);\r\n        }\r\n        path.setStrokeWidth(2);\r\n        path.setFill(null);\r\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\r\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\r\n                coordinates[1],\r\n                coordinates[2],\r\n                coordinates[3],\r\n                coordinates[4],\r\n                coordinates[5]);\r\n        path.getElements().addAll(moveTo1, curveTo1);\r\n        return path;\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        pane = new Pane();\r\n        Scene scene = new Scene(pane, 400, 400);\r\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\r\n\r\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\r\n                new double[]{centerX + radius * kappa,\r\n                        centerY - radius,\r\n                        centerX + radius,\r\n                        centerY - radius * kappa,\r\n                        centerX + radius, centerY}, 0);\r\n        path1.setOnMousePressed(this::handleMousePressed);\r\n        path1.setOnMouseDragged(this::handleMouseDragged);\r\n        path1.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\r\n                new double[]{centerX + radius,\r\n                        centerY + radius * kappa,\r\n                        centerX + radius * kappa,\r\n                        centerY + radius, centerX,\r\n                        centerY + radius}, 1);\r\n        path2.setOnMousePressed(this::handleMousePressed);\r\n        path2.setOnMouseDragged(this::handleMouseDragged);\r\n        path2.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\r\n                new double[]{centerX - radius * kappa,\r\n                        centerY + radius,\r\n                        centerX - radius,\r\n                        centerY + radius * kappa,\r\n                        centerX - radius, centerY}, 2);\r\n        path3.setOnMousePressed(this::handleMousePressed);\r\n        path3.setOnMouseDragged(this::handleMouseDragged);\r\n        path3.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\r\n                new double[]{centerX - radius,\r\n                        centerY - radius * kappa,\r\n                        centerX - radius * kappa,\r\n                        centerY - radius,\r\n                        centerX,\r\n                        centerY - radius}, 3);\r\n        path4.setOnMousePressed(this::handleMousePressed);\r\n        path4.setOnMouseDragged(this::handleMouseDragged);\r\n        path4.setOnMouseReleased(this::handleMouseReleased);\r\n\r\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\r\n        pane.getChildren().addAll(path1, path2, path3, path4);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n    private void handleMousePressed(MouseEvent event) {\r\n        dragStartX = event.getX();\r\n        dragStartY = event.getY();\r\n    }\r\n\r\n    private void handleMouseDragged(MouseEvent event) {\r\n        double offsetX = event.getX() - dragStartX;\r\n        double offsetY = event.getY() - dragStartY;\r\n       \r\n        Path path = (Path) event.getSource();\r\n\r\n        for (PathElement element : path.getElements()) {\r\n            if (element instanceof CubicCurveTo curve) {\r\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\r\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\r\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\r\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void handleMouseReleased(MouseEvent event) {\r\n            // TODO\r\n        }\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    }\r\n```\r\n","title":"JavaFX animation to restore a Path original state","body":"<p>I'm a beginner in JavaFX, and I'm working on a project where I'm using four Bezier curves to draw a circle. My goal is to eventually achieve a &quot;wobbly&quot; effect by allowing the curves to be deformed when the user drags them. To accomplish this, I want to add a feature that restores the original state of the circle when the user releases the mouse click (EDIT) performing an animation that makes the curve move to its initial path, which I stored in the &quot;initialPath&quot; list.</p>\n<p>While I have chosen to use JavaFX for this project, I am aware that it may not be the best tool for the job... I'm just trying to explore JavaFX's capabilities and would appreciate any guidance or tips on how to implement this functionality. Thank you for your help.</p>\n<p>I tried working with Timeline and Keyframes' interpolation, I can't seem to find any other question on this exact topic and I'm finding it hard to grasp. This is the state of my code at the moment:</p>\n<pre><code>    import javafx.application.Application;\n    import javafx.scene.Scene;\n    import javafx.scene.input.MouseEvent;\n    import javafx.scene.layout.Pane;\n    import javafx.scene.paint.Color;\n    import javafx.scene.shape.CubicCurveTo;\n    import javafx.scene.shape.MoveTo;\n    import javafx.scene.shape.Path;\n    import javafx.scene.shape.PathElement;\n    import javafx.stage.Stage;\n\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n\n    public class BezierCurves extends Application {\n\n    private double dragStartX;\n    private double dragStartY;\n    private List&lt;Path&gt; initialPaths = new ArrayList&lt;&gt;();\n    private Pane pane;\n\n\n    public Path drawCurve(double[] moveTo, double[] coordinates, int color) {\n        Path path = new Path();\n        switch (color) {\n            case 0 -&gt; path.setStroke(Color.RED);\n            case 1 -&gt; path.setStroke(Color.BLUE);\n            case 2 -&gt; path.setStroke(Color.GREEN);\n            case 3 -&gt; path.setStroke(Color.ORANGE);\n            default -&gt; path.setStroke(Color.BLACK);\n        }\n        path.setStrokeWidth(2);\n        path.setFill(null);\n        MoveTo moveTo1 = new MoveTo(moveTo[0], moveTo[1]);\n        CubicCurveTo curveTo1 = new CubicCurveTo(coordinates[0],\n                coordinates[1],\n                coordinates[2],\n                coordinates[3],\n                coordinates[4],\n                coordinates[5]);\n        path.getElements().addAll(moveTo1, curveTo1);\n        return path;\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        pane = new Pane();\n        Scene scene = new Scene(pane, 400, 400);\n        double centerX = 200, centerY = 200, radius = 100, kappa = 0.5522848;\n\n        Path path1 = drawCurve(new double[]{centerX, centerY - radius},\n                new double[]{centerX + radius * kappa,\n                        centerY - radius,\n                        centerX + radius,\n                        centerY - radius * kappa,\n                        centerX + radius, centerY}, 0);\n        path1.setOnMousePressed(this::handleMousePressed);\n        path1.setOnMouseDragged(this::handleMouseDragged);\n        path1.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path2 = drawCurve(new double[]{centerX + radius, centerY},\n                new double[]{centerX + radius,\n                        centerY + radius * kappa,\n                        centerX + radius * kappa,\n                        centerY + radius, centerX,\n                        centerY + radius}, 1);\n        path2.setOnMousePressed(this::handleMousePressed);\n        path2.setOnMouseDragged(this::handleMouseDragged);\n        path2.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path3 = drawCurve(new double[]{centerX, centerY + radius},\n                new double[]{centerX - radius * kappa,\n                        centerY + radius,\n                        centerX - radius,\n                        centerY + radius * kappa,\n                        centerX - radius, centerY}, 2);\n        path3.setOnMousePressed(this::handleMousePressed);\n        path3.setOnMouseDragged(this::handleMouseDragged);\n        path3.setOnMouseReleased(this::handleMouseReleased);\n\n        Path path4 = drawCurve(new double[]{centerX - radius, centerY},\n                new double[]{centerX - radius,\n                        centerY - radius * kappa,\n                        centerX - radius * kappa,\n                        centerY - radius,\n                        centerX,\n                        centerY - radius}, 3);\n        path4.setOnMousePressed(this::handleMousePressed);\n        path4.setOnMouseDragged(this::handleMouseDragged);\n        path4.setOnMouseReleased(this::handleMouseReleased);\n\n        initialPaths.addAll(Arrays.asList(path1, path2, path3, path4));\n        pane.getChildren().addAll(path1, path2, path3, path4);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void handleMousePressed(MouseEvent event) {\n        dragStartX = event.getX();\n        dragStartY = event.getY();\n    }\n\n    private void handleMouseDragged(MouseEvent event) {\n        double offsetX = event.getX() - dragStartX;\n        double offsetY = event.getY() - dragStartY;\n       \n        Path path = (Path) event.getSource();\n\n        for (PathElement element : path.getElements()) {\n            if (element instanceof CubicCurveTo curve) {\n                curve.setControlX1(curve.getControlX1() + offsetX * 0.02);\n                curve.setControlY1(curve.getControlY1() + offsetY * 0.02);\n                curve.setControlX2(curve.getControlX2() + offsetX * 0.02);\n                curve.setControlY2(curve.getControlY2() + offsetY * 0.02);\n            }\n        }\n    }\n\n    private void handleMouseReleased(MouseEvent event) {\n            // TODO\n        }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","rest","exchange-server","exchangewebservices"],"answers":[{"comments":[{"owner":{"account_id":27081170,"reputation":13,"user_id":20630313,"display_name":"Pankaj Patil"},"score":0,"creation_date":1683608554,"post_id":76177984,"comment_id":134388560,"body_markdown":"Thanks a lot Glen! I will try to implement the same with Graph API. \nDo you have any code reference where we can check the implementation of graph Api to receive emails in java spring boot application. ?","body":"Thanks a lot Glen! I will try to implement the same with Graph API.  Do you have any code reference where we can check the implementation of graph Api to receive emails in java spring boot application. ?"}],"tags":[],"owner":{"account_id":1085024,"reputation":20756,"user_id":1080923,"display_name":"Glen Scales"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683243192,"creation_date":1683243192,"answer_id":76177984,"question_id":76170650,"body_markdown":"Basic authentication has been depreciated in Office365 so can&#39;t be used https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online. You need to implement oauth in your code https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth. \r\n\r\nFor what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0 or as your just doing pull notifications you could use the delta endpoint https://learn.microsoft.com/en-us/graph/delta-query-overview","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>Basic authentication has been depreciated in Office365 so can't be used <a href=\"https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/clients-and-mobile-in-exchange-online/deprecation-of-basic-authentication-exchange-online</a>. You need to implement oauth in your code <a href=\"https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/exchange/client-developer/exchange-web-services/how-to-authenticate-an-ews-application-by-using-oauth</a>.</p>\n<p>For what your trying to do (listen to new email in Office 365) the Graph API would be a better option as EWS is considered legacy and may not be available in the future (the only context in which EWS is needed is OnPrem Exchange). In the Graph you can create a Webhook <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/api/resources/webhooks?view=graph-rest-1.0</a> or as your just doing pull notifications you could use the delta endpoint <a href=\"https://learn.microsoft.com/en-us/graph/delta-query-overview\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/graph/delta-query-overview</a></p>\n"}],"owner":{"account_id":27081170,"reputation":13,"user_id":20630313,"display_name":"Pankaj Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177984,"answer_count":1,"score":1,"last_activity_date":1683243192,"creation_date":1683185871,"question_id":76170650,"body_markdown":"I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\r\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.\r\n\r\nI have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.\r\n\r\nCode template:\r\n\r\nAdded dependency in pom as :\r\n\r\n\r\n`&lt;dependency&gt; \t`\r\n\r\n`&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt; \t`\r\n\r\n`&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt; \t`\r\n\r\n`&lt;version&gt;2.0&lt;/version&gt; `\r\n\r\n`&lt;/dependency&gt;`\r\n\r\nJava controller :\r\n\r\n    \r\n    @PostMapping(value = &quot;/EWSImplementation&quot;) \r\n    public Object ewsImplementation() { \r\n    \r\n    try { \r\n    \r\n    String userName = &quot;userName&quot;; \r\n    String password = &quot;password&quot;;\r\n    String serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\r\n    \r\n    ExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\r\n    \r\n    ExchangeCredentials credentials = new WebCredentials(userName, password);\r\n    exService.setCredentials(credentials);\r\n    URI uri = new URI(serverAddress);\r\n    exService.setUrl(uri);\r\n    exService.setTraceEnabled(true);\r\n    \r\n    PullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\r\n    \t\tEventType.NewMail);\r\n    \r\n    GetEventsResults events = subscription.getEvents();\r\n    \r\n    for (ItemEvent itemEvent : events.getItemEvents()) {\r\n    \tItem item = Item.bind(exService, itemEvent.getItemId());\r\n    \tlog.info(&quot;New email received: {}&quot;, item.getSubject());\r\n    }\r\n     } catch (Exception e) {\r\n     e.printStackTrace();\r\n     }\r\n    }\r\n\r\nThe user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.\r\n\r\nWhen I am calling this API, it is giving error as,\r\n\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.a.c.c.C.\\[Tomcat\\].\\[localhost\\].\\[/\\]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.304+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-05-04T12:39:27.306+05:30  INFO 272 --- \\[nio-8080-exec-2\\] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\r\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\r\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\r\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\r\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\r\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\nat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\r\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\r\n... 53 more\r\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\r\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\r\n... 54 more\r\n2023-05-04T12:39:29.256+05:30  WARN 272 --- \\[nio-8080-exec-2\\] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved \\[org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized\\]\r\n\r\nThanks in advance for you help.\r\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.","title":"Need to use EWS (Exchange Web Service) to receive Microsoft exchange&#39;s/Outlook emails in java spring boot Project","body":"<p>I want to connect to Microsoft exchange server(EWS) with the help of EWS API provided by Microsoft.\nThe Spring boot application should be a continuous listener, so that the application should be able to listen all the new emails which are getting received in the outlook.</p>\n<p>I have written a REST API to connect exchange server from java spring boot project. Created required EWS object and subscribed to the new Email notification so that it listen the new email.</p>\n<p>Code template:</p>\n<p>Added dependency in pom as :</p>\n<p><code>&lt;dependency&gt;   </code></p>\n<p><code>&lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;  </code></p>\n<p><code>&lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;  </code></p>\n<p><code>&lt;version&gt;2.0&lt;/version&gt; </code></p>\n<p><code>&lt;/dependency&gt;</code></p>\n<p>Java controller :</p>\n<pre><code>@PostMapping(value = &quot;/EWSImplementation&quot;) \npublic Object ewsImplementation() { \n\ntry { \n\nString userName = &quot;userName&quot;; \nString password = &quot;password&quot;;\nString serverAddress = &quot;https://outlook.office365.com/EWS/exchange.asmx&quot;;\n\nExchangeService exService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\n\nExchangeCredentials credentials = new WebCredentials(userName, password);\nexService.setCredentials(credentials);\nURI uri = new URI(serverAddress);\nexService.setUrl(uri);\nexService.setTraceEnabled(true);\n\nPullSubscription subscription = exService.subscribeToPullNotificationsOnAllFolders(500, null,\n        EventType.NewMail);\n\nGetEventsResults events = subscription.getEvents();\n\nfor (ItemEvent itemEvent : events.getItemEvents()) {\n    Item item = Item.bind(exService, itemEvent.getItemId());\n    log.info(&quot;New email received: {}&quot;, item.getSubject());\n}\n } catch (Exception e) {\n e.printStackTrace();\n }\n}\n</code></pre>\n<p>The user name and password which I have used here are working in the outlook i.e. we are receiving emails in the outlook.</p>\n<p>When I am calling this API, it is giving error as,</p>\n<p>2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-05-04T12:39:27.304+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-05-04T12:39:27.306+05:30  INFO 272 --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74)\nat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158)\nat microsoft.exchange.webservices.data.core.ExchangeService.subscribeToPullNotificationsOnAllFolders(ExchangeService.java:1847)\nat com.nib.plp.controller.FileOperationsController.ewsImplementation(FileOperationsController.java:111)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731)\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:644)\nat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62)\n... 53 more\nCaused by: microsoft.exchange.webservices.data.core.exception.http.HttpErrorException: The remote server returned an error: (401)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.getEwsHttpWebResponse(ServiceRequestBase.java:723)\nat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:639)\n... 54 more\n2023-05-04T12:39:29.256+05:30  WARN 272 --- [nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotWritableException: Could not write JSON: The request failed. The request failed. The remote server returned an error: (401)Unauthorized]</p>\n<p>Thanks in advance for you help.\nAlso suggest whether this is the correct approach to listen the new emails from EWS service.</p>\n"},{"tags":["java","mongodb","nosql","mongotemplate"],"comments":[{"owner":{"account_id":9934708,"reputation":997,"user_id":7353417,"display_name":"pierpy"},"score":0,"creation_date":1683280984,"post_id":76177956,"comment_id":134346101,"body_markdown":"Hi, please read [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/a/285557/7353417)","body":"Hi, please read <a href=\"https://meta.stackoverflow.com/a/285557/7353417\">Why should I not upload images of code/data/errors?</a>"},{"owner":{"account_id":18482495,"reputation":14167,"user_id":13464279,"display_name":"J.F."},"score":0,"creation_date":1686960015,"post_id":76177956,"comment_id":134875127,"body_markdown":"It seems `_id.year` does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out.","body":"It seems <code>_id.year</code> does not exists. Can you check which object is returned just before last project stage?. Also you can provide some data example to try out."}],"owner":{"account_id":25261167,"reputation":1,"user_id":19092051,"display_name":"Samoha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683242813,"creation_date":1683242813,"question_id":76177956,"body_markdown":"I made a request using mongoDB Compass and it works, but I can&#39;t transfer it to my java program. I think I&#39;ve tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it\r\n\r\n```\r\n[{\r\n    $match: {\r\n        $or: [{\r\n                riskReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                riskOfDealReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                controlProcedureReport: {\r\n                    $ne: null\r\n                }\r\n            },\r\n            {\r\n                matrixReport: {\r\n                    $ne: null\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}, {\r\n    $project: {\r\n        controlProcedureReport: &#39;$controlProcedureReport&#39;,\r\n        riskReport: &#39;$riskReport&#39;,\r\n        matrixReport: &#39;$matrixReport&#39;,\r\n        documentName: {\r\n            $concatArrays: [\r\n                &#39;$riskReport.ids.value&#39;,\r\n                &#39;$controlProcedureReport.ids.value&#39;,\r\n                &#39;$matrixReport.ids&#39;\r\n            ]\r\n        }\r\n    }\r\n}, {\r\n    $unwind: {\r\n        path: &#39;$documentName&#39;\r\n    }\r\n}, {\r\n    $project: {\r\n        year: &#39;$_id.year&#39;,\r\n        periodCode: &#39;$_id.periodCode&#39;,\r\n        serialNumber: &#39;$_id.serialNumber&#39;,\r\n        formationDate: &#39;$formationDate&#39;,\r\n        status: &#39;$status&#39;,\r\n        documentName: &#39;$documentName&#39;,\r\n        fileId: {\r\n            $cond: {\r\n                &#39;if&#39;: {\r\n                    $in: [\r\n                        &#39;$documentName&#39;,\r\n                        &#39;$controlProcedureReport.ids.value&#39;\r\n                    ]\r\n                },\r\n                then: &#39;$controlProcedureReport.fileId&#39;,\r\n                &#39;else&#39;: {\r\n                    $cond: {\r\n                        &#39;if&#39;: {\r\n                            $in: [\r\n                                &#39;$documentName&#39;,\r\n                                &#39;$riskReport.ids.value&#39;\r\n                            ]\r\n                        },\r\n                        then: &#39;$riskReport.fileId&#39;,\r\n                        &#39;else&#39;: {\r\n                            $cond: {\r\n                                &#39;if&#39;: {\r\n                                    $in: [\r\n                                        &#39;$documentName&#39;,\r\n                                        &#39;$matrixReport.ids&#39;\r\n                                    ]\r\n                                },\r\n                                then: &#39;$matrixReport.fileId&#39;,\r\n                                &#39;else&#39;: &#39;&#39;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}]\r\n```\r\n\r\nI tried to use this code but I get an error\r\n\r\n```\r\n        ProjectionOperation project2 = Aggregation.project()\r\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\r\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\r\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\r\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\r\n                .and(&quot;status&quot;).as(&quot;status&quot;)\r\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\r\n                .and(ConditionalOperators.when(\r\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\r\n                             .otherwise(\r\n                                     ConditionalOperators.when(\r\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\r\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\r\n                                             .otherwise(&quot;&quot;)\r\n                             )\r\n                ).as(&quot;fileId&quot;);\r\n\r\n        Aggregation aggregation = Aggregation.newAggregation(\r\n                Aggregation.match(packageCriteria),\r\n                project1,\r\n                unwind,\r\n                project2,\r\n                procedureResults,\r\n                icsDisclosures,\r\n                icsDisclosureRegulations\r\n        );\r\n\r\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\r\n```\r\n\r\nWith this code I am getting an error [enter image description here](https://i.stack.imgur.com/Gweni.png)\r\n\r\nHealp me please","title":"How can i convert the request to MongoTemplate","body":"<p>I made a request using mongoDB Compass and it works, but I can't transfer it to my java program. I think I've tried all the options. Perhaps there is a way to use this pipeline directly in the code, but I did not find it</p>\n<pre><code>[{\n    $match: {\n        $or: [{\n                riskReport: {\n                    $ne: null\n                }\n            },\n            {\n                riskOfDealReport: {\n                    $ne: null\n                }\n            },\n            {\n                controlProcedureReport: {\n                    $ne: null\n                }\n            },\n            {\n                matrixReport: {\n                    $ne: null\n                }\n            }\n        ]\n    }\n}, {\n    $project: {\n        controlProcedureReport: '$controlProcedureReport',\n        riskReport: '$riskReport',\n        matrixReport: '$matrixReport',\n        documentName: {\n            $concatArrays: [\n                '$riskReport.ids.value',\n                '$controlProcedureReport.ids.value',\n                '$matrixReport.ids'\n            ]\n        }\n    }\n}, {\n    $unwind: {\n        path: '$documentName'\n    }\n}, {\n    $project: {\n        year: '$_id.year',\n        periodCode: '$_id.periodCode',\n        serialNumber: '$_id.serialNumber',\n        formationDate: '$formationDate',\n        status: '$status',\n        documentName: '$documentName',\n        fileId: {\n            $cond: {\n                'if': {\n                    $in: [\n                        '$documentName',\n                        '$controlProcedureReport.ids.value'\n                    ]\n                },\n                then: '$controlProcedureReport.fileId',\n                'else': {\n                    $cond: {\n                        'if': {\n                            $in: [\n                                '$documentName',\n                                '$riskReport.ids.value'\n                            ]\n                        },\n                        then: '$riskReport.fileId',\n                        'else': {\n                            $cond: {\n                                'if': {\n                                    $in: [\n                                        '$documentName',\n                                        '$matrixReport.ids'\n                                    ]\n                                },\n                                then: '$matrixReport.fileId',\n                                'else': ''\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}]\n</code></pre>\n<p>I tried to use this code but I get an error</p>\n<pre><code>        ProjectionOperation project2 = Aggregation.project()\n                .and(&quot;_id.year&quot;).as(&quot;year&quot;)\n                .and(&quot;_id.periodCode&quot;).as(&quot;periodCode&quot;)\n                .and(&quot;_id.serialNumber&quot;).as(&quot;serialNumber&quot;)\n                .and(&quot;formationDate&quot;).as(&quot;formationDate&quot;)\n                .and(&quot;status&quot;).as(&quot;status&quot;)\n                .and(&quot;documentName&quot;).as(&quot;documentName&quot;)\n                .and(ConditionalOperators.when(\n                                     ArrayOperators.arrayOf(&quot;controlProcedureReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                             ).thenValueOf(&quot;controlProcedureReport.fileId&quot;)\n                             .otherwise(\n                                     ConditionalOperators.when(\n                                                     ArrayOperators.arrayOf(&quot;riskReport.ids.value&quot;).containsValue(&quot;$documentName&quot;)\n                                             ).thenValueOf(&quot;riskReport.fileId&quot;)\n                                             .otherwise(&quot;&quot;)\n                             )\n                ).as(&quot;fileId&quot;);\n\n        Aggregation aggregation = Aggregation.newAggregation(\n                Aggregation.match(packageCriteria),\n                project1,\n                unwind,\n                project2,\n                procedureResults,\n                icsDisclosures,\n                icsDisclosureRegulations\n        );\n\n        List&lt;Document&gt; mappedResults = mongoTemplate.aggregate(aggregation, DOCUMENT_PACKAGE_COLLECTION, Document.class).getMappedResults();\n</code></pre>\n<p>With this code I am getting an error <a href=\"https://i.stack.imgur.com/Gweni.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Healp me please</p>\n"},{"tags":["java","jakarta-ee","transactions","cdi","java-ee-7"],"comments":[{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1512102681,"post_id":47355299,"comment_id":82130935,"body_markdown":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?","body":"If this is relevant yet. I did some tests with CDI-Transactional. There are no significant differences to EJB. Therefore a few questions: How did you find out, that the changes did not get flushed? What DBMS are you using? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513682077,"post_id":47355299,"comment_id":82737041,"body_markdown":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application.","body":"Hi @aschoerk we use a SQL Server 2008 R2. The call comes from the xhtml JSF frontend. Now we changed to BMT to go along with our application."},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513700326,"post_id":47355299,"comment_id":82748459,"body_markdown":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?","body":"Ahh SqlServer 2008, so no MVCC. But: How did you find out, that the changes did not get flushed? Did you call doChange in a subclass or from another bean?"},{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1513864622,"post_id":47355299,"comment_id":82820770,"body_markdown":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)","body":"No the doChange was called from the same bean. It (empfangseinheittypenparameter) got flushed when we edited some of the main infos (Empfangseinheittypen)"},{"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"score":0,"creation_date":1513880058,"post_id":47355299,"comment_id":82829695,"body_markdown":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?","body":"&quot;called from the same bean&quot; normally means, that the transactioninterceptor is not working. Are you sure, that it does?"}],"answers":[{"comments":[{"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"score":0,"creation_date":1511003061,"post_id":47359168,"comment_id":81683368,"body_markdown":"I tried to annotate the methods with @Transactional(TxType.REQUIRES_NEW) but got the same effect","body":"I tried to annotate the methods with @Transactional(TxType.REQUIRES_NEW) but got the same effect"}],"tags":[],"owner":{"account_id":7522842,"reputation":3473,"user_id":8082162,"accept_rate":71,"display_name":"aschoerk"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513931929,"creation_date":1510952287,"answer_id":47359168,"question_id":47355299,"body_markdown":"According to the comments, doChange is called from the same bean.\r\nThe problem is similar to https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>According to the comments, doChange is called from the same bean.\nThe problem is similar to <a href=\"https://stackoverflow.com/questions/5109343/transactional-method-called-from-another-method-doesnt-obtain-a-transaction\">@Transactional method called from another method doesn&#39;t obtain a transaction</a> which means, that the transaction will not end with doChange, so you can not expect a flush to be done when returning from the method.</p>\n"}],"owner":{"account_id":1838798,"reputation":311,"user_id":1668645,"accept_rate":29,"display_name":"Stefan H&#246;ltker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683242143,"creation_date":1510936497,"question_id":47355299,"body_markdown":"I have a problem with a CDI Named Bean which is @Transactional. \r\n\r\nI use the WildFly 11.1.0.Final.\r\n\r\nHere the Code: https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\r\n\r\nThis is the persistence.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.1&quot;\r\n                 xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \r\n                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n      &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\r\n        &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;properties&gt;\r\n          &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\r\n        &lt;/properties&gt;\r\n      &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nWhen I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn&#39;t trigger a flush.\r\n\r\nWhen I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don&#39;t need a flush \r\n\r\nWhat am a doing wrong? \r\n\r\nBoth methods are public.\r\n\r\nPlease see a picture of the Application attached\r\n\r\nThanks in advance for your help","title":"Transactional wrapped method doesn&#39;t persist or remove","body":"<p>I have a problem with a CDI Named Bean which is @Transactional.</p>\n<p>I use the WildFly 11.1.0.Final.</p>\n<p>Here the Code: <a href=\"https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044\" rel=\"nofollow noreferrer\">https://gist.github.com/stefanwendelmann/7a1f8352900067d5a59826d6ee205044</a></p>\n<p>This is the persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.1&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence \n             http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n  &lt;persistence-unit name=&quot;QuoLoco&quot; transaction-type=&quot;JTA&quot;&gt;\n    &lt;description&gt;Verbindung zur QuoLoco Datenbank&lt;/description&gt;\n    &lt;jta-data-source&gt;java:/QUOLOCO_NORM&lt;/jta-data-source&gt;\n    &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n    &lt;properties&gt;\n      &lt;property name=&quot;hibernate.format_sql&quot; value=&quot;false&quot;/&gt;\n      &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.SQLServerDialect&quot;/&gt;\n      &lt;property name=&quot;hibernate.id.new_generator_mappings&quot; value=&quot;false&quot;/&gt;\n    &lt;/properties&gt;\n  &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>When I call the method &quot;doChange&quot; and only edited Empfangseinheittypenparameter, the em.remove and em.persist doesn't trigger a flush.</p>\n<p>When I call the method &quot;doChange&quot; and edited some of the main  Empfangseinheittypen empfangseinheittyp, I make a find on the Empfangseinheittypenparameter don't need a flush</p>\n<p>What am a doing wrong?</p>\n<p>Both methods are public.</p>\n<p>Please see a picture of the Application attached</p>\n<p>Thanks in advance for your help</p>\n"},{"tags":["java","binary","decimal"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683218297,"post_id":76175335,"comment_id":134336595,"body_markdown":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?","body":"The quote talks about fixed precision vs arbitrary precision. You talk about decimal vs binary. What&#39;s the relation?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683219426,"post_id":76175335,"comment_id":134336870,"body_markdown":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it","body":"I’m just trying to Both Binary and Decimal aren’t Same… So idk what Happens if I replace it"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1683219500,"post_id":76175335,"comment_id":134336886,"body_markdown":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking.","body":"When you replace a decimal number with a binary number, you now have a binary number. Apart from that, it&#39;s completely unclear what you&#39;re asking."},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220210,"post_id":76175335,"comment_id":134337040,"body_markdown":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?","body":"So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number?"},{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683220587,"post_id":76175335,"comment_id":134337131,"body_markdown":"Is there a way I could ask someone this question directly with my Voice OMg","body":"Is there a way I could ask someone this question directly with my Voice OMg"}],"answers":[{"comments":[{"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"score":0,"creation_date":1683236998,"post_id":76177144,"comment_id":134340359,"body_markdown":"I don’t know if it’s recommended to get your WhatsApp or Any other social Media so we could solve the problem Together Please","body":"I don’t know if it’s recommended to get your WhatsApp or Any other social Media so we could solve the problem Together Please"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1683242242,"post_id":76177144,"comment_id":134341086,"body_markdown":"The site does not work that way.  You ask a question and maybe it gets answered; if the question isn&#39;t clear enough to answer, refine the questiion until is.","body":"The site does not work that way.  You ask a question and maybe it gets answered; if the question isn&#39;t clear enough to answer, refine the questiion until is."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683241903,"creation_date":1683231961,"answer_id":76177144,"question_id":76175335,"body_markdown":"&gt;So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.\r\n\r\nIt depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an `int` or a `double` for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754)).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can&#39;t exceed 64 bits.  So if you have a very large integral part, there won&#39;t be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in [Two&#39;s complement form](https://en.wikipedia.org/wiki/Two%27s_complement).  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.\r\n\r\n**Updated.**\r\n```\r\nint a = 443;\r\nint b = 100; // not binary it&#39;s 100 in decimal\r\nSystem.out.println(a + &quot; &quot; + b);\r\n```\r\nprints\r\n```\r\n443 100\r\n```\r\n```\r\n\r\nint a = 0b100;  // binary. Leading 0b. Value is 4\r\nint b = 0100;   // octal.  Leading 0.  value is 64\r\nint c = 0x100;  // hex. Leading 0x. value is 256  \r\nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\r\n```\r\nprints\r\n```\r\n4 64 256\r\n```\r\nAlso\r\n```\r\nSystem.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\r\nSystem.out.println(Integer.toString(b,8));\r\nSystem.out.println(Integer.toString(c,16));\r\n```\r\nprints\r\n```\r\n100\r\n100\r\n100","title":"Modify decimal to some binary numbers using Devtools","body":"<blockquote>\n<p>So computer system can’t read 100 As Binary still for a particular function When it’s Supposed to be read As a Decimal number.</p>\n</blockquote>\n<p>It depends from where you are reading the value and how it is stored.  Most command line input is in the form of a string and has to be converted to a type of number (an <code>int</code> or a <code>double</code> for example).  Whether the input is specified as binary, octal, or hex, its internal state will be the same and will be binary. (In fact, everything on your hard disk is stored as binary).  For doubles, they too will be binary but are stored in a specific format/encoding (see <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE 754</a>).  Java doubles are floating point values.  They are 64 bits wide and both the integral part and the fractional part can vary in size, but together, along with the size and exponent, they can't exceed 64 bits.  So if you have a very large integral part, there won't be much room left for the fractional part (and vice versa).  Ints are 32 bits wide with the high order bit used for the sign.  They are stored in <a href=\"https://en.wikipedia.org/wiki/Two%27s_complement\" rel=\"nofollow noreferrer\">Two's complement form</a>.  There is more to this than explained here so I recommend you try and find more detailed information on the internal representation of numeric types.</p>\n<p><strong>Updated.</strong></p>\n<pre><code>int a = 443;\nint b = 100; // not binary it's 100 in decimal\nSystem.out.println(a + &quot; &quot; + b);\n</code></pre>\n<p>prints</p>\n<pre><code>443 100\n</code></pre>\n<pre><code>\nint a = 0b100;  // binary. Leading 0b. Value is 4\nint b = 0100;   // octal.  Leading 0.  value is 64\nint c = 0x100;  // hex. Leading 0x. value is 256  \nSystem.out.println(a + &quot; &quot; + b + &quot; &quot; + c);\n</code></pre>\n<p>prints</p>\n<pre><code>4 64 256\n</code></pre>\n<p>Also</p>\n<pre><code>System.out.println(Integer.toString(a,2)); // second arg is output base (or radix)\nSystem.out.println(Integer.toString(b,8));\nSystem.out.println(Integer.toString(c,16));\n</code></pre>\n<p>prints</p>\n<pre><code>100\n100\n100\n</code></pre>\n"}],"owner":{"account_id":27538003,"reputation":1,"user_id":21015259,"display_name":"Kinqz"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1683241903,"creation_date":1683217226,"question_id":76175335,"body_markdown":"I read an answer to a question (What is arbitrary precision integers) and the answer I read was\r\n\r\n&gt; The term fixed precision means that there are only a certain number of\r\n&gt; significant digits retained in the internal representation. This means\r\n&gt; that you would not be able to represent every integer with a magnitude\r\n&gt; greater than some threshold.\r\n&gt; \r\n&gt; With arbitrary precision integers, the integers can be as large as you\r\n&gt; need (&quot;arbitrarily large&quot;) and the library will keep all the digits\r\n&gt; down to the least significant unit. (This is obviously limited by the\r\n&gt; amount of memory in your computer.)\r\n\r\nI replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren&#39;t the same thing there should be a change on the response value. I know it&#39;ll be simple to some of you, but please teach me. I want to know and not be lost.","title":"Modify decimal to some binary numbers using Devtools","body":"<p>I read an answer to a question (What is arbitrary precision integers) and the answer I read was</p>\n<blockquote>\n<p>The term fixed precision means that there are only a certain number of\nsignificant digits retained in the internal representation. This means\nthat you would not be able to represent every integer with a magnitude\ngreater than some threshold.</p>\n<p>With arbitrary precision integers, the integers can be as large as you\nneed (&quot;arbitrarily large&quot;) and the library will keep all the digits\ndown to the least significant unit. (This is obviously limited by the\namount of memory in your computer.)</p>\n</blockquote>\n<p>I replaced a 443 decimal number with a 100 binary number, 100 was returned as the response, but I feel since decimal numbers and binary numbers aren't the same thing there should be a change on the response value. I know it'll be simple to some of you, but please teach me. I want to know and not be lost.</p>\n"},{"tags":["java","android"],"owner":{"account_id":10432391,"reputation":1,"user_id":7691824,"display_name":"Muok Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683241601,"creation_date":1683241601,"question_id":76177902,"body_markdown":"Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .\r\n\r\nI expected it to be work like webview woul but a little faster like in Chrome Custom Tabs","title":"Load a responsive web app in an android app without using a Webview(Slow On Most Devices, Chrome Custom Tabs ,Browser Intent or TWA?","body":"<p>Have tried loading a responsive web app on webview but it was very slow on most devices,I then tried Chrom Custom Tabs,Trusted Web Activity and Browser Intent but you cannot hide the top tool bar for both.I tried implemeting libraries like geckoview and crosswalk without success .</p>\n<p>I expected it to be work like webview woul but a little faster like in Chrome Custom Tabs</p>\n"},{"tags":["java","security"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1345214883,"post_id":12007991,"comment_id":16018136,"body_markdown":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could).","body":"Securely wiping memory implies you&#39;d overwrite the region with zeroes.  I&#39;m not sure that Java can do that at its high level (C probably could)."},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1345214894,"post_id":12007991,"comment_id":16018142,"body_markdown":"Remove and optimization are different things, isn&#39;t it?","body":"Remove and optimization are different things, isn&#39;t it?"},{"owner":{"account_id":8564,"reputation":235724,"user_id":15498,"accept_rate":76,"display_name":"Damien_The_Unbeliever"},"score":6,"creation_date":1345214966,"post_id":12007991,"comment_id":16018177,"body_markdown":"You need to avoid loading it into a String in the first place.","body":"You need to avoid loading it into a String in the first place."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345223039,"post_id":12007991,"comment_id":16021493,"body_markdown":"If your attacker can access the your process space, then clearing a string after use is the least of your worries.","body":"If your attacker can access the your process space, then clearing a string after use is the least of your worries."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1345290678,"post_id":12007991,"comment_id":16036087,"body_markdown":"possible duplicate of [How can I ensure the destruction of a String object in Java?](http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5238131/how-can-i-ensure-the-destruction-of-a-string-object-in-java\">How can I ensure the destruction of a String object in Java?</a>"},{"owner":{"account_id":403364,"reputation":28568,"user_id":771073,"accept_rate":60,"display_name":"Martin Bonner supports Monica"},"score":1,"creation_date":1495526053,"post_id":12007991,"comment_id":75276263,"body_markdown":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in.","body":"@kdgregory This isn&#39;t intended as the primary defense against an attacker.  It&#39;s a defense-in-depth thing to make their life harder once they are in."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1495882228,"post_id":12007991,"comment_id":75442779,"body_markdown":"@MartinBonner - see [Maginot Line](https://en.wikipedia.org/wiki/Maginot_Line)","body":"@MartinBonner - see <a href=\"https://en.wikipedia.org/wiki/Maginot_Line\" rel=\"nofollow noreferrer\">Maginot Line</a>"}],"answers":[{"comments":[{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":2,"creation_date":1345222880,"post_id":12008094,"comment_id":16021422,"body_markdown":"+1 for the point that the object has to be off-heap. However, if we assume that the attacker can access process memory, then off-heap storage just minimizes the window during which an attach can occur. And there&#39;s still the possibility that the OS will swap your pages to disk, leaving the &quot;confidential&quot; data hanging around for a very long time.","body":"+1 for the point that the object has to be off-heap. However, if we assume that the attacker can access process memory, then off-heap storage just minimizes the window during which an attach can occur. And there&#39;s still the possibility that the OS will swap your pages to disk, leaving the &quot;confidential&quot; data hanging around for a very long time."}],"tags":[],"owner":{"account_id":1497894,"reputation":1018,"user_id":1403418,"display_name":"Dan"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345215129,"creation_date":1345215129,"answer_id":12008094,"question_id":12007991,"body_markdown":"Store the data off-heap using the &quot;Unsafe&quot; methods.  You can then zero over it when done and be certain that it won&#39;t be pushed around the heap by the JVM.\r\n\r\n\r\nHere is a good post on Unsafe:\r\n\r\nhttp://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>Store the data off-heap using the \"Unsafe\" methods.  You can then zero over it when done and be certain that it won't be pushed around the heap by the JVM.</p>\n\n<p>Here is a good post on Unsafe:</p>\n\n<p><a href=\"http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/\" rel=\"nofollow\">http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/</a></p>\n"},{"comments":[{"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"score":0,"creation_date":1345217742,"post_id":12008111,"comment_id":16019442,"body_markdown":"Thank you. But How could it be guaranteed that optimizer will not notice that the result of this computation is not being used so there is no point running it?","body":"Thank you. But How could it be guaranteed that optimizer will not notice that the result of this computation is not being used so there is no point running it?"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1345223422,"post_id":12008111,"comment_id":16021637,"body_markdown":"I updated the post with a way to ensure the wipe. But I still wouldn&#39;t recommend relying on this - rather your best bet is to keep people out of your system memory to start with.","body":"I updated the post with a way to ensure the wipe. But I still wouldn&#39;t recommend relying on this - rather your best bet is to keep people out of your system memory to start with."}],"tags":[],"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1345223356,"creation_date":1345215178,"answer_id":12008111,"question_id":12007991,"body_markdown":"You would need direct access to the memory.\r\n\r\nYou really wouldn&#39;t be able to do this with String, since you don&#39;t have reliable access to the string, and don&#39;t know if it&#39;s been interned somewhere, or if an object was created that you don&#39;t know about.\r\n\r\nIf you really needed to this, you&#39;d have to do something like\r\n\r\n    public class SecureString implements CharSequence {\r\n        char[] data;\r\n        public void wipe() {\r\n           for(int i = 0; i &lt; data.length; i++) data[i] = &#39;.&#39;; // random char\r\n        }\r\n    }\r\n\r\nThat being said, if you&#39;re worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.\r\n\r\nRegarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:\r\n\r\n    public int wipe() {\r\n        // wipe the array to a random value\r\n        java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\r\n        // compute hash to force optimizer to do the wipe\r\n        int hash = 0;\r\n        for(int i = 0; i &lt; data.length; i++) {\r\n            hash = hash * 31 + (int)data[i];\r\n        }\r\n        return hash;\r\n    }\r\n\r\nThis will force the compiler to do the wipe. It makes it roughly twice as long to run, but it&#39;s a pretty fast operation as it is, and doesn&#39;t increase the order of complexity.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>You would need direct access to the memory.</p>\n\n<p>You really wouldn't be able to do this with String, since you don't have reliable access to the string, and don't know if it's been interned somewhere, or if an object was created that you don't know about.</p>\n\n<p>If you really needed to this, you'd have to do something like</p>\n\n<pre><code>public class SecureString implements CharSequence {\n    char[] data;\n    public void wipe() {\n       for(int i = 0; i &lt; data.length; i++) data[i] = '.'; // random char\n    }\n}\n</code></pre>\n\n<p>That being said, if you're worried about data still being in memory, you have to realize that if it was ever in memory at one point, than an attacker probably already got it. The only thing you realistically protect yourself from is if a core dump is flushed to a log file.</p>\n\n<p>Regarding the optimizer, I incredibly doubt it will optimize away the operation. If you really needed it to, you could do something like this:</p>\n\n<pre><code>public int wipe() {\n    // wipe the array to a random value\n    java.util.Arrays.fill(data, (char)(rand.nextInt(60000));\n    // compute hash to force optimizer to do the wipe\n    int hash = 0;\n    for(int i = 0; i &lt; data.length; i++) {\n        hash = hash * 31 + (int)data[i];\n    }\n    return hash;\n}\n</code></pre>\n\n<p>This will force the compiler to do the wipe. It makes it roughly twice as long to run, but it's a pretty fast operation as it is, and doesn't increase the order of complexity.</p>\n"},{"comments":[{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345222940,"post_id":12008117,"comment_id":16021448,"body_markdown":"The JVM will move objects in memory as part of garbage collection, and it won&#39;t make any attempt to zero-out the old memory afterward. This means that your &quot;confidential&quot; data will still be readable.","body":"The JVM will move objects in memory as part of garbage collection, and it won&#39;t make any attempt to zero-out the old memory afterward. This means that your &quot;confidential&quot; data will still be readable."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1345262874,"post_id":12008117,"comment_id":16031758,"body_markdown":"@kdgregory - 1)  The GC &gt;&gt;does&lt;&lt; zero the old memory.  2)  You are missing my point ... secure the platform so that the bad guys can&#39;t read the memory whether or not it has been zeroed.  Because if they can read it after it has been zeroed, they can probably also read it before it has been zeroed.","body":"@kdgregory - 1)  The GC &gt;&gt;does&lt;&lt; zero the old memory.  2)  You are missing my point ... secure the platform so that the bad guys can&#39;t read the memory whether or not it has been zeroed.  Because if they can read it after it has been zeroed, they can probably also read it before it has been zeroed."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345287889,"post_id":12008117,"comment_id":16035569,"body_markdown":"Re #1: Really? I assume that you can back up this statement with either explicit documentation, or a links to the OpenJDK source that show an explicit clear as part of heap copy/compaction? And have equivalent evidence for other JVMs such as JRockit? Personally, I wouldn&#39;t expect the JVM to waste the time, but if you&#39;ve actually worked with the source, I&#39;ll believe you.","body":"Re #1: Really? I assume that you can back up this statement with either explicit documentation, or a links to the OpenJDK source that show an explicit clear as part of heap copy/compaction? And have equivalent evidence for other JVMs such as JRockit? Personally, I wouldn&#39;t expect the JVM to waste the time, but if you&#39;ve actually worked with the source, I&#39;ll believe you."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":1,"creation_date":1345288035,"post_id":12008117,"comment_id":16035602,"body_markdown":"Re #2: yes, I missed your point. You have three paragraphs that indicate that the OP can indeed clear the string&#39;s memory, and one closing paragraph that is &quot;My personal take.&quot; To be honest, I stopped after the second paragraph.","body":"Re #2: yes, I missed your point. You have three paragraphs that indicate that the OP can indeed clear the string&#39;s memory, and one closing paragraph that is &quot;My personal take.&quot; To be honest, I stopped after the second paragraph."},{"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"score":0,"creation_date":1345565134,"post_id":12008117,"comment_id":16103694,"body_markdown":"Re No 1. OK. What can I do in case of byte[] instead of string. If I fill it with zeroes, how can I be sure Java compiler will not &#39;optimize&#39; it out?\n\nRe No 3. Of course wiping the confidential data is not a universal protection against bad guys but a step worth doing. But here shall we concentrate only on wiping.","body":"Re No 1. OK. What can I do in case of byte[] instead of string. If I fill it with zeroes, how can I be sure Java compiler will not &#39;optimize&#39; it out?  Re No 3. Of course wiping the confidential data is not a universal protection against bad guys but a step worth doing. But here shall we concentrate only on wiping."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1349775700,"post_id":12008117,"comment_id":17303326,"body_markdown":"@Nerd - in theory (from the JLS perspective) there is no way to guarantee that some other unrelated thread won&#39;t see the old contents of the `byte[]`.  In practice, *I suspect* that a writing to an unrelated volatile field after zeroing would be sufficient to trigger a flush of any delayed writes.  But whether this would be sufficient to prevent the compiler from optimizing them away is a different matter.  In the theory, it isn&#39;t.  The only way to be sure is to capture the JIT compiled native code and analyse it.  Good luck with that!","body":"@Nerd - in theory (from the JLS perspective) there is no way to guarantee that some other unrelated thread won&#39;t see the old contents of the <code>byte[]</code>.  In practice, <i>I suspect</i> that a writing to an unrelated volatile field after zeroing would be sufficient to trigger a flush of any delayed writes.  But whether this would be sufficient to prevent the compiler from optimizing them away is a different matter.  In the theory, it isn&#39;t.  The only way to be sure is to capture the JIT compiled native code and analyse it.  Good luck with that!"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1349775883,"post_id":12008117,"comment_id":17303412,"body_markdown":"@kdgregory - it is not wasting its time. The semantics of Java require that all heap nodes are default initialized to zero. Given that, it is MORE efficient for the GC to do a large-scale zeroing than it is for the allocator to do a small-scale initialization of nodes as they are allocated.  And my understanding is that that is how it works.","body":"@kdgregory - it is not wasting its time. The semantics of Java require that all heap nodes are default initialized to zero. Given that, it is MORE efficient for the GC to do a large-scale zeroing than it is for the allocator to do a small-scale initialization of nodes as they are allocated.  And my understanding is that that is how it works."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1432620994,"post_id":12008117,"comment_id":48982850,"body_markdown":"@StephenC When the GC copies an object to a new location, it doesn&#39;t zero the old memory - at least not until that part of the memory is used again for a new allocation. So even if you zero it out, a copy may have been created by the GC before you did at, and for a certain length of time, the old bytes will be readable. The semantics of Java only require zeroing when an object is allocated, which is not the case when the GC copies the object (I know it&#39;s an old post - someone linked to it)","body":"@StephenC When the GC copies an object to a new location, it doesn&#39;t zero the old memory - at least not until that part of the memory is used again for a new allocation. So even if you zero it out, a copy may have been created by the GC before you did at, and for a certain length of time, the old bytes will be readable. The semantics of Java only require zeroing when an object is allocated, which is not the case when the GC copies the object (I know it&#39;s an old post - someone linked to it)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1432637774,"post_id":12008117,"comment_id":48993583,"body_markdown":"@ErwinBolwidt -- Well.  Recently, I downloaded the Java 8 source code, and I took a look.  I was wrong.  It appears that (in Java 8 at least) zeroing is deferred until the point at which the JVM attempts to allocate a heap object.","body":"@ErwinBolwidt -- Well.  Recently, I downloaded the Java 8 source code, and I took a look.  I was wrong.  It appears that (in Java 8 at least) zeroing is deferred until the point at which the JVM attempts to allocate a heap object."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":9,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1683240287,"creation_date":1345215230,"answer_id":12008117,"question_id":12007991,"body_markdown":"A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.\r\n\r\nSo the safest solution is to not put the data into a `String` in the first place.  Use a `StringBuilder` or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don&#39;t use `toString()` etc on the `StringBuilder` or you have created the `String` you were trying to avoid.)\r\n\r\nOf course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs *require* or *return* text data to be provided as `String` objects.\r\n\r\n----------\r\n\r\nFor the record, there are a couple of ways that you can change the contents of a String&#39;s backing array.  For example, you can use reflection to fish out a reference to the `String` object&#39;s backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won&#39;t do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of `String` that *have changed* over time and may change again.\r\n\r\n----------\r\n\r\nMy personal take on this is that you are better off locking down your application platform so that unauthorized people can&#39;t gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you&#39;ve got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>A String cannot be &quot;wiped&quot;.  It is immutable, and short of some really dirty and dangerous tricks (using reflection, for example) you cannot alter that.</p>\n<p>So the safest solution is to not put the data into a <code>String</code> in the first place.  Use a <code>StringBuilder</code> or an array of characters instead, or some other representation that is not immutable.  (And then clear it when you are done.   And don't use <code>toString()</code> etc on the <code>StringBuilder</code> or you have created the <code>String</code> you were trying to avoid.)</p>\n<p>Of course, the &quot;safest&quot; solution is rather impractical.  Many Java SE and 3rd party APIs <em>require</em> or <em>return</em> text data to be provided as <code>String</code> objects.</p>\n<hr />\n<p>For the record, there are a couple of ways that you can change the contents of a String's backing array.  For example, you can use reflection to fish out a reference to the <code>String</code> object's backing array, and overwrite its contents.  However, this involves doing things that the JLS states have unspecified behavior so  you cannot guarantee that the optimizer won't do something unexpected.  And the code to do this will be non-portable, since it depends on internal details of <code>String</code> that <em>have changed</em> over time and may change again.</p>\n<hr />\n<p>My personal take on this is that you are better off locking down your application platform so that unauthorized people can't gain access to the memory / memory dump in the first place.  After all, if the platform is not properly secured, the &quot;bad guys&quot; may be able to get hold of the string contents before you erase it.  Steps like this might be warranted for small amounts of security critical state, but if you've got a lot of &quot;confidential&quot; information to process, it is going to be a major hassle to not be able to use normal strings and string handling.</p>\n"},{"comments":[{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":5,"creation_date":1398778864,"post_id":12008195,"comment_id":35789431,"body_markdown":"Actually, if read the javadoc you&#39;ll notice the original memory space will no be overwritten. Instead, a new memory space with the modified string will be returned instead: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)","body":"Actually, if read the javadoc you&#39;ll notice the original memory space will no be overwritten. Instead, a new memory space with the modified string will be returned instead: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"score":0,"creation_date":1398901696,"post_id":12008195,"comment_id":35852196,"body_markdown":"Well, I am referring to using the String.replace() on a local scope string so it won;t appear in memory as the original String.","body":"Well, I am referring to using the String.replace() on a local scope string so it won;t appear in memory as the original String."},{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":0,"creation_date":1398965997,"post_id":12008195,"comment_id":35876986,"body_markdown":"Doesn&#39;t change things a bit. Remember that in Java what will be stored on the local scope variable is a *reference* to the String object. Also, Strings are immutable. So no operations on class String will ever update an existing string memory space.","body":"Doesn&#39;t change things a bit. Remember that in Java what will be stored on the local scope variable is a <i>reference</i> to the String object. Also, Strings are immutable. So no operations on class String will ever update an existing string memory space."},{"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"score":0,"creation_date":1399125387,"post_id":12008195,"comment_id":35936610,"body_markdown":"Exactly right sir, which is why I am saying form a new string from the old local scope String reference using String.replace().","body":"Exactly right sir, which is why I am saying form a new string from the old local scope String reference using String.replace()."},{"owner":{"account_id":2894732,"reputation":3563,"user_id":2482776,"accept_rate":91,"display_name":"asieira"},"score":1,"creation_date":1399336572,"post_id":12008195,"comment_id":36009583,"body_markdown":"Agreed, re-reading your text that is clearly what you meant. In particular, the key part of your response is the recommendation to not use String for sensitive data. And I&#39;ll add that this is a severe limitation in using Java for security software.","body":"Agreed, re-reading your text that is clearly what you meant. In particular, the key part of your response is the recommendation to not use String for sensitive data. And I&#39;ll add that this is a severe limitation in using Java for security software."}],"tags":[],"owner":{"account_id":1610686,"reputation":766,"user_id":1489700,"display_name":"Mitch Connor"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345215464,"creation_date":1345215464,"answer_id":12008195,"question_id":12007991,"body_markdown":"If you&#39;re going to use a String then I think you are worried about it appearing in a memory dump. I suggest using `String.replace()` on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won&#39;t appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<p>If you're going to use a String then I think you are worried about it appearing in a memory dump. I suggest using <code>String.replace()</code> on key-characters so that when the String is used at run-time it will change and then go out of scope after it is used and won't appear correctly in a memory dump. However, I strongly recommend that you not use a String for sensitive data.</p>\n"}],"owner":{"account_id":1066914,"reputation":321,"user_id":1067221,"accept_rate":83,"display_name":"Nerd"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13416,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":12008117,"answer_count":4,"score":11,"last_activity_date":1683240287,"creation_date":1345214807,"question_id":12007991,"body_markdown":"    String secret=&quot;foo&quot;;\r\n    WhatILookFor.securelyWipe(secret);\r\n\r\nAnd I need to know that it will not be removed by java optimizer.","title":"How can I securely wipe a confidential data in memory in java with guarantee it will not be &#39;optimized&#39;?","body":"<pre><code>String secret=\"foo\";\nWhatILookFor.securelyWipe(secret);\n</code></pre>\n\n<p>And I need to know that it will not be removed by java optimizer.</p>\n"},{"tags":["java","spring-boot","maven","tomcat"],"comments":[{"owner":{"account_id":15369314,"reputation":384,"user_id":11087815,"display_name":"S B"},"score":1,"creation_date":1584329696,"post_id":60699994,"comment_id":107394658,"body_markdown":"Try using `localhost:8080/sample/hello`","body":"Try using <code>localhost:8080&#47;sample&#47;hello</code>"},{"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"score":0,"creation_date":1584360714,"post_id":60699994,"comment_id":107404820,"body_markdown":"when i access this on embed server it works but on external tomcat it is not working","body":"when i access this on embed server it works but on external tomcat it is not working"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1618795034,"post_id":60699994,"comment_id":118702740,"body_markdown":"Does this answer your question? [Servlet 5.0 JAR throws compile error on javax.servlet.\\* but Servlet 4.0 JAR does not](https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64387472/servlet-5-0-jar-throws-compile-error-on-javax-servlet-but-servlet-4-0-jar-does\">Servlet 5.0 JAR throws compile error on javax.servlet.* but Servlet 4.0 JAR does not</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1618818952,"post_id":60699994,"comment_id":118708075,"body_markdown":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (`jakarta.*`), instead of the old Java EE namespace (`javax.*`), see also https://github.com/spring-projects/spring-boot/issues/22414. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5.","body":"As far as I&#39;m aware you cannot run Spring Boot on Tomcat 10, as Tomcat 10 uses the new Jakarta EE namespace (<code>jakarta.*</code>), instead of the old Java EE namespace (<code>javax.*</code>), see also <a href=\"https://github.com/spring-projects/spring-boot/issues/22414\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/22414</a>. So don&#39;t try to run Spring Boot on Tomcat 10, use Tomcat 9 or 8.5."},{"owner":{"account_id":2128309,"reputation":6169,"user_id":1889825,"accept_rate":38,"display_name":"Somnath Kadam"},"score":0,"creation_date":1691764873,"post_id":60699994,"comment_id":135540259,"body_markdown":"After adding firewall rule for selected port on windows machine works fine","body":"After adding firewall rule for selected port on windows machine works fine"}],"answers":[{"comments":[{"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"score":4,"creation_date":1584360734,"post_id":60700597,"comment_id":107404830,"body_markdown":"when i access this on embed server it works but on external tomcat it is not working","body":"when i access this on embed server it works but on external tomcat it is not working"}],"tags":[],"owner":{"account_id":7666395,"reputation":11,"user_id":5810009,"display_name":"Ph&#225;t Hồ Hữu"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584335305,"creation_date":1584335305,"answer_id":60700597,"question_id":60699994,"body_markdown":"Your path is set up in this functions\r\n\r\n    @RequestMapping(value = &quot;/hello&quot;)\r\n    public String helloWorld()\r\n    {\r\n        return &quot;Hello World, Peter&quot;;\r\n    }\r\n\r\nWhich means the only thing you can access is `&quot;/hello&quot;`.\r\nAccessing to `localhost:8080/HelloWorld-0.0.1-SNAPSHOT` will not working, you have to access for `localhost:8080/${context-path}/${your-path}` in this case `localhost:8080/sample/hello` ","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Your path is set up in this functions</p>\n\n<pre><code>@RequestMapping(value = \"/hello\")\npublic String helloWorld()\n{\n    return \"Hello World, Peter\";\n}\n</code></pre>\n\n<p>Which means the only thing you can access is <code>\"/hello\"</code>.\nAccessing to <code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT</code> will not working, you have to access for <code>localhost:8080/${context-path}/${your-path}</code> in this case <code>localhost:8080/sample/hello</code> </p>\n"},{"tags":[],"owner":{"account_id":13045395,"reputation":2899,"user_id":9427395,"display_name":"dasunse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584335347,"creation_date":1584335347,"answer_id":60700601,"question_id":60699994,"body_markdown":"try this way\r\n\r\n    \r\n\r\n&gt; localhost:8080/app-name/hello\r\n\r\nIn your pom.xml\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;it.group.id&lt;/groupId&gt;\r\n        &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n    \r\n            &lt;!--For Build War File--&gt;\r\n            &lt;dependency&gt;\r\n                 &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                 &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                 &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n    \r\n    \r\n        &lt;/dependencies&gt;\r\n        &lt;build&gt;\r\n            &lt;!--DEV--&gt;\r\n            &lt;finalName&gt;app-name&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;!--For Build War File--&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.2.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n            &lt;/plugins&gt;\r\n    \r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>try this way</p>\n\n<blockquote>\n  <p>localhost:8080/app-name/hello</p>\n</blockquote>\n\n<p>In your pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;it.group.id&lt;/groupId&gt;\n    &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent fdaotory --&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;!--For Build War File--&gt;\n        &lt;dependency&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n             &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;!--DEV--&gt;\n        &lt;finalName&gt;app-name&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n\n            &lt;!--For Build War File--&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5945485,"reputation":31,"user_id":4675102,"display_name":"Pavan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1658129385,"creation_date":1657657404,"answer_id":72957989,"question_id":60699994,"body_markdown":"Make sure that the java version you set in your pom.xml `&lt;java.version&gt;1.8&lt;/java.version&gt;` and the java version using which the tomcat is running (version of java to which `JAVA_HOME` env variable is pointing) are same.","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>Make sure that the java version you set in your pom.xml <code>&lt;java.version&gt;1.8&lt;/java.version&gt;</code> and the java version using which the tomcat is running (version of java to which <code>JAVA_HOME</code> env variable is pointing) are same.</p>\n"},{"tags":[],"owner":{"account_id":22321398,"reputation":177,"user_id":16543985,"display_name":"ChandraShekhara"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1658135033,"creation_date":1658135033,"answer_id":73019792,"question_id":60699994,"body_markdown":"follow this steps it may helps you\r\n1) ***Build the war file*** : go to spring project directory there you do ***mvn clean install*** (make sure you have installed maven and set to environmental variable).\r\n2) ***Copy war*** :copy your war file into /webapps folder inside your tomcat folder.\r\n3) ***Start server***: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.\r\n4) ***Hit Url***: Once the server started, open your browser the type ***localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}*** in your case its look like this ```http://localhost:8080/{warfilename}/hello```","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>follow this steps it may helps you</p>\n<ol>\n<li><em><strong>Build the war file</strong></em> : go to spring project directory there you do <em><strong>mvn clean install</strong></em> (make sure you have installed maven and set to environmental variable).</li>\n<li><em><strong>Copy war</strong></em> :copy your war file into /webapps folder inside your tomcat folder.</li>\n<li><em><strong>Start server</strong></em>: to start the server go to /bin folder then execute this commands startup.sh for Linux startup.bat for windows.</li>\n<li><em><strong>Hit Url</strong></em>: Once the server started, open your browser the type <em><strong>localhost:{&quot;portNumber&quot;}/{warFileName}/{yourPath}</strong></em> in your case its look like this <code>http://localhost:8080/{warfilename}/hello</code></li>\n</ol>\n"}],"owner":{"account_id":9317965,"reputation":41,"user_id":6917684,"display_name":"reddynr"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7088,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1683239406,"creation_date":1584329344,"question_id":60699994,"body_markdown":"I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps\r\n\r\n1. Packages as war inside pom.xml\r\n2. `&lt;scope&gt;provided&lt;/scope&gt;` to spring-boot-starter-tomcat in pom.xml\r\n3. Extending main class with SpringBootServletInitializer\r\n\r\nWhen I place this in Tomcat&#39;s webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method\r\n\r\n```\r\n@SpringBootApplication\r\n@RestController\r\npublic class HelloWorldApplication extends SpringBootServletInitializer\r\n{\r\n\t@Override\r\n\tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application)\r\n\t{\r\n\t\treturn application.sources(HelloWorldApplication.class);\r\n\t}\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tSpringApplication.run(HelloWorldApplication.class, args);\r\n\t}\r\n\t@RequestMapping(value = &quot;/hello&quot;)\r\n\tpublic String helloWorld()\r\n\t{\r\n\t\treturn &quot;Hello World, Peter&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nand in pom.xml\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\n        \r\n&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;HelloWorld&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n```\r\nand application.properties is like\r\n\r\n    server.servlet.context-path=/sample\r\n\r\nTomcat logs:\r\n```\r\n    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\r\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\r\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\r\n```\r\n\r\n\r\nI tried accessing in below ways.but none of them worked.Could any one points me in right direction?\r\n```\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\r\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\r\n```  \r\n\r\n\r\n\r\n","title":"Spring Boot application is not starting in external Tomcat (tried both in Tomcat 8.5 and 10)","body":"<p>I am trying to deploy a rest sample in external tomcat. However, it does not give any error and Spring does not start also. According to Spring documentation I followed three steps</p>\n<ol>\n<li>Packages as war inside pom.xml</li>\n<li><code>&lt;scope&gt;provided&lt;/scope&gt;</code> to spring-boot-starter-tomcat in pom.xml</li>\n<li>Extending main class with SpringBootServletInitializer</li>\n</ol>\n<p>When I place this in Tomcat's webapp folder and run &quot;catalina.bat run&quot; it says application deployed successfully, but whatever URL I try to access, it does not execute the rest method</p>\n<pre><code>@SpringBootApplication\n@RestController\npublic class HelloWorldApplication extends SpringBootServletInitializer\n{\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application)\n    {\n        return application.sources(HelloWorldApplication.class);\n    }\n    public static void main(String[] args)\n    {\n        SpringApplication.run(HelloWorldApplication.class, args);\n    }\n    @RequestMapping(value = &quot;/hello&quot;)\n    public String helloWorld()\n    {\n        return &quot;Hello World, Peter&quot;;\n    }\n}\n</code></pre>\n<p>and in pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n\n        \n&lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;HelloWorld&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n<p>and application.properties is like</p>\n<pre><code>server.servlet.context-path=/sample\n</code></pre>\n<p>Tomcat logs:</p>\n<pre><code>    15-Mar-2020 23:06:46.219 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war]\n    15-Mar-2020 23:06:48.102 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n    15-Mar-2020 23:06:48.409 WARNING [main] org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandom Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [270] milliseconds.\n    15-Mar-2020 23:06:48.440 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\softwares\\apache-tomcat-10.0.0-M1\\webapps\\HelloWorld-0.0.1-SNAPSHOT.war] has finished in [2,221] ms\n</code></pre>\n<p>I tried accessing in below ways.but none of them worked.Could any one points me in right direction?</p>\n<pre><code>localhost:8080/HelloWorld-0.0.1-SNAPSHOT\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/hello\nlocalhost:8080/HelloWorld-0.0.1-SNAPSHOT/HelloWorldApplication/helloWorld\n</code></pre>\n"},{"tags":["java","android","android-camera","getusermedia"],"owner":{"account_id":27289543,"reputation":35,"user_id":20808185,"display_name":"John House"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683238351,"creation_date":1683107151,"question_id":76162455,"body_markdown":"I 0 in java, i just need run my web application in android webview, app use camera.\r\nI have error:\r\n\r\n&gt; 2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: https://morservicetest.na4u.ru/add-product\r\n\r\nBut i request permission in Manifest. Right [here][1] many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?\r\n\r\n\r\nMainActivity\r\n```\r\npackage com.morservice;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.PermissionRequest;\r\nimport android.webkit.WebChromeClient;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        WebView myWebView = (WebView) findViewById(R.id.webview);\r\n        WebSettings webSettings = myWebView.getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\r\n\r\n    }\r\n}\r\n```\r\n\r\nManifest\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.МорСервис&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n\r\n            &lt;meta-data\r\n                android:name=&quot;android.app.lib_name&quot;\r\n                android:value=&quot;&quot; /&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nUPDATE:\r\nI try methods from [this topic][2] but he not help me:\r\n\r\n```\r\nwebSettings.setMediaPlaybackRequiresUserGesture(false);\r\n        myWebView.setWebViewClient(new WebViewClient());\r\n        myWebView.setWebChromeClient(\r\n            new WebChromeClient() {\r\n                 // Grant permissions for cam\r\n                 @Override\r\n                 public void onPermissionRequest(final PermissionRequest request) {\r\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\r\n                     MainActivity.this.runOnUiThread(new Runnable() {\r\n                         @Override\r\n                         public void run() {\r\n                             Log.d(TAG, request.getOrigin().toString());\r\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\r\n                                 Log.d(TAG, &quot;GRANTED&quot;);\r\n                                 request.grant(request.getResources());\r\n                             } else {\r\n                                 Log.d(TAG, &quot;DENIED&quot;);\r\n                                 request.deny();\r\n                             }\r\n                         }\r\n                     });\r\n                 }\r\n             }\r\n```\r\n\r\n\r\n  [1]: https://developer.android.com/training/permissions/requesting#java\r\n  [2]: https://github.com/NativeScript/NativeScript/issues/9304","title":"How get camera permission from webview android?","body":"<p>I 0 in java, i just need run my web application in android webview, app use camera.\nI have error:</p>\n<blockquote>\n<p>2023-05-03 12:41:38.074 4975-4975/com.morservice I/chromium: [INFO:CONSOLE(0)] &quot;Uncaught (in promise) NotAllowedError: Permission denied&quot;, source: <a href=\"https://morservicetest.na4u.ru/add-product\" rel=\"nofollow noreferrer\">https://morservicetest.na4u.ru/add-product</a></p>\n</blockquote>\n<p>But i request permission in Manifest. Right <a href=\"https://developer.android.com/training/permissions/requesting#java\" rel=\"nofollow noreferrer\">here</a> many code for 6+ android request permission, i use api 30 = android 11. Idk what i need do for fix problem. Can u help me please?</p>\n<p>MainActivity</p>\n<pre><code>package com.morservice;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.PermissionRequest;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        WebView myWebView = (WebView) findViewById(R.id.webview);\n        WebSettings webSettings = myWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        myWebView.loadUrl(&quot;https://morservicetest.na4u.ru/frame&quot;);\n\n    }\n}\n</code></pre>\n<p>Manifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.webkit.PermissionRequest&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.МорСервис&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>UPDATE:\nI try methods from <a href=\"https://github.com/NativeScript/NativeScript/issues/9304\" rel=\"nofollow noreferrer\">this topic</a> but he not help me:</p>\n<pre><code>webSettings.setMediaPlaybackRequiresUserGesture(false);\n        myWebView.setWebViewClient(new WebViewClient());\n        myWebView.setWebChromeClient(\n            new WebChromeClient() {\n                 // Grant permissions for cam\n                 @Override\n                 public void onPermissionRequest(final PermissionRequest request) {\n                     Log.d(TAG, &quot;onPermissionRequest&quot;);\n                     MainActivity.this.runOnUiThread(new Runnable() {\n                         @Override\n                         public void run() {\n                             Log.d(TAG, request.getOrigin().toString());\n                             if (request.getOrigin().toString().equals(&quot;file:///&quot;)) {\n                                 Log.d(TAG, &quot;GRANTED&quot;);\n                                 request.grant(request.getResources());\n                             } else {\n                                 Log.d(TAG, &quot;DENIED&quot;);\n                                 request.deny();\n                             }\n                         }\n                     });\n                 }\n             }\n</code></pre>\n"},{"tags":["java","protocol-buffers","protoc","proto3"],"answers":[{"comments":[{"owner":{"account_id":2390568,"reputation":2798,"user_id":2090489,"accept_rate":86,"display_name":"Ankita"},"score":0,"creation_date":1458325167,"post_id":36090933,"comment_id":59827396,"body_markdown":"Yes,@kenton Varda that is what I precisely want to do. Thanks for your suggestion","body":"Yes,@kenton Varda that is what I precisely want to do. Thanks for your suggestion"},{"owner":{"account_id":10481421,"reputation":1559,"user_id":7726319,"accept_rate":0,"display_name":"Prog_G"},"score":0,"creation_date":1600069819,"post_id":36090933,"comment_id":112960607,"body_markdown":"@Ankita Did you find any solution for the above problem?","body":"@Ankita Did you find any solution for the above problem?"}],"tags":[],"owner":{"account_id":3179906,"reputation":42189,"user_id":2686899,"display_name":"Kenton Varda"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1458322845,"creation_date":1458322845,"answer_id":36090933,"question_id":36074849,"body_markdown":"I think you are asking: &quot;Is there a way to dynamically parse text `.proto` files at runtime to get descriptors.&quot;\r\n\r\nThe `.proto` parser is written in C++. It is available as the library `libprotoc.so`. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for `.proto` files.","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I think you are asking: \"Is there a way to dynamically parse text <code>.proto</code> files at runtime to get descriptors.\"</p>\n\n<p>The <code>.proto</code> parser is written in C++. It is available as the library <code>libprotoc.so</code>. You could, in theory, write a JNI wrapper around this to do parsing at runtime. However, there is no (official) pure-Java parser for <code>.proto</code> files.</p>\n"},{"tags":[],"owner":{"account_id":15999524,"reputation":178,"user_id":11546605,"display_name":"Dominik21"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683237729,"creation_date":1683237729,"answer_id":76177631,"question_id":36074849,"body_markdown":"I just found a solution from confluent, more precisely &#39;io.confluent:kafka-protobuf-serializer&#39;, which enables this in a very easy way\r\n\r\n        ProtobufSchema schema = new ProtobufSchema(\r\n                Files.readString(\r\n                        Path.of(&quot;/anyPath/test.proto&quot;)\r\n                )\r\n        );\r\n        Descriptor descriptor = schema.toDescriptor();\r\n        Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I just found a solution from confluent, more precisely 'io.confluent:kafka-protobuf-serializer', which enables this in a very easy way</p>\n<pre><code>    ProtobufSchema schema = new ProtobufSchema(\n            Files.readString(\n                    Path.of(&quot;/anyPath/test.proto&quot;)\n            )\n    );\n    Descriptor descriptor = schema.toDescriptor();\n    Message deserializedMessage = DynamicMessage.parseFrom(descriptor, messageByteArr);\n</code></pre>\n"}],"owner":{"account_id":2390568,"reputation":2798,"user_id":2090489,"accept_rate":86,"display_name":"Ankita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1852,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":36090933,"answer_count":2,"score":6,"last_activity_date":1683237729,"creation_date":1458266458,"question_id":36074849,"body_markdown":"I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.\r\n\r\n    message TSInbound\r\n    {\r\n      string id = 1;\r\n      map&lt;string,string&gt; state = 2;\r\n      map&lt;string,string&gt; reading =3;\r\n    }\r\nAFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?\r\n\r\n    ","title":"Dynamic parsing of .proto text file at runtime to generate descriptors","body":"<p>I am currently working on Google Protocol Buffers and need to generate dynamic messages. I already have my .proto files defined as shown below.</p>\n\n<pre><code>message TSInbound\n{\n  string id = 1;\n  map&lt;string,string&gt; state = 2;\n  map&lt;string,string&gt; reading =3;\n}\n</code></pre>\n\n<p>AFAIK,I can use File Descriptor Set to create dynamic messsages. But, that would involve using the compiler to generate the desc files. I would like to generate Descriptor without compiling the .proto files. Is there a way for dynamic creation of message using custom defined .proto files and not using protoc ?</p>\n"},{"tags":["java","spring","spring-boot","thymeleaf","spring-thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":5152799,"reputation":19367,"user_id":4126893,"display_name":"Metroids"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683235838,"creation_date":1683235838,"answer_id":76177485,"question_id":76177165,"body_markdown":"No, you don&#39;t need to use the `th:field=&quot;*{...}&quot;` attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.\r\n\r\nThis does mean that if you are editing an object and you leave a field off and save the object later, any fields without a `th:field` will be saved with an empty value.  (You can use the `@SessionAttributes` annotation to persist fields even if they don&#39;t appear on the form.)","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>No, you don't need to use the <code>th:field=&quot;*{...}&quot;</code> attribute on all fields.  Any fields  not specified will be reset to their empty or default value after the form is submitted.</p>\n<p>This does mean that if you are editing an object and you leave a field off and save the object later, any fields without a <code>th:field</code> will be saved with an empty value.  (You can use the <code>@SessionAttributes</code> annotation to persist fields even if they don't appear on the form.)</p>\n"}],"owner":{"account_id":15525089,"reputation":99,"user_id":11200149,"display_name":"NoobSailboat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683237524,"creation_date":1683232133,"question_id":76177165,"body_markdown":"After adding a Model attribute in the `@GetMapping` do you need add all fields using `th:field=&quot;*{...}&quot;` in the view&#39;s form?\r\n\r\nFor example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use `th:field` on just the name and not include the other fields?\r\n\r\nIt still seems to work when I create a `@GetMapping` for edit I pass the model and just have the `th:field` for just the name, but online I see people adding all of the fields to the form.\r\n\r\nI can understand if you are trying to save the Entity, but if you&#39;re editing does it make a difference that I just don&#39;t understand?","title":"Thymeleaf: Do you need to use th:field *{} on all fields?","body":"<p>After adding a Model attribute in the <code>@GetMapping</code> do you need add all fields using <code>th:field=&quot;*{...}&quot;</code> in the view's form?</p>\n<p>For example, if I add a User to the model and I want a form that edits the name but not the DOB or anything else can I just use <code>th:field</code> on just the name and not include the other fields?</p>\n<p>It still seems to work when I create a <code>@GetMapping</code> for edit I pass the model and just have the <code>th:field</code> for just the name, but online I see people adding all of the fields to the form.</p>\n<p>I can understand if you are trying to save the Entity, but if you're editing does it make a difference that I just don't understand?</p>\n"},{"tags":["java","android","paint","bitmapfactory","oval"],"answers":[{"tags":[],"owner":{"account_id":27874078,"reputation":36,"user_id":21283922,"display_name":"Nguyễn Văn Huy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683168128,"creation_date":1683168128,"answer_id":76169241,"question_id":76169053,"body_markdown":" 1. If you want to draw rectangle with round corners:\r\n\r\n        Canvas.drawRoundRect(RectF(),10f,10f,Paint())\r\n\r\n 2. For each text, you can get text bound (a rect a round text), then draw this rect with round corners:\r\n\r\n         String text = &quot;hello&quot;;\r\n        Rect rectText = new Rect(); \r\n        paint.getTextBounds(text, 0, text.length(), rectText);\r\n        canvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\r\n      \r\n","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<ol>\n<li><p>If you want to draw rectangle with round corners:</p>\n<pre><code>Canvas.drawRoundRect(RectF(),10f,10f,Paint())\n</code></pre>\n</li>\n<li><p>For each text, you can get text bound (a rect a round text), then draw this rect with round corners:</p>\n<pre><code> String text = &quot;hello&quot;;\nRect rectText = new Rect(); \npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,rectText.top,rectText.right,rectText.bottom,radius,radius,paint);\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236936,"creation_date":1683236936,"answer_id":76177574,"question_id":76169053,"body_markdown":"Final Result after making changes to @Nguyễn&#39;s Answer:\r\n\r\n    //Creating text of random length\r\n    final int min = 1;\r\n    final int max = 999999;\r\n    final String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\r\n\r\n    //Creating bitmap width according to text length\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\r\n\r\n    //Setting up Text properties\r\n    Paint color = new Paint();\r\n    Typeface typeface = Typeface.DEFAULT_BOLD;\r\n    color.setTypeface(typeface);\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    //Setting up Rectangle\r\n    Rect rectText = new Rect();\r\n    Paint paint = new Paint();\r\n    paint.setTextSize(32);\r\n    paint.setColor(Color.WHITE);\r\n\r\n    //Creating Convas object for the bitmap\r\n    Canvas canvas = new Canvas(bmp);\r\n\r\n    //Drawing rectangle with round corners and it width according to the text length with some extra padding\r\n    paint.getTextBounds(text, 0, text.length(), rectText);\r\n    canvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\r\n\r\n    //Drawing text\r\n    canvas.drawText(text, 10, 40, color);\r\n\r\nHere is the output:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3bGgh.png","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>Final Result after making changes to @Nguyễn's Answer:</p>\n<pre><code>//Creating text of random length\nfinal int min = 1;\nfinal int max = 999999;\nfinal String text = new Random().nextInt((max - min) + 1) + min +&quot; USD&quot;;\n\n//Creating bitmap width according to text length\nBitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(text.length()*20, 50, conf);\n\n//Setting up Text properties\nPaint color = new Paint();\nTypeface typeface = Typeface.DEFAULT_BOLD;\ncolor.setTypeface(typeface);\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\n//Setting up Rectangle\nRect rectText = new Rect();\nPaint paint = new Paint();\npaint.setTextSize(32);\npaint.setColor(Color.WHITE);\n\n//Creating Convas object for the bitmap\nCanvas canvas = new Canvas(bmp);\n\n//Drawing rectangle with round corners and it width according to the text length with some extra padding\npaint.getTextBounds(text, 0, text.length(), rectText);\ncanvas.drawRoundRect(rectText.left,10,rectText.right+10,50,10,40,paint);\n\n//Drawing text\ncanvas.drawText(text, 10, 40, color);\n</code></pre>\n<p>Here is the output:</p>\n<p><a href=\"https://i.stack.imgur.com/3bGgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3bGgh.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11087965,"reputation":164,"user_id":8140942,"display_name":"Waqas K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177574,"answer_count":2,"score":1,"last_activity_date":1683236936,"creation_date":1683165080,"question_id":76169053,"body_markdown":"I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code. \r\n1) I want to draw rectangle with round corners instead of the circles. \r\n2) Its size does not changes according to text length. \r\n\r\n\r\n\r\n\r\nHere is my code so far:\r\n\r\n    Bitmap.Config conf = Bitmap.Config.ARGB_8888;\r\n    Bitmap bmp = Bitmap.createBitmap(500, 280, conf);\r\n    Canvas canvas1 = new Canvas(bmp);\r\n                            \r\n    Paint color = new Paint();\r\n    color.setTextSize(30);\r\n    color.setColor(Color.BLACK);\r\n\r\n    Paint clr2=new Paint();\r\n    clr2.setColor(Color.WHITE);\r\n    canvas1.translate(200/2f,100/2f);\r\n    canvas1.drawCircle(50,0, 50, clr2);\r\n    canvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\r\n\r\n\r\nCurrent results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ws0Tu.png)](https://i.stack.imgur.com/ws0Tu.png)\r\n\r\nExpected results:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Eay9F.png)](https://i.stack.imgur.com/Eay9F.png)","title":"How to draw oval shape (rectangle with round corners) as text background using Paint and Convas in Android java","body":"<p>I am trying to add an oval background to my text according to its size using Paint. There are a few problems in my code.</p>\n<ol>\n<li>I want to draw rectangle with round corners instead of the circles.</li>\n<li>Its size does not changes according to text length.</li>\n</ol>\n<p>Here is my code so far:</p>\n<pre><code>Bitmap.Config conf = Bitmap.Config.ARGB_8888;\nBitmap bmp = Bitmap.createBitmap(500, 280, conf);\nCanvas canvas1 = new Canvas(bmp);\n                        \nPaint color = new Paint();\ncolor.setTextSize(30);\ncolor.setColor(Color.BLACK);\n\nPaint clr2=new Paint();\nclr2.setColor(Color.WHITE);\ncanvas1.translate(200/2f,100/2f);\ncanvas1.drawCircle(50,0, 50, clr2);\ncanvas1.drawText(new Random().nextInt()+&quot; $&quot;, 0, 0, color);`\n</code></pre>\n<p>Current results:</p>\n<p><a href=\"https://i.stack.imgur.com/ws0Tu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ws0Tu.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected results:</p>\n<p><a href=\"https://i.stack.imgur.com/Eay9F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eay9F.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","inheritance","serialization","extends"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251108,"post_id":76177565,"comment_id":134341917,"body_markdown":"Does this answer your question? [Downcasting in Java](https://stackoverflow.com/questions/380813/downcasting-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/380813/downcasting-in-java\">Downcasting in Java</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1683251141,"post_id":76177565,"comment_id":134341921,"body_markdown":"What line do you think is &quot;casting B as C&quot;?","body":"What line do you think is &quot;casting B as C&quot;?"},{"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"score":0,"creation_date":1683364237,"post_id":76177565,"comment_id":134358137,"body_markdown":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised.","body":"@tgdavies yes, thank for info, I never seen this before. I wrote code and was sure it will fail and it worked and I was surprised."}],"owner":{"account_id":18247034,"reputation":95,"user_id":13282920,"display_name":"Fran Turkovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236808,"creation_date":1683236808,"question_id":76177565,"body_markdown":"I don&#39;t understand why this code works.\r\n\r\nI have 3 classes: A, B and C.\r\n\r\nClass A have class B as attribute.\r\nClass C extends class B. I can initialize class C and set is as attribute of class A.\r\n\r\n```\r\npublic class A {\r\n    public B b;\r\n\r\n    public A(){}\r\n}\r\n\r\npublic class B {\r\n    public String username;\r\n\r\n    public B(){}\r\n}\r\n\r\npublic class C extends B {\r\n    public String password;\r\n\r\n    public C(){}\r\n}\r\n\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tA a = new A();\r\n        B b = new B();\r\n        C c = new C();\r\n        a.b = c;\r\n\t}\r\n}\r\n```\r\n\r\nHow can Java cast B as C if C is &quot;larger&quot;?\r\nIf I try to do it normally, you can&#39;t, for example:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new C();\r\n        // ERROR cannont find symbol (b.password)\r\n        b.password = &quot;asd&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nor I try it like this:\r\n\r\n```\r\npublic class Program\r\n{\r\n\r\n    public static void main(String[] args) {\r\n\t\tB b = new B();\r\n        C c = new C();\r\n        b = c;\r\n        //ERROR cannont find symbol (b.password)\r\n        b.password = &quot;123&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nActual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:\r\n```\r\n{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\r\n```\r\nSo, I can&#39;t get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.","title":"Why I can initialize extended class in other class as attribute?","body":"<p>I don't understand why this code works.</p>\n<p>I have 3 classes: A, B and C.</p>\n<p>Class A have class B as attribute.\nClass C extends class B. I can initialize class C and set is as attribute of class A.</p>\n<pre><code>public class A {\n    public B b;\n\n    public A(){}\n}\n\npublic class B {\n    public String username;\n\n    public B(){}\n}\n\npublic class C extends B {\n    public String password;\n\n    public C(){}\n}\n\npublic class Program\n{\n\n    public static void main(String[] args) {\n        A a = new A();\n        B b = new B();\n        C c = new C();\n        a.b = c;\n    }\n}\n</code></pre>\n<p>How can Java cast B as C if C is &quot;larger&quot;?\nIf I try to do it normally, you can't, for example:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new C();\n        // ERROR cannont find symbol (b.password)\n        b.password = &quot;asd&quot;;\n    }\n}\n</code></pre>\n<p>or I try it like this:</p>\n<pre><code>public class Program\n{\n\n    public static void main(String[] args) {\n        B b = new B();\n        C c = new C();\n        b = c;\n        //ERROR cannont find symbol (b.password)\n        b.password = &quot;123&quot;;\n    }\n}\n</code></pre>\n<p>Actual problem I have is with HTTP response. I create my own response object that has context. This context can be ResponseContext or ResponseContextPagination that extends ResponseContext. So, my Response object has ResponseContext atribute, and I can set that atribute as ResponseContextPagination and when I return whole response to client, it has valid JSON:</p>\n<pre><code>{&quot;context&quot;:{&quot;hasMore&quot;:false,&quot;isLoggedIn&quot;:false}}\n</code></pre>\n<p>So, I can't get hasMore attribute if I try to access it because ResponseContext does not have hasMore attribute but why can I then even set hasMore as ResponseContextPagination object? And it serializes fine into JSON.</p>\n"},{"tags":["java","abstract-class","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1683468553,"post_id":76177553,"comment_id":134368328,"body_markdown":"It seems that `&lt;discriminator&gt;` does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the [tracker](https://github.com/mybatis/mybatis-3/issues/new) with the details? If you are busy, I&#39;ll do it when I find the time.","body":"It seems that <code>&lt;discriminator&gt;</code> does not work in constructor mapping at the moment (version 3.5.13). Could you open a new issue on the <a href=\"https://github.com/mybatis/mybatis-3/issues/new\" rel=\"nofollow noreferrer\">tracker</a> with the details? If you are busy, I&#39;ll do it when I find the time."},{"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"score":0,"creation_date":1683815859,"post_id":76177553,"comment_id":134427172,"body_markdown":"@ave, if you can, please do it","body":"@ave, if you can, please do it"},{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1689611061,"post_id":76177553,"comment_id":135234709,"body_markdown":"Here is the [issue](https://github.com/mybatis/mybatis-3/pull/2913) and the fix has been committed. It would be great if you could verify the fix using the [3.5.14-SNAPSHOT](https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot) before we release the final version.","body":"Here is the <a href=\"https://github.com/mybatis/mybatis-3/pull/2913\" rel=\"nofollow noreferrer\">issue</a> and the fix has been committed. It would be great if you could verify the fix using the <a href=\"https://github.com/mybatis/mybatis-3/wiki/Maven#snapshot\" rel=\"nofollow noreferrer\">3.5.14-SNAPSHOT</a> before we release the final version."}],"owner":{"account_id":18149076,"reputation":111,"user_id":13202054,"display_name":"acanthite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683236651,"creation_date":1683236651,"question_id":76177553,"body_markdown":"Here are my classes:\r\n\r\n```java\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic class UtilityDetails {\r\n  private final int id;\r\n  private final string name;\r\n  private final LocalDateTime createdAt;\r\n  private final boolean archived;\r\n  private final int sortOrder;\r\n\r\n  private final TariffDetails currentTariff;\r\n}\r\n\r\n@RegisterForReflection\r\npublic abstract sealed class TariffDetails\r\n    permits TariffDualRateDetails,\r\n    TariffSingleRateDetails,\r\n    TariffSubscriptionDetails {\r\n\r\n  public abstract TariffId getId();\r\n  public abstract UtilityId getUtilityId();\r\n  public abstract LocalDateTime getCreatedAt();\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffDualRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long threshold;\r\n    private final int unitSize;\r\n    private final long priceBelowThreshold;\r\n    private final long priceAboveThreshold;\r\n    private final ThresholdComparison thresholdComparison;\r\n}\r\n\r\npublic enum ThresholdComparison {\r\n  LESS_EQUALS,\r\n  STRICT_LESS;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSingleRateDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n    private final int unitSize;\r\n}\r\n\r\n@Getter\r\n@ToString\r\n@AllArgsConstructor\r\n@RegisterForReflection\r\npublic final class TariffSubscriptionDetails extends TariffDetails {\r\n    private final int id;\r\n    private final int utilityId;\r\n    private final LocalDateTime createdAt;\r\n    private final long price;\r\n}\r\n```\r\n\r\nHere is my mapper:\r\n\r\n```xml\r\n    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\r\n        select u.id                      as u_id,\r\n               u.name                    as u_name,\r\n               u.created_at              as u_created_at,\r\n               u.archived                as u_archived,\r\n               u.sort_order              as u_sort_order,\r\n               t.id                      as t_id,\r\n               t.created_at              as t_created_at,\r\n               case\r\n                   when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;\r\n                   when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;\r\n                   when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;\r\n                   end                   as tariff_type,\r\n               tdr.threshold             as tdr_threshold,\r\n               tdr.unit_size             as tdr_unit_size,\r\n               tdr.threshold_comparison  as tdr_threshold_comparison,\r\n               tdr.price_above_threshold as tdr_price_above_threshold,\r\n               tdr.price_below_threshold as tdr_price_below_threshold,\r\n               tsr.unit_size             as tsr_unit_size,\r\n               tsr.price                 as tsr_price,\r\n               ts.price                  as ts_price\r\n\r\n        from utility u\r\n                 inner join tariff t on u.id = t.utility_id\r\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\r\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\r\n                 left join tariff_subscription ts on t.id = ts.tariff_id\r\n        order by t.created_at desc\r\n        limit 1\r\n    &lt;/select&gt;\r\n\r\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\r\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\r\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\r\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\r\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\r\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\r\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\r\n        &lt;constructor&gt;\r\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\r\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\r\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\r\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\r\n        &lt;/constructor&gt;\r\n    &lt;/resultMap&gt;\r\n\r\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\r\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\r\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\r\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\r\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\r\n        &lt;/discriminator&gt;\r\n    &lt;/resultMap&gt;\r\n```\r\n\r\nFor some reason it tries to instantiate that abstract class `TariffDetails` and fails, because it&#39;s, well, an abstract class:\r\n\r\n```\r\norg.apache.ibatis.exceptions.PersistenceException: \r\n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n### The error may exist in org/upc/repository/UtilityRepository.xml\r\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\r\n### The error occurred while handling results\r\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then &#39;DUAL_RATE&#39;                    when tsr.tariff_id is not null then &#39;SINGLE_RATE&#39;                    when ts.tariff_id is not null then &#39;SUBSCRIPTION&#39;                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\r\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\r\n\tat io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\r\n\tat org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\r\n\tat org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\r\n\tat org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\r\n\tat jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\r\n\tat org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\r\n\tat org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\r\n\tat org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\r\n\tat org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\r\n\tat io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\r\n\tat org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\r\n\tat io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n\tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n\tat org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n\tat org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\r\n\tat org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\r\n\tat org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\r\n\tat org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\r\n\tat org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\r\n\tat org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\r\n\tat org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\r\n\tat org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\r\n\tat org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\r\n\t... 26 more\r\nCaused by: java.lang.InstantiationException\r\n\tat java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\r\n\tat org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\r\n\t... 47 more\r\n```\r\n\r\nHow do I make it instantiate a correct child class?","title":"How to map abstract class result in MyBatis?","body":"<p>Here are my classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic class UtilityDetails {\n  private final int id;\n  private final string name;\n  private final LocalDateTime createdAt;\n  private final boolean archived;\n  private final int sortOrder;\n\n  private final TariffDetails currentTariff;\n}\n\n@RegisterForReflection\npublic abstract sealed class TariffDetails\n    permits TariffDualRateDetails,\n    TariffSingleRateDetails,\n    TariffSubscriptionDetails {\n\n  public abstract TariffId getId();\n  public abstract UtilityId getUtilityId();\n  public abstract LocalDateTime getCreatedAt();\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffDualRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long threshold;\n    private final int unitSize;\n    private final long priceBelowThreshold;\n    private final long priceAboveThreshold;\n    private final ThresholdComparison thresholdComparison;\n}\n\npublic enum ThresholdComparison {\n  LESS_EQUALS,\n  STRICT_LESS;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSingleRateDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n    private final int unitSize;\n}\n\n@Getter\n@ToString\n@AllArgsConstructor\n@RegisterForReflection\npublic final class TariffSubscriptionDetails extends TariffDetails {\n    private final int id;\n    private final int utilityId;\n    private final LocalDateTime createdAt;\n    private final long price;\n}\n</code></pre>\n<p>Here is my mapper:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;select id=&quot;getUtilityDetailsById&quot; resultMap=&quot;utilityDetails&quot;&gt;\n        select u.id                      as u_id,\n               u.name                    as u_name,\n               u.created_at              as u_created_at,\n               u.archived                as u_archived,\n               u.sort_order              as u_sort_order,\n               t.id                      as t_id,\n               t.created_at              as t_created_at,\n               case\n                   when tdr.tariff_id is not null then 'DUAL_RATE'\n                   when tsr.tariff_id is not null then 'SINGLE_RATE'\n                   when ts.tariff_id is not null then 'SUBSCRIPTION'\n                   end                   as tariff_type,\n               tdr.threshold             as tdr_threshold,\n               tdr.unit_size             as tdr_unit_size,\n               tdr.threshold_comparison  as tdr_threshold_comparison,\n               tdr.price_above_threshold as tdr_price_above_threshold,\n               tdr.price_below_threshold as tdr_price_below_threshold,\n               tsr.unit_size             as tsr_unit_size,\n               tsr.price                 as tsr_price,\n               ts.price                  as ts_price\n\n        from utility u\n                 inner join tariff t on u.id = t.utility_id\n                 left join tariff_dual_rate tdr on t.id = tdr.tariff_id\n                 left join tariff_single_rate tsr on t.id = tsr.tariff_id\n                 left join tariff_subscription ts on t.id = ts.tariff_id\n        order by t.created_at desc\n        limit 1\n    &lt;/select&gt;\n\n    &lt;resultMap id=&quot;utilityDetails&quot; type=&quot;org.upc.model.UtilityDetails&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;name&quot; column=&quot;u_name&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;u_created_at&quot;/&gt;\n            &lt;arg name=&quot;archived&quot; column=&quot;u_archived&quot;/&gt;\n            &lt;arg name=&quot;sortOrder&quot; column=&quot;u_sort_order&quot;/&gt;\n            &lt;arg name=&quot;currentTariff&quot; resultMap=&quot;tariffMap&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffDualRate&quot; type=&quot;org.upc.model.TariffDualRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;threshold&quot; column=&quot;tdr_threshold&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tdr_unit_size&quot;/&gt;\n            &lt;arg name=&quot;thresholdComparison&quot; column=&quot;tdr_threshold_comparison&quot;/&gt;\n            &lt;arg name=&quot;priceAboveThreshold&quot; column=&quot;tdr_price_above_threshold&quot;/&gt;\n            &lt;arg name=&quot;priceBelowThreshold&quot; column=&quot;tdr_price_below_threshold&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSingleRate&quot; type=&quot;org.upc.model.TariffSingleRateDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;tsr_price&quot;/&gt;\n            &lt;arg name=&quot;unitSize&quot; column=&quot;tsr_unit_size&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffSubscription&quot; type=&quot;org.upc.model.TariffSubscriptionDetails&quot; extends=&quot;tariffMap&quot;&gt;\n        &lt;constructor&gt;\n            &lt;idArg name=&quot;id&quot; column=&quot;t_id&quot;/&gt;\n            &lt;arg name=&quot;utilityId&quot; column=&quot;u_id&quot;/&gt;\n            &lt;arg name=&quot;createdAt&quot; column=&quot;t_created_at&quot;/&gt;\n            &lt;arg name=&quot;price&quot; column=&quot;ts_price&quot;/&gt;\n        &lt;/constructor&gt;\n    &lt;/resultMap&gt;\n\n    &lt;resultMap id=&quot;tariffMap&quot; type=&quot;org.upc.model.TariffDetails&quot;&gt;\n        &lt;discriminator javaType=&quot;string&quot; column=&quot;tariff_type&quot;&gt;\n            &lt;case value=&quot;DUAL_RATE&quot; resultMap=&quot;tariffDualRate&quot;/&gt;\n            &lt;case value=&quot;SINGLE_RATE&quot; resultMap=&quot;tariffSingleRate&quot;/&gt;\n            &lt;case value=&quot;SUBSCRIPTION&quot; resultMap=&quot;tariffSubscription&quot;/&gt;\n        &lt;/discriminator&gt;\n    &lt;/resultMap&gt;\n</code></pre>\n<p>For some reason it tries to instantiate that abstract class <code>TariffDetails</code> and fails, because it's, well, an abstract class:</p>\n<pre><code>org.apache.ibatis.exceptions.PersistenceException: \n### Error querying database.  Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n### The error may exist in org/upc/repository/UtilityRepository.xml\n### The error may involve org.upc.repository.UtilityRepository.getUtilityDetailsById\n### The error occurred while handling results\n### SQL: select u.id                      as u_id,                u.name                    as u_name,                u.created_at              as u_created_at,                u.archived                as u_archived,                u.sort_order              as u_sort_order,                t.id                      as t_id,                t.created_at              as t_created_at,                case                    when tdr.tariff_id is not null then 'DUAL_RATE'                    when tsr.tariff_id is not null then 'SINGLE_RATE'                    when ts.tariff_id is not null then 'SUBSCRIPTION'                    end                   as tariff_type,                tdr.threshold             as tdr_threshold,                tdr.unit_size             as tdr_unit_size,                tdr.threshold_comparison  as tdr_threshold_comparison,                tdr.price_above_threshold as tdr_price_above_threshold,                tdr.price_below_threshold as tdr_price_below_threshold,                tsr.unit_size             as tsr_unit_size,                tsr.price                 as tsr_price,                ts.price                  as ts_price          from utility u                  inner join tariff t on u.id = t.utility_id                  left join tariff_dual_rate tdr on t.id = tdr.tariff_id                  left join tariff_single_rate tsr on t.id = tsr.tariff_id                  left join tariff_subscription ts on t.id = ts.tariff_id         order by t.created_at desc         limit 1\n### Cause: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:153)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:145)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:76)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession$TransactionalSqlSessionInterceptor.invoke(TransactionalSqlSession.java:197)\n    at jdk.proxy3/jdk.proxy3.$Proxy55.selectOne(Unknown Source)\n    at io.quarkiverse.mybatis.runtime.TransactionalSqlSession.selectOne(TransactionalSqlSession.java:46)\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:87)\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\n    at jdk.proxy5/jdk.proxy5.$Proxy62.getUtilityDetailsById(Unknown Source)\n    at org.upc.services.UtilityService.getUtilityDetailsById(UtilityService.java:38)\n    at org.upc.services.UtilityService_ClientProxy.getUtilityDetailsById(Unknown Source)\n    at org.upc.resources.UtilityResource.getUtilityDetailsById(UtilityResource.java:35)\n    at org.upc.resources.UtilityResource$quarkusrestinvoker$getUtilityDetailsById_24450c22d8569dcc4e8cbc86dde64aa8cf8ba2ac.invoke(Unknown Source)\n    at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:1623)\nCaused by: org.apache.ibatis.reflection.ReflectionException: Error instantiating class org.upc.model.TariffDetails with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:667)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:404)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createParameterizedResultObject(DefaultResultSetHandler.java:686)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:665)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.createResultObject(DefaultResultSetHandler.java:642)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.getRowValue(DefaultResultSetHandler.java:432)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValuesForNestedResultMap(DefaultResultSetHandler.java:988)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleRowValues(DefaultResultSetHandler.java:333)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSet(DefaultResultSetHandler.java:308)\n    at org.apache.ibatis.executor.resultset.DefaultResultSetHandler.handleResultSets(DefaultResultSetHandler.java:201)\n    at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)\n    at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)\n    at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)\n    at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)\n    at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)\n    at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)\n    at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:151)\n    ... 26 more\nCaused by: java.lang.InstantiationException\n    at java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:62)\n    ... 47 more\n</code></pre>\n<p>How do I make it instantiate a correct child class?</p>\n"},{"tags":["java","saml","adfs","rest-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683266624,"post_id":76177547,"comment_id":134343326,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"score":0,"creation_date":1684271368,"post_id":76177547,"comment_id":134493460,"body_markdown":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication.","body":"I have very vague information. I need to start from scratch and want to understand what are the basic steps or any library I could use to authenticate my Java API with on-premise SharePoint which is using ADFS and SAML 2.0 authentication."}],"owner":{"account_id":12825230,"reputation":3,"user_id":9278539,"display_name":"Ranjit Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236595,"creation_date":1683236595,"question_id":76177547,"body_markdown":"I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?\r\n\r\n\r\nThanks in advance!","title":"How to call SharePoint API which uses ADFS/SAML as authentication or authorization","body":"<p>I have a very basic problem to share, I am working on a small piece of application which is reading data form SharePoint On-premise API. This API is recently moved to ADFS on premise for authentication and I need to make changes to our code for this authentication. I have already gone through the documentation and understand the SAML/ADFS architecture. Could anyone please guide me to the Sample Java client code to server this purpose?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","excel","apache-poi"],"owner":{"account_id":11699486,"reputation":226,"user_id":13751385,"display_name":"Aria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683236348,"creation_date":1683236348,"question_id":76177527,"body_markdown":"In `poi`, I am curious to know when [`CreationHelper#createClientAnchor()`][1] is helpful. An example would be appreciated.\r\n\r\n`ClientAnchor` can be created using [`Drawing#createAnchor(int, int, int, int, int, int, int, int)`][2], and to me, that is a logical place as `Drawing` is per `Sheet` and anchor is needed for drawings.\r\n\r\nWhat I don&#39;t understand is the use case of `CreationHelper#createClientAnchor()`, especially as `CreationHelper` is per `Workbook`.\r\n\r\n  [1]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\r\n  [2]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html","title":"Comparing two ways of creating `ClientAnchor` in POI excel","body":"<p>In <code>poi</code>, I am curious to know when <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/CreationHelper.html\" rel=\"nofollow noreferrer\"><code>CreationHelper#createClientAnchor()</code></a> is helpful. An example would be appreciated.</p>\n<p><code>ClientAnchor</code> can be created using <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Drawing.html\" rel=\"nofollow noreferrer\"><code>Drawing#createAnchor(int, int, int, int, int, int, int, int)</code></a>, and to me, that is a logical place as <code>Drawing</code> is per <code>Sheet</code> and anchor is needed for drawings.</p>\n<p>What I don't understand is the use case of <code>CreationHelper#createClientAnchor()</code>, especially as <code>CreationHelper</code> is per <code>Workbook</code>.</p>\n"},{"tags":["java","eclipse","jframe","display","dispose"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1683104409,"post_id":76162059,"comment_id":134313890,"body_markdown":"have you checked with layouts? Where on your Panel is your label added? ..","body":"have you checked with layouts? Where on your Panel is your label added? .."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1683104769,"post_id":76162059,"comment_id":134313961,"body_markdown":"Use a Swing Timer instead of Thread.sleep","body":"Use a Swing Timer instead of Thread.sleep"},{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1683106120,"post_id":76162059,"comment_id":134314277,"body_markdown":"unrelated but nice to read: [java naming convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html)","body":"unrelated but nice to read: <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">java naming convention</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683236170,"creation_date":1683105418,"answer_id":76162236,"question_id":76162059,"body_markdown":"Swing is single threaded and not thread safe.  This means that you can&#39;t perform long running or blocking operations (like `Thread.sleep`) within the context of the Event Dispatching Thread.  It also means that you shouldn&#39;t update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nEssentially, the `Thread.sleep` is likely preventing the window from been painted.\r\n\r\nInstead, use a Swing `Timer`, for example...\r\n\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n    import javax.swing.border.EmptyBorder;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() {\r\n                setLayout(new GridBagLayout());\r\n                setBorder(new EmptyBorder(32, 32, 32, 32));\r\n\r\n                JButton btn = new JButton(&quot;Show me the money&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        JFrame popup = new JFrame();\r\n                        JLabel label = new JLabel(&quot;Money&quot;);\r\n                        label.setBorder(new EmptyBorder(32, 32, 32, 32));\r\n                        popup.add(label);\r\n                        popup.pack();\r\n                        popup.setLocationRelativeTo(TestPane.this);\r\n                        popup.setVisible(true);\r\n                        Timer timer = new Timer(3000, new ActionListener() {\r\n                            @Override\r\n                            public void actionPerformed(ActionEvent e) {\r\n                                popup.dispose();\r\n                            }\r\n                        });\r\n                        timer.setRepeats(false);\r\n                        timer.start();\r\n                    }\r\n                });\r\n                add(btn);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\nSee [How to Use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for more details","title":"Display and then close a frame in Java","body":"<p>Swing is single threaded and not thread safe.  This means that you can't perform long running or blocking operations (like <code>Thread.sleep</code>) within the context of the Event Dispatching Thread.  It also means that you shouldn't update the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>Essentially, the <code>Thread.sleep</code> is likely preventing the window from been painted.</p>\n<p>Instead, use a Swing <code>Timer</code>, for example...</p>\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() {\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Show me the money&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    JFrame popup = new JFrame();\n                    JLabel label = new JLabel(&quot;Money&quot;);\n                    label.setBorder(new EmptyBorder(32, 32, 32, 32));\n                    popup.add(label);\n                    popup.pack();\n                    popup.setLocationRelativeTo(TestPane.this);\n                    popup.setVisible(true);\n                    Timer timer = new Timer(3000, new ActionListener() {\n                        @Override\n                        public void actionPerformed(ActionEvent e) {\n                            popup.dispose();\n                        }\n                    });\n                    timer.setRepeats(false);\n                    timer.start();\n                }\n            });\n            add(btn);\n        }\n\n    }\n}\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> for more details</p>\n"}],"owner":{"account_id":28491469,"reputation":3,"user_id":21804046,"display_name":"Thibaud Zobel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76162236,"answer_count":1,"score":0,"last_activity_date":1683236170,"creation_date":1683104116,"question_id":76162059,"body_markdown":"Here the code:\r\n\r\n    public class attrape_ball {\r\n        JFrame frame = new JFrame();\r\n        JPanel attrape = new JPanel();\r\n    \t\r\n        public attrape_ball(pokeball pk) {\r\n        JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\r\n        attrape.add(ramasseball);\r\n    \t    \r\n        frame.setSize(200,100);\r\n        frame.add(attrape); \r\n        frame.setVisible(false);\r\n    \t}\r\n    \t\r\n        @Override\r\n        public void afficherJframe() {\r\n        frame.setVisible(true);\r\n        try {\r\n        Thread.sleep(3000);\r\n        } catch (InterruptedException e) {\r\n        e.printStackTrace();}\r\n        frame.dispose();\r\n        }\r\n    }\r\n\r\n\r\n\r\nWhen I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\r\nWhen I run it, the JLabel isn&#39;t displayed. That is the problem. (The JFrame is closed 3 sec later as I want). ","title":"Display and then close a frame in Java","body":"<p>Here the code:</p>\n<pre><code>public class attrape_ball {\n    JFrame frame = new JFrame();\n    JPanel attrape = new JPanel();\n    \n    public attrape_ball(pokeball pk) {\n    JLabel ramasseball = new JLabel(&quot;vous avez ramasser &quot;);\n    attrape.add(ramasseball);\n        \n    frame.setSize(200,100);\n    frame.add(attrape); \n    frame.setVisible(false);\n    }\n    \n    @Override\n    public void afficherJframe() {\n    frame.setVisible(true);\n    try {\n    Thread.sleep(3000);\n    } catch (InterruptedException e) {\n    e.printStackTrace();}\n    frame.dispose();\n    }\n}\n</code></pre>\n<p>When I call the function afficherJFrame() I want to display the JLabel then wait 3 sec and then close the JFrame.\nWhen I run it, the JLabel isn't displayed. That is the problem. (The JFrame is closed 3 sec later as I want).</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":2,"creation_date":1683230486,"post_id":76176939,"comment_id":134339199,"body_markdown":"Seems about right. But you mixed up your modifiers: `static`goes before `final` so your lock should be `private static final Object obj = new Object();`","body":"Seems about right. But you mixed up your modifiers: <code>static</code>goes before <code>final</code> so your lock should be <code>private static final Object obj = new Object();</code>"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1683230526,"post_id":76176939,"comment_id":134339209,"body_markdown":"yes and yes - [this](https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously) might help.","body":"yes and yes - <a href=\"https://stackoverflow.com/questions/15438727/if-i-synchronized-two-methods-on-the-same-class-can-they-run-simultaneously\">this</a> might help."}],"answers":[{"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683235269,"creation_date":1683235269,"answer_id":76177436,"question_id":76176939,"body_markdown":"Not quite.\r\n\r\n#1 *other threads cannot call these methods at the same time*\r\n\r\nOther threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.\r\n\r\nIts equivalent to `synchronized(this) { ... }`\r\n\r\n#2 *this means that no other threads will not be able to call this method*\r\n\r\nAny thread can call the run method, but only a single thread can acquire `obj`&#39;s lock and enter the synchronized block.\r\n\r\nSee:\r\n - [monitorenter][1]\r\n - [monitorexit][2]\r\n\r\nUsing synchronized forces the JVM to acquire and release the lock, even if there is no contention.\r\n\r\nYou should look at the package [java.util.concurrent.locks][3] for *optimistic* locking in #2, and [java.util.concurrent.atomic][4] for a better way of implementing #1.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\r\n  [2]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html","title":"Synchronized methods java, how it works","body":"<p>Not quite.</p>\n<p>#1 <em>other threads cannot call these methods at the same time</em></p>\n<p>Other threads CAN call the methods BUT they will be blocked from entering the method until the synchronized lock is released, also which thread accesses the lock is indeterminate.</p>\n<p>Its equivalent to <code>synchronized(this) { ... }</code></p>\n<p>#2 <em>this means that no other threads will not be able to call this method</em></p>\n<p>Any thread can call the run method, but only a single thread can acquire <code>obj</code>'s lock and enter the synchronized block.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorenter\" rel=\"nofollow noreferrer\">monitorenter</a></li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.monitorexit\" rel=\"nofollow noreferrer\">monitorexit</a></li>\n</ul>\n<p>Using synchronized forces the JVM to acquire and release the lock, even if there is no contention.</p>\n<p>You should look at the package <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/locks/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.locks</a> for <em>optimistic</em> locking in #2, and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/package-summary.html\" rel=\"nofollow noreferrer\">java.util.concurrent.atomic</a> for a better way of implementing #1.</p>\n"}],"owner":{"account_id":27566231,"reputation":27,"user_id":21038368,"display_name":"wydra__"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76177436,"answer_count":1,"score":0,"last_activity_date":1683235269,"creation_date":1683230042,"question_id":76176939,"body_markdown":"**1.**\r\n\r\n```\r\npublic class SynchronizedCounter\r\n {\r\nprivate int c = 0;`\r\n\r\n     public synchronized void increment() \r\n     {\r\n         c++;\r\n     }\r\n\r\n    public synchronized void decrement() \r\n    {\r\n        c--;\r\n    }\r\n\r\n    public synchronized int value() \r\n    {\r\n        return c;\r\n    }\r\n}\r\n```\r\n\r\n \r\n**2.**\r\n\r\n```\r\npublic class MyThread extends Thread\r\n {\r\n     private int threadId;\r\n     private final static Object obj = new Object();\r\n\r\n     public MyThread(int threadId)\r\n     {\r\n         this.threadId = threadId;\r\n     }\r\n\r\n     @Override\r\n     public void run()\r\n     {\r\n         synchronized (obj)\r\n         {\r\n             for (int i = 0; i &lt; 1000; i++)\r\n                 System.out.println(this.threadId);\r\n         }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI would like to present my reasoning and ask you to indicate whether it is correct.\r\n\r\n**Ex 1**\r\n All 3 methods are synchronized. They are non-static and synchronized on a given instance of that\r\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\r\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.\r\n\r\n**Ex 2**\r\n Here we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.\r\n","title":"Synchronized methods java, how it works","body":"<p><strong>1.</strong></p>\n<pre><code>public class SynchronizedCounter\n {\nprivate int c = 0;`\n\n     public synchronized void increment() \n     {\n         c++;\n     }\n\n    public synchronized void decrement() \n    {\n        c--;\n    }\n\n    public synchronized int value() \n    {\n        return c;\n    }\n}\n</code></pre>\n<p><strong>2.</strong></p>\n<pre><code>public class MyThread extends Thread\n {\n     private int threadId;\n     private final static Object obj = new Object();\n\n     public MyThread(int threadId)\n     {\n         this.threadId = threadId;\n     }\n\n     @Override\n     public void run()\n     {\n         synchronized (obj)\n         {\n             for (int i = 0; i &lt; 1000; i++)\n                 System.out.println(this.threadId);\n         }\n    }\n}\n</code></pre>\n<p>I would like to present my reasoning and ask you to indicate whether it is correct.</p>\n<p><strong>Ex 1</strong>\nAll 3 methods are synchronized. They are non-static and synchronized on a given instance of that\nclass. This means that if we have an object c1 of class SynchronizedCounter then if thread1\nexecutes, for example, the increment method then this method as well as all other synchronized methods are blocked for other threads,  other threads cannot call these methods at the same time.</p>\n<p><strong>Ex 2</strong>\nHere we are blocking the body of the run method on the final, importantly, static obj object. By virtue of being static, it is a property of the class, and therefore shared by all objects of that class, static obj is a common monitor for all instances of MyThread. So if thread1 calls the run method it will block it on the obj object. And since the obj object is static ,this means that no other threads will not be able to call this method until the thread that blocked it unblocks it.</p>\n"},{"tags":["java","spring","multithreading","spring-boot","concurrency"],"comments":[{"owner":{"account_id":22046326,"reputation":1,"user_id":16311275,"display_name":"Robert Pho"},"score":0,"creation_date":1660007895,"post_id":73285524,"comment_id":129425901,"body_markdown":"Maybe this post can help you too.\nhttps://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well","body":"Maybe this post can help you too. <a href=\"https://stackoverflow.com/questions/54801769/what-purpose-of-the-spring-enableasync-annotation-and-how-to-use-it-well\" title=\"what purpose of the spring enableasync annotation and how to use it well\">stackoverflow.com/questions/54801769/&hellip;</a>"},{"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"score":0,"creation_date":1660054270,"post_id":73285524,"comment_id":129438719,"body_markdown":"Thanks! but if I only use `@EnableScheduling` without `@EnableAsync`, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)","body":"Thanks! but if I only use <code>@EnableScheduling</code> without <code>@EnableAsync</code>, how can the scheduled task run? (I suppose the scheduled task should run on a separate thread asyncrously)"},{"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"score":0,"creation_date":1679263691,"post_id":73285524,"comment_id":133685606,"body_markdown":"Similar question: https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together","body":"Similar question: <a href=\"https://stackoverflow.com/questions/14623092/using-spring-scheduled-and-async-together\" title=\"using spring scheduled and async together\">stackoverflow.com/questions/14623092/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7258992,"reputation":2411,"user_id":5536516,"accept_rate":86,"display_name":"nyg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683234998,"creation_date":1679263590,"answer_id":75785217,"question_id":73285524,"body_markdown":"I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.\r\n\r\n* First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. `Future&lt;?&gt;`).\r\n\r\n* Second, @EnableScheduling will look for a `TaskScheduler` to execute the @Scheduled methods, whereas @EnableAsync will look for a `TaskExecutor` to execute the @Async methods. The two are different things, Spring doc [says][1]:\r\n\r\n  &gt; The Spring Framework provides abstractions for the **asynchronous execution** and **scheduling** of tasks with the **TaskExecutor** and **TaskScheduler** interfaces, *respectively*.\r\n\r\n----------\r\n\r\nHowever, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation [shows][3] this example:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {}\r\n```\r\n\r\nIt can indeed be a bit confusing at first, but as they mention:\r\n\r\n&gt; You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.\r\n\r\nThe example is probably there if you want to do something like:\r\n\r\n```java\r\n@Configuration\r\n@EnableAsync\r\n@EnableScheduling\r\npublic class AppConfig {\r\n\r\n    @Async // requires @EnableAsync\r\n    public Future&lt;String&gt; asyncMethod(String data) {\r\n        // do something\r\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\r\n    }\r\n\r\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\r\n    public void everySecond() {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\n----------\r\n\r\nAs for your question, _how can the scheduled task run?_, the doc for [@EnableScheduling][2] says:\r\n\r\n&gt; By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a **local single-threaded default scheduler** will be created and used within the registrar.\r\n\r\nSo, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a `TaskScheduler` with a pool size greater than one:\r\n\r\n```java\r\n@Configuration\r\n@EnableScheduling\r\npublic class SchedulerContext {\r\n\r\n    @Bean\r\n    public TaskScheduler taskScheduler() {\r\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\r\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\r\n        scheduler.setPoolSize(10); // 1 is the default value\r\n        scheduler.initialize();\r\n        return scheduler;\r\n    }\r\n}\r\n```\r\n\r\n\r\n[1]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\r\n[2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\r\n[3]: https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I do not think @Async and @Scheduled are meant to be used on the same method, even if it does work.</p>\n<ul>\n<li><p>First, a @Scheduled method should return void and have no parameters (for obvious reasons), whereas an @Async method can have parameters and can return a value (i.e. <code>Future&lt;?&gt;</code>).</p>\n</li>\n<li><p>Second, @EnableScheduling will look for a <code>TaskScheduler</code> to execute the @Scheduled methods, whereas @EnableAsync will look for a <code>TaskExecutor</code> to execute the @Async methods. The two are different things, Spring doc <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling\" rel=\"nofollow noreferrer\">says</a>:</p>\n<blockquote>\n<p>The Spring Framework provides abstractions for the <strong>asynchronous execution</strong> and <strong>scheduling</strong> of tasks with the <strong>TaskExecutor</strong> and <strong>TaskScheduler</strong> interfaces, <em>respectively</em>.</p>\n</blockquote>\n</li>\n</ul>\n<hr />\n<p>However, it is possible to use @EnableAsync and @EnableScheduling on the same @Configuration class, depending on what you want to do. For example, the Spring documentation <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#scheduling-enable-annotation-support\" rel=\"nofollow noreferrer\">shows</a> this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {}\n</code></pre>\n<p>It can indeed be a bit confusing at first, but as they mention:</p>\n<blockquote>\n<p>You can pick and choose the relevant annotations for your application. For example, if you need only support for @Scheduled, you can omit @EnableAsync.</p>\n</blockquote>\n<p>The example is probably there if you want to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class AppConfig {\n\n    @Async // requires @EnableAsync\n    public Future&lt;String&gt; asyncMethod(String data) {\n        // do something\n        return CompletableFuture.completedFuture(&quot;finished&quot;);\n    }\n\n    @Scheduled(fixedRate = 1_000) // requires @EnableScheduling\n    public void everySecond() {\n        // do something\n    }\n}\n</code></pre>\n<hr />\n<p>As for your question, <em>how can the scheduled task run?</em>, the doc for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/EnableScheduling.html\" rel=\"nofollow noreferrer\">@EnableScheduling</a> says:</p>\n<blockquote>\n<p>By default, Spring will search for an associated scheduler definition: either a unique TaskScheduler bean in the context, or a TaskScheduler bean named &quot;taskScheduler&quot; otherwise; (…). If neither of the two is resolvable, a <strong>local single-threaded default scheduler</strong> will be created and used within the registrar.</p>\n</blockquote>\n<p>So, if you have multiple @Scheduled methods and want them to be able to execute in parallel, you need to define a <code>TaskScheduler</code> with a pool size greater than one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableScheduling\npublic class SchedulerContext {\n\n    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setThreadNamePrefix(&quot;sched-task-&quot;);\n        scheduler.setPoolSize(10); // 1 is the default value\n        scheduler.initialize();\n        return scheduler;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1975034,"reputation":961,"user_id":1773011,"accept_rate":85,"display_name":"lightrek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683234998,"creation_date":1660007369,"question_id":73285524,"body_markdown":"I have the following code using @EnableScheduling and @EnableAsync together:\r\n\r\n    @Configuration\r\n    @EnableAsync\r\n    @EnableScheduling\r\n    public class PollingAgent {\r\n    \r\n        @Async\r\n        @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\r\n        void checkAvailableAndStartJob() {\r\n            if(m_messageOnDemand) {\r\n                try {\r\n                    LOGGER.info(&quot;check job messages and start job if possible&quot;);\r\n                    jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\r\n                } catch (Exception e) {\r\n                    LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\nI think even without `@EnableAsync` and `@Async`, `checkAvailableAndStartJob` will be triggered asynchronously on a different thread, why we need them?\r\n","title":"Why need @EnableAsync annotation since @EnableScheduling already trigger scheduled task on a different thread asynchronously?","body":"<p>I have the following code using @EnableScheduling and @EnableAsync together:</p>\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class PollingAgent {\n\n    @Async\n    @Scheduled(fixedRate=INTERVAL_RATE, initialDelay = 10000) //setting an initial delay to let the beans get loaded\n    void checkAvailableAndStartJob() {\n        if(m_messageOnDemand) {\n            try {\n                LOGGER.info(&quot;check job messages and start job if possible&quot;);\n                jobIdOnDemandSubscriber.StartJobIfMessageAvailable(m_applicationContext);\n            } catch (Exception e) {\n                LOGGER.info(&quot;Scheduler run failed: &quot; + e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n<p>I think even without <code>@EnableAsync</code> and <code>@Async</code>, <code>checkAvailableAndStartJob</code> will be triggered asynchronously on a different thread, why we need them?</p>\n"},{"tags":["java","android","android-studio","gradle"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683236220,"answer_count":0,"score":0,"last_activity_date":1683234818,"creation_date":1683234818,"question_id":76177397,"body_markdown":"After upgrading to the latest version of android studio Flamingo, I am having the following problem.\r\n\r\nI also created an empty project from scratch, but it gives me problems.\r\n\r\nThe same problem is found here: https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\r\n\r\nCan you give me a hand?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nA problem occurred configuring root project &#39;My Application&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\r\n     Required by:\r\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\r\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\r\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;8.0&#39; but:\r\n          - Variant &#39;apiElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;javadocElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;runtimeElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n          - Variant &#39;sourcesElements&#39; capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;8.0&#39;)\r\n\r\n* Try:\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aYK1u.png","title":"Android No matching variant of com.android.tools.build:gradle:8.0.1 was found","body":"<p>After upgrading to the latest version of android studio Flamingo, I am having the following problem.</p>\n<p>I also created an empty project from scratch, but it gives me problems.</p>\n<p>The same problem is found here: <a href=\"https://stackoverflow.com/questions/76036154/not-able-to-find-compatible-version-of-embedded-java-version-and-gradle-tools-ve\">Not able to Find compatible version of embedded java version and gradle tools version for Android Studio Flamingo</a></p>\n<p>Can you give me a hand?</p>\n<p><a href=\"https://i.stack.imgur.com/aYK1u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aYK1u.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>A problem occurred configuring root project 'My Application'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not resolve com.android.tools.build:gradle:8.0.1.\n     Required by:\n         project : &gt; com.android.application:com.android.application.gradle.plugin:8.0.1\n         project : &gt; com.android.library:com.android.library.gradle.plugin:8.0.1\n      &gt; No matching variant of com.android.tools.build:gradle:8.0.1 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.0' but:\n          - Variant 'apiElements' capability com.android.tools.build:gradle:8.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'runtimeElements' capability com.android.tools.build:gradle:8.0.1 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n          - Variant 'sourcesElements' capability com.android.tools.build:gradle:8.0.1 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '8.0')\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1681888988,"post_id":76051402,"comment_id":134127797,"body_markdown":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem.","body":"In future it helps if you provide a complete example - your code is missing the Todo class. In any case the code shown works fine, so whatever is causing your issue is not related to this code. It sounds like a runtime issue - it can&#39;t find BaseStream. Since this class is part of the core Java runtime library, this suggests something odd is happening with either your classpath or your JRE. If you run Java with the -verbose:class flag it will display more info about the class-loading, which might help diagnose the problem."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681890462,"post_id":76051402,"comment_id":134128188,"body_markdown":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday.","body":"Thank you, so much for the help. I tried using jdk version-8 and the error got resolved but I tried switching back to jdk-17 and got the same mistake again. But, it was working perfectly fine till yesterday."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1681920279,"post_id":76051402,"comment_id":134135840,"body_markdown":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8.","body":"Do you mean it fails in jdk7 (that is jdk1.7) or it fails in jdk17? It sounds like you have used javac from jdk8 or higher and java runtime from before jdk8."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1681926379,"post_id":76051402,"comment_id":134137125,"body_markdown":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a [mre], that would be ideal.","body":"Please provide more information, such as operation system, exact JRE/JDK implementation (at compile-time and run-time), versions of dependencies, how you&#39;re compiling the project, how you&#39;re running the project, and so on. If you could reproduce this problem with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that would be ideal."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1681965576,"post_id":76051402,"comment_id":134142340,"body_markdown":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6.","body":"The operating system I am using is Windows 10 and I am using jdk version - 17.0.6, it is my workspace default JRE. The error is not shown while I am working on the 1.8 version, but the error shows up as soon as I switch from 1.8 to 17.0.6."},{"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"score":0,"creation_date":1682141835,"post_id":76051402,"comment_id":134172260,"body_markdown":"My problem got resolved.\nI am using Eclipse IDE.\nI deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine.","body":"My problem got resolved. I am using Eclipse IDE. I deleted the JDK version 17 from my IDE and then, I went to my particular project properties - Java Build Path - libraries and again added the JavaSE-17 and  I chose the Workspace default JRE (jdk-17.0.6) and now it&#39;s running fine."}],"owner":{"account_id":25961096,"reputation":9,"user_id":19677705,"display_name":"Sankalp Nikam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":250,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683234674,"creation_date":1681886145,"question_id":76051402,"body_markdown":"This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.\r\n```\r\npackage com.springboot.myfirstwebapp.todo;\r\n\r\nimport java.time.LocalDate;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.function.Predicate;\r\n\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@Service\r\npublic class TodoService {\r\n\r\n\tprivate static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\r\n\t\r\n\tprivate static int todosCount = 0;\r\n\t\r\n\tstatic {\r\n\t\ttodos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\r\n\t\ttodos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\r\n\t}\r\n\t\r\n\tpublic List&lt;Todo&gt; findByUsername(String username)\r\n\t{\r\n\t\tPredicate&lt;? super Todo&gt; predicate = \r\n\t\t\t\ttodo -&gt; todo.getUsername().equalsIgnoreCase(username);\r\n\t\treturn todos.stream().filter(predicate).toList();\r\n\t}\r\n```\r\n\r\nThis code was working fine but all of sudden it started showing an error at \r\n\r\n```\r\nreturn todos.stream().filter(predicate).toList();\r\n```\r\n saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.\r\n\r\nI did RnD with the help of Youtube and didn&#39;t find any optimal solution for it. I also searched for this error in Stackover Flow but didn&#39;t get the answer.","title":"The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files","body":"<p>This is a code, I wrote for functional programming to check the username I will get from url with the username present in the database.</p>\n<pre><code>package com.springboot.myfirstwebapp.todo;\n\nimport java.time.LocalDate;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.function.Predicate;\n\nimport org.springframework.stereotype.Service;\n\nimport jakarta.validation.Valid;\n\n@Service\npublic class TodoService {\n\n    private static List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\n    \n    private static int todosCount = 0;\n    \n    static {\n        todos.add(new Todo(++todosCount, &quot;OCS pending&quot;, LocalDate.now().plusYears(1), false));\n        todos.add(new Todo(++todosCount, &quot;JXP pro&quot;, LocalDate.now().plusYears(2), false));\n        todos.add(new Todo(++todosCount, &quot;Module maintenance&quot;, LocalDate.now().plusYears(3), false));\n    }\n    \n    public List&lt;Todo&gt; findByUsername(String username)\n    {\n        Predicate&lt;? super Todo&gt; predicate = \n                todo -&gt; todo.getUsername().equalsIgnoreCase(username);\n        return todos.stream().filter(predicate).toList();\n    }\n</code></pre>\n<p>This code was working fine but all of sudden it started showing an error at</p>\n<pre><code>return todos.stream().filter(predicate).toList();\n</code></pre>\n<p>saying, &quot;The type java.util.stream.BaseStream cannot be resolved. It is indirectly referenced from required .class files&quot;.</p>\n<p>I did RnD with the help of Youtube and didn't find any optimal solution for it. I also searched for this error in Stackover Flow but didn't get the answer.</p>\n"},{"tags":["java","language-lawyer","jls","checked-exceptions"],"comments":[{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683236127,"post_id":76177332,"comment_id":134340230,"body_markdown":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. `throw (Throwable)t` then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type.","body":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. <code>throw (Throwable)t</code> then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1683275059,"post_id":76177332,"comment_id":134344903,"body_markdown":"@jon-hanson an intersting thing happens when you declare `public static void foo() throws IOException` because now the Java Compiler says &quot;error: unreported exception **IOException**; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there.","body":"@jon-hanson an intersting thing happens when you declare <code>public static void foo() throws IOException</code> because now the Java Compiler says &quot;error: unreported exception <b>IOException</b>; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there."},{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683275329,"post_id":76177332,"comment_id":134344959,"body_markdown":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked.","body":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1683275816,"post_id":76177332,"comment_id":134345061,"body_markdown":"@jon-hanson the compiler checks which exceptions can be thrown in the `try` block. No guess needed, the feature is in the Java 7 release notes: [Rethrowing Exceptions with More Inclusive Type Checking](https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow)","body":"@jon-hanson the compiler checks which exceptions can be thrown in the <code>try</code> block. No guess needed, the feature is in the Java 7 release notes: <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow\" rel=\"nofollow noreferrer\">Rethrowing Exceptions with More Inclusive Type Checking</a>"}],"owner":{"account_id":1764371,"reputation":401,"user_id":1610579,"accept_rate":71,"display_name":"MattDs17"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1683236464,"answer_count":0,"score":2,"last_activity_date":1683234485,"creation_date":1683233992,"question_id":76177332,"body_markdown":"JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its `throws` clause.\r\nIn the following code, `Throwable` is a checked exception (per JLS 11.1.1) being thrown in the `catch` clause of `main`:\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n\r\nHowever, javac compiles it without any errors.\r\nIf we change the signature of `foo` to declare that it `throws Throwable`, we get an error as expected:\r\n\r\n```\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    try {\r\n      foo();\r\n    } catch (Throwable t) {\r\n      throw t;\r\n    }\r\n  }\r\n\r\n  public static void foo() throws Throwable {\r\n    throw new RuntimeException();\r\n  }\r\n}\r\n```\r\n```\r\n$ javac Main.java\r\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\r\n      throw t;\r\n      ^\r\n1 error\r\n```\r\n\r\nIt seems like javac figures out (in the first example) that, since `foo` does not declare any checked exceptions, the caught `Throwable t` must be an unchecked exception, and so `main` only ever rethrows an unchecked exception, and thus it does not need a `throws` clause.\r\nIs there anything in the JLS that explains this behaviour?","title":"Why can a caught Throwable be rethrown without declaring Throwable in the method&#39;s throws clause?","body":"<p>JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its <code>throws</code> clause.\nIn the following code, <code>Throwable</code> is a checked exception (per JLS 11.1.1) being thrown in the <code>catch</code> clause of <code>main</code>:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<p>However, javac compiles it without any errors.\nIf we change the signature of <code>foo</code> to declare that it <code>throws Throwable</code>, we get an error as expected:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() throws Throwable {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<pre><code>$ javac Main.java\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\n      throw t;\n      ^\n1 error\n</code></pre>\n<p>It seems like javac figures out (in the first example) that, since <code>foo</code> does not declare any checked exceptions, the caught <code>Throwable t</code> must be an unchecked exception, and so <code>main</code> only ever rethrows an unchecked exception, and thus it does not need a <code>throws</code> clause.\nIs there anything in the JLS that explains this behaviour?</p>\n"},{"tags":["java","android-studio","arduino","bluetooth","hc-05"],"answers":[{"tags":[],"owner":{"account_id":23471229,"reputation":656,"user_id":17524723,"display_name":"Peter Plesn&#237;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648885505,"creation_date":1648832282,"answer_id":71710443,"question_id":71706008,"body_markdown":"Two reasons:\r\n- packet data transmition by BT protocol. If slave have buffered only one char and master make transmit request than slave send only one char\r\n- multitasking in android OS. Your `run` function not run whole time. There is many threads and proccesses which compete for hw cores. During `run` is suspended many packets can arrive.\r\n\r\nYou must count that stream not deliver data continously","title":"Text send via Bluetooth is broken up by first character on the receiving end?","body":"<p>Two reasons:</p>\n<ul>\n<li>packet data transmition by BT protocol. If slave have buffered only one char and master make transmit request than slave send only one char</li>\n<li>multitasking in android OS. Your <code>run</code> function not run whole time. There is many threads and proccesses which compete for hw cores. During <code>run</code> is suspended many packets can arrive.</li>\n</ul>\n<p>You must count that stream not deliver data continously</p>\n"}],"owner":{"account_id":23859708,"reputation":1,"user_id":17862824,"display_name":"Mustafa Jawad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683233780,"creation_date":1648811524,"question_id":71706008,"body_markdown":"I programmed a Bluetooth messaging app, the app works correctly when it connects and pairs with another phone, but when with HC-05 it connects, I get the received message as a syllable (first letter and then the rest of the letters) so what is the reason for that?\r\n\r\n[Screenshot My Android App of BTChat][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5kU3g.jpg\r\n\r\nthis my code :\r\n\r\n    private class ConnectedThread extends Thread {\r\n    private final BluetoothSocket mmSocket;\r\n    private final InputStream mmInStream;\r\n    private final OutputStream mmOutStream;\r\n    public ConnectedThread(BluetoothSocket socket, String socketType) {\r\n        mmSocket = socket;\r\n        InputStream tmpIn = null;\r\n        OutputStream tmpOut = null;\r\n        try {\r\n            tmpIn = socket.getInputStream();\r\n            tmpOut = socket.getOutputStream();\r\n        } catch (IOException e) {\r\n\r\n        }\r\n        mmInStream = tmpIn;\r\n        mmOutStream = tmpOut;\r\n        mState = STATE_CONNECTED;\r\n    }\r\n\r\n    public void run() {\r\n        byte[] buffer = new byte[1024];\r\n        int bytes;\r\n        while (mState == STATE_CONNECTED) {\r\n            try {\r\n                bytes = mmInStream.read(buffer);\r\n                //***NEW Edition\r\n                String readMessage = new String(buffer, 0, bytes);\r\n                mHandler.obtainMessage(Constants.MESSAGE_READ, bytes, -1, buffer).sendToTarget();\r\n            } catch (IOException e) {\r\n                connectionLost();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Text send via Bluetooth is broken up by first character on the receiving end?","body":"<p>I programmed a Bluetooth messaging app, the app works correctly when it connects and pairs with another phone, but when with HC-05 it connects, I get the received message as a syllable (first letter and then the rest of the letters) so what is the reason for that?</p>\n<p><a href=\"https://i.stack.imgur.com/5kU3g.jpg\" rel=\"nofollow noreferrer\">Screenshot My Android App of BTChat</a></p>\n<p>this my code :</p>\n<pre><code>private class ConnectedThread extends Thread {\nprivate final BluetoothSocket mmSocket;\nprivate final InputStream mmInStream;\nprivate final OutputStream mmOutStream;\npublic ConnectedThread(BluetoothSocket socket, String socketType) {\n    mmSocket = socket;\n    InputStream tmpIn = null;\n    OutputStream tmpOut = null;\n    try {\n        tmpIn = socket.getInputStream();\n        tmpOut = socket.getOutputStream();\n    } catch (IOException e) {\n\n    }\n    mmInStream = tmpIn;\n    mmOutStream = tmpOut;\n    mState = STATE_CONNECTED;\n}\n\npublic void run() {\n    byte[] buffer = new byte[1024];\n    int bytes;\n    while (mState == STATE_CONNECTED) {\n        try {\n            bytes = mmInStream.read(buffer);\n            //***NEW Edition\n            String readMessage = new String(buffer, 0, bytes);\n            mHandler.obtainMessage(Constants.MESSAGE_READ, bytes, -1, buffer).sendToTarget();\n        } catch (IOException e) {\n            connectionLost();\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1683204522,"post_id":76173328,"comment_id":134332806,"body_markdown":"Why are you importing xml data types to use with json? Use LocalDate to get calendar information","body":"Why are you importing xml data types to use with json? Use LocalDate to get calendar information"},{"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"score":0,"creation_date":1683204750,"post_id":76173328,"comment_id":134332875,"body_markdown":"No I have one java class which has date attribute of this XMLGregorianCalendar type. So I just created one sample code as I can&#39;t paste entire code here. But its a java bean object that I want to convert to JSON. And worst part is this is existing code so I can&#39;t change it","body":"No I have one java class which has date attribute of this XMLGregorianCalendar type. So I just created one sample code as I can&#39;t paste entire code here. But its a java bean object that I want to convert to JSON. And worst part is this is existing code so I can&#39;t change it"}],"answers":[{"comments":[{"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"score":0,"creation_date":1683206491,"post_id":76173529,"comment_id":134333410,"body_markdown":"Nope. Didn&#39;t work","body":"Nope. Didn&#39;t work"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683208730,"post_id":76173529,"comment_id":134334075,"body_markdown":"Is `XMLGregorianCalendar` public and do all of it&#39;s values have getter/setters?","body":"Is <code>XMLGregorianCalendar</code> public and do all of it&#39;s values have getter/setters?"},{"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"score":0,"creation_date":1683211400,"post_id":76173529,"comment_id":134334831,"body_markdown":"Neither XMLGregorianCalendar nor XMLGregorianCalendarImpl are custom code. It&#39;s just some class provided by jdk.","body":"Neither XMLGregorianCalendar nor XMLGregorianCalendarImpl are custom code. It&#39;s just some class provided by jdk."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683224225,"creation_date":1683205384,"answer_id":76173529,"question_id":76173328,"body_markdown":"I&#39;m guessing that you are using Java 17+.\r\n\r\nAs of Java 17, the module system is enforced and java-xml doesn&#39;t export the internal classes for other modules to use.\r\n\r\nSee: https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java\r\n\r\nThis is why `XMLGregorianCalendarImpl`&#39;s fields are not available to the `GsonBuilder`.\r\n\r\nhttps://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java\r\n\r\nI don&#39;t think that `GsonBuilder` can use an object&#39;s getters and setters.\r\n\r\nSo you need to make a proper TypeAdapter should map all the getters and setters in `XMLGregorianCalendar` to an object that can be serialized, something like `LocalDate`.\r\n\r\nhttps://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java\r\n\r\nOr you simply switch from `XMLGregorianCalendar` to `LocalDate`?","title":"JsonException during converting Java object to JSON","body":"<p>I'm guessing that you are using Java 17+.</p>\n<p>As of Java 17, the module system is enforced and java-xml doesn't export the internal classes for other modules to use.</p>\n<p>See: <a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/module-info.java</a></p>\n<p>This is why <code>XMLGregorianCalendarImpl</code>'s fields are not available to the <code>GsonBuilder</code>.</p>\n<p><a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/com/sun/org/apache/xerces/internal/jaxp/datatype/XMLGregorianCalendarImpl.java</a></p>\n<p>I don't think that <code>GsonBuilder</code> can use an object's getters and setters.</p>\n<p>So you need to make a proper TypeAdapter should map all the getters and setters in <code>XMLGregorianCalendar</code> to an object that can be serialized, something like <code>LocalDate</code>.</p>\n<p><a href=\"https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk17/blob/74007890bb9a3fa3a65683a3f480e399f2b1a0b6/src/java.xml/share/classes/javax/xml/datatype/XMLGregorianCalendar.java</a></p>\n<p>Or you simply switch from <code>XMLGregorianCalendar</code> to <code>LocalDate</code>?</p>\n"},{"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683233100,"creation_date":1683233100,"answer_id":76177244,"question_id":76173328,"body_markdown":"The reason why Gson is unable to make fields of that class accessible is a combination of the [JDK restricting access to implementation details](https://openjdk.org/jeps/403) and Gson not having a built-in adapter for `XMLGregorianCalendar` so it falls back to using reflection.\r\n\r\nThough it sounds your question is rather why your custom adapter is not called. The answer for this is most likely that (as seen in the exception message) you are not actually serializing an object of type `XMLGregorianCalendar`, but a JDK internal subclass. However, `GsonBuilder.registerTypeAdapter` which you are using registers the adapter for _that specific class_ and not for subclasses.\r\n\r\nTo solve this you should use [`GsonBuilder.registerTypeHierarchyAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#registerTypeHierarchyAdapter(java.lang.Class,java.lang.Object)) instead.","title":"JsonException during converting Java object to JSON","body":"<p>The reason why Gson is unable to make fields of that class accessible is a combination of the <a href=\"https://openjdk.org/jeps/403\" rel=\"nofollow noreferrer\">JDK restricting access to implementation details</a> and Gson not having a built-in adapter for <code>XMLGregorianCalendar</code> so it falls back to using reflection.</p>\n<p>Though it sounds your question is rather why your custom adapter is not called. The answer for this is most likely that (as seen in the exception message) you are not actually serializing an object of type <code>XMLGregorianCalendar</code>, but a JDK internal subclass. However, <code>GsonBuilder.registerTypeAdapter</code> which you are using registers the adapter for <em>that specific class</em> and not for subclasses.</p>\n<p>To solve this you should use <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/GsonBuilder.html#registerTypeHierarchyAdapter(java.lang.Class,java.lang.Object)\" rel=\"nofollow noreferrer\"><code>GsonBuilder.registerTypeHierarchyAdapter</code></a> instead.</p>\n"}],"owner":{"account_id":7974315,"reputation":13,"user_id":6017978,"display_name":"A Hybris Dev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76177244,"answer_count":2,"score":1,"last_activity_date":1683233100,"creation_date":1683204162,"question_id":76173328,"body_markdown":"Somehow below code is failing even after creating a custom type adapter. Its working for other type like string. Any idea how can I resolve the issue. Below is the code:\r\n\r\n```\r\npackage com;\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.xml.datatype.DatatypeConfigurationException;\r\nimport javax.xml.datatype.DatatypeFactory;\r\nimport javax.xml.datatype.XMLGregorianCalendar;\r\n\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.GsonBuilder;\r\nimport com.google.gson.TypeAdapter;\r\nimport com.google.gson.stream.JsonReader;\r\nimport com.google.gson.stream.JsonWriter;\r\n\r\npublic class DateConversion {\r\n\r\n\tpublic static void main(String[] args) throws DatatypeConfigurationException {\r\n\r\n\t\tXMLGregorianCalendar date = DatatypeFactory.newInstance().newXMLGregorianCalendar();\r\n\r\n\t\tRequest req = new Request();\r\n\t\treq.setDate(date);\r\n\t\tTypeAdapter&lt;XMLGregorianCalendar&gt; adapter = new TypeAdapter&lt;XMLGregorianCalendar&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void write(JsonWriter writer, XMLGregorianCalendar value) throws IOException {\r\n\t\t\t\tSystem.out.println(&quot;Inside write&quot;);\r\n\t\t\t\tif(value==null) {\r\n\t\t\t\t\twriter.nullValue();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\twriter.value(&quot;value&quot;);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic XMLGregorianCalendar read(JsonReader reader) throws IOException {\r\n\t\t\t\tSystem.out.println(&quot;Inside read&quot;);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t};\r\n\t\tGson gsonBuilder = (new GsonBuilder()).registerTypeAdapter(XMLGregorianCalendar.class, adapter).serializeNulls().create();\r\n\t\tSystem.out.println(gsonBuilder.toJson(req));\r\n\t}\r\n\r\n}\r\n\r\nclass Request {\r\n\tprivate XMLGregorianCalendar date;\r\n\r\n\tpublic XMLGregorianCalendar getDate() {\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic void setDate(XMLGregorianCalendar date) {\r\n\t\tthis.date = date;\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd below is the error stacktrace:\r\n\r\n    Exception in thread &quot;main&quot; com.google.gson.JsonIOException: Failed making field &#39;com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl#eon&#39; accessible; either change its visibility or write a custom TypeAdapter for its declaring type\r\n\r\n\r\nJava object should be successfully parsed to JSON but it is not working","title":"JsonException during converting Java object to JSON","body":"<p>Somehow below code is failing even after creating a custom type adapter. Its working for other type like string. Any idea how can I resolve the issue. Below is the code:</p>\n<pre><code>package com;\n\nimport java.io.IOException;\n\nimport javax.xml.datatype.DatatypeConfigurationException;\nimport javax.xml.datatype.DatatypeFactory;\nimport javax.xml.datatype.XMLGregorianCalendar;\n\nimport com.google.gson.Gson;\nimport com.google.gson.GsonBuilder;\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonWriter;\n\npublic class DateConversion {\n\n    public static void main(String[] args) throws DatatypeConfigurationException {\n\n        XMLGregorianCalendar date = DatatypeFactory.newInstance().newXMLGregorianCalendar();\n\n        Request req = new Request();\n        req.setDate(date);\n        TypeAdapter&lt;XMLGregorianCalendar&gt; adapter = new TypeAdapter&lt;XMLGregorianCalendar&gt;() {\n\n            @Override\n            public void write(JsonWriter writer, XMLGregorianCalendar value) throws IOException {\n                System.out.println(&quot;Inside write&quot;);\n                if(value==null) {\n                    writer.nullValue();\n                    return;\n                }\n                writer.value(&quot;value&quot;);\n\n            }\n\n            @Override\n            public XMLGregorianCalendar read(JsonReader reader) throws IOException {\n                System.out.println(&quot;Inside read&quot;);\n                return null;\n            }\n        };\n        Gson gsonBuilder = (new GsonBuilder()).registerTypeAdapter(XMLGregorianCalendar.class, adapter).serializeNulls().create();\n        System.out.println(gsonBuilder.toJson(req));\n    }\n\n}\n\nclass Request {\n    private XMLGregorianCalendar date;\n\n    public XMLGregorianCalendar getDate() {\n        return date;\n    }\n\n    public void setDate(XMLGregorianCalendar date) {\n        this.date = date;\n    }\n}\n\n</code></pre>\n<p>And below is the error stacktrace:</p>\n<pre><code>Exception in thread &quot;main&quot; com.google.gson.JsonIOException: Failed making field 'com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl#eon' accessible; either change its visibility or write a custom TypeAdapter for its declaring type\n</code></pre>\n<p>Java object should be successfully parsed to JSON but it is not working</p>\n"},{"tags":["java","for-loop","iterator","binary-search-tree","tree-traversal"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683232626,"post_id":76177181,"comment_id":134339590,"body_markdown":"What&#39;s `BinarySearchTree.root`?","body":"What&#39;s <code>BinarySearchTree.root</code>?"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683232668,"post_id":76177181,"comment_id":134339598,"body_markdown":"And what *should* the type parameter be for `BSTIterator&lt;&gt;(null, 0)`?","body":"And what <i>should</i> the type parameter be for <code>BSTIterator&lt;&gt;(null, 0)</code>?"},{"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"score":0,"creation_date":1683233272,"post_id":76177181,"comment_id":134339713,"body_markdown":"the root is the first element in a perfect balanced binary tree... essentially the median of the key values. The type parameter for BSTIterator&lt;&gt;(null,0) is when the root is null and therefore there is no tree to traverse.","body":"the root is the first element in a perfect balanced binary tree... essentially the median of the key values. The type parameter for BSTIterator&lt;&gt;(null,0) is when the root is null and therefore there is no tree to traverse."},{"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"score":0,"creation_date":1683233333,"post_id":76177181,"comment_id":134339724,"body_markdown":"@JohnBollinger I forgot to mention your name in the above post. Thank you","body":"@JohnBollinger I forgot to mention your name in the above post. Thank you"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683233364,"post_id":76177181,"comment_id":134339731,"body_markdown":"Weirdly, you use `&lt;T&gt;` on this method and `&lt;E&gt;` on the other class.  Is that an issue?  Also should we assume that you want the return type of `iterator()` to match this definition: `public Iterator&lt;E&gt; iterator() `?","body":"Weirdly, you use <code>&lt;T&gt;</code> on this method and <code>&lt;E&gt;</code> on the other class.  Is that an issue?  Also should we assume that you want the return type of <code>iterator()</code> to match this definition: <code>public Iterator&lt;E&gt; iterator() </code>?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1683233547,"post_id":76177181,"comment_id":134339768,"body_markdown":"Hmm: `BSTIterator class:  public class BSTIterator&lt;E&gt;` So BSTIterator is a top level class, not a nested class inside of BinarySearchTree.  I haven&#39;t tested this idea, but I wonder if there&#39;s no way for the `iterator()` method to connect the `&lt;E&gt;` and the `&lt;T&gt;` to be the same variable...","body":"Hmm: <code>BSTIterator class:  public class BSTIterator&lt;E&gt;</code> So BSTIterator is a top level class, not a nested class inside of BinarySearchTree.  I haven&#39;t tested this idea, but I wonder if there&#39;s no way for the <code>iterator()</code> method to connect the <code>&lt;E&gt;</code> and the <code>&lt;T&gt;</code> to be the same variable..."},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1683238692,"post_id":76177181,"comment_id":134340579,"body_markdown":"I wasn&#39;t asking what `root` *models*.  I meant what is its *type*?  What is the return type of its `getData()` method?  What *is* it?","body":"I wasn&#39;t asking what <code>root</code> <i>models</i>.  I meant what is its <i>type</i>?  What is the return type of its <code>getData()</code> method?  What <i>is</i> it?"}],"owner":{"account_id":26953027,"reputation":1,"user_id":20521922,"display_name":"Sandy Gied"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683232315,"creation_date":1683232264,"question_id":76177181,"body_markdown":"**BSTIterator class:**\r\n\r\n    public class BSTIterator&lt;E&gt; implements Iterator&lt;E&gt;, Iterable&lt;E&gt; {\r\n\t\r\n\tprotected E rootData;\r\n    protected int size;\r\n    protected int counter;\r\n    protected TraversalType traversalType;\r\n    protected LLQ&lt;E&gt; traversalQueue;\r\n\r\n    public BSTIterator(E rootData, int size) {\r\n        this.rootData = rootData;\r\n        this.size = size;\r\n        this.counter = 0;\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        return counter &lt; size;\r\n    }\r\n\r\n    @Override\r\n    public E next() {\r\n        counter++;\r\n        return traversalQueue.dequeue();\r\n    }\r\n\r\n    @Override\r\n    public Iterator&lt;E&gt; iterator() {\r\n        return this;\r\n    }\r\n\r\n    public void setTraversalType(TraversalType traversalType, LLQ&lt;E&gt; traversalQueue) {\r\n        this.traversalType = traversalType;\r\n        this.traversalQueue = traversalQueue;\r\n    }\r\n}\r\n\r\n\r\n**Method in BinarySearchTree Class:**\r\n \r\n        public Iterator&lt;T&gt; iterator() {\r\n\t\tif (root == null) {\r\n\t        return new BSTIterator&lt;&gt;(null, 0);\r\n\t    } else {\r\n\t        switch (traversalType) {\r\n\t            case INORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, inOrderQ);\r\n\t            case PREORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, preOrderQ);\r\n\t            case POSTORDER:\r\n\t                return new BSTIterator&lt;&gt;(root.getData(), size, postOrderQ);\r\n\t            default:\r\n\t                 return new BSTIterator&lt;&gt;(null, 0);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\r\n\r\nI am trying to make a method that supports enhanced for loop traversal for binary search tree. I am getting an error when instantiating a new BSTIterator object that states cannot infer type arguments.","title":"BinarySearchTree iterator","body":"<p><strong>BSTIterator class:</strong></p>\n<pre><code>public class BSTIterator&lt;E&gt; implements Iterator&lt;E&gt;, Iterable&lt;E&gt; {\n\nprotected E rootData;\nprotected int size;\nprotected int counter;\nprotected TraversalType traversalType;\nprotected LLQ&lt;E&gt; traversalQueue;\n\npublic BSTIterator(E rootData, int size) {\n    this.rootData = rootData;\n    this.size = size;\n    this.counter = 0;\n}\n\n@Override\npublic boolean hasNext() {\n    return counter &lt; size;\n}\n\n@Override\npublic E next() {\n    counter++;\n    return traversalQueue.dequeue();\n}\n\n@Override\npublic Iterator&lt;E&gt; iterator() {\n    return this;\n}\n\npublic void setTraversalType(TraversalType traversalType, LLQ&lt;E&gt; traversalQueue) {\n    this.traversalType = traversalType;\n    this.traversalQueue = traversalQueue;\n}\n</code></pre>\n<p>}</p>\n<p><strong>Method in BinarySearchTree Class:</strong></p>\n<pre><code>    public Iterator&lt;T&gt; iterator() {\n    if (root == null) {\n        return new BSTIterator&lt;&gt;(null, 0);\n    } else {\n        switch (traversalType) {\n            case INORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, inOrderQ);\n            case PREORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, preOrderQ);\n            case POSTORDER:\n                return new BSTIterator&lt;&gt;(root.getData(), size, postOrderQ);\n            default:\n                 return new BSTIterator&lt;&gt;(null, 0);\n        }\n    }\n}\n</code></pre>\n<p>I am trying to make a method that supports enhanced for loop traversal for binary search tree. I am getting an error when instantiating a new BSTIterator object that states cannot infer type arguments.</p>\n"},{"tags":["java","ms-word","apache-poi"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1683235965,"post_id":76177188,"comment_id":134340202,"body_markdown":"Also consider `AffineTransformOp` to rotate and scale, for [example](https://stackoverflow.com/a/2246484/230513).","body":"Also consider <code>AffineTransformOp</code> to rotate and scale, for <a href=\"https://stackoverflow.com/a/2246484/230513\">example</a>."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1683261378,"post_id":76177188,"comment_id":134342800,"body_markdown":"How would you create that kind of shape using Microsoft Word GUI?","body":"How would you create that kind of shape using Microsoft Word GUI?"}],"owner":{"account_id":15194394,"reputation":63,"user_id":10964215,"display_name":"hido"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683232309,"creation_date":1683232309,"question_id":76177188,"body_markdown":"I&#39;m trying to add a 2 colored circle to my document using Apache POI 5.2.3.\r\nThe circle should look like this:[![enter image description here][1]][1]\r\n\r\nSo far the closest I got to adding a shape to the document was using the code in this [answer][2] but it adds a different shape than a circle. I tried following the rules explained [here][3] but didn&#39;t manage to make a circle. The other issue I have is that I need my circle to have 2 colors, one in each half of the circle and but I don&#39;t know how to color the shape in more than 1 color.\r\nHow can I add a 2 colored circle to the doc?\r\n## Some workaround ##\r\n1 workaround I found and I rather not use it unless it&#39;s the last result, is generating an image with 2 colors and then adding the image to the doc. I rather not use it because I want to be able to edit the shape in the final Document generated.\r\nthe code for image generation:\r\n\r\n    public void drawCircle(XWPFDocument document) {\r\n\t\tXWPFParagraph paragraph = document.createParagraph();\r\n\t\tXWPFRun run = paragraph.createRun();\r\n\r\n\t\ttry {\r\n\t\t\tBufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);\r\n\t\t\tGraphics2D g2d = image.createGraphics();\r\n\t\t\tColor color1 = Color.RED;\r\n\t\t\tColor color2 = Color.BLUE;\r\n\t\t\tGradientPaint gp1 = new GradientPaint(0, 0, color1, 0, 20, color2);\r\n\t\t\tGradientPaint gp2 = new GradientPaint(0, 20, color2, 0, 40, color1);\r\n\t\t\tg2d.setColor(color1);\r\n\t\t\tg2d.fill(new Arc2D.Double(0, 0, 100, 100, 90, 180, Arc2D.PIE));\r\n\t\t\tg2d.setColor(color2);\r\n\t\t\tg2d.fill(new Arc2D.Double(0, 0, 100, 100, -90, 180, Arc2D.PIE));\r\n\t\t\tg2d.dispose();\r\n\r\n\t\t\tFile file = new File(&quot;circle.png&quot;);\r\n\t\t\tImageIO.write(image, &quot;png&quot;, file);\r\n\r\n\t\t\tInputStream inputStream = new FileInputStream(file);\r\n\t\t\tString imageId = document.addPictureData(inputStream, XWPFDocument.PICTURE_TYPE_PNG);\r\n\r\n\t\t\trun.addPicture(new FileInputStream(file),\r\n\t\t\t\t\tXWPFDocument.PICTURE_TYPE_PNG,\r\n\t\t\t\t\t&quot;circle.png&quot;,\r\n\t\t\t\t\tUnits.toEMU(30),\r\n\t\t\t\t\tUnits.toEMU(30));\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n  [1]: https://i.stack.imgur.com/K4GeQ.png\r\n  [2]: https://stackoverflow.com/a/53857670/10964215\r\n  [3]: https://stackoverflow.com/a/70607928/10964215","title":"Java Creating colored circle in XWPFDocument using Apache POI","body":"<p>I'm trying to add a 2 colored circle to my document using Apache POI 5.2.3.\nThe circle should look like this:<a href=\"https://i.stack.imgur.com/K4GeQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K4GeQ.png\" alt=\"enter image description here\" /></a></p>\n<p>So far the closest I got to adding a shape to the document was using the code in this <a href=\"https://stackoverflow.com/a/53857670/10964215\">answer</a> but it adds a different shape than a circle. I tried following the rules explained <a href=\"https://stackoverflow.com/a/70607928/10964215\">here</a> but didn't manage to make a circle. The other issue I have is that I need my circle to have 2 colors, one in each half of the circle and but I don't know how to color the shape in more than 1 color.\nHow can I add a 2 colored circle to the doc?</p>\n<h2>Some workaround</h2>\n<p>1 workaround I found and I rather not use it unless it's the last result, is generating an image with 2 colors and then adding the image to the doc. I rather not use it because I want to be able to edit the shape in the final Document generated.\nthe code for image generation:</p>\n<pre><code>public void drawCircle(XWPFDocument document) {\n    XWPFParagraph paragraph = document.createParagraph();\n    XWPFRun run = paragraph.createRun();\n\n    try {\n        BufferedImage image = new BufferedImage(100, 100, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = image.createGraphics();\n        Color color1 = Color.RED;\n        Color color2 = Color.BLUE;\n        GradientPaint gp1 = new GradientPaint(0, 0, color1, 0, 20, color2);\n        GradientPaint gp2 = new GradientPaint(0, 20, color2, 0, 40, color1);\n        g2d.setColor(color1);\n        g2d.fill(new Arc2D.Double(0, 0, 100, 100, 90, 180, Arc2D.PIE));\n        g2d.setColor(color2);\n        g2d.fill(new Arc2D.Double(0, 0, 100, 100, -90, 180, Arc2D.PIE));\n        g2d.dispose();\n\n        File file = new File(&quot;circle.png&quot;);\n        ImageIO.write(image, &quot;png&quot;, file);\n\n        InputStream inputStream = new FileInputStream(file);\n        String imageId = document.addPictureData(inputStream, XWPFDocument.PICTURE_TYPE_PNG);\n\n        run.addPicture(new FileInputStream(file),\n                XWPFDocument.PICTURE_TYPE_PNG,\n                &quot;circle.png&quot;,\n                Units.toEMU(30),\n                Units.toEMU(30));\n\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","awt","screen-resolution","imageicon"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1641931849,"post_id":70672430,"comment_id":124936144,"body_markdown":"*even at 100% the scaling is not perfect;* - there is no scaling done at 100%. The issue would be your image. Try using antialiasing when creating the image. *Is there any way to provide a higher-resolution image* - not what you asked, but check out: https://stackoverflow.com/questions/65742162/how-to-fix-the-blurry-image-when-i-run-my-java-swing-project/65742492#65742492 for a solution that prevents the icon from scaling. Maybe you can modify the logic to use Icons of different resolutions depending on the scaling? So maybe you use a 200% icon as the base and then scale down when required.","body":"<i>even at 100% the scaling is not perfect;</i> - there is no scaling done at 100%. The issue would be your image. Try using antialiasing when creating the image. <i>Is there any way to provide a higher-resolution image</i> - not what you asked, but check out: <a href=\"https://stackoverflow.com/questions/65742162/how-to-fix-the-blurry-image-when-i-run-my-java-swing-project/65742492#65742492\" title=\"how to fix the blurry image when i run my java swing project\">stackoverflow.com/questions/65742162/&hellip;</a> for a solution that prevents the icon from scaling. Maybe you can modify the logic to use Icons of different resolutions depending on the scaling? So maybe you use a 200% icon as the base and then scale down when required."},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1641935867,"post_id":70672430,"comment_id":124937459,"body_markdown":"@camickr Thanks, I have changed &quot;scaling&quot; to &quot;image quality&quot; in the last sentence now. Thanks also for the link. If the application is scaled due to system settings, I also want the icon to be larger, in line with the rest of the GUI, just not with the bad quality it has at the lower resolution. I have already tried reading out the scaling factor and then supplied an image with a larger resolution. But it then appeared too large because it was first scaled by me and then again by the OS. Would your solution allow me to prevent that second scaling from happening?","body":"@camickr Thanks, I have changed &quot;scaling&quot; to &quot;image quality&quot; in the last sentence now. Thanks also for the link. If the application is scaled due to system settings, I also want the icon to be larger, in line with the rest of the GUI, just not with the bad quality it has at the lower resolution. I have already tried reading out the scaling factor and then supplied an image with a larger resolution. But it then appeared too large because it was first scaled by me and then again by the OS. Would your solution allow me to prevent that second scaling from happening?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1641936366,"post_id":70672430,"comment_id":124937615,"body_markdown":"No the solution will always display the icon at its original size. My suggestion was that you can use the concept and create a `ScaledIcon` class. So you create your image at 200%. Then you scale the image down to the current scaling factor. The code provided shows how to get the current scaling factor. So I would create a map with a key of the scaling factor and the value the image. The painting logic would check the map to see if you have the scaled image. If not, then you create it and add it to the map. Then you use the scaled image and paint it.","body":"No the solution will always display the icon at its original size. My suggestion was that you can use the concept and create a <code>ScaledIcon</code> class. So you create your image at 200%. Then you scale the image down to the current scaling factor. The code provided shows how to get the current scaling factor. So I would create a map with a key of the scaling factor and the value the image. The painting logic would check the map to see if you have the scaled image. If not, then you create it and add it to the map. Then you use the scaled image and paint it."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1641989925,"post_id":70672430,"comment_id":124951530,"body_markdown":"For the [frame icons](https://stackoverflow.com/a/18224185/418556) you certainly can!","body":"For the <a href=\"https://stackoverflow.com/a/18224185/418556\">frame icons</a> you certainly can!"},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1641994188,"post_id":70672430,"comment_id":124953465,"body_markdown":"@camickr I am not sure I understand how the `ScaledIcon` will do the trick. I do understand how to put different versions of the icon into a map and how to read the scaling factor of the OS. But I don&#39;t understand how it would help to tell the `JButton` or `JLabel` which one to pick. I guess it would help to know how these classes typically access the image from the `ImageIcon` object. Then one could extend that class and replace the method that does it. Would I have to replace `getImage()` to return a different version? How does the `JButton` etc then know that it shouldn&#39;t rescale it again?","body":"@camickr I am not sure I understand how the <code>ScaledIcon</code> will do the trick. I do understand how to put different versions of the icon into a map and how to read the scaling factor of the OS. But I don&#39;t understand how it would help to tell the <code>JButton</code> or <code>JLabel</code> which one to pick. I guess it would help to know how these classes typically access the image from the <code>ImageIcon</code> object. Then one could extend that class and replace the method that does it. Would I have to replace <code>getImage()</code> to return a different version? How does the <code>JButton</code> etc then know that it shouldn&#39;t rescale it again?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1642000555,"post_id":70672430,"comment_id":124956648,"body_markdown":"The component has nothing to do with it. In the painting method of the Icon you get the scaling factor and determine which one to pick and paint. That is why I referred you to the link above. It demonstrate how to get the scaling factor before doing the painting.","body":"The component has nothing to do with it. In the painting method of the Icon you get the scaling factor and determine which one to pick and paint. That is why I referred you to the link above. It demonstrate how to get the scaling factor before doing the painting."},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1644764852,"post_id":70672430,"comment_id":125687315,"body_markdown":"_You can see that even at 100% the image quality is not perfect; is there any way to improve that as well?_ This is because you *scale down* the original image from 240&#215;240 to 18&#215;18. If the original icon is in SVG format, render it to 18&#215;18. Or use SVG icon in your app; to do so, you&#39;ll need a library that can render SVG.","body":"<i>You can see that even at 100% the image quality is not perfect; is there any way to improve that as well?</i> This is because you <i>scale down</i> the original image from 240&#215;240 to 18&#215;18. If the original icon is in SVG format, render it to 18&#215;18. Or use SVG icon in your app; to do so, you&#39;ll need a library that can render SVG."}],"answers":[{"comments":[{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1644854735,"post_id":71101882,"comment_id":125709876,"body_markdown":"Interesting. Can you provide an amended version of the minimal example from the question on this basis?","body":"Interesting. Can you provide an amended version of the minimal example from the question on this basis?"},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1644858927,"post_id":71101882,"comment_id":125711495,"body_markdown":"@PhilipLeifeld Do you have the link to the SVG version of the beach icon?","body":"@PhilipLeifeld Do you have the link to the SVG version of the beach icon?"},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1644874475,"post_id":71101882,"comment_id":125716496,"body_markdown":"There you go: https://tabler-icons.io/static/tabler-icons/icons/beach.svg","body":"There you go: <a href=\"https://tabler-icons.io/static/tabler-icons/icons/beach.svg\" rel=\"nofollow noreferrer\">tabler-icons.io/static/tabler-icons/icons/beach.svg</a>"},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1645090246,"post_id":71101882,"comment_id":125779908,"body_markdown":"@PhilipLeifeld I added the sample code to the answer. Did you have a chance to try it?","body":"@PhilipLeifeld I added the sample code to the answer. Did you have a chance to try it?"},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":0,"creation_date":1645106627,"post_id":71101882,"comment_id":125786681,"body_markdown":"Sorry, I wasn&#39;t notified of the answer for some reason and have seen it just now. Thanks a lot. I&#39;ll give it a try until tomorrow and will report back. For clarification: Did you scale the PNG in a separate graphics program, open it in a text editor, and copy the contents, or how did you get those long strings? I assume I can just put the PNGs in the package and load them as images instead?","body":"Sorry, I wasn&#39;t notified of the answer for some reason and have seen it just now. Thanks a lot. I&#39;ll give it a try until tomorrow and will report back. For clarification: Did you scale the PNG in a separate graphics program, open it in a text editor, and copy the contents, or how did you get those long strings? I assume I can just put the PNGs in the package and load them as images instead?"},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1645112117,"post_id":71101882,"comment_id":125789160,"body_markdown":"I used an online SVG to PNG converter and used 96, 144 and 192 dpi. It rendered to 24&#215;24 pixels. There was an option to specify the size in pixels. Then I converted the PNG files into base64 encoding using `openssl base64 -in &lt;filename&gt;`. Yes, keep them as images in PNG and load them. I used the the base64-strings to make the sample self-contained, without external dependencies.","body":"I used an online SVG to PNG converter and used 96, 144 and 192 dpi. It rendered to 24&#215;24 pixels. There was an option to specify the size in pixels. Then I converted the PNG files into base64 encoding using <code>openssl base64 -in &lt;filename&gt;</code>. Yes, keep them as images in PNG and load them. I used the the base64-strings to make the sample self-contained, without external dependencies."},{"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"score":1,"creation_date":1645196558,"post_id":71101882,"comment_id":125814103,"body_markdown":"I&#39;ve been looking at this in some more detail. Good stuff. But it sounds like it will be a lot of clutter and work if I have to save 8 or so different PNGs or base64 strings for each icon in my application. I saw [here](https://stackoverflow.com/questions/32721467/) that there is an SVG Transcoder that can create PNGs in arbitrary sizes ad hoc. Perhaps that&#39;s something to plug into your solution. I&#39;ll experiment with that and mark your answer as the accepted answer for now. I also came across [Radiance](https://github.com/kirill-grouchnikov/radiance), which apparently uses an SVG Transcoder.","body":"I&#39;ve been looking at this in some more detail. Good stuff. But it sounds like it will be a lot of clutter and work if I have to save 8 or so different PNGs or base64 strings for each icon in my application. I saw <a href=\"https://stackoverflow.com/questions/32721467/\">here</a> that there is an SVG Transcoder that can create PNGs in arbitrary sizes ad hoc. Perhaps that&#39;s something to plug into your solution. I&#39;ll experiment with that and mark your answer as the accepted answer for now. I also came across <a href=\"https://github.com/kirill-grouchnikov/radiance\" rel=\"nofollow noreferrer\">Radiance</a>, which apparently uses an SVG Transcoder."},{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1645197545,"post_id":71101882,"comment_id":125814532,"body_markdown":"There&#39;s no other way to support High DPI: you need multiple images. Alternatively, keep the icons in SVG and render SVG directly, it&#39;s probably the best way yet it requires an external library to render SVG.","body":"There&#39;s no other way to support High DPI: you need multiple images. Alternatively, keep the icons in SVG and render SVG directly, it&#39;s probably the best way yet it requires an external library to render SVG."}],"tags":[],"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1644960969,"creation_date":1644764483,"answer_id":71101882,"question_id":70672430,"body_markdown":"Java 8 does not support High DPI, the UI gets scaled up by Windows. You should use Java 11 or a later version which support per-monitor High DPI settings.\r\n\r\nIf your goal is to make the icons look crisp, prepare a set of icons for different resolutions using [`BaseMultiResolutionImage`][1] (the basic implementation of [`MultiResolutionImage`][2]) to provide higher resolution alternatives. (These are not available in Java 8.)\r\n\r\nYou say that you scaled down the original image (240&#215;240) to 18&#215;18px. If the UI needs a higher resolution according to the system setting, all it has now is your small icon (18&#215;18) which will be scaled up, which results in poor quality. You should use a `MultiResolutionImage` or paint the original image into the required size, letting `Graphics` to scale it down for you.\r\n\r\nNo Down-Scale\r\n=============\r\n\r\nThis is the simplest way I came up with to make the icon 18&#215;18 without downscaling the original image:\r\n\r\n    private static final String IMAGE_URL =\r\n            &quot;https://tabler-icons.io/static/tabler-icons/icons-png/beach.png&quot;;\r\n\r\n    private static ImageIcon getIcon() {\r\n        return new ImageIcon(Toolkit.getDefaultToolkit()\r\n                                    .getImage(new URL(IMAGE_URL))) {\r\n            @Override\r\n            public int getIconWidth() {\r\n                return 18;\r\n            }\r\n            @Override\r\n            public int getIconHeight() {\r\n                return 18;\r\n            }\r\n\r\n            @Override\r\n            public synchronized void paintIcon(Component c, Graphics g,\r\n                                               int x, int y) {\r\n                g.drawImage(getImage(), x, y, 18, 18, null);\r\n            }\r\n        };\r\n    }\r\n\r\nI left out the exception handling code for `MalformedURLException` which can be thrown from the `URL` constructor.\r\n\r\nIn this case, the painted image gets down-scaled each time it&#39;s painted, which is ineffective. Yet the quality is better. Well, for the standard resolution screen, it&#39;s nearly the same as if you down-scaled the image when loading. But in High DPI case, it looks better. It&#39;s because for 200% UI Scale, the image will be rendered to 36&#215;36 pixels and these pixels will be created from the source of 240&#215;240 rather than up-scaling the down-scaled version which lost its quality.\r\n\r\n[![The screenshot of the app without down-scaling at 200%][3]][3]\r\n\r\nTo get even better results, I recommend using `MultiResolutionImage`.\r\n\r\n\r\nMultiResolutionImage\r\n====================\r\n\r\nThe app below loads the images from base64-encoded strings (for simplicity so that there are no external dependencies). There are three variants provided: 24&#215;24 (100%, 96dpi), 36&#215;36 (150%, 144dpi), 48&#215;48 (200%, 192dpi).\r\n\r\nIf the current scale factor is set to any of the provided resolutions, the image will be rendered as is. If 125% or 175% are used, the larger image will be scaled down; if the scale is greater than 200%, then the image for 200% will be scaled up. You can add more resolutions if needed.\r\n\r\nThe app doesn&#39;t compile in Java 8 because `MultiResolutionImage` is not available there. To compile it with JDK 11, you have to replace text blocks with regular String concatenation.\r\n\r\n```java\r\nimport java.awt.Image;\r\nimport java.awt.image.BaseMultiResolutionImage;\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.util.Arrays;\r\nimport java.util.Base64;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.SwingUtilities;\r\n\r\npublic class BeachIconButton {\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(BeachIconButton::new);\r\n    }\r\n\r\n    private BeachIconButton() {\r\n        JPanel panel = new JPanel();\r\n        ImageIcon icon = getIcon();\r\n        JButton button = new JButton(&quot;Test button&quot;, icon);\r\n        panel.add(button);\r\n\r\n        JFrame frame = new JFrame(&quot;Beach Icon Test&quot;);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.getContentPane().add(panel);\r\n        frame.pack();\r\n        frame.setLocationRelativeTo(null);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private static ImageIcon getIcon() {\r\n        return new ImageIcon(\r\n               new BaseMultiResolutionImage(\r\n               Arrays.stream(new String[] { BEACH_100, BEACH_150, BEACH_200})\r\n                     .map(BeachIconButton::loadImage)\r\n                     .toArray(Image[]::new)));\r\n    }\r\n\r\n    private static Image loadImage(String base64) {\r\n        try {\r\n            return ImageIO.read(new ByteArrayInputStream(\r\n                                Base64.getMimeDecoder().decode(base64)));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static final String BEACH_100 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAO\r\n            wwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAXxJ\r\n            REFUSInl1E9LVVEUBfAfVJBIIoWGIDiRGtagN7Yg+gTZXPwICU4FyUGDahBRCTrK\r\n            qUVNIxrkJHjWJMKZikIjSyHoYd0GZ186vOef7n2zWnB4e591WXudt/c5/G8Ywiw+\r\n            4gd28QGLuNCt+C18RXHI+onJuuLjIVBgGWOYyPb2syI3q4qfzZw/ir1raMXeNBay\r\n            k+zgfNUC25nTBWxGPhfffI78XfzOVD1FP+5lrgusoweXIv+C6xE3qxYocRFrWZHv\r\n            eBPxA5yJeK9ugRJPdU7QGPoi3+1GfFBqZIFn+BVxC88jft9NgdL9q8gH8MSfUa3V\r\n            5BKXQ6gl9aOdey1N2GBV4VO4ik/h8CWG67rMcQ53Hf5ErOBGXfEGtjKxVSxhHi/w\r\n            LeMe4mQV8ROZ67fSZWrHadyW7kKBqaonuC89Bcc5uyKNZ+M4wTvS9d/AY/RmXK80\r\n            iht/wa+HVgfKB61cTYzGaups8FH89kEFhjBSUzDnR0LrSFT5Sw7i/yH8BmQ0mnmX\r\n            f2wqAAAAAElFTkSuQmCC&quot;&quot;&quot;;\r\n\r\n    private static final String BEACH_150 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAW\r\n            JQFJUiTwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAoVJ\r\n            REFUWIXt1kuoTVEYB/DfdZWiq7gykZBHHokyw0QGREpKLgMDGSojQ6+JARFi4JFn\r\n            ySPyyoCJR8zcIUVJiPLopiMhLoO1d3ftc+7Z95xrnYHyr1V7feu/1/ff3/etby/+\r\n            4x9DW8K9ZmE9FmTP7fiBp3iE03iS0F9dTMQN/G5gvMLMVopZhi8NisnHD6xohZiV\r\n            2ea5o584h+WYgAclor5jaUoxE9ATOXiOednaUMUU9mKPkK5YVCXbJwkuKkZmYbS2\r\n            t8rxpsz+QW2krqYSdF5tCnZjCX5F9h0Zf25k66nizEghaBSOV22cRyt/vhnxd0b2\r\n            E7gQzXelEJRjnv6L96dQ9IR+9CxaWymcsnx+L6UgQnPtUizyfDwRaiiff8JwjIts\r\n            71MLytGBy0I9xaLitG7LuCMi2+d4kyEJBVWwWkhPfz568UaI6Mho/XtCDTXYqO/L\r\n            v+GF2jQ+wNZofrdVYjrwNnK0XYjOYSEt9bp20lMWY0/k5LVQJzlGCn2qur56Mb0V\r\n            YiYLKcodddXhTcX1iJesU1cj/nc9NPA9axE2Cw02GUYITe6UYgoOCv+29pTOyjAH\r\n            VxRT1N/4iP0Y2yohHTij9v810Khgiwavy43eqSfhGmZHtt/oxm2h4fUI0Zim75IW\r\n            4wI24GuDPutiCF4q1sklAx/XJXisGK2zfysGhum7N3/F2ibebce+SNCdFIJgMQ4J\r\n            F63BYBUOYEqzL87HLaEeKrivPCLrMk5lEPyezNf8MkHv9H9STioegDbF/vM3/Hdl\r\n            grpLnBxFJ8bgWAmvWX53maBOId/jMRpHGnB8JOM2yx+f+eosE1SNNiH89TY/oTY1\r\n            zfAHjS7hMv45G3exJiH/P/5d/AHE21JDZYKOHAAAAABJRU5ErkJggg==&quot;&quot;&quot;;\r\n\r\n    private static final String BEACH_200 = &quot;&quot;&quot;\r\n            iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAB2HAAAd\r\n            hwGP5fFlAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA5FJ\r\n            REFUaIHt2ctrXFUcB/BPYoWGVGOwBZtYQQoqhUp9IFEoulC04spGExQEpYoiVBBc\r\n            qVAVwYX/gEWqooKboItqN4oV0frWPgR3XRSl9mHT2GjaJh0X5w6ZOXPuzO08roL5\r\n            wlnM+T3O93cev3vOb1jCEv7f6CtpnBswjg1Yh2HM4wx+wh58jC9K4lMIfXgIB1Ap\r\n            2H7FC7jwX+Bbh2uwW3HiqUDWlE26io040YJgkXYKd5TM3Z34K0HmNKYwgavxgLD/\r\n            WwUxi1vKIr8GfyRIfIAravTuxtmE3g+Jvkrm86pek+/XuOfP4elIbz1mIr15bBUm\r\n            IG8lPtHjjLkpMeg+jNboDOKXSOcsJjP5bU0CqODBsgOoHsRnsRyvJ+RP1vh4PpId\r\n            in7v7WUA/diRE0QFhxN92yMfeyL5MxoP+nW9DAJuxY85QdS2AxiosVsrnJmqfAGX\r\n            4/3I7uVeBwAX4DEcaRLAFFbV2LwSyXdn/ZNR/86es6/BCmyTTpnVWX4Tl2pMv49k\r\n            PtZF/QfLIl+L9fhN/mrEK3XE4vYajGQzZRKPcTuOyw+k2rbV2FwSyY7GTvt7yTjC\r\n            UQwV0FspEKf+nMBcVxmdJz7VeEVYkF6F43gKD0f9H5bOOsN9Gkluws04lpBV21z0\r\n            +7myiRO+wgcjInE6HE/opNpYOZTrEV8RzghX6hjLhWvHKWny35RBNsZogtCrLWxG\r\n            8JrG8zHRO5r5eCci8bvFDNMKY/hMeNRsF77wpWJM/f2mgke7PciyLvtbKby4NuJe\r\n            9Y+QGdyEv7FLSJX/CfThfqGmM691Jqlkep8L6bWs2lQSd+F7xUjnte+EYkCpGMQb\r\n            HRKP247M73mhneVbhY9wY0J2TpjRnUKV4bBQIxrGalyPe4RSY+oe9q1who61wasQ\r\n            +vC1xtlbwFu4sqCftXhb+i70lR6ei+HEgPtxbZv+NuDnhM/hjpnmoE+YoepAu7Sx\r\n            byOsELZkWyvQzlINCTWaGbwnpMROsUx4/16Md3GyE2cDQqXsS0wLRPfhJfWFqjyM\r\n            Zrr78WcX7KczLlvVVzJyMSU/1U1brKSlMJnp9Mp+qkgAs00cVL+imxN244p9iTux\r\n            ny0SQLMVqLY5PCHs2SGhRHi6gF2n9oVWYABbhOLUZbgoGyx+3rUi+Hhm26n96ozL\r\n            FgXPQB4262yLdGrfFUxo/vfRCc1fTp3adwUjeFEod5/M2l7h38WREuyXsIQl1OAf\r\n            9zFZ1uiy3BkAAAAASUVORK5CYII=&quot;&quot;&quot;;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/BaseMultiResolutionImage.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\r\n  [3]: https://i.stack.imgur.com/SC57D.png","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>Java 8 does not support High DPI, the UI gets scaled up by Windows. You should use Java 11 or a later version which support per-monitor High DPI settings.</p>\n<p>If your goal is to make the icons look crisp, prepare a set of icons for different resolutions using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/BaseMultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>BaseMultiResolutionImage</code></a> (the basic implementation of <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/image/MultiResolutionImage.html\" rel=\"nofollow noreferrer\"><code>MultiResolutionImage</code></a>) to provide higher resolution alternatives. (These are not available in Java 8.)</p>\n<p>You say that you scaled down the original image (240×240) to 18×18px. If the UI needs a higher resolution according to the system setting, all it has now is your small icon (18×18) which will be scaled up, which results in poor quality. You should use a <code>MultiResolutionImage</code> or paint the original image into the required size, letting <code>Graphics</code> to scale it down for you.</p>\n<h1>No Down-Scale</h1>\n<p>This is the simplest way I came up with to make the icon 18×18 without downscaling the original image:</p>\n<pre><code>private static final String IMAGE_URL =\n        &quot;https://tabler-icons.io/static/tabler-icons/icons-png/beach.png&quot;;\n\nprivate static ImageIcon getIcon() {\n    return new ImageIcon(Toolkit.getDefaultToolkit()\n                                .getImage(new URL(IMAGE_URL))) {\n        @Override\n        public int getIconWidth() {\n            return 18;\n        }\n        @Override\n        public int getIconHeight() {\n            return 18;\n        }\n\n        @Override\n        public synchronized void paintIcon(Component c, Graphics g,\n                                           int x, int y) {\n            g.drawImage(getImage(), x, y, 18, 18, null);\n        }\n    };\n}\n</code></pre>\n<p>I left out the exception handling code for <code>MalformedURLException</code> which can be thrown from the <code>URL</code> constructor.</p>\n<p>In this case, the painted image gets down-scaled each time it's painted, which is ineffective. Yet the quality is better. Well, for the standard resolution screen, it's nearly the same as if you down-scaled the image when loading. But in High DPI case, it looks better. It's because for 200% UI Scale, the image will be rendered to 36×36 pixels and these pixels will be created from the source of 240×240 rather than up-scaling the down-scaled version which lost its quality.</p>\n<p><a href=\"https://i.stack.imgur.com/SC57D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SC57D.png\" alt=\"The screenshot of the app without down-scaling at 200%\" /></a></p>\n<p>To get even better results, I recommend using <code>MultiResolutionImage</code>.</p>\n<h1>MultiResolutionImage</h1>\n<p>The app below loads the images from base64-encoded strings (for simplicity so that there are no external dependencies). There are three variants provided: 24×24 (100%, 96dpi), 36×36 (150%, 144dpi), 48×48 (200%, 192dpi).</p>\n<p>If the current scale factor is set to any of the provided resolutions, the image will be rendered as is. If 125% or 175% are used, the larger image will be scaled down; if the scale is greater than 200%, then the image for 200% will be scaled up. You can add more resolutions if needed.</p>\n<p>The app doesn't compile in Java 8 because <code>MultiResolutionImage</code> is not available there. To compile it with JDK 11, you have to replace text blocks with regular String concatenation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Image;\nimport java.awt.image.BaseMultiResolutionImage;\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport java.util.Base64;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class BeachIconButton {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(BeachIconButton::new);\n    }\n\n    private BeachIconButton() {\n        JPanel panel = new JPanel();\n        ImageIcon icon = getIcon();\n        JButton button = new JButton(&quot;Test button&quot;, icon);\n        panel.add(button);\n\n        JFrame frame = new JFrame(&quot;Beach Icon Test&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(panel);\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n\n    private static ImageIcon getIcon() {\n        return new ImageIcon(\n               new BaseMultiResolutionImage(\n               Arrays.stream(new String[] { BEACH_100, BEACH_150, BEACH_200})\n                     .map(BeachIconButton::loadImage)\n                     .toArray(Image[]::new)));\n    }\n\n    private static Image loadImage(String base64) {\n        try {\n            return ImageIO.read(new ByteArrayInputStream(\n                                Base64.getMimeDecoder().decode(base64)));\n        } catch (IOException e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n    private static final String BEACH_100 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7DAAAO\n            wwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAXxJ\n            REFUSInl1E9LVVEUBfAfVJBIIoWGIDiRGtagN7Yg+gTZXPwICU4FyUGDahBRCTrK\n            qUVNIxrkJHjWJMKZikIjSyHoYd0GZ186vOef7n2zWnB4e591WXudt/c5/G8Ywiw+\n            4gd28QGLuNCt+C18RXHI+onJuuLjIVBgGWOYyPb2syI3q4qfzZw/ir1raMXeNBay\n            k+zgfNUC25nTBWxGPhfffI78XfzOVD1FP+5lrgusoweXIv+C6xE3qxYocRFrWZHv\n            eBPxA5yJeK9ugRJPdU7QGPoi3+1GfFBqZIFn+BVxC88jft9NgdL9q8gH8MSfUa3V\n            5BKXQ6gl9aOdey1N2GBV4VO4ik/h8CWG67rMcQ53Hf5ErOBGXfEGtjKxVSxhHi/w\n            LeMe4mQV8ROZ67fSZWrHadyW7kKBqaonuC89Bcc5uyKNZ+M4wTvS9d/AY/RmXK80\n            iht/wa+HVgfKB61cTYzGaups8FH89kEFhjBSUzDnR0LrSFT5Sw7i/yH8BmQ0mnmX\n            f2wqAAAAAElFTkSuQmCC&quot;&quot;&quot;;\n\n    private static final String BEACH_150 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAABYlAAAW\n            JQFJUiTwAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAoVJ\n            REFUWIXt1kuoTVEYB/DfdZWiq7gykZBHHokyw0QGREpKLgMDGSojQ6+JARFi4JFn\n            ySPyyoCJR8zcIUVJiPLopiMhLoO1d3ftc+7Z95xrnYHyr1V7feu/1/ff3/etby/+\n            4x9DW8K9ZmE9FmTP7fiBp3iE03iS0F9dTMQN/G5gvMLMVopZhi8NisnHD6xohZiV\n            2ea5o584h+WYgAclor5jaUoxE9ATOXiOednaUMUU9mKPkK5YVCXbJwkuKkZmYbS2\n            t8rxpsz+QW2krqYSdF5tCnZjCX5F9h0Zf25k66nizEghaBSOV22cRyt/vhnxd0b2\n            E7gQzXelEJRjnv6L96dQ9IR+9CxaWymcsnx+L6UgQnPtUizyfDwRaiiff8JwjIts\n            71MLytGBy0I9xaLitG7LuCMi2+d4kyEJBVWwWkhPfz568UaI6Mho/XtCDTXYqO/L\n            v+GF2jQ+wNZofrdVYjrwNnK0XYjOYSEt9bp20lMWY0/k5LVQJzlGCn2qur56Mb0V\n            YiYLKcodddXhTcX1iJesU1cj/nc9NPA9axE2Cw02GUYITe6UYgoOCv+29pTOyjAH\n            VxRT1N/4iP0Y2yohHTij9v810Khgiwavy43eqSfhGmZHtt/oxm2h4fUI0Zim75IW\n            4wI24GuDPutiCF4q1sklAx/XJXisGK2zfysGhum7N3/F2ibebce+SNCdFIJgMQ4J\n            F63BYBUOYEqzL87HLaEeKrivPCLrMk5lEPyezNf8MkHv9H9STioegDbF/vM3/Hdl\n            grpLnBxFJ8bgWAmvWX53maBOId/jMRpHGnB8JOM2yx+f+eosE1SNNiH89TY/oTY1\n            zfAHjS7hMv45G3exJiH/P/5d/AHE21JDZYKOHAAAAABJRU5ErkJggg==&quot;&quot;&quot;;\n\n    private static final String BEACH_200 = &quot;&quot;&quot;\n            iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAB2HAAAd\n            hwGP5fFlAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAA5FJ\n            REFUaIHt2ctrXFUcB/BPYoWGVGOwBZtYQQoqhUp9IFEoulC04spGExQEpYoiVBBc\n            qVAVwYX/gEWqooKboItqN4oV0frWPgR3XRSl9mHT2GjaJh0X5w6ZOXPuzO08roL5\n            wlnM+T3O93cev3vOb1jCEv7f6CtpnBswjg1Yh2HM4wx+wh58jC9K4lMIfXgIB1Ap\n            2H7FC7jwX+Bbh2uwW3HiqUDWlE26io040YJgkXYKd5TM3Z34K0HmNKYwgavxgLD/\n            WwUxi1vKIr8GfyRIfIAravTuxtmE3g+Jvkrm86pek+/XuOfP4elIbz1mIr15bBUm\n            IG8lPtHjjLkpMeg+jNboDOKXSOcsJjP5bU0CqODBsgOoHsRnsRyvJ+RP1vh4PpId\n            in7v7WUA/diRE0QFhxN92yMfeyL5MxoP+nW9DAJuxY85QdS2AxiosVsrnJmqfAGX\n            4/3I7uVeBwAX4DEcaRLAFFbV2LwSyXdn/ZNR/86es6/BCmyTTpnVWX4Tl2pMv49k\n            PtZF/QfLIl+L9fhN/mrEK3XE4vYajGQzZRKPcTuOyw+k2rbV2FwSyY7GTvt7yTjC\n            UQwV0FspEKf+nMBcVxmdJz7VeEVYkF6F43gKD0f9H5bOOsN9Gkluws04lpBV21z0\n            +7myiRO+wgcjInE6HE/opNpYOZTrEV8RzghX6hjLhWvHKWny35RBNsZogtCrLWxG\n            8JrG8zHRO5r5eCci8bvFDNMKY/hMeNRsF77wpWJM/f2mgke7PciyLvtbKby4NuJe\n            9Y+QGdyEv7FLSJX/CfThfqGmM691Jqlkep8L6bWs2lQSd+F7xUjnte+EYkCpGMQb\n            HRKP247M73mhneVbhY9wY0J2TpjRnUKV4bBQIxrGalyPe4RSY+oe9q1who61wasQ\n            +vC1xtlbwFu4sqCftXhb+i70lR6ei+HEgPtxbZv+NuDnhM/hjpnmoE+YoepAu7Sx\n            byOsELZkWyvQzlINCTWaGbwnpMROsUx4/16Md3GyE2cDQqXsS0wLRPfhJfWFqjyM\n            Zrr78WcX7KczLlvVVzJyMSU/1U1brKSlMJnp9Mp+qkgAs00cVL+imxN244p9iTux\n            ny0SQLMVqLY5PCHs2SGhRHi6gF2n9oVWYABbhOLUZbgoGyx+3rUi+Hhm26n96ozL\n            FgXPQB4262yLdGrfFUxo/vfRCc1fTp3adwUjeFEod5/M2l7h38WREuyXsIQl1OAf\n            9zFZ1uiy3BkAAAAASUVORK5CYII=&quot;&quot;&quot;;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":278315,"reputation":11589,"user_id":572834,"display_name":"Alexey Ivanov"},"score":0,"creation_date":1693071880,"post_id":76175224,"comment_id":135712870,"body_markdown":"You can make your `MultiResolutionImage` even smarter: instead of storing nine icons at different resolutions all the time, you can rasterise the SVG image only for the requested resolution. This will save some memory, yet it will take more time to display the appropriate image size when the scale (DPI) of the display changes.","body":"You can make your <code>MultiResolutionImage</code> even smarter: instead of storing nine icons at different resolutions all the time, you can rasterise the SVG image only for the requested resolution. This will save some memory, yet it will take more time to display the appropriate image size when the scale (DPI) of the display changes."}],"tags":[],"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683232301,"creation_date":1683216517,"answer_id":76175224,"question_id":70672430,"body_markdown":"I have meanwhile figured out how to take SVG files and transcode them into `BaseMultiResolutionImage` objects for different scaling levels and turn the result into an image icon for use in a JButton:\r\n\r\n```java\r\nimport java.awt.image.BaseMultiResolutionImage;\r\nimport java.awt.image.BufferedImage;\r\nimport java.net.URISyntaxException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.apache.batik.transcoder.TranscoderException;\r\nimport org.apache.batik.transcoder.TranscoderInput;\r\nimport org.apache.batik.transcoder.TranscoderOutput;\r\nimport org.apache.batik.transcoder.image.ImageTranscoder;\r\n\r\nimport javax.swing.*;\r\n\r\npublic class SvgIcon {\r\n    private BaseMultiResolutionImage b;\r\n\r\n    // constructor: accepts a path to an SVG file and the baseline dimensions\r\n    public SvgIcon(String svgPath, int baselineSize) {\r\n        this.b = this.createMultiImage(svgPath, baselineSize);\r\n    }\r\n\r\n    // return an image icon with the multi-resolution image\r\n    public ImageIcon getImageIcon() {\r\n        return new ImageIcon(this.b);\r\n    }\r\n\r\n    // create a multi-resolution image for nine common scaling levels\r\n    private BaseMultiResolutionImage createMultiImage(String svgPath, int baselineSize) {\r\n        double[] zoomFactors = {1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0};\r\n        List&lt;BufferedImage&gt; images = new ArrayList&lt;&gt;();\r\n        for (double zoomFactor : zoomFactors) {\r\n            int size = (int) (baselineSize * zoomFactor);\r\n            BufferedImage image = transcodeSvgToImage(svgPath, size, size);\r\n            images.add(image);\r\n        }\r\n        return new BaseMultiResolutionImage(images.stream().toArray(BufferedImage[]::new));\r\n    }\r\n\r\n    // wrapper for the transcoding\r\n    private BufferedImage transcodeSvgToImage(String svgPath, int width, int height) {\r\n        String inputString = null;\r\n        try {\r\n            inputString = getClass().getResource(svgPath).toURI().toString();\r\n        } catch (URISyntaxException e) {\r\n            // deal with the exception\r\n        }\r\n        BufferedImageTranscoder transcoder = new BufferedImageTranscoder();\r\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_WIDTH, (float) width);\r\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_HEIGHT, (float) height);\r\n        TranscoderInput input = new TranscoderInput(inputString);\r\n        try {\r\n            transcoder.transcode(input, null);\r\n        } catch (TranscoderException e) {\r\n            // deal with the exception\r\n        }\r\n        return transcoder.getImage();\r\n    }\r\n\r\n    private static class BufferedImageTranscoder extends ImageTranscoder {\r\n        private BufferedImage image = null;\r\n\r\n        public BufferedImage getImage() {\r\n            return image;\r\n        }\r\n\r\n        @Override\r\n        public BufferedImage createImage(int w, int h) {\r\n            BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\r\n            return bi;\r\n        }\r\n\r\n        @Override\r\n        public void writeImage(BufferedImage img, TranscoderOutput output) {\r\n            image = img;\r\n        }\r\n    }\r\n}\r\n```\r\nNote that the SVG files are stored under `icons/` in my JAR file and I declared them as a resource in my Gradle setup and IDE. If you are reading them from disk, replace the `getClass().getResource(svgPath).toURI().toString()` part above by a String URL to the SVG file.\r\n\r\nWith this class, I can create buttons with image icons for different scaling/zoom levels as follows.\r\n```java\r\nImageIcon imageIcon = new SvgIcon(&quot;/icons/tabler-icon-beach.svg&quot;, 18).getImageIcon();\r\nJButton button = new JButton(imageIcon);\r\n```\r\nThe argument `18` is the baseline size as requested in the original post. The SVG is scaled and stored with various sizes at increments of 25% over the baseline size up to three times as large as the baseline size. So, if the scaling factor of my display is 2 (i.e., 200%), the transcoded version with 36px is used.\r\n\r\n\r\nThis solution requires the Apache Batik Transcoder 1.16. I include it in Gradle like this:\r\n```\r\n// https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-transcoder\r\nimplementation group: &#39;org.apache.xmlgraphics&#39;, name: &#39;batik-transcoder&#39;, version: &#39;1.16&#39;\r\n```\r\nNote that `BaseMultiResolutionImage` is only available in Java 11 and higher. I asked for Java 8 in the question above, but ultimately found it worthwhile to upgrade the requirement to 11 for this functionality.","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>I have meanwhile figured out how to take SVG files and transcode them into <code>BaseMultiResolutionImage</code> objects for different scaling levels and turn the result into an image icon for use in a JButton:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.image.BaseMultiResolutionImage;\nimport java.awt.image.BufferedImage;\nimport java.net.URISyntaxException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.apache.batik.transcoder.TranscoderException;\nimport org.apache.batik.transcoder.TranscoderInput;\nimport org.apache.batik.transcoder.TranscoderOutput;\nimport org.apache.batik.transcoder.image.ImageTranscoder;\n\nimport javax.swing.*;\n\npublic class SvgIcon {\n    private BaseMultiResolutionImage b;\n\n    // constructor: accepts a path to an SVG file and the baseline dimensions\n    public SvgIcon(String svgPath, int baselineSize) {\n        this.b = this.createMultiImage(svgPath, baselineSize);\n    }\n\n    // return an image icon with the multi-resolution image\n    public ImageIcon getImageIcon() {\n        return new ImageIcon(this.b);\n    }\n\n    // create a multi-resolution image for nine common scaling levels\n    private BaseMultiResolutionImage createMultiImage(String svgPath, int baselineSize) {\n        double[] zoomFactors = {1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0};\n        List&lt;BufferedImage&gt; images = new ArrayList&lt;&gt;();\n        for (double zoomFactor : zoomFactors) {\n            int size = (int) (baselineSize * zoomFactor);\n            BufferedImage image = transcodeSvgToImage(svgPath, size, size);\n            images.add(image);\n        }\n        return new BaseMultiResolutionImage(images.stream().toArray(BufferedImage[]::new));\n    }\n\n    // wrapper for the transcoding\n    private BufferedImage transcodeSvgToImage(String svgPath, int width, int height) {\n        String inputString = null;\n        try {\n            inputString = getClass().getResource(svgPath).toURI().toString();\n        } catch (URISyntaxException e) {\n            // deal with the exception\n        }\n        BufferedImageTranscoder transcoder = new BufferedImageTranscoder();\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_WIDTH, (float) width);\n        transcoder.addTranscodingHint(ImageTranscoder.KEY_HEIGHT, (float) height);\n        TranscoderInput input = new TranscoderInput(inputString);\n        try {\n            transcoder.transcode(input, null);\n        } catch (TranscoderException e) {\n            // deal with the exception\n        }\n        return transcoder.getImage();\n    }\n\n    private static class BufferedImageTranscoder extends ImageTranscoder {\n        private BufferedImage image = null;\n\n        public BufferedImage getImage() {\n            return image;\n        }\n\n        @Override\n        public BufferedImage createImage(int w, int h) {\n            BufferedImage bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n            return bi;\n        }\n\n        @Override\n        public void writeImage(BufferedImage img, TranscoderOutput output) {\n            image = img;\n        }\n    }\n}\n</code></pre>\n<p>Note that the SVG files are stored under <code>icons/</code> in my JAR file and I declared them as a resource in my Gradle setup and IDE. If you are reading them from disk, replace the <code>getClass().getResource(svgPath).toURI().toString()</code> part above by a String URL to the SVG file.</p>\n<p>With this class, I can create buttons with image icons for different scaling/zoom levels as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ImageIcon imageIcon = new SvgIcon(&quot;/icons/tabler-icon-beach.svg&quot;, 18).getImageIcon();\nJButton button = new JButton(imageIcon);\n</code></pre>\n<p>The argument <code>18</code> is the baseline size as requested in the original post. The SVG is scaled and stored with various sizes at increments of 25% over the baseline size up to three times as large as the baseline size. So, if the scaling factor of my display is 2 (i.e., 200%), the transcoded version with 36px is used.</p>\n<p>This solution requires the Apache Batik Transcoder 1.16. I include it in Gradle like this:</p>\n<pre><code>// https://mvnrepository.com/artifact/org.apache.xmlgraphics/batik-transcoder\nimplementation group: 'org.apache.xmlgraphics', name: 'batik-transcoder', version: '1.16'\n</code></pre>\n<p>Note that <code>BaseMultiResolutionImage</code> is only available in Java 11 and higher. I asked for Java 8 in the question above, but ultimately found it worthwhile to upgrade the requirement to 11 for this functionality.</p>\n"}],"owner":{"account_id":1707902,"reputation":2273,"user_id":1566598,"accept_rate":75,"display_name":"Philip Leifeld"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1586,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71101882,"answer_count":2,"score":4,"last_activity_date":1683232301,"creation_date":1641929544,"question_id":70672430,"body_markdown":"I am designing a GUI with Java Swing and AWT (Java 8) and am struggling with the icons I use.\r\n\r\nI load a large PNG image and scale it to 18x18px and then use it in a button or label. It works well in all resolutions when the operating system does not zoom in.\r\n\r\nHowever, with the advent of large screen resolutions (hidpi), it is common practice to use operating system settings to zoom in on user interface controls, including buttons and such things in Java applications. For example, on Windows I use a 150% or 200% scaling of user elements with my 4K resolution to ensure the user interface is still usable. I imagine many users will do so as well.\r\n\r\nWhen that is the case, however, the icons are merely increased in size after already scaling them down to 18x18px. That is, I first scale them down and then the operating system tries to scale them up again with the little information that is still left in the image.\r\n\r\nIs there any way to design image icons in Java that are based on a higher resolution when the zooming/scaling capabilities of the operating system are used in order to avoid them appearing blurred?\r\n\r\nHere is a working example:\r\n\r\n```java\r\nimport java.awt.Container;\r\nimport java.awt.Image;\r\n\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\nclass Example extends JFrame {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tnew Example();\r\n\t}\r\n\t\r\n\tpublic Example() {\r\n\t\tContainer c = getContentPane();\r\n\t\tJPanel panel = new JPanel();\r\n\t\tImageIcon icon = new ImageIcon(new ImageIcon(getClass().getResource(&quot;tabler-icon-beach.png&quot;)).getImage().getScaledInstance(18, 18, Image.SCALE_SMOOTH));\r\n\t\tJButton button = new JButton(&quot;Test button&quot;, icon);\r\n\t\tpanel.add(button);\r\n\t\tc.add(panel);\r\n\t\tthis.pack();\r\n\t\tthis.setLocationRelativeTo(null);\r\n\t\tthis.setVisible(true);\r\n\t}\r\n}\r\n```\r\nYou can find the icon [here](https://tabler-icons.io/static/tabler-icons/icons-png/beach.png). All icons are available as PNG or SVG files.\r\n\r\nTo illustrate the problem, let me first show you two screenshots in the normal 100% screen resolution:\r\n\r\nOn Linux with 100% zoom:\r\n\r\n[![100% zoom on Linux][1]][1]\r\n\r\nOn Windows with 100% zoom:\r\n\r\n[![100% zoom on Windows][2]][2]\r\n\r\nAnd now when I set Windows 7 to have a 200% magnification of layout elements, it&#39;s obviously just the 18x18px version stretched out, which becomes blurred:\r\n\r\n[![200% zoom on Windows][3]][3]\r\n\r\nIs there any way to provide a higher-resolution image icon that is used when the operating system uses a scaling that is larger than 100%? Moreover, you can see that even at 100% the image quality is not perfect; is there any way to improve that as well?\r\n\r\n  [1]: https://i.stack.imgur.com/Zia8Q.png\r\n  [2]: https://i.stack.imgur.com/VN2wQ.png\r\n  [3]: https://i.stack.imgur.com/rdWQX.png","title":"Can I supply image icons in Java in a higher resolution to avoid blurred icons after scaling?","body":"<p>I am designing a GUI with Java Swing and AWT (Java 8) and am struggling with the icons I use.</p>\n<p>I load a large PNG image and scale it to 18x18px and then use it in a button or label. It works well in all resolutions when the operating system does not zoom in.</p>\n<p>However, with the advent of large screen resolutions (hidpi), it is common practice to use operating system settings to zoom in on user interface controls, including buttons and such things in Java applications. For example, on Windows I use a 150% or 200% scaling of user elements with my 4K resolution to ensure the user interface is still usable. I imagine many users will do so as well.</p>\n<p>When that is the case, however, the icons are merely increased in size after already scaling them down to 18x18px. That is, I first scale them down and then the operating system tries to scale them up again with the little information that is still left in the image.</p>\n<p>Is there any way to design image icons in Java that are based on a higher resolution when the zooming/scaling capabilities of the operating system are used in order to avoid them appearing blurred?</p>\n<p>Here is a working example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.Container;\nimport java.awt.Image;\n\nimport javax.swing.ImageIcon;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\n@SuppressWarnings(&quot;serial&quot;)\nclass Example extends JFrame {\n\n    public static void main(String[] args) {\n        new Example();\n    }\n    \n    public Example() {\n        Container c = getContentPane();\n        JPanel panel = new JPanel();\n        ImageIcon icon = new ImageIcon(new ImageIcon(getClass().getResource(&quot;tabler-icon-beach.png&quot;)).getImage().getScaledInstance(18, 18, Image.SCALE_SMOOTH));\n        JButton button = new JButton(&quot;Test button&quot;, icon);\n        panel.add(button);\n        c.add(panel);\n        this.pack();\n        this.setLocationRelativeTo(null);\n        this.setVisible(true);\n    }\n}\n</code></pre>\n<p>You can find the icon <a href=\"https://tabler-icons.io/static/tabler-icons/icons-png/beach.png\" rel=\"nofollow noreferrer\">here</a>. All icons are available as PNG or SVG files.</p>\n<p>To illustrate the problem, let me first show you two screenshots in the normal 100% screen resolution:</p>\n<p>On Linux with 100% zoom:</p>\n<p><a href=\"https://i.stack.imgur.com/Zia8Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zia8Q.png\" alt=\"100% zoom on Linux\" /></a></p>\n<p>On Windows with 100% zoom:</p>\n<p><a href=\"https://i.stack.imgur.com/VN2wQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VN2wQ.png\" alt=\"100% zoom on Windows\" /></a></p>\n<p>And now when I set Windows 7 to have a 200% magnification of layout elements, it's obviously just the 18x18px version stretched out, which becomes blurred:</p>\n<p><a href=\"https://i.stack.imgur.com/rdWQX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rdWQX.png\" alt=\"200% zoom on Windows\" /></a></p>\n<p>Is there any way to provide a higher-resolution image icon that is used when the operating system uses a scaling that is larger than 100%? Moreover, you can see that even at 100% the image quality is not perfect; is there any way to improve that as well?</p>\n"},{"tags":["javascript","java","blockchain","solana"],"answers":[{"tags":[],"owner":{"account_id":25705432,"reputation":504,"user_id":19464809,"display_name":"dr497"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659371326,"creation_date":1659371326,"answer_id":73196834,"question_id":73194058,"body_markdown":"I am not familiar with Kotlin or Java but here is how you can do it in other languages assuming the backend receives a `hex` encoded signature\r\n\r\n## JS\r\n\r\n```js\r\nimport { sign } from &quot;tweetnacl&quot;;\r\nsign.detached.verify(\r\n    new TextEncoder().encode(message),\r\n    new Uint8Array(Buffer.from(signed_message, &quot;hex&quot;)),\r\n    new PublicKey(pubkey_signer).toBytes()\r\n  );\r\n```\r\n\r\n## Rust\r\n\r\n```rust\r\nuse {\r\n    hex,\r\n    nacl::sign::verify,\r\n    solana_program::pubkey::Pubkey,\r\n};\r\n\r\n// ...\r\n\r\nverify(\r\n    hex::decode(signed_message)\r\n        .unwrap()\r\n        .as_slice(),\r\n    message.as_bytes(),\r\n    &amp;Pubkey::from_str(&amp;address)\r\n        .unwrap()\r\n        .to_bytes(),\r\n)\r\n.unwrap();\r\n```\r\n\r\n## Go\r\n\r\n```go\r\nimport (\r\n\t&quot;crypto/ed25519&quot;\r\n\t&quot;encoding/hex&quot;\r\n\r\n\t&quot;github.com/mr-tron/base58&quot;\r\n)\r\n\r\nfunc verify(message string, signedMessage string, pubkey string) bool {\r\n\tbytes, err := base58.Decode(pubkey)\r\n\tif err != nil {\r\n\t\treturn false\r\n\t}\r\n\r\n\tmessageAsBytes := []byte(message)\r\n\r\n\tsignedMessageAsBytes, err := hex.DecodeString(signedMessage)\r\n\tif err != nil {\r\n\t\treturn false\r\n\t}\r\n\r\n\treturn ed25519.Verify(bytes, messageAsBytes, signedMessageAsBytes)\r\n}\r\n```\r\n\r\n## Python\r\n\r\n```python\r\nimport base58\r\nfrom nacl.signing import VerifyKey\r\n\r\ndef verify_message(message: bytes, signed_message: str, address: str) -&gt; bool:\r\n    address_bytes = base58.b58decode(address)\r\n    vk = VerifyKey(address_bytes)\r\n    try:\r\n        vk.verify(message, bytes.fromhex(signed_message))\r\n        return True\r\n    except:\r\n        return False\r\n```","title":"How to verify a signature from the Phantom wallet?","body":"<p>I am not familiar with Kotlin or Java but here is how you can do it in other languages assuming the backend receives a <code>hex</code> encoded signature</p>\n<h2>JS</h2>\n<pre class=\"lang-js prettyprint-override\"><code>import { sign } from &quot;tweetnacl&quot;;\nsign.detached.verify(\n    new TextEncoder().encode(message),\n    new Uint8Array(Buffer.from(signed_message, &quot;hex&quot;)),\n    new PublicKey(pubkey_signer).toBytes()\n  );\n</code></pre>\n<h2>Rust</h2>\n<pre class=\"lang-rust prettyprint-override\"><code>use {\n    hex,\n    nacl::sign::verify,\n    solana_program::pubkey::Pubkey,\n};\n\n// ...\n\nverify(\n    hex::decode(signed_message)\n        .unwrap()\n        .as_slice(),\n    message.as_bytes(),\n    &amp;Pubkey::from_str(&amp;address)\n        .unwrap()\n        .to_bytes(),\n)\n.unwrap();\n</code></pre>\n<h2>Go</h2>\n<pre class=\"lang-golang prettyprint-override\"><code>import (\n    &quot;crypto/ed25519&quot;\n    &quot;encoding/hex&quot;\n\n    &quot;github.com/mr-tron/base58&quot;\n)\n\nfunc verify(message string, signedMessage string, pubkey string) bool {\n    bytes, err := base58.Decode(pubkey)\n    if err != nil {\n        return false\n    }\n\n    messageAsBytes := []byte(message)\n\n    signedMessageAsBytes, err := hex.DecodeString(signedMessage)\n    if err != nil {\n        return false\n    }\n\n    return ed25519.Verify(bytes, messageAsBytes, signedMessageAsBytes)\n}\n</code></pre>\n<h2>Python</h2>\n<pre class=\"lang-py prettyprint-override\"><code>import base58\nfrom nacl.signing import VerifyKey\n\ndef verify_message(message: bytes, signed_message: str, address: str) -&gt; bool:\n    address_bytes = base58.b58decode(address)\n    vk = VerifyKey(address_bytes)\n    try:\n        vk.verify(message, bytes.fromhex(signed_message))\n        return True\n    except:\n        return False\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683231653,"creation_date":1682796113,"answer_id":76138017,"question_id":73194058,"body_markdown":"The easiest way to do it in Java or Kotlin is using [sol4k][1].\r\n\r\n\r\nFirst, add it to your project (Gradle as an example):\r\n\r\n    implementation &#39;org.sol4k:sol4k:0.3.2&#39;\r\n\r\nThen call it from your Java code:\r\n\r\n    import org.sol4k.Base58;\r\n    import org.sol4k.PublicKey;\r\n    // ...\r\n    boolean verifySignature(String signature, String walletAddress) {\r\n        String message = &quot;signing message&quot;;\r\n        byte[] messageBytes = message.getBytes();\r\n        PublicKey publicKey = new PublicKey(walletAddress);\r\n        byte[] signatureBytes = Base58.decode(signature);\r\n        return publicKey.verify(signatureBytes, messageBytes);\r\n    }\r\n\r\nHere, `signature` and `walletAddress` are Base58 encoded strings.\r\n\r\n\r\nFrontend example how to get wallet address and the signature ([Phantom docs][2]):\r\n\r\n    const provider = window.phantom.solana;\r\n    const encodedMessage = new TextEncoder().encode(&#39;signing message&#39;);\r\n    const signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\r\n    const base58 = await import(&quot;bs58&quot;);\r\n    const walletAddress = provider.publicKey.toString();\r\n    const signature = base58.encode(signedMessage.signature);\r\n\r\nHere is [a blogpost][3] on the subject.\r\n\r\n\r\n  [1]: https://github.com/sol4k/sol4k\r\n  [2]: https://docs.phantom.app/getting-started-with-solana/signing-a-message\r\n  [3]: https://shpota.com/2023/05/04/how-to-verify-a-solana-wallet-signature-using-java.html","title":"How to verify a signature from the Phantom wallet?","body":"<p>The easiest way to do it in Java or Kotlin is using <a href=\"https://github.com/sol4k/sol4k\" rel=\"nofollow noreferrer\">sol4k</a>.</p>\n<p>First, add it to your project (Gradle as an example):</p>\n<pre><code>implementation 'org.sol4k:sol4k:0.3.2'\n</code></pre>\n<p>Then call it from your Java code:</p>\n<pre><code>import org.sol4k.Base58;\nimport org.sol4k.PublicKey;\n// ...\nboolean verifySignature(String signature, String walletAddress) {\n    String message = &quot;signing message&quot;;\n    byte[] messageBytes = message.getBytes();\n    PublicKey publicKey = new PublicKey(walletAddress);\n    byte[] signatureBytes = Base58.decode(signature);\n    return publicKey.verify(signatureBytes, messageBytes);\n}\n</code></pre>\n<p>Here, <code>signature</code> and <code>walletAddress</code> are Base58 encoded strings.</p>\n<p>Frontend example how to get wallet address and the signature (<a href=\"https://docs.phantom.app/getting-started-with-solana/signing-a-message\" rel=\"nofollow noreferrer\">Phantom docs</a>):</p>\n<pre><code>const provider = window.phantom.solana;\nconst encodedMessage = new TextEncoder().encode('signing message');\nconst signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\nconst base58 = await import(&quot;bs58&quot;);\nconst walletAddress = provider.publicKey.toString();\nconst signature = base58.encode(signedMessage.signature);\n</code></pre>\n<p>Here is <a href=\"https://shpota.com/2023/05/04/how-to-verify-a-solana-wallet-signature-using-java.html\" rel=\"nofollow noreferrer\">a blogpost</a> on the subject.</p>\n"}],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":499,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76138017,"answer_count":2,"score":2,"last_activity_date":1683231653,"creation_date":1659358672,"question_id":73194058,"body_markdown":"I am able to sign a message on the client side using something like this:\r\n\r\n    const encodedMessage = new TextEncoder().encode(&quot;some message&quot;);\r\n    const signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\r\n\r\nNow I want to verify the signature on the back end side using Kotlin (or Java).\r\n\r\n**Problem**:\r\n\r\n 1. I cannot find the information about the algorithm that is used for signing messages [in the documentation][1].\r\n 2. It seems like there are no Java/Kotlin libraries that work with Phantom and Solana (found a few which are not updated for a year).\r\n\r\n**Question**: How can I verify a signature from the Phantom wallet using Java? Or generally how can I do that in any language? (I will port it to Java then).\r\n\r\n\r\n  [1]: https://docs.phantom.app/integrating/extension-and-in-app-browser-web-apps/signing-a-message","title":"How to verify a signature from the Phantom wallet?","body":"<p>I am able to sign a message on the client side using something like this:</p>\n<pre><code>const encodedMessage = new TextEncoder().encode(&quot;some message&quot;);\nconst signedMessage = await provider.signMessage(encodedMessage, &quot;utf8&quot;);\n</code></pre>\n<p>Now I want to verify the signature on the back end side using Kotlin (or Java).</p>\n<p><strong>Problem</strong>:</p>\n<ol>\n<li>I cannot find the information about the algorithm that is used for signing messages <a href=\"https://docs.phantom.app/integrating/extension-and-in-app-browser-web-apps/signing-a-message\" rel=\"nofollow noreferrer\">in the documentation</a>.</li>\n<li>It seems like there are no Java/Kotlin libraries that work with Phantom and Solana (found a few which are not updated for a year).</li>\n</ol>\n<p><strong>Question</strong>: How can I verify a signature from the Phantom wallet using Java? Or generally how can I do that in any language? (I will port it to Java then).</p>\n"},{"tags":["java","macos","selenium","google-chrome","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1541496753,"post_id":52887265,"comment_id":93227898,"body_markdown":"@user2093025 Checkout my updated answer and let me know the status.","body":"@user2093025 Checkout my updated answer and let me know the status."},{"owner":{"account_id":2393727,"reputation":113,"user_id":2093025,"display_name":"user2093025"},"score":1,"creation_date":1541712575,"post_id":52887265,"comment_id":93320547,"body_markdown":"Downloading the linked Chromedriver fixed my issue -- I can now run my tests on mac again.  Thanks a ton for your help!","body":"Downloading the linked Chromedriver fixed my issue -- I can now run my tests on mac again.  Thanks a ton for your help!"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1542799400,"creation_date":1539932351,"answer_id":52887265,"question_id":52883098,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\r\n\r\n...implies that the _ChromeDriver_ was unable to **maximize** the window state of _Chrome Browser_ client.\r\n\r\n\r\n----------\r\n\r\n\r\nBuggy Mac OSX ChromeDriver Replaced\r\n-----------------------------------\r\nAfter Chrome version 70 was released, some of you have reported that using ChromeDriver to maximize browser window on Mac no longer works. ChromeDriver Team have investigated this issue, and created a fix for it. ChromeDriver builds with the fix are now available at the following locations:\r\n\r\n- If you are using Chrome version 70 (the current stable release), please download ChromeDriver version 70.0.3538.97 from https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/\r\n- If you are using Chrome version 71 (the current beta release), please download ChromeDriver version 71.0.3578.33 from https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/\r\n\r\n\r\n----------\r\n\r\n\r\nSnapshot of ChromeDriver Release Email\r\n\r\n![ChromeDriver_new](https://i.stack.imgur.com/3PCpo.png)\r\n\r\n\r\n----------\r\n\r\n\r\nHowever, your main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- Your _JDK version_ is **1.8.0_131** which is pretty **ancient**.\r\n - Upgrade _JDK_ to  recent levels [**JDK 8u181**](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- Your _Selenium Client_ version is **3.4.0** which is almost **a year** older.\r\n - Upgrade _Selenium_ to  current levels [**Version 3.14.0**](https://docs.seleniumhq.org/download/).\r\n\r\n\r\n----------\r\n\r\n\r\nFrom another perspective, this issue looks like a regression issue from [Feature request : ChromeDriver to support window resizing over a remote connection](https://bugs.chromium.org/p/chromedriver/issues/detail?id=1855).\r\n\r\n_ChromeDriver v2.43_ in the [Release Notes](https://chromedriver.storage.googleapis.com/2.43/notes.txt) have explicitly mentioned:\r\n\r\n&gt;ChromeDriver to support window resizing over a remote connection\r\n\r\nHowever, as per _best practices_ to maximize the _Chrome Browser_ client it is suggested to use `ChromeOptions` class as follows:\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\your_directory\\\\chromedriver.exe&quot;);\r\n\tChromeOptions opt = new ChromeOptions();\r\n\topt.addArguments(&quot;disable-infobars&quot;);\r\n\topt.addArguments(&quot;--start-maximized&quot;);\r\n\topt.addArguments(&quot;--disable-extensions&quot;);\r\n\tWebDriver driver = new ChromeDriver(opt);\r\n\tdriver.get(&quot;https://google.com&quot;);\r\n\r\n\r\n----------\r\n\r\n\r\n\r\nReference\r\n---------\t\r\nYou can find a detailed discussion in [driver.manage().window().maximize() issue with ChromeDriver 2.33](https://stackoverflow.com/questions/46802051/driver-manage-window-maximize-issue-with-chromedriver-2-33)\r\n\r\n\r\n----------\r\n\r\n\r\nUpdate(Nov 20, 2018)\r\n--------------------\r\n\r\n- ChromeDriver **2.44** has been released.\r\n- ChromeDriver **2.44** supports Chrome versions _69_ to _71_\r\n- This release is similar to ChromeDriver **2.43**, but with additional bug fixes. \r\n- A ChromeDriver that supports **chrome 72.x** is expected to be released in the early December.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3PCpo.png","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\n</code></pre>\n\n<p>...implies that the <em>ChromeDriver</em> was unable to <strong>maximize</strong> the window state of <em>Chrome Browser</em> client.</p>\n\n<hr>\n\n<h2>Buggy Mac OSX ChromeDriver Replaced</h2>\n\n<p>After Chrome version 70 was released, some of you have reported that using ChromeDriver to maximize browser window on Mac no longer works. ChromeDriver Team have investigated this issue, and created a fix for it. ChromeDriver builds with the fix are now available at the following locations:</p>\n\n<ul>\n<li>If you are using Chrome version 70 (the current stable release), please download ChromeDriver version 70.0.3538.97 from <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html?path=70.0.3538.97/</a></li>\n<li>If you are using Chrome version 71 (the current beta release), please download ChromeDriver version 71.0.3578.33 from <a href=\"https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/\" rel=\"nofollow noreferrer\">https://chromedriver.storage.googleapis.com/index.html?path=71.0.3578.33/</a></li>\n</ul>\n\n<hr>\n\n<p>Snapshot of ChromeDriver Release Email</p>\n\n<p><img src=\"https://i.stack.imgur.com/3PCpo.png\" alt=\"ChromeDriver_new\"></p>\n\n<hr>\n\n<p>However, your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>Your <em>JDK version</em> is <strong>1.8.0_131</strong> which is pretty <strong>ancient</strong>.\n\n<ul>\n<li>Upgrade <em>JDK</em> to  recent levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\"><strong>JDK 8u181</strong></a>.</li>\n</ul></li>\n<li>Your <em>Selenium Client</em> version is <strong>3.4.0</strong> which is almost <strong>a year</strong> older.\n\n<ul>\n<li>Upgrade <em>Selenium</em> to  current levels <a href=\"https://docs.seleniumhq.org/download/\" rel=\"nofollow noreferrer\"><strong>Version 3.14.0</strong></a>.</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>From another perspective, this issue looks like a regression issue from <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=1855\" rel=\"nofollow noreferrer\">Feature request : ChromeDriver to support window resizing over a remote connection</a>.</p>\n\n<p><em>ChromeDriver v2.43</em> in the <a href=\"https://chromedriver.storage.googleapis.com/2.43/notes.txt\" rel=\"nofollow noreferrer\">Release Notes</a> have explicitly mentioned:</p>\n\n<blockquote>\n  <p>ChromeDriver to support window resizing over a remote connection</p>\n</blockquote>\n\n<p>However, as per <em>best practices</em> to maximize the <em>Chrome Browser</em> client it is suggested to use <code>ChromeOptions</code> class as follows:</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"C:\\\\your_directory\\\\chromedriver.exe\");\nChromeOptions opt = new ChromeOptions();\nopt.addArguments(\"disable-infobars\");\nopt.addArguments(\"--start-maximized\");\nopt.addArguments(\"--disable-extensions\");\nWebDriver driver = new ChromeDriver(opt);\ndriver.get(\"https://google.com\");\n</code></pre>\n\n<hr>\n\n<h2>Reference</h2>\n\n<p>You can find a detailed discussion in <a href=\"https://stackoverflow.com/questions/46802051/driver-manage-window-maximize-issue-with-chromedriver-2-33\">driver.manage().window().maximize() issue with ChromeDriver 2.33</a></p>\n\n<hr>\n\n<h2>Update(Nov 20, 2018)</h2>\n\n<ul>\n<li>ChromeDriver <strong>2.44</strong> has been released.</li>\n<li>ChromeDriver <strong>2.44</strong> supports Chrome versions <em>69</em> to <em>71</em></li>\n<li>This release is similar to ChromeDriver <strong>2.43</strong>, but with additional bug fixes. </li>\n<li>A ChromeDriver that supports <strong>chrome 72.x</strong> is expected to be released in the early December.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":14667682,"reputation":1,"user_id":10593058,"display_name":"Jim B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541101535,"creation_date":1541101535,"answer_id":53108356,"question_id":52883098,"body_markdown":"Had this same thing happen using Selenium 3.14.0, Chrome 70, Chromedriver 2.43.\r\n\r\nThe fix for me was the remove the `--start-maximized` flag from my chromeoptions, and after the browser is open have a call to a method that does:\r\n\r\n    \tdriver.manage().window().setPosition(new Point(0, 0));\r\n\t\tdriver.manage().window().setSize(new Dimension(1920, 1080));\r\n    \r\nWe&#39;re also running our remote automation in AWS EC2 containers running CentOS.\r\nIn Windows and Mac the above flag had no issues when running locally.","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>Had this same thing happen using Selenium 3.14.0, Chrome 70, Chromedriver 2.43.</p>\n\n<p>The fix for me was the remove the <code>--start-maximized</code> flag from my chromeoptions, and after the browser is open have a call to a method that does:</p>\n\n<pre><code>    driver.manage().window().setPosition(new Point(0, 0));\n    driver.manage().window().setSize(new Dimension(1920, 1080));\n</code></pre>\n\n<p>We're also running our remote automation in AWS EC2 containers running CentOS.\nIn Windows and Mac the above flag had no issues when running locally.</p>\n"},{"tags":[],"owner":{"account_id":8156530,"reputation":347,"user_id":6141913,"accept_rate":100,"display_name":"CosetteN"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541442509,"creation_date":1541442509,"answer_id":53160125,"question_id":52883098,"body_markdown":"For those facing this problem using Codeception, simply change window_size option to false.\r\n\r\n    - Webdriver:\r\n       url: &#39;http://localhost/&#39;\r\n       window_size: false\r\n\r\n","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>For those facing this problem using Codeception, simply change window_size option to false.</p>\n\n<pre><code>- Webdriver:\n   url: 'http://localhost/'\n   window_size: false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10576287,"reputation":1907,"user_id":7791521,"accept_rate":71,"display_name":"Mikko"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1542761299,"creation_date":1542761299,"answer_id":53403780,"question_id":52883098,"body_markdown":"Updating chromedriver to version **2.44** solved the problem for me (sort of). Don&#39;t get the error anymore, but window is maximized horizontally beyond the screen. However, the tests work.\r\n\r\n**Option 1. Install via homebrew**\r\n\r\nIf you have previously installed it via homebrew, it has been moved to cask. So uninstall the old version:\r\n\r\n    brew uninstall chromedriver\r\n\r\nThen install the new version from cask:\r\n\r\n    brew tap homebrew/cask\r\n    brew cask install chromedriver\r\n\r\nNow you should have the new version in your path and the error is gone.\r\n\r\n**Option 2. Download the driver**\r\n\r\nDownload the driver from\r\n\r\n    https://chromedriver.storage.googleapis.com/index.html?path=2.44/\r\n\r\nAnd place it to your path.","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>Updating chromedriver to version <strong>2.44</strong> solved the problem for me (sort of). Don't get the error anymore, but window is maximized horizontally beyond the screen. However, the tests work.</p>\n\n<p><strong>Option 1. Install via homebrew</strong></p>\n\n<p>If you have previously installed it via homebrew, it has been moved to cask. So uninstall the old version:</p>\n\n<pre><code>brew uninstall chromedriver\n</code></pre>\n\n<p>Then install the new version from cask:</p>\n\n<pre><code>brew tap homebrew/cask\nbrew cask install chromedriver\n</code></pre>\n\n<p>Now you should have the new version in your path and the error is gone.</p>\n\n<p><strong>Option 2. Download the driver</strong></p>\n\n<p>Download the driver from</p>\n\n<pre><code>https://chromedriver.storage.googleapis.com/index.html?path=2.44/\n</code></pre>\n\n<p>And place it to your path.</p>\n"},{"tags":[],"owner":{"account_id":18937711,"reputation":11,"user_id":13818431,"display_name":"Dejy Joy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606157699,"creation_date":1606157699,"answer_id":64974620,"question_id":52883098,"body_markdown":"I observed this issue when running package suite and tried ChromeOptions but didnt work.So have tried this way and worked for me:\r\n\r\n       Dimension ExpectedDimension=new Dimension(Screen dimensions accordingly)\r\n       Dimension Before_Maximising= Driver.manage().window().getSize();\r\n       Logging.info(&quot;Before_Maximising&quot;+Before_Maximising);\r\n       if(Before_Maximising.equals(ExpectedDimension)) {\r\n        \tLogging.info(&quot;Already maximised&quot;);\r\n       }\r\n        else {\r\n        Driver.manage().window().setSize(ExpectedDimension);;\r\n        Dimension After_Maximising = Driver().manage().window().getSize();\r\n        Logging.info(&quot;After_Maximising&quot;+After_Maximising);\r\n        }","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>I observed this issue when running package suite and tried ChromeOptions but didnt work.So have tried this way and worked for me:</p>\n<pre><code>   Dimension ExpectedDimension=new Dimension(Screen dimensions accordingly)\n   Dimension Before_Maximising= Driver.manage().window().getSize();\n   Logging.info(&quot;Before_Maximising&quot;+Before_Maximising);\n   if(Before_Maximising.equals(ExpectedDimension)) {\n        Logging.info(&quot;Already maximised&quot;);\n   }\n    else {\n    Driver.manage().window().setSize(ExpectedDimension);;\n    Dimension After_Maximising = Driver().manage().window().getSize();\n    Logging.info(&quot;After_Maximising&quot;+After_Maximising);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4196585,"reputation":954,"user_id":3437862,"accept_rate":62,"display_name":"Pablo Guerrero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683231615,"creation_date":1683231615,"answer_id":76177105,"question_id":52883098,"body_markdown":"I was facing the same problem with selenium 4.5.0 and was solved by updating to 4.9.0 (Chrome Version 112).","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>I was facing the same problem with selenium 4.5.0 and was solved by updating to 4.9.0 (Chrome Version 112).</p>\n"}],"owner":{"account_id":2393727,"reputation":113,"user_id":2093025,"display_name":"user2093025"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12459,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":52887265,"answer_count":6,"score":11,"last_activity_date":1683231615,"creation_date":1539899303,"question_id":52883098,"body_markdown":"We are on Macs, using Chrome Version 70.0.3538.67 (Official Build) (64-bit), ChromeDriver 2.43.600229. Chrome windows appear, but URL is stuck at &quot;data:,&quot;.  (stack trace below)\r\n\r\nWe found a work-around using Chrome version 69 w/ chromedriver 2.43, however, Chrome continues to insist on updating itself.  \r\n\r\n\r\nWe are running Selenium-java 3.4, htmlunit-driver 2.27, testng 6.9.4, junit 4.7 with maven-compiler-plugin 3.6.1, maven-surefire-plugin 2.22.0.\r\n\r\n    org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\r\n      (Session info: chrome=70.0.3538.67)\r\n      (Driver info: chromedriver=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\r\n    Command duration or timeout: 107 milliseconds\r\n    Build info: version: &#39;3.4.0&#39;, revision: &#39;unknown&#39;, time: &#39;unknown&#39;\r\n    System info: host: &#39;edited&#39;, ip: &#39;edited&#39;, os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.13.6&#39;, java.version: &#39;1.8.0_131&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities [{mobileEmulationEnabled=false, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:52400}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052), userDataDir=/var/folders/cd/rrq4w8sd3gz92ygpfx5_kwtw0000gp/T/.org.chromium.Chromium.DCVcH3}, takesHeapSnapshot=true, pageLoadStrategy=normal, databaseEnabled=false, handlesAlerts=true, version=70.0.3538.67, browserConnectionEnabled=false, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\r\n    Session ID: adb51408a3b04f990288d09604daa3a9\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:215)\r\n        at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:167)\r\n        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:671)\r\n        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:694)\r\n        at org.openqa.selenium.remote.RemoteWebDriver$RemoteWebDriverOptions$RemoteWindow.maximize(RemoteWebDriver.java:925)\r\n        at ufis.common.TestSuiteUtils.getDriver(TestSuiteUtils.java:59)\r\n        at ufis.test.cv.categories.research.independentresearch.IndependentResearchValidationTests.setUpClass(IndependentResearchValidationTests.java:45)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\r\n        at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:517)\r\n        at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\r\n        at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:140)\r\n        at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:170)\r\n        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:104)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:748)","title":"WebDriverException: unknown error: failed to change window state to maximized, current state is normal with Chrome 70 &amp; Chromedriver 2.43 on MAC OS X","body":"<p>We are on Macs, using Chrome Version 70.0.3538.67 (Official Build) (64-bit), ChromeDriver 2.43.600229. Chrome windows appear, but URL is stuck at \"data:,\".  (stack trace below)</p>\n\n<p>We found a work-around using Chrome version 69 w/ chromedriver 2.43, however, Chrome continues to insist on updating itself.  </p>\n\n<p>We are running Selenium-java 3.4, htmlunit-driver 2.27, testng 6.9.4, junit 4.7 with maven-compiler-plugin 3.6.1, maven-surefire-plugin 2.22.0.</p>\n\n<pre><code>org.openqa.selenium.WebDriverException: unknown error: failed to change window state to maximized, current state is normal\n  (Session info: chrome=70.0.3538.67)\n  (Driver info: chromedriver=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052),platform=Mac OS X 10.13.6 x86_64) (WARNING: The server did not provide any stacktrace information)\nCommand duration or timeout: 107 milliseconds\nBuild info: version: '3.4.0', revision: 'unknown', time: 'unknown'\nSystem info: host: 'edited', ip: 'edited', os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.13.6', java.version: '1.8.0_131'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities [{mobileEmulationEnabled=false, hasTouchScreen=false, platform=MAC, acceptSslCerts=false, goog:chromeOptions={debuggerAddress=localhost:52400}, acceptInsecureCerts=false, webStorageEnabled=true, browserName=chrome, takesScreenshot=true, javascriptEnabled=true, setWindowRect=true, unexpectedAlertBehaviour=, applicationCacheEnabled=false, rotatable=false, networkConnectionEnabled=false, chrome={chromedriverVersion=2.43.600229 (3fae4d0cda5334b4f533bede5a4787f7b832d052), userDataDir=/var/folders/cd/rrq4w8sd3gz92ygpfx5_kwtw0000gp/T/.org.chromium.Chromium.DCVcH3}, takesHeapSnapshot=true, pageLoadStrategy=normal, databaseEnabled=false, handlesAlerts=true, version=70.0.3538.67, browserConnectionEnabled=false, nativeEvents=true, locationContextEnabled=true, cssSelectorsEnabled=true}]\nSession ID: adb51408a3b04f990288d09604daa3a9\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:215)\n    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:167)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:671)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:694)\n    at org.openqa.selenium.remote.RemoteWebDriver$RemoteWebDriverOptions$RemoteWindow.maximize(RemoteWebDriver.java:925)\n    at ufis.common.TestSuiteUtils.getDriver(TestSuiteUtils.java:59)\n    at ufis.test.cv.categories.research.independentresearch.IndependentResearchValidationTests.setUpClass(IndependentResearchValidationTests.java:45)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:85)\n    at org.testng.internal.Invoker.invokeConfigurationMethod(Invoker.java:517)\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:213)\n    at org.testng.internal.Invoker.invokeConfigurations(Invoker.java:140)\n    at org.testng.internal.TestMethodWorker.invokeBeforeClassMethods(TestMethodWorker.java:170)\n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:104)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683263611,"post_id":76177079,"comment_id":134343005,"body_markdown":"Maybe better way to test somewhere in separate env, deploy your service with plugins into some env let&#39;s call it &#39;mock&#39;, and create let&#39;s call acceptance tests that will run in this environment calling actual service that&#39;s already up","body":"Maybe better way to test somewhere in separate env, deploy your service with plugins into some env let&#39;s call it &#39;mock&#39;, and create let&#39;s call acceptance tests that will run in this environment calling actual service that&#39;s already up"},{"owner":{"account_id":3634133,"reputation":919,"user_id":3029642,"accept_rate":46,"display_name":"user3029642"},"score":0,"creation_date":1683559448,"post_id":76177079,"comment_id":134381376,"body_markdown":"Thanks Anton. That&#39;s my fallback, but I was hoping I could establish a pattern to allow plugin developers to easily test their plugins during the development process. If possible, I do not want them to have to wait for CICD testing to validate a change.","body":"Thanks Anton. That&#39;s my fallback, but I was hoping I could establish a pattern to allow plugin developers to easily test their plugins during the development process. If possible, I do not want them to have to wait for CICD testing to validate a change."},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683561333,"post_id":76177079,"comment_id":134381808,"body_markdown":"Maybe you can look how testcontainers team implement their solutions or you can look on way to test spring-cloud-stream applications. For example, when you&#39;re testing it you need to add such dependency:\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n            &lt;type&gt;test-jar&lt;/type&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;classifier&gt;test-binder&lt;/classifier&gt;\n        &lt;/dependency&gt;","body":"Maybe you can look how testcontainers team implement their solutions or you can look on way to test spring-cloud-stream applications. For example, when you&#39;re testing it you need to add such dependency:         &lt;dependency&gt;             &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;             &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;             &lt;type&gt;test-jar&lt;/type&gt;             &lt;scope&gt;test&lt;/scope&gt;             &lt;classifier&gt;test-binder&lt;/classifier&gt;         &lt;/dependency&gt;"}],"owner":{"account_id":3634133,"reputation":919,"user_id":3029642,"accept_rate":46,"display_name":"user3029642"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683231353,"creation_date":1683231353,"question_id":76177079,"body_markdown":"I have a Spring Boot application that supports plugins. Plugins are jar files added to the core application docker container when deployed. The core application scans the plugin jars and adds components to the context.\r\n\r\nI am looking for the best way to integration test the plugins with the core application. To that end, I added the core application jar as a test-scoped dependency for the plugins, but I&#39;m not sure how run the tests with the full application context. I tried adding the primary configuration class from the core application to the @SpringBootTest annotation on the plugin tests, but I&#39;m getting a cannot find symbol compilation error, so apparently that will not work with classes inside dependency jars. \r\n\r\n    @CamelSpringBootTest\r\n    @SpringBootTest(\r\n        classes = { CoreApplication.class },\r\n        properties = { \r\n    &quot;spring.cloud.consul.enabled=false&quot;,&quot;spring.cloud.consul.discovery.enabled=false&quot;} // disable \r\n    consul to avoid errors\r\n    )\r\n    @EnableAutoConfiguration\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class APluginTest {\r\n\r\nAny suggestions on how I should wire these integration tests for plugins?\r\n\r\nThanks!","title":"Spring Boot Integration Testing with Plugins","body":"<p>I have a Spring Boot application that supports plugins. Plugins are jar files added to the core application docker container when deployed. The core application scans the plugin jars and adds components to the context.</p>\n<p>I am looking for the best way to integration test the plugins with the core application. To that end, I added the core application jar as a test-scoped dependency for the plugins, but I'm not sure how run the tests with the full application context. I tried adding the primary configuration class from the core application to the @SpringBootTest annotation on the plugin tests, but I'm getting a cannot find symbol compilation error, so apparently that will not work with classes inside dependency jars.</p>\n<pre><code>@CamelSpringBootTest\n@SpringBootTest(\n    classes = { CoreApplication.class },\n    properties = { \n&quot;spring.cloud.consul.enabled=false&quot;,&quot;spring.cloud.consul.discovery.enabled=false&quot;} // disable \nconsul to avoid errors\n)\n@EnableAutoConfiguration\n@ActiveProfiles(&quot;test&quot;)\npublic class APluginTest {\n</code></pre>\n<p>Any suggestions on how I should wire these integration tests for plugins?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-mvc","spring-tool-suite","tomcat9","spring-tools-4"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683219216,"post_id":76167465,"comment_id":134336832,"body_markdown":"How are you running in debug mode?   Using an IDE?  From the command line?   Please provide any details that might help us understand and diagnose your problem.","body":"How are you running in debug mode?   Using an IDE?  From the command line?   Please provide any details that might help us understand and diagnose your problem."},{"owner":{"account_id":2391768,"reputation":665,"user_id":2091487,"accept_rate":100,"display_name":"headlikearock"},"score":0,"creation_date":1683230905,"post_id":76167465,"comment_id":134339278,"body_markdown":"@StephenC - I&#39;ve updated the question with more details.","body":"@StephenC - I&#39;ve updated the question with more details."}],"owner":{"account_id":2391768,"reputation":665,"user_id":2091487,"accept_rate":100,"display_name":"headlikearock"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683230984,"creation_date":1683142837,"question_id":76167465,"body_markdown":"No breakpoint sets, fresh install (yesterday) of Spring Tools 4, using MS Open JDK 11, Tomcat 9 and Spring 5. My webapp starts up fine on Tomcat if I run it regular but when I try to run in debug mode it just hangs indefinitely. No breakpoints are set. Is there an argument I need to set in Tomcat, STS  or Java in order to get it to run in Debug mode?\r\n\r\nUpdate based on comment for more info:\r\nI&#39;m using Spring Tool Suite 4. I&#39;ve added Tomcat 9 as a Server via the IDE options (Window-&gt;Show View-&gt;Servers, then right click in window and adding Tomcat 9).  I&#39;ve started debug by right clicking on the server and selecting Debug and also through he debug icon in the top menu of STS.  I have tried switching JREs from the one I installed (Java 11) to the default one that came with STS (Java 17) and that did not make a difference. I was able to run a basic Java class in debug mode so I feel like that has ruled out STS and Java as the issues and now I&#39;m focusing on Tomcat (Tomcat 9) and the web app (Spring 5) itself and trying to see if there are any configuration options that I need to make.\r\n","title":"Spring Tools 4, Java 11, Tomcat 9, Spring 5 app - runs in regular mode but hangs indefinitely when trying to debug","body":"<p>No breakpoint sets, fresh install (yesterday) of Spring Tools 4, using MS Open JDK 11, Tomcat 9 and Spring 5. My webapp starts up fine on Tomcat if I run it regular but when I try to run in debug mode it just hangs indefinitely. No breakpoints are set. Is there an argument I need to set in Tomcat, STS  or Java in order to get it to run in Debug mode?</p>\n<p>Update based on comment for more info:\nI'm using Spring Tool Suite 4. I've added Tomcat 9 as a Server via the IDE options (Window-&gt;Show View-&gt;Servers, then right click in window and adding Tomcat 9).  I've started debug by right clicking on the server and selecting Debug and also through he debug icon in the top menu of STS.  I have tried switching JREs from the one I installed (Java 11) to the default one that came with STS (Java 17) and that did not make a difference. I was able to run a basic Java class in debug mode so I feel like that has ruled out STS and Java as the issues and now I'm focusing on Tomcat (Tomcat 9) and the web app (Spring 5) itself and trying to see if there are any configuration options that I need to make.</p>\n"},{"tags":["java","selenium-webdriver","properties-file","owner"],"answers":[{"tags":[],"owner":{"account_id":10495994,"reputation":1833,"user_id":7736228,"display_name":"Abhay Chaudhary"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683230476,"creation_date":1683230476,"answer_id":76176986,"question_id":76174393,"body_markdown":"You can try below steps to solve it \r\n    \r\n1. Print the value of ${user.dir} to the console or log file to verify that it resolves to the expected directory\r\n\r\n2. using an absolute path to the property file  \r\n    \r\n        @Config.Sources(value=&quot;/src/test/resources/FrameworkConfig.properties&quot;)\r\n        \tpublic interface FrameworkConfig extends Config {\r\n        \t}\r\n    \r\n    \r\n    \r\n3. In IntelliJ IDEA, you can set the working directory in the Run/Debug Configuration for your application try checking, make sure that the working directory is set correctly\r\n4. Using classpath\r\n    \r\n        @Config.Sources(value=&quot;classpath:FrameworkConfig.properties&quot;)\r\n        public interface FrameworkConfig extends Config {\r\n           ...\r\n        }\r\n\r\n","title":"Unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources of the Owner library in Java","body":"<p>You can try below steps to solve it</p>\n<ol>\n<li><p>Print the value of ${user.dir} to the console or log file to verify that it resolves to the expected directory</p>\n</li>\n<li><p>using an absolute path to the property file</p>\n<pre><code> @Config.Sources(value=&quot;/src/test/resources/FrameworkConfig.properties&quot;)\n     public interface FrameworkConfig extends Config {\n     }\n</code></pre>\n</li>\n<li><p>In IntelliJ IDEA, you can set the working directory in the Run/Debug Configuration for your application try checking, make sure that the working directory is set correctly</p>\n</li>\n<li><p>Using classpath</p>\n<pre><code> @Config.Sources(value=&quot;classpath:FrameworkConfig.properties&quot;)\n public interface FrameworkConfig extends Config {\n    ...\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":6287559,"reputation":301,"user_id":4886208,"accept_rate":67,"display_name":"jba065"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683230476,"creation_date":1683210962,"question_id":76174393,"body_markdown":"I am unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources annotation of the Owner library in Java to locate the property file.\r\n\r\nUsing the absolute path to locate the file works for me perfectly as shown below\r\n```\r\n@Config.Sources(value=&quot;C:\\\\Users\\\\username\\\\eclipse-workspace\\\\MWAFW\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\n\r\nHowever, If I use \r\n```\r\n@Config.Sources(value=&quot;${user.dir}\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\n\r\nor \r\n```\r\n@Config.Sources(value=&quot;${user.dir}/src/test/resources/FrameworkConfig.properties&quot;)\r\npublic interface FrameworkConfig extends Config {\r\n    ...\r\n}\r\n```\r\ndoes not locate the properties file.\r\nWhy is ${user.dir} not working for me in this case?\r\n* I am using a maven-Java project on Intellij community edition\r\n","title":"Unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources of the Owner library in Java","body":"<p>I am unable to locate the file while using ${user.dir} to avoid hardcoding in the @Config.Sources annotation of the Owner library in Java to locate the property file.</p>\n<p>Using the absolute path to locate the file works for me perfectly as shown below</p>\n<pre><code>@Config.Sources(value=&quot;C:\\\\Users\\\\username\\\\eclipse-workspace\\\\MWAFW\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>However, If I use</p>\n<pre><code>@Config.Sources(value=&quot;${user.dir}\\\\src\\\\test\\\\resources\\\\FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>or</p>\n<pre><code>@Config.Sources(value=&quot;${user.dir}/src/test/resources/FrameworkConfig.properties&quot;)\npublic interface FrameworkConfig extends Config {\n    ...\n}\n</code></pre>\n<p>does not locate the properties file.\nWhy is ${user.dir} not working for me in this case?</p>\n<ul>\n<li>I am using a maven-Java project on Intellij community edition</li>\n</ul>\n"},{"tags":["java","collections","guava"],"comments":[{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":1,"creation_date":1431536583,"post_id":30220820,"comment_id":48546054,"body_markdown":"My answer covers this, but the fundamental issue here is that the JDK API is bad because it doesn&#39;t size the `HashMap` &quot;to hold a specific number of items&quot; like you&#39;d expect it would. Instead it sizes it to hold 75% of the number you specify.","body":"My answer covers this, but the fundamental issue here is that the JDK API is bad because it doesn&#39;t size the <code>HashMap</code> &quot;to hold a specific number of items&quot; like you&#39;d expect it would. Instead it sizes it to hold 75% of the number you specify."}],"answers":[{"comments":[{"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"score":1,"creation_date":1431536966,"post_id":30220944,"comment_id":48546287,"body_markdown":"Nope, you&#39;re example won&#39;t do this. The standard library will round the size up to 16 (the next power of 2) and filling it with 10 items will not exceed the threshold to extend the size. However if you have an expected size of 13 and fill it with 13 it will.","body":"Nope, you&#39;re example won&#39;t do this. The standard library will round the size up to 16 (the next power of 2) and filling it with 10 items will not exceed the threshold to extend the size. However if you have an expected size of 13 and fill it with 13 it will."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":0,"creation_date":1431539370,"post_id":30220944,"comment_id":48547679,"body_markdown":"Thanks, fixed the specific example to use 16. For arbitrary sizes, it&#39;s still generally true that the table may resize if you specify an initial capacity that&#39;s equal to the number of entries you want to add.","body":"Thanks, fixed the specific example to use 16. For arbitrary sizes, it&#39;s still generally true that the table may resize if you specify an initial capacity that&#39;s equal to the number of entries you want to add."}],"tags":[],"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1683230426,"creation_date":1431536033,"answer_id":30220944,"question_id":30220820,"body_markdown":"Have you read the method&#39;s [Javadoc][1]?\r\n\r\n&gt; Creates a `HashMap` instance, with a high enough &quot;initial capacity&quot; that it should hold `expectedSize` elements without growth.\r\n\r\nNote that the `new HashMap(int)` constructor&#39;s &quot;initial size&quot; parameter specifies the initial size of the _hash table_ that entries are stored in, which is basically an implementation detail that you shouldn&#39;t have to care about. The hash table will resize when it exceeds the map&#39;s _load factor_ (which defaults to 0.75), which means that if you specify an initial capacity of 16 and then add 16 entries to the map, the hash table will almost certainly be resized.\r\n\r\nWith Guava&#39;s method, if you specify an _expected size_ of 16 and then add 16 entries, the hash table should _not_ resize.\r\n\r\n  [1]: https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Maps.html#newHashMapWithExpectedSize-int-","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>Have you read the method's <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Maps.html#newHashMapWithExpectedSize-int-\" rel=\"nofollow noreferrer\">Javadoc</a>?</p>\n<blockquote>\n<p>Creates a <code>HashMap</code> instance, with a high enough &quot;initial capacity&quot; that it should hold <code>expectedSize</code> elements without growth.</p>\n</blockquote>\n<p>Note that the <code>new HashMap(int)</code> constructor's &quot;initial size&quot; parameter specifies the initial size of the <em>hash table</em> that entries are stored in, which is basically an implementation detail that you shouldn't have to care about. The hash table will resize when it exceeds the map's <em>load factor</em> (which defaults to 0.75), which means that if you specify an initial capacity of 16 and then add 16 entries to the map, the hash table will almost certainly be resized.</p>\n<p>With Guava's method, if you specify an <em>expected size</em> of 16 and then add 16 entries, the hash table should <em>not</em> resize.</p>\n"},{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1431536185,"post_id":30220957,"comment_id":48545818,"body_markdown":"Nope.  If you call `new HashMap(n)` and then put n entries in, the hash table will get resized because it&#39;s not big enough by the JDK&#39;s definition; Guava&#39;s just compensating for that.","body":"Nope.  If you call <code>new HashMap(n)</code> and then put n entries in, the hash table will get resized because it&#39;s not big enough by the JDK&#39;s definition; Guava&#39;s just compensating for that."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":0,"creation_date":1431536378,"post_id":30220957,"comment_id":48545935,"body_markdown":"Yeah, as Louis said, the hash table will end up approximately the same size regardless of which method you use to construct the `Map`, so there shouldn&#39;t be any significant space different. The only difference is whether or not the hash table will have to be resized before all the entries you want to add can be added.","body":"Yeah, as Louis said, the hash table will end up approximately the same size regardless of which method you use to construct the <code>Map</code>, so there shouldn&#39;t be any significant space different. The only difference is whether or not the hash table will have to be resized before all the entries you want to add can be added."},{"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"score":0,"creation_date":1431536696,"post_id":30220957,"comment_id":48546125,"body_markdown":"yep, you&#39;re right. It allocates the size rounded up to the next power of 2 and then set the normal loadfactor of 75%, which would get triggered when filling it with size items (if size is close enough to the rounded up number, or in about 50% of cases). I was under the mistaken belief that the standard library compensated for this. Still the number 2 is rather arbitrary, so I still believe the sparsity plays a role there too.","body":"yep, you&#39;re right. It allocates the size rounded up to the next power of 2 and then set the normal loadfactor of 75%, which would get triggered when filling it with size items (if size is close enough to the rounded up number, or in about 50% of cases). I was under the mistaken belief that the standard library compensated for this. Still the number 2 is rather arbitrary, so I still believe the sparsity plays a role there too."}],"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1431537424,"creation_date":1431536082,"answer_id":30220957,"question_id":30220820,"body_markdown":"Guava just multiplies the size passed by 2 (in a safe way) and calls the regular hashmap constructor. This makes it more sparse so there are less collisions while hashing. \r\n\r\nThe javadoc on the capacity calculation mentions that it calculates a value for the capacity so that the hashmap is between 25% and 50% full, which is far away from the threshold which would trigger a resizing.\r\n\r\nThe standard library rounds the expected size up to the nearest power of 2 and allocates that as the size and then sets the threshold for resizing to 75%. If we would randomly ask for sizes, the standard library would resize in 50% of cases.\r\n\r\nIf avoiding the threshold would be the only consideration, multiplying with 1.34  would be enough to have enough space to avoid resizing on filling it with the expected size of elements.\r\n\r\nIt looks like the typical speed vs space tradeof and the Google engineers being more speed freaks and the Sun/Oracle engineers more space nuts.\r\n\r\n","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>Guava just multiplies the size passed by 2 (in a safe way) and calls the regular hashmap constructor. This makes it more sparse so there are less collisions while hashing. </p>\n\n<p>The javadoc on the capacity calculation mentions that it calculates a value for the capacity so that the hashmap is between 25% and 50% full, which is far away from the threshold which would trigger a resizing.</p>\n\n<p>The standard library rounds the expected size up to the nearest power of 2 and allocates that as the size and then sets the threshold for resizing to 75%. If we would randomly ask for sizes, the standard library would resize in 50% of cases.</p>\n\n<p>If avoiding the threshold would be the only consideration, multiplying with 1.34  would be enough to have enough space to avoid resizing on filling it with the expected size of elements.</p>\n\n<p>It looks like the typical speed vs space tradeof and the Google engineers being more speed freaks and the Sun/Oracle engineers more space nuts.</p>\n"},{"comments":[{"owner":{"account_id":5502972,"reputation":3853,"user_id":4371758,"display_name":"Bubletan"},"score":2,"creation_date":1431537525,"post_id":30221029,"comment_id":48546598,"body_markdown":"A `HashMap` uses the next power of two as its capacity. So if you set `initialCapacity` to 10, the real capacity will be 16. Factoring that by 0.75 results a total of 12 entries without resizing.","body":"A <code>HashMap</code> uses the next power of two as its capacity. So if you set <code>initialCapacity</code> to 10, the real capacity will be 16. Factoring that by 0.75 results a total of 12 entries without resizing."},{"owner":{"account_id":7848,"reputation":108920,"user_id":13792,"accept_rate":100,"display_name":"ColinD"},"score":1,"creation_date":1431542013,"post_id":30221029,"comment_id":48549197,"body_markdown":"@Bubletan: This is true, but A) it&#39;s an implementation detail that&#39;s completely unspecified by the API, and B) it doesn&#39;t change the fact that for many possible values of `initialCapacity`, the table will have to be resized and rehashed in order to add that many entries.","body":"@Bubletan: This is true, but A) it&#39;s an implementation detail that&#39;s completely unspecified by the API, and B) it doesn&#39;t change the fact that for many possible values of <code>initialCapacity</code>, the table will have to be resized and rehashed in order to add that many entries."},{"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"score":0,"creation_date":1431550988,"post_id":30221029,"comment_id":48554073,"body_markdown":"@ColinD agreed, there is no way of knowing the actual initial capacity from the javadoc without reading the code. It is actually misleading in some places.","body":"@ColinD agreed, there is no way of knowing the actual initial capacity from the javadoc without reading the code. It is actually misleading in some places."}],"tags":[],"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"comment_count":3,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1431536290,"creation_date":1431536290,"answer_id":30221029,"question_id":30220820,"body_markdown":"The HashMap constructor argument is the capacity of the map, i.e. the number of buckets.\r\n\r\nSo, if you pass 10 as argument, and store 8 keys in the map, the rehash threshold (75% by default) will be reached and the map will rehash.\r\n\r\nOn the other hand, the argument passed to newHashMapWithExpectedSize() is the expected size of the map. So if you pass 10, Guava will create a map with enough buckets to make sure the map doesn&#39;t rehash when inserting 10 elements: at least 14 buckets.","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>The HashMap constructor argument is the capacity of the map, i.e. the number of buckets.</p>\n\n<p>So, if you pass 10 as argument, and store 8 keys in the map, the rehash threshold (75% by default) will be reached and the map will rehash.</p>\n\n<p>On the other hand, the argument passed to newHashMapWithExpectedSize() is the expected size of the map. So if you pass 10, Guava will create a map with enough buckets to make sure the map doesn't rehash when inserting 10 elements: at least 14 buckets.</p>\n"}],"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5828,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":30220944,"answer_count":3,"score":15,"last_activity_date":1683230426,"creation_date":1431535624,"question_id":30220820,"body_markdown":"In Java, you can create a new `HashMap` to hold a specific number of items like so:\r\n\r\n    Map m = new HashMap(100);\r\n\r\nGuava provides a `Maps.newHashMapWithExpectedSize(int)` method, which I would expect to simply call `HashMap(int)`. But it doesn&#39;t do this, instead it calculates its own capacity and uses that.\r\n\r\nWhy does `newHashMapWithExpectedSize` do its own thing, and why would I want to use it over calling `new HashMap(int)` directly?","title":"Difference between new HashMap(int) and guava Maps.newHashMapWithExpectedSize(int)","body":"<p>In Java, you can create a new <code>HashMap</code> to hold a specific number of items like so:</p>\n\n<pre><code>Map m = new HashMap(100);\n</code></pre>\n\n<p>Guava provides a <code>Maps.newHashMapWithExpectedSize(int)</code> method, which I would expect to simply call <code>HashMap(int)</code>. But it doesn't do this, instead it calculates its own capacity and uses that.</p>\n\n<p>Why does <code>newHashMapWithExpectedSize</code> do its own thing, and why would I want to use it over calling <code>new HashMap(int)</code> directly?</p>\n"},{"tags":["java","memory-leaks","java-stream"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1629102929,"post_id":68799641,"comment_id":121588492,"body_markdown":"[The first answer to this question](https://stackoverflow.com/questions/45536049/java-lang-internalerror-a-fault-occurred-in-a-recent-unsafe-memory-access-opera) talks about this kind of `InternalError`. From what I read there code be a wide array of reasons for this.","body":"<a href=\"https://stackoverflow.com/questions/45536049/java-lang-internalerror-a-fault-occurred-in-a-recent-unsafe-memory-access-opera\">The first answer to this question</a> talks about this kind of <code>InternalError</code>. From what I read there code be a wide array of reasons for this."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629103343,"post_id":68799641,"comment_id":121588641,"body_markdown":"@JoachimSauer I have read that answer too. I am sorry If I sounded as I am saying there can only be 2 reasons for this error. But I just wanted to point out the ones I am suspecting for the cause of this error.","body":"@JoachimSauer I have read that answer too. I am sorry If I sounded as I am saying there can only be 2 reasons for this error. But I just wanted to point out the ones I am suspecting for the cause of this error."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":2,"creation_date":1629104113,"post_id":68799641,"comment_id":121588947,"body_markdown":"It is possible that memory is the issue, but you&#39;ll have to monitor your application to be sure.","body":"It is possible that memory is the issue, but you&#39;ll have to monitor your application to be sure."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629114721,"post_id":68799641,"comment_id":121593141,"body_markdown":"@Hulk I have edited and added JVM monitoring images. Could you check that out?","body":"@Hulk I have edited and added JVM monitoring images. Could you check that out?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":1,"creation_date":1629115719,"post_id":68799641,"comment_id":121593526,"body_markdown":"Since this is happening in the image reading code, can you reproduce it with a fixed image, maybe loading it from disk instead?","body":"Since this is happening in the image reading code, can you reproduce it with a fixed image, maybe loading it from disk instead?"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1629115733,"post_id":68799641,"comment_id":121593534,"body_markdown":"@Mehmet you can configure the heap size available to your JVM, may be worth trying a similar configuration than the one in your production environment. (how exactly the configuration works depends on the JVM implementation and version you are using).","body":"@Mehmet you can configure the heap size available to your JVM, may be worth trying a similar configuration than the one in your production environment. (how exactly the configuration works depends on the JVM implementation and version you are using)."},{"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"score":0,"creation_date":1629191667,"post_id":68799641,"comment_id":121615378,"body_markdown":"@Hulk I have lowered the JVM memory as you said. Could you check the EDIT 2 in the question?","body":"@Hulk I have lowered the JVM memory as you said. Could you check the EDIT 2 in the question?"}],"answers":[{"tags":[],"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1629885125,"creation_date":1629885125,"answer_id":68920641,"question_id":68799641,"body_markdown":"Answer of Vyacheslav in [this post][1] explains why metaspace increases.\r\n\r\nI run the application with `-Djava.compiler=NONE` option and there was no increase in the metaspace.\r\n\r\n[![Metaspace][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30938233/java-8-why-does-metaspace-size-increase-but-number-of-loaded-classes-stay-the-s\r\n  [2]: https://i.stack.imgur.com/tspKt.png","title":"Is This Because of Memory Leakeage?","body":"<p>Answer of Vyacheslav in <a href=\"https://stackoverflow.com/questions/30938233/java-8-why-does-metaspace-size-increase-but-number-of-loaded-classes-stay-the-s\">this post</a> explains why metaspace increases.</p>\n<p>I run the application with <code>-Djava.compiler=NONE</code> option and there was no increase in the metaspace.</p>\n<p><a href=\"https://i.stack.imgur.com/tspKt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tspKt.png\" alt=\"Metaspace\" /></a></p>\n"}],"owner":{"account_id":19434523,"reputation":128,"user_id":14214267,"display_name":"Mehmet"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":631,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":68920641,"answer_count":1,"score":1,"last_activity_date":1683230414,"creation_date":1629102590,"question_id":68799641,"body_markdown":"I am constantly getting images from a local server and I want to show them on the JPanel.\r\n\r\nI wrote a code that works for a while without any issue. But after some time (approximately 5 min), I get this error:\r\n\r\n&gt; Exception in thread &quot;Thread-0&quot; java.lang.InternalError: a fault occurred in an unsafe memory access operation\r\n&gt;\r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImage(Native Method)  \r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageR$  \r\n&gt; at com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.ja$  \r\n&gt; at SICK.DisplayImage.updatePane(DisplayImage.java:225)  \r\n&gt; at SICK.DisplayImage.access$000(DisplayImage.java:35)  \r\n&gt; at SICK.DisplayImage$1.run(DisplayImage.java:356)  \r\n&gt; at java.lang.Thread.run(Thread.java:748)\r\n\r\nThis is where I read images from the server:\r\n\r\n    private BufferedImage updatePane(JLabel label) {\r\n\t\r\n\t\t\ttry {\r\n\t\t\t\tInputStream input = new URL(&quot;http://192.168.250.21:8080/NewImage.jpg&quot;).openStream();\r\n\t\t\t\t\r\n\t\t\t\tImageInputStream stream = ImageIO.createImageInputStream(input);\r\n\t\t\t\t\r\n\t\t\t\tImageReader reader = ImageIO.getImageReaders(stream).next(); \r\n\r\n\t\t\t\treader.setInput(stream);\r\n\t\r\n\t\t\t\tint width = reader.getWidth(0);\r\n\t\t\t\tint height = reader.getHeight(0);\r\n\t\t\t\tImageTypeSpecifier spec = reader.getImageTypes(0).next(); \r\n\t\r\n\t\t\t\tBufferedImage image = MappedImageFactory.createCompatibleMappedImage(width, height, spec);\r\n\t\t\t\t\t\t\r\n\t\t\t\tImageReadParam param = reader.getDefaultReadParam();\r\n\t\t\t\tparam.setDestination(image);\r\n\t\r\n\t\t\t\timage = reader.read(0, param);\r\n\t\t\t\t\r\n\t\t\t\tstream.close();\r\n\t\t\t\tinput.close();\r\n\t\r\n\t\t\t\tinitialize(image, label);\r\n\t\t\t\treturn image;\r\n\t\t\t} catch (MalformedURLException e) {\r\n\t\t\t\t\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\t\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\nThis is the initialize function where I add the images and the JLabel to the JPanel:\r\n\r\n    private void initialize(BufferedImage image, JLabel label) {\r\n\t\t\tGridBagConstraints c =  new GridBagConstraints(0,0,1,1,0,0, GridBagConstraints.NORTHWEST, GridBagConstraints.NORTHWEST, \r\n\t\t\t    \t\tnew Insets(0, 0, 0, 0), 0, 0);\r\n\t\t\t\t\t\t    \r\n\t\t\tJLabel imgLabel = new JLabel(new ImageIcon(image));\r\n\t\t\t    \r\n\t\t\tint placeInY = 0;\r\n\t\t\t\r\n\t\t\tc.fill = GridBagConstraints.BOTH;\r\n\t\t\tc.weightx = 0;\r\n\t\t\tc.weighty = 0;\r\n\t\t\tc.gridx = 0;\r\n\t\t\tc.gridy = placeInY++;\r\n\t\t\tc.gridheight = 1;\r\n\t\t\tc.gridwidth = 8;\r\n\t\t\tpane.add(imgLabel, c);\r\n\t\t\t\t\r\n\t\t\tc.fill = GridBagConstraints.BOTH;\r\n\t\t\tc.weightx = 0;\r\n\t\t\tc.weighty = 0;\r\n\t\t\tc.gridx = 2;\r\n\t\t\tc.gridy = placeInY++;\r\n\t\t\tc.gridheight = 1;\r\n\t\t\tc.gridwidth = 1;\r\n\t\t\tpane.add(label, c);\r\n\t\t\t\r\n\t\t\tthis.add(pane);\r\n\t\t}\r\n\r\nAnd this is my main function:\r\n\r\n    public static void main(String[] args) {\r\n\t\t\tfinal DisplayImage page = new DisplayImage();\r\n\t\r\n\t\t\tfinal Thread t1 = new Thread(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\twhile(true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tTimeUnit.MILLISECONDS.sleep(100);\r\n\t\t\t\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpage.removeAll();\r\n\t\t\t\t\t\tpage.updatePane(new JLabel(&quot;New Image&quot;));\r\n\t\t\t\t\t\tpage.validate();\r\n\t\t\t\t\t\tpage.repaint();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\t\t\t\t\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tt1.start();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\nThe error occurs in the line `image = reader.read(0, param);`\r\n\r\nI checked out this error message and it is said that there are a couple of reasons this error to occur.\r\n\r\nOne of them is that the source of the images may be invalid but I checked and the server keeps providing the images.\r\n\r\nOne of them is that the RAM may be out of memory (memory leakage). I don&#39;t know for sure but this seems more like it.\r\n\r\nIf this error is caused by memory leakage, how do I solve it?\r\n\r\nNote: I am using this code for streaming images: https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java\r\n\r\nEDIT: I am having this issue in my linux system which has 512 MB of RAM. I tried to get this error on my PC which has 16 GB of RAM but the error didn&#39;t occur even though I have waited for 45 minutes.\r\n\r\nI have monitored the JVM for 45 minutes with VisualVM. Here is the heap and metaspace:\r\n\r\n[![Heap][1]][1]\r\n\r\n[![Metaspace][2]][2]\r\n\r\nHeap didn&#39;t increase but metaspace kept increasing. I am still watching and it is still increasing. But the metaspace size increases automatically too.\r\n\r\nAs I have read [here][3], the metaspace size increases automatically, if it is needed. But in my opinion; if there is no unused RAM left to increase the size, it could cause a memory leakage error. As I have mentioned above, I am getting this error on my Linux system which has 512 MB of RAM.\r\n\r\nI reckon, I have to wait so freakishly much more for this error to occur on my PC of 16 GB of RAM.\r\n\r\nDo you think I am right about the memory leakage? If so, how do I solve it?\r\n\r\nEDIT 2: I have checked the memory usage of the JVM in my Linux System. Here are the results of them after getting the error:\r\n\r\n \t&gt;sudo jcmd 1955 GC.heap_info\r\n\tJava HotSpot(TM) Client VM warning: Insufficient space for shared memory file:\r\n\t2616\r\n\tTry using the -Djava.io.tmpdir= option to select an alternate temp location.\r\n\r\n\t1955:\r\n\t def new generation   total 2560K, used 747K [0xac200000, 0xac4c0000, 0xaec00000)\r\n\t  eden space 2304K,  32% used [0xac200000, 0xac2baf78, 0xac440000)\r\n\t  from space 256K,   0% used [0xac440000, 0xac440000, 0xac480000)\r\n\t  to   space 256K,   0% used [0xac480000, 0xac480000, 0xac4c0000)\r\n\t tenured generation   total 5504K, used 5210K [0xaec00000, 0xaf160000, 0xb4000000)\r\n\t   the space 5504K,  94% used [0xaec00000, 0xaf1169d8, 0xaf116a00, 0xaf160000)\r\n\t Metaspace       used 7798K, capacity 7957K, committed 8088K, reserved 8496K\r\n\r\nI couldn&#39;t lower my metaspace size under 10 MB because it instantly gave the out of memory error below. So I lowered my Metaspace to 13 MB and heap size to 40MB on my PC with the command:\r\n\r\n    java -jar -XX:MaxMetaspaceSize=13m -Xmx40m --illegal-access=warn gui.for.linux-0.0.1-SNAPSHOT.jar\r\n\r\nBut when metaspace was full, I got this error:\r\n\r\n&gt; Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;StreamCloser&quot;\r\n\r\nSo I couldn&#39;t reproduce the error that I am getting on the Linux system by lowering heap and metaspace size on my PC.\r\n\r\nBut metaspace of JVM in Linux system is 94% used after it gives an error.\r\n\r\nI couldn&#39;t figure out what is causing the error to occur.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xcfqK.png\r\n  [2]: https://i.stack.imgur.com/3ELEk.png\r\n  [3]: https://www.baeldung.com/java-permgen-metaspace#introduction","title":"Is This Because of Memory Leakeage?","body":"<p>I am constantly getting images from a local server and I want to show them on the JPanel.</p>\n<p>I wrote a code that works for a while without any issue. But after some time (approximately 5 min), I get this error:</p>\n<blockquote>\n<p>Exception in thread &quot;Thread-0&quot; java.lang.InternalError: a fault occurred in an unsafe memory access operation</p>\n<p>at com.sun.imageio.plugins.jpeg.JPEGImageReader.readImage(Native Method)<br />\nat com.sun.imageio.plugins.jpeg.JPEGImageReader.readInternal(JPEGImageR$<br />\nat com.sun.imageio.plugins.jpeg.JPEGImageReader.read(JPEGImageReader.ja$<br />\nat SICK.DisplayImage.updatePane(DisplayImage.java:225)<br />\nat SICK.DisplayImage.access$000(DisplayImage.java:35)<br />\nat SICK.DisplayImage$1.run(DisplayImage.java:356)<br />\nat java.lang.Thread.run(Thread.java:748)</p>\n</blockquote>\n<p>This is where I read images from the server:</p>\n<pre><code>private BufferedImage updatePane(JLabel label) {\n\n        try {\n            InputStream input = new URL(&quot;http://192.168.250.21:8080/NewImage.jpg&quot;).openStream();\n            \n            ImageInputStream stream = ImageIO.createImageInputStream(input);\n            \n            ImageReader reader = ImageIO.getImageReaders(stream).next(); \n\n            reader.setInput(stream);\n\n            int width = reader.getWidth(0);\n            int height = reader.getHeight(0);\n            ImageTypeSpecifier spec = reader.getImageTypes(0).next(); \n\n            BufferedImage image = MappedImageFactory.createCompatibleMappedImage(width, height, spec);\n                    \n            ImageReadParam param = reader.getDefaultReadParam();\n            param.setDestination(image);\n\n            image = reader.read(0, param);\n            \n            stream.close();\n            input.close();\n\n            initialize(image, label);\n            return image;\n        } catch (MalformedURLException e) {\n            \n            e.printStackTrace();\n        } catch (IOException e) {\n            \n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n<p>This is the initialize function where I add the images and the JLabel to the JPanel:</p>\n<pre><code>private void initialize(BufferedImage image, JLabel label) {\n        GridBagConstraints c =  new GridBagConstraints(0,0,1,1,0,0, GridBagConstraints.NORTHWEST, GridBagConstraints.NORTHWEST, \n                    new Insets(0, 0, 0, 0), 0, 0);\n                        \n        JLabel imgLabel = new JLabel(new ImageIcon(image));\n            \n        int placeInY = 0;\n        \n        c.fill = GridBagConstraints.BOTH;\n        c.weightx = 0;\n        c.weighty = 0;\n        c.gridx = 0;\n        c.gridy = placeInY++;\n        c.gridheight = 1;\n        c.gridwidth = 8;\n        pane.add(imgLabel, c);\n            \n        c.fill = GridBagConstraints.BOTH;\n        c.weightx = 0;\n        c.weighty = 0;\n        c.gridx = 2;\n        c.gridy = placeInY++;\n        c.gridheight = 1;\n        c.gridwidth = 1;\n        pane.add(label, c);\n        \n        this.add(pane);\n    }\n</code></pre>\n<p>And this is my main function:</p>\n<pre><code>public static void main(String[] args) {\n        final DisplayImage page = new DisplayImage();\n\n        final Thread t1 = new Thread(new Runnable() {\n            \n            public void run() {\n                while(true) {\n                \n                    try {\n                        TimeUnit.MILLISECONDS.sleep(100);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    page.removeAll();\n                    page.updatePane(new JLabel(&quot;New Image&quot;));\n                    page.validate();\n                    page.repaint();\n                }\n            }\n        });\n        \n        SwingUtilities.invokeLater(new Runnable() {\n            \n            public void run() {\n                t1.start();\n            }\n        });\n    }\n</code></pre>\n<p>The error occurs in the line <code>image = reader.read(0, param);</code></p>\n<p>I checked out this error message and it is said that there are a couple of reasons this error to occur.</p>\n<p>One of them is that the source of the images may be invalid but I checked and the server keeps providing the images.</p>\n<p>One of them is that the RAM may be out of memory (memory leakage). I don't know for sure but this seems more like it.</p>\n<p>If this error is caused by memory leakage, how do I solve it?</p>\n<p>Note: I am using this code for streaming images: <a href=\"https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java\" rel=\"nofollow noreferrer\">https://github.com/haraldk/TwelveMonkeys/blob/master/sandbox/sandbox-common/src/main/java/com/twelvemonkeys/image/MappedImageFactory.java</a></p>\n<p>EDIT: I am having this issue in my linux system which has 512 MB of RAM. I tried to get this error on my PC which has 16 GB of RAM but the error didn't occur even though I have waited for 45 minutes.</p>\n<p>I have monitored the JVM for 45 minutes with VisualVM. Here is the heap and metaspace:</p>\n<p><a href=\"https://i.stack.imgur.com/xcfqK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xcfqK.png\" alt=\"Heap\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/3ELEk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ELEk.png\" alt=\"Metaspace\" /></a></p>\n<p>Heap didn't increase but metaspace kept increasing. I am still watching and it is still increasing. But the metaspace size increases automatically too.</p>\n<p>As I have read <a href=\"https://www.baeldung.com/java-permgen-metaspace#introduction\" rel=\"nofollow noreferrer\">here</a>, the metaspace size increases automatically, if it is needed. But in my opinion; if there is no unused RAM left to increase the size, it could cause a memory leakage error. As I have mentioned above, I am getting this error on my Linux system which has 512 MB of RAM.</p>\n<p>I reckon, I have to wait so freakishly much more for this error to occur on my PC of 16 GB of RAM.</p>\n<p>Do you think I am right about the memory leakage? If so, how do I solve it?</p>\n<p>EDIT 2: I have checked the memory usage of the JVM in my Linux System. Here are the results of them after getting the error:</p>\n<pre><code>&gt;sudo jcmd 1955 GC.heap_info\nJava HotSpot(TM) Client VM warning: Insufficient space for shared memory file:\n2616\nTry using the -Djava.io.tmpdir= option to select an alternate temp location.\n\n1955:\n def new generation   total 2560K, used 747K [0xac200000, 0xac4c0000, 0xaec00000)\n  eden space 2304K,  32% used [0xac200000, 0xac2baf78, 0xac440000)\n  from space 256K,   0% used [0xac440000, 0xac440000, 0xac480000)\n  to   space 256K,   0% used [0xac480000, 0xac480000, 0xac4c0000)\n tenured generation   total 5504K, used 5210K [0xaec00000, 0xaf160000, 0xb4000000)\n   the space 5504K,  94% used [0xaec00000, 0xaf1169d8, 0xaf116a00, 0xaf160000)\n Metaspace       used 7798K, capacity 7957K, committed 8088K, reserved 8496K\n</code></pre>\n<p>I couldn't lower my metaspace size under 10 MB because it instantly gave the out of memory error below. So I lowered my Metaspace to 13 MB and heap size to 40MB on my PC with the command:</p>\n<pre><code>java -jar -XX:MaxMetaspaceSize=13m -Xmx40m --illegal-access=warn gui.for.linux-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>But when metaspace was full, I got this error:</p>\n<blockquote>\n<p>Exception: java.lang.OutOfMemoryError thrown from the UncaughtExceptionHandler in thread &quot;StreamCloser&quot;</p>\n</blockquote>\n<p>So I couldn't reproduce the error that I am getting on the Linux system by lowering heap and metaspace size on my PC.</p>\n<p>But metaspace of JVM in Linux system is 94% used after it gives an error.</p>\n<p>I couldn't figure out what is causing the error to occur.</p>\n"},{"tags":["java","intellij-idea","continuous-integration","build-automation"],"comments":[{"owner":{"account_id":299330,"reputation":1221,"user_id":605869,"display_name":"Tom"},"score":2,"creation_date":1336017494,"post_id":10424877,"comment_id":13453205,"body_markdown":"Maybe try a Maven project? I find it much easier to manage a pom.xml than a complex ant build.","body":"Maybe try a Maven project? I find it much easier to manage a pom.xml than a complex ant build."},{"owner":{"account_id":967027,"reputation":115,"user_id":990288,"display_name":"Matt Daley"},"score":0,"creation_date":1336017875,"post_id":10424877,"comment_id":13453254,"body_markdown":"@MadcoreTom thanks for your reply. How would I use a Maven project in this case? The same problem exists: I have no way to export/convert my IntelliJ IDEA project to a Maven project.","body":"@MadcoreTom thanks for your reply. How would I use a Maven project in this case? The same problem exists: I have no way to export/convert my IntelliJ IDEA project to a Maven project."},{"owner":{"account_id":299330,"reputation":1221,"user_id":605869,"display_name":"Tom"},"score":0,"creation_date":1336018555,"post_id":10424877,"comment_id":13453394,"body_markdown":"Its a manual process which requires you to put all of the external dependencies and build tasks and such into the `pom.xml` file. You can then run maven from the commandline, and Jenkins integrates well with it too. You can build it from IntelliJ by adding a new Run configuration.\nPerhaps someone else can elaborate on this process.","body":"Its a manual process which requires you to put all of the external dependencies and build tasks and such into the <code>pom.xml</code> file. You can then run maven from the commandline, and Jenkins integrates well with it too. You can build it from IntelliJ by adding a new Run configuration. Perhaps someone else can elaborate on this process."}],"answers":[{"tags":[],"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1336021714,"creation_date":1336020845,"answer_id":10425334,"question_id":10424877,"body_markdown":"Converting your project to fit with maven is easier to do than customizing Maven to work with your project structure. \r\n\r\nAlthough you could do the latter, most of the time people don&#39;t design the way their project is laid out very cleanly at all, and after they adopt the maven layout, their project becomes much more manageable.\r\n\r\nIf you adapt the good patterns of a default maven project layout, IDEA will automatically read it and understand it completely - even sharing the same compiler output you use on the command line in the IDE. IDEA will use the pom.xml as its configuration file.\r\n\r\nYou can&#39;t do this with Ant, because it&#39;s a build process wrapper. Maven is not only a dependency management mechanism - it&#39;s an abstraction of a project, which an IDE can use to configure itself. ","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>Converting your project to fit with maven is easier to do than customizing Maven to work with your project structure. </p>\n\n<p>Although you could do the latter, most of the time people don't design the way their project is laid out very cleanly at all, and after they adopt the maven layout, their project becomes much more manageable.</p>\n\n<p>If you adapt the good patterns of a default maven project layout, IDEA will automatically read it and understand it completely - even sharing the same compiler output you use on the command line in the IDE. IDEA will use the pom.xml as its configuration file.</p>\n\n<p>You can't do this with Ant, because it's a build process wrapper. Maven is not only a dependency management mechanism - it's an abstraction of a project, which an IDE can use to configure itself. </p>\n"},{"tags":[],"owner":{"account_id":50772,"reputation":8116,"user_id":151501,"accept_rate":88,"display_name":"sylvanaar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1336227794,"creation_date":1336227794,"answer_id":10462750,"question_id":10424877,"body_markdown":"You could use TeamCity to build your IntelliJ project. This works just fine, is automated, and there are many plugins that let you run command line tasks, ant tasks, etc.\r\n\r\nThis is one of the workflows I use regularly.\r\n\r\nTeamCity functions as an Ivy repository. so you don&#39;t have to set up artifactory.\r\n\r\nI do like maven though. It all really depends on what your needs are. Maven is great as long as you want do things the maven way - which is a pretty good workflow.\r\n\r\nFor the record few IDE&#39;s handle Maven projects well. IntelliJ does a decent job.","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>You could use TeamCity to build your IntelliJ project. This works just fine, is automated, and there are many plugins that let you run command line tasks, ant tasks, etc.</p>\n\n<p>This is one of the workflows I use regularly.</p>\n\n<p>TeamCity functions as an Ivy repository. so you don't have to set up artifactory.</p>\n\n<p>I do like maven though. It all really depends on what your needs are. Maven is great as long as you want do things the maven way - which is a pretty good workflow.</p>\n\n<p>For the record few IDE's handle Maven projects well. IntelliJ does a decent job.</p>\n"},{"tags":[],"owner":{"account_id":26600663,"reputation":1,"user_id":20222352,"display_name":"Salman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683230213,"creation_date":1683229719,"answer_id":76176901,"question_id":10424877,"body_markdown":"using intelliJ, look here: https://www.youtube.com/watch?v=870XIYMrlSo\r\n\r\nautomation (i.e. running jar file via terminal) requires adding maven-assembly-plugin to pom file\r\n\r\nalternatively following works with terminal as of 2023-05-04\r\n\r\non macOS, open terminal\r\n\r\ninstall maven using homebrew: brew install maven\r\n\r\ncheck maven version just in case: mvn --version\r\n\r\nnavigate to the directory where maven will be installed and setup maven project (please adjust according to your project structure)\r\n\r\n    mvn archetype:generate -DgroupId=com.salman.app -DartifactId=myapp -DarchetypeArtifactId=maven-archetype-quickstart -Darchetypeversion=1.4 -DinteractiveMode=false\r\n\r\nNavigate to folder with pom file\r\n\r\nchange pom xml (presented later)\r\n\r\nrun mvn package\r\nnavigate to directory where .jar is found\r\njava -jar &quot;name of jar file&quot;\r\n\r\nSuggestion for pom file (please update to adjust your project folder structure)\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\r\n                          http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;com.salman.app&lt;/groupId&gt;\r\n      &lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;myapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.10.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;8&lt;/source&gt;\r\n              &lt;target&gt;8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n              &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n              &lt;/descriptorRefs&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifest&gt;\r\n                  &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                  &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\r\n                &lt;/manifest&gt;\r\n              &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n    \r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>using intelliJ, look here: <a href=\"https://www.youtube.com/watch?v=870XIYMrlSo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=870XIYMrlSo</a></p>\n<p>automation (i.e. running jar file via terminal) requires adding maven-assembly-plugin to pom file</p>\n<p>alternatively following works with terminal as of 2023-05-04</p>\n<p>on macOS, open terminal</p>\n<p>install maven using homebrew: brew install maven</p>\n<p>check maven version just in case: mvn --version</p>\n<p>navigate to the directory where maven will be installed and setup maven project (please adjust according to your project structure)</p>\n<pre><code>mvn archetype:generate -DgroupId=com.salman.app -DartifactId=myapp -DarchetypeArtifactId=maven-archetype-quickstart -Darchetypeversion=1.4 -DinteractiveMode=false\n</code></pre>\n<p>Navigate to folder with pom file</p>\n<p>change pom xml (presented later)</p>\n<p>run mvn package\nnavigate to directory where .jar is found\njava -jar &quot;name of jar file&quot;</p>\n<p>Suggestion for pom file (please update to adjust your project folder structure)</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0\n                      http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.salman.app&lt;/groupId&gt;\n  &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;myapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.10.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;8&lt;/source&gt;\n          &lt;target&gt;8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;mainClass&gt;com.salman.app.App&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":967027,"reputation":115,"user_id":990288,"display_name":"Matt Daley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4329,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"closed_date":1683233730,"accepted_answer_id":10425334,"answer_count":3,"score":8,"last_activity_date":1683230213,"creation_date":1336017323,"question_id":10424877,"body_markdown":"I am trying to set up a continuous integration system for a Java project I am working on. I plan to use Jenkins or some equivalent for the front end. The Java project is configured to use the IntelliJ IDEA IDE, version 11. The problem is there is no way to build IntelliJ IDEA 11 projects from a command line interface, which is required so it can interface with the CI front-end (Jenkins).\n\nThere are a couple of potential solutions I have looked into. They are as follows.\n\n## Potential Solution # 1 ##\n\nUse the &quot;Generate Ant Build&quot; capability of IntelliJ IDEA. There are 2 problems with this solution:\n\n 1. It means I would have to either maintain the generated ant files as well as the IntelliJ idea configuration files, which I don&#39;t want to do, or I would have to programatically recreate the ant files periodically or on the fly, which is not feasible since there is no command line interface for this either.\n 2. It doesn&#39;t even work anyway. The project is fairly complex in that there are Java files that are configured to be excluded, and the generated ant files do not perform exclusion properly. Also, it looks like the dependencies are not even generated correctly. (Exhaustively) searching google tells me that this utility isn&#39;t even supported by IntelliJ, and it&#39;s use should be &quot;avoided&quot;.\n\n## Potential Solution # 2 ##\n\nUse a 3rd party application to dynamically generate ant build files, namely [ant-intellij-tasks][1]. When I saw this project I was pretty excited, but unfortunately it looks like it hasn&#39;t been updated since 2009 and doesn&#39;t work with the new version of IntelliJ IDEA. I can&#39;t find any other libraries like this one that are up to date and working.\n\n## Some Additional Notes ##\n\n[This link][2] suggests that others are having similar problems and want a command line interface (the link is a description of a plugin wanted for a contest - the source is IntelliJ IDEA themselves).\n\nHas anyone else set up build automation using this tool set? How did you get it done? The answer I&#39;m looking for ideally doesn&#39;t require management of additional configuration files and would allow me to type something on the command line and have the build happen.\n\n  [1]: http://code.google.com/p/ant-intellij-tasks/\n  [2]: http://plugins.intellij.net/wishlist/item/?wid=20","title":"How to automate the Java build process for IntelliJ IDEA 11 Projects?","body":"<p>I am trying to set up a continuous integration system for a Java project I am working on. I plan to use Jenkins or some equivalent for the front end. The Java project is configured to use the IntelliJ IDEA IDE, version 11. The problem is there is no way to build IntelliJ IDEA 11 projects from a command line interface, which is required so it can interface with the CI front-end (Jenkins).</p>\n<p>There are a couple of potential solutions I have looked into. They are as follows.</p>\n<h2>Potential Solution # 1</h2>\n<p>Use the &quot;Generate Ant Build&quot; capability of IntelliJ IDEA. There are 2 problems with this solution:</p>\n<ol>\n<li>It means I would have to either maintain the generated ant files as well as the IntelliJ idea configuration files, which I don't want to do, or I would have to programatically recreate the ant files periodically or on the fly, which is not feasible since there is no command line interface for this either.</li>\n<li>It doesn't even work anyway. The project is fairly complex in that there are Java files that are configured to be excluded, and the generated ant files do not perform exclusion properly. Also, it looks like the dependencies are not even generated correctly. (Exhaustively) searching google tells me that this utility isn't even supported by IntelliJ, and it's use should be &quot;avoided&quot;.</li>\n</ol>\n<h2>Potential Solution # 2</h2>\n<p>Use a 3rd party application to dynamically generate ant build files, namely <a href=\"http://code.google.com/p/ant-intellij-tasks/\" rel=\"noreferrer\">ant-intellij-tasks</a>. When I saw this project I was pretty excited, but unfortunately it looks like it hasn't been updated since 2009 and doesn't work with the new version of IntelliJ IDEA. I can't find any other libraries like this one that are up to date and working.</p>\n<h2>Some Additional Notes</h2>\n<p><a href=\"http://plugins.intellij.net/wishlist/item/?wid=20\" rel=\"noreferrer\">This link</a> suggests that others are having similar problems and want a command line interface (the link is a description of a plugin wanted for a contest - the source is IntelliJ IDEA themselves).</p>\n<p>Has anyone else set up build automation using this tool set? How did you get it done? The answer I'm looking for ideally doesn't require management of additional configuration files and would allow me to type something on the command line and have the build happen.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1683035295,"post_id":76154723,"comment_id":134302491,"body_markdown":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates.","body":"Unless your pdf is properly tagged, it is unclear for a content extractor whether an image is associated with the text above, the text below, or both. If you know that in your case images always are associated with the text above, you merely need to extract both text and images with coordinates and try to match them by those coordinates."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683054736,"post_id":76154723,"comment_id":134307030,"body_markdown":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates","body":"@mkl I&#39;m a beginner at this and can&#39;t figure out how to extract text coordinates"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683097006,"post_id":76154723,"comment_id":134312286,"body_markdown":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step.","body":"@KJ I have a 2049-page pdf that describes car repair procedures. I have parsed this pdf into steps. Where one item is, for example, “2. Remove the battery and battery tray(A).” is one step. If the step has a picture, I need to find this picture and add its ID to the mediaRef field (List&lt;Media&gt;). I uploaded the images earlier. I named the images with the page number + the sequence number of the image on the page (81_image_1). Now, I think that the images should be loaded at the moment when you attach it to the step."},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683130843,"post_id":76154723,"comment_id":134320442,"body_markdown":"@KJ I found the coordinates of a picture on a page.\nCould you please tell me which character coordinates I need to look for to compare with the coordinator of the image?","body":"@KJ I found the coordinates of a picture on a page. Could you please tell me which character coordinates I need to look for to compare with the coordinator of the image?"},{"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"score":0,"creation_date":1683195156,"post_id":76154723,"comment_id":134330573,"body_markdown":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about. \nhttps://i.postimg.cc/JzFXCWYq/1234.jpg","body":"I was able to find a link to the last character of the string and a link to a picture to see what I&#39;m talking about.  <a href=\"https://i.postimg.cc/JzFXCWYq/1234.jpg\" rel=\"nofollow noreferrer\">i.postimg.cc/JzFXCWYq/1234.jpg</a>"}],"answers":[{"comments":[{"owner":{"account_id":12536346,"reputation":980,"user_id":9122915,"accept_rate":50,"display_name":"Boudhayan Dev"},"score":1,"creation_date":1692290595,"post_id":76176927,"comment_id":135606442,"body_markdown":"Can you update the solution here ?","body":"Can you update the solution here ?"},{"owner":{"account_id":12536346,"reputation":980,"user_id":9122915,"accept_rate":50,"display_name":"Boudhayan Dev"},"score":1,"creation_date":1693065920,"post_id":76176927,"comment_id":135712152,"body_markdown":"The inability to express complexity in simpler words is the hallmark sign of an average developer. Anyway, I found an efficient way to retrieve text + images with their relative positions in the order described in the PDF (irrespective of the style or formatting of the PDF). Thought would share, but seems like you are content with your &quot;smart&quot; solution. Good luck.","body":"The inability to express complexity in simpler words is the hallmark sign of an average developer. Anyway, I found an efficient way to retrieve text + images with their relative positions in the order described in the PDF (irrespective of the style or formatting of the PDF). Thought would share, but seems like you are content with your &quot;smart&quot; solution. Good luck."}],"tags":[],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229926,"creation_date":1683229926,"answer_id":76176927,"question_id":76154723,"body_markdown":"I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>I solved the problem. I found the coordinates of all the last characters of the text lines on the page and compared them with the coordinates of the picture. If the Y coordinates of the image are less than the Y coordinates of the previous line and greater than the next line, then the image must be between these lines :)</p>\n"}],"owner":{"account_id":22346107,"reputation":89,"user_id":16565086,"display_name":"Vitalii Smahlenko"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683229926,"creation_date":1683029573,"question_id":76154723,"body_markdown":"everyone! \r\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\r\n[![enter image description here](https://i.stack.imgur.com/yao37.jpg)](https://i.stack.imgur.com/yao37.jpg)\r\n\r\n\r\n\r\nFirst I extracted all the text, then I extracted all the images with reference to the page. And now I can&#39;t figure out how to link them. \r\nI have a theory that I need to use the metadata of the text and images, but I can&#39;t figure out how to do it. \r\n\r\nI use Java 11, PDFbox 2.0.27\r\n\r\n```\r\npublic class PdfFileReaderService implements FileReaderService {\r\n    @Override\r\n    public String getAllTextFromFile(String filepath) {\r\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\r\n            PDFTextStripper stripper = new PDFTextStripper();\r\n            return stripper.getText(document);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get text from file: &quot; + filepath, e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\r\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\r\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\r\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\r\n                PDPage page = document.getPage(i);\r\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\r\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;Can&#39;t get images from file: &quot; + pathToFile);\r\n        }\r\n        return images;\r\n    }\r\n\r\n\r\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\r\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\r\n        for (COSName xObjectName : resources.getXObjectNames()) {\r\n            PDXObject xObject = resources.getXObject(xObjectName);\r\n            if (xObject instanceof PDFormXObject) {\r\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\r\n            } else if (xObject instanceof PDImageXObject) {\r\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\r\n                images.add(image);\r\n            }\r\n        }\r\n        return images;\r\n    }\r\n}\r\n```\r\n","title":"How to extract text and images from a pdf file and link them together in PDFbox 2.0.27?","body":"<p>everyone!\nCould you please help me figure out how to extract text and attach images to it? For example, in a file there is text describing a picture, and a picture under the text. There are many pictures in a PDF file, they can be of different sizes. There can also be several pictures with descriptions on one page.\n<a href=\"https://i.stack.imgur.com/yao37.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yao37.jpg\" alt=\"enter image description here\" /></a></p>\n<p>First I extracted all the text, then I extracted all the images with reference to the page. And now I can't figure out how to link them.\nI have a theory that I need to use the metadata of the text and images, but I can't figure out how to do it.</p>\n<p>I use Java 11, PDFbox 2.0.27</p>\n<pre><code>public class PdfFileReaderService implements FileReaderService {\n    @Override\n    public String getAllTextFromFile(String filepath) {\n        try (PDDocument document = PDDocument.load(new File(filepath))) {\n            PDFTextStripper stripper = new PDFTextStripper();\n            return stripper.getText(document);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get text from file: &quot; + filepath, e);\n        }\n    }\n\n    @Override\n    public Map&lt;Integer, List&lt;RenderedImage&gt;&gt; getAllImageFromFile(String pathToFile) {\n        Map&lt;Integer, List&lt;RenderedImage&gt;&gt; images = new HashMap&lt;&gt;();\n        try (PDDocument document = PDDocument.load(new File(pathToFile))) {\n            for (int i = 0; i &lt; document.getNumberOfPages(); i++) {\n                PDPage page = document.getPage(i);\n                List&lt;RenderedImage&gt; pageImages = getImagesFromResources(page.getResources());\n                images.put(i, pageImages.isEmpty() ? new ArrayList&lt;&gt;() : pageImages);\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Can't get images from file: &quot; + pathToFile);\n        }\n        return images;\n    }\n\n\n    private List&lt;RenderedImage&gt; getImagesFromResources(PDResources resources) throws IOException {\n        List&lt;RenderedImage&gt; images = new ArrayList&lt;&gt;();\n        for (COSName xObjectName : resources.getXObjectNames()) {\n            PDXObject xObject = resources.getXObject(xObjectName);\n            if (xObject instanceof PDFormXObject) {\n                images.addAll(getImagesFromResources(((PDFormXObject) xObject).getResources()));\n            } else if (xObject instanceof PDImageXObject) {\n                BufferedImage image = ((PDImageXObject) xObject).getImage();\n                images.add(image);\n            }\n        }\n        return images;\n    }\n}\n</code></pre>\n"},{"tags":["java","file","mockito"],"comments":[{"owner":{"account_id":417955,"reputation":18564,"user_id":794242,"accept_rate":80,"display_name":"Wand Maker"},"score":0,"creation_date":1373991729,"post_id":17681708,"comment_id":25759675,"body_markdown":"What is the objective of the test?  WHy not mock the BufferedWriter?","body":"What is the objective of the test?  WHy not mock the BufferedWriter?"},{"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1374002642,"post_id":17681708,"comment_id":25765572,"body_markdown":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file.","body":"BufferedWriter was to write files into the file so that the mocked file could be processed by another class. The other test is for testing and grading the contents of the html file."},{"owner":{"account_id":14448,"reputation":5643,"user_id":29734,"accept_rate":77,"display_name":"Chris Kessel"},"score":1,"creation_date":1374021644,"post_id":17681708,"comment_id":25773171,"body_markdown":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API.","body":"Rather than mocking File, try spy(new File(...)). Then you can when() only the behavior you really want to change rather than having to deal with the entire API."},{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":15,"creation_date":1374051912,"post_id":17681708,"comment_id":25783638,"body_markdown":"**DON&#39;T mock or spy a File!** This is not the proper way to do it. It&#39;s a test anti-pattern. More generally **Don&#39;t mock types you don&#39;t own!**. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !","body":"<b>DON&#39;T mock or spy a File!</b> This is not the proper way to do it. It&#39;s a test anti-pattern. More generally <b>Don&#39;t mock types you don&#39;t own!</b>. Instead focus a splitting the functionality between the code that access the file and the code that process the content. Jeff&#39;s answer is the way to go !"},{"owner":{"account_id":448569,"reputation":3796,"user_id":842832,"accept_rate":33,"display_name":"demaniak"},"score":0,"creation_date":1520399349,"post_id":17681708,"comment_id":85294199,"body_markdown":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking.","body":"I would say you absolute can (and should under certain circumstances) mock code you don&#39;t own - BUT ONLY  the interfaces! Your code should be working against interfaces anyway, not concrete implementations, where possible. java.io.File does not meet the interface requirement though. So BAD candidate for mocking."}],"answers":[{"comments":[{"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"score":14,"creation_date":1374051500,"post_id":17690371,"comment_id":25783387,"body_markdown":"+1 for not mocking a file and splitting the logic into different object with different concerns. **Also in a more general way it is not a good idea at all to mock types you don&#39;t own.** So I&#39;m rephrasing what Jeff said, but write an **integration test** that will assert the code that will open and/or write the file and provide either your own types or a `Reader`/`Writer` and write a **unit test** for the code that will process the content, of course you won&#39;t have to mock the `Reader`/`Writer` but use or assert content on the existing implementations like the `StringReader`/`StringWriter`.","body":"+1 for not mocking a file and splitting the logic into different object with different concerns. <b>Also in a more general way it is not a good idea at all to mock types you don&#39;t own.</b> So I&#39;m rephrasing what Jeff said, but write an <b>integration test</b> that will assert the code that will open and/or write the file and provide either your own types or a <code>Reader</code>/<code>Writer</code> and write a <b>unit test</b> for the code that will process the content, of course you won&#39;t have to mock the <code>Reader</code>/<code>Writer</code> but use or assert content on the existing implementations like the <code>StringReader</code>/<code>StringWriter</code>."},{"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1374069128,"post_id":17690371,"comment_id":25794365,"body_markdown":"Yes, that is what I would do if I could edit all the way down to it. I technically _can_ edit it, but can&#39;t because it would break present usability for others.","body":"Yes, that is what I would do if I could edit all the way down to it. I technically <i>can</i> edit it, but can&#39;t because it would break present usability for others."},{"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"score":0,"creation_date":1374073122,"post_id":17690371,"comment_id":25797446,"body_markdown":"Matt--like with `method` above, you can often insert your own test access without actually changing the external API. I understand that it may not be your part of the project, but if your job is to test someone else&#39;s hard-to-test class, that&#39;s generally worth trying to move things around to make it cleaner and easier. Good luck! :)","body":"Matt--like with <code>method</code> above, you can often insert your own test access without actually changing the external API. I understand that it may not be your part of the project, but if your job is to test someone else&#39;s hard-to-test class, that&#39;s generally worth trying to move things around to make it cleaner and easier. Good luck! :)"},{"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1374673218,"post_id":17690371,"comment_id":26032731,"body_markdown":"Thanks. I decided to by-pass it altogether and not even try to mock these, and just have to use real files, since trying to mock anything or substitute anything got in the way of the rest of the work.","body":"Thanks. I decided to by-pass it altogether and not even try to mock these, and just have to use real files, since trying to mock anything or substitute anything got in the way of the rest of the work."},{"owner":{"account_id":4461023,"reputation":2970,"user_id":3629892,"accept_rate":65,"display_name":"user3629892"},"score":1,"creation_date":1481881315,"post_id":17690371,"comment_id":69562485,"body_markdown":"How about using a virtual file system, such as JIMFS? When i test a service that copies a file form A to B and I let it copy inside the virtual file system, is that still a unit test? is that a good idea at all?","body":"How about using a virtual file system, such as JIMFS? When i test a service that copies a file form A to B and I let it copy inside the virtual file system, is that still a unit test? is that a good idea at all?"},{"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"score":0,"creation_date":1481903317,"post_id":17690371,"comment_id":69575698,"body_markdown":"@user3629892 Clever! That&#39;s probably just fine, bearing in mind that NIO was designed for that extra layer of abstraction that java.io.File typically lacks. Just realize it&#39;s [not a drop-in replacement](https://www.google.com/amp/www.javaworld.com/article/2078654/core-java/java-se-five-ways-to-maximize-java-nio-and-nio-2.amp.html) and that mocking NIO _classes_ is still a bad idea rendered unnecessary by in-memory behavior. I&#39;d still call it a unit test but I&#39;ll leave that for the philosophers.","body":"@user3629892 Clever! That&#39;s probably just fine, bearing in mind that NIO was designed for that extra layer of abstraction that java.io.File typically lacks. Just realize it&#39;s <a href=\"https://www.google.com/amp/www.javaworld.com/article/2078654/core-java/java-se-five-ways-to-maximize-java-nio-and-nio-2.amp.html\" rel=\"nofollow noreferrer\">not a drop-in replacement</a> and that mocking NIO <i>classes</i> is still a bad idea rendered unnecessary by in-memory behavior. I&#39;d still call it a unit test but I&#39;ll leave that for the philosophers."}],"tags":[],"owner":{"account_id":1529248,"reputation":92157,"user_id":1426891,"display_name":"Jeff Bowman"},"comment_count":6,"down_vote_count":0,"up_vote_count":81,"is_accepted":true,"score":81,"last_activity_date":1374187856,"creation_date":1374030164,"answer_id":17690371,"question_id":17681708,"body_markdown":"You seem to be after contradictory goals. On the one hand, you&#39;re trying to avoid writing data to disk, which isn&#39;t a bad goal in tests. On the other, you&#39;re trying to test your I/O-handling class, which means you&#39;ll be working with system utilities that assume that your `File` will work with native calls. As such, here&#39;s my guidance:\r\n\r\n  - Don&#39;t try to mock a `File`. Just don&#39;t. Too many native things depend on it.\r\n  - If you can, split your I/O-handling code into the half that opens a `File` and turns it into a `Reader`, and the half that parses HTML out of the `Reader`.\r\n  - At that point, you don&#39;t need a mock at all--just construct a [`StringReader`][2] to simulate the data source.\r\n  - While that handles your unit tests pretty well, you may also want to write an _integration test_ that uses a [temporary file][1] and ensure that it reads right. (Thanks Brice for adding that tip!)\r\n\r\nDon&#39;t be afraid to refactor your class to make testing easier, as here:\r\n\r\n    class YourClass {\r\n      public int method(File file) {\r\n        // do everything here, which is why it requires a mock\r\n      }   \r\n    }   \r\n\r\n    class YourRefactoredClass {\r\n      public int method(File file) {\r\n        return methodForTest(file.getName(), file.isFile(),\r\n            file.isAbsolute(), new FileReader(file));\r\n      }   \r\n\r\n      /** For testing only. */\r\n      int methodForTest(\r\n          String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\r\n        // actually do the calculation here\r\n      }   \r\n    }   \r\n\r\n    class YourTest {\r\n      @Test public int methodShouldParseBadHtml() {\r\n        YourRefactoredClass yrc = new YourRefactoredClass();\r\n        assertEquals(42, yrc.methodForTest(\r\n            &quot;bad.html&quot;, true, false, new StringReader(badHTMLText));\r\n      }   \r\n    }   \r\n\r\n\r\nAt this point the logic in `method` is so straightforward it&#39;s not worth testing,\r\nand the logic in `methodForTest` is so easy to access that you can test it heavily.\r\n\r\n[1]: https://stackoverflow.com/questions/876816/open-temp-file-in-java\r\n[2]: http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>You seem to be after contradictory goals. On the one hand, you're trying to avoid writing data to disk, which isn't a bad goal in tests. On the other, you're trying to test your I/O-handling class, which means you'll be working with system utilities that assume that your <code>File</code> will work with native calls. As such, here's my guidance:</p>\n\n<ul>\n<li>Don't try to mock a <code>File</code>. Just don't. Too many native things depend on it.</li>\n<li>If you can, split your I/O-handling code into the half that opens a <code>File</code> and turns it into a <code>Reader</code>, and the half that parses HTML out of the <code>Reader</code>.</li>\n<li>At that point, you don't need a mock at all--just construct a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/StringReader.html\" rel=\"noreferrer\"><code>StringReader</code></a> to simulate the data source.</li>\n<li>While that handles your unit tests pretty well, you may also want to write an <em>integration test</em> that uses a <a href=\"https://stackoverflow.com/questions/876816/open-temp-file-in-java\">temporary file</a> and ensure that it reads right. (Thanks Brice for adding that tip!)</li>\n</ul>\n\n<p>Don't be afraid to refactor your class to make testing easier, as here:</p>\n\n<pre><code>class YourClass {\n  public int method(File file) {\n    // do everything here, which is why it requires a mock\n  }   \n}   \n\nclass YourRefactoredClass {\n  public int method(File file) {\n    return methodForTest(file.getName(), file.isFile(),\n        file.isAbsolute(), new FileReader(file));\n  }   \n\n  /** For testing only. */\n  int methodForTest(\n      String name, boolean isFile, boolean isAbsolute, Reader fileContents) {\n    // actually do the calculation here\n  }   \n}   \n\nclass YourTest {\n  @Test public int methodShouldParseBadHtml() {\n    YourRefactoredClass yrc = new YourRefactoredClass();\n    assertEquals(42, yrc.methodForTest(\n        \"bad.html\", true, false, new StringReader(badHTMLText));\n  }   \n}   \n</code></pre>\n\n<p>At this point the logic in <code>method</code> is so straightforward it's not worth testing,\nand the logic in <code>methodForTest</code> is so easy to access that you can test it heavily.</p>\n"},{"tags":[],"owner":{"account_id":1474584,"reputation":876,"user_id":1385310,"accept_rate":63,"display_name":"Tian Na"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1526331237,"creation_date":1526330480,"answer_id":50338695,"question_id":17681708,"body_markdown":"One way to mock I/O calls (with Java 7 it would be the NIO final class `java.nio.file.Files`) is to wrap the needed calls in your own class and mock it:\r\n\r\n\r\n    public class FileHelper {\r\n    \r\n        public Path createDirectory(String directoryName) throws IOException {\r\n            return Files.createDirectory(Paths.get(directoryName));\r\n        }\r\n    \r\n        public boolean exists(String name) throws IOException {\r\n            return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\r\n        }\r\n    \r\n    }\r\n\r\nThe business logic is located in the `ImageManager`: \r\n\r\n    FileHelper fileHelperMock = Mockito.mock(new FileHelper());\r\n    ImageManager imageManager = new ImageManagerImpl(fileHelperMock);\r\n    \r\n\r\nThe test will verify the call to `createDirectory()` method on your mock:\r\n\r\n    imageManager.save(&quot;directory&quot;);\r\n    Mockito.verify(fileHelperMock).createDirectory(&quot;directory&quot;);\r\n\r\nI would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).\r\n\r\nThen I would have acceptance tests covering every use case with real file handling.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>One way to mock I/O calls (with Java 7 it would be the NIO final class <code>java.nio.file.Files</code>) is to wrap the needed calls in your own class and mock it:</p>\n\n<pre><code>public class FileHelper {\n\n    public Path createDirectory(String directoryName) throws IOException {\n        return Files.createDirectory(Paths.get(directoryName));\n    }\n\n    public boolean exists(String name) throws IOException {\n        return Files.exists(Paths.get(name), LinkOption.NOFOLLOW_LINKS);\n    }\n\n}\n</code></pre>\n\n<p>The business logic is located in the <code>ImageManager</code>: </p>\n\n<pre><code>FileHelper fileHelperMock = Mockito.mock(new FileHelper());\nImageManager imageManager = new ImageManagerImpl(fileHelperMock);\n</code></pre>\n\n<p>The test will verify the call to <code>createDirectory()</code> method on your mock:</p>\n\n<pre><code>imageManager.save(\"directory\");\nMockito.verify(fileHelperMock).createDirectory(\"directory\");\n</code></pre>\n\n<p>I would use this method during test driven development where I do not want to pollute testing with real file management (e.g. delete created directories/files in a finally block in each unit test).</p>\n\n<p>Then I would have acceptance tests covering every use case with real file handling.</p>\n"},{"comments":[{"owner":{"account_id":1867826,"reputation":1114,"user_id":1690929,"accept_rate":80,"display_name":"Andries"},"score":0,"creation_date":1669023711,"post_id":68381979,"comment_id":131540175,"body_markdown":"Simple and clean. Tnx!","body":"Simple and clean. Tnx!"}],"tags":[],"owner":{"account_id":15327413,"reputation":309,"user_id":11058155,"display_name":"Alan Hernandez"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1626280627,"creation_date":1626280627,"answer_id":68381979,"question_id":17681708,"body_markdown":"Another aproach is to generate a temporary file in an `@Before` block and then delete it in a `@After` method.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>Another aproach is to generate a temporary file in an <code>@Before</code> block and then delete it in a <code>@After</code> method.</p>\n"},{"tags":[],"owner":{"account_id":1660869,"reputation":5417,"user_id":1529195,"accept_rate":92,"display_name":"Patrick Goley"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683229776,"creation_date":1683226451,"answer_id":76176516,"question_id":17681708,"body_markdown":"This is not technically a mock but I have had success using a `File` reference to `/dev/null` which can be used in test code without performing any actual I/O (see [this answer on Unix SE][1]). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.\r\n\r\n\r\n  [1]: https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:~:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>This is not technically a mock but I have had success using a <code>File</code> reference to <code>/dev/null</code> which can be used in test code without performing any actual I/O (see <a href=\"https://unix.stackexchange.com/questions/90162/io-utilization-for-dev-null-redirection#:%7E:text=If%20a%20program%20writes%20to,the%20hardware%27s%20point%20of%20view.\">this answer on Unix SE</a>). Of course, it will always read as an empty file and writes to it will not be persisted, but it can otherwise act as a valid file, open streams, etc.</p>\n"}],"owner":{"account_id":2939897,"reputation":607,"user_id":2518037,"accept_rate":100,"display_name":"Matej"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155352,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":17690371,"answer_count":4,"score":48,"last_activity_date":1683229776,"creation_date":1373991089,"question_id":17681708,"body_markdown":"I&#39;m pretty new to mocking, and I&#39;ve been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.\r\n\r\nI&#39;ve tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don&#39;t work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I&#39;m approaching this wrong?\r\n\r\nI&#39;ve been doing it like this:\r\n             \r\n    private void mocking(){\r\n        File badHTML = mock(File.class);\r\n        //setting the properties of badHTML\r\n        when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.canRead()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\r\n        when(badHTML.delete()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.getFreeSpace()).thenReturn(0l);\r\n        when(badHTML.getName()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParent()).thenReturn(null);\r\n        when(badHTML.getPath()).thenReturn(&quot;bad.html&quot;);\r\n        when(badHTML.getParentFile()).thenReturn(null);\r\n        when(badHTML.getTotalSpace()).thenReturn(0l);\r\n        when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.isFile()).thenReturn(Boolean.TRUE);\r\n        when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\r\n        when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\r\n        when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\r\n        when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\r\n        \r\n        try {\r\n            BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\r\n            /*\r\n              badHTMLText is a string with the contents i want to put into the file, \r\n              can be just about whatever you want\r\n             */\r\n            bw.append(badHTMLText);\r\n            bw.close();\r\n            \r\n        } catch (IOException ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n\r\nAny ideas or guidance would be very helpful.\r\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn&#39;t take an inputstream, since it&#39;s the io handling class for the project.","title":"Mocking Files in Java - Mock Contents - Mockito","body":"<p>I'm pretty new to mocking, and I've been trying to mock the actual contents (essentially create a virtual file in memory alone) so that no data is written to disk at any point.</p>\n\n<p>I've tried solutions like mocking the file and mocking as many of the properties that I can figure out as much as possible, an then also writing into it with a filewriter/bufferedwriter, but those don't work well, since they need canonical paths. Anyone found a solution other than this or similar, but that I'm approaching this wrong?</p>\n\n<p>I've been doing it like this:</p>\n\n<pre><code>private void mocking(){\n    File badHTML = mock(File.class);\n    //setting the properties of badHTML\n    when(badHTML.canExecute()).thenReturn(Boolean.FALSE);\n    when(badHTML.canRead()).thenReturn(Boolean.TRUE);\n    when(badHTML.canWrite()).thenReturn(Boolean.TRUE);\n    when(badHTML.compareTo(badHTML)).thenReturn(Integer.SIZE);\n    when(badHTML.delete()).thenReturn(Boolean.FALSE);\n    when(badHTML.getFreeSpace()).thenReturn(0l);\n    when(badHTML.getName()).thenReturn(\"bad.html\");\n    when(badHTML.getParent()).thenReturn(null);\n    when(badHTML.getPath()).thenReturn(\"bad.html\");\n    when(badHTML.getParentFile()).thenReturn(null);\n    when(badHTML.getTotalSpace()).thenReturn(0l);\n    when(badHTML.isAbsolute()).thenReturn(Boolean.FALSE);\n    when(badHTML.isDirectory()).thenReturn(Boolean.FALSE);\n    when(badHTML.isFile()).thenReturn(Boolean.TRUE);\n    when(badHTML.isHidden()).thenReturn(Boolean.FALSE);\n    when(badHTML.lastModified()).thenReturn(System.currentTimeMillis());\n    when(badHTML.mkdir()).thenReturn(Boolean.FALSE);\n    when(badHTML.mkdirs()).thenReturn(Boolean.FALSE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(true)).thenReturn(Boolean.FALSE);\n    when(badHTML.setExecutable(false)).thenReturn(Boolean.TRUE);\n    when(badHTML.setReadOnly()).thenReturn(Boolean.FALSE);\n\n    try {\n        BufferedWriter bw = new BufferedWriter(new FileWriter(badHTML));\n        /*\n          badHTMLText is a string with the contents i want to put into the file, \n          can be just about whatever you want\n         */\n        bw.append(badHTMLText);\n        bw.close();\n\n    } catch (IOException ex) {\n        System.err.println(ex);\n    }\n}\n</code></pre>\n\n<p>Any ideas or guidance would be very helpful.\nSomewhere after this i basically try to read from the file using another class. I would try to mock some sort of input stream, but the other class doesn't take an inputstream, since it's the io handling class for the project.</p>\n"},{"tags":["java","sql","sql-server","mssql-jdbc"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":2,"creation_date":1677639411,"post_id":75599157,"comment_id":133376460,"body_markdown":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended.","body":"SQL doesn&#39;t work like that, its a static language, you can&#39;t use variables in place of object names. You need dynamic SQL if you really must do it that way, but its not recommended."},{"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"score":0,"creation_date":1677639719,"post_id":75599157,"comment_id":133376502,"body_markdown":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables","body":"so it can&#39;t be used as a global procedure ? since i will need to copy multiple tables"},{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1677640043,"post_id":75599157,"comment_id":133376542,"body_markdown":"The *normal* design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way.","body":"The <i>normal</i> design method with SQL is you create specific procedures for specific tables. As I said if you really must do it this way you can use dynamic sql (there are plenty of tutorials out there), but its highly recommended not to do it that way."}],"answers":[{"tags":[],"owner":{"account_id":1854123,"reputation":79,"user_id":1680071,"display_name":"EbrahimFarahmand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683228749,"creation_date":1677654430,"answer_id":75600507,"question_id":75599157,"body_markdown":"Please change the body of the stored procedure as follows:\r\n\r\n    ALTER PROCEDURE callProcedure\r\n        (@newTable varchar(100),\r\n         @tableField varchar(8000),\r\n         @table varchar(100))\r\n    AS\r\n    BEGIN\r\n        DECLARE @query NVARCHAR(MAX)\r\n\r\n        SET @query = &#39;DELETE FROM &#39; + @newTable + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; ON;&#39;;\r\n    \r\n        SET @query += &#39;INSERT INTO &#39; + @newTable + &#39;(&#39; + @tableField + &#39;) SELECT &#39; + @tableField + &#39; FROM &#39; + @table + &#39;;&#39;;\r\n    \r\n        SET @query += &#39;SET IDENTITY_INSERT &#39; + @newTable + &#39; OFF;&#39;;\r\n\r\n        EXEC (@query)\r\n    END","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>Please change the body of the stored procedure as follows:</p>\n<pre><code>ALTER PROCEDURE callProcedure\n    (@newTable varchar(100),\n     @tableField varchar(8000),\n     @table varchar(100))\nAS\nBEGIN\n    DECLARE @query NVARCHAR(MAX)\n\n    SET @query = 'DELETE FROM ' + @newTable + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' ON;';\n\n    SET @query += 'INSERT INTO ' + @newTable + '(' + @tableField + ') SELECT ' + @tableField + ' FROM ' + @table + ';';\n\n    SET @query += 'SET IDENTITY_INSERT ' + @newTable + ' OFF;';\n\n    EXEC (@query)\nEND\n</code></pre>\n"}],"owner":{"account_id":19237226,"reputation":15,"user_id":14057941,"display_name":"stuckherenthere"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228749,"creation_date":1677638987,"question_id":75599157,"body_markdown":"I&#39;m using Microsoft SQL Server and Java for this.\r\n\r\nI&#39;m intending to create a global procedure function, in which it will copy the records from 1 table to another table.\r\n\r\nMy current procedure:\r\n\r\n```\r\ncreate procedure callProcedure(@newTable varchar(100),\r\n@tableField varchar(8000),\r\n@table varchar(100))\r\nas\r\nbegin\r\nDELETE FROM @newTable;\r\n\r\nSET IDENTITY_INSERT @newTable ON;\r\n\r\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\r\n\r\nSET IDENTITY_INSERT @newTable OFF;\r\nend\r\n```\r\n\r\nWhen I execute the procedure.\r\nThis is the error that I received.\r\n&gt; SQL Error [102] [S0001]: Incorrect syntax near &#39;@newTable&#39;.\r\n\r\n\r\nSample final queries after being replaced with parameters\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nPlease help with this.\r\n\r\nThank you.\r\n\r\n\r\n\r\n```\r\nEXEC callProcedure(@newTable = &#39;EMPLOYEE_1&#39;, @tableField = &#39;ID, NAME, STATUS&#39;, @table = &#39;EMPLOYEE&#39;)\r\n```\r\n\r\nwill return the result.","title":"Stored Procedure with Multiple Queries and Parameters","body":"<p>I'm using Microsoft SQL Server and Java for this.</p>\n<p>I'm intending to create a global procedure function, in which it will copy the records from 1 table to another table.</p>\n<p>My current procedure:</p>\n<pre><code>create procedure callProcedure(@newTable varchar(100),\n@tableField varchar(8000),\n@table varchar(100))\nas\nbegin\nDELETE FROM @newTable;\n\nSET IDENTITY_INSERT @newTable ON;\n\nINSERT INTO @newTable(@tableField) SELECT @tableField FROM @table\n\nSET IDENTITY_INSERT @newTable OFF;\nend\n</code></pre>\n<p>When I execute the procedure.\nThis is the error that I received.</p>\n<blockquote>\n<p>SQL Error [102] [S0001]: Incorrect syntax near '@newTable'.</p>\n</blockquote>\n<p>Sample final queries after being replaced with parameters</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>Please help with this.</p>\n<p>Thank you.</p>\n<pre><code>EXEC callProcedure(@newTable = 'EMPLOYEE_1', @tableField = 'ID, NAME, STATUS', @table = 'EMPLOYEE')\n</code></pre>\n<p>will return the result.</p>\n"},{"tags":["java","windows","maven"],"answers":[{"comments":[{"owner":{"account_id":23636334,"reputation":11,"user_id":17667325,"display_name":"Javier Meza"},"score":0,"creation_date":1683227779,"post_id":76176455,"comment_id":134338679,"body_markdown":"Hi what I was testing is having the `math-util` jar file into another machine, to use it as a library, where I don&#39;t have the `parent-util` nor the `math-util` project in that machine, that&#39;s why Im defining a repository under `lib` and using the `&lt;repositories&gt;`, let&#39;s imagine this is a customer and we are just providing the Jar file to them","body":"Hi what I was testing is having the <code>math-util</code> jar file into another machine, to use it as a library, where I don&#39;t have the <code>parent-util</code> nor the <code>math-util</code> project in that machine, that&#39;s why Im defining a repository under <code>lib</code> and using the <code>&lt;repositories&gt;</code>, let&#39;s imagine this is a customer and we are just providing the Jar file to them"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683228358,"post_id":76176455,"comment_id":134338820,"body_markdown":"But that is not how Maven dependency management works. If your customer is&#39;t using maven, then they can add `&lt;systemPath&gt;${basedir}/lib/math-util-1.0.jar&lt;/systemPath&gt;` (SNAPSHOTS are Maven internal) to their dependency.","body":"But that is not how Maven dependency management works. If your customer is&#39;t using maven, then they can add <code>&lt;systemPath&gt;${basedir}&#47;lib&#47;math-util-1.0.jar&lt;&#47;systemPath&gt;</code> (SNAPSHOTS are Maven internal) to their dependency."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683225995,"creation_date":1683225995,"answer_id":76176455,"question_id":76176304,"body_markdown":"On windows the default location for the &quot;local&quot; repository is `C:\\Users\\&lt;User_Name&gt;\\.m2`.\r\n\r\nCalling `mvn clean install` in &quot;parent-util&quot; should cause both `parent-util` AND `math-util` to be installed locally.\r\n\r\nThere is no need to install the artifact or it&#39;s parent into your demo and you don&#39;t have to add `repositories` and `file://${project.basedir}/lib` etc..","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>On windows the default location for the &quot;local&quot; repository is <code>C:\\Users\\&lt;User_Name&gt;\\.m2</code>.</p>\n<p>Calling <code>mvn clean install</code> in &quot;parent-util&quot; should cause both <code>parent-util</code> AND <code>math-util</code> to be installed locally.</p>\n<p>There is no need to install the artifact or it's parent into your demo and you don't have to add <code>repositories</code> and <code>file://${project.basedir}/lib</code> etc..</p>\n"}],"owner":{"account_id":23636334,"reputation":11,"user_id":17667325,"display_name":"Javier Meza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683228485,"creation_date":1683224658,"question_id":76176304,"body_markdown":"I&#39;m testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure\r\n\r\n```\r\n/parent-util\r\n    /math-util\r\n        pom.xml\r\npom.xml\r\n```\r\nThis is the `pom.xml` of `parent-utl`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;math-util&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAnd this is the `pom.xml` of `math-util`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nAfter running `mvn clean install` I get the following jar file for my `math-util` library `math-util-1.0-SNAPSHOT.jar`\r\n\r\nThen I created another maven project, which I named `demo` my idea was to include the `math-util` library as a dependency, using a local repository inside `demo` (think about this as a customer who we are only providing the `math-util` jar file), so this is my folder structure for the `demo` project (I just copied and pasted the `math-util-1.0-SNAPSHOT.jar` inside so I can install it)\r\n\r\n\r\n```\r\n/demo\r\n    /lib\r\n    /src/java/...\r\n    math-util-1.0-SNAPSHOT.jar\r\n    pom.xml\r\n```\r\n\r\nBy using `mvn install` I installed my `math-lib` dependency inside the `lib` folder:\r\n\r\n```\r\nmvn install:install-file -Dfile=&#39;math-util-1.0-SNAPSHOT.jar&#39; -DgroupId=&#39;com.javi&#39; -DartifactId=&#39;math-util&#39; -Dversion=&#39;1.0-SNAPSHOT&#39; -DlocalRepositoryPath=&#39;lib&#39;\r\n```\r\n\r\nWhich works fine and I actually see the folders now inside `lib`, this is the output\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\r\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\r\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.499 s\r\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n\r\nNow my `pom.xml` for `demo` is the following, adding the `lib` folder as a repository and the `math-util` as a dependency\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;lib&lt;/id&gt;\r\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\r\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\r\n            &lt;releases&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\r\n            &lt;/releases&gt;\r\n            &lt;snapshots&gt;\r\n                &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;/snapshots&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nBut I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do `mvn clean install` I get the following issue\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\r\n[INFO] Building demo 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.394 s\r\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\r\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\r\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\r\n[ERROR]\r\n```\r\nWhich indicates maven is not able to resolve the parent POM file in this case `parent-util`, the weird thing is this is only failing for me on Windows\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried using `&lt;relativePath&gt;` on the `math-util` pom.xml file but it didnt work, also I tried changing the `&lt;url&gt;` inside the `demo` pom.xml thinking if this is an issue with the `file://` protocol but even if I add a full path this does not work.&lt;/code&gt;","title":"Maven on Windows not able to resolve parent POM from a custom library added as a dependency","body":"<p>I'm testing a multi module project on maven and also creating custom libraries to include in other Maven projects, and Im building a math-util lib, which is one of the modules of my project, so I have this folder structure</p>\n<pre><code>/parent-util\n    /math-util\n        pom.xml\npom.xml\n</code></pre>\n<p>This is the <code>pom.xml</code> of <code>parent-utl</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.javi&lt;/groupId&gt;\n    &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;modules&gt;\n        &lt;module&gt;math-util&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>And this is the <code>pom.xml</code> of <code>math-util</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.javi&lt;/groupId&gt;\n        &lt;artifactId&gt;parent-util&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>After running <code>mvn clean install</code> I get the following jar file for my <code>math-util</code> library <code>math-util-1.0-SNAPSHOT.jar</code></p>\n<p>Then I created another maven project, which I named <code>demo</code> my idea was to include the <code>math-util</code> library as a dependency, using a local repository inside <code>demo</code> (think about this as a customer who we are only providing the <code>math-util</code> jar file), so this is my folder structure for the <code>demo</code> project (I just copied and pasted the <code>math-util-1.0-SNAPSHOT.jar</code> inside so I can install it)</p>\n<pre><code>/demo\n    /lib\n    /src/java/...\n    math-util-1.0-SNAPSHOT.jar\n    pom.xml\n</code></pre>\n<p>By using <code>mvn install</code> I installed my <code>math-lib</code> dependency inside the <code>lib</code> folder:</p>\n<pre><code>mvn install:install-file -Dfile='math-util-1.0-SNAPSHOT.jar' -DgroupId='com.javi' -DartifactId='math-util' -Dversion='1.0-SNAPSHOT' -DlocalRepositoryPath='lib'\n</code></pre>\n<p>Which works fine and I actually see the folders now inside <code>lib</code>, this is the output</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- install:3.1.0:install-file (default-cli) @ demo ---\n[INFO] Installing C:\\Users\\jmeza\\IdeaProjects\\demo\\math-util-1.0-SNAPSHOT.jar to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.jar\n[INFO] Installing C:\\Users\\jmeza\\AppData\\Local\\Temp\\math-util-1.0-SNAPSHOT973893646697774711.pom to C:\\Users\\jmeza\\IdeaProjects\\demo\\lib\\com\\javi\\math-util\\1.0-SNAPSHOT\\math-util-1.0-SNAPSHOT.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.499 s\n[INFO] Finished at: 2023-05-04T10:05:30-06:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Now my <code>pom.xml</code> for <code>demo</code> is the following, adding the <code>lib</code> folder as a repository and the <code>math-util</code> as a dependency</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;lib&lt;/id&gt;\n            &lt;name&gt;Local Maven Repository&lt;/name&gt;\n            &lt;url&gt;file://${project.basedir}/lib&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;checksumPolicy&gt;ignore&lt;/checksumPolicy&gt;\n            &lt;/releases&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.javi&lt;/groupId&gt;\n            &lt;artifactId&gt;math-util&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>But I dont know why, and this is only failing for me on Windows (tried it on Ubuntu and Mac) when I try to do <code>mvn clean install</code> I get the following issue</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.394 s\n[INFO] Finished at: 2023-05-04T10:26:06-06:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal on project demo: Could not resolve dependencies for project org.example:demo:jar:1.0-SNAPSHOT: Failed to collect dependencies at com.javi:math-util:jar:1.0-SNAPSHOT: Failed to read arti\nfact descriptor for com.javi:math-util:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: com.javi:parent-util:pom:1.0-SNAPSHOT (absent): com.javi:parent-util:pom:1.0-SNAPSHOT was not found in file://C:\n\\Users\\jmeza\\IdeaProjects\\demo/lib during a previous attempt. This failure was cached in the local repository and resolution is not reattempted until the update interval of lib has elapsed or updates are forced -&gt; [Help 1]\n[ERROR]\n</code></pre>\n<p>Which indicates maven is not able to resolve the parent POM file in this case <code>parent-util</code>, the weird thing is this is only failing for me on Windows</p>\n<p>I have tried using <code>&lt;relativePath&gt;</code> on the <code>math-util</code> pom.xml file but it didnt work, also I tried changing the <code>&lt;url&gt;</code> inside the <code>demo</code> pom.xml thinking if this is an issue with the <code>file://</code> protocol but even if I add a full path this does not work.</p>\n"},{"tags":["java","php"],"answers":[{"tags":[],"owner":{"account_id":378910,"reputation":2990,"user_id":731931,"display_name":"xs0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1511111110,"creation_date":1511111110,"answer_id":47379541,"question_id":47379426,"body_markdown":"There are several bugs, but most of all you&#39;re just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:\r\n\r\n    $ctx = hash_init(&#39;md5&#39;);\r\n    hash_update($ctx, $header);\r\n    hash_update($ctx, $serial);\r\n    $raw = hash_final($ctx, true);\r\n    $out = substr(base64_encode($raw), 0, 10);\r\n\r\nOn Java side:\r\n\r\n    // ...\r\n    raw = md.digest();\r\n    out = Base64.getEncoder().encodeToString(raw).substring(0, 10);","title":"Java message digest update converted in PHP","body":"<p>There are several bugs, but most of all you're just overcomplicating things. Simply use base64 encoding and built-in functions. On PHP side:</p>\n\n<pre><code>$ctx = hash_init('md5');\nhash_update($ctx, $header);\nhash_update($ctx, $serial);\n$raw = hash_final($ctx, true);\n$out = substr(base64_encode($raw), 0, 10);\n</code></pre>\n\n<p>On Java side:</p>\n\n<pre><code>// ...\nraw = md.digest();\nout = Base64.getEncoder().encodeToString(raw).substring(0, 10);\n</code></pre>\n"}],"owner":{"account_id":2664419,"reputation":1,"user_id":2303282,"display_name":"AlberAls"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":47379541,"answer_count":1,"score":-1,"last_activity_date":1683228469,"creation_date":1511110447,"question_id":47379426,"body_markdown":"I have this code in Java [Pastebin link][1]. Sorry for pastebin link but SO doesn&#39;t allow me to paste that much code\r\n\r\nWhich outputs &quot;Ap1pAXP8yS&quot;\r\n\r\nI&#39;m trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ). \r\n\r\nThe main problem seems to be the md.update \r\n\r\nHere the code in PHP \r\n\r\n    function bin2print($hex)\r\n    {\r\n\t    $out = &quot;&quot;;\r\n        $mapping = [ &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;$&#39;, &#39;j&#39;, &#39;k&#39;, &#39;-&#39;, &#39;m&#39;, &#39;n&#39;, &#39;o&#39;, &#39;p&#39;, &#39;q&#39;, &#39;r&#39;, &#39;s&#39;, &#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39;, &#39;x&#39;, &#39;y&#39;, &#39;z&#39;, &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;=&#39;, &#39;J&#39;, &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;.&#39;, &#39;/&#39;, &#39;%&#39; ];\r\n        for ($i = 0; $i &lt; count($hex); $i++) {\r\n\t\t\r\n            $j = $hex[$i];\r\n\t\t\t\r\n\t\t\tif ($j &lt; 0) {\r\n\t\t\t\t$j = 256 + $j;\r\n\t\t\t}\r\n\r\n\t\t\t$out.=  $mapping [($j % count($mapping)) ];\r\n        }\r\n\t\treturn $out;\r\n\t}\r\n\r\n\tfunction byteStr2byteArray($s)\r\n    {\r\n\t\treturn array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\r\n\t} \r\n\t \r\n\t \r\n\tfunction getBytes($string)\r\n    {\r\n\t \r\n\t\t$bytes = array();\r\n\t\tfor($i = 0; $i &lt; strlen($string); $i++) {\r\n\t\t\t$bytes[] = ord($string[$i]);\r\n\t\t}\r\n\r\n\t\t$out = &#39;&#39;;\r\n\t\tforeach($bytes as $single) {\r\n\t\t\t$out.=$single ;\r\n\t\t}\r\n\t\treturn ($out);\r\n\t}\r\n\t \r\n\t$serial = &#39;111111111111&#39;;\r\n\t$header = &#39;cow&#39;;\r\n\r\n\t$ctx = hash_init(&#39;md5&#39; );\r\n\thash_update($ctx, getBytes($header));\r\n\thash_update($ctx, getBytes($serial));\r\n\t$raw = hash_final($ctx,true);\r\n\r\n\t$out = bin2print(byteStr2byteArray($raw));\r\n\r\n\techo substr($out,0,10);\r\n\r\nWhich outputs &quot;-fjk7WCU2E&quot;\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n  [1]: https://pastebin.com/Z08w46ut","title":"Java message digest update converted in PHP","body":"<p>I have this code in Java <a href=\"https://pastebin.com/Z08w46ut\" rel=\"nofollow noreferrer\">Pastebin link</a>. Sorry for pastebin link but SO doesn't allow me to paste that much code</p>\n<p>Which outputs &quot;Ap1pAXP8yS&quot;</p>\n<p>I'm trying to convert the code in PHP. Till now I have converted some but its not working OK ( not getting Ap1pAXP8yS in PHP ).</p>\n<p>The main problem seems to be the md.update</p>\n<p>Here the code in PHP</p>\n<pre><code>function bin2print($hex)\n{\n    $out = &quot;&quot;;\n    $mapping = [ '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', '$', 'j', 'k', '-', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', '=', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '.', '/', '%' ];\n    for ($i = 0; $i &lt; count($hex); $i++) {\n    \n        $j = $hex[$i];\n        \n        if ($j &lt; 0) {\n            $j = 256 + $j;\n        }\n\n        $out.=  $mapping [($j % count($mapping)) ];\n    }\n    return $out;\n}\n\nfunction byteStr2byteArray($s)\n{\n    return array_slice(unpack(&quot;C*&quot;, &quot;\\0&quot;.$s), 1);\n} \n \n \nfunction getBytes($string)\n{\n \n    $bytes = array();\n    for($i = 0; $i &lt; strlen($string); $i++) {\n        $bytes[] = ord($string[$i]);\n    }\n\n    $out = '';\n    foreach($bytes as $single) {\n        $out.=$single ;\n    }\n    return ($out);\n}\n \n$serial = '111111111111';\n$header = 'cow';\n\n$ctx = hash_init('md5' );\nhash_update($ctx, getBytes($header));\nhash_update($ctx, getBytes($serial));\n$raw = hash_final($ctx,true);\n\n$out = bin2print(byteStr2byteArray($raw));\n\necho substr($out,0,10);\n</code></pre>\n<p>Which outputs &quot;-fjk7WCU2E&quot;</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","jmx"],"owner":{"account_id":16720084,"reputation":31,"user_id":12085258,"display_name":"manikanta Nangunuri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683228447,"creation_date":1683228447,"question_id":76176750,"body_markdown":"We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\r\nThere are couple of properties which are having plain text passwords \r\n\r\n    -Djmxremote.password having file contains plain text passwords.\r\n    -Djavax.net.ssl.keystorePassword\r\n    -Djavax.net.ssl.TrustStorepassword.\r\n\r\nI have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values. \r\nAny leads on this is much appreciated.","title":"How to pass encypted values to jmx properties","body":"<p>We have our app running using jmx properties , which are passed in the command line arguments while starting the app as systempropties.\nThere are couple of properties which are having plain text passwords</p>\n<pre><code>-Djmxremote.password having file contains plain text passwords.\n-Djavax.net.ssl.keystorePassword\n-Djavax.net.ssl.TrustStorepassword.\n</code></pre>\n<p>I have my own encryption logic and am passing a encrypted values to them. Now I want to understand if we decrypt in the code those propertis and set them back to the systemproperties,  how can we make jmx to pick the latest values.\nAny leads on this is much appreciated.</p>\n"},{"tags":["java","lambda","java-stream"],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1683225947,"post_id":76175616,"comment_id":134338248,"body_markdown":"Calling `map` will remove the need to make up a dummy Person object.","body":"Calling <code>map</code> will remove the need to make up a dummy Person object."}],"tags":[],"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683219278,"creation_date":1683219278,"answer_id":76175616,"question_id":76175532,"body_markdown":"Try this\r\n```java\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\r\n}\r\n```","title":"How to return a value based on a property of a list of objects using streams","body":"<p>Try this</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String shortestPerson(List&lt;Person&gt; ps) {\n    return ps.stream().min(Comparator.comparing(Person::height)).orElse(new Person(&quot;No One&quot;, 0)).name;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683228189,"creation_date":1683228189,"answer_id":76176718,"question_id":76175532,"body_markdown":"In your `shortestPerson` method, you can do it like this. `Map` is a method of `Optional` which will take the `Object` and extract a different value.\r\n```\r\nstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n     return ps.stream().min(Comparator.comparingInt(Person::height))\r\n             .map(Person::name).get();\r\n    \r\n }","title":"How to return a value based on a property of a list of objects using streams","body":"<p>In your <code>shortestPerson</code> method, you can do it like this. <code>Map</code> is a method of <code>Optional</code> which will take the <code>Object</code> and extract a different value.</p>\n<pre><code>static String shortestPerson(List&lt;Person&gt; ps) {\n     return ps.stream().min(Comparator.comparingInt(Person::height))\n             .map(Person::name).get();\n    \n }\n</code></pre>\n"}],"owner":{"account_id":22367061,"reputation":11,"user_id":16582657,"display_name":"Andy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683228189,"creation_date":1683218705,"question_id":76175532,"body_markdown":"I need to return the name (String) of the Person record with shortest height using streams.\r\n\r\nI have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.\r\n\r\n\r\n```\r\n\r\n//Can not use for/while/if/shortestPerson\r\nimport java.util.List;\r\nimport java.util.ArrayList;\r\nimport java.util.Comparator;\r\nimport java.util.function.*;\r\n\r\nrecord Person(String name, int height) {\r\n}\r\n\r\npublic class Exercise {\r\n\t// this is where the implementation goes \r\n\tstatic String shortestPerson(List&lt;Person&gt; ps) {\r\n               String name= ps.stream().map.name.\r\n    \r\n  }\r\n\r\n\tstatic Person p(String name, int height) {\r\n\t\treturn new Person(name, height);\r\n\t}\r\n\r\n\tstatic void test(String expected, List&lt;Person&gt; input) {\r\n\t\tString res = shortestPerson(input);\r\n\t\tassert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\r\n\t}\r\n\r\n\tpublic static void main(String[] a) {\r\n\t\ttry {\r\n\t\t\tshortestPerson(List.of());\r\n\t\t\tassert false;\r\n\t\t} catch (IllegalArgumentException iae) {\r\n\t\t}\r\n\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\r\n\t\ttest(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\r\n\t\ttest(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\r\n\t\ttest(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\r\n\t\ttest(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\r\n\t}\r\n}\r\n\r\n```\r\n","title":"How to return a value based on a property of a list of objects using streams","body":"<p>I need to return the name (String) of the Person record with shortest height using streams.</p>\n<p>I have searched online but all i could find that kind of worked was finding the actual lowest int value, not the name of the Person with the lowest height. i just started learning streams and i find them so hard to understand. Any help is appreciated.</p>\n<pre><code>\n//Can not use for/while/if/shortestPerson\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.function.*;\n\nrecord Person(String name, int height) {\n}\n\npublic class Exercise {\n    // this is where the implementation goes \n    static String shortestPerson(List&lt;Person&gt; ps) {\n               String name= ps.stream().map.name.\n    \n  }\n\n    static Person p(String name, int height) {\n        return new Person(name, height);\n    }\n\n    static void test(String expected, List&lt;Person&gt; input) {\n        String res = shortestPerson(input);\n        assert res.equals(expected) : &quot;For input &quot; + input + &quot; we get &quot; + res + &quot; instead of &quot; + expected;\n    }\n\n    public static void main(String[] a) {\n        try {\n            shortestPerson(List.of());\n            assert false;\n        } catch (IllegalArgumentException iae) {\n        }\n\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 190)));\n        test(&quot;Adam&quot;, List.of(p(&quot;Adam&quot;, 220)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 190), p(&quot;Alice&quot;, 170)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 170), p(&quot;Alice&quot;, 190)));\n        test(&quot;Bob&quot;, List.of(p(&quot;Bob&quot;, 1), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 3)));\n        test(&quot;Dany&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 1)));\n        test(&quot;Alice&quot;, List.of(p(&quot;Bob&quot;, 3), p(&quot;Alice&quot;, 2), p(&quot;Dany&quot;, 5)));\n    }\n}\n\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":61566,"reputation":68934,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"score":0,"creation_date":1683222573,"post_id":76175919,"comment_id":134337544,"body_markdown":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that.","body":"Are there no clues in the remainder of the stacktrace? Is this ZipException the root cause, or caused by some other exception? And where is this exception thrown? The stack trace would tell you (or us, if you included the relevant part) all that."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223066,"post_id":76175919,"comment_id":134337646,"body_markdown":"add pic with stacktrace","body":"add pic with stacktrace"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1683223622,"post_id":76175919,"comment_id":134337757,"body_markdown":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those.","body":"The ZIP file your server reads is corrupted. Or, possibly, &#39;corrupted&#39; - zip is a container format with a billion variations, but there is a standard &#39;just choose these for it to be universally readable zip file&#39; - and it isn&#39;t one of those."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223818,"post_id":76175919,"comment_id":134337799,"body_markdown":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?","body":"Vary strange , if it corrupted why i dnt have any trable with read it on my PC.  And how to fix that?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":4,"creation_date":1683223833,"post_id":76175919,"comment_id":134337805,"body_markdown":"&quot;i get file from **ftp server**&quot; - the typical issue is ascii mode transfer.","body":"&quot;i get file from <b>ftp server</b>&quot; - the typical issue is ascii mode transfer."},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683223966,"post_id":76175919,"comment_id":134337833,"body_markdown":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?","body":"i retrieve not file but byte[] using FtpClient.retirievFileBytes(path to file). How to fix it Andey?"},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1683224211,"post_id":76175919,"comment_id":134337880,"body_markdown":"`FtpClient.setFileType(FTP.BINARY_FILE_TYPE)`","body":"<code>FtpClient.setFileType(FTP.BINARY_FILE_TYPE)</code>"},{"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"score":0,"creation_date":1683226880,"post_id":76175919,"comment_id":134338466,"body_markdown":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception","body":"not working - FtpClient.setFileType(FTP.BINARY_FILE_TYPE) set it when connect to Ftp and still get this exception"},{"owner":{"account_id":7121054,"reputation":5814,"user_id":5445670,"display_name":"Solomon Ucko"},"score":0,"creation_date":1683227154,"post_id":76175919,"comment_id":134338530,"body_markdown":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as `md5sum`/`sha1sum`/`sha256sum` (e.g. in [Debian&#39;s coreutils](https://packages.debian.org/bullseye/coreutils)) that you can run from the command line.","body":"Use some tool to get a hash/checksum of the file on each computer and make sure it&#39;s the same. If your server is on Linux, you probably have a tool such as <code>md5sum</code>/<code>sha1sum</code>/<code>sha256sum</code> (e.g. in <a href=\"https://packages.debian.org/bullseye/coreutils\" rel=\"nofollow noreferrer\">Debian&#39;s coreutils</a>) that you can run from the command line."}],"answers":[{"tags":[],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683228170,"creation_date":1683228170,"answer_id":76176714,"question_id":76175919,"body_markdown":"finally found solution \r\nbefore retrieve every file i put this function\r\n\r\n    ftp.setFileType(FTP.BINARY_FILE_TYPE);\r\n\r\nand then \r\n\r\n    InputStream inputStream = ftp.retrieveFileStream(path)\r\n\r\nand everything going good at local PC and server with linux","title":"How to split ZipInputStream into Inputstreams","body":"<p>finally found solution\nbefore retrieve every file i put this function</p>\n<pre><code>ftp.setFileType(FTP.BINARY_FILE_TYPE);\n</code></pre>\n<p>and then</p>\n<pre><code>InputStream inputStream = ftp.retrieveFileStream(path)\n</code></pre>\n<p>and everything going good at local PC and server with linux</p>\n"}],"owner":{"account_id":25486631,"reputation":101,"user_id":19282140,"display_name":"java developer 111"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176714,"answer_count":1,"score":0,"last_activity_date":1683228170,"creation_date":1683221470,"question_id":76175919,"body_markdown":"i get file from ftp server and parse it to some java class\r\n\r\n  \r\n\r\n     wrapper.connect();\r\n                byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\r\n                try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\r\n                    ZipEntry entry;\r\n                    while ((entry = zis.getNextEntry()) != null) {\r\n                        byte[] fileBytes = FileUtils.readZipEntry(zis);\r\n                        if (fileBytes.length == 0) {\r\n                            continue;\r\n                        }\r\n                        try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\r\n                            var model =  ftpFileReader.read(inputStream);\r\n                           \r\n                            domains.add(model);\r\n                        } \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return domains;\r\n        }\r\n\r\nand util method\r\n\r\n \r\n\r\n     public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\r\n            try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\r\n                byte[] buffer = new byte[1024];\r\n                int count;\r\n                while ((count = zis.read(buffer)) &gt; -1) {\r\n                    outputStream.write(buffer, 0, count);\r\n                }\r\n                return outputStream.toByteArray();\r\n            } finally {\r\n                zis.closeEntry();\r\n        \r\n\r\n    }\r\n    }\r\n\r\neverything works good on my local PC with windows, but if i deploy it on server i got \r\n\r\n    java.util.zip.ZipException: invalid distance too far back\r\n\r\ndont understand what is going wrong and how to fix i. Please help\r\n\r\n\r\nps. stacktrace\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RiOqe.png\r\n\r\n    org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\r\n            at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\r\n            at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\n    Caused by: java.util.zip.ZipException: invalid distance too far back\r\n            at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\r\n            at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\r\n            at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)","title":"How to split ZipInputStream into Inputstreams","body":"<p>i get file from ftp server and parse it to some java class</p>\n<pre><code> wrapper.connect();\n            byte[] archiveBytes = wrapper.retrieveFileBytes(&quot;some path&quot;);\n            try (ZipInputStream zis = new ZipInputStream(new ByteArrayInputStream(archiveBytes))) {\n                ZipEntry entry;\n                while ((entry = zis.getNextEntry()) != null) {\n                    byte[] fileBytes = FileUtils.readZipEntry(zis);\n                    if (fileBytes.length == 0) {\n                        continue;\n                    }\n                    try (InputStream inputStream = new ByteArrayInputStream(fileBytes)) {\n                        var model =  ftpFileReader.read(inputStream);\n                       \n                        domains.add(model);\n                    } \n                    }\n                }\n            }\n        }\n        return domains;\n    }\n</code></pre>\n<p>and util method</p>\n<pre><code> public static byte[] readZipEntry(ZipInputStream zis) throws IOException {\n        try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\n            byte[] buffer = new byte[1024];\n            int count;\n            while ((count = zis.read(buffer)) &gt; -1) {\n                outputStream.write(buffer, 0, count);\n            }\n            return outputStream.toByteArray();\n        } finally {\n            zis.closeEntry();\n    \n\n}\n}\n</code></pre>\n<p>everything works good on my local PC with windows, but if i deploy it on server i got</p>\n<pre><code>java.util.zip.ZipException: invalid distance too far back\n</code></pre>\n<p>dont understand what is going wrong and how to fix i. Please help</p>\n<p>ps. stacktrace</p>\n<p><a href=\"https://i.stack.imgur.com/RiOqe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RiOqe.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>org.springframework.retry.RetryException: Non-skippable exception in recoverer while processing; nested exception is java.util.zip.ZipException: invalid distance too far back\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor$2.recover(FaultTolerantChunkProcessor.java:299) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.retry.support.RetryTemplate.handleRetryExhausted(RetryTemplate.java:539) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:387) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:255) ~[spring-retry-1.3.3.jar!/:na]\n        at org.springframework.batch.core.step.item.BatchRetryTemplate.execute(BatchRetryTemplate.java:217) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.FaultTolerantChunkProcessor.transform(FaultTolerantChunkProcessor.java:308) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:210) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:77) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:407) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:331) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.23.jar!/:5.3.23]\n        at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:273) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145) ~[spring-batch-infrastructure-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:258) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:208) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:152) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:68) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) ~[spring-batch-core-4.3.7.jar!/:4.3.7]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.util.zip.ZipException: invalid distance too far back\n        at java.base/java.util.zip.InflaterInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.read(Unknown Source) ~[na:na]\n        at java.base/java.util.zip.ZipInputStream.closeEntry(Unknown Source) ~[na:na]\n        at ftp.utils.FileUtils.readZipEntry(FileUtils.java:18)\n</code></pre>\n"},{"tags":["java","spring","grpc"],"answers":[{"tags":[],"owner":{"account_id":27985045,"reputation":1,"user_id":21372081,"display_name":"付后钰"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678464929,"creation_date":1678464682,"answer_id":75698462,"question_id":75498501,"body_markdown":"Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\r\nThe update prevented grpc-client from autowiring.\r\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.\r\n\r\n[source code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0yQ4z.jpg","title":"@GrpcClient is null spring boot 3","body":"<p>Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\nThe update prevented grpc-client from autowiring.\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.</p>\n<p><a href=\"https://i.stack.imgur.com/0yQ4z.jpg\" rel=\"nofollow noreferrer\">source code</a></p>\n"},{"tags":[],"owner":{"account_id":12614140,"reputation":66,"user_id":9172198,"display_name":"Moh3n Sadeghi"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1683228055,"creation_date":1683103885,"answer_id":76162025,"question_id":75498501,"body_markdown":"Based on [this issue][1] you must use the following configuration in your project :\r\n\r\n    import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ImportAutoConfiguration({\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\r\n            net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\r\n            net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\r\n    \r\n            net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\r\n            net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\r\n    })\r\n    public class GrpcConfig {\r\n    }\r\n\r\n\r\n  [1]: https://github.com/yidongnan/grpc-spring-boot-starter/issues/823","title":"@GrpcClient is null spring boot 3","body":"<p>Based on <a href=\"https://github.com/yidongnan/grpc-spring-boot-starter/issues/823\" rel=\"noreferrer\">this issue</a> you must use the following configuration in your project :</p>\n<pre><code>import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ImportAutoConfiguration({\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\n\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\n\n        net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\n})\npublic class GrpcConfig {\n}\n</code></pre>\n"}],"owner":{"account_id":21417136,"reputation":2183,"user_id":15777370,"display_name":"vszholobov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1692,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76162025,"answer_count":2,"score":3,"last_activity_date":1683228055,"creation_date":1676790067,"question_id":75498501,"body_markdown":"I am making grpc client using `net.devh.grpc-client-spring-boot-starter`\r\n\r\nClient:\r\n```\r\n@Service\r\npublic class SystemService {\r\n    @GrpcClient(&quot;handyman-client&quot;)\r\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\r\n\r\n    public VersionResponse getHandymanVersion() {\r\n        return handymanClient.getVersion(Empty.newBuilder().build());\r\n    }\r\n}\r\n```\r\napplication.yaml:\r\n```\r\ngrpc:\r\n  client:\r\n    handyman-client:\r\n      address: static://localhost:8080\r\n      negotiationType: plaintext\r\n```\r\n\r\nIn runtime `handymanClient` is `null`. Tried spring boot versions from `3.0.0` to `3.0.2`. Lowering the spring boot version to `2.7.0` solves the problem - the client is being created now. \r\n\r\nIs there a workaround to make it work on spring boot 3?\r\n\r\nbuild.gradle:\r\n&lt;!-- begin snippet: js hide: true console: true babel: false --&gt;\r\n&lt;!-- language: lang-js --&gt;\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &quot;com.google.protobuf&quot; version &quot;0.9.2&quot;\r\n}\r\n\r\ngroup = &#39;hello.grpc&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation &#39;io.micrometer:micrometer-registry-prometheus&#39;\r\n    implementation &#39;javax.annotation:javax.annotation-api:1.3.2&#39;\r\n\r\n    implementation group: &#39;net.devh&#39;, name: &#39;grpc-client-spring-boot-starter&#39;, version: &#39;2.13.0.RELEASE&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-stub&#39;, version: &#39;1.53.0&#39;\r\n    implementation group: &#39;io.grpc&#39;, name: &#39;grpc-protobuf&#39;, version: &#39;1.53.0&#39;\r\n\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs &#39;build/generated/source/proto/main/grpc&#39;\r\n            srcDirs &#39;build/generated/source/proto/main/java&#39;\r\n        }\r\n    }\r\n}\r\n\r\nprotobuf {\r\n    protoc {\r\n        artifact = &#39;com.google.protobuf:protoc:4.0.0-rc-2&#39;\r\n    }\r\n    plugins {\r\n        grpc {\r\n            artifact = &#39;io.grpc:protoc-gen-grpc-java:1.53.0&#39;\r\n        }\r\n    }\r\n    generateProtoTasks {\r\n        all()*.plugins {\r\n\t\t\tgrpc {}\r\n        }\r\n    }\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\nspringBoot {\r\n    buildInfo()\r\n}\r\n&lt;!-- end snippet --&gt;","title":"@GrpcClient is null spring boot 3","body":"<p>I am making grpc client using <code>net.devh.grpc-client-spring-boot-starter</code></p>\n<p>Client:</p>\n<pre><code>@Service\npublic class SystemService {\n    @GrpcClient(&quot;handyman-client&quot;)\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\n\n    public VersionResponse getHandymanVersion() {\n        return handymanClient.getVersion(Empty.newBuilder().build());\n    }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>grpc:\n  client:\n    handyman-client:\n      address: static://localhost:8080\n      negotiationType: plaintext\n</code></pre>\n<p>In runtime <code>handymanClient</code> is <code>null</code>. Tried spring boot versions from <code>3.0.0</code> to <code>3.0.2</code>. Lowering the spring boot version to <code>2.7.0</code> solves the problem - the client is being created now.</p>\n<p>Is there a workaround to make it work on spring boot 3?</p>\n<p>build.gradle:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>plugins {\nid 'java'\nid 'org.springframework.boot' version '3.0.0'\nid 'io.spring.dependency-management' version '1.1.0'\nid \"com.google.protobuf\" version \"0.9.2\"\n}\n\ngroup = 'hello.grpc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\ncompileOnly {\n    extendsFrom annotationProcessor\n}\n}\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\nimplementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\ncompileOnly 'org.projectlombok:lombok'\nannotationProcessor 'org.projectlombok:lombok'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\nimplementation 'io.micrometer:micrometer-registry-prometheus'\nimplementation 'javax.annotation:javax.annotation-api:1.3.2'\n\nimplementation group: 'net.devh', name: 'grpc-client-spring-boot-starter', version: '2.13.0.RELEASE'\nimplementation group: 'io.grpc', name: 'grpc-stub', version: '1.53.0'\nimplementation group: 'io.grpc', name: 'grpc-protobuf', version: '1.53.0'\n\n}\n\nsourceSets {\nmain {\n    java {\n        srcDirs 'build/generated/source/proto/main/grpc'\n        srcDirs 'build/generated/source/proto/main/java'\n    }\n}\n}\n\nprotobuf {\nprotoc {\n    artifact = 'com.google.protobuf:protoc:4.0.0-rc-2'\n}\nplugins {\n    grpc {\n        artifact = 'io.grpc:protoc-gen-grpc-java:1.53.0'\n    }\n}\ngenerateProtoTasks {\n    all()*.plugins {\n        grpc {}\n    }\n}\n}\n\ntasks.named('test') {\nuseJUnitPlatform()\n}\n\nspringBoot {\nbuildInfo()\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","internet-explorer","applet"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181239,"post_id":76170081,"comment_id":134327556,"body_markdown":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - https://www.w3.org/People/mimasa/test/object/java/ - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again.","body":"Maybe JRE (Java Runtime Environment) might not have been set-up properly on your machine.  Try links on this test page - <a href=\"https://www.w3.org/People/mimasa/test/object/java/\" rel=\"nofollow noreferrer\">w3.org/People/mimasa/test/object/java</a> - Do those links show up the details as expected, if not, definitely some JRE related issue is there.  Uninstall Java and install JRE again."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1683181325,"post_id":76170081,"comment_id":134327566,"body_markdown":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers.","body":"Also, Internet Explorer is an out-dated browser.  Try using Edge, Chrome, &amp; Firefox, etc. actively managed browsers."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202726,"post_id":76170081,"comment_id":134332305,"body_markdown":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ...","body":"Java applets are deprecated technology.  They were officially deprecated by Oracle in Java 9, and well know to be problematic for a long time before that.  The only browser that still supports Applets is Internet Explorer, and IE has been EOL since June 14, 2022.  You really should stop using applets ..."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683202812,"post_id":76170081,"comment_id":134332331,"body_markdown":"https://www.java.com/en/download/help/enable_browser.html explains how to enable Java in IE.","body":"<a href=\"https://www.java.com/en/download/help/enable_browser.html\" rel=\"nofollow noreferrer\">java.com/en/download/help/enable_browser.html</a> explains how to enable Java in IE."}],"owner":{"account_id":26814570,"reputation":1,"user_id":20404688,"display_name":"Yu Sinae"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227975,"creation_date":1683180985,"question_id":76170081,"body_markdown":"I got this message when I tried to open a Java applet page in IE.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nalert message for running applet\r\n\r\nI set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.\r\n\r\nBut it is not working. Something strange is.  In some desktops, it&#39;s working.\r\n\r\nI compared setting options(window control \\&gt; JAVA, browser settings), but it looks the same.\r\n\r\nWhat is the problem and solution?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CC9OP.jpg","title":"Java applet is not working in Internet Explorer","body":"<p>I got this message when I tried to open a Java applet page in IE.</p>\n<p><a href=\"https://i.stack.imgur.com/CC9OP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CC9OP.jpg\" alt=\"enter image description here\" /></a></p>\n<p>alert message for running applet</p>\n<p>I set internet option settings, and checked Java(JRE), and script, HTML applet code, file existing on directory.</p>\n<p>But it is not working. Something strange is.  In some desktops, it's working.</p>\n<p>I compared setting options(window control &gt; JAVA, browser settings), but it looks the same.</p>\n<p>What is the problem and solution?</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683165722,"post_id":76169063,"comment_id":134325992,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":7091991,"reputation":3,"user_id":19001425,"display_name":"Hamza Aladwan"},"score":0,"creation_date":1683225615,"post_id":76175153,"comment_id":134338193,"body_markdown":"how to bubble open when click message like telegram ?","body":"how to bubble open when click message like telegram ?"}],"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683216153,"creation_date":1683216153,"answer_id":76175153,"question_id":76169063,"body_markdown":"Yes. It can be a cardview.\r\nHere is the .xml code for each item in the list.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:elevation=&quot;5dp&quot;\r\n            app:cardUseCompatPadding=&quot;true&quot;\r\n            app:cardCornerRadius=&quot;10dp&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:padding=&quot;5dp&quot;&gt;\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/imageView&quot;\r\n                    android:src=&quot;@drawable/ic_time&quot;\r\n                    android:layout_gravity=&quot;start&quot;\r\n                    android:layout_width=&quot;60dp&quot;\r\n                    android:layout_height=&quot;60dp&quot;/&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/textView&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:text=&quot;Time&quot;\r\n                    android:paddingHorizontal=&quot;20dp&quot;\r\n                    android:layout_gravity=&quot;end|center_vertical&quot;\r\n                    android:textSize=&quot;20dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nYou can work on the aesthetics. I have just added a &#39;Time&#39; icon and text &quot;Time&quot; as an example. \r\n\r\nThen add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.\r\n","title":"Box option how to create this like Telegram","body":"<p>Yes. It can be a cardview.\nHere is the .xml code for each item in the list.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;vertical&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;\n    &lt;androidx.cardview.widget.CardView\n        android:elevation=&quot;5dp&quot;\n        app:cardUseCompatPadding=&quot;true&quot;\n        app:cardCornerRadius=&quot;10dp&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;horizontal&quot;\n            android:padding=&quot;5dp&quot;&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/imageView&quot;\n                android:src=&quot;@drawable/ic_time&quot;\n                android:layout_gravity=&quot;start&quot;\n                android:layout_width=&quot;60dp&quot;\n                android:layout_height=&quot;60dp&quot;/&gt;\n            &lt;TextView\n                android:id=&quot;@+id/textView&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Time&quot;\n                android:paddingHorizontal=&quot;20dp&quot;\n                android:layout_gravity=&quot;end|center_vertical&quot;\n                android:textSize=&quot;20dp&quot;/&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/androidx.cardview.widget.CardView&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>You can work on the aesthetics. I have just added a 'Time' icon and text &quot;Time&quot; as an example.</p>\n<p>Then add a RecyclerView in your Activity layout and create an Adapter with the above layout for each item in the list. Lastly, set the RecyclerView to that adapter.</p>\n"}],"owner":{"account_id":7091991,"reputation":3,"user_id":19001425,"display_name":"Hamza Aladwan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76175153,"answer_count":1,"score":-1,"last_activity_date":1683227861,"creation_date":1683165297,"question_id":76169063,"body_markdown":"![enter image description here](https://i.stack.imgur.com/x1h55.png)\r\n\r\n\r\n\r\nHow do I design like this (options box) when I click on a message in my application, please write the XML part \r\n\r\nCan it be a card View that carries several elements? ","title":"Box option how to create this like Telegram","body":"<p><img src=\"https://i.stack.imgur.com/x1h55.png\" alt=\"enter image description here\" /></p>\n<p>How do I design like this (options box) when I click on a message in my application, please write the XML part</p>\n<p>Can it be a card View that carries several elements?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025010,"post_id":76154088,"comment_id":134300091,"body_markdown":"Please read: [Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why not upload images of code/errors when asking a question?</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683025077,"post_id":76154088,"comment_id":134300095,"body_markdown":"&quot;*`logging.level.=DEBUG`*&quot; - The trailing `.` before the `=` seems wrong.","body":"&quot;<i><code>logging.level.=DEBUG</code></i>&quot; - The trailing <code>.</code> before the <code>=</code> seems wrong."},{"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"score":0,"creation_date":1683027174,"post_id":76154088,"comment_id":134300511,"body_markdown":"anyone here to sort this out?","body":"anyone here to sort this out?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1683040128,"post_id":76154088,"comment_id":134303799,"body_markdown":"&quot;*Also i have another issue with this docker file ...*&quot; - Please read: [Can I ask only one question per post?](https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post)","body":"&quot;<i>Also i have another issue with this docker file ...</i>&quot; - Please read: <a href=\"https://meta.stackexchange.com/questions/222735/can-i-ask-only-one-question-per-post\">Can I ask only one question per post?</a>"}],"answers":[{"tags":[],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683227735,"creation_date":1683039417,"answer_id":76156182,"question_id":76154088,"body_markdown":"```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\nWORKDIR /app\r\n\r\nCOPY src /app/src\r\nCOPY pom.xml /app\r\nRUN mvn -f pom.xml clean package\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\nThis docker file resolved my build failure issue after some trial and error.","title":"error during input validation with log4j2 dependecy","body":"<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\nWORKDIR /app\n\nCOPY src /app/src\nCOPY pom.xml /app\nRUN mvn -f pom.xml clean package\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/target/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>This docker file resolved my build failure issue after some trial and error.</p>\n"}],"owner":{"account_id":28003343,"reputation":47,"user_id":21387155,"display_name":"cokachi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76156182,"answer_count":1,"score":0,"last_activity_date":1683227735,"creation_date":1683024535,"question_id":76154088,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\ni was wonder how to change to debug so that i can get the stacktrace,\r\n\r\n\r\n\r\n\r\n\r\ni have tried various properties to get it but none of them is working.\r\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\r\ni have dockerized this appilcation.\r\ni want to know what java version and other versions so that i can learn about the logging cve&#39;s\r\n\r\nAlso i have another issue with this docker file\r\n\r\n```\r\nFROM maven:3.8.3-openjdk-8-slim\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nWORKDIR /app\r\n\r\n\r\nCOPY src /app\r\nCOPY mvnw /app\r\nCOPY pom.xml /app\r\nCOPY mvnw.cmd /app\r\nRUN mvn clean package spring-boot:repackage\r\n\r\nWORKDIR /app/target\r\nEXPOSE 8080 \r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\r\n\r\n```\r\n\r\ni am getting build error in this particular case.\r\n\r\n```\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  01:00 min\r\n[INFO] Finished at: 2023-05-02T11:06:47Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\r\nThe command &#39;/bin/sh -c mvn clean package spring-boot:repackage&#39; returned a non-zero code: 1\r\n```","title":"error during input validation with log4j2 dependecy","body":"<p>[![enter image description here][1]][1]</p>\n<p>i was wonder how to change to debug so that i can get the stacktrace,</p>\n<p>i have tried various properties to get it but none of them is working.\nthe project is a sample restcontroller that takes usersid as input and logs it in the console.\ni have dockerized this appilcation.\ni want to know what java version and other versions so that i can learn about the logging cve's</p>\n<p>Also i have another issue with this docker file</p>\n<pre><code>FROM maven:3.8.3-openjdk-8-slim\n\n\n\n\n\n\n\nWORKDIR /app\n\n\nCOPY src /app\nCOPY mvnw /app\nCOPY pom.xml /app\nCOPY mvnw.cmd /app\nRUN mvn clean package spring-boot:repackage\n\nWORKDIR /app/target\nEXPOSE 8080 \nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/log4jexample-0.0.1-SNAPSHOT.jar&quot;]\n\n</code></pre>\n<p>i am getting build error in this particular case.</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:00 min\n[INFO] Finished at: 2023-05-02T11:06:47Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage (repackage) on project log4jexample: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:repackage failed: Unable to find main class -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException\nThe command '/bin/sh -c mvn clean package spring-boot:repackage' returned a non-zero code: 1\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5730202,"reputation":1185,"user_id":4525976,"display_name":"Theo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439242080,"creation_date":1439241338,"answer_id":31929321,"question_id":31929118,"body_markdown":"First of all, where is your button onClick listener? This is where you should add your methods.\r\n\r\n    Button button = (Button)this.findViewById(R.id.funny_sayings_button);\r\n    \r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n       \r\n                     changeFunnySayingsButton (v);\r\n                }\r\n            }); \r\n\r\nTo continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:\r\n\r\n    //will choose a random number between 0 and the length of the list - 1\r\n    int i = rand.nextInt(yourList.size()); \r\n    String yourFunnyString=yourList.get(i);\r\n\r\nIf you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. \r\n\r\nIt should be fairly straightforward to do.","title":"Android: Making a Button Display Silly Text","body":"<p>First of all, where is your button onClick listener? This is where you should add your methods.</p>\n\n<pre><code>Button button = (Button)this.findViewById(R.id.funny_sayings_button);\n\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                 changeFunnySayingsButton (v);\n            }\n        }); \n</code></pre>\n\n<p>To continue with you could create an ArrayList of Strings. You add all of your strings and then simply pick one at random from the list. Hint:</p>\n\n<pre><code>//will choose a random number between 0 and the length of the list - 1\nint i = rand.nextInt(yourList.size()); \nString yourFunnyString=yourList.get(i);\n</code></pre>\n\n<p>If you also want to display an image alongside with the String you should also create a map. Use the String as a key. When you select from yourList then use this key to select the value (your image) from the map. </p>\n\n<p>It should be fairly straightforward to do.</p>\n"},{"tags":[],"owner":{"account_id":6734695,"reputation":734,"user_id":5189887,"display_name":"Bobby StJacques"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439241503,"creation_date":1439241503,"answer_id":31929365,"question_id":31929118,"body_markdown":"I think that you&#39;re on the right track thinking about using a data structure like an `ArrayList`.\r\n\r\nI&#39;d start by making a class to represent each funny thing, e.g. \r\n\r\n    public class FunnyThing {\r\n      private String phrase; // I&#39;d use a resource ID here\r\n      private int drawableResourceId;\r\n    }\r\n\r\nThen it&#39;s a matter of initializing the set of `FunnyThing` objects and storing them in your data structure.  You could do this in the `onCreate` method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the `FunnyThing` class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.\r\n\r\nFinally, on each button press you can choose a random index in your collection of `FunnyThing`s and display that, e.g. \r\n\r\n    private void displayRandomFunnyThing() {\r\n      // assumes you have a java.util.Random instance vairable named mRandom\r\n      FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\r\n      displayAnswer( ft.phrase );\r\n      displayImage( ft.drawableResourceId);\r\n    }\r\n\r\nOf course you&#39;ll need to add an `onClickListener` to your button, but I&#39;m assuming that you left that code out for brevity.\r\n\r\nYou&#39;ll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.","title":"Android: Making a Button Display Silly Text","body":"<p>I think that you're on the right track thinking about using a data structure like an <code>ArrayList</code>.</p>\n\n<p>I'd start by making a class to represent each funny thing, e.g. </p>\n\n<pre><code>public class FunnyThing {\n  private String phrase; // I'd use a resource ID here\n  private int drawableResourceId;\n}\n</code></pre>\n\n<p>Then it's a matter of initializing the set of <code>FunnyThing</code> objects and storing them in your data structure.  You could do this in the <code>onCreate</code> method of your activity, but you may want to consider writing a factory method somewhere else (e.g. the <code>FunnyThing</code> class) that your activity just calls to keep the code from getting cluttered when there are more than 2-3 funny things.</p>\n\n<p>Finally, on each button press you can choose a random index in your collection of <code>FunnyThing</code>s and display that, e.g. </p>\n\n<pre><code>private void displayRandomFunnyThing() {\n  // assumes you have a java.util.Random instance vairable named mRandom\n  FunnyThing ft = mFunnyThings.get( mRandom.nextInt( mFunnyThings.size());\n  displayAnswer( ft.phrase );\n  displayImage( ft.drawableResourceId);\n}\n</code></pre>\n\n<p>Of course you'll need to add an <code>onClickListener</code> to your button, but I'm assuming that you left that code out for brevity.</p>\n\n<p>You'll also have the problem that the phrase selection is random, so you may get the same phrase many times before you see all of them.  If you want to prevent duplicates, well, that will take more code.</p>\n"}],"owner":{"account_id":6484194,"reputation":21,"user_id":5020301,"display_name":"Deborah Hearne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683227699,"creation_date":1439240578,"question_id":31929118,"body_markdown":"I am creating an app in Android where I have a button that displays silly phrases when pressed.\r\n\r\nI figured out how to get it to say two phrases but I can&#39;t figure out how to make it do more.\r\n\r\nI also want to add in a feature to have the button pick phrases at random instead of going in the order I set.\r\n\r\nI am thinking of using an array list for this.\r\n\r\nHow do I set the button to cycle through different methods in Android Studio?  \r\n\r\nI also want you to know that I am a beginner so please don&#39;t be too hard on me.\r\n\r\nThis is my XML:\r\n\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n        android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n        android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_imageview&quot;\r\n            android:scaleType=&quot;fitCenter&quot; /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/funny_textview&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:text=&quot;&quot;/&gt;\r\n        &lt;Button\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:id=&quot;@+id/funny_sayings_button&quot;\r\n            android:text=&quot;Click Me!&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\r\n    &lt;/LinearLayout&gt; \r\n\r\nThis is my Java:\r\n\r\n    package com.example.android.funnysayingsbutton;\r\n    \r\n    import android.os.Bundle;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.view.View;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    boolean clicked = false;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n    \r\n        /**\r\n         * This method changes the funny text and image on the screen when the button is clicked.\r\n         */\r\n        public void changeFunnySayingsButton (View view){\r\n            if (clicked){\r\n                funnySayingOne();\r\n                clicked = false;\r\n            }\r\n            else {\r\n                funnySayingTwo();\r\n                clicked = true;\r\n            }\r\n    \r\n        }\r\n    \r\n        /**\r\n         * This method is for the first funny expression.\r\n         */\r\n        public void funnySayingOne(){\r\n            displayAnswer(&quot;Time to Monkey Around&quot;);\r\n            displayImage(R.drawable.monkey);\r\n        }\r\n        /**\r\n         * This method is for the second funny expression.\r\n         */\r\n        public void funnySayingTwo(){\r\n            displayAnswer(&quot;Penguin Party Time&quot;);\r\n            displayImage(R.drawable.penguin);\r\n        }\r\n    \r\n        /**\r\n         * This method is for the third funny expression.\r\n         */\r\n        public void funnySayingThree(){\r\n            displayAnswer(&quot;It&#39;s Rabbit Season.&quot;);\r\n            displayImage(R.drawable.rabbit);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny text on the screen.\r\n         */\r\n        private void displayAnswer(String answer) {\r\n            TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\r\n            questionTextView.setText(answer);\r\n        }\r\n    \r\n        /**\r\n         * This method displays the funny image on the screen.\r\n         */\r\n        private void displayImage(int picture) {\r\n            ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\r\n            questionTextView.setImageResource(picture);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n   ","title":"Android: Making a Button Display Silly Text","body":"<p>I am creating an app in Android where I have a button that displays silly phrases when pressed.</p>\n<p>I figured out how to get it to say two phrases but I can't figure out how to make it do more.</p>\n<p>I also want to add in a feature to have the button pick phrases at random instead of going in the order I set.</p>\n<p>I am thinking of using an array list for this.</p>\n<p>How do I set the button to cycle through different methods in Android Studio?</p>\n<p>I also want you to know that I am a beginner so please don't be too hard on me.</p>\n<p>This is my XML:</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\n    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\n    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;ImageView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_imageview&quot;\n        android:scaleType=&quot;fitCenter&quot; /&gt;\n    &lt;TextView\n        android:id=&quot;@+id/funny_textview&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:text=&quot;&quot;/&gt;\n    &lt;Button\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/funny_sayings_button&quot;\n        android:text=&quot;Click Me!&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:onClick=&quot;changeFunnySayingsButton&quot;/&gt;\n&lt;/LinearLayout&gt; \n</code></pre>\n<p>This is my Java:</p>\n<pre><code>package com.example.android.funnysayingsbutton;\n\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\nboolean clicked = false;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    /**\n     * This method changes the funny text and image on the screen when the button is clicked.\n     */\n    public void changeFunnySayingsButton (View view){\n        if (clicked){\n            funnySayingOne();\n            clicked = false;\n        }\n        else {\n            funnySayingTwo();\n            clicked = true;\n        }\n\n    }\n\n    /**\n     * This method is for the first funny expression.\n     */\n    public void funnySayingOne(){\n        displayAnswer(&quot;Time to Monkey Around&quot;);\n        displayImage(R.drawable.monkey);\n    }\n    /**\n     * This method is for the second funny expression.\n     */\n    public void funnySayingTwo(){\n        displayAnswer(&quot;Penguin Party Time&quot;);\n        displayImage(R.drawable.penguin);\n    }\n\n    /**\n     * This method is for the third funny expression.\n     */\n    public void funnySayingThree(){\n        displayAnswer(&quot;It's Rabbit Season.&quot;);\n        displayImage(R.drawable.rabbit);\n    }\n\n    /**\n     * This method displays the funny text on the screen.\n     */\n    private void displayAnswer(String answer) {\n        TextView questionTextView = (TextView)    findViewById(R.id.funny_textview);\n        questionTextView.setText(answer);\n    }\n\n    /**\n     * This method displays the funny image on the screen.\n     */\n    private void displayImage(int picture) {\n        ImageView questionTextView = (ImageView)    findViewById(R.id.funny_imageview);\n        questionTextView.setImageResource(picture);\n    }\n\n\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":2,"creation_date":1683226394,"post_id":76176475,"comment_id":134338359,"body_markdown":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation.","body":"I&#39;m having trouble understanding how you expect to continue performing reads during your upgrade, either.  One would ordinarily take the whole application down during such a maintenance operation."},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":1,"creation_date":1683226424,"post_id":76176475,"comment_id":134338365,"body_markdown":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations.","body":"It&#39;s not easy to do with JPA, but you can change the database user&#39;s grant to insert, update and delete rows. If you are using JDBC, most database also accept a readonly parameter to prevent alterations."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1683226878,"post_id":76176475,"comment_id":134338465,"body_markdown":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task.","body":"You could also revoke data modification privileges from the user the application authenticates with. However changing the application to not go wild when intended db modifications are requested is the bigger task."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1683228060,"post_id":76176475,"comment_id":134338754,"body_markdown":"https://github.com/alexandre-touret/maintenance-mode   `I_AM_A_TEAPOT` LOL","body":"<a href=\"https://github.com/alexandre-touret/maintenance-mode\" rel=\"nofollow noreferrer\">github.com/alexandre-touret/maintenance-mode</a>   <code>I_AM_A_TEAPOT</code> LOL"},{"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"score":0,"creation_date":1683230259,"post_id":76176475,"comment_id":134339163,"body_markdown":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes","body":"@JohnBollinger I think I was thinking I could use read replicas to keep allowing reads whilst preventing writes"}],"answers":[{"tags":[],"owner":{"account_id":5934812,"reputation":132,"user_id":4668201,"display_name":"L&#233;o"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227498,"creation_date":1683227498,"answer_id":76176657,"question_id":76176475,"body_markdown":"Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\r\nhttps://docs.postgresql.fr/15/sql-lock.html\r\n\r\nTo automate this, you can look at the pg_catalog to list the tables to lock","title":"How to prevent JPA saves during database upgrade?","body":"<p>Not on the application side, but on the database side, you can put a lock on your databases so that the current operations end, but there are no new operations.\n<a href=\"https://docs.postgresql.fr/15/sql-lock.html\" rel=\"nofollow noreferrer\">https://docs.postgresql.fr/15/sql-lock.html</a></p>\n<p>To automate this, you can look at the pg_catalog to list the tables to lock</p>\n"}],"owner":{"account_id":4849802,"reputation":1540,"user_id":3912417,"accept_rate":89,"display_name":"joshuatvernon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683227498,"creation_date":1683226202,"question_id":76176475,"body_markdown":"I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.","title":"How to prevent JPA saves during database upgrade?","body":"<p>I would like to upgrade my database. It will cause downtime. So I would like to disable JPA saves temporarily using a feature flag. How can I enforce prevention of saves e.g. throw DataIntegrityViolationException whenever code makes it to a save.</p>\n"},{"tags":["java","spring","tomcat","catalina","zkteco"],"answers":[{"comments":[{"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"score":0,"creation_date":1683823567,"post_id":76176634,"comment_id":134429187,"body_markdown":"Hi Christian, thanks for your response.\nThe program is not packaged/compiled by me. I installed it via an .exe file from the vendor (https://www.zkteco.com/en/ZKBiosecurity/ZKBioSecurity-3200#Download).\nIs it still possible for me to make the changes you suggest?\nAlso, let me mention that it worked fine from initial installation for about 3 years before this issue started.","body":"Hi Christian, thanks for your response. The program is not packaged/compiled by me. I installed it via an .exe file from the vendor (<a href=\"https://www.zkteco.com/en/ZKBiosecurity/ZKBioSecurity-3200#Download\" rel=\"nofollow noreferrer\">zkteco.com/en/ZKBiosecurity/ZKBioSecurity-3200#Download</a>). Is it still possible for me to make the changes you suggest? Also, let me mention that it worked fine from initial installation for about 3 years before this issue started."},{"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"score":0,"creation_date":1684188226,"post_id":76176634,"comment_id":134478164,"body_markdown":"This is a bundled app? This isn&#39;t your job to fix, it&#39;s on your vendor - I mean, you probably COULD fix it by doing as I described above, but you&#39;d be hacking a vendor solution and there could be other issues","body":"This is a bundled app? This isn&#39;t your job to fix, it&#39;s on your vendor - I mean, you probably COULD fix it by doing as I described above, but you&#39;d be hacking a vendor solution and there could be other issues"},{"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"score":0,"creation_date":1684246848,"post_id":76176634,"comment_id":134488045,"body_markdown":"Thanks Christian! I appreciate your help. I&#39;ll follow up with the vendor.","body":"Thanks Christian! I appreciate your help. I&#39;ll follow up with the vendor."},{"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"score":0,"creation_date":1684252773,"post_id":76176634,"comment_id":134489754,"body_markdown":"Can I get an upvote on my answer :)","body":"Can I get an upvote on my answer :)"},{"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"score":0,"creation_date":1684533850,"post_id":76176634,"comment_id":134536477,"body_markdown":"Just tried to upvote but it won&#39;t let me cuz I&#39;m new to the community :(","body":"Just tried to upvote but it won&#39;t let me cuz I&#39;m new to the community :("}],"tags":[],"owner":{"account_id":673865,"reputation":5306,"user_id":889053,"accept_rate":38,"display_name":"Christian Bongiorno"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683227283,"creation_date":1683227283,"answer_id":76176634,"question_id":76176548,"body_markdown":"It&#39;s pretty clear: You don&#39;t have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I&#39;d suggest that instead of using tomcat like this).   \r\n\r\nThe simplest way to solve this is to make sure that in the `resources/` directory of your project that gets bundled up into you WAR, you include `application.properties` with this value set:\r\n\r\n```\r\ndatasource.driverClassName=org.mysql.Driver\r\n```\r\n\r\nOr whatever DB you&#39;re using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it&#39;s included\r\n\r\nIf you&#39;ve done this correctly, when you actually deploy you&#39;ll notice that in your `WEBAPPS/${YOUR_APP}` you&#39;ll see the `application.properties` file in the root along with your class files.\r\n\r\nThis should do the trick","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>It's pretty clear: You don't have that property defined in any of the typical ways/locations that spring looks. If you were using spring boot, you could put it right on the cli (and, I'd suggest that instead of using tomcat like this).</p>\n<p>The simplest way to solve this is to make sure that in the <code>resources/</code> directory of your project that gets bundled up into you WAR, you include <code>application.properties</code> with this value set:</p>\n<pre><code>datasource.driverClassName=org.mysql.Driver\n</code></pre>\n<p>Or whatever DB you're using. You also obviously need to make sure you include the dependency for that driver in your project so when the war is build, it's included</p>\n<p>If you've done this correctly, when you actually deploy you'll notice that in your <code>WEBAPPS/${YOUR_APP}</code> you'll see the <code>application.properties</code> file in the root along with your class files.</p>\n<p>This should do the trick</p>\n"}],"owner":{"account_id":28507428,"reputation":11,"user_id":21817903,"display_name":"Chu N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683227283,"creation_date":1683226652,"question_id":76176548,"body_markdown":"ZKTeco BioSecurity (Access Control web based application) running on `java/Tomcat/Spring` is unable to launch.\r\n\r\n$PATH = C:\\Program Files\\BioSecurity\\MainResource\\\r\n\r\nFrom the log files located at `$PATH/tomcat/logs/`, I see the following error:\r\n`org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;`\r\n\r\nHowever, I&#39;m a noob at java/Tomcat/Spring and I can&#39;t seem to find the &quot;applicationContext.xml&quot; file in question.\r\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.\r\n\r\n```\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;listener&gt;\r\n\t\t&lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\r\n\t&lt;/listener&gt;\r\n\t&lt;context-param&gt;\r\n\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\r\n\t&lt;/context-param&gt;\r\n```\r\n\r\n\r\nPlease see the logs below:\r\n\r\n- /tomcat/logs/localhost.2023-05-04.log\r\n  \r\n```\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: No Spring WebApplicationInitializer types detected on classpath\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: excute WebFilterInitializer...\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init shiroFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init langSessionFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init OAuth2Filter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: do init CheckFilter in WebApplicationInitializer\r\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Initializing Spring root WebApplicationContext\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\r\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\r\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name &#39;dataSource&#39; defined in class path resource [applicationContext.xml]: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\r\n\tat com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\r\n\tat org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\r\n\tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\r\n\tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\r\n\tat org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\r\n\tat org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\r\n\tat org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\r\n\tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\r\n\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\r\n\tat org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\r\n\tat org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;datasource.driverClassName&#39; in string value &quot;${datasource.driverClassName}&quot;\r\n\tat org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\r\n\tat org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\r\n\tat org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\r\n\tat org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\r\n\tat org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\r\n\t... 23 more\r\n\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\r\nINFO: Closing Spring root WebApplicationContext\r\n```\r\n\r\n- /tomcat/logs/commons-daemon.2023-05-04.log\r\n  \r\n```\r\n[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\r\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\r\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\r\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\r\n[2023-05-04 12:45:57] [info]  [ 6688] Running &#39;BioSecurityTomcat&#39; Service...\r\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\r\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log\r\n  \r\n```\r\n2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\r\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\r\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\r\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\r\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\r\nINFO: Initialization processed in 1952 ms\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\r\nINFO: Starting service Catalina\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\r\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\r\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\r\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\r\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\r\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\r\nSEVERE: Context [] startup failed due to previous errors\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\r\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\r\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\r\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\r\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\r\nINFO: Server startup in 30121 ms\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character [[] is not allowed and will continue to be rejected.\r\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\r\nWARNING: Character []] is not allowed and will continue to be rejected.\r\n```\r\n\r\n- /tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log \r\nLeaving out the contents of this log file as it&#39;s chatty. If required please let me know and I&#39;ll post it.\r\n\r\n\r\nI tried restarting the application and capturing the logs. After that, I couldn&#39;t figure out how to resolve it.","title":"Tomcat/Spring webapp running on Windows 10 is unable to start","body":"<p>ZKTeco BioSecurity (Access Control web based application) running on <code>java/Tomcat/Spring</code> is unable to launch.</p>\n<p>$PATH = C:\\Program Files\\BioSecurity\\MainResource\\</p>\n<p>From the log files located at <code>$PATH/tomcat/logs/</code>, I see the following error:\n<code>org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;</code></p>\n<p>However, I'm a noob at java/Tomcat/Spring and I can't seem to find the &quot;applicationContext.xml&quot; file in question.\nI see &quot;applicationcontext.xml&quot; mentioned in the webapps web.xml file.</p>\n<pre><code>    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n</code></pre>\n<p>Please see the logs below:</p>\n<ul>\n<li>/tomcat/logs/localhost.2023-05-04.log</li>\n</ul>\n<pre><code>May 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: No Spring WebApplicationInitializer types detected on classpath\nMay 04, 2023 12:46:17 PM org.apache.catalina.core.ApplicationContext log\nINFO: excute WebFilterInitializer...\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init shiroFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init langSessionFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init OAuth2Filter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: do init CheckFilter in WebApplicationInitializer\nMay 04, 2023 12:46:19 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener\norg.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean definition with name 'dataSource' defined in class path resource [applicationContext.xml]: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:211)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer.processProperties(PropertyPlaceholderConfigurer.java:223)\n    at com.zk.common.util.PropertiesUtil.processProperties(PropertiesUtil.java:88)\n    at org.springframework.beans.factory.config.PropertyResourceConfigurer.postProcessBeanFactory(PropertyResourceConfigurer.java:86)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:265)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:162)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:611)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:403)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:306)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:106)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:5157)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5680)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1017)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:993)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652)\n    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1296)\n    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:2039)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\nCaused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'datasource.driverClassName' in string value &quot;${datasource.driverClassName}&quot;\n    at org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:174)\n    at org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:126)\n    at org.springframework.beans.factory.config.PropertyPlaceholderConfigurer$PlaceholderResolvingStringValueResolver.resolveStringValue(PropertyPlaceholderConfigurer.java:259)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveStringValue(BeanDefinitionVisitor.java:282)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.resolveValue(BeanDefinitionVisitor.java:204)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitPropertyValues(BeanDefinitionVisitor.java:141)\n    at org.springframework.beans.factory.config.BeanDefinitionVisitor.visitBeanDefinition(BeanDefinitionVisitor.java:82)\n    at org.springframework.beans.factory.config.PlaceholderConfigurerSupport.doProcessProperties(PlaceholderConfigurerSupport.java:208)\n    ... 23 more\n\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\n</code></pre>\n<ul>\n<li>/tomcat/logs/commons-daemon.2023-05-04.log</li>\n</ul>\n<pre><code>[2023-05-04 12:42:05] [info]  [ 6748] Stopping service...\n[2023-05-04 12:42:06] [info]  [ 6748] Service stop thread completed.\n[2023-05-04 12:42:07] [info]  [ 6008] Run service finished.\n[2023-05-04 12:42:07] [info]  [ 6008] Commons Daemon procrun finished\n[2023-05-04 12:45:57] [info]  [ 6688] Commons Daemon procrun (1.0.15.0 32-bit) started\n[2023-05-04 12:45:57] [info]  [ 6688] Running 'BioSecurityTomcat' Service...\n[2023-05-04 12:45:57] [info]  [ 2860] Starting service...\n[2023-05-04 12:45:58] [info]  [ 2860] Service started in 1356 ms.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stderr.2023-05-04.log</li>\n</ul>\n<pre><code>2023-05-04 12:45:57 Commons Daemon procrun stderr initialized\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: Loaded APR based Apache Tomcat Native library 1.2.16 using APR version 1.6.3.\nMay 04, 2023 12:45:58 PM org.apache.catalina.core.AprLifecycleListener lifecycleEvent\nINFO: APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true].\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.AprLifecycleListener initializeSSL\nINFO: OpenSSL successfully initialized (OpenSSL 1.0.2m  2 Nov 2017)\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:45:59 PM org.apache.coyote.AbstractProtocol init\nINFO: Initializing ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 1952 ms\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardService startInternal\nINFO: Starting service Catalina\nMay 04, 2023 12:45:59 PM org.apache.catalina.core.StandardEngine startInternal\nINFO: Starting Servlet Engine: Apache Tomcat/7.0.88\nMay 04, 2023 12:45:59 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TaglibUriRule body\nINFO: TLD skipped. URI: urn:com:sun:jersey:api:view is already defined\nMay 04, 2023 12:46:17 PM org.apache.catalina.startup.TldConfig execute\nINFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\nMay 04, 2023 12:46:29 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-2] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-3] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-4] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-5] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-6] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-7] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-8] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-9] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_Worker-10] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nSEVERE: The web application [] appears to have started a thread named [DefaultQuartzScheduler_QuartzSchedulerThread] but has failed to stop it. This is very likely to create a memory leak.\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deployment of web application directory C:\\Program Files\\BioSecurity\\MainResource\\tomcat\\webapps\\ROOT has finished in 30,018 ms\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;http-apr-8088&quot;]\nMay 04, 2023 12:46:29 PM org.apache.coyote.AbstractProtocol start\nINFO: Starting ProtocolHandler [&quot;ajp-apr-8019&quot;]\nMay 04, 2023 12:46:29 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 30121 ms\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character [[] is not allowed and will continue to be rejected.\nMay 04, 2023 12:46:30 PM org.apache.tomcat.util.http.parser.HttpParser &lt;clinit&gt;\nWARNING: Character []] is not allowed and will continue to be rejected.\n</code></pre>\n<ul>\n<li>/tomcat/logs/biosecuritytomcat-stdout.2023-05-04.log\nLeaving out the contents of this log file as it's chatty. If required please let me know and I'll post it.</li>\n</ul>\n<p>I tried restarting the application and capturing the logs. After that, I couldn't figure out how to resolve it.</p>\n"},{"tags":["java","c#","ikvm"],"comments":[{"owner":{"account_id":1036128,"reputation":16306,"user_id":1043380,"accept_rate":80,"display_name":"gunr2171"},"score":2,"creation_date":1683218695,"post_id":76175502,"comment_id":134336690,"body_markdown":"Take a moment to read through the [editing help](/editing-help) in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it.","body":"Take a moment to read through the <a href=\"/editing-help\">editing help</a> in the help center. Formatting on Stack Overflow is different than on other sites. The better your post looks, the easier it is for others to read and understand it."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1683220381,"post_id":76175502,"comment_id":134337083,"body_markdown":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time.","body":"ikvm-7.2.4630.5 and JavaSE-1.7 are old versions, released more than 10 years ago. Is there any particular reason to use them instead of current versions? They are probably full of security vulnerabilities at this time."},{"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"score":1,"creation_date":1683222112,"post_id":76175502,"comment_id":134337459,"body_markdown":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions.","body":"I was directed to this version ikvm-7.2.4630.5 just by searching for solution. Most of the postings are old and I ended up to this old version. I will try the latest versions."}],"owner":{"account_id":28498287,"reputation":1,"user_id":21809854,"display_name":"Jannat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683227103,"creation_date":1683218487,"question_id":76175502,"body_markdown":"I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.   \r\nI use **ikvm-7.2.4630.5** and the **dll** file is generated without error. I added reference to  **dll** and **KVM.Open.JDK.Core.dll** ,in **C#** application.  \r\nThe issue happens when using  “**using** ” keyword to import the package. I get the error &quot;*Type or namespace name cannot be found*&quot;.\r\n\r\nI did the following steps:\r\n\r\n1)I wrote a test code to see if I can make it work.\r\n\r\nSimple java class file:\r\n\r\n    package Msg;\r\n    \r\n    public class MyMessage {\r\n  \r\n        public static void WelcomMsg(String msg) {\r\n            System.out.println(&quot;Welcom &quot; + msg);\r\n        }\r\n    \r\n        public static void GoodByMsg(String msg) {\r\n        \tSystem.out.println(&quot;Good Bye &quot; + msg);\r\n        }\r\n    \r\n    }\r\n\r\n2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )\r\n\r\n3)I can run either of these commands without error to generate dll (in `folder ikvm-7.2.4630.5\\\\bin`):\r\n\r\n    ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\r\n\r\nor\r\n\r\n    ikvmc -target:library msg.jar\r\n\r\n\\--message after dll is generated ---------------  \r\nIKVM.NET Compiler version 7.2.4630.5  \r\nCopyright (C) 2002-2012 Jeroen Frijters  \r\nhttp://www.ikvm.net/\r\n\r\nmsg.dll is generated.\r\n\r\n4)Added reference to **msg.dll** and **IKVM.Open.JDK.Core.dll** in C# console project (VS 2019).\r\n\r\n5)&quot;using&quot; directive (using Msg;) generating error: **Type or namespace name cannot be found**\r\n\r\nBasically the dll file seems empty.  \r\nAny help will be appreciated. \r\n\r\nthanks\r\n","title":"Why the DLL generated from Java jar file doesn&#39;t show namespace","body":"<p>I need to use a java jar file in my c# (VS 2019) console application. OS is Windows 10.<br />\nI use <strong>ikvm-7.2.4630.5</strong> and the <strong>dll</strong> file is generated without error. I added reference to  <strong>dll</strong> and <strong>KVM.Open.JDK.Core.dll</strong> ,in <strong>C#</strong> application.<br />\nThe issue happens when using  “<strong>using</strong> ” keyword to import the package. I get the error &quot;<em>Type or namespace name cannot be found</em>&quot;.</p>\n<p>I did the following steps:</p>\n<p>1)I wrote a test code to see if I can make it work.</p>\n<p>Simple java class file:</p>\n<pre><code>package Msg;\n\npublic class MyMessage {\n\n    public static void WelcomMsg(String msg) {\n        System.out.println(&quot;Welcom &quot; + msg);\n    }\n\n    public static void GoodByMsg(String msg) {\n        System.out.println(&quot;Good Bye &quot; + msg);\n    }\n\n}\n</code></pre>\n<p>2)The jar (msg.jar) file created in JavaSE-1.7 environment (using eclipse )</p>\n<p>3)I can run either of these commands without error to generate dll (in <code>folder ikvm-7.2.4630.5\\\\bin</code>):</p>\n<pre><code>ikvmc -target:library -out:msg.dll -recurse:”./\\*.jar\n</code></pre>\n<p>or</p>\n<pre><code>ikvmc -target:library msg.jar\n</code></pre>\n<p>--message after dll is generated ---------------<br />\nIKVM.NET Compiler version 7.2.4630.5<br />\nCopyright (C) 2002-2012 Jeroen Frijters<br />\n<a href=\"http://www.ikvm.net/\" rel=\"nofollow noreferrer\">http://www.ikvm.net/</a></p>\n<p>msg.dll is generated.</p>\n<p>4)Added reference to <strong>msg.dll</strong> and <strong>IKVM.Open.JDK.Core.dll</strong> in C# console project (VS 2019).</p>\n<p>5)&quot;using&quot; directive (using Msg;) generating error: <strong>Type or namespace name cannot be found</strong></p>\n<p>Basically the dll file seems empty.<br />\nAny help will be appreciated.</p>\n<p>thanks</p>\n"},{"tags":["java","android","sqlite"],"answers":[{"comments":[{"owner":{"account_id":28354311,"reputation":1,"user_id":21685296,"display_name":"new S_N"},"score":0,"creation_date":1683172684,"post_id":76064442,"comment_id":134326564,"body_markdown":"thank you for the answer, sorry for taking so long to reply because I just started my activities after a long weekend. but I&#39;m so sorry your answer didn&#39;t help, because still error occurs with the same logcat :(","body":"thank you for the answer, sorry for taking so long to reply because I just started my activities after a long weekend. but I&#39;m so sorry your answer didn&#39;t help, because still error occurs with the same logcat :("}],"tags":[],"owner":{"account_id":7162415,"reputation":121,"user_id":5472740,"display_name":"Youssef Wagih"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681996120,"creation_date":1681996120,"answer_id":76064442,"question_id":76059362,"body_markdown":"First, you need to fix the URL of database\r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n\r\nto be like below\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\r\n\r\nSecond, you forgot to add the command to create the table itself first **Dictionary** so you need to add on the **void onCreate(SQLiteDatabase sqLiteDatabase)**  the below creation sql command for the table \r\n\r\n        sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\r\n                + ArabicCol +&quot; TEXT not null);&quot;);","title":"No Such Table Fatal Exception: SQLite","body":"<p>First, you need to fix the URL of database</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n</code></pre>\n<p>to be like below</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3/&quot; + &quot;databases/&quot;\n</code></pre>\n<p>Second, you forgot to add the command to create the table itself first <strong>Dictionary</strong> so you need to add on the <strong>void onCreate(SQLiteDatabase sqLiteDatabase)</strong>  the below creation sql command for the table</p>\n<pre><code>    sqLiteDatabase.execSQL(&quot;CREATE TABLE &quot; + tableName + &quot; (&quot;\n            + ArabicCol +&quot; TEXT not null);&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683226859,"creation_date":1683226439,"answer_id":76176512,"question_id":76059362,"body_markdown":"Before finding out where the problem is, one mistake you have done. Pls correct it.\r\n\r\nThe path of the database folder is wrong. \r\n\r\n    this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \r\n \r\nshould be changed to\r\n\r\n    this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\r\n\r\nAnd I am assuming that you have the file &#39;sample.db&#39; in your resources/assets. Can you cross check if you have it?","title":"No Such Table Fatal Exception: SQLite","body":"<p>Before finding out where the problem is, one mistake you have done. Pls correct it.</p>\n<p>The path of the database folder is wrong.</p>\n<pre><code>this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;; \n</code></pre>\n<p>should be changed to</p>\n<pre><code>this.dbPath = &quot;/data/data/&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;/databases&quot;;\n</code></pre>\n<p>And I am assuming that you have the file 'sample.db' in your resources/assets. Can you cross check if you have it?</p>\n"}],"owner":{"account_id":28354311,"reputation":1,"user_id":21685296,"display_name":"new S_N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683226859,"creation_date":1681944643,"question_id":76059362,"body_markdown":"I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name `sample.db`. Now I am trying to read the database from the assets folder but I&#39;m getting an error and app is crushing. What&#39;s the best way to do this? Any help would be appreciated.\r\n\r\nthis is the code in DbHelper.java\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class DbHelper extends SQLiteOpenHelper {\r\n    String dbName;\r\n    Context context;\r\n    String dbPath;\r\n\r\n    String tableName = &quot;Dictionary&quot;;\r\n    String ArabicCol = &quot;Arabic&quot;;\r\n\r\n    public DbHelper(MainActivity mcontext, String name, int version) {\r\n        super(mcontext, name, null, version);\r\n\r\n\r\n        this.context = mcontext;\r\n        this.dbName = name;\r\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\r\n    }\r\n    @Override\r\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        if(newVersion&gt;oldVersion)\r\n            CopyDatabase();\r\n    }\r\n    public void CheckDb(){\r\n    SQLiteDatabase CheckDb =  null;\r\n            try {\r\n                String filePath = dbPath + dbName;\r\n\r\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\r\n            }catch (Exception e) {\r\n            }\r\n\r\n            if (CheckDb != null) {\r\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\r\n                CheckDb.close();\r\n            } else {\r\n                CopyDatabase();\r\n            }\r\n        }\r\n        public void CopyDatabase() {\r\n            this.getReadableDatabase();\r\n            try{\r\n                InputStream is = context.getAssets().open(dbName);\r\n                OutputStream os = new FileOutputStream(dbPath + dbName);\r\n\r\n                byte[] buffer = new byte[1024];\r\n\r\n                int len;\r\n                while((len = is.read(buffer))&gt;0){\r\n                    os.write(buffer,0,len);\r\n                }\r\n                os.flush();\r\n                is.close();\r\n                os.close();\r\n            }catch (Exception e) {e.printStackTrace();}\r\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\r\n        }\r\n        public void OpenDatabase(){\r\n            String filepath = dbPath + dbName;\r\n            SQLiteDatabase.openDatabase(filepath,null,0);\r\n        }\r\n        public ArrayList&lt;String&gt; getArabicWord(String query){\r\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\r\n\r\n            Cursor cursor;\r\n            cursor = sqLiteDatabase.query(\r\n                    tableName,\r\n                    new String[]{ArabicCol},\r\n                    ArabicCol + &quot; LIKE ? &quot;,\r\n                    new String[]{query + &quot;%&quot;},\r\n                    null, null,\r\n                    ArabicCol\r\n            );\r\n            int index = cursor.getColumnIndex(ArabicCol);\r\n            while (cursor.moveToNext()){\r\n                arabicList.add(cursor.getString(index));\r\n            }\r\n\r\n            sqLiteDatabase.close();\r\n            cursor.close();\r\n            return arabicList;\r\n        }\r\n}\r\n```\r\n\r\nMainActivity.java\r\n\r\n\r\n```\r\npackage ...\r\nimport ...\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    AutoCompleteTextView autoCompleteTextView;\r\n    DbHelper dbHelper;\r\n\r\n    ArrayList&lt;String&gt; newList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        autoCompleteTextView = findViewById(R.id.autotxt);\r\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\r\n        try{\r\n           dbHelper.CheckDb();\r\n           dbHelper.OpenDatabase();\r\n        }catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        newList = new ArrayList&lt;&gt;();\r\n\r\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\r\n                if(s.length() &gt; 0 ){\r\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\r\n\r\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\n}\r\n```\r\n\r\nthis is part of my logcat\r\n\r\n\r\n\r\n```\r\n(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\r\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\r\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\r\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\r\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\r\n                                                                                                    \tat \r\n```\r\nand the line concerned\r\n\r\n```\r\nat com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\r\n                                                                                                    \tat com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\r\n```\r\n\r\n\r\n\r\nI&#39;ve read my code 2 days, but I can&#39;t figure out where I&#39;m wrong. Can you help me? Thanks before. ","title":"No Such Table Fatal Exception: SQLite","body":"<p>I am beginner in Android. I am making a database through SQLite. I created the Arabic database file and put it in assets folder with the name <code>sample.db</code>. Now I am trying to read the database from the assets folder but I'm getting an error and app is crushing. What's the best way to do this? Any help would be appreciated.</p>\n<p>this is the code in DbHelper.java</p>\n<pre><code>package ...\nimport ...\n\npublic class DbHelper extends SQLiteOpenHelper {\n    String dbName;\n    Context context;\n    String dbPath;\n\n    String tableName = &quot;Dictionary&quot;;\n    String ArabicCol = &quot;Arabic&quot;;\n\n    public DbHelper(MainActivity mcontext, String name, int version) {\n        super(mcontext, name, null, version);\n\n\n        this.context = mcontext;\n        this.dbName = name;\n        this.dbPath = &quot;/data/data&quot; + &quot;com.example.e_qtishaddictionary3&quot; + &quot;databases&quot;;\n    }\n    @Override\n    public void onCreate(SQLiteDatabase sqLiteDatabase) {\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        if(newVersion&gt;oldVersion)\n            CopyDatabase();\n    }\n    public void CheckDb(){\n    SQLiteDatabase CheckDb =  null;\n            try {\n                String filePath = dbPath + dbName;\n\n                CheckDb = SQLiteDatabase.openDatabase(filePath, null, 0);\n            }catch (Exception e) {\n            }\n\n            if (CheckDb != null) {\n                Log.d(&quot;CheckDb&quot;, &quot;Database already exists&quot;);\n                CheckDb.close();\n            } else {\n                CopyDatabase();\n            }\n        }\n        public void CopyDatabase() {\n            this.getReadableDatabase();\n            try{\n                InputStream is = context.getAssets().open(dbName);\n                OutputStream os = new FileOutputStream(dbPath + dbName);\n\n                byte[] buffer = new byte[1024];\n\n                int len;\n                while((len = is.read(buffer))&gt;0){\n                    os.write(buffer,0,len);\n                }\n                os.flush();\n                is.close();\n                os.close();\n            }catch (Exception e) {e.printStackTrace();}\n            Log.d(&quot;CopyDb&quot;, &quot;Database Copied&quot;);\n        }\n        public void OpenDatabase(){\n            String filepath = dbPath + dbName;\n            SQLiteDatabase.openDatabase(filepath,null,0);\n        }\n        public ArrayList&lt;String&gt; getArabicWord(String query){\n        ArrayList&lt;String&gt; arabicList = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase sqLiteDatabase = this.getReadableDatabase();\n\n            Cursor cursor;\n            cursor = sqLiteDatabase.query(\n                    tableName,\n                    new String[]{ArabicCol},\n                    ArabicCol + &quot; LIKE ? &quot;,\n                    new String[]{query + &quot;%&quot;},\n                    null, null,\n                    ArabicCol\n            );\n            int index = cursor.getColumnIndex(ArabicCol);\n            while (cursor.moveToNext()){\n                arabicList.add(cursor.getString(index));\n            }\n\n            sqLiteDatabase.close();\n            cursor.close();\n            return arabicList;\n        }\n}\n</code></pre>\n<p>MainActivity.java</p>\n<pre><code>package ...\nimport ...\n\npublic class MainActivity extends AppCompatActivity {\n    AutoCompleteTextView autoCompleteTextView;\n    DbHelper dbHelper;\n\n    ArrayList&lt;String&gt; newList;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        autoCompleteTextView = findViewById(R.id.autotxt);\n        dbHelper = new DbHelper(this,&quot;sample.db&quot;,1);\n        try{\n           dbHelper.CheckDb();\n           dbHelper.OpenDatabase();\n        }catch(Exception e) {\n            e.printStackTrace();\n        }\n\n        newList = new ArrayList&lt;&gt;();\n\n        autoCompleteTextView.addTextChangedListener(new TextWatcher() {\n            @Override\n            public void beforeTextChanged(CharSequence s, int i, int i1, int i2) {\n\n            }\n\n            @Override\n            public void onTextChanged(CharSequence s, int i, int i1, int i2) {\n                if(s.length() &gt; 0 ){\n                    newList.addAll(dbHelper.getArabicWord(s.toString()));\n\n                    autoCompleteTextView.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_list_item_1, newList));\n                }\n            }\n\n            @Override\n            public void afterTextChanged(Editable s) {\n\n            }\n        });\n\n    }\n}\n</code></pre>\n<p>this is part of my logcat</p>\n<pre><code>(1) no such table: Dictionary in &quot;SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic&quot;\n2023-04-20 03:27:40.261 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     D  Shutting down VM\n2023-04-20 03:27:40.264 17406-17406 AndroidRuntime          com.example.e_qtishaddictionary3     E  FATAL EXCEPTION: main\n                                                                                                    Process: com.example.e_qtishaddictionary3, PID: 17406\n                                                                                                    android.database.sqlite.SQLiteException: no such table: Dictionary (code 1 SQLITE_ERROR[1]): , while compiling: SELECT Arabic FROM Dictionary WHERE Arabic LIKE ?  ORDER BY Arabic\n                                                                                                        at \n</code></pre>\n<p>and the line concerned</p>\n<pre><code>at com.example.e_qtishaddictionary3.DbHelper.getArabicWord(DbHelper.java:84)\n                                                                                                        at com.example.e_qtishaddictionary3.MainActivity$1.onTextChanged(MainActivity.java:44)\n</code></pre>\n<p>I've read my code 2 days, but I can't figure out where I'm wrong. Can you help me? Thanks before.</p>\n"},{"tags":["java","multithreading","invoke"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":2,"creation_date":1683221396,"post_id":76175843,"comment_id":134337315,"body_markdown":"The issue is that there&#39;s no synchronization between loading the books and updating the UI.","body":"The issue is that there&#39;s no synchronization between loading the books and updating the UI."},{"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"score":0,"creation_date":1683221530,"post_id":76175843,"comment_id":134337344,"body_markdown":"How could I do that?","body":"How could I do that?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1683225445,"post_id":76175843,"comment_id":134338152,"body_markdown":"**Never** write an empty `catch` block.  At the very least, a catch block should contain `e.printStackTrace();`.  If something goes wrong, you do want to know what happened and where, right?","body":"<b>Never</b> write an empty <code>catch</code> block.  At the very least, a catch block should contain <code>e.printStackTrace();</code>.  If something goes wrong, you do want to know what happened and where, right?"}],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683225238,"creation_date":1683225238,"answer_id":76176375,"question_id":76175843,"body_markdown":"Suppose you are going to make a meal, but you&#39;ve come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they&#39;re doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There&#39;s no flour! How can there be no flour when I just sent him out the door to get some?\r\n\r\nYou&#39;re going to have to wait for the flour.\r\n\r\nYour program is trying to do the same thing. It&#39;s trying to use the books when it&#39;s only just sent the `LoadBooks` thread out to fetch them. You&#39;re going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.\r\n\r\nA [`Semaphore`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html) would be good for that. The LoadBooks thread could call `semaphore.release()` to signal that the books have been loaded, and the GUI thread could call `semaphore.acquire()` to await the signal.\r\n\r\n-----------\r\n\r\nBut Wait!!\r\n\r\nIs there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend&#39;s work.\r\n\r\nThere is practically _never_ any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that&#39;s all you want to do, then you might as well just do the task in thread A.\r\n\r\n-----------\r\n\r\nIt&#39;s tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn&#39;t freeze up, what _does_ it do instead?\r\n\r\nThe simplest answer to that question is to have the GUI put up a [_modal dialog_](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html) box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you&#39;re nice, you&#39;ll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.\r\n\r\nUnfortunately, I can&#39;t say much about _how_ to do those things. I&#39;ve never been much of a GUI programmer, and it&#39;s been maybe a decade since I did any in Java.","title":"Thread that loads data from file","body":"<p>Suppose you are going to make a meal, but you've come to a step where you need flour, and when you look in the pantry there is none. So, you ask your friend who was busy working in the garden to stop what they're doing and run out to buy some flour. Then, the very moment your friend steps out the door, you try to proceed with making the recipe, but What the ???? There's no flour! How can there be no flour when I just sent him out the door to get some?</p>\n<p>You're going to have to wait for the flour.</p>\n<p>Your program is trying to do the same thing. It's trying to use the books when it's only just sent the <code>LoadBooks</code> thread out to fetch them. You're going to need some way for the LoadBooks thread to signal when the books have been loaded, and you need some way for the GUI thread to wait until the signal is delivered.</p>\n<p>A <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a> would be good for that. The LoadBooks thread could call <code>semaphore.release()</code> to signal that the books have been loaded, and the GUI thread could call <code>semaphore.acquire()</code> to await the signal.</p>\n<hr />\n<p>But Wait!!</p>\n<p>Is there something else you could be doing in the kitchen while your friend is shopping for flour? If there is not—if you are not going to do anything at all except sit there and wait—then you might just as well have gone for the flour yourself and not interrupted your friend's work.</p>\n<p>There is practically <em>never</em> any reason for some thread A to give a task to some other thread B if thread A is going to do nothing but wait until the task is finished. It that's all you want to do, then you might as well just do the task in thread A.</p>\n<hr />\n<p>It's tricker with a GUI, because maybe you are trying to prevent the GUI from &quot;freezing up&quot; while the books are being loaded. The thing is, in that case, if the GUI doesn't freeze up, what <em>does</em> it do instead?</p>\n<p>The simplest answer to that question is to have the GUI put up a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Dialog.html\" rel=\"nofollow noreferrer\"><em>modal dialog</em></a> box that says something like, &quot;loading books,&quot; and not show any controls that let the user do anything else until the books are loaded. Maybe if you're nice, you'll show a progress bar in the dialog to show them how long they will have to wait. Maybe if you are really nice, you could even give them an &quot;abort&quot; button to quit out of the program if they decide not to wait.</p>\n<p>Unfortunately, I can't say much about <em>how</em> to do those things. I've never been much of a GUI programmer, and it's been maybe a decade since I did any in Java.</p>\n"}],"owner":{"account_id":27086739,"reputation":67,"user_id":20635129,"display_name":"KazlLaur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176375,"answer_count":1,"score":0,"last_activity_date":1683225238,"creation_date":1683220972,"question_id":76175843,"body_markdown":"I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can&#39;t figure out where.\r\n\r\n**This is my thread:**\r\n```\r\npublic class LoadBooks extends Thread{\r\n    private ArrayList&lt;Book&gt; books;\r\n\r\n    @Override\r\n    public void run() {\r\n        try\r\n        {\r\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\r\n            ObjectInputStream ois = new ObjectInputStream(fis);\r\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\r\n            fis.close();\r\n            ois.close();\r\n        }catch(Exception e)\r\n        {\r\n        }\r\n    }\r\n\r\n    public ArrayList&lt;Book&gt; getBook() {\r\n        return books;\r\n    }\r\n}\r\n```\r\n**I am using thread like this:**\r\n```\r\nif(e.getSource() == loadBookButton){\r\n    LoadBooks loadBooks = new LoadBooks();\r\n    loadBooks.start();\r\n\r\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\r\n    EventQueue.invokeLater(() -&gt; updateUI(books));\r\n}\r\n```\r\n**How I think that should work:** Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.\r\n\r\n**What is the problem?:** GUI is not updating, because *ArrayList* ```books``` is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in [java docs][1] but didn&#39;t get much help.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-","title":"Thread that loads data from file","body":"<p>I want to make a thread, that loads data from the file. I was thinking of using the invokeLater() method. But I think I messed up somewhere and can't figure out where.</p>\n<p><strong>This is my thread:</strong></p>\n<pre><code>public class LoadBooks extends Thread{\n    private ArrayList&lt;Book&gt; books;\n\n    @Override\n    public void run() {\n        try\n        {\n            FileInputStream fis = new FileInputStream(&quot;SaveBooks.ser&quot;);\n            ObjectInputStream ois = new ObjectInputStream(fis);\n            books = (ArrayList&lt;Book&gt;) ois.readObject();\n            fis.close();\n            ois.close();\n        }catch(Exception e)\n        {\n        }\n    }\n\n    public ArrayList&lt;Book&gt; getBook() {\n        return books;\n    }\n}\n</code></pre>\n<p><strong>I am using thread like this:</strong></p>\n<pre><code>if(e.getSource() == loadBookButton){\n    LoadBooks loadBooks = new LoadBooks();\n    loadBooks.start();\n\n    EventQueue.invokeLater(() -&gt; books = loadBooks.getBook());\n    EventQueue.invokeLater(() -&gt; updateUI(books));\n}\n</code></pre>\n<p><strong>How I think that should work:</strong> Books will be loaded from the file in another thread. When books are loaded, I will get them from my thread and then I will update my GUI.</p>\n<p><strong>What is the problem?:</strong> GUI is not updating, because <em>ArrayList</em> <code>books</code> is empty. So there is a problem somewhere. I think that maybe I do not understand fully, how the invokeLater works. I was looking up in <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/SwingUtilities.html#invokeLater-java.lang.Runnable-\" rel=\"nofollow noreferrer\">java docs</a> but didn't get much help.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":169237,"reputation":39170,"user_id":395202,"accept_rate":59,"display_name":"Adrian Shum"},"score":0,"creation_date":1683180754,"post_id":76170037,"comment_id":134327474,"body_markdown":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem.","body":"several things you want to check: 1. where is that dependency defined? In your parent project or in module?  2. where were you running the dependency-tree? in root project or module?  3. Are there other dependecies/dependencyManagement dependency defined for this group + artifactId?    You should be able to create a MRE to demonstrate your problem."},{"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"score":0,"creation_date":1683183624,"post_id":76170037,"comment_id":134328041,"body_markdown":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?","body":"@AdrianShum I did CMD + SHIFT + F and searched all files and made sure there&#39;s no 2.3 anywhere. I ran the dependency tree in the module. There&#39;s no dependencyManagement in the current module or the parent module, only in other modules, and they don&#39;t have json-smart 2.3. MRE as in you&#39;d like the dependency tree output?"},{"owner":{"account_id":6062199,"reputation":1170,"user_id":4733652,"display_name":"Iske"},"score":2,"creation_date":1683189880,"post_id":76170037,"comment_id":134329323,"body_markdown":"Try running dependency tree with  [-Dverbose](https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose) parameter to see full output with omitted entries. It should give you an answer on what is going on...","body":"Try running dependency tree with  <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html#verbose\" rel=\"nofollow noreferrer\">-Dverbose</a> parameter to see full output with omitted entries. It should give you an answer on what is going on..."}],"answers":[{"tags":[],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683224218,"creation_date":1683224218,"answer_id":76176247,"question_id":76170037,"body_markdown":"The issue was that there&#39;s a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>The issue was that there's a transitive dependency that was overwriting the root dependency. Removing the root dependency exposed where the transitive dependency was, then excluding it. This resolved it.</p>\n"}],"owner":{"account_id":7855898,"reputation":1267,"user_id":5937760,"accept_rate":93,"display_name":"sojim2"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":638,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683224218,"creation_date":1683180587,"question_id":76170037,"body_markdown":"I&#39;m in a module with \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.minidev&lt;/groupId&gt;\r\n        &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.10&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHowever, when I do `mvn dependency:tree` it&#39;s still showing `2.3`:\r\n\r\n    [INFO] +- net.minidev:json-smart:jar:2.3:compile\r\n    [INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\r\n\r\nThere&#39;s no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I&#39;m not sure what I&#39;m missing.","title":"I have json-smart 2.4.10 but in dependency tree, it shows 2.3","body":"<p>I'm in a module with</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.minidev&lt;/groupId&gt;\n    &lt;artifactId&gt;json-smart&lt;/artifactId&gt;\n    &lt;version&gt;2.4.10&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, when I do <code>mvn dependency:tree</code> it's still showing <code>2.3</code>:</p>\n<pre><code>[INFO] +- net.minidev:json-smart:jar:2.3:compile\n[INFO] |  \\- net.minidev:accessors-smart:jar:1.2:compile\n</code></pre>\n<p>There's no other spot where I can find json-smart 2.3, I checked the entire multi module project, but nowhere it shows 2.3. I'm not sure what I'm missing.</p>\n"},{"tags":["java","swing","event-handling","jpanel","keylistener"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1683211776,"post_id":76174493,"comment_id":134334934,"body_markdown":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you *shouldn&#39;t* use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid [mre] with your question. Please read the link to see what this is and how it can help you and us.","body":"If you&#39;ve done any searching on this, especially on this site, you&#39;ll see that most will recommend that you <i>shouldn&#39;t</i> use KeyListeners for something like this. Try key bindings instead, as it won&#39;t give you all the same focus requirement issues that KeyListeners do. Also, for better answers, best to create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question. Please read the link to see what this is and how it can help you and us."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683212592,"post_id":76174493,"comment_id":134335124,"body_markdown":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it.","body":"I&#39;ve taken away a lot from my code, but because I&#39;m placing a Jpanel inside a JScrollPane inside a JTabbedPane inside a JFrame, I feel like adding all of those things are necessary. I also want to add that my mouseListeners work for some reason to see if that had anything to do with it."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683212798,"post_id":76174493,"comment_id":134335186,"body_markdown":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. ***Again***, please look at the [mre] link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem.","body":"Only you can decide what is necessary or not, but I am saying that no one here can compile or run your or test your code. <b><i>Again</i></b>, please look at the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> link to see why you really should be posting one of these in your question and not the snippets of unrunnable code that you&#39;re currently posting. Note also that this is not a request for the entire program, but likely you&#39;ll want to create a new small program that runs and that reproduces the problem."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1683213222,"post_id":76174493,"comment_id":134335292,"body_markdown":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try [Key Bindings](https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the `static` modifier, and this can come back to bite you.","body":"If you get a decent answer soon without creating an MRE, then feel free to ignore my suggestion. But myself, given what I see, I again can only give broad recommendations that you try <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html\" rel=\"nofollow noreferrer\">Key Bindings</a> (tutorial link) to see if that would work. Another unrelated issue: you look to be over-using the <code>static</code> modifier, and this can come back to bite you."},{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683213852,"post_id":76174493,"comment_id":134335466,"body_markdown":"So you mean, produce code that can be tested? Where would submit that code?","body":"So you mean, produce code that can be tested? Where would submit that code?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1683215745,"post_id":76174493,"comment_id":134335980,"body_markdown":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much.","body":"Where? Here of course, as code-formatted text. Please read the link, as I&#39;ve mentioned several times; it will explain much."}],"answers":[{"comments":[{"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"score":0,"creation_date":1683232829,"post_id":76176232,"comment_id":134339630,"body_markdown":"Thanks, I&#39;ve had a look at the paintComponent changes you&#39;ve made, I&#39;ll have a look at the rest in the morning. Also, do you mind explaining what the super.paintComponent actually does and why using paintComponent is better than Paint?","body":"Thanks, I&#39;ve had a look at the paintComponent changes you&#39;ve made, I&#39;ll have a look at the rest in the morning. Also, do you mind explaining what the super.paintComponent actually does and why using paintComponent is better than Paint?"}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683223975,"creation_date":1683223975,"answer_id":76176232,"question_id":76174493,"body_markdown":"So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.\r\n\r\nThe bindings:\r\n```\r\nprivate void eventHandlers() {\r\n\t\r\n\t// .......\r\n\r\n\t// add some key bindings to test that they work\r\n\tInputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n\tActionMap actionMap = getActionMap();\r\n\r\n\t// when the g-key is pressed, the foreground color is set to green\r\n\tKeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n\tKeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n\tinputMap.put(gDownKey, &quot;gDown&quot;);\r\n\tactionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n\tinputMap.put(gUpKey, &quot;gUp&quot;);\r\n\tactionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n}\r\n\r\nprivate class ForeGroundColorAction extends AbstractAction {\r\n\tprivate Color color;\r\n\r\n\tpublic ForeGroundColorAction(Color color) {\r\n\t\tthis.color = color;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\tforeGroundColor = color;\r\n\t\trepaint();\r\n\t}\r\n}\r\n```\r\n\r\nAnd my MRE demonstration program:\r\n\r\n\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport javax.swing.*;\r\nimport javax.swing.GroupLayout.Alignment;\r\nimport javax.swing.LayoutStyle.ComponentPlacement;\r\nimport javax.swing.event.*;\r\n\r\npublic class Cartographer {\r\n    private final JFrame frmMyWorld = new JFrame();\r\n    double hPortion = 0;\r\n    double vPortion = 0;\r\n    private JTabbedPane tabbedPane;\r\n    private int numberOfTabbs;\r\n    public boolean isScrolling;\r\n    private JSlider zoomer;\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                try {\r\n                    Cartographer window = new Cartographer();\r\n                    window.frmMyWorld.setVisible(true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public Cartographer() {\r\n        initialize();\r\n    }\r\n\r\n    private void initialize() {\r\n        frmMyWorld.setTitle(&quot;My World&quot;);\r\n        frmMyWorld.setBounds(0, 0, 1450, 805);\r\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\r\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        newTab();\r\n        isScrolling = true;\r\n        zoomer = new JSlider();\r\n        zoomer.setMinimum(-1000);\r\n        zoomer.setMaximum(1000);\r\n        zoomer.setValue(1000);\r\n        zoomer.setOrientation(SwingConstants.VERTICAL);\r\n        zoomer.addChangeListener(new ChangeListener() {\r\n            public void stateChanged(ChangeEvent e) {\r\n                if (isScrolling) {\r\n                    hPortion = getHPortion();\r\n                    vPortion = getVPortion();\r\n                }\r\n                isScrolling = false;\r\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\r\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\r\n                getSelectedSpace().repaint();\r\n                getSelectedPane().getHorizontalScrollBar()\r\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\r\n                getSelectedPane().getVerticalScrollBar()\r\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\r\n                getSelectedPane().addNotify();\r\n                getSelectedPane().revalidate();\r\n                getSelectedPane().setDoubleBuffered(true);\r\n                getSelectedPane().getHorizontalScrollBar().revalidate();\r\n                getSelectedPane().getVerticalScrollBar().revalidate();\r\n                getSelectedSpace().repaint();\r\n            }\r\n        });\r\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        groupLayout.setHorizontalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(28)));\r\n        groupLayout.setVerticalGroup(\r\n                groupLayout.createParallelGroup(Alignment.LEADING)\r\n                        .addGroup(groupLayout.createSequentialGroup()\r\n                                .addContainerGap()\r\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\r\n                                                GroupLayout.PREFERRED_SIZE)\r\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\r\n                                                GroupLayout.PREFERRED_SIZE))\r\n                                .addGap(18)));\r\n        groupSettingManager(groupLayout);\r\n    }\r\n\r\n    void groupSettingManager(GroupLayout groupLayout) {\r\n        frmMyWorld.getContentPane().setLayout(groupLayout);\r\n    }\r\n\r\n    void newTab() {\r\n        // We first create a new workspace with the given dimentions\r\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\r\n        // we need to focus on this new workspace for key listeners to work\r\n        // Our workspace sits inside a scroll pane\r\n        JScrollPane scrollPane = new JScrollPane(workSpace);\r\n        numberOfTabbs++;\r\n        // our scroll pane sits inside a tabbed pane\r\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        workSpace.requestFocus();\r\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\r\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n\r\n        });\r\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                isScrolling = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    Workspace getSelectedSpace() {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getSelectedPane() {\r\n        return (JScrollPane) tabbedPane.getSelectedComponent();\r\n    }\r\n\r\n    Workspace getSpace(int i) {\r\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n    }\r\n\r\n    JScrollPane getPane(int i) {\r\n        return (JScrollPane) tabbedPane.getComponent(i);\r\n    }\r\n\r\n    void setZoomerValue(int i) {\r\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n            zoomer.setValue(i);\r\n    }\r\n\r\n    int getZoomerValue() {\r\n        return zoomer.getValue();\r\n    }\r\n\r\n    public double getHPortion() {\r\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public double getVPortion() {\r\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\r\n        return (v + a) / m;\r\n    }\r\n\r\n    public int hVisible() {\r\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n    }\r\n\r\n    public int vVisible() {\r\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n    }\r\n}\r\n\r\nclass Workspace extends JPanel implements KeyListener {\r\n    // we keep every landmass that will appear in the workspace stored in this array\r\n    private Color backGroundColor;\r\n    private Color foreGroundColor;\r\n    private int zoomerValue;\r\n    private Cartographer cartographer;\r\n    private double zoomFactor;\r\n    private int width;\r\n    private int height;\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public Workspace(int w, int h, Cartographer cartographer) {\r\n        this.cartographer = cartographer;\r\n        eventHandlers();\r\n        this.setPreferredSize(new Dimension(w, h));\r\n        backGroundColor = Color.BLACK;\r\n        foreGroundColor = Color.WHITE;\r\n        this.setBackground(backGroundColor);\r\n        zoomFactor = 1;\r\n        width = w;\r\n        height = h;\r\n        zoomerValue = 1000;\r\n        this.setFocusable(true);\r\n        this.requestFocus();\r\n        this.addKeyListener(this);\r\n        setBackground(backGroundColor); // !!s\r\n    }\r\n\r\n    public Workspace(LayoutManager layout) {\r\n        super(layout);\r\n    }\r\n\r\n    public Workspace(boolean isDoubleBuffered) {\r\n        super(isDoubleBuffered);\r\n    }\r\n\r\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n        super(layout, isDoubleBuffered);\r\n    }\r\n\r\n    public double getZoomFactor() {\r\n        return zoomFactor;\r\n    }\r\n\r\n    public void setZoomFactor(double z) {\r\n        zoomFactor = z;\r\n        repaint();\r\n    }\r\n\r\n    public void adjustZoomFactor(int z) {\r\n        zoomFactor = Math.pow(2, z);\r\n        repaint();\r\n    }\r\n\r\n    public int getZoomerValue() {\r\n        return zoomerValue;\r\n    }\r\n\r\n    public void setZoomerValue(int i) {\r\n        zoomerValue = i;\r\n    }\r\n\r\n    @Override // must override paintComponent, not paint\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g); // never forget this!\r\n\r\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\r\n        Graphics2D g2 = (Graphics2D) g.create();\r\n        zoom(g2);\r\n        for (int i = 0; i &lt; 35; i++) {\r\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\r\n                g2.setColor(foreGroundColor);\r\n                g2.fillRect(148 * i, 148 * j, 148, 148);\r\n                g2.setColor(Color.GREEN);\r\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\r\n            }\r\n        }\r\n        g2.dispose();  // dispose of copy\r\n\r\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\r\n    }\r\n\r\n    private void zoom(Graphics2D g) {\r\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n        g.scale(zoomFactor, zoomFactor);\r\n        this.setPreferredSize(\r\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\r\n        this.validate();\r\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    }\r\n\r\n    /**\r\n     * Any events that occur within the workspace happen here\r\n     */\r\n    private void eventHandlers() {\r\n        this.addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                foreGroundColor = Color.BLUE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseClicked(MouseEvent e) {\r\n                backGroundColor = Color.GRAY;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseReleased(MouseEvent e) {\r\n                foreGroundColor = Color.WHITE;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseExited(MouseEvent e) {\r\n                backGroundColor = Color.BLACK;\r\n                repaint();\r\n            }\r\n\r\n            public void mouseEntered(MouseEvent e) {\r\n                cartographer.setZoomerValue(zoomerValue);\r\n                repaint();\r\n            }\r\n        });\r\n        this.addMouseMotionListener(new MouseMotionAdapter() {\r\n            @Override\r\n            public void mouseMoved(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseDragged(MouseEvent e) {\r\n                repaint();\r\n            }\r\n\r\n            public void mouseWheelMoved(MouseEvent e) {\r\n                cartographer.isScrolling = true;\r\n            }\r\n        });\r\n        this.addKeyListener(new KeyAdapter() {\r\n            public void keyPressed(KeyEvent e) {\r\n                foreGroundColor = Color.RED;\r\n            }\r\n        });\r\n\r\n        // add some key bindings to test that they work\r\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\r\n        ActionMap actionMap = getActionMap();\r\n\r\n        // when the g-key is pressed, the foreground color is set to green\r\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\r\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\r\n\r\n        inputMap.put(gDownKey, &quot;gDown&quot;);\r\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\r\n\r\n        inputMap.put(gUpKey, &quot;gUp&quot;);\r\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\r\n    }\r\n\r\n    private class ForeGroundColorAction extends AbstractAction {\r\n        private Color color;\r\n\r\n        public ForeGroundColorAction(Color color) {\r\n            this.color = color;\r\n        }\r\n\r\n        @Override\r\n        public void actionPerformed(ActionEvent e) {\r\n            foreGroundColor = color;\r\n            repaint();\r\n        }\r\n    }\r\n\r\n    public int mousePositionX() {\r\n        return (int) Math.round(getMousePosition().x / zoomFactor);\r\n    }\r\n\r\n    public int mousePositionY() {\r\n        return (int) Math.round(getMousePosition().y / zoomFactor);\r\n    }\r\n\r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n        // TODO Auto-generated method stub\r\n    }\r\n\r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        switch (e.getKeyCode()) {\r\n            case 38:\r\n                if (zoomerValue &lt; 1000) {\r\n                    zoomerValue += 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                repaint();\r\n                break;\r\n            case 40:\r\n                if (zoomerValue &gt; -1000) {\r\n                    zoomerValue -= 5;\r\n                    cartographer.setZoomerValue(zoomerValue);\r\n                }\r\n                System.out.println(zoomerValue);\r\n                repaint();\r\n                break;\r\n            default:\r\n                repaint();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n    }\r\n}\r\n```\r\n\r\nNote my removal of many static modifiers. Also, you shouldn&#39;t draw in paint but in paintComponent and don&#39;t forget to call the super&#39;s method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM. ","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>So, using your code, I can demonstrate that Key Bindings does in fact work inside of a nested component, here the bindings are on the g-key, for &quot;green&quot;. When the key is pressed, the foreground color of the component changes to green.</p>\n<p>The bindings:</p>\n<pre><code>private void eventHandlers() {\n    \n    // .......\n\n    // add some key bindings to test that they work\n    InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n    ActionMap actionMap = getActionMap();\n\n    // when the g-key is pressed, the foreground color is set to green\n    KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n    KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n    inputMap.put(gDownKey, &quot;gDown&quot;);\n    actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n    inputMap.put(gUpKey, &quot;gUp&quot;);\n    actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n}\n\nprivate class ForeGroundColorAction extends AbstractAction {\n    private Color color;\n\n    public ForeGroundColorAction(Color color) {\n        this.color = color;\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        foreGroundColor = color;\n        repaint();\n    }\n}\n</code></pre>\n<p>And my MRE demonstration program:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.GroupLayout.Alignment;\nimport javax.swing.LayoutStyle.ComponentPlacement;\nimport javax.swing.event.*;\n\npublic class Cartographer {\n    private final JFrame frmMyWorld = new JFrame();\n    double hPortion = 0;\n    double vPortion = 0;\n    private JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public boolean isScrolling;\n    private JSlider zoomer;\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public Cartographer() {\n        initialize();\n    }\n\n    private void initialize() {\n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100, 100, 100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if (isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue() / 1000 - 1));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar()\n                        .setValue((int) Math.round(hPortion * hScale - (hVisible() / 2)));\n                getSelectedPane().getVerticalScrollBar()\n                        .setValue((int) Math.round(vPortion * vScale - (vVisible() / 2)));\n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                                .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(28)));\n        groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addGroup(groupLayout.createSequentialGroup()\n                                .addContainerGap()\n                                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624,\n                                                GroupLayout.PREFERRED_SIZE)\n                                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642,\n                                                GroupLayout.PREFERRED_SIZE))\n                                .addGap(18)));\n        groupSettingManager(groupLayout);\n    }\n\n    void groupSettingManager(GroupLayout groupLayout) {\n        frmMyWorld.getContentPane().setLayout(groupLayout);\n    }\n\n    void newTab() {\n        // We first create a new workspace with the given dimentions\n        Workspace workSpace = new Workspace(1295 * 4, 592 * 4, this);\n        // we need to focus on this new workspace for key listeners to work\n        // Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        // our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        workSpace.requestFocus();\n        tabbedPane.setSelectedIndex(numberOfTabbs - 1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n        });\n    }\n\n    Workspace getSelectedSpace() {\n        return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n    }\n\n    JScrollPane getSelectedPane() {\n        return (JScrollPane) tabbedPane.getSelectedComponent();\n    }\n\n    Workspace getSpace(int i) {\n        return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n    }\n\n    JScrollPane getPane(int i) {\n        return (JScrollPane) tabbedPane.getComponent(i);\n    }\n\n    void setZoomerValue(int i) {\n        if (-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n            zoomer.setValue(i);\n    }\n\n    int getZoomerValue() {\n        return zoomer.getValue();\n    }\n\n    public double getHPortion() {\n        int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n        int v = getSelectedPane().getHorizontalScrollBar().getValue();\n        double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public double getVPortion() {\n        int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n        int v = getSelectedPane().getVerticalScrollBar().getValue();\n        double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount() / 2;\n        return (v + a) / m;\n    }\n\n    public int hVisible() {\n        return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n    }\n\n    public int vVisible() {\n        return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n    }\n}\n\nclass Workspace extends JPanel implements KeyListener {\n    // we keep every landmass that will appear in the workspace stored in this array\n    private Color backGroundColor;\n    private Color foreGroundColor;\n    private int zoomerValue;\n    private Cartographer cartographer;\n    private double zoomFactor;\n    private int width;\n    private int height;\n    private static final long serialVersionUID = 1L;\n\n    public Workspace(int w, int h, Cartographer cartographer) {\n        this.cartographer = cartographer;\n        eventHandlers();\n        this.setPreferredSize(new Dimension(w, h));\n        backGroundColor = Color.BLACK;\n        foreGroundColor = Color.WHITE;\n        this.setBackground(backGroundColor);\n        zoomFactor = 1;\n        width = w;\n        height = h;\n        zoomerValue = 1000;\n        this.setFocusable(true);\n        this.requestFocus();\n        this.addKeyListener(this);\n        setBackground(backGroundColor); // !!s\n    }\n\n    public Workspace(LayoutManager layout) {\n        super(layout);\n    }\n\n    public Workspace(boolean isDoubleBuffered) {\n        super(isDoubleBuffered);\n    }\n\n    public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n        super(layout, isDoubleBuffered);\n    }\n\n    public double getZoomFactor() {\n        return zoomFactor;\n    }\n\n    public void setZoomFactor(double z) {\n        zoomFactor = z;\n        repaint();\n    }\n\n    public void adjustZoomFactor(int z) {\n        zoomFactor = Math.pow(2, z);\n        repaint();\n    }\n\n    public int getZoomerValue() {\n        return zoomerValue;\n    }\n\n    public void setZoomerValue(int i) {\n        zoomerValue = i;\n    }\n\n    @Override // must override paintComponent, not paint\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g); // never forget this!\n\n        // best to only scale a copy of the Graphics object so as not to break the painting chain\n        Graphics2D g2 = (Graphics2D) g.create();\n        zoom(g2);\n        for (int i = 0; i &lt; 35; i++) {\n            for (int j = Math.floorMod(i, 2); j &lt; 16; j += 2) {\n                g2.setColor(foreGroundColor);\n                g2.fillRect(148 * i, 148 * j, 148, 148);\n                g2.setColor(Color.GREEN);\n                g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;, 148 * i + 66, 148 * j + 72);\n            }\n        }\n        g2.dispose();  // dispose of copy\n\n        // this.setBackground(backGroundColor); // !! does not belong in painting method\n    }\n\n    private void zoom(Graphics2D g) {\n        // if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n        g.scale(zoomFactor, zoomFactor);\n        this.setPreferredSize(\n                new Dimension((int) Math.round(width * zoomFactor), (int) Math.round(height * zoomFactor)));\n        this.validate();\n        // if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n    }\n\n    /**\n     * Any events that occur within the workspace happen here\n     */\n    private void eventHandlers() {\n        this.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mousePressed(MouseEvent e) {\n                foreGroundColor = Color.BLUE;\n                repaint();\n            }\n\n            public void mouseClicked(MouseEvent e) {\n                backGroundColor = Color.GRAY;\n                repaint();\n            }\n\n            public void mouseReleased(MouseEvent e) {\n                foreGroundColor = Color.WHITE;\n                repaint();\n            }\n\n            public void mouseExited(MouseEvent e) {\n                backGroundColor = Color.BLACK;\n                repaint();\n            }\n\n            public void mouseEntered(MouseEvent e) {\n                cartographer.setZoomerValue(zoomerValue);\n                repaint();\n            }\n        });\n        this.addMouseMotionListener(new MouseMotionAdapter() {\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseDragged(MouseEvent e) {\n                repaint();\n            }\n\n            public void mouseWheelMoved(MouseEvent e) {\n                cartographer.isScrolling = true;\n            }\n        });\n        this.addKeyListener(new KeyAdapter() {\n            public void keyPressed(KeyEvent e) {\n                foreGroundColor = Color.RED;\n            }\n        });\n\n        // add some key bindings to test that they work\n        InputMap inputMap = getInputMap(WHEN_IN_FOCUSED_WINDOW);\n        ActionMap actionMap = getActionMap();\n\n        // when the g-key is pressed, the foreground color is set to green\n        KeyStroke gDownKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, false);\n        KeyStroke gUpKey = KeyStroke.getKeyStroke(KeyEvent.VK_G, 0, true);\n\n        inputMap.put(gDownKey, &quot;gDown&quot;);\n        actionMap.put(&quot;gDown&quot;, new ForeGroundColorAction(Color.GREEN));\n\n        inputMap.put(gUpKey, &quot;gUp&quot;);\n        actionMap.put(&quot;gUp&quot;, new ForeGroundColorAction(Color.WHITE));\n    }\n\n    private class ForeGroundColorAction extends AbstractAction {\n        private Color color;\n\n        public ForeGroundColorAction(Color color) {\n            this.color = color;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            foreGroundColor = color;\n            repaint();\n        }\n    }\n\n    public int mousePositionX() {\n        return (int) Math.round(getMousePosition().x / zoomFactor);\n    }\n\n    public int mousePositionY() {\n        return (int) Math.round(getMousePosition().y / zoomFactor);\n    }\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n        // TODO Auto-generated method stub\n    }\n\n    @Override\n    public void keyPressed(KeyEvent e) {\n        switch (e.getKeyCode()) {\n            case 38:\n                if (zoomerValue &lt; 1000) {\n                    zoomerValue += 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                repaint();\n                break;\n            case 40:\n                if (zoomerValue &gt; -1000) {\n                    zoomerValue -= 5;\n                    cartographer.setZoomerValue(zoomerValue);\n                }\n                System.out.println(zoomerValue);\n                repaint();\n                break;\n            default:\n                repaint();\n        }\n    }\n\n    @Override\n    public void keyReleased(KeyEvent e) {\n    }\n}\n</code></pre>\n<p>Note my removal of many static modifiers. Also, you shouldn't draw in paint but in paintComponent and don't forget to call the super's method for housekeeping painting. Also, scaling should usually be done on a copy of the Graphics object given by the JVM.</p>\n"}],"owner":{"account_id":18113888,"reputation":53,"user_id":21816951,"display_name":"Callum Rae"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76176232,"answer_count":1,"score":1,"last_activity_date":1683223975,"creation_date":1683211668,"question_id":76174493,"body_markdown":"There&#39;s a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I&#39;m losing the ability to add key listeners. \r\n\r\nI have this to set up my JFrame\r\n```\r\npublic class Cartographer {\r\n\r\n\tprivate final JFrame frmMyWorld = new JFrame();\r\n\t/**\r\n\t * set up our toolbar\r\n\t */\r\n\tprivate final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\r\n\t\r\n\t\r\n\t//this is where I create the new tabbed pane\r\n\tprivate static JTabbedPane tabbedPane;\r\n\tprivate int numberOfTabbs;\r\n\tpublic static boolean isScrolling;\r\n\tprivate static JSlider zoomer;\r\n\t\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tEventQueue.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tCartographer window = new Cartographer();\r\n\t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tpublic Cartographer() {\t\r\n\t\tinitialize();\r\n\t\tcreateEvents();\r\n\t}\r\n```\r\nI then initialize:\r\n\r\n```\r\nprivate void initialize() {\r\n\t\t\r\n\t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n\t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n\t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n\t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\r\n\t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n\t\tnewTab();\r\n\t\tisScrolling = true;\r\n\r\n\t\t//this sets up my slider which I&#39;m using to zoom\r\n\t\tzoomer = new JSlider();\r\n\t\tzoomer.setMinimum(-1000);\r\n\t\tzoomer.setMaximum(1000);\r\n\t\tzoomer.setValue(1000);\r\n\t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n\t\tzoomer.addChangeListener(new ChangeListener() {\r\n\t\t\tpublic void stateChanged(ChangeEvent e) {\r\n\t\t\t\tif(isScrolling) {\r\n\t\t\t\t\thPortion = getHPortion();\r\n\t\t\t\t\tvPortion = getVPortion();\r\n\t\t\t\t}\r\n\t\t\t\tisScrolling = false;\r\n\t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n\t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n\t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\r\n\t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n\t\t\t\tgetSelectedPane().addNotify();\r\n\t\t\t\tgetSelectedPane().revalidate();\r\n\t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n\t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n\t\t\t\tgetSelectedSpace().repaint();\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t/**and using a group layout, we add a new tab to our JFrame\r\n                 * my original code was using buttons I&#39;m just simplifying the code to make it                  .                */easier to read,that&#39;s why I&#39;m using group layour     ,          \r\n\t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n\t\tgroupLayout.setHorizontalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(28))\r\n\t\t);\r\n\t\tgroupLayout.setVerticalGroup(\r\n\t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n\t\t\t\t\t.addContainerGap()\r\n\t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n\t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n\t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n\t\t\t\t\t.addGap(18))\r\n\t\t);\r\n\t\tgroupSettingManager(groupLayout);\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAnd the newTab() function is what we do when we create a new tab\r\n\t\r\n```\r\nvoid newTab() {\r\n\t\t//We first create a new workspace with the given dimentions \r\n\t\tWorkspace workSpace = new Workspace(1295*256, 592*256);\r\n//request focus so we can add key listeners\r\n\t\tworkSpace.requestFocus();\r\n\t\t//Our workspace sits inside a scroll pane\r\n\t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n\t\tnumberOfTabbs++;\r\n\t\t//our scroll pane sits inside a tabbed pane\r\n\t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n\t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n\t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n\t\t\t@Override\r\n\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\tisScrolling = true;\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n```\r\nAs you may have noticed, we&#39;re requesting focus from the new workspace as soon as it&#39;s created, however, that doesn&#39;t seem to give it focus\r\n\r\n\r\nI&#39;ve tried adding key listeners to the workspace, like so\r\n```\r\npublic class Workspace extends JPanel implements KeyListener{\r\n\t\t//we keep every landmass that will appear in the workspace stored in this array\r\n\t\tpublic ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\r\n\t\t\r\n\t\tprivate static Color backGroundColor;\r\n\t\tprivate int zoomerValue;\r\n\t\tprivate static double zoomFactor; \r\n\t\tprivate static int width;\r\n\t\tprivate static int height;\r\n\t\tprivate static boolean zooming = false;\r\n\r\n\t\t/**\r\n\t\t * \r\n\t\t */\r\n\t\tprivate static final long serialVersionUID = 1L;\r\n\t\t\r\n\t\tpublic Workspace(int w, int h) {\r\n\t\t\teventHandlers();\r\n\t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n\t\t\t\r\n\t\t\tbackGroundColor = new Color(0,120,255);\r\n\t\t\tthis.setBackground(backGroundColor);\r\n\t\t\tzoomFactor = 1;\r\n\t\t\twidth = w;\r\n\t\t\theight = h;\r\n\t\t\tzoomerValue = 1000;\r\n\t\t\tthis.setFocusable(true);\r\n                        //I&#39;ve also tried to request focus here, that didn&#39;t work either\r\n\t\t\t//this.requestFocus();\r\n\t\t\tthis.addKeyListener(this);\r\n\t\t\t//this.requestFocusInWindow();\r\n\t\t\trepaint();\r\n\t\t}\r\n\r\n                ...\r\n\r\n                @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\t\r\n\t\t}\r\n\t\t@Override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\r\n\t\t}\r\n```\r\nThe key listeners here don&#39;t work, even though I have tried requesting focus in multiple places\r\n\r\n\r\nThe mouse listeners seem to work when I create events here:\r\n\r\n```\r\nprivate void eventHandlers() {\r\n\t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n\t\t\t\t        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n                                ...\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n                                        ...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n\t\t\t\t\t...\r\n\t\t\t\t\trepaint();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n\t        \t@Override\r\n\t        \tpublic void mouseMoved(MouseEvent e) {\r\n\t            \t\trepaint();\r\n\t        \t}\r\n\t        \tpublic void mouseDragged(MouseEvent e) {\r\n\t        \t\trepaint();\r\n\t        \t}\r\n\t        \r\n\t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n                                       // this one doesn&#39;t work either\r\n\t        \t\t\tCartographer.isScrolling = true;\r\n\t        \t}\r\n\t        });\r\n                \r\n                this.addKeyListener(new KeyAdapter(){\r\n\r\n\t           @Override\r\n\t\tpublic void keyTyped(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyPressed(KeyEvent e) {\r\n\t\t\t...\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t}\r\n                @override\r\n\t\tpublic void keyReleased(KeyEvent e) {\r\n\t\t\t...\t\r\n\t\t}\t\t\r\n\t\t\t\r\n\t}\r\n```\r\nI tried adding key listeners here, but they didn&#39;t work either. I never tried having key listeners in both places at the same time, I&#39;m just showing all the places they have been to make it easier for you. \r\n\r\nMinimal reproducible example:\r\n\r\n  \r\n\r\n      import java.awt.Color;  \r\n        import java.awt.EventQueue;\r\n        import java.awt.event.MouseEvent;\r\n        import java.awt.event.MouseListener;\r\n        \r\n        import javax.swing.JFrame;\r\n        import javax.swing.JScrollPane;\r\n        import javax.swing.JTabbedPane;\r\n        import javax.swing.GroupLayout;\r\n        import javax.swing.GroupLayout.Alignment;\r\n        import javax.swing.LayoutStyle.ComponentPlacement;\r\n        import javax.swing.JSlider;\r\n        import javax.swing.SwingConstants;\r\n        import javax.swing.event.ChangeListener;\r\n        import javax.swing.event.ChangeEvent;\r\n        \r\n        \r\n        \r\n        public class Cartographer {\r\n        \r\n        \tprivate final JFrame frmMyWorld = new JFrame();\r\n        \t/**\r\n        \t * set up our toolbar\r\n        \t */\r\n        \tdouble hPortion = 0;\r\n        \tdouble vPortion = 0;\r\n        \t\r\n        \t\r\n        \t//the space that will contain everything that is drawn\r\n        \tprivate static JTabbedPane tabbedPane;\r\n        \tprivate int numberOfTabbs;\r\n        \tpublic static boolean isScrolling;\r\n        \tprivate static JSlider zoomer;\r\n        \t\r\n        \t\r\n        \tpublic static void main(String[] args) {\r\n        \t\tEventQueue.invokeLater(new Runnable() {\r\n        \t\t\tpublic void run() {\r\n        \t\t\t\ttry {\r\n        \t\t\t\t\tCartographer window = new Cartographer();\r\n        \t\t\t\t\twindow.frmMyWorld.setVisible(true);\r\n        \t\t\t\t} catch (Exception e) {\r\n        \t\t\t\t\te.printStackTrace();\r\n        \t\t\t\t}\r\n        \t\t\t}\r\n        \t\t});\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Create the application.\r\n        \t */\r\n        \tpublic Cartographer() {\t\r\n        \t\tinitialize();\r\n        \t}\r\n        \r\n        \t/**\r\n        \t * Initialise the contents of the frame.\r\n        \t */\r\n        \tprivate void initialize() {\r\n        \t\t\r\n        \t\tfrmMyWorld.setTitle(&quot;My World&quot;);\r\n        \t\tfrmMyWorld.setBounds(0, 0, 1450, 805);\r\n        \t\tfrmMyWorld.getContentPane().setBackground(new Color(100,100,100));\r\n        \t\tfrmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \t\t\r\n        \t\ttabbedPane = new JTabbedPane(JTabbedPane.TOP);\r\n        \t\tnewTab();\r\n        \t\tisScrolling = true;\r\n        \r\n        \t\t/**\r\n        \t\t * give everything its position in the window, we&#39;re using a group layout\r\n        \t\t */\r\n        \t\tzoomer = new JSlider();\r\n        \t\tzoomer.setMinimum(-1000);\r\n        \t\tzoomer.setMaximum(1000);\r\n        \t\tzoomer.setValue(1000);\r\n        \t\tzoomer.setOrientation(SwingConstants.VERTICAL);\r\n        \t\tzoomer.addChangeListener(new ChangeListener() {\r\n        \t\t\tpublic void stateChanged(ChangeEvent e) {\r\n        \t\t\t\tif(isScrolling) {\r\n        \t\t\t\t\thPortion = getHPortion();\r\n        \t\t\t\t\tvPortion = getVPortion();\r\n        \t\t\t\t}\r\n        \t\t\t\tisScrolling = false;\r\n        \t\t\t\tint hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\t\t\tint vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\t\t\tgetSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\r\n        \t\t\t\tgetSelectedSpace().setZoomerValue(zoomer.getValue());\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \r\n        \t\t\t\tgetSelectedPane().addNotify();\r\n        \t\t\t\tgetSelectedPane().revalidate();\r\n        \t\t\t\tgetSelectedPane().setDoubleBuffered(true);\r\n        \t\t\t\tgetSelectedPane().getHorizontalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedPane().getVerticalScrollBar().revalidate();\r\n        \t\t\t\tgetSelectedSpace().repaint();\r\n        \t\t\t}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t\tGroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\r\n        \t\tgroupLayout.setHorizontalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t.addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(28))\r\n        \t\t);\r\n        \t\tgroupLayout.setVerticalGroup(\r\n        \t\t\tgroupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t.addGroup(groupLayout.createSequentialGroup()\r\n        \t\t\t\t\t.addContainerGap()\r\n        \t\t\t\t\t.addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\r\n        \t\t\t\t\t\t.addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\r\n        \t\t\t\t\t\t.addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\r\n        \t\t\t\t\t.addGap(18))\r\n        \t\t);\r\n        \t\tgroupSettingManager(groupLayout);\r\n        \t\t\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \r\n        \r\n        \tvoid groupSettingManager(GroupLayout groupLayout) {\r\n        \t\t\tfrmMyWorld.getContentPane().setLayout(groupLayout);\r\n        \t}\r\n        \r\n        \r\n        \tvoid newTab() {\r\n        \t\t//We first create a new workspace with the given dimentions \r\n        \t\tWorkspace workSpace = new Workspace(1295*4, 592*4);\r\n        \t\t//we need to focus on this new workspace for key listeners to work\r\n        \t\t//Our workspace sits inside a scroll pane\r\n        \t\tJScrollPane scrollPane = new JScrollPane(workSpace);\r\n        \t\tnumberOfTabbs++;\r\n        \t\t//our scroll pane sits inside a tabbed pane\r\n        \t\ttabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\r\n        \t\tworkSpace.requestFocus();\r\n        \t\ttabbedPane.setSelectedIndex(numberOfTabbs-1);\r\n        \t\tscrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\tscrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mousePressed(MouseEvent e) {\r\n        \t\t\t\tisScrolling = true;\r\n        \t\t\t}\r\n        \t\t\t@Override\r\n        \t\t\tpublic void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\r\n        \t\t});\r\n        \t\t\r\n        \t\t\r\n        \t}\r\n        \t\r\n        \t\r\n        \tstatic Workspace getSelectedSpace() {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getSelectedPane() {\r\n        \t\treturn (JScrollPane) tabbedPane.getSelectedComponent();\r\n        \t}\r\n        \tWorkspace getSpace(int i) {\r\n        \t\treturn ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\r\n        \t}\r\n        \tJScrollPane getPane(int i) {\r\n        \t\treturn (JScrollPane) tabbedPane.getComponent(i);\r\n        \t}\r\n        \t\r\n        \t\r\n        \t\r\n        \t static void setZoomerValue(int i) {\r\n        \t\tif(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\r\n        \t\t\tzoomer.setValue(i);\r\n        \t}\r\n        \tint getZoomerValue() {\r\n        \t\treturn zoomer.getValue();\t\r\n        \t}\r\n        \t\r\n        \tpublic double getHPortion() {\r\n        \t\tint m = getSelectedPane().getHorizontalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getHorizontalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v + a)/m;\r\n        \t}\r\n        \tpublic double getVPortion() {\r\n        \t\tint m = getSelectedPane().getVerticalScrollBar().getMaximum();\r\n        \t\tint v = getSelectedPane().getVerticalScrollBar().getValue();\r\n        \t\tdouble a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\r\n        \t\treturn (v +a)/m;\r\n        \t}\r\n        \tpublic int hVisible() {\r\n        \t\treturn getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \tpublic int vVisible() {\r\n        \t\treturn getSelectedPane().getVerticalScrollBar().getVisibleAmount();\r\n        \t}\r\n        \r\n        \r\n        }\r\n    \r\n    \timport java.awt.Color; \r\n    \timport java.awt.Dimension;\r\n    \timport java.awt.Graphics;\r\n    \timport java.awt.Graphics2D;\r\n    \timport java.awt.LayoutManager;\r\n    import java.awt.event.KeyAdapter;\r\n    import java.awt.event.KeyEvent;\r\n    \timport java.awt.event.KeyListener;\r\n    \timport java.awt.event.MouseAdapter;\r\n    \timport java.awt.event.MouseEvent;\r\n    \timport java.awt.event.MouseMotionAdapter;\r\n    \r\n    \timport javax.swing.JPanel;\r\n    \r\n    \tpublic class Workspace extends JPanel implements KeyListener{\r\n    \t\t//we keep every landmass that will appear in the workspace stored in this array\r\n    \t\t\r\n    \t\tprivate static Color backGroundColor;\r\n    \t\tprivate static Color foreGroundColor;\r\n    \t\tprivate int zoomerValue;\r\n    \t\tprivate static double zoomFactor; \r\n    \t\tprivate static int width;\r\n    \t\tprivate static int height;\r\n    \r\n    \t\t/**\r\n    \t\t * \r\n    \t\t */\r\n    \t\tprivate static final long serialVersionUID = 1L;\r\n    \t\t\r\n    \t\tpublic Workspace(int w, int h) {\r\n    \t\t\teventHandlers();\r\n    \t\t\tthis.setPreferredSize(new Dimension(w,h));\r\n    \t\t\t\r\n    \t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\tzoomFactor = 1;\r\n    \t\t\twidth = w;\r\n    \t\t\theight = h;\r\n    \t\t\tzoomerValue = 1000;\r\n    \t\t\tthis.setFocusable(true);\r\n    \t\t\tthis.requestFocus();\r\n    \t\t\tthis.addKeyListener(this);\r\n    \t\t\t//this.requestFocusInWindow();\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \r\n    \r\n    \r\n    \r\n    \t\tpublic Workspace(LayoutManager layout) {\r\n    \t\t\tsuper(layout);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(boolean isDoubleBuffered) {\r\n    \t\t\tsuper(isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\tpublic Workspace(LayoutManager layout, boolean isDoubleBuffered) {\r\n    \t\t\tsuper(layout, isDoubleBuffered);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic double getZoomFactor() {\r\n    \t\t\treturn zoomFactor;\r\n    \t\t}\r\n    \t\tpublic void setZoomFactor(double z) {\r\n    \t\t\tzoomFactor = z;\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\tpublic void adjustZoomFactor(int z) {\r\n    \t\t\tzoomFactor = Math.pow(2, z);\r\n    \t\t\trepaint();\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int getZoomerValue() {\r\n    \t\t\treturn zoomerValue;\r\n    \t\t}\r\n    \t\tpublic void setZoomerValue(int i) {\r\n    \t\t\tzoomerValue = i;\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Paint Function and supplement functions \r\n    \t\t */\r\n    \t\tpublic void paint(Graphics g)\r\n    \t\t{\r\n    \t\t\tGraphics2D g2= (Graphics2D) g;\r\n    \t\t\tzoom(g2);\r\n    \t\t\t//a for loop to run the same function on each of the landmasses to draw them all\t\r\n    \t\t\tfor(int i = 0; i &lt; 35; i++)\r\n    \t\t\t\tfor(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\r\n    \t\t\t\t\tg2.setColor(foreGroundColor);\r\n    \t\t\t\t\tg2.fillRect(148*i, 148*j, 148, 148);\r\n    \t\t\t\t\tg2.setColor(Color.GREEN);\r\n    \t\t\t\t\tg2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\r\n    \t\t\t\t}\r\n    \t\t\tthis.setBackground(backGroundColor);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\tprivate void zoom(Graphics2D g) {\r\n    \t\t\t//if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\r\n    \t\t\tg.scale(zoomFactor,zoomFactor);\r\n    \t\t\tthis.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\r\n    \t\t\tthis.validate();\r\n    \t\t\t//if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\r\n    \r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Any events that occur within the workspace happen here\r\n    \t\t */\r\n    \t\tprivate void eventHandlers() {\r\n    \t\t\tthis.addMouseListener(new MouseAdapter() {\t\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void mousePressed(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.BLUE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tpublic void mouseClicked(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.GRAY;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseReleased(MouseEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.WHITE;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseExited(MouseEvent e) {\r\n    \t\t\t\t\tbackGroundColor = Color.BLACK;\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void mouseEntered(MouseEvent e) {\r\n    \t\t\t\t\tCartographer.setZoomerValue(zoomerValue);\r\n    \t\t\t\t\trepaint();\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\tthis.addMouseMotionListener(new MouseMotionAdapter() {\r\n    \t        \t@Override\r\n    \t        \tpublic void mouseMoved(MouseEvent e) {\r\n    \t            \t\trepaint();\r\n    \t        \t}\r\n    \t        \tpublic void mouseDragged(MouseEvent e) {\r\n    \t        \t\trepaint();\r\n    \t        \t}\r\n    \t        \r\n    \t        \tpublic void mouseWheelMoved(MouseEvent e) {\r\n    \t        \t\t\tCartographer.isScrolling = true;\r\n    \t        \t}\r\n    \t        });\r\n    \t\t\t\r\n    \t\t\tthis.addKeyListener(new KeyAdapter() {\r\n    \t\t\t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\t\t\tforeGroundColor = Color.RED;\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\tpublic int mousePositionX() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().x/zoomFactor);\r\n    \t\t}\r\n    \t\tpublic int mousePositionY() {\r\n    \t\t\treturn (int) Math.round(getMousePosition().y/zoomFactor);\r\n    \t\t}\r\n    \r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyTyped(KeyEvent e) {\r\n    \t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyPressed(KeyEvent e) {\r\n    \t\t\tswitch(e.getKeyCode()) {\r\n    \t\t\tcase 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tcase 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \r\n    \t\t\t\tSystem.out.println(zoomerValue);\r\n    \t\t\t\trepaint();\r\n    \t\t\tbreak;\r\n    \t\t\tdefault: repaint();\r\n    \t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void keyReleased(KeyEvent e) {\r\n    \t\t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"I&#39;m trying to add key listeners to a JPanel in Java","body":"<p>There's a lot to understand, so stick with me. I have a JPanel inside a JScrollPane, which is inside a JTabbedPane, which is inside a JFrame. Somewhere in that process, I'm losing the ability to add key listeners.</p>\n<p>I have this to set up my JFrame</p>\n<pre><code>public class Cartographer {\n\n    private final JFrame frmMyWorld = new JFrame();\n    /**\n     * set up our toolbar\n     */\n    private final JButton addTabb = new JButton(&quot;Create New Workspace&quot;);\n    \n    \n    //this is where I create the new tabbed pane\n    private static JTabbedPane tabbedPane;\n    private int numberOfTabbs;\n    public static boolean isScrolling;\n    private static JSlider zoomer;\n    \n    \n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    Cartographer window = new Cartographer();\n                    window.frmMyWorld.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n    public Cartographer() { \n        initialize();\n        createEvents();\n    }\n</code></pre>\n<p>I then initialize:</p>\n<pre><code>private void initialize() {\n        \n        frmMyWorld.setTitle(&quot;My World&quot;);\n        frmMyWorld.setBounds(0, 0, 1450, 805);\n        frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n        frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n        newTab();\n        isScrolling = true;\n\n        //this sets up my slider which I'm using to zoom\n        zoomer = new JSlider();\n        zoomer.setMinimum(-1000);\n        zoomer.setMaximum(1000);\n        zoomer.setValue(1000);\n        zoomer.setOrientation(SwingConstants.VERTICAL);\n        zoomer.addChangeListener(new ChangeListener() {\n            public void stateChanged(ChangeEvent e) {\n                if(isScrolling) {\n                    hPortion = getHPortion();\n                    vPortion = getVPortion();\n                }\n                isScrolling = false;\n                int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/250 - 4));\n                getSelectedSpace().setZoomerValue(zoomer.getValue());\n                getSelectedSpace().repaint();\n                getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                getSelectedPane().addNotify();\n                getSelectedPane().revalidate();\n                getSelectedPane().setDoubleBuffered(true);\n                getSelectedPane().getHorizontalScrollBar().revalidate();\n                getSelectedPane().getVerticalScrollBar().revalidate();\n                getSelectedSpace().repaint();\n            }\n        });\n        \n        \n        \n        \n        \n        /**and using a group layout, we add a new tab to our JFrame\n                 * my original code was using buttons I'm just simplifying the code to make it                  .                */easier to read,that's why I'm using group layour     ,          \n        GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n        groupLayout.setHorizontalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                    .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                    .addGap(28))\n        );\n        groupLayout.setVerticalGroup(\n            groupLayout.createParallelGroup(Alignment.LEADING)\n                .addGroup(groupLayout.createSequentialGroup()\n                    .addContainerGap()\n                    .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                        .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                    .addGap(18))\n        );\n        groupSettingManager(groupLayout);\n        \n        \n        \n    }\n</code></pre>\n<p>And the newTab() function is what we do when we create a new tab</p>\n<pre><code>void newTab() {\n        //We first create a new workspace with the given dimentions \n        Workspace workSpace = new Workspace(1295*256, 592*256);\n//request focus so we can add key listeners\n        workSpace.requestFocus();\n        //Our workspace sits inside a scroll pane\n        JScrollPane scrollPane = new JScrollPane(workSpace);\n        numberOfTabbs++;\n        //our scroll pane sits inside a tabbed pane\n        tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n        tabbedPane.setSelectedIndex(numberOfTabbs-1);\n        scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n            @Override\n            public void mousePressed(MouseEvent e) {\n                isScrolling = true;\n            }\n            @Override\n            public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n        });\n        \n        \n    }\n</code></pre>\n<p>As you may have noticed, we're requesting focus from the new workspace as soon as it's created, however, that doesn't seem to give it focus</p>\n<p>I've tried adding key listeners to the workspace, like so</p>\n<pre><code>public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        public ArrayList&lt;Node&gt; protoLandmass = new ArrayList&lt;Node&gt;();\n        \n        private static Color backGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n        private static boolean zooming = false;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = new Color(0,120,255);\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n                        //I've also tried to request focus here, that didn't work either\n            //this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n\n                ...\n\n                @Override\n        public void keyTyped(KeyEvent e) {\n            ... \n        }\n        @Override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }   \n        }\n        @Override\n        public void keyReleased(KeyEvent e) {\n            ...\n        }\n</code></pre>\n<p>The key listeners here don't work, even though I have tried requesting focus in multiple places</p>\n<p>The mouse listeners seem to work when I create events here:</p>\n<pre><code>private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                        ...\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                                ...\n                }\n                public void mouseReleased(MouseEvent e) {\n                                ...\n                }\n                public void mouseExited(MouseEvent e) {\n                                        ...\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    ...\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                                       // this one doesn't work either\n                        Cartographer.isScrolling = true;\n                }\n            });\n                \n                this.addKeyListener(new KeyAdapter(){\n\n               @Override\n        public void keyTyped(KeyEvent e) {\n            ...\n            \n        }\n                @override\n        public void keyPressed(KeyEvent e) {\n            ...\n            }\n                \n                \n            \n        }\n                @override\n        public void keyReleased(KeyEvent e) {\n            ... \n        }       \n            \n    }\n</code></pre>\n<p>I tried adding key listeners here, but they didn't work either. I never tried having key listeners in both places at the same time, I'm just showing all the places they have been to make it easier for you.</p>\n<p>Minimal reproducible example:</p>\n<pre><code>  import java.awt.Color;  \n    import java.awt.EventQueue;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseListener;\n    \n    import javax.swing.JFrame;\n    import javax.swing.JScrollPane;\n    import javax.swing.JTabbedPane;\n    import javax.swing.GroupLayout;\n    import javax.swing.GroupLayout.Alignment;\n    import javax.swing.LayoutStyle.ComponentPlacement;\n    import javax.swing.JSlider;\n    import javax.swing.SwingConstants;\n    import javax.swing.event.ChangeListener;\n    import javax.swing.event.ChangeEvent;\n    \n    \n    \n    public class Cartographer {\n    \n        private final JFrame frmMyWorld = new JFrame();\n        /**\n         * set up our toolbar\n         */\n        double hPortion = 0;\n        double vPortion = 0;\n        \n        \n        //the space that will contain everything that is drawn\n        private static JTabbedPane tabbedPane;\n        private int numberOfTabbs;\n        public static boolean isScrolling;\n        private static JSlider zoomer;\n        \n        \n        public static void main(String[] args) {\n            EventQueue.invokeLater(new Runnable() {\n                public void run() {\n                    try {\n                        Cartographer window = new Cartographer();\n                        window.frmMyWorld.setVisible(true);\n                    } catch (Exception e) {\n                        e.printStackTrace();\n                    }\n                }\n            });\n        }\n    \n        /**\n         * Create the application.\n         */\n        public Cartographer() { \n            initialize();\n        }\n    \n        /**\n         * Initialise the contents of the frame.\n         */\n        private void initialize() {\n            \n            frmMyWorld.setTitle(&quot;My World&quot;);\n            frmMyWorld.setBounds(0, 0, 1450, 805);\n            frmMyWorld.getContentPane().setBackground(new Color(100,100,100));\n            frmMyWorld.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            \n            tabbedPane = new JTabbedPane(JTabbedPane.TOP);\n            newTab();\n            isScrolling = true;\n    \n            /**\n             * give everything its position in the window, we're using a group layout\n             */\n            zoomer = new JSlider();\n            zoomer.setMinimum(-1000);\n            zoomer.setMaximum(1000);\n            zoomer.setValue(1000);\n            zoomer.setOrientation(SwingConstants.VERTICAL);\n            zoomer.addChangeListener(new ChangeListener() {\n                public void stateChanged(ChangeEvent e) {\n                    if(isScrolling) {\n                        hPortion = getHPortion();\n                        vPortion = getVPortion();\n                    }\n                    isScrolling = false;\n                    int hScale = (int) getSelectedPane().getHorizontalScrollBar().getMaximum();\n                    int vScale = (int) getSelectedPane().getVerticalScrollBar().getMaximum();\n                    getSelectedSpace().setZoomFactor(Math.pow(2, (double) zoomer.getValue()/1000 - 1));\n                    getSelectedSpace().setZoomerValue(zoomer.getValue());\n                    getSelectedSpace().repaint();\n                    getSelectedPane().getHorizontalScrollBar().setValue((int) Math.round(hPortion*hScale - (hVisible()/2)));\n                    getSelectedPane().getVerticalScrollBar().setValue((int) Math.round(vPortion*vScale - (vVisible()/2))); \n                    getSelectedPane().addNotify();\n                    getSelectedPane().revalidate();\n                    getSelectedPane().setDoubleBuffered(true);\n                    getSelectedPane().getHorizontalScrollBar().revalidate();\n                    getSelectedPane().getVerticalScrollBar().revalidate();\n                    getSelectedSpace().repaint();\n                }\n            });\n            \n            \n            \n            \n            \n            \n            GroupLayout groupLayout = new GroupLayout(frmMyWorld.getContentPane());\n            groupLayout.setHorizontalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 85, GroupLayout.PREFERRED_SIZE)\n                        .addPreferredGap(ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 1335, GroupLayout.PREFERRED_SIZE))\n                        .addGap(28))\n            );\n            groupLayout.setVerticalGroup(\n                groupLayout.createParallelGroup(Alignment.LEADING)\n                    .addGroup(groupLayout.createSequentialGroup()\n                        .addContainerGap()\n                        .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)\n                            .addComponent(zoomer, GroupLayout.PREFERRED_SIZE, 624, GroupLayout.PREFERRED_SIZE)\n                            .addComponent(tabbedPane, GroupLayout.PREFERRED_SIZE, 642, GroupLayout.PREFERRED_SIZE))\n                        .addGap(18))\n            );\n            groupSettingManager(groupLayout);\n            \n            \n            \n        }\n        \n    \n    \n        void groupSettingManager(GroupLayout groupLayout) {\n                frmMyWorld.getContentPane().setLayout(groupLayout);\n        }\n    \n    \n        void newTab() {\n            //We first create a new workspace with the given dimentions \n            Workspace workSpace = new Workspace(1295*4, 592*4);\n            //we need to focus on this new workspace for key listeners to work\n            //Our workspace sits inside a scroll pane\n            JScrollPane scrollPane = new JScrollPane(workSpace);\n            numberOfTabbs++;\n            //our scroll pane sits inside a tabbed pane\n            tabbedPane.addTab(&quot;Workspace &quot; + numberOfTabbs, scrollPane);\n            workSpace.requestFocus();\n            tabbedPane.setSelectedIndex(numberOfTabbs-1);\n            scrollPane.getHorizontalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            scrollPane.getVerticalScrollBar().addMouseListener(new MouseListener(){\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    isScrolling = true;\n                }\n                @Override\n                public void mouseClicked(MouseEvent e) {}public void mouseReleased(MouseEvent e) {}public void mouseEntered(MouseEvent e) {}public void mouseExited(MouseEvent e) {}\n            });\n            \n            \n        }\n        \n        \n        static Workspace getSelectedSpace() {\n            return ((Workspace) ((JScrollPane) tabbedPane.getSelectedComponent()).getViewport().getView());\n        }\n        JScrollPane getSelectedPane() {\n            return (JScrollPane) tabbedPane.getSelectedComponent();\n        }\n        Workspace getSpace(int i) {\n            return ((Workspace) ((JScrollPane) tabbedPane.getComponent(i)).getViewport().getView());\n        }\n        JScrollPane getPane(int i) {\n            return (JScrollPane) tabbedPane.getComponent(i);\n        }\n        \n        \n        \n         static void setZoomerValue(int i) {\n            if(-1000 &lt;= i &amp;&amp; i &lt;= 1000)\n                zoomer.setValue(i);\n        }\n        int getZoomerValue() {\n            return zoomer.getValue();   \n        }\n        \n        public double getHPortion() {\n            int m = getSelectedPane().getHorizontalScrollBar().getMaximum();\n            int v = getSelectedPane().getHorizontalScrollBar().getValue();\n            double a = getSelectedPane().getHorizontalScrollBar().getVisibleAmount()/2;\n            return (v + a)/m;\n        }\n        public double getVPortion() {\n            int m = getSelectedPane().getVerticalScrollBar().getMaximum();\n            int v = getSelectedPane().getVerticalScrollBar().getValue();\n            double a = getSelectedPane().getVerticalScrollBar().getVisibleAmount()/2;\n            return (v +a)/m;\n        }\n        public int hVisible() {\n            return getSelectedPane().getHorizontalScrollBar().getVisibleAmount();\n        }\n        public int vVisible() {\n            return getSelectedPane().getVerticalScrollBar().getVisibleAmount();\n        }\n    \n    \n    }\n\n    import java.awt.Color; \n    import java.awt.Dimension;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.LayoutManager;\nimport java.awt.event.KeyAdapter;\nimport java.awt.event.KeyEvent;\n    import java.awt.event.KeyListener;\n    import java.awt.event.MouseAdapter;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseMotionAdapter;\n\n    import javax.swing.JPanel;\n\n    public class Workspace extends JPanel implements KeyListener{\n        //we keep every landmass that will appear in the workspace stored in this array\n        \n        private static Color backGroundColor;\n        private static Color foreGroundColor;\n        private int zoomerValue;\n        private static double zoomFactor; \n        private static int width;\n        private static int height;\n\n        /**\n         * \n         */\n        private static final long serialVersionUID = 1L;\n        \n        public Workspace(int w, int h) {\n            eventHandlers();\n            this.setPreferredSize(new Dimension(w,h));\n            \n            backGroundColor = Color.BLACK;\n            foreGroundColor = Color.WHITE;\n            this.setBackground(backGroundColor);\n            zoomFactor = 1;\n            width = w;\n            height = h;\n            zoomerValue = 1000;\n            this.setFocusable(true);\n            this.requestFocus();\n            this.addKeyListener(this);\n            //this.requestFocusInWindow();\n            repaint();\n        }\n        \n\n\n\n\n        public Workspace(LayoutManager layout) {\n            super(layout);\n            \n        }\n\n        public Workspace(boolean isDoubleBuffered) {\n            super(isDoubleBuffered);\n            \n        }\n\n        public Workspace(LayoutManager layout, boolean isDoubleBuffered) {\n            super(layout, isDoubleBuffered);\n            \n        }\n        \n        public double getZoomFactor() {\n            return zoomFactor;\n        }\n        public void setZoomFactor(double z) {\n            zoomFactor = z;\n            repaint();\n        }\n        public void adjustZoomFactor(int z) {\n            zoomFactor = Math.pow(2, z);\n            repaint();\n        }\n        \n        \n        public int getZoomerValue() {\n            return zoomerValue;\n        }\n        public void setZoomerValue(int i) {\n            zoomerValue = i;\n        }\n        \n        \n        \n        \n        \n        \n        \n        /**\n         * Paint Function and supplement functions \n         */\n        public void paint(Graphics g)\n        {\n            Graphics2D g2= (Graphics2D) g;\n            zoom(g2);\n            //a for loop to run the same function on each of the landmasses to draw them all    \n            for(int i = 0; i &lt; 35; i++)\n                for(int j = Math.floorMod(i, 2); j &lt; 16; j+=2) {\n                    g2.setColor(foreGroundColor);\n                    g2.fillRect(148*i, 148*j, 148, 148);\n                    g2.setColor(Color.GREEN);\n                    g2.drawString(&quot;(&quot; + i + &quot;,&quot; + j + &quot;)&quot;,148*i+66,148*j+72);\n                }\n            this.setBackground(backGroundColor);\n            \n        }\n        private void zoom(Graphics2D g) {\n            //if(zooming) g.translate(-getMousePosition().x, -getMousePosition().y);\n            g.scale(zoomFactor,zoomFactor);\n            this.setPreferredSize(new Dimension((int) Math.round(width*zoomFactor), (int) Math.round(height*zoomFactor)));\n            this.validate();\n            //if(zooming) g.translate(getMousePosition().x, getMousePosition().y);\n\n        }\n        \n        \n        \n        /**\n         * Any events that occur within the workspace happen here\n         */\n        private void eventHandlers() {\n            this.addMouseListener(new MouseAdapter() {  \n                @Override\n                public void mousePressed(MouseEvent e) {\n                    foreGroundColor = Color.BLUE;\n                    repaint();\n                }\n                \n                public void mouseClicked(MouseEvent e) {\n                    backGroundColor = Color.GRAY;\n                    repaint();\n                }\n                public void mouseReleased(MouseEvent e) {\n                    foreGroundColor = Color.WHITE;\n                    repaint();\n                }\n                public void mouseExited(MouseEvent e) {\n                    backGroundColor = Color.BLACK;\n                    repaint();\n                }\n                public void mouseEntered(MouseEvent e) {\n                    Cartographer.setZoomerValue(zoomerValue);\n                    repaint();\n                }\n            });\n            \n            this.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                        repaint();\n                }\n                public void mouseDragged(MouseEvent e) {\n                    repaint();\n                }\n            \n                public void mouseWheelMoved(MouseEvent e) {\n                        Cartographer.isScrolling = true;\n                }\n            });\n            \n            this.addKeyListener(new KeyAdapter() {\n                public void keyPressed(KeyEvent e) {\n                    foreGroundColor = Color.RED;\n                }\n            });\n            \n            \n        }\n        \n        \n        public int mousePositionX() {\n            return (int) Math.round(getMousePosition().x/zoomFactor);\n        }\n        public int mousePositionY() {\n            return (int) Math.round(getMousePosition().y/zoomFactor);\n        }\n\n\n        @Override\n        public void keyTyped(KeyEvent e) {\n            // TODO Auto-generated method stub\n            \n        }\n\n        @Override\n        public void keyPressed(KeyEvent e) {\n            switch(e.getKeyCode()) {\n            case 38 : if(zoomerValue &lt; 1000) { zoomerValue+=5; Cartographer.setZoomerValue(zoomerValue);} \n                repaint();\n            break;\n            case 40 : if(zoomerValue &gt; -1000) {zoomerValue-=5; Cartographer.setZoomerValue(zoomerValue);} \n                System.out.println(zoomerValue);\n                repaint();\n            break;\n            default: repaint();\n            }\n                \n                \n            \n        }\n\n        @Override\n        public void keyReleased(KeyEvent e) {\n                \n        }\n        \n        \n        \n\n}\n</code></pre>\n"},{"tags":["java","ssl","sslhandshakeexception","ssl-handshake"],"comments":[{"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"score":1,"creation_date":1683223137,"post_id":76176047,"comment_id":134337658,"body_markdown":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports.","body":"Strange. Seems as if the server does not support the TLS protocols that are sent int the CH. It seems to be a server issue. Check it&#39;s configuration for what protocols and cipher suites it supports."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683223384,"post_id":76176047,"comment_id":134337716,"body_markdown":"Have you troubleshot, e.g., https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r","body":"Have you troubleshot, e.g., <a href=\"https://dzone.com/articles/troubleshooting-javaxnetsslsslhandshakeexception-r\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>"},{"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"score":0,"creation_date":1683224193,"post_id":76176047,"comment_id":134337877,"body_markdown":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!","body":"Ugh, this is embarrasing, I thought I had changed it to .gov and tested it but I was still looking at the .com, which does indeed work.  So, PEBKAC, problem exists between keyboard and chair.  Sorry for the bother and thanks for the help!"}],"answers":[{"tags":[],"owner":{"account_id":3701398,"reputation":116692,"user_id":3081018,"display_name":"Steffen Ullrich"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683223563,"creation_date":1683223563,"answer_id":76176181,"question_id":76176047,"body_markdown":"TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.\r\n\r\n&gt; The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIt does not work in the browser. When trying to access `https://www.hudhomestore.com` in a fresh browser profile (without any cached information) it shows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBut, `https://www.hudhomestore.gov` (.gov not .com) works and an insecure request to `http://www.hudhomestore.com` (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) `https://www.hudhomestore.gov`. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) `https://www.hudhomestore.com` also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.\r\n\r\n  [1]: https://i.stack.imgur.com/gGj5k.png","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>TL;DR: use .gov not .com in your Java code. The .com site does not even work with HTTPS in the browser.</p>\n<blockquote>\n<p>The site works in browsers so their admins don't see a problem and won't help.</p>\n</blockquote>\n<p>It does not work in the browser. When trying to access <code>https://www.hudhomestore.com</code> in a fresh browser profile (without any cached information) it shows:</p>\n<p><a href=\"https://i.stack.imgur.com/gGj5k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gGj5k.png\" alt=\"enter image description here\" /></a></p>\n<p>But, <code>https://www.hudhomestore.gov</code> (.gov not .com) works and an insecure request to <code>http://www.hudhomestore.com</code> (note: http instead of https) works too. The latter returns a permanent redirect (code 301) to (the working) <code>https://www.hudhomestore.gov</code>. Since a permanent redirect is cached by the browser it might be that a previous access to (the now non-working) <code>https://www.hudhomestore.com</code> also returned the same 301 redirect to the gov site and that when you try to access the non-working site it will use the redirect target from the cache and not actually visit the entered URL first.</p>\n"}],"owner":{"account_id":3829506,"reputation":197,"user_id":3175474,"display_name":"Jeff C Johnson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76176181,"answer_count":1,"score":0,"last_activity_date":1683223902,"creation_date":1683222470,"question_id":76176047,"body_markdown":"I&#39;m trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn&#39;t say exactly what went wrong.  The site works in browsers so their admins don&#39;t see a problem and won&#39;t help.\r\n\r\nIs there anything I can do on the Java side to fix this?\r\n\r\n```\r\nimport java.net.URL\r\n\r\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\r\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\r\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\r\n        .openStream()\r\n        .use { println(it.readBytes().size) }\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\r\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\r\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\r\n&quot;ClientHello&quot;: {\r\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\r\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\r\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\r\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\r\n  &quot;compression methods&quot; : &quot;00&quot;,\r\n  &quot;extensions&quot;          : [\r\n    &quot;server_name (0)&quot;: {\r\n      type=host_name (0), value=www.hudhomestore.com\r\n    },\r\n    &quot;status_request (5)&quot;: {\r\n      &quot;certificate status type&quot;: ocsp\r\n      &quot;OCSP status request&quot;: {\r\n        &quot;responder_id&quot;: &lt;empty&gt;\r\n        &quot;request extensions&quot;: {\r\n          &lt;empty&gt;\r\n        }\r\n      }\r\n    },\r\n    &quot;supported_groups (10)&quot;: {\r\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\r\n    },\r\n    &quot;ec_point_formats (11)&quot;: {\r\n      &quot;formats&quot;: [uncompressed]\r\n    },\r\n    &quot;signature_algorithms (13)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;signature_algorithms_cert (50)&quot;: {\r\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\r\n    },\r\n    &quot;status_request_v2 (17)&quot;: {\r\n      &quot;cert status request&quot;: {\r\n        &quot;certificate status type&quot;: ocsp_multi\r\n        &quot;OCSP status request&quot;: {\r\n          &quot;responder_id&quot;: &lt;empty&gt;\r\n          &quot;request extensions&quot;: {\r\n            &lt;empty&gt;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    &quot;extended_master_secret (23)&quot;: {\r\n      &lt;empty&gt;\r\n    },\r\n    &quot;supported_versions (43)&quot;: {\r\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\r\n    },\r\n    &quot;psk_key_exchange_modes (45)&quot;: {\r\n      &quot;ke_modes&quot;: [psk_dhe_ke]\r\n    },\r\n    &quot;key_share (51)&quot;: {\r\n      &quot;client_shares&quot;: [  \r\n        {\r\n          &quot;named group&quot;: x25519\r\n          &quot;key_exchange&quot;: {\r\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\r\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\r\n          }\r\n        },\r\n      ]\r\n    }\r\n  ]\r\n}\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\r\n&quot;Alert&quot;: {\r\n  &quot;level&quot;      : &quot;fatal&quot;,\r\n  &quot;description&quot;: &quot;handshake_failure&quot;\r\n}\r\n)\r\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\r\n&quot;throwable&quot; : {\r\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n  \tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n  \tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n  \tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n  \tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n  \tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n  \tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n  \tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n  \tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n  \tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n  \tat java.base/java.net.URL.openStream(URL.java:1165)\r\n  \tat TLSTestKt.main(TLSTest.kt:7)}\r\n\r\n)\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\r\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\r\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\r\n\tat java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\r\n\tat java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\r\n\tat java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\r\n\tat java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\n\tat java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\r\n\tat java.base/java.net.URL.openStream(URL.java:1165)\r\n\tat TLSTestKt.main(TLSTest.kt:7)\r\n\r\nProcess finished with exit code 1\r\n```","title":"Why can&#39;t Java 11 connect to web site that browsers can?","body":"<p>I'm trying to connect connect to a website that recently changed their TLS configuration.  It no longer works from Java 11 (nor 17).  It fails at the handshake but the error message doesn't say exactly what went wrong.  The site works in browsers so their admins don't see a problem and won't help.</p>\n<p>Is there anything I can do on the Java side to fix this?</p>\n<pre><code>import java.net.URL\n\n// nmap --script ssl-enum-ciphers -p 443 www.hudhomestore.gov\n\nfun main(args: Array&lt;String&gt;) {\n    // System.setProperty(&quot;javax.net.debug&quot;, &quot;all&quot;)\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl:handshake&quot;)\n    URL(&quot;https://www.hudhomestore.com/Home/Index.aspx&quot;)\n        .openStream()\n        .use { println(it.readBytes().size) }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>javax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.036 EDT|SSLCipher.java:464|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = 137438953472\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.319 EDT|Utilities.java:73|the previous server name in SNI (type=host_name (0), value=www.hudhomestore.com) was replaced with (type=host_name (0), value=www.hudhomestore.com)\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.371 EDT|SignatureScheme.java:295|Signature algorithm, ed25519, is not supported by the underlying providers\njavax.net.ssl|WARNING|01|main|2023-05-04 13:32:40.372 EDT|SignatureScheme.java:295|Signature algorithm, ed448, is not supported by the underlying providers\njavax.net.ssl|INFO|01|main|2023-05-04 13:32:40.382 EDT|AlpnExtension.java:178|No available application protocols\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.382 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: application_layer_protocol_negotiation\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.384 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: cookie\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.457 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: renegotiation_info\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|PreSharedKeyExtension.java:633|No session to resume.\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.458 EDT|SSLExtensions.java:260|Ignore, context unavailable extension: pre_shared_key\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.468 EDT|ClientHello.java:642|Produced ClientHello handshake message (\n&quot;ClientHello&quot;: {\n  &quot;client version&quot;      : &quot;TLSv1.2&quot;,\n  &quot;random&quot;              : &quot;90 C5 39 A6 86 30 CF 64 9A 11 07 3E D1 7E A9 6E CD 61 9C 29 0D E7 64 C3 EA 1F 14 88 F6 01 30 20&quot;,\n  &quot;session id&quot;          : &quot;87 AC EA CD C3 8D E5 83 30 15 9F 64 28 AE 8A F3 BC 9E A3 23 81 A1 29 4B 41 FE D5 E7 0C BE 07 2A&quot;,\n  &quot;cipher suites&quot;       : &quot;[TLS_AES_256_GCM_SHA384(0x1302), TLS_AES_128_GCM_SHA256(0x1301), TLS_CHACHA20_POLY1305_SHA256(0x1303), TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384(0xC02C), TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256(0xC02B), TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA9), TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384(0xC030), TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCA8), TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256(0xC02F), TLS_DHE_RSA_WITH_AES_256_GCM_SHA384(0x009F), TLS_DHE_RSA_WITH_CHACHA20_POLY1305_SHA256(0xCCAA), TLS_DHE_DSS_WITH_AES_256_GCM_SHA384(0x00A3), TLS_DHE_RSA_WITH_AES_128_GCM_SHA256(0x009E), TLS_DHE_DSS_WITH_AES_128_GCM_SHA256(0x00A2), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384(0xC024), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384(0xC028), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256(0xC023), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256(0xC027), TLS_DHE_RSA_WITH_AES_256_CBC_SHA256(0x006B), TLS_DHE_DSS_WITH_AES_256_CBC_SHA256(0x006A), TLS_DHE_RSA_WITH_AES_128_CBC_SHA256(0x0067), TLS_DHE_DSS_WITH_AES_128_CBC_SHA256(0x0040), TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384(0xC02E), TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384(0xC032), TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256(0xC02D), TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256(0xC031), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384(0xC026), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384(0xC02A), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256(0xC025), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256(0xC029), TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA(0xC00A), TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA(0xC014), TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA(0xC009), TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA(0xC013), TLS_DHE_RSA_WITH_AES_256_CBC_SHA(0x0039), TLS_DHE_DSS_WITH_AES_256_CBC_SHA(0x0038), TLS_DHE_RSA_WITH_AES_128_CBC_SHA(0x0033), TLS_DHE_DSS_WITH_AES_128_CBC_SHA(0x0032), TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA(0xC005), TLS_ECDH_RSA_WITH_AES_256_CBC_SHA(0xC00F), TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA(0xC004), TLS_ECDH_RSA_WITH_AES_128_CBC_SHA(0xC00E), TLS_RSA_WITH_AES_256_GCM_SHA384(0x009D), TLS_RSA_WITH_AES_128_GCM_SHA256(0x009C), TLS_RSA_WITH_AES_256_CBC_SHA256(0x003D), TLS_RSA_WITH_AES_128_CBC_SHA256(0x003C), TLS_RSA_WITH_AES_256_CBC_SHA(0x0035), TLS_RSA_WITH_AES_128_CBC_SHA(0x002F), TLS_EMPTY_RENEGOTIATION_INFO_SCSV(0x00FF)]&quot;,\n  &quot;compression methods&quot; : &quot;00&quot;,\n  &quot;extensions&quot;          : [\n    &quot;server_name (0)&quot;: {\n      type=host_name (0), value=www.hudhomestore.com\n    },\n    &quot;status_request (5)&quot;: {\n      &quot;certificate status type&quot;: ocsp\n      &quot;OCSP status request&quot;: {\n        &quot;responder_id&quot;: &lt;empty&gt;\n        &quot;request extensions&quot;: {\n          &lt;empty&gt;\n        }\n      }\n    },\n    &quot;supported_groups (10)&quot;: {\n      &quot;versions&quot;: [x25519, secp256r1, secp384r1, secp521r1, x448, ffdhe2048, ffdhe3072, ffdhe4096, ffdhe6144, ffdhe8192]\n    },\n    &quot;ec_point_formats (11)&quot;: {\n      &quot;formats&quot;: [uncompressed]\n    },\n    &quot;signature_algorithms (13)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;signature_algorithms_cert (50)&quot;: {\n      &quot;signature schemes&quot;: [ecdsa_secp256r1_sha256, ecdsa_secp384r1_sha384, ecdsa_secp521r1_sha512, rsa_pss_rsae_sha256, rsa_pss_rsae_sha384, rsa_pss_rsae_sha512, rsa_pss_pss_sha256, rsa_pss_pss_sha384, rsa_pss_pss_sha512, rsa_pkcs1_sha256, rsa_pkcs1_sha384, rsa_pkcs1_sha512, dsa_sha256, ecdsa_sha224, rsa_sha224, dsa_sha224, ecdsa_sha1, rsa_pkcs1_sha1, dsa_sha1]\n    },\n    &quot;status_request_v2 (17)&quot;: {\n      &quot;cert status request&quot;: {\n        &quot;certificate status type&quot;: ocsp_multi\n        &quot;OCSP status request&quot;: {\n          &quot;responder_id&quot;: &lt;empty&gt;\n          &quot;request extensions&quot;: {\n            &lt;empty&gt;\n          }\n        }\n      }\n    },\n    &quot;extended_master_secret (23)&quot;: {\n      &lt;empty&gt;\n    },\n    &quot;supported_versions (43)&quot;: {\n      &quot;versions&quot;: [TLSv1.3, TLSv1.2, TLSv1.1, TLSv1]\n    },\n    &quot;psk_key_exchange_modes (45)&quot;: {\n      &quot;ke_modes&quot;: [psk_dhe_ke]\n    },\n    &quot;key_share (51)&quot;: {\n      &quot;client_shares&quot;: [  \n        {\n          &quot;named group&quot;: x25519\n          &quot;key_exchange&quot;: {\n            0000: 69 7F BD A5 0C 85 0B 8C   21 09 1E 6E 6B 98 57 EF  i.......!..nk.W.\n            0010: 26 3A 77 BE 0B 67 71 5C   9E 02 76 82 38 D2 56 00  &amp;:w..gq\\..v.8.V.\n          }\n        },\n      ]\n    }\n  ]\n}\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.511 EDT|Alert.java:238|Received alert message (\n&quot;Alert&quot;: {\n  &quot;level&quot;      : &quot;fatal&quot;,\n  &quot;description&quot;: &quot;handshake_failure&quot;\n}\n)\njavax.net.ssl|ERROR|01|main|2023-05-04 13:32:40.514 EDT|TransportContext.java:352|Fatal (HANDSHAKE_FAILURE): Received fatal alert: handshake_failure (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)}\n\n)\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1737|close the underlying socket\njavax.net.ssl|DEBUG|01|main|2023-05-04 13:32:40.515 EDT|SSLSocketImpl.java:1756|close the SSL connection (initiative)\nException in thread &quot;main&quot; javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:347)\n    at java.base/sun.security.ssl.Alert$AlertConsumer.consume(Alert.java:293)\n    at java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:186)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:172)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1507)\n    at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1417)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:456)\n    at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:427)\n    at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:572)\n    at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:201)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1592)\n    at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\n    at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:250)\n    at java.base/java.net.URL.openStream(URL.java:1165)\n    at TLSTestKt.main(TLSTest.kt:7)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","android","spring","spring-boot","amazon-s3"],"answers":[{"tags":[],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683223280,"creation_date":1683223280,"answer_id":76176149,"question_id":76171312,"body_markdown":"It was a bucket Name issue due to this code \r\n\r\n    String uri = request.getRequestURI();\r\n    String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n    String bucket = uriParts[0];\r\n    String key = uriParts[1];\r\n\r\n,need to make sure bucket name is key is proper before accessing it \r\n\r\n ","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>It was a bucket Name issue due to this code</p>\n<pre><code>String uri = request.getRequestURI();\nString uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\nString bucket = uriParts[0];\nString key = uriParts[1];\n</code></pre>\n<p>,need to make sure bucket name is key is proper before accessing it</p>\n"}],"owner":{"account_id":26043625,"reputation":61,"user_id":19747944,"display_name":"Amit Bhatiwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683223280,"creation_date":1683190505,"question_id":76171312,"body_markdown":"I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.\r\n\r\nFor downloading video file  \r\n\r\n    @PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\r\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\r\n        byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\r\n        ByteArrayResource resource = new ByteArrayResource(data);\r\n        return ResponseEntity.ok().contentLength(data.length)\r\n                .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\r\n                .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n    }\r\n\r\nits client request in android retrofit\r\n\r\n    @HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\r\n    Call &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\r\n\r\n\r\n\r\nfor streaming video file \r\n\r\n\r\n    @GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\r\n    public ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\r\n        try {\r\n\r\n            String uri = request.getRequestURI();\r\n            String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\r\n            String bucket = uriParts[0];\r\n            String key = uriParts[1];\r\n            System.out.println(&quot;Fetching &quot; + uri);\r\n            AmazonS3 s3client = fileSnapshotService.getS3Client();\r\n            S3Object object = s3client.getObject(bucket, key);\r\n            S3ObjectInputStream finalObject = object.getObjectContent();\r\n\r\n            final StreamingResponseBody body = outputStream -&gt; {\r\n                int numberOfBytesToWrite = 0;\r\n                byte[] data = new byte[1024];\r\n                while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\r\n                    outputStream.write(data, 0, numberOfBytesToWrite);\r\n                }\r\n                finalObject.close();\r\n            };\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            System.err.println(&quot;Error &quot;+ e.getMessage());\r\n            return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\r\n        }\r\n\r\n    }\r\n\r\nits client request in android retrofit \r\n\r\n     @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\r\n    Call&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\r\n\r\nAmazonS3 client \r\n\r\n    @Bean\r\n    public AmazonS3 gennerateS3Client() {\r\n        AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\r\n        return  AmazonS3ClientBuilder.standard()\r\n                .withRegion(regionCode)\r\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n                .build();\r\n\r\n    }\r\nwhere regionCode = &quot;ap-south-1&quot;;\r\n\r\nnow problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot \r\n\r\nError The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)\r\n\r\nplease help me resolve the issue \r\n","title":"Getting Wrong bucket region error while streaming video in spring boot with client android","body":"<p>I am trying to create Video streaming app with backend in spring boot. I have created two apis for downloading video file and streaming video file.</p>\n<p>For downloading video file</p>\n<pre><code>@PostMapping(&quot;/api/v1/downloadVideoAWS&quot;)\npublic ResponseEntity&lt;ByteArrayResource&gt; downloadFile(@RequestBody FileSnapshot fileSnapshot) {\n    byte[] data = fileSnapshotService.downloadVideoAWS(fileSnapshot);\n    ByteArrayResource resource = new ByteArrayResource(data);\n    return ResponseEntity.ok().contentLength(data.length)\n            .header(&quot;Content-type&quot;, &quot;application/octet-stream&quot;)\n            .header(&quot;Content-disposition&quot;, &quot;attachement; filename=\\&quot;&quot; + fileSnapshot.getFileName() + &quot;\\&quot;&quot;)\n            .body(resource);\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code>@HTTP(method = &quot;POST&quot;, hasBody = true,path = &quot;/api/v1/downloadVideoAWS&quot;)\nCall &lt;ResponseBody&gt; getVideoFile(@Body FileSnapshot fileSnapshot);\n</code></pre>\n<p>for streaming video file</p>\n<pre><code>@GetMapping(value = &quot;/api/v1/streamVideo/**&quot;, produces = { MediaType.APPLICATION_OCTET_STREAM_VALUE })\npublic ResponseEntity&lt;StreamingResponseBody&gt; getObject(HttpServletRequest request) {\n    try {\n\n        String uri = request.getRequestURI();\n        String uriParts[] = uri.split(&quot;/&quot;, 2)[1].split(&quot;/&quot;, 2);\n        String bucket = uriParts[0];\n        String key = uriParts[1];\n        System.out.println(&quot;Fetching &quot; + uri);\n        AmazonS3 s3client = fileSnapshotService.getS3Client();\n        S3Object object = s3client.getObject(bucket, key);\n        S3ObjectInputStream finalObject = object.getObjectContent();\n\n        final StreamingResponseBody body = outputStream -&gt; {\n            int numberOfBytesToWrite = 0;\n            byte[] data = new byte[1024];\n            while ((numberOfBytesToWrite = finalObject.read(data, 0, data.length)) != -1) {\n                outputStream.write(data, 0, numberOfBytesToWrite);\n            }\n            finalObject.close();\n        };\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(body, HttpStatus.OK);\n    } catch (Exception e) {\n        System.err.println(&quot;Error &quot;+ e.getMessage());\n        return new ResponseEntity&lt;StreamingResponseBody&gt;(HttpStatus.BAD_REQUEST);\n    }\n\n}\n</code></pre>\n<p>its client request in android retrofit</p>\n<pre><code> @GET(&quot;/api/v1/streamVideo/{bucketName}/{fileName}&quot;)\nCall&lt;ResponseBody&gt; getStreamingObject(@Path(&quot;bucketName&quot;) String bucketName,@Path(&quot;fileName&quot;)String fileName);\n</code></pre>\n<p>AmazonS3 client</p>\n<pre><code>@Bean\npublic AmazonS3 gennerateS3Client() {\n    AWSCredentials credentials = new BasicAWSCredentials(accessKey,secretKey);\n    return  AmazonS3ClientBuilder.standard()\n            .withRegion(regionCode)\n            .withCredentials(new AWSStaticCredentialsProvider(credentials))\n            .build();\n\n}\n</code></pre>\n<p>where regionCode = &quot;ap-south-1&quot;;</p>\n<p>now problem is that I am able to download video file without any issue .but when I am trying to stream video file from the API I am getting this error in spring boot</p>\n<p>Error The bucket is in this region: eu-west-1. Please use this region to retry the request (Service: Amazon S3; Status Code: 301; Error Code: PermanentRedirect; Request ID: XXXXXXXXXXXXXXXX; S3 Extended Request ID: /XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=; Proxy: null)</p>\n<p>please help me resolve the issue</p>\n"},{"tags":["java","spring-boot","kotlin","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683222819,"creation_date":1683222819,"answer_id":76176095,"question_id":76175867,"body_markdown":"In Kotlin you can just add extension function like this:\r\n\r\n```kotlin\r\nfun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\r\n    // Your implementation\r\n}\r\n```\r\n\r\nAnd everything will be fine with this","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>In Kotlin you can just add extension function like this:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T, ID&gt; SomeSpecificationExecutorRepository&lt;T, ID&gt;.myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T? {\n    // Your implementation\n}\n</code></pre>\n<p>And everything will be fine with this</p>\n"}],"owner":{"account_id":18129664,"reputation":131,"user_id":13184890,"display_name":"Someone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683222819,"creation_date":1683221131,"question_id":76175867,"body_markdown":"I have a repository which can execute generic specifications:\r\n\r\n```kotlin\r\n@NoRepositoryBean\r\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\r\n    JpaRepository&lt;T, ID&gt;,\r\n    JpaSpecificationExecutor&lt;T&gt;\r\n\r\n```\r\n\r\nAnd several target repositories which looks like:\r\n\r\n```kotlin\r\n@Repository\r\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\r\n```\r\n\r\nNow I want to add a generic\r\n```kotlin\r\nmyCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\r\n```\r\nmethod which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.\r\n\r\n\r\nThe problem is that if I want to add some custom methods to `SomeSpecificationExecutorRepository` via one more interface it&#39;s implementation will be also generic one and I couldn&#39;t `SomeSpecificationExecutorRepository` there it to reuse `findAll(specification)` methods.\r\n\r\nIs there any ideas how can I solve this case and add som methods to this `@NoRepositoryBean` repository which will be available in all repositories that use this one?","title":"Generic implementation for custom method in @NoRepositoryBean repository Spring Boot","body":"<p>I have a repository which can execute generic specifications:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@NoRepositoryBean\ninterface SomeSpecificationExecutorRepository&lt;T, ID&gt; :\n    JpaRepository&lt;T, ID&gt;,\n    JpaSpecificationExecutor&lt;T&gt;\n\n</code></pre>\n<p>And several target repositories which looks like:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Repository\ninterface SomeViewRepository : SomeSpecificationExecutorRepository&lt;SomeViewEntity, Long&gt;\n</code></pre>\n<p>Now I want to add a generic</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>myCustomFindMethod(id: ID, specification: Specification&lt;T&gt;): T?\n</code></pre>\n<p>method which makes some search according to provided specification and extends this specification predicate with some id-specific clauses.</p>\n<p>The problem is that if I want to add some custom methods to <code>SomeSpecificationExecutorRepository</code> via one more interface it's implementation will be also generic one and I couldn't <code>SomeSpecificationExecutorRepository</code> there it to reuse <code>findAll(specification)</code> methods.</p>\n<p>Is there any ideas how can I solve this case and add som methods to this <code>@NoRepositoryBean</code> repository which will be available in all repositories that use this one?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1683115877,"post_id":76163443,"comment_id":134316433,"body_markdown":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. `for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)`. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before.","body":"I wouldn&#39;t be iterating through 1 to n in unit steps since &#39;most&#39; of the values will not be selected.  I&#39;d just generate the values that will match - e.g. <code>for (i=divisor; i&lt;=n; i+=divisor) storeResult(i)</code>. I&#39;d have one thread per unique divisor 3,5,7. Eliminate duplicates as before."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1683120022,"post_id":76163443,"comment_id":134317548,"body_markdown":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense.","body":"my understanding of &quot;multithreaded program that finds all integers in the range [1, n] that are divisible by 3, 5, or 7&quot; is: you need write program using something like: int stream &gt; range &gt; parallel &gt; filter &gt; sum. That would be the only solution which actually makes sense."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":2,"creation_date":1683120232,"post_id":76163443,"comment_id":134317617,"body_markdown":"`IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()`","body":"<code>IntStream.range(1, n).parallel().filter(i -&gt; i % 3 == 0 || i % 5 == 0 || i % 7 == 0).sum()</code>"}],"answers":[{"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":2,"creation_date":1683116283,"post_id":76163523,"comment_id":134316532,"body_markdown":"Better yet, just generate the right numbers instead of looking for them. We know in advance which numbers are divisible by 3 -- 3,6,9,... -- so increment by 3, not by 1 and skip the need to take remainders.","body":"Better yet, just generate the right numbers instead of looking for them. We know in advance which numbers are divisible by 3 -- 3,6,9,... -- so increment by 3, not by 1 and skip the need to take remainders."}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683114963,"creation_date":1683114963,"answer_id":76163523,"question_id":76163443,"body_markdown":"The main solution to your problem is to lose `static` everywhere. Never use `static` unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use `static`. Until then, just don&#39;t.\r\n\r\nAs a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for `n = 1000` you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>The main solution to your problem is to lose <code>static</code> everywhere. Never use <code>static</code> unless you have a very good reason to. In this case, you do not. Generally speaking, it will be a few years of programming in Java before you will encounter your first situation where you may legitimately use <code>static</code>. Until then, just don't.</p>\n<p>As a bonus thought, you could perhaps greatly reduce the amount of work you have to do by not creating a thread for each divisor and instead creating threads for different ranges of integers that you want to process. So, for example, for <code>n = 1000</code> you might create two threads, one that will process numbers from 1 to 500 and another that will process numbers from 501 to 1000. This way, each thread is guaranteed to yield numbers that will not be yielded by the other thread.</p>\n"},{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683116825,"creation_date":1683116825,"answer_id":76163819,"question_id":76163443,"body_markdown":"Your problem is the shared variable `temp` which is expected to hold the same value across several statements.\r\n\r\n    public static int temp = 0;\r\n    public static synchronized void increment() {\r\n        dividends.add(temp);\r\n    }\r\n   \r\nIn each thread:\r\n\r\n    temp=i;\r\n    increment();\r\n\r\nSo if thread1 sets &#39;temp&#39;, it can be changed by another thread before thread1 gets to use it in increment.\r\n\r\nBut it&#39;s not necessary anyway.\r\n\r\n    public static synchronized void increment(int x) {\r\n        dividends.add(X);\r\n    }\r\n\r\nthen\r\n\r\n    increment(i);\r\n\r\nOther answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your &#39;temp&#39; problem.  Even a non-static &#39;temp&#39; is still shared across threads - there&#39;s one instance of FindMultiples shared by all of the thread instances.\r\n\r\nThis answer addresses the question of why you&#39;re getting variable results.  In comments I&#39;ve noted that efficiency can be improved.\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Your problem is the shared variable <code>temp</code> which is expected to hold the same value across several statements.</p>\n<pre><code>public static int temp = 0;\npublic static synchronized void increment() {\n    dividends.add(temp);\n}\n</code></pre>\n<p>In each thread:</p>\n<pre><code>temp=i;\nincrement();\n</code></pre>\n<p>So if thread1 sets 'temp', it can be changed by another thread before thread1 gets to use it in increment.</p>\n<p>But it's not necessary anyway.</p>\n<pre><code>public static synchronized void increment(int x) {\n    dividends.add(X);\n}\n</code></pre>\n<p>then</p>\n<pre><code>increment(i);\n</code></pre>\n<p>Other answers talk about eliminating unnecessary static, which is valid design criticism, but that in itself does not fix your 'temp' problem.  Even a non-static 'temp' is still shared across threads - there's one instance of FindMultiples shared by all of the thread instances.</p>\n<p>This answer addresses the question of why you're getting variable results.  In comments I've noted that efficiency can be improved.</p>\n"},{"tags":[],"owner":{"account_id":15831863,"reputation":36,"user_id":13157139,"display_name":"Mukhtar Amirkhanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683219928,"creation_date":1683117589,"answer_id":76163931,"question_id":76163443,"body_markdown":"Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\r\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.\r\n\r\nIt&#39;s better to send the value directly to increment() than store it in temp.\r\nSee my edited code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n      public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n      public static synchronized void increment(int temp){\r\n         dividends.add(temp);\r\n      }\r\n      \r\n      public static class MyThread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public MyThread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    increment(i);\r\n                }\r\n            }\r\n        }\r\n      }\r\n\r\n      public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new MyThread(n,3));\r\n        Thread thread2 = new Thread(new MyThread(n,7));\r\n        Thread thread3 = new Thread(new MyThread(n,5));\r\n\r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n            System.out.println(e.getMessage());\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Most likely your main problem is that you are synchronizing the increment() method, and not synchronizing the temp variable.\nWhile one thread is trying to execute the increment() method, the second thread is changing the value of the temp variable. Run your code in debug and check it out.</p>\n<p>It's better to send the value directly to increment() than store it in temp.\nSee my edited code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\n  public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\n  public static synchronized void increment(int temp){\n     dividends.add(temp);\n  }\n  \n  public static class MyThread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public MyThread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                increment(i);\n            }\n        }\n    }\n  }\n\n  public int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new MyThread(n,3));\n    Thread thread2 = new Thread(new MyThread(n,7));\n    Thread thread3 = new Thread(new MyThread(n,5));\n\n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n        System.out.println(e.getMessage());\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"score":1,"creation_date":1683139226,"post_id":76164034,"comment_id":134322177,"body_markdown":"upvoted this solution. It is a handy solution for this kind of task.","body":"upvoted this solution. It is a handy solution for this kind of task."},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1683147337,"post_id":76164034,"comment_id":134323639,"body_markdown":"that is not a big deal to write &quot;ultra-fast&quot; as well :)","body":"that is not a big deal to write &quot;ultra-fast&quot; as well :)"},{"owner":{"account_id":435105,"reputation":6948,"user_id":821497,"accept_rate":60,"display_name":"ciamej"},"score":0,"creation_date":1683219638,"post_id":76164034,"comment_id":134336915,"body_markdown":"Actually the ultra-light will be light-years-faster than the &quot;normal&quot; solution.","body":"Actually the ultra-light will be light-years-faster than the &quot;normal&quot; solution."},{"owner":{"account_id":435105,"reputation":6948,"user_id":821497,"accept_rate":60,"display_name":"ciamej"},"score":0,"creation_date":1683219786,"post_id":76164034,"comment_id":134336955,"body_markdown":"Also Andrey&#39;s code is shorter and better. It should just use a LongStream instead of IntStream and would be fine.","body":"Also Andrey&#39;s code is shorter and better. It should just use a LongStream instead of IntStream and would be fine."}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683145699,"creation_date":1683118249,"answer_id":76164034,"question_id":76163443,"body_markdown":"### See mine\r\n#### For `n ~= 100,000`, better use `long getSum(int n)`\r\n...and we need to adjust.\r\n\r\nComments inline:\r\n```lang-java\r\npackage com.example;\r\n\r\nimport java.util.BitSet;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.ExecutorCompletionService;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Test {\r\n    // Our thread pool (e.g...):\r\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\r\n    // to complete our &quot;tasks&quot; (see javadoc):\r\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\r\n\r\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\r\n        // start &quot;3 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(3, n));\r\n        // start &quot;5 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(5, n));\r\n        // start &quot;7 job&quot;:\r\n        ECS.submit(() -&gt; findDivisors(7, n));\r\n\r\n        // collect result:\r\n        BitSet collect = new BitSet(n + 1);\r\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\r\n            BitSet tmpResult = ECS.take().get(); // see javadoc\r\n            if (tmpResult != null) // &quot;or&#39;ing&quot; their results into &quot;collect&quot;:\r\n                collect.or(tmpResult);\r\n        }\r\n\r\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\r\n        return collect.stream()\r\n                // ... (as a long;) their sum \r\n                .mapToLong(i -&gt; (long) i).sum();\r\n    }\r\n\r\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\r\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\r\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\r\n            mem.set(i);\r\n        }\r\n        return mem; // done!\r\n    }\r\n\r\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\r\n        // do I/O, more tests...:\r\n        System.out.println(getSum(10));\r\n        System.out.println(getSum(100));\r\n        System.out.println(getSum(1_000));\r\n        System.out.println(getSum(10_000));\r\n        System.out.println(getSum(100_000));\r\n        System.out.println(getSum(1_000_000));\r\n        System.out.println(getSum(10_000_000));\r\n        System.out.println(getSum(100_000_000));\r\n        System.out.println(getSum(1_000_000_000));\r\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\r\n        // finally: release resources:\r\n        THREAD_POOL.shutdown();\r\n    }\r\n}\r\n```\r\n#### Prints:\r\n```lang-text\r\n40\r\n2838\r\n272066\r\n27152139\r\n2714364277\r\n271428928569\r\n27142867857145\r\n2714285835714288\r\n271428572071428566\r\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\r\n```\r\n\r\n### References\r\n- [`ExecutorCompletionService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html) + linked (since java 1.5)\r\n- [`BitSet`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html) (since java 1.0;)\r\n- [`Executor`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html)\r\n- [`ExecutorService`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html)\r\n\r\n### Key Points\r\n- BitSet as &quot;data structure&quot;:\r\n  - similar to `boolean[]([])`, but:\r\n    - better memory efficience (a `boolean` costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a `long[]|byte[]`))\r\n    - advanced API (`or, and, xor, cardinality, stream, ...`)\r\n  - to overcome its lack of multi-thread support we can:\r\n    - &quot;synchronize&quot;\r\n    - use multiple BitSets to join/or/and/... them together\r\n- `i`th index in bitSet_x (3/5/7) set, means: `i` is divisible by x (3/5/7)\r\n- challenges start from `n~=100000`\r\n\r\n\r\n----------\r\n\r\n\r\nAnd the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:\r\n```lang-java\r\n[static] long getSum(int n) {\r\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\r\n    .parallel() // ok\r\n    .filter(i -&gt;\r\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\r\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\r\n      || (i % 7 == 0) // 3.\r\n    )\r\n    .mapToLong(i -&gt; (long) i) // for bigger input\r\n    .sum(); // #\r\n}\r\n```\r\n","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<h3>See mine</h3>\n<h4>For <code>n ~= 100,000</code>, better use <code>long getSum(int n)</code></h4>\n<p>...and we need to adjust.</p>\n<p>Comments inline:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport java.util.BitSet;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.ExecutorCompletionService;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Test {\n    // Our thread pool (e.g...):\n    static final ExecutorService THREAD_POOL = Executors.newFixedThreadPool(3);\n    // to complete our &quot;tasks&quot; (see javadoc):\n    static final ExecutorCompletionService&lt;BitSet&gt; ECS = new ExecutorCompletionService&lt;&gt;(THREAD_POOL);\n\n    static long getSum(int n) throws InterruptedException, ExecutionException { // for brevity: throw\n        // start &quot;3 job&quot;:\n        ECS.submit(() -&gt; findDivisors(3, n));\n        // start &quot;5 job&quot;:\n        ECS.submit(() -&gt; findDivisors(5, n));\n        // start &quot;7 job&quot;:\n        ECS.submit(() -&gt; findDivisors(7, n));\n\n        // collect result:\n        BitSet collect = new BitSet(n + 1);\n        for (int i = 3; i &gt; 0; i--) { // complete all jobs ...\n            BitSet tmpResult = ECS.take().get(); // see javadoc\n            if (tmpResult != null) // &quot;or'ing&quot; their results into &quot;collect&quot;:\n                collect.or(tmpResult);\n        }\n\n        // stream over &quot;all set indices&quot; in &quot;collect&quot; and return ...\n        return collect.stream()\n                // ... (as a long;) their sum \n                .mapToLong(i -&gt; (long) i).sum();\n    }\n\n    static BitSet findDivisors(int d, int n) { // MAIN JOB:\n        BitSet mem = new BitSet(n + 1); // ignore 0th bit\n        for (int i = d; i &lt;= n; i += d) { // set i(th) index to true:\n            mem.set(i);\n        }\n        return mem; // done!\n    }\n\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\n        // do I/O, more tests...:\n        System.out.println(getSum(10));\n        System.out.println(getSum(100));\n        System.out.println(getSum(1_000));\n        System.out.println(getSum(10_000));\n        System.out.println(getSum(100_000));\n        System.out.println(getSum(1_000_000));\n        System.out.println(getSum(10_000_000));\n        System.out.println(getSum(100_000_000));\n        System.out.println(getSum(1_000_000_000));\n        // System.out.println(getSum(2_000_000_000)); // oh-oh\n        // finally: release resources:\n        THREAD_POOL.shutdown();\n    }\n}\n</code></pre>\n<h4>Prints:</h4>\n<pre class=\"lang-text prettyprint-override\"><code>40\n2838\n272066\n27152139\n2714364277\n271428928569\n27142867857145\n2714285835714288\n271428572071428566\n1085714285285714288 # ?? &lt;- this looks like (long!) overflow ;(\n</code></pre>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorCompletionService.html\" rel=\"nofollow noreferrer\"><code>ExecutorCompletionService</code></a> + linked (since java 1.5)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> (since java 1.0;)</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\"><code>Executor</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\"><code>ExecutorService</code></a></li>\n</ul>\n<h3>Key Points</h3>\n<ul>\n<li>BitSet as &quot;data structure&quot;:\n<ul>\n<li>similar to <code>boolean[]([])</code>, but:\n<ul>\n<li>better memory efficience (a <code>boolean</code> costs 1 byte of memory (in current hw architecture), whereas BitSet can do better (backed by a <code>long[]|byte[]</code>))</li>\n<li>advanced API (<code>or, and, xor, cardinality, stream, ...</code>)</li>\n</ul>\n</li>\n<li>to overcome its lack of multi-thread support we can:\n<ul>\n<li>&quot;synchronize&quot;</li>\n<li>use multiple BitSets to join/or/and/... them together</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code>i</code>th index in bitSet_x (3/5/7) set, means: <code>i</code> is divisible by x (3/5/7)</li>\n<li>challenges start from <code>n~=100000</code></li>\n</ul>\n<hr />\n<p>And the &quot;ultra-light&quot; version (regarding the lines of code, performance is another chapter), inspired by Andrey B.P.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[static] long getSum(int n) {\n  return IntStream.rangeClosed(1, n) // rangeClosed not range (or +/-1;)\n    .parallel() // ok\n    .filter(i -&gt;\n         (i % 3 == 0 &amp;&amp; i % 15 &gt; 0 &amp;&amp; i % 21 &gt; 0) // 1.\n      || (i % 5 == 0 &amp;&amp; i % 35 &gt; 0) // 2.\n      || (i % 7 == 0) // 3.\n    )\n    .mapToLong(i -&gt; (long) i) // for bigger input\n    .sum(); // #\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683148849,"post_id":76167884,"comment_id":134323916,"body_markdown":"yes, that is quickest so far :)","body":"yes, that is quickest so far :)"},{"owner":{"account_id":2870931,"reputation":190,"user_id":4262989,"display_name":"VictorZurkowski"},"score":0,"creation_date":1694617073,"post_id":76167884,"comment_id":135915403,"body_markdown":"This solution requires human-assisted step to properly count once each integer; if that is the case, since 3,4,7 are coprime, the result is just :sumDivInRange.apply(n, 1) - sumDivInRange.apply(n, 105)","body":"This solution requires human-assisted step to properly count once each integer; if that is the case, since 3,4,7 are coprime, the result is just :sumDivInRange.apply(n, 1) - sumDivInRange.apply(n, 105)"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1694622569,"post_id":76167884,"comment_id":135916508,"body_markdown":"the magic numbers are just LCMs of singles, pairs, triplets, etc, so, technically no human interaction required, however I agree that in common case it is not a formula from math perspective because the amount algo steps depends on the size of input.","body":"the magic numbers are just LCMs of singles, pairs, triplets, etc, so, technically no human interaction required, however I agree that in common case it is not a formula from math perspective because the amount algo steps depends on the size of input."}],"tags":[],"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683146997,"creation_date":1683146997,"answer_id":76167884,"question_id":76163443,"body_markdown":"Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:\r\n\r\n```java\r\nBiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\r\n    int first = (1 / div) * div;\r\n    int last = (to / div) * div;\r\n\r\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\r\n};\r\n\r\nint n = 100000000;\r\n\r\n// not sure we need parallel that\r\nreturn sumDivInRange.apply(n, 3)\r\n        + sumDivInRange.apply(n, 5)\r\n        + sumDivInRange.apply(n, 7)\r\n        - sumDivInRange.apply(n, 15)\r\n        - sumDivInRange.apply(n, 21)\r\n        - sumDivInRange.apply(n, 35)\r\n        + sumDivInRange.apply(n, 105);\r\n```","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>Well, I believe solution below is the most optimal, cause it is just an arithmetic formula:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BiFunction&lt;Integer, Integer, Long&gt; sumDivInRange = (to, div) -&gt; {\n    int first = (1 / div) * div;\n    int last = (to / div) * div;\n\n    return ((long) first + last) * ((last - first) / div + 1) / 2;\n};\n\nint n = 100000000;\n\n// not sure we need parallel that\nreturn sumDivInRange.apply(n, 3)\n        + sumDivInRange.apply(n, 5)\n        + sumDivInRange.apply(n, 7)\n        - sumDivInRange.apply(n, 15)\n        - sumDivInRange.apply(n, 21)\n        - sumDivInRange.apply(n, 35)\n        + sumDivInRange.apply(n, 105);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":435105,"reputation":6948,"user_id":821497,"accept_rate":60,"display_name":"ciamej"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683222619,"creation_date":1683219555,"answer_id":76175658,"question_id":76163443,"body_markdown":"When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won&#39;t actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.\r\n\r\nUnfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time `O(1)` and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.\r\n\r\nA meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).\r\n\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n      public static final int numberOfThreads = 3;\r\n      public static long[] partialResults = new long[numberOfThreads];\r\n\r\n      public static class MyThread implements Runnable{\r\n        public int threadNumber;\r\n        public int n;\r\n\r\n        public MyThread(int threadNumber, int n) {\r\n            this.threadNumber = threadNumber;\r\n            this.n = n;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\r\n            int end = threadNumber * n / numberOfThreads;\r\n            long result = 0;\r\n            for (int i = start; i &lt;= end; i++)\r\n                if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\r\n                    result += i;\r\n            partialResults[threadNumber - 1] = result;\r\n        }\r\n      }\r\n\r\n      public long getSum(int n) {\r\n        Thread[] threads = new Thread[numberOfThreads];\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1] = new Thread(new MyThread(i, n));\r\n\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            threads[i - 1].start();\r\n\r\n        try {\r\n            for (int i = 1; i &lt;= numberOfThreads; i++)\r\n                threads[i - 1].join();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n        \r\n        long sum = 0;\r\n        for (int i = 1; i &lt;= numberOfThreads; i++)\r\n            sum += partialResults[i - 1];\r\n\r\n        return sum;\r\n      }\r\n\r\n      public static void main(String[] args) {\r\n        FindMultiples findMultiples = new FindMultiples();\r\n        System.out.println(findMultiples.getSum(1000));\r\n      }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>When your goal is to parallelize computations you should make sure that your solution is actually faster than a serial (single threaded) one. Unfortunately your code (fixed by Mukhtar Amirkhanov) is probably much slower than a naive loop going through 1 to n. This is because a naive solution does not have to store the actual dividends anywhere. Also your multithreaded program synchronizes on each step, which means it won't actually make much progress in parallel. Finally, after the threads join your program removes duplicates in the main thread - that step alone take probably way more time than the naive loop.</p>\n<p>Unfortunately, the task is poorly defined, because the fastest solution is just a formula (as shown by @Andrey B. Panfilov) which can be computed in constant time <code>O(1)</code> and which cannot be sped up by multithreading. Probably your teacher meant to speed the computations by using multithreading compared to the naive solution, so you should settle for &quot;second-best&quot; approach.</p>\n<p>A meaningful approach to parallelizing such tasks is described by @Mike Nakis in his answer. You should split the work between threads not by the divisor, but by ranges of dividends. You can define separate threads do the work, and after joining them just add their results, or you can simply use a parallel stream (as shown by @Andrey B. Panfilov in a comment, just use a LongStream instead of an IntStream) to the same effect (if streams are allowed in your assignment).</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n  public static final int numberOfThreads = 3;\n  public static long[] partialResults = new long[numberOfThreads];\n\n  public static class MyThread implements Runnable{\n    public int threadNumber;\n    public int n;\n\n    public MyThread(int threadNumber, int n) {\n        this.threadNumber = threadNumber;\n        this.n = n;\n    }\n\n    @Override\n    public void run() {\n        int start = ((threadNumber - 1) * n / numberOfThreads) + 1;\n        int end = threadNumber * n / numberOfThreads;\n        long result = 0;\n        for (int i = start; i &lt;= end; i++)\n            if (i % 3 == 0 || i % 5 == 0 || i % 7 == 0)\n                result += i;\n        partialResults[threadNumber - 1] = result;\n    }\n  }\n\n  public long getSum(int n) {\n    Thread[] threads = new Thread[numberOfThreads];\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1] = new Thread(new MyThread(i, n));\n\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        threads[i - 1].start();\n\n    try {\n        for (int i = 1; i &lt;= numberOfThreads; i++)\n            threads[i - 1].join();\n    } catch (InterruptedException e) {\n        System.out.println(e.getMessage());\n    }\n    \n    long sum = 0;\n    for (int i = 1; i &lt;= numberOfThreads; i++)\n        sum += partialResults[i - 1];\n\n    return sum;\n  }\n\n  public static void main(String[] args) {\n    FindMultiples findMultiples = new FindMultiples();\n    System.out.println(findMultiples.getSum(1000));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":27810500,"reputation":83,"user_id":21232984,"display_name":"Phantom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":76163931,"answer_count":6,"score":6,"last_activity_date":1683222619,"creation_date":1683114406,"question_id":76163443,"body_markdown":"\r\nexplanation of the question:\r\nyou must write a multithreaded program that finds all \r\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\r\nsum of all unique integers as your answer.\r\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\r\ncounted once.\r\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\r\nyou need to solve the problem. You can use a Thread Pool for bonus points.\r\n\r\n    Example:\r\n    Input: n = 10\r\n    Output: sum = 40\r\n    Explanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\r\n    3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\r\n\r\nMy solution and problem that I faced:\r\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:\r\n\r\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n\r\nI used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won&#39;t show the amount that was expected:\r\n    \r\n    n=1000\r\n    expected sum:272066\r\n    actual sum:247377\r\n\r\nand the other problem is that the actual sum keeps changing every time I run the testcase.\r\ncan someone tell me what the problem of my code is and how I can fix it\r\n\r\nmy code:\r\n\r\n    import java.util.*;\r\n    public class FindMultiples\r\n    {\r\n\r\n    public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\r\n    public static int temp = 0;\r\n    public static synchronized void increment(){\r\n        dividends.add(temp);\r\n    }\r\n    public static class thread implements Runnable{\r\n\r\n        public int divisor;\r\n        public int n;\r\n\r\n        public thread(int n , int divisor){\r\n            this.n=n;\r\n            this.divisor=divisor;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n\r\n            for (int i=1 ; i&lt;=n ; i++){\r\n                if (i%divisor==0){\r\n                    temp=i;\r\n                    increment();\r\n                }\r\n            }\r\n        }\r\n    }\r\n   \r\n    public int getSum(int n) {\r\n        int sum = 0;\r\n        Thread thread1 = new Thread(new thread(n,3));\r\n        Thread thread2 = new Thread(new thread(n,7));\r\n        Thread thread3 = new Thread(new thread(n,5));\r\n        \r\n        thread3.start();\r\n        thread2.start();\r\n        thread1.start();\r\n        try {\r\n            thread3.join();\r\n            thread2.join();\r\n            thread1.join();\r\n        }catch (InterruptedException e){\r\n\r\n        }\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\r\n        dividends.clear();\r\n        dividends.addAll(set);\r\n\r\n        for (int i : dividends){\r\n            sum+=i;\r\n        }\r\n\r\n        return sum;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n    }\r\n    }","title":"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java","body":"<p>explanation of the question:\nyou must write a multithreaded program that finds all\nintegers in the range [1, n] that are divisible by 3, 5, or 7. Return the\nsum of all unique integers as your answer.\nNote that an integer such as 15 (which is a multiple of 3 and 5) is only\ncounted once.\nThe Positive integer n &gt; 0 is given to you as input. Create as many threads as\nyou need to solve the problem. You can use a Thread Pool for bonus points.</p>\n<pre><code>Example:\nInput: n = 10\nOutput: sum = 40\nExplanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:\n3, 5, 6, 7, 9, 10. The sum of these numbers is 40.\n</code></pre>\n<p>My solution and problem that I faced:\nin this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:</p>\n<pre><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n</code></pre>\n<p>I used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won't show the amount that was expected:</p>\n<pre><code>n=1000\nexpected sum:272066\nactual sum:247377\n</code></pre>\n<p>and the other problem is that the actual sum keeps changing every time I run the testcase.\ncan someone tell me what the problem of my code is and how I can fix it</p>\n<p>my code:</p>\n<pre><code>import java.util.*;\npublic class FindMultiples\n{\n\npublic static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();\npublic static int temp = 0;\npublic static synchronized void increment(){\n    dividends.add(temp);\n}\npublic static class thread implements Runnable{\n\n    public int divisor;\n    public int n;\n\n    public thread(int n , int divisor){\n        this.n=n;\n        this.divisor=divisor;\n    }\n\n    @Override\n    public void run() {\n\n        for (int i=1 ; i&lt;=n ; i++){\n            if (i%divisor==0){\n                temp=i;\n                increment();\n            }\n        }\n    }\n}\n\npublic int getSum(int n) {\n    int sum = 0;\n    Thread thread1 = new Thread(new thread(n,3));\n    Thread thread2 = new Thread(new thread(n,7));\n    Thread thread3 = new Thread(new thread(n,5));\n    \n    thread3.start();\n    thread2.start();\n    thread1.start();\n    try {\n        thread3.join();\n        thread2.join();\n        thread1.join();\n    }catch (InterruptedException e){\n\n    }\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);\n    dividends.clear();\n    dividends.addAll(set);\n\n    for (int i : dividends){\n        sum+=i;\n    }\n\n    return sum;\n}\n\npublic static void main(String[] args) {\n}\n}\n</code></pre>\n"},{"tags":["java","mutiny","quarkus-hibernate-reactive"],"answers":[{"tags":[],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683209555,"creation_date":1683209555,"answer_id":76174174,"question_id":76168467,"body_markdown":"Much like promises in JS, passing the Uni is part of the issue, and I need to **return** from within the chain.\r\n\r\n    return seatsAvailable.onItem().transformToUni(result -&gt; {\r\n\r\nI could then handle the check on the result as a boolean and continue by **returning** the following:\r\n\r\n    return sf.withTransaction((s, t) -&gt; s.persist(selection))","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>Much like promises in JS, passing the Uni is part of the issue, and I need to <strong>return</strong> from within the chain.</p>\n<pre><code>return seatsAvailable.onItem().transformToUni(result -&gt; {\n</code></pre>\n<p>I could then handle the check on the result as a boolean and continue by <strong>returning</strong> the following:</p>\n<pre><code>return sf.withTransaction((s, t) -&gt; s.persist(selection))\n</code></pre>\n"}],"owner":{"account_id":6338401,"reputation":86,"user_id":4921147,"display_name":"alliancecoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76174174,"answer_count":1,"score":0,"last_activity_date":1683222573,"creation_date":1683154476,"question_id":76168467,"body_markdown":"I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.\r\n\r\nI am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:\r\n\r\n```\r\npackage org.electricaltrainingalliance.attendees.selections.boundary;\r\n\r\nimport java.util.UUID;\r\n\r\nimport javax.enterprise.context.ApplicationScoped;\r\nimport javax.inject.Inject;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.DELETE;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.PUT;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.QueryParam;\r\nimport javax.ws.rs.WebApplicationException;\r\nimport javax.ws.rs.core.Response;\r\nimport javax.ws.rs.core.Response.Status;\r\n\r\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\r\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\r\nimport org.jboss.logging.Logger;\r\nimport org.jboss.logging.Logger.Level;\r\nimport org.jboss.resteasy.reactive.RestPath;\r\n\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n@Path(&quot;selections&quot;)\r\n@ApplicationScoped\r\n@Produces(&quot;application/json&quot;)\r\n@Consumes(&quot;application/json&quot;)\r\npublic class AttendeeSelectionsService {\r\n\r\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\r\n\r\n    @Inject\r\n    SessionFactory sf;\r\n\r\n    @POST\r\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\r\n        if (selection == null || !selection.isValid()) {\r\n            return Uni.createFrom()\r\n                    .item(Response.status(400)\r\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\r\n        }\r\n\r\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\r\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\r\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\r\n                .getResultList()).onItem()\r\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\r\n\r\n        seatsAvailable.onItem().transformToUni(result -&gt; {\r\n            if (!result) {\r\n                return Uni.createFrom()\r\n                        .item(Response.status(409)\r\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\r\n            } else {\r\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\r\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\r\n                        .onFailure().transform(failure -&gt; {\r\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\r\n                                throw new WebApplicationException(\r\n                                        &quot;A Selection with this information already exists.&quot;,\r\n                                        Status.CONFLICT);\r\n                            } else {\r\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\r\n                                throw new WebApplicationException(failure.getMessage(),\r\n                                        Status.INTERNAL_SERVER_ERROR);\r\n                            }\r\n                        });\r\n            }\r\n        });\r\n        \r\n    }\r\n...\r\n}\r\n```\r\n\r\nEssentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.\r\n\r\nI would like to:\r\n- first call the NamedQuery that provides the list\r\n- compare the size of the resulting list to the capacity allowed\r\n- if there are &quot;seats available&quot; perform the POST operation\r\n- If there are &quot;no seats available&quot; return a CONFLICT\r\n\r\nI have tried an .await() on the NamedQuery to get a Boolean. I get the error `This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread &#39;executor-thread-0`\r\n\r\nI have tried in place of .transform as well as .transformToUni but it provides the context error `This method must return a result of type Uni&lt;Response&gt;` of which all paths do, confusingly.","title":"How do I conditionally post using hibernate-reactive based on the result of a different NamedQuery","body":"<p>I have a POST operation that should only occur if the result of another NamedQuery has a row count Greater Than &quot;&gt;&quot; than a known value.</p>\n<p>I am new to Mutiny and moreso hibernate-reactive. My current catastrophe looks like this:</p>\n<pre><code>package org.electricaltrainingalliance.attendees.selections.boundary;\n\nimport java.util.UUID;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.DELETE;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.PUT;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.QueryParam;\nimport javax.ws.rs.WebApplicationException;\nimport javax.ws.rs.core.Response;\nimport javax.ws.rs.core.Response.Status;\n\nimport org.electricaltrainingalliance.attendees.selections.entity.AttendeeSelection;\nimport org.hibernate.reactive.mutiny.Mutiny.SessionFactory;\nimport org.jboss.logging.Logger;\nimport org.jboss.logging.Logger.Level;\nimport org.jboss.resteasy.reactive.RestPath;\n\nimport io.smallrye.mutiny.Uni;\n\n@Path(&quot;selections&quot;)\n@ApplicationScoped\n@Produces(&quot;application/json&quot;)\n@Consumes(&quot;application/json&quot;)\npublic class AttendeeSelectionsService {\n\n    private static final Logger LOGGER = Logger.getLogger(AttendeeSelectionsService.class.getName());\n\n    @Inject\n    SessionFactory sf;\n\n    @POST\n    public Uni&lt;Response&gt; create(AttendeeSelection selection) {\n        if (selection == null || !selection.isValid()) {\n            return Uni.createFrom()\n                    .item(Response.status(400)\n                            .entity(&quot;The Selection is not valid, please refer to the API Documentation.&quot;)::build);\n        }\n\n        Uni&lt;Boolean&gt; seatsAvailable = sf.withSession((s) -&gt; s\n                .createNamedQuery(AttendeeSelection.findByOfferingId, AttendeeSelection.class)\n                .setParameter(&quot;offeringId&quot;, selection.getOffering().getOfferingId())\n                .getResultList()).onItem()\n                .transform(entity -&gt; entity.size() &gt;= selection.getOffering().getCapacity() ? Boolean.FALSE : Boolean.TRUE);\n\n        seatsAvailable.onItem().transformToUni(result -&gt; {\n            if (!result) {\n                return Uni.createFrom()\n                        .item(Response.status(409)\n                                .entity(&quot;The Offering is no longer available.&quot;)::build);\n            } else {\n                sf.withTransaction((s, t) -&gt; s.persist(selection))\n                        .replaceWith(Response.ok(selection).status(Status.CREATED)::build)\n                        .onFailure().transform(failure -&gt; {\n                            if (failure.getMessage().toLowerCase().contains(&quot;uk_unique_selection&quot;)) {\n                                throw new WebApplicationException(\n                                        &quot;A Selection with this information already exists.&quot;,\n                                        Status.CONFLICT);\n                            } else {\n                                LOGGER.log(Level.DEBUG, failure.getMessage(), failure);\n                                throw new WebApplicationException(failure.getMessage(),\n                                        Status.INTERNAL_SERVER_ERROR);\n                            }\n                        });\n            }\n        });\n        \n    }\n...\n}\n</code></pre>\n<p>Essentily, I have a query that returns a list of elements. The item being created, has a value that handles the maximum allowed.</p>\n<p>I would like to:</p>\n<ul>\n<li>first call the NamedQuery that provides the list</li>\n<li>compare the size of the resulting list to the capacity allowed</li>\n<li>if there are &quot;seats available&quot; perform the POST operation</li>\n<li>If there are &quot;no seats available&quot; return a CONFLICT</li>\n</ul>\n<p>I have tried an .await() on the NamedQuery to get a Boolean. I get the error <code>This method should exclusively be invoked from a Vert.x EventLoop thread; currently running on thread 'executor-thread-0</code></p>\n<p>I have tried in place of .transform as well as .transformToUni but it provides the context error <code>This method must return a result of type Uni&lt;Response&gt;</code> of which all paths do, confusingly.</p>\n"},{"tags":["java","spring-boot","eclipse"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1683109810,"post_id":76162783,"comment_id":134315070,"body_markdown":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?","body":"Do you actually have this class: com.pafproject.foodieapp.Repository.UserRepo? I don&#39;t see any code for it in your question. Can it be autowired?"},{"owner":{"account_id":13807809,"reputation":420,"user_id":9966240,"display_name":"KSs"},"score":1,"creation_date":1683112735,"post_id":76162783,"comment_id":134315660,"body_markdown":"It looks like the repository bean is not registered in the spring context.","body":"It looks like the repository bean is not registered in the spring context."},{"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"score":0,"creation_date":1683222476,"post_id":76162783,"comment_id":134337522,"body_markdown":"Would you please consider to tell us what you *have* tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems.","body":"Would you please consider to tell us what you <i>have</i> tried to solve the pretty straightforward error message? You can&#39;t expect people to read a bunch of code without assisting to narrow the number of possible problems."}],"owner":{"account_id":28397225,"reputation":1,"user_id":21722269,"display_name":"Sonal Liyanage"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683222216,"creation_date":1683109522,"question_id":76162783,"body_markdown":"I tried several solutions from this platform and other sources as well but none of them worked.\r\n\r\n#### Application failed to start ####\r\n\r\nDescription:\r\n```\r\nField userRepo in\r\ncom.pafproject.foodieapp.Service.UserService\r\nrequired a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nthat could not be found.\r\n```\r\n\r\nThe injection point has the following annotations:\r\n```\r\n@org.springframework.beans.factory.annotation.Autowired(required=true)\r\n```\r\n\r\nAction:\r\n```\r\nConsider defining a bean of type\r\n&#39;com.pafproject.foodieapp.Repository.UserRepo&#39;\r\nin your configuration.\r\n```\r\n\r\nThis is my main class\r\n```\r\npackage com.pafproject.foodieapp;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class FoodieappApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(FoodieappApplication.class, args);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserController.java class\r\n```\r\npackage com.pafproject.foodieapp.Controller;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Service.UserService;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/users&quot;)\r\npublic class UserController {\r\n\t\r\n\t@Autowired\r\n\tUserService userService;\r\n\r\n\t@PostMapping(&quot;&quot;)\r\n\tprivate Users submitUser(@RequestBody Users users) {\r\n\t\treturn userService.submitMetaDataOfUser(users);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{userid}&quot;)\r\n\tprivate Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\r\n\t\treturn userService.displayUserMetaData(userId);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserService.java class:\r\n```\r\npackage com.pafproject.foodieapp.Service;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\nimport com.pafproject.foodieapp.Repository.UserRepo;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired\r\n\tUserRepo userRepo;\r\n\t\r\n\tpublic Users submitMetaDataOfUser(Users user) {\r\n\t\treturn userRepo.save(user);\r\n\t}\r\n\t\r\n\tpublic Users displayUserMetaData(String userid) {\r\n\t\treturn userRepo.findByUserId(userid);\r\n\t}\r\n}\r\n```\r\n\r\nThis is my UserRepo.java class:\r\n```\r\npackage com.pafproject.foodieapp.Repository;\r\n\r\nimport org.springframework.data.repository.CrudRepository;\r\nimport org.springframework.stereotype.Repository;\r\nimport com.pafproject.foodieapp.Entity.Users;\r\n\r\n@Repository\r\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\r\n\r\n\tUsers save(Users user);\r\n\tUsers findByUserId(String userId);\r\n}\r\n```\r\n\r\nThis is my Users class:\r\n```\r\npackage com.pafproject.foodieapp.Entity;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.Id;\r\nimport com.sun.istack.NotNull;\r\n\r\n@Entity(name=&quot;Users&quot;)\r\npublic class Users {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue\r\n\tprivate int id;\r\n\t\r\n\t@NotNull\r\n\tprivate String userID;\r\n\tprivate String userName;\r\n\tprivate String name;\r\n\tprivate String profileImage;\r\n\tpublic Users() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\tpublic Users(int id, String userID, String userName, String name, String profileImage) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.userID = userID;\r\n\t\tthis.userName = userName;\r\n\t\tthis.name = name;\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getUserID() {\r\n\t\treturn userID;\r\n\t}\r\n\tpublic void setUserID(String userID) {\r\n\t\tthis.userID = userID;\r\n\t}\r\n\tpublic String getUserName() {\r\n\t\treturn userName;\r\n\t}\r\n\tpublic void setUserName(String userName) {\r\n\t\tthis.userName = userName;\r\n\t}\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getProfileImage() {\r\n\t\treturn profileImage;\r\n\t}\r\n\tpublic void setProfileImage(String profileImage) {\r\n\t\tthis.profileImage = profileImage;\r\n\t}\r\n}\r\n```","title":"Field in required a bean of type that could not be found","body":"<p>I tried several solutions from this platform and other sources as well but none of them worked.</p>\n<h4>Application failed to start</h4>\n<p>Description:</p>\n<pre><code>Field userRepo in\ncom.pafproject.foodieapp.Service.UserService\nrequired a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nthat could not be found.\n</code></pre>\n<p>The injection point has the following annotations:</p>\n<pre><code>@org.springframework.beans.factory.annotation.Autowired(required=true)\n</code></pre>\n<p>Action:</p>\n<pre><code>Consider defining a bean of type\n'com.pafproject.foodieapp.Repository.UserRepo'\nin your configuration.\n</code></pre>\n<p>This is my main class</p>\n<pre><code>package com.pafproject.foodieapp;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class FoodieappApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(FoodieappApplication.class, args);\n    }\n}\n</code></pre>\n<p>This is my UserController.java class</p>\n<pre><code>package com.pafproject.foodieapp.Controller;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Service.UserService;\n\n@RestController\n@RequestMapping(&quot;/users&quot;)\npublic class UserController {\n    \n    @Autowired\n    UserService userService;\n\n    @PostMapping(&quot;&quot;)\n    private Users submitUser(@RequestBody Users users) {\n        return userService.submitMetaDataOfUser(users);\n    }\n    \n    @GetMapping(&quot;/{userid}&quot;)\n    private Users getUserDetails(@PathVariable(&quot;userid&quot;) String userId) {\n        return userService.displayUserMetaData(userId);\n    }\n}\n</code></pre>\n<p>This is my UserService.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport com.pafproject.foodieapp.Entity.Users;\nimport com.pafproject.foodieapp.Repository.UserRepo;\n\n@Service\npublic class UserService {\n\n    @Autowired\n    UserRepo userRepo;\n    \n    public Users submitMetaDataOfUser(Users user) {\n        return userRepo.save(user);\n    }\n    \n    public Users displayUserMetaData(String userid) {\n        return userRepo.findByUserId(userid);\n    }\n}\n</code></pre>\n<p>This is my UserRepo.java class:</p>\n<pre><code>package com.pafproject.foodieapp.Repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\nimport com.pafproject.foodieapp.Entity.Users;\n\n@Repository\npublic interface UserRepo extends CrudRepository&lt;Users, Integer&gt;{\n\n    Users save(Users user);\n    Users findByUserId(String userId);\n}\n</code></pre>\n<p>This is my Users class:</p>\n<pre><code>package com.pafproject.foodieapp.Entity;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport com.sun.istack.NotNull;\n\n@Entity(name=&quot;Users&quot;)\npublic class Users {\n    \n    @Id\n    @GeneratedValue\n    private int id;\n    \n    @NotNull\n    private String userID;\n    private String userName;\n    private String name;\n    private String profileImage;\n    public Users() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    public Users(int id, String userID, String userName, String name, String profileImage) {\n        super();\n        this.id = id;\n        this.userID = userID;\n        this.userName = userName;\n        this.name = name;\n        this.profileImage = profileImage;\n    }\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getUserID() {\n        return userID;\n    }\n    public void setUserID(String userID) {\n        this.userID = userID;\n    }\n    public String getUserName() {\n        return userName;\n    }\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getProfileImage() {\n        return profileImage;\n    }\n    public void setProfileImage(String profileImage) {\n        this.profileImage = profileImage;\n    }\n}\n</code></pre>\n"},{"tags":["java","aws-device-farm","playwright-java"],"owner":{"account_id":28503362,"reputation":1,"user_id":21814329,"display_name":"shweta gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683221891,"creation_date":1683192956,"question_id":76171698,"body_markdown":"I want to run my playwright script written in java on AWS device farm browser.\r\nHow can I achieve that in java?\r\n\r\nSelenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.\r\n\r\nnot getting enough supporting document for device farm with playwright.","title":"How to run playwright java test case on AWS Device Farm","body":"<p>I want to run my playwright script written in java on AWS device farm browser.\nHow can I achieve that in java?</p>\n<p>Selenium Example is pretty simpler by passing device farm detail in to Remote Webdriver.</p>\n<p>not getting enough supporting document for device farm with playwright.</p>\n"},{"tags":["java","neovim"],"comments":[{"owner":{"account_id":10775944,"reputation":1137,"user_id":7927982,"accept_rate":62,"display_name":"Auryn"},"score":0,"creation_date":1690228193,"post_id":76170551,"comment_id":135321287,"body_markdown":"I have the same issue. would love to see the solution if found :/","body":"I have the same issue. would love to see the solution if found :/"}],"owner":{"account_id":28502107,"reputation":21,"user_id":21813215,"display_name":"4Gettt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":505,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683221770,"creation_date":1683185101,"question_id":76170551,"body_markdown":"I&#39;m currently trying to get jdtls in my neovim config to work but everytime I open a java file it doesnt start right \r\n\r\nthe lsp.log says the following: \r\n```\r\n[START][2023-04-20 14:25:54] LSP logging initiated\r\n[ERROR][2023-04-20 14:25:54] .../vim/lsp/rpc.lua:734\t&quot;rpc&quot;\t&quot;jdtls&quot;\t&quot;stderr&quot;\t&quot;WARNING: Using incubator modules: jdk.incubator.concurrent, jdk.incubator.vector\\n&quot;\r\n[WARN][2023-04-20 14:26:13] ...lsp/handlers.lua:137\t&quot;The language server jdtls triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless&quot;\r\n[WARN][2023-04-20 14:26:13] .../lua/vim/lsp.lua:1073\t&quot;server_request: no handler found for&quot;\t&quot;workspace/executeClientCommand&quot;\r\n[ERROR][2023-04-20 14:26:16] ...lsp/handlers.lua:535\t&quot;Apr 20, 2023, 2:26:16 PM org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\norg.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\njava.util.concurrent.CompletionException: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\\n\\tat java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\\n\\tat org.eclipse.jdt.ls.core.internal.JavaClientConnection.executeClientCommand(JavaClientConnection.java:93)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer.synchronizeBundles(JDTLanguageServer.java:414)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer$2.run(JDTLanguageServer.java:301)\\n\\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\\nCaused by: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleResponse(RemoteEndpoint.java:209)\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:193)\\n\\tat org.eclipse.jdt.ls.core.internal.ParentProcessWatcher.lambda$1(ParentProcessWatcher.java:144)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\\n\\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\\n\\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1623)\\n&quot;\r\n```\r\n- I tried changing my jdk version from the latest to 17\r\n- I tried manually installing jdtls and configuring it without the lsp and mason plugin","title":"can&#39;t get jdtls to work in neovim with LspInstall","body":"<p>I'm currently trying to get jdtls in my neovim config to work but everytime I open a java file it doesnt start right</p>\n<p>the lsp.log says the following:</p>\n<pre><code>[START][2023-04-20 14:25:54] LSP logging initiated\n[ERROR][2023-04-20 14:25:54] .../vim/lsp/rpc.lua:734    &quot;rpc&quot;   &quot;jdtls&quot; &quot;stderr&quot;    &quot;WARNING: Using incubator modules: jdk.incubator.concurrent, jdk.incubator.vector\\n&quot;\n[WARN][2023-04-20 14:26:13] ...lsp/handlers.lua:137 &quot;The language server jdtls triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless&quot;\n[WARN][2023-04-20 14:26:13] .../lua/vim/lsp.lua:1073    &quot;server_request: no handler found for&quot;  &quot;workspace/executeClientCommand&quot;\n[ERROR][2023-04-20 14:26:16] ...lsp/handlers.lua:535    &quot;Apr 20, 2023, 2:26:16 PM org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\norg.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\njava.util.concurrent.CompletionException: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\\n\\tat java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\\n\\tat org.eclipse.jdt.ls.core.internal.JavaClientConnection.executeClientCommand(JavaClientConnection.java:93)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer.synchronizeBundles(JDTLanguageServer.java:414)\\n\\tat org.eclipse.jdt.ls.core.internal.handlers.JDTLanguageServer$2.run(JDTLanguageServer.java:301)\\n\\tat org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\\nCaused by: org.eclipse.lsp4j.jsonrpc.ResponseErrorException: MethodNotFound\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.handleResponse(RemoteEndpoint.java:209)\\n\\tat org.eclipse.lsp4j.jsonrpc.RemoteEndpoint.consume(RemoteEndpoint.java:193)\\n\\tat org.eclipse.jdt.ls.core.internal.ParentProcessWatcher.lambda$1(ParentProcessWatcher.java:144)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.handleMessage(StreamMessageProducer.java:194)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.StreamMessageProducer.listen(StreamMessageProducer.java:94)\\n\\tat org.eclipse.lsp4j.jsonrpc.json.ConcurrentMessageProcessor.run(ConcurrentMessageProcessor.java:113)\\n\\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)\\n\\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\\n\\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\\n\\tat java.base/java.lang.Thread.run(Thread.java:1623)\\n&quot;\n</code></pre>\n<ul>\n<li>I tried changing my jdk version from the latest to 17</li>\n<li>I tried manually installing jdtls and configuring it without the lsp and mason plugin</li>\n</ul>\n"},{"tags":["java","hibernate","sqlite","gradle","intellij-idea"],"comments":[{"owner":{"account_id":1327194,"reputation":1809,"user_id":1271785,"accept_rate":67,"display_name":"pfurbacher"},"score":2,"creation_date":1683257008,"post_id":76175872,"comment_id":134342457,"body_markdown":"The Baeldung article on [Spring Boot With SQLite](https://www.baeldung.com/spring-boot-sqlite#sqlite-dialect) suggests that for Hibernate 6, the SQLite dialect is a part of Hibernate&#39;s community supported dialects. Therefore, you have to add the following dependency: `implementation &#39;org.hibernate.orm:hibernate-community-dialects:6.2.2.Final&#39;` to your build file.","body":"The Baeldung article on <a href=\"https://www.baeldung.com/spring-boot-sqlite#sqlite-dialect\" rel=\"nofollow noreferrer\">Spring Boot With SQLite</a> suggests that for Hibernate 6, the SQLite dialect is a part of Hibernate&#39;s community supported dialects. Therefore, you have to add the following dependency: <code>implementation &#39;org.hibernate.orm:hibernate-community-dialects:6.2.2.Final&#39;</code> to your build file."},{"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"score":0,"creation_date":1683282211,"post_id":76175872,"comment_id":134346325,"body_markdown":"That is correct.","body":"That is correct."}],"owner":{"account_id":27454054,"reputation":11,"user_id":20945806,"display_name":"randomnamme"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":476,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683221153,"creation_date":1683221153,"question_id":76175872,"body_markdown":"I&#39;m trying for 2 hours to configure Hibernate for my JavaFX project in Intellij IDEA, that uses a SQLite database. I&#39;ve been searching on the internet how to do this and I also checked the official documentation, but they are all useless and do not offer any help at all.\r\n\r\nI added this in the &#39;dependecies&#39; part of build.gradle: \r\n```\r\nimplementation &#39;org.hibernate:hibernate-core:6.2.2.Final&#39;\r\nruntimeOnly group: &#39;org.xerial&#39;, name: &#39;sqlite-jdbc&#39;, version: &#39;3.40.1.0&#39;\r\n```\r\nI also saw that a &#39;hibernate.cfg.xml&#39; file is required under the &#39;resources&#39; folder.\r\nI created it, but I hardly found any help with what is supposed to be in there. I added this:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration SYSTEM &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;!-- Database connection settings --&gt;\r\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\r\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:/path/to/database&lt;/property&gt;\r\n\r\n        &lt;!-- SQL dialect --&gt;\r\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\r\n\r\n        &lt;!-- Echo all executed SQL to stdout --&gt;\r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n\r\n        &lt;!-- Auto-create/update database schema --&gt;\r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\r\n        &lt;!-- Mapping files\r\n        &lt;mapping class=&quot;com.example.User&quot;/&gt; --&gt;\r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\nHowever, I have this issue in this file: &#39;Cannot resolve class &#39;SQLiteDialect&#39;:10.\r\nI suppose I have to add a new dependency that supports SQLite for Hibernate, however I don&#39;t know what name it would have, because every official &#39;documentation&#39; and &#39;tutorial&#39; is a complete waste of time and does not address this.\r\n\r\nI probably expect to not find any help here as well, because 99% of the times the answers that a question gets are not helpful at all, but I will try my luck.","title":"How to configure Hibernate for a SQLite database in a JavaFX project?","body":"<p>I'm trying for 2 hours to configure Hibernate for my JavaFX project in Intellij IDEA, that uses a SQLite database. I've been searching on the internet how to do this and I also checked the official documentation, but they are all useless and do not offer any help at all.</p>\n<p>I added this in the 'dependecies' part of build.gradle:</p>\n<pre><code>implementation 'org.hibernate:hibernate-core:6.2.2.Final'\nruntimeOnly group: 'org.xerial', name: 'sqlite-jdbc', version: '3.40.1.0'\n</code></pre>\n<p>I also saw that a 'hibernate.cfg.xml' file is required under the 'resources' folder.\nI created it, but I hardly found any help with what is supposed to be in there. I added this:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration SYSTEM &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.sqlite.JDBC&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:sqlite:/path/to/database&lt;/property&gt;\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.SQLiteDialect&lt;/property&gt;\n\n        &lt;!-- Echo all executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Auto-create/update database schema --&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n\n        &lt;!-- Mapping files\n        &lt;mapping class=&quot;com.example.User&quot;/&gt; --&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>However, I have this issue in this file: 'Cannot resolve class 'SQLiteDialect':10.\nI suppose I have to add a new dependency that supports SQLite for Hibernate, however I don't know what name it would have, because every official 'documentation' and 'tutorial' is a complete waste of time and does not address this.</p>\n<p>I probably expect to not find any help here as well, because 99% of the times the answers that a question gets are not helpful at all, but I will try my luck.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1683218858,"post_id":76175491,"comment_id":134336741,"body_markdown":"mvn clean install should fix this","body":"mvn clean install should fix this"},{"owner":{"account_id":16654350,"reputation":11,"user_id":12036204,"display_name":"Tablesalt"},"score":0,"creation_date":1683257573,"post_id":76175491,"comment_id":134342489,"body_markdown":"where do I run that?","body":"where do I run that?"}],"answers":[{"tags":[],"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683219016,"creation_date":1683219016,"answer_id":76175584,"question_id":76175491,"body_markdown":"from your log &quot;Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa&quot;\r\n\r\nlooks like you don&#39;t have driver jar on your classpath ","title":"Spring Boot API not starting","body":"<p>from your log &quot;Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa&quot;</p>\n<p>looks like you don't have driver jar on your classpath</p>\n"},{"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683220988,"post_id":76175741,"comment_id":134337234,"body_markdown":"A scope of `runtime` should be OK for a JDBC driver - which should be loaded by SPI and is not needed for compilation. Also, for Spring Boot 3.0.6, that will cause `postgresql-42.5.4.jar` to be downloaded automatically - no explicit version needed. But this is a strange error, nonetheless (to me anyway).","body":"A scope of <code>runtime</code> should be OK for a JDBC driver - which should be loaded by SPI and is not needed for compilation. Also, for Spring Boot 3.0.6, that will cause <code>postgresql-42.5.4.jar</code> to be downloaded automatically - no explicit version needed. But this is a strange error, nonetheless (to me anyway)."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683220262,"creation_date":1683220262,"answer_id":76175741,"question_id":76175491,"body_markdown":"I don&#39;t see the Postgres JDBC driver in your Maven pom.xml.  I&#39;d recommend adding it unless I missed it:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;version&gt;42.6.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI went back and saw that you have the driver, but there&#39;s no version.  I&#39;m not sure why you made the scope runtime.  I&#39;d change that.  Make sure you see the JAR in the package after you create it.\r\n\r\n","title":"Spring Boot API not starting","body":"<p>I don't see the Postgres JDBC driver in your Maven pom.xml.  I'd recommend adding it unless I missed it:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.postgresql/postgresql --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n    &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n    &lt;version&gt;42.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I went back and saw that you have the driver, but there's no version.  I'm not sure why you made the scope runtime.  I'd change that.  Make sure you see the JAR in the package after you create it.</p>\n"}],"owner":{"account_id":16654350,"reputation":11,"user_id":12036204,"display_name":"Tablesalt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683220262,"creation_date":1683218426,"question_id":76175491,"body_markdown":"I am creating a basic API to send sudoku puzzles and I am having trouble running the API. This is my first time trying to use Spring on my own and I followed the same steps as I did when I did the tutorial but it keeps crashing.\r\n\r\nHere are the logs.\r\n\r\n```\r\n2023-05-04T12:34:40.727-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : Starting SudokuApplication using Java 17.0.6 with PID 21276 (C:\\Users\\olive\\Downloads\\sudokuApi\\demo\\target\\classes started by olive in C:\\Users\\olive\\Downloads\\sudokuApi\\demo)\r\n2023-05-04T12:34:40.734-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\r\n2023-05-04T12:34:42.546-04:00  INFO 21276 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-05-04T12:34:42.658-04:00 ERROR 21276 --- [           main] com.zaxxer.hikari.HikariConfig           : Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa\r\n2023-05-04T12:34:42.666-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-05-04T12:34:42.719-04:00 ERROR 21276 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n```\r\n\r\nMy application properties are below, I changed the username and password but I know for sure I have the right ones.\r\n\r\n```\r\nspring.main.banner-mode=off\r\nlogging.level.org.springframework=ERROR\r\n\r\nspring.jpa.hibernate.ddl-auto=none\r\n\r\nspring.datasource.initialization-mode=always\r\nspring.datasource.platform=postgres\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/sudoku\r\nspring.datasource.username=CHANGED\r\nspring.datasource.password=CHANGED\r\n\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\n```\r\n\r\nmy pom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Sudoku&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nI am not really sure how to read these kind of error codes so I copy pasted them and tried to find anything but nothing seems to work.\r\n\r\nIs there something I am missing?","title":"Spring Boot API not starting","body":"<p>I am creating a basic API to send sudoku puzzles and I am having trouble running the API. This is my first time trying to use Spring on my own and I followed the same steps as I did when I did the tutorial but it keeps crashing.</p>\n<p>Here are the logs.</p>\n<pre><code>2023-05-04T12:34:40.727-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : Starting SudokuApplication using Java 17.0.6 with PID 21276 (C:\\Users\\olive\\Downloads\\sudokuApi\\demo\\target\\classes started by olive in C:\\Users\\olive\\Downloads\\sudokuApi\\demo)\n2023-05-04T12:34:40.734-04:00  INFO 21276 --- [           main] com.sudoku.SudokuApplication             : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-05-04T12:34:42.424-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\n2023-05-04T12:34:42.546-04:00  INFO 21276 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-05-04T12:34:42.658-04:00 ERROR 21276 --- [           main] com.zaxxer.hikari.HikariConfig           : Failed to load driver class org.postgresql.Driver from HikariConfig class classloader jdk.internal.loader.ClassLoaders$AppClassLoader@1d44bcfa\n2023-05-04T12:34:42.666-04:00  INFO 21276 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-05-04T12:34:42.719-04:00 ERROR 21276 --- [           main] o.s.boot.SpringApplication               : Application run failed\n</code></pre>\n<p>My application properties are below, I changed the username and password but I know for sure I have the right ones.</p>\n<pre><code>spring.main.banner-mode=off\nlogging.level.org.springframework=ERROR\n\nspring.jpa.hibernate.ddl-auto=none\n\nspring.datasource.initialization-mode=always\nspring.datasource.platform=postgres\nspring.datasource.url=jdbc:postgresql://localhost:5432/sudoku\nspring.datasource.username=CHANGED\nspring.datasource.password=CHANGED\n\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\n</code></pre>\n<p>my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Sudoku&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>I am not really sure how to read these kind of error codes so I copy pasted them and tried to find anything but nothing seems to work.</p>\n<p>Is there something I am missing?</p>\n"},{"tags":["java"],"owner":{"account_id":1674568,"reputation":59,"user_id":1540385,"display_name":"user1540385"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683220193,"creation_date":1683220193,"question_id":76175729,"body_markdown":"In Java rest server we are using truststore. But certificates will expire every 4 hour. Is there any way to update truststore with new certificate without restarting web server in spring framework?","title":"Updating truststore without webserver restart","body":"<p>In Java rest server we are using truststore. But certificates will expire every 4 hour. Is there any way to update truststore with new certificate without restarting web server in spring framework?</p>\n"},{"tags":["java","zip"],"comments":[{"owner":{"account_id":1643900,"reputation":13042,"user_id":1515834,"accept_rate":82,"display_name":"Bobulous"},"score":1,"creation_date":1343935009,"post_id":11784102,"comment_id":15653590,"body_markdown":"ZipEntry can represent a directory too. See the [isDirectory()](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html#isDirectory()) method.","body":"ZipEntry can represent a directory too. See the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipEntry.html#isDirectory()\" rel=\"nofollow noreferrer\">isDirectory()</a> method."}],"answers":[{"comments":[{"owner":{"account_id":1494705,"reputation":3719,"user_id":1400943,"accept_rate":48,"display_name":"efirat"},"score":0,"creation_date":1522048505,"post_id":11784238,"comment_id":85974252,"body_markdown":"I am getting a zip file that has pages of document named as `[filename]-[page-number].jpg`. After getting zip file, I will make it read in sequence, and I am expecting to get files from 1 to last page. However, I see sometimes it confuses the order of files. For example, pages are taken in this order: 1, 2, 4, 3, 5, 6, 7, 9, 8, 10. Why do this happen?","body":"I am getting a zip file that has pages of document named as <code>[filename]-[page-number].jpg</code>. After getting zip file, I will make it read in sequence, and I am expecting to get files from 1 to last page. However, I see sometimes it confuses the order of files. For example, pages are taken in this order: 1, 2, 4, 3, 5, 6, 7, 9, 8, 10. Why do this happen?"},{"owner":{"account_id":6369146,"reputation":139,"user_id":4942165,"display_name":"Peter Spireng"},"score":1,"creation_date":1531458609,"post_id":11784238,"comment_id":89611851,"body_markdown":"Every record in zip has its &quot;offset&quot; from beginning. getNextEntry return items in order based on this offset (starts with offset 0). Some software (like [7zip](https://www.7-zip.org/)) show this offset when you open zip file...","body":"Every record in zip has its &quot;offset&quot; from beginning. getNextEntry return items in order based on this offset (starts with offset 0). Some software (like <a href=\"https://www.7-zip.org/\" rel=\"nofollow noreferrer\">7zip</a>) show this offset when you open zip file..."}],"tags":[],"owner":{"account_id":1707747,"reputation":635,"user_id":1566473,"display_name":"Manisha Mahawar"},"comment_count":2,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1495037619,"creation_date":1343934801,"answer_id":11784238,"question_id":11784102,"body_markdown":"Yes. It will print the folder name too, since it&#39;s also an entry within the zip. It will also print in the same order as it is displayed inside the zip. You can use below test to verify your output.\r\n\r\n    public class TestZipOrder {\r\n    \t@Test\r\n    \tpublic void testZipOrder() throws Exception {\r\n    \t\tFile file = new File(&quot;/Project/test.zip&quot;);\r\n    \t\tZipInputStream zis = new ZipInputStream(new FileInputStream(file));\r\n    \t\tZipEntry entry = null;\r\n    \t\twhile ( (entry = zis.getNextEntry()) != null ) {\r\n    \t\t System.out.println( entry.getName());\r\n    \t\t}\r\n        }\r\n    }\r\n\r\n","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Yes. It will print the folder name too, since it's also an entry within the zip. It will also print in the same order as it is displayed inside the zip. You can use below test to verify your output.</p>\n\n<pre><code>public class TestZipOrder {\n    @Test\n    public void testZipOrder() throws Exception {\n        File file = new File(\"/Project/test.zip\");\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(file));\n        ZipEntry entry = null;\n        while ( (entry = zis.getNextEntry()) != null ) {\n         System.out.println( entry.getName());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":175234,"reputation":4172,"user_id":405117,"accept_rate":74,"display_name":"Vikram"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1343935823,"creation_date":1343934810,"answer_id":11784242,"question_id":11784102,"body_markdown":"Excerpt from: https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files\r\n\r\njava.util.zip libraries offer some level of control for the added entries of the ZipOutputStream. \r\n\r\nFirst, **the order you add entries to the ZipOutputStream is the order they are physically located in the .zip file**. \r\n\r\n**You can manipulate the enumeration of entries returned back by the entries() method of ZipFile to produce a list in alphabetical or size order, but the entries are still stored in the order they were written to the output stream.**\r\n\r\nSo I would believe that you have to use the entries() method to see the order in which it will be iterated through. \r\n\r\n\r\n\r\n     ZipFile zf = new ZipFile(&quot;your file path with file name&quot;);\r\n\t\tfor (Enumeration&lt;? extends ZipEntry&gt; e = zf.entries();\r\n        e.hasMoreElements();) {\r\n\t\t  System.out.println(e.nextElement().getName());\r\n\t\t}","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Excerpt from: <a href=\"https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files\" rel=\"noreferrer\">https://blogs.oracle.com/CoreJavaTechTips/entry/creating_zip_and_jar_files</a></p>\n\n<p>java.util.zip libraries offer some level of control for the added entries of the ZipOutputStream. </p>\n\n<p>First, <strong>the order you add entries to the ZipOutputStream is the order they are physically located in the .zip file</strong>. </p>\n\n<p><strong>You can manipulate the enumeration of entries returned back by the entries() method of ZipFile to produce a list in alphabetical or size order, but the entries are still stored in the order they were written to the output stream.</strong></p>\n\n<p>So I would believe that you have to use the entries() method to see the order in which it will be iterated through. </p>\n\n<pre><code> ZipFile zf = new ZipFile(\"your file path with file name\");\n    for (Enumeration&lt;? extends ZipEntry&gt; e = zf.entries();\n    e.hasMoreElements();) {\n      System.out.println(e.nextElement().getName());\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1196838,"reputation":6753,"user_id":1168372,"accept_rate":79,"display_name":"Sujay"},"score":0,"creation_date":1343937641,"post_id":11784325,"comment_id":15654665,"body_markdown":"@joshualan - Or you could&#39;ve simply tried writing a piece of code and testing it out yourself :)","body":"@joshualan - Or you could&#39;ve simply tried writing a piece of code and testing it out yourself :)"},{"owner":{"account_id":1714555,"reputation":2080,"user_id":1571933,"accept_rate":59,"display_name":"joshualan"},"score":0,"creation_date":1343939986,"post_id":11784325,"comment_id":15655471,"body_markdown":"I tried and I didn&#39;t know you had to do C:\\\\ to reach my directories. Newbie mistake :S","body":"I tried and I didn&#39;t know you had to do C:\\\\ to reach my directories. Newbie mistake :S"},{"owner":{"account_id":109571,"reputation":4085,"user_id":290254,"display_name":"Julius Musseau"},"score":0,"creation_date":1343940541,"post_id":11784325,"comment_id":15655738,"body_markdown":"Can&#39;t you accept it?  Or do you need reputation to accept, even?  You probably have enough reputation to up-vote it, now, btw.","body":"Can&#39;t you accept it?  Or do you need reputation to accept, even?  You probably have enough reputation to up-vote it, now, btw."}],"tags":[],"owner":{"account_id":1643518,"reputation":656,"user_id":1515522,"display_name":"Zoop"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1343935147,"creation_date":1343935147,"answer_id":11784325,"question_id":11784102,"body_markdown":"Well... Lets see:\r\n\r\n            ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;C:\\\\New Folder.zip&quot;));\r\n            try\r\n            {\r\n                ZipEntry temp = null;\r\n                while ( (temp = zis.getNextEntry()) != null ) \r\n                {\r\n                 System.out.println( temp.getName());\r\n                }\r\n            }\r\n\r\nOutput:\r\n\r\n&gt; New Folder/\r\n&gt; \r\n&gt; New Folder/folder1/\r\n&gt; \r\n&gt; New Folder/folder1/bar.java\r\n&gt; \r\n&gt; New Folder/folder1/foo.c\r\n&gt; \r\n&gt; New Folder/foobar.c\r\n&gt; \r\n&gt; New Folder/hello.c\r\n&gt; \r\n&gt; New Folder/world.java","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Well... Lets see:</p>\n\n<pre><code>        ZipInputStream zis = new ZipInputStream(new FileInputStream(\"C:\\\\New Folder.zip\"));\n        try\n        {\n            ZipEntry temp = null;\n            while ( (temp = zis.getNextEntry()) != null ) \n            {\n             System.out.println( temp.getName());\n            }\n        }\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>New Folder/</p>\n  \n  <p>New Folder/folder1/</p>\n  \n  <p>New Folder/folder1/bar.java</p>\n  \n  <p>New Folder/folder1/foo.c</p>\n  \n  <p>New Folder/foobar.c</p>\n  \n  <p>New Folder/hello.c</p>\n  \n  <p>New Folder/world.java</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343935149,"creation_date":1343935149,"answer_id":11784326,"question_id":11784102,"body_markdown":"The zip file internal directory is a &quot;flat&quot; list of all the files and directories in the zip.  `getNextEntry` will iterate through the list and sequentially identify every file and directory in the zip file.\r\n\r\nThere is a variant of the zip file format that has no central directory, in which case (if it&#39;s handled at all) I suspect you&#39;d iterate through all actual files in the zip, skipping directories (but not skipping files in directories).","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>The zip file internal directory is a \"flat\" list of all the files and directories in the zip.  <code>getNextEntry</code> will iterate through the list and sequentially identify every file and directory in the zip file.</p>\n\n<p>There is a variant of the zip file format that has no central directory, in which case (if it's handled at all) I suspect you'd iterate through all actual files in the zip, skipping directories (but not skipping files in directories).</p>\n"},{"tags":[],"owner":{"account_id":5809798,"reputation":68,"user_id":4581268,"display_name":"Jeremy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683219616,"creation_date":1683219616,"answer_id":76175664,"question_id":11784102,"body_markdown":"I&#39;d like to explain in more details why [Vikram&#39;s answer][1] is correct and the [accepted][2] and [highest scoring][3] answers are potentially misleading or incomplete.\r\n\r\nAs Vikram stated (correctly)\r\n\r\n&gt; The order you add entries to the `ZipOutputStream` is the order they are physically located in the .zip file.\r\n\r\n\r\nI found this part of the accepted answer to be potentially misleading:\r\n&gt; It will also print in the same order as it is displayed inside the zip.\r\n\r\nOne gotcha I&#39;d like to note is that **files within a folder are not guaranteed to be returned in succession.**\r\n\r\nDifferent tools display zip file contents in different orders. In particular any tools with a GUI will show all files in a folder together whereas the actual files within the zip they may be scattered throughout.\r\n\r\nLet&#39;s walk through the two scenarios below.\r\n\r\n---\r\n### Scenario 1: Files in Tree Order\r\n\r\nStarting with a file tree like this\r\n```\r\n$ tree\r\n├── folder1\r\n│&#160;&#160; ├── bar.java\r\n│&#160;&#160; └── foo.c\r\n├── foobar.c\r\n├── hello.c\r\n└── world.java\r\n```\r\n\r\nNow let&#39;s create a zip from this directory using the Linux `zip` command.\r\n```\r\n$ zip -r zip1.zip ./*\r\n  adding: folder1/ (stored 0%)\r\n  adding: folder1/foo.c (stored 0%)\r\n  adding: folder1/bar.java (stored 0%)\r\n  adding: foobar.c (stored 0%)\r\n  adding: hello.c (stored 0%)\r\n  adding: world.java (stored 0%)\r\n```\r\nNote the order these files were added. This is the same order that they will be iterated through when using `ZipOutputStream`. Test that with the following script (borrowed from Zoop&#39;s answer)\r\n```\r\njshell&gt; import java.util.zip.*;\r\n   ...&gt; ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;./zip1.zip&quot;));\r\n   ...&gt; ZipEntry temp = null;\r\n   ...&gt; while ( (temp = zis.getNextEntry()) != null )\r\n   ...&gt; {\r\n   ...&gt;     System.out.println(temp.getName());\r\n   ...&gt; }\r\n```\r\n```\r\nfolder1/\r\nfolder1/foo.c\r\nfolder1/bar.java\r\nfoobar.c\r\nhello.c\r\nworld.java\r\n```\r\n---\r\n### Scenario 2: Files Scattered\r\n\r\nIf we add the files in a different order then they will be iterated through in a different order. Let&#39;s try that by using the zip command to create a new file which we add files to 1-by-1:\r\n```\r\nzip -m zip1.zip ./hello.c\r\nzip -m zip1.zip ./folder1\r\nzip -m zip2.zip ./folder1/foo.c\r\nzip -m zip1.zip ./world.java\r\nzip -m zip1.zip ./foobar.c\r\nzip -m zip1.zip ./folder1/bar.java # Notice we&#39;re adding this LAST\r\n```\r\nNow if we iterate through the files you&#39;ll see that `folder1/bar.java` is the last entry because it was added last. It will not be returned alongside the other folder contents. The directory entry will not be duplicated or immediately precede it.\r\n```\r\nhello.c\r\nfolder1/\r\nfolder1/foo.c\r\nworld.java\r\nfoobar.c\r\nfolder1/bar.java\r\n```\r\n\r\nThe zip spec is quite complex so be very careful when using ZipInputStream.\r\n\r\n  [1]: https://stackoverflow.com/a/11784242/4581268\r\n  [2]: https://stackoverflow.com/a/11784238/4581268\r\n  [3]: https://stackoverflow.com/a/11784325/4581268","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>I'd like to explain in more details why <a href=\"https://stackoverflow.com/a/11784242/4581268\">Vikram's answer</a> is correct and the <a href=\"https://stackoverflow.com/a/11784238/4581268\">accepted</a> and <a href=\"https://stackoverflow.com/a/11784325/4581268\">highest scoring</a> answers are potentially misleading or incomplete.</p>\n<p>As Vikram stated (correctly)</p>\n<blockquote>\n<p>The order you add entries to the <code>ZipOutputStream</code> is the order they are physically located in the .zip file.</p>\n</blockquote>\n<p>I found this part of the accepted answer to be potentially misleading:</p>\n<blockquote>\n<p>It will also print in the same order as it is displayed inside the zip.</p>\n</blockquote>\n<p>One gotcha I'd like to note is that <strong>files within a folder are not guaranteed to be returned in succession.</strong></p>\n<p>Different tools display zip file contents in different orders. In particular any tools with a GUI will show all files in a folder together whereas the actual files within the zip they may be scattered throughout.</p>\n<p>Let's walk through the two scenarios below.</p>\n<hr />\n<h3>Scenario 1: Files in Tree Order</h3>\n<p>Starting with a file tree like this</p>\n<pre><code>$ tree\n├── folder1\n│   ├── bar.java\n│   └── foo.c\n├── foobar.c\n├── hello.c\n└── world.java\n</code></pre>\n<p>Now let's create a zip from this directory using the Linux <code>zip</code> command.</p>\n<pre><code>$ zip -r zip1.zip ./*\n  adding: folder1/ (stored 0%)\n  adding: folder1/foo.c (stored 0%)\n  adding: folder1/bar.java (stored 0%)\n  adding: foobar.c (stored 0%)\n  adding: hello.c (stored 0%)\n  adding: world.java (stored 0%)\n</code></pre>\n<p>Note the order these files were added. This is the same order that they will be iterated through when using <code>ZipOutputStream</code>. Test that with the following script (borrowed from Zoop's answer)</p>\n<pre><code>jshell&gt; import java.util.zip.*;\n   ...&gt; ZipInputStream zis = new ZipInputStream(new FileInputStream(&quot;./zip1.zip&quot;));\n   ...&gt; ZipEntry temp = null;\n   ...&gt; while ( (temp = zis.getNextEntry()) != null )\n   ...&gt; {\n   ...&gt;     System.out.println(temp.getName());\n   ...&gt; }\n</code></pre>\n<pre><code>folder1/\nfolder1/foo.c\nfolder1/bar.java\nfoobar.c\nhello.c\nworld.java\n</code></pre>\n<hr />\n<h3>Scenario 2: Files Scattered</h3>\n<p>If we add the files in a different order then they will be iterated through in a different order. Let's try that by using the zip command to create a new file which we add files to 1-by-1:</p>\n<pre><code>zip -m zip1.zip ./hello.c\nzip -m zip1.zip ./folder1\nzip -m zip2.zip ./folder1/foo.c\nzip -m zip1.zip ./world.java\nzip -m zip1.zip ./foobar.c\nzip -m zip1.zip ./folder1/bar.java # Notice we're adding this LAST\n</code></pre>\n<p>Now if we iterate through the files you'll see that <code>folder1/bar.java</code> is the last entry because it was added last. It will not be returned alongside the other folder contents. The directory entry will not be duplicated or immediately precede it.</p>\n<pre><code>hello.c\nfolder1/\nfolder1/foo.c\nworld.java\nfoobar.c\nfolder1/bar.java\n</code></pre>\n<p>The zip spec is quite complex so be very careful when using ZipInputStream.</p>\n"}],"owner":{"account_id":1714555,"reputation":2080,"user_id":1571933,"accept_rate":59,"display_name":"joshualan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26761,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":11784238,"answer_count":5,"score":20,"last_activity_date":1683219616,"creation_date":1343934224,"question_id":11784102,"body_markdown":"Say we have code like:\r\n\r\n    File file = new File(&quot;zip1.zip&quot;);\r\n    ZipInputStream zis = new ZipInputStream(new FileInputStream(file));\r\n\r\nLet&#39;s assume you have a .zip file that contains the following:\r\n\r\n - zip1.zip\r\n  - hello.c\r\n  - world.java\r\n  - folder1\r\n     - foo.c\r\n     - bar.java\r\n  - foobar.c\r\n\r\nHow would zis.getNextEntry() iterate through that? \r\n\r\nWould it return hello.c, world.java, folder1, foobar.c and completely ignore the files in folder1?\r\n\r\nOr would it return hello.c, world.java, folder1, foo.c, bar.java, and then foobar.c?\r\n\r\nWould it even return folder1 since it&#39;s technically a folder and not a file?\r\n\r\nThanks!\r\n\r\n","title":"How does ZipInputStream.getNextEntry() work?","body":"<p>Say we have code like:</p>\n\n<pre><code>File file = new File(\"zip1.zip\");\nZipInputStream zis = new ZipInputStream(new FileInputStream(file));\n</code></pre>\n\n<p>Let's assume you have a .zip file that contains the following:</p>\n\n<ul>\n<li>zip1.zip\n<ul>\n<li>hello.c</li>\n<li>world.java</li>\n<li>folder1\n<ul>\n<li>foo.c</li>\n<li>bar.java</li>\n</ul></li>\n<li>foobar.c</li>\n</ul></li>\n</ul>\n\n<p>How would zis.getNextEntry() iterate through that? </p>\n\n<p>Would it return hello.c, world.java, folder1, foobar.c and completely ignore the files in folder1?</p>\n\n<p>Or would it return hello.c, world.java, folder1, foo.c, bar.java, and then foobar.c?</p>\n\n<p>Would it even return folder1 since it's technically a folder and not a file?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","generics","reflection","java-8","annotations"],"comments":[{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1510144421,"post_id":47175573,"comment_id":81308483,"body_markdown":"never actually needed to do this... but a very good question!","body":"never actually needed to do this... but a very good question!"}],"answers":[{"comments":[{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1510160424,"post_id":47183550,"comment_id":81320007,"body_markdown":"Thanks a lot for this (upvoted)! But... it made me realize what makes `@A2` _disappear_ in my case is the fact `T` in my example come from the class definition (I modified the code above to show that `SomeClass&lt;T&gt;` contains `myMethod`). Now, I understand that changes the situation, but it must be possible to still retrieve the annotation in some way... yet there doesn&#39;t seem to be a way. Your code doesn&#39;t recover it, just like mine didn&#39;t.","body":"Thanks a lot for this (upvoted)! But... it made me realize what makes <code>@A2</code> <i>disappear</i> in my case is the fact <code>T</code> in my example come from the class definition (I modified the code above to show that <code>SomeClass&lt;T&gt;</code> contains <code>myMethod</code>). Now, I understand that changes the situation, but it must be possible to still retrieve the annotation in some way... yet there doesn&#39;t seem to be a way. Your code doesn&#39;t recover it, just like mine didn&#39;t."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1510163733,"post_id":47183550,"comment_id":81322093,"body_markdown":"Indeed even recursively applying the `AnnotatedTypeVariable` processing doesn’t help in that case. The annotation seems to be missing.","body":"Indeed even recursively applying the <code>AnnotatedTypeVariable</code> processing doesn’t help in that case. The annotation seems to be missing."},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1510164711,"post_id":47183550,"comment_id":81322661,"body_markdown":"Its [not the first bug](https://stackoverflow.com/questions/39952812/why-annotation-on-generic-type-argument-is-not-visible-for-nested-type) in JDK8&#39;s annotation processing. I wonder if JDK9 behaves differently.","body":"Its <a href=\"https://stackoverflow.com/questions/39952812/why-annotation-on-generic-type-argument-is-not-visible-for-nested-type\">not the first bug</a> in JDK8&#39;s annotation processing. I wonder if JDK9 behaves differently."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1510166155,"post_id":47183550,"comment_id":81323538,"body_markdown":"At least, I could verify that the information is present in the compiled class file. Java&#160;9 does not show any difference.","body":"At least, I could verify that the information is present in the compiled class file. Java 9 does not show any difference."},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1510166795,"post_id":47183550,"comment_id":81323891,"body_markdown":"I see. Thanks a lot for the extra info! I&#39;ll accept the answer as I&#39;m sure this is as far as one can go.","body":"I see. Thanks a lot for the extra info! I&#39;ll accept the answer as I&#39;m sure this is as far as one can go."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1587362275,"creation_date":1510154832,"answer_id":47183550,"question_id":47175573,"body_markdown":"All type annotations can be retrieved through the `AnnotatedType` hierarchy, except for the `TypeVariable`, whose annotations can be retrieve through `AnnotatedTypeVariable.getType()` which will be an instance of `TypeVariable` which extends `AnnotatedElement` now and happens to be identical with the object returned by `Method.getGenericReturnType()`.\r\n\r\nSo you can retrieve all information, e.g.\r\n\r\n    AnnotatedType art = myMethod.getAnnotatedReturnType();\r\n    System.out.print(\r\n        Arrays.toString(art.getAnnotations())+&quot; &quot;+art.getType().getTypeName()+&quot; -&gt; &quot;);\r\n    final boolean typeVariable = art instanceof AnnotatedTypeVariable;\r\n    if (typeVariable) System.out.print(&#39;&lt;&#39;);\r\n    System.out.print(Arrays.toString(((AnnotatedElement)art.getType()).getAnnotations()) + &quot; &quot;);\r\n    System.out.print(art.getType().getTypeName());\r\n    if (typeVariable) {\r\n        AnnotatedTypeVariable atv = (AnnotatedTypeVariable)art;\r\n        AnnotatedType[] annotatedBounds = atv.getAnnotatedBounds();\r\n        if (annotatedBounds.length &gt; 0) {\r\n            System.out.print(&quot; extends &quot;);\r\n            for (AnnotatedType aBound: annotatedBounds) {\r\n                System.out.print(Arrays.toString(aBound.getAnnotations()) + &quot; &quot;);\r\n                System.out.print(aBound.getType().getTypeName() + &quot;, &quot;);\r\n            }\r\n        }\r\n        System.out.println(&quot;&gt;&quot;);\r\n    }\r\n\r\nwill print\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    [@A3()] S -&gt; &lt;[@A1()] S extends [@A2()] T, &gt;\r\n\r\nWhen your invocation of `((AnnotatedTypeVariable)myMethod.getAnnotatedReturnType()) .getAnnotatedBounds()[0].getAnnotations()` does not provide `@A2`, you should recheck that `A2` truly has `@Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE_USE)`.\r\n\r\nOf course, that’s the “simplified” version handling only your specific method.\r\n\r\nTo handle all possible cases, you will need much more `instanceof`s, dealing with these disjunct type hierarchies of `Type` and `AnnotatedType`, especially when processing annotated parameterized types and annotated generic array types.\r\n\r\nAs said, `TypeVariable` is different, as it extends `AnnotatedElement` and also has the `getAnnotatedBounds()` method. So in this specific case, an alternative way to process the method is\r\n\r\n    List&lt;TypeVariable&lt;?&gt;&gt; typeParameters = Arrays.asList(myMethod.getTypeParameters());\r\n\r\n    for (TypeVariable&lt;?&gt; tv: typeParameters) {\r\n        System.out.print(&quot;&lt; &quot;+Arrays.toString(tv.getAnnotations())+&quot; &quot;+tv.getName());\r\n        AnnotatedType[] annotatedBounds = tv.getAnnotatedBounds();\r\n        if (annotatedBounds.length &gt; 0) {\r\n            System.out.print(&quot; extends &quot;);\r\n            for (AnnotatedType aBound: annotatedBounds) {\r\n                System.out.print(Arrays.toString(aBound.getAnnotations()) + &quot; &quot;);\r\n                System.out.print(aBound.getType().getTypeName() + &quot;, &quot;);\r\n            }\r\n        }\r\n        System.out.print(&quot;&gt; &quot;);\r\n    }\r\n\r\n    AnnotatedType art = myMethod.getAnnotatedReturnType();\r\n    System.out.print(Arrays.toString(art.getAnnotations()) + &quot; &quot;);\r\n    int ix = typeParameters.indexOf(art.getType());\r\n    if (ix &gt;= 0) System.out.print(&quot;[ref to type parameter #&quot; + ix + &quot;] &quot;);\r\n    System.out.println(art.getType().getTypeName());\r\n","title":"How to get TYPE_USE annotations on a generic bound","body":"<p>All type annotations can be retrieved through the <code>AnnotatedType</code> hierarchy, except for the <code>TypeVariable</code>, whose annotations can be retrieve through <code>AnnotatedTypeVariable.getType()</code> which will be an instance of <code>TypeVariable</code> which extends <code>AnnotatedElement</code> now and happens to be identical with the object returned by <code>Method.getGenericReturnType()</code>.</p>\n\n<p>So you can retrieve all information, e.g.</p>\n\n<pre><code>AnnotatedType art = myMethod.getAnnotatedReturnType();\nSystem.out.print(\n    Arrays.toString(art.getAnnotations())+\" \"+art.getType().getTypeName()+\" -&gt; \");\nfinal boolean typeVariable = art instanceof AnnotatedTypeVariable;\nif (typeVariable) System.out.print('&lt;');\nSystem.out.print(Arrays.toString(((AnnotatedElement)art.getType()).getAnnotations()) + \" \");\nSystem.out.print(art.getType().getTypeName());\nif (typeVariable) {\n    AnnotatedTypeVariable atv = (AnnotatedTypeVariable)art;\n    AnnotatedType[] annotatedBounds = atv.getAnnotatedBounds();\n    if (annotatedBounds.length &gt; 0) {\n        System.out.print(\" extends \");\n        for (AnnotatedType aBound: annotatedBounds) {\n            System.out.print(Arrays.toString(aBound.getAnnotations()) + \" \");\n            System.out.print(aBound.getType().getTypeName() + \", \");\n        }\n    }\n    System.out.println(\"&gt;\");\n}\n</code></pre>\n\n<p>will print</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[@A3()] S -&gt; &lt;[@A1()] S extends [@A2()] T, &gt;\n</code></pre>\n\n<p>When your invocation of <code>((AnnotatedTypeVariable)myMethod.getAnnotatedReturnType()) .getAnnotatedBounds()[0].getAnnotations()</code> does not provide <code>@A2</code>, you should recheck that <code>A2</code> truly has <code>@Retention(RetentionPolicy.RUNTIME) @Target(ElementType.TYPE_USE)</code>.</p>\n\n<p>Of course, that’s the “simplified” version handling only your specific method.</p>\n\n<p>To handle all possible cases, you will need much more <code>instanceof</code>s, dealing with these disjunct type hierarchies of <code>Type</code> and <code>AnnotatedType</code>, especially when processing annotated parameterized types and annotated generic array types.</p>\n\n<p>As said, <code>TypeVariable</code> is different, as it extends <code>AnnotatedElement</code> and also has the <code>getAnnotatedBounds()</code> method. So in this specific case, an alternative way to process the method is</p>\n\n<pre><code>List&lt;TypeVariable&lt;?&gt;&gt; typeParameters = Arrays.asList(myMethod.getTypeParameters());\n\nfor (TypeVariable&lt;?&gt; tv: typeParameters) {\n    System.out.print(\"&lt; \"+Arrays.toString(tv.getAnnotations())+\" \"+tv.getName());\n    AnnotatedType[] annotatedBounds = tv.getAnnotatedBounds();\n    if (annotatedBounds.length &gt; 0) {\n        System.out.print(\" extends \");\n        for (AnnotatedType aBound: annotatedBounds) {\n            System.out.print(Arrays.toString(aBound.getAnnotations()) + \" \");\n            System.out.print(aBound.getType().getTypeName() + \", \");\n        }\n    }\n    System.out.print(\"&gt; \");\n}\n\nAnnotatedType art = myMethod.getAnnotatedReturnType();\nSystem.out.print(Arrays.toString(art.getAnnotations()) + \" \");\nint ix = typeParameters.indexOf(art.getType());\nif (ix &gt;= 0) System.out.print(\"[ref to type parameter #\" + ix + \"] \");\nSystem.out.println(art.getType().getTypeName());\n</code></pre>\n"}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1095,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":47183550,"answer_count":1,"score":5,"last_activity_date":1683219434,"creation_date":1510132159,"question_id":47175573,"body_markdown":"I have this case:\r\n\r\n    public class SomeClass&lt;T&gt; {\r\n        public &lt;@A1 S extends @A2 T&gt; @A3 S myMethod() { ...}\r\n    }\r\n\r\nand I&#39;m trying to get the `@A2` annotation on the bound `T`.  \r\nThis is what I&#39;m seeing, assuming `myMethod` is `SomeClass.class.getDeclaredMethod(&quot;myMethod&quot;)`. Type casts removed for readability.\r\n\r\n - `myMethod.getGenericReturnType().getAnnotations()` returns `@A1` (as expected, I guess)\r\n - `myMethod.getGenericReturnType().getBounds()[0].getAnnotations()` returns *nothing* (?? shoudn&#39;t it be `@A2` ??)\r\n - `myMethod.getAnnotatedReturnType().getAnnotations()` returns `@A3` (as expected, I guess)\r\n - `myMethod.getAnnotatedReturnType().getAnnotatedBounds()[0].getAnnotations()` returns *nothing* (as excepted, I guess)\r\n\r\nIt seems like `@A2` got lost... and that doesn&#39;t sound sensible. Am I doing something wrong or is this indeed some bizarre behavior?\r\n\r\nUPDATE:\r\nIt is indeed a JDK bug, which I reported and it got accepted as [JDK-8191466][1]\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=8191466","title":"How to get TYPE_USE annotations on a generic bound","body":"<p>I have this case:</p>\n<pre><code>public class SomeClass&lt;T&gt; {\n    public &lt;@A1 S extends @A2 T&gt; @A3 S myMethod() { ...}\n}\n</code></pre>\n<p>and I'm trying to get the <code>@A2</code> annotation on the bound <code>T</code>.<br />\nThis is what I'm seeing, assuming <code>myMethod</code> is <code>SomeClass.class.getDeclaredMethod(&quot;myMethod&quot;)</code>. Type casts removed for readability.</p>\n<ul>\n<li><code>myMethod.getGenericReturnType().getAnnotations()</code> returns <code>@A1</code> (as expected, I guess)</li>\n<li><code>myMethod.getGenericReturnType().getBounds()[0].getAnnotations()</code> returns <em>nothing</em> (?? shoudn't it be <code>@A2</code> ??)</li>\n<li><code>myMethod.getAnnotatedReturnType().getAnnotations()</code> returns <code>@A3</code> (as expected, I guess)</li>\n<li><code>myMethod.getAnnotatedReturnType().getAnnotatedBounds()[0].getAnnotations()</code> returns <em>nothing</em> (as excepted, I guess)</li>\n</ul>\n<p>It seems like <code>@A2</code> got lost... and that doesn't sound sensible. Am I doing something wrong or is this indeed some bizarre behavior?</p>\n<p>UPDATE:\nIt is indeed a JDK bug, which I reported and it got accepted as <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8191466\" rel=\"nofollow noreferrer\">JDK-8191466</a></p>\n"},{"tags":["java","spring","mongodb"],"comments":[{"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"score":0,"creation_date":1683036262,"post_id":76155590,"comment_id":134302759,"body_markdown":"Update: I tried to change the type of &quot;clicks&quot; and &quot;views&quot; to Float, but it didn&#39;t help.","body":"Update: I tried to change the type of &quot;clicks&quot; and &quot;views&quot; to Float, but it didn&#39;t help."},{"owner":{"account_id":2638471,"reputation":25855,"user_id":2282634,"display_name":"Joe"},"score":1,"creation_date":1683046457,"post_id":76155590,"comment_id":134305330,"body_markdown":"$divide is an aggregation operator, not an update operator.  You may be able to use [update with aggregation pipeline](https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/#updates-with-aggregation-pipeline), but I don&#39;t know how to do that with spring","body":"$divide is an aggregation operator, not an update operator.  You may be able to use <a href=\"https://www.mongodb.com/docs/manual/tutorial/update-documents-with-aggregation-pipeline/#updates-with-aggregation-pipeline\" rel=\"nofollow noreferrer\">update with aggregation pipeline</a>, but I don&#39;t know how to do that with spring"}],"answers":[{"tags":[],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683218996,"creation_date":1683218996,"answer_id":76175579,"question_id":76155590,"body_markdown":"I ended up using the following solution:\r\n\r\n```\r\nMnoCampaignEntity campaign = new MnoCampaignEntity();\r\ncampaign.setClicks(29);\r\ncampaign.setViews(5);\r\ncampaignRepository.save(campaign);\r\n\r\nString query1 = &quot;{$match: {_id: ObjectId(\\&quot;&quot; + campaign.getId() + &quot;\\&quot;)}}&quot;;\r\nString query2 = &quot;{$project: {views: 1, clicks: {$add: [\\&quot;$clicks\\&quot;, 1]}}}&quot;;\r\nString query3 = &quot;{$project: {views: 1, clicks: 1, conversionRate: {$cond: [{$eq: [\\&quot;$views\\&quot;, 0]}, 0, {$divide: [\\&quot;$clicks\\&quot;, \\&quot;$views\\&quot;]}]}}}&quot;;\r\nString query4 = &quot;{$merge: \\&quot;campaigns\\&quot;}&quot;;\r\n\r\nTypedAggregation&lt;MnoCampaignEntity&gt; aggregation = Aggregation.newAggregation(\r\n    MnoCampaignEntity.class,\r\n    new CustomAggregationOperation(query1),\r\n    new CustomAggregationOperation(query2),\r\n    new CustomAggregationOperation(query3),\r\n    new CustomAggregationOperation(query4)\r\n);\r\n\r\nmongoTemplate.aggregate(aggregation.withOptions(new AggregationOptions.Builder()\r\n    .skipOutput()\r\n    .allowDiskUse(true)\r\n    .build()),\r\n    &quot;campaigns&quot;, MnoCampaignEntity.class);\r\n\r\nCampaignEntity updated = campaignService.findById(campaign.getId().toString());\r\nSystem.out.println(&quot;CONVERSION RATE: &quot; + updated.getConversionRate());\r\n```\r\n\r\nNote: the CustomAggregationOperation class is from [this SO answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59726492/50335","title":"Why is this mongodb search failing in Spring application?","body":"<p>I ended up using the following solution:</p>\n<pre><code>MnoCampaignEntity campaign = new MnoCampaignEntity();\ncampaign.setClicks(29);\ncampaign.setViews(5);\ncampaignRepository.save(campaign);\n\nString query1 = &quot;{$match: {_id: ObjectId(\\&quot;&quot; + campaign.getId() + &quot;\\&quot;)}}&quot;;\nString query2 = &quot;{$project: {views: 1, clicks: {$add: [\\&quot;$clicks\\&quot;, 1]}}}&quot;;\nString query3 = &quot;{$project: {views: 1, clicks: 1, conversionRate: {$cond: [{$eq: [\\&quot;$views\\&quot;, 0]}, 0, {$divide: [\\&quot;$clicks\\&quot;, \\&quot;$views\\&quot;]}]}}}&quot;;\nString query4 = &quot;{$merge: \\&quot;campaigns\\&quot;}&quot;;\n\nTypedAggregation&lt;MnoCampaignEntity&gt; aggregation = Aggregation.newAggregation(\n    MnoCampaignEntity.class,\n    new CustomAggregationOperation(query1),\n    new CustomAggregationOperation(query2),\n    new CustomAggregationOperation(query3),\n    new CustomAggregationOperation(query4)\n);\n\nmongoTemplate.aggregate(aggregation.withOptions(new AggregationOptions.Builder()\n    .skipOutput()\n    .allowDiskUse(true)\n    .build()),\n    &quot;campaigns&quot;, MnoCampaignEntity.class);\n\nCampaignEntity updated = campaignService.findById(campaign.getId().toString());\nSystem.out.println(&quot;CONVERSION RATE: &quot; + updated.getConversionRate());\n</code></pre>\n<p>Note: the CustomAggregationOperation class is from <a href=\"https://stackoverflow.com/a/59726492/50335\">this SO answer</a>.</p>\n"}],"owner":{"account_id":20889,"reputation":15799,"user_id":50335,"accept_rate":84,"display_name":"Ariel Malka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76175579,"answer_count":1,"score":1,"last_activity_date":1683218996,"creation_date":1683035704,"question_id":76155590,"body_markdown":"I&#39;m doing the following search with mongodb in a Spring application:\r\n\r\n```\r\nimport org.bson.Document;\r\nimport org.bson.types.ObjectId;\r\nimport org.springframework.data.mongodb.core.FindAndModifyOptions;\r\nimport org.springframework.data.mongodb.core.MongoTemplate;\r\nimport org.springframework.data.mongodb.core.query.Criteria;\r\nimport org.springframework.data.mongodb.core.query.Query;\r\nimport org.springframework.data.mongodb.core.query.Update;\r\n\r\nprivate CampaignEntity incrByWithConversionRate(ObjectId campaignId, String key) {\r\n    Query query = new Query();\r\n    query.addCriteria(Criteria.where(&quot;id&quot;).is(campaignId));\r\n\r\n    Update update = new Update();\r\n    update.inc(key);\r\n    update.set(&quot;conversionRate&quot;, new Document(&quot;$divide&quot;, Arrays.asList(&quot;$clicks&quot;, &quot;$views&quot;)));\r\n\r\n    return mongoTemplate.findAndModify(\r\n        query, update,\r\n        new FindAndModifyOptions().returnNew(true), CampaignEntity.class);\r\n}\r\n```\r\n\r\nThe problem is that it fails with the following error:\r\n```\r\norg.springframework.data.mapping.MappingException: Expected to read Document Document{{$divide=[$clicks, $views]}} into type class java.lang.Float but didn&#39;t find a PersistentEntity for the latter!\r\n```\r\n\r\nNote: The CampaignEntity class is defined as follows:\r\n```\r\n@Data\r\n@Document(collection = &quot;campaigns&quot;)\r\npublic abstract class CampaignEntity extends BaseEntity {\r\n    private Integer clicks = 0;\r\n    private Integer views = 0;\r\n    private Float conversionRate;\r\n}\r\n```","title":"Why is this mongodb search failing in Spring application?","body":"<p>I'm doing the following search with mongodb in a Spring application:</p>\n<pre><code>import org.bson.Document;\nimport org.bson.types.ObjectId;\nimport org.springframework.data.mongodb.core.FindAndModifyOptions;\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.query.Update;\n\nprivate CampaignEntity incrByWithConversionRate(ObjectId campaignId, String key) {\n    Query query = new Query();\n    query.addCriteria(Criteria.where(&quot;id&quot;).is(campaignId));\n\n    Update update = new Update();\n    update.inc(key);\n    update.set(&quot;conversionRate&quot;, new Document(&quot;$divide&quot;, Arrays.asList(&quot;$clicks&quot;, &quot;$views&quot;)));\n\n    return mongoTemplate.findAndModify(\n        query, update,\n        new FindAndModifyOptions().returnNew(true), CampaignEntity.class);\n}\n</code></pre>\n<p>The problem is that it fails with the following error:</p>\n<pre><code>org.springframework.data.mapping.MappingException: Expected to read Document Document{{$divide=[$clicks, $views]}} into type class java.lang.Float but didn't find a PersistentEntity for the latter!\n</code></pre>\n<p>Note: The CampaignEntity class is defined as follows:</p>\n<pre><code>@Data\n@Document(collection = &quot;campaigns&quot;)\npublic abstract class CampaignEntity extends BaseEntity {\n    private Integer clicks = 0;\n    private Integer views = 0;\n    private Float conversionRate;\n}\n</code></pre>\n"},{"tags":["java","arrays","backwards-compatibility","variadic-functions"],"comments":[{"owner":{"account_id":89739,"reputation":1020,"user_id":247413,"display_name":"kamasheto"},"score":8,"creation_date":1275000451,"post_id":2925153,"comment_id":2978610,"body_markdown":"I can&#39;t help but wonder why this question is a &quot;is this valid&quot; kind of question. Couldn&#39;t you have just tried it? Don&#39;t overdo asking, you&#39;ll do yourself more harm than good.","body":"I can&#39;t help but wonder why this question is a &quot;is this valid&quot; kind of question. Couldn&#39;t you have just tried it? Don&#39;t overdo asking, you&#39;ll do yourself more harm than good."},{"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"score":39,"creation_date":1275022547,"post_id":2925153,"comment_id":2979844,"body_markdown":"true enough, this could have been easily tested. however, the nice thing about a question like this is that it exposes the topic and solicits interesting answers.","body":"true enough, this could have been easily tested. however, the nice thing about a question like this is that it exposes the topic and solicits interesting answers."},{"owner":{"account_id":143786,"reputation":3994,"user_id":352382,"display_name":"user362382"},"score":4,"creation_date":1275034932,"post_id":2925153,"comment_id":2980800,"body_markdown":"I actually tried the code above, with the intention to pass the array args as arguments to the method. However, I didn&#39;t realize that I should&#39;ve prepended extraVar to args first. When you know that variable arguments are treated as an array (even outside the method), this is of course quite logical.","body":"I actually tried the code above, with the intention to pass the array args as arguments to the method. However, I didn&#39;t realize that I should&#39;ve prepended extraVar to args first. When you know that variable arguments are treated as an array (even outside the method), this is of course quite logical."}],"answers":[{"comments":[{"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"score":6,"creation_date":1587506800,"post_id":2925300,"comment_id":108538477,"body_markdown":"Passing an argument of type `X[]` into a method `x(X... xs)` gives the following warning in Eclipse: `Type X[] of the last argument to method x(X...) doesn&#39;t exactly match the vararg parameter type. Cast to X[] to confirm the non-varargs invocation, or pass individual arguments of type X for a varargs invocation.`","body":"Passing an argument of type <code>X[]</code> into a method <code>x(X... xs)</code> gives the following warning in Eclipse: <code>Type X[] of the last argument to method x(X...) doesn&#39;t exactly match the vararg parameter type. Cast to X[] to confirm the non-varargs invocation, or pass individual arguments of type X for a varargs invocation.</code>"}],"tags":[],"owner":{"account_id":60189,"reputation":6759,"user_id":179878,"display_name":"jasonmp85"},"comment_count":1,"down_vote_count":1,"up_vote_count":209,"is_accepted":true,"score":208,"last_activity_date":1613019484,"creation_date":1274997521,"answer_id":2925300,"question_id":2925153,"body_markdown":"The underlying type of a [variadic][1] method `function(Object... args)` *is* `function(Object[] args)`. Sun added varargs in this manner to preserve backwards compatibility.\r\n\r\nSo you should just be able to prepend `extraVar` to `args` and call `String.format(format, args)`.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Variadic","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>The underlying type of a <a href=\"https://en.wikipedia.org/wiki/Variadic\" rel=\"noreferrer\">variadic</a> method <code>function(Object... args)</code> <em>is</em> <code>function(Object[] args)</code>. Sun added varargs in this manner to preserve backwards compatibility.</p>\n<p>So you should just be able to prepend <code>extraVar</code> to <code>args</code> and call <code>String.format(format, args)</code>.</p>\n"},{"tags":[],"owner":{"account_id":128551,"reputation":57229,"user_id":326480,"accept_rate":82,"display_name":"mdma"},"comment_count":0,"down_vote_count":2,"up_vote_count":32,"is_accepted":false,"score":30,"last_activity_date":1274998667,"creation_date":1274997628,"answer_id":2925314,"question_id":2925153,"body_markdown":"It&#39;s ok to pass an array - in fact it amounts to the same thing\r\n\r\n    String.format(&quot;%s %s&quot;, &quot;hello&quot;, &quot;world!&quot;);\r\n\r\nis the same as\r\n\r\n    String.format(&quot;%s %s&quot;, new Object[] { &quot;hello&quot;, &quot;world!&quot;});\r\n\r\nIt&#39;s just syntactic sugar - the compiler converts the first one into the second, since the underlying method is expecting an array for the [vararg][1] parameter.\r\n\r\nSee\r\n\r\n- [Varargs - J2SE 1.5 Documentation][2]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>It's ok to pass an array - in fact it amounts to the same thing</p>\n\n<pre><code>String.format(\"%s %s\", \"hello\", \"world!\");\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>String.format(\"%s %s\", new Object[] { \"hello\", \"world!\"});\n</code></pre>\n\n<p>It's just syntactic sugar - the compiler converts the first one into the second, since the underlying method is expecting an array for the <a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">vararg</a> parameter.</p>\n\n<p>See</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">Varargs - J2SE 1.5 Documentation</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":143232,"reputation":1187,"user_id":351427,"display_name":"ebelisle"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1394656577,"creation_date":1275020383,"answer_id":2926621,"question_id":2925153,"body_markdown":"jasonmp85 is right about passing a different array to `String.format`. The size of an array can&#39;t be changed once constructed, so you&#39;d have to pass a new array instead of modifying the existing one.\r\n\r\n    Object newArgs = new Object[args.length+1];\r\n    System.arraycopy(args, 0, newArgs, 1, args.length);\r\n    newArgs[0] = extraVar; \r\n    String.format(format, extraVar, args);","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>jasonmp85 is right about passing a different array to <code>String.format</code>. The size of an array can't be changed once constructed, so you'd have to pass a new array instead of modifying the existing one.</p>\n\n<pre><code>Object newArgs = new Object[args.length+1];\nSystem.arraycopy(args, 0, newArgs, 1, args.length);\nnewArgs[0] = extraVar; \nString.format(format, extraVar, args);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29800,"reputation":1196,"user_id":80772,"display_name":"eel ghEEz"},"score":2,"creation_date":1429596278,"post_id":2926653,"comment_id":47659893,"body_markdown":"Using Object... variadic parameters makes it difficult to use additional signatures as the compiler identifies ambiguity between the signatures where even a primitive argument can be autoboxed to Object.","body":"Using Object... variadic parameters makes it difficult to use additional signatures as the compiler identifies ambiguity between the signatures where even a primitive argument can be autoboxed to Object."},{"owner":{"account_id":355044,"reputation":37880,"user_id":693752,"accept_rate":63,"display_name":"Snicolas"},"score":9,"creation_date":1453160135,"post_id":2926653,"comment_id":57471368,"body_markdown":"There is a missing gotcha : if your method has a last param of type Object... and you call it passing a String[] for instance. The compiler doesn&#39;t know if your array is the first item of the varargs or is the equivalent of all the varargs. It will warn you.","body":"There is a missing gotcha : if your method has a last param of type Object... and you call it passing a String[] for instance. The compiler doesn&#39;t know if your array is the first item of the varargs or is the equivalent of all the varargs. It will warn you."},{"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"score":0,"creation_date":1587506780,"post_id":2926653,"comment_id":108538471,"body_markdown":"Passing an argument of type `X[]` into a method `x(X... xs)` gives the following warning in Eclipse: `Type X[] of the last argument to method x(X...) doesn&#39;t exactly match the vararg parameter type. Cast to X[] to confirm the non-varargs invocation, or pass individual arguments of type X for a varargs invocation.`","body":"Passing an argument of type <code>X[]</code> into a method <code>x(X... xs)</code> gives the following warning in Eclipse: <code>Type X[] of the last argument to method x(X...) doesn&#39;t exactly match the vararg parameter type. Cast to X[] to confirm the non-varargs invocation, or pass individual arguments of type X for a varargs invocation.</code>"},{"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1600980365,"post_id":2926653,"comment_id":113269117,"body_markdown":"returning X[] to a method that that takes(X ... xs) ... i doubt it will be expanded.","body":"returning X[] to a method that that takes(X ... xs) ... i doubt it will be expanded."},{"owner":{"account_id":4234133,"reputation":323,"user_id":3465795,"display_name":"Steve T"},"score":0,"creation_date":1612884729,"post_id":2926653,"comment_id":116902029,"body_markdown":"Is there a convenience method in StringUtils that can handle gotcha #2, without having to add all the elements to a single input array argument?  For instance: StringUtils.format(formatString, argArray, extraElement)","body":"Is there a convenience method in StringUtils that can handle gotcha #2, without having to add all the elements to a single input array argument?  For instance: StringUtils.format(formatString, argArray, extraElement)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686039893,"post_id":2926653,"comment_id":134740896,"body_markdown":"I suggests replacing `new String(new char[args.length]) .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;)` with `&quot;[ %s ]&quot;.repeat(args.length)` which works since Java&#160;11, as the work-around is distracting from the actual point of the example.","body":"I suggests replacing <code>new String(new char[args.length]) .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;)</code> with <code>&quot;[ %s ]&quot;.repeat(args.length)</code> which works since Java 11, as the work-around is distracting from the actual point of the example."}],"tags":[],"owner":{"account_id":102991,"reputation":378292,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"comment_count":6,"down_vote_count":1,"up_vote_count":385,"is_accepted":false,"score":384,"last_activity_date":1481805398,"creation_date":1275021129,"answer_id":2926653,"question_id":2925153,"body_markdown":"Yes, a `T...` is only a syntactic sugar for a `T[]`.\n\n### [JLS 8.4.1 Format parameters][1]\n\n&gt; The last formal parameter in a list is special; it may be a _variable arity_ parameter, indicated by an elipsis following the type.\n&gt;\n&gt; If the last formal parameter is a variable arity parameter of type `T`, it is considered to define a formal parameter of type `T[]`. The method is then a _variable arity_ method. Otherwise, it is a _fixed arity_ method. Invocations of a variable arity method may contain more actual argument expressions than formal parameters. All the actual argument expressions that do not correspond to the formal parameters preceding the variable arity parameter will be evaluated and the results stored into an array that will be passed to the method invocation.\n\nHere&#39;s an example to illustrate:\n\n    public static String ezFormat(Object... args) {\n        String format = new String(new char[args.length])\n            .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;);\n        return String.format(format, args);\n    }\n    public static void main(String... args) {\n        System.out.println(ezFormat(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\n        // prints &quot;[ A ][ B ][ C ]&quot;\n    }\n\nAnd yes, the above `main` method is valid, because again, `String...` is just `String[]`. Also, because arrays are covariant, a `String[]` is an `Object[]`, so you can also call `ezFormat(args)` either way.\n\n### See also\n\n* [Java language guide/varargs](http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html)\n\n---\n\n### Varargs gotchas #1: passing `null`\n\nHow varargs are resolved is quite complicated, and sometimes it does things that may surprise you.\n\nConsider this example:\n\n    static void count(Object... objs) {\n        System.out.println(objs.length);\n    }\n\n    count(null, null, null); // prints &quot;3&quot;\n    count(null, null); // prints &quot;2&quot;\n    count(null); // throws java.lang.NullPointerException!!!\n\nDue to how varargs are resolved, the last statement invokes with `objs = null`, which of course would cause `NullPointerException` with `objs.length`. If you want to give one `null` argument to a varargs parameter, you can do either of the following:\n\n    count(new Object[] { null }); // prints &quot;1&quot;\n    count((Object) null); // prints &quot;1&quot;\n\n### Related questions\n\nThe following is a sample of some of the questions people have asked when dealing with varargs:\n\n* [bug with varargs and overloading?](https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading)\n* [How to work with varargs and reflection](https://stackoverflow.com/questions/2600854/how-to-work-with-varargs-and-reflection)\n* [Most specific method with matches of both fixed/variable arity (varargs)](https://stackoverflow.com/questions/1321657/most-specific-method-with-matches-of-both-fixed-variable-arity-varargs)\n\n---\n\n### Vararg gotchas #2: adding extra arguments\n\nAs you&#39;ve found out, the following doesn&#39;t &quot;work&quot;:\n\n        String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n        System.out.println(ezFormat(myArgs, &quot;Z&quot;));\n        // prints &quot;[ [Ljava.lang.String;@13c5982 ][ Z ]&quot;\n\nBecause of the way varargs work, `ezFormat` actually gets 2 arguments, the first being a `String[]`, the second being a `String`. If you&#39;re passing an array to varargs, and you want its elements to be recognized as individual arguments, and you also need to add an extra argument, then you have no choice but to create _another array_ that accommodates the extra element.\n\nHere are some useful helper methods:\n\n    static &lt;T&gt; T[] append(T[] arr, T lastElement) {\n        final int N = arr.length;\n        arr = java.util.Arrays.copyOf(arr, N+1);\n        arr[N] = lastElement;\n        return arr;\n    }\n    static &lt;T&gt; T[] prepend(T[] arr, T firstElement) {\n        final int N = arr.length;\n        arr = java.util.Arrays.copyOf(arr, N+1);\n        System.arraycopy(arr, 0, arr, 1, N);\n        arr[0] = firstElement;\n        return arr;\n    }\n\nNow you can do the following:\n\n        String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n        System.out.println(ezFormat(append(myArgs, &quot;Z&quot;)));\n        // prints &quot;[ A ][ B ][ C ][ Z ]&quot;\n\n        System.out.println(ezFormat(prepend(myArgs, &quot;Z&quot;)));\n        // prints &quot;[ Z ][ A ][ B ][ C ]&quot;\n\n---\n\n### Varargs gotchas #3: passing an array of primitives\n\nIt doesn&#39;t &quot;work&quot;:\n\n        int[] myNumbers = { 1, 2, 3 };\n        System.out.println(ezFormat(myNumbers));\n        // prints &quot;[ [I@13c5982 ]&quot;\n\nVarargs only works with reference types. Autoboxing does not apply to array of primitives. The following works:\n\n        Integer[] myNumbers = { 1, 2, 3 };\n        System.out.println(ezFormat(myNumbers));\n        // prints &quot;[ 1 ][ 2 ][ 3 ]&quot;\n\n\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>Yes, a <code>T...</code> is only a syntactic sugar for a <code>T[]</code>.</p>\n<h3><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1\" rel=\"noreferrer\">JLS 8.4.1 Format parameters</a></h3>\n<blockquote>\n<p>The last formal parameter in a list is special; it may be a <em>variable arity</em> parameter, indicated by an elipsis following the type.</p>\n<p>If the last formal parameter is a variable arity parameter of type <code>T</code>, it is considered to define a formal parameter of type <code>T[]</code>. The method is then a <em>variable arity</em> method. Otherwise, it is a <em>fixed arity</em> method. Invocations of a variable arity method may contain more actual argument expressions than formal parameters. All the actual argument expressions that do not correspond to the formal parameters preceding the variable arity parameter will be evaluated and the results stored into an array that will be passed to the method invocation.</p>\n</blockquote>\n<p>Here's an example to illustrate:</p>\n<pre><code>public static String ezFormat(Object... args) {\n    String format = new String(new char[args.length])\n        .replace(&quot;\\0&quot;, &quot;[ %s ]&quot;);\n    return String.format(format, args);\n}\npublic static void main(String... args) {\n    System.out.println(ezFormat(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;));\n    // prints &quot;[ A ][ B ][ C ]&quot;\n}\n</code></pre>\n<p>And yes, the above <code>main</code> method is valid, because again, <code>String...</code> is just <code>String[]</code>. Also, because arrays are covariant, a <code>String[]</code> is an <code>Object[]</code>, so you can also call <code>ezFormat(args)</code> either way.</p>\n<h3>See also</h3>\n<ul>\n<li><a href=\"http://java.sun.com/j2se/1.5.0/docs/guide/language/varargs.html\" rel=\"noreferrer\">Java language guide/varargs</a></li>\n</ul>\n<hr />\n<h3>Varargs gotchas #1: passing <code>null</code></h3>\n<p>How varargs are resolved is quite complicated, and sometimes it does things that may surprise you.</p>\n<p>Consider this example:</p>\n<pre><code>static void count(Object... objs) {\n    System.out.println(objs.length);\n}\n\ncount(null, null, null); // prints &quot;3&quot;\ncount(null, null); // prints &quot;2&quot;\ncount(null); // throws java.lang.NullPointerException!!!\n</code></pre>\n<p>Due to how varargs are resolved, the last statement invokes with <code>objs = null</code>, which of course would cause <code>NullPointerException</code> with <code>objs.length</code>. If you want to give one <code>null</code> argument to a varargs parameter, you can do either of the following:</p>\n<pre><code>count(new Object[] { null }); // prints &quot;1&quot;\ncount((Object) null); // prints &quot;1&quot;\n</code></pre>\n<h3>Related questions</h3>\n<p>The following is a sample of some of the questions people have asked when dealing with varargs:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading\">bug with varargs and overloading?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2600854/how-to-work-with-varargs-and-reflection\">How to work with varargs and reflection</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1321657/most-specific-method-with-matches-of-both-fixed-variable-arity-varargs\">Most specific method with matches of both fixed/variable arity (varargs)</a></li>\n</ul>\n<hr />\n<h3>Vararg gotchas #2: adding extra arguments</h3>\n<p>As you've found out, the following doesn't &quot;work&quot;:</p>\n<pre><code>    String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n    System.out.println(ezFormat(myArgs, &quot;Z&quot;));\n    // prints &quot;[ [Ljava.lang.String;@13c5982 ][ Z ]&quot;\n</code></pre>\n<p>Because of the way varargs work, <code>ezFormat</code> actually gets 2 arguments, the first being a <code>String[]</code>, the second being a <code>String</code>. If you're passing an array to varargs, and you want its elements to be recognized as individual arguments, and you also need to add an extra argument, then you have no choice but to create <em>another array</em> that accommodates the extra element.</p>\n<p>Here are some useful helper methods:</p>\n<pre><code>static &lt;T&gt; T[] append(T[] arr, T lastElement) {\n    final int N = arr.length;\n    arr = java.util.Arrays.copyOf(arr, N+1);\n    arr[N] = lastElement;\n    return arr;\n}\nstatic &lt;T&gt; T[] prepend(T[] arr, T firstElement) {\n    final int N = arr.length;\n    arr = java.util.Arrays.copyOf(arr, N+1);\n    System.arraycopy(arr, 0, arr, 1, N);\n    arr[0] = firstElement;\n    return arr;\n}\n</code></pre>\n<p>Now you can do the following:</p>\n<pre><code>    String[] myArgs = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\n    System.out.println(ezFormat(append(myArgs, &quot;Z&quot;)));\n    // prints &quot;[ A ][ B ][ C ][ Z ]&quot;\n\n    System.out.println(ezFormat(prepend(myArgs, &quot;Z&quot;)));\n    // prints &quot;[ Z ][ A ][ B ][ C ]&quot;\n</code></pre>\n<hr />\n<h3>Varargs gotchas #3: passing an array of primitives</h3>\n<p>It doesn't &quot;work&quot;:</p>\n<pre><code>    int[] myNumbers = { 1, 2, 3 };\n    System.out.println(ezFormat(myNumbers));\n    // prints &quot;[ [I@13c5982 ]&quot;\n</code></pre>\n<p>Varargs only works with reference types. Autoboxing does not apply to array of primitives. The following works:</p>\n<pre><code>    Integer[] myNumbers = { 1, 2, 3 };\n    System.out.println(ezFormat(myNumbers));\n    // prints &quot;[ 1 ][ 2 ][ 3 ]&quot;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10177931,"reputation":1796,"user_id":7699452,"accept_rate":78,"display_name":"Mathews Sunny"},"score":4,"creation_date":1513691922,"post_id":47888502,"comment_id":82743116,"body_markdown":"Please add that too.","body":"Please add that too."}],"tags":[],"owner":{"account_id":4995710,"reputation":51,"user_id":4888072,"display_name":"Srijit Paul"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513691562,"creation_date":1513691562,"answer_id":47888502,"question_id":2925153,"body_markdown":"I was having same issue.\r\n\r\n    String[] arr= new String[] { &quot;A&quot;, &quot;B&quot;, &quot;C&quot; };\r\n    Object obj = arr;\r\n\r\nAnd then passed the obj as varargs argument.\r\nIt worked.","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>I was having same issue.</p>\n\n<pre><code>String[] arr= new String[] { \"A\", \"B\", \"C\" };\nObject obj = arr;\n</code></pre>\n\n<p>And then passed the obj as varargs argument.\nIt worked.</p>\n"},{"tags":[],"owner":{"account_id":7072149,"reputation":91,"user_id":5413405,"display_name":"fozzybear"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683218662,"creation_date":1683218662,"answer_id":76175523,"question_id":2925153,"body_markdown":"In addition to #2 of @genelubricant - in case read-only is enough and if you want to swap a little extra effort for gaining some of the conveniences of a `List` - copying the array is not necessarily required and wrapping it, plus injecting the desired extra value at an arbitrary index at access time, can be achieved like this:\r\n\r\n    public static &lt;T&gt; List&lt;Object&gt; wrappedUnmodfiableListInsertion(final T insert, final Integer insertIdx, final T... source) {\r\n      final boolean isInsertion = insertIdx != null;\r\n      return new AbstractList&lt;Object&gt;() {\r\n        @Override\r\n        public int size() {\r\n          return source != null ? isInsertion ? source.length + 1 : source.length : 0;\r\n        }\r\n        @Override\r\n        public Object get(int index) {\r\n          if (source == null) {\r\n            if (isInsertion) {\r\n              return index == insertIdx &amp;&amp; index == 0 ? insert : null;\r\n            }\r\n            return EMPTY_LIST;\r\n          } \r\n          if (isInsertion) {\r\n            if (index == insertIdx) {\r\n              return insert;\r\n            } \r\n            return source[insertIdx &gt; index ? index : index - 1];\r\n          }\r\n          return source[index];\r\n        }\r\n      };\r\n    }","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>In addition to #2 of @genelubricant - in case read-only is enough and if you want to swap a little extra effort for gaining some of the conveniences of a <code>List</code> - copying the array is not necessarily required and wrapping it, plus injecting the desired extra value at an arbitrary index at access time, can be achieved like this:</p>\n<pre><code>public static &lt;T&gt; List&lt;Object&gt; wrappedUnmodfiableListInsertion(final T insert, final Integer insertIdx, final T... source) {\n  final boolean isInsertion = insertIdx != null;\n  return new AbstractList&lt;Object&gt;() {\n    @Override\n    public int size() {\n      return source != null ? isInsertion ? source.length + 1 : source.length : 0;\n    }\n    @Override\n    public Object get(int index) {\n      if (source == null) {\n        if (isInsertion) {\n          return index == insertIdx &amp;&amp; index == 0 ? insert : null;\n        }\n        return EMPTY_LIST;\n      } \n      if (isInsertion) {\n        if (index == insertIdx) {\n          return insert;\n        } \n        return source[insertIdx &gt; index ? index : index - 1];\n      }\n      return source[index];\n    }\n  };\n}\n</code></pre>\n"}],"owner":{"account_id":143786,"reputation":3994,"user_id":352382,"display_name":"user362382"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":297985,"favorite_count":0,"down_vote_count":1,"up_vote_count":365,"accepted_answer_id":2925300,"answer_count":6,"score":364,"last_activity_date":1683218662,"creation_date":1274996198,"question_id":2925153,"body_markdown":"I&#39;d like to be able to create a function like:\r\n\r\n    class A {\r\n      private String extraVar;\r\n      public String myFormat(String format, Object ... args){\r\n        return String.format(format, extraVar, args);\r\n      }\r\n    }\r\n\r\nThe problem here is that `args` is treated as `Object[]` in the method `myFormat`, and thus is a single argument to `String.format`, while I&#39;d like every single `Object` in `args` to be passed as a new argument. Since `String.format` is also a method with variable arguments, this should be possible.\r\n\r\nIf this is not possible, is there a method like `String.format(String format, Object[] args)`? In that case I could prepend `extraVar` to `args` using a new array and pass it to that method.\r\n","title":"Can I pass an array as arguments to a method with variable arguments in Java?","body":"<p>I'd like to be able to create a function like:</p>\n\n<pre><code>class A {\n  private String extraVar;\n  public String myFormat(String format, Object ... args){\n    return String.format(format, extraVar, args);\n  }\n}\n</code></pre>\n\n<p>The problem here is that <code>args</code> is treated as <code>Object[]</code> in the method <code>myFormat</code>, and thus is a single argument to <code>String.format</code>, while I'd like every single <code>Object</code> in <code>args</code> to be passed as a new argument. Since <code>String.format</code> is also a method with variable arguments, this should be possible.</p>\n\n<p>If this is not possible, is there a method like <code>String.format(String format, Object[] args)</code>? In that case I could prepend <code>extraVar</code> to <code>args</code> using a new array and pass it to that method.</p>\n"},{"tags":["java","multithreading","asynchronous","executorservice","executor"],"comments":[{"owner":{"account_id":5652874,"reputation":5552,"user_id":4472840,"accept_rate":83,"display_name":"Yosef Weiner"},"score":16,"creation_date":1435430397,"post_id":31092067,"comment_id":50200875,"body_markdown":"The idea is that you would submit multiple tasks and then wait. You are right that if you wait for the result in between submitting each task, then they will be processed in serial and you won&#39;t gain anything.","body":"The idea is that you would submit multiple tasks and then wait. You are right that if you wait for the result in between submitting each task, then they will be processed in serial and you won&#39;t gain anything."},{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":2,"creation_date":1435430653,"post_id":31092067,"comment_id":50200961,"body_markdown":"@SkinnyJ If multiple tasks are submitted, how do you know the result returned is for which task? And how do i wait for multiple tasks?","body":"@SkinnyJ If multiple tasks are submitted, how do you know the result returned is for which task? And how do i wait for multiple tasks?"},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":3,"creation_date":1435430848,"post_id":31092067,"comment_id":50201005,"body_markdown":"@VishalP You will then have list of Futures which you could check with isDone() or fetch result with get()","body":"@VishalP You will then have list of Futures which you could check with isDone() or fetch result with get()"},{"owner":{"account_id":5652874,"reputation":5552,"user_id":4472840,"accept_rate":83,"display_name":"Yosef Weiner"},"score":2,"creation_date":1435432245,"post_id":31092067,"comment_id":50201435,"body_markdown":"The simplest is to use [invokeAll](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)). Otherwise, you can keep track of each future as you submit its Callable, and get the results one after the other. Either way, the processing is happening in parallel.","body":"The simplest is to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#invokeAll(java.util.Collection)\" rel=\"nofollow noreferrer\">invokeAll</a>. Otherwise, you can keep track of each future as you submit its Callable, and get the results one after the other. Either way, the processing is happening in parallel."},{"owner":{"account_id":4032106,"reputation":16084,"user_id":3317808,"accept_rate":54,"display_name":"overexchange"},"score":0,"creation_date":1509613210,"post_id":31092067,"comment_id":81090410,"body_markdown":"@TheMonk What made you you accept the answer? Is it because observer pattern is the solution to wait asynchronously?","body":"@TheMonk What made you you accept the answer? Is it because observer pattern is the solution to wait asynchronously?"},{"owner":{"account_id":184631,"reputation":4733,"user_id":420803,"accept_rate":65,"display_name":"Enrique"},"score":7,"creation_date":1531354192,"post_id":31092067,"comment_id":89568869,"body_markdown":"The important thing is that &quot;get&quot; is not starting the execution, &quot;submit&quot; is, get is only &quot;waiting&quot; the result. So we could start multiple tasks (multiple executors) and then use get on every one. In that way all the executors will run in parallel. If you can continue without the result instead of get you could use the Observer pattern","body":"The important thing is that &quot;get&quot; is not starting the execution, &quot;submit&quot; is, get is only &quot;waiting&quot; the result. So we could start multiple tasks (multiple executors) and then use get on every one. In that way all the executors will run in parallel. If you can continue without the result instead of get you could use the Observer pattern"},{"owner":{"account_id":3053810,"reputation":403,"user_id":2587883,"accept_rate":0,"display_name":"Bishnu"},"score":0,"creation_date":1600669312,"post_id":31092067,"comment_id":113148537,"body_markdown":"I was wondering how get(..) would be working, but looking at the source code it just yields the processor for a preemption but literally doesn&#39;t release thread in the worst case. Anyone has worked with C++ (or other langs) which supports non-blocking wait with timeout feature","body":"I was wondering how get(..) would be working, but looking at the source code it just yields the processor for a preemption but literally doesn&#39;t release thread in the worst case. Anyone has worked with C++ (or other langs) which supports non-blocking wait with timeout feature"}],"answers":[{"comments":[{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":20,"creation_date":1435430796,"post_id":31092208,"comment_id":50200990,"body_markdown":"But then you still wait in a loop checking isDone(), isn&#39;t this blocking as well?","body":"But then you still wait in a loop checking isDone(), isn&#39;t this blocking as well?"},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":2,"creation_date":1435431102,"post_id":31092208,"comment_id":50201090,"body_markdown":"This entirely depends on your design. You don&#39;t have to. For example you could have one thread dispatching events as they come into system, and also periodically check for result. In this scenario checking for results if they are not ready would not block and thread could continue with dispatching events. There are many patterns which could be used here to avoid blocking. Check Observer Pattern which could be used to notify of result, also Active Object Pattern and Half Sync - Half Async, Publish Subscribe. Try to read up a bit on these patterns to get idea how to use asynchronous programming.","body":"This entirely depends on your design. You don&#39;t have to. For example you could have one thread dispatching events as they come into system, and also periodically check for result. In this scenario checking for results if they are not ready would not block and thread could continue with dispatching events. There are many patterns which could be used here to avoid blocking. Check Observer Pattern which could be used to notify of result, also Active Object Pattern and Half Sync - Half Async, Publish Subscribe. Try to read up a bit on these patterns to get idea how to use asynchronous programming."},{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":7,"creation_date":1435431251,"post_id":31092208,"comment_id":50201138,"body_markdown":"You are right. But I still wonder if  this is made unnecessarily complex. An out of the box listener solution would have been very handy.","body":"You are right. But I still wonder if  this is made unnecessarily complex. An out of the box listener solution would have been very handy."},{"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"score":3,"creation_date":1435431354,"post_id":31092208,"comment_id":50201163,"body_markdown":"This Listener would most likely be Observer in a simple Observer Pattern. You can probably figure that one in 20 minutes  on your own:) This might be helpful : http://www.tutorialspoint.com/design_pattern/observer_pattern.htm","body":"This Listener would most likely be Observer in a simple Observer Pattern. You can probably figure that one in 20 minutes  on your own:) This might be helpful : <a href=\"http://www.tutorialspoint.com/design_pattern/observer_pattern.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/design_pattern/observer_pattern.htm</a>"},{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":0,"creation_date":1435431410,"post_id":31092208,"comment_id":50201187,"body_markdown":"sure thnx a ton for the valuable info. Very much appreciated :)","body":"sure thnx a ton for the valuable info. Very much appreciated :)"},{"owner":{"account_id":3483018,"reputation":383,"user_id":2914579,"display_name":"Dheeru Mundluru"},"score":0,"creation_date":1466689169,"post_id":31092208,"comment_id":63430214,"body_markdown":"Assuming, you want timeout involved, then I think as @SkinnyJ pointed out you can simply use invokeAll as it does the same thing as isDone &amp; get combo. You can then use Future.isCancelled before using get.","body":"Assuming, you want timeout involved, then I think as @SkinnyJ pointed out you can simply use invokeAll as it does the same thing as isDone &amp; get combo. You can then use Future.isCancelled before using get."},{"owner":{"account_id":17919,"reputation":1594,"user_id":40614,"accept_rate":78,"display_name":"pramodc84"},"score":0,"creation_date":1531993576,"post_id":31092208,"comment_id":89809655,"body_markdown":"http://www.baeldung.com/java-future - this is simple and yet great example.","body":"<a href=\"http://www.baeldung.com/java-future\" rel=\"nofollow noreferrer\">baeldung.com/java-future</a> - this is simple and yet great example."}],"tags":[],"owner":{"account_id":4092618,"reputation":5227,"user_id":3360241,"accept_rate":91,"display_name":"John"},"comment_count":7,"down_vote_count":0,"up_vote_count":84,"is_accepted":true,"score":84,"last_activity_date":1481118126,"creation_date":1435430377,"answer_id":31092208,"question_id":31092067,"body_markdown":"`Future` offers you method `isDone()` which is not blocking and returns true if computation has completed, false otherwise.\r\n\r\n\r\n`Future.get()` is used to retrieve the result of computation.\r\n\r\nYou have a couple of options:\r\n\r\n- call `isDone()` and if the result is ready ask for it by invoking `get()`, notice how there is no blocking\r\n- block indefinitely with `get()`\r\n- block for specified timeout with `get(long timeout, TimeUnit unit)`\r\n\r\nThe whole `Future API` thing is there to have easy way obtaining values from threads executing parallel tasks. This can be done synchronously or asynchronously if you prefer, as described in bullets above.\r\n\r\n**UPDATE WITH CACHE EXAMPLE**\r\n\r\nHere is a cache implementation from *Java Concurrency In Practice*, an excellent use case for `Future`.\r\n\r\n - If the computation is already running, caller interested in result of computation will wait for computation to finish\r\n - If the result is ready in the cache, caller will collect it\r\n - if the result is not ready and computation has not started yet, caller will start computation and wrap result in `Future` for other callers. \r\n\r\nThis is all easily achieved with `Future` API. \r\n\r\n    package net.jcip.examples;\r\n\r\n    import java.util.concurrent.*;\r\n    /**\r\n     * Memoizer\r\n     * &lt;p/&gt;\r\n     * Final implementation of Memoizer\r\n     *\r\n     * @author Brian Goetz and Tim Peierls\r\n     */\r\n    public class Memoizer &lt;A, V&gt; implements Computable&lt;A, V&gt; {\r\n        private final ConcurrentMap&lt;A, Future&lt;V&gt;&gt; cache\r\n                = new ConcurrentHashMap&lt;A, Future&lt;V&gt;&gt;();\r\n        private final Computable&lt;A, V&gt; c;\r\n\r\n    public Memoizer(Computable&lt;A, V&gt; c) {\r\n        this.c = c;\r\n    }\r\n\r\n    public V compute(final A arg) throws InterruptedException {\r\n        while (true) {\r\n\r\n            Future&lt;V&gt; f = cache.get(arg);\r\n            // computation not started\r\n            if (f == null) {\r\n                Callable&lt;V&gt; eval = new Callable&lt;V&gt;() {\r\n                    public V call() throws InterruptedException {\r\n                        return c.compute(arg);\r\n                    }\r\n                };\r\n \r\n                FutureTask&lt;V&gt; ft = new FutureTask&lt;V&gt;(eval);\r\n                f = cache.putIfAbsent(arg, ft);\r\n                // start computation if it&#39;s not started in the meantime\r\n                if (f == null) {\r\n                    f = ft;\r\n                    ft.run();\r\n                }\r\n            }\r\n\r\n            // get result if ready, otherwise block and wait\r\n            try {\r\n                return f.get();\r\n            } catch (CancellationException e) {\r\n                cache.remove(arg, f);\r\n            } catch (ExecutionException e) {\r\n                throw LaunderThrowable.launderThrowable(e.getCause());\r\n            }\r\n        }\r\n      }\r\n    }\r\n","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p><code>Future</code> offers you method <code>isDone()</code> which is not blocking and returns true if computation has completed, false otherwise.</p>\n\n<p><code>Future.get()</code> is used to retrieve the result of computation.</p>\n\n<p>You have a couple of options:</p>\n\n<ul>\n<li>call <code>isDone()</code> and if the result is ready ask for it by invoking <code>get()</code>, notice how there is no blocking</li>\n<li>block indefinitely with <code>get()</code></li>\n<li>block for specified timeout with <code>get(long timeout, TimeUnit unit)</code></li>\n</ul>\n\n<p>The whole <code>Future API</code> thing is there to have easy way obtaining values from threads executing parallel tasks. This can be done synchronously or asynchronously if you prefer, as described in bullets above.</p>\n\n<p><strong>UPDATE WITH CACHE EXAMPLE</strong></p>\n\n<p>Here is a cache implementation from <em>Java Concurrency In Practice</em>, an excellent use case for <code>Future</code>.</p>\n\n<ul>\n<li>If the computation is already running, caller interested in result of computation will wait for computation to finish</li>\n<li>If the result is ready in the cache, caller will collect it</li>\n<li>if the result is not ready and computation has not started yet, caller will start computation and wrap result in <code>Future</code> for other callers. </li>\n</ul>\n\n<p>This is all easily achieved with <code>Future</code> API. </p>\n\n<pre><code>package net.jcip.examples;\n\nimport java.util.concurrent.*;\n/**\n * Memoizer\n * &lt;p/&gt;\n * Final implementation of Memoizer\n *\n * @author Brian Goetz and Tim Peierls\n */\npublic class Memoizer &lt;A, V&gt; implements Computable&lt;A, V&gt; {\n    private final ConcurrentMap&lt;A, Future&lt;V&gt;&gt; cache\n            = new ConcurrentHashMap&lt;A, Future&lt;V&gt;&gt;();\n    private final Computable&lt;A, V&gt; c;\n\npublic Memoizer(Computable&lt;A, V&gt; c) {\n    this.c = c;\n}\n\npublic V compute(final A arg) throws InterruptedException {\n    while (true) {\n\n        Future&lt;V&gt; f = cache.get(arg);\n        // computation not started\n        if (f == null) {\n            Callable&lt;V&gt; eval = new Callable&lt;V&gt;() {\n                public V call() throws InterruptedException {\n                    return c.compute(arg);\n                }\n            };\n\n            FutureTask&lt;V&gt; ft = new FutureTask&lt;V&gt;(eval);\n            f = cache.putIfAbsent(arg, ft);\n            // start computation if it's not started in the meantime\n            if (f == null) {\n                f = ft;\n                ft.run();\n            }\n        }\n\n        // get result if ready, otherwise block and wait\n        try {\n            return f.get();\n        } catch (CancellationException e) {\n            cache.remove(arg, f);\n        } catch (ExecutionException e) {\n            throw LaunderThrowable.launderThrowable(e.getCause());\n        }\n    }\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":1,"creation_date":1435431107,"post_id":31092213,"comment_id":50201093,"body_markdown":"Let me give you my example. The tasks I submit to the service end up raising HTTP requests, The result of the HTTP request can take a lot of time. But I do need the result of each HTTP request. The tasks are submitted in a loop. If I wait for each task to return (get), then I am loosing parallelism here, ain&#39;t I ?","body":"Let me give you my example. The tasks I submit to the service end up raising HTTP requests, The result of the HTTP request can take a lot of time. But I do need the result of each HTTP request. The tasks are submitted in a loop. If I wait for each task to return (get), then I am loosing parallelism here, ain&#39;t I ?"},{"owner":{"account_id":73745,"reputation":20493,"user_id":212211,"accept_rate":89,"display_name":"ring bearer"},"score":0,"creation_date":1435431915,"post_id":31092213,"comment_id":50201336,"body_markdown":"No, invoke get only when your isDone() returns `true`. That is better than executing all the calls sequentially. So essentially, your execution will be only as fast as the slowest performing web service (including network etc)","body":"No, invoke get only when your isDone() returns <code>true</code>. That is better than executing all the calls sequentially. So essentially, your execution will be only as fast as the slowest performing web service (including network etc)"}],"tags":[],"owner":{"account_id":73745,"reputation":20493,"user_id":212211,"accept_rate":89,"display_name":"ring bearer"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1435430391,"creation_date":1435430391,"answer_id":31092213,"question_id":31092067,"body_markdown":"In the example you have given you might as well run everything in your `main()` method and go your merry way.\r\n\r\nBut let us assume you have three steps of computation that you are currently running sequentially. Just for understanding let us assume that step1 takes t1 seconds, step2 takes t2 seconds, and step3 takes t3 seconds to complete. So total computation time is `t1+t2+t3`. Also, let us assume that `t2&gt;t1&gt;=t3`.\r\n\r\nNow let us consider a scenario when we executed these three steps in parallel using `Future` to hold each computational results. You can check if each task is done using non-blocking `isDone()` call on corresponding futures. Now what happens? theoretically your execution is as fast as how `t2` completes right? So we *did* gain some benefits from parallelism.\r\n\r\nAlso, in Java8 , there is `CompletableFuture` that supports functional style call backs.","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>In the example you have given you might as well run everything in your <code>main()</code> method and go your merry way.</p>\n\n<p>But let us assume you have three steps of computation that you are currently running sequentially. Just for understanding let us assume that step1 takes t1 seconds, step2 takes t2 seconds, and step3 takes t3 seconds to complete. So total computation time is <code>t1+t2+t3</code>. Also, let us assume that <code>t2&gt;t1&gt;=t3</code>.</p>\n\n<p>Now let us consider a scenario when we executed these three steps in parallel using <code>Future</code> to hold each computational results. You can check if each task is done using non-blocking <code>isDone()</code> call on corresponding futures. Now what happens? theoretically your execution is as fast as how <code>t2</code> completes right? So we <em>did</em> gain some benefits from parallelism.</p>\n\n<p>Also, in Java8 , there is <code>CompletableFuture</code> that supports functional style call backs.</p>\n"},{"comments":[{"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"score":0,"creation_date":1435659789,"post_id":31092433,"comment_id":50282049,"body_markdown":"@VishalP Have got some answer?","body":"@VishalP Have got some answer?"}],"tags":[],"owner":{"account_id":5968065,"reputation":14213,"user_id":4691279,"accept_rate":58,"display_name":"hagrawal7777"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435431605,"creation_date":1435431605,"answer_id":31092433,"question_id":31092067,"body_markdown":"If you don&#39;t care about the results, then spawn a new thread and from that thread use `ExectorService` API for task submission. In that way, your parent thread i.e `main` thread will not be blocking in any way, it would simply spawn a new thread and then will start further execution, while the new thread will submit your tasks.\r\n\r\nFor creating new thread - either do it yourself by having a `ThreadFactory` for your async thread creation or use some implementation of `java.util.concurrent.Executor`.\r\n\r\nIf this is in a JEE application and you are using Spring framework then you can easily create a new asynchronous thread using `@async` annotation.\r\n\r\nHope this helps!","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>If you don't care about the results, then spawn a new thread and from that thread use <code>ExectorService</code> API for task submission. In that way, your parent thread i.e <code>main</code> thread will not be blocking in any way, it would simply spawn a new thread and then will start further execution, while the new thread will submit your tasks.</p>\n\n<p>For creating new thread - either do it yourself by having a <code>ThreadFactory</code> for your async thread creation or use some implementation of <code>java.util.concurrent.Executor</code>.</p>\n\n<p>If this is in a JEE application and you are using Spring framework then you can easily create a new asynchronous thread using <code>@async</code> annotation.</p>\n\n<p>Hope this helps!</p>\n"},{"comments":[{"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"score":0,"creation_date":1482752233,"post_id":41330116,"comment_id":69864292,"body_markdown":"thnx @ravnidra. I wasn&#39;t using 1.8 then, so CompletableFuture was out of question. But the other inputs are pretty relevant.","body":"thnx @ravnidra. I wasn&#39;t using 1.8 then, so CompletableFuture was out of question. But the other inputs are pretty relevant."},{"owner":{"account_id":3518504,"reputation":1545,"user_id":2941375,"accept_rate":21,"display_name":"Om Infowave Developers"},"score":0,"creation_date":1658839539,"post_id":41330116,"comment_id":129147235,"body_markdown":"Hi @Ravindra, is there a way to keep waiting using get() method but still keep the UI interacting. In my case, if get() method is called, my app dosent give callback of onBackPressed on Dialog.","body":"Hi @Ravindra, is there a way to keep waiting using get() method but still keep the UI interacting. In my case, if get() method is called, my app dosent give callback of onBackPressed on Dialog."}],"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1521818021,"creation_date":1482749516,"answer_id":41330116,"question_id":31092067,"body_markdown":"&gt; Below is the snippet of the pseudo code. My question is- Does the below code not defeat the very notion of parallel asynchronous processing?\n\nIt all depends on your use case:\n\n1. If you really want to block till you get the result, use blocking `get()`\n2. If you can wait for a specific period to know the status instead of infinite blocking duration, use `get()` with time-out\n3. If you can continue without analysing the result immediately and inspect the result at future time, use [CompletableFuture][1] (java 8)\n\n   &gt; A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.\n\n4. You can implement callback mechanism from your Runnable/Callable. Have a look at below SE question:\n\n   https://stackoverflow.com/questions/826212/java-executors-how-to-be-notified-without-blocking-when-a-task-completes\n\n\n\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<blockquote>\n<p>Below is the snippet of the pseudo code. My question is- Does the below code not defeat the very notion of parallel asynchronous processing?</p>\n</blockquote>\n<p>It all depends on your use case:</p>\n<ol>\n<li><p>If you really want to block till you get the result, use blocking <code>get()</code></p>\n</li>\n<li><p>If you can wait for a specific period to know the status instead of infinite blocking duration, use <code>get()</code> with time-out</p>\n</li>\n<li><p>If you can continue without analysing the result immediately and inspect the result at future time, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">CompletableFuture</a> (java 8)</p>\n<blockquote>\n<p>A Future that may be explicitly completed (setting its value and status), and may be used as a CompletionStage, supporting dependent functions and actions that trigger upon its completion.</p>\n</blockquote>\n</li>\n<li><p>You can implement callback mechanism from your Runnable/Callable. Have a look at below SE question:</p>\n<p><a href=\"https://stackoverflow.com/questions/826212/java-executors-how-to-be-notified-without-blocking-when-a-task-completes\">Java executors: how to be notified, without blocking, when a task completes?</a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1471892,"reputation":9718,"user_id":1383240,"accept_rate":38,"display_name":"NiVeR"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1536765012,"creation_date":1526056198,"answer_id":50296580,"question_id":31092067,"body_markdown":"I would like to give my share on this one, more on theoretical point of view as there are some technical answers already. I would like to base my answer on the comment:\r\n\r\n&gt; Let me give you my example. The tasks I submit to the service end up\r\n&gt; raising HTTP requests, The result of the HTTP request can take a lot\r\n&gt; of time. But I do need the result of each HTTP request. The tasks are\r\n&gt; submitted in a loop. If I wait for each task to return (get), then I\r\n&gt; am loosing parallelism here, ain&#39;t I?\r\n\r\nwhich agrees with what is said in the question.\r\n\r\nSay you have three kids, and you want to make a cake, for your birthday. Since you want to make the greatest of cakes you need a lot of different stuff to prepare it. So what you do is split the ingredients on three different lists,  because where you live there exist just 3 supermarkets that sell different products, and assign each of your kids a single task, `simultaneously`. \r\n\r\nNow, before you can start preparing the cake (let&#39;s assume again, that you need all the ingredients beforehand) you will have to wait for the kid that have to do the longest route. Now, the fact that you need to wait for all the ingredients before starting to make the cake is *your* necessity, not a dependency among tasks. Your kids have been working on the tasks simoultaneously as long as they could (e.g: until the first kid completed the task). So, to conclude, here you have the paralelilsm.\r\n\r\nThe sequential example is described when you have 1 kid and you assign all three tasks to him/her.","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>I would like to give my share on this one, more on theoretical point of view as there are some technical answers already. I would like to base my answer on the comment:</p>\n\n<blockquote>\n  <p>Let me give you my example. The tasks I submit to the service end up\n  raising HTTP requests, The result of the HTTP request can take a lot\n  of time. But I do need the result of each HTTP request. The tasks are\n  submitted in a loop. If I wait for each task to return (get), then I\n  am loosing parallelism here, ain't I?</p>\n</blockquote>\n\n<p>which agrees with what is said in the question.</p>\n\n<p>Say you have three kids, and you want to make a cake, for your birthday. Since you want to make the greatest of cakes you need a lot of different stuff to prepare it. So what you do is split the ingredients on three different lists,  because where you live there exist just 3 supermarkets that sell different products, and assign each of your kids a single task, <code>simultaneously</code>. </p>\n\n<p>Now, before you can start preparing the cake (let's assume again, that you need all the ingredients beforehand) you will have to wait for the kid that have to do the longest route. Now, the fact that you need to wait for all the ingredients before starting to make the cake is <em>your</em> necessity, not a dependency among tasks. Your kids have been working on the tasks simoultaneously as long as they could (e.g: until the first kid completed the task). So, to conclude, here you have the paralelilsm.</p>\n\n<p>The sequential example is described when you have 1 kid and you assign all three tasks to him/her.</p>\n"}],"owner":{"account_id":3842362,"reputation":2222,"user_id":3185056,"accept_rate":78,"display_name":"TheMonkWhoSoldHisCode"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104321,"favorite_count":0,"down_vote_count":3,"up_vote_count":93,"accepted_answer_id":31092208,"answer_count":5,"score":90,"last_activity_date":1683218540,"creation_date":1435429623,"question_id":31092067,"body_markdown":"Below is the snippet of the pseudo code. \r\nDoes the below code not defeat the very notion of parallel asynchronous processing? \r\n\r\nThe reason I ask this is because in the below code the main thread would submit a task to be executed in a different thread. After submitting the task in the queue, it blocks on Future.get() method for the task to return the value. I would rather have the task executed in the main thread rather than submitting to a different thread and waiting for the results. What is that I gained by executing the task in a new thread? \r\n\r\nI am aware that you could wait for a limited time etc, but then what if I really care about the result? The problem gets worse if there are multiple tasks to be executed. It seems to me that we are just doing the work synchronously. I am aware of the Guava library which provides a non blocking listener interface. But I am interested to know if my understanding is correct for the Future.get() API. If it is correct, why is the Future.get() designed to block thereby defeating the whole process of parallel processing?\r\n\r\nI use Java 6.\r\n\r\n\r\n    public static void main(String[] args){\r\n    \r\n    private ExectorService executorService = ...\r\n    \r\n    Future future = executorService.submit(new Callable(){\r\n        public Object call() throws Exception {\r\n            System.out.println(&quot;Asynchronous Callable&quot;);\r\n            return &quot;Callable Result&quot;;\r\n        }\r\n    });\r\n    \r\n    System.out.println(&quot;future.get() = &quot; + future.get());\r\n    }","title":"Method call to Future.get() blocks. Is that really desirable?","body":"<p>Below is the snippet of the pseudo code.\nDoes the below code not defeat the very notion of parallel asynchronous processing?</p>\n<p>The reason I ask this is because in the below code the main thread would submit a task to be executed in a different thread. After submitting the task in the queue, it blocks on Future.get() method for the task to return the value. I would rather have the task executed in the main thread rather than submitting to a different thread and waiting for the results. What is that I gained by executing the task in a new thread?</p>\n<p>I am aware that you could wait for a limited time etc, but then what if I really care about the result? The problem gets worse if there are multiple tasks to be executed. It seems to me that we are just doing the work synchronously. I am aware of the Guava library which provides a non blocking listener interface. But I am interested to know if my understanding is correct for the Future.get() API. If it is correct, why is the Future.get() designed to block thereby defeating the whole process of parallel processing?</p>\n<p>I use Java 6.</p>\n<pre><code>public static void main(String[] args){\n\nprivate ExectorService executorService = ...\n\nFuture future = executorService.submit(new Callable(){\n    public Object call() throws Exception {\n        System.out.println(&quot;Asynchronous Callable&quot;);\n        return &quot;Callable Result&quot;;\n    }\n});\n\nSystem.out.println(&quot;future.get() = &quot; + future.get());\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","spring-cloud"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1683218495,"post_id":76170589,"comment_id":134336643,"body_markdown":"Why do you remove Spring Security, if you want to use it? Add it back.","body":"Why do you remove Spring Security, if you want to use it? Add it back."},{"owner":{"account_id":28501901,"reputation":1,"user_id":21813033,"display_name":"fsjyz"},"score":0,"creation_date":1683248529,"post_id":76170589,"comment_id":134341715,"body_markdown":"I didn&#39;t remove it ,it&#39;s just not in the same module so, the functions were separated to run independently so it doesn&#39;t work anymore","body":"I didn&#39;t remove it ,it&#39;s just not in the same module so, the functions were separated to run independently so it doesn&#39;t work anymore"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1683272583,"post_id":76170589,"comment_id":134344443,"body_markdown":"What module? Show your dependencies. However, you could allway add it back.","body":"What module? Show your dependencies. However, you could allway add it back."}],"owner":{"account_id":28501901,"reputation":1,"user_id":21813033,"display_name":"fsjyz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218463,"creation_date":1683185404,"question_id":76170589,"body_markdown":"I&#39;ve upgraded a Spring Cloud project from a Spring Boot project, which the Spring Security module has been extracted from other modules and now the annotation `@PreAuthorize` is useless.\r\n\r\nHow to resume the `@PreAuthorize` or is there another way to accomplish the authorization?\r\n\r\n```java\r\n@PreAuthorize(&quot;@el.check(&#39;student:del&#39;)&quot;)\r\npublic ResponseEntity&lt;Object&gt; delete(@RequestBody Set&lt;Long&gt; schoolId) {\r\n        return studentService.delete(schoolId);\r\n}\r\n```\r\n\r\nThe annotation is active only if the class extends `WebSecurityConfigurerAdapter` and has an annotation `@EnableGlobalMethodSecurity(prePostEnabled = true)`.","title":"Spring Cloud security issues","body":"<p>I've upgraded a Spring Cloud project from a Spring Boot project, which the Spring Security module has been extracted from other modules and now the annotation <code>@PreAuthorize</code> is useless.</p>\n<p>How to resume the <code>@PreAuthorize</code> or is there another way to accomplish the authorization?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PreAuthorize(&quot;@el.check('student:del')&quot;)\npublic ResponseEntity&lt;Object&gt; delete(@RequestBody Set&lt;Long&gt; schoolId) {\n        return studentService.delete(schoolId);\n}\n</code></pre>\n<p>The annotation is active only if the class extends <code>WebSecurityConfigurerAdapter</code> and has an annotation <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code>.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627740838,"post_id":68602821,"comment_id":121239888,"body_markdown":"It was working fine but i dont know what happened now","body":"It was working fine but i dont know what happened now"},{"owner":{"account_id":19020553,"reputation":675,"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"score":0,"creation_date":1627740872,"post_id":68602821,"comment_id":121239896,"body_markdown":"you have one or more relation is null  you have field in database dont has forigen key check the filed in database or delete the relation result into dto","body":"you have one or more relation is null  you have field in database dont has forigen key check the filed in database or delete the relation result into dto"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627740956,"post_id":68602821,"comment_id":121239915,"body_markdown":"Show us `RoleDomain.hashCode`","body":"Show us <code>RoleDomain.hashCode</code>"},{"owner":{"account_id":19020553,"reputation":675,"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"score":0,"creation_date":1627740984,"post_id":68602821,"comment_id":121239927,"body_markdown":"in dto you have object has null when transfer from entity to dto","body":"in dto you have object has null when transfer from entity to dto"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627741041,"post_id":68602821,"comment_id":121239940,"body_markdown":"Also show `UserRoleDomain.hashCode`","body":"Also show <code>UserRoleDomain.hashCode</code>"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1627741156,"post_id":68602821,"comment_id":121239966,"body_markdown":"I bet your `RoleDomain` have field with type `UserRoleDomain` and vice versa. Both of those classes use its corresponding field in `hashCode` calculation.","body":"I bet your <code>RoleDomain</code> have field with type <code>UserRoleDomain</code> and vice versa. Both of those classes use its corresponding field in <code>hashCode</code> calculation."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627760755,"post_id":68602821,"comment_id":121244309,"body_markdown":"It&#39;s a good thing you came to Stack Overflow and reported this error to us. ;)\n\nBack on topic- a Stack overflow error in java means you&#39;ve called too many methods without returning and your call stack has become too large. It can happen when your code is in an infinite loop calling a method over and over.","body":"It&#39;s a good thing you came to Stack Overflow and reported this error to us. ;)  Back on topic- a Stack overflow error in java means you&#39;ve called too many methods without returning and your call stack has become too large. It can happen when your code is in an infinite loop calling a method over and over."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627762960,"post_id":68602821,"comment_id":121244756,"body_markdown":"Does this answer help you? https://stackoverflow.com/a/40694643/4425643","body":"Does this answer help you? <a href=\"https://stackoverflow.com/a/40694643/4425643\">stackoverflow.com/a/40694643/4425643</a>"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627770658,"post_id":68602821,"comment_id":121246047,"body_markdown":"You can check the other classes of my application here for having a clear understanding about the issue  https://github.com/iqbalrohail/Exam-portal-backend","body":"You can check the other classes of my application here for having a clear understanding about the issue  <a href=\"https://github.com/iqbalrohail/Exam-portal-backend\" rel=\"nofollow noreferrer\">github.com/iqbalrohail/Exam-portal-backend</a>"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627822677,"post_id":68602821,"comment_id":121253758,"body_markdown":"The problem was with @Data annotation which I were using earlier ..","body":"The problem was with @Data annotation which I were using earlier .."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627850977,"post_id":68602821,"comment_id":121260440,"body_markdown":"It&#39;s recommended to post a [minimum reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) when asking for help. Furthermore, please place the contents of `RoleDomain.java` into your question since it was required to understand the problem and was part of the solution.","body":"It&#39;s recommended to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum reproducible example</a> when asking for help. Furthermore, please place the contents of <code>RoleDomain.java</code> into your question since it was required to understand the problem and was part of the solution."}],"answers":[{"comments":[{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627770814,"post_id":68605588,"comment_id":121246070,"body_markdown":"have a look at my domain package and other classes here https://github.com/iqbalrohail/Exam-portal-backend","body":"have a look at my domain package and other classes here <a href=\"https://github.com/iqbalrohail/Exam-portal-backend\" rel=\"nofollow noreferrer\">github.com/iqbalrohail/Exam-portal-backend</a>"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627775206,"post_id":68605588,"comment_id":121246593,"body_markdown":"Hey I took a look and updated my answer, let me know if it&#39;s not resolved. @Rohail Iqbal","body":"Hey I took a look and updated my answer, let me know if it&#39;s not resolved. @Rohail Iqbal"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":1,"creation_date":1627822315,"post_id":68605588,"comment_id":121253665,"body_markdown":"yes i changed Data annotations in my whole code to simple Lombok annotations and it works for me  ie; Setter- -Getter-- AllArgsConstructor --NoArgsConstructor-- ToString","body":"yes i changed Data annotations in my whole code to simple Lombok annotations and it works for me  ie; Setter- -Getter-- AllArgsConstructor --NoArgsConstructor-- ToString"},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627822489,"post_id":68605588,"comment_id":121253725,"body_markdown":"This article (https://projectlombok.org/features/Data)  helps me understanding why it is not good to use @Data , thanks CausingUnderflowsEverywhere","body":"This article (<a href=\"https://projectlombok.org/features/Data\" rel=\"nofollow noreferrer\">projectlombok.org/features/Data</a>)  helps me understanding why it is not good to use @Data , thanks CausingUnderflowsEverywhere"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627833035,"post_id":68605588,"comment_id":121256213,"body_markdown":"No problem @RohailIqbal remember to up vote helpful answers and down vote not helpful ones and choose an answer to mark as the solution before you go.","body":"No problem @RohailIqbal remember to up vote helpful answers and down vote not helpful ones and choose an answer to mark as the solution before you go."},{"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"score":0,"creation_date":1627846612,"post_id":68605588,"comment_id":121259549,"body_markdown":"I am a newbie on stack overflow so need some reputation ..if you find the question useful your up vote for the question would be appreciated .","body":"I am a newbie on stack overflow so need some reputation ..if you find the question useful your up vote for the question would be appreciated ."},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1627850742,"post_id":68605588,"comment_id":121260399,"body_markdown":"I will leave some feedback.","body":"I will leave some feedback."}],"tags":[],"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"comment_count":7,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1627775183,"creation_date":1627762848,"answer_id":68605588,"question_id":68602821,"body_markdown":"A Stack Overflow error happens when your code has called too many methods without returning and there are too many methods in the stack, causing it to overflow. This commonly happens when you have an infinite loop where a method calls itself repeatedly.\r\n\r\nThere is a loop happening in your `hashCode` method in `com.examportal.examportalapi.domain.UserRoleDomain` which calls `com.examportal.examportalapi.domain.RoleDomain.hashCode`.\r\n\r\nYou have the [@Data lombok annotation][1] in these two classes. Replace the @Data annotation with *just* the features you need in the classes. \r\n@Data generates hashCode methods that cause your problem. See the documentation: https://projectlombok.org/features/Data\r\n \r\n\r\n\r\n  [1]: https://github.com/iqbalrohail/Exam-portal-backend/blob/43346cc6f6ff28e9c4df54fa616d8990a9c1358b/src/main/java/com/examportal/examportalapi/domain/RoleDomain.java","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>A Stack Overflow error happens when your code has called too many methods without returning and there are too many methods in the stack, causing it to overflow. This commonly happens when you have an infinite loop where a method calls itself repeatedly.</p>\n<p>There is a loop happening in your <code>hashCode</code> method in <code>com.examportal.examportalapi.domain.UserRoleDomain</code> which calls <code>com.examportal.examportalapi.domain.RoleDomain.hashCode</code>.</p>\n<p>You have the <a href=\"https://github.com/iqbalrohail/Exam-portal-backend/blob/43346cc6f6ff28e9c4df54fa616d8990a9c1358b/src/main/java/com/examportal/examportalapi/domain/RoleDomain.java\" rel=\"noreferrer\">@Data lombok annotation</a> in these two classes. Replace the @Data annotation with <em>just</em> the features you need in the classes.\n@Data generates hashCode methods that cause your problem. See the documentation: <a href=\"https://projectlombok.org/features/Data\" rel=\"noreferrer\">https://projectlombok.org/features/Data</a></p>\n"},{"comments":[{"owner":{"account_id":18314899,"reputation":680,"user_id":13336872,"display_name":"Damika"},"score":0,"creation_date":1652714657,"post_id":68610660,"comment_id":127666841,"body_markdown":"use @Data in lombok","body":"use @Data in lombok"}],"tags":[],"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1627822839,"creation_date":1627822839,"answer_id":68610660,"question_id":68602821,"body_markdown":"Changed **@Data** annotation with the following Lombok annotations and it worked for me \r\n\r\n@Setter\r\n\r\n@Getter\r\n\r\n@AllArgsConstructor\r\n\r\n@NoArgsConstructor\r\n\r\n@ToString\r\n\r\n@Entity","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>Changed <strong>@Data</strong> annotation with the following Lombok annotations and it worked for me</p>\n<p>@Setter</p>\n<p>@Getter</p>\n<p>@AllArgsConstructor</p>\n<p>@NoArgsConstructor</p>\n<p>@ToString</p>\n<p>@Entity</p>\n"},{"tags":[],"owner":{"account_id":4094046,"reputation":1930,"user_id":3361335,"accept_rate":15,"display_name":"fresko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659694934,"creation_date":1659633464,"answer_id":73239960,"question_id":68602821,"body_markdown":"may be useful.\r\nToday I lost a lot of time because i tried to print a List&lt;blablabla&gt; object. It was calling implicitely toString(), but the error came from Unit tests and it was not pointing directly to the class with the problem\r\n\r\n\tList&lt;ArticoliDto&gt; articoli = articoliService.SelByDescrizione(&quot;blabla&quot;); //return a List&lt;xxx&gt;\r\n\tlogger.info(&quot;Trovati articoli: &quot; + articoli); //this causes the error!!\r\n    \r\nThe exception was (partially):\r\n\r\n    org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.StackOverflowError\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n    \tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n    \tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\r\n    \tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n    \tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:199)\r\n    \tat com.xantrix.webapp.UnitTest.ControllerTest.SelectArtTest.listArtByDesc(SelectArtTest.java:174)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n    \tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n    \tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n    \tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n    \tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>may be useful.\nToday I lost a lot of time because i tried to print a List object. It was calling implicitely toString(), but the error came from Unit tests and it was not pointing directly to the class with the problem</p>\n<pre><code>List&lt;ArticoliDto&gt; articoli = articoliService.SelByDescrizione(&quot;blabla&quot;); //return a List&lt;xxx&gt;\nlogger.info(&quot;Trovati articoli: &quot; + articoli); //this causes the error!!\n</code></pre>\n<p>The exception was (partially):</p>\n<pre><code>org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.StackOverflowError\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:199)\n    at com.xantrix.webapp.UnitTest.ControllerTest.SelectArtTest.listArtByDesc(SelectArtTest.java:174)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13329989,"reputation":131,"user_id":9621686,"display_name":"Meriem Bader"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668442004,"creation_date":1668442004,"answer_id":74434578,"question_id":68602821,"body_markdown":"You have to delete the annotation of Lambok `@Data`","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>You have to delete the annotation of Lambok <code>@Data</code></p>\n"},{"tags":[],"owner":{"account_id":17803224,"reputation":73,"user_id":12929442,"display_name":"raghurajj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675159938,"creation_date":1675153429,"answer_id":75294372,"question_id":68602821,"body_markdown":"I faced the same issue. after debugging found out that there was a cycle in my code. after fixing that the error was solved. Please, check for the cycle in your code too. maybe that&#39;s the issue.","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>I faced the same issue. after debugging found out that there was a cycle in my code. after fixing that the error was solved. Please, check for the cycle in your code too. maybe that's the issue.</p>\n"},{"tags":[],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678184319,"creation_date":1678184319,"answer_id":75660662,"question_id":68602821,"body_markdown":"I encounter this problem and solved this problem with `@Data` annotation only so that you can solve this problem only `@Data` annotation as well. you have add `@EqualsAndHashCode.Exclude` and `@ToString.Exclude` in your entities.","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>I encounter this problem and solved this problem with <code>@Data</code> annotation only so that you can solve this problem only <code>@Data</code> annotation as well. you have add <code>@EqualsAndHashCode.Exclude</code> and <code>@ToString.Exclude</code> in your entities.</p>\n"}],"owner":{"account_id":18932969,"reputation":131,"user_id":13814708,"display_name":"Rohail Iqbal"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52254,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1683218437,"creation_date":1627740248,"question_id":68602821,"body_markdown":"Getting this error when jpa tries to fetch the object from database.\r\n\r\nError : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\r\n\r\n**UserController**\r\nIn this the getUsers method doesn&#39;t work and caused error \r\n\r\n```\r\n\r\n@RestController\r\n@RequestMapping(&quot;user&quot;)\r\npublic class UserController {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(UserController.class);\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Autowired\r\n    private RoleService roleService;\r\n\r\n    @PostMapping(&quot;/add&quot;)\r\n    public MessageDto addUser(@RequestBody UserDto userDto)\r\n    {\r\n        log.info(&quot;Post call have been received at user/add with DTO &quot; + userDto);\r\n                                             //Set&lt;UserRoleDomain&gt;\r\n        UserDomain userDomain = userService.mapUserDtoToDomain(userDto);\r\n        return userService.add(userDomain, roleService.add(userDomain));\r\n    }\r\n\r\n    @GetMapping(&quot;/get/{userName}&quot;)\r\n    public UserDto getUsers(@PathVariable(&quot;userName&quot;) String userName)\r\n    {\r\n        log.info(&quot;Get call have been received at user/get/ &quot;+userName);\r\n        return userService.getById(userName);\r\n    }\r\n\r\n}\r\n```\r\n**UserService**\r\n```\r\n\r\n@Service\r\n@Transactional\r\npublic class UserService {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(UserService.class);\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private RoleRepository roleRepository;\r\n\r\n    @Autowired\r\n    private UserRoleRepository userRoleRepository;\r\n\r\n    public MessageDto add(UserDomain userDomain , Set&lt;UserRoleDomain&gt; userRoles)\r\n    {\r\n            // UserDomain userDomain = mapUserDtoToDomain(userDto);\r\n            if( userRepository.findByUserName(userDomain.getUserName())!=null) // causing error\r\n            {\r\n                String responseMessage = &quot;User is already register with name ! &quot;+userDomain.getUserName();\r\n                MessageDto messageDto = new MessageDto(responseMessage);\r\n                log.info(responseMessage);\r\n                return messageDto;\r\n            }\r\n            else {\r\n\r\n                for (UserRoleDomain userRoleDomain: userRoles) {\r\n                    System.out.println(&quot;result : &quot;+userRoleDomain.getRoleDomain());\r\n                    roleRepository.save(userRoleDomain.getRoleDomain());\r\n                }\r\n\r\n                userDomain.getUserRoleDomains().addAll(userRoles);\r\n                userRepository.save(userDomain);\r\n                String responseMessage = &quot;User has been added with Id &quot; + userDomain.getUserId();\r\n                MessageDto messageDto = new MessageDto(responseMessage);\r\n                log.info(responseMessage);\r\n                return messageDto;\r\n            }\r\n    }\r\n\r\n    public UserDto getById(String userName)\r\n    {\r\n       UserDomain userDomain =  userRepository.findByUserName(userName);\r\n       return mapUserDomainToDto(userDomain);\r\n    }\r\n\r\n    public UserDomain mapUserDtoToDomain(UserDto userDto)\r\n    {\r\n        return objectMapper.convertValue(userDto , UserDomain.class);\r\n    }\r\n\r\n    public UserDto mapUserDomainToDto(UserDomain userDomain)\r\n    {\r\n        return objectMapper.convertValue(userDomain , UserDto.class);\r\n    }\r\n\r\n}\r\n```\r\n**This is my terminal**\r\n\r\n```\r\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@17f80723&lt;rs=HikariProxyResultSet@763024380 wrapping Result set representing update count of -1&gt;\r\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@38b516d2&lt;rs=HikariProxyResultSet@1651373951 wrapping Result set representing update count of -1&gt;\r\n2021-07-31 13:57:50.558 ERROR 13691 --- [nio-8881-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\r\n\r\njava.lang.StackOverflowError: null\r\n\tat java.base/java.lang.String.indexOf(String.java:1578) ~[na:na]\r\n\tat java.base/java.lang.String.indexOf(String.java:1535) ~[na:na]\r\n\tat java.base/java.net.URLStreamHandler.parseURL(URLStreamHandler.java:143) ~[na:na]\r\n\tat java.base/sun.net.www.protocol.file.Handler.parseURL(Handler.java:67) ~[na:na]\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:674) ~[na:na]\r\n\tat java.base/java.net.URL.&lt;init&gt;(URL.java:541) ~[na:na]\r\n\tat java.base/jdk.internal.loader.URLClassPath$FileLoader.getResource(URLClassPath.java:1221) ~[na:na]\r\n\tat java.base/jdk.internal.loader.URLClassPath.getResource(URLClassPath.java:314) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:695) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na]\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1020) ~[mysql-connector-java-8.0.25.jar:8.0.25]\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-4.0.3.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-4.0.3.jar:na]\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:390) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:104) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\tat java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\r\n\tat org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\r\n\tat com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\r\n\tat java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\r\n\tat java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\r\n\tat java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\r\n\r\n```\r\n","title":"Handler dispatch failed; nested exception is java.lang.StackOverflowError with root cause","body":"<p>Getting this error when jpa tries to fetch the object from database.</p>\n<p>Error : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause</p>\n<p><strong>UserController</strong>\nIn this the getUsers method doesn't work and caused error</p>\n<pre><code>\n@RestController\n@RequestMapping(&quot;user&quot;)\npublic class UserController {\n\n    private final Logger log = LoggerFactory.getLogger(UserController.class);\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private RoleService roleService;\n\n    @PostMapping(&quot;/add&quot;)\n    public MessageDto addUser(@RequestBody UserDto userDto)\n    {\n        log.info(&quot;Post call have been received at user/add with DTO &quot; + userDto);\n                                             //Set&lt;UserRoleDomain&gt;\n        UserDomain userDomain = userService.mapUserDtoToDomain(userDto);\n        return userService.add(userDomain, roleService.add(userDomain));\n    }\n\n    @GetMapping(&quot;/get/{userName}&quot;)\n    public UserDto getUsers(@PathVariable(&quot;userName&quot;) String userName)\n    {\n        log.info(&quot;Get call have been received at user/get/ &quot;+userName);\n        return userService.getById(userName);\n    }\n\n}\n</code></pre>\n<p><strong>UserService</strong></p>\n<pre><code>\n@Service\n@Transactional\npublic class UserService {\n\n    private final Logger log = LoggerFactory.getLogger(UserService.class);\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private RoleRepository roleRepository;\n\n    @Autowired\n    private UserRoleRepository userRoleRepository;\n\n    public MessageDto add(UserDomain userDomain , Set&lt;UserRoleDomain&gt; userRoles)\n    {\n            // UserDomain userDomain = mapUserDtoToDomain(userDto);\n            if( userRepository.findByUserName(userDomain.getUserName())!=null) // causing error\n            {\n                String responseMessage = &quot;User is already register with name ! &quot;+userDomain.getUserName();\n                MessageDto messageDto = new MessageDto(responseMessage);\n                log.info(responseMessage);\n                return messageDto;\n            }\n            else {\n\n                for (UserRoleDomain userRoleDomain: userRoles) {\n                    System.out.println(&quot;result : &quot;+userRoleDomain.getRoleDomain());\n                    roleRepository.save(userRoleDomain.getRoleDomain());\n                }\n\n                userDomain.getUserRoleDomains().addAll(userRoles);\n                userRepository.save(userDomain);\n                String responseMessage = &quot;User has been added with Id &quot; + userDomain.getUserId();\n                MessageDto messageDto = new MessageDto(responseMessage);\n                log.info(responseMessage);\n                return messageDto;\n            }\n    }\n\n    public UserDto getById(String userName)\n    {\n       UserDomain userDomain =  userRepository.findByUserName(userName);\n       return mapUserDomainToDto(userDomain);\n    }\n\n    public UserDomain mapUserDtoToDomain(UserDto userDto)\n    {\n        return objectMapper.convertValue(userDto , UserDomain.class);\n    }\n\n    public UserDto mapUserDomainToDto(UserDomain userDomain)\n    {\n        return objectMapper.convertValue(userDomain , UserDto.class);\n    }\n\n}\n</code></pre>\n<p><strong>This is my terminal</strong></p>\n<pre><code>2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@17f80723&lt;rs=HikariProxyResultSet@763024380 wrapping Result set representing update count of -1&gt;\n2021-07-31 13:57:50.549  WARN 13691 --- [nio-8881-exec-1] o.h.e.loading.internal.LoadContexts      : HHH000100: Fail-safe cleanup (collections) : org.hibernate.engine.loading.internal.CollectionLoadContext@38b516d2&lt;rs=HikariProxyResultSet@1651373951 wrapping Result set representing update count of -1&gt;\n2021-07-31 13:57:50.558 ERROR 13691 --- [nio-8881-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.StackOverflowError] with root cause\n\njava.lang.StackOverflowError: null\n    at java.base/java.lang.String.indexOf(String.java:1578) ~[na:na]\n    at java.base/java.lang.String.indexOf(String.java:1535) ~[na:na]\n    at java.base/java.net.URLStreamHandler.parseURL(URLStreamHandler.java:143) ~[na:na]\n    at java.base/sun.net.www.protocol.file.Handler.parseURL(Handler.java:67) ~[na:na]\n    at java.base/java.net.URL.&lt;init&gt;(URL.java:674) ~[na:na]\n    at java.base/java.net.URL.&lt;init&gt;(URL.java:541) ~[na:na]\n    at java.base/jdk.internal.loader.URLClassPath$FileLoader.getResource(URLClassPath.java:1221) ~[na:na]\n    at java.base/jdk.internal.loader.URLClassPath.getResource(URLClassPath.java:314) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:695) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na]\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1020) ~[mysql-connector-java-8.0.25.jar:8.0.25]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-4.0.3.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-4.0.3.jar:na]\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.getResultSet(AbstractLoadPlanBasedLoader.java:390) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeQueryStatement(AbstractLoadPlanBasedLoader.java:163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:104) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n    at java.base/java.util.AbstractCollection.addAll(AbstractCollection.java:352) ~[na:na]\n    at org.hibernate.collection.internal.PersistentSet.endRead(PersistentSet.java:355) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollection(CollectionLoadContext.java:239) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:224) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.engine.loading.internal.CollectionLoadContext.endLoadingCollections(CollectionLoadContext.java:198) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.CollectionReferenceInitializerImpl.endLoading(CollectionReferenceInitializerImpl.java:154) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishLoadingCollections(AbstractRowReader.java:253) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.AbstractRowReader.finishUp(AbstractRowReader.java:211) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.process.internal.ResultSetProcessorImpl.extractResults(ResultSetProcessorImpl.java:96) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.plan.exec.internal.AbstractLoadPlanBasedLoader.executeLoad(AbstractLoadPlanBasedLoader.java:105) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.loader.collection.plan.AbstractLoadPlanBasedCollectionInitializer.initialize(AbstractLoadPlanBasedCollectionInitializer.java:87) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:710) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:76) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:99) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:2163) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:589) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:264) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:585) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:149) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at org.hibernate.collection.internal.PersistentSet.hashCode(PersistentSet.java:458) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n    at com.examportal.examportalapi.domain.RoleDomain.hashCode(RoleDomain.java:13) ~[classes/:na]\n    at com.examportal.examportalapi.domain.UserRoleDomain.hashCode(UserRoleDomain.java:14) ~[classes/:na]\n    at java.base/java.util.HashMap.hash(HashMap.java:339) ~[na:na]\n    at java.base/java.util.HashMap.put(HashMap.java:607) ~[na:na]\n    at java.base/java.util.HashSet.add(HashSet.java:220) ~[na:na]\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webflux","reactive"],"owner":{"account_id":9729816,"reputation":99,"user_id":7215277,"display_name":"Pankaj Chouhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218399,"creation_date":1683218399,"question_id":76175484,"body_markdown":"Here is the return code where am using aggregation to get data from MongoDB using Spring Webflux. When I try for records more than 15000, it looks like after around 6000 records doOnNext halts and next one is coming after a minute. So is there any way to check what is going in background or is this a common issue that streaming halts and resumes after a minute?\r\n\r\n``` return mongoTemplateReactive.aggregate(\r\n    \t    aggregation.withOptions(AggregationOptions.builder().allowDiskUse(true).build()),\r\n    \t    &quot;my_collection&quot;, Document.class).\r\n    \t    doOnNext(value -&gt; {\r\n    \t\tlog.info(&quot;-----------doOnNext-------------&quot;);\r\n    \t    }).\r\n    \t    doOnCancel(()-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnCancel-------------&quot;);\r\n    \t    }).\t\r\n    \t    doOnError(ex-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnError-------------&quot;);\r\n    \t\tthrow new IllegalStateException(ex);\r\n    \t    }).\r\n    \t    onBackpressureBuffer(1000, BufferOverflowStrategy.DROP_OLDEST).\r\n    \t    doOnComplete(()-&gt;{\r\n    \t\tlog.info(&quot;-----------doOnComplete-------------&quot;);\r\n    \t    })\r\n    \t    ;```","title":"Why does Spring Webflux streaming halts for sometime in between and then resumes","body":"<p>Here is the return code where am using aggregation to get data from MongoDB using Spring Webflux. When I try for records more than 15000, it looks like after around 6000 records doOnNext halts and next one is coming after a minute. So is there any way to check what is going in background or is this a common issue that streaming halts and resumes after a minute?</p>\n<pre><code>            aggregation.withOptions(AggregationOptions.builder().allowDiskUse(true).build()),\n            &quot;my_collection&quot;, Document.class).\n            doOnNext(value -&gt; {\n            log.info(&quot;-----------doOnNext-------------&quot;);\n            }).\n            doOnCancel(()-&gt;{\n            log.info(&quot;-----------doOnCancel-------------&quot;);\n            }). \n            doOnError(ex-&gt;{\n            log.info(&quot;-----------doOnError-------------&quot;);\n            throw new IllegalStateException(ex);\n            }).\n            onBackpressureBuffer(1000, BufferOverflowStrategy.DROP_OLDEST).\n            doOnComplete(()-&gt;{\n            log.info(&quot;-----------doOnComplete-------------&quot;);\n            })\n            ;```\n</code></pre>\n"},{"tags":["python","java","android","chaquopy","tabula-py"],"comments":[{"owner":{"account_id":77317,"reputation":7321,"user_id":220765,"display_name":"mhsmith"},"score":0,"creation_date":1683312397,"post_id":76175476,"comment_id":134353213,"body_markdown":"Unfortunately none of the things you&#39;ve mentioned will provide a `java` command on the Android device or emulator itself. Android does not come with such a command, and neither does Chaquopy. You may be able to use Termux instead.","body":"Unfortunately none of the things you&#39;ve mentioned will provide a <code>java</code> command on the Android device or emulator itself. Android does not come with such a command, and neither does Chaquopy. You may be able to use Termux instead."}],"owner":{"account_id":27015040,"reputation":11,"user_id":20574043,"display_name":"mranderson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683218330,"creation_date":1683218330,"question_id":76175476,"body_markdown":"I am using chaqoupy and building an android app in kotlin using python scripts. I am trying to use the tabula-py module however I am getting java not found exception in my Logcat\r\n\r\n```\r\ncom.chaquo.python.PyException: JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\r\n```\r\n\r\nI have set the JAVA_HOME correctly and everything. Here is my python script\r\n\r\n```py\r\nimport tabula\r\nfrom io import BytesIO\r\ndef main(pdf_data):\r\n\r\n    tables = tabula.read_pdf(BytesIO(pdf_data))\r\n    tables = str(tables)\r\n    return tables\r\n```\r\n\r\nIve tried changing JAVA_HOME paths, reinstalled JDK. Tried adding a JRE to my Android Studio Project, tried changing to embedded JDK in my gradle settings.","title":"Java not found for Tabula-py with chaquopy inside an Android Studio Kotlin project","body":"<p>I am using chaqoupy and building an android app in kotlin using python scripts. I am trying to use the tabula-py module however I am getting java not found exception in my Logcat</p>\n<pre><code>com.chaquo.python.PyException: JavaNotFoundError: `java` command is not found from this Python process.Please ensure Java is installed and PATH is set for `java`\n</code></pre>\n<p>I have set the JAVA_HOME correctly and everything. Here is my python script</p>\n<pre class=\"lang-py prettyprint-override\"><code>import tabula\nfrom io import BytesIO\ndef main(pdf_data):\n\n    tables = tabula.read_pdf(BytesIO(pdf_data))\n    tables = str(tables)\n    return tables\n</code></pre>\n<p>Ive tried changing JAVA_HOME paths, reinstalled JDK. Tried adding a JRE to my Android Studio Project, tried changing to embedded JDK in my gradle settings.</p>\n"},{"tags":["java","selenium-webdriver","automated-tests","cucumber","scenarios"],"comments":[{"owner":{"account_id":1976379,"reputation":608,"user_id":1774084,"display_name":"M. Yousfi"},"score":2,"creation_date":1683218880,"post_id":76175473,"comment_id":134336746,"body_markdown":"Welcome to StackOverflow. There is no dumb question, but yours need more precisions. In particular you must show us what you have tried so far and not expect people do the work.","body":"Welcome to StackOverflow. There is no dumb question, but yours need more precisions. In particular you must show us what you have tried so far and not expect people do the work."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1683222183,"post_id":76175473,"comment_id":134337475,"body_markdown":"Are you using Cucumber with JUnit 5? If so, see https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#exclusive-resources but there are some limitations inherited from JUnit.","body":"Are you using Cucumber with JUnit 5? If so, see <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/cucumber-junit-platform-engine#exclusive-resources\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-jvm/tree/main/&hellip;</a> but there are some limitations inherited from JUnit."},{"owner":{"account_id":6774719,"reputation":1,"user_id":21818091,"display_name":"shugo0000"},"score":0,"creation_date":1683554155,"post_id":76175473,"comment_id":134380171,"body_markdown":"we are using Cucumber Selenium. I had tried researching it for quite a while but have not figured out where the list of tests are or how to access them, I have not found anyone who has made any attempt to access it either. While I have spent quite a while on it, there really is not any fruits of my efforts to show sadly, I do apologize for that, but would appreciate some hints or examples of how to manipulate this.","body":"we are using Cucumber Selenium. I had tried researching it for quite a while but have not figured out where the list of tests are or how to access them, I have not found anyone who has made any attempt to access it either. While I have spent quite a while on it, there really is not any fruits of my efforts to show sadly, I do apologize for that, but would appreciate some hints or examples of how to manipulate this."}],"owner":{"account_id":6774719,"reputation":1,"user_id":21818091,"display_name":"shugo0000"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683218295,"creation_date":1683218295,"question_id":76175473,"body_markdown":"Sorry if this question sounds dumb, still learning new ways of improving my tests.\r\n\r\nSay I am running a random parallel test on 4 threads and a new scenario B is to be started on thread 4 but thread 2 already has a test scenario A running that shares a resource that is locked during the test. Is there a way to get the next scenario in line and push scenario B back one on the queue? (possibly using the scenario @ tags)\r\n\r\nIs there a way to access the test lineup directly during the test to manipulate it like this?\r\n\r\nLet me know if I should give any more info or a clearer statement on it.\r\n\r\n\r\n\r\nI have Investigated it for a few days myself as well as searching here to no avail.","title":"In Cucumber Is there a way to reorder test Scenarios during a test","body":"<p>Sorry if this question sounds dumb, still learning new ways of improving my tests.</p>\n<p>Say I am running a random parallel test on 4 threads and a new scenario B is to be started on thread 4 but thread 2 already has a test scenario A running that shares a resource that is locked during the test. Is there a way to get the next scenario in line and push scenario B back one on the queue? (possibly using the scenario @ tags)</p>\n<p>Is there a way to access the test lineup directly during the test to manipulate it like this?</p>\n<p>Let me know if I should give any more info or a clearer statement on it.</p>\n<p>I have Investigated it for a few days myself as well as searching here to no avail.</p>\n"},{"tags":["java","html","netbeans","web-applications"],"answers":[{"comments":[{"owner":{"account_id":7020049,"reputation":59,"user_id":5379831,"accept_rate":0,"display_name":"xyzt"},"score":0,"creation_date":1624132125,"post_id":64345239,"comment_id":120276669,"body_markdown":"I read a dozen discussions on how to tame it and nothing came of it. One short sentence was enough here and everything works.","body":"I read a dozen discussions on how to tame it and nothing came of it. One short sentence was enough here and everything works."}],"tags":[],"owner":{"account_id":10997415,"reputation":93,"user_id":8079084,"display_name":"Adam Hanek"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1683218120,"creation_date":1602637989,"answer_id":64345239,"question_id":61468328,"body_markdown":"On each app you make: Go to the application setting by right click - properties. Under Build uncheck compile on save.","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>On each app you make: Go to the application setting by right click - properties. Under Build uncheck compile on save.</p>\n"},{"comments":[{"owner":{"account_id":20219905,"reputation":1412,"user_id":14829703,"display_name":"cursorrux"},"score":1,"creation_date":1672212789,"post_id":74936710,"comment_id":132242160,"body_markdown":"This does not provide an answer to the question, this would be more appropriate as a comment. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment).","body":"This does not provide an answer to the question, this would be more appropriate as a comment. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>."}],"tags":[],"owner":{"account_id":27370929,"reputation":1,"user_id":20876983,"display_name":"bhargav vicharapu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672206835,"creation_date":1672206835,"answer_id":74936710,"question_id":61468328,"body_markdown":"Yes the above solution worked for me ","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>Yes the above solution worked for me</p>\n"}],"owner":{"account_id":11315094,"reputation":41,"user_id":8297072,"display_name":"Nicholas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3965,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1683218120,"creation_date":1588021065,"question_id":61468328,"body_markdown":"I recently downloaded and installed Netbeans 11, JDK 13 and Apache Tomcat 9 (from the official sites). Soon I noticed that when you press &quot;Run File&quot; or Shift+F6 on a html file in a java web application, it does absolutely nothing. No response, no output, nothing. JSP files won&#39;t run as well. Unexplicably, if you select the project and press &quot;Run&quot; or the &quot;Run Project&quot; button (F6), the index.html file shows in the browser as expected, but no other pages (obviously).\r\n\r\nSo far, I&#39;ve tried the following things:\r\n\r\n - Uninstalling, deleting the cache and reinstalling in different locations (C: , D: , etc.).\r\n - Creating multiple web applications with different names in different locations.\r\n - Tried with different versions (Netbeans 10 and JDK 12). Same problem.\r\n - If you create a Java Application, the &quot;Run File&quot; option does work on Java Main Classes. Apparently, the problem is exclusive to WEB applications.","title":"Netbeans &quot;Run File&quot; doesn&#39;t work on HTML or JSP (Java Web Application)","body":"<p>I recently downloaded and installed Netbeans 11, JDK 13 and Apache Tomcat 9 (from the official sites). Soon I noticed that when you press \"Run File\" or Shift+F6 on a html file in a java web application, it does absolutely nothing. No response, no output, nothing. JSP files won't run as well. Unexplicably, if you select the project and press \"Run\" or the \"Run Project\" button (F6), the index.html file shows in the browser as expected, but no other pages (obviously).</p>\n\n<p>So far, I've tried the following things:</p>\n\n<ul>\n<li>Uninstalling, deleting the cache and reinstalling in different locations (C: , D: , etc.).</li>\n<li>Creating multiple web applications with different names in different locations.</li>\n<li>Tried with different versions (Netbeans 10 and JDK 12). Same problem.</li>\n<li>If you create a Java Application, the \"Run File\" option does work on Java Main Classes. Apparently, the problem is exclusive to WEB applications.</li>\n</ul>\n"},{"tags":["java","file","io","deprecated"],"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":3,"creation_date":1432997983,"post_id":30547589,"comment_id":49167592,"body_markdown":"Java is extremely conservative about deprecation.","body":"Java is extremely conservative about deprecation."},{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":0,"creation_date":1432998023,"post_id":30547589,"comment_id":49167604,"body_markdown":"@Radiodef if it&#39;s not about dates :)","body":"@Radiodef if it&#39;s not about dates :)"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1432998176,"post_id":30547589,"comment_id":49167647,"body_markdown":"Related: http://stackoverflow.com/questions/6903335/java-7-path-vs-file","body":"Related: <a href=\"http://stackoverflow.com/questions/6903335/java-7-path-vs-file\">stackoverflow.com/questions/6903335/java-7-path-vs-file</a>"},{"owner":{"account_id":9052,"reputation":11722,"user_id":16549,"accept_rate":75,"display_name":"kervin"},"score":0,"creation_date":1433001001,"post_id":30547589,"comment_id":49168555,"body_markdown":"@Radiodef different questions.  This is &quot;NIO.File&quot; versus &quot;IO.File&quot;, the link is &quot;File&quot; versus &quot;Path&quot;.  Both interesting questions but different.","body":"@Radiodef different questions.  This is &quot;NIO.File&quot; versus &quot;IO.File&quot;, the link is &quot;File&quot; versus &quot;Path&quot;.  Both interesting questions but different."},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":0,"creation_date":1433001294,"post_id":30547589,"comment_id":49168654,"body_markdown":"@kervin `Path`/`Files` are the replacement for `File` so it&#39;s very much related. There is some discussion over there about deprecation, but not so much with respect to &quot;why&quot;. This question is like a follow-up to that one.","body":"@kervin <code>Path</code>/<code>Files</code> are the replacement for <code>File</code> so it&#39;s very much related. There is some discussion over there about deprecation, but not so much with respect to &quot;why&quot;. This question is like a follow-up to that one."}],"answers":[{"comments":[{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":2,"creation_date":1432998859,"post_id":30547703,"comment_id":49167888,"body_markdown":"&quot;because it is not broken&quot;? [That&#39;s a joke, right?](http://java7fs.wikia.com/wiki/Why_File_sucks)","body":"&quot;because it is not broken&quot;? <a href=\"http://java7fs.wikia.com/wiki/Why_File_sucks\" rel=\"nofollow noreferrer\">That&#39;s a joke, right?</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1433000160,"post_id":30547703,"comment_id":49168291,"body_markdown":"No.  It is not a joke.  The API is not elegant, and not (by today&#39;s standard) well designed, but the API methods all work as described by the javadocs. The fact that they work means that they are not broken.","body":"No.  It is not a joke.  The API is not elegant, and not (by today&#39;s standard) well designed, but the API methods all work as described by the javadocs. The fact that they work means that they are not broken."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1433000357,"post_id":30547703,"comment_id":49168343,"body_markdown":"There is a lot of hyperbolic use of the word &quot;broken&quot; in the programming world.  But you wouldn&#39;t call a car that was 10 years old and used too much gas &quot;broken&quot;.  And this is the meaning of &quot;broken&quot; that I am using here.","body":"There is a lot of hyperbolic use of the word &quot;broken&quot; in the programming world.  But you wouldn&#39;t call a car that was 10 years old and used too much gas &quot;broken&quot;.  And this is the meaning of &quot;broken&quot; that I am using here."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1433000498,"post_id":30547703,"comment_id":49168387,"body_markdown":"Sorry but even that is wrong. For instance, `.canWrite()` doesn&#39;t work as documented on Windows. `Files.isWritable()` does however.","body":"Sorry but even that is wrong. For instance, <code>.canWrite()</code> doesn&#39;t work as documented on Windows. <code>Files.isWritable()</code> does however."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1433000695,"post_id":30547703,"comment_id":49168452,"body_markdown":"Really?  But more importantly, do you really that is enough to justify the pain of deprecating `File`?  On the scale of &quot;brokenness&quot; that is nothing like broken enough to justify deprecating even that method, let alone the entire class.  Besides, the brokenness is arguably in the Java on Windows implementation rather than the API itself.","body":"Really?  But more importantly, do you really that is enough to justify the pain of deprecating <code>File</code>?  On the scale of &quot;brokenness&quot; that is nothing like broken enough to justify deprecating even that method, let alone the entire class.  Besides, the brokenness is arguably in the Java on Windows implementation rather than the API itself."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1433001082,"post_id":30547703,"comment_id":49168580,"body_markdown":"@fge - If you were referring to this bug - http://bugs.java.com/view_bug.do?bug_id=4939819 - it was fixed in Java 7.","body":"@fge - If you were referring to this bug - <a href=\"http://bugs.java.com/view_bug.do?bug_id=4939819\" rel=\"nofollow noreferrer\">bugs.java.com/view_bug.do?bug_id=4939819</a> - it was fixed in Java 7."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1433001469,"post_id":30547703,"comment_id":49168703,"body_markdown":"Well, as I see it, unfortunately, `File` is here to stay; but its innumerable shortcomings sort of have gone unnoticed except by people like me who take filesystem related jobs seriously; I&#39;d have never dreamt of doing any serious fs job in Java before JSR 203. In that sense, `File` is really broken. And I believe not enough effort is put into steering Java users to the new API, in spite of its age.","body":"Well, as I see it, unfortunately, <code>File</code> is here to stay; but its innumerable shortcomings sort of have gone unnoticed except by people like me who take filesystem related jobs seriously; I&#39;d have never dreamt of doing any serious fs job in Java before JSR 203. In that sense, <code>File</code> is really broken. And I believe not enough effort is put into steering Java users to the new API, in spite of its age."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1433001664,"post_id":30547703,"comment_id":49168781,"body_markdown":"As to the bug you mention, no, it&#39;s the opposite; `.canWrite()` would return true whereas in fact the user didn&#39;t have the necessary privileges. This was in an AD environment.","body":"As to the bug you mention, no, it&#39;s the opposite; <code>.canWrite()</code> would return true whereas in fact the user didn&#39;t have the necessary privileges. This was in an AD environment."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1539042107,"post_id":30547703,"comment_id":92348949,"body_markdown":"@fge - The keepers of the Java standard take a different view.  Admittedly (2018) there is now more willingness to force the issue with things like withdrawal of Applets / JWS, closing off the internal APIs, etc.  But that only seems to happen when the motivation is to simplify / reduce cost / increase revenue for Oracle.","body":"@fge - The keepers of the Java standard take a different view.  Admittedly (2018) there is now more willingness to force the issue with things like withdrawal of Applets / JWS, closing off the internal APIs, etc.  But that only seems to happen when the motivation is to simplify / reduce cost / increase revenue for Oracle."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":9,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1593991108,"creation_date":1432998412,"answer_id":30547703,"question_id":30547589,"body_markdown":"It is not deprecated because it is not broken.  Or more precisely, because the Java team and/or Oracle management do not think it is sufficiently broken to warrant the level of disruption and pushback that deprecation of `File` would cause&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nOracle (and Sun before them) reserved deprecation for APIs that were deemed to be harmful / dangerous to use, and impossible to fix without breaking binary (or semantic) compatibility.\r\n\r\nThe `java.io.File` API is merely old-fashioned and clunky&lt;sup&gt;2&lt;/sup&gt;, but not directly harmful.  There are other standard APIs that depend on `File`, not to mention many 3rd party APIs and (probably) 100&#39;s of millions of lines of customer code.  There is no need to signal to the world that all of that code needs to be overhauled.\r\n\r\n------------\r\n\r\n&lt;sup&gt;1 - Obviously, some people will disagree with that.&lt;/sup&gt;\r\n \r\n&lt;sup&gt;2 - @fge points out that some File methods don&#39;t behave correctly on some platforms (particularly Windows / AD) in some versions of Java.  However, those were / are implementation bugs, not fundamental API flaws.  On UNIX / Linux platforms, the methods semantics are more or less correct&lt;sup&gt;2&lt;/sup&gt;.&lt;/sup&gt;\r\n\r\n&lt;sup&gt;3 - A couple of &quot;less correct&quot; aspects are that `File.length()` returns zero for files in the &quot;/proc&quot; tree, and that strange things happen when you access a FAT file system mounted on Linux and try to access if from Java.&lt;/sup&gt;","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>It is not deprecated because it is not broken.  Or more precisely, because the Java team and/or Oracle management do not think it is sufficiently broken to warrant the level of disruption and pushback that deprecation of <code>File</code> would cause<sup>1</sup>.</p>\n<p>Oracle (and Sun before them) reserved deprecation for APIs that were deemed to be harmful / dangerous to use, and impossible to fix without breaking binary (or semantic) compatibility.</p>\n<p>The <code>java.io.File</code> API is merely old-fashioned and clunky<sup>2</sup>, but not directly harmful.  There are other standard APIs that depend on <code>File</code>, not to mention many 3rd party APIs and (probably) 100's of millions of lines of customer code.  There is no need to signal to the world that all of that code needs to be overhauled.</p>\n<hr />\n<p><sup>1 - Obviously, some people will disagree with that.</sup></p>\n<p><sup>2 - @fge points out that some File methods don't behave correctly on some platforms (particularly Windows / AD) in some versions of Java.  However, those were / are implementation bugs, not fundamental API flaws.  On UNIX / Linux platforms, the methods semantics are more or less correct<sup>2</sup>.</sup></p>\n<p><sup>3 - A couple of &quot;less correct&quot; aspects are that <code>File.length()</code> returns zero for files in the &quot;/proc&quot; tree, and that strange things happen when you access a FAT file system mounted on Linux and try to access if from Java.</sup></p>\n"},{"comments":[{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":1,"creation_date":1432999831,"post_id":30547863,"comment_id":49168189,"body_markdown":"Is this really why it isn&#39;t *deprecated*, though? All those APIs which use `File` would still work with deprecation, only compiling with warnings.","body":"Is this really why it isn&#39;t <i>deprecated</i>, though? All those APIs which use <code>File</code> would still work with deprecation, only compiling with warnings."},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":0,"creation_date":1433000078,"post_id":30547863,"comment_id":49168270,"body_markdown":"@Radiodef there is however the (little known) fact that a `Path` can be an entity which _is not_ on the default filesystem, ie your hard disk; that makes some core classes of the JDK, for instance `FileOutputStream`, non reproducible with JSR 203 (which is why there is `Files.newOutputStream()`).","body":"@Radiodef there is however the (little known) fact that a <code>Path</code> can be an entity which <i>is not</i> on the default filesystem, ie your hard disk; that makes some core classes of the JDK, for instance <code>FileOutputStream</code>, non reproducible with JSR 203 (which is why there is <code>Files.newOutputStream()</code>)."}],"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683218104,"creation_date":1432999289,"answer_id":30547863,"question_id":30547589,"body_markdown":"Because it is too ingrained within the JDK.\r\n\r\nFile has been there since the early days of Java; and in spite of its innumerable flaws ([some of them listed here](https://web.archive.org/web/20170102181548/https://java7fs.wikia.com/wiki/Why_File_sucks#mw-content-text), but there are others), the amount of effort required to migrate all the code to the &quot;new&quot; JSR 203 API (which is already 4 years old!!) is immense.\r\n\r\nThe main problem is in fact the awareness of JSR 203, or lack thereof; even today, the vast majority of tutorials on the net still use File; the best one can do is write more tutorials using JSR 203, more code using it etc etc.\r\n\r\nI am in fact one of the main proponents of the new API, to the point of being annoying on this aspect :), but I do have code to prove my point:\r\n\r\n* a [filesystem over FTP](https://github.com/fge/java7-fs-ftp),\r\n* [another over dropbox](https://github.com/fge/java7-fs-dropbox),\r\n* [another over box.com](https://github.com/fge/java7-fs-box),\r\n* a [helper library to develop new filesystems](https://github.com/fge/java7-fs-base),\r\n* and finally a [helper library complementing the JDK&#39;s `Files`](https://github.com/fge/java7-fs-more) (and fixing a few bugs in the process).\r\n\r\nAt this stage, it is a matter of patience; answering questions on SO using the new way, or even old questions etc. And it&#39;s an uphill battle.\r\n","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>Because it is too ingrained within the JDK.</p>\n<p>File has been there since the early days of Java; and in spite of its innumerable flaws (<a href=\"https://web.archive.org/web/20170102181548/https://java7fs.wikia.com/wiki/Why_File_sucks#mw-content-text\" rel=\"nofollow noreferrer\">some of them listed here</a>, but there are others), the amount of effort required to migrate all the code to the &quot;new&quot; JSR 203 API (which is already 4 years old!!) is immense.</p>\n<p>The main problem is in fact the awareness of JSR 203, or lack thereof; even today, the vast majority of tutorials on the net still use File; the best one can do is write more tutorials using JSR 203, more code using it etc etc.</p>\n<p>I am in fact one of the main proponents of the new API, to the point of being annoying on this aspect :), but I do have code to prove my point:</p>\n<ul>\n<li>a <a href=\"https://github.com/fge/java7-fs-ftp\" rel=\"nofollow noreferrer\">filesystem over FTP</a>,</li>\n<li><a href=\"https://github.com/fge/java7-fs-dropbox\" rel=\"nofollow noreferrer\">another over dropbox</a>,</li>\n<li><a href=\"https://github.com/fge/java7-fs-box\" rel=\"nofollow noreferrer\">another over box.com</a>,</li>\n<li>a <a href=\"https://github.com/fge/java7-fs-base\" rel=\"nofollow noreferrer\">helper library to develop new filesystems</a>,</li>\n<li>and finally a <a href=\"https://github.com/fge/java7-fs-more\" rel=\"nofollow noreferrer\">helper library complementing the JDK's <code>Files</code></a> (and fixing a few bugs in the process).</li>\n</ul>\n<p>At this stage, it is a matter of patience; answering questions on SO using the new way, or even old questions etc. And it's an uphill battle.</p>\n"},{"tags":[],"owner":{"account_id":9052,"reputation":11722,"user_id":16549,"accept_rate":75,"display_name":"kervin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1433009762,"creation_date":1433009762,"answer_id":30549693,"question_id":30547589,"body_markdown":"It&#39;s not just legacy.  Newer APIs continue to use the **File** object over the **(** *Path* **+** *NIO.Files* **+** *Channel* **)** combination because it&#39;s a lot simpler API to understand.\r\n\r\nI am **not** advocating its use.  But just pointing out that the single old *File* Object API provides a single point for exposing the API that some developers seeking simplicity gravitate towards.\r\n\r\nIt is harder for many developers to grasp the difference between a *Path* and a *File*.  They are two different things, that&#39;s why we still have java.nio.file.**Files** right alongside java.nio.file.**Paths**.  A Path is like a URI, a locator, it doesn&#39;t have to point to anything.  While a File is a concrete representation of a File-System object.  \r\n\r\nNIO separates these concepts, while the old API held them all in a single object.  I don&#39;t think that&#39;s *necessarily* wrong per se.  It just traps a lot of useful Path related API in a *File* object, where that API is useful beyond these objects.\r\n\r\nSo I suspect the way forward might be **&quot;How much API do you need?&quot;** If you need the improved functionality of Channels, increased independence of Paths, etc. then NIO is definitely the way to go without option really.  \r\n\r\nIf you&#39;re a junior developer or a student who needs a quick and basic Object-oriented way for opening a File-System object and running a few standard FS API calls before closing, why not use a simpler **File** object?  Java isn&#39;t just for experts after all.","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>It's not just legacy.  Newer APIs continue to use the <strong>File</strong> object over the <strong>(</strong> <em>Path</em> <strong>+</strong> <em>NIO.Files</em> <strong>+</strong> <em>Channel</em> <strong>)</strong> combination because it's a lot simpler API to understand.</p>\n\n<p>I am <strong>not</strong> advocating its use.  But just pointing out that the single old <em>File</em> Object API provides a single point for exposing the API that some developers seeking simplicity gravitate towards.</p>\n\n<p>It is harder for many developers to grasp the difference between a <em>Path</em> and a <em>File</em>.  They are two different things, that's why we still have java.nio.file.<strong>Files</strong> right alongside java.nio.file.<strong>Paths</strong>.  A Path is like a URI, a locator, it doesn't have to point to anything.  While a File is a concrete representation of a File-System object.  </p>\n\n<p>NIO separates these concepts, while the old API held them all in a single object.  I don't think that's <em>necessarily</em> wrong per se.  It just traps a lot of useful Path related API in a <em>File</em> object, where that API is useful beyond these objects.</p>\n\n<p>So I suspect the way forward might be <strong>\"How much API do you need?\"</strong> If you need the improved functionality of Channels, increased independence of Paths, etc. then NIO is definitely the way to go without option really.  </p>\n\n<p>If you're a junior developer or a student who needs a quick and basic Object-oriented way for opening a File-System object and running a few standard FS API calls before closing, why not use a simpler <strong>File</strong> object?  Java isn't just for experts after all.</p>\n"}],"owner":{"account_id":3205177,"reputation":4088,"user_id":2706344,"accept_rate":46,"display_name":"principal-ideal-domain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3342,"favorite_count":0,"down_vote_count":2,"up_vote_count":7,"answer_count":3,"score":5,"last_activity_date":1683218104,"creation_date":1432997721,"question_id":30547589,"body_markdown":"Since Java 7 there the `java.nio.file` package. So why is `java.io.File`still not deprecated in Java 8?","title":"Why isn&#39;t java.io.File deprecated?","body":"<p>Since Java 7 there the <code>java.nio.file</code> package. So why is <code>java.io.File</code>still not deprecated in Java 8?</p>\n"},{"tags":["java","jpa","lazy-loading"],"comments":[{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1682873678,"post_id":76142372,"comment_id":134280130,"body_markdown":"Try changing `JOIN FETCH` to `LEFT JOIN FETCH` and `findByIdWithMoves` to `findById_WithMoves`","body":"Try changing <code>JOIN FETCH</code> to <code>LEFT JOIN FETCH</code> and <code>findByIdWithMoves</code> to <code>findById_WithMoves</code>"},{"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"score":0,"creation_date":1682874161,"post_id":76142372,"comment_id":134280189,"body_markdown":"@AndreyB.Panfilov Thanks! Changing it to LEFT JOIN FETCH solved my problem. I&#39;ll accept if you want to post this as the answer","body":"@AndreyB.Panfilov Thanks! Changing it to LEFT JOIN FETCH solved my problem. I&#39;ll accept if you want to post this as the answer"}],"answers":[{"tags":[],"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683217509,"creation_date":1683129465,"answer_id":76165936,"question_id":76142372,"body_markdown":"The problem arose from the fact that ```List&lt;String&gt; Moves``` is empty for the initial database fetch. So even though moves had been initialized, there was nothing for ```Game``` to join to and the standard JOIN will not return items without the specified association.\r\n\r\nWhat I needed was a LEFT JOIN because they always returns all rows of the left side (```Game```) entity. \r\n\r\n```@Query(&quot;SELECT g FROM Game g LEFT JOIN FETCH g.moves WHERE g.id = :id&quot;)```\r\n\r\n","title":"Issue using @Query to fetch lazy loaded association in JPA","body":"<p>The problem arose from the fact that <code>List&lt;String&gt; Moves</code> is empty for the initial database fetch. So even though moves had been initialized, there was nothing for <code>Game</code> to join to and the standard JOIN will not return items without the specified association.</p>\n<p>What I needed was a LEFT JOIN because they always returns all rows of the left side (<code>Game</code>) entity.</p>\n<p><code>@Query(&quot;SELECT g FROM Game g LEFT JOIN FETCH g.moves WHERE g.id = :id&quot;)</code></p>\n"}],"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76165936,"answer_count":1,"score":0,"last_activity_date":1683217509,"creation_date":1682872693,"question_id":76142372,"body_markdown":"So I have an entity **Game** which contains \r\n```\r\n    @ElementCollection\r\n    private List&lt;String&gt; moves;\r\n```\r\nI only require this field for one specific call so the default behavior of Lazy fetching is the best choice. I don&#39;t have much experience with lazy loading so I looked around and it seems like the two preferred choices for implementing lazy loading are @EntityGraph and @Query. I looked into both and while I don&#39;t have a great understanding for the best use cases for each, I decided to use @Query.\r\n\r\n```\r\npublic interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\r\n    @Query(&quot;SELECT g FROM Game g JOIN FETCH g.moves WHERE g.id = :id&quot;)\r\n    Optional&lt;Game&gt; findByIdWithMoves(@Param(&quot;id&quot;) Long id);\r\n}\r\n```\r\n\r\nSeems simple and straight forward but this method does not find anything. The regular findById method returns the Game but my custom query does not find anything. I&#39;ve looked up other examples like this one https://stackoverflow.com/questions/15359306/how-to-fetch-fetchtype-lazy-associations-with-jpa-and-hibernate-in-a-spring-cont and made minor changes like changing ***long*** to ***Long*** and tried the query without the Optional container so that it fits exactly but its still not working and I&#39;m stuck.","title":"Issue using @Query to fetch lazy loaded association in JPA","body":"<p>So I have an entity <strong>Game</strong> which contains</p>\n<pre><code>    @ElementCollection\n    private List&lt;String&gt; moves;\n</code></pre>\n<p>I only require this field for one specific call so the default behavior of Lazy fetching is the best choice. I don't have much experience with lazy loading so I looked around and it seems like the two preferred choices for implementing lazy loading are @EntityGraph and @Query. I looked into both and while I don't have a great understanding for the best use cases for each, I decided to use @Query.</p>\n<pre><code>public interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\n    @Query(&quot;SELECT g FROM Game g JOIN FETCH g.moves WHERE g.id = :id&quot;)\n    Optional&lt;Game&gt; findByIdWithMoves(@Param(&quot;id&quot;) Long id);\n}\n</code></pre>\n<p>Seems simple and straight forward but this method does not find anything. The regular findById method returns the Game but my custom query does not find anything. I've looked up other examples like this one <a href=\"https://stackoverflow.com/questions/15359306/how-to-fetch-fetchtype-lazy-associations-with-jpa-and-hibernate-in-a-spring-cont\">How to fetch FetchType.LAZY associations with JPA and Hibernate in a Spring Controller</a> and made minor changes like changing <em><strong>long</strong></em> to <em><strong>Long</strong></em> and tried the query without the Optional container so that it fits exactly but its still not working and I'm stuck.</p>\n"},{"tags":["java","spring","easypost"],"answers":[{"comments":[{"owner":{"account_id":19041612,"reputation":74,"user_id":13901580,"display_name":"Logan Simonsen"},"score":1,"creation_date":1683217175,"post_id":76175307,"comment_id":134336301,"body_markdown":"Note that the code you have above is specific to tracking updates. `status_detail` has no relationship with refunds for unused labels.","body":"Note that the code you have above is specific to tracking updates. <code>status_detail</code> has no relationship with refunds for unused labels."},{"owner":{"account_id":21023381,"reputation":23,"user_id":15449203,"display_name":"Johni"},"score":0,"creation_date":1683234369,"post_id":76175307,"comment_id":134339917,"body_markdown":"Thank you and if i won&#39;t be checking `status_detail` for `refund,successful` to you know the property that will have `refund.successful`?","body":"Thank you and if i won&#39;t be checking <code>status_detail</code> for <code>refund,successful</code> to you know the property that will have <code>refund.successful</code>?"}],"tags":[],"owner":{"account_id":19041612,"reputation":74,"user_id":13901580,"display_name":"Logan Simonsen"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683217045,"creation_date":1683217045,"answer_id":76175307,"question_id":76039688,"body_markdown":"A `refund.successful` Event is created whenever a refund is successfully processed on the EasyPost backend. This can happen days or weeks after the refund is requested. USPS specifically takes up to 15-30 days to refund labels. Unfortunately I don&#39;t believe there is a way to mock this behavior in the `test` environment. \r\n\r\nhttps://www.easypost.com/docs/api#events\r\n&gt;Refund\r\nA &quot;refund.successful&quot; Event is created whenever a non-instantaneous Refund request is completed. USPS is the best example of this, as USPS postage takes 15+ days to be refunded after the initial refund creation.","title":"Easypost webhook refund event","body":"<p>A <code>refund.successful</code> Event is created whenever a refund is successfully processed on the EasyPost backend. This can happen days or weeks after the refund is requested. USPS specifically takes up to 15-30 days to refund labels. Unfortunately I don't believe there is a way to mock this behavior in the <code>test</code> environment.</p>\n<p><a href=\"https://www.easypost.com/docs/api#events\" rel=\"nofollow noreferrer\">https://www.easypost.com/docs/api#events</a></p>\n<blockquote>\n<p>Refund\nA &quot;refund.successful&quot; Event is created whenever a non-instantaneous Refund request is completed. USPS is the best example of this, as USPS postage takes 15+ days to be refunded after the initial refund creation.</p>\n</blockquote>\n"}],"owner":{"account_id":21023381,"reputation":23,"user_id":15449203,"display_name":"Johni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683217045,"creation_date":1681769710,"question_id":76039688,"body_markdown":"What webhook event should i listen to to know that the refund of a shipment label was accepted by the carrier?\r\n\r\nHere&#39;s how I do it now, but unfortunately when I run the easypost webhook locally, it does not emit the event even though a refund is submitted. I never get &#39;return_update&quot; in statusDetail. Here&#39;s my code:\r\n\r\n    if (statusDetail.equals(&quot;status_update&quot;) || statusDetail.equals(&quot;out_for_delivery&quot;) || statusDetail.equals(&quot;arrived_at_destination&quot;)) {\r\n        String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\r\n    \r\n        Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\r\n    \r\n        if (statusDetail.equals(&quot;arrived_at_destination&quot;)) {\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.DELIVERED);\r\n            userShipment.setStatus(ShipmentStatus.DELIVERED);\r\n            userShipment.setDeliveryDate(Instant.now());\r\n        } else {\r\n            String shipmentStatus = (String) result.get(&quot;status&quot;);\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\r\n            Long estDeliveryDateMillis = (Long) result.get(&quot;estDeliveryDate&quot;);\r\n            userShipment.setDeliveryDate(Instant.ofEpochMilli(estDeliveryDateMillis));\r\n        }\r\n    \r\n        shipmentService.updateShipment(userShipment);\r\n        activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentStatusChangeMessage(userShipment), ActivityMessageType.STATUS_UPDATE);\r\n    } else if (statusDetail.equals(&quot;return_update&quot;)) {\r\n        String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\r\n        Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\r\n        String shipmentStatus = (String) result.get(&quot;status&quot;);\r\n    \r\n        String chargeId = userShipment.getStripeChargeId();\r\n        try {\r\n            // Refund successful\r\n            Refund refund = stripeService.refund(chargeId);\r\n            userShipment.setStripeRefundId(refund.getId());\r\n            userShipment.setStatus(ShipmentStatus.REFUND_PROCESSED);\r\n            userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\r\n    \r\n            shipmentService.updateShipment(userShipment);\r\n            double refundAmount = stripeService.getRefundAmount(refund);\r\n            activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentReturnProcessed(userShipment, refundAmount), ActivityMessageType.RETURN_PROCESSED);\r\n        } catch (StripeException e) {\r\n            System.err.println(&quot;Error issuing refund: &quot; + e.getMessage());\r\n        }\r\n    }","title":"Easypost webhook refund event","body":"<p>What webhook event should i listen to to know that the refund of a shipment label was accepted by the carrier?</p>\n<p>Here's how I do it now, but unfortunately when I run the easypost webhook locally, it does not emit the event even though a refund is submitted. I never get 'return_update&quot; in statusDetail. Here's my code:</p>\n<pre><code>if (statusDetail.equals(&quot;status_update&quot;) || statusDetail.equals(&quot;out_for_delivery&quot;) || statusDetail.equals(&quot;arrived_at_destination&quot;)) {\n    String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\n\n    Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\n\n    if (statusDetail.equals(&quot;arrived_at_destination&quot;)) {\n        userShipment.setEasypostStatus(EasypostShipmentStatus.DELIVERED);\n        userShipment.setStatus(ShipmentStatus.DELIVERED);\n        userShipment.setDeliveryDate(Instant.now());\n    } else {\n        String shipmentStatus = (String) result.get(&quot;status&quot;);\n        userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\n        Long estDeliveryDateMillis = (Long) result.get(&quot;estDeliveryDate&quot;);\n        userShipment.setDeliveryDate(Instant.ofEpochMilli(estDeliveryDateMillis));\n    }\n\n    shipmentService.updateShipment(userShipment);\n    activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentStatusChangeMessage(userShipment), ActivityMessageType.STATUS_UPDATE);\n} else if (statusDetail.equals(&quot;return_update&quot;)) {\n    String easypostShipmentId = (String) result.get(&quot;shipmentId&quot;);\n    Shipment userShipment = shipmentService.retrieveShipmentFromEasypostId(easypostShipmentId);\n    String shipmentStatus = (String) result.get(&quot;status&quot;);\n\n    String chargeId = userShipment.getStripeChargeId();\n    try {\n        // Refund successful\n        Refund refund = stripeService.refund(chargeId);\n        userShipment.setStripeRefundId(refund.getId());\n        userShipment.setStatus(ShipmentStatus.REFUND_PROCESSED);\n        userShipment.setEasypostStatus(EasypostShipmentStatus.valueOf(shipmentStatus.toUpperCase()));\n\n        shipmentService.updateShipment(userShipment);\n        double refundAmount = stripeService.getRefundAmount(refund);\n        activityLoggerService.insert(userShipment.getUser(), userShipment, activityLoggerService.getShipmentReturnProcessed(userShipment, refundAmount), ActivityMessageType.RETURN_PROCESSED);\n    } catch (StripeException e) {\n        System.err.println(&quot;Error issuing refund: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","tensorflow","ocr"],"owner":{"account_id":404833,"reputation":1416,"user_id":773371,"accept_rate":82,"display_name":"gcdev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216964,"creation_date":1683208581,"question_id":76174004,"body_markdown":"I&#39;m working on a Java Android project that needs to OCR bitmaps with `width=1887` and `height=1061`.\r\n\r\nI&#39;ve managed to do this successfully with both [MLKit][1] and also [TessTwo][2].\r\n\r\nI&#39;d like to do the same thing with [TensorFlow][3].\r\n\r\nI&#39;ve downloaded the [recommended git repo][4] with its Kotlin code. Kotlin is not my language though, so I&#39;m struggling to figure things out in it. But I was able to get that sample running and working fine via Android Studio on my Android device.\r\n\r\nThen, once I knew the sample worked, in my own project, I imported the following files:\r\n\r\n - ImageUtils.kt\r\n - ModelExecutionResult.kt\r\n - OCRModelExecutor.kt\r\n - text_detection.tflite\r\n - text_recognition.tflite\r\n\r\nI then wrote the following Java code and was able to get the process working successfully in my own app.\r\n\r\n    public static void ocrViaTensorFlow(Bitmap myBmp, Context context)\r\n    {\r\n        try\r\n        {\r\n            OCRModelExecutor tfOcrExe = null;\r\n            try\r\n            {\r\n                Lock lock = new ReentrantLock();\r\n                lock.lock();\r\n                try {\r\n                    if (tfOcrExe != null) {\r\n                        tfOcrExe.close();\r\n                        tfOcrExe = null;\r\n                    }\r\n                    try {\r\n                        tfOcrExe = new OCRModelExecutor(context, false);\r\n                    } catch (Exception e) {\r\n                        Log.e(&quot;ocrViaTensorFlow-ERR-00&quot;, e.getMessage(), e);\r\n                    }\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n    \r\n                lock.lock();\r\n                try {\r\n                    if (tfOcrExe != null) {\r\n                        try {\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;About to do TensorFlow OCR...&quot;);\r\n                            ModelExecutionResult tfResult = tfOcrExe.execute(myBmp);\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Items: &quot; + tfResult.getItemsFound());\r\n                            Map&lt;String, Integer&gt; itms = tfResult.getItemsFound();\r\n                            StringBuilder output = new StringBuilder();\r\n                            for (Map.Entry&lt;String, Integer&gt; itm : itms.entrySet())\r\n                            {\r\n                                String wrd = itm.getKey();\r\n                                Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Item: &quot; + itm.getKey());\r\n                                output.append(&quot; &quot;).append(wrd);\r\n                            }\r\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;TensorFlow Text: &quot; + output.toString().trim());\r\n                        } catch (Exception e) {\r\n                            Log.e(&quot;ocrViaTensorFlow-ERR-01&quot;, e.getMessage(), e);\r\n                        }\r\n                    }\r\n                } finally {\r\n                    lock.unlock();\r\n                }\r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                Log.e(&quot;ocrViaTensorFlow-ERR-02&quot;, ex.getMessage(), ex);\r\n            }\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n            Log.e(&quot;ocrViaTensorFlow-ERR-03&quot;, ex.getMessage(), ex);\r\n        }\r\n        myBmp.recycle();\r\n    }\r\n\r\nHowever, the results were terribly subpar (words run together, missing words and letters, confusing order) and very, very, very slow (30-40 seconds).\r\n\r\nHere is an example of an image being passed in to the process:\r\n\r\n[![Initial bitmap][5]][5]\r\n\r\nObviously, the text I would like get from this is something like the following:\r\n\r\n**Try &quot;Alexa, play the trailer&quot; Top Gun: Maverick (91512) IMDb 8.3/10 2 hr 13 min 2022 PG-13 X-Ray CC After thirty years, Maverick (Tom Cruise) is still pushing the envelope as a top naval aviator, but must confront ghosts of his past wen he leads TOP GUN&#39;s elite graduates on a mission that demands the ultimate sacrifice from ... Starring: Tom Cruise, Val Kilmer, Miles Teller Director: Joseph Kosinski Audio: Spanish, Japanese, Tamil, French, Portuguese, Kannada, Malayalam, German, Hindi, Polish, Italia... Resume Watch from Watch Add to More Ways Beginning Trailer Watchlist to Watch 1 hour 45 minutes remaining JOSEPH KOSINSKI AS DIRECTOR TOM CRUISE TOP GUN MAVERICK**\r\n\r\nInstead, I get this image back:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nAnd the OCR text results are as follows:\r\n\r\n**resume beginning krk yalexaplaythetrailer erthirtyyears 2hrizmin2o22 tomcruisevalkilme josephkosinski 1915127 gune too watch elitegraduates edirector watchlist maverick**\r\n\r\nI suspect these problems are at least partly because the Kotlin code from the Git repo appears to resize my bitmap from 1887x1061 to 200x31 for text recognition, and elsewhere appears to resize it to 320x320 for text detection.\r\n\r\nI&#39;m still struggling to understand the Kotlin code and what it does, but I tried changing those resizing variables to match the proportions of my images and got the following error:\r\n\r\n    Cannot copy to a TensorFlowLite tensor (input_images) with 1228800 bytes from a Java Buffer with 5334000 bytes.\r\n\r\nI&#39;m frankly surprised at how much more difficult this has been to implement than TessTwo or MLKit. Is there an easy way to adjust the `detectionImageHeight` and `detectionImageWidth` constants from the Git code without breaking the process? Is there an easy way to adjust `recognitionImageHeight` and `recognitionImageWidth` without breaking the process?\r\n\r\nOr is there a better sample (preferably of Java code) that&#39;s more easily customizable out there somewhere?\r\n\r\nOr, more directly, how can I get better TensorFlow OCR results for my bitmaps and also speed up the process?\r\n\r\nIn answer, I would really appreciate code samples, or links to code samples. Thanks!\r\n\r\n\r\n  [1]: https://developers.google.com/ml-kit/vision/text-recognition/v2/android\r\n  [2]: https://github.com/rmtheis/tess-two\r\n  [3]: https://www.tensorflow.org/lite/examples/optical_character_recognition/overview\r\n  [4]: https://github.com/tensorflow/examples/tree/master/lite/examples/optical_character_recognition/android\r\n  [5]: https://i.stack.imgur.com/HtdXv.png\r\n  [6]: https://i.stack.imgur.com/EmjR5.png","title":"How to use larger images in TensorFlow OCR in Android?","body":"<p>I'm working on a Java Android project that needs to OCR bitmaps with <code>width=1887</code> and <code>height=1061</code>.</p>\n<p>I've managed to do this successfully with both <a href=\"https://developers.google.com/ml-kit/vision/text-recognition/v2/android\" rel=\"nofollow noreferrer\">MLKit</a> and also <a href=\"https://github.com/rmtheis/tess-two\" rel=\"nofollow noreferrer\">TessTwo</a>.</p>\n<p>I'd like to do the same thing with <a href=\"https://www.tensorflow.org/lite/examples/optical_character_recognition/overview\" rel=\"nofollow noreferrer\">TensorFlow</a>.</p>\n<p>I've downloaded the <a href=\"https://github.com/tensorflow/examples/tree/master/lite/examples/optical_character_recognition/android\" rel=\"nofollow noreferrer\">recommended git repo</a> with its Kotlin code. Kotlin is not my language though, so I'm struggling to figure things out in it. But I was able to get that sample running and working fine via Android Studio on my Android device.</p>\n<p>Then, once I knew the sample worked, in my own project, I imported the following files:</p>\n<ul>\n<li>ImageUtils.kt</li>\n<li>ModelExecutionResult.kt</li>\n<li>OCRModelExecutor.kt</li>\n<li>text_detection.tflite</li>\n<li>text_recognition.tflite</li>\n</ul>\n<p>I then wrote the following Java code and was able to get the process working successfully in my own app.</p>\n<pre><code>public static void ocrViaTensorFlow(Bitmap myBmp, Context context)\n{\n    try\n    {\n        OCRModelExecutor tfOcrExe = null;\n        try\n        {\n            Lock lock = new ReentrantLock();\n            lock.lock();\n            try {\n                if (tfOcrExe != null) {\n                    tfOcrExe.close();\n                    tfOcrExe = null;\n                }\n                try {\n                    tfOcrExe = new OCRModelExecutor(context, false);\n                } catch (Exception e) {\n                    Log.e(&quot;ocrViaTensorFlow-ERR-00&quot;, e.getMessage(), e);\n                }\n            } finally {\n                lock.unlock();\n            }\n\n            lock.lock();\n            try {\n                if (tfOcrExe != null) {\n                    try {\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;About to do TensorFlow OCR...&quot;);\n                        ModelExecutionResult tfResult = tfOcrExe.execute(myBmp);\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Items: &quot; + tfResult.getItemsFound());\n                        Map&lt;String, Integer&gt; itms = tfResult.getItemsFound();\n                        StringBuilder output = new StringBuilder();\n                        for (Map.Entry&lt;String, Integer&gt; itm : itms.entrySet())\n                        {\n                            String wrd = itm.getKey();\n                            Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;Item: &quot; + itm.getKey());\n                            output.append(&quot; &quot;).append(wrd);\n                        }\n                        Log.wtf(&quot;ocrViaTensorFlow&quot;, &quot;TensorFlow Text: &quot; + output.toString().trim());\n                    } catch (Exception e) {\n                        Log.e(&quot;ocrViaTensorFlow-ERR-01&quot;, e.getMessage(), e);\n                    }\n                }\n            } finally {\n                lock.unlock();\n            }\n        }\n        catch (Exception ex)\n        {\n            Log.e(&quot;ocrViaTensorFlow-ERR-02&quot;, ex.getMessage(), ex);\n        }\n    }\n    catch (Exception ex)\n    {\n        Log.e(&quot;ocrViaTensorFlow-ERR-03&quot;, ex.getMessage(), ex);\n    }\n    myBmp.recycle();\n}\n</code></pre>\n<p>However, the results were terribly subpar (words run together, missing words and letters, confusing order) and very, very, very slow (30-40 seconds).</p>\n<p>Here is an example of an image being passed in to the process:</p>\n<p><a href=\"https://i.stack.imgur.com/HtdXv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HtdXv.png\" alt=\"Initial bitmap\" /></a></p>\n<p>Obviously, the text I would like get from this is something like the following:</p>\n<p><strong>Try &quot;Alexa, play the trailer&quot; Top Gun: Maverick (91512) IMDb 8.3/10 2 hr 13 min 2022 PG-13 X-Ray CC After thirty years, Maverick (Tom Cruise) is still pushing the envelope as a top naval aviator, but must confront ghosts of his past wen he leads TOP GUN's elite graduates on a mission that demands the ultimate sacrifice from ... Starring: Tom Cruise, Val Kilmer, Miles Teller Director: Joseph Kosinski Audio: Spanish, Japanese, Tamil, French, Portuguese, Kannada, Malayalam, German, Hindi, Polish, Italia... Resume Watch from Watch Add to More Ways Beginning Trailer Watchlist to Watch 1 hour 45 minutes remaining JOSEPH KOSINSKI AS DIRECTOR TOM CRUISE TOP GUN MAVERICK</strong></p>\n<p>Instead, I get this image back:</p>\n<p><a href=\"https://i.stack.imgur.com/EmjR5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EmjR5.png\" alt=\"enter image description here\" /></a></p>\n<p>And the OCR text results are as follows:</p>\n<p><strong>resume beginning krk yalexaplaythetrailer erthirtyyears 2hrizmin2o22 tomcruisevalkilme josephkosinski 1915127 gune too watch elitegraduates edirector watchlist maverick</strong></p>\n<p>I suspect these problems are at least partly because the Kotlin code from the Git repo appears to resize my bitmap from 1887x1061 to 200x31 for text recognition, and elsewhere appears to resize it to 320x320 for text detection.</p>\n<p>I'm still struggling to understand the Kotlin code and what it does, but I tried changing those resizing variables to match the proportions of my images and got the following error:</p>\n<pre><code>Cannot copy to a TensorFlowLite tensor (input_images) with 1228800 bytes from a Java Buffer with 5334000 bytes.\n</code></pre>\n<p>I'm frankly surprised at how much more difficult this has been to implement than TessTwo or MLKit. Is there an easy way to adjust the <code>detectionImageHeight</code> and <code>detectionImageWidth</code> constants from the Git code without breaking the process? Is there an easy way to adjust <code>recognitionImageHeight</code> and <code>recognitionImageWidth</code> without breaking the process?</p>\n<p>Or is there a better sample (preferably of Java code) that's more easily customizable out there somewhere?</p>\n<p>Or, more directly, how can I get better TensorFlow OCR results for my bitmaps and also speed up the process?</p>\n<p>In answer, I would really appreciate code samples, or links to code samples. Thanks!</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":19285386,"reputation":482,"user_id":14096471,"display_name":"Vlad Ulshin"},"score":0,"creation_date":1683167552,"post_id":76168896,"comment_id":134326141,"body_markdown":"I am afraid your research is correct. Mockito can&#39;t mock private field or method. without refactoring or using powermockito you could try to use old fashioned java java reflection to setup a test case.","body":"I am afraid your research is correct. Mockito can&#39;t mock private field or method. without refactoring or using powermockito you could try to use old fashioned java java reflection to setup a test case."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":3,"creation_date":1683180720,"post_id":76168896,"comment_id":134327465,"body_markdown":"Why &quot;is it not possible&quot; to pass in the values? The code as presented is not testable and its design needs to be changed, to account for testability. https://stackoverflow.com/q/74027324/112968 more or less describes the same problem and suggests several possible solutions.","body":"Why &quot;is it not possible&quot; to pass in the values? The code as presented is not testable and its design needs to be changed, to account for testability. <a href=\"https://stackoverflow.com/q/74027324/112968\">stackoverflow.com/q/74027324/112968</a> more or less describes the same problem and suggests several possible solutions."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683205150,"creation_date":1683205150,"answer_id":76173491,"question_id":76168896,"body_markdown":"You&#39;ll need to make `MyClass` a wrapper class, and not test it, which is OK because it will be trivial:\r\n```\r\nclass MyClass {\r\n  private final MyTestableClass myTestableClass;\r\n\r\n  public MyClass() {\r\n    myTestableClass = new MyTestableClass(setupClient());\r\n  }\r\n\r\n  public void methodIWantToTest() {\r\n    myTestableClass.methodIWantToTest();\r\n  }\r\n}\r\n```\r\nThen you can write a unit test for `MyTestableClass`, passing a mock `Client` to it&#39;s constructor.\r\n\r\n(of course `setupClient()` is not trivial, but that wasn&#39;t being tested in your original test anyway.)","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>You'll need to make <code>MyClass</code> a wrapper class, and not test it, which is OK because it will be trivial:</p>\n<pre><code>class MyClass {\n  private final MyTestableClass myTestableClass;\n\n  public MyClass() {\n    myTestableClass = new MyTestableClass(setupClient());\n  }\n\n  public void methodIWantToTest() {\n    myTestableClass.methodIWantToTest();\n  }\n}\n</code></pre>\n<p>Then you can write a unit test for <code>MyTestableClass</code>, passing a mock <code>Client</code> to it's constructor.</p>\n<p>(of course <code>setupClient()</code> is not trivial, but that wasn't being tested in your original test anyway.)</p>\n"},{"tags":[],"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683216910,"creation_date":1683216910,"answer_id":76175288,"question_id":76168896,"body_markdown":"\r\nConfiguring your dependency within the dependent class can be problematic.  Depending on the complexity of your system you may want to explore dependency injection.  Ignoring that..\r\n\r\nProvide an alternate constructor that includes the dependency(ies) as a parameter.\r\n\r\n    public class MyClass {\r\n      private Client someClient;\r\n\r\n      public MyClass() {\r\n        this(setupClient());\r\n      }\r\n      protected MyClass(Client client) {\r\n        this.someClient = client;\r\n      }\r\n\r\n      private Client setupClient() {...}\r\n\r\n      public methodIWantToTest() {\r\n        this.someClient.makeApiCall(String requestString);\r\n        // do stuff\r\n      }\r\n      ...\r\n    }\r\n\r\nDefine the mock in your test and pass it as an argument to the constructor.\r\n\r\n    public class MyClassTest {\r\n      private MyClass SUT;\r\n      // Dependencies\r\n      private Client client = Mockito.mock(Client.class);\r\n\r\n      @Before\r\n      public void beforeTest() {\r\n        SUT = new MyClass(client);\r\n      }\r\n\r\n      @Test\r\n      public void testMethodIWantToTest() {\r\n        Mockito.when(client.makeApiCall(Mockito.anyString())).thenDoSomething();\r\n        .. test stuff\r\n      }\r\n    }\r\n","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>Configuring your dependency within the dependent class can be problematic.  Depending on the complexity of your system you may want to explore dependency injection.  Ignoring that..</p>\n<p>Provide an alternate constructor that includes the dependency(ies) as a parameter.</p>\n<pre><code>public class MyClass {\n  private Client someClient;\n\n  public MyClass() {\n    this(setupClient());\n  }\n  protected MyClass(Client client) {\n    this.someClient = client;\n  }\n\n  private Client setupClient() {...}\n\n  public methodIWantToTest() {\n    this.someClient.makeApiCall(String requestString);\n    // do stuff\n  }\n  ...\n}\n</code></pre>\n<p>Define the mock in your test and pass it as an argument to the constructor.</p>\n<pre><code>public class MyClassTest {\n  private MyClass SUT;\n  // Dependencies\n  private Client client = Mockito.mock(Client.class);\n\n  @Before\n  public void beforeTest() {\n    SUT = new MyClass(client);\n  }\n\n  @Test\n  public void testMethodIWantToTest() {\n    Mockito.when(client.makeApiCall(Mockito.anyString())).thenDoSomething();\n    .. test stuff\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2996819,"reputation":2582,"user_id":2543209,"accept_rate":59,"display_name":"Jeremy Fisher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76175288,"answer_count":2,"score":-1,"last_activity_date":1683216910,"creation_date":1683162181,"question_id":76168896,"body_markdown":"I have a java class and methods that I want to test with Mockito. These classes in their constructors or in other methods will construct objects and then use those objects in other methods. \r\n\r\nI want to mock the behavior of those objects being used. The important thing is that none of these objects are being passed into the class. Rather, they are generated within the class itself. For example lets pretend this is a class I have:\r\n\r\n```\r\nprivate Client someClient;\r\n\r\npublic MyClass() {\r\n    this.someClient = setupClient();\r\n}\r\n\r\nprivate setupClient() {...}\r\n\r\npublic methodIWantToTest() {\r\n    this.someClient.makeApiCall(String requestString);\r\n    // do stuff\r\n}\r\n```\r\n\r\nIn my test class and tests I want to be able to do something like:\r\n\r\n```\r\n// test class\r\n...\r\nMyClass classImGoingToTest; \r\n\r\n@Test\r\npublic void testMethodIWantToTest() {\r\n    Mockito.when(Client.class).makeApiCall(Mockito.anyString()).thenDoSomething();\r\n    ...\r\n}\r\n```\r\n\r\nOf course Mockito needs to make frustratingly difficult to do basic things. So how can this be done in Mockito?\r\n\r\nOther answers I read are either of the form &quot;use powermockito&quot; which i want to avoid right now, or &quot;you shouldn&#39;t be testing this&quot; which isn&#39;t an answer to my question, or they say &quot;well you should pass in the values&quot;, which as I explained above is not possible. ","title":"Mocking behavior without passing in mock objects Mockito","body":"<p>I have a java class and methods that I want to test with Mockito. These classes in their constructors or in other methods will construct objects and then use those objects in other methods.</p>\n<p>I want to mock the behavior of those objects being used. The important thing is that none of these objects are being passed into the class. Rather, they are generated within the class itself. For example lets pretend this is a class I have:</p>\n<pre><code>private Client someClient;\n\npublic MyClass() {\n    this.someClient = setupClient();\n}\n\nprivate setupClient() {...}\n\npublic methodIWantToTest() {\n    this.someClient.makeApiCall(String requestString);\n    // do stuff\n}\n</code></pre>\n<p>In my test class and tests I want to be able to do something like:</p>\n<pre><code>// test class\n...\nMyClass classImGoingToTest; \n\n@Test\npublic void testMethodIWantToTest() {\n    Mockito.when(Client.class).makeApiCall(Mockito.anyString()).thenDoSomething();\n    ...\n}\n</code></pre>\n<p>Of course Mockito needs to make frustratingly difficult to do basic things. So how can this be done in Mockito?</p>\n<p>Other answers I read are either of the form &quot;use powermockito&quot; which i want to avoid right now, or &quot;you shouldn't be testing this&quot; which isn't an answer to my question, or they say &quot;well you should pass in the values&quot;, which as I explained above is not possible.</p>\n"},{"tags":["java","selenium-webdriver"],"owner":{"account_id":7300508,"reputation":13,"user_id":5563467,"display_name":"Nomula Lenin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216613,"creation_date":1683216613,"question_id":76175241,"body_markdown":"this is the basetest class am using to invoke the webdriver and driving to another class called landing page. Am trying different classes instead of one, when i debug this code it says illeagal invocation while am sending the driver argument right, at every driver invocation i was able to see the driver instance i have attached the pictures as well, i could use a static keyword and initialize but i want to know why this method is not working.\r\n\r\n      public class BaseTest {\r\n\t\r\n\t WebDriver driver;\r\n\t\r\n\tpublic  WebDriver InitDriver() throws IOException {\r\n\t\t\r\n\t\tProperties props = new Properties();\r\n\t\t\r\n\t\tFileInputStream fis = new FileInputStream(&quot;//filepath&quot;);\r\n\t\tprops.load(fis);\r\n\t\t\r\n\t\tString browserName = props.getProperty(&quot;BROWSER&quot;);\r\n\t\t\r\n\t\tif(browserName.equalsIgnoreCase(&quot;chrome&quot;)) {\r\n\t\t\tWebDriverManager.chromedriver().setup();\r\n\t\t\tdriver = new ChromeDriver();\r\n\t\t}else if(browserName.equalsIgnoreCase(&quot;firefox&quot;)) {\r\n\t\t\tWebDriverManager.firefoxdriver().setup();\r\n\t\t\tdriver= new FirefoxDriver();\r\n\t\t}\r\n\t\t\r\n\t\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n\t\t\r\n\t\t\r\n\t\treturn driver;\r\n\t}\r\n\t\r\n\t\r\n\tpublic  LandingPage launchApplication() throws IOException {\r\n\t\tdriver = InitDriver();\r\n\t\tLandingPage lp = new LandingPage(driver);\r\n\t\tlp.goTo();\r\n\t\t\r\n\t\treturn lp;\r\n\t\t\r\n\t}\r\n\r\n     }\r\n\r\n\r\n     //this is my landing page\r\n      public class LandingPage extends AbstractComponent{\r\n \r\n\r\n      public String email = &quot;----&quot;;\r\n      public String password = &quot;-----&quot;;\r\n      WebDriver driver;\r\n\r\n\r\n     @FindBy(css=&quot;#userEmail&quot;)\r\n     WebElement UserEmail;\r\n\r\n\r\n     @FindBy(css=&quot;#userPassword&quot;)\r\n     WebElement UserPassword;\r\n\r\n     @FindBy(id=&quot;login&quot;)\r\n     WebElement Login;\r\n\r\n\r\n\r\n      public LandingPage(WebDriver driver) {\r\n\tsuper(driver);\r\n\tthis.driver = driver;\r\n     }\r\n\r\n\r\n      public void goTo() {\r\n\tdriver.get(&quot;https://rahulshettyacademy.com/client&quot;);\r\n     }\r\n\r\n\t\r\n\tpublic void loginApplication() {\r\n\t\t\r\n\t\t\r\n\t\tUserEmail.sendKeys(email);\r\n\t\tUserPassword.sendKeys(password);\r\n\t\tLogin.click();\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n       }\r\n\r\n      //this is an another class where i have some resuable components\r\n       public class AbstractComponent {\r\n\tpublic WebDriver driver;\r\n\r\n\tpublic AbstractComponent(WebDriver driver) {\r\n\r\n/* this is where i get illegal invocation error while debugging, code doesn&#39;t enter into this constructor */\r\n\t\tthis.driver = driver;\r\n\t}\r\n\t\r\n\r\n\t// By productsBy = By.cssSelector(&quot;.mb-3&quot;);\r\n\r\n\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\r\n\r\n\t\r\n\r\n\tpublic void waitForElementToApper(By findBy) {\r\n\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(findBy));\r\n\r\n\t}\r\n\r\n\tpublic void waitForElementToInvisible(By findBy) {\r\n\r\n\t\twait.until(ExpectedConditions.invisibilityOfElementLocated(findBy));\r\n\r\n\t}\r\n\r\n        }\r\n\r\n\r\n\r\n     Am trying to invoke the inherited class constructor with super keyword in the child class and am     also passing the right arguments. I tried to debug to see if the argument passed is right.\r\n\r\n[![driver as an argument for landing page object](https://i.stack.imgur.com/11MX1.png)](https://i.stack.imgur.com/11MX1.png)\r\n\r\n[![driver in the landing page class super keyword](https://i.stack.imgur.com/lzaFm.png)](https://i.stack.imgur.com/lzaFm.png)\r\n\r\n[![driver in the parentclass component](https://i.stack.imgur.com/CdLtL.png)](https://i.stack.imgur.com/CdLtL.png)\r\n\r\n\r\n\r\n","title":"coudn&#39;t assign the driver value to an local variable using the constructor, it says illegal invocation","body":"<p>this is the basetest class am using to invoke the webdriver and driving to another class called landing page. Am trying different classes instead of one, when i debug this code it says illeagal invocation while am sending the driver argument right, at every driver invocation i was able to see the driver instance i have attached the pictures as well, i could use a static keyword and initialize but i want to know why this method is not working.</p>\n<pre><code>  public class BaseTest {\n\n WebDriver driver;\n\npublic  WebDriver InitDriver() throws IOException {\n    \n    Properties props = new Properties();\n    \n    FileInputStream fis = new FileInputStream(&quot;//filepath&quot;);\n    props.load(fis);\n    \n    String browserName = props.getProperty(&quot;BROWSER&quot;);\n    \n    if(browserName.equalsIgnoreCase(&quot;chrome&quot;)) {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n    }else if(browserName.equalsIgnoreCase(&quot;firefox&quot;)) {\n        WebDriverManager.firefoxdriver().setup();\n        driver= new FirefoxDriver();\n    }\n    \n    driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n    \n    \n    return driver;\n}\n\n\npublic  LandingPage launchApplication() throws IOException {\n    driver = InitDriver();\n    LandingPage lp = new LandingPage(driver);\n    lp.goTo();\n    \n    return lp;\n    \n}\n\n }\n\n\n //this is my landing page\n  public class LandingPage extends AbstractComponent{\n\n\n  public String email = &quot;----&quot;;\n  public String password = &quot;-----&quot;;\n  WebDriver driver;\n\n\n @FindBy(css=&quot;#userEmail&quot;)\n WebElement UserEmail;\n\n\n @FindBy(css=&quot;#userPassword&quot;)\n WebElement UserPassword;\n\n @FindBy(id=&quot;login&quot;)\n WebElement Login;\n\n\n\n  public LandingPage(WebDriver driver) {\nsuper(driver);\nthis.driver = driver;\n }\n\n\n  public void goTo() {\ndriver.get(&quot;https://rahulshettyacademy.com/client&quot;);\n }\n\n\npublic void loginApplication() {\n    \n    \n    UserEmail.sendKeys(email);\n    UserPassword.sendKeys(password);\n    Login.click();\n    \n    \n}\n\n   }\n\n  //this is an another class where i have some resuable components\n   public class AbstractComponent {\npublic WebDriver driver;\n\npublic AbstractComponent(WebDriver driver) {\n</code></pre>\n<p>/* this is where i get illegal invocation error while debugging, code doesn't enter into this constructor */\nthis.driver = driver;\n}</p>\n<pre><code>// By productsBy = By.cssSelector(&quot;.mb-3&quot;);\n\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\n\n\n\npublic void waitForElementToApper(By findBy) {\n\n    wait.until(ExpectedConditions.visibilityOfElementLocated(findBy));\n\n}\n\npublic void waitForElementToInvisible(By findBy) {\n\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(findBy));\n\n}\n\n    }\n\n\n\n Am trying to invoke the inherited class constructor with super keyword in the child class and am     also passing the right arguments. I tried to debug to see if the argument passed is right.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/11MX1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11MX1.png\" alt=\"driver as an argument for landing page object\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/lzaFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lzaFm.png\" alt=\"driver in the landing page class super keyword\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/CdLtL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CdLtL.png\" alt=\"driver in the parentclass component\" /></a></p>\n"},{"tags":["java","sql","hibernate","jsqlparser"],"comments":[{"owner":{"account_id":6740011,"reputation":46648,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1683215853,"post_id":76174965,"comment_id":134336005,"body_markdown":"can you add a semicolon before the select?","body":"can you add a semicolon before the select?"},{"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"score":0,"creation_date":1683216000,"post_id":76174965,"comment_id":134336034,"body_markdown":"Unfortunately not, this code is automatically generated by hibernate","body":"Unfortunately not, this code is automatically generated by hibernate"},{"owner":{"account_id":6740011,"reputation":46648,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1683216049,"post_id":76174965,"comment_id":134336046,"body_markdown":"please show the code you have already","body":"please show the code you have already"},{"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"score":0,"creation_date":1683216692,"post_id":76174965,"comment_id":134336204,"body_markdown":"Thank you. I have added the code in my description. At the moment I am only test if it starts by insert.  I could split the statement in two. But I have to be carefull on how I discriminate the select. Because it should work if the select was included in the &quot;values&quot;: insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, select aValue from aTable, ?). If I split in two and parse only the insert that should be ok. But before doing it I&#39;d like to know if there is no other way to achieve it","body":"Thank you. I have added the code in my description. At the moment I am only test if it starts by insert.  I could split the statement in two. But I have to be carefull on how I discriminate the select. Because it should work if the select was included in the &quot;values&quot;: insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, select aValue from aTable, ?). If I split in two and parse only the insert that should be ok. But before doing it I&#39;d like to know if there is no other way to achieve it"}],"owner":{"account_id":4910838,"reputation":357,"user_id":3956189,"accept_rate":30,"display_name":"Gilles"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683216587,"creation_date":1683214770,"question_id":76174965,"body_markdown":"I am using JSQLParser to select a set of SQL queries. These queries and generated by hibernate.\r\n\r\nI have an issue when Hibernate generates an insert query followed by select scope_identity().\r\nBecause JSQLParser is parsing the insert part, and then generates an exception\r\n\r\n    insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, ?, ?) select scope_identity().\r\n\r\nThe following exception is thrown:\r\n    Encountered unexpected token: &quot;select&quot; &lt;K_SELECT&gt;\r\n    at line 1, column 338.\r\n\r\n    Was expecting one of:\r\n\r\n    &quot;,&quot;\r\n    &quot;;&quot;\r\n    &quot;ON&quot;\r\n    &quot;RETURNING&quot;\r\n    &lt;EOF&gt;\r\n\r\nHow could I parse such a query without getting this error?\r\n\r\nI have the following code:\r\n\r\n    if (sqlStatement.toLowerCase().startsWith(INSERT)) {\r\n                return new InsertParser(sqlStatement);\r\n\r\nAnd then in InsertParser:\r\n\r\n    private void preprocessInsert() {\r\n        try {\r\n            Insert insert = (Insert) CCJSqlParserUtil.parse(sqlStatement);\r\n            // Set the table\r\n            Table table = new Table();\r\n            table.setName(insert.getTable().getName());\r\n            // Now get the parameters\r\n            List&lt;net.sf.jsqlparser.schema.Column&gt; columns = insert.getColumns();\r\n            for (net.sf.jsqlparser.schema.Column column : columns) {\r\n                Parameter parameter = new Parameter();\r\n                mycompany.jdbc.parser.Column pColumn = new mycompany.jdbc.parser.Column();\r\n                pColumn.setName(column.getColumnName());\r\n                pColumn.setTable(table);\r\n                parameter.setColumn(pColumn);\r\n                parameters.add(parameter);\r\n            }\r\n        } catch (JSQLParserException e) {\r\n            LOGGER.error(&quot;Preprocesing error: &quot; + e.getMessage());\r\n        }\r\n    }","title":"JSQLParser. How to parse an insert followed by select scope_identity()","body":"<p>I am using JSQLParser to select a set of SQL queries. These queries and generated by hibernate.</p>\n<p>I have an issue when Hibernate generates an insert query followed by select scope_identity().\nBecause JSQLParser is parsing the insert part, and then generates an exception</p>\n<pre><code>insert into MYTABLE(LOG_ACTION, LOG_APPLICATION, LOG_CATEGORY) values (?, ?, ?) select scope_identity().\n</code></pre>\n<p>The following exception is thrown:\nEncountered unexpected token: &quot;select&quot; &lt;K_SELECT&gt;\nat line 1, column 338.</p>\n<pre><code>Was expecting one of:\n\n&quot;,&quot;\n&quot;;&quot;\n&quot;ON&quot;\n&quot;RETURNING&quot;\n&lt;EOF&gt;\n</code></pre>\n<p>How could I parse such a query without getting this error?</p>\n<p>I have the following code:</p>\n<pre><code>if (sqlStatement.toLowerCase().startsWith(INSERT)) {\n            return new InsertParser(sqlStatement);\n</code></pre>\n<p>And then in InsertParser:</p>\n<pre><code>private void preprocessInsert() {\n    try {\n        Insert insert = (Insert) CCJSqlParserUtil.parse(sqlStatement);\n        // Set the table\n        Table table = new Table();\n        table.setName(insert.getTable().getName());\n        // Now get the parameters\n        List&lt;net.sf.jsqlparser.schema.Column&gt; columns = insert.getColumns();\n        for (net.sf.jsqlparser.schema.Column column : columns) {\n            Parameter parameter = new Parameter();\n            mycompany.jdbc.parser.Column pColumn = new mycompany.jdbc.parser.Column();\n            pColumn.setName(column.getColumnName());\n            pColumn.setTable(table);\n            parameter.setColumn(pColumn);\n            parameters.add(parameter);\n        }\n    } catch (JSQLParserException e) {\n        LOGGER.error(&quot;Preprocesing error: &quot; + e.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":["java","mockito","junit5","powermock","powermockito"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1683095032,"post_id":76159443,"comment_id":134311898,"body_markdown":"Does this answer your question? https://stackoverflow.com/questions/75873664/how-to-unit-test-static-methods-with-custom-object-as-return-type-using-junit-5/75874320#75874320","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75873664/how-to-unit-test-static-methods-with-custom-object-as-return-type-using-junit-5/75874320#75874320\" title=\"how to unit test static methods with custom object as return type using junit 5\">stackoverflow.com/questions/75873664/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683212954,"creation_date":1683212954,"answer_id":76174715,"question_id":76159443,"body_markdown":"Firstly, I would try doing it without mocks (if possible). For instance, when is `someException` being thrown in the by b.externalMethod()? \r\nMaybe you can cause this to happen through the `x` and `y` params or some test configuration: this will allow you to have a mock-free test. :)\r\n\r\n\r\n----------\r\n\r\n\r\nIf this isn&#39;t possible, I would start looking at the design of this class, which makes it hard to test. The easiest thing you can do would be to use dependency injection and add a constructor of A which receives an instance of B as parameter:\r\n\r\n```java\r\nclass A {\r\n    private final B b;\r\n\r\n    public A(String x, String y){\r\n        this(new B(x,y));\r\n    }\r\n\t\t\r\n    public A(B b){\r\n        this.b = b;\r\n    }\r\n\t// ...\r\n}\r\n```\r\n\r\nThis way, in the test, you&#39;ll be able to easily inject the mock:\r\n\r\nB mockedB = Mockito.mock(B.class);\r\nA testedA = new A(mockedB);\r\n\r\nwhen(mockedB.externalMethod()).thenThrow(someException);\r\n\r\n\r\nIf you don&#39;t like the idea of another public constructor, you can consider at least a package-protected one. But overall, I think a second public constructor would be the way to go, you can use `@RequiredArgConstructor` if you are using Lombok.","title":"How do I mock methods of a private final client that&#39;s being initialized inside a dependency class?","body":"<p>Firstly, I would try doing it without mocks (if possible). For instance, when is <code>someException</code> being thrown in the by b.externalMethod()?\nMaybe you can cause this to happen through the <code>x</code> and <code>y</code> params or some test configuration: this will allow you to have a mock-free test. :)</p>\n<hr />\n<p>If this isn't possible, I would start looking at the design of this class, which makes it hard to test. The easiest thing you can do would be to use dependency injection and add a constructor of A which receives an instance of B as parameter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    private final B b;\n\n    public A(String x, String y){\n        this(new B(x,y));\n    }\n        \n    public A(B b){\n        this.b = b;\n    }\n    // ...\n}\n</code></pre>\n<p>This way, in the test, you'll be able to easily inject the mock:</p>\n<p>B mockedB = Mockito.mock(B.class);\nA testedA = new A(mockedB);</p>\n<p>when(mockedB.externalMethod()).thenThrow(someException);</p>\n<p>If you don't like the idea of another public constructor, you can consider at least a package-protected one. But overall, I think a second public constructor would be the way to go, you can use <code>@RequiredArgConstructor</code> if you are using Lombok.</p>\n"}],"owner":{"account_id":16753503,"reputation":33,"user_id":12110061,"display_name":"abhi gang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683216424,"creation_date":1683068896,"question_id":76159443,"body_markdown":"I have a class that looks like this : \r\n\r\n    class A {\r\n        private final B b;\r\n    \r\n        public A(String x, String y){\r\n            b = new B(x,y);\r\n        }\r\n    \r\n    \r\n        public void someMethod() {\r\n            b.externalMethod();\r\n        }\r\n    }\r\n\r\nNow I&#39;m instantiating A inside a drools rule and calling `someMethod()` but I want to avoid call to `externalMethod()`. Is there a way to achieve this ?\r\n\r\nI&#39;ve tried using `mockedConstruction` for `B` but with that I&#39;m facing 2 issues : \r\n\r\n 1. Mockito only allows 1 static mock per thread, so it won&#39;t be feasible if I had multiple clients (of type A) inside a single rule.\r\n 2. I am not able to assert exceptions using this as `mockedConstruction` uses a lambda function and doing something like `doThrow(someException).when(b).externalMethod()` would give exception on mock creation itself rather than the method call.\r\n\r\nAny help is appreciated. I apologise if language is not clear or I&#39;ve missed any detail (please mention if any).","title":"How do I mock methods of a private final client that&#39;s being initialized inside a dependency class?","body":"<p>I have a class that looks like this :</p>\n<pre><code>class A {\n    private final B b;\n\n    public A(String x, String y){\n        b = new B(x,y);\n    }\n\n\n    public void someMethod() {\n        b.externalMethod();\n    }\n}\n</code></pre>\n<p>Now I'm instantiating A inside a drools rule and calling <code>someMethod()</code> but I want to avoid call to <code>externalMethod()</code>. Is there a way to achieve this ?</p>\n<p>I've tried using <code>mockedConstruction</code> for <code>B</code> but with that I'm facing 2 issues :</p>\n<ol>\n<li>Mockito only allows 1 static mock per thread, so it won't be feasible if I had multiple clients (of type A) inside a single rule.</li>\n<li>I am not able to assert exceptions using this as <code>mockedConstruction</code> uses a lambda function and doing something like <code>doThrow(someException).when(b).externalMethod()</code> would give exception on mock creation itself rather than the method call.</li>\n</ol>\n<p>Any help is appreciated. I apologise if language is not clear or I've missed any detail (please mention if any).</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1512602700,"post_id":47685157,"comment_id":82329963,"body_markdown":"Why aren&#39;t you throwing `KException`?","body":"Why aren&#39;t you throwing <code>KException</code>?"},{"owner":{"account_id":10081074,"reputation":1138,"user_id":9040373,"display_name":"whatamidoingwithmylife"},"score":0,"creation_date":1512602752,"post_id":47685157,"comment_id":82329977,"body_markdown":"You can convert it only if it&#39;s extending MyException.","body":"You can convert it only if it&#39;s extending MyException."},{"owner":{"account_id":190177,"reputation":10331,"user_id":429972,"accept_rate":67,"display_name":"jontro"},"score":0,"creation_date":1512602801,"post_id":47685157,"comment_id":82329994,"body_markdown":"Just throw a new exception like done here https://stackoverflow.com/questions/11972765/rethrow-exception-in-java","body":"Just throw a new exception like done here <a href=\"https://stackoverflow.com/questions/11972765/rethrow-exception-in-java\" title=\"rethrow exception in java\">stackoverflow.com/questions/11972765/rethrow-exception-in-ja&zwnj;&#8203;va</a>"},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512602829,"post_id":47685157,"comment_id":82330007,"body_markdown":"KException is from an External library. I have various handlers and logic on MyException.","body":"KException is from an External library. I have various handlers and logic on MyException."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1512602843,"post_id":47685157,"comment_id":82330016,"body_markdown":"...and you can&#39;t extend `KException`?","body":"...and you can&#39;t extend <code>KException</code>?"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1512603068,"post_id":47685157,"comment_id":82330112,"body_markdown":"wrap your `return` statement in `try-catch` and throw whatever you need.","body":"wrap your <code>return</code> statement in <code>try-catch</code> and throw whatever you need."},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512603085,"post_id":47685157,"comment_id":82330121,"body_markdown":"it already extends it. Updated the question","body":"it already extends it. Updated the question"},{"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"score":0,"creation_date":1512603438,"post_id":47685157,"comment_id":82330250,"body_markdown":"Tried it. Wrapping return in try catch doesn&#39;t work as p-&gt;p.getOrders()  throws the exception which should be handled first.","body":"Tried it. Wrapping return in try catch doesn&#39;t work as p-&gt;p.getOrders()  throws the exception which should be handled first."},{"owner":{"account_id":9071789,"reputation":4069,"user_id":6754706,"accept_rate":38,"display_name":"RAZ_Muh_Taz"},"score":0,"creation_date":1512603976,"post_id":47685157,"comment_id":82330452,"body_markdown":"catch(KException e){ throw new MyException(e.message, e.code);}?","body":"catch(KException e){ throw new MyException(e.message, e.code);}?"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":2,"creation_date":1512604912,"post_id":47685157,"comment_id":82330778,"body_markdown":"What does it mean to return an empty `Optional&lt;List&lt;Order&gt;&gt;`? Would it really have a different meaning from an empty `List&lt;Order&gt;`? You should avoid wrapping collections into optionals (and vice versa), as this is quite cumbersome to use for the caller.","body":"What does it mean to return an empty <code>Optional&lt;List&lt;Order&gt;&gt;</code>? Would it really have a different meaning from an empty <code>List&lt;Order&gt;</code>? You should avoid wrapping collections into optionals (and vice versa), as this is quite cumbersome to use for the caller."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1512605279,"post_id":47685157,"comment_id":82330871,"body_markdown":"Possible duplicate of [Java 8 Lambda function that throws exception?](https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/18198176/java-8-lambda-function-that-throws-exception\">Java 8 Lambda function that throws exception?</a>"},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1512605388,"post_id":47685157,"comment_id":82330908,"body_markdown":"Also [Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?](https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-why-mandato)","body":"Also <a href=\"https://stackoverflow.com/questions/14039995/java-8-mandatory-checked-exceptions-handling-in-lambda-expressions-why-mandato\">Java 8: Mandatory checked exceptions handling in lambda expressions. Why mandatory, not optional?</a>"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1512608638,"post_id":47685157,"comment_id":82331681,"body_markdown":"`Optional` and lambdas are a poor fit here.","body":"<code>Optional</code> and lambdas are a poor fit here."},{"owner":{"account_id":10377194,"reputation":4505,"user_id":7653073,"display_name":"Malte Hartwig"},"score":0,"creation_date":1512640290,"post_id":47685157,"comment_id":82343263,"body_markdown":"This is pretty much the same issue as with your other question from yesterday: [Handling exceptions while returning values by Optional flatmap](https://stackoverflow.com/questions/47661370/handling-exceptions-while-returning-values-by-optional-flatmap). The solutions are similar: catch KException in the lambda, re-throw as RuntimeException, catch that one outside the lamba, re-throw as MyException.","body":"This is pretty much the same issue as with your other question from yesterday: <a href=\"https://stackoverflow.com/questions/47661370/handling-exceptions-while-returning-values-by-optional-flatmap\">Handling exceptions while returning values by Optional flatmap</a>. The solutions are similar: catch KException in the lambda, re-throw as RuntimeException, catch that one outside the lamba, re-throw as MyException."}],"answers":[{"comments":[{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1512602783,"post_id":47685180,"comment_id":82329988,"body_markdown":"From what I&#39;m reading of the OP&#39;s requirements, `Order::getOrders` is likely to throw an exception.  Strange, but that has nothing to do with the optional or any resultant throw (because by the time you bother throwing from the call `getOrders`, *another* exception&#39;s already been thrown).","body":"From what I&#39;m reading of the OP&#39;s requirements, <code>Order::getOrders</code> is likely to throw an exception.  Strange, but that has nothing to do with the optional or any resultant throw (because by the time you bother throwing from the call <code>getOrders</code>, <i>another</i> exception&#39;s already been thrown)."}],"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1512604403,"creation_date":1512602736,"answer_id":47685180,"question_id":47685157,"body_markdown":"as suggested by some of the comments, you can trap the exception within the `map` operation and then perform any further logic you need to do:\r\n\r\n    return getConnection(authDTO).map(p -&gt; {\r\n            try {\r\n                return p.getOrders();\r\n            } catch (KException e) {\r\n                // perform some other logic\r\n            }\r\n    });\r\n        ","title":"Handling exceptions from methods in map of Optional","body":"<p>as suggested by some of the comments, you can trap the exception within the <code>map</code> operation and then perform any further logic you need to do:</p>\n\n<pre><code>return getConnection(authDTO).map(p -&gt; {\n        try {\n            return p.getOrders();\n        } catch (KException e) {\n            // perform some other logic\n        }\n});\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1180476,"reputation":70,"user_id":1155510,"display_name":"Jahorse"},"score":1,"creation_date":1686140131,"post_id":75035848,"comment_id":134757770,"body_markdown":"`orElseThrow` will execute if the `map` function returns empty, I don&#39;t think it will catch an exception thrown in `map`. [ref](https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseThrow-java.util.function.Supplier-)","body":"<code>orElseThrow</code> will execute if the <code>map</code> function returns empty, I don&#39;t think it will catch an exception thrown in <code>map</code>. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElseThrow-java.util.function.Supplier-\" rel=\"nofollow noreferrer\">ref</a>"}],"tags":[],"owner":{"account_id":13338050,"reputation":484,"user_id":9627242,"display_name":"ajain"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1673037327,"creation_date":1673037327,"answer_id":75035848,"question_id":47685157,"body_markdown":"Cant you just do like this?\r\n\r\n```\r\n@Override\r\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\r\n    return connector.getConnection(authDTO)\r\n            .map(p-&gt;p.getOrders())\r\n            .orElseThrow(MyException::new));\r\n            \r\n}","title":"Handling exceptions from methods in map of Optional","body":"<p>Cant you just do like this?</p>\n<pre><code>@Override\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\n    return connector.getConnection(authDTO)\n            .map(p-&gt;p.getOrders())\n            .orElseThrow(MyException::new));\n            \n}\n</code></pre>\n"}],"owner":{"account_id":6760471,"reputation":468,"user_id":5207458,"accept_rate":74,"display_name":"Pardha.Saradhi"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9585,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1683216300,"creation_date":1512602540,"question_id":47685157,"body_markdown":"I have a method like this.\r\n\r\n    @Override\r\n    public Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\r\n        return connector.getConnection(authDTO).map(p-&gt;p.getOrders());\r\n    }\r\n\r\n\r\nHere \r\n\r\n    connector.getConnection(authDTO)\r\n\r\nreturns an Optional of Connection and \r\n\r\n    p-&gt;p.getOrders() \r\nthrows KException which I cannot change and is of the form\r\n\r\n    public class KException extends Throwable {\r\n    \r\n        // variables\r\n        public String message;\r\n        public int code;\r\n    \r\n        // constructor that sets the message\r\n        public KException(String message){\r\n            this.message = message;\r\n        }\r\n    \r\n        // constructor that sets the message and code\r\n        public KException(String message, int code){\r\n            this.message = message;\r\n            this.code = code;\r\n        }\r\n    }\r\n\r\nand this the strucute of MyException\r\n\r\n\r\n    public class MyException extends KException {\r\n    \r\n        public MyException(String message, int code) {\r\n            super(message, code);\r\n        }\r\n    }\r\n\r\nThe code is not compiling with the below error\r\n\r\n    unreported exception com.something.exceptions.KException; must be caught or declared to be thrown\r\n\r\n\r\nI want to convert this KException to MyException. Is there are an elegant way to do this? PLease help.\r\n","title":"Handling exceptions from methods in map of Optional","body":"<p>I have a method like this.</p>\n\n<pre><code>@Override\npublic Optional&lt;List&lt;Order&gt;&gt; getPendingOrders(AuthDTO authDTO) throws MyException {\n    return connector.getConnection(authDTO).map(p-&gt;p.getOrders());\n}\n</code></pre>\n\n<p>Here </p>\n\n<pre><code>connector.getConnection(authDTO)\n</code></pre>\n\n<p>returns an Optional of Connection and </p>\n\n<pre><code>p-&gt;p.getOrders() \n</code></pre>\n\n<p>throws KException which I cannot change and is of the form</p>\n\n<pre><code>public class KException extends Throwable {\n\n    // variables\n    public String message;\n    public int code;\n\n    // constructor that sets the message\n    public KException(String message){\n        this.message = message;\n    }\n\n    // constructor that sets the message and code\n    public KException(String message, int code){\n        this.message = message;\n        this.code = code;\n    }\n}\n</code></pre>\n\n<p>and this the strucute of MyException</p>\n\n<pre><code>public class MyException extends KException {\n\n    public MyException(String message, int code) {\n        super(message, code);\n    }\n}\n</code></pre>\n\n<p>The code is not compiling with the below error</p>\n\n<pre><code>unreported exception com.something.exceptions.KException; must be caught or declared to be thrown\n</code></pre>\n\n<p>I want to convert this KException to MyException. Is there are an elegant way to do this? PLease help.</p>\n"},{"tags":["java","selenium-webdriver","automation","testng"],"owner":{"account_id":14957548,"reputation":51,"user_id":10798352,"display_name":"AbdulQASDET"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683215367,"creation_date":1683214820,"question_id":76174970,"body_markdown":"As shown below I have a TestNG selenium project which has BaseTest class which is extended to TestClass and there are 2 tests/methods TestA and TestB. When I run testng.xml file I am able to run suite successfully but running test individually on TestA or TestB or TestClass level, tests are not running\r\n\r\nProject structure:\r\n\r\n - Tests/TestClass (it has 2 methods TestA and TestB)\r\n - pom.xml\r\n - testng.xml\r\n - PageObjects\r\n - Reports\r\n - Base/BaseTest\r\n\r\n**testng.xml file:**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;Automation Test Suite&quot;&gt;\r\n\t&lt;listeners&gt;\r\n\t\t&lt;listener\r\n\t\t\tclass-name=&quot;com.listeners.TestListener&quot; /&gt;\r\n\t&lt;/listeners&gt;\r\n\t\t\r\n    &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\r\n    &lt;parameter name=&quot;env&quot; value=&quot;QA&quot;/&gt;\r\n  \r\n    &lt;test name=&quot;Functional Tests&quot;&gt;\r\n\t  &lt;classes&gt;\r\n\t\t  &lt;class name=&quot;com.tests.functional.TestScenario_001&quot;/&gt;\r\n\t  &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\n\r\n**BaseClass:**\r\n\r\n```\r\npublic class BaseTest extends BaseClass\r\n{\r\n    @Parameters({&quot;browser&quot;,&quot;env&quot;})\r\n    @BeforeClass(alwaysRun = true)\r\n    public void setUp(String browser, String env) throws IOException\r\n    {\r\n      startSession(browser,env);\r\n    }\r\n\r\n    @AfterClass(alwaysRun = true)\r\n    public void tearDown() throws IOException\r\n    {\r\n      endSession();\r\n    }\r\n}\r\n```\r\n\r\nI tried adding `alwaysRun = true` at Before/After class methods but no luck. `startSession` and `endSession` methods will create driver instance and kill driver instance\r\n\r\n**Getting error on console as below:**\r\n````\r\nFAILED CONFIGURATION: @BeforeClass com.base.BaseTest.setUp\r\norg.testng.TestNGException: \r\nParameter &#39;browser&#39; is required by BeforeClass on method setUp but has not been marked @Optional or defined\r\nin /private/var/folders/0l/8yzm1t0d6dv86g62b9g27sc80000gp/T/testng-eclipse-421234397/testng-customsuite.xml\r\n\r\nFAILED CONFIGURATION: @AfterClass com.base.BaseTest.tearDown\r\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.close()&quot; because &quot;com.wrappers.BaseClass.driver&quot; is null\r\n\r\nFAILED: com.tests.functional.TestScenario_001.HelloWorld1\r\n        Test description of HelloWorld1\r\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\r\n````","title":"Testng.xml file is able to run tests as suite but running individual tests inside class file is failing to run","body":"<p>As shown below I have a TestNG selenium project which has BaseTest class which is extended to TestClass and there are 2 tests/methods TestA and TestB. When I run testng.xml file I am able to run suite successfully but running test individually on TestA or TestB or TestClass level, tests are not running</p>\n<p>Project structure:</p>\n<ul>\n<li>Tests/TestClass (it has 2 methods TestA and TestB)</li>\n<li>pom.xml</li>\n<li>testng.xml</li>\n<li>PageObjects</li>\n<li>Reports</li>\n<li>Base/BaseTest</li>\n</ul>\n<p><strong>testng.xml file:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE suite SYSTEM &quot;https://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;Automation Test Suite&quot;&gt;\n    &lt;listeners&gt;\n        &lt;listener\n            class-name=&quot;com.listeners.TestListener&quot; /&gt;\n    &lt;/listeners&gt;\n        \n    &lt;parameter name=&quot;browser&quot; value=&quot;chrome&quot;/&gt;\n    &lt;parameter name=&quot;env&quot; value=&quot;QA&quot;/&gt;\n  \n    &lt;test name=&quot;Functional Tests&quot;&gt;\n      &lt;classes&gt;\n          &lt;class name=&quot;com.tests.functional.TestScenario_001&quot;/&gt;\n      &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;\n</code></pre>\n<p><strong>BaseClass:</strong></p>\n<pre><code>public class BaseTest extends BaseClass\n{\n    @Parameters({&quot;browser&quot;,&quot;env&quot;})\n    @BeforeClass(alwaysRun = true)\n    public void setUp(String browser, String env) throws IOException\n    {\n      startSession(browser,env);\n    }\n\n    @AfterClass(alwaysRun = true)\n    public void tearDown() throws IOException\n    {\n      endSession();\n    }\n}\n</code></pre>\n<p>I tried adding <code>alwaysRun = true</code> at Before/After class methods but no luck. <code>startSession</code> and <code>endSession</code> methods will create driver instance and kill driver instance</p>\n<p><strong>Getting error on console as below:</strong></p>\n<pre><code>FAILED CONFIGURATION: @BeforeClass com.base.BaseTest.setUp\norg.testng.TestNGException: \nParameter 'browser' is required by BeforeClass on method setUp but has not been marked @Optional or defined\nin /private/var/folders/0l/8yzm1t0d6dv86g62b9g27sc80000gp/T/testng-eclipse-421234397/testng-customsuite.xml\n\nFAILED CONFIGURATION: @AfterClass com.base.BaseTest.tearDown\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.close()&quot; because &quot;com.wrappers.BaseClass.driver&quot; is null\n\nFAILED: com.tests.functional.TestScenario_001.HelloWorld1\n        Test description of HelloWorld1\njava.lang.RuntimeException: java.lang.ExceptionInInitializerError\n</code></pre>\n"},{"tags":["java","spring","caching","ehcache"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1309865997,"creation_date":1309865997,"answer_id":6582055,"question_id":6581891,"body_markdown":"Upgrade to the latest spring 3.1 milestone - it has built-in cache support through annotations - [see here][1]\r\n\r\nApart from that, you can always use the [`EhCacheFactoryBean`][2]\r\n\r\n\r\n  [1]: http://blog.springsource.com/2011/02/23/spring-3-1-m1-caching/\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/cache/ehcache/EhCacheFactoryBean.html","title":"Integrating ehcache with spring 3.0","body":"<p>Upgrade to the latest spring 3.1 milestone - it has built-in cache support through annotations - <a href=\"http://blog.springsource.com/2011/02/23/spring-3-1-m1-caching/\" rel=\"nofollow\">see here</a></p>\n\n<p>Apart from that, you can always use the <a href=\"http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/cache/ehcache/EhCacheFactoryBean.html\" rel=\"nofollow\"><code>EhCacheFactoryBean</code></a></p>\n"},{"tags":[],"owner":{"account_id":128351,"reputation":1497,"user_id":326120,"accept_rate":50,"display_name":"Andreas Krueger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1309866005,"creation_date":1309866005,"answer_id":6582057,"question_id":6581891,"body_markdown":"To implement this in your application, follow these steps:\r\n\r\nStep 1:\r\n\r\nAdd the jars to your application as listed on the [Ehcache Annotations for Spring project site][1].\r\n\r\nStep 2:\r\n\r\nAdd the Annotation to methods you would like to cache. Lets assume you are using the Dog getDog(String name) method from above:\r\n\r\n    @Cacheable(name=&quot;getDog&quot;)\r\n    Dog getDog(String name)\r\n    {\r\n        ....\r\n    }\r\n\r\nStep 3:\r\n\r\nConfigure Spring. You must add the following to your Spring configuration file in the beans declaration section:\r\n\r\n    &lt;ehcache:annotation-driven cache-manager=&quot;ehCacheManager&quot; /&gt;\r\n\r\nPlease refer to [Ehcache site][2] for complete details.\r\n\r\n\r\n  [1]: http://code.google.com/p/ehcache-spring-annotations/\r\n  [2]: http://ehcache.org/recipes/spring-annotations.html\r\n","title":"Integrating ehcache with spring 3.0","body":"<p>To implement this in your application, follow these steps:</p>\n\n<p>Step 1:</p>\n\n<p>Add the jars to your application as listed on the <a href=\"http://code.google.com/p/ehcache-spring-annotations/\" rel=\"nofollow\">Ehcache Annotations for Spring project site</a>.</p>\n\n<p>Step 2:</p>\n\n<p>Add the Annotation to methods you would like to cache. Lets assume you are using the Dog getDog(String name) method from above:</p>\n\n<pre><code>@Cacheable(name=\"getDog\")\nDog getDog(String name)\n{\n    ....\n}\n</code></pre>\n\n<p>Step 3:</p>\n\n<p>Configure Spring. You must add the following to your Spring configuration file in the beans declaration section:</p>\n\n<pre><code>&lt;ehcache:annotation-driven cache-manager=\"ehCacheManager\" /&gt;\n</code></pre>\n\n<p>Please refer to <a href=\"http://ehcache.org/recipes/spring-annotations.html\" rel=\"nofollow\">Ehcache site</a> for complete details.</p>\n"},{"tags":[],"owner":{"account_id":261513,"reputation":717,"user_id":545734,"display_name":"Jeet Singh Parmar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536648574,"creation_date":1492777355,"answer_id":43542640,"question_id":6581891,"body_markdown":"To integrate Ehcache just follow below steps \r\n\r\n1 - Add Dependency in pom XML file\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n       &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\r\n       &lt;version&gt;2.6.9&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n2 - create an xml file called spring-cache.xml put it in the resources folder\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:cache=&quot;http://www.springframework.org/schema/cache&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    \t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/cache \r\n    \t\thttp://www.springframework.org/schema/cache/spring-cache.xsd&quot;&gt;\r\n    \r\n    \t&lt;cache:annotation-driven/&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot;&gt;\r\n    \t\t&lt;property name=&quot;cacheManager&quot; ref=&quot;ehcache&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;ehcache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot;&gt;\r\n    \t\t&lt;property name=&quot;configLocation&quot; value=&quot;classpath:ehcache.xml&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n3 - as you can see we are using reference of ehcache.xml so create file and put it in resources folder\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:noNamespaceSchemaLocation=&quot;http://ehcache.org/ehcache.xsd&quot; updateCheck=&quot;true&quot;\r\n    \tmonitoring=&quot;autodetect&quot; dynamicConfig=&quot;true&quot;&gt;\r\n    \t&lt;cache name=&quot;users&quot; maxEntriesLocalHeap=&quot;5000&quot;\r\n    \t\tmaxEntriesLocalDisk=&quot;1000&quot; eternal=&quot;false&quot; diskSpoolBufferSizeMB=&quot;20&quot;\r\n    \t\ttimeToIdleSeconds=&quot;200&quot; timeToLiveSeconds=&quot;500&quot;\r\n    \t\tmemoryStoreEvictionPolicy=&quot;LFU&quot; transactionalMode=&quot;off&quot;&gt;\r\n    \t\t&lt;persistence strategy=&quot;localTempSwap&quot; /&gt;\r\n    \t&lt;/cache&gt;\r\n    &lt;/ehcache&gt;\r\n\r\nso can see create a cache for &quot;users&quot; so that can use wherever user list is queried from the database\r\n\r\n4 - use it like below code\r\n\r\n    @Cacheable(value=&quot;users&quot;)\r\n    public List&lt;User&gt; userList() {\r\n    \treturn userDao.findAll();\r\n    }\r\n\r\nso that&#39;s it the same way you can implement cache wherever is required\r\n\r\nstill have some doubt or confusion see live demo\r\n\r\n[Integrate EhCache in Spring MVC ][1]\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=a7DFBvCTuHg","title":"Integrating ehcache with spring 3.0","body":"<p>To integrate Ehcache just follow below steps </p>\n\n<p>1 - Add Dependency in pom XML file</p>\n\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n   &lt;artifactId&gt;ehcache-core&lt;/artifactId&gt;\n   &lt;version&gt;2.6.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>2 - create an xml file called spring-cache.xml put it in the resources folder</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:cache=\"http://www.springframework.org/schema/cache\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/cache \n        http://www.springframework.org/schema/cache/spring-cache.xsd\"&gt;\n\n    &lt;cache:annotation-driven/&gt;\n\n    &lt;bean id=\"cacheManager\" class=\"org.springframework.cache.ehcache.EhCacheCacheManager\"&gt;\n        &lt;property name=\"cacheManager\" ref=\"ehcache\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"ehcache\" class=\"org.springframework.cache.ehcache.EhCacheManagerFactoryBean\"&gt;\n        &lt;property name=\"configLocation\" value=\"classpath:ehcache.xml\" /&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>3 - as you can see we are using reference of ehcache.xml so create file and put it in resources folder</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\" updateCheck=\"true\"\n    monitoring=\"autodetect\" dynamicConfig=\"true\"&gt;\n    &lt;cache name=\"users\" maxEntriesLocalHeap=\"5000\"\n        maxEntriesLocalDisk=\"1000\" eternal=\"false\" diskSpoolBufferSizeMB=\"20\"\n        timeToIdleSeconds=\"200\" timeToLiveSeconds=\"500\"\n        memoryStoreEvictionPolicy=\"LFU\" transactionalMode=\"off\"&gt;\n        &lt;persistence strategy=\"localTempSwap\" /&gt;\n    &lt;/cache&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>so can see create a cache for \"users\" so that can use wherever user list is queried from the database</p>\n\n<p>4 - use it like below code</p>\n\n<pre><code>@Cacheable(value=\"users\")\npublic List&lt;User&gt; userList() {\n    return userDao.findAll();\n}\n</code></pre>\n\n<p>so that's it the same way you can implement cache wherever is required</p>\n\n<p>still have some doubt or confusion see live demo</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=a7DFBvCTuHg\" rel=\"nofollow noreferrer\">Integrate EhCache in Spring MVC </a></p>\n"}],"owner":{"account_id":777980,"reputation":21,"user_id":829586,"display_name":"shashikanth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6333,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1683215350,"creation_date":1309865131,"question_id":6581891,"body_markdown":"I have an application in which I use spring 3.0.2 and ibatis. Now, I need to integrate ehcache with my code. I tried  [this link](http://code.google.com/p/ehcache-spring-annotations) but couldnt get it working. I would prefer someone to give me the details of the jars required, xml configurations to be done and code changes if required.  \r\n","title":"Integrating ehcache with spring 3.0","body":"<p>I have an application in which I use spring 3.0.2 and ibatis. Now, I need to integrate ehcache with my code. I tried  <a href=\"http://code.google.com/p/ehcache-spring-annotations\" rel=\"nofollow\">this link</a> but couldnt get it working. I would prefer someone to give me the details of the jars required, xml configurations to be done and code changes if required.  </p>\n"},{"tags":["java","unit-testing","naming-conventions"],"answers":[{"tags":[],"owner":{"account_id":6358,"reputation":386102,"user_id":10661,"accept_rate":91,"display_name":"S.Lott"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683214599,"creation_date":1274213585,"answer_id":2860774,"question_id":2860747,"body_markdown":"I ran across two good suggestions. Links here:\r\n\r\n- [Unit Test Naming](https://slott-softwarearchitect.blogspot.com/2009/10/unit-test-naming.html)\r\n- [Naming standards for unit tests](https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html)\r\n- [Unit Testing With at-should Annotation](https://wiki.openmrs.org/display/docs/Unit%20Testing%20With%20at-should%20Annotation)","title":"Best practice for naming unit and integration test methods?","body":"<p>I ran across two good suggestions. Links here:</p>\n<ul>\n<li><a href=\"https://slott-softwarearchitect.blogspot.com/2009/10/unit-test-naming.html\" rel=\"nofollow noreferrer\">Unit Test Naming</a></li>\n<li><a href=\"https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html\" rel=\"nofollow noreferrer\">Naming standards for unit tests</a></li>\n<li><a href=\"https://wiki.openmrs.org/display/docs/Unit%20Testing%20With%20at-should%20Annotation\" rel=\"nofollow noreferrer\">Unit Testing With at-should Annotation</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":76076,"reputation":21604,"user_id":218028,"accept_rate":84,"display_name":"Dave"},"score":0,"creation_date":1274243438,"post_id":2860778,"comment_id":2907405,"body_markdown":"Its not an arbitrary convention I&#39;m after, but a best practice.","body":"Its not an arbitrary convention I&#39;m after, but a best practice."}],"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274213612,"creation_date":1274213612,"answer_id":2860778,"question_id":2860747,"body_markdown":"In that situation I&#39;d probably find the naming convention that was used the most and refactor the rest of the code to use that.  If the one that was used the most is truly horrid, I&#39;d still look to the existing code and try to find one that I could live with.  Consistency is more important than arbitrary conventions.","title":"Best practice for naming unit and integration test methods?","body":"<p>In that situation I'd probably find the naming convention that was used the most and refactor the rest of the code to use that.  If the one that was used the most is truly horrid, I'd still look to the existing code and try to find one that I could live with.  Consistency is more important than arbitrary conventions.</p>\n"},{"tags":[],"owner":{"account_id":104904,"reputation":68149,"user_id":280222,"accept_rate":92,"display_name":"Anders Abel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274213660,"creation_date":1274213660,"answer_id":2860785,"question_id":2860747,"body_markdown":"I use a `FunctionTestCondition` construct. If I have two methods, `Get` and `Set` I would maybe create the following test methods:\r\n\r\n* `GetTest` being a positive test (everything is ok).\r\n* `GetTestInvalidIndex` to test an invalid index being passed to the method.\r\n* `GetTestNotInitialized` to test when the data is not inited before use.\r\n* `SetTest`\r\n* `SetTestInvalidIndex`\r\n* `SetTestTooLargeValue`\r\n* `SetTestTooLongString`","title":"Best practice for naming unit and integration test methods?","body":"<p>I use a <code>FunctionTestCondition</code> construct. If I have two methods, <code>Get</code> and <code>Set</code> I would maybe create the following test methods:</p>\n\n<ul>\n<li><code>GetTest</code> being a positive test (everything is ok).</li>\n<li><code>GetTestInvalidIndex</code> to test an invalid index being passed to the method.</li>\n<li><code>GetTestNotInitialized</code> to test when the data is not inited before use.</li>\n<li><code>SetTest</code></li>\n<li><code>SetTestInvalidIndex</code></li>\n<li><code>SetTestTooLargeValue</code></li>\n<li><code>SetTestTooLongString</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269220,"user_id":12960,"display_name":"Brian Agnew"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1274214458,"creation_date":1274213980,"answer_id":2860814,"question_id":2860747,"body_markdown":"It&#39;s instructive to look at BDD (behavioural driven development) and [this blog post][1] in particular.\r\n\r\nBDD is essentially focusing on components and what they *should* do. Consequently it impacts directly on how you name/structure your tests, and the code they use to set up conditions and validate. BDD allows not only the developers to read/write the tests, but non-technical members of the team (business analysts etc.) can contribute by specifying the tests and validating them.\r\n\r\n  [1]: http://blog.dannorth.net/introducing-bdd/","title":"Best practice for naming unit and integration test methods?","body":"<p>It's instructive to look at BDD (behavioural driven development) and <a href=\"http://blog.dannorth.net/introducing-bdd/\" rel=\"nofollow noreferrer\">this blog post</a> in particular.</p>\n\n<p>BDD is essentially focusing on components and what they <em>should</em> do. Consequently it impacts directly on how you name/structure your tests, and the code they use to set up conditions and validate. BDD allows not only the developers to read/write the tests, but non-technical members of the team (business analysts etc.) can contribute by specifying the tests and validating them.</p>\n"},{"comments":[{"owner":{"account_id":6225104,"reputation":3680,"user_id":4843624,"accept_rate":67,"display_name":"progonkpa"},"score":0,"creation_date":1568031462,"post_id":2860866,"comment_id":102133900,"body_markdown":"One up for using the Martin Fowler gobbledigook vocabulary","body":"One up for using the Martin Fowler gobbledigook vocabulary"}],"tags":[],"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274214387,"creation_date":1274214387,"answer_id":2860866,"question_id":2860747,"body_markdown":"I just write what it&#39;s for. It&#39;s not like you&#39;re going to have to type the names in anywhere else, so having a `testWibbleDoesNotThrowAnExceptionIfPassedAFrobulator` isn&#39;t a problem. Anything which is a test begins with &#39;test&#39;, obviously.","title":"Best practice for naming unit and integration test methods?","body":"<p>I just write what it's for. It's not like you're going to have to type the names in anywhere else, so having a <code>testWibbleDoesNotThrowAnExceptionIfPassedAFrobulator</code> isn't a problem. Anything which is a test begins with 'test', obviously.</p>\n"},{"tags":[],"owner":{"account_id":7421,"reputation":20226,"user_id":12890,"accept_rate":83,"display_name":"Arne Burmeister"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274216414,"creation_date":1274216414,"answer_id":2861137,"question_id":2860747,"body_markdown":"Group your tests by setup, make a test class around this setup and name is with suffix Test or IntegrationTest. Using a test framework like [JUnit][1] or [TestNG][2] you can name your test methods as you want. I would name the method as what it tests, a sentence in camel case, not test prefix. The frameworks use a `@Test` annotation to mark a method as test.\r\n\r\n\r\n  [1]: http://junit.org/\r\n  [2]: http://testng.org/","title":"Best practice for naming unit and integration test methods?","body":"<p>Group your tests by setup, make a test class around this setup and name is with suffix Test or IntegrationTest. Using a test framework like <a href=\"http://junit.org/\" rel=\"nofollow noreferrer\">JUnit</a> or <a href=\"http://testng.org/\" rel=\"nofollow noreferrer\">TestNG</a> you can name your test methods as you want. I would name the method as what it tests, a sentence in camel case, not test prefix. The frameworks use a <code>@Test</code> annotation to mark a method as test.</p>\n"},{"comments":[{"owner":{"account_id":110311,"reputation":4313,"user_id":291955,"display_name":"Ryan"},"score":2,"creation_date":1274226618,"post_id":2861186,"comment_id":2906416,"body_markdown":"An alternative to this is MethodUnderTest_Scenario_Expectation. For example AddItem_EmptyCart_OneItemInCart(). This assumes one test fixture class per class under test.","body":"An alternative to this is MethodUnderTest_Scenario_Expectation. For example AddItem_EmptyCart_OneItemInCart(). This assumes one test fixture class per class under test."},{"owner":{"account_id":76076,"reputation":21604,"user_id":218028,"accept_rate":84,"display_name":"Dave"},"score":0,"creation_date":1278471007,"post_id":2861186,"comment_id":3288049,"body_markdown":"@Ryan -- Your suggestion is what I ended up using.  It&#39;s also the recommendation of the book &quot;the art of unit testing&quot;.","body":"@Ryan -- Your suggestion is what I ended up using.  It&#39;s also the recommendation of the book &quot;the art of unit testing&quot;."}],"tags":[],"owner":{"account_id":105042,"reputation":582,"user_id":280532,"accept_rate":100,"display_name":"Duncan"},"comment_count":2,"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1274217105,"creation_date":1274217105,"answer_id":2861186,"question_id":2860747,"body_markdown":"Assuming NUnit:\r\n\r\n    [Test]\r\n    public void ObjectUnderTest_StateChanged_Consequence()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n    [Test]\r\n    public void ObjectUnderTest_Behaviour_Consequence()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\nfor example:\r\n\r\n    [Test]\r\n    public void WifeIsTired_TakeWifeToDinner_WifeIsGrateful()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n    [Test]\r\n    public void WifeIsTired_MentionNewGirlfriend_WifeGetsHalf()\r\n    {\r\n        Assert.That(tra_la_la);\r\n    }\r\n\r\n","title":"Best practice for naming unit and integration test methods?","body":"<p>Assuming NUnit:</p>\n\n<pre><code>[Test]\npublic void ObjectUnderTest_StateChanged_Consequence()\n{\n    Assert.That(tra_la_la);\n}\n\n[Test]\npublic void ObjectUnderTest_Behaviour_Consequence()\n{\n    Assert.That(tra_la_la);\n}\n</code></pre>\n\n<p>for example:</p>\n\n<pre><code>[Test]\npublic void WifeIsTired_TakeWifeToDinner_WifeIsGrateful()\n{\n    Assert.That(tra_la_la);\n}\n\n[Test]\npublic void WifeIsTired_MentionNewGirlfriend_WifeGetsHalf()\n{\n    Assert.That(tra_la_la);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36035,"reputation":15548,"user_id":102482,"accept_rate":91,"display_name":"Finglas"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274266216,"creation_date":1274265843,"answer_id":2864748,"question_id":2860747,"body_markdown":"There is no standard as such, different people/places will have different schemes. The important thing is you *stick* to a standard.\r\n\r\nPersonally I&#39;m a fan of the following - example code in C#, but very close to Java, same rules apply:\r\n\r\n    [Test]\r\n    public void person_should_say_hello()\r\n    {\r\n         // Arrange\r\n         var person = new Person();\r\n         // Act\r\n         string result = person.SayHello();\r\n         // Assert\r\n         Assert(..., &quot;The person did not say hello correctly!&quot;);\r\n    }\r\n\r\n**Explicit**\r\n\r\nThe test name should give the name of the class under test. In this example, the class being tested is `Person`. The test name should also have the name of the method that is being tested. This way, if the test was to fail, you&#39;ll at least know where to look to solve it. I&#39;d also recommend following the [AAA - Arrange, Act, Assert][1] rule, it will ensures your tests are easy to read and follow.\r\n\r\n**Friendly fail messages**\r\n\r\nWhen it comes to asserting a result/state, its useful to include an optional message. This makes it easier when a test fails, especially when run as part of a build process or via an external tool. \r\n\r\n**Underscores**\r\n\r\nThe final (though optional) stance I follow is using underscores for tests names. While I&#39;m no fan of underscores in production code, their use in test names is useful as test names are often much longer. Quickly glancing at a test name that uses underscores proves to be much more readable, though this is subjective and the source of much debate with regards unit testing practices.\r\n\r\n**Integration Tests**\r\n\r\nThe same standards apply to integration tests, the only difference being the location of such tests *should* be separate from unit tests. In the example code above, the test class would be called `PersonTests` and located in a file called `PersonTests.cs`. The integration tests would be named in a similar manner - `PersonIntegrationTests`, located in `PersonIntegrationTests.cs`. The same project can be used for these tests, but ensure they are located in separate directories.\r\n\r\n\r\n  [1]: http://agileinaflash.blogspot.com/2009/03/arrange-act-assert.html","title":"Best practice for naming unit and integration test methods?","body":"<p>There is no standard as such, different people/places will have different schemes. The important thing is you <em>stick</em> to a standard.</p>\n\n<p>Personally I'm a fan of the following - example code in C#, but very close to Java, same rules apply:</p>\n\n<pre><code>[Test]\npublic void person_should_say_hello()\n{\n     // Arrange\n     var person = new Person();\n     // Act\n     string result = person.SayHello();\n     // Assert\n     Assert(..., \"The person did not say hello correctly!\");\n}\n</code></pre>\n\n<p><strong>Explicit</strong></p>\n\n<p>The test name should give the name of the class under test. In this example, the class being tested is <code>Person</code>. The test name should also have the name of the method that is being tested. This way, if the test was to fail, you'll at least know where to look to solve it. I'd also recommend following the <a href=\"http://agileinaflash.blogspot.com/2009/03/arrange-act-assert.html\" rel=\"noreferrer\">AAA - Arrange, Act, Assert</a> rule, it will ensures your tests are easy to read and follow.</p>\n\n<p><strong>Friendly fail messages</strong></p>\n\n<p>When it comes to asserting a result/state, its useful to include an optional message. This makes it easier when a test fails, especially when run as part of a build process or via an external tool. </p>\n\n<p><strong>Underscores</strong></p>\n\n<p>The final (though optional) stance I follow is using underscores for tests names. While I'm no fan of underscores in production code, their use in test names is useful as test names are often much longer. Quickly glancing at a test name that uses underscores proves to be much more readable, though this is subjective and the source of much debate with regards unit testing practices.</p>\n\n<p><strong>Integration Tests</strong></p>\n\n<p>The same standards apply to integration tests, the only difference being the location of such tests <em>should</em> be separate from unit tests. In the example code above, the test class would be called <code>PersonTests</code> and located in a file called <code>PersonTests.cs</code>. The integration tests would be named in a similar manner - <code>PersonIntegrationTests</code>, located in <code>PersonIntegrationTests.cs</code>. The same project can be used for these tests, but ensure they are located in separate directories.</p>\n"}],"owner":{"account_id":76076,"reputation":21604,"user_id":218028,"accept_rate":84,"display_name":"Dave"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16070,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2861186,"answer_count":8,"score":18,"last_activity_date":1683214599,"creation_date":1274213422,"question_id":2860747,"body_markdown":"I&#39;ve recently inherited an application that is written by different people at different times and looking for guidance on how to standardize.","title":"Best practice for naming unit and integration test methods?","body":"<p>I've recently inherited an application that is written by different people at different times and looking for guidance on how to standardize.</p>\n"},{"tags":["java","static","constructor","final"],"answers":[{"comments":[{"owner":{"account_id":179971,"reputation":12625,"user_id":412992,"accept_rate":63,"display_name":"Yaron Levi"},"score":0,"creation_date":1298478794,"post_id":5093791,"comment_id":5708397,"body_markdown":"Ok, but you just explained what is happening. I am asking why ? I mean, without the final it works, without the static it works. so combining the both creates some new logic ?","body":"Ok, but you just explained what is happening. I am asking why ? I mean, without the final it works, without the static it works. so combining the both creates some new logic ?"},{"owner":{"account_id":406855,"reputation":843,"user_id":776591,"accept_rate":89,"display_name":"user12345613"},"score":4,"creation_date":1329954305,"post_id":5093791,"comment_id":11885191,"body_markdown":"@YaronLevi he just said it... the static field is a member of the class itself. In your constructor you are assigning a value to the variable. The word final means you can only assign a value to the variable ONE time, in your code you are assigning a value to the variable every time the class is instantiated - because the variable is static (a member of the class). If you get rid of static, then you can assign it a value in the constructor since its a new variable each time. If you get rid of final then it is just a static variable, which you can assign a new value to at any time.","body":"@YaronLevi he just said it... the static field is a member of the class itself. In your constructor you are assigning a value to the variable. The word final means you can only assign a value to the variable ONE time, in your code you are assigning a value to the variable every time the class is instantiated - because the variable is static (a member of the class). If you get rid of static, then you can assign it a value in the constructor since its a new variable each time. If you get rid of final then it is just a static variable, which you can assign a new value to at any time."},{"owner":{"account_id":540435,"reputation":317,"user_id":908645,"accept_rate":33,"display_name":"user908645"},"score":1,"creation_date":1459377301,"post_id":5093791,"comment_id":60265173,"body_markdown":"@user12345613 put up a pretty good explanation. Alone, either final or static work; but once put together, &quot;static final&quot; forces there is only one such field for that class across all instances and can only be initialized once regardless how many instances.","body":"@user12345613 put up a pretty good explanation. Alone, either final or static work; but once put together, &quot;static final&quot; forces there is only one such field for that class across all instances and can only be initialized once regardless how many instances."}],"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":3,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1454592433,"creation_date":1298478709,"answer_id":5093791,"question_id":5093744,"body_markdown":"static final variables are initialized when the class is loaded. The constructor may be called much later, or not at all. Also, the constructor will be called multiple times (with each new object ), so the field could no longer be final.\r\n\r\nIf you need custom logic to initialize your static final field, put that in a static block","title":"Initialize a static final field in the constructor","body":"<p>static final variables are initialized when the class is loaded. The constructor may be called much later, or not at all. Also, the constructor will be called multiple times (with each new object ), so the field could no longer be final.</p>\n\n<p>If you need custom logic to initialize your static final field, put that in a static block</p>\n"},{"comments":[{"owner":{"account_id":2597187,"reputation":3096,"user_id":2250588,"display_name":"iheanyi"},"score":25,"creation_date":1409065150,"post_id":5093797,"comment_id":39820176,"body_markdown":"Apparently nobody bothered to explain that static variables are variables that exist in all instances of a class. As such, they can only be instantiated once, when the class is loaded - not when potentially many instances of the class are constructed.","body":"Apparently nobody bothered to explain that static variables are variables that exist in all instances of a class. As such, they can only be instantiated once, when the class is loaded - not when potentially many instances of the class are constructed."},{"owner":{"account_id":936266,"reputation":16127,"user_id":965176,"accept_rate":33,"display_name":"qwertzguy"},"score":1,"creation_date":1468446777,"post_id":5093797,"comment_id":64137014,"body_markdown":"Also, I would recommend just assigning in the declaration rather than in a static block. It&#39;s just cleaner and probably is what the OP wanted to do: `private static final int x = 5;`","body":"Also, I would recommend just assigning in the declaration rather than in a static block. It&#39;s just cleaner and probably is what the OP wanted to do: <code>private static final int x = 5;</code>"},{"owner":{"account_id":1181752,"reputation":1737,"user_id":1156544,"accept_rate":69,"display_name":"user1156544"},"score":1,"creation_date":1554389424,"post_id":5093797,"comment_id":97742510,"body_markdown":"What if you want to pass the value &quot;5&quot; from another component/class, instead of having it hardcoded?","body":"What if you want to pass the value &quot;5&quot; from another component/class, instead of having it hardcoded?"}],"tags":[],"owner":{"account_id":138790,"reputation":61721,"user_id":343955,"accept_rate":85,"display_name":"adarshr"},"comment_count":3,"down_vote_count":0,"up_vote_count":202,"is_accepted":true,"score":202,"last_activity_date":1415357131,"creation_date":1298478733,"answer_id":5093797,"question_id":5093744,"body_markdown":"A constructor will be called each time an instance of the class is created. Thus, the above code means that the value of x will be re-initialized each time an instance is created. But because the variable is declared final (and static), you can only do this\r\n\r\n    class A {    \r\n        private static final int x;\r\n        \r\n        static {\r\n        \tx = 5;\r\n        }\r\n    }\r\n\r\nBut, if you remove static, you are allowed to do this:\r\n\r\n    class A {    \r\n        private final int x;\r\n        \r\n        public A() {\r\n        \tx = 5;\r\n        }\r\n    }\r\n\r\nOR this:\r\n\r\n    class A {    \r\n        private final int x;\r\n        \r\n        {\r\n        \tx = 5;\r\n        }\r\n    }","title":"Initialize a static final field in the constructor","body":"<p>A constructor will be called each time an instance of the class is created. Thus, the above code means that the value of x will be re-initialized each time an instance is created. But because the variable is declared final (and static), you can only do this</p>\n\n<pre><code>class A {    \n    private static final int x;\n\n    static {\n        x = 5;\n    }\n}\n</code></pre>\n\n<p>But, if you remove static, you are allowed to do this:</p>\n\n<pre><code>class A {    \n    private final int x;\n\n    public A() {\n        x = 5;\n    }\n}\n</code></pre>\n\n<p>OR this:</p>\n\n<pre><code>class A {    \n    private final int x;\n\n    {\n        x = 5;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":268636,"reputation":8124,"user_id":557500,"display_name":"rfeak"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1298478748,"creation_date":1298478748,"answer_id":5093804,"question_id":5093744,"body_markdown":"Think about what happens the second time you instantiate an object. It tries to set it AGAIN, which is expressly prohibited by being a static final. It can only be set one time for the entire class, not instance.\r\n\r\nYou should set the value when you declare it\r\n\r\n    private static final x=5;\r\n\r\nIf you need additional logic, or more complex instantiation, this can be done in a static initializer block.","title":"Initialize a static final field in the constructor","body":"<p>Think about what happens the second time you instantiate an object. It tries to set it AGAIN, which is expressly prohibited by being a static final. It can only be set one time for the entire class, not instance.</p>\n\n<p>You should set the value when you declare it</p>\n\n<pre><code>private static final x=5;\n</code></pre>\n\n<p>If you need additional logic, or more complex instantiation, this can be done in a static initializer block.</p>\n"},{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298478836,"creation_date":1298478836,"answer_id":5093819,"question_id":5093744,"body_markdown":"Think about it. You could do this with your code:\r\n\r\n    A a = new A();\r\n    A b = new A(); // Wrong... x is already initialised\r\n\r\nThe correct ways to initialise x are:\r\n\r\n    public class A \r\n    {    \r\n        private static final int x = 5;\r\n    }\r\n\r\nor\r\n\r\n    public class A \r\n    {    \r\n        private static final int x;\r\n\r\n        static\r\n        {\r\n            x = 5;\r\n        }\r\n    }\r\n","title":"Initialize a static final field in the constructor","body":"<p>Think about it. You could do this with your code:</p>\n\n<pre><code>A a = new A();\nA b = new A(); // Wrong... x is already initialised\n</code></pre>\n\n<p>The correct ways to initialise x are:</p>\n\n<pre><code>public class A \n{    \n    private static final int x = 5;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>public class A \n{    \n    private static final int x;\n\n    static\n    {\n        x = 5;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":312777,"reputation":69,"user_id":627044,"display_name":"ap2cu"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1298478838,"creation_date":1298478838,"answer_id":5093820,"question_id":5093744,"body_markdown":"`static` means that the variable is unique on the application.\r\n`final` means that it should be set only once.\r\n\r\nIf you set it in your constructor, you allow to set the variable more than once.\r\n\r\nHence you should intialize it directly or propose a static method to initialize it.","title":"Initialize a static final field in the constructor","body":"<p><code>static</code> means that the variable is unique on the application.\n<code>final</code> means that it should be set only once.</p>\n\n<p>If you set it in your constructor, you allow to set the variable more than once.</p>\n\n<p>Hence you should intialize it directly or propose a static method to initialize it.</p>\n"},{"tags":[],"owner":{"account_id":314953,"reputation":10311,"user_id":630443,"accept_rate":62,"display_name":"i.am.michiel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1521837003,"creation_date":1298479119,"answer_id":5093883,"question_id":5093744,"body_markdown":"**Final** doesn&#39;t mean that is has to be initialized in the constructor. \r\nGenerally this is what is done : \r\n\r\n     private static final int x = 5;\r\n\r\n\r\n**static** instead means that the variable will be shared through multiple instances of the class. For example : \r\n\r\n    public class Car {\r\n       static String name;\r\n       public Car(String name) {\r\n          this.name = name;\r\n       }\r\n    }\r\n\r\n    ...\r\n\r\n    Car a = new Car(&quot;Volkswagen&quot;);\r\n    System.out.println(a.name); // Produces Volkswagen\r\n\r\n    Car b = new Car(&quot;Mercedes&quot;);\r\n    System.out.println(b.name); // Produces Mercedes\r\n    System.out.println(a.name); // Produces Mercedes\r\n\r\n\r\n\r\n\r\n\r\n\r\n ","title":"Initialize a static final field in the constructor","body":"<p><strong>Final</strong> doesn't mean that is has to be initialized in the constructor. \nGenerally this is what is done : </p>\n\n<pre><code> private static final int x = 5;\n</code></pre>\n\n<p><strong>static</strong> instead means that the variable will be shared through multiple instances of the class. For example : </p>\n\n<pre><code>public class Car {\n   static String name;\n   public Car(String name) {\n      this.name = name;\n   }\n}\n\n...\n\nCar a = new Car(\"Volkswagen\");\nSystem.out.println(a.name); // Produces Volkswagen\n\nCar b = new Car(\"Mercedes\");\nSystem.out.println(b.name); // Produces Mercedes\nSystem.out.println(a.name); // Produces Mercedes\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11223764,"reputation":1,"user_id":8234104,"display_name":"Kush"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1522925996,"creation_date":1522925996,"answer_id":49670729,"question_id":5093744,"body_markdown":"        public class StaticFinalExample {\r\n      /*\r\n       * Static final fields should be initialized either in\r\n       * static blocks or at the time of declaration only\r\n       * Reason : They variables are like the utility fields which should be accessible\r\n       * before object creation only once.\r\n       */\r\n      static final int x;\r\n    \r\n      /*\r\n       * Final variables shuould be initialized either at the time of declaration or\r\n       * in initialization block or constructor only as they are not accessible in static block\r\n       */\r\n      final int y;\r\n    \r\n      /*\r\n       * Static variables can be initialized either at the time of declaration or\r\n       * in initialization or constructor or static block. Since the default value is given to the\r\n       * static variables by compiler, so it depends on when you need the value\r\n       * depending on that you can initialize the variable appropriately\r\n       * An example of this is shown below in the main method\r\n       */\r\n      static int z;\r\n    \r\n      static {\r\n        x = 20; // Correct\r\n      }\r\n      {\r\n        y = 40; // Correct\r\n      }\r\n      StaticFinalExample() {\r\n        z = 50; // Correct\r\n      }\r\n      public static void main (String args[]) {\r\n        System.out.println(&quot;Before Initialization in Constructor&quot; + z);   // It will print 0\r\n        System.out.println(&quot;After Initializtion in Constructor&quot; + new StaticFinalExample().z); // It will print 50\r\n      }\r\n    }\r\n\r\n","title":"Initialize a static final field in the constructor","body":"<pre><code>    public class StaticFinalExample {\n  /*\n   * Static final fields should be initialized either in\n   * static blocks or at the time of declaration only\n   * Reason : They variables are like the utility fields which should be accessible\n   * before object creation only once.\n   */\n  static final int x;\n\n  /*\n   * Final variables shuould be initialized either at the time of declaration or\n   * in initialization block or constructor only as they are not accessible in static block\n   */\n  final int y;\n\n  /*\n   * Static variables can be initialized either at the time of declaration or\n   * in initialization or constructor or static block. Since the default value is given to the\n   * static variables by compiler, so it depends on when you need the value\n   * depending on that you can initialize the variable appropriately\n   * An example of this is shown below in the main method\n   */\n  static int z;\n\n  static {\n    x = 20; // Correct\n  }\n  {\n    y = 40; // Correct\n  }\n  StaticFinalExample() {\n    z = 50; // Correct\n  }\n  public static void main (String args[]) {\n    System.out.println(\"Before Initialization in Constructor\" + z);   // It will print 0\n    System.out.println(\"After Initializtion in Constructor\" + new StaticFinalExample().z); // It will print 50\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3512449,"reputation":3956,"user_id":2936460,"accept_rate":83,"display_name":"SQB"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683214598,"creation_date":1577199147,"answer_id":59470454,"question_id":5093744,"body_markdown":"### Static\r\nThe keyword `static` means that a member of an object, in this case a field, is not tied to an instance of a class, but is a member of the class in general instead. If the static member is a field, it is initialised during loading of a class.\r\n\r\nIt is accessible through the class rather than through an instance (though the latter is not impossible, it is considered bad form), so it is accessible without the constructor having ran at all — ever.\r\n\r\n### Final\r\nThe keyword `final`, when applied to a field of an object, means that it can be assigned to only once, and that it _has_ to be assigned to during initialisation.\r\n\r\n### Static Final\r\nTaken together, these two keywords effectively define a constant: it can be assigned to only once, _has_ to be assigned to, and is the same for all instances of that class.\r\n\r\nSince the static field is initialised during class loading, it has to be initialised then, either at declaration, or in a static initialiser block.\r\n\r\nThis means that if and when you reach the constructor, it will already have been initialised, because it _needed_ to already have been initialised.\r\n\r\n### Singleton\r\nIf you&#39;re looking for a class member that you only assign to once, but read many times, you&#39;re dealing with [a _singleton_][singleton]. The singleton pattern is commonly used for access to a shared resource.\r\n\r\nThe field is made static but not final; instead when accessing the field, the code checks whether it has been initialised already, if not, it is done then and there. Note that in environments with multiple threads, you need to synchronise access to the field, to avoid accessing it while it is initialising.\r\n\r\n\r\n[tutorial]: https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\r\n[singleton]: https://www.baeldung.com/java-singleton","title":"Initialize a static final field in the constructor","body":"<h3>Static</h3>\n<p>The keyword <code>static</code> means that a member of an object, in this case a field, is not tied to an instance of a class, but is a member of the class in general instead. If the static member is a field, it is initialised during loading of a class.</p>\n<p>It is accessible through the class rather than through an instance (though the latter is not impossible, it is considered bad form), so it is accessible without the constructor having ran at all — ever.</p>\n<h3>Final</h3>\n<p>The keyword <code>final</code>, when applied to a field of an object, means that it can be assigned to only once, and that it <em>has</em> to be assigned to during initialisation.</p>\n<h3>Static Final</h3>\n<p>Taken together, these two keywords effectively define a constant: it can be assigned to only once, <em>has</em> to be assigned to, and is the same for all instances of that class.</p>\n<p>Since the static field is initialised during class loading, it has to be initialised then, either at declaration, or in a static initialiser block.</p>\n<p>This means that if and when you reach the constructor, it will already have been initialised, because it <em>needed</em> to already have been initialised.</p>\n<h3>Singleton</h3>\n<p>If you're looking for a class member that you only assign to once, but read many times, you're dealing with <a href=\"https://www.baeldung.com/java-singleton\" rel=\"nofollow noreferrer\">a <em>singleton</em></a>. The singleton pattern is commonly used for access to a shared resource.</p>\n<p>The field is made static but not final; instead when accessing the field, the code checks whether it has been initialised already, if not, it is done then and there. Note that in environments with multiple threads, you need to synchronise access to the field, to avoid accessing it while it is initialising.</p>\n"}],"owner":{"account_id":179971,"reputation":12625,"user_id":412992,"accept_rate":63,"display_name":"Yaron Levi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109532,"favorite_count":0,"down_vote_count":2,"up_vote_count":92,"accepted_answer_id":5093797,"answer_count":8,"score":90,"last_activity_date":1683214598,"creation_date":1298478526,"question_id":5093744,"body_markdown":"    public class A \r\n    {    \r\n        private static final int x;\r\n    \r\n        public A() \r\n        {\r\n            x = 5;\r\n        }\r\n    }\r\n\r\n* `final` means the variable can only be assigned once (in the constructor).\r\n* `static` means it&#39;s a class instance.\r\n\r\nI can&#39;t see why this is prohibited. Where do those keywords interfere with each other?","title":"Initialize a static final field in the constructor","body":"<pre><code>public class A \n{    \n    private static final int x;\n\n    public A() \n    {\n        x = 5;\n    }\n}\n</code></pre>\n\n<ul>\n<li><code>final</code> means the variable can only be assigned once (in the constructor).</li>\n<li><code>static</code> means it's a class instance.</li>\n</ul>\n\n<p>I can't see why this is prohibited. Where do those keywords interfere with each other?</p>\n"},{"tags":["java","rest","error-handling","swagger","swagger-codegen"],"answers":[{"comments":[{"owner":{"account_id":23088,"reputation":22410,"user_id":57601,"accept_rate":100,"display_name":"Kosi2801"},"score":2,"creation_date":1686902102,"post_id":76174919,"comment_id":134864820,"body_markdown":"From my understanding this is untrue. \nThe swagger definition I gave as example is perfectly valid and validates also as such in the editor. This means from the standard it is legal and allowed to return different objects with different codes, it&#39;s just not allowed to switch responses for the same code.\nIt also makes sense to return an error-object in an error scenario.\n\nThis works ok with dynamic languages, my issue is that with the statically compiled Java language the generated structure does not allow to fulfil the promises of the REST API without bending over backwards.","body":"From my understanding this is untrue.  The swagger definition I gave as example is perfectly valid and validates also as such in the editor. This means from the standard it is legal and allowed to return different objects with different codes, it&#39;s just not allowed to switch responses for the same code. It also makes sense to return an error-object in an error scenario.  This works ok with dynamic languages, my issue is that with the statically compiled Java language the generated structure does not allow to fulfil the promises of the REST API without bending over backwards."}],"tags":[],"owner":{"account_id":26528740,"reputation":367,"user_id":20161294,"display_name":"v-g"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1683214415,"creation_date":1683214415,"answer_id":76174919,"question_id":68925665,"body_markdown":"According to Swagger official [documentation][1]:\r\n\r\n&gt; Swagger is a set of open-source tools built around the OpenAPI Specification that can help you design, build, document and consume REST APIs.\r\n\r\nRepresentational state transfert architectural style enforce a set of several constraints. One of them is having a uniform interface, which itself involve several other constraints, especialy resource manipulation through representations of effective server data. \r\n\r\nThe way Swagger is built is to enforce at best thoses constraints for building REST APIs, it would violate REST principles if the API would return a representation of another resource if the original request was to create, read, modify or suppress a ressource from the original server.\r\n\r\nThere is therfore no proper way to return different objects for different response codes in Swagger-generated REST API.\r\n\r\n  [1]: https://swagger.io/docs/specification/about/","title":"How to return different objects for different response codes in Swagger-generated REST API?","body":"<p>According to Swagger official <a href=\"https://swagger.io/docs/specification/about/\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Swagger is a set of open-source tools built around the OpenAPI Specification that can help you design, build, document and consume REST APIs.</p>\n</blockquote>\n<p>Representational state transfert architectural style enforce a set of several constraints. One of them is having a uniform interface, which itself involve several other constraints, especialy resource manipulation through representations of effective server data.</p>\n<p>The way Swagger is built is to enforce at best thoses constraints for building REST APIs, it would violate REST principles if the API would return a representation of another resource if the original request was to create, read, modify or suppress a ressource from the original server.</p>\n<p>There is therfore no proper way to return different objects for different response codes in Swagger-generated REST API.</p>\n"}],"owner":{"account_id":23088,"reputation":22410,"user_id":57601,"accept_rate":100,"display_name":"Kosi2801"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1010,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1683214415,"creation_date":1629904960,"question_id":68925665,"body_markdown":"I want to respond with different result objects in a Swagger generated API. The type of object is dependent on the result code.\r\nBut it seems that the Swagger codegen generates only code that allows the first defined/used type to be returned.\r\n\r\nAn example Swagger definition that returns different objects in the OK and error case is like:\r\n```\r\nswagger: &quot;2.0&quot;\r\ninfo:\r\n  description: &quot;API&quot;\r\n  version: 1.0.0\r\n  title: Example\r\nhost: localhost:8080\r\n\r\nschemes:\r\n  - http\r\n\r\npaths:\r\n  /exampleCall:\r\n    get:\r\n      operationId: exampleCall\r\n      produces:\r\n        -  application/json\r\n      responses:\r\n        200:\r\n          description: OK\r\n          schema:\r\n            $ref: &#39;#/definitions/exampleResponse&#39;\r\n        400:\r\n          description: Error\r\n          schema:\r\n            $ref: &#39;#/definitions/exampleError&#39;\r\ndefinitions:\r\n  exampleResponse:\r\n    type: object\r\n    properties:\r\n      result:\r\n        type: string\r\n  exampleError:\r\n    type: object\r\n    properties:\r\n      code:\r\n        type: string\r\n```\r\n\r\nThis then gets generated by the SwaggerCodeGen into following API interface\r\n```\r\n@Validated\r\n@Api(value = &quot;exampleCall&quot;, description = &quot;the exampleCall API&quot;)\r\n@RequestMapping(value = &quot;&quot;)\r\npublic interface ExampleCallApi {\r\n\r\n    ExampleCallApiDelegate getDelegate();\r\n\r\n    @ApiOperation(value = &quot;&quot;, nickname = &quot;exampleCall&quot;, notes = &quot;&quot;, response = ExampleResponse.class, tags={  })\r\n    @ApiResponses(value = { \r\n        @ApiResponse(code = 200, message = &quot;OK&quot;, response = ExampleResponse.class),\r\n        @ApiResponse(code = 400, message = &quot;Error&quot;, response = ExampleError.class) })\r\n    @RequestMapping(value = &quot;/exampleCall&quot;,\r\n        produces = { &quot;application/json&quot; }, \r\n        method = RequestMethod.GET)\r\n    default ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\r\n        return getDelegate().exampleCall();\r\n    }\r\n}\r\n\r\n```\r\n\r\nBut when I try to implement the delegate like this\r\n```\r\npublic class ExampleCallApiDelegateImpl implements ExampleCallApiDelegate {\r\n\r\n    @Override\r\n    public ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\r\n        ExampleError error = new ExampleError();\r\n        error.setCode(&quot;123&quot;);\r\n        return new ResponseEntity&lt;ExampleError&gt;(error, HttpStatus.BAD_REQUEST);\r\n    }\r\n}\r\n```\r\nit of course fails to compile because of incorrect return types.\r\n\r\nWhat would be the proper way to implement different return objects per response code with that Swagger generated API?\r\nIs there even a proper way?\r\n","title":"How to return different objects for different response codes in Swagger-generated REST API?","body":"<p>I want to respond with different result objects in a Swagger generated API. The type of object is dependent on the result code.\nBut it seems that the Swagger codegen generates only code that allows the first defined/used type to be returned.</p>\n<p>An example Swagger definition that returns different objects in the OK and error case is like:</p>\n<pre><code>swagger: &quot;2.0&quot;\ninfo:\n  description: &quot;API&quot;\n  version: 1.0.0\n  title: Example\nhost: localhost:8080\n\nschemes:\n  - http\n\npaths:\n  /exampleCall:\n    get:\n      operationId: exampleCall\n      produces:\n        -  application/json\n      responses:\n        200:\n          description: OK\n          schema:\n            $ref: '#/definitions/exampleResponse'\n        400:\n          description: Error\n          schema:\n            $ref: '#/definitions/exampleError'\ndefinitions:\n  exampleResponse:\n    type: object\n    properties:\n      result:\n        type: string\n  exampleError:\n    type: object\n    properties:\n      code:\n        type: string\n</code></pre>\n<p>This then gets generated by the SwaggerCodeGen into following API interface</p>\n<pre><code>@Validated\n@Api(value = &quot;exampleCall&quot;, description = &quot;the exampleCall API&quot;)\n@RequestMapping(value = &quot;&quot;)\npublic interface ExampleCallApi {\n\n    ExampleCallApiDelegate getDelegate();\n\n    @ApiOperation(value = &quot;&quot;, nickname = &quot;exampleCall&quot;, notes = &quot;&quot;, response = ExampleResponse.class, tags={  })\n    @ApiResponses(value = { \n        @ApiResponse(code = 200, message = &quot;OK&quot;, response = ExampleResponse.class),\n        @ApiResponse(code = 400, message = &quot;Error&quot;, response = ExampleError.class) })\n    @RequestMapping(value = &quot;/exampleCall&quot;,\n        produces = { &quot;application/json&quot; }, \n        method = RequestMethod.GET)\n    default ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\n        return getDelegate().exampleCall();\n    }\n}\n\n</code></pre>\n<p>But when I try to implement the delegate like this</p>\n<pre><code>public class ExampleCallApiDelegateImpl implements ExampleCallApiDelegate {\n\n    @Override\n    public ResponseEntity&lt;ExampleResponse&gt; exampleCall() {\n        ExampleError error = new ExampleError();\n        error.setCode(&quot;123&quot;);\n        return new ResponseEntity&lt;ExampleError&gt;(error, HttpStatus.BAD_REQUEST);\n    }\n}\n</code></pre>\n<p>it of course fails to compile because of incorrect return types.</p>\n<p>What would be the proper way to implement different return objects per response code with that Swagger generated API?\nIs there even a proper way?</p>\n"},{"tags":["java","spring-batch"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683159254,"post_id":76168187,"comment_id":134325329,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":13775925,"reputation":71,"user_id":9942276,"display_name":"Atul Lohiya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683214354,"creation_date":1683150324,"question_id":76168187,"body_markdown":"**My usecase**:\r\nI need to read data from an oracle database and load it to multiple SQL server DBs located on different servers. To keep the design and code generic and scalable, the list of tables to read and the list of servers where they should be loaded is kept in DB.\r\n\r\n**Note that there are multiple servers involved and not just multiple DBs on a single server**. So datasource would be different for each writer. \r\n\r\n**My strategy**:\r\nMy strategy was to create a job with one step each for a table. Each step thus reads one table&#39;s data in chunks then writes it to all servers. Thus when one step completes, its data would have been loaded on all servers. This way each step would load one table data to all servers.\r\n\r\n```\r\nStep1: read table1&#39;s chunks -&gt; write each chunk to multiple servers\r\nStep2: read table2&#39;s chunks -&gt; write each chunk to multiple servers\r\n.\r\n.\r\n.\r\nStepN: read tableN&#39;s chunks -&gt; write each chunk to multiple servers\r\n```\r\n\r\n**How to implement above strategy**:\r\nFor this I could use CompositeItemWriter with delegate writers each having its own datasource instance pointing to individual servers. \r\nThus I was thinking and hoping that I would be able to write a single chunk to multiple servers from a single step. But that does not work!\r\n\r\n**The problem with above strategy**:\r\nThe problem is **one step can have only one transaction manager which can have only one datasource**. That means no matter how many writers I have per step, all should be working with the same datasource to connect to the same single server!\r\n\r\nFrom what I have observed so far, if the datasource &quot;**instance**&quot; in transaction manager of step is different from datasource &quot;**instance**&quot; of writer, rollback does not work even if it is just a single writer. With multiple writers having different datasources, rollback only works for the writer whose data source &quot;instance&quot; is same as the one assigned to step&#39;s transaction manager. All other weriters don&#39;t get rolled back leaving DB in insconsistent state. \r\n\r\nJust using same configuration and creating a new datasource instance for manager and writer does not work. The same instance must be used for both.\r\n\r\nBecause of this issue, I am unable to use above strategy.\r\n\r\n**What options do I have for this usecase**?\r\nI came across the ChainedTransactionManager but that can also leave the DB in inconsistent state plus that is deprecated anyway so I cannot use it.\r\n\r\n**What else can I do to ensure all the data is read only once and gets written to all servers**?\r\n\r\n**Constraints**:\r\n1. Data can be read only once from the oracle source DB\r\n2. Please note **I CANNOT use beans** to initialize any datasources/job/steps etc since I don&#39;t know in advance how many tables and servers would be involved. All that is created dynamically for scalability reading needed information from DB.\r\n\r\n\r\n**Sample code explaination**:\r\nFor the POC, I am reading only 15 records from a single table in source DB with a chunk size of 5. Now in SourceRowMapper, for a specific row, I set col3 to null. This column in target SQL server DB is not-null so the insert fails as expected. The write failure should rollback the entire chunk and none of the records from that chunk should be inserted. I would be enabling skipping here so that only the failed records are not written but rest of the records get written to all the servers and which records failed are available for reports.\r\n\r\nAs I explained above, that only works when the data source instance (and not just the configuration) of the step&#39;s transaction manager is same as that was assigned to the writer. If they are not same on a writer, all records from the failing chunk except the problem record get inserted in the table of that server. Only the matching datasource writer gets rolled back correctly.\r\n\r\nNow, if I try to add a skip policy, above issue causes all except problem record to be inserted twice due to chunk scanning after the chunk has failed on first attempt.\r\n\r\nThis only happens when DBMS itself throws some exception. If I try to simulate the failure in code ( search for “Simulating write error” in SampleJob), it all works fine!\r\n\r\nBelow are the code details. I have simplified the code to remove loops etc to load the data to multiple servers.\r\n\r\n**Batch configurer**:\r\n```\r\n@Slf4j\r\n@Configuration\r\n@EnableBatchProcessing\r\npublic class SpringBatchConfig implements BatchConfigurer{\r\n\t\r\n\t@Value(&quot;${spring.datasource.dest.url}&quot;)\r\n\tprivate String destDbUrl;\r\n\r\n\t@Value(&quot;${spring.datasource.dest.driverClassName}&quot;)\r\n\tprivate String destDbDriverClassName;\r\n\t\r\n\t@Value(&quot;${spring.profiles.active:default}&quot;)\r\n\tprivate String activeProfile;\r\n\t\r\n\t@Value(&quot;${spring.batch.use.in-mem.db:false}&quot;)\r\n\tprivate Boolean useInMemDb;\r\n\t\r\n\t@Autowired\r\n\tprivate DataSource dbDataSource;\r\n\t\r\n\tprivate JobRepository jobRepo;\r\n\tprivate PlatformTransactionManager transactionMgr;\r\n\tprivate JobLauncher jobLauncher;\r\n\tprivate JobExplorer jobExplorer;\r\n\t\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\t@Bean\r\n\t@Override\r\n\tpublic JobRepository getJobRepository() throws Exception {\r\n\r\n\t\tlog.info(&quot;Active profile: {}&quot;, activeProfile);\r\n\t\tPlatformTransactionManager transMgr = getTransactionManager();\r\n\t\t\r\n\t\tif(jobRepo != null)\r\n\t\t\treturn jobRepo;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating in-mem jobRepository bean for SpringBatchConfig with destDbUrl: {}&quot;, destDbUrl); \r\n\t\t\tMapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(transMgr);\r\n\t\t\tjobRepoFactory.afterPropertiesSet();\r\n\t\t\treturn jobRepo = (JobRepository) jobRepoFactory.getObject();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating SQL jobRepository bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\t\r\n\t\t\tJobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\r\n\t\t\tfactory.setDataSource(dbDataSource);\r\n\t\t\tfactory.setTransactionManager(transMgr);\r\n\t\t\tfactory.afterPropertiesSet();\r\n\t\t\tfactory.setDatabaseType(&quot;SQLSERVER&quot;);\r\n\t\t\tfactory.setTablePrefix(&quot;dbo.BATCH_&quot;);\r\n\t\t\tfactory.setIsolationLevelForCreate(&quot;ISOLATION_SERIALIZABLE&quot;);\r\n\t\t\treturn jobRepo = (JobRepository) factory.getObject();\r\n\t\t}\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic PlatformTransactionManager getTransactionManager() throws SQLException {\r\n\t\t\r\n\t\tif(transactionMgr != null)\r\n\t\t\treturn transactionMgr;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Getting resourceless transaction manager for in-mem jobRepository&quot;);\r\n\t\t\treturn transactionMgr = new ResourcelessTransactionManager();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Getting transaction manager for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\treturn transactionMgr = new DataSourceTransactionManager(dbDataSource);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\t@Bean(name = &quot;jobLauncher&quot;)\r\n\tpublic JobLauncher getJobLauncher() throws Exception {\r\n\t\tlog.info(&quot;Creating jobLauncher bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\r\n\t\tif(this.jobLauncher != null)\r\n\t\t\treturn this.jobLauncher;\r\n\t\t\r\n\t\tSimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n\t\tjobLauncher.setJobRepository(getJobRepository());\r\n\t\tjobLauncher.afterPropertiesSet();\r\n\t\treturn this.jobLauncher = jobLauncher;\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\t@Override\r\n\t@Bean(name = &quot;jobExplorer&quot;)\r\n\tpublic JobExplorer getJobExplorer() throws Exception {\r\n\t\t\r\n\t\tif(jobExplorer != null)\r\n\t\t\treturn jobExplorer;\r\n\t\t\r\n\t\tif(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating jobExplorer bean for in-mem repo&quot;);\r\n\t\t\tMapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(getTransactionManager());\r\n\t\t\tjobRepoFactory.afterPropertiesSet();\r\n\t\t\t\r\n\t\t\tMapJobExplorerFactoryBean explorerFactory = new MapJobExplorerFactoryBean(jobRepoFactory);\r\n\t\t\texplorerFactory.afterPropertiesSet();\r\n\t\t\t\r\n\t\t\treturn jobExplorer = explorerFactory.getObject();\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlog.info(&quot;Creating jobExplorer bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\r\n\t\t\tJobExplorerFactoryBean explorerFactory = new JobExplorerFactoryBean();\r\n\t\t\texplorerFactory.setDataSource(dbDataSource);\r\n\t\t\texplorerFactory.afterPropertiesSet();\r\n\t\t\treturn jobExplorer = explorerFactory.getObject();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n**Job/Step creation for the strategy I explained above**:\r\n```\r\n@Slf4j\r\n@Configuration\r\npublic class SampleJob {\r\n\r\n\t@Autowired\r\n\tprivate JobBuilderFactory jobBuilderFactory;\r\n\r\n\t@Autowired\r\n\tprivate StepBuilderFactory stepBuilderFactory;\r\n\r\n\t@Autowired\r\n\t@Qualifier(&quot;sourceDBTemplate&quot;)\r\n\tprivate JdbcTemplate sourceDBTemplate;\r\n\t\r\n\t@Value(&quot;${spring.datasource.src.schema}&quot;)\r\n\tprivate String schema;\r\n\r\n\t@Autowired\r\n\t@Qualifier(&quot;jobLauncher&quot;)\r\n\tprivate JobLauncher jobLauncher;\r\n\t\r\n\t@Autowired\r\n\tprivate DatabaseConfigurations dbConfig;\r\n\t\r\n\t@Autowired\r\n\tprivate DBJobExecutionListener jobExecutionListener;\r\n\r\n\tpublic void startJob() throws Exception {\r\n\t\t\r\n\t\tMap&lt;String, JobParameter&gt; jobConfigMap = new HashMap&lt;&gt;();\r\n\t\tjobConfigMap.put(&quot;time&quot;, new JobParameter(System.currentTimeMillis()));\r\n\t\tJobParameters parameters = new JobParameters(jobConfigMap);\r\n\r\n\t\ttry \r\n\t\t{\t\t\t\t\t\t\r\n\t\t\tjobLauncher.run(getJob(), parameters);\r\n\t\t\t\r\n\t\t}catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\r\n\t\t\t\t| JobParametersInvalidException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic Job getJob(List&lt;Table&gt; tables) throws Exception {\r\n\t\tClock currentClock = Clock.systemUTC();\r\n\t\tOffsetDateTime odt = OffsetDateTime.ofInstant(Instant.now(currentClock), currentClock.getZone());\r\n\t\tString jobName = &quot;DataRep_&quot;+odt.format(DateTimeFormatter.ofPattern(&quot;yyyyMMddhhmmss&quot;));\r\n\t\t\r\n\t\tlog.info(&quot;Creating job {}; timezone: {}&quot;, jobName, currentClock.getZone().toString() + &quot;--&quot; + currentClock.getZone().getId() + &quot;--&quot; + currentClock.getZone().getDisplayName(TextStyle.FULL, Locale.getDefault()));\r\n\t\t\r\n\t\tJobBuilder builder = jobBuilderFactory.get(jobName).listener(jobExecutionListener);\r\n\t\t\r\n\t\tSimpleJobBuilder sjb = builder.start(getStep(&quot;sourceTable&quot;));\r\n\t\t\r\n\t\t//loop through list of tables to add a step per table; this is the reason I need to do things dynamically without beans; this is non-negotiable. I have simplified the code here to remove complex loops etc for clarity. It is just that whatever code has been presented here would just run in loop and a few other things that get some meta info dynamically to create the steps.\r\n\t\t/*for(int index = 1; index &lt; tables.size(); index++)\r\n\t\t{\r\n\t\t\tsjb.next(getStep(tables.get(index)));\r\n\t\t}*/\r\n\t\t\r\n\t\treturn sjb.build();\r\n\t}\r\n\r\n\tprivate Step getStep(String table) throws Exception {\r\n\t\tlog.info(&quot;Getting step for table {}&quot;, table);\r\n\r\n\t\t//needed to ensure same datasource instance from writer is assigned to transaction manager. This is still a problem as multiple writers would have different datasources for different servers! So what options do I have?\r\n\t\tDataSourceWrapper dsw = new DataSourceWrapper();\r\n\t\t\r\n\t\tSimpleStepBuilder&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; sb = stepBuilderFactory.get(&quot;Copy &quot;+table)\r\n\t\t\t\t.&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;chunk(5)\r\n\t\t\t\t.reader(getItemReader(table))\r\n\t\t\t\t.writer(getItemWriter(table, dsw));\t//this should write the same chunk to multiple servers; If not then what options do I have?\r\n//\t\t\t\t.faultTolerant()\r\n//\t\t\t\t.noRetry(Exception.class);\r\n//\t\t\t\t.retryPolicy( new NeverRetryPolicy());\r\n//\t\t\t\t.skip(Exception.class)\r\n//\t\t\t\t.skipLimit(Integer.MAX_VALUE)\r\n//\t\t\t\t.skipPolicy(new AlwaysSkipItemSkipPolicy())\r\n//\t\t\t\t.listener(new DBReplicationSkipListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;());\r\n\t\t\r\n//\t\tsb.listener(new DBStepExecutionListener());\r\n//\t\tsb.listener(new DBItemReadListener&lt;Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBItemProcessListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBItemWriteListener&lt;Map&lt;String, Object&gt;&gt;())\r\n//\t\t\t.listener(new DBChunkListener());\r\n\r\n\t\t//use same datasource from writer\r\n\t\tsb.transactionManager(new DataSourceTransactionManager(dsw.ds));\r\n\t\treturn sb.build();\r\n\r\n\t}\r\n\r\n\tpublic JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; getItemReader(String table) {\r\n\t\tlog.info(&quot;Creating item reader for table {}&quot;, table);\r\n\r\n\t\tJdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; jdbcCIR = new JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt;();\r\n\t\tjdbcCIR.setDataSource(sourceDBTemplate.getDataSource());\r\n\t\tjdbcCIR.setSql(String.format(&quot;select col1, col2, col3, col4, col5 from %1$s order by col1 asc&quot;, table));\r\n\t\tjdbcCIR.setRowMapper(new SourceRowMapper());\r\n\t\tjdbcCIR.setMaxItemCount(15);\t//with chunk size of 5, 3 chunks would be created\r\n\r\n\t\treturn jdbcCIR;\r\n\t}\r\n\t\t\r\n\r\n\t//THis function would loop through the list of servers to create a CompositeItemWriter. Below code is simplified for clarity here.\r\n\tpublic JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; getItemWriter(String sourceTable, String table, DataSourceWrapper dsw) {\r\n\t\tlog.info(&quot;Creating item writer for table {}&quot;, sourceTable);\r\n\r\n\t\tJdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt; jdbcBatchItemWriter = new JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt;();\r\n\t\t\t\t\r\n\t\tDataSource destinationDataSource = dbConfig.getDestinationDataSource(table);\r\n\t\t\r\n\t\tString query = String.format(&quot;insert into %1$s(col_1, col_2, col_3, col_4, col_5) values(:col1, :col2, :col3, :col4, :col5)&quot;, table);\r\n\t\tlog.info(&quot;Insert query: {}&quot;,query);\r\n\t\t\r\n\t\t//here would be the loop for multiple servers; here I have removed it for clarity\r\n\t\tjdbcBatchItemWriter\r\n\t\t\t.dataSource(dsw.ds = destinationDataSource)\r\n\t\t\t.sql(query)\r\n\t\t\t.itemSqlParameterSourceProvider(item -&gt; {\r\n\t\t\t\t\tMapSqlParameterSource paramSource = new MapSqlParameterSource();\r\n\t\t\t\t\tparamSource.addValues(item);\r\n\t\t\t\t\t\r\n\t\t\t\t\tint id = (int)item.get(&quot;col1&quot;);\r\n\t\t\t\t\tlog.info(&quot;Getting sql param source for writing item {}&quot;, id);\r\n\r\n//\t\t\t\t\tif(id == 45678)\r\n//\t\t\t\t\t{\r\n//\t\t\t\t\t\tlog.info(&quot;Simulating write error for item {}&quot;, id);\r\n//\t\t\t\t\t\tObject tempObj = null;\r\n//\t\t\t\t\t\tlog.info(&quot;Id is {}&quot;, tempObj.toString())\r\n//\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn paramSource;\r\n\t\t\t\t});\r\n\r\n\t\tJdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; writer = jdbcBatchItemWriter.build();\r\n\t\twriter.afterPropertiesSet();\r\n\t\t\r\n\t\treturn writer;\r\n\t}\r\n\t\r\n\tprivate static class DataSourceWrapper\r\n\t{\r\n\t\tpublic DataSource ds;\r\n\t\tpublic DataSourceWrapper()\r\n\t\t{}\r\n\t\tpublic DataSourceWrapper(DataSource ds)\r\n\t\t{\r\n\t\t\tthis.ds = ds;\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n@Slf4j\r\npublic class SourceRowMapper implements RowMapper&lt;Map&lt;String, Object&gt;&gt;{\r\n\t\r\n\t@Override\r\n\tpublic Map&lt;String, Object&gt; mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n\t\t\r\n\t\tlog.info(String.format(&quot;Reading row# %1$s&quot;, rowNum));\r\n\r\n\t\tMap&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\r\n\t\t\r\n\t\tString column;\r\n\t\tObject id = null, val = null;\r\n\t\t\t\r\n\t\tcolumn = &quot;col1&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tid = val;\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col2&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col3&quot;;\r\n\t\tval = rs.getObject(column);\r\n\r\n\t\tif(id.toString().equals(&quot;78787&quot;))\r\n\t\t{\r\n\t\t\tlog.info(&quot;setting val to null for non-null column col3 for id {}&quot;, id.toString());\r\n\t\t\tval = null;\r\n\t\t}\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col4&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\r\n\t\tcolumn = &quot;col5&quot;;\r\n\t\tval = rs.getObject(column);\r\n\t\tmap.put(column, val);\r\n\t\t\r\n\t\treturn map;\r\n\t}\t\r\n}\r\n```\r\n\r\n**What I have tried**:\r\nI have tried various combinations of lines that I commented while creating the step in above sample. I even debugged batch code itself but can&#39;t get to the root of it nor can I find a solution to it. I checked the FaultTolerantChunkProcessor as explained in one of the links below. But my problem happens even when I have not called faultTolerant() on step!\r\n\r\nA few links from a lot of them that I tried to figure out why transaction was not getting rolled back even when there was just one server (different datasource instance issue) and for multiple server handling:\r\n1. https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:~:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database.\r\n2. https://stackoverflow.com/questions/54628388/spring-batch-rollbacks-the-inserts\r\n3. https://stackoverflow.com/questions/22522681/spring-batch-skip-exception-for-itemwriter\r\n4. https://stackoverflow.com/questions/16567432/how-is-the-skipping-implemented-in-spring-batch\r\n5. https://stackoverflow.com/questions/14115013/can-you-explain-why-transactional-not-rolling-back\r\n6. https://stackoverflow.com/questions/40173587/spring-transaction-not-rolling-back\r\n\r\n7. https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60\r\n8. https://stackoverflow.com/questions/39629012/parallel-item-writers-in-spring-batch\r\n9. https://stackoverflow.com/questions/75558066/spring-batch-multiple-operations-in-writer","title":"In spring batch, need to write one chunk to mutiple DB servers","body":"<p><strong>My usecase</strong>:\nI need to read data from an oracle database and load it to multiple SQL server DBs located on different servers. To keep the design and code generic and scalable, the list of tables to read and the list of servers where they should be loaded is kept in DB.</p>\n<p><strong>Note that there are multiple servers involved and not just multiple DBs on a single server</strong>. So datasource would be different for each writer.</p>\n<p><strong>My strategy</strong>:\nMy strategy was to create a job with one step each for a table. Each step thus reads one table's data in chunks then writes it to all servers. Thus when one step completes, its data would have been loaded on all servers. This way each step would load one table data to all servers.</p>\n<pre><code>Step1: read table1's chunks -&gt; write each chunk to multiple servers\nStep2: read table2's chunks -&gt; write each chunk to multiple servers\n.\n.\n.\nStepN: read tableN's chunks -&gt; write each chunk to multiple servers\n</code></pre>\n<p><strong>How to implement above strategy</strong>:\nFor this I could use CompositeItemWriter with delegate writers each having its own datasource instance pointing to individual servers.\nThus I was thinking and hoping that I would be able to write a single chunk to multiple servers from a single step. But that does not work!</p>\n<p><strong>The problem with above strategy</strong>:\nThe problem is <strong>one step can have only one transaction manager which can have only one datasource</strong>. That means no matter how many writers I have per step, all should be working with the same datasource to connect to the same single server!</p>\n<p>From what I have observed so far, if the datasource &quot;<strong>instance</strong>&quot; in transaction manager of step is different from datasource &quot;<strong>instance</strong>&quot; of writer, rollback does not work even if it is just a single writer. With multiple writers having different datasources, rollback only works for the writer whose data source &quot;instance&quot; is same as the one assigned to step's transaction manager. All other weriters don't get rolled back leaving DB in insconsistent state.</p>\n<p>Just using same configuration and creating a new datasource instance for manager and writer does not work. The same instance must be used for both.</p>\n<p>Because of this issue, I am unable to use above strategy.</p>\n<p><strong>What options do I have for this usecase</strong>?\nI came across the ChainedTransactionManager but that can also leave the DB in inconsistent state plus that is deprecated anyway so I cannot use it.</p>\n<p><strong>What else can I do to ensure all the data is read only once and gets written to all servers</strong>?</p>\n<p><strong>Constraints</strong>:</p>\n<ol>\n<li>Data can be read only once from the oracle source DB</li>\n<li>Please note <strong>I CANNOT use beans</strong> to initialize any datasources/job/steps etc since I don't know in advance how many tables and servers would be involved. All that is created dynamically for scalability reading needed information from DB.</li>\n</ol>\n<p><strong>Sample code explaination</strong>:\nFor the POC, I am reading only 15 records from a single table in source DB with a chunk size of 5. Now in SourceRowMapper, for a specific row, I set col3 to null. This column in target SQL server DB is not-null so the insert fails as expected. The write failure should rollback the entire chunk and none of the records from that chunk should be inserted. I would be enabling skipping here so that only the failed records are not written but rest of the records get written to all the servers and which records failed are available for reports.</p>\n<p>As I explained above, that only works when the data source instance (and not just the configuration) of the step's transaction manager is same as that was assigned to the writer. If they are not same on a writer, all records from the failing chunk except the problem record get inserted in the table of that server. Only the matching datasource writer gets rolled back correctly.</p>\n<p>Now, if I try to add a skip policy, above issue causes all except problem record to be inserted twice due to chunk scanning after the chunk has failed on first attempt.</p>\n<p>This only happens when DBMS itself throws some exception. If I try to simulate the failure in code ( search for “Simulating write error” in SampleJob), it all works fine!</p>\n<p>Below are the code details. I have simplified the code to remove loops etc to load the data to multiple servers.</p>\n<p><strong>Batch configurer</strong>:</p>\n<pre><code>@Slf4j\n@Configuration\n@EnableBatchProcessing\npublic class SpringBatchConfig implements BatchConfigurer{\n    \n    @Value(&quot;${spring.datasource.dest.url}&quot;)\n    private String destDbUrl;\n\n    @Value(&quot;${spring.datasource.dest.driverClassName}&quot;)\n    private String destDbDriverClassName;\n    \n    @Value(&quot;${spring.profiles.active:default}&quot;)\n    private String activeProfile;\n    \n    @Value(&quot;${spring.batch.use.in-mem.db:false}&quot;)\n    private Boolean useInMemDb;\n    \n    @Autowired\n    private DataSource dbDataSource;\n    \n    private JobRepository jobRepo;\n    private PlatformTransactionManager transactionMgr;\n    private JobLauncher jobLauncher;\n    private JobExplorer jobExplorer;\n    \n    @SuppressWarnings(&quot;deprecation&quot;)\n    @Bean\n    @Override\n    public JobRepository getJobRepository() throws Exception {\n\n        log.info(&quot;Active profile: {}&quot;, activeProfile);\n        PlatformTransactionManager transMgr = getTransactionManager();\n        \n        if(jobRepo != null)\n            return jobRepo;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Creating in-mem jobRepository bean for SpringBatchConfig with destDbUrl: {}&quot;, destDbUrl); \n            MapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(transMgr);\n            jobRepoFactory.afterPropertiesSet();\n            return jobRepo = (JobRepository) jobRepoFactory.getObject();\n        }\n        else\n        {\n            log.info(&quot;Creating SQL jobRepository bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            \n            JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();\n            factory.setDataSource(dbDataSource);\n            factory.setTransactionManager(transMgr);\n            factory.afterPropertiesSet();\n            factory.setDatabaseType(&quot;SQLSERVER&quot;);\n            factory.setTablePrefix(&quot;dbo.BATCH_&quot;);\n            factory.setIsolationLevelForCreate(&quot;ISOLATION_SERIALIZABLE&quot;);\n            return jobRepo = (JobRepository) factory.getObject();\n        }\n    }\n    \n    @Override\n    public PlatformTransactionManager getTransactionManager() throws SQLException {\n        \n        if(transactionMgr != null)\n            return transactionMgr;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Getting resourceless transaction manager for in-mem jobRepository&quot;);\n            return transactionMgr = new ResourcelessTransactionManager();\n        }\n        else\n        {\n            log.info(&quot;Getting transaction manager for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            return transactionMgr = new DataSourceTransactionManager(dbDataSource);\n        }\n    }\n\n    @Override\n    @Bean(name = &quot;jobLauncher&quot;)\n    public JobLauncher getJobLauncher() throws Exception {\n        log.info(&quot;Creating jobLauncher bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n        \n        if(this.jobLauncher != null)\n            return this.jobLauncher;\n        \n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n        jobLauncher.setJobRepository(getJobRepository());\n        jobLauncher.afterPropertiesSet();\n        return this.jobLauncher = jobLauncher;\n    }\n\n    @SuppressWarnings(&quot;deprecation&quot;)\n    @Override\n    @Bean(name = &quot;jobExplorer&quot;)\n    public JobExplorer getJobExplorer() throws Exception {\n        \n        if(jobExplorer != null)\n            return jobExplorer;\n        \n        if(!(activeProfile.equals(&quot;prod&quot;) || activeProfile.equals(&quot;uat&quot;)) &amp;&amp; useInMemDb)\n        {\n            log.info(&quot;Creating jobExplorer bean for in-mem repo&quot;);\n            MapJobRepositoryFactoryBean jobRepoFactory = new MapJobRepositoryFactoryBean(getTransactionManager());\n            jobRepoFactory.afterPropertiesSet();\n            \n            MapJobExplorerFactoryBean explorerFactory = new MapJobExplorerFactoryBean(jobRepoFactory);\n            explorerFactory.afterPropertiesSet();\n            \n            return jobExplorer = explorerFactory.getObject();\n        }\n        else\n        {\n            log.info(&quot;Creating jobExplorer bean for SpringBatchConfig with db url: {}&quot;, dbDataSource.getConnection().getMetaData().getURL());\n            JobExplorerFactoryBean explorerFactory = new JobExplorerFactoryBean();\n            explorerFactory.setDataSource(dbDataSource);\n            explorerFactory.afterPropertiesSet();\n            return jobExplorer = explorerFactory.getObject();\n        }\n    }\n\n}\n</code></pre>\n<p><strong>Job/Step creation for the strategy I explained above</strong>:</p>\n<pre><code>@Slf4j\n@Configuration\npublic class SampleJob {\n\n    @Autowired\n    private JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    private StepBuilderFactory stepBuilderFactory;\n\n    @Autowired\n    @Qualifier(&quot;sourceDBTemplate&quot;)\n    private JdbcTemplate sourceDBTemplate;\n    \n    @Value(&quot;${spring.datasource.src.schema}&quot;)\n    private String schema;\n\n    @Autowired\n    @Qualifier(&quot;jobLauncher&quot;)\n    private JobLauncher jobLauncher;\n    \n    @Autowired\n    private DatabaseConfigurations dbConfig;\n    \n    @Autowired\n    private DBJobExecutionListener jobExecutionListener;\n\n    public void startJob() throws Exception {\n        \n        Map&lt;String, JobParameter&gt; jobConfigMap = new HashMap&lt;&gt;();\n        jobConfigMap.put(&quot;time&quot;, new JobParameter(System.currentTimeMillis()));\n        JobParameters parameters = new JobParameters(jobConfigMap);\n\n        try \n        {                       \n            jobLauncher.run(getJob(), parameters);\n            \n        }catch (JobExecutionAlreadyRunningException | JobRestartException | JobInstanceAlreadyCompleteException\n                | JobParametersInvalidException e) {\n\n            e.printStackTrace();\n        }\n    }\n\n    public Job getJob(List&lt;Table&gt; tables) throws Exception {\n        Clock currentClock = Clock.systemUTC();\n        OffsetDateTime odt = OffsetDateTime.ofInstant(Instant.now(currentClock), currentClock.getZone());\n        String jobName = &quot;DataRep_&quot;+odt.format(DateTimeFormatter.ofPattern(&quot;yyyyMMddhhmmss&quot;));\n        \n        log.info(&quot;Creating job {}; timezone: {}&quot;, jobName, currentClock.getZone().toString() + &quot;--&quot; + currentClock.getZone().getId() + &quot;--&quot; + currentClock.getZone().getDisplayName(TextStyle.FULL, Locale.getDefault()));\n        \n        JobBuilder builder = jobBuilderFactory.get(jobName).listener(jobExecutionListener);\n        \n        SimpleJobBuilder sjb = builder.start(getStep(&quot;sourceTable&quot;));\n        \n        //loop through list of tables to add a step per table; this is the reason I need to do things dynamically without beans; this is non-negotiable. I have simplified the code here to remove complex loops etc for clarity. It is just that whatever code has been presented here would just run in loop and a few other things that get some meta info dynamically to create the steps.\n        /*for(int index = 1; index &lt; tables.size(); index++)\n        {\n            sjb.next(getStep(tables.get(index)));\n        }*/\n        \n        return sjb.build();\n    }\n\n    private Step getStep(String table) throws Exception {\n        log.info(&quot;Getting step for table {}&quot;, table);\n\n        //needed to ensure same datasource instance from writer is assigned to transaction manager. This is still a problem as multiple writers would have different datasources for different servers! So what options do I have?\n        DataSourceWrapper dsw = new DataSourceWrapper();\n        \n        SimpleStepBuilder&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; sb = stepBuilderFactory.get(&quot;Copy &quot;+table)\n                .&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;chunk(5)\n                .reader(getItemReader(table))\n                .writer(getItemWriter(table, dsw)); //this should write the same chunk to multiple servers; If not then what options do I have?\n//              .faultTolerant()\n//              .noRetry(Exception.class);\n//              .retryPolicy( new NeverRetryPolicy());\n//              .skip(Exception.class)\n//              .skipLimit(Integer.MAX_VALUE)\n//              .skipPolicy(new AlwaysSkipItemSkipPolicy())\n//              .listener(new DBReplicationSkipListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;());\n        \n//      sb.listener(new DBStepExecutionListener());\n//      sb.listener(new DBItemReadListener&lt;Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBItemProcessListener&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBItemWriteListener&lt;Map&lt;String, Object&gt;&gt;())\n//          .listener(new DBChunkListener());\n\n        //use same datasource from writer\n        sb.transactionManager(new DataSourceTransactionManager(dsw.ds));\n        return sb.build();\n\n    }\n\n    public JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; getItemReader(String table) {\n        log.info(&quot;Creating item reader for table {}&quot;, table);\n\n        JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt; jdbcCIR = new JdbcCursorItemReader&lt;Map&lt;String, Object&gt;&gt;();\n        jdbcCIR.setDataSource(sourceDBTemplate.getDataSource());\n        jdbcCIR.setSql(String.format(&quot;select col1, col2, col3, col4, col5 from %1$s order by col1 asc&quot;, table));\n        jdbcCIR.setRowMapper(new SourceRowMapper());\n        jdbcCIR.setMaxItemCount(15);    //with chunk size of 5, 3 chunks would be created\n\n        return jdbcCIR;\n    }\n        \n\n    //THis function would loop through the list of servers to create a CompositeItemWriter. Below code is simplified for clarity here.\n    public JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; getItemWriter(String sourceTable, String table, DataSourceWrapper dsw) {\n        log.info(&quot;Creating item writer for table {}&quot;, sourceTable);\n\n        JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt; jdbcBatchItemWriter = new JdbcBatchItemWriterBuilder&lt;Map&lt;String, Object&gt;&gt;();\n                \n        DataSource destinationDataSource = dbConfig.getDestinationDataSource(table);\n        \n        String query = String.format(&quot;insert into %1$s(col_1, col_2, col_3, col_4, col_5) values(:col1, :col2, :col3, :col4, :col5)&quot;, table);\n        log.info(&quot;Insert query: {}&quot;,query);\n        \n        //here would be the loop for multiple servers; here I have removed it for clarity\n        jdbcBatchItemWriter\n            .dataSource(dsw.ds = destinationDataSource)\n            .sql(query)\n            .itemSqlParameterSourceProvider(item -&gt; {\n                    MapSqlParameterSource paramSource = new MapSqlParameterSource();\n                    paramSource.addValues(item);\n                    \n                    int id = (int)item.get(&quot;col1&quot;);\n                    log.info(&quot;Getting sql param source for writing item {}&quot;, id);\n\n//                  if(id == 45678)\n//                  {\n//                      log.info(&quot;Simulating write error for item {}&quot;, id);\n//                      Object tempObj = null;\n//                      log.info(&quot;Id is {}&quot;, tempObj.toString())\n//                  }\n                    \n                    return paramSource;\n                });\n\n        JdbcBatchItemWriter&lt;Map&lt;String, Object&gt;&gt; writer = jdbcBatchItemWriter.build();\n        writer.afterPropertiesSet();\n        \n        return writer;\n    }\n    \n    private static class DataSourceWrapper\n    {\n        public DataSource ds;\n        public DataSourceWrapper()\n        {}\n        public DataSourceWrapper(DataSource ds)\n        {\n            this.ds = ds;\n        }\n    }\n\n\n}\n\n\n\n\n\n\n\n\n@Slf4j\npublic class SourceRowMapper implements RowMapper&lt;Map&lt;String, Object&gt;&gt;{\n    \n    @Override\n    public Map&lt;String, Object&gt; mapRow(ResultSet rs, int rowNum) throws SQLException {\n        \n        log.info(String.format(&quot;Reading row# %1$s&quot;, rowNum));\n\n        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();\n        \n        String column;\n        Object id = null, val = null;\n            \n        column = &quot;col1&quot;;\n        val = rs.getObject(column);\n        id = val;\n        map.put(column, val);\n\n        column = &quot;col2&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n\n        column = &quot;col3&quot;;\n        val = rs.getObject(column);\n\n        if(id.toString().equals(&quot;78787&quot;))\n        {\n            log.info(&quot;setting val to null for non-null column col3 for id {}&quot;, id.toString());\n            val = null;\n        }\n        map.put(column, val);\n\n        column = &quot;col4&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n\n        column = &quot;col5&quot;;\n        val = rs.getObject(column);\n        map.put(column, val);\n        \n        return map;\n    }   \n}\n</code></pre>\n<p><strong>What I have tried</strong>:\nI have tried various combinations of lines that I commented while creating the step in above sample. I even debugged batch code itself but can't get to the root of it nor can I find a solution to it. I checked the FaultTolerantChunkProcessor as explained in one of the links below. But my problem happens even when I have not called faultTolerant() on step!</p>\n<p>A few links from a lot of them that I tried to figure out why transaction was not getting rolled back even when there was just one server (different datasource instance issue) and for multiple server handling:</p>\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:%7E:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database\">https://stackoverflow.com/questions/57793522/how-do-i-prevent-rollback-when-exception-occurs-in-itemwriter#:~:text=If%20exception%20occurs%20on%20any,successfully%20written%20to%20the%20database</a>.</p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/54628388/spring-batch-rollbacks-the-inserts\">Spring batch rollbacks the inserts</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/22522681/spring-batch-skip-exception-for-itemwriter\">Spring Batch skip exception for ItemWriter</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/16567432/how-is-the-skipping-implemented-in-spring-batch\">How is the skipping implemented in Spring Batch?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/14115013/can-you-explain-why-transactional-not-rolling-back\">Can you explain why @Transactional not rolling back</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/40173587/spring-transaction-not-rolling-back\">Spring Transaction not rolling back</a></p>\n</li>\n<li><p><a href=\"https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60\" rel=\"nofollow noreferrer\">https://medium.com/swlh/working-with-spring-batch-and-distributed-transaction-772de2219e60</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/39629012/parallel-item-writers-in-spring-batch\">Parallel Item Writers in Spring batch</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/75558066/spring-batch-multiple-operations-in-writer\">Spring batch: multiple operations in writer</a></p>\n</li>\n</ol>\n"},{"tags":["java","eclipse","tomcat","xerces"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1542211438,"post_id":53299280,"comment_id":93489360,"body_markdown":"`xercesImpl-2.8.0.jar:?`? Do you have a copy of Xerces in your web app?","body":"<code>xercesImpl-2.8.0.jar:?</code>? Do you have a copy of Xerces in your web app?"},{"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"score":0,"creation_date":1542282881,"post_id":53299280,"comment_id":93517770,"body_markdown":"yes, I have. I even tried to change priorities in Eclipse Build Path Section, using XercesImpl before JRE System Library.","body":"yes, I have. I even tried to change priorities in Eclipse Build Path Section, using XercesImpl before JRE System Library."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1542406902,"post_id":53299280,"comment_id":93571215,"body_markdown":"That might work for a regular Java application, but Tomcat has to load classes from you web app&#39;s jars. Tricks like that won&#39;t work.","body":"That might work for a regular Java application, but Tomcat has to load classes from you web app&#39;s jars. Tricks like that won&#39;t work."},{"owner":{"account_id":14848436,"reputation":156,"user_id":10723168,"display_name":"Chamlal"},"score":0,"creation_date":1581941548,"post_id":53299280,"comment_id":106593413,"body_markdown":"You can check the answer provided in this [post](https://stackoverflow.com/questions/60190084/android-studio-cant-find-property-xmlconstants-access-external-dtd/60253367#60253367)","body":"You can check the answer provided in this <a href=\"https://stackoverflow.com/questions/60190084/android-studio-cant-find-property-xmlconstants-access-external-dtd/60253367#60253367\">post</a>"}],"answers":[{"tags":[],"owner":{"account_id":7330139,"reputation":1030,"user_id":5583341,"display_name":"Michael Glavassevich"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1543003864,"creation_date":1543003864,"answer_id":53452450,"question_id":53299280,"body_markdown":"Apache Xerces-J 2.12.0 and earlier implement older versions of JAXP that do not support either of the properties that you are trying to set. To block access to external entities, you could write an EntityResolver (that always throws a SAXException) and register that EntityResolver with the DocumentBuilder. See documentation here [1].\r\n\r\n[1] http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>Apache Xerces-J 2.12.0 and earlier implement older versions of JAXP that do not support either of the properties that you are trying to set. To block access to external entities, you could write an EntityResolver (that always throws a SAXException) and register that EntityResolver with the DocumentBuilder. See documentation here [1].</p>\n\n<p>[1] <a href=\"http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)\" rel=\"nofollow noreferrer\">http://xerces.apache.org/xerces2-j/javadocs/api/javax/xml/parsers/DocumentBuilder.html#setEntityResolver(org.xml.sax.EntityResolver)</a></p>\n"},{"comments":[{"owner":{"account_id":53765,"reputation":1307,"user_id":160799,"accept_rate":75,"display_name":"Gregor"},"score":0,"creation_date":1612790441,"post_id":62261587,"comment_id":116868516,"body_markdown":"this is related to\nhttps://stackoverflow.com/questions/45152707/transformerfactory-and-xalan-dependency-conflict\nso aoviding xerces and setting the DocumentBuilderFactory may also help, which it did in my case.","body":"this is related to <a href=\"https://stackoverflow.com/questions/45152707/transformerfactory-and-xalan-dependency-conflict\" title=\"transformerfactory and xalan dependency conflict\">stackoverflow.com/questions/45152707/&hellip;</a> so aoviding xerces and setting the DocumentBuilderFactory may also help, which it did in my case."}],"tags":[],"owner":{"account_id":15623101,"reputation":2772,"user_id":11271432,"display_name":"Cray"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1591617610,"creation_date":1591617610,"answer_id":62261587,"question_id":53299280,"body_markdown":"`javax.xml.XMLConstants.ACCESS_EXTERNAL_DTD` is defined in [JAXP 1.5][1], but Xerces does not support it. If you can&#39;t remove Xerces dependency, you should add another implementation to your classpath before Xerces. \r\n\r\nAlternatively, since JDK contains an implementation of Xerces you can [configure][2] `DocumentBuilderFactory` to return the JDK version using `System.properties`.\r\n\r\n    System.setProperty(&quot;javax.xml.parsers.DocumentBuilderFactory&quot;,\r\n\t\t\t&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p><code>javax.xml.XMLConstants.ACCESS_EXTERNAL_DTD</code> is defined in <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/properties/properties.html\" rel=\"noreferrer\">JAXP 1.5</a>, but Xerces does not support it. If you can't remove Xerces dependency, you should add another implementation to your classpath before Xerces. </p>\n\n<p>Alternatively, since JDK contains an implementation of Xerces you can <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html\" rel=\"noreferrer\">configure</a> <code>DocumentBuilderFactory</code> to return the JDK version using <code>System.properties</code>.</p>\n\n<pre><code>System.setProperty(\"javax.xml.parsers.DocumentBuilderFactory\",\n        \"com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3267198,"reputation":181,"user_id":2751466,"display_name":"munish sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1595570534,"creation_date":1595570534,"answer_id":63067717,"question_id":53299280,"body_markdown":"The issue is coming due to Xerces/XercesImpl in classpath. Xerces doesn&#39;t provide support for ACCESS_EXTERNAL_DTD property.\r\n\r\nSolution 1. If possible, remove xerces jar from the class path.\r\n\r\nSolution 2. Use JDK default implementation \r\n\r\nDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;, null);\r\n\r\n\r\n","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>The issue is coming due to Xerces/XercesImpl in classpath. Xerces doesn't provide support for ACCESS_EXTERNAL_DTD property.</p>\n<p>Solution 1. If possible, remove xerces jar from the class path.</p>\n<p>Solution 2. Use JDK default implementation</p>\n<p>DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;, null);</p>\n"},{"tags":[],"owner":{"account_id":15338321,"reputation":36,"user_id":11066016,"display_name":"Escobar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614094307,"creation_date":1614093991,"answer_id":66336038,"question_id":53299280,"body_markdown":"Our Java project was being built with [Maven][1]. As the team decided to integrate [SonarQube][2] in the pipeline, we faced something similar. &quot;SonarQube doesn&#39;t run your tests or generate reports. It only imports pre-generated reports&quot; (more on that [here][3]). In the case of Java/Kotlin/Scala/JVM, SonarQube needs some &quot;[JaCoCo][4] XML coverage report&quot;. So, we had to add a dependency to our pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter some tweaking, we had it all up and running. But some tests were failing with &quot;java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\nat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source)...&quot;.\r\n\r\nLong story short, the solution was to leave xerces out of the picture, as already stated in other answers:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n          &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\n\r\n  [1]: https://maven.apache.org/\r\n  [2]: https://www.sonarqube.org/\r\n  [3]: https://docs.sonarqube.org/latest/analysis/coverage/\r\n  [4]: https://www.jacoco.org/","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>Our Java project was being built with <a href=\"https://maven.apache.org/\" rel=\"nofollow noreferrer\">Maven</a>. As the team decided to integrate <a href=\"https://www.sonarqube.org/\" rel=\"nofollow noreferrer\">SonarQube</a> in the pipeline, we faced something similar. &quot;SonarQube doesn't run your tests or generate reports. It only imports pre-generated reports&quot; (more on that <a href=\"https://docs.sonarqube.org/latest/analysis/coverage/\" rel=\"nofollow noreferrer\">here</a>). In the case of Java/Kotlin/Scala/JVM, SonarQube needs some &quot;<a href=\"https://www.jacoco.org/\" rel=\"nofollow noreferrer\">JaCoCo</a> XML coverage report&quot;. So, we had to add a dependency to our pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${jacoco.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After some tweaking, we had it all up and running. But some tests were failing with &quot;java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\nat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source)...&quot;.</p>\n<p>Long story short, the solution was to leave xerces out of the picture, as already stated in other answers:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n  &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${jacoco.version}&lt;/version&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;xerces&lt;/groupId&gt;\n      &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27508,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":4,"score":11,"last_activity_date":1683213832,"creation_date":1542195271,"question_id":53299280,"body_markdown":"I looked for similar posts on this blog, but couldn&#39;t find an answer to my question, so I decided to ask for help.\r\n\r\nI wrote this simple function in Java:\r\n\r\n     public void open(InputStream stream) throws FoliumFatalException {\r\n            try {\r\n                InputSource is = new InputSource(stream);\r\n                DocumentBuilderFactory dfact = DocumentBuilderFactory.newInstance();\r\n                \r\n    //            /* OWASP: inhibit access to External Entities */\r\n                dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;); \r\n                dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;); \r\n                \r\n                _doc = dfact.newDocumentBuilder().parse(is);\r\n    \r\n            } catch (Throwable t) {\r\n                _logger.error(t, t);\r\n                throw new FoliumFatalException(&quot;ENG-0017&quot;, &quot;Errore di parsing su stream&quot;, t);\r\n            }\r\n    \r\n        }\r\n\r\nMy goal is applying OWASP standards as exposed [here][1], but I get the following error:\r\n\r\n     java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n    java.lang.IllegalArgumentException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n    \tat org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source) ~[xercesImpl-2.8.0.jar:?]\r\n    \tat agora.folium.engine.impl.j2ee.FoliumJ2eeXmlParserImpl.open(FoliumJ2eeXmlParserImpl.java:108) [classes/:?]\r\n    \tat agora.folium.engine.impl.FoliumAbstractEngine.loadServices(FoliumAbstractEngine.java:268) [classes/:?]\r\n    \tat agora.folium.engine.impl.j2ee.FoliumJ2eeEngineImpl.startup(FoliumJ2eeEngineImpl.java:110) [classes/:?]\r\n    \tat agora.folium.engine.Folium.startup(Folium.java:258) [classes/:?]\r\n    \tat agora.folium.control.impl.j2ee.FoliumActionServlet.init(FoliumActionServlet.java:94) [classes/:?]\r\n    \tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1230) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1174) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1066) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5370) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5668) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1015) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:991) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:712) [catalina.jar:7.0.85]\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:2002) [catalina.jar:7.0.85]\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_141]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_141]\r\n    \tat java.lang.Thread.run(Unknown Source) [?:1.8.0_141]\r\n\r\nI&#39;m using Eclipse Oxygen, Tomcat 7 and Java 1.8.\r\n\r\n\r\n  [1]: https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Prevention_Cheat_Sheet#JAXB_Unmarshaller","title":"Java and Xerces: can&#39;t find property XMLConstants.ACCESS_EXTERNAL_DTD","body":"<p>I looked for similar posts on this blog, but couldn't find an answer to my question, so I decided to ask for help.</p>\n<p>I wrote this simple function in Java:</p>\n<pre><code> public void open(InputStream stream) throws FoliumFatalException {\n        try {\n            InputSource is = new InputSource(stream);\n            DocumentBuilderFactory dfact = DocumentBuilderFactory.newInstance();\n            \n//            /* OWASP: inhibit access to External Entities */\n            dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;); \n            dfact.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;); \n            \n            _doc = dfact.newDocumentBuilder().parse(is);\n\n        } catch (Throwable t) {\n            _logger.error(t, t);\n            throw new FoliumFatalException(&quot;ENG-0017&quot;, &quot;Errore di parsing su stream&quot;, t);\n        }\n\n    }\n</code></pre>\n<p>My goal is applying OWASP standards as exposed <a href=\"https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Prevention_Cheat_Sheet#JAXB_Unmarshaller\" rel=\"nofollow noreferrer\">here</a>, but I get the following error:</p>\n<pre><code> java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\njava.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\n    at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(Unknown Source) ~[xercesImpl-2.8.0.jar:?]\n    at agora.folium.engine.impl.j2ee.FoliumJ2eeXmlParserImpl.open(FoliumJ2eeXmlParserImpl.java:108) [classes/:?]\n    at agora.folium.engine.impl.FoliumAbstractEngine.loadServices(FoliumAbstractEngine.java:268) [classes/:?]\n    at agora.folium.engine.impl.j2ee.FoliumJ2eeEngineImpl.startup(FoliumJ2eeEngineImpl.java:110) [classes/:?]\n    at agora.folium.engine.Folium.startup(Folium.java:258) [classes/:?]\n    at agora.folium.control.impl.j2ee.FoliumActionServlet.init(FoliumActionServlet.java:94) [classes/:?]\n    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1230) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1174) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1066) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5370) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5668) [catalina.jar:7.0.85]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:1015) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:991) [catalina.jar:7.0.85]\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:652) [catalina.jar:7.0.85]\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:712) [catalina.jar:7.0.85]\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:2002) [catalina.jar:7.0.85]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.FutureTask.run(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:1.8.0_141]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:1.8.0_141]\n    at java.lang.Thread.run(Unknown Source) [?:1.8.0_141]\n</code></pre>\n<p>I'm using Eclipse Oxygen, Tomcat 7 and Java 1.8.</p>\n"},{"tags":["java","multithreading","deadlock","named-pipes"],"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":0,"creation_date":1297469511,"post_id":4974989,"comment_id":5554867,"body_markdown":"...and you cannot switch off and not switch off reading? read only if the file is not at the end, otherwise block on `poll` a blocking queue to wait for writes; and ultimately use a single thread. if you are interested i can show a snippet; however I have no xp w/ named pipes like that and a simple socket is 10 times easy to manage","body":"...and you cannot switch off and not switch off reading? read only if the file is not at the end, otherwise block on <code>poll</code> a blocking queue to wait for writes; and ultimately use a single thread. if you are interested i can show a snippet; however I have no xp w/ named pipes like that and a simple socket is 10 times easy to manage"},{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":0,"creation_date":1297477731,"post_id":4974989,"comment_id":5555620,"body_markdown":"It might help to use JVisualVM to see whether you thread(s) are blocked at the O/S level or on a Java synchronization acquisition.","body":"It might help to use JVisualVM to see whether you thread(s) are blocked at the O/S level or on a Java synchronization acquisition."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1297502480,"post_id":4974989,"comment_id":5557472,"body_markdown":"Rather than using a named pipe, you might find using sockets is more scalable (named pipes are implemented using sockets in Windows anyway)  You will find more examples of how to use them (as they used more often) which should help you.","body":"Rather than using a named pipe, you might find using sockets is more scalable (named pipes are implemented using sockets in Windows anyway)  You will find more examples of how to use them (as they used more often) which should help you."},{"owner":{"account_id":235404,"reputation":12034,"user_id":502194,"display_name":"Chris Dickson"},"score":0,"creation_date":1297766872,"post_id":4974989,"comment_id":5590919,"body_markdown":"@Peter Lawrey: Named pipes in Windows are NOT implemented using sockets. When both client and server are on the same machine, they use shared memory for IPC and are extremely fast.","body":"@Peter Lawrey: Named pipes in Windows are NOT implemented using sockets. When both client and server are on the same machine, they use shared memory for IPC and are extremely fast."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1297774386,"post_id":4974989,"comment_id":5592347,"body_markdown":"@Chris, I must have been reading bad/old information. Has this always been the case in Windows?  Using them in Java on Vista doesn&#39;t appear to be faster.","body":"@Chris, I must have been reading bad/old information. Has this always been the case in Windows?  Using them in Java on Vista doesn&#39;t appear to be faster."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":1,"creation_date":1299265820,"post_id":4974989,"comment_id":5843122,"body_markdown":"@Peter, Java pipes (nio ones) are implemented via sockets on Windows and with OS pipes on Linux. Windows native named pipes are not sockets and their impl. does not depend on winsock. It&#39;s just java that doesn&#39;t use them since it&#39;s not possible to register the same selector for sockets and windows pipes.","body":"@Peter, Java pipes (nio ones) are implemented via sockets on Windows and with OS pipes on Linux. Windows native named pipes are not sockets and their impl. does not depend on winsock. It&#39;s just java that doesn&#39;t use them since it&#39;s not possible to register the same selector for sockets and windows pipes."},{"owner":{"account_id":135358,"reputation":31,"user_id":1844109,"display_name":"Mayank Varshney"},"score":0,"creation_date":1353564882,"post_id":4974989,"comment_id":75713633,"body_markdown":"This is the link which you can use for Named pipe implementation :\nhttp://sonalimendis.blogspot.in/2010/10/named-pipes-for-inter-process.html","body":"This is the link which you can use for Named pipe implementation : <a href=\"http://sonalimendis.blogspot.in/2010/10/named-pipes-for-inter-process.html\" rel=\"nofollow noreferrer\">sonalimendis.blogspot.in/2010/10/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":5530,"reputation":63236,"user_id":8946,"accept_rate":84,"display_name":"Lawrence Dol"},"score":1,"creation_date":1297477634,"post_id":4975840,"comment_id":5555612,"body_markdown":"Yes, RandomAccessFile is completely the wrong abstraction for a pipe.","body":"Yes, RandomAccessFile is completely the wrong abstraction for a pipe."},{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":2,"creation_date":1299370021,"post_id":4975840,"comment_id":5856017,"body_markdown":"ŭlo, you can not open file w/ 2 separate descriptors for both read and write. RadndomAccessFile is the way to go if you need both read and write at the same time.","body":"ŭlo, you can not open file w/ 2 separate descriptors for both read and write. RadndomAccessFile is the way to go if you need both read and write at the same time."}],"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1297476052,"creation_date":1297476052,"answer_id":4975840,"question_id":4974989,"body_markdown":"I suppose that `RandomAccessFile` is not the right API here. Try a FileInputStream + FileOutputStream on the Java side. But that is only a guess, as I last used the Windows API in times when named pipes didn&#39;t yet exist.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I suppose that <code>RandomAccessFile</code> is not the right API here. Try a FileInputStream + FileOutputStream on the Java side. But that is only a guess, as I last used the Windows API in times when named pipes didn't yet exist.</p>\n"},{"tags":[],"owner":{"account_id":756311,"reputation":31,"user_id":764361,"display_name":"Eagle"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1306021060,"creation_date":1306021060,"answer_id":6085104,"question_id":4974989,"body_markdown":"This is expected behaviour of pipes. It is supposed to hang untill other process connects to the pipe and reads it.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>This is expected behaviour of pipes. It is supposed to hang untill other process connects to the pipe and reads it.</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1345006331,"post_id":9078438,"comment_id":15945319,"body_markdown":"Well, if your Server write a message which is null-byte terminated it is no wonder that the readLine() function does not return. It is waiting for &quot;\\n\\r&quot; from your server. I would also not use the read() method in production code. Use a byte[] barr = new byte[1024]; count = pipe.read(barr); method in a look and make sure to not expect the whole message from the server in a single return.","body":"Well, if your Server write a message which is null-byte terminated it is no wonder that the readLine() function does not return. It is waiting for &quot;\\n\\r&quot; from your server. I would also not use the read() method in production code. Use a byte[] barr = new byte[1024]; count = pipe.read(barr); method in a look and make sure to not expect the whole message from the server in a single return."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1496378937,"post_id":9078438,"comment_id":75647032,"body_markdown":"This is not an answer. It should have been posted as a separate question.","body":"This is not an answer. It should have been posted as a separate question."}],"tags":[],"owner":{"account_id":1211734,"reputation":29,"user_id":1180144,"display_name":"Andrey"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1328007901,"creation_date":1328007901,"answer_id":9078438,"question_id":4974989,"body_markdown":"I have a same problem -- communication between a C#/Python app and a Java app on windows using named pipes:\r\n\r\nWe have example of Client Code written on Java, but in line `String echoResponse = pipe.readLine();` tread waits forever.\r\n    \r\n    try {\r\n        // Connect to the pipe\r\n        RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe&quot;, &quot;rw&quot;);\r\n        String echoText = &quot;Hello word\\n&quot;;\r\n        // write to pipe\r\n        pipe.write ( echoText.getBytes() );\r\n        // read response\r\n        String echoResponse = pipe.readLine();\r\n        System.out.println(&quot;Response: &quot; + echoResponse );\r\n        pipe.close();\r\n        \r\n        } catch (Exception e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n        }\r\n\r\nSolution of problem:\r\nI have a ServerPipe code written on Python from here [Example Code - Named Pipes][1]:\r\nand run its on Python 2.6.6\r\n\r\n    from ctypes import *\r\n    \r\n    PIPE_ACCESS_DUPLEX = 0x3\r\n    PIPE_TYPE_MESSAGE = 0x4\r\n    PIPE_READMODE_MESSAGE = 0x2\r\n    PIPE_WAIT = 0\r\n    PIPE_UNLIMITED_INSTANCES = 255\r\n    BUFSIZE = 4096\r\n    NMPWAIT_USE_DEFAULT_WAIT = 0\r\n    INVALID_HANDLE_VALUE = -1\r\n    ERROR_PIPE_CONNECTED = 535\r\n    \r\n    MESSAGE = &quot;Default answer from server\\0&quot;\r\n    szPipename = &quot;\\\\\\\\.\\\\pipe\\\\mynamedpipe&quot;\r\n    \r\n    \r\n    def ReadWrite_ClientPipe_Thread(hPipe):\r\n        chBuf = create_string_buffer(BUFSIZE)\r\n        cbRead = c_ulong(0)\r\n        while 1:\r\n            fSuccess = windll.kernel32.ReadFile(hPipe, chBuf, BUFSIZE,\r\n    byref(cbRead), None)\r\n            if ((fSuccess ==1) or (cbRead.value != 0)):\r\n                print chBuf.value\r\n                cbWritten = c_ulong(0)\r\n                fSuccess = windll.kernel32.WriteFile(hPipe,\r\n                                                     c_char_p(MESSAGE),\r\n                                                     len(MESSAGE),\r\n                                                     byref(cbWritten),\r\n                                                     None\r\n                                                    )\r\n            else:\r\n                break\r\n            if ( (not fSuccess) or (len(MESSAGE) != cbWritten.value)):\r\n                print &quot;Could not reply to the client&#39;s request from the\r\n    pipe&quot;\r\n                break\r\n            else:\r\n                print &quot;Number of bytes written:&quot;, cbWritten.value\r\n    \r\n        windll.kernel32.FlushFileBuffers(hPipe)\r\n        windll.kernel32.DisconnectNamedPipe(hPipe)\r\n        windll.kernel32.CloseHandle(hPipe)\r\n        return 0\r\n    \r\n    def main():\r\n        THREADFUNC = CFUNCTYPE(c_int, c_int)\r\n        thread_func = THREADFUNC(ReadWrite_ClientPipe_Thread)\r\n        while 1:\r\n            hPipe = windll.kernel32.CreateNamedPipeA(szPipename,\r\n                                                     PIPE_ACCESS_DUPLEX,\r\n                                                     PIPE_TYPE_MESSAGE |\r\n                                                     PIPE_READMODE_MESSAGE\r\n    |\r\n                                                     PIPE_WAIT,\r\n    \r\n    PIPE_UNLIMITED_INSTANCES,\r\n                                                     BUFSIZE, BUFSIZE,\r\n    \r\n    NMPWAIT_USE_DEFAULT_WAIT,\r\n                                                     None\r\n                                                    )\r\n            if (hPipe == INVALID_HANDLE_VALUE):\r\n                print &quot;Error in creating Named Pipe&quot;\r\n                return 0\r\n    \r\n            fConnected = windll.kernel32.ConnectNamedPipe(hPipe, None)\r\n            if ((fConnected == 0) and (windll.kernel32.GetLastError() ==\r\n    ERROR_PIPE_CONNECTED)):\r\n                fConnected = 1\r\n            if (fConnected == 1):\r\n                dwThreadId = c_ulong(0)\r\n                hThread = windll.kernel32.CreateThread(None, 0,\r\n    thread_func, hPipe, 0, byref(dwThreadId))\r\n                if (hThread == -1):\r\n                    print &quot;Create Thread failed&quot;\r\n                    return 0\r\n                else:\r\n                    windll.kernel32.CloseHandle(hThread)\r\n            else:\r\n                print &quot;Could not connect to the Named Pipe&quot;\r\n                windll.kernel32.CloseHandle(hPipe)\r\n        return 0\r\n    \r\n    \r\n    if __name__ == &quot;__main__&quot;:\r\n        main()\r\n\r\nAfter server have start you can use slightly modified version of the Java Client code:\r\n\r\n    try {\r\n        // Connect to the pipe\r\n        RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\mynamedpipe&quot;, &quot;rw&quot;);\r\n        String echoText = &quot;Hello world\\n&quot;;\r\n        // write to pipe\r\n        pipe.write(echoText.getBytes());\r\n        \r\n        //String aChar;\r\n        StringBuffer fullString = new StringBuffer();\r\n\r\n        while(true){\r\n            int charCode = pipe.read();\r\n            if(charCode == 0) break;\r\n            //aChar = new Character((char)charCode).toString();\r\n            fullString.append((char)charCode);\r\n        }\r\n\r\n        System.out.println(&quot;Response: &quot; + fullString);\r\n        pipe.close();\r\n    }\r\n    catch (Exception e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }\r\n\r\nIt works well in NetBeans 6.9.1.\r\n\r\n  [1]: http://mail.python.org/pipermail/python-list/2005-March/312152.html\r\n\r\n","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I have a same problem -- communication between a C#/Python app and a Java app on windows using named pipes:</p>\n\n<p>We have example of Client Code written on Java, but in line <code>String echoResponse = pipe.readLine();</code> tread waits forever.</p>\n\n<pre><code>try {\n    // Connect to the pipe\n    RandomAccessFile pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\testpipe\", \"rw\");\n    String echoText = \"Hello word\\n\";\n    // write to pipe\n    pipe.write ( echoText.getBytes() );\n    // read response\n    String echoResponse = pipe.readLine();\n    System.out.println(\"Response: \" + echoResponse );\n    pipe.close();\n\n    } catch (Exception e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n    }\n</code></pre>\n\n<p>Solution of problem:\nI have a ServerPipe code written on Python from here <a href=\"http://mail.python.org/pipermail/python-list/2005-March/312152.html\" rel=\"nofollow\">Example Code - Named Pipes</a>:\nand run its on Python 2.6.6</p>\n\n<pre><code>from ctypes import *\n\nPIPE_ACCESS_DUPLEX = 0x3\nPIPE_TYPE_MESSAGE = 0x4\nPIPE_READMODE_MESSAGE = 0x2\nPIPE_WAIT = 0\nPIPE_UNLIMITED_INSTANCES = 255\nBUFSIZE = 4096\nNMPWAIT_USE_DEFAULT_WAIT = 0\nINVALID_HANDLE_VALUE = -1\nERROR_PIPE_CONNECTED = 535\n\nMESSAGE = \"Default answer from server\\0\"\nszPipename = \"\\\\\\\\.\\\\pipe\\\\mynamedpipe\"\n\n\ndef ReadWrite_ClientPipe_Thread(hPipe):\n    chBuf = create_string_buffer(BUFSIZE)\n    cbRead = c_ulong(0)\n    while 1:\n        fSuccess = windll.kernel32.ReadFile(hPipe, chBuf, BUFSIZE,\nbyref(cbRead), None)\n        if ((fSuccess ==1) or (cbRead.value != 0)):\n            print chBuf.value\n            cbWritten = c_ulong(0)\n            fSuccess = windll.kernel32.WriteFile(hPipe,\n                                                 c_char_p(MESSAGE),\n                                                 len(MESSAGE),\n                                                 byref(cbWritten),\n                                                 None\n                                                )\n        else:\n            break\n        if ( (not fSuccess) or (len(MESSAGE) != cbWritten.value)):\n            print \"Could not reply to the client's request from the\npipe\"\n            break\n        else:\n            print \"Number of bytes written:\", cbWritten.value\n\n    windll.kernel32.FlushFileBuffers(hPipe)\n    windll.kernel32.DisconnectNamedPipe(hPipe)\n    windll.kernel32.CloseHandle(hPipe)\n    return 0\n\ndef main():\n    THREADFUNC = CFUNCTYPE(c_int, c_int)\n    thread_func = THREADFUNC(ReadWrite_ClientPipe_Thread)\n    while 1:\n        hPipe = windll.kernel32.CreateNamedPipeA(szPipename,\n                                                 PIPE_ACCESS_DUPLEX,\n                                                 PIPE_TYPE_MESSAGE |\n                                                 PIPE_READMODE_MESSAGE\n|\n                                                 PIPE_WAIT,\n\nPIPE_UNLIMITED_INSTANCES,\n                                                 BUFSIZE, BUFSIZE,\n\nNMPWAIT_USE_DEFAULT_WAIT,\n                                                 None\n                                                )\n        if (hPipe == INVALID_HANDLE_VALUE):\n            print \"Error in creating Named Pipe\"\n            return 0\n\n        fConnected = windll.kernel32.ConnectNamedPipe(hPipe, None)\n        if ((fConnected == 0) and (windll.kernel32.GetLastError() ==\nERROR_PIPE_CONNECTED)):\n            fConnected = 1\n        if (fConnected == 1):\n            dwThreadId = c_ulong(0)\n            hThread = windll.kernel32.CreateThread(None, 0,\nthread_func, hPipe, 0, byref(dwThreadId))\n            if (hThread == -1):\n                print \"Create Thread failed\"\n                return 0\n            else:\n                windll.kernel32.CloseHandle(hThread)\n        else:\n            print \"Could not connect to the Named Pipe\"\n            windll.kernel32.CloseHandle(hPipe)\n    return 0\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>After server have start you can use slightly modified version of the Java Client code:</p>\n\n<pre><code>try {\n    // Connect to the pipe\n    RandomAccessFile pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\mynamedpipe\", \"rw\");\n    String echoText = \"Hello world\\n\";\n    // write to pipe\n    pipe.write(echoText.getBytes());\n\n    //String aChar;\n    StringBuffer fullString = new StringBuffer();\n\n    while(true){\n        int charCode = pipe.read();\n        if(charCode == 0) break;\n        //aChar = new Character((char)charCode).toString();\n        fullString.append((char)charCode);\n    }\n\n    System.out.println(\"Response: \" + fullString);\n    pipe.close();\n}\ncatch (Exception e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>It works well in NetBeans 6.9.1.</p>\n"},{"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1345107799,"post_id":11964258,"comment_id":15978157,"body_markdown":"I don&#39;t really see how one could do random access with a pipe, could you add some example code?","body":"I don&#39;t really see how one could do random access with a pipe, could you add some example code?"},{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1346898665,"post_id":11964258,"comment_id":16489749,"body_markdown":"You cannot do random access (only skip of course), but still the class is the one to read and write from the named pipe.","body":"You cannot do random access (only skip of course), but still the class is the one to read and write from the named pipe."}],"tags":[],"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1345074835,"creation_date":1345006065,"answer_id":11964258,"question_id":4974989,"body_markdown":"Don&#39;t worry, using `RandomAccessFile` to access a *named pipe* is correct. A named pipe is a file system object. Under Linux/Unix it is also called &quot;fifo&quot;. Those objects are readable just like a file. (and not the same as pipes used between processes which are abstracted by Java Pipe class).\r\n\r\nHowever I see two problems with your program. I cannot test it currently as I would need your test server (feel free to publish). Your reader thread waits for answers from the other side (i.e. the server). It uses readLine(), I would use a different method (for debugging reading char by char might be the best).\r\n\r\nWith Java (without JNI) you cannot actually create a named pipe (server side). Opening a named pipe with the generic method used by RandomAccessFile you will get a byte-type stream which can be one-way or duplex.\r\n\r\nBTW: JTDS (the free JDBC driver for SQL Server) can optionally use a named pipe to access SQL server, even over the network. And it is using exactly the `RandomAccessFile` method.\r\n\r\nBTW2: there is a makepipe.exe test server on older MS SQL Server installation media, however I did not find a trusted source to get that file.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>Don't worry, using <code>RandomAccessFile</code> to access a <em>named pipe</em> is correct. A named pipe is a file system object. Under Linux/Unix it is also called \"fifo\". Those objects are readable just like a file. (and not the same as pipes used between processes which are abstracted by Java Pipe class).</p>\n\n<p>However I see two problems with your program. I cannot test it currently as I would need your test server (feel free to publish). Your reader thread waits for answers from the other side (i.e. the server). It uses readLine(), I would use a different method (for debugging reading char by char might be the best).</p>\n\n<p>With Java (without JNI) you cannot actually create a named pipe (server side). Opening a named pipe with the generic method used by RandomAccessFile you will get a byte-type stream which can be one-way or duplex.</p>\n\n<p>BTW: JTDS (the free JDBC driver for SQL Server) can optionally use a named pipe to access SQL server, even over the network. And it is using exactly the <code>RandomAccessFile</code> method.</p>\n\n<p>BTW2: there is a makepipe.exe test server on older MS SQL Server installation media, however I did not find a trusted source to get that file.</p>\n"},{"comments":[{"owner":{"account_id":51290,"reputation":3713,"user_id":153225,"accept_rate":74,"display_name":"Martin"},"score":0,"creation_date":1349412611,"post_id":12727502,"comment_id":17208896,"body_markdown":"Java doesn&#39;t have any easy way of passing specific flags to CreateFile (unless you do a bunch of JNI).","body":"Java doesn&#39;t have any easy way of passing specific flags to CreateFile (unless you do a bunch of JNI)."}],"tags":[],"owner":{"account_id":1904990,"reputation":9,"user_id":1720043,"display_name":"StanBell"},"comment_count":1,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1349369265,"creation_date":1349354335,"answer_id":12727502,"question_id":4974989,"body_markdown":"I&#39;m not familiar with JAVA, and my C# is pretty elementary too. However I&#39;m had a similar problem with a multithreaded C++ client that I fixed by opening the pipe for overlapped IO. Until I did this, Windows serialized reads and writes, effectively causing an unsatisfied (blocking) ReadFile to prevent completion of a subsequent WriteFile until the read was done.\r\n\r\nSee [CreateFile function][1]  \r\nFILE_FLAG_OVERLAPPED\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx.","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I'm not familiar with JAVA, and my C# is pretty elementary too. However I'm had a similar problem with a multithreaded C++ client that I fixed by opening the pipe for overlapped IO. Until I did this, Windows serialized reads and writes, effectively causing an unsatisfied (blocking) ReadFile to prevent completion of a subsequent WriteFile until the read was done.</p>\n\n<p>See <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx.\" rel=\"nofollow\">CreateFile function</a><br>\nFILE_FLAG_OVERLAPPED</p>\n"},{"comments":[{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1683672704,"post_id":76168523,"comment_id":134402042,"body_markdown":"https://meta.stackoverflow.com/a/285557/11107541, [/help/referencing](/help/referencing).","body":"<a href=\"https://meta.stackoverflow.com/a/285557/11107541\">meta.stackoverflow.com/a/285557/11107541</a>, <a href=\"/help/referencing\">/help/referencing</a>."},{"owner":{"account_id":22372905,"reputation":492,"user_id":16587692,"display_name":"Teodor Mihail"},"score":0,"creation_date":1683721172,"post_id":76168523,"comment_id":134409543,"body_markdown":"It the code running, no need to copy anything. I will just crop the image","body":"It the code running, no need to copy anything. I will just crop the image"}],"tags":[],"owner":{"account_id":22372905,"reputation":492,"user_id":16587692,"display_name":"Teodor Mihail"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683213302,"creation_date":1683155358,"answer_id":76168523,"question_id":4974989,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\nPipes are uni-directional meaning, a pipe can do only child to parent read operations and parent to child write operations, or vice-versa, not both. You need to use two pipes for this, on both the C# and Java side, in order for both of them to perform read and write operations. \r\n\r\nPipes vs Sockets: https://www.baeldung.com/cs/pipes-vs-sockets\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[ EDIT ]**\r\n&lt;br&gt;\r\nAs a result, you cannot perform read and write operations on the same pipe. Some languages like C# provide duplex-pipes, which can perform read and write operations on the same pipe, but surely these are two pipes &quot;under the hood&quot; that are used for read and write operations respectively. So as long as is an abstraction and you do not really know what is happening &quot;under the hood&quot;, you are better off segmenting the read and write operations between two pipes. Another factor that may cause the issue is that Java cannot officially support pipe servers, in order to do that you will need to use the Java Native Access library: https://github.com/java-native-access/jna. The RandomAccessFile Java implementation is using the OS file system in order to perform read write operations on the pipe, so as a result it has some limitations and as a result, reading and writing asynchronously within the OS file system object may result in a thread to be locked if two threads are accessing a block of memory, and could result even in memory corruption (Race Condition). Another issue is when I tried to perform two read operations on a pipe from a different thread, I got the ```\\\\.\\pipe\\testpipe1 (All pipe instances are busy)``` exception. This means that most probably, in your scenario, your pipe may be busy and got locked in a waiting for a response state when performing the write operation. As a result of the previous factors, the best option is to perform synchronous Read/Write operations on the pipe, preferably using two pipes, in order to have maximum control over the performed read and write operations.\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[C# Application]**\r\n\r\n```\r\nusing System;\r\nusing System.IO;\r\nusing System.IO.Pipes;\r\n\r\nclass C_Sharp_Pipe\r\n{\r\n    static void Main()\r\n    {\r\n        Write_Pipe();\r\n        Read_Pipe();\r\n\r\n        Console.ReadLine();\r\n    }\r\n\r\n\r\n    static async void Write_Pipe()\r\n    {\r\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe1&quot;, PipeDirection.Out))\r\n        {\r\n            try\r\n            {\r\n                pipeServer.WaitForConnection();\r\n\r\n                using (StreamWriter sw = new StreamWriter(pipeServer))\r\n                {\r\n                    sw.WriteLine(&quot;Hello Java process&quot;);\r\n                    Console.WriteLine(&quot;Message sent to testpipe1 Java client: &quot; + &quot;\\&quot;Hello\\&quot;&quot;);\r\n\r\n                    await sw.FlushAsync();\r\n                }\r\n\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    static async void Read_Pipe()\r\n    {\r\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe2&quot;, PipeDirection.InOut))\r\n        {\r\n            try\r\n            {\r\n                pipeServer.WaitForConnection();\r\n\r\n                using (StreamReader sr = new StreamReader(pipeServer))\r\n                {\r\n                    string received_message = await sr.ReadLineAsync();\r\n                    Console.WriteLine(&quot;Message received from Java testpipe2 server: &quot; + received_message);\r\n\r\n                }\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[Java Application]**\r\n```\r\npackage com.algorithms;\r\n\r\nimport java.io.RandomAccessFile;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        Read_Pipe();\r\n        Write_Pipe();\r\n\r\n        Scanner s = new Scanner(System.in);\r\n        s.nextLine();\r\n    }\r\n\r\n\r\n    private static void Read_Pipe()\r\n    {\r\n        try\r\n        {\r\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe1&quot;, &quot;r&quot;);\r\n            byte[] buffer = new byte[1024];\r\n\r\n            pipe.read(buffer);\r\n\r\n            System.out.println(&quot;Response from C# testpipe1 pipe server: &quot; + new String(buffer, StandardCharsets.UTF_8) );\r\n            pipe.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private static void Write_Pipe()\r\n    {\r\n        try\r\n        {\r\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe2&quot;, &quot;rw&quot;);\r\n            String buffer = &quot;Hello C# process&quot;;\r\n\r\n            pipe.write(buffer.getBytes(StandardCharsets.UTF_8));\r\n\r\n            System.out.println(&quot;Message sent to C# testpipe2 pipe client: &quot; + buffer);\r\n            pipe.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[ C# Inter-Process Communication Result ]**\r\n[![enter image description here][2]][2]\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n**[Java Inter-Process Communication Result]**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rzkRe.jpg\r\n  [2]: https://i.stack.imgur.com/vZAum.jpg\r\n  [3]: https://i.stack.imgur.com/1z6O8.jpg","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p><a href=\"https://i.stack.imgur.com/rzkRe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rzkRe.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Pipes are uni-directional meaning, a pipe can do only child to parent read operations and parent to child write operations, or vice-versa, not both. You need to use two pipes for this, on both the C# and Java side, in order for both of them to perform read and write operations.</p>\n<p>Pipes vs Sockets: <a href=\"https://www.baeldung.com/cs/pipes-vs-sockets\" rel=\"nofollow noreferrer\">https://www.baeldung.com/cs/pipes-vs-sockets</a></p>\n<br>\n<br>\n<p><strong>[ EDIT ]</strong>\n<br>\nAs a result, you cannot perform read and write operations on the same pipe. Some languages like C# provide duplex-pipes, which can perform read and write operations on the same pipe, but surely these are two pipes &quot;under the hood&quot; that are used for read and write operations respectively. So as long as is an abstraction and you do not really know what is happening &quot;under the hood&quot;, you are better off segmenting the read and write operations between two pipes. Another factor that may cause the issue is that Java cannot officially support pipe servers, in order to do that you will need to use the Java Native Access library: <a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\">https://github.com/java-native-access/jna</a>. The RandomAccessFile Java implementation is using the OS file system in order to perform read write operations on the pipe, so as a result it has some limitations and as a result, reading and writing asynchronously within the OS file system object may result in a thread to be locked if two threads are accessing a block of memory, and could result even in memory corruption (Race Condition). Another issue is when I tried to perform two read operations on a pipe from a different thread, I got the <code>\\\\.\\pipe\\testpipe1 (All pipe instances are busy)</code> exception. This means that most probably, in your scenario, your pipe may be busy and got locked in a waiting for a response state when performing the write operation. As a result of the previous factors, the best option is to perform synchronous Read/Write operations on the pipe, preferably using two pipes, in order to have maximum control over the performed read and write operations.\n<br>\n<br></p>\n<p><strong>[C# Application]</strong></p>\n<pre><code>using System;\nusing System.IO;\nusing System.IO.Pipes;\n\nclass C_Sharp_Pipe\n{\n    static void Main()\n    {\n        Write_Pipe();\n        Read_Pipe();\n\n        Console.ReadLine();\n    }\n\n\n    static async void Write_Pipe()\n    {\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe1&quot;, PipeDirection.Out))\n        {\n            try\n            {\n                pipeServer.WaitForConnection();\n\n                using (StreamWriter sw = new StreamWriter(pipeServer))\n                {\n                    sw.WriteLine(&quot;Hello Java process&quot;);\n                    Console.WriteLine(&quot;Message sent to testpipe1 Java client: &quot; + &quot;\\&quot;Hello\\&quot;&quot;);\n\n                    await sw.FlushAsync();\n                }\n\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\n            }\n        }\n    }\n\n\n    static async void Read_Pipe()\n    {\n        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(&quot;testpipe2&quot;, PipeDirection.InOut))\n        {\n            try\n            {\n                pipeServer.WaitForConnection();\n\n                using (StreamReader sr = new StreamReader(pipeServer))\n                {\n                    string received_message = await sr.ReadLineAsync();\n                    Console.WriteLine(&quot;Message received from Java testpipe2 server: &quot; + received_message);\n\n                }\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(&quot;ERROR: &quot; + e.Message);\n            }\n        }\n\n    }\n}\n</code></pre>\n<br>\n<br>\n<br>\n<p><strong>[Java Application]</strong></p>\n<pre><code>package com.algorithms;\n\nimport java.io.RandomAccessFile;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Scanner;\n\npublic class Main {\n\n    public static void main(String[] args)\n    {\n        Read_Pipe();\n        Write_Pipe();\n\n        Scanner s = new Scanner(System.in);\n        s.nextLine();\n    }\n\n\n    private static void Read_Pipe()\n    {\n        try\n        {\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe1&quot;, &quot;r&quot;);\n            byte[] buffer = new byte[1024];\n\n            pipe.read(buffer);\n\n            System.out.println(&quot;Response from C# testpipe1 pipe server: &quot; + new String(buffer, StandardCharsets.UTF_8) );\n            pipe.close();\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n        }\n    }\n\n\n\n    private static void Write_Pipe()\n    {\n        try\n        {\n            RandomAccessFile pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\testpipe2&quot;, &quot;rw&quot;);\n            String buffer = &quot;Hello C# process&quot;;\n\n            pipe.write(buffer.getBytes(StandardCharsets.UTF_8));\n\n            System.out.println(&quot;Message sent to C# testpipe2 pipe client: &quot; + buffer);\n            pipe.close();\n        }\n        catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n        }\n    }\n\n\n\n}\n</code></pre>\n<br>\n<br>\n<p><strong>[ C# Inter-Process Communication Result ]</strong>\n<a href=\"https://i.stack.imgur.com/vZAum.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vZAum.jpg\" alt=\"enter image description here\" /></a></p>\n<br>\n<br>\n<p><strong>[Java Inter-Process Communication Result]</strong></p>\n<p><a href=\"https://i.stack.imgur.com/1z6O8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1z6O8.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":39968,"reputation":7040,"user_id":115563,"accept_rate":80,"display_name":"takteek"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15158,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1683213302,"creation_date":1297465945,"question_id":4974989,"body_markdown":"I&#39;m trying to provide communication between a C# app and a Java app on windows using named pipes with the method described by v01ver in this question: https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java\r\n\r\nI&#39;m running into a problem on the Java side because I have a reader thread constantly waiting for input on the pipe and when I try to write to the pipe from my main thread it gets stuck forever.\r\n\r\n    final RandomAccessFile pipe;\r\n    try {\r\n       pipe = new RandomAccessFile(&quot;\\\\\\\\.\\\\pipe\\\\mypipe&quot;, &quot;rw&quot;);\r\n    }\r\n    catch (FileNotFoundException ex) {\r\n       ex.printStackTrace();\r\n       return;\r\n    }\r\n      \r\n    Thread readerThread = new Thread(new Runnable() {\r\n       @Override\r\n       public void run() {\r\n          String line = null;\r\n          try {\r\n             while (null != (line = pipe.readLine())) {\r\n                System.out.println(line);\r\n             }\r\n          }\r\n          catch (IOException ex) {\r\n             ex.printStackTrace();\r\n          }\r\n       }\r\n    });\r\n    readerThread.start();\r\n    \r\n    try { Thread.sleep(500); } catch (InterruptedException e) {}\r\n    \r\n    try {\r\n       System.out.println(&quot;Writing a message...&quot;);\r\n       pipe.write(&quot;Hello there.\\n&quot;.getBytes());\r\n       System.out.println(&quot;Finished.&quot;);\r\n    }\r\n    catch (IOException ex) {\r\n       ex.printStackTrace();\r\n    }\r\n\r\nThe output is: &lt;pre&gt;Writing a message...&lt;/pre&gt;\r\nand then it waits forever.\r\n\r\nHow can I write to a named pipe while waiting for input in another thread?","title":"Concurrent read/write of named pipe in Java (on windows)","body":"<p>I'm trying to provide communication between a C# app and a Java app on windows using named pipes with the method described by v01ver in this question: <a href=\"https://stackoverflow.com/questions/634564/how-to-open-a-windows-named-pipe-from-java\">How to open a Windows named pipe from Java?</a></p>\n\n<p>I'm running into a problem on the Java side because I have a reader thread constantly waiting for input on the pipe and when I try to write to the pipe from my main thread it gets stuck forever.</p>\n\n<pre><code>final RandomAccessFile pipe;\ntry {\n   pipe = new RandomAccessFile(\"\\\\\\\\.\\\\pipe\\\\mypipe\", \"rw\");\n}\ncatch (FileNotFoundException ex) {\n   ex.printStackTrace();\n   return;\n}\n\nThread readerThread = new Thread(new Runnable() {\n   @Override\n   public void run() {\n      String line = null;\n      try {\n         while (null != (line = pipe.readLine())) {\n            System.out.println(line);\n         }\n      }\n      catch (IOException ex) {\n         ex.printStackTrace();\n      }\n   }\n});\nreaderThread.start();\n\ntry { Thread.sleep(500); } catch (InterruptedException e) {}\n\ntry {\n   System.out.println(\"Writing a message...\");\n   pipe.write(\"Hello there.\\n\".getBytes());\n   System.out.println(\"Finished.\");\n}\ncatch (IOException ex) {\n   ex.printStackTrace();\n}\n</code></pre>\n\n<p>The output is: <pre>Writing a message...</pre>\nand then it waits forever.</p>\n\n<p>How can I write to a named pipe while waiting for input in another thread?</p>\n"},{"tags":["java","database","erp","jvx"],"answers":[{"tags":[],"owner":{"account_id":7016963,"reputation":453,"user_id":5377961,"display_name":"rjahn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683212952,"creation_date":1681759251,"answer_id":76038598,"question_id":76037923,"body_markdown":"You&#39;re right, the LabelControl is a good option, but not in your case.\r\n\r\nSo, simply use the cell editor and format the value:\r\n\r\n    Object value = dataRow.getValue(columnName);\r\n        \r\n    String text;\r\n        \r\n    if (value instanceof String)\r\n    {\r\n        text = (String)value;\r\n    }\r\n    else\r\n    {\r\n        ICellEditor cellEditor = UICellEditor.getCellEditor(dataRow, columnName);\r\n        \r\n        if (value instanceof Number &amp;&amp; cellEditor instanceof INumberCellEditor)\r\n        {\r\n            if (numberUtil == null)\r\n            {\r\n                numberUtil = new NumberUtil();\r\n            }\r\n     \r\n            numberUtil.setNumberPattern(\r\n                         ((INumberCellEditor)cellEditor).getNumberFormat());\r\n            \r\n            text = numberUtil.format((Number)value);\r\n        }\r\n        else if (value instanceof Date &amp;&amp; cellEditor instanceof IDateCellEditor)\r\n        {\r\n            if (dateUtil == null)\r\n            {\r\n                dateUtil = new DateUtil();\r\n            }\r\n            \r\n            dateUtil.setDatePattern(\r\n                       ((IDateCellEditor)cellEditor).getDateFormat());\r\n            \r\n            text = dateUtil.format((Date)value);\r\n        }\r\n        else\r\n        {\r\n            text = dataRow.getValueAsString(columnName);\r\n        }\r\n    }\r\n\r\nIt&#39;s important to create new NumberUtil and DateUtil, because the format can be different for every date or number column. There&#39;s also a utility class for formatting.\r\n\r\n    text = DataBookUtil.getValueAsString(dataRow, columnName);\r\n","title":"Get display value of cell editor in JVx","body":"<p>You're right, the LabelControl is a good option, but not in your case.</p>\n<p>So, simply use the cell editor and format the value:</p>\n<pre><code>Object value = dataRow.getValue(columnName);\n    \nString text;\n    \nif (value instanceof String)\n{\n    text = (String)value;\n}\nelse\n{\n    ICellEditor cellEditor = UICellEditor.getCellEditor(dataRow, columnName);\n    \n    if (value instanceof Number &amp;&amp; cellEditor instanceof INumberCellEditor)\n    {\n        if (numberUtil == null)\n        {\n            numberUtil = new NumberUtil();\n        }\n \n        numberUtil.setNumberPattern(\n                     ((INumberCellEditor)cellEditor).getNumberFormat());\n        \n        text = numberUtil.format((Number)value);\n    }\n    else if (value instanceof Date &amp;&amp; cellEditor instanceof IDateCellEditor)\n    {\n        if (dateUtil == null)\n        {\n            dateUtil = new DateUtil();\n        }\n        \n        dateUtil.setDatePattern(\n                   ((IDateCellEditor)cellEditor).getDateFormat());\n        \n        text = dateUtil.format((Date)value);\n    }\n    else\n    {\n        text = dataRow.getValueAsString(columnName);\n    }\n}\n</code></pre>\n<p>It's important to create new NumberUtil and DateUtil, because the format can be different for every date or number column. There's also a utility class for formatting.</p>\n<pre><code>text = DataBookUtil.getValueAsString(dataRow, columnName);\n</code></pre>\n"}],"owner":{"account_id":28167502,"reputation":90,"user_id":21526498,"display_name":"Robosch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76038598,"answer_count":1,"score":0,"last_activity_date":1683212952,"creation_date":1681753735,"question_id":76037923,"body_markdown":"I have a simple work-screen (JVx application framework) which shows records of a database table. The table contains number and formatted date values. The number and date formats are configured with cell editors as usual. It works without problems in the table and bound editor controls. So the table shows a formatted number/date and the editor as well.\r\n\r\nMy problem is that I want to show a label with the same number or date. The raw values (`datarow.getValue(&quot;DATECOL&quot;)`, `datarow.getValue(&quot;NUMBERCOL&quot;)`) are `java.sql.Timestamp` or `java.math.BigDecimal` objects. If I try to get a string (`datarow.getValueAsString(&quot;DATECOL&quot;)`, datarow.getValueAsString(&quot;NUMBERCOL&quot;)`) it&#39;s an unformatted string - clear.\r\n\r\nSo, is it possible to get the text, formatted with the same settings as defined for cell editors?\r\n\r\nI found that the framework contains a class `LabelControl` class which can be bound to a column. But in my case, I need the text for a specific report and not for the UI.\r\n\r\nAny help appreciated!\r\n\r\nIs there an API for e.g. `Util.getText(datarow, &quot;NUMBERCOL&quot;)`?","title":"Get display value of cell editor in JVx","body":"<p>I have a simple work-screen (JVx application framework) which shows records of a database table. The table contains number and formatted date values. The number and date formats are configured with cell editors as usual. It works without problems in the table and bound editor controls. So the table shows a formatted number/date and the editor as well.</p>\n<p>My problem is that I want to show a label with the same number or date. The raw values (<code>datarow.getValue(&quot;DATECOL&quot;)</code>, <code>datarow.getValue(&quot;NUMBERCOL&quot;)</code>) are <code>java.sql.Timestamp</code> or <code>java.math.BigDecimal</code> objects. If I try to get a string (<code>datarow.getValueAsString(&quot;DATECOL&quot;)</code>, datarow.getValueAsString(&quot;NUMBERCOL&quot;)`) it's an unformatted string - clear.</p>\n<p>So, is it possible to get the text, formatted with the same settings as defined for cell editors?</p>\n<p>I found that the framework contains a class <code>LabelControl</code> class which can be bound to a column. But in my case, I need the text for a specific report and not for the UI.</p>\n<p>Any help appreciated!</p>\n<p>Is there an API for e.g. <code>Util.getText(datarow, &quot;NUMBERCOL&quot;)</code>?</p>\n"},{"tags":["java","jar","executable-jar"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1683212780,"post_id":76174591,"comment_id":134335179,"body_markdown":"The standard Java classloaders do not know how to read classes from a JAR file *inside* another JAR file.  Nested JARs don&#39;t work.   The second duplink talks about 3rd-party classloaders that solve this problem.","body":"The standard Java classloaders do not know how to read classes from a JAR file <i>inside</i> another JAR file.  Nested JARs don&#39;t work.   The second duplink talks about 3rd-party classloaders that solve this problem."}],"owner":{"account_id":15342083,"reputation":11,"user_id":11068786,"display_name":"Shubham P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683212894,"answer_count":0,"score":0,"last_activity_date":1683212946,"creation_date":1683212242,"question_id":76174591,"body_markdown":"I have 3 jars a,b,c A is dependent on B and B has one jar let&#39;s call it jar c inside it i.e nested Jar.\r\nGetting error when B is trying to access class of Jar C.\r\nI have added the jar C in the class path of B.\r\n\r\n\r\n\r\nAlso when I extract the Jar B I can see that jar C is present inside the extracted folder of B.\r\nBut still getting error.","title":"Getting java.lang.NoClassDefFoundError error while running a JAR","body":"<p>I have 3 jars a,b,c A is dependent on B and B has one jar let's call it jar c inside it i.e nested Jar.\nGetting error when B is trying to access class of Jar C.\nI have added the jar C in the class path of B.</p>\n<p>Also when I extract the Jar B I can see that jar C is present inside the extracted folder of B.\nBut still getting error.</p>\n"},{"tags":["java","hibernate","quarkus","hibernate-reactive","quarkus-hibernate-reactive"],"owner":{"account_id":27652339,"reputation":23,"user_id":21106947,"display_name":"jf743"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683212711,"creation_date":1683212711,"question_id":76174676,"body_markdown":"I&#39;m trying to create a data model using hibernate reactive where one entity owns two other entities and each of those two entities have a one-to-many relationship with a fourth entity. Here is an example of how the tables would be set up:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_A&quot;)\r\npublic class ObjectA {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\r\n    public Set&lt;ObjectB&gt; objectBs;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\r\n    public Set&lt;ObjectC&gt; objectCs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_B&quot;)\r\npublic class ObjectB {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @OneToMany(mappedBy = &quot;objectB&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    public Set&lt;ObjectD&gt; objectDs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_C&quot;)\r\npublic class ObjectC {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @NotBlank\r\n    @Column(name = &quot;NAME&quot;)\r\n    public String name;\r\n\r\n    @OneToMany(mappedBy = &quot;objectC&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    public Set&lt;ObjectD&gt; objectDs;\r\n\r\n}\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;OBJECT_D&quot;)\r\npublic class ObjectD {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;ID&quot;)\r\n    public Long id;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;OBJECT_B_ID&quot;, nullable = false)\r\n    public ObjectB objectB;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;OBJECT_C_ID&quot;, nullable = false)\r\n    public ObjectC objectC;\r\n\r\n}\r\n```\r\n\r\nI think this table structure works fine. I just can&#39;t figure out how to actually persist data following this model into the database. Normally, I would just get an ObjectA from the API layer and call session.persist on that, and due to everything being CascadeType.ALL it would just persist all of the child objects. The problem I&#39;m having is that with a JSON Rest API you can&#39;t really represent the idea of an ObjectD having two different parent objects. In the JSON structure, ObjectD is a child of ObjectB and then I have a reference back to ObjectC as a part of ObjectD. Here is an example of an objectA in JSON:\r\n\r\n```\r\n{\r\n    &quot;objectBs&quot;: [\r\n        {\r\n            &quot;objectDs&quot;: [\r\n                {\r\n                    &quot;objectC&quot;: {\r\n                        &quot;name&quot;: &quot;example_name&quot;\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ],\r\n    &quot;objectCs&quot;: [\r\n        {\r\n            &quot;name&quot;: &quot;example_name&quot;\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nAs you can see, the ObjectC in the top level objectCs list and the one that is a part of the ObjectD are really the same object. How would I persist the JSON representation above into the database using hibernate? I appreciate any help. Sorry if this contrived example is a little hard to follow.","title":"How do I create an entity with multiple parent entities using Hibernate reactive?","body":"<p>I'm trying to create a data model using hibernate reactive where one entity owns two other entities and each of those two entities have a one-to-many relationship with a fourth entity. Here is an example of how the tables would be set up:</p>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_A&quot;)\npublic class ObjectA {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\n    public Set&lt;ObjectB&gt; objectBs;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinColumn(name = &quot;OBJECT_A_ID&quot;)\n    public Set&lt;ObjectC&gt; objectCs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_B&quot;)\npublic class ObjectB {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @OneToMany(mappedBy = &quot;objectB&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    public Set&lt;ObjectD&gt; objectDs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_C&quot;)\npublic class ObjectC {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @NotBlank\n    @Column(name = &quot;NAME&quot;)\n    public String name;\n\n    @OneToMany(mappedBy = &quot;objectC&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    public Set&lt;ObjectD&gt; objectDs;\n\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;OBJECT_D&quot;)\npublic class ObjectD {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;ID&quot;)\n    public Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;OBJECT_B_ID&quot;, nullable = false)\n    public ObjectB objectB;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;OBJECT_C_ID&quot;, nullable = false)\n    public ObjectC objectC;\n\n}\n</code></pre>\n<p>I think this table structure works fine. I just can't figure out how to actually persist data following this model into the database. Normally, I would just get an ObjectA from the API layer and call session.persist on that, and due to everything being CascadeType.ALL it would just persist all of the child objects. The problem I'm having is that with a JSON Rest API you can't really represent the idea of an ObjectD having two different parent objects. In the JSON structure, ObjectD is a child of ObjectB and then I have a reference back to ObjectC as a part of ObjectD. Here is an example of an objectA in JSON:</p>\n<pre><code>{\n    &quot;objectBs&quot;: [\n        {\n            &quot;objectDs&quot;: [\n                {\n                    &quot;objectC&quot;: {\n                        &quot;name&quot;: &quot;example_name&quot;\n                    }\n                }\n            ]\n        }\n    ],\n    &quot;objectCs&quot;: [\n        {\n            &quot;name&quot;: &quot;example_name&quot;\n        }\n    ]\n}\n</code></pre>\n<p>As you can see, the ObjectC in the top level objectCs list and the one that is a part of the ObjectD are really the same object. How would I persist the JSON representation above into the database using hibernate? I appreciate any help. Sorry if this contrived example is a little hard to follow.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9768,"page":457,"page_size":100}
