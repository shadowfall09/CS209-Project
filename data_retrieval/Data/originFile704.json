{"items":[{"tags":["java","security","ssl","tomcat","apache-commons-httpclient"],"answers":[{"comments":[{"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"score":0,"creation_date":1299360820,"post_id":5206837,"comment_id":5854932,"body_markdown":"I am not using commons.I am using http://hc.apache.org/httpcomponents-client-ga/.  I am doing something similar `Scheme scheme = new Scheme(&quot;https&quot;, 443, sf);\t\tclient.getConnectionManager().getSchemeRegistry().register(scheme);` and sf is `SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);` and in sslContext I have set my trust store manager.I can update the post with some code if it will help","body":"I am not using commons.I am using <a href=\"http://hc.apache.org/httpcomponents-client-ga/\" rel=\"nofollow noreferrer\">hc.apache.org/httpcomponents-client-ga</a>.  I am doing something similar <code>Scheme scheme = new Scheme(&quot;https&quot;, 443, sf);\t\tclient.getConnectionManager().getSchemeRegistry().regi&zwnj;&#8203;ster(scheme);</code> and sf is <code>SSLSocketFactory sf = new SSLSocketFactory(sslContext, SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);</code> and in sslContext I have set my trust store manager.I can update the post with some code if it will help"},{"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"score":0,"creation_date":1299361649,"post_id":5206837,"comment_id":5855038,"body_markdown":"@user384706 I&#39;m getting a bit confused. The problem is that the _client_ is using 2 TrustManagers (which SSLContext.init says it should not) or is it the tomcat _server_ which behaves strangely?","body":"@user384706 I&#39;m getting a bit confused. The problem is that the <i>client</i> is using 2 TrustManagers (which SSLContext.init says it should not) or is it the tomcat <i>server</i> which behaves strangely?"},{"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"score":0,"creation_date":1299362345,"post_id":5206837,"comment_id":5855126,"body_markdown":"No problem in Tomcat.Tomcat sends the certificate I have configured.Problem is in client part.I have specified a trusted trustore and was expecting only this to be used.The debuging info show that mine as well as the default java truststore is used.I have updated my post to show some code in client part","body":"No problem in Tomcat.Tomcat sends the certificate I have configured.Problem is in client part.I have specified a trusted trustore and was expecting only this to be used.The debuging info show that mine as well as the default java truststore is used.I have updated my post to show some code in client part"},{"owner":{"account_id":165821,"reputation":833,"user_id":2015110,"accept_rate":67,"display_name":"Deepesh M"},"score":0,"creation_date":1362155752,"post_id":5206837,"comment_id":21351860,"body_markdown":"@Cratylus, I am facing the same issue while testing httpclient 4.0 with self-signed certificates. Can you post the code how you got it working?","body":"@Cratylus, I am facing the same issue while testing httpclient 4.0 with self-signed certificates. Can you post the code how you got it working?"},{"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"score":0,"creation_date":1362169372,"post_id":5206837,"comment_id":21358955,"body_markdown":"@DeepeshM:I did not have any working issues.My post was related to why certificates part of `cacerts` were printed.My concern was that **both** the `cacerts` **and** my truststore was used","body":"@DeepeshM:I did not have any working issues.My post was related to why certificates part of <code>cacerts</code> were printed.My concern was that <b>both</b> the <code>cacerts</code> <b>and</b> my truststore was used"},{"owner":{"account_id":165821,"reputation":833,"user_id":2015110,"accept_rate":67,"display_name":"Deepesh M"},"score":0,"creation_date":1362202204,"post_id":5206837,"comment_id":21367894,"body_markdown":"@Cratylus, oh I am having working issue. Even though I am adding my own truststore with TrustManagerFactory still it is not adding to the default trust. When I set the debug, it does not show my certificates being added. I have posted the issue at http://stackoverflow.com/questions/15164831/httpclient-4-1-x-error-for-self-signed-certificate-javax-net-ssl-sslpeerunverif.","body":"@Cratylus, oh I am having working issue. Even though I am adding my own truststore with TrustManagerFactory still it is not adding to the default trust. When I set the debug, it does not show my certificates being added. I have posted the issue at <a href=\"http://stackoverflow.com/questions/15164831/httpclient-4-1-x-error-for-self-signed-certificate-javax-net-ssl-sslpeerunverif\" title=\"httpclient 4 1 x error for self signed certificate javax net ssl sslpeerunverif\">stackoverflow.com/questions/15164831/&hellip;</a>."}],"tags":[],"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1299359907,"creation_date":1299359907,"answer_id":5206837,"question_id":5206010,"body_markdown":"According to the [documentation][1] you need to specify the key store:\r\n\r\n    Protocol authhttps = new Protocol(&quot;https&quot;,  \r\n          new AuthSSLProtocolSocketFactory(\r\n              new URL(&quot;file:my.keystore&quot;), &quot;mypassword&quot;,\r\n              new URL(&quot;file:my.truststore&quot;), &quot;mypassword&quot;), 443); \r\n\r\n     HttpClient client = new HttpClient();\r\n     client.getHostConfiguration().setHost(&quot;localhost&quot;, 443, authhttps);\r\n\r\n\r\n\r\n  [1]: http://www.jdocs.com/httpclient/3.0.1/api-index.html?m=class&amp;p=org.apache.commons.httpclient.contrib.ssl&amp;c=AuthSSLProtocolSocketFactory&amp;render=classic","title":"Using Apache httpclient for https","body":"<p>According to the <a href=\"http://www.jdocs.com/httpclient/3.0.1/api-index.html?m=class&amp;p=org.apache.commons.httpclient.contrib.ssl&amp;c=AuthSSLProtocolSocketFactory&amp;render=classic\" rel=\"nofollow\">documentation</a> you need to specify the key store:</p>\n\n<pre><code>Protocol authhttps = new Protocol(\"https\",  \n      new AuthSSLProtocolSocketFactory(\n          new URL(\"file:my.keystore\"), \"mypassword\",\n          new URL(\"file:my.truststore\"), \"mypassword\"), 443); \n\n HttpClient client = new HttpClient();\n client.getHostConfiguration().setHost(\"localhost\", 443, authhttps);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":159005,"reputation":1031,"user_id":378025,"accept_rate":69,"display_name":"Abhishek"},"score":0,"creation_date":1304923548,"post_id":5232489,"comment_id":6836825,"body_markdown":"Hi Oleg, I am facing a similar issue but only when i am sending a POST request and not via GET. Any insight?","body":"Hi Oleg, I am facing a similar issue but only when i am sending a POST request and not via GET. Any insight?"},{"owner":{"account_id":103609,"reputation":3905,"user_id":277413,"accept_rate":67,"display_name":"pulkitsinghal"},"score":0,"creation_date":1357665617,"post_id":5232489,"comment_id":19723998,"body_markdown":"So, is there a bug filed for this somewhere that we can track for a solution?","body":"So, is there a bug filed for this somewhere that we can track for a solution?"},{"owner":{"account_id":103609,"reputation":3905,"user_id":277413,"accept_rate":67,"display_name":"pulkitsinghal"},"score":0,"creation_date":1360705821,"post_id":5232489,"comment_id":20800204,"body_markdown":"I found out that my JVM did not have the JCE jar files necessary to decrypt the 4096 bits key, perhaps that the same issue with 2048 bits key that you&#39;re testing?","body":"I found out that my JVM did not have the JCE jar files necessary to decrypt the 4096 bits key, perhaps that the same issue with 2048 bits key that you&#39;re testing?"},{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452168782,"post_id":5232489,"comment_id":57054745,"body_markdown":"How we can allow connections (insecure) to SSL sites without certs using HTTP client ?","body":"How we can allow connections (insecure) to SSL sites without certs using HTTP client ?"}],"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"comment_count":4,"down_vote_count":0,"up_vote_count":27,"is_accepted":true,"score":27,"last_activity_date":1339149867,"creation_date":1299587533,"answer_id":5232489,"question_id":5206010,"body_markdown":"I put together this test app to reproduce the issue using the HTTP testing framework from the Apache HttpClient package:\r\n\r\n\r\n    ClassLoader cl = HCTest.class.getClassLoader();\r\n    URL url = cl.getResource(&quot;test.keystore&quot;);\r\n    KeyStore keystore  = KeyStore.getInstance(&quot;jks&quot;);\r\n    char[] pwd = &quot;nopassword&quot;.toCharArray();\r\n    keystore.load(url.openStream(), pwd);\r\n    \r\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(\r\n            TrustManagerFactory.getDefaultAlgorithm());\r\n    tmf.init(keystore);\r\n    TrustManager[] tm = tmf.getTrustManagers();\r\n    \r\n    KeyManagerFactory kmfactory = KeyManagerFactory.getInstance(\r\n            KeyManagerFactory.getDefaultAlgorithm());\r\n    kmfactory.init(keystore, pwd);\r\n    KeyManager[] km = kmfactory.getKeyManagers();\r\n    \r\n    SSLContext sslcontext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    sslcontext.init(km, tm, null);\r\n    \r\n    LocalTestServer localServer = new LocalTestServer(sslcontext);\r\n    localServer.registerDefaultHandlers();\r\n    \r\n    localServer.start();\r\n    try {\r\n    \r\n        DefaultHttpClient httpclient = new DefaultHttpClient();\r\n        TrustStrategy trustStrategy = new TrustStrategy() {\r\n    \r\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                for (X509Certificate cert: chain) {\r\n                    System.err.println(cert);\r\n                }\r\n                return false;\r\n            }\r\n    \r\n        };\r\n    \r\n        SSLSocketFactory sslsf = new SSLSocketFactory(&quot;TLS&quot;, null, null, keystore, null,\r\n                trustStrategy, new AllowAllHostnameVerifier());\r\n        Scheme https = new Scheme(&quot;https&quot;, 443, sslsf);\r\n        httpclient.getConnectionManager().getSchemeRegistry().register(https);\r\n    \r\n        InetSocketAddress address = localServer.getServiceAddress();\r\n        HttpHost target1 = new HttpHost(address.getHostName(), address.getPort(), &quot;https&quot;);\r\n        HttpGet httpget1 = new HttpGet(&quot;/random/100&quot;);\r\n        HttpResponse response1 = httpclient.execute(target1, httpget1);\r\n        System.err.println(response1.getStatusLine());\r\n        HttpEntity entity1 = response1.getEntity();\r\n        EntityUtils.consume(entity1);\r\n        HttpHost target2 = new HttpHost(&quot;www.verisign.com&quot;, 443, &quot;https&quot;);\r\n        HttpGet httpget2 = new HttpGet(&quot;/&quot;);\r\n        HttpResponse response2 = httpclient.execute(target2, httpget2);\r\n        System.err.println(response2.getStatusLine());\r\n        HttpEntity entity2 = response2.getEntity();\r\n        EntityUtils.consume(entity2);\r\n    } finally {\r\n        localServer.stop();\r\n    }\r\n\r\nEven though, Sun&#39;s JSSE implementation appears to always read the trust material from the default trust store for some reason, it does not seem to get added to the SSL context and to impact the process of trust verification during the SSL handshake.\r\n\r\nHere&#39;s the output of the test app. As you can see, the first request succeeds whereas the second fails as the connection to **www.verisign.com** is rejected as untrusted.\r\n\r\n\r\n    [\r\n    [\r\n      Version: V1\r\n      Subject: CN=Simple Test Http Server, OU=Jakarta HttpClient Project, O=Apache Software Foundation, L=Unknown, ST=Unknown, C=Unknown\r\n      Signature Algorithm: SHA1withDSA, OID = 1.2.840.10040.4.3\r\n    \r\n      Key:  Sun DSA Public Key\r\n        Parameters:DSA\r\n    \tp:     fd7f5381 1d751229 52df4a9c 2eece4e7 f611b752 3cef4400 c31e3f80 b6512669\r\n        455d4022 51fb593d 8d58fabf c5f5ba30 f6cb9b55 6cd7813b 801d346f f26660b7\r\n        6b9950a5 a49f9fe8 047b1022 c24fbba9 d7feb7c6 1bf83b57 e7c6a8a6 150f04fb\r\n        83f6d3c5 1ec30235 54135a16 9132f675 f3ae2b61 d72aeff2 2203199d d14801c7\r\n    \tq:     9760508f 15230bcc b292b982 a2eb840b f0581cf5\r\n    \tg:     f7e1a085 d69b3dde cbbcab5c 36b857b9 7994afbb fa3aea82 f9574c0b 3d078267\r\n        5159578e bad4594f e6710710 8180b449 167123e8 4c281613 b7cf0932 8cc8a6e1\r\n        3c167a8b 547c8d28 e0a3ae1e 2bb3a675 916ea37f 0bfa2135 62f1fb62 7a01243b\r\n        cca4f1be a8519089 a883dfe1 5ae59f06 928b665e 807b5525 64014c3b fecf492a\r\n    \r\n      y:\r\n        f0cc639f 702fd3b1 03fa8fa6 676c3756 ea505448 23cd1147 fdfa2d7f 662f7c59\r\n        a02ddc1a fd76673e 25210344 cebbc0e7 6250fff1 a814a59f 30ff5c7e c4f186d8\r\n        f0fd346c 29ea270d b054c040 c74a9fc0 55a7020f eacf9f66 a0d86d04 4f4d23de\r\n        7f1d681f 45c4c674 5762b71b 808ded17 05b74baf 8de3c4ab 2ef662e3 053af09e\r\n    \r\n      Validity: [From: Sat Dec 11 14:48:35 CET 2004,\r\n                   To: Tue Dec 09 14:48:35 CET 2014]\r\n      Issuer: CN=Simple Test Http Server, OU=Jakarta HttpClient Project, O=Apache Software Foundation, L=Unknown, ST=Unknown, C=Unknown\r\n      SerialNumber: [    41bafab3]\r\n    \r\n    ]\r\n      Algorithm: [SHA1withDSA]\r\n      Signature:\r\n    0000: 30 2D 02 15 00 85 BE 6B   D0 91 EF 34 72 05 FF 1A  0-.....k...4r...\r\n    0010: DB F6 DE BF 92 53 9B 14   27 02 14 37 8D E8 CB AC  .....S..&#39;..7....\r\n    0020: 4E 6C 93 F2 1F 7D 20 A1   2D 6F 80 5F 58 AE 33     Nl.... .-o._X.3\r\n    \r\n    ]\r\n    HTTP/1.1 200 OK\r\n    [\r\n    [\r\n      Version: V3\r\n      Subject: CN=www.verisign.com, OU=&quot; Production Security Services&quot;, O=&quot;VeriSign, Inc.&quot;, STREET=487 East Middlefield Road, L=Mountain View, ST=California, OID.2.5.4.17=94043, C=US, SERIALNUMBER=2497886, OID.2.5.4.15=&quot;V1.0, Clause 5.(b)&quot;, OID.1.3.6.1.4.1.311.60.2.1.2=Delaware, OID.1.3.6.1.4.1.311.60.2.1.3=US\r\n      Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\r\n    \r\n      Key:  Sun RSA public key, 2048 bits\r\n      modulus: 20699622354183393041832954221256409980425015218949582822286196083815087464214375375678538878841956356687753084333860738385445545061253653910861690581771234068858443439641948884498053425403458465980515883570440998475638309355278206558031134532548167239684215445939526428677429035048018486881592078320341210422026566944903775926801017506416629554190534665876551381066249522794321313235316733139718653035476771717662585319643139144923795822646805045585537550376512087897918635167815735560529881178122744633480557211052246428978388768010050150525266771462988042507883304193993556759733514505590387262811565107773578140271\r\n      public exponent: 65537\r\n      Validity: [From: Wed May 26 02:00:00 CEST 2010,\r\n                   To: Sat May 26 01:59:59 CEST 2012]\r\n      Issuer: CN=VeriSign Class 3 Extended Validation SSL SGC CA, OU=Terms of use at https://www.verisign.com/rpa (c)06, OU=VeriSign Trust Network, O=&quot;VeriSign, Inc.&quot;, C=US\r\n      SerialNumber: [    53d2bef9 24a7245e 83ca01e4 6caa2477]\r\n    \r\n    Certificate Extensions: 10\r\n    [1]: ObjectId: 1.3.6.1.5.5.7.1.1 Criticality=false\r\n    AuthorityInfoAccess [\r\n      [accessMethod: 1.3.6.1.5.5.7.48.1\r\n       accessLocation: URIName: http://EVIntl-ocsp.verisign.com, accessMethod: 1.3.6.1.5.5.7.48.2\r\n       accessLocation: URIName: http://EVIntl-aia.verisign.com/EVIntl2006.cer]\r\n    ]\r\n    \r\n    ...\r\n    \r\n    ]\r\n    Exception in thread &quot;main&quot; javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated\r\n    \tat com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:345)\r\n    \tat org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)\r\n    \tat org.apache.http.conn.ssl.SSLSocketFactory.createLayeredSocket(SSLSocketFactory.java:446)\r\n    ...\r\n\r\n","title":"Using Apache httpclient for https","body":"<p>I put together this test app to reproduce the issue using the HTTP testing framework from the Apache HttpClient package:</p>\n\n<pre><code>ClassLoader cl = HCTest.class.getClassLoader();\nURL url = cl.getResource(\"test.keystore\");\nKeyStore keystore  = KeyStore.getInstance(\"jks\");\nchar[] pwd = \"nopassword\".toCharArray();\nkeystore.load(url.openStream(), pwd);\n\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(\n        TrustManagerFactory.getDefaultAlgorithm());\ntmf.init(keystore);\nTrustManager[] tm = tmf.getTrustManagers();\n\nKeyManagerFactory kmfactory = KeyManagerFactory.getInstance(\n        KeyManagerFactory.getDefaultAlgorithm());\nkmfactory.init(keystore, pwd);\nKeyManager[] km = kmfactory.getKeyManagers();\n\nSSLContext sslcontext = SSLContext.getInstance(\"TLS\");\nsslcontext.init(km, tm, null);\n\nLocalTestServer localServer = new LocalTestServer(sslcontext);\nlocalServer.registerDefaultHandlers();\n\nlocalServer.start();\ntry {\n\n    DefaultHttpClient httpclient = new DefaultHttpClient();\n    TrustStrategy trustStrategy = new TrustStrategy() {\n\n        public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            for (X509Certificate cert: chain) {\n                System.err.println(cert);\n            }\n            return false;\n        }\n\n    };\n\n    SSLSocketFactory sslsf = new SSLSocketFactory(\"TLS\", null, null, keystore, null,\n            trustStrategy, new AllowAllHostnameVerifier());\n    Scheme https = new Scheme(\"https\", 443, sslsf);\n    httpclient.getConnectionManager().getSchemeRegistry().register(https);\n\n    InetSocketAddress address = localServer.getServiceAddress();\n    HttpHost target1 = new HttpHost(address.getHostName(), address.getPort(), \"https\");\n    HttpGet httpget1 = new HttpGet(\"/random/100\");\n    HttpResponse response1 = httpclient.execute(target1, httpget1);\n    System.err.println(response1.getStatusLine());\n    HttpEntity entity1 = response1.getEntity();\n    EntityUtils.consume(entity1);\n    HttpHost target2 = new HttpHost(\"www.verisign.com\", 443, \"https\");\n    HttpGet httpget2 = new HttpGet(\"/\");\n    HttpResponse response2 = httpclient.execute(target2, httpget2);\n    System.err.println(response2.getStatusLine());\n    HttpEntity entity2 = response2.getEntity();\n    EntityUtils.consume(entity2);\n} finally {\n    localServer.stop();\n}\n</code></pre>\n\n<p>Even though, Sun's JSSE implementation appears to always read the trust material from the default trust store for some reason, it does not seem to get added to the SSL context and to impact the process of trust verification during the SSL handshake.</p>\n\n<p>Here's the output of the test app. As you can see, the first request succeeds whereas the second fails as the connection to <strong>www.verisign.com</strong> is rejected as untrusted.</p>\n\n<pre><code>[\n[\n  Version: V1\n  Subject: CN=Simple Test Http Server, OU=Jakarta HttpClient Project, O=Apache Software Foundation, L=Unknown, ST=Unknown, C=Unknown\n  Signature Algorithm: SHA1withDSA, OID = 1.2.840.10040.4.3\n\n  Key:  Sun DSA Public Key\n    Parameters:DSA\n    p:     fd7f5381 1d751229 52df4a9c 2eece4e7 f611b752 3cef4400 c31e3f80 b6512669\n    455d4022 51fb593d 8d58fabf c5f5ba30 f6cb9b55 6cd7813b 801d346f f26660b7\n    6b9950a5 a49f9fe8 047b1022 c24fbba9 d7feb7c6 1bf83b57 e7c6a8a6 150f04fb\n    83f6d3c5 1ec30235 54135a16 9132f675 f3ae2b61 d72aeff2 2203199d d14801c7\n    q:     9760508f 15230bcc b292b982 a2eb840b f0581cf5\n    g:     f7e1a085 d69b3dde cbbcab5c 36b857b9 7994afbb fa3aea82 f9574c0b 3d078267\n    5159578e bad4594f e6710710 8180b449 167123e8 4c281613 b7cf0932 8cc8a6e1\n    3c167a8b 547c8d28 e0a3ae1e 2bb3a675 916ea37f 0bfa2135 62f1fb62 7a01243b\n    cca4f1be a8519089 a883dfe1 5ae59f06 928b665e 807b5525 64014c3b fecf492a\n\n  y:\n    f0cc639f 702fd3b1 03fa8fa6 676c3756 ea505448 23cd1147 fdfa2d7f 662f7c59\n    a02ddc1a fd76673e 25210344 cebbc0e7 6250fff1 a814a59f 30ff5c7e c4f186d8\n    f0fd346c 29ea270d b054c040 c74a9fc0 55a7020f eacf9f66 a0d86d04 4f4d23de\n    7f1d681f 45c4c674 5762b71b 808ded17 05b74baf 8de3c4ab 2ef662e3 053af09e\n\n  Validity: [From: Sat Dec 11 14:48:35 CET 2004,\n               To: Tue Dec 09 14:48:35 CET 2014]\n  Issuer: CN=Simple Test Http Server, OU=Jakarta HttpClient Project, O=Apache Software Foundation, L=Unknown, ST=Unknown, C=Unknown\n  SerialNumber: [    41bafab3]\n\n]\n  Algorithm: [SHA1withDSA]\n  Signature:\n0000: 30 2D 02 15 00 85 BE 6B   D0 91 EF 34 72 05 FF 1A  0-.....k...4r...\n0010: DB F6 DE BF 92 53 9B 14   27 02 14 37 8D E8 CB AC  .....S..'..7....\n0020: 4E 6C 93 F2 1F 7D 20 A1   2D 6F 80 5F 58 AE 33     Nl.... .-o._X.3\n\n]\nHTTP/1.1 200 OK\n[\n[\n  Version: V3\n  Subject: CN=www.verisign.com, OU=\" Production Security Services\", O=\"VeriSign, Inc.\", STREET=487 East Middlefield Road, L=Mountain View, ST=California, OID.2.5.4.17=94043, C=US, SERIALNUMBER=2497886, OID.2.5.4.15=\"V1.0, Clause 5.(b)\", OID.1.3.6.1.4.1.311.60.2.1.2=Delaware, OID.1.3.6.1.4.1.311.60.2.1.3=US\n  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5\n\n  Key:  Sun RSA public key, 2048 bits\n  modulus: 20699622354183393041832954221256409980425015218949582822286196083815087464214375375678538878841956356687753084333860738385445545061253653910861690581771234068858443439641948884498053425403458465980515883570440998475638309355278206558031134532548167239684215445939526428677429035048018486881592078320341210422026566944903775926801017506416629554190534665876551381066249522794321313235316733139718653035476771717662585319643139144923795822646805045585537550376512087897918635167815735560529881178122744633480557211052246428978388768010050150525266771462988042507883304193993556759733514505590387262811565107773578140271\n  public exponent: 65537\n  Validity: [From: Wed May 26 02:00:00 CEST 2010,\n               To: Sat May 26 01:59:59 CEST 2012]\n  Issuer: CN=VeriSign Class 3 Extended Validation SSL SGC CA, OU=Terms of use at https://www.verisign.com/rpa (c)06, OU=VeriSign Trust Network, O=\"VeriSign, Inc.\", C=US\n  SerialNumber: [    53d2bef9 24a7245e 83ca01e4 6caa2477]\n\nCertificate Extensions: 10\n[1]: ObjectId: 1.3.6.1.5.5.7.1.1 Criticality=false\nAuthorityInfoAccess [\n  [accessMethod: 1.3.6.1.5.5.7.48.1\n   accessLocation: URIName: http://EVIntl-ocsp.verisign.com, accessMethod: 1.3.6.1.5.5.7.48.2\n   accessLocation: URIName: http://EVIntl-aia.verisign.com/EVIntl2006.cer]\n]\n\n...\n\n]\nException in thread \"main\" javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated\n    at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:345)\n    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)\n    at org.apache.http.conn.ssl.SSLSocketFactory.createLayeredSocket(SSLSocketFactory.java:446)\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2256418,"reputation":3983,"user_id":1987514,"accept_rate":86,"display_name":"Ben Green"},"score":3,"creation_date":1429094088,"post_id":24084141,"comment_id":47435768,"body_markdown":"Thank you so much for this. I couldn&#39;t for the life of me work out what the problem was, and then after reading this noticed that the builder basically ignores the sslContext you provide if you have passed in a connection manager.","body":"Thank you so much for this. I couldn&#39;t for the life of me work out what the problem was, and then after reading this noticed that the builder basically ignores the sslContext you provide if you have passed in a connection manager."},{"owner":{"account_id":1628571,"reputation":6081,"user_id":1503570,"accept_rate":51,"display_name":"lorraine batol"},"score":0,"creation_date":1587568887,"post_id":24084141,"comment_id":108563783,"body_markdown":"This answer deserves more love.  I have a task for SSL and conn pooling.  I could swear I ran my manual tests and integration tests successfully right before my eyes for SSL.  Then I did some code cleanup and nonchalantly inserted pooling conn manager.  You could imagine my distress when everything started failing!  My fix is instead of setting the pool values as conn manager,can actually set it directly on httpClient without instantiating and setting through setConnectionManager.","body":"This answer deserves more love.  I have a task for SSL and conn pooling.  I could swear I ran my manual tests and integration tests successfully right before my eyes for SSL.  Then I did some code cleanup and nonchalantly inserted pooling conn manager.  You could imagine my distress when everything started failing!  My fix is instead of setting the pool values as conn manager,can actually set it directly on httpClient without instantiating and setting through setConnectionManager."}],"tags":[],"owner":{"account_id":1313621,"reputation":71,"user_id":1261073,"display_name":"Pedro B. Morales"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1402064614,"creation_date":1402064614,"answer_id":24084141,"question_id":5206010,"body_markdown":"When I used Apache HTTP Client 4.3, I was using the Pooled or Basic Connection Managers to the HTTP Client.  I noticed, from using java SSL debugging, that these classes loaded the cacerts trust store and not the one I had specified programmatically.\r\n\r\n    PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();\r\n    BasicHttpClientConnectionManager cm = new BasicHttpClientConnectionManager();\r\n    builder.setConnectionManager( cm );\r\n\r\nI wanted to use them but ended up removing them and creating an HTTP Client without them.  Note that builder is an HttpClientBuilder.  \r\n\r\nI confirmed when running my program with the Java SSL debug flags, and stopped in the debugger.  I used -Djavax.net.debug=ssl as a VM argument.  I stopped my code in the debugger and when either of the above *ClientConnectionManager were constructed, the cacerts file would be loaded.\r\n\r\n","title":"Using Apache httpclient for https","body":"<p>When I used Apache HTTP Client 4.3, I was using the Pooled or Basic Connection Managers to the HTTP Client.  I noticed, from using java SSL debugging, that these classes loaded the cacerts trust store and not the one I had specified programmatically.</p>\n\n<pre><code>PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();\nBasicHttpClientConnectionManager cm = new BasicHttpClientConnectionManager();\nbuilder.setConnectionManager( cm );\n</code></pre>\n\n<p>I wanted to use them but ended up removing them and creating an HTTP Client without them.  Note that builder is an HttpClientBuilder.  </p>\n\n<p>I confirmed when running my program with the Java SSL debug flags, and stopped in the debugger.  I used -Djavax.net.debug=ssl as a VM argument.  I stopped my code in the debugger and when either of the above *ClientConnectionManager were constructed, the cacerts file would be loaded.</p>\n"},{"comments":[{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452169039,"post_id":26780120,"comment_id":57054919,"body_markdown":"How we can allow connections to SSL sites without certs insecure way in above code?","body":"How we can allow connections to SSL sites without certs insecure way in above code?"},{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452171123,"post_id":26780120,"comment_id":57056331,"body_markdown":"Which version of HTTPClient you used ?","body":"Which version of HTTPClient you used ?"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1452171531,"post_id":26780120,"comment_id":57056598,"body_markdown":"@user4567570 It was 4.3.5 I think. To connect insecurely, you need to allow the Hostname Verifier to allow all, but you also need to specify to use a strategy that trusts everyone: `sslContextBuilder.loadTrustMaterial(new TrustAllStrategy());` and `TrustAllStrategy` implements `TrustStrategy`, and all it does is `return true;`","body":"@user4567570 It was 4.3.5 I think. To connect insecurely, you need to allow the Hostname Verifier to allow all, but you also need to specify to use a strategy that trusts everyone: <code>sslContextBuilder.loadTrustMaterial(new TrustAllStrategy());</code> and <code>TrustAllStrategy</code> implements <code>TrustStrategy</code>, and all it does is <code>return true;</code>"},{"owner":{"display_name":"user5268786"},"score":0,"creation_date":1452171983,"post_id":26780120,"comment_id":57056912,"body_markdown":"Hey, could you please guide on this http://stackoverflow.com/questions/34655031/javax-net-ssl-sslpeerunverifiedexception-host-name-does-not-match-the-certifica?noredirect=1#comment57056458_34655031?","body":"Hey, could you please guide on this <a href=\"http://stackoverflow.com/questions/34655031/javax-net-ssl-sslpeerunverifiedexception-host-name-does-not-match-the-certifica?noredirect=1#comment57056458_34655031\" title=\"javax net ssl sslpeerunverifiedexception host name does not match the certifica\">stackoverflow.com/questions/34655031/&hellip;</a>?"},{"owner":{"account_id":1597837,"reputation":4000,"user_id":1479511,"accept_rate":57,"display_name":"Narendra Singh"},"score":0,"creation_date":1479388891,"post_id":26780120,"comment_id":68542991,"body_markdown":"how to get keystore and password?","body":"how to get keystore and password?"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1479390219,"post_id":26780120,"comment_id":68543968,"body_markdown":"`KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;,\n                            BouncyCastleProvider.PROVIDER_NAME);\n                    byteArrayInputStream = new ByteArrayInputStream(keyStoreBytes);\n                    keyStore.load(byteArrayInputStream, keyStorePassword);` i generated that thing with bouncycastle","body":"<code>KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;,                             BouncyCastleProvider.PROVIDER_NAME);                     byteArrayInputStream = new ByteArrayInputStream(keyStoreBytes);                     keyStore.load(byteArrayInputStream, keyStorePassword);</code> i generated that thing with bouncycastle"}],"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"comment_count":6,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1415283884,"creation_date":1415278771,"answer_id":26780120,"question_id":5206010,"body_markdown":"This is what worked for me:\r\n\r\n        KeyStore keyStore  = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        FileInputStream instream = new FileInputStream(new File(&quot;client-p12-keystore.p12&quot;));\r\n        try {\r\n            keyStore.load(instream, &quot;password&quot;.toCharArray());\r\n        } finally {\r\n            instream.close();\r\n        }\r\n\r\n        // Trust own CA and all self-signed certs\r\n        SSLContext sslcontext = SSLContexts.custom()\r\n            .loadKeyMaterial(keyStore, &quot;password&quot;.toCharArray())\r\n            //.loadTrustMaterial(trustStore, new TrustSelfSignedStrategy())\r\n            .build();\r\n        // Allow TLSv1 protocol only\r\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n            sslcontext,\r\n            new String[] { &quot;TLSv1&quot; },\r\n            null,\r\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); //TODO\r\n        CloseableHttpClient httpclient = HttpClients.custom()\r\n            .setHostnameVerifier(SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER) //TODO\r\n            .setSSLSocketFactory(sslsf)\r\n            .build();\r\n        try {\r\n\r\n            HttpGet httpget = new HttpGet(&quot;https://localhost:8443/secure/index&quot;);\r\n\r\n            System.out.println(&quot;executing request&quot; + httpget.getRequestLine());\r\n\r\n            CloseableHttpResponse response = httpclient.execute(httpget);\r\n            try {\r\n                HttpEntity entity = response.getEntity();\r\n\r\n                System.out.println(&quot;----------------------------------------&quot;);\r\n                System.out.println(response.getStatusLine());\r\n                if (entity != null) {\r\n                    System.out.println(&quot;Response content length: &quot; + entity.getContentLength());\r\n                }\r\n                EntityUtils.consume(entity);\r\n            } finally {\r\n                response.close();\r\n            }\r\n        } finally {\r\n            httpclient.close();\r\n        }\r\n    }\r\n\r\nThis code is a modified version of http://hc.apache.org/httpcomponents-client-4.3.x/httpclient/examples/org/apache/http/examples/client/ClientCustomSSL.java","title":"Using Apache httpclient for https","body":"<p>This is what worked for me:</p>\n\n<pre><code>    KeyStore keyStore  = KeyStore.getInstance(\"PKCS12\");\n    FileInputStream instream = new FileInputStream(new File(\"client-p12-keystore.p12\"));\n    try {\n        keyStore.load(instream, \"password\".toCharArray());\n    } finally {\n        instream.close();\n    }\n\n    // Trust own CA and all self-signed certs\n    SSLContext sslcontext = SSLContexts.custom()\n        .loadKeyMaterial(keyStore, \"password\".toCharArray())\n        //.loadTrustMaterial(trustStore, new TrustSelfSignedStrategy())\n        .build();\n    // Allow TLSv1 protocol only\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n        sslcontext,\n        new String[] { \"TLSv1\" },\n        null,\n        SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER); //TODO\n    CloseableHttpClient httpclient = HttpClients.custom()\n        .setHostnameVerifier(SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER) //TODO\n        .setSSLSocketFactory(sslsf)\n        .build();\n    try {\n\n        HttpGet httpget = new HttpGet(\"https://localhost:8443/secure/index\");\n\n        System.out.println(\"executing request\" + httpget.getRequestLine());\n\n        CloseableHttpResponse response = httpclient.execute(httpget);\n        try {\n            HttpEntity entity = response.getEntity();\n\n            System.out.println(\"----------------------------------------\");\n            System.out.println(response.getStatusLine());\n            if (entity != null) {\n                System.out.println(\"Response content length: \" + entity.getContentLength());\n            }\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    } finally {\n        httpclient.close();\n    }\n}\n</code></pre>\n\n<p>This code is a modified version of <a href=\"http://hc.apache.org/httpcomponents-client-4.3.x/httpclient/examples/org/apache/http/examples/client/ClientCustomSSL.java\" rel=\"noreferrer\">http://hc.apache.org/httpcomponents-client-4.3.x/httpclient/examples/org/apache/http/examples/client/ClientCustomSSL.java</a></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674725780,"post_id":75231065,"comment_id":132776552,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75231065/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26095853,"reputation":1,"user_id":19791995,"display_name":"Rafael Jim&#233;nez"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674633430,"creation_date":1674633430,"answer_id":75231065,"question_id":5206010,"body_markdown":"Based on the code of https://www.baeldung.com/httpclient-ssl#configure-ssl---accept-all-httpclient-44-and-above\r\n\r\nI have used this code:\r\n```\r\n\r\nvoid TestPostJSONSSLConection() throws IOException, NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\r\n\t\tString urlString = &quot;https://localhost:7002/testAppSSl&quot;;\r\n\t\tHttpPost httpPost = new HttpPost(urlString);\r\n\t\thttpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\t\thttpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\r\n\t\tString jsonString=&quot;{&#39;id&#39;:&#39;yourInternalId&#39;, &#39;someField&#39;:&#39;fieldText&#39;}&quot;\r\n\t\tStringEntity entity = new StringEntity(jsonString);\r\n\t\thttpPost.setEntity(entity);\r\n\t\tString responseBody = null;\r\n\t\tCloseableHttpResponse httpResponse = null;\r\n\t\tCloseableHttpClient httpClient = getSecureHttpsClient();\r\n\r\n\t\ttry {\r\n\t\t\thttpResponse = httpClient.execute(httpPost);\r\n\t\t\tresponseBody = new String(EntityUtils.toByteArray(httpResponse.getEntity()));\r\n\t\t} catch (IOException ex ) {\r\n\t\t\t\tthrow ex;\r\n\t\t} finally {\r\n\t\t\thttpClient.close();\r\n\t\t}\r\n    \tAssertions.assertNotNull(httpResponse.getStatusLine());\r\n\t\tAssertions.assertEquals(Response.Status.OK, Response.Status.fromStatusCode(httpResponse.getStatusLine().getStatusCode()),&quot;Error on Http status code response, expected code (&quot; + Response.Status.OK + &quot;), result code: &quot; + httpResponse.getStatusLine().getStatusCode());\r\n\t\tAssertions.assertNotNull(cuerpoRespuesta, &quot;The response body is empty&quot;);\r\n\r\n\r\n}\r\n \r\n\r\nprivate CloseableHttpClient getSecureHttpsClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\r\n\t\tTrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\r\n\t\tSSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\r\n\t\tSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext, NoopHostnameVerifier.INSTANCE);\r\n\r\n\t\tRegistry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry =\r\n\t\t\t\tRegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\r\n\t\t\t\t\t\t.register(&quot;https&quot;, sslsf)\r\n\t\t\t\t\t\t.register(&quot;http&quot;, new PlainConnectionSocketFactory())\r\n\t\t\t\t\t\t.build();\r\n\r\n\t\tBasicHttpClientConnectionManager connectionManager =\r\n\t\t\t\tnew BasicHttpClientConnectionManager(socketFactoryRegistry);\r\n\t\tCloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslsf)\r\n\t\t\t\t.setConnectionManager(connectionManager).build();\r\n\t\treturn httpClient;\r\n\t}\r\n```\r\n","title":"Using Apache httpclient for https","body":"<p>Based on the code of <a href=\"https://www.baeldung.com/httpclient-ssl#configure-ssl---accept-all-httpclient-44-and-above\" rel=\"nofollow noreferrer\">https://www.baeldung.com/httpclient-ssl#configure-ssl---accept-all-httpclient-44-and-above</a></p>\n<p>I have used this code:</p>\n<pre><code>\nvoid TestPostJSONSSLConection() throws IOException, NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\n        String urlString = &quot;https://localhost:7002/testAppSSl&quot;;\n        HttpPost httpPost = new HttpPost(urlString);\n        httpPost.setHeader(&quot;Accept&quot;, &quot;application/json&quot;);\n        httpPost.setHeader(&quot;Content-type&quot;, &quot;application/json&quot;);\n        String jsonString=&quot;{'id':'yourInternalId', 'someField':'fieldText'}&quot;\n        StringEntity entity = new StringEntity(jsonString);\n        httpPost.setEntity(entity);\n        String responseBody = null;\n        CloseableHttpResponse httpResponse = null;\n        CloseableHttpClient httpClient = getSecureHttpsClient();\n\n        try {\n            httpResponse = httpClient.execute(httpPost);\n            responseBody = new String(EntityUtils.toByteArray(httpResponse.getEntity()));\n        } catch (IOException ex ) {\n                throw ex;\n        } finally {\n            httpClient.close();\n        }\n        Assertions.assertNotNull(httpResponse.getStatusLine());\n        Assertions.assertEquals(Response.Status.OK, Response.Status.fromStatusCode(httpResponse.getStatusLine().getStatusCode()),&quot;Error on Http status code response, expected code (&quot; + Response.Status.OK + &quot;), result code: &quot; + httpResponse.getStatusLine().getStatusCode());\n        Assertions.assertNotNull(cuerpoRespuesta, &quot;The response body is empty&quot;);\n\n\n}\n \n\nprivate CloseableHttpClient getSecureHttpsClient() throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\n        TrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\n        SSLContext sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext, NoopHostnameVerifier.INSTANCE);\n\n        Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry =\n                RegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\n                        .register(&quot;https&quot;, sslsf)\n                        .register(&quot;http&quot;, new PlainConnectionSocketFactory())\n                        .build();\n\n        BasicHttpClientConnectionManager connectionManager =\n                new BasicHttpClientConnectionManager(socketFactoryRegistry);\n        CloseableHttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslsf)\n                .setConnectionManager(connectionManager).build();\n        return httpClient;\n    }\n</code></pre>\n"}],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180042,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"accepted_answer_id":5232489,"answer_count":5,"score":42,"last_activity_date":1674633430,"creation_date":1299350955,"question_id":5206010,"body_markdown":"I have enabled https in tomcat and have a self-signed certificate for server auth. I have created an http client using Apache httpClient. I have set a trust manager loading the server certificate. The http client can connect with server no problem. To see what is going on I enabled debugging:  \r\n\r\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl&quot;);\r\n\r\nI saw the following which I can not understand at all:  \r\n\r\n    ***\r\n    adding as trusted cert:\r\n      Subject: CN=Me, OU=MyHouse, O=Home, L=X, ST=X, C=BB\r\n      Issuer:  CN=Me, OU=MyHouse, O=Home, L=X, ST=X, C=BB\r\n      Algorithm: RSA; Serial number: 0x4d72356b\r\n      Valid from Sat Mar 05 15:06:51 EET 2011 until Fri Jun 03 16:06:51 EEST 2011 \r\n\r\nMy certificate is displayed and is added to truststore (as I see). Then:  \r\n\r\n    trigger seeding of SecureRandom\r\n    done seeding SecureRandom\r\n\r\nHere is the part from debugging traces I do not get:  \r\n\r\n    trustStore is: C:\\Program Files\\Java\\jre6\\lib\\security\\cacerts\r\n    trustStore type is : jks\r\n    trustStore provider is : \r\n    init truststore\r\n    adding as trusted cert:\r\n      Subject: CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH\r\n      Issuer:  CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH\r\n      Algorithm: RSA; Serial number: 0x4eb200670c035d4f\r\n      Valid from Wed Oct 25 11:36:00 EEST 2006 until Sat Oct 25 11:36:00 EEST 2036\r\n    \r\n    adding as trusted cert:\r\n      Subject: EMAILADDRESS=info@valicert.com, CN=http://www.valicert.com/, OU=ValiCert Class 1 Policy Validation Authority, O=&quot;ValiCert, Inc.&quot;, L=ValiCert Validation Network\r\n      Issuer:  EMAILADDRESS=info@valicert.com, CN=http://www.valicert.com/, OU=ValiCert Class 1 Policy Validation Authority, O=&quot;ValiCert, Inc.&quot;, L=ValiCert Validation Network\r\n      Algorithm: RSA; Serial number: 0x1\r\n      Valid from Sat Jun 26 01:23:48 EEST 1999 until Wed Jun 26 01:23:48 EEST 2019\r\n    \r\nIt seems that it also uses the default java trust store! My question is why does this happen? \r\n\r\nIn my code I specify explicitly a specific trust-store to use (via truststoremanagers). I was expecting only this to be used. It seems that both my truststore and java&#39;s default is being used. Is this how it is supposed to work?  \r\n\r\n**UPDATE:**  \r\nI tried the following:  \r\n\r\n    System.out.println(&quot;TMF No:&quot;+tmf.getTrustManagers().length);\r\n    System.out.println(&quot;Class is &quot;+tmf.getTrustManagers()[0].getClass().getName());  \r\nI thought that I should see 2 trust managers, since 2 keystores (mine and java&#39;s default appear to be used).  \r\nBut the result was only 1 trust manager!  \r\n\r\n    TMF No:1\r\n    Class is com.sun.net.ssl.internal.ssl.X509TrustManagerImpl  \r\n\r\n**UPDATE2:**  As you see in the code bellow I specify my keystore.My expectation is that only this should be used (not this **and** cacert as well)\r\n   \r\n\r\n        HttpClient client = new DefaultHttpClient();\r\n        SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\t\t\r\n        \r\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\r\n        KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n        File trustFile = new File(&quot;clientTrustStore.jks&quot;);\r\n        ks.load(new FileInputStream(trustFile), null);\r\n        tmf.init(ks);\r\n        sslContext.init(null, tmf.getTrustManagers(),null);  \r\n        SSLSocketFactory sf = new SSLSocketFactory(sslContext); \r\n        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n        Scheme scheme = new Scheme(&quot;https&quot;, sf, 443);\r\n        client.getConnectionManager().getSchemeRegistry().register(scheme);\r\n        httpGet = new HttpGet(&quot;https://localhost:8443/myApp&quot;);\r\n        HttpResponse httpResponse = client.execute(httpGet);\r\n\r\nDoes not make sense to me.\r\n\r\n\r\n","title":"Using Apache httpclient for https","body":"<p>I have enabled https in tomcat and have a self-signed certificate for server auth. I have created an http client using Apache httpClient. I have set a trust manager loading the server certificate. The http client can connect with server no problem. To see what is going on I enabled debugging:  </p>\n\n<pre><code>System.setProperty(\"javax.net.debug\", \"ssl\");\n</code></pre>\n\n<p>I saw the following which I can not understand at all:  </p>\n\n<pre><code>***\nadding as trusted cert:\n  Subject: CN=Me, OU=MyHouse, O=Home, L=X, ST=X, C=BB\n  Issuer:  CN=Me, OU=MyHouse, O=Home, L=X, ST=X, C=BB\n  Algorithm: RSA; Serial number: 0x4d72356b\n  Valid from Sat Mar 05 15:06:51 EET 2011 until Fri Jun 03 16:06:51 EEST 2011 \n</code></pre>\n\n<p>My certificate is displayed and is added to truststore (as I see). Then:  </p>\n\n<pre><code>trigger seeding of SecureRandom\ndone seeding SecureRandom\n</code></pre>\n\n<p>Here is the part from debugging traces I do not get:  </p>\n\n<pre><code>trustStore is: C:\\Program Files\\Java\\jre6\\lib\\security\\cacerts\ntrustStore type is : jks\ntrustStore provider is : \ninit truststore\nadding as trusted cert:\n  Subject: CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH\n  Issuer:  CN=SwissSign Platinum CA - G2, O=SwissSign AG, C=CH\n  Algorithm: RSA; Serial number: 0x4eb200670c035d4f\n  Valid from Wed Oct 25 11:36:00 EEST 2006 until Sat Oct 25 11:36:00 EEST 2036\n\nadding as trusted cert:\n  Subject: EMAILADDRESS=info@valicert.com, CN=http://www.valicert.com/, OU=ValiCert Class 1 Policy Validation Authority, O=\"ValiCert, Inc.\", L=ValiCert Validation Network\n  Issuer:  EMAILADDRESS=info@valicert.com, CN=http://www.valicert.com/, OU=ValiCert Class 1 Policy Validation Authority, O=\"ValiCert, Inc.\", L=ValiCert Validation Network\n  Algorithm: RSA; Serial number: 0x1\n  Valid from Sat Jun 26 01:23:48 EEST 1999 until Wed Jun 26 01:23:48 EEST 2019\n</code></pre>\n\n<p>It seems that it also uses the default java trust store! My question is why does this happen? </p>\n\n<p>In my code I specify explicitly a specific trust-store to use (via truststoremanagers). I was expecting only this to be used. It seems that both my truststore and java's default is being used. Is this how it is supposed to work?  </p>\n\n<p><strong>UPDATE:</strong><br>\nI tried the following:  </p>\n\n<pre><code>System.out.println(\"TMF No:\"+tmf.getTrustManagers().length);\nSystem.out.println(\"Class is \"+tmf.getTrustManagers()[0].getClass().getName());  \n</code></pre>\n\n<p>I thought that I should see 2 trust managers, since 2 keystores (mine and java's default appear to be used).<br>\nBut the result was only 1 trust manager!  </p>\n\n<pre><code>TMF No:1\nClass is com.sun.net.ssl.internal.ssl.X509TrustManagerImpl  \n</code></pre>\n\n<p><strong>UPDATE2:</strong>  As you see in the code bellow I specify my keystore.My expectation is that only this should be used (not this <strong>and</strong> cacert as well)</p>\n\n<pre><code>    HttpClient client = new DefaultHttpClient();\n    SSLContext sslContext = SSLContext.getInstance(\"TLS\");      \n\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n    KeyStore ks = KeyStore.getInstance(\"JKS\");\n    File trustFile = new File(\"clientTrustStore.jks\");\n    ks.load(new FileInputStream(trustFile), null);\n    tmf.init(ks);\n    sslContext.init(null, tmf.getTrustManagers(),null);  \n    SSLSocketFactory sf = new SSLSocketFactory(sslContext); \n    sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n    Scheme scheme = new Scheme(\"https\", sf, 443);\n    client.getConnectionManager().getSchemeRegistry().register(scheme);\n    httpGet = new HttpGet(\"https://localhost:8443/myApp\");\n    HttpResponse httpResponse = client.execute(httpGet);\n</code></pre>\n\n<p>Does not make sense to me.</p>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1674556714,"post_id":75219975,"comment_id":132734242,"body_markdown":"Have you tried it? Should be trivial to verify: create an instance, serialize it, deserialize it, check result","body":"Have you tried it? Should be trivial to verify: create an instance, serialize it, deserialize it, check result"}],"answers":[{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1674634555,"post_id":75221480,"comment_id":132753910,"body_markdown":"FindBugs does a &gt;static&lt; code analysis, and will be unable to determine the runtime type of the object assigned to the field ... at the point in time that it is serialized.  From that respect, the warning is correct.","body":"FindBugs does a &gt;static&lt; code analysis, and will be unable to determine the runtime type of the object assigned to the field ... at the point in time that it is serialized.  From that respect, the warning is correct."},{"owner":{"account_id":2629772,"reputation":433,"user_id":2276054,"display_name":"Leszek Pachura"},"score":0,"creation_date":1674908193,"post_id":75221480,"comment_id":132816660,"body_markdown":"Yes of course, it is kind of a bad design - it would be better to have `MyInterface` implementing `Serializable` - but then I would get a warning that `MyInterface` doesn&#39;t have `serialVersionUID` (which wouldn&#39;t make sense). In the end, it all boils down to the fact that marker interfaces like `Serializable` or `Cloneable` aren&#39;t examples of a good design...","body":"Yes of course, it is kind of a bad design - it would be better to have <code>MyInterface</code> implementing <code>Serializable</code> - but then I would get a warning that <code>MyInterface</code> doesn&#39;t have <code>serialVersionUID</code> (which wouldn&#39;t make sense). In the end, it all boils down to the fact that marker interfaces like <code>Serializable</code> or <code>Cloneable</code> aren&#39;t examples of a good design..."}],"tags":[],"owner":{"account_id":2629772,"reputation":433,"user_id":2276054,"display_name":"Leszek Pachura"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674633400,"creation_date":1674563213,"answer_id":75221480,"question_id":75219975,"body_markdown":"It turns out they will!\r\n\r\nPS. Although you&#39;ll get a FindBugs warning \r\n&gt; &quot;SE_BAD_FIELD - Non-transient non-serializable instance field in serializable class&quot;.","title":"Class field is a non-serializable interface, but its implementation is Serializable. Will it get serialized?","body":"<p>It turns out they will!</p>\n<p>PS. Although you'll get a FindBugs warning</p>\n<blockquote>\n<p>&quot;SE_BAD_FIELD - Non-transient non-serializable instance field in serializable class&quot;.</p>\n</blockquote>\n"}],"owner":{"account_id":2629772,"reputation":433,"user_id":2276054,"display_name":"Leszek Pachura"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75221480,"answer_count":1,"score":1,"last_activity_date":1674633400,"creation_date":1674554971,"question_id":75219975,"body_markdown":"If I serialize an instance of ``Parent`` with ``field3`` being assigned an instance of ``MyImplementation``, will ``field4`` and ``field5`` be serialized as well?\r\n\r\n````\r\npublic class Parent implements Serializable {\r\n\tpublic String field1;\r\n\tpublic String field2;\r\n\tpublic MyInterface field3;\r\n}\r\n\r\npublic interface MyInterface {\r\n\tString getText();\r\n}\r\n\r\npublic class MyImplementation implements MyInterface, Serializable {\r\n\tprivate static final long serialVersionUID = 12345464324324L;\r\n\tpublic int field4;\r\n\tpublic int field5;\r\n\r\n\t@Override\r\n\tpublic String getText() {\r\n\t\treturn &quot;foo&quot;;\r\n\t}\r\n}\r\n````","title":"Class field is a non-serializable interface, but its implementation is Serializable. Will it get serialized?","body":"<p>If I serialize an instance of <code>Parent</code> with <code>field3</code> being assigned an instance of <code>MyImplementation</code>, will <code>field4</code> and <code>field5</code> be serialized as well?</p>\n<pre><code>public class Parent implements Serializable {\n    public String field1;\n    public String field2;\n    public MyInterface field3;\n}\n\npublic interface MyInterface {\n    String getText();\n}\n\npublic class MyImplementation implements MyInterface, Serializable {\n    private static final long serialVersionUID = 12345464324324L;\n    public int field4;\n    public int field5;\n\n    @Override\n    public String getText() {\n        return &quot;foo&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":341492,"reputation":1861,"user_id":672135,"accept_rate":88,"display_name":"HectorLector"},"score":0,"creation_date":1370350569,"post_id":16918414,"comment_id":24421063,"body_markdown":"Calculate the decimal value then use Integer.toHexString(value);","body":"Calculate the decimal value then use Integer.toHexString(value);"},{"owner":{"account_id":537054,"reputation":32561,"user_id":905762,"accept_rate":77,"display_name":"John B"},"score":4,"creation_date":1370350574,"post_id":16918414,"comment_id":24421068,"body_markdown":"possible duplicate of [Translating a String containing a binary value to Hex](http://stackoverflow.com/questions/5759999/translating-a-string-containing-a-binary-value-to-hex)  - This was the very first Google result using `java Convert Binary String to Hex String`","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/5759999/translating-a-string-containing-a-binary-value-to-hex\">Translating a String containing a binary value to Hex</a>  - This was the very first Google result using <code>java Convert Binary String to Hex String</code>"},{"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"score":1,"creation_date":1370350875,"post_id":16918414,"comment_id":24421286,"body_markdown":"@JohnB The answer there refers to using int / long, which are too small in this instance.","body":"@JohnB The answer there refers to using int / long, which are too small in this instance."}],"answers":[{"comments":[{"owner":{"account_id":2241,"reputation":44197,"user_id":3093,"accept_rate":83,"display_name":"Dave L."},"score":0,"creation_date":1659932883,"post_id":16918459,"comment_id":129403841,"body_markdown":"WARNING - if you use the same method for binary strings that may begin with zeros, they may be dropped when converting to hex.","body":"WARNING - if you use the same method for binary strings that may begin with zeros, they may be dropped when converting to hex."}],"tags":[],"owner":{"account_id":264830,"reputation":70811,"user_id":551406,"accept_rate":95,"display_name":"Michael Berry"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1370351321,"creation_date":1370350561,"answer_id":16918459,"question_id":16918414,"body_markdown":"You need to use `BigInteger` for this - the number is too big to fit in a primitive value. The biggest number that can be stored in a `long` is 9223372036854775807, whereas the equivalent value in decimal of this binary string is much bigger, 25069592479040759763832764. That&#39;s why you&#39;re getting the `NumberFormatException`.\r\n\r\nSo with `BigInteger`:\r\n\r\n    String s = &quot;1010010111100101100010101010011011010001111100000010101000000000010000000111110111100&quot;;\r\n    BigInteger b = new BigInteger(s, 2);\r\n    System.out.println(b.toString(16));\r\n\r\n\r\n...which gives:\r\n\r\n    14bcb154da3e0540080fbc","title":"Converting a large binary string to hexadecimal","body":"<p>You need to use <code>BigInteger</code> for this - the number is too big to fit in a primitive value. The biggest number that can be stored in a <code>long</code> is 9223372036854775807, whereas the equivalent value in decimal of this binary string is much bigger, 25069592479040759763832764. That's why you're getting the <code>NumberFormatException</code>.</p>\n\n<p>So with <code>BigInteger</code>:</p>\n\n<pre><code>String s = \"1010010111100101100010101010011011010001111100000010101000000000010000000111110111100\";\nBigInteger b = new BigInteger(s, 2);\nSystem.out.println(b.toString(16));\n</code></pre>\n\n<p>...which gives:</p>\n\n<pre><code>14bcb154da3e0540080fbc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2123179,"reputation":10932,"user_id":1886012,"display_name":"bowmore"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1370351144,"creation_date":1370350816,"answer_id":16918549,"question_id":16918414,"body_markdown":"As the length of your binary String may exceed the capacity of an Integer or Long, it&#39;s best to use BigInteger. Remember that in Java an int is always 32 bits, and a long 64 bits.\r\n\r\n    String binaryString = &quot;1010010111100101100010101010011011010001111100000010101000000000010000000111110111100&quot;;\r\n    String hexString = new BigInteger(binaryString, 2).toString(16);","title":"Converting a large binary string to hexadecimal","body":"<p>As the length of your binary String may exceed the capacity of an Integer or Long, it's best to use BigInteger. Remember that in Java an int is always 32 bits, and a long 64 bits.</p>\n\n<pre><code>String binaryString = \"1010010111100101100010101010011011010001111100000010101000000000010000000111110111100\";\nString hexString = new BigInteger(binaryString, 2).toString(16);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1363556,"reputation":193,"user_id":1300461,"display_name":"Zartc"},"score":0,"creation_date":1658244498,"post_id":16918553,"comment_id":129001165,"body_markdown":"BigInteger will trim leading zeros. This can be a problem if the bin string start with &quot;00&quot;","body":"BigInteger will trim leading zeros. This can be a problem if the bin string start with &quot;00&quot;"}],"tags":[],"owner":{"account_id":465863,"reputation":41382,"user_id":870248,"accept_rate":100,"display_name":"Paul Vargas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1370350823,"creation_date":1370350823,"answer_id":16918553,"question_id":16918414,"body_markdown":"If you are using big numbers:\r\n\r\n    String hexString = new BigInteger(binaryString, 2).toString(16);\r\n","title":"Converting a large binary string to hexadecimal","body":"<p>If you are using big numbers:</p>\n\n<pre><code>String hexString = new BigInteger(binaryString, 2).toString(16);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8973274,"reputation":21,"user_id":6691041,"display_name":"Muhammad Sajjad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1470655979,"creation_date":1470655979,"answer_id":38828164,"question_id":16918414,"body_markdown":"\tpublic static String convertBinaryToHex(String binInPut) {\r\n\t\tint chunkLength = binInPut.length() / 4, startIndex = 0, endIndex = 4;\r\n\t\tString chunkVal = null;\r\n\t\tfor (int i = 0; i &lt; chunkLength; i++) {\r\n\t\t\tchunkVal = binInPut.substring(startIndex, endIndex);\r\n\t\t\t System.out.println(Integer.toHexString(Integer.parseInt(chunkVal, 2)));\r\n\t\t\tstartIndex = endIndex;\r\n\t\t\tendIndex = endIndex + 4;\r\n\t\t}\r\n\r\n\t\treturn binInPut;\r\n\r\n\t}","title":"Converting a large binary string to hexadecimal","body":"<pre><code>public static String convertBinaryToHex(String binInPut) {\n    int chunkLength = binInPut.length() / 4, startIndex = 0, endIndex = 4;\n    String chunkVal = null;\n    for (int i = 0; i &lt; chunkLength; i++) {\n        chunkVal = binInPut.substring(startIndex, endIndex);\n         System.out.println(Integer.toHexString(Integer.parseInt(chunkVal, 2)));\n        startIndex = endIndex;\n        endIndex = endIndex + 4;\n    }\n\n    return binInPut;\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674726092,"post_id":75231042,"comment_id":132776670,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75231042/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":18596311,"reputation":1,"user_id":13552237,"display_name":"Govind yadav"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674633266,"creation_date":1674633266,"answer_id":75231042,"question_id":16918414,"body_markdown":"I use this \r\n\r\n    fun String.binToHex(): String {\r\n        val out = StringBuilder()\r\n        val outArray = this.deviceInParts(4)\r\n        outArray.forEach {\r\n            if (it == &quot;0000&quot;) out.append(&#39;0&#39;)\r\n            if (it == &quot;0001&quot;) out.append(&#39;1&#39;)\r\n            if (it == &quot;0010&quot;) out.append(&#39;2&#39;)\r\n            if (it == &quot;0011&quot;) out.append(&#39;3&#39;)\r\n            if (it == &quot;0100&quot;) out.append(&#39;4&#39;)\r\n            if (it == &quot;0101&quot;) out.append(&#39;5&#39;)\r\n            if (it == &quot;0110&quot;) out.append(&#39;6&#39;)\r\n            if (it == &quot;0111&quot;) out.append(&#39;7&#39;)\r\n            if (it == &quot;1000&quot;) out.append(&#39;8&#39;)\r\n            if (it == &quot;1001&quot;) out.append(&#39;9&#39;)\r\n            if (it == &quot;1010&quot;) out.append(&#39;A&#39;)\r\n            if (it == &quot;1011&quot;) out.append(&#39;B&#39;)\r\n            if (it == &quot;1100&quot;) out.append(&#39;C&#39;)\r\n            if (it == &quot;1101&quot;) out.append(&#39;D&#39;)\r\n            if (it == &quot;1110&quot;) out.append(&#39;E&#39;)\r\n            if (it == &quot;1111&quot;) out.append(&#39;F&#39;)\r\n        }\r\n        return out.toString()\r\n    }\r\n    \r\n    fun String.deviceInParts(parts: Int): ArrayList&lt;String&gt; {\r\n        val outArray = arrayListOf&lt;String&gt;()\r\n        for (i in 0 until this.length step parts) {\r\n            outArray.add(this.subString(i, parts))\r\n        }\r\n        return outArray\r\n    }\r\n\r\n","title":"Converting a large binary string to hexadecimal","body":"<p>I use this</p>\n<pre><code>fun String.binToHex(): String {\n    val out = StringBuilder()\n    val outArray = this.deviceInParts(4)\n    outArray.forEach {\n        if (it == &quot;0000&quot;) out.append('0')\n        if (it == &quot;0001&quot;) out.append('1')\n        if (it == &quot;0010&quot;) out.append('2')\n        if (it == &quot;0011&quot;) out.append('3')\n        if (it == &quot;0100&quot;) out.append('4')\n        if (it == &quot;0101&quot;) out.append('5')\n        if (it == &quot;0110&quot;) out.append('6')\n        if (it == &quot;0111&quot;) out.append('7')\n        if (it == &quot;1000&quot;) out.append('8')\n        if (it == &quot;1001&quot;) out.append('9')\n        if (it == &quot;1010&quot;) out.append('A')\n        if (it == &quot;1011&quot;) out.append('B')\n        if (it == &quot;1100&quot;) out.append('C')\n        if (it == &quot;1101&quot;) out.append('D')\n        if (it == &quot;1110&quot;) out.append('E')\n        if (it == &quot;1111&quot;) out.append('F')\n    }\n    return out.toString()\n}\n\nfun String.deviceInParts(parts: Int): ArrayList&lt;String&gt; {\n    val outArray = arrayListOf&lt;String&gt;()\n    for (i in 0 until this.length step parts) {\n        outArray.add(this.subString(i, parts))\n    }\n    return outArray\n}\n</code></pre>\n"}],"owner":{"account_id":2855416,"reputation":71,"user_id":2451783,"display_name":"user2451783"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6044,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1674633266,"creation_date":1370350449,"question_id":16918414,"body_markdown":"I have a binary string:\r\n\r\n    1010010111100101100010101010011011010001111100000010101000000000010000000111110111100&quot;\r\n\r\nHow can I convert it to a hex string?\r\n\r\nI tried with the wrapper classes `Long` and `Integer`, but it didn’t work for me, throwing a `NumberFormatException`.","title":"Converting a large binary string to hexadecimal","body":"<p>I have a binary string:</p>\n\n<pre><code>1010010111100101100010101010011011010001111100000010101000000000010000000111110111100\"\n</code></pre>\n\n<p>How can I convert it to a hex string?</p>\n\n<p>I tried with the wrapper classes <code>Long</code> and <code>Integer</code>, but it didn’t work for me, throwing a <code>NumberFormatException</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1674563198,"post_id":75221458,"comment_id":132736222,"body_markdown":"I guess its just `Calendar.DAY_OF_MONTH`","body":"I guess its just <code>Calendar.DAY_OF_MONTH</code>"},{"owner":{"account_id":18953288,"reputation":35,"user_id":13830482,"display_name":"S Sidharth"},"score":0,"creation_date":1674563390,"post_id":75221458,"comment_id":132736274,"body_markdown":"Tried it but got `Expected 1 arguments but found 2`","body":"Tried it but got <code>Expected 1 arguments but found 2</code>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1674633003,"post_id":75221458,"comment_id":132753547,"body_markdown":"Do you want to add thirty calendar days? Or do you want to add thirty chunks of 24 hours? Not necessarily the same thing.","body":"Do you want to add thirty calendar days? Or do you want to add thirty chunks of 24 hours? Not necessarily the same thing."}],"answers":[{"tags":[],"owner":{"account_id":10428850,"reputation":175,"user_id":7689280,"display_name":"Mio"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1674563668,"creation_date":1674563668,"answer_id":75221571,"question_id":75221458,"body_markdown":"From what I can see, the add method expects a Duration argument.\r\nTry this:\r\n`endDate.add(DatatypeFactory.newInstance().newDurationDayTime(true, 30, 0, 0, 0));`","title":"How to add 30 days to a XMLGregorianCalendar variable (Java &amp; Authorize.net)","body":"<p>From what I can see, the add method expects a Duration argument.\nTry this:\n<code>endDate.add(DatatypeFactory.newInstance().newDurationDayTime(true, 30, 0, 0, 0));</code></p>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1674678649,"post_id":75223699,"comment_id":132768522,"body_markdown":"Be aware that a `Duration` of 30 days is actually thirty chunks of 24-hours, *not* thirty calendar days. Calendar days can be other lengths, such as 23 hours, 25 hours, 23.5 hours and so on.","body":"Be aware that a <code>Duration</code> of 30 days is actually thirty chunks of 24-hours, <i>not</i> thirty calendar days. Calendar days can be other lengths, such as 23 hours, 25 hours, 23.5 hours and so on."}],"tags":[],"owner":{"account_id":27413892,"reputation":186,"user_id":20913415,"display_name":"Flavian Iuga"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674574293,"creation_date":1674574293,"answer_id":75223699,"question_id":75221458,"body_markdown":"Maybe try:\r\n\r\n    endDate.add(DatatypeFactory.newInstance().newDuration(&quot;P30DT0H0M0S&quot;));","title":"How to add 30 days to a XMLGregorianCalendar variable (Java &amp; Authorize.net)","body":"<p>Maybe try:</p>\n<pre><code>endDate.add(DatatypeFactory.newInstance().newDuration(&quot;P30DT0H0M0S&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674633082,"creation_date":1674582670,"answer_id":75225358,"question_id":75221458,"body_markdown":"Avoid the legacy date-time classes. Do your work using *java.time* classes. Then at the end convert to a legacy object as required by third-party library. \r\n\r\nCapture the current moment as seen in the time zone of interest.\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/New_York&quot; );\r\n    ZonedDateTime zdt = ZonedDateTime.now( z ) ;\r\n\r\nAdd 30 days. These are thirty calendar days, not thirty chunks of 24 hours. \r\n\r\n    ZonedDateTime laterZdt = zdt.plusDays( 30 ) ;\r\n\r\nConvert to legacy object. From the [`java.time.ZonedDateTime`][1] object, make a [`java.util.GregorianCalendar`][2] object. From that make your [`javax.xml.datatype.XMLGregorianCalendar`][3] object.\r\n\r\n\r\n```java\r\nXMLGregorianCalendar xgc = \r\n        DatatypeFactory\r\n        .newInstance()\r\n        .newXMLGregorianCalendar( \r\n            GregorianCalendar\r\n            .from(\r\n                laterZdt\r\n            )\r\n        ) \r\n;\r\n```\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/GregorianCalendar.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/datatype/XMLGregorianCalendar.html","title":"How to add 30 days to a XMLGregorianCalendar variable (Java &amp; Authorize.net)","body":"<p>Avoid the legacy date-time classes. Do your work using <em>java.time</em> classes. Then at the end convert to a legacy object as required by third-party library.</p>\n<p>Capture the current moment as seen in the time zone of interest.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/New_York&quot; );\nZonedDateTime zdt = ZonedDateTime.now( z ) ;\n</code></pre>\n<p>Add 30 days. These are thirty calendar days, not thirty chunks of 24 hours.</p>\n<pre><code>ZonedDateTime laterZdt = zdt.plusDays( 30 ) ;\n</code></pre>\n<p>Convert to legacy object. From the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>java.time.ZonedDateTime</code></a> object, make a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/GregorianCalendar.html\" rel=\"nofollow noreferrer\"><code>java.util.GregorianCalendar</code></a> object. From that make your <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.xml/javax/xml/datatype/XMLGregorianCalendar.html\" rel=\"nofollow noreferrer\"><code>javax.xml.datatype.XMLGregorianCalendar</code></a> object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>XMLGregorianCalendar xgc = \n        DatatypeFactory\n        .newInstance()\n        .newXMLGregorianCalendar( \n            GregorianCalendar\n            .from(\n                laterZdt\n            )\n        ) \n;\n</code></pre>\n"}],"owner":{"account_id":18953288,"reputation":35,"user_id":13830482,"display_name":"S Sidharth"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75221571,"answer_count":3,"score":0,"last_activity_date":1674633082,"creation_date":1674563077,"question_id":75221458,"body_markdown":"```\r\n            GregorianCalendar gc = new GregorianCalendar();\r\n            gc.setTime(new Date());\r\n            XMLGregorianCalendar startDate = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);\r\n            schedule.setStartDate(startDate); //2020-08-30\r\n            \r\n            XMLGregorianCalendar endDate = (XMLGregorianCalendar) startDate.clone();\r\n            endDate.add(XMLGregorianCalendar.DAY_OF_MONTH, 30);\r\n```\r\nI&#39;m getting `Cannot resolve symbol &#39;DAY_OF_MONTH&#39;`. \r\n\r\nWhy am I using XMLGregorianCalendar? It&#39;s because I&#39;m using Authorize.net as payment gateway and their official docs says it [https://developer.authorize.net/api/reference/index.html#recurring-billing-create-a-subscription][1]\r\n\r\nTried `endDate.add(DatatypeConstants.FIELD_UNDEFINED, 30);` too, but getting same error\r\n\r\n\r\n  [1]: https://developer.authorize.net/api/reference/index.html#recurring-billing-create-a-subscription","title":"How to add 30 days to a XMLGregorianCalendar variable (Java &amp; Authorize.net)","body":"<pre><code>            GregorianCalendar gc = new GregorianCalendar();\n            gc.setTime(new Date());\n            XMLGregorianCalendar startDate = DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);\n            schedule.setStartDate(startDate); //2020-08-30\n            \n            XMLGregorianCalendar endDate = (XMLGregorianCalendar) startDate.clone();\n            endDate.add(XMLGregorianCalendar.DAY_OF_MONTH, 30);\n</code></pre>\n<p>I'm getting <code>Cannot resolve symbol 'DAY_OF_MONTH'</code>.</p>\n<p>Why am I using XMLGregorianCalendar? It's because I'm using Authorize.net as payment gateway and their official docs says it <a href=\"https://developer.authorize.net/api/reference/index.html#recurring-billing-create-a-subscription\" rel=\"nofollow noreferrer\">https://developer.authorize.net/api/reference/index.html#recurring-billing-create-a-subscription</a></p>\n<p>Tried <code>endDate.add(DatatypeConstants.FIELD_UNDEFINED, 30);</code> too, but getting same error</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":3435599,"reputation":4037,"user_id":2878796,"display_name":"UnholySheep"},"score":0,"creation_date":1668543248,"post_id":74451619,"comment_id":131429940,"body_markdown":"Combining recursion with global state is a pretty bad idea. Is that really a requirement of your assignment?","body":"Combining recursion with global state is a pretty bad idea. Is that really a requirement of your assignment?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1668543414,"post_id":74451619,"comment_id":131429993,"body_markdown":"*for x=5, y=9 the result should be 15*.  Why?  Perhaps if you explain more about what you are trying to achieve, a solution could be provided that doesn&#39;t require external state.  And `recursiveMethod` is not a very good description of what it really does.","body":"<i>for x=5, y=9 the result should be 15</i>.  Why?  Perhaps if you explain more about what you are trying to achieve, a solution could be provided that doesn&#39;t require external state.  And <code>recursiveMethod</code> is not a very good description of what it really does."},{"owner":{"account_id":7369804,"reputation":1147,"user_id":5610358,"display_name":"rhowell"},"score":0,"creation_date":1668543445,"post_id":74451619,"comment_id":131430003,"body_markdown":"Well, if you&#39;re implementing a recursive method you must have a base case where the recursive calls will terminate. You could use that to reset `midresult`. Like @UnholySheep said though, it seems strange that this needs to be a global variable...","body":"Well, if you&#39;re implementing a recursive method you must have a base case where the recursive calls will terminate. You could use that to reset <code>midresult</code>. Like @UnholySheep said though, it seems strange that this needs to be a global variable..."},{"owner":{"account_id":2063361,"reputation":31416,"user_id":1839439,"accept_rate":98,"display_name":"Dharman"},"score":1,"creation_date":1668552866,"post_id":74451619,"comment_id":131432644,"body_markdown":"Please don&#39;t delete questions that received answers","body":"Please don&#39;t delete questions that received answers"},{"owner":{"account_id":3032247,"reputation":11129,"user_id":2571021,"accept_rate":100,"display_name":"Dijkgraaf"},"score":1,"creation_date":1668854311,"post_id":74451619,"comment_id":131510270,"body_markdown":"Please don&#39;t change the question so that it invalidates answers.  If you have a new question, post a new question, linking back to the original question if if clarifies things","body":"Please don&#39;t change the question so that it invalidates answers.  If you have a new question, post a new question, linking back to the original question if if clarifies things"},{"owner":{"account_id":3032247,"reputation":11129,"user_id":2571021,"accept_rate":100,"display_name":"Dijkgraaf"},"score":0,"creation_date":1668854557,"post_id":74451619,"comment_id":131510323,"body_markdown":"Also adding closed is unnecessary, if the an answer has solved your issue, then use the tick next to it to indicate that that answer helped you solve your problem.","body":"Also adding closed is unnecessary, if the an answer has solved your issue, then use the tick next to it to indicate that that answer helped you solve your problem."},{"owner":{"account_id":23073129,"reputation":847,"user_id":17186475,"display_name":"human bean"},"score":0,"creation_date":1669947386,"post_id":74451619,"comment_id":131764301,"body_markdown":"Please select a correct answer if your problem has been solved.","body":"Please select a correct answer if your problem has been solved."}],"answers":[{"tags":[],"owner":{"account_id":23073129,"reputation":847,"user_id":17186475,"display_name":"human bean"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668543562,"creation_date":1668543562,"answer_id":74451689,"question_id":74451619,"body_markdown":"You&#39;re storing recursion results in a global variable. It is initialized to 0; this is why your first function call is working; after that, however, whatever value is stored in `midresult` afterwards is what is used by later function calls. You mentioned you weren&#39;t allowed to modify main, so try changing your recursive base case\r\n\r\n    if(x == 0) {\r\n        return y + midresult;\r\n    }\r\n\r\nto this\r\n\r\n    if(x == 0) {\r\n        int temp = y + midresult;\r\n        midresult = 0;\r\n        return temp;\r\n    }","title":"reset variable in recursive method back to zero after its done/before its called again?","body":"<p>You're storing recursion results in a global variable. It is initialized to 0; this is why your first function call is working; after that, however, whatever value is stored in <code>midresult</code> afterwards is what is used by later function calls. You mentioned you weren't allowed to modify main, so try changing your recursive base case</p>\n<pre><code>if(x == 0) {\n    return y + midresult;\n}\n</code></pre>\n<p>to this</p>\n<pre><code>if(x == 0) {\n    int temp = y + midresult;\n    midresult = 0;\n    return temp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668864026,"creation_date":1668864026,"answer_id":74500385,"question_id":74451619,"body_markdown":"I would not use a static variable to hold `midresult`.  In some circumstances, that can cause problems.  An alternative is to use a helper method to pass `midresult` as an argument.  That value will be passed to the helper when the original method is invoked. Then you don&#39;t need to worry about resetting it for subsequent use.  \r\n```\r\npublic static int recursivemethod(int a, int b) {\r\n    return recursivemethod(a, b, 0);\r\n}\r\n\r\nprivate static int recursivemethod(int x, int y, int midresult) {\r\n    // TODO\r\n    if (x == 0) {\r\n        return y + midresult;\r\n    } else {\r\n        if ((x + midresult) % 2 == 0) {\r\n            midresult += (x / 2);\r\n            int temp = y;\r\n            y = (x / 2);\r\n            x = temp;\r\n            return recursivemethod(x, y, midresult);\r\n        } else {\r\n            midresult += y;\r\n            x -= 1;\r\n            y = (y / 2);\r\n            return recursivemethod(x, y, midresult);\r\n        }\r\n    }\r\n}\r\n```\r\nOf course, this might be avoided too if you explain the overall algorithm you are trying to recursively implement.  You can edit your question to do this.  Just don&#39;t change your existing code/approach as answers and comments have been provided based on that code.","title":"reset variable in recursive method back to zero after its done/before its called again?","body":"<p>I would not use a static variable to hold <code>midresult</code>.  In some circumstances, that can cause problems.  An alternative is to use a helper method to pass <code>midresult</code> as an argument.  That value will be passed to the helper when the original method is invoked. Then you don't need to worry about resetting it for subsequent use.</p>\n<pre><code>public static int recursivemethod(int a, int b) {\n    return recursivemethod(a, b, 0);\n}\n\nprivate static int recursivemethod(int x, int y, int midresult) {\n    // TODO\n    if (x == 0) {\n        return y + midresult;\n    } else {\n        if ((x + midresult) % 2 == 0) {\n            midresult += (x / 2);\n            int temp = y;\n            y = (x / 2);\n            x = temp;\n            return recursivemethod(x, y, midresult);\n        } else {\n            midresult += y;\n            x -= 1;\n            y = (y / 2);\n            return recursivemethod(x, y, midresult);\n        }\n    }\n}\n</code></pre>\n<p>Of course, this might be avoided too if you explain the overall algorithm you are trying to recursively implement.  You can edit your question to do this.  Just don't change your existing code/approach as answers and comments have been provided based on that code.</p>\n"}],"owner":{"display_name":"user19293033"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":305,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1674633003,"creation_date":1668543119,"question_id":74451619,"body_markdown":"I was given the task to code the following recursive method. midresult is supposed to be 0 when I call the method. It works if I call the method just once, but because I have this midresult variable, as soon as I call it more than once in a row it returns wrong values because it adds up midresult. \r\n\r\nHow do I set back midresult to 0 each time after the method is done running? Im not allowed to put it in my main method, but I can&#39;t put it into the actual recursive method because this will mess up the recursion right?\r\n\r\neg for x=5, y=9 the result should be 15, which works if I only call the method once. But if I call it with x=5 and y=9 after calling it with other  xy values the return value is wrong.\r\n\r\n```\r\nstatic int value;\r\n\r\npublic static int recursivemethod(int x, int y) {\r\n   // TODO\r\n   if(x==0) {\r\n      return y + value;\r\n   }\r\n   else{\r\n      if((x+value)%2==0) {\r\n         value+= (x/2);\r\n         int temp= y;\r\n         y=(x/2);\r\n         x=temp;\r\n         return recursivemethod(x, y);\r\n      }\r\n      else {\r\n         value+= y;\r\n         x-=1;\r\n         y=(y/2);\r\n         return recursivemethod(x, y);\r\n      }\r\n   }\r\n}\r\n```\r\n","title":"reset variable in recursive method back to zero after its done/before its called again?","body":"<p>I was given the task to code the following recursive method. midresult is supposed to be 0 when I call the method. It works if I call the method just once, but because I have this midresult variable, as soon as I call it more than once in a row it returns wrong values because it adds up midresult.</p>\n<p>How do I set back midresult to 0 each time after the method is done running? Im not allowed to put it in my main method, but I can't put it into the actual recursive method because this will mess up the recursion right?</p>\n<p>eg for x=5, y=9 the result should be 15, which works if I only call the method once. But if I call it with x=5 and y=9 after calling it with other  xy values the return value is wrong.</p>\n<pre><code>static int value;\n\npublic static int recursivemethod(int x, int y) {\n   // TODO\n   if(x==0) {\n      return y + value;\n   }\n   else{\n      if((x+value)%2==0) {\n         value+= (x/2);\n         int temp= y;\n         y=(x/2);\n         x=temp;\n         return recursivemethod(x, y);\n      }\n      else {\n         value+= y;\n         x-=1;\n         y=(y/2);\n         return recursivemethod(x, y);\n      }\n   }\n}\n</code></pre>\n"},{"tags":["java","rest","http","elasticsearch","opensearch"],"comments":[{"owner":{"account_id":19165296,"reputation":1941,"user_id":14000148,"display_name":"warkolm"},"score":1,"creation_date":1673915959,"post_id":75120349,"comment_id":132599334,"body_markdown":"can you share `_cat/aliases?v` showing this?","body":"can you share <code>_cat&#47;aliases?v</code> showing this?"},{"owner":{"account_id":14795454,"reputation":2021,"user_id":10685211,"display_name":"Musab Dogan"},"score":0,"creation_date":1673947646,"post_id":75120349,"comment_id":132604909,"body_markdown":"Why you&#39;re not using a `rollover_alias` to automatize the rollover move alias process?\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html\n\n\nYou can even use datastream indices for your case, and it would be better.\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/data-streams.html","body":"Why you&#39;re not using a <code>rollover_alias</code> to automatize the rollover move alias process? <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/current/&hellip;</a>   You can even use datastream indices for your case, and it would be better. <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/data-streams.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/reference/current/&hellip;</a>"},{"owner":{"account_id":6607989,"reputation":465,"user_id":5104202,"display_name":"Loc Ann"},"score":0,"creation_date":1673991482,"post_id":75120349,"comment_id":132619089,"body_markdown":"@musabDogan, thanks for your time. Datastream indices does not look to be well suited for my use case, it&#39;s not time series index. Regarding rollover_alias, why not, still I&#39;d like first to understand what exactly is happening in my case, I see nothing wrong in the solution we built.","body":"@musabDogan, thanks for your time. Datastream indices does not look to be well suited for my use case, it&#39;s not time series index. Regarding rollover_alias, why not, still I&#39;d like first to understand what exactly is happening in my case, I see nothing wrong in the solution we built."},{"owner":{"account_id":14795454,"reputation":2021,"user_id":10685211,"display_name":"Musab Dogan"},"score":0,"creation_date":1674028011,"post_id":75120349,"comment_id":132624726,"body_markdown":"@LocAnn I test it your scenario and it&#39;s working perfectly.\n\n&quot;It happens not 100% of the time&quot; from this sentence, the only possible reason looks like `POST _aliases` API not returning `{&quot;acknowledged&quot;:true}` every time you run. Do you have any check and retry mechanism until get `{&quot;acknowledged&quot;:true}`? \nAre you sure the API successfully runs every time you push?","body":"@LocAnn I test it your scenario and it&#39;s working perfectly.  &quot;It happens not 100% of the time&quot; from this sentence, the only possible reason looks like <code>POST _aliases</code> API not returning <code>{&quot;acknowledged&quot;:true}</code> every time you run. Do you have any check and retry mechanism until get <code>{&quot;acknowledged&quot;:true}</code>?  Are you sure the API successfully runs every time you push?"},{"owner":{"account_id":6607989,"reputation":465,"user_id":5104202,"display_name":"Loc Ann"},"score":0,"creation_date":1674050520,"post_id":75120349,"comment_id":132631940,"body_markdown":"@MusabDogan, we log the response and I can guarantee to you that we get {&quot;acknowledged&quot;:true} and 200 while no switch is done. But unfortunately it does not always happen, from 3 attemps done to reproduce since yesterday, it never happened. And to answer, yes we introduced a retry mechanism following checking aliases to see if switch really happened as we cannot rely on {&quot;acknowleded&quot;:true} which looks to me like a bug or something I don&#39;t get in ES internal related to potential sync, knowing we have a cluster of 3 nodes all master eligible.","body":"@MusabDogan, we log the response and I can guarantee to you that we get {&quot;acknowledged&quot;:true} and 200 while no switch is done. But unfortunately it does not always happen, from 3 attemps done to reproduce since yesterday, it never happened. And to answer, yes we introduced a retry mechanism following checking aliases to see if switch really happened as we cannot rely on {&quot;acknowleded&quot;:true} which looks to me like a bug or something I don&#39;t get in ES internal related to potential sync, knowing we have a cluster of 3 nodes all master eligible."},{"owner":{"account_id":14795454,"reputation":2021,"user_id":10685211,"display_name":"Musab Dogan"},"score":0,"creation_date":1674050630,"post_id":75120349,"comment_id":132631974,"body_markdown":"Maybe you can check the elasticsearch logs to see some clues about it.","body":"Maybe you can check the elasticsearch logs to see some clues about it."},{"owner":{"account_id":18868507,"reputation":980,"user_id":13763713,"display_name":"oliver_t"},"score":0,"creation_date":1674057250,"post_id":75120349,"comment_id":132634593,"body_markdown":"I tested your scenario in our local cluster and it works perfectly. I was a bit afraid, that the actions might not always be processed in the given order. But this was not the case. I tested it like 20 times and it was always executed as expected. Maybe this is some rare case, but definitely not 2 out of 10.","body":"I tested your scenario in our local cluster and it works perfectly. I was a bit afraid, that the actions might not always be processed in the given order. But this was not the case. I tested it like 20 times and it was always executed as expected. Maybe this is some rare case, but definitely not 2 out of 10."},{"owner":{"account_id":6607989,"reputation":465,"user_id":5104202,"display_name":"Loc Ann"},"score":0,"creation_date":1674073745,"post_id":75120349,"comment_id":132639928,"body_markdown":"Thanks @oliver_t for your time. Do you have any idea what would explain this occurence ? Is is worth opening a bug with ticket information ?","body":"Thanks @oliver_t for your time. Do you have any idea what would explain this occurence ? Is is worth opening a bug with ticket information ?"},{"owner":{"account_id":14795454,"reputation":2021,"user_id":10685211,"display_name":"Musab Dogan"},"score":0,"creation_date":1674117201,"post_id":75120349,"comment_id":132647337,"body_markdown":"You need proof to open a bug or solve the case. All you have is experience :).\nPlease check the Elasticsearch logs, find a log about it, and share it with me. If you can share the logs I can review them for you.","body":"You need proof to open a bug or solve the case. All you have is experience :). Please check the Elasticsearch logs, find a log about it, and share it with me. If you can share the logs I can review them for you."}],"answers":[{"comments":[{"owner":{"account_id":6607989,"reputation":465,"user_id":5104202,"display_name":"Loc Ann"},"score":0,"creation_date":1674632851,"post_id":75213687,"comment_id":132753511,"body_markdown":"Thanks for your time, note that I am already using this _aliases API . But thanks for the * note and version.","body":"Thanks for your time, note that I am already using this _aliases API . But thanks for the * note and version."}],"tags":[],"owner":{"account_id":3888107,"reputation":625,"user_id":3218983,"display_name":"Prescol"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674499275,"creation_date":1674499275,"answer_id":75213687,"question_id":75120349,"body_markdown":"It appears that there might be an issue with the way you are updating the alias. When you perform a POST request to the _aliases endpoint with the &quot;remove&quot; and &quot;add&quot; actions, Elasticsearch will update the alias based on the current state of the indices at the time the request is executed.\r\n\r\nHowever, it is possible that there are other processes or actions that are also modifying the indices or aliases at the same time, and this can cause conflicts or inconsistencies. Additionally, when you use the wildcard character (*) in the &quot;index&quot; field of the &quot;remove&quot; action, it will remove the alias from all indices that match the pattern, which may not be the intended behavior.\r\n\r\nTo avoid this issue, you could try using the Indices Aliases API instead of the _aliases endpoint. This API allows you to perform atomic updates on aliases, which means that the alias will only be updated if all actions succeed, and will roll back if any of the actions fail. Additionally, instead of using the wildcard character, you can explicitly specify the index that you want to remove the alias from.\r\n\r\nHere is an example of how you could use the Indices Aliases API to update the alias:\r\n\r\n```\r\nPOST /_aliases\r\n{\r\n    &quot;actions&quot;: [\r\n        { &quot;remove&quot;: { &quot;index&quot;: &quot;products-2023-01-12-0900&quot;, &quot;alias&quot;: &quot;current-products&quot; } },\r\n        { &quot;add&quot;: { &quot;index&quot;: &quot;products-2023-01-12-1520&quot;, &quot;alias&quot;: &quot;current-products&quot; } }\r\n    ]\r\n}\r\n```\r\nThis way, the alias will only be removed from the specific index &quot;products-2023-01-12-0900&quot; and added to the specific index &quot;products-2023-01-12-1520&quot;. This can help avoid any conflicts or inconsistencies that may be caused by other processes or actions that are modifying the indices or aliases at the same time.\r\n\r\nAdditionally, it is recommended to use a version of elasticsearch that is equal or greater than 8.4.3, as it has many bug fixes that might be the cause of the issue you are facing.\r\n\r\nIn conclusion, the issue you are encountering may not be a known bug but it&#39;s a regular behavior if multiple processes are modifying the indices or aliases at the same time, and using the Indices Aliases API and specifying the exact index to remove or add the alias can help avoid this issue.","title":"Changing alias in ElasticSearch returns 200 and acknowledged but does not change alias","body":"<p>It appears that there might be an issue with the way you are updating the alias. When you perform a POST request to the _aliases endpoint with the &quot;remove&quot; and &quot;add&quot; actions, Elasticsearch will update the alias based on the current state of the indices at the time the request is executed.</p>\n<p>However, it is possible that there are other processes or actions that are also modifying the indices or aliases at the same time, and this can cause conflicts or inconsistencies. Additionally, when you use the wildcard character (*) in the &quot;index&quot; field of the &quot;remove&quot; action, it will remove the alias from all indices that match the pattern, which may not be the intended behavior.</p>\n<p>To avoid this issue, you could try using the Indices Aliases API instead of the _aliases endpoint. This API allows you to perform atomic updates on aliases, which means that the alias will only be updated if all actions succeed, and will roll back if any of the actions fail. Additionally, instead of using the wildcard character, you can explicitly specify the index that you want to remove the alias from.</p>\n<p>Here is an example of how you could use the Indices Aliases API to update the alias:</p>\n<pre><code>POST /_aliases\n{\n    &quot;actions&quot;: [\n        { &quot;remove&quot;: { &quot;index&quot;: &quot;products-2023-01-12-0900&quot;, &quot;alias&quot;: &quot;current-products&quot; } },\n        { &quot;add&quot;: { &quot;index&quot;: &quot;products-2023-01-12-1520&quot;, &quot;alias&quot;: &quot;current-products&quot; } }\n    ]\n}\n</code></pre>\n<p>This way, the alias will only be removed from the specific index &quot;products-2023-01-12-0900&quot; and added to the specific index &quot;products-2023-01-12-1520&quot;. This can help avoid any conflicts or inconsistencies that may be caused by other processes or actions that are modifying the indices or aliases at the same time.</p>\n<p>Additionally, it is recommended to use a version of elasticsearch that is equal or greater than 8.4.3, as it has many bug fixes that might be the cause of the issue you are facing.</p>\n<p>In conclusion, the issue you are encountering may not be a known bug but it's a regular behavior if multiple processes are modifying the indices or aliases at the same time, and using the Indices Aliases API and specifying the exact index to remove or add the alias can help avoid this issue.</p>\n"}],"owner":{"account_id":6607989,"reputation":465,"user_id":5104202,"display_name":"Loc Ann"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":627,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1674632889,"creation_date":1673720965,"question_id":75120349,"body_markdown":"Using elasticsearch 8.4.3 with Java 17 and a cluster of 3 nodes where 3 are master eligible, we start with following situation:\r\n\r\n- index **products-2023-01-12-0900** which has an alias **current-products**\r\n\r\n\r\nWe then start a job that creates a new index **products-2023-01-12-1520** and at the end using [elastic-rest-client][1] on client side and [alias API][2], we make this call:\r\n\r\nAt 2023-01-12 16:27:26,893:\r\n\r\n    POST /_aliases\r\n    {&quot;actions&quot;:[\r\n       {\r\n        &quot;remove&quot;: { \r\n           &quot;alias&quot;:&quot;current-products&quot;,\r\n           &quot;index&quot;:&quot;products-*&quot;\r\n        }\r\n       },\r\n       { \r\n        &quot;add&quot;:{\r\n           &quot;alias&quot;:&quot;current-products&quot;,\r\n           &quot;index&quot;:&quot;products-2023-01-12-1520&quot;}\r\n        }\r\n    ]}\r\n\r\nAnd we get the following response 26 millis after with HTTP response code 200:\r\n\r\n    {&quot;acknowledged&quot;:true}\r\n\r\n\r\nBut looking at what we end up with, we still have old index with **current-products** alias.\r\n\r\nI don&#39;t understand why it happens, and it does not happen 100% of the time (it happened 2 times out of around 10 indexations).\r\nIs it a known bug ? or a regular behaviour ? \r\n\r\nEdit for @warkolm:\r\n\r\nGET /_cat/aliases?v before indexation as of now:\r\n\r\n\r\n    alias               index                       filter routing.index routing.search is_write_index\r\n    current-products    products-2023-01-13-1510    -      -             -              -\r\n\r\n  [1]: https://github.com/elastic/elasticsearch/tree/main/client/rest\r\n  [2]: https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-aliases.html\r\n\r\n\r\n\r\n","title":"Changing alias in ElasticSearch returns 200 and acknowledged but does not change alias","body":"<p>Using elasticsearch 8.4.3 with Java 17 and a cluster of 3 nodes where 3 are master eligible, we start with following situation:</p>\n<ul>\n<li>index <strong>products-2023-01-12-0900</strong> which has an alias <strong>current-products</strong></li>\n</ul>\n<p>We then start a job that creates a new index <strong>products-2023-01-12-1520</strong> and at the end using <a href=\"https://github.com/elastic/elasticsearch/tree/main/client/rest\" rel=\"nofollow noreferrer\">elastic-rest-client</a> on client side and <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-aliases.html\" rel=\"nofollow noreferrer\">alias API</a>, we make this call:</p>\n<p>At 2023-01-12 16:27:26,893:</p>\n<pre><code>POST /_aliases\n{&quot;actions&quot;:[\n   {\n    &quot;remove&quot;: { \n       &quot;alias&quot;:&quot;current-products&quot;,\n       &quot;index&quot;:&quot;products-*&quot;\n    }\n   },\n   { \n    &quot;add&quot;:{\n       &quot;alias&quot;:&quot;current-products&quot;,\n       &quot;index&quot;:&quot;products-2023-01-12-1520&quot;}\n    }\n]}\n</code></pre>\n<p>And we get the following response 26 millis after with HTTP response code 200:</p>\n<pre><code>{&quot;acknowledged&quot;:true}\n</code></pre>\n<p>But looking at what we end up with, we still have old index with <strong>current-products</strong> alias.</p>\n<p>I don't understand why it happens, and it does not happen 100% of the time (it happened 2 times out of around 10 indexations).\nIs it a known bug ? or a regular behaviour ?</p>\n<p>Edit for @warkolm:</p>\n<p>GET /_cat/aliases?v before indexation as of now:</p>\n<pre><code>alias               index                       filter routing.index routing.search is_write_index\ncurrent-products    products-2023-01-13-1510    -      -             -              -\n</code></pre>\n"},{"tags":["java","apache-kafka","websphere","kafka-producer-api","websphere-8"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673622553,"post_id":75107744,"comment_id":132547298,"body_markdown":"Your error is here `certificate... is not trusted`. That&#39;s unrelated to Kafka, but still interfering with its own certificate chain since you&#39;re using JAAS","body":"Your error is here <code>certificate... is not trusted</code>. That&#39;s unrelated to Kafka, but still interfering with its own certificate chain since you&#39;re using JAAS"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673622692,"post_id":75107744,"comment_id":132547345,"body_markdown":"And you do indeed have ssl configured - `(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)`","body":"And you do indeed have ssl configured - <code>(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;)</code>"},{"owner":{"account_id":8898928,"reputation":419,"user_id":6642944,"accept_rate":43,"display_name":"Thomson Mathew"},"score":0,"creation_date":1673622958,"post_id":75107744,"comment_id":132547444,"body_markdown":"Thank you for replying. Where do you think I need to get it configured ? Websphere or is there anything else I need to do in Kafka configs ? Sorry Its a legacy application and I really dont have much choice but to get it worked.","body":"Thank you for replying. Where do you think I need to get it configured ? Websphere or is there anything else I need to do in Kafka configs ? Sorry Its a legacy application and I really dont have much choice but to get it worked."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1673624714,"post_id":75107744,"comment_id":132548055,"body_markdown":"Based on the stacktrace, it&#39;s a Websphere issue, which I don&#39;t have experience with, rather than Kafka","body":"Based on the stacktrace, it&#39;s a Websphere issue, which I don&#39;t have experience with, rather than Kafka"},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1674468981,"post_id":75107744,"comment_id":132712786,"body_markdown":"From the log you can see `CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted` so you ARE using ssl to connect, connection is establish but cert presented by Kafka is not trusted. You have to add that cert to the WebSphere truststore, the default location would be NodeTrustStore, you will find it in the `Security &gt; SSL certificate and key management` section of the admin console.","body":"From the log you can see <code>CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted</code> so you ARE using ssl to connect, connection is establish but cert presented by Kafka is not trusted. You have to add that cert to the WebSphere truststore, the default location would be NodeTrustStore, you will find it in the <code>Security &gt; SSL certificate and key management</code> section of the admin console."},{"owner":{"account_id":8898928,"reputation":419,"user_id":6642944,"accept_rate":43,"display_name":"Thomson Mathew"},"score":0,"creation_date":1674496666,"post_id":75107744,"comment_id":132721841,"body_markdown":"Thanks for the reply. Its confluent Kafka platform and they are using SASL_SSL with PLAIN authentication using username and password. Not using any cert there. Really stuck don&#39;t know what else I need to do. Or what cert I need to install.","body":"Thanks for the reply. Its confluent Kafka platform and they are using SASL_SSL with PLAIN authentication using username and password. Not using any cert there. Really stuck don&#39;t know what else I need to do. Or what cert I need to install."},{"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"score":0,"creation_date":1674737184,"post_id":75107744,"comment_id":132780010,"body_markdown":"@ThomsonMathew The authentication is plain (user pass) but it goes over HTTPS (SSL) and Kafka presents its SSL cert (CN=ISRG Root X1) which you have to get and add to WebSphere config. The easiest way to get it would be from WAS console form NodeTrustStore, you go to SignerCerts and do &quot;Retrieve from port&quot; using `server.confluent.cloud:9092` address. You can also use your browser to point to that address and save cert from browser.","body":"@ThomsonMathew The authentication is plain (user pass) but it goes over HTTPS (SSL) and Kafka presents its SSL cert (CN=ISRG Root X1) which you have to get and add to WebSphere config. The easiest way to get it would be from WAS console form NodeTrustStore, you go to SignerCerts and do &quot;Retrieve from port&quot; using <code>server.confluent.cloud:9092</code> address. You can also use your browser to point to that address and save cert from browser."}],"owner":{"account_id":8898928,"reputation":419,"user_id":6642944,"accept_rate":43,"display_name":"Thomson Mathew"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674632848,"creation_date":1673604849,"question_id":75107744,"body_markdown":"I am using a Websphere EJB application and I need to configure a Kafka producer. Not sure why it is throwing `org.apache.kafka.common.errors.SslAuthenticationException: SSL handshake failed`. We dont have any SSL certs configured but using SASL PLAIN authentication. Here is the method that set the Config properties\r\n\r\n    private Producer setProducer() {\r\n\t\tProperties props = new Properties();\r\n\t\tprops.put(&quot;bootstrap.servers&quot;, &quot;server.confluent.cloud:9092&quot;);\r\n\t\tprops.put(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;);\r\n\t\tprops.put(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;DR45F4GSVVDGT\\&quot; password=\\&quot;xxx\\&quot;;&quot;);\r\n\t\tprops.put(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;);\r\n\t\tprops.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\t\tprops.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n\r\n\t\tProducer producer = new KafkaProducer&lt;String, String&gt;(props);\r\n\t\treturn producer;\r\n\t}\r\n\r\nI am using JDK 8 and Kafka-client-2.7. Unfortunately I need to get this working in the websphere environment. Below is the full exception. A help would be greatly appreciated. \r\n\r\n    [1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   org.apache.kafka.common.errors.SslAuthenticationException: SSL handshake failed\r\n\t[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n\t[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D.z(D.java:472)\r\n\t[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aq.b(aq.java:349)\r\n\t[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aq.c(aq.java:304)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aq.wrap(aq.java:194)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat javax.net.ssl.SSLEngine.wrap(SSLEngine.java:21)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.handshakeWrap(SslTransportLayer.java:478)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.doHandshake(SslTransportLayer.java:341)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.handshake(SslTransportLayer.java:291)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.KafkaChannel.prepare(KafkaChannel.java:173)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:543)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.Selector.poll(Selector.java:481)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:563)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:325)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:240)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat java.lang.Thread.run(Thread.java:785)\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\r\n\t[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.k.a(k.java:6)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aq.a(aq.java:113)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D.a(D.java:91)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D.a(D.java:74)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.E.a(E.java:307)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.E.a(E.java:121)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D.r(D.java:223)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D$b.a(D$b.java:3)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D$b.run(D$b.java:4)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat java.security.AccessController.doPrivileged(AccessController.java:686)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.D$c.run(D$c.java:10)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.runDelegatedTasks(SslTransportLayer.java:430)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.handshakeUnwrap(SslTransportLayer.java:514)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \tat org.apache.kafka.common.network.SslTransportLayer.doHandshake(SslTransportLayer.java:368)\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   \t... 8 more\r\n\t[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   Caused by: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \r\n\t\tjava.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \r\n\t\tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.util.f.a(f.java:107)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.util.f.b(f.java:108)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.util.e.a(e.java:4)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aB.a(aB.java:211)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aB.a(aB.java:96)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.aB.checkServerTrusted(aB.java:183)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.E.a(E.java:608)\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \t... 17 more\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \r\n\t\tjava.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \r\n\t\tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n\t[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:422)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.jsse2.util.f.a(f.java:74)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \t... 23 more\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \r\n\t\tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:199)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:749)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:661)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:607)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:368)\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   \t... 25 more\r\n\t[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathValidatorException: Certificate chaining error\r\n\t[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\r\n\t[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R   \tat com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108)\r\n\t[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R   \t... 30 more\r\n\r\n**UPDATE**\r\nAs I am still struggling to find an answer let me update with what I did. First of all I could not find the certificate `CN=ISRG Root X1, O=Internet Security Research Group, C=US` which is mentioned in the exception. This certificate is nowhere in the Websphere server. Also there is no certificate configured in confluent platform. I also tried to add Websphere SSL library to set Websphere TrustStore in Kafka Producer config properties as below:\r\n\r\n    com.ibm.websphere.ssl.JSSEHelper jsseHelper = JSSEHelper.getInstance();\r\n\tProperties sslProperties = jsseHelper.getProperties(&quot;default&quot;);\r\n\tprops.put(org.apache.kafka.common.config.SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,sslProperties.getProperty(&quot;com.ibm.ssl.trustStore&quot;));\r\n\tprops.put(&quot;ssl.endpoint.identification.algorithm&quot;, &quot;&quot;);\r\n\r\nbut this gives me below exception:\r\n\r\n    Caused by: java.lang.ClassNotFoundException: com.ibm.websphere.security.WebSphereRuntimePermission\r\n\t&#160;&#160;&#160; at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)\r\n\t&#160;&#160;&#160; at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)\r\n\t&#160;&#160;&#160; at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)\r\n\t&#160;&#160;&#160; at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)\r\n\t&#160;&#160;&#160; at java.lang.ClassLoader.loadClass(ClassLoader.java:809)\r\n\r\nI am not sure if this was a solution but definitely was not helping :(","title":"Kafka producer in Websphere EJB: SslAuthenticationException","body":"<p>I am using a Websphere EJB application and I need to configure a Kafka producer. Not sure why it is throwing <code>org.apache.kafka.common.errors.SslAuthenticationException: SSL handshake failed</code>. We dont have any SSL certs configured but using SASL PLAIN authentication. Here is the method that set the Config properties</p>\n<pre><code>private Producer setProducer() {\n    Properties props = new Properties();\n    props.put(&quot;bootstrap.servers&quot;, &quot;server.confluent.cloud:9092&quot;);\n    props.put(&quot;sasl.mechanism&quot;, &quot;PLAIN&quot;);\n    props.put(&quot;sasl.jaas.config&quot;, &quot;org.apache.kafka.common.security.plain.PlainLoginModule required username=\\&quot;DR45F4GSVVDGT\\&quot; password=\\&quot;xxx\\&quot;;&quot;);\n    props.put(&quot;security.protocol&quot;, &quot;SASL_SSL&quot;);\n    props.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n    props.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n\n    Producer producer = new KafkaProducer&lt;String, String&gt;(props);\n    return producer;\n}\n</code></pre>\n<p>I am using JDK 8 and Kafka-client-2.7. Unfortunately I need to get this working in the websphere environment. Below is the full exception. A help would be greatly appreciated.</p>\n<pre><code>[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   org.apache.kafka.common.errors.SslAuthenticationException: SSL handshake failed\n[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R   Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D.z(D.java:472)\n[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aq.b(aq.java:349)\n[1/13/23 3:25:55:921 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aq.c(aq.java:304)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aq.wrap(aq.java:194)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:21)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.handshakeWrap(SslTransportLayer.java:478)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.doHandshake(SslTransportLayer.java:341)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.handshake(SslTransportLayer.java:291)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.KafkaChannel.prepare(KafkaChannel.java:173)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:543)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.Selector.poll(Selector.java:481)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:563)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:325)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:240)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at java.lang.Thread.run(Thread.java:785)\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R   Caused by: javax.net.ssl.SSLHandshakeException: General SSLEngine problem\n[1/13/23 3:25:55:922 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.k.a(k.java:6)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aq.a(aq.java:113)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D.a(D.java:91)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D.a(D.java:74)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.E.a(E.java:307)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.E.a(E.java:121)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D.r(D.java:223)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D$b.a(D$b.java:3)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D$b.run(D$b.java:4)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at java.security.AccessController.doPrivileged(AccessController.java:686)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.D$c.run(D$c.java:10)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.runDelegatedTasks(SslTransportLayer.java:430)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.handshakeUnwrap(SslTransportLayer.java:514)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      at org.apache.kafka.common.network.SslTransportLayer.doHandshake(SslTransportLayer.java:368)\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R      ... 8 more\n[1/13/23 3:25:55:923 CST] 000002f3 SystemErr     R   Caused by: com.ibm.jsse2.util.h: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \n    java.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.util.f.a(f.java:107)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.util.f.b(f.java:108)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.util.e.a(e.java:4)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aB.a(aB.java:211)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aB.a(aB.java:96)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.aB.checkServerTrusted(aB.java:183)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.E.a(E.java:608)\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      ... 17 more\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \n    java.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n[1/13/23 3:25:55:924 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:422)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:268)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.jsse2.util.f.a(f.java:74)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      ... 23 more\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathValidatorException: The certificate issued by CN=ISRG Root X1, O=Internet Security Research Group, C=US is not trusted; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:199)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:749)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:661)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:607)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:368)\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R      ... 25 more\n[1/13/23 3:25:55:925 CST] 000002f3 SystemErr     R   Caused by: java.security.cert.CertPathValidatorException: Certificate chaining error\n[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:316)\n[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R      at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108)\n[1/13/23 3:25:55:926 CST] 000002f3 SystemErr     R      ... 30 more\n</code></pre>\n<p><strong>UPDATE</strong>\nAs I am still struggling to find an answer let me update with what I did. First of all I could not find the certificate <code>CN=ISRG Root X1, O=Internet Security Research Group, C=US</code> which is mentioned in the exception. This certificate is nowhere in the Websphere server. Also there is no certificate configured in confluent platform. I also tried to add Websphere SSL library to set Websphere TrustStore in Kafka Producer config properties as below:</p>\n<pre><code>com.ibm.websphere.ssl.JSSEHelper jsseHelper = JSSEHelper.getInstance();\nProperties sslProperties = jsseHelper.getProperties(&quot;default&quot;);\nprops.put(org.apache.kafka.common.config.SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,sslProperties.getProperty(&quot;com.ibm.ssl.trustStore&quot;));\nprops.put(&quot;ssl.endpoint.identification.algorithm&quot;, &quot;&quot;);\n</code></pre>\n<p>but this gives me below exception:</p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: com.ibm.websphere.security.WebSphereRuntimePermission\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)\n    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)\n    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:809)\n</code></pre>\n<p>I am not sure if this was a solution but definitely was not helping :(</p>\n"},{"tags":["java","android","bubblewrap"],"owner":{"account_id":17361513,"reputation":1747,"user_id":12577650,"display_name":"Sherif eldeeb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674632832,"creation_date":1674632832,"question_id":75230976,"body_markdown":"I just ran bubblewrap` to turn my PWA into an android app for the first time\r\nI run this cmd in a freshly installed windows 10 machine\r\n\r\nThese are the commands I just used\r\n```\r\nbubblewrap init --manifest https://www.almogtama3.com/config/manifest.webmanifest\r\nbubblewrap build\r\n```\r\nbut I get this exception (adding `--info` or `--debug` to **`bubblewrap build`**) outputs the exact same message\r\n\r\n![jpg](https://user-images.githubusercontent.com/57308531/214352518-0462d0df-354c-43a7-807c-c34c54ed71c6.jpg)\r\n","title":"bubblewrap throwed MetaSpace exception","body":"<p>I just ran bubblewrap` to turn my PWA into an android app for the first time\nI run this cmd in a freshly installed windows 10 machine</p>\n<p>These are the commands I just used</p>\n<pre><code>bubblewrap init --manifest https://www.almogtama3.com/config/manifest.webmanifest\nbubblewrap build\n</code></pre>\n<p>but I get this exception (adding <code>--info</code> or <code>--debug</code> to <strong><code>bubblewrap build</code></strong>) outputs the exact same message</p>\n<p><img src=\"https://user-images.githubusercontent.com/57308531/214352518-0462d0df-354c-43a7-807c-c34c54ed71c6.jpg\" alt=\"jpg\" /></p>\n"},{"tags":["java","scala","java-8","javafx-8"],"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1439234928,"post_id":31927500,"comment_id":51767428,"body_markdown":"Note: Java doesn&#39;t have method references.  You can have an object which has a method which calls another method (which is what lambdas actually do)","body":"Note: Java doesn&#39;t have method references.  You can have an object which has a method which calls another method (which is what lambdas actually do)"},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439235625,"post_id":31927500,"comment_id":51767766,"body_markdown":"I think I&#39;m confused with your comment &quot;Java doesn&#39;t have method references&quot;. I thought  what I&#39;m trying to do is no different than the ComparisonProvider example in the official documentation (link: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html).","body":"I think I&#39;m confused with your comment &quot;Java doesn&#39;t have method references&quot;. I thought  what I&#39;m trying to do is no different than the ComparisonProvider example in the official documentation (link: <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/&hellip;</a>)."},{"owner":{"account_id":67544,"reputation":3398,"user_id":197610,"accept_rate":78,"display_name":"Angelo Genovese"},"score":0,"creation_date":1439306217,"post_id":31927500,"comment_id":51801255,"body_markdown":"This question is basically a duplicate of http://stackoverflow.com/questions/24369449/ in short, you could create an implicit conversion from (T) =&gt; Unit to EventHandler[T] and import that implicit.","body":"This question is basically a duplicate of <a href=\"http://stackoverflow.com/questions/24369449/\">stackoverflow.com/questions/24369449</a> in short, you could create an implicit conversion from (T) =&gt; Unit to EventHandler[T] and import that implicit."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439309245,"post_id":31927500,"comment_id":51803209,"body_markdown":"@angelogenovese I&#39;m aware of the question, however, I was wondering if it is possible to use a method reference avoiding the lambda syntax all together. I have edited my question to reflect this.","body":"@angelogenovese I&#39;m aware of the question, however, I was wondering if it is possible to use a method reference avoiding the lambda syntax all together. I have edited my question to reflect this."},{"owner":{"account_id":444988,"reputation":5907,"user_id":837133,"accept_rate":52,"display_name":"ayvango"},"score":0,"creation_date":1439402017,"post_id":31927500,"comment_id":51851308,"body_markdown":"ScalaFX is an open source project. There are reasons preventing you from using it, but there is no for looking inside the code to get usage examples","body":"ScalaFX is an open source project. There are reasons preventing you from using it, but there is no for looking inside the code to get usage examples"}],"answers":[{"comments":[{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439235911,"post_id":31927558,"comment_id":51767921,"body_markdown":"Unfortunately, this doesn&#39;t work. \n\n`found   : Unit\n required: javafx.event.EventHandler[javafx.event.ActionEvent]`\nI can make it work by changing the method signature to `public EventHandler&lt;ActionEvent&gt; handleFileSelection(){` but that defies the whole purpose of using a  method reference.","body":"Unfortunately, this doesn&#39;t work.   <code>found   : Unit  required: javafx.event.EventHandler[javafx.event.ActionEvent]</code> I can make it work by changing the method signature to <code>public EventHandler&lt;ActionEvent&gt; handleFileSelection(){</code> but that defies the whole purpose of using a  method reference."},{"owner":{"account_id":5156654,"reputation":10601,"user_id":4129726,"display_name":"Sergii Lagutin"},"score":0,"creation_date":1439236065,"post_id":31927558,"comment_id":51767994,"body_markdown":"@Mustafa why didn&#39;t you try just pass `inputController`? It looks like an implementation of target interface, doesn&#39;t it?","body":"@Mustafa why didn&#39;t you try just pass <code>inputController</code>? It looks like an implementation of target interface, doesn&#39;t it?"},{"owner":{"account_id":5156654,"reputation":10601,"user_id":4129726,"display_name":"Sergii Lagutin"},"score":0,"creation_date":1439236338,"post_id":31927558,"comment_id":51768142,"body_markdown":"@Mustafa if you wanna use method reference we should talk about some function (consumer, supplier etc.) What does `fileButton.setOnAction` expect?","body":"@Mustafa if you wanna use method reference we should talk about some function (consumer, supplier etc.) What does <code>fileButton.setOnAction</code> expect?"},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439236359,"post_id":31927558,"comment_id":51768153,"body_markdown":"inputController will be handling events from multiple UI elements and I would like to handle them separately.","body":"inputController will be handling events from multiple UI elements and I would like to handle them separately."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439236533,"post_id":31927558,"comment_id":51768225,"body_markdown":"here https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ButtonBase.html#setOnAction-javafx.event.EventHandler-","body":"here <a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/ButtonBase.html#setOnAction-javafx.event.EventHandler-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/javafx/api/javafx/scene/control/&hellip;</a>"},{"owner":{"account_id":5156654,"reputation":10601,"user_id":4129726,"display_name":"Sergii Lagutin"},"score":0,"creation_date":1439237449,"post_id":31927558,"comment_id":51768681,"body_markdown":"@Mustafa thanks. I tried to repeat your code. I suppose that scala functions and java method reference use different algorithm of type inference so all my hints don&#39;t work. I add to answer only working code I found but I think you were waiting for better answer.","body":"@Mustafa thanks. I tried to repeat your code. I suppose that scala functions and java method reference use different algorithm of type inference so all my hints don&#39;t work. I add to answer only working code I found but I think you were waiting for better answer."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439238265,"post_id":31927558,"comment_id":51769081,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/86641/discussion-between-mustafa-and-sergey-lagutin).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/86641/discussion-between-mustafa-and-sergey-lagutin\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":5156654,"reputation":10601,"user_id":4129726,"display_name":"Sergii Lagutin"},"comment_count":7,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1439238029,"creation_date":1439234847,"answer_id":31927558,"question_id":31927500,"body_markdown":"You should pass function which applying one parameter of type `ActionEvent`:\r\n\r\n    val button = new Button()\r\n    val inputController = new InputController()\r\n  \r\n    def handler(h: (ActionEvent =&gt; Unit)): EventHandler[ActionEvent] =\r\n      new EventHandler[ActionEvent] {\r\n        override def handle(event: ActionEvent): Unit = h(event)\r\n      }\r\n  \r\n    button.setOnAction(handler(inputController.handleFileSelection))\r\n","title":"Is it possible to use a Java 8 style method references in Scala?","body":"<p>You should pass function which applying one parameter of type <code>ActionEvent</code>:</p>\n\n<pre><code>val button = new Button()\nval inputController = new InputController()\n\ndef handler(h: (ActionEvent =&gt; Unit)): EventHandler[ActionEvent] =\n  new EventHandler[ActionEvent] {\n    override def handle(event: ActionEvent): Unit = h(event)\n  }\n\nbutton.setOnAction(handler(inputController.handleFileSelection))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":1,"creation_date":1439305090,"post_id":31935669,"comment_id":51800402,"body_markdown":"When I enable the experimental features, `fileButton.setOnAction(inputController.handleFileSelection)` compiles with no errors. However, instead of being passed as a reference `handleFileSelection` method is executed immediately when this line is executed. I guess that&#39;s why it is still an experimental feature.","body":"When I enable the experimental features, <code>fileButton.setOnAction(inputController.handleFileSelection)</code> compiles with no errors. However, instead of being passed as a reference <code>handleFileSelection</code> method is executed immediately when this line is executed. I guess that&#39;s why it is still an experimental feature."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439308988,"post_id":31935669,"comment_id":51803069,"body_markdown":"what worked for me is to enable experimental features and let the lambda expression handle method reference as the following.\n`fileButton.setOnAction((event: ActionEvent) =&gt; inputController.handleFileSelection)`.","body":"what worked for me is to enable experimental features and let the lambda expression handle method reference as the following. <code>fileButton.setOnAction((event: ActionEvent) =&gt; inputController.handleFileSelection)</code>."},{"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":0,"creation_date":1439317176,"post_id":31935669,"comment_id":51807780,"body_markdown":"Do you mean `(event: ActionEvent) =&gt; inputController.handleFileSelection(event)`? The version in your comment really shouldn&#39;t work.","body":"Do you mean <code>(event: ActionEvent) =&gt; inputController.handleFileSelection(event)</code>? The version in your comment really shouldn&#39;t work."},{"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":0,"creation_date":1439317334,"post_id":31935669,"comment_id":51807869,"body_markdown":"Or is it possible that your `handleFileSelection` method actually _doesn&#39;t_ take an `ActionEvent`? That would explain how it _could_ be executed immediately without an actual `ActionEvent` as described in your first comment.","body":"Or is it possible that your <code>handleFileSelection</code> method actually <i>doesn&#39;t</i> take an <code>ActionEvent</code>? That would explain how it <i>could</i> be executed immediately without an actual <code>ActionEvent</code> as described in your first comment."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439317738,"post_id":31935669,"comment_id":51808128,"body_markdown":"my mistake, it was indeed `(event: ActionEvent) =&gt; inputController.handleFileSelection(event)`.","body":"my mistake, it was indeed <code>(event: ActionEvent) =&gt; inputController.handleFileSelection(event)</code>."},{"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":1,"creation_date":1439370218,"post_id":31935669,"comment_id":51828926,"body_markdown":"In that case `inputController.handleFileSelection(_)` or at worst `inputController.handleFileSelection(_: ActionEvent)` should work as well.","body":"In that case <code>inputController.handleFileSelection(_)</code> or at worst <code>inputController.handleFileSelection(_: ActionEvent)</code> should work as well."},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439387777,"post_id":31935669,"comment_id":51841718,"body_markdown":"inputController.handleFileSelection(_) works! Thanks! Could you add this to the answer if possible?","body":"inputController.handleFileSelection(_) works! Thanks! Could you add this to the answer if possible?"},{"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":0,"creation_date":1439389853,"post_id":31935669,"comment_id":51843424,"body_markdown":"I&#39;d expect `inputController.handleFileSelection _`, already in the answer, to work also. Does it?","body":"I&#39;d expect <code>inputController.handleFileSelection _</code>, already in the answer, to work also. Does it?"},{"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"score":0,"creation_date":1439392691,"post_id":31935669,"comment_id":51845577,"body_markdown":"Unfortunately, `inputController.handleFileSelection _` does not work.","body":"Unfortunately, <code>inputController.handleFileSelection _</code> does not work."},{"owner":{"account_id":1031543,"reputation":4922,"user_id":1039774,"accept_rate":25,"display_name":"Devabc"},"score":0,"creation_date":1453302064,"post_id":31935669,"comment_id":57542841,"body_markdown":"There are multiple types of Java method references. The cool thing is that they allow static typed method reflections, which unfortunately isn&#39;t possible with Scala. For example, in Java this is possible: `printMethodInfo(Product::getName); // Output: class=Product, property=name`. Whether it is &quot;needed&quot; in Scala, well, I need it at the moment.","body":"There are multiple types of Java method references. The cool thing is that they allow static typed method reflections, which unfortunately isn&#39;t possible with Scala. For example, in Java this is possible: <code>printMethodInfo(Product::getName); &#47;&#47; Output: class=Product, property=name</code>. Whether it is &quot;needed&quot; in Scala, well, I need it at the moment."},{"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"score":0,"creation_date":1482233176,"post_id":31935669,"comment_id":69681918,"body_markdown":"@Devabc It&#39;s possible, but in a different way: https://github.com/dwickern/scala-nameof.","body":"@Devabc It&#39;s possible, but in a different way: <a href=\"https://github.com/dwickern/scala-nameof\" rel=\"nofollow noreferrer\">github.com/dwickern/scala-nameof</a>."}],"tags":[],"owner":{"account_id":5645,"reputation":168060,"user_id":9204,"accept_rate":82,"display_name":"Alexey Romanov"},"comment_count":11,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1482233336,"creation_date":1439278010,"answer_id":31935669,"question_id":31927500,"body_markdown":"`inputController::handleFileSelection` is Java syntax, which isn&#39;t supported or needed in Scala because it already had a short syntax for lambdas like this: `inputController.handleFileSelection _` or `inputController.handleFileSelection(_)` (`inputController.handleFileSelection` can also work, depending on the context).\r\n\r\nHowever, in Java you can use lambdas and method references when any SAM (single abstract method) interface is expected, and `EventHandler` is just such an interface. In Scala before version 2.11 this isn&#39;t allowed at all, in 2.11 there is experimental support for using lambdas with SAM interfaces, which has to be enabled using `-Xexperimental` scalac flag, and starting from 2.12 it is fully supported and doesn&#39;t need to be enabled.","title":"Is it possible to use a Java 8 style method references in Scala?","body":"<p><code>inputController::handleFileSelection</code> is Java syntax, which isn't supported or needed in Scala because it already had a short syntax for lambdas like this: <code>inputController.handleFileSelection _</code> or <code>inputController.handleFileSelection(_)</code> (<code>inputController.handleFileSelection</code> can also work, depending on the context).</p>\n\n<p>However, in Java you can use lambdas and method references when any SAM (single abstract method) interface is expected, and <code>EventHandler</code> is just such an interface. In Scala before version 2.11 this isn't allowed at all, in 2.11 there is experimental support for using lambdas with SAM interfaces, which has to be enabled using <code>-Xexperimental</code> scalac flag, and starting from 2.12 it is fully supported and doesn't need to be enabled.</p>\n"},{"comments":[{"owner":{"account_id":1686452,"reputation":88,"user_id":1549644,"display_name":"Marcos Felipe"},"score":0,"creation_date":1663261842,"post_id":62346404,"comment_id":130203540,"body_markdown":"2 years late, but thanks!","body":"2 years late, but thanks!"}],"tags":[],"owner":{"account_id":16623578,"reputation":171,"user_id":12013214,"display_name":"WASDi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591972181,"creation_date":1591972181,"answer_id":62346404,"question_id":31927500,"body_markdown":"If you want a method reference that also takes the class instance as a parameter, for instance like `String::length` in Java, you can do `(_:String).length` which is equivalent to `(s:String) =&gt; s.length()`.\r\n\r\nThe types of these are in Java `Function&lt;String, Integer&gt;` and in Scala thus `String =&gt; Int`.","title":"Is it possible to use a Java 8 style method references in Scala?","body":"<p>If you want a method reference that also takes the class instance as a parameter, for instance like <code>String::length</code> in Java, you can do <code>(_:String).length</code> which is equivalent to <code>(s:String) =&gt; s.length()</code>.</p>\n\n<p>The types of these are in Java <code>Function&lt;String, Integer&gt;</code> and in Scala thus <code>String =&gt; Int</code>.</p>\n"},{"tags":[],"owner":{"account_id":6418040,"reputation":459,"user_id":4975592,"display_name":"Sang Yun Park"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674632686,"creation_date":1674632686,"answer_id":75230955,"question_id":31927500,"body_markdown":"\r\nCould you try\r\n\r\n    fileButton.setOnAction(() =&gt; inputController.handleFileSelection())\r\n\r\n","title":"Is it possible to use a Java 8 style method references in Scala?","body":"<p>Could you try</p>\n<pre><code>fileButton.setOnAction(() =&gt; inputController.handleFileSelection())\n</code></pre>\n"}],"owner":{"account_id":2049508,"reputation":2457,"user_id":2525548,"accept_rate":80,"display_name":"Mustafa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10207,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":31935669,"answer_count":4,"score":34,"last_activity_date":1674632686,"creation_date":1439234623,"question_id":31927500,"body_markdown":"I&#39;m developing a JavaFX8 application in Scala but I couldn&#39;t figure out how to pass a method reference to an event handler. To clarify, I&#39;m not using ScalaFX library but build my application directly on top of JavaFX.\r\n\r\nHere&#39;s the related code snippet.\r\n\r\n**InputController.java** (I wrote this test class in Java to isolate the issue to consume a method reference only)\r\n\r\n    public class InputController {\r\n        public void handleFileSelection(ActionEvent actionEvent){\r\n            //event handling code\r\n        }\r\n    \r\n        public InputController() {\r\n            //init controller\r\n        }\r\n    }\r\n\r\n**This works (Java)**\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    InputController inputController = new InputController();\r\n    fileButton.setOnAction(inputController::handleFileSelection);\r\n\r\n\r\n\r\n**This doesn&#39;t work (Scala)**\r\n&lt;!-- language: lang-scala --&gt;\r\n\r\n    val inputController = new InputController\r\n    fileButton.setOnAction(inputController::handleFileSelection)\r\n\r\n\r\nHere&#39;s the error message from the compiler (Scala 2.11.6).\r\n\r\n    Error:(125, 45) missing arguments for method handleFileSelection in class Main;\r\n    follow this method with &#39;_&#39; if you want to treat it as a partially applied function\r\n        fileButton.setOnAction(inputController::handleFileSelection)\r\n                                                ^\r\nIf I use Scala 2.12.0-M2 instead, I get a different error message.\r\n\r\n    Error:(125, 45) missing argument list for method handleFileSelection in class Main\r\n    Unapplied methods are only converted to functions when a function type is expected.\r\n    You can make this conversion explicit by writing `handleFileSelection _` or `handleFileSelection(_)` instead of `handleFileSelection`.\r\n        fileButton.setOnAction(inputController::handleFileSelection)\r\n                                                ^\r\n\r\nIs there a native way which Scala can leverage method references introduced in Java 8? I&#39;m aware of the implicit conversions approach to use a lambda expression but I want to know if there is a way to use a method reference similar to Java 8 without needing to use the lambda decleration.","title":"Is it possible to use a Java 8 style method references in Scala?","body":"<p>I'm developing a JavaFX8 application in Scala but I couldn't figure out how to pass a method reference to an event handler. To clarify, I'm not using ScalaFX library but build my application directly on top of JavaFX.</p>\n\n<p>Here's the related code snippet.</p>\n\n<p><strong>InputController.java</strong> (I wrote this test class in Java to isolate the issue to consume a method reference only)</p>\n\n<pre><code>public class InputController {\n    public void handleFileSelection(ActionEvent actionEvent){\n        //event handling code\n    }\n\n    public InputController() {\n        //init controller\n    }\n}\n</code></pre>\n\n<p><strong>This works (Java)</strong>\n</p>\n\n<pre><code>InputController inputController = new InputController();\nfileButton.setOnAction(inputController::handleFileSelection);\n</code></pre>\n\n<p><strong>This doesn't work (Scala)</strong>\n</p>\n\n<pre><code>val inputController = new InputController\nfileButton.setOnAction(inputController::handleFileSelection)\n</code></pre>\n\n<p>Here's the error message from the compiler (Scala 2.11.6).</p>\n\n<pre><code>Error:(125, 45) missing arguments for method handleFileSelection in class Main;\nfollow this method with '_' if you want to treat it as a partially applied function\n    fileButton.setOnAction(inputController::handleFileSelection)\n                                            ^\n</code></pre>\n\n<p>If I use Scala 2.12.0-M2 instead, I get a different error message.</p>\n\n<pre><code>Error:(125, 45) missing argument list for method handleFileSelection in class Main\nUnapplied methods are only converted to functions when a function type is expected.\nYou can make this conversion explicit by writing `handleFileSelection _` or `handleFileSelection(_)` instead of `handleFileSelection`.\n    fileButton.setOnAction(inputController::handleFileSelection)\n                                            ^\n</code></pre>\n\n<p>Is there a native way which Scala can leverage method references introduced in Java 8? I'm aware of the implicit conversions approach to use a lambda expression but I want to know if there is a way to use a method reference similar to Java 8 without needing to use the lambda decleration.</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1672393701,"post_id":74960141,"comment_id":132281123,"body_markdown":"does it work if you use the `text` method instead of `html`?","body":"does it work if you use the <code>text</code> method instead of <code>html</code>?"},{"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"score":0,"creation_date":1672393887,"post_id":74960141,"comment_id":132281166,"body_markdown":"No, with `text` it&#39;s the same result.","body":"No, with <code>text</code> it&#39;s the same result."},{"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"score":0,"creation_date":1672394356,"post_id":74960141,"comment_id":132281269,"body_markdown":"Addition: it also doesn&#39;t change the output whether I use output syntax HTML or XML (like  `document.outputSettings().syntax(Document.OutputSettings.Syntax.html);`).","body":"Addition: it also doesn&#39;t change the output whether I use output syntax HTML or XML (like  <code>document.outputSettings().syntax(Document.OutputSettings.Syn&zwnj;&#8203;tax.html);</code>)."}],"answers":[{"comments":[{"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"score":1,"creation_date":1672397280,"post_id":74960566,"comment_id":132281925,"body_markdown":"Works as intended. Thank you. Here&#39;s the documentation of `DataNode`: https://jsoup.org/apidocs/org/jsoup/nodes/DataNode.html","body":"Works as intended. Thank you. Here&#39;s the documentation of <code>DataNode</code>: <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/DataNode.html\" rel=\"nofollow noreferrer\">jsoup.org/apidocs/org/jsoup/nodes/DataNode.html</a>"}],"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672396609,"creation_date":1672396609,"answer_id":74960566,"question_id":74960141,"body_markdown":"Use `DataNode`\r\n\r\n    Element script = document.getElementsByTag(&quot;head&quot;).first().appendElement(&quot;script&quot;);\r\n    script.appendChild(new DataNode(&quot;var i=0;if(i&lt;5){alert(123);}&quot;));","title":"How to put JavaScript into script element without escaping?","body":"<p>Use <code>DataNode</code></p>\n<pre><code>Element script = document.getElementsByTag(&quot;head&quot;).first().appendElement(&quot;script&quot;);\nscript.appendChild(new DataNode(&quot;var i=0;if(i&lt;5){alert(123);}&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":51278,"reputation":10472,"user_id":153184,"display_name":"Jonathan Hedley"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674359336,"creation_date":1674359336,"answer_id":75198062,"question_id":74960141,"body_markdown":"If you use a recent version of jsoup, just calling the [`element.text(...)`][1] method will work. Per the API documentation, that method tests if the input should be treated as text or as data, depending on the containing element type:\r\n\r\n```java\r\nDocument doc = new Document(&quot;https://example.com/&quot;);\r\nElement script = doc.head().appendElement(&quot;script&quot;);\r\nscript.text(&quot;var i=0;if(i&lt;5){alert(123);}&quot;);\r\nSystem.out.println(doc.html());\r\n```\r\n\r\nproduces:\r\n\r\n```html\r\n&lt;html&gt;\r\n &lt;head&gt;\r\n  &lt;script&gt;var i=0;if(i&lt;5){alert(123);}&lt;/script&gt;\r\n &lt;/head&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nThis was implemented in this [commit][2] and has been in jsoup since 1.14.1 (we&#39;re on 1.15.3 as of writing).\r\n\r\n\r\n  [1]: https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#text(java.lang.String)\r\n  [2]: https://github.com/jhy/jsoup/commit/724b2c5bf576cbd548738756bfe5f7a7b90c6239","title":"How to put JavaScript into script element without escaping?","body":"<p>If you use a recent version of jsoup, just calling the <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#text(java.lang.String)\" rel=\"nofollow noreferrer\"><code>element.text(...)</code></a> method will work. Per the API documentation, that method tests if the input should be treated as text or as data, depending on the containing element type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document doc = new Document(&quot;https://example.com/&quot;);\nElement script = doc.head().appendElement(&quot;script&quot;);\nscript.text(&quot;var i=0;if(i&lt;5){alert(123);}&quot;);\nSystem.out.println(doc.html());\n</code></pre>\n<p>produces:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n &lt;head&gt;\n  &lt;script&gt;var i=0;if(i&lt;5){alert(123);}&lt;/script&gt;\n &lt;/head&gt;\n&lt;/html&gt;\n</code></pre>\n<p>This was implemented in this <a href=\"https://github.com/jhy/jsoup/commit/724b2c5bf576cbd548738756bfe5f7a7b90c6239\" rel=\"nofollow noreferrer\">commit</a> and has been in jsoup since 1.14.1 (we're on 1.15.3 as of writing).</p>\n"},{"tags":[],"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631892,"creation_date":1674631892,"answer_id":75230834,"question_id":74960141,"body_markdown":"Just to be sure that the content of every script element is unescaped, I execute a cleanup just before exporting the Document. It transfers text of a script element into a DataNode:\r\n\r\n\t\tElements scriptElements = document.getElementsByTag(&quot;script&quot;);\r\n\t\tif (scriptElements != null) {\r\n\t\t\tIterator&lt;Element&gt; scriptIterator = scriptElements.iterator();\r\n\t\t\twhile (scriptIterator.hasNext()) {\r\n\t\t\t\tElement script = scriptIterator.next();\r\n\t\t\t\tString data = script.data();\r\n\t\t\t\tString text = script.text();\r\n\t\t\t\tscript.text(&quot;&quot;);\r\n\t\t\t\tscript.appendChild(new DataNode((text != null ? text : &quot;&quot;) + (text != null &amp;&amp; data != null ? &quot; &quot; : &quot;&quot;)\r\n\t\t\t\t\t\t+ (data != null ? data : &quot;&quot;)));\r\n\t\t\t}\r\n\t\t}\r\n\r\nThis cleanup in the end is necessary because in the system there is a plugin mechanism for the extension of JSoup documents and I can not guarantee that every plugin calls the right methods. In fact some of the plugins actually just copy html code blocks/templates (with some scripts / styles mixedin) textually into the JSoup document.","title":"How to put JavaScript into script element without escaping?","body":"<p>Just to be sure that the content of every script element is unescaped, I execute a cleanup just before exporting the Document. It transfers text of a script element into a DataNode:</p>\n<pre><code>    Elements scriptElements = document.getElementsByTag(&quot;script&quot;);\n    if (scriptElements != null) {\n        Iterator&lt;Element&gt; scriptIterator = scriptElements.iterator();\n        while (scriptIterator.hasNext()) {\n            Element script = scriptIterator.next();\n            String data = script.data();\n            String text = script.text();\n            script.text(&quot;&quot;);\n            script.appendChild(new DataNode((text != null ? text : &quot;&quot;) + (text != null &amp;&amp; data != null ? &quot; &quot; : &quot;&quot;)\n                    + (data != null ? data : &quot;&quot;)));\n        }\n    }\n</code></pre>\n<p>This cleanup in the end is necessary because in the system there is a plugin mechanism for the extension of JSoup documents and I can not guarantee that every plugin calls the right methods. In fact some of the plugins actually just copy html code blocks/templates (with some scripts / styles mixedin) textually into the JSoup document.</p>\n"}],"owner":{"account_id":14284626,"reputation":695,"user_id":10318272,"display_name":"S. Doe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74960566,"answer_count":3,"score":2,"last_activity_date":1674631892,"creation_date":1672393519,"question_id":74960141,"body_markdown":"I&#39;d like to generate an HTML document with JSoup (version 1.15.3). The HTML document should contain script with a comparison.\r\n\r\nThis is the code to create a script element and to fill it with some JavaScript:\r\n\r\n```java\r\nElement script = document.getElementsByTag(&quot;head&quot;).first().appendElement(&quot;script&quot;);\r\nscript.html(&quot;var i=0;if(i&lt;5){alert(123);}&quot;);\r\n```\r\n\r\nThe generated HTML code contains this:\r\n\r\n```html\r\n&lt;script&gt;var i=0;if(i&amp;lt;5){alert(123);}&lt;/script&gt;\r\n```\r\n\r\nIn most other cases I expect that JSoup escapes characters like `&gt;` and `&lt;`, but in a `script` element these characters are intended as-is and I do not want them to get replaced by `&amp;gt;` or `&amp;lt;`.\r\n\r\nHow can I give JSoup the hint not to escape content of a script element?","title":"How to put JavaScript into script element without escaping?","body":"<p>I'd like to generate an HTML document with JSoup (version 1.15.3). The HTML document should contain script with a comparison.</p>\n<p>This is the code to create a script element and to fill it with some JavaScript:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Element script = document.getElementsByTag(&quot;head&quot;).first().appendElement(&quot;script&quot;);\nscript.html(&quot;var i=0;if(i&lt;5){alert(123);}&quot;);\n</code></pre>\n<p>The generated HTML code contains this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script&gt;var i=0;if(i&amp;lt;5){alert(123);}&lt;/script&gt;\n</code></pre>\n<p>In most other cases I expect that JSoup escapes characters like <code>&gt;</code> and <code>&lt;</code>, but in a <code>script</code> element these characters are intended as-is and I do not want them to get replaced by <code>&amp;gt;</code> or <code>&amp;lt;</code>.</p>\n<p>How can I give JSoup the hint not to escape content of a script element?</p>\n"},{"tags":["java","eclipse","gradle"],"answers":[{"tags":[],"owner":{"account_id":10451032,"reputation":67,"user_id":7704658,"display_name":"Ximo Dante"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631853,"creation_date":1674567233,"answer_id":75222235,"question_id":72557852,"body_markdown":"Thanks for your suggestion,\r\nI have modified your code and it seems to work in jdk 17\r\n\r\n    eclipse {\r\n        classpath {\r\n            file {\r\n                whenMerged {\r\n                    def jre = entries.find { it.path.contains &#39;org.eclipse.jdt.launching.JRE_CONTAINER&#39; }\r\n                    jre.entryAttributes[&#39;module&#39;] = &#39;true&#39;\r\n                    jre.entryAttributes[&#39;limit-modules&#39;] = &#39;java.se,jdk.accessibility,jdk.dynalink,jdk.httpserver,jdk.jartool,jdk.javadoc,jdk.jconsole,jdk.jshell,jdk.jsobject,jdk.management.jfr,jdk.net,jdk.nio.mapmode,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,java.smartcardio&#39;\r\n                    jre.entryAttributes[&#39;add-modules&#39;] = &#39;java.smartcardio&#39;           //--limit-modules java.se --add-modules java.smartcardio\r\n                  }\r\n              }\r\n           }\r\n       }\r\n\r\n","title":"Add library to build path with Gradle","body":"<p>Thanks for your suggestion,\nI have modified your code and it seems to work in jdk 17</p>\n<pre><code>eclipse {\n    classpath {\n        file {\n            whenMerged {\n                def jre = entries.find { it.path.contains 'org.eclipse.jdt.launching.JRE_CONTAINER' }\n                jre.entryAttributes['module'] = 'true'\n                jre.entryAttributes['limit-modules'] = 'java.se,jdk.accessibility,jdk.dynalink,jdk.httpserver,jdk.jartool,jdk.javadoc,jdk.jconsole,jdk.jshell,jdk.jsobject,jdk.management.jfr,jdk.net,jdk.nio.mapmode,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,java.smartcardio'\n                jre.entryAttributes['add-modules'] = 'java.smartcardio'           //--limit-modules java.se --add-modules java.smartcardio\n              }\n          }\n       }\n   }\n</code></pre>\n"}],"owner":{"account_id":17610467,"reputation":1150,"user_id":12778634,"display_name":"AndreasInfo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674631853,"creation_date":1654766809,"question_id":72557852,"body_markdown":"I have added `java.smartcardio` library via `right click &gt; Build Path &gt; Configure Build Path &gt; Module Dependencies` manually to my Eclipse project.\r\n\r\nAnyway, after `right click &gt; Gradle &gt; Refresh Gradle Project` the library gets removed again from build path.\r\n\r\n.classpath when working:\r\n```\r\n...\r\n&lt;classpathentry ...&gt;\r\n  &lt;attributes&gt;\r\n    &lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\r\n    &lt;attribute name=&quot;limit-modules&quot; value=&quot;java.se,jdk.accessibility,jdk.httpserver,jdk.jartool,jdk.javadoc,jdk.jconsole,jdk.jshell,jdk.jsobject,jdk.management.jfr,jdk.naming.ldap,jdk.net,jdk.scripting.nashorn,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,java.smartcardio&quot;/&gt;\r\n  &lt;/attributes&gt;\r\n&lt;/classpathentry&gt;\r\n...\r\n```\r\n.classpath after refreshing Gradle:\r\n```\r\n...\r\n&lt;classpathentry ...&gt;\r\n&lt;/classpathentry&gt;\r\n...\r\n```\r\nSetting limit-modules manually in project.gradle like\r\n```\r\neclipse {\r\n\tclasspath {\r\n      \tfile {\r\n        \twhenMerged {\r\n            \tdef jre = entries.find { it.path.contains &#39;org.eclipse.jdt.launching.JRE_CONTAINER&#39; }\r\n                jre.entryAttributes[&#39;module&#39;] = &#39;true&#39;\r\n                jre.entryAttributes[&#39;limit-modules&#39;] = &#39;java.se,java.smartcardio&#39;  \t\t\t\r\n        \t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\ndid not work, because strangly every developer has limit-modules filled differently when added the library manually.\r\n\r\nAny hint how to solve that permanently?\r\n\r\nEdit: I found this thread https://github.com/eclipse/buildship/issues/760, which is describing the same issue but did not solve the problem for me.","title":"Add library to build path with Gradle","body":"<p>I have added <code>java.smartcardio</code> library via <code>right click &gt; Build Path &gt; Configure Build Path &gt; Module Dependencies</code> manually to my Eclipse project.</p>\n<p>Anyway, after <code>right click &gt; Gradle &gt; Refresh Gradle Project</code> the library gets removed again from build path.</p>\n<p>.classpath when working:</p>\n<pre><code>...\n&lt;classpathentry ...&gt;\n  &lt;attributes&gt;\n    &lt;attribute name=&quot;module&quot; value=&quot;true&quot;/&gt;\n    &lt;attribute name=&quot;limit-modules&quot; value=&quot;java.se,jdk.accessibility,jdk.httpserver,jdk.jartool,jdk.javadoc,jdk.jconsole,jdk.jshell,jdk.jsobject,jdk.management.jfr,jdk.naming.ldap,jdk.net,jdk.scripting.nashorn,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,java.smartcardio&quot;/&gt;\n  &lt;/attributes&gt;\n&lt;/classpathentry&gt;\n...\n</code></pre>\n<p>.classpath after refreshing Gradle:</p>\n<pre><code>...\n&lt;classpathentry ...&gt;\n&lt;/classpathentry&gt;\n...\n</code></pre>\n<p>Setting limit-modules manually in project.gradle like</p>\n<pre><code>eclipse {\n    classpath {\n        file {\n            whenMerged {\n                def jre = entries.find { it.path.contains 'org.eclipse.jdt.launching.JRE_CONTAINER' }\n                jre.entryAttributes['module'] = 'true'\n                jre.entryAttributes['limit-modules'] = 'java.se,java.smartcardio'           \n            }\n        }\n    }\n}\n</code></pre>\n<p>did not work, because strangly every developer has limit-modules filled differently when added the library manually.</p>\n<p>Any hint how to solve that permanently?</p>\n<p>Edit: I found this thread <a href=\"https://github.com/eclipse/buildship/issues/760\" rel=\"nofollow noreferrer\">https://github.com/eclipse/buildship/issues/760</a>, which is describing the same issue but did not solve the problem for me.</p>\n"},{"tags":["java","web-services","soap","cxf","stax"],"answers":[{"comments":[{"owner":{"account_id":1468369,"reputation":159,"user_id":1392873,"display_name":"mandroid"},"score":4,"creation_date":1611268832,"post_id":53990176,"comment_id":116404266,"body_markdown":"Thanks for the link to the apache jira [page](https://issues.apache.org/jira/browse/CXF-7836). I was able to resolve the issue by excluding the **woodstox-core-asl** which is the old version from **cxf-rt-ws-security** dependency.","body":"Thanks for the link to the apache jira <a href=\"https://issues.apache.org/jira/browse/CXF-7836\" rel=\"nofollow noreferrer\">page</a>. I was able to resolve the issue by excluding the <b>woodstox-core-asl</b> which is the old version from <b>cxf-rt-ws-security</b> dependency."}],"tags":[],"owner":{"account_id":6193930,"reputation":2587,"user_id":4825845,"display_name":"Juan Moreno"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1546279182,"creation_date":1546279182,"answer_id":53990176,"question_id":53990175,"body_markdown":"After research in deeply, I found the following [JIRA][1] that mentions a problem with Stax2 version. BTW the ticket said that it resolves with the version that I&#39;m using. \r\n\r\nIn the end, I fixed upgrading to woodstox-core-5.2.0. In fact, the library mentions a similar problem that was solved in that version. Details [here][2]. \r\n\r\nMy current `mvn dependency:tree` is:\r\n\r\n    [INFO] +- org.springframework.boot:spring-boot-starter:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework:spring-context:jar:5.1.3.RELEASE:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.3:compile\r\n    [INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.3:compile\r\n    [INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.11.1:compile\r\n    [INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.11.1:compile\r\n    [INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.25:compile\r\n    [INFO] |  +- javax.annotation:javax.annotation-api:jar:1.3.2:compile\r\n    [INFO] |  +- org.springframework:spring-core:jar:5.1.3.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework:spring-jcl:jar:5.1.3.RELEASE:compile\r\n    [INFO] |  \\- org.yaml:snakeyaml:jar:1.23:runtime\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.7:compile\r\n    [INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.0:compile\r\n    [INFO] |  |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.9.7:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.9.7:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.9.7:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.9.7:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.1.1.RELEASE:compile\r\n    [INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:9.0.13:compile\r\n    [INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.13:compile\r\n    [INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.13:compile\r\n    [INFO] |  +- org.hibernate.validator:hibernate-validator:jar:6.0.13.Final:compile\r\n    [INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.3.2.Final:compile\r\n    [INFO] |  |  \\- com.fasterxml:classmate:jar:1.4.0:compile\r\n    [INFO] |  +- org.springframework:spring-web:jar:5.1.3.RELEASE:compile\r\n    [INFO] |  |  \\- org.springframework:spring-beans:jar:5.1.3.RELEASE:compile\r\n    [INFO] |  \\- org.springframework:spring-webmvc:jar:5.1.3.RELEASE:compile\r\n    [INFO] |     +- org.springframework:spring-aop:jar:5.1.3.RELEASE:compile\r\n    [INFO] |     \\- org.springframework:spring-expression:jar:5.1.3.RELEASE:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-autoconfigure:jar:2.1.1.RELEASE:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.1.1.RELEASE:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.1.1.RELEASE:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.1.1.RELEASE:test\r\n    [INFO] |  +- com.jayway.jsonpath:json-path:jar:2.4.0:test\r\n    [INFO] |  |  \\- net.minidev:json-smart:jar:2.3:test\r\n    [INFO] |  |     \\- net.minidev:accessors-smart:jar:1.2:test\r\n    [INFO] |  +- junit:junit:jar:4.12:test\r\n    [INFO] |  +- org.assertj:assertj-core:jar:3.11.1:test\r\n    [INFO] |  +- org.mockito:mockito-core:jar:2.23.4:test\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.9.5:test\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.9.5:test\r\n    [INFO] |  |  \\- org.objenesis:objenesis:jar:2.6:test\r\n    [INFO] |  +- org.hamcrest:hamcrest-core:jar:1.3:test\r\n    [INFO] |  +- org.hamcrest:hamcrest-library:jar:1.3:test\r\n    [INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.0:test\r\n    [INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n    [INFO] |  +- org.springframework:spring-test:jar:5.1.3.RELEASE:test\r\n    [INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.6.2:test\r\n    [INFO] +- org.apache.cxf:cxf-spring-boot-starter-jaxws:jar:3.2.7:compile\r\n    [INFO] |  +- org.apache.cxf:cxf-spring-boot-autoconfigure:jar:3.2.7:compile\r\n    [INFO] |  +- org.apache.cxf:cxf-rt-frontend-jaxws:jar:3.2.7:compile\r\n    [INFO] |  |  +- xml-resolver:xml-resolver:jar:1.2:compile\r\n    [INFO] |  |  +- org.ow2.asm:asm:jar:6.2:compile\r\n    [INFO] |  |  +- org.apache.cxf:cxf-rt-bindings-xml:jar:3.2.7:compile\r\n    [INFO] |  |  +- org.apache.cxf:cxf-rt-frontend-simple:jar:3.2.7:compile\r\n    [INFO] |  |  \\- org.apache.cxf:cxf-rt-ws-addr:jar:3.2.7:compile\r\n    [INFO] |  |     \\- org.apache.cxf:cxf-rt-ws-policy:jar:3.2.7:compile\r\n    [INFO] |  \\- javax.validation:validation-api:jar:2.0.1.Final:compile\r\n    [INFO] +- com.fasterxml.woodstox:woodstox-core:jar:5.2.0:compile\r\n    [INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.1:compile\r\n    [INFO] +- org.apache.cxf:cxf-rt-transports-http:jar:3.2.7:compile\r\n    [INFO] |  \\- org.apache.cxf:cxf-core:jar:3.2.7:compile\r\n    [INFO] |     \\- org.apache.ws.xmlschema:xmlschema-core:jar:2.2.3:compile\r\n    [INFO] +- org.apache.cxf:cxf-rt-ws-security:jar:3.2.7:compile\r\n    [INFO] |  +- org.apache.cxf:cxf-rt-bindings-soap:jar:3.2.7:compile\r\n    [INFO] |  |  +- org.apache.cxf:cxf-rt-wsdl:jar:3.2.7:compile\r\n    [INFO] |  |  |  \\- wsdl4j:wsdl4j:jar:1.6.3:compile\r\n    [INFO] |  |  \\- org.apache.cxf:cxf-rt-databinding-jaxb:jar:3.2.7:compile\r\n    [INFO] |  +- org.apache.cxf:cxf-rt-security-saml:jar:3.2.7:compile\r\n    [INFO] |  |  \\- org.apache.cxf:cxf-rt-security:jar:3.2.7:compile\r\n    [INFO] |  +- net.sf.ehcache:ehcache:jar:2.10.6:compile\r\n    [INFO] |  +- org.apache.wss4j:wss4j-ws-security-dom:jar:2.2.2:compile\r\n    [INFO] |  |  \\- org.apache.wss4j:wss4j-ws-security-common:jar:2.2.2:compile\r\n    [INFO] |  |     +- org.apache.santuario:xmlsec:jar:2.1.2:compile\r\n    [INFO] |  |     |  \\- commons-codec:commons-codec:jar:1.11:compile\r\n    [INFO] |  |     +- org.opensaml:opensaml-saml-impl:jar:3.3.0:compile\r\n    [INFO] |  |     |  +- org.opensaml:opensaml-profile-api:jar:3.3.0:compile\r\n    [INFO] |  |     |  |  \\- org.opensaml:opensaml-core:jar:3.3.0:compile\r\n    [INFO] |  |     |  |     \\- io.dropwizard.metrics:metrics-core:jar:4.0.3:compile\r\n    [INFO] |  |     |  +- org.opensaml:opensaml-saml-api:jar:3.3.0:compile\r\n    [INFO] |  |     |  |  +- org.opensaml:opensaml-xmlsec-api:jar:3.3.0:compile\r\n    [INFO] |  |     |  |  \\- org.opensaml:opensaml-soap-api:jar:3.3.0:compile\r\n    [INFO] |  |     |  +- org.opensaml:opensaml-security-impl:jar:3.3.0:compile\r\n    [INFO] |  |     |  |  \\- org.opensaml:opensaml-security-api:jar:3.3.0:compile\r\n    [INFO] |  |     |  |     +- org.cryptacular:cryptacular:jar:1.1.1:compile\r\n    [INFO] |  |     |  |     \\- org.bouncycastle:bcprov-jdk15on:jar:1.54:compile\r\n    [INFO] |  |     |  +- org.opensaml:opensaml-xmlsec-impl:jar:3.3.0:compile\r\n    [INFO] |  |     |  \\- net.shibboleth.utilities:java-support:jar:7.3.0:compile\r\n    [INFO] |  |     |     +- com.google.guava:guava:jar:19.0:compile\r\n    [INFO] |  |     |     \\- joda-time:joda-time:jar:2.10.1:compile\r\n    [INFO] |  |     +- org.opensaml:opensaml-xacml-impl:jar:3.3.0:compile\r\n    [INFO] |  |     |  \\- org.opensaml:opensaml-xacml-api:jar:3.3.0:compile\r\n    [INFO] |  |     +- org.opensaml:opensaml-xacml-saml-impl:jar:3.3.0:compile\r\n    [INFO] |  |     |  \\- org.opensaml:opensaml-xacml-saml-api:jar:3.3.0:compile\r\n    [INFO] |  |     +- org.jasypt:jasypt:jar:1.9.2:compile\r\n    [INFO] |  |     \\- org.apache.geronimo.javamail:geronimo-javamail_1.4_mail:jar:1.8.4:compile\r\n    [INFO] |  +- org.apache.wss4j:wss4j-policy:jar:2.2.2:compile\r\n    [INFO] |  |  \\- org.apache.neethi:neethi:jar:3.1.1:compile\r\n    [INFO] |  |     \\- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\r\n    [INFO] |  |        \\- javax.xml.stream:stax-api:jar:1.0-2:compile\r\n    [INFO] |  +- org.apache.wss4j:wss4j-ws-security-stax:jar:2.2.2:compile\r\n    [INFO] |  |  \\- org.apache.wss4j:wss4j-bindings:jar:2.2.2:compile\r\n    [INFO] |  \\- org.apache.wss4j:wss4j-ws-security-policy-stax:jar:2.2.2:compile\r\n    [INFO] +- org.apache.cxf:cxf-rt-features-logging:jar:3.2.7:compile\r\n    [INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.25:compile\r\n    [INFO] +- org.apache.commons:commons-lang3:jar:3.8.1:compile\r\n    [INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.4.0-b180830.0438:compile\r\n    [INFO] |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\r\n    [INFO] |  +- org.glassfish.jaxb:txw2:jar:2.4.0-b180830.0438:compile\r\n    [INFO] |  +- com.sun.istack:istack-commons-runtime:jar:3.0.7:compile\r\n    [INFO] |  +- org.jvnet.staxex:stax-ex:jar:1.8:compile\r\n    [INFO] |  +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.15:compile\r\n    [INFO] |  \\- javax.activation:javax.activation-api:jar:1.2.0:compile\r\n    [INFO] +- com.sun.xml.ws:jaxws-rt:pom:2.3.1:compile\r\n    [INFO] |  +- javax.xml.ws:jaxws-api:jar:2.3.1:compile\r\n    [INFO] |  +- javax.xml.soap:javax.xml.soap-api:jar:1.4.0:compile\r\n    [INFO] |  +- javax.jws:javax.jws-api:jar:1.1:compile\r\n    [INFO] |  +- com.sun.xml.ws:policy:jar:2.7.5:compile\r\n    [INFO] |  |  \\- com.sun.activation:javax.activation:jar:1.2.0:compile\r\n    [INFO] |  +- org.glassfish.gmbal:gmbal-api-only:jar:3.1.0-b001:compile\r\n    [INFO] |  |  \\- org.glassfish.external:management-api:jar:3.0.0-b012:compile\r\n    [INFO] |  +- com.sun.xml.stream.buffer:streambuffer:jar:1.5.6:compile\r\n    [INFO] |  +- org.jvnet.mimepull:mimepull:jar:1.9.10:compile\r\n    [INFO] |  +- org.glassfish.ha:ha-api:jar:3.1.9:compile\r\n    [INFO] |  \\- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.0:compile\r\n    [INFO] \\- com.sun.xml.ws:rt:jar:2.3.1:compile\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/CXF-7836\r\n  [2]: https://github.com/FasterXML/woodstox/issues/46","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>After research in deeply, I found the following <a href=\"https://issues.apache.org/jira/browse/CXF-7836\" rel=\"noreferrer\">JIRA</a> that mentions a problem with Stax2 version. BTW the ticket said that it resolves with the version that I'm using. </p>\n\n<p>In the end, I fixed upgrading to woodstox-core-5.2.0. In fact, the library mentions a similar problem that was solved in that version. Details <a href=\"https://github.com/FasterXML/woodstox/issues/46\" rel=\"noreferrer\">here</a>. </p>\n\n<p>My current <code>mvn dependency:tree</code> is:</p>\n\n<pre><code>[INFO] +- org.springframework.boot:spring-boot-starter:jar:2.1.1.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot:jar:2.1.1.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-context:jar:5.1.3.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-logging:jar:2.1.1.RELEASE:compile\n[INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.2.3:compile\n[INFO] |  |  |  \\- ch.qos.logback:logback-core:jar:1.2.3:compile\n[INFO] |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.11.1:compile\n[INFO] |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.11.1:compile\n[INFO] |  |  \\- org.slf4j:jul-to-slf4j:jar:1.7.25:compile\n[INFO] |  +- javax.annotation:javax.annotation-api:jar:1.3.2:compile\n[INFO] |  +- org.springframework:spring-core:jar:5.1.3.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:5.1.3.RELEASE:compile\n[INFO] |  \\- org.yaml:snakeyaml:jar:1.23:runtime\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:2.1.1.RELEASE:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:2.1.1.RELEASE:compile\n[INFO] |  |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.9.7:compile\n[INFO] |  |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.9.0:compile\n[INFO] |  |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.9.7:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.9.7:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.9.7:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.9.7:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:2.1.1.RELEASE:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:9.0.13:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:9.0.13:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:9.0.13:compile\n[INFO] |  +- org.hibernate.validator:hibernate-validator:jar:6.0.13.Final:compile\n[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.3.2.Final:compile\n[INFO] |  |  \\- com.fasterxml:classmate:jar:1.4.0:compile\n[INFO] |  +- org.springframework:spring-web:jar:5.1.3.RELEASE:compile\n[INFO] |  |  \\- org.springframework:spring-beans:jar:5.1.3.RELEASE:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:5.1.3.RELEASE:compile\n[INFO] |     +- org.springframework:spring-aop:jar:5.1.3.RELEASE:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:5.1.3.RELEASE:compile\n[INFO] +- org.springframework.boot:spring-boot-autoconfigure:jar:2.1.1.RELEASE:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:2.1.1.RELEASE:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:2.1.1.RELEASE:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:2.1.1.RELEASE:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.4.0:test\n[INFO] |  |  \\- net.minidev:json-smart:jar:2.3:test\n[INFO] |  |     \\- net.minidev:accessors-smart:jar:1.2:test\n[INFO] |  +- junit:junit:jar:4.12:test\n[INFO] |  +- org.assertj:assertj-core:jar:3.11.1:test\n[INFO] |  +- org.mockito:mockito-core:jar:2.23.4:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.9.5:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.9.5:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:2.6:test\n[INFO] |  +- org.hamcrest:hamcrest-core:jar:1.3:test\n[INFO] |  +- org.hamcrest:hamcrest-library:jar:1.3:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.0:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-test:jar:5.1.3.RELEASE:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.6.2:test\n[INFO] +- org.apache.cxf:cxf-spring-boot-starter-jaxws:jar:3.2.7:compile\n[INFO] |  +- org.apache.cxf:cxf-spring-boot-autoconfigure:jar:3.2.7:compile\n[INFO] |  +- org.apache.cxf:cxf-rt-frontend-jaxws:jar:3.2.7:compile\n[INFO] |  |  +- xml-resolver:xml-resolver:jar:1.2:compile\n[INFO] |  |  +- org.ow2.asm:asm:jar:6.2:compile\n[INFO] |  |  +- org.apache.cxf:cxf-rt-bindings-xml:jar:3.2.7:compile\n[INFO] |  |  +- org.apache.cxf:cxf-rt-frontend-simple:jar:3.2.7:compile\n[INFO] |  |  \\- org.apache.cxf:cxf-rt-ws-addr:jar:3.2.7:compile\n[INFO] |  |     \\- org.apache.cxf:cxf-rt-ws-policy:jar:3.2.7:compile\n[INFO] |  \\- javax.validation:validation-api:jar:2.0.1.Final:compile\n[INFO] +- com.fasterxml.woodstox:woodstox-core:jar:5.2.0:compile\n[INFO] |  \\- org.codehaus.woodstox:stax2-api:jar:4.1:compile\n[INFO] +- org.apache.cxf:cxf-rt-transports-http:jar:3.2.7:compile\n[INFO] |  \\- org.apache.cxf:cxf-core:jar:3.2.7:compile\n[INFO] |     \\- org.apache.ws.xmlschema:xmlschema-core:jar:2.2.3:compile\n[INFO] +- org.apache.cxf:cxf-rt-ws-security:jar:3.2.7:compile\n[INFO] |  +- org.apache.cxf:cxf-rt-bindings-soap:jar:3.2.7:compile\n[INFO] |  |  +- org.apache.cxf:cxf-rt-wsdl:jar:3.2.7:compile\n[INFO] |  |  |  \\- wsdl4j:wsdl4j:jar:1.6.3:compile\n[INFO] |  |  \\- org.apache.cxf:cxf-rt-databinding-jaxb:jar:3.2.7:compile\n[INFO] |  +- org.apache.cxf:cxf-rt-security-saml:jar:3.2.7:compile\n[INFO] |  |  \\- org.apache.cxf:cxf-rt-security:jar:3.2.7:compile\n[INFO] |  +- net.sf.ehcache:ehcache:jar:2.10.6:compile\n[INFO] |  +- org.apache.wss4j:wss4j-ws-security-dom:jar:2.2.2:compile\n[INFO] |  |  \\- org.apache.wss4j:wss4j-ws-security-common:jar:2.2.2:compile\n[INFO] |  |     +- org.apache.santuario:xmlsec:jar:2.1.2:compile\n[INFO] |  |     |  \\- commons-codec:commons-codec:jar:1.11:compile\n[INFO] |  |     +- org.opensaml:opensaml-saml-impl:jar:3.3.0:compile\n[INFO] |  |     |  +- org.opensaml:opensaml-profile-api:jar:3.3.0:compile\n[INFO] |  |     |  |  \\- org.opensaml:opensaml-core:jar:3.3.0:compile\n[INFO] |  |     |  |     \\- io.dropwizard.metrics:metrics-core:jar:4.0.3:compile\n[INFO] |  |     |  +- org.opensaml:opensaml-saml-api:jar:3.3.0:compile\n[INFO] |  |     |  |  +- org.opensaml:opensaml-xmlsec-api:jar:3.3.0:compile\n[INFO] |  |     |  |  \\- org.opensaml:opensaml-soap-api:jar:3.3.0:compile\n[INFO] |  |     |  +- org.opensaml:opensaml-security-impl:jar:3.3.0:compile\n[INFO] |  |     |  |  \\- org.opensaml:opensaml-security-api:jar:3.3.0:compile\n[INFO] |  |     |  |     +- org.cryptacular:cryptacular:jar:1.1.1:compile\n[INFO] |  |     |  |     \\- org.bouncycastle:bcprov-jdk15on:jar:1.54:compile\n[INFO] |  |     |  +- org.opensaml:opensaml-xmlsec-impl:jar:3.3.0:compile\n[INFO] |  |     |  \\- net.shibboleth.utilities:java-support:jar:7.3.0:compile\n[INFO] |  |     |     +- com.google.guava:guava:jar:19.0:compile\n[INFO] |  |     |     \\- joda-time:joda-time:jar:2.10.1:compile\n[INFO] |  |     +- org.opensaml:opensaml-xacml-impl:jar:3.3.0:compile\n[INFO] |  |     |  \\- org.opensaml:opensaml-xacml-api:jar:3.3.0:compile\n[INFO] |  |     +- org.opensaml:opensaml-xacml-saml-impl:jar:3.3.0:compile\n[INFO] |  |     |  \\- org.opensaml:opensaml-xacml-saml-api:jar:3.3.0:compile\n[INFO] |  |     +- org.jasypt:jasypt:jar:1.9.2:compile\n[INFO] |  |     \\- org.apache.geronimo.javamail:geronimo-javamail_1.4_mail:jar:1.8.4:compile\n[INFO] |  +- org.apache.wss4j:wss4j-policy:jar:2.2.2:compile\n[INFO] |  |  \\- org.apache.neethi:neethi:jar:3.1.1:compile\n[INFO] |  |     \\- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\n[INFO] |  |        \\- javax.xml.stream:stax-api:jar:1.0-2:compile\n[INFO] |  +- org.apache.wss4j:wss4j-ws-security-stax:jar:2.2.2:compile\n[INFO] |  |  \\- org.apache.wss4j:wss4j-bindings:jar:2.2.2:compile\n[INFO] |  \\- org.apache.wss4j:wss4j-ws-security-policy-stax:jar:2.2.2:compile\n[INFO] +- org.apache.cxf:cxf-rt-features-logging:jar:3.2.7:compile\n[INFO] |  \\- org.slf4j:slf4j-api:jar:1.7.25:compile\n[INFO] +- org.apache.commons:commons-lang3:jar:3.8.1:compile\n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.4.0-b180830.0438:compile\n[INFO] |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.4.0-b180830.0438:compile\n[INFO] |  +- com.sun.istack:istack-commons-runtime:jar:3.0.7:compile\n[INFO] |  +- org.jvnet.staxex:stax-ex:jar:1.8:compile\n[INFO] |  +- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.15:compile\n[INFO] |  \\- javax.activation:javax.activation-api:jar:1.2.0:compile\n[INFO] +- com.sun.xml.ws:jaxws-rt:pom:2.3.1:compile\n[INFO] |  +- javax.xml.ws:jaxws-api:jar:2.3.1:compile\n[INFO] |  +- javax.xml.soap:javax.xml.soap-api:jar:1.4.0:compile\n[INFO] |  +- javax.jws:javax.jws-api:jar:1.1:compile\n[INFO] |  +- com.sun.xml.ws:policy:jar:2.7.5:compile\n[INFO] |  |  \\- com.sun.activation:javax.activation:jar:1.2.0:compile\n[INFO] |  +- org.glassfish.gmbal:gmbal-api-only:jar:3.1.0-b001:compile\n[INFO] |  |  \\- org.glassfish.external:management-api:jar:3.0.0-b012:compile\n[INFO] |  +- com.sun.xml.stream.buffer:streambuffer:jar:1.5.6:compile\n[INFO] |  +- org.jvnet.mimepull:mimepull:jar:1.9.10:compile\n[INFO] |  +- org.glassfish.ha:ha-api:jar:3.1.9:compile\n[INFO] |  \\- com.sun.xml.messaging.saaj:saaj-impl:jar:1.5.0:compile\n[INFO] \\- com.sun.xml.ws:rt:jar:2.3.1:compile\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2509854,"reputation":641,"user_id":2207837,"display_name":"Jaap"},"score":1,"creation_date":1611657597,"post_id":56934351,"comment_id":116515574,"body_markdown":"Actually I only ran into this issue when upgrading to CXF 3.3.6 so it&#39;s worth digging deeper into the dependency tree.","body":"Actually I only ran into this issue when upgrading to CXF 3.3.6 so it&#39;s worth digging deeper into the dependency tree."},{"owner":{"account_id":1084159,"reputation":624,"user_id":1080301,"accept_rate":78,"display_name":"Thomas"},"score":0,"creation_date":1623245021,"post_id":56934351,"comment_id":120023939,"body_markdown":"Can confirm for 3.3.7","body":"Can confirm for 3.3.7"}],"tags":[],"owner":{"account_id":4260366,"reputation":877,"user_id":3484881,"display_name":"tporeba"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562586780,"creation_date":1562586780,"answer_id":56934351,"question_id":53990175,"body_markdown":"I run into the same problem and upgrading to CXF 3.2.7 or later fixed the issue for me.","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>I run into the same problem and upgrading to CXF 3.2.7 or later fixed the issue for me.</p>\n"},{"tags":[],"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1567895582,"creation_date":1567895582,"answer_id":57837899,"question_id":53990175,"body_markdown":"I had a conflict on the `org.codehaus.woodstox:stax2-api` which was included in version 3.1.4 within `org.apache.cxf:cxf-core` and in version 4.1 within `com.sun.xml.ws:rt`. I solved the conflict by removing the library using Maven excludes:\r\n\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;&lt;!-- 4.1 conflicts with 3.1.4 from apache cxf-spring-boot-starter-jaxws--&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>I had a conflict on the <code>org.codehaus.woodstox:stax2-api</code> which was included in version 3.1.4 within <code>org.apache.cxf:cxf-core</code> and in version 4.1 within <code>com.sun.xml.ws:rt</code>. I solved the conflict by removing the library using Maven excludes:</p>\n\n<pre><code>        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\n                &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;&lt;!-- 4.1 conflicts with 3.1.4 from apache cxf-spring-boot-starter-jaxws--&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":113908,"reputation":3110,"user_id":299787,"display_name":"Redlab"},"score":4,"creation_date":1622634528,"post_id":64115465,"comment_id":119847105,"body_markdown":"This shouldn&#39;t never be done. You are adding twice the same artifact (only difference is the version) thus the classloader has access to both, but what is loaded is dependent on the classloader and it will usually only load 1 class of same signature. The fact that it behaves different for you and works/don&#39;t works is because the classloaders search for the class in different order.","body":"This shouldn&#39;t never be done. You are adding twice the same artifact (only difference is the version) thus the classloader has access to both, but what is loaded is dependent on the classloader and it will usually only load 1 class of same signature. The fact that it behaves different for you and works/don&#39;t works is because the classloaders search for the class in different order."},{"owner":{"account_id":10451032,"reputation":67,"user_id":7704658,"display_name":"Ximo Dante"},"score":0,"creation_date":1647461170,"post_id":64115465,"comment_id":126380231,"body_markdown":"Yes, Redlab, you are right, and this SHOULDN&#39;T NEVER BE ONE. But it worked temporarily until ,,,, the migration from &quot;javax&quot; libraries to &quot;jakarta&quot; ones. That was a nightmare for me.","body":"Yes, Redlab, you are right, and this SHOULDN&#39;T NEVER BE ONE. But it worked temporarily until ,,,, the migration from &quot;javax&quot; libraries to &quot;jakarta&quot; ones. That was a nightmare for me."}],"tags":[],"owner":{"account_id":10451032,"reputation":67,"user_id":7704658,"display_name":"Ximo Dante"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1674631617,"creation_date":1601367056,"answer_id":64115465,"question_id":53990175,"body_markdown":"This is the &quot;jar hell problem&quot;.\r\nYou should use the exclusions clause that was mentioned Julien Kronegg.\r\nSorry for the previous answer that I have deleted.","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>This is the &quot;jar hell problem&quot;.\nYou should use the exclusions clause that was mentioned Julien Kronegg.\nSorry for the previous answer that I have deleted.</p>\n"},{"tags":[],"owner":{"account_id":2509854,"reputation":641,"user_id":2207837,"display_name":"Jaap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611658816,"creation_date":1611658816,"answer_id":65900073,"question_id":53990175,"body_markdown":"The key is likely in your `mvn:dependency-tree` output. In my case:\r\n\r\n\r\n    [INFO]    \\- org.apache.cxf:cxf-rt-ws-security:jar:3.3.6:compile\r\n    [INFO]       +- org.apache.cxf:cxf-core:jar:3.3.6:compile\r\n    [INFO]       |  \\- com.fasterxml.woodstox:woodstox-core:jar:5.3.0:compile (version managed from 5.0.3)\r\n    [INFO]       |     \\- org.codehaus.woodstox:stax2-api:jar:4.2:compile\r\n    [INFO]       \\- org.apache.wss4j:wss4j-policy:jar:2.2.5:compile\r\n    [INFO]          \\- org.apache.neethi:neethi:jar:3.1.1:compile\r\n    [INFO]             \\- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\r\n    [INFO]                \\- (org.codehaus.woodstox:stax2-api:jar:3.1.4:compile - omitted for conflict with 4.2)\r\n\r\n`org.apache.cxf:cxf-rt-ws-security:jar:3.3.6` leads to both version 3.1.4 and version 4.2 of stax2-api because of the very much outdated `woodstox-core-asl` dependency (from 2014). I will have to see if I can get rid of this, because it leads to the NoSuchMethodFoundError described above.","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>The key is likely in your <code>mvn:dependency-tree</code> output. In my case:</p>\n<pre><code>[INFO]    \\- org.apache.cxf:cxf-rt-ws-security:jar:3.3.6:compile\n[INFO]       +- org.apache.cxf:cxf-core:jar:3.3.6:compile\n[INFO]       |  \\- com.fasterxml.woodstox:woodstox-core:jar:5.3.0:compile (version managed from 5.0.3)\n[INFO]       |     \\- org.codehaus.woodstox:stax2-api:jar:4.2:compile\n[INFO]       \\- org.apache.wss4j:wss4j-policy:jar:2.2.5:compile\n[INFO]          \\- org.apache.neethi:neethi:jar:3.1.1:compile\n[INFO]             \\- org.codehaus.woodstox:woodstox-core-asl:jar:4.4.1:compile\n[INFO]                \\- (org.codehaus.woodstox:stax2-api:jar:3.1.4:compile - omitted for conflict with 4.2)\n</code></pre>\n<p><code>org.apache.cxf:cxf-rt-ws-security:jar:3.3.6</code> leads to both version 3.1.4 and version 4.2 of stax2-api because of the very much outdated <code>woodstox-core-asl</code> dependency (from 2014). I will have to see if I can get rid of this, because it leads to the NoSuchMethodFoundError described above.</p>\n"},{"tags":[],"owner":{"account_id":24955745,"reputation":1,"user_id":18820143,"display_name":"Fatma Kanber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672305454,"creation_date":1672305454,"answer_id":74949262,"question_id":53990175,"body_markdown":"the problem is in new version of stax2-api new methods added. you can solve the problem by adding new version of the stax2-api. in my case adding \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\r\n            &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nsolved the problem.","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>the problem is in new version of stax2-api new methods added. you can solve the problem by adding new version of the stax2-api. in my case adding</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.woodstox&lt;/groupId&gt;\n        &lt;artifactId&gt;stax2-api&lt;/artifactId&gt;\n        &lt;version&gt;4.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>solved the problem.</p>\n"}],"owner":{"account_id":6193930,"reputation":2587,"user_id":4825845,"display_name":"Juan Moreno"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25802,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":53990176,"answer_count":6,"score":16,"last_activity_date":1674631617,"creation_date":1546279182,"question_id":53990175,"body_markdown":"I&#39;m using Java 11, Spring Boot 2.1.1 and Apache CXF 3.2.7 to expose a SOAP web service that imports an XSD schema. In the WSDL it shows like:\r\n\r\n    &lt;wsdl:import location=&quot;http://localhost:9000/endpoint/ws?wsdl=WS_endpointSoapPort.wsdl&quot; namespace=&quot;http://test.com&quot;&gt; &lt;/wsdl:import&gt;\r\n\r\n When I send a query it fails with the following stack:\r\n\r\n    2018-12-31 12:05:54,908 ERROR se.[Tomcat].[localhost].[/].[CXFServlet]: 175 - Servlet.service() for servlet [CXFServlet] in context with path [] threw exception [Servlet execution threw an exception] with root cause\r\n    java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;\r\n\r\nAny thoughts?","title":"CXFServlet throws java.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;","body":"<p>I'm using Java 11, Spring Boot 2.1.1 and Apache CXF 3.2.7 to expose a SOAP web service that imports an XSD schema. In the WSDL it shows like:</p>\n\n<pre><code>&lt;wsdl:import location=\"http://localhost:9000/endpoint/ws?wsdl=WS_endpointSoapPort.wsdl\" namespace=\"http://test.com\"&gt; &lt;/wsdl:import&gt;\n</code></pre>\n\n<p>When I send a query it fails with the following stack:</p>\n\n<pre><code>2018-12-31 12:05:54,908 ERROR se.[Tomcat].[localhost].[/].[CXFServlet]: 175 - Servlet.service() for servlet [CXFServlet] in context with path [] threw exception [Servlet execution threw an exception] with root cause\njava.lang.NoSuchMethodError: org.codehaus.stax2.ri.EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator;\n</code></pre>\n\n<p>Any thoughts?</p>\n"},{"tags":["java","maven","compiler-errors"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1484833526,"post_id":41743260,"comment_id":70679330,"body_markdown":"look at the colouring of your code. You forgot to put `&quot;` after `p.getProperty(&quot;url`","body":"look at the colouring of your code. You forgot to put <code>&quot;</code> after <code>p.getProperty(&quot;url</code>"},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1484834499,"post_id":41743260,"comment_id":70680019,"body_markdown":"The Properties::getProperty method returns a String, no need to call the toString() method.","body":"The Properties::getProperty method returns a String, no need to call the toString() method."},{"owner":{"account_id":7246662,"reputation":131,"user_id":5528335,"accept_rate":0,"display_name":"Alex"},"score":0,"creation_date":1484835497,"post_id":41743260,"comment_id":70680708,"body_markdown":"@911DidBush  yes it&#39;s &quot;copy to past error&quot; but the problem persist!","body":"@911DidBush  yes it&#39;s &quot;copy to past error&quot; but the problem persist!"},{"owner":{"account_id":7246662,"reputation":131,"user_id":5528335,"accept_rate":0,"display_name":"Alex"},"score":0,"creation_date":1484835657,"post_id":41743260,"comment_id":70680843,"body_markdown":"@toongeorges ok but this is the real problem? eclipse says that is a warning!!","body":"@toongeorges ok but this is the real problem? eclipse says that is a warning!!"},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1484836652,"post_id":41743260,"comment_id":70681545,"body_markdown":"Using the toString() method does not cause the compilation problem.","body":"Using the toString() method does not cause the compilation problem."},{"owner":{"account_id":7246662,"reputation":131,"user_id":5528335,"accept_rate":0,"display_name":"Alex"},"score":1,"creation_date":1484845028,"post_id":41743260,"comment_id":70687569,"body_markdown":"@toongeorges ok thank but the compile also failed on maven. Is it a problem of any dependency?","body":"@toongeorges ok thank but the compile also failed on maven. Is it a problem of any dependency?"}],"answers":[{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631584,"creation_date":1674631584,"answer_id":75230790,"question_id":41743260,"body_markdown":"I had a similar problem (&quot;Cannot access&quot; some interface) due to a misalignment in java version. But I had to update the compiler plugin (to 3.10) to get it to indicate that the class file version was too advanced (java 17) for what I was using in my project (Java 11) instead of just &quot;cannot access&quot;.","title":"maven compile failure, cannot access","body":"<p>I had a similar problem (&quot;Cannot access&quot; some interface) due to a misalignment in java version. But I had to update the compiler plugin (to 3.10) to get it to indicate that the class file version was too advanced (java 17) for what I was using in my project (Java 11) instead of just &quot;cannot access&quot;.</p>\n"}],"owner":{"account_id":7246662,"reputation":131,"user_id":5528335,"accept_rate":0,"display_name":"Alex"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1476,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1674631584,"creation_date":1484833396,"question_id":41743260,"body_markdown":"I have a problem. When I compile my app with maven, I&#39;m receiving following error:\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile\r\n&gt; (default-compile) on project myproject-core: Compilation failure\r\n&gt; \r\n&gt; [ERROR]\r\n&gt; /home/group/Check/19-01-2017---13-40-59/myproject/src/main/java/repository/dao/documents/FileDAO.java:[213,24]\r\n&gt; error: cannot access Comparable\r\n\r\nin this line and column there are:\r\n\r\n  \r\n\r\n    public Integer insertFile(File file) throws Exception {\r\n    \r\n    Properties p = Util.getProperties(&quot;prop.properties&quot;);\r\n    MyFacade.setup(p.getProperty(&quot;url).toString(),\r\n        Integer.valueOf(p.getProperty(&quot;port&quot;).toString()).intValue(), p.getProperty(&quot;service&quot;).toString(),\r\n        p.getProperty(&quot;user&quot;).toString(), p.getProperty(&quot;pwd&quot;).toString());\r\n    final DocumentsFile documentFile = MyFacade.creaFile(p.getProperty(&quot;codDoc&quot;).toString(), file);\r\n    MyFacade.teardown();\r\n    return documentFile.getId();    //this is the line 213}\r\n\r\n  \r\nWhat could be the problem?\r\n\r\nThanks for the response","title":"maven compile failure, cannot access","body":"<p>I have a problem. When I compile my app with maven, I'm receiving following error:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile\n  (default-compile) on project myproject-core: Compilation failure</p>\n  \n  <p>[ERROR]\n  /home/group/Check/19-01-2017---13-40-59/myproject/src/main/java/repository/dao/documents/FileDAO.java:[213,24]\n  error: cannot access Comparable</p>\n</blockquote>\n\n<p>in this line and column there are:</p>\n\n<pre><code>public Integer insertFile(File file) throws Exception {\n\nProperties p = Util.getProperties(\"prop.properties\");\nMyFacade.setup(p.getProperty(\"url).toString(),\n    Integer.valueOf(p.getProperty(\"port\").toString()).intValue(), p.getProperty(\"service\").toString(),\n    p.getProperty(\"user\").toString(), p.getProperty(\"pwd\").toString());\nfinal DocumentsFile documentFile = MyFacade.creaFile(p.getProperty(\"codDoc\").toString(), file);\nMyFacade.teardown();\nreturn documentFile.getId();    //this is the line 213}\n</code></pre>\n\n<p>What could be the problem?</p>\n\n<p>Thanks for the response</p>\n"},{"tags":["java","maven","osgi","owasp"],"comments":[{"owner":{"account_id":3517138,"reputation":3416,"user_id":2940272,"accept_rate":93,"display_name":"mkrakhin"},"score":0,"creation_date":1424268006,"post_id":28584798,"comment_id":45478140,"body_markdown":"What JDK you use to compile your code?","body":"What JDK you use to compile your code?"},{"owner":{"display_name":"user2022068"},"score":0,"creation_date":1424268076,"post_id":28584798,"comment_id":45478181,"body_markdown":"@mkrakhin openjdk version &quot;1.8.0-internal&quot;\nOpenJDK Runtime Environment (build 1.8.0-internal-_2014_11_22_23_46-b00)\nOpenJDK 64-Bit Server VM (build 25.40-b18, mixed mode)","body":"@mkrakhin openjdk version &quot;1.8.0-internal&quot; OpenJDK Runtime Environment (build 1.8.0-internal-_2014_11_22_23_46-b00) OpenJDK 64-Bit Server VM (build 25.40-b18, mixed mode)"},{"owner":{"account_id":3517138,"reputation":3416,"user_id":2940272,"accept_rate":93,"display_name":"mkrakhin"},"score":0,"creation_date":1424268142,"post_id":28584798,"comment_id":45478224,"body_markdown":"Ok. If you have guava in your pom.xml what is exact version of it? Also, what version of owasp-java-html-sanitizer you use? It looks like incompatibility issue between old guava and JDK8. Try to compile it against JDK7.","body":"Ok. If you have guava in your pom.xml what is exact version of it? Also, what version of owasp-java-html-sanitizer you use? It looks like incompatibility issue between old guava and JDK8. Try to compile it against JDK7."},{"owner":{"display_name":"user2022068"},"score":0,"creation_date":1424268517,"post_id":28584798,"comment_id":45478455,"body_markdown":"@mkrakhin I don&#39;t have guava at THIS budle pom. Guava 12 is used only for owasp library. However at server side I have java8+gf4.1+ owasp lib bundle and it&#39;s ok.","body":"@mkrakhin I don&#39;t have guava at THIS budle pom. Guava 12 is used only for owasp library. However at server side I have java8+gf4.1+ owasp lib bundle and it&#39;s ok."},{"owner":{"account_id":3517138,"reputation":3416,"user_id":2940272,"accept_rate":93,"display_name":"mkrakhin"},"score":0,"creation_date":1424268709,"post_id":28584798,"comment_id":45478578,"body_markdown":"Try to add latest Guava (18) to your pom.xml. Guava 12 was released before JDK 8, and AFAIK it had some compatibility issues.","body":"Try to add latest Guava (18) to your pom.xml. Guava 12 was released before JDK 8, and AFAIK it had some compatibility issues."},{"owner":{"display_name":"user2022068"},"score":0,"creation_date":1424269166,"post_id":28584798,"comment_id":45478858,"body_markdown":"@mkrakhin I&#39;ve tried with guava 18 - the same error.","body":"@mkrakhin I&#39;ve tried with guava 18 - the same error."},{"owner":{"account_id":3517138,"reputation":3416,"user_id":2940272,"accept_rate":93,"display_name":"mkrakhin"},"score":0,"creation_date":1424269573,"post_id":28584798,"comment_id":45479133,"body_markdown":"@iJava have you excluded transitive dependency of owasp to guava? If you use latest (r239) of owasp it should resolve to latest guava, but for some older releases they specified exact guava version in their POM.","body":"@iJava have you excluded transitive dependency of owasp to guava? If you use latest (r239) of owasp it should resolve to latest guava, but for some older releases they specified exact guava version in their POM."},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1566463659,"post_id":28584798,"comment_id":101666769,"body_markdown":"In my case, the jar containing the class was not in dependency tree.","body":"In my case, the jar containing the class was not in dependency tree."}],"answers":[{"comments":[{"owner":{"account_id":1521734,"reputation":3389,"user_id":1421189,"accept_rate":58,"display_name":"Pranalee"},"score":0,"creation_date":1424268058,"post_id":28585221,"comment_id":45478167,"body_markdown":"Check if you can get access to source code of class and see what is definition of PolicyFactory class and its methods. If not, just do ctrl+shift+T and search for PolicyFactory  class. once .class file opens, you can do ctrl+O to check what all methods are exposed by this class and what are public methods.","body":"Check if you can get access to source code of class and see what is definition of PolicyFactory class and its methods. If not, just do ctrl+shift+T and search for PolicyFactory  class. once .class file opens, you can do ctrl+O to check what all methods are exposed by this class and what are public methods."},{"owner":{"display_name":"user2022068"},"score":0,"creation_date":1424268207,"post_id":28585221,"comment_id":45478265,"body_markdown":"I&#39;ve compiled that library from sources. And PolicyFactory has this method :  public String sanitize(@Nullable String html) {\n    return sanitize(html, null, null);\n  }","body":"I&#39;ve compiled that library from sources. And PolicyFactory has this method :  public String sanitize(@Nullable String html) {     return sanitize(html, null, null);   }"},{"owner":{"account_id":1521734,"reputation":3389,"user_id":1421189,"accept_rate":58,"display_name":"Pranalee"},"score":0,"creation_date":1424268709,"post_id":28585221,"comment_id":45478579,"body_markdown":"have you made sure that there are no multiple versions of jar? I can&#39;t think of any other reason if method is public.","body":"have you made sure that there are no multiple versions of jar? I can&#39;t think of any other reason if method is public."},{"owner":{"display_name":"user2022068"},"score":0,"creation_date":1424268864,"post_id":28585221,"comment_id":45478665,"body_markdown":"Yes, this lib is not osgi bundle, so I created my maven osgi project and build osgi bundle. And this new bundle is added to dependencies.","body":"Yes, this lib is not osgi bundle, so I created my maven osgi project and build osgi bundle. And this new bundle is added to dependencies."}],"tags":[],"owner":{"account_id":1521734,"reputation":3389,"user_id":1421189,"accept_rate":58,"display_name":"Pranalee"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424267260,"creation_date":1424267260,"answer_id":28585221,"question_id":28584798,"body_markdown":"This seems jar version issue. Most probably, newer version of jar containing class PolicyFactory  has reduced visibility level of method sanitize. There must be new method which you are supposed to use as earlier method is restricted.","title":"Java - compilation error: cannot access Function","body":"<p>This seems jar version issue. Most probably, newer version of jar containing class PolicyFactory  has reduced visibility level of method sanitize. There must be new method which you are supposed to use as earlier method is restricted.</p>\n"},{"comments":[{"owner":{"account_id":3517138,"reputation":3416,"user_id":2940272,"accept_rate":93,"display_name":"mkrakhin"},"score":0,"creation_date":1424277239,"post_id":28588638,"comment_id":45484357,"body_markdown":"So as I said the problem was in old version of guava?","body":"So as I said the problem was in old version of guava?"}],"tags":[],"owner":{"display_name":"user2022068"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1424276930,"creation_date":1424276930,"answer_id":28588638,"question_id":28584798,"body_markdown":"I found the anwser - I used guava 12 instead of guava 11. I took 12 as it was the first version as osgi bundle.","title":"Java - compilation error: cannot access Function","body":"<p>I found the anwser - I used guava 12 instead of guava 11. I took 12 as it was the first version as osgi bundle.</p>\n"},{"tags":[],"owner":{"account_id":1378614,"reputation":30076,"user_id":1312080,"accept_rate":55,"display_name":"amphibient"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524770188,"creation_date":1524770188,"answer_id":50050438,"question_id":28584798,"body_markdown":"In my case this happened when the artifact was posted to the local `Maven` repository without a proper `pom.xml` so the transitive dependencies did not get downloaded. Look for the artifact where the unfound class is located and manually enter it in your pom.xml, that should fix the problem.","title":"Java - compilation error: cannot access Function","body":"<p>In my case this happened when the artifact was posted to the local <code>Maven</code> repository without a proper <code>pom.xml</code> so the transitive dependencies did not get downloaded. Look for the artifact where the unfound class is located and manually enter it in your pom.xml, that should fix the problem.</p>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631348,"creation_date":1674631348,"answer_id":75230764,"question_id":28584798,"body_markdown":"I had the problem with the Java version: the required dependency had a version too advanced for the project where I had the &quot;cannot access&quot;.\r\n\r\nBut I wouldn&#39;t know until I updated the compiler plugin so it would complain correctly about the class file version instead of just &quot;cannot access&quot;.","title":"Java - compilation error: cannot access Function","body":"<p>I had the problem with the Java version: the required dependency had a version too advanced for the project where I had the &quot;cannot access&quot;.</p>\n<p>But I wouldn't know until I updated the compiler plugin so it would complain correctly about the class file version instead of just &quot;cannot access&quot;.</p>\n"}],"owner":{"display_name":"user2022068"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16642,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":28588638,"answer_count":4,"score":2,"last_activity_date":1674631348,"creation_date":1424266095,"question_id":28584798,"body_markdown":"I have osgi project. Every bundle is a separate maven project. Project is large enough and includes about 10 bundles. Everything works and is ok.\r\n\r\nToday I&#39;ve added one more library - https://code.google.com/p/owasp-java-html-sanitizer/ . I&#39;ve set all dependencies and ide (netbeans 8) shows everything is ok. However I get the following compilation code in this method:\r\n\r\n    @Override\r\n    public void sanitize(Map&lt;String,Object&gt; policies){\r\n        PolicyFactory  policy=(PolicyFactory) policies.get(&quot;html0&quot;);\r\n        this.code=policy.sanitize(this.code);\r\n    }\r\nAt the second line of the method (this.code...) I get the following compilation error: cannot access Function. Can&#39;t understand what it is about...\r\n&lt;br&gt;\r\n**EDIT&lt;br&gt;**\r\nImport section:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import org.owasp.html.PolicyFactory;\r\n&lt;br&gt;\r\nEDIT&lt;br&gt;\r\n\r\n    COMPILATION ERROR : \r\n    -------------------------------------------------------------\r\n    com/subjects/SubjectDirItemCore.java:[166,24] error: cannot access Function\r\n    1 error\r\n    -------------------------------------------------------------\r\n    ------------------------------------------------------------------------\r\n    BUILD FAILURE\r\n    ------------------------------------------------------------------------\r\n    Total time: 1.687s\r\n    Finished at: Wed Feb 18 16:11:11 MSK 2015\r\n    Final Memory: 14M/205M\r\n\r\n&lt;br&gt;\r\n**EDIT** &lt;br&gt; - I tried via mvn install -X\r\n\r\n&gt; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\r\n&gt; execute goal\r\n&gt; org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile\r\n&gt; (default-compile) on project com.....: Compilation failure\r\n&gt; ..../subjects/SubjectDirItemCore.java:[166,24] error: cannot access\r\n&gt; Function\r\n&gt; \r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\r\n&gt; \tat org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) \tat\r\n&gt; org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) \tat\r\n&gt; org.apache.maven.cli.MavenCli.execute(MavenCli.java:537) \tat\r\n&gt; org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) \tat\r\n&gt; org.apache.maven.cli.MavenCli.main(MavenCli.java:141) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:497) \tat\r\n&gt; org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\r\n&gt; \tat\r\n&gt; org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\r\n&gt; \tat\r\n&gt; org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\r\n&gt; \tat\r\n&gt; org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\r\n&gt; Caused by: org.apache.maven.plugin.CompilationFailureException:\r\n&gt; Compilation failure /..../subjects/SubjectDirItemCore.java:[166,24]\r\n&gt; error: cannot access Function\r\n&gt; \r\n&gt; \tat\r\n&gt; org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:656)\r\n&gt; \tat\r\n&gt; org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)\r\n&gt; \tat\r\n&gt; org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\r\n&gt; \tat\r\n&gt; org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\r\n&gt; \t... 19 more [ERROR]\r\n\r\n","title":"Java - compilation error: cannot access Function","body":"<p>I have osgi project. Every bundle is a separate maven project. Project is large enough and includes about 10 bundles. Everything works and is ok.</p>\n\n<p>Today I've added one more library - <a href=\"https://code.google.com/p/owasp-java-html-sanitizer/\" rel=\"nofollow\">https://code.google.com/p/owasp-java-html-sanitizer/</a> . I've set all dependencies and ide (netbeans 8) shows everything is ok. However I get the following compilation code in this method:</p>\n\n<pre><code>@Override\npublic void sanitize(Map&lt;String,Object&gt; policies){\n    PolicyFactory  policy=(PolicyFactory) policies.get(\"html0\");\n    this.code=policy.sanitize(this.code);\n}\n</code></pre>\n\n<p>At the second line of the method (this.code...) I get the following compilation error: cannot access Function. Can't understand what it is about...\n<br>\n<strong>EDIT<br></strong>\nImport section:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Map;\nimport org.owasp.html.PolicyFactory;\n</code></pre>\n\n<p><br>\nEDIT<br></p>\n\n<pre><code>COMPILATION ERROR : \n-------------------------------------------------------------\ncom/subjects/SubjectDirItemCore.java:[166,24] error: cannot access Function\n1 error\n-------------------------------------------------------------\n------------------------------------------------------------------------\nBUILD FAILURE\n------------------------------------------------------------------------\nTotal time: 1.687s\nFinished at: Wed Feb 18 16:11:11 MSK 2015\nFinal Memory: 14M/205M\n</code></pre>\n\n<p><br>\n<strong>EDIT</strong> <br> - I tried via mvn install -X</p>\n\n<blockquote>\n  <p>org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\n  execute goal\n  org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile\n  (default-compile) on project com.....: Compilation failure\n  ..../subjects/SubjectDirItemCore.java:[166,24] error: cannot access\n  Function</p>\n  \n  <p>at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)\n    at\n  org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)   at\n  org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)  at\n  org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)  at\n  org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)   at\n  org.apache.maven.cli.MavenCli.main(MavenCli.java:141)     at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)     at\n  org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)\n    at\n  org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)\n  Caused by: org.apache.maven.plugin.CompilationFailureException:\n  Compilation failure /..../subjects/SubjectDirItemCore.java:[166,24]\n  error: cannot access Function</p>\n  \n  <p>at\n  org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:656)\n    at\n  org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)\n    at\n  org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)\n    at\n  org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)\n    ... 19 more [ERROR]</p>\n</blockquote>\n"},{"tags":["java","jvm","garbage-collection"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1674567557,"post_id":75222251,"comment_id":132737652,"body_markdown":"When in doubt and you don&#39;t have a reason to tweak it (i.e. you&#39;re not yet aware of it being a problem), leave the default. It sounds like you have no specific requirements. In that case: don&#39;t do specific settings. And as a general note: plan to upgrade from Java 8 to a more recent release soon, or it *will* bite you in the ass eventually.","body":"When in doubt and you don&#39;t have a reason to tweak it (i.e. you&#39;re not yet aware of it being a problem), leave the default. It sounds like you have no specific requirements. In that case: don&#39;t do specific settings. And as a general note: plan to upgrade from Java 8 to a more recent release soon, or it <i>will</i> bite you in the ass eventually."}],"answers":[{"tags":[],"owner":{"account_id":23665000,"reputation":65,"user_id":17692587,"display_name":"李志博"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631313,"creation_date":1674631313,"answer_id":75230762,"question_id":75222251,"body_markdown":"I went through the first chapter of the Java&#174; Performance Companion book and there is a passage in it that describes this:\r\n\r\n&gt;As of this writing, G1 primarily targets the use case of large Java heaps with reasonably low pauses, and also those applications that are using CMS GC. There are plans to use G1 to also target the throughput use case, but for applications looking for high throughput that can tolerate longer GC pauses, Parallel GC is currently the better choice.\r\n\r\nThis exactly answers my question, if 1 project is purely for completing timed tasks, or consuming MQ, it usually has no requirement for pause time, which would be more appropriate with Parallel GC.","title":"In Java 1.8, how do I choose a garbage collector？","body":"<p>I went through the first chapter of the Java® Performance Companion book and there is a passage in it that describes this:</p>\n<blockquote>\n<p>As of this writing, G1 primarily targets the use case of large Java heaps with reasonably low pauses, and also those applications that are using CMS GC. There are plans to use G1 to also target the throughput use case, but for applications looking for high throughput that can tolerate longer GC pauses, Parallel GC is currently the better choice.</p>\n</blockquote>\n<p>This exactly answers my question, if 1 project is purely for completing timed tasks, or consuming MQ, it usually has no requirement for pause time, which would be more appropriate with Parallel GC.</p>\n"}],"owner":{"account_id":23665000,"reputation":65,"user_id":17692587,"display_name":"李志博"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674631313,"creation_date":1674567298,"question_id":75222251,"body_markdown":"Suppose my environment is Java 1.8, my application is a batch application and there is no requirement for latency, I don&#39;t know whether I should choose Parallel GC or G1 GC? \r\n\r\nI understand that Parallel GC is optimized for throughput and is more suitable for batch applications like mine, but I find that all Java applications around me are using G1 garbage collector, so I am not sure if I don&#39;t need Parallel GC if I have G1, or if I am looking for throughput, Parallel GC is the best choice. better choice?","title":"In Java 1.8, how do I choose a garbage collector？","body":"<p>Suppose my environment is Java 1.8, my application is a batch application and there is no requirement for latency, I don't know whether I should choose Parallel GC or G1 GC?</p>\n<p>I understand that Parallel GC is optimized for throughput and is more suitable for batch applications like mine, but I find that all Java applications around me are using G1 garbage collector, so I am not sure if I don't need Parallel GC if I have G1, or if I am looking for throughput, Parallel GC is the best choice. better choice?</p>\n"},{"tags":["java","compiler-errors"],"comments":[{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":1,"creation_date":1482845792,"post_id":41346196,"comment_id":69894151,"body_markdown":"it probably can&#180;t acces the `Stores` class because it doesn&#180;t find it. Did you import `Stores` in the `Market` class?","body":"it probably can&#180;t acces the <code>Stores</code> class because it doesn&#180;t find it. Did you import <code>Stores</code> in the <code>Market</code> class?"},{"owner":{"account_id":9893707,"reputation":195,"user_id":7325941,"display_name":"Levon Asatryan"},"score":0,"creation_date":1482845919,"post_id":41346196,"comment_id":69894212,"body_markdown":"@Kevin Those are in the same package, do I need to import Interface?","body":"@Kevin Those are in the same package, do I need to import Interface?"},{"owner":{"account_id":9893707,"reputation":195,"user_id":7325941,"display_name":"Levon Asatryan"},"score":0,"creation_date":1482846152,"post_id":41346196,"comment_id":69894329,"body_markdown":"@KevinEsche And it doesn&#39;t give me any errors on the line public class Market implements Store","body":"@KevinEsche And it doesn&#39;t give me any errors on the line public class Market implements Store"},{"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"score":0,"creation_date":1482846253,"post_id":41346196,"comment_id":69894381,"body_markdown":"Try closing and reopening Eclipse.","body":"Try closing and reopening Eclipse."},{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":0,"creation_date":1482846257,"post_id":41346196,"comment_id":69894387,"body_markdown":"if they are in the same package they shouldn&#180;t, but the problem itself isn&#180;t reproducable for me and everything should compile just fine. Are you using any `IDE`? If so i might restart the `IDE` or clean build the project","body":"if they are in the same package they shouldn&#180;t, but the problem itself isn&#180;t reproducable for me and everything should compile just fine. Are you using any <code>IDE</code>? If so i might restart the <code>IDE</code> or clean build the project"},{"owner":{"account_id":1106480,"reputation":3529,"user_id":1097772,"accept_rate":62,"display_name":"user1097772"},"score":0,"creation_date":1482846278,"post_id":41346196,"comment_id":69894399,"body_markdown":"@LevonAsatryan You don&#39;t need to import it if its in same package. \nI copy pasted your code in some package and I have no errors there. So there must be something different in your code ...","body":"@LevonAsatryan You don&#39;t need to import it if its in same package.  I copy pasted your code in some package and I have no errors there. So there must be something different in your code ..."},{"owner":{"account_id":1106480,"reputation":3529,"user_id":1097772,"accept_rate":62,"display_name":"user1097772"},"score":0,"creation_date":1482846346,"post_id":41346196,"comment_id":69894426,"body_markdown":"@LevonAsatryan Depends on what editor you use but try to turn on/off it and refresh your project, its F5 in Eclipse on project.","body":"@LevonAsatryan Depends on what editor you use but try to turn on/off it and refresh your project, its F5 in Eclipse on project."},{"owner":{"account_id":9811289,"reputation":1241,"user_id":7269381,"display_name":"Ihor Dobrovolskyi"},"score":1,"creation_date":1482846363,"post_id":41346196,"comment_id":69894437,"body_markdown":"It works perfectly for me.","body":"It works perfectly for me."},{"owner":{"account_id":9893707,"reputation":195,"user_id":7325941,"display_name":"Levon Asatryan"},"score":0,"creation_date":1482846621,"post_id":41346196,"comment_id":69894542,"body_markdown":"@user1097772 I&#39;m using IntellIJ Idea on linux mint, I turned off and restarted my PC. Same error.","body":"@user1097772 I&#39;m using IntellIJ Idea on linux mint, I turned off and restarted my PC. Same error."},{"owner":{"account_id":1106480,"reputation":3529,"user_id":1097772,"accept_rate":62,"display_name":"user1097772"},"score":0,"creation_date":1482847047,"post_id":41346196,"comment_id":69894745,"body_markdown":"@LevonAsatryan Well when I copy pasted your code you put there, I have no errors. So I suggest you do the same. Create some new package and just put there the code you put in your question. It should works fine. There would be probably some typo in the code in your editor or something like that.","body":"@LevonAsatryan Well when I copy pasted your code you put there, I have no errors. So I suggest you do the same. Create some new package and just put there the code you put in your question. It should works fine. There would be probably some typo in the code in your editor or something like that."},{"owner":{"account_id":9893707,"reputation":195,"user_id":7325941,"display_name":"Levon Asatryan"},"score":0,"creation_date":1482847773,"post_id":41346196,"comment_id":69895090,"body_markdown":"Ok I found where I went wrong. When creating project, I added gradle repositories, and I just written my code in the wrong package.\nThank you @KevinEsche and others for your help :)\nCheers.","body":"Ok I found where I went wrong. When creating project, I added gradle repositories, and I just written my code in the wrong package. Thank you @KevinEsche and others for your help :) Cheers."},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1595183344,"post_id":41346196,"comment_id":111379704,"body_markdown":"Just a guess, but maybe you need to compile Stores.java? I would have thought the IDE would have done that automatically, though.","body":"Just a guess, but maybe you need to compile Stores.java? I would have thought the IDE would have done that automatically, though."}],"answers":[{"comments":[{"owner":{"account_id":2218670,"reputation":354,"user_id":1958683,"accept_rate":57,"display_name":"Tugrul ASLAN"},"score":1,"creation_date":1547645299,"post_id":50445359,"comment_id":95261742,"body_markdown":"Similar situation in IntelliJ I deleted unused maven auto created test classes and Rebuilt the project, worked like a charm","body":"Similar situation in IntelliJ I deleted unused maven auto created test classes and Rebuilt the project, worked like a charm"}],"tags":[],"owner":{"account_id":3916255,"reputation":126,"user_id":3240003,"display_name":"Przemek"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1526893550,"creation_date":1526893550,"answer_id":50445359,"question_id":41346196,"body_markdown":"I&#39;ve faced the same issue in Intetlij.\r\nIt was very weird for me what had helped:\r\n\r\nI had to change any value in pom.xml (I&#39;ve used &quot;mainClass&quot;). Then change it back (since value was correct). Project view was refreshed and class starts to see the interface.","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>I've faced the same issue in Intetlij.\nIt was very weird for me what had helped:</p>\n\n<p>I had to change any value in pom.xml (I've used \"mainClass\"). Then change it back (since value was correct). Project view was refreshed and class starts to see the interface.</p>\n"},{"tags":[],"owner":{"account_id":3308775,"reputation":1125,"user_id":9134487,"display_name":"Tushar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1596655644,"creation_date":1595180270,"answer_id":62983613,"question_id":41346196,"body_markdown":"I have faced this issue in IntelliJ multiple times. It clearly doesn&#39;t happen due to any compilation error in the code. And nothing seems to help, apart from killing the IDE and starting it again.\r\n\r\nAnd I mean killing the IDE completely, and not closing and opening the project. After doing this, the error vanishes.\r\n\r\n(I feel weird writing this as an answer, but happened too many times with me, that I know how such errors make you question what you know about programming. Hope no one else has to waste their time on this)","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>I have faced this issue in IntelliJ multiple times. It clearly doesn't happen due to any compilation error in the code. And nothing seems to help, apart from killing the IDE and starting it again.</p>\n<p>And I mean killing the IDE completely, and not closing and opening the project. After doing this, the error vanishes.</p>\n<p>(I feel weird writing this as an answer, but happened too many times with me, that I know how such errors make you question what you know about programming. Hope no one else has to waste their time on this)</p>\n"},{"comments":[{"owner":{"account_id":18907312,"reputation":1734,"user_id":13794189,"display_name":"Miguel Tom&#225;s"},"score":0,"creation_date":1614773559,"post_id":63255242,"comment_id":117485973,"body_markdown":"this worked for me on android studio 4.2 C15 SDK 30","body":"this worked for me on android studio 4.2 C15 SDK 30"},{"owner":{"account_id":1250085,"reputation":1430,"user_id":1210650,"accept_rate":70,"display_name":"Sanjay Verma"},"score":1,"creation_date":1627862938,"post_id":63255242,"comment_id":121262335,"body_markdown":"Hey there I&#39;m from 2021, I still have the same issue :/","body":"Hey there I&#39;m from 2021, I still have the same issue :/"},{"owner":{"account_id":238033,"reputation":2690,"user_id":506645,"accept_rate":48,"display_name":"Sreeraj"},"score":0,"creation_date":1686640865,"post_id":63255242,"comment_id":134822911,"body_markdown":"from 2023 :(  and not a time travel.","body":"from 2023 :(  and not a time travel."}],"tags":[],"owner":{"account_id":2135074,"reputation":670,"user_id":3579432,"display_name":"Skrrp"},"comment_count":3,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1596576241,"creation_date":1596576241,"answer_id":63255242,"question_id":41346196,"body_markdown":"It&#39;s 2020 and I&#39;m still having this issue in IntelliJ Idea. Sometimes a restart of the IDE is enough but today I had to `File -&gt; Invalidate Caches / Restart` in order for it to recognise a new interface that I had written. Refused to recognise it in package local as well as when explicitly `import`ed to other packages.","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>It's 2020 and I'm still having this issue in IntelliJ Idea. Sometimes a restart of the IDE is enough but today I had to <code>File -&gt; Invalidate Caches / Restart</code> in order for it to recognise a new interface that I had written. Refused to recognise it in package local as well as when explicitly <code>import</code>ed to other packages.</p>\n"},{"tags":[],"owner":{"account_id":19082344,"reputation":1,"user_id":13934304,"display_name":"chemikos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663694066,"creation_date":1663694066,"answer_id":73790378,"question_id":41346196,"body_markdown":"I had the same problem with IntelliJ.\r\nMy solution is quite simple. Go to the interface file, delete the word **interface** and enter it again.","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>I had the same problem with IntelliJ.\nMy solution is quite simple. Go to the interface file, delete the word <strong>interface</strong> and enter it again.</p>\n"},{"tags":[],"owner":{"account_id":23208927,"reputation":1159,"user_id":17302718,"display_name":"Mounir bkr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666744383,"creation_date":1666744383,"answer_id":74201504,"question_id":41346196,"body_markdown":"- just restart intellij.\r\n\r\nor:\r\n- invalidat and rebuilt caches: \r\n\r\n    file -&gt; invalidate caches/restart -&gt; invalidate and restart.\r\n\r\nand it will solve your problem","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<ul>\n<li>just restart intellij.</li>\n</ul>\n<p>or:</p>\n<ul>\n<li><p>invalidat and rebuilt caches:</p>\n<p>file -&gt; invalidate caches/restart -&gt; invalidate and restart.</p>\n</li>\n</ul>\n<p>and it will solve your problem</p>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674631147,"creation_date":1674631147,"answer_id":75230742,"question_id":41346196,"body_markdown":"In my case, I had the problem directly with maven, on the command line.\r\n\r\nThe solution was twofold: update the compiler plugin (from 2.2 to 3.10), so it would complain correctly about the class file version (instead of just telling &quot;cannot access&quot;); and compile the dependency (containing the class that &quot;cannot access&quot;) with the same java version (11 instead of 17) as the project that was giving the error, so they would have the same java version.","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>In my case, I had the problem directly with maven, on the command line.</p>\n<p>The solution was twofold: update the compiler plugin (from 2.2 to 3.10), so it would complain correctly about the class file version (instead of just telling &quot;cannot access&quot;); and compile the dependency (containing the class that &quot;cannot access&quot;) with the same java version (11 instead of 17) as the project that was giving the error, so they would have the same java version.</p>\n"}],"owner":{"account_id":9893707,"reputation":195,"user_id":7325941,"display_name":"Levon Asatryan"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14670,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":6,"score":13,"last_activity_date":1674631147,"creation_date":1482845689,"question_id":41346196,"body_markdown":"I have an interface stores which has two methods getName() and getAddres(), and I have a class Market which implements Stores\r\nThis is my code:\r\n    \r\n    public interface Stores {\r\n        public String getName();\r\n        public String getAddress();\r\n    }\r\n\r\nAnd the concrete class:\r\n\r\n    public class Market implements Stores {\r\n        private String name;\r\n        private String address;\r\n        private int size;\r\n\r\n        public Market(String name, String address, int size) {\r\n            this.name = name;\r\n            this.address = address;\r\n            this.size = size;\r\n        }\r\n\r\n        @Override\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        @Override\r\n        public String getAddress() {\r\n            return address;\r\n        }\r\n\r\n        public int getSize() {\r\n            return size;\r\n        }\r\n    }\r\n    \r\n\r\nI get errors in constructor regarding this.name=name, this.address=address and this.size=size saying that &quot;Cannot access stores&quot;.\r\nAny ideas why?","title":"Java class compile time error &quot;Cannot access interface&quot;","body":"<p>I have an interface stores which has two methods getName() and getAddres(), and I have a class Market which implements Stores\nThis is my code:</p>\n\n<pre><code>public interface Stores {\n    public String getName();\n    public String getAddress();\n}\n</code></pre>\n\n<p>And the concrete class:</p>\n\n<pre><code>public class Market implements Stores {\n    private String name;\n    private String address;\n    private int size;\n\n    public Market(String name, String address, int size) {\n        this.name = name;\n        this.address = address;\n        this.size = size;\n    }\n\n    @Override\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String getAddress() {\n        return address;\n    }\n\n    public int getSize() {\n        return size;\n    }\n}\n</code></pre>\n\n<p>I get errors in constructor regarding this.name=name, this.address=address and this.size=size saying that \"Cannot access stores\".\nAny ideas why?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1674630679,"post_id":75230586,"comment_id":132752976,"body_markdown":"Please do the following: 1) format your post to have the code properly highlighted, indented etc. to make it even readable. 2) Elaborate on your question rather than putting just some notion of it into the title and throwing code at us. What are you trying to do and what do you get? Where in your code did you see things go wrong? Did you step through your code with a debugger already?","body":"Please do the following: 1) format your post to have the code properly highlighted, indented etc. to make it even readable. 2) Elaborate on your question rather than putting just some notion of it into the title and throwing code at us. What are you trying to do and what do you get? Where in your code did you see things go wrong? Did you step through your code with a debugger already?"},{"owner":{"account_id":26971270,"reputation":1,"user_id":20537254,"display_name":"Nancy"},"score":0,"creation_date":1674631661,"post_id":75230586,"comment_id":132753228,"body_markdown":"Yes, I did a debug. Since am new to java not sure where am making mistakes. I need to save the data. All other datas are getting saved which i pass. Only approve remarks is getting saved in the DB as &quot;null&quot;. In the front end I pass a text . Example approve remarks as Approved. But hile saving its reflecting as &quot;Null&quot;. Sorry if am still confusing","body":"Yes, I did a debug. Since am new to java not sure where am making mistakes. I need to save the data. All other datas are getting saved which i pass. Only approve remarks is getting saved in the DB as &quot;null&quot;. In the front end I pass a text . Example approve remarks as Approved. But hile saving its reflecting as &quot;Null&quot;. Sorry if am still confusing"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1674644869,"post_id":75230586,"comment_id":132757209,"body_markdown":"You should be able to trace `approveRemarks` through your services and see where it becomes null. If it&#39;s in the controller already then there&#39;s a mismatch between how your front end is sending it and what the controller expects. Btw, you should _never_ directly concat values into queries, i.e. `&quot;...APRV_REMARKS=&#39;&quot;+approveRemarks+&quot;&#39;,...&quot;` is a big no-no! (Security reasons) Use parameter placeholders (e.g. `&quot;...APRV_REMARKS=? ...&quot;`) and `query.setParameter(...)` instead.","body":"You should be able to trace <code>approveRemarks</code> through your services and see where it becomes null. If it&#39;s in the controller already then there&#39;s a mismatch between how your front end is sending it and what the controller expects. Btw, you should <i>never</i> directly concat values into queries, i.e. <code>&quot;...APRV_REMARKS=&#39;&quot;+approveRemarks+&quot;&#39;,...&quot;</code> is a big no-no! (Security reasons) Use parameter placeholders (e.g. <code>&quot;...APRV_REMARKS=? ...&quot;</code>) and <code>query.setParameter(...)</code> instead."}],"owner":{"account_id":26971270,"reputation":1,"user_id":20537254,"display_name":"Nancy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674631019,"creation_date":1674629850,"question_id":75230586,"body_markdown":"My controller.java file\r\n\r\n```\r\n@RequestMapping(value = &quot;/saveRiskRuleApproveNew&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)\r\n\t    public Map&lt;String, String&gt; saveRiskRuleApproveNew(@RequestParam String status,String ruleId,String approveRemarks,String riskInstruction, HttpSession session) {\r\n\t        Map&lt;String, String&gt; Resultmap = new HashMap&lt;&gt;();\r\n\t        try {\r\n\t            logger.info(&quot;Saving saveRiskRuleApproveNew:::&quot;);\r\n\t            UserBean userBean = (UserBean)session.getAttribute(&quot;user&quot;);\r\n\t            //riskService.saveRiskRuleApprove(riskRuleDTO,userBean);\r\n\t            riskService.saveRiskRuleApproveNew(status,ruleId,approveRemarks,riskInstruction,userBean);\r\n\t      \t\tif(status.equals(&quot;approve&quot;))\r\n\t       \t\t{\r\n\t       \t\t Resultmap.put(ScrutinyCommonConstants.SUCCESS_MSG, ScrutinyCommonConstants.SUCCESS_APRROVED);\r\n\t       \t\t}\r\n\t       \t\t\r\n\t       \t\tif(status.equals(&quot;reject&quot;))\t       \t\t\t\r\n\t       \t\t{\r\n\t       \t\t\tResultmap.put(ScrutinyCommonConstants.SUCCESS_MSG, ScrutinyCommonConstants.SUCCESS_REJECTED);\r\n\t       \t\t}\r\n\t       } catch (Exception ex) {\r\n\t            logger.error(ScrutinyCommonConstants.EXCEPTION_OCCURED + ex);\r\n\t            Resultmap.put(ScrutinyCommonConstants.ERROR_MESSAGE, ScrutinyCommonConstants.ERROR_DATA);\r\n\t        }\r\n\t        return Resultmap;\r\n\t    } \r\n```\r\n\r\nService.java:\r\n\r\n```\r\nvoid saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean);\r\n```\r\n\r\nServiceimpl.java:\r\n\r\n```\r\n@Override\r\n\tpublic void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean) {\r\n\t\triskModuleDao.saveRiskRuleApproveNew(status,ruleId,approveRemarks,riskInstruction,userBean);\r\n\t}\r\n```\r\n\r\nDao.java: \r\n\r\n```\r\nvoid saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean);\r\n```\r\n\r\nDaoimpl.java:\r\n\r\n```\r\n\t@Override\r\n\tpublic void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean) {\r\n\t\ttry {\r\n\t\t\tSession session = getSession();\r\n\t\t   \t if(status.equals(&quot;approve&quot;))\r\n\t\t   \t {\t        \t\t \r\n\t\t\t\t\tQuery updatequery = session.createNativeQuery(&quot;UPDATE CBEC_GST.SCRTY_RISK_RULE SET APPROVAL_STATUS =&#39;APPROVED&#39;,APRV_REMARKS=&#39;&quot;+approveRemarks+&quot;&#39;,RISK_RULE_INST=&#39;&quot;+riskInstruction+&quot;&#39;,APPROVED_BY=&#39;&quot;+userBean.getSsoId()+&quot;&#39; WHERE UI_RULE_ID = &#39;&quot;+ruleId+&quot;&#39;&quot;);\r\n\t\t\t\t\tupdatequery.executeUpdate();\r\n\t\t\t\t\tsession.flush();\r\n\t\t   \t }\r\n\t\t   \t if(status.equals(&quot;reject&quot;))\r\n\t\t   \t {\t        \t\t \r\n\t\t\t\t\tQuery updatequery = session.createNativeQuery(&quot;UPDATE CBEC_GST.SCRTY_RISK_RULE SET APPROVAL_STATUS =&#39;REJECTED&#39;,APRV_REMARKS=&#39;&quot;+approveRemarks+&quot;&#39;,RISK_RULE_INST=&#39;&quot;+riskInstruction+&quot;&#39;,APPROVED_BY=&#39;&quot;+userBean.getSsoId()+&quot;&#39; WHERE UI_RULE_ID = &#39;&quot;+ruleId+&quot;&#39;&quot;);\r\n\t\t\t\t\tupdatequery.executeUpdate();\r\n\t\t\t\t\tsession.flush();\r\n\t\t   \t }\t\t   \t \r\n\t\t} catch (DataAccessException e) {\r\n\t\t\tlogger.error(CommonConstants.EXCEPTION_OCCURED, e);\r\n\t\t\tthrow new ApplicationException(e.getMessage(), RiskModuleDaoImpl.class);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(CommonConstants.EXCEPTION_OCCURED, e);\r\n\t\t\tthrow new ApplicationException(e.getMessage());\r\n\t\t}\r\n\t\t\r\n\t}\t\r\n```","title":"In the UI I pass a Text but while saving its passing as &quot;null&quot; in approve remarks","body":"<p>My controller.java file</p>\n<pre><code>@RequestMapping(value = &quot;/saveRiskRuleApproveNew&quot;, method = RequestMethod.GET, produces = &quot;application/json&quot;)\n        public Map&lt;String, String&gt; saveRiskRuleApproveNew(@RequestParam String status,String ruleId,String approveRemarks,String riskInstruction, HttpSession session) {\n            Map&lt;String, String&gt; Resultmap = new HashMap&lt;&gt;();\n            try {\n                logger.info(&quot;Saving saveRiskRuleApproveNew:::&quot;);\n                UserBean userBean = (UserBean)session.getAttribute(&quot;user&quot;);\n                //riskService.saveRiskRuleApprove(riskRuleDTO,userBean);\n                riskService.saveRiskRuleApproveNew(status,ruleId,approveRemarks,riskInstruction,userBean);\n                if(status.equals(&quot;approve&quot;))\n                {\n                 Resultmap.put(ScrutinyCommonConstants.SUCCESS_MSG, ScrutinyCommonConstants.SUCCESS_APRROVED);\n                }\n                \n                if(status.equals(&quot;reject&quot;))                 \n                {\n                    Resultmap.put(ScrutinyCommonConstants.SUCCESS_MSG, ScrutinyCommonConstants.SUCCESS_REJECTED);\n                }\n           } catch (Exception ex) {\n                logger.error(ScrutinyCommonConstants.EXCEPTION_OCCURED + ex);\n                Resultmap.put(ScrutinyCommonConstants.ERROR_MESSAGE, ScrutinyCommonConstants.ERROR_DATA);\n            }\n            return Resultmap;\n        } \n</code></pre>\n<p>Service.java:</p>\n<pre><code>void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean);\n</code></pre>\n<p>Serviceimpl.java:</p>\n<pre><code>@Override\n    public void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean) {\n        riskModuleDao.saveRiskRuleApproveNew(status,ruleId,approveRemarks,riskInstruction,userBean);\n    }\n</code></pre>\n<p>Dao.java:</p>\n<pre><code>void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean);\n</code></pre>\n<p>Daoimpl.java:</p>\n<pre><code>    @Override\n    public void saveRiskRuleApproveNew(String status,String ruleId,String approveRemarks,String riskInstruction, UserBean userBean) {\n        try {\n            Session session = getSession();\n             if(status.equals(&quot;approve&quot;))\n             {                   \n                    Query updatequery = session.createNativeQuery(&quot;UPDATE CBEC_GST.SCRTY_RISK_RULE SET APPROVAL_STATUS ='APPROVED',APRV_REMARKS='&quot;+approveRemarks+&quot;',RISK_RULE_INST='&quot;+riskInstruction+&quot;',APPROVED_BY='&quot;+userBean.getSsoId()+&quot;' WHERE UI_RULE_ID = '&quot;+ruleId+&quot;'&quot;);\n                    updatequery.executeUpdate();\n                    session.flush();\n             }\n             if(status.equals(&quot;reject&quot;))\n             {                   \n                    Query updatequery = session.createNativeQuery(&quot;UPDATE CBEC_GST.SCRTY_RISK_RULE SET APPROVAL_STATUS ='REJECTED',APRV_REMARKS='&quot;+approveRemarks+&quot;',RISK_RULE_INST='&quot;+riskInstruction+&quot;',APPROVED_BY='&quot;+userBean.getSsoId()+&quot;' WHERE UI_RULE_ID = '&quot;+ruleId+&quot;'&quot;);\n                    updatequery.executeUpdate();\n                    session.flush();\n             }           \n        } catch (DataAccessException e) {\n            logger.error(CommonConstants.EXCEPTION_OCCURED, e);\n            throw new ApplicationException(e.getMessage(), RiskModuleDaoImpl.class);\n        } catch (Exception e) {\n            logger.error(CommonConstants.EXCEPTION_OCCURED, e);\n            throw new ApplicationException(e.getMessage());\n        }\n        \n    }   \n</code></pre>\n"},{"tags":["java","maven","compiler-errors"],"comments":[{"owner":{"account_id":1306942,"reputation":4457,"user_id":1255737,"display_name":"rmlan"},"score":0,"creation_date":1516208866,"post_id":48306413,"comment_id":83598006,"body_markdown":"What versions are you using? Also, have you edited ElasticSearchTransportClient?","body":"What versions are you using? Also, have you edited ElasticSearchTransportClient?"},{"owner":{"account_id":5594409,"reputation":105,"user_id":4432587,"accept_rate":83,"display_name":"Helmut"},"score":0,"creation_date":1516220585,"post_id":48306413,"comment_id":83604375,"body_markdown":"Java 1.8_144\nElasticSearch 6.1.0  \n\nYes, i have edited the ElasticSearchTransportClient.It needed to be rewritten to work with 6.1.  \nWhen i compile it with Eclipse and do a &quot;mvn install&quot;, i have a working Flume with ES 6.1.\nBut when i do a &quot;mvn clean compile&quot; or &quot;mvn clean install&quot;, so that maven does the compile, i get the above error.\nLooks like i am missing a reference to Log4J, but can&#39;t find the place in pom.xml to add.","body":"Java 1.8_144 ElasticSearch 6.1.0    Yes, i have edited the ElasticSearchTransportClient.It needed to be rewritten to work with 6.1.   When i compile it with Eclipse and do a &quot;mvn install&quot;, i have a working Flume with ES 6.1. But when i do a &quot;mvn clean compile&quot; or &quot;mvn clean install&quot;, so that maven does the compile, i get the above error. Looks like i am missing a reference to Log4J, but can&#39;t find the place in pom.xml to add."}],"answers":[{"tags":[],"owner":{"account_id":5594409,"reputation":105,"user_id":4432587,"accept_rate":83,"display_name":"Helmut"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516272096,"creation_date":1516272096,"answer_id":48319313,"question_id":48306413,"body_markdown":"Found the problem.  \r\nIn pom file of the project the dependency to Log4J had a scope of &quot;test&quot;, so it was not available to the compile scope. \r\nRemoved the scope test and all is fine now.","title":"maven compile failure. cannot access","body":"<p>Found the problem.<br>\nIn pom file of the project the dependency to Log4J had a scope of \"test\", so it was not available to the compile scope. \nRemoved the scope test and all is fine now.</p>\n"},{"tags":[],"owner":{"account_id":6615281,"reputation":1826,"user_id":5108777,"display_name":"manuelvigarcia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674630958,"creation_date":1674630958,"answer_id":75230713,"question_id":48306413,"body_markdown":"Compiler and Java version\r\n==\r\nIn my case the problem was a combination of two things.\r\n\r\nFirst, the Java version of the dependency (the class that &quot;cannot access&quot;) was way ahead of that of the project I am building now (17 versus 11), so the compiler would not understand it.\r\n\r\nSecond, the compiler version in the project I am building was too old, so it would not complain correctly about the class file version. I upgraded the compiler plugin (from 2.2 to 3.10.1) and then it would complain about a class file too advanced for the Java version I was using.\r\n\r\nAfter those two corrections, I moved forward to later errors.","title":"maven compile failure. cannot access","body":"<h1>Compiler and Java version</h1>\n<p>In my case the problem was a combination of two things.</p>\n<p>First, the Java version of the dependency (the class that &quot;cannot access&quot;) was way ahead of that of the project I am building now (17 versus 11), so the compiler would not understand it.</p>\n<p>Second, the compiler version in the project I am building was too old, so it would not complain correctly about the class file version. I upgraded the compiler plugin (from 2.2 to 3.10.1) and then it would complain about a class file too advanced for the Java version I was using.</p>\n<p>After those two corrections, I moved forward to later errors.</p>\n"}],"owner":{"account_id":5594409,"reputation":105,"user_id":4432587,"accept_rate":83,"display_name":"Helmut"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6880,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1674630958,"creation_date":1516208701,"question_id":48306413,"body_markdown":"i am acessing a class, which is part of the Elasticsearch server.\r\nWhen i compile the code inside Eclipse, i have no problems. doing it in Maven i get an error:\r\n\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project flume-ng-elasticsearch-sink: Compilation failure\r\n    [ERROR] \\Eclipse\\Workspace\\flume\\flume-ng-sinks\\flume-ng-elasticsearch-sink\\src\\main\\java\\org\\apache\\flume\\sink\\elasticsearch\\client\\ElasticSearchTransportClient.java:[202,19] error: cannot access Level\r\n\r\nMy code is:\r\n\r\n    Settings.Builder settingsBuilder = Settings.builder()\r\n        .put(&quot;cluster.name&quot;, clusterName);\r\n\r\n\r\nThe property &quot;Level&quot; is defined in a class from the Elasticsearch Project.\r\nCode is available [here][1].\r\n\r\nAny idea, which might be wrong?\r\n\r\nthanks,  \r\n\r\nHelmut\r\n\r\n\r\n  [1]: https://github.com/elastic/elasticsearch/blob/master/server/src/main/java/org/elasticsearch/common/settings/Settings.java","title":"maven compile failure. cannot access","body":"<p>i am acessing a class, which is part of the Elasticsearch server.\nWhen i compile the code inside Eclipse, i have no problems. doing it in Maven i get an error:</p>\n\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project flume-ng-elasticsearch-sink: Compilation failure\n[ERROR] \\Eclipse\\Workspace\\flume\\flume-ng-sinks\\flume-ng-elasticsearch-sink\\src\\main\\java\\org\\apache\\flume\\sink\\elasticsearch\\client\\ElasticSearchTransportClient.java:[202,19] error: cannot access Level\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>Settings.Builder settingsBuilder = Settings.builder()\n    .put(\"cluster.name\", clusterName);\n</code></pre>\n\n<p>The property \"Level\" is defined in a class from the Elasticsearch Project.\nCode is available <a href=\"https://github.com/elastic/elasticsearch/blob/master/server/src/main/java/org/elasticsearch/common/settings/Settings.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Any idea, which might be wrong?</p>\n\n<p>thanks,  </p>\n\n<p>Helmut</p>\n"},{"tags":["java","spring","mockmvc"],"answers":[{"tags":[],"owner":{"account_id":27598382,"reputation":11,"user_id":21064118,"display_name":"Wired5149"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674630697,"creation_date":1674630697,"answer_id":75230681,"question_id":75206938,"body_markdown":"Finally found the way to send the parameters as MockMultipartFile from MockMVC to the controller:\r\n\r\n    MockMultipartFile pojoJson = new MockMultipartFile(&quot;SomePojo&quot;, null,\r\n                &quot;application/json&quot;, JsonUtils.toJSON(podnet).getBytes());\r\n    \r\n        mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/some-pojo/create&quot;)\r\n                        .file(pojoJson)\r\n                        .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\r\n                        .with(new TestUtils().generateJWTToken(uid, roles)))\r\n                .andExpect(status().isOk()).andReturn().getResponse().getContentAsString();","title":"What is the correct way of testing a POST endpoint that accepts a POJO and a MultipartFile[] attachment?","body":"<p>Finally found the way to send the parameters as MockMultipartFile from MockMVC to the controller:</p>\n<pre><code>MockMultipartFile pojoJson = new MockMultipartFile(&quot;SomePojo&quot;, null,\n            &quot;application/json&quot;, JsonUtils.toJSON(podnet).getBytes());\n\n    mockMvc.perform(MockMvcRequestBuilders.multipart(&quot;/some-pojo/create&quot;)\n                    .file(pojoJson)\n                    .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)\n                    .with(new TestUtils().generateJWTToken(uid, roles)))\n            .andExpect(status().isOk()).andReturn().getResponse().getContentAsString();\n</code></pre>\n"}],"owner":{"account_id":27598382,"reputation":11,"user_id":21064118,"display_name":"Wired5149"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75230681,"answer_count":1,"score":0,"last_activity_date":1674630697,"creation_date":1674461314,"question_id":75206938,"body_markdown":"I&#39;m new to MockMVC. I&#39;ve successfully written some basic tests, but I got stuck on trying to test an use case with the endpoint that requires a POST request with two parameters - a POJO and an array of MultipartFile. The test is written as such:\r\n\r\n     @Test\r\n     public void vytvorPodnetTest() throws Exception {\r\n     var somePojo = new SomePojo();\r\n     \r\n     somePojo.setSomeVariable(&quot;test_value&quot;);\r\n     \r\n     var roles = List.of(&quot;TEST_USER&quot;);\r\n     var uid = &quot;00000000-0000-0000-0000-000000000001&quot;;\r\n     \r\n     MockMultipartFile[] attachments = {new MockMultipartFile(&quot;file1.txt&quot;, &quot;file1.txt&quot;, &quot;text/plain&quot;, &quot;file1 content&quot;.getBytes()),\r\n     new MockMultipartFile(&quot;file2.txt&quot;, &quot;file2.txt&quot;, &quot;text/plain&quot;, &quot;file2 content&quot;.getBytes())};\r\n     \r\n     MockMultipartHttpServletRequestBuilder builder = MockMvcRequestBuilders.multipart(&quot;/some-pojo/create&quot;);\r\n     builder.with(req - {\r\n     req.setMethod(&quot;POST&quot;);\r\n     return req;\r\n             });\r\n     \r\n     MvcResult result = mockMvc.perform(builder.file(attachments[0]).file(attachments[1])\r\n                     .param(&quot;SomePojo&quot;, new ObjectMapper().writeValueAsString(somePojo))\r\n                             .file(attachment[0])\r\n                     .with(TestUtils.generateJWTToken(uid, roles)))\r\n                     .andExpect(status.isOk())\r\n                     .andReturn();\r\n     }\r\n    \r\n \r\n\r\n   The controller method is as follows:\r\n    \r\n     @PostMapping(value = &quot;/create&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\r\n     public UUID createPojo(\r\n                 @RequestPart(value = &quot;SomePojo&quot;) SomePojo somePojo,\r\n                 @RequestPart(value = &quot;attachments&quot;, required = false) MultipartFile[] attachments) {\r\n     \r\n     return pojoService.create(somePojo, attachments);\r\n      }\r\n\r\n\r\nIt stops here, before reaching the service. I&#39;ve tried adding the files both as a param &quot;attachments&quot; and like shown above, but all I get is &quot;`400 Bad Request`&quot;\r\n","title":"What is the correct way of testing a POST endpoint that accepts a POJO and a MultipartFile[] attachment?","body":"<p>I'm new to MockMVC. I've successfully written some basic tests, but I got stuck on trying to test an use case with the endpoint that requires a POST request with two parameters - a POJO and an array of MultipartFile. The test is written as such:</p>\n<pre><code> @Test\n public void vytvorPodnetTest() throws Exception {\n var somePojo = new SomePojo();\n \n somePojo.setSomeVariable(&quot;test_value&quot;);\n \n var roles = List.of(&quot;TEST_USER&quot;);\n var uid = &quot;00000000-0000-0000-0000-000000000001&quot;;\n \n MockMultipartFile[] attachments = {new MockMultipartFile(&quot;file1.txt&quot;, &quot;file1.txt&quot;, &quot;text/plain&quot;, &quot;file1 content&quot;.getBytes()),\n new MockMultipartFile(&quot;file2.txt&quot;, &quot;file2.txt&quot;, &quot;text/plain&quot;, &quot;file2 content&quot;.getBytes())};\n \n MockMultipartHttpServletRequestBuilder builder = MockMvcRequestBuilders.multipart(&quot;/some-pojo/create&quot;);\n builder.with(req - {\n req.setMethod(&quot;POST&quot;);\n return req;\n         });\n \n MvcResult result = mockMvc.perform(builder.file(attachments[0]).file(attachments[1])\n                 .param(&quot;SomePojo&quot;, new ObjectMapper().writeValueAsString(somePojo))\n                         .file(attachment[0])\n                 .with(TestUtils.generateJWTToken(uid, roles)))\n                 .andExpect(status.isOk())\n                 .andReturn();\n }\n</code></pre>\n<p>The controller method is as follows:</p>\n<pre><code> @PostMapping(value = &quot;/create&quot;, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE})\n public UUID createPojo(\n             @RequestPart(value = &quot;SomePojo&quot;) SomePojo somePojo,\n             @RequestPart(value = &quot;attachments&quot;, required = false) MultipartFile[] attachments) {\n \n return pojoService.create(somePojo, attachments);\n  }\n</code></pre>\n<p>It stops here, before reaching the service. I've tried adding the files both as a param &quot;attachments&quot; and like shown above, but all I get is &quot;<code>400 Bad Request</code>&quot;</p>\n"},{"tags":["java","android","android-studio","nfc","nfcadapter"],"comments":[{"owner":{"account_id":2755641,"reputation":8698,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1674678581,"post_id":75209381,"comment_id":132768498,"body_markdown":"As `Log.d(&quot;TAG&quot;, &quot;This is a log message6&quot;);` is outside the `if` statement thus will always get called when `readFromIntent()` is called. But I guess what you really mean is `Log.d(&quot;TAG&quot;, &quot;This is a log message5&quot;);` is never called? Probably &quot;message6&quot; should be in an `else` block","body":"As <code>Log.d(&quot;TAG&quot;, &quot;This is a log message6&quot;);</code> is outside the <code>if</code> statement thus will always get called when <code>readFromIntent()</code> is called. But I guess what you really mean is <code>Log.d(&quot;TAG&quot;, &quot;This is a log message5&quot;);</code> is never called? Probably &quot;message6&quot; should be in an <code>else</code> block"}],"owner":{"account_id":8438080,"reputation":65,"user_id":7261686,"display_name":"LIsa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674629413,"creation_date":1674476197,"question_id":75209381,"body_markdown":"We have an NFC reader APP and it worked perfectly, but after the latest updates we have an issue. \r\n\r\nWhen the NFC Tag is brought close to the phone I always get the message *&quot;This is a log message6&quot;* printed.\r\n\r\nI think it&#39;s not getting inside the `if` condition: \r\n\r\n```java\r\n    private void readFromIntent(Intent intent) {\r\n    \r\n            String action = intent.getAction();\r\n            if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)\r\n                    || NfcAdapter.ACTION_TECH_DISCOVERED.equals(action)\r\n                    || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {\r\n    //            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\r\n    //            NdefMessage[] msgs = null;\r\n    //            if (rawMsgs != null) {\r\n    //                msgs = new NdefMessage[rawMsgs.length];\r\n    //                for (int i = 0; i &lt; rawMsgs.length; i++) {\r\n    //                    msgs[i] = (NdefMessage) rawMsgs[i];\r\n    //                }\r\n    //            }\r\n    //            buildTagViews(msgs);\r\n                Log.d(&quot;TAG&quot;, &quot;This is a log message5&quot;);\r\n                Toast.makeText(context, &quot;NGF132 Tag Detected, Please click the Button Above to Activate Now.&quot;, Toast.LENGTH_LONG ).show();\r\n            }\r\n            Log.d(&quot;TAG&quot;, &quot;This is a log message6&quot;);\r\n        }\r\n```\r\n\r\nThis is the Read Function \r\n\r\n```java\r\n       readFromIntent(getIntent());\r\n    //      pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\r\n            pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_IMMUTABLE);\r\n            IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);\r\n            tagDetected.addCategory(Intent.CATEGORY_DEFAULT);\r\n            writeTagFilters = new IntentFilter[] { tagDetected };\r\n        }\r\n\r\n```\r\n\r\nI have all the required permissions in the manifest file. \r\n  \r\n```java\r\n      @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\r\n        }\r\n    \r\n        @Override\r\n        protected void onPause() {\r\n            super.onPause();\r\n            nfcAdapter.disableForegroundDispatch(this);\r\n        }\r\n```","title":"NFC Reader Android APP readFromIntent not working","body":"<p>We have an NFC reader APP and it worked perfectly, but after the latest updates we have an issue.</p>\n<p>When the NFC Tag is brought close to the phone I always get the message <em>&quot;This is a log message6&quot;</em> printed.</p>\n<p>I think it's not getting inside the <code>if</code> condition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void readFromIntent(Intent intent) {\n    \n            String action = intent.getAction();\n            if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)\n                    || NfcAdapter.ACTION_TECH_DISCOVERED.equals(action)\n                    || NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {\n    //            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\n    //            NdefMessage[] msgs = null;\n    //            if (rawMsgs != null) {\n    //                msgs = new NdefMessage[rawMsgs.length];\n    //                for (int i = 0; i &lt; rawMsgs.length; i++) {\n    //                    msgs[i] = (NdefMessage) rawMsgs[i];\n    //                }\n    //            }\n    //            buildTagViews(msgs);\n                Log.d(&quot;TAG&quot;, &quot;This is a log message5&quot;);\n                Toast.makeText(context, &quot;NGF132 Tag Detected, Please click the Button Above to Activate Now.&quot;, Toast.LENGTH_LONG ).show();\n            }\n            Log.d(&quot;TAG&quot;, &quot;This is a log message6&quot;);\n        }\n</code></pre>\n<p>This is the Read Function</p>\n<pre class=\"lang-java prettyprint-override\"><code>       readFromIntent(getIntent());\n    //      pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);\n            pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_IMMUTABLE);\n            IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);\n            tagDetected.addCategory(Intent.CATEGORY_DEFAULT);\n            writeTagFilters = new IntentFilter[] { tagDetected };\n        }\n\n</code></pre>\n<p>I have all the required permissions in the manifest file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>      @Override\n        protected void onResume() {\n            super.onResume();\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\n        }\n    \n        @Override\n        protected void onPause() {\n            super.onPause();\n            nfcAdapter.disableForegroundDispatch(this);\n        }\n</code></pre>\n"},{"tags":["java","null","java-stream"],"comments":[{"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"score":3,"creation_date":1548859504,"post_id":54443150,"comment_id":95695429,"body_markdown":"Why would you want to do this opposed to using `Optional`? Why not try to eliminate null as a factor, opposed to making it a weighted value?","body":"Why would you want to do this opposed to using <code>Optional</code>? Why not try to eliminate null as a factor, opposed to making it a weighted value?"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1548859525,"post_id":54443150,"comment_id":95695445,"body_markdown":"merge it into the outer if. Or write a `StringUtil.notNullAndEmpty(text)` method","body":"merge it into the outer if. Or write a <code>StringUtil.notNullAndEmpty(text)</code> method"},{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":3,"creation_date":1548859558,"post_id":54443150,"comment_id":95695464,"body_markdown":"Where did you get `text.equals(null)` from? This expression is always false or throws an NPE.","body":"Where did you get <code>text.equals(null)</code> from? This expression is always false or throws an NPE."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1548859694,"post_id":54443150,"comment_id":95695562,"body_markdown":"Did you consider using Kotlin? `if (text?.isEmpty() != null)`, and you can even add methods to String class, like `String#toDisplay()`.","body":"Did you consider using Kotlin? <code>if (text?.isEmpty() != null)</code>, and you can even add methods to String class, like <code>String#toDisplay()</code>."},{"owner":{"account_id":13763323,"reputation":127,"user_id":9932512,"display_name":"designuj"},"score":0,"creation_date":1548859949,"post_id":54443150,"comment_id":95695759,"body_markdown":"@VinceEmigh I need to deliver `null if empty`","body":"@VinceEmigh I need to deliver <code>null if empty</code>"}],"answers":[{"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":2,"creation_date":1548859863,"post_id":54443231,"comment_id":95695705,"body_markdown":"Just an opinion, but using a third party library for such a minuscule task is just a waste.","body":"Just an opinion, but using a third party library for such a minuscule task is just a waste."},{"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1548861385,"post_id":54443231,"comment_id":95696758,"body_markdown":"@nullpointer Actually, maybe Java should include such methods directly in the `String` class, which would eliminate the need for third party libraries.  I agree that many use cases are probably borderline.","body":"@nullpointer Actually, maybe Java should include such methods directly in the <code>String</code> class, which would eliminate the need for third party libraries.  I agree that many use cases are probably borderline."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1548926899,"post_id":54443231,"comment_id":95722635,"body_markdown":"@TimBiegeleisen Java did include methods, especially with the last versions. However, especially these Apache methods with their `null` handling are a step into the wrong direction. Developers should avoid `null` instead of using these utility methods.","body":"@TimBiegeleisen Java did include methods, especially with the last versions. However, especially these Apache methods with their <code>null</code> handling are a step into the wrong direction. Developers should avoid <code>null</code> instead of using these utility methods."}],"tags":[],"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1548859599,"creation_date":1548859599,"answer_id":54443231,"question_id":54443150,"body_markdown":"I don&#39;t know the context in which you thought to mention streams relating to your question, but if you are open to the Apache StringUtils library, then one option would be to use the `StringUtils#isEmpty()` method:\r\n\r\n    if (StringUtils.isEmpty(text)) {\r\n        text = null;\r\n    }","title":"How to set null value if String is empty?","body":"<p>I don't know the context in which you thought to mention streams relating to your question, but if you are open to the Apache StringUtils library, then one option would be to use the <code>StringUtils#isEmpty()</code> method:</p>\n\n<pre><code>if (StringUtils.isEmpty(text)) {\n    text = null;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1548859763,"post_id":54443265,"comment_id":95695615,"body_markdown":"complete util possibly would be `private String checkEmptyAndNull(String text) {\n        if (text != null &amp;&amp; text.isEmpty()) {\n            text = null;\n        }\n        return text;\n    }`","body":"complete util possibly would be <code>private String checkEmptyAndNull(String text) {         if (text != null &amp;&amp; text.isEmpty()) {             text = null;         }         return text;     }</code>"},{"owner":{"account_id":2577707,"reputation":2286,"user_id":2235015,"display_name":"Florian Albrecht"},"score":3,"creation_date":1548859768,"post_id":54443265,"comment_id":95695626,"body_markdown":"`text.equals(null)` is always `false`, and will cause an NPE if `text` is `null`. Just write `text != null` (but OP made same mistake)","body":"<code>text.equals(null)</code> is always <code>false</code>, and will cause an NPE if <code>text</code> is <code>null</code>. Just write <code>text != null</code> (but OP made same mistake)"},{"owner":{"account_id":14722005,"reputation":3527,"user_id":10632291,"display_name":"Sandeepa"},"score":0,"creation_date":1548859949,"post_id":54443265,"comment_id":95695758,"body_markdown":"Just wanted to say that he can achive the same thing by using one if statement and missed the `text.equals(null)` part. My bad","body":"Just wanted to say that he can achive the same thing by using one if statement and missed the <code>text.equals(null)</code> part. My bad"}],"tags":[],"owner":{"account_id":14722005,"reputation":3527,"user_id":10632291,"display_name":"Sandeepa"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548859875,"creation_date":1548859701,"answer_id":54443265,"question_id":54443150,"body_markdown":"You can do the same thing by using a one if statement like below,\r\n\r\n        if (text != null &amp;&amp; text.isEmpty()) {\r\n            text = null;\r\n        }","title":"How to set null value if String is empty?","body":"<p>You can do the same thing by using a one if statement like below,</p>\n\n<pre><code>    if (text != null &amp;&amp; text.isEmpty()) {\n        text = null;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14535244,"reputation":161564,"user_id":10498828,"display_name":"forpas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1548859858,"creation_date":1548859858,"answer_id":54443321,"question_id":54443150,"body_markdown":"Don&#39;t use `equals()` to check if a string is `null`, but:\r\n\r\n    if (text == null)\r\n\r\nSo \r\n\r\n    if (text != null &amp;&amp; text.isEmpty()) {\r\n        text = null;\r\n    }\r\nThis 1 line condition won&#39;t throw NPE if `text` is `null` because of short circuit evaluation.","title":"How to set null value if String is empty?","body":"<p>Don't use <code>equals()</code> to check if a string is <code>null</code>, but:</p>\n\n<pre><code>if (text == null)\n</code></pre>\n\n<p>So </p>\n\n<pre><code>if (text != null &amp;&amp; text.isEmpty()) {\n    text = null;\n}\n</code></pre>\n\n<p>This 1 line condition won't throw NPE if <code>text</code> is <code>null</code> because of short circuit evaluation.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1548926466,"post_id":54443338,"comment_id":95722375,"body_markdown":"You forgot to insert the `return` statement in your method. As a side note, starting with JDK&#160;11, you can use `text.isBlank()` instead of `text.trim().isEmpty()`.","body":"You forgot to insert the <code>return</code> statement in your method. As a side note, starting with JDK 11, you can use <code>text.isBlank()</code> instead of <code>text.trim().isEmpty()</code>."},{"owner":{"account_id":10059704,"reputation":71,"user_id":7436818,"display_name":"MikeM"},"score":0,"creation_date":1548946065,"post_id":54443338,"comment_id":95734227,"body_markdown":"Good catch, thanks. I&#39;ve been switching between groovy and java lately and groovy doesn&#39;t require a return.","body":"Good catch, thanks. I&#39;ve been switching between groovy and java lately and groovy doesn&#39;t require a return."}],"tags":[],"owner":{"account_id":10059704,"reputation":71,"user_id":7436818,"display_name":"MikeM"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548945918,"creation_date":1548859909,"answer_id":54443338,"question_id":54443150,"body_markdown":"In your example, if text is null then text.equals(null) will cause a NPE. You will want something like this:\r\n\r\n```\r\nif (text != null &amp;&amp; text.isEmpty()) {\r\n    text = null;\r\n}\r\n```\r\n\r\nIf you want whitespace considered empty as well, you will want to call trim() before calling isEmpty():\r\n\r\n```\r\nif (text != null &amp;&amp; text.trim().isEmpty()) {\r\n    text = null;\r\n}\r\n```\r\n\r\nSince you want to reuse this code, it makes sense to make this a utility method that you can call from any class:\r\n\r\n```\r\npublic static String setNullOnEmpty(final String text) {\r\n    return text != null &amp;&amp; text.trim().isEmpty() ? null : text;\r\n}\r\n```","title":"How to set null value if String is empty?","body":"<p>In your example, if text is null then text.equals(null) will cause a NPE. You will want something like this:</p>\n\n<pre><code>if (text != null &amp;&amp; text.isEmpty()) {\n    text = null;\n}\n</code></pre>\n\n<p>If you want whitespace considered empty as well, you will want to call trim() before calling isEmpty():</p>\n\n<pre><code>if (text != null &amp;&amp; text.trim().isEmpty()) {\n    text = null;\n}\n</code></pre>\n\n<p>Since you want to reuse this code, it makes sense to make this a utility method that you can call from any class:</p>\n\n<pre><code>public static String setNullOnEmpty(final String text) {\n    return text != null &amp;&amp; text.trim().isEmpty() ? null : text;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12235485,"reputation":93,"user_id":8930059,"display_name":"Pond Premtoon"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1548860581,"creation_date":1548860581,"answer_id":54443564,"question_id":54443150,"body_markdown":"I don&#39;t have a better answer to your exact problem than what has already been posted. However, I would strongly question why you would want to conflate empty strings and nulls into nulls. Nulls are generally a bad idea, a &quot;billion-dollar mistake&quot;, to quote Tony Hoare, who himself invented null references. [This blog post](https://www.lucidchart.com/techblog/2015/08/31/the-worst-mistake-of-computer-science/) has some good arguments!\r\n\r\nHave you considered going the opposite direction, converting any null strings to empty strings? That way you only have to deal with strings for most of your code and can stop worrying about null pointer exceptions. \r\n\r\nBetter yet, take a look at the Optional type, which represents an object that may or may not be present. This came about in Java 8 as a better way to represent absence than nulls. Here&#39;s a [blog post](https://www.baeldung.com/java-optional) that explains it.","title":"How to set null value if String is empty?","body":"<p>I don't have a better answer to your exact problem than what has already been posted. However, I would strongly question why you would want to conflate empty strings and nulls into nulls. Nulls are generally a bad idea, a \"billion-dollar mistake\", to quote Tony Hoare, who himself invented null references. <a href=\"https://www.lucidchart.com/techblog/2015/08/31/the-worst-mistake-of-computer-science/\" rel=\"nofollow noreferrer\">This blog post</a> has some good arguments!</p>\n\n<p>Have you considered going the opposite direction, converting any null strings to empty strings? That way you only have to deal with strings for most of your code and can stop worrying about null pointer exceptions. </p>\n\n<p>Better yet, take a look at the Optional type, which represents an object that may or may not be present. This came about in Java 8 as a better way to represent absence than nulls. Here's a <a href=\"https://www.baeldung.com/java-optional\" rel=\"nofollow noreferrer\">blog post</a> that explains it.</p>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1564561522,"creation_date":1564561522,"answer_id":57286342,"question_id":54443150,"body_markdown":"Another alternative using Guava&#39;s [emptyToNull][1]:\r\n\r\n    text = Strings.emptyToNull(text);\r\n\r\n  [1]: https://guava.dev/releases/20.0/api/docs/com/google/common/base/Strings.html#emptyToNull-java.lang.String-","title":"How to set null value if String is empty?","body":"<p>Another alternative using Guava's <a href=\"https://guava.dev/releases/20.0/api/docs/com/google/common/base/Strings.html#emptyToNull-java.lang.String-\" rel=\"noreferrer\">emptyToNull</a>:</p>\n\n<pre><code>text = Strings.emptyToNull(text);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16738928,"reputation":48,"user_id":12099200,"display_name":"Bikash Pandit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674629083,"creation_date":1674629083,"answer_id":75230494,"question_id":54443150,"body_markdown":"We have a method in org.apache.commons.lang.StringUtils.trimToNull(s); and with this we can get the empty string value to null value\r\n\r\n    String text = StringUtils.trimToNull(emptyStringValue);","title":"How to set null value if String is empty?","body":"<p>We have a method in org.apache.commons.lang.StringUtils.trimToNull(s); and with this we can get the empty string value to null value</p>\n<pre><code>String text = StringUtils.trimToNull(emptyStringValue);\n</code></pre>\n"}],"owner":{"account_id":13763323,"reputation":127,"user_id":9932512,"display_name":"designuj"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18131,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":54443338,"answer_count":7,"score":6,"last_activity_date":1674629083,"creation_date":1548859375,"question_id":54443150,"body_markdown":"Sometimes developers checks if *Strings* are *null* values, if yes, sets those Strings as empty value:\r\n```\r\nif (text == null) {\r\n    text = &quot;&quot;;\r\n}\r\n```\r\nWhat I want to do is to write opposite *if* statement:\r\n```\r\nif (text.isEmpty()) {\r\n    text = null;\r\n}\r\n```\r\nBut...first of all - I have to check (as usually) if this String is null to avoid NullPointerException, so right now it looks like this (very ugly but KISS):\r\n```\r\nif (!text == null) {\r\n    if (text.isEmpty()) {\r\n        text = null;\r\n    }\r\n}\r\n```\r\n\r\nMy class has several String fields and for all of them I have to prepare this solution.\r\nAny basic ideas for more efficient code? Is it a good way to strech it to lambda expressions and iterate throught all String fields in this class?\r\n\r\n","title":"How to set null value if String is empty?","body":"<p>Sometimes developers checks if <em>Strings</em> are <em>null</em> values, if yes, sets those Strings as empty value:</p>\n\n<pre><code>if (text == null) {\n    text = \"\";\n}\n</code></pre>\n\n<p>What I want to do is to write opposite <em>if</em> statement:</p>\n\n<pre><code>if (text.isEmpty()) {\n    text = null;\n}\n</code></pre>\n\n<p>But...first of all - I have to check (as usually) if this String is null to avoid NullPointerException, so right now it looks like this (very ugly but KISS):</p>\n\n<pre><code>if (!text == null) {\n    if (text.isEmpty()) {\n        text = null;\n    }\n}\n</code></pre>\n\n<p>My class has several String fields and for all of them I have to prepare this solution.\nAny basic ideas for more efficient code? Is it a good way to strech it to lambda expressions and iterate throught all String fields in this class?</p>\n"},{"tags":["java","netbeans","graalvm"],"answers":[{"comments":[{"owner":{"account_id":11460714,"reputation":1959,"user_id":8400446,"accept_rate":100,"display_name":"Michael"},"score":0,"creation_date":1669452278,"post_id":74559268,"comment_id":131647250,"body_markdown":"Thats a good idea. can&#39;t find anything on the netbeans page which jdk versions are supported...? But I am pretty sure that netbeans recognized the platform as JDK 19 (netbeans is started with the same jdk and thats the first platform netbeans offers for projects, the one it is started with) and also offered a source code switch in the project settings with &quot;source 19&quot;. But I&#39;ll give it a try on monday when I am back to work, don&#39;t have access to the project from home.","body":"Thats a good idea. can&#39;t find anything on the netbeans page which jdk versions are supported...? But I am pretty sure that netbeans recognized the platform as JDK 19 (netbeans is started with the same jdk and thats the first platform netbeans offers for projects, the one it is started with) and also offered a source code switch in the project settings with &quot;source 19&quot;. But I&#39;ll give it a try on monday when I am back to work, don&#39;t have access to the project from home."},{"owner":{"account_id":11460714,"reputation":1959,"user_id":8400446,"accept_rate":100,"display_name":"Michael"},"score":0,"creation_date":1669615712,"post_id":74559268,"comment_id":131673645,"body_markdown":"tried `graalvm-ce-java17-22.3.0`, still getting the same error :(","body":"tried <code>graalvm-ce-java17-22.3.0</code>, still getting the same error :("}],"tags":[],"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669285898,"creation_date":1669285898,"answer_id":74559268,"question_id":74547223,"body_markdown":"Does Netbeans support JDK19? You might want to try `graalvm-ce-java17-22.3.0`, i.e. upgrade GraalVM version but stay on the JDK17 line","title":"projects with jaxb in netbreans are throwing an error if netbeans is executed with graalvm 22+","body":"<p>Does Netbeans support JDK19? You might want to try <code>graalvm-ce-java17-22.3.0</code>, i.e. upgrade GraalVM version but stay on the JDK17 line</p>\n"}],"owner":{"account_id":11460714,"reputation":1959,"user_id":8400446,"accept_rate":100,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674628475,"creation_date":1669208413,"question_id":74547223,"body_markdown":"Today i&#39;ve upgraded my local jdk from `graalvm-ce-java17-22.2.0` to `graalvm-ce-java19-22.3.0` because the runtime crashed a few times in my debug sessions.\r\nThen i wanted to run my netbeans project, which failed with the following error message:\r\n\r\n```\r\nError: Could not find or load main class FQN-OF-MAIN-CLASS in module jdk.internal.vm.compiler\r\nC:\\...\\nbproject\\build-impl.xml:1418: The following error occurred while executing this line:\r\nC:\\...\\nbproject\\build-impl.xml:924: The following error occurred while executing this line:\r\nC:\\...\\nbproject\\build-impl.xml:943: Java returned: 1\r\nBUILD FAILED (total time: 2 seconds)\r\n```\r\n\r\nBecause the project was running before the upgrade, I&#39;ve closed netbeans, deleted the netbeans-cache, updated the environment variables to point to the new jdk (wasnt neccessary before), changed netbeans conf so that netbeans is running with the new jdk too and started netbeans again. \r\n\r\nsame error. creating another runable class in this project or executing a single class instead of the hole project results in the same error too. creating a new project running a hello-world-file succeeds. also, in the &quot;problematic&quot; project, if i hit clean-and-build and run the resulting jar from command line thats works well, but netbeans seems to have a problem debugging/running the project from within the ide. also restored `nbproject/build-impl.xml` and `nbproject/project.xml` from repository, but still getting the same error. also tried going back to v22.2 but now i get the same error there too.\r\n\r\nSo I assume that I messed it up somewhere, but don&#39;t know where I should start looking? The error points to the ide generated ant script which i havent touched, older projects and newly created projects are running fine...\r\n\r\nany ideas?\r\n\r\nnetbeans 15  \r\nwindows 10 22H2 x64  \r\ngraalvm-ce-java19-22.3.0\r\n\r\nEDIT 1:  \r\nIt does not seem related to source code. removed every file from `/src` and created a new class `test/NewClass.java` with a main that also produces the error.\r\n\r\nEDIT 2:  \r\nTried `graalvm-ce-java17-22.3.0`, but got the same error.\r\n\r\nEDIT 3:  \r\nCould track it down (a bit), it&#39;s somehow related to JAXB bindings. Creating a new project, changing Platform to 1.8 with StandardJDK, adding a JAXB-Binding and running an empty main class works. Changing the Platform to 16/17/19 with GraalVM produces the error. Reverting back to 1.8. resolves the error. Of course the problematic project makes use of JAXB, but its running with GraalVM 16/17 for quite some time without producing the error. Fun fact, netbeans is adding a JAXB version 2.3.5 which seems not public availiable on the maven repository.\r\n\r\nEDIT 4:  \r\nJAXB itself seems to be not the primary problem, but its related. If netbeans is executed with the standard JDK 1.8 or GraalVM 21.1 JAXB works in all kind of projects, regardless of the platform the project is executed with.  \r\n***But if I change the JDK netbeans is started with to GraalVM 22 or newer, then projects containg JAXB are producing the above error.***  \r\nSince JAXB in Netbeans 15 works with GraalVM 21 but not newer versions I think that probably be a problem with GraalVM rather than netbeans.","title":"projects with jaxb in netbreans are throwing an error if netbeans is executed with graalvm 22+","body":"<p>Today i've upgraded my local jdk from <code>graalvm-ce-java17-22.2.0</code> to <code>graalvm-ce-java19-22.3.0</code> because the runtime crashed a few times in my debug sessions.\nThen i wanted to run my netbeans project, which failed with the following error message:</p>\n<pre><code>Error: Could not find or load main class FQN-OF-MAIN-CLASS in module jdk.internal.vm.compiler\nC:\\...\\nbproject\\build-impl.xml:1418: The following error occurred while executing this line:\nC:\\...\\nbproject\\build-impl.xml:924: The following error occurred while executing this line:\nC:\\...\\nbproject\\build-impl.xml:943: Java returned: 1\nBUILD FAILED (total time: 2 seconds)\n</code></pre>\n<p>Because the project was running before the upgrade, I've closed netbeans, deleted the netbeans-cache, updated the environment variables to point to the new jdk (wasnt neccessary before), changed netbeans conf so that netbeans is running with the new jdk too and started netbeans again.</p>\n<p>same error. creating another runable class in this project or executing a single class instead of the hole project results in the same error too. creating a new project running a hello-world-file succeeds. also, in the &quot;problematic&quot; project, if i hit clean-and-build and run the resulting jar from command line thats works well, but netbeans seems to have a problem debugging/running the project from within the ide. also restored <code>nbproject/build-impl.xml</code> and <code>nbproject/project.xml</code> from repository, but still getting the same error. also tried going back to v22.2 but now i get the same error there too.</p>\n<p>So I assume that I messed it up somewhere, but don't know where I should start looking? The error points to the ide generated ant script which i havent touched, older projects and newly created projects are running fine...</p>\n<p>any ideas?</p>\n<p>netbeans 15<br />\nwindows 10 22H2 x64<br />\ngraalvm-ce-java19-22.3.0</p>\n<p>EDIT 1:<br />\nIt does not seem related to source code. removed every file from <code>/src</code> and created a new class <code>test/NewClass.java</code> with a main that also produces the error.</p>\n<p>EDIT 2:<br />\nTried <code>graalvm-ce-java17-22.3.0</code>, but got the same error.</p>\n<p>EDIT 3:<br />\nCould track it down (a bit), it's somehow related to JAXB bindings. Creating a new project, changing Platform to 1.8 with StandardJDK, adding a JAXB-Binding and running an empty main class works. Changing the Platform to 16/17/19 with GraalVM produces the error. Reverting back to 1.8. resolves the error. Of course the problematic project makes use of JAXB, but its running with GraalVM 16/17 for quite some time without producing the error. Fun fact, netbeans is adding a JAXB version 2.3.5 which seems not public availiable on the maven repository.</p>\n<p>EDIT 4:<br />\nJAXB itself seems to be not the primary problem, but its related. If netbeans is executed with the standard JDK 1.8 or GraalVM 21.1 JAXB works in all kind of projects, regardless of the platform the project is executed with.<br />\n<em><strong>But if I change the JDK netbeans is started with to GraalVM 22 or newer, then projects containg JAXB are producing the above error.</strong></em><br />\nSince JAXB in Netbeans 15 works with GraalVM 21 but not newer versions I think that probably be a problem with GraalVM rather than netbeans.</p>\n"},{"tags":["java","deserialization","objectmapper"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1674629912,"post_id":75230426,"comment_id":132752798,"body_markdown":"If value is null, then `value.toString()` will fail. Either don&#39;t put it in the map if it is null, or put `&quot;null&quot;` (the string) into the map instead (`Objects.toString` might help). But it all depends on your requirements. This question has nothing to do with deserialization, but is a classical NPE question.","body":"If value is null, then <code>value.toString()</code> will fail. Either don&#39;t put it in the map if it is null, or put <code>&quot;null&quot;</code> (the string) into the map instead (<code>Objects.toString</code> might help). But it all depends on your requirements. This question has nothing to do with deserialization, but is a classical NPE question."},{"owner":{"account_id":11092824,"reputation":484,"user_id":8144061,"accept_rate":100,"display_name":"Wing Kui Tsoi"},"score":0,"creation_date":1674630846,"post_id":75230426,"comment_id":132753016,"body_markdown":"I think you should not pass null obj to the method convertFilterToMultiValueMap(ObjectMapper objectMapper, Object obj). Maybe you can check obj != null before the method call?","body":"I think you should not pass null obj to the method convertFilterToMultiValueMap(ObjectMapper objectMapper, Object obj). Maybe you can check obj != null before the method call?"}],"owner":{"account_id":17767104,"reputation":11,"user_id":12901700,"display_name":"Anamika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674666542,"answer_count":0,"score":0,"last_activity_date":1674628472,"creation_date":1674628472,"question_id":75230426,"body_markdown":"I have the below function for deserialization. I am passing an object to obj field. If one of the value in object is empty string it gives me a null pointer exception. How can I avoid this situation?\r\n\r\n    public static MultiValueMap convertFilterToMultiValueMap(ObjectMapper objectMapper, Object obj) {\r\n            MultiValueMap parameters = new LinkedMultiValueMap();\r\n            Map&lt;String, Object&gt; map = (Map)objectMapper.convertValue(obj, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n            });\r\n            map.forEach((key, value) -&gt; {\r\n                if (value instanceof List) {\r\n                    ((List)value).forEach((item) -&gt; {\r\n                        map.put(key, item.toString());\r\n                    });\r\n                } else {\r\n                    map.put(key, value.toString());\r\n                }\r\n    \r\n            });\r\n            parameters.setAll(map);\r\n            return parameters;\r\n        }","title":"Object mapper gives null pointer exception for empty string while doing deserialization","body":"<p>I have the below function for deserialization. I am passing an object to obj field. If one of the value in object is empty string it gives me a null pointer exception. How can I avoid this situation?</p>\n<pre><code>public static MultiValueMap convertFilterToMultiValueMap(ObjectMapper objectMapper, Object obj) {\n        MultiValueMap parameters = new LinkedMultiValueMap();\n        Map&lt;String, Object&gt; map = (Map)objectMapper.convertValue(obj, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        });\n        map.forEach((key, value) -&gt; {\n            if (value instanceof List) {\n                ((List)value).forEach((item) -&gt; {\n                    map.put(key, item.toString());\n                });\n            } else {\n                map.put(key, value.toString());\n            }\n\n        });\n        parameters.setAll(map);\n        return parameters;\n    }\n</code></pre>\n"},{"tags":["java","generics","parameterized-types"],"comments":[{"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"score":3,"creation_date":1674626607,"post_id":75230178,"comment_id":132752237,"body_markdown":"The type parameter of the `PaperBox`, i.e. `T`, is not propagated to the `Box`, so it becomes a `Box&lt;Object&gt;`, hence anything fits in. Change it to `class PaperBox&lt;T extends Fruit&gt; extends Box&lt;T&gt; {}`","body":"The type parameter of the <code>PaperBox</code>, i.e. <code>T</code>, is not propagated to the <code>Box</code>, so it becomes a <code>Box&lt;Object&gt;</code>, hence anything fits in. Change it to <code>class PaperBox&lt;T extends Fruit&gt; extends Box&lt;T&gt; {}</code>"}],"owner":{"account_id":23018541,"reputation":13,"user_id":17139907,"display_name":"Issac Kim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674626412,"creation_date":1674626412,"question_id":75230178,"body_markdown":"I restricted the parameterized type, but why can I designate not only the sub class but also the super class?\r\n\r\nI expected the StrawberryPaperBox instance to only receive Strawberry classes as parameterized type, but it acts like it can receive not only Strawberry classes but also Fruit, Berry, Grape, and Toy classes as parameterized type.\r\n\r\nI&#39;d appreciate it if you could answer that.\r\n\r\n```\r\nimport java.util.ArrayList;\r\n\r\nclass Fruit{public String toString() {return &quot;Fruit&quot;;}}\r\nclass Berry extends Fruit{public String toString() {return &quot;Berry&quot;;}}\r\nclass Strawberry extends Berry {public String toString() {return &quot;Strawberry&quot;;}}\r\nclass Grape extends Fruit{public String toString() {return &quot;Grape&quot;;}}\r\nclass Toy{public String toString() {return &quot;Toy&quot;;}}\r\n\r\nclass Box&lt;T&gt;{\r\n    ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();\r\n    void add(T item){list.add(item);}\r\n    T get(int i){return list.get(i);}\r\n    int size(){return list.size();}\r\n    public String toString(){return list.toString();}\r\n}\r\n\r\nclass PaperBox&lt;T extends Fruit&gt; extends Box{}\r\n\r\npublic class Test{\r\n    public static void main(String[] args) {\r\n        PaperBox&lt;Strawberry&gt; strawberryPaperBox = new PaperBox&lt;&gt;();\r\n\r\n        strawberryPaperBox.add(new Strawberry());\r\n        strawberryPaperBox.add(new Fruit());\r\n        strawberryPaperBox.add(new Berry());\r\n        strawberryPaperBox.add(new Grape());\r\n        strawberryPaperBox.add(new Toy());\r\n\r\n        System.out.print(strawberryPaperBox + &quot; &quot;);\r\n    }\r\n}\r\n```\r\n\r\nI tried to understand by drawing a class inheritance diagram, but I don&#39;t understand.","title":"restricted generic class in java","body":"<p>I restricted the parameterized type, but why can I designate not only the sub class but also the super class?</p>\n<p>I expected the StrawberryPaperBox instance to only receive Strawberry classes as parameterized type, but it acts like it can receive not only Strawberry classes but also Fruit, Berry, Grape, and Toy classes as parameterized type.</p>\n<p>I'd appreciate it if you could answer that.</p>\n<pre><code>import java.util.ArrayList;\n\nclass Fruit{public String toString() {return &quot;Fruit&quot;;}}\nclass Berry extends Fruit{public String toString() {return &quot;Berry&quot;;}}\nclass Strawberry extends Berry {public String toString() {return &quot;Strawberry&quot;;}}\nclass Grape extends Fruit{public String toString() {return &quot;Grape&quot;;}}\nclass Toy{public String toString() {return &quot;Toy&quot;;}}\n\nclass Box&lt;T&gt;{\n    ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();\n    void add(T item){list.add(item);}\n    T get(int i){return list.get(i);}\n    int size(){return list.size();}\n    public String toString(){return list.toString();}\n}\n\nclass PaperBox&lt;T extends Fruit&gt; extends Box{}\n\npublic class Test{\n    public static void main(String[] args) {\n        PaperBox&lt;Strawberry&gt; strawberryPaperBox = new PaperBox&lt;&gt;();\n\n        strawberryPaperBox.add(new Strawberry());\n        strawberryPaperBox.add(new Fruit());\n        strawberryPaperBox.add(new Berry());\n        strawberryPaperBox.add(new Grape());\n        strawberryPaperBox.add(new Toy());\n\n        System.out.print(strawberryPaperBox + &quot; &quot;);\n    }\n}\n</code></pre>\n<p>I tried to understand by drawing a class inheritance diagram, but I don't understand.</p>\n"},{"tags":["java","mocking","mockito","powermockito"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1674721405,"post_id":75230147,"comment_id":132775228,"body_markdown":"Change your class&#39; design to accept a factory in its constructor, then inject a factory instance in your test which keeps track of the created objects. No need for Mockito.","body":"Change your class&#39; design to accept a factory in its constructor, then inject a factory instance in your test which keeps track of the created objects. No need for Mockito."},{"owner":{"account_id":5161187,"reputation":221,"user_id":4132818,"accept_rate":50,"display_name":"Bryan Tan"},"score":0,"creation_date":1677704757,"post_id":75230147,"comment_id":133393001,"body_markdown":"@knittl Thank you, that works for my use case. Still wish I could do the mocked one since its just a tool that was taken away by the upgrade...","body":"@knittl Thank you, that works for my use case. Still wish I could do the mocked one since its just a tool that was taken away by the upgrade..."}],"owner":{"account_id":5161187,"reputation":221,"user_id":4132818,"accept_rate":50,"display_name":"Bryan Tan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674626088,"creation_date":1674626088,"question_id":75230147,"body_markdown":"For a singleton class I can use something like:\r\n```\r\n\r\npublic void test() {\r\nFoo foo = new Foo();\r\n\r\ntry (MockedStatic&lt;Foo&gt; staticFoo = mockStatic(Foo.class)) {\r\nstaticFoo.when(() -&gt; Foo.getFoo()).thenReturn(foo);\r\nfoo.setVariousValues();\r\nfooManipulator.makeNewFooAndDoStuff();\r\n...\r\n```\r\n\r\nHowever I need to do use this for objects that aren&#39;t singleton, that are instantiated by:\r\n\r\n```\r\nFoo foo = new Foo();\r\n```\r\n\r\nUsing Mockito.mockedConstruction I see I can\r\n```\r\n try (MockedConstruction mocked = mockConstruction(Foo.class)) {\r\n Foo foo = new Foo();\r\n when(foo.method()).thenReturn(&quot;bar&quot;);\r\n```\r\nWhich basically makes the constructor return a Mockito.mock(Foo.class), but I don&#39;t want a mocked Foo, I want a real Foo object that I have access to.\r\n\r\nIn PowerMockito this was possible as so:\r\n```\r\nFoo foo = new Foo();\r\nPowerMockito.whenNew(Foo.class).withNoArguments().thenReturn(foo);\r\nfoo.setVariousValues();\r\nfooManipulator.makeNewFooAndDoStuff();\r\n```\r\n\r\nIs this possible or out of the scope of the new inline static mocks?","title":"How do I mock a constructor with Mockito so I have access to the real object?","body":"<p>For a singleton class I can use something like:</p>\n<pre><code>\npublic void test() {\nFoo foo = new Foo();\n\ntry (MockedStatic&lt;Foo&gt; staticFoo = mockStatic(Foo.class)) {\nstaticFoo.when(() -&gt; Foo.getFoo()).thenReturn(foo);\nfoo.setVariousValues();\nfooManipulator.makeNewFooAndDoStuff();\n...\n</code></pre>\n<p>However I need to do use this for objects that aren't singleton, that are instantiated by:</p>\n<pre><code>Foo foo = new Foo();\n</code></pre>\n<p>Using Mockito.mockedConstruction I see I can</p>\n<pre><code> try (MockedConstruction mocked = mockConstruction(Foo.class)) {\n Foo foo = new Foo();\n when(foo.method()).thenReturn(&quot;bar&quot;);\n</code></pre>\n<p>Which basically makes the constructor return a Mockito.mock(Foo.class), but I don't want a mocked Foo, I want a real Foo object that I have access to.</p>\n<p>In PowerMockito this was possible as so:</p>\n<pre><code>Foo foo = new Foo();\nPowerMockito.whenNew(Foo.class).withNoArguments().thenReturn(foo);\nfoo.setVariousValues();\nfooManipulator.makeNewFooAndDoStuff();\n</code></pre>\n<p>Is this possible or out of the scope of the new inline static mocks?</p>\n"},{"tags":["java","runtime-error"],"comments":[{"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"score":1,"creation_date":1674455298,"post_id":75206225,"comment_id":132709641,"body_markdown":"Well, that&#39;s apparently a failing JUnit test. But your question lacks important information on what are you trying to achieve and how.","body":"Well, that&#39;s apparently a failing JUnit test. But your question lacks important information on what are you trying to achieve and how."},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":2,"creation_date":1674456221,"post_id":75206225,"comment_id":132709775,"body_markdown":"Your loop runs until remainingGuesses is &gt;= 0. So assertTrue(remainingGuesses &gt;=0) is obviously false afterwards if you don&#39;t hit the break point.","body":"Your loop runs until remainingGuesses is &gt;= 0. So assertTrue(remainingGuesses &gt;=0) is obviously false afterwards if you don&#39;t hit the break point."}],"answers":[{"comments":[{"owner":{"account_id":19993599,"reputation":33,"user_id":14654102,"display_name":"Suryansh Kushwaha"},"score":0,"creation_date":1674459682,"post_id":75206333,"comment_id":132710353,"body_markdown":"meaning my implementation is correct but it&#39;s due to assertTrue that I am getting the error?\nSorry I have just started this bit, I am trying to understand. \nthanks for your help.","body":"meaning my implementation is correct but it&#39;s due to assertTrue that I am getting the error? Sorry I have just started this bit, I am trying to understand.  thanks for your help."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1674460411,"post_id":75206333,"comment_id":132710474,"body_markdown":"Does your implementation ever guess the correct number? I suggest that you print out each guess.","body":"Does your implementation ever guess the correct number? I suggest that you print out each guess."},{"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"score":1,"creation_date":1674460843,"post_id":75206333,"comment_id":132710571,"body_markdown":"@SuryanshKushwaha Your implementation is probably not quite right. 1) Change `(low - high)` to `(high - low)` to get positive numbers within the `low..high` interval and 2) the assumption that this approach will *always* lead to a correctly guessed number is wrong as long as `high - low` is higher than the number of attempts. Also be aware that 3) `Math.random()` never returns `1`, so your `guess()` method will never return the value of `high`.","body":"@SuryanshKushwaha Your implementation is probably not quite right. 1) Change <code>(low - high)</code> to <code>(high - low)</code> to get positive numbers within the <code>low..high</code> interval and 2) the assumption that this approach will <i>always</i> lead to a correctly guessed number is wrong as long as <code>high - low</code> is higher than the number of attempts. Also be aware that 3) <code>Math.random()</code> never returns <code>1</code>, so your <code>guess()</code> method will never return the value of <code>high</code>."},{"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"score":1,"creation_date":1674461120,"post_id":75206333,"comment_id":132710636,"body_markdown":"@SuryanshKushwaha And yes, you&#39;re getting that error because of `assertTrue`. :-)","body":"@SuryanshKushwaha And yes, you&#39;re getting that error because of <code>assertTrue</code>. :-)"},{"owner":{"account_id":19993599,"reputation":33,"user_id":14654102,"display_name":"Suryansh Kushwaha"},"score":0,"creation_date":1674624509,"post_id":75206333,"comment_id":132751904,"body_markdown":"@Newerth Thank you so much for your help. How would you suggest me to take care of Math.random(). Do you know any other way around for guessing a number in a range of given number (both inclusive)?","body":"@Newerth Thank you so much for your help. How would you suggest me to take care of Math.random(). Do you know any other way around for guessing a number in a range of given number (both inclusive)?"},{"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"score":0,"creation_date":1674625886,"post_id":75206333,"comment_id":132752117,"body_markdown":"@SuryanshKushwaha You almost had it. :-) See the link in the updated answer.","body":"@SuryanshKushwaha You almost had it. :-) See the link in the updated answer."}],"tags":[],"owner":{"account_id":349165,"reputation":559,"user_id":684296,"accept_rate":80,"display_name":"Newerth"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674625846,"creation_date":1674456240,"answer_id":75206333,"question_id":75206225,"body_markdown":"The exception you&#39;re getting is a result of failing the `guess()` test.\r\n\r\n    assertTrue(remainingGuesses &gt;= 0);\r\n\r\nIn other words, you&#39;re expecting the `hiddenNumber` to be found within 11 steps (0..10), but it&#39;s not. And there&#39;s no reason for it to be. Your code returns negative numbers.\r\n\r\nAlso it wouldn&#39;t work even if it was returning positive numbers, since you could easily guess 0, 1, 2 ... up to 10, ending with 10 as `low` and 1000 as `high`.\r\n\r\nAlso -- how to get random numbers within a specific range: https://stackoverflow.com/a/5887745/684296","title":"Exception in thread &quot;main&quot; java.lang.AssertionError. What shall I do?","body":"<p>The exception you're getting is a result of failing the <code>guess()</code> test.</p>\n<pre><code>assertTrue(remainingGuesses &gt;= 0);\n</code></pre>\n<p>In other words, you're expecting the <code>hiddenNumber</code> to be found within 11 steps (0..10), but it's not. And there's no reason for it to be. Your code returns negative numbers.</p>\n<p>Also it wouldn't work even if it was returning positive numbers, since you could easily guess 0, 1, 2 ... up to 10, ending with 10 as <code>low</code> and 1000 as <code>high</code>.</p>\n<p>Also -- how to get random numbers within a specific range: <a href=\"https://stackoverflow.com/a/5887745/684296\">https://stackoverflow.com/a/5887745/684296</a></p>\n"}],"owner":{"account_id":19993599,"reputation":33,"user_id":14654102,"display_name":"Suryansh Kushwaha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1674625846,"creation_date":1674455146,"question_id":75206225,"body_markdown":"I am trying to make a program which will take a random guess from a range of numbers and checks whether it matches with the given number. \r\n\r\nIt will run 10times, it the program guesses the correct answer then it will terminate but if not then it will terminate with rejection.\r\n\r\n```\r\nat GuessingTest.main(GuessingTest.java:33)\r\n**current directly** ; /usr/bin/env /Li\r\nbrary/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/java @/var/folders/zl/r96mn6p116125gw39hst2gp40000gn/T/cp_2tq0yp3psptn6qjx3o6su\r\nw328.argfile GuessingTest \r\nException in thread &quot;main&quot; java.lang.AssertionError\r\n        at org.junit.Assert.fail(Assert.java:87)\r\n        at org.junit.Assert.assertTrue(Assert.java:42)\r\n        at org.junit.Assert.assertTrue(Assert.java:53)\r\n        at GuessingTest.guess(GuessingTest.java:30)\r\n        at GuessingTest.main(GuessingTest.java:35)\r\n```\r\n\r\nBelow is my code\r\nGuessing.java\r\n\r\n```\r\npublic class Guessing {\r\n\r\n    // Your local variables here\r\n    private int low = 0;\r\n    private int high = 1000;\r\n    int randomNum;\r\n\r\n    /**\r\n     * Implement how your algorithm should make a guess here\r\n     */\r\n    public int guess() {\r\n        randomNum = (int) ((Math.random() * (low - high)) + low);\r\n        return randomNum;\r\n    }\r\n\r\n    /**\r\n     * Implement how your algorithm should update its guess here\r\n     */\r\n    public void update(int answer) {\r\n        if (answer == 1) {\r\n            low = randomNum;\r\n        } else if (answer == -1) {\r\n            high = randomNum;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nGuessingTest.java\r\n\r\n```\r\n\r\nimport org.junit.Test;\r\n\r\nimport java.util.Random;\r\n\r\nimport static org.junit.Assert.*;\r\n\r\npublic class GuessingTest {\r\n\r\n\r\n    @Test\r\n    public void guess() {\r\n        Random r = new Random();\r\n        int hiddenNumber = r.nextInt(1001);\r\n\r\n        Guessing g = new Guessing();\r\n\r\n        int remainingGuesses = 10;\r\n        while (remainingGuesses &gt;= 0) {\r\n            int guess = g.guess();\r\n            if (guess == hiddenNumber) {\r\n                break;\r\n            } else if(guess &gt; hiddenNumber) {\r\n                g.update(1);\r\n                remainingGuesses--;\r\n            } else {\r\n                g.update(-1);\r\n                remainingGuesses--;\r\n            }\r\n        }\r\n        assertTrue(remainingGuesses &gt;= 0);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        GuessingTest test = new GuessingTest();\r\n        test.guess();\r\n    }\r\n}\r\n\r\n```","title":"Exception in thread &quot;main&quot; java.lang.AssertionError. What shall I do?","body":"<p>I am trying to make a program which will take a random guess from a range of numbers and checks whether it matches with the given number.</p>\n<p>It will run 10times, it the program guesses the correct answer then it will terminate but if not then it will terminate with rejection.</p>\n<pre><code>at GuessingTest.main(GuessingTest.java:33)\n**current directly** ; /usr/bin/env /Li\nbrary/Java/JavaVirtualMachines/temurin-17.jdk/Contents/Home/bin/java @/var/folders/zl/r96mn6p116125gw39hst2gp40000gn/T/cp_2tq0yp3psptn6qjx3o6su\nw328.argfile GuessingTest \nException in thread &quot;main&quot; java.lang.AssertionError\n        at org.junit.Assert.fail(Assert.java:87)\n        at org.junit.Assert.assertTrue(Assert.java:42)\n        at org.junit.Assert.assertTrue(Assert.java:53)\n        at GuessingTest.guess(GuessingTest.java:30)\n        at GuessingTest.main(GuessingTest.java:35)\n</code></pre>\n<p>Below is my code\nGuessing.java</p>\n<pre><code>public class Guessing {\n\n    // Your local variables here\n    private int low = 0;\n    private int high = 1000;\n    int randomNum;\n\n    /**\n     * Implement how your algorithm should make a guess here\n     */\n    public int guess() {\n        randomNum = (int) ((Math.random() * (low - high)) + low);\n        return randomNum;\n    }\n\n    /**\n     * Implement how your algorithm should update its guess here\n     */\n    public void update(int answer) {\n        if (answer == 1) {\n            low = randomNum;\n        } else if (answer == -1) {\n            high = randomNum;\n        }\n    }\n}\n\n</code></pre>\n<p>GuessingTest.java</p>\n<pre><code>\nimport org.junit.Test;\n\nimport java.util.Random;\n\nimport static org.junit.Assert.*;\n\npublic class GuessingTest {\n\n\n    @Test\n    public void guess() {\n        Random r = new Random();\n        int hiddenNumber = r.nextInt(1001);\n\n        Guessing g = new Guessing();\n\n        int remainingGuesses = 10;\n        while (remainingGuesses &gt;= 0) {\n            int guess = g.guess();\n            if (guess == hiddenNumber) {\n                break;\n            } else if(guess &gt; hiddenNumber) {\n                g.update(1);\n                remainingGuesses--;\n            } else {\n                g.update(-1);\n                remainingGuesses--;\n            }\n        }\n        assertTrue(remainingGuesses &gt;= 0);\n    }\n\n    public static void main(String[] args) {\n        GuessingTest test = new GuessingTest();\n        test.guess();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","gradle","httpclient"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1674630806,"post_id":75230113,"comment_id":132753009,"body_markdown":"Did you add a `require java.net.http` to your module descriptor?","body":"Did you add a <code>require java.net.http</code> to your module descriptor?"}],"owner":{"account_id":16358255,"reputation":43,"user_id":11814680,"display_name":"Leo Denham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674625707,"creation_date":1674625707,"question_id":75230113,"body_markdown":"When trying to compile my gradle project i receive this error:\r\n`error: package java.net.http does not exist \r\nimport java.net.http.HttpClient;`\r\n\r\nSimilarly, `HttpClient client = HttpClient.newHttpClient();` throws another error, saying HttpClient cannot be resolved to a type.\r\n\r\n\r\n\r\nI know that this class was only implemented in Java11, but I have Java 17 installed on my system and ensured that gradle is also using Java 17.\r\n\r\nThe import is not recognized in VS Code and throws an error when compiling as mentioned above.\r\n\r\nOddly, when I restart VS Code and hover over the `.newHttpClient();` method call it gives me a popup showing the normal information about the method (as if it had found it), then after loading removes this hover?\r\n\r\nOn a similar thread the module did not appear in `java --list-modules`, however `java.net.http` appears in mine.","title":"Java.net.http not found on compilation despite appearing in module list","body":"<p>When trying to compile my gradle project i receive this error:\n<code>error: package java.net.http does not exist  import java.net.http.HttpClient;</code></p>\n<p>Similarly, <code>HttpClient client = HttpClient.newHttpClient();</code> throws another error, saying HttpClient cannot be resolved to a type.</p>\n<p>I know that this class was only implemented in Java11, but I have Java 17 installed on my system and ensured that gradle is also using Java 17.</p>\n<p>The import is not recognized in VS Code and throws an error when compiling as mentioned above.</p>\n<p>Oddly, when I restart VS Code and hover over the <code>.newHttpClient();</code> method call it gives me a popup showing the normal information about the method (as if it had found it), then after loading removes this hover?</p>\n<p>On a similar thread the module did not appear in <code>java --list-modules</code>, however <code>java.net.http</code> appears in mine.</p>\n"},{"tags":["java","jakarta-ee","keycloak","wildfly"],"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":1,"creation_date":1674488586,"post_id":75206317,"comment_id":132719281,"body_markdown":"Are you running a standalone application or a test from IDEA? That&#39;s not really a stack trace as much as an error from something.","body":"Are you running a standalone application or a test from IDEA? That&#39;s not really a stack trace as much as an error from something."},{"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"score":0,"creation_date":1674540170,"post_id":75206317,"comment_id":132729977,"body_markdown":"We have in our Project several standalone applications, like an &quot;importer application&quot; and so on, and this is the standalone application to configure everything for keycloak. So yes it&#39;s a standalone application. But I start it from within IntelliJ via the &quot;Run configurations..&quot;","body":"We have in our Project several standalone applications, like an &quot;importer application&quot; and so on, and this is the standalone application to configure everything for keycloak. So yes it&#39;s a standalone application. But I start it from within IntelliJ via the &quot;Run configurations..&quot;"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":1,"creation_date":1674576250,"post_id":75206317,"comment_id":132741107,"body_markdown":"In that case, you need to ensure the `jakarta.ws.rs:jakarta.ws.rs-api` is on your class path. Given the output above, it&#39;s not. Why it&#39;s not, I&#39;m not sure. Maybe you need to re-import the Maven project in IDEA to ensure it&#39;s up to date. Maybe look at the run config and check the class path there.","body":"In that case, you need to ensure the <code>jakarta.ws.rs:jakarta.ws.rs-api</code> is on your class path. Given the output above, it&#39;s not. Why it&#39;s not, I&#39;m not sure. Maybe you need to re-import the Maven project in IDEA to ensure it&#39;s up to date. Maybe look at the run config and check the class path there."},{"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"score":0,"creation_date":1674625649,"post_id":75206317,"comment_id":132752068,"body_markdown":"I deleted everything and reimported it and now it works... very strange, before it didn&#39;t helped. Maybe I forgot something","body":"I deleted everything and reimported it and now it works... very strange, before it didn&#39;t helped. Maybe I forgot something"}],"answers":[{"comments":[{"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"score":0,"creation_date":1674460602,"post_id":75206647,"comment_id":132710514,"body_markdown":"I added the &lt;scope&gt;provided&lt;/scope&gt; to the jakarta.ws.rs-api dependency, but sadly same error.\nStacktrace added in question","body":"I added the &lt;scope&gt;provided&lt;/scope&gt; to the jakarta.ws.rs-api dependency, but sadly same error. Stacktrace added in question"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1674461968,"post_id":75206647,"comment_id":132710832,"body_markdown":"Is this the entire stack trace? Because it&#39;s still not showing much information.","body":"Is this the entire stack trace? Because it&#39;s still not showing much information."},{"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"score":0,"creation_date":1674462928,"post_id":75206647,"comment_id":132711095,"body_markdown":"sadly yes, it&#39;s a java class we need to run to configure the keycloak docker and so on","body":"sadly yes, it&#39;s a java class we need to run to configure the keycloak docker and so on"}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674464359,"creation_date":1674458932,"answer_id":75206647,"question_id":75206317,"body_markdown":"WildFly (and other JEE / Jakarta EE containers) provide their own Java EE / Jakarta EE classes (servlet API, JAX-RS, JPA, etc.). If you bundle them in your application, these classes will be **not** be used by WildFly. Even if the class files are identical, the classes in your application are **not** the same as the provided classes - they have different class loaders. Class equality does not just use the fully qualified class name, it also uses the class loader. As a result, you will most likely get a class mismatch. You didn&#39;t show the full stack trace, but this is a likely cause of it.\r\n\r\nMark these dependencies as _provided_, that should usually solve the issue. You will also have to do something in your shade plugin if they still get included.\r\n\r\nThe same goes for the RESTEasy dependencies, although that&#39;s specific to WildFly / JBoss.","title":"java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap","body":"<p>WildFly (and other JEE / Jakarta EE containers) provide their own Java EE / Jakarta EE classes (servlet API, JAX-RS, JPA, etc.). If you bundle them in your application, these classes will be <strong>not</strong> be used by WildFly. Even if the class files are identical, the classes in your application are <strong>not</strong> the same as the provided classes - they have different class loaders. Class equality does not just use the fully qualified class name, it also uses the class loader. As a result, you will most likely get a class mismatch. You didn't show the full stack trace, but this is a likely cause of it.</p>\n<p>Mark these dependencies as <em>provided</em>, that should usually solve the issue. You will also have to do something in your shade plugin if they still get included.</p>\n<p>The same goes for the RESTEasy dependencies, although that's specific to WildFly / JBoss.</p>\n"},{"tags":[],"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674625668,"creation_date":1674625668,"answer_id":75230107,"question_id":75206317,"body_markdown":"Deleted .idea and reimported everything and now it works","title":"java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap","body":"<p>Deleted .idea and reimported everything and now it works</p>\n"}],"owner":{"account_id":1484861,"reputation":119,"user_id":1393335,"accept_rate":67,"display_name":"pemko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2182,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75230107,"answer_count":2,"score":1,"last_activity_date":1674625668,"creation_date":1674456037,"question_id":75206317,"body_markdown":"I updated my project to Java 17/Wildfly 27/Keycloak 19 and I get the error:\r\n\r\n&gt; java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap\r\n\r\nThe library Maven: jakarta.ws.rs-api is added in the library of the project via Maven: jakarta.ws.rs:jakarta.ws.rs-api:3.1.0\r\n\r\nDoes somebody know why this happens?\r\n\r\nMy pom.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;parent&gt;\r\n        &lt;artifactId&gt;mainProject&lt;/artifactId&gt;\r\n        &lt;groupId&gt;ch.company.mainProject&lt;/groupId&gt;\r\n        &lt;version&gt;4.5.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;artifactId&gt;auth-post&lt;/artifactId&gt;\r\n\r\n    &lt;name&gt;Project Auth Post (Keycloak Setup)&lt;/name&gt;\r\n    &lt;description&gt;This project is responsible to setup Keycloak.&lt;/description&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.10.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;ch.company.project.AuthPostMain&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n                    &lt;filters&gt;\r\n                        &lt;filter&gt;\r\n                            &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                        &lt;/filter&gt;\r\n                    &lt;/filters&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                                    &lt;mainClass&gt;ch.company.project.AuthPostMain&lt;/mainClass&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.company.project&lt;/groupId&gt;\r\n            &lt;artifactId&gt;common&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\r\n            &lt;artifactId&gt;keycloak-admin-client-jakarta&lt;/artifactId&gt;\r\n            &lt;version&gt;19.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-jaxb-provider&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nStacktrace:\r\n\r\n```none\r\n&quot;C:\\Program Files\\ojdkbuild\\jdk-17.0.2\\bin\\java.exe&quot; -\r\n\r\nDtenant.config=../e2e-test/src/main/resources/e2e-config &quot;-\r\n\r\njavaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1.3\\lib\\idea_rt.jar=55918:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\work\\project\\auth-post\\target\\classes;C:\\work\\project\\common\\target\\classes;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-admin-client-jakarta\\19.0.0\\keycloak-admin-client-jakarta-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-core\\19.0.0\\keycloak-core-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-common\\19.0.0\\keycloak-common-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-client\\6.2.2.Final\\resteasy-client-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-client-api\\6.2.2.Final\\resteasy-client-api-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-core-spi\\6.2.2.Final\\resteasy-core-spi-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\2.1.1\\jakarta.annotation-api-2.1.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-core\\6.2.2.Final\\resteasy-core-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\jandex\\2.4.3.Final\\jandex-2.4.3.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.1.0\\jakarta.activation-api-2.1.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\eclipse\\angus\\angus-activation\\1.0.0\\angus-activation-1.0.0.jar;C:\\Users\\maku\\.m2\\repository\\com\\ibm\\async\\asyncutil\\0.1.0\\asyncutil-0.1.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.5.0.Final\\jboss-logging-3.5.0.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\apache\\httpcomponents\\httpclient\\4.5.14\\httpclient-4.5.14.jar;C:\\Users\\maku\\.m2\\repository\\org\\apache\\httpcomponents\\httpcore\\4.4.16\\httpcore-4.4.16.jar;C:\\Users\\maku\\.m2\\repository\\commons-logging\\commons-logging\\1.2\\commons-logging-1.2.jar;C:\\Users\\maku\\.m2\\repository\\commons-codec\\commons-codec\\1.15\\commons-codec-1.15.jar;C:\\Users\\maku\\.m2\\repository\\org\\reactivestreams\\reactive-streams\\1.0.4\\reactive-streams-1.0.4.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jaxrs\\3.15.3.Final\\resteasy-jaxrs-3.15.3.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\ws\\rs\\jboss-jaxrs-api_2.1_spec\\2.0.1.Final\\jboss-jaxrs-api_2.1_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\xml\\bind\\jboss-jaxb-api_2.3_spec\\2.0.1.Final\\jboss-jaxb-api_2.3_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\validation\\jakarta.validation-api\\2.0.2\\jakarta.validation-api-2.0.2.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\annotation\\jboss-annotations-api_1.3_spec\\2.0.1.Final\\jboss-annotations-api_1.3_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\maku\\.m2\\repository\\commons-io\\commons-io\\2.6\\commons-io-2.6.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\stephenc\\jcip\\jcip-annotations\\1.0-1\\jcip-annotations-1.0-1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jaxb-provider\\6.2.2.Final\\resteasy-jaxb-provider-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\4.0.0\\jakarta.xml.bind-api-4.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\codemodel\\4.0.1\\codemodel-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\4.0.1\\jaxb-core-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-jxc\\4.0.1\\jaxb-jxc-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\4.0.1\\jaxb-runtime-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\4.0.1\\txw2-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-xjc\\4.0.1\\jaxb-xjc-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\xsom\\4.0.1\\xsom-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.1.1\\istack-commons-runtime-4.1.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\istack\\istack-commons-tools\\4.1.1\\istack-commons-tools-4.1.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\xml\\bind\\external\\relaxng-datatype\\4.0.1\\relaxng-datatype-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\xml\\bind\\external\\rngom\\4.0.1\\rngom-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jackson2-provider\\6.2.2.Final\\resteasy-jackson2-provider-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.14.1\\jackson-core-2.14.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.4.2\\jackson-databind-2.13.4.2.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.4\\jackson-annotations-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\jakarta\\rs\\jackson-jakarta-rs-base\\2.13.4\\jackson-jakarta-rs-base-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\jakarta\\rs\\jackson-jakarta-rs-json-provider\\2.13.4\\jackson-jakarta-rs-json-provider-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-jakarta-xmlbind-annotations\\2.13.4\\jackson-module-jakarta-xmlbind-annotations-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\json-patch\\1.13\\json-patch-1.13.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\msg-simple\\1.2\\msg-simple-1.2.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\btf\\1.3\\btf-1.3.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\jackson-coreutils\\2.0\\jackson-coreutils-2.0.jar ch.company.project.AuthPostMain\r\nFehler: Hauptklasse ch.company.project.AuthPostMain kann nicht initialisiert werden\r\nUrsache: java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap\r\n```","title":"java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap","body":"<p>I updated my project to Java 17/Wildfly 27/Keycloak 19 and I get the error:</p>\n<blockquote>\n<p>java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap</p>\n</blockquote>\n<p>The library Maven: jakarta.ws.rs-api is added in the library of the project via Maven: jakarta.ws.rs:jakarta.ws.rs-api:3.1.0</p>\n<p>Does somebody know why this happens?</p>\n<p>My pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n     xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;mainProject&lt;/artifactId&gt;\n        &lt;groupId&gt;ch.company.mainProject&lt;/groupId&gt;\n        &lt;version&gt;4.5.1&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;auth-post&lt;/artifactId&gt;\n\n    &lt;name&gt;Project Auth Post (Keycloak Setup)&lt;/name&gt;\n    &lt;description&gt;This project is responsible to setup Keycloak.&lt;/description&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;ch.company.project.AuthPostMain&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                    &lt;filters&gt;\n                        &lt;filter&gt;\n                            &lt;artifact&gt;*:*&lt;/artifact&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/filter&gt;\n                    &lt;/filters&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;ch.company.project.AuthPostMain&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.company.project&lt;/groupId&gt;\n            &lt;artifactId&gt;common&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.keycloak&lt;/groupId&gt;\n            &lt;artifactId&gt;keycloak-admin-client-jakarta&lt;/artifactId&gt;\n            &lt;version&gt;19.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jaxb-provider&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Stacktrace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&quot;C:\\Program Files\\ojdkbuild\\jdk-17.0.2\\bin\\java.exe&quot; -\n\nDtenant.config=../e2e-test/src/main/resources/e2e-config &quot;-\n\njavaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1.3\\lib\\idea_rt.jar=55918:C:\\Program Files\\JetBrains\\IntelliJ IDEA 2022.1.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\work\\project\\auth-post\\target\\classes;C:\\work\\project\\common\\target\\classes;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-admin-client-jakarta\\19.0.0\\keycloak-admin-client-jakarta-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-core\\19.0.0\\keycloak-core-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\keycloak\\keycloak-common\\19.0.0\\keycloak-common-19.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-client\\6.2.2.Final\\resteasy-client-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-client-api\\6.2.2.Final\\resteasy-client-api-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-core-spi\\6.2.2.Final\\resteasy-core-spi-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\annotation\\jakarta.annotation-api\\2.1.1\\jakarta.annotation-api-2.1.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-core\\6.2.2.Final\\resteasy-core-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\jandex\\2.4.3.Final\\jandex-2.4.3.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\activation\\jakarta.activation-api\\2.1.0\\jakarta.activation-api-2.1.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\eclipse\\angus\\angus-activation\\1.0.0\\angus-activation-1.0.0.jar;C:\\Users\\maku\\.m2\\repository\\com\\ibm\\async\\asyncutil\\0.1.0\\asyncutil-0.1.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\logging\\jboss-logging\\3.5.0.Final\\jboss-logging-3.5.0.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\apache\\httpcomponents\\httpclient\\4.5.14\\httpclient-4.5.14.jar;C:\\Users\\maku\\.m2\\repository\\org\\apache\\httpcomponents\\httpcore\\4.4.16\\httpcore-4.4.16.jar;C:\\Users\\maku\\.m2\\repository\\commons-logging\\commons-logging\\1.2\\commons-logging-1.2.jar;C:\\Users\\maku\\.m2\\repository\\commons-codec\\commons-codec\\1.15\\commons-codec-1.15.jar;C:\\Users\\maku\\.m2\\repository\\org\\reactivestreams\\reactive-streams\\1.0.4\\reactive-streams-1.0.4.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jaxrs\\3.15.3.Final\\resteasy-jaxrs-3.15.3.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\ws\\rs\\jboss-jaxrs-api_2.1_spec\\2.0.1.Final\\jboss-jaxrs-api_2.1_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\xml\\bind\\jboss-jaxb-api_2.3_spec\\2.0.1.Final\\jboss-jaxb-api_2.3_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\validation\\jakarta.validation-api\\2.0.2\\jakarta.validation-api-2.0.2.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\spec\\javax\\annotation\\jboss-annotations-api_1.3_spec\\2.0.1.Final\\jboss-annotations-api_1.3_spec-2.0.1.Final.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\activation\\jakarta.activation\\1.2.2\\jakarta.activation-1.2.2.jar;C:\\Users\\maku\\.m2\\repository\\commons-io\\commons-io\\2.6\\commons-io-2.6.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\stephenc\\jcip\\jcip-annotations\\1.0-1\\jcip-annotations-1.0-1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jaxb-provider\\6.2.2.Final\\resteasy-jaxb-provider-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\jakarta\\xml\\bind\\jakarta.xml.bind-api\\4.0.0\\jakarta.xml.bind-api-4.0.0.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\codemodel\\4.0.1\\codemodel-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-core\\4.0.1\\jaxb-core-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-jxc\\4.0.1\\jaxb-jxc-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-runtime\\4.0.1\\jaxb-runtime-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\txw2\\4.0.1\\txw2-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\jaxb-xjc\\4.0.1\\jaxb-xjc-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\glassfish\\jaxb\\xsom\\4.0.1\\xsom-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\istack\\istack-commons-runtime\\4.1.1\\istack-commons-runtime-4.1.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\istack\\istack-commons-tools\\4.1.1\\istack-commons-tools-4.1.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\xml\\bind\\external\\relaxng-datatype\\4.0.1\\relaxng-datatype-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\sun\\xml\\bind\\external\\rngom\\4.0.1\\rngom-4.0.1.jar;C:\\Users\\maku\\.m2\\repository\\org\\jboss\\resteasy\\resteasy-jackson2-provider\\6.2.2.Final\\resteasy-jackson2-provider-6.2.2.Final.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.14.1\\jackson-core-2.14.1.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.13.4.2\\jackson-databind-2.13.4.2.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.13.4\\jackson-annotations-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\jakarta\\rs\\jackson-jakarta-rs-base\\2.13.4\\jackson-jakarta-rs-base-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\jakarta\\rs\\jackson-jakarta-rs-json-provider\\2.13.4\\jackson-jakarta-rs-json-provider-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-jakarta-xmlbind-annotations\\2.13.4\\jackson-module-jakarta-xmlbind-annotations-2.13.4.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\json-patch\\1.13\\json-patch-1.13.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\msg-simple\\1.2\\msg-simple-1.2.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\btf\\1.3\\btf-1.3.jar;C:\\Users\\maku\\.m2\\repository\\com\\github\\java-json-tools\\jackson-coreutils\\2.0\\jackson-coreutils-2.0.jar ch.company.project.AuthPostMain\nFehler: Hauptklasse ch.company.project.AuthPostMain kann nicht initialisiert werden\nUrsache: java.lang.NoClassDefFoundError: jakarta/ws/rs/core/MultivaluedMap\n</code></pre>\n"},{"tags":["java","spring-boot","pdf-generation","apache-fop","pdf-conversion"],"owner":{"account_id":17268529,"reputation":1,"user_id":12504735,"display_name":"udaykiran ch"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674625446,"creation_date":1674594235,"question_id":75227287,"body_markdown":"Hi I am using fop to generate a PDF from XML file\r\n\r\nJava 11 version\r\nSpring boot starter 2.5.2\r\n\r\norg.apache.xmlgraphics  ( fop) version  2.7  \r\n\r\nI am getting this error\r\n\r\norg.apache.fop.fo.ValidationException: Border and padding for fo:region-body &quot;xsl-region-body&quot; should be &#39;0&#39; (See 6.4.14 in XSL 1.1); non-standard values are allowed if relaxed validation is enabled.  (No context info available)\r\n\r\nPlease help\r\n\r\n\\`\r\n\r\nStarter.java\r\n\r\n```\r\n```\r\n\r\n```\r\npackage pack;\r\n```\r\n\r\n```\r\nimport java.io.File;import java.io.OutputStream;import java.net.URI;\r\n```\r\n\r\n```\r\nimport javax.xml.transform.Result;import javax.xml.transform.Source;import javax.xml.transform.Transformer;import javax.xml.transform.TransformerFactory;import javax.xml.transform.sax.SAXResult;import javax.xml.transform.stream.StreamSource;\r\n```\r\n\r\n```\r\nimport org.apache.avalon.framework.configuration.Configuration;import org.apache.avalon.framework.configuration.DefaultConfigurationBuilder;import org.apache.fop.apps.FOUserAgent;import org.apache.fop.apps.Fop;import org.apache.fop.apps.FopFactory;import org.apache.fop.apps.FopFactoryBuilder;import org.apache.fop.apps.MimeConstants;import org.apache.fop.events.Event;import org.apache.fop.events.EventListener;import org.apache.fop.events.model.EventSeverity;\r\n```\r\n\r\n```\r\npublic class Start {\r\n```\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n\r\n    System.out.println(&quot;FOP ExampleXML2PDF&quot;);\r\n\r\n    // Setup input and output files\r\n    File xmlfile = new File(&quot;src/main/resources/article.xml&quot;);\r\n    File xsltfile = new File(&quot;src/main/resources/article2fo.xsl&quot;);\r\n    File pdffile = new File(&quot;article.pdf&quot;);\r\n    System.out.println(&quot;Input: XML (&quot; + xmlfile + &quot;)&quot;);\r\n    System.out.println(&quot;Stylesheet: &quot; + xsltfile);\r\n    System.out.println(&quot;Output: PDF (&quot; + pdffile + &quot;)&quot;);\r\n\r\n    System.out.println(&quot;Transforming...&quot;);\r\n\r\n    // NOTE: reuse fopFactory\r\n```\r\n\r\n```\r\n//        FopFactory fopFactory = getFopFactoryConfiguredFromClasspath(&quot;fop.xconf.xml&quot;);//        FopFactory fopFactory = FopFactory.newInstance(new File(&quot;.&quot;).toURI());//        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();//        FopFactory fopFactory = getFopFactoryConfiguredFromFileSystem(&quot;fop.xconf.xml&quot;);//test by uday startFopFactory fopFactory = getFopFactoryConfiguredFromClasspath(&quot;fop.xconf.xml&quot;);FOUserAgent userAgent = fopFactory.newFOUserAgent();userAgent.getEventBroadcaster().addEventListener(getInvalidPropertyEventListener());//test by uday end// with userAgent you can further configure some things:// https://xmlgraphics.apache.org/fop/2.2/embedding.html#user-agent//FOUserAgent foUserAgent = fopFactory.newFOUserAgent();// configure foUserAgent as desired\r\n```\r\n\r\n```\r\n    // Setup output\r\n    OutputStream out = new java.io.FileOutputStream(pdffile);\r\n    out = new java.io.BufferedOutputStream(out);\r\n\r\n    try {\r\n        // Construct fop with desired output format\r\n```\r\n\r\n```\r\n//            Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent,out);\r\n```\r\n\r\n```\r\n        // Setup XSLT\r\n        TransformerFactory factory = TransformerFactory.newInstance();\r\n        Transformer transformer = factory.newTransformer(new StreamSource(xsltfile));\r\n\r\n        // Set the value of a &lt;param&gt; in the stylesheet\r\n        transformer.setParameter(&quot;versionParam&quot;, &quot;2.0&quot;);\r\n\r\n        // Setup input for XSLT transformation\r\n        Source src = new StreamSource(xmlfile);\r\n\r\n        // Resulting SAX events (the generated FO) must be piped through to FOP\r\n        Result res = new SAXResult(fop.getDefaultHandler());\r\n\r\n        // Start XSLT transformation and FOP processing\r\n        transformer.transform(src, res);\r\n    } finally {\r\n        out.close();\r\n    }\r\n\r\n    System.out.println(&quot;Success!&quot;);\r\n\r\n}\r\n\r\nprivate static EventListener getInvalidPropertyEventListener() {\r\n\tStart.InvalidPropertyEventListener lsn = new Start.InvalidPropertyEventListener();\r\n\treturn lsn;\r\n}\r\n\r\nprivate static class InvalidPropertyEventListener implements EventListener {\r\n\r\n    /**\r\n     * Continues processing even if an &lt;code&gt;invalidProperty&lt;/code&gt; runtimeException was thrown\r\n     * during FO to PDF transformation.\r\n     * &lt;p&gt;\r\n     * Descends the event&#39;s severity level to WARN to avoid the exception throwing.\r\n     *\r\n     * @param event The event to be processed.\r\n     */\r\n\t@Override\r\n    public void processEvent(Event event) {\r\n        if (&quot;org.apache.fop.fo.FOValidationEventProducer.invalidProperty&quot;.equals(event.getEventID())) {\r\n            event.setSeverity(EventSeverity.WARN);\r\n        }\r\n    }\r\n\t\r\n}\r\n\r\n\r\n/**\r\n * The fop configuration and referenced resources (ttf font) are loaded\r\n * from the file system\r\n * \r\n */\r\nprivate static FopFactory getFopFactoryConfiguredFromFileSystem(String configFileName) throws Exception {\r\n    FopFactory fopFactory = FopFactory.newInstance(new File(&quot;src/main/resources/&quot; + configFileName));\r\n    return fopFactory;\r\n}\r\n\r\n/**\r\n * The fop configuration and referenced resources (ttf font) are loaded\r\n * from the classpath\r\n * \r\n */\r\nprivate static FopFactory getFopFactoryConfiguredFromClasspath(String configFileName) throws Exception {\r\n    \r\n    URI baseUri = URI.create(&quot;base_uri_is_meaningless_in_this_case&quot;);\r\n    // System.out.println(&quot;uri: &quot; + uri);\r\n    \r\n    // create a builder with a ResourceResolver which reads from the classpath. \r\n    // The resourceResolver will be called for loading the resources referenced \r\n    // in the configuration (for example a ttf font)\r\n    FopFactoryBuilder builder = new FopFactoryBuilder(baseUri, new ClasspathResolverURIAdapter());\r\n\r\n    // create a configuration which is based on a file read from the classpath\r\n    DefaultConfigurationBuilder cfgBuilder = new DefaultConfigurationBuilder();\r\n    Configuration cfg = cfgBuilder.build(Start.class.getResourceAsStream(&quot;/&quot; + configFileName));\r\n\r\n    // sets the configuration\r\n    builder.setConfiguration(cfg);\r\n\r\n    FopFactory fopFactory = builder.build();\r\n    return fopFactory;\r\n}\r\n```\r\n\r\n```\r\n}\r\n```\r\n\r\n```\r\n```\r\n\r\nClasspathResolverURIAdapter.java\r\n\r\n```\r\n`package pack;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.OutputStream;\r\nimport java.net.URI;\r\n\r\nimport org.apache.fop.apps.io.ResourceResolverFactory;\r\nimport org.apache.fop.events.Event;\r\nimport org.apache.fop.events.EventListener;\r\nimport org.apache.fop.events.model.EventSeverity;\r\nimport org.apache.xmlgraphics.io.Resource;\r\nimport org.apache.xmlgraphics.io.ResourceResolver;\r\n\r\n/**\r\n * ResourceResolver which loads resources with &quot;classpath:&quot; prefix from the\r\n * classpath\r\n * \r\n * Based on this:\r\n * \r\n * https://stackoverflow.com/questions/41661997/set-fopfactorybuilder-baseuri-to-jar-classpath\r\n * \r\n */\r\npublic class ClasspathResolverURIAdapter implements ResourceResolver {\r\n\r\n\tprivate final ResourceResolver wrapped;\r\n\r\n\tpublic ClasspathResolverURIAdapter() {\r\n\t\tthis.wrapped = ResourceResolverFactory.createDefaultResourceResolver();\r\n\t}\r\n\r\n\t\r\n\t@Override\r\n\tpublic Resource getResource(URI uri) throws IOException {\r\n\t\tSystem.out.println(&quot;getresource called, uri is: &quot; + uri + &quot;, path is: &quot; + uri.getSchemeSpecificPart());\r\n\t\tif (uri.getScheme().equals(&quot;classpath&quot;)) {\r\n\t\t\tInputStream is = Start.class.getResourceAsStream(uri.getSchemeSpecificPart());\r\n\t\t\tSystem.out.println(&quot;is: &quot; + is);\r\n\t\t\treturn new Resource(is);\r\n\t\t} else {\r\n\t\t\treturn wrapped.getResource(uri);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic OutputStream getOutputStream(URI uri) throws IOException {\r\n\t\tif (uri.getScheme().equals(&quot;classpath&quot;)) {\r\n\t\t\tthrow new RuntimeException(&quot;This is a read only ResourceResolver. You can not use it&#39;s outputstream&quot;);\r\n\t\t} else {\r\n\t\t\treturn wrapped.getOutputStream(uri);\r\n\t\t}\r\n\t}\r\n\r\n}`\r\n\r\n```\r\n\r\narticle2fo.xsl file\r\n\r\n```\r\n`&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;xsl:stylesheet version=&quot;1.0&quot;\r\n      xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n      xmlns:fo=&quot;http://www.w3.org/1999/XSL/Format&quot;\r\n      xmlns:lgcy=&quot;urn:tarhely.gov.hu:1.0:legacy&quot;\r\n      &gt;\r\n  &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n  \r\n  &lt;xsl:template match=&quot;header1&quot;&gt;\r\n            &lt;fo:block font-size=&quot;24pt&quot;&gt;\r\n                &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\r\n          &lt;/fo:block&gt;\r\n  &lt;/xsl:template&gt;\r\n  \r\n  &lt;xsl:template match=&quot;para&quot;&gt;\r\n            &lt;fo:block font-size=&quot;12pt&quot;&gt;\r\n                &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\r\n          &lt;/fo:block&gt;\r\n  &lt;/xsl:template&gt;\r\n\r\n  &lt;xsl:template match=&quot;/&quot;&gt;\r\n  &lt;!-- \r\n    &lt;fo:root&gt;\r\n     --&gt;\r\n    &lt;fo:root font-family=&quot;FreeSans&quot;&gt;\r\n    \r\n      &lt;fo:layout-master-set&gt;\r\n        &lt;fo:simple-page-master master-name=&quot;A4-portrait&quot;\r\n              page-height=&quot;29.7cm&quot; page-width=&quot;21.0cm&quot; margin=&quot;2cm&quot;&gt;\r\n          &lt;fo:region-body margin-bottom=&quot;0.5in&quot; border=&quot;solid&quot;/&gt;\r\n        &lt;/fo:simple-page-master&gt;\r\n      &lt;/fo:layout-master-set&gt;\r\n      &lt;fo:page-sequence master-reference=&quot;A4-portrait&quot;&gt;\r\n        &lt;fo:flow flow-name=&quot;xsl-region-body&quot;&gt;\r\n        \r\n          &lt;xsl:copy&gt;\r\n            &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\r\n          &lt;/xsl:copy&gt;\r\n          \r\n        &lt;/fo:flow&gt;\r\n      &lt;/fo:page-sequence&gt;\r\n    &lt;/fo:root&gt;\r\n  &lt;/xsl:template&gt;\r\n&lt;/xsl:stylesheet&gt;`\r\n```\r\n\r\nfop.xconf.xml\r\n\r\n```\r\n`&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;!-- $Id: fop.xconf 1616312 2014-08-06 19:19:31Z gadams $ --&gt;\r\n\r\n&lt;!--\r\nThis is a shortened example configuration file for FOP.\r\nBased on the fop.xconf from the distribution zip.\r\n--&gt;\r\n\r\n&lt;!-- NOTE: This is the version of the configuration --&gt;\r\n&lt;fop version=&quot;1.0&quot;&gt;\r\n\r\n  &lt;!-- Base URL for resolving relative URLs --&gt;\r\n  &lt;base&gt;.&lt;/base&gt;\r\n  \r\n  &lt;!-- Source resolution in dpi (dots/pixels per inch) for determining the size of pixels in SVG and bitmap images, default: 72dpi --&gt;\r\n  &lt;source-resolution&gt;72&lt;/source-resolution&gt;\r\n  &lt;!-- Target resolution in dpi (dots/pixels per inch) for specifying the target resolution for generated bitmaps, default: 72dpi --&gt;\r\n  &lt;target-resolution&gt;72&lt;/target-resolution&gt;\r\n  \r\n  &lt;!-- Default page-height and page-width, in case value is specified as auto --&gt;\r\n  &lt;default-page-settings height=&quot;11.00in&quot; width=&quot;8.50in&quot;/&gt;\r\n  \r\n  &lt;!-- Information for specific renderers --&gt;\r\n  &lt;!-- Uses renderer mime type for renderers --&gt;\r\n  &lt;renderers&gt;\r\n    &lt;renderer mime=&quot;application/pdf&quot;&gt;\r\n      &lt;filterList&gt;\r\n        &lt;!-- provides compression using zlib flate (default is on) --&gt;\r\n        &lt;value&gt;flate&lt;/value&gt;\r\n  \r\n        &lt;!-- encodes binary data into printable ascii characters (default off)\r\n             This provides about a 4:5 expansion of data size --&gt;\r\n        &lt;!-- &lt;value&gt;ascii-85&lt;/value&gt; --&gt;\r\n  \r\n        &lt;!-- encodes binary data with hex representation (default off)\r\n             This filter is not recommended as it doubles the data size --&gt;\r\n        &lt;!-- &lt;value&gt;ascii-hex&lt;/value&gt; --&gt;\r\n      &lt;/filterList&gt;\r\n\r\n      &lt;fonts&gt;\r\n        &lt;!-- embedded fonts --&gt;\r\n        &lt;!--\r\n        This information must exactly match the font specified\r\n        in the fo file. Otherwise it will use a default font.\r\n\r\n        For example,\r\n        &lt;fo:inline font-family=&quot;Arial&quot; font-weight=&quot;bold&quot; font-style=&quot;normal&quot;&gt;\r\n            Arial-normal-normal font\r\n        &lt;/fo:inline&gt;\r\n        for the font triplet specified by:\r\n        &lt;font-triplet name=&quot;Arial&quot; style=&quot;normal&quot; weight=&quot;bold&quot;/&gt;\r\n\r\n        If you do not want to embed the font in the pdf document\r\n        then do not include the &quot;embed-url&quot; attribute.\r\n        The font will be needed where the document is viewed\r\n        for it to be displayed properly.\r\n\r\n        possible styles: normal | italic | oblique | backslant\r\n        possible weights: normal | bold | 100 | 200 | 300 | 400\r\n                          | 500 | 600 | 700 | 800 | 900\r\n        (normal = 400, bold = 700)\r\n        --&gt;\r\n\r\n        &lt;!--\r\n        FreeSans.ttf is from Xubuntu&#39;s /usr/share/fonts/truetype/freefont folder\r\n        --&gt;\r\n        &lt;!-- use this for classpath based configuration\r\n        &lt;font kerning=&quot;yes&quot; embed-url=&quot;classpath:/FreeSans.ttf&quot;&gt;\r\n         --&gt;\r\n        &lt;!-- use this for file system based configuration \r\n        &lt;font kerning=&quot;yes&quot; embed-url=&quot;FreeSans.ttf&quot;&gt;\r\n         --&gt;\r\n         &lt;font kerning=&quot;yes&quot; embed-url=&quot;classpath:/FreeSans.ttf&quot;&gt;\r\n          &lt;font-triplet name=&quot;FreeSans&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\r\n        &lt;/font&gt;\r\n\r\n        &lt;!-- auto-detect fonts --&gt;\r\n        &lt;!--\r\n        &lt;auto-detect/&gt;\r\n        --&gt;\r\n\r\n      &lt;/fonts&gt;\r\n\r\n      &lt;!-- This option lets you specify additional options on an XML handler --&gt;\r\n      &lt;!--xml-handler namespace=&quot;http://www.w3.org/2000/svg&quot;&gt;\r\n        &lt;stroke-text&gt;false&lt;/stroke-text&gt;\r\n      &lt;/xml-handler--&gt;\r\n\r\n    &lt;/renderer&gt;\r\n\r\n  &lt;/renderers&gt;\r\n\r\n&lt;/fop&gt;`\r\n```","title":"Border and padding for fo:region-body &quot;xsl-region-body&quot; should be &#39;0&#39; non-standard values are allowed if relaxed validation is enabled","body":"<p>Hi I am using fop to generate a PDF from XML file</p>\n<p>Java 11 version\nSpring boot starter 2.5.2</p>\n<p>org.apache.xmlgraphics  ( fop) version  2.7</p>\n<p>I am getting this error</p>\n<p>org.apache.fop.fo.ValidationException: Border and padding for fo:region-body &quot;xsl-region-body&quot; should be '0' (See 6.4.14 in XSL 1.1); non-standard values are allowed if relaxed validation is enabled.  (No context info available)</p>\n<p>Please help</p>\n<p>`</p>\n<p>Starter.java</p>\n<pre><code></code></pre>\n<pre><code>package pack;\n</code></pre>\n<pre><code>import java.io.File;import java.io.OutputStream;import java.net.URI;\n</code></pre>\n<pre><code>import javax.xml.transform.Result;import javax.xml.transform.Source;import javax.xml.transform.Transformer;import javax.xml.transform.TransformerFactory;import javax.xml.transform.sax.SAXResult;import javax.xml.transform.stream.StreamSource;\n</code></pre>\n<pre><code>import org.apache.avalon.framework.configuration.Configuration;import org.apache.avalon.framework.configuration.DefaultConfigurationBuilder;import org.apache.fop.apps.FOUserAgent;import org.apache.fop.apps.Fop;import org.apache.fop.apps.FopFactory;import org.apache.fop.apps.FopFactoryBuilder;import org.apache.fop.apps.MimeConstants;import org.apache.fop.events.Event;import org.apache.fop.events.EventListener;import org.apache.fop.events.model.EventSeverity;\n</code></pre>\n<pre><code>public class Start {\n</code></pre>\n<pre><code>public static void main(String[] args) throws Exception {\n\n    System.out.println(&quot;FOP ExampleXML2PDF&quot;);\n\n    // Setup input and output files\n    File xmlfile = new File(&quot;src/main/resources/article.xml&quot;);\n    File xsltfile = new File(&quot;src/main/resources/article2fo.xsl&quot;);\n    File pdffile = new File(&quot;article.pdf&quot;);\n    System.out.println(&quot;Input: XML (&quot; + xmlfile + &quot;)&quot;);\n    System.out.println(&quot;Stylesheet: &quot; + xsltfile);\n    System.out.println(&quot;Output: PDF (&quot; + pdffile + &quot;)&quot;);\n\n    System.out.println(&quot;Transforming...&quot;);\n\n    // NOTE: reuse fopFactory\n</code></pre>\n<pre><code>//        FopFactory fopFactory = getFopFactoryConfiguredFromClasspath(&quot;fop.xconf.xml&quot;);//        FopFactory fopFactory = FopFactory.newInstance(new File(&quot;.&quot;).toURI());//        FOUserAgent foUserAgent = fopFactory.newFOUserAgent();//        FopFactory fopFactory = getFopFactoryConfiguredFromFileSystem(&quot;fop.xconf.xml&quot;);//test by uday startFopFactory fopFactory = getFopFactoryConfiguredFromClasspath(&quot;fop.xconf.xml&quot;);FOUserAgent userAgent = fopFactory.newFOUserAgent();userAgent.getEventBroadcaster().addEventListener(getInvalidPropertyEventListener());//test by uday end// with userAgent you can further configure some things:// https://xmlgraphics.apache.org/fop/2.2/embedding.html#user-agent//FOUserAgent foUserAgent = fopFactory.newFOUserAgent();// configure foUserAgent as desired\n</code></pre>\n<pre><code>    // Setup output\n    OutputStream out = new java.io.FileOutputStream(pdffile);\n    out = new java.io.BufferedOutputStream(out);\n\n    try {\n        // Construct fop with desired output format\n</code></pre>\n<pre><code>//            Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent, out);Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, foUserAgent,out);\n</code></pre>\n<pre><code>        // Setup XSLT\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Transformer transformer = factory.newTransformer(new StreamSource(xsltfile));\n\n        // Set the value of a &lt;param&gt; in the stylesheet\n        transformer.setParameter(&quot;versionParam&quot;, &quot;2.0&quot;);\n\n        // Setup input for XSLT transformation\n        Source src = new StreamSource(xmlfile);\n\n        // Resulting SAX events (the generated FO) must be piped through to FOP\n        Result res = new SAXResult(fop.getDefaultHandler());\n\n        // Start XSLT transformation and FOP processing\n        transformer.transform(src, res);\n    } finally {\n        out.close();\n    }\n\n    System.out.println(&quot;Success!&quot;);\n\n}\n\nprivate static EventListener getInvalidPropertyEventListener() {\n    Start.InvalidPropertyEventListener lsn = new Start.InvalidPropertyEventListener();\n    return lsn;\n}\n\nprivate static class InvalidPropertyEventListener implements EventListener {\n\n    /**\n     * Continues processing even if an &lt;code&gt;invalidProperty&lt;/code&gt; runtimeException was thrown\n     * during FO to PDF transformation.\n     * &lt;p&gt;\n     * Descends the event's severity level to WARN to avoid the exception throwing.\n     *\n     * @param event The event to be processed.\n     */\n    @Override\n    public void processEvent(Event event) {\n        if (&quot;org.apache.fop.fo.FOValidationEventProducer.invalidProperty&quot;.equals(event.getEventID())) {\n            event.setSeverity(EventSeverity.WARN);\n        }\n    }\n    \n}\n\n\n/**\n * The fop configuration and referenced resources (ttf font) are loaded\n * from the file system\n * \n */\nprivate static FopFactory getFopFactoryConfiguredFromFileSystem(String configFileName) throws Exception {\n    FopFactory fopFactory = FopFactory.newInstance(new File(&quot;src/main/resources/&quot; + configFileName));\n    return fopFactory;\n}\n\n/**\n * The fop configuration and referenced resources (ttf font) are loaded\n * from the classpath\n * \n */\nprivate static FopFactory getFopFactoryConfiguredFromClasspath(String configFileName) throws Exception {\n    \n    URI baseUri = URI.create(&quot;base_uri_is_meaningless_in_this_case&quot;);\n    // System.out.println(&quot;uri: &quot; + uri);\n    \n    // create a builder with a ResourceResolver which reads from the classpath. \n    // The resourceResolver will be called for loading the resources referenced \n    // in the configuration (for example a ttf font)\n    FopFactoryBuilder builder = new FopFactoryBuilder(baseUri, new ClasspathResolverURIAdapter());\n\n    // create a configuration which is based on a file read from the classpath\n    DefaultConfigurationBuilder cfgBuilder = new DefaultConfigurationBuilder();\n    Configuration cfg = cfgBuilder.build(Start.class.getResourceAsStream(&quot;/&quot; + configFileName));\n\n    // sets the configuration\n    builder.setConfiguration(cfg);\n\n    FopFactory fopFactory = builder.build();\n    return fopFactory;\n}\n</code></pre>\n<pre><code>}\n</code></pre>\n<pre><code></code></pre>\n<p>ClasspathResolverURIAdapter.java</p>\n<pre><code>`package pack;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.URI;\n\nimport org.apache.fop.apps.io.ResourceResolverFactory;\nimport org.apache.fop.events.Event;\nimport org.apache.fop.events.EventListener;\nimport org.apache.fop.events.model.EventSeverity;\nimport org.apache.xmlgraphics.io.Resource;\nimport org.apache.xmlgraphics.io.ResourceResolver;\n\n/**\n * ResourceResolver which loads resources with &quot;classpath:&quot; prefix from the\n * classpath\n * \n * Based on this:\n * \n * https://stackoverflow.com/questions/41661997/set-fopfactorybuilder-baseuri-to-jar-classpath\n * \n */\npublic class ClasspathResolverURIAdapter implements ResourceResolver {\n\n    private final ResourceResolver wrapped;\n\n    public ClasspathResolverURIAdapter() {\n        this.wrapped = ResourceResolverFactory.createDefaultResourceResolver();\n    }\n\n    \n    @Override\n    public Resource getResource(URI uri) throws IOException {\n        System.out.println(&quot;getresource called, uri is: &quot; + uri + &quot;, path is: &quot; + uri.getSchemeSpecificPart());\n        if (uri.getScheme().equals(&quot;classpath&quot;)) {\n            InputStream is = Start.class.getResourceAsStream(uri.getSchemeSpecificPart());\n            System.out.println(&quot;is: &quot; + is);\n            return new Resource(is);\n        } else {\n            return wrapped.getResource(uri);\n        }\n    }\n\n    @Override\n    public OutputStream getOutputStream(URI uri) throws IOException {\n        if (uri.getScheme().equals(&quot;classpath&quot;)) {\n            throw new RuntimeException(&quot;This is a read only ResourceResolver. You can not use it's outputstream&quot;);\n        } else {\n            return wrapped.getOutputStream(uri);\n        }\n    }\n\n}`\n\n</code></pre>\n<p>article2fo.xsl file</p>\n<pre><code>`&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\n      xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n      xmlns:fo=&quot;http://www.w3.org/1999/XSL/Format&quot;\n      xmlns:lgcy=&quot;urn:tarhely.gov.hu:1.0:legacy&quot;\n      &gt;\n  &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n  \n  &lt;xsl:template match=&quot;header1&quot;&gt;\n            &lt;fo:block font-size=&quot;24pt&quot;&gt;\n                &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\n          &lt;/fo:block&gt;\n  &lt;/xsl:template&gt;\n  \n  &lt;xsl:template match=&quot;para&quot;&gt;\n            &lt;fo:block font-size=&quot;12pt&quot;&gt;\n                &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\n          &lt;/fo:block&gt;\n  &lt;/xsl:template&gt;\n\n  &lt;xsl:template match=&quot;/&quot;&gt;\n  &lt;!-- \n    &lt;fo:root&gt;\n     --&gt;\n    &lt;fo:root font-family=&quot;FreeSans&quot;&gt;\n    \n      &lt;fo:layout-master-set&gt;\n        &lt;fo:simple-page-master master-name=&quot;A4-portrait&quot;\n              page-height=&quot;29.7cm&quot; page-width=&quot;21.0cm&quot; margin=&quot;2cm&quot;&gt;\n          &lt;fo:region-body margin-bottom=&quot;0.5in&quot; border=&quot;solid&quot;/&gt;\n        &lt;/fo:simple-page-master&gt;\n      &lt;/fo:layout-master-set&gt;\n      &lt;fo:page-sequence master-reference=&quot;A4-portrait&quot;&gt;\n        &lt;fo:flow flow-name=&quot;xsl-region-body&quot;&gt;\n        \n          &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=&quot;node()&quot;/&gt;\n          &lt;/xsl:copy&gt;\n          \n        &lt;/fo:flow&gt;\n      &lt;/fo:page-sequence&gt;\n    &lt;/fo:root&gt;\n  &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;`\n</code></pre>\n<p>fop.xconf.xml</p>\n<pre><code>`&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!-- $Id: fop.xconf 1616312 2014-08-06 19:19:31Z gadams $ --&gt;\n\n&lt;!--\nThis is a shortened example configuration file for FOP.\nBased on the fop.xconf from the distribution zip.\n--&gt;\n\n&lt;!-- NOTE: This is the version of the configuration --&gt;\n&lt;fop version=&quot;1.0&quot;&gt;\n\n  &lt;!-- Base URL for resolving relative URLs --&gt;\n  &lt;base&gt;.&lt;/base&gt;\n  \n  &lt;!-- Source resolution in dpi (dots/pixels per inch) for determining the size of pixels in SVG and bitmap images, default: 72dpi --&gt;\n  &lt;source-resolution&gt;72&lt;/source-resolution&gt;\n  &lt;!-- Target resolution in dpi (dots/pixels per inch) for specifying the target resolution for generated bitmaps, default: 72dpi --&gt;\n  &lt;target-resolution&gt;72&lt;/target-resolution&gt;\n  \n  &lt;!-- Default page-height and page-width, in case value is specified as auto --&gt;\n  &lt;default-page-settings height=&quot;11.00in&quot; width=&quot;8.50in&quot;/&gt;\n  \n  &lt;!-- Information for specific renderers --&gt;\n  &lt;!-- Uses renderer mime type for renderers --&gt;\n  &lt;renderers&gt;\n    &lt;renderer mime=&quot;application/pdf&quot;&gt;\n      &lt;filterList&gt;\n        &lt;!-- provides compression using zlib flate (default is on) --&gt;\n        &lt;value&gt;flate&lt;/value&gt;\n  \n        &lt;!-- encodes binary data into printable ascii characters (default off)\n             This provides about a 4:5 expansion of data size --&gt;\n        &lt;!-- &lt;value&gt;ascii-85&lt;/value&gt; --&gt;\n  \n        &lt;!-- encodes binary data with hex representation (default off)\n             This filter is not recommended as it doubles the data size --&gt;\n        &lt;!-- &lt;value&gt;ascii-hex&lt;/value&gt; --&gt;\n      &lt;/filterList&gt;\n\n      &lt;fonts&gt;\n        &lt;!-- embedded fonts --&gt;\n        &lt;!--\n        This information must exactly match the font specified\n        in the fo file. Otherwise it will use a default font.\n\n        For example,\n        &lt;fo:inline font-family=&quot;Arial&quot; font-weight=&quot;bold&quot; font-style=&quot;normal&quot;&gt;\n            Arial-normal-normal font\n        &lt;/fo:inline&gt;\n        for the font triplet specified by:\n        &lt;font-triplet name=&quot;Arial&quot; style=&quot;normal&quot; weight=&quot;bold&quot;/&gt;\n\n        If you do not want to embed the font in the pdf document\n        then do not include the &quot;embed-url&quot; attribute.\n        The font will be needed where the document is viewed\n        for it to be displayed properly.\n\n        possible styles: normal | italic | oblique | backslant\n        possible weights: normal | bold | 100 | 200 | 300 | 400\n                          | 500 | 600 | 700 | 800 | 900\n        (normal = 400, bold = 700)\n        --&gt;\n\n        &lt;!--\n        FreeSans.ttf is from Xubuntu's /usr/share/fonts/truetype/freefont folder\n        --&gt;\n        &lt;!-- use this for classpath based configuration\n        &lt;font kerning=&quot;yes&quot; embed-url=&quot;classpath:/FreeSans.ttf&quot;&gt;\n         --&gt;\n        &lt;!-- use this for file system based configuration \n        &lt;font kerning=&quot;yes&quot; embed-url=&quot;FreeSans.ttf&quot;&gt;\n         --&gt;\n         &lt;font kerning=&quot;yes&quot; embed-url=&quot;classpath:/FreeSans.ttf&quot;&gt;\n          &lt;font-triplet name=&quot;FreeSans&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;\n\n        &lt;!-- auto-detect fonts --&gt;\n        &lt;!--\n        &lt;auto-detect/&gt;\n        --&gt;\n\n      &lt;/fonts&gt;\n\n      &lt;!-- This option lets you specify additional options on an XML handler --&gt;\n      &lt;!--xml-handler namespace=&quot;http://www.w3.org/2000/svg&quot;&gt;\n        &lt;stroke-text&gt;false&lt;/stroke-text&gt;\n      &lt;/xml-handler--&gt;\n\n    &lt;/renderer&gt;\n\n  &lt;/renderers&gt;\n\n&lt;/fop&gt;`\n</code></pre>\n"},{"tags":["java","type-erasure"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":6,"creation_date":1388824691,"post_id":20918650,"comment_id":31406021,"body_markdown":"If you don&#39;t want your Question closed as &quot;opinion based&quot;, you should ask it differently.  (Like &quot;what are the technical advantages of type erasure&quot;).  Better still, ask the tweeter what he is really saying.","body":"If you don&#39;t want your Question closed as &quot;opinion based&quot;, you should ask it differently.  (Like &quot;what are the technical advantages of type erasure&quot;).  Better still, ask the tweeter what he is really saying."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1388825055,"post_id":20918650,"comment_id":31406126,"body_markdown":"The original tweeter added - In general, because I get huge benefits (e.g. parametricity) and nil cost (alleged cost is a limit of imagination).","body":"The original tweeter added - In general, because I get huge benefits (e.g. parametricity) and nil cost (alleged cost is a limit of imagination)."},{"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"score":0,"creation_date":1388825099,"post_id":20918650,"comment_id":31406138,"body_markdown":"@StephenC I did tweet the original tweeter and asked and pointed him here for hopefully elaborate on his thoughts. I&#39;ve now hopefully improved the question per your suggestions.","body":"@StephenC I did tweet the original tweeter and asked and pointed him here for hopefully elaborate on his thoughts. I&#39;ve now hopefully improved the question per your suggestions."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1388825456,"post_id":20918650,"comment_id":31406233,"body_markdown":"Remove the &quot;why is it a good thing&quot;.  The &quot;good thing&quot; is a patently subjective characterization, and it (obviously) begs the question that type erasure *is* a good thing ... which is contentious.","body":"Remove the &quot;why is it a good thing&quot;.  The &quot;good thing&quot; is a patently subjective characterization, and it (obviously) begs the question that type erasure <i>is</i> a good thing ... which is contentious."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1388827014,"post_id":20918650,"comment_id":31406622,"body_markdown":"God help us if this site is going to degenerate into questions about everything that has ever been posted on Twitter. At least cite a reputable source for your question.","body":"God help us if this site is going to degenerate into questions about everything that has ever been posted on Twitter. At least cite a reputable source for your question."},{"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"score":24,"creation_date":1388827221,"post_id":20918650,"comment_id":31406695,"body_markdown":"Why does question need to be from &quot;reputable source&quot;? That&#39;s just silly.","body":"Why does question need to be from &quot;reputable source&quot;? That&#39;s just silly."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1388828525,"post_id":20918650,"comment_id":31407028,"body_markdown":"@vertti Because otherwise it is usually just a waste of time. You can&#39;t just take random text from a random source and expect professionals to waste their time telling you what&#39;s wrong with it. This question is no exception. The part about &#39;the only thing Java got right&#39; is enough of a hint in itself.","body":"@vertti Because otherwise it is usually just a waste of time. You can&#39;t just take random text from a random source and expect professionals to waste their time telling you what&#39;s wrong with it. This question is no exception. The part about &#39;the only thing Java got right&#39; is enough of a hint in itself."},{"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"score":4,"creation_date":1388828849,"post_id":20918650,"comment_id":31407116,"body_markdown":"Well most problems here are not from ANY source, except the questioners own problem with specific software/language/whatnot, and fortunately there&#39;s a lot of professionals that &quot;waste&quot; their time helping these people.","body":"Well most problems here are not from ANY source, except the questioners own problem with specific software/language/whatnot, and fortunately there&#39;s a lot of professionals that &quot;waste&quot; their time helping these people."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1388829084,"post_id":20918650,"comment_id":31407175,"body_markdown":"@Vertii I agree. If the question originates with you, by all means ask it. If it originates with some random drivel on the Internet, it is up to you to filter that out first and make a real question out of it, if there is one. That&#39;s part of being a professional.","body":"@Vertii I agree. If the question originates with you, by all means ask it. If it originates with some random drivel on the Internet, it is up to you to filter that out first and make a real question out of it, if there is one. That&#39;s part of being a professional."},{"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"score":3,"creation_date":1388830135,"post_id":20918650,"comment_id":31407466,"body_markdown":"@EJP yes, on that part we can agree. I chose the &quot;drivel from twitter&quot; because it made an intriguing claim I had no answer for so I brought it here. And I have now done several edits towards what hopefully is a better question.","body":"@EJP yes, on that part we can agree. I chose the &quot;drivel from twitter&quot; because it made an intriguing claim I had no answer for so I brought it here. And I have now done several edits towards what hopefully is a better question."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1472898361,"post_id":20918678,"comment_id":65944672,"body_markdown":"JVM changes compared to what? Templates wouldn&#39;t have required JVM changes either.","body":"JVM changes compared to what? Templates wouldn&#39;t have required JVM changes either."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":1,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1388823873,"creation_date":1388823873,"answer_id":20918678,"question_id":20918650,"body_markdown":"One good thing is that there was no need to change JVM when generics were introduced. Java implements generics at compiler level only.","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>One good thing is that there was no need to change JVM when generics were introduced. Java implements generics at compiler level only.</p>\n"},{"comments":[{"owner":{"account_id":1657795,"reputation":2619,"user_id":2771718,"display_name":"Piotr Kołaczkowski"},"score":3,"creation_date":1390935737,"post_id":20918690,"comment_id":32304654,"body_markdown":"Most of those virtual dispatches are converted to static ones in runtime, though, so it is not that bad as it may seem.","body":"Most of those virtual dispatches are converted to static ones in runtime, though, so it is not that bad as it may seem."},{"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"score":1,"creation_date":1390939431,"post_id":20918690,"comment_id":32306622,"body_markdown":"very true, the availability of a compiler at run-time lets java do a lot of cool things (and achieve high performance) relative to c++.","body":"very true, the availability of a compiler at run-time lets java do a lot of cool things (and achieve high performance) relative to c++."},{"owner":{"account_id":482123,"reputation":310,"user_id":896325,"accept_rate":71,"display_name":"jungle_mole"},"score":0,"creation_date":1496309230,"post_id":20918690,"comment_id":75612416,"body_markdown":"wow, let me write it down somewhere _java achieves high performance relative to cpp.._","body":"wow, let me write it down somewhere <i>java achieves high performance relative to cpp..</i>"},{"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"score":1,"creation_date":1497055337,"post_id":20918690,"comment_id":75933354,"body_markdown":"@jungle_mole yes, thank you. few people realize the benefit of having a compiler available at run-time to compile code again after profiling. (or that garbage collection is big-oh(non-garbage) rather than the naive and incorrect belief that garbage collection is big-oh(garbage), (or that while garbage collection is a slight effort, it compensates by allowing zero-cost allocation)). It is a sad world where people blindly adopt what their community believes and stop reasoning from first principles.","body":"@jungle_mole yes, thank you. few people realize the benefit of having a compiler available at run-time to compile code again after profiling. (or that garbage collection is big-oh(non-garbage) rather than the naive and incorrect belief that garbage collection is big-oh(garbage), (or that while garbage collection is a slight effort, it compensates by allowing zero-cost allocation)). It is a sad world where people blindly adopt what their community believes and stop reasoning from first principles."}],"tags":[],"owner":{"account_id":309077,"reputation":24064,"user_id":621338,"accept_rate":90,"display_name":"necromancer"},"comment_count":4,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1388824009,"creation_date":1388824009,"answer_id":20918690,"question_id":20918650,"body_markdown":"avoids c++-like code bloat because the same code is used for multiple types; however, type erasure requires virtual dispatch whereas the c++-code-bloat approach can do non-virtually dispatched generics","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>avoids c++-like code bloat because the same code is used for multiple types; however, type erasure requires virtual dispatch whereas the c++-code-bloat approach can do non-virtually dispatched generics</p>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1388832481,"post_id":20918709,"comment_id":31408119,"body_markdown":"It doesn&#39;t compile in Java **because** it has type erasure","body":"It doesn&#39;t compile in Java <b>because</b> it has type erasure"},{"owner":{"account_id":953149,"reputation":177313,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":1,"creation_date":1388870779,"post_id":20918709,"comment_id":31421583,"body_markdown":"@MarkRotteveel: Thanks; I&#39;ve added a paragraph to explain (and comment on) that.","body":"@MarkRotteveel: Thanks; I&#39;ve added a paragraph to explain (and comment on) that."},{"owner":{"account_id":953149,"reputation":177313,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":1,"creation_date":1392764296,"post_id":20918709,"comment_id":33106954,"body_markdown":"Judging from the mixture of upvotes and downvotes, this is the most controversial answer I&#39;ve ever posted. I&#39;m strangely proud.","body":"Judging from the mixture of upvotes and downvotes, this is the most controversial answer I&#39;ve ever posted. I&#39;m strangely proud."}],"tags":[],"owner":{"account_id":953149,"reputation":177313,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"comment_count":3,"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1388879054,"creation_date":1388824162,"answer_id":20918709,"question_id":20918650,"body_markdown":"A subsequent post by the same user in the same conversation:\r\n\r\n&gt; new T is a broken program. It is isomorphic to the claim &quot;all propositions are true.&quot; I am not big into this.\r\n\r\n(This was in response to a statement by another user, namely that &quot;it seems in some situations &#39;new T&#39; would be better&quot;, the idea being that `new T()` is impossible due to type erasure. (This is debatable &amp;mdash; even if `T` were available at runtime, it could be an abstract class or interface, or it could be `Void`, or it could lack a no-arg constructor, or its no-arg constructor could be private (e.g., because it&#39;s supposed to be a singleton class), or its no-arg constructor could specify a checked exception that the generic method does not catch or specify &amp;mdash; but that was the premise. Regardless, it&#39;s true that without erasure you could at least write `T.class.newInstance()`, which handles those issues.))\r\n\r\nThis view, that types are isomorphic to propositions, suggests that the user has a background in formal type theory. (S)he very likely does not like &quot;dynamic types&quot; or &quot;runtime-types&quot; and would prefer a Java without downcasts and `instanceof` and reflection and so on. (Think of a language like Standard ML, which has a very rich (static) type system and whose dynamic semantics do not depend on any type information whatsoever.)\r\n\r\nIt&#39;s worth keeping in mind, by the way, that the user is trolling: while (s)he likely sincerely prefers (statically) typed languages, (s)he is *not* sincerely trying to persuade others of that view. Rather, the main purpose of the original tweet was to mock those who disagree, and after some of those disagree-ers chimed in, the user posted follow-up tweets such as &quot;the reason java has type erasure is that Wadler et al know what they are doing, unlike users of java&quot;. Unfortunately, this makes it hard to find out what (s)he&#39;s actually thinking; but fortunately, it also likely means that it&#39;s not very important to do so. People with actual depth to their views don&#39;t generally resort to trolls that are *quite* this content-free.","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>A subsequent post by the same user in the same conversation:</p>\n\n<blockquote>\n  <p>new T is a broken program. It is isomorphic to the claim \"all propositions are true.\" I am not big into this.</p>\n</blockquote>\n\n<p>(This was in response to a statement by another user, namely that \"it seems in some situations 'new T' would be better\", the idea being that <code>new T()</code> is impossible due to type erasure. (This is debatable &mdash; even if <code>T</code> were available at runtime, it could be an abstract class or interface, or it could be <code>Void</code>, or it could lack a no-arg constructor, or its no-arg constructor could be private (e.g., because it's supposed to be a singleton class), or its no-arg constructor could specify a checked exception that the generic method does not catch or specify &mdash; but that was the premise. Regardless, it's true that without erasure you could at least write <code>T.class.newInstance()</code>, which handles those issues.))</p>\n\n<p>This view, that types are isomorphic to propositions, suggests that the user has a background in formal type theory. (S)he very likely does not like \"dynamic types\" or \"runtime-types\" and would prefer a Java without downcasts and <code>instanceof</code> and reflection and so on. (Think of a language like Standard ML, which has a very rich (static) type system and whose dynamic semantics do not depend on any type information whatsoever.)</p>\n\n<p>It's worth keeping in mind, by the way, that the user is trolling: while (s)he likely sincerely prefers (statically) typed languages, (s)he is <em>not</em> sincerely trying to persuade others of that view. Rather, the main purpose of the original tweet was to mock those who disagree, and after some of those disagree-ers chimed in, the user posted follow-up tweets such as \"the reason java has type erasure is that Wadler et al know what they are doing, unlike users of java\". Unfortunately, this makes it hard to find out what (s)he's actually thinking; but fortunately, it also likely means that it's not very important to do so. People with actual depth to their views don't generally resort to trolls that are <em>quite</em> this content-free.</p>\n"},{"tags":[],"owner":{"account_id":4036904,"reputation":493,"user_id":3321001,"display_name":"techtangents"},"comment_count":0,"down_vote_count":4,"up_vote_count":50,"is_accepted":false,"score":46,"last_activity_date":1392677128,"creation_date":1392677128,"answer_id":21840800,"question_id":20918650,"body_markdown":"Types are a construct used for writing programs in a manner that allows the compiler to check the correctness of a program. A type is a proposition on a value - the compiler verifies that this proposition is true. \r\n\r\nDuring the execution of a program, there should be no need for type information - this has already been verified by the compiler. The compiler should be free to discard this information in order to perform optimisations on the code - make it run faster, generate a smaller binary etc. Erasure of type parameters facilitates this.\r\n\r\nJava breaks static typing by allowing type information to be queried at runtime - reflection, instanceof etc. This allows you to construct programs that cannot be statically verified - they bypass the type system. It also misses opportunities for static optimisation. \r\n\r\nThe fact that type parameters are erased prevents some instances of these incorrect programs to be constructed, however, more incorrect programs would be disallowed if more type information was erased and the reflection and instanceof facilities were removed.\r\n\r\nErasure is important for upholding the property of &quot;parametricity&quot; of a data type. Say I have a type &quot;List&quot; parameterised over component type T. i.e. List&amp;lt;T&amp;gt;. That type is a proposition that this List type works identically for any type T. The fact that T is an abstract, unbounded type parameter means that we know nothing about this type, therefore are prevented from doing anything special for special cases of T. \r\n\r\ne.g. say I have a List&lt;String&gt; xs = asList(&quot;3&quot;). I add an element: xs.add(&quot;q&quot;). I end up with [&quot;3&quot;,&quot;q&quot;].\r\nSince this is parametric, I can assume that List&lt;Integer&gt; xs = asList(7); xs.add(8) ends up with [7,8]\r\nI know from the type that it doesn&#39;t do one thing for String and one thing for Int.\r\n\r\nFurthermore, I know that the List.add function can not invent values of T out of thin air. I know that if my asList(&quot;3&quot;) has a &quot;7&quot; added to it, the only possible answers would be constructed out of the values &quot;3&quot; and &quot;7&quot;. There is no possibility of a &quot;2&quot; or &quot;z&quot; being added to the list because the function would be unable to construct it. Neither of these other values would be sensible to add, and parametricity prevents these incorrect programs from being constructed.\r\n\r\nBasically, erasure prevents some means of violating parametricity, thus eliminating possibilities of incorrect programs, which is the goal of static typing.\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>Types are a construct used for writing programs in a manner that allows the compiler to check the correctness of a program. A type is a proposition on a value - the compiler verifies that this proposition is true. </p>\n\n<p>During the execution of a program, there should be no need for type information - this has already been verified by the compiler. The compiler should be free to discard this information in order to perform optimisations on the code - make it run faster, generate a smaller binary etc. Erasure of type parameters facilitates this.</p>\n\n<p>Java breaks static typing by allowing type information to be queried at runtime - reflection, instanceof etc. This allows you to construct programs that cannot be statically verified - they bypass the type system. It also misses opportunities for static optimisation. </p>\n\n<p>The fact that type parameters are erased prevents some instances of these incorrect programs to be constructed, however, more incorrect programs would be disallowed if more type information was erased and the reflection and instanceof facilities were removed.</p>\n\n<p>Erasure is important for upholding the property of \"parametricity\" of a data type. Say I have a type \"List\" parameterised over component type T. i.e. List&lt;T&gt;. That type is a proposition that this List type works identically for any type T. The fact that T is an abstract, unbounded type parameter means that we know nothing about this type, therefore are prevented from doing anything special for special cases of T. </p>\n\n<p>e.g. say I have a List xs = asList(\"3\"). I add an element: xs.add(\"q\"). I end up with [\"3\",\"q\"].\nSince this is parametric, I can assume that List xs = asList(7); xs.add(8) ends up with [7,8]\nI know from the type that it doesn't do one thing for String and one thing for Int.</p>\n\n<p>Furthermore, I know that the List.add function can not invent values of T out of thin air. I know that if my asList(\"3\") has a \"7\" added to it, the only possible answers would be constructed out of the values \"3\" and \"7\". There is no possibility of a \"2\" or \"z\" being added to the list because the function would be unable to construct it. Neither of these other values would be sensible to add, and parametricity prevents these incorrect programs from being constructed.</p>\n\n<p>Basically, erasure prevents some means of violating parametricity, thus eliminating possibilities of incorrect programs, which is the goal of static typing.</p>\n"},{"comments":[{"owner":{"account_id":52453,"reputation":26429,"user_id":156755,"accept_rate":90,"display_name":"Basic"},"score":2,"creation_date":1419882899,"post_id":21841463,"comment_id":43803570,"body_markdown":"It seems like you&#39;re either arguing that generics are too complex for Java devs to &quot;understand and reason&quot; about, or that they can&#39;t be trusted not to shoot themselves in the foot if given the chance. The latter does appear to be in sync with Java&#39;s ethos (ala no unsigned types, etc) but it seems a little condescending to the developers","body":"It seems like you&#39;re either arguing that generics are too complex for Java devs to &quot;understand and reason&quot; about, or that they can&#39;t be trusted not to shoot themselves in the foot if given the chance. The latter does appear to be in sync with Java&#39;s ethos (ala no unsigned types, etc) but it seems a little condescending to the developers"},{"owner":{"account_id":33592,"reputation":3744,"user_id":94152,"accept_rate":100,"display_name":"Lachlan"},"score":1,"creation_date":1420547438,"post_id":21841463,"comment_id":44005885,"body_markdown":"@Basic I must have expressed myself very poorly, because that isn&#39;t what I meant at all. The problem is not that generics are complex, it&#39;s that things like casting and `instanceof` impede our ability to reason about what code does based on types. If Java were to reify type arguments it would just make this problem worse. Erasing types at runtime has the effect of making the type system more useful.","body":"@Basic I must have expressed myself very poorly, because that isn&#39;t what I meant at all. The problem is not that generics are complex, it&#39;s that things like casting and <code>instanceof</code> impede our ability to reason about what code does based on types. If Java were to reify type arguments it would just make this problem worse. Erasing types at runtime has the effect of making the type system more useful."},{"owner":{"account_id":24366,"reputation":7247,"user_id":61938,"accept_rate":71,"display_name":"Rob Grant"},"score":0,"creation_date":1483372784,"post_id":21841463,"comment_id":70065417,"body_markdown":"@lachlan it made perfect sense to me, and I don&#39;t think a normal reading of it would pick up any insult to Java devs.","body":"@lachlan it made perfect sense to me, and I don&#39;t think a normal reading of it would pick up any insult to Java devs."}],"tags":[],"owner":{"account_id":33592,"reputation":3744,"user_id":94152,"accept_rate":100,"display_name":"Lachlan"},"comment_count":3,"down_vote_count":3,"up_vote_count":8,"is_accepted":false,"score":5,"last_activity_date":1392680083,"creation_date":1392680083,"answer_id":21841463,"question_id":20918650,"body_markdown":"The reason type erasure is a good thing is that the things it makes impossible are harmful. Preventing the inspection of type arguments at runtime makes understanding and reasoning about programs easier.\r\n\r\nAn observation that I found somewhat counter-intuitive is that when function signatures are *more* generic, they become easier to understand. This is because the number of possible implementations is reduced. Consider a method with this signature, which we somehow know has no side effects:\r\n\r\n    public List&lt;Integer&gt; XXX(final List&lt;Integer&gt; l);\r\n\r\nWhat are the possible implementations of this function? Very many. You can tell very little about what this function does. It could be reversing the input list. It could be pairing ints together, summing them and returning a list half the size. There are many other possibilities that could be imagined. Now consider:\r\n\r\n    public &lt;T&gt; List&lt;T&gt; XXX(final List&lt;T&gt; l);\r\n\r\nHow many implementations of this function are there? Since the implementation cannot know the type of the elements, a huge number of implementations can now be excluded: elements cannot be combined, or added to the list or filtered out, et al. We are limited to things like: identity (no change to the list), dropping elements, or reversing the list. This function is easier to reason about based on its signature alone.\r\n\r\nExcept… in Java you can always cheat the type system. Because the implementation of that generic method can use stuff like `instanceof` checks and/or casts to arbitrary types, our reasoning based on the type signature can be easily rendered useless. The function *could* inspect the type of the elements and do any number of things based on the result. If these runtime hacks are allowed, parameterised method signatures become much less useful to us.\r\n\r\nIf Java did not have type erasure (that is, type arguments were reified at runtime) then this would simply allow *more* reasoning-impairing shenanigans of this kind. In the above example, the implementation can only violate the expectations set by the type signature if the list has at least one element; but if `T` was reified, it could do so even if the list were empty. Reified types would just increase the (already very many) possibilities for impeding our understanding of the code.\r\n\r\nType erasure makes the language less &quot;powerful&quot;. But some forms of &quot;power&quot; are actually harmful.\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>The reason type erasure is a good thing is that the things it makes impossible are harmful. Preventing the inspection of type arguments at runtime makes understanding and reasoning about programs easier.</p>\n\n<p>An observation that I found somewhat counter-intuitive is that when function signatures are <em>more</em> generic, they become easier to understand. This is because the number of possible implementations is reduced. Consider a method with this signature, which we somehow know has no side effects:</p>\n\n<pre><code>public List&lt;Integer&gt; XXX(final List&lt;Integer&gt; l);\n</code></pre>\n\n<p>What are the possible implementations of this function? Very many. You can tell very little about what this function does. It could be reversing the input list. It could be pairing ints together, summing them and returning a list half the size. There are many other possibilities that could be imagined. Now consider:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; XXX(final List&lt;T&gt; l);\n</code></pre>\n\n<p>How many implementations of this function are there? Since the implementation cannot know the type of the elements, a huge number of implementations can now be excluded: elements cannot be combined, or added to the list or filtered out, et al. We are limited to things like: identity (no change to the list), dropping elements, or reversing the list. This function is easier to reason about based on its signature alone.</p>\n\n<p>Except… in Java you can always cheat the type system. Because the implementation of that generic method can use stuff like <code>instanceof</code> checks and/or casts to arbitrary types, our reasoning based on the type signature can be easily rendered useless. The function <em>could</em> inspect the type of the elements and do any number of things based on the result. If these runtime hacks are allowed, parameterised method signatures become much less useful to us.</p>\n\n<p>If Java did not have type erasure (that is, type arguments were reified at runtime) then this would simply allow <em>more</em> reasoning-impairing shenanigans of this kind. In the above example, the implementation can only violate the expectations set by the type signature if the list has at least one element; but if <code>T</code> was reified, it could do so even if the list were empty. Reified types would just increase the (already very many) possibilities for impeding our understanding of the code.</p>\n\n<p>Type erasure makes the language less \"powerful\". But some forms of \"power\" are actually harmful.</p>\n"},{"comments":[{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":10,"creation_date":1392695667,"post_id":21843984,"comment_id":33065171,"body_markdown":"In the time I took to cobble together this response, some other people replied with similar answers.  But having written this much, I decided to post it rather than discard it.","body":"In the time I took to cobble together this response, some other people replied with similar answers.  But having written this much, I decided to post it rather than discard it."},{"owner":{"account_id":4036904,"reputation":493,"user_id":3321001,"display_name":"techtangents"},"score":4,"creation_date":1392719685,"post_id":21843984,"comment_id":33076712,"body_markdown":"Well... in theory you could statically constrain T to types that do have a no-arg constructor. From memory, C# has this feature. It&#39;s not that dissimilar to having a type restriction of a typeclass that has a &quot;default&quot; method - e.g. mempty on Haskell&#39;s Data.Monoid. Still, you&#39;re specialising the type - you need to gain something from that.","body":"Well... in theory you could statically constrain T to types that do have a no-arg constructor. From memory, C# has this feature. It&#39;s not that dissimilar to having a type restriction of a typeclass that has a &quot;default&quot; method - e.g. mempty on Haskell&#39;s Data.Monoid. Still, you&#39;re specialising the type - you need to gain something from that."},{"owner":{"account_id":11091,"reputation":99074,"user_id":21239,"accept_rate":81,"display_name":"Mauricio Scheffer"},"score":3,"creation_date":1392732268,"post_id":21843984,"comment_id":33085946,"body_markdown":"Indeed, .NET can safely restrict type parameters to types with no-arg constructors. e.g. in C# `where T: new()` http://msdn.microsoft.com/en-us/library/d5x73970.aspx . That&#39;s still very limited of course.","body":"Indeed, .NET can safely restrict type parameters to types with no-arg constructors. e.g. in C# <code>where T: new()</code> <a href=\"http://msdn.microsoft.com/en-us/library/d5x73970.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/d5x73970.aspx</a> . That&#39;s still very limited of course."},{"owner":{"account_id":52453,"reputation":26429,"user_id":156755,"accept_rate":90,"display_name":"Basic"},"score":54,"creation_date":1419882534,"post_id":21843984,"comment_id":43803396,"body_markdown":"With respect, type erasure was a half-assed attempt to bring a feature to Java without breaking backwards compatibility. It&#39;s not a strength. If the major concern were that you might try to instantiate an object with no parameterless constructor, the right answer is to allow a constraint of &quot;types with parameterless constructors&quot;, not to cripple a language feature.","body":"With respect, type erasure was a half-assed attempt to bring a feature to Java without breaking backwards compatibility. It&#39;s not a strength. If the major concern were that you might try to instantiate an object with no parameterless constructor, the right answer is to allow a constraint of &quot;types with parameterless constructors&quot;, not to cripple a language feature."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":7,"creation_date":1420083561,"post_id":21843984,"comment_id":43868119,"body_markdown":"Basic, with respect, you&#39;re not making a cohesive argument.  You&#39;re merely asserting that erasure is &quot;crippling&quot; with a complete disregard for the value of compile-time proofs as a compelling tool for reasoning about programs.  Furthermore, these benefits are completely orthogonal of the crooked path and motivation Java took for implementing generics.  Also, these benefits hold for languages with far more enlightened implementation of erasure.","body":"Basic, with respect, you&#39;re not making a cohesive argument.  You&#39;re merely asserting that erasure is &quot;crippling&quot; with a complete disregard for the value of compile-time proofs as a compelling tool for reasoning about programs.  Furthermore, these benefits are completely orthogonal of the crooked path and motivation Java took for implementing generics.  Also, these benefits hold for languages with far more enlightened implementation of erasure."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":5,"creation_date":1436181696,"post_id":21843984,"comment_id":50486442,"body_markdown":"WRT to Java having &quot;got type erasure right&quot;, I would be interested to find out why this is right: `public void doStuff(List&lt;ClassOne&gt; collection) {  } public void doStuff(List&lt;ClassTwo&gt; collection) // ERROR: a method can&#39;t have overloads which only differ in type parameters`","body":"WRT to Java having &quot;got type erasure right&quot;, I would be interested to find out why this is right: <code>public void doStuff(List&lt;ClassOne&gt; collection) {  } public void doStuff(List&lt;ClassTwo&gt; collection) &#47;&#47; ERROR: a method can&#39;t have overloads which only differ in type parameters</code>"},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":2,"creation_date":1445111352,"post_id":21843984,"comment_id":54187692,"body_markdown":"Hi Marko, ad hoc polymorphism forcefully induces ambiguity for a syntactic convenience (using the same name for different type signatures) at the expense of reasoning.  Some languages have *type classes* or are able to encode them.  This is a superior solution, that gives you name reuse without breaking what we can reason about statically.  So I&#39;m not suggesting Java&#39;s implementation is perfect, but that the choice to reify generics is unreasonable (literally).","body":"Hi Marko, ad hoc polymorphism forcefully induces ambiguity for a syntactic convenience (using the same name for different type signatures) at the expense of reasoning.  Some languages have <i>type classes</i> or are able to encode them.  This is a superior solution, that gives you name reuse without breaking what we can reason about statically.  So I&#39;m not suggesting Java&#39;s implementation is perfect, but that the choice to reify generics is unreasonable (literally)."},{"owner":{"account_id":38725,"reputation":100233,"user_id":111335,"accept_rate":75,"display_name":"Pavel Minaev"},"score":59,"creation_date":1463013532,"post_id":21843984,"comment_id":61885452,"body_markdown":"The argument presented here is not against erasure, it&#39;s against reflection  (and runtime type checking in general) - it basically asserts that reflection is bad, so the fact that erasure doesn&#39;t play well with them is good. It&#39;s a valid point on its own (although many people would disagree); but it doesn&#39;t make much sense in context, because Java already has reflection / runtime checks, and they didn&#39;t and won&#39;t go away. So to have a construct that doesn&#39;t play with that existing, non-deprecated part of the language _is_ a limitation, no matter how you look at it.","body":"The argument presented here is not against erasure, it&#39;s against reflection  (and runtime type checking in general) - it basically asserts that reflection is bad, so the fact that erasure doesn&#39;t play well with them is good. It&#39;s a valid point on its own (although many people would disagree); but it doesn&#39;t make much sense in context, because Java already has reflection / runtime checks, and they didn&#39;t and won&#39;t go away. So to have a construct that doesn&#39;t play with that existing, non-deprecated part of the language <i>is</i> a limitation, no matter how you look at it."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":2,"creation_date":1463344605,"post_id":21843984,"comment_id":62015697,"body_markdown":"Hi Pavel.  I think your point is fairly presented.  I would suggest that what you call a &quot;limitation&quot; is for me similar to how guardrails &quot;limit&quot; me from running my car off a cliff.  Some limitations are better viewed as architectural constraints, from which we derive useful system invariants.  But I&#39;ll agree, that if you&#39;re already launched off the cliff, erasure serves as no parachute.","body":"Hi Pavel.  I think your point is fairly presented.  I would suggest that what you call a &quot;limitation&quot; is for me similar to how guardrails &quot;limit&quot; me from running my car off a cliff.  Some limitations are better viewed as architectural constraints, from which we derive useful system invariants.  But I&#39;ll agree, that if you&#39;re already launched off the cliff, erasure serves as no parachute."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":16,"creation_date":1466328840,"post_id":21843984,"comment_id":63263953,"body_markdown":"Your answer is simply off-topic. You enter a long-winded (though interesting on its own terms) explanation of why type erasure as an abstract concept is generally useful in the design of type systems, but the topic is the benefit of a specific characteristic of Java Generics labeled &quot;type erasure&quot;, which only superficially resembles the concept you describe, failing completely at providing the interesting invariants and introducing unreasonable constraints.","body":"Your answer is simply off-topic. You enter a long-winded (though interesting on its own terms) explanation of why type erasure as an abstract concept is generally useful in the design of type systems, but the topic is the benefit of a specific characteristic of Java Generics labeled &quot;type erasure&quot;, which only superficially resembles the concept you describe, failing completely at providing the interesting invariants and introducing unreasonable constraints."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":3,"creation_date":1466378527,"post_id":21843984,"comment_id":63277435,"body_markdown":"I believe Phillip Wadler (who had a lot of input in Java Generics with Pizza) and is also has published a good bit on free theorems and parametricity would disagree that the formalism and and implementation relate only with a &quot;superficial resemblance.&quot;  The relationship is very clear and there are a number of libraries that capitalize on the correspondence on the JVM (Functional Java, Scalaz, Cats, etc.).","body":"I believe Phillip Wadler (who had a lot of input in Java Generics with Pizza) and is also has published a good bit on free theorems and parametricity would disagree that the formalism and and implementation relate only with a &quot;superficial resemblance.&quot;  The relationship is very clear and there are a number of libraries that capitalize on the correspondence on the JVM (Functional Java, Scalaz, Cats, etc.)."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":0,"creation_date":1466699471,"post_id":21843984,"comment_id":63437967,"body_markdown":"No, Java&#39;s subtyping as nothing to do with the &quot;theorems for free&quot; paper.  Please, please, please read more on parametricity and free theorems before telling me what I /must/ mean.  Wadler and Reynolds have published a lot.","body":"No, Java&#39;s subtyping as nothing to do with the &quot;theorems for free&quot; paper.  Please, please, please read more on parametricity and free theorems before telling me what I /must/ mean.  Wadler and Reynolds have published a lot."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1470147309,"post_id":21843984,"comment_id":64821814,"body_markdown":"The paper doesn&#39;t talk about type erasure, but about what theorems can be proven _before_ type erasure is applied. Applying Java&#39;s &quot;type erasure&quot; does not erase types, it just cripples them to raw types. It also does a bunch of other legacy-induced weirdness, like preventing the &quot;colliding&quot; signatures I mention above. The continued existence of things like raw types and reflection makes the whole type safety edifice crumble. No theorems can be proven about a program that contains a single instance of reflective or raw type access.","body":"The paper doesn&#39;t talk about type erasure, but about what theorems can be proven <i>before</i> type erasure is applied. Applying Java&#39;s &quot;type erasure&quot; does not erase types, it just cripples them to raw types. It also does a bunch of other legacy-induced weirdness, like preventing the &quot;colliding&quot; signatures I mention above. The continued existence of things like raw types and reflection makes the whole type safety edifice crumble. No theorems can be proven about a program that contains a single instance of reflective or raw type access."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1470148402,"post_id":21843984,"comment_id":64822721,"body_markdown":"Therefore, when you say &quot;the relationship is very clear&quot;, you _must_ be referring to something else than Java&#39;s type erasure, which is the topic here. You must also be referring to something else than the totality of the Java type system, which allows the conversion from a raw type into a parameterized type.","body":"Therefore, when you say &quot;the relationship is very clear&quot;, you <i>must</i> be referring to something else than Java&#39;s type erasure, which is the topic here. You must also be referring to something else than the totality of the Java type system, which allows the conversion from a raw type into a parameterized type."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":4,"creation_date":1470173434,"post_id":21843984,"comment_id":64837843,"body_markdown":"&quot;No theorems can be proven about a program that contains a single instance of reflective or raw type access.&quot;  I agree.  Don&#39;t do it.  Type erasure rewards people that don&#39;t, and penalizes people that do.  That is the very point of this post.  It&#39;s true to get the benefit of free theorems, you may have to build walls in which code is not reflective.  This can/should/is done in many JVM-based projects.  This is done to get free theorems at all, rather giving up on the process of engineering well.","body":"&quot;No theorems can be proven about a program that contains a single instance of reflective or raw type access.&quot;  I agree.  Don&#39;t do it.  Type erasure rewards people that don&#39;t, and penalizes people that do.  That is the very point of this post.  It&#39;s true to get the benefit of free theorems, you may have to build walls in which code is not reflective.  This can/should/is done in many JVM-based projects.  This is done to get free theorems at all, rather giving up on the process of engineering well."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1471104243,"post_id":21843984,"comment_id":65224901,"body_markdown":"Actually, true type erasure would _prevent_ people from doing bad things. That&#39;s my point all along: Java&#39;s type erasure isn&#39;t a feature but a hack forced upon it by legacy. Compare it with the true erasure of primitive types. So, while there are benefits to Generics, there are zero benefits to &quot;erasure&quot;.","body":"Actually, true type erasure would <i>prevent</i> people from doing bad things. That&#39;s my point all along: Java&#39;s type erasure isn&#39;t a feature but a hack forced upon it by legacy. Compare it with the true erasure of primitive types. So, while there are benefits to Generics, there are zero benefits to &quot;erasure&quot;."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":0,"creation_date":1471343532,"post_id":21843984,"comment_id":65298444,"body_markdown":"Type erasure prevents me from doing bad things all the time.  I don&#39;t reflect, because I don&#39;t want to, nor do I have to, except for in a few cases where the &quot;legacy&quot; as you call it forces me to.  And as a result, in my walled garden, I get free theorems, which I use constantly.  If you want to claim &quot;zero&quot; benefits, you are making all programs I write in this way of &quot;zero&quot; beneift -- which is beyond the pale.","body":"Type erasure prevents me from doing bad things all the time.  I don&#39;t reflect, because I don&#39;t want to, nor do I have to, except for in a few cases where the &quot;legacy&quot; as you call it forces me to.  And as a result, in my walled garden, I get free theorems, which I use constantly.  If you want to claim &quot;zero&quot; benefits, you are making all programs I write in this way of &quot;zero&quot; beneift -- which is beyond the pale."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1472041616,"post_id":21843984,"comment_id":65592076,"body_markdown":"Your free theorems are not the result of type erasure. Name one bad thing type erasure prevents you from doing.","body":"Your free theorems are not the result of type erasure. Name one bad thing type erasure prevents you from doing."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":1,"creation_date":1472140781,"post_id":21843984,"comment_id":65643123,"body_markdown":"No, they aren&#39;t the result, but type erasure is a distraction.  Reified types only make for a world where people can break free theorems.  Also, they come with a lot of compilation headaches (though granted these are behind the scenes for a lot of casual users).  The part that bothers me is 1) I don&#39;t need them  2) I don&#39;t want them  3) they only help break my programs.  This, by the way, is the point of this post (as I&#39;ve said before).  I think all your points have been made, and I&#39;ve responded.  If we&#39;re to continue this, can we find a new angle of discussion?","body":"No, they aren&#39;t the result, but type erasure is a distraction.  Reified types only make for a world where people can break free theorems.  Also, they come with a lot of compilation headaches (though granted these are behind the scenes for a lot of casual users).  The part that bothers me is 1) I don&#39;t need them  2) I don&#39;t want them  3) they only help break my programs.  This, by the way, is the point of this post (as I&#39;ve said before).  I think all your points have been made, and I&#39;ve responded.  If we&#39;re to continue this, can we find a new angle of discussion?"},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":4,"creation_date":1472206168,"post_id":21843984,"comment_id":65670253,"body_markdown":"Your post contains statements such as &quot;Without erasure there&#39;s runtime information that&#39;s carried with the implementation that we can use to design our algorithms&quot;. This implies that _with_ erasure, there&#39;s no runtime type information. This is either false, or inapplicable to Java because it _does_ have &quot;type erasure&quot; and also _does_ carry runtime type information. You say &quot;not erasing leads to abuses&quot;, as if Java _prevents_ abuses by sporting erasure. All this leads me to characterize your post as off-topic at best (applying to true erasure), but misleading would be a more honest description.","body":"Your post contains statements such as &quot;Without erasure there&#39;s runtime information that&#39;s carried with the implementation that we can use to design our algorithms&quot;. This implies that <i>with</i> erasure, there&#39;s no runtime type information. This is either false, or inapplicable to Java because it <i>does</i> have &quot;type erasure&quot; and also <i>does</i> carry runtime type information. You say &quot;not erasing leads to abuses&quot;, as if Java <i>prevents</i> abuses by sporting erasure. All this leads me to characterize your post as off-topic at best (applying to true erasure), but misleading would be a more honest description."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":0,"creation_date":1472939078,"post_id":21843984,"comment_id":65956022,"body_markdown":"Java&#39;s implementation of erasure is partial, it&#39;s true.  I&#39;m not interested in semantic debate of what aspects of &quot;erasure&quot; are theoretic.  Java certainly is not the reference implementation.  I have a feeling most readers can figure out the details, certainly with the trail of comments we&#39;ve left behind.  I really don&#39;t think there&#39;s much more to say on this topic.","body":"Java&#39;s implementation of erasure is partial, it&#39;s true.  I&#39;m not interested in semantic debate of what aspects of &quot;erasure&quot; are theoretic.  Java certainly is not the reference implementation.  I have a feeling most readers can figure out the details, certainly with the trail of comments we&#39;ve left behind.  I really don&#39;t think there&#39;s much more to say on this topic."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":1,"creation_date":1473133785,"post_id":21843984,"comment_id":66011655,"body_markdown":"I have made no such admission.  You should cite literature if you wish to claim an exact semantics for &quot;type erasure.&quot;  I should just let this go, because your argument has dwindled back into very crooked rhetoric.  I suppose this is the norm for Stackoverflow comments.  Just make one citation from an established PL researcher -- and we can continue this with civility.  If you say &quot;no, I&#39;m from industry, so I get to say what I want without consequence,&quot; then I suppose you won&#39;t be the first.","body":"I have made no such admission.  You should cite literature if you wish to claim an exact semantics for &quot;type erasure.&quot;  I should just let this go, because your argument has dwindled back into very crooked rhetoric.  I suppose this is the norm for Stackoverflow comments.  Just make one citation from an established PL researcher -- and we can continue this with civility.  If you say &quot;no, I&#39;m from industry, so I get to say what I want without consequence,&quot; then I suppose you won&#39;t be the first."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":4,"creation_date":1473147598,"post_id":21843984,"comment_id":66016787,"body_markdown":"Let me remind you that this topic is about _Java&#39;s_ type erasure. If it weren&#39;t for my extra care to give you latitude and allow that you are talking about _some_ definition of type erasure, I could only conclude that your post is full of falsehood and inconsistency. The onus is on _you_ to produce statements and citations relevant to the context.","body":"Let me remind you that this topic is about <i>Java&#39;s</i> type erasure. If it weren&#39;t for my extra care to give you latitude and allow that you are talking about <i>some</i> definition of type erasure, I could only conclude that your post is full of falsehood and inconsistency. The onus is on <i>you</i> to produce statements and citations relevant to the context."},{"owner":{"account_id":482123,"reputation":310,"user_id":896325,"accept_rate":71,"display_name":"jungle_mole"},"score":1,"creation_date":1496293166,"post_id":21843984,"comment_id":75603196,"body_markdown":"lol. What holds you from using reflection? Type erasure? I guess no. You yourself repeat several times that you don&#39;t need/want/will ever use reflection. So what&#39;s holding you from using reflection is (surprise) your mindset. Java features don&#39;t. In your case type erasure simply doesn&#39;t matter a bit. It will make no difference for you, if they&#39;ll make it deprecated tomorrow. You can easily employ aforementioned &quot;coding style&quot; in languages that don&#39;t have type erasure. So the answer is offtopic.","body":"lol. What holds you from using reflection? Type erasure? I guess no. You yourself repeat several times that you don&#39;t need/want/will ever use reflection. So what&#39;s holding you from using reflection is (surprise) your mindset. Java features don&#39;t. In your case type erasure simply doesn&#39;t matter a bit. It will make no difference for you, if they&#39;ll make it deprecated tomorrow. You can easily employ aforementioned &quot;coding style&quot; in languages that don&#39;t have type erasure. So the answer is offtopic."},{"owner":{"account_id":482123,"reputation":310,"user_id":896325,"accept_rate":71,"display_name":"jungle_mole"},"score":4,"creation_date":1496293968,"post_id":21843984,"comment_id":75603428,"body_markdown":"`&lt;T&gt; T broken { return new T(); }` Yeah. Make up a piece of bad code and blame a language. May be also blame it for allowing to use signed integer as index in array? `int i=-1; array[i];` -- see? The language is flawed! Also FYI, take c# for example. Compiler will give you an error if you try to use `return new T();` while not having parameterless constructor constraint on your generic.","body":"<code>&lt;T&gt; T broken { return new T(); }</code> Yeah. Make up a piece of bad code and blame a language. May be also blame it for allowing to use signed integer as index in array? <code>int i=-1; array[i];</code> -- see? The language is flawed! Also FYI, take c# for example. Compiler will give you an error if you try to use <code>return new T();</code> while not having parameterless constructor constraint on your generic."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":0,"creation_date":1496436215,"post_id":21843984,"comment_id":75678203,"body_markdown":"My mindset is based on the benefit of proof.  I use proof.  If you don&#39;t, then that&#39;s your choice.  Erasure is merely something we can only do when we actually have the proof we can.  This proof has benefits well beyond erasure (parametricity is a common example).  And requiring that we have &quot;reified generics&quot; is merely proof we don&#39;t have such a proof.  There is lot of research in this area.  And people that have mastered these techniques are often well aware of the alternatives.","body":"My mindset is based on the benefit of proof.  I use proof.  If you don&#39;t, then that&#39;s your choice.  Erasure is merely something we can only do when we actually have the proof we can.  This proof has benefits well beyond erasure (parametricity is a common example).  And requiring that we have &quot;reified generics&quot; is merely proof we don&#39;t have such a proof.  There is lot of research in this area.  And people that have mastered these techniques are often well aware of the alternatives."},{"owner":{"account_id":1783158,"reputation":8810,"user_id":1625339,"accept_rate":40,"display_name":"Aetherus"},"score":1,"creation_date":1583548517,"post_id":21843984,"comment_id":107165217,"body_markdown":"Maybe Java has its reason to ban `new T()`, but why also ban `new T[n]`?","body":"Maybe Java has its reason to ban <code>new T()</code>, but why also ban <code>new T[n]</code>?"},{"owner":{"account_id":19051555,"reputation":111,"user_id":14873194,"display_name":"Noak Palander"},"score":1,"creation_date":1668648283,"post_id":21843984,"comment_id":131459371,"body_markdown":"The `broken` method is so no sensical though, any decent language would allow this with generics without the need for runtime behaviors like nulls or exceptions. C++ did it, haskell did it, rust did it, it&#39;s called a compile time error. The very least java could have done is added some constraint like &quot;default initializable&quot; or similar, that would have the benefit of the signature reflecting the constraint. When C++ can do this with 1 constraint and an auto, and java cant, you know you&#39;ve screwed up majorly.","body":"The <code>broken</code> method is so no sensical though, any decent language would allow this with generics without the need for runtime behaviors like nulls or exceptions. C++ did it, haskell did it, rust did it, it&#39;s called a compile time error. The very least java could have done is added some constraint like &quot;default initializable&quot; or similar, that would have the benefit of the signature reflecting the constraint. When C++ can do this with 1 constraint and an auto, and java cant, you know you&#39;ve screwed up majorly."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":0,"creation_date":1682205556,"post_id":21843984,"comment_id":134179128,"body_markdown":"Yes, I agree.  Catching things at compile time is wonderful.  However, to do so will require a refinement of the type beyond universal types, which is what we have with a language feature like generics or type parameters.  We need a way to describe the difference between a type and a type that has specific constructors.  You&#39;re right that Haskell does this.  It does it with type classes.  Type classes allow us to add constraints on a universal type.  This is a reason I moved from Java to Scala some years ago.  Scala allowed me to encode type classes with implicits.","body":"Yes, I agree.  Catching things at compile time is wonderful.  However, to do so will require a refinement of the type beyond universal types, which is what we have with a language feature like generics or type parameters.  We need a way to describe the difference between a type and a type that has specific constructors.  You&#39;re right that Haskell does this.  It does it with type classes.  Type classes allow us to add constraints on a universal type.  This is a reason I moved from Java to Scala some years ago.  Scala allowed me to encode type classes with implicits."},{"owner":{"account_id":5355547,"reputation":598,"user_id":4996524,"accept_rate":56,"display_name":"YoTengoUnLCD"},"score":0,"creation_date":1701274646,"post_id":21843984,"comment_id":136756173,"body_markdown":"^ You can do the same with interfaces (with caveats, yes).","body":"^ You can do the same with interfaces (with caveats, yes)."}],"tags":[],"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"comment_count":30,"down_vote_count":27,"up_vote_count":129,"is_accepted":true,"score":102,"last_activity_date":1674623719,"creation_date":1392695462,"answer_id":21843984,"question_id":20918650,"body_markdown":"# Type Erasure Is Good\r\n\r\n## Let&#39;s stick to the facts\r\n\r\nA lot of the answers thus far are overly concerned with the Twitter user.  It&#39;s helpful to keep focused on the messages and not the messenger.  There is a fairly consistent message with even just the excerpts mentioned thus far:\r\n\r\n&gt; It&#39;s funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.\r\n&gt;\r\n&gt; I get huge benefits (e.g. parametricity) and nil cost (alleged cost is a limit of imagination).\r\n&gt;\r\n&gt; new T is a broken program. It is isomorphic to the claim &quot;all propositions are true.&quot;  I am not big into this.\r\n\r\n## A goal: reasonable programs\r\n\r\nThese tweets reflect a perspective that is not interested in whether we can make the machine do *something*, but more whether we can reason that the machine will do something we actually want.  Good reasoning is a proof.  Proofs can be specified in formal notation or something less formal.  Regardless of the specification language, they must be clear and rigorous.  Informal specifications are not impossible to structure correctly, but are often flawed in practical programming.  We end up with remediations like automated and exploratory tests to make up for the problems we have with informal reasoning.  This is not to say that testing is intrinsically a bad idea, but the quoted Twitter user is suggesting that there is a much better way.\r\n\r\nSo our goal is to have correct programs that we can reason about clearly and rigorously in a way that corresponds with how the machine will actually execute the program.  This, though, is not the only goal.  We also want our logic to have a degree of expressivity.  For example, there&#39;s only so much we can express with propositional logic.  It&#39;s nice to have universal (∀) and existential (∃) quantification from something like first-order logic.\r\n\r\n## Using type systems for reasoning\r\n\r\nThese goals can be very nicely addressed by type systems.  This is especially clear because of the [Curry-Howard correspondence](http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence).  This correspondence is often expressed with the following analogy:  types are to programs as theorems are to proofs.\r\n\r\nThis correspondence is somewhat profound.  We can take logical expressions, and translate them through the correspondence to types.  Then if we have a program with the same type signature that compiles, we have proven that the logical expression is universally true (a tautology).  This is because the correspondence is two-way.  The transformation between the type/program and the theorem/proof worlds are mechanical, and can in many cases be automated.\r\n\r\nCurry-Howard plays nicely into what we&#39;d like to do with specifications for a program.\r\n\r\n## Are type systems useful in Java?\r\n\r\nEven with an understanding of Curry-Howard, some people find it easy to dismiss the value of a type system, when it\r\n\r\n1. is extremely hard to work with\r\n2. corresponds (through Curry-Howard) to a logic with limited expressivity\r\n3. is broken (which gets to the characterization of systems as &quot;weak&quot; or &quot;strong&quot;).\r\n\r\nRegarding the first point, perhaps IDEs make Java&#39;s type system easy enough to work with (that&#39;s highly subjective).\r\n\r\nRegarding the second point, Java happens to *almost* correspond to a first-order logic.  Generics give use the type system equivalent of universal quantification.  Unfortunately, wildcards only give us a small fraction of existential quantification.  But universal quantification is pretty good start.  It&#39;s nice to be able to say that functions for `List&lt;A&gt;` work universally for *all possible* lists because A is completely unconstrained.  This leads to what the Twitter user is talking about with respect to &quot;parametricity.&quot;\r\n\r\nAn often-cited paper about parametricity is Philip Wadler&#39;s [*Theorems for free!*](http://ttic.uchicago.edu/~dreyer/course/papers/wadler.pdf).  What&#39;s interesting about this paper is that from just the type signature alone, we can prove some very interesting invariants.  If we were to write automated tests for these invariants we would be very much wasting our time.  For example, for `List&lt;A&gt;`, from the type signature alone for `flatten`\r\n\r\n    &lt;A&gt; List&lt;A&gt; flatten(List&lt;List&lt;A&gt;&gt; nestedLists);\r\n\r\nwe can reason that\r\n\r\n    flatten(nestedList.map(l -&gt; l.map(any_function)))\r\n        ≡ flatten(nestedList).map(any_function)\r\n\r\nThat&#39;s a simple example, and you can probably reason about it informally, but it&#39;s even nicer when we get such proofs formally for free from the type system and checked by the compiler.\r\n\r\n## Not erasing can lead to abuses\r\n\r\nFrom the perspective of language implementation, Java&#39;s generics (which correspond to universal types) play very heavily into the parametricity used to get proofs about what our programs do.   This gets to the third problem mentioned.  All these gains of proof and correctness require a sound type system implemented without defects.  Java definitely has some language features that allow us to shatter our reasoning.  These include but are not limited to:\r\n\r\n* side-effects with an external system\r\n* reflection\r\n\r\nNon-erased generics are in many ways related to reflection.  Without erasure there&#39;s runtime information that&#39;s carried with the implementation that we can use to design our algorithms.  What this means is that statically, when we reason about programs, we don&#39;t have the full picture.  Reflection severely threatens the correctness of any proofs we reason about statically.  It&#39;s no coincidence reflection also leads to a variety of tricky defects.\r\n\r\nSo what are ways that non-erased generics might be &quot;useful?&quot;  Let&#39;s consider the usage mentioned in the tweet:\r\n\r\n    &lt;T&gt; T broken { return new T(); }\r\n\r\nWhat happens if T doesn&#39;t have a no-arg constructor?  In some languages what you get is null.  Or perhaps you skip the null value and go straight to raising an exception (which null values seem to lead to anyway).  Because our language is Turing complete, it&#39;s impossible to reason about which calls to `broken` will involve &quot;safe&quot; types with no-arg constructors and which ones won&#39;t.  We&#39;ve lost the certainty that our program works universally.\r\n\r\n## Erasing means we&#39;ve reasoned (so let&#39;s erase)\r\n\r\nSo if we want to reason about our programs, we&#39;re strongly advised to not employ language features that strongly threaten our reasoning.  Once we do that, then why not just drop the types at runtime?  They&#39;re not needed.  We can get some efficiency and simplicity with the satisfaction that no casts will fail or that methods might be missing upon invocation.\r\n\r\nErasing encourages reasoning.\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<h1>Type Erasure Is Good</h1>\n<h2>Let's stick to the facts</h2>\n<p>A lot of the answers thus far are overly concerned with the Twitter user.  It's helpful to keep focused on the messages and not the messenger.  There is a fairly consistent message with even just the excerpts mentioned thus far:</p>\n<blockquote>\n<p>It's funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.</p>\n<p>I get huge benefits (e.g. parametricity) and nil cost (alleged cost is a limit of imagination).</p>\n<p>new T is a broken program. It is isomorphic to the claim &quot;all propositions are true.&quot;  I am not big into this.</p>\n</blockquote>\n<h2>A goal: reasonable programs</h2>\n<p>These tweets reflect a perspective that is not interested in whether we can make the machine do <em>something</em>, but more whether we can reason that the machine will do something we actually want.  Good reasoning is a proof.  Proofs can be specified in formal notation or something less formal.  Regardless of the specification language, they must be clear and rigorous.  Informal specifications are not impossible to structure correctly, but are often flawed in practical programming.  We end up with remediations like automated and exploratory tests to make up for the problems we have with informal reasoning.  This is not to say that testing is intrinsically a bad idea, but the quoted Twitter user is suggesting that there is a much better way.</p>\n<p>So our goal is to have correct programs that we can reason about clearly and rigorously in a way that corresponds with how the machine will actually execute the program.  This, though, is not the only goal.  We also want our logic to have a degree of expressivity.  For example, there's only so much we can express with propositional logic.  It's nice to have universal (∀) and existential (∃) quantification from something like first-order logic.</p>\n<h2>Using type systems for reasoning</h2>\n<p>These goals can be very nicely addressed by type systems.  This is especially clear because of the <a href=\"http://en.wikipedia.org/wiki/Curry%E2%80%93Howard_correspondence\" rel=\"nofollow noreferrer\">Curry-Howard correspondence</a>.  This correspondence is often expressed with the following analogy:  types are to programs as theorems are to proofs.</p>\n<p>This correspondence is somewhat profound.  We can take logical expressions, and translate them through the correspondence to types.  Then if we have a program with the same type signature that compiles, we have proven that the logical expression is universally true (a tautology).  This is because the correspondence is two-way.  The transformation between the type/program and the theorem/proof worlds are mechanical, and can in many cases be automated.</p>\n<p>Curry-Howard plays nicely into what we'd like to do with specifications for a program.</p>\n<h2>Are type systems useful in Java?</h2>\n<p>Even with an understanding of Curry-Howard, some people find it easy to dismiss the value of a type system, when it</p>\n<ol>\n<li>is extremely hard to work with</li>\n<li>corresponds (through Curry-Howard) to a logic with limited expressivity</li>\n<li>is broken (which gets to the characterization of systems as &quot;weak&quot; or &quot;strong&quot;).</li>\n</ol>\n<p>Regarding the first point, perhaps IDEs make Java's type system easy enough to work with (that's highly subjective).</p>\n<p>Regarding the second point, Java happens to <em>almost</em> correspond to a first-order logic.  Generics give use the type system equivalent of universal quantification.  Unfortunately, wildcards only give us a small fraction of existential quantification.  But universal quantification is pretty good start.  It's nice to be able to say that functions for <code>List&lt;A&gt;</code> work universally for <em>all possible</em> lists because A is completely unconstrained.  This leads to what the Twitter user is talking about with respect to &quot;parametricity.&quot;</p>\n<p>An often-cited paper about parametricity is Philip Wadler's <a href=\"http://ttic.uchicago.edu/%7Edreyer/course/papers/wadler.pdf\" rel=\"nofollow noreferrer\"><em>Theorems for free!</em></a>.  What's interesting about this paper is that from just the type signature alone, we can prove some very interesting invariants.  If we were to write automated tests for these invariants we would be very much wasting our time.  For example, for <code>List&lt;A&gt;</code>, from the type signature alone for <code>flatten</code></p>\n<pre><code>&lt;A&gt; List&lt;A&gt; flatten(List&lt;List&lt;A&gt;&gt; nestedLists);\n</code></pre>\n<p>we can reason that</p>\n<pre><code>flatten(nestedList.map(l -&gt; l.map(any_function)))\n    ≡ flatten(nestedList).map(any_function)\n</code></pre>\n<p>That's a simple example, and you can probably reason about it informally, but it's even nicer when we get such proofs formally for free from the type system and checked by the compiler.</p>\n<h2>Not erasing can lead to abuses</h2>\n<p>From the perspective of language implementation, Java's generics (which correspond to universal types) play very heavily into the parametricity used to get proofs about what our programs do.   This gets to the third problem mentioned.  All these gains of proof and correctness require a sound type system implemented without defects.  Java definitely has some language features that allow us to shatter our reasoning.  These include but are not limited to:</p>\n<ul>\n<li>side-effects with an external system</li>\n<li>reflection</li>\n</ul>\n<p>Non-erased generics are in many ways related to reflection.  Without erasure there's runtime information that's carried with the implementation that we can use to design our algorithms.  What this means is that statically, when we reason about programs, we don't have the full picture.  Reflection severely threatens the correctness of any proofs we reason about statically.  It's no coincidence reflection also leads to a variety of tricky defects.</p>\n<p>So what are ways that non-erased generics might be &quot;useful?&quot;  Let's consider the usage mentioned in the tweet:</p>\n<pre><code>&lt;T&gt; T broken { return new T(); }\n</code></pre>\n<p>What happens if T doesn't have a no-arg constructor?  In some languages what you get is null.  Or perhaps you skip the null value and go straight to raising an exception (which null values seem to lead to anyway).  Because our language is Turing complete, it's impossible to reason about which calls to <code>broken</code> will involve &quot;safe&quot; types with no-arg constructors and which ones won't.  We've lost the certainty that our program works universally.</p>\n<h2>Erasing means we've reasoned (so let's erase)</h2>\n<p>So if we want to reason about our programs, we're strongly advised to not employ language features that strongly threaten our reasoning.  Once we do that, then why not just drop the types at runtime?  They're not needed.  We can get some efficiency and simplicity with the satisfaction that no casts will fail or that methods might be missing upon invocation.</p>\n<p>Erasing encourages reasoning.</p>\n"},{"comments":[{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":0,"creation_date":1392845588,"post_id":21860328,"comment_id":33152904,"body_markdown":"Anyone care to explain the reason for the downvote?  This is, as far as I can see, a perfectly good explanation of why the supposed downside of Java&#39;s type erasure system is not actually a real limitation at all.  So what&#39;s the problem?","body":"Anyone care to explain the reason for the downvote?  This is, as far as I can see, a perfectly good explanation of why the supposed downside of Java&#39;s type erasure system is not actually a real limitation at all.  So what&#39;s the problem?"},{"owner":{"account_id":4036904,"reputation":493,"user_id":3321001,"display_name":"techtangents"},"score":1,"creation_date":1392851011,"post_id":21860328,"comment_id":33155996,"body_markdown":"I&#39;m upvoting. Not that I support run-time type checking, but this trick can be handy in the salt mines.","body":"I&#39;m upvoting. Not that I support run-time type checking, but this trick can be handy in the salt mines."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":4,"creation_date":1393233073,"post_id":21860328,"comment_id":33313326,"body_markdown":"Java *is* a language of the salt mines, which makes this a bare necessity given the lack of runtime type information. Hopefully, type erasure will be undone in a future version of Java, making generics a much more useful feature. Currently the consensus is that their thrust/weight ratio is below 1.","body":"Java <i>is</i> a language of the salt mines, which makes this a bare necessity given the lack of runtime type information. Hopefully, type erasure will be undone in a future version of Java, making generics a much more useful feature. Currently the consensus is that their thrust/weight ratio is below 1."},{"owner":{"account_id":52453,"reputation":26429,"user_id":156755,"accept_rate":90,"display_name":"Basic"},"score":1,"creation_date":1419882968,"post_id":21860328,"comment_id":43803596,"body_markdown":"Well, sure... As long as your TargetType doesn&#39;t use generics itself. But that seems pretty limiting.","body":"Well, sure... As long as your TargetType doesn&#39;t use generics itself. But that seems pretty limiting."},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":0,"creation_date":1419925916,"post_id":21860328,"comment_id":43815735,"body_markdown":"It works with generic types too. The only constraint is that if you want to create an instance you need a constructor with the right argument types, but every other language I&#39;m aware of has the same constraint, so I don&#39;t see the limitation.","body":"It works with generic types too. The only constraint is that if you want to create an instance you need a constructor with the right argument types, but every other language I&#39;m aware of has the same constraint, so I don&#39;t see the limitation."}],"tags":[],"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"comment_count":5,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1392742542,"creation_date":1392742542,"answer_id":21860328,"question_id":20918650,"body_markdown":"An additional point none of the other answers seem to have considered: if you really need generics with run-time typing, *you can implement it yourself* like this:\r\n\r\n    public class GenericClass&lt;T&gt;\r\n    {\r\n         private Class&lt;T&gt; targetClass;\r\n         public GenericClass(Class&lt;T&gt; targetClass)\r\n         {\r\n              this.targetClass = targetClass;\r\n         }\r\n\r\nThis class is then able to do all the things that would be achievable by default if Java did not use erasure: it can allocate new `T`s (assuming `T` has a constructor that matches the pattern it expects to use), or arrays of `T`s, it can dynamically test at run time if a particular object is a `T` and change behaviour depending on that, and so on.\r\n\r\nFor example:\r\n\r\n         public T newT () { \r\n             try {\r\n                 return targetClass.newInstance(); \r\n             } catch(/* I forget which exceptions can be thrown here */) { ... }\r\n         }\r\n\r\n         private T value;\r\n         /** @throws ClassCastException if object is not a T */\r\n         public void setValueFromObject (Object object) {\r\n             value = targetClass.cast(object);\r\n         }\r\n    }\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>An additional point none of the other answers seem to have considered: if you really need generics with run-time typing, <em>you can implement it yourself</em> like this:</p>\n\n<pre><code>public class GenericClass&lt;T&gt;\n{\n     private Class&lt;T&gt; targetClass;\n     public GenericClass(Class&lt;T&gt; targetClass)\n     {\n          this.targetClass = targetClass;\n     }\n</code></pre>\n\n<p>This class is then able to do all the things that would be achievable by default if Java did not use erasure: it can allocate new <code>T</code>s (assuming <code>T</code> has a constructor that matches the pattern it expects to use), or arrays of <code>T</code>s, it can dynamically test at run time if a particular object is a <code>T</code> and change behaviour depending on that, and so on.</p>\n\n<p>For example:</p>\n\n<pre><code>     public T newT () { \n         try {\n             return targetClass.newInstance(); \n         } catch(/* I forget which exceptions can be thrown here */) { ... }\n     }\n\n     private T value;\n     /** @throws ClassCastException if object is not a T */\n     public void setValueFromObject (Object object) {\n         value = targetClass.cast(object);\n     }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1966171,"reputation":5909,"user_id":1766382,"accept_rate":67,"display_name":"Daniel Langdon"},"score":0,"creation_date":1416005675,"post_id":21967342,"comment_id":42424438,"body_markdown":"Thanks for that. It is the exact kind of deeper understanding of the philosophies involved that I expected to see for this question.","body":"Thanks for that. It is the exact kind of deeper understanding of the philosophies involved that I expected to see for this question."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":1,"creation_date":1466193694,"post_id":21967342,"comment_id":63233522,"body_markdown":"Dynamic dispatch has no dependence whatsoever on reified types.  It often relies on what the programming literature calls &quot;tags,&quot; but even then, it doesn&#39;t need to use tags.  If you make an interface (for an object), and make anonymous instances of that interface, then you are doing dynamic dispatch with no need for reified types at all.","body":"Dynamic dispatch has no dependence whatsoever on reified types.  It often relies on what the programming literature calls &quot;tags,&quot; but even then, it doesn&#39;t need to use tags.  If you make an interface (for an object), and make anonymous instances of that interface, then you are doing dynamic dispatch with no need for reified types at all."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1466198315,"post_id":21967342,"comment_id":63235564,"body_markdown":"@sukanthajra That&#39;s just hair splitting. The tag is the runtime information you need to resolve the kind of behavior the instance exhibits. It is out of the static type system&#39;s reach, and that&#39;s the essence of the concept under discussion.","body":"@sukanthajra That&#39;s just hair splitting. The tag is the runtime information you need to resolve the kind of behavior the instance exhibits. It is out of the static type system&#39;s reach, and that&#39;s the essence of the concept under discussion."},{"owner":{"account_id":4037990,"reputation":2312,"user_id":3321669,"display_name":"Sukant Hajra"},"score":2,"creation_date":1466281309,"post_id":21967342,"comment_id":63255502,"body_markdown":"There exists a very static type designed for exactly this reasoning called the &quot;sum type.&quot;  It&#39;s called a &quot;variant type&quot; also (in Benjamin Pierce&#39;s very good Types and Programming Languages book).  So this isn&#39;t hair splitting at all.  Also, you can use a catamorphism/fold/visitor for a completely completely tagless approach.","body":"There exists a very static type designed for exactly this reasoning called the &quot;sum type.&quot;  It&#39;s called a &quot;variant type&quot; also (in Benjamin Pierce&#39;s very good Types and Programming Languages book).  So this isn&#39;t hair splitting at all.  Also, you can use a catamorphism/fold/visitor for a completely completely tagless approach."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1466281661,"post_id":21967342,"comment_id":63255582,"body_markdown":"Thank you for the theory lesson, but I don&#39;t see the relevance. Our topic is Java&#39;s type system.","body":"Thank you for the theory lesson, but I don&#39;t see the relevance. Our topic is Java&#39;s type system."},{"owner":{"account_id":1895425,"reputation":2578,"user_id":1712511,"display_name":"anthavio"},"score":1,"creation_date":1545997089,"post_id":21967342,"comment_id":94753439,"body_markdown":"Well more than two years later and still not sign of undoing type erasure in JVM. Quite contrary we have even more JVM languages living happily with it. I think history proved you wrong.","body":"Well more than two years later and still not sign of undoing type erasure in JVM. Quite contrary we have even more JVM languages living happily with it. I think history proved you wrong."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1545997438,"post_id":21967342,"comment_id":94753615,"body_markdown":"@anthavio You seem to fundamentally misunderstand the concept. What Java has is just _called_ type erasure, but it&#39;s not what it actually is. `List` and `Set` are still reified types and nothing will change that. In Kotlin you can get reified generic types as well, although in a quite limited form --- up to what the underlying JVM allows without breaking interoperability.","body":"@anthavio You seem to fundamentally misunderstand the concept. What Java has is just <i>called</i> type erasure, but it&#39;s not what it actually is. <code>List</code> and <code>Set</code> are still reified types and nothing will change that. In Kotlin you can get reified generic types as well, although in a quite limited form --- up to what the underlying JVM allows without breaking interoperability."},{"owner":{"account_id":1895425,"reputation":2578,"user_id":1712511,"display_name":"anthavio"},"score":1,"creation_date":1546018715,"post_id":21967342,"comment_id":94762102,"body_markdown":"Geez saying &quot;List and Set are still reified types&quot; and the Earth is flat.\nIn Kotlin reified is only available when inlining and it is just compiler trick without preserving type for runtime.","body":"Geez saying &quot;List and Set are still reified types&quot; and the Earth is flat. In Kotlin reified is only available when inlining and it is just compiler trick without preserving type for runtime."},{"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1546070079,"post_id":21967342,"comment_id":94773085,"body_markdown":"I&#39;d like to respond to your first sentence, but I can&#39;t make any sense of it. As for your second sentence, you can read the spec document, quote `Goal: support run-time access to types passed to functions, as if they were reified`. In a world of JVM languages that &quot;live happily with type erasure&quot;, I wonder how that got in.","body":"I&#39;d like to respond to your first sentence, but I can&#39;t make any sense of it. As for your second sentence, you can read the spec document, quote <code>Goal: support run-time access to types passed to functions, as if they were reified</code>. In a world of JVM languages that &quot;live happily with type erasure&quot;, I wonder how that got in."}],"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":9,"down_vote_count":3,"up_vote_count":16,"is_accepted":false,"score":13,"last_activity_date":1393164033,"creation_date":1393153379,"answer_id":21967342,"question_id":20918650,"body_markdown":"The one thing I don&#39;t see considered here at all is that OOP&#39;s *runtime polymorphism* is fundamentally dependent on the reification of types at runtime. When a language whose backbone is held in place by refied types introduces a major extension to its type system and bases it on type erasure, cognitive dissonance is the inevitable outcome. This is precisely what happened to the Java community; it is why type erasure has attracted so much controversy, and ultimately why there are [plans to undo it in a future release of Java](http://www.theserverside.com/news/2240205870/Forget-about-JavaOne-Lets-talk-about-the-feature-list-for-Java-9). Finding something *funny* in that complaint of Java users betrays either an honest misunderstanding of the spirit of Java, or a consciously deprecating joke.\r\n\r\nThe claim &quot;erasure is the only thing Java got right&quot; implies the claim that &quot;all languages based on dynamic dispatch against the runtime type of function argument are fundamentally flawed&quot;. Although certainly a legitimate claim on its own, and one which can even be considered as valid criticism of all OOP languages including Java, it cannot lodge itself as a pivotal point from which to evaluate and criticise features *within the context of Java*, where runtime polymorphism is axiomatic.\r\n\r\nIn summary, while one may validly state &quot;type erasure is the way to go in language design&quot;, positions supporting type erasure within Java are misplaced simply because *it is much, much too late for that* and had already been so even at the historical moment when Oak was embraced by Sun and renamed to Java.\r\n\r\n\r\n----\r\n\r\n----\r\n\r\nAs to whether static typing itself is the proper direction in the design of programming languages, this fits into a much wider philosophical context of what we think constitutes the activity of *programming*. One school of thought, clearly deriving from the classical tradition of mathematics, sees programs as instances of one mathematical concept or other (propositions, functions, etc.), but there is an entirely different class of approaches, which see programming as a way to talk to the machine and explain what we want from it. In this view the program is a dynamic,  organically growing entity, a dramatic opposite of the carefully erected aedifice of a statically typed program. \r\n\r\nIt would seem natural to regard the dynamic languages as being a step in that direction: the consistency of the program emerges from the bottom up, with no *a priori* constrants which would impose it in a top-down manner. This paradigm can be seen as a step towards modeling  the process whereby we, the humans, become what we are through development and learning.\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>The one thing I don't see considered here at all is that OOP's <em>runtime polymorphism</em> is fundamentally dependent on the reification of types at runtime. When a language whose backbone is held in place by refied types introduces a major extension to its type system and bases it on type erasure, cognitive dissonance is the inevitable outcome. This is precisely what happened to the Java community; it is why type erasure has attracted so much controversy, and ultimately why there are <a href=\"http://www.theserverside.com/news/2240205870/Forget-about-JavaOne-Lets-talk-about-the-feature-list-for-Java-9\" rel=\"noreferrer\">plans to undo it in a future release of Java</a>. Finding something <em>funny</em> in that complaint of Java users betrays either an honest misunderstanding of the spirit of Java, or a consciously deprecating joke.</p>\n\n<p>The claim \"erasure is the only thing Java got right\" implies the claim that \"all languages based on dynamic dispatch against the runtime type of function argument are fundamentally flawed\". Although certainly a legitimate claim on its own, and one which can even be considered as valid criticism of all OOP languages including Java, it cannot lodge itself as a pivotal point from which to evaluate and criticise features <em>within the context of Java</em>, where runtime polymorphism is axiomatic.</p>\n\n<p>In summary, while one may validly state \"type erasure is the way to go in language design\", positions supporting type erasure within Java are misplaced simply because <em>it is much, much too late for that</em> and had already been so even at the historical moment when Oak was embraced by Sun and renamed to Java.</p>\n\n<hr>\n\n<hr>\n\n<p>As to whether static typing itself is the proper direction in the design of programming languages, this fits into a much wider philosophical context of what we think constitutes the activity of <em>programming</em>. One school of thought, clearly deriving from the classical tradition of mathematics, sees programs as instances of one mathematical concept or other (propositions, functions, etc.), but there is an entirely different class of approaches, which see programming as a way to talk to the machine and explain what we want from it. In this view the program is a dynamic,  organically growing entity, a dramatic opposite of the carefully erected aedifice of a statically typed program. </p>\n\n<p>It would seem natural to regard the dynamic languages as being a step in that direction: the consistency of the program emerges from the bottom up, with no <em>a priori</em> constrants which would impose it in a top-down manner. This paradigm can be seen as a step towards modeling  the process whereby we, the humans, become what we are through development and learning.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196801,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"comment_count":0,"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1473148352,"creation_date":1466501183,"answer_id":37940514,"question_id":20918650,"body_markdown":"&lt;sub&gt;(Although I already wrote an answer here, revisiting this question two years later I realize there is another, completely different way of answering it, so I&#39;m leaving the previous answer intact and adding this one.)&lt;/sub&gt;\r\n\r\n---\r\n\r\nIt is highly arguable whether the process done on Java Generics deserves the name &quot;type erasure&quot;. Since generic types are not erased but replaced with their raw counterparts, a better choice seems to be &quot;type mutilation&quot;.\r\n\r\nThe quintessential feature of type erasure in its commonly understood sense is forcing the runtime to stay within the boundaries of the static type system by making it &quot;blind&quot; to the structure of the data it accesses. This gives full power to the compiler and allows it to prove theorems based on static types alone. It also helps the programmer by constraining the code&#39;s degrees of freedom, giving more power to simple reasoning.\r\n\r\nJava&#39;s type erasure does not achieve that&amp;mdash;it cripples the compiler, like in this example:\r\n\r\n    void doStuff(List&lt;Integer&gt; collection) { \r\n    }\r\n\r\n    void doStuff(List&lt;String&gt; collection) // ERROR: a method cannot have \r\n                       // overloads which only differ in type parameters\r\n\r\n(The above two declarations collapse into the same method signature after erasure.)\r\n\r\nOn the flip side, the runtime can still inspect the type of an object and reason about it, but since its insight into the true type is crippled by erasure, static type violations are trivial to achieve and hard to prevent.\r\n\r\nTo make things even more convoluted, the original and erased type signatures co-exist and are considered in parallel during compilation. This is because the whole process is not about removing type information from the runtime, but about shoehorning a generic type system into a legacy raw type system to maintain backwards compatibility. This gem is a classic example:\r\n\r\n    public static &lt;T extends Object &amp; Comparable&lt;? super T&gt;&gt; T max(Collection&lt;? extends T&gt; coll)\r\n\r\n(The redundant `extends Object` had to be added to preserve backward compatibility of the erased signature.)\r\n\r\nNow, with that in mind, let us revisit the quote:\r\n\r\n&gt; It&#39;s funny when Java users complain about type erasure, which is the only thing Java got right\r\n\r\nWhat _exactly_ did Java get right? Is it the word itself, regardless of meaning? For contrast take a look at the humble `int` type: no runtime type check is ever performed, or even possible, and the execution is always perfectly type-safe. _That&#39;s_ what type erasure looks like when done right: you don&#39;t even know it&#39;s there.\r\n","title":"What are the benefits of Java&#39;s types erasure?","body":"<p><sub>(Although I already wrote an answer here, revisiting this question two years later I realize there is another, completely different way of answering it, so I'm leaving the previous answer intact and adding this one.)</sub></p>\n\n<hr>\n\n<p>It is highly arguable whether the process done on Java Generics deserves the name \"type erasure\". Since generic types are not erased but replaced with their raw counterparts, a better choice seems to be \"type mutilation\".</p>\n\n<p>The quintessential feature of type erasure in its commonly understood sense is forcing the runtime to stay within the boundaries of the static type system by making it \"blind\" to the structure of the data it accesses. This gives full power to the compiler and allows it to prove theorems based on static types alone. It also helps the programmer by constraining the code's degrees of freedom, giving more power to simple reasoning.</p>\n\n<p>Java's type erasure does not achieve that&mdash;it cripples the compiler, like in this example:</p>\n\n<pre><code>void doStuff(List&lt;Integer&gt; collection) { \n}\n\nvoid doStuff(List&lt;String&gt; collection) // ERROR: a method cannot have \n                   // overloads which only differ in type parameters\n</code></pre>\n\n<p>(The above two declarations collapse into the same method signature after erasure.)</p>\n\n<p>On the flip side, the runtime can still inspect the type of an object and reason about it, but since its insight into the true type is crippled by erasure, static type violations are trivial to achieve and hard to prevent.</p>\n\n<p>To make things even more convoluted, the original and erased type signatures co-exist and are considered in parallel during compilation. This is because the whole process is not about removing type information from the runtime, but about shoehorning a generic type system into a legacy raw type system to maintain backwards compatibility. This gem is a classic example:</p>\n\n<pre><code>public static &lt;T extends Object &amp; Comparable&lt;? super T&gt;&gt; T max(Collection&lt;? extends T&gt; coll)\n</code></pre>\n\n<p>(The redundant <code>extends Object</code> had to be added to preserve backward compatibility of the erased signature.)</p>\n\n<p>Now, with that in mind, let us revisit the quote:</p>\n\n<blockquote>\n  <p>It's funny when Java users complain about type erasure, which is the only thing Java got right</p>\n</blockquote>\n\n<p>What <em>exactly</em> did Java get right? Is it the word itself, regardless of meaning? For contrast take a look at the humble <code>int</code> type: no runtime type check is ever performed, or even possible, and the execution is always perfectly type-safe. <em>That's</em> what type erasure looks like when done right: you don't even know it's there.</p>\n"},{"tags":[],"owner":{"account_id":216151,"reputation":26327,"user_id":471213,"accept_rate":82,"display_name":"usr-local-ΕΨΗΕΛΩΝ"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1571303190,"creation_date":1478866228,"answer_id":40547750,"question_id":20918650,"body_markdown":"This is not a direct answer (OP asked &quot;what are the benefits&quot;, I am replying &quot;what are the cons&quot;)\n\nCompared to C# type system, Java type erasure is a real pain for two raesons\n\n## You can&#39;t implement an interface twice\nIn C# you can implement both `IEnumerable&lt;T1&gt;` and `IEnumerable&lt;T2&gt;` safely, especially if the two types do not share a common ancestor (i.e. their ancestor **is** `Object`).\n\nPractical example: in Spring Framework, you can&#39;t implement `ApplicationListener&lt;? extends ApplicationEvent&gt;` multiple times. If you need different behaviours based on `T` you need to test `instanceof`\n\n## You can&#39;t do new T()\n(and you need a reference to Class&lt;T&gt; to do that)\n\nAs others commented, doing the equivalent of `new T()` can only be done via reflection, only by invoking an instance of `Class&lt;T&gt;`, making sure about the parameters required by the constructor. C# allows you to do `new T()` **only** if you constrain `T` to parameterless constructor. If `T` does not respect that constraint, a **compile error** is raised.\n\nIn Java, you will often be forced to write methods that look like the following\n\n    public &lt;T&gt; T create(....params, Class&lt;T&gt; classOfT)\n    {\n    \n        ... whatever you do\n        ... you will end up\n        T = classOfT.newInstance();\n    \n    \n        ... or more advanced reflection\n        Constructor&lt;T&gt; parameterizedConstructorThatYouKnowAbout = classOfT.getConstructor(...,...);\n    }\n\n\nThe drawbacks in the above code are:\n\n- [Class.newInstance][1] only works with a parameterless constructor. If none available, `ReflectiveOperationException` is thrown at runtime\n- Reflected constructor does not highlight problems at compile time like the above. If you refactor, of you swap arguments, you will know only at runtime\n\nIf I was the author of C#, I would have introduced the ability to specify one or more constructor constraints that are easy to verify at compile time (so I can require for example a constructor with `string,string` params). But the last one is speculation\n\n\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#newInstance--","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>This is not a direct answer (OP asked &quot;what are the benefits&quot;, I am replying &quot;what are the cons&quot;)</p>\n<p>Compared to C# type system, Java type erasure is a real pain for two raesons</p>\n<h2>You can't implement an interface twice</h2>\n<p>In C# you can implement both <code>IEnumerable&lt;T1&gt;</code> and <code>IEnumerable&lt;T2&gt;</code> safely, especially if the two types do not share a common ancestor (i.e. their ancestor <strong>is</strong> <code>Object</code>).</p>\n<p>Practical example: in Spring Framework, you can't implement <code>ApplicationListener&lt;? extends ApplicationEvent&gt;</code> multiple times. If you need different behaviours based on <code>T</code> you need to test <code>instanceof</code></p>\n<h2>You can't do new T()</h2>\n<p>(and you need a reference to Class to do that)</p>\n<p>As others commented, doing the equivalent of <code>new T()</code> can only be done via reflection, only by invoking an instance of <code>Class&lt;T&gt;</code>, making sure about the parameters required by the constructor. C# allows you to do <code>new T()</code> <strong>only</strong> if you constrain <code>T</code> to parameterless constructor. If <code>T</code> does not respect that constraint, a <strong>compile error</strong> is raised.</p>\n<p>In Java, you will often be forced to write methods that look like the following</p>\n<pre><code>public &lt;T&gt; T create(....params, Class&lt;T&gt; classOfT)\n{\n\n    ... whatever you do\n    ... you will end up\n    T = classOfT.newInstance();\n\n\n    ... or more advanced reflection\n    Constructor&lt;T&gt; parameterizedConstructorThatYouKnowAbout = classOfT.getConstructor(...,...);\n}\n</code></pre>\n<p>The drawbacks in the above code are:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#newInstance--\" rel=\"nofollow noreferrer\">Class.newInstance</a> only works with a parameterless constructor. If none available, <code>ReflectiveOperationException</code> is thrown at runtime</li>\n<li>Reflected constructor does not highlight problems at compile time like the above. If you refactor, of you swap arguments, you will know only at runtime</li>\n</ul>\n<p>If I was the author of C#, I would have introduced the ability to specify one or more constructor constraints that are easy to verify at compile time (so I can require for example a constructor with <code>string,string</code> params). But the last one is speculation</p>\n"},{"tags":[],"owner":{"account_id":12555202,"reputation":1249,"user_id":9135193,"display_name":"Marvin H."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559301102,"creation_date":1559301102,"answer_id":56394008,"question_id":20918650,"body_markdown":"Most answers are more concerned about programming philosophy than the actual technical details.\r\n\r\nAnd although this question is more than 5 years old, the question still lingers: Why is type erasure desireable from a technical point of view? In the end, the answer is rather simple (on a higher level): https://en.wikipedia.org/wiki/Type_erasure\r\n\r\nC++ templates don&#39;t exist at runtime. The compiler emits a fully optimized version for each invocation, meaning the execution doesn&#39;t depend on type information. \r\nBut how does a JIT deal with different versions of the same function? Wouldn&#39;t it be better to just have one function? Wouldn&#39;t want the JIT to have to optimize all the different versions of it. Well, but then what about type safety? Guess that has to go out of the window.\r\n\r\nBut wait a second: How does .NET do it? Reflection! This way they only have to optimize one function and also get runtime type information. And that is why .NET generics used to be slower (though they have gotten much better). I am not arguing that that isn&#39;t convenient! But it is expensive and shouldn&#39;t be used when it isn&#39;t absolutely necessary (it isn&#39;t considered expensive in dynamically typed languages because the compiler / interpreter relies on reflection anyway).\r\n\r\nThis way generic programming with type erasure is close to zero overhead (some runtime checks / casts are still required): https://docs.oracle.com/javase/tutorial/java/generics/erasure.html","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>Most answers are more concerned about programming philosophy than the actual technical details.</p>\n\n<p>And although this question is more than 5 years old, the question still lingers: Why is type erasure desireable from a technical point of view? In the end, the answer is rather simple (on a higher level): <a href=\"https://en.wikipedia.org/wiki/Type_erasure\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Type_erasure</a></p>\n\n<p>C++ templates don't exist at runtime. The compiler emits a fully optimized version for each invocation, meaning the execution doesn't depend on type information. \nBut how does a JIT deal with different versions of the same function? Wouldn't it be better to just have one function? Wouldn't want the JIT to have to optimize all the different versions of it. Well, but then what about type safety? Guess that has to go out of the window.</p>\n\n<p>But wait a second: How does .NET do it? Reflection! This way they only have to optimize one function and also get runtime type information. And that is why .NET generics used to be slower (though they have gotten much better). I am not arguing that that isn't convenient! But it is expensive and shouldn't be used when it isn't absolutely necessary (it isn't considered expensive in dynamically typed languages because the compiler / interpreter relies on reflection anyway).</p>\n\n<p>This way generic programming with type erasure is close to zero overhead (some runtime checks / casts are still required): <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/erasure.html</a></p>\n"}],"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17065,"favorite_count":0,"down_vote_count":3,"up_vote_count":121,"accepted_answer_id":21843984,"answer_count":11,"score":118,"last_activity_date":1674623719,"creation_date":1388823630,"question_id":20918650,"body_markdown":"I read a [tweet][1] today that said:\r\n\r\n&gt; It&#39;s funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.\r\n\r\nThus my question is: \r\n\r\nAre there benefits from Java&#39;s type erasure? What are the technical or programming style benefits it (possibly) offers other than the JVM implementations preference for backwards compatibility and runtime performance?\r\n\r\n  [1]: https://twitter.com/dibblego/status/419232648674828288","title":"What are the benefits of Java&#39;s types erasure?","body":"<p>I read a <a href=\"https://twitter.com/dibblego/status/419232648674828288\" rel=\"noreferrer\">tweet</a> today that said:</p>\n<blockquote>\n<p>It's funny when Java users complain about type erasure, which is the only thing Java got right, while ignoring all the things it got wrong.</p>\n</blockquote>\n<p>Thus my question is:</p>\n<p>Are there benefits from Java's type erasure? What are the technical or programming style benefits it (possibly) offers other than the JVM implementations preference for backwards compatibility and runtime performance?</p>\n"},{"tags":["java","android","react-native","push-notification","firebase-cloud-messaging"],"answers":[{"tags":[],"owner":{"account_id":15023812,"reputation":533,"user_id":10844401,"display_name":"asim"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1580052212,"creation_date":1580051800,"answer_id":59919713,"question_id":59919459,"body_markdown":"    int notificationCode = (int) (Math.random() * 1000);\r\n\r\nSimply don&#39;t create a random notification id, Instead use a constant id like\r\n\r\n    int notificationCode = 5;\r\n\r\n\r\nIf you want unique notifications for each client, you can pack notificationid in your data message, from senders side (like using userid as notification id) and use that as notificationid (received from data message), new notifications from same client will automatically be replaced.","title":"Android Notifications - replace one notification with another","body":"<pre><code>int notificationCode = (int) (Math.random() * 1000);\n</code></pre>\n\n<p>Simply don't create a random notification id, Instead use a constant id like</p>\n\n<pre><code>int notificationCode = 5;\n</code></pre>\n\n<p>If you want unique notifications for each client, you can pack notificationid in your data message, from senders side (like using userid as notification id) and use that as notificationid (received from data message), new notifications from same client will automatically be replaced.</p>\n"},{"tags":[],"owner":{"account_id":8727017,"reputation":171,"user_id":6528374,"display_name":"Swapnil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674623711,"creation_date":1674214897,"answer_id":75183551,"question_id":59919459,"body_markdown":"Pass unique id to `notificationManager` then only you can see multiple notification in system tray\r\n \r\n\r\n    val idUnique = System.currentTimeMillis().toInt()\r\n    \r\n    notificationManager.notify(idUnique, builder.build())","title":"Android Notifications - replace one notification with another","body":"<p>Pass unique id to <code>notificationManager</code> then only you can see multiple notification in system tray</p>\n<pre><code>val idUnique = System.currentTimeMillis().toInt()\n\nnotificationManager.notify(idUnique, builder.build())\n</code></pre>\n"}],"owner":{"account_id":16049911,"reputation":1480,"user_id":11584105,"display_name":"Mr. Robot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1260,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59919713,"answer_count":2,"score":1,"last_activity_date":1674623711,"creation_date":1580050273,"question_id":59919459,"body_markdown":"I am building a React Native application where in some circumstances I need to replace a data only notification that has been sent from one client to another. \r\n\r\nI understand that with data only messages the client handles the notification. I have read that a notification can be replaced or cancelled if another is received with the same notification ID.\r\n\r\nHowever, what I don&#39;t understand is that it seems that the receiving client is responsible from creating the notification ID?\r\n\r\nThis is the java code that handles the incoming firebase cloud message:\r\n\r\n```java\r\n@ReactMethod\r\n    void navigateToExample(String notificationMessage) {\r\n        ReactApplicationContext context = getReactApplicationContext();\r\n\r\n        NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        NotificationCompat.Builder builder;\r\n\r\n        Resources res = context.getResources();\r\n\r\n        // начиная с Android 8, требуются каналы уведомлений\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n\r\n            String CHANNEL_ID = &quot;channel_ID_0&quot;;\r\n\r\n            // https://developer.android.com/training/notify-user/channels\r\n            // https://medium.com/exploring-android/exploring-android-o-notification-channels-94cd274f604c\r\n            // https://startandroid.ru/ru/uroki/vse-uroki-spiskom/515-urok-190-notifications-kanaly.html\r\n            // https://code.tutsplus.com/ru/tutorials/android-o-how-to-use-notification-channels--cms-28616\r\n\r\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, &quot;channel&quot;,\r\n                    NotificationManager.IMPORTANCE_HIGH);\r\n            channel.setDescription(&quot;channel description&quot;);\r\n            manager.createNotificationChannel(channel);\r\n\r\n            builder = new NotificationCompat.Builder(context, CHANNEL_ID);\r\n        } else {\r\n            builder = new NotificationCompat.Builder(context);\r\n        }\r\n\r\n        // Flag indicating that if the described PendingIntent already exists, the\r\n        // current one should be canceled before generating a new one.\r\n        Intent activityIntent = new Intent(context, MainActivity.class);\r\n        activityIntent.putExtra(&quot;FromNotification&quot;, true);\r\n        PendingIntent action = PendingIntent.getActivity(context, 0, activityIntent, PendingIntent.FLAG_CANCEL_CURRENT);\r\n\r\n        // make this notification automatically dismissed when the use touches it\r\n        builder.setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.ic_announcement_black_24dp))\r\n                .setSmallIcon(R.drawable.ic_announcement_black_24dp).setTicker(&quot;Large text!&quot;).setAutoCancel(true)\r\n                .setContentTitle(notificationMessage).setPriority(NotificationCompat.PRIORITY_HIGH)\r\n                .setCategory(NotificationCompat.CATEGORY_CALL).setContentText(&quot;Tap to answer or reject the call&quot;)\r\n                .setFullScreenIntent(action, true);\r\n\r\n        Notification notification = builder.build();\r\n\r\n        int notificationCode = (int) (Math.random() * 1000);\r\n        manager.notify(notificationCode, notification);\r\n    }\r\n}\r\n```\r\nOnce the notification has been created, how can I know the notification ID in the sending client such that I can replace the existing one?\r\n\r\nHere is my code that sends notifications:\r\n\r\n```javascript\r\nexport const subscribeToPushNotifications = async () =&gt; {\r\n\r\n  const fcmToken = await firebase.messaging().getToken();\r\n  console.log(fcmToken);\r\n\r\n  if (fcmToken) {\r\n    // user has a device token\r\n    const params = {\r\n      notification_channels: Platform.OS === &#39;ios&#39; ? &#39;apns&#39; : &#39;gcm&#39;,\r\n      device: {\r\n        platform: Platform.OS,\r\n        udid: DeviceInfo.getUniqueId(),\r\n      },\r\n      push_token: {\r\n        environment: &#39;production&#39;,\r\n        client_identification_sequence: fcmToken,\r\n      }\r\n    }\r\n\r\n    ConnectyCube.pushnotifications.subscriptions.create(params, function (error, result) {\r\n      // console.log(error); // errors: [&quot;Token is required&quot;]\r\n      // console.log(result);\r\n    });\r\n\r\n    receiveFCMs();\r\n\r\n  } else {\r\n    // user doesn&#39;t have a device token yet\r\n  }\r\n}\r\n\r\nexport const sendNotification = async (calleeId, callLength, tagUUID) =&gt; {\r\n\r\n  const callersUserName = await getUserNameFromStorage();\r\n\r\n  const payload = JSON.stringify({\r\n    message: callersUserName + &#39;-&#39; + callLength,\r\n    tag: tagUUID,\r\n  });\r\n\r\n  const pushParameters = {\r\n    notification_type: &#39;push&#39;,\r\n    user: { ids: [calleeId] }, // recipients.\r\n    environment: &#39;production&#39;, // environment, can be &#39;production&#39;.\r\n    message: ConnectyCube.pushnotifications.base64Encode(payload)\r\n  };\r\n\r\n  ConnectyCube.pushnotifications.events.create(pushParameters, function (error, result) {\r\n  });\r\n}\r\n```\r\nAs you can see, my understanding of exactly how this works, any help much appreciated!","title":"Android Notifications - replace one notification with another","body":"<p>I am building a React Native application where in some circumstances I need to replace a data only notification that has been sent from one client to another. </p>\n\n<p>I understand that with data only messages the client handles the notification. I have read that a notification can be replaced or cancelled if another is received with the same notification ID.</p>\n\n<p>However, what I don't understand is that it seems that the receiving client is responsible from creating the notification ID?</p>\n\n<p>This is the java code that handles the incoming firebase cloud message:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ReactMethod\n    void navigateToExample(String notificationMessage) {\n        ReactApplicationContext context = getReactApplicationContext();\n\n        NotificationManager manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n        NotificationCompat.Builder builder;\n\n        Resources res = context.getResources();\n\n        // начиная с Android 8, требуются каналы уведомлений\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n\n            String CHANNEL_ID = \"channel_ID_0\";\n\n            // https://developer.android.com/training/notify-user/channels\n            // https://medium.com/exploring-android/exploring-android-o-notification-channels-94cd274f604c\n            // https://startandroid.ru/ru/uroki/vse-uroki-spiskom/515-urok-190-notifications-kanaly.html\n            // https://code.tutsplus.com/ru/tutorials/android-o-how-to-use-notification-channels--cms-28616\n\n            NotificationChannel channel = new NotificationChannel(CHANNEL_ID, \"channel\",\n                    NotificationManager.IMPORTANCE_HIGH);\n            channel.setDescription(\"channel description\");\n            manager.createNotificationChannel(channel);\n\n            builder = new NotificationCompat.Builder(context, CHANNEL_ID);\n        } else {\n            builder = new NotificationCompat.Builder(context);\n        }\n\n        // Flag indicating that if the described PendingIntent already exists, the\n        // current one should be canceled before generating a new one.\n        Intent activityIntent = new Intent(context, MainActivity.class);\n        activityIntent.putExtra(\"FromNotification\", true);\n        PendingIntent action = PendingIntent.getActivity(context, 0, activityIntent, PendingIntent.FLAG_CANCEL_CURRENT);\n\n        // make this notification automatically dismissed when the use touches it\n        builder.setLargeIcon(BitmapFactory.decodeResource(res, R.drawable.ic_announcement_black_24dp))\n                .setSmallIcon(R.drawable.ic_announcement_black_24dp).setTicker(\"Large text!\").setAutoCancel(true)\n                .setContentTitle(notificationMessage).setPriority(NotificationCompat.PRIORITY_HIGH)\n                .setCategory(NotificationCompat.CATEGORY_CALL).setContentText(\"Tap to answer or reject the call\")\n                .setFullScreenIntent(action, true);\n\n        Notification notification = builder.build();\n\n        int notificationCode = (int) (Math.random() * 1000);\n        manager.notify(notificationCode, notification);\n    }\n}\n</code></pre>\n\n<p>Once the notification has been created, how can I know the notification ID in the sending client such that I can replace the existing one?</p>\n\n<p>Here is my code that sends notifications:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const subscribeToPushNotifications = async () =&gt; {\n\n  const fcmToken = await firebase.messaging().getToken();\n  console.log(fcmToken);\n\n  if (fcmToken) {\n    // user has a device token\n    const params = {\n      notification_channels: Platform.OS === 'ios' ? 'apns' : 'gcm',\n      device: {\n        platform: Platform.OS,\n        udid: DeviceInfo.getUniqueId(),\n      },\n      push_token: {\n        environment: 'production',\n        client_identification_sequence: fcmToken,\n      }\n    }\n\n    ConnectyCube.pushnotifications.subscriptions.create(params, function (error, result) {\n      // console.log(error); // errors: [\"Token is required\"]\n      // console.log(result);\n    });\n\n    receiveFCMs();\n\n  } else {\n    // user doesn't have a device token yet\n  }\n}\n\nexport const sendNotification = async (calleeId, callLength, tagUUID) =&gt; {\n\n  const callersUserName = await getUserNameFromStorage();\n\n  const payload = JSON.stringify({\n    message: callersUserName + '-' + callLength,\n    tag: tagUUID,\n  });\n\n  const pushParameters = {\n    notification_type: 'push',\n    user: { ids: [calleeId] }, // recipients.\n    environment: 'production', // environment, can be 'production'.\n    message: ConnectyCube.pushnotifications.base64Encode(payload)\n  };\n\n  ConnectyCube.pushnotifications.events.create(pushParameters, function (error, result) {\n  });\n}\n</code></pre>\n\n<p>As you can see, my understanding of exactly how this works, any help much appreciated!</p>\n"},{"tags":["java","spring-mvc","hibernate3","tomcat10"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1674620649,"post_id":75229606,"comment_id":132751403,"body_markdown":"[Please do not upload images of code/data/errors when asking a question.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors when asking a question.</a>"}],"answers":[{"comments":[{"owner":{"account_id":27577537,"reputation":25,"user_id":21047387,"display_name":"Tomatopedas"},"score":0,"creation_date":1674621781,"post_id":75229670,"comment_id":132751524,"body_markdown":"How about the Hibernate version? Do I have to upgrade the version which compatible with Spring 6.0?","body":"How about the Hibernate version? Do I have to upgrade the version which compatible with Spring 6.0?"},{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":1,"creation_date":1674625290,"post_id":75229670,"comment_id":132752011,"body_markdown":"Yes. You must upgrade Hibernate to 6.1 https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga","body":"Yes. You must upgrade Hibernate to 6.1 <a href=\"https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga\" rel=\"nofollow noreferrer\">spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga</a>"}],"tags":[],"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674620624,"creation_date":1674620624,"answer_id":75229670,"question_id":75229606,"body_markdown":"Tomcat 10.1 uses [Servlet API 6.0][1] which is now part of Jakarta EE. As part of the move from Java EE to Jakarta EE, the packages in `javax.servlet.*` are moved to `jakarta.servlet.*` since the error you are getting.\r\n\r\nIf your target platform is Tomcat 10.1, you should move to Spring Framework 6.\r\n\r\nCheck the [migration guide][2]\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-10.0-doc/servletapi/index.html\r\n  [2]: https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#web-applications","title":"How to identify which version spring framework to use when upgrading java 1.7 webapp to openjdk 19?","body":"<p>Tomcat 10.1 uses <a href=\"https://tomcat.apache.org/tomcat-10.0-doc/servletapi/index.html\" rel=\"nofollow noreferrer\">Servlet API 6.0</a> which is now part of Jakarta EE. As part of the move from Java EE to Jakarta EE, the packages in <code>javax.servlet.*</code> are moved to <code>jakarta.servlet.*</code> since the error you are getting.</p>\n<p>If your target platform is Tomcat 10.1, you should move to Spring Framework 6.</p>\n<p>Check the <a href=\"https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#web-applications\" rel=\"nofollow noreferrer\">migration guide</a></p>\n"}],"owner":{"account_id":27577537,"reputation":25,"user_id":21047387,"display_name":"Tomatopedas"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75229670,"answer_count":1,"score":1,"last_activity_date":1674621413,"creation_date":1674619755,"question_id":75229606,"body_markdown":"Few years back, I develop a web application using Java 1.7, SpringFramework 4.1.1.RELEASE and Hibernate 3.6.10.Final. This webapp is running on Tomcat 7.0.4 at the time.\r\n\r\nNow, I planning to upgrade and compile everything using OpenJDK 19, and Tomcat 10.1.\r\nHow do I know which version to use in my pom.xml (Maven) so that theres no error after compilation and during runtime.\r\n\r\nWHat should I do first?\r\n\r\nUsing the latest Eclipse and I have downloaded both Tomcat 10.1 and OpenJDK 19.\r\nI&#39;ve set the Java Compiler to openJDK 19 and added both JRE System Library and Server Runtime in the build path.\r\nI have also added some more jar file to fix issues in Marker tab but I encountered error during starting up application.\r\n","title":"How to identify which version spring framework to use when upgrading java 1.7 webapp to openjdk 19?","body":"<p>Few years back, I develop a web application using Java 1.7, SpringFramework 4.1.1.RELEASE and Hibernate 3.6.10.Final. This webapp is running on Tomcat 7.0.4 at the time.</p>\n<p>Now, I planning to upgrade and compile everything using OpenJDK 19, and Tomcat 10.1.\nHow do I know which version to use in my pom.xml (Maven) so that theres no error after compilation and during runtime.</p>\n<p>WHat should I do first?</p>\n<p>Using the latest Eclipse and I have downloaded both Tomcat 10.1 and OpenJDK 19.\nI've set the Java Compiler to openJDK 19 and added both JRE System Library and Server Runtime in the build path.\nI have also added some more jar file to fix issues in Marker tab but I encountered error during starting up application.</p>\n"},{"tags":["java","api","rest","post","request"],"answers":[{"tags":[],"owner":{"account_id":14320238,"reputation":64,"user_id":10343860,"display_name":"akaras"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674135477,"creation_date":1674135477,"answer_id":75173109,"question_id":75170428,"body_markdown":"You could try to use `@RequestBody String queryParams` instead of `@RequestBody HashMap&lt;String, String&gt; queryParams`.\r\n\r\nThen you could try to look at eg. the [Jackson][1] library, which would help you to parse JSON as you want.\r\n\r\nYou probably could use code like presented below.\r\n\r\n```java\r\nObjectMapper mapper = new ObjectMapper();\r\nJsonNode node = mapper.valueToTree(queryParams);\r\n```\r\n\r\nThen you could manipulate on JsonNode by using methods mentioned eg. in this [article][2].\r\n\r\nSo adding a new JSON node should not be a problem.\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson\r\n  [2]: https://www.baeldung.com/jackson-json-node-tree-model#manipulating","title":"How to handle dynamic request body without creating request class?","body":"<p>You could try to use <code>@RequestBody String queryParams</code> instead of <code>@RequestBody HashMap&lt;String, String&gt; queryParams</code>.</p>\n<p>Then you could try to look at eg. the <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a> library, which would help you to parse JSON as you want.</p>\n<p>You probably could use code like presented below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper mapper = new ObjectMapper();\nJsonNode node = mapper.valueToTree(queryParams);\n</code></pre>\n<p>Then you could manipulate on JsonNode by using methods mentioned eg. in this <a href=\"https://www.baeldung.com/jackson-json-node-tree-model#manipulating\" rel=\"nofollow noreferrer\">article</a>.</p>\n<p>So adding a new JSON node should not be a problem.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674726276,"post_id":75229683,"comment_id":132776749,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75229683/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":24143111,"reputation":77,"user_id":18109095,"display_name":"Anamika"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674620847,"creation_date":1674620847,"answer_id":75229683,"question_id":75170428,"body_markdown":"I changed RequestBody from HashMap&lt;String, String&gt; to HashMap&lt;String, Object&gt; and it worked.","title":"How to handle dynamic request body without creating request class?","body":"<p>I changed RequestBody from HashMap&lt;String, String&gt; to HashMap&lt;String, Object&gt; and it worked.</p>\n"}],"owner":{"account_id":24143111,"reputation":77,"user_id":18109095,"display_name":"Anamika"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75229683,"answer_count":2,"score":0,"last_activity_date":1674620847,"creation_date":1674122074,"question_id":75170428,"body_markdown":"I have an api endpoint with request body like this. \r\n```\r\n{\r\n   &quot;employeeId&quot; : &quot;1234&quot;,\r\n   &quot;empName&quot; : &quot;John&quot;\r\n}\r\n```\r\nThe fields are dynamic. So instead of creating a request class I am passing request body as HashMap&lt;String, String&gt; as below.\r\n```\r\n@PostMapping\r\npublic ResponseEntity&lt;EmployeeResponse&gt; getEmployees(@RequestBody HashMap&lt;String, String&gt; queryParams){\r\n\r\n}\r\n```\r\nNow my requirement is to add something like this in the request body along with other dynamic fields.\r\n```\r\n{\r\n  &quot;empAwardsReceived&quot; : [&quot;On the spot award&quot;, &quot;Best employee award&quot;]\r\n}\r\n```\r\n\r\nHow can we handle this?\r\nCan someone please help?","title":"How to handle dynamic request body without creating request class?","body":"<p>I have an api endpoint with request body like this.</p>\n<pre><code>{\n   &quot;employeeId&quot; : &quot;1234&quot;,\n   &quot;empName&quot; : &quot;John&quot;\n}\n</code></pre>\n<p>The fields are dynamic. So instead of creating a request class I am passing request body as HashMap&lt;String, String&gt; as below.</p>\n<pre><code>@PostMapping\npublic ResponseEntity&lt;EmployeeResponse&gt; getEmployees(@RequestBody HashMap&lt;String, String&gt; queryParams){\n\n}\n</code></pre>\n<p>Now my requirement is to add something like this in the request body along with other dynamic fields.</p>\n<pre><code>{\n  &quot;empAwardsReceived&quot; : [&quot;On the spot award&quot;, &quot;Best employee award&quot;]\n}\n</code></pre>\n<p>How can we handle this?\nCan someone please help?</p>\n"},{"tags":["java","xml","xml-parsing","jaxb","xjc"],"owner":{"account_id":6751193,"reputation":1,"user_id":6670023,"display_name":"M P Lewandowski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674620574,"creation_date":1674620517,"question_id":75229664,"body_markdown":"I&#39;m using `jaxb2-maven-plugin` version `3.1.0` to generate models from an .xsd schema file. I created an object called `BookContext` that has the following declaration:\r\n\r\n```\r\npackage com.xmltesting;\r\n\r\nimport jakarta.xml.bind.annotation.XmlAccessType;\r\nimport jakarta.xml.bind.annotation.XmlAccessorType;\r\nimport jakarta.xml.bind.annotation.XmlElement;\r\nimport jakarta.xml.bind.annotation.XmlTransient;\r\nimport jakarta.xml.bind.annotation.XmlType;\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class BookContext {\r\n    @XmlElement(name = &quot;LibraryName&quot;)\r\n    protected String libraryName;\r\n    @XmlElement(name = &quot;LibraryAddress&quot;)\r\n    protected String libraryAddress;\r\n\r\n    public String getLibraryName() {\r\n        return libraryName;\r\n    }\r\n\r\n    public void setLibraryName(String value) {\r\n        this.libraryName = value;\r\n    }\r\n\r\n    public void setLibraryAddress(String value) {\r\n        this.libraryAddress = value;\r\n    }\r\n\r\n    public String getLibraryAddress() {\r\n        return libraryAddress;\r\n    }\r\n}\r\n```\r\n\r\n**Now without modifying the .xsd file**, I would like to insert the BookContext object as an XmlTransient field into all the generated models coming out of the plugin. Is this in any way possible using bindings/annotations?\r\n\r\nThe BookContext object value would be set by a Listener during the unmarshalling process, the only problem I&#39;m having is adding the field to all of the generated models dynamically.\r\n\r\nI tried creating bindings:\r\n```\r\n&lt;jaxb:bindings version=&quot;3.0&quot;\r\n               xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\r\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\r\n               xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n\r\n    &lt;jaxb:bindings schemaLocation=&quot;book_schema.xsd&quot;&gt;\r\n        &lt;jaxb:bindings node=&quot;//xs:element[@name=&#39;Book&#39;]&quot;&gt;\r\n            &lt;jaxb:class name=&quot;BookContext&quot;/&gt;\r\n        &lt;/jaxb:bindings&gt;\r\n    &lt;/jaxb:bindings&gt;\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nI also tried annotation flag but this Jakarta version of maven plugin didn&#39;t seem to support it.","title":"JAXB XJC - Dynamically adding fields to generated models from .xsd","body":"<p>I'm using <code>jaxb2-maven-plugin</code> version <code>3.1.0</code> to generate models from an .xsd schema file. I created an object called <code>BookContext</code> that has the following declaration:</p>\n<pre><code>package com.xmltesting;\n\nimport jakarta.xml.bind.annotation.XmlAccessType;\nimport jakarta.xml.bind.annotation.XmlAccessorType;\nimport jakarta.xml.bind.annotation.XmlElement;\nimport jakarta.xml.bind.annotation.XmlTransient;\nimport jakarta.xml.bind.annotation.XmlType;\n\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class BookContext {\n    @XmlElement(name = &quot;LibraryName&quot;)\n    protected String libraryName;\n    @XmlElement(name = &quot;LibraryAddress&quot;)\n    protected String libraryAddress;\n\n    public String getLibraryName() {\n        return libraryName;\n    }\n\n    public void setLibraryName(String value) {\n        this.libraryName = value;\n    }\n\n    public void setLibraryAddress(String value) {\n        this.libraryAddress = value;\n    }\n\n    public String getLibraryAddress() {\n        return libraryAddress;\n    }\n}\n</code></pre>\n<p><strong>Now without modifying the .xsd file</strong>, I would like to insert the BookContext object as an XmlTransient field into all the generated models coming out of the plugin. Is this in any way possible using bindings/annotations?</p>\n<p>The BookContext object value would be set by a Listener during the unmarshalling process, the only problem I'm having is adding the field to all of the generated models dynamically.</p>\n<p>I tried creating bindings:</p>\n<pre><code>&lt;jaxb:bindings version=&quot;3.0&quot;\n               xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\n               xmlns:xjc=&quot;http://java.sun.com/xml/ns/jaxb/xjc&quot;\n               xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n    &lt;jaxb:bindings schemaLocation=&quot;book_schema.xsd&quot;&gt;\n        &lt;jaxb:bindings node=&quot;//xs:element[@name='Book']&quot;&gt;\n            &lt;jaxb:class name=&quot;BookContext&quot;/&gt;\n        &lt;/jaxb:bindings&gt;\n    &lt;/jaxb:bindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>I also tried annotation flag but this Jakarta version of maven plugin didn't seem to support it.</p>\n"},{"tags":["java","android","vpn","android-vpn-service"],"owner":{"account_id":24372488,"reputation":11,"user_id":18305240,"display_name":"Sai Gopal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674619930,"creation_date":1674619930,"question_id":75229620,"body_markdown":"Some phones like &quot;OnePlus&quot; are providing customised VPN dialog which has &#39;Don&#39;t ask again&#39; checkbox even for the VPN dialog. Generally I would have followed the process of, if it&#39;s a run-time permission, with **shouldShowRequestPermissionRationale()**. But as far as I understood, this isn&#39;t a run-time permission but just a dialog prompt maintained by &#39;*System*&#39;. So is there any way that I&#39;ll know that user has checked that option. Any solution that can solve my issue is appreciated.\r\n\r\nImplemented a VPN service. \r\nMy app need to connect to VPN in-order to access a feature.\r\nBut some phones like &#39;OnePlus&#39; has customised VPN dialog with &#39;Don&#39;t ask again&#39; checkbox.\r\nI&#39;m expecting a solution to know if user checked that option.","title":"How do I know if user checked &#39;Don&#39;t ask again&#39; checkbox in VPN dialog while connecting to a VPN","body":"<p>Some phones like &quot;OnePlus&quot; are providing customised VPN dialog which has 'Don't ask again' checkbox even for the VPN dialog. Generally I would have followed the process of, if it's a run-time permission, with <strong>shouldShowRequestPermissionRationale()</strong>. But as far as I understood, this isn't a run-time permission but just a dialog prompt maintained by '<em>System</em>'. So is there any way that I'll know that user has checked that option. Any solution that can solve my issue is appreciated.</p>\n<p>Implemented a VPN service.\nMy app need to connect to VPN in-order to access a feature.\nBut some phones like 'OnePlus' has customised VPN dialog with 'Don't ask again' checkbox.\nI'm expecting a solution to know if user checked that option.</p>\n"},{"tags":["java","selenium","selenium-webdriver","drag-and-drop","selenium-java"],"answers":[{"comments":[{"owner":{"account_id":23260586,"reputation":33,"user_id":17346899,"display_name":"user17346899"},"score":1,"creation_date":1674361814,"post_id":75197395,"comment_id":132696926,"body_markdown":"Thank you so much. It has helped solved my problem. I see that i didn&#39;t use the switch to frame option. Below is the code that i have used. Just posting it so that any novice person might find it useful. BTW, this was my first question in stackoverflow ever. I was apprehensive if anyone would ever respond. Very very thankful that you responded so quickly and that too with a solution.. :)","body":"Thank you so much. It has helped solved my problem. I see that i didn&#39;t use the switch to frame option. Below is the code that i have used. Just posting it so that any novice person might find it useful. BTW, this was my first question in stackoverflow ever. I was apprehensive if anyone would ever respond. Very very thankful that you responded so quickly and that too with a solution.. :)"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674344846,"creation_date":1674344846,"answer_id":75197395,"question_id":75195035,"body_markdown":"The desired elements are within a [_**iframe**_](https://stackoverflow.com/a/53276478/7429447) so you have to:\r\n\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the desired _frameToBeAvailableAndSwitchToIt_.\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/50621712/7429447) for the desired _elementToBeClickable_.\r\n- You can use the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n\t  driver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\r\n\t  WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\r\n\t  wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.cssSelector(&quot;iframe[src*=&#39;//dhtmlxcode.com&#39;]&quot;)));\r\n\t  WebElement books = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@class=&#39;dhx_tree-label&#39; and text()=&#39;All Books&#39;]&quot;)));\r\n\t  JavascriptExecutor js = (JavascriptExecutor)driver;\r\n\t  js.executeScript(&quot;return arguments[0].scrollIntoView(true)&quot;, books);\r\n\t  WebElement dragMe = wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class=&#39;dhx_tree-list-item__text&#39; and text()=&#39;Nancy Atherton&#39;]&quot;)));\r\n\t  WebElement dropHere = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;div#treeTarget&gt;ul&quot;)));\r\n\t  Actions actions = new Actions(driver);\r\n\t  actions.dragAndDrop(dragMe, dropHere).build().perform();","title":"Issue with Drag and Drop command using Actions class in Selenium WebDriver using Java","body":"<p>The desired elements are within a <a href=\"https://stackoverflow.com/a/53276478/7429447\"><em><strong>iframe</strong></em></a> so you have to:</p>\n<ul>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the desired <em>frameToBeAvailableAndSwitchToIt</em>.</p>\n</li>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/50621712/7429447\">WebDriverWait</a> for the desired <em>elementToBeClickable</em>.</p>\n</li>\n<li><p>You can use the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<pre><code>driver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\nWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));\nwait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.cssSelector(&quot;iframe[src*='//dhtmlxcode.com']&quot;)));\nWebElement books = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@class='dhx_tree-label' and text()='All Books']&quot;)));\nJavascriptExecutor js = (JavascriptExecutor)driver;\njs.executeScript(&quot;return arguments[0].scrollIntoView(true)&quot;, books);\nWebElement dragMe = wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//span[@class='dhx_tree-list-item__text' and text()='Nancy Atherton']&quot;)));\nWebElement dropHere = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;div#treeTarget&gt;ul&quot;)));\nActions actions = new Actions(driver);\nactions.dragAndDrop(dragMe, dropHere).build().perform();\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23260586,"reputation":33,"user_id":17346899,"display_name":"user17346899"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674619826,"creation_date":1674361975,"answer_id":75198180,"question_id":75195035,"body_markdown":"```\r\npublic class DragDrop {\r\n\t\r\n\tWebDriver driver;\r\n\t\r\n\t@Test(description=&quot;This is drag and drop scenario..&quot;)\r\n\tpublic void dragdrop() throws InterruptedException {\r\n\t\t\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./Drivers/chromedriver.exe&quot;);\r\n\t\tdriver = new ChromeDriver();\r\n\t\t\r\n\t\tdriver.manage().window().maximize();\r\n\t\t\r\n\t\tdriver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\r\n\t\t\r\n\t\tJavascriptExecutor js = (JavascriptExecutor)driver;\r\n\t\tjs.executeScript(&quot;scroll(0,500)&quot;);\r\n\t\t\r\nWebElement frame_ele = driver.findElement(By.cssSelector(&quot;iframe[src*=&#39;//dhtmlxcode.com&#39;]&quot;));\r\n\t\t\r\n\t\tdriver.switchTo().frame(frame_ele);\r\n\t\t\t\t\r\n\t\tWebElement allBooks = driver.findElement(By.xpath(&quot;//span[text()=&#39;Nancy Atherton&#39;]&quot;));\t\t\r\n\t\t\r\n\t\tWebElement myLib = driver.findElement(By.xpath(&quot;//ul[@role=&#39;listbox&#39;]&quot;));\r\n\t\t\r\n\t\tActions act = new Actions(driver);\r\n\t\tact.dragAndDrop(allBooks, myLib).perform();\r\n\t\tThread.sleep(3000);\r\n\t\tdriver.quit();\r\n\t}\r\n}\r\n```","title":"Issue with Drag and Drop command using Actions class in Selenium WebDriver using Java","body":"<pre><code>public class DragDrop {\n    \n    WebDriver driver;\n    \n    @Test(description=&quot;This is drag and drop scenario..&quot;)\n    public void dragdrop() throws InterruptedException {\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./Drivers/chromedriver.exe&quot;);\n        driver = new ChromeDriver();\n        \n        driver.manage().window().maximize();\n        \n        driver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\n        \n        JavascriptExecutor js = (JavascriptExecutor)driver;\n        js.executeScript(&quot;scroll(0,500)&quot;);\n        \nWebElement frame_ele = driver.findElement(By.cssSelector(&quot;iframe[src*='//dhtmlxcode.com']&quot;));\n        \n        driver.switchTo().frame(frame_ele);\n                \n        WebElement allBooks = driver.findElement(By.xpath(&quot;//span[text()='Nancy Atherton']&quot;));      \n        \n        WebElement myLib = driver.findElement(By.xpath(&quot;//ul[@role='listbox']&quot;));\n        \n        Actions act = new Actions(driver);\n        act.dragAndDrop(allBooks, myLib).perform();\n        Thread.sleep(3000);\n        driver.quit();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23260586,"reputation":33,"user_id":17346899,"display_name":"user17346899"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75197395,"answer_count":2,"score":1,"last_activity_date":1674619826,"creation_date":1674320139,"question_id":75195035,"body_markdown":"Code trials:\r\n```\r\nimport java.util.List;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.JavascriptExecutor;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.interactions.Actions;\r\nimport org.testng.annotations.Test;\r\n\r\npublic class DragDrop {\r\n\t\r\nWebDriver driver;\r\n\t\r\n@Test\r\npublic void dragdrop() throws InterruptedException {\r\n\t\t\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./Drivers/chromedriver.exe&quot;);\r\n    driver = new ChromeDriver();\r\n    driver.manage().window().maximize();\r\n    driver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\r\n    //Bring the element to focus\t\t\t\t\r\n    JavascriptExecutor js = (JavascriptExecutor)driver;\r\n    js.executeScript(&quot;scroll(0,600)&quot;);\t\t\r\n    Actions act = new Actions(driver);\r\n    Thread.sleep(5000);\r\n    //driver.findElement(By.xpath(&quot;//span[text()=&#39;Nancy Atherton&#39;]//parent::div//parent::li&quot;));\r\n    //The below web element is where the issue is and unable to locate the web element\t\t\r\n    WebElement allBooks = driver.findElement(By.xpath(&quot;//span[text()=&#39;Nancy Atherton&#39;]&quot;));\t\t\r\n    WebElement myLib = driver.findElement(By.xpath(&quot;//ul[@role=&#39;listbox&#39;]&quot;));\r\n    act.dragAndDrop(allBooks, myLib).perform();\t\t\r\n   }\r\n}\r\n```\r\nError Message:\r\n```\r\nFAILED: dragdrop\r\norg.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//span[text()=&#39;Nancy Atherton&#39;]&quot;}\r\n  (Session info: chrome=109.0.5414.75)\r\nFor documentation on this error, please visit: https://selenium.dev/exceptions/#no_such_element\r\n```\r\nI am unable to locate the element even after trying different locators like xpath, css, etc. \r\nI have also noticed that there are iframes tag present up the hierarchy. I even tried by identifying and moving to that particular iframe and then locating the element but it didn&#39;t help. \r\n\r\nI would really appreciate if anyone can take a look at the program and tell where am i going wrong?","title":"Issue with Drag and Drop command using Actions class in Selenium WebDriver using Java","body":"<p>Code trials:</p>\n<pre><code>import java.util.List;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.JavascriptExecutor;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.interactions.Actions;\nimport org.testng.annotations.Test;\n\npublic class DragDrop {\n    \nWebDriver driver;\n    \n@Test\npublic void dragdrop() throws InterruptedException {\n        \n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;./Drivers/chromedriver.exe&quot;);\n    driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://dhtmlx.com/docs/products/dhtmlxTree/&quot;);\n    //Bring the element to focus                \n    JavascriptExecutor js = (JavascriptExecutor)driver;\n    js.executeScript(&quot;scroll(0,600)&quot;);      \n    Actions act = new Actions(driver);\n    Thread.sleep(5000);\n    //driver.findElement(By.xpath(&quot;//span[text()='Nancy Atherton']//parent::div//parent::li&quot;));\n    //The below web element is where the issue is and unable to locate the web element      \n    WebElement allBooks = driver.findElement(By.xpath(&quot;//span[text()='Nancy Atherton']&quot;));      \n    WebElement myLib = driver.findElement(By.xpath(&quot;//ul[@role='listbox']&quot;));\n    act.dragAndDrop(allBooks, myLib).perform();     \n   }\n}\n</code></pre>\n<p>Error Message:</p>\n<pre><code>FAILED: dragdrop\norg.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//span[text()='Nancy Atherton']&quot;}\n  (Session info: chrome=109.0.5414.75)\nFor documentation on this error, please visit: https://selenium.dev/exceptions/#no_such_element\n</code></pre>\n<p>I am unable to locate the element even after trying different locators like xpath, css, etc.\nI have also noticed that there are iframes tag present up the hierarchy. I even tried by identifying and moving to that particular iframe and then locating the element but it didn't help.</p>\n<p>I would really appreciate if anyone can take a look at the program and tell where am i going wrong?</p>\n"},{"tags":["java","arraylist","hashmap"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1673871304,"post_id":75134019,"comment_id":132586823,"body_markdown":"Why do you want to do this in streams? I think you&#39;d do better keeping a running sum in a traditional loop.","body":"Why do you want to do this in streams? I think you&#39;d do better keeping a running sum in a traditional loop."},{"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"score":0,"creation_date":1673871895,"post_id":75134019,"comment_id":132587002,"body_markdown":"you need to understand that there are 2 types of operations on streams: intermediate and terminal, and also that streams are lazy. `map` is intermediate operation and without calling a terminal operation on the stream it will not be executed. that is the primary reason why you have no luck so far with the code you posted","body":"you need to understand that there are 2 types of operations on streams: intermediate and terminal, and also that streams are lazy. <code>map</code> is intermediate operation and without calling a terminal operation on the stream it will not be executed. that is the primary reason why you have no luck so far with the code you posted"}],"answers":[{"tags":[],"owner":{"account_id":5823420,"reputation":785,"user_id":6656833,"display_name":"Pavel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1673872384,"creation_date":1673872384,"answer_id":75134285,"question_id":75134019,"body_markdown":"you can start with something like this:\r\n```java\r\n        Map&lt;String, String&gt; responseMap = requestList.stream().map(requestedItem -&gt; {\r\n            int quantity = productInDbMap.get(requestedItem.getProductId());\r\n\r\n            if (quantity &gt;= requestedItem.getRequestedQuantity()) {\r\n                return new AbstractMap.SimpleEntry&lt;&gt;(requestedItem.getProductId(), &quot;order-able&quot;);\r\n            } else {\r\n                int availableQuantity = quantity - requestedItem.getRequestedQuantity();\r\n                String s = String.valueOf(availableQuantity);\r\n                return new AbstractMap.SimpleEntry&lt;&gt;(requestedItem.getProductId(), s);\r\n            }\r\n        }).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n```\r\nIn general, never modify anything from inside the stream or lambdas in general. The compiler will allow it in this case (and will complain in case of modifying a variable), but it&#39;s always a bad practice and unsafe.","title":"Stream API - need to iterate over the List and compare with Map. Write result in different Map","body":"<p>you can start with something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Map&lt;String, String&gt; responseMap = requestList.stream().map(requestedItem -&gt; {\n            int quantity = productInDbMap.get(requestedItem.getProductId());\n\n            if (quantity &gt;= requestedItem.getRequestedQuantity()) {\n                return new AbstractMap.SimpleEntry&lt;&gt;(requestedItem.getProductId(), &quot;order-able&quot;);\n            } else {\n                int availableQuantity = quantity - requestedItem.getRequestedQuantity();\n                String s = String.valueOf(availableQuantity);\n                return new AbstractMap.SimpleEntry&lt;&gt;(requestedItem.getProductId(), s);\n            }\n        }).collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n</code></pre>\n<p>In general, never modify anything from inside the stream or lambdas in general. The compiler will allow it in this case (and will complain in case of modifying a variable), but it's always a bad practice and unsafe.</p>\n"},{"tags":[],"owner":{"account_id":10465568,"reputation":840,"user_id":7715095,"display_name":"xyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673872703,"creation_date":1673872703,"answer_id":75134343,"question_id":75134019,"body_markdown":"You can directly collect to map:\r\n```java\r\nMap&lt;String,String&gt; responseMap = requestList.stream()\r\n            .collect(Collectors.toMap(ProductInStockRequest::getProductId, requestedItem -&gt;  {\r\n            int quantity = productInDbMap.get(requestedItem.getProductId());\r\n\r\n            if (quantity &gt;= requestedItem.getRequestedQuantity()) {\r\n                return&quot;order-able&quot;;\r\n            } else {\r\n                int availableQuantity = quantity - requestedItem.getRequestedQuantity();\r\n                return String.valueOf(availableQuantity);\r\n            }\r\n        }));\r\n```\r\n\r\nYour approach will work fine if you use forEach:\r\n\r\n```java\r\nMap&lt;String,String&gt; responseMap = new HashMap&lt;&gt;()\r\nrequestList.stream()\r\n            .forEach(requestedItem -&gt;  {\r\n                int quantity = productInDbMap.get(requestedItem.getProductId());\r\n\r\n                if (quantity &gt;= requestedItem.getRequestedQuantity()) {\r\n                    responseMap.put(requestedItem.getProductId(), &quot;order-able&quot;);\r\n\r\n                } else {\r\n                    int availableQuantity = quantity - requestedItem.getRequestedQuantity();\r\n                    String s = String.valueOf(availableQuantity);\r\n                    responseMap.put(requestedItem.getProductId(), s);\r\n                }\r\n        });\r\n```","title":"Stream API - need to iterate over the List and compare with Map. Write result in different Map","body":"<p>You can directly collect to map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,String&gt; responseMap = requestList.stream()\n            .collect(Collectors.toMap(ProductInStockRequest::getProductId, requestedItem -&gt;  {\n            int quantity = productInDbMap.get(requestedItem.getProductId());\n\n            if (quantity &gt;= requestedItem.getRequestedQuantity()) {\n                return&quot;order-able&quot;;\n            } else {\n                int availableQuantity = quantity - requestedItem.getRequestedQuantity();\n                return String.valueOf(availableQuantity);\n            }\n        }));\n</code></pre>\n<p>Your approach will work fine if you use forEach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String,String&gt; responseMap = new HashMap&lt;&gt;()\nrequestList.stream()\n            .forEach(requestedItem -&gt;  {\n                int quantity = productInDbMap.get(requestedItem.getProductId());\n\n                if (quantity &gt;= requestedItem.getRequestedQuantity()) {\n                    responseMap.put(requestedItem.getProductId(), &quot;order-able&quot;);\n\n                } else {\n                    int availableQuantity = quantity - requestedItem.getRequestedQuantity();\n                    String s = String.valueOf(availableQuantity);\n                    responseMap.put(requestedItem.getProductId(), s);\n                }\n        });\n</code></pre>\n"}],"owner":{"account_id":23243428,"reputation":5,"user_id":17332325,"display_name":"Kirill Sazonov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75134285,"answer_count":2,"score":0,"last_activity_date":1674619652,"creation_date":1673871057,"question_id":75134019,"body_markdown":"```\r\npublic class ProductInStockRequest {\r\n\r\n    private String productId;\r\n\r\n    private Integer requestedQuantity;\r\n}\r\n```\r\n\r\nI have a List&lt;ProductInStockRequest&gt;  \r\n\r\n        requestList.add(new ProductInStockRequest(&quot;100&quot;, 5));\r\n        requestList.add(new ProductInStockRequest(&quot;200&quot;, 11));\r\n        requestList.add(new ProductInStockRequest(&quot;300&quot;, 33));\r\n        requestList.add(new ProductInStockRequest(&quot;400&quot;, 55));\r\n\r\nI have a Map&lt;String, Integer&gt; productInDbMap = new HashMap&lt;&gt;();\r\n\r\n        productInDbMap.put(&quot;100&quot;, 10);\r\n        productInDbMap.put(&quot;200&quot;, 10);\r\n        productInDbMap.put(&quot;300&quot;, 44);\r\n        productInDbMap.put(&quot;400&quot;, 77);\r\n\r\n\r\nI created new Map&lt;String, String&gt; responseMap = new HashMap&lt;&gt;();\r\n\r\n\r\nI need to go over each element in List and check if for related productId I have enough quantity or not and write result in responseMap\r\n\r\nTrying to do something like this:\r\n\r\n        requestList.stream().map(requestedItem -&gt; {\r\n            int quantity = productInDbMap.get(requestedItem.getProductId());\r\n\r\n            if (quantity &gt;= requestedItem.getRequestedQuantity()) {\r\n                responseMap.put(requestedItem.getProductId(), &quot;order-able&quot;);\r\n\r\n            } else {\r\n                int availableQuantity = quantity - requestedItem.getRequestedQuantity();\r\n                String s = String.valueOf(availableQuantity);\r\n                responseMap.put(requestedItem.getProductId(), s);\r\n            }\r\n            return responseMap;\r\n        });\r\n\r\nNo luck, please advise","title":"Stream API - need to iterate over the List and compare with Map. Write result in different Map","body":"<pre><code>public class ProductInStockRequest {\n\n    private String productId;\n\n    private Integer requestedQuantity;\n}\n</code></pre>\n<p>I have a List</p>\n<pre><code>    requestList.add(new ProductInStockRequest(&quot;100&quot;, 5));\n    requestList.add(new ProductInStockRequest(&quot;200&quot;, 11));\n    requestList.add(new ProductInStockRequest(&quot;300&quot;, 33));\n    requestList.add(new ProductInStockRequest(&quot;400&quot;, 55));\n</code></pre>\n<p>I have a Map&lt;String, Integer&gt; productInDbMap = new HashMap&lt;&gt;();</p>\n<pre><code>    productInDbMap.put(&quot;100&quot;, 10);\n    productInDbMap.put(&quot;200&quot;, 10);\n    productInDbMap.put(&quot;300&quot;, 44);\n    productInDbMap.put(&quot;400&quot;, 77);\n</code></pre>\n<p>I created new Map&lt;String, String&gt; responseMap = new HashMap&lt;&gt;();</p>\n<p>I need to go over each element in List and check if for related productId I have enough quantity or not and write result in responseMap</p>\n<p>Trying to do something like this:</p>\n<pre><code>    requestList.stream().map(requestedItem -&gt; {\n        int quantity = productInDbMap.get(requestedItem.getProductId());\n\n        if (quantity &gt;= requestedItem.getRequestedQuantity()) {\n            responseMap.put(requestedItem.getProductId(), &quot;order-able&quot;);\n\n        } else {\n            int availableQuantity = quantity - requestedItem.getRequestedQuantity();\n            String s = String.valueOf(availableQuantity);\n            responseMap.put(requestedItem.getProductId(), s);\n        }\n        return responseMap;\n    });\n</code></pre>\n<p>No luck, please advise</p>\n"},{"tags":["java","application.properties"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674619487,"post_id":75229569,"comment_id":132751258,"body_markdown":"Where do you have `appconfig=config.cfg`? What code are you using to read your properties file? Why can&#39;t you just give that the path of an external file?","body":"Where do you have <code>appconfig=config.cfg</code>? What code are you using to read your properties file? Why can&#39;t you just give that the path of an external file?"},{"owner":{"account_id":22016938,"reputation":87,"user_id":16286279,"display_name":"Neha"},"score":0,"creation_date":1674619820,"post_id":75229569,"comment_id":132751299,"body_markdown":"@tgdavies I have it in the application.properties file. I tried giving the path of that directly in the java code, but I keep getting a file not found error.","body":"@tgdavies I have it in the application.properties file. I tried giving the path of that directly in the java code, but I keep getting a file not found error."}],"owner":{"account_id":22016938,"reputation":87,"user_id":16286279,"display_name":"Neha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1674619547,"creation_date":1674619081,"question_id":75229569,"body_markdown":"I have a configuration file in the resources folder that I wanna add the path to in the application.properties folder. But the following code is not working.\r\n\r\n**application.properties**\r\n\r\n```\r\nappconfig=config.cfg\r\n```\r\n\r\nBecause of the nature of my application, I require an external *.cfg* file. Is there a way I can add the file to application.properties?","title":"Adding external config file to application.properties","body":"<p>I have a configuration file in the resources folder that I wanna add the path to in the application.properties folder. But the following code is not working.</p>\n<p><strong>application.properties</strong></p>\n<pre><code>appconfig=config.cfg\n</code></pre>\n<p>Because of the nature of my application, I require an external <em>.cfg</em> file. Is there a way I can add the file to application.properties?</p>\n"},{"tags":["java","android","android-studio","webview"],"answers":[{"tags":[],"owner":{"account_id":26115133,"reputation":1,"user_id":19808391,"display_name":"Mike Soray"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674368843,"creation_date":1674368843,"answer_id":75198584,"question_id":75195725,"body_markdown":"Stupid thing, should not have done this late into the night.\r\n\r\nThe problem was only with layout, rest of the page was out of screen.\r\nNeeded only to match the WebView to constraints.","title":"WebView in Android Studio does not show sites properly (i.e. www.google.com is without logo, search bar and all the stuff on upper screen)","body":"<p>Stupid thing, should not have done this late into the night.</p>\n<p>The problem was only with layout, rest of the page was out of screen.\nNeeded only to match the WebView to constraints.</p>\n"}],"owner":{"account_id":26115133,"reputation":1,"user_id":19808391,"display_name":"Mike Soray"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674619531,"creation_date":1674326641,"question_id":75195725,"body_markdown":"I have a problem with showing simple google.com in my WebView.\r\nTried this on few emulators and 2 phones, all the same, something is wrong with my code.\r\n\r\n**1. Issue**\r\n- First screen shows normally google&#39;s asking user to accept their legal stuff (1st image).\r\n- After accepting it moves to google&#39;s main page. But only lower part (Country, settings, adds, about etc.) is shown (2nd image). There is no Google logo, no search bar and buttons and no stuff from the upper display (like GMAIL, GRAPHICS, ACCOUNT and so on). \r\n[1ST SCREEN OF GOOGLE.COM](https://i.stack.imgur.com/brvWT.png)\r\n[INCORRECTLY SHOWN GOOGLE PAGE](https://i.stack.imgur.com/IzAUt.png)\r\n\r\n**2. Code**\r\n- I added permission in Manifest.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\r\n\r\n- Trying to solve the issue I stackoverflowed below two lines and added to Manifest, but to no avail:\r\n        android:hardwareAccelerated=&quot;true&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n\r\n**\r\n3. My java code is below:**\r\n\r\n(each of the settings I tried to comment out and then one by one uncomment, but still no result).\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        WebView webView = findViewById(R.id.webView);\r\n        WebSettings settings = webView.getSettings();\r\n        settings.setDomStorageEnabled(true);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.getSettings().setLoadWithOverviewMode(true);\r\n        webView.getSettings().setUseWideViewPort(true);\r\n        webView.getSettings().setDomStorageEnabled(true);\r\n        webView.setWebViewClient(new WebViewClient());\r\n        webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);\r\n        webView.loadUrl(&quot;http://www.google.com&quot;);\r\n\r\n    }\r\n}\r\n```\r\n\r\nCould someone please check this is tell me what I&#39;ve done wrong here?","title":"WebView in Android Studio does not show sites properly (i.e. www.google.com is without logo, search bar and all the stuff on upper screen)","body":"<p>I have a problem with showing simple google.com in my WebView.\nTried this on few emulators and 2 phones, all the same, something is wrong with my code.</p>\n<p><strong>1. Issue</strong></p>\n<ul>\n<li>First screen shows normally google's asking user to accept their legal stuff (1st image).</li>\n<li>After accepting it moves to google's main page. But only lower part (Country, settings, adds, about etc.) is shown (2nd image). There is no Google logo, no search bar and buttons and no stuff from the upper display (like GMAIL, GRAPHICS, ACCOUNT and so on).\n<a href=\"https://i.stack.imgur.com/brvWT.png\" rel=\"nofollow noreferrer\">1ST SCREEN OF GOOGLE.COM</a>\n<a href=\"https://i.stack.imgur.com/IzAUt.png\" rel=\"nofollow noreferrer\">INCORRECTLY SHOWN GOOGLE PAGE</a></li>\n</ul>\n<p><strong>2. Code</strong></p>\n<ul>\n<li><p>I added permission in Manifest.</p>\n<p></p>\n</li>\n<li><p>Trying to solve the issue I stackoverflowed below two lines and added to Manifest, but to no avail:\nandroid:hardwareAccelerated=&quot;true&quot;\nandroid:usesCleartextTraffic=&quot;true&quot;</p>\n</li>\n</ul>\n<p>**\n3. My java code is below:**</p>\n<p>(each of the settings I tried to comment out and then one by one uncomment, but still no result).</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        WebView webView = findViewById(R.id.webView);\n        WebSettings settings = webView.getSettings();\n        settings.setDomStorageEnabled(true);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.getSettings().setLoadWithOverviewMode(true);\n        webView.getSettings().setUseWideViewPort(true);\n        webView.getSettings().setDomStorageEnabled(true);\n        webView.setWebViewClient(new WebViewClient());\n        webView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);\n        webView.loadUrl(&quot;http://www.google.com&quot;);\n\n    }\n}\n</code></pre>\n<p>Could someone please check this is tell me what I've done wrong here?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1633593444,"post_id":69476413,"comment_id":122802197,"body_markdown":"Using `charAt` gives you the `char` at that index, not the digit representation of that character. Meaning, `0` is not &quot;0&quot; but the ASCII value of the character `0`, i.e. `48`.","body":"Using <code>charAt</code> gives you the <code>char</code> at that index, not the digit representation of that character. Meaning, <code>0</code> is not &quot;0&quot; but the ASCII value of the character <code>0</code>, i.e. <code>48</code>."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633588793,"creation_date":1633588578,"answer_id":69476442,"question_id":69476413,"body_markdown":"You are not converting the characters to digits correctly.\r\n\r\nOne of the possible ways to fix it:\r\n\r\n        int b = a.charAt(0)-&#39;0&#39;;\r\n\r\n        int c = a.charAt(1)-&#39;0&#39;;\r\n\r\n        int d = a.charAt(2)-&#39;0&#39;;\r\n\r\nAnother way:\r\n\r\n        int b = Character.digit (a.charAt(0),10);\r\n\r\n        int c = Character.digit (a.charAt(1),10);\r\n\r\n        int d = Character.digit (a.charAt(2),10);\r\n\r\nEither way will give your the output:\r\n\r\n    153\r\n    370\r\n    371\r\n    407","title":"Amstrong number return in blank result (java)","body":"<p>You are not converting the characters to digits correctly.</p>\n<p>One of the possible ways to fix it:</p>\n<pre><code>    int b = a.charAt(0)-'0';\n\n    int c = a.charAt(1)-'0';\n\n    int d = a.charAt(2)-'0';\n</code></pre>\n<p>Another way:</p>\n<pre><code>    int b = Character.digit (a.charAt(0),10);\n\n    int c = Character.digit (a.charAt(1),10);\n\n    int d = Character.digit (a.charAt(2),10);\n</code></pre>\n<p>Either way will give your the output:</p>\n<pre><code>153\n370\n371\n407\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17095622"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633589105,"creation_date":1633589105,"answer_id":69476531,"question_id":69476413,"body_markdown":"Another way you can do it is:\r\n```\r\nimport java.util.*;\r\npublic class ArmstrongNumber3\r\n{\r\n     public static void main(String args[]) {\r\n        Scanner sc = new Scanner(System.in);\r\n        System.out.println(&quot;Enter any number&quot;);\r\n\r\n\r\n        int n = sc.nextInt();\r\n\r\n        int b = n;\r\n        int sum = 0;\r\n        int d = 0;\r\n        while (n != 0) {\r\n            d = n % 10;\r\n            sum += (d * d * d);\r\n            n = n / 10;\r\n\r\n        }\r\n        if (sum == b) {\r\n            System.out.println(&quot;Armstrong&quot;);\r\n\r\n        } else\r\n        {\r\n            System.out.println(&quot;Not Armstrong&quot;);\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n}","title":"Amstrong number return in blank result (java)","body":"<p>Another way you can do it is:</p>\n<pre><code>import java.util.*;\npublic class ArmstrongNumber3\n{\n     public static void main(String args[]) {\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter any number&quot;);\n\n\n        int n = sc.nextInt();\n\n        int b = n;\n        int sum = 0;\n        int d = 0;\n        while (n != 0) {\n            d = n % 10;\n            sum += (d * d * d);\n            n = n / 10;\n\n        }\n        if (sum == b) {\n            System.out.println(&quot;Armstrong&quot;);\n\n        } else\n        {\n            System.out.println(&quot;Not Armstrong&quot;);\n        }\n\n\n\n\n\n\n\n\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8604274,"reputation":3,"user_id":6444895,"display_name":"Kjs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674619508,"creation_date":1674163723,"answer_id":75178469,"question_id":69476413,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class Amstrong {\r\n\r\n    public static void main(String args[]) {\r\n        Integer num, temp, len = 0, initVal;\r\n        double finalVal = 0;\r\n        Scanner scn = new Scanner(System.in);\r\n        System.out.println(&quot;Enter the number&quot;);\r\n        num = scn.nextInt();\r\n        initVal = num;\r\n        temp = num;\r\n        while (temp != 0) {\r\n            temp = temp / 10;\r\n            len++;\r\n        }\r\n\r\n        for (int i = 0; i &lt;= len; i++) {\r\n            temp = num % 10;\r\n            finalVal = finalVal + Math.pow(temp, len);\r\n            num = num / 10;\r\n        }\r\n\r\n        if (Double.valueOf(initVal) == finalVal) {\r\n            System.out.println(&quot;Amstrong&quot;);\r\n        } else {\r\n            System.out.println(&quot;Not Amstrong&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"Amstrong number return in blank result (java)","body":"<pre><code>import java.util.Scanner;\n\npublic class Amstrong {\n\n    public static void main(String args[]) {\n        Integer num, temp, len = 0, initVal;\n        double finalVal = 0;\n        Scanner scn = new Scanner(System.in);\n        System.out.println(&quot;Enter the number&quot;);\n        num = scn.nextInt();\n        initVal = num;\n        temp = num;\n        while (temp != 0) {\n            temp = temp / 10;\n            len++;\n        }\n\n        for (int i = 0; i &lt;= len; i++) {\n            temp = num % 10;\n            finalVal = finalVal + Math.pow(temp, len);\n            num = num / 10;\n        }\n\n        if (Double.valueOf(initVal) == finalVal) {\n            System.out.println(&quot;Amstrong&quot;);\n        } else {\n            System.out.println(&quot;Not Amstrong&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22966742,"reputation":11,"user_id":17095694,"display_name":"Đồng Tiến Qu&#226;n"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1674619508,"creation_date":1633588389,"question_id":69476413,"body_markdown":"    public class Amstrong {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            for (int i = 100; i &lt; 1000; i++) {\r\n    \r\n                String a = String.valueOf(i);\r\n    \r\n                int b = a.charAt(0);\r\n    \r\n                int c = a.charAt(1);\r\n    \r\n                int d = a.charAt(2);\r\n                int e = b * b * b + c * c * c + d * d * d;\r\n    \r\n                if (e == i) {\r\n    \r\n                    System.out.println(i);\r\n    \r\n                }\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n//Help me out please, no error occurred but the result returned in the blank\r\n","title":"Amstrong number return in blank result (java)","body":"<pre><code>public class Amstrong {\n\n    public static void main(String[] args) {\n\n        for (int i = 100; i &lt; 1000; i++) {\n\n            String a = String.valueOf(i);\n\n            int b = a.charAt(0);\n\n            int c = a.charAt(1);\n\n            int d = a.charAt(2);\n            int e = b * b * b + c * c * c + d * d * d;\n\n            if (e == i) {\n\n                System.out.println(i);\n\n            }\n\n        }\n\n    }\n\n}\n</code></pre>\n<p>//Help me out please, no error occurred but the result returned in the blank</p>\n"},{"tags":["java","tostring"],"comments":[{"owner":{"account_id":9432667,"reputation":1340,"user_id":7015661,"accept_rate":100,"display_name":"TM00"},"score":4,"creation_date":1518331122,"post_id":48728957,"comment_id":84456952,"body_markdown":"Have you at least tried something?","body":"Have you at least tried something?"},{"owner":{"account_id":6429844,"reputation":3522,"user_id":4983501,"accept_rate":41,"display_name":"niaomingjian"},"score":0,"creation_date":1518331257,"post_id":48728957,"comment_id":84456981,"body_markdown":"You can override `toString()` method of `Person` Class to display these fields.","body":"You can override <code>toString()</code> method of <code>Person</code> Class to display these fields."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1518337922,"post_id":48728957,"comment_id":84458354,"body_markdown":"Welcome to Stack Overflow! Unfortunately your question only contains requirements - it is not showing any efforts from your side to solve this problem yourself. Please add your attempts to this questions - as this site is not a free &quot;we do your (home)work&quot; service. Beyond that: please turn to the [help] to learn how/what to ask here. Thanks!","body":"Welcome to Stack Overflow! Unfortunately your question only contains requirements - it is not showing any efforts from your side to solve this problem yourself. Please add your attempts to this questions - as this site is not a free &quot;we do your (home)work&quot; service. Beyond that: please turn to the <a href=\"https://stackoverflow.com/help\">help center</a> to learn how/what to ask here. Thanks!"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1518337949,"post_id":48728957,"comment_id":84458362,"body_markdown":"You are expected to do serious research prior posting questions. If you did that, you are doing a great job of hiding that.","body":"You are expected to do serious research prior posting questions. If you did that, you are doing a great job of hiding that."}],"answers":[{"comments":[{"owner":{"account_id":12923020,"reputation":1,"user_id":9344741,"display_name":"Георги Иванов"},"score":0,"creation_date":1518332270,"post_id":48729081,"comment_id":84457185,"body_markdown":"Thanks a lot ! It is working and i think this is quite a good knowledge for me, i will explore it :)","body":"Thanks a lot ! It is working and i think this is quite a good knowledge for me, i will explore it :)"},{"owner":{"account_id":9432667,"reputation":1340,"user_id":7015661,"accept_rate":100,"display_name":"TM00"},"score":0,"creation_date":1518332346,"post_id":48729081,"comment_id":84457198,"body_markdown":"My pleasure! If you are satisfied with the answer, you should mark it as the accepted answer for this question.","body":"My pleasure! If you are satisfied with the answer, you should mark it as the accepted answer for this question."}],"tags":[],"owner":{"account_id":9432667,"reputation":1340,"user_id":7015661,"accept_rate":100,"display_name":"TM00"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1518331659,"creation_date":1518331659,"answer_id":48729081,"question_id":48728957,"body_markdown":"The `toString` method always exists for each Java class. But if you do not override it to specify what to return it will by default return the &quot;*class name, then ‘at’ sign, and at the end hashCode*&quot;, something like `Person@19821f`. More info [here][1].\r\n\r\nSo you should override the `toString` method in `Person` like this (do change the resulting `String` to taste):\r\n\r\n    @Override\r\n    public String toString() {\r\n          String s = name +&quot;, age &quot;+age+&quot;, isMan: &quot;+isMan;\r\n          return s;\r\n    }\r\n\r\nThen to display this, create the `showPersonInfo` method:\r\n\r\n    public void showPersonInfo(){\r\n        \r\n       System.out.println(this.toString()); // OR\r\n       // System.out.println(this); // Java prints the toString method by default\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/overriding-tostring-method-in-java/","title":"Exercise with toString() method","body":"<p>The <code>toString</code> method always exists for each Java class. But if you do not override it to specify what to return it will by default return the \"<em>class name, then ‘at’ sign, and at the end hashCode</em>\", something like <code>Person@19821f</code>. More info <a href=\"https://www.geeksforgeeks.org/overriding-tostring-method-in-java/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So you should override the <code>toString</code> method in <code>Person</code> like this (do change the resulting <code>String</code> to taste):</p>\n\n<pre><code>@Override\npublic String toString() {\n      String s = name +\", age \"+age+\", isMan: \"+isMan;\n      return s;\n}\n</code></pre>\n\n<p>Then to display this, create the <code>showPersonInfo</code> method:</p>\n\n<pre><code>public void showPersonInfo(){\n\n   System.out.println(this.toString()); // OR\n   // System.out.println(this); // Java prints the toString method by default\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6429844,"reputation":3522,"user_id":4983501,"accept_rate":41,"display_name":"niaomingjian"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1518331938,"creation_date":1518331938,"answer_id":48729110,"question_id":48728957,"body_markdown":"    public class Person {\r\n\r\n\tString name;\r\n\tint age;\r\n\tboolean isMan;\r\n\t\r\n\t\r\n\tPerson(String nameParam,int ageParam,boolean isManParam){\r\n\t\tthis.name = nameParam;\r\n\t\tthis.age = ageParam;\r\n\t\tthis.isMan = isManParam;\r\n\t\t }\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;name:&quot; + this.name + &quot;, age:&quot; + this.age + &quot;, isMan:&quot; + this.isMan ;\r\n    }\r\n\r\n    public void showPersonInfo {\r\n        System.out.println(toString());\r\n    }\r\n","title":"Exercise with toString() method","body":"<pre><code>public class Person {\n\nString name;\nint age;\nboolean isMan;\n\n\nPerson(String nameParam,int ageParam,boolean isManParam){\n    this.name = nameParam;\n    this.age = ageParam;\n    this.isMan = isManParam;\n     }\n}\n\n@Override\npublic String toString() {\n    return \"name:\" + this.name + \", age:\" + this.age + \", isMan:\" + this.isMan ;\n}\n\npublic void showPersonInfo {\n    System.out.println(toString());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2926765,"reputation":523,"user_id":2507899,"accept_rate":100,"display_name":"Lucas Colombo"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1518331998,"creation_date":1518331998,"answer_id":48729115,"question_id":48728957,"body_markdown":"    public class Person {\r\n        String name;\r\n        int age;\r\n        boolean isMan;\r\n\r\n        Person(String nameParam,int ageParam,boolean isManParam) {\r\n            this.name = nameParam;\r\n            this.age = ageParam;\r\n            this.isMan = isManParam;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Name: &quot; + this.name +\r\n                   &quot;\\nAge: &quot; + this.age +\r\n                   &quot;\\nIs a Man?: &quot; + this.isMan;\r\n        }\r\n     \r\n        public String showPersonInfo() {\r\n            return this.toString();\r\n        }\r\n    }\r\n\r\nIn your main method:\r\n\r\n    public class toStringDemo {\r\n        public static void main(String[] args) {\r\n            Person human = new Person(&quot;Jack&quot;,28,true);\r\n\r\n            System.out.println(human.showPersonInfo());\r\n        }\r\n    }\r\n","title":"Exercise with toString() method","body":"<pre><code>public class Person {\n    String name;\n    int age;\n    boolean isMan;\n\n    Person(String nameParam,int ageParam,boolean isManParam) {\n        this.name = nameParam;\n        this.age = ageParam;\n        this.isMan = isManParam;\n    }\n\n    @Override\n    public String toString() {\n        return \"Name: \" + this.name +\n               \"\\nAge: \" + this.age +\n               \"\\nIs a Man?: \" + this.isMan;\n    }\n\n    public String showPersonInfo() {\n        return this.toString();\n    }\n}\n</code></pre>\n\n<p>In your main method:</p>\n\n<pre><code>public class toStringDemo {\n    public static void main(String[] args) {\n        Person human = new Person(\"Jack\",28,true);\n\n        System.out.println(human.showPersonInfo());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1674112219,"post_id":75168758,"comment_id":132646180,"body_markdown":"How is this an improvement over the previous answers?","body":"How is this an improvement over the previous answers?"}],"tags":[],"owner":{"account_id":27570206,"reputation":1,"user_id":21041551,"display_name":"BHUKYA ANJANEYULU NAIK"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674619466,"creation_date":1674111981,"answer_id":75168758,"question_id":48728957,"body_markdown":"```\r\npublic class Person\r\n{\r\n\r\n\t   String name;\r\n\t   int age;\r\n\t   boolean isMan;\r\n\t  Person( String name,int age,boolean isMan)   \r\n\t   {\r\n\t     this.name=name;\r\n\t     this.age=age;\r\n\t      this.isMan=isMan;\r\n\t   }\r\n\t   @Override\r\n\t   public String toString()\r\n\t    {\r\n\t      return &quot;name: &quot;+name+&quot;\\nage: &quot;+age+&quot;\\nisMan: &quot;+isMan;\r\n\t     }\r\n\t  \r\n\t}\r\npublic class ToString\r\n {\r\n\t\r\n\t\t  public static void main(String args[])\r\n\t\t   {\r\n\t\t     Person human=new Person(&quot;jack&quot;,28,true);\r\n\t\t     System.out.println(human);\r\n             //System.out.println(human.toString);\r\n\t\t   }\r\n}\r\n```","title":"Exercise with toString() method","body":"<pre><code>public class Person\n{\n\n       String name;\n       int age;\n       boolean isMan;\n      Person( String name,int age,boolean isMan)   \n       {\n         this.name=name;\n         this.age=age;\n          this.isMan=isMan;\n       }\n       @Override\n       public String toString()\n        {\n          return &quot;name: &quot;+name+&quot;\\nage: &quot;+age+&quot;\\nisMan: &quot;+isMan;\n         }\n      \n    }\npublic class ToString\n {\n    \n          public static void main(String args[])\n           {\n             Person human=new Person(&quot;jack&quot;,28,true);\n             System.out.println(human);\n             //System.out.println(human.toString);\n           }\n}\n</code></pre>\n"}],"owner":{"account_id":12923020,"reputation":1,"user_id":9344741,"display_name":"Георги Иванов"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":431,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":48729081,"answer_count":4,"score":-4,"last_activity_date":1674619466,"creation_date":1518330464,"question_id":48728957,"body_markdown":"i am pretty much new in Java and i have one perhaps easy question.\r\n\r\nI have this code : \r\n\r\n    public class Person {\r\n\t    String name;\r\n\t    int age;\r\n\t    boolean isMan;\r\n\t\r\n\t    Person(String nameParam,int ageParam,boolean isManParam) {\r\n\t\t    this.name = nameParam;\r\n\t\t    this.age = ageParam;\r\n\t\t    this.isMan = isManParam;\r\n        }\r\n    }\r\n\r\nIn another demoClass i have initialized object of class Person:\r\n\r\n    public class toStringDemo {\r\n        public static void main(String[] args) {\r\n           Person human = new Person(&quot;Jack&quot;,28,true);\r\n\t\t}\r\n    }\r\n\r\nI have a task to write a method showPersonInfo() using toString() method so to \r\ndisplay all the three fields of the initialized object ..Any help?","title":"Exercise with toString() method","body":"<p>i am pretty much new in Java and i have one perhaps easy question.</p>\n\n<p>I have this code : </p>\n\n<pre><code>public class Person {\n    String name;\n    int age;\n    boolean isMan;\n\n    Person(String nameParam,int ageParam,boolean isManParam) {\n        this.name = nameParam;\n        this.age = ageParam;\n        this.isMan = isManParam;\n    }\n}\n</code></pre>\n\n<p>In another demoClass i have initialized object of class Person:</p>\n\n<pre><code>public class toStringDemo {\n    public static void main(String[] args) {\n       Person human = new Person(\"Jack\",28,true);\n    }\n}\n</code></pre>\n\n<p>I have a task to write a method showPersonInfo() using toString() method so to \ndisplay all the three fields of the initialized object ..Any help?</p>\n"},{"tags":["java","json","type-conversion","double","data-conversion"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1674109885,"post_id":75168462,"comment_id":132645723,"body_markdown":"If `amount` is a double, converting it to BigDecimal won&#39;t recover lost precision. You would have to parse as a String or BigDecimal in the first place. What JSON library are you using?","body":"If <code>amount</code> is a double, converting it to BigDecimal won&#39;t recover lost precision. You would have to parse as a String or BigDecimal in the first place. What JSON library are you using?"},{"owner":{"account_id":17263689,"reputation":13,"user_id":12500975,"display_name":"Aleyna"},"score":0,"creation_date":1674110553,"post_id":75168462,"comment_id":132645858,"body_markdown":"@shmosel I believe I&#39;m using  jackson library","body":"@shmosel I believe I&#39;m using  jackson library"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1674111923,"post_id":75168462,"comment_id":132646122,"body_markdown":"Try using a proper POJO instead of the Map and declaring the `amount` field as BigDecimal.","body":"Try using a proper POJO instead of the Map and declaring the <code>amount</code> field as BigDecimal."}],"answers":[{"comments":[{"owner":{"account_id":17263689,"reputation":13,"user_id":12500975,"display_name":"Aleyna"},"score":0,"creation_date":1674111131,"post_id":75168625,"comment_id":132645946,"body_markdown":"The problem is I don&#39;t get the amount value as string","body":"The problem is I don&#39;t get the amount value as string"}],"tags":[],"owner":{"account_id":1674131,"reputation":126,"user_id":1540005,"display_name":"Rahul Shandilya"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1674619344,"creation_date":1674110934,"answer_id":75168625,"question_id":75168462,"body_markdown":"Try following\r\n\r\n```\r\nimport java.math.BigDecimal;\r\nimport static java.math.RoundingMode.HALF_UP;\r\npublic class Test {\r\n    public static void main(String[] args) {\r\n        String jsonAmount = &quot;123345555789123495.38&quot;;\r\n        BigDecimal amount = new BigDecimal(jsonAmount).setScale(2, HALF_UP);\r\n    }\r\n}\r\n```","title":"Is it possible to convert large double number to big decimal without losing precision when deserializing a json data?","body":"<p>Try following</p>\n<pre><code>import java.math.BigDecimal;\nimport static java.math.RoundingMode.HALF_UP;\npublic class Test {\n    public static void main(String[] args) {\n        String jsonAmount = &quot;123345555789123495.38&quot;;\n        BigDecimal amount = new BigDecimal(jsonAmount).setScale(2, HALF_UP);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17263689,"reputation":13,"user_id":12500975,"display_name":"Aleyna"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674619344,"creation_date":1674109646,"question_id":75168462,"body_markdown":"Customer sends me a json double data like \r\n&quot;amount&quot;: 123345555789123495.38\r\nand in our program we get the whole message and program get the value like 1.23345555789123488E17\r\nIs it possible to convert this data right with precision??\r\n\r\n@JsonProperty(&quot;map&quot;)\r\n    private ConcurrentHashMap&lt;String, Object&gt; extensionMap;\r\n\r\nI tried \r\nnew BigDecimal(String.valueOf(map.get(&quot;amount&quot;))).setScale(2, BigDecimal.ROUND_HALF_EVEN);\r\n\r\nOutput is:\r\n123345555789123488.00\r\n\r\n","title":"Is it possible to convert large double number to big decimal without losing precision when deserializing a json data?","body":"<p>Customer sends me a json double data like\n&quot;amount&quot;: 123345555789123495.38\nand in our program we get the whole message and program get the value like 1.23345555789123488E17\nIs it possible to convert this data right with precision??</p>\n<p>@JsonProperty(&quot;map&quot;)\nprivate ConcurrentHashMap&lt;String, Object&gt; extensionMap;</p>\n<p>I tried\nnew BigDecimal(String.valueOf(map.get(&quot;amount&quot;))).setScale(2, BigDecimal.ROUND_HALF_EVEN);</p>\n<p>Output is:\n123345555789123488.00</p>\n"},{"tags":["java","spring","spring-boot","rest","mustache"],"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1673989727,"post_id":75151738,"comment_id":132618604,"body_markdown":"You need to read [tour] and ask a focused question. This is not a discussion forum.","body":"You need to read <a href=\"https://stackoverflow.com/tour\">tour</a> and ask a focused question. This is not a discussion forum."},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1674045254,"post_id":75151738,"comment_id":132630058,"body_markdown":"Yeah! I see) I want to ask if is it possible? I`ve changed question.","body":"Yeah! I see) I want to ask if is it possible? I`ve changed question."},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1674049179,"post_id":75151738,"comment_id":132631432,"body_markdown":"I&#39;m sure it&#39;s possible. Please read [ask].","body":"I&#39;m sure it&#39;s possible. Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"comments":[{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1674635527,"post_id":75229557,"comment_id":132754192,"body_markdown":"So, I guess writing java code in mustache is a bad idea","body":"So, I guess writing java code in mustache is a bad idea"},{"owner":{"account_id":14762249,"reputation":9,"user_id":10661226,"display_name":"Sri hari"},"score":0,"creation_date":1674791530,"post_id":75229557,"comment_id":132793244,"body_markdown":"@Jeka_FRI it is not bad idea it is based on your need. Instead of going with the documentation after you developed your API it gives the advantage of giving the UI developers/API consumers how your API input and output and the structure everything using an auto enabled endpoint in your application. Also it is called design first approach instead of code first approach. As I said it is all about your application design decision whether to use it or not.","body":"@Jeka_FRI it is not bad idea it is based on your need. Instead of going with the documentation after you developed your API it gives the advantage of giving the UI developers/API consumers how your API input and output and the structure everything using an auto enabled endpoint in your application. Also it is called design first approach instead of code first approach. As I said it is all about your application design decision whether to use it or not."},{"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"score":0,"creation_date":1674896694,"post_id":75229557,"comment_id":132814907,"body_markdown":"what about incapsulation?","body":"what about incapsulation?"},{"owner":{"account_id":14762249,"reputation":9,"user_id":10661226,"display_name":"Sri hari"},"score":0,"creation_date":1675149649,"post_id":75229557,"comment_id":132860979,"body_markdown":"@Jeka_FRI I don&#39;t get what you want exactly. Can you elaborate what you are trying to ask? So, I can help you with more information.","body":"@Jeka_FRI I don&#39;t get what you want exactly. Can you elaborate what you are trying to ask? So, I can help you with more information."}],"tags":[],"owner":{"account_id":14762249,"reputation":9,"user_id":10661226,"display_name":"Sri hari"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674618932,"creation_date":1674618932,"answer_id":75229557,"question_id":75151738,"body_markdown":"Yes, You can create REST API using OpenAPI(https://support.smartbear.com/swaggerhub/docs/tutorials/openapi-3-tutorial.html) which uses the mustache file to create your code.\r\n\r\nYou need to add following dependencies,\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.6.8&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nadd the following plugin in the pom.xml for configuration(https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator-maven-plugin/README.md),\r\n\r\n    &lt;plugin&gt;\r\n\t\t&lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n\t\t&lt;executions&gt;\r\n\t\t\t&lt;execution&gt;\r\n\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t&lt;goal&gt;generate&lt;/goal&gt;\r\n\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;templateDirectory&gt;${project.basedir}/templates\r\n\t\t\t\t\t&lt;/templateDirectory&gt;\r\n\t\t\t\t\t&lt;configOptions&gt;\r\n\t\t\t\t\t\t//add the configuration options here\r\n\t\t\t\t\t&lt;/configOptions&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/execution&gt;\r\n\t\t&lt;/executions&gt;\r\n\t&lt;/plugin&gt;\r\n\r\nBy default it uses the mustache files internally to generate codes, you can change the mustache files from the git location(https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/JavaSpring/)/create your own with the name mentioned in git and place it in the location &lt;templateDirectory&gt;${project.basedir}/templates&lt;/templateDirectory&gt; it will generate your codes during the compile time and you can use them in your project.\r\n\r\nPlace the OpenAPI document in the resource folder where application.properties is placed","title":"Mustache + Spring boot + REST API","body":"<p>Yes, You can create REST API using OpenAPI(<a href=\"https://support.smartbear.com/swaggerhub/docs/tutorials/openapi-3-tutorial.html\" rel=\"nofollow noreferrer\">https://support.smartbear.com/swaggerhub/docs/tutorials/openapi-3-tutorial.html</a>) which uses the mustache file to create your code.</p>\n<p>You need to add following dependencies,</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.8&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\n    &lt;version&gt;0.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>add the following plugin in the pom.xml for configuration(<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator-maven-plugin/README.md\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator-maven-plugin/README.md</a>),</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;templateDirectory&gt;${project.basedir}/templates\n                &lt;/templateDirectory&gt;\n                &lt;configOptions&gt;\n                    //add the configuration options here\n                &lt;/configOptions&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>By default it uses the mustache files internally to generate codes, you can change the mustache files from the git location(<a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/JavaSpring/\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/JavaSpring/</a>)/create your own with the name mentioned in git and place it in the location ${project.basedir}/templates it will generate your codes during the compile time and you can use them in your project.</p>\n<p>Place the OpenAPI document in the resource folder where application.properties is placed</p>\n"}],"owner":{"account_id":19042414,"reputation":71,"user_id":13902217,"display_name":"Jeka_FRI"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674618932,"creation_date":1673986239,"question_id":75151738,"body_markdown":"I decided to make a project using Mustache + Spring Boot + REST API. Earlier, I used to write projects with the front-end used Java EE + Servlets + JSP. Now I decided to try to switch to Spring and write an application with a front-end. And I found a way to create a page on the front-end using Mustache, but if you use Mustache, then everything needs to be saved to the `model`, and I want to use REST API. I mean if it is possible? If it&#39;s possible I&#39;ll be happy if you show a piece of code your `RestController` and Mustache.\r\nThe question is &#39;if possible call endpoint from mustache?&#39;.","title":"Mustache + Spring boot + REST API","body":"<p>I decided to make a project using Mustache + Spring Boot + REST API. Earlier, I used to write projects with the front-end used Java EE + Servlets + JSP. Now I decided to try to switch to Spring and write an application with a front-end. And I found a way to create a page on the front-end using Mustache, but if you use Mustache, then everything needs to be saved to the <code>model</code>, and I want to use REST API. I mean if it is possible? If it's possible I'll be happy if you show a piece of code your <code>RestController</code> and Mustache.\nThe question is 'if possible call endpoint from mustache?'.</p>\n"},{"tags":["java","module","java-module"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":2,"creation_date":1673306705,"post_id":75053477,"comment_id":132465444,"body_markdown":"Use `Coupon.class` instead of `proxy.getClass()`.","body":"Use <code>Coupon.class</code> instead of <code>proxy.getClass()</code>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1673517095,"post_id":75053477,"comment_id":132518690,"body_markdown":"This isn’t even a module specific issue. Using `getClass().getMethod(…)` instead of `{baseclass or interface}.class.getMethod(…)` has been wrong since Reflection was introduced, for exactly that reason. You may end up at a `Method` object with an inaccessible declaring class. On the other hand, when you can use `Coupon.class` in this code, you can also use `((Coupon)proxy).itemDiscount()`","body":"This isn’t even a module specific issue. Using <code>getClass().getMethod(…)</code> instead of <code>{baseclass or interface}.class.getMethod(…)</code> has been wrong since Reflection was introduced, for exactly that reason. You may end up at a <code>Method</code> object with an inaccessible declaring class. On the other hand, when you can use <code>Coupon.class</code> in this code, you can also use <code>((Coupon)proxy).itemDiscount()</code>"},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674355834,"post_id":75053477,"comment_id":132696457,"body_markdown":"Thanks @Holger.  Yes I can use `Coupon.class` and it works with a closed module. But it is interesting that with the `open` module, the code sample in the question works.","body":"Thanks @Holger.  Yes I can use <code>Coupon.class</code> and it works with a closed module. But it is interesting that with the <code>open</code> module, the code sample in the question works."},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674355984,"post_id":75053477,"comment_id":132696470,"body_markdown":"I wonder if this is related to the change in Java16  to strongly encapsulate JDK internals?\n\nhttps://www.happycoders.eu/java/java-16-features/#Strongly_Encapsulate_JDK_Internals_by_Default","body":"I wonder if this is related to the change in Java16  to strongly encapsulate JDK internals?  <a href=\"https://www.happycoders.eu/java/java-16-features/#Strongly_Encapsulate_JDK_Internals_by_Default\" rel=\"nofollow noreferrer\">happycoders.eu/java/java-16-features/&hellip;</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1674459929,"post_id":75053477,"comment_id":132710403,"body_markdown":"As said, it is not related to modules at all. `getClass().getMethod(…)` may return an inaccessible method. That’s the fundamental problem of using `getClass().getMethod(…)`. The reasons why the method is inaccessible or the circumstances under which the method happens to be accessible, may vary and are not important.","body":"As said, it is not related to modules at all. <code>getClass().getMethod(…)</code> may return an inaccessible method. That’s the fundamental problem of using <code>getClass().getMethod(…)</code>. The reasons why the method is inaccessible or the circumstances under which the method happens to be accessible, may vary and are not important."},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674482333,"post_id":75053477,"comment_id":132716948,"body_markdown":"But @Holger,  `getClass().getMethod(…)` works if the module is open. JDK 16 made the default mode for modules strongly encapsulated.  That&#39;s why changing the module encapsulation allows `getClass().getMethod(…)` to work","body":"But @Holger,  <code>getClass().getMethod(…)</code> works if the module is open. JDK 16 made the default mode for modules strongly encapsulated.  That&#39;s why changing the module encapsulation allows <code>getClass().getMethod(…)</code> to work"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1674496018,"post_id":75053477,"comment_id":132721663,"body_markdown":"[Simple example](https://ideone.com/2uFBjH) which can reproduce the problem in all Java versions from 5 to 17. No module system required. `getClass().getMethod(…)` is not the right approach. The reason why the access fails in a particular use case is irrelevant.","body":"<a href=\"https://ideone.com/2uFBjH\" rel=\"nofollow noreferrer\">Simple example</a> which can reproduce the problem in all Java versions from 5 to 17. No module system required. <code>getClass().getMethod(…)</code> is not the right approach. The reason why the access fails in a particular use case is irrelevant."},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674525040,"post_id":75053477,"comment_id":132728148,"body_markdown":"@Holger you&#39;re not reading the full error message in the original question. It clearly references the module system. \n\n`(in module jdk.proxy2) because module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore`\n\nThere error goes away when you either export the package the class is in or define the module as open.\n\nSounds like the following JEP:  https://openjdk.org/jeps/396","body":"@Holger you&#39;re not reading the full error message in the original question. It clearly references the module system.   <code>(in module jdk.proxy2) because module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore</code>  There error goes away when you either export the package the class is in or define the module as open.  Sounds like the following JEP:  <a href=\"https://openjdk.org/jeps/396\" rel=\"nofollow noreferrer\">openjdk.org/jeps/396</a>"},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674526083,"post_id":75053477,"comment_id":132728275,"body_markdown":"Also, the example for the `ExecutorService` fails, since the `execute` method is package protected.  If you invoke a `public` method via `getClass().getMethod()` it works.  The example in the question is invoking a public method.\n\nAnother counter example:  https://ideone.com/MiyBIU","body":"Also, the example for the <code>ExecutorService</code> fails, since the <code>execute</code> method is package protected.  If you invoke a <code>public</code> method via <code>getClass().getMethod()</code> it works.  The example in the question is invoking a public method.  Another counter example:  <a href=\"https://ideone.com/MiyBIU\" rel=\"nofollow noreferrer\">ideone.com/MiyBIU</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1674546406,"post_id":75053477,"comment_id":132731183,"body_markdown":"As said, *the reasons why the method is inaccessible or the circumstances under which the method happens to be accessible, may vary and are not important.* `getClass().getMethod(…)` is not the right approach. Point. Stop bothering me with your irrelevant details.","body":"As said, <i>the reasons why the method is inaccessible or the circumstances under which the method happens to be accessible, may vary and are not important.</i> <code>getClass().getMethod(…)</code> is not the right approach. Point. Stop bothering me with your irrelevant details."},{"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"score":0,"creation_date":1674618225,"post_id":75053477,"comment_id":132751100,"body_markdown":"It&#39;s not an irrelevant detail @Holger.  Your answer is wrong.  Where does the Java documentation ever say &quot; the circumstances under which the method happens to be accessible, may vary and are not important&quot;.\n\nYou have several examples where `getClass().getMethod(...)` works.  You also are not understanding the original example and are not understanding the cause of the `IllegalAccessException` which make it clear that the strong encapsulation that is the default mode of the module system starting with JDK16 is the cause.  Please stop bothering people with your irrelevant code snippets.","body":"It&#39;s not an irrelevant detail @Holger.  Your answer is wrong.  Where does the Java documentation ever say &quot; the circumstances under which the method happens to be accessible, may vary and are not important&quot;.  You have several examples where <code>getClass().getMethod(...)</code> works.  You also are not understanding the original example and are not understanding the cause of the <code>IllegalAccessException</code> which make it clear that the strong encapsulation that is the default mode of the module system starting with JDK16 is the cause.  Please stop bothering people with your irrelevant code snippets."}],"answers":[{"tags":[],"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674618636,"creation_date":1674618636,"answer_id":75229541,"question_id":75053477,"body_markdown":"The reason the example in the question fails is due to changes in JDK 16 that make strong encapsulation of JDK internals the default setting as described in https://openjdk.org/jeps/396.\r\n\r\nJDK 9 introduced the module system and to aid in migration, weak encapsulation was the default setting.\r\n\r\nStarting with JDK 16, strong encapsulation is the default setting.  See the relevant detail in the JEP here as it relates to the example in the question:\r\n\r\n    In Java 9, we improved both the security and the maintainability of the JDK by leveraging modules to limit access to its internal elements. Modules provide strong encapsulation, which means that \r\n\r\n    Code outside of a module can only access the public and protected elements of the packages exported by that module\r\n\r\nThis is why exporting the package the `Coupon` class in the `module-info.java` file allows the above example to work:\r\n\r\n    exports ca.MyStore.domain.coupons\r\n\r\nAlternatively, one can define the module itself as an `open` module.  This works, but is probably not recommended.","title":"module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore","body":"<p>The reason the example in the question fails is due to changes in JDK 16 that make strong encapsulation of JDK internals the default setting as described in <a href=\"https://openjdk.org/jeps/396\" rel=\"nofollow noreferrer\">https://openjdk.org/jeps/396</a>.</p>\n<p>JDK 9 introduced the module system and to aid in migration, weak encapsulation was the default setting.</p>\n<p>Starting with JDK 16, strong encapsulation is the default setting.  See the relevant detail in the JEP here as it relates to the example in the question:</p>\n<pre><code>In Java 9, we improved both the security and the maintainability of the JDK by leveraging modules to limit access to its internal elements. Modules provide strong encapsulation, which means that \n\nCode outside of a module can only access the public and protected elements of the packages exported by that module\n</code></pre>\n<p>This is why exporting the package the <code>Coupon</code> class in the <code>module-info.java</code> file allows the above example to work:</p>\n<pre><code>exports ca.MyStore.domain.coupons\n</code></pre>\n<p>Alternatively, one can define the module itself as an <code>open</code> module.  This works, but is probably not recommended.</p>\n"}],"owner":{"account_id":1161729,"reputation":1762,"user_id":1233340,"accept_rate":56,"display_name":"timmy"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2733,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75229541,"answer_count":1,"score":0,"last_activity_date":1674618636,"creation_date":1673242205,"question_id":75053477,"body_markdown":"I&#39;m playing around with modules and am trying to use reflection to invoke a method on a proxy.  I get the following error:\r\n\r\n    java.lang.IllegalAccessException: class ca.example.MyStore.ProxyExample (in module ca.exampe.MyStore) cannot access class com.sun.proxy.jdk.proxy2.$Proxy10 (in module jdk.proxy2) because module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore\r\n\r\nHere is the method invocation on the proxy instance that causes the above exception when the default method is attempted to be invoked:\r\n\r\n```\r\n    public Object executeDefaultMethod() throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\r\n        // can not use Proxy when the app is modularized unless you specify that the module is open\r\n        // open module notes: https://stackoverflow.com/questions/53927375/how-do-java-module-directives-impact-reflection-access-into-a-module\r\n        Object proxy = Proxy.newProxyInstance(getSystemClassLoader(), new Class&lt;?&gt;[] { Coupon.class },\r\n                (prox, method, args) -&gt; {\r\n                    if (method.isDefault()) {\r\n                        // invokeDefault is new with Java 16\r\n                        return InvocationHandler.invokeDefault(prox, method, args);\r\n                    }\r\n                    return null;\r\n                }\r\n        );\r\n        Method method = proxy.getClass().getMethod(&quot;itemDiscount&quot;);\r\n        return method.invoke(proxy);\r\n    }\r\n```\r\n\r\n\r\nInterestingly, if I `open` the module, the code works.  Why is this?  The reflective call is happening within code that exists in the module.  What is this error telling me?\r\n","title":"module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore","body":"<p>I'm playing around with modules and am trying to use reflection to invoke a method on a proxy.  I get the following error:</p>\n<pre><code>java.lang.IllegalAccessException: class ca.example.MyStore.ProxyExample (in module ca.exampe.MyStore) cannot access class com.sun.proxy.jdk.proxy2.$Proxy10 (in module jdk.proxy2) because module jdk.proxy2 does not export com.sun.proxy.jdk.proxy2 to module ca.example.MyStore\n</code></pre>\n<p>Here is the method invocation on the proxy instance that causes the above exception when the default method is attempted to be invoked:</p>\n<pre><code>    public Object executeDefaultMethod() throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\n        // can not use Proxy when the app is modularized unless you specify that the module is open\n        // open module notes: https://stackoverflow.com/questions/53927375/how-do-java-module-directives-impact-reflection-access-into-a-module\n        Object proxy = Proxy.newProxyInstance(getSystemClassLoader(), new Class&lt;?&gt;[] { Coupon.class },\n                (prox, method, args) -&gt; {\n                    if (method.isDefault()) {\n                        // invokeDefault is new with Java 16\n                        return InvocationHandler.invokeDefault(prox, method, args);\n                    }\n                    return null;\n                }\n        );\n        Method method = proxy.getClass().getMethod(&quot;itemDiscount&quot;);\n        return method.invoke(proxy);\n    }\n</code></pre>\n<p>Interestingly, if I <code>open</code> the module, the code works.  Why is this?  The reflective call is happening within code that exists in the module.  What is this error telling me?</p>\n"},{"tags":["java","android","android-studio","android-contacts","contactscontract"],"comments":[{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":0,"creation_date":1456856533,"post_id":35728406,"comment_id":59135738,"body_markdown":"take a look to this answer http://stackoverflow.com/a/8802659/726954","body":"take a look to this answer <a href=\"http://stackoverflow.com/a/8802659/726954\">stackoverflow.com/a/8802659/726954</a>"},{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":1,"creation_date":1456856618,"post_id":35728406,"comment_id":59135785,"body_markdown":"Possible duplicate of [Modifying contact information](http://stackoverflow.com/questions/8788053/modifying-contact-information)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/8788053/modifying-contact-information\">Modifying contact information</a>"}],"answers":[{"tags":[],"owner":{"account_id":1142219,"reputation":868,"user_id":1125774,"display_name":"mohammad madani"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1674618369,"creation_date":1456901470,"answer_id":35740355,"question_id":35728406,"body_markdown":"&gt; [![enter image description here][1]][1]\r\n\r\n&lt;sup&gt;[Image][2] from [Get Contact Emails By Content Provider - Android Example][3]&lt;/sup&gt;\r\n\r\n            Cursor mRawContactCursor = context.getContentResolver().query(\r\n                ContactsContract.RawContacts.CONTENT_URI,\r\n                null,\r\n                ContactsContract.Data.CONTACT_ID + &quot; = ?&quot;,\r\n                new String[] {ID},\r\n                null);\r\n        mRawContactCursor.moveToFirst();\r\n        String rawId = mRawContactCursor.getString(mRawContactCursor.getColumnIndex(ContactsContract.RawContacts._ID));\r\n\r\n\r\nuse this code to find _ID or RAW_CONTACT_ID then update or insert to contact.\r\n\r\n            for (ContactEmail contactEmail : emails) {\r\n            values.put(ContactsContract.Data.RAW_CONTACT_ID, rawId);\r\n            values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);\r\n            values.put(ContactsContract.CommonDataKinds.Email.ADDRESS, &quot;a@a.com&quot;);\r\n            values.put(ContactsContract.CommonDataKinds.Email.TYPE, type.home);\r\n            contentResolver.insert(android.provider.ContactsContract.Data.CONTENT_URI, values);\r\n        }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T3vm5.png\r\n  [2]: https://androidexample.com/upload/content/Content_provider_get_email_workflow.png\r\n  [3]: https://androidexample.com/get-contact-emails-content-provider","title":"How to add new field to a contact in android","body":"<blockquote>\n<p><a href=\"https://i.stack.imgur.com/T3vm5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T3vm5.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n<p><sup><a href=\"https://androidexample.com/upload/content/Content_provider_get_email_workflow.png\" rel=\"nofollow noreferrer\">Image</a> from <a href=\"https://androidexample.com/get-contact-emails-content-provider\" rel=\"nofollow noreferrer\">Get Contact Emails By Content Provider - Android Example</a></sup></p>\n<pre><code>        Cursor mRawContactCursor = context.getContentResolver().query(\n            ContactsContract.RawContacts.CONTENT_URI,\n            null,\n            ContactsContract.Data.CONTACT_ID + &quot; = ?&quot;,\n            new String[] {ID},\n            null);\n    mRawContactCursor.moveToFirst();\n    String rawId = mRawContactCursor.getString(mRawContactCursor.getColumnIndex(ContactsContract.RawContacts._ID));\n</code></pre>\n<p>use this code to find _ID or RAW_CONTACT_ID then update or insert to contact.</p>\n<pre><code>        for (ContactEmail contactEmail : emails) {\n        values.put(ContactsContract.Data.RAW_CONTACT_ID, rawId);\n        values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);\n        values.put(ContactsContract.CommonDataKinds.Email.ADDRESS, &quot;a@a.com&quot;);\n        values.put(ContactsContract.CommonDataKinds.Email.TYPE, type.home);\n        contentResolver.insert(android.provider.ContactsContract.Data.CONTENT_URI, values);\n    }\n</code></pre>\n"}],"owner":{"account_id":2601646,"reputation":1457,"user_id":2253852,"display_name":"eliasetm"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1385,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":35740355,"answer_count":1,"score":2,"last_activity_date":1674618369,"creation_date":1456850276,"question_id":35728406,"body_markdown":"I want to add new email address to an exist contact.\r\n\r\nI use this code: \r\n\r\n        ArrayList&lt;ContentProviderOperation&gt; insertEmailList =\r\n                new ArrayList&lt;ContentProviderOperation&gt;();\r\n        Uri uri=null;\r\n        for (ContactEmail contactEmail : emails) {\r\n            values.put(ContactsContract.Data.RAW_CONTACT_ID, id);\r\n            values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);\r\n            values.put(ContactsContract.CommonDataKinds.Email.ADDRESS, contactEmail.getEmailAddress());\r\n            values.put(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_CUSTOM);\r\n            uri=contentResolver.insert(android.provider.ContactsContract.Data.CONTENT_URI, values);\r\n        }\r\n\r\nWhen run this code `uri` is `content://com.android.contacts/data/2135` but my contact is not updated.my app run without exception. ","title":"How to add new field to a contact in android","body":"<p>I want to add new email address to an exist contact.</p>\n\n<p>I use this code: </p>\n\n<pre><code>    ArrayList&lt;ContentProviderOperation&gt; insertEmailList =\n            new ArrayList&lt;ContentProviderOperation&gt;();\n    Uri uri=null;\n    for (ContactEmail contactEmail : emails) {\n        values.put(ContactsContract.Data.RAW_CONTACT_ID, id);\n        values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);\n        values.put(ContactsContract.CommonDataKinds.Email.ADDRESS, contactEmail.getEmailAddress());\n        values.put(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_CUSTOM);\n        uri=contentResolver.insert(android.provider.ContactsContract.Data.CONTENT_URI, values);\n    }\n</code></pre>\n\n<p>When run this code <code>uri</code> is <code>content://com.android.contacts/data/2135</code> but my contact is not updated.my app run without exception. </p>\n"},{"tags":["java","scala","apache-spark","jdbc","s4hana"],"owner":{"account_id":400545,"reputation":91,"user_id":766569,"display_name":"Santhosha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674617725,"creation_date":1674608503,"question_id":75228808,"body_markdown":"How to manage this cast?\r\n\r\n```\r\nscala.math.BigDecimal cannot be cast to java.math.BigDecimal\r\n```\r\nWhile Reading the data from Redshift and Writing to S4HANA via JDBC.\r\n\r\nJDBC Connection.\r\n```\r\nconnection_sap_options_pfd = {\r\n    &quot;url&quot;: db_url,\r\n    &quot;dbTable&quot;: &#39;dbTable_name&#39;,\r\n    &quot;user&quot;: db_username,\r\n    &quot;password&quot;:db_password,\r\n    &quot;customJdbcDriverS3Path&quot;: driver_path,\r\n    &quot;className&quot;: jdbc_driver_name\r\n}\r\n```\r\n\r\nWriting the dataframe\r\n```\r\nglueContext.write_dynamic_frame.from_options(frame = pfd_dynamicFrame, connection_type=&quot;custom.jdbc&quot;, \r\nconnection_options=connection_sap_options_pfd, \r\ntransformation_ctx = &quot;datasink_pfd&quot;)\r\n```\r\n`pfd_dynamicFrame` has one column which is of type `Decimal(4, 0)`\r\nwhile writing i have the below exception.\r\n\r\n```\r\npy4j.protocol.Py4JJavaError: An error occurred while calling o109.pyWriteDynamicFrame.\r\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 1 in stage 9.0 failed 4 times, most recent failure: Lost task 1.3 in stage 9.0 (TID 51) (44.109.37.157 executor 4): \r\njava.lang.ClassCastException: scala.math.BigDecimal cannot be cast to java.math.BigDecimal\r\n\tat org.apache.spark.sql.Row.getDecimal(Row.scala:285)\r\n\tat org.apache.spark.sql.Row.getDecimal$(Row.scala:285)\r\n\tat org.apache.spark.sql.catalyst.expressions.GenericRow.getDecimal(rows.scala:166)\r\n\tat com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.$anonfun$makeSetter$12(PartnerJDBCDataSink.scala:276)\r\n\tat com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.$anonfun$makeSetter$12$adapted(PartnerJDBCDataSink.scala:275)\r\n\tat com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.writePartition(PartnerJDBCDataSink.scala:163)\r\n\tat com.amazonaws.services.glue.marketplace.connector.GlueCustomDataSink.$anonfun$defaultWriteDynamicFrame$1(CustomDataSink.scala:82)\r\n\tat com.amazonaws.services.glue.marketplace.connector.GlueCustomDataSink.$anonfun$defaultWriteDynamicFrame$1$adapted(CustomDataSink.scala:71)\r\n\tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:138)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:548)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1516)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:551)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:750)\r\n```","title":"An error occurred while calling o109.pyWriteDynamicFrame. scala.math.BigDecimal cannot be cast to java.math.BigDecimal","body":"<p>How to manage this cast?</p>\n<pre><code>scala.math.BigDecimal cannot be cast to java.math.BigDecimal\n</code></pre>\n<p>While Reading the data from Redshift and Writing to S4HANA via JDBC.</p>\n<p>JDBC Connection.</p>\n<pre><code>connection_sap_options_pfd = {\n    &quot;url&quot;: db_url,\n    &quot;dbTable&quot;: 'dbTable_name',\n    &quot;user&quot;: db_username,\n    &quot;password&quot;:db_password,\n    &quot;customJdbcDriverS3Path&quot;: driver_path,\n    &quot;className&quot;: jdbc_driver_name\n}\n</code></pre>\n<p>Writing the dataframe</p>\n<pre><code>glueContext.write_dynamic_frame.from_options(frame = pfd_dynamicFrame, connection_type=&quot;custom.jdbc&quot;, \nconnection_options=connection_sap_options_pfd, \ntransformation_ctx = &quot;datasink_pfd&quot;)\n</code></pre>\n<p><code>pfd_dynamicFrame</code> has one column which is of type <code>Decimal(4, 0)</code>\nwhile writing i have the below exception.</p>\n<pre><code>py4j.protocol.Py4JJavaError: An error occurred while calling o109.pyWriteDynamicFrame.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 1 in stage 9.0 failed 4 times, most recent failure: Lost task 1.3 in stage 9.0 (TID 51) (44.109.37.157 executor 4): \njava.lang.ClassCastException: scala.math.BigDecimal cannot be cast to java.math.BigDecimal\n    at org.apache.spark.sql.Row.getDecimal(Row.scala:285)\n    at org.apache.spark.sql.Row.getDecimal$(Row.scala:285)\n    at org.apache.spark.sql.catalyst.expressions.GenericRow.getDecimal(rows.scala:166)\n    at com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.$anonfun$makeSetter$12(PartnerJDBCDataSink.scala:276)\n    at com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.$anonfun$makeSetter$12$adapted(PartnerJDBCDataSink.scala:275)\n    at com.amazonaws.services.glue.marketplace.partner.PartnerJDBCRecordWriter.writePartition(PartnerJDBCDataSink.scala:163)\n    at com.amazonaws.services.glue.marketplace.connector.GlueCustomDataSink.$anonfun$defaultWriteDynamicFrame$1(CustomDataSink.scala:82)\n    at com.amazonaws.services.glue.marketplace.connector.GlueCustomDataSink.$anonfun$defaultWriteDynamicFrame$1$adapted(CustomDataSink.scala:71)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:138)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:548)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1516)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:551)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n"},{"tags":["java","spring-data-jpa","spring-data","thymeleaf"],"owner":{"account_id":22036309,"reputation":23,"user_id":16302750,"display_name":"chengyu-guide"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1674617668,"creation_date":1673201035,"question_id":75050177,"body_markdown":"I have created a Thymeleaf form which has a field that accepts multiple values. I am attempting to map this list of fields to a JPA entity, but I keep getting the following error:\r\n\r\n```\r\ndefault message [Failed to convert property value of type &#39;java.lang.String&#39; to required type &#39;java.util.List&#39; for property &#39;equipmentExerciseList&#39;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;myproject.model.EquipmentExercise&#39; for property &#39;equipmentExerciseList[0]&#39;: no matching editors or conversion strategy found\r\n```\r\n\r\nI am following [this](https://youtu.be/ctwRpskAeIU?t=4803) tutorial, and a difference I see is that one of my entities has an embedded id, so I figure that must be causing my issues.\r\n\r\nBasically, I want to insert a new exercise into the database, with the exercise containing a list of required equipment. The required equipment must be chosen from a list existing in the database.\r\n\r\n## **Tables**\r\n\r\nI have an entity, Exercise, which logically can be performed with multiple props/pieces of equipment. Similarly, the pieces of equipment can be associated with multiple exercises. I have created a join table to handle this relationship, and I also have a third table which controls the equipment that can be selected:\r\n\r\n[![\\[Tables\\](https://i.stack.imgur.com/ewrjv.png)][1]][1]\r\n\r\n## **Code**\r\n\r\n### **Entities**\r\n\r\nExercise.java\r\n\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;Exercise&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@EqualsAndHashCode\r\npublic class Exercise implements Serializable {\r\n\r\n    @Id\r\n    @Column(name = &quot;exercise_name&quot;)\r\n    private String exerciseName;\r\n\r\n    // Others removed for brevity  \r\n\r\n    @OneToMany(mappedBy = &quot;exercise&quot;)\r\n    private List&lt;EquipmentExercise&gt; equipmentExerciseList; \r\n}\r\n```\r\n\r\nEquipmentExercise.java\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;EquipmentExercise&quot;)\r\n@ToString\r\npublic class EquipmentExercise implements Serializable {\r\n\r\n    @EmbeddedId\r\n    EquipmentExerciseId equipmentExerciseId;\r\n\r\n    @ManyToOne\r\n    @MapsId(&quot;exerciseName&quot;)\r\n    @JoinColumn(name = &quot;exercise_name&quot;)\r\n    Exercise exercise;\r\n\r\n    @ManyToOne\r\n    @MapsId(&quot;equipmentName&quot;)\r\n    @JoinColumn(name = &quot;equipment_name&quot;)\r\n    Equipment equipment;\r\n\r\n}\r\n```\r\n\r\nEquipmentExerciseId.java\r\n\r\n```\r\n@Embeddable\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\n@ToString\r\npublic class EquipmentExerciseId implements Serializable {\r\n    \r\n    @Column(name = &quot;equipment_name&quot;)\r\n    String equipmentName;\r\n\r\n    @Column(name = &quot;exercise_name&quot;)\r\n    String exercise_name;\r\n}\r\n```\r\n\r\nEquipment.java\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;Equipment&quot;)\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\npublic class Equipment {\r\n    \r\n    @Id\r\n    @Column(name = &quot;equipment_name&quot;)\r\n    String equipmentName;\r\n\r\n    @OneToMany(mappedBy = &quot;equipment&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;EquipmentExercise&gt; equipmentExerciseList;\r\n\r\n}\r\n```\r\n\r\n## \r\n\r\n## Attempted Solution 1\r\n\r\nAt first I retrieved a list of potential props from the Equipment table and used that to populate the options on the Thymeleaf form:\r\n\r\n### Controller\r\n\r\n```\r\n @GetMapping(&quot;/stretch&quot;)\r\n    public String addStretch(Model model){\r\n        List&lt;Equipment&gt; availableEquipmentList = equipmentService.findAllEquipment();\r\n        EquipmentExercise equipmentExercise = new EquipmentExercise();\r\n\r\n        model.addAttribute(&quot;exercise&quot;, new Exercise());\r\n        model.addAttribute(&quot;availableEquipmentList&quot;, availableEquipmentList);\r\n        model.addAttribute(&quot;EquipmentExercise&quot;, equipmentExercise);\r\n\r\n        return &quot;/add&quot;;\r\n}\r\n```\r\n\r\n### Thymeleaf Form\r\n\r\n```\r\n &lt;div class=&quot;mb-3&quot;&gt;\r\n    &lt;label for=&quot;exercise.equipmentExerciseList&quot; class=&quot;form-label&quot;&gt;Prop(s)&lt;/label&gt;\r\n    &lt;select th:field=&quot;${exercise.equipmentExerciseList}&quot; class=&quot;form-control&quot; multiple=&quot;multiple&quot; name = &quot;exercise.equipmentExerciseList&quot;&gt;\r\n       &lt;th:block th:each=&quot;equipment : ${availableEquipmentList}&quot;&gt;\r\n               &lt;option th:text=&quot;${equipment.equipmentName}&quot; th:value=&quot;${equipment.equipmentName}&quot; /&gt;\r\n       &lt;/th:block&gt;\r\n    &lt;/select&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\nbut I got the error from above.\r\n\r\n## Attempted Solution 2\r\n\r\nI did some digging here and discovered that the error probably is arising because the program did not know how to convert from Equipment to EquipmentExercise. So, I tried using an EquipmentExercise object instead of the Equipment object in the form, but I am still effectively getting the same error, just with a different object as the source of the error.\r\n\r\n```\r\n @GetMapping(&quot;/stretch&quot;)\r\n    public String addStretch(Model model){\r\n        List&lt;EquipmentExercise&gt; availableEquipmentList;\r\n\r\n        EquipmentExercise equipmentExercise = new EquipmentExercise();\r\n        EquipmentExerciseId equipmentExerciseId = new EquipmentExerciseId();\r\n        equipmentExercise.setEquipmentName = &quot;Test&quot;;\r\n        equipmentExercise.setEquipmentExerciseId(equipmentExerciseId);\r\n        availableEquipmentList.add(equipmentExercise);\r\n\r\n        model.addAttribute(&quot;exercise&quot;, new Exercise());\r\n        model.addAttribute(&quot;availableEquipmentList&quot;, availableEquipmentList);\r\n\r\n        return &quot;/add&quot;;\r\n}\r\n```\r\n\r\n### Thymeleaf Form\r\n\r\n```\r\n &lt;div class=&quot;mb-3&quot;&gt;\r\n    &lt;label for=&quot;exercise.equipmentList&quot; class=&quot;form-label&quot;&gt;Prop(s)&lt;/label&gt;\r\n    &lt;select th:field=&quot;${exercise.equipmentList}&quot; class=&quot;form-control&quot; multiple=&quot;multiple&quot; name = &quot;exercise.equipmentList&quot;  &gt;\r\n       &lt;th:block th:each=&quot;equipmentExercise : ${equipmentExerciseList}&quot;&gt;\r\n           &lt;option th:text=&quot;${equipmentExercise.getEquipmentExerciseId().getEquipmentName()}&quot; th:value=&quot;${equipmentExercise}&quot; /&gt;\r\n       &lt;/th:block&gt;\r\n    &lt;/select&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\n### Error\r\n\r\n```\r\nField error in object &#39;exercise&#39; on field &#39;equipmentExerciseList&#39;: rejected value [EquipmentExercise(equipmentExerciseId=EquipmentExerciseId(equipmentName=Test, exerciseName=null), exercise=null, equipment=null)]; codes [typeMismatch.exercise.equipmentExerciselist,typeMismatch.equipmentExerciseList,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [exercise.equipmentExerciseList,equipmentExerciseList]; arguments []; default message [equipmentExerciseList]]; default message [Failed to convert property value of type &#39;java.lang.String&#39; to required type &#39;java.util.List&#39; for property &#39;propList&#39;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;myproject.model.EquipmentExercise&#39; for property &#39;equipmentExerciseList[0]&#39;: no matching editors or conversion strategy found]\r\n```\r\n\r\n\r\n----------\r\n**Update**\r\n\r\nI have confirmed my suspicion that the issue stems from the composite id, but I do not yet have a solution. \r\n\r\nTo confirm, I found [this][2] similar question, where one of the answers explains that the th:value is supposed to map to a primary key, which Spring then uses behind the scenes to generate the requested object. I am guessing that the th:values I&#39;ve provided are too ambiguous (due to the composite key) for Spring to map correctly. \r\n\r\nI looked into a custom converter, and was able to get Spring to generate an Exercise object using this, but understandably, the values the other fields in my EquipmentExercise class didn&#39;t map \r\n\r\n```\r\n@Override\r\npublic EquipmentExercise convert(String equipmentName){\r\n    \r\n    EquipmentExercise equipmentExercise = new EquipmentExercise();\r\n    EquipmentExerciseId equipmentExerciseId = new EquipmentExerciseId();\r\n    equipmentExerciseId.setEquipmentName(equipmentName);\r\n    equipmentExercise.setEquipmentExerciseId(equipmentExerciseId);\r\n       \r\n    return equipmentExercise;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pY0wN.png\r\n  [2]: https://stackoverflow.com/questions/25234357/select-tag-with-object-thymeleaf-and-spring-mvc/30430218","title":"Spring JPA, Thymeleaf - Bind Form List to Entity with EmbeddedId (OneToMany; ManyToOne)","body":"<p>I have created a Thymeleaf form which has a field that accepts multiple values. I am attempting to map this list of fields to a JPA entity, but I keep getting the following error:</p>\n<pre><code>default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.List' for property 'equipmentExerciseList'; nested exception is java.lang.IllegalStateException: Cannot convert value of type 'java.lang.String' to required type 'myproject.model.EquipmentExercise' for property 'equipmentExerciseList[0]': no matching editors or conversion strategy found\n</code></pre>\n<p>I am following <a href=\"https://youtu.be/ctwRpskAeIU?t=4803\" rel=\"nofollow noreferrer\">this</a> tutorial, and a difference I see is that one of my entities has an embedded id, so I figure that must be causing my issues.</p>\n<p>Basically, I want to insert a new exercise into the database, with the exercise containing a list of required equipment. The required equipment must be chosen from a list existing in the database.</p>\n<h2><strong>Tables</strong></h2>\n<p>I have an entity, Exercise, which logically can be performed with multiple props/pieces of equipment. Similarly, the pieces of equipment can be associated with multiple exercises. I have created a join table to handle this relationship, and I also have a third table which controls the equipment that can be selected:</p>\n<p><a href=\"https://i.stack.imgur.com/pY0wN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pY0wN.png\" alt=\"[Tables](https://i.stack.imgur.com/ewrjv.png)\" /></a></p>\n<h2><strong>Code</strong></h2>\n<h3><strong>Entities</strong></h3>\n<p>Exercise.java</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;Exercise&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode\npublic class Exercise implements Serializable {\n\n    @Id\n    @Column(name = &quot;exercise_name&quot;)\n    private String exerciseName;\n\n    // Others removed for brevity  \n\n    @OneToMany(mappedBy = &quot;exercise&quot;)\n    private List&lt;EquipmentExercise&gt; equipmentExerciseList; \n}\n</code></pre>\n<p>EquipmentExercise.java</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Table(name = &quot;EquipmentExercise&quot;)\n@ToString\npublic class EquipmentExercise implements Serializable {\n\n    @EmbeddedId\n    EquipmentExerciseId equipmentExerciseId;\n\n    @ManyToOne\n    @MapsId(&quot;exerciseName&quot;)\n    @JoinColumn(name = &quot;exercise_name&quot;)\n    Exercise exercise;\n\n    @ManyToOne\n    @MapsId(&quot;equipmentName&quot;)\n    @JoinColumn(name = &quot;equipment_name&quot;)\n    Equipment equipment;\n\n}\n</code></pre>\n<p>EquipmentExerciseId.java</p>\n<pre><code>@Embeddable\n@Getter\n@Setter\n@EqualsAndHashCode\n@ToString\npublic class EquipmentExerciseId implements Serializable {\n    \n    @Column(name = &quot;equipment_name&quot;)\n    String equipmentName;\n\n    @Column(name = &quot;exercise_name&quot;)\n    String exercise_name;\n}\n</code></pre>\n<p>Equipment.java</p>\n<pre><code>@Entity\n@Table(name = &quot;Equipment&quot;)\n@Getter\n@Setter\n@EqualsAndHashCode\npublic class Equipment {\n    \n    @Id\n    @Column(name = &quot;equipment_name&quot;)\n    String equipmentName;\n\n    @OneToMany(mappedBy = &quot;equipment&quot;, cascade = CascadeType.ALL)\n    private List&lt;EquipmentExercise&gt; equipmentExerciseList;\n\n}\n</code></pre>\n<h2></h2>\n<h2>Attempted Solution 1</h2>\n<p>At first I retrieved a list of potential props from the Equipment table and used that to populate the options on the Thymeleaf form:</p>\n<h3>Controller</h3>\n<pre><code> @GetMapping(&quot;/stretch&quot;)\n    public String addStretch(Model model){\n        List&lt;Equipment&gt; availableEquipmentList = equipmentService.findAllEquipment();\n        EquipmentExercise equipmentExercise = new EquipmentExercise();\n\n        model.addAttribute(&quot;exercise&quot;, new Exercise());\n        model.addAttribute(&quot;availableEquipmentList&quot;, availableEquipmentList);\n        model.addAttribute(&quot;EquipmentExercise&quot;, equipmentExercise);\n\n        return &quot;/add&quot;;\n}\n</code></pre>\n<h3>Thymeleaf Form</h3>\n<pre><code> &lt;div class=&quot;mb-3&quot;&gt;\n    &lt;label for=&quot;exercise.equipmentExerciseList&quot; class=&quot;form-label&quot;&gt;Prop(s)&lt;/label&gt;\n    &lt;select th:field=&quot;${exercise.equipmentExerciseList}&quot; class=&quot;form-control&quot; multiple=&quot;multiple&quot; name = &quot;exercise.equipmentExerciseList&quot;&gt;\n       &lt;th:block th:each=&quot;equipment : ${availableEquipmentList}&quot;&gt;\n               &lt;option th:text=&quot;${equipment.equipmentName}&quot; th:value=&quot;${equipment.equipmentName}&quot; /&gt;\n       &lt;/th:block&gt;\n    &lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n<p>but I got the error from above.</p>\n<h2>Attempted Solution 2</h2>\n<p>I did some digging here and discovered that the error probably is arising because the program did not know how to convert from Equipment to EquipmentExercise. So, I tried using an EquipmentExercise object instead of the Equipment object in the form, but I am still effectively getting the same error, just with a different object as the source of the error.</p>\n<pre><code> @GetMapping(&quot;/stretch&quot;)\n    public String addStretch(Model model){\n        List&lt;EquipmentExercise&gt; availableEquipmentList;\n\n        EquipmentExercise equipmentExercise = new EquipmentExercise();\n        EquipmentExerciseId equipmentExerciseId = new EquipmentExerciseId();\n        equipmentExercise.setEquipmentName = &quot;Test&quot;;\n        equipmentExercise.setEquipmentExerciseId(equipmentExerciseId);\n        availableEquipmentList.add(equipmentExercise);\n\n        model.addAttribute(&quot;exercise&quot;, new Exercise());\n        model.addAttribute(&quot;availableEquipmentList&quot;, availableEquipmentList);\n\n        return &quot;/add&quot;;\n}\n</code></pre>\n<h3>Thymeleaf Form</h3>\n<pre><code> &lt;div class=&quot;mb-3&quot;&gt;\n    &lt;label for=&quot;exercise.equipmentList&quot; class=&quot;form-label&quot;&gt;Prop(s)&lt;/label&gt;\n    &lt;select th:field=&quot;${exercise.equipmentList}&quot; class=&quot;form-control&quot; multiple=&quot;multiple&quot; name = &quot;exercise.equipmentList&quot;  &gt;\n       &lt;th:block th:each=&quot;equipmentExercise : ${equipmentExerciseList}&quot;&gt;\n           &lt;option th:text=&quot;${equipmentExercise.getEquipmentExerciseId().getEquipmentName()}&quot; th:value=&quot;${equipmentExercise}&quot; /&gt;\n       &lt;/th:block&gt;\n    &lt;/select&gt;\n&lt;/div&gt;\n</code></pre>\n<h3>Error</h3>\n<pre><code>Field error in object 'exercise' on field 'equipmentExerciseList': rejected value [EquipmentExercise(equipmentExerciseId=EquipmentExerciseId(equipmentName=Test, exerciseName=null), exercise=null, equipment=null)]; codes [typeMismatch.exercise.equipmentExerciselist,typeMismatch.equipmentExerciseList,typeMismatch.java.util.List,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [exercise.equipmentExerciseList,equipmentExerciseList]; arguments []; default message [equipmentExerciseList]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.List' for property 'propList'; nested exception is java.lang.IllegalStateException: Cannot convert value of type 'java.lang.String' to required type 'myproject.model.EquipmentExercise' for property 'equipmentExerciseList[0]': no matching editors or conversion strategy found]\n</code></pre>\n<hr />\n<p><strong>Update</strong></p>\n<p>I have confirmed my suspicion that the issue stems from the composite id, but I do not yet have a solution.</p>\n<p>To confirm, I found <a href=\"https://stackoverflow.com/questions/25234357/select-tag-with-object-thymeleaf-and-spring-mvc/30430218\">this</a> similar question, where one of the answers explains that the th:value is supposed to map to a primary key, which Spring then uses behind the scenes to generate the requested object. I am guessing that the th:values I've provided are too ambiguous (due to the composite key) for Spring to map correctly.</p>\n<p>I looked into a custom converter, and was able to get Spring to generate an Exercise object using this, but understandably, the values the other fields in my EquipmentExercise class didn't map</p>\n<pre><code>@Override\npublic EquipmentExercise convert(String equipmentName){\n    \n    EquipmentExercise equipmentExercise = new EquipmentExercise();\n    EquipmentExerciseId equipmentExerciseId = new EquipmentExerciseId();\n    equipmentExerciseId.setEquipmentName(equipmentName);\n    equipmentExercise.setEquipmentExerciseId(equipmentExerciseId);\n       \n    return equipmentExercise;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1674655100,"post_id":75229468,"comment_id":132760598,"body_markdown":"You don&#39;t need `@Transactional` on the listener method - the container will start the transaction (but that shouldn&#39;t be causing the problem). DEBUG logging should help understand why an attempt to call `beginTransaction` is made while we already have  a transaction. It also looks like you are doing some async processing, which is not recommended because the ack will be completed before the work.","body":"You don&#39;t need <code>@Transactional</code> on the listener method - the container will start the transaction (but that shouldn&#39;t be causing the problem). DEBUG logging should help understand why an attempt to call <code>beginTransaction</code> is made while we already have  a transaction. It also looks like you are doing some async processing, which is not recommended because the ack will be completed before the work."},{"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"score":0,"creation_date":1674703609,"post_id":75229468,"comment_id":132772813,"body_markdown":"@GaryRussell As far as the async processing is concerned, I am scheduling a job to process the message at a later time due to our very low timeouts for ACK. I&#39;ll try to see the DEBUG logs as you have suggested...","body":"@GaryRussell As far as the async processing is concerned, I am scheduling a job to process the message at a later time due to our very low timeouts for ACK. I&#39;ll try to see the DEBUG logs as you have suggested..."},{"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"score":0,"creation_date":1674738910,"post_id":75229468,"comment_id":132780532,"body_markdown":"@GaryRussell Kafka is deployed in confluent. There are three partitions in the topic. Two instances of an ECS service are consuming from these partitions. By any chance, can this be causing a problem?","body":"@GaryRussell Kafka is deployed in confluent. There are three partitions in the topic. Two instances of an ECS service are consuming from these partitions. By any chance, can this be causing a problem?"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1674740363,"post_id":75229468,"comment_id":132780963,"body_markdown":"Right, but you are acking the record before the async processing is complete. That&#39;s ok if you don&#39;t mind losing records. This has nothing to do with multiple instances, it means a transaction is already in progress but we are trying to start it again for some reason.","body":"Right, but you are acking the record before the async processing is complete. That&#39;s ok if you don&#39;t mind losing records. This has nothing to do with multiple instances, it means a transaction is already in progress but we are trying to start it again for some reason."},{"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"score":0,"creation_date":1674740752,"post_id":75229468,"comment_id":132781095,"body_markdown":"The reason why I suspect multiple instances is, the possibility of having a misconfiguration that causes a transaction to be initiated on a message which is already in transaction.","body":"The reason why I suspect multiple instances is, the possibility of having a misconfiguration that causes a transaction to be initiated on a message which is already in transaction."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1674746305,"post_id":75229468,"comment_id":132783202,"body_markdown":"No; transactions are local to the current instance.","body":"No; transactions are local to the current instance."},{"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"score":0,"creation_date":1678192341,"post_id":75229468,"comment_id":133482206,"body_markdown":"@GaryRussell I am sorry for the delayed response. Can you tell me if the following is a possibility?\n1. Consumer (having `@Transactional`) starts consuming a message with offset `x` in a transaction; offset is not acknowledged yet; Spring transaction is still incomplete\n2. Kafka cluster triggers a consumer rebalance\n3. Consumer gets the same partition assigned. Since `x` is still not acknowledged, so the consumer starts consuming again.","body":"@GaryRussell I am sorry for the delayed response. Can you tell me if the following is a possibility? 1. Consumer (having <code>@Transactional</code>) starts consuming a message with offset <code>x</code> in a transaction; offset is not acknowledged yet; Spring transaction is still incomplete 2. Kafka cluster triggers a consumer rebalance 3. Consumer gets the same partition assigned. Since <code>x</code> is still not acknowledged, so the consumer starts consuming again."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1678199441,"post_id":75229468,"comment_id":133484239,"body_markdown":"Yes, it&#39;s possible if the time to process the records from a `poll()` exceeds `max.poll.interval.ms`. You must ensure the number of records returned by a poll can be processed within that interval, you can reduce `max.poll.records` and/or increase the interval.","body":"Yes, it&#39;s possible if the time to process the records from a <code>poll()</code> exceeds <code>max.poll.interval.ms</code>. You must ensure the number of records returned by a poll can be processed within that interval, you can reduce <code>max.poll.records</code> and/or increase the interval."}],"owner":{"account_id":3762449,"reputation":1696,"user_id":3126973,"accept_rate":54,"display_name":"Romeo Sierra"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674617565,"creation_date":1674617565,"question_id":75229468,"body_markdown":"I am getting the following exception in the Kafka consumer in my AWS ECS service.\r\n\r\n```bash\r\norg.springframework.transaction.CannotCreateTransactionException: Could not create Kafka transaction; nested exception is org.apache.kafka.common.KafkaException: TransactionalId item-availability-view-tx:41e90b10-0690-487b-8a26-9a4dcb295fbditem_availability_view_service_menu_item_changes.MENU_ITEMS_CHANGE_SYNC_FOR_86N.2: Invalid transition attempted from state IN_TRANSACTION to state IN_TRANSACTION\r\n\tat org.springframework.kafka.transaction.KafkaTransactionManager.doBegin(KafkaTransactionManager.java:162) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:137) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListenerInTx(KafkaMessageListenerContainer.java:1621) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:1596) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:1330) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1062) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:970) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\r\nCaused by: org.apache.kafka.common.KafkaException: TransactionalId item-availability-view-tx:41e90b10-0690-487b-8a26-9a4dcb295fbditem_availability_view_service_menu_item_changes.MENU_ITEMS_CHANGE_SYNC_FOR_86N.2: Invalid transition attempted from state IN_TRANSACTION to state IN_TRANSACTION\r\n\tat org.apache.kafka.clients.producer.internals.TransactionManager.transitionTo(TransactionManager.java:1053) ~[kafka-clients-2.5.0.jar:na]\r\n\tat org.apache.kafka.clients.producer.internals.TransactionManager.transitionTo(TransactionManager.java:1046) ~[kafka-clients-2.5.0.jar:na]\r\n\tat org.apache.kafka.clients.producer.internals.TransactionManager.beginTransaction(TransactionManager.java:338) ~[kafka-clients-2.5.0.jar:na]\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.beginTransaction(KafkaProducer.java:612) ~[kafka-clients-2.5.0.jar:na]\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.beginTransaction(DefaultKafkaProducerFactory.java:795) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat brave.kafka.clients.TracingProducer.beginTransaction(TracingProducer.java:69) ~[brave-instrumentation-kafka-clients-5.12.7.jar:na]\r\n\tat org.springframework.kafka.core.ProducerFactoryUtils.getTransactionalResourceHolder(ProducerFactoryUtils.java:99) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n\tat org.springframework.kafka.transaction.KafkaTransactionManager.doBegin(KafkaTransactionManager.java:146) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\r\n```\r\n\r\nThe consumer is defined as follows.\r\n\r\n```java\r\npublic interface UpdateSyncConsumer {\r\n  @KafkaListener(\r\n      id = &quot;update_sync_consumer&quot;,\r\n      topics = &quot;${app.kafka.topics.UPDATES_TOPIC}&quot;,\r\n      containerFactory = &quot;updatesListenerFactory&quot;)\r\n  @Transactional\r\n  void handleUpdate(\r\n      ConsumerRecord&lt;String, UpdateAvro&gt; consumerRecord, Acknowledgment ack);\r\n}\r\n```\r\n\r\nAnd, the consumer is implemented as follows.\r\n\r\n```java\r\n@Component\r\n@Log4j2\r\n@RequiredArgsConstructor\r\npublic class DefaultUpdateSyncConsumer implements\r\n    UpdateSyncConsumer {\r\n\r\n  private final UpdateAvroMapper avroMapper;\r\n  private final UpdateJobScheduler updateJobScheduler;\r\n\r\n  @Override\r\n  public void handleUpdate(\r\n      final ConsumerRecord&lt;String, UpdateAvro&gt; consumerRecord,\r\n      final Acknowledgment ack) {\r\n    try {\r\n      log.info(\r\n          &quot;Scheduling Update Sync: payload: {} count:{}&quot;,\r\n          consumerRecord.value(),\r\n          consumerRecord.value().getItemIds().size());\r\n\r\n      updateJobScheduler.scheduleUpdateSyncAttempt(avroMapper.map(consumerRecord.value()));\r\n      log.info(&quot;Scheduled Update Sync: DONE&quot;);\r\n    } catch (Exception e) {\r\n      log.error(&quot;ERROR: Scheduling Update Sync: {}&quot;, Throwables.getStackTraceAsString(e));\r\n    } finally {\r\n      ack.acknowledge();\r\n      log.info(&quot;Acknowledged: {}&quot;, consumerRecord.key());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nConsumer configuration is as follows.\r\n\r\n```java\r\n@Log4j2\r\n@EnableKafka\r\n@Configuration\r\n@RequiredArgsConstructor\r\npublic class KafkaConsumerConfig extends KafkaBasicConfig {\r\n\r\n  private final KafkaTemplate&lt;String, Object&gt; kafkaTemplate;\r\n\r\n  @Bean\r\n  public ConsumerFactory&lt;String, Object&gt; consumerFactory() {\r\n    Map&lt;String, Object&gt; basicConfig = getBasicConfig();\r\n    basicConfig.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;latest&quot;);\r\n    basicConfig.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n    basicConfig.put(ConsumerConfig.ISOLATION_LEVEL_CONFIG, &quot;read_committed&quot;);\r\n    basicConfig\r\n        .put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\r\n    basicConfig.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\r\n    basicConfig\r\n        .put(ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS, StringDeserializer.class.getName());\r\n    basicConfig.put(ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS,\r\n        KafkaAvroDeserializer.class.getName());\r\n    basicConfig.put(KafkaAvroDeserializerConfig.SPECIFIC_AVRO_READER_CONFIG, true);\r\n    return new DefaultKafkaConsumerFactory&lt;&gt;(basicConfig);\r\n  }\r\n\r\n  @Bean(name = &quot;updatesListenerFactory&quot;)\r\n  public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; kafkaListenerContainerFactory(\r\n      KafkaTransactionManager&lt;String, Object&gt; ktm) {\r\n    ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory =\r\n        new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n    factory.setConcurrency(6);\r\n    factory.setConsumerFactory(consumerFactory());\r\n    factory.getContainerProperties().setTransactionManager(ktm);\r\n    factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\r\n    factory.setAfterRollbackProcessor(afterRollbackProcessor());\r\n    return factory;\r\n  }\r\n\r\n  private DefaultAfterRollbackProcessor&lt;String, Object&gt; afterRollbackProcessor() {\r\n    DefaultAfterRollbackProcessor&lt;String, Object&gt; processor =\r\n        new DefaultAfterRollbackProcessor&lt;&gt;((rec, exception) -&gt; {\r\n          log.error(\r\n              &quot;!!!!!!!!!!! Following Record keeps failing despite multiple attempts, therefore would be skipped !! : &quot;\r\n                  + rec);\r\n          log.error(exception);\r\n        }, new FixedBackOff(1000L, 2L));\r\n    processor.setCommitRecovered(true);\r\n    processor.setKafkaTemplate(kafkaTemplate);\r\n    processor.setLogLevel(KafkaException.Level.ERROR);\r\n    processor.addNotRetryableException(SerializationException.class);\r\n    return processor;\r\n  }\r\n}\r\n```\r\n\r\nThe topic is configured with three (03) partitions and the service has two instances in AWS meaning, there are two consumers polling on 3 topics.\r\n\r\nThe exception mentioned above causes the consumers to stop consumption. Can someone see what&#39;s causing this issue?","title":"Kafka Consumers (in Confluent Cloud) stops consumption after Exception","body":"<p>I am getting the following exception in the Kafka consumer in my AWS ECS service.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>org.springframework.transaction.CannotCreateTransactionException: Could not create Kafka transaction; nested exception is org.apache.kafka.common.KafkaException: TransactionalId item-availability-view-tx:41e90b10-0690-487b-8a26-9a4dcb295fbditem_availability_view_service_menu_item_changes.MENU_ITEMS_CHANGE_SYNC_FOR_86N.2: Invalid transition attempted from state IN_TRANSACTION to state IN_TRANSACTION\n    at org.springframework.kafka.transaction.KafkaTransactionManager.doBegin(KafkaTransactionManager.java:162) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:137) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListenerInTx(KafkaMessageListenerContainer.java:1621) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeRecordListener(KafkaMessageListenerContainer.java:1596) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.invokeListener(KafkaMessageListenerContainer.java:1330) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.pollAndInvoke(KafkaMessageListenerContainer.java:1062) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.kafka.listener.KafkaMessageListenerContainer$ListenerConsumer.run(KafkaMessageListenerContainer.java:970) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n    at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: org.apache.kafka.common.KafkaException: TransactionalId item-availability-view-tx:41e90b10-0690-487b-8a26-9a4dcb295fbditem_availability_view_service_menu_item_changes.MENU_ITEMS_CHANGE_SYNC_FOR_86N.2: Invalid transition attempted from state IN_TRANSACTION to state IN_TRANSACTION\n    at org.apache.kafka.clients.producer.internals.TransactionManager.transitionTo(TransactionManager.java:1053) ~[kafka-clients-2.5.0.jar:na]\n    at org.apache.kafka.clients.producer.internals.TransactionManager.transitionTo(TransactionManager.java:1046) ~[kafka-clients-2.5.0.jar:na]\n    at org.apache.kafka.clients.producer.internals.TransactionManager.beginTransaction(TransactionManager.java:338) ~[kafka-clients-2.5.0.jar:na]\n    at org.apache.kafka.clients.producer.KafkaProducer.beginTransaction(KafkaProducer.java:612) ~[kafka-clients-2.5.0.jar:na]\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.beginTransaction(DefaultKafkaProducerFactory.java:795) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at brave.kafka.clients.TracingProducer.beginTransaction(TracingProducer.java:69) ~[brave-instrumentation-kafka-clients-5.12.7.jar:na]\n    at org.springframework.kafka.core.ProducerFactoryUtils.getTransactionalResourceHolder(ProducerFactoryUtils.java:99) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n    at org.springframework.kafka.transaction.KafkaTransactionManager.doBegin(KafkaTransactionManager.java:146) ~[spring-kafka-2.5.0.RELEASE.jar:2.5.0.RELEASE]\n</code></pre>\n<p>The consumer is defined as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UpdateSyncConsumer {\n  @KafkaListener(\n      id = &quot;update_sync_consumer&quot;,\n      topics = &quot;${app.kafka.topics.UPDATES_TOPIC}&quot;,\n      containerFactory = &quot;updatesListenerFactory&quot;)\n  @Transactional\n  void handleUpdate(\n      ConsumerRecord&lt;String, UpdateAvro&gt; consumerRecord, Acknowledgment ack);\n}\n</code></pre>\n<p>And, the consumer is implemented as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Log4j2\n@RequiredArgsConstructor\npublic class DefaultUpdateSyncConsumer implements\n    UpdateSyncConsumer {\n\n  private final UpdateAvroMapper avroMapper;\n  private final UpdateJobScheduler updateJobScheduler;\n\n  @Override\n  public void handleUpdate(\n      final ConsumerRecord&lt;String, UpdateAvro&gt; consumerRecord,\n      final Acknowledgment ack) {\n    try {\n      log.info(\n          &quot;Scheduling Update Sync: payload: {} count:{}&quot;,\n          consumerRecord.value(),\n          consumerRecord.value().getItemIds().size());\n\n      updateJobScheduler.scheduleUpdateSyncAttempt(avroMapper.map(consumerRecord.value()));\n      log.info(&quot;Scheduled Update Sync: DONE&quot;);\n    } catch (Exception e) {\n      log.error(&quot;ERROR: Scheduling Update Sync: {}&quot;, Throwables.getStackTraceAsString(e));\n    } finally {\n      ack.acknowledge();\n      log.info(&quot;Acknowledged: {}&quot;, consumerRecord.key());\n    }\n  }\n}\n</code></pre>\n<p>Consumer configuration is as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Log4j2\n@EnableKafka\n@Configuration\n@RequiredArgsConstructor\npublic class KafkaConsumerConfig extends KafkaBasicConfig {\n\n  private final KafkaTemplate&lt;String, Object&gt; kafkaTemplate;\n\n  @Bean\n  public ConsumerFactory&lt;String, Object&gt; consumerFactory() {\n    Map&lt;String, Object&gt; basicConfig = getBasicConfig();\n    basicConfig.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;latest&quot;);\n    basicConfig.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n    basicConfig.put(ConsumerConfig.ISOLATION_LEVEL_CONFIG, &quot;read_committed&quot;);\n    basicConfig\n        .put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\n    basicConfig.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, ErrorHandlingDeserializer.class);\n    basicConfig\n        .put(ErrorHandlingDeserializer.KEY_DESERIALIZER_CLASS, StringDeserializer.class.getName());\n    basicConfig.put(ErrorHandlingDeserializer.VALUE_DESERIALIZER_CLASS,\n        KafkaAvroDeserializer.class.getName());\n    basicConfig.put(KafkaAvroDeserializerConfig.SPECIFIC_AVRO_READER_CONFIG, true);\n    return new DefaultKafkaConsumerFactory&lt;&gt;(basicConfig);\n  }\n\n  @Bean(name = &quot;updatesListenerFactory&quot;)\n  public ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; kafkaListenerContainerFactory(\n      KafkaTransactionManager&lt;String, Object&gt; ktm) {\n    ConcurrentKafkaListenerContainerFactory&lt;String, Object&gt; factory =\n        new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    factory.setConcurrency(6);\n    factory.setConsumerFactory(consumerFactory());\n    factory.getContainerProperties().setTransactionManager(ktm);\n    factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\n    factory.setAfterRollbackProcessor(afterRollbackProcessor());\n    return factory;\n  }\n\n  private DefaultAfterRollbackProcessor&lt;String, Object&gt; afterRollbackProcessor() {\n    DefaultAfterRollbackProcessor&lt;String, Object&gt; processor =\n        new DefaultAfterRollbackProcessor&lt;&gt;((rec, exception) -&gt; {\n          log.error(\n              &quot;!!!!!!!!!!! Following Record keeps failing despite multiple attempts, therefore would be skipped !! : &quot;\n                  + rec);\n          log.error(exception);\n        }, new FixedBackOff(1000L, 2L));\n    processor.setCommitRecovered(true);\n    processor.setKafkaTemplate(kafkaTemplate);\n    processor.setLogLevel(KafkaException.Level.ERROR);\n    processor.addNotRetryableException(SerializationException.class);\n    return processor;\n  }\n}\n</code></pre>\n<p>The topic is configured with three (03) partitions and the service has two instances in AWS meaning, there are two consumers polling on 3 topics.</p>\n<p>The exception mentioned above causes the consumers to stop consumption. Can someone see what's causing this issue?</p>\n"},{"tags":["java","arrays","junit"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674179029,"post_id":75179797,"comment_id":132665240,"body_markdown":"You&#39;ll need to at least show us the output of the test.","body":"You&#39;ll need to at least show us the output of the test."},{"owner":{"account_id":20526095,"reputation":238,"user_id":15064501,"display_name":"Alex"},"score":0,"creation_date":1674179271,"post_id":75179797,"comment_id":132665268,"body_markdown":"@tgdavies I edited the question to include the output now.","body":"@tgdavies I edited the question to include the output now."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674179509,"post_id":75179797,"comment_id":132665290,"body_markdown":"Given that your image is 2x2, I&#39;d start by dumping all the data for the expected and actual images.","body":"Given that your image is 2x2, I&#39;d start by dumping all the data for the expected and actual images."},{"owner":{"account_id":20526095,"reputation":238,"user_id":15064501,"display_name":"Alex"},"score":0,"creation_date":1674179877,"post_id":75179797,"comment_id":132665336,"body_markdown":"@tgdavies when I do that the values I get are 50.8,\n101.6,\n152.39999999999998,\n203.2","body":"@tgdavies when I do that the values I get are 50.8, 101.6, 152.39999999999998, 203.2"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674191900,"post_id":75179797,"comment_id":132665518,"body_markdown":"That&#39;s one of the images -- you haven&#39;t said whether it&#39;s the expected or actual. Dumpt the contents of the other one too.","body":"That&#39;s one of the images -- you haven&#39;t said whether it&#39;s the expected or actual. Dumpt the contents of the other one too."}],"answers":[{"tags":[],"owner":{"account_id":20526095,"reputation":238,"user_id":15064501,"display_name":"Alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674617272,"creation_date":1674617272,"answer_id":75229445,"question_id":75179797,"body_markdown":"I was able to fix my code the issue was that normalized2DArray[y][x] = newPixelValue; should have actually been normalized2DArray[x][y] = newPixelValue;","title":"Struggling to set the average brightness of a grayscale image","body":"<p>I was able to fix my code the issue was that normalized2DArray[y][x] = newPixelValue; should have actually been normalized2DArray[x][y] = newPixelValue;</p>\n"}],"owner":{"account_id":20526095,"reputation":238,"user_id":15064501,"display_name":"Alex"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75229445,"answer_count":1,"score":0,"last_activity_date":1674617272,"creation_date":1674177840,"question_id":75179797,"body_markdown":"I am having an issue passing a JUnit test that I know is implemented correctly and I&#39;m not sure why it is failing. The code below should grab each pixel (pixel = a point in the array exe: 2dArray[0][0]). Each pixel holds a brightness value and the goal of my method is to change every pixels brightness value in the entire array to 127 or close to it at least.\r\n\r\nBelow is the JUnit test in question that I can&#39;t seem to pass as well as my current code for the method that the JUnit test is testing. The method below will pass most JUnit test but fails when ever it goes to run the assertEquals() portion of the JUnit test. As it stands now when ever I System.out.println() the normalizedImage.averageBrightness() it is correct and says that the average brightness of the image is 127 or close to it. I find this strange and have been working on this problem for quite awhile now and am unsure of what else to try. Any help would be appreciated.\r\n\r\nJUnit Test:\r\n\t\r\n\r\n    @Test\r\n    \tvoid normalized() {\r\n    \t\tvar smallNorm = smallSquare.normalized();\r\n    \t\tassertEquals(smallNorm.averageBrightness(), 127, 127 * .001);\r\n    \t\tvar scale = 127 / 2.5;\r\n    \t\tvar expectedNorm = new GrayscaleImage(new double[][] { { scale, 2 * scale }, { 3 * scale, 4 * scale } });\r\n    \t\tfor (var row = 0; row &lt; 2; row++) {\r\n    \t\t\tfor (var col = 0; col &lt; 2; col++) {\r\n    \t\t\t\tassertEquals(smallNorm.getPixel(col, row), expectedNorm.getPixel(col, row), expectedNorm.getPixel(col, row) * .001, &quot;pixel at row: &quot; + row + &quot; col: &quot; + col + &quot; incorrect&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\nMy Current Code:\r\n \r\n\r\n       /**\r\n         * Return a new GrayScale image where the average new average brightness is 127\r\n         * To do this, uniformly scale each pixel (ie, multiply each imageData entry by the same value)\r\n         * Due to rounding, the new average brightness will not be 127 exactly, but should be very close\r\n         * The original image should not be modified\r\n         * @return a GrayScale image with pixel data uniformly rescaled so that its averageBrightness() is 127\r\n         */\r\n        public GrayscaleImage normalized() {\r\n        \t// First we make a 2D array that is the same size as the original image.\r\n        \tdouble[][] normalized2DArray = new double[imageData[0].length][imageData.length];\r\n        \t\r\n        \t// Then we figure out what we need to multiple the pixel by to make sure our average brightness is equal to 127\r\n        \tdouble scaleFactor = 127 / averageBrightness();\r\n            \r\n        \t// Then we will set the brightness of the specified pixel below.\r\n        \tfor (int y = 0; y &lt; imageData[0].length; y++) {\r\n    \t\t\tfor (int x = 0; x &lt; imageData.length; x++) {\r\n    \t\t\t\t double newPixelValue = getPixel(y, x) * scaleFactor;\r\n    \t\t\t\t normalized2DArray[y][x] = newPixelValue;\r\n    \t\t\t}\r\n    \t\t}\r\n        \t\r\n        \t// We will then turn the 2DArray into a GrayscaleImage\r\n        \tGrayscaleImage normalizedImage = new GrayscaleImage(normalized2DArray);\r\n        \tSystem.out.println(normalizedImage.averageBrightness());\r\n        \t\r\n            return normalizedImage;\r\n        }\r\n\r\n\r\n\r\nHere is the current output of the JUnit test:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WdLS3.png","title":"Struggling to set the average brightness of a grayscale image","body":"<p>I am having an issue passing a JUnit test that I know is implemented correctly and I'm not sure why it is failing. The code below should grab each pixel (pixel = a point in the array exe: 2dArray[0][0]). Each pixel holds a brightness value and the goal of my method is to change every pixels brightness value in the entire array to 127 or close to it at least.</p>\n<p>Below is the JUnit test in question that I can't seem to pass as well as my current code for the method that the JUnit test is testing. The method below will pass most JUnit test but fails when ever it goes to run the assertEquals() portion of the JUnit test. As it stands now when ever I System.out.println() the normalizedImage.averageBrightness() it is correct and says that the average brightness of the image is 127 or close to it. I find this strange and have been working on this problem for quite awhile now and am unsure of what else to try. Any help would be appreciated.</p>\n<p>JUnit Test:</p>\n<pre><code>@Test\n    void normalized() {\n        var smallNorm = smallSquare.normalized();\n        assertEquals(smallNorm.averageBrightness(), 127, 127 * .001);\n        var scale = 127 / 2.5;\n        var expectedNorm = new GrayscaleImage(new double[][] { { scale, 2 * scale }, { 3 * scale, 4 * scale } });\n        for (var row = 0; row &lt; 2; row++) {\n            for (var col = 0; col &lt; 2; col++) {\n                assertEquals(smallNorm.getPixel(col, row), expectedNorm.getPixel(col, row), expectedNorm.getPixel(col, row) * .001, &quot;pixel at row: &quot; + row + &quot; col: &quot; + col + &quot; incorrect&quot;);\n            }\n        }\n    }\n</code></pre>\n<p>My Current Code:</p>\n<pre><code>   /**\n     * Return a new GrayScale image where the average new average brightness is 127\n     * To do this, uniformly scale each pixel (ie, multiply each imageData entry by the same value)\n     * Due to rounding, the new average brightness will not be 127 exactly, but should be very close\n     * The original image should not be modified\n     * @return a GrayScale image with pixel data uniformly rescaled so that its averageBrightness() is 127\n     */\n    public GrayscaleImage normalized() {\n        // First we make a 2D array that is the same size as the original image.\n        double[][] normalized2DArray = new double[imageData[0].length][imageData.length];\n        \n        // Then we figure out what we need to multiple the pixel by to make sure our average brightness is equal to 127\n        double scaleFactor = 127 / averageBrightness();\n        \n        // Then we will set the brightness of the specified pixel below.\n        for (int y = 0; y &lt; imageData[0].length; y++) {\n            for (int x = 0; x &lt; imageData.length; x++) {\n                 double newPixelValue = getPixel(y, x) * scaleFactor;\n                 normalized2DArray[y][x] = newPixelValue;\n            }\n        }\n        \n        // We will then turn the 2DArray into a GrayscaleImage\n        GrayscaleImage normalizedImage = new GrayscaleImage(normalized2DArray);\n        System.out.println(normalizedImage.averageBrightness());\n        \n        return normalizedImage;\n    }\n</code></pre>\n<p>Here is the current output of the JUnit test:\n<a href=\"https://i.stack.imgur.com/WdLS3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WdLS3.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","java-threads"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1674667050,"post_id":75229440,"comment_id":132765014,"body_markdown":"Obviously you can &quot;use&quot; it, but whether or not it does the right thing is impossible to tell based on the code in the question. That said, likely it is the wrong thing to do.","body":"Obviously you can &quot;use&quot; it, but whether or not it does the right thing is impossible to tell based on the code in the question. That said, likely it is the wrong thing to do."}],"owner":{"account_id":24662336,"reputation":504,"user_id":18558424,"display_name":"Abe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1674617198,"creation_date":1674617198,"question_id":75229440,"body_markdown":"I have some legacy codes using async_methods to do task. I need to synchronize the whole process like this. Will this work?\r\n\r\n    synchronized (taskId)\r\n    {\r\n        async_method_one();\r\n        async_method_two();\r\n    }\r\n\r\nMy goal is to achieve synchronization. The whole block will be blocked. I know it is wasting thread resources to achieve synchronization. ","title":"Can I use synchronized block over async_methods","body":"<p>I have some legacy codes using async_methods to do task. I need to synchronize the whole process like this. Will this work?</p>\n<pre><code>synchronized (taskId)\n{\n    async_method_one();\n    async_method_two();\n}\n</code></pre>\n<p>My goal is to achieve synchronization. The whole block will be blocked. I know it is wasting thread resources to achieve synchronization.</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1674450911,"post_id":75201377,"comment_id":132709129,"body_markdown":"you need to remove bill or other.?","body":"you need to remove bill or other.?"},{"owner":{"account_id":27507549,"reputation":11,"user_id":20990052,"display_name":"Nguyen Dinh Anh Tuan FPL HCM"},"score":0,"creation_date":1674489471,"post_id":75201377,"comment_id":132719582,"body_markdown":"Not It&#39;s not exactly the event of deleting bills, actually I&#39;ve already passed that part and my RecyclerView can automatically reset after deleting. The problem I have is that I don&#39;t know how to reset the number of existing invoices in the database when the program executes the command to delete data on the adapter and then set the text back to the bill_total textview.","body":"Not It&#39;s not exactly the event of deleting bills, actually I&#39;ve already passed that part and my RecyclerView can automatically reset after deleting. The problem I have is that I don&#39;t know how to reset the number of existing invoices in the database when the program executes the command to delete data on the adapter and then set the text back to the bill_total textview."},{"owner":{"account_id":26359116,"reputation":585,"user_id":20015640,"display_name":"Urvish Shiroya"},"score":0,"creation_date":1674544692,"post_id":75201377,"comment_id":132730797,"body_markdown":"okay you need to remove or update data from database and getCount() from database and set into RecyclerView","body":"okay you need to remove or update data from database and getCount() from database and set into RecyclerView"}],"answers":[{"tags":[],"owner":{"account_id":27507549,"reputation":11,"user_id":20990052,"display_name":"Nguyen Dinh Anh Tuan FPL HCM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674614794,"creation_date":1674614794,"answer_id":75229265,"question_id":75201377,"body_markdown":"Thanks &lt;https://stackoverflow.com/users/20015640/urvish-shiroya&gt; recommend me about the interface callback, it kinda hard to understand clearly but i think i got a hand of it.\r\nAll i need to do here is to create an interface file named ViewUpdater then create a class interface in it:\r\n```\r\n    public interface ViewUpdater {\r\n    void CallBack(TextView id);\r\n    }\r\n```\r\nThen create a void class to setText in Bill activity:\r\n```\r\n    public void SetText(ViewUpdater view){\r\n        view.CallBack(bill_total);\r\n\r\n    }\r\n```\r\nFinally call it in the onBindViewHolder at the deleted button for it to automatic the Bill count after i delete a bill:\r\n```\r\n    public void onBindViewHolder(@NonNull Bill_RecyclerView_Viewholder holder, int position) {\r\n        BillModel billModel;\r\n        billModel = bills.get(position);\r\n        holder.picture.setImageBitmap(billModel.BillBookPicture);\r\n        holder.name.setText(billModel.BillBookName);\r\n        holder.category.setText(&quot;Tag: &quot;+billModel.BillBookCategory);\r\n        holder.date.setText(&quot;Date: &quot;+billModel.BillDate);\r\n        holder.money.setText(&quot;Money: &quot;+billModel.BillMoney);\r\n        holder.sale.setText(&quot;Sale: &quot;+billModel.BillSale);\r\n        holder.totalSale.setText(&quot;Total: &quot;+billModel.BillTotalSale);\r\n        holder.del.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dao.BillDel(billModel.id);\r\n                bills = dao.getDSBill();\r\n                ((Bill)context).SetText(new ViewUpdater() {\r\n                    @Override\r\n                    public void CallBack(TextView id) {\r\n                        id.setText(&quot;Bills: &quot;+dao.CountBill()+&quot;&quot;);\r\n                    }\r\n                });\r\n                notifyDataSetChanged();\r\n            }\r\n        });\r\n    }\r\n```\r\nHope this help with someone has the same problem\r\n ","title":"Can i call an activity&#39;s view from a class?","body":"<p>Thanks <a href=\"https://stackoverflow.com/users/20015640/urvish-shiroya\">https://stackoverflow.com/users/20015640/urvish-shiroya</a> recommend me about the interface callback, it kinda hard to understand clearly but i think i got a hand of it.\nAll i need to do here is to create an interface file named ViewUpdater then create a class interface in it:</p>\n<pre><code>    public interface ViewUpdater {\n    void CallBack(TextView id);\n    }\n</code></pre>\n<p>Then create a void class to setText in Bill activity:</p>\n<pre><code>    public void SetText(ViewUpdater view){\n        view.CallBack(bill_total);\n\n    }\n</code></pre>\n<p>Finally call it in the onBindViewHolder at the deleted button for it to automatic the Bill count after i delete a bill:</p>\n<pre><code>    public void onBindViewHolder(@NonNull Bill_RecyclerView_Viewholder holder, int position) {\n        BillModel billModel;\n        billModel = bills.get(position);\n        holder.picture.setImageBitmap(billModel.BillBookPicture);\n        holder.name.setText(billModel.BillBookName);\n        holder.category.setText(&quot;Tag: &quot;+billModel.BillBookCategory);\n        holder.date.setText(&quot;Date: &quot;+billModel.BillDate);\n        holder.money.setText(&quot;Money: &quot;+billModel.BillMoney);\n        holder.sale.setText(&quot;Sale: &quot;+billModel.BillSale);\n        holder.totalSale.setText(&quot;Total: &quot;+billModel.BillTotalSale);\n        holder.del.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                dao.BillDel(billModel.id);\n                bills = dao.getDSBill();\n                ((Bill)context).SetText(new ViewUpdater() {\n                    @Override\n                    public void CallBack(TextView id) {\n                        id.setText(&quot;Bills: &quot;+dao.CountBill()+&quot;&quot;);\n                    }\n                });\n                notifyDataSetChanged();\n            }\n        });\n    }\n</code></pre>\n<p>Hope this help with someone has the same problem</p>\n"}],"owner":{"account_id":27507549,"reputation":11,"user_id":20990052,"display_name":"Nguyen Dinh Anh Tuan FPL HCM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674614794,"creation_date":1674399156,"question_id":75201377,"body_markdown":"I have a pretty cool problem that I keep trying to figure out.\r\nI have an Activity named Bill, it has a Textview and a RecyclerView. I plan to use textview to count the bills I have while recyclerView will show those bills.\r\nBut the problem is that in the adapter when I am processing the Viewholder data for the RecyclerView, it has a button to clear the Bill in case the customer returns or cancels the order.\r\nAnd the problem is now I don&#39;t know how to setText for TextView, can anyone please answer this question for me? Thanks.\r\n\r\nHere is the Bill activity i mention \r\n```\r\n    package anhtuan.example.sample.feature;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.recyclerview.widget.LinearLayoutManager;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n\r\n    import android.os.Bundle;\r\n    import android.widget.TextView;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    import anhtuan.example.sample.Bill.Bill_RecyclerView_Adapter;\r\n    import anhtuan.example.sample.DAO.DAO;\r\n    import anhtuan.example.sample.Model.BillModel;\r\n    import anhtuan.example.sample.R;\r\n\r\n    public class Bill extends AppCompatActivity {\r\n    TextView bill_total;\r\n    RecyclerView bill_RecyclerView;\r\n\r\n    ArrayList&lt;BillModel&gt;bills;\r\n    DAO dao;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_bill);\r\n        setTitle(&quot;Bill&quot;);\r\n        bill_total = findViewById(R.id.bill_total);\r\n        bill_RecyclerView = findViewById(R.id.bill_recyclerView);\r\n        getSupportActionBar().hide();\r\n\r\n        bills=new ArrayList&lt;&gt;();\r\n        dao = new DAO(Bill.this);\r\n        bills= dao.getDSBill();\r\n\r\n        bill_total.setText(&quot;Bills: &quot;+dao.CountBill());\r\n        Bill_RecyclerView_Adapter adapter = new Bill_RecyclerView_Adapter(bills,Bill.this,dao);\r\n        bill_RecyclerView.setLayoutManager(new      LinearLayoutManager(Bill.this,RecyclerView.VERTICAL,false));\r\n        bill_RecyclerView.setAdapter(adapter);\r\n\r\n    }\r\n    }\r\n```\r\nbill_total is the textView i use to count the bill with the function in DAO class named CountBill()\r\n\r\n```\r\n    public int CountBill(){\r\n        SQLiteDatabase database = sqLite.getReadableDatabase();\r\n        Cursor c = database.rawQuery(&quot;select * from bill &quot;,new String[]{});\r\n        int sum = c.getCount();\r\n        c.close();\r\n        return sum;\r\n    }\r\n```\r\nAnd here is the RecyclerView Adapter \r\n```\r\n    package anhtuan.example.sample.Bill;\r\n\r\n    import android.content.Context;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.TextView;\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    import anhtuan.example.sample.DAO.DAO;\r\n    import anhtuan.example.sample.Model.BillModel;\r\n    import anhtuan.example.sample.R;\r\n\r\n    public class Bill_RecyclerView_Adapter extends RecyclerView.Adapter&lt;Bill_RecyclerView_Viewholder&gt; {\r\n\r\n    ArrayList&lt;BillModel&gt; bills;\r\n    Context context;\r\n    DAO dao;\r\n\r\n    public Bill_RecyclerView_Adapter(ArrayList&lt;BillModel&gt; bills, Context context, DAO dao) {\r\n        this.bills = bills;\r\n        this.context = context;\r\n        this.dao = dao;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public Bill_RecyclerView_Viewholder onCreateViewHolder(@NonNull ViewGroup parent, int viewType)     {\r\n        View view = LayoutInflater.from(context).inflate(R.layout.bill_viewholder,parent,false);\r\n        return new Bill_RecyclerView_Viewholder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull Bill_RecyclerView_Viewholder holder, int position) {\r\n        BillModel billModel;\r\n        billModel = bills.get(position);\r\n        holder.picture.setImageBitmap(billModel.BillBookPicture);\r\n        holder.name.setText(billModel.BillBookName);\r\n        holder.category.setText(&quot;Tag: &quot;+billModel.BillBookCategory);\r\n        holder.date.setText(&quot;Date: &quot;+billModel.BillDate);\r\n        holder.money.setText(&quot;Money: &quot;+billModel.BillMoney);\r\n        holder.sale.setText(&quot;Sale: &quot;+billModel.BillSale);\r\n        holder.totalSale.setText(&quot;Total: &quot;+billModel.BillTotalSale);\r\n        holder.del.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                dao.BillDel(billModel.id);\r\n                bills = dao.getDSBill();\r\n                notifyDataSetChanged();\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return bills.size();\r\n    }\r\n    }\r\n\r\n```","title":"Can i call an activity&#39;s view from a class?","body":"<p>I have a pretty cool problem that I keep trying to figure out.\nI have an Activity named Bill, it has a Textview and a RecyclerView. I plan to use textview to count the bills I have while recyclerView will show those bills.\nBut the problem is that in the adapter when I am processing the Viewholder data for the RecyclerView, it has a button to clear the Bill in case the customer returns or cancels the order.\nAnd the problem is now I don't know how to setText for TextView, can anyone please answer this question for me? Thanks.</p>\n<p>Here is the Bill activity i mention</p>\n<pre><code>    package anhtuan.example.sample.feature;\n\n    import androidx.appcompat.app.AppCompatActivity;\n    import androidx.recyclerview.widget.LinearLayoutManager;\n    import androidx.recyclerview.widget.RecyclerView;\n\n    import android.os.Bundle;\n    import android.widget.TextView;\n\n    import java.util.ArrayList;\n\n    import anhtuan.example.sample.Bill.Bill_RecyclerView_Adapter;\n    import anhtuan.example.sample.DAO.DAO;\n    import anhtuan.example.sample.Model.BillModel;\n    import anhtuan.example.sample.R;\n\n    public class Bill extends AppCompatActivity {\n    TextView bill_total;\n    RecyclerView bill_RecyclerView;\n\n    ArrayList&lt;BillModel&gt;bills;\n    DAO dao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_bill);\n        setTitle(&quot;Bill&quot;);\n        bill_total = findViewById(R.id.bill_total);\n        bill_RecyclerView = findViewById(R.id.bill_recyclerView);\n        getSupportActionBar().hide();\n\n        bills=new ArrayList&lt;&gt;();\n        dao = new DAO(Bill.this);\n        bills= dao.getDSBill();\n\n        bill_total.setText(&quot;Bills: &quot;+dao.CountBill());\n        Bill_RecyclerView_Adapter adapter = new Bill_RecyclerView_Adapter(bills,Bill.this,dao);\n        bill_RecyclerView.setLayoutManager(new      LinearLayoutManager(Bill.this,RecyclerView.VERTICAL,false));\n        bill_RecyclerView.setAdapter(adapter);\n\n    }\n    }\n</code></pre>\n<p>bill_total is the textView i use to count the bill with the function in DAO class named CountBill()</p>\n<pre><code>    public int CountBill(){\n        SQLiteDatabase database = sqLite.getReadableDatabase();\n        Cursor c = database.rawQuery(&quot;select * from bill &quot;,new String[]{});\n        int sum = c.getCount();\n        c.close();\n        return sum;\n    }\n</code></pre>\n<p>And here is the RecyclerView Adapter</p>\n<pre><code>    package anhtuan.example.sample.Bill;\n\n    import android.content.Context;\n    import android.view.LayoutInflater;\n    import android.view.View;\n    import android.view.ViewGroup;\n    import android.widget.TextView;\n\n    import androidx.annotation.NonNull;\n    import androidx.recyclerview.widget.RecyclerView;\n\n    import java.util.ArrayList;\n\n    import anhtuan.example.sample.DAO.DAO;\n    import anhtuan.example.sample.Model.BillModel;\n    import anhtuan.example.sample.R;\n\n    public class Bill_RecyclerView_Adapter extends RecyclerView.Adapter&lt;Bill_RecyclerView_Viewholder&gt; {\n\n    ArrayList&lt;BillModel&gt; bills;\n    Context context;\n    DAO dao;\n\n    public Bill_RecyclerView_Adapter(ArrayList&lt;BillModel&gt; bills, Context context, DAO dao) {\n        this.bills = bills;\n        this.context = context;\n        this.dao = dao;\n    }\n\n    @NonNull\n    @Override\n    public Bill_RecyclerView_Viewholder onCreateViewHolder(@NonNull ViewGroup parent, int viewType)     {\n        View view = LayoutInflater.from(context).inflate(R.layout.bill_viewholder,parent,false);\n        return new Bill_RecyclerView_Viewholder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull Bill_RecyclerView_Viewholder holder, int position) {\n        BillModel billModel;\n        billModel = bills.get(position);\n        holder.picture.setImageBitmap(billModel.BillBookPicture);\n        holder.name.setText(billModel.BillBookName);\n        holder.category.setText(&quot;Tag: &quot;+billModel.BillBookCategory);\n        holder.date.setText(&quot;Date: &quot;+billModel.BillDate);\n        holder.money.setText(&quot;Money: &quot;+billModel.BillMoney);\n        holder.sale.setText(&quot;Sale: &quot;+billModel.BillSale);\n        holder.totalSale.setText(&quot;Total: &quot;+billModel.BillTotalSale);\n        holder.del.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                dao.BillDel(billModel.id);\n                bills = dao.getDSBill();\n                notifyDataSetChanged();\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        return bills.size();\n    }\n    }\n\n</code></pre>\n"},{"tags":["java","mysql","transactions","sql-update"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":2,"creation_date":1674598682,"post_id":75227829,"comment_id":132747983,"body_markdown":"The second version has the problem that a concurrent transaction could get in and assign a user during the time between the read and the update.","body":"The second version has the problem that a concurrent transaction could get in and assign a user during the time between the read and the update."},{"owner":{"account_id":21257942,"reputation":143,"user_id":15639126,"display_name":"rsnlpn"},"score":0,"creation_date":1674599705,"post_id":75227829,"comment_id":132748224,"body_markdown":"It seems that anyway, ideally, you need to work with concurrent process to be able to avoid two updates at one time. Is [this another question/answer](https://stackoverflow.com/questions/22095719/what-is-a-good-approach-for-safe-concurrent-updates-in-a-relational-database) helpful for you?","body":"It seems that anyway, ideally, you need to work with concurrent process to be able to avoid two updates at one time. Is <a href=\"https://stackoverflow.com/questions/22095719/what-is-a-good-approach-for-safe-concurrent-updates-in-a-relational-database\">this another question/answer</a> helpful for you?"}],"answers":[{"comments":[{"owner":{"account_id":25990094,"reputation":1,"user_id":20831052,"display_name":"Volodymyr"},"score":0,"creation_date":1674604888,"post_id":75228146,"comment_id":132749308,"body_markdown":"Thank you for your answer. Does transaction isolation mode of repeatable read can help me in such situation?","body":"Thank you for your answer. Does transaction isolation mode of repeatable read can help me in such situation?"},{"owner":{"account_id":25766292,"reputation":88,"user_id":19516175,"display_name":"Oleksandr Myronets"},"score":0,"creation_date":1674605793,"post_id":75228146,"comment_id":132749435,"body_markdown":"Since there is only one DB operation to perform transaction is not the right tool here. If I understood business logic correctly, you need to show some error to user in case if between the time place was selected and time order was confirmed other user already purchased ticked for this place. If so, transaction will have no effect.","body":"Since there is only one DB operation to perform transaction is not the right tool here. If I understood business logic correctly, you need to show some error to user in case if between the time place was selected and time order was confirmed other user already purchased ticked for this place. If so, transaction will have no effect."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1674610500,"post_id":75228146,"comment_id":132750106,"body_markdown":"Solving this with a mutex assumes that all modifications are happening from the same JVM.","body":"Solving this with a mutex assumes that all modifications are happening from the same JVM."},{"owner":{"account_id":25766292,"reputation":88,"user_id":19516175,"display_name":"Oleksandr Myronets"},"score":0,"creation_date":1674614259,"post_id":75228146,"comment_id":132750609,"body_markdown":"Ignore mutex related approach. I edited my answer.","body":"Ignore mutex related approach. I edited my answer."},{"owner":{"account_id":25990094,"reputation":1,"user_id":20831052,"display_name":"Volodymyr"},"score":0,"creation_date":1674648446,"post_id":75228146,"comment_id":132758210,"body_markdown":"@OleksandrMyronets thanks for your advices! It works. Now I&#39;m just learning to write code and it&#39;s my first web application. Could you advice me how usually devs solve this problem? Maybe there are solutions in Spring and Hibernate frameworks, but due the conditions of my project I cant&#39;t use ORM frameworks. It&#39;s just MVC-app with ConnectionPool, DAO layer, Service layer, Controllers and view. So I&#39;m interesting how devs really solve this problem in real projects based on servlets","body":"@OleksandrMyronets thanks for your advices! It works. Now I&#39;m just learning to write code and it&#39;s my first web application. Could you advice me how usually devs solve this problem? Maybe there are solutions in Spring and Hibernate frameworks, but due the conditions of my project I cant&#39;t use ORM frameworks. It&#39;s just MVC-app with ConnectionPool, DAO layer, Service layer, Controllers and view. So I&#39;m interesting how devs really solve this problem in real projects based on servlets"},{"owner":{"account_id":25766292,"reputation":88,"user_id":19516175,"display_name":"Oleksandr Myronets"},"score":0,"creation_date":1674678033,"post_id":75228146,"comment_id":132768355,"body_markdown":"@Volodymyr I believe that this question goes far beyond the original question and deserve separate topic rather than discussion in comments. For more fundamental study on subject I suggest reading about [CAP theorem](https://en.wikipedia.org/wiki/CAP_theorem)","body":"@Volodymyr I believe that this question goes far beyond the original question and deserve separate topic rather than discussion in comments. For more fundamental study on subject I suggest reading about <a href=\"https://en.wikipedia.org/wiki/CAP_theorem\" rel=\"nofollow noreferrer\">CAP theorem</a>"}],"tags":[],"owner":{"account_id":25766292,"reputation":88,"user_id":19516175,"display_name":"Oleksandr Myronets"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674614223,"creation_date":1674601025,"answer_id":75228146,"question_id":75227829,"body_markdown":"Possible approach here is to go ahead with SQL query. After query execution check number of rows modified in ticketDAO.update method. If 0 rows modified then throw exception DAOException.\r\n\r\n","title":"Safe data update in mySQL / Java","body":"<p>Possible approach here is to go ahead with SQL query. After query execution check number of rows modified in ticketDAO.update method. If 0 rows modified then throw exception DAOException.</p>\n"}],"owner":{"account_id":25990094,"reputation":1,"user_id":20831052,"display_name":"Volodymyr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674614223,"creation_date":1674598498,"question_id":75227829,"body_markdown":"Here I have a dilemma.\r\nLet&#39;s imagine that we have a sql table like this\r\n[enter image description here](https://i.stack.imgur.com/5YkDV.png)\r\n\r\nIt could be a problem when two or more users overwrite data in the table.\r\n\r\nHow should I check if the place hasn&#39;t been taken before update data?\r\n\r\nI have two options\r\n1) in SQL query:\r\n```\r\nUPDATE ticket SET user_user_id = ? WHERE place = ? AND user_user_id is NULL\r\n```\r\n2) or in Service layer:\r\n```\r\ntry {\r\nTicket ticket = ticketDAO.read(place)\r\nif (ticket.getUser() == null) {\r\nticket.setUser(user)\r\nticketDAO.update(ticket)\r\n}else {\r\nthrow new DAOException(&quot;Place has been already tooken&quot;)\r\n}\r\n```\r\n\r\nWhat way is safer and commonly used in practice?\r\n\r\n\r\nPlease, share your advice.","title":"Safe data update in mySQL / Java","body":"<p>Here I have a dilemma.\nLet's imagine that we have a sql table like this\n<a href=\"https://i.stack.imgur.com/5YkDV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>It could be a problem when two or more users overwrite data in the table.</p>\n<p>How should I check if the place hasn't been taken before update data?</p>\n<p>I have two options</p>\n<ol>\n<li>in SQL query:</li>\n</ol>\n<pre><code>UPDATE ticket SET user_user_id = ? WHERE place = ? AND user_user_id is NULL\n</code></pre>\n<ol start=\"2\">\n<li>or in Service layer:</li>\n</ol>\n<pre><code>try {\nTicket ticket = ticketDAO.read(place)\nif (ticket.getUser() == null) {\nticket.setUser(user)\nticketDAO.update(ticket)\n}else {\nthrow new DAOException(&quot;Place has been already tooken&quot;)\n}\n</code></pre>\n<p>What way is safer and commonly used in practice?</p>\n<p>Please, share your advice.</p>\n"},{"tags":["java","security","pdf","sanitization","malware"],"comments":[{"owner":{"account_id":15536844,"reputation":1592,"user_id":11208820,"display_name":"James Wilson"},"score":1,"creation_date":1674465890,"post_id":75207470,"comment_id":132711910,"body_markdown":"Sounds like you are looking for a CDR product. There are plenty of options out there - https://en.wikipedia.org/wiki/Content_Disarm_%26_Reconstruction","body":"Sounds like you are looking for a CDR product. There are plenty of options out there - <a href=\"https://en.wikipedia.org/wiki/Content_Disarm_%26_Reconstruction\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Content_Disarm_%26_Reconstruction</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1674477917,"post_id":75207470,"comment_id":132715384,"body_markdown":"Or do you want to _implement_ a CDR tool using PDFBox as base library?","body":"Or do you want to <i>implement</i> a CDR tool using PDFBox as base library?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1674479758,"post_id":75207470,"comment_id":132716025,"body_markdown":"I remember a discussion on the pdfbox users mailing list years ago, use the search feature and search for &quot;Roberto Nibali&quot;. IIRC we discussed the many possibilities where there could be JS content :-(","body":"I remember a discussion on the pdfbox users mailing list years ago, use the search feature and search for &quot;Roberto Nibali&quot;. IIRC we discussed the many possibilities where there could be JS content :-("},{"owner":{"account_id":25658857,"reputation":1,"user_id":19424868,"display_name":"Faisul"},"score":0,"creation_date":1674533808,"post_id":75207470,"comment_id":132729188,"body_markdown":"I was looking for a light weight implementation to detect and block PDF files with ActiveContent. Implementation on top of any Opensource library should do","body":"I was looking for a light weight implementation to detect and block PDF files with ActiveContent. Implementation on top of any Opensource library should do"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674640063,"post_id":75221758,"comment_id":132755592,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75221758/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25658857,"reputation":1,"user_id":19424868,"display_name":"Faisul"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674610792,"creation_date":1674564660,"answer_id":75221758,"question_id":75207470,"body_markdown":"For anyone who might need it later. This seems like a good starting point.\r\n\r\n(Even though archived) DocBleach project has the implementation to detect malicious content and to sanitize the file. it also supports other office formats. It is build on top of pdfbox.\r\n\r\nhttps://github.com/docbleach/DocBleach","title":"How to Sanitize PDF with a opensource Java tool ( like PDFBox)?","body":"<p>For anyone who might need it later. This seems like a good starting point.</p>\n<p>(Even though archived) DocBleach project has the implementation to detect malicious content and to sanitize the file. it also supports other office formats. It is build on top of pdfbox.</p>\n<p><a href=\"https://github.com/docbleach/DocBleach\" rel=\"nofollow noreferrer\">https://github.com/docbleach/DocBleach</a></p>\n"}],"owner":{"account_id":25658857,"reputation":1,"user_id":19424868,"display_name":"Faisul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":518,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1674610792,"creation_date":1674465337,"question_id":75207470,"body_markdown":"I am trying to enhance security of a file upload segment in Spring based web application. \r\n\r\nIt uses a antivirus to do virus screening before upload, However it is additionally required to sanitize the files or restrict the files with active contents(javascript, autoaction) from being uploaded .\r\n\r\nAllowed file formats are XLS, DOCX, PDF along with few image formats.\r\n\r\n","title":"How to Sanitize PDF with a opensource Java tool ( like PDFBox)?","body":"<p>I am trying to enhance security of a file upload segment in Spring based web application.</p>\n<p>It uses a antivirus to do virus screening before upload, However it is additionally required to sanitize the files or restrict the files with active contents(javascript, autoaction) from being uploaded .</p>\n<p>Allowed file formats are XLS, DOCX, PDF along with few image formats.</p>\n"},{"tags":["java","postgresql","spring-boot","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1673561591,"post_id":75102529,"comment_id":132533582,"body_markdown":"52 rows missing is pretty specific. Take a look at what is persisted in the database and the diff from your data and it might help tell you why. First guess is that spread sheets don&#39;t filter out duplicate rows - does it maybe have multiple rows with duplicated CsvStations.id values? For reference, save just takes the current data and merges it into the existing row if the IDs are duplicated - so the first data is overwritten by the last.","body":"52 rows missing is pretty specific. Take a look at what is persisted in the database and the diff from your data and it might help tell you why. First guess is that spread sheets don&#39;t filter out duplicate rows - does it maybe have multiple rows with duplicated CsvStations.id values? For reference, save just takes the current data and merges it into the existing row if the IDs are duplicated - so the first data is overwritten by the last."},{"owner":{"account_id":24430527,"reputation":43,"user_id":20894830,"display_name":"Erkan Isuf"},"score":1,"creation_date":1673596615,"post_id":75102529,"comment_id":132539042,"body_markdown":"@Chris You are correct! Issue was that I set id of the entity with the csv&#39;s ids. Made new column for csv ids and let the entity generate auto ids and now it saves all of them.","body":"@Chris You are correct! Issue was that I set id of the entity with the csv&#39;s ids. Made new column for csv ids and let the entity generate auto ids and now it saves all of them."}],"owner":{"account_id":24430527,"reputation":43,"user_id":20894830,"display_name":"Erkan Isuf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1583,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1674610534,"creation_date":1673559248,"question_id":75102529,"body_markdown":"I am trying to get some data from CSV file and then save it on start of the application. But when i run saveAll() of the repo it will save only up to 348 rows to the DB while the file has over 400 rows in. I can see in the debbuger that correct amount of data is passed to the saving method.\r\n\r\n```\r\n@SpringBootApplication\r\n@EnableJpaRepositories(&quot;com.example.demo&quot;)\r\npublic class DemoApplication {\r\n\r\n\tprivate final StationsServicesImpl stationsServices;\r\n\r\n\tpublic DemoApplication(StationsServicesImpl stationsServices) {\r\n\t\tthis.stationsServices = stationsServices;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n\tpublic List&lt;CsvStations&gt; parseCSVToCSVStationsObject() throws IOException {\r\n\t\tReader reader = Files.newBufferedReader(Paths.get(&quot;src/main/resources/stations.csv&quot;));\r\n\t\tCsvToBean&lt;CsvStations&gt; csvToBean = new CsvToBeanBuilder(reader).withType(CsvStations.class).withIgnoreLeadingWhiteSpace(false).build();\r\n\t\tList&lt;CsvStations&gt; csvStations = csvToBean.parse();\r\n\t\treturn csvStations;\r\n\t}\r\n\r\n\t@EventListener(ApplicationReadyEvent.class)\r\n\tpublic void onStartApp() throws IOException {\r\n\t\tList&lt;StationsDAO&gt; stations = parseCSVToCSVStationsObject().stream()\r\n\t\t\t\t\t.map(s -&gt; new StationsDAO(\r\n\t\t\t\t\t\t\t\tLong.parseLong(s.getId()),\r\n\t\t\t\t\t\t\t\ts.getName(),\r\n\t\t\t\t\t\t\t\ts.getAdress(),\r\n\t\t\t\t\t\t\t\ts.getKaupunki(),\r\n\t\t\t\t\t\t\t\ts.getKapasiteet(),\r\n\t\t\t\t\t\t\t\ts.getOperaattor(),\r\n\t\t\t\t\t\t\t\ts.getX(),\r\n\t\t\t\t\t\t\t\ts.getY()\r\n\t\t\t\t\t)).collect(Collectors.toList());\r\n\r\n\t\tstationsServices.addStations(stations);\r\n\t}\r\n}\r\n```\r\n\r\nthe ```addStations()``` method inside has just basically .saveAll() of JpaRepository;\r\n\r\nI&#39;ve tried also to loop and use just the .save() method but still same thing and tried to change this too `spring.jpa.properties.hibernate.jdbc.batch_size=100`.","title":"Spring boot Java JPA saveAll not saving all data","body":"<p>I am trying to get some data from CSV file and then save it on start of the application. But when i run saveAll() of the repo it will save only up to 348 rows to the DB while the file has over 400 rows in. I can see in the debbuger that correct amount of data is passed to the saving method.</p>\n<pre><code>@SpringBootApplication\n@EnableJpaRepositories(&quot;com.example.demo&quot;)\npublic class DemoApplication {\n\n    private final StationsServicesImpl stationsServices;\n\n    public DemoApplication(StationsServicesImpl stationsServices) {\n        this.stationsServices = stationsServices;\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    public List&lt;CsvStations&gt; parseCSVToCSVStationsObject() throws IOException {\n        Reader reader = Files.newBufferedReader(Paths.get(&quot;src/main/resources/stations.csv&quot;));\n        CsvToBean&lt;CsvStations&gt; csvToBean = new CsvToBeanBuilder(reader).withType(CsvStations.class).withIgnoreLeadingWhiteSpace(false).build();\n        List&lt;CsvStations&gt; csvStations = csvToBean.parse();\n        return csvStations;\n    }\n\n    @EventListener(ApplicationReadyEvent.class)\n    public void onStartApp() throws IOException {\n        List&lt;StationsDAO&gt; stations = parseCSVToCSVStationsObject().stream()\n                    .map(s -&gt; new StationsDAO(\n                                Long.parseLong(s.getId()),\n                                s.getName(),\n                                s.getAdress(),\n                                s.getKaupunki(),\n                                s.getKapasiteet(),\n                                s.getOperaattor(),\n                                s.getX(),\n                                s.getY()\n                    )).collect(Collectors.toList());\n\n        stationsServices.addStations(stations);\n    }\n}\n</code></pre>\n<p>the <code>addStations()</code> method inside has just basically .saveAll() of JpaRepository;</p>\n<p>I've tried also to loop and use just the .save() method but still same thing and tried to change this too <code>spring.jpa.properties.hibernate.jdbc.batch_size=100</code>.</p>\n"},{"tags":["java","xml","jaxb"],"comments":[{"owner":{"account_id":10428850,"reputation":175,"user_id":7689280,"display_name":"Mio"},"score":0,"creation_date":1674544332,"post_id":75218079,"comment_id":132730731,"body_markdown":"What is `ST datatitle` and `Data data;` in your code? Could you share it?","body":"What is <code>ST datatitle</code> and <code>Data data;</code> in your code? Could you share it?"},{"owner":{"account_id":27606469,"reputation":1,"user_id":21070486,"display_name":"이동걸"},"score":0,"creation_date":1674610546,"post_id":75218079,"comment_id":132750113,"body_markdown":"I put my answer below. Please confirm.","body":"I put my answer below. Please confirm."},{"owner":{"account_id":10428850,"reputation":175,"user_id":7689280,"display_name":"Mio"},"score":0,"creation_date":1674626548,"post_id":75218079,"comment_id":132752222,"body_markdown":"I can see in your code classes &#39;ED&#39; and &#39;ANY&#39; which I don&#39;t know. Can you try to change your code so that as few components are needed and the code compiles?\n+ What function do you use for Marshalling? Can you show an example?\nBR.","body":"I can see in your code classes &#39;ED&#39; and &#39;ANY&#39; which I don&#39;t know. Can you try to change your code so that as few components are needed and the code compiles? + What function do you use for Marshalling? Can you show an example? BR."},{"owner":{"account_id":27606469,"reputation":1,"user_id":21070486,"display_name":"이동걸"},"score":1,"creation_date":1674627617,"post_id":75218079,"comment_id":132752419,"body_markdown":"I solved this problem using that annotation.\nChange &quot;List&lt;DataTest&gt; ant123&quot; =&gt; &quot;List&lt;Object&gt; titleOrData&quot;\n\n@XmlElements({@javax.xml.bind.annotation.XmlElement(name=&quot;data&quot;, type=Data.class), @javax.xml.bind.annotation.XmlElement(name=&quot;datatitle&quot;, type=ST.class)})\nprotected List&lt;Object&gt; titleOrData;\n\nThanks for your help.","body":"I solved this problem using that annotation. Change &quot;List&lt;DataTest&gt; ant123&quot; =&gt; &quot;List&lt;Object&gt; titleOrData&quot;  @XmlElements({@javax.xml.bind.annotation.XmlElement(name=&quot;da&zwnj;&#8203;ta&quot;, type=Data.class), @javax.xml.bind.annotation.XmlElement(name=&quot;datatitle&quot;, type=ST.class)}) protected List&lt;Object&gt; titleOrData;  Thanks for your help."}],"answers":[{"tags":[],"owner":{"account_id":27606469,"reputation":1,"user_id":21070486,"display_name":"이동걸"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674610507,"creation_date":1674610507,"answer_id":75228946,"question_id":75218079,"body_markdown":"The items of my ST and Data are as below.\r\n\r\nI have described datatitle and data in the description, but the attribute has different values.\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;ST&quot;, propOrder={&quot;type&quot;})\r\n    @XmlSeeAlso({ SC.class, ADXP.class, ENXP.class})\r\n    public class ST extends ED {\r\n\r\n    @XmlAttribute(name = &quot;type&quot;)\r\n\t@XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n\tprotected String type;\r\n\r\n\tpublic String getType() {\r\n\t\treturn type;\r\n\t}\r\n\r\n\tpublic void setType(String type) {\r\n\t\tthis.type = type;\r\n\t}\r\n\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;Data&quot;, propOrder={&quot;type&quot;,&quot;reference&quot;,&quot;text&quot;})\r\n    @XmlSeeAlso({ SC.class, ADXP.class, ENXP.class})\r\n    public class Data extends ANY {\r\n\r\n\r\n\tprotected POCDMT000040Reference reference;\r\n\t\r\n\t@XmlAttribute(name = &quot;type&quot;)\r\n\t@XmlJavaTypeAdapter(CollapsedStringAdapter.class)\r\n\tprotected String type;\r\n\t\r\n\tprotected ST text;\r\n\r\n\tpublic String getType() {\r\n\t\treturn type;\r\n\t}\r\n\r\n\tpublic void setType(String type) {\r\n\t\tthis.type = type;\r\n\t}\r\n\r\n\r\n\r\n\tpublic POCDMT000040Reference getReference() {\r\n\t\treturn reference;\r\n\t}\r\n\r\n\tpublic void setReference(POCDMT000040Reference reference) {\r\n\t\tthis.reference = reference;\r\n\t}\r\n\r\n\tpublic ST getText() {\r\n\t\treturn text;\r\n\t}\r\n\r\n\tpublic void setText(ST text) {\r\n\t\tthis.text = text;\r\n\t}\r\n\r\n\r\n**I want xml like below.**\r\n\r\n    &lt;entry&gt;\r\n\t\t&lt;datatitle mediaType=&quot;&quot;&gt;1&lt;/datatitle&gt;\r\n\t\t&lt;data type=&quot;TEXT&quot;&gt;\r\n\t\t\t&lt;text&gt;1&lt;/text&gt;\r\n\t\t&lt;/data&gt;\r\n\t\t&lt;datatitle mediaType=&quot;&quot;&gt;2&lt;/datatitle&gt;\r\n\t\t&lt;data type=&quot;TEXT&quot;&gt;\r\n\t\t\t&lt;text&gt;2&lt;/text&gt;\r\n\t\t&lt;/data&gt;\r\n    &lt;/entry&gt;\r\n\r\n**But the xml is being generated like this..**\r\n\r\n    &lt;entry&gt;\r\n     &lt;any123&gt;\r\n\t\t&lt;datatitle mediaType=&quot;&quot;&gt;1&lt;/datatitle&gt;\r\n\t\t&lt;data type=&quot;TEXT&quot;&gt;\r\n\t\t\t&lt;text&gt;1&lt;/text&gt;\r\n\t\t&lt;/data&gt;\r\n     &lt;/any123&gt;\r\n     &lt;any123&gt;\r\n\t\t&lt;datatitle mediaType=&quot;&quot;&gt;2&lt;/datatitle&gt;\r\n\t\t&lt;data type=&quot;TEXT&quot;&gt;\r\n\t\t\t&lt;text&gt;2&lt;/text&gt;\r\n\t\t&lt;/data&gt;\r\n     &lt;/any123&gt;\r\n    &lt;/entry&gt;","title":"How to remove a specific element when generating xml using JAXB?","body":"<p>The items of my ST and Data are as below.</p>\n<p>I have described datatitle and data in the description, but the attribute has different values.</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;ST&quot;, propOrder={&quot;type&quot;})\n@XmlSeeAlso({ SC.class, ADXP.class, ENXP.class})\npublic class ST extends ED {\n\n@XmlAttribute(name = &quot;type&quot;)\n@XmlJavaTypeAdapter(CollapsedStringAdapter.class)\nprotected String type;\n\npublic String getType() {\n    return type;\n}\n\npublic void setType(String type) {\n    this.type = type;\n}\n\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;Data&quot;, propOrder={&quot;type&quot;,&quot;reference&quot;,&quot;text&quot;})\n@XmlSeeAlso({ SC.class, ADXP.class, ENXP.class})\npublic class Data extends ANY {\n\n\nprotected POCDMT000040Reference reference;\n\n@XmlAttribute(name = &quot;type&quot;)\n@XmlJavaTypeAdapter(CollapsedStringAdapter.class)\nprotected String type;\n\nprotected ST text;\n\npublic String getType() {\n    return type;\n}\n\npublic void setType(String type) {\n    this.type = type;\n}\n\n\n\npublic POCDMT000040Reference getReference() {\n    return reference;\n}\n\npublic void setReference(POCDMT000040Reference reference) {\n    this.reference = reference;\n}\n\npublic ST getText() {\n    return text;\n}\n\npublic void setText(ST text) {\n    this.text = text;\n}\n</code></pre>\n<p><strong>I want xml like below.</strong></p>\n<pre><code>&lt;entry&gt;\n    &lt;datatitle mediaType=&quot;&quot;&gt;1&lt;/datatitle&gt;\n    &lt;data type=&quot;TEXT&quot;&gt;\n        &lt;text&gt;1&lt;/text&gt;\n    &lt;/data&gt;\n    &lt;datatitle mediaType=&quot;&quot;&gt;2&lt;/datatitle&gt;\n    &lt;data type=&quot;TEXT&quot;&gt;\n        &lt;text&gt;2&lt;/text&gt;\n    &lt;/data&gt;\n&lt;/entry&gt;\n</code></pre>\n<p><strong>But the xml is being generated like this..</strong></p>\n<pre><code>&lt;entry&gt;\n &lt;any123&gt;\n    &lt;datatitle mediaType=&quot;&quot;&gt;1&lt;/datatitle&gt;\n    &lt;data type=&quot;TEXT&quot;&gt;\n        &lt;text&gt;1&lt;/text&gt;\n    &lt;/data&gt;\n &lt;/any123&gt;\n &lt;any123&gt;\n    &lt;datatitle mediaType=&quot;&quot;&gt;2&lt;/datatitle&gt;\n    &lt;data type=&quot;TEXT&quot;&gt;\n        &lt;text&gt;2&lt;/text&gt;\n    &lt;/data&gt;\n &lt;/any123&gt;\n&lt;/entry&gt;\n</code></pre>\n"}],"owner":{"account_id":27606469,"reputation":1,"user_id":21070486,"display_name":"이동걸"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674610507,"creation_date":1674541569,"question_id":75218079,"body_markdown":"I am using JAXB to create xml .\r\n\r\nIt seems that an xml element is created with the current variable name, but the upper list object does not want to be created as an xml element.\r\n\r\nHowever, the parent list object is created with a variable name, how to remove the corresponding element?\r\n\r\n\r\nCurrently my source code is as below.\r\n\r\n\r\n    XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name=&quot;POCD_MT000040.Entry&quot;, propOrder={&quot;ant123&quot;})\r\n    public class POCDMT000040Entry\r\n    {\r\n        protected List&lt;DataTest&gt; ant123;\r\n\r\n        public List&lt;DataTest&gt; getAnt123() {\r\n    \treturn ant123;\r\n    }\r\n\r\n    public void setAnt123(List&lt;DataTest&gt; ant123) {\r\n    \tthis.ant123 = ant123;\r\n    }\r\n    }\r\n\r\n\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name=&quot;DataTest&quot;, propOrder={&quot;datatitle&quot;, &quot;data&quot;})\r\n    public class DataTest\r\n    {\r\n       protected ST datatitle;\r\n       protected Data data;\r\n    \r\n         public ST getDatatitle() {\r\n    \treturn datatitle;\r\n    }\r\n\r\n    public void setDatatitle(ST datatitle) {\r\n    \tthis.datatitle = datatitle;\r\n    }\r\n\r\n    public Data getData() {\r\n    \treturn data;\r\n    }\r\n\r\n    public void setData(Data data) {\r\n    \tthis.data = data;\r\n    }\r\n    }\r\n\r\n\r\n\r\n`I want xml like below.`\r\n\r\n\r\n    &lt;entry&gt;\r\n      &lt;datatitle&gt;1&lt;/datatitle&gt;\r\n      &lt;data&gt;1&lt;/data&gt;\r\n      &lt;datatitle&gt;2&lt;/datatitle&gt;\r\n      &lt;data&gt;2&lt;/data&gt;\r\n      &lt;datatitle&gt;3&lt;/datatitle&gt;\r\n      &lt;data&gt;3&lt;/data&gt;\r\n    &lt;/entry&gt;\r\n\r\n\r\n`But the xml is being generated like this.`\r\n\r\n\r\n    &lt;entry&gt;\r\n     &lt;ant123&gt;\r\n      &lt;datatitle&gt;1&lt;/datatitle&gt;\r\n      &lt;data&gt;1&lt;/data&gt;\r\n     &lt;/ant123&gt;\r\n     &lt;ant123&gt;\r\n      &lt;datatitle&gt;2&lt;/datatitle&gt;\r\n      &lt;data&gt;2&lt;/data&gt;\r\n     &lt;/ant123&gt;\r\n     &lt;ant123&gt;\r\n      &lt;datatitle&gt;3&lt;/datatitle&gt;\r\n      &lt;data&gt;3&lt;/data&gt;\r\n     &lt;/ant123&gt;\r\n    &lt;/entry&gt;\r\n    \r\nI want to remove the ant123 element.\r\nCan you tell me how to solve it?","title":"How to remove a specific element when generating xml using JAXB?","body":"<p>I am using JAXB to create xml .</p>\n<p>It seems that an xml element is created with the current variable name, but the upper list object does not want to be created as an xml element.</p>\n<p>However, the parent list object is created with a variable name, how to remove the corresponding element?</p>\n<p>Currently my source code is as below.</p>\n<pre><code>XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name=&quot;POCD_MT000040.Entry&quot;, propOrder={&quot;ant123&quot;})\npublic class POCDMT000040Entry\n{\n    protected List&lt;DataTest&gt; ant123;\n\n    public List&lt;DataTest&gt; getAnt123() {\n    return ant123;\n}\n\npublic void setAnt123(List&lt;DataTest&gt; ant123) {\n    this.ant123 = ant123;\n}\n}\n\n\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name=&quot;DataTest&quot;, propOrder={&quot;datatitle&quot;, &quot;data&quot;})\npublic class DataTest\n{\n   protected ST datatitle;\n   protected Data data;\n\n     public ST getDatatitle() {\n    return datatitle;\n}\n\npublic void setDatatitle(ST datatitle) {\n    this.datatitle = datatitle;\n}\n\npublic Data getData() {\n    return data;\n}\n\npublic void setData(Data data) {\n    this.data = data;\n}\n}\n</code></pre>\n<p><code>I want xml like below.</code></p>\n<pre><code>&lt;entry&gt;\n  &lt;datatitle&gt;1&lt;/datatitle&gt;\n  &lt;data&gt;1&lt;/data&gt;\n  &lt;datatitle&gt;2&lt;/datatitle&gt;\n  &lt;data&gt;2&lt;/data&gt;\n  &lt;datatitle&gt;3&lt;/datatitle&gt;\n  &lt;data&gt;3&lt;/data&gt;\n&lt;/entry&gt;\n</code></pre>\n<p><code>But the xml is being generated like this.</code></p>\n<pre><code>&lt;entry&gt;\n &lt;ant123&gt;\n  &lt;datatitle&gt;1&lt;/datatitle&gt;\n  &lt;data&gt;1&lt;/data&gt;\n &lt;/ant123&gt;\n &lt;ant123&gt;\n  &lt;datatitle&gt;2&lt;/datatitle&gt;\n  &lt;data&gt;2&lt;/data&gt;\n &lt;/ant123&gt;\n &lt;ant123&gt;\n  &lt;datatitle&gt;3&lt;/datatitle&gt;\n  &lt;data&gt;3&lt;/data&gt;\n &lt;/ant123&gt;\n&lt;/entry&gt;\n</code></pre>\n<p>I want to remove the ant123 element.\nCan you tell me how to solve it?</p>\n"},{"tags":["java","dictionary","hashmap","set","entryset"],"comments":[{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":0,"creation_date":1394971631,"post_id":22436597,"comment_id":34120472,"body_markdown":"Iterate over the set and println ?","body":"Iterate over the set and println ?"}],"answers":[{"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1394971947,"creation_date":1394971947,"answer_id":22436662,"question_id":22436597,"body_markdown":"Just iterate over the `EntrySet` of the `Map` and print\r\n\r\n        for(Map.Entry entry : res.entrySet()){\r\n            System.out.println(entry);\r\n            //System.out.println(entry.getKey() + &quot;=[&quot; + entry.getValue() + &quot;]&quot;);\r\n        }","title":"How to make entrySet() show key-value pairs on new line?(java)","body":"<p>Just iterate over the <code>EntrySet</code> of the <code>Map</code> and print</p>\n\n<pre><code>    for(Map.Entry entry : res.entrySet()){\n        System.out.println(entry);\n        //System.out.println(entry.getKey() + \"=[\" + entry.getValue() + \"]\");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":416701,"reputation":4306,"user_id":792238,"accept_rate":87,"display_name":"Siddhartha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674610156,"creation_date":1674610156,"answer_id":75228924,"question_id":22436597,"body_markdown":"Concise lambda version of @Aniket Thakur&#39;s answer:\r\n\r\n    res.entrySet().forEach(System.out::println);","title":"How to make entrySet() show key-value pairs on new line?(java)","body":"<p>Concise lambda version of @Aniket Thakur's answer:</p>\n<pre><code>res.entrySet().forEach(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":483169,"reputation":23954,"user_id":898042,"accept_rate":57,"display_name":"ERJAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2850,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":22436662,"answer_count":2,"score":2,"last_activity_date":1674610156,"creation_date":1394971554,"question_id":22436597,"body_markdown":"I have a long Map (int, int[] ) ;\r\n\r\nI use map.entrySet() and it returns me the Set view of my map\r\n\r\n\r\n    Map &lt;Integer, ArrayList&lt;Integer&gt;&gt;res = function() ;\r\n\t\tSystem.out.println( res.entrySet() ) ;\r\n\r\n\r\n**i want to show every entry on new line:**\r\n\r\n[1=[1, 47, 432, 433, 527, 678, 679, 680, 820, 904], \r\n\r\n 2=[1, 31, 47, 66, 118, 139, 194, 195, 196, 217]\r\n\r\n 3 = [.............],\r\n\r\n 10 = [..............],\r\n\r\n\r\nbut instead i have it all printed on one line(it&#39;s very long):\r\n\r\n[1=[1, 47, 432, 433, 527, 678, 679, 680, 820, 904], 2=[1, 31, 47, 66, 118, 139, 194, 195, 196, 217], 3=[123,23,.....],............\r\n\r\n\r\n**How to make my set print each key-value pair on new line?** \r\nor is it by default comma after comma and in one line?","title":"How to make entrySet() show key-value pairs on new line?(java)","body":"<p>I have a long Map (int, int[] ) ;</p>\n\n<p>I use map.entrySet() and it returns me the Set view of my map</p>\n\n<pre><code>Map &lt;Integer, ArrayList&lt;Integer&gt;&gt;res = function() ;\n    System.out.println( res.entrySet() ) ;\n</code></pre>\n\n<p><strong>i want to show every entry on new line:</strong></p>\n\n<p>[1=[1, 47, 432, 433, 527, 678, 679, 680, 820, 904], </p>\n\n<p>2=[1, 31, 47, 66, 118, 139, 194, 195, 196, 217]</p>\n\n<p>3 = [.............],</p>\n\n<p>10 = [..............],</p>\n\n<p>but instead i have it all printed on one line(it's very long):</p>\n\n<p>[1=[1, 47, 432, 433, 527, 678, 679, 680, 820, 904], 2=[1, 31, 47, 66, 118, 139, 194, 195, 196, 217], 3=[123,23,.....],............</p>\n\n<p><strong>How to make my set print each key-value pair on new line?</strong> \nor is it by default comma after comma and in one line?</p>\n"},{"tags":["java","arrays","for-loop"],"comments":[{"owner":{"account_id":27614218,"reputation":1,"user_id":21076628,"display_name":"yasmean"},"score":0,"creation_date":1674610122,"post_id":75228906,"comment_id":132750050,"body_markdown":"import java.util.Arrays;\n\npublic class ArrayFunHouseRunner\n{\n\tpublic static void main( String args[] )\n\t{\n\t\tint[] one = {4,10,0,1,7,6,5,3,2,9};\n\n\t\tSystem.out.println(Arrays.toString(one));\n\t\tSystem.out.println(&quot;sum of spots 3-6  =  &quot; + ArrayFunHouse.getSum(one,3,6));\n\t\tSystem.out.println(&quot;sum of spots 2-9  =  &quot; + ArrayFunHouse.getSum(one,2,9));\n\t\tSystem.out.println(&quot;# of 4s  =  &quot; + ArrayFunHouse.getCount(one,4));\n\t\tSystem.out.println(&quot;# of 9s  =  &quot; + ArrayFunHouse.getCount(one,9));\n\n\t\tint[] two = {4,2,3,4,6,7,8,9,0,10,0,1,7,6,5,3,2,9,9,8,7};\n\n\t\t//add test cases\n\n\n\t}\n}","body":"import java.util.Arrays;  public class ArrayFunHouseRunner { \tpublic static void main( String args[] ) \t{ \t\tint[] one = {4,10,0,1,7,6,5,3,2,9};  \t\tSystem.out.println(Arrays.toString(one)); \t\tSystem.out.println(&quot;sum of spots 3-6  =  &quot; + ArrayFunHouse.getSum(one,3,6)); \t\tSystem.out.println(&quot;sum of spots 2-9  =  &quot; + ArrayFunHouse.getSum(one,2,9)); \t\tSystem.out.println(&quot;# of 4s  =  &quot; + ArrayFunHouse.getCount(one,4)); \t\tSystem.out.println(&quot;# of 9s  =  &quot; + ArrayFunHouse.getCount(one,9));  \t\tint[] two = {4,2,3,4,6,7,8,9,0,10,0,1,7,6,5,3,2,9,9,8,7};  \t\t//add test cases   \t} }"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1674610151,"post_id":75228906,"comment_id":132750051,"body_markdown":"Don&#39;t post code in the comments. [Edit] the post and add it with proper formatting.","body":"Don&#39;t post code in the comments. <a href=\"https://stackoverflow.com/posts/75228906/edit\">Edit</a> the post and add it with proper formatting."}],"owner":{"account_id":27614218,"reputation":1,"user_id":21076628,"display_name":"yasmean"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674610102,"creation_date":1674609862,"question_id":75228906,"body_markdown":"I am having trouble getting through my Java labs. I don&#39;t have the best instructor and they are due tomorrow. If someone could help me and give a brief summarization of the code, they would use. I have posted this lab description below and attached the code of the runner file in the comments. \r\n\r\n\r\nLab Description:   Write several array manipulation methods.  One method will sum up a section of a provided array, another method will count up how many of a certain number occur in the array, and the last method will remove all of a certain value from the array.\r\n\r\n\r\n\r\nI have tried a forloop to iterate through the array and select the elements but I am stumped on how to select the range and add them.","title":"Sum of Arrays In Given Range, Count of certain #&#39;s in an Array etc","body":"<p>I am having trouble getting through my Java labs. I don't have the best instructor and they are due tomorrow. If someone could help me and give a brief summarization of the code, they would use. I have posted this lab description below and attached the code of the runner file in the comments.</p>\n<p>Lab Description:   Write several array manipulation methods.  One method will sum up a section of a provided array, another method will count up how many of a certain number occur in the array, and the last method will remove all of a certain value from the array.</p>\n<p>I have tried a forloop to iterate through the array and select the elements but I am stumped on how to select the range and add them.</p>\n"},{"tags":["java","log4j2","lazy-evaluation"],"answers":[{"comments":[{"owner":{"account_id":1141367,"reputation":1568,"user_id":1125172,"accept_rate":71,"display_name":"Linuslabo"},"score":3,"creation_date":1440427354,"post_id":32184284,"comment_id":52255642,"body_markdown":"Clear. So it just postpones String construction and not argument evaluation.","body":"Clear. So it just postpones String construction and not argument evaluation."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":1,"creation_date":1582667299,"post_id":32184284,"comment_id":106854942,"body_markdown":"This answer is about slf4j and doesn&#39;t apply to vanilla log4j in question (at least to log4j 1.x). While it&#39;s possible to use slf4j API to proxy to log4j implementation, the difference between them should be stated clearer. slf4j classes are by no means &quot;internal&quot; to log4j.\nHave a look at [Log4j Implicit String Formatting](https://stackoverflow.com/questions/30975026/log4j-implicit-string-formatting) for more correct answers.","body":"This answer is about slf4j and doesn&#39;t apply to vanilla log4j in question (at least to log4j 1.x). While it&#39;s possible to use slf4j API to proxy to log4j implementation, the difference between them should be stated clearer. slf4j classes are by no means &quot;internal&quot; to log4j. Have a look at <a href=\"https://stackoverflow.com/questions/30975026/log4j-implicit-string-formatting\">Log4j Implicit String Formatting</a> for more correct answers."},{"owner":{"account_id":6561636,"reputation":3683,"user_id":5072526,"accept_rate":57,"display_name":"hinneLinks"},"score":2,"creation_date":1582965733,"post_id":32184284,"comment_id":106964299,"body_markdown":"@Vadzim Thanks for the hint, back then i must had SLF4j on my classpath and went down the wrong rabbit hole. As of the example in the Question and the link to log4j2 the Question is about log4j2, not log4j 1.x. I&#39;v updated the Question, to make it clearer.","body":"@Vadzim Thanks for the hint, back then i must had SLF4j on my classpath and went down the wrong rabbit hole. As of the example in the Question and the link to log4j2 the Question is about log4j2, not log4j 1.x. I&#39;v updated the Question, to make it clearer."}],"tags":[],"owner":{"account_id":6561636,"reputation":3683,"user_id":5072526,"accept_rate":57,"display_name":"hinneLinks"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1582965623,"creation_date":1440424970,"answer_id":32184284,"question_id":32183966,"body_markdown":"I guess what Log4j means, is that with the curly brackets, they avoid constructing a string when its not necessary (e.g. the Level is not Debug):\r\n\r\nWith\r\n\r\n```java\r\nlogger.debug(&quot;Entry number: &quot; + i + &quot; is &quot; + String.valueOf(entry[i]));\r\n```\r\n\r\nthe complete message is always computed even when it will not be logged.\r\n\r\nWith\r\n\r\n```java\r\nlogger.debug(&quot;Entry number: {} is {}&quot;, i, entry[i]);\r\n```\r\n\r\nLog4j can check the Log-Level first and then decide if its worth to construct the message string. This saves resources needed for string concatenation. It will only call `toString()` on the objects supplied if the message is actually being created, saving further computation costs.\r\n\r\nLog4j uses an internal class (`org.apache.logging.log4j.message.ParameterFormatter`) that replaces every `{}` with the arguments provided. It will also catch exceptions thrown by `toString()` and report these failures.\r\n","title":"How does Log4j 2.x implement lazy argument evaluation?","body":"<p>I guess what Log4j means, is that with the curly brackets, they avoid constructing a string when its not necessary (e.g. the Level is not Debug):</p>\n\n<p>With</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>logger.debug(\"Entry number: \" + i + \" is \" + String.valueOf(entry[i]));\n</code></pre>\n\n<p>the complete message is always computed even when it will not be logged.</p>\n\n<p>With</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>logger.debug(\"Entry number: {} is {}\", i, entry[i]);\n</code></pre>\n\n<p>Log4j can check the Log-Level first and then decide if its worth to construct the message string. This saves resources needed for string concatenation. It will only call <code>toString()</code> on the objects supplied if the message is actually being created, saving further computation costs.</p>\n\n<p>Log4j uses an internal class (<code>org.apache.logging.log4j.message.ParameterFormatter</code>) that replaces every <code>{}</code> with the arguments provided. It will also catch exceptions thrown by <code>toString()</code> and report these failures.</p>\n"},{"comments":[{"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"score":0,"creation_date":1583243062,"post_id":60508206,"comment_id":107044477,"body_markdown":"This is worth an upvote as it is a valid option too, although the accepted answer is closer to answering the question that was asked.","body":"This is worth an upvote as it is a valid option too, although the accepted answer is closer to answering the question that was asked."}],"tags":[],"owner":{"account_id":6489979,"reputation":101,"user_id":5448650,"display_name":"Yuriy Mankovskiy"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1583241644,"creation_date":1583241644,"answer_id":60508206,"question_id":32183966,"body_markdown":"To avoid argument evaluation, just wrap it in lambda:\r\n```\r\nlogger.debug(() -&gt; { \r\n   &quot;Entry number: &quot; + i + &quot; is &quot; + String.valueOf(entry[i])\r\n});\r\n```\r\nIn this form, the supplier will be called for construction only before actual logging. Think of it like a function declaration.","title":"How does Log4j 2.x implement lazy argument evaluation?","body":"<p>To avoid argument evaluation, just wrap it in lambda:</p>\n\n<pre><code>logger.debug(() -&gt; { \n   \"Entry number: \" + i + \" is \" + String.valueOf(entry[i])\n});\n</code></pre>\n\n<p>In this form, the supplier will be called for construction only before actual logging. Think of it like a function declaration.</p>\n"},{"tags":[],"owner":{"account_id":6509695,"reputation":6576,"user_id":5037430,"display_name":"u-ways"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674608913,"creation_date":1674608913,"answer_id":75228839,"question_id":32183966,"body_markdown":"In release 2.4, the Logger interface added support for lambda expressions. Such that, Log4j2 loggers can also take in a message supplier that will be lazily evaluated, here is the signature for the info one:\r\n\r\n```java\r\n@Override\r\npublic void info(final Supplier&lt;?&gt; messageSupplier) {\r\n    logIfEnabled(FQCN, Level.INFO, null, messageSupplier, (Throwable) null);\r\n}\r\n```\r\n\r\nThis allows client code to lazily log messages without explicitly checking if the requested log level is enabled. For example, previously you would write:\r\n\r\n```java\r\n// pre-Java 8 style optimization: explicitly check the log level\r\n// to make sure the expensiveOperation() method is only called if necessary\r\nif (logger.isTraceEnabled()) {\r\n    logger.trace(&quot;Some long-running operation returned {}&quot;, expensiveOperation());\r\n}\r\n```\r\n\r\nWith Java 8 and above you can achieve the same effect with a lambda expression. You no longer need to explicitly check the log level:\r\n\r\n```\r\n// Java-8 style optimization: no need to explicitly check the log level:\r\n// the lambda expression is not evaluated if the TRACE level is not enabled\r\nlogger.trace(&quot;Some long-running operation returned {}&quot;, () -&gt; expensiveOperation());\r\n```\r\n\r\n\r\nFor Kotlin, there is a [Kotlin logging facade based on Log4j 2](https://github.com/apache/logging-log4j-kotlin) in which the signature is as follow:\r\n\r\n```kotlin\r\nfun info(supplier: () -&gt; Any?) {\r\n    delegate.logIfEnabled(FQCN, Level.INFO, null, supplier.asLog4jSupplier(), null)\r\n}\r\n```\r\n\r\nAnd here is a usage example:\r\n\r\n```kotlin\r\nlogger.info { &quot;This is a log event&quot; }\r\n```\r\n\r\nBoth will avoid the cost of parameter construction.","title":"How does Log4j 2.x implement lazy argument evaluation?","body":"<p>In release 2.4, the Logger interface added support for lambda expressions. Such that, Log4j2 loggers can also take in a message supplier that will be lazily evaluated, here is the signature for the info one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void info(final Supplier&lt;?&gt; messageSupplier) {\n    logIfEnabled(FQCN, Level.INFO, null, messageSupplier, (Throwable) null);\n}\n</code></pre>\n<p>This allows client code to lazily log messages without explicitly checking if the requested log level is enabled. For example, previously you would write:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// pre-Java 8 style optimization: explicitly check the log level\n// to make sure the expensiveOperation() method is only called if necessary\nif (logger.isTraceEnabled()) {\n    logger.trace(&quot;Some long-running operation returned {}&quot;, expensiveOperation());\n}\n</code></pre>\n<p>With Java 8 and above you can achieve the same effect with a lambda expression. You no longer need to explicitly check the log level:</p>\n<pre><code>// Java-8 style optimization: no need to explicitly check the log level:\n// the lambda expression is not evaluated if the TRACE level is not enabled\nlogger.trace(&quot;Some long-running operation returned {}&quot;, () -&gt; expensiveOperation());\n</code></pre>\n<p>For Kotlin, there is a <a href=\"https://github.com/apache/logging-log4j-kotlin\" rel=\"nofollow noreferrer\">Kotlin logging facade based on Log4j 2</a> in which the signature is as follow:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun info(supplier: () -&gt; Any?) {\n    delegate.logIfEnabled(FQCN, Level.INFO, null, supplier.asLog4jSupplier(), null)\n}\n</code></pre>\n<p>And here is a usage example:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>logger.info { &quot;This is a log event&quot; }\n</code></pre>\n<p>Both will avoid the cost of parameter construction.</p>\n"}],"owner":{"account_id":1141367,"reputation":1568,"user_id":1125172,"accept_rate":71,"display_name":"Linuslabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13009,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":32184284,"answer_count":3,"score":21,"last_activity_date":1674608913,"creation_date":1440424065,"question_id":32183966,"body_markdown":"Given the [Java argument evaluation mechanism][1], how does **Log4j 2.x** implement [lazy evaluation][2] when formatting the message with curly brackets &quot;to avoid the cost of parameter construction&quot; when log is disabled?\r\n\r\ne.g.\r\n\r\n    logger.debug(&quot;Entry number: {} is {}&quot;, i, entry[i]);\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.4.2\r\n  [2]: https://logging.apache.org/log4j/2.x/performance.html","title":"How does Log4j 2.x implement lazy argument evaluation?","body":"<p>Given the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.12.4.2\" rel=\"noreferrer\">Java argument evaluation mechanism</a>, how does <strong>Log4j 2.x</strong> implement <a href=\"https://logging.apache.org/log4j/2.x/performance.html\" rel=\"noreferrer\">lazy evaluation</a> when formatting the message with curly brackets \"to avoid the cost of parameter construction\" when log is disabled?</p>\n\n<p>e.g.</p>\n\n<pre><code>logger.debug(\"Entry number: {} is {}\", i, entry[i]);\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-security","spring-authorization-server"],"comments":[{"owner":{"account_id":21488921,"reputation":4730,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":0,"creation_date":1672934584,"post_id":75017634,"comment_id":132389393,"body_markdown":"I don&#39;t understand your use of a second `RegisteredClientRepository` marked `@Bean @Primary`. This doesn&#39;t seem necessary. Please also enable trace logging for the `org.springframework.security` package and include the logs from the failed flow.","body":"I don&#39;t understand your use of a second <code>RegisteredClientRepository</code> marked <code>@Bean @Primary</code>. This doesn&#39;t seem necessary. Please also enable trace logging for the <code>org.springframework.security</code> package and include the logs from the failed flow."},{"owner":{"account_id":3942771,"reputation":35,"user_id":3256484,"display_name":"Christian Osterrieder"},"score":0,"creation_date":1673339029,"post_id":75017634,"comment_id":132470583,"body_markdown":"Steve, thanks for the tip, I was able to solve it with that.","body":"Steve, thanks for the tip, I was able to solve it with that."}],"owner":{"account_id":3942771,"reputation":35,"user_id":3256484,"display_name":"Christian Osterrieder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1674608623,"creation_date":1672917570,"question_id":75017634,"body_markdown":"I&#39;m trying to develop a spring-authorization-server 1.0.1 with Spring Boot 3 and JPA.\r\nDoes anyone have experience with it?\r\n\r\nWhen I try to authenticate I get the error message:\r\n\r\n`No AuthenticationProvider found for org.springframework.security.authentication.UsernamePasswordAuthenticationToken`\r\n\r\n\r\n\r\n\r\n\r\nHere is my AuthorizationServerConfig:\r\n\r\n```\r\n@Configuration(proxyBeanMethods = false)\r\npublic class AuthorizationServerConfig {\r\n\r\n    @Autowired\r\n    JpaRegisteredClientRepository jpaRegisteredClientRepository;\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthorizationServerConfig.class);\r\n\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    /**\r\n     * A Spring Security filter chain for the Protocol Endpoints.\r\n     * aus Doku &#252;bernommen (1)\r\n     */\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\r\n                .oidc(Customizer.withDefaults());\t// Enable OpenID Connect 1.0\r\n        http\r\n                // Redirect to the login page when not authenticated from the\r\n                // authorization endpoint\r\n                .exceptionHandling((exceptions) -&gt; exceptions\r\n                        .authenticationEntryPoint(\r\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\r\n                )\r\n                // Accept access tokens for User Info and/or Client Registration\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\r\n        return http.build();\r\n\r\n    }\r\n\r\n    @Bean\r\n    @Order(2)\r\n    /**\r\n     * A Spring Security filter chain for authentication.\r\n     */\r\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\r\n            throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .anyRequest().authenticated()\r\n                )\r\n                // Form login handles the redirect to the login page from the\r\n                // authorization server filter chain\r\n                .formLogin(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    /**\r\n     * An instance of UserDetailsService for retrieving users to authenticate.\r\n     */\r\n    public UserDetailsService userDetailsService() {\r\n        UserDetails userDetails = User.withDefaultPasswordEncoder()\r\n                .username(&quot;utilo&quot;)\r\n                .password(&quot;utilo&quot;)\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n\r\n        return new InMemoryUserDetailsManager(userDetails);\r\n    }\r\n\r\n    /**\r\n     * \tAn instance of RegisteredClientRepository for managing clients.\r\n     * in Doku vorhanden (4)\r\n     */\r\n    @Bean\r\n    @Primary\r\n    public RegisteredClientRepository registeredClientRepository() {\r\n\r\n        RegisteredClient client = jpaRegisteredClientRepository.findByClientId(&quot;utilo-client&quot;);\r\n        List&lt;RegisteredClient&gt; registrations = new Vector&lt;RegisteredClient&gt;();\r\n        registrations.add(client);\r\n\r\n        InMemoryRegisteredClientRepository inMemoryRegisteredClientRepository\r\n                = new InMemoryRegisteredClientRepository(registrations);\r\n        return inMemoryRegisteredClientRepository;\r\n\r\n    }\r\n\r\n    /*\r\n     * Generate the private/public key pair for signature of JWT.\r\n     */\r\n    @Bean\r\n    /**\r\n     * An instance of com.nimbusds.jose.jwk.source.JWKSource for signing access tokens.\r\n     */\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\r\n        KeyPair keyPair = generateRsaKey();\r\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\r\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\r\n        RSAKey rsaKey = new RSAKey.Builder(publicKey)\r\n                .privateKey(privateKey)\r\n                .keyID(UUID.randomUUID().toString())\r\n                .build();\r\n        JWKSet jwkSet = new JWKSet(rsaKey);\r\n        return new ImmutableJWKSet&lt;&gt;(jwkSet);\r\n    }\r\n\r\n    /**\r\n     * An instance of java.security.KeyPair with keys generated on startup used to create the JWKSource above.\r\n     */\r\n    private static KeyPair generateRsaKey() {\r\n        KeyPair keyPair;\r\n        try {\r\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\r\n            keyPairGenerator.initialize(2048);\r\n            keyPair = keyPairGenerator.generateKeyPair();\r\n        }\r\n        catch (Exception ex) {\r\n            throw new IllegalStateException(ex);\r\n        }\r\n        return keyPair;\r\n    }\r\n\r\n    @Bean\r\n    /**\r\n     * \tAn instance of JwtDecoder for decoding signed access tokens.\r\n     */\r\n    public JwtDecoder jwtDecoder(JWKSource&lt;SecurityContext&gt; jwkSource) {\r\n        return OAuth2AuthorizationServerConfiguration.jwtDecoder(jwkSource);\r\n    }\r\n\r\n    @Bean\r\n    /**\r\n     * An instance of AuthorizationServerSettings to configure Spring Authorization Server.\r\n     */\r\n    public AuthorizationServerSettings authorizationServerSettings() {\r\n        return AuthorizationServerSettings.builder().build();\r\n    }\r\n\r\n    @Bean\r\n    PasswordEncoder passwordEncoder() {\r\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\n\r\nPlease let me know if more problem solving classes are needed.","title":"spring-authorization-server 1.0.1 / JPA (MySQL)","body":"<p>I'm trying to develop a spring-authorization-server 1.0.1 with Spring Boot 3 and JPA.\nDoes anyone have experience with it?</p>\n<p>When I try to authenticate I get the error message:</p>\n<p><code>No AuthenticationProvider found for org.springframework.security.authentication.UsernamePasswordAuthenticationToken</code></p>\n<p>Here is my AuthorizationServerConfig:</p>\n<pre><code>@Configuration(proxyBeanMethods = false)\npublic class AuthorizationServerConfig {\n\n    @Autowired\n    JpaRegisteredClientRepository jpaRegisteredClientRepository;\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthorizationServerConfig.class);\n\n    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    /**\n     * A Spring Security filter chain for the Protocol Endpoints.\n     * aus Doku übernommen (1)\n     */\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\n\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)\n                .oidc(Customizer.withDefaults());   // Enable OpenID Connect 1.0\n        http\n                // Redirect to the login page when not authenticated from the\n                // authorization endpoint\n                .exceptionHandling((exceptions) -&gt; exceptions\n                        .authenticationEntryPoint(\n                                new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;))\n                )\n                // Accept access tokens for User Info and/or Client Registration\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n\n        return http.build();\n\n    }\n\n    @Bean\n    @Order(2)\n    /**\n     * A Spring Security filter chain for authentication.\n     */\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http)\n            throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .anyRequest().authenticated()\n                )\n                // Form login handles the redirect to the login page from the\n                // authorization server filter chain\n                .formLogin(Customizer.withDefaults());\n\n        return http.build();\n    }\n\n    @Bean\n    /**\n     * An instance of UserDetailsService for retrieving users to authenticate.\n     */\n    public UserDetailsService userDetailsService() {\n        UserDetails userDetails = User.withDefaultPasswordEncoder()\n                .username(&quot;utilo&quot;)\n                .password(&quot;utilo&quot;)\n                .roles(&quot;USER&quot;)\n                .build();\n\n        return new InMemoryUserDetailsManager(userDetails);\n    }\n\n    /**\n     *  An instance of RegisteredClientRepository for managing clients.\n     * in Doku vorhanden (4)\n     */\n    @Bean\n    @Primary\n    public RegisteredClientRepository registeredClientRepository() {\n\n        RegisteredClient client = jpaRegisteredClientRepository.findByClientId(&quot;utilo-client&quot;);\n        List&lt;RegisteredClient&gt; registrations = new Vector&lt;RegisteredClient&gt;();\n        registrations.add(client);\n\n        InMemoryRegisteredClientRepository inMemoryRegisteredClientRepository\n                = new InMemoryRegisteredClientRepository(registrations);\n        return inMemoryRegisteredClientRepository;\n\n    }\n\n    /*\n     * Generate the private/public key pair for signature of JWT.\n     */\n    @Bean\n    /**\n     * An instance of com.nimbusds.jose.jwk.source.JWKSource for signing access tokens.\n     */\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        KeyPair keyPair = generateRsaKey();\n        RSAPublicKey publicKey = (RSAPublicKey) keyPair.getPublic();\n        RSAPrivateKey privateKey = (RSAPrivateKey) keyPair.getPrivate();\n        RSAKey rsaKey = new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return new ImmutableJWKSet&lt;&gt;(jwkSet);\n    }\n\n    /**\n     * An instance of java.security.KeyPair with keys generated on startup used to create the JWKSource above.\n     */\n    private static KeyPair generateRsaKey() {\n        KeyPair keyPair;\n        try {\n            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;);\n            keyPairGenerator.initialize(2048);\n            keyPair = keyPairGenerator.generateKeyPair();\n        }\n        catch (Exception ex) {\n            throw new IllegalStateException(ex);\n        }\n        return keyPair;\n    }\n\n    @Bean\n    /**\n     *  An instance of JwtDecoder for decoding signed access tokens.\n     */\n    public JwtDecoder jwtDecoder(JWKSource&lt;SecurityContext&gt; jwkSource) {\n        return OAuth2AuthorizationServerConfiguration.jwtDecoder(jwkSource);\n    }\n\n    @Bean\n    /**\n     * An instance of AuthorizationServerSettings to configure Spring Authorization Server.\n     */\n    public AuthorizationServerSettings authorizationServerSettings() {\n        return AuthorizationServerSettings.builder().build();\n    }\n\n    @Bean\n    PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p>Please let me know if more problem solving classes are needed.</p>\n"},{"tags":["java","oop","arraylist"],"comments":[{"owner":{"display_name":"user6073886"},"score":6,"creation_date":1674493897,"post_id":75212822,"comment_id":132721014,"body_markdown":"You can either change the scope of your ArrayList from a local variable to a field, or you pass it into the methods as an argument.","body":"You can either change the scope of your ArrayList from a local variable to a field, or you pass it into the methods as an argument."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1674496916,"post_id":75212822,"comment_id":132721922,"body_markdown":"Only because _design_ is part of the question:  directly exposing and passing around a data structure is a bit smelly in the context of your question.  Consider creating a class, such as `People`, that encapsulates  the list.  The class would provide methods, such as `changeName(...)`, and the People object is passed around (rather than the naked data structure).","body":"Only because <i>design</i> is part of the question:  directly exposing and passing around a data structure is a bit smelly in the context of your question.  Consider creating a class, such as <code>People</code>, that encapsulates  the list.  The class would provide methods, such as <code>changeName(...)</code>, and the People object is passed around (rather than the naked data structure)."}],"answers":[{"comments":[{"owner":{"account_id":26501835,"reputation":3,"user_id":20138656,"display_name":"rainbow"},"score":0,"creation_date":1674496687,"post_id":75213085,"comment_id":132721848,"body_markdown":"Thanks! But don&#39;t these methods of exposing the list disrupt encapsulation?","body":"Thanks! But don&#39;t these methods of exposing the list disrupt encapsulation?"},{"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"score":1,"creation_date":1674499115,"post_id":75213085,"comment_id":132722527,"body_markdown":"As written, you&#39;ve declared `personList` as an instance member of class `Main`. Your `main()` method is static, though, which it should be. But since `main()` is static, it cannot reference the instance member `personList`. Static methods can only access other static methods and static members. The opposite is not true, though. Instance methods can access both instance and static members.","body":"As written, you&#39;ve declared <code>personList</code> as an instance member of class <code>Main</code>. Your <code>main()</code> method is static, though, which it should be. But since <code>main()</code> is static, it cannot reference the instance member <code>personList</code>. Static methods can only access other static methods and static members. The opposite is not true, though. Instance methods can access both instance and static members."},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1674608232,"post_id":75213085,"comment_id":132749799,"body_markdown":"@rainbow hmm... what do you mean by disrupting encapsulation? Everything is fine within the Person class... Concerning the class where main method is in, if you are afraid that other classes can access the &quot;personList&quot;, you can declare it private, although by default &quot;personList&quot; is accessible only within the classes of the same package(&quot;folder&quot;)","body":"@rainbow hmm... what do you mean by disrupting encapsulation? Everything is fine within the Person class... Concerning the class where main method is in, if you are afraid that other classes can access the &quot;personList&quot;, you can declare it private, although by default &quot;personList&quot; is accessible only within the classes of the same package(&quot;folder&quot;)"},{"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"score":0,"creation_date":1674608275,"post_id":75213085,"comment_id":132749807,"body_markdown":"@Idle_Mind , yeah that makes sense, forgot to add static keyword to the field","body":"@Idle_Mind , yeah that makes sense, forgot to add static keyword to the field"}],"tags":[],"owner":{"account_id":16683494,"reputation":126,"user_id":12058001,"display_name":"Aitsuken"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674608288,"creation_date":1674495429,"answer_id":75213085,"question_id":75212822,"body_markdown":"You can declare the list outside of main method making it global to the class like this:\r\n\r\n    public class Main{\r\n    \r\n         //making your list accessible to other methods within the class\r\n         static ArrayList&lt;Person&gt; personList;\r\n         public static void main(String[] args){\r\n             personList = new ArrayList&lt;Person&gt;();\r\n             Person person1 = new Person(&quot;Daniel&quot;);\r\n             personList.add(person1);\r\n         }\r\n         //Your methods ...\r\n         // ...\r\n    }\r\n\r\nAlso you can pass in the list to the parameters of the method:\r\n\r\n    public static void addPerson(ArrayList&lt;Person&gt; list, Person person){\r\n        list.add(person);\r\n    }\r\n\r\n","title":"Designing methods for manipulating arraylist in java","body":"<p>You can declare the list outside of main method making it global to the class like this:</p>\n<pre><code>public class Main{\n\n     //making your list accessible to other methods within the class\n     static ArrayList&lt;Person&gt; personList;\n     public static void main(String[] args){\n         personList = new ArrayList&lt;Person&gt;();\n         Person person1 = new Person(&quot;Daniel&quot;);\n         personList.add(person1);\n     }\n     //Your methods ...\n     // ...\n}\n</code></pre>\n<p>Also you can pass in the list to the parameters of the method:</p>\n<pre><code>public static void addPerson(ArrayList&lt;Person&gt; list, Person person){\n    list.add(person);\n}\n</code></pre>\n"}],"owner":{"account_id":26501835,"reputation":3,"user_id":20138656,"display_name":"rainbow"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674608288,"creation_date":1674493794,"question_id":75212822,"body_markdown":"I&#39;m creating an ArrayList of objects in main and need to create separate public methods for various manipulations with them from outside the main.\r\nBut such methods can&#39;t see my ArrayList. For instance, if the object is a Person with some fields, like name and I need a separate method to access the list of Persons, iterate through it, see if a person with this name already exists to change or retrieve the name.\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tArrayList&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();\r\n\t\tPerson person1 = new Person(&quot;Daniel&quot;);\r\n\t\tpersonList.add(person1);\r\n\t\t\t\t\r\n\t}\r\n\tpublic boolean changeName(String name) {\r\n\t\t//how to reach the list to iterate and manipulate it from here?\t\t\r\n\treturn true;\r\n\t\t\r\n\t}\r\n\r\n","title":"Designing methods for manipulating arraylist in java","body":"<p>I'm creating an ArrayList of objects in main and need to create separate public methods for various manipulations with them from outside the main.\nBut such methods can't see my ArrayList. For instance, if the object is a Person with some fields, like name and I need a separate method to access the list of Persons, iterate through it, see if a person with this name already exists to change or retrieve the name.</p>\n<pre><code>public static void main(String[] args) {\n    \n    ArrayList&lt;Person&gt; personList = new ArrayList&lt;Person&gt;();\n    Person person1 = new Person(&quot;Daniel&quot;);\n    personList.add(person1);\n            \n}\npublic boolean changeName(String name) {\n    //how to reach the list to iterate and manipulate it from here?     \nreturn true;\n    \n}\n</code></pre>\n"},{"tags":["java","jar","executable-jar"],"owner":{"account_id":10237752,"reputation":1314,"user_id":7556091,"display_name":"progquester"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674612787,"answer_count":0,"score":0,"last_activity_date":1674608166,"creation_date":1674607777,"question_id":75228763,"body_markdown":"For example:\r\n```bash\r\n$ tree obj/\r\nobj/\r\n└── com\r\n    ├── deps\r\n    │&#160;&#160; └── Dog.class\r\n    └── test\r\n        └── Main.class\r\n\r\n3 directories, 2 files\r\n```\r\n\r\nI want add `com/deps/Dog.class` and `com/test/Main.class` to my `target.jar `file. I always cd the `obj` path then run:\r\n```bash\r\n$ cd obj\r\n$ jar cvf ../target.jar .\r\nadded manifest\r\nadding: com/(in = 0) (out= 0)(stored 0%)\r\nadding: com/test/(in = 0) (out= 0)(stored 0%)\r\nadding: com/test/Main.class(in = 506) (out= 352)(deflated 30%)\r\nadding: com/deps/(in = 0) (out= 0)(stored 0%)\r\nadding: com/deps/Dog.class(in = 908) (out= 507)(deflated 44%)\r\n```\r\n\r\nIf I run `jar target.jar obj/` in current directory:\r\n```bash\r\n$ jar cvf target.jar obj/\r\nadded manifest\r\nadding: obj/(in = 0) (out= 0)(stored 0%)\r\nadding: obj/com/(in = 0) (out= 0)(stored 0%)\r\nadding: obj/com/test/(in = 0) (out= 0)(stored 0%)\r\nadding: obj/com/test/Main.class(in = 506) (out= 352)(deflated 30%)\r\nadding: obj/com/deps/(in = 0) (out= 0)(stored 0%)\r\nadding: obj/com/deps/Dog.class(in = 908) (out= 507)(deflated 44%)\r\n```\r\n\r\nNoticed that an invalid prefix path `obj` added. Is there any argument can remove `obj/` from the entries?","title":"How to remove the prefix path name when packing classes into a jar by jar command?","body":"<p>For example:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ tree obj/\nobj/\n└── com\n    ├── deps\n    │   └── Dog.class\n    └── test\n        └── Main.class\n\n3 directories, 2 files\n</code></pre>\n<p>I want add <code>com/deps/Dog.class</code> and <code>com/test/Main.class</code> to my <code>target.jar </code>file. I always cd the <code>obj</code> path then run:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ cd obj\n$ jar cvf ../target.jar .\nadded manifest\nadding: com/(in = 0) (out= 0)(stored 0%)\nadding: com/test/(in = 0) (out= 0)(stored 0%)\nadding: com/test/Main.class(in = 506) (out= 352)(deflated 30%)\nadding: com/deps/(in = 0) (out= 0)(stored 0%)\nadding: com/deps/Dog.class(in = 908) (out= 507)(deflated 44%)\n</code></pre>\n<p>If I run <code>jar target.jar obj/</code> in current directory:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ jar cvf target.jar obj/\nadded manifest\nadding: obj/(in = 0) (out= 0)(stored 0%)\nadding: obj/com/(in = 0) (out= 0)(stored 0%)\nadding: obj/com/test/(in = 0) (out= 0)(stored 0%)\nadding: obj/com/test/Main.class(in = 506) (out= 352)(deflated 30%)\nadding: obj/com/deps/(in = 0) (out= 0)(stored 0%)\nadding: obj/com/deps/Dog.class(in = 908) (out= 507)(deflated 44%)\n</code></pre>\n<p>Noticed that an invalid prefix path <code>obj</code> added. Is there any argument can remove <code>obj/</code> from the entries?</p>\n"},{"tags":["java","xml","pretty-print"],"comments":[{"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"score":0,"creation_date":1250064868,"post_id":139076,"comment_id":1092386,"body_markdown":"check this question: http://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-ja","body":"check this question: <a href=\"http://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-ja\" title=\"pretty printing output from javax xml transform transformer with only standard ja\">stackoverflow.com/questions/1264849/&hellip;</a>"},{"owner":{"account_id":42603,"reputation":1238,"user_id":124123,"accept_rate":100,"display_name":"Abel Morelos"},"score":10,"creation_date":1286385683,"post_id":139076,"comment_id":4123441,"body_markdown":"Just curious, are you sending this output to a XML file or something else where the indenting really matters? Some time ago I was very concerned about formatting my XML in order to have it properly displayed... but after spending a bunch of time on this I realized that I had to send my output to a web browser, and any relatively modern web browser will actually display the XML in a nice tree structure, so I could forget about this issue and move on. I&#39;m mentioning this just in case you (or other user with the same problem) could have overlooked the same detail.","body":"Just curious, are you sending this output to a XML file or something else where the indenting really matters? Some time ago I was very concerned about formatting my XML in order to have it properly displayed... but after spending a bunch of time on this I realized that I had to send my output to a web browser, and any relatively modern web browser will actually display the XML in a nice tree structure, so I could forget about this issue and move on. I&#39;m mentioning this just in case you (or other user with the same problem) could have overlooked the same detail."},{"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"score":4,"creation_date":1286398129,"post_id":139076,"comment_id":4125450,"body_markdown":"@Abel, saving to text files, inserting into an HTML textareas, and dumping to the console for debugging purposes.","body":"@Abel, saving to text files, inserting into an HTML textareas, and dumping to the console for debugging purposes."},{"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"score":6,"creation_date":1531739951,"post_id":139076,"comment_id":89693203,"body_markdown":"&quot;put on hold as too broad&quot; - it is hard to be more precise than the question currently is!","body":"&quot;put on hold as too broad&quot; - it is hard to be more precise than the question currently is!"}],"answers":[{"comments":[{"owner":{"account_id":86417,"reputation":38255,"user_id":240337,"accept_rate":78,"display_name":"Thang Pham"},"score":1,"creation_date":1311103573,"post_id":139096,"comment_id":8005006,"body_markdown":"How to make so that the output wont contain `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;`?","body":"How to make so that the output wont contain <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code>?"},{"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"score":28,"creation_date":1440532890,"post_id":139096,"comment_id":52309879,"body_markdown":"To omit `&lt;?xml ...&gt;` declaration, add `transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;)`","body":"To omit <code>&lt;?xml ...&gt;</code> declaration, add <code>transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATIO&zwnj;&#8203;N, &quot;yes&quot;)</code>"},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":5,"creation_date":1446718819,"post_id":139096,"comment_id":54864174,"body_markdown":"Casual readers may find useful an improved version of the solution described here (http://stackoverflow.com/a/33541820/363573).","body":"Casual readers may find useful an improved version of the solution described here (<a href=\"http://stackoverflow.com/a/33541820/363573\">stackoverflow.com/a/33541820/363573</a>)."},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":1,"creation_date":1595340221,"post_id":139096,"comment_id":111436420,"body_markdown":"This solution removes `CDATA` wrappers. Is there a flag to prevent it?","body":"This solution removes <code>CDATA</code> wrappers. Is there a flag to prevent it?"}],"tags":[],"owner":{"account_id":4384,"reputation":6071,"user_id":2273540,"display_name":"Lorenzo Boccaccia"},"comment_count":4,"down_vote_count":4,"up_vote_count":311,"is_accepted":false,"score":307,"last_activity_date":1662106607,"creation_date":1222432001,"answer_id":139096,"question_id":139076,"body_markdown":"```java\r\nTransformer transformer = TransformerFactory.newInstance().newTransformer();\r\ntransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\ntransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n// initialize StreamResult with File object to save to file\r\nStreamResult result = new StreamResult(new StringWriter());\r\nDOMSource source = new DOMSource(doc);\r\ntransformer.transform(source, result);\r\nString xmlString = result.getWriter().toString();\r\nSystem.out.println(xmlString);\r\n```\r\nNote: Results may vary depending on the Java version. Search for workarounds specific to your platform.","title":"How to pretty print XML from Java?","body":"<pre class=\"lang-java prettyprint-override\"><code>Transformer transformer = TransformerFactory.newInstance().newTransformer();\ntransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\ntransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\n// initialize StreamResult with File object to save to file\nStreamResult result = new StreamResult(new StringWriter());\nDOMSource source = new DOMSource(doc);\ntransformer.transform(source, result);\nString xmlString = result.getWriter().toString();\nSystem.out.println(xmlString);\n</code></pre>\n<p>Note: Results may vary depending on the Java version. Search for workarounds specific to your platform.</p>\n"},{"comments":[{"owner":{"account_id":25497,"reputation":1347,"user_id":65555,"accept_rate":73,"display_name":"David Easley"},"score":1,"creation_date":1274957498,"post_id":139333,"comment_id":2972685,"body_markdown":"&quot;However, if you know your XML string is valid ...&quot; good point. See my solution based on this approach below.","body":"&quot;However, if you know your XML string is valid ...&quot; good point. See my solution based on this approach below."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674123773,"post_id":139333,"comment_id":132649357,"body_markdown":"This answer is incorrect. It is simply not true that you need to convert to a DOM. Other answers show how to do a direct transformation from a `StreamSource` to a `StreamResult`; these solutions achieve the desired effect without the overhead of building a DOM in memory.","body":"This answer is incorrect. It is simply not true that you need to convert to a DOM. Other answers show how to do a direct transformation from a <code>StreamSource</code> to a <code>StreamResult</code>; these solutions achieve the desired effect without the overhead of building a DOM in memory."}],"tags":[],"owner":{"account_id":11636,"reputation":41624,"user_id":22514,"accept_rate":86,"display_name":"Kevin Hakanson"},"comment_count":2,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1674608071,"creation_date":1222433903,"answer_id":139333,"question_id":139076,"body_markdown":"Since you are starting with a `String`, you can convert to a `DOM` object (e.g. `Node`) before you use the `Transformer`.   However, if you know your XML string is valid, and you don&#39;t want to incur the memory overhead of parsing a string into a DOM, then running a transform over the DOM to get a string back - you could just do some old fashioned character by character parsing.  Insert a newline and spaces after every `&lt;/...&gt;` characters, keep and indent counter (to determine the number of spaces) that you increment for every `&lt;...&gt;` and decrement for every `&lt;/...&gt;` you see.\r\n\r\nDisclaimer - I did a cut/paste/text edit of the functions below, so they may not compile as is.\r\n\r\n    public static final Element createDOM(String strXML) \r\n        throws ParserConfigurationException, SAXException, IOException {\r\n    \r\n    \tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n    \tdbf.setValidating(true);\r\n    \tDocumentBuilder db = dbf.newDocumentBuilder();\r\n    \tInputSource sourceXML = new InputSource(new StringReader(strXML));\r\n    \tDocument xmlDoc = db.parse(sourceXML);\r\n    \tElement e = xmlDoc.getDocumentElement();\r\n    \te.normalize();\r\n    \treturn e;\r\n    }\r\n    \r\n    public static final void prettyPrint(Node xml, OutputStream out)\r\n        throws TransformerConfigurationException, TransformerFactoryConfigurationError, TransformerException {\r\n    \tTransformer tf = TransformerFactory.newInstance().newTransformer();\r\n    \ttf.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n    \ttf.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n    \ttf.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n    \ttf.transform(new DOMSource(xml), new StreamResult(out));\r\n    }\r\n\r\n","title":"How to pretty print XML from Java?","body":"<p>Since you are starting with a <code>String</code>, you can convert to a <code>DOM</code> object (e.g. <code>Node</code>) before you use the <code>Transformer</code>.   However, if you know your XML string is valid, and you don't want to incur the memory overhead of parsing a string into a DOM, then running a transform over the DOM to get a string back - you could just do some old fashioned character by character parsing.  Insert a newline and spaces after every <code>&lt;/...&gt;</code> characters, keep and indent counter (to determine the number of spaces) that you increment for every <code>&lt;...&gt;</code> and decrement for every <code>&lt;/...&gt;</code> you see.</p>\n<p>Disclaimer - I did a cut/paste/text edit of the functions below, so they may not compile as is.</p>\n<pre><code>public static final Element createDOM(String strXML) \n    throws ParserConfigurationException, SAXException, IOException {\n\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n    dbf.setValidating(true);\n    DocumentBuilder db = dbf.newDocumentBuilder();\n    InputSource sourceXML = new InputSource(new StringReader(strXML));\n    Document xmlDoc = db.parse(sourceXML);\n    Element e = xmlDoc.getDocumentElement();\n    e.normalize();\n    return e;\n}\n\npublic static final void prettyPrint(Node xml, OutputStream out)\n    throws TransformerConfigurationException, TransformerFactoryConfigurationError, TransformerException {\n    Transformer tf = TransformerFactory.newInstance().newTransformer();\n    tf.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\n    tf.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\n    tf.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n    tf.transform(new DOMSource(xml), new StreamResult(out));\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":90762,"reputation":4440,"user_id":249672,"display_name":"khylo"},"score":13,"creation_date":1292603326,"post_id":139426,"comment_id":4888953,"body_markdown":"Just to note that this answer requires the use of Xerces.\n\nIf you don&#39;t want to add this dependency then you can simply use the standard jdk libraries and javax.xml.transform.Transformer (see my answer below)","body":"Just to note that this answer requires the use of Xerces.  If you don&#39;t want to add this dependency then you can simply use the standard jdk libraries and javax.xml.transform.Transformer (see my answer below)"},{"owner":{"account_id":88881,"reputation":37434,"user_id":245602,"accept_rate":55,"display_name":"George Hawkins"},"score":45,"creation_date":1304498588,"post_id":139426,"comment_id":6763258,"body_markdown":"Back in 2008 this was a good answer, but now this can all be done with standard JDK classes rather than Apache classes. See http://xerces.apache.org/xerces2-j/faq-general.html#faq-6. Yes this is a Xerces FAQ but the answer covers standard JDK classes. The initial 1.5 implementation of these classes had many issues but everything works fine from 1.6 on. Copy the LSSerializer example in the FAQ, chop the &quot;...&quot; bit and add `writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);` after the `LSSerializer writer = ...` line.","body":"Back in 2008 this was a good answer, but now this can all be done with standard JDK classes rather than Apache classes. See <a href=\"http://xerces.apache.org/xerces2-j/faq-general.html#faq-6\" rel=\"nofollow noreferrer\">xerces.apache.org/xerces2-j/faq-general.html#faq-6</a>. Yes this is a Xerces FAQ but the answer covers standard JDK classes. The initial 1.5 implementation of these classes had many issues but everything works fine from 1.6 on. Copy the LSSerializer example in the FAQ, chop the &quot;...&quot; bit and add <code>writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);</code> after the <code>LSSerializer writer = ...</code> line."},{"owner":{"account_id":440791,"reputation":2777,"user_id":830545,"accept_rate":76,"display_name":"samwell"},"score":2,"creation_date":1342457563,"post_id":139426,"comment_id":15207259,"body_markdown":"I&#39;ve created a small class using the example Apache gave, which @GeorgeHawkins gave a link to. It was missing how the variable `document` was initialized, so I thought I might add in the deceleration and make a quick example out of it. Let me know if I should change something, http://pastebin.com/XL7932aC","body":"I&#39;ve created a small class using the example Apache gave, which @GeorgeHawkins gave a link to. It was missing how the variable <code>document</code> was initialized, so I thought I might add in the deceleration and make a quick example out of it. Let me know if I should change something, <a href=\"http://pastebin.com/XL7932aC\" rel=\"nofollow noreferrer\">pastebin.com/XL7932aC</a>"},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":0,"creation_date":1416244586,"post_id":139426,"comment_id":42490783,"body_markdown":"it is not true that you can do that with jdk only. at least not reliably. it depends on some internal registry implementation that is not active with my jdk7u72 by default. so you still better use the apache stuff directly.","body":"it is not true that you can do that with jdk only. at least not reliably. it depends on some internal registry implementation that is not active with my jdk7u72 by default. so you still better use the apache stuff directly."},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1446718874,"post_id":139426,"comment_id":54864200,"body_markdown":"Here is a solution without any dependencies :http://stackoverflow.com/a/33541820/363573.","body":"Here is a solution without any dependencies :<a href=\"http://stackoverflow.com/a/33541820/363573\">stackoverflow.com/a/33541820/363573</a>."},{"owner":{"account_id":4756808,"reputation":4262,"user_id":4206925,"accept_rate":80,"display_name":"MewX"},"score":0,"creation_date":1538716032,"post_id":139426,"comment_id":92247732,"body_markdown":"I&#39;m actually maintaining a 2008-year project LOL, thanks!","body":"I&#39;m actually maintaining a 2008-year project LOL, thanks!"},{"owner":{"account_id":6963747,"reputation":530,"user_id":5342459,"accept_rate":61,"display_name":"Alberto Acu&#241;a"},"score":0,"creation_date":1561619136,"post_id":139426,"comment_id":100125416,"body_markdown":"probblems with ut-8","body":"probblems with ut-8"},{"owner":{"account_id":1195086,"reputation":2530,"user_id":1166992,"accept_rate":83,"display_name":"Olivier Faucheux"},"score":0,"creation_date":1606853749,"post_id":139426,"comment_id":115087315,"body_markdown":"To avoid the validation of the xml and the related overhead, use `builder.setEntityResolver((publicId, systemId) -&gt; {return new InputSource(new StringReader(&quot;&quot;));});`","body":"To avoid the validation of the xml and the related overhead, use <code>builder.setEntityResolver((publicId, systemId) -&gt; {return new InputSource(new StringReader(&quot;&quot;));});</code>"}],"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"comment_count":8,"down_vote_count":5,"up_vote_count":145,"is_accepted":false,"score":140,"last_activity_date":1225460628,"creation_date":1222434795,"answer_id":139426,"question_id":139076,"body_markdown":"Here&#39;s an answer to my own question. I combined the answers from the various results to write a class that pretty prints XML.\r\n\r\nNo guarantees on how it responds with invalid XML or large documents.\r\n\r\n    package ecb.sdw.pretty;\r\n    \r\n    import org.apache.xml.serialize.OutputFormat;\r\n    import org.apache.xml.serialize.XMLSerializer;\r\n    import org.w3c.dom.Document;\r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.SAXException;\r\n    \r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.parsers.ParserConfigurationException;\r\n    import java.io.IOException;\r\n    import java.io.StringReader;\r\n    import java.io.StringWriter;\r\n    import java.io.Writer;\r\n    \r\n    /**\r\n     * Pretty-prints xml, supplied as a string.\r\n     * &lt;p/&gt;\r\n     * eg.\r\n     * &lt;code&gt;\r\n     * String formattedXml = new XmlFormatter().format(&quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;);\r\n     * &lt;/code&gt;\r\n     */\r\n    public class XmlFormatter {\r\n    \r\n        public XmlFormatter() {\r\n        }\r\n    \r\n        public String format(String unformattedXml) {\r\n            try {\r\n                final Document document = parseXmlFile(unformattedXml);\r\n    \r\n                OutputFormat format = new OutputFormat(document);\r\n                format.setLineWidth(65);\r\n                format.setIndenting(true);\r\n                format.setIndent(2);\r\n                Writer out = new StringWriter();\r\n                XMLSerializer serializer = new XMLSerializer(out, format);\r\n                serializer.serialize(document);\r\n    \r\n                return out.toString();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        private Document parseXmlFile(String in) {\r\n            try {\r\n                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n                DocumentBuilder db = dbf.newDocumentBuilder();\r\n                InputSource is = new InputSource(new StringReader(in));\r\n                return db.parse(is);\r\n            } catch (ParserConfigurationException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (SAXException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            String unformattedXml =\r\n                    &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&lt;QueryMessage\\n&quot; +\r\n                            &quot;        xmlns=\\&quot;http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message\\&quot;\\n&quot; +\r\n                            &quot;        xmlns:query=\\&quot;http://www.SDMX.org/resources/SDMXML/schemas/v2_0/query\\&quot;&gt;\\n&quot; +\r\n                            &quot;    &lt;Query&gt;\\n&quot; +\r\n                            &quot;        &lt;query:CategorySchemeWhere&gt;\\n&quot; +\r\n                            &quot;   \\t\\t\\t\\t\\t         &lt;query:AgencyID&gt;ECB\\n\\n\\n\\n&lt;/query:AgencyID&gt;\\n&quot; +\r\n                            &quot;        &lt;/query:CategorySchemeWhere&gt;\\n&quot; +\r\n                            &quot;    &lt;/Query&gt;\\n\\n\\n\\n\\n&quot; +\r\n                            &quot;&lt;/QueryMessage&gt;&quot;;\r\n    \r\n            System.out.println(new XmlFormatter().format(unformattedXml));\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How to pretty print XML from Java?","body":"<p>Here's an answer to my own question. I combined the answers from the various results to write a class that pretty prints XML.</p>\n\n<p>No guarantees on how it responds with invalid XML or large documents.</p>\n\n<pre><code>package ecb.sdw.pretty;\n\nimport org.apache.xml.serialize.OutputFormat;\nimport org.apache.xml.serialize.XMLSerializer;\nimport org.w3c.dom.Document;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport java.io.IOException;\nimport java.io.StringReader;\nimport java.io.StringWriter;\nimport java.io.Writer;\n\n/**\n * Pretty-prints xml, supplied as a string.\n * &lt;p/&gt;\n * eg.\n * &lt;code&gt;\n * String formattedXml = new XmlFormatter().format(\"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\");\n * &lt;/code&gt;\n */\npublic class XmlFormatter {\n\n    public XmlFormatter() {\n    }\n\n    public String format(String unformattedXml) {\n        try {\n            final Document document = parseXmlFile(unformattedXml);\n\n            OutputFormat format = new OutputFormat(document);\n            format.setLineWidth(65);\n            format.setIndenting(true);\n            format.setIndent(2);\n            Writer out = new StringWriter();\n            XMLSerializer serializer = new XMLSerializer(out, format);\n            serializer.serialize(document);\n\n            return out.toString();\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    private Document parseXmlFile(String in) {\n        try {\n            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n            DocumentBuilder db = dbf.newDocumentBuilder();\n            InputSource is = new InputSource(new StringReader(in));\n            return db.parse(is);\n        } catch (ParserConfigurationException e) {\n            throw new RuntimeException(e);\n        } catch (SAXException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void main(String[] args) {\n        String unformattedXml =\n                \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;&lt;QueryMessage\\n\" +\n                        \"        xmlns=\\\"http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message\\\"\\n\" +\n                        \"        xmlns:query=\\\"http://www.SDMX.org/resources/SDMXML/schemas/v2_0/query\\\"&gt;\\n\" +\n                        \"    &lt;Query&gt;\\n\" +\n                        \"        &lt;query:CategorySchemeWhere&gt;\\n\" +\n                        \"   \\t\\t\\t\\t\\t         &lt;query:AgencyID&gt;ECB\\n\\n\\n\\n&lt;/query:AgencyID&gt;\\n\" +\n                        \"        &lt;/query:CategorySchemeWhere&gt;\\n\" +\n                        \"    &lt;/Query&gt;\\n\\n\\n\\n\\n\" +\n                        \"&lt;/QueryMessage&gt;\";\n\n        System.out.println(new XmlFormatter().format(unformattedXml));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6590,"reputation":13159,"user_id":11142,"accept_rate":49,"display_name":"anjanb"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1606982682,"creation_date":1222439897,"answer_id":139929,"question_id":139076,"body_markdown":"There is a very nice command line XML utility called xmlstarlet(http://xmlstar.sourceforge.net/) that can do a lot of things which a lot of people use.\r\n\r\nYou could execute this program programmatically using Runtime.exec and then read in the formatted output file. It has more options and better error reporting than a few lines of Java code can provide.\r\n\r\ndownload xmlstarlet : http://sourceforge.net/project/showfiles.php?group_id=66612&amp;package_id=64589","title":"How to pretty print XML from Java?","body":"<p>There is a very nice command line XML utility called xmlstarlet(<a href=\"http://xmlstar.sourceforge.net/\" rel=\"nofollow noreferrer\">http://xmlstar.sourceforge.net/</a>) that can do a lot of things which a lot of people use.</p>\n<p>You could execute this program programmatically using Runtime.exec and then read in the formatted output file. It has more options and better error reporting than a few lines of Java code can provide.</p>\n<p>download xmlstarlet : <a href=\"http://sourceforge.net/project/showfiles.php?group_id=66612&amp;package_id=64589\" rel=\"nofollow noreferrer\">http://sourceforge.net/project/showfiles.php?group_id=66612&amp;package_id=64589</a></p>\n"},{"comments":[{"owner":{"account_id":4942,"reputation":15741,"user_id":7679,"accept_rate":100,"display_name":"Chase Seibert"},"score":4,"creation_date":1225993077,"post_id":260314,"comment_id":124084,"body_markdown":"The accepted solution does not properly indent the nested tags in my case, this one does.","body":"The accepted solution does not properly indent the nested tags in my case, this one does."},{"owner":{"account_id":316230,"reputation":4519,"user_id":632293,"display_name":"jediz"},"score":3,"creation_date":1504611133,"post_id":260314,"comment_id":79067104,"body_markdown":"I used this in conjuction with removing all trailing spaces at the end of lines: `prettyPrintedString.replaceAll(&quot;\\\\s+\\n&quot;, &quot;\\n&quot;)`","body":"I used this in conjuction with removing all trailing spaces at the end of lines: <code>prettyPrintedString.replaceAll(&quot;\\\\s+\\n&quot;, &quot;\\n&quot;)</code>"}],"tags":[],"owner":{"account_id":15560,"reputation":361,"user_id":32993,"display_name":"mlo55"},"comment_count":2,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1225757860,"creation_date":1225754557,"answer_id":260314,"question_id":139076,"body_markdown":"I&#39;ve pretty printed in the past using the **org.dom4j.io.OutputFormat.createPrettyPrint()** method\r\n\r\n    public String prettyPrint(final String xml){  \r\n\r\n        if (StringUtils.isBlank(xml)) {\r\n            throw new RuntimeException(&quot;xml was null or blank in prettyPrint()&quot;);\r\n        }\r\n\r\n        final StringWriter sw;\r\n\r\n        try {\r\n            final OutputFormat format = OutputFormat.createPrettyPrint();\r\n            final org.dom4j.Document document = DocumentHelper.parseText(xml);\r\n            sw = new StringWriter();\r\n            final XMLWriter writer = new XMLWriter(sw, format);\r\n            writer.write(document);\r\n        }\r\n        catch (Exception e) {\r\n            throw new RuntimeException(&quot;Error pretty printing xml:\\n&quot; + xml, e);\r\n        }\r\n        return sw.toString();\r\n    }\r\n","title":"How to pretty print XML from Java?","body":"<p>I've pretty printed in the past using the <strong>org.dom4j.io.OutputFormat.createPrettyPrint()</strong> method</p>\n\n<pre><code>public String prettyPrint(final String xml){  \n\n    if (StringUtils.isBlank(xml)) {\n        throw new RuntimeException(\"xml was null or blank in prettyPrint()\");\n    }\n\n    final StringWriter sw;\n\n    try {\n        final OutputFormat format = OutputFormat.createPrettyPrint();\n        final org.dom4j.Document document = DocumentHelper.parseText(xml);\n        sw = new StringWriter();\n        final XMLWriter writer = new XMLWriter(sw, format);\n        writer.write(document);\n    }\n    catch (Exception e) {\n        throw new RuntimeException(\"Error pretty printing xml:\\n\" + xml, e);\n    }\n    return sw.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":2,"creation_date":1509013098,"post_id":592146,"comment_id":80850398,"body_markdown":"I whole-heartedly agree: building the intermediate DOM tree is a waste of memory.  Thansk for that answer.","body":"I whole-heartedly agree: building the intermediate DOM tree is a waste of memory.  Thansk for that answer."}],"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1235678093,"creation_date":1235678093,"answer_id":592146,"question_id":139076,"body_markdown":"Regarding comment that &quot;you must first build a DOM tree&quot;: No, you need not and should not do that.\r\n\r\nInstead, create a StreamSource (new StreamSource(new StringReader(str)), and feed that to the identity transformer mentioned. That&#39;ll use SAX parser, and result will be much faster.\r\nBuilding an intermediate tree is pure overhead for this case.\r\nOtherwise the top-ranked answer is good.\r\n","title":"How to pretty print XML from Java?","body":"<p>Regarding comment that \"you must first build a DOM tree\": No, you need not and should not do that.</p>\n\n<p>Instead, create a StreamSource (new StreamSource(new StringReader(str)), and feed that to the identity transformer mentioned. That'll use SAX parser, and result will be much faster.\nBuilding an intermediate tree is pure overhead for this case.\nOtherwise the top-ranked answer is good.</p>\n"},{"comments":[{"owner":{"account_id":2277941,"reputation":10097,"user_id":2003763,"accept_rate":100,"display_name":"Thibault D."},"score":2,"creation_date":1376374069,"post_id":962225,"comment_id":26676294,"body_markdown":"Thanks, that&#39;s what I was looking for. \nIf you have an XML already parsed with XOM in a &quot;Document&quot; object, you can pass it directly to serializer.write(document);","body":"Thanks, that&#39;s what I was looking for.  If you have an XML already parsed with XOM in a &quot;Document&quot; object, you can pass it directly to serializer.write(document);"}],"tags":[],"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1244482750,"creation_date":1244391987,"answer_id":962225,"question_id":139076,"body_markdown":"If using a 3rd party XML library is ok, you can get away with something significantly simpler than what the currently [highest-voted][1] [answers][2] suggest.  \r\n\r\nIt was stated that both input and output should be Strings, so here&#39;s a utility method that does just that, implemented with the **[XOM][3]** library:\r\n    \r\n    import nu.xom.*;\r\n    import java.io.*;\r\n    \r\n    [...]\r\n\r\n    public static String format(String xml) throws ParsingException, IOException {\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        Serializer serializer = new Serializer(out);\r\n        serializer.setIndent(4);  // or whatever you like\r\n        serializer.write(new Builder().build(xml, &quot;&quot;));\r\n        return out.toString(&quot;UTF-8&quot;);\r\n    }\r\n\r\nI tested that it works, and the results *do not* depend on your JRE version or anything like that. To see how to customise the output format to your liking, take a look at the [`Serializer`][4] API.\r\n\r\nThis actually came out longer than I thought - some extra lines were needed because `Serializer` wants an `OutputStream` to write to. But note that there&#39;s very little code for actual XML twiddling here.\r\n\r\n(This answer is part of my evaluation of XOM, which was [suggested][5] as one option in my [question about the best Java XML library][6] to replace dom4j. For the record, with dom4j you could achieve this with similar ease using [`XMLWriter`][7] and [`OutputFormat`][8]. **Edit**: ...as demonstrated in [mlo55&#39;s answer][9].)\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/139096#139096\r\n  [2]: https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/139333#139333\r\n  [3]: http://xom.nu\r\n  [4]: http://xom.nu/apidocs/nu/xom/Serializer.html\r\n  [5]: https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j/833241#833241\r\n  [6]: https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j\r\n  [7]: http://dom4j.org/dom4j-1.6.1/apidocs/org/dom4j/io/XMLWriter.html\r\n  [8]: http://dom4j.org/dom4j-1.6.1/apidocs/org/dom4j/io/OutputFormat.html\r\n  [9]: https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/260314#260314","title":"How to pretty print XML from Java?","body":"<p>If using a 3rd party XML library is ok, you can get away with something significantly simpler than what the currently <a href=\"https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/139096#139096\">highest-voted</a> <a href=\"https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/139333#139333\">answers</a> suggest.  </p>\n\n<p>It was stated that both input and output should be Strings, so here's a utility method that does just that, implemented with the <strong><a href=\"http://xom.nu\" rel=\"nofollow noreferrer\">XOM</a></strong> library:</p>\n\n<pre><code>import nu.xom.*;\nimport java.io.*;\n\n[...]\n\npublic static String format(String xml) throws ParsingException, IOException {\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\n    Serializer serializer = new Serializer(out);\n    serializer.setIndent(4);  // or whatever you like\n    serializer.write(new Builder().build(xml, \"\"));\n    return out.toString(\"UTF-8\");\n}\n</code></pre>\n\n<p>I tested that it works, and the results <em>do not</em> depend on your JRE version or anything like that. To see how to customise the output format to your liking, take a look at the <a href=\"http://xom.nu/apidocs/nu/xom/Serializer.html\" rel=\"nofollow noreferrer\"><code>Serializer</code></a> API.</p>\n\n<p>This actually came out longer than I thought - some extra lines were needed because <code>Serializer</code> wants an <code>OutputStream</code> to write to. But note that there's very little code for actual XML twiddling here.</p>\n\n<p>(This answer is part of my evaluation of XOM, which was <a href=\"https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j/833241#833241\">suggested</a> as one option in my <a href=\"https://stackoverflow.com/questions/831865/what-java-xml-library-do-you-recommend-to-replace-dom4j\">question about the best Java XML library</a> to replace dom4j. For the record, with dom4j you could achieve this with similar ease using <a href=\"http://dom4j.org/dom4j-1.6.1/apidocs/org/dom4j/io/XMLWriter.html\" rel=\"nofollow noreferrer\"><code>XMLWriter</code></a> and <a href=\"http://dom4j.org/dom4j-1.6.1/apidocs/org/dom4j/io/OutputFormat.html\" rel=\"nofollow noreferrer\"><code>OutputFormat</code></a>. <strong>Edit</strong>: ...as demonstrated in <a href=\"https://stackoverflow.com/questions/139076/how-to-pretty-print-xml-from-java/260314#260314\">mlo55's answer</a>.)</p>\n"},{"comments":[{"owner":{"account_id":77251,"reputation":17324,"user_id":220627,"accept_rate":79,"display_name":"Adrian Smith"},"score":1,"creation_date":1287667542,"post_id":1264912,"comment_id":4268147,"body_markdown":"This is the code I&#39;ve always used but at this company it didn&#39;t work, I assume they are using another XML transforming library. I created the factory as a separate line and then did `factory.setAttribute(&quot;indent-number&quot;, 4);` and now it works.","body":"This is the code I&#39;ve always used but at this company it didn&#39;t work, I assume they are using another XML transforming library. I created the factory as a separate line and then did <code>factory.setAttribute(&quot;indent-number&quot;, 4);</code> and now it works."},{"owner":{"account_id":86417,"reputation":38255,"user_id":240337,"accept_rate":78,"display_name":"Thang Pham"},"score":0,"creation_date":1311102839,"post_id":1264912,"comment_id":8004820,"body_markdown":"How to make so that the output wont contain `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;`?","body":"How to make so that the output wont contain <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</code>?"},{"owner":{"account_id":173152,"reputation":25288,"user_id":401656,"accept_rate":75,"display_name":"jjmontes"},"score":4,"creation_date":1317978419,"post_id":1264912,"comment_id":9342198,"body_markdown":"@Harry: `transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);`","body":"@Harry: <code>transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATIO&zwnj;&#8203;N, &quot;yes&quot;);</code>"},{"owner":{"account_id":1322208,"reputation":3456,"user_id":1267780,"accept_rate":72,"display_name":"CodyK"},"score":6,"creation_date":1426012081,"post_id":1264912,"comment_id":46194115,"body_markdown":"Hi I am using this exact code, and mine formats properly with the exception of the first element So, this: `&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;root&gt;` is all on one line. Any ideas why?","body":"Hi I am using this exact code, and mine formats properly with the exception of the first element So, this: <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;root&gt;</code> is all on one line. Any ideas why?"},{"owner":{"account_id":3158846,"reputation":3608,"user_id":2670571,"accept_rate":52,"display_name":"John"},"score":0,"creation_date":1443029697,"post_id":1264912,"comment_id":53332579,"body_markdown":"@dfa: I liked the comment `// simple exception handling, please review it`. Can you point to some resources that recommend this type of exception handling?  Thanks.","body":"@dfa: I liked the comment <code>&#47;&#47; simple exception handling, please review it</code>. Can you point to some resources that recommend this type of exception handling?  Thanks."},{"owner":{"account_id":4112953,"reputation":2266,"user_id":3375325,"accept_rate":71,"display_name":"jansohn"},"score":5,"creation_date":1470847990,"post_id":1264912,"comment_id":65119788,"body_markdown":"@Codemiester: Seems to be a bug (see http://stackoverflow.com/a/18251901/3375325). Adding `transformer.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC, &quot;yes&quot;);` worked for me.","body":"@Codemiester: Seems to be a bug (see <a href=\"http://stackoverflow.com/a/18251901/3375325\">stackoverflow.com/a/18251901/3375325</a>). Adding <code>transformer.setOutputProperty(OutputKeys.DOCTYPE_PUBLIC, &quot;yes&quot;);</code> worked for me."},{"owner":{"account_id":3084562,"reputation":99,"user_id":2611999,"display_name":"azis.mrazish"},"score":0,"creation_date":1579252257,"post_id":1264912,"comment_id":105711673,"body_markdown":"In Java 1.8 it does nothing (excess whitespace is not removed, no indent/new lines added","body":"In Java 1.8 it does nothing (excess whitespace is not removed, no indent/new lines added"},{"owner":{"account_id":353331,"reputation":1035,"user_id":690965,"accept_rate":64,"display_name":"fanbondi"},"score":0,"creation_date":1612882483,"post_id":1264912,"comment_id":116901031,"body_markdown":"This code snippet is vulnerable to XML eXternal Entity Injection (XXE). See:\nhttps://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html#transformerfactory","body":"This code snippet is vulnerable to XML eXternal Entity Injection (XXE). See: <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html#transformerfactory\" rel=\"nofollow noreferrer\">cheatsheetseries.owasp.org/cheatsheets/&hellip;</a>"}],"tags":[],"owner":{"account_id":32251,"reputation":114942,"user_id":89266,"accept_rate":91,"display_name":"dfa"},"comment_count":8,"down_vote_count":0,"up_vote_count":145,"is_accepted":false,"score":145,"last_activity_date":1621940689,"creation_date":1250065377,"answer_id":1264912,"question_id":139076,"body_markdown":"[a simpler solution based on this answer][1]: \r\n\r\n    public static String prettyFormat(String input, int indent) {\r\n        try {\r\n            Source xmlInput = new StreamSource(new StringReader(input));\r\n            StringWriter stringWriter = new StringWriter();\r\n            StreamResult xmlOutput = new StreamResult(stringWriter);\r\n            TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n            transformerFactory.setAttribute(&quot;indent-number&quot;, indent);\r\n            transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\n            transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\r\n            Transformer transformer = transformerFactory.newTransformer(); \r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n            transformer.transform(xmlInput, xmlOutput);\r\n            return xmlOutput.getWriter().toString();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e); // simple exception handling, please review it\r\n        }\r\n    }\r\n\r\n    public static String prettyFormat(String input) {\r\n        return prettyFormat(input, 2);\r\n    }\r\n\r\ntestcase:\r\n\r\n    prettyFormat(&quot;&lt;root&gt;&lt;child&gt;aaa&lt;/child&gt;&lt;child/&gt;&lt;/root&gt;&quot;);\r\n\r\nreturns:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;root&gt;\r\n      &lt;child&gt;aaa&lt;/child&gt;\r\n      &lt;child/&gt;\r\n    &lt;/root&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-ja/1264872#1264872\r\n\r\n//Ignore: Original edit just needs missing s in the Class name in code. redundant six characters added to get over 6 characters validation on SO","title":"How to pretty print XML from Java?","body":"<p><a href=\"https://stackoverflow.com/questions/1264849/pretty-printing-output-from-javax-xml-transform-transformer-with-only-standard-ja/1264872#1264872\">a simpler solution based on this answer</a>:</p>\n<pre><code>public static String prettyFormat(String input, int indent) {\n    try {\n        Source xmlInput = new StreamSource(new StringReader(input));\n        StringWriter stringWriter = new StringWriter();\n        StreamResult xmlOutput = new StreamResult(stringWriter);\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        transformerFactory.setAttribute(&quot;indent-number&quot;, indent);\n        transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\n        transformerFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\n        Transformer transformer = transformerFactory.newTransformer(); \n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n        transformer.transform(xmlInput, xmlOutput);\n        return xmlOutput.getWriter().toString();\n    } catch (Exception e) {\n        throw new RuntimeException(e); // simple exception handling, please review it\n    }\n}\n\npublic static String prettyFormat(String input) {\n    return prettyFormat(input, 2);\n}\n</code></pre>\n<p>testcase:</p>\n<pre><code>prettyFormat(&quot;&lt;root&gt;&lt;child&gt;aaa&lt;/child&gt;&lt;child/&gt;&lt;/root&gt;&quot;);\n</code></pre>\n<p>returns:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;root&gt;\n  &lt;child&gt;aaa&lt;/child&gt;\n  &lt;child/&gt;\n&lt;/root&gt;\n</code></pre>\n<p>//Ignore: Original edit just needs missing s in the Class name in code. redundant six characters added to get over 6 characters validation on SO</p>\n"},{"comments":[{"owner":{"account_id":4239388,"reputation":341,"user_id":3469728,"display_name":"helenov"},"score":3,"creation_date":1476969592,"post_id":1948577,"comment_id":67579797,"body_markdown":"Where does this OutputPropertiesFactory come from?","body":"Where does this OutputPropertiesFactory come from?"},{"owner":{"account_id":5483053,"reputation":406,"user_id":4358787,"display_name":"Gaurav"},"score":0,"creation_date":1581068763,"post_id":1948577,"comment_id":106314240,"body_markdown":"import com.sun.org.apache.xml.internal.serializer.*;","body":"import com.sun.org.apache.xml.internal.serializer.*;"}],"tags":[],"owner":{"account_id":580582,"reputation":117,"user_id":237114,"display_name":"Sandeep Phukan"},"comment_count":2,"down_vote_count":2,"up_vote_count":12,"is_accepted":false,"score":10,"last_activity_date":1391182771,"creation_date":1261509991,"answer_id":1948577,"question_id":139076,"body_markdown":"Hmmm... faced something like this and it is a known bug ... \r\njust add this OutputProperty ..\r\n\r\n    transformer.setOutputProperty(OutputPropertiesFactory.S_KEY_INDENT_AMOUNT, &quot;8&quot;);\r\n\r\nHope this helps ...","title":"How to pretty print XML from Java?","body":"<p>Hmmm... faced something like this and it is a known bug ... \njust add this OutputProperty ..</p>\n\n<pre><code>transformer.setOutputProperty(OutputPropertiesFactory.S_KEY_INDENT_AMOUNT, \"8\");\n</code></pre>\n\n<p>Hope this helps ...</p>\n"},{"comments":[{"owner":{"account_id":91678,"reputation":26149,"user_id":251589,"accept_rate":83,"display_name":"sixtyfootersdude"},"score":1,"creation_date":1328301587,"post_id":2599074,"comment_id":11481992,"body_markdown":"This didnt work for me.  It just gave something like: `&lt;?xml version...` on one line and everything else on another line.","body":"This didnt work for me.  It just gave something like: <code>&lt;?xml version...</code> on one line and everything else on another line."},{"owner":{"account_id":5527423,"reputation":316,"user_id":4388511,"display_name":"mrboieng"},"score":0,"creation_date":1665412481,"post_id":2599074,"comment_id":130688220,"body_markdown":"add format.setSuppressDeclaration(true); to remove the `&lt;?xml version..` tag","body":"add format.setSuppressDeclaration(true); to remove the <code>&lt;?xml version..</code> tag"}],"tags":[],"owner":{"account_id":85212,"reputation":11234,"user_id":237733,"accept_rate":94,"display_name":"Mark Pope"},"comment_count":2,"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1299549587,"creation_date":1270722540,"answer_id":2599074,"question_id":139076,"body_markdown":"Here&#39;s a way of doing it using [dom4j][1]:\r\n\r\nImports:\r\n\r\n    import org.dom4j.Document;  \r\n    import org.dom4j.DocumentHelper;  \r\n    import org.dom4j.io.OutputFormat;  \r\n    import org.dom4j.io.XMLWriter;\r\n  \r\nCode: \r\n\r\n    String xml = &quot;&lt;your xml=&#39;here&#39;/&gt;&quot;;  \r\n    Document doc = DocumentHelper.parseText(xml);  \r\n    StringWriter sw = new StringWriter();  \r\n    OutputFormat format = OutputFormat.createPrettyPrint();  \r\n    XMLWriter xw = new XMLWriter(sw, format);  \r\n    xw.write(doc);  \r\n    String result = sw.toString();\r\n\r\n\r\n  [1]: http://www.dom4j.org/dom4j-1.6.1/","title":"How to pretty print XML from Java?","body":"<p>Here's a way of doing it using <a href=\"http://www.dom4j.org/dom4j-1.6.1/\" rel=\"noreferrer\">dom4j</a>:</p>\n\n<p>Imports:</p>\n\n<pre><code>import org.dom4j.Document;  \nimport org.dom4j.DocumentHelper;  \nimport org.dom4j.io.OutputFormat;  \nimport org.dom4j.io.XMLWriter;\n</code></pre>\n\n<p>Code: </p>\n\n<pre><code>String xml = \"&lt;your xml='here'/&gt;\";  \nDocument doc = DocumentHelper.parseText(xml);  \nStringWriter sw = new StringWriter();  \nOutputFormat format = OutputFormat.createPrettyPrint();  \nXMLWriter xw = new XMLWriter(sw, format);  \nxw.write(doc);  \nString result = sw.toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3116542,"reputation":1299,"user_id":3450840,"accept_rate":56,"display_name":"Florian F"},"score":2,"creation_date":1509013230,"post_id":2920419,"comment_id":80850474,"body_markdown":"This is the way it should be done.  Format on the fly at the string level.  This is the only solution that will format invalid or incomplete XML.","body":"This is the way it should be done.  Format on the fly at the string level.  This is the only solution that will format invalid or incomplete XML."}],"tags":[],"owner":{"account_id":25497,"reputation":1347,"user_id":65555,"accept_rate":73,"display_name":"David Easley"},"comment_count":1,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1274957422,"creation_date":1274957422,"answer_id":2920419,"question_id":139076,"body_markdown":"Kevin Hakanson said:\r\n&quot;However, if you know your XML string is valid, and you don&#39;t want to incur the memory overhead of parsing a string into a DOM, then running a transform over the DOM to get a string back - you could just do some old fashioned character by character parsing. Insert a newline and spaces after every &lt;/...&gt; characters, keep and indent counter (to determine the number of spaces) that you increment for every &lt;...&gt; and decrement for every &lt;/...&gt; you see.&quot;\r\n\r\nAgreed. Such an approach is much faster and has far fewer dependencies.\r\n\r\nExample solution:\r\n\r\n    /**\r\n     * XML utils, including formatting.\r\n     */\r\n    public class XmlUtils\r\n    {\r\n      private static XmlFormatter formatter = new XmlFormatter(2, 80);\r\n    \r\n      public static String formatXml(String s)\r\n      {\r\n        return formatter.format(s, 0);\r\n      }\r\n    \r\n      public static String formatXml(String s, int initialIndent)\r\n      {\r\n        return formatter.format(s, initialIndent);\r\n      }\r\n    \r\n      private static class XmlFormatter\r\n      {\r\n        private int indentNumChars;\r\n        private int lineLength;\r\n        private boolean singleLine;\r\n    \r\n        public XmlFormatter(int indentNumChars, int lineLength)\r\n        {\r\n          this.indentNumChars = indentNumChars;\r\n          this.lineLength = lineLength;\r\n        }\r\n    \r\n        public synchronized String format(String s, int initialIndent)\r\n        {\r\n          int indent = initialIndent;\r\n          StringBuilder sb = new StringBuilder();\r\n          for (int i = 0; i &lt; s.length(); i++)\r\n          {\r\n            char currentChar = s.charAt(i);\r\n            if (currentChar == &#39;&lt;&#39;)\r\n            {\r\n              char nextChar = s.charAt(i + 1);\r\n              if (nextChar == &#39;/&#39;)\r\n                indent -= indentNumChars;\r\n              if (!singleLine)   // Don&#39;t indent before closing element if we&#39;re creating opening and closing elements on a single line.\r\n                sb.append(buildWhitespace(indent));\r\n              if (nextChar != &#39;?&#39; &amp;&amp; nextChar != &#39;!&#39; &amp;&amp; nextChar != &#39;/&#39;)\r\n                indent += indentNumChars;\r\n              singleLine = false;  // Reset flag.\r\n            }\r\n            sb.append(currentChar);\r\n            if (currentChar == &#39;&gt;&#39;)\r\n            {\r\n              if (s.charAt(i - 1) == &#39;/&#39;)\r\n              {\r\n                indent -= indentNumChars;\r\n                sb.append(&quot;\\n&quot;);\r\n              }\r\n              else\r\n              {\r\n                int nextStartElementPos = s.indexOf(&#39;&lt;&#39;, i);\r\n                if (nextStartElementPos &gt; i + 1)\r\n                {\r\n                  String textBetweenElements = s.substring(i + 1, nextStartElementPos);\r\n    \r\n                  // If the space between elements is solely newlines, let them through to preserve additional newlines in source document.\r\n                  if (textBetweenElements.replaceAll(&quot;\\n&quot;, &quot;&quot;).length() == 0)\r\n                  {\r\n                    sb.append(textBetweenElements + &quot;\\n&quot;);\r\n                  }\r\n                  // Put tags and text on a single line if the text is short.\r\n                  else if (textBetweenElements.length() &lt;= lineLength * 0.5)\r\n                  {\r\n                    sb.append(textBetweenElements);\r\n                    singleLine = true;\r\n                  }\r\n                  // For larger amounts of text, wrap lines to a maximum line length.\r\n                  else\r\n                  {\r\n                    sb.append(&quot;\\n&quot; + lineWrap(textBetweenElements, lineLength, indent, null) + &quot;\\n&quot;);\r\n                  }\r\n                  i = nextStartElementPos - 1;\r\n                }\r\n                else\r\n                {\r\n                  sb.append(&quot;\\n&quot;);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          return sb.toString();\r\n        }\r\n      }\r\n    \r\n      private static String buildWhitespace(int numChars)\r\n      {\r\n        StringBuilder sb = new StringBuilder();\r\n        for (int i = 0; i &lt; numChars; i++)\r\n          sb.append(&quot; &quot;);\r\n        return sb.toString();\r\n      }\r\n    \r\n      /**\r\n       * Wraps the supplied text to the specified line length.\r\n       * @lineLength the maximum length of each line in the returned string (not including indent if specified).\r\n       * @indent optional number of whitespace characters to prepend to each line before the text.\r\n       * @linePrefix optional string to append to the indent (before the text).\r\n       * @returns the supplied text wrapped so that no line exceeds the specified line length + indent, optionally with\r\n       * indent and prefix applied to each line.\r\n       */\r\n      private static String lineWrap(String s, int lineLength, Integer indent, String linePrefix)\r\n      {\r\n        if (s == null)\r\n          return null;\r\n    \r\n        StringBuilder sb = new StringBuilder();\r\n        int lineStartPos = 0;\r\n        int lineEndPos;\r\n        boolean firstLine = true;\r\n        while(lineStartPos &lt; s.length())\r\n        {\r\n          if (!firstLine)\r\n            sb.append(&quot;\\n&quot;);\r\n          else\r\n            firstLine = false;\r\n    \r\n          if (lineStartPos + lineLength &gt; s.length())\r\n            lineEndPos = s.length() - 1;\r\n          else\r\n          {\r\n            lineEndPos = lineStartPos + lineLength - 1;\r\n            while (lineEndPos &gt; lineStartPos &amp;&amp; (s.charAt(lineEndPos) != &#39; &#39; &amp;&amp; s.charAt(lineEndPos) != &#39;\\t&#39;))\r\n              lineEndPos--;\r\n          }\r\n          sb.append(buildWhitespace(indent));\r\n          if (linePrefix != null)\r\n            sb.append(linePrefix);\r\n    \r\n          sb.append(s.substring(lineStartPos, lineEndPos + 1));\r\n          lineStartPos = lineEndPos + 1;\r\n        }\r\n        return sb.toString();\r\n      }\r\n      \r\n      // other utils removed for brevity\r\n    }\r\n","title":"How to pretty print XML from Java?","body":"<p>Kevin Hakanson said:\n\"However, if you know your XML string is valid, and you don't want to incur the memory overhead of parsing a string into a DOM, then running a transform over the DOM to get a string back - you could just do some old fashioned character by character parsing. Insert a newline and spaces after every  characters, keep and indent counter (to determine the number of spaces) that you increment for every &lt;...> and decrement for every  you see.\"</p>\n\n<p>Agreed. Such an approach is much faster and has far fewer dependencies.</p>\n\n<p>Example solution:</p>\n\n<pre><code>/**\n * XML utils, including formatting.\n */\npublic class XmlUtils\n{\n  private static XmlFormatter formatter = new XmlFormatter(2, 80);\n\n  public static String formatXml(String s)\n  {\n    return formatter.format(s, 0);\n  }\n\n  public static String formatXml(String s, int initialIndent)\n  {\n    return formatter.format(s, initialIndent);\n  }\n\n  private static class XmlFormatter\n  {\n    private int indentNumChars;\n    private int lineLength;\n    private boolean singleLine;\n\n    public XmlFormatter(int indentNumChars, int lineLength)\n    {\n      this.indentNumChars = indentNumChars;\n      this.lineLength = lineLength;\n    }\n\n    public synchronized String format(String s, int initialIndent)\n    {\n      int indent = initialIndent;\n      StringBuilder sb = new StringBuilder();\n      for (int i = 0; i &lt; s.length(); i++)\n      {\n        char currentChar = s.charAt(i);\n        if (currentChar == '&lt;')\n        {\n          char nextChar = s.charAt(i + 1);\n          if (nextChar == '/')\n            indent -= indentNumChars;\n          if (!singleLine)   // Don't indent before closing element if we're creating opening and closing elements on a single line.\n            sb.append(buildWhitespace(indent));\n          if (nextChar != '?' &amp;&amp; nextChar != '!' &amp;&amp; nextChar != '/')\n            indent += indentNumChars;\n          singleLine = false;  // Reset flag.\n        }\n        sb.append(currentChar);\n        if (currentChar == '&gt;')\n        {\n          if (s.charAt(i - 1) == '/')\n          {\n            indent -= indentNumChars;\n            sb.append(\"\\n\");\n          }\n          else\n          {\n            int nextStartElementPos = s.indexOf('&lt;', i);\n            if (nextStartElementPos &gt; i + 1)\n            {\n              String textBetweenElements = s.substring(i + 1, nextStartElementPos);\n\n              // If the space between elements is solely newlines, let them through to preserve additional newlines in source document.\n              if (textBetweenElements.replaceAll(\"\\n\", \"\").length() == 0)\n              {\n                sb.append(textBetweenElements + \"\\n\");\n              }\n              // Put tags and text on a single line if the text is short.\n              else if (textBetweenElements.length() &lt;= lineLength * 0.5)\n              {\n                sb.append(textBetweenElements);\n                singleLine = true;\n              }\n              // For larger amounts of text, wrap lines to a maximum line length.\n              else\n              {\n                sb.append(\"\\n\" + lineWrap(textBetweenElements, lineLength, indent, null) + \"\\n\");\n              }\n              i = nextStartElementPos - 1;\n            }\n            else\n            {\n              sb.append(\"\\n\");\n            }\n          }\n        }\n      }\n      return sb.toString();\n    }\n  }\n\n  private static String buildWhitespace(int numChars)\n  {\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i &lt; numChars; i++)\n      sb.append(\" \");\n    return sb.toString();\n  }\n\n  /**\n   * Wraps the supplied text to the specified line length.\n   * @lineLength the maximum length of each line in the returned string (not including indent if specified).\n   * @indent optional number of whitespace characters to prepend to each line before the text.\n   * @linePrefix optional string to append to the indent (before the text).\n   * @returns the supplied text wrapped so that no line exceeds the specified line length + indent, optionally with\n   * indent and prefix applied to each line.\n   */\n  private static String lineWrap(String s, int lineLength, Integer indent, String linePrefix)\n  {\n    if (s == null)\n      return null;\n\n    StringBuilder sb = new StringBuilder();\n    int lineStartPos = 0;\n    int lineEndPos;\n    boolean firstLine = true;\n    while(lineStartPos &lt; s.length())\n    {\n      if (!firstLine)\n        sb.append(\"\\n\");\n      else\n        firstLine = false;\n\n      if (lineStartPos + lineLength &gt; s.length())\n        lineEndPos = s.length() - 1;\n      else\n      {\n        lineEndPos = lineStartPos + lineLength - 1;\n        while (lineEndPos &gt; lineStartPos &amp;&amp; (s.charAt(lineEndPos) != ' ' &amp;&amp; s.charAt(lineEndPos) != '\\t'))\n          lineEndPos--;\n      }\n      sb.append(buildWhitespace(indent));\n      if (linePrefix != null)\n        sb.append(linePrefix);\n\n      sb.append(s.substring(lineStartPos, lineEndPos + 1));\n      lineStartPos = lineEndPos + 1;\n    }\n    return sb.toString();\n  }\n\n  // other utils removed for brevity\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":113581,"reputation":2674,"user_id":299075,"accept_rate":91,"display_name":"Kristoffer Lindvall"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1276288215,"creation_date":1276288215,"answer_id":3026021,"question_id":139076,"body_markdown":"I had the same problem and I&#39;m having great success with JTidy (http://jtidy.sourceforge.net/index.html)\r\n\r\nExample:\r\n\r\n    Tidy t = new Tidy();\r\n\tt.setIndentContent(true);\r\n\tDocument d = t.parseDOM(\r\n\t\tnew ByteArrayInputStream(&quot;HTML goes here&quot;, null);\r\n\t\t\r\n\tOutputStream out = new ByteArrayOutputStream();\r\n\tt.pprint(d, out);\r\n\tString html = out.toString();","title":"How to pretty print XML from Java?","body":"<p>I had the same problem and I'm having great success with JTidy (<a href=\"http://jtidy.sourceforge.net/index.html\" rel=\"nofollow noreferrer\">http://jtidy.sourceforge.net/index.html</a>)</p>\n\n<p>Example:</p>\n\n<pre><code>Tidy t = new Tidy();\nt.setIndentContent(true);\nDocument d = t.parseDOM(\n    new ByteArrayInputStream(\"HTML goes here\", null);\n\nOutputStream out = new ByteArrayOutputStream();\nt.pprint(d, out);\nString html = out.toString();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":116014,"reputation":319,"user_id":304380,"accept_rate":52,"display_name":"Ruslan"},"score":0,"creation_date":1293098277,"post_id":4472580,"comment_id":4946813,"body_markdown":"In this case left tabs are not used. All tags begin at first symbol of the line, like usual text.","body":"In this case left tabs are not used. All tags begin at first symbol of the line, like usual text."},{"owner":{"account_id":15555,"reputation":4810,"user_id":32978,"accept_rate":83,"display_name":"Will Glass"},"score":0,"creation_date":1322788696,"post_id":4472580,"comment_id":10299937,"body_markdown":"don&#39;t you need to specify a charset when converting back and forth between bytes and string?","body":"don&#39;t you need to specify a charset when converting back and forth between bytes and string?"},{"owner":{"account_id":20657,"reputation":8081,"user_id":49573,"accept_rate":78,"display_name":"maximdim"},"score":2,"creation_date":1356105634,"post_id":4472580,"comment_id":19313781,"body_markdown":"There should be no need to convert from and to byte arrays/String. At the very least you would have to specify charset when doing so. Better option would be to use StringReader and StringWriter classes wrapped in InputSource and StreamResult.","body":"There should be no need to convert from and to byte arrays/String. At the very least you would have to specify charset when doing so. Better option would be to use StringReader and StringWriter classes wrapped in InputSource and StreamResult."},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":0,"creation_date":1416244483,"post_id":4472580,"comment_id":42490728,"body_markdown":"not working. you need to mess around with some internal registry implementation.","body":"not working. you need to mess around with some internal registry implementation."},{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1446719871,"post_id":4472580,"comment_id":54864826,"body_markdown":"Here is a simpler variant of this solution: http://stackoverflow.com/a/33541820/363573","body":"Here is a simpler variant of this solution: <a href=\"http://stackoverflow.com/a/33541820/363573\">stackoverflow.com/a/33541820/363573</a>"}],"tags":[],"owner":{"account_id":90762,"reputation":4440,"user_id":249672,"display_name":"khylo"},"comment_count":5,"down_vote_count":1,"up_vote_count":55,"is_accepted":false,"score":54,"last_activity_date":1295455787,"creation_date":1292603251,"answer_id":4472580,"question_id":139076,"body_markdown":"Just to note that top rated answer requires the use of xerces.\r\n\r\nIf you don&#39;t want to add this external dependency then you can simply use the standard jdk libraries (which actually are built using xerces internally).\r\n\r\nN.B. There was a bug with jdk version 1.5 see [https://bugs.java.com/bugdatabase/view_bug?bug_id=6296446][1] but it is resolved now.,\r\n\r\n(Note if an error occurs this will return the original text)\r\n\r\n\tpackage com.test;\r\n\r\n\timport java.io.ByteArrayInputStream;\r\n\timport java.io.ByteArrayOutputStream;\r\n\r\n\timport javax.xml.transform.OutputKeys;\r\n\timport javax.xml.transform.Source;\r\n\timport javax.xml.transform.Transformer;\r\n\timport javax.xml.transform.sax.SAXSource;\r\n\timport javax.xml.transform.sax.SAXTransformerFactory;\r\n\timport javax.xml.transform.stream.StreamResult;\r\n\r\n\timport org.xml.sax.InputSource;\r\n\r\n\tpublic class XmlTest {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tXmlTest t = new XmlTest();\r\n\t\t\tSystem.out.println(t.formatXml(&quot;&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;d&gt;text D&lt;/d&gt;&lt;e value=&#39;0&#39;/&gt;&lt;/b&gt;&lt;/a&gt;&quot;));\r\n\t\t}\r\n\r\n\t\tpublic String formatXml(String xml){\r\n\t\t\ttry{\r\n\t\t\t\tTransformer serializer= SAXTransformerFactory.newInstance().newTransformer();\r\n\t\t\t\tserializer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n\t\t\t\t//serializer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n\t\t\t\tserializer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n\t\t\t\t//serializer.setOutputProperty(&quot;{http://xml.customer.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n\t\t\t\tSource xmlSource=new SAXSource(new InputSource(new ByteArrayInputStream(xml.getBytes())));\r\n\t\t\t\tStreamResult res =  new StreamResult(new ByteArrayOutputStream());            \r\n\t\t\t\tserializer.transform(xmlSource, res);\r\n\t\t\t\treturn new String(((ByteArrayOutputStream)res.getOutputStream()).toByteArray());\r\n\t\t\t}catch(Exception e){\r\n\t\t\t\t//TODO log error\r\n\t\t\t\treturn xml;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=6296446","title":"How to pretty print XML from Java?","body":"<p>Just to note that top rated answer requires the use of xerces.</p>\n<p>If you don't want to add this external dependency then you can simply use the standard jdk libraries (which actually are built using xerces internally).</p>\n<p>N.B. There was a bug with jdk version 1.5 see <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=6296446\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=6296446</a> but it is resolved now.,</p>\n<p>(Note if an error occurs this will return the original text)</p>\n<pre><code>package com.test;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\n\nimport javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Source;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.sax.SAXSource;\nimport javax.xml.transform.sax.SAXTransformerFactory;\nimport javax.xml.transform.stream.StreamResult;\n\nimport org.xml.sax.InputSource;\n\npublic class XmlTest {\n    public static void main(String[] args) {\n        XmlTest t = new XmlTest();\n        System.out.println(t.formatXml(&quot;&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;d&gt;text D&lt;/d&gt;&lt;e value='0'/&gt;&lt;/b&gt;&lt;/a&gt;&quot;));\n    }\n\n    public String formatXml(String xml){\n        try{\n            Transformer serializer= SAXTransformerFactory.newInstance().newTransformer();\n            serializer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\n            //serializer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\n            serializer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\n            //serializer.setOutputProperty(&quot;{http://xml.customer.org/xslt}indent-amount&quot;, &quot;2&quot;);\n            Source xmlSource=new SAXSource(new InputSource(new ByteArrayInputStream(xml.getBytes())));\n            StreamResult res =  new StreamResult(new ByteArrayOutputStream());            \n            serializer.transform(xmlSource, res);\n            return new String(((ByteArrayOutputStream)res.getOutputStream()).toByteArray());\n        }catch(Exception e){\n            //TODO log error\n            return xml;\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19417,"reputation":37980,"user_id":45525,"accept_rate":83,"display_name":"Synesso"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1299549521,"creation_date":1299549521,"answer_id":5227490,"question_id":139076,"body_markdown":"Using scala:\r\n\r\n    import xml._\r\n    val xml = XML.loadString(&quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;)\r\n    val formatted = new PrettyPrinter(150, 2).format(xml)\r\n    println(formatted)\r\n\r\nYou can do this in Java too, if you depend on the scala-library.jar. It looks like this:\r\n\r\n    import scala.xml.*;\r\n\r\n    public class FormatXML {\r\n        public static void main(String[] args) {\r\n            String unformattedXml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;;\r\n            PrettyPrinter pp = new PrettyPrinter(150, 3);\r\n            String formatted = pp.format(XML.loadString(unformattedXml), TopScope$.MODULE$);\r\n            System.out.println(formatted);\r\n        }\r\n    }\r\n\r\nThe `PrettyPrinter` object is constructed with two ints, the first being max line length and the second being the indentation step.","title":"How to pretty print XML from Java?","body":"<p>Using scala:</p>\n\n<pre><code>import xml._\nval xml = XML.loadString(\"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\")\nval formatted = new PrettyPrinter(150, 2).format(xml)\nprintln(formatted)\n</code></pre>\n\n<p>You can do this in Java too, if you depend on the scala-library.jar. It looks like this:</p>\n\n<pre><code>import scala.xml.*;\n\npublic class FormatXML {\n    public static void main(String[] args) {\n        String unformattedXml = \"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\";\n        PrettyPrinter pp = new PrettyPrinter(150, 3);\n        String formatted = pp.format(XML.loadString(unformattedXml), TopScope$.MODULE$);\n        System.out.println(formatted);\n    }\n}\n</code></pre>\n\n<p>The <code>PrettyPrinter</code> object is constructed with two ints, the first being max line length and the second being the indentation step.</p>\n"},{"tags":[],"owner":{"account_id":7670,"reputation":35003,"user_id":13379,"accept_rate":86,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1318257785,"creation_date":1318257785,"answer_id":7714473,"question_id":139076,"body_markdown":"Just for future reference, here&#39;s a solution that worked for me (thanks to a comment that @George Hawkins posted in one of the answers):\r\n\r\n    DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\r\n    DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(&quot;LS&quot;);\r\n    LSSerializer writer = impl.createLSSerializer();\r\n    writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);\r\n    LSOutput output = impl.createLSOutput();\r\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n    output.setByteStream(out);\r\n    writer.write(document, output);\r\n    String xmlStr = new String(out.toByteArray());","title":"How to pretty print XML from Java?","body":"<p>Just for future reference, here's a solution that worked for me (thanks to a comment that @George Hawkins posted in one of the answers):</p>\n\n<pre><code>DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\nDOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(\"LS\");\nLSSerializer writer = impl.createLSSerializer();\nwriter.getDomConfig().setParameter(\"format-pretty-print\", Boolean.TRUE);\nLSOutput output = impl.createLSOutput();\nByteArrayOutputStream out = new ByteArrayOutputStream();\noutput.setByteStream(out);\nwriter.write(document, output);\nString xmlStr = new String(out.toByteArray());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":454296,"reputation":1537,"user_id":851774,"accept_rate":83,"display_name":"JFK"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1341516989,"creation_date":1341516989,"answer_id":11351356,"question_id":139076,"body_markdown":"I have found that in Java 1.6.0_32 the normal method to pretty print an XML ***string*** (using a Transformer with a null or identity xslt) does not behave as I would like if tags are merely separated by whitespace, as opposed to having no separating text. I tried using `&lt;xsl:strip-space elements=&quot;*&quot;/&gt;` in my template to no avail. The simplest solution I found was to strip the space the way I wanted using a SAXSource and XML filter. Since my solution was for logging  I also extended this to work with incomplete XML fragments. Note the normal method seems to work fine if you use a DOMSource but I did not want to use this because of the incompleteness and memory overhead. \r\n\r\n    \t\r\n\tpublic static class WhitespaceIgnoreFilter extends XMLFilterImpl\r\n\t{\r\n\r\n\t\t@Override\r\n\t\tpublic void ignorableWhitespace(char[] arg0,\r\n\t\t\t\t\t\t\t\t\t\tint arg1,\r\n\t\t\t\t\t\t\t\t\t\tint arg2) throws SAXException\r\n\t\t{\r\n\t\t\t//Ignore it then...\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic void characters(\tchar[] ch,\r\n\t\t\t\t\t\t\t\tint start,\r\n\t\t\t\t\t\t\t\tint length) throws SAXException\r\n\t\t{\r\n\t\t\tif (!new String(ch, start, length).trim().equals(&quot;&quot;)) \r\n\t\t\t       super.characters(ch, start, length); \r\n\t\t}\r\n\t}\r\n\r\n    public static String prettyXML(String logMsg, boolean allowBadlyFormedFragments) throws SAXException, IOException, TransformerException\r\n    \t{\r\n    \t\tTransformerFactory transFactory = TransformerFactory.newInstance();\r\n    \t\ttransFactory.setAttribute(&quot;indent-number&quot;, new Integer(2));\r\n    \t\tTransformer transformer = transFactory.newTransformer();\r\n    \t\ttransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n    \t\ttransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;4&quot;);\r\n    \t\tStringWriter out = new StringWriter();\r\n    \t\tXMLReader masterParser = SAXHelper.getSAXParser(true);\r\n    \t\tXMLFilter parser = new WhitespaceIgnoreFilter();\r\n    \t\tparser.setParent(masterParser);\r\n    \r\n    \t\tif(allowBadlyFormedFragments)\r\n    \t\t{\r\n    \t\t\ttransformer.setErrorListener(new ErrorListener()\r\n    \t\t\t{\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void warning(TransformerException exception) throws TransformerException\r\n    \t\t\t\t{\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void fatalError(TransformerException exception) throws TransformerException\r\n    \t\t\t\t{\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void error(TransformerException exception) throws TransformerException\r\n    \t\t\t\t{\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t}\r\n    \t\t\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\ttransformer.transform(new SAXSource(parser, new InputSource(new StringReader(logMsg))), new StreamResult(out));\r\n    \t\t}\r\n    \t\tcatch (TransformerException e)\r\n    \t\t{\r\n    \t\t\tif(e.getCause() != null &amp;&amp; e.getCause() instanceof SAXParseException)\r\n    \t\t\t{\r\n    \t\t\t\tif(!allowBadlyFormedFragments || !&quot;XML document structures must start and end within the same entity.&quot;.equals(e.getCause().getMessage()))\r\n    \t\t\t\t{\r\n    \t\t\t\t\tthrow e;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t{\r\n    \t\t\t\tthrow e;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tout.flush();\r\n    \t\treturn out.toString();\r\n    \t}","title":"How to pretty print XML from Java?","body":"<p>I have found that in Java 1.6.0_32 the normal method to pretty print an XML <strong><em>string</em></strong> (using a Transformer with a null or identity xslt) does not behave as I would like if tags are merely separated by whitespace, as opposed to having no separating text. I tried using <code>&lt;xsl:strip-space elements=\"*\"/&gt;</code> in my template to no avail. The simplest solution I found was to strip the space the way I wanted using a SAXSource and XML filter. Since my solution was for logging  I also extended this to work with incomplete XML fragments. Note the normal method seems to work fine if you use a DOMSource but I did not want to use this because of the incompleteness and memory overhead. </p>\n\n<pre><code>public static class WhitespaceIgnoreFilter extends XMLFilterImpl\n{\n\n    @Override\n    public void ignorableWhitespace(char[] arg0,\n                                    int arg1,\n                                    int arg2) throws SAXException\n    {\n        //Ignore it then...\n    }\n\n    @Override\n    public void characters( char[] ch,\n                            int start,\n                            int length) throws SAXException\n    {\n        if (!new String(ch, start, length).trim().equals(\"\")) \n               super.characters(ch, start, length); \n    }\n}\n\npublic static String prettyXML(String logMsg, boolean allowBadlyFormedFragments) throws SAXException, IOException, TransformerException\n    {\n        TransformerFactory transFactory = TransformerFactory.newInstance();\n        transFactory.setAttribute(\"indent-number\", new Integer(2));\n        Transformer transformer = transFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n        transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"4\");\n        StringWriter out = new StringWriter();\n        XMLReader masterParser = SAXHelper.getSAXParser(true);\n        XMLFilter parser = new WhitespaceIgnoreFilter();\n        parser.setParent(masterParser);\n\n        if(allowBadlyFormedFragments)\n        {\n            transformer.setErrorListener(new ErrorListener()\n            {\n                @Override\n                public void warning(TransformerException exception) throws TransformerException\n                {\n                }\n\n                @Override\n                public void fatalError(TransformerException exception) throws TransformerException\n                {\n                }\n\n                @Override\n                public void error(TransformerException exception) throws TransformerException\n                {\n                }\n            });\n        }\n\n        try\n        {\n            transformer.transform(new SAXSource(parser, new InputSource(new StringReader(logMsg))), new StreamResult(out));\n        }\n        catch (TransformerException e)\n        {\n            if(e.getCause() != null &amp;&amp; e.getCause() instanceof SAXParseException)\n            {\n                if(!allowBadlyFormedFragments || !\"XML document structures must start and end within the same entity.\".equals(e.getCause().getMessage()))\n                {\n                    throw e;\n                }\n            }\n            else\n            {\n                throw e;\n            }\n        }\n        out.flush();\n        return out.toString();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1363782104,"post_id":11519668,"comment_id":21987249,"body_markdown":"No indention, but it does works with this: System.setProperty(DOMImplementationRegistry.PROPERTY,&quot;com.sun.org.apache.xerces.internal.dom.DOMImplementationSourceImpl&quot;);","body":"No indention, but it does works with this: System.setProperty(DOMImplementationRegistry.PROPERTY,&quot;com.s&zwnj;&#8203;un.org.apache.xerces&zwnj;&#8203;.internal.dom.DOMImp&zwnj;&#8203;lementationSourceImp&zwnj;&#8203;l&quot;);"},{"owner":{"account_id":2927647,"reputation":2746,"user_id":2508646,"accept_rate":100,"display_name":"Dan Temple"},"score":0,"creation_date":1393320108,"post_id":11519668,"comment_id":33360294,"body_markdown":"I tried this solution and found that the returned XML string always had UTF-16. When the document is serialized back into a string, there is this line of code: `ser._format.setEncoding(&quot;UTF-16&quot;);` This may be some the standard now, but for the system I&#39;m working with, UTF-8 is used. Does anyone know how to maintain the encoding from the original XML string?","body":"I tried this solution and found that the returned XML string always had UTF-16. When the document is serialized back into a string, there is this line of code: <code>ser._format.setEncoding(&quot;UTF-16&quot;);</code> This may be some the standard now, but for the system I&#39;m working with, UTF-8 is used. Does anyone know how to maintain the encoding from the original XML string?"},{"owner":{"account_id":98291,"reputation":3509,"user_id":266167,"display_name":"Joshua Davis"},"score":2,"creation_date":1394653841,"post_id":11519668,"comment_id":33991323,"body_markdown":"@DanTemple  It seems like you need to use LSOutput to control the encoding.   See http://www.chipkillmar.net/2009/03/25/pretty-print-xml-from-a-dom/","body":"@DanTemple  It seems like you need to use LSOutput to control the encoding.   See <a href=\"http://www.chipkillmar.net/2009/03/25/pretty-print-xml-from-a-dom/\" rel=\"nofollow noreferrer\">chipkillmar.net/2009/03/25/pretty-print-xml-from-a-dom</a>"},{"owner":{"account_id":2927647,"reputation":2746,"user_id":2508646,"accept_rate":100,"display_name":"Dan Temple"},"score":0,"creation_date":1394703307,"post_id":11519668,"comment_id":34011464,"body_markdown":"@JoshuaDavis Thanks, that works to set the encoding on the response. I&#39;ll need to add something that passes the original encoding to the pretty printer if I want to maintain the encoding of the oiginal XML string.","body":"@JoshuaDavis Thanks, that works to set the encoding on the response. I&#39;ll need to add something that passes the original encoding to the pretty printer if I want to maintain the encoding of the oiginal XML string."},{"owner":{"account_id":5117496,"reputation":2302,"user_id":4102160,"accept_rate":75,"display_name":"Cfx"},"score":0,"creation_date":1414411498,"post_id":11519668,"comment_id":41789345,"body_markdown":"@JoshA. There is a one-liner using XMLBeam: `System.out.println(new XBProjector().projectXMLString(&quot;&lt;xml&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/xml&gt;&quot;, DOMAccess.class).asString());`","body":"@JoshA. There is a one-liner using XMLBeam: <code>System.out.println(new XBProjector().projectXMLString(&quot;&lt;xml&gt;&lt;foo&gt;&lt;bar&#47;&gt;&lt;&#47;foo&gt;&lt;&#47;xml&gt;&zwnj;&#8203;&quot;, DOMAccess.class).asString());</code>"},{"owner":{"account_id":1016899,"reputation":1242,"user_id":1028276,"accept_rate":76,"display_name":"eeijlar"},"score":0,"creation_date":1423136996,"post_id":11519668,"comment_id":45030786,"body_markdown":"I find that this wraps lines over a certain length - is there any way to prevent wrapping?","body":"I find that this wraps lines over a certain length - is there any way to prevent wrapping?"},{"owner":{"account_id":695155,"reputation":26358,"user_id":274677,"accept_rate":81,"display_name":"Marcus Junius Brutus"},"score":0,"creation_date":1425765343,"post_id":11519668,"comment_id":46098308,"body_markdown":"this adds an FEFF BOM at the beginning of the returned String.","body":"this adds an FEFF BOM at the beginning of the returned String."},{"owner":{"account_id":1930371,"reputation":24901,"user_id":1739882,"accept_rate":71,"display_name":"Chintan Soni"},"score":2,"creation_date":1431244432,"post_id":11519668,"comment_id":48405809,"body_markdown":"I tried to use this in Andriod but i am not able to find the package `DOMImplementationRegistry. I am using java 8.","body":"I tried to use this in Andriod but i am not able to find the package `DOMImplementationRegistry. I am using java 8."},{"owner":{"account_id":1524807,"reputation":329,"user_id":1423520,"display_name":"Julian Sievers"},"score":0,"creation_date":1453299906,"post_id":11519668,"comment_id":57541230,"body_markdown":"I had issues with this snippet regarding escaped attribute values. The less than escape sequence `&amp;lt;` was correctly preserved while the greater than sequence `&amp;gt;` was converted to the actual sign `&gt;`.","body":"I had issues with this snippet regarding escaped attribute values. The less than escape sequence <code>&amp;lt;</code> was correctly preserved while the greater than sequence <code>&amp;gt;</code> was converted to the actual sign <code>&gt;</code>."},{"owner":{"account_id":1502661,"reputation":1753,"user_id":1406807,"display_name":"Yura"},"score":0,"creation_date":1463575736,"post_id":11519668,"comment_id":62122610,"body_markdown":"yep, this work on jdk8 without exception instead of next rated answer.","body":"yep, this work on jdk8 without exception instead of next rated answer."},{"owner":{"account_id":1925991,"reputation":3776,"user_id":1736425,"accept_rate":88,"display_name":"Ali Cheaito"},"score":1,"creation_date":1504295786,"post_id":11519668,"comment_id":78975335,"body_markdown":"To set the encoding:\n            LSOutput output = impl.createLSOutput();\n            output.setEncoding(&quot;UTF-8&quot;);\n            output.setByteStream(new ByteArrayOutputStream());\n            writer.write(document, output);\n            return output.getByteStream().toString();","body":"To set the encoding:             LSOutput output = impl.createLSOutput();             output.setEncoding(&quot;UTF-8&quot;);             output.setByteStream(new ByteArrayOutputStream());             writer.write(document, output);             return output.getByteStream().toString();"},{"owner":{"account_id":9709676,"reputation":1447,"user_id":7221628,"accept_rate":100,"display_name":"JGlass"},"score":0,"creation_date":1531419641,"post_id":11519668,"comment_id":89601010,"body_markdown":"Didnt work on JDK 8 deployed to JBoss EAP 7/Wildfly 10 get class not found exceptions `com.sun.org.apache.xerces.internal.dom.DOMXSImplementationSourceImpl` - looks related to this https://issues.jboss.org/browse/WFLY-4416 - but I&#39;m not going to deal with adding an extra library or anything - I dont need it pretty printed that badly.","body":"Didnt work on JDK 8 deployed to JBoss EAP 7/Wildfly 10 get class not found exceptions <code>com.sun.org.apache.xerces.internal.dom.DOMXSImplementationSo&zwnj;&#8203;urceImpl</code> - looks related to this <a href=\"https://issues.jboss.org/browse/WFLY-4416\" rel=\"nofollow noreferrer\">issues.jboss.org/browse/WFLY-4416</a> - but I&#39;m not going to deal with adding an extra library or anything - I dont need it pretty printed that badly."},{"owner":{"account_id":8673368,"reputation":408,"user_id":6491515,"display_name":"Leon"},"score":3,"creation_date":1553783955,"post_id":11519668,"comment_id":97521143,"body_markdown":"thanks for including the import list as well, so many conflicting packages available to make sense of the combination needed otherwise..","body":"thanks for including the import list as well, so many conflicting packages available to make sense of the combination needed otherwise.."}],"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"comment_count":13,"down_vote_count":0,"up_vote_count":107,"is_accepted":true,"score":107,"last_activity_date":1359524812,"creation_date":1342517358,"answer_id":11519668,"question_id":139076,"body_markdown":"Now it&#39;s 2012 and Java can do more than it used to with XML, I&#39;d like to add an alternative to my accepted answer. This has no dependencies outside of Java 6.\r\n\r\n\r\n    import org.w3c.dom.Node;\r\n    import org.w3c.dom.bootstrap.DOMImplementationRegistry;\r\n    import org.w3c.dom.ls.DOMImplementationLS;\r\n    import org.w3c.dom.ls.LSSerializer;\r\n    import org.xml.sax.InputSource;\r\n    \r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import java.io.StringReader;\r\n    \r\n    /**\r\n     * Pretty-prints xml, supplied as a string.\r\n     * &lt;p/&gt;\r\n     * eg.\r\n     * &lt;code&gt;\r\n     * String formattedXml = new XmlFormatter().format(&quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;);\r\n     * &lt;/code&gt;\r\n     */\r\n    public class XmlFormatter {\r\n    \r\n        public String format(String xml) {\r\n    \r\n            try {\r\n                final InputSource src = new InputSource(new StringReader(xml));\r\n                final Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\r\n                final Boolean keepDeclaration = Boolean.valueOf(xml.startsWith(&quot;&lt;?xml&quot;));\r\n    \r\n            //May need this: System.setProperty(DOMImplementationRegistry.PROPERTY,&quot;com.sun.org.apache.xerces.internal.dom.DOMImplementationSourceImpl&quot;);\r\n\r\n\r\n                final DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\r\n                final DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(&quot;LS&quot;);\r\n                final LSSerializer writer = impl.createLSSerializer();\r\n    \r\n                writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE); // Set this to true if the output needs to be beautified.\r\n                writer.getDomConfig().setParameter(&quot;xml-declaration&quot;, keepDeclaration); // Set this to true if the declaration is needed to be outputted.\r\n    \r\n                return writer.writeToString(document);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            String unformattedXml =\r\n                    &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&lt;QueryMessage\\n&quot; +\r\n                            &quot;        xmlns=\\&quot;http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message\\&quot;\\n&quot; +\r\n                            &quot;        xmlns:query=\\&quot;http://www.SDMX.org/resources/SDMXML/schemas/v2_0/query\\&quot;&gt;\\n&quot; +\r\n                            &quot;    &lt;Query&gt;\\n&quot; +\r\n                            &quot;        &lt;query:CategorySchemeWhere&gt;\\n&quot; +\r\n                            &quot;   \\t\\t\\t\\t\\t         &lt;query:AgencyID&gt;ECB\\n\\n\\n\\n&lt;/query:AgencyID&gt;\\n&quot; +\r\n                            &quot;        &lt;/query:CategorySchemeWhere&gt;\\n&quot; +\r\n                            &quot;    &lt;/Query&gt;\\n\\n\\n\\n\\n&quot; +\r\n                            &quot;&lt;/QueryMessage&gt;&quot;;\r\n    \r\n            System.out.println(new XmlFormatter().format(unformattedXml));\r\n        }\r\n    }\r\n\r\n","title":"How to pretty print XML from Java?","body":"<p>Now it's 2012 and Java can do more than it used to with XML, I'd like to add an alternative to my accepted answer. This has no dependencies outside of Java 6.</p>\n\n<pre><code>import org.w3c.dom.Node;\nimport org.w3c.dom.bootstrap.DOMImplementationRegistry;\nimport org.w3c.dom.ls.DOMImplementationLS;\nimport org.w3c.dom.ls.LSSerializer;\nimport org.xml.sax.InputSource;\n\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport java.io.StringReader;\n\n/**\n * Pretty-prints xml, supplied as a string.\n * &lt;p/&gt;\n * eg.\n * &lt;code&gt;\n * String formattedXml = new XmlFormatter().format(\"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\");\n * &lt;/code&gt;\n */\npublic class XmlFormatter {\n\n    public String format(String xml) {\n\n        try {\n            final InputSource src = new InputSource(new StringReader(xml));\n            final Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\n            final Boolean keepDeclaration = Boolean.valueOf(xml.startsWith(\"&lt;?xml\"));\n\n        //May need this: System.setProperty(DOMImplementationRegistry.PROPERTY,\"com.sun.org.apache.xerces.internal.dom.DOMImplementationSourceImpl\");\n\n\n            final DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\n            final DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(\"LS\");\n            final LSSerializer writer = impl.createLSSerializer();\n\n            writer.getDomConfig().setParameter(\"format-pretty-print\", Boolean.TRUE); // Set this to true if the output needs to be beautified.\n            writer.getDomConfig().setParameter(\"xml-declaration\", keepDeclaration); // Set this to true if the declaration is needed to be outputted.\n\n            return writer.writeToString(document);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public static void main(String[] args) {\n        String unformattedXml =\n                \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;&lt;QueryMessage\\n\" +\n                        \"        xmlns=\\\"http://www.SDMX.org/resources/SDMXML/schemas/v2_0/message\\\"\\n\" +\n                        \"        xmlns:query=\\\"http://www.SDMX.org/resources/SDMXML/schemas/v2_0/query\\\"&gt;\\n\" +\n                        \"    &lt;Query&gt;\\n\" +\n                        \"        &lt;query:CategorySchemeWhere&gt;\\n\" +\n                        \"   \\t\\t\\t\\t\\t         &lt;query:AgencyID&gt;ECB\\n\\n\\n\\n&lt;/query:AgencyID&gt;\\n\" +\n                        \"        &lt;/query:CategorySchemeWhere&gt;\\n\" +\n                        \"    &lt;/Query&gt;\\n\\n\\n\\n\\n\" +\n                        \"&lt;/QueryMessage&gt;\";\n\n        System.out.println(new XmlFormatter().format(unformattedXml));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674131930,"post_id":19236572,"comment_id":132651948,"body_markdown":"&quot;Quick and dirty&quot; describes it well.","body":"&quot;Quick and dirty&quot; describes it well."}],"tags":[],"owner":{"account_id":401085,"reputation":1174,"user_id":767434,"display_name":"max"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1417555852,"creation_date":1381188769,"answer_id":19236572,"question_id":139076,"body_markdown":"For those searching for a quick and dirty solution - which doesn&#39;t need the XML to be 100% valid. e.g. in case of REST / SOAP logging (you never know what the others send ;-))\r\n\r\nI found and advanced a code snipped I found online which I think is still missing here as a valid possible approach: \r\n \r\n\r\n    public static String prettyPrintXMLAsString(String xmlString) {\r\n\t\t/* Remove new lines */\r\n\t\tfinal String LINE_BREAK = &quot;\\n&quot;;\r\n\t\txmlString = xmlString.replaceAll(LINE_BREAK, &quot;&quot;);\r\n\t\tStringBuffer prettyPrintXml = new StringBuffer();\r\n\t\t/* Group the xml tags */\r\n\t\tPattern pattern = Pattern.compile(&quot;(&lt;[^/][^&gt;]+&gt;)?([^&lt;]*)(&lt;/[^&gt;]+&gt;)?(&lt;[^/][^&gt;]+/&gt;)?&quot;);\r\n\t\tMatcher matcher = pattern.matcher(xmlString);\r\n\t\tint tabCount = 0;\r\n\t\twhile (matcher.find()) {\r\n\t\t\tString str1 = (null == matcher.group(1) || &quot;null&quot;.equals(matcher.group())) ? &quot;&quot; : matcher.group(1);\r\n\t\t\tString str2 = (null == matcher.group(2) || &quot;null&quot;.equals(matcher.group())) ? &quot;&quot; : matcher.group(2);\r\n\t\t\tString str3 = (null == matcher.group(3) || &quot;null&quot;.equals(matcher.group())) ? &quot;&quot; : matcher.group(3);\r\n\t\t\tString str4 = (null == matcher.group(4) || &quot;null&quot;.equals(matcher.group())) ? &quot;&quot; : matcher.group(4);\r\n\r\n\t\t\tif (matcher.group() != null &amp;&amp; !matcher.group().trim().equals(&quot;&quot;)) {\r\n\t\t\t\tprintTabs(tabCount, prettyPrintXml);\r\n\t\t\t\tif (!str1.equals(&quot;&quot;) &amp;&amp; str3.equals(&quot;&quot;)) {\r\n\t\t\t\t\t++tabCount;\r\n\t\t\t\t}\r\n\t\t\t\tif (str1.equals(&quot;&quot;) &amp;&amp; !str3.equals(&quot;&quot;)) {\r\n\t\t\t\t\t--tabCount;\r\n\t\t\t\t\tprettyPrintXml.deleteCharAt(prettyPrintXml.length() - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprettyPrintXml.append(str1);\r\n\t\t\t\tprettyPrintXml.append(str2);\r\n\t\t\t\tprettyPrintXml.append(str3);\r\n\t\t\t\tif (!str4.equals(&quot;&quot;)) {\r\n\t\t\t\t\tprettyPrintXml.append(LINE_BREAK);\r\n\t\t\t\t\tprintTabs(tabCount, prettyPrintXml);\r\n\t\t\t\t\tprettyPrintXml.append(str4);\r\n\t\t\t\t}\r\n\t\t\t\tprettyPrintXml.append(LINE_BREAK);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn prettyPrintXml.toString();\r\n\t}\r\n\r\n\tprivate static void printTabs(int count, StringBuffer stringBuffer) {\r\n\t\tfor (int i = 0; i &lt; count; i++) {\r\n\t\t\tstringBuffer.append(&quot;\\t&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString x = new String(\r\n\t\t\t\t&quot;&lt;soap:Envelope xmlns:soap=\\&quot;http://schemas.xmlsoap.org/soap/envelope/\\&quot;&gt;&lt;soap:Body&gt;&lt;soap:Fault&gt;&lt;faultcode&gt;soap:Client&lt;/faultcode&gt;&lt;faultstring&gt;INVALID_MESSAGE&lt;/faultstring&gt;&lt;detail&gt;&lt;ns3:XcbSoapFault xmlns=\\&quot;\\&quot; xmlns:ns3=\\&quot;http://www.someapp.eu/xcb/types/xcb/v1\\&quot;&gt;&lt;CauseCode&gt;20007&lt;/CauseCode&gt;&lt;CauseText&gt;INVALID_MESSAGE&lt;/CauseText&gt;&lt;DebugInfo&gt;Problems creating SAAJ object model&lt;/DebugInfo&gt;&lt;/ns3:XcbSoapFault&gt;&lt;/detail&gt;&lt;/soap:Fault&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;&quot;);\r\n\t\tSystem.out.println(prettyPrintXMLAsString(x));\r\n\t}\r\n\r\nhere is the output:\r\n\r\n    &lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n\t  &lt;soap:Body&gt;\r\n\t\t&lt;soap:Fault&gt;\r\n\t\t\t&lt;faultcode&gt;soap:Client&lt;/faultcode&gt;\r\n\t\t\t&lt;faultstring&gt;INVALID_MESSAGE&lt;/faultstring&gt;\r\n\t\t\t&lt;detail&gt;\r\n\t\t\t\t&lt;ns3:XcbSoapFault xmlns=&quot;&quot; xmlns:ns3=&quot;http://www.someapp.eu/xcb/types/xcb/v1&quot;&gt;\r\n\t\t\t\t\t&lt;CauseCode&gt;20007&lt;/CauseCode&gt;\r\n\t\t\t\t\t&lt;CauseText&gt;INVALID_MESSAGE&lt;/CauseText&gt;\r\n\t\t\t\t\t&lt;DebugInfo&gt;Problems creating SAAJ object model&lt;/DebugInfo&gt;\r\n\t\t\t\t&lt;/ns3:XcbSoapFault&gt;\r\n\t\t\t&lt;/detail&gt;\r\n\t\t&lt;/soap:Fault&gt;\r\n\t  &lt;/soap:Body&gt;\r\n    &lt;/soap:Envelope&gt;","title":"How to pretty print XML from Java?","body":"<p>For those searching for a quick and dirty solution - which doesn't need the XML to be 100% valid. e.g. in case of REST / SOAP logging (you never know what the others send ;-))</p>\n\n<p>I found and advanced a code snipped I found online which I think is still missing here as a valid possible approach: </p>\n\n<pre><code>public static String prettyPrintXMLAsString(String xmlString) {\n    /* Remove new lines */\n    final String LINE_BREAK = \"\\n\";\n    xmlString = xmlString.replaceAll(LINE_BREAK, \"\");\n    StringBuffer prettyPrintXml = new StringBuffer();\n    /* Group the xml tags */\n    Pattern pattern = Pattern.compile(\"(&lt;[^/][^&gt;]+&gt;)?([^&lt;]*)(&lt;/[^&gt;]+&gt;)?(&lt;[^/][^&gt;]+/&gt;)?\");\n    Matcher matcher = pattern.matcher(xmlString);\n    int tabCount = 0;\n    while (matcher.find()) {\n        String str1 = (null == matcher.group(1) || \"null\".equals(matcher.group())) ? \"\" : matcher.group(1);\n        String str2 = (null == matcher.group(2) || \"null\".equals(matcher.group())) ? \"\" : matcher.group(2);\n        String str3 = (null == matcher.group(3) || \"null\".equals(matcher.group())) ? \"\" : matcher.group(3);\n        String str4 = (null == matcher.group(4) || \"null\".equals(matcher.group())) ? \"\" : matcher.group(4);\n\n        if (matcher.group() != null &amp;&amp; !matcher.group().trim().equals(\"\")) {\n            printTabs(tabCount, prettyPrintXml);\n            if (!str1.equals(\"\") &amp;&amp; str3.equals(\"\")) {\n                ++tabCount;\n            }\n            if (str1.equals(\"\") &amp;&amp; !str3.equals(\"\")) {\n                --tabCount;\n                prettyPrintXml.deleteCharAt(prettyPrintXml.length() - 1);\n            }\n\n            prettyPrintXml.append(str1);\n            prettyPrintXml.append(str2);\n            prettyPrintXml.append(str3);\n            if (!str4.equals(\"\")) {\n                prettyPrintXml.append(LINE_BREAK);\n                printTabs(tabCount, prettyPrintXml);\n                prettyPrintXml.append(str4);\n            }\n            prettyPrintXml.append(LINE_BREAK);\n        }\n    }\n    return prettyPrintXml.toString();\n}\n\nprivate static void printTabs(int count, StringBuffer stringBuffer) {\n    for (int i = 0; i &lt; count; i++) {\n        stringBuffer.append(\"\\t\");\n    }\n}\n\npublic static void main(String[] args) {\n    String x = new String(\n            \"&lt;soap:Envelope xmlns:soap=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\"&gt;&lt;soap:Body&gt;&lt;soap:Fault&gt;&lt;faultcode&gt;soap:Client&lt;/faultcode&gt;&lt;faultstring&gt;INVALID_MESSAGE&lt;/faultstring&gt;&lt;detail&gt;&lt;ns3:XcbSoapFault xmlns=\\\"\\\" xmlns:ns3=\\\"http://www.someapp.eu/xcb/types/xcb/v1\\\"&gt;&lt;CauseCode&gt;20007&lt;/CauseCode&gt;&lt;CauseText&gt;INVALID_MESSAGE&lt;/CauseText&gt;&lt;DebugInfo&gt;Problems creating SAAJ object model&lt;/DebugInfo&gt;&lt;/ns3:XcbSoapFault&gt;&lt;/detail&gt;&lt;/soap:Fault&gt;&lt;/soap:Body&gt;&lt;/soap:Envelope&gt;\");\n    System.out.println(prettyPrintXMLAsString(x));\n}\n</code></pre>\n\n<p>here is the output:</p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;\n  &lt;soap:Body&gt;\n    &lt;soap:Fault&gt;\n        &lt;faultcode&gt;soap:Client&lt;/faultcode&gt;\n        &lt;faultstring&gt;INVALID_MESSAGE&lt;/faultstring&gt;\n        &lt;detail&gt;\n            &lt;ns3:XcbSoapFault xmlns=\"\" xmlns:ns3=\"http://www.someapp.eu/xcb/types/xcb/v1\"&gt;\n                &lt;CauseCode&gt;20007&lt;/CauseCode&gt;\n                &lt;CauseText&gt;INVALID_MESSAGE&lt;/CauseText&gt;\n                &lt;DebugInfo&gt;Problems creating SAAJ object model&lt;/DebugInfo&gt;\n            &lt;/ns3:XcbSoapFault&gt;\n        &lt;/detail&gt;\n    &lt;/soap:Fault&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2158175,"reputation":371,"user_id":1912935,"accept_rate":38,"display_name":"user1912935"},"score":2,"creation_date":1435230464,"post_id":21736245,"comment_id":50118522,"body_markdown":"where is repeatString method..?","body":"where is repeatString method..?"},{"owner":{"account_id":307973,"reputation":1481,"user_id":619587,"display_name":"codeskraps"},"score":3,"creation_date":1435241821,"post_id":21736245,"comment_id":50126933,"body_markdown":"private static String repeatString(int stack) {\n\t\tStringBuilder indent = new StringBuilder();\n\t\tfor (int i = 0; i &lt; stack; i++){\n\t\t\tindent.append(&quot;    &quot;);\n}\n\t\treturn indent.toString();\n\t}","body":"private static String repeatString(int stack) { \t\tStringBuilder indent = new StringBuilder(); \t\tfor (int i = 0; i &lt; stack; i++){ \t\t\tindent.append(&quot;    &quot;); } \t\treturn indent.toString(); \t}"},{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":0,"creation_date":1435250187,"post_id":21736245,"comment_id":50133212,"body_markdown":"Yes [user1912935], what @codeskraps wrote, should be simple enough :)","body":"Yes [user1912935], what @codeskraps wrote, should be simple enough :)"},{"owner":{"account_id":285796,"reputation":13049,"user_id":584674,"accept_rate":86,"display_name":"james.garriss"},"score":0,"creation_date":1450792803,"post_id":21736245,"comment_id":56576076,"body_markdown":"Concatenation with a StringBuilder inside a loop:  Bad practice.","body":"Concatenation with a StringBuilder inside a loop:  Bad practice."},{"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"score":0,"creation_date":1543575748,"post_id":21736245,"comment_id":93977795,"body_markdown":"@james.garriss But it&#39;s super easy to split to new lines, this just illustrates a simple approach without any DOM trees.","body":"@james.garriss But it&#39;s super easy to split to new lines, this just illustrates a simple approach without any DOM trees."}],"tags":[],"owner":{"account_id":2406407,"reputation":3654,"user_id":2102748,"accept_rate":100,"display_name":"milosmns"},"comment_count":5,"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1392228984,"creation_date":1392228984,"answer_id":21736245,"question_id":139076,"body_markdown":"If you&#39;re sure that you have a valid XML, this one is simple, and avoids XML DOM trees. Maybe has some bugs, do comment if you see anything\r\n\r\n    public String prettyPrint(String xml) {\r\n                if (xml == null || xml.trim().length() == 0) return &quot;&quot;;\r\n               \r\n                int stack = 0;\r\n                StringBuilder pretty = new StringBuilder();\r\n                String[] rows = xml.trim().replaceAll(&quot;&gt;&quot;, &quot;&gt;\\n&quot;).replaceAll(&quot;&lt;&quot;, &quot;\\n&lt;&quot;).split(&quot;\\n&quot;);\r\n               \r\n                for (int i = 0; i &lt; rows.length; i++) {\r\n                        if (rows[i] == null || rows[i].trim().length() == 0) continue;\r\n \r\n                        String row = rows[i].trim();\r\n                        if (row.startsWith(&quot;&lt;?&quot;)) {\r\n                                // xml version tag\r\n                                pretty.append(row + &quot;\\n&quot;);\r\n                        } else if (row.startsWith(&quot;&lt;/&quot;)) {\r\n                                // closing tag\r\n                                String indent = repeatString(&quot;    &quot;, --stack);\r\n                                pretty.append(indent + row + &quot;\\n&quot;);\r\n                        } else if (row.startsWith(&quot;&lt;&quot;)) {\r\n                                // starting tag\r\n                                String indent = repeatString(&quot;    &quot;, stack++);\r\n                                pretty.append(indent + row + &quot;\\n&quot;);\r\n                        } else {\r\n                                // tag data\r\n                                String indent = repeatString(&quot;    &quot;, stack);\r\n                                pretty.append(indent + row + &quot;\\n&quot;);\r\n                        }\r\n                }\r\n               \r\n                return pretty.toString().trim();\r\n        }","title":"How to pretty print XML from Java?","body":"<p>If you're sure that you have a valid XML, this one is simple, and avoids XML DOM trees. Maybe has some bugs, do comment if you see anything</p>\n\n<pre><code>public String prettyPrint(String xml) {\n            if (xml == null || xml.trim().length() == 0) return \"\";\n\n            int stack = 0;\n            StringBuilder pretty = new StringBuilder();\n            String[] rows = xml.trim().replaceAll(\"&gt;\", \"&gt;\\n\").replaceAll(\"&lt;\", \"\\n&lt;\").split(\"\\n\");\n\n            for (int i = 0; i &lt; rows.length; i++) {\n                    if (rows[i] == null || rows[i].trim().length() == 0) continue;\n\n                    String row = rows[i].trim();\n                    if (row.startsWith(\"&lt;?\")) {\n                            // xml version tag\n                            pretty.append(row + \"\\n\");\n                    } else if (row.startsWith(\"&lt;/\")) {\n                            // closing tag\n                            String indent = repeatString(\"    \", --stack);\n                            pretty.append(indent + row + \"\\n\");\n                    } else if (row.startsWith(\"&lt;\")) {\n                            // starting tag\n                            String indent = repeatString(\"    \", stack++);\n                            pretty.append(indent + row + \"\\n\");\n                    } else {\n                            // tag data\n                            String indent = repeatString(\"    \", stack);\n                            pretty.append(indent + row + \"\\n\");\n                    }\n            }\n\n            return pretty.toString().trim();\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2158175,"reputation":371,"user_id":1912935,"accept_rate":38,"display_name":"user1912935"},"score":0,"creation_date":1435226371,"post_id":24650999,"comment_id":50115890,"body_markdown":"where is repeatString(stack++); method..?","body":"where is repeatString(stack++); method..?"},{"owner":{"account_id":307973,"reputation":1481,"user_id":619587,"display_name":"codeskraps"},"score":2,"creation_date":1435241801,"post_id":24650999,"comment_id":50126917,"body_markdown":"private static String repeatString(int stack) {\n\t\tStringBuilder indent = new StringBuilder();\n\t\tfor (int i = 0; i &lt; stack; i++){\n\t\t\tindent.append(&quot;    &quot;);\n}\n\t\treturn indent.toString();\n\t}","body":"private static String repeatString(int stack) { \t\tStringBuilder indent = new StringBuilder(); \t\tfor (int i = 0; i &lt; stack; i++){ \t\t\tindent.append(&quot;    &quot;); } \t\treturn indent.toString(); \t}"},{"owner":{"account_id":3345755,"reputation":124,"user_id":2810942,"display_name":"Csaba Tenkes"},"score":0,"creation_date":1545992268,"post_id":24650999,"comment_id":94751514,"body_markdown":"The indentation is not working fine at end tags.You need to change `} else if (row.startsWith(&quot;&lt;/&quot;)) {` part to this: `else if (row.startsWith(&quot;&lt;/&quot;))\n         {\n            String indent = repeatIdent(--stack);\n            if (pretty.charAt(pretty.length() - 1) == &#39;\\n&#39;)\n            {\n               pretty.append(indent + row + &quot;\\n&quot;);\n            }\n            else\n            {\n               pretty.append(row + &quot;\\n&quot;);\n            }\n         }`","body":"The indentation is not working fine at end tags.You need to change <code>} else if (row.startsWith(&quot;&lt;&#47;&quot;)) {</code> part to this: <code>else if (row.startsWith(&quot;&lt;&#47;&quot;))          {             String indent = repeatIdent(--stack);             if (pretty.charAt(pretty.length() - 1) == &#39;\\n&#39;)             {                pretty.append(indent + row + &quot;\\n&quot;);             }             else             {                pretty.append(row + &quot;\\n&quot;);             }          }</code>"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1674124127,"post_id":24650999,"comment_id":132649466,"body_markdown":"Never attempt to parse XML by hand in this way. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; within a comment.","body":"Never attempt to parse XML by hand in this way. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; within a comment."}],"tags":[],"owner":{"account_id":307973,"reputation":1481,"user_id":619587,"display_name":"codeskraps"},"comment_count":4,"down_vote_count":3,"up_vote_count":11,"is_accepted":false,"score":8,"last_activity_date":1446720235,"creation_date":1404901066,"answer_id":24650999,"question_id":139076,"body_markdown":"slightly improved version from [milosmns][1]...\r\n\r\n    public static String getPrettyXml(String xml) {\r\n\t\tif (xml == null || xml.trim().length() == 0) return &quot;&quot;;\r\n\r\n\t\tint stack = 0;\r\n\t\tStringBuilder pretty = new StringBuilder();\r\n\t\tString[] rows = xml.trim().replaceAll(&quot;&gt;&quot;, &quot;&gt;\\n&quot;).replaceAll(&quot;&lt;&quot;, &quot;\\n&lt;&quot;).split(&quot;\\n&quot;);\r\n\r\n\t\tfor (int i = 0; i &lt; rows.length; i++) {\r\n\t\t\tif (rows[i] == null || rows[i].trim().length() == 0) continue;\r\n\r\n\t\t\tString row = rows[i].trim();\r\n\t\t\tif (row.startsWith(&quot;&lt;?&quot;)) {\r\n\t\t\t\tpretty.append(row + &quot;\\n&quot;);\r\n\t\t\t} else if (row.startsWith(&quot;&lt;/&quot;)) {\r\n\t\t\t\tString indent = repeatString(--stack);\r\n\t\t\t\tpretty.append(indent + row + &quot;\\n&quot;);\r\n\t\t\t} else if (row.startsWith(&quot;&lt;&quot;) &amp;&amp; row.endsWith(&quot;/&gt;&quot;) == false) {\r\n\t\t\t\tString indent = repeatString(stack++);\r\n\t\t\t\tpretty.append(indent + row + &quot;\\n&quot;);\r\n\t\t\t\tif (row.endsWith(&quot;]]&gt;&quot;)) stack--;\r\n\t\t\t} else {\r\n\t\t\t\tString indent = repeatString(stack);\r\n\t\t\t\tpretty.append(indent + row + &quot;\\n&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn pretty.toString().trim();\r\n\t}\r\n\r\n    private static String repeatString(int stack) {\r\n         StringBuilder indent = new StringBuilder();\r\n         for (int i = 0; i &lt; stack; i++) {\r\n            indent.append(&quot; &quot;);\r\n         }\r\n         return indent.toString();\r\n    } \r\n\r\n  [1]: https://stackoverflow.com/a/21736245/619587","title":"How to pretty print XML from Java?","body":"<p>slightly improved version from <a href=\"https://stackoverflow.com/a/21736245/619587\">milosmns</a>...</p>\n\n<pre><code>public static String getPrettyXml(String xml) {\n    if (xml == null || xml.trim().length() == 0) return \"\";\n\n    int stack = 0;\n    StringBuilder pretty = new StringBuilder();\n    String[] rows = xml.trim().replaceAll(\"&gt;\", \"&gt;\\n\").replaceAll(\"&lt;\", \"\\n&lt;\").split(\"\\n\");\n\n    for (int i = 0; i &lt; rows.length; i++) {\n        if (rows[i] == null || rows[i].trim().length() == 0) continue;\n\n        String row = rows[i].trim();\n        if (row.startsWith(\"&lt;?\")) {\n            pretty.append(row + \"\\n\");\n        } else if (row.startsWith(\"&lt;/\")) {\n            String indent = repeatString(--stack);\n            pretty.append(indent + row + \"\\n\");\n        } else if (row.startsWith(\"&lt;\") &amp;&amp; row.endsWith(\"/&gt;\") == false) {\n            String indent = repeatString(stack++);\n            pretty.append(indent + row + \"\\n\");\n            if (row.endsWith(\"]]&gt;\")) stack--;\n        } else {\n            String indent = repeatString(stack);\n            pretty.append(indent + row + \"\\n\");\n        }\n    }\n\n    return pretty.toString().trim();\n}\n\nprivate static String repeatString(int stack) {\n     StringBuilder indent = new StringBuilder();\n     for (int i = 0; i &lt; stack; i++) {\n        indent.append(\" \");\n     }\n     return indent.toString();\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3177957,"reputation":1440,"user_id":2685402,"accept_rate":53,"display_name":"Wojtek"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1413291386,"creation_date":1413290845,"answer_id":26361221,"question_id":139076,"body_markdown":"The solutions I have found here for Java 1.6+ do not reformat the code if it is already formatted. The one that worked for me (and re-formatted already formatted code) was the following.\r\n\r\n    import org.apache.xml.security.c14n.CanonicalizationException;\r\n    import org.apache.xml.security.c14n.Canonicalizer;\r\n    import org.apache.xml.security.c14n.InvalidCanonicalizerException;\r\n    import org.w3c.dom.Element;\r\n    import org.w3c.dom.bootstrap.DOMImplementationRegistry;\r\n    import org.w3c.dom.ls.DOMImplementationLS;\r\n    import org.w3c.dom.ls.LSSerializer;\r\n    import org.xml.sax.InputSource;\r\n    import org.xml.sax.SAXException;\r\n\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.parsers.ParserConfigurationException;\r\n    import javax.xml.transform.TransformerException;\r\n    import java.io.IOException;\r\n    import java.io.StringReader;\r\n\r\n    public class XmlUtils {\r\n        public static String toCanonicalXml(String xml) throws InvalidCanonicalizerException, ParserConfigurationException, SAXException, CanonicalizationException, IOException {\r\n            Canonicalizer canon = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_OMIT_COMMENTS);\r\n            byte canonXmlBytes[] = canon.canonicalize(xml.getBytes());\r\n            return new String(canonXmlBytes);\r\n        }\r\n    \r\n        public static String prettyFormat(String input) throws TransformerException, ParserConfigurationException, IOException, SAXException, InstantiationException, IllegalAccessException, ClassNotFoundException {\r\n            InputSource src = new InputSource(new StringReader(input));\r\n            Element document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\r\n            Boolean keepDeclaration = input.startsWith(&quot;&lt;?xml&quot;);\r\n            DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\r\n            DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(&quot;LS&quot;);\r\n            LSSerializer writer = impl.createLSSerializer();\r\n            writer.getDomConfig().setParameter(&quot;format-pretty-print&quot;, Boolean.TRUE);\r\n            writer.getDomConfig().setParameter(&quot;xml-declaration&quot;, keepDeclaration);\r\n            return writer.writeToString(document);\r\n        }\r\n    }\r\n\r\nIt is a good tool to use in your unit tests for full-string xml comparison. \r\n\r\n    private void assertXMLEqual(String expected, String actual) throws ParserConfigurationException, IOException, SAXException, CanonicalizationException, InvalidCanonicalizerException, TransformerException, IllegalAccessException, ClassNotFoundException, InstantiationException {\r\n        String canonicalExpected = prettyFormat(toCanonicalXml(expected));\r\n        String canonicalActual = prettyFormat(toCanonicalXml(actual));\r\n        assertEquals(canonicalExpected, canonicalActual);\r\n    }\r\n","title":"How to pretty print XML from Java?","body":"<p>The solutions I have found here for Java 1.6+ do not reformat the code if it is already formatted. The one that worked for me (and re-formatted already formatted code) was the following.</p>\n\n<pre><code>import org.apache.xml.security.c14n.CanonicalizationException;\nimport org.apache.xml.security.c14n.Canonicalizer;\nimport org.apache.xml.security.c14n.InvalidCanonicalizerException;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.bootstrap.DOMImplementationRegistry;\nimport org.w3c.dom.ls.DOMImplementationLS;\nimport org.w3c.dom.ls.LSSerializer;\nimport org.xml.sax.InputSource;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.transform.TransformerException;\nimport java.io.IOException;\nimport java.io.StringReader;\n\npublic class XmlUtils {\n    public static String toCanonicalXml(String xml) throws InvalidCanonicalizerException, ParserConfigurationException, SAXException, CanonicalizationException, IOException {\n        Canonicalizer canon = Canonicalizer.getInstance(Canonicalizer.ALGO_ID_C14N_OMIT_COMMENTS);\n        byte canonXmlBytes[] = canon.canonicalize(xml.getBytes());\n        return new String(canonXmlBytes);\n    }\n\n    public static String prettyFormat(String input) throws TransformerException, ParserConfigurationException, IOException, SAXException, InstantiationException, IllegalAccessException, ClassNotFoundException {\n        InputSource src = new InputSource(new StringReader(input));\n        Element document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();\n        Boolean keepDeclaration = input.startsWith(\"&lt;?xml\");\n        DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();\n        DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation(\"LS\");\n        LSSerializer writer = impl.createLSSerializer();\n        writer.getDomConfig().setParameter(\"format-pretty-print\", Boolean.TRUE);\n        writer.getDomConfig().setParameter(\"xml-declaration\", keepDeclaration);\n        return writer.writeToString(document);\n    }\n}\n</code></pre>\n\n<p>It is a good tool to use in your unit tests for full-string xml comparison. </p>\n\n<pre><code>private void assertXMLEqual(String expected, String actual) throws ParserConfigurationException, IOException, SAXException, CanonicalizationException, InvalidCanonicalizerException, TransformerException, IllegalAccessException, ClassNotFoundException, InstantiationException {\n    String canonicalExpected = prettyFormat(toCanonicalXml(expected));\n    String canonicalActual = prettyFormat(toCanonicalXml(actual));\n    assertEquals(canonicalExpected, canonicalActual);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":208843,"reputation":8250,"user_id":459579,"display_name":"ThomasRS"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1450274902,"creation_date":1419805509,"answer_id":27681201,"question_id":139076,"body_markdown":"As an alternative to the answers from [max][1], [codeskraps][2], [David Easley][3] and [milosmns][4], have a look at my lightweight, high-performance pretty-printer library: [xml-formatter][5]\r\n\r\n     \r\n    // construct lightweight, threadsafe, instance\r\n    PrettyPrinter prettyPrinter = PrettyPrinterBuilder.newPrettyPrinter().build();\r\n     \r\n    StringBuilder buffer = new StringBuilder();\r\n    String xml = ..; // also works with char[] or Reader\r\n     \r\n    if(prettyPrinter.process(xml, buffer)) {\r\n         // valid XML, print buffer\r\n    } else {\r\n         // invalid XML, print xml\r\n    }\r\n    \r\nSometimes, like when running mocked SOAP services directly from file, it is good to have a pretty-printer which also handles already pretty-printed XML:\r\n\r\n    PrettyPrinter prettyPrinter = PrettyPrinterBuilder.newPrettyPrinter().ignoreWhitespace().build();\r\n\r\n\r\nAs some have commented, pretty-printing is just a way of presenting XML in a more human-readable form - whitespace strictly does not belong in your XML data. \r\n\r\nThe library is intended for pretty-printing for logging purposes, and also includes functions for filtering (subtree removal / anonymization) and pretty-printing of XML in CDATA and Text nodes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/767434/max\r\n  [2]: https://stackoverflow.com/users/619587/codeskraps\r\n  [3]: https://stackoverflow.com/users/65555/david-easley\r\n  [4]: https://stackoverflow.com/users/2102748/milosmns\r\n  [5]: https://github.com/greenbird/xml-formatter-core","title":"How to pretty print XML from Java?","body":"<p>As an alternative to the answers from <a href=\"https://stackoverflow.com/users/767434/max\">max</a>, <a href=\"https://stackoverflow.com/users/619587/codeskraps\">codeskraps</a>, <a href=\"https://stackoverflow.com/users/65555/david-easley\">David Easley</a> and <a href=\"https://stackoverflow.com/users/2102748/milosmns\">milosmns</a>, have a look at my lightweight, high-performance pretty-printer library: <a href=\"https://github.com/greenbird/xml-formatter-core\" rel=\"nofollow noreferrer\">xml-formatter</a></p>\n\n<pre><code>// construct lightweight, threadsafe, instance\nPrettyPrinter prettyPrinter = PrettyPrinterBuilder.newPrettyPrinter().build();\n\nStringBuilder buffer = new StringBuilder();\nString xml = ..; // also works with char[] or Reader\n\nif(prettyPrinter.process(xml, buffer)) {\n     // valid XML, print buffer\n} else {\n     // invalid XML, print xml\n}\n</code></pre>\n\n<p>Sometimes, like when running mocked SOAP services directly from file, it is good to have a pretty-printer which also handles already pretty-printed XML:</p>\n\n<pre><code>PrettyPrinter prettyPrinter = PrettyPrinterBuilder.newPrettyPrinter().ignoreWhitespace().build();\n</code></pre>\n\n<p>As some have commented, pretty-printing is just a way of presenting XML in a more human-readable form - whitespace strictly does not belong in your XML data. </p>\n\n<p>The library is intended for pretty-printing for logging purposes, and also includes functions for filtering (subtree removal / anonymization) and pretty-printing of XML in CDATA and Text nodes.</p>\n"},{"tags":[],"owner":{"account_id":2354988,"reputation":2177,"user_id":2063026,"accept_rate":100,"display_name":"vsnyc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430512944,"creation_date":1430512944,"answer_id":29994838,"question_id":139076,"body_markdown":"I saw [one answer](https://stackoverflow.com/a/5227490/2063026) using `Scala`, so here is another one in `Groovy`, just in case someone finds it interesting. The default indentation is 2 steps, `XmlNodePrinter` constructor can be passed another value as well.\r\n\r\n    def xml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;\r\n    def stringWriter = new StringWriter()\r\n    def node = new XmlParser().parseText(xml);\r\n    new XmlNodePrinter(new PrintWriter(stringWriter)).print(node)\r\n    println stringWriter.toString()\r\n\r\nUsage from Java if groovy jar is in classpath\r\n\r\n      String xml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;;\r\n      StringWriter stringWriter = new StringWriter();\r\n      Node node = new XmlParser().parseText(xml);\r\n      new XmlNodePrinter(new PrintWriter(stringWriter)).print(node);\r\n      System.out.println(stringWriter.toString());\r\n\r\n","title":"How to pretty print XML from Java?","body":"<p>I saw <a href=\"https://stackoverflow.com/a/5227490/2063026\">one answer</a> using <code>Scala</code>, so here is another one in <code>Groovy</code>, just in case someone finds it interesting. The default indentation is 2 steps, <code>XmlNodePrinter</code> constructor can be passed another value as well.</p>\n\n<pre><code>def xml = \"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\"\ndef stringWriter = new StringWriter()\ndef node = new XmlParser().parseText(xml);\nnew XmlNodePrinter(new PrintWriter(stringWriter)).print(node)\nprintln stringWriter.toString()\n</code></pre>\n\n<p>Usage from Java if groovy jar is in classpath</p>\n\n<pre><code>  String xml = \"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\";\n  StringWriter stringWriter = new StringWriter();\n  Node node = new XmlParser().parseText(xml);\n  new XmlNodePrinter(new PrintWriter(stringWriter)).print(node);\n  System.out.println(stringWriter.toString());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1975632,"reputation":497,"user_id":1773483,"display_name":"Prateek Mehta"},"score":0,"creation_date":1646152265,"post_id":30171112,"comment_id":126050522,"body_markdown":"Amazing, it solved my problem. Thanks !","body":"Amazing, it solved my problem. Thanks !"}],"tags":[],"owner":{"account_id":124055,"reputation":99,"user_id":2339693,"display_name":"BijanE"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1435056856,"creation_date":1431356447,"answer_id":30171112,"question_id":139076,"body_markdown":"Using jdom2 : http://www.jdom.org/\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.io.StringReader;\r\n    import org.jdom2.input.SAXBuilder;\r\n    import org.jdom2.output.Format;\r\n    import org.jdom2.output.XMLOutputter;\r\n\r\n    String prettyXml = new XMLOutputter(Format.getPrettyFormat()).\r\n                             outputString(new SAXBuilder().build(new StringReader(uglyXml)));\r\n","title":"How to pretty print XML from Java?","body":"<p>Using jdom2 : <a href=\"http://www.jdom.org/\" rel=\"nofollow\">http://www.jdom.org/</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.StringReader;\nimport org.jdom2.input.SAXBuilder;\nimport org.jdom2.output.Format;\nimport org.jdom2.output.XMLOutputter;\n\nString prettyXml = new XMLOutputter(Format.getPrettyFormat()).\n                         outputString(new SAXBuilder().build(new StringReader(uglyXml)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2369743,"reputation":7285,"user_id":2074605,"accept_rate":100,"display_name":"Parker"},"score":1,"creation_date":1434551295,"post_id":30213453,"comment_id":49828226,"body_markdown":"Note that the use of the &#39;{http://xml.apache.org/xslt}indent-amount&#39; property will tie you to a specific transformer implementation.","body":"Note that the use of the &#39;{<a href=\"http://xml.apache.org/xslt\" rel=\"nofollow noreferrer\">xml.apache.org/xslt</a>}indent-amount&#39; property will tie you to a specific transformer implementation."},{"owner":{"account_id":1080648,"reputation":577,"user_id":1077748,"accept_rate":76,"display_name":"Fabio"},"score":2,"creation_date":1457637911,"post_id":30213453,"comment_id":59509249,"body_markdown":"From all the solutions this one worked the best. I had spaces and new lines already in my XML plus I did not wanted to add more dependencies to my project. I wish I did not have to parse the XML but oh well.","body":"From all the solutions this one worked the best. I had spaces and new lines already in my XML plus I did not wanted to add more dependencies to my project. I wish I did not have to parse the XML but oh well."}],"tags":[],"owner":{"account_id":186461,"reputation":13643,"user_id":423868,"accept_rate":65,"display_name":"Georgy Gobozov"},"comment_count":2,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1431516421,"creation_date":1431516421,"answer_id":30213453,"question_id":139076,"body_markdown":"All above solutions didn&#39;t work for me, then I found this http://myshittycode.com/2014/02/10/java-properly-indenting-xml-string/\r\n\r\nThe clue is remove whitespaces with XPath\r\n\r\n        String xml = &quot;&lt;root&gt;&quot; +\r\n                 &quot;\\n   &quot; +\r\n                 &quot;\\n&lt;name&gt;Coco Puff&lt;/name&gt;&quot; +\r\n                 &quot;\\n        &lt;total&gt;10&lt;/total&gt;    &lt;/root&gt;&quot;;\r\n     \r\n    try {\r\n        Document document = DocumentBuilderFactory.newInstance()\r\n                .newDocumentBuilder()\r\n                .parse(new InputSource(new ByteArrayInputStream(xml.getBytes(&quot;utf-8&quot;))));\r\n     \r\n        XPath xPath = XPathFactory.newInstance().newXPath();\r\n        NodeList nodeList = (NodeList) xPath.evaluate(&quot;//text()[normalize-space()=&#39;&#39;]&quot;,\r\n                                                      document,\r\n                                                      XPathConstants.NODESET);\r\n     \r\n        for (int i = 0; i &lt; nodeList.getLength(); ++i) {\r\n            Node node = nodeList.item(i);\r\n            node.getParentNode().removeChild(node);\r\n        }\r\n     \r\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\r\n        transformer.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n        transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n        transformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;4&quot;);\r\n     \r\n        StringWriter stringWriter = new StringWriter();\r\n        StreamResult streamResult = new StreamResult(stringWriter);\r\n     \r\n        transformer.transform(new DOMSource(document), streamResult);\r\n     \r\n        System.out.println(stringWriter.toString());\r\n    }\r\n    catch (Exception e) {\r\n        e.printStackTrace();\r\n    }","title":"How to pretty print XML from Java?","body":"<p>All above solutions didn't work for me, then I found this <a href=\"http://myshittycode.com/2014/02/10/java-properly-indenting-xml-string/\" rel=\"noreferrer\">http://myshittycode.com/2014/02/10/java-properly-indenting-xml-string/</a></p>\n\n<p>The clue is remove whitespaces with XPath</p>\n\n<pre><code>    String xml = \"&lt;root&gt;\" +\n             \"\\n   \" +\n             \"\\n&lt;name&gt;Coco Puff&lt;/name&gt;\" +\n             \"\\n        &lt;total&gt;10&lt;/total&gt;    &lt;/root&gt;\";\n\ntry {\n    Document document = DocumentBuilderFactory.newInstance()\n            .newDocumentBuilder()\n            .parse(new InputSource(new ByteArrayInputStream(xml.getBytes(\"utf-8\"))));\n\n    XPath xPath = XPathFactory.newInstance().newXPath();\n    NodeList nodeList = (NodeList) xPath.evaluate(\"//text()[normalize-space()='']\",\n                                                  document,\n                                                  XPathConstants.NODESET);\n\n    for (int i = 0; i &lt; nodeList.getLength(); ++i) {\n        Node node = nodeList.item(i);\n        node.getParentNode().removeChild(node);\n    }\n\n    Transformer transformer = TransformerFactory.newInstance().newTransformer();\n    transformer.setOutputProperty(OutputKeys.ENCODING, \"UTF-8\");\n    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n    transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n    transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"4\");\n\n    StringWriter stringWriter = new StringWriter();\n    StreamResult streamResult = new StreamResult(stringWriter);\n\n    transformer.transform(new DOMSource(document), streamResult);\n\n    System.out.println(stringWriter.toString());\n}\ncatch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1417867,"reputation":1821,"user_id":1343090,"accept_rate":0,"display_name":"Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1447152600,"creation_date":1437590700,"answer_id":31571512,"question_id":139076,"body_markdown":"Just another solution which works for us\r\n\r\n    import java.io.StringWriter;\r\n    import org.dom4j.DocumentHelper;\r\n    import org.dom4j.io.OutputFormat;\r\n    import org.dom4j.io.XMLWriter;\r\n\r\n    **\r\n\t * Pretty Print XML String\r\n\t * \r\n\t * @param inputXmlString\r\n\t * @return\r\n\t */\r\n\tpublic static String prettyPrintXml(String xml) {\r\n\r\n\t\tfinal StringWriter sw;\r\n\r\n\t\ttry {\r\n\t\t\tfinal OutputFormat format = OutputFormat.createPrettyPrint();\r\n\t\t\tfinal org.dom4j.Document document = DocumentHelper.parseText(xml);\r\n\t\t\tsw = new StringWriter();\r\n\t\t\tfinal XMLWriter writer = new XMLWriter(sw, format);\r\n\t\t\twriter.write(document);\r\n\t\t}\r\n\t\tcatch (Exception e) {\r\n\t\t\tthrow new RuntimeException(&quot;Error pretty printing xml:\\n&quot; + xml, e);\r\n\t\t}\r\n\t\treturn sw.toString();\r\n\t}","title":"How to pretty print XML from Java?","body":"<p>Just another solution which works for us</p>\n\n<pre><code>import java.io.StringWriter;\nimport org.dom4j.DocumentHelper;\nimport org.dom4j.io.OutputFormat;\nimport org.dom4j.io.XMLWriter;\n\n**\n * Pretty Print XML String\n * \n * @param inputXmlString\n * @return\n */\npublic static String prettyPrintXml(String xml) {\n\n    final StringWriter sw;\n\n    try {\n        final OutputFormat format = OutputFormat.createPrettyPrint();\n        final org.dom4j.Document document = DocumentHelper.parseText(xml);\n        sw = new StringWriter();\n        final XMLWriter writer = new XMLWriter(sw, format);\n        writer.write(document);\n    }\n    catch (Exception e) {\n        throw new RuntimeException(\"Error pretty printing xml:\\n\" + xml, e);\n    }\n    return sw.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":241301,"reputation":809,"user_id":512025,"accept_rate":65,"display_name":"Sudhakar Chavali"},"score":1,"creation_date":1518106968,"post_id":32119396,"comment_id":84378358,"body_markdown":"Hmmmm... Just thinking loud, who would be needing such solution? Only area I can see is data we get from some web services and just to test that data and its validity,  developer or tester might need such easy ones. Otherwise not a good option....","body":"Hmmmm... Just thinking loud, who would be needing such solution? Only area I can see is data we get from some web services and just to test that data and its validity,  developer or tester might need such easy ones. Otherwise not a good option...."},{"owner":{"account_id":209251,"reputation":5134,"user_id":460175,"display_name":"comonad"},"score":1,"creation_date":1519060991,"post_id":32119396,"comment_id":84746051,"body_markdown":"@SudhakarChavali i&#39;m a developer. i might need that for dirty println() and log.debug() hacks; i.e. some times i can only use log files from within a restricted server environment (with web admin interface instead of shell access) instead of sane step-by-step-debugging the program.","body":"@SudhakarChavali i&#39;m a developer. i might need that for dirty println() and log.debug() hacks; i.e. some times i can only use log files from within a restricted server environment (with web admin interface instead of shell access) instead of sane step-by-step-debugging the program."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674124152,"post_id":32119396,"comment_id":132649479,"body_markdown":"Never attempt to parse XML by hand in this way. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; within a comment.","body":"Never attempt to parse XML by hand in this way. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; within a comment."}],"tags":[],"owner":{"account_id":209251,"reputation":5134,"user_id":460175,"display_name":"comonad"},"comment_count":3,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1440076846,"creation_date":1440076846,"answer_id":32119396,"question_id":139076,"body_markdown":"In case you do not need indentation that much but a few line breaks, it could be sufficient to simply regex...\r\n\r\n    String leastPrettifiedXml = uglyXml.replaceAll(&quot;&gt;&lt;&quot;, &quot;&gt;\\n&lt;&quot;);\r\n\r\nThe code is nice, not the result because of missing indentation. \r\n\r\n-----\r\n\r\n(For solutions with indentation, see other answers.)\r\n","title":"How to pretty print XML from Java?","body":"<p>In case you do not need indentation that much but a few line breaks, it could be sufficient to simply regex...</p>\n\n<pre><code>String leastPrettifiedXml = uglyXml.replaceAll(\"&gt;&lt;\", \"&gt;\\n&lt;\");\n</code></pre>\n\n<p>The code is nice, not the result because of missing indentation. </p>\n\n<hr>\n\n<p>(For solutions with indentation, see other answers.)</p>\n"},{"comments":[{"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"score":0,"creation_date":1594744508,"post_id":37221093,"comment_id":111231151,"body_markdown":"Can’t see the difference with some of the already posted answers.","body":"Can’t see the difference with some of the already posted answers."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674124014,"post_id":37221093,"comment_id":132649435,"body_markdown":"Building a DOM here is unnecessary and inefficient. Use a StreamSource.","body":"Building a DOM here is unnecessary and inefficient. Use a StreamSource."}],"tags":[],"owner":{"account_id":2348323,"reputation":13158,"user_id":2057902,"accept_rate":80,"display_name":"Sireesh Yarlagadda"},"comment_count":2,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1465427436,"creation_date":1463184998,"answer_id":37221093,"question_id":139076,"body_markdown":" Try this:\r\n    \r\n    \r\n\r\n     try\r\n         \t\t\t\t{\r\n         \t\t\t\t\tTransformerFactory transFactory = TransformerFactory.newInstance();\r\n         \t\t\t\t\tTransformer transformer = null;\r\n         \t\t\t\t\ttransformer = transFactory.newTransformer();\r\n         \t\t\t\t\tStringWriter buffer = new StringWriter();\r\n         \t\t\t\t\ttransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n         \t\t\t\t\ttransformer.transform(new DOMSource(element),\r\n         \t\t\t\t\t\t      new StreamResult(buffer)); \r\n         \t\t\t\t\tString str = buffer.toString();\r\n         \t\t\t\t\tSystem.out.println(&quot;XML INSIDE IS #########################################&quot;+str);\r\n        \t\t\t\t\treturn element;\r\n         \t\t\t\t}\r\n         \t\t\t\tcatch (TransformerConfigurationException e)\r\n         \t\t\t\t{\r\n         \t\t\t\t\te.printStackTrace();\r\n         \t\t\t\t}\r\n         \t\t\t\tcatch (TransformerException e)\r\n         \t\t\t\t{\r\n         \t\t\t\t\te.printStackTrace();\r\n         \t\t\t\t}","title":"How to pretty print XML from Java?","body":"<p>Try this:</p>\n\n<pre><code> try\n                    {\n                        TransformerFactory transFactory = TransformerFactory.newInstance();\n                        Transformer transformer = null;\n                        transformer = transFactory.newTransformer();\n                        StringWriter buffer = new StringWriter();\n                        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n                        transformer.transform(new DOMSource(element),\n                                  new StreamResult(buffer)); \n                        String str = buffer.toString();\n                        System.out.println(\"XML INSIDE IS #########################################\"+str);\n                        return element;\n                    }\n                    catch (TransformerConfigurationException e)\n                    {\n                        e.printStackTrace();\n                    }\n                    catch (TransformerException e)\n                    {\n                        e.printStackTrace();\n                    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8049397,"reputation":61,"user_id":6068492,"display_name":"maks tkach"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1464892299,"creation_date":1464892299,"answer_id":37599612,"question_id":139076,"body_markdown":"This code below working perfectly\r\n\r\n\r\n    import javax.xml.transform.OutputKeys;\r\n    import javax.xml.transform.Source;\r\n    import javax.xml.transform.Transformer;\r\n    import javax.xml.transform.TransformerFactory;\r\n    import javax.xml.transform.stream.StreamResult;\r\n    import javax.xml.transform.stream.StreamSource;\r\n\r\n    String formattedXml1 = prettyFormat(&quot;&lt;root&gt;&lt;child&gt;aaa&lt;/child&gt;&lt;child/&gt;&lt;/root&gt;&quot;);\r\n    \t\r\n    public static String prettyFormat(String input) {\r\n    \treturn prettyFormat(input, &quot;2&quot;);\r\n    }\r\n    \t\r\n    public static String prettyFormat(String input, String indent) {\r\n    \tSource xmlInput = new StreamSource(new StringReader(input));\r\n    \tStringWriter stringWriter = new StringWriter();\r\n    \ttry {\r\n    \t\tTransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n    \t\tTransformer transformer = transformerFactory.newTransformer();\r\n    \t\ttransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n    \t\ttransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, indent);\r\n    \t\ttransformer.transform(xmlInput, new StreamResult(stringWriter));\r\n    \r\n    \t\tString pretty = stringWriter.toString();\r\n    \t\tpretty = pretty.replace(&quot;\\r\\n&quot;, &quot;\\n&quot;);\r\n    \t\treturn pretty;\t\t\t\t\r\n    \t} catch (Exception e) {\r\n    \t\tthrow new RuntimeException(e);\r\n    \t}\r\n    }","title":"How to pretty print XML from Java?","body":"<p>This code below working perfectly</p>\n\n<pre><code>import javax.xml.transform.OutputKeys;\nimport javax.xml.transform.Source;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\n\nString formattedXml1 = prettyFormat(\"&lt;root&gt;&lt;child&gt;aaa&lt;/child&gt;&lt;child/&gt;&lt;/root&gt;\");\n\npublic static String prettyFormat(String input) {\n    return prettyFormat(input, \"2\");\n}\n\npublic static String prettyFormat(String input, String indent) {\n    Source xmlInput = new StreamSource(new StringReader(input));\n    StringWriter stringWriter = new StringWriter();\n    try {\n        TransformerFactory transformerFactory = TransformerFactory.newInstance();\n        Transformer transformer = transformerFactory.newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n        transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", indent);\n        transformer.transform(xmlInput, new StreamResult(stringWriter));\n\n        String pretty = stringWriter.toString();\n        pretty = pretty.replace(\"\\r\\n\", \"\\n\");\n        return pretty;              \n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"score":1,"creation_date":1561783198,"post_id":47107329,"comment_id":100183941,"body_markdown":"Underscore-java, U.formatXml(xml) also doesn&#39;t rely on third party libraries.","body":"Underscore-java, U.formatXml(xml) also doesn&#39;t rely on third party libraries."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1674123981,"post_id":47107329,"comment_id":132649423,"body_markdown":"Never attempt to parse XML by hand like this. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; in a comment or CDATA section.","body":"Never attempt to parse XML by hand like this. Your code will destroy the XML if, for example, it contains a &quot;&lt;&quot; in a comment or CDATA section."}],"tags":[],"owner":{"account_id":4234133,"reputation":323,"user_id":3465795,"display_name":"Steve T"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1509834330,"creation_date":1509769120,"answer_id":47107329,"question_id":139076,"body_markdown":"I should have looked for this page first before coming up with my own solution!  Anyway, mine uses Java recursion to parse the xml page.  This code is totally self-contained and does not rely on third party libraries.  Also .. it uses recursion!\r\n\r\n    // you call this method passing in the xml text\r\n\tpublic static void prettyPrint(String text){\r\n\t\tprettyPrint(text, 0);\r\n\t}\r\n\t\r\n\t// &quot;index&quot; corresponds to the number of levels of nesting and/or the number of tabs to print before printing the tag\r\n\tpublic static void prettyPrint(String xmlText, int index){\r\n\t\tboolean foundTagStart = false;\r\n\t\tStringBuilder tagChars = new StringBuilder();\r\n\t\tString startTag = &quot;&quot;;\r\n\t\tString endTag = &quot;&quot;;\r\n\t\tString[] chars = xmlText.split(&quot;&quot;);\r\n\t\t// find the next start tag\r\n\t\tfor(String ch : chars){\r\n\t\t\tif(ch.equalsIgnoreCase(&quot;&lt;&quot;)){\r\n\t\t\t\ttagChars.append(ch);\r\n\t\t\t\tfoundTagStart = true;\r\n\t\t\t} else if(ch.equalsIgnoreCase(&quot;&gt;&quot;) &amp;&amp; foundTagStart){\r\n\t\t\t\tstartTag = tagChars.append(ch).toString();\r\n\t\t\t\tString tempTag = startTag;\r\n\t\t\t\tendTag = (tempTag.contains(&quot;\\&quot;&quot;) ? (tempTag.split(&quot; &quot;)[0] + &quot;&gt;&quot;) : tempTag).replace(&quot;&lt;&quot;, &quot;&lt;/&quot;); // &lt;startTag attr1=1 attr2=2&gt; =&gt; &lt;/startTag&gt;\r\n\t\t\t\tbreak;\r\n\t\t\t} else if(foundTagStart){\r\n\t\t\t\ttagChars.append(ch);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// once start and end tag are calculated, print start tag, then content, then end tag\r\n\t\tif(foundTagStart){\r\n\t\t\tint startIndex = xmlText.indexOf(startTag);\r\n\t\t\tint endIndex = xmlText.indexOf(endTag);\r\n\t\t\t// handle if matching tags NOT found\r\n\t\t\tif((startIndex &lt; 0) || (endIndex &lt; 0)){\r\n\t\t\t\tif(startIndex &lt; 0) {\r\n\t\t\t\t\t// no start tag found\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// start tag found, no end tag found (handles single tags aka &quot;&lt;mytag/&gt;&quot; or &quot;&lt;?xml ...&gt;&quot;)\r\n\t\t\t\t\tprintTabs(index);\r\n\t\t\t\t\tSystem.out.println(startTag);\r\n\t\t\t\t\t// move on to the next tag\r\n\t\t\t\t\t// NOTE: &quot;index&quot; (not index+1) because next tag is on same level as this one\r\n\t\t\t\t\tprettyPrint(xmlText.substring(startIndex+startTag.length(), xmlText.length()), index);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t// handle when matching tags found\r\n\t\t\t} else {\r\n\t\t\t\tString content = xmlText.substring(startIndex+startTag.length(), endIndex);\r\n\t\t\t\tboolean isTagContainsTags = content.contains(&quot;&lt;&quot;); // content contains tags\r\n\t\t\t\tprintTabs(index);\r\n\t\t\t\tif(isTagContainsTags){ // ie: &lt;tag1&gt;&lt;tag2&gt;stuff&lt;/tag2&gt;&lt;/tag1&gt;\r\n\t\t\t\t\tSystem.out.println(startTag);\r\n\t\t\t\t\tprettyPrint(content, index+1); // &quot;index+1&quot; because &quot;content&quot; is nested\r\n\t\t\t\t\tprintTabs(index);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.out.print(startTag); // ie: &lt;tag1&gt;stuff&lt;/tag1&gt; or &lt;tag1&gt;&lt;/tag1&gt;\r\n\t\t\t\t\tSystem.out.print(content);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(endTag);\r\n\t\t\t\tint nextIndex = endIndex + endTag.length();\r\n\t\t\t\tif(xmlText.length() &gt; nextIndex){ // if there are more tags on this level, continue\r\n\t\t\t\t\tprettyPrint(xmlText.substring(nextIndex, xmlText.length()), index);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSystem.out.print(xmlText);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate static void printTabs(int counter){\r\n\t\twhile(counter-- &gt; 0){ \r\n\t\t\tSystem.out.print(&quot;\\t&quot;);\r\n\t\t}\r\n\t}","title":"How to pretty print XML from Java?","body":"<p>I should have looked for this page first before coming up with my own solution!  Anyway, mine uses Java recursion to parse the xml page.  This code is totally self-contained and does not rely on third party libraries.  Also .. it uses recursion!</p>\n\n<pre><code>// you call this method passing in the xml text\npublic static void prettyPrint(String text){\n    prettyPrint(text, 0);\n}\n\n// \"index\" corresponds to the number of levels of nesting and/or the number of tabs to print before printing the tag\npublic static void prettyPrint(String xmlText, int index){\n    boolean foundTagStart = false;\n    StringBuilder tagChars = new StringBuilder();\n    String startTag = \"\";\n    String endTag = \"\";\n    String[] chars = xmlText.split(\"\");\n    // find the next start tag\n    for(String ch : chars){\n        if(ch.equalsIgnoreCase(\"&lt;\")){\n            tagChars.append(ch);\n            foundTagStart = true;\n        } else if(ch.equalsIgnoreCase(\"&gt;\") &amp;&amp; foundTagStart){\n            startTag = tagChars.append(ch).toString();\n            String tempTag = startTag;\n            endTag = (tempTag.contains(\"\\\"\") ? (tempTag.split(\" \")[0] + \"&gt;\") : tempTag).replace(\"&lt;\", \"&lt;/\"); // &lt;startTag attr1=1 attr2=2&gt; =&gt; &lt;/startTag&gt;\n            break;\n        } else if(foundTagStart){\n            tagChars.append(ch);\n        }\n    }\n    // once start and end tag are calculated, print start tag, then content, then end tag\n    if(foundTagStart){\n        int startIndex = xmlText.indexOf(startTag);\n        int endIndex = xmlText.indexOf(endTag);\n        // handle if matching tags NOT found\n        if((startIndex &lt; 0) || (endIndex &lt; 0)){\n            if(startIndex &lt; 0) {\n                // no start tag found\n                return;\n            } else {\n                // start tag found, no end tag found (handles single tags aka \"&lt;mytag/&gt;\" or \"&lt;?xml ...&gt;\")\n                printTabs(index);\n                System.out.println(startTag);\n                // move on to the next tag\n                // NOTE: \"index\" (not index+1) because next tag is on same level as this one\n                prettyPrint(xmlText.substring(startIndex+startTag.length(), xmlText.length()), index);\n                return;\n            }\n        // handle when matching tags found\n        } else {\n            String content = xmlText.substring(startIndex+startTag.length(), endIndex);\n            boolean isTagContainsTags = content.contains(\"&lt;\"); // content contains tags\n            printTabs(index);\n            if(isTagContainsTags){ // ie: &lt;tag1&gt;&lt;tag2&gt;stuff&lt;/tag2&gt;&lt;/tag1&gt;\n                System.out.println(startTag);\n                prettyPrint(content, index+1); // \"index+1\" because \"content\" is nested\n                printTabs(index);\n            } else {\n                System.out.print(startTag); // ie: &lt;tag1&gt;stuff&lt;/tag1&gt; or &lt;tag1&gt;&lt;/tag1&gt;\n                System.out.print(content);\n            }\n            System.out.println(endTag);\n            int nextIndex = endIndex + endTag.length();\n            if(xmlText.length() &gt; nextIndex){ // if there are more tags on this level, continue\n                prettyPrint(xmlText.substring(nextIndex, xmlText.length()), index);\n            }\n        }\n    } else {\n        System.out.print(xmlText);\n    }\n}\n\nprivate static void printTabs(int counter){\n    while(counter-- &gt; 0){ \n        System.out.print(\"\\t\");\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674123902,"post_id":51272975,"comment_id":132649388,"body_markdown":"Building a DOM here is unnecessary and inefficient. Use a StreamSource.","body":"Building a DOM here is unnecessary and inefficient. Use a StreamSource."}],"tags":[],"owner":{"account_id":3705277,"reputation":71,"user_id":3083990,"display_name":"bharg"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1531252052,"creation_date":1531252052,"answer_id":51272975,"question_id":139076,"body_markdown":"I mix all of them and writing one small program. It is reading from the xml file and printing out. Just Instead of xzy give your file path.\r\n\r\n\r\n        public static void main(String[] args) throws Exception {\r\n\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\t\tdbf.setValidating(false);\r\n\t\tDocumentBuilder db = dbf.newDocumentBuilder();\r\n\t\tDocument doc = db.parse(new FileInputStream(new File(&quot;C:/Users/xyz.xml&quot;)));\r\n\t\tprettyPrint(doc);\r\n\r\n\t}\r\n\r\n\tprivate static String prettyPrint(Document document)\r\n\t\t\tthrows TransformerException {\r\n\t\tTransformerFactory transformerFactory = TransformerFactory\r\n\t\t\t\t.newInstance();\r\n\t\tTransformer transformer = transformerFactory.newTransformer();\r\n\t\ttransformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n\t\ttransformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n\t\ttransformer.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\n\t\ttransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;no&quot;);\r\n\t\tDOMSource source = new DOMSource(document);\r\n\t\tStringWriter strWriter = new StringWriter();\r\n\t\tStreamResult result = new StreamResult(strWriter);transformer.transform(source, result);\r\n\t\tSystem.out.println(strWriter.getBuffer().toString());\r\n\r\n\t\treturn strWriter.getBuffer().toString();\r\n\r\n\t}","title":"How to pretty print XML from Java?","body":"<p>I mix all of them and writing one small program. It is reading from the xml file and printing out. Just Instead of xzy give your file path.</p>\n\n<pre><code>    public static void main(String[] args) throws Exception {\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n    dbf.setValidating(false);\n    DocumentBuilder db = dbf.newDocumentBuilder();\n    Document doc = db.parse(new FileInputStream(new File(\"C:/Users/xyz.xml\")));\n    prettyPrint(doc);\n\n}\n\nprivate static String prettyPrint(Document document)\n        throws TransformerException {\n    TransformerFactory transformerFactory = TransformerFactory\n            .newInstance();\n    Transformer transformer = transformerFactory.newTransformer();\n    transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n    transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"2\");\n    transformer.setOutputProperty(OutputKeys.ENCODING, \"UTF-8\");\n    transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"no\");\n    DOMSource source = new DOMSource(document);\n    StringWriter strWriter = new StringWriter();\n    StreamResult result = new StreamResult(strWriter);transformer.transform(source, result);\n    System.out.println(strWriter.getBuffer().toString());\n\n    return strWriter.getBuffer().toString();\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1633319,"reputation":332,"user_id":1507445,"display_name":"senyor"},"score":0,"creation_date":1570039136,"post_id":54683129,"comment_id":102791805,"body_markdown":"This is awesome!","body":"This is awesome!"}],"tags":[],"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1644106183,"creation_date":1550117700,"answer_id":54683129,"question_id":139076,"body_markdown":"[Underscore-java][1] has static method `U.formatXml(string)`. [Live example][2]\r\n\r\n    import com.github.underscore.U;\r\n\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            String xml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;;\r\n\r\n            System.out.println(U.formatXml(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&lt;root&gt;&quot; + xml + &quot;&lt;/root&gt;&quot;));\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;root&gt;\r\n       &lt;tag&gt;\r\n          &lt;nested&gt;hello&lt;/nested&gt;\r\n       &lt;/tag&gt;\r\n    &lt;/root&gt;\r\n\r\n\r\n  [1]: https://github.com/javadev/underscore-java\r\n  [2]: https://www.jdoodle.com/embed/v0/QaB","title":"How to pretty print XML from Java?","body":"<p><a href=\"https://github.com/javadev/underscore-java\" rel=\"nofollow noreferrer\">Underscore-java</a> has static method <code>U.formatXml(string)</code>. <a href=\"https://www.jdoodle.com/embed/v0/QaB\" rel=\"nofollow noreferrer\">Live example</a></p>\n<pre><code>import com.github.underscore.U;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        String xml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;;\n\n        System.out.println(U.formatXml(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&lt;root&gt;&quot; + xml + &quot;&lt;/root&gt;&quot;));\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;root&gt;\n   &lt;tag&gt;\n      &lt;nested&gt;hello&lt;/nested&gt;\n   &lt;/tag&gt;\n&lt;/root&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1001138,"reputation":1887,"user_id":1015959,"accept_rate":50,"display_name":"Hank Lapidez"},"score":0,"creation_date":1612701899,"post_id":56006254,"comment_id":116843603,"body_markdown":"This is importent: transformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;); If its missing all elements are left aligned","body":"This is importent: transformer.setOutputProperty(&quot;{<a href=\"http://xml.apache.org/xslt\" rel=\"nofollow noreferrer\">xml.apache.org/xslt</a>}indent-a&zwnj;&#8203;mount&quot;, &quot;2&quot;); If its missing all elements are left aligned"},{"owner":{"account_id":9049317,"reputation":559,"user_id":6740199,"display_name":"Benson Githinji"},"score":0,"creation_date":1612775497,"post_id":56006254,"comment_id":116861825,"body_markdown":"@HankLapidez That&#39;s true.","body":"@HankLapidez That&#39;s true."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1674123875,"post_id":56006254,"comment_id":132649382,"body_markdown":"Building a DOM here is unnecessary and inefficient.","body":"Building a DOM here is unnecessary and inefficient."}],"tags":[],"owner":{"account_id":9049317,"reputation":559,"user_id":6740199,"display_name":"Benson Githinji"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557150472,"creation_date":1557149278,"answer_id":56006254,"question_id":139076,"body_markdown":"**I always use the below function:**\r\n\r\n    public static String prettyPrintXml(String xmlStringToBeFormatted) {\r\n        String formattedXmlString = null;\r\n        try {\r\n            DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\r\n            documentBuilderFactory.setValidating(true);\r\n            DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();\r\n            InputSource inputSource = new InputSource(new StringReader(xmlStringToBeFormatted));\r\n            Document document = documentBuilder.parse(inputSource);\r\n\r\n            Transformer transformer = TransformerFactory.newInstance().newTransformer();\r\n            transformer.setOutputProperty(OutputKeys.INDENT, &quot;yes&quot;);\r\n            transformer.setOutputProperty(&quot;{http://xml.apache.org/xslt}indent-amount&quot;, &quot;2&quot;);\r\n\r\n            StreamResult streamResult = new StreamResult(new StringWriter());\r\n            DOMSource dOMSource = new DOMSource(document);\r\n            transformer.transform(dOMSource, streamResult);\r\n            formattedXmlString = streamResult.getWriter().toString().trim();\r\n        } catch (Exception ex) {\r\n            StringWriter sw = new StringWriter();\r\n            ex.printStackTrace(new PrintWriter(sw));\r\n            System.err.println(sw.toString());\r\n        }\r\n        return formattedXmlString;\r\n    }","title":"How to pretty print XML from Java?","body":"<p><strong>I always use the below function:</strong></p>\n\n<pre><code>public static String prettyPrintXml(String xmlStringToBeFormatted) {\n    String formattedXmlString = null;\n    try {\n        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\n        documentBuilderFactory.setValidating(true);\n        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();\n        InputSource inputSource = new InputSource(new StringReader(xmlStringToBeFormatted));\n        Document document = documentBuilder.parse(inputSource);\n\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\n        transformer.setOutputProperty(OutputKeys.INDENT, \"yes\");\n        transformer.setOutputProperty(\"{http://xml.apache.org/xslt}indent-amount\", \"2\");\n\n        StreamResult streamResult = new StreamResult(new StringWriter());\n        DOMSource dOMSource = new DOMSource(document);\n        transformer.transform(dOMSource, streamResult);\n        formattedXmlString = streamResult.getWriter().toString().trim();\n    } catch (Exception ex) {\n        StringWriter sw = new StringWriter();\n        ex.printStackTrace(new PrintWriter(sw));\n        System.err.println(sw.toString());\n    }\n    return formattedXmlString;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":13046654,"reputation":2497,"user_id":9428319,"display_name":"Maciej Pulikowski"},"score":0,"creation_date":1578830581,"post_id":56531539,"comment_id":105559830,"body_markdown":"It deletes spaces in text. Example: &lt;text&gt;\\n some example lol\\n&lt;text&gt; after transform:&lt;text&gt;someexamplelol&lt;test&gt;","body":"It deletes spaces in text. Example: &lt;text&gt;\\n some example lol\\n&lt;text&gt; after transform:&lt;text&gt;someexamplelol&lt;test&gt;"},{"owner":{"account_id":11365833,"reputation":1,"user_id":8332759,"display_name":"Faisal K"},"score":0,"creation_date":1578921281,"post_id":56531539,"comment_id":105585333,"body_markdown":"yeah, and it has other defects as well like handling of comments, DTD, if any, etc. However, correction upon this I was able to get an acceptable (apart from complex elements like &lt;text&gt;some complex &lt;b&gt;text again&lt;/b&gt; and then nothing&lt;/text&gt;) logic working. Don&#39;t have the code handy now, will find some leisure time to write again","body":"yeah, and it has other defects as well like handling of comments, DTD, if any, etc. However, correction upon this I was able to get an acceptable (apart from complex elements like &lt;text&gt;some complex &lt;b&gt;text again&lt;/b&gt; and then nothing&lt;/text&gt;) logic working. Don&#39;t have the code handy now, will find some leisure time to write again"},{"owner":{"account_id":459254,"reputation":986,"user_id":859604,"display_name":"Olivier Cailloux"},"score":0,"creation_date":1594744592,"post_id":56531539,"comment_id":111231191,"body_markdown":"Please indicate how this solution improves upon already existing answers, otherwise, it just adds noise.","body":"Please indicate how this solution improves upon already existing answers, otherwise, it just adds noise."}],"tags":[],"owner":{"account_id":11365833,"reputation":1,"user_id":8332759,"display_name":"Faisal K"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1560190573,"creation_date":1560190573,"answer_id":56531539,"question_id":139076,"body_markdown":"I was trying to achieve something similar, but without any external dependency. The application was already using DOM to format just for logging the XMLs!\r\n\r\nHere is my sample snippet\r\n\r\n    public void formatXML(final String unformattedXML) {\r\n\t\tfinal int length = unformattedXML.length();\r\n\t\tfinal int indentSpace = 3;\r\n\t\tfinal StringBuilder newString = new StringBuilder(length + length / 10);\r\n\t\tfinal char space = &#39; &#39;;\r\n\t\tint i = 0;\r\n\t\tint indentCount = 0;\r\n\t\tchar currentChar = unformattedXML.charAt(i++);\r\n\t\tchar previousChar = currentChar;\r\n\t\tboolean nodeStarted = true;\r\n\t\tnewString.append(currentChar);\r\n\t\tfor (; i &lt; length - 1;) {\r\n\t\t\tcurrentChar = unformattedXML.charAt(i++);\r\n\t\t\tif(((int) currentChar &lt; 33) &amp;&amp; !nodeStarted) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tswitch (currentChar) {\r\n\t\t\tcase &#39;&lt;&#39;:\r\n\t\t\t\tif (&#39;&gt;&#39; == previousChar &amp;&amp; &#39;/&#39; != unformattedXML.charAt(i - 1) &amp;&amp; &#39;/&#39; != unformattedXML.charAt(i) &amp;&amp; &#39;!&#39; != unformattedXML.charAt(i)) {\r\n\t\t\t\t\tindentCount++;\r\n\t\t\t\t}\r\n\t\t\t\tnewString.append(System.lineSeparator());\r\n\t\t\t\tfor (int j = indentCount * indentSpace; j &gt; 0; j--) {\r\n\t\t\t\t\tnewString.append(space);\r\n\t\t\t\t}\r\n\t\t\t\tnewString.append(currentChar);\r\n\t\t\t\tnodeStarted = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase &#39;&gt;&#39;:\r\n\t\t\t\tnewString.append(currentChar);\r\n\t\t\t\tnodeStarted = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase &#39;/&#39;:\r\n\t\t\t\tif (&#39;&lt;&#39; == previousChar || &#39;&gt;&#39; == unformattedXML.charAt(i)) {\r\n\t\t\t\t\tindentCount--;\r\n\t\t\t\t}\r\n\t\t\t\tnewString.append(currentChar);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnewString.append(currentChar);\r\n\t\t\t}\r\n\t\t\tpreviousChar = currentChar;\r\n\t\t}\r\n\t\tnewString.append(unformattedXML.charAt(length - 1));\r\n\t\tSystem.out.println(newString.toString());\r\n\t}","title":"How to pretty print XML from Java?","body":"<p>I was trying to achieve something similar, but without any external dependency. The application was already using DOM to format just for logging the XMLs!</p>\n\n<p>Here is my sample snippet</p>\n\n<pre><code>public void formatXML(final String unformattedXML) {\n    final int length = unformattedXML.length();\n    final int indentSpace = 3;\n    final StringBuilder newString = new StringBuilder(length + length / 10);\n    final char space = ' ';\n    int i = 0;\n    int indentCount = 0;\n    char currentChar = unformattedXML.charAt(i++);\n    char previousChar = currentChar;\n    boolean nodeStarted = true;\n    newString.append(currentChar);\n    for (; i &lt; length - 1;) {\n        currentChar = unformattedXML.charAt(i++);\n        if(((int) currentChar &lt; 33) &amp;&amp; !nodeStarted) {\n            continue;\n        }\n        switch (currentChar) {\n        case '&lt;':\n            if ('&gt;' == previousChar &amp;&amp; '/' != unformattedXML.charAt(i - 1) &amp;&amp; '/' != unformattedXML.charAt(i) &amp;&amp; '!' != unformattedXML.charAt(i)) {\n                indentCount++;\n            }\n            newString.append(System.lineSeparator());\n            for (int j = indentCount * indentSpace; j &gt; 0; j--) {\n                newString.append(space);\n            }\n            newString.append(currentChar);\n            nodeStarted = true;\n            break;\n        case '&gt;':\n            newString.append(currentChar);\n            nodeStarted = false;\n            break;\n        case '/':\n            if ('&lt;' == previousChar || '&gt;' == unformattedXML.charAt(i)) {\n                indentCount--;\n            }\n            newString.append(currentChar);\n            break;\n        default:\n            newString.append(currentChar);\n        }\n        previousChar = currentChar;\n    }\n    newString.append(unformattedXML.charAt(length - 1));\n    System.out.println(newString.toString());\n}\n</code></pre>\n"}],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":551423,"favorite_count":0,"down_vote_count":2,"up_vote_count":501,"accepted_answer_id":11519668,"answer_count":34,"score":499,"last_activity_date":1674608071,"creation_date":1222431671,"question_id":139076,"body_markdown":"I have a Java String that contains XML, with no line feeds or indentations. I would like to turn it into a String with nicely formatted XML. How do I do this?\r\n\r\n    String unformattedXml = &quot;&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;&quot;;\r\n    String formattedXml = new [UnknownClass]().format(unformattedXml);\r\n\r\nNote: My input is a **String**. My output is a **String**. \r\n\r\n(Basic) mock result:\r\n\r\n&lt;!-- lang-all: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;root&gt;\r\n      &lt;tag&gt;\r\n        &lt;nested&gt;hello&lt;/nested&gt;\r\n      &lt;/tag&gt;\r\n    &lt;/root&gt;","title":"How to pretty print XML from Java?","body":"<p>I have a Java String that contains XML, with no line feeds or indentations. I would like to turn it into a String with nicely formatted XML. How do I do this?</p>\n\n<pre><code>String unformattedXml = \"&lt;tag&gt;&lt;nested&gt;hello&lt;/nested&gt;&lt;/tag&gt;\";\nString formattedXml = new [UnknownClass]().format(unformattedXml);\n</code></pre>\n\n<p>Note: My input is a <strong>String</strong>. My output is a <strong>String</strong>. </p>\n\n<p>(Basic) mock result:</p>\n\n\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;root&gt;\n  &lt;tag&gt;\n    &lt;nested&gt;hello&lt;/nested&gt;\n  &lt;/tag&gt;\n&lt;/root&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":74379,"reputation":14630,"user_id":213758,"accept_rate":100,"display_name":"justkt"},"score":0,"creation_date":1300298769,"post_id":5329685,"comment_id":6015733,"body_markdown":"So you want to store the source (not the compiled class) in the database, compile it on the fly, then load it?","body":"So you want to store the source (not the compiled class) in the database, compile it on the fly, then load it?"},{"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"score":0,"creation_date":1300299394,"post_id":5329685,"comment_id":6015920,"body_markdown":"@justkt yes,can I do it? thanks :)","body":"@justkt yes,can I do it? thanks :)"}],"answers":[{"comments":[{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1300299704,"post_id":5329754,"comment_id":6016005,"body_markdown":"@Zenofo: Sorry, I don&#39;t understand your question. What do you want to do?","body":"@Zenofo: Sorry, I don&#39;t understand your question. What do you want to do?"},{"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"score":0,"creation_date":1300300789,"post_id":5329754,"comment_id":6016283,"body_markdown":"I has an interface, and I want implements many class using by this interface,so ,to facilitate the extension at any time,I want store the implements Class source in database.","body":"I has an interface, and I want implements many class using by this interface,so ,to facilitate the extension at any time,I want store the implements Class source in database."},{"owner":{"account_id":7382313,"reputation":567,"user_id":5618563,"accept_rate":85,"display_name":"Kurt Miller"},"score":0,"creation_date":1552389058,"post_id":5329754,"comment_id":96981638,"body_markdown":"@PaŭloEbermann Hello. As a beginner, I do not yet understand why would someone do something like that. Why would you store your source code or your compiled classes in a database ? When doing that, what is the application server utility ; war, jar, etc... not deployed there anymore ?","body":"@PaŭloEbermann Hello. As a beginner, I do not yet understand why would someone do something like that. Why would you store your source code or your compiled classes in a database ? When doing that, what is the application server utility ; war, jar, etc... not deployed there anymore ?"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1552430036,"post_id":5329754,"comment_id":97004897,"body_markdown":"@KurtMiller I never did something like this, but I can imagine e.g. a web based IDE to want to do something like this (for source code, and then for running the stuff also for byte-code). An application server (or any software which allows user-provided plugins) could do the same, although currently file system based deployment is more common.","body":"@KurtMiller I never did something like this, but I can imagine e.g. a web based IDE to want to do something like this (for source code, and then for running the stuff also for byte-code). An application server (or any software which allows user-provided plugins) could do the same, although currently file system based deployment is more common."}],"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":4,"down_vote_count":0,"up_vote_count":26,"is_accepted":true,"score":26,"last_activity_date":1674607549,"creation_date":1300298949,"answer_id":5329754,"question_id":5329685,"body_markdown":"Assuming you already compiled the class, you can create a `DatabaseClassLoader`, which loads the class from a database.\r\n\r\n    public class DatabaseClassLoader extends ClassLoader {\r\n\r\n        public DatabaseClassLoader(ClassLoader parent, ... /* connection to database */ ) {\r\n           super(parent);\r\n           // store the connection\r\n        }\r\n\r\n        public Class findClass(String name) {\r\n           byte[] data = loadDataFromDatabase(name);\r\n           return defineClass(name, data, 0, data.length);\r\n        }\r\n        private byte[] loadDataFromDatabase(String name) {\r\n            // this is your job.\r\n        }\r\n    }\r\n\r\nIf the database only contains the source code, you&#39;ll have to compile it first - look into the Java compiler API for how to do this without any files.\r\n\r\nPay attention, the class loaded this way will stay alive as long as the classloader is alive, so you&#39;ll need a new class loader to be able to reload the class in case of changes.\r\n\r\nAlso, if you want to interact with the class by other ways than reflection, you would better let it implement some interface (which itself is in your class path), and let the application class loader be the parent of your database class loader.\r\n\r\nAh, and how to load:\r\n\r\n    Class&lt;?&gt; c = Class.forName(&quot;util.abc.Test&quot;, myClassLoader);\r\n\r\nor directly\r\n\r\n    Class&lt;?&gt; c = myClassLoader.loadClass(&quot;util.abc.Test&quot;);\r\n\r\n\r\n----------\r\n\r\nHere is a method which creates objects of your interface (of any interface, in fact):\r\n\r\n    public &lt;X&gt; X getImplementingObject(Class&lt;X&gt; interfaceClass, String className)\r\n       throws ClassNotFoundException, IllegalAccessException, InstantiationException\r\n    {\r\n        ClassLoader loader = new DatabaseClassLoader(interfaceClass.getClassLoader(), ...);\r\n        Class&lt;?&gt; cl = loader.loadClass(className);\r\n        Class&lt;? extends X&gt; c = cl.asSubclass(interfaceClass);\r\n        return c.newInstance();\r\n    }\r\n\r\n(It needs the class to have a no-argument constructor which does not throw any exceptions, of course (if it does, you&#39;ll get this exception thrown, too).)\r\n\r\nThis creates a new ClassLoader for every such class, so they can only cooperate with each other by means of the interface (or reflection).\r\n\r\nFor on-the-fly compiling you should look at the Java Compiler API, as mentioned in the answer from *dcn*. But I think it would be better to do the compiling on the side which puts the classes into the database than the side who pulls them out.","title":"How can I load java class from database?","body":"<p>Assuming you already compiled the class, you can create a <code>DatabaseClassLoader</code>, which loads the class from a database.</p>\n<pre><code>public class DatabaseClassLoader extends ClassLoader {\n\n    public DatabaseClassLoader(ClassLoader parent, ... /* connection to database */ ) {\n       super(parent);\n       // store the connection\n    }\n\n    public Class findClass(String name) {\n       byte[] data = loadDataFromDatabase(name);\n       return defineClass(name, data, 0, data.length);\n    }\n    private byte[] loadDataFromDatabase(String name) {\n        // this is your job.\n    }\n}\n</code></pre>\n<p>If the database only contains the source code, you'll have to compile it first - look into the Java compiler API for how to do this without any files.</p>\n<p>Pay attention, the class loaded this way will stay alive as long as the classloader is alive, so you'll need a new class loader to be able to reload the class in case of changes.</p>\n<p>Also, if you want to interact with the class by other ways than reflection, you would better let it implement some interface (which itself is in your class path), and let the application class loader be the parent of your database class loader.</p>\n<p>Ah, and how to load:</p>\n<pre><code>Class&lt;?&gt; c = Class.forName(&quot;util.abc.Test&quot;, myClassLoader);\n</code></pre>\n<p>or directly</p>\n<pre><code>Class&lt;?&gt; c = myClassLoader.loadClass(&quot;util.abc.Test&quot;);\n</code></pre>\n<hr />\n<p>Here is a method which creates objects of your interface (of any interface, in fact):</p>\n<pre><code>public &lt;X&gt; X getImplementingObject(Class&lt;X&gt; interfaceClass, String className)\n   throws ClassNotFoundException, IllegalAccessException, InstantiationException\n{\n    ClassLoader loader = new DatabaseClassLoader(interfaceClass.getClassLoader(), ...);\n    Class&lt;?&gt; cl = loader.loadClass(className);\n    Class&lt;? extends X&gt; c = cl.asSubclass(interfaceClass);\n    return c.newInstance();\n}\n</code></pre>\n<p>(It needs the class to have a no-argument constructor which does not throw any exceptions, of course (if it does, you'll get this exception thrown, too).)</p>\n<p>This creates a new ClassLoader for every such class, so they can only cooperate with each other by means of the interface (or reflection).</p>\n<p>For on-the-fly compiling you should look at the Java Compiler API, as mentioned in the answer from <em>dcn</em>. But I think it would be better to do the compiling on the side which puts the classes into the database than the side who pulls them out.</p>\n"},{"tags":[],"owner":{"account_id":335769,"reputation":4439,"user_id":663030,"accept_rate":91,"display_name":"dcn"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1300299852,"creation_date":1300299852,"answer_id":5329920,"question_id":5329685,"body_markdown":"If you want to store the source code in you DB, you can use the Java 6 Compiler API to compile it at runtime. See [here][1] for an example.\r\n\r\nIn order to load classes at runtime, you can either use an URLClassLoader if you can specify the location of the bytecode with a URL, or use [ClassLoader.defineClass][3] and supply the bytecode as an array of bytes. \r\n\r\nEither way you should pay attention, that in order to use your dynamically loaded class, it should implement an interface that is known at compile time.\r\n\r\n\r\n  [1]: http://juixe.com/techknow/index.php/2006/12/13/java-se-6-compiler-api/\r\n  [3]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29","title":"How can I load java class from database?","body":"<p>If you want to store the source code in you DB, you can use the Java 6 Compiler API to compile it at runtime. See <a href=\"http://juixe.com/techknow/index.php/2006/12/13/java-se-6-compiler-api/\" rel=\"noreferrer\">here</a> for an example.</p>\n\n<p>In order to load classes at runtime, you can either use an URLClassLoader if you can specify the location of the bytecode with a URL, or use <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29\" rel=\"noreferrer\">ClassLoader.defineClass</a> and supply the bytecode as an array of bytes. </p>\n\n<p>Either way you should pay attention, that in order to use your dynamically loaded class, it should implement an interface that is known at compile time.</p>\n"}],"owner":{"account_id":55301,"reputation":15295,"user_id":165589,"accept_rate":99,"display_name":"Koerr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12181,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":5329754,"answer_count":2,"score":12,"last_activity_date":1674607549,"creation_date":1300298667,"question_id":5329685,"body_markdown":"With the following source code:\r\n\r\n    package util.abc;\r\n    public class Test{\r\n        public String out(){\r\n            return &quot;Hello World!&quot;;\r\n        }\r\n    }\r\n\r\nI can use:\r\n\r\n    Class c = Class.forName(&quot;util.abc.Test&quot;);\r\n\r\nto instantiate this Class, but I must put this source file(`Test.java`) in the classpath `/util/abc/`\r\n\r\nI want to dynamically load this class from the database (store the source code as `string` or `binary`)\r\n\r\nIs this possible ?","title":"How can I load java class from database?","body":"<p>With the following source code:</p>\n\n<pre><code>package util.abc;\npublic class Test{\n    public String out(){\n        return \"Hello World!\";\n    }\n}\n</code></pre>\n\n<p>I can use:</p>\n\n<pre><code>Class c = Class.forName(\"util.abc.Test\");\n</code></pre>\n\n<p>to instantiate this Class, but I must put this source file(<code>Test.java</code>) in the classpath <code>/util/abc/</code></p>\n\n<p>I want to dynamically load this class from the database (store the source code as <code>string</code> or <code>binary</code>)</p>\n\n<p>Is this possible ?</p>\n"},{"tags":["java","java.util.scanner","nosuchelementexception"],"comments":[{"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"score":0,"creation_date":1614517973,"post_id":65503259,"comment_id":117404074,"body_markdown":"Although I don&#39;t know of any application in which you would need 2 scanners at the same time, it does work.\nThe problem in Your example is, that You close the first scanner before using the second scanner. You need to *cascade* the second scanner. In particular, this means that all scanners must be closed in the reverse order in which they were created. To use the autoclosing mechanism is the safest way to do this. See the example down the page…","body":"Although I don&#39;t know of any application in which you would need 2 scanners at the same time, it does work. The problem in Your example is, that You close the first scanner before using the second scanner. You need to <i>cascade</i> the second scanner. In particular, this means that all scanners must be closed in the reverse order in which they were created. To use the autoclosing mechanism is the safest way to do this. See the example down the page…"}],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1609341132,"creation_date":1609312227,"answer_id":65503321,"question_id":65503259,"body_markdown":"You should only create one `Scanner` _per input stream_. Among other things, the scanner reads ahead and so will consume more of the input than has actually been returned. (This is how it knows, for example, whether the input `hasNextInt()` and so on.)\r\n\r\nIt&#39;s entirely sensible to create multiple scanners if you have multiple input streams (such as processing multiple files), but `System.in` should only have a single scanner using it.","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p>You should only create one <code>Scanner</code> <em>per input stream</em>. Among other things, the scanner reads ahead and so will consume more of the input than has actually been returned. (This is how it knows, for example, whether the input <code>hasNextInt()</code> and so on.)</p>\n<p>It's entirely sensible to create multiple scanners if you have multiple input streams (such as processing multiple files), but <code>System.in</code> should only have a single scanner using it.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1674605877,"creation_date":1609313804,"answer_id":65503544,"question_id":65503259,"body_markdown":"There are actually two separate things going on here.\r\n\r\n1.  You should create one `Scanner` per input **source**.  For example, one `Scanner` for each distinct input file, one for `System.in`, one for each distinct socket input stream.\r\n\r\n    The reason is (as Chrylis points out) is that various methods of `Scanner` read ahead on the scanner&#39;s input source.  When the characters are not *consumed* by the operation, they are not put back into the input source.  Rather they are buffered by the `Scanner` itself, and kept for the next `Scanner` operation to use.  So if you have two `Scanner` instances trying to read from the same input source, one may &quot;steal&quot; input intended for the other.  \r\n\r\n    This is the **real** reason why opening multiple `Scanner` objects on `System.in` is bad.  Not the &quot;redundancy&quot; argument that you proposed.  There is nothing fundamentally wrong with a bit of redundancy ... especially if it simplifies the application.  But scanners competing for input *may* result in unexpected behavior / bugs.\r\n\r\n2.  The second problem is that when you `close()` a `Scanner` that also closes the input source.\r\n\r\n    In your case that means that you are closing `System.in`.  And then you are creating a second `Scanner` to read from the (now closed) `System.in`.\r\n\r\n    When you attempt to us a `Scanner` to read from a closed `System.in`, that leads to a `NoSuchElementException`.\r\n\r\n\r\nSo if you hadn&#39;t called `close()` on the first `Scanner`, your code *might* have worked, but that would depend on the sequence of operations you made on the first `Scanner`.\r\n\r\n-------------------\r\n\r\n&gt; People are saying `Scanner` ain&#39;t cloneable.\r\n\r\nThey are correct.","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p>There are actually two separate things going on here.</p>\n<ol>\n<li><p>You should create one <code>Scanner</code> per input <strong>source</strong>.  For example, one <code>Scanner</code> for each distinct input file, one for <code>System.in</code>, one for each distinct socket input stream.</p>\n<p>The reason is (as Chrylis points out) is that various methods of <code>Scanner</code> read ahead on the scanner's input source.  When the characters are not <em>consumed</em> by the operation, they are not put back into the input source.  Rather they are buffered by the <code>Scanner</code> itself, and kept for the next <code>Scanner</code> operation to use.  So if you have two <code>Scanner</code> instances trying to read from the same input source, one may &quot;steal&quot; input intended for the other.</p>\n<p>This is the <strong>real</strong> reason why opening multiple <code>Scanner</code> objects on <code>System.in</code> is bad.  Not the &quot;redundancy&quot; argument that you proposed.  There is nothing fundamentally wrong with a bit of redundancy ... especially if it simplifies the application.  But scanners competing for input <em>may</em> result in unexpected behavior / bugs.</p>\n</li>\n<li><p>The second problem is that when you <code>close()</code> a <code>Scanner</code> that also closes the input source.</p>\n<p>In your case that means that you are closing <code>System.in</code>.  And then you are creating a second <code>Scanner</code> to read from the (now closed) <code>System.in</code>.</p>\n<p>When you attempt to us a <code>Scanner</code> to read from a closed <code>System.in</code>, that leads to a <code>NoSuchElementException</code>.</p>\n</li>\n</ol>\n<p>So if you hadn't called <code>close()</code> on the first <code>Scanner</code>, your code <em>might</em> have worked, but that would depend on the sequence of operations you made on the first <code>Scanner</code>.</p>\n<hr />\n<blockquote>\n<p>People are saying <code>Scanner</code> ain't cloneable.</p>\n</blockquote>\n<p>They are correct.</p>\n"},{"tags":[],"owner":{"account_id":18000087,"reputation":47,"user_id":13082214,"display_name":"Adnan Mahida"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609315609,"creation_date":1609315227,"answer_id":65503771,"question_id":65503259,"body_markdown":"It&#39;s so simple, You should only create one Scanner per input. The Scanner reads line one by one using nextLine() method. last check the condition hasNext() so you can find out the arguments.\r\n\r\n**Try This**\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Nope{\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.println(&quot;What&#39;s your name?&quot;);\r\n        String name = scanner.nextLine();\r\n\r\n        System.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\r\n        // Now\r\n        System.out.println(&quot;where you do live?&quot;);\r\n        String country = scanner.nextLine();\r\n\r\n        System.out.println(country +&quot; Is a lovely place&quot;);\r\n        if(!scanner.hasNext()){\r\n        scanner.close();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**output like**\r\n```cmd\r\n\r\nWhat&#39;s your name?\r\nxyz\r\nWelcome xyz!\r\nwhere you do live?\r\nrjk\r\nrjk Is a lovely place\r\n\r\n```","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p>It's so simple, You should only create one Scanner per input. The Scanner reads line one by one using nextLine() method. last check the condition hasNext() so you can find out the arguments.</p>\n<p><strong>Try This</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Nope{\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(&quot;What's your name?&quot;);\n        String name = scanner.nextLine();\n\n        System.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\n        // Now\n        System.out.println(&quot;where you do live?&quot;);\n        String country = scanner.nextLine();\n\n        System.out.println(country +&quot; Is a lovely place&quot;);\n        if(!scanner.hasNext()){\n        scanner.close();\n        }\n    }\n}\n</code></pre>\n<p><strong>output like</strong></p>\n<pre><code>\nWhat's your name?\nxyz\nWelcome xyz!\nwhere you do live?\nrjk\nrjk Is a lovely place\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1609544049,"creation_date":1609375490,"answer_id":65515359,"question_id":65503259,"body_markdown":"*This answer focuses on the **`close()`** operation and why there&#39;s no option to read again from ***`System.in`*** if a Scanner instance previously closed it, as the top answer already gave the correct info. Just if curious.*\r\n\r\n---\r\n\r\n&gt; **[Scanner][1]**\r\n&gt;\r\n&gt; *When a Scanner is closed, it will close its input source if the source\r\n&gt; implements the Closeable interface.\r\n&gt; A Scanner is not safe for multithreaded use without external\r\n&gt; synchronization.*\r\n\r\n - You should create a Scanner instance for each  source you want to read from.\r\n - If you must share the same instance, you should implement the synchronization mechanism, as it&#39;s not thread safe.\r\n - As other answers already pointed, `close()` is a &quot;dangerous&quot; operation.\r\n\r\n----\r\n\r\n`System.in close()`\r\n-------\r\nLet&#39;s suppose **`System.in`** was specified as source. \r\n\r\nThis is the close method from the [**`InputStreamReader`**][2]\r\n\r\n    public void close() throws IOException\r\n    {\r\n        synchronized (lock)\r\n        {\r\n           // Makes sure all intermediate data is released by the decoder.\r\n           if (decoder != null)\r\n              decoder.reset();\r\n           if (in != null)\r\n              in.close();\r\n           in = null;\r\n           isDone = true;\r\n           decoder = null;\r\n         }\r\n    }\r\n\r\nThe variable that refers to **`System.in`** is the one called **`in`**.\r\n\r\n **Two operations** are performed on this `InputStream` (*besides the null check*):\r\n\r\n  ------\r\n\r\n **1.** **`in.close()`** \r\n\r\n[**This does nothing at all**][3]: [**`System.in`**][4] &#39;s class (`InputStream`) just leaves an empty implementation of the inherited `close()` method (from *`Closeable`*)\r\n\r\n    /**\r\n     * Closes this stream. Concrete implementations of this class should free\r\n     * any resources during close. This implementation does nothing.\r\n     *\r\n     */\r\n    public void close() throws IOException {\r\n        /* empty */\r\n    }\r\n\r\nNot even the [javadocs][5] *hide the truth*:\r\n\r\n&gt; The close method of InputStream **does nothing**.\r\n\r\n\r\n\r\n----\r\n\r\n\r\n **2.** **`in = null`**\r\n\r\nThis is the real reason why you won&#39;t be able to read again from **`System.in`**. Setting it to **null** unables any further read attempts from this source with a new **`Scanner`**.   \r\n\r\n\r\n-----\r\n\r\n***But... why does it throw a `NoSuchElementException` instead of a `NullPointerException`?***\r\n\r\nThe initialization of the `Scanner` **doesn&#39;t** fail in the step of creating its **`Reader`** instance. This is because the `InputStream` is wrapped into a new `BufferedInputStream`. So the `lock` Object is not null at the initialization of the Scanner&#39;s `Reader`:\r\n\r\n\r\n    public InputStreamReader(InputStream in) \r\n    {\r\n        super(in);  \r\n        this.in = in;\r\n        ...\r\n    }\r\n\r\n. \r\n   \r\n    protected Reader(Object lock) \r\n    {\r\n        if (lock == null) {    \r\n            throw new NullPointerException();   \r\n        }\r\n        this.lock = lock;\r\n    }\r\n\r\nYou&#39;ll be able to create a second `Scanner` instance from `System.in` without any exception being thrown; As the `InputStream` is wrapped into a new `BufferedInputStream` instance, the `lock` Object is not null and passes the filter. But the inner `InputStream`, **`System.in`**, is null indeed, from the moment it was set to null in the previous `close()` operation:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nThis is the `lock` Object in the second initialization of the `Scanner` for `System.in`. The Scanner still doesn&#39;t know something will go badly, as its initialization was succesfull (*due to the wrapped `BufferedInputStream`*) and still believes its `InputStream` is valid. \r\n\r\nBut at the first try for reading again from `System.in`, this happens:\r\n\r\n    public String nextLine() {\r\n        if (hasNextPattern == linePattern())\r\n            return getCachedResult();\r\n        clearCaches();\r\n\r\n        String result = findWithinHorizon(linePattern, 0);\r\n        if (result == null) /* result is null, as there&#39;s no source */\r\n           throw new NoSuchElementException(&quot;No line found&quot;);\r\n\r\n         (...)\r\n     }\r\n\r\nThat&#39;s the moment where `Scanner` notices **at last** that *something is not going well*. The result of `findWithinHorizon` will return null as there&#39;s no source from where to find. \r\n\r\nAs a result of previously setting **`System.in`** to null in the `close()` operation, you get the error when trying to read from the second `Scanner` instance: **`NoSuchElementException`**.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html\r\n  [2]: http://developer.claspath.org/doc/java/io/InputStreamReader-source.html\r\n  [3]: https://cdn.successconsciousness.com/blog/wp-content/uploads/being-lazy.jpg\r\n  [4]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in\r\n  [5]: https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#close()\r\n  [6]: https://i.stack.imgur.com/X6xnt.png","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p><em>This answer focuses on the <strong><code>close()</code></strong> operation and why there's no option to read again from <em><strong><code>System.in</code></strong></em> if a Scanner instance previously closed it, as the top answer already gave the correct info. Just if curious.</em></p>\n<hr />\n<blockquote>\n<p><strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">Scanner</a></strong></p>\n<p><em>When a Scanner is closed, it will close its input source if the source\nimplements the Closeable interface.\nA Scanner is not safe for multithreaded use without external\nsynchronization.</em></p>\n</blockquote>\n<ul>\n<li>You should create a Scanner instance for each  source you want to read from.</li>\n<li>If you must share the same instance, you should implement the synchronization mechanism, as it's not thread safe.</li>\n<li>As other answers already pointed, <code>close()</code> is a &quot;dangerous&quot; operation.</li>\n</ul>\n<hr />\n<h2><code>System.in close()</code></h2>\n<p>Let's suppose <strong><code>System.in</code></strong> was specified as source.</p>\n<p>This is the close method from the <a href=\"http://developer.claspath.org/doc/java/io/InputStreamReader-source.html\" rel=\"nofollow noreferrer\"><strong><code>InputStreamReader</code></strong></a></p>\n<pre><code>public void close() throws IOException\n{\n    synchronized (lock)\n    {\n       // Makes sure all intermediate data is released by the decoder.\n       if (decoder != null)\n          decoder.reset();\n       if (in != null)\n          in.close();\n       in = null;\n       isDone = true;\n       decoder = null;\n     }\n}\n</code></pre>\n<p>The variable that refers to <strong><code>System.in</code></strong> is the one called <strong><code>in</code></strong>.</p>\n<p><strong>Two operations</strong> are performed on this <code>InputStream</code> (<em>besides the null check</em>):</p>\n<hr />\n<p><strong>1.</strong> <strong><code>in.close()</code></strong></p>\n<p><a href=\"https://cdn.successconsciousness.com/blog/wp-content/uploads/being-lazy.jpg\" rel=\"nofollow noreferrer\"><strong>This does nothing at all</strong></a>: <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in\" rel=\"nofollow noreferrer\"><strong><code>System.in</code></strong></a> 's class (<code>InputStream</code>) just leaves an empty implementation of the inherited <code>close()</code> method (from <em><code>Closeable</code></em>)</p>\n<pre><code>/**\n * Closes this stream. Concrete implementations of this class should free\n * any resources during close. This implementation does nothing.\n *\n */\npublic void close() throws IOException {\n    /* empty */\n}\n</code></pre>\n<p>Not even the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#close()\" rel=\"nofollow noreferrer\">javadocs</a> <em>hide the truth</em>:</p>\n<blockquote>\n<p>The close method of InputStream <strong>does nothing</strong>.</p>\n</blockquote>\n<hr />\n<p><strong>2.</strong> <strong><code>in = null</code></strong></p>\n<p>This is the real reason why you won't be able to read again from <strong><code>System.in</code></strong>. Setting it to <strong>null</strong> unables any further read attempts from this source with a new <strong><code>Scanner</code></strong>.</p>\n<hr />\n<p><em><strong>But... why does it throw a <code>NoSuchElementException</code> instead of a <code>NullPointerException</code>?</strong></em></p>\n<p>The initialization of the <code>Scanner</code> <strong>doesn't</strong> fail in the step of creating its <strong><code>Reader</code></strong> instance. This is because the <code>InputStream</code> is wrapped into a new <code>BufferedInputStream</code>. So the <code>lock</code> Object is not null at the initialization of the Scanner's <code>Reader</code>:</p>\n<pre><code>public InputStreamReader(InputStream in) \n{\n    super(in);  \n    this.in = in;\n    ...\n}\n</code></pre>\n<p>.</p>\n<pre><code>protected Reader(Object lock) \n{\n    if (lock == null) {    \n        throw new NullPointerException();   \n    }\n    this.lock = lock;\n}\n</code></pre>\n<p>You'll be able to create a second <code>Scanner</code> instance from <code>System.in</code> without any exception being thrown; As the <code>InputStream</code> is wrapped into a new <code>BufferedInputStream</code> instance, the <code>lock</code> Object is not null and passes the filter. But the inner <code>InputStream</code>, <strong><code>System.in</code></strong>, is null indeed, from the moment it was set to null in the previous <code>close()</code> operation:</p>\n<p><a href=\"https://i.stack.imgur.com/X6xnt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X6xnt.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the <code>lock</code> Object in the second initialization of the <code>Scanner</code> for <code>System.in</code>. The Scanner still doesn't know something will go badly, as its initialization was succesfull (<em>due to the wrapped <code>BufferedInputStream</code></em>) and still believes its <code>InputStream</code> is valid.</p>\n<p>But at the first try for reading again from <code>System.in</code>, this happens:</p>\n<pre><code>public String nextLine() {\n    if (hasNextPattern == linePattern())\n        return getCachedResult();\n    clearCaches();\n\n    String result = findWithinHorizon(linePattern, 0);\n    if (result == null) /* result is null, as there's no source */\n       throw new NoSuchElementException(&quot;No line found&quot;);\n\n     (...)\n }\n</code></pre>\n<p>That's the moment where <code>Scanner</code> notices <strong>at last</strong> that <em>something is not going well</em>. The result of <code>findWithinHorizon</code> will return null as there's no source from where to find.</p>\n<p>As a result of previously setting <strong><code>System.in</code></strong> to null in the <code>close()</code> operation, you get the error when trying to read from the second <code>Scanner</code> instance: <strong><code>NoSuchElementException</code></strong>.</p>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614456016,"creation_date":1614449605,"answer_id":66401952,"question_id":65503259,"body_markdown":"`Scanner` *implements the* `AutoCloseable` *interface*&lt;br /&gt;\r\ndon&#39;t call `close` separately use instead the [autocloseable mechanism][1]\r\n\r\n    public class Nope\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        System.out.println(&quot;What&#39;s your name?&quot;);\r\n        try( Scanner scanner = new Scanner(System.in) ) {\r\n          String name = scanner.nextLine();\r\n    \r\n          System.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\r\n    \r\n          // Now \r\n          System.out.println(&quot;where you do live?&quot;);\r\n          try( Scanner sc = new Scanner(System.in) ) {\r\n            String country = sc.nextLine();\r\n    \r\n            System.out.println(&quot;That&#39;s a lovely place&quot;);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nnow everything works as expected and `close` is automatically called when exiting the try-with-resources block…\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p><code>Scanner</code> <em>implements the</em> <code>AutoCloseable</code> <em>interface</em><br />\ndon't call <code>close</code> separately use instead the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html\" rel=\"nofollow noreferrer\">autocloseable mechanism</a></p>\n<pre><code>public class Nope\n{\n  public static void main(String[] args)\n  {\n    System.out.println(&quot;What's your name?&quot;);\n    try( Scanner scanner = new Scanner(System.in) ) {\n      String name = scanner.nextLine();\n\n      System.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\n\n      // Now \n      System.out.println(&quot;where you do live?&quot;);\n      try( Scanner sc = new Scanner(System.in) ) {\n        String country = sc.nextLine();\n\n        System.out.println(&quot;That's a lovely place&quot;);\n      }\n    }\n  }\n}\n</code></pre>\n<p>now everything works as expected and <code>close</code> is automatically called when exiting the try-with-resources block…</p>\n"}],"owner":{"account_id":18831935,"reputation":73,"user_id":13735540,"display_name":"Paris"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3520,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":65503544,"answer_count":5,"score":5,"last_activity_date":1674605877,"creation_date":1609311779,"question_id":65503259,"body_markdown":"I know I&#39;m going out on a limb here, but I just can&#39;t seem to understand why can&#39;t we just create an instance of the Scanner class twice. I&#39;ll add an example just in case.\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Nope\r\n{\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tSystem.out.println(&quot;What&#39;s your name?&quot;);\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tString name = scanner.nextLine();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\r\n\t\tscanner.close();\r\n\t\t\r\n\t\t// Now \r\n\t\tSystem.out.println(&quot;where you do live?&quot;);\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\tString country = sc.nextLine();\r\n\t\t\r\n\t\tSystem.out.println(&quot;That&#39;s a lovely place&quot;);\r\n\t\tsc.close();\r\n\t\t\r\n\t}\r\n}\r\n```\r\nAnd I get a runtime error which looks something like this\r\n```\r\nWhat&#39;s your name?\r\nKate\r\nWelcome Kate!\r\nException in thread &quot;main&quot; where you do live?\r\njava.util.NoSuchElementException: No line found\r\n\tat java.base/java.util.Scanner.nextLine(Scanner.java:1651)\r\n\tat Nope.main(Nope.java:17)\r\n```\r\n\r\nI know it doesn&#39;t make sense to create a new object again of the same class, encouraging redundancy. But I just think it will clear my mind if I know why, don&#39;t you think so too?\r\n\r\nWhat does the machine mean by **&#39;java.util.NoSuchElementException: No line found&#39;** and people are saying Scanner ain&#39;t cloneable. \r\n\r\nPS: I intentionally closed my first scanner and created a new object just to understand the issue.","title":"Should a Scanner only be instantiated only once? if that&#39;s the case why so?","body":"<p>I know I'm going out on a limb here, but I just can't seem to understand why can't we just create an instance of the Scanner class twice. I'll add an example just in case.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Nope\n{\n    public static void main(String[] args)\n    {\n        System.out.println(&quot;What's your name?&quot;);\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n        \n        System.out.println(&quot;Welcome &quot; + name + &quot;!&quot;);\n        scanner.close();\n        \n        // Now \n        System.out.println(&quot;where you do live?&quot;);\n        Scanner sc = new Scanner(System.in);\n        String country = sc.nextLine();\n        \n        System.out.println(&quot;That's a lovely place&quot;);\n        sc.close();\n        \n    }\n}\n</code></pre>\n<p>And I get a runtime error which looks something like this</p>\n<pre><code>What's your name?\nKate\nWelcome Kate!\nException in thread &quot;main&quot; where you do live?\njava.util.NoSuchElementException: No line found\n    at java.base/java.util.Scanner.nextLine(Scanner.java:1651)\n    at Nope.main(Nope.java:17)\n</code></pre>\n<p>I know it doesn't make sense to create a new object again of the same class, encouraging redundancy. But I just think it will clear my mind if I know why, don't you think so too?</p>\n<p>What does the machine mean by <strong>'java.util.NoSuchElementException: No line found'</strong> and people are saying Scanner ain't cloneable.</p>\n<p>PS: I intentionally closed my first scanner and created a new object just to understand the issue.</p>\n"},{"tags":["java","micronaut"],"answers":[{"tags":[],"owner":{"account_id":24603296,"reputation":624,"user_id":18505867,"display_name":"ShingJo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674604319,"creation_date":1674604319,"answer_id":75228462,"question_id":75221539,"body_markdown":"Out of the box, neither [micronaut-problem-json](https://github.com/micronaut-projects/micronaut-problem-json) nor the [problem library](https://github.com/zalando/problem) uses Java Internationalization. \r\n\r\nThere are customizations that you can do within Micronaut. See [Micronaut Problem Json User Documentation](\r\nhttps://micronaut-projects.github.io/micronaut-problem-json/latest/guide/).\r\n\r\nYou can always request the feature or provide a pull-request. \r\n\r\n\r\n","title":"How to translate the messages from the micronaut-problem-json library?","body":"<p>Out of the box, neither <a href=\"https://github.com/micronaut-projects/micronaut-problem-json\" rel=\"nofollow noreferrer\">micronaut-problem-json</a> nor the <a href=\"https://github.com/zalando/problem\" rel=\"nofollow noreferrer\">problem library</a> uses Java Internationalization.</p>\n<p>There are customizations that you can do within Micronaut. See <a href=\"https://micronaut-projects.github.io/micronaut-problem-json/latest/guide/\" rel=\"nofollow noreferrer\">Micronaut Problem Json User Documentation</a>.</p>\n<p>You can always request the feature or provide a pull-request.</p>\n"}],"owner":{"account_id":3016002,"reputation":426,"user_id":2558163,"display_name":"Alexandre V."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1674605620,"creation_date":1674563470,"question_id":75221539,"body_markdown":"**What**: I would like to know how to translate the messages for the **micronaut-problem-json** library. Does it support `src/main/resources/i18n/messages.properties`? This information is not documented on the GitHub project&#39;s page.\r\n\r\nThe project: https://github.com/micronaut-projects/micronaut-problem-json/\r\n\r\n**Why**: The motivation for this is obvious, to support the internationalization of the messages. \r\n\r\nThis is a typical payload generated by the library in case of a constraint validation error:\r\n\r\n```json\r\n{\r\n  &quot;type&quot;: &quot;https://zalando.github.io/problem/constraint-violation&quot;,\r\n  &quot;title&quot;: &quot;Constraint Violation&quot;,\r\n  &quot;status&quot;: 400,\r\n  &quot;violations&quot;: [\r\n    {\r\n      &quot;field&quot;: &quot;create.signup.username&quot;,\r\n      &quot;message&quot;: &quot;size must be between 3 and 30&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nI would like to add support to other languages, like Portuguese, Spanish, etc. When an HTTP request from the client includes the HTTP header `Accept-Language: pt` the server should return the following payload:\r\n\r\n\r\n```json\r\n{\r\n  &quot;type&quot;: &quot;https://zalando.github.io/problem/constraint-violation&quot;,\r\n  &quot;title&quot;: &quot;Viola&#231;&#227;o de integridade&quot;,\r\n  &quot;status&quot;: 400,\r\n  &quot;violations&quot;: [\r\n    {\r\n      &quot;field&quot;: &quot;create.signup.username&quot;,\r\n      &quot;message&quot;: &quot;o tamanho deve ser entre 3 e 30&quot;\r\n    }\r\n  ]\r\n}\r\n```","title":"How to translate the messages from the micronaut-problem-json library?","body":"<p><strong>What</strong>: I would like to know how to translate the messages for the <strong>micronaut-problem-json</strong> library. Does it support <code>src/main/resources/i18n/messages.properties</code>? This information is not documented on the GitHub project's page.</p>\n<p>The project: <a href=\"https://github.com/micronaut-projects/micronaut-problem-json/\" rel=\"nofollow noreferrer\">https://github.com/micronaut-projects/micronaut-problem-json/</a></p>\n<p><strong>Why</strong>: The motivation for this is obvious, to support the internationalization of the messages.</p>\n<p>This is a typical payload generated by the library in case of a constraint validation error:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;type&quot;: &quot;https://zalando.github.io/problem/constraint-violation&quot;,\n  &quot;title&quot;: &quot;Constraint Violation&quot;,\n  &quot;status&quot;: 400,\n  &quot;violations&quot;: [\n    {\n      &quot;field&quot;: &quot;create.signup.username&quot;,\n      &quot;message&quot;: &quot;size must be between 3 and 30&quot;\n    }\n  ]\n}\n</code></pre>\n<p>I would like to add support to other languages, like Portuguese, Spanish, etc. When an HTTP request from the client includes the HTTP header <code>Accept-Language: pt</code> the server should return the following payload:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;type&quot;: &quot;https://zalando.github.io/problem/constraint-violation&quot;,\n  &quot;title&quot;: &quot;Violação de integridade&quot;,\n  &quot;status&quot;: 400,\n  &quot;violations&quot;: [\n    {\n      &quot;field&quot;: &quot;create.signup.username&quot;,\n      &quot;message&quot;: &quot;o tamanho deve ser entre 3 e 30&quot;\n    }\n  ]\n}\n</code></pre>\n"},{"tags":["java","lambda","future","completable-future","completion-stage"],"comments":[{"owner":{"account_id":27597963,"reputation":1024,"user_id":21063779,"display_name":"Lae"},"score":1,"creation_date":1674588660,"post_id":75226262,"comment_id":132745074,"body_markdown":"You can first log the stacktrace of the exception, that will tell you why it occurred.","body":"You can first log the stacktrace of the exception, that will tell you why it occurred."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1674597735,"post_id":75226262,"comment_id":132747736,"body_markdown":"Please make this a [mre], which should include the code of `handleAmbiguousException()`, and provide the exception stack trace.","body":"Please make this a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which should include the code of <code>handleAmbiguousException()</code>, and provide the exception stack trace."},{"owner":{"account_id":23200469,"reputation":1,"user_id":17295381,"display_name":"Curiosity"},"score":0,"creation_date":1674604262,"post_id":75226262,"comment_id":132749212,"body_markdown":"@Lae,  Stack trace says: java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273). And that&#39;s the whole stack trace - does that tell us anything?","body":"@Lae,  Stack trace says: java.util.concurrent.CompletableFuture.encodeThrowable(Compl&zwnj;&#8203;etableFuture.java:27&zwnj;&#8203;3). And that&#39;s the whole stack trace - does that tell us anything?"},{"owner":{"account_id":23200469,"reputation":1,"user_id":17295381,"display_name":"Curiosity"},"score":0,"creation_date":1674604849,"post_id":75226262,"comment_id":132749304,"body_markdown":"@DidierL, I added in handleAmbiguousException code.","body":"@DidierL, I added in handleAmbiguousException code."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1674606176,"post_id":75226262,"comment_id":132749498,"body_markdown":"Please refer to https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it","body":"Please refer to <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\" title=\"what is a nullpointerexception and how do i fix it\">stackoverflow.com/questions/218384/&hellip;</a>"},{"owner":{"account_id":27597963,"reputation":1024,"user_id":21063779,"display_name":"Lae"},"score":1,"creation_date":1674608557,"post_id":75226262,"comment_id":132749845,"body_markdown":"You can use [printStackTrace()](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#printStackTrace()) to obtain the whole stack trace. If you read the documentation on that method it will help you understand it.","body":"You can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Throwable.html#printStackTrace()\" rel=\"nofollow noreferrer\">printStackTrace()</a> to obtain the whole stack trace. If you read the documentation on that method it will help you understand it."}],"owner":{"account_id":23200469,"reputation":1,"user_id":17295381,"display_name":"Curiosity"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674605214,"creation_date":1674588116,"question_id":75226262,"body_markdown":"There is a problem that causes the code to land in the handleAmbiguousException method, but I do not know what the problem is that causes the code to get there. *My question is this: how can I rewrite the code below in order to actually figure out what the real exception is?*\r\n\r\nInside handleAmbiguousException, it says there is a problem calling an upstream service, but I have determined that there is no problem from the upstream service. So I think the issue must be in one of the following methods.\r\n\r\nFirst there is the doSomething() method, which calls retrieveConfiguration(). retrieveConfiguration() accepts a func, which I believe is where the problem is.\r\n\r\n    public void doSomething(final HttpServletRequest httpServletRequest,\r\n                                final AbstractCreateTokenRequest request,\r\n                                final AsyncResponse asyncResponse){\r\n    \r\n\r\n    retrieveConfiguration(asyncResponse,\r\n                                configuration -&gt; doInternalMethod(asyncResponse, request, configuration), InternalConfiguration.class);\r\n}`\r\n\r\n    private &lt;T extends SomeConfiguration&gt; void\r\n        retrieveConfiguration(final AsyncResponse asyncResponse,\r\n                              final Consumer&lt;T&gt; func,\r\n                              final Class&lt;T&gt; configClass) {\r\n\r\n        CompletionStage&lt;T&gt; configuration = configurationService.getConfiguration(configClass);\r\n\r\n        configuration.thenAccept(func).\r\n                exceptionally(throwable -&gt; {\r\n                    handleAmbiguousException(asyncResponse, throwable);\r\n                    return null;\r\n                });\r\n    }`\r\n\r\nBased off log statements I added, I don&#39;t think the code ever reaches doInternalMethod, but I have pasted it below here in case it is helpful:\r\n\r\n    private CompletionStage&lt;Either&lt;ServiceErrorResponse, TokenResponse&gt;&gt;\r\n        doInternalMethod(final AsyncResponse asyncResponse,\r\n                            final AbstractCreateTokenRequest request,\r\n                            final TokenConfiguration configuration) {\r\n\r\n        final CompletionStage&lt;Either&lt;ServiceErrorResponse, TokenResponse&gt;&gt; stage = tokenCreator\r\n                .createToken(configuration)\r\n                .exceptionally(this::nestedException);\r\n        stage.whenComplete((response, throwable) -&gt; {\r\n            MDC.clear();\r\n        });\r\n        setAsyncResponseFromEither(stage, asyncResponse, REQUEST_TIMEOUT_MS, request.toString());\r\n        return stage;\r\n    }`\r\n\r\n\r\n\r\nI tried adding log statements right before configuration.thenAccept(func), and they successfully logged to console. But my logs in doInternalMethod() were never reached. So it seems like something is happening at the configuration.thenAccept(func) part. But I do not know how to debug/troubleshoot this to figure out what exactly the error is.\r\n\r\nPeople asked for handleAmbiguousException code, and here it is. This is also where I got the stack trace from:\r\n\r\n    private void\r\n        handleAmibguousException(final AsyncResponse asyncResponse,\r\n                                  final Throwable throwable) {\r\n       asyncResponse.resume(ExceptionHandler.mapTheError(throwable));\r\n        }\r\n\r\nPrinting the stack trace only gives me this:\r\njava.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273)\r\n\r\n\r\nConverting the throwable to string gets me this:\r\n     java.util.concurrent.CompletionException: java.lang.NullPointerException\r\n\r\nPrinting the message of the throwable gets me this: \r\n    MESSAGE java.lang.NullPointerException","title":"How to troubleshoot a CompletionStage?","body":"<p>There is a problem that causes the code to land in the handleAmbiguousException method, but I do not know what the problem is that causes the code to get there. <em>My question is this: how can I rewrite the code below in order to actually figure out what the real exception is?</em></p>\n<p>Inside handleAmbiguousException, it says there is a problem calling an upstream service, but I have determined that there is no problem from the upstream service. So I think the issue must be in one of the following methods.</p>\n<p>First there is the doSomething() method, which calls retrieveConfiguration(). retrieveConfiguration() accepts a func, which I believe is where the problem is.</p>\n<pre><code>public void doSomething(final HttpServletRequest httpServletRequest,\n                            final AbstractCreateTokenRequest request,\n                            final AsyncResponse asyncResponse){\n\n\nretrieveConfiguration(asyncResponse,\n                            configuration -&gt; doInternalMethod(asyncResponse, request, configuration), InternalConfiguration.class);\n</code></pre>\n<p>}`</p>\n<pre><code>private &lt;T extends SomeConfiguration&gt; void\n    retrieveConfiguration(final AsyncResponse asyncResponse,\n                          final Consumer&lt;T&gt; func,\n                          final Class&lt;T&gt; configClass) {\n\n    CompletionStage&lt;T&gt; configuration = configurationService.getConfiguration(configClass);\n\n    configuration.thenAccept(func).\n            exceptionally(throwable -&gt; {\n                handleAmbiguousException(asyncResponse, throwable);\n                return null;\n            });\n}`\n</code></pre>\n<p>Based off log statements I added, I don't think the code ever reaches doInternalMethod, but I have pasted it below here in case it is helpful:</p>\n<pre><code>private CompletionStage&lt;Either&lt;ServiceErrorResponse, TokenResponse&gt;&gt;\n    doInternalMethod(final AsyncResponse asyncResponse,\n                        final AbstractCreateTokenRequest request,\n                        final TokenConfiguration configuration) {\n\n    final CompletionStage&lt;Either&lt;ServiceErrorResponse, TokenResponse&gt;&gt; stage = tokenCreator\n            .createToken(configuration)\n            .exceptionally(this::nestedException);\n    stage.whenComplete((response, throwable) -&gt; {\n        MDC.clear();\n    });\n    setAsyncResponseFromEither(stage, asyncResponse, REQUEST_TIMEOUT_MS, request.toString());\n    return stage;\n}`\n</code></pre>\n<p>I tried adding log statements right before configuration.thenAccept(func), and they successfully logged to console. But my logs in doInternalMethod() were never reached. So it seems like something is happening at the configuration.thenAccept(func) part. But I do not know how to debug/troubleshoot this to figure out what exactly the error is.</p>\n<p>People asked for handleAmbiguousException code, and here it is. This is also where I got the stack trace from:</p>\n<pre><code>private void\n    handleAmibguousException(final AsyncResponse asyncResponse,\n                              final Throwable throwable) {\n   asyncResponse.resume(ExceptionHandler.mapTheError(throwable));\n    }\n</code></pre>\n<p>Printing the stack trace only gives me this:\njava.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:273)</p>\n<p>Converting the throwable to string gets me this:\njava.util.concurrent.CompletionException: java.lang.NullPointerException</p>\n<p>Printing the message of the throwable gets me this:\nMESSAGE java.lang.NullPointerException</p>\n"},{"tags":["java","android","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674641967,"post_id":75227998,"comment_id":132756230,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":17402519,"reputation":137,"user_id":12611136,"display_name":"Syeda Soghat Zehra Jaffri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674605057,"creation_date":1674605057,"answer_id":75228526,"question_id":75227998,"body_markdown":"In your BottomNavigationView add this line\r\n\r\n     android:layout_alignParentBottom=&quot;true&quot;","title":"Below a widget in XML","body":"<p>In your BottomNavigationView add this line</p>\n<pre><code> android:layout_alignParentBottom=&quot;true&quot;\n</code></pre>\n"}],"owner":{"account_id":27613519,"reputation":1,"user_id":21076097,"display_name":"Jos&#233; Danrley"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674605057,"creation_date":1674599831,"question_id":75227998,"body_markdown":"i&#39;ve tried to fix this problem but every way that i tried went wrong. i&#39;m trying to add a BottomNavigationView below the FrameLayout but everytime the BottomNavigationView keep up of the FrameLayout or inside it. What could i do?\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout\r\n     xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n     xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n     xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n     android:layout_height=&quot;match_parent&quot;\r\n     android:layout_width=&quot;match_parent&quot;\r\n     android:background=&quot;#2b2b2b&quot;\r\n     android:id=&quot;@+id/coordinator&quot;\r\n     tools:context=&quot;.Home&quot;&gt;\r\n\r\n    &lt;android.widget.FrameLayout\r\n        android:id=&quot;@+id/bottom_nav_frame&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n        (...)\r\n    &lt;/android.widget.FrameLayout&gt;\r\n    \r\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n        android:id=&quot;@+id/bottom_nav&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/bottom_nav_frame&quot;\r\n        android:background=&quot;#2b2b2b&quot;\r\n        app:iconTint=&quot;#ffffff&quot;\r\n        app:menu=&quot;@menu/bottom_nav_menu&quot;/&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```","title":"Below a widget in XML","body":"<p>i've tried to fix this problem but every way that i tried went wrong. i'm trying to add a BottomNavigationView below the FrameLayout but everytime the BottomNavigationView keep up of the FrameLayout or inside it. What could i do?</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n     xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n     xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n     xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n     android:layout_height=&quot;match_parent&quot;\n     android:layout_width=&quot;match_parent&quot;\n     android:background=&quot;#2b2b2b&quot;\n     android:id=&quot;@+id/coordinator&quot;\n     tools:context=&quot;.Home&quot;&gt;\n\n    &lt;android.widget.FrameLayout\n        android:id=&quot;@+id/bottom_nav_frame&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n        (...)\n    &lt;/android.widget.FrameLayout&gt;\n    \n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=&quot;@+id/bottom_nav&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/bottom_nav_frame&quot;\n        android:background=&quot;#2b2b2b&quot;\n        app:iconTint=&quot;#ffffff&quot;\n        app:menu=&quot;@menu/bottom_nav_menu&quot;/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-java","fluentwait"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674591073,"post_id":75223968,"comment_id":132745794,"body_markdown":"1/2 second is already pretty short.  Remember that it will take a certain amount of time to check the DOM, for the thrown exception to happen, for the driver to check the exception and ignore it... there is also travel time between browser-&gt;driver-&gt;your code and back again.. I don&#39;t know how long that is, but at a certain point you won&#39;t have a speed increase at all, but maybe even a slowdown.","body":"1/2 second is already pretty short.  Remember that it will take a certain amount of time to check the DOM, for the thrown exception to happen, for the driver to check the exception and ignore it... there is also travel time between browser-&gt;driver-&gt;your code and back again.. I don&#39;t know how long that is, but at a certain point you won&#39;t have a speed increase at all, but maybe even a slowdown."},{"owner":{"account_id":26686224,"reputation":13,"user_id":20295502,"display_name":"Bozidar Kostic"},"score":0,"creation_date":1674595487,"post_id":75223968,"comment_id":132747146,"body_markdown":"Thank you very much for your response! Can you expand on (or provide some resources I could analyze and read) regarding the potential slowdown happening? I am aware that there is a time needed to perform the checks and that it is not possible to cut that time, which I am okay with. The framework I am developing is data-driven, so there might be up to 1000 combinations in 1 flow, and about 50 locators per flow, so by my calculations this change (from 250ms to 10ms) would make each run of 1000 combinations 2.8h faster.","body":"Thank you very much for your response! Can you expand on (or provide some resources I could analyze and read) regarding the potential slowdown happening? I am aware that there is a time needed to perform the checks and that it is not possible to cut that time, which I am okay with. The framework I am developing is data-driven, so there might be up to 1000 combinations in 1 flow, and about 50 locators per flow, so by my calculations this change (from 250ms to 10ms) would make each run of 1000 combinations 2.8h faster."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674596975,"post_id":75223968,"comment_id":132747550,"body_markdown":"each wait is only going to take as long as it needs to meet the expected condition.  Only if the element is never found would it take the full timeout period.  So you might be shaving some milliseconds but it wouldn&#39;t be predictable... those are sleeps inside a loop but the actual polling takes a certain amount of time....  I don&#39;t have any resources to cite, you should just do your own speed checks/benchmarks to see at what point you have diminishing returns.","body":"each wait is only going to take as long as it needs to meet the expected condition.  Only if the element is never found would it take the full timeout period.  So you might be shaving some milliseconds but it wouldn&#39;t be predictable... those are sleeps inside a loop but the actual polling takes a certain amount of time....  I don&#39;t have any resources to cite, you should just do your own speed checks/benchmarks to see at what point you have diminishing returns."},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1674597704,"post_id":75223968,"comment_id":132747732,"body_markdown":"if the main concern is speed you might consider threading browser/driver pairs.  Or, if you can get way with it, using something more lightweight like HTMLUnit and thread that.","body":"if the main concern is speed you might consider threading browser/driver pairs.  Or, if you can get way with it, using something more lightweight like HTMLUnit and thread that."},{"owner":{"account_id":26686224,"reputation":13,"user_id":20295502,"display_name":"Bozidar Kostic"},"score":0,"creation_date":1674598885,"post_id":75223968,"comment_id":132748032,"body_markdown":"Multithreading is unfortunately not an option since this is an E2E integration testing framework, and some of the flows need to be done in order, due to the specific product needs. That is the main reason I am considering other avenues to shave off some time. I appreciate the time spent answering my question and replying to my comments!","body":"Multithreading is unfortunately not an option since this is an E2E integration testing framework, and some of the flows need to be done in order, due to the specific product needs. That is the main reason I am considering other avenues to shave off some time. I appreciate the time spent answering my question and replying to my comments!"}],"answers":[{"comments":[{"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1674648516,"post_id":75227902,"comment_id":132758233,"body_markdown":"[Thread Safety](https://www.geeksforgeeks.org/thread-safety-and-how-to-achieve-it-in-java/) is a wide and a vast topic which is out of scope for this question. However I can explain more in the [Selenium](https://chat.stackoverflow.com/rooms/223360/selenium) room.","body":"<a href=\"https://www.geeksforgeeks.org/thread-safety-and-how-to-achieve-it-in-java/\" rel=\"nofollow noreferrer\">Thread Safety</a> is a wide and a vast topic which is out of scope for this question. However I can explain more in the <a href=\"https://chat.stackoverflow.com/rooms/223360/selenium\">Selenium</a> room."},{"owner":{"account_id":26686224,"reputation":13,"user_id":20295502,"display_name":"Bozidar Kostic"},"score":1,"creation_date":1674652098,"post_id":75227902,"comment_id":132759456,"body_markdown":"I&#39;ve deleted my previous comments so I don&#39;t cause confusion, because the problem I encountered was not because of lowering the polling duration, it works perfectly now! Thank you for your help!","body":"I&#39;ve deleted my previous comments so I don&#39;t cause confusion, because the problem I encountered was not because of lowering the polling duration, it works perfectly now! Thank you for your help!"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674600141,"creation_date":1674599062,"answer_id":75227902,"question_id":75223968,"body_markdown":"[**FluentWait**](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)\r\n--------------\r\nAs per the documentation, [FluentWait](https://stackoverflow.com/questions/42275658/the-type-fluentwait-is-not-generic-it-cannot-be-parameterized-with-arguments-w) is the implementation of the [Wait](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/Wait.html) interface that may have its timeout and polling interval configured on the fly. Each FluentWait instance defines the maximum amount of time to wait for a condition, as well as the frequency with which to check the condition. Furthermore, the user may configure the wait to ignore specific types of exceptions whilst waiting, such as NoSuchElementExceptions when searching for an element on the page.\r\n\r\nSample Usage:\r\n\r\n    // Waiting 30 seconds for an element to be present on the page, checking\r\n    // for its presence once every 5 seconds.\r\n    Wait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\r\n        .withTimeout(Duration.ofSeconds(30L))\r\n        .pollingEvery(Duration.ofSeconds(5L))\r\n        .ignoring(NoSuchElementException.class);\r\n\r\n    WebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\r\n      public WebElement apply(WebDriver driver) {\r\n        return driver.findElement(By.id(&quot;foo&quot;));\r\n      }\r\n    });\r\n\r\nThe documentation also mention of a possible tradeoff as:\r\n\r\n&gt;This class makes no thread safety guarantees.\r\n\r\n\r\n----------\r\n\r\n\r\npollingEvery\r\n------------\r\nAgain, as per the dococumentation, [pollingEvery](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html#pollingEvery(java.time.Duration)) sets how often the condition should be evaluated. In realtime usecases, the interval may be greater as the cost of actually evaluating a condition function is not factored in. However the default polling interval is [DEFAULT_WAIT_DURATION](https://www.selenium.dev/selenium/docs/api/java/constant-values.html#org.openqa.selenium.support.ui.FluentWait.DEFAULT_SLEEP_TIMEOUT) which is defined as _**`500L`**_:\r\n\r\n![DEFAULT_SLEEP_TIMEOUT](https://i.stack.imgur.com/yFV4M.png)\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nConsidering the above mentioned aspects, I don&#39;t see any issues reducing the _`polling duration`_ from it&#39;s default value to `10ms` or even `5ms` which would reduce the framework execution time. The only concern being [_WebDriver is not thread-safe_](https://www.selenium.dev/documentation/legacy/selenium_2/faq/#q-is-webdriver-thread-safe).","title":"Are there potential drawbacks of ultra short polling duration in Fluent Wait in Selenium?","body":"<h2><a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html\" rel=\"nofollow noreferrer\"><strong>FluentWait</strong></a></h2>\n<p>As per the documentation, <a href=\"https://stackoverflow.com/questions/42275658/the-type-fluentwait-is-not-generic-it-cannot-be-parameterized-with-arguments-w\">FluentWait</a> is the implementation of the <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/Wait.html\" rel=\"nofollow noreferrer\">Wait</a> interface that may have its timeout and polling interval configured on the fly. Each FluentWait instance defines the maximum amount of time to wait for a condition, as well as the frequency with which to check the condition. Furthermore, the user may configure the wait to ignore specific types of exceptions whilst waiting, such as NoSuchElementExceptions when searching for an element on the page.</p>\n<p>Sample Usage:</p>\n<pre><code>// Waiting 30 seconds for an element to be present on the page, checking\n// for its presence once every 5 seconds.\nWait&lt;WebDriver&gt; wait = new FluentWait&lt;WebDriver&gt;(driver)\n    .withTimeout(Duration.ofSeconds(30L))\n    .pollingEvery(Duration.ofSeconds(5L))\n    .ignoring(NoSuchElementException.class);\n\nWebElement foo = wait.until(new Function&lt;WebDriver, WebElement&gt;() {\n  public WebElement apply(WebDriver driver) {\n    return driver.findElement(By.id(&quot;foo&quot;));\n  }\n});\n</code></pre>\n<p>The documentation also mention of a possible tradeoff as:</p>\n<blockquote>\n<p>This class makes no thread safety guarantees.</p>\n</blockquote>\n<hr />\n<h2>pollingEvery</h2>\n<p>Again, as per the dococumentation, <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html#pollingEvery(java.time.Duration)\" rel=\"nofollow noreferrer\">pollingEvery</a> sets how often the condition should be evaluated. In realtime usecases, the interval may be greater as the cost of actually evaluating a condition function is not factored in. However the default polling interval is <a href=\"https://www.selenium.dev/selenium/docs/api/java/constant-values.html#org.openqa.selenium.support.ui.FluentWait.DEFAULT_SLEEP_TIMEOUT\" rel=\"nofollow noreferrer\">DEFAULT_WAIT_DURATION</a> which is defined as <em><strong><code>500L</code></strong></em>:</p>\n<p><img src=\"https://i.stack.imgur.com/yFV4M.png\" alt=\"DEFAULT_SLEEP_TIMEOUT\" /></p>\n<hr />\n<h2>This usecase</h2>\n<p>Considering the above mentioned aspects, I don't see any issues reducing the <em><code>polling duration</code></em> from it's default value to <code>10ms</code> or even <code>5ms</code> which would reduce the framework execution time. The only concern being <a href=\"https://www.selenium.dev/documentation/legacy/selenium_2/faq/#q-is-webdriver-thread-safe\" rel=\"nofollow noreferrer\"><em>WebDriver is not thread-safe</em></a>.</p>\n"}],"owner":{"account_id":26686224,"reputation":13,"user_id":20295502,"display_name":"Bozidar Kostic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75227902,"answer_count":1,"score":1,"last_activity_date":1674603770,"creation_date":1674575493,"question_id":75223968,"body_markdown":"When using FluentWait in Selenium, it is possible to configure the polling duration of the FluentWait\r\n\r\nAs far as I know, that is the frequency of checking if the element exists, for example\r\n\r\nSo, if the timeout is 3 seconds, and the polling duration set is 250 milliseconds, the driver will check for element 12 times before ultimately throwing an exception when it checks for the element the 13th time.\r\n\r\nTo my understanding, and by that logic, decreasing the polling duration makes the script perform better because it will check for the element more times\r\n\r\nBelow you can find my implementation of the FluentWait\r\n\r\n    public static void waitForElementWithDuration(By locator, Duration duration) {\r\n            FluentWait&lt;org.openqa.selenium.WebDriver&gt; wait = new FluentWait&lt;&gt;(Base.driver);\r\n            wait.withTimeout(duration)\r\n                .pollingEvery(ConfigurationManager.DEFAULT_POLLING_DURATION)\r\n                .ignoring(NoSuchElementException.class, ElementClickInterceptedException.class)\r\n                .until(ExpectedConditions.and(\r\n                       ExpectedConditions.presenceOfElementLocated(locator),\r\n                       ExpectedConditions.elementToBeClickable(locator)));\r\n    }\r\n\r\nI am thinking about making the default polling duration in my configuration manager class shorter (right now it is at 250ms)\r\nWould there be any potential drawbacks of me setting the polling duration to 10ms? \r\nAs the flow I am automating is rather long, and needs to be repeated for many times, implementing a shorter polling duration would make the total time needed to run the tests much shorter\r\n\r\nI have been working as a Test Automation Engineer for 1.5 years, so I am still new, and would appreciate some help from more experienced Test Automation Engineers","title":"Are there potential drawbacks of ultra short polling duration in Fluent Wait in Selenium?","body":"<p>When using FluentWait in Selenium, it is possible to configure the polling duration of the FluentWait</p>\n<p>As far as I know, that is the frequency of checking if the element exists, for example</p>\n<p>So, if the timeout is 3 seconds, and the polling duration set is 250 milliseconds, the driver will check for element 12 times before ultimately throwing an exception when it checks for the element the 13th time.</p>\n<p>To my understanding, and by that logic, decreasing the polling duration makes the script perform better because it will check for the element more times</p>\n<p>Below you can find my implementation of the FluentWait</p>\n<pre><code>public static void waitForElementWithDuration(By locator, Duration duration) {\n        FluentWait&lt;org.openqa.selenium.WebDriver&gt; wait = new FluentWait&lt;&gt;(Base.driver);\n        wait.withTimeout(duration)\n            .pollingEvery(ConfigurationManager.DEFAULT_POLLING_DURATION)\n            .ignoring(NoSuchElementException.class, ElementClickInterceptedException.class)\n            .until(ExpectedConditions.and(\n                   ExpectedConditions.presenceOfElementLocated(locator),\n                   ExpectedConditions.elementToBeClickable(locator)));\n}\n</code></pre>\n<p>I am thinking about making the default polling duration in my configuration manager class shorter (right now it is at 250ms)\nWould there be any potential drawbacks of me setting the polling duration to 10ms?\nAs the flow I am automating is rather long, and needs to be repeated for many times, implementing a shorter polling duration would make the total time needed to run the tests much shorter</p>\n<p>I have been working as a Test Automation Engineer for 1.5 years, so I am still new, and would appreciate some help from more experienced Test Automation Engineers</p>\n"},{"tags":["java","apache-kafka-streams"],"answers":[{"comments":[{"owner":{"account_id":5369253,"reputation":21,"user_id":4278252,"display_name":"Naga Ramesh Busam"},"score":1,"creation_date":1675180563,"post_id":75228282,"comment_id":132870977,"body_markdown":"Thanks Bill, Just made few updates to the above code snippet and worked fine!!!","body":"Thanks Bill, Just made few updates to the above code snippet and worked fine!!!"},{"owner":{"account_id":2038203,"reputation":1330,"user_id":1820013,"display_name":"bbejeck"},"score":0,"creation_date":1675186465,"post_id":75228282,"comment_id":132872953,"body_markdown":"Glad to hear that it worked out for you!","body":"Glad to hear that it worked out for you!"}],"tags":[],"owner":{"account_id":2038203,"reputation":1330,"user_id":1820013,"display_name":"bbejeck"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674602536,"creation_date":1674602536,"answer_id":75228282,"question_id":75225349,"body_markdown":"I think what you can do is change your topology to something like this:\r\n\r\n`stream.transform(() -&gt; new MyTransformer()).to(&quot;out-topic&quot;, keySerde, valueSerde)`\r\n\r\nand the `Transformer` instance would look something like this:\r\n\r\n```\r\nMyTransformer&lt;key, value&gt; implements Transformer&lt;key, value&gt; {\r\n  ProcessorContext context;\r\n\r\n void init(ProcessorContext context) {\r\n    this.context = context;\r\n }\r\n\r\n Void&lt;value&gt; transform(key, value) {\r\n    List&lt;key&gt; keys  = util.fetchKeys(key);\r\n    List&lt;value&gt; values = util.fetchValues(value);\r\n    //assumes both lists have the same length\r\n    for(int i = 0; i &lt; keys.size(); i++) {\r\n      //forwards each key-value to the sink node\r\n      context.forward(keys.get(i), values.get(i)\r\n    }\r\n  return null; //filtered out by Kafka Streams - not forwarded\r\n\r\n  void close() { }\r\n}\r\n```\r\n\r\nIf you are using Kafka Streams v. 3.0 or higher, `transform` is deprecated, so in that case, swap out `transform` for the newer [process][1] operator but overall, the principal is the same.\r\n\r\nHTH,\r\nBill\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-org.apache.kafka.streams.kstream.Named-java.lang.String...-","title":"How to produce individual key and values to kafka topic from the list of keys and values","body":"<p>I think what you can do is change your topology to something like this:</p>\n<p><code>stream.transform(() -&gt; new MyTransformer()).to(&quot;out-topic&quot;, keySerde, valueSerde)</code></p>\n<p>and the <code>Transformer</code> instance would look something like this:</p>\n<pre><code>MyTransformer&lt;key, value&gt; implements Transformer&lt;key, value&gt; {\n  ProcessorContext context;\n\n void init(ProcessorContext context) {\n    this.context = context;\n }\n\n Void&lt;value&gt; transform(key, value) {\n    List&lt;key&gt; keys  = util.fetchKeys(key);\n    List&lt;value&gt; values = util.fetchValues(value);\n    //assumes both lists have the same length\n    for(int i = 0; i &lt; keys.size(); i++) {\n      //forwards each key-value to the sink node\n      context.forward(keys.get(i), values.get(i)\n    }\n  return null; //filtered out by Kafka Streams - not forwarded\n\n  void close() { }\n}\n</code></pre>\n<p>If you are using Kafka Streams v. 3.0 or higher, <code>transform</code> is deprecated, so in that case, swap out <code>transform</code> for the newer <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-streams/3.3.2/org/apache/kafka/streams/kstream/KStream.html#process-org.apache.kafka.streams.processor.api.ProcessorSupplier-org.apache.kafka.streams.kstream.Named-java.lang.String...-\" rel=\"nofollow noreferrer\">process</a> operator but overall, the principal is the same.</p>\n<p>HTH,\nBill</p>\n"}],"owner":{"account_id":5369253,"reputation":21,"user_id":4278252,"display_name":"Naga Ramesh Busam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674602536,"creation_date":1674582593,"question_id":75225349,"body_markdown":"`KStream&lt;List&lt;keys&gt;, List&lt;values&gt;&gt; mapValues = stream.selectKey((key, value) -&gt; \r\n\t\t\t\t\tutil.fetchKeys(key, value)) \r\n\t\t\t\t.mapValues(value -&gt; \r\n\t\t\t\t\tutil.fetchValues(value)) ;`\r\n\r\n\r\nAbove is my code snippet. Here I want to loop through each key and value, produce to my topic using\r\n\r\n`.to(&quot;out-topic&quot;, keySerdes, valueSerdes)`.\r\n\r\nHere keySerdes, valueSerdes are in avro converted\r\n\r\nPlease let me know, if there is any way to get this done.\r\n\r\nThanks in advance!\r\n\r\nTried flattening to get the keys and values didn&#39;t work for me","title":"How to produce individual key and values to kafka topic from the list of keys and values","body":"<p><code>KStream&lt;List&lt;keys&gt;, List&lt;values&gt;&gt; mapValues = stream.selectKey((key, value) -&gt;  util.fetchKeys(key, value))  .mapValues(value -&gt;  util.fetchValues(value)) ;</code></p>\n<p>Above is my code snippet. Here I want to loop through each key and value, produce to my topic using</p>\n<p><code>.to(&quot;out-topic&quot;, keySerdes, valueSerdes)</code>.</p>\n<p>Here keySerdes, valueSerdes are in avro converted</p>\n<p>Please let me know, if there is any way to get this done.</p>\n<p>Thanks in advance!</p>\n<p>Tried flattening to get the keys and values didn't work for me</p>\n"},{"tags":["java","docker","devops","keycloak","quarkus"],"comments":[{"owner":{"account_id":1954609,"reputation":903,"user_id":1757919,"display_name":"Roberto Cortez"},"score":0,"creation_date":1674732262,"post_id":75228225,"comment_id":132778536,"body_markdown":"I&#39;ve tried this with https://github.com/quarkusio/quarkus-quickstarts/tree/main/security-keycloak-authorization-quickstart, copied your configurations, and it worked as expected. Can you provide a reproducer?","body":"I&#39;ve tried this with <a href=\"https://github.com/quarkusio/quarkus-quickstarts/tree/main/security-keycloak-authorization-quickstart\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus-quickstarts/tree/main/&hellip;</a>, copied your configurations, and it worked as expected. Can you provide a reproducer?"}],"owner":{"account_id":17922090,"reputation":305,"user_id":13021632,"display_name":"MansouriAla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":686,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674601902,"creation_date":1674601902,"question_id":75228225,"body_markdown":"**TOPIC**\r\n\r\nI&#39;m running a quarkus application and I want to connect it with a keycloak server deployed on another host.\r\n\r\nthe keycloak server is working with other services means no problems in there.\r\n\r\nThe keycloak server is exposing this hostname: `flitch.hostname.com`. So the url to connect to it is\r\n`QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname`\r\n\r\n***When running the quarkus project locally everything works fine, I can manage users, auth, tokens...***.\r\n\r\n**PROBLEM**\r\n\r\nBut the when creating an image and running it on a the docker container it throws an error: `&#39;quarkus.oidc.auth-server-url&#39; property must be configured`\r\n\r\n**DEBUGGING**\r\n\r\n- `QUARKUS_OIDC_ENABLED=false` ( disabled the OIDC ) then running the project in the container, results to server is running well, in the mean time I&#39;ve sent a curl request from the container bash to the `QUARKUS_OIDC_AUTH_SERVER_URL` it returns a success reponse with the appropriate json response. also tried `printenv` inside the container and all env vars exists and are set correctly.\r\n- Changed the correct url to any other url e.g.`http://flitch.hostame.com/auth/realms/realmname/` in the container it logs an error message saying the server url is unreachable or denied, alongside the old error of `&#39;quarkus.oidc.auth-server-url&#39; property must be configured`\r\n\r\n**FILES**\r\n\r\n`application.properties`\r\n    \r\n\r\n    # OIDC Configuration\r\n        quarkus.keycloak.devservices.realm-path=${QUARKUS_KEYCLOAK_DEVSERVICES_REALM_PATH}\r\n    quarkus.oidc.client-id=${QUARKUS_OIDC_CLIENT_ID}\r\n    quarkus.oidc.credentials.jwt.signature-algorithm=${QUARKUS_OIDC_CREDENTIALS_JWT_SIGNATURE_ALGORITHM}\r\n    quarkus.oidc.enabled=${QUARKUS_OIDC_ENABLED}\r\n    quarkus.oidc.auth-role-mapper.authentication.verify-access-token=${QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_VERIFY_ACCESS_TOKEN}\r\n    quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\r\n    %prod.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\r\n    %dev.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\r\n    %test.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\r\n    quarkus.oidc.auth-role-mapper.authentication.cookie-force-secure=${QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_COOKIE_FORCE_SECURE}\r\n\r\n`.env`\r\n\r\n    QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\r\n    _DEV_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\r\n    _TEST_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\r\n    _PROD_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\r\n    QUARKUS_OIDC_CLIENT_ID=account\r\n    QUARKUS_OIDC_CREDENTIALS_JWT_SIGNATURE_ALGORITHM=****\r\n    QUARKUS_OIDC_ENABLED=true\r\n    QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_VERIFY_ACCESS_TOKEN=true\r\n    QUARKUS_LIVE_RELOAD_INSTRUMENTATION=true\r\n    JAVAX_VALIDATION_ENABLE=true\r\n    QUARKUS_CONFIG_PATH=.env\r\n    QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_COOKIE_FORCE_SECURE=false\r\n    QUARKUS_KEYCLOAK_DEVSERVICES_REALM_PATH=keycloak.json\r\n    QUARKUS_KEYCLOAK_REALM=realmname\r\n    QUARKUS_KEYCLOAK_DEVSERVICES_SHOW_LOGS=true\r\n\r\n`docker-compose.yml`\r\n\r\n    version: &quot;3.7&quot;\r\n    services:\r\n      quarkus:\r\n        image: quarkus/quarkus-project\r\n        container_name: quarkus_project_container\r\n        restart: always\r\n        network_mode: &quot;host&quot;\r\n        build:\r\n          context: $PWD\r\n          dockerfile: ./src/main/docker/Dockerfile.jvm\r\n        env_file: .env\r\n        ports:\r\n          - 5005:5005\r\n          - 8080:8080\r\nAnd docker file is the default one generated by quarkus:\r\n\r\n    FROM registry.access.redhat.com/ubi8/openjdk-17:1.14\r\n    \r\n    ENV LANGUAGE=&#39;en_US:en&#39;\r\n    \r\n    # We make four distinct layers so if there are application changes the library layers can be re-used\r\n    COPY --chown=185 target/quarkus-app/lib/ /deployments/lib/\r\n    COPY --chown=185 target/quarkus-app/*.jar /deployments/\r\n    COPY --chown=185 target/quarkus-app/app/ /deployments/app/\r\n    COPY --chown=185 target/quarkus-app/quarkus/ /deployments/quarkus/\r\n    \r\n    EXPOSE 8080\r\n    USER 185\r\n    ENV JAVA_OPTS=&quot;-Dquarkus.http.host=0.0.0.0 -Ddebug -Djava.util.logging.manager=org.jboss.logmanager.LogManager&quot;\r\n    ENV JAVA_DEBUG=&quot;true&quot;\r\n    ENV JAVA_APP_JAR=&quot;/deployments/quarkus-run.jar&quot;\r\n\r\n","title":"&#39;quarkus.oidc.auth-server-url&#39; property must be configured. only when running the quarkus app on docker","body":"<p><strong>TOPIC</strong></p>\n<p>I'm running a quarkus application and I want to connect it with a keycloak server deployed on another host.</p>\n<p>the keycloak server is working with other services means no problems in there.</p>\n<p>The keycloak server is exposing this hostname: <code>flitch.hostname.com</code>. So the url to connect to it is\n<code>QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname</code></p>\n<p><em><strong>When running the quarkus project locally everything works fine, I can manage users, auth, tokens...</strong></em>.</p>\n<p><strong>PROBLEM</strong></p>\n<p>But the when creating an image and running it on a the docker container it throws an error: <code>'quarkus.oidc.auth-server-url' property must be configured</code></p>\n<p><strong>DEBUGGING</strong></p>\n<ul>\n<li><code>QUARKUS_OIDC_ENABLED=false</code> ( disabled the OIDC ) then running the project in the container, results to server is running well, in the mean time I've sent a curl request from the container bash to the <code>QUARKUS_OIDC_AUTH_SERVER_URL</code> it returns a success reponse with the appropriate json response. also tried <code>printenv</code> inside the container and all env vars exists and are set correctly.</li>\n<li>Changed the correct url to any other url e.g.<code>http://flitch.hostame.com/auth/realms/realmname/</code> in the container it logs an error message saying the server url is unreachable or denied, alongside the old error of <code>'quarkus.oidc.auth-server-url' property must be configured</code></li>\n</ul>\n<p><strong>FILES</strong></p>\n<p><code>application.properties</code></p>\n<pre><code># OIDC Configuration\n    quarkus.keycloak.devservices.realm-path=${QUARKUS_KEYCLOAK_DEVSERVICES_REALM_PATH}\nquarkus.oidc.client-id=${QUARKUS_OIDC_CLIENT_ID}\nquarkus.oidc.credentials.jwt.signature-algorithm=${QUARKUS_OIDC_CREDENTIALS_JWT_SIGNATURE_ALGORITHM}\nquarkus.oidc.enabled=${QUARKUS_OIDC_ENABLED}\nquarkus.oidc.auth-role-mapper.authentication.verify-access-token=${QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_VERIFY_ACCESS_TOKEN}\nquarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\n%prod.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\n%dev.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\n%test.quarkus.oidc.auth-server-url=${QUARKUS_OIDC_AUTH_SERVER_URL}\nquarkus.oidc.auth-role-mapper.authentication.cookie-force-secure=${QUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_COOKIE_FORCE_SECURE}\n</code></pre>\n<p><code>.env</code></p>\n<pre><code>QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\n_DEV_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\n_TEST_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\n_PROD_QUARKUS_OIDC_AUTH_SERVER_URL=http://flitch.hostame.com/realms/realmname\nQUARKUS_OIDC_CLIENT_ID=account\nQUARKUS_OIDC_CREDENTIALS_JWT_SIGNATURE_ALGORITHM=****\nQUARKUS_OIDC_ENABLED=true\nQUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_VERIFY_ACCESS_TOKEN=true\nQUARKUS_LIVE_RELOAD_INSTRUMENTATION=true\nJAVAX_VALIDATION_ENABLE=true\nQUARKUS_CONFIG_PATH=.env\nQUARKUS_OIDC_AUTH_ROLE_MAPPER_AUTHENTICATION_COOKIE_FORCE_SECURE=false\nQUARKUS_KEYCLOAK_DEVSERVICES_REALM_PATH=keycloak.json\nQUARKUS_KEYCLOAK_REALM=realmname\nQUARKUS_KEYCLOAK_DEVSERVICES_SHOW_LOGS=true\n</code></pre>\n<p><code>docker-compose.yml</code></p>\n<pre><code>version: &quot;3.7&quot;\nservices:\n  quarkus:\n    image: quarkus/quarkus-project\n    container_name: quarkus_project_container\n    restart: always\n    network_mode: &quot;host&quot;\n    build:\n      context: $PWD\n      dockerfile: ./src/main/docker/Dockerfile.jvm\n    env_file: .env\n    ports:\n      - 5005:5005\n      - 8080:8080\n</code></pre>\n<p>And docker file is the default one generated by quarkus:</p>\n<pre><code>FROM registry.access.redhat.com/ubi8/openjdk-17:1.14\n\nENV LANGUAGE='en_US:en'\n\n# We make four distinct layers so if there are application changes the library layers can be re-used\nCOPY --chown=185 target/quarkus-app/lib/ /deployments/lib/\nCOPY --chown=185 target/quarkus-app/*.jar /deployments/\nCOPY --chown=185 target/quarkus-app/app/ /deployments/app/\nCOPY --chown=185 target/quarkus-app/quarkus/ /deployments/quarkus/\n\nEXPOSE 8080\nUSER 185\nENV JAVA_OPTS=&quot;-Dquarkus.http.host=0.0.0.0 -Ddebug -Djava.util.logging.manager=org.jboss.logmanager.LogManager&quot;\nENV JAVA_DEBUG=&quot;true&quot;\nENV JAVA_APP_JAR=&quot;/deployments/quarkus-run.jar&quot;\n</code></pre>\n"},{"tags":["java","regex","datetime"],"comments":[{"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"score":1,"creation_date":1674598477,"post_id":75227767,"comment_id":132747927,"body_markdown":"Something like this? `^\\d\\d([-/])\\d\\d\\1\\d{4} \\d\\d:\\d\\d [AP]M ET$` https://regex101.com/r/nZC9PB/1","body":"Something like this? <code>^\\d\\d([-&#47;])\\d\\d\\1\\d{4} \\d\\d:\\d\\d [AP]M ET$</code> <a href=\"https://regex101.com/r/nZC9PB/1\" rel=\"nofollow noreferrer\">regex101.com/r/nZC9PB/1</a>"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1674598612,"post_id":75227767,"comment_id":132747966,"body_markdown":"How is this regex used? Does _...is written using..._ really referring to parsing?","body":"How is this regex used? Does <i>...is written using...</i> really referring to parsing?"},{"owner":{"account_id":27597963,"reputation":1024,"user_id":21063779,"display_name":"Lae"},"score":2,"creation_date":1674599428,"post_id":75227767,"comment_id":132748153,"body_markdown":"You should really use `java.time.format.DateTimeFormatter` instead of regex.","body":"You should really use <code>java.time.format.DateTimeFormatter</code> instead of regex."},{"owner":{"account_id":24830235,"reputation":485,"user_id":18709498,"display_name":"dc-ddfe"},"score":1,"creation_date":1674600971,"post_id":75227767,"comment_id":132748527,"body_markdown":"I would suggest you read up on regex first. The sample regex you&#39;ve given matches a date format of `2023-06-01T11:59:00Z` which really doesn&#39;t bear any resemblance to the format you&#39;re trying to match.","body":"I would suggest you read up on regex first. The sample regex you&#39;ve given matches a date format of <code>2023-06-01T11:59:00Z</code> which really doesn&#39;t bear any resemblance to the format you&#39;re trying to match."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1674641814,"post_id":75227767,"comment_id":132756182,"body_markdown":"Is that 06 January or June 01 or one of each?","body":"Is that 06 January or June 01 or one of each?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1674641956,"post_id":75227767,"comment_id":132756229,"body_markdown":"Don’t use 11:59 PM to represent the end of the day. Use 00:00 AM on the following day. That is when the day ends.","body":"Don’t use 11:59 PM to represent the end of the day. Use 00:00 AM on the following day. That is when the day ends."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674601545,"creation_date":1674600218,"answer_id":75228046,"question_id":75227767,"body_markdown":"# *java.time*\r\n\r\nRather than use [regex][1], you can use *java.time* classes. \r\n\r\nSpecify a `DateTimeFormatter` object for each of your expected inputs. Attempt to parse the input with each of these. If `DateTimeParseException` is thrown, you know the input does not match that formatter — move on to the next formatter. If no exception, then you have a match. If all of the formatters throw the exception, then you have an unexpected invalid input.\r\n\r\nIn most situations, you should *never* [swallow an exception][2]. But here is an exception to the rule; here it makes sense. We expect at least 2 of our 3 formatters will fail to parse, and possibly all three. \r\n\r\nYour second case is peculiar in that it combines a time-of-day with a pseudo time zone, `ET`. Java does include a class [`OffsetTime`][3] for a time combined with an offset-from-UTC. But (a) that class makes no sense logically; I presume that class was included merely for compatibility with the same illogical data type defined in the [SQL standard][4]. And, (b) your input uses a pseudo [time zone][5], not an [offset][6]. To resolve this conundrum, I use the `LocalTime` class which represents solely a time-of-day, no date, no time zone, no offset. \r\n\r\n```java\r\npackage work.basil.example.time;\r\n\r\nimport java.time.format.*;\r\nimport java.time.*;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class App5\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App5 app = new App5();\r\n        app.demo();\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        List &lt; String &gt; inputs =\r\n                List.of(\r\n                        &quot;06-01-2023&quot; ,\r\n                        &quot;11:59 PM ET&quot; ,\r\n                        &quot;06/01/2023 11:59 PM ET&quot; ,\r\n                        &quot;bogus&quot;\r\n                );\r\n        for ( String input : inputs )\r\n        {\r\n            // LocalDate\r\n            try\r\n            {\r\n                LocalDate localDate = LocalDate.parse( input , DateTimeFormatter.ofPattern( &quot;dd-MM-uuuu&quot; ) );\r\n                System.out.println( &quot;Found a match for LocalDate: &quot; + localDate );\r\n                continue;\r\n            }\r\n            catch ( DateTimeParseException e )\r\n            {\r\n                // Ignore here. Try other formatters.\r\n            }\r\n\r\n            // LocalTime\r\n            try\r\n            {\r\n                LocalTime localTime = LocalTime.parse( input , DateTimeFormatter.ofPattern( &quot;hh:mm a v&quot; ).withLocale( Locale.US ) );\r\n                System.out.println( &quot;Found a match for OffsetTime: &quot; + localTime );\r\n                continue;\r\n            }\r\n            catch ( DateTimeParseException e )\r\n            {\r\n                // Ignore here. Try other formatters.\r\n            }\r\n\r\n            // ZonedDateTime\r\n            try\r\n            {\r\n                ZonedDateTime zdt = ZonedDateTime.parse( input , DateTimeFormatter.ofPattern( &quot;MM/dd/uuuu hh:mm a v&quot; ).withLocale( Locale.US ) );\r\n                System.out.println( &quot;Found a match for ZonedDateTime: &quot; + zdt );\r\n                continue;\r\n            }\r\n            catch ( DateTimeParseException e )\r\n            {\r\n                // Ignore here. Try other formatters.\r\n            }\r\n\r\n            // Reaching this point means the input in unexpected, invalid. \r\n            System.out.println( &quot;ERROR - Input is invalid: &quot; + input );\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nFound a match for LocalDate: 2023-01-06\r\nFound a match for OffsetTime: 23:59\r\nFound a match for ZonedDateTime: 2023-06-01T23:59-04:00[America/New_York]\r\nERROR - Input is invalid: bogus\r\n```\r\n\r\n## ISO 8601\r\n\r\nFYI, such custom localized formats are a terrible way to communicate date-time values textually. Educate the publisher of your data about the virtues of using standard [ISO 8601][7] formats for data exchange and data storage.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Regular_expression\r\n  [2]: https://en.wikipedia.org/wiki/Error_hiding\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/OffsetTime.html\r\n  [4]: https://en.wikipedia.org/wiki/SQL\r\n  [5]: https://en.wikipedia.org/wiki/Time_zone\r\n  [6]: https://en.wikipedia.org/wiki/UTC_offset\r\n  [7]: https://en.wikipedia.org/wiki/ISO_8601","title":"How to validate date and time format with time zone?","body":"<h1><em>java.time</em></h1>\n<p>Rather than use <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regex</a>, you can use <em>java.time</em> classes.</p>\n<p>Specify a <code>DateTimeFormatter</code> object for each of your expected inputs. Attempt to parse the input with each of these. If <code>DateTimeParseException</code> is thrown, you know the input does not match that formatter — move on to the next formatter. If no exception, then you have a match. If all of the formatters throw the exception, then you have an unexpected invalid input.</p>\n<p>In most situations, you should <em>never</em> <a href=\"https://en.wikipedia.org/wiki/Error_hiding\" rel=\"nofollow noreferrer\">swallow an exception</a>. But here is an exception to the rule; here it makes sense. We expect at least 2 of our 3 formatters will fail to parse, and possibly all three.</p>\n<p>Your second case is peculiar in that it combines a time-of-day with a pseudo time zone, <code>ET</code>. Java does include a class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/OffsetTime.html\" rel=\"nofollow noreferrer\"><code>OffsetTime</code></a> for a time combined with an offset-from-UTC. But (a) that class makes no sense logically; I presume that class was included merely for compatibility with the same illogical data type defined in the <a href=\"https://en.wikipedia.org/wiki/SQL\" rel=\"nofollow noreferrer\">SQL standard</a>. And, (b) your input uses a pseudo <a href=\"https://en.wikipedia.org/wiki/Time_zone\" rel=\"nofollow noreferrer\">time zone</a>, not an <a href=\"https://en.wikipedia.org/wiki/UTC_offset\" rel=\"nofollow noreferrer\">offset</a>. To resolve this conundrum, I use the <code>LocalTime</code> class which represents solely a time-of-day, no date, no time zone, no offset.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.time;\n\nimport java.time.format.*;\nimport java.time.*;\nimport java.util.List;\nimport java.util.Locale;\n\npublic class App5\n{\n    public static void main ( String[] args )\n    {\n        App5 app = new App5();\n        app.demo();\n    }\n\n    private void demo ( )\n    {\n        List &lt; String &gt; inputs =\n                List.of(\n                        &quot;06-01-2023&quot; ,\n                        &quot;11:59 PM ET&quot; ,\n                        &quot;06/01/2023 11:59 PM ET&quot; ,\n                        &quot;bogus&quot;\n                );\n        for ( String input : inputs )\n        {\n            // LocalDate\n            try\n            {\n                LocalDate localDate = LocalDate.parse( input , DateTimeFormatter.ofPattern( &quot;dd-MM-uuuu&quot; ) );\n                System.out.println( &quot;Found a match for LocalDate: &quot; + localDate );\n                continue;\n            }\n            catch ( DateTimeParseException e )\n            {\n                // Ignore here. Try other formatters.\n            }\n\n            // LocalTime\n            try\n            {\n                LocalTime localTime = LocalTime.parse( input , DateTimeFormatter.ofPattern( &quot;hh:mm a v&quot; ).withLocale( Locale.US ) );\n                System.out.println( &quot;Found a match for OffsetTime: &quot; + localTime );\n                continue;\n            }\n            catch ( DateTimeParseException e )\n            {\n                // Ignore here. Try other formatters.\n            }\n\n            // ZonedDateTime\n            try\n            {\n                ZonedDateTime zdt = ZonedDateTime.parse( input , DateTimeFormatter.ofPattern( &quot;MM/dd/uuuu hh:mm a v&quot; ).withLocale( Locale.US ) );\n                System.out.println( &quot;Found a match for ZonedDateTime: &quot; + zdt );\n                continue;\n            }\n            catch ( DateTimeParseException e )\n            {\n                // Ignore here. Try other formatters.\n            }\n\n            // Reaching this point means the input in unexpected, invalid. \n            System.out.println( &quot;ERROR - Input is invalid: &quot; + input );\n        }\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Found a match for LocalDate: 2023-01-06\nFound a match for OffsetTime: 23:59\nFound a match for ZonedDateTime: 2023-06-01T23:59-04:00[America/New_York]\nERROR - Input is invalid: bogus\n</code></pre>\n<h2>ISO 8601</h2>\n<p>FYI, such custom localized formats are a terrible way to communicate date-time values textually. Educate the publisher of your data about the virtues of using standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> formats for data exchange and data storage.</p>\n"}],"owner":{"account_id":25337796,"reputation":25,"user_id":19156645,"display_name":"iDan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1674601545,"creation_date":1674597979,"question_id":75227767,"body_markdown":"I need to make sure that my date is written using one of the following formats:\r\n**06-01-2023 11:59 PM ET** or **06/01/2023 11:59 PM ET**\r\n\r\n\r\n\r\nI tried to use the following regex, but it didn&#39;t work out: \r\n```\r\n^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2})Z$\r\n```\r\n\r\nCan somebody please help me with regex and let me know how can I achieve the desired format for my date and time?\r\n","title":"How to validate date and time format with time zone?","body":"<p>I need to make sure that my date is written using one of the following formats:\n<strong>06-01-2023 11:59 PM ET</strong> or <strong>06/01/2023 11:59 PM ET</strong></p>\n<p>I tried to use the following regex, but it didn't work out:</p>\n<pre><code>^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2})Z$\n</code></pre>\n<p>Can somebody please help me with regex and let me know how can I achieve the desired format for my date and time?</p>\n"},{"tags":["java","spring","spring-boot","canonicalization"],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1674600964,"creation_date":1674593484,"question_id":75227163,"body_markdown":"I have a bunch of Spring configuration files in various formats from various projects. I am doing some analytics on the combined merged results of the properties files. \r\n\r\nSo I would like to parse out the hierarchy of each file (yaml, json and properties files).\r\n\r\nBut the trick is I need to convert each property key into canonical form before I store it into the data structure. because of this stuff https://github.com/spring-projects/spring-boot/wiki/Canonical-properties\r\n\r\nNamely:\r\n\r\n```\r\nspring.jpa.database-platform=mysql\r\nspring.jpa.databasePlatform=mysql\r\nspring.JPA.database_platform=mysql\r\n```\r\n\r\nEach of these properties is the exact same.\r\n\r\nSo the tricky part here is that each property key needs to be converted to canonical form before doing any sort of comparison.\r\n\r\nIs there a Spring-friendly-way to convert keys to and from the canonical form? \r\n\r\nExamples:\r\n\r\n`databasePlatform` -&gt; `database-platform`\r\n`dataBasePlatform` -&gt; `data-base-platform`\r\n\r\nBecause I have found random canonical string snippets on the internet and none of them seem to work quite like Spring&#39;s does. \r\n\r\nAny advise how to proceed here is welcome thanks.\r\n\r\nHere is what I&#39;ve found so far:\r\n\r\n```\r\npublic String convertToCanonicalForm(String key) {\r\n  return key.replaceAll(&quot;(.)(\\\\p{Upper}+|\\\\d+)&quot;, &quot;$1-$2&quot;).toLowerCase();\r\n}\r\n```\r\n\r\nbut I&#39;m not sure about some of the edge cases. How do you handle `abc123` is it `abc-123` or `abc123` ? Or what about `a123` is that `a-123` or just `a123`? Or what about `A123` is that `a-123` or `a123`? etc. \r\n\r\n\r\nUPDATE: I found a better function here, but not sure if this is adequate: \r\nhttps://stackoverflow.com/a/70226943/1174024\r\n```\r\n\tpublic String convertToCanonicalForm(String key) {\r\n\t\treturn key.replaceAll(&quot;([a-z])([A-Z])&quot;, &quot;$1-$2&quot;).toLowerCase();\r\n\t}\r\n```","title":"Spring boot - converting to and from canonical form of property names maintaining nesting?","body":"<p>I have a bunch of Spring configuration files in various formats from various projects. I am doing some analytics on the combined merged results of the properties files.</p>\n<p>So I would like to parse out the hierarchy of each file (yaml, json and properties files).</p>\n<p>But the trick is I need to convert each property key into canonical form before I store it into the data structure. because of this stuff <a href=\"https://github.com/spring-projects/spring-boot/wiki/Canonical-properties\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Canonical-properties</a></p>\n<p>Namely:</p>\n<pre><code>spring.jpa.database-platform=mysql\nspring.jpa.databasePlatform=mysql\nspring.JPA.database_platform=mysql\n</code></pre>\n<p>Each of these properties is the exact same.</p>\n<p>So the tricky part here is that each property key needs to be converted to canonical form before doing any sort of comparison.</p>\n<p>Is there a Spring-friendly-way to convert keys to and from the canonical form?</p>\n<p>Examples:</p>\n<p><code>databasePlatform</code> -&gt; <code>database-platform</code>\n<code>dataBasePlatform</code> -&gt; <code>data-base-platform</code></p>\n<p>Because I have found random canonical string snippets on the internet and none of them seem to work quite like Spring's does.</p>\n<p>Any advise how to proceed here is welcome thanks.</p>\n<p>Here is what I've found so far:</p>\n<pre><code>public String convertToCanonicalForm(String key) {\n  return key.replaceAll(&quot;(.)(\\\\p{Upper}+|\\\\d+)&quot;, &quot;$1-$2&quot;).toLowerCase();\n}\n</code></pre>\n<p>but I'm not sure about some of the edge cases. How do you handle <code>abc123</code> is it <code>abc-123</code> or <code>abc123</code> ? Or what about <code>a123</code> is that <code>a-123</code> or just <code>a123</code>? Or what about <code>A123</code> is that <code>a-123</code> or <code>a123</code>? etc.</p>\n<p>UPDATE: I found a better function here, but not sure if this is adequate:\n<a href=\"https://stackoverflow.com/a/70226943/1174024\">https://stackoverflow.com/a/70226943/1174024</a></p>\n<pre><code>    public String convertToCanonicalForm(String key) {\n        return key.replaceAll(&quot;([a-z])([A-Z])&quot;, &quot;$1-$2&quot;).toLowerCase();\n    }\n</code></pre>\n"},{"tags":["java","spring","vue.js","authentication"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1674641808,"post_id":75228059,"comment_id":132756179,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27613592,"reputation":1,"user_id":21076153,"display_name":"Chris F"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674600375,"creation_date":1674600375,"question_id":75228059,"body_markdown":"I am in the process of connecting a Vue frontend with a Java Spring backend, deployed via Google Cloud. I can&#39;t seem to figure out how to incorporate Google Identity to secure both backend and frontend.\r\n\r\nDo you have any ideas of a good solution for using GCP Identity that authenticates and authorize access to both backend and frontend?\r\n\r\nTried to research the matter, but can&#39;t find a direct solution to the problem.","title":"Spring + Vue + GCP auth","body":"<p>I am in the process of connecting a Vue frontend with a Java Spring backend, deployed via Google Cloud. I can't seem to figure out how to incorporate Google Identity to secure both backend and frontend.</p>\n<p>Do you have any ideas of a good solution for using GCP Identity that authenticates and authorize access to both backend and frontend?</p>\n<p>Tried to research the matter, but can't find a direct solution to the problem.</p>\n"},{"tags":["java","spring","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":6145098,"reputation":599,"user_id":4791305,"accept_rate":67,"display_name":"Ivan Timoshin"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1492625217,"creation_date":1492625217,"answer_id":43503093,"question_id":43502232,"body_markdown":"It seems like you haven&#39;t included the `javax.servlet.jar` library in your project. \r\n\r\nIf you&#39;re not using any dependency managers, you should add &#39;javax.servlet.jar&#39; file to your classpath manually with Intellij IDEA: Project Structure (Ctrl+Alt+Shift+S) -&gt; Libraries -&gt; New Project Library -&gt; Java. This jar-file can be downloaded here: http://central.maven.org/maven2/javax/servlet/javax.servlet-api/3.0.1/javax.servlet-api-3.0.1.jar\r\n\r\nIf you&#39;re using Maven, then just add this dependency to maven pom.xml file.\r\n\r\n  \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n     &lt;/dependency&gt;\r\n","title":"JavaConfig : The type javax.servlet.ServletContext and javax.servlet.ServletException cannot be resolved","body":"<p>It seems like you haven't included the <code>javax.servlet.jar</code> library in your project. </p>\n\n<p>If you're not using any dependency managers, you should add 'javax.servlet.jar' file to your classpath manually with Intellij IDEA: Project Structure (Ctrl+Alt+Shift+S) -> Libraries -> New Project Library -> Java. This jar-file can be downloaded here: <a href=\"http://central.maven.org/maven2/javax/servlet/javax.servlet-api/3.0.1/javax.servlet-api-3.0.1.jar\" rel=\"noreferrer\">http://central.maven.org/maven2/javax/servlet/javax.servlet-api/3.0.1/javax.servlet-api-3.0.1.jar</a></p>\n\n<p>If you're using Maven, then just add this dependency to maven pom.xml file.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27613625,"reputation":1,"user_id":21076177,"display_name":"Soslan Zagagov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674600336,"creation_date":1674600336,"answer_id":75228055,"question_id":43502232,"body_markdown":"ran into a similar problem, I already had a dependency implemented\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n        &lt;version&gt;4.0.1&lt;/version&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHowever, the problem was solved by changing the version of\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;6.0.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nto:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.9.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"JavaConfig : The type javax.servlet.ServletContext and javax.servlet.ServletException cannot be resolved","body":"<p>ran into a similar problem, I already had a dependency implemented</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n    &lt;version&gt;4.0.1&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>However, the problem was solved by changing the version of</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;6.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;5.2.9.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10561661,"reputation":205,"user_id":7781262,"accept_rate":14,"display_name":"mattt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1674600336,"creation_date":1492622428,"question_id":43502232,"body_markdown":"create my first project in Spring and I have some problem. \r\nI use JavaConfig to configuration my project and when I start I have this error :\r\n\r\n    Error:(6, 8) java: cannot access javax.servlet.ServletException\r\n    class file for javax.servlet.ServletException not found\r\n\r\nI now I have to add javax.servlet api but I do not know where to do it.\r\nI create my project in IntelliJ Ultimate 2017.","title":"JavaConfig : The type javax.servlet.ServletContext and javax.servlet.ServletException cannot be resolved","body":"<p>create my first project in Spring and I have some problem. \nI use JavaConfig to configuration my project and when I start I have this error :</p>\n\n<pre><code>Error:(6, 8) java: cannot access javax.servlet.ServletException\nclass file for javax.servlet.ServletException not found\n</code></pre>\n\n<p>I now I have to add javax.servlet api but I do not know where to do it.\nI create my project in IntelliJ Ultimate 2017.</p>\n"},{"tags":["math","graphics","bezier","java","renderer"],"comments":[{"owner":{"account_id":155163,"reputation":3636,"user_id":371623,"accept_rate":80,"display_name":"CromTheDestroyer"},"score":0,"creation_date":1277238389,"post_id":3096806,"comment_id":3175399,"body_markdown":"I would have done some error analysis myself, but I&#39;m hoping someone knows off the top of their head.","body":"I would have done some error analysis myself, but I&#39;m hoping someone knows off the top of their head."},{"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"score":1,"creation_date":1277242614,"post_id":3096806,"comment_id":3175987,"body_markdown":"Are your Bezier curves rational or without weights?","body":"Are your Bezier curves rational or without weights?"},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":0,"creation_date":1674600657,"post_id":3096806,"comment_id":132748450,"body_markdown":"If this is for some manufacturing purpose, then maybe also consider approximating the ellipse with circular arcs, since CNC machines of all kinds support those directly.","body":"If this is for some manufacturing purpose, then maybe also consider approximating the ellipse with circular arcs, since CNC machines of all kinds support those directly."}],"answers":[{"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":2,"creation_date":1327243352,"post_id":3100354,"comment_id":11222611,"body_markdown":"as a follow up comment for people who found this post through google like I just did, this solution only looks good as semi-circle. It cannot be used for creating a full circle by sticking two of these together (the result is easily detected as &quot;not a circle&quot; by the human eye)","body":"as a follow up comment for people who found this post through google like I just did, this solution only looks good as semi-circle. It cannot be used for creating a full circle by sticking two of these together (the result is easily detected as &quot;not a circle&quot; by the human eye)"},{"owner":{"account_id":39358,"reputation":5423,"user_id":113455,"accept_rate":40,"display_name":"Andrew Pouliot"},"score":0,"creation_date":1419050747,"post_id":3100354,"comment_id":43579218,"body_markdown":"The fundamental error here is the non-continuity of the first derivative at the edges if you were to stick two together. The most common approximation is to use one b&#233;zier curve in each quadrant. I haven&#39;t seen anyone discuss a more accurate approximation, since that approach is &quot;good enough.&quot;","body":"The fundamental error here is the non-continuity of the first derivative at the edges if you were to stick two together. The most common approximation is to use one b&#233;zier curve in each quadrant. I haven&#39;t seen anyone discuss a more accurate approximation, since that approach is &quot;good enough.&quot;"}],"tags":[],"owner":{"account_id":110659,"reputation":13540,"user_id":292731,"accept_rate":89,"display_name":"Justin L."},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277284481,"creation_date":1277284481,"answer_id":3100354,"question_id":3096806,"body_markdown":"Your questions basically ask &quot;are these good approximations for a semicircle/arc of an ellipse&quot;.\r\n\r\nYou might want to try computing `B_y(a) - sin(a)` (of course, parameterizing your equations to both end at `(-1,0)` at the same value of `a`) for your curve `B(a)`, on a graphing utility such as [Wolfram Alpha](http://www.wolframalpha.com) to graph it, and see how much the variance is, and whether or not it suits your purposes.\r\n\r\nIf you want a more precise and non-visual answer, you may calculate\r\n\r\n    Integral (from 0 to K) [B_y(a) - sin(a)]^2 da / 2\r\n\r\nWhere K is the value of `a` where both parameterized curves end up at `(-1,0)`.\r\n\r\nThis integral is related/proportional (somewhat) to some measure of Standard Deviation, and will serve well as a numerical analysis.  If it&#39;s within your desired accuracy, you are good.\r\n\r\nYour second question, where you mention an affine transformation of a circle to an ellipse, will give you an error proportional to your original error, if your transformation is essentially linear.  If not, you could try using the [Jacobian Determinant](http://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant) of your transformation to see how the error would vary.\r\n\r\nI have also found a nice [**Analysis of Semicircle-Bezier Approximations**](http://digerati-illuminatus.blogspot.com/2008/05/approximating-semicircle-with-cubic.html) where the author finds a pretty sexy approximation:\r\n\r\n![Bezier Semicircle](https://bp2.blogger.com/_W3ZUYKgeEpk/SDcC_Lq1xoI/AAAAAAAAAA8/3XmK3Rf6zT4/s400/ZoomOfResults.jpg)\r\n\r\nGiven by:\r\n\r\n&lt;pre&gt;\r\nxValueInset = Diameter * 0.05\r\nyValueOffset = radius * 4.0 / 3.0\r\n\r\nP0 = (0,0)\r\nP1 = (xValueInset, yValueOffset)\r\nP2 = (Diameter - xValueInset, yValueOffset)\r\nP3 = (Diameter, 0)\r\n&lt;/pre&gt;\r\n\r\nWhere P1 and P2 are your control points.  Note that this approximates the semicircle:\r\n\r\n    B(a) = [ (d/2)*cos(a)+d/2 , (d/2)*sin(a) ]","title":"Circle approximations using Bezier curves","body":"<p>Your questions basically ask \"are these good approximations for a semicircle/arc of an ellipse\".</p>\n\n<p>You might want to try computing <code>B_y(a) - sin(a)</code> (of course, parameterizing your equations to both end at <code>(-1,0)</code> at the same value of <code>a</code>) for your curve <code>B(a)</code>, on a graphing utility such as <a href=\"http://www.wolframalpha.com\" rel=\"nofollow noreferrer\">Wolfram Alpha</a> to graph it, and see how much the variance is, and whether or not it suits your purposes.</p>\n\n<p>If you want a more precise and non-visual answer, you may calculate</p>\n\n<pre><code>Integral (from 0 to K) [B_y(a) - sin(a)]^2 da / 2\n</code></pre>\n\n<p>Where K is the value of <code>a</code> where both parameterized curves end up at <code>(-1,0)</code>.</p>\n\n<p>This integral is related/proportional (somewhat) to some measure of Standard Deviation, and will serve well as a numerical analysis.  If it's within your desired accuracy, you are good.</p>\n\n<p>Your second question, where you mention an affine transformation of a circle to an ellipse, will give you an error proportional to your original error, if your transformation is essentially linear.  If not, you could try using the <a href=\"http://en.wikipedia.org/wiki/Jacobian_matrix_and_determinant\" rel=\"nofollow noreferrer\">Jacobian Determinant</a> of your transformation to see how the error would vary.</p>\n\n<p>I have also found a nice <a href=\"http://digerati-illuminatus.blogspot.com/2008/05/approximating-semicircle-with-cubic.html\" rel=\"nofollow noreferrer\"><strong>Analysis of Semicircle-Bezier Approximations</strong></a> where the author finds a pretty sexy approximation:</p>\n\n<p><img src=\"https://bp2.blogger.com/_W3ZUYKgeEpk/SDcC_Lq1xoI/AAAAAAAAAA8/3XmK3Rf6zT4/s400/ZoomOfResults.jpg\" alt=\"Bezier Semicircle\"></p>\n\n<p>Given by:</p>\n\n<pre>\nxValueInset = Diameter * 0.05\nyValueOffset = radius * 4.0 / 3.0\n\nP0 = (0,0)\nP1 = (xValueInset, yValueOffset)\nP2 = (Diameter - xValueInset, yValueOffset)\nP3 = (Diameter, 0)\n</pre>\n\n<p>Where P1 and P2 are your control points.  Note that this approximates the semicircle:</p>\n\n<pre><code>B(a) = [ (d/2)*cos(a)+d/2 , (d/2)*sin(a) ]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":49880,"reputation":6124,"user_id":148668,"accept_rate":57,"display_name":"Alec Jacobson"},"score":0,"creation_date":1684522326,"post_id":5589051,"comment_id":134534787,"body_markdown":"link is broken :-(","body":"link is broken :-("}],"tags":[],"owner":{"account_id":37021,"reputation":7541,"user_id":105752,"accept_rate":100,"display_name":"xan"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1674600109,"creation_date":1302221667,"answer_id":5589051,"question_id":3096806,"body_markdown":"Here&#39;s a [general solution for any elliptical arc][1] as a cubic Bezier curve. \r\n\r\nThe error is most dependent on the difference of the start and end angles. I&#39;ve had good success by limiting the angle difference to 60&amp;deg;. That is, I make a separate cubic segment for every 60&amp;deg; (or fraction thereof) and chain them together.\r\n\r\n  [1]: https://modules.raku.org/dist/PDF::Document:cpan:TBROWDER/resources/elliptical-arc.pdf","title":"Circle approximations using Bezier curves","body":"<p>Here's a <a href=\"https://modules.raku.org/dist/PDF::Document:cpan:TBROWDER/resources/elliptical-arc.pdf\" rel=\"nofollow noreferrer\">general solution for any elliptical arc</a> as a cubic Bezier curve.</p>\n<p>The error is most dependent on the difference of the start and end angles. I've had good success by limiting the angle difference to 60°. That is, I make a separate cubic segment for every 60° (or fraction thereof) and chain them together.</p>\n"}],"owner":{"account_id":155163,"reputation":3636,"user_id":371623,"accept_rate":80,"display_name":"CromTheDestroyer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6996,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":5589051,"answer_count":2,"score":5,"last_activity_date":1674600109,"creation_date":1277237945,"question_id":3096806,"body_markdown":"I have 2 questions about bezier curves, and using them to approximate portions of circles.\r\n  \r\n1. Given the unit circle arc (1,0)-&gt;(cos(a),sin(a)) where 0 &lt; a &lt; pi/2, will it result\r\nin a good approximation of this arc to find the bezier curve&#39;s control points p1, p2 by solving the equations imposed by the requirements B(1/3) = (cos(a/3), sin(a/3))\r\nand B(2/3) = (cos(2a/3), sin(2a/3)). (In other words, requiring that the\r\nbezier curve go through two evenly spaced points in the arc).\r\n\r\n2. If we have an affine transformation A which turns the circle arc in an\r\nellipse arc will the transformed control points Ap0, Ap1, Ap2, Ap3 define\r\na good bezier approximation to the ellipse arc?\r\n\r\np0 and p3, of course, are the start and end points of the curve: (1,0) and (cos(a), sin(a)).\r\n\r\nThank you","title":"Circle approximations using Bezier curves","body":"<p>I have 2 questions about bezier curves, and using them to approximate portions of circles.</p>\n\n<ol>\n<li><p>Given the unit circle arc (1,0)->(cos(a),sin(a)) where 0 &lt; a &lt; pi/2, will it result\nin a good approximation of this arc to find the bezier curve's control points p1, p2 by solving the equations imposed by the requirements B(1/3) = (cos(a/3), sin(a/3))\nand B(2/3) = (cos(2a/3), sin(2a/3)). (In other words, requiring that the\nbezier curve go through two evenly spaced points in the arc).</p></li>\n<li><p>If we have an affine transformation A which turns the circle arc in an\nellipse arc will the transformed control points Ap0, Ap1, Ap2, Ap3 define\na good bezier approximation to the ellipse arc?</p></li>\n</ol>\n\n<p>p0 and p3, of course, are the start and end points of the curve: (1,0) and (cos(a), sin(a)).</p>\n\n<p>Thank you</p>\n"},{"tags":["java","encapsulation"],"answers":[{"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1367928298,"creation_date":1367928298,"answer_id":16418594,"question_id":16418571,"body_markdown":"&gt; Any how i am able to change the values of fields through setter methods.\r\n\r\nOnly if the setter method lets you do that.\r\n\r\n&gt; How we are preventing the accessing fields?\r\n\r\nThe setter and getter get to control if and how you can access the fields.\r\n\r\nA setter may check if the value is valid. It may ask a SecurityManager if you should be allowed to do this. It may convert between data types. And so on.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<blockquote>\n  <p>Any how i am able to change the values of fields through setter methods.</p>\n</blockquote>\n\n<p>Only if the setter method lets you do that.</p>\n\n<blockquote>\n  <p>How we are preventing the accessing fields?</p>\n</blockquote>\n\n<p>The setter and getter get to control if and how you can access the fields.</p>\n\n<p>A setter may check if the value is valid. It may ask a SecurityManager if you should be allowed to do this. It may convert between data types. And so on.</p>\n"},{"comments":[{"owner":{"account_id":3044361,"reputation":556,"user_id":2580452,"accept_rate":100,"display_name":"Vindhya Pratap Singh"},"score":2,"creation_date":1495880871,"post_id":16418617,"comment_id":75442437,"body_markdown":"I am agreed with your explanation, but if we talk about MVC. Then why should I write my business logic in Models.","body":"I am agreed with your explanation, but if we talk about MVC. Then why should I write my business logic in Models."},{"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"score":0,"creation_date":1496032948,"post_id":16418617,"comment_id":75479133,"body_markdown":"@VindhyaPratapSingh: Having certain *light* validation mechanisms in your models might make them more straight forward.","body":"@VindhyaPratapSingh: Having certain <i>light</i> validation mechanisms in your models might make them more straight forward."},{"owner":{"account_id":6979720,"reputation":5387,"user_id":5353128,"accept_rate":73,"display_name":"Kaushal28"},"score":0,"creation_date":1563776990,"post_id":16418617,"comment_id":100795857,"body_markdown":"Perfect use case!","body":"Perfect use case!"}],"tags":[],"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"comment_count":3,"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1367928347,"creation_date":1367928347,"answer_id":16418617,"question_id":16418571,"body_markdown":"Assume you have an `age` property.\r\n\r\nThe user can enter a value of `-10`, which although is a valid number, is an invalid age. A setter method could have logic which would allow you to catch such things.\r\n\r\nAnother scenario, would be to have the `age` field, but hide it. You could also have a Date of Birth field, and in it&#39;s setter you would have something like so:\r\n\r\n    ...\r\n    private int age\r\n    private Date dob\r\n    \r\n    ...\r\n    public void setDateOfBirth(Date dob)\r\n    {\r\n        this.dob = dob;\r\n        age = ... //some logic to calculate the age from the Date of Birth.\r\n    }","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Assume you have an <code>age</code> property.</p>\n\n<p>The user can enter a value of <code>-10</code>, which although is a valid number, is an invalid age. A setter method could have logic which would allow you to catch such things.</p>\n\n<p>Another scenario, would be to have the <code>age</code> field, but hide it. You could also have a Date of Birth field, and in it's setter you would have something like so:</p>\n\n<pre><code>...\nprivate int age\nprivate Date dob\n\n...\npublic void setDateOfBirth(Date dob)\n{\n    this.dob = dob;\n    age = ... //some logic to calculate the age from the Date of Birth.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25539,"reputation":2965,"user_id":65691,"accept_rate":93,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1367928360,"creation_date":1367928360,"answer_id":16418622,"question_id":16418571,"body_markdown":"The real use of encapsulation is also in the fact that you can do additional checks/processing on the way the values are set.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>The real use of encapsulation is also in the fact that you can do additional checks/processing on the way the values are set.</p>\n"},{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367928382,"creation_date":1367928382,"answer_id":16418631,"question_id":16418571,"body_markdown":"If you have class all of its properties are private-meaning that they cannot be accessed from outside the class- and the only way to interact with class properties is through its public methods.\r\n\r\nYou are changing tha values by giving the public access to those methods(setters).\r\n\r\n**using encapsulation the fields of a class can be made `read-only` or `write-only.`**\r\n","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>If you have class all of its properties are private-meaning that they cannot be accessed from outside the class- and the only way to interact with class properties is through its public methods.</p>\n\n<p>You are changing tha values by giving the public access to those methods(setters).</p>\n\n<p><strong>using encapsulation the fields of a class can be made <code>read-only</code> or <code>write-only.</code></strong></p>\n"},{"tags":[],"owner":{"account_id":376483,"reputation":5120,"user_id":727980,"accept_rate":82,"display_name":"mikey"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1367928430,"creation_date":1367928430,"answer_id":16418648,"question_id":16418571,"body_markdown":"You&#39;re not exactly preventing access to the fields -- you&#39;re controlling how others can access certain fields.  For example you can add validation to your setter method, or you can also update some other dependent field when the setter method of a field is called.\r\n\r\nYou can prevent write or read access to the field (e.g. by only providing a getter or setter respectively) -- but encapsulation with properties allows you to do more than just that.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>You're not exactly preventing access to the fields -- you're controlling how others can access certain fields.  For example you can add validation to your setter method, or you can also update some other dependent field when the setter method of a field is called.</p>\n\n<p>You can prevent write or read access to the field (e.g. by only providing a getter or setter respectively) -- but encapsulation with properties allows you to do more than just that.</p>\n"},{"comments":[{"owner":{"account_id":4139856,"reputation":8722,"user_id":3395512,"accept_rate":79,"display_name":"Solace"},"score":0,"creation_date":1432761430,"post_id":16418706,"comment_id":49064310,"body_markdown":"You havd summed up many advantages which is good, but giving an example for each point would make it more useful. Just a suggestion. Thank you for writing this answer.","body":"You havd summed up many advantages which is good, but giving an example for each point would make it more useful. Just a suggestion. Thank you for writing this answer."}],"tags":[],"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367928616,"creation_date":1367928616,"answer_id":16418706,"question_id":16418571,"body_markdown":"It&#39;s aim is nothing but protecting anything which is prone to change. You have plenty of examples on the web, so I give you some of the advantages of it:\r\n\r\n 1. Encapsulated Code is more **flexible** and easy to change with new requirements\r\n 2. Allows you to control **who can access what**. (!!!)\r\n 3. Helps to write **`immutable class`** in Java\r\n 4. It allows you to change **one part** of code without affecting other part of code.\r\n\r\n\r\n\r\n\r\n\r\n","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>It's aim is nothing but protecting anything which is prone to change. You have plenty of examples on the web, so I give you some of the advantages of it:</p>\n\n<ol>\n<li>Encapsulated Code is more <strong>flexible</strong> and easy to change with new requirements</li>\n<li>Allows you to control <strong>who can access what</strong>. (!!!)</li>\n<li>Helps to write <strong><code>immutable class</code></strong> in Java</li>\n<li>It allows you to change <strong>one part</strong> of code without affecting other part of code.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2590317,"reputation":171,"user_id":2245180,"display_name":"user2245180"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1367928620,"creation_date":1367928620,"answer_id":16418708,"question_id":16418571,"body_markdown":"Instead of letting everyone access the variables directly:\r\n\r\n    public Object object;\r\n\r\nIs better to use SET and GET methods, or for example just the GET method (Sometimes you dont want nobody to set other value to that variable).\r\n\r\n    public Object getObject() { \r\n    \r\n    return object;\r\n    }\r\n    \r\n    public void setObject(Object object) { \r\n    \r\n    this.object = object;\r\n    }","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Instead of letting everyone access the variables directly:</p>\n\n<pre><code>public Object object;\n</code></pre>\n\n<p>Is better to use SET and GET methods, or for example just the GET method (Sometimes you dont want nobody to set other value to that variable).</p>\n\n<pre><code>public Object getObject() { \n\nreturn object;\n}\n\npublic void setObject(Object object) { \n\nthis.object = object;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1367928773,"creation_date":1367928773,"answer_id":16418764,"question_id":16418571,"body_markdown":"Accessing fields thru methods make difference because it makes it OOP. Eg you can extend you class and change the behaviour which you cannot do with direct access. If you have getters / setters you can make a proxy of your class and do some AOP or a make a 1.4 dynamic proxy. You can make a mock from your class and make unit testing...","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Accessing fields thru methods make difference because it makes it OOP. Eg you can extend you class and change the behaviour which you cannot do with direct access. If you have getters / setters you can make a proxy of your class and do some AOP or a make a 1.4 dynamic proxy. You can make a mock from your class and make unit testing...</p>\n"},{"tags":[],"owner":{"account_id":2516006,"reputation":2551,"user_id":2187439,"display_name":"MMeersseman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1367929166,"creation_date":1367929166,"answer_id":16418892,"question_id":16418571,"body_markdown":"Lets suppose you make a custom Date class with the following setters / getters:\r\n\r\n    getDay() \r\n    getMonth() \r\n    getYear() \r\n    setDay() \r\n    setMonth() \r\n    setYear()\r\n\r\nInternally you could store the date using:\r\n\r\n    private int day;\r\n    private int month;\r\n    private int year;\r\n\r\nOr you could store the date using a java.lang.Date-object:\r\n\r\n    private Date date;\r\n\r\nEncapsulation doesn&#39;t expose how your class is working internally. It gives you more freedom to change how your class works. It gives you the option to control the access to your class. You can check if what the user enters is valid (you don&#39;t want the user to enter a day with a value of 32).","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Lets suppose you make a custom Date class with the following setters / getters:</p>\n\n<pre><code>getDay() \ngetMonth() \ngetYear() \nsetDay() \nsetMonth() \nsetYear()\n</code></pre>\n\n<p>Internally you could store the date using:</p>\n\n<pre><code>private int day;\nprivate int month;\nprivate int year;\n</code></pre>\n\n<p>Or you could store the date using a java.lang.Date-object:</p>\n\n<pre><code>private Date date;\n</code></pre>\n\n<p>Encapsulation doesn't expose how your class is working internally. It gives you more freedom to change how your class works. It gives you the option to control the access to your class. You can check if what the user enters is valid (you don't want the user to enter a day with a value of 32).</p>\n"},{"tags":[],"owner":{"account_id":2674661,"reputation":297,"user_id":2311327,"display_name":"Sello"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1444860346,"creation_date":1367929706,"answer_id":16419065,"question_id":16418571,"body_markdown":"If you have private fields they can&#39;t be accessed outside the class, that means basically those fields don&#39;t exist to the outside world and yes you can change their value through setter methods but using setter methods you have more flexibility/control to say who gets to change the fields and to what value can they be changed to...basically with encapsulation you get to put restrictions on how and who changes your fields.\r\nFor example you have: private double salary, you setter method could restrict that only hr staff can change the salary field it could be written as:    \r\n\r\n    void setSalary(Person p,double newSalary)    \r\n    {    \r\n    //only HR objects have access to change salary field.   \r\n    If(p instanceof HR &amp;&amp; newSalary&gt;=0)    \r\n    //change salary.   \r\n    else   \r\n     S.o.p(&quot;access denied&quot;);    \r\n    } \r\n\r\n   \r\n Imagine if salary was public and could be access directly any can change it however and whenever they want, this basically the significance of encapsulation\r\n","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>If you have private fields they can't be accessed outside the class, that means basically those fields don't exist to the outside world and yes you can change their value through setter methods but using setter methods you have more flexibility/control to say who gets to change the fields and to what value can they be changed to...basically with encapsulation you get to put restrictions on how and who changes your fields.\nFor example you have: private double salary, you setter method could restrict that only hr staff can change the salary field it could be written as:    </p>\n\n<pre><code>void setSalary(Person p,double newSalary)    \n{    \n//only HR objects have access to change salary field.   \nIf(p instanceof HR &amp;&amp; newSalary&gt;=0)    \n//change salary.   \nelse   \n S.o.p(\"access denied\");    \n} \n</code></pre>\n\n<p>Imagine if salary was public and could be access directly any can change it however and whenever they want, this basically the significance of encapsulation</p>\n"},{"comments":[{"owner":{"account_id":166797,"reputation":1694,"user_id":391162,"accept_rate":88,"display_name":"tazboy"},"score":0,"creation_date":1484855769,"post_id":25752613,"comment_id":70693488,"body_markdown":"This makes way more sense to me than the twenty other times I&#39;ve read about encapsulation before. The idea of improving my code without effecting the client&#39;s application was the key for me.","body":"This makes way more sense to me than the twenty other times I&#39;ve read about encapsulation before. The idea of improving my code without effecting the client&#39;s application was the key for me."},{"owner":{"account_id":8550964,"reputation":3152,"user_id":6407858,"accept_rate":100,"display_name":"Yug Singh"},"score":0,"creation_date":1557296768,"post_id":25752613,"comment_id":98712005,"body_markdown":"@UcheDim thanks for the informative answer. But I didn&#39;t get the point  `you could not save negatives and my client have always been able to store negatives, my clients will have a crashed system in their hands`. The thing is as per the answer we can change the public interface without affecting the client which means I can put a check in setter to disallow -ve numbers. Now earlier my setter was allowing -ve values and now it doesn&#39;t. Won&#39;t this also crash their systems. Or did you mean that since we now provide an exception msg it won&#39;t.","body":"@UcheDim thanks for the informative answer. But I didn&#39;t get the point  <code>you could not save negatives and my client have always been able to store negatives, my clients will have a crashed system in their hands</code>. The thing is as per the answer we can change the public interface without affecting the client which means I can put a check in setter to disallow -ve numbers. Now earlier my setter was allowing -ve values and now it doesn&#39;t. Won&#39;t this also crash their systems. Or did you mean that since we now provide an exception msg it won&#39;t."},{"owner":{"account_id":1913793,"reputation":412,"user_id":1726883,"display_name":"Uche Dim"},"score":1,"creation_date":1557404844,"post_id":25752613,"comment_id":98759222,"body_markdown":"@YugSingh In the instance where you do not have a public interface and you give the client direct access to the variable, and you make changes i.e &quot;you could use negative number before and after changes you could not anymore&quot; the clients app or whatever they used the variable for will have error. But if there was a public interface i.e setter or getter, you will just alway return a message to inform the client what is allowed and what is not allowed or if the assignment was successful or not. With public interface, the client always knows what to expect, no matter the changes made within.","body":"@YugSingh In the instance where you do not have a public interface and you give the client direct access to the variable, and you make changes i.e &quot;you could use negative number before and after changes you could not anymore&quot; the clients app or whatever they used the variable for will have error. But if there was a public interface i.e setter or getter, you will just alway return a message to inform the client what is allowed and what is not allowed or if the assignment was successful or not. With public interface, the client always knows what to expect, no matter the changes made within."},{"owner":{"account_id":14901094,"reputation":642,"user_id":13989422,"display_name":"Morteza"},"score":0,"creation_date":1603828374,"post_id":25752613,"comment_id":114159335,"body_markdown":"this sentence of yours `Because their &quot;module&quot; does not exactly depend on the Inner workings of my module but depends on the &quot;external interface&quot;, i made available to them.` explains abstraction not encapsulation","body":"this sentence of yours <code>Because their &quot;module&quot; does not exactly depend on the Inner workings of my module but depends on the &quot;external interface&quot;, i made available to them.</code> explains abstraction not encapsulation"},{"owner":{"account_id":1913793,"reputation":412,"user_id":1726883,"display_name":"Uche Dim"},"score":0,"creation_date":1603891570,"post_id":25752613,"comment_id":114179110,"body_markdown":"@MortezaBandi It doesn&#39;t really. As you can see its in a quote so its not taking out of context. in this context you cant possibly think i am explaining abstraction. so when i said &quot;external interface&quot;, i mean whatever i return or make available to the user. For example i might be manipulating an integer in a setter method but the &quot;external interface&quot; i will return to the user is string i.e &quot;Could not set value because it is negative&quot; or &quot;setting value is successful&quot;. In this case the &quot;external interface&quot; they have access to is a message from my module and no access to the actual variable.","body":"@MortezaBandi It doesn&#39;t really. As you can see its in a quote so its not taking out of context. in this context you cant possibly think i am explaining abstraction. so when i said &quot;external interface&quot;, i mean whatever i return or make available to the user. For example i might be manipulating an integer in a setter method but the &quot;external interface&quot; i will return to the user is string i.e &quot;Could not set value because it is negative&quot; or &quot;setting value is successful&quot;. In this case the &quot;external interface&quot; they have access to is a message from my module and no access to the actual variable."},{"owner":{"account_id":14901094,"reputation":642,"user_id":13989422,"display_name":"Morteza"},"score":0,"creation_date":1603908906,"post_id":25752613,"comment_id":114188006,"body_markdown":"@UcheDim. I know the context is about encapsulation and ... . But, I think using the term `external interface` might not be the best phrase to describe encapsulation as it implicitly defines abstraction. It is based on my experience and might not be 100 true for others.","body":"@UcheDim. I know the context is about encapsulation and ... . But, I think using the term <code>external interface</code> might not be the best phrase to describe encapsulation as it implicitly defines abstraction. It is based on my experience and might not be 100 true for others."},{"owner":{"account_id":1913793,"reputation":412,"user_id":1726883,"display_name":"Uche Dim"},"score":0,"creation_date":1644335794,"post_id":25752613,"comment_id":125576649,"body_markdown":"@MortezaBandi &quot;External interface&quot; is not describing encapsulation in my write up or explanation. It is used to describe what the client will be INTERACTING WITH . hence INTERFACE. the EXTERNAL is to make the reader understand the interaction is outside the method or module. In the context of my answer don&#39;t see how one will confuse the description of interacting with another module(External Interface) with ABSTRACTION that is a concept or idea in computing.","body":"@MortezaBandi &quot;External interface&quot; is not describing encapsulation in my write up or explanation. It is used to describe what the client will be INTERACTING WITH . hence INTERFACE. the EXTERNAL is to make the reader understand the interaction is outside the method or module. In the context of my answer don&#39;t see how one will confuse the description of interacting with another module(External Interface) with ABSTRACTION that is a concept or idea in computing."}],"tags":[],"owner":{"account_id":1913793,"reputation":412,"user_id":1726883,"display_name":"Uche Dim"},"comment_count":7,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1603846914,"creation_date":1410292600,"answer_id":25752613,"question_id":16418571,"body_markdown":"I have also been confused like you too for a long time until I read the book **Encapsulation and Inheritance in Object-Oriented Programming Language** and a website that explained the importance of Encapsulation. I was actually directed from the website to the book.\r\n\r\nPeople always say encapsulation is &quot;hiding of information&quot; therefore, maybe, making encapsulation focus on security as the main use. Yes you are hiding information in practice, but that should not be the definition as it could confuse people.\r\n\r\nEncapsulation is simply &quot;minimizing inter-dependencies among separately-written modules by defining strict external interfaces&quot; (quoting from the book). That is to say that when I am building a module, I want a strict contract between my clients and me on how they can access my module. Reason being that, I can improve the inner workings without it AFFECTING my client&#39;s, life, application or whatever they are using my module for. Because their &quot;module&quot; does not exactly depend on the Inner workings of my module but depends on the &quot;external interface&quot;, I made available to them.\r\n\r\nSo, if I don&#39;t provide my client with a setter and give them direct access to a variable, and I realize that I need to set some restriction on the variable before my client could use it, me changing it, could be me, changing the life of my client, or application of my client with HUGE EXPENSE. But if I provided the &quot;strict contract&quot; by creating a &quot;strict external interface&quot; i.e setter, then I can easily change my inner workings with very little or no expense to my clients. \r\n\r\nIn the setter situation (using encapsulation), if it happens that when you set a variable, and I return a message informing you that it has been assigned, now I could send a message via my &quot;interface&quot;, informing my client of the new way my module have to be interacted with, i.e &quot;You cannot assign negative numbers&quot; that is if my clients try to assign negative number. But if I did not use encapsulation, and gave my client direct access to a variable and I do my changes, it could result in a crashed system. Because if the restriction I implemented, is that, you could not save negatives and my client have always been able to store negatives, my clients will have a crashed system in their hands (if that &quot;crashed system&quot; was a banking system, imagine what could happen).\r\n\r\nSo, encapsulation is more about reducing dependency between module, and an improvement can be made &quot;quietly&quot; with little or no expense to other modules interacting with it, than it is of security. Because the interacting modules depend on the &quot;strict external interface or strict contract&quot;.\r\n\r\nI hope this explains it properly. If not you could go the links below and read for yourself.\r\n\r\n[encapsulation matters][1]\r\n\r\n\r\n[Encapsulation and Inheritance in Object-Oriented Programming Languages][2]\r\n\r\n\r\n  [1]: http://java.dzone.com/articles/why-encapsulation-matters\r\n  [2]: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.36.8552&amp;rep=rep1&amp;type=pdf","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>I have also been confused like you too for a long time until I read the book <strong>Encapsulation and Inheritance in Object-Oriented Programming Language</strong> and a website that explained the importance of Encapsulation. I was actually directed from the website to the book.</p>\n<p>People always say encapsulation is &quot;hiding of information&quot; therefore, maybe, making encapsulation focus on security as the main use. Yes you are hiding information in practice, but that should not be the definition as it could confuse people.</p>\n<p>Encapsulation is simply &quot;minimizing inter-dependencies among separately-written modules by defining strict external interfaces&quot; (quoting from the book). That is to say that when I am building a module, I want a strict contract between my clients and me on how they can access my module. Reason being that, I can improve the inner workings without it AFFECTING my client's, life, application or whatever they are using my module for. Because their &quot;module&quot; does not exactly depend on the Inner workings of my module but depends on the &quot;external interface&quot;, I made available to them.</p>\n<p>So, if I don't provide my client with a setter and give them direct access to a variable, and I realize that I need to set some restriction on the variable before my client could use it, me changing it, could be me, changing the life of my client, or application of my client with HUGE EXPENSE. But if I provided the &quot;strict contract&quot; by creating a &quot;strict external interface&quot; i.e setter, then I can easily change my inner workings with very little or no expense to my clients.</p>\n<p>In the setter situation (using encapsulation), if it happens that when you set a variable, and I return a message informing you that it has been assigned, now I could send a message via my &quot;interface&quot;, informing my client of the new way my module have to be interacted with, i.e &quot;You cannot assign negative numbers&quot; that is if my clients try to assign negative number. But if I did not use encapsulation, and gave my client direct access to a variable and I do my changes, it could result in a crashed system. Because if the restriction I implemented, is that, you could not save negatives and my client have always been able to store negatives, my clients will have a crashed system in their hands (if that &quot;crashed system&quot; was a banking system, imagine what could happen).</p>\n<p>So, encapsulation is more about reducing dependency between module, and an improvement can be made &quot;quietly&quot; with little or no expense to other modules interacting with it, than it is of security. Because the interacting modules depend on the &quot;strict external interface or strict contract&quot;.</p>\n<p>I hope this explains it properly. If not you could go the links below and read for yourself.</p>\n<p><a href=\"http://java.dzone.com/articles/why-encapsulation-matters\" rel=\"noreferrer\">encapsulation matters</a></p>\n<p><a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.36.8552&amp;rep=rep1&amp;type=pdf\" rel=\"noreferrer\">Encapsulation and Inheritance in Object-Oriented Programming Languages</a></p>\n"},{"tags":[],"owner":{"account_id":4409801,"reputation":4386,"user_id":3593084,"accept_rate":40,"display_name":"Mr.Q"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467890612,"creation_date":1467890612,"answer_id":38244218,"question_id":16418571,"body_markdown":"By using encapsulation you separate your class from the out-side world (other classes) and out-side world can access and modify your class instance variables through access modifiers, which provides several benefits:\r\n\r\n-You can do some logging in your getter/setter methods.\r\n\r\n-You can validate /normalize (for example trim spaces, remove special character,...) Your input in setter method.\r\n\r\nAnd also you can hide your implementation from the outside world, for example you have a collection like array list in your class and you write your getter method like this\r\n\r\n    public List&lt;t&gt; get collection(){\r\n     return new  ArrayList&lt;t&gt;(this.arrayList);\r\n    }\r\nSo in this case, in the future if you decide to change your implementation of collection from array list to something else like linked list, you are free to do so because out side world doesn&#39;t know anything about your implementation.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>By using encapsulation you separate your class from the out-side world (other classes) and out-side world can access and modify your class instance variables through access modifiers, which provides several benefits:</p>\n\n<p>-You can do some logging in your getter/setter methods.</p>\n\n<p>-You can validate /normalize (for example trim spaces, remove special character,...) Your input in setter method.</p>\n\n<p>And also you can hide your implementation from the outside world, for example you have a collection like array list in your class and you write your getter method like this</p>\n\n<pre><code>public List&lt;t&gt; get collection(){\n return new  ArrayList&lt;t&gt;(this.arrayList);\n}\n</code></pre>\n\n<p>So in this case, in the future if you decide to change your implementation of collection from array list to something else like linked list, you are free to do so because out side world doesn't know anything about your implementation.</p>\n"},{"tags":[],"owner":{"account_id":5472461,"reputation":134,"user_id":4351428,"display_name":"Saurabh Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485805184,"creation_date":1485805184,"answer_id":41944109,"question_id":16418571,"body_markdown":"Encapsultaion is used for hiding the member variables ,by making member as private and access that member variable by getter and setter methods.\r\n\r\nExample \r\n\r\nclass Encapsulation{\r\n\r\n    private int value ;\r\n\r\n    Encapsulation() {\r\n        System.out.println(&quot;constructor calling &quot;);\r\n    }\r\n\r\n    void setValue(int value){\r\n        this.value = value;\r\n    }\r\n    int getValue() {\r\n        return value;\r\n    }\r\n}\r\nclass EncapsulationMain {\r\n\r\n    public static void main(String args[]) {\r\n        Encapsulation obj = new Encapsulation();\r\n        obj.setValue(4);\r\n        //System.out.print(&quot;value is &quot;+obj.value); \r\n        //obj.value = 55;\r\n        //System.out.print(&quot;obj changing the value&quot;+obj.value);\r\n        System.out.print(&quot;calling the value through the getterMethod&quot;+obj.getValue());\r\n    }\r\n}\r\n\r\nyou cannot access the private value outside the class.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Encapsultaion is used for hiding the member variables ,by making member as private and access that member variable by getter and setter methods.</p>\n\n<p>Example </p>\n\n<p>class Encapsulation{</p>\n\n<pre><code>private int value ;\n\nEncapsulation() {\n    System.out.println(\"constructor calling \");\n}\n\nvoid setValue(int value){\n    this.value = value;\n}\nint getValue() {\n    return value;\n}\n</code></pre>\n\n<p>}\nclass EncapsulationMain {</p>\n\n<pre><code>public static void main(String args[]) {\n    Encapsulation obj = new Encapsulation();\n    obj.setValue(4);\n    //System.out.print(\"value is \"+obj.value); \n    //obj.value = 55;\n    //System.out.print(\"obj changing the value\"+obj.value);\n    System.out.print(\"calling the value through the getterMethod\"+obj.getValue());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>you cannot access the private value outside the class.</p>\n"},{"tags":[],"owner":{"account_id":10460334,"reputation":89,"user_id":7711299,"display_name":"Vinjamuri Satya Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489590568,"creation_date":1489590568,"answer_id":42813649,"question_id":16418571,"body_markdown":"Well, encapsulation is not all about hiding data. It is all about getting control over what is stored in the fields. Using encapsulation we can make a field as read-only or write-only depending upon the requirements.Also the users don&#39;t know how the data is stored in the fields. We can use some special encryption in the setter methods and store it in the fields.\r\n    For example human is a object. We only require the name field of the human to be read by the user but not to be modified. Then we define only get method on the name field.This is how the encapsulation is useful.","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Well, encapsulation is not all about hiding data. It is all about getting control over what is stored in the fields. Using encapsulation we can make a field as read-only or write-only depending upon the requirements.Also the users don't know how the data is stored in the fields. We can use some special encryption in the setter methods and store it in the fields.\n    For example human is a object. We only require the name field of the human to be read by the user but not to be modified. Then we define only get method on the name field.This is how the encapsulation is useful.</p>\n"},{"tags":[],"owner":{"account_id":5527790,"reputation":11931,"user_id":4388776,"display_name":"Keet Sugathadasa"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1507827054,"creation_date":1507827054,"answer_id":46715011,"question_id":16418571,"body_markdown":"The main idea behind encapsulation is data hiding. There are several reasons why we use encapsulation in object oriented programming. Some of the identified reasons for why we encapsulation are as follows (**The real use of encapsulation**).\r\n\r\n 1. **Better maintainability**: When all the properties are private and encapsulated, it is easy for us to maintain the program simply by changing the methods. \r\n\r\n 2. **Make Debugging Easy**: This is in line with the above point. We know that the object can only be manipulated through methods. So, this makes it easy to debug and catch bugs.\r\n\r\n 3. **Have a Controlled Environment**: Let the users use the given objects, in a controlled manner, through objects.\r\n\r\n 4. **Hide Complexities**: Hiding the complexities irrelevant to the users. Sometimes, some properties and methods are only for internal use and the user doesn&#39;t have to know about these. This makes is simple for the user to use the object.\r\n\r\n\r\nSo, to answer the question, &quot;*What is the use of encapsulation when I&#39;m able to change the property values with setter methods?*&quot;, given above are some of the main reasons why we use encapsulation. To provide an understanding on **why, getters and setters are useful**, given below are some important points, obtained from this [article][1]. \r\n\r\n - You can limit the values that can be stored in a field (i.e. gender must be F or M). \r\n\r\n - You can take actions when the field is modified (trigger event, validate, etc). \r\n\r\n - You can provide thread safety by synchronizing the method. \r\n\r\n - You can switch to a new data representation (i.e. calculated fields, different data type)\r\n\r\n  [1]: https://dzone.com/articles/why-encapsulation-matters","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>The main idea behind encapsulation is data hiding. There are several reasons why we use encapsulation in object oriented programming. Some of the identified reasons for why we encapsulation are as follows (<strong>The real use of encapsulation</strong>).</p>\n\n<ol>\n<li><p><strong>Better maintainability</strong>: When all the properties are private and encapsulated, it is easy for us to maintain the program simply by changing the methods. </p></li>\n<li><p><strong>Make Debugging Easy</strong>: This is in line with the above point. We know that the object can only be manipulated through methods. So, this makes it easy to debug and catch bugs.</p></li>\n<li><p><strong>Have a Controlled Environment</strong>: Let the users use the given objects, in a controlled manner, through objects.</p></li>\n<li><p><strong>Hide Complexities</strong>: Hiding the complexities irrelevant to the users. Sometimes, some properties and methods are only for internal use and the user doesn't have to know about these. This makes is simple for the user to use the object.</p></li>\n</ol>\n\n<p>So, to answer the question, \"<em>What is the use of encapsulation when I'm able to change the property values with setter methods?</em>\", given above are some of the main reasons why we use encapsulation. To provide an understanding on <strong>why, getters and setters are useful</strong>, given below are some important points, obtained from this <a href=\"https://dzone.com/articles/why-encapsulation-matters\" rel=\"noreferrer\">article</a>. </p>\n\n<ul>\n<li><p>You can limit the values that can be stored in a field (i.e. gender must be F or M). </p></li>\n<li><p>You can take actions when the field is modified (trigger event, validate, etc). </p></li>\n<li><p>You can provide thread safety by synchronizing the method. </p></li>\n<li><p>You can switch to a new data representation (i.e. calculated fields, different data type)</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1974896,"reputation":12096,"user_id":1772898,"accept_rate":65,"display_name":"Ahmad Ismail"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670750913,"creation_date":1670669457,"answer_id":74752242,"question_id":16418571,"body_markdown":"Encapsulation is not about secrecy, it is about **reducing dependency over separate part of the application**.\r\n\r\nWe control dependency (loose / weak / low coupling) by hiding information over separate part of the application.\r\n\r\nAdding to [Uche Dim&#39;s answer][1], look at the following example: \r\n\r\n**Two Connections:**\r\n\r\n    public class Area {\r\n    \r\n        // fields to calculate area\r\n        private int length;\r\n        private int breadth;\r\n    \r\n        // constructor to initialize values\r\n        Area(int length, int breadth) {\r\n            this.length = length;\r\n            this.breadth = breadth;\r\n        }\r\n    \r\n        public int getLength() {\r\n            return length;\r\n        }\r\n    \r\n        public void setLength(int length) {\r\n            this.length = length;\r\n        }\r\n    \r\n        public int getBreadth() {\r\n            return breadth;\r\n        }\r\n    \r\n        public void setBreadth(int breadth) {\r\n            this.breadth = breadth;\r\n        }\r\n\r\n        public int getArea() {\r\n            int area = length * breadth;\r\n            return area;\r\n        }\r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n    \r\n            Area rectangle = new Area(5, 6);\r\n    \r\n            // Two Connections\r\n            int length = rectangle.getLength();\r\n            int breadth = rectangle.getBreadth();\r\n            int area = length * breadth;\r\n            System.out.println(&quot;Area: &quot; + area);\r\n        }\r\n    }\r\n\r\nPlease note that in the `Main` class, we are calling two methods (`getLength()` and `getBreadth()`) of `Area` class. \r\n\r\n**One Connection:**\r\n\r\n    public class Area {\r\n    \r\n        // fields to calculate area\r\n        private int length;\r\n        private int breadth;\r\n    \r\n        // constructor to initialize values\r\n        Area(int length, int breadth) {\r\n            this.length = length;\r\n            this.breadth = breadth;\r\n        }\r\n    \r\n        public int getArea() {\r\n            int area = length * breadth;\r\n            return area;\r\n        }\r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n    \r\n            Area rectangle = new Area(5, 6);\r\n    \r\n            // One Connection\r\n            int area = rectangle.getArea();\r\n            System.out.println(&quot;Area: &quot; + area);\r\n    \r\n        }\r\n    }\r\n\r\nHere, in the `Main` class, we are calling one methods (`getArea()`) of `Area` class. \r\n\r\nSo in the second example, the connection is weaker than the previous one (first one calling two methods or the `Area` class, second one calling one method of the `Area` class). Given, less connection (lower / weaker coupling) is better, the second example is better.\r\n\r\n**We should always keep fields and methods private unless necessary**. In the *Two Connections* example, we made the mistake of creating the getters unnecessarily. As we have created it, the IntelliJ Idea (auto suggestion of modern IDE) suggested the developer who was working on the `Main` class that you can use the `getLength()` and `getBreadth()` methods and he did. He did not inquire further to check if there was a `getArea()` method. As a result he created stronger coupling than necessary.\r\n\r\nWe should not unnecessarily create getters. We should not unnecessarily make fields public or protected. If you must, first try protected, if that does not work then make it public. That way we will have a lesser possibility of having a tighter coupling.\r\n\r\nIf you still have the question &quot;what is the difference between making a field public compared to making a field private but it&#39;s getters public?&quot;, in other words &quot;Why should we use a function to get a value instead of getting it directly?&quot; Well it gives you another layer of abstraction. For example, if you need some extra processing of the data before receiving it (ex. validation), you can do it there. Moreover, once you expose internals of a class, you can not change that internal representation or make it better until making changes in all client codes.&#160;\r\n\r\nFor example, suppose you did something like:\r\n\r\n    public class Area {\r\n    \r\n        private int length;\r\n        private int breadth;\r\n    \r\n    }\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n    \r\n            Area rectangle = new Area(5, 6);\r\n    \r\n            int area = rectangle.length * rectangle.breadth;\r\n            System.out.println(&quot;Area: &quot; + area);\r\n        }\r\n    }\r\n\r\nNow, if you want to change `breadth` to `width` in `Area` class, you can not do it without breaking the program, unless you search and replace `rectangle.breadth` with `rectangle.width` in all the clients where `rectangle.breadth` was used (in this case `Main` class).\r\n\r\nThere are other benefits as well. For example, [Member variables cannot be overridden like methods][2]. If a class has getters and setters, it&#39;s subclass can override&#160;these methods and return what makes more sense in the context of subclass.\r\n\r\nPlease check [Why getter and setter are better than public fields in Java?][3] for more details.\r\n\r\n**P.S.** These are trivial examples, but in large scale, when program grows and frequent change requests are a reality, this makes sense.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/25752613/1772898\r\n  [2]: https://stackoverflow.com/a/9415062/1772898\r\n  [3]: https://javarevisited.blogspot.com/2012/12/getter-and-setter-method-vs-public-modifier-field-java.html","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>Encapsulation is not about secrecy, it is about <strong>reducing dependency over separate part of the application</strong>.</p>\n<p>We control dependency (loose / weak / low coupling) by hiding information over separate part of the application.</p>\n<p>Adding to <a href=\"https://stackoverflow.com/a/25752613/1772898\">Uche Dim's answer</a>, look at the following example:</p>\n<p><strong>Two Connections:</strong></p>\n<pre><code>public class Area {\n\n    // fields to calculate area\n    private int length;\n    private int breadth;\n\n    // constructor to initialize values\n    Area(int length, int breadth) {\n        this.length = length;\n        this.breadth = breadth;\n    }\n\n    public int getLength() {\n        return length;\n    }\n\n    public void setLength(int length) {\n        this.length = length;\n    }\n\n    public int getBreadth() {\n        return breadth;\n    }\n\n    public void setBreadth(int breadth) {\n        this.breadth = breadth;\n    }\n\n    public int getArea() {\n        int area = length * breadth;\n        return area;\n    }\n}\n\nclass Main {\n    public static void main(String[] args) {\n\n        Area rectangle = new Area(5, 6);\n\n        // Two Connections\n        int length = rectangle.getLength();\n        int breadth = rectangle.getBreadth();\n        int area = length * breadth;\n        System.out.println(&quot;Area: &quot; + area);\n    }\n}\n</code></pre>\n<p>Please note that in the <code>Main</code> class, we are calling two methods (<code>getLength()</code> and <code>getBreadth()</code>) of <code>Area</code> class.</p>\n<p><strong>One Connection:</strong></p>\n<pre><code>public class Area {\n\n    // fields to calculate area\n    private int length;\n    private int breadth;\n\n    // constructor to initialize values\n    Area(int length, int breadth) {\n        this.length = length;\n        this.breadth = breadth;\n    }\n\n    public int getArea() {\n        int area = length * breadth;\n        return area;\n    }\n}\n\nclass Main {\n    public static void main(String[] args) {\n\n        Area rectangle = new Area(5, 6);\n\n        // One Connection\n        int area = rectangle.getArea();\n        System.out.println(&quot;Area: &quot; + area);\n\n    }\n}\n</code></pre>\n<p>Here, in the <code>Main</code> class, we are calling one methods (<code>getArea()</code>) of <code>Area</code> class.</p>\n<p>So in the second example, the connection is weaker than the previous one (first one calling two methods or the <code>Area</code> class, second one calling one method of the <code>Area</code> class). Given, less connection (lower / weaker coupling) is better, the second example is better.</p>\n<p><strong>We should always keep fields and methods private unless necessary</strong>. In the <em>Two Connections</em> example, we made the mistake of creating the getters unnecessarily. As we have created it, the IntelliJ Idea (auto suggestion of modern IDE) suggested the developer who was working on the <code>Main</code> class that you can use the <code>getLength()</code> and <code>getBreadth()</code> methods and he did. He did not inquire further to check if there was a <code>getArea()</code> method. As a result he created stronger coupling than necessary.</p>\n<p>We should not unnecessarily create getters. We should not unnecessarily make fields public or protected. If you must, first try protected, if that does not work then make it public. That way we will have a lesser possibility of having a tighter coupling.</p>\n<p>If you still have the question &quot;what is the difference between making a field public compared to making a field private but it's getters public?&quot;, in other words &quot;Why should we use a function to get a value instead of getting it directly?&quot; Well it gives you another layer of abstraction. For example, if you need some extra processing of the data before receiving it (ex. validation), you can do it there. Moreover, once you expose internals of a class, you can not change that internal representation or make it better until making changes in all client codes. </p>\n<p>For example, suppose you did something like:</p>\n<pre><code>public class Area {\n\n    private int length;\n    private int breadth;\n\n}\n\nclass Main {\n    public static void main(String[] args) {\n\n        Area rectangle = new Area(5, 6);\n\n        int area = rectangle.length * rectangle.breadth;\n        System.out.println(&quot;Area: &quot; + area);\n    }\n}\n</code></pre>\n<p>Now, if you want to change <code>breadth</code> to <code>width</code> in <code>Area</code> class, you can not do it without breaking the program, unless you search and replace <code>rectangle.breadth</code> with <code>rectangle.width</code> in all the clients where <code>rectangle.breadth</code> was used (in this case <code>Main</code> class).</p>\n<p>There are other benefits as well. For example, <a href=\"https://stackoverflow.com/a/9415062/1772898\">Member variables cannot be overridden like methods</a>. If a class has getters and setters, it's subclass can override these methods and return what makes more sense in the context of subclass.</p>\n<p>Please check <a href=\"https://javarevisited.blogspot.com/2012/12/getter-and-setter-method-vs-public-modifier-field-java.html\" rel=\"nofollow noreferrer\">Why getter and setter are better than public fields in Java?</a> for more details.</p>\n<p><strong>P.S.</strong> These are trivial examples, but in large scale, when program grows and frequent change requests are a reality, this makes sense.</p>\n"},{"tags":[],"owner":{"account_id":15379861,"reputation":1,"user_id":11095564,"display_name":"Luigi Santagada"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674600091,"creation_date":1674576952,"answer_id":75224269,"question_id":16418571,"body_markdown":"I&#39;m OK with using get and set, to mask and make reengineering easier, but if you tell to a novice programmer that using get and set does encapsulation, as I&#39;ve seen many times, they will use set and get for internal members initialized by the constructor.\r\nAnd this 99.9 % is wrong!!!!!\r\n\r\n    private uint8_t myvar = 0;\r\n    \r\n    setMyVar(uint8_t value){ \r\n    this.myvar = value * (20 / 41);\r\n    }\r\n    uint8_t  getMyVar(){\r\n    return this. myvar  ;\r\n    }\r\n\r\nThat’s for me is ok,   but I think encapsulation is a method first, rather than get and set.\r\nMy inglish is not very well,but I think that this article says something like this.\r\n\r\n\r\n[1]: https://martinfowler.com/bliki/SelfEncapsulation.html","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>I'm OK with using get and set, to mask and make reengineering easier, but if you tell to a novice programmer that using get and set does encapsulation, as I've seen many times, they will use set and get for internal members initialized by the constructor.\nAnd this 99.9 % is wrong!!!!!</p>\n<pre><code>private uint8_t myvar = 0;\n\nsetMyVar(uint8_t value){ \nthis.myvar = value * (20 / 41);\n}\nuint8_t  getMyVar(){\nreturn this. myvar  ;\n}\n</code></pre>\n<p>That’s for me is ok,   but I think encapsulation is a method first, rather than get and set.\nMy inglish is not very well,but I think that this article says something like this.</p>\n"}],"owner":{"account_id":902001,"reputation":39942,"user_id":937892,"accept_rate":63,"display_name":"PSR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41805,"favorite_count":0,"down_vote_count":1,"up_vote_count":35,"accepted_answer_id":16418617,"answer_count":17,"score":34,"last_activity_date":1674600091,"creation_date":1367928213,"question_id":16418571,"body_markdown":"I try to understand a lot of times but I failed to understand this.\r\n\r\n&gt; Encapsulation is the technique of making the fields in a class private\r\n&gt; and providing access to the fields via public methods. If a field is\r\n&gt; declared private, it cannot be accessed by anyone outside the class,\r\n&gt; thereby hiding the fields within the class.\r\n\r\nHow can we change the values of fields through setter methods? How do we prevent accessing the fields directly? What is the real use of encapsulation?","title":"What is the use of encapsulation when I&#39;m able to change the property values with setter methods?","body":"<p>I try to understand a lot of times but I failed to understand this.</p>\n\n<blockquote>\n  <p>Encapsulation is the technique of making the fields in a class private\n  and providing access to the fields via public methods. If a field is\n  declared private, it cannot be accessed by anyone outside the class,\n  thereby hiding the fields within the class.</p>\n</blockquote>\n\n<p>How can we change the values of fields through setter methods? How do we prevent accessing the fields directly? What is the real use of encapsulation?</p>\n"},{"tags":["java","multithreading","swing","animation","paint"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":4,"creation_date":1511465684,"post_id":47461863,"comment_id":81879366,"body_markdown":"`So I have to store each square object in the ArrayList.` - good. `However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show` - you need to iterate through the ArrayList to paint each square. So instead of having multiple panels each painting a single square, you need one panel that paints all the squares. Check out: https://stackoverflow.com/questions/42358359/how-do-i-paint-multiple-objetcs-that-move-at-different-speeds-in-java/42358637#42358637 for a working example.","body":"<code>So I have to store each square object in the ArrayList.</code> - good. <code>However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show</code> - you need to iterate through the ArrayList to paint each square. So instead of having multiple panels each painting a single square, you need one panel that paints all the squares. Check out: <a href=\"https://stackoverflow.com/questions/42358359/how-do-i-paint-multiple-objetcs-that-move-at-different-speeds-in-java/42358637#42358637\" title=\"how do i paint multiple objetcs that move at different speeds in java\">stackoverflow.com/questions/42358359/&hellip;</a> for a working example."}],"answers":[{"comments":[{"owner":{"account_id":6000092,"reputation":382,"user_id":6654419,"accept_rate":56,"display_name":"rawsly"},"score":0,"creation_date":1511472468,"post_id":47463194,"comment_id":81881648,"body_markdown":"Thanks for your revealing answer! I am gonna work on that more. There are still couple things that I have to figure out. But I think I will be able to handle within time.","body":"Thanks for your revealing answer! I am gonna work on that more. There are still couple things that I have to figure out. But I think I will be able to handle within time."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1511472760,"post_id":47463194,"comment_id":81881739,"body_markdown":"Best of luck and remember, have fun ;)","body":"Best of luck and remember, have fun ;)"}],"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674599928,"creation_date":1511470810,"answer_id":47463194,"question_id":47461863,"body_markdown":"So, starting with...\r\n\r\n    public class DrawSquare extends JPanel {\r\n        public Square square;\r\n        public DrawSquare() {\r\n            square = new Square();\r\n        }\r\n    \r\n        @Override\r\n        public void paintComponents(Graphics g) {\r\n            // TODO Auto-generated method stub\r\n            super.paintComponents(g);\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void paint(Graphics g) {\r\n            // TODO Auto-generated method stub\r\n            super.paint(g);\r\n    \r\n            g.setColor(square.getC());\r\n            g.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\r\n        }\r\n    }\r\n\r\nAs general recommendation, it&#39;s preferred to put custom painting in the `paintComponent` method (note, there&#39;s no `s` at the end)\r\n\r\nWhen `paint` is called, the `Graphics` context has already been translated to the component coordinate position.  This means that `0x0` is the top/left corner of the component, this also means that...\r\n\r\n    g.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\r\n\r\nis painting the rect at `x + x` x `y + y`, which will, at the very least, paint the rect in the wrong position, at worst paint it beyond the visible scope of the component.\r\n\r\nYou&#39;re also not providing any sizing hints for the component, so it&#39;s default size will be `0x0`, which prevent it from been painted.\r\n\r\n&gt; Since I am using multi thread I assume I have to control each squares. \r\n\r\nWell, since I can&#39;t really see what&#39;s driving the animation, I imagine that when you say &quot;multi thread&quot; you&#39;re suggesting that each square has it&#39;s own `Thread`.  In this case, that&#39;s a bad idea. Let&#39;s put aside the thread synchronisation issues for a moment, more threads doesn&#39;t equate to more work you can do, at some point, it will begin to degrade the system performance.\r\n\r\nIn most cases, a single, well managed thread, is all you really need.  You also have to understand that Swing is NOT thread safe.  This means that you shouldn&#39;t update the UI (or states that the UI relies on) from outside the context of the Event Dispatching Thread.\r\n\r\nSo, while you&#39;re thread can update the position of the rects, you need to take care to ensure that they are not been painted while they are been update. Once you&#39;ve updated the state, you then need to trigger a paint pass (which is trivial in of itself)\r\n\r\n&gt; So I have to store each square object in the ArrayList.\r\n\r\nYep, good start\r\n\r\n&gt; However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show.\r\n\r\nOkay, so instead of using multiple components, use one.  Run through your `ArrayList` within the `paintComponent` method of this component and paint all the rects to it.  This provides a much simpler way to manage things like bounds detection, as you have only one container to worry about.\r\n\r\nI&#39;d highly recommend you have a look at:\r\n\r\n- https://stackoverflow.com/questions/13022754/java-bouncing-ball which demonstrates many of the concepts discussed here\r\n- [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)\r\n- [How to use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)\r\n- [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)\r\n- [Painting in AWT and Swing](http://www.oracle.com/technetwork/java/painting-140037.html)","title":"Java Drawing Multiple Squares in Same JFrame","body":"<p>So, starting with...</p>\n<pre><code>public class DrawSquare extends JPanel {\n    public Square square;\n    public DrawSquare() {\n        square = new Square();\n    }\n\n    @Override\n    public void paintComponents(Graphics g) {\n        // TODO Auto-generated method stub\n        super.paintComponents(g);\n\n    }\n\n    @Override\n    public void paint(Graphics g) {\n        // TODO Auto-generated method stub\n        super.paint(g);\n\n        g.setColor(square.getC());\n        g.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\n    }\n}\n</code></pre>\n<p>As general recommendation, it's preferred to put custom painting in the <code>paintComponent</code> method (note, there's no <code>s</code> at the end)</p>\n<p>When <code>paint</code> is called, the <code>Graphics</code> context has already been translated to the component coordinate position.  This means that <code>0x0</code> is the top/left corner of the component, this also means that...</p>\n<pre><code>g.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\n</code></pre>\n<p>is painting the rect at <code>x + x</code> x <code>y + y</code>, which will, at the very least, paint the rect in the wrong position, at worst paint it beyond the visible scope of the component.</p>\n<p>You're also not providing any sizing hints for the component, so it's default size will be <code>0x0</code>, which prevent it from been painted.</p>\n<blockquote>\n<p>Since I am using multi thread I assume I have to control each squares.</p>\n</blockquote>\n<p>Well, since I can't really see what's driving the animation, I imagine that when you say &quot;multi thread&quot; you're suggesting that each square has it's own <code>Thread</code>.  In this case, that's a bad idea. Let's put aside the thread synchronisation issues for a moment, more threads doesn't equate to more work you can do, at some point, it will begin to degrade the system performance.</p>\n<p>In most cases, a single, well managed thread, is all you really need.  You also have to understand that Swing is NOT thread safe.  This means that you shouldn't update the UI (or states that the UI relies on) from outside the context of the Event Dispatching Thread.</p>\n<p>So, while you're thread can update the position of the rects, you need to take care to ensure that they are not been painted while they are been update. Once you've updated the state, you then need to trigger a paint pass (which is trivial in of itself)</p>\n<blockquote>\n<p>So I have to store each square object in the ArrayList.</p>\n</blockquote>\n<p>Yep, good start</p>\n<blockquote>\n<p>However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show.</p>\n</blockquote>\n<p>Okay, so instead of using multiple components, use one.  Run through your <code>ArrayList</code> within the <code>paintComponent</code> method of this component and paint all the rects to it.  This provides a much simpler way to manage things like bounds detection, as you have only one container to worry about.</p>\n<p>I'd highly recommend you have a look at:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13022754/java-bouncing-ball\">Java Bouncing Ball</a> which demonstrates many of the concepts discussed here</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to use Swing Timers</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/painting-140037.html\" rel=\"nofollow noreferrer\">Painting in AWT and Swing</a></li>\n</ul>\n"}],"owner":{"account_id":6000092,"reputation":382,"user_id":6654419,"accept_rate":56,"display_name":"rawsly"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1563,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47463194,"answer_count":1,"score":0,"last_activity_date":1674599928,"creation_date":1511463160,"question_id":47461863,"body_markdown":"I am trying to make an animation with multiple thread. I want to paint *n* squares where this *n* comes from commend-line argument. Every square has their x-y coordinates, colors and speed. They are moving to the right of the frame with different speed, color and coordinates. Since I am using multi thread I assume I have to control each squares. So I have to store each square object in the ArrayList. However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show. Here what I have done so far:\r\n\r\n**DrawSquare.java**\r\n\r\n    import java.awt.Graphics;\r\n\timport javax.swing.JPanel;\r\n\t\r\n\tpublic class DrawSquare extends JPanel {\r\n\t\tpublic Square square;\r\n\t\tpublic DrawSquare() {\r\n\t\t\tsquare = new Square();\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void paintComponents(Graphics g) {\r\n\t\t\t// TODO Auto-generated method stub\r\n\t\t\tsuper.paintComponents(g);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void paint(Graphics g) {\r\n\t\t\t// TODO Auto-generated method stub\r\n\t\t\tsuper.paint(g);\r\n\t\t\t\r\n\t\t\tg.setColor(square.getC());\r\n\t\t\tg.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\r\n\t\t}\r\n\t}\r\n\r\n**Square.java**\r\n    \r\n    import java.awt.Color;\r\n\timport java.util.Random;\r\n\t\r\n\tpublic class Square {\r\n\t\tprivate int x,y,r,s;\r\n\t\tprivate Color c;\r\n\t\tprivate Random random;\r\n\t\r\n\t\tpublic Square() {\r\n\t\t\trandom = new Random();\r\n\t\t\tx = random.nextInt(100) + 30;\r\n\t\t\ty = random.nextInt(100) + 30;\r\n\t\t\tr = random.nextInt(50) + 20;\r\n\t\t\ts = random.nextInt(20) + 5;\r\n\t\t\tc = new Color(random.nextInt(255),random.nextInt(255),random.nextInt(255));\r\n\t\t}\r\n\t\r\n\t\tpublic int getX() {\r\n\t\t\treturn x;\r\n\t\t}\r\n\t\r\n\t\tpublic int getY() {\r\n\t\t\treturn y;\r\n\t\t}\r\n\t\r\n\t\tpublic int getR() {\r\n\t\t\treturn r;\r\n\t\t}\r\n\t\r\n\t\tpublic int getS() {\r\n\t\t\treturn s;\r\n\t\t}\r\n\t\r\n\t\tpublic Color getC() {\r\n\t\t\treturn c;\r\n\t\t}\r\n\t}\r\n\r\n\r\n**Animation.java**\r\n\r\n    import java.awt.BorderLayout;\r\n\t\r\n\timport javax.swing.JFrame;\r\n\timport javax.swing.JPanel;\r\n\r\n\tpublic class Animation extends JFrame implements Runnable {\r\n\t\tprivate JPanel panel;\r\n\t\tprivate DrawSquare square;\r\n\t\t\r\n\t\tpublic Animation() {\r\n\t\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tAnimation w = new Animation();\r\n\t\t\tDrawSquare square = new DrawSquare();\r\n\t\t\tJFrame f = new JFrame(&quot;Week 9&quot;);\r\n\t\t\tint n = Integer.parseInt(args[0]);\r\n\t\t\tf.setVisible(true);\r\n\t\t\tf.setSize(700,700);\r\n\t\t\tf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tf.setResizable(false);\r\n\t\t\tfor(int i=0; i&lt;n; i++) {\r\n\t\t\t\tf.getContentPane().add(square);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void run() {\r\n\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n","title":"Java Drawing Multiple Squares in Same JFrame","body":"<p>I am trying to make an animation with multiple thread. I want to paint <em>n</em> squares where this <em>n</em> comes from commend-line argument. Every square has their x-y coordinates, colors and speed. They are moving to the right of the frame with different speed, color and coordinates. Since I am using multi thread I assume I have to control each squares. So I have to store each square object in the ArrayList. However, I am having trouble with painting those squares. I can paint one square but when I try to paint multiple squares, it does not show. Here what I have done so far:</p>\n\n<p><strong>DrawSquare.java</strong></p>\n\n<pre><code>import java.awt.Graphics;\nimport javax.swing.JPanel;\n\npublic class DrawSquare extends JPanel {\n    public Square square;\n    public DrawSquare() {\n        square = new Square();\n    }\n\n    @Override\n    public void paintComponents(Graphics g) {\n        // TODO Auto-generated method stub\n        super.paintComponents(g);\n\n    }\n\n    @Override\n    public void paint(Graphics g) {\n        // TODO Auto-generated method stub\n        super.paint(g);\n\n        g.setColor(square.getC());\n        g.fillRect(square.getX(), square.getY(), square.getR(), square.getR());\n    }\n}\n</code></pre>\n\n<p><strong>Square.java</strong></p>\n\n<pre><code>import java.awt.Color;\nimport java.util.Random;\n\npublic class Square {\n    private int x,y,r,s;\n    private Color c;\n    private Random random;\n\n    public Square() {\n        random = new Random();\n        x = random.nextInt(100) + 30;\n        y = random.nextInt(100) + 30;\n        r = random.nextInt(50) + 20;\n        s = random.nextInt(20) + 5;\n        c = new Color(random.nextInt(255),random.nextInt(255),random.nextInt(255));\n    }\n\n    public int getX() {\n        return x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    public int getR() {\n        return r;\n    }\n\n    public int getS() {\n        return s;\n    }\n\n    public Color getC() {\n        return c;\n    }\n}\n</code></pre>\n\n<p><strong>Animation.java</strong></p>\n\n<pre><code>import java.awt.BorderLayout;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class Animation extends JFrame implements Runnable {\n    private JPanel panel;\n    private DrawSquare square;\n\n    public Animation() {\n\n    }\n\n    public static void main(String[] args) {\n        Animation w = new Animation();\n        DrawSquare square = new DrawSquare();\n        JFrame f = new JFrame(\"Week 9\");\n        int n = Integer.parseInt(args[0]);\n        f.setVisible(true);\n        f.setSize(700,700);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.setResizable(false);\n        for(int i=0; i&lt;n; i++) {\n            f.getContentPane().add(square);\n        }\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc","intellij-idea","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1674620066,"post_id":75227923,"comment_id":132751334,"body_markdown":"`cell.getStringCellValue()` only works if the cell contains a string, else it throws exception. So your program breaks on second row at the cell having numeric content 1. See https://poi.apache.org/components/spreadsheet/quick-guide.html#CellContents for how to get cell contents properly.","body":"<code>cell.getStringCellValue()</code> only works if the cell contains a string, else it throws exception. So your program breaks on second row at the cell having numeric content 1. See <a href=\"https://poi.apache.org/components/spreadsheet/quick-guide.html#CellContents\" rel=\"nofollow noreferrer\">poi.apache.org/components/spreadsheet/&hellip;</a> for how to get cell contents properly."},{"owner":{"account_id":17303066,"reputation":187,"user_id":12532393,"display_name":"Anant Doshi"},"score":0,"creation_date":1675964355,"post_id":75227923,"comment_id":133045896,"body_markdown":"Try to for loop using sheet.getLastRow()","body":"Try to for loop using sheet.getLastRow()"}],"owner":{"account_id":27613488,"reputation":1,"user_id":21076073,"display_name":"FrancoRuiz48"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674599209,"creation_date":1674599209,"question_id":75227923,"body_markdown":"\r\nI have created this code to read the contents of excel files using Apache POI. I am using Intellij Idea as editor but when i ran the code i have a problem: only read the first row and not the rest. What&#39;s the problem? The content of excel is the following:\r\n \r\n\r\nMy dependencies with Maven:\r\n\r\n\r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\n\r\n```\r\npackage com.ferreteria.ferreteria;\r\n\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.util.Iterator;\r\n\r\nimport org.apache.poi.ss.usermodel.*;\r\n\r\npublic class ExcelService {\r\n\r\n    public static void leer() {\r\n        String nombreArchivo = &quot;Libro1.xlsx&quot;;\r\n        String rutaArchivo = &quot;C:\\\\Users\\\\54261\\\\Downloads\\\\&quot; + nombreArchivo;\r\n\r\n        try (FileInputStream file = new FileInputStream(new File(rutaArchivo))) {\r\n            // leer archivo excel\r\n            Workbook worbook = WorkbookFactory.create(file);\r\n\r\n            //obtener la hoja que se va leer\r\n            Sheet sheet = worbook.getSheetAt(0);\r\n            //obtener todas las filas de la hoja excel\r\n            Iterator&lt;Row&gt; rowIterator = sheet.rowIterator();\r\n\r\n            Row row;\r\n\r\n            // se recorre cada fila hasta el final\r\n            while (rowIterator.hasNext()) {\r\n                row = rowIterator.next();\r\n                //se obtiene las celdas por fila\r\n                Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n                Cell cell;\r\n\r\n                //se recorre cada celda\r\n                while (cellIterator.hasNext()) {\r\n                    // se obtiene la celda en espec&#237;fico y se la imprime\r\n                    cell = cellIterator.next();\r\n                    System.out.print(cell.getStringCellValue()+&quot; | &quot;);\r\n\r\n                }\r\n                System.out.println();\r\n            }\r\n        } catch (Exception e) {\r\n            e.getMessage();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n[Excel with data](https://i.stack.imgur.com/ujvLB.png)\r\n\r\nThe result was:\r\n[enter image description here](https://i.stack.imgur.com/nlVNB.png)\r\n\r\n\r\nI&#39;m trying to read all the excel file","title":"Cannot read all the rows of Excel with Spring MVC using Apache POI","body":"<p>I have created this code to read the contents of excel files using Apache POI. I am using Intellij Idea as editor but when i ran the code i have a problem: only read the first row and not the rest. What's the problem? The content of excel is the following:</p>\n<p>My dependencies with Maven:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<pre><code>package com.ferreteria.ferreteria;\n\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.util.Iterator;\n\nimport org.apache.poi.ss.usermodel.*;\n\npublic class ExcelService {\n\n    public static void leer() {\n        String nombreArchivo = &quot;Libro1.xlsx&quot;;\n        String rutaArchivo = &quot;C:\\\\Users\\\\54261\\\\Downloads\\\\&quot; + nombreArchivo;\n\n        try (FileInputStream file = new FileInputStream(new File(rutaArchivo))) {\n            // leer archivo excel\n            Workbook worbook = WorkbookFactory.create(file);\n\n            //obtener la hoja que se va leer\n            Sheet sheet = worbook.getSheetAt(0);\n            //obtener todas las filas de la hoja excel\n            Iterator&lt;Row&gt; rowIterator = sheet.rowIterator();\n\n            Row row;\n\n            // se recorre cada fila hasta el final\n            while (rowIterator.hasNext()) {\n                row = rowIterator.next();\n                //se obtiene las celdas por fila\n                Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n                Cell cell;\n\n                //se recorre cada celda\n                while (cellIterator.hasNext()) {\n                    // se obtiene la celda en específico y se la imprime\n                    cell = cellIterator.next();\n                    System.out.print(cell.getStringCellValue()+&quot; | &quot;);\n\n                }\n                System.out.println();\n            }\n        } catch (Exception e) {\n            e.getMessage();\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ujvLB.png\" rel=\"nofollow noreferrer\">Excel with data</a></p>\n<p>The result was:\n<a href=\"https://i.stack.imgur.com/nlVNB.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I'm trying to read all the excel file</p>\n"},{"tags":["java","linux","web-applications","applet"],"answers":[{"comments":[{"owner":{"display_name":"user283491"},"score":0,"creation_date":1267492361,"post_id":2354927,"comment_id":2335089,"body_markdown":"thanks. i will look more into JSON. the solution you suggested is almost what i need.","body":"thanks. i will look more into JSON. the solution you suggested is almost what i need."}],"tags":[],"owner":{"account_id":7412,"reputation":236654,"user_id":12870,"accept_rate":63,"display_name":"Oli"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267437025,"creation_date":1267437025,"answer_id":2354927,"question_id":2354872,"body_markdown":"These are how I thought of doing this, in order of complexity ***for me***:\r\n\r\n 1. Create a simple server-side-language (PHP/Python) website that can communicate with (ie launch and process the return of) your application\r\n\r\n 2. Modify your application to have a built-in webserver that just punched out HTML (command line parameters taken through the URL)\r\n\r\n 3. Modify the app to publish JSON and use javascript on a simple HTML page to pull it in.\r\n\r\nYou could write a Java applet (as you&#39;ve tagged this thread) but *I* think you&#39;d be wasting time. This can be quite simple if you&#39;re willing to spend 10 minutes looking up a few simple commands.","title":"web-browser based GUI","body":"<p>These are how I thought of doing this, in order of complexity <strong><em>for me</em></strong>:</p>\n\n<ol>\n<li><p>Create a simple server-side-language (PHP/Python) website that can communicate with (ie launch and process the return of) your application</p></li>\n<li><p>Modify your application to have a built-in webserver that just punched out HTML (command line parameters taken through the URL)</p></li>\n<li><p>Modify the app to publish JSON and use javascript on a simple HTML page to pull it in.</p></li>\n</ol>\n\n<p>You could write a Java applet (as you've tagged this thread) but <em>I</em> think you'd be wasting time. This can be quite simple if you're willing to spend 10 minutes looking up a few simple commands.</p>\n"},{"comments":[{"owner":{"display_name":"user283491"},"score":0,"creation_date":1267492251,"post_id":2355092,"comment_id":2335077,"body_markdown":"thanks for explaining in detail. i m not sure how much program size will increase with embedding the webserver or adding package but i will give this one a try.","body":"thanks for explaining in detail. i m not sure how much program size will increase with embedding the webserver or adding package but i will give this one a try."}],"tags":[],"owner":{"account_id":83981,"reputation":31313,"user_id":235058,"accept_rate":70,"display_name":"Roland Bouman"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1267438824,"creation_date":1267438824,"answer_id":2355092,"question_id":2354872,"body_markdown":"I would start by setting up a regular HTTP server, like lighttp or Apache httpd. \r\n\r\nYou say you already have a command line program that does the actual work - As a first step, I would reuse that, and configure the web server to call your program using CGI - see forexample [http://httpd.apache.org/docs/2.2/howto/cgi.html][1] for apache\r\n\r\nFinally, I&#39;d pick some javascript framework like jQuery or YUI with Ajax capabilities to do requests to the server to call the CGI script from within a webpage. You could also create a form-based web application without ajax or any framework, but that would require you to stuff all kinds of logic in your program to generate HTML pages. By using Ajax, you can leave the command line application as is, and parse any responses it gives with javascript, and then use that to dynamically change the webpage in a way that would make sense to the user.\r\n\r\nIf this all works, then I would try to figure out how to package all these components. Perhaps you just want to create a simple archive with all the programs inside, or maybe you want to go as far as actually embedding the webserver in your program. Alternatively, you may want to do it the other way around and rewrite your program as an ISAPI module that you can plug into your webserver. Or if that&#39;s not integrated enough still you could write your own (partial) HTTP server. That&#39;s really up to you (I&#39;d probably spend time and energy on searching for the leanest, meanest existing open source http serverr and use that instead)\r\n\r\nAt any rate, the prior steps won&#39;t be lost work. Most likely, developing the web page is going form a substantial part of the work, so I would probably create a quick and dirty working solution first using the age-old CGI trick, and then develop the webpage to my satisfaction. At that point you can already have an acceptable distributable solution by simply putting all programs in a single archive (of course you would have to tweak the webserver&#39;s configuration too, like changing the default port so it won&#39;t interfere with existing webservers.) Only after that I would spend time on creating a more integrated fancy solution.\r\n\r\n\r\n  [1]: http://httpd.apache.org/docs/2.2/howto/cgi.html","title":"web-browser based GUI","body":"<p>I would start by setting up a regular HTTP server, like lighttp or Apache httpd. </p>\n\n<p>You say you already have a command line program that does the actual work - As a first step, I would reuse that, and configure the web server to call your program using CGI - see forexample <a href=\"http://httpd.apache.org/docs/2.2/howto/cgi.html\" rel=\"nofollow noreferrer\">http://httpd.apache.org/docs/2.2/howto/cgi.html</a> for apache</p>\n\n<p>Finally, I'd pick some javascript framework like jQuery or YUI with Ajax capabilities to do requests to the server to call the CGI script from within a webpage. You could also create a form-based web application without ajax or any framework, but that would require you to stuff all kinds of logic in your program to generate HTML pages. By using Ajax, you can leave the command line application as is, and parse any responses it gives with javascript, and then use that to dynamically change the webpage in a way that would make sense to the user.</p>\n\n<p>If this all works, then I would try to figure out how to package all these components. Perhaps you just want to create a simple archive with all the programs inside, or maybe you want to go as far as actually embedding the webserver in your program. Alternatively, you may want to do it the other way around and rewrite your program as an ISAPI module that you can plug into your webserver. Or if that's not integrated enough still you could write your own (partial) HTTP server. That's really up to you (I'd probably spend time and energy on searching for the leanest, meanest existing open source http serverr and use that instead)</p>\n\n<p>At any rate, the prior steps won't be lost work. Most likely, developing the web page is going form a substantial part of the work, so I would probably create a quick and dirty working solution first using the age-old CGI trick, and then develop the webpage to my satisfaction. At that point you can already have an acceptable distributable solution by simply putting all programs in a single archive (of course you would have to tweak the webserver's configuration too, like changing the default port so it won't interfere with existing webservers.) Only after that I would spend time on creating a more integrated fancy solution.</p>\n"},{"comments":[{"owner":{"account_id":242372,"reputation":23523,"user_id":513838,"accept_rate":100,"display_name":"jzd"},"score":0,"creation_date":1294414389,"post_id":4622934,"comment_id":5089477,"body_markdown":"Are you the OP, this is a different account?","body":"Are you the OP, this is a different account?"}],"tags":[],"owner":{"account_id":274324,"reputation":11,"user_id":566480,"display_name":"user566480"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1294380503,"creation_date":1294380503,"answer_id":4622934,"question_id":2354872,"body_markdown":"I ended up using Wt though I&#39;d update for future reference. ","title":"web-browser based GUI","body":"<p>I ended up using Wt though I'd update for future reference. </p>\n"},{"tags":[],"owner":{"account_id":26683053,"reputation":230,"user_id":20292772,"display_name":"Albert Shown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674599070,"creation_date":1674599070,"answer_id":75227907,"question_id":2354872,"body_markdown":"After 12 years, web browser-based GUI started to appear, [WebUI][1] is one of them.\r\n\r\n\r\n  [1]: https://github.com/alifcommunity/webui","title":"web-browser based GUI","body":"<p>After 12 years, web browser-based GUI started to appear, <a href=\"https://github.com/alifcommunity/webui\" rel=\"nofollow noreferrer\">WebUI</a> is one of them.</p>\n"}],"owner":{"display_name":"user283491"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2609,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":2355092,"answer_count":4,"score":1,"last_activity_date":1674599070,"creation_date":1267436293,"question_id":2354872,"body_markdown":"I am working on an application in Linux which will interfaces with hardware. One of the requirements is to create the GUI in Web-browser . the application will be c++ based. I m not familiar with web realted stuff so i want to know Is it possible to do such a thing (currently it&#39;s a console application take input from txt file/cmd line). gui will be simple using button and showing output messages on browser from the application. i want to know which technologies/languages are involved and how can it be done. some of the idea i read but havn&#39;t found anything concrete yet. if u have any idea about these or a better suggestion please share\r\n\r\n- run the app in background and communicate with browser ? \r\n- call library functions directly from browser ?\r\n\r\nany other idea ?\r\n","title":"web-browser based GUI","body":"<p>I am working on an application in Linux which will interfaces with hardware. One of the requirements is to create the GUI in Web-browser . the application will be c++ based. I m not familiar with web realted stuff so i want to know Is it possible to do such a thing (currently it's a console application take input from txt file/cmd line). gui will be simple using button and showing output messages on browser from the application. i want to know which technologies/languages are involved and how can it be done. some of the idea i read but havn't found anything concrete yet. if u have any idea about these or a better suggestion please share</p>\n\n<ul>\n<li>run the app in background and communicate with browser ? </li>\n<li>call library functions directly from browser ?</li>\n</ul>\n\n<p>any other idea ?</p>\n"},{"tags":["java","methods","static"],"answers":[{"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1674597504,"post_id":75227637,"comment_id":132747671,"body_markdown":"&quot;_create an instance of the containing class_&quot; - as a complete beginner I remember it took me a while for this concept (and its wider implications) to really sink in.","body":"&quot;<i>create an instance of the containing class</i>&quot; - as a complete beginner I remember it took me a while for this concept (and its wider implications) to really sink in."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674597879,"creation_date":1674596907,"answer_id":75227637,"question_id":75227499,"body_markdown":"Remove the static keyword from your methods and instance fields.  But to call them from within `main` you need to create an `instance` of the containing class (in this case the one that contains the `main` method) and use that to call the other methods.  What I do sometimes is to create an instance method (i.e. non-static) and call that to start the process.  Then everything that would be in main I would put in that method.  Here is an example.\r\n```\r\n    public static void main(String[] args) {\r\n        MatrixRefill mr = new MatrixRefill();\r\n        mr.start();\r\n    }\r\n    public void start() {\r\n        target = args[2];\r\n        rows = Integer.parseInt(args[1].substring(0,1));\r\n        cols = Integer.parseInt(args[1].substring(2));\r\n        matrix = matrixCreator(args[0]);\r\n        enemy = matrix[rows][cols];\r\n        recursive(rows, cols, target);\r\n        printer(matrix);\r\n    }\r\n    // rest of code here\r\n}\r\n```\r\nBy putting what was in `main` in the `start` method you can call the other instance methods and access instance fields without qualifying them with a reference to the class (i.e. in this case prefixing with `mr.`)\r\n","title":"How do I avoid making methods and variables static in this code?","body":"<p>Remove the static keyword from your methods and instance fields.  But to call them from within <code>main</code> you need to create an <code>instance</code> of the containing class (in this case the one that contains the <code>main</code> method) and use that to call the other methods.  What I do sometimes is to create an instance method (i.e. non-static) and call that to start the process.  Then everything that would be in main I would put in that method.  Here is an example.</p>\n<pre><code>    public static void main(String[] args) {\n        MatrixRefill mr = new MatrixRefill();\n        mr.start();\n    }\n    public void start() {\n        target = args[2];\n        rows = Integer.parseInt(args[1].substring(0,1));\n        cols = Integer.parseInt(args[1].substring(2));\n        matrix = matrixCreator(args[0]);\n        enemy = matrix[rows][cols];\n        recursive(rows, cols, target);\n        printer(matrix);\n    }\n    // rest of code here\n}\n</code></pre>\n<p>By putting what was in <code>main</code> in the <code>start</code> method you can call the other instance methods and access instance fields without qualifying them with a reference to the class (i.e. in this case prefixing with <code>mr.</code>)</p>\n"}],"owner":{"account_id":26491591,"reputation":27,"user_id":20129821,"display_name":"Arson1st"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75227637,"answer_count":1,"score":0,"last_activity_date":1674597879,"creation_date":1674595957,"question_id":75227499,"body_markdown":" I was solving past exams for my java class and I&#39;m struggling with one of them. I keep getting wrong result and I think its because all of classes and instance variables are static. How do I avoid making them static? Also this question basically wants you to find same letters of the location given in args[1] and convert them to the &quot;S&quot; if they are near of the given location (Args are &quot;K,K,K,Y-K,Y,M,M-K,Y,Y,Y 2,1 S&quot; if you need) \r\n\r\n    public class MatrixRefill {\r\n    \tpublic static String[][] matrix;\r\n    \tpublic static int rows;\r\n    \tpublic static int cols;\r\n    \tpublic static String enemy;      \r\n    \tpublic static String target;        \r\n    \tpublic static void main(String[] args) {\r\n    \t\ttarget = args[2];\r\n    \t\trows = Integer.parseInt(args[1].substring(0,1));\r\n    \t\tcols = Integer.parseInt(args[1].substring(2));\r\n    \t\tmatrix = matrixCreator(args[0]);\r\n    \t\tenemy = matrix[rows][cols];\r\n    \t\trecursive(rows, cols, target);\r\n    \t\tprinter(matrix);\r\n    \t}\r\n    \tpublic static String[][] matrixCreator(String mx) {\r\n    \t\tint ro = 0;\r\n    \t\tint co = 0;\r\n    \t\tfor (int i = 0; i &lt; mx.length(); i++) {\r\n    \t\t\tif (mx.substring(i,i+1).equals(&quot;,&quot;))\r\n    \t\t\t\tco++;\r\n    \t\t\tif (mx.substring(i,i+1).equals(&quot;-&quot;))\r\n    \t\t\t\tro++;\r\n    \t\t}\r\n    \t\tString[][] matriks = new String[ro+1][co/3+1];\r\n    \t\tro = 0;\r\n    \t\tco = 0;\r\n    \t\tfor (int j = 0; j &lt; mx.length(); j++) {\r\n    \t\t\tif (mx.substring(j,j+1).equals(&quot;,&quot;))\r\n    \t\t\t\tco++;\r\n    \t\t\telse if (mx.substring(j,j+1).equals(&quot;-&quot;)) {\r\n    \t\t\t\tro++;\r\n    \t\t\t\tco = 0;\r\n    \t\t\t}\r\n    \t\t\telse\r\n    \t\t\t\tmatriks[ro][co] = mx.substring(j,j+1);\r\n    \t\t}\r\n    \t\treturn matriks;\r\n    \t}\t\r\n    \tpublic static void recursive(int row, int col, String target) {\r\n    \t\tif (valid(row,col)) {\r\n    \t\t\trecursive(row+1,col, target);\r\n    \t\t\trecursive(row,col+1, target);\r\n    \t\t\trecursive(row,col-1, target);\r\n    \t\t\trecursive(row-1,col, target);\r\n    \t\t\tmatrix[row][col] = target;\r\n    \t\t}\r\n    \t}\r\n    \tpublic static boolean valid(int row, int col) {\r\n    \t\tboolean result = false;\r\n    \t\tif (row &gt;= 0 &amp;&amp; row &lt; matrix.length &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; matrix[row].length)\r\n    \t\t\tif (matrix[row][col] == enemy)\r\n    \t\t\t\tresult = true;\r\n    \t\treturn result;\r\n    \t}\r\n    \tpublic static void printer(String[][] owo) {\r\n    \t\tfor(int i = 0; i &lt; owo.length; i++) {\r\n    \t\t    for(int j = 0; j &lt; owo[i].length; j++) {\r\n    \t\t        System.out.print(owo[i][j]);\r\n    \t\t        if(j &lt; owo[i].length - 1)\r\n    \t\t        \tSystem.out.print(&quot; &quot;);\r\n    \t\t    }\r\n    \t\t    System.out.println();\r\n    \t\t}\r\n    \t}\t\r\n    }","title":"How do I avoid making methods and variables static in this code?","body":"<p>I was solving past exams for my java class and I'm struggling with one of them. I keep getting wrong result and I think its because all of classes and instance variables are static. How do I avoid making them static? Also this question basically wants you to find same letters of the location given in args[1] and convert them to the &quot;S&quot; if they are near of the given location (Args are &quot;K,K,K,Y-K,Y,M,M-K,Y,Y,Y 2,1 S&quot; if you need)</p>\n<pre><code>public class MatrixRefill {\n    public static String[][] matrix;\n    public static int rows;\n    public static int cols;\n    public static String enemy;      \n    public static String target;        \n    public static void main(String[] args) {\n        target = args[2];\n        rows = Integer.parseInt(args[1].substring(0,1));\n        cols = Integer.parseInt(args[1].substring(2));\n        matrix = matrixCreator(args[0]);\n        enemy = matrix[rows][cols];\n        recursive(rows, cols, target);\n        printer(matrix);\n    }\n    public static String[][] matrixCreator(String mx) {\n        int ro = 0;\n        int co = 0;\n        for (int i = 0; i &lt; mx.length(); i++) {\n            if (mx.substring(i,i+1).equals(&quot;,&quot;))\n                co++;\n            if (mx.substring(i,i+1).equals(&quot;-&quot;))\n                ro++;\n        }\n        String[][] matriks = new String[ro+1][co/3+1];\n        ro = 0;\n        co = 0;\n        for (int j = 0; j &lt; mx.length(); j++) {\n            if (mx.substring(j,j+1).equals(&quot;,&quot;))\n                co++;\n            else if (mx.substring(j,j+1).equals(&quot;-&quot;)) {\n                ro++;\n                co = 0;\n            }\n            else\n                matriks[ro][co] = mx.substring(j,j+1);\n        }\n        return matriks;\n    }   \n    public static void recursive(int row, int col, String target) {\n        if (valid(row,col)) {\n            recursive(row+1,col, target);\n            recursive(row,col+1, target);\n            recursive(row,col-1, target);\n            recursive(row-1,col, target);\n            matrix[row][col] = target;\n        }\n    }\n    public static boolean valid(int row, int col) {\n        boolean result = false;\n        if (row &gt;= 0 &amp;&amp; row &lt; matrix.length &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; matrix[row].length)\n            if (matrix[row][col] == enemy)\n                result = true;\n        return result;\n    }\n    public static void printer(String[][] owo) {\n        for(int i = 0; i &lt; owo.length; i++) {\n            for(int j = 0; j &lt; owo[i].length; j++) {\n                System.out.print(owo[i][j]);\n                if(j &lt; owo[i].length - 1)\n                    System.out.print(&quot; &quot;);\n            }\n            System.out.println();\n        }\n    }   \n}\n</code></pre>\n"},{"tags":["java","java-stream","lazy-evaluation","short-circuiting"],"answers":[{"comments":[{"owner":{"account_id":2102061,"reputation":637,"user_id":1869409,"accept_rate":38,"display_name":"aviad cohen"},"score":1,"creation_date":1674717316,"post_id":75225246,"comment_id":132774278,"body_markdown":"Thanks for referencing the open bug. it is certainly the problem I encountered. \n(and thanks for editing my original question. it looks much better now...)","body":"Thanks for referencing the open bug. it is certainly the problem I encountered.  (and thanks for editing my original question. it looks much better now...)"}],"tags":[],"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1674581972,"creation_date":1674581972,"answer_id":75225246,"question_id":75221416,"body_markdown":"This is caused by [JDK-8277306: stream with sorted() and concat() causes some ops not to be lazy](https://bugs.openjdk.org/browse/JDK-8277306), which was closed as “*Won’t fix*” with the following comment:\r\n\r\n&gt; Stream.concat takes the spliterator from each input stream and combines them to create a new spliterator from which a new stream is constructed. Thereby it binds to the sources of each stream to concatenate.\r\n&gt;\r\n&gt; It is currently not possible propagate the short circuiting property of the stream pipeline after the concatenation to pipeline before the concatenation. It comes down to resolving the push vs. pull differences across the spliterator boundary. That&#39;s a tricky problem, and one that Ilikely requires significant effort that I find hard to justify given the scope of the problem. ","title":"Weird streams behavior with sorted() and concat()","body":"<p>This is caused by <a href=\"https://bugs.openjdk.org/browse/JDK-8277306\" rel=\"nofollow noreferrer\">JDK-8277306: stream with sorted() and concat() causes some ops not to be lazy</a>, which was closed as “<em>Won’t fix</em>” with the following comment:</p>\n<blockquote>\n<p>Stream.concat takes the spliterator from each input stream and combines them to create a new spliterator from which a new stream is constructed. Thereby it binds to the sources of each stream to concatenate.</p>\n<p>It is currently not possible propagate the short circuiting property of the stream pipeline after the concatenation to pipeline before the concatenation. It comes down to resolving the push vs. pull differences across the spliterator boundary. That's a tricky problem, and one that Ilikely requires significant effort that I find hard to justify given the scope of the problem.</p>\n</blockquote>\n"}],"owner":{"account_id":2102061,"reputation":637,"user_id":1869409,"accept_rate":38,"display_name":"aviad cohen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75225246,"answer_count":1,"score":2,"last_activity_date":1674596658,"creation_date":1674562900,"question_id":75221416,"body_markdown":"Stream evaluation is usually lazy (by default), unless statefull operations exist as part of the pipeline. I encountered a case where the lazyness is violated due to stateful operation and I don&#39;t understand why it happens.\r\n\r\nConsider the following code:\r\n\r\n    List&lt;Integer&gt; l1 = List.of(4, 5, 3, 1, 2);\r\n    List&lt;Integer&gt; l2 = List.of(6, 7, 8, 9, 10);\r\n\r\n    Stream\r\n        .concat(\r\n            l1.stream()\r\n                .map(i -&gt; {\r\n                    System.out.println(&quot;in the map for &quot; + i);\r\n                    if (i % 3 != 0) {\r\n                        return null;\r\n                    }\r\n                    return i;\r\n                }),\r\n            l2.stream())\r\n        .filter(i -&gt; {\r\n            System.out.println(&quot;in the filter &quot; + i);\r\n            return i != null;\r\n        })\r\n        .findAny();\r\n\r\nIn details: \r\n\r\nI have two steams constructed out of integer lists (`l1` &amp; `l2`). Both streams are concatenated to form a new stream. \r\n\r\nThe `l1` stream goes through some mapping that converts every item not divisible by 3 to `null`; the `l2` stream is taken as is. On the concatenated stream, I am adding a filter (filters the non-null values only --&gt; so from the first stream, only the items divided to 3 will go through the pipeline) and finally a terminal operation `findAny` which triggers the stream&#39;s pipeline (and will effectively deliver back the first item divisible by 3 and stop the stream processing).\r\n\r\nThis code works as expected: first all `l1` items are consumed before `l2` items are reached. The output shows how `l1` mapping function is called followed by the concatenated-stream-filter function for the first two `l1` items, and the whole stream is finished when the 3rd item of `l1` is not converted to null and thus survives the filter:\r\n\r\n```\r\nin the map for 4\r\nin the filter null\r\nin the map for 5\r\nin the filter null\r\nin the map for 3\r\nin the filter 3\r\n```\r\n\r\nThe problem (or the thing I don&#39;t understand) starts when the `l1` stream is modified with the `.sorted` operation:\r\n```\r\nStream\r\n    .concat(\r\n        l1.stream()\r\n            .sorted()\r\n            .map(i -&gt; {\r\n                System.out.println(&quot;in the map for &quot; + i);\r\n                if (i % 3 != 0) {\r\n                    return null;\r\n                }\r\n                return i;\r\n            }),\r\n        l2.stream())\r\n    .filter(i -&gt; {\r\n        System.out.println(&quot;in the filter &quot; + i);\r\n        return i != null;\r\n    })\r\n    .findAny();\r\n```\r\n... now things look different:\r\n\r\n```\r\nin the map for 1\r\nin the map for 2\r\nin the map for 3\r\nin the map for 4\r\nin the map for 5\r\nin the filter null\r\nin the filter null\r\nin the filter 3\r\n```\r\nas sorted is statefull operation, I know that it first needs to consume the entire `l1` stream to sort its values. My surprise came as it seems that it also affects **the remaining of the `l1` pipeline** as the `map` function is called **eagerly** before any of the concatenated-stream-filter method invocations, as was before.\r\n\r\nI read [Java Streams - Buffering huge streams](https://stackoverflow.com/questions/61114380/java-streams-buffering-huge-streams) and [Why filter() after flatMap() is &quot;not completely&quot; lazy in Java streams?](https://stackoverflow.com/questions/29229373/why-filter-after-flatmap-is-not-completely-lazy-in-java-streams/29230939#29230939), and I am already running on java 17 and working with `Stream.concat()` and I am not using `flatMap()` (at least not explicitly).\r\n\r\nCan you explain why ? What am I missing here ?","title":"Weird streams behavior with sorted() and concat()","body":"<p>Stream evaluation is usually lazy (by default), unless statefull operations exist as part of the pipeline. I encountered a case where the lazyness is violated due to stateful operation and I don't understand why it happens.</p>\n<p>Consider the following code:</p>\n<pre><code>List&lt;Integer&gt; l1 = List.of(4, 5, 3, 1, 2);\nList&lt;Integer&gt; l2 = List.of(6, 7, 8, 9, 10);\n\nStream\n    .concat(\n        l1.stream()\n            .map(i -&gt; {\n                System.out.println(&quot;in the map for &quot; + i);\n                if (i % 3 != 0) {\n                    return null;\n                }\n                return i;\n            }),\n        l2.stream())\n    .filter(i -&gt; {\n        System.out.println(&quot;in the filter &quot; + i);\n        return i != null;\n    })\n    .findAny();\n</code></pre>\n<p>In details:</p>\n<p>I have two steams constructed out of integer lists (<code>l1</code> &amp; <code>l2</code>). Both streams are concatenated to form a new stream.</p>\n<p>The <code>l1</code> stream goes through some mapping that converts every item not divisible by 3 to <code>null</code>; the <code>l2</code> stream is taken as is. On the concatenated stream, I am adding a filter (filters the non-null values only --&gt; so from the first stream, only the items divided to 3 will go through the pipeline) and finally a terminal operation <code>findAny</code> which triggers the stream's pipeline (and will effectively deliver back the first item divisible by 3 and stop the stream processing).</p>\n<p>This code works as expected: first all <code>l1</code> items are consumed before <code>l2</code> items are reached. The output shows how <code>l1</code> mapping function is called followed by the concatenated-stream-filter function for the first two <code>l1</code> items, and the whole stream is finished when the 3rd item of <code>l1</code> is not converted to null and thus survives the filter:</p>\n<pre><code>in the map for 4\nin the filter null\nin the map for 5\nin the filter null\nin the map for 3\nin the filter 3\n</code></pre>\n<p>The problem (or the thing I don't understand) starts when the <code>l1</code> stream is modified with the <code>.sorted</code> operation:</p>\n<pre><code>Stream\n    .concat(\n        l1.stream()\n            .sorted()\n            .map(i -&gt; {\n                System.out.println(&quot;in the map for &quot; + i);\n                if (i % 3 != 0) {\n                    return null;\n                }\n                return i;\n            }),\n        l2.stream())\n    .filter(i -&gt; {\n        System.out.println(&quot;in the filter &quot; + i);\n        return i != null;\n    })\n    .findAny();\n</code></pre>\n<p>... now things look different:</p>\n<pre><code>in the map for 1\nin the map for 2\nin the map for 3\nin the map for 4\nin the map for 5\nin the filter null\nin the filter null\nin the filter 3\n</code></pre>\n<p>as sorted is statefull operation, I know that it first needs to consume the entire <code>l1</code> stream to sort its values. My surprise came as it seems that it also affects <strong>the remaining of the <code>l1</code> pipeline</strong> as the <code>map</code> function is called <strong>eagerly</strong> before any of the concatenated-stream-filter method invocations, as was before.</p>\n<p>I read <a href=\"https://stackoverflow.com/questions/61114380/java-streams-buffering-huge-streams\">Java Streams - Buffering huge streams</a> and <a href=\"https://stackoverflow.com/questions/29229373/why-filter-after-flatmap-is-not-completely-lazy-in-java-streams/29230939#29230939\">Why filter() after flatMap() is &quot;not completely&quot; lazy in Java streams?</a>, and I am already running on java 17 and working with <code>Stream.concat()</code> and I am not using <code>flatMap()</code> (at least not explicitly).</p>\n<p>Can you explain why ? What am I missing here ?</p>\n"},{"tags":["java","android","robolectric"],"comments":[{"owner":{"account_id":399491,"reputation":551,"user_id":764869,"display_name":"bystander"},"score":0,"creation_date":1375877511,"post_id":17593562,"comment_id":26500720,"body_markdown":"http://stackoverflow.com/questions/16645885/robolectric-2-1-and-eclipse Would this link help you out?","body":"<a href=\"http://stackoverflow.com/questions/16645885/robolectric-2-1-and-eclipse\" title=\"robolectric 2 1 and eclipse\">stackoverflow.com/questions/16645885/&hellip;</a> Would this link help you out?"}],"answers":[{"comments":[{"owner":{"account_id":243192,"reputation":6619,"user_id":515205,"accept_rate":83,"display_name":"spaaarky21"},"score":1,"creation_date":1405441993,"post_id":18923943,"comment_id":38423665,"body_markdown":"I&#39;m not sure I get the connection between this warning that Robolectric logs while running unit tests, and the Lint project analyzer.  Is there a certain Lint warning that you can suppress that will prevent these warnings from being logged while testing?","body":"I&#39;m not sure I get the connection between this warning that Robolectric logs while running unit tests, and the Lint project analyzer.  Is there a certain Lint warning that you can suppress that will prevent these warnings from being logged while testing?"}],"tags":[],"owner":{"account_id":2648745,"reputation":59,"user_id":2290947,"display_name":"DanFredell"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1379703340,"creation_date":1379703340,"answer_id":18923943,"question_id":17593562,"body_markdown":"It appears that [lots of people][1] are having this issue, and it causes no harm. So I would say just suppress that warning. \r\nCheck out [Suppressing Lint Warnings.][2]\r\nAlso this has been asked on Stack Overflow [before][3]. \r\n\r\n\r\n  [1]: https://groups.google.com/forum/#!topic/robolectric/FxSE3gRsbyM\r\n  [2]: http://tools.android.com/tips/lint/suppressing-lint-warnings\r\n  [3]: https://stackoverflow.com/questions/17357213/robolectric-and-android-in-eclipse-warning-no-system-properties-value-for-ro-b","title":"Android test &quot;ro.build.date.utc&quot; warning","body":"<p>It appears that <a href=\"https://groups.google.com/forum/#!topic/robolectric/FxSE3gRsbyM\" rel=\"nofollow noreferrer\">lots of people</a> are having this issue, and it causes no harm. So I would say just suppress that warning. \nCheck out <a href=\"http://tools.android.com/tips/lint/suppressing-lint-warnings\" rel=\"nofollow noreferrer\">Suppressing Lint Warnings.</a>\nAlso this has been asked on Stack Overflow <a href=\"https://stackoverflow.com/questions/17357213/robolectric-and-android-in-eclipse-warning-no-system-properties-value-for-ro-b\">before</a>. </p>\n"}],"owner":{"account_id":1821219,"reputation":6213,"user_id":1655245,"display_name":"Arik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4573,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1674596647,"creation_date":1373546111,"question_id":17593562,"body_markdown":"I&#39;m trying to use Robolectric to test my Android application, and I always get the following warning:\r\n\r\n    WARNING: no system properties value for ro.build.date.utc\r\n\r\nAny idea how to fix it?","title":"Android test &quot;ro.build.date.utc&quot; warning","body":"<p>I'm trying to use Robolectric to test my Android application, and I always get the following warning:</p>\n\n<pre><code>WARNING: no system properties value for ro.build.date.utc\n</code></pre>\n\n<p>Any idea how to fix it?</p>\n"},{"tags":["java","spring","spring-boot","spring-integration"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1674571105,"post_id":75216006,"comment_id":132739103,"body_markdown":"You don&#39;t need a `customReleaseStrategy` if you use `apply-sequence=&quot;true&quot;`: looks like you still try to rely on a standard group size releasing strategy anyway. That&#39;s first.","body":"You don&#39;t need a <code>customReleaseStrategy</code> if you use <code>apply-sequence=&quot;true&quot;</code>: looks like you still try to rely on a standard group size releasing strategy anyway. That&#39;s first."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1674571228,"post_id":75216006,"comment_id":132739157,"body_markdown":"`org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method` - looks like you don&#39;t show everything to us: there is some error in some SpEL expression we don&#39;t see in your current code.","body":"<code>org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method</code> - looks like you don&#39;t show everything to us: there is some error in some SpEL expression we don&#39;t see in your current code."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1674571285,"post_id":75216006,"comment_id":132739178,"body_markdown":"And you probably don&#39;t need those `&lt;bridge&gt;` definitions since you then just propagated down to your service activators. I believe the error you got is not relevant to the config you show us.","body":"And you probably don&#39;t need those <code>&lt;bridge&gt;</code> definitions since you then just propagated down to your service activators. I believe the error you got is not relevant to the config you show us."},{"owner":{"account_id":1044116,"reputation":161,"user_id":1049469,"accept_rate":0,"display_name":"ProblemSolver"},"score":0,"creation_date":1674584435,"post_id":75216006,"comment_id":132743812,"body_markdown":"Thanks Artem. I will go through the feedback. I have shared all the config files and related code. This is error Caused by: java.lang.IllegalStateException: Invalid method parameter for payload: was expecting collection.\n\tat org.springframework.util.Assert.state(Assert.java:76)\n\tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper$ParametersWrapper.getPayload(MessagingMethodInvokerHelper.java:1384)","body":"Thanks Artem. I will go through the feedback. I have shared all the config files and related code. This is error Caused by: java.lang.IllegalStateException: Invalid method parameter for payload: was expecting collection. \tat org.springframework.util.Assert.state(Assert.java:76) \tat org.springframework.integration.handler.support.MessagingMet&zwnj;&#8203;hodInvokerHelper$Par&zwnj;&#8203;ametersWrapper.getPa&zwnj;&#8203;yload(MessagingMetho&zwnj;&#8203;dInvokerHelper.java:&zwnj;&#8203;1384)"},{"owner":{"account_id":1044116,"reputation":161,"user_id":1049469,"accept_rate":0,"display_name":"ProblemSolver"},"score":0,"creation_date":1674584471,"post_id":75216006,"comment_id":132743824,"body_markdown":"Also can you point me out how to write custom aggregator to aggregate the results from all the scatter channel?","body":"Also can you point me out how to write custom aggregator to aggregate the results from all the scatter channel?"}],"answers":[{"comments":[{"owner":{"account_id":1044116,"reputation":161,"user_id":1049469,"accept_rate":0,"display_name":"ProblemSolver"},"score":0,"creation_date":1674596398,"post_id":75225765,"comment_id":132747394,"body_markdown":"I have updated the full stack trace in the original question.","body":"I have updated the full stack trace in the original question."},{"owner":{"account_id":1044116,"reputation":161,"user_id":1049469,"accept_rate":0,"display_name":"ProblemSolver"},"score":0,"creation_date":1674600822,"post_id":75225765,"comment_id":132748492,"body_markdown":"After removing the implementation for customReleaseStrategy bean which has implementation for ReleaseStrategy, it is working fine. Also i am able to aggregate with implementation of MessageGroupProcessor. Thanks Artem for your quick turnaround.","body":"After removing the implementation for customReleaseStrategy bean which has implementation for ReleaseStrategy, it is working fine. Also i am able to aggregate with implementation of MessageGroupProcessor. Thanks Artem for your quick turnaround."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674584985,"creation_date":1674584985,"answer_id":75225765,"question_id":75216006,"body_markdown":"Can you show, please, the whole stack trace in your question and formatted properly? For custom aggregation function see `ref` attribute of the `&lt;gatherer&gt;`.\r\n\r\nAlthough I see you already use it, but you point to a wrong type `ReleaseStrategy`.\r\n\r\nThat `ref` have to be an implementation of `MessageGroupProcessor`. See some out-of-the-box types. Not sure why a `DefaultAggregatingMessageGroupProcessor` which produces a collection of payloads doesn&#39;t work for you...","title":"Aggregate response in Spring integration scatter gather","body":"<p>Can you show, please, the whole stack trace in your question and formatted properly? For custom aggregation function see <code>ref</code> attribute of the <code>&lt;gatherer&gt;</code>.</p>\n<p>Although I see you already use it, but you point to a wrong type <code>ReleaseStrategy</code>.</p>\n<p>That <code>ref</code> have to be an implementation of <code>MessageGroupProcessor</code>. See some out-of-the-box types. Not sure why a <code>DefaultAggregatingMessageGroupProcessor</code> which produces a collection of payloads doesn't work for you...</p>\n"}],"owner":{"account_id":1044116,"reputation":161,"user_id":1049469,"accept_rate":0,"display_name":"ProblemSolver"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75225765,"answer_count":1,"score":0,"last_activity_date":1674596333,"creation_date":1674515567,"question_id":75216006,"body_markdown":"I have a requirement of calling 3 different http endpoint which will return me a same domain object and gather the response of these 3 different http endpoint in a single object. I am using Spring scatter gather pattern for same and kind of lost how to aggregate results in single object.\r\nBelow is my scatter gather config file:\r\n\r\n    &lt;scatter-gather input-channel=&quot;inputDistribution&quot; output-channel=&quot;outputDistribution&quot; gather-channel=&quot;gatherChannel&quot; send-timeout=&quot;1000&quot;\r\n                    gather-timeout=&quot;1000&quot;&gt;\r\n        &lt;scatterer apply-sequence=&quot;true&quot;&gt;\r\n            &lt;recipient channel=&quot;distribution1Channel&quot;/&gt;\r\n            &lt;recipient channel=&quot;distribution2Channel&quot;/&gt;\r\n            &lt;recipient channel=&quot;distribution3Channel&quot;/&gt;\r\n        &lt;/scatterer&gt;\r\n        &lt;gatherer release-strategy=&quot;customReleaseStrategy&quot; ref=&quot;customReleaseStrategy&quot;/&gt;\r\n    &lt;/scatter-gather&gt;\r\n\r\n    &lt;channel id=&quot;gatherChannel&quot;&gt;\r\n        &lt;queue/&gt;\r\n    &lt;/channel&gt;\r\n\r\n    &lt;bridge input-channel=&quot;distribution1Channel&quot; output-channel=&quot;serviceChannel1&quot;/&gt;\r\n    &lt;bridge input-channel=&quot;distribution2Channel&quot; output-channel=&quot;serviceChannel2&quot;/&gt;\r\n    &lt;bridge input-channel=&quot;distribution3Channel&quot; output-channel=&quot;serviceChannel3&quot;/&gt;\r\n\r\n    &lt;service-activator input-channel=&quot;serviceChannel1&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;firstService&quot; method=&quot;process&quot;/&gt;\r\n    &lt;service-activator input-channel=&quot;serviceChannel2&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;secondService&quot; method=&quot;process&quot;/&gt;\r\n    &lt;service-activator input-channel=&quot;serviceChannel3&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;thirdService&quot; method=&quot;process&quot;/&gt;\r\n\r\n    &lt;beans:bean id=&quot;firstService&quot; class=&quot;com.test.scattergather.service.FirstService&quot;/&gt;\r\n    &lt;beans:bean id=&quot;secondService&quot; class=&quot;com.test.scattergather.service.SecondService&quot;/&gt;\r\n    &lt;beans:bean id=&quot;thirdService&quot; class=&quot;com.test.scattergather.service.ThirdService&quot;/&gt;\r\n\r\n    &lt;beans:bean id=&quot;customReleaseStrategy&quot; class=&quot;com.test.scattergather.strategy.CustomReleaseStrategy&quot;/&gt;\r\n\r\nBelow is my service activator code which will call and endpoint and get a domain object\r\n\r\n  \tpublic class FirstService {\r\n    @ServiceActivator\r\n    public Dummy process() {\r\n        //In actual scenario, call api endpoint and get this object. This object will be populated from API response.\r\n\t\tdummy.setID(1);\r\n        Dummy dummy = new Dummy();\r\n        return dummy;\r\n    }}\r\n\r\nSimilarly secondService and thirdService will populate Dummy object by calling an endpoint.\r\n\r\nBelow is the code for ReleaseStrategy where i am checking if all the 3 responses has been received\r\n\r\n    public class CustomReleaseStrategy implements ReleaseStrategy {\r\n\r\n    @Override\r\n    public boolean canRelease(MessageGroup group) {\r\n        if(group.getMessages().size() == 3) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }}\r\n\r\nI am using below test to send the message:\r\n\r\n     this.inputDistribution.send(new GenericMessage&lt;&gt;(&quot;foo&quot;),1000);\r\n     Message&lt;?&gt; outputMessage = this.outputDistribution.receive(10000);\r\n\r\nAnd getting this error:  \r\n\r\n    15:24:11.579 [task-scheduler-2] DEBUG org.springframework.integration.handler.LoggingHandler - bean &#39;_org.springframework.integration.errorLogger.handler&#39; for component &#39;_org.springframework.integration.errorLogger&#39; received message: ErrorMessage [payload=org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer&#39;; defined in: &#39;class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]&#39;; from source: &#39;&#39;gatherer&#39;&#39;]; nested exception is org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean &#39;gatherChannel&#39;, sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}], headers={id=19b6097a-2114-e896-4c00-49f818a6d9e6, timestamp=1674595451578}] for original GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean &#39;gatherChannel&#39;, sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\r\n    15:24:11.584 [task-scheduler-2] ERROR org.springframework.integration.handler.LoggingHandler - org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer&#39;; defined in: &#39;class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]&#39;; from source: &#39;&#39;gatherer&#39;&#39;]; nested exception is org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean &#39;gatherChannel&#39;, sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\r\n    \tat org.springframework.integration.support.utils.IntegrationUtils.wrapInHandlingExceptionIfNecessary(IntegrationUtils.java:191)\r\n    \tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:65)\r\n    \tat org.springframework.integration.endpoint.PollingConsumer.handleMessage(PollingConsumer.java:158)\r\n    \tat org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:475)\r\n    \tat org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:461)\r\n    \tat org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:413)\r\n    \tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:348)\r\n    \tat org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\r\n    \tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n    \tat org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\r\n    \tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:341)\r\n    \tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n    \tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n    \tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    Caused by: org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method\r\n    \tat org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:708)\r\n    \tat org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:204)\r\n    \tat org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:104)\r\n    \tat org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:91)\r\n    \tat org.springframework.expression.spel.ast.MethodReference.getArguments(MethodReference.java:164)\r\n    \tat org.springframework.expression.spel.ast.MethodReference.getValueRef(MethodReference.java:81)\r\n    \tat org.springframework.expression.spel.ast.CompoundExpression.getValueRef(CompoundExpression.java:70)\r\n    \tat org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:91)\r\n    \tat org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:117)\r\n    \tat org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:376)\r\n    \tat org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\r\n    \tat org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:154)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeExpression(MessagingMethodInvokerHelper.java:637)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.fallbackToInvokeExpression(MessagingMethodInvokerHelper.java:630)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInvokeExceptionAndFallbackToExpressionIfAny(MessagingMethodInvokerHelper.java:616)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeHandlerMethod(MessagingMethodInvokerHelper.java:587)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:479)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:363)\r\n    \tat org.springframework.integration.aggregator.MethodInvokingMessageListProcessor.process(MethodInvokingMessageListProcessor.java:92)\r\n    \tat org.springframework.integration.aggregator.MethodInvokingMessageGroupProcessor.aggregatePayloads(MethodInvokingMessageGroupProcessor.java:90)\r\n    \tat org.springframework.integration.aggregator.AbstractAggregatingMessageGroupProcessor.processMessageGroup(AbstractAggregatingMessageGroupProcessor.java:94)\r\n    \tat org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.completeGroup(AbstractCorrelatingMessageHandler.java:898)\r\n    \tat org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.processMessageForGroup(AbstractCorrelatingMessageHandler.java:574)\r\n    \tat org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.handleMessageInternal(AbstractCorrelatingMessageHandler.java:541)\r\n    \tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56)\r\n    \t... 17 more\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:704)\r\n    \t... 41 more\r\n    Caused by: java.lang.IllegalStateException: Invalid method parameter for payload: was expecting collection.\r\n    \tat org.springframework.util.Assert.state(Assert.java:76)\r\n    \tat org.springframework.integration.handler.support.MessagingMethodInvokerHelper$ParametersWrapper.getPayload(MessagingMethodInvokerHelper.java:1384)\r\n    \t... 46 more\r\n    \r\n    15:24:11.586 [task-scheduler-2] DEBUG org.springframework.integration.channel.PublishSubscribeChannel - postSend (sent=true) on channel &#39;bean &#39;errorChannel&#39;&#39;, message: ErrorMessage [payload=org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer&#39;; defined in: &#39;class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]&#39;; from source: &#39;&#39;gatherer&#39;&#39;]; nested exception is org.springframework.expression.AccessException: Unable to access property &#39;payload&#39; through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean &#39;gatherChannel&#39;, sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}], headers={id=19b6097a-2114-e896-4c00-49f818a6d9e6, timestamp=1674595451578}] for original GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean &#39;gatherChannel&#39;, sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\r\n    15:24:12.545 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.545 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]\r\n    15:24:12.553 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.554 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]\r\n    15:24:12.558 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.558 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 7, missCount = 1]\r\n    15:24:12.559 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.559 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 8, missCount = 1]\r\n    15:24:12.564 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.564 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 9, missCount = 1]\r\n    15:24:12.569 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]]]\r\n    15:24:12.570 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 10, missCount = 1]\r\n    15:24:12.572 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - After test method: context [DefaultTestContext@305e95a4 testClass = ScatterGatherConfigTest, testInstance = com.test.scattergather.scattergather.config.ScatterGatherConfigTest@67b8d45, testMethod = configDistributionTest@ScatterGatherConfigTest, testException = org.springframework.integration.handler.ReplyRequiredException: No reply produced by handler &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0&#39;, and its &#39;requiresReply&#39; property is set to true., failedMessage=GenericMessage [payload=foo, headers={id=8a2e124d-ae9a-00b0-dc3e-f434849499c1, timestamp=1674595451468}], mergedContextConfiguration = [MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = &#39;{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}&#39;, classes = &#39;{}&#39;, contextInitializerClasses = &#39;[]&#39;, activeProfiles = &#39;{}&#39;, propertySourceLocations = &#39;{}&#39;, propertySourceProperties = &#39;{}&#39;, contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = &#39;org.springframework.test.context.support.DelegatingSmartContextLoader&#39;, parent = [null]], attributes = map[&#39;org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents&#39; -&gt; false]], class annotated with @DirtiesContext [true] with mode [AFTER_CLASS], method annotated with @DirtiesContext [false] with mode [null].\r\n    \r\n    No reply produced by handler &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0&#39;, and its &#39;requiresReply&#39; property is set to true.\r\n    org.springframework.integration.handler.ReplyRequiredException: No reply produced by handler &#39;org.springframework.integration.scattergather.ScatterGatherHandler#0&#39;, and its &#39;requiresReply&#39; property is set to true., failedMessage=GenericMessage [payload=foo, headers={id=8a2e124d-ae9a-00b0-dc3e-f434849499c1, timestamp=1674595451468}]\r\n    \tat app//org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:146)\r\n    \tat app//org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56)\r\n    \tat app//org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\r\n    \tat app//org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\r\n    \tat app//org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\r\n    \tat app//org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\r\n    \tat app//org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\r\n    \tat app//com.test.scattergather.scattergather.config.ScatterGatherConfigTest.configDistributionTest(ScatterGatherConfigTest.java:41)\r\n    \tat java.base@11.0.16/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base@11.0.16/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base@11.0.16/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base@11.0.16/java.lang.reflect.Method.invoke(Method.java:566)\r\n\t\r\n\r\nI want to know how to resolve this error and also how to aggregate the results from all the scatter channel?\r\n","title":"Aggregate response in Spring integration scatter gather","body":"<p>I have a requirement of calling 3 different http endpoint which will return me a same domain object and gather the response of these 3 different http endpoint in a single object. I am using Spring scatter gather pattern for same and kind of lost how to aggregate results in single object.\nBelow is my scatter gather config file:</p>\n<pre><code>&lt;scatter-gather input-channel=&quot;inputDistribution&quot; output-channel=&quot;outputDistribution&quot; gather-channel=&quot;gatherChannel&quot; send-timeout=&quot;1000&quot;\n                gather-timeout=&quot;1000&quot;&gt;\n    &lt;scatterer apply-sequence=&quot;true&quot;&gt;\n        &lt;recipient channel=&quot;distribution1Channel&quot;/&gt;\n        &lt;recipient channel=&quot;distribution2Channel&quot;/&gt;\n        &lt;recipient channel=&quot;distribution3Channel&quot;/&gt;\n    &lt;/scatterer&gt;\n    &lt;gatherer release-strategy=&quot;customReleaseStrategy&quot; ref=&quot;customReleaseStrategy&quot;/&gt;\n&lt;/scatter-gather&gt;\n\n&lt;channel id=&quot;gatherChannel&quot;&gt;\n    &lt;queue/&gt;\n&lt;/channel&gt;\n\n&lt;bridge input-channel=&quot;distribution1Channel&quot; output-channel=&quot;serviceChannel1&quot;/&gt;\n&lt;bridge input-channel=&quot;distribution2Channel&quot; output-channel=&quot;serviceChannel2&quot;/&gt;\n&lt;bridge input-channel=&quot;distribution3Channel&quot; output-channel=&quot;serviceChannel3&quot;/&gt;\n\n&lt;service-activator input-channel=&quot;serviceChannel1&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;firstService&quot; method=&quot;process&quot;/&gt;\n&lt;service-activator input-channel=&quot;serviceChannel2&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;secondService&quot; method=&quot;process&quot;/&gt;\n&lt;service-activator input-channel=&quot;serviceChannel3&quot; output-channel=&quot;gatherChannel&quot; ref=&quot;thirdService&quot; method=&quot;process&quot;/&gt;\n\n&lt;beans:bean id=&quot;firstService&quot; class=&quot;com.test.scattergather.service.FirstService&quot;/&gt;\n&lt;beans:bean id=&quot;secondService&quot; class=&quot;com.test.scattergather.service.SecondService&quot;/&gt;\n&lt;beans:bean id=&quot;thirdService&quot; class=&quot;com.test.scattergather.service.ThirdService&quot;/&gt;\n\n&lt;beans:bean id=&quot;customReleaseStrategy&quot; class=&quot;com.test.scattergather.strategy.CustomReleaseStrategy&quot;/&gt;\n</code></pre>\n<p>Below is my service activator code which will call and endpoint and get a domain object</p>\n<pre><code>public class FirstService {\n@ServiceActivator\npublic Dummy process() {\n    //In actual scenario, call api endpoint and get this object. This object will be populated from API response.\n    dummy.setID(1);\n    Dummy dummy = new Dummy();\n    return dummy;\n}}\n</code></pre>\n<p>Similarly secondService and thirdService will populate Dummy object by calling an endpoint.</p>\n<p>Below is the code for ReleaseStrategy where i am checking if all the 3 responses has been received</p>\n<pre><code>public class CustomReleaseStrategy implements ReleaseStrategy {\n\n@Override\npublic boolean canRelease(MessageGroup group) {\n    if(group.getMessages().size() == 3) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}}\n</code></pre>\n<p>I am using below test to send the message:</p>\n<pre><code> this.inputDistribution.send(new GenericMessage&lt;&gt;(&quot;foo&quot;),1000);\n Message&lt;?&gt; outputMessage = this.outputDistribution.receive(10000);\n</code></pre>\n<p>And getting this error:</p>\n<pre><code>15:24:11.579 [task-scheduler-2] DEBUG org.springframework.integration.handler.LoggingHandler - bean '_org.springframework.integration.errorLogger.handler' for component '_org.springframework.integration.errorLogger' received message: ErrorMessage [payload=org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean 'org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer'; defined in: 'class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]'; from source: ''gatherer'']; nested exception is org.springframework.expression.AccessException: Unable to access property 'payload' through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean 'gatherChannel', sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}], headers={id=19b6097a-2114-e896-4c00-49f818a6d9e6, timestamp=1674595451578}] for original GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean 'gatherChannel', sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\n15:24:11.584 [task-scheduler-2] ERROR org.springframework.integration.handler.LoggingHandler - org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean 'org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer'; defined in: 'class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]'; from source: ''gatherer'']; nested exception is org.springframework.expression.AccessException: Unable to access property 'payload' through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean 'gatherChannel', sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\n    at org.springframework.integration.support.utils.IntegrationUtils.wrapInHandlingExceptionIfNecessary(IntegrationUtils.java:191)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:65)\n    at org.springframework.integration.endpoint.PollingConsumer.handleMessage(PollingConsumer.java:158)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:475)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:461)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:413)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:348)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:341)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.springframework.expression.AccessException: Unable to access property 'payload' through getter method\n    at org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:708)\n    at org.springframework.expression.spel.ast.PropertyOrFieldReference.readProperty(PropertyOrFieldReference.java:204)\n    at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:104)\n    at org.springframework.expression.spel.ast.PropertyOrFieldReference.getValueInternal(PropertyOrFieldReference.java:91)\n    at org.springframework.expression.spel.ast.MethodReference.getArguments(MethodReference.java:164)\n    at org.springframework.expression.spel.ast.MethodReference.getValueRef(MethodReference.java:81)\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueRef(CompoundExpression.java:70)\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:91)\n    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:117)\n    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:376)\n    at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\n    at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:154)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeExpression(MessagingMethodInvokerHelper.java:637)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.fallbackToInvokeExpression(MessagingMethodInvokerHelper.java:630)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInvokeExceptionAndFallbackToExpressionIfAny(MessagingMethodInvokerHelper.java:616)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.invokeHandlerMethod(MessagingMethodInvokerHelper.java:587)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:479)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:363)\n    at org.springframework.integration.aggregator.MethodInvokingMessageListProcessor.process(MethodInvokingMessageListProcessor.java:92)\n    at org.springframework.integration.aggregator.MethodInvokingMessageGroupProcessor.aggregatePayloads(MethodInvokingMessageGroupProcessor.java:90)\n    at org.springframework.integration.aggregator.AbstractAggregatingMessageGroupProcessor.processMessageGroup(AbstractAggregatingMessageGroupProcessor.java:94)\n    at org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.completeGroup(AbstractCorrelatingMessageHandler.java:898)\n    at org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.processMessageForGroup(AbstractCorrelatingMessageHandler.java:574)\n    at org.springframework.integration.aggregator.AbstractCorrelatingMessageHandler.handleMessageInternal(AbstractCorrelatingMessageHandler.java:541)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56)\n    ... 17 more\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.expression.spel.support.ReflectivePropertyAccessor$OptimalPropertyAccessor.read(ReflectivePropertyAccessor.java:704)\n    ... 41 more\nCaused by: java.lang.IllegalStateException: Invalid method parameter for payload: was expecting collection.\n    at org.springframework.util.Assert.state(Assert.java:76)\n    at org.springframework.integration.handler.support.MessagingMethodInvokerHelper$ParametersWrapper.getPayload(MessagingMethodInvokerHelper.java:1384)\n    ... 46 more\n\n15:24:11.586 [task-scheduler-2] DEBUG org.springframework.integration.channel.PublishSubscribeChannel - postSend (sent=true) on channel 'bean 'errorChannel'', message: ErrorMessage [payload=org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean 'org.springframework.integration.scattergather.ScatterGatherHandler#0.gatherer'; defined in: 'class path resource [com/test/scattergather/scattergather/config/scatter-gather-context.xml]'; from source: ''gatherer'']; nested exception is org.springframework.expression.AccessException: Unable to access property 'payload' through getter method, failedMessage=GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean 'gatherChannel', sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}], headers={id=19b6097a-2114-e896-4c00-49f818a6d9e6, timestamp=1674595451578}] for original GenericMessage [payload=com.test.scattergather.domain.Dummy@28b1ccd1, headers={gatherResultChannel=org.springframework.integration.channel.QueueChannel@7879348, replyChannel=bean 'gatherChannel', sequenceNumber=3, sequenceSize=3, correlationId=ee0c2cd6-7650-3f31-e093-3c0da197ac8b, id=ab7a162c-73aa-d7ac-608b-a93923c38969, timestamp=1674595451526}]\n15:24:12.545 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.545 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 5, missCount = 1]\n15:24:12.553 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.554 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 6, missCount = 1]\n15:24:12.558 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.558 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 7, missCount = 1]\n15:24:12.559 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.559 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 8, missCount = 1]\n15:24:12.564 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.564 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 9, missCount = 1]\n15:24:12.569 [Test worker] DEBUG org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate - Retrieved ApplicationContext [758700911] from cache with key [[MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]]]\n15:24:12.570 [Test worker] DEBUG org.springframework.test.context.cache - Spring test ApplicationContext cache statistics: [DefaultContextCache@5e6dcfa size = 1, maxSize = 32, parentContextCount = 0, hitCount = 10, missCount = 1]\n15:24:12.572 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - After test method: context [DefaultTestContext@305e95a4 testClass = ScatterGatherConfigTest, testInstance = com.test.scattergather.scattergather.config.ScatterGatherConfigTest@67b8d45, testMethod = configDistributionTest@ScatterGatherConfigTest, testException = org.springframework.integration.handler.ReplyRequiredException: No reply produced by handler 'org.springframework.integration.scattergather.ScatterGatherHandler#0', and its 'requiresReply' property is set to true., failedMessage=GenericMessage [payload=foo, headers={id=8a2e124d-ae9a-00b0-dc3e-f434849499c1, timestamp=1674595451468}], mergedContextConfiguration = [MergedContextConfiguration@55e42684 testClass = ScatterGatherConfigTest, locations = '{classpath:/com/test/scattergather/scattergather/config/scatter-gather-context.xml}', classes = '{}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@c497a55, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@2f86f9cf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@6dded900, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@39c7fb0b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0], contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader', parent = [null]], attributes = map['org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -&gt; false]], class annotated with @DirtiesContext [true] with mode [AFTER_CLASS], method annotated with @DirtiesContext [false] with mode [null].\n\nNo reply produced by handler 'org.springframework.integration.scattergather.ScatterGatherHandler#0', and its 'requiresReply' property is set to true.\norg.springframework.integration.handler.ReplyRequiredException: No reply produced by handler 'org.springframework.integration.scattergather.ScatterGatherHandler#0', and its 'requiresReply' property is set to true., failedMessage=GenericMessage [payload=foo, headers={id=8a2e124d-ae9a-00b0-dc3e-f434849499c1, timestamp=1674595451468}]\n    at app//org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:146)\n    at app//org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:56)\n    at app//org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:115)\n    at app//org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:133)\n    at app//org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:106)\n    at app//org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:72)\n    at app//org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:317)\n    at app//com.test.scattergather.scattergather.config.ScatterGatherConfigTest.configDistributionTest(ScatterGatherConfigTest.java:41)\n    at java.base@11.0.16/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base@11.0.16/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base@11.0.16/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base@11.0.16/java.lang.reflect.Method.invoke(Method.java:566)\n</code></pre>\n<p>I want to know how to resolve this error and also how to aggregate the results from all the scatter channel?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","querydsl"],"answers":[{"tags":[],"owner":{"account_id":1589697,"reputation":382,"user_id":1473320,"display_name":"kashev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674596129,"creation_date":1674596129,"answer_id":75227522,"question_id":72577001,"body_markdown":"To directly answer your question: assuming you&#39;re using a relatively modern version of QueryDSL, you should be able to use a `BooleanBuilder`:\r\n\r\n```lang-java\r\nQOrder order = QOrder.order;\r\nSQLQuery&lt;Order&gt; query = from(order);\r\nquery.where(order.status.eq(&quot;ready&quot;));\r\n// Example data\r\nList&lt;List&lt;String&gt;&gt; filterTypes = ImmutableList.of(\r\n        ImmutableList.of(&quot;t1&quot;, &quot;t2&quot;),\r\n        ImmutableList.of(&quot;t3&quot;, &quot;t4&quot;));\r\n\r\nBooleanBuilder builder = new BooleanBuilder();\r\n\r\nfor (List&lt;String&gt; types : filterTypes) {\r\n    builder.or(order.type.in(types));\r\n}\r\n\r\nquery.where(builder);\r\n```\r\n\r\nBacking up, assuming your actual application data model is similar to the example you provided, this:\r\n```lang-sql\r\no.type in (t1,t2) or o.type in (t3,t4)\r\n```\r\nIs equivalent to:\r\n```lang-sql\r\no.type in (t1,t2,t3,t4)\r\n```\r\nYou could translate your `List&lt;List&lt;String&gt;&gt;` into `List&lt;String&gt;` and do your type query update once:\r\n```lang-java\r\nQOrder order = QOrder.order;\r\nSQLQuery&lt;Order&gt; query = from(order);\r\nquery.where(order.status.eq(&quot;ready&quot;));\r\n// Example data\r\nList&lt;List&lt;String&gt;&gt; filterTypes = ImmutableList.of(\r\n        ImmutableList.of(&quot;t1&quot;, &quot;t2&quot;),\r\n        ImmutableList.of(&quot;t3&quot;, &quot;t4&quot;));\r\nList&lt;String&gt; flatFilterTypes = filterTypes.stream().flatMap(List::stream).collect(Collectors.toList());\r\nquery.where(order.type.in(flatFilterTypes));\r\n```\r\n\r\nI _suspect_ that your database&#39;s query optimizer would do the same thing for either query (you&#39;d have to check a [query execution plan to be sure](https://www.postgresql.org/docs/current/using-explain.html)), but it&#39;d probably be more clear what&#39;s going on if you did simplified the query on the Java side rather than relying on the database query optimizer.","title":"Query dsl - Looping through a list to create OR predicates","body":"<p>To directly answer your question: assuming you're using a relatively modern version of QueryDSL, you should be able to use a <code>BooleanBuilder</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QOrder order = QOrder.order;\nSQLQuery&lt;Order&gt; query = from(order);\nquery.where(order.status.eq(&quot;ready&quot;));\n// Example data\nList&lt;List&lt;String&gt;&gt; filterTypes = ImmutableList.of(\n        ImmutableList.of(&quot;t1&quot;, &quot;t2&quot;),\n        ImmutableList.of(&quot;t3&quot;, &quot;t4&quot;));\n\nBooleanBuilder builder = new BooleanBuilder();\n\nfor (List&lt;String&gt; types : filterTypes) {\n    builder.or(order.type.in(types));\n}\n\nquery.where(builder);\n</code></pre>\n<p>Backing up, assuming your actual application data model is similar to the example you provided, this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>o.type in (t1,t2) or o.type in (t3,t4)\n</code></pre>\n<p>Is equivalent to:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>o.type in (t1,t2,t3,t4)\n</code></pre>\n<p>You could translate your <code>List&lt;List&lt;String&gt;&gt;</code> into <code>List&lt;String&gt;</code> and do your type query update once:</p>\n<pre class=\"lang-java prettyprint-override\"><code>QOrder order = QOrder.order;\nSQLQuery&lt;Order&gt; query = from(order);\nquery.where(order.status.eq(&quot;ready&quot;));\n// Example data\nList&lt;List&lt;String&gt;&gt; filterTypes = ImmutableList.of(\n        ImmutableList.of(&quot;t1&quot;, &quot;t2&quot;),\n        ImmutableList.of(&quot;t3&quot;, &quot;t4&quot;));\nList&lt;String&gt; flatFilterTypes = filterTypes.stream().flatMap(List::stream).collect(Collectors.toList());\nquery.where(order.type.in(flatFilterTypes));\n</code></pre>\n<p>I <em>suspect</em> that your database's query optimizer would do the same thing for either query (you'd have to check a <a href=\"https://www.postgresql.org/docs/current/using-explain.html\" rel=\"nofollow noreferrer\">query execution plan to be sure</a>), but it'd probably be more clear what's going on if you did simplified the query on the Java side rather than relying on the database query optimizer.</p>\n"}],"owner":{"account_id":6532709,"reputation":432,"user_id":5053357,"accept_rate":38,"display_name":"Nero"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":643,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674596129,"creation_date":1654876437,"question_id":72577001,"body_markdown":"How do I dynamically create &quot;OR&quot; predicates if I have a `List&lt;List&lt;String&gt;&gt;`\r\nI am using query dsl and spring data.\r\n\r\n    QOrder order = QOrder.order;\r\n    JPQLQuery&lt;Order&gt; query = from(order);\r\n    query.where(order.status.eq(&quot;ready&quot;));\r\n    List&lt;List&lt;String&gt;&gt; filterTypes;\r\n\r\nThis is what I am trying to do:\r\n\r\n    for(List&lt;String&gt; types : filterTypes) {\r\n        query.where(order.type.in(types));\r\n    }\r\n\r\nSo the result should be something like\r\n\r\n    select * from order o where o.status=&#39;ready&#39; and (o.type in(t1,t2) or o.type in(t3,t4))","title":"Query dsl - Looping through a list to create OR predicates","body":"<p>How do I dynamically create &quot;OR&quot; predicates if I have a <code>List&lt;List&lt;String&gt;&gt;</code>\nI am using query dsl and spring data.</p>\n<pre><code>QOrder order = QOrder.order;\nJPQLQuery&lt;Order&gt; query = from(order);\nquery.where(order.status.eq(&quot;ready&quot;));\nList&lt;List&lt;String&gt;&gt; filterTypes;\n</code></pre>\n<p>This is what I am trying to do:</p>\n<pre><code>for(List&lt;String&gt; types : filterTypes) {\n    query.where(order.type.in(types));\n}\n</code></pre>\n<p>So the result should be something like</p>\n<pre><code>select * from order o where o.status='ready' and (o.type in(t1,t2) or o.type in(t3,t4))\n</code></pre>\n"},{"tags":["java","kotlin","android-camera","arcore","screen-capture"],"comments":[{"owner":{"account_id":13859796,"reputation":10065,"user_id":10005707,"display_name":"Jaswant Singh"},"score":0,"creation_date":1702293207,"post_id":75227417,"comment_id":136874332,"body_markdown":"Have you found the solution?","body":"Have you found the solution?"}],"owner":{"account_id":110558,"reputation":10111,"user_id":292502,"accept_rate":83,"display_name":"Csaba Toth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1674595287,"creation_date":1674595287,"question_id":75227417,"body_markdown":"I&#39;m working on an augmented reality application based on ARCore. I&#39;d need to capture the screen to perform some extra manipulation, which wouldn&#39;t be a real time manipulation so it won&#39;t be in the OpenGL / shader level.\r\n\r\nI&#39;m calling the ARCore frame&#39;s `acquireCameraImage` https://developers.google.com/ar/reference/java/com/google/ar/core/Frame#acquireCameraImage()\r\nIt returns a YUV_420_888 image but the dimensions are unexpected (to me). My phone&#39;s screen has 1920x1080 resolution (16:9 aspect ratio). The returned YUV Image from the API has a 640x480 resolution (4:3 aspect ratio). I&#39;d need to access the unaugmented screen resolution (or at least aspect ratio) image.\r\n\r\nWhat&#39;s the best way to achieve that?","title":"How to obtain screen aspect ratio unaugmented camera image in an ARCore application?","body":"<p>I'm working on an augmented reality application based on ARCore. I'd need to capture the screen to perform some extra manipulation, which wouldn't be a real time manipulation so it won't be in the OpenGL / shader level.</p>\n<p>I'm calling the ARCore frame's <code>acquireCameraImage</code> <a href=\"https://developers.google.com/ar/reference/java/com/google/ar/core/Frame#acquireCameraImage()\" rel=\"nofollow noreferrer\">https://developers.google.com/ar/reference/java/com/google/ar/core/Frame#acquireCameraImage()</a>\nIt returns a YUV_420_888 image but the dimensions are unexpected (to me). My phone's screen has 1920x1080 resolution (16:9 aspect ratio). The returned YUV Image from the API has a 640x480 resolution (4:3 aspect ratio). I'd need to access the unaugmented screen resolution (or at least aspect ratio) image.</p>\n<p>What's the best way to achieve that?</p>\n"},{"tags":["java","mockito","powermockito","testng.xml"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1674589149,"post_id":75222794,"comment_id":132745219,"body_markdown":"I don&#39;t think your test is testing anything useful; everything is mocked out. What are you trying to test?","body":"I don&#39;t think your test is testing anything useful; everything is mocked out. What are you trying to test?"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674595214,"creation_date":1674589033,"answer_id":75226430,"question_id":75222794,"body_markdown":"You have to ask yourself: what is your test actually testing? I&#39;d say: nothing. Everything important is mocked out and the method simply returns what you tell the mocked object to return. So in effect, you are testing that Mockito/PowerMock does its job properly.\r\n\r\nMore useful tests could be:\r\n\r\n* Calling the method and verifying that the result is a non-empty string\r\n* Calling the method and verifying that the result is a valid base64 string\r\n* Calling the method two times and asserting that the result is different for both calls (real randomness allows the method to return the same output two times in a row, but the chances are really, _really_ slim for 32 bytes of random data).\r\n\r\nNB Do not create a new instance of `SecureRandom` every time your method is called; create it once when the class is loaded and reuse that instance.\r\n\r\nOr even better: inject the random instance, so you can replace it with a test double when testing. That way you have full control over the generated random value and can thus assert the method&#39;s output.\r\n\r\n****\r\n\r\nIgnoring that, back to your question:\r\n\r\n`Base64.getUrlEncoder()` is never set up to return anything but the default. The default for non-setup&#39;ed methods is … `null` mostly (with some exceptions, such as empty collections).\r\n\r\nEither manually stub every call in your chain, or specify `Answers.RETURNS_DEEP_STUBS` (so every call would return another call).\r\n\r\nAlso, if your test throws an exception, your `mockStatic` resource is never closed. It&#39;s better to use the try-with-resources pattern when working with `AutoCloseable` instances: it handles all the error conditions properly and closes your resource under any circumstances:\r\n\r\n    try (MockedStatic&lt;Base64&gt; mockedStaticBase64 = mockStatic(Base64.class)) {\r\n        String codeVerifier= &quot;&quot;;\r\n        when(Base64.getUrlEncoder().withoutPadding().encodeToString(any())).thenReturn(codeVerifier);\r\n        final String codeVerifierReturned = PkceUtil.generateCodeVerifier();\r\n        \r\n        assertEquals(codeVerifierReturned, codeVerifier);\r\n        verify(Base64.getUrlEncoder().withoutPadding().encodeToString(any()));   \r\n    }\r\n\r\nOne question though: why do you want to mock the UrlEncoder to always return an empty string? If it is passed an empty string, it should already return one. What do you gain by mocking it (and then verifying that the mock has been called)?\r\n\r\nPS. [Everytime a mock returns a mock a fairy dies](https://tuhrig.de/everytime-a-mock-returns-a-mock-a-fairy-dies/)","title":"Nullpointerexception in when of testNG testing method","body":"<p>You have to ask yourself: what is your test actually testing? I'd say: nothing. Everything important is mocked out and the method simply returns what you tell the mocked object to return. So in effect, you are testing that Mockito/PowerMock does its job properly.</p>\n<p>More useful tests could be:</p>\n<ul>\n<li>Calling the method and verifying that the result is a non-empty string</li>\n<li>Calling the method and verifying that the result is a valid base64 string</li>\n<li>Calling the method two times and asserting that the result is different for both calls (real randomness allows the method to return the same output two times in a row, but the chances are really, <em>really</em> slim for 32 bytes of random data).</li>\n</ul>\n<p>NB Do not create a new instance of <code>SecureRandom</code> every time your method is called; create it once when the class is loaded and reuse that instance.</p>\n<p>Or even better: inject the random instance, so you can replace it with a test double when testing. That way you have full control over the generated random value and can thus assert the method's output.</p>\n<hr />\n<p>Ignoring that, back to your question:</p>\n<p><code>Base64.getUrlEncoder()</code> is never set up to return anything but the default. The default for non-setup'ed methods is … <code>null</code> mostly (with some exceptions, such as empty collections).</p>\n<p>Either manually stub every call in your chain, or specify <code>Answers.RETURNS_DEEP_STUBS</code> (so every call would return another call).</p>\n<p>Also, if your test throws an exception, your <code>mockStatic</code> resource is never closed. It's better to use the try-with-resources pattern when working with <code>AutoCloseable</code> instances: it handles all the error conditions properly and closes your resource under any circumstances:</p>\n<pre><code>try (MockedStatic&lt;Base64&gt; mockedStaticBase64 = mockStatic(Base64.class)) {\n    String codeVerifier= &quot;&quot;;\n    when(Base64.getUrlEncoder().withoutPadding().encodeToString(any())).thenReturn(codeVerifier);\n    final String codeVerifierReturned = PkceUtil.generateCodeVerifier();\n    \n    assertEquals(codeVerifierReturned, codeVerifier);\n    verify(Base64.getUrlEncoder().withoutPadding().encodeToString(any()));   \n}\n</code></pre>\n<p>One question though: why do you want to mock the UrlEncoder to always return an empty string? If it is passed an empty string, it should already return one. What do you gain by mocking it (and then verifying that the mock has been called)?</p>\n<p>PS. <a href=\"https://tuhrig.de/everytime-a-mock-returns-a-mock-a-fairy-dies/\" rel=\"nofollow noreferrer\">Everytime a mock returns a mock a fairy dies</a></p>\n"}],"owner":{"account_id":5851066,"reputation":479,"user_id":4609725,"accept_rate":43,"display_name":"robyp7"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75226430,"answer_count":1,"score":0,"last_activity_date":1674595214,"creation_date":1674569800,"question_id":75222794,"body_markdown":"I have to test a method with testNG framework:\r\n\r\n    public class PkceUtil {\r\n    \r\n        private PkceUtil(){\r\n            super();\r\n        }\r\n    \r\n        /**\r\n         * External application use this method for generating a Base64 URL encoded alphanumeric string of characters\r\n         * with a minimum length of 43 characters and a maximum length of 128 characters (code verifier).\r\n         * @return code verifier\r\n         */\r\n        public static String generateCodeVerifier(){\r\n            SecureRandom secureRandom = new SecureRandom();\r\n            byte[] codeVerifier = new byte[32];\r\n            secureRandom.nextBytes(codeVerifier);\r\n            return Base64.getUrlEncoder().withoutPadding().encodeToString(codeVerifier);\r\n        }\r\n    ..\r\n\r\nBut i get a Nullpointer in when(**Base64.getUrlEncoder()**...\r\n\r\n\r\n    import org.mockito.MockedStatic;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.powermock.modules.testng.PowerMockTestCase;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.util.Base64;\r\n    \r\n    import static org.mockito.Mockito.*;\r\n    import static org.testng.Assert.assertEquals;\r\n    \r\n    @PrepareForTest(Base64.class)\r\n    public class PkceUtilTest extends PowerMockTestCase {\r\n    \r\n    \r\n        @Test\r\n        public void testGenerateCodeVerifier() {\r\n            MockedStatic&lt;Base64&gt; mockedStaticBase64 = mockStatic(Base64.class);\r\n            String codeVerifier= &quot;&quot;;\r\n            23: --&gt;when(Base64.getUrlEncoder().withoutPadding().encodeToString(any())).thenReturn(codeVerifier);\r\n            final String codeVerifierReturned = PkceUtil.generateCodeVerifier();\r\n            \r\n            assertEquals(codeVerifierReturned, codeVerifier);\r\n            verify(Base64.getUrlEncoder().withoutPadding().encodeToString(any()));\r\n            \r\n            mockedStaticBase64.close();\r\n        }\r\n    }\r\n\r\n\r\njava.lang.NullPointerException\r\n\tat com.cadit.oidc.sdk.pkce.PkceUtilTest.testGenerateCodeVerifier(PkceUtilTest.java:23)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)\r\n\tat org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)\r\n\tat org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\r\n\tat org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)\r\n\tat org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)\r\n\tat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\r\n\tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1257)\r\n\tat org.testng.TestRunner.privateRun(TestRunner.java:764)\r\n\tat org.testng.TestRunner.run(TestRunner.java:585)\r\n\tat org.testng.SuiteRunner.runTest(SuiteRunner.java:384)\r\n\tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)\r\n\tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)\r\n\tat org.testng.SuiteRunner.run(SuiteRunner.java:286)\r\n\tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n\r\n\r\n     &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n                    &lt;version&gt;7.3.0&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.powermock&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.0.7&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.13&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.5.13&lt;/version&gt;\r\n                    &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n\r\nWhat&#39;s wrong with my test code?\r\n\r\nthanks ","title":"Nullpointerexception in when of testNG testing method","body":"<p>I have to test a method with testNG framework:</p>\n<pre><code>public class PkceUtil {\n\n    private PkceUtil(){\n        super();\n    }\n\n    /**\n     * External application use this method for generating a Base64 URL encoded alphanumeric string of characters\n     * with a minimum length of 43 characters and a maximum length of 128 characters (code verifier).\n     * @return code verifier\n     */\n    public static String generateCodeVerifier(){\n        SecureRandom secureRandom = new SecureRandom();\n        byte[] codeVerifier = new byte[32];\n        secureRandom.nextBytes(codeVerifier);\n        return Base64.getUrlEncoder().withoutPadding().encodeToString(codeVerifier);\n    }\n..\n</code></pre>\n<p>But i get a Nullpointer in when(<strong>Base64.getUrlEncoder()</strong>...</p>\n<pre><code>import org.mockito.MockedStatic;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.testng.PowerMockTestCase;\nimport org.testng.annotations.Test;\n\nimport java.util.Base64;\n\nimport static org.mockito.Mockito.*;\nimport static org.testng.Assert.assertEquals;\n\n@PrepareForTest(Base64.class)\npublic class PkceUtilTest extends PowerMockTestCase {\n\n\n    @Test\n    public void testGenerateCodeVerifier() {\n        MockedStatic&lt;Base64&gt; mockedStaticBase64 = mockStatic(Base64.class);\n        String codeVerifier= &quot;&quot;;\n        23: --&gt;when(Base64.getUrlEncoder().withoutPadding().encodeToString(any())).thenReturn(codeVerifier);\n        final String codeVerifierReturned = PkceUtil.generateCodeVerifier();\n        \n        assertEquals(codeVerifierReturned, codeVerifier);\n        verify(Base64.getUrlEncoder().withoutPadding().encodeToString(any()));\n        \n        mockedStaticBase64.close();\n    }\n}\n</code></pre>\n<p>java.lang.NullPointerException\nat com.cadit.oidc.sdk.pkce.PkceUtilTest.testGenerateCodeVerifier(PkceUtilTest.java:23)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:132)\nat org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:599)\nat org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:174)\nat org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)\nat org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:822)\nat org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:147)\nat org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)\nat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\nat java.util.ArrayList.forEach(ArrayList.java:1257)\nat org.testng.TestRunner.privateRun(TestRunner.java:764)\nat org.testng.TestRunner.run(TestRunner.java:585)\nat org.testng.SuiteRunner.runTest(SuiteRunner.java:384)\nat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:378)\nat org.testng.SuiteRunner.privateRun(SuiteRunner.java:337)\nat org.testng.SuiteRunner.run(SuiteRunner.java:286)\nat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)</p>\n<pre><code> &lt;dependency&gt;\n                &lt;groupId&gt;org.testng&lt;/groupId&gt;\n                &lt;artifactId&gt;testng&lt;/artifactId&gt;\n                &lt;version&gt;7.3.0&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n                &lt;artifactId&gt;powermock-module-testng&lt;/artifactId&gt;\n                &lt;version&gt;2.0.7&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n                &lt;version&gt;3.5.13&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n                &lt;version&gt;3.5.13&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n</code></pre>\n<p>What's wrong with my test code?</p>\n<p>thanks</p>\n"},{"tags":["java","sql","postgresql","eclipselink","postgres-14"],"comments":[{"owner":{"account_id":3484078,"reputation":2533,"user_id":2915423,"display_name":"helvete"},"score":0,"creation_date":1674640473,"post_id":75226129,"comment_id":132755739,"body_markdown":"In case there is a question about the `UUIDEclipseConverter` - it is a converter ispired by [this answer](https://stackoverflow.com/a/61291101/2915423).","body":"In case there is a question about the <code>UUIDEclipseConverter</code> - it is a converter ispired by <a href=\"https://stackoverflow.com/a/61291101/2915423\">this answer</a>."},{"owner":{"account_id":3484078,"reputation":2533,"user_id":2915423,"display_name":"helvete"},"score":0,"creation_date":1674652655,"post_id":75226129,"comment_id":132759670,"body_markdown":"I switched to a better workaround using [UuidGenerator](https://www.eclipse.org/eclipselink/api/2.7/org/eclipse/persistence/annotations/UuidGenerator.html), so I can avoid using `PrePersist` listener. But it is still a workaround as the value is generated on the application side.","body":"I switched to a better workaround using <a href=\"https://www.eclipse.org/eclipselink/api/2.7/org/eclipse/persistence/annotations/UuidGenerator.html\" rel=\"nofollow noreferrer\">UuidGenerator</a>, so I can avoid using <code>PrePersist</code> listener. But it is still a workaround as the value is generated on the application side."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1674661313,"post_id":75226129,"comment_id":132762829,"body_markdown":"UUIDGenerator that generates one app side is better IMO, as you can pre-allocated sequences independent of the database - so outside the transaction - and not have to obtain them &#39;after&#39; the insert. Identity didn&#39;t work all that well (or at all) with batch inserts on most DBs from what I remember, as lastval only returns the &#39;last&#39; value generated, not sequence of them. You might look at https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_returninsert.htm which, if you look at how it works for the Oracle platform, might be adapted for Postgres too - or use a stored proc","body":"UUIDGenerator that generates one app side is better IMO, as you can pre-allocated sequences independent of the database - so outside the transaction - and not have to obtain them &#39;after&#39; the insert. Identity didn&#39;t work all that well (or at all) with batch inserts on most DBs from what I remember, as lastval only returns the &#39;last&#39; value generated, not sequence of them. You might look at <a href=\"https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_returninsert.htm\" rel=\"nofollow noreferrer\">eclipse.org/eclipselink/documentation/2.4/jpa/extensions/&hellip;</a> which, if you look at how it works for the Oracle platform, might be adapted for Postgres too - or use a stored proc"}],"owner":{"account_id":3484078,"reputation":2533,"user_id":2915423,"display_name":"helvete"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674594147,"creation_date":1674587155,"question_id":75226129,"body_markdown":"I have a database running on `postgres` 14 RDBMS. This (relatively) late version has been selected specifically because it features `UUID` `DEFAULT` generation function.\r\n\r\nThe application that uses the DB is `JAX RS` `java` application running within `Payara` application container using `JPA` `EclipseLink` as its DB layer (ORM). I have configured the application to work with UUIDs as PKs almost without a problem so far as I was only *reading* the entities (that have `UUID` primary keys to be exact).\r\n\r\nRecently I am implementing a `POST` endpoint, that is to `INSERT` a record. Now there is a problem with `PK` `id` generation.\r\n\r\nThe table is defined like this:\r\n\r\n```\r\nCREATE TABLE field (                                                            \r\n    id UUID NOT NULL PRIMARY KEY DEFAULT gen_random_uuid(),                     \r\n    ...                                              \r\n);\r\n```\r\nUntil now I had the entity defined like this:\r\n\r\n```\r\n@Entity                                                                         \r\n@Converter(name=&quot;uuidConverter&quot;, converterClass=UUIDEclipseConverter.class)     \r\n@Table(name=&quot;field&quot;)                                                  \r\npublic class Field {                                                   \r\n                                                                                \r\n    @Id                                                                         \r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)                         \r\n    @Convert(&quot;uuidConverter&quot;)                                                   \r\n    @Column(nullable = false)                                                   \r\n    private UUID id;                                                \r\n\r\n    ...\r\n```\r\nAnd it works OK for reading the entites, relating to other entities even the UUIDs work as a part of composite keys of other tables.\r\n\r\nBut once I tried to insert an entity like this, the query fails. Three different failures for three different generation strategies:\r\n\r\n 1. `GenerationType.IDENTITY`:\r\n\r\nCrashes spectacularly with\r\n```\r\nException [EclipseLink-4002] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: lastval is not yet defined in this session\r\nError Code: 0\r\nCall: select lastval()\r\nQuery: ValueReadQuery(name=&quot;SEQ_GEN_IDENTITY&quot; sql=&quot;select lastval()&quot;)\r\n...\r\n```\r\n* There is no sequence, so the origin of the error is understandable.\r\n\r\n2. `GenerationType.TABLE`:\r\n```\r\nException [EclipseLink-4002] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.DatabaseException\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: relation &quot;planner.sequence&quot; does not exist\r\n  Position: 8\r\nError Code: 0\r\nCall: UPDATE planner.SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?\r\n\tbind =&gt; [2 parameters bound]\r\nQuery: DataModifyQuery(name=&quot;SEQ_GEN_TABLE&quot; sql=&quot;UPDATE planner.SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?&quot;)\r\n...\r\n```\r\n* Again, expecting a sequence, thus the failure.\r\n\r\n3. `GenerationType.SEQUENCE`: \r\nWithout much hope I tried the last option.\r\n```\r\nInternal Exception: org.postgresql.util.PSQLException: ERROR: relation &quot;planner.seq_gen_sequence&quot; does not exist\r\n  Position: 16\r\nError Code: 0\r\nCall: select nextval(&#39;planner.SEQ_GEN_SEQUENCE&#39;)\r\n...\r\n```\r\n* Understandably a failure occurred.\r\n\r\nSo I wonder how to achive to utilize the `DEFAULT` generation for a `PK` `ID` the RDBMS provides. \r\n\r\nAnother approaches I tried so far:\r\n\r\n 1. I had an idea just to remove the `GeneratedValue` annotation. I must admit it sounded quite promising, but failed, because the Eclipselink doesn&#39;t know it should utilize the `DEFAULT` generation the RDBMS provides. And so it tries to `INSERT` `NULL` value into a `NOT NULL` column.\r\n 2. Then I tried to set both `insertable` and `updatable` column properties to `false` which also fails, because JPA needs a writable PK identifier.\r\n3. So I removed `updatable` column property and the `INSERT` worked. But the JPA won&#39;t hydrate the autogenerated ID into the entity, so I cannot deterministically recognize which record had just been created, so not an ideal solution as well (I also need to return the ID to my API&#39;s consumer for it to be able to address the same record later)\r\n\r\nFor now I am using a workaround based on stripping the `GeneratedValue` annotation and generating random `UUID` at the application side via `PrePersist` listener, which I don&#39;t like, but can live with should there be no better solution. Ie:\r\n```\r\n@Entity                                                                         \r\n@Converter(name=&quot;uuidConverter&quot;, converterClass=UUIDEclipseConverter.class)     \r\n@Table(name=&quot;field&quot;)                                                            \r\npublic class Field {                                                            \r\n                                                                                \r\n    @Id                                                                         \r\n    @Convert(&quot;uuidConverter&quot;)                                                   \r\n    @Column(nullable = false, columnDefinition=&quot;uuid&quot;)                          \r\n    private UUID id;                                           \r\n\r\n    ...\r\n\r\n    @PrePersist                                                                 \r\n    private void prePersist() {                                                 \r\n        if (id != null)                                                         \r\n            return;                                                             \r\n        // TODO: I do not like this solution at all                             \r\n        id = UUID.randomUUID();                                                 \r\n    }                                                                           \r\n}   \r\n```\r\n\r\nMy question therefore is:\r\n\r\nIs there a way to configure EclipseLink JPA (via entity annotation?) to utilize a `DEFAULT` value provided for a `PK` column by RDBMS (Posgres 14&#39;s `gen_random_uuid()` function specifically) without the need to generate it manually on the application side?\r\n\r\nThere surely has to be an elegant solution, has it not?\r\n\r\nVersions:\r\n * Java openjdk version &quot;1.8.0_312&quot;\r\n * Payara (full) 5.2021.10\r\n * EclipseLink 2.7\r\n * PostgreSQL 14.6\r\n\r\n(no hibernate, no spring)\r\n\r\nThe whole stack is running in a docker environment which DNM IMO.","title":"Is there a way to use generated Identity PK (UUID as DEFAULT) using Eclipselink on Postgres 14?","body":"<p>I have a database running on <code>postgres</code> 14 RDBMS. This (relatively) late version has been selected specifically because it features <code>UUID</code> <code>DEFAULT</code> generation function.</p>\n<p>The application that uses the DB is <code>JAX RS</code> <code>java</code> application running within <code>Payara</code> application container using <code>JPA</code> <code>EclipseLink</code> as its DB layer (ORM). I have configured the application to work with UUIDs as PKs almost without a problem so far as I was only <em>reading</em> the entities (that have <code>UUID</code> primary keys to be exact).</p>\n<p>Recently I am implementing a <code>POST</code> endpoint, that is to <code>INSERT</code> a record. Now there is a problem with <code>PK</code> <code>id</code> generation.</p>\n<p>The table is defined like this:</p>\n<pre><code>CREATE TABLE field (                                                            \n    id UUID NOT NULL PRIMARY KEY DEFAULT gen_random_uuid(),                     \n    ...                                              \n);\n</code></pre>\n<p>Until now I had the entity defined like this:</p>\n<pre><code>@Entity                                                                         \n@Converter(name=&quot;uuidConverter&quot;, converterClass=UUIDEclipseConverter.class)     \n@Table(name=&quot;field&quot;)                                                  \npublic class Field {                                                   \n                                                                                \n    @Id                                                                         \n    @GeneratedValue(strategy = GenerationType.IDENTITY)                         \n    @Convert(&quot;uuidConverter&quot;)                                                   \n    @Column(nullable = false)                                                   \n    private UUID id;                                                \n\n    ...\n</code></pre>\n<p>And it works OK for reading the entites, relating to other entities even the UUIDs work as a part of composite keys of other tables.</p>\n<p>But once I tried to insert an entity like this, the query fails. Three different failures for three different generation strategies:</p>\n<ol>\n<li><code>GenerationType.IDENTITY</code>:</li>\n</ol>\n<p>Crashes spectacularly with</p>\n<pre><code>Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: lastval is not yet defined in this session\nError Code: 0\nCall: select lastval()\nQuery: ValueReadQuery(name=&quot;SEQ_GEN_IDENTITY&quot; sql=&quot;select lastval()&quot;)\n...\n</code></pre>\n<ul>\n<li>There is no sequence, so the origin of the error is understandable.</li>\n</ul>\n<ol start=\"2\">\n<li><code>GenerationType.TABLE</code>:</li>\n</ol>\n<pre><code>Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.7.9.payara-p1): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: org.postgresql.util.PSQLException: ERROR: relation &quot;planner.sequence&quot; does not exist\n  Position: 8\nError Code: 0\nCall: UPDATE planner.SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?\n    bind =&gt; [2 parameters bound]\nQuery: DataModifyQuery(name=&quot;SEQ_GEN_TABLE&quot; sql=&quot;UPDATE planner.SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?&quot;)\n...\n</code></pre>\n<ul>\n<li>Again, expecting a sequence, thus the failure.</li>\n</ul>\n<ol start=\"3\">\n<li><code>GenerationType.SEQUENCE</code>:\nWithout much hope I tried the last option.</li>\n</ol>\n<pre><code>Internal Exception: org.postgresql.util.PSQLException: ERROR: relation &quot;planner.seq_gen_sequence&quot; does not exist\n  Position: 16\nError Code: 0\nCall: select nextval('planner.SEQ_GEN_SEQUENCE')\n...\n</code></pre>\n<ul>\n<li>Understandably a failure occurred.</li>\n</ul>\n<p>So I wonder how to achive to utilize the <code>DEFAULT</code> generation for a <code>PK</code> <code>ID</code> the RDBMS provides.</p>\n<p>Another approaches I tried so far:</p>\n<ol>\n<li>I had an idea just to remove the <code>GeneratedValue</code> annotation. I must admit it sounded quite promising, but failed, because the Eclipselink doesn't know it should utilize the <code>DEFAULT</code> generation the RDBMS provides. And so it tries to <code>INSERT</code> <code>NULL</code> value into a <code>NOT NULL</code> column.</li>\n<li>Then I tried to set both <code>insertable</code> and <code>updatable</code> column properties to <code>false</code> which also fails, because JPA needs a writable PK identifier.</li>\n<li>So I removed <code>updatable</code> column property and the <code>INSERT</code> worked. But the JPA won't hydrate the autogenerated ID into the entity, so I cannot deterministically recognize which record had just been created, so not an ideal solution as well (I also need to return the ID to my API's consumer for it to be able to address the same record later)</li>\n</ol>\n<p>For now I am using a workaround based on stripping the <code>GeneratedValue</code> annotation and generating random <code>UUID</code> at the application side via <code>PrePersist</code> listener, which I don't like, but can live with should there be no better solution. Ie:</p>\n<pre><code>@Entity                                                                         \n@Converter(name=&quot;uuidConverter&quot;, converterClass=UUIDEclipseConverter.class)     \n@Table(name=&quot;field&quot;)                                                            \npublic class Field {                                                            \n                                                                                \n    @Id                                                                         \n    @Convert(&quot;uuidConverter&quot;)                                                   \n    @Column(nullable = false, columnDefinition=&quot;uuid&quot;)                          \n    private UUID id;                                           \n\n    ...\n\n    @PrePersist                                                                 \n    private void prePersist() {                                                 \n        if (id != null)                                                         \n            return;                                                             \n        // TODO: I do not like this solution at all                             \n        id = UUID.randomUUID();                                                 \n    }                                                                           \n}   \n</code></pre>\n<p>My question therefore is:</p>\n<p>Is there a way to configure EclipseLink JPA (via entity annotation?) to utilize a <code>DEFAULT</code> value provided for a <code>PK</code> column by RDBMS (Posgres 14's <code>gen_random_uuid()</code> function specifically) without the need to generate it manually on the application side?</p>\n<p>There surely has to be an elegant solution, has it not?</p>\n<p>Versions:</p>\n<ul>\n<li>Java openjdk version &quot;1.8.0_312&quot;</li>\n<li>Payara (full) 5.2021.10</li>\n<li>EclipseLink 2.7</li>\n<li>PostgreSQL 14.6</li>\n</ul>\n<p>(no hibernate, no spring)</p>\n<p>The whole stack is running in a docker environment which DNM IMO.</p>\n"},{"tags":["java","json","parsing","gson"],"answers":[{"comments":[{"owner":{"account_id":2567026,"reputation":123,"user_id":2226792,"display_name":"Sergejs Visockis"},"score":0,"creation_date":1613375425,"post_id":20152805,"comment_id":117045686,"body_markdown":"getAsString() intentionally throws an UnsupportedOperationException","body":"getAsString() intentionally throws an UnsupportedOperationException"}],"tags":[],"owner":{"account_id":473351,"reputation":5860,"user_id":882403,"display_name":"dimoniy"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1385147912,"creation_date":1385147912,"answer_id":20152805,"question_id":20152710,"body_markdown":"Try \r\n\r\n    String result = jobj.get(&quot;test&quot;).getAsString();\r\n\r\nget(String) method returns [JsonElement][1] object which you then should get the value from.\r\n\r\n\r\n  [1]: http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/JsonElement.html","title":"GSON - Get JSON value from String","body":"<p>Try </p>\n\n<pre><code>String result = jobj.get(\"test\").getAsString();\n</code></pre>\n\n<p>get(String) method returns <a href=\"http://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/com/google/gson/JsonElement.html\" rel=\"noreferrer\">JsonElement</a> object which you then should get the value from.</p>\n"},{"comments":[{"owner":{"account_id":1909885,"reputation":381,"user_id":1723991,"display_name":"Gregzenegair"},"score":0,"creation_date":1633514897,"post_id":20152866,"comment_id":122777914,"body_markdown":"This would throw a NPE if the entry &quot;test&quot; does not exists","body":"This would throw a NPE if the entry &quot;test&quot; does not exists"}],"tags":[],"owner":{"account_id":3542644,"reputation":3919,"user_id":2959331,"display_name":"Sanj"},"comment_count":1,"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1385156312,"creation_date":1385148090,"answer_id":20152866,"question_id":20152710,"body_markdown":"    double result = jobj.get(&quot;test&quot;).getAsDouble();\r\n","title":"GSON - Get JSON value from String","body":"<pre><code>double result = jobj.get(\"test\").getAsDouble();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3447253,"reputation":3210,"user_id":2887760,"accept_rate":100,"display_name":"Athena"},"score":5,"creation_date":1535483527,"post_id":52062526,"comment_id":91080040,"body_markdown":"Can you elaborate on your answer a bit?","body":"Can you elaborate on your answer a bit?"},{"owner":{"account_id":8102714,"reputation":1403,"user_id":6105280,"display_name":"Timetrax"},"score":0,"creation_date":1535574449,"post_id":52062526,"comment_id":91121473,"body_markdown":"if you ever have a string =&gt; in this case &quot;result&quot; was set to a string on line 3. \nThe key &quot;test&quot; in the myJSONString variable has a value of 100.00\n\nIn order to &quot;DOUBLEFY&quot; this value of 100.00, you call the parseDouble method from the Double class.  Thats is how to convert a VALID string double into a double \nDouble.parseDouble(result); will turn the string &quot;result&#39; into a double","body":"if you ever have a string =&gt; in this case &quot;result&quot; was set to a string on line 3.  The key &quot;test&quot; in the myJSONString variable has a value of 100.00  In order to &quot;DOUBLEFY&quot; this value of 100.00, you call the parseDouble method from the Double class.  Thats is how to convert a VALID string double into a double  Double.parseDouble(result); will turn the string &quot;result&#39; into a double"}],"tags":[],"owner":{"account_id":8102714,"reputation":1403,"user_id":6105280,"display_name":"Timetrax"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536930318,"creation_date":1535473743,"answer_id":52062526,"question_id":20152710,"body_markdown":"\r\n    double getDoubleFromString = Double.parseDouble(result);\r\n\r\nEDIT: \r\nper the comment below: Here is some explanation\r\n\r\nif you ever have a string =&gt; in this case &quot;result&quot; was set to a string on line 3. The key &quot;test&quot; in the myJSONString variable has a value of 100.00 In order to &quot;DOUBLEFY&quot; this value of 100.00, you call the parseDouble method from the Double class. Thats is how to convert a VALID string double into a double Double.parseDouble(result); will turn the string &quot;result&#39; into a double ","title":"GSON - Get JSON value from String","body":"<pre><code>double getDoubleFromString = Double.parseDouble(result);\n</code></pre>\n\n<p>EDIT: \nper the comment below: Here is some explanation</p>\n\n<p>if you ever have a string => in this case \"result\" was set to a string on line 3. The key \"test\" in the myJSONString variable has a value of 100.00 In order to \"DOUBLEFY\" this value of 100.00, you call the parseDouble method from the Double class. Thats is how to convert a VALID string double into a double Double.parseDouble(result); will turn the string \"result' into a double </p>\n"}],"owner":{"account_id":2182911,"reputation":3963,"user_id":1931996,"accept_rate":64,"display_name":"jan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116588,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":20152866,"answer_count":3,"score":76,"last_activity_date":1674594100,"creation_date":1385147593,"question_id":20152710,"body_markdown":"I&#39;m trying to parse the JSON String &quot;{&#39;test&#39;: &#39;100.00&#39;}&quot; and in order to get the value: `100.00` with the GSON library. My code looks like this:\r\n\r\n\r\n\tString myJSONString = &quot;{&#39;test&#39;: &#39;100.00&#39;}&quot;;\r\n\tJsonObject jobj = new Gson().fromJson(myJSONString, JsonObject.class);\r\n\r\n\tString result = jobj.get(&quot;test&quot;).toString();\r\n\r\n\tSystem.out.println(result);\r\n\r\nMy result looks like this: `&quot;100.00&quot;`, but I would need just `100.00` without the quotes. How can this be achieved? ","title":"GSON - Get JSON value from String","body":"<p>I'm trying to parse the JSON String &quot;{'test': '100.00'}&quot; and in order to get the value: <code>100.00</code> with the GSON library. My code looks like this:</p>\n<pre><code>String myJSONString = &quot;{'test': '100.00'}&quot;;\nJsonObject jobj = new Gson().fromJson(myJSONString, JsonObject.class);\n\nString result = jobj.get(&quot;test&quot;).toString();\n\nSystem.out.println(result);\n</code></pre>\n<p>My result looks like this: <code>&quot;100.00&quot;</code>, but I would need just <code>100.00</code> without the quotes. How can this be achieved?</p>\n"},{"tags":["java","android","kotlin","callback","azure-ad-msal"],"owner":{"account_id":113220,"reputation":15923,"user_id":298288,"accept_rate":55,"display_name":"stefan.at.kotlin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674593930,"creation_date":1674593930,"question_id":75227244,"body_markdown":"I want to to be notified if the logged in user in MSAL changes. I therefore used `msalClient.getCurrentAccountAsync(callback)` but the callback is only called once initially, not after changes like logging in. Is that the intended behaviour? How can I observe the logged in user? Do I have to build my own wrapper around MSAL so I know a user logged in/logged out etc?\r\n\r\n\r\n    val msalClient = PublicClientApplication.createSingleAccountPublicClientApplication(\r\n    \tapplicationContext,\r\n    \tR.raw.msal_config\r\n    )\r\n    \r\n    val callback = object : CurrentAccountCallback {\r\n    \toverride fun onAccountLoaded(activeAccount: IAccount?) {\r\n    \t\tTimber.i(&quot;MSAL monitor login: getCurrentAccountAsync callback onAccountLoaded&quot;)\r\n    \t}\r\n    \r\n    \toverride fun onAccountChanged(\r\n    \t\tpriorAccount: IAccount?,\r\n    \t\tcurrentAccount: IAccount?\r\n    \t) {\r\n    \t\tTimber.i(&quot;MSAL monitor login: getCurrentAccountAsync callback onAccountChanged&quot;)\r\n    \t}\r\n    \r\n    \toverride fun onError(exception: MsalException) {\r\n    \t\tTimber.e(&quot;MSAL monitor login: getCurrentAccountAsync callback onError, exception follows:&quot;)\r\n    \t}\r\n    }\r\n    \r\n    msalClient.getCurrentAccountAsync(callback)\r\n    // callback is fired once directly after registering it\r\n    \r\n    // call msalClient.signIn(...) and sign in\r\n    // I would expect the callback to be fired again after the login but it is not\r\n\r\n","title":"Observe logged in user in MSAL?","body":"<p>I want to to be notified if the logged in user in MSAL changes. I therefore used <code>msalClient.getCurrentAccountAsync(callback)</code> but the callback is only called once initially, not after changes like logging in. Is that the intended behaviour? How can I observe the logged in user? Do I have to build my own wrapper around MSAL so I know a user logged in/logged out etc?</p>\n<pre><code>val msalClient = PublicClientApplication.createSingleAccountPublicClientApplication(\n    applicationContext,\n    R.raw.msal_config\n)\n\nval callback = object : CurrentAccountCallback {\n    override fun onAccountLoaded(activeAccount: IAccount?) {\n        Timber.i(&quot;MSAL monitor login: getCurrentAccountAsync callback onAccountLoaded&quot;)\n    }\n\n    override fun onAccountChanged(\n        priorAccount: IAccount?,\n        currentAccount: IAccount?\n    ) {\n        Timber.i(&quot;MSAL monitor login: getCurrentAccountAsync callback onAccountChanged&quot;)\n    }\n\n    override fun onError(exception: MsalException) {\n        Timber.e(&quot;MSAL monitor login: getCurrentAccountAsync callback onError, exception follows:&quot;)\n    }\n}\n\nmsalClient.getCurrentAccountAsync(callback)\n// callback is fired once directly after registering it\n\n// call msalClient.signIn(...) and sign in\n// I would expect the callback to be fired again after the login but it is not\n</code></pre>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":3930885,"reputation":1913,"user_id":3249497,"accept_rate":22,"display_name":"Sergiy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653045350,"creation_date":1653045350,"answer_id":72318039,"question_id":72135559,"body_markdown":"I also experienced the same issue. And it seems not to be fixed yet(in 6.0.1).\r\n\r\nAt least I see in https://github.com/hibernate/hibernate-orm/blob/c18e611ed6786fd62a6bf2d17c39589c2452fe35/hibernate-core/src/main/java/org/hibernate/internal/FastSessionServices.java that old (and deprecated) javax.* properties are still set and then logged by LegacySpecHelper:\r\n\r\n    p.putIfAbsent( AvailableSettings.FLUSH_MODE, FlushMode.AUTO.name() );\r\n    p.putIfAbsent( JPA_LOCK_SCOPE, PessimisticLockScope.EXTENDED.name() );\r\n    p.putIfAbsent( JAKARTA_LOCK_SCOPE, PessimisticLockScope.EXTENDED.name() );\r\n    p.putIfAbsent( JPA_LOCK_TIMEOUT, LockOptions.WAIT_FOREVER );","title":"Upgrading to hibernate 6: Encountered deprecated setting [javax.persistence.lock.timeout], use [jakarta.persistence.lock.timeout] instead","body":"<p>I also experienced the same issue. And it seems not to be fixed yet(in 6.0.1).</p>\n<p>At least I see in <a href=\"https://github.com/hibernate/hibernate-orm/blob/c18e611ed6786fd62a6bf2d17c39589c2452fe35/hibernate-core/src/main/java/org/hibernate/internal/FastSessionServices.java\" rel=\"nofollow noreferrer\">https://github.com/hibernate/hibernate-orm/blob/c18e611ed6786fd62a6bf2d17c39589c2452fe35/hibernate-core/src/main/java/org/hibernate/internal/FastSessionServices.java</a> that old (and deprecated) javax.* properties are still set and then logged by LegacySpecHelper:</p>\n<pre><code>p.putIfAbsent( AvailableSettings.FLUSH_MODE, FlushMode.AUTO.name() );\np.putIfAbsent( JPA_LOCK_SCOPE, PessimisticLockScope.EXTENDED.name() );\np.putIfAbsent( JAKARTA_LOCK_SCOPE, PessimisticLockScope.EXTENDED.name() );\np.putIfAbsent( JPA_LOCK_TIMEOUT, LockOptions.WAIT_FOREVER );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10299803,"reputation":1540,"user_id":7598851,"display_name":"MartinBG"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1674593834,"creation_date":1674593404,"answer_id":75227151,"question_id":72135559,"body_markdown":"According to [HHH-15768][1] it is going to be fixed in Hibernate 6.1.7.\r\n\r\nA temporary workaround is to set the property explicitly (accepted modes are defined [here][2]):\r\n```\r\nspring.jpa.properties.jakarta.persistence.sharedCache.mode=ENABLE_SELECTIVE\r\n```\r\n\r\nMore on the problem and the workaround - [here][3]\r\n\r\n\r\n  [1]: https://hibernate.atlassian.net/browse/HHH-15768\r\n  [2]: https://github.com/jakartaee/persistence/blob/master/api/src/main/java/jakarta/persistence/SharedCacheMode.java\r\n  [3]: https://github.com/spring-projects/spring-data-jpa/issues/2717","title":"Upgrading to hibernate 6: Encountered deprecated setting [javax.persistence.lock.timeout], use [jakarta.persistence.lock.timeout] instead","body":"<p>According to <a href=\"https://hibernate.atlassian.net/browse/HHH-15768\" rel=\"nofollow noreferrer\">HHH-15768</a> it is going to be fixed in Hibernate 6.1.7.</p>\n<p>A temporary workaround is to set the property explicitly (accepted modes are defined <a href=\"https://github.com/jakartaee/persistence/blob/master/api/src/main/java/jakarta/persistence/SharedCacheMode.java\" rel=\"nofollow noreferrer\">here</a>):</p>\n<pre><code>spring.jpa.properties.jakarta.persistence.sharedCache.mode=ENABLE_SELECTIVE\n</code></pre>\n<p>More on the problem and the workaround - <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2717\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":87760,"reputation":14178,"user_id":243203,"accept_rate":77,"display_name":"Kurru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3014,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1674593834,"creation_date":1651804581,"question_id":72135559,"body_markdown":"I am trying to upgrade to Hibernate 6, but this causes a huge amount of log spam. For every query with my database I get a warning in my console logs: \r\n\r\n     WARN deprecation:44 - HHH90000021: \r\n     Encountered deprecated setting [javax.persistence.lock.timeout], use [jakarta.persistence.lock.timeout] instead\r\n\r\nOur code base does not reference `javax.persistence.lock.timeout` and setting the jakarta property into the peristence.xml file does nothing. \r\n\r\nThis issue doesn&#39;t seem to be documented on the internet, I could only find a single reference to this in a [hibernate bug report][1] team, but there are no details.\r\n\r\nIf its relevant, we are connecting to Postgres on AWS RDS, via the C3P0 connection pool.\r\n\r\nThis warning continues to appear after removing C3P0 from the server so I don&#39;t think this default is coming from there. \r\n\r\nShould I just suppress this log source in my log properties file or are there alternatives others are following?\r\n\r\n\r\n  [1]: https://hibernate.atlassian.net/browse/HHH-15189","title":"Upgrading to hibernate 6: Encountered deprecated setting [javax.persistence.lock.timeout], use [jakarta.persistence.lock.timeout] instead","body":"<p>I am trying to upgrade to Hibernate 6, but this causes a huge amount of log spam. For every query with my database I get a warning in my console logs:</p>\n<pre><code> WARN deprecation:44 - HHH90000021: \n Encountered deprecated setting [javax.persistence.lock.timeout], use [jakarta.persistence.lock.timeout] instead\n</code></pre>\n<p>Our code base does not reference <code>javax.persistence.lock.timeout</code> and setting the jakarta property into the peristence.xml file does nothing.</p>\n<p>This issue doesn't seem to be documented on the internet, I could only find a single reference to this in a <a href=\"https://hibernate.atlassian.net/browse/HHH-15189\" rel=\"nofollow noreferrer\">hibernate bug report</a> team, but there are no details.</p>\n<p>If its relevant, we are connecting to Postgres on AWS RDS, via the C3P0 connection pool.</p>\n<p>This warning continues to appear after removing C3P0 from the server so I don't think this default is coming from there.</p>\n<p>Should I just suppress this log source in my log properties file or are there alternatives others are following?</p>\n"},{"tags":["java","datetime"],"owner":{"account_id":27612870,"reputation":1,"user_id":21075580,"display_name":"Worst Developer Ever"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1674593506,"answer_count":0,"score":0,"last_activity_date":1674593195,"creation_date":1674593195,"question_id":75227126,"body_markdown":"I&#39;m trying to make a code that select files from a specific folder by date, and move to other directory. I have searching for a specific method, but I couldn&#39;t find. Can you help-me?\r\n\r\nI don&#39;t have a code, because this is just a part of the code that I coundn&#39;t make.\r\n","title":"Selecting files by date in java","body":"<p>I'm trying to make a code that select files from a specific folder by date, and move to other directory. I have searching for a specific method, but I couldn't find. Can you help-me?</p>\n<p>I don't have a code, because this is just a part of the code that I coundn't make.</p>\n"},{"tags":["java","python-3.x","jwt","pyjwt"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1674577136,"post_id":75224283,"comment_id":132741426,"body_markdown":"Did you check if the token is already expired?","body":"Did you check if the token is already expired?"},{"owner":{"account_id":11359354,"reputation":466,"user_id":8328000,"display_name":"Parker Dell"},"score":0,"creation_date":1674577303,"post_id":75224283,"comment_id":132741494,"body_markdown":"Right now I dont care if password is expired, i just changed the comment to ignore exp check for now since i know that part works","body":"Right now I dont care if password is expired, i just changed the comment to ignore exp check for now since i know that part works"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":1,"creation_date":1674577750,"post_id":75224283,"comment_id":132741655,"body_markdown":"The token that you show in your Python example **can&#39;t** be verified with the secret that you showed us. And on jwt.io you made a common mistake in using the tool and got a false verification: You clicked on &quot;secret base64 encoded&quot; (which is not the case) and that changed the signature. In [my answer here](https://stackoverflow.com/questions/69862105/jwt-io-says-signature-verified-even-when-key-is-not-provided) I describe how to do it right.","body":"The token that you show in your Python example <b>can&#39;t</b> be verified with the secret that you showed us. And on jwt.io you made a common mistake in using the tool and got a false verification: You clicked on &quot;secret base64 encoded&quot; (which is not the case) and that changed the signature. In <a href=\"https://stackoverflow.com/questions/69862105/jwt-io-says-signature-verified-even-when-key-is-not-provided\">my answer here</a> I describe how to do it right."},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1674577843,"post_id":75224283,"comment_id":132741689,"body_markdown":"Aside from that, the Python code looks fine, and  wonder if you just made a mistake by copying back the token from jwt.io to your code instead of using the original token from your Java code.","body":"Aside from that, the Python code looks fine, and  wonder if you just made a mistake by copying back the token from jwt.io to your code instead of using the original token from your Java code."},{"owner":{"account_id":11359354,"reputation":466,"user_id":8328000,"display_name":"Parker Dell"},"score":0,"creation_date":1674578070,"post_id":75224283,"comment_id":132741772,"body_markdown":"I followed the steps you listed, i added the key first (checked the box for encoded) `CFB86D5E4DC4C11C6AFA9E5DF5AD9` and then entered the jwt and it shows verified `eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTY3NDUwMzE2NSwibmJmIjoxNjc0NTAzMTY1LCJpc3MiOiJ0ZXN0IiwiZXhwIjoxNjc0NTA2NzY1fQ.wPc98PTVmZKKUEBmuKZG3Z_fXrC7QLLpLE9BXHR3Sw4`","body":"I followed the steps you listed, i added the key first (checked the box for encoded) <code>CFB86D5E4DC4C11C6AFA9E5DF5AD9</code> and then entered the jwt and it shows verified <code>eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTY3NDUwMzE&zwnj;&#8203;2NSwibmJmIjoxNjc0NTA&zwnj;&#8203;zMTY1LCJpc3MiOiJ0ZXN&zwnj;&#8203;0IiwiZXhwIjoxNjc0NTA&zwnj;&#8203;2NzY1fQ.wPc98PTVmZKK&zwnj;&#8203;UEBmuKZG3Z_fXrC7QLLp&zwnj;&#8203;LE9BXHR3Sw4</code>"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1674578322,"post_id":75224283,"comment_id":132741852,"body_markdown":"no, clicking on the box &quot;secret base64 encoded&quot; is the wrong part. The secret is not base64 encoded. It&#39;s a hex ascii string. Java treats it as a normal string when it signs the token. I believe the token that your Java code created is not the one you show in your python example. Please check again. (The token in your Python example looks identical to the one on the jwt.io screenshot)","body":"no, clicking on the box &quot;secret base64 encoded&quot; is the wrong part. The secret is not base64 encoded. It&#39;s a hex ascii string. Java treats it as a normal string when it signs the token. I believe the token that your Java code created is not the one you show in your python example. Please check again. (The token in your Python example looks identical to the one on the jwt.io screenshot)"},{"owner":{"account_id":11359354,"reputation":466,"user_id":8328000,"display_name":"Parker Dell"},"score":0,"creation_date":1674584839,"post_id":75224283,"comment_id":132743925,"body_markdown":"I was able to verify that the code matches. For testing purposes i changed the secret and generated a new token with it  `687ADCC21ACAC129ED4BA3781759F` and token `eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJyb290IiwiaWF0IjoxNjc0NTg0NjY4LCJuYmYiOjE2NzQ1ODQ2NjgsImlzcyI6ImRlZXBjb3JlIiwiZXhwIjoxNjc0NTg4MjY4fQ.9RYbzL1s7ZkNTr0KzTj7RSuocdNxJdc8KI9PXuYyzTA`","body":"I was able to verify that the code matches. For testing purposes i changed the secret and generated a new token with it  <code>687ADCC21ACAC129ED4BA3781759F</code> and token <code>eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJyb290IiwiaWF0IjoxNjc0NTg0NjY&zwnj;&#8203;4LCJuYmYiOjE2NzQ1ODQ&zwnj;&#8203;2NjgsImlzcyI6ImRlZXB&zwnj;&#8203;jb3JlIiwiZXhwIjoxNjc&zwnj;&#8203;0NTg4MjY4fQ.9RYbzL1s&zwnj;&#8203;7ZkNTr0KzTj7RSuocdNx&zwnj;&#8203;Jdc8KI9PXuYyzTA</code>"},{"owner":{"account_id":9899349,"reputation":20524,"user_id":7329832,"display_name":"jps"},"score":0,"creation_date":1674586051,"post_id":75224283,"comment_id":132744302,"body_markdown":"What does it mean now? Can you verify a token from Java in your Python code?","body":"What does it mean now? Can you verify a token from Java in your Python code?"},{"owner":{"account_id":11359354,"reputation":466,"user_id":8328000,"display_name":"Parker Dell"},"score":0,"creation_date":1674586639,"post_id":75224283,"comment_id":132744457,"body_markdown":"sorry for lack of clarification. I meant i went into the java code and printed out the secret and then made a new token and still get errors","body":"sorry for lack of clarification. I meant i went into the java code and printed out the secret and then made a new token and still get errors"}],"owner":{"account_id":11359354,"reputation":466,"user_id":8328000,"display_name":"Parker Dell"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674593185,"creation_date":1674577017,"question_id":75224283,"body_markdown":"I have a Java Spring boot API that a user logs in and is issued a JWT token ( i cant change this code). I have a new python API that needs to parse the JWT to verify its been authenticated.\r\n\r\nJava Code\r\n```\r\nimport io.jsonwebtoken.Jwts;\r\n\r\n   private String secretKey = &quot;CFB86D5E4DC4C11C6AFA9E5DF5AD9&quot;\r\n\r\n   String jwt = Jwts.builder()\r\n          .setSubject(userByUsername.getUsername())\r\n          .setIssuedAt(now)\r\n          .setNotBefore(now)\r\n          .setIssuer(&quot;my-authenticator&quot;)\r\n          .setExpiration(new Date(System.currentTimeMillis() + (1000L * tokenMaxAge)))\r\n          .signWith(SignatureAlgorithm.HS256, secretKey)\r\n          .compact();\r\n```\r\nInside my python code i have\r\n```\r\nimport jwt\r\n\r\n    token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTY3NDUwMzE2NSwibmJmIjoxNjc0NTAzMTY1LCJpc3MiOiJ0ZXN0IiwiZXhwIjoxNjc0NTA2NzY1fQ.wPc98PTVmZKKUEBmuKZG3Z_fXrC7QLLpLE9BXHR3Sw4&quot;\r\n    key = &#39;CFB86D5E4DC4C11C6AFA9E5DF5AD9&#39;\r\n\r\n    jwt_options = {\r\n        &#39;verify_signature&#39;: True,\r\n        &#39;verify_exp&#39;: False,\r\n        &#39;verify_nbf&#39;: False,\r\n        &#39;verify_iat&#39;: True,\r\n        &#39;verify_aud&#39;: False\r\n    }\r\n\r\n    parts = jwt.decode(token, key, algorithms=&quot;HS256&quot;, options=jwt_options)\r\n\r\n    print(parts)\r\n\r\n```\r\nIf I set `verify_signature = False` everything works and i can parse the jwt. But I need to have this set to true. If I go to jwt.io the signature shows up as verified\r\n[![enter image description here](https://i.stack.imgur.com/JACVv.png)](https://i.stack.imgur.com/JACVv.png)\r\nI&#39;ve tried playing around with encoding/decoding the string but Im not sure what I&#39;m missing\r\n\r\n\r\n\r\nI have tried decoding and encoding the key but havn&#39;t had success. The secret is the same in the java application and python application\r\n\r\nex1.  key = b&#39;CFB86D5E4DC4C11C6AFA9E5DF5AD9&#39;\r\n\r\nex2.  key = str(base64.urlsafe_b64decode(CFB86D5E4DC4C11C6AFA9E5DF5AD9), &#39;utf-8&#39;)\r\n\r\nex3. key = base64.urlsafe_b64decode(CFB86D5E4DC4C11C6AFA9E5DF5AD9)\r\n\r\nex4. key = base64.b64decode(&#39;CFB86D5E4DC4C11C6AFA9E5DF5AD9&#39;) # this gives binascii.Error: Invalid base64-encoded string: number of data characters (29) cannot be 1 more than a multiple of 4\r\n\r\n\r\n**Solution:**\r\n\r\nSo I was able to solve my question but im not sure why it worked. The first consisted of setting my secret to a 256 character string ex. 73357638792F423F4428472B4B6250655368566D597133743677397A24432646 The next step was to encode it to UTF-8 and then b64encode it so: \r\n``` \r\n jwt_options = {\r\n     &#39;verify_signature&#39;: True,\r\n     &#39;verify_exp&#39;: False,\r\n     &#39;verify_nbf&#39;: False,\r\n     &#39;verify_iat&#39;: True,\r\n     &#39;verify_aud&#39;: False\r\n }\r\n\r\n signature_key = config.config.signature_key\r\n signature_key = b64decode(signature_key.encode(&quot;utf-8&quot;))\r\n\r\n parts = jwt.decode(self.token, signature_key, algorithms=[&quot;HS256&quot;], options=jwt_options)\r\n\r\n```","title":"Parse a JWT Token issued by a Java application, inside a python script","body":"<p>I have a Java Spring boot API that a user logs in and is issued a JWT token ( i cant change this code). I have a new python API that needs to parse the JWT to verify its been authenticated.</p>\n<p>Java Code</p>\n<pre><code>import io.jsonwebtoken.Jwts;\n\n   private String secretKey = &quot;CFB86D5E4DC4C11C6AFA9E5DF5AD9&quot;\n\n   String jwt = Jwts.builder()\n          .setSubject(userByUsername.getUsername())\n          .setIssuedAt(now)\n          .setNotBefore(now)\n          .setIssuer(&quot;my-authenticator&quot;)\n          .setExpiration(new Date(System.currentTimeMillis() + (1000L * tokenMaxAge)))\n          .signWith(SignatureAlgorithm.HS256, secretKey)\n          .compact();\n</code></pre>\n<p>Inside my python code i have</p>\n<pre><code>import jwt\n\n    token = &quot;eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsImlhdCI6MTY3NDUwMzE2NSwibmJmIjoxNjc0NTAzMTY1LCJpc3MiOiJ0ZXN0IiwiZXhwIjoxNjc0NTA2NzY1fQ.wPc98PTVmZKKUEBmuKZG3Z_fXrC7QLLpLE9BXHR3Sw4&quot;\n    key = 'CFB86D5E4DC4C11C6AFA9E5DF5AD9'\n\n    jwt_options = {\n        'verify_signature': True,\n        'verify_exp': False,\n        'verify_nbf': False,\n        'verify_iat': True,\n        'verify_aud': False\n    }\n\n    parts = jwt.decode(token, key, algorithms=&quot;HS256&quot;, options=jwt_options)\n\n    print(parts)\n\n</code></pre>\n<p>If I set <code>verify_signature = False</code> everything works and i can parse the jwt. But I need to have this set to true. If I go to jwt.io the signature shows up as verified\n<a href=\"https://i.stack.imgur.com/JACVv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JACVv.png\" alt=\"enter image description here\" /></a>\nI've tried playing around with encoding/decoding the string but Im not sure what I'm missing</p>\n<p>I have tried decoding and encoding the key but havn't had success. The secret is the same in the java application and python application</p>\n<p>ex1.  key = b'CFB86D5E4DC4C11C6AFA9E5DF5AD9'</p>\n<p>ex2.  key = str(base64.urlsafe_b64decode(CFB86D5E4DC4C11C6AFA9E5DF5AD9), 'utf-8')</p>\n<p>ex3. key = base64.urlsafe_b64decode(CFB86D5E4DC4C11C6AFA9E5DF5AD9)</p>\n<p>ex4. key = base64.b64decode('CFB86D5E4DC4C11C6AFA9E5DF5AD9') # this gives binascii.Error: Invalid base64-encoded string: number of data characters (29) cannot be 1 more than a multiple of 4</p>\n<p><strong>Solution:</strong></p>\n<p>So I was able to solve my question but im not sure why it worked. The first consisted of setting my secret to a 256 character string ex. 73357638792F423F4428472B4B6250655368566D597133743677397A24432646 The next step was to encode it to UTF-8 and then b64encode it so:</p>\n<pre><code> jwt_options = {\n     'verify_signature': True,\n     'verify_exp': False,\n     'verify_nbf': False,\n     'verify_iat': True,\n     'verify_aud': False\n }\n\n signature_key = config.config.signature_key\n signature_key = b64decode(signature_key.encode(&quot;utf-8&quot;))\n\n parts = jwt.decode(self.token, signature_key, algorithms=[&quot;HS256&quot;], options=jwt_options)\n\n</code></pre>\n"},{"tags":["java","android","kotlin","android-webview","mobile-webkit"],"owner":{"account_id":25338004,"reputation":1,"user_id":19156823,"display_name":"Marco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674593146,"creation_date":1674593146,"question_id":75227117,"body_markdown":"I&#39;m desperately attempting to disable audio-focus in an application I&#39;m developing, but to no avail.\r\n\r\nI have two web-views each one paying a video and i would like them to play at the same time, but it is not possible as they steal the audio-focus each other and get paused. \r\n\r\nTo my understanding, this is happening since the web-view engine interprets the html element and convert them into android views, and the video element, it is converted into a standard video view, with its default settings of audio-focus.\r\nIf i could access the video views i could set a different audio-focus mode... maybe.\r\n\r\n\r\nBut i cannot find this views anywhere, i thought maybe are hidden children and i can expose them with java reflection in the debugger, but I couldn&#39;t, maybe I&#39;m searching in the wrong place. Any help?\r\n\r\nTo be fair that idea of the audio-focus of the single video view might be flawed, as I was able to reproduce two videos in the same web-view.","title":"Android: accessing video elements in web-view (maybe with java reflection)","body":"<p>I'm desperately attempting to disable audio-focus in an application I'm developing, but to no avail.</p>\n<p>I have two web-views each one paying a video and i would like them to play at the same time, but it is not possible as they steal the audio-focus each other and get paused.</p>\n<p>To my understanding, this is happening since the web-view engine interprets the html element and convert them into android views, and the video element, it is converted into a standard video view, with its default settings of audio-focus.\nIf i could access the video views i could set a different audio-focus mode... maybe.</p>\n<p>But i cannot find this views anywhere, i thought maybe are hidden children and i can expose them with java reflection in the debugger, but I couldn't, maybe I'm searching in the wrong place. Any help?</p>\n<p>To be fair that idea of the audio-focus of the single video view might be flawed, as I was able to reproduce two videos in the same web-view.</p>\n"},{"tags":["java","android","android-studio","android-edittext","onfocuschangelistener"],"answers":[{"comments":[{"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"score":0,"creation_date":1608136570,"post_id":65327340,"comment_id":115492154,"body_markdown":"Yes I changed in xml file too but it doesn&#39;t works, I dont know why ...","body":"Yes I changed in xml file too but it doesn&#39;t works, I dont know why ..."},{"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"score":0,"creation_date":1608136690,"post_id":65327340,"comment_id":115492219,"body_markdown":"&lt;EditText\n                    android:id=&quot;@+id/etChangeAddress&quot;\n                   \n                 \n                    android:ems=&quot;10&quot;\n                    android:focusable=&quot;true&quot;\n                    android:focusableInTouchMode=&quot;true&quot;\n                  \n                    android:inputType=&quot;textPersonName&quot;\n               \n                    app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;","body":"&lt;EditText                     android:id=&quot;@+id/etChangeAddress&quot;                                                           android:ems=&quot;10&quot;                     android:focusable=&quot;true&quot;                     android:focusableInTouchMode=&quot;true&quot;                                        android:inputType=&quot;textPersonName&quot;                                     app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;"},{"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"score":0,"creation_date":1608136923,"post_id":65327340,"comment_id":115492325,"body_markdown":"how to set this requestFocus ? in class i cleared focus when onCreate","body":"how to set this requestFocus ? in class i cleared focus when onCreate"},{"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"score":0,"creation_date":1608137063,"post_id":65327340,"comment_id":115492404,"body_markdown":"i called this ChangeContact.requestFocus(); but not works","body":"i called this ChangeContact.requestFocus(); but not works"},{"owner":{"account_id":2862621,"reputation":7920,"user_id":2457566,"accept_rate":53,"display_name":"Adnan"},"score":0,"creation_date":1608137478,"post_id":65327340,"comment_id":115492644,"body_markdown":"I hope you initialize listner before you did on focus operation","body":"I hope you initialize listner before you did on focus operation"},{"owner":{"account_id":2862621,"reputation":7920,"user_id":2457566,"accept_rate":53,"display_name":"Adnan"},"score":0,"creation_date":1608142693,"post_id":65327340,"comment_id":115494960,"body_markdown":"@ShaikAbdullah mark success if helped you","body":"@ShaikAbdullah mark success if helped you"}],"tags":[],"owner":{"account_id":2862621,"reputation":7920,"user_id":2457566,"accept_rate":53,"display_name":"Adnan"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608136378,"creation_date":1608136378,"answer_id":65327340,"question_id":65327307,"body_markdown":"Have you tried with this for ChangeContact?\r\n\r\n     android:focusable=&quot;true&quot;\r\n     android:focusableInTouchMode=&quot;true&quot;\r\n\r\nalso \r\nChangeContact.requestFocus() ?","title":"EditText focus is not working in android studio, i want to hide a textview when focus change in edittext, how to do this?","body":"<p>Have you tried with this for ChangeContact?</p>\n<pre><code> android:focusable=&quot;true&quot;\n android:focusableInTouchMode=&quot;true&quot;\n</code></pre>\n<p>also\nChangeContact.requestFocus() ?</p>\n"},{"tags":[],"owner":{"account_id":13147505,"reputation":207,"user_id":9497128,"display_name":"Gomer Grek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674591885,"creation_date":1674591885,"answer_id":75226921,"question_id":65327307,"body_markdown":"In my case I can&#39;t get on focus change event because I forgot to delete `setContentView()` function and used it with binding initialization like this:\r\n\r\n     setContentView(R.layout.activity_main)\r\n        \r\n     binding = ActivityMainBinding.inflate(layoutInflater, null, false)\r\n\r\nalso eventually I understood that binding initialization also was incorrect ","title":"EditText focus is not working in android studio, i want to hide a textview when focus change in edittext, how to do this?","body":"<p>In my case I can't get on focus change event because I forgot to delete <code>setContentView()</code> function and used it with binding initialization like this:</p>\n<pre><code> setContentView(R.layout.activity_main)\n    \n binding = ActivityMainBinding.inflate(layoutInflater, null, false)\n</code></pre>\n<p>also eventually I understood that binding initialization also was incorrect</p>\n"}],"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":484,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1674591885,"creation_date":1608136232,"question_id":65327307,"body_markdown":"**EditText as ChangeContact**\r\n\r\n**EditText focus is not working in android studio, i want to hide a textview when focus change in edittext, how to do this?**\r\n\r\n````\r\n       ChangeContact.setOnFocusChangeListener(new View.OnFocusChangeListener() {\r\n                @Override\r\n                public void onFocusChange(View v, boolean hasFocus) {\r\n                    if (!hasFocus) {\r\n                        Toast.makeText(mContext, &quot;focus loosed&quot;, Toast.LENGTH_LONG).show();\r\n                      \r\n                    } else {\r\n                        Toast.makeText(mContext, &quot;focused&quot;, Toast.LENGTH_LONG).show();\r\n                        bookLinear.setVisibility(View.GONE);\r\n                    }\r\n                }\r\n            });\r\n\r\n````\r\nMy edit text in XMl file\r\n\r\n````\r\n  &lt;EditText\r\n                    android:id=&quot;@+id/etChangeAddress&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginStart=&quot;6dp&quot;\r\n                    android:layout_marginBottom=&quot;8dp&quot;\r\n                    android:background=&quot;@drawable/shape_transparent&quot;\r\n                    android:ems=&quot;10&quot;\r\n                    android:focusable=&quot;true&quot;\r\n                    android:focusableInTouchMode=&quot;true&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:hint=&quot;Address&quot;\r\n                    android:inputType=&quot;textPersonName&quot;\r\n                    android:padding=&quot;5dp&quot;\r\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/etChangeNumber&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n````\r\n\r\n**But i cant see the Toast**\r\n\r\nPlease help ....","title":"EditText focus is not working in android studio, i want to hide a textview when focus change in edittext, how to do this?","body":"<p><strong>EditText as ChangeContact</strong></p>\n<p><strong>EditText focus is not working in android studio, i want to hide a textview when focus change in edittext, how to do this?</strong></p>\n<pre><code>       ChangeContact.setOnFocusChangeListener(new View.OnFocusChangeListener() {\n                @Override\n                public void onFocusChange(View v, boolean hasFocus) {\n                    if (!hasFocus) {\n                        Toast.makeText(mContext, &quot;focus loosed&quot;, Toast.LENGTH_LONG).show();\n                      \n                    } else {\n                        Toast.makeText(mContext, &quot;focused&quot;, Toast.LENGTH_LONG).show();\n                        bookLinear.setVisibility(View.GONE);\n                    }\n                }\n            });\n\n</code></pre>\n<p>My edit text in XMl file</p>\n<pre><code>  &lt;EditText\n                    android:id=&quot;@+id/etChangeAddress&quot;\n                    android:layout_width=&quot;0dp&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_marginStart=&quot;6dp&quot;\n                    android:layout_marginBottom=&quot;8dp&quot;\n                    android:background=&quot;@drawable/shape_transparent&quot;\n                    android:ems=&quot;10&quot;\n                    android:focusable=&quot;true&quot;\n                    android:focusableInTouchMode=&quot;true&quot;\n                    android:gravity=&quot;center&quot;\n                    android:hint=&quot;Address&quot;\n                    android:inputType=&quot;textPersonName&quot;\n                    android:padding=&quot;5dp&quot;\n                    app:layout_constraintBottom_toTopOf=&quot;@+id/etChangeNumber&quot;\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n</code></pre>\n<p><strong>But i cant see the Toast</strong></p>\n<p>Please help ....</p>\n"},{"tags":["java","hadoop","hadoop-yarn"],"comments":[{"owner":{"account_id":377596,"reputation":5231,"user_id":729819,"accept_rate":83,"display_name":"Ben Watson"},"score":3,"creation_date":1674461757,"post_id":75204502,"comment_id":132710782,"body_markdown":"`For more detailed output, check the application tracking page: http://localhost:8088/cluster/app/application_1674418413963_0005 Then click on links to logs of each attempt.` what does that say?","body":"<code>For more detailed output, check the application tracking page: http:&#47;&#47;localhost:8088&#47;cluster&#47;app&#47;application_1674418413963_&zwnj;&#8203;0005 Then click on links to logs of each attempt.</code> what does that say?"}],"answers":[{"tags":[],"owner":{"account_id":22916503,"reputation":45,"user_id":17053025,"display_name":"grojas123"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674591572,"creation_date":1674591572,"answer_id":75226869,"question_id":75204502,"body_markdown":"This is a issue with the variables on /etc/hadoop/conf/yarn-site.xml\r\n```\r\n&lt;property&gt;\r\n    &lt;description&gt;Classpath for typical applications.&lt;/description&gt;\r\n     &lt;name&gt;yarn.application.classpath&lt;/name&gt;\r\n     &lt;value&gt;\r\n       /etc/hadoop/conf,\r\n       /usr/lib/hadoop/*,\r\n       /usr/lib/hadoop/lib/*,\r\n       /usr/lib/hadoop-hdfs/*,\r\n       /usr/lib/hadoop-hdfs/lib/*,\r\n       /usr/lib/hadoop-mapreduce/*,\r\n       /usr/lib/hadoop-mapreduce/lib/*,\r\n       /usr/lib/hadoop-yarn/*,\r\n       /usr/lib/hadoop-yarn/lib/*\r\n     &lt;/value&gt;\r\n  &lt;/property&gt;\r\n```\r\nAnd you don&#39;t need anything else .","title":"I cannot run a haddop jar on Hadoop 3.0.0-cdh6.3.2","body":"<p>This is a issue with the variables on /etc/hadoop/conf/yarn-site.xml</p>\n<pre><code>&lt;property&gt;\n    &lt;description&gt;Classpath for typical applications.&lt;/description&gt;\n     &lt;name&gt;yarn.application.classpath&lt;/name&gt;\n     &lt;value&gt;\n       /etc/hadoop/conf,\n       /usr/lib/hadoop/*,\n       /usr/lib/hadoop/lib/*,\n       /usr/lib/hadoop-hdfs/*,\n       /usr/lib/hadoop-hdfs/lib/*,\n       /usr/lib/hadoop-mapreduce/*,\n       /usr/lib/hadoop-mapreduce/lib/*,\n       /usr/lib/hadoop-yarn/*,\n       /usr/lib/hadoop-yarn/lib/*\n     &lt;/value&gt;\n  &lt;/property&gt;\n</code></pre>\n<p>And you don't need anything else .</p>\n"}],"owner":{"account_id":22916503,"reputation":45,"user_id":17053025,"display_name":"grojas123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1674591572,"creation_date":1674428253,"question_id":75204502,"body_markdown":"I have a machine with Hadoop 3.0.0-cdh6.3.2 installed .\r\nI ran this \r\n```\r\nhadoop jar helloworld.jar solution.CardDriver /user/vmuser/playing_cards_simple /user/vmuser/output\r\n```\r\nAnd show me this error:\r\n```2023-01-22 16:24:13,822 INFO mapreduce.Job: Job job_1674418413963_0005 failed with state FAILED due to: Application application_1674418413963_0005 failed 2 times due to AM Container for appattempt_1674418413963_0005_000002 exited with  exitCode: 1\r\nFailing this attempt.Diagnostics: [2023-01-22 16:24:13.729]Exception from container-launch.\r\nContainer id: container_1674418413963_0005_02_000001\r\nExit code: 1\r\n\r\n[2023-01-22 16:24:13.730]Container exited with a non-zero exit code 1. Error file: prelaunch.err.\r\nLast 4096 bytes of prelaunch.err :\r\n/var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/vmuser/appcache/application_1674418413963_0005/container_1674418413963_0005_02_000001/launch_container.sh: line 19: ${/usr/lib/hadoop-mapreduce}: bad substitution\r\n\r\n[2023-01-22 16:24:13.731]Container exited with a non-zero exit code 1. Error file: prelaunch.err.\r\nLast 4096 bytes of prelaunch.err :\r\n/var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/vmuser/appcache/application_1674418413963_0005/container_1674418413963_0005_02_000001/launch_container.sh: line 19: ${/usr/lib/hadoop-mapreduce}: bad substitution\r\n\r\nFor more detailed output, check the application tracking page: http://localhost:8088/cluster/app/application_1674418413963_0005 Then click on links to logs of each attempt.\r\n```\r\nI set\r\n```\r\n/etc/hadoop/conf/mapred-site.xml \r\n/etc/hadoop/conf/core-site.xml\r\n```\r\nwith this value \r\n```\r\nHADOOP_MAPRED_HOME=${/usr/lib/hadoop-mapreduce} . I tried with $HADOOP_HOME but gave a lot of errors.\r\n```\r\nI didn&#39;t change the yarn-site.xml (The values of yarn.application.classpath are set but I don&#39;t if there is right .\r\nThe values of yarn-site.xml are :\r\n```&lt;property&gt;\r\n    &lt;description&gt;Classpath for typical applications.&lt;/description&gt;\r\n     &lt;name&gt;yarn.application.classpath&lt;/name&gt;\r\n     &lt;value&gt;\r\n        $HADOOP_CONF_DIR,\r\n        $HADOOP_COMMON_HOME/*,$HADOOP_COMMON_HOME/lib/*,\r\n        $HADOOP_HDFS_HOME/*,$HADOOP_HDFS_HOME/lib/*,\r\n        $HADOOP_MAPRED_HOME/*,$HADOOP_MAPRED_HOME/lib/*,\r\n        $HADOOP_YARN_HOME/*,$HADOOP_YARN_HOME/lib/*\r\n     &lt;/value&gt;\r\n  &lt;/property&gt; \r\n```\r\nPls your help I invested several days on this , any light can help me at lot .","title":"I cannot run a haddop jar on Hadoop 3.0.0-cdh6.3.2","body":"<p>I have a machine with Hadoop 3.0.0-cdh6.3.2 installed .\nI ran this</p>\n<pre><code>hadoop jar helloworld.jar solution.CardDriver /user/vmuser/playing_cards_simple /user/vmuser/output\n</code></pre>\n<p>And show me this error:</p>\n<pre><code>Failing this attempt.Diagnostics: [2023-01-22 16:24:13.729]Exception from container-launch.\nContainer id: container_1674418413963_0005_02_000001\nExit code: 1\n\n[2023-01-22 16:24:13.730]Container exited with a non-zero exit code 1. Error file: prelaunch.err.\nLast 4096 bytes of prelaunch.err :\n/var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/vmuser/appcache/application_1674418413963_0005/container_1674418413963_0005_02_000001/launch_container.sh: line 19: ${/usr/lib/hadoop-mapreduce}: bad substitution\n\n[2023-01-22 16:24:13.731]Container exited with a non-zero exit code 1. Error file: prelaunch.err.\nLast 4096 bytes of prelaunch.err :\n/var/lib/hadoop-yarn/cache/yarn/nm-local-dir/usercache/vmuser/appcache/application_1674418413963_0005/container_1674418413963_0005_02_000001/launch_container.sh: line 19: ${/usr/lib/hadoop-mapreduce}: bad substitution\n\nFor more detailed output, check the application tracking page: http://localhost:8088/cluster/app/application_1674418413963_0005 Then click on links to logs of each attempt.\n</code></pre>\n<p>I set</p>\n<pre><code>/etc/hadoop/conf/mapred-site.xml \n/etc/hadoop/conf/core-site.xml\n</code></pre>\n<p>with this value</p>\n<pre><code>HADOOP_MAPRED_HOME=${/usr/lib/hadoop-mapreduce} . I tried with $HADOOP_HOME but gave a lot of errors.\n</code></pre>\n<p>I didn't change the yarn-site.xml (The values of yarn.application.classpath are set but I don't if there is right .\nThe values of yarn-site.xml are :</p>\n<pre><code>    &lt;description&gt;Classpath for typical applications.&lt;/description&gt;\n     &lt;name&gt;yarn.application.classpath&lt;/name&gt;\n     &lt;value&gt;\n        $HADOOP_CONF_DIR,\n        $HADOOP_COMMON_HOME/*,$HADOOP_COMMON_HOME/lib/*,\n        $HADOOP_HDFS_HOME/*,$HADOOP_HDFS_HOME/lib/*,\n        $HADOOP_MAPRED_HOME/*,$HADOOP_MAPRED_HOME/lib/*,\n        $HADOOP_YARN_HOME/*,$HADOOP_YARN_HOME/lib/*\n     &lt;/value&gt;\n  &lt;/property&gt; \n</code></pre>\n<p>Pls your help I invested several days on this , any light can help me at lot .</p>\n"},{"tags":["java","model-view-controller","nullpointerexception","processing","pgraphics"],"answers":[{"comments":[{"owner":{"account_id":27611702,"reputation":1,"user_id":21074680,"display_name":"Randy"},"score":0,"creation_date":1674665980,"post_id":75226838,"comment_id":132764652,"body_markdown":"Thank you for your answer. I think the first error/this.g is something processing specific.","body":"Thank you for your answer. I think the first error/this.g is something processing specific."}],"tags":[],"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674591360,"creation_date":1674591360,"answer_id":75226838,"question_id":75226309,"body_markdown":"I have never worked with Processing, but a few things first:\r\n\r\nPlease stop using letters as variable names, it makes it a real pain to debug your code or to even look at it. Also, always include the stacktrace for exceptions and every method involved in causing it, if its needed. \r\n\r\nRegarding your first problem: `this.g is null` -&gt; I can&#39;t see a `g` variable anywhere? \r\n\r\nThe second problem comes from java not finding a no-args constructor for your `LeiterspielController` - judging from your code, it takes several args which you haven&#39;t shared. \r\n\r\nThe constructor should by called by `PApplet.main(LeiterspielView.class);` - this method ([source][1]) calls another main method ([source][2]) which then calls the `runSketch(final String[] args,final PApplet constructedSketch)` method ([source][3]) in this method, you find the following [snippet][4] which tries to acquire a no-args constructor by reflection:\r\n\r\n    Class&lt;?&gt; c = Thread.currentThread().getContextClassLoader().loadClass(name);\r\n    sketch = (PApplet) c.getDeclaredConstructor().newInstance();\r\n\r\nSee the javadoc for [getDeclaredConstructor()][5] - as shown by the javadoc, this method throws an exception:\r\n\r\n\r\n&gt; NoSuchMethodException - if a matching method is not found.\r\n\r\nIn Java, classes actually do have a default no-args constructor unless you have defined another one, which you actually have (see this [answer][6]).\r\n\r\nSo basically you need a non-args constructor here and probably this may not work with your architecture. I&#39;d therefore recommend you to stick to examples with Processing and think about which architecture makes sense for you given the limits by Processing. However: There *might* be a way to do this I am not aware of, as I said, I never worked with that particular library. \r\n\r\n\r\n  [1]: https://github.com/processing/processing/blob/master/core%2Fsrc%2Fprocessing%2Fcore%2FPApplet.java#L10610\r\n  [2]: https://github.com/processing/processing/blob/master/core%2Fsrc%2Fprocessing%2Fcore%2FPApplet.java#L10634\r\n  [3]: https://github.com/processing/processing/blob/8b15e4f548c1426df3a5ebe4c2106619faf7c4ba/core/src/processing/core/PApplet.java#L10647\r\n  [4]: https://github.com/processing/processing/blob/8b15e4f548c1426df3a5ebe4c2106619faf7c4ba/core/src/processing/core/PApplet.java#L10826\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredConstructor-java.lang.Class...-\r\n  [6]: https://stackoverflow.com/a/27654193/4934937","title":"How can i resolve Runtime Error in Java Processing Application?","body":"<p>I have never worked with Processing, but a few things first:</p>\n<p>Please stop using letters as variable names, it makes it a real pain to debug your code or to even look at it. Also, always include the stacktrace for exceptions and every method involved in causing it, if its needed.</p>\n<p>Regarding your first problem: <code>this.g is null</code> -&gt; I can't see a <code>g</code> variable anywhere?</p>\n<p>The second problem comes from java not finding a no-args constructor for your <code>LeiterspielController</code> - judging from your code, it takes several args which you haven't shared.</p>\n<p>The constructor should by called by <code>PApplet.main(LeiterspielView.class);</code> - this method (<a href=\"https://github.com/processing/processing/blob/master/core%2Fsrc%2Fprocessing%2Fcore%2FPApplet.java#L10610\" rel=\"nofollow noreferrer\">source</a>) calls another main method (<a href=\"https://github.com/processing/processing/blob/master/core%2Fsrc%2Fprocessing%2Fcore%2FPApplet.java#L10634\" rel=\"nofollow noreferrer\">source</a>) which then calls the <code>runSketch(final String[] args,final PApplet constructedSketch)</code> method (<a href=\"https://github.com/processing/processing/blob/8b15e4f548c1426df3a5ebe4c2106619faf7c4ba/core/src/processing/core/PApplet.java#L10647\" rel=\"nofollow noreferrer\">source</a>) in this method, you find the following <a href=\"https://github.com/processing/processing/blob/8b15e4f548c1426df3a5ebe4c2106619faf7c4ba/core/src/processing/core/PApplet.java#L10826\" rel=\"nofollow noreferrer\">snippet</a> which tries to acquire a no-args constructor by reflection:</p>\n<pre><code>Class&lt;?&gt; c = Thread.currentThread().getContextClassLoader().loadClass(name);\nsketch = (PApplet) c.getDeclaredConstructor().newInstance();\n</code></pre>\n<p>See the javadoc for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getDeclaredConstructor-java.lang.Class...-\" rel=\"nofollow noreferrer\">getDeclaredConstructor()</a> - as shown by the javadoc, this method throws an exception:</p>\n<blockquote>\n<p>NoSuchMethodException - if a matching method is not found.</p>\n</blockquote>\n<p>In Java, classes actually do have a default no-args constructor unless you have defined another one, which you actually have (see this <a href=\"https://stackoverflow.com/a/27654193/4934937\">answer</a>).</p>\n<p>So basically you need a non-args constructor here and probably this may not work with your architecture. I'd therefore recommend you to stick to examples with Processing and think about which architecture makes sense for you given the limits by Processing. However: There <em>might</em> be a way to do this I am not aware of, as I said, I never worked with that particular library.</p>\n"}],"owner":{"account_id":27611702,"reputation":1,"user_id":21074680,"display_name":"Randy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674591360,"creation_date":1674588359,"question_id":75226309,"body_markdown":"I have written an Java Processing application.\r\nIf I try to start it,\r\nI get the following error:\r\n\r\n&gt;&quot;&quot;processing.core.PGraphics.createShape(int, float[])&quot; because &quot;this.g&quot; is null&quot;.\r\n\r\nMy Application has a View, Controller and Modell. \r\nThey only interact through interfaces with each other.\r\nMy Modell-Classes extend PApplet and create some shapes,\r\nbut I also get errors in my view.\r\nMaybe something is not passed on correctly.\r\n\r\nI know, that the error may be caused,\r\nbecause I try to call a method on an object that has not been initialized yet.\r\nIn this case the processing.core.PGraphics.createShape(int, float[]) method on this.g.\r\n\r\nMy PApplet window opens, but nothing is drawn on it.\r\n\r\nCould someone please look into it?\r\n\r\nI tried to create instances of PApplet and/or Graphic in my View class \r\nand pass it in to my controller class; e.g.:\r\n\r\nmy View, where the objects are drawn.\r\n\r\n```\r\npublic class xyView extends PApplet implements ILeiterspielView {\r\n    public static void main(String[] args) {\r\n        PApplet.main(LeiterspielView.class);\r\n    }\r\n...\r\n    private static PApplet instance;\r\n   //other attempt: PApplet p = this;\r\n   //other attempt: PApplet p;\r\n...\r\npublic xyView (other examples/*PApplet pa*//*Graphics gd*/) {\r\n        instance = this;\r\n        //this.gd = gd;\r\n        //this.p = pa;\r\n        setSize(1000, 1000);\r\n    }\r\npublic void setup (/*Dice[] dice*//*this*/) {\r\n        this.controller = new xyController(this, width, height, instance);\r\n        ...\r\n    }\r\n```\r\n\r\nmy controller, the interface between the view and model.\r\n\r\n```\r\npublic LeiterspielController (IxyView view, ..., PApplet p) {\r\n        this.view = view;\r\n        this.game = new xyModel();\r\n        this.p = p;\r\n...\r\n    }\r\n```\r\n\r\nMy first solution doesn&#39;t change the outcome.\r\n\r\nThe PApplet p = this solution changes the outcome to:\r\n\r\n&gt;java.lang.RuntimeException: java.lang.NoSuchMethodException: leiterspiel.view.LeiterspielView.&lt;init&gt;()\r\n\r\nI don&#39;t know what this means and the PApplet window doesn&#39;t open.","title":"How can i resolve Runtime Error in Java Processing Application?","body":"<p>I have written an Java Processing application.\nIf I try to start it,\nI get the following error:</p>\n<blockquote>\n<p>&quot;&quot;processing.core.PGraphics.createShape(int, float[])&quot; because &quot;this.g&quot; is null&quot;.</p>\n</blockquote>\n<p>My Application has a View, Controller and Modell.\nThey only interact through interfaces with each other.\nMy Modell-Classes extend PApplet and create some shapes,\nbut I also get errors in my view.\nMaybe something is not passed on correctly.</p>\n<p>I know, that the error may be caused,\nbecause I try to call a method on an object that has not been initialized yet.\nIn this case the processing.core.PGraphics.createShape(int, float[]) method on this.g.</p>\n<p>My PApplet window opens, but nothing is drawn on it.</p>\n<p>Could someone please look into it?</p>\n<p>I tried to create instances of PApplet and/or Graphic in my View class\nand pass it in to my controller class; e.g.:</p>\n<p>my View, where the objects are drawn.</p>\n<pre><code>public class xyView extends PApplet implements ILeiterspielView {\n    public static void main(String[] args) {\n        PApplet.main(LeiterspielView.class);\n    }\n...\n    private static PApplet instance;\n   //other attempt: PApplet p = this;\n   //other attempt: PApplet p;\n...\npublic xyView (other examples/*PApplet pa*//*Graphics gd*/) {\n        instance = this;\n        //this.gd = gd;\n        //this.p = pa;\n        setSize(1000, 1000);\n    }\npublic void setup (/*Dice[] dice*//*this*/) {\n        this.controller = new xyController(this, width, height, instance);\n        ...\n    }\n</code></pre>\n<p>my controller, the interface between the view and model.</p>\n<pre><code>public LeiterspielController (IxyView view, ..., PApplet p) {\n        this.view = view;\n        this.game = new xyModel();\n        this.p = p;\n...\n    }\n</code></pre>\n<p>My first solution doesn't change the outcome.</p>\n<p>The PApplet p = this solution changes the outcome to:</p>\n<blockquote>\n<p>java.lang.RuntimeException: java.lang.NoSuchMethodException: leiterspiel.view.LeiterspielView.()</p>\n</blockquote>\n<p>I don't know what this means and the PApplet window doesn't open.</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1674571867,"post_id":75223083,"comment_id":132739422,"body_markdown":"You are using Lazy Fetch for your list of techList. So it won&#39;t come with parent entity. You would rather need to use Eager Fetch or make seperate query and populate object post that.","body":"You are using Lazy Fetch for your list of techList. So it won&#39;t come with parent entity. You would rather need to use Eager Fetch or make seperate query and populate object post that."},{"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"score":0,"creation_date":1674572088,"post_id":75223083,"comment_id":132739506,"body_markdown":"I tried that. But still it still the same. Beside, i&#39;m using RestController, like: \t@PostMapping(&quot;/category/viewAll&quot;)\n\tpublic List&lt;Category&gt; viewAllCategory() {\n\t\treturn repo.findAll();\nwhich the JSON parse will make it run","body":"I tried that. But still it still the same. Beside, i&#39;m using RestController, like: \t@PostMapping(&quot;/category/viewAll&quot;) \tpublic List&lt;Category&gt; viewAllCategory() { \t\treturn repo.findAll(); which the JSON parse will make it run"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1674572275,"post_id":75223083,"comment_id":132739590,"body_markdown":"Would you please share your complete code? It&#39;s tough to find the issue with available info.","body":"Would you please share your complete code? It&#39;s tough to find the issue with available info."},{"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"score":0,"creation_date":1674572496,"post_id":75223083,"comment_id":132739681,"body_markdown":"that&#39;s pretty much everything. I only have 2 entity, and 1 controller which run categoryRepository.findAll","body":"that&#39;s pretty much everything. I only have 2 entity, and 1 controller which run categoryRepository.findAll"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1674572528,"post_id":75223083,"comment_id":132739696,"body_markdown":"I don&#39;t see controller here","body":"I don&#39;t see controller here"},{"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"score":0,"creation_date":1674572566,"post_id":75223083,"comment_id":132739715,"body_markdown":"@PostMapping(&quot;/category/viewAll&quot;) \npublic List&lt;Category&gt; viewAllCategory() \n{ return repo.findAll();}\nAh, i post it in the last comment","body":"@PostMapping(&quot;/category/viewAll&quot;)  public List&lt;Category&gt; viewAllCategory()  { return repo.findAll();} Ah, i post it in the last comment"},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1674572596,"post_id":75223083,"comment_id":132739728,"body_markdown":"Please add that complete code in question rather, in order to help you better.","body":"Please add that complete code in question rather, in order to help you better."},{"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"score":0,"creation_date":1674572801,"post_id":75223083,"comment_id":132739817,"body_markdown":"I just did. I dont think the jpa function only need to be posted","body":"I just did. I dont think the jpa function only need to be posted"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1674575069,"post_id":75223083,"comment_id":132740620,"body_markdown":"You have a bidirectional relationship that is controlled from the TechnicalStack side - this means for the relationship to be persisted in the database, the Posted TechnicalStack MUST have its category reference set. The JSON you have doesn&#39;t set it, and it isn&#39;t likely being set in your controllers - that would be the place to do it. When you take in a Category, go through its list of TechnicalStack and make sure each reference &#39;this&#39; category. You WILL get a stack overflow error once you do this though because you do not have mechanisms to tell JSON how to handle the circular reference","body":"You have a bidirectional relationship that is controlled from the TechnicalStack side - this means for the relationship to be persisted in the database, the Posted TechnicalStack MUST have its category reference set. The JSON you have doesn&#39;t set it, and it isn&#39;t likely being set in your controllers - that would be the place to do it. When you take in a Category, go through its list of TechnicalStack and make sure each reference &#39;this&#39; category. You WILL get a stack overflow error once you do this though because you do not have mechanisms to tell JSON how to handle the circular reference"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1674575112,"post_id":75223083,"comment_id":132740639,"body_markdown":"Try @JSONIgnore and look for questions on circular references in JSON","body":"Try @JSONIgnore and look for questions on circular references in JSON"},{"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"score":0,"creation_date":1674577130,"post_id":75223083,"comment_id":132741423,"body_markdown":"I thought @OneToMany mean the category should be the one who controll the technicalStack?","body":"I thought @OneToMany mean the category should be the one who controll the technicalStack?"}],"answers":[{"tags":[],"owner":{"account_id":27085849,"reputation":291,"user_id":20634376,"display_name":"Georgii Vlasov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674591327,"creation_date":1674591327,"answer_id":75226830,"question_id":75223083,"body_markdown":"One way you can do it is by using Spring Data JPA Projection. In your spring data JPA Repository, define the following method:&#160;\r\n\r\n    public interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\r\n    @Query(&quot;select c from Category c&quot;)\r\n    List&lt;CategoryWithTechList&gt; findAllWithTechList();\r\n    }\r\n\r\n\r\nAnd here is how the CategoryWithTechList projection will look like:\r\n\r\n    import java.util.Set;\r\n    \r\n    public interface CategoryWithTechList {\r\n        Long getId();\r\n    \r\n        String getCategoryName();\r\n    \r\n        String getDescription();\r\n    \r\n        Set&lt;TechnicalStackInfo&gt; getTechList();\r\n        \r\n        interface TechnicalStackInfo {\r\n            Long getID();\r\n    \r\n            String getQuestion();\r\n    \r\n            String getAnswer();\r\n    \r\n            int getBookmark();\r\n    \r\n            int getCheatSheet();\r\n        }\r\n    }\r\n\r\n\r\nThe get endpoint:\r\n\r\n\r\n    @GetMapping(&quot;/category/viewAll&quot;)\r\n    public List&lt;CategoryWithTechList&gt; viewAllCategory() {\r\n    &#160;&#160;&#160; return categoryRepository.findAllWithTechList();\r\n    }\r\n\r\nReturned result:\r\n\r\n    [\r\n    &#160; {\r\n    &#160;&#160;&#160; &quot;id&quot;: 1,\r\n    &#160;&#160;&#160; &quot;techList&quot;: [\r\n    &#160;&#160;&#160;&#160;&#160; {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;id&quot;: 1,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;question&quot;: &quot;1&quot;,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;bookmark&quot;: 1,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;cheatSheet&quot;: 1,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;answer&quot;: &quot;1&quot;\r\n    &#160;&#160;&#160;&#160;&#160; },\r\n    &#160;&#160;&#160;&#160;&#160; {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;id&quot;: 2,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;question&quot;: &quot;1&quot;,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;bookmark&quot;: 1,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;cheatSheet&quot;: 1,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;answer&quot;: &quot;1&quot;\r\n    &#160;&#160;&#160;&#160;&#160; }\r\n    &#160;&#160;&#160; ],\r\n    &#160;&#160;&#160; &quot;categoryName&quot;: &quot;Cat1&quot;,\r\n    &#160;&#160;&#160; &quot;description&quot;: &quot;1&quot;\r\n    &#160; },\r\n    &#160; {\r\n    &#160;&#160;&#160; &quot;id&quot;: 2,\r\n    &#160;&#160;&#160; &quot;techList&quot;: [\r\n    &#160;&#160;&#160;&#160;&#160; {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;id&quot;: 4,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;question&quot;: &quot;2&quot;,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;bookmark&quot;: 2,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;cheatSheet&quot;: 2,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;answer&quot;: &quot;2&quot;\r\n    &#160;&#160;&#160;&#160;&#160; },\r\n    &#160;&#160;&#160;&#160;&#160; {\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;id&quot;: 3,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;question&quot;: &quot;2&quot;,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;bookmark&quot;: 2,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;cheatSheet&quot;: 2,\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160; &quot;answer&quot;: &quot;2&quot;\r\n    &#160;&#160;&#160;&#160;&#160; }\r\n    &#160;&#160;&#160; ],\r\n    &#160;&#160;&#160; &quot;categoryName&quot;: &quot;Cat2&quot;,\r\n    &#160;&#160;&#160; &quot;description&quot;: &quot;2&quot;\r\n    &#160; },\r\n    ]\r\n\r\n\r\nBtw, I also recond you keep all the field names in camelCase in your JPA Entities.","title":"How to show List in @OneToMany relation","body":"<p>One way you can do it is by using Spring Data JPA Projection. In your spring data JPA Repository, define the following method: </p>\n<pre><code>public interface CategoryRepository extends JpaRepository&lt;Category, Long&gt; {\n@Query(&quot;select c from Category c&quot;)\nList&lt;CategoryWithTechList&gt; findAllWithTechList();\n}\n</code></pre>\n<p>And here is how the CategoryWithTechList projection will look like:</p>\n<pre><code>import java.util.Set;\n\npublic interface CategoryWithTechList {\n    Long getId();\n\n    String getCategoryName();\n\n    String getDescription();\n\n    Set&lt;TechnicalStackInfo&gt; getTechList();\n    \n    interface TechnicalStackInfo {\n        Long getID();\n\n        String getQuestion();\n\n        String getAnswer();\n\n        int getBookmark();\n\n        int getCheatSheet();\n    }\n}\n</code></pre>\n<p>The get endpoint:</p>\n<pre><code>@GetMapping(&quot;/category/viewAll&quot;)\npublic List&lt;CategoryWithTechList&gt; viewAllCategory() {\n    return categoryRepository.findAllWithTechList();\n}\n</code></pre>\n<p>Returned result:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 1,\n    &quot;techList&quot;: [\n      {\n        &quot;id&quot;: 1,\n        &quot;question&quot;: &quot;1&quot;,\n        &quot;bookmark&quot;: 1,\n        &quot;cheatSheet&quot;: 1,\n        &quot;answer&quot;: &quot;1&quot;\n      },\n      {\n        &quot;id&quot;: 2,\n        &quot;question&quot;: &quot;1&quot;,\n        &quot;bookmark&quot;: 1,\n        &quot;cheatSheet&quot;: 1,\n        &quot;answer&quot;: &quot;1&quot;\n      }\n    ],\n    &quot;categoryName&quot;: &quot;Cat1&quot;,\n    &quot;description&quot;: &quot;1&quot;\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;techList&quot;: [\n      {\n        &quot;id&quot;: 4,\n        &quot;question&quot;: &quot;2&quot;,\n        &quot;bookmark&quot;: 2,\n        &quot;cheatSheet&quot;: 2,\n        &quot;answer&quot;: &quot;2&quot;\n      },\n      {\n        &quot;id&quot;: 3,\n        &quot;question&quot;: &quot;2&quot;,\n        &quot;bookmark&quot;: 2,\n        &quot;cheatSheet&quot;: 2,\n        &quot;answer&quot;: &quot;2&quot;\n      }\n    ],\n    &quot;categoryName&quot;: &quot;Cat2&quot;,\n    &quot;description&quot;: &quot;2&quot;\n  },\n]\n</code></pre>\n<p>Btw, I also recond you keep all the field names in camelCase in your JPA Entities.</p>\n"}],"owner":{"account_id":27137289,"reputation":1,"user_id":20678560,"display_name":"hung kun"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1674591327,"creation_date":1674571229,"question_id":75223083,"body_markdown":"I&#39;m having an entity TechnicalStack and an entity Category, which an Category may have many TechnicalStack inside.\r\n\r\nHere is my code:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;technical_stack&quot;)\r\npublic class TechnicalStack implements Serializable{\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long ID;\r\n\t\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;category_id&quot;)\r\n    private Category category;\r\n\t\r\n\tprivate String Question;\r\n\t\r\n\t@Column(columnDefinition = &quot;NVARCHAR(MAX)&quot;)\t\r\n\tprivate String Answer;\r\n\t\r\n\tprivate int Bookmark;\r\n\t\r\n\tprivate int CheatSheet;\r\n}\r\n```\r\n\r\n\r\nand Category\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;categories&quot;)\r\npublic class Category implements Serializable {\r\n    @Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @OneToMany(mappedBy = &quot;category&quot;, fetch = FetchType.LAZY,cascade = CascadeType.ALL)\r\n    @Fetch(FetchMode.SUBSELECT)\r\n    private Set&lt;TechnicalStack&gt; techList = new HashSet&lt;&gt;();\r\n\r\n    private String categoryName;\r\n    private String description;\r\n}\r\n```\r\n\r\nI&#39;m only using normal JPA function, findAll, save, etc.\r\n\r\nSo, when I save an category item, like:\r\n\r\n```\r\n{\r\n    &quot;description&quot; : &quot;...&quot;,\r\n    &quot;categoryName&quot; : &quot;name1update&quot;,\r\n    &quot;techList&quot;: [{\r\n        &quot;question&quot; : &quot;ABC&quot;,\r\n        &quot;answer&quot; : &quot;XYZ&quot;\r\n    }]\r\n}\r\n```\r\n\r\n\r\n\r\nwhen I already have some records in 2 table TechStack and Category, I want to view category, i&#39;m having this by calling findAll()\r\n\r\n```\r\n`[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;techList&quot;: [],\r\n        &quot;categoryName&quot;: &quot;name1update&quot;,\r\n        &quot;description&quot;: &quot;...&quot;\r\n    }\r\n]`\r\n```\r\n\r\nbut, when I check technical stack record, i have like this:\r\n\r\n```\r\n`{\r\n    &quot;category&quot;: {\r\n        &quot;id&quot;: 1,\r\n        &quot;techList&quot;: [],\r\n        &quot;categoryName&quot;: null,\r\n        &quot;description&quot;: null\r\n    },\r\n    &quot;id&quot;: 3,\r\n    &quot;question&quot;: &quot;question11&quot;,\r\n    &quot;answer&quot;: &quot;answer22&quot;,\r\n    &quot;bookmark&quot;: 0,\r\n    &quot;cheatSheet&quot;: 0\r\n}`\r\n```\r\n\r\nController:\r\n\r\n    \t@PostMapping(&quot;/category/viewAll&quot;)\r\n\tpublic List&lt;Category&gt; viewAllCategory() {\r\n\t\treturn repo.findAll();\r\n\t}\r\n\r\n\r\nTechnicalStack is working fine, but vice versa is not. The techList inside category shouldn&#39;t be empty.\r\nHow do i implement, so when the jpa call category by findAll(), I also got the techList?\r\n\r\nI think i can do it by manually call the techList. That wouldn&#39;t be a problem. One query statement to call the category id, and one query to call the technical stack IN the list just called. But I don&#39;t think that is fully used JPA/Hibernate.\r\n\r\nThank you","title":"How to show List in @OneToMany relation","body":"<p>I'm having an entity TechnicalStack and an entity Category, which an Category may have many TechnicalStack inside.</p>\n<p>Here is my code:</p>\n<pre><code>@Entity\n@Table(name = &quot;technical_stack&quot;)\npublic class TechnicalStack implements Serializable{\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long ID;\n    \n    @ManyToOne\n    @JoinColumn(name = &quot;category_id&quot;)\n    private Category category;\n    \n    private String Question;\n    \n    @Column(columnDefinition = &quot;NVARCHAR(MAX)&quot;) \n    private String Answer;\n    \n    private int Bookmark;\n    \n    private int CheatSheet;\n}\n</code></pre>\n<p>and Category</p>\n<pre><code>@Entity\n@Table(name=&quot;categories&quot;)\npublic class Category implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @OneToMany(mappedBy = &quot;category&quot;, fetch = FetchType.LAZY,cascade = CascadeType.ALL)\n    @Fetch(FetchMode.SUBSELECT)\n    private Set&lt;TechnicalStack&gt; techList = new HashSet&lt;&gt;();\n\n    private String categoryName;\n    private String description;\n}\n</code></pre>\n<p>I'm only using normal JPA function, findAll, save, etc.</p>\n<p>So, when I save an category item, like:</p>\n<pre><code>{\n    &quot;description&quot; : &quot;...&quot;,\n    &quot;categoryName&quot; : &quot;name1update&quot;,\n    &quot;techList&quot;: [{\n        &quot;question&quot; : &quot;ABC&quot;,\n        &quot;answer&quot; : &quot;XYZ&quot;\n    }]\n}\n</code></pre>\n<p>when I already have some records in 2 table TechStack and Category, I want to view category, i'm having this by calling findAll()</p>\n<pre><code>`[\n    {\n        &quot;id&quot;: 1,\n        &quot;techList&quot;: [],\n        &quot;categoryName&quot;: &quot;name1update&quot;,\n        &quot;description&quot;: &quot;...&quot;\n    }\n]`\n</code></pre>\n<p>but, when I check technical stack record, i have like this:</p>\n<pre><code>`{\n    &quot;category&quot;: {\n        &quot;id&quot;: 1,\n        &quot;techList&quot;: [],\n        &quot;categoryName&quot;: null,\n        &quot;description&quot;: null\n    },\n    &quot;id&quot;: 3,\n    &quot;question&quot;: &quot;question11&quot;,\n    &quot;answer&quot;: &quot;answer22&quot;,\n    &quot;bookmark&quot;: 0,\n    &quot;cheatSheet&quot;: 0\n}`\n</code></pre>\n<p>Controller:</p>\n<pre><code>    @PostMapping(&quot;/category/viewAll&quot;)\npublic List&lt;Category&gt; viewAllCategory() {\n    return repo.findAll();\n}\n</code></pre>\n<p>TechnicalStack is working fine, but vice versa is not. The techList inside category shouldn't be empty.\nHow do i implement, so when the jpa call category by findAll(), I also got the techList?</p>\n<p>I think i can do it by manually call the techList. That wouldn't be a problem. One query statement to call the category id, and one query to call the technical stack IN the list just called. But I don't think that is fully used JPA/Hibernate.</p>\n<p>Thank you</p>\n"},{"tags":["java","hawtio","jolokia"],"owner":{"account_id":3031154,"reputation":2749,"user_id":2570135,"accept_rate":62,"display_name":"user2570135"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1674591232,"creation_date":1674591232,"question_id":75226815,"body_markdown":"Hawtio throws &quot;Cannot connect to Jolokia to access this Java process&quot; exception for user , while trying to access container perspective from the Hawtio UI\r\n\r\n\r\nThis is what I have done so far\r\n\r\n\r\n## on hawtio server\r\n\r\n 1. Have a tomcat server running\r\n 2. Install hawtio.war file\r\n 3. Modify the hawtio/WEB-INF/web.xml and add my remote server IP to the param-name&gt;proxyWhitelist&lt;/param-name&gt;\r\n 4. Access http://IP:3100/hawtio/login from browser and is able to see the authentication screen\r\n 5. authenticate successfully\r\n 6. Get the error when trying to connect to the remote tomcat machine\r\n\r\n\r\n## Remote server tomcat server\r\n\r\n 1. Install jolokia war\r\n 2. Modify jolokia-access.xml file -- add the HAWTIO server \r\n 3. curl http://localhost:3100/jolokia  -- This return the Jolokia version\r\n\r\nCan you please let me know how what else I need to change\r\n\r\nThanks\r\n\r\n\r\n\r\n\r\n--\r\n\r\n\r\n\r\n","title":"Hawtio throws &quot;Cannot connect to Jolokia to access this Java process&quot; exception","body":"<p>Hawtio throws &quot;Cannot connect to Jolokia to access this Java process&quot; exception for user , while trying to access container perspective from the Hawtio UI</p>\n<p>This is what I have done so far</p>\n<h2>on hawtio server</h2>\n<ol>\n<li>Have a tomcat server running</li>\n<li>Install hawtio.war file</li>\n<li>Modify the hawtio/WEB-INF/web.xml and add my remote server IP to the param-name&gt;proxyWhitelist</li>\n<li>Access http://IP:3100/hawtio/login from browser and is able to see the authentication screen</li>\n<li>authenticate successfully</li>\n<li>Get the error when trying to connect to the remote tomcat machine</li>\n</ol>\n<h2>Remote server tomcat server</h2>\n<ol>\n<li>Install jolokia war</li>\n<li>Modify jolokia-access.xml file -- add the HAWTIO server</li>\n<li>curl http://localhost:3100/jolokia  -- This return the Jolokia version</li>\n</ol>\n<p>Can you please let me know how what else I need to change</p>\n<p>Thanks</p>\n<p>--</p>\n"},{"tags":["java","json"],"answers":[{"comments":[{"owner":{"account_id":23533465,"reputation":15,"user_id":17578737,"display_name":"ramesh"},"score":0,"creation_date":1674590757,"post_id":75226609,"comment_id":132745701,"body_markdown":"i tried with flush but still not able to delete.","body":"i tried with flush but still not able to delete."},{"owner":{"account_id":2094826,"reputation":434,"user_id":1863849,"accept_rate":75,"display_name":"Merlyn007"},"score":0,"creation_date":1674590944,"post_id":75226609,"comment_id":132745753,"body_markdown":"Your code does not flush() and close() the object reader for the json","body":"Your code does not flush() and close() the object reader for the json"}],"tags":[],"owner":{"account_id":2094826,"reputation":434,"user_id":1863849,"accept_rate":75,"display_name":"Merlyn007"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674590037,"creation_date":1674590037,"answer_id":75226609,"question_id":75226536,"body_markdown":"Your variable names are not descriptive, so that&#39;s not good.\r\n\r\nTry to `flush()` the object that is reading the JSON and then `close()` it, that should do it.","title":"Not able to delete the file, Getting exception as File is used by another process","body":"<p>Your variable names are not descriptive, so that's not good.</p>\n<p>Try to <code>flush()</code> the object that is reading the JSON and then <code>close()</code> it, that should do it.</p>\n"},{"tags":[],"owner":{"account_id":15915815,"reputation":736,"user_id":11484412,"display_name":"Konrad Neitzel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1674591152,"creation_date":1674591152,"answer_id":75226797,"question_id":75226536,"body_markdown":"You do not close the FileReader. So instead of just creating a FileReader directly inside the method call parser.parse(..)., you should use a &quot;try wih resources&quot; (or at least close the reeader after reading the content).\r\n\r\nSo instead of:\r\n\r\n    Object obj = parser.parse(new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\r\n\r\nYou have code like:\r\n\r\n    Object obj;\r\n    try (FileReader reader = new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;)) {\r\n        obj = parser.parse(reader);\r\n    }\r\n\r\nThat way the reader is closed and the file is no longer in use.","title":"Not able to delete the file, Getting exception as File is used by another process","body":"<p>You do not close the FileReader. So instead of just creating a FileReader directly inside the method call parser.parse(..)., you should use a &quot;try wih resources&quot; (or at least close the reeader after reading the content).</p>\n<p>So instead of:</p>\n<pre><code>Object obj = parser.parse(new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\n</code></pre>\n<p>You have code like:</p>\n<pre><code>Object obj;\ntry (FileReader reader = new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;)) {\n    obj = parser.parse(reader);\n}\n</code></pre>\n<p>That way the reader is closed and the file is no longer in use.</p>\n"}],"owner":{"account_id":23533465,"reputation":15,"user_id":17578737,"display_name":"ramesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75226797,"answer_count":2,"score":0,"last_activity_date":1674591152,"creation_date":1674589600,"question_id":75226536,"body_markdown":"Can someone please help me out that how to delete the file, below is the code  using to convert the JSON file to Excel file, but after conversion am unable to delete the JSON file in the respective path.Getting exception saying that &quot;java.nio.file.FileSystemException: .\\Json_files\\db-AAPL.json: The process cannot access the file because it is being used by another process\r\n&quot;\r\n\r\n    public class DB_Search_API {\r\n\r\n\tString stockname;\r\n\tpublic static XSSFWorkbook wb;\r\n\tpublic static XSSFSheet s;\r\n\tpublic static FileInputStream fi;\r\n\tpublic static FileOutputStream fo;\r\n\tpublic static Row r;\r\n\tpublic static Row r1;\r\n\tpublic static Cell c;\r\n\r\n\t@Test\r\n\tpublic void FinBlock() throws Exception {\r\n\t\tint lastRow = dataXl.getRowCount(&quot;Sheet1&quot;);\r\n\t\t////\r\n\t\tLocalDateTime date = LocalDateTime.now();\r\n\r\n\t\tDateTimeFormatter dateFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\r\n\t\tString formattedDate = date.format(dateFormat);\r\n\r\n\t\tDateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy HH-mm&quot;);\r\n\t\tString formatedate = date.format(dateformat);\r\n\r\n\t\tPath dir = Paths.get(&quot;.//Output_Files//DB_Excelfiles-&quot; + formattedDate);\r\n\t\tFiles.createDirectories(dir);\r\n\t\twb = new XSSFWorkbook();\r\n\t\t \r\n\r\n\t\t//////\r\n\r\n\t\tfor (int i = 2; i &lt;= lastRow; i++) {\r\n\t\t\tstockname = dataXl.getCellData(&quot;Sheet1&quot;, &quot;Stock name&quot;, i);\r\n\t\t\tString USERNAME = CONFIG.getProperty(&quot;Username&quot;);\r\n\t\t\tString Password = CONFIG.getProperty(&quot;password&quot;);\r\n\t\t\tString URI = CONFIG.getProperty(&quot;API&quot;);\r\n\t\t\tSessionFilter session = new SessionFilter();\r\n\t\t\tRestAssured.baseURI = URI;\r\n\r\n\t\t\tString Response = given().auth().preemptive().basic(USERNAME, Password).filter(session).when()\r\n\t\t\t\t\t.get(RestAssured.baseURI).then().extract().response().getCookie(&quot;RAY_SESSION_ID&quot;);\r\n\r\n\t\t\tResponse resp = given().cookie(&quot;RAY_SESSION_ID&quot;, Response).filter(session).when()\r\n\t\t\t\t\t.get(&quot;******&quot;\r\n\t\t\t\t\t\t\t+ stockname\r\n\t\t\t\t\t\t\t+ &quot;*****&quot;)\r\n\t\t\t\t\t.then().log().all().extract().response();\r\n\t\t\t \r\n\t\t\tPrintWriter out = new PrintWriter(new FileWriter(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;, true), true);\r\n\t\t\tout.write(resp.asString());\r\n\t\t\tout.close();\r\n\r\n\t\t\tJSONParser parser = new JSONParser();\r\n\r\n\t\t\tObject obj = parser.parse(new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\r\n\t\t\tJSONObject jsonObj = (JSONObject) obj;\r\n\t\t\tJSONObject response = (JSONObject) jsonObj.get(&quot;response&quot;);\r\n\t\t\tJSONObject arraybody = (JSONObject) response.get(&quot;data&quot;);\r\n\t\t\tJSONArray arrayindex = (JSONArray) arraybody.get(&quot;arrayRowData&quot;);\r\n\r\n\t\t\tint n = arrayindex.size();\r\n\r\n\t\t\ts = wb.createSheet(stockname);\r\n\r\n\t\t\tfor (int j = 0; j &lt; n; j++) {\r\n\t\t\t\tJSONObject jsonObject = new JSONObject((Map) arrayindex.get(j));\r\n\t\t\t\tJSONObject jsonObject1 = (JSONObject) jsonObject.get(&quot;header&quot;);\r\n\t\t\t\tString value = (String) jsonObject1.get(&quot;displayName&quot;);\r\n\t\t\t\ts.createRow(j + 1).createCell(0).setCellValue(value);\r\n\t\t\t\tJSONArray arrayindex1 = (JSONArray) jsonObject.get(&quot;cellData&quot;);\r\n\r\n\t\t\t\tint m = arrayindex1.size();\r\n\t\t\t\tint x = m - 1;\r\n\t\t\t\tr = s.getRow(j + 1);\r\n\t\t\t\tr1 = s.createRow(0);\r\n\r\n\t\t\t\tfor (int k = 0; k &lt;= x; k++) {\r\n\t\t\t\t\tJSONObject jsonObject12 = new JSONObject((Map) arrayindex1.get(k));\r\n\t\t\t\t\tString newdate = (String) jsonObject12.get(&quot;fiscalDate&quot;);\r\n\t\t\t\t\tr1.createCell(k + 1).setCellValue(newdate);\r\n\r\n\t\t\t\t\tif (jsonObject12.get(&quot;value&quot;) == null) {\r\n\t\t\t\t\t\tr.createCell(k + 1).setCellValue(&quot;-&quot;);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tr.createCell(k + 1).setCellValue((double) jsonObject12.get(&quot;value&quot;));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfo = new FileOutputStream(dir + &quot;//DB_Search&quot; + &quot;-&quot; + formatedate + &quot;.xlsx&quot;);\r\n\t\t\twb.write(fo);\r\n\t\t\tfo.flush();\r\n\t\t\tfo.close();\r\n \r\n\t\t\ttry {\r\n\r\n\t\t\t\t Files.deleteIfExists(Paths.get(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\r\n\t\t\t\t \r\n\r\n\t\t\t} catch (NoSuchFileException e) {\r\n\t\t\t\tSystem.out.println(&quot;No such file/directory exists&quot;);\r\n\r\n\t\t\t} catch (DirectoryNotEmptyException e) {\r\n\t\t\t\tSystem.out.println(&quot;Directory is not empty.&quot;);\r\n\r\n\t\t\t} \r\n \r\n\r\n\t\t}\r\n\r\n\t}\r\n}","title":"Not able to delete the file, Getting exception as File is used by another process","body":"<p>Can someone please help me out that how to delete the file, below is the code  using to convert the JSON file to Excel file, but after conversion am unable to delete the JSON file in the respective path.Getting exception saying that &quot;java.nio.file.FileSystemException: .\\Json_files\\db-AAPL.json: The process cannot access the file because it is being used by another process\n&quot;</p>\n<pre><code>public class DB_Search_API {\n\nString stockname;\npublic static XSSFWorkbook wb;\npublic static XSSFSheet s;\npublic static FileInputStream fi;\npublic static FileOutputStream fo;\npublic static Row r;\npublic static Row r1;\npublic static Cell c;\n\n@Test\npublic void FinBlock() throws Exception {\n    int lastRow = dataXl.getRowCount(&quot;Sheet1&quot;);\n    ////\n    LocalDateTime date = LocalDateTime.now();\n\n    DateTimeFormatter dateFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\n    String formattedDate = date.format(dateFormat);\n\n    DateTimeFormatter dateformat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy HH-mm&quot;);\n    String formatedate = date.format(dateformat);\n\n    Path dir = Paths.get(&quot;.//Output_Files//DB_Excelfiles-&quot; + formattedDate);\n    Files.createDirectories(dir);\n    wb = new XSSFWorkbook();\n     \n\n    //////\n\n    for (int i = 2; i &lt;= lastRow; i++) {\n        stockname = dataXl.getCellData(&quot;Sheet1&quot;, &quot;Stock name&quot;, i);\n        String USERNAME = CONFIG.getProperty(&quot;Username&quot;);\n        String Password = CONFIG.getProperty(&quot;password&quot;);\n        String URI = CONFIG.getProperty(&quot;API&quot;);\n        SessionFilter session = new SessionFilter();\n        RestAssured.baseURI = URI;\n\n        String Response = given().auth().preemptive().basic(USERNAME, Password).filter(session).when()\n                .get(RestAssured.baseURI).then().extract().response().getCookie(&quot;RAY_SESSION_ID&quot;);\n\n        Response resp = given().cookie(&quot;RAY_SESSION_ID&quot;, Response).filter(session).when()\n                .get(&quot;******&quot;\n                        + stockname\n                        + &quot;*****&quot;)\n                .then().log().all().extract().response();\n         \n        PrintWriter out = new PrintWriter(new FileWriter(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;, true), true);\n        out.write(resp.asString());\n        out.close();\n\n        JSONParser parser = new JSONParser();\n\n        Object obj = parser.parse(new FileReader(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\n        JSONObject jsonObj = (JSONObject) obj;\n        JSONObject response = (JSONObject) jsonObj.get(&quot;response&quot;);\n        JSONObject arraybody = (JSONObject) response.get(&quot;data&quot;);\n        JSONArray arrayindex = (JSONArray) arraybody.get(&quot;arrayRowData&quot;);\n\n        int n = arrayindex.size();\n\n        s = wb.createSheet(stockname);\n\n        for (int j = 0; j &lt; n; j++) {\n            JSONObject jsonObject = new JSONObject((Map) arrayindex.get(j));\n            JSONObject jsonObject1 = (JSONObject) jsonObject.get(&quot;header&quot;);\n            String value = (String) jsonObject1.get(&quot;displayName&quot;);\n            s.createRow(j + 1).createCell(0).setCellValue(value);\n            JSONArray arrayindex1 = (JSONArray) jsonObject.get(&quot;cellData&quot;);\n\n            int m = arrayindex1.size();\n            int x = m - 1;\n            r = s.getRow(j + 1);\n            r1 = s.createRow(0);\n\n            for (int k = 0; k &lt;= x; k++) {\n                JSONObject jsonObject12 = new JSONObject((Map) arrayindex1.get(k));\n                String newdate = (String) jsonObject12.get(&quot;fiscalDate&quot;);\n                r1.createCell(k + 1).setCellValue(newdate);\n\n                if (jsonObject12.get(&quot;value&quot;) == null) {\n                    r.createCell(k + 1).setCellValue(&quot;-&quot;);\n                } else {\n                    r.createCell(k + 1).setCellValue((double) jsonObject12.get(&quot;value&quot;));\n                }\n            }\n        }\n\n        fo = new FileOutputStream(dir + &quot;//DB_Search&quot; + &quot;-&quot; + formatedate + &quot;.xlsx&quot;);\n        wb.write(fo);\n        fo.flush();\n        fo.close();\n\n        try {\n\n             Files.deleteIfExists(Paths.get(&quot;.//Json_files//db-&quot; + stockname + &quot;.json&quot;));\n             \n\n        } catch (NoSuchFileException e) {\n            System.out.println(&quot;No such file/directory exists&quot;);\n\n        } catch (DirectoryNotEmptyException e) {\n            System.out.println(&quot;Directory is not empty.&quot;);\n\n        } \n\n\n    }\n\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","regex","zsh"],"comments":[{"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"score":0,"creation_date":1674635234,"post_id":75226638,"comment_id":132754103,"body_markdown":"For your case, using a regexp is overkill, but it is of course a good idea to know about them. You start reading about regular expressions in zsh at _man zshmisc_ , in the chapter _CONDITIONAL EXPRESSIONS_. From this you will see that zsh can do two types of regexp: Extended POSIX (default), and PCRE (must be turned on if you want to use it). About PCRE, you find information in _man zshmodules_","body":"For your case, using a regexp is overkill, but it is of course a good idea to know about them. You start reading about regular expressions in zsh at <i>man zshmisc</i> , in the chapter <i>CONDITIONAL EXPRESSIONS</i>. From this you will see that zsh can do two types of regexp: Extended POSIX (default), and PCRE (must be turned on if you want to use it). About PCRE, you find information in <i>man zshmodules</i>"}],"answers":[{"comments":[{"owner":{"account_id":27037239,"reputation":37,"user_id":20592666,"display_name":"jennifer k."},"score":0,"creation_date":1674593148,"post_id":75226789,"comment_id":132746418,"body_markdown":"Thanks, can you break down the syntax though with a brief explanation for what each part does?","body":"Thanks, can you break down the syntax though with a brief explanation for what each part does?"},{"owner":{"account_id":1143565,"reputation":503902,"user_id":1126841,"display_name":"chepner"},"score":0,"creation_date":1674601131,"post_id":75226789,"comment_id":132748570,"body_markdown":"Even simpler, `$1:r`. `r` is one of the modifiers that you can apply to history expansions and parameter expansions.","body":"Even simpler, <code>$1:r</code>. <code>r</code> is one of the modifiers that you can apply to history expansions and parameter expansions."},{"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"score":0,"creation_date":1674635576,"post_id":75226789,"comment_id":132754208,"body_markdown":"@chepner : Good point and very elegant! It should be noted however that this will remove **any** possible extension, not only `.java`. The OP did not say what behaviour she wants to see in this case. The proposal in this answer is at least slightly safer, in that it removes **only** _.java_.","body":"@chepner : Good point and very elegant! It should be noted however that this will remove <b>any</b> possible extension, not only <code>.java</code>. The OP did not say what behaviour she wants to see in this case. The proposal in this answer is at least slightly safer, in that it removes <b>only</b> <i>.java</i>."},{"owner":{"account_id":1143565,"reputation":503902,"user_id":1126841,"display_name":"chepner"},"score":1,"creation_date":1674650128,"post_id":75226789,"comment_id":132758720,"body_markdown":"The `javac` command is going to fail if `$1` doesn&#39;t end in `.java` anyway. I&#39;d probably use `javac $1 &amp;&amp; java $1:r`.","body":"The <code>javac</code> command is going to fail if <code>$1</code> doesn&#39;t end in <code>.java</code> anyway. I&#39;d probably use <code>javac $1 &amp;&amp; java $1:r</code>."},{"owner":{"account_id":12861300,"reputation":2411,"user_id":9307265,"display_name":"Gairfowl"},"score":1,"creation_date":1674658655,"post_id":75226789,"comment_id":132761868,"body_markdown":"`${1//.java}` will remove all occurrences of `.java` in the string - try it with `a.javax.java`. Use `${1%.java}` to remove just the `.java` extension.","body":"<code>${1&#47;&#47;.java}</code> will remove all occurrences of <code>.java</code> in the string - try it with <code>a.javax.java</code>. Use <code>${1%.java}</code> to remove just the <code>.java</code> extension."},{"owner":{"account_id":12861300,"reputation":2411,"user_id":9307265,"display_name":"Gairfowl"},"score":0,"creation_date":1674658941,"post_id":75226789,"comment_id":132761964,"body_markdown":"@jenniferk. - the [Parameter Expansion](https://zsh.sourceforge.io/Doc/Release/Expansion.html#Parameter-Expansion) documentation has descriptions of these operators.","body":"@jenniferk. - the <a href=\"https://zsh.sourceforge.io/Doc/Release/Expansion.html#Parameter-Expansion\" rel=\"nofollow noreferrer\">Parameter Expansion</a> documentation has descriptions of these operators."}],"tags":[],"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674591095,"creation_date":1674591095,"answer_id":75226789,"question_id":75226638,"body_markdown":"You can use a simple string substitution: `${1//.java}` This will remove the last occurence of `.java` from the parameter `$1`.","title":"How can I use a regular expression to remove the file extension in zhell?","body":"<p>You can use a simple string substitution: <code>${1//.java}</code> This will remove the last occurence of <code>.java</code> from the parameter <code>$1</code>.</p>\n"}],"owner":{"account_id":27037239,"reputation":37,"user_id":20592666,"display_name":"jennifer k."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1674591095,"creation_date":1674590205,"question_id":75226638,"body_markdown":"I am trying to simplify my command line java using this zshell script where `$1` holds the file name, in this case `Hello.java.`\r\n\r\n\r\n```\r\n# jcr stands for java compile and run\r\njcr() {\r\n  javac $1    # $1 contains the first argument Hello.java\r\n  java Hello  # I want to replace Hello with a \r\n              # regular expression or similar which extracts Hello \r\n}\r\n```\r\n\r\nI need a good reference or cheat sheet for zshell and zhell regular expressions.","title":"How can I use a regular expression to remove the file extension in zhell?","body":"<p>I am trying to simplify my command line java using this zshell script where <code>$1</code> holds the file name, in this case <code>Hello.java.</code></p>\n<pre><code># jcr stands for java compile and run\njcr() {\n  javac $1    # $1 contains the first argument Hello.java\n  java Hello  # I want to replace Hello with a \n              # regular expression or similar which extracts Hello \n}\n</code></pre>\n<p>I need a good reference or cheat sheet for zshell and zhell regular expressions.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9519,"page":704,"page_size":100}
