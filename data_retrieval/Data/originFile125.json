{"items":[{"tags":["java","spring-boot","rest"],"answers":[{"comments":[{"owner":{"account_id":28386002,"reputation":13,"user_id":21712461,"display_name":"Dhruv Singhal"},"score":1,"creation_date":1686280003,"post_id":76434128,"comment_id":134780402,"body_markdown":"Yes prasanth, I have a model class which i am converting to json string using object mapper but this formBody .add parameter only accepts string arguements both key and value","body":"Yes prasanth, I have a model class which i am converting to json string using object mapper but this formBody .add parameter only accepts string arguements both key and value"},{"owner":{"account_id":28780397,"reputation":1,"user_id":22042128,"display_name":"prasanth r"},"score":0,"creation_date":1686285366,"post_id":76434128,"comment_id":134780815,"body_markdown":"Ok Dhruv got your point, once you have the object ready we can make use of jackson library to convert that object to string format. \n\nimport com.fasterxml.jackson.databind.ObjectMapper; \nimport com.fasterxml.jackson.databind.ObjectWriter; \n\nObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter();\nString json = ow.writeValueAsString(object);\n\nformBody.add(&quot;keyName&quot;, json);","body":"Ok Dhruv got your point, once you have the object ready we can make use of jackson library to convert that object to string format.   import com.fasterxml.jackson.databind.ObjectMapper;  import com.fasterxml.jackson.databind.ObjectWriter;   ObjectWriter ow = new ObjectMapper().writer().withDefaultPrettyPrinter(); String json = ow.writeValueAsString(object);  formBody.add(&quot;keyName&quot;, json);"},{"owner":{"account_id":28780397,"reputation":1,"user_id":22042128,"display_name":"prasanth r"},"score":0,"creation_date":1686285941,"post_id":76434128,"comment_id":134780862,"body_markdown":"Another way to achieve this with ObjectMapper - (not tested, you may test and use as per your need !)\n\n`code` Employee emp = new Employee();\nemp.firstName = &quot;Test&quot;;\nemp.lastName = &quot;Emp&quot;;\nemp.email = &quot;testemp@test.com&quot;;\n\nObjectMapper mapper = new ObjectMapper();\n    \ntry {\n    // convert user object to json string and return it \n    String jsonString = mapper.writeValueAsString(u);\n}\ncatch (JsonParsingException  e) {\n    // catch various errors\n    e.printStackTrace();\n}\n`code`\njsonString would look like this {&quot;firstName&quot;:&quot;Test&quot;,&quot;lastName&quot;:&quot;Emp&quot;,&quot;email&quot;:&quot;testemp@test.com&quot;}","body":"Another way to achieve this with ObjectMapper - (not tested, you may test and use as per your need !)  <code>code</code> Employee emp = new Employee(); emp.firstName = &quot;Test&quot;; emp.lastName = &quot;Emp&quot;; emp.email = &quot;testemp@test.com&quot;;  ObjectMapper mapper = new ObjectMapper();      try {     // convert user object to json string and return it      String jsonString = mapper.writeValueAsString(u); } catch (JsonParsingException  e) {     // catch various errors     e.printStackTrace(); } <code>code</code> jsonString would look like this {&quot;firstName&quot;:&quot;Test&quot;,&quot;lastName&quot;:&quot;Emp&quot;,&quot;email&quot;:&quot;testemp@test.c&zwnj;&#8203;om&quot;}"}],"tags":[],"owner":{"account_id":28780397,"reputation":1,"user_id":22042128,"display_name":"prasanth r"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686243309,"creation_date":1686243309,"answer_id":76434128,"question_id":76434051,"body_markdown":"Suggest you to create a model/pojo class which has the fields same as that in the json string. Then have an object of that class type added to the FormBody class. You can have a json to object mapper to convert the input json to an object of new model class.","title":"How to pass a JSON object in OkHttp RequestBody for calling external APIs","body":"<p>Suggest you to create a model/pojo class which has the fields same as that in the json string. Then have an object of that class type added to the FormBody class. You can have a json to object mapper to convert the input json to an object of new model class.</p>\n"},{"tags":[],"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686246000,"creation_date":1686246000,"answer_id":76434412,"question_id":76434051,"body_markdown":"So you need the Integration test here. I am using something like this:\r\n\r\n    TestDto testDto = new TestDto(); //  you need to set the field variables here\r\n\r\n    given()\r\n\t\t.header(HttpHeaders.AUTHORIZATION, createJwtToken(ADMIN_ID))\r\n\t\t.header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\r\n\t\t.header(HttpHeaders.ACCEPT_LANGUAGE, LANG_EN)\r\n\t\t.contentType(ContentType.JSON)\r\n\t\t.body(objectMapper.writeValueAsString(testDto))\r\n\t\t.when()\r\n\t\t\t.log().all()\r\n\t\t\t.post(CONTROLLER_ENDPOINT)\r\n\t\t.then()\r\n\t\t\t.log().all()\r\n\t\t\t.statusCode(HttpStatus.CREATED.value())\r\n\t\t.extract()\r\n\t\t\t.body().as(TestDto.class);\r\n\r\ngiven() will be found in [rest-assured][1].\r\n\r\n[ObjectMapper][2] is a class that can be found in a jackson library: jackson-databind. createJwtToken() is responsible to give a JWT with the ADADMIN_ID.\r\n\r\nHope, it will help.\r\n\r\n\r\n  [1]: https://rest-assured.io/\r\n  [2]: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html","title":"How to pass a JSON object in OkHttp RequestBody for calling external APIs","body":"<p>So you need the Integration test here. I am using something like this:</p>\n<pre><code>TestDto testDto = new TestDto(); //  you need to set the field variables here\n\ngiven()\n    .header(HttpHeaders.AUTHORIZATION, createJwtToken(ADMIN_ID))\n    .header(HttpHeaders.ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n    .header(HttpHeaders.ACCEPT_LANGUAGE, LANG_EN)\n    .contentType(ContentType.JSON)\n    .body(objectMapper.writeValueAsString(testDto))\n    .when()\n        .log().all()\n        .post(CONTROLLER_ENDPOINT)\n    .then()\n        .log().all()\n        .statusCode(HttpStatus.CREATED.value())\n    .extract()\n        .body().as(TestDto.class);\n</code></pre>\n<p>given() will be found in <a href=\"https://rest-assured.io/\" rel=\"nofollow noreferrer\">rest-assured</a>.</p>\n<p><a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html\" rel=\"nofollow noreferrer\">ObjectMapper</a> is a class that can be found in a jackson library: jackson-databind. createJwtToken() is responsible to give a JWT with the ADADMIN_ID.</p>\n<p>Hope, it will help.</p>\n"},{"tags":[],"owner":{"account_id":28386002,"reputation":13,"user_id":21712461,"display_name":"Dhruv Singhal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686285991,"creation_date":1686285991,"answer_id":76437277,"question_id":76434051,"body_markdown":"After some exploration I found out that we can convert json_string to requestbody json using okhttp Requestbody class create method which takes json mediatype and json_string as parameter and then this body can be passes to .post method of the request builder.\r\n\r\n    MediaType JSON = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\r\n    RequestBody body = RequestBody.create(JSON, json_string);","title":"How to pass a JSON object in OkHttp RequestBody for calling external APIs","body":"<p>After some exploration I found out that we can convert json_string to requestbody json using okhttp Requestbody class create method which takes json mediatype and json_string as parameter and then this body can be passes to .post method of the request builder.</p>\n<pre><code>MediaType JSON = MediaType.parse(&quot;application/json; charset=utf-8&quot;);\nRequestBody body = RequestBody.create(JSON, json_string);\n</code></pre>\n"}],"owner":{"account_id":28386002,"reputation":13,"user_id":21712461,"display_name":"Dhruv Singhal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76437277,"answer_count":3,"score":0,"last_activity_date":1697318079,"creation_date":1686242626,"question_id":76434051,"body_markdown":"\r\n```\r\n@Test\r\npublic void whenSendPostRequest_thenCorrect() \r\n throws IOException {\r\n    RequestBody formBody = new FormBody.Builder()\r\n        .add(&quot;username&quot;, &quot;test&quot;)\r\n        .add(&quot;password&quot;, &quot;test&quot;)\r\n        .build();\r\n\r\n    Request request = new Request.Builder()\r\n        .url(BASE_URL + &quot;/users&quot;)\r\n        .post(formBody)\r\n        .build();\r\n    Call call = client.newCall(request);\r\n    Response response = call.execute();\r\n    \r\n    assertThat(response.code(), equalTo(200));\r\n}\r\n```\r\n\r\nReference - [https://www.baeldung.com/guide-to-okhttp](https://www.baeldung.com/guide-to-okhttp)\r\n\r\nI am trying to execute this type of request where while forming `formBody` I have to do something like this  to have  `.add(&quot;something&quot;, json_object)` but it accepts a string value and I can&#39;t pass JSON string how to solve this issue.\r\n\r\nAlso `json_object` is very large so can&#39;t just have many `.add` statements for each key value pair. ","title":"How to pass a JSON object in OkHttp RequestBody for calling external APIs","body":"<pre><code>@Test\npublic void whenSendPostRequest_thenCorrect() \n throws IOException {\n    RequestBody formBody = new FormBody.Builder()\n        .add(&quot;username&quot;, &quot;test&quot;)\n        .add(&quot;password&quot;, &quot;test&quot;)\n        .build();\n\n    Request request = new Request.Builder()\n        .url(BASE_URL + &quot;/users&quot;)\n        .post(formBody)\n        .build();\n    Call call = client.newCall(request);\n    Response response = call.execute();\n    \n    assertThat(response.code(), equalTo(200));\n}\n</code></pre>\n<p>Reference - <a href=\"https://www.baeldung.com/guide-to-okhttp\" rel=\"nofollow noreferrer\">https://www.baeldung.com/guide-to-okhttp</a></p>\n<p>I am trying to execute this type of request where while forming <code>formBody</code> I have to do something like this  to have  <code>.add(&quot;something&quot;, json_object)</code> but it accepts a string value and I can't pass JSON string how to solve this issue.</p>\n<p>Also <code>json_object</code> is very large so can't just have many <code>.add</code> statements for each key value pair.</p>\n"},{"tags":["java","kafka-consumer-api","spring-kafka","reactive-kafka","reactor-kafka"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":1,"creation_date":1606851737,"post_id":65097151,"comment_id":115086497,"body_markdown":"Did you see a `ReactiveKafkaConsumerTemplate` in Spring for Apache Kafka project: https://github.com/spring-projects/spring-kafka/blob/master/spring-kafka/src/main/java/org/springframework/kafka/core/reactive/ReactiveKafkaConsumerTemplate.java ?","body":"Did you see a <code>ReactiveKafkaConsumerTemplate</code> in Spring for Apache Kafka project: <a href=\"https://github.com/spring-projects/spring-kafka/blob/master/spring-kafka/src/main/java/org/springframework/kafka/core/reactive/ReactiveKafkaConsumerTemplate.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-kafka/blob/master/&hellip;</a> ?"},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1606853727,"post_id":65097151,"comment_id":115087309,"body_markdown":"Reactive support for `@KafkaListener` is on the road map for next year. Right now, all we have is the lightweight wrapper that Artem mentioned. That said, managing partition offsets for a reactive (or any async) consumer is particularly difficult.","body":"Reactive support for <code>@KafkaListener</code> is on the road map for next year. Right now, all we have is the lightweight wrapper that Artem mentioned. That said, managing partition offsets for a reactive (or any async) consumer is particularly difficult."},{"owner":{"account_id":9139321,"reputation":139,"user_id":6797789,"accept_rate":67,"display_name":"bobryash"},"score":0,"creation_date":1606936525,"post_id":65097151,"comment_id":115117258,"body_markdown":"@ArtemBilan thanks for the link, will look into that","body":"@ArtemBilan thanks for the link, will look into that"},{"owner":{"account_id":3956677,"reputation":101,"user_id":3264909,"display_name":"mohitsahu"},"score":0,"creation_date":1653512054,"post_id":65097151,"comment_id":127873819,"body_markdown":"@GaryRussell has the reactive support for `@kafkaListener` arrived yet? I am unable to find the same.","body":"@GaryRussell has the reactive support for <code>@kafkaListener</code> arrived yet? I am unable to find the same."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1653515963,"post_id":65097151,"comment_id":127874855,"body_markdown":"No, sorry. Contributions are always welcome.","body":"No, sorry. Contributions are always welcome."}],"answers":[{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1621859559,"post_id":65518261,"comment_id":119613287,"body_markdown":"Can you share link to reactor kafka examples or tutorials?","body":"Can you share link to reactor kafka examples or tutorials?"},{"owner":{"account_id":8021623,"reputation":515,"user_id":6050113,"display_name":"Nasibulloh Yandashev"},"score":0,"creation_date":1701322473,"post_id":65518261,"comment_id":136762057,"body_markdown":"This will not work. While starting application @EventListener is called, but fails because there will not be ready Kafka connection .","body":"This will not work. While starting application @EventListener is called, but fails because there will not be ready Kafka connection ."}],"tags":[],"owner":{"account_id":9224124,"reputation":474,"user_id":6852455,"display_name":"Pawel"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1609402462,"creation_date":1609402148,"answer_id":65518261,"question_id":65097151,"body_markdown":"I don&#39;t have a ready solution yet but i&#39;m trying this (Kotlin code, Spring Boot). Someone published part of this code snippet here https://github.com/reactor/reactor-kafka/issues/100\r\n\r\n    \r\n    @EventListener(ApplicationStartedEvent::class)\r\n    fun onSomeEvent() {\r\n        kafkaReceiver\r\n            .receive()\r\n            .doOnNext { record -&gt;\r\n                val myEvent = record.value()\r\n                processMyEvent(myEvent).thenEmpty {\r\n                    record.receiverOffset().acknowledge()\r\n                }\r\n            }\r\n            .doOnError {\r\n                /* todo */\r\n            }\r\n            .subscribe()\r\n    }\r\n\r\nLook into other stack overflow questions. There is not much there, but maybe will give you some ideas\r\n - https://stackoverflow.com/questions/62940447/using-onerrorresume-to-handle-problematic-payloads-posted-to-kafka-using-reactor\r\n- https://stackoverflow.com/questions/62961279/continue-consuming-subsequent-records-in-reactor-kafka-after-deserialization-exc\r\n","title":"Implement Reactive Kafka Listener in Spring Boot application","body":"<p>I don't have a ready solution yet but i'm trying this (Kotlin code, Spring Boot). Someone published part of this code snippet here <a href=\"https://github.com/reactor/reactor-kafka/issues/100\" rel=\"nofollow noreferrer\">https://github.com/reactor/reactor-kafka/issues/100</a></p>\n<pre><code>@EventListener(ApplicationStartedEvent::class)\nfun onSomeEvent() {\n    kafkaReceiver\n        .receive()\n        .doOnNext { record -&gt;\n            val myEvent = record.value()\n            processMyEvent(myEvent).thenEmpty {\n                record.receiverOffset().acknowledge()\n            }\n        }\n        .doOnError {\n            /* todo */\n        }\n        .subscribe()\n}\n</code></pre>\n<p>Look into other stack overflow questions. There is not much there, but maybe will give you some ideas</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/62940447/using-onerrorresume-to-handle-problematic-payloads-posted-to-kafka-using-reactor\">Using onErrorResume to handle problematic payloads posted to Kafka using Reactor Kafka</a></li>\n<li><a href=\"https://stackoverflow.com/questions/62961279/continue-consuming-subsequent-records-in-reactor-kafka-after-deserialization-exc\">Continue consuming subsequent records in reactor kafka after deserialization exception</a></li>\n</ul>\n"}],"owner":{"account_id":9139321,"reputation":139,"user_id":6797789,"accept_rate":67,"display_name":"bobryash"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8636,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":1,"score":10,"last_activity_date":1697317330,"creation_date":1606850666,"question_id":65097151,"body_markdown":"I&#39;m trying to implement reactive kafka consumer in my Spring boot application and I&#39;m looking at these examples:\r\nhttps://github.com/reactor/reactor-kafka/blob/master/reactor-kafka-samples/src/main/java/reactor/kafka/samples/SampleScenarios.java\r\n\r\nand it looks like there is no support for Spring in reactive kafka yet\r\n\r\nI understand how kafka listeners work in non-reactive kafka API in Spring: simplest solution is to configure beans for ConcurrentKafkaListenerContainerFactory and ConsumerFactory, then use @KafkaListener annotation and voila\r\n\r\nBut I&#39;m not sure how to properly use reactive kafka in Spring right now. \r\n\r\nBasically I need a listener for topic. Should I create some kind of loop or scheduler of my own?\r\nOr maybe I&#39;m missing something. Can anyone share their knowledge and best practices?\r\n\r\n","title":"Implement Reactive Kafka Listener in Spring Boot application","body":"<p>I'm trying to implement reactive kafka consumer in my Spring boot application and I'm looking at these examples:\n<a href=\"https://github.com/reactor/reactor-kafka/blob/master/reactor-kafka-samples/src/main/java/reactor/kafka/samples/SampleScenarios.java\" rel=\"noreferrer\">https://github.com/reactor/reactor-kafka/blob/master/reactor-kafka-samples/src/main/java/reactor/kafka/samples/SampleScenarios.java</a></p>\n<p>and it looks like there is no support for Spring in reactive kafka yet</p>\n<p>I understand how kafka listeners work in non-reactive kafka API in Spring: simplest solution is to configure beans for ConcurrentKafkaListenerContainerFactory and ConsumerFactory, then use @KafkaListener annotation and voila</p>\n<p>But I'm not sure how to properly use reactive kafka in Spring right now.</p>\n<p>Basically I need a listener for topic. Should I create some kind of loop or scheduler of my own?\nOr maybe I'm missing something. Can anyone share their knowledge and best practices?</p>\n"},{"tags":["java","postgresql","jdbc"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697311869,"post_id":77294117,"comment_id":136265088,"body_markdown":"The null pointer exception should be thrown. But you caught the null value.","body":"The null pointer exception should be thrown. But you caught the null value."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697314494,"post_id":77294117,"comment_id":136265319,"body_markdown":"@RomanC – The NPE is not caught anywhere in the provided code …","body":"@RomanC – The NPE is not caught anywhere in the provided code …"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1697324229,"post_id":77294117,"comment_id":136266053,"body_markdown":"The only way a `ResultSet` can be null is if you got an exception and returned null. Solution: either propagate the exception or test for null.","body":"The only way a <code>ResultSet</code> can be null is if you got an exception and returned null. Solution: either propagate the exception or test for null."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697347174,"post_id":77294117,"comment_id":136267123,"body_markdown":"@tquadrat There&#39;s no any NPE in the code... Should be caught for sure. [Here](https://stackoverflow.com/a/32946450/573032) is an example of using JDBC statement.","body":"@tquadrat There&#39;s no any NPE in the code... Should be caught for sure. <a href=\"https://stackoverflow.com/a/32946450/573032\">Here</a> is an example of using JDBC statement."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697396504,"post_id":77294117,"comment_id":136271760,"body_markdown":"@RomanC – you should never throw an NPE! And you should never caught an NPE in production code, as it indicates a significant design flaw! If something is expected to be `null` under some circumstances, you have to check for that condition. And if something *is* `null` although it *could not be* `null`, this should bubble up, to be seen.","body":"@RomanC – you should never throw an NPE! And you should never caught an NPE in production code, as it indicates a significant design flaw! If something is expected to be <code>null</code> under some circumstances, you have to check for that condition. And if something <i>is</i> <code>null</code> although it <i>could not be</i> <code>null</code>, this should bubble up, to be seen."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697443245,"post_id":77294117,"comment_id":136275792,"body_markdown":"@tquadrat In production, if you ever had a chance to work, you should know that NPE is a generally bug error. It should be fixed immediately. Because it is a runtime exception, and it stops the business processes. It must be prevented as much as possible to make a system stable and a bugfree. People who intentionally left the code with unchecked NPE make a dirty code with expected difficulties paid for maintenance and support.","body":"@tquadrat In production, if you ever had a chance to work, you should know that NPE is a generally bug error. It should be fixed immediately. Because it is a runtime exception, and it stops the business processes. It must be prevented as much as possible to make a system stable and a bugfree. People who intentionally left the code with unchecked NPE make a dirty code with expected difficulties paid for maintenance and support."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697452466,"post_id":77294117,"comment_id":136277406,"body_markdown":"@RomanC – ***Fixing*** an NPE and ***catching*** an NPE are two different things, as you should know if you ever had operated an application. Usually ***catching*** an NPE prevents it from being found, therefore from being fixed. Also ***checking for null*** and ***catching an NPE*** are different things – and what in hell is an &quot;unchecked NPE&quot;? Coming to the maintenance and support: caught NPEs are causing a lot of pain …","body":"@RomanC – <b><i>Fixing</i></b> an NPE and <b><i>catching</i></b> an NPE are two different things, as you should know if you ever had operated an application. Usually <b><i>catching</i></b> an NPE prevents it from being found, therefore from being fixed. Also <b><i>checking for null</i></b> and <b><i>catching an NPE</i></b> are different things – and what in hell is an &quot;unchecked NPE&quot;? Coming to the maintenance and support: caught NPEs are causing a lot of pain …"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697453042,"post_id":77294117,"comment_id":136277498,"body_markdown":"@tquadrat You will get a lot of pain if you left uncaught NPEs. If you also sit on the Telefone to accept calls from the users, then you explain them why the program is not working","body":"@tquadrat You will get a lot of pain if you left uncaught NPEs. If you also sit on the Telefone to accept calls from the users, then you explain them why the program is not working"}],"answers":[{"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697347877,"post_id":77294303,"comment_id":136267161,"body_markdown":"The usage of `executeClientQuery()` is redundant here, [SOLID](https://en.m.wikipedia.org/wiki/SOLID) #1.","body":"The usage of <code>executeClientQuery()</code> is redundant here, <a href=\"https://en.m.wikipedia.org/wiki/SOLID\" rel=\"nofollow noreferrer\">SOLID</a> #1."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697396155,"post_id":77294303,"comment_id":136271725,"body_markdown":"@RomanC — the method `executeClientQuery()` is defined by the TO (see the question!!) and it evaluates the `ResultSet` that is provided to it as the parameter. Of course this architecture can be disputed, but you should discuss it with the TO, and not with me!","body":"@RomanC — the method <code>executeClientQuery()</code> is defined by the TO (see the question!!) and it evaluates the <code>ResultSet</code> that is provided to it as the parameter. Of course this architecture can be disputed, but you should discuss it with the TO, and not with me!"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697441786,"post_id":77294303,"comment_id":136275548,"body_markdown":"I&#39;m discussing it with you because you  sent me your comment. `ResultSet` is provided by the statement, that means the query is already executed. Passing it as a parameter to another method is bugprone, because it&#39;s not properly closed.","body":"I&#39;m discussing it with you because you  sent me your comment. <code>ResultSet</code> is provided by the statement, that means the query is already executed. Passing it as a parameter to another method is bugprone, because it&#39;s not properly closed."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697452324,"post_id":77294303,"comment_id":136277387,"body_markdown":"@RomanC – You got the comment because you added *your* comment to *my* answer. And there are lots of reasons why the architecture suggested by the TO is problematic, but that the `ResultSet` is not properly closed is none of them – just because it is not true! In both cases (mine and the original one) the statement that is used to generate the `ResultSet` instance is closed, and that in turn also closes the result set. Refer to the respective documentation! May be you should spent some time with real life development and maintenance of software.","body":"@RomanC – You got the comment because you added <i>your</i> comment to <i>my</i> answer. And there are lots of reasons why the architecture suggested by the TO is problematic, but that the <code>ResultSet</code> is not properly closed is none of them – just because it is not true! In both cases (mine and the original one) the statement that is used to generate the <code>ResultSet</code> instance is closed, and that in turn also closes the result set. Refer to the respective documentation! May be you should spent some time with real life development and maintenance of software."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1697454075,"post_id":77294303,"comment_id":136277671,"body_markdown":"You left unclosed `ResultSet` on promise that a statement which is created somewhere in the code will autoclose it, but you forgot one thing  that resources should be closed as soon as they no longer needed and preferably in the same block of code or a method. Nobody knows where in the code is an object which should close the resource, and until it&#39;s not closed you can face a lot of problems begining from resource leaks and ending to a deadlock. The documentation is useless for you because you didn&#39;t close `ResultSet` or `Statement` in time and it is a bug.","body":"You left unclosed <code>ResultSet</code> on promise that a statement which is created somewhere in the code will autoclose it, but you forgot one thing  that resources should be closed as soon as they no longer needed and preferably in the same block of code or a method. Nobody knows where in the code is an object which should close the resource, and until it&#39;s not closed you can face a lot of problems begining from resource leaks and ending to a deadlock. The documentation is useless for you because you didn&#39;t close <code>ResultSet</code> or <code>Statement</code> in time and it is a bug."},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":0,"creation_date":1697456980,"post_id":77294303,"comment_id":136278189,"body_markdown":"@RomanC – Either you have not read the code, or you have no clue what try-with-resources do. Both disqualifies you from continuing this discussion.","body":"@RomanC – Either you have not read the code, or you have no clue what try-with-resources do. Both disqualifies you from continuing this discussion."}],"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":6,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1697314932,"creation_date":1697313597,"answer_id":77294303,"question_id":77294117,"body_markdown":"Refer to the [JavaDoc for `PreparedStatement::getResultSet`][1] …\r\n\r\nWhat you want to call is [`PreparedStatement::executeQuery`][2]:\r\n\r\n```Java\r\nList&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\r\ntry( PreparedStatement stmt = connection.prepareStatement( \r\n    &quot;&quot;&quot;\r\n    SELECT contact_phone,\r\n           status, \r\n           money_spent,\r\n           bonus,\r\n           client_name,\r\n           assigned_employee_number,\r\n           email \r\n      FROM client \r\n      WHERE assigned_employee_number IS NULL;&quot;&quot;&quot; ) )\r\n{\r\n  resultClientList = executeClientQuery( stmt.executeQuery() );\r\n}\r\ncatch( final SQLException e )\r\n{\r\n  log.error( &quot;Error querying clients&quot;, e );\r\n}\r\n```\r\n\r\nAnd why do you use a prepared statement at all, when you do not have variables in there? Ok, confessed, some RDBMS optimise even those statements, but for fixed-value queries\r\n\r\n```Java\r\nfinal var statement = connection.createStatement();\r\nfinal var resultSet = statement.executeQuery( theQueryString );\r\n```\r\n\r\nis the more common choice, and it would fit here, too:\r\n\r\n```Java\r\nfinal var query =\r\n  &quot;&quot;&quot;\r\n  SELECT contact_phone,\r\n         status, \r\n         money_spent,\r\n         bonus,\r\n         client_name,\r\n         assigned_employee_number,\r\n         email \r\n    FROM client \r\n    WHERE assigned_employee_number IS NULL;&quot;&quot;&quot;;\r\nList&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\r\ntry( final var stmt = connection.createStatement() ) \r\n{\r\n  resultClientList = executeClientQuery( stmt.executeQuery( query ) );\r\n}\r\ncatch( final SQLException e )\r\n{\r\n  log.error( &quot;Error querying clients&quot;, e );\r\n}\r\n```\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/Statement.html#getResultSet()\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/PreparedStatement.html#executeQuery()","title":"ResultSet is null on a specific table","body":"<p>Refer to the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/Statement.html#getResultSet()\" rel=\"nofollow noreferrer\">JavaDoc for <code>PreparedStatement::getResultSet</code></a> …</p>\n<p>What you want to call is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/PreparedStatement.html#executeQuery()\" rel=\"nofollow noreferrer\"><code>PreparedStatement::executeQuery</code></a>:</p>\n<pre><code>List&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\ntry( PreparedStatement stmt = connection.prepareStatement( \n    &quot;&quot;&quot;\n    SELECT contact_phone,\n           status, \n           money_spent,\n           bonus,\n           client_name,\n           assigned_employee_number,\n           email \n      FROM client \n      WHERE assigned_employee_number IS NULL;&quot;&quot;&quot; ) )\n{\n  resultClientList = executeClientQuery( stmt.executeQuery() );\n}\ncatch( final SQLException e )\n{\n  log.error( &quot;Error querying clients&quot;, e );\n}\n</code></pre>\n<p>And why do you use a prepared statement at all, when you do not have variables in there? Ok, confessed, some RDBMS optimise even those statements, but for fixed-value queries</p>\n<pre><code>final var statement = connection.createStatement();\nfinal var resultSet = statement.executeQuery( theQueryString );\n</code></pre>\n<p>is the more common choice, and it would fit here, too:</p>\n<pre><code>final var query =\n  &quot;&quot;&quot;\n  SELECT contact_phone,\n         status, \n         money_spent,\n         bonus,\n         client_name,\n         assigned_employee_number,\n         email \n    FROM client \n    WHERE assigned_employee_number IS NULL;&quot;&quot;&quot;;\nList&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\ntry( final var stmt = connection.createStatement() ) \n{\n  resultClientList = executeClientQuery( stmt.executeQuery( query ) );\n}\ncatch( final SQLException e )\n{\n  log.error( &quot;Error querying clients&quot;, e );\n}\n</code></pre>\n"}],"owner":{"account_id":22630372,"reputation":35,"user_id":16807844,"display_name":"Paincake-"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77294303,"answer_count":1,"score":-2,"last_activity_date":1697314932,"creation_date":1697309866,"question_id":77294117,"body_markdown":"I have a database desktop client written on Java. I need to retrieve data from postgres, and no matter the connection (i mean database user role), no matter the host machine (i tried launching the code on different computers and database running on different containers) select query on the one specific table always returns null in ResultSet.\r\n\r\nHere&#39;s the table:\r\n```\r\nTable &quot;public.client&quot;\r\n          Column          |       Type        | Collation | Nullable | Default \r\n--------------------------+-------------------+-----------+----------+---------\r\n contact_phone            | character(11)     |           | not null | \r\n status                   | character(11)     |           | not null | \r\n money_spent              | real              |           | not null | \r\n bonus                    | real              |           | not null | \r\n client_name              | character varying |           | not null | \r\n assigned_employee_number | character(11)     |           |          | \r\n email                    | character varying |           |          |\r\n```\r\nHere&#39;s an example of Java query to this table:\r\n```\r\nList&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\r\n        try(PreparedStatement stmt = connection.prepareStatement(&quot;SELECT &quot; +\r\n                &quot;contact_phone,&quot; +\r\n                &quot;status, &quot; +\r\n                &quot;money_spent, &quot; +\r\n                &quot;bonus, &quot; +\r\n                &quot;client_name, &quot; +\r\n                &quot;assigned_employee_number, &quot; +\r\n                &quot;email &quot; +\r\n                &quot;FROM client &quot; +\r\n                &quot;WHERE assigned_employee_number IS NULL;&quot;)){\r\n            resultClientList = executeClientQuery(stmt.getResultSet());\r\n        }\r\n        catch (SQLException e){\r\n            log.error(&quot;Error querying clients: &quot; + e.getMessage());\r\n        }\r\n```\r\nAnd the method to extract data from resultset:\r\n```\r\nprivate List&lt;Client&gt; executeClientQuery(ResultSet resultSet){\r\n        List&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\r\n        if(resultSet == null) return resultClientList;\r\n        try{\r\n            while(resultSet.next()){\r\n                String contactPhone = resultSet.getString(&quot;contact_phone&quot;);\r\n                String status = resultSet.getString(&quot;status&quot;);\r\n                Double moneySpent = resultSet.getDouble(&quot;money_spent&quot;);\r\n                Double bonus = resultSet.getDouble(&quot;bonus&quot;);\r\n                String clientName = resultSet.getString(&quot;client_name&quot;);\r\n                String assignedEmployeeNumber = resultSet.getString(&quot;assigned_employee_number&quot;);\r\n                resultClientList.add(new Client(contactPhone, status, moneySpent, bonus, clientName, assignedEmployeeNumber));\r\n            }\r\n        }\r\n        catch (SQLException e){\r\n            log.error(&quot;Error querying clients: &quot; + e.getMessage());\r\n        }\r\n        return resultClientList;\r\n    }\r\n```\r\nAt this point method `executeClientQuery` receives null in a ResultSet. I tried querying `SELECT * FROM client`, but that didn&#39;t help. I tried debugging JDBC code, but found nothing. No exception is thrown, just the ResultSet is null. Running this query in the database, however, returns correct data.\r\n\r\nConnection is alive. Any other query on any other table returns correct ResultSet.","title":"ResultSet is null on a specific table","body":"<p>I have a database desktop client written on Java. I need to retrieve data from postgres, and no matter the connection (i mean database user role), no matter the host machine (i tried launching the code on different computers and database running on different containers) select query on the one specific table always returns null in ResultSet.</p>\n<p>Here's the table:</p>\n<pre><code>Table &quot;public.client&quot;\n          Column          |       Type        | Collation | Nullable | Default \n--------------------------+-------------------+-----------+----------+---------\n contact_phone            | character(11)     |           | not null | \n status                   | character(11)     |           | not null | \n money_spent              | real              |           | not null | \n bonus                    | real              |           | not null | \n client_name              | character varying |           | not null | \n assigned_employee_number | character(11)     |           |          | \n email                    | character varying |           |          |\n</code></pre>\n<p>Here's an example of Java query to this table:</p>\n<pre><code>List&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\n        try(PreparedStatement stmt = connection.prepareStatement(&quot;SELECT &quot; +\n                &quot;contact_phone,&quot; +\n                &quot;status, &quot; +\n                &quot;money_spent, &quot; +\n                &quot;bonus, &quot; +\n                &quot;client_name, &quot; +\n                &quot;assigned_employee_number, &quot; +\n                &quot;email &quot; +\n                &quot;FROM client &quot; +\n                &quot;WHERE assigned_employee_number IS NULL;&quot;)){\n            resultClientList = executeClientQuery(stmt.getResultSet());\n        }\n        catch (SQLException e){\n            log.error(&quot;Error querying clients: &quot; + e.getMessage());\n        }\n</code></pre>\n<p>And the method to extract data from resultset:</p>\n<pre><code>private List&lt;Client&gt; executeClientQuery(ResultSet resultSet){\n        List&lt;Client&gt; resultClientList = new ArrayList&lt;&gt;();\n        if(resultSet == null) return resultClientList;\n        try{\n            while(resultSet.next()){\n                String contactPhone = resultSet.getString(&quot;contact_phone&quot;);\n                String status = resultSet.getString(&quot;status&quot;);\n                Double moneySpent = resultSet.getDouble(&quot;money_spent&quot;);\n                Double bonus = resultSet.getDouble(&quot;bonus&quot;);\n                String clientName = resultSet.getString(&quot;client_name&quot;);\n                String assignedEmployeeNumber = resultSet.getString(&quot;assigned_employee_number&quot;);\n                resultClientList.add(new Client(contactPhone, status, moneySpent, bonus, clientName, assignedEmployeeNumber));\n            }\n        }\n        catch (SQLException e){\n            log.error(&quot;Error querying clients: &quot; + e.getMessage());\n        }\n        return resultClientList;\n    }\n</code></pre>\n<p>At this point method <code>executeClientQuery</code> receives null in a ResultSet. I tried querying <code>SELECT * FROM client</code>, but that didn't help. I tried debugging JDBC code, but found nothing. No exception is thrown, just the ResultSet is null. Running this query in the database, however, returns correct data.</p>\n<p>Connection is alive. Any other query on any other table returns correct ResultSet.</p>\n"},{"tags":["java","android","bluetooth","bluetooth-lowenergy"],"owner":{"account_id":98681,"reputation":12022,"user_id":266978,"accept_rate":100,"display_name":"Baltasarq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697314100,"creation_date":1697314100,"question_id":77294327,"body_markdown":"I&#39;m using [Google Android&#39;s CompanionDeviceManager API](https://developer.android.com/guide/topics/connectivity/companion-device-pairing) in order to find **Bluetooth LE** nearby devices able to measure Heart Rate.\r\n\r\n```java\r\n    final BluetoothLeDeviceFilter DEVICE_FILTER =\r\n                    new BluetoothLeDeviceFilter.Builder()\r\n                        .setScanFilter( new ScanFilter.Builder()\r\n                        /*    .setServiceUuid(\r\n                                    ParcelUuid.fromString( &quot;0000180D-0000-1000-8000-00805f9b34fb&quot; )\r\n                        */\r\n                            .build() ).build();\r\n\r\n    final AssociationRequest PAIRING_REQ = new AssociationRequest.Builder()\r\n                    .addDeviceFilter( DEVICE_FILTER )\r\n                    .setSingleDevice( false )\r\n                    .build();\r\n\r\n    final CompanionDeviceManager DEV_MANAGER =\r\n                    (CompanionDeviceManager) getSystemService(\r\n                                        Context.COMPANION_DEVICE_SERVICE );\r\n\r\n    DEV_MANAGER.associate( PAIRING_REQ, new CompanionDeviceManager.Callback() {\r\n            @Override\r\n            public void onDeviceFound(@NonNull IntentSender chooserLauncher)\r\n            {            \r\n                try {\r\n                    startIntentSenderForResult( chooserLauncher, RCQ_SELECT_DEVICE,\r\n                                            null, 0, 0, 0 );\r\n                } catch (IntentSender.SendIntentException e) {\r\n                    Log.e( LOG_TAG, &quot;onAssociationPending: failed to send intent&quot; );\r\n                }\r\n            }\r\n            @Override\r\n            public void onFailure(CharSequence errorMessage)\r\n            {\r\n                Log.e( LOG_TAG, &quot;[FAIL] &quot; + errorMessage );\r\n            }\r\n        }, null );\r\n```\r\nPlease note the commented lines at the beginning of the source code. I know this code works because, it its current state, it shows a dialog with all **Bluetooth LE** devices nearby, including the ones I&#39;m interested in.\r\n\r\nThe problem comes when I remove the comment marks above, therefore filtering by the heart rate service. In my own device with Android 12, nothing appears on screen, not even a dialog with an empty device list. I&#39;ve even tried to leave it there for hours, but nothing changes.\r\n\r\nMy expectations are:\r\n- There should be a dialog or at least a message showing that the device is scanning.\r\n- That dialog should have a time out, and then report that no device was found with the current filter.\r\n\r\nIt is possible I am making some mistake invoking the API, though. Any ideas? Any help will be truly appreciated.\r\n\r\nFWIW, I&#39;m aware of [this question with no answer](https://stackoverflow.com/questions/63765131/companiondevicemanager-ondevicefound-callback-function-not-being-called-if-sea).\r\n","title":"Android&#39;s CompanionDeviceManager associate() fails to find any device when filtering by service","body":"<p>I'm using <a href=\"https://developer.android.com/guide/topics/connectivity/companion-device-pairing\" rel=\"nofollow noreferrer\">Google Android's CompanionDeviceManager API</a> in order to find <strong>Bluetooth LE</strong> nearby devices able to measure Heart Rate.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    final BluetoothLeDeviceFilter DEVICE_FILTER =\n                    new BluetoothLeDeviceFilter.Builder()\n                        .setScanFilter( new ScanFilter.Builder()\n                        /*    .setServiceUuid(\n                                    ParcelUuid.fromString( &quot;0000180D-0000-1000-8000-00805f9b34fb&quot; )\n                        */\n                            .build() ).build();\n\n    final AssociationRequest PAIRING_REQ = new AssociationRequest.Builder()\n                    .addDeviceFilter( DEVICE_FILTER )\n                    .setSingleDevice( false )\n                    .build();\n\n    final CompanionDeviceManager DEV_MANAGER =\n                    (CompanionDeviceManager) getSystemService(\n                                        Context.COMPANION_DEVICE_SERVICE );\n\n    DEV_MANAGER.associate( PAIRING_REQ, new CompanionDeviceManager.Callback() {\n            @Override\n            public void onDeviceFound(@NonNull IntentSender chooserLauncher)\n            {            \n                try {\n                    startIntentSenderForResult( chooserLauncher, RCQ_SELECT_DEVICE,\n                                            null, 0, 0, 0 );\n                } catch (IntentSender.SendIntentException e) {\n                    Log.e( LOG_TAG, &quot;onAssociationPending: failed to send intent&quot; );\n                }\n            }\n            @Override\n            public void onFailure(CharSequence errorMessage)\n            {\n                Log.e( LOG_TAG, &quot;[FAIL] &quot; + errorMessage );\n            }\n        }, null );\n</code></pre>\n<p>Please note the commented lines at the beginning of the source code. I know this code works because, it its current state, it shows a dialog with all <strong>Bluetooth LE</strong> devices nearby, including the ones I'm interested in.</p>\n<p>The problem comes when I remove the comment marks above, therefore filtering by the heart rate service. In my own device with Android 12, nothing appears on screen, not even a dialog with an empty device list. I've even tried to leave it there for hours, but nothing changes.</p>\n<p>My expectations are:</p>\n<ul>\n<li>There should be a dialog or at least a message showing that the device is scanning.</li>\n<li>That dialog should have a time out, and then report that no device was found with the current filter.</li>\n</ul>\n<p>It is possible I am making some mistake invoking the API, though. Any ideas? Any help will be truly appreciated.</p>\n<p>FWIW, I'm aware of <a href=\"https://stackoverflow.com/questions/63765131/companiondevicemanager-ondevicefound-callback-function-not-being-called-if-sea\">this question with no answer</a>.</p>\n"},{"tags":["java","selenium","xpath","css-selectors","webdriverwait"],"comments":[{"owner":{"account_id":14791486,"reputation":4847,"user_id":10682289,"display_name":"JaSON"},"score":0,"creation_date":1599822286,"post_id":63845698,"comment_id":112900357,"body_markdown":"*::before tag* doesn&#39;t really affect your selectors. Just try to use Select class to handle `select` node and search by CSS selector `&quot;select.pika-select-month&quot;`","body":"<i>::before tag</i> doesn&#39;t really affect your selectors. Just try to use Select class to handle <code>select</code> node and search by CSS selector <code>&quot;select.pika-select-month&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599827773,"creation_date":1599827773,"answer_id":63847227,"question_id":63845698,"body_markdown":"[Pseudo Elements](https://css-tricks.com/almanac/selectors/a/after-and-before/)\r\n-----------------\r\nA CSS [pseudo-element](https://www.w3schools.com/css/css_pseudo_elements.asp) is used to style specified parts of an element. It can be used to:\r\n\r\n- Style the first letter, or line, of an element\r\n- Insert content before, or after, the content of an element\r\n\r\n\r\n----------\r\n\r\n\r\n::before\r\n--------\r\n`::before` is a pseudo element which allows you to insert content onto a page from CSS (without it needing to be in the HTML). While the end result is not actually in the DOM, it appears on the page as if it is.\r\n\r\nYou can find a couple of relevant detailed discussion in:\r\n\r\n- [How locate the pseudo-element ::before using Selenium Python](https://stackoverflow.com/questions/59689722/how-locate-the-pseudo-element-before-using-selenium-python/59706267#59706267)\r\n- [Not able to get element by xpath inside div with ::before](https://stackoverflow.com/questions/60360940/not-able-to-get-element-by-xpath-inside-div-with-before/60367247#60367247)\r\n\r\n\r\n----------\r\n\r\n\r\nThis usecase\r\n------------\r\nAs the date picker is a [tag:html-select] menu you have to use the [Select](https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.select.html#module-selenium.webdriver.support.select) _Class_. Moreover, as you have to interact with the [tag:drop-down-menu] you have to induce [WebDriverWait](https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visible-or-not-is-is-possible-that-i/48990165#48990165) for the `elementToBeClickable()`.\r\n\r\nTo select the `&lt;option&gt;` with text as _January_ from the [tag:dropdown] you can use you can use either of the following [Locator Strategies](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890):\r\n\r\n- Using _cssSelector_:\r\n\r\n\t  WebElement elem = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;select.pika-select.pika-select-month&quot;)));\r\n\t  Select mySelect = new Select(elem);\r\n\t  //selecting the item January by value\r\n\t  mySelect.selectByValue(&quot;0&quot;);\r\n           \t\r\n- Using _xpath_ and in a single line:\r\n\r\n\t  //selecting the item January by visible text\r\n\t  new Select(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//select[@class=&#39;pika-select pika-select-month&#39;]&quot;)))).selectByVisibleText(&quot;January&quot;);\r\n\r\nYou can find a couple of relevant detailed discussions in:\r\n\r\n- [How to select an option from a dropdown through Selenium WebDriver](https://stackoverflow.com/questions/49772710/how-to-select-an-option-from-a-dropdown-through-selenium-webdriver/49777340#49777340)\r\n- [How can I get all elements from drop down list in Selenium WebDriver?](https://stackoverflow.com/questions/16768318/how-can-i-get-all-elements-from-drop-down-list-in-selenium-webdriver/63093682#63093682)\r\n","title":"How to write the xpath for an element where ::before tag is involved","body":"<h2><a href=\"https://css-tricks.com/almanac/selectors/a/after-and-before/\" rel=\"nofollow noreferrer\">Pseudo Elements</a></h2>\n<p>A CSS <a href=\"https://www.w3schools.com/css/css_pseudo_elements.asp\" rel=\"nofollow noreferrer\">pseudo-element</a> is used to style specified parts of an element. It can be used to:</p>\n<ul>\n<li>Style the first letter, or line, of an element</li>\n<li>Insert content before, or after, the content of an element</li>\n</ul>\n<hr />\n<h2>::before</h2>\n<p><code>::before</code> is a pseudo element which allows you to insert content onto a page from CSS (without it needing to be in the HTML). While the end result is not actually in the DOM, it appears on the page as if it is.</p>\n<p>You can find a couple of relevant detailed discussion in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/59689722/how-locate-the-pseudo-element-before-using-selenium-python/59706267#59706267\">How locate the pseudo-element ::before using Selenium Python</a></li>\n<li><a href=\"https://stackoverflow.com/questions/60360940/not-able-to-get-element-by-xpath-inside-div-with-before/60367247#60367247\">Not able to get element by xpath inside div with ::before</a></li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>As the date picker is a <a href=\"/questions/tagged/html-select\" class=\"post-tag\" title=\"show questions tagged &#39;html-select&#39;\" rel=\"tag\">html-select</a> menu you have to use the <a href=\"https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.select.html#module-selenium.webdriver.support.select\" rel=\"nofollow noreferrer\">Select</a> <em>Class</em>. Moreover, as you have to interact with the <a href=\"/questions/tagged/drop-down-menu\" class=\"post-tag\" title=\"show questions tagged &#39;drop-down-menu&#39;\" rel=\"tag\">drop-down-menu</a> you have to induce <a href=\"https://stackoverflow.com/questions/48989049/selenium-how-selenium-identifies-elements-visible-or-not-is-is-possible-that-i/48990165#48990165\">WebDriverWait</a> for the <code>elementToBeClickable()</code>.</p>\n<p>To select the <code>&lt;option&gt;</code> with text as <em>January</em> from the <a href=\"/questions/tagged/dropdown\" class=\"post-tag\" title=\"show questions tagged &#39;dropdown&#39;\" rel=\"tag\">dropdown</a> you can use you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n<ul>\n<li><p>Using <em>cssSelector</em>:</p>\n<pre><code>WebElement elem = new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;select.pika-select.pika-select-month&quot;)));\nSelect mySelect = new Select(elem);\n//selecting the item January by value\nmySelect.selectByValue(&quot;0&quot;);\n</code></pre>\n</li>\n<li><p>Using <em>xpath</em> and in a single line:</p>\n<pre><code>//selecting the item January by visible text\nnew Select(new WebDriverWait(driver, 20).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//select[@class='pika-select pika-select-month']&quot;)))).selectByVisibleText(&quot;January&quot;);\n</code></pre>\n</li>\n</ul>\n<p>You can find a couple of relevant detailed discussions in:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/49772710/how-to-select-an-option-from-a-dropdown-through-selenium-webdriver/49777340#49777340\">How to select an option from a dropdown through Selenium WebDriver</a></li>\n<li><a href=\"https://stackoverflow.com/questions/16768318/how-can-i-get-all-elements-from-drop-down-list-in-selenium-webdriver/63093682#63093682\">How can I get all elements from drop down list in Selenium WebDriver?</a></li>\n</ul>\n"}],"owner":{"account_id":8074172,"reputation":1,"user_id":6085820,"display_name":"Vedavathi M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17274,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697313815,"creation_date":1599821793,"question_id":63845698,"body_markdown":"I am trying to click a select element which is followed by `::before` tag. Can anybody please help me to write the XPath or the CSSselector path for the below HTML\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBelow is the XPath that I have written to click on the month \r\n\r\n    driver.findElement(By.xpath(&quot;//div[contains(@class,&#39;pika-single is-bound left-aligned bottom-aligned&#39;)]/div[contains(@class,&#39;pika-lendar&#39;)]/div[contains(@class,&#39;pika-title&#39;]/div[1]/select[contains(@class,&#39;pika-select pika-select-month&#39;)]&quot;));\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vz02B.png","title":"How to write the xpath for an element where ::before tag is involved","body":"<p>I am trying to click a select element which is followed by <code>::before</code> tag. Can anybody please help me to write the XPath or the CSSselector path for the below HTML</p>\n<p><a href=\"https://i.stack.imgur.com/Vz02B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vz02B.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is the XPath that I have written to click on the month</p>\n<pre><code>driver.findElement(By.xpath(&quot;//div[contains(@class,'pika-single is-bound left-aligned bottom-aligned')]/div[contains(@class,'pika-lendar')]/div[contains(@class,'pika-title']/div[1]/select[contains(@class,'pika-select pika-select-month')]&quot;));\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1697303650,"post_id":77293759,"comment_id":136264220,"body_markdown":"Please add the assignment to your question. You should not expect other SO users to go to an external website that you didn&#39;t even link and read an assignment there to solve it for you. Also that website could vanish, change its links, etc.","body":"Please add the assignment to your question. You should not expect other SO users to go to an external website that you didn&#39;t even link and read an assignment there to solve it for you. Also that website could vanish, change its links, etc."},{"owner":{"account_id":2098966,"reputation":343,"user_id":1867093,"display_name":"Senthil"},"score":0,"creation_date":1697304431,"post_id":77293759,"comment_id":136264317,"body_markdown":"added the original question to the post","body":"added the original question to the post"}],"answers":[{"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1697313792,"post_id":77294299,"comment_id":136265267,"body_markdown":"@user85421 Yes, it should be. Typo fixed.","body":"@user85421 Yes, it should be. Typo fixed."},{"owner":{"account_id":2098966,"reputation":343,"user_id":1867093,"display_name":"Senthil"},"score":0,"creation_date":1697383993,"post_id":77294299,"comment_id":136270372,"body_markdown":"Thanks for the explanation. I understood that using that break definitely breaks the code. Also understood that the approach, start to finish does not work. Thanks again.","body":"Thanks for the explanation. I understood that using that break definitely breaks the code. Also understood that the approach, start to finish does not work. Thanks again."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697313764,"creation_date":1697313571,"answer_id":77294299,"question_id":77293759,"body_markdown":"There are all sorts of problems with your algorithm.\r\n\r\nFor example, given:\r\n\r\n`[10, 20, 20, 30, 30]` and k = 20, the right move is to forget about the `a[0]` and instead use your 20 available increments to get both `a[1]` and `a[2]` up to 30, for a max freq of 4. Your algorithm doesn&#39;t &#39;select&#39;, it always just goes. It&#39;ll spend 20 on getting 10 to 30, it won&#39;t get the answer right for this scenario. Your solution gets this wrong (the next problem described in the following paragraph _also_ goes wrong in this example case; your solution returns 2 when the correct answer is 4).\r\n\r\nA second place where your code fails is the `break;`. Once you run out of `k` to spend you just break. This fails, if there are further elements in the array that need 0 increments to get to the right number. You can trivially trigger this, too; try input [10,10,10] with `k=0`. Your app returns &#39;1&#39;. The correct answer is 3.\r\n\r\nThere are no easy fixes to your solution to address these issues.  The second problem (the `break;`) is easily addressed, but you need a pretty much entirely different algorithm to tackle the first problem. You have to toss most of it it and start anew. I&#39;m not sure there&#39;s much to learn when I add a working solution to this answer, that&#39;s not really what SO is for and would seem pointless (surely the point of you doing this exercise is to learn something, you don&#39;t learn nearly as much when you just get provided the answer).\r\n\r\nI make no guarantees that these 2 issues cover all problems. Merely that each one individually is sufficient to explain why your solution is wrong. There might be more.\r\n\r\n## So how do you approach these issues?\r\n\r\nUsually by first &#39;exploring the space&#39;. What is _interesting_ about the problem? Generally this involves writing out examples yourself. These questions tend to ship with a small set of examples, and some will tell you when your solution fails, which test it fails on, but, [A] not all such exercise things do that (some just say: &quot;Nope, wrong!&quot; without telling you which test case(s) it failed on), [B] the spirit of these things is not that you submit some garbage just to get some more involved test cases out, and [C] often the test cases that fails are humongous and make it difficult to tell what, exactly, is wrong.\r\n\r\nYou fell into the [C] trap here: You think you&#39;re almost there because seemingly only this rather large test case fails, and only by 1 degree. But, turns out, your solution is unsalvagable, and you couldn&#39;t tell in what way based on the failed test case that was provided.\r\n\r\nHence, unless you are experienced enough, always start out by hand cooking up some test cases. That&#39;s exactly what I did here, and came up with `[10, 20, 20, 30, 30] k = 10` and `[10, 10] k=0`.\r\n\r\nYou do this not _just_ to have test cases. Also to get a general understanding of the problem.\r\n\r\nWhere this gets orders of magnitude more complicated is that these programming puzzles are generally designed to be challenging in an &#39;algorithmic complexity&#39; way. They don&#39;t _just_ want you to code a program that calculates the solution. __They want you to program the fastest possible program that does it__. For most of the more challenging coding exercise I&#39;ve ever seen (and I&#39;ve seen hundreds if not thousands, from many sources, it&#39;s a bit of a hobby), the problem really isn&#39;t &#39;write code that solves the problem&#39;. It&#39;s &#39;figure out what the fastest algorithm is&#39;.\r\n\r\nThat&#39;s where it turns into an olympic-level sport. It takes _years_ of experience and study of complex fundamental informatics concepts (such as big-O notation, and a good grasp of the NP-complete problem space). It&#39;s a two-phase thing: You have to understand the fundamentals (NP-completeness, big-O notation) and then need the experience to quickly recognize the ways an algorithm translates into big-O/NP-completeness so that you can shoot them down (anything slower than O(n^2) is usually too slow - if you&#39;re fast at recognizing an algorithm you&#39;re forming to tackle the problem is just not going to end up being fast enough, you know to abandon that line of thought and think of something else). Some of the tools in the toolbelt are algorithms that are known to be &#39;fast enough&#39;, such as dynamic programming, so you can simplify problems into &#39;oh, that can be done with dynamic programming&#39;. Basically you build up a library of exercises and the approach to solve them, and then the exercise is to restate a problem in terms of known exercises which you already know an approach for that is fast enough. And the knowledge to know how combining parts of standard solutions affects runtime performance.\r\n\r\nSo how do you get _there_? Oof. Be good at math, university degrees, read a lot, lots of exercise. But, baby steps: You can&#39;t get to &#39;think about a good algorithm&#39; if you don&#39;t even know the lay of the land - and given that you hadn&#39;t, apparently, even considered the `[10, 20, 20, 30, 30] k = 10` case, you didn&#39;t have the lay of the land. So, work on that first. For the next exercise (or even for this one), spend a lot more time on writing out examples. Don&#39;t rely on the ones that the exercise provides (they tend to serve to _clarify_, not to give you the lay of the land), and don&#39;t rely on failed tests (they tend to be too complex to serve as tools to understand the lay of the land, and many such puzzler exercises do not provide them at all).\r\n\r\n## A few hints, perhaps?\r\n\r\n* Instead of going through the array from start to finish, which runs into the problem of spending too much to increment low numbers, you want to increment in order. You want to spend your `k` on the _closest_ lower number first (in the `[10,20,20,30,30]` case, the 20s are closer than the 10s, so you want to spend your limited `k` on the 20s first).\r\n\r\n* The order of the numbers in your input is __irrelevant__. Swap numbers around the array and the answer does not change. Hence, modifying their order doesn&#39;t change the answer. Is there a different order you can put them in that markedly simplifies the exercise?\r\n","title":"Leetcode 1838: Frequency of the Most Frequent Element java solution","body":"<p>There are all sorts of problems with your algorithm.</p>\n<p>For example, given:</p>\n<p><code>[10, 20, 20, 30, 30]</code> and k = 20, the right move is to forget about the <code>a[0]</code> and instead use your 20 available increments to get both <code>a[1]</code> and <code>a[2]</code> up to 30, for a max freq of 4. Your algorithm doesn't 'select', it always just goes. It'll spend 20 on getting 10 to 30, it won't get the answer right for this scenario. Your solution gets this wrong (the next problem described in the following paragraph <em>also</em> goes wrong in this example case; your solution returns 2 when the correct answer is 4).</p>\n<p>A second place where your code fails is the <code>break;</code>. Once you run out of <code>k</code> to spend you just break. This fails, if there are further elements in the array that need 0 increments to get to the right number. You can trivially trigger this, too; try input [10,10,10] with <code>k=0</code>. Your app returns '1'. The correct answer is 3.</p>\n<p>There are no easy fixes to your solution to address these issues.  The second problem (the <code>break;</code>) is easily addressed, but you need a pretty much entirely different algorithm to tackle the first problem. You have to toss most of it it and start anew. I'm not sure there's much to learn when I add a working solution to this answer, that's not really what SO is for and would seem pointless (surely the point of you doing this exercise is to learn something, you don't learn nearly as much when you just get provided the answer).</p>\n<p>I make no guarantees that these 2 issues cover all problems. Merely that each one individually is sufficient to explain why your solution is wrong. There might be more.</p>\n<h2>So how do you approach these issues?</h2>\n<p>Usually by first 'exploring the space'. What is <em>interesting</em> about the problem? Generally this involves writing out examples yourself. These questions tend to ship with a small set of examples, and some will tell you when your solution fails, which test it fails on, but, [A] not all such exercise things do that (some just say: &quot;Nope, wrong!&quot; without telling you which test case(s) it failed on), [B] the spirit of these things is not that you submit some garbage just to get some more involved test cases out, and [C] often the test cases that fails are humongous and make it difficult to tell what, exactly, is wrong.</p>\n<p>You fell into the [C] trap here: You think you're almost there because seemingly only this rather large test case fails, and only by 1 degree. But, turns out, your solution is unsalvagable, and you couldn't tell in what way based on the failed test case that was provided.</p>\n<p>Hence, unless you are experienced enough, always start out by hand cooking up some test cases. That's exactly what I did here, and came up with <code>[10, 20, 20, 30, 30] k = 10</code> and <code>[10, 10] k=0</code>.</p>\n<p>You do this not <em>just</em> to have test cases. Also to get a general understanding of the problem.</p>\n<p>Where this gets orders of magnitude more complicated is that these programming puzzles are generally designed to be challenging in an 'algorithmic complexity' way. They don't <em>just</em> want you to code a program that calculates the solution. <strong>They want you to program the fastest possible program that does it</strong>. For most of the more challenging coding exercise I've ever seen (and I've seen hundreds if not thousands, from many sources, it's a bit of a hobby), the problem really isn't 'write code that solves the problem'. It's 'figure out what the fastest algorithm is'.</p>\n<p>That's where it turns into an olympic-level sport. It takes <em>years</em> of experience and study of complex fundamental informatics concepts (such as big-O notation, and a good grasp of the NP-complete problem space). It's a two-phase thing: You have to understand the fundamentals (NP-completeness, big-O notation) and then need the experience to quickly recognize the ways an algorithm translates into big-O/NP-completeness so that you can shoot them down (anything slower than O(n^2) is usually too slow - if you're fast at recognizing an algorithm you're forming to tackle the problem is just not going to end up being fast enough, you know to abandon that line of thought and think of something else). Some of the tools in the toolbelt are algorithms that are known to be 'fast enough', such as dynamic programming, so you can simplify problems into 'oh, that can be done with dynamic programming'. Basically you build up a library of exercises and the approach to solve them, and then the exercise is to restate a problem in terms of known exercises which you already know an approach for that is fast enough. And the knowledge to know how combining parts of standard solutions affects runtime performance.</p>\n<p>So how do you get <em>there</em>? Oof. Be good at math, university degrees, read a lot, lots of exercise. But, baby steps: You can't get to 'think about a good algorithm' if you don't even know the lay of the land - and given that you hadn't, apparently, even considered the <code>[10, 20, 20, 30, 30] k = 10</code> case, you didn't have the lay of the land. So, work on that first. For the next exercise (or even for this one), spend a lot more time on writing out examples. Don't rely on the ones that the exercise provides (they tend to serve to <em>clarify</em>, not to give you the lay of the land), and don't rely on failed tests (they tend to be too complex to serve as tools to understand the lay of the land, and many such puzzler exercises do not provide them at all).</p>\n<h2>A few hints, perhaps?</h2>\n<ul>\n<li><p>Instead of going through the array from start to finish, which runs into the problem of spending too much to increment low numbers, you want to increment in order. You want to spend your <code>k</code> on the <em>closest</em> lower number first (in the <code>[10,20,20,30,30]</code> case, the 20s are closer than the 10s, so you want to spend your limited <code>k</code> on the 20s first).</p>\n</li>\n<li><p>The order of the numbers in your input is <strong>irrelevant</strong>. Swap numbers around the array and the answer does not change. Hence, modifying their order doesn't change the answer. Is there a different order you can put them in that markedly simplifies the exercise?</p>\n</li>\n</ul>\n"}],"owner":{"account_id":2098966,"reputation":343,"user_id":1867093,"display_name":"Senthil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77294299,"answer_count":1,"score":0,"last_activity_date":1697313764,"creation_date":1697302884,"question_id":77293759,"body_markdown":"Assignment Question: \r\n\r\n&gt; The frequency of an element is the number of times it occurs in an array.   \r\n&gt; You are given an integer array `nums` and an integer `k`. In one operation, you can choose an index of `nums` and increment the element at that index by 1.    \r\n&gt; Return the maximum possible frequency of an element after performing at most `k` operations.         \r\n&gt;     \r\n&gt; Example 1:    \r\n&gt; Input: nums = [1,2,4], k = 5\r\n&gt; Output: 3\r\n&gt; Explanation: Increment the first element three times and the second element two times to make nums = [4,4,4].\r\n&gt; 4 has a frequency of 3.\r\n&gt;\r\n&gt; Example 2:    \r\n&gt; Input: nums = [1,4,8,13], k = 5\r\n&gt; Output: 2\r\n&gt; Explanation: There are multiple optimal solutions:\r\n&gt; - Increment the first element three times to make nums = [4,4,8,13]. 4 has a frequency of 2.\r\n&gt; - Increment the second element four times to make nums = [1,8,8,13]. 8 has a frequency of 2.\r\n&gt; - Increment the third element five times to make nums = [1,4,13,13]. 13 has a frequency of 2.\r\n&gt;\r\n&gt; Example 3:    \r\n&gt; Input: nums = [3,9,6], k = 2\r\n&gt; Output: 1\r\n\r\nI have tried to solve with the below code and it fails for the test case \r\n\r\nTest case:\r\n \r\n\r\n    int[] nums = {9930,9923,9983,9997,9934,9952,9945,9914,9985,9982,9970,9932,9985,9902,9975,9990,9922,9990,9994,9937,9996,9964,9943,9963,9911,9925,9935,9945,9933,9916,9930,9938,10000,9916,9911,9959,9957,9907,9913,9916,9993,9930,9975,9924,9988,9923,9910,9925,9977,9981,9927,9930,9927,9925,9923,9904,9928,9928,9986,9903,9985,9954,9938,9911,9952,9974,9926,9920,9972,9983,9973,9917,9995,9973,9977,9947,9936,9975,9954,9932,9964,9972,9935,9946,9966};\r\n    int k = 3056 ;\r\nResult: 72 and\r\n\r\nExpected: 73\r\n\r\n\r\nCode below:\r\n\r\n    class Solution {\r\n    public int maxFrequency(int[] nums, int k) {\r\n        int maxFreq = 0;\r\n        for (int i = 0; i &lt; nums.length; i++) {\r\n            int k_remaining = k;\r\n            int curr_freq = 1;\r\n            for (int j = 0; j &lt; nums.length; j++) {\r\n                if (i == j) continue; // ignore if index matches\r\n\r\n                if (nums[i] &lt; nums[j]) continue; // ignore if the ith indexed number is less than the jth index number.\r\n\r\n                if (k_remaining &lt; 1) break;\r\n                System.out.println(&quot;k_remaining: &quot; + k_remaining + &quot;, nums[i]: &quot; + nums[i] + &quot;, nums[j]: &quot; + nums[j]);\r\n                int diff = nums[i] - nums[j];\r\n                // System.out.printf(&quot;i: %d, j: %d, nums[i]: %d, nums[j]: %d and diff: %d k_remiaining: %d\\n&quot;, i, j, nums[i]m nums[j], diff, k_remaining);\r\n                System.out.println(&quot;diff: &quot; + diff);\r\n                if (diff &lt;= k_remaining) {\r\n                    ++curr_freq;\r\n                    k_remaining = k_remaining - diff;\r\n                }\r\n            }\r\n            if (curr_freq &gt; maxFreq) maxFreq = curr_freq;\r\n        }\r\n        return maxFreq;\r\n    }\r\n\r\nI thought might be due to the boudary conditions and trace it. I tried to count by tabulating in the spreadsheet and there also I can count only 72. If someone tried this earlier and share their findings, it would be great. \r\n\r\nBelow is the attached spreadsheet\r\n\r\n    1\t9930\t53\t3003\r\n    2\t9923\t60\t2943\r\n    3\t9983\t0\t2943\r\n    4\t9934\t49\t2894\r\n    5\t9952\t31\t2863\r\n    6\t9945\t38\t2825\r\n    7\t9914\t69\t2756\r\n    8\t9982\t1\t2755\r\n    9\t9970\t13\t2742\r\n    10\t9932\t51\t2691\r\n    11\t9902\t81\t2610\r\n    12\t9975\t8\t2602\r\n    13\t9922\t61\t2541\r\n    14\t9937\t46\t2495\r\n    15\t9964\t19\t2476\r\n    16\t9943\t40\t2436\r\n    17\t9963\t20\t2416\r\n    18\t9911\t72\t2344\r\n    19\t9925\t58\t2286\r\n    20\t9935\t48\t2238\r\n    21\t9945\t38\t2200\r\n    22\t9933\t50\t2150\r\n    23\t9916\t67\t2083\r\n    24\t9930\t53\t2030\r\n    25\t9938\t45\t1985\r\n    26\t9916\t67\t1918\r\n    27\t9911\t72\t1846\r\n    28\t9959\t24\t1822\r\n    29\t9957\t26\t1796\r\n    30\t9907\t76\t1720\r\n    31\t9913\t70\t1650\r\n    32\t9916\t67\t1583\r\n    33\t9930\t53\t1530\r\n    34\t9975\t8\t1522\r\n    35\t9924\t59\t1463\r\n    36\t9923\t60\t1403\r\n    37\t9910\t73\t1330\r\n    38\t9925\t58\t1272\r\n    39\t9977\t6\t1266\r\n    40\t9981\t2\t1264\r\n    41\t9927\t56\t1208\r\n    42\t9930\t53\t1155\r\n    43\t9927\t56\t1099\r\n    44\t9925\t58\t1041\r\n    45\t9923\t60\t981\r\n    46\t9904\t79\t902\r\n    47\t9928\t55\t847\r\n    48\t9928\t55\t792\r\n    49\t9903\t80\t712\r\n    50\t9954\t29\t683\r\n    51\t9938\t45\t638\r\n    52\t9911\t72\t566\r\n    53\t9952\t31\t535\r\n    54\t9974\t9\t526\r\n    55\t9926\t57\t469\r\n    56\t9920\t63\t406\r\n    57\t9972\t11\t395\r\n    58\t9983\t0\t395\r\n    59\t9973\t10\t385\r\n    60\t9917\t66\t319\r\n    61\t9973\t10\t309\r\n    62\t9977\t6\t303\r\n    63\t9947\t36\t267\r\n    64\t9936\t47\t220\r\n    65\t9975\t8\t212\r\n    66\t9954\t29\t183\r\n    67\t9932\t51\t132\r\n    68\t9964\t19\t113\r\n    69\t9972\t11\t102\r\n    70\t9935\t48\t54\r\n    71\t9946\t37\t17\r\n    72\t9966\t17\t0\r\n\r\n\r\n","title":"Leetcode 1838: Frequency of the Most Frequent Element java solution","body":"<p>Assignment Question:</p>\n<blockquote>\n<p>The frequency of an element is the number of times it occurs in an array.<br />\nYou are given an integer array <code>nums</code> and an integer <code>k</code>. In one operation, you can choose an index of <code>nums</code> and increment the element at that index by 1.<br />\nReturn the maximum possible frequency of an element after performing at most <code>k</code> operations.</p>\n<p>Example 1:<br />\nInput: nums = [1,2,4], k = 5\nOutput: 3\nExplanation: Increment the first element three times and the second element two times to make nums = [4,4,4].\n4 has a frequency of 3.</p>\n<p>Example 2:<br />\nInput: nums = [1,4,8,13], k = 5\nOutput: 2\nExplanation: There are multiple optimal solutions:</p>\n<ul>\n<li>Increment the first element three times to make nums = [4,4,8,13]. 4 has a frequency of 2.</li>\n<li>Increment the second element four times to make nums = [1,8,8,13]. 8 has a frequency of 2.</li>\n<li>Increment the third element five times to make nums = [1,4,13,13]. 13 has a frequency of 2.</li>\n</ul>\n<p>Example 3:<br />\nInput: nums = [3,9,6], k = 2\nOutput: 1</p>\n</blockquote>\n<p>I have tried to solve with the below code and it fails for the test case</p>\n<p>Test case:</p>\n<pre><code>int[] nums = {9930,9923,9983,9997,9934,9952,9945,9914,9985,9982,9970,9932,9985,9902,9975,9990,9922,9990,9994,9937,9996,9964,9943,9963,9911,9925,9935,9945,9933,9916,9930,9938,10000,9916,9911,9959,9957,9907,9913,9916,9993,9930,9975,9924,9988,9923,9910,9925,9977,9981,9927,9930,9927,9925,9923,9904,9928,9928,9986,9903,9985,9954,9938,9911,9952,9974,9926,9920,9972,9983,9973,9917,9995,9973,9977,9947,9936,9975,9954,9932,9964,9972,9935,9946,9966};\nint k = 3056 ;\n</code></pre>\n<p>Result: 72 and</p>\n<p>Expected: 73</p>\n<p>Code below:</p>\n<pre><code>class Solution {\npublic int maxFrequency(int[] nums, int k) {\n    int maxFreq = 0;\n    for (int i = 0; i &lt; nums.length; i++) {\n        int k_remaining = k;\n        int curr_freq = 1;\n        for (int j = 0; j &lt; nums.length; j++) {\n            if (i == j) continue; // ignore if index matches\n\n            if (nums[i] &lt; nums[j]) continue; // ignore if the ith indexed number is less than the jth index number.\n\n            if (k_remaining &lt; 1) break;\n            System.out.println(&quot;k_remaining: &quot; + k_remaining + &quot;, nums[i]: &quot; + nums[i] + &quot;, nums[j]: &quot; + nums[j]);\n            int diff = nums[i] - nums[j];\n            // System.out.printf(&quot;i: %d, j: %d, nums[i]: %d, nums[j]: %d and diff: %d k_remiaining: %d\\n&quot;, i, j, nums[i]m nums[j], diff, k_remaining);\n            System.out.println(&quot;diff: &quot; + diff);\n            if (diff &lt;= k_remaining) {\n                ++curr_freq;\n                k_remaining = k_remaining - diff;\n            }\n        }\n        if (curr_freq &gt; maxFreq) maxFreq = curr_freq;\n    }\n    return maxFreq;\n}\n</code></pre>\n<p>I thought might be due to the boudary conditions and trace it. I tried to count by tabulating in the spreadsheet and there also I can count only 72. If someone tried this earlier and share their findings, it would be great.</p>\n<p>Below is the attached spreadsheet</p>\n<pre><code>1   9930    53  3003\n2   9923    60  2943\n3   9983    0   2943\n4   9934    49  2894\n5   9952    31  2863\n6   9945    38  2825\n7   9914    69  2756\n8   9982    1   2755\n9   9970    13  2742\n10  9932    51  2691\n11  9902    81  2610\n12  9975    8   2602\n13  9922    61  2541\n14  9937    46  2495\n15  9964    19  2476\n16  9943    40  2436\n17  9963    20  2416\n18  9911    72  2344\n19  9925    58  2286\n20  9935    48  2238\n21  9945    38  2200\n22  9933    50  2150\n23  9916    67  2083\n24  9930    53  2030\n25  9938    45  1985\n26  9916    67  1918\n27  9911    72  1846\n28  9959    24  1822\n29  9957    26  1796\n30  9907    76  1720\n31  9913    70  1650\n32  9916    67  1583\n33  9930    53  1530\n34  9975    8   1522\n35  9924    59  1463\n36  9923    60  1403\n37  9910    73  1330\n38  9925    58  1272\n39  9977    6   1266\n40  9981    2   1264\n41  9927    56  1208\n42  9930    53  1155\n43  9927    56  1099\n44  9925    58  1041\n45  9923    60  981\n46  9904    79  902\n47  9928    55  847\n48  9928    55  792\n49  9903    80  712\n50  9954    29  683\n51  9938    45  638\n52  9911    72  566\n53  9952    31  535\n54  9974    9   526\n55  9926    57  469\n56  9920    63  406\n57  9972    11  395\n58  9983    0   395\n59  9973    10  385\n60  9917    66  319\n61  9973    10  309\n62  9977    6   303\n63  9947    36  267\n64  9936    47  220\n65  9975    8   212\n66  9954    29  183\n67  9932    51  132\n68  9964    19  113\n69  9972    11  102\n70  9935    48  54\n71  9946    37  17\n72  9966    17  0\n</code></pre>\n"},{"tags":["java","joptionpane"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1697313476,"post_id":77293111,"comment_id":136265237,"body_markdown":"You might want to check https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems on how to use a debugger to find such errors.","body":"You might want to check <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\" title=\"what is a debugger and how can it help me diagnose problems\">stackoverflow.com/questions/25385173/&hellip;</a> on how to use a debugger to find such errors."},{"owner":{"account_id":29671057,"reputation":1,"user_id":22740286,"display_name":"Artem Chaykovskyy"},"score":0,"creation_date":1697365835,"post_id":77293111,"comment_id":136268507,"body_markdown":"This is sorted guys. Thanks!","body":"This is sorted guys. Thanks!"}],"owner":{"account_id":29671057,"reputation":1,"user_id":22740286,"display_name":"Artem Chaykovskyy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697312875,"creation_date":1697292267,"question_id":77293111,"body_markdown":"**pay.java**\r\n\r\n    public class Pay{\r\n    //Data members- private\r\n    \r\n    \tprivate double basicHours, otHours, basicRate; // setters\r\n    \tprivate double basicPay, otPay, totalPay; //getters\r\n    \r\n    //constartor\r\n    \r\n    \tpublic Pay(){\r\n    \r\n    \t}\r\n    \r\n    // Setters - setting the volues from main class\r\n    \r\n    \tpublic void setBasicHours (double basicHours){\r\n    \t\tthis.basicHours = basicHours;\r\n    \r\n    \t}\r\n    \r\n    \tpublic void setOtHours (double otHours){\r\n    \t\t\tthis.otHours = otHours;\r\n    \r\n        }\r\n    \r\n    \tpublic void setBasicRate (double basisRate){\r\n    \t\t\tthis.basicRate = basicRate;\r\n    \r\n    \t}\r\n    \r\n    // compute method\r\n    \r\n    \t\tpublic void computePay(){\r\n    \t\t\tbasicPay = basicHours * basicRate;\r\n    \t\t\totPay = otHours * basicRate * 1.5;\r\n    \t\t\ttotalPay = basicPay +otPay;\r\n         }\r\n    \r\n    // getters - returning the values to the main class\r\n    \r\n    \t\t\tpublic double getBasicPay(){\r\n    \t\t\t\treturn basicPay;\r\n    \r\n    \t}\r\n    \r\n    \t\t\tpublic double getOtPay(){\r\n    \t\t\t\treturn otPay;\r\n    \r\n    \t}\r\n    \r\n    \t\t\tpublic double getTotalPay(){\r\n    \t\t\t\treturn totalPay;\r\n    \r\n    \t}\r\n    \t} // class\r\n\r\n**payApp.java**\r\n\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class PayApp{\r\n    \tpublic static void main(String args[]){\r\n    \r\n    // Declare Variables\r\n    \r\n    \t\tdouble basicHours, otHours, basicRate;\r\n    \t\tdouble basicPay, otPay, totalPay;\r\n    \r\n    // Declare and create object\r\n    \t\tPay myP = new Pay();\r\n    \r\n    //Input\r\n    \t\tbasicHours = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the basic hours&quot;));\r\n    \t\totHours = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the overtime hours&quot;));\r\n    \t\tbasicRate = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the basic rate&quot;));\r\n    \r\n    //Process call setter compute and getters\r\n    \r\n    \tmyP.setBasicHours(basicHours);\r\n    \tmyP.setOtHours(otHours);\r\n    \tmyP.setBasicRate(basicRate);\r\n    \r\n    \tmyP.computePay();\r\n    \r\n    \tbasicPay = myP.getBasicPay();\r\n    \totPay = myP.getOtPay();\r\n    \ttotalPay = myP.getTotalPay();\r\n    \r\n    \r\n    \tJOptionPane.showMessageDialog(null,&quot;Basic Pay: &quot; + basicPay + &quot;\\n OTPay; &quot; + otPay + &quot;\\n Total Pay;&quot; + totalPay);\r\n    \r\n    \r\n    \t} // main\r\n    }// class\r\n\r\nboth files are compiling without errors but when users enters volumes for computations it give only zeros back\r\n","title":"jOptionPane returns 0 values instead of decent computational result","body":"<p><strong>pay.java</strong></p>\n<pre><code>public class Pay{\n//Data members- private\n\n    private double basicHours, otHours, basicRate; // setters\n    private double basicPay, otPay, totalPay; //getters\n\n//constartor\n\n    public Pay(){\n\n    }\n\n// Setters - setting the volues from main class\n\n    public void setBasicHours (double basicHours){\n        this.basicHours = basicHours;\n\n    }\n\n    public void setOtHours (double otHours){\n            this.otHours = otHours;\n\n    }\n\n    public void setBasicRate (double basisRate){\n            this.basicRate = basicRate;\n\n    }\n\n// compute method\n\n        public void computePay(){\n            basicPay = basicHours * basicRate;\n            otPay = otHours * basicRate * 1.5;\n            totalPay = basicPay +otPay;\n     }\n\n// getters - returning the values to the main class\n\n            public double getBasicPay(){\n                return basicPay;\n\n    }\n\n            public double getOtPay(){\n                return otPay;\n\n    }\n\n            public double getTotalPay(){\n                return totalPay;\n\n    }\n    } // class\n</code></pre>\n<p><strong>payApp.java</strong></p>\n<pre><code>import javax.swing.JOptionPane;\n\npublic class PayApp{\n    public static void main(String args[]){\n\n// Declare Variables\n\n        double basicHours, otHours, basicRate;\n        double basicPay, otPay, totalPay;\n\n// Declare and create object\n        Pay myP = new Pay();\n\n//Input\n        basicHours = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the basic hours&quot;));\n        otHours = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the overtime hours&quot;));\n        basicRate = Double.parseDouble(JOptionPane.showInputDialog(null, &quot;Please enter the basic rate&quot;));\n\n//Process call setter compute and getters\n\n    myP.setBasicHours(basicHours);\n    myP.setOtHours(otHours);\n    myP.setBasicRate(basicRate);\n\n    myP.computePay();\n\n    basicPay = myP.getBasicPay();\n    otPay = myP.getOtPay();\n    totalPay = myP.getTotalPay();\n\n\n    JOptionPane.showMessageDialog(null,&quot;Basic Pay: &quot; + basicPay + &quot;\\n OTPay; &quot; + otPay + &quot;\\n Total Pay;&quot; + totalPay);\n\n\n    } // main\n}// class\n</code></pre>\n<p>both files are compiling without errors but when users enters volumes for computations it give only zeros back</p>\n"},{"tags":["java","spring-boot","ssl"],"answers":[{"comments":[{"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"score":0,"creation_date":1697269763,"post_id":77291978,"comment_id":136261179,"body_markdown":"When we change our Redis certificate, we need to add it again to the truststore, my concern is I want avoid that process.","body":"When we change our Redis certificate, we need to add it again to the truststore, my concern is I want avoid that process."},{"owner":{"account_id":29646715,"reputation":26,"user_id":22721567,"display_name":"oakley"},"score":0,"creation_date":1697270048,"post_id":77291978,"comment_id":136261198,"body_markdown":"I do not see that as a challenge. anyways we do not change our servers frequently. but sure you can avoid that using something called as PKI setup. where target cert is signed by intermediate authority which is known/trusted to the client. you can have a look into it. and please consider accepting the answer if that helped.","body":"I do not see that as a challenge. anyways we do not change our servers frequently. but sure you can avoid that using something called as PKI setup. where target cert is signed by intermediate authority which is known/trusted to the client. you can have a look into it. and please consider accepting the answer if that helped."},{"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"score":0,"creation_date":1697274467,"post_id":77291978,"comment_id":136261488,"body_markdown":"How can I avoid using Public Key Infrastructure (PKI) in my case? I followed the redis documentation for connecting my Spring Boot code to a Redis server when TLS is enabled.https://redis.io/docs/clients/java/#:~:text=Connect%20to%20your%20production%20Redis%20with%20TLS&amp;text=Before%20connecting%20your%20application%20to,are%20in%20the%20correct%20format.&amp;text=Enter%20password%20to%20protect%20your,the%20keytool%20shipped%20with%20JDK.","body":"How can I avoid using Public Key Infrastructure (PKI) in my case? I followed the redis documentation for connecting my Spring Boot code to a Redis server when TLS is enabled.<a href=\"https://redis.io/docs/clients/java/#:~:text=Connect%20to%20your%20production%20Redis%20with%20TLS&amp;text=Before%20connecting%20your%20application%20to,are%20in%20the%20correct%20format.&amp;text=Enter%20password%20to%20protect%20your,the%20keytool%20shipped%20with%20JDK\" rel=\"nofollow noreferrer\">redis.io/docs/clients/java/&hellip;</a>."},{"owner":{"account_id":29646715,"reputation":26,"user_id":22721567,"display_name":"oakley"},"score":0,"creation_date":1697275642,"post_id":77291978,"comment_id":136261585,"body_markdown":"Not recommended but to use redis with non-tls (non-secure/plain way.) This again is not recommend but doable if your redis service is not publicly exposed. (subnet with no internet access)","body":"Not recommended but to use redis with non-tls (non-secure/plain way.) This again is not recommend but doable if your redis service is not publicly exposed. (subnet with no internet access)"},{"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"score":0,"creation_date":1697276334,"post_id":77291978,"comment_id":136261648,"body_markdown":"I followed the provided documentation to establish a connection. Is this a safe approach in a production environment? Please verify if you have knowledge about it        link       https://redis.io/docs/clients/java/#:~:text=Connect%20to%20your%20production%20Redis%20with%20TLS&amp;text=Before%20connecting%20your%20application%20to,are%20in%20the%20correct%20format.&amp;text=Enter%20password%20to%20protect%20your,the%20keytool%20shipped%20with%20JDK.","body":"I followed the provided documentation to establish a connection. Is this a safe approach in a production environment? Please verify if you have knowledge about it        link       <a href=\"https://redis.io/docs/clients/java/#:~:text=Connect%20to%20your%20production%20Redis%20with%20TLS&amp;text=Before%20connecting%20your%20application%20to,are%20in%20the%20correct%20format.&amp;text=Enter%20password%20to%20protect%20your,the%20keytool%20shipped%20with%20JDK\" rel=\"nofollow noreferrer\">redis.io/docs/clients/java/&hellip;</a>."}],"tags":[],"owner":{"account_id":29646715,"reputation":26,"user_id":22721567,"display_name":"oakley"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697268818,"creation_date":1697268560,"answer_id":77291978,"question_id":77291948,"body_markdown":"This is default behavior when your make use of self signed certificate in server machine.\r\n\r\n*&quot;I want to avoid adding the .p12 certificate to the truststore.&quot;* this is exact same reason why server certificates are added to the truststore as a client.\r\n\r\nThink about it ideally request to server should only and only come from legitimate clients (in your case spring app is client to redis server). adding certificate to truststore will make sure that only trusted clients are authorized to make the request.\r\n\r\nSo to answer your question adding certs to truststore is a common/well known practice done in web world.\r\n\r\nHope this helps. Thanks.","title":"Redis TLS with spring boot","body":"<p>This is default behavior when your make use of self signed certificate in server machine.</p>\n<p><em>&quot;I want to avoid adding the .p12 certificate to the truststore.&quot;</em> this is exact same reason why server certificates are added to the truststore as a client.</p>\n<p>Think about it ideally request to server should only and only come from legitimate clients (in your case spring app is client to redis server). adding certificate to truststore will make sure that only trusted clients are authorized to make the request.</p>\n<p>So to answer your question adding certs to truststore is a common/well known practice done in web world.</p>\n<p>Hope this helps. Thanks.</p>\n"}],"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77291978,"answer_count":1,"score":1,"last_activity_date":1697312623,"creation_date":1697267856,"question_id":77291948,"body_markdown":"Is it necessary to add the .p12 certificate to my Java truststore when establishing a TLS connection using a Spring Boot application with a Redis server that also has TLS enabled?\r\n\r\nAdding a certificate manually on production can create a dependency,\r\nI want to avoid adding the .p12 certificate to the truststore.\r\n\r\nWhen I don&#39;t add the truststore.p12 file, which contains ca.pem, my Spring Boot application gives me an error stating that &quot;trustAnchors must not be empty.\r\n\r\nI want to know above scenario is possible or not in my case and if I avoiding to adding truststore is it best practices.","title":"Redis TLS with spring boot","body":"<p>Is it necessary to add the .p12 certificate to my Java truststore when establishing a TLS connection using a Spring Boot application with a Redis server that also has TLS enabled?</p>\n<p>Adding a certificate manually on production can create a dependency,\nI want to avoid adding the .p12 certificate to the truststore.</p>\n<p>When I don't add the truststore.p12 file, which contains ca.pem, my Spring Boot application gives me an error stating that &quot;trustAnchors must not be empty.</p>\n<p>I want to know above scenario is possible or not in my case and if I avoiding to adding truststore is it best practices.</p>\n"},{"tags":["java","angularjs","jsp"],"answers":[{"comments":[{"owner":{"display_name":"user4277706"},"score":0,"creation_date":1435344846,"post_id":31079857,"comment_id":50179022,"body_markdown":"I think you are right. I should probably switch on to REST. So far I had basic idea on soap/jax-ws webservices and I am still learning it.","body":"I think you are right. I should probably switch on to REST. So far I had basic idea on soap/jax-ws webservices and I am still learning it."},{"owner":{"display_name":"user4277706"},"score":0,"creation_date":1435385315,"post_id":31079857,"comment_id":50188878,"body_markdown":"One confusion I always had is why angular js is called Single page application? when a normal enterprise usually has lot of pages (such as jsp pages). So using angular js means there should be only one page or it is not suitable for multiple pages?","body":"One confusion I always had is why angular js is called Single page application? when a normal enterprise usually has lot of pages (such as jsp pages). So using angular js means there should be only one page or it is not suitable for multiple pages?"},{"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"score":0,"creation_date":1435405845,"post_id":31079857,"comment_id":50193738,"body_markdown":"Read up on it, but it generally means that there are few or no hard refreshes in the app (full round trips to the server). You use ajax to communicate with the server and  look like separate pages are all generated client side.  Often the whole application is hosted in a single jsp page.  In practice it might be 2 or 3 jsp pages for an application instead of many dozens.","body":"Read up on it, but it generally means that there are few or no hard refreshes in the app (full round trips to the server). You use ajax to communicate with the server and  look like separate pages are all generated client side.  Often the whole application is hosted in a single jsp page.  In practice it might be 2 or 3 jsp pages for an application instead of many dozens."}],"tags":[],"owner":{"account_id":406060,"reputation":21895,"user_id":775345,"accept_rate":96,"display_name":"Robert Moskal"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1435347869,"creation_date":1435343345,"answer_id":31079857,"question_id":31079695,"body_markdown":"If you are making a single page web application then the benefits of using a  front end web framework like angular or backbone are clear. They handle client side routing, templating, data binding, dependency injection ajax interaction with the back end, etc.. etc. Vanilla jsp has no facilities for building SPAs at all.\r\n\r\nAngular really wants to talk to the backend using something like a RESTFUL api.  To make your life easier, I suggest augmenting your servlet application with JAX-RS implementation like jersey or restEasy. These will give you a more natural and idiomatic way to communicate with angular.\r\n\r\nIt&#39;s still going to be a bit more work that using node (but hey you&#39;re used to that, you&#39;re using java). But you&#39;ll find it more productive than using naked servlets.","title":"angular js benefits over jsp view","body":"<p>If you are making a single page web application then the benefits of using a  front end web framework like angular or backbone are clear. They handle client side routing, templating, data binding, dependency injection ajax interaction with the back end, etc.. etc. Vanilla jsp has no facilities for building SPAs at all.</p>\n\n<p>Angular really wants to talk to the backend using something like a RESTFUL api.  To make your life easier, I suggest augmenting your servlet application with JAX-RS implementation like jersey or restEasy. These will give you a more natural and idiomatic way to communicate with angular.</p>\n\n<p>It's still going to be a bit more work that using node (but hey you're used to that, you're using java). But you'll find it more productive than using naked servlets.</p>\n"},{"comments":[{"owner":{"display_name":"user4277706"},"score":0,"creation_date":1435344744,"post_id":31079931,"comment_id":50178960,"body_markdown":"My web app will be having user registration, sending emails, feedback submission, sending sms, Customers can log in to web app and check their bills every month, analyze them with graphical views (Customisable) etc. Do you think its better with angularjs for my requirements?","body":"My web app will be having user registration, sending emails, feedback submission, sending sms, Customers can log in to web app and check their bills every month, analyze them with graphical views (Customisable) etc. Do you think its better with angularjs for my requirements?"},{"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"score":1,"creation_date":1435353871,"post_id":31079931,"comment_id":50183053,"body_markdown":"I think the big difference will be in the user interaction style.  JSP will work well for simple pages which perform single actions, like forms.  If you want rich pages with lots of user interaction, Angular is likely to be a better fit.\nDoing analysis and graphics would make me lean towards Angular - it&#39;s very good at handling complex data models and interactions, and makes pages wonderfully extensible.","body":"I think the big difference will be in the user interaction style.  JSP will work well for simple pages which perform single actions, like forms.  If you want rich pages with lots of user interaction, Angular is likely to be a better fit. Doing analysis and graphics would make me lean towards Angular - it&#39;s very good at handling complex data models and interactions, and makes pages wonderfully extensible."}],"tags":[],"owner":{"account_id":3186389,"reputation":2247,"user_id":2691904,"display_name":"hugh"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1435343593,"creation_date":1435343593,"answer_id":31079931,"question_id":31079695,"body_markdown":"The biggest difference between Angular and JSP is where the work carried out - if you want a rich web application with lots of user interaction and page state, Angular may be the best choice.  If you want pages with simple, fixed interactions and most of the work carried out server-side, JSP might suit your needs better.\r\nAs with all these decisions, it&#39;s true that you could do this in many different technologies, it&#39;s just a matter of which best suits the task you&#39;re trying to accomplish.  It&#39;s not really a matter of whether Angular is *better*, it&#39;s just more appropriate for some applications.","title":"angular js benefits over jsp view","body":"<p>The biggest difference between Angular and JSP is where the work carried out - if you want a rich web application with lots of user interaction and page state, Angular may be the best choice.  If you want pages with simple, fixed interactions and most of the work carried out server-side, JSP might suit your needs better.\nAs with all these decisions, it's true that you could do this in many different technologies, it's just a matter of which best suits the task you're trying to accomplish.  It's not really a matter of whether Angular is <em>better</em>, it's just more appropriate for some applications.</p>\n"},{"tags":[],"owner":{"account_id":15050906,"reputation":11,"user_id":10862647,"display_name":"Arsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697312266,"creation_date":1697311856,"answer_id":77294204,"question_id":31079695,"body_markdown":"JSP:\r\n\r\n1 You have all application logic under your hands and to produce required values for the page during a page generation. Page and data are transferred in one shot to the user browser.\r\n2. You deal with Java and JSP only, and tag libraries to build a page.\r\n\r\nAngular:\r\n\r\n1. You need server back-end anyway to have all logic to get data from the database or from somewhere else.\r\n2. You need to convert all data into JSON and secure it with keys;\r\n3. You need to un-REST all data in the browser to make use of it in the web page;\r\n4. You need to build logic for each component in order to build a web page in the user browser. It is kinda a reflection of business logic built on the server side. \r\n5. If your page has very complex data than Angular application makes many(!!!) network trips to get all required data. If you host your app on the cloud, than it becomes very costly.\r\n6. You have extra deployment steps. In fact you have to build and deploy back-end and front end separately.\r\n7. You have to use third party libraries and master them, i.e. RxJs...\r\n8. You have constantly changing versions of Angular, libraries.\r\n\r\nIn summary:\r\nWe were migrating a JSP app into Angular and we had original developers on the team. Original developers spent around one week on each JSP page. But to build the same page with Angular took from 3-4 weeks for each page with the same functionality, but with different look. Pages in Angular with complex data and complex functionality are nightmare to test and debug.\r\nGood part is that all that time spent on Angular app - it is billable hours. ;)\r\n\r\n\r\n","title":"angular js benefits over jsp view","body":"<p>JSP:</p>\n<p>1 You have all application logic under your hands and to produce required values for the page during a page generation. Page and data are transferred in one shot to the user browser.\n2. You deal with Java and JSP only, and tag libraries to build a page.</p>\n<p>Angular:</p>\n<ol>\n<li>You need server back-end anyway to have all logic to get data from the database or from somewhere else.</li>\n<li>You need to convert all data into JSON and secure it with keys;</li>\n<li>You need to un-REST all data in the browser to make use of it in the web page;</li>\n<li>You need to build logic for each component in order to build a web page in the user browser. It is kinda a reflection of business logic built on the server side.</li>\n<li>If your page has very complex data than Angular application makes many(!!!) network trips to get all required data. If you host your app on the cloud, than it becomes very costly.</li>\n<li>You have extra deployment steps. In fact you have to build and deploy back-end and front end separately.</li>\n<li>You have to use third party libraries and master them, i.e. RxJs...</li>\n<li>You have constantly changing versions of Angular, libraries.</li>\n</ol>\n<p>In summary:\nWe were migrating a JSP app into Angular and we had original developers on the team. Original developers spent around one week on each JSP page. But to build the same page with Angular took from 3-4 weeks for each page with the same functionality, but with different look. Pages in Angular with complex data and complex functionality are nightmare to test and debug.\nGood part is that all that time spent on Angular app - it is billable hours. ;)</p>\n"}],"owner":{"display_name":"user4277706"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16648,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1697312266,"creation_date":1435342748,"question_id":31079695,"body_markdown":"I wonder why people are using angularjs to check things like existing username or form registration when it can be done simply by a presentation layer called jsp in combination with servlet as backend code.\r\n\r\nFor example, angular makes ajax calls to java servlet where servlet fetches username from DB and shown back to jsp view. All this can be achieved with jsp and servlet instead of adding one more layer of angular using separate custom directives and so on which adds to more code.\r\n\r\nI am trying to figure out advantages of angular over jsp view layer. Things like form registration can be done with jsp instead of angular.\r\n\r\nToday, I spent almost 8 hours writing a program to check existing username using angular and java servlet being a back end. I am not sure if its a bug in angular or jsp where `request.getParameter(&quot;Username&quot;)` returns null in servlet. The parameter is passed from angular from using `$http` post ajax call.\r\n\r\nFinally I had to use some inputstream to read the value passed from angular form and return a response. Who can imagine this sort of issue?\r\n\r\nFinally, my question is what makes angular better than jsp. Is there any other back end sever better to be used with angular (may be nodejs?) than tomcat usually used along with java?","title":"angular js benefits over jsp view","body":"<p>I wonder why people are using angularjs to check things like existing username or form registration when it can be done simply by a presentation layer called jsp in combination with servlet as backend code.</p>\n\n<p>For example, angular makes ajax calls to java servlet where servlet fetches username from DB and shown back to jsp view. All this can be achieved with jsp and servlet instead of adding one more layer of angular using separate custom directives and so on which adds to more code.</p>\n\n<p>I am trying to figure out advantages of angular over jsp view layer. Things like form registration can be done with jsp instead of angular.</p>\n\n<p>Today, I spent almost 8 hours writing a program to check existing username using angular and java servlet being a back end. I am not sure if its a bug in angular or jsp where <code>request.getParameter(\"Username\")</code> returns null in servlet. The parameter is passed from angular from using <code>$http</code> post ajax call.</p>\n\n<p>Finally I had to use some inputstream to read the value passed from angular form and return a response. Who can imagine this sort of issue?</p>\n\n<p>Finally, my question is what makes angular better than jsp. Is there any other back end sever better to be used with angular (may be nodejs?) than tomcat usually used along with java?</p>\n"},{"tags":["java","android","android-bluetooth"],"comments":[{"owner":{"account_id":237170,"reputation":18509,"user_id":505152,"accept_rate":72,"display_name":"htafoya"},"score":0,"creation_date":1697835163,"post_id":77158314,"comment_id":136334200,"body_markdown":"The transformation to registerForActivityResult is usually straightforward, change the code in onActivityResult to a lambda, be sure to declare this function since the creation of the activity .\n\nThe extra will be the parameter in the lambda","body":"The transformation to registerForActivityResult is usually straightforward, change the code in onActivityResult to a lambda, be sure to declare this function since the creation of the activity .  The extra will be the parameter in the lambda"},{"owner":{"account_id":98681,"reputation":12022,"user_id":266978,"accept_rate":100,"display_name":"Baltasarq"},"score":0,"creation_date":1698045672,"post_id":77158314,"comment_id":136350549,"body_markdown":"Yep, it is usually straightforward.","body":"Yep, it is usually straightforward."}],"owner":{"account_id":98681,"reputation":12022,"user_id":266978,"accept_rate":100,"display_name":"Baltasarq"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697312082,"creation_date":1695391390,"question_id":77158314,"body_markdown":"In its own documentation page, it is stated that **CompanionDeviceManager** is the preferred mechanism in order to scan for devices without asking for the infamous FINE_LOCATION premission.\r\n\r\n```java\r\ndeviceManager.associate(pairingRequest, new CompanionDeviceManager.Callback() {\r\n    executor,\r\n    // Called when a device is found. Launch the IntentSender so the user can\r\n    // select the device they want to pair with.\r\n    @Override\r\n    public void onDeviceFound(IntentSender chooserLauncher) {\r\n        try {\r\n            startIntentSenderForResult(\r\n                    chooserLauncher, SELECT_DEVICE_REQUEST_CODE, null, 0, 0, 0\r\n            );\r\n        } catch (IntentSender.SendIntentException e) {\r\n            Log.e(&quot;MainActivity&quot;, &quot;Failed to send intent&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nThis code has unfortunately various issues. For starters, it does not compile out of the box, since you have to move the `executor`argument. But also, even when it was written, it makes use of **a huge lot** of deprecated methods.\r\n\r\nThe first deprecated method is found in `onAssociationPending()`: `startIntentSenderForResult`. The docs have put a lot of effort over a long time to discredit this mechanism. So then I converted the code to:\r\n\r\n```java\r\nLAUNCH_DEVICE_CHOOSER_ASSOCIATION.launch( chooserLauncher );\r\n```\r\n\r\nAnd its counterpart:\r\n\r\n```java\r\nprivate final ActivityResultLauncher&lt;IntentSender&gt; LAUNCH_DEVICE_CHOOSER_ASSOCIATION =\r\n            this.registerForActivityResult(\r\n                    new ActivityResultContracts.StartIntentSenderForResult(),\r\n                    result -&gt; {\r\n                        if ( result.getResultCode() == RESULT_OK ) {\r\n                            final BluetoothDevice DEVICE =\r\n                                    result.getData().getParcelableExtra( CompanionDeviceManager.EXTRA_DEVICE );\r\n                            if ( DEVICE != null ) {\r\n                                this.onDeviceFound( DEVICE );\r\n                            }\r\n                        }\r\n                    });\r\n```\r\n\r\nThere are various problems with this code, though:\r\n\r\n- The compiler complains about an `ActivityResultLauncher&lt;IntentSenderResquest&gt;` being provided, instead of an `ActivityResultLauncher&lt;IntentSender&gt;`. I don&#39;t understand why. If I change `ActivityResultLauncher&lt;IntentSender&gt;` to `ActivityResultLauncher&lt;IntentSenderRequest&gt;`, then it compiles, but then the method `launch()` complains about passing an `IntentSender` when an `IntentSenderRequest` was expected.\r\n\r\n- in the code immediately above, `result.getData()` returns an `Intent`. This class is expected to have a `getParcelableExtra()` method which is... deprecated. But that is not all, the parameter to that method should be `CompanionDeviceManager.EXTRA_DEVICE`, which is, you guessed it, deprecated. In the latter&#39;s documentation it is adviced to use `AssociationInfo::getAssociatedDevice`, method which is produced out of the blue. I mean, there is nowhere to be found (at least I was unable to find it), how to get to an object of that class.\r\n\r\nMy questions are:\r\n- How is this code converted to the (supposedly) newer/cleaner/safer `registerForActivityResult` mechanism?\r\n- How can I get the extra info from the `ActivityResult` object, avoiding deprecated mechanisms?\r\n- Even better, I should obtain an `AssociationInfo` object, to which I should call `getAssociatedDevice()` from which I should obtain an `ScanResult` object, since I am filtering for BLE devices. How can I get that from `result.getData()` (an `&#204;ntent`)?\r\n\r\nAny help will be truly appreciated.\r\n","title":"How to get over Android CompanionDataManager using deprecated methods?","body":"<p>In its own documentation page, it is stated that <strong>CompanionDeviceManager</strong> is the preferred mechanism in order to scan for devices without asking for the infamous FINE_LOCATION premission.</p>\n<pre class=\"lang-java prettyprint-override\"><code>deviceManager.associate(pairingRequest, new CompanionDeviceManager.Callback() {\n    executor,\n    // Called when a device is found. Launch the IntentSender so the user can\n    // select the device they want to pair with.\n    @Override\n    public void onDeviceFound(IntentSender chooserLauncher) {\n        try {\n            startIntentSenderForResult(\n                    chooserLauncher, SELECT_DEVICE_REQUEST_CODE, null, 0, 0, 0\n            );\n        } catch (IntentSender.SendIntentException e) {\n            Log.e(&quot;MainActivity&quot;, &quot;Failed to send intent&quot;);\n        }\n    }\n</code></pre>\n<p>This code has unfortunately various issues. For starters, it does not compile out of the box, since you have to move the <code>executor</code>argument. But also, even when it was written, it makes use of <strong>a huge lot</strong> of deprecated methods.</p>\n<p>The first deprecated method is found in <code>onAssociationPending()</code>: <code>startIntentSenderForResult</code>. The docs have put a lot of effort over a long time to discredit this mechanism. So then I converted the code to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LAUNCH_DEVICE_CHOOSER_ASSOCIATION.launch( chooserLauncher );\n</code></pre>\n<p>And its counterpart:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final ActivityResultLauncher&lt;IntentSender&gt; LAUNCH_DEVICE_CHOOSER_ASSOCIATION =\n            this.registerForActivityResult(\n                    new ActivityResultContracts.StartIntentSenderForResult(),\n                    result -&gt; {\n                        if ( result.getResultCode() == RESULT_OK ) {\n                            final BluetoothDevice DEVICE =\n                                    result.getData().getParcelableExtra( CompanionDeviceManager.EXTRA_DEVICE );\n                            if ( DEVICE != null ) {\n                                this.onDeviceFound( DEVICE );\n                            }\n                        }\n                    });\n</code></pre>\n<p>There are various problems with this code, though:</p>\n<ul>\n<li><p>The compiler complains about an <code>ActivityResultLauncher&lt;IntentSenderResquest&gt;</code> being provided, instead of an <code>ActivityResultLauncher&lt;IntentSender&gt;</code>. I don't understand why. If I change <code>ActivityResultLauncher&lt;IntentSender&gt;</code> to <code>ActivityResultLauncher&lt;IntentSenderRequest&gt;</code>, then it compiles, but then the method <code>launch()</code> complains about passing an <code>IntentSender</code> when an <code>IntentSenderRequest</code> was expected.</p>\n</li>\n<li><p>in the code immediately above, <code>result.getData()</code> returns an <code>Intent</code>. This class is expected to have a <code>getParcelableExtra()</code> method which is... deprecated. But that is not all, the parameter to that method should be <code>CompanionDeviceManager.EXTRA_DEVICE</code>, which is, you guessed it, deprecated. In the latter's documentation it is adviced to use <code>AssociationInfo::getAssociatedDevice</code>, method which is produced out of the blue. I mean, there is nowhere to be found (at least I was unable to find it), how to get to an object of that class.</p>\n</li>\n</ul>\n<p>My questions are:</p>\n<ul>\n<li>How is this code converted to the (supposedly) newer/cleaner/safer <code>registerForActivityResult</code> mechanism?</li>\n<li>How can I get the extra info from the <code>ActivityResult</code> object, avoiding deprecated mechanisms?</li>\n<li>Even better, I should obtain an <code>AssociationInfo</code> object, to which I should call <code>getAssociatedDevice()</code> from which I should obtain an <code>ScanResult</code> object, since I am filtering for BLE devices. How can I get that from <code>result.getData()</code> (an <code>Ìntent</code>)?</li>\n</ul>\n<p>Any help will be truly appreciated.</p>\n"},{"tags":["java","spring-boot","httpclient","resttemplate"],"owner":{"account_id":9866927,"reputation":11,"user_id":7308076,"display_name":"Anil Altunkan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697311843,"creation_date":1697311843,"question_id":77294203,"body_markdown":"We&#39;ve been using RestTemplate in our Spring Boot application in order to send rest requests to multiple dependencies. We use different timeouts for each dependencies and for this reason, we build a single rest template for each client and put all RestTemplates into an immutable map and then later use it while sending the requests. We also have a config service integration and if any timeout value changes in the config, we basically replace existing RestTemplate.\r\n\r\nMy question is, are there any differences between using same Java HttpClient or creating a new HttpClient with each request? Basically is it worth to keep HttpClient singleton per dependency or build a new one on the fly?\r\n\r\nWe’ve never tried default HttpClient.","title":"Migration from RestTemplate to Java default HttpClient","body":"<p>We've been using RestTemplate in our Spring Boot application in order to send rest requests to multiple dependencies. We use different timeouts for each dependencies and for this reason, we build a single rest template for each client and put all RestTemplates into an immutable map and then later use it while sending the requests. We also have a config service integration and if any timeout value changes in the config, we basically replace existing RestTemplate.</p>\n<p>My question is, are there any differences between using same Java HttpClient or creating a new HttpClient with each request? Basically is it worth to keep HttpClient singleton per dependency or build a new one on the fly?</p>\n<p>We’ve never tried default HttpClient.</p>\n"},{"tags":["java","python","set"],"comments":[{"owner":{"account_id":107014,"reputation":11347,"user_id":284741,"accept_rate":95,"display_name":"Oliver"},"score":3,"creation_date":1322494028,"post_id":8298018,"comment_id":10222233,"body_markdown":"you can do `type(z.add(y))` in the console to see these things for yourself. The result here is `&lt;type &#39;NoneType&#39;&gt;`","body":"you can do <code>type(z.add(y))</code> in the console to see these things for yourself. The result here is <code>&lt;type &#39;NoneType&#39;&gt;</code>"}],"answers":[{"comments":[{"owner":{"account_id":285593,"reputation":24618,"user_id":584347,"accept_rate":100,"display_name":"Michael J. Barber"},"score":0,"creation_date":1322494429,"post_id":8298064,"comment_id":10222375,"body_markdown":"A good answer, but I think the equivalent to the Java would be `if y not in z: print something`.","body":"A good answer, but I think the equivalent to the Java would be <code>if y not in z: print something</code>."},{"owner":{"account_id":108510,"reputation":26313,"user_id":287976,"accept_rate":92,"display_name":"brandizzi"},"score":0,"creation_date":1322494525,"post_id":8298064,"comment_id":10222412,"body_markdown":"@MichaelJ.Barber you are completely right. Thank you! Question updated.","body":"@MichaelJ.Barber you are completely right. Thank you! Question updated."},{"owner":{"account_id":1324453,"reputation":1290,"user_id":1269598,"accept_rate":64,"display_name":"hypehuman"},"score":8,"creation_date":1547244958,"post_id":8298064,"comment_id":95140467,"body_markdown":"So there&#39;s no way in to check both in one operation? The return value in Java is nice for performance-critical scenarios, since adding to a set involves a lookup anyway.","body":"So there&#39;s no way in to check both in one operation? The return value in Java is nice for performance-critical scenarios, since adding to a set involves a lookup anyway."}],"tags":[],"owner":{"account_id":108510,"reputation":26313,"user_id":287976,"accept_rate":92,"display_name":"brandizzi"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1387563922,"creation_date":1322493900,"answer_id":8298064,"question_id":8298018,"body_markdown":"In Python, the `set.add()` method does not return anything. You have to use the `not in` operator:\r\n\r\n    z = set()\r\n    if y not in z: # If the object is not in the list yet...\r\n        print something\r\n    z.add(y)\r\n\r\nIf you _really_ need to know whether the object was in the set before you added it, just store the boolean value:\r\n\r\n    z = set()\r\n    was_here = y not in z\r\n    z.add(y)\r\n    if was_here: # If the object was not in the list yet...\r\n        print something\r\n\r\nHowever, I think it is unlikely you need it.\r\n\r\nThis is a Python convention: when a method updates some object, it returns `None`. You can ignore this convention; also, there are methods &quot;in the wild&quot; that violate it. However, it is a common, recognized convention: I&#39;d recommend to stick to it and have it in mind.","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>In Python, the <code>set.add()</code> method does not return anything. You have to use the <code>not in</code> operator:</p>\n\n<pre><code>z = set()\nif y not in z: # If the object is not in the list yet...\n    print something\nz.add(y)\n</code></pre>\n\n<p>If you <em>really</em> need to know whether the object was in the set before you added it, just store the boolean value:</p>\n\n<pre><code>z = set()\nwas_here = y not in z\nz.add(y)\nif was_here: # If the object was not in the list yet...\n    print something\n</code></pre>\n\n<p>However, I think it is unlikely you need it.</p>\n\n<p>This is a Python convention: when a method updates some object, it returns <code>None</code>. You can ignore this convention; also, there are methods \"in the wild\" that violate it. However, it is a common, recognized convention: I'd recommend to stick to it and have it in mind.</p>\n"},{"tags":[],"owner":{"account_id":57504,"reputation":7327,"user_id":172277,"accept_rate":72,"display_name":"AsTeR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1322493991,"creation_date":1322493991,"answer_id":8298090,"question_id":8298018,"body_markdown":"I guess, in Python is basically add y to your set if needed and doesn&#39;t return anything. You can test if y is already in z if you would like to know if the add will change anything.\r\n\r\nHere some tests you can do in iPython :\r\n\r\n    In [2]: z = set()\r\n    \r\n    In [3]: y = 4\r\n    \r\n    In [4]: z.add(y)\r\n    \r\n    In [5]: t = z.add(y)\r\n    \r\n    In [6]: t\r\n    \r\n    In [7]: print t\r\n    None\r\n\r\n","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>I guess, in Python is basically add y to your set if needed and doesn't return anything. You can test if y is already in z if you would like to know if the add will change anything.</p>\n\n<p>Here some tests you can do in iPython :</p>\n\n<pre><code>In [2]: z = set()\n\nIn [3]: y = 4\n\nIn [4]: z.add(y)\n\nIn [5]: t = z.add(y)\n\nIn [6]: t\n\nIn [7]: print t\nNone\n</code></pre>\n"},{"tags":[],"owner":{"account_id":73934,"reputation":6390,"user_id":212676,"display_name":"N3dst4"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1322494198,"creation_date":1322494198,"answer_id":8298143,"question_id":8298018,"body_markdown":"Generally, Python tries to avoid using conditions with side-effects. That is, the condition should be just a test, and operations that change data should happen on their own.\r\n\r\nI agree that it&#39;s sometimes convenient to use a side-effect in a condition, but no, in this case, you need to:\r\n\r\n    z = set()\r\n    if y not in z:\r\n        z.add(y)\r\n        print something\r\n\r\nPersonally I like the simple expressiveness of `if y not in z:`, even if it takes up one more line of code, and it&#39;s one less thing to mentally parse when reading the the code at a later date.","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>Generally, Python tries to avoid using conditions with side-effects. That is, the condition should be just a test, and operations that change data should happen on their own.</p>\n\n<p>I agree that it's sometimes convenient to use a side-effect in a condition, but no, in this case, you need to:</p>\n\n<pre><code>z = set()\nif y not in z:\n    z.add(y)\n    print something\n</code></pre>\n\n<p>Personally I like the simple expressiveness of <code>if y not in z:</code>, even if it takes up one more line of code, and it's one less thing to mentally parse when reading the the code at a later date.</p>\n"},{"tags":[],"owner":{"account_id":149994,"reputation":1415,"user_id":362881,"display_name":"Vilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1322494258,"creation_date":1322494258,"answer_id":8298152,"question_id":8298018,"body_markdown":"As mentioned in the previous answers, the add method for Python sets does not return anything. By the way, this exact question was discussed on the Python mailing list: http://mail.python.org/pipermail/python-ideas/2009-February/002877.html.","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>As mentioned in the previous answers, the add method for Python sets does not return anything. By the way, this exact question was discussed on the Python mailing list: <a href=\"http://mail.python.org/pipermail/python-ideas/2009-February/002877.html\" rel=\"noreferrer\">http://mail.python.org/pipermail/python-ideas/2009-February/002877.html</a>.</p>\n"},{"tags":[],"owner":{"account_id":1373414,"reputation":71479,"user_id":1307905,"accept_rate":75,"display_name":"Anthon"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1432018180,"creation_date":1432017823,"answer_id":30318487,"question_id":8298018,"body_markdown":"For the built-in `set` type,  `add()` always gives back `None`, but there is nothing to prevent you from using a &quot;smarter&quot; subclass:\r\n\r\n    class sset(set):\r\n        &quot;&quot;&quot;return True if on add if an object was really added (and not in yet)&quot;&quot;&quot;\r\n        def add(self, val):\r\n            if val in self:\r\n                return True\r\n            set.add(self, val)\r\n            return False\r\nThis allows you to write:\r\n\r\n    s = sset()\r\n    if s.add(&#39;1&#39;):\r\n        print(&#39;try 1&#39;)\r\n    if s.add(&#39;1&#39;):\r\n        print(&#39;try 2&#39;)\r\nand get `try 2` printed when run.\r\n\r\nThis prevents repeated multiple lines of code like @brandizzi&#39;s which can easily contain inefficiencies:\r\n\r\n    z = set()\r\n    was_here = y not in z\r\n    z.add(y)\r\n    if was_here: # If the object was not in the list yet...\r\n        print something\r\nwhich is inefficient as y is added even if it is already in. It should be \r\nsomething like:\r\n\r\n    z = set()\r\n    was_here = y not in z\r\n    if not was_here:\r\n        z.add(y)\r\n    else: # If the object was not in the list yet...\r\n        print something\r\n\r\nWith `sset()` this can be reduced to:\r\n\r\n    z = sset()\r\n    if z.add(y): # If the object was not in the list yet...\r\n        print something\r\n","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>For the built-in <code>set</code> type,  <code>add()</code> always gives back <code>None</code>, but there is nothing to prevent you from using a \"smarter\" subclass:</p>\n\n<pre><code>class sset(set):\n    \"\"\"return True if on add if an object was really added (and not in yet)\"\"\"\n    def add(self, val):\n        if val in self:\n            return True\n        set.add(self, val)\n        return False\n</code></pre>\n\n<p>This allows you to write:</p>\n\n<pre><code>s = sset()\nif s.add('1'):\n    print('try 1')\nif s.add('1'):\n    print('try 2')\n</code></pre>\n\n<p>and get <code>try 2</code> printed when run.</p>\n\n<p>This prevents repeated multiple lines of code like @brandizzi's which can easily contain inefficiencies:</p>\n\n<pre><code>z = set()\nwas_here = y not in z\nz.add(y)\nif was_here: # If the object was not in the list yet...\n    print something\n</code></pre>\n\n<p>which is inefficient as y is added even if it is already in. It should be \nsomething like:</p>\n\n<pre><code>z = set()\nwas_here = y not in z\nif not was_here:\n    z.add(y)\nelse: # If the object was not in the list yet...\n    print something\n</code></pre>\n\n<p>With <code>sset()</code> this can be reduced to:</p>\n\n<pre><code>z = sset()\nif z.add(y): # If the object was not in the list yet...\n    print something\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26253711,"reputation":33,"user_id":19999437,"display_name":"correabuscar"},"score":0,"creation_date":1666507737,"post_id":73727392,"comment_id":130950593,"body_markdown":"In retrospect, `t.time()` is bad because it&#39;s not monotonic, so it can go backwards! I should&#39;ve used probably [`t.monotonic_ns()`](https://docs.python.org/3/library/time.html#time.monotonic_ns)","body":"In retrospect, <code>t.time()</code> is bad because it&#39;s not monotonic, so it can go backwards! I should&#39;ve used probably <a href=\"https://docs.python.org/3/library/time.html#time.monotonic_ns\" rel=\"nofollow noreferrer\"><code>t.monotonic_ns()</code></a>"}],"tags":[],"owner":{"account_id":26253711,"reputation":33,"user_id":19999437,"display_name":"correabuscar"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1663228173,"creation_date":1663228173,"answer_id":73727392,"question_id":8298018,"body_markdown":"Apparently, [`set().add(elem)`](https://docs.python.org/3/library/stdtypes.html#frozenset.add) always returns [`None`](https://docs.python.org/3/library/constants.html#None) and it has [`NoneType`](https://docs.python.org/2/library/types.html#types.NoneType) type, as per this:\r\n```lang-python\r\n$ python\r\nPython 3.10.7 (main, Sep  7 2022, 01:54:01) [GCC 12.2.0] on linux\r\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.\r\n&gt;&gt;&gt; type(set().add(12345))\r\n&lt;class &#39;NoneType&#39;&gt;\r\n```\r\n\r\nIf you&#39;re wanting to avoid the double lookup, you might use `len()` to detect whether or not the element was added by checking the length of the set before and after the addition:\r\n```lang-python\r\na_set = set()\r\n#...\r\nsomething=12345\r\npre_len = len(a_set)\r\na_set.add(something) #always returns None\r\nif pre_len != len(a_set):\r\n    print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\r\nelse:\r\n    print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\r\n```\r\n\r\nI found this info about `len()`:\r\n\r\n&gt; How does len() work?\r\n&gt; len() works in O(1) time as the set is an object and has a member to store its size. Below is description of len() from Python docs.\r\n&gt; \r\n&gt;   Return the length (the number of items) of an object. The argument may be a sequence (such as a string, bytes, tuple, list, or range) or a collection (such as a dictionary, set, or frozen set).\r\n\r\nsource: https://www.geeksforgeeks.org/find-the-length-of-a-set-in-python/\r\n\r\n I was expecting the length to be cached somehow and the above seems to confirm it.  \r\n\r\n Furthermore (thanks to the info and confirmation provided by the people on the [#python channel on liberachat IRC](https://web.libera.chat/#python)) I&#39;ve also confirmed it myself by looking at the source code, so now I know for sure that [len()](https://github.com/python/cpython/blob/a834e2d8e1230c17193c19b425e83e0bf736179e/Objects/setobject.c#L551-L555) returns [cached](https://github.com/python/cpython/blob/a834e2d8e1230c17193c19b425e83e0bf736179e/Include/cpython/setobject.h#L40) result.  \r\n\r\n There&#39;s also [this page](https://wiki.python.org/moin/TimeComplexity) on the python wiki that confirms it: that the `Operation` `Get Length`(for a `list`, but affects all collections) is `O(1)` time complexity(even in worst case) and that the `Operation` `x in s` is between `O(1)` and `O(n)`(Worst Case) where `&#39;n&#39; is the number of elements currently in the container.`  \r\n\r\nBelow I tried to see the timing difference, but I don&#39;t know if I&#39;m doing it right, and maybe I&#39;m missing something but the `len()` variant seems a bit slower(it either takes 9.4% or 51.7% more time than the `x in set` variant). \r\nHere it is anyway:\r\n```\r\nwhat =========== time it took in seconds (underscores for readability/matching)\r\n-----\r\ninit_set() highest time==========================5.374_412_298_202_514_648_438_\r\ninit_set() average time==========================5.374_412_298_202_514_648_438_\r\ninit_set() lowest time===========================5.374_412_298_202_514_648_438_\r\nre_set() highest time============================1.283_961_534_500_122_070_312_\r\nre_set() average time============================1.233_813_919_126_987_457_275_\r\nre_set() lowest time=============================1.027_379_512_786_865_234_375_\r\nuse_len_and_always_add() highest time============0.000_089_168_548_583_984_375_\r\nuse_len_and_always_add() average time============0.000_002_022_699_288_719_765_*\r\nuse_len_and_always_add() lowest time=============0.000_001_668_930_053_710_938_\r\ndouble_lookup_never_add() highest time===========0.000_107_288_360_595_703_125_\r\ndouble_lookup_never_add() average time===========0.000_001_333_327_164_114_879_*\r\ndouble_lookup_never_add() lowest time============0.000_000_953_674_316_406_250_\r\ndouble_lookup_always_add() highest time==========0.000_087_261_199_951_171_875_\r\ndouble_lookup_always_add() average time==========0.000_001_681_037_948_399_603_*\r\ndouble_lookup_always_add() lowest time===========0.000_001_192_092_895_507_812_\r\ndouble_lookup_never_add2() highest time==========0.000_120_401_382_446_289_062_\r\ndouble_lookup_never_add2() average time==========0.000_001_423_196_238_256_303_*\r\ndouble_lookup_never_add2() lowest time===========0.000_001_192_092_895_507_812_\r\nusing_len_many() highest time===================10.652_944_326_400_756_835_938_\r\nusing_len_many() average time===================10.642_948_746_681_213_378_906_\r\nusing_len_many() lowest time====================10.632_953_166_961_669_921_875_\r\ndouble_lookup_always_add_many() highest time====10.278_126_478_195_190_429_688_\r\ndouble_lookup_always_add_many() average time====10.234_028_577_804_565_429_688_\r\ndouble_lookup_always_add_many() lowest time=====10.189_930_677_413_940_429_688_\r\ndouble_lookup_always_add_many2() highest time===10.584_211_587_905_883_789_062_\r\ndouble_lookup_always_add_many2() average time===10.565_821_886_062_622_070_312_\r\ndouble_lookup_always_add_many2() lowest time====10.547_432_184_219_360_351_562_\r\ndouble_lookup_many() highest time================9.843_203_306_198_120_117_188_\r\ndouble_lookup_many() average time================9.723_606_467_247_009_277_344_\r\ndouble_lookup_many() lowest time=================9.604_009_628_295_898_437_500_\r\n```\r\nThe above is sorted manually(and the CPU was set to 800Mhz via `sudo cpupower frequency-set --related --governor powersave --min 800MHz --max 800MHz`) but the output is from this code:\r\n```lang-python\r\n#!/usr/bin/python3\r\n\r\n\r\n\r\nimport time as t\r\nWORST=&quot;() highest time&quot;\r\nAVG=&quot;() average time&quot;\r\nBEST=&quot;() lowest time&quot;\r\n\r\nstats: dict[str,float]=dict({})\r\n\r\ndef TimeTakenDecorator(func):\r\n    #src: https://stackoverflow.com/a/70954147/19999437\r\n    def wraper(*args,**kwargs):\r\n        global stats\r\n        tmp_avg=stats.get(func.__name__+AVG)\r\n        #too_fast:bool\r\n        if (None == tmp_avg) or (tmp_avg &gt; 0.5):\r\n            print(f&#39;Calling &quot;{func.__name__}()&quot;&#39;) #,end=&quot;&quot;)\r\n            #too_fast=False\r\n        #else:\r\n            #too_fast=True\r\n        start = t.time()\r\n        func(*args,**kwargs)\r\n        end = t.time()\r\n        diff=end - start\r\n        if None == stats.get(func.__name__+WORST):\r\n            stats[func.__name__+WORST]=diff\r\n        if None == tmp_avg:\r\n            stats[func.__name__+AVG]=diff\r\n            tmp_avg=diff\r\n        if None == stats.get(func.__name__+BEST):\r\n            stats[func.__name__+BEST]=diff\r\n        if diff &gt; stats[func.__name__+WORST]:\r\n            stats[func.__name__+WORST]=diff\r\n        if diff &lt; stats[func.__name__+BEST]:\r\n            stats[func.__name__+BEST]=diff\r\n        stats[func.__name__+AVG]=(tmp_avg + diff) /2\r\n        if diff &gt; 0.5:\r\n            print(f&#39;Elapsed time for function call &quot;{func.__name__}&quot;: {diff:.20f}&#39;)\r\n            #print(&quot; &quot;+str(diff))\r\n        #if not too_fast:\r\n        #    print()\r\n    return wraper\r\n\r\nsomething=5_234_567\r\nREPEATS=1_000_000\r\n\r\n#init_set() highest time==========================5.374_412_298_202_514_648_438_\r\n#init_set() average time==========================5.374_412_298_202_514_648_438_\r\n#init_set() lowest time===========================5.374_412_298_202_514_648_438_\r\n@TimeTakenDecorator\r\ndef init_set():\r\n    #print(&quot;Initializing the set:&quot;)\r\n    global g1_set\r\n    g1_set = set()\r\n    for i in range(10_000_000):\r\n        g1_set.add(i)\r\n\r\n#re_set() highest time============================1.283_961_534_500_122_070_312_\r\n#re_set() average time============================1.233_813_919_126_987_457_275_\r\n#re_set() lowest time=============================1.027_379_512_786_865_234_375_\r\n@TimeTakenDecorator\r\ndef re_set():\r\n    #print(&quot;Resetting the set:&quot;)\r\n    global g2_set\r\n    global g1_set\r\n    g2_set=g1_set.copy()\r\n\r\n#double_lookup_many() highest time================9.843_203_306_198_120_117_188_\r\n#double_lookup_many() average time================9.723_606_467_247_009_277_344_\r\n#double_lookup_many() lowest time=================9.604_009_628_295_898_437_500_\r\n@TimeTakenDecorator\r\ndef double_lookup_many():\r\n    #print(&quot;Using double lookup:&quot;)\r\n    for i in range(REPEATS):\r\n        double_lookup_never_add()\r\n\r\n#double_lookup_always_add_many() highest time====10.278_126_478_195_190_429_688_\r\n#double_lookup_always_add_many() average time====10.234_028_577_804_565_429_688_\r\n#double_lookup_always_add_many() lowest time=====10.189_930_677_413_940_429_688_\r\n@TimeTakenDecorator\r\ndef double_lookup_always_add_many():\r\n    #print(&quot;Using double lookup:&quot;)\r\n    for i in range(REPEATS):\r\n        double_lookup_always_add()\r\n\r\n#using_len_many() highest time===================10.652_944_326_400_756_835_938_\r\n#using_len_many() average time===================10.642_948_746_681_213_378_906_\r\n#using_len_many() lowest time====================10.632_953_166_961_669_921_875_\r\n@TimeTakenDecorator\r\ndef using_len_many():\r\n    #print(&quot;Using len():&quot;)\r\n    for i in range(REPEATS):\r\n        use_len_and_always_add()\r\n\r\n#double_lookup_never_add() highest time===========0.000_107_288_360_595_703_125_\r\n#double_lookup_never_add() average time===========0.000_001_333_327_164_114_879_\r\n#double_lookup_never_add() lowest time============0.000_000_953_674_316_406_250_\r\n@TimeTakenDecorator\r\ndef double_lookup_never_add():\r\n    global g2_set\r\n    if something not in g2_set:\r\n        g2_set.add(something)\r\n        #pass\r\n        #print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\r\n    #else:\r\n        #g2_set.add(something)\r\n        #pass\r\n        #print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\r\n\r\n#double_lookup_always_add() highest time==========0.000_087_261_199_951_171_875_\r\n#double_lookup_always_add() average time==========0.000_001_681_037_948_399_603_\r\n#double_lookup_always_add() lowest time===========0.000_001_192_092_895_507_812_\r\n@TimeTakenDecorator\r\ndef double_lookup_always_add():\r\n    global g2_set\r\n    if something not in g2_set:\r\n        g2_set.add(something)\r\n    else:\r\n        g2_set.add(something)\r\n\r\n#use_len_and_always_add() highest time============0.000_089_168_548_583_984_375_\r\n#use_len_and_always_add() average time============0.000_002_022_699_288_719_765_\r\n#use_len_and_always_add() lowest time=============0.000_001_668_930_053_710_938_\r\n@TimeTakenDecorator\r\ndef use_len_and_always_add():\r\n    global g2_set\r\n    pre_len = len(g2_set)\r\n    g2_set.add(something)\r\n    #pass\r\n    if pre_len != len(g2_set):\r\n        pass\r\n        #print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\r\n    #else:\r\n    #    pass\r\n        #print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\r\n\r\n#double_lookup_never_add2() highest time==========0.000_120_401_382_446_289_062_\r\n#double_lookup_never_add2() average time==========0.000_001_423_196_238_256_303_\r\n#double_lookup_never_add2() lowest time===========0.000_001_192_092_895_507_812_\r\n@TimeTakenDecorator\r\ndef double_lookup_never_add2():\r\n    global g2_set\r\n    if something not in g2_set:\r\n        g2_set.add(something)\r\n\r\n#double_lookup_always_add_many2() highest time===10.584_211_587_905_883_789_062_\r\n#double_lookup_always_add_many2() average time===10.565_821_886_062_622_070_312_\r\n#double_lookup_always_add_many2() lowest time====10.547_432_184_219_360_351_562_\r\n@TimeTakenDecorator\r\ndef double_lookup_always_add_many2():\r\n    global g2_set\r\n    for i in range(REPEATS):\r\n        g2_set.clear()\r\n        double_lookup_never_add2()\r\n\r\n\r\ndef main():\r\n    init_set()\r\n    re_set()\r\n    using_len_many()\r\n    re_set()\r\n    double_lookup_many()\r\n    re_set()\r\n    double_lookup_always_add_many()\r\n    re_set()\r\n    double_lookup_always_add_many2()\r\n    print(&quot;Once more in reverse order:&quot;)\r\n    re_set()\r\n    double_lookup_always_add_many2()\r\n    re_set()\r\n    double_lookup_always_add_many()\r\n    re_set()\r\n    double_lookup_many()\r\n    re_set()\r\n    using_len_many()\r\n    import json\r\n    #from json import encoder\r\n    #encoder.FLOAT_REPR = lambda o: f&#39;{o:.20f}&#39; #.format(o) #format(o, &#39;.20f&#39;)\r\n    #src: https://stackoverflow.com/a/69056325/19999437\r\n    class RoundingFloat(float):\r\n        __repr__ = staticmethod(lambda x: format(x, &#39;.30f&#39;))\r\n\r\n    json.encoder.c_make_encoder = None\r\n    #if hasattr(json.encoder, &#39;FLOAT_REPR&#39;):\r\n    #    # Python 2\r\n    #    json.encoder.FLOAT_REPR = RoundingFloat.__repr__\r\n    #else:\r\n        # Python 3\r\n    json.encoder.float = RoundingFloat\r\n    print(json.dumps(stats, sort_keys=False, indent=2)) #, parse_float=lambda x: f&quot;{x:.20f}&quot;))\r\n    import re\r\n    for k in stats:\r\n        time_form=re.sub(r&#39;([0-9_]+\\.)?([0-9]{3})&#39;, &#39;\\\\1\\\\2_&#39;, f&quot;{stats[k]:_.21f}&quot;)\r\n        #print(f&quot;{k:-&lt;45} {stats[k]:.20f}&quot;)\r\n        print(f&quot;{k:=&lt;45}={time_form:=&gt;33}&quot;)\r\n\r\n\r\nmain();\r\n```\r\n","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>Apparently, <a href=\"https://docs.python.org/3/library/stdtypes.html#frozenset.add\" rel=\"nofollow noreferrer\"><code>set().add(elem)</code></a> always returns <a href=\"https://docs.python.org/3/library/constants.html#None\" rel=\"nofollow noreferrer\"><code>None</code></a> and it has <a href=\"https://docs.python.org/2/library/types.html#types.NoneType\" rel=\"nofollow noreferrer\"><code>NoneType</code></a> type, as per this:</p>\n<pre class=\"lang-python prettyprint-override\"><code>$ python\nPython 3.10.7 (main, Sep  7 2022, 01:54:01) [GCC 12.2.0] on linux\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.\n&gt;&gt;&gt; type(set().add(12345))\n&lt;class 'NoneType'&gt;\n</code></pre>\n<p>If you're wanting to avoid the double lookup, you might use <code>len()</code> to detect whether or not the element was added by checking the length of the set before and after the addition:</p>\n<pre class=\"lang-python prettyprint-override\"><code>a_set = set()\n#...\nsomething=12345\npre_len = len(a_set)\na_set.add(something) #always returns None\nif pre_len != len(a_set):\n    print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\nelse:\n    print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\n</code></pre>\n<p>I found this info about <code>len()</code>:</p>\n<blockquote>\n<p>How does len() work?\nlen() works in O(1) time as the set is an object and has a member to store its size. Below is description of len() from Python docs.</p>\n<p>Return the length (the number of items) of an object. The argument may be a sequence (such as a string, bytes, tuple, list, or range) or a collection (such as a dictionary, set, or frozen set).</p>\n</blockquote>\n<p>source: <a href=\"https://www.geeksforgeeks.org/find-the-length-of-a-set-in-python/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/find-the-length-of-a-set-in-python/</a></p>\n<p>I was expecting the length to be cached somehow and the above seems to confirm it.</p>\n<p>Furthermore (thanks to the info and confirmation provided by the people on the <a href=\"https://web.libera.chat/#python\" rel=\"nofollow noreferrer\">#python channel on liberachat IRC</a>) I've also confirmed it myself by looking at the source code, so now I know for sure that <a href=\"https://github.com/python/cpython/blob/a834e2d8e1230c17193c19b425e83e0bf736179e/Objects/setobject.c#L551-L555\" rel=\"nofollow noreferrer\">len()</a> returns <a href=\"https://github.com/python/cpython/blob/a834e2d8e1230c17193c19b425e83e0bf736179e/Include/cpython/setobject.h#L40\" rel=\"nofollow noreferrer\">cached</a> result.</p>\n<p>There's also <a href=\"https://wiki.python.org/moin/TimeComplexity\" rel=\"nofollow noreferrer\">this page</a> on the python wiki that confirms it: that the <code>Operation</code> <code>Get Length</code>(for a <code>list</code>, but affects all collections) is <code>O(1)</code> time complexity(even in worst case) and that the <code>Operation</code> <code>x in s</code> is between <code>O(1)</code> and <code>O(n)</code>(Worst Case) where <code>'n' is the number of elements currently in the container.</code></p>\n<p>Below I tried to see the timing difference, but I don't know if I'm doing it right, and maybe I'm missing something but the <code>len()</code> variant seems a bit slower(it either takes 9.4% or 51.7% more time than the <code>x in set</code> variant).\nHere it is anyway:</p>\n<pre><code>what =========== time it took in seconds (underscores for readability/matching)\n-----\ninit_set() highest time==========================5.374_412_298_202_514_648_438_\ninit_set() average time==========================5.374_412_298_202_514_648_438_\ninit_set() lowest time===========================5.374_412_298_202_514_648_438_\nre_set() highest time============================1.283_961_534_500_122_070_312_\nre_set() average time============================1.233_813_919_126_987_457_275_\nre_set() lowest time=============================1.027_379_512_786_865_234_375_\nuse_len_and_always_add() highest time============0.000_089_168_548_583_984_375_\nuse_len_and_always_add() average time============0.000_002_022_699_288_719_765_*\nuse_len_and_always_add() lowest time=============0.000_001_668_930_053_710_938_\ndouble_lookup_never_add() highest time===========0.000_107_288_360_595_703_125_\ndouble_lookup_never_add() average time===========0.000_001_333_327_164_114_879_*\ndouble_lookup_never_add() lowest time============0.000_000_953_674_316_406_250_\ndouble_lookup_always_add() highest time==========0.000_087_261_199_951_171_875_\ndouble_lookup_always_add() average time==========0.000_001_681_037_948_399_603_*\ndouble_lookup_always_add() lowest time===========0.000_001_192_092_895_507_812_\ndouble_lookup_never_add2() highest time==========0.000_120_401_382_446_289_062_\ndouble_lookup_never_add2() average time==========0.000_001_423_196_238_256_303_*\ndouble_lookup_never_add2() lowest time===========0.000_001_192_092_895_507_812_\nusing_len_many() highest time===================10.652_944_326_400_756_835_938_\nusing_len_many() average time===================10.642_948_746_681_213_378_906_\nusing_len_many() lowest time====================10.632_953_166_961_669_921_875_\ndouble_lookup_always_add_many() highest time====10.278_126_478_195_190_429_688_\ndouble_lookup_always_add_many() average time====10.234_028_577_804_565_429_688_\ndouble_lookup_always_add_many() lowest time=====10.189_930_677_413_940_429_688_\ndouble_lookup_always_add_many2() highest time===10.584_211_587_905_883_789_062_\ndouble_lookup_always_add_many2() average time===10.565_821_886_062_622_070_312_\ndouble_lookup_always_add_many2() lowest time====10.547_432_184_219_360_351_562_\ndouble_lookup_many() highest time================9.843_203_306_198_120_117_188_\ndouble_lookup_many() average time================9.723_606_467_247_009_277_344_\ndouble_lookup_many() lowest time=================9.604_009_628_295_898_437_500_\n</code></pre>\n<p>The above is sorted manually(and the CPU was set to 800Mhz via <code>sudo cpupower frequency-set --related --governor powersave --min 800MHz --max 800MHz</code>) but the output is from this code:</p>\n<pre class=\"lang-python prettyprint-override\"><code>#!/usr/bin/python3\n\n\n\nimport time as t\nWORST=&quot;() highest time&quot;\nAVG=&quot;() average time&quot;\nBEST=&quot;() lowest time&quot;\n\nstats: dict[str,float]=dict({})\n\ndef TimeTakenDecorator(func):\n    #src: https://stackoverflow.com/a/70954147/19999437\n    def wraper(*args,**kwargs):\n        global stats\n        tmp_avg=stats.get(func.__name__+AVG)\n        #too_fast:bool\n        if (None == tmp_avg) or (tmp_avg &gt; 0.5):\n            print(f'Calling &quot;{func.__name__}()&quot;') #,end=&quot;&quot;)\n            #too_fast=False\n        #else:\n            #too_fast=True\n        start = t.time()\n        func(*args,**kwargs)\n        end = t.time()\n        diff=end - start\n        if None == stats.get(func.__name__+WORST):\n            stats[func.__name__+WORST]=diff\n        if None == tmp_avg:\n            stats[func.__name__+AVG]=diff\n            tmp_avg=diff\n        if None == stats.get(func.__name__+BEST):\n            stats[func.__name__+BEST]=diff\n        if diff &gt; stats[func.__name__+WORST]:\n            stats[func.__name__+WORST]=diff\n        if diff &lt; stats[func.__name__+BEST]:\n            stats[func.__name__+BEST]=diff\n        stats[func.__name__+AVG]=(tmp_avg + diff) /2\n        if diff &gt; 0.5:\n            print(f'Elapsed time for function call &quot;{func.__name__}&quot;: {diff:.20f}')\n            #print(&quot; &quot;+str(diff))\n        #if not too_fast:\n        #    print()\n    return wraper\n\nsomething=5_234_567\nREPEATS=1_000_000\n\n#init_set() highest time==========================5.374_412_298_202_514_648_438_\n#init_set() average time==========================5.374_412_298_202_514_648_438_\n#init_set() lowest time===========================5.374_412_298_202_514_648_438_\n@TimeTakenDecorator\ndef init_set():\n    #print(&quot;Initializing the set:&quot;)\n    global g1_set\n    g1_set = set()\n    for i in range(10_000_000):\n        g1_set.add(i)\n\n#re_set() highest time============================1.283_961_534_500_122_070_312_\n#re_set() average time============================1.233_813_919_126_987_457_275_\n#re_set() lowest time=============================1.027_379_512_786_865_234_375_\n@TimeTakenDecorator\ndef re_set():\n    #print(&quot;Resetting the set:&quot;)\n    global g2_set\n    global g1_set\n    g2_set=g1_set.copy()\n\n#double_lookup_many() highest time================9.843_203_306_198_120_117_188_\n#double_lookup_many() average time================9.723_606_467_247_009_277_344_\n#double_lookup_many() lowest time=================9.604_009_628_295_898_437_500_\n@TimeTakenDecorator\ndef double_lookup_many():\n    #print(&quot;Using double lookup:&quot;)\n    for i in range(REPEATS):\n        double_lookup_never_add()\n\n#double_lookup_always_add_many() highest time====10.278_126_478_195_190_429_688_\n#double_lookup_always_add_many() average time====10.234_028_577_804_565_429_688_\n#double_lookup_always_add_many() lowest time=====10.189_930_677_413_940_429_688_\n@TimeTakenDecorator\ndef double_lookup_always_add_many():\n    #print(&quot;Using double lookup:&quot;)\n    for i in range(REPEATS):\n        double_lookup_always_add()\n\n#using_len_many() highest time===================10.652_944_326_400_756_835_938_\n#using_len_many() average time===================10.642_948_746_681_213_378_906_\n#using_len_many() lowest time====================10.632_953_166_961_669_921_875_\n@TimeTakenDecorator\ndef using_len_many():\n    #print(&quot;Using len():&quot;)\n    for i in range(REPEATS):\n        use_len_and_always_add()\n\n#double_lookup_never_add() highest time===========0.000_107_288_360_595_703_125_\n#double_lookup_never_add() average time===========0.000_001_333_327_164_114_879_\n#double_lookup_never_add() lowest time============0.000_000_953_674_316_406_250_\n@TimeTakenDecorator\ndef double_lookup_never_add():\n    global g2_set\n    if something not in g2_set:\n        g2_set.add(something)\n        #pass\n        #print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\n    #else:\n        #g2_set.add(something)\n        #pass\n        #print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\n\n#double_lookup_always_add() highest time==========0.000_087_261_199_951_171_875_\n#double_lookup_always_add() average time==========0.000_001_681_037_948_399_603_\n#double_lookup_always_add() lowest time===========0.000_001_192_092_895_507_812_\n@TimeTakenDecorator\ndef double_lookup_always_add():\n    global g2_set\n    if something not in g2_set:\n        g2_set.add(something)\n    else:\n        g2_set.add(something)\n\n#use_len_and_always_add() highest time============0.000_089_168_548_583_984_375_\n#use_len_and_always_add() average time============0.000_002_022_699_288_719_765_\n#use_len_and_always_add() lowest time=============0.000_001_668_930_053_710_938_\n@TimeTakenDecorator\ndef use_len_and_always_add():\n    global g2_set\n    pre_len = len(g2_set)\n    g2_set.add(something)\n    #pass\n    if pre_len != len(g2_set):\n        pass\n        #print(f&quot;The element({something}) was added therefore it was not already in the set.&quot;)\n    #else:\n    #    pass\n        #print(f&quot;The element({something}) was not added because it was already in the set.&quot;)\n\n#double_lookup_never_add2() highest time==========0.000_120_401_382_446_289_062_\n#double_lookup_never_add2() average time==========0.000_001_423_196_238_256_303_\n#double_lookup_never_add2() lowest time===========0.000_001_192_092_895_507_812_\n@TimeTakenDecorator\ndef double_lookup_never_add2():\n    global g2_set\n    if something not in g2_set:\n        g2_set.add(something)\n\n#double_lookup_always_add_many2() highest time===10.584_211_587_905_883_789_062_\n#double_lookup_always_add_many2() average time===10.565_821_886_062_622_070_312_\n#double_lookup_always_add_many2() lowest time====10.547_432_184_219_360_351_562_\n@TimeTakenDecorator\ndef double_lookup_always_add_many2():\n    global g2_set\n    for i in range(REPEATS):\n        g2_set.clear()\n        double_lookup_never_add2()\n\n\ndef main():\n    init_set()\n    re_set()\n    using_len_many()\n    re_set()\n    double_lookup_many()\n    re_set()\n    double_lookup_always_add_many()\n    re_set()\n    double_lookup_always_add_many2()\n    print(&quot;Once more in reverse order:&quot;)\n    re_set()\n    double_lookup_always_add_many2()\n    re_set()\n    double_lookup_always_add_many()\n    re_set()\n    double_lookup_many()\n    re_set()\n    using_len_many()\n    import json\n    #from json import encoder\n    #encoder.FLOAT_REPR = lambda o: f'{o:.20f}' #.format(o) #format(o, '.20f')\n    #src: https://stackoverflow.com/a/69056325/19999437\n    class RoundingFloat(float):\n        __repr__ = staticmethod(lambda x: format(x, '.30f'))\n\n    json.encoder.c_make_encoder = None\n    #if hasattr(json.encoder, 'FLOAT_REPR'):\n    #    # Python 2\n    #    json.encoder.FLOAT_REPR = RoundingFloat.__repr__\n    #else:\n        # Python 3\n    json.encoder.float = RoundingFloat\n    print(json.dumps(stats, sort_keys=False, indent=2)) #, parse_float=lambda x: f&quot;{x:.20f}&quot;))\n    import re\n    for k in stats:\n        time_form=re.sub(r'([0-9_]+\\.)?([0-9]{3})', '\\\\1\\\\2_', f&quot;{stats[k]:_.21f}&quot;)\n        #print(f&quot;{k:-&lt;45} {stats[k]:.20f}&quot;)\n        print(f&quot;{k:=&lt;45}={time_form:=&gt;33}&quot;)\n\n\nmain();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":0,"creation_date":1697312316,"post_id":77005741,"comment_id":136265134,"body_markdown":"&quot;*Much faster than using &#39;if item in set*&#39;&quot;—Actually, it&#39;s slower, and already suggested in other answers.","body":"&quot;<i>Much faster than using &#39;if item in set</i>&#39;&quot;—Actually, it&#39;s slower, and already suggested in other answers."}],"tags":[],"owner":{"account_id":22871520,"reputation":9,"user_id":17014487,"display_name":"Bojan"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1693380019,"creation_date":1693380019,"answer_id":77005741,"question_id":8298018,"body_markdown":"You can count number of elements in set, before and after adding the element in set.  \r\nSince set does not allow duplicates, if the number of elements is the same, the item already exists in set.  \r\nMuch faster than using &#39;if item in set&#39;\r\n\r\n    set_game_rom_pairs = set()\r\n\r\n    def fn_check_if_exist_in_game_rom_pairs(st_pair):\r\n    \tset_len = len(set_game_rom_pairs)\r\n    \tset_game_rom_pairs.add(st_pair)\r\n    \tif len(set_game_rom_pairs) == set_len:\r\n    \t\tprint(&#39;Warning already exist in list of game rom pairs:&#39;, st_pair )\r\n\r\n    fn_check_if_exist_in_game_rom_pairs(st_xml_game_name+&#39;-&#39;+st_xml_game_rom_name)\r\n\r\n\r\nYou could also add &#39;return True&#39; if number of items is the same,   \r\nand &#39;return False&#39; if number of items is not the same:\r\n\r\n    def fn_check_if_exist_in_game_rom_pairs(st_pair):\r\n    \tset_len = len(set_game_rom_pairs)\r\n    \tset_game_rom_pairs.add(st_pair)\r\n    \tif len(set_game_rom_pairs) == set_len:\r\n    \t\tprint(&#39;Warning already exist in list of game rom pairs:&#39;, st_pair )\r\n    \t\treturn True\r\n    \telse:\r\n    \t\treturn False","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>You can count number of elements in set, before and after adding the element in set.<br />\nSince set does not allow duplicates, if the number of elements is the same, the item already exists in set.<br />\nMuch faster than using 'if item in set'</p>\n<pre><code>set_game_rom_pairs = set()\n\ndef fn_check_if_exist_in_game_rom_pairs(st_pair):\n    set_len = len(set_game_rom_pairs)\n    set_game_rom_pairs.add(st_pair)\n    if len(set_game_rom_pairs) == set_len:\n        print('Warning already exist in list of game rom pairs:', st_pair )\n\nfn_check_if_exist_in_game_rom_pairs(st_xml_game_name+'-'+st_xml_game_rom_name)\n</code></pre>\n<p>You could also add 'return True' if number of items is the same,<br />\nand 'return False' if number of items is not the same:</p>\n<pre><code>def fn_check_if_exist_in_game_rom_pairs(st_pair):\n    set_len = len(set_game_rom_pairs)\n    set_game_rom_pairs.add(st_pair)\n    if len(set_game_rom_pairs) == set_len:\n        print('Warning already exist in list of game rom pairs:', st_pair )\n        return True\n    else:\n        return False\n</code></pre>\n"}],"owner":{"account_id":420683,"reputation":10207,"user_id":798502,"accept_rate":86,"display_name":"seinecle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14011,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":8298064,"answer_count":7,"score":17,"last_activity_date":1697311748,"creation_date":1322493674,"question_id":8298018,"body_markdown":"In Java I like to use the boolean value returned by an &quot;add to the set&quot; operation to test whether the element was not already present in the set:\r\n```java\r\nif (set.add(&quot;x&quot;)) {\r\n    print &quot;x was not yet in the set&quot;;\r\n}\r\n```\r\n\r\nMy question is, is there something as convenient in Python? I tried:\r\n```py\r\n z = set()\r\n if (z.add(y)):\r\n     print something\r\n```\r\n\r\nBut it does not print anything. Am I missing something?\r\n","title":"&quot;add to set&quot; returns a boolean in java - what about python?","body":"<p>In Java I like to use the boolean value returned by an &quot;add to the set&quot; operation to test whether the element was not already present in the set:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (set.add(&quot;x&quot;)) {\n    print &quot;x was not yet in the set&quot;;\n}\n</code></pre>\n<p>My question is, is there something as convenient in Python? I tried:</p>\n<pre class=\"lang-py prettyprint-override\"><code> z = set()\n if (z.add(y)):\n     print something\n</code></pre>\n<p>But it does not print anything. Am I missing something?</p>\n"},{"tags":["java","spring"],"owner":{"account_id":12248992,"reputation":11,"user_id":8939923,"display_name":"Tim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697311149,"creation_date":1697028661,"question_id":77273232,"body_markdown":"How can I insert into this piece of code so that for the host http://localhost:5173, it was disabled?\r\n\r\n```\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n\r\n\r\n        http.cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeRequests().antMatchers(&quot;/app/**&quot;).permitAll()\r\n                .antMatchers(&quot;/app/test/**&quot;).permitAll()\r\n                .anyRequest().authenticated();\r\n\r\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n```\r\n\r\n\r\nI added this bean, but it didn&#39;t help:\r\n\r\n```\r\n@Bean\r\n    public WebMvcConfigurer corsConfigurer() {\r\n        return new WebMvcConfigurer() {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry.addMapping(&quot;/app/**&quot;).allowedOrigins(&quot;http://localhost:5173&quot;);\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to disable CORS for a host in Spring security","body":"<p>How can I insert into this piece of code so that for the host http://localhost:5173, it was disabled?</p>\n<pre><code>protected void configure(HttpSecurity http) throws Exception {\n\n\n        http.cors().and().csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests().antMatchers(&quot;/app/**&quot;).permitAll()\n                .antMatchers(&quot;/app/test/**&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n</code></pre>\n<p>I added this bean, but it didn't help:</p>\n<pre><code>@Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/app/**&quot;).allowedOrigins(&quot;http://localhost:5173&quot;);\n            }\n        };\n    }\n</code></pre>\n"},{"tags":["java","servlets","azure-functions","vert.x","quarkus"],"answers":[{"tags":[],"owner":{"account_id":5699126,"reputation":1030,"user_id":4504727,"display_name":"IPP Nerd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697310812,"creation_date":1697310812,"answer_id":77294153,"question_id":64095502,"body_markdown":"This should only work if you start the runtime infrastructure required for your servlet - e.g. with [quarkus-undertow][1]. [Quarkus (and the guide) are based][2] on [vert.x][3] which does not support the [jakarta servlet API][4].\r\n\r\nThe [extension azure-functions-http][5] implements the required [adapter][6] to connect the [azure-runtime-api][7] to the [vert.x api][3].\r\n\r\n[The guide][5] does not provide a solution to use the [servlet API][4] for azure functions. It provides a solution to deploy a service using the [jakarta rs ws API][8] to azure functions!\r\n\r\n\r\n  [1]: https://quarkus.io/extensions/io.quarkus/quarkus-undertow\r\n  [2]: https://quarkus.io/guides/http-reference\r\n  [3]: https://vertx.io/docs/vertx-web/java/#_re_cap_on_vert_x_core_http_servers\r\n  [4]: https://jakarta.ee/specifications/servlet/\r\n  [5]: https://quarkus.io/guides/azure-functions-http\r\n  [6]: https://github.com/quarkusio/quarkus/blob/main/extensions/azure-functions-http/runtime/src/main/java/io/quarkus/azure/functions/resteasy/runtime/BaseFunction.java\r\n  [7]: https://github.com/quarkusio/quarkus/blob/main/extensions/azure-functions-http/runtime/src/main/java/io/quarkus/azure/functions/resteasy/runtime/Function.java\r\n  [8]: https://jakarta.ee/specifications/restful-ws/","title":"Azure function (with Quarkus) getting RpcHttpRequestDataSource error on POST only while deployed","body":"<p>This should only work if you start the runtime infrastructure required for your servlet - e.g. with <a href=\"https://quarkus.io/extensions/io.quarkus/quarkus-undertow\" rel=\"nofollow noreferrer\">quarkus-undertow</a>. <a href=\"https://quarkus.io/guides/http-reference\" rel=\"nofollow noreferrer\">Quarkus (and the guide) are based</a> on <a href=\"https://vertx.io/docs/vertx-web/java/#_re_cap_on_vert_x_core_http_servers\" rel=\"nofollow noreferrer\">vert.x</a> which does not support the <a href=\"https://jakarta.ee/specifications/servlet/\" rel=\"nofollow noreferrer\">jakarta servlet API</a>.</p>\n<p>The <a href=\"https://quarkus.io/guides/azure-functions-http\" rel=\"nofollow noreferrer\">extension azure-functions-http</a> implements the required <a href=\"https://github.com/quarkusio/quarkus/blob/main/extensions/azure-functions-http/runtime/src/main/java/io/quarkus/azure/functions/resteasy/runtime/BaseFunction.java\" rel=\"nofollow noreferrer\">adapter</a> to connect the <a href=\"https://github.com/quarkusio/quarkus/blob/main/extensions/azure-functions-http/runtime/src/main/java/io/quarkus/azure/functions/resteasy/runtime/Function.java\" rel=\"nofollow noreferrer\">azure-runtime-api</a> to the <a href=\"https://vertx.io/docs/vertx-web/java/#_re_cap_on_vert_x_core_http_servers\" rel=\"nofollow noreferrer\">vert.x api</a>.</p>\n<p><a href=\"https://quarkus.io/guides/azure-functions-http\" rel=\"nofollow noreferrer\">The guide</a> does not provide a solution to use the <a href=\"https://jakarta.ee/specifications/servlet/\" rel=\"nofollow noreferrer\">servlet API</a> for azure functions. It provides a solution to deploy a service using the <a href=\"https://jakarta.ee/specifications/restful-ws/\" rel=\"nofollow noreferrer\">jakarta rs ws API</a> to azure functions!</p>\n"}],"owner":{"account_id":4239859,"reputation":21,"user_id":3470059,"display_name":"oran0007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697310812,"creation_date":1601263044,"question_id":64095502,"body_markdown":"I followed [the Quarkus Azure Functions guide][1] to create a new project. I added a POST to the vert.x greeting class and to the servlet class. Both return a 500 with no body, and when viewed from the Application Insights page, contain similar errors related to converting RpcHttpRequestDataSource to byte[]. But locally, both work fine.\r\n\r\nHere&#39;s the servlet POST which works when running locally via ```mvn quarkus:dev```:\r\n```\r\nimport java.io.IOException;\r\nimport java.util.stream.Collectors;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\n@WebServlet(name = &quot;ServletGreeting&quot;, urlPatterns = &quot;/servlet/hello&quot;)\r\npublic class GreetingServlet extends HttpServlet {\r\n    @Override\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        resp.setStatus(200);\r\n        resp.addHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);\r\n        resp.getWriter().write(&quot;hello servlet&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {\r\n        resp.setStatus(200);\r\n        resp.addHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);;\r\n        resp.getWriter().write(&quot;hello &quot; + req.getReader().lines().collect(Collectors.joining(System.lineSeparator())));\r\n    }\r\n}\r\n```\r\n\r\n```\r\n    Exception while executing function: Functions.quarkus Result: Failure\r\n    Exception: ClassCastException: Cannot convert com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource@7e569681to type com.microsoft.azure.functions.HttpRequestMessage&lt;java.util.Optional&lt;byte[]&gt;&gt;\r\n    Stack: java.lang.ClassCastException: Cannot convert com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource@7e569681to type com.microsoft.azure.functions.HttpRequestMessage&lt;java.util.Optional&lt;byte[]&gt;&gt;\r\n    \tat com.microsoft.azure.functions.worker.binding.DataOperations.generalAssignment(DataOperations.java:191)\r\n    \tat com.microsoft.azure.functions.worker.binding.DataOperations.apply(DataOperations.java:120)\r\n    \tat com.microsoft.azure.functions.worker.binding.DataSource.computeByType(DataSource.java:56)\r\n    \tat com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource.computeByType(RpcHttpRequestDataSource.java:20)\r\n    \tat com.microsoft.azure.functions.worker.binding.DataSource.computeByName(DataSource.java:42)\r\n    \tat com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource.computeByName(RpcHttpRequestDataSource.java:20)\r\n    \tat com.microsoft.azure.functions.worker.binding.BindingDataStore.getDataByName(BindingDataStore.java:55)\r\n    \tat com.microsoft.azure.functions.worker.broker.ParameterResolver.resolve(ParameterResolver.java:59)\r\n    \tat com.microsoft.azure.functions.worker.broker.ParameterResolver.resolve(ParameterResolver.java:42)\r\n    \tat com.microsoft.azure.functions.worker.broker.JavaMethodExecutorImpl.execute(JavaMethodExecutorImpl.java:52)\r\n    \tat com.microsoft.azure.functions.worker.broker.JavaFunctionBroker.invokeMethod(JavaFunctionBroker.java:57)\r\n    \tat com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:33)\r\n    \tat com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:10)\r\n    \tat com.microsoft.azure.functions.worker.handler.MessageHandler.handle(MessageHandler.java:45)\r\n    \tat com.microsoft.azure.functions.worker.JavaWorkerClient$StreamingMessagePeer.lambda$onNext$0(JavaWorkerClient.java:92)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n\r\n\r\nIs this a Quarkus issue, or something else?\r\n\r\n  [1]: https://quarkus.io/guides/azure-functions-http#creating-the-maven-deployment-project","title":"Azure function (with Quarkus) getting RpcHttpRequestDataSource error on POST only while deployed","body":"<p>I followed <a href=\"https://quarkus.io/guides/azure-functions-http#creating-the-maven-deployment-project\" rel=\"nofollow noreferrer\">the Quarkus Azure Functions guide</a> to create a new project. I added a POST to the vert.x greeting class and to the servlet class. Both return a 500 with no body, and when viewed from the Application Insights page, contain similar errors related to converting RpcHttpRequestDataSource to byte[]. But locally, both work fine.</p>\n<p>Here's the servlet POST which works when running locally via <code>mvn quarkus:dev</code>:</p>\n<pre><code>import java.io.IOException;\nimport java.util.stream.Collectors;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(name = &quot;ServletGreeting&quot;, urlPatterns = &quot;/servlet/hello&quot;)\npublic class GreetingServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        resp.setStatus(200);\n        resp.addHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);\n        resp.getWriter().write(&quot;hello servlet&quot;);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {\n        resp.setStatus(200);\n        resp.addHeader(&quot;Content-Type&quot;, &quot;text/plain&quot;);;\n        resp.getWriter().write(&quot;hello &quot; + req.getReader().lines().collect(Collectors.joining(System.lineSeparator())));\n    }\n}\n</code></pre>\n<pre><code>    Exception while executing function: Functions.quarkus Result: Failure\n    Exception: ClassCastException: Cannot convert com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource@7e569681to type com.microsoft.azure.functions.HttpRequestMessage&lt;java.util.Optional&lt;byte[]&gt;&gt;\n    Stack: java.lang.ClassCastException: Cannot convert com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource@7e569681to type com.microsoft.azure.functions.HttpRequestMessage&lt;java.util.Optional&lt;byte[]&gt;&gt;\n        at com.microsoft.azure.functions.worker.binding.DataOperations.generalAssignment(DataOperations.java:191)\n        at com.microsoft.azure.functions.worker.binding.DataOperations.apply(DataOperations.java:120)\n        at com.microsoft.azure.functions.worker.binding.DataSource.computeByType(DataSource.java:56)\n        at com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource.computeByType(RpcHttpRequestDataSource.java:20)\n        at com.microsoft.azure.functions.worker.binding.DataSource.computeByName(DataSource.java:42)\n        at com.microsoft.azure.functions.worker.binding.RpcHttpRequestDataSource.computeByName(RpcHttpRequestDataSource.java:20)\n        at com.microsoft.azure.functions.worker.binding.BindingDataStore.getDataByName(BindingDataStore.java:55)\n        at com.microsoft.azure.functions.worker.broker.ParameterResolver.resolve(ParameterResolver.java:59)\n        at com.microsoft.azure.functions.worker.broker.ParameterResolver.resolve(ParameterResolver.java:42)\n        at com.microsoft.azure.functions.worker.broker.JavaMethodExecutorImpl.execute(JavaMethodExecutorImpl.java:52)\n        at com.microsoft.azure.functions.worker.broker.JavaFunctionBroker.invokeMethod(JavaFunctionBroker.java:57)\n        at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:33)\n        at com.microsoft.azure.functions.worker.handler.InvocationRequestHandler.execute(InvocationRequestHandler.java:10)\n        at com.microsoft.azure.functions.worker.handler.MessageHandler.handle(MessageHandler.java:45)\n        at com.microsoft.azure.functions.worker.JavaWorkerClient$StreamingMessagePeer.lambda$onNext$0(JavaWorkerClient.java:92)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Is this a Quarkus issue, or something else?</p>\n"},{"tags":["java","tomcat","firebase-realtime-database","firebase-admin"],"owner":{"account_id":29671876,"reputation":11,"user_id":22740915,"display_name":"Andrea Murru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697310350,"creation_date":1697309988,"question_id":77294123,"body_markdown":"Is anyone successfully using the java firebase admin sdk with apache tomcat?\r\nI&#39;m experiencing big problems, probably related to the internal messaging system (io.netty) used by the firebase sdk: after initializing Firebase (FirebaseApp.initializeApp() which &quot;apparently&quot; ends correctly), every firebase API call gets stuck.\r\nIf I start a console application with the same Java version on the same server with the same service_account_file, all works fine, therefore we can exclude authentication (or network) problems.\r\n\r\nI&#39;m using Java 11 (OpenJDK), Tomcat 9.0.80 and firebase-admin 9.2.0 on a linux server.\r\nI put the initialization code for firebase in my ServletContextListener.contextInitialized():\r\n\r\n```\r\norg.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init]&quot;);\r\nString serviceAccountKey = sce.getServletContext().getRealPath(&quot;/WEB-INF/firebase.json&quot;);\r\norg.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init] serviceAccountKey= &quot;+serviceAccountKey);\r\nFileInputStream serviceAccount = new FileInputStream(serviceAccountKey);            \r\nFirebaseOptions options = new FirebaseOptions.Builder()\r\n              .setCredentials(GoogleCredentials.fromStream(serviceAccount))\r\n              .setDatabaseUrl(&quot;https://mydatabase.firebaseio.com/&quot;)\r\n              .build();\r\nFirebaseApp.initializeApp(options);\r\norg.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init] FirebaseApp.initializeApp OK&quot;);\r\n```\r\n\r\nAfter initialization (called once when my webapp gets deployed), when I try to use whatever firebase API in my servlet (synchronous or asynchronous) it gets stuck (or timeout).\r\nHere an example of my code in a simple servlet ( in the processRequest method ):   \r\n```\r\nfinal FirebaseDatabase database = FirebaseDatabase.getInstance();\r\ndatabase.getReference().child(key).addListenerForSingleValueEvent(listener);\r\n```\r\n\r\nI think I&#39;m doing something wrong in initializing the library within the webapp lifecycle based on how Tomcat manages the loading of libraries (and static objects in particular) and sharing between different contexts.  \r\n  \r\nPlease note that:\r\n\r\n*) I also tested my code on a console application on the same server and it works fine: I&#39;m able to access my database and to read or set values, using both synchronous and asynchronous API\r\n*) I&#39;ve tried initializing firebase in a static block, in the servlet.init method or simply just before using the API (processRequest), but nothing changes.\r\n*) Comparing debug logs from firebase lib between the console app (working) and the tomcat webapp (not working) I noticed the messages relating to the initialization of the internal messaging system of the io.netty lib are completely missing. Here is the common (initial) part of the debug log I obtain in both cases:\r\n```\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.logging.InternalLoggerFactory - Using Log4J as the default logging framework\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - Java version: 11\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.storeFence: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.Buffer.address: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - direct buffer constructor: unavailable: Reflective setAccessible(true) di\r\nsabled\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable: class io.netty.util.internal.PlatformDependent0$7 cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module @6c382782\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.&lt;init&gt;(long, {int,long}): unavailable\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - sun.misc.Unsafe: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - maxDirectMemory: 7677673472 bytes (maybe)\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.tmpdir: /tmp (java.io.tmpdir)\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: -1 bytes\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.CleanerJava9 - java.nio.ByteBuffer.cleaner(): available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false\r\n```\r\nwhile I can read the following log only in the working case (console app):\r\n\r\n```\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 16\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.concurrent.GlobalEventExecutor - -Dio.netty.globalEventExecutor.quietPeriodSeconds: 1\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.nio.NioEventLoop - -Dio.netty.noKeySetOptimization: false\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.nio.NioEventLoop - -Dio.netty.selectorAutoRebuildThreshold: 512\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.OpenSsl - netty-tcnative not in the classpath; OpenSslEngine will be unavailable.\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.JdkSslContext - Default protocols (JDK): [TLSv1.3, TLSv1.2]\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.JdkSslContext - Default cipher suites (JDK): [TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_AES_128_GCM_SHA256, TLS_AES_256_GCM_SHA384]\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.DefaultChannelId - -Dio.netty.processId: 17423 (auto-detected)\r\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.NetUtil - -Djava.net.preferIPv4Stack: false\r\n.... \r\n```\r\n","title":"Problems using firebase java admin sdk with tomcat","body":"<p>Is anyone successfully using the java firebase admin sdk with apache tomcat?\nI'm experiencing big problems, probably related to the internal messaging system (io.netty) used by the firebase sdk: after initializing Firebase (FirebaseApp.initializeApp() which &quot;apparently&quot; ends correctly), every firebase API call gets stuck.\nIf I start a console application with the same Java version on the same server with the same service_account_file, all works fine, therefore we can exclude authentication (or network) problems.</p>\n<p>I'm using Java 11 (OpenJDK), Tomcat 9.0.80 and firebase-admin 9.2.0 on a linux server.\nI put the initialization code for firebase in my ServletContextListener.contextInitialized():</p>\n<pre><code>org.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init]&quot;);\nString serviceAccountKey = sce.getServletContext().getRealPath(&quot;/WEB-INF/firebase.json&quot;);\norg.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init] serviceAccountKey= &quot;+serviceAccountKey);\nFileInputStream serviceAccount = new FileInputStream(serviceAccountKey);            \nFirebaseOptions options = new FirebaseOptions.Builder()\n              .setCredentials(GoogleCredentials.fromStream(serviceAccount))\n              .setDatabaseUrl(&quot;https://mydatabase.firebaseio.com/&quot;)\n              .build();\nFirebaseApp.initializeApp(options);\norg.apache.log4j.Logger.getLogger(CaasaAdminServletListener.class).info(&quot;[init] FirebaseApp.initializeApp OK&quot;);\n</code></pre>\n<p>After initialization (called once when my webapp gets deployed), when I try to use whatever firebase API in my servlet (synchronous or asynchronous) it gets stuck (or timeout).\nHere an example of my code in a simple servlet ( in the processRequest method ):</p>\n<pre><code>final FirebaseDatabase database = FirebaseDatabase.getInstance();\ndatabase.getReference().child(key).addListenerForSingleValueEvent(listener);\n</code></pre>\n<p>I think I'm doing something wrong in initializing the library within the webapp lifecycle based on how Tomcat manages the loading of libraries (and static objects in particular) and sharing between different contexts.</p>\n<p>Please note that:</p>\n<p>*) I also tested my code on a console application on the same server and it works fine: I'm able to access my database and to read or set values, using both synchronous and asynchronous API\n*) I've tried initializing firebase in a static block, in the servlet.init method or simply just before using the API (processRequest), but nothing changes.\n*) Comparing debug logs from firebase lib between the console app (working) and the tomcat webapp (not working) I noticed the messages relating to the initialization of the internal messaging system of the io.netty lib are completely missing. Here is the common (initial) part of the debug log I obtain in both cases:</p>\n<pre><code>12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.logging.InternalLoggerFactory - Using Log4J as the default logging framework\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.initialSize: 1024\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.InternalThreadLocalMap - -Dio.netty.threadLocalMap.stringBuilder.maxSize: 4096\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - -Dio.netty.noUnsafe: false\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - Java version: 11\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.theUnsafe: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.copyMemory: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - sun.misc.Unsafe.storeFence: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.Buffer.address: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - direct buffer constructor: unavailable: Reflective setAccessible(true) di\nsabled\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.Bits.unaligned: available, true\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - jdk.internal.misc.Unsafe.allocateUninitializedArray(int): unavailable: class io.netty.util.internal.PlatformDependent0$7 cannot access class jdk.internal.misc.Unsafe (in module java.base) because module java.base does not export jdk.internal.misc to unnamed module @6c382782\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent0 - java.nio.DirectByteBuffer.&lt;init&gt;(long, {int,long}): unavailable\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - sun.misc.Unsafe: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - maxDirectMemory: 7677673472 bytes (maybe)\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.tmpdir: /tmp (java.io.tmpdir)\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.bitMode: 64 (sun.arch.data.model)\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.maxDirectMemory: -1 bytes\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.uninitializedArrayAllocationThreshold: -1\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.CleanerJava9 - java.nio.ByteBuffer.cleaner(): available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - -Dio.netty.noPreferDirect: false\n</code></pre>\n<p>while I can read the following log only in the working case (console app):</p>\n<pre><code>12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.MultithreadEventLoopGroup - -Dio.netty.eventLoopThreads: 16\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.concurrent.GlobalEventExecutor - -Dio.netty.globalEventExecutor.quietPeriodSeconds: 1\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.nio.NioEventLoop - -Dio.netty.noKeySetOptimization: false\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.nio.NioEventLoop - -Dio.netty.selectorAutoRebuildThreshold: 512\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.internal.PlatformDependent - org.jctools-core.MpscChunkedArrayQueue: available\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.OpenSsl - netty-tcnative not in the classpath; OpenSslEngine will be unavailable.\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.JdkSslContext - Default protocols (JDK): [TLSv1.3, TLSv1.2]\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.handler.ssl.JdkSslContext - Default cipher suites (JDK): [TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_AES_128_GCM_SHA256, TLS_AES_256_GCM_SHA384]\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.channel.DefaultChannelId - -Dio.netty.processId: 17423 (auto-detected)\n12 10 2023 10:27:41 DEBUG firebase-database-worker io.netty.util.NetUtil - -Djava.net.preferIPv4Stack: false\n.... \n</code></pre>\n"},{"tags":["java","maven","javafx","terminal"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1669832356,"post_id":74630535,"comment_id":131734922,"body_markdown":"As you have installed a JavaFX SDK, see [_Getting Started with JavaFX: Run HelloWorld using JavaFX SDK_](https://openjfx.io/openjfx-docs/#install-javafx), for [example](https://stackoverflow.com/a/71288497/230513).","body":"As you have installed a JavaFX SDK, see <a href=\"https://openjfx.io/openjfx-docs/#install-javafx\" rel=\"nofollow noreferrer\"><i>Getting Started with JavaFX: Run HelloWorld using JavaFX SDK</i></a>, for <a href=\"https://stackoverflow.com/a/71288497/230513\">example</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1669833432,"post_id":74630535,"comment_id":131735274,"body_markdown":"But you are using Maven, so, I&#39;d advise uninstalling the SDK and using maven to fetch the JavaFX modules as dependencies.  Such a configuration leads to a simpler, easier-to-maintain system.  There is information on that approach as well at the link trashgod provided.  Use a recent JavaFX version 19+, as some older versions don&#39;t include M2 support or the M2 support in them is buggy.  Ensure you aren&#39;t shading the jar (including JavaFX classes in the output jar).  Don&#39;t have a main class that invokes the JavaFX application, have the JavaFX application implements main.","body":"But you are using Maven, so, I&#39;d advise uninstalling the SDK and using maven to fetch the JavaFX modules as dependencies.  Such a configuration leads to a simpler, easier-to-maintain system.  There is information on that approach as well at the link trashgod provided.  Use a recent JavaFX version 19+, as some older versions don&#39;t include M2 support or the M2 support in them is buggy.  Ensure you aren&#39;t shading the jar (including JavaFX classes in the output jar).  Don&#39;t have a main class that invokes the JavaFX application, have the JavaFX application implements main."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1669833590,"post_id":74630535,"comment_id":131735334,"body_markdown":"If configured correctly, you will not receive this warning: *&quot;WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @56d120f3&#39;&quot;*","body":"If configured correctly, you will not receive this warning: <i>&quot;WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @56d120f3&#39;&quot;</i>"},{"owner":{"account_id":22571790,"reputation":140,"user_id":16757869,"display_name":"Plegeus"},"score":0,"creation_date":1670063647,"post_id":74630535,"comment_id":131788867,"body_markdown":"I have the same exact issue (same machine, same error), it did work just fine before I did a software update, maybe this information can give some insight?","body":"I have the same exact issue (same machine, same error), it did work just fine before I did a software update, maybe this information can give some insight?"},{"owner":{"account_id":27100657,"reputation":61,"user_id":20647276,"display_name":"cupias"},"score":0,"creation_date":1670750765,"post_id":74630535,"comment_id":131941777,"body_markdown":"@Plegeus really? Were you able to get it fixed? I&#39;ve just been running my maven projects through IntelliJ for now.","body":"@Plegeus really? Were you able to get it fixed? I&#39;ve just been running my maven projects through IntelliJ for now."},{"owner":{"account_id":27100657,"reputation":61,"user_id":20647276,"display_name":"cupias"},"score":0,"creation_date":1670750829,"post_id":74630535,"comment_id":131941792,"body_markdown":"@jewelsea, thanks for the tip. I might give this a shot.","body":"@jewelsea, thanks for the tip. I might give this a shot."},{"owner":{"account_id":118321,"reputation":143,"user_id":9737603,"display_name":"m0squito"},"score":0,"creation_date":1672264226,"post_id":74630535,"comment_id":132255873,"body_markdown":"This problem has to do with JDKs built with macOS SDK 13. Described [here](https://bugs.openjdk.org/browse/JDK-8296654) -- hopefully will be fixed soon.","body":"This problem has to do with JDKs built with macOS SDK 13. Described <a href=\"https://bugs.openjdk.org/browse/JDK-8296654\" rel=\"nofollow noreferrer\">here</a> -- hopefully will be fixed soon."},{"owner":{"account_id":27100657,"reputation":61,"user_id":20647276,"display_name":"cupias"},"score":0,"creation_date":1672272828,"post_id":74630535,"comment_id":132257347,"body_markdown":"@m0squito, thanks, I&#39;ll keep running my projects through IntelliJ for now. I hope patch is released.","body":"@m0squito, thanks, I&#39;ll keep running my projects through IntelliJ for now. I hope patch is released."},{"owner":{"account_id":22571790,"reputation":140,"user_id":16757869,"display_name":"Plegeus"},"score":0,"creation_date":1672523456,"post_id":74630535,"comment_id":132303093,"body_markdown":"I did not fix it, though somebody suggested updating java and stuff...","body":"I did not fix it, though somebody suggested updating java and stuff..."}],"answers":[{"comments":[{"owner":{"account_id":27100657,"reputation":61,"user_id":20647276,"display_name":"cupias"},"score":1,"creation_date":1675704520,"post_id":75344792,"comment_id":132981979,"body_markdown":"Yep, I was able to get it fixed by changing my pom.xml to use a newer version of open jfx.","body":"Yep, I was able to get it fixed by changing my pom.xml to use a newer version of open jfx."}],"tags":[],"owner":{"account_id":87925,"reputation":1385,"user_id":243532,"accept_rate":100,"display_name":"Juanan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675510313,"creation_date":1675510313,"answer_id":75344792,"question_id":74630535,"body_markdown":"This is fixed in JDK 19.0.2 (I could reproduce the problem with JDK 19.0.1):\r\n\r\n```\r\n$ java -version\r\nopenjdk version &quot;19.0.2&quot; 2023-01-17\r\nOpenJDK Runtime Environment (build 19.0.2+7-44)\r\nOpenJDK 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\r\n```\r\n\r\n```\r\n$ uname -a\r\nDarwin Juanans-MacBook-Air.local 22.1.0 Darwin Kernel Version 22.1.0: Sun Oct  9 20:15:52 PDT 2022; root:xnu-8792.41.9~2/RELEASE_ARM64_T8112 arm64\r\n```\r\n\r\nJust download the latest JDK (19.0.2) - you can download it from IntelliJ JDK settings - and export the new `JAVA_HOME`:\r\n\r\n```\r\n$ export JAVA_HOME=/Users/juanan/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home\r\n```\r\n\r\nDouble check that your `mvn` executable is using the latest JDK:\r\n\r\n```\r\n$ mvn --version\r\nApache Maven 3.8.7 (b89d5959fcde851dcb1c8946a785a163f14e1e29)\r\nMaven home: /opt/homebrew/Cellar/maven/3.8.7/libexec\r\nJava version: 19.0.2, vendor: Oracle Corporation, runtime: /Users/juanan/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home\r\nDefault locale: en_ES, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;13.0.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\r\n````\r\n\r\nAnd run you mvn script (`javafx:run` in my case):\r\n\r\n\r\n```\r\n$ mvn javafx:run\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RM2v1.png","title":"Assertion Failure When Trying to Compile JavaFX project using maven","body":"<p>This is fixed in JDK 19.0.2 (I could reproduce the problem with JDK 19.0.1):</p>\n<pre><code>$ java -version\nopenjdk version &quot;19.0.2&quot; 2023-01-17\nOpenJDK Runtime Environment (build 19.0.2+7-44)\nOpenJDK 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\n</code></pre>\n<pre><code>$ uname -a\nDarwin Juanans-MacBook-Air.local 22.1.0 Darwin Kernel Version 22.1.0: Sun Oct  9 20:15:52 PDT 2022; root:xnu-8792.41.9~2/RELEASE_ARM64_T8112 arm64\n</code></pre>\n<p>Just download the latest JDK (19.0.2) - you can download it from IntelliJ JDK settings - and export the new <code>JAVA_HOME</code>:</p>\n<pre><code>$ export JAVA_HOME=/Users/juanan/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home\n</code></pre>\n<p>Double check that your <code>mvn</code> executable is using the latest JDK:</p>\n<pre><code>$ mvn --version\nApache Maven 3.8.7 (b89d5959fcde851dcb1c8946a785a163f14e1e29)\nMaven home: /opt/homebrew/Cellar/maven/3.8.7/libexec\nJava version: 19.0.2, vendor: Oracle Corporation, runtime: /Users/juanan/Library/Java/JavaVirtualMachines/openjdk-19.0.2/Contents/Home\nDefault locale: en_ES, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;13.0.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>And run you mvn script (<code>javafx:run</code> in my case):</p>\n<pre><code>$ mvn javafx:run\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/RM2v1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RM2v1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26784515,"reputation":1,"user_id":20733640,"display_name":"Iv Ko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697309880,"creation_date":1697309769,"answer_id":77294113,"question_id":74630535,"body_markdown":"Most likely the problem is not in the `Java` version.\r\n\r\nhttps://github.com/software-challenge/gui/pull/95\r\n\r\nTo solve this problem, try using a different version of `JavaFX`. \r\n\r\nOnly `JavaFX` version `21` helped me when I encountered the same problem on `MacOS`\r\n\r\nAn example of using `JavaFX` version `21` for `maven` might look like this\r\n```\r\n...\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\r\n        &lt;javafx.version&gt;21&lt;/javafx.version&gt;\r\n        &lt;javafx.maven.plugin.version&gt;0.0.8&lt;/javafx.maven.plugin.version&gt;\r\n    &lt;/properties&gt;\r\n...\r\n```\r\n`17.0.1` and `18.0.1` returned the same error","title":"Assertion Failure When Trying to Compile JavaFX project using maven","body":"<p>Most likely the problem is not in the <code>Java</code> version.</p>\n<p><a href=\"https://github.com/software-challenge/gui/pull/95\" rel=\"nofollow noreferrer\">https://github.com/software-challenge/gui/pull/95</a></p>\n<p>To solve this problem, try using a different version of <code>JavaFX</code>.</p>\n<p>Only <code>JavaFX</code> version <code>21</code> helped me when I encountered the same problem on <code>MacOS</code></p>\n<p>An example of using <code>JavaFX</code> version <code>21</code> for <code>maven</code> might look like this</p>\n<pre><code>...\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n        &lt;javafx.version&gt;21&lt;/javafx.version&gt;\n        &lt;javafx.maven.plugin.version&gt;0.0.8&lt;/javafx.maven.plugin.version&gt;\n    &lt;/properties&gt;\n...\n</code></pre>\n<p><code>17.0.1</code> and <code>18.0.1</code> returned the same error</p>\n"}],"owner":{"account_id":27100657,"reputation":61,"user_id":20647276,"display_name":"cupias"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1199,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1697309880,"creation_date":1669823324,"question_id":74630535,"body_markdown":"I&#39;m working on a javaFX project, and I want to compile it in the terminal using maven, but I can&#39;t get it to work. It compiles just fine in IntelliJ, but not when I&#39;m in the terminal. I&#39;m using a compile script to run it. I&#39;m using an M2 MacBook Air.\r\n\r\nThis is my Java version:\r\n```\r\nopenjdk 19.0.1 2022-10-18\r\nOpenJDK Runtime Environment Zulu19.30+11-CA (build 19.0.1+10)\r\nOpenJDK 64-Bit Server VM Zulu19.30+11-CA (build 19.0.1+10, mixed mode, sharing)\r\n```\r\n\r\nMaven version:\r\n```\r\nMaven home: /opt/homebrew/Cellar/maven/3.8.6/libexec\r\nJava version: 19.0.1, vendor: Homebrew, runtime: /opt/homebrew/Cellar/openjdk/19.0.1/libexec/openjdk.jdk/Contents/Home\r\nDefault locale: en_US, platform encoding: UTF-8\r\nOS name: &quot;mac os x&quot;, version: &quot;13.0.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\r\n```\r\n\r\nP.S. I&#39;m new to maven, and this is my first post on stack overflow. Any tips are appreciated.\r\n\r\nHere&#39;s the script:\r\n```\r\n1 #!/bin/bash -ex  \r\n2\r\n3 mvn -q -e clean\r\n4 mvn -q -e compile\r\n5 mvn -q -e exec:java\r\n```\r\n\r\nHere&#39;s the stack trace:\r\n```\r\nNov 30, 2022 10:41:30 AM com.sun.javafx.application.PlatformImpl startup\r\nWARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @56d120f3&#39;\r\ninit() called\r\n2022-11-30 10:41:30.934 java[34735:3292918] *** Assertion failure in -[_NSTrackingAreaAKViewHelper removeTrackingRect:], _NSTrackingAreaAKManager.m:1585\r\n2022-11-30 10:41:30.936 java[34735:3292918] *** Terminating app due to uncaught exception &#39;NSInternalInconsistencyException&#39;, reason: &#39;0x0 is an invalid NSTrackingRectTag. Common possible reasons for this are: 1. already removed this trackingRectTag, 2. Truncated the NSTrackingRectTag to 32bit at some point.&#39;\r\n*** First throw call stack:\r\n(\r\n\t0   CoreFoundation                      0x00000001809bc418 __exceptionPreprocess + 176\r\n\t1   libobjc.A.dylib                     0x0000000180506ea8 objc_exception_throw + 60\r\n\t2   Foundation                          0x00000001818fca60 -[NSCalendarDate initWithCoder:] + 0\r\n\t3   AppKit                              0x000000018414bf98 -[_NSTrackingAreaAKViewHelper removeTrackingRect:] + 200\r\n\t4   libglass.dylib                      0x000000012cc65e80 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 3456\r\n\t5   libglass.dylib                      0x000000012cc6a540 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 21568\r\n\t6   AppKit                              0x0000000183bd1ba4 -[NSView setFrame:] + 304\r\n\t7   libglass.dylib                      0x000000012cc6a5a0 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 21664\r\n\t8   AppKit                              0x0000000183bdfad4 -[NSView resizeWithOldSuperviewSize:] + 508\r\n\t9   AppKit                              0x0000000183bdf4c4 -[NSView resizeSubviewsWithOldSize:] + 360\r\n\t10  AppKit                              0x0000000183bc3acc -[NSView setFrameSize:] + 1120\r\n\t11  AppKit                              0x0000000183bd1ba4 -[NSView setFrame:] + 304\r\n\t12  AppKit                              0x0000000183bdfad4 -[NSView resizeWithOldSuperviewSize:] + 508\r\n\t13  AppKit                              0x0000000183bdf4c4 -[NSView resizeSubviewsWithOldSize:] + 360\r\n\t14  AppKit                              0x0000000183bc3acc -[NSView setFrameSize:] + 1120\r\n\t15  AppKit                              0x0000000183bde130 -[NSThemeFrame setFrameSize:] + 244\r\n\t16  AppKit                              0x0000000183bdda7c -[NSWindow _oldPlaceWindow:fromServer:] + 540\r\n\t17  AppKit                              0x0000000183bdcb8c -[NSWindow _setFrameCommon:display:fromServer:] + 1824\r\n\t18  libglass.dylib                      0x000000012cc5d700 getImage + 5228\r\n\t19  libglass.dylib                      0x000000012cc74274 Java_com_sun_glass_ui_mac_MacWindow__1setBounds2 + 416\r\n\t20  ???                                 0x0000000114044aac 0x0 + 4630792876\r\n\t21  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t22  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t23  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t24  ???                                 0x0000000114041a88 0x0 + 4630780552\r\n\t25  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t26  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t27  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t28  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t29  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t30  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t31  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t32  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t33  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t34  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t35  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t36  ???                                 0x0000000114041a88 0x0 + 4630780552\r\n\t37  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t38  ???                                 0x0000000114041a88 0x0 + 4630780552\r\n\t39  ???                                 0x0000000114041300 0x0 + 4630778624\r\n\t40  ???                                 0x000000010cd3a564 0x0 + 4510164324\r\n\t41  ???                                 0x0000000114041300 0x0 + 4630778624\r\n\t42  ???                                 0x0000000114041548 0x0 + 4630779208\r\n\t43  ???                                 0x0000000114041a88 0x0 + 4630780552\r\n\t44  ???                                 0x0000000114030140 0x0 + 4630708544\r\n\t45  libjvm.dylib                        0x0000000103e5dd34 _ZN9JavaCalls11call_helperEP9JavaValueRK12methodHandleP17JavaCallArgumentsP10JavaThread + 564\r\n\t46  libjvm.dylib                        0x0000000103eb3c9c _ZL20jni_invoke_nonstaticP7JNIEnv_P9JavaValueP8_jobject11JNICallTypeP10_jmethodIDP18JNI_ArgumentPusherP10JavaThread + 536\r\n\t47  libjvm.dylib                        0x0000000103eb77c4 jni_CallVoidMethod + 224\r\n\t48  libglass.dylib                      0x000000012cc619e8 JNI_OnLoad + 204\r\n\t49  Foundation                          0x0000000181864b30 __NSThreadPerformPerform + 264\r\n\t50  CoreFoundation                      0x0000000180941a34 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 28\r\n\t51  CoreFoundation                      0x00000001809419c8 __CFRunLoopDoSource0 + 176\r\n\t52  CoreFoundation                      0x0000000180941738 __CFRunLoopDoSources0 + 244\r\n\t53  CoreFoundation                      0x000000018094033c __CFRunLoopRun + 836\r\n\t54  CoreFoundation                      0x000000018093f8a4 CFRunLoopRunSpecific + 612\r\n\t55  HIToolbox                           0x0000000189fb33bc RunCurrentEventLoopInMode + 292\r\n\t56  HIToolbox                           0x0000000189fb3200 ReceiveNextEventCommon + 672\r\n\t57  HIToolbox                           0x0000000189fb2f48 _BlockUntilNextEventMatchingListInModeWithFilter + 72\r\n\t58  AppKit                              0x0000000183b98630 _DPSNextEvent + 632\r\n\t59  AppKit                              0x0000000183b977c0 -[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 728\r\n\t60  AppKit                              0x0000000183b8bbf0 -[NSApplication run] + 464\r\n\t61  libglass.dylib                      0x000000012cc63b70 JNI_OnLoad + 8788\r\n\t62  Foundation                          0x0000000181864b30 __NSThreadPerformPerform + 264\r\n\t63  CoreFoundation                      0x0000000180941a34 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 28\r\n\t64  CoreFoundation                      0x00000001809419c8 __CFRunLoopDoSource0 + 176\r\n\t65  CoreFoundation                      0x0000000180941738 __CFRunLoopDoSources0 + 244\r\n\t66  CoreFoundation                      0x000000018094033c __CFRunLoopRun + 836\r\n\t67  CoreFoundation                      0x000000018093f8a4 CFRunLoopRunSpecific + 612\r\n\t68  libjli.dylib                        0x0000000102ab7094 CreateExecutionEnvironment + 400\r\n\t69  libjli.dylib                        0x0000000102ab3794 JLI_Launch + 1208\r\n\t70  java                                0x00000001029fbbbc main + 392\r\n\t71  dyld                                0x0000000180537e50 start + 2544\r\n)\r\nlibc++abi: terminating with uncaught exception of type NSException\r\n```\r\n","title":"Assertion Failure When Trying to Compile JavaFX project using maven","body":"<p>I'm working on a javaFX project, and I want to compile it in the terminal using maven, but I can't get it to work. It compiles just fine in IntelliJ, but not when I'm in the terminal. I'm using a compile script to run it. I'm using an M2 MacBook Air.</p>\n<p>This is my Java version:</p>\n<pre><code>openjdk 19.0.1 2022-10-18\nOpenJDK Runtime Environment Zulu19.30+11-CA (build 19.0.1+10)\nOpenJDK 64-Bit Server VM Zulu19.30+11-CA (build 19.0.1+10, mixed mode, sharing)\n</code></pre>\n<p>Maven version:</p>\n<pre><code>Maven home: /opt/homebrew/Cellar/maven/3.8.6/libexec\nJava version: 19.0.1, vendor: Homebrew, runtime: /opt/homebrew/Cellar/openjdk/19.0.1/libexec/openjdk.jdk/Contents/Home\nDefault locale: en_US, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;13.0.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>P.S. I'm new to maven, and this is my first post on stack overflow. Any tips are appreciated.</p>\n<p>Here's the script:</p>\n<pre><code>1 #!/bin/bash -ex  \n2\n3 mvn -q -e clean\n4 mvn -q -e compile\n5 mvn -q -e exec:java\n</code></pre>\n<p>Here's the stack trace:</p>\n<pre><code>Nov 30, 2022 10:41:30 AM com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @56d120f3'\ninit() called\n2022-11-30 10:41:30.934 java[34735:3292918] *** Assertion failure in -[_NSTrackingAreaAKViewHelper removeTrackingRect:], _NSTrackingAreaAKManager.m:1585\n2022-11-30 10:41:30.936 java[34735:3292918] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '0x0 is an invalid NSTrackingRectTag. Common possible reasons for this are: 1. already removed this trackingRectTag, 2. Truncated the NSTrackingRectTag to 32bit at some point.'\n*** First throw call stack:\n(\n    0   CoreFoundation                      0x00000001809bc418 __exceptionPreprocess + 176\n    1   libobjc.A.dylib                     0x0000000180506ea8 objc_exception_throw + 60\n    2   Foundation                          0x00000001818fca60 -[NSCalendarDate initWithCoder:] + 0\n    3   AppKit                              0x000000018414bf98 -[_NSTrackingAreaAKViewHelper removeTrackingRect:] + 200\n    4   libglass.dylib                      0x000000012cc65e80 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 3456\n    5   libglass.dylib                      0x000000012cc6a540 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 21568\n    6   AppKit                              0x0000000183bd1ba4 -[NSView setFrame:] + 304\n    7   libglass.dylib                      0x000000012cc6a5a0 Java_com_sun_glass_ui_mac_MacApplication__1getMacKey + 21664\n    8   AppKit                              0x0000000183bdfad4 -[NSView resizeWithOldSuperviewSize:] + 508\n    9   AppKit                              0x0000000183bdf4c4 -[NSView resizeSubviewsWithOldSize:] + 360\n    10  AppKit                              0x0000000183bc3acc -[NSView setFrameSize:] + 1120\n    11  AppKit                              0x0000000183bd1ba4 -[NSView setFrame:] + 304\n    12  AppKit                              0x0000000183bdfad4 -[NSView resizeWithOldSuperviewSize:] + 508\n    13  AppKit                              0x0000000183bdf4c4 -[NSView resizeSubviewsWithOldSize:] + 360\n    14  AppKit                              0x0000000183bc3acc -[NSView setFrameSize:] + 1120\n    15  AppKit                              0x0000000183bde130 -[NSThemeFrame setFrameSize:] + 244\n    16  AppKit                              0x0000000183bdda7c -[NSWindow _oldPlaceWindow:fromServer:] + 540\n    17  AppKit                              0x0000000183bdcb8c -[NSWindow _setFrameCommon:display:fromServer:] + 1824\n    18  libglass.dylib                      0x000000012cc5d700 getImage + 5228\n    19  libglass.dylib                      0x000000012cc74274 Java_com_sun_glass_ui_mac_MacWindow__1setBounds2 + 416\n    20  ???                                 0x0000000114044aac 0x0 + 4630792876\n    21  ???                                 0x0000000114041548 0x0 + 4630779208\n    22  ???                                 0x0000000114041548 0x0 + 4630779208\n    23  ???                                 0x0000000114041548 0x0 + 4630779208\n    24  ???                                 0x0000000114041a88 0x0 + 4630780552\n    25  ???                                 0x0000000114041548 0x0 + 4630779208\n    26  ???                                 0x0000000114041548 0x0 + 4630779208\n    27  ???                                 0x0000000114041548 0x0 + 4630779208\n    28  ???                                 0x0000000114041548 0x0 + 4630779208\n    29  ???                                 0x0000000114041548 0x0 + 4630779208\n    30  ???                                 0x0000000114041548 0x0 + 4630779208\n    31  ???                                 0x0000000114041548 0x0 + 4630779208\n    32  ???                                 0x0000000114041548 0x0 + 4630779208\n    33  ???                                 0x0000000114041548 0x0 + 4630779208\n    34  ???                                 0x0000000114041548 0x0 + 4630779208\n    35  ???                                 0x0000000114041548 0x0 + 4630779208\n    36  ???                                 0x0000000114041a88 0x0 + 4630780552\n    37  ???                                 0x0000000114041548 0x0 + 4630779208\n    38  ???                                 0x0000000114041a88 0x0 + 4630780552\n    39  ???                                 0x0000000114041300 0x0 + 4630778624\n    40  ???                                 0x000000010cd3a564 0x0 + 4510164324\n    41  ???                                 0x0000000114041300 0x0 + 4630778624\n    42  ???                                 0x0000000114041548 0x0 + 4630779208\n    43  ???                                 0x0000000114041a88 0x0 + 4630780552\n    44  ???                                 0x0000000114030140 0x0 + 4630708544\n    45  libjvm.dylib                        0x0000000103e5dd34 _ZN9JavaCalls11call_helperEP9JavaValueRK12methodHandleP17JavaCallArgumentsP10JavaThread + 564\n    46  libjvm.dylib                        0x0000000103eb3c9c _ZL20jni_invoke_nonstaticP7JNIEnv_P9JavaValueP8_jobject11JNICallTypeP10_jmethodIDP18JNI_ArgumentPusherP10JavaThread + 536\n    47  libjvm.dylib                        0x0000000103eb77c4 jni_CallVoidMethod + 224\n    48  libglass.dylib                      0x000000012cc619e8 JNI_OnLoad + 204\n    49  Foundation                          0x0000000181864b30 __NSThreadPerformPerform + 264\n    50  CoreFoundation                      0x0000000180941a34 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 28\n    51  CoreFoundation                      0x00000001809419c8 __CFRunLoopDoSource0 + 176\n    52  CoreFoundation                      0x0000000180941738 __CFRunLoopDoSources0 + 244\n    53  CoreFoundation                      0x000000018094033c __CFRunLoopRun + 836\n    54  CoreFoundation                      0x000000018093f8a4 CFRunLoopRunSpecific + 612\n    55  HIToolbox                           0x0000000189fb33bc RunCurrentEventLoopInMode + 292\n    56  HIToolbox                           0x0000000189fb3200 ReceiveNextEventCommon + 672\n    57  HIToolbox                           0x0000000189fb2f48 _BlockUntilNextEventMatchingListInModeWithFilter + 72\n    58  AppKit                              0x0000000183b98630 _DPSNextEvent + 632\n    59  AppKit                              0x0000000183b977c0 -[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 728\n    60  AppKit                              0x0000000183b8bbf0 -[NSApplication run] + 464\n    61  libglass.dylib                      0x000000012cc63b70 JNI_OnLoad + 8788\n    62  Foundation                          0x0000000181864b30 __NSThreadPerformPerform + 264\n    63  CoreFoundation                      0x0000000180941a34 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 28\n    64  CoreFoundation                      0x00000001809419c8 __CFRunLoopDoSource0 + 176\n    65  CoreFoundation                      0x0000000180941738 __CFRunLoopDoSources0 + 244\n    66  CoreFoundation                      0x000000018094033c __CFRunLoopRun + 836\n    67  CoreFoundation                      0x000000018093f8a4 CFRunLoopRunSpecific + 612\n    68  libjli.dylib                        0x0000000102ab7094 CreateExecutionEnvironment + 400\n    69  libjli.dylib                        0x0000000102ab3794 JLI_Launch + 1208\n    70  java                                0x00000001029fbbbc main + 392\n    71  dyld                                0x0000000180537e50 start + 2544\n)\nlibc++abi: terminating with uncaught exception of type NSException\n</code></pre>\n"},{"tags":["java","git","spring-boot"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1697289193,"post_id":77292804,"comment_id":136262666,"body_markdown":"Add the complete stacktrace to the question ... and [please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551).  The complete stacktrace may have clues that help to explain *why* Eclipse was unable to instantiate the class.","body":"Add the complete stacktrace to the question ... and <a href=\"//meta.stackoverflow.com/q/285551\">please do not upload images of code/data/errors.</a>.  The complete stacktrace may have clues that help to explain <i>why</i> Eclipse was unable to instantiate the class."}],"owner":{"account_id":29670599,"reputation":1,"user_id":22739935,"display_name":"sudi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697309851,"creation_date":1697286402,"question_id":77292804,"body_markdown":"[unable to see git stagging area](https://i.stack.imgur.com/nCMbk.png)\r\n\r\nUnable to connect to git staging are only not visible and getting this error `org.eclipse.egit.ui` was unable to instantiate class \r\n```\r\norg.eclipse.egit.ui.internal.staging.StagingView. Its telling internal error occured in  Git Repository Change Scanner\r\n```","title":"How to solve this error Plug-in &quot;org.eclipse.egit.ui&quot; was unable to instantiate class &quot;org.eclipse.egit.ui.internal.staging.StagingView&quot;.?","body":"<p><a href=\"https://i.stack.imgur.com/nCMbk.png\" rel=\"nofollow noreferrer\">unable to see git stagging area</a></p>\n<p>Unable to connect to git staging are only not visible and getting this error <code>org.eclipse.egit.ui</code> was unable to instantiate class</p>\n<pre><code>org.eclipse.egit.ui.internal.staging.StagingView. Its telling internal error occured in  Git Repository Change Scanner\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1697220717,"post_id":77289730,"comment_id":136257462,"body_markdown":"One idea would be to have two `JTables` that use the same table model.  The first `JTable` would consist of the three columns and be locked.  The second `JTable` would consist of the remaining columns and be flexible.  Both `JTables` would be placed in a single `JPanel` using a `BorderLayout`.  The `JPanel` would be placed in a `JScrollPane`.","body":"One idea would be to have two <code>JTables</code> that use the same table model.  The first <code>JTable</code> would consist of the three columns and be locked.  The second <code>JTable</code> would consist of the remaining columns and be flexible.  Both <code>JTables</code> would be placed in a single <code>JPanel</code> using a <code>BorderLayout</code>.  The <code>JPanel</code> would be placed in a <code>JScrollPane</code>."},{"owner":{"account_id":12968351,"reputation":35,"user_id":9375040,"display_name":"AMVPlusPlus"},"score":0,"creation_date":1697221485,"post_id":77289730,"comment_id":136257598,"body_markdown":"I&#39;m working with an existing codebase right now and trying to do that would require too much modification of code everywhere else and I&#39;m also very limited on time. Need something where I can just add code to the table rather than restructuring the entire thing.","body":"I&#39;m working with an existing codebase right now and trying to do that would require too much modification of code everywhere else and I&#39;m also very limited on time. Need something where I can just add code to the table rather than restructuring the entire thing."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697222663,"post_id":77289730,"comment_id":136257763,"body_markdown":"Check out [Fixed Column Table](https://tips4java.wordpress.com/2008/11/05/fixed-column-table/) for a reusable class that should meet your needs,","body":"Check out <a href=\"https://tips4java.wordpress.com/2008/11/05/fixed-column-table/\" rel=\"nofollow noreferrer\">Fixed Column Table</a> for a reusable class that should meet your needs,"}],"answers":[{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697309415,"creation_date":1697309415,"answer_id":77294095,"question_id":77289730,"body_markdown":"You can override [moveColumn](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/table/TableColumnModel.html#moveColumn(int,int)) in the column model and [setDraggedColumn](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/table/JTableHeader.html#setDraggedColumn(javax.swing.table.TableColumn)) in the table header:\r\n\r\n        JTable table = /* ... */;\r\n        int lastFixedColumn = 2;\r\n\r\n        TableColumnModel columnModel = new DefaultTableColumnModel() {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            @Override\r\n            public void moveColumn(int fromIndex,\r\n                                   int toIndex) {\r\n\r\n                if (fromIndex &gt; lastFixedColumn) {\r\n                    super.moveColumn(fromIndex,\r\n                        Math.max(toIndex, lastFixedColumn + 1));\r\n                }\r\n            }\r\n        };\r\n        int numCols = table.getModel().getColumnCount();\r\n        for (int i = 0; i &lt; numCols; i++) {\r\n            TableColumn column = new TableColumn(i);\r\n            column.setHeaderValue(table.getModel().getColumnName(i));\r\n            columnModel.addColumn(column);\r\n        }\r\n\r\n        JTableHeader header = new JTableHeader(columnModel) {\r\n            private static final long serialVersionUID = 1;\r\n\r\n            @Override\r\n            public void setDraggedColumn(TableColumn column) {\r\n                if (column == null ||\r\n                    column.getModelIndex() &gt; lastFixedColumn) {\r\n\r\n                    super.setDraggedColumn(column);\r\n                }\r\n            }\r\n        };\r\n\r\n        table.setTableHeader(header);\r\n        table.setColumnModel(columnModel);\r\n","title":"How do I set certain column headers to be immovable in a JTable?","body":"<p>You can override <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/table/TableColumnModel.html#moveColumn(int,int)\" rel=\"nofollow noreferrer\">moveColumn</a> in the column model and <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/table/JTableHeader.html#setDraggedColumn(javax.swing.table.TableColumn)\" rel=\"nofollow noreferrer\">setDraggedColumn</a> in the table header:</p>\n<pre><code>    JTable table = /* ... */;\n    int lastFixedColumn = 2;\n\n    TableColumnModel columnModel = new DefaultTableColumnModel() {\n        private static final long serialVersionUID = 1;\n\n        @Override\n        public void moveColumn(int fromIndex,\n                               int toIndex) {\n\n            if (fromIndex &gt; lastFixedColumn) {\n                super.moveColumn(fromIndex,\n                    Math.max(toIndex, lastFixedColumn + 1));\n            }\n        }\n    };\n    int numCols = table.getModel().getColumnCount();\n    for (int i = 0; i &lt; numCols; i++) {\n        TableColumn column = new TableColumn(i);\n        column.setHeaderValue(table.getModel().getColumnName(i));\n        columnModel.addColumn(column);\n    }\n\n    JTableHeader header = new JTableHeader(columnModel) {\n        private static final long serialVersionUID = 1;\n\n        @Override\n        public void setDraggedColumn(TableColumn column) {\n            if (column == null ||\n                column.getModelIndex() &gt; lastFixedColumn) {\n\n                super.setDraggedColumn(column);\n            }\n        }\n    };\n\n    table.setTableHeader(header);\n    table.setColumnModel(columnModel);\n</code></pre>\n"}],"owner":{"account_id":12968351,"reputation":35,"user_id":9375040,"display_name":"AMVPlusPlus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697309415,"creation_date":1697218800,"question_id":77289730,"body_markdown":"I have an existing JTable and I want the first 3 columns of the table to be immovable. Meaning if the user tries to drag the table headers of any the first 3 columns, they won&#39;t move and shouldn&#39;t move at all but they can reorder the rest of the columns.\r\n\r\nSomething similar to what the line below does \r\n\r\n    myTable.getTableHeader().setReorderingAllowed(false);\r\n\r\nbut it only applies to certain columns and not all column headers.\r\n\r\nI tried using a work around by utilizing mouse listeners so when the user hovers the mouse over any of the first 3 columns, I just disable the reordering for the entire table like below so they are unable to drag it.\r\n\r\n    myTable.getTableHeader().addMouseMotionListener(new MouseMotionListener(){\r\n                        @Override\r\n                        public void mouseMoved(MouseEvent me) {\r\n                            int column = myTable.columnAtPoint(me.getPoint());\r\n                            if(column &lt; 3) myTable.getTableHeader().setReorderingAllowed(false);\r\n                            else myTable.getTableHeader().setReorderingAllowed(true);\r\n                        }\r\n    });\r\n\r\nIt does prevent the user from dragging the first 3 columns. However, the issue is the user can still drag the other columns anywhere in the column order. They can drag say column #8 before column #2 and now the first 3 columns are different. The furthest column position the user should be able to move column #8 is right after column#3.\r\n\r\nWhat is the best possible way to achieve this?","title":"How do I set certain column headers to be immovable in a JTable?","body":"<p>I have an existing JTable and I want the first 3 columns of the table to be immovable. Meaning if the user tries to drag the table headers of any the first 3 columns, they won't move and shouldn't move at all but they can reorder the rest of the columns.</p>\n<p>Something similar to what the line below does</p>\n<pre><code>myTable.getTableHeader().setReorderingAllowed(false);\n</code></pre>\n<p>but it only applies to certain columns and not all column headers.</p>\n<p>I tried using a work around by utilizing mouse listeners so when the user hovers the mouse over any of the first 3 columns, I just disable the reordering for the entire table like below so they are unable to drag it.</p>\n<pre><code>myTable.getTableHeader().addMouseMotionListener(new MouseMotionListener(){\n                    @Override\n                    public void mouseMoved(MouseEvent me) {\n                        int column = myTable.columnAtPoint(me.getPoint());\n                        if(column &lt; 3) myTable.getTableHeader().setReorderingAllowed(false);\n                        else myTable.getTableHeader().setReorderingAllowed(true);\n                    }\n});\n</code></pre>\n<p>It does prevent the user from dragging the first 3 columns. However, the issue is the user can still drag the other columns anywhere in the column order. They can drag say column #8 before column #2 and now the first 3 columns are different. The furthest column position the user should be able to move column #8 is right after column#3.</p>\n<p>What is the best possible way to achieve this?</p>\n"},{"tags":["java","azure-cosmosdb","azure-cosmosdb-sqlapi"],"comments":[{"owner":{"account_id":1943836,"reputation":217797,"user_id":1749403,"accept_rate":96,"display_name":"Sajeetharan"},"score":0,"creation_date":1675256286,"post_id":75308704,"comment_id":132888564,"body_markdown":"what is the error you are getting now","body":"what is the error you are getting now"},{"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1675311039,"post_id":75308704,"comment_id":132902919,"body_markdown":"@Sajeetharan no rows getting upserted (2 rows were expected to get insert and 1 update). No exception is being thrown . If I remove CosmosPatchOperation from listObj then 2 rows are getting inserted.","body":"@Sajeetharan no rows getting upserted (2 rows were expected to get insert and 1 update). No exception is being thrown . If I remove CosmosPatchOperation from listObj then 2 rows are getting inserted."}],"answers":[{"tags":[],"owner":{"account_id":139956,"reputation":5126,"user_id":345912,"display_name":"mackie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675337752,"creation_date":1675337752,"answer_id":75322589,"question_id":75308704,"body_markdown":"Patching doesn&#39;t appear to be supported by the `Collection` type in the Javascript stored proc API. I suspect this was done as it&#39;s more an optimisiation for remote calls and SP execute locally so it&#39;s not really neccessary. \r\n\r\nAPI reference is here: http://azure.github.io/azure-cosmosdb-js-server/Collection.html\r\n\r\n`upsertDocument` is expecting the full document. ","title":"CosmosDB : CosmosPatchOperation not working via Stored Procedure","body":"<p>Patching doesn't appear to be supported by the <code>Collection</code> type in the Javascript stored proc API. I suspect this was done as it's more an optimisiation for remote calls and SP execute locally so it's not really neccessary.</p>\n<p>API reference is here: <a href=\"http://azure.github.io/azure-cosmosdb-js-server/Collection.html\" rel=\"nofollow noreferrer\">http://azure.github.io/azure-cosmosdb-js-server/Collection.html</a></p>\n<p><code>upsertDocument</code> is expecting the full document.</p>\n"},{"tags":[],"owner":{"account_id":10794033,"reputation":21,"user_id":7940450,"display_name":"FireFlying"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697309188,"creation_date":1683725097,"answer_id":76218996,"question_id":75308704,"body_markdown":"@Loren - patch operations are supported within stored procedures. Please see this Microsoft documentation: [Get started with Azure Cosmos DB Partial Document Update][1]. You want to skip the first JavaScript example and go to the one right after &quot;Sample stored procedure for patch operation&quot;.\r\n\r\nJust in case that documentation ever disappears, here&#39;s the sample stored procedure:\r\n\r\n    function patchDemo() {\r\n        var doc = {\r\n            &quot;id&quot;: &quot;exampleDoc&quot;,\r\n            &quot;fields&quot;: {\r\n                &quot;field1&quot;: &quot;exampleString&quot;,\r\n                &quot;field2&quot;: 20,\r\n                &quot;field3&quot;: 40\r\n            }\r\n        };\r\n        \r\n        var isAccepted = __.createDocument(__.getSelfLink(), doc, (err, doc) =&gt; {\r\n            if (err) {\r\n                throw err;\r\n            }\r\n            else {\r\n                getContext().getResponse().setBody(&quot;Example document successfully created.&quot;);\r\n                \r\n                var patchSpec = [\r\n                    { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/fields/field1&quot;, &quot;value&quot;: &quot;newExampleString&quot; },\r\n                    { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/fields/field2&quot; },\r\n                    { &quot;op&quot;: &quot;incr&quot;, &quot;path&quot;: &quot;/fields/field3&quot;, &quot;value&quot;: 10 }\r\n                ];\r\n                \r\n                var isAccepted = __.patchDocument(doc._self, patchSpec, (err, doc) =&gt; {\r\n                    if (err) {\r\n                        throw err;\r\n                    }\r\n                    else {\r\n                        getContext().getResponse().appendBody(&quot; Example document successfully patched.&quot;);\r\n                    }\r\n                });\r\n                \r\n                if (!isAccepted) throw new Error(&quot;Patch wasn&#39;t accepted&quot;);\r\n            }\r\n        });\r\n    \r\n        if (!isAccepted) throw new Error(&quot;Create wasn&#39;t accepted.&quot;);\r\n    }\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/cosmos-db/partial-document-update-getting-started?tabs=dotnet#support-for-server-side-programming","title":"CosmosDB : CosmosPatchOperation not working via Stored Procedure","body":"<p>@Loren - patch operations are supported within stored procedures. Please see this Microsoft documentation: <a href=\"https://learn.microsoft.com/en-us/azure/cosmos-db/partial-document-update-getting-started?tabs=dotnet#support-for-server-side-programming\" rel=\"nofollow noreferrer\">Get started with Azure Cosmos DB Partial Document Update</a>. You want to skip the first JavaScript example and go to the one right after &quot;Sample stored procedure for patch operation&quot;.</p>\n<p>Just in case that documentation ever disappears, here's the sample stored procedure:</p>\n<pre><code>function patchDemo() {\n    var doc = {\n        &quot;id&quot;: &quot;exampleDoc&quot;,\n        &quot;fields&quot;: {\n            &quot;field1&quot;: &quot;exampleString&quot;,\n            &quot;field2&quot;: 20,\n            &quot;field3&quot;: 40\n        }\n    };\n    \n    var isAccepted = __.createDocument(__.getSelfLink(), doc, (err, doc) =&gt; {\n        if (err) {\n            throw err;\n        }\n        else {\n            getContext().getResponse().setBody(&quot;Example document successfully created.&quot;);\n            \n            var patchSpec = [\n                { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/fields/field1&quot;, &quot;value&quot;: &quot;newExampleString&quot; },\n                { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/fields/field2&quot; },\n                { &quot;op&quot;: &quot;incr&quot;, &quot;path&quot;: &quot;/fields/field3&quot;, &quot;value&quot;: 10 }\n            ];\n            \n            var isAccepted = __.patchDocument(doc._self, patchSpec, (err, doc) =&gt; {\n                if (err) {\n                    throw err;\n                }\n                else {\n                    getContext().getResponse().appendBody(&quot; Example document successfully patched.&quot;);\n                }\n            });\n            \n            if (!isAccepted) throw new Error(&quot;Patch wasn't accepted&quot;);\n        }\n    });\n\n    if (!isAccepted) throw new Error(&quot;Create wasn't accepted.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697309188,"creation_date":1675246858,"question_id":75308704,"body_markdown":"I want to replace cosmos batch with Stored Proc as my requirement is to upsert 100+ records which cosmos batch does not support. I am adding 2 java objects and 1 CosmosPatchOperations\r\nin List&lt;Object&gt; and passing to below method.Whenver I am adding cosmos patch object no rows got inserted/updated otherwise it is working fine.I want to perform both insertion and patch operation in same transaction. Can somebody please guide how to modify SP so that it supports both insert and patch operation. \r\n\r\n      String rowsUpserted = &quot;&quot;;\r\n\t\ttry\r\n        {\r\n          rowsUpserted = container\r\n                  .getScripts()\r\n                  .getStoredProcedure(&quot;createEvent&quot;)\r\n                  .execute(Arrays.asList(listObj), options)\r\n                  .getResponseAsString();\r\n        }catch(Exception e){\r\n          e.printStackTrace();\r\n        }\r\n\r\n\r\nStored Proc\r\n\r\n    function createEvent(items) {\r\n    \r\n    var collection = getContext().getCollection();\r\n    var collectionLink = collection.getSelfLink();\r\n    var count = 0;\r\n\r\n    if (!items) throw new Error(&quot;The array is undefined or null.&quot;);\r\n\r\n    var numItems = items.length;\r\n\r\n    if (numItems == 0) {\r\n        getContext().getResponse().setBody(0);\r\n        return;\r\n    }\r\n\r\n    tryCreate(items[count], callback);\r\n\r\n    function tryCreate(item, callback) {\r\n        var options = { disableAutomaticIdGeneration: false };\r\n\r\n        var isAccepted = collection.upsertDocument(collectionLink, item, options, callback);\r\n        \r\n        \r\n\r\n        if (!isAccepted) getContext().getResponse().setBody(count);\r\n    }\r\n\r\n    function callback(err, item, options) {\r\n        if (err) throw err;\r\n        count++;\r\n        if (count &gt;= numItems) {\r\n            getContext().getResponse().setBody(count);\r\n        } else {\r\n            tryCreate(items[count], callback);\r\n        }\r\n    }\r\n    }\r\n","title":"CosmosDB : CosmosPatchOperation not working via Stored Procedure","body":"<p>I want to replace cosmos batch with Stored Proc as my requirement is to upsert 100+ records which cosmos batch does not support. I am adding 2 java objects and 1 CosmosPatchOperations\nin List and passing to below method.Whenver I am adding cosmos patch object no rows got inserted/updated otherwise it is working fine.I want to perform both insertion and patch operation in same transaction. Can somebody please guide how to modify SP so that it supports both insert and patch operation.</p>\n<pre><code>  String rowsUpserted = &quot;&quot;;\n    try\n    {\n      rowsUpserted = container\n              .getScripts()\n              .getStoredProcedure(&quot;createEvent&quot;)\n              .execute(Arrays.asList(listObj), options)\n              .getResponseAsString();\n    }catch(Exception e){\n      e.printStackTrace();\n    }\n</code></pre>\n<p>Stored Proc</p>\n<pre><code>function createEvent(items) {\n\nvar collection = getContext().getCollection();\nvar collectionLink = collection.getSelfLink();\nvar count = 0;\n\nif (!items) throw new Error(&quot;The array is undefined or null.&quot;);\n\nvar numItems = items.length;\n\nif (numItems == 0) {\n    getContext().getResponse().setBody(0);\n    return;\n}\n\ntryCreate(items[count], callback);\n\nfunction tryCreate(item, callback) {\n    var options = { disableAutomaticIdGeneration: false };\n\n    var isAccepted = collection.upsertDocument(collectionLink, item, options, callback);\n    \n    \n\n    if (!isAccepted) getContext().getResponse().setBody(count);\n}\n\nfunction callback(err, item, options) {\n    if (err) throw err;\n    count++;\n    if (count &gt;= numItems) {\n        getContext().getResponse().setBody(count);\n    } else {\n        tryCreate(items[count], callback);\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","php","jar","exec","shell-exec"],"comments":[{"owner":{"account_id":28943489,"reputation":100,"user_id":22169585,"display_name":"Jordan"},"score":1,"creation_date":1697238202,"post_id":77291023,"comment_id":136259573,"body_markdown":"Please share your PHP attempts as well as how their output failed so we can find the issue or attempt to reproduce the issue.","body":"Please share your PHP attempts as well as how their output failed so we can find the issue or attempt to reproduce the issue."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1697250696,"post_id":77291023,"comment_id":136260208,"body_markdown":"I&#39;d like to see you run the Jar file on the command line by itself without the PHP.  Then we can verify that the Java program works.  Once Java works we can concentrate on getting it integrated with PHP.  If the Java isn&#39;t working then we should look at that instead.","body":"I&#39;d like to see you run the Jar file on the command line by itself without the PHP.  Then we can verify that the Java program works.  Once Java works we can concentrate on getting it integrated with PHP.  If the Java isn&#39;t working then we should look at that instead."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1697268483,"post_id":77291023,"comment_id":136261065,"body_markdown":"Is the php running on a server and you expect the java to be run on the client&#39;s machine instead? If yes, is the java application already installed on their machine?","body":"Is the php running on a server and you expect the java to be run on the client&#39;s machine instead? If yes, is the java application already installed on their machine?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1697273644,"post_id":77291023,"comment_id":136261435,"body_markdown":"Open Web Start or IcedTea webstart is probably what you want","body":"Open Web Start or IcedTea webstart is probably what you want"},{"owner":{"account_id":29667482,"reputation":3,"user_id":22737603,"display_name":"Iago Sampaio"},"score":0,"creation_date":1697293851,"post_id":77291023,"comment_id":136263159,"body_markdown":"Jordan, here is the image of the lines of code and the output obtained by the browser through F12.\n&lt;img src=&quot;https://i.imgur.com/tF9zGnb.png&quot;&gt;\n&lt;img src=&quot;https://i.imgur.com/HBVjihY.png&quot;&gt;\n&lt;img src=&quot;https://i.imgur.com/2vsR9Z6.png&quot;&gt;\n&lt;img src=&quot;https://i.imgur.com/6YevVq6.png&quot;&gt;\n\nmarkspace, in the terminal it is running normally.\n&lt;img src=&quot;https://i.imgur.com/CzAsOto.png&quot;&gt;\n\nFedericoklezCulloca, yes, I have Java installed on my machine.\n\ng00se, could you give me a tutorial on how to put your suggestions on my PHP page?","body":"Jordan, here is the image of the lines of code and the output obtained by the browser through F12. &lt;img src=&quot;<a href=\"https://i.imgur.com/tF9zGnb.png\" rel=\"nofollow noreferrer\">i.imgur.com/tF9zGnb.png</a>&quot;&gt; &lt;img src=&quot;<a href=\"https://i.imgur.com/HBVjihY.png\" rel=\"nofollow noreferrer\">i.imgur.com/HBVjihY.png</a>&quot;&gt; &lt;img src=&quot;<a href=\"https://i.imgur.com/2vsR9Z6.png\" rel=\"nofollow noreferrer\">i.imgur.com/2vsR9Z6.png</a>&quot;&gt; &lt;img src=&quot;<a href=\"https://i.imgur.com/6YevVq6.png\" rel=\"nofollow noreferrer\">i.imgur.com/6YevVq6.png</a>&quot;&gt;  markspace, in the terminal it is running normally. &lt;img src=&quot;<a href=\"https://i.imgur.com/CzAsOto.png\" rel=\"nofollow noreferrer\">i.imgur.com/CzAsOto.png</a>&quot;&gt;  FedericoklezCulloca, yes, I have Java installed on my machine.  g00se, could you give me a tutorial on how to put your suggestions on my PHP page?"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697308464,"post_id":77291023,"comment_id":136264775,"body_markdown":"Please **do not** use images for code and logs. Use text. And don&#39;t add it in comments where it is hard to read. Edit your question.","body":"Please <b>do not</b> use images for code and logs. Use text. And don&#39;t add it in comments where it is hard to read. Edit your question."}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697308999,"creation_date":1697308999,"answer_id":77294069,"question_id":77291023,"body_markdown":"You cannot execute a jar file in the client computer of a web page because of security restrictions to avoid every computer in the world with a web browser to be hacked instanly.\r\n\r\nYou need to give the user instructions to install Java themselves in their computer, download the jar file and execute the application themselves.\r\n\r\nThere are toolkits like openwebstart.com that can help automate somewhat this but it may be overkill if your needs are simple.","title":"Run .jar file on a PHP page","body":"<p>You cannot execute a jar file in the client computer of a web page because of security restrictions to avoid every computer in the world with a web browser to be hacked instanly.</p>\n<p>You need to give the user instructions to install Java themselves in their computer, download the jar file and execute the application themselves.</p>\n<p>There are toolkits like openwebstart.com that can help automate somewhat this but it may be overkill if your needs are simple.</p>\n"}],"owner":{"account_id":29667482,"reputation":3,"user_id":22737603,"display_name":"Iago Sampaio"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1697553746,"accepted_answer_id":77294069,"answer_count":1,"score":-3,"last_activity_date":1697308999,"creation_date":1697237953,"question_id":77291023,"body_markdown":"Good evening, I have a .jar file and I want it to be executed when the user accesses a specific php page on my website.\r\n\r\n[Print of how I wanted](https://i.stack.imgur.com/aomgS.png)\r\n\r\nI have already tried with exec and shell_exec but it is not returning anything (blank page loading). Do any of you know if there is a way to solve this problem?","title":"Run .jar file on a PHP page","body":"<p>Good evening, I have a .jar file and I want it to be executed when the user accesses a specific php page on my website.</p>\n<p><a href=\"https://i.stack.imgur.com/aomgS.png\" rel=\"nofollow noreferrer\">Print of how I wanted</a></p>\n<p>I have already tried with exec and shell_exec but it is not returning anything (blank page loading). Do any of you know if there is a way to solve this problem?</p>\n"},{"tags":["java","jar","macos-sierra","java-8"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1490988235,"post_id":43148167,"comment_id":73373825,"body_markdown":"Javascript is not Java. Your question&#39;s a bit unclear. Is the question on just how to run a jar? Or does running the jar ask for your credentials?","body":"Javascript is not Java. Your question&#39;s a bit unclear. Is the question on just how to run a jar? Or does running the jar ask for your credentials?"},{"owner":{"account_id":10587398,"reputation":3,"user_id":7799261,"display_name":"Mason"},"score":0,"creation_date":1490988686,"post_id":43148167,"comment_id":73374027,"body_markdown":"I know JS isnt Java but I didn&#39;t know which it would fall under. The question is, how do I run a .jar file using a specific path to my JDK since my JDK isnt under the proper location","body":"I know JS isnt Java but I didn&#39;t know which it would fall under. The question is, how do I run a .jar file using a specific path to my JDK since my JDK isnt under the proper location"},{"owner":{"account_id":1306942,"reputation":4457,"user_id":1255737,"display_name":"rmlan"},"score":1,"creation_date":1490988859,"post_id":43148167,"comment_id":73374104,"body_markdown":"Well considering this question is purely about Java, which do you think it should fall under?","body":"Well considering this question is purely about Java, which do you think it should fall under?"}],"answers":[{"comments":[{"owner":{"account_id":10587398,"reputation":3,"user_id":7799261,"display_name":"Mason"},"score":0,"creation_date":1491336411,"post_id":43193119,"comment_id":73504688,"body_markdown":"I do need the JDK because its a java developing app","body":"I do need the JDK because its a java developing app"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":1,"creation_date":1491352990,"post_id":43193119,"comment_id":73511007,"body_markdown":"Your question is too vague then. What&#39;s this mystery application? You run Java apps with the JRE, not the JDK. If it&#39;s Bukkit, [development is done in an IDE](http://bukkit.gamepedia.com/Setting_Up_Your_Workspace) like Eclipse, IntelliJ, or Netbeans. You would launch Eclipse, for example, and point Eclipse to the JDK.","body":"Your question is too vague then. What&#39;s this mystery application? You run Java apps with the JRE, not the JDK. If it&#39;s Bukkit, <a href=\"http://bukkit.gamepedia.com/Setting_Up_Your_Workspace\" rel=\"nofollow noreferrer\">development is done in an IDE</a> like Eclipse, IntelliJ, or Netbeans. You would launch Eclipse, for example, and point Eclipse to the JDK."},{"owner":{"account_id":10587398,"reputation":3,"user_id":7799261,"display_name":"Mason"},"score":0,"creation_date":1491423855,"post_id":43193119,"comment_id":73552058,"body_markdown":"Wow! Thanks a ton man! You read my mind on the Bukkit thing! Eclipse wouldn&#39;t work but IntelliJ worked out for me now I just have to learn how to use it! Lol thanks man!","body":"Wow! Thanks a ton man! You read my mind on the Bukkit thing! Eclipse wouldn&#39;t work but IntelliJ worked out for me now I just have to learn how to use it! Lol thanks man!"},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1491428050,"post_id":43193119,"comment_id":73554207,"body_markdown":"Sure thing. If it helped, give an upvote and/or accept the answer.","body":"Sure thing. If it helped, give an upvote and/or accept the answer."}],"tags":[],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1491248998,"creation_date":1491248998,"answer_id":43193119,"question_id":43148167,"body_markdown":"To launch with a specific JRE (You wouldn&#39;t need the JDK to just run an application) you can do it through the command line.\r\n\r\nOpen a terminal and navigate to the directory with the Java binary and launch this way:\r\n\r\n`java -jar path/to/jar/program.jar`\r\n\r\n","title":"How to make a .jar open using a specific jdk?","body":"<p>To launch with a specific JRE (You wouldn't need the JDK to just run an application) you can do it through the command line.</p>\n\n<p>Open a terminal and navigate to the directory with the Java binary and launch this way:</p>\n\n<p><code>java -jar path/to/jar/program.jar</code></p>\n"},{"tags":[],"owner":{"account_id":303276,"reputation":1166,"user_id":612123,"display_name":"culmat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697308669,"creation_date":1697308669,"answer_id":77294056,"question_id":43148167,"body_markdown":"Using https://www.jbang.dev/\r\n\r\n    jbang -j=8 path/to/jar/program.jar","title":"How to make a .jar open using a specific jdk?","body":"<p>Using <a href=\"https://www.jbang.dev/\" rel=\"nofollow noreferrer\">https://www.jbang.dev/</a></p>\n<pre><code>jbang -j=8 path/to/jar/program.jar\n</code></pre>\n"}],"owner":{"account_id":10587398,"reputation":3,"user_id":7799261,"display_name":"Mason"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":43193119,"answer_count":2,"score":0,"last_activity_date":1697308669,"creation_date":1490987970,"question_id":43148167,"body_markdown":"I&#39;ve ran into an issue. I&#39;m running on macOS Sierra (10.12.1). This .jar file I downloaded requires a JDK. So, I installed JDK8 (jdk180121). I was able to extract JDK8 .pkg without typing in my password (authenticate).  I then tried to place the new folder into the proper place. However, it asks me to authenticate the JDK (aka asks for the password). I do not want to give my password, so, therefore, I can&#39;t place it in the proper location. However, I still need to open the .jar file I mentioned earlier. **How can I point the .jar file to where the JDK8 is located?**\r\n\r\nOSX: 10.12.2\r\nJDK: jdk180121\r\n.jar: craftbukkit-1.11.2(.jar)","title":"How to make a .jar open using a specific jdk?","body":"<p>I've ran into an issue. I'm running on macOS Sierra (10.12.1). This .jar file I downloaded requires a JDK. So, I installed JDK8 (jdk180121). I was able to extract JDK8 .pkg without typing in my password (authenticate).  I then tried to place the new folder into the proper place. However, it asks me to authenticate the JDK (aka asks for the password). I do not want to give my password, so, therefore, I can't place it in the proper location. However, I still need to open the .jar file I mentioned earlier. <strong>How can I point the .jar file to where the JDK8 is located?</strong></p>\n\n<p>OSX: 10.12.2\nJDK: jdk180121\n.jar: craftbukkit-1.11.2(.jar)</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","pagination","pageable"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":1,"creation_date":1697308358,"post_id":77288529,"comment_id":136264758,"body_markdown":"Well, I mean, if you query for non-expired `Lead`s, and then expire some of them, then suddenly there are less non-expired `Lead`s in the DB, so it&#39;s no surprise `driverReferralLeads.nextPageable()` goes out of bounds at some point, is it now?","body":"Well, I mean, if you query for non-expired <code>Lead</code>s, and then expire some of them, then suddenly there are less non-expired <code>Lead</code>s in the DB, so it&#39;s no surprise <code>driverReferralLeads.nextPageable()</code> goes out of bounds at some point, is it now?"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":1,"creation_date":1697308621,"post_id":77288529,"comment_id":136264794,"body_markdown":"What you should do instead is you should keep querying for the *first* page, until the query comes back empty","body":"What you should do instead is you should keep querying for the <i>first</i> page, until the query comes back empty"},{"owner":{"account_id":18106324,"reputation":846,"user_id":13163640,"display_name":"Dev"},"score":0,"creation_date":1697309165,"post_id":77288529,"comment_id":136264848,"body_markdown":"so, you&#39;re suggesting I should do findByChannelInAndCreatedAtIsLessThanAndDriverIdIsNullAndStatusIn(SourceChannels.ARCHIVAL_CHANNELS, expiryDate, statusForExpiring, PageRequest.of(0, batchSize)); even inside the loop.","body":"so, you&#39;re suggesting I should do findByChannelInAndCreatedAtIsLessThanAndDriverIdIsNullAndSta&zwnj;&#8203;tusIn(SourceChannels&zwnj;&#8203;.ARCHIVAL_CHANNELS, expiryDate, statusForExpiring, PageRequest.of(0, batchSize)); even inside the loop."},{"owner":{"account_id":18106324,"reputation":846,"user_id":13163640,"display_name":"Dev"},"score":0,"creation_date":1697309753,"post_id":77288529,"comment_id":136264896,"body_markdown":"works perfectly, thanks","body":"works perfectly, thanks"}],"owner":{"account_id":18106324,"reputation":846,"user_id":13163640,"display_name":"Dev"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697307652,"creation_date":1697207037,"question_id":77288529,"body_markdown":"Unable to fetch and update all the rows having source_channel as SourceChannels.DRIVER_REFERRAL_CHANNEL.\r\n\r\n    batchSize = 2\r\n    Page&lt;Lead&gt; driverReferralLeads = repository.findByChannelAndCreatedAtIsLessThanAndDriverIdIsNullAndStatusIn(SourceChannels.DRIVER_REFERRAL_CHANNEL, expiryDate, statusForExpiring, PageRequest.of(0, batchSize));\r\n    List&lt;Lead&gt; driverReferralLeadsList = driverReferralLeads.getContent();\r\n    LOGGER.info(&quot;{} phoneNumbers: {}&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsList.stream().map(Lead::getPhone).toArray()); // todo to be removed\r\n    service.expireLeads(SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsList, expiryDate);\r\n    int driverReferralLeadsIteration = 0; // todo to be removed\r\n    while (driverReferralLeads.hasNext()) {\r\n        LOGGER.info(&quot;{} iteration [{}].&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsIteration); // todo to be removed\r\n        driverReferralLeads = repository.findByChannelAndCreatedAtIsLessThanAndDriverIdIsNullAndStatusIn(SourceChannels.DRIVER_REFERRAL_CHANNEL, expiryDate, statusForExpiring, driverReferralLeads.nextPageable());\r\n        List&lt;Lead&gt; driverReferralLeadsNextList = driverReferralLeads.getContent();\r\n        LOGGER.info(&quot;{} iteration [{}]. phoneNumbers: {}&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsIteration, driverReferralLeadsNextList.stream().map(Lead::getPhone).toArray()); // todo to be removed\r\n        cartHeroService.expireLeads(SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsNextList, expiryDate);\r\n        driverReferralLeadsIteration++; // todo to be removed\r\n    }\r\n    LOGGER.info(&quot;{} Expired [{}] Leads.&quot;, LEAD_EXPIRY_LOGGER, SourceChannels.DRIVER_REFERRAL_CHANNEL);\r\n\r\n 6 records are there and it always fetches and updates 4. 2nd iteration of the while loop is not able to fetch anything but still goes inside the loop(have logs to prove).\r\n\r\n    log: \r\n    \r\n    Driver Referral iteration [0]. phoneNumbers: [1122334455, 1123455551]\r\n    \r\n    Driver Referral iteration [1]. phoneNumbers: []\r\n\r\n","title":"how to make Pageable query able to fetch all the rows","body":"<p>Unable to fetch and update all the rows having source_channel as SourceChannels.DRIVER_REFERRAL_CHANNEL.</p>\n<pre><code>batchSize = 2\nPage&lt;Lead&gt; driverReferralLeads = repository.findByChannelAndCreatedAtIsLessThanAndDriverIdIsNullAndStatusIn(SourceChannels.DRIVER_REFERRAL_CHANNEL, expiryDate, statusForExpiring, PageRequest.of(0, batchSize));\nList&lt;Lead&gt; driverReferralLeadsList = driverReferralLeads.getContent();\nLOGGER.info(&quot;{} phoneNumbers: {}&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsList.stream().map(Lead::getPhone).toArray()); // todo to be removed\nservice.expireLeads(SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsList, expiryDate);\nint driverReferralLeadsIteration = 0; // todo to be removed\nwhile (driverReferralLeads.hasNext()) {\n    LOGGER.info(&quot;{} iteration [{}].&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsIteration); // todo to be removed\n    driverReferralLeads = repository.findByChannelAndCreatedAtIsLessThanAndDriverIdIsNullAndStatusIn(SourceChannels.DRIVER_REFERRAL_CHANNEL, expiryDate, statusForExpiring, driverReferralLeads.nextPageable());\n    List&lt;Lead&gt; driverReferralLeadsNextList = driverReferralLeads.getContent();\n    LOGGER.info(&quot;{} iteration [{}]. phoneNumbers: {}&quot;, SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsIteration, driverReferralLeadsNextList.stream().map(Lead::getPhone).toArray()); // todo to be removed\n    cartHeroService.expireLeads(SourceChannels.DRIVER_REFERRAL_CHANNEL, driverReferralLeadsNextList, expiryDate);\n    driverReferralLeadsIteration++; // todo to be removed\n}\nLOGGER.info(&quot;{} Expired [{}] Leads.&quot;, LEAD_EXPIRY_LOGGER, SourceChannels.DRIVER_REFERRAL_CHANNEL);\n</code></pre>\n<p>6 records are there and it always fetches and updates 4. 2nd iteration of the while loop is not able to fetch anything but still goes inside the loop(have logs to prove).</p>\n<pre><code>log: \n\nDriver Referral iteration [0]. phoneNumbers: [1122334455, 1123455551]\n\nDriver Referral iteration [1]. phoneNumbers: []\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","jpa-criteria"],"comments":[{"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"score":0,"creation_date":1697296105,"post_id":77292957,"comment_id":136263388,"body_markdown":"What database are you using?","body":"What database are you using?"},{"owner":{"account_id":29670779,"reputation":1,"user_id":22740071,"display_name":"kroko"},"score":0,"creation_date":1697302694,"post_id":77292957,"comment_id":136264104,"body_markdown":"SQL Server 2022","body":"SQL Server 2022"}],"owner":{"account_id":29670779,"reputation":1,"user_id":22740071,"display_name":"kroko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697307490,"creation_date":1697289485,"question_id":77292957,"body_markdown":"I&#39;ve got InvestmentDTO\r\n```\r\npublic class InvestmentDTO {\r\n    \r\n    private int id;\r\n    private String code;\r\n    private String name;\r\n    private InvestmentTypeDTO investmentTypeDTO;\r\n\r\n    public InvestmentDTO() {\r\n    }\r\n\r\n    public InvestmentDTO(int id, String code, String name, InvestmentTypeDTO investmentTypeDTO) {\r\n        this.id = id;\r\n        this.code = code;\r\n        this.name = name;\r\n        this.investmentTypeDTO = investmentTypeDTO;\r\n    }\r\n// getters, setters\r\n\r\n```\r\nAnd I create criteriaQuery:\r\n\r\n```CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n\r\nCriteriaQuery&lt;InvestmentDTO&gt; criteriaQuery = criteriaBuilder.createQuery(InvestmentDTO.class);\r\nRoot&lt;Investment&gt; investmentRoot = criteriaQuery.from(Investment.class);\r\nJoin&lt;Investment, InvestmentType&gt; investmentTypeJoin = investmentRoot.join(&quot;investmentType&quot;, JoinType.LEFT);\r\n\r\ncriteriaQuery.select(\r\n    criteriaBuilder.construct(InvestmentDTO.class,\r\n        investmentRoot.get(&quot;id&quot;),\r\n        investmentRoot.get(&quot;code&quot;),\r\n        investmentRoot.get(&quot;name&quot;),\r\n            criteriaBuilder.construct(\r\n                InvestmentTypeDTO.class,\r\n                investmentTypeJoin.get(&quot;id&quot;),\r\n                investmentTypeJoin.get(&quot;name&quot;)\r\n            )\r\n        )\r\n    );\r\ncriteriaQuery.orderBy(criteriaBuilder.desc(investmentRoot.get(&quot;id&quot;)));\r\nList&lt;InvestmentDTO&gt; results = entityManager.createQuery(criteriaQuery).getResultList();\r\n\r\n\r\n```\r\nIf I remove line `criteriaQuery.orderBy(criteriaBuilder.desc(investmentRoot.get(&quot;id&quot;)));`\r\nQuery is fine and returns result without exception\r\nBut with that line I have exception:\r\n`java.lang.ArrayIndexOutOfBoundsException: Index 5 out of bounds for length 5`\r\nfull trace:\r\n\r\n```\r\njava.lang.ArrayIndexOutOfBoundsException: Index 5 out of bounds for length 5\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter$SqmAliasedNodePositionTracker.resolveSqlSelection(BaseSqmToSqlAstConverter.java:8290) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.metamodel.mapping.internal.BasicAttributeMapping.resolveSqlSelection(BasicAttributeMapping.java:330) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.metamodel.mapping.internal.BasicAttributeMapping.createDomainResult(BasicAttributeMapping.java:307) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.internal.AbstractSqmPathInterpretation.createDomainResult(AbstractSqmPathInterpretation.java:55) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiationArgument.buildArgumentDomainResult(DynamicInstantiationArgument.java:37) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.lambda$createDomainResult$0(DynamicInstantiation.java:106) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682) ~[na:na]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.createDomainResult(DynamicInstantiation.java:107) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiationArgument.buildArgumentDomainResult(DynamicInstantiationArgument.java:37) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.lambda$createDomainResult$0(DynamicInstantiation.java:106) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\r\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921) ~[na:na]\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682) ~[na:na]\r\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.createDomainResult(DynamicInstantiation.java:107) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.lambda$visitSelection$23(BaseSqmToSqlAstConverter.java:2294) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at java.base/java.util.Collections$SingletonList.forEach(Collections.java:4966) ~[na:na]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelection(BaseSqmToSqlAstConverter.java:2289) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectClause(BaseSqmToSqlAstConverter.java:2207) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:2051) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.tree.select.SqmQuerySpec.accept(SqmQuerySpec.java:125) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.spi.BaseSemanticQueryWalker.visitQueryPart(BaseSemanticQueryWalker.java:226) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQueryPart(BaseSqmToSqlAstConverter.java:1909) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:1594) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.tree.select.SqmSelectStatement.accept(SqmSelectStatement.java:222) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.translate(BaseSqmToSqlAstConverter.java:771) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.buildCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:345) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:268) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at org.hibernate.query.Query.getResultList(Query.java:119) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\r\n        at com.example.lazy.controller.InvestmentController.getDTO(InvestmentController.java:60) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```","title":"How to orderBy Jpa criteria query","body":"<p>I've got InvestmentDTO</p>\n<pre><code>public class InvestmentDTO {\n    \n    private int id;\n    private String code;\n    private String name;\n    private InvestmentTypeDTO investmentTypeDTO;\n\n    public InvestmentDTO() {\n    }\n\n    public InvestmentDTO(int id, String code, String name, InvestmentTypeDTO investmentTypeDTO) {\n        this.id = id;\n        this.code = code;\n        this.name = name;\n        this.investmentTypeDTO = investmentTypeDTO;\n    }\n// getters, setters\n\n</code></pre>\n<p>And I create criteriaQuery:</p>\n<pre><code>\nCriteriaQuery&lt;InvestmentDTO&gt; criteriaQuery = criteriaBuilder.createQuery(InvestmentDTO.class);\nRoot&lt;Investment&gt; investmentRoot = criteriaQuery.from(Investment.class);\nJoin&lt;Investment, InvestmentType&gt; investmentTypeJoin = investmentRoot.join(&quot;investmentType&quot;, JoinType.LEFT);\n\ncriteriaQuery.select(\n    criteriaBuilder.construct(InvestmentDTO.class,\n        investmentRoot.get(&quot;id&quot;),\n        investmentRoot.get(&quot;code&quot;),\n        investmentRoot.get(&quot;name&quot;),\n            criteriaBuilder.construct(\n                InvestmentTypeDTO.class,\n                investmentTypeJoin.get(&quot;id&quot;),\n                investmentTypeJoin.get(&quot;name&quot;)\n            )\n        )\n    );\ncriteriaQuery.orderBy(criteriaBuilder.desc(investmentRoot.get(&quot;id&quot;)));\nList&lt;InvestmentDTO&gt; results = entityManager.createQuery(criteriaQuery).getResultList();\n\n\n</code></pre>\n<p>If I remove line <code>criteriaQuery.orderBy(criteriaBuilder.desc(investmentRoot.get(&quot;id&quot;)));</code>\nQuery is fine and returns result without exception\nBut with that line I have exception:\n<code>java.lang.ArrayIndexOutOfBoundsException: Index 5 out of bounds for length 5</code>\nfull trace:</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: Index 5 out of bounds for length 5\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter$SqmAliasedNodePositionTracker.resolveSqlSelection(BaseSqmToSqlAstConverter.java:8290) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.metamodel.mapping.internal.BasicAttributeMapping.resolveSqlSelection(BasicAttributeMapping.java:330) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.metamodel.mapping.internal.BasicAttributeMapping.createDomainResult(BasicAttributeMapping.java:307) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.internal.AbstractSqmPathInterpretation.createDomainResult(AbstractSqmPathInterpretation.java:55) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiationArgument.buildArgumentDomainResult(DynamicInstantiationArgument.java:37) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.lambda$createDomainResult$0(DynamicInstantiation.java:106) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682) ~[na:na]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.createDomainResult(DynamicInstantiation.java:107) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiationArgument.buildArgumentDomainResult(DynamicInstantiationArgument.java:37) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.lambda$createDomainResult$0(DynamicInstantiation.java:106) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\n        at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n        at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921) ~[na:na]\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n        at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:682) ~[na:na]\n        at org.hibernate.sql.results.graph.instantiation.internal.DynamicInstantiation.createDomainResult(DynamicInstantiation.java:107) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.lambda$visitSelection$23(BaseSqmToSqlAstConverter.java:2294) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at java.base/java.util.Collections$SingletonList.forEach(Collections.java:4966) ~[na:na]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelection(BaseSqmToSqlAstConverter.java:2289) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectClause(BaseSqmToSqlAstConverter.java:2207) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:2051) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQuerySpec(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.tree.select.SqmQuerySpec.accept(SqmQuerySpec.java:125) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.spi.BaseSemanticQueryWalker.visitQueryPart(BaseSemanticQueryWalker.java:226) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitQueryPart(BaseSqmToSqlAstConverter.java:1909) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:1594) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.visitSelectStatement(BaseSqmToSqlAstConverter.java:435) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.tree.select.SqmSelectStatement.accept(SqmSelectStatement.java:222) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.sql.BaseSqmToSqlAstConverter.translate(BaseSqmToSqlAstConverter.java:771) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.buildCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:345) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:268) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:244) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:518) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:367) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at org.hibernate.query.Query.getResultList(Query.java:119) ~[hibernate-core-6.2.9.Final.jar:6.2.9.Final]\n        at com.example.lazy.controller.InvestmentController.getDTO(InvestmentController.java:60) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\n        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n        at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n"},{"tags":["java","performance-testing","gatling"],"answers":[{"comments":[{"owner":{"account_id":4718922,"reputation":121,"user_id":3817378,"accept_rate":30,"display_name":"user3817378"},"score":0,"creation_date":1697251896,"post_id":77290552,"comment_id":136260242,"body_markdown":"ty, I am not able to use the syntax you provided, used : scenario(&quot;Scenario&quot;).exec(getAuthenticationChain())\n                .randomSwitch().on(\n                        new Choice.WithWeight(50.0, exec(getCreateProductSyncChain(10, &quot;S1&quot;))),\n                        );      , Please confirm if this is same as what you suggested?","body":"ty, I am not able to use the syntax you provided, used : scenario(&quot;Scenario&quot;).exec(getAuthenticationChain())                 .randomSwitch().on(                         new Choice.WithWeight(50.0, exec(getCreateProductSyncChain(10, &quot;S1&quot;))),                         );      , Please confirm if this is same as what you suggested?"},{"owner":{"account_id":10172293,"reputation":2339,"user_id":7512201,"display_name":"Amerousful"},"score":0,"creation_date":1697297388,"post_id":77290552,"comment_id":136263501,"body_markdown":"Oh, I see. You asked specifically in Java, and my answer in Scala. \nHere you are an example from documentation:\n`randomSwitch().on(\n  Choice.withWeight(60.0, exec(http(&quot;name1&quot;).get(&quot;/foo&quot;))),\n  Choice.withWeight(40.0, exec(http(&quot;name2&quot;).get(&quot;/bar&quot;)))\n);`","body":"Oh, I see. You asked specifically in Java, and my answer in Scala.  Here you are an example from documentation: <code>randomSwitch().on(   Choice.withWeight(60.0, exec(http(&quot;name1&quot;).get(&quot;&#47;foo&quot;))),   Choice.withWeight(40.0, exec(http(&quot;name2&quot;).get(&quot;&#47;bar&quot;))) );</code>"}],"tags":[],"owner":{"account_id":10172293,"reputation":2339,"user_id":7512201,"display_name":"Amerousful"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697229877,"creation_date":1697229877,"answer_id":77290552,"question_id":77288634,"body_markdown":"It&#39;s a wrong strategy to use multiple scenarios for this case. Because, in general, you have the same scenario. In other words, your chain of actions(requests) doesn&#39;t change.\\\r\nFor your case, Gatling has the method `randomSwitch`, [documentation][1].\\\r\nWith this method, you can specify a percentage for a particular request.\r\n```scala\r\nscenario(&quot;Scenario&quot;)\r\n  .exec(getAuthenticationChain())\r\n  .randomSwitch( // beware: use parentheses, not curly braces!\r\n     50.0 -&gt; exec(createProduct(150, &quot;S1&quot;)),\r\n     10.0 -&gt; exec(createProduct(10, &quot;S2&quot;)),\r\n     ... and so on ...\r\n)\r\n```\r\n\r\n\r\n\r\n  [1]: https://gatling.io/docs/gatling/reference/current/core/scenario/#randomswitch","title":"Running multiple Gatling Scenario randomly with constant rate","body":"<p>It's a wrong strategy to use multiple scenarios for this case. Because, in general, you have the same scenario. In other words, your chain of actions(requests) doesn't change.<br />\nFor your case, Gatling has the method <code>randomSwitch</code>, <a href=\"https://gatling.io/docs/gatling/reference/current/core/scenario/#randomswitch\" rel=\"nofollow noreferrer\">documentation</a>.<br />\nWith this method, you can specify a percentage for a particular request.</p>\n<pre class=\"lang-scala prettyprint-override\"><code>scenario(&quot;Scenario&quot;)\n  .exec(getAuthenticationChain())\n  .randomSwitch( // beware: use parentheses, not curly braces!\n     50.0 -&gt; exec(createProduct(150, &quot;S1&quot;)),\n     10.0 -&gt; exec(createProduct(10, &quot;S2&quot;)),\n     ... and so on ...\n)\n</code></pre>\n"}],"owner":{"account_id":4718922,"reputation":121,"user_id":3817378,"accept_rate":30,"display_name":"user3817378"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77290552,"answer_count":1,"score":0,"last_activity_date":1697307141,"creation_date":1697207967,"question_id":77288634,"body_markdown":"I defined 5 scenarios as below:\r\n\r\n```\r\nScenarioBuilder s1 = scenario(&quot;S1&quot;).exec(getAuthenticationChain()).exec(createProduct(150, &quot;S1&quot;))\r\nScenarioBuilder s2 = scenario(&quot;S2&quot;).exec(getAuthenticationChain()).exec(createProduct(10, &quot;S2&quot;))\r\nScenarioBuilder s3 = scenario(&quot;S3&quot;).exec(getAuthenticationChain()).exec(createProduct(30, &quot;S3&quot;))\r\nScenarioBuilder s4 = scenario(&quot;S4&quot;).exec(getAuthenticationChain()).exec(createProduct(60, &quot;S4&quot;))\r\nScenarioBuilder s5 = scenario(&quot;S5&quot;).exec(getAuthenticationChain()).exec(createProduct(80, &quot;S5&quot;))\r\n```\r\n\r\nNow one of the requirement is:\r\n\r\n    Of all the users or requests , \r\n    s1 should be executed 50% of total request , \r\n    s2 10% of total request , \r\n    s3 20% of total request , \r\n    s4-&gt; 15% , \r\n    s5-&gt; 5% .\r\n\r\nLets say I am running the simulation for 900 secs,  the no of users/requests executed by every scenarious are:\r\n\r\n    s1: 900*50/100 = 450\r\n    s2: 900*10/100 = 90\r\n    s3: 900*20/100 = 180\r\n    s4: 900*15/100 = 135\r\n    s5: 900*5/100 = 45\r\n\r\nI have written the Gatling simulation like this:\r\n```\r\n{\r\n\tsetUp(\r\n     s1.injectOpen(constantUsersPerSec(0.50).during(900)).protocols(getSignInHeaders()),\r\n     s2.injectOpen(constantUsersPerSec(0.10).during(900)).protocols(getSignInHeaders()),\r\n     s3.injectOpen(constantUsersPerSec(0.20).during(900)).protocols(getSignInHeaders()),\r\n     s4.injectOpen(constantUsersPerSec(0.15).during(900)).protocols(getSignInHeaders()),\r\n     s5.injectOpen(constantUsersPerSec(0.05).during(900)).protocols(getSignInHeaders())\r\n\t)\r\n}\r\n```\r\n\r\nI am able to run the test , but the problem is all these scenario are running in parallel, I want to execute every request of every scenario in random order and with constant rate of 1 user/request per sec.\r\n\r\n\r\n    lets say s1: will execute 450 requests, s1r1.......s1r450\r\n    s2: s2r1.........s2r90\r\n    s3: s3r1.........s3r180\r\n    s4: s4r1.........s4r135\r\n    s5: s5r1......s5r45\r\n\r\n**Ask**: How can i write a scenario to execute all these requests in random order and with constant rate of 1 user/request per sec.?\r\n\r\n**Failed Attempts tried:**\r\n\r\nI tried executing them in sequence: \r\n\r\n```\r\n{\r\n\tsetUp(\r\n     s1.injectOpen(constantUsersPerSec(0.50).during(900)).andThen(\r\n\t\t\ts2.injectOpen(constantUsersPerSec(0.10).during(900)).andThen(\r\n\t\t\t\ts3.injectOpen(constantUsersPerSec(0.20).during(900)).andThen(\r\n\t\t\t\t\ts4.injectOpen(constantUsersPerSec(0.15).during(900)).andThen(\r\n\t\t\t\t\t\ts5.injectOpen(constantUsersPerSec(0.05).during(900))\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t)\r\n\r\n\t\t\t)\r\n     ).protocols(getSignInHeaders());\r\n}\r\n\r\n```\r\nthis executed all the requests of s1 first and then all the request of s2 and then all the request of s3 and so on.\r\n\r\nBut I want all the requests of all scenario to be executed with constant rate and in random order. \r\nPlease help me. Thanks.\r\n\r\n**Note** : I am using Gatling Maven plugin version 4.5.0 and Gatling DSL to write the code.\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;io.gatling&lt;/groupId&gt;\r\n      &lt;artifactId&gt;gatling-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;4.5.0&lt;/version&gt;\r\n    &lt;/plugin&gt;","title":"Running multiple Gatling Scenario randomly with constant rate","body":"<p>I defined 5 scenarios as below:</p>\n<pre><code>ScenarioBuilder s1 = scenario(&quot;S1&quot;).exec(getAuthenticationChain()).exec(createProduct(150, &quot;S1&quot;))\nScenarioBuilder s2 = scenario(&quot;S2&quot;).exec(getAuthenticationChain()).exec(createProduct(10, &quot;S2&quot;))\nScenarioBuilder s3 = scenario(&quot;S3&quot;).exec(getAuthenticationChain()).exec(createProduct(30, &quot;S3&quot;))\nScenarioBuilder s4 = scenario(&quot;S4&quot;).exec(getAuthenticationChain()).exec(createProduct(60, &quot;S4&quot;))\nScenarioBuilder s5 = scenario(&quot;S5&quot;).exec(getAuthenticationChain()).exec(createProduct(80, &quot;S5&quot;))\n</code></pre>\n<p>Now one of the requirement is:</p>\n<pre><code>Of all the users or requests , \ns1 should be executed 50% of total request , \ns2 10% of total request , \ns3 20% of total request , \ns4-&gt; 15% , \ns5-&gt; 5% .\n</code></pre>\n<p>Lets say I am running the simulation for 900 secs,  the no of users/requests executed by every scenarious are:</p>\n<pre><code>s1: 900*50/100 = 450\ns2: 900*10/100 = 90\ns3: 900*20/100 = 180\ns4: 900*15/100 = 135\ns5: 900*5/100 = 45\n</code></pre>\n<p>I have written the Gatling simulation like this:</p>\n<pre><code>{\n    setUp(\n     s1.injectOpen(constantUsersPerSec(0.50).during(900)).protocols(getSignInHeaders()),\n     s2.injectOpen(constantUsersPerSec(0.10).during(900)).protocols(getSignInHeaders()),\n     s3.injectOpen(constantUsersPerSec(0.20).during(900)).protocols(getSignInHeaders()),\n     s4.injectOpen(constantUsersPerSec(0.15).during(900)).protocols(getSignInHeaders()),\n     s5.injectOpen(constantUsersPerSec(0.05).during(900)).protocols(getSignInHeaders())\n    )\n}\n</code></pre>\n<p>I am able to run the test , but the problem is all these scenario are running in parallel, I want to execute every request of every scenario in random order and with constant rate of 1 user/request per sec.</p>\n<pre><code>lets say s1: will execute 450 requests, s1r1.......s1r450\ns2: s2r1.........s2r90\ns3: s3r1.........s3r180\ns4: s4r1.........s4r135\ns5: s5r1......s5r45\n</code></pre>\n<p><strong>Ask</strong>: How can i write a scenario to execute all these requests in random order and with constant rate of 1 user/request per sec.?</p>\n<p><strong>Failed Attempts tried:</strong></p>\n<p>I tried executing them in sequence:</p>\n<pre><code>{\n    setUp(\n     s1.injectOpen(constantUsersPerSec(0.50).during(900)).andThen(\n            s2.injectOpen(constantUsersPerSec(0.10).during(900)).andThen(\n                s3.injectOpen(constantUsersPerSec(0.20).during(900)).andThen(\n                    s4.injectOpen(constantUsersPerSec(0.15).during(900)).andThen(\n                        s5.injectOpen(constantUsersPerSec(0.05).during(900))\n                    )\n\n                )\n\n            )\n     ).protocols(getSignInHeaders());\n}\n\n</code></pre>\n<p>this executed all the requests of s1 first and then all the request of s2 and then all the request of s3 and so on.</p>\n<p>But I want all the requests of all scenario to be executed with constant rate and in random order.\nPlease help me. Thanks.</p>\n<p><strong>Note</strong> : I am using Gatling Maven plugin version 4.5.0 and Gatling DSL to write the code.</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;io.gatling&lt;/groupId&gt;\n  &lt;artifactId&gt;gatling-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","libgdx"],"owner":{"account_id":29672139,"reputation":1,"user_id":22741109,"display_name":"Lượng Dương Văn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697307011,"creation_date":1697307011,"question_id":77293970,"body_markdown":"I am newber \r\nActor events do not work when instantiating it before calling stage.addActor(actor). It works when i Actor events do not work when instantiating it before calling stage.addActor(actor). It works when I do the opposite.\r\nWhere am i fail?\r\n\r\nI am newber \r\nActor events do not work when instantiating it before calling stage.addActor(actor). It works when i Actor events do not work when instantiating it before calling stage.addActor(actor). It works when I do the opposite.\r\nWhere am i fail?","title":"Actor events do not work when instantiating it before calling stage.addActor(actor) libgdx","body":"<p>I am newber\nActor events do not work when instantiating it before calling stage.addActor(actor). It works when i Actor events do not work when instantiating it before calling stage.addActor(actor). It works when I do the opposite.\nWhere am i fail?</p>\n<p>I am newber\nActor events do not work when instantiating it before calling stage.addActor(actor). It works when i Actor events do not work when instantiating it before calling stage.addActor(actor). It works when I do the opposite.\nWhere am i fail?</p>\n"},{"tags":["java","android","crash","wear-os","android-pendingintent"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1697295492,"post_id":77293139,"comment_id":136263324,"body_markdown":"Are you on the latest version of the library that supplies `android.support.wearable.complications.ProviderUpdateRequester`?","body":"Are you on the latest version of the library that supplies <code>android.support.wearable.complications.ProviderUpdateRequest&zwnj;&#8203;er</code>?"}],"answers":[{"comments":[{"owner":{"account_id":17961238,"reputation":23,"user_id":13052163,"display_name":"Daniel"},"score":0,"creation_date":1697374709,"post_id":77293954,"comment_id":136269365,"body_markdown":"omg thank you! Interestingly, I hadn&#39;t imported the library at all but an old library (&#39;com.google.android.support:wearable&#39; or something like that). The old library was up to date at all times. I wouldn&#39;t have even thought that there was a new one.","body":"omg thank you! Interestingly, I hadn&#39;t imported the library at all but an old library (&#39;com.google.android.support:wearable&#39; or something like that). The old library was up to date at all times. I wouldn&#39;t have even thought that there was a new one."}],"tags":[],"owner":{"account_id":16115791,"reputation":367,"user_id":11632959,"display_name":"dect"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697306750,"creation_date":1697306750,"answer_id":77293954,"question_id":77293139,"body_markdown":"I had the same problem for days haha... in short there is a new version of the library...\r\n\r\n1. add these dependecies instead of the old ones (for java / I dont remember witch ones exactly, but the old ones are the ones with *-alpha*):\r\n\r\n```\r\nimplementation &quot;androidx.wear.watchface:watchface:1.1.1&quot;\r\nimplementation &quot;androidx.wear.watchface:watchface-complications-data-source:1.1.1&quot;&#180;\r\n```\r\n\r\n2. change the complication classes, it will now extend **ComplicationDataSourceService**... like this:\r\n\r\n```\r\npublic class YourComplicationClassName extends ComplicationDataSourceService\r\n```\r\n\r\n3. Update all the imports of the YourComplicationClassName\r\n4. The new code to update a complication:\r\n```\r\nComponentName cn = new ComponentName(this, YourComplicationClassName.class);\r\n\r\nComplicationDataSourceUpdateRequester cdsur = ComplicationDataSourceUpdateRequester.create(this, cn);\r\n\r\ncdsur.requestUpdateAll();\r\n```\r\n\r\nThat&#39;s all... I think haha\r\n\r\nSome references for you:\r\n- [Wear Watchface][1]\r\n- [Expose data to complications][2]\r\n\r\n\r\n  [1]: https://developer.android.com/jetpack/androidx/releases/wear-watchface\r\n  [2]: https://developer.android.com/training/wearables/tiles/exposing-data-complications\r\n\r\nPs. These new libray works on OS 4 and 3, I tested...","title":"Crash because of PendingIntent for Complication in Wear OS","body":"<p>I had the same problem for days haha... in short there is a new version of the library...</p>\n<ol>\n<li>add these dependecies instead of the old ones (for java / I dont remember witch ones exactly, but the old ones are the ones with <em>-alpha</em>):</li>\n</ol>\n<pre><code>implementation &quot;androidx.wear.watchface:watchface:1.1.1&quot;\nimplementation &quot;androidx.wear.watchface:watchface-complications-data-source:1.1.1&quot;´\n</code></pre>\n<ol start=\"2\">\n<li>change the complication classes, it will now extend <strong>ComplicationDataSourceService</strong>... like this:</li>\n</ol>\n<pre><code>public class YourComplicationClassName extends ComplicationDataSourceService\n</code></pre>\n<ol start=\"3\">\n<li>Update all the imports of the YourComplicationClassName</li>\n<li>The new code to update a complication:</li>\n</ol>\n<pre><code>ComponentName cn = new ComponentName(this, YourComplicationClassName.class);\n\nComplicationDataSourceUpdateRequester cdsur = ComplicationDataSourceUpdateRequester.create(this, cn);\n\ncdsur.requestUpdateAll();\n</code></pre>\n<p>That's all... I think haha</p>\n<p>Some references for you:</p>\n<ul>\n<li><a href=\"https://developer.android.com/jetpack/androidx/releases/wear-watchface\" rel=\"nofollow noreferrer\">Wear Watchface</a></li>\n<li><a href=\"https://developer.android.com/training/wearables/tiles/exposing-data-complications\" rel=\"nofollow noreferrer\">Expose data to complications</a></li>\n</ul>\n<p>Ps. These new libray works on OS 4 and 3, I tested...</p>\n"}],"owner":{"account_id":17961238,"reputation":23,"user_id":13052163,"display_name":"Daniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77293954,"answer_count":1,"score":0,"last_activity_date":1697306750,"creation_date":1697292609,"question_id":77293139,"body_markdown":"I&#39;ve been trying to find the error myself for two days now, but so far I haven&#39;t been able to find one. The following in advance. There are two classes: the BroadcastReceiver and the ProviderService. When I click the complication I get the following error:\r\n\r\n\r\n```\r\nFATAL EXCEPTION: main\r\n                                                                                                    Process: com.danddstudios.counter, PID: 12971\r\n                                                                                                    java.lang.RuntimeException: Unable to start receiver com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver: java.lang.IllegalArgumentException: com.danddstudios.counter: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n                                                                                                    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n                                                                                                    \tat android.app.ActivityThread.handleReceiver(ActivityThread.java:4345)\r\n                                                                                                    \tat android.app.ActivityThread.-$$Nest$mhandleReceiver(Unknown Source:0)\r\n                                                                                                    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2154)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                                                                    \tat android.os.Looper.loopOnce(Looper.java:201)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:288)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:7898)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n                                                                                                    Caused by: java.lang.IllegalArgumentException: com.danddstudios.counter: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\r\n                                                                                                    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\r\n                                                                                                    \tat android.app.PendingIntent.checkFlags(PendingIntent.java:401)\r\n                                                                                                    \tat android.app.PendingIntent.getActivityAsUser(PendingIntent.java:484)\r\n                                                                                                    \tat android.app.PendingIntent.getActivity(PendingIntent.java:470)\r\n                                                                                                    \tat android.app.PendingIntent.getActivity(PendingIntent.java:434)\r\n                                                                                                    \tat android.support.wearable.complications.ProviderUpdateRequester.requestUpdate(ProviderUpdateRequester.java:103)\r\n                                                                                                    \tat com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver.initComplications(IndicatorComplicationTapBroadcastReceiver.java:81)\r\n                                                                                                    \tat com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver.onReceive(IndicatorComplicationTapBroadcastReceiver.java:53)\r\n                                                                                                    \tat android.app.ActivityThread.handleReceiver(ActivityThread.java:4336)\r\n 9 more\r\n\r\n```\r\n\r\n\r\nApparently &quot;FLAG_IMMUTABLE&quot; is missing when creating the PendingIntent. However, this is included in my code. The error message still comes. Attached are the classes “IndicatorComplicationTapBroadcastReceiver” and “IndicatorCounterComplicationProviderService”. At lower API levels (30 and below) the code works perfectly. The error occurs as soon as the BroadcastReceiver tries to call the &quot;initComplications()&quot; method. The error message in question then appears with “requestUpdateAll()”.\r\n\r\n\r\n```\r\npublic class IndicatorComplicationTapBroadcastReceiver extends BroadcastReceiver {\r\n\r\n    private static final String EXTRA_PROVIDER_COMPONENT = &quot;com.danddstudios.android.wearable.watchface.provider.action.PROVIDER_COMPONENT&quot;;\r\n    private static final String EXTRA_COMPLICATION_ID = &quot;com.danddstudios.android.wearable.watchface.provider.action.COMPLICATION_ID&quot;;\r\n    private static final String TAG3 = &quot;SyncLog/IndicatorComplicationTapBroadcastReceiver&quot;; // firestore log;\r\n    private static final String TAG5 = &quot;TLog/IndicatorComplicationTapBroadcastReceiver&quot;; // tiles log\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        Log.i(TAG5, &quot;started onReceive()&quot;);\r\n        // method to load item list from sharedPreferences //\r\n\r\n        Log.i(TAG3, &quot;started loadArrayList()&quot;);\r\n        ArrayList&lt;CounterItem&gt; counterList;\r\n        SharedPreferences prefs = context.getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\r\n        Gson gson = new Gson();\r\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\r\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\r\n        }.getType();\r\n        counterList = gson.fromJson(json, type);\r\n        if (counterList == null) {\r\n            Log.i(TAG3, &quot;counterList = null&quot;);\r\n            counterList = new ArrayList&lt;&gt;();\r\n            counterList.add(new CounterItem(&quot;0&quot;, context.getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\r\n        } else {\r\n            Log.i(TAG3, &quot;counterList != null&quot;);\r\n        }\r\n        Log.i(TAG3, &quot;counter = &quot; + counterList.get(0).getInt());\r\n\r\n\r\n\r\n        initComplications(context);\r\n        refreshTile(context);\r\n    }\r\n\r\n    /**\r\n     * Returns a pending intent, suitable for use as a tap intent, that causes a complication to be\r\n     * toggled and updated.\r\n     */\r\n    public static PendingIntent getToggleIntent(Context context, ComponentName provider, int complicationId) { // accessed in ProviderService\r\n        Log.i(TAG5, &quot;started getToggleIntent&quot;);\r\n        Intent intent = new Intent(context, IndicatorComplicationTapBroadcastReceiver.class);\r\n        intent.putExtra(EXTRA_PROVIDER_COMPONENT, provider);\r\n        intent.putExtra(EXTRA_COMPLICATION_ID, complicationId);\r\n        intent.setPackage(context.getPackageName()); // for security\r\n\r\n        // Pass complicationId as the requestCode to ensure that different complications get\r\n        // different intents.\r\n\r\n        // Create a PendingIntent using FLAG_IMMUTABLE\r\n        Log.i(TAG5, &quot;return pendingIntent&quot;);\r\n        return PendingIntent.getBroadcast(context, complicationId, intent, FLAG_IMMUTABLE);\r\n    }\r\n\r\n    public void initComplications(Context c) {\r\n        Log.i(TAG5, &quot;started initComplications()&quot;);\r\n        ComponentName componentName1 = new ComponentName(c, IndicatorCounterComplicationProviderService.class);\r\n        // Request an update for the complication\r\n        ProviderUpdateRequester requester1 = new ProviderUpdateRequester(c, componentName1);\r\n        requester1.requestUpdate();\r\n    }\r\n\r\n    public void refreshTile(Context context) {\r\n        Log.i(TAG5, &quot;started refreshTile()&quot;);\r\n        TileService.getUpdater(context.getApplicationContext())\r\n                .requestUpdate(TileService.class);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nand the service:\r\n\r\n\r\n```\r\npublic class IndicatorCounterComplicationProviderService extends ComplicationProviderService {\r\n\r\n    int counter;\r\n    String counterString;\r\n    private static final String TAG3 = &quot;SyncLog/IndicatorCounterComplicationProviderService&quot;; // complication log\r\n    private static final String TAG5 = &quot;TLog/IndicatorComplicationTapBroadcastReceiver&quot;; // tiles log\r\n\r\n    @Override\r\n    public void onComplicationActivated(int complicationId, int dataType, ComplicationManager complicationManager) {\r\n        Log.i(TAG3, &quot;onComplicationActivated(): &quot; + complicationId);\r\n        Log.i(TAG5, &quot;onComplicationActivated() id: &quot; + complicationId);\r\n        ArrayList&lt;CounterItem&gt; counterList;\r\n        SharedPreferences prefs = getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\r\n        Gson gson = new Gson();\r\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\r\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\r\n        }.getType();\r\n        counterList = gson.fromJson(json, type);\r\n        if (counterList == null) {\r\n            Log.i(TAG3, &quot;counterList = null&quot;);\r\n            counterList = new ArrayList&lt;&gt;();\r\n            counterList.add(new CounterItem(&quot;0&quot;, getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\r\n        } else {\r\n            Log.i(TAG3, &quot;counterArray != null&quot;);\r\n        }\r\n        counterString = &quot;&quot; + counterList.get(0).getInt();\r\n    }\r\n\r\n    /*\r\n     * Called when the complication needs updated data from your provider. There are four scenarios\r\n     * when this will happen:\r\n     *\r\n     *   1. An active watch face complication is changed to use this provider\r\n     *   2. A complication using this provider becomes active\r\n     *   3. The period of time you specified in the manifest has elapsed (UPDATE_PERIOD_SECONDS)\r\n     *   4. You triggered an update from your own class via the\r\n     *       ProviderUpdateRequester.requestUpdate() method.\r\n     */\r\n    @Override\r\n    public void onComplicationUpdate(int complicationId, int dataType, ComplicationManager complicationManager) {\r\n        Log.i(TAG3, &quot;onComplicationUpdate() id: &quot; + complicationId);\r\n        Log.i(TAG5, &quot;onComplicationUpdate() id: &quot; + complicationId);\r\n        ArrayList&lt;CounterItem&gt; counterList;\r\n        SharedPreferences prefs = getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\r\n        Gson gson = new Gson();\r\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\r\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\r\n        }.getType();\r\n        counterList = gson.fromJson(json, type);\r\n        if (counterList == null) {\r\n            Log.i(TAG3, &quot;counterList = null&quot;);\r\n            counterList = new ArrayList&lt;&gt;();\r\n            counterList.add(new CounterItem(&quot;0&quot;, getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\r\n        } else {\r\n            Log.i(TAG3, &quot;counterList != null&quot;);\r\n        }\r\n        Log.i(TAG3, &quot;counter = &quot; + counterList.get(0).getInt());\r\n        counterString = &quot;&quot; + counterList.get(0).getInt();\r\n\r\n        // Create Tap Action so that the user can trigger an update by tapping the complication.\r\n        ComponentName thisProvider = new ComponentName(this, getClass());\r\n        // We pass the complication id, so we can only update the specific complication tapped.\r\n        PendingIntent complicationPendingIntent = IndicatorComplicationTapBroadcastReceiver.getToggleIntent(this, thisProvider, complicationId); // which broadcast receiver should be loaded\r\n        ComplicationData complicationData = null;\r\n\r\n        switch (dataType) {\r\n            case ComplicationData.TYPE_SHORT_TEXT:\r\n                complicationData = new ComplicationData.Builder(ComplicationData.TYPE_SHORT_TEXT)\r\n                        .setShortText(ComplicationText.plainText(counterString))\r\n                        .setTapAction(complicationPendingIntent)\r\n                        .build();\r\n                break;\r\n\r\n            case ComplicationData.TYPE_LONG_TEXT:\r\n                complicationData = new ComplicationData.Builder(ComplicationData.TYPE_LONG_TEXT)\r\n                                .setLongText(ComplicationText.plainText(getString(R.string.app_name) + &quot;: &quot; + counterString))\r\n                                .setTapAction(complicationPendingIntent)\r\n                                .build();\r\n                break;\r\n            default:\r\n                Log.i(TAG3, &quot;Unexpected complication type &quot; + dataType);\r\n        }\r\n\r\n        if (complicationData != null) {\r\n            complicationManager.updateComplicationData(complicationId, complicationData);\r\n\r\n        } else {\r\n            // If no data is sent, we still need to inform the ComplicationManager, so the update\r\n            // job can finish and the wake lock isn&#39;t held any longer than necessary.\r\n            complicationManager.noUpdateRequired(complicationId);\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Called when the complication has been deactivated.\r\n     */\r\n    @Override\r\n    public void onComplicationDeactivated(int complicationId) {\r\n        Log.i(TAG3, &quot;onComplicationDeactivated(): &quot; + complicationId);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nThe error occurs as soon as you increase the API level to 31. I tried to solve the problem myself by deleting the &quot;initComplications()&quot; method. After that, the complication no longer updates. It should only display a number (counter).","title":"Crash because of PendingIntent for Complication in Wear OS","body":"<p>I've been trying to find the error myself for two days now, but so far I haven't been able to find one. The following in advance. There are two classes: the BroadcastReceiver and the ProviderService. When I click the complication I get the following error:</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                                    Process: com.danddstudios.counter, PID: 12971\n                                                                                                    java.lang.RuntimeException: Unable to start receiver com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver: java.lang.IllegalArgumentException: com.danddstudios.counter: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n                                                                                                    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n                                                                                                        at android.app.ActivityThread.handleReceiver(ActivityThread.java:4345)\n                                                                                                        at android.app.ActivityThread.-$$Nest$mhandleReceiver(Unknown Source:0)\n                                                                                                        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2154)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                                                                        at android.os.Looper.loopOnce(Looper.java:201)\n                                                                                                        at android.os.Looper.loop(Looper.java:288)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:7898)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n                                                                                                    Caused by: java.lang.IllegalArgumentException: com.danddstudios.counter: Targeting S+ (version 31 and above) requires that one of FLAG_IMMUTABLE or FLAG_MUTABLE be specified when creating a PendingIntent.\n                                                                                                    Strongly consider using FLAG_IMMUTABLE, only use FLAG_MUTABLE if some functionality depends on the PendingIntent being mutable, e.g. if it needs to be used with inline replies or bubbles.\n                                                                                                        at android.app.PendingIntent.checkFlags(PendingIntent.java:401)\n                                                                                                        at android.app.PendingIntent.getActivityAsUser(PendingIntent.java:484)\n                                                                                                        at android.app.PendingIntent.getActivity(PendingIntent.java:470)\n                                                                                                        at android.app.PendingIntent.getActivity(PendingIntent.java:434)\n                                                                                                        at android.support.wearable.complications.ProviderUpdateRequester.requestUpdate(ProviderUpdateRequester.java:103)\n                                                                                                        at com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver.initComplications(IndicatorComplicationTapBroadcastReceiver.java:81)\n                                                                                                        at com.danddstudios.counter.Complications.BroadcastReceiver.IndicatorComplicationTapBroadcastReceiver.onReceive(IndicatorComplicationTapBroadcastReceiver.java:53)\n                                                                                                        at android.app.ActivityThread.handleReceiver(ActivityThread.java:4336)\n 9 more\n\n</code></pre>\n<p>Apparently &quot;FLAG_IMMUTABLE&quot; is missing when creating the PendingIntent. However, this is included in my code. The error message still comes. Attached are the classes “IndicatorComplicationTapBroadcastReceiver” and “IndicatorCounterComplicationProviderService”. At lower API levels (30 and below) the code works perfectly. The error occurs as soon as the BroadcastReceiver tries to call the &quot;initComplications()&quot; method. The error message in question then appears with “requestUpdateAll()”.</p>\n<pre><code>public class IndicatorComplicationTapBroadcastReceiver extends BroadcastReceiver {\n\n    private static final String EXTRA_PROVIDER_COMPONENT = &quot;com.danddstudios.android.wearable.watchface.provider.action.PROVIDER_COMPONENT&quot;;\n    private static final String EXTRA_COMPLICATION_ID = &quot;com.danddstudios.android.wearable.watchface.provider.action.COMPLICATION_ID&quot;;\n    private static final String TAG3 = &quot;SyncLog/IndicatorComplicationTapBroadcastReceiver&quot;; // firestore log;\n    private static final String TAG5 = &quot;TLog/IndicatorComplicationTapBroadcastReceiver&quot;; // tiles log\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        Log.i(TAG5, &quot;started onReceive()&quot;);\n        // method to load item list from sharedPreferences //\n\n        Log.i(TAG3, &quot;started loadArrayList()&quot;);\n        ArrayList&lt;CounterItem&gt; counterList;\n        SharedPreferences prefs = context.getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\n        Gson gson = new Gson();\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\n        }.getType();\n        counterList = gson.fromJson(json, type);\n        if (counterList == null) {\n            Log.i(TAG3, &quot;counterList = null&quot;);\n            counterList = new ArrayList&lt;&gt;();\n            counterList.add(new CounterItem(&quot;0&quot;, context.getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\n        } else {\n            Log.i(TAG3, &quot;counterList != null&quot;);\n        }\n        Log.i(TAG3, &quot;counter = &quot; + counterList.get(0).getInt());\n\n\n\n        initComplications(context);\n        refreshTile(context);\n    }\n\n    /**\n     * Returns a pending intent, suitable for use as a tap intent, that causes a complication to be\n     * toggled and updated.\n     */\n    public static PendingIntent getToggleIntent(Context context, ComponentName provider, int complicationId) { // accessed in ProviderService\n        Log.i(TAG5, &quot;started getToggleIntent&quot;);\n        Intent intent = new Intent(context, IndicatorComplicationTapBroadcastReceiver.class);\n        intent.putExtra(EXTRA_PROVIDER_COMPONENT, provider);\n        intent.putExtra(EXTRA_COMPLICATION_ID, complicationId);\n        intent.setPackage(context.getPackageName()); // for security\n\n        // Pass complicationId as the requestCode to ensure that different complications get\n        // different intents.\n\n        // Create a PendingIntent using FLAG_IMMUTABLE\n        Log.i(TAG5, &quot;return pendingIntent&quot;);\n        return PendingIntent.getBroadcast(context, complicationId, intent, FLAG_IMMUTABLE);\n    }\n\n    public void initComplications(Context c) {\n        Log.i(TAG5, &quot;started initComplications()&quot;);\n        ComponentName componentName1 = new ComponentName(c, IndicatorCounterComplicationProviderService.class);\n        // Request an update for the complication\n        ProviderUpdateRequester requester1 = new ProviderUpdateRequester(c, componentName1);\n        requester1.requestUpdate();\n    }\n\n    public void refreshTile(Context context) {\n        Log.i(TAG5, &quot;started refreshTile()&quot;);\n        TileService.getUpdater(context.getApplicationContext())\n                .requestUpdate(TileService.class);\n    }\n\n}\n</code></pre>\n<p>and the service:</p>\n<pre><code>public class IndicatorCounterComplicationProviderService extends ComplicationProviderService {\n\n    int counter;\n    String counterString;\n    private static final String TAG3 = &quot;SyncLog/IndicatorCounterComplicationProviderService&quot;; // complication log\n    private static final String TAG5 = &quot;TLog/IndicatorComplicationTapBroadcastReceiver&quot;; // tiles log\n\n    @Override\n    public void onComplicationActivated(int complicationId, int dataType, ComplicationManager complicationManager) {\n        Log.i(TAG3, &quot;onComplicationActivated(): &quot; + complicationId);\n        Log.i(TAG5, &quot;onComplicationActivated() id: &quot; + complicationId);\n        ArrayList&lt;CounterItem&gt; counterList;\n        SharedPreferences prefs = getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\n        Gson gson = new Gson();\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\n        }.getType();\n        counterList = gson.fromJson(json, type);\n        if (counterList == null) {\n            Log.i(TAG3, &quot;counterList = null&quot;);\n            counterList = new ArrayList&lt;&gt;();\n            counterList.add(new CounterItem(&quot;0&quot;, getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\n        } else {\n            Log.i(TAG3, &quot;counterArray != null&quot;);\n        }\n        counterString = &quot;&quot; + counterList.get(0).getInt();\n    }\n\n    /*\n     * Called when the complication needs updated data from your provider. There are four scenarios\n     * when this will happen:\n     *\n     *   1. An active watch face complication is changed to use this provider\n     *   2. A complication using this provider becomes active\n     *   3. The period of time you specified in the manifest has elapsed (UPDATE_PERIOD_SECONDS)\n     *   4. You triggered an update from your own class via the\n     *       ProviderUpdateRequester.requestUpdate() method.\n     */\n    @Override\n    public void onComplicationUpdate(int complicationId, int dataType, ComplicationManager complicationManager) {\n        Log.i(TAG3, &quot;onComplicationUpdate() id: &quot; + complicationId);\n        Log.i(TAG5, &quot;onComplicationUpdate() id: &quot; + complicationId);\n        ArrayList&lt;CounterItem&gt; counterList;\n        SharedPreferences prefs = getSharedPreferences(&quot;saveCounter&quot;, Context.MODE_PRIVATE);\n        Gson gson = new Gson();\n        String json = prefs.getString(&quot;saveCounter&quot;, null);\n        Type type = new TypeToken&lt;ArrayList&lt;CounterItem&gt;&gt;() {\n        }.getType();\n        counterList = gson.fromJson(json, type);\n        if (counterList == null) {\n            Log.i(TAG3, &quot;counterList = null&quot;);\n            counterList = new ArrayList&lt;&gt;();\n            counterList.add(new CounterItem(&quot;0&quot;, getString(R.string.app_name) + &quot; &quot; + 1, 0, 1));\n        } else {\n            Log.i(TAG3, &quot;counterList != null&quot;);\n        }\n        Log.i(TAG3, &quot;counter = &quot; + counterList.get(0).getInt());\n        counterString = &quot;&quot; + counterList.get(0).getInt();\n\n        // Create Tap Action so that the user can trigger an update by tapping the complication.\n        ComponentName thisProvider = new ComponentName(this, getClass());\n        // We pass the complication id, so we can only update the specific complication tapped.\n        PendingIntent complicationPendingIntent = IndicatorComplicationTapBroadcastReceiver.getToggleIntent(this, thisProvider, complicationId); // which broadcast receiver should be loaded\n        ComplicationData complicationData = null;\n\n        switch (dataType) {\n            case ComplicationData.TYPE_SHORT_TEXT:\n                complicationData = new ComplicationData.Builder(ComplicationData.TYPE_SHORT_TEXT)\n                        .setShortText(ComplicationText.plainText(counterString))\n                        .setTapAction(complicationPendingIntent)\n                        .build();\n                break;\n\n            case ComplicationData.TYPE_LONG_TEXT:\n                complicationData = new ComplicationData.Builder(ComplicationData.TYPE_LONG_TEXT)\n                                .setLongText(ComplicationText.plainText(getString(R.string.app_name) + &quot;: &quot; + counterString))\n                                .setTapAction(complicationPendingIntent)\n                                .build();\n                break;\n            default:\n                Log.i(TAG3, &quot;Unexpected complication type &quot; + dataType);\n        }\n\n        if (complicationData != null) {\n            complicationManager.updateComplicationData(complicationId, complicationData);\n\n        } else {\n            // If no data is sent, we still need to inform the ComplicationManager, so the update\n            // job can finish and the wake lock isn't held any longer than necessary.\n            complicationManager.noUpdateRequired(complicationId);\n        }\n    }\n\n    /*\n     * Called when the complication has been deactivated.\n     */\n    @Override\n    public void onComplicationDeactivated(int complicationId) {\n        Log.i(TAG3, &quot;onComplicationDeactivated(): &quot; + complicationId);\n    }\n}\n</code></pre>\n<p>The error occurs as soon as you increase the API level to 31. I tried to solve the problem myself by deleting the &quot;initComplications()&quot; method. After that, the complication no longer updates. It should only display a number (counter).</p>\n"},{"tags":["java","web-services","https","websphere"],"answers":[{"comments":[{"owner":{"account_id":2284093,"reputation":1,"user_id":2008545,"display_name":"user2008545"},"score":0,"creation_date":1359063643,"post_id":14510016,"comment_id":20229388,"body_markdown":"The answer that I&#39;m looking for is how to configure WAS to communicate with web service with SSLv3 protocol instead of TLSv1...","body":"The answer that I&#39;m looking for is how to configure WAS to communicate with web service with SSLv3 protocol instead of TLSv1..."}],"tags":[],"owner":{"account_id":1345845,"reputation":3244,"user_id":1286621,"accept_rate":80,"display_name":"Mike"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1359059868,"creation_date":1359058889,"answer_id":14510016,"question_id":14508231,"body_markdown":"Not sure if this helps, but... \r\n\r\n[SSLHandshakeException][1]\r\n\r\n[Something Related?][2]\r\n\r\n[Maybe some help here on SO][3]\r\n\r\nand 1 more...\r\n\r\nanswer was SSLContext ctx = SSLContext.getInstance(&quot;SSLv3&quot;);\r\n\r\n[Thread here][4]\r\n\r\n[Troubleshooting Websphere Applications][5]\r\n\r\n\r\n  [1]: http://www-01.ibm.com/support/docview.wss?uid=swg21318567\r\n  [2]: http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.ihs.doc/info/ihs/ihs/rihs_v3ciphspec.html\r\n  [3]: https://stackoverflow.com/questions/12907472/ssl-connect-to-mq-using-net-mq-client-sslv3\r\n  [4]: https://kr.forums.oracle.com/forums/thread.jspa?threadID=1532467\r\n  [5]: ftp://ftp.software.ibm.com/software/webserver/appserv/library/v85/BOS85R10.pdf","title":"How to Set SSLv3 on Websphere?","body":"<p>Not sure if this helps, but... </p>\n\n<p><a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21318567\" rel=\"nofollow noreferrer\">SSLHandshakeException</a></p>\n\n<p><a href=\"http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.ihs.doc/info/ihs/ihs/rihs_v3ciphspec.html\" rel=\"nofollow noreferrer\">Something Related?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/12907472/ssl-connect-to-mq-using-net-mq-client-sslv3\">Maybe some help here on SO</a></p>\n\n<p>and 1 more...</p>\n\n<p>answer was SSLContext ctx = SSLContext.getInstance(\"SSLv3\");</p>\n\n<p><a href=\"https://kr.forums.oracle.com/forums/thread.jspa?threadID=1532467\" rel=\"nofollow noreferrer\">Thread here</a></p>\n\n<p><a href=\"ftp://ftp.software.ibm.com/software/webserver/appserv/library/v85/BOS85R10.pdf\" rel=\"nofollow noreferrer\">Troubleshooting Websphere Applications</a></p>\n"},{"comments":[{"owner":{"account_id":2284093,"reputation":1,"user_id":2008545,"display_name":"user2008545"},"score":0,"creation_date":1359138816,"post_id":14522790,"comment_id":20258257,"body_markdown":"This was the log from the server. I&#39;ve already played with QoP but still the same error. In the meantime it turned out that it works somehow on 6.1 so I will check that previous version on my local environment. Thanks for help!","body":"This was the log from the server. I&#39;ve already played with QoP but still the same error. In the meantime it turned out that it works somehow on 6.1 so I will check that previous version on my local environment. Thanks for help!"}],"tags":[],"owner":{"account_id":197766,"reputation":4253,"user_id":442041,"accept_rate":85,"display_name":"groo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359120652,"creation_date":1359120652,"answer_id":14522790,"question_id":14508231,"body_markdown":"Do you have an IHS(IBM HTTP Server) in front of your WebShpere? \r\n\r\n**If not:**\r\n\r\nTo change the protocol go from the Domain Manager Console: Security &gt; SSL certificate and key management &gt; SSL configurations &gt; NodeDefaultSSLSettings &gt; Quality of protection (QoP) settings\r\n\r\nThere you will find a combo Protocol, where you can set this. If SSL_TLS that is de default is already set you can try changing to SSLv3 but SSL_TLS should be able to handle TLS and SSLv3 and maybe there&#39;s something else than WebSphere on the path to this service.\r\n \r\nYou will find detailed information at: http://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf\r\n\r\nand also : http://www.ibm.com/developerworks/websphere/techjournal/0612_birk/0612_birk.html#sec1\r\n\r\n\r\n**If yes:**\r\n\r\nThan the instructions would be different, let me know. :) \r\n\r\nRegards.\r\n\r\n\r\nP.S - Is this log from the WebSphere server of from the &quot;client&quot; I have a smell that what might be happening is that the &quot;client&quot; is the one that does not support SSLv3, looks like WebSphere wants SSLv3 to close the handshake but the client site does not support it. If this is the case you could try changing the protocol to SSLv2 but be adviced that it would be a security risk doing that.\r\n","title":"How to Set SSLv3 on Websphere?","body":"<p>Do you have an IHS(IBM HTTP Server) in front of your WebShpere? </p>\n\n<p><strong>If not:</strong></p>\n\n<p>To change the protocol go from the Domain Manager Console: Security > SSL certificate and key management > SSL configurations > NodeDefaultSSLSettings > Quality of protection (QoP) settings</p>\n\n<p>There you will find a combo Protocol, where you can set this. If SSL_TLS that is de default is already set you can try changing to SSLv3 but SSL_TLS should be able to handle TLS and SSLv3 and maybe there's something else than WebSphere on the path to this service.</p>\n\n<p>You will find detailed information at: <a href=\"http://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf\" rel=\"nofollow\">http://www.redbooks.ibm.com/redbooks/pdfs/sg247660.pdf</a></p>\n\n<p>and also : <a href=\"http://www.ibm.com/developerworks/websphere/techjournal/0612_birk/0612_birk.html#sec1\" rel=\"nofollow\">http://www.ibm.com/developerworks/websphere/techjournal/0612_birk/0612_birk.html#sec1</a></p>\n\n<p><strong>If yes:</strong></p>\n\n<p>Than the instructions would be different, let me know. :) </p>\n\n<p>Regards.</p>\n\n<p>P.S - Is this log from the WebSphere server of from the \"client\" I have a smell that what might be happening is that the \"client\" is the one that does not support SSLv3, looks like WebSphere wants SSLv3 to close the handshake but the client site does not support it. If this is the case you could try changing the protocol to SSLv2 but be adviced that it would be a security risk doing that.</p>\n"}],"owner":{"account_id":2284093,"reputation":1,"user_id":2008545,"display_name":"user2008545"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697306515,"creation_date":1359052197,"question_id":14508231,"body_markdown":"I have a component written in Java, I cannot change, which is deployed on WAS 7 and tries to call web service via https. I am getting:\r\n\r\n*Server chose unsupported or disabled protocol: SSLv3*\r\n\r\nWhen I tried to call the same web service from SoapUI or java app (the same version of java as WAS) I got the same error, but it was easy to fix with:\r\n\r\n    System.setProperty(&quot;https.protocols&quot;, &quot;SSLv3&quot;);\r\n\r\n\r\nFor some reason I could not force websphere to work. I set this property via console but the error was still the same. When I print system properties I see that it was set properly.\r\n\r\n    Java version: \r\n    java version &quot;1.6.0&quot; Java(TM) SE Runtime Environment (SR10 FP1)\r\n    IBM J9 VM (build 2.4, JRE 1.6.0 IBM J9)\r\n\r\nThis is the log file from the server. How to force it to use SSLv3 instead of TLSv1? Can I change it through the console? I was told that it works on the server, however I don&#39;t have access to the settings. What might be the case apart from settings? Different version of JVM, WAS?\r\n\r\n    [1/24/13 17:04:58:842 CET] 0000003e SystemOut     O WebContainer : 4, **WRITE: TLSv1 Handshake**, length = 57\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, **READ: SSLv3 Handshake**, length = 74\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O *** **ServerHello, SSLv3**\r\n    \r\n    ...\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, handling exception: javax.net.ssl.SSLHandshakeException: **Server chose unsupported or disabled protocol: SSLv3**\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, SEND TLSv1 ALERT:  fatal, description = handshake_failure\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, WRITE: TLSv1 Alert, length = 2\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called closeSocket()\r\n    \r\n    [1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called close()\r\n    \r\n    ...","title":"How to Set SSLv3 on Websphere?","body":"<p>I have a component written in Java, I cannot change, which is deployed on WAS 7 and tries to call web service via https. I am getting:</p>\n\n<p><em>Server chose unsupported or disabled protocol: SSLv3</em></p>\n\n<p>When I tried to call the same web service from SoapUI or java app (the same version of java as WAS) I got the same error, but it was easy to fix with:</p>\n\n<pre><code>System.setProperty(\"https.protocols\", \"SSLv3\");\n</code></pre>\n\n<p>For some reason I could not force websphere to work. I set this property via console but the error was still the same. When I print system properties I see that it was set properly.</p>\n\n<pre><code>Java version: \njava version \"1.6.0\" Java(TM) SE Runtime Environment (SR10 FP1)\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9)\n</code></pre>\n\n<p>This is the log file from the server. How to force it to use SSLv3 instead of TLSv1? Can I change it through the console? I was told that it works on the server, however I don't have access to the settings. What might be the case apart from settings? Different version of JVM, WAS?</p>\n\n<pre><code>[1/24/13 17:04:58:842 CET] 0000003e SystemOut     O WebContainer : 4, **WRITE: TLSv1 Handshake**, length = 57\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, **READ: SSLv3 Handshake**, length = 74\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O *** **ServerHello, SSLv3**\n\n...\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, handling exception: javax.net.ssl.SSLHandshakeException: **Server chose unsupported or disabled protocol: SSLv3**\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, SEND TLSv1 ALERT:  fatal, description = handshake_failure\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, WRITE: TLSv1 Alert, length = 2\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called closeSocket()\n\n[1/24/13 17:04:58:967 CET] 0000003e SystemOut     O WebContainer : 4, called close()\n\n...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":14162458,"reputation":3910,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1697316720,"post_id":77293899,"comment_id":136265543,"body_markdown":"Does this answer your question? [How to configure Spring boot pagination starting from page 1, not 0](https://stackoverflow.com/questions/39884860/how-to-configure-spring-boot-pagination-starting-from-page-1-not-0)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/39884860/how-to-configure-spring-boot-pagination-starting-from-page-1-not-0\">How to configure Spring boot pagination starting from page 1, not 0</a>"},{"owner":{"account_id":29172742,"reputation":3,"user_id":22348703,"display_name":"rben"},"score":0,"creation_date":1697386481,"post_id":77293899,"comment_id":136270672,"body_markdown":"No I have tried what is proposed but it stills not working","body":"No I have tried what is proposed but it stills not working"},{"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"score":0,"creation_date":1697445333,"post_id":77293899,"comment_id":136276142,"body_markdown":"I guess you misunderstand how this config property works. a good explanation is here: https://stackoverflow.com/questions/52120070/spring-data-web-pageable-one-indexed-parameters-true-does-not-work/59999787#59999787","body":"I guess you misunderstand how this config property works. a good explanation is here: <a href=\"https://stackoverflow.com/questions/52120070/spring-data-web-pageable-one-indexed-parameters-true-does-not-work/59999787#59999787\" title=\"spring data web pageable one indexed parameters true does not work\">stackoverflow.com/questions/52120070/&hellip;</a>"},{"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"score":0,"creation_date":1697445419,"post_id":77293899,"comment_id":136276162,"body_markdown":"also take a look at the config method description from official API: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/web/PageableHandlerMethodArgumentResolverSupport.html#isOneIndexedParameters()","body":"also take a look at the config method description from official API: <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/web/PageableHandlerMethodArgumentResolverSupport.html#isOneIndexedParameters()\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/commons/docs/current/api/org/&hellip;</a>"},{"owner":{"account_id":29172742,"reputation":3,"user_id":22348703,"display_name":"rben"},"score":0,"creation_date":1697465273,"post_id":77293899,"comment_id":136279833,"body_markdown":"you are right @AndreiTitov , than you, in fact I didn&#39;t pass pageable in web request","body":"you are right @AndreiTitov , than you, in fact I didn&#39;t pass pageable in web request"}],"owner":{"account_id":29172742,"reputation":3,"user_id":22348703,"display_name":"rben"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697306506,"creation_date":1697305625,"question_id":77293899,"body_markdown":"I struggle to make the spring data pagination begins from 1:\r\n\r\nHere is my database configuration:\r\n\r\n    @Configuration\r\n    @EnableJpaRepositories(basePackages= &quot;myPackage&quot;,entityManagerFactoryRef=&quot;emf&quot;)\r\n              public class DatabaseConfiguration {\r\n    }\r\n \r\nWhe I try to set the property : \r\n  \r\n    spring:\r\n      data:\r\n        web:\r\n          pageable:\r\n            one-indexed-parameters: true\r\n\r\nOr add:\r\n\r\n     @Bean\r\n     PageableHandlerMethodArgumentResolverCustomizer \r\n     pageableResolverCustomizer() {\r\n        return pageableResolver -&gt; \r\n            pageableResolver.setOneIndexedParameters(true);\r\n     }\r\n\r\nThe pagination still begins from 0.\r\n \r\nMy spring boot version is 3.0.6 and I have this starter in the pom.xml\r\nspring.boot.starter.data.jpa: 3.0.6\r\n \r\nDo you have any idea how make spring data pagination starts from 1?\r\nThank you","title":"How to make spring data pagination starts from 1 and not from 0","body":"<p>I struggle to make the spring data pagination begins from 1:</p>\n<p>Here is my database configuration:</p>\n<pre><code>@Configuration\n@EnableJpaRepositories(basePackages= &quot;myPackage&quot;,entityManagerFactoryRef=&quot;emf&quot;)\n          public class DatabaseConfiguration {\n}\n</code></pre>\n<p>Whe I try to set the property :</p>\n<pre><code>spring:\n  data:\n    web:\n      pageable:\n        one-indexed-parameters: true\n</code></pre>\n<p>Or add:</p>\n<pre><code> @Bean\n PageableHandlerMethodArgumentResolverCustomizer \n pageableResolverCustomizer() {\n    return pageableResolver -&gt; \n        pageableResolver.setOneIndexedParameters(true);\n }\n</code></pre>\n<p>The pagination still begins from 0.</p>\n<p>My spring boot version is 3.0.6 and I have this starter in the pom.xml\nspring.boot.starter.data.jpa: 3.0.6</p>\n<p>Do you have any idea how make spring data pagination starts from 1?\nThank you</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697363188,"post_id":77293853,"comment_id":136268282,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1697488645,"post_id":77293853,"comment_id":136283775,"body_markdown":"Does _Window &gt; Perspective &gt; Rest Perspective..._ fix it?","body":"Does <i>Window &gt; Perspective &gt; Rest Perspective...</i> fix it?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697306427,"creation_date":1697306427,"answer_id":77293944,"question_id":77293853,"body_markdown":"The main eclipse screen is not called the &#39;workspace&#39;, but I can see how that can be confusing.\r\n\r\nIn eclipse parlance, a &#39;workspace&#39; is, more or less, a working folder: The place on disk where eclipse stores everything. When you start eclipse, you choose your workspace directory. This should optimally be a subdir of your user account&#39;s directory on your OS (for example, on macs, `/Users/yourname/workspace` is good, on windows perhaps `C:\\Users\\yourname\\workspace`, on linuxen for example `/home/yourname/workspace`).\r\n\r\nThis dir will contain a few eclipse settings files (there will be a subdir named `.settings` inside the workspace dir), and is the default location for every project you make (when you pick `File &gt; New...` from the menu and make a new project, the directory it suggests is inside this workspace, and I recommend you put your projects there.\r\n\r\nYou can ask eclipse to not ask for workspace folder on startup. This is in settings (so if you want that back to fix this problem, you can go into eclipse&#39;s settings and change this, or you can just directly do so: In the `File` menu there&#39;s a `Switch workspace` option. Choose that and fix your path.\r\n\r\nI&#39;m guessing you&#39;re getting this error because you did this sequence of events:\r\n\r\n* You started eclipse. It asked for a workspace\r\n* You typed something in there that is an invalid path, or, it was valid at the time but does not currently exist: You deleted it, moved it, or you created it on a volume that isn&#39;t currently present (for example, you put your workspace on a USB stick and the stick isn&#39;t currently in the machine).\r\n* You also checked the &#39;always use this workspace and no longer ask for workspace on startup&#39; checkbox.\r\n\r\nAnd now we&#39;re here.\r\n\r\nWithout a workspace dir eclipse doesn&#39;t know which projects exist. You can&#39;t use eclipse if it has no workspace dir. Thus, in eclipse, File - Change workspace, and fix that first. As part of picking a workspace, eclipse effectively reboots so don&#39;t worry about that.\r\n\r\nThe layout of an eclipse window is called a &#39;perspective&#39;. Yours is currently entirely blank (your question said: &quot;Blank workspace&quot;. What you meant was &quot;blank perspective&quot;).\r\n\r\nI think that&#39;s just because eclipse has no workspace so doesn&#39;t know what to show in this perspective, or even which perspectives are available. Hence, I think you&#39;ll be fine once you do the above.\r\n\r\nHowever, if not: You&#39;ve been closing views in the default perspective and eclipse remembers this stuff. You&#39;ll need to re-open them. You do this by picking all the various relevant views from the &#39;Window &gt; View&#39; menu, or just go Window &gt; Reset perspective, to get the factory default java perspective (with the &#39;outline&#39;, &#39;package explorer&#39;, &#39;console&#39;, &#39;problems&#39;, and so on views open).\r\n\r\nIf you still see no windows, then you&#39;ve been closing views. Eclipse remembers (but, it remembers by writing a settings file to the workspace so I doubt you&#39;ll still see a perspective \r\nOnce you&#39;ve done that, _if_ eclipse ","title":"Workspace is Closed Eclipse","body":"<p>The main eclipse screen is not called the 'workspace', but I can see how that can be confusing.</p>\n<p>In eclipse parlance, a 'workspace' is, more or less, a working folder: The place on disk where eclipse stores everything. When you start eclipse, you choose your workspace directory. This should optimally be a subdir of your user account's directory on your OS (for example, on macs, <code>/Users/yourname/workspace</code> is good, on windows perhaps <code>C:\\Users\\yourname\\workspace</code>, on linuxen for example <code>/home/yourname/workspace</code>).</p>\n<p>This dir will contain a few eclipse settings files (there will be a subdir named <code>.settings</code> inside the workspace dir), and is the default location for every project you make (when you pick <code>File &gt; New...</code> from the menu and make a new project, the directory it suggests is inside this workspace, and I recommend you put your projects there.</p>\n<p>You can ask eclipse to not ask for workspace folder on startup. This is in settings (so if you want that back to fix this problem, you can go into eclipse's settings and change this, or you can just directly do so: In the <code>File</code> menu there's a <code>Switch workspace</code> option. Choose that and fix your path.</p>\n<p>I'm guessing you're getting this error because you did this sequence of events:</p>\n<ul>\n<li>You started eclipse. It asked for a workspace</li>\n<li>You typed something in there that is an invalid path, or, it was valid at the time but does not currently exist: You deleted it, moved it, or you created it on a volume that isn't currently present (for example, you put your workspace on a USB stick and the stick isn't currently in the machine).</li>\n<li>You also checked the 'always use this workspace and no longer ask for workspace on startup' checkbox.</li>\n</ul>\n<p>And now we're here.</p>\n<p>Without a workspace dir eclipse doesn't know which projects exist. You can't use eclipse if it has no workspace dir. Thus, in eclipse, File - Change workspace, and fix that first. As part of picking a workspace, eclipse effectively reboots so don't worry about that.</p>\n<p>The layout of an eclipse window is called a 'perspective'. Yours is currently entirely blank (your question said: &quot;Blank workspace&quot;. What you meant was &quot;blank perspective&quot;).</p>\n<p>I think that's just because eclipse has no workspace so doesn't know what to show in this perspective, or even which perspectives are available. Hence, I think you'll be fine once you do the above.</p>\n<p>However, if not: You've been closing views in the default perspective and eclipse remembers this stuff. You'll need to re-open them. You do this by picking all the various relevant views from the 'Window &gt; View' menu, or just go Window &gt; Reset perspective, to get the factory default java perspective (with the 'outline', 'package explorer', 'console', 'problems', and so on views open).</p>\n<p>If you still see no windows, then you've been closing views. Eclipse remembers (but, it remembers by writing a settings file to the workspace so I doubt you'll still see a perspective\nOnce you've done that, <em>if</em> eclipse</p>\n"}],"owner":{"account_id":29119452,"reputation":1,"user_id":22307321,"display_name":"Larcury"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697306427,"creation_date":1697304730,"question_id":77293853,"body_markdown":"I opened the Eclipse app and then I got this error message:\r\n[Error Message](https://i.stack.imgur.com/Yiabt.png)\r\nAnd I can&#39;t do anything on the blank workspace:\r\n[Blank Workspace](https://i.stack.imgur.com/ODEH0.png)\r\nI opened Eclipse a few days ago and it worked normally.\r\nI didn&#39;t do/know anything about plugins.\r\n\r\nI tried to import a project so I can edit the project but that didn&#39;t work.\r\nI was trying to open a GUI from Swing this morning and I went to the eclipse-workspace, I thought I can just open a class like in Python, it doesn&#39;t work so I opened the Eclipse app and I got the error.\r\nHow to solve this problem?","title":"Workspace is Closed Eclipse","body":"<p>I opened the Eclipse app and then I got this error message:\n<a href=\"https://i.stack.imgur.com/Yiabt.png\" rel=\"nofollow noreferrer\">Error Message</a>\nAnd I can't do anything on the blank workspace:\n<a href=\"https://i.stack.imgur.com/ODEH0.png\" rel=\"nofollow noreferrer\">Blank Workspace</a>\nI opened Eclipse a few days ago and it worked normally.\nI didn't do/know anything about plugins.</p>\n<p>I tried to import a project so I can edit the project but that didn't work.\nI was trying to open a GUI from Swing this morning and I went to the eclipse-workspace, I thought I can just open a class like in Python, it doesn't work so I opened the Eclipse app and I got the error.\nHow to solve this problem?</p>\n"},{"tags":["java","scala","cygwin","command-line-arguments","glob"],"comments":[{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1462396011,"post_id":37037375,"comment_id":61626132,"body_markdown":"The problem goes away if testing in a Linux session.  Also, when calling scala.bat from a CMD.EXE session, the asterisk can be double quoted to avoid the problem.  This may indicate an opportunity to fix this in the bash scala script, since scala.bat can be made to work.","body":"The problem goes away if testing in a Linux session.  Also, when calling scala.bat from a CMD.EXE session, the asterisk can be double quoted to avoid the problem.  This may indicate an opportunity to fix this in the bash scala script, since scala.bat can be made to work."},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1462564801,"post_id":37037375,"comment_id":61705749,"body_markdown":"see https://msdn.microsoft.com/en-US/library/ms235497(v=VS.80).aspx","body":"see <a href=\"https://msdn.microsoft.com/en-US/library/ms235497(v=VS.80).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-US/library/ms235497(v=VS.80).aspx</a>"},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1462564917,"post_id":37037375,"comment_id":61705794,"body_markdown":"This may be the source of the bug: https://bugs.openjdk.java.net/browse/JDK-7167744 although It refers to java 1.7 and the problem still exists in 1.8 latest as of May 2016.","body":"This may be the source of the bug: <a href=\"https://bugs.openjdk.java.net/browse/JDK-7167744\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-7167744</a> although It refers to java 1.7 and the problem still exists in 1.8 latest as of May 2016."},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":1,"creation_date":1462566163,"post_id":37037375,"comment_id":61706382,"body_markdown":"See this for more info: http://stackoverflow.com/questions/25948706","body":"See this for more info: <a href=\"http://stackoverflow.com/questions/25948706\">stackoverflow.com/questions/25948706</a>"},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1512583281,"post_id":37037375,"comment_id":82320507,"body_markdown":"As of java 1.8.0_52, it is now possible to specify &quot;-classpath &#39;lib\\\\*&#39;&quot; although it&#39;s necessary to use a backslash (perhaps this works in earlier java versions, I haven&#39;t tested that).  It&#39;s odd because java command line accepts forward slashes for classpaths in general, just not in this specific case.","body":"As of java 1.8.0_52, it is now possible to specify &quot;-classpath &#39;lib\\*&#39;&quot; although it&#39;s necessary to use a backslash (perhaps this works in earlier java versions, I haven&#39;t tested that).  It&#39;s odd because java command line accepts forward slashes for classpaths in general, just not in this specific case."}],"answers":[{"comments":[{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1462567770,"post_id":37081167,"comment_id":61707132,"body_markdown":"because this is a workaround rather than a fix, I&#39;ll wait for a (hopefully) better answer.","body":"because this is a workaround rather than a fix, I&#39;ll wait for a (hopefully) better answer."},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1462568753,"post_id":37081167,"comment_id":61707582,"body_markdown":"BTW, I consider the jvm bug to be quite severe, as it prevents the use of the &quot;all jars below a directory&quot; classpath shortcut, e.g., -cp &quot;./lib/*&quot; in a windows bash shell.","body":"BTW, I consider the jvm bug to be quite severe, as it prevents the use of the &quot;all jars below a directory&quot; classpath shortcut, e.g., -cp &quot;./lib/*&quot; in a windows bash shell."},{"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"score":0,"creation_date":1512583426,"post_id":37081167,"comment_id":82320598,"body_markdown":"&quot;all jars below a directory&quot; idiom verified to work in Windows with java 1.8.0_52 (possibly earlier) but only if backslash is used.  Forward slash works in windows java for specifying classpath in general, but not for this particular idiom.","body":"&quot;all jars below a directory&quot; idiom verified to work in Windows with java 1.8.0_52 (possibly earlier) but only if backslash is used.  Forward slash works in windows java for specifying classpath in general, but not for this particular idiom."}],"tags":[],"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697306166,"creation_date":1462567683,"answer_id":37081167,"question_id":37037375,"body_markdown":"This problem is caused by a known bug in the JVM, documented here:\r\n\r\nhttps://bugs.openjdk.java.net/browse/JDK-8131329\r\n\r\nIn the meantime, to get around the problem, I&#39;m passing arguments via an environment variable.\r\n\r\nHere&#39;s what happens inside my &quot;myScalaScript&quot;:\r\n\r\n    #!/usr/bin/env scala\r\n    for( arg &lt;- args.toList ::: cpArgs ){\r\n      printf(&quot;[%s]\\n&quot;,arg)\r\n    }\r\n    \r\n    lazy val cpArgs = System.getenv(&quot;CP_ARGS&quot;) match {\r\n      case null =&gt; Nil\r\n      case text =&gt; text.split(&quot;[;|]+&quot;).toList\r\n    }\r\n\r\nHere&#39;s how the script is invoked from bash:\r\n    CP_ARGS=&quot;.|./lib/*&quot; myScalaScript [possibly other-non-problematic-args]\r\n\r\nand here&#39;s what it prints in all tested environments:\r\n\r\n    [.]\r\n    [./lib/*]\r\n\r\nHere&#39;s a better fix, that hides all the nastiness inside the script, and is a bit more conventional in the main loop.\r\n\r\nThe new script:\r\n\r\n    #!/bin/bash\r\n    export CP_ARGS=&quot;$@&quot;\r\n    exec $(which scala) &quot;$@&quot;\r\n    !#\r\n    // vim: ft=scala\r\n    \r\n    for( arg &lt;- cpArgs ){\r\n      printf(&quot;[%s]\\n&quot;,arg)\r\n    }\r\n    \r\n    lazy val cpArgs = System.getenv(&quot;CP_ARGS&quot;) match {\r\n      case null =&gt; Nil\r\n      case text =&gt; text.split(&quot;[;|]+&quot;).toList\r\n    }","title":"trailing asterisks on windows JVM command-line args are globbed in cygwin bash shell","body":"<p>This problem is caused by a known bug in the JVM, documented here:</p>\n<p><a href=\"https://bugs.openjdk.java.net/browse/JDK-8131329\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8131329</a></p>\n<p>In the meantime, to get around the problem, I'm passing arguments via an environment variable.</p>\n<p>Here's what happens inside my &quot;myScalaScript&quot;:</p>\n<pre><code>#!/usr/bin/env scala\nfor( arg &lt;- args.toList ::: cpArgs ){\n  printf(&quot;[%s]\\n&quot;,arg)\n}\n\nlazy val cpArgs = System.getenv(&quot;CP_ARGS&quot;) match {\n  case null =&gt; Nil\n  case text =&gt; text.split(&quot;[;|]+&quot;).toList\n}\n</code></pre>\n<p>Here's how the script is invoked from bash:\nCP_ARGS=&quot;.|./lib/*&quot; myScalaScript [possibly other-non-problematic-args]</p>\n<p>and here's what it prints in all tested environments:</p>\n<pre><code>[.]\n[./lib/*]\n</code></pre>\n<p>Here's a better fix, that hides all the nastiness inside the script, and is a bit more conventional in the main loop.</p>\n<p>The new script:</p>\n<pre><code>#!/bin/bash\nexport CP_ARGS=&quot;$@&quot;\nexec $(which scala) &quot;$@&quot;\n!#\n// vim: ft=scala\n\nfor( arg &lt;- cpArgs ){\n  printf(&quot;[%s]\\n&quot;,arg)\n}\n\nlazy val cpArgs = System.getenv(&quot;CP_ARGS&quot;) match {\n  case null =&gt; Nil\n  case text =&gt; text.split(&quot;[;|]+&quot;).toList\n}\n</code></pre>\n"}],"owner":{"account_id":338172,"reputation":634,"user_id":666886,"display_name":"philwalk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":37081167,"answer_count":1,"score":1,"last_activity_date":1697306166,"creation_date":1462393566,"question_id":37037375,"body_markdown":"UPDATE: this problem occurs when running JVM-based command line tools in a cygwin bash shell. Although I originally thought this was related to Scala, it&#39;s specific to the Windows JVM.  It might be the result of breaking changes in MSDN libraries, see comments below.\r\n\r\nI&#39;m writing a scala utility script that takes a literal java classpath entry and analyzes it.  I&#39;d like my main method to be able to receive command line arguments with a trailing asterisk, e.g, &quot;/*&quot;, but there seems to be no way to do it when running in a cygwin bash session.\r\n\r\nHere&#39;s my scala test script, which displays command line arguments:\r\n\r\n    # saved to a file called &quot;dumpargs.sc&quot;\r\n    args.foreach { printf(&quot;[%s]\\n&quot;,_) }\r\n\r\nI&#39;d like to be able to call it with an asterisk as an argument, like this:\r\n\r\n    scala -howtorun:script dumpargs.sc &quot;*&quot;\r\n\r\nWhen I run this in a CMD.EXE shell, it does what I expect:\r\n\r\n    c:\\cygwin&gt; scala.bat -howtorun:script dumpargs.sc &quot;*&quot;\r\n    arg[*]\r\n    c:\\cygwin&gt;\r\n\r\nLikewise, when tested in a Linux bash shell, the sole command line argument consists of a single bare asterisk, again as expected.\r\n\r\nA comparable command-line args dumper program written in C prints a single bare asterisk, regardless of which shell it is run from (CMD.EXE or bash).\r\n\r\nBut when the same test is run in a cygwin bash shell, the asterisk is globbed, listing all the files in the current directory.  The globbing happens somewhere downstream from by bash, since otherwise, the C dumper program would have also failed.\r\n\r\nThe problem is subtle, it happens somewhere in the JVM after it receives the asterisk argument and before the JVM calls the main method.  But the JVM only globs the asterisk based on something in the running shell environment.\r\n\r\nIn some ways, this behaviour is a good thing, since it supports script-portability, by hiding differences in the runtime environments, Windows versus Linux/OSX, etc (unix-like shells tend to glob, whereas CMD.EXE doesn&#39;t).\r\n\r\nAll efforts to work around the problem so far have failed:\r\n\r\nEven if I&#39;m allow for os-dependent tricks,  I&#39;ve tried all of the following (from a bash session):\r\n\r\n    &quot;*&quot; &#39;*&#39; &#39;\\*&#39; &#39;\\\\*&#39;\r\n\r\nThe following almost works, but the half-quotes arrive as part of the argument value and must then been stripped away by my program:\r\n\r\n    &quot;&#39;*&#39;&quot;\r\n\r\nSame problem, but different kind of unwanted quotes get through:\r\n\r\n    &#39;&quot;*&quot;&#39; or \\&quot;*\\&quot;\r\n\r\nWhat&#39;s needed is a system property, or some other mechanism to disable globbing.\r\n\r\nBy the way, one variation of this problem is the inability to take advantage of the nice way a directory of jar files can be added to the classpath (since java 1.6), by specifying &quot;-classpath &#39;lib/*&#39;&quot;.\r\n\r\nThere needs to be a system property I can set to disable this behavior when running in a shell environment that provide its&#39; own globbing.","title":"trailing asterisks on windows JVM command-line args are globbed in cygwin bash shell","body":"<p>UPDATE: this problem occurs when running JVM-based command line tools in a cygwin bash shell. Although I originally thought this was related to Scala, it's specific to the Windows JVM.  It might be the result of breaking changes in MSDN libraries, see comments below.</p>\n\n<p>I'm writing a scala utility script that takes a literal java classpath entry and analyzes it.  I'd like my main method to be able to receive command line arguments with a trailing asterisk, e.g, \"/*\", but there seems to be no way to do it when running in a cygwin bash session.</p>\n\n<p>Here's my scala test script, which displays command line arguments:</p>\n\n<pre><code># saved to a file called \"dumpargs.sc\"\nargs.foreach { printf(\"[%s]\\n\",_) }\n</code></pre>\n\n<p>I'd like to be able to call it with an asterisk as an argument, like this:</p>\n\n<pre><code>scala -howtorun:script dumpargs.sc \"*\"\n</code></pre>\n\n<p>When I run this in a CMD.EXE shell, it does what I expect:</p>\n\n<pre><code>c:\\cygwin&gt; scala.bat -howtorun:script dumpargs.sc \"*\"\narg[*]\nc:\\cygwin&gt;\n</code></pre>\n\n<p>Likewise, when tested in a Linux bash shell, the sole command line argument consists of a single bare asterisk, again as expected.</p>\n\n<p>A comparable command-line args dumper program written in C prints a single bare asterisk, regardless of which shell it is run from (CMD.EXE or bash).</p>\n\n<p>But when the same test is run in a cygwin bash shell, the asterisk is globbed, listing all the files in the current directory.  The globbing happens somewhere downstream from by bash, since otherwise, the C dumper program would have also failed.</p>\n\n<p>The problem is subtle, it happens somewhere in the JVM after it receives the asterisk argument and before the JVM calls the main method.  But the JVM only globs the asterisk based on something in the running shell environment.</p>\n\n<p>In some ways, this behaviour is a good thing, since it supports script-portability, by hiding differences in the runtime environments, Windows versus Linux/OSX, etc (unix-like shells tend to glob, whereas CMD.EXE doesn't).</p>\n\n<p>All efforts to work around the problem so far have failed:</p>\n\n<p>Even if I'm allow for os-dependent tricks,  I've tried all of the following (from a bash session):</p>\n\n<pre><code>\"*\" '*' '\\*' '\\\\*'\n</code></pre>\n\n<p>The following almost works, but the half-quotes arrive as part of the argument value and must then been stripped away by my program:</p>\n\n<pre><code>\"'*'\"\n</code></pre>\n\n<p>Same problem, but different kind of unwanted quotes get through:</p>\n\n<pre><code>'\"*\"' or \\\"*\\\"\n</code></pre>\n\n<p>What's needed is a system property, or some other mechanism to disable globbing.</p>\n\n<p>By the way, one variation of this problem is the inability to take advantage of the nice way a directory of jar files can be added to the classpath (since java 1.6), by specifying \"-classpath 'lib/*'\".</p>\n\n<p>There needs to be a system property I can set to disable this behavior when running in a shell environment that provide its' own globbing.</p>\n"},{"tags":["java","path-2d"],"answers":[{"tags":[],"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697305641,"creation_date":1697305641,"answer_id":77293900,"question_id":77293673,"body_markdown":"`Path2D` is an abstract class. You can not create object of an abstract class or interface. There are two concrete implementations of `Path2D` inside `Path2D` class. [Path2D.Double](https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Path2D.Double.html) and [Path2D.Float](https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Path2D.Float.html). You can use any of them based on your precision level of your coordinates.\r\n\r\n```java\r\nPath2D path = new Path2D.Double();\r\n```","title":"Cannot instantiate the type Path2D","body":"<p><code>Path2D</code> is an abstract class. You can not create object of an abstract class or interface. There are two concrete implementations of <code>Path2D</code> inside <code>Path2D</code> class. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Path2D.Double.html\" rel=\"nofollow noreferrer\">Path2D.Double</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/geom/Path2D.Float.html\" rel=\"nofollow noreferrer\">Path2D.Float</a>. You can use any of them based on your precision level of your coordinates.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path2D path = new Path2D.Double();\n</code></pre>\n"}],"owner":{"account_id":29671814,"reputation":13,"user_id":22740869,"display_name":"Nolan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77293900,"answer_count":1,"score":1,"last_activity_date":1697305641,"creation_date":1697301280,"question_id":77293673,"body_markdown":"I am trying to create a drawing of a triangle with the path2D class and when I try to create my triangle, it says that &quot;Cannot instantiate the type Path2D&quot;, I&#39;m not really sure what I did wrong here if anyone can help.\r\n\r\n\r\n```\r\npackage houseGoesVroom;\r\n\r\nimport java.awt.Graphics2D;\r\nimport java.awt.geom.*;\r\n\r\npublic class HousePlans \r\n{\r\n\t//instance variables\r\n\tprivate int x;\r\n\tprivate int y;\r\n\t\r\n\t//constructor\r\n\tpublic HousePlans(int cornerX, int cornerY)\r\n\t{\r\n\t\tx = cornerX;\r\n\t\ty = cornerY;\r\n\t}\r\n\t\r\n\t//draw method\r\n\tpublic void draw(Graphics2D g2)\r\n\t{\r\n\t\tint r = (int) (256 * Math.random());\r\n\t\tint g = (int) (256 * Math.random());\r\n\t\tint b = (int) (256 * Math.random());\r\n\t\t\r\n\t\tg2.fillRect(0, 40, 80, 120);\r\n\t\t\r\n\t\tPath2D path = new Path2D();\r\n\t    path.moveTo(0,40);\r\n\t    path.lineTo(40,0);\r\n\t    path.lineTo(80, 40); \r\n\t    path.closePath();\r\n\t    g2.draw(path);\r\n\t}\r\n}\r\n\r\n```\r\n","title":"Cannot instantiate the type Path2D","body":"<p>I am trying to create a drawing of a triangle with the path2D class and when I try to create my triangle, it says that &quot;Cannot instantiate the type Path2D&quot;, I'm not really sure what I did wrong here if anyone can help.</p>\n<pre><code>package houseGoesVroom;\n\nimport java.awt.Graphics2D;\nimport java.awt.geom.*;\n\npublic class HousePlans \n{\n    //instance variables\n    private int x;\n    private int y;\n    \n    //constructor\n    public HousePlans(int cornerX, int cornerY)\n    {\n        x = cornerX;\n        y = cornerY;\n    }\n    \n    //draw method\n    public void draw(Graphics2D g2)\n    {\n        int r = (int) (256 * Math.random());\n        int g = (int) (256 * Math.random());\n        int b = (int) (256 * Math.random());\n        \n        g2.fillRect(0, 40, 80, 120);\n        \n        Path2D path = new Path2D();\n        path.moveTo(0,40);\n        path.lineTo(40,0);\n        path.lineTo(80, 40); \n        path.closePath();\n        g2.draw(path);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","liferay"],"owner":{"account_id":29671616,"reputation":1,"user_id":22740720,"display_name":"Abdallateef Abdallah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697304226,"creation_date":1697301203,"question_id":77293666,"body_markdown":" GetDataResourceImpl extends BaseGetDataResourceImp\r\n\r\n\r\ni can&#39;i access this class BaseGetDataResourceImp to create object ? \r\n\r\n    `package com.lr.IST.Get.Data.internal.resource.v1_0_0;\r\n\r\n    import com.lr.IST.Get.Data.resource.v1_0_0.GetDataResource;\r\n\r\n    import org.osgi.service.component.annotations.Component;\r\n    import org.osgi.service.component.annotations.ServiceScope;\r\n\r\n    /**\r\n     * @author abdallateef\r\n     */\r\n    @Component(\r\n\tproperties = &quot;OSGI-INF/liferay/rest/v1_0_0/get-data.properties&quot;,\r\n\tscope = ServiceScope.PROTOTYPE, service = GetDataResource.class\r\n    )\r\n    public class GetDataResourceImpl extends BaseGetDataResourceImpl {\r\n\r\n\r\n    }`\r\n\r\n\r\nthis code come from yaml file   \r\n\r\n\r\n    components:\r\n        schemas:\r\n            GetDataModule:\r\n                type: object\r\n                properties:\r\n                  name:\r\n                    type: string\r\n                  counter:\r\n                    type: integer\r\n                    format: int64\r\n            GetDataResponse:\r\n              type: array\r\n              items:\r\n                type: object\r\n                properties:\r\n                  name:\r\n                    type: string\r\n                  counter:\r\n                    type: integer\r\n    paths:\r\n        &quot;/getData&quot;:\r\n            post:\r\n                operationId: getData\r\n                tags: [ &quot;GetDataResponse&quot; ]\r\n                description: OK\r\n                requestBody:\r\n                    content:\r\n                        application/json:\r\n                            schema:\r\n                                $ref: &#39;#/components/schemas/GetDataModule&#39;\r\n                        application/xml:\r\n                            schema:\r\n                                $ref: &#39;#/components/schemas/GetDataModule&#39;\r\n                responses:\r\n                    &#39;200&#39;:\r\n                        description: OK\r\n                        content:\r\n                            application/json:\r\n                                schema:\r\n                     $ref: &#39;#/components/schemas/GetDataResponse&#39;\r\n                            application/xml: \r\n                                schema:\r\n                     $ref: &#39;#/components/schemas/GetDataResponse&#39;\r\n\r\n\r\nwhat is wrong ?  \r\n\r\n\r\n\r\njust comment I have added some code and modified several parts of it, but the post cannot be submitted. It is fine if this message appears when asking a new question, but it appears when I am trying to resubmit my edited post.\r\n\r\n","title":"LifeRay devStudio can&#39;t access BaseGetDataResourceImpl to create object from there why?","body":"<p>GetDataResourceImpl extends BaseGetDataResourceImp</p>\n<p>i can'i access this class BaseGetDataResourceImp to create object ?</p>\n<pre><code>`package com.lr.IST.Get.Data.internal.resource.v1_0_0;\n\nimport com.lr.IST.Get.Data.resource.v1_0_0.GetDataResource;\n\nimport org.osgi.service.component.annotations.Component;\nimport org.osgi.service.component.annotations.ServiceScope;\n\n/**\n * @author abdallateef\n */\n@Component(\nproperties = &quot;OSGI-INF/liferay/rest/v1_0_0/get-data.properties&quot;,\nscope = ServiceScope.PROTOTYPE, service = GetDataResource.class\n)\npublic class GetDataResourceImpl extends BaseGetDataResourceImpl {\n\n\n}`\n</code></pre>\n<p>this code come from yaml file</p>\n<pre><code>components:\n    schemas:\n        GetDataModule:\n            type: object\n            properties:\n              name:\n                type: string\n              counter:\n                type: integer\n                format: int64\n        GetDataResponse:\n          type: array\n          items:\n            type: object\n            properties:\n              name:\n                type: string\n              counter:\n                type: integer\npaths:\n    &quot;/getData&quot;:\n        post:\n            operationId: getData\n            tags: [ &quot;GetDataResponse&quot; ]\n            description: OK\n            requestBody:\n                content:\n                    application/json:\n                        schema:\n                            $ref: '#/components/schemas/GetDataModule'\n                    application/xml:\n                        schema:\n                            $ref: '#/components/schemas/GetDataModule'\n            responses:\n                '200':\n                    description: OK\n                    content:\n                        application/json:\n                            schema:\n                 $ref: '#/components/schemas/GetDataResponse'\n                        application/xml: \n                            schema:\n                 $ref: '#/components/schemas/GetDataResponse'\n</code></pre>\n<p>what is wrong ?</p>\n<p>just comment I have added some code and modified several parts of it, but the post cannot be submitted. It is fine if this message appears when asking a new question, but it appears when I am trying to resubmit my edited post.</p>\n"},{"tags":["java","spring","hibernate","jpa","orm"],"answers":[{"tags":[],"owner":{"account_id":22040935,"reputation":33,"user_id":16306728,"display_name":"Vanblerk Havenga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697303490,"creation_date":1697204497,"answer_id":77288238,"question_id":77285881,"body_markdown":"I have realized my mistake. There was code elsewhere in my code base that was manually setting the `lastUpdateDatetime` on my entities to `ZonedDatetime.now()`. \r\n\r\nThis naturally caused my `@PreUpdate` function to always fire and always set my `lastUpdateDatetime` and `username`. \r\n\r\nI removed the code where I manually set my `lastUpdateDatetime` and made use of the `@UpdateTimestamp` annotation on my `lastUpdateDatetime` and a `@PreUpdate` function on my entities to set the `username`.\r\n\r\nUsing this approach I was able to update my `lastUpdateDatetime` and `username` only on entities that had undergone a change.","title":"Update nested entities in isolation from one another using JPA/Hibernate/Spring Boot","body":"<p>I have realized my mistake. There was code elsewhere in my code base that was manually setting the <code>lastUpdateDatetime</code> on my entities to <code>ZonedDatetime.now()</code>.</p>\n<p>This naturally caused my <code>@PreUpdate</code> function to always fire and always set my <code>lastUpdateDatetime</code> and <code>username</code>.</p>\n<p>I removed the code where I manually set my <code>lastUpdateDatetime</code> and made use of the <code>@UpdateTimestamp</code> annotation on my <code>lastUpdateDatetime</code> and a <code>@PreUpdate</code> function on my entities to set the <code>username</code>.</p>\n<p>Using this approach I was able to update my <code>lastUpdateDatetime</code> and <code>username</code> only on entities that had undergone a change.</p>\n"}],"owner":{"account_id":22040935,"reputation":33,"user_id":16306728,"display_name":"Vanblerk Havenga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77288238,"answer_count":1,"score":0,"last_activity_date":1697303490,"creation_date":1697182783,"question_id":77285881,"body_markdown":"I have an entity (EntityA) with another entity (EntityB) nested inside it. I want to update the **username** and **lastUpdateDatetime** of each entity in isolation if there is a change on a specific entity, without the other entity being updated.\r\n\r\ni.e.\r\n\r\n - if a change is made on entityB, only the username and lastUpdateDatetime on entityB should be updated\r\n - if a change is made on entityA, only the username and lastUpdateDatetime on entityA should be updated\r\n\r\nHere are my 2 entities:\r\n\r\nEntityA:\r\n\r\n```\r\n\r\n    @Entity(name = &quot;EntityA&quot;)\r\n    public class EntityA {\r\n    \t\r\n    \t@Column(name = &quot;EntityAColumn1&quot;)\r\n    \tprivate String entityAColumn1;\r\n    \r\n    \t@Column(name = &quot;EntityAColumn2&quot;)\r\n    \tprivate String entityAColumn2;     \r\n    \r\n        @OneToOne(cascade = CascadeType.ALL)\r\n        @JoinColumn(name = &quot;EntityA_EntityB&quot;)\r\n        private EntityB entityB;\r\n    \r\n        @Column(name = &quot;username&quot;, length = 100)\r\n        private String username;\r\n    \r\n        @Column(name = &quot;last_update_datetime&quot;)\r\n        private ZonedDateTime lastUpdateDatetime;\r\n    }\r\n\r\n```\r\n\r\nEntityB:\r\n\r\n```\r\n\r\n    @Entity(name = &quot;EntityB&quot;)\r\n    public class EntityB {\r\n    \t\r\n    \t@Column(name = &quot;EntityBColumn1&quot;)\r\n    \tprivate String entityBColumn1;\r\n    \r\n    \t@Column(name = &quot;EntityBColumn2&quot;)\r\n    \tprivate String entityBColumn2;     \r\n    \r\n        @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;EntityB&quot;, fetch = FetchType.LAZY)\r\n        private EntityA entityA;\r\n    \r\n        @Column(name = &quot;username&quot;, length = 100)\r\n        private String username;\r\n    \r\n        @Column(name = &quot;last_update_datetime&quot;)\r\n        private ZonedDateTime lastUpdateDatetime;\r\n    }\r\n\r\n```\r\n\r\n**Note that there is a one-to-one relationship between the entities.**\r\n\r\nHere is my controller class for updating the entity:\r\n\r\n```\r\n\r\n    @RestController\r\n    public class EntityAController {\r\n    \r\n    \tprivate final EntityARepository entityARepository;\r\n    \r\n    \t@PutMapping(&quot;/update&quot;)\r\n    \tpublic void updateEntityA(\r\n    \t\t@RequestBody ObjectA objectA,\r\n    \t\t@RequestHeader(&quot;username&quot;) String username\r\n    \t) {\r\n    \t\tEntityA entityA = EntityMapper.mapToEntity(objectA);\r\n    \r\n    \t\tentityARepository.save(entityA);\r\n    \t}\r\n    }\r\n\r\n```\r\n\r\n**EntityMapper.mapToEntity(objectA); simply maps my web request to my entity**\r\n\r\nMy repository class looks as follows:\r\n\r\n```\r\n\r\n    @Repository(&quot;EntityARepository&quot;)\r\n    public interface ShippingOrderRepository extends CrudRepository&lt;EntityA, Long&gt; {\r\n    \t\r\n    }\r\n\r\n```\r\n\r\nNow let&#39;s say my database entry looks like this before an update:\r\n\r\n**NOTE: My database is relational, I&#39;m just writing it in json format for readability**\r\n\r\n```\r\n\r\n    {\r\n    \t&quot;entityAColumn1&quot;: &quot;val1&quot;,\r\n    \t&quot;entityAColumn2&quot;: &quot;val2&quot;,\r\n    \t&quot;entityB&quot;: {\r\n    \t\t&quot;entityBColumn1&quot;: &quot;val3&quot;,\r\n    \t\t&quot;entityBColumn2&quot;: &quot;val4&quot;,\r\n    \t\t&quot;username&quot;: &quot;username1&quot;,\r\n    \t\t&quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\r\n    \t},\r\n    \t&quot;username&quot;: &quot;username1&quot;,\r\n    \t&quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\r\n    }\r\n\r\n```\r\n\r\nI then send in the following request to my controller:\r\n\r\n```\r\n\r\n    {\r\n    \t&quot;entityAColumn1&quot;: &quot;val1&quot;,\r\n    \t&quot;entityAColumn2&quot;: &quot;val2&quot;,\r\n    \t&quot;entityB&quot;: {\r\n    \t\t&quot;entityBColumn1&quot;: &quot;val3&quot;,\r\n    \t\t&quot;entityBColumn2&quot;: &quot;val5&quot;, **VALUE HAS CHANGED**\r\n    \t\t&quot;username&quot;: &quot;username1&quot;,\r\n    \t\t&quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\r\n    \t},\r\n    \t&quot;username&quot;: &quot;username1&quot;,\r\n    \t&quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\r\n    }\r\n\r\n```\r\n\r\n - **entityBColumn2** was changed on entityB\r\n - With the &quot;username&quot; in the requestHeader set to &quot;username2&quot;.\r\n\r\nMy **desired outcome** is for the data to reflect as follows in the database:\r\n\r\n```\r\n\r\n    {\r\n    \t&quot;entityAColumn1&quot;: &quot;val1&quot;,\r\n    \t&quot;entityAColumn2&quot;: &quot;val2&quot;,\r\n    \t&quot;entityB&quot;: {\r\n    \t\t&quot;entityBColumn1&quot;: &quot;val3&quot;,\r\n    \t\t&quot;entityBColumn2&quot;: &quot;val5&quot;, //UPDATED\r\n    \t\t&quot;username&quot;: &quot;username2&quot;, //UPDATED\r\n    \t\t&quot;lastUpdateDatetime&quot;: 2023-10-13T07:09:30Z //UPDATED\r\n    \t},\r\n    \t&quot;username&quot;: &quot;username1&quot;,\r\n    \t&quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\r\n    }\r\n\r\n```\r\n**Only EntityB&#39;s username and lastUpdateDatetime has been updated, because it&#39;s the only entity that has undergone a change.**\r\n\r\nBut i&#39;ve been unable to achieve this.\r\n\r\nI&#39;ve tried:\r\n\r\n - Using a @PreUpdate annotated function on my entities, but both entities still end up getting updated even if a change is only present on one.\r\n```\r\n\r\n    @PreUpdate\r\n    public void preUpdate() {\r\n    \tthis.username = UsernameUtil.getUserName();\r\n    \tthis.lastUpdateDateTime = ZonedDatetime.now();\r\n    }\r\n\r\n```\r\n- Using @UpdateTimestamp as a way to update my lastUpdateDatetime, but it also results in both entities getting updated.\r\n```\r\n\r\n    @UpdateTimestamp\r\n    @Column(name = &quot;last_update_datetime&quot;)\r\n    private ZonedDateTime lastUpdateDatetime;\r\n\r\n```\r\n\r\nI want to **avoid** writing a comparison method to detect changes as follows:\r\n\r\n```\r\n\r\n    public boolean EntityHasChanged(EntityA oldEntity, EntityA newEntity) {\r\n    \t\r\n    \tif(oldentity.getEntityAColumn1() != newEntity.getEntityAColumn1()) {\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \t// other comparisons\r\n    }\r\n\r\n```\r\n\r\nbecause if an entity has 100 fields it just becomes impractical.\r\n\r\n**NOTE: I have a mechanism for storing the username received in the request header and later using it to set the username, I just left it out because it is irrelevant to my question**\r\n\r\nSo finally my question is:\r\n \r\nIs there some sort of JPA/hibernate mechanism that can help me achieve my goal of updating my enities&#39; username and lastUpdateDatetime in isolation if a change is only made to a certain entity, without writing a massive comparison function for each entity?\r\n\r\n\r\nPlease let me know if you require any more detail.","title":"Update nested entities in isolation from one another using JPA/Hibernate/Spring Boot","body":"<p>I have an entity (EntityA) with another entity (EntityB) nested inside it. I want to update the <strong>username</strong> and <strong>lastUpdateDatetime</strong> of each entity in isolation if there is a change on a specific entity, without the other entity being updated.</p>\n<p>i.e.</p>\n<ul>\n<li>if a change is made on entityB, only the username and lastUpdateDatetime on entityB should be updated</li>\n<li>if a change is made on entityA, only the username and lastUpdateDatetime on entityA should be updated</li>\n</ul>\n<p>Here are my 2 entities:</p>\n<p>EntityA:</p>\n<pre><code>\n    @Entity(name = &quot;EntityA&quot;)\n    public class EntityA {\n        \n        @Column(name = &quot;EntityAColumn1&quot;)\n        private String entityAColumn1;\n    \n        @Column(name = &quot;EntityAColumn2&quot;)\n        private String entityAColumn2;     \n    \n        @OneToOne(cascade = CascadeType.ALL)\n        @JoinColumn(name = &quot;EntityA_EntityB&quot;)\n        private EntityB entityB;\n    \n        @Column(name = &quot;username&quot;, length = 100)\n        private String username;\n    \n        @Column(name = &quot;last_update_datetime&quot;)\n        private ZonedDateTime lastUpdateDatetime;\n    }\n\n</code></pre>\n<p>EntityB:</p>\n<pre><code>\n    @Entity(name = &quot;EntityB&quot;)\n    public class EntityB {\n        \n        @Column(name = &quot;EntityBColumn1&quot;)\n        private String entityBColumn1;\n    \n        @Column(name = &quot;EntityBColumn2&quot;)\n        private String entityBColumn2;     \n    \n        @OneToOne(cascade = CascadeType.ALL, mappedBy = &quot;EntityB&quot;, fetch = FetchType.LAZY)\n        private EntityA entityA;\n    \n        @Column(name = &quot;username&quot;, length = 100)\n        private String username;\n    \n        @Column(name = &quot;last_update_datetime&quot;)\n        private ZonedDateTime lastUpdateDatetime;\n    }\n\n</code></pre>\n<p><strong>Note that there is a one-to-one relationship between the entities.</strong></p>\n<p>Here is my controller class for updating the entity:</p>\n<pre><code>\n    @RestController\n    public class EntityAController {\n    \n        private final EntityARepository entityARepository;\n    \n        @PutMapping(&quot;/update&quot;)\n        public void updateEntityA(\n            @RequestBody ObjectA objectA,\n            @RequestHeader(&quot;username&quot;) String username\n        ) {\n            EntityA entityA = EntityMapper.mapToEntity(objectA);\n    \n            entityARepository.save(entityA);\n        }\n    }\n\n</code></pre>\n<p><strong>EntityMapper.mapToEntity(objectA); simply maps my web request to my entity</strong></p>\n<p>My repository class looks as follows:</p>\n<pre><code>\n    @Repository(&quot;EntityARepository&quot;)\n    public interface ShippingOrderRepository extends CrudRepository&lt;EntityA, Long&gt; {\n        \n    }\n\n</code></pre>\n<p>Now let's say my database entry looks like this before an update:</p>\n<p><strong>NOTE: My database is relational, I'm just writing it in json format for readability</strong></p>\n<pre><code>\n    {\n        &quot;entityAColumn1&quot;: &quot;val1&quot;,\n        &quot;entityAColumn2&quot;: &quot;val2&quot;,\n        &quot;entityB&quot;: {\n            &quot;entityBColumn1&quot;: &quot;val3&quot;,\n            &quot;entityBColumn2&quot;: &quot;val4&quot;,\n            &quot;username&quot;: &quot;username1&quot;,\n            &quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\n        },\n        &quot;username&quot;: &quot;username1&quot;,\n        &quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\n    }\n\n</code></pre>\n<p>I then send in the following request to my controller:</p>\n<pre><code>\n    {\n        &quot;entityAColumn1&quot;: &quot;val1&quot;,\n        &quot;entityAColumn2&quot;: &quot;val2&quot;,\n        &quot;entityB&quot;: {\n            &quot;entityBColumn1&quot;: &quot;val3&quot;,\n            &quot;entityBColumn2&quot;: &quot;val5&quot;, **VALUE HAS CHANGED**\n            &quot;username&quot;: &quot;username1&quot;,\n            &quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\n        },\n        &quot;username&quot;: &quot;username1&quot;,\n        &quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\n    }\n\n</code></pre>\n<ul>\n<li><strong>entityBColumn2</strong> was changed on entityB</li>\n<li>With the &quot;username&quot; in the requestHeader set to &quot;username2&quot;.</li>\n</ul>\n<p>My <strong>desired outcome</strong> is for the data to reflect as follows in the database:</p>\n<pre><code>\n    {\n        &quot;entityAColumn1&quot;: &quot;val1&quot;,\n        &quot;entityAColumn2&quot;: &quot;val2&quot;,\n        &quot;entityB&quot;: {\n            &quot;entityBColumn1&quot;: &quot;val3&quot;,\n            &quot;entityBColumn2&quot;: &quot;val5&quot;, //UPDATED\n            &quot;username&quot;: &quot;username2&quot;, //UPDATED\n            &quot;lastUpdateDatetime&quot;: 2023-10-13T07:09:30Z //UPDATED\n        },\n        &quot;username&quot;: &quot;username1&quot;,\n        &quot;lastUpdateDatetime&quot;: 2023-09-20T07:09:30Z\n    }\n\n</code></pre>\n<p><strong>Only EntityB's username and lastUpdateDatetime has been updated, because it's the only entity that has undergone a change.</strong></p>\n<p>But i've been unable to achieve this.</p>\n<p>I've tried:</p>\n<ul>\n<li>Using a @PreUpdate annotated function on my entities, but both entities still end up getting updated even if a change is only present on one.</li>\n</ul>\n<pre><code>\n    @PreUpdate\n    public void preUpdate() {\n        this.username = UsernameUtil.getUserName();\n        this.lastUpdateDateTime = ZonedDatetime.now();\n    }\n\n</code></pre>\n<ul>\n<li>Using @UpdateTimestamp as a way to update my lastUpdateDatetime, but it also results in both entities getting updated.</li>\n</ul>\n<pre><code>\n    @UpdateTimestamp\n    @Column(name = &quot;last_update_datetime&quot;)\n    private ZonedDateTime lastUpdateDatetime;\n\n</code></pre>\n<p>I want to <strong>avoid</strong> writing a comparison method to detect changes as follows:</p>\n<pre><code>\n    public boolean EntityHasChanged(EntityA oldEntity, EntityA newEntity) {\n        \n        if(oldentity.getEntityAColumn1() != newEntity.getEntityAColumn1()) {\n            return true;\n        }\n    \n        // other comparisons\n    }\n\n</code></pre>\n<p>because if an entity has 100 fields it just becomes impractical.</p>\n<p><strong>NOTE: I have a mechanism for storing the username received in the request header and later using it to set the username, I just left it out because it is irrelevant to my question</strong></p>\n<p>So finally my question is:</p>\n<p>Is there some sort of JPA/hibernate mechanism that can help me achieve my goal of updating my enities' username and lastUpdateDatetime in isolation if a change is only made to a certain entity, without writing a massive comparison function for each entity?</p>\n<p>Please let me know if you require any more detail.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1491409,"reputation":6134,"user_id":1398418,"display_name":"Oleg"},"score":0,"creation_date":1509961596,"post_id":47133790,"comment_id":81217571,"body_markdown":"Possible duplicate of [Regular expression does not match newline obtained from Formatter object](https://stackoverflow.com/questions/11644100/regular-expression-does-not-match-newline-obtained-from-formatter-object) http://idownvotedbecau.se/noresearch/","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/11644100/regular-expression-does-not-match-newline-obtained-from-formatter-object\">Regular expression does not match newline obtained from Formatter object</a> <a href=\"http://idownvotedbecau.se/noresearch/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noresearch</a>"}],"answers":[{"tags":[],"owner":{"account_id":8811312,"reputation":4727,"user_id":6584288,"accept_rate":50,"display_name":"Indent"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1697302286,"creation_date":1509961161,"answer_id":47133823,"question_id":47133790,"body_markdown":"If you want `matches` to return `true`, you need to use `(?s)` or [`Pattern.DOTALL`][1].\r\n\r\nThis way `.` matches any character including `\\n`\r\n\r\n    System.out.println(data1.matches(&quot;(?s).*London.*&quot;));\r\n\r\nor:\r\n\r\n    Pattern pattern = Pattern.compile(&quot;.*London.*&quot;, Pattern.DOTALL);\r\n    System.out.println(data1.matches(pattern));\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL","title":"String.matches() with \\n","body":"<p>If you want <code>matches</code> to return <code>true</code>, you need to use <code>(?s)</code> or <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL\" rel=\"nofollow noreferrer\"><code>Pattern.DOTALL</code></a>.</p>\n<p>This way <code>.</code> matches any character including <code>\\n</code></p>\n<pre><code>System.out.println(data1.matches(&quot;(?s).*London.*&quot;));\n</code></pre>\n<p>or:</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;.*London.*&quot;, Pattern.DOTALL);\nSystem.out.println(data1.matches(pattern));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1955884,"reputation":1030,"user_id":1758897,"display_name":"Venom"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1509961336,"creation_date":1509961336,"answer_id":47133871,"question_id":47133790,"body_markdown":"It doesn&#39;t match because &quot;.&quot; in regex may not match line terminators as in the documentation here :\r\n\r\nhttps://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum","title":"String.matches() with \\n","body":"<p>It doesn't match because \".\" in regex may not match line terminators as in the documentation here :</p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum</a></p>\n"},{"tags":[],"owner":{"account_id":19220,"reputation":114617,"user_id":44853,"accept_rate":77,"display_name":"lc."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1509961486,"creation_date":1509961486,"answer_id":47133922,"question_id":47133790,"body_markdown":"By default Java&#39;s `.` does not match newlines. To have `.` include newlines, set the `Pattern.DOTALL` flag with `(?s)`:\r\n\r\n    System.out.println(data1.matches(&quot;(?s).*London.*&quot;));\r\n\r\nNote for those coming from other regex flavors, the Java documentation use of the term &quot;match&quot; is different from other languages. What is meant is Java&#39;s `string::matches()` returns true only if the *entire string* is matched, i.e. it behaves as if a `^` and `$` were added to the head and tail of the passed regex, NOT simply that it contains a match.","title":"String.matches() with \\n","body":"<p>By default Java's <code>.</code> does not match newlines. To have <code>.</code> include newlines, set the <code>Pattern.DOTALL</code> flag with <code>(?s)</code>:</p>\n\n<pre><code>System.out.println(data1.matches(\"(?s).*London.*\"));\n</code></pre>\n\n<p>Note for those coming from other regex flavors, the Java documentation use of the term \"match\" is different from other languages. What is meant is Java's <code>string::matches()</code> returns true only if the <em>entire string</em> is matched, i.e. it behaves as if a <code>^</code> and <code>$</code> were added to the head and tail of the passed regex, NOT simply that it contains a match.</p>\n"},{"tags":[],"owner":{"account_id":8751392,"reputation":487,"user_id":6544491,"display_name":"Harsh Maheswari"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1509961487,"creation_date":1509961487,"answer_id":47133924,"question_id":47133790,"body_markdown":"**&quot;\\n&quot;** considered as newline so **String.matches** searching for the pattern to in new line.so returning false try something like this.\r\n\r\n&gt; Pattern.compile(&quot;.*London.*&quot;, Pattern.MULTILINE);","title":"String.matches() with \\n","body":"<p><strong>\"\\n\"</strong> considered as newline so <strong>String.matches</strong> searching for the pattern to in new line.so returning false try something like this.</p>\n\n<blockquote>\n  <p>Pattern.compile(\".<em>London.</em>\", Pattern.MULTILINE);</p>\n</blockquote>\n"}],"owner":{"account_id":10918432,"reputation":789,"user_id":8025548,"accept_rate":65,"display_name":"W W"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1578,"favorite_count":0,"down_vote_count":2,"up_vote_count":6,"answer_count":4,"score":4,"last_activity_date":1697302286,"creation_date":1509961041,"question_id":47133790,"body_markdown":"Why the `String::matches` method returns `false` when the string contains `\\n`?\r\n\r\n    public class AppMain2 {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tString data1 = &quot;\\n  London&quot;;    \r\n    \t\tSystem.out.println(data1.matches(&quot;.*London.*&quot;)); // false\r\n    \t}    \r\n    }","title":"String.matches() with \\n","body":"<p>Why the <code>String::matches</code> method returns <code>false</code> when the string contains <code>\\n</code>?</p>\n<pre><code>public class AppMain2 {\n\n    public static void main(String[] args) {\n\n        String data1 = &quot;\\n  London&quot;;    \n        System.out.println(data1.matches(&quot;.*London.*&quot;)); // false\n    }    \n}\n</code></pre>\n"},{"tags":["java","php","html","comments","nested"],"comments":[{"owner":{"account_id":350538,"reputation":26874,"user_id":688653,"accept_rate":100,"display_name":"zw324"},"score":0,"creation_date":1372273106,"post_id":17328276,"comment_id":25136076,"body_markdown":"Note that Haskell allows it. I think there are sources claiming it is too much of a pain for the parser, but GHC does it rather nicely.","body":"Note that Haskell allows it. I think there are sources claiming it is too much of a pain for the parser, but GHC does it rather nicely."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1372273131,"post_id":17328276,"comment_id":25136090,"body_markdown":"HTML is actually a bad example –&#160;comments in HTML are more complex.","body":"HTML is actually a bad example – comments in HTML are more complex."},{"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"score":0,"creation_date":1372273185,"post_id":17328276,"comment_id":25136118,"body_markdown":"youre forgetting taht most of these constraints are &gt;20 years old. it used to be a strain on the parser&#39;s resources. anyway, most decent IDSe will allow you to block-comment stuff and take care of the gory details","body":"youre forgetting taht most of these constraints are &gt;20 years old. it used to be a strain on the parser&#39;s resources. anyway, most decent IDSe will allow you to block-comment stuff and take care of the gory details"},{"owner":{"account_id":350538,"reputation":26874,"user_id":688653,"accept_rate":100,"display_name":"zw324"},"score":0,"creation_date":1372273232,"post_id":17328276,"comment_id":25136138,"body_markdown":"@radai Java is not yet 20 years old.","body":"@radai Java is not yet 20 years old."},{"owner":{"account_id":297962,"reputation":54236,"user_id":603742,"accept_rate":33,"display_name":"stinepike"},"score":0,"creation_date":1372273250,"post_id":17328276,"comment_id":25136145,"body_markdown":"what will be the advantage of using nested block comments?? To &#39;be honest I dont see any great benefits","body":"what will be the advantage of using nested block comments?? To &#39;be honest I dont see any great benefits"},{"owner":{"account_id":1474418,"reputation":1627,"user_id":1385198,"accept_rate":76,"display_name":"DiegoDD"},"score":0,"creation_date":1372273258,"post_id":17328276,"comment_id":25136152,"body_markdown":"even if the constraints are old, new versions of the languages should implement it, i guess. (just as they implement any other functionality that would not work on older versions anyway)","body":"even if the constraints are old, new versions of the languages should implement it, i guess. (just as they implement any other functionality that would not work on older versions anyway)"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":1,"creation_date":1372273259,"post_id":17328276,"comment_id":25136154,"body_markdown":"Duplicates: http://programmers.stackexchange.com/questions/81072/why-do-most-programming-languages-not-nest-block-comments and http://programmers.stackexchange.com/questions/116330/why-dont-more-languages-support-recursive-nested-comments","body":"Duplicates: <a href=\"http://programmers.stackexchange.com/questions/81072/why-do-most-programming-languages-not-nest-block-comments\" title=\"why do most programming languages not nest block comments\">programmers.stackexchange.com/questions/81072/&hellip;</a> and <a href=\"http://programmers.stackexchange.com/questions/116330/why-dont-more-languages-support-recursive-nested-comments\" title=\"why dont more languages support recursive nested comments\">programmers.stackexchange.com/questions/116330/&hellip;</a>"},{"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"score":0,"creation_date":1372273321,"post_id":17328276,"comment_id":25136188,"body_markdown":"@ZiyaoWei - java isnt, but it &quot;inherited&quot; c/c++ syntax, which is even older. also, i&#39;ve seen quite a few places that _RELY_ on this behaviour. &quot;upgrading&quot; parsers could break a lot of code","body":"@ZiyaoWei - java isnt, but it &quot;inherited&quot; c/c++ syntax, which is even older. also, i&#39;ve seen quite a few places that <i>RELY</i> on this behaviour. &quot;upgrading&quot; parsers could break a lot of code"},{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1372273326,"post_id":17328276,"comment_id":25136193,"body_markdown":"@StinePike Nested comment could be used to add a message, while the nesting comment is for disabling some feature.","body":"@StinePike Nested comment could be used to add a message, while the nesting comment is for disabling some feature."},{"owner":{"account_id":205662,"reputation":189582,"user_id":454533,"accept_rate":74,"display_name":"Explosion Pills"},"score":0,"creation_date":1372273345,"post_id":17328276,"comment_id":25136202,"body_markdown":"There&#39;s probably no *good* reason for not nesting comments, but it is a lot easier on the parser because it can ignore everything in the comment block until it reaches an end comment token (`*/`).","body":"There&#39;s probably no <i>good</i> reason for not nesting comments, but it is a lot easier on the parser because it can ignore everything in the comment block until it reaches an end comment token (<code>*&#47;</code>)."},{"owner":{"account_id":1474418,"reputation":1627,"user_id":1385198,"accept_rate":76,"display_name":"DiegoDD"},"score":3,"creation_date":1372273355,"post_id":17328276,"comment_id":25136210,"body_markdown":"@StinePike because sometimes, for debugging purposes, you would like to discard large blocks of code that may already have block comments, and it is very easy to just wrap them with `/* */` instead of other workarounds.","body":"@StinePike because sometimes, for debugging purposes, you would like to discard large blocks of code that may already have block comments, and it is very easy to just wrap them with <code>&#47;* *&#47;</code> instead of other workarounds."},{"owner":{"account_id":297962,"reputation":54236,"user_id":603742,"accept_rate":33,"display_name":"stinepike"},"score":0,"creation_date":1372273437,"post_id":17328276,"comment_id":25136258,"body_markdown":"Yah ... now that sounds important.. didn&#39;t think like that","body":"Yah ... now that sounds important.. didn&#39;t think like that"},{"owner":{"account_id":139435,"reputation":144633,"user_id":345031,"accept_rate":78,"display_name":"mario"},"score":0,"creation_date":1372273490,"post_id":17328276,"comment_id":25136294,"body_markdown":"For the same reason that strings or variable names can not be nested. They&#39;re singular tokens to the tokenizer. Also comments aren&#39;t code blocks, thus structuring serves no purpose for the resulting programming logic.","body":"For the same reason that strings or variable names can not be nested. They&#39;re singular tokens to the tokenizer. Also comments aren&#39;t code blocks, thus structuring serves no purpose for the resulting programming logic."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1372273826,"post_id":17328276,"comment_id":25136490,"body_markdown":"@mario Actually, some programming languages (e.g. Bash) allow nested strings. And nested variable names also exist (again in Bash, but also, I believe, in PHP).","body":"@mario Actually, some programming languages (e.g. Bash) allow nested strings. And nested variable names also exist (again in Bash, but also, I believe, in PHP)."},{"owner":{"account_id":139435,"reputation":144633,"user_id":345031,"accept_rate":78,"display_name":"mario"},"score":0,"creation_date":1372274221,"post_id":17328276,"comment_id":25136708,"body_markdown":"@KonradRudolph You&#39;re probably referring to variable variables, which is a form of referencing and concatenation, but not an identifer mixup. Can you give an example of bash nested strings? I wasn&#39;t referring to escaping and mixed quotes. My hypothetical example being `&quot;aa &quot;bbb &quot;ccc&quot; bb&quot; aa&quot;`, where the resulting string could no longer be a primitive, but a tripple linked list thereof (couldn&#39;t make up an accessor syntax for that).","body":"@KonradRudolph You&#39;re probably referring to variable variables, which is a form of referencing and concatenation, but not an identifer mixup. Can you give an example of bash nested strings? I wasn&#39;t referring to escaping and mixed quotes. My hypothetical example being <code>&quot;aa &quot;bbb &quot;ccc&quot; bb&quot; aa&quot;</code>, where the resulting string could no longer be a primitive, but a tripple linked list thereof (couldn&#39;t make up an accessor syntax for that)."},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1372274448,"post_id":17328276,"comment_id":25136831,"body_markdown":"@mario You’re right about identifiers. But the logic doesn’t carry over to comments. As for strings, Bash is very liberal with interpolation. Such as: `str=&quot;Hello $(echo &quot;world&quot;)&quot;`.","body":"@mario You’re right about identifiers. But the logic doesn’t carry over to comments. As for strings, Bash is very liberal with interpolation. Such as: <code>str=&quot;Hello $(echo &quot;world&quot;)&quot;</code>."}],"answers":[{"comments":[{"owner":{"account_id":1474418,"reputation":1627,"user_id":1385198,"accept_rate":76,"display_name":"DiegoDD"},"score":0,"creation_date":1372274559,"post_id":17328373,"comment_id":25136892,"body_markdown":"I suspected it, simply convention, even if it is technically perfectly possible (and not even so hard, i guess). And thanks for the detailed info and links, I see I have a LOT to learn about parsers and how they work.","body":"I suspected it, simply convention, even if it is technically perfectly possible (and not even so hard, i guess). And thanks for the detailed info and links, I see I have a LOT to learn about parsers and how they work."}],"tags":[],"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1372274590,"creation_date":1372273361,"answer_id":17328373,"question_id":17328276,"body_markdown":"The reason is historical and has to do with the architecture of compilers.\r\n\r\nFor the sake of efficiency, most compilers traditionally parse the source code in two stages: the [*lexical analysis*](http://en.wikipedia.org/wiki/Lexical_analysis) and the actual [*parsing*](http://en.wikipedia.org/wiki/Parsing) of a token stream (that was produced by said lexical analysis). The lexical analysis is the part that recognises individual tokens, such as keywords, strings, number literals –&#160;and *comments*.\r\n\r\nAgain for reasons of efficiency, lexical analysis is traditionally implemented via a [finite-state machine](http://en.wikipedia.org/wiki/Finite_automaton). These finite-state machines happen to recognise (= handle) [regular languages](http://en.wikipedia.org/wiki/Regular_language), which fits perfectly for the above-mentioned tokens. However, it is *not* able to recognise nested constructs – this would require a more powerful machine ([augmented by a stack](http://en.wikipedia.org/wiki/Pushdown_automaton)).\r\n\r\nNot allowing nested comments was thus simply a decision that traded off convenience for performance, and subsequent languages have by and large adopted the convention.\r\n\r\n&gt; And as a plus, are there any other (not so obscure) languages that DO allow nested block comments?\r\n\r\nThere are some. The comments already mentioned Haskell and Pascal. Other languages are D and F#.","title":"Why do many languages not support nested block comments?","body":"<p>The reason is historical and has to do with the architecture of compilers.</p>\n\n<p>For the sake of efficiency, most compilers traditionally parse the source code in two stages: the <a href=\"http://en.wikipedia.org/wiki/Lexical_analysis\"><em>lexical analysis</em></a> and the actual <a href=\"http://en.wikipedia.org/wiki/Parsing\"><em>parsing</em></a> of a token stream (that was produced by said lexical analysis). The lexical analysis is the part that recognises individual tokens, such as keywords, strings, number literals – and <em>comments</em>.</p>\n\n<p>Again for reasons of efficiency, lexical analysis is traditionally implemented via a <a href=\"http://en.wikipedia.org/wiki/Finite_automaton\">finite-state machine</a>. These finite-state machines happen to recognise (= handle) <a href=\"http://en.wikipedia.org/wiki/Regular_language\">regular languages</a>, which fits perfectly for the above-mentioned tokens. However, it is <em>not</em> able to recognise nested constructs – this would require a more powerful machine (<a href=\"http://en.wikipedia.org/wiki/Pushdown_automaton\">augmented by a stack</a>).</p>\n\n<p>Not allowing nested comments was thus simply a decision that traded off convenience for performance, and subsequent languages have by and large adopted the convention.</p>\n\n<blockquote>\n  <p>And as a plus, are there any other (not so obscure) languages that DO allow nested block comments?</p>\n</blockquote>\n\n<p>There are some. The comments already mentioned Haskell and Pascal. Other languages are D and F#.</p>\n"},{"comments":[{"owner":{"account_id":16223,"reputation":9422,"user_id":35116,"accept_rate":100,"display_name":"TravisO"},"score":1,"creation_date":1372273563,"post_id":17328413,"comment_id":25136338,"body_markdown":"Konrad does a more formal explanation than mine, consider this the layman&#39;s version of his answer.","body":"Konrad does a more formal explanation than mine, consider this the layman&#39;s version of his answer."}],"tags":[],"owner":{"account_id":16223,"reputation":9422,"user_id":35116,"accept_rate":100,"display_name":"TravisO"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372273510,"creation_date":1372273510,"answer_id":17328413,"question_id":17328276,"body_markdown":"HTML is generally a sloppy, non enforced type of markup.  Browsers had to make decisions between what&#39;s right and what&#39;s realistic, sometimes they choose the second.\r\n\r\nIf you really want to comment out a piece of HTML, it&#39;s generally not a great idea to even use a single comment with HTML tags inside of it, but it&#39;s especially bad to start nesting comments.\r\n\r\nYou can never be absolutely sure how a browser will handle this when it parses the syntax.","title":"Why do many languages not support nested block comments?","body":"<p>HTML is generally a sloppy, non enforced type of markup.  Browsers had to make decisions between what's right and what's realistic, sometimes they choose the second.</p>\n\n<p>If you really want to comment out a piece of HTML, it's generally not a great idea to even use a single comment with HTML tags inside of it, but it's especially bad to start nesting comments.</p>\n\n<p>You can never be absolutely sure how a browser will handle this when it parses the syntax.</p>\n"},{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1372273589,"post_id":17328425,"comment_id":25136350,"body_markdown":"“isn’t quite consistent with a comment” – nonsense. By the same logic a comment would never end because the end-of-comment mark *is part of the comment*. And I’ve yet to see a single person who got confused by nested Haskell or Pascal comments. In fact, the very existence of a concise, formal rule describing nested comments tells as that such a rule *must* be self-consistent. If it weren’t, it couldn’t be formally described.","body":"“isn’t quite consistent with a comment” – nonsense. By the same logic a comment would never end because the end-of-comment mark <i>is part of the comment</i>. And I’ve yet to see a single person who got confused by nested Haskell or Pascal comments. In fact, the very existence of a concise, formal rule describing nested comments tells as that such a rule <i>must</i> be self-consistent. If it weren’t, it couldn’t be formally described."}],"tags":[],"owner":{"account_id":2866385,"reputation":5961,"user_id":2460632,"accept_rate":83,"display_name":"IanPudney"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1372273549,"creation_date":1372273549,"answer_id":17328425,"question_id":17328276,"body_markdown":"This behavior is exhibited because anything between comment characters is a comment, including more comment characters. Yes, it would be possible to easily program the parser to treat them as nested comments like you describe, but that isn&#39;t quite consistent with a comment. A comment is meant to make everything between the open character and close character non-existent, regardless of what it is. Text, code, and comment charcters all get commented out.\r\n\r\nUnfortunately, your suggestion that the reason is &quot;other&#39;s don&#39;t do it, so we won&#39;t either&quot; is also quite correct. People expect block comments to behave in a certain way, and get confused when they don&#39;t. ","title":"Why do many languages not support nested block comments?","body":"<p>This behavior is exhibited because anything between comment characters is a comment, including more comment characters. Yes, it would be possible to easily program the parser to treat them as nested comments like you describe, but that isn't quite consistent with a comment. A comment is meant to make everything between the open character and close character non-existent, regardless of what it is. Text, code, and comment charcters all get commented out.</p>\n\n<p>Unfortunately, your suggestion that the reason is \"other's don't do it, so we won't either\" is also quite correct. People expect block comments to behave in a certain way, and get confused when they don't. </p>\n"}],"owner":{"account_id":1474418,"reputation":1627,"user_id":1385198,"accept_rate":76,"display_name":"DiegoDD"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4315,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"accepted_answer_id":17328373,"answer_count":3,"score":18,"last_activity_date":1697302098,"creation_date":1372273044,"question_id":17328276,"body_markdown":"In most the languages I use, you simply cannot nest block comments, because the first occurrence of the &quot;close&quot; comment syntax closes the comment even if it was only an &quot;inner&quot; comment.\r\n\r\nFor example, in HTML\r\n\r\n    &lt;!-- outer comment\r\n    &lt;p&gt;hello&lt;/p&gt;&lt;!-- inner comment &lt;p&gt;world&lt;/p&gt; --&gt;\r\n    &lt;p&gt;this should BE commented&lt;/p&gt;\r\n    --&gt;\r\n\r\nin this case, the outer comment ends on the first `--&gt;` instead of the corresponding last one, causing the last `&lt;p&gt;` to print, when it shouldn&#39;t.\r\n\r\nThe same happens for languages that use `/* */` for block comments, like in java, php, css, javascript, etc.\r\n\r\nBut my question is WHY is it that way? Why, by design, it is not allowed? I mention &quot;by design&quot; because I really doubt it is because of parsing problems, I guess the parsers are perfectly capable of keeping track of opening `/*`s and close the comments with their corresponding closing `*/`s But they simply somehow decided it is not a good idea.\r\n\r\nI already know that a workaround for this is to somehow change the inner closing comments, to avoid them to close , and only leave the last closing one. e.g. changing inner `--&gt;`s and `*/`s for `- -&gt;`s and `* /`s . But that is obviously not convenient, and hard to do when you only want to discard blocks of code for debugging purposes. (other techniques are to nest everything in `if(false){}` blocks, but that is not the point here.\r\n\r\nSo, what I&#39;d like to know is WHY nested comments are generally not allowed in several modern languages? there must be a good reason other than &quot;others don&#39;t do it, we won&#39;t either&quot; right?.\r\n\r\n\r\nAnd as a plus, are there any other (not so obscure) languages that DO allow nested block comments?","title":"Why do many languages not support nested block comments?","body":"<p>In most the languages I use, you simply cannot nest block comments, because the first occurrence of the &quot;close&quot; comment syntax closes the comment even if it was only an &quot;inner&quot; comment.</p>\n<p>For example, in HTML</p>\n<pre><code>&lt;!-- outer comment\n&lt;p&gt;hello&lt;/p&gt;&lt;!-- inner comment &lt;p&gt;world&lt;/p&gt; --&gt;\n&lt;p&gt;this should BE commented&lt;/p&gt;\n--&gt;\n</code></pre>\n<p>in this case, the outer comment ends on the first <code>--&gt;</code> instead of the corresponding last one, causing the last <code>&lt;p&gt;</code> to print, when it shouldn't.</p>\n<p>The same happens for languages that use <code>/* */</code> for block comments, like in java, php, css, javascript, etc.</p>\n<p>But my question is WHY is it that way? Why, by design, it is not allowed? I mention &quot;by design&quot; because I really doubt it is because of parsing problems, I guess the parsers are perfectly capable of keeping track of opening <code>/*</code>s and close the comments with their corresponding closing <code>*/</code>s But they simply somehow decided it is not a good idea.</p>\n<p>I already know that a workaround for this is to somehow change the inner closing comments, to avoid them to close , and only leave the last closing one. e.g. changing inner <code>--&gt;</code>s and <code>*/</code>s for <code>- -&gt;</code>s and <code>* /</code>s . But that is obviously not convenient, and hard to do when you only want to discard blocks of code for debugging purposes. (other techniques are to nest everything in <code>if(false){}</code> blocks, but that is not the point here.</p>\n<p>So, what I'd like to know is WHY nested comments are generally not allowed in several modern languages? there must be a good reason other than &quot;others don't do it, we won't either&quot; right?.</p>\n<p>And as a plus, are there any other (not so obscure) languages that DO allow nested block comments?</p>\n"},{"tags":["java","if-statement","input","while-loop"],"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":0,"creation_date":1697294671,"post_id":77293251,"comment_id":136263224,"body_markdown":"what is the value of `grade` variable after `while (grade!=-1)` loop?","body":"what is the value of <code>grade</code> variable after <code>while (grade!=-1)</code> loop?"}],"answers":[{"tags":[],"owner":{"account_id":11803185,"reputation":592,"user_id":8636342,"display_name":"Jeet Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697294941,"creation_date":1697294941,"answer_id":77293279,"question_id":77293251,"body_markdown":"The issue with your code is that you are checking the grade after the while loop has completed, which means the `grade` variable contains the value of -1 at that point, and you are only evaluating that one value for the grade categories. You should be checking the categories inside the loop while reading the grades. Here&#39;s the corrected code:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Grades {\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter 5 grades and then -1 to quit!&quot;);\r\n        double total = 0;\r\n        int count = 0;\r\n        int A = 0;\r\n        int B = 0;\r\n        int C = 0;\r\n        int D = 0;\r\n        int F = 0;\r\n\r\n        while (true) {\r\n            System.out.print(&quot;Enter grade (or -1 to quit): &quot;);\r\n            double grade = input.nextDouble();\r\n\r\n            if (grade == -1) {\r\n                break;  // Exit the loop when -1 is entered\r\n            }\r\n\r\n            total += grade;\r\n            count++;\r\n\r\n            if (grade &gt;= 90 &amp;&amp; grade &lt;= 100) {\r\n                A++;\r\n            } else if (grade &gt;= 80 &amp;&amp; grade &lt;= 89) {\r\n                B++;\r\n            } else if (grade &gt;= 70 &amp;&amp; grade &lt;= 79) {\r\n                C++;\r\n            } else if (grade &gt;= 60 &amp;&amp; grade &lt;= 69) {\r\n                D++;\r\n            } else if (grade &gt;= 0 &amp;&amp; grade &lt;= 59) {\r\n                F++;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;The number of grades = &quot; + count);\r\n        System.out.println(&quot;Average: &quot; + total / count);\r\n\r\n        System.out.println(&quot;Number of A grades: &quot; + A);\r\n        System.out.println(&quot;Number of B grades: &quot; + B);\r\n        System.out.println(&quot;Number of C grades: &quot; + C);\r\n        System.out.println(&quot;Number of D grades: &quot; + D);\r\n        System.out.println(&quot;Number of F grades: &quot; + F);\r\n    }\r\n}\r\n```\r\n\r\nWith this code, you check the grade categories as you receive each grade within the loop, and it will produce the desired output.","title":"why i cant get the output for categorize?","body":"<p>The issue with your code is that you are checking the grade after the while loop has completed, which means the <code>grade</code> variable contains the value of -1 at that point, and you are only evaluating that one value for the grade categories. You should be checking the categories inside the loop while reading the grades. Here's the corrected code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Grades {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n\n        System.out.println(&quot;Enter 5 grades and then -1 to quit!&quot;);\n        double total = 0;\n        int count = 0;\n        int A = 0;\n        int B = 0;\n        int C = 0;\n        int D = 0;\n        int F = 0;\n\n        while (true) {\n            System.out.print(&quot;Enter grade (or -1 to quit): &quot;);\n            double grade = input.nextDouble();\n\n            if (grade == -1) {\n                break;  // Exit the loop when -1 is entered\n            }\n\n            total += grade;\n            count++;\n\n            if (grade &gt;= 90 &amp;&amp; grade &lt;= 100) {\n                A++;\n            } else if (grade &gt;= 80 &amp;&amp; grade &lt;= 89) {\n                B++;\n            } else if (grade &gt;= 70 &amp;&amp; grade &lt;= 79) {\n                C++;\n            } else if (grade &gt;= 60 &amp;&amp; grade &lt;= 69) {\n                D++;\n            } else if (grade &gt;= 0 &amp;&amp; grade &lt;= 59) {\n                F++;\n            }\n        }\n\n        System.out.println(&quot;The number of grades = &quot; + count);\n        System.out.println(&quot;Average: &quot; + total / count);\n\n        System.out.println(&quot;Number of A grades: &quot; + A);\n        System.out.println(&quot;Number of B grades: &quot; + B);\n        System.out.println(&quot;Number of C grades: &quot; + C);\n        System.out.println(&quot;Number of D grades: &quot; + D);\n        System.out.println(&quot;Number of F grades: &quot; + F);\n    }\n}\n</code></pre>\n<p>With this code, you check the grade categories as you receive each grade within the loop, and it will produce the desired output.</p>\n"},{"comments":[{"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"score":0,"creation_date":1697295058,"post_id":77293281,"comment_id":136263268,"body_markdown":"if part should be before `nextDouble` otherwise very first value read will be skipped (it is read at the very start of main)","body":"if part should be before <code>nextDouble</code> otherwise very first value read will be skipped (it is read at the very start of main)"},{"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"score":0,"creation_date":1697295280,"post_id":77293281,"comment_id":136263300,"body_markdown":"@IłyaBursov Yeah, I just forgot to save the edits :)","body":"@IłyaBursov Yeah, I just forgot to save the edits :)"},{"owner":{"display_name":"user22740406"},"score":0,"creation_date":1697296369,"post_id":77293281,"comment_id":136263406,"body_markdown":"thanks for the answer i am really happy you helped me! i did what you told me and its works! but theres one mistake its gave me 6 grades while i entered 5 grades with -1 so how i could solve this please?","body":"thanks for the answer i am really happy you helped me! i did what you told me and its works! but theres one mistake its gave me 6 grades while i entered 5 grades with -1 so how i could solve this please?"},{"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"score":0,"creation_date":1697296588,"post_id":77293281,"comment_id":136263427,"body_markdown":"@sera Hi, I attached the output..","body":"@sera Hi, I attached the output.."},{"owner":{"display_name":"user22740406"},"score":0,"creation_date":1697297159,"post_id":77293281,"comment_id":136263479,"body_markdown":"sorry to bother but it still gave me 6 instead of 5 &lt;\\\\3","body":"sorry to bother but it still gave me 6 instead of 5 &lt;\\\\3"},{"owner":{"display_name":"user22740406"},"score":0,"creation_date":1697299010,"post_id":77293281,"comment_id":136263710,"body_markdown":"can you help me i wanna use your answer!:(","body":"can you help me i wanna use your answer!:("},{"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"score":0,"creation_date":1697299875,"post_id":77293281,"comment_id":136263822,"body_markdown":"@sera I now attached the full version, you can copy it or try to see what you did differently :)","body":"@sera I now attached the full version, you can copy it or try to see what you did differently :)"},{"owner":{"display_name":"user22740406"},"score":0,"creation_date":1697300590,"post_id":77293281,"comment_id":136263916,"body_markdown":"I felt stressed because of this application and you really saved my life. Thank you. I wish you good health","body":"I felt stressed because of this application and you really saved my life. Thank you. I wish you good health"},{"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"score":0,"creation_date":1697300904,"post_id":77293281,"comment_id":136263949,"body_markdown":"@sera Please consider accepting my answer :)","body":"@sera Please consider accepting my answer :)"}],"tags":[],"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697299829,"creation_date":1697294954,"answer_id":77293281,"question_id":77293251,"body_markdown":"When you exit the loop and reaches to the `if-else` part, the value of `grade` is `-1` so none of the conditions will be true.\r\n\r\nYou need to move the `if-else` part into the `while` loop:\r\n```\r\n    while (grade!=-1){\r\n    total += grade;\r\n\r\n    if(grade&gt;=90 &amp;&amp; grade&lt;=100){\r\n        A++;}\r\n    else if(grade&gt;=80 &amp;&amp; grade&lt;=89){\r\n        B++;}\r\n    else if(grade&gt;=70 &amp;&amp; grade&lt;=79){\r\n        C++;}\r\n    else if(grade&gt;=60 &amp;&amp; grade&lt;=69){\r\n        D++;}\r\n    else if(grade&gt;=0 &amp;&amp; grade&lt;=59){\r\n        F++;}\r\n    count++;\r\n    System.out.print(&quot;enter grade:&quot;);\r\n    grade=input.nextDouble();\r\n    }\r\n```\r\n\r\n## Output:\r\n```\r\nenter 5 grades and then -1 to quit!\r\nenter grade:90\r\nenter grade:99\r\nenter grade:97\r\nenter grade:98\r\nenter grade:87\r\nenter grade:-1\r\nthe number of grades= 5\r\nAverage: 94.2\r\nnumber of A grades :4\r\nnumber of B grades :1\r\nnumber of C grades :0\r\nnumber of D grades :0\r\nnumber of F grades :0\r\n```\r\n---\r\n# Edit:\r\n```\r\nimport java.util.Scanner;\r\npublic class Grades {\r\npublic static void main(String []args){   \r\nScanner input = new Scanner(System.in);\r\n\r\n System.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\r\n System.out.print(&quot;enter grade:&quot;);\r\n double grade=input.nextDouble();\r\n double total=0;\r\n int count=0;\r\n int A= 0;\r\n int B= 0;\r\n int C = 0;\r\n int D= 0;\r\n int F = 0;\r\n \r\n \r\nwhile (grade!=-1){\r\n    total += grade;\r\n    if(grade&gt;=90 &amp;&amp; grade&lt;=100){\r\n        A++;}\r\n    else if(grade&gt;=80 &amp;&amp; grade&lt;=89){\r\n        B++;}\r\n    else if(grade&gt;=70 &amp;&amp; grade&lt;=79){\r\n        C++;}\r\n    else if(grade&gt;=60 &amp;&amp; grade&lt;=69){\r\n        D++;}\r\n    else if(grade&gt;=0 &amp;&amp; grade&lt;=59){\r\n        F++;}\r\n    count++;\r\n    System.out.print(&quot;enter grade:&quot;);\r\n    grade=input.nextDouble();\r\n}\r\n    \r\n    \r\n System.out.println(&quot;the number of grades= &quot;+ count);\r\n System.out.println(&quot;Average: &quot; + total/count);\r\n \r\n\r\nSystem.out.println(&quot;number of A grades :&quot;+ A);\r\nSystem.out.println(&quot;number of B grades :&quot;+ B);\r\nSystem.out.println(&quot;number of C grades :&quot;+ C);\r\nSystem.out.println(&quot;number of D grades :&quot;+ D);\r\nSystem.out.println(&quot;number of F grades :&quot;+ F);\r\n    \r\n}   \r\n}\r\n```","title":"why i cant get the output for categorize?","body":"<p>When you exit the loop and reaches to the <code>if-else</code> part, the value of <code>grade</code> is <code>-1</code> so none of the conditions will be true.</p>\n<p>You need to move the <code>if-else</code> part into the <code>while</code> loop:</p>\n<pre><code>    while (grade!=-1){\n    total += grade;\n\n    if(grade&gt;=90 &amp;&amp; grade&lt;=100){\n        A++;}\n    else if(grade&gt;=80 &amp;&amp; grade&lt;=89){\n        B++;}\n    else if(grade&gt;=70 &amp;&amp; grade&lt;=79){\n        C++;}\n    else if(grade&gt;=60 &amp;&amp; grade&lt;=69){\n        D++;}\n    else if(grade&gt;=0 &amp;&amp; grade&lt;=59){\n        F++;}\n    count++;\n    System.out.print(&quot;enter grade:&quot;);\n    grade=input.nextDouble();\n    }\n</code></pre>\n<h2>Output:</h2>\n<pre><code>enter 5 grades and then -1 to quit!\nenter grade:90\nenter grade:99\nenter grade:97\nenter grade:98\nenter grade:87\nenter grade:-1\nthe number of grades= 5\nAverage: 94.2\nnumber of A grades :4\nnumber of B grades :1\nnumber of C grades :0\nnumber of D grades :0\nnumber of F grades :0\n</code></pre>\n<hr />\n<h1>Edit:</h1>\n<pre><code>import java.util.Scanner;\npublic class Grades {\npublic static void main(String []args){   \nScanner input = new Scanner(System.in);\n\n System.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\n System.out.print(&quot;enter grade:&quot;);\n double grade=input.nextDouble();\n double total=0;\n int count=0;\n int A= 0;\n int B= 0;\n int C = 0;\n int D= 0;\n int F = 0;\n \n \nwhile (grade!=-1){\n    total += grade;\n    if(grade&gt;=90 &amp;&amp; grade&lt;=100){\n        A++;}\n    else if(grade&gt;=80 &amp;&amp; grade&lt;=89){\n        B++;}\n    else if(grade&gt;=70 &amp;&amp; grade&lt;=79){\n        C++;}\n    else if(grade&gt;=60 &amp;&amp; grade&lt;=69){\n        D++;}\n    else if(grade&gt;=0 &amp;&amp; grade&lt;=59){\n        F++;}\n    count++;\n    System.out.print(&quot;enter grade:&quot;);\n    grade=input.nextDouble();\n}\n    \n    \n System.out.println(&quot;the number of grades= &quot;+ count);\n System.out.println(&quot;Average: &quot; + total/count);\n \n\nSystem.out.println(&quot;number of A grades :&quot;+ A);\nSystem.out.println(&quot;number of B grades :&quot;+ B);\nSystem.out.println(&quot;number of C grades :&quot;+ C);\nSystem.out.println(&quot;number of D grades :&quot;+ D);\nSystem.out.println(&quot;number of F grades :&quot;+ F);\n    \n}   \n}\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user22740406"},"score":0,"creation_date":1697297033,"post_id":77293387,"comment_id":136263467,"body_markdown":"thankkkkk yoooouuu so much im crying it worked !!!","body":"thankkkkk yoooouuu so much im crying it worked !!!"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697296708,"creation_date":1697296708,"answer_id":77293387,"question_id":77293251,"body_markdown":"&gt; _&quot;... This code has an error only when displaying the categories. ...\\\r\n&gt;\\\r\n&gt; ... can someone please tells me why its not working?&quot;_\r\n\r\nThe reason this happens is because you&#39;re checking the value of _grade_, which after the _loop_, is _&amp;minus;1_.\r\n\r\nAdditionally, you should gather the _input_ values uniformly.\\\r\nAnd, re-factor the _grade_ _if-statements_.\r\n\r\n```java\r\nScanner input = new Scanner(System.in);\r\n\r\n\r\nSystem.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\r\ndouble grade;\r\ndouble total=0;\r\nint count=0;\r\nint A= 0;\r\nint B= 0;\r\nint C = 0;\r\nint D= 0;\r\nint F = 0;\r\nboolean exit = false;\r\n\r\ndo {\r\n    System.out.print(&quot;enter grade:&quot;);\r\n    grade=input.nextDouble();\r\n    if (grade == -1) exit = true;\r\n    else {\r\n        total = total + grade;\r\n        count++;\r\n        if(grade&gt;=90) A++;\r\n        else if(grade&gt;=80) B++;\r\n        else if(grade&gt;=70) C++;\r\n        else if(grade&gt;=60) D++;\r\n        else F++;\r\n    }\r\n} while (!exit);\r\n\r\n\r\nSystem.out.println(&quot;the number of grades= &quot;+ count);\r\nSystem.out.println(&quot;Average: &quot; + total/count);\r\n\r\n\r\nSystem.out.println(&quot;number of A grades :&quot;+ A);\r\nSystem.out.println(&quot;number of B grades :&quot;+ B);\r\nSystem.out.println(&quot;number of C grades :&quot;+ C);\r\nSystem.out.println(&quot;number of D grades :&quot;+ D);\r\nSystem.out.println(&quot;number of F grades :&quot;+ F);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nenter 5 grades and then -1 to quit!\r\nenter grade:90\r\nenter grade:80\r\nenter grade:70\r\nenter grade:-1\r\nthe number of grades= 3\r\nAverage: 80.0\r\nnumber of A grades :1\r\nnumber of B grades :1\r\nnumber of C grades :1\r\nnumber of D grades :0\r\nnumber of F grades :0\r\n```","title":"why i cant get the output for categorize?","body":"<blockquote>\n<p><em>&quot;... This code has an error only when displaying the categories. ...<br />\n<br />\n... can someone please tells me why its not working?&quot;</em></p>\n</blockquote>\n<p>The reason this happens is because you're checking the value of <em>grade</em>, which after the <em>loop</em>, is <em>−1</em>.</p>\n<p>Additionally, you should gather the <em>input</em> values uniformly.<br />\nAnd, re-factor the <em>grade</em> <em>if-statements</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner input = new Scanner(System.in);\n\n\nSystem.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\ndouble grade;\ndouble total=0;\nint count=0;\nint A= 0;\nint B= 0;\nint C = 0;\nint D= 0;\nint F = 0;\nboolean exit = false;\n\ndo {\n    System.out.print(&quot;enter grade:&quot;);\n    grade=input.nextDouble();\n    if (grade == -1) exit = true;\n    else {\n        total = total + grade;\n        count++;\n        if(grade&gt;=90) A++;\n        else if(grade&gt;=80) B++;\n        else if(grade&gt;=70) C++;\n        else if(grade&gt;=60) D++;\n        else F++;\n    }\n} while (!exit);\n\n\nSystem.out.println(&quot;the number of grades= &quot;+ count);\nSystem.out.println(&quot;Average: &quot; + total/count);\n\n\nSystem.out.println(&quot;number of A grades :&quot;+ A);\nSystem.out.println(&quot;number of B grades :&quot;+ B);\nSystem.out.println(&quot;number of C grades :&quot;+ C);\nSystem.out.println(&quot;number of D grades :&quot;+ D);\nSystem.out.println(&quot;number of F grades :&quot;+ F);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>enter 5 grades and then -1 to quit!\nenter grade:90\nenter grade:80\nenter grade:70\nenter grade:-1\nthe number of grades= 3\nAverage: 80.0\nnumber of A grades :1\nnumber of B grades :1\nnumber of C grades :1\nnumber of D grades :0\nnumber of F grades :0\n</code></pre>\n"}],"owner":{"display_name":"user22740406"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697301712,"creation_date":1697294454,"question_id":77293251,"body_markdown":"I must make a Java program that receives student data and stops at -1, then displays the number of grades and their average, and finally, it will display the grades in categories A, B, C, D. This code has an error only when displaying the categories. I need help. In it I will put the desired output\r\n\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Grades {\r\n    public static void main(String[] args) {\r\n        Scanner input = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\r\n        System.out.print(&quot;enter grade:&quot;);\r\n        double grade = input.nextDouble();\r\n        double total = 0;\r\n        int count = 0;\r\n        int A = 0;\r\n        int B = 0;\r\n        int C = 0;\r\n        int D = 0;\r\n        int F = 0;\r\n\r\n        while (grade != -1) {\r\n            total = total + grade;\r\n            System.out.print(&quot;enter grade:&quot;);\r\n            grade = input.nextDouble();\r\n            count++;\r\n        }\r\n\r\n        System.out.println(&quot;the number of grades= &quot; + count);\r\n        System.out.println(&quot;Average: &quot; + total / count);\r\n\r\n        if (grade &gt;= 90 &amp;&amp; grade &lt;= 100) {\r\n            A++;\r\n        } else if (grade &gt;= 80 &amp;&amp; grade &lt;= 89) {\r\n            B++;\r\n        } else if (grade &gt;= 70 &amp;&amp; grade &lt;= 79) {\r\n            C++;\r\n        } else if (grade &gt;= 60 &amp;&amp; grade &lt;= 69) {\r\n            D++;\r\n        } else if (grade &gt;= 0 &amp;&amp; grade &lt;= 59) {\r\n            F++;\r\n        }\r\n        \r\n        System.out.println(&quot;number of A grades :&quot; + A);\r\n        System.out.println(&quot;number of B grades :&quot; + B);\r\n        System.out.println(&quot;number of C grades :&quot; + C);\r\n        System.out.println(&quot;number of D grades :&quot; + D);\r\n        System.out.println(&quot;number of F grades :&quot; + F);\r\n    }\r\n}\r\n```\r\n\r\nthe output should be :\r\n\r\nenter grade:90\r\nenter grade:99\r\nenter grade:97\r\nenter grade:98\r\nenter grade:87\r\nenter grade:-1\r\nthe number of grades= 5\r\nAverage:94.2\r\n\r\nTotal number of A grades :4\r\nTotal number of B grades :1\r\nTotal number of C grades :0\r\nTotal number of D grades :0\r\nTotal number of F grades :0\r\n\r\nbut instead i got this : \r\n\r\nenter grade:90\r\nenter grade:99\r\nenter grade:97\r\nenter grade:98\r\nenter grade:87\r\nenter grade:-1\r\nthe number of grades= 5\r\nAverage:94.2\r\n\r\nTotal number of A grades :0\r\nTotal number of B grades :0\r\nTotal number of C grades :0\r\nTotal number of D grades :0\r\nTotal number of F grades :0\r\n\r\n\r\n\r\ncan someone please tells me why its not working?\r\n\r\n\r\n\r\n","title":"why i cant get the output for categorize?","body":"<p>I must make a Java program that receives student data and stops at -1, then displays the number of grades and their average, and finally, it will display the grades in categories A, B, C, D. This code has an error only when displaying the categories. I need help. In it I will put the desired output</p>\n<pre><code>import java.util.Scanner;\n\npublic class Grades {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n\n        System.out.println(&quot;enter 5 grades and then -1 to quit!&quot;);\n        System.out.print(&quot;enter grade:&quot;);\n        double grade = input.nextDouble();\n        double total = 0;\n        int count = 0;\n        int A = 0;\n        int B = 0;\n        int C = 0;\n        int D = 0;\n        int F = 0;\n\n        while (grade != -1) {\n            total = total + grade;\n            System.out.print(&quot;enter grade:&quot;);\n            grade = input.nextDouble();\n            count++;\n        }\n\n        System.out.println(&quot;the number of grades= &quot; + count);\n        System.out.println(&quot;Average: &quot; + total / count);\n\n        if (grade &gt;= 90 &amp;&amp; grade &lt;= 100) {\n            A++;\n        } else if (grade &gt;= 80 &amp;&amp; grade &lt;= 89) {\n            B++;\n        } else if (grade &gt;= 70 &amp;&amp; grade &lt;= 79) {\n            C++;\n        } else if (grade &gt;= 60 &amp;&amp; grade &lt;= 69) {\n            D++;\n        } else if (grade &gt;= 0 &amp;&amp; grade &lt;= 59) {\n            F++;\n        }\n        \n        System.out.println(&quot;number of A grades :&quot; + A);\n        System.out.println(&quot;number of B grades :&quot; + B);\n        System.out.println(&quot;number of C grades :&quot; + C);\n        System.out.println(&quot;number of D grades :&quot; + D);\n        System.out.println(&quot;number of F grades :&quot; + F);\n    }\n}\n</code></pre>\n<p>the output should be :</p>\n<p>enter grade:90\nenter grade:99\nenter grade:97\nenter grade:98\nenter grade:87\nenter grade:-1\nthe number of grades= 5\nAverage:94.2</p>\n<p>Total number of A grades :4\nTotal number of B grades :1\nTotal number of C grades :0\nTotal number of D grades :0\nTotal number of F grades :0</p>\n<p>but instead i got this :</p>\n<p>enter grade:90\nenter grade:99\nenter grade:97\nenter grade:98\nenter grade:87\nenter grade:-1\nthe number of grades= 5\nAverage:94.2</p>\n<p>Total number of A grades :0\nTotal number of B grades :0\nTotal number of C grades :0\nTotal number of D grades :0\nTotal number of F grades :0</p>\n<p>can someone please tells me why its not working?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2866071,"reputation":6012,"user_id":2460378,"accept_rate":81,"display_name":"Thomas S."},"score":0,"creation_date":1697301845,"post_id":77293413,"comment_id":136264028,"body_markdown":"In Java snake_case is not used, but camelCase. There is no need to define `long tarjeta`, better do that when initializing it: `long tarjeta = scanner.nextLong();`. It is considered bad style to convert numbers to strings as in `String string_number = tarjeta+&quot;&quot;;` - better use `Integer.toString(tarjeta)` or `String.valueOf(tarjeta)`. You are often appending strings, especially in the first for-loop - better use a `StringBuilder` instead.","body":"In Java snake_case is not used, but camelCase. There is no need to define <code>long tarjeta</code>, better do that when initializing it: <code>long tarjeta = scanner.nextLong();</code>. It is considered bad style to convert numbers to strings as in <code>String string_number = tarjeta+&quot;&quot;;</code> - better use <code>Integer.toString(tarjeta)</code> or <code>String.valueOf(tarjeta)</code>. You are often appending strings, especially in the first for-loop - better use a <code>StringBuilder</code> instead."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697301459,"creation_date":1697300046,"answer_id":77293594,"question_id":77293413,"body_markdown":"Your problem is in this line of your code:\r\n```java\r\nresult = result * 10 + (string_numbershort.charAt(i) - &#39;0&#39;) * 2;\r\n```\r\nif `(string_numbershort.charAt(i) - &#39;0&#39;) * 2` is greater than 10, then you want to multiply `result` by 100 and not by 10, i.e.\r\n```java\r\nint temp = (string_numbershort.charAt(i) - &#39;0&#39;) * 2;\r\nif (temp &gt; 10) {\r\n    result = result * 100 + temp;\r\n}\r\nelse {\r\n    result = result * 10 + temp;\r\n}\r\n```\r\nHere is your program (with my corrections as described above):\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Credit {\r\n\r\n    public static void main(String[] args) {\r\n        // Pedir al usuario un n&#250;mero de tarjeta\r\n        Scanner scanner = new Scanner(System.in);\r\n        long tarjeta;\r\n        int result = 0;\r\n        System.out.print(&quot;Por favor, introduce tu n&#250;mero de tarjeta &gt;&gt; &quot;);\r\n        tarjeta = scanner.nextLong();\r\n        \r\n        // Convertimos long a string\r\n        String string_number = tarjeta+&quot;&quot;;\r\n        String string_numbershort = &quot;&quot;;\r\n        \r\n        System.out.println(tarjeta);\r\n        System.out.println(string_number);\r\n        for (int i = string_number.length() - 2; i &gt;= 0; i = i - 2) {\r\n            // Sacamos digitos de dos en dos empezando por el penultimo\r\n            System.out.print(string_number.charAt(i));\r\n            string_numbershort = string_numbershort + string_number.charAt(i);\r\n        }\r\n        for(int i = 0; i &lt; string_numbershort.length(); i++) {\r\n            // Equivalente a funcion atoi() en c\r\n            int additive = (string_numbershort.charAt(i) - &#39;0&#39;) * 2;\r\n            int multiplier = additive &gt; 10 ? 100 : 10;\r\n            result = result * multiplier + additive;\r\n            System.out.println(result);\r\n        }\r\n    }\r\n}\r\n```\r\nAnd here is the output of running the above code using your sample credit card number, i.e. 4003600000000014\r\n```none\r\nPor favor, introduce tu n&#250;mero de tarjeta &gt;&gt; 4003600000000014\r\n4003600000000014\r\n4003600000000014\r\n100006042\r\n20\r\n200\r\n2000\r\n20000\r\n2000012\r\n20000120\r\n200001208\r\n```\r\nOf-course, no need for all the conversions from `long` (or `int`) to `String` (and vice-versa). You can directly manipulate the number entered (via method `nextLong` in class `Scanner`) using arithmetic operations only, as demonstrated in the below code:\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class Credit {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.print(&quot;Card number: &quot;);\r\n        long number = scanner.nextLong();\r\n        long result = 0;\r\n        long multiplier;\r\n        while (number &gt; 0) {\r\n            number /= 10;\r\n            long digit = number % 10;\r\n            long amount = digit * 2;\r\n            multiplier = amount &gt; 10 ? 100 : 10;\r\n            result *= multiplier;\r\n            result += amount;\r\n            number /= 10;\r\n        }\r\n        System.out.println(result);\r\n    }\r\n}\r\n```\r\n","title":"Java program that separates number from a credit card and multiplies each by 2","body":"<p>Your problem is in this line of your code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>result = result * 10 + (string_numbershort.charAt(i) - '0') * 2;\n</code></pre>\n<p>if <code>(string_numbershort.charAt(i) - '0') * 2</code> is greater than 10, then you want to multiply <code>result</code> by 100 and not by 10, i.e.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int temp = (string_numbershort.charAt(i) - '0') * 2;\nif (temp &gt; 10) {\n    result = result * 100 + temp;\n}\nelse {\n    result = result * 10 + temp;\n}\n</code></pre>\n<p>Here is your program (with my corrections as described above):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Credit {\n\n    public static void main(String[] args) {\n        // Pedir al usuario un número de tarjeta\n        Scanner scanner = new Scanner(System.in);\n        long tarjeta;\n        int result = 0;\n        System.out.print(&quot;Por favor, introduce tu número de tarjeta &gt;&gt; &quot;);\n        tarjeta = scanner.nextLong();\n        \n        // Convertimos long a string\n        String string_number = tarjeta+&quot;&quot;;\n        String string_numbershort = &quot;&quot;;\n        \n        System.out.println(tarjeta);\n        System.out.println(string_number);\n        for (int i = string_number.length() - 2; i &gt;= 0; i = i - 2) {\n            // Sacamos digitos de dos en dos empezando por el penultimo\n            System.out.print(string_number.charAt(i));\n            string_numbershort = string_numbershort + string_number.charAt(i);\n        }\n        for(int i = 0; i &lt; string_numbershort.length(); i++) {\n            // Equivalente a funcion atoi() en c\n            int additive = (string_numbershort.charAt(i) - '0') * 2;\n            int multiplier = additive &gt; 10 ? 100 : 10;\n            result = result * multiplier + additive;\n            System.out.println(result);\n        }\n    }\n}\n</code></pre>\n<p>And here is the output of running the above code using your sample credit card number, i.e. 4003600000000014</p>\n<pre class=\"lang-none prettyprint-override\"><code>Por favor, introduce tu número de tarjeta &gt;&gt; 4003600000000014\n4003600000000014\n4003600000000014\n100006042\n20\n200\n2000\n20000\n2000012\n20000120\n200001208\n</code></pre>\n<p>Of-course, no need for all the conversions from <code>long</code> (or <code>int</code>) to <code>String</code> (and vice-versa). You can directly manipulate the number entered (via method <code>nextLong</code> in class <code>Scanner</code>) using arithmetic operations only, as demonstrated in the below code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Credit {\n\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Card number: &quot;);\n        long number = scanner.nextLong();\n        long result = 0;\n        long multiplier;\n        while (number &gt; 0) {\n            number /= 10;\n            long digit = number % 10;\n            long amount = digit * 2;\n            multiplier = amount &gt; 10 ? 100 : 10;\n            result *= multiplier;\n            result += amount;\n            number /= 10;\n        }\n        System.out.println(result);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27746917,"reputation":3,"user_id":21182214,"display_name":"Alex Sugimoto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77293594,"answer_count":1,"score":0,"last_activity_date":1697301459,"creation_date":1697297150,"question_id":77293413,"body_markdown":"I&#39;m trying to separate digits from a number and multiply each one by 2 and then cocatenating the results. The result ends up being one digit less. \r\n\r\nMy program first asks for a credit card number and then saves every other digit starting with the number&#39;s second to last digit into a variable. It&#39;s supossed to multiply each of this lasts number digits by 2. By adding a print in the for loop, it starts correctly but it deletes a digit in the 4th iteration.\r\n\r\nI&#39;ve tried adding a conditional to check if the last number was a 0 so it doesn&#39;t delete but the program completely breaks. This is my code:\r\n\r\n\r\n```\r\npackage credit;\r\n\r\nimport java.util.Scanner;\r\nimport java.lang.Integer;\r\n\r\npublic class Credit {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// Pedir al usuario un n&#250;mero de tarjeta\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tlong tarjeta;\r\n\t\tint result = 0;\r\n\t\tSystem.out.print(&quot;Por favor, introduce tu n&#250;mero de tarjeta &gt;&gt; &quot;);\r\n\t\ttarjeta = scanner.nextLong();\r\n\t\t\r\n\t\t// Convertimos long a string\r\n\t\tString string_number = tarjeta+&quot;&quot;;\r\n\t\tString string_numbershort = &quot;&quot;;\r\n\t\t\r\n\t\tSystem.out.println(tarjeta);\r\n\t\tSystem.out.println(string_number);\r\n\t\t\r\n\t\tfor (int i = string_number.length() - 2; i &gt;= 0; i = i - 2) {\r\n\t\t\t// Sacamos digitos de dos en dos empezando por el penultimo\r\n\t\t\tSystem.out.print(string_number.charAt(i));\r\n\t\t\tstring_numbershort = string_numbershort + string_number.charAt(i);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; string_numbershort.length(); i++) {\r\n\t\t\t// Equivalente a funcion atoi() en c\r\n\t\t\tresult = result * 10 + (string_numbershort.charAt(i) - &#39;0&#39;) * 2;\r\n\t\t\tSystem.out.println(result);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd the results in my terminal:\r\n\r\n\r\n```\r\nPor favor, introduce tu n&#250;mero de tarjeta &gt;&gt; 4003600000000014\r\n4003600000000014\r\n4003600000000014\r\n100006042\r\n20\r\n200\r\n2000\r\n20000 // This the 0 that gets deleted!!\r\n200012\r\n2000120\r\n20001208\r\n```\r\n\r\nThe result I&#39;m expecting to be printed is 200001208 not 20001208.\r\n\r\n","title":"Java program that separates number from a credit card and multiplies each by 2","body":"<p>I'm trying to separate digits from a number and multiply each one by 2 and then cocatenating the results. The result ends up being one digit less.</p>\n<p>My program first asks for a credit card number and then saves every other digit starting with the number's second to last digit into a variable. It's supossed to multiply each of this lasts number digits by 2. By adding a print in the for loop, it starts correctly but it deletes a digit in the 4th iteration.</p>\n<p>I've tried adding a conditional to check if the last number was a 0 so it doesn't delete but the program completely breaks. This is my code:</p>\n<pre><code>package credit;\n\nimport java.util.Scanner;\nimport java.lang.Integer;\n\npublic class Credit {\n\n    public static void main(String[] args) {\n        // Pedir al usuario un número de tarjeta\n        Scanner scanner = new Scanner(System.in);\n        long tarjeta;\n        int result = 0;\n        System.out.print(&quot;Por favor, introduce tu número de tarjeta &gt;&gt; &quot;);\n        tarjeta = scanner.nextLong();\n        \n        // Convertimos long a string\n        String string_number = tarjeta+&quot;&quot;;\n        String string_numbershort = &quot;&quot;;\n        \n        System.out.println(tarjeta);\n        System.out.println(string_number);\n        \n        for (int i = string_number.length() - 2; i &gt;= 0; i = i - 2) {\n            // Sacamos digitos de dos en dos empezando por el penultimo\n            System.out.print(string_number.charAt(i));\n            string_numbershort = string_numbershort + string_number.charAt(i);\n            \n        }\n        \n        for(int i = 0; i &lt; string_numbershort.length(); i++) {\n            // Equivalente a funcion atoi() en c\n            result = result * 10 + (string_numbershort.charAt(i) - '0') * 2;\n            System.out.println(result);\n        }\n    }\n}\n\n</code></pre>\n<p>And the results in my terminal:</p>\n<pre><code>Por favor, introduce tu número de tarjeta &gt;&gt; 4003600000000014\n4003600000000014\n4003600000000014\n100006042\n20\n200\n2000\n20000 // This the 0 that gets deleted!!\n200012\n2000120\n20001208\n</code></pre>\n<p>The result I'm expecting to be printed is 200001208 not 20001208.</p>\n"},{"tags":["java","arrays","string","indexof"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1697266658,"post_id":77291793,"comment_id":136260957,"body_markdown":"`Arrays.asList` returns a `List` object. But you neglected to capture that `List`, so it went to garbage collection.","body":"<code>Arrays.asList</code> returns a <code>List</code> object. But you neglected to capture that <code>List</code>, so it went to garbage collection."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1697266987,"post_id":77291793,"comment_id":136260983,"body_markdown":"`fromCity` does not contain any items. It&#39;s empty. Additionally, `asList(fromList)` gives you a `List&lt;ArrayList&lt;String&gt;&gt;` which will not contain a string (it contains lists) – your IDE should show you at least two warnings for that code. Read and understand the warnings","body":"<code>fromCity</code> does not contain any items. It&#39;s empty. Additionally, <code>asList(fromList)</code> gives you a <code>List&lt;ArrayList&lt;String&gt;&gt;</code> which will not contain a string (it contains lists) – your IDE should show you at least two warnings for that code. Read and understand the warnings"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1697270832,"post_id":77291793,"comment_id":136261262,"body_markdown":"`Arrays.asList` can still be changed. `List.of` creates an immutable list, `Arrays.asList` does not (you can still change items, sort the list, etc.)","body":"<code>Arrays.asList</code> can still be changed. <code>List.of</code> creates an immutable list, <code>Arrays.asList</code> does not (you can still change items, sort the list, etc.)"}],"answers":[{"comments":[{"owner":{"account_id":29668911,"reputation":13,"user_id":22738664,"display_name":"beansies"},"score":0,"creation_date":1697266248,"post_id":77291816,"comment_id":136260932,"body_markdown":"Thank you! I was able to figure everything out and get it to run the way I wanted, appreciate the help.","body":"Thank you! I was able to figure everything out and get it to run the way I wanted, appreciate the help."}],"tags":[],"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697301206,"creation_date":1697264052,"answer_id":77291816,"question_id":77291793,"body_markdown":"The main issue is that your `fromCity` is empty as the result of `Arrays.asList` is not assigned to `fromCity`. The indentation of your code is somehow misleading here, as one can be tricked into thinking this is a chained call, but it is not.\r\n\r\nAlso, as `fromCity` is already an `ArrayList` using `asList(fromCity)` is rather pointless and you you can get the index directly by `fromCity.indexOf(city1)`.\r\n\r\nBTW: you will face `ArrayIndexOutOfBoundsException` if either city is not found because you don&#39;t check if index is `-1` prior using it.","title":"Cannot get indexOf() from array","body":"<p>The main issue is that your <code>fromCity</code> is empty as the result of <code>Arrays.asList</code> is not assigned to <code>fromCity</code>. The indentation of your code is somehow misleading here, as one can be tricked into thinking this is a chained call, but it is not.</p>\n<p>Also, as <code>fromCity</code> is already an <code>ArrayList</code> using <code>asList(fromCity)</code> is rather pointless and you you can get the index directly by <code>fromCity.indexOf(city1)</code>.</p>\n<p>BTW: you will face <code>ArrayIndexOutOfBoundsException</code> if either city is not found because you don't check if index is <code>-1</code> prior using it.</p>\n"}],"owner":{"account_id":29668911,"reputation":13,"user_id":22738664,"display_name":"beansies"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291816,"answer_count":1,"score":0,"last_activity_date":1697301206,"creation_date":1697263229,"question_id":77291793,"body_markdown":"I&#39;m new to Java and I&#39;m trying to do this project for my class however I&#39;ve been stuck for the last hour on one single part. I&#39;m trying to call the index of the variables under the &quot;fromCity&quot; array, however the all come back as &quot;-1&quot;. I&#39;m not sure why it is doing this because in the second array &quot;toCity&quot; I am having no issues in getting the index. Thank you for the help. \r\n\r\n\r\n\r\n\r\n```\r\n    import java.util.ArrayList;\r\n    import java.util.Scanner;\r\n    import java.util.Arrays;\r\n    import static java.util.Arrays.asList;\r\n\r\n    public class EX07_2 {\r\n        public static void main(String[] args){\r\n           Scanner scanner = new Scanner(System.in);\r\n           ArrayList&lt;String&gt; fromCity = new ArrayList&lt;&gt;();\r\n                Arrays.asList(&quot;Los Angeles&quot;, &quot;San Francisco&quot;, &quot;Portland&quot;);\r\n\r\n            String[] toCity;\r\n            toCity = new String[3];\r\n            toCity[0] = &quot;Seattle&quot;;\r\n            toCity[1] = &quot;Denver&quot;;\r\n            toCity[2] = &quot;Chicago&quot;;\r\n\r\n            int [][] distance = new int[3][3];\r\n            distance [0][0] = 1135;\r\n            distance [0][1] = 1016;\r\n            distance [0][2] = 2015;\r\n            distance [1][0] = 807;\r\n            distance [1][1] = 1250;\r\n            distance [1][2] = 2128;\r\n            distance [2][0] = 174;\r\n            distance [2][1] = 1240;\r\n            distance [2][2] = 2121;\r\n\r\n\r\n            System.out.println(&quot;Enter the name of a city to travel from: &quot;);\r\n            String city1 = scanner.nextLine();\r\n            System.out.println(&quot;Enter the name of a city to travel to: &quot;);\r\n            String city2 = scanner.nextLine();\r\n            int index1 = asList(fromCity).indexOf(city1);\r\n            int index2 = asList(toCity).indexOf(city2);\r\n\r\n            System.out.println(distance[index1][index2]);\r\n\r\n\r\n\r\n\r\n        }\r\n    }\r\n```","title":"Cannot get indexOf() from array","body":"<p>I'm new to Java and I'm trying to do this project for my class however I've been stuck for the last hour on one single part. I'm trying to call the index of the variables under the &quot;fromCity&quot; array, however the all come back as &quot;-1&quot;. I'm not sure why it is doing this because in the second array &quot;toCity&quot; I am having no issues in getting the index. Thank you for the help.</p>\n<pre><code>    import java.util.ArrayList;\n    import java.util.Scanner;\n    import java.util.Arrays;\n    import static java.util.Arrays.asList;\n\n    public class EX07_2 {\n        public static void main(String[] args){\n           Scanner scanner = new Scanner(System.in);\n           ArrayList&lt;String&gt; fromCity = new ArrayList&lt;&gt;();\n                Arrays.asList(&quot;Los Angeles&quot;, &quot;San Francisco&quot;, &quot;Portland&quot;);\n\n            String[] toCity;\n            toCity = new String[3];\n            toCity[0] = &quot;Seattle&quot;;\n            toCity[1] = &quot;Denver&quot;;\n            toCity[2] = &quot;Chicago&quot;;\n\n            int [][] distance = new int[3][3];\n            distance [0][0] = 1135;\n            distance [0][1] = 1016;\n            distance [0][2] = 2015;\n            distance [1][0] = 807;\n            distance [1][1] = 1250;\n            distance [1][2] = 2128;\n            distance [2][0] = 174;\n            distance [2][1] = 1240;\n            distance [2][2] = 2121;\n\n\n            System.out.println(&quot;Enter the name of a city to travel from: &quot;);\n            String city1 = scanner.nextLine();\n            System.out.println(&quot;Enter the name of a city to travel to: &quot;);\n            String city2 = scanner.nextLine();\n            int index1 = asList(fromCity).indexOf(city1);\n            int index2 = asList(toCity).indexOf(city2);\n\n            System.out.println(distance[index1][index2]);\n\n\n\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","kotlin","dji-sdk"],"comments":[{"owner":{"account_id":13210775,"reputation":999,"user_id":9541096,"display_name":"Owais Yosuf"},"score":2,"creation_date":1697300098,"post_id":77293585,"comment_id":136263849,"body_markdown":"Share your code","body":"Share your code"}],"owner":{"account_id":29671745,"reputation":1,"user_id":22740811,"display_name":"Rafael Prado"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697299943,"creation_date":1697299943,"question_id":77293585,"body_markdown":"I am currently experiencing an issue with a &quot;Request Handler Not Found&quot; message while working on a waypoint mission. I am trying to initiate a waypoint mission using the DJI SDK, but I keep receiving this error message.\r\n\r\nI have reviewed the documentation thoroughly and ensured that my code aligns with the provided guidelines. However, the error persists. I suspect there might be an issue with the configuration or the setup of the mission.\r\n\r\nHas anyone encountered a similar problem before? Could someone please guide me on how to resolve this issue or provide any insights on what might be causing this error? I would greatly appreciate any help or suggestions.\r\n\r\n\r\n\r\nI have reviewed the documentation thoroughly and ensured that my code aligns with the provided guidelines.","title":"Im Taking Request_handler_not_found","body":"<p>I am currently experiencing an issue with a &quot;Request Handler Not Found&quot; message while working on a waypoint mission. I am trying to initiate a waypoint mission using the DJI SDK, but I keep receiving this error message.</p>\n<p>I have reviewed the documentation thoroughly and ensured that my code aligns with the provided guidelines. However, the error persists. I suspect there might be an issue with the configuration or the setup of the mission.</p>\n<p>Has anyone encountered a similar problem before? Could someone please guide me on how to resolve this issue or provide any insights on what might be causing this error? I would greatly appreciate any help or suggestions.</p>\n<p>I have reviewed the documentation thoroughly and ensured that my code aligns with the provided guidelines.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":1,"creation_date":1697291158,"post_id":77290253,"comment_id":136262885,"body_markdown":"This is an easy task on OAuth2 resource servers, but not on OAuth2 clients. Can you provide more details about your use case (why do you need to opt-out `OAuth2AuthenticationToken`)?","body":"This is an easy task on OAuth2 resource servers, but not on OAuth2 clients. Can you provide more details about your use case (why do you need to opt-out <code>OAuth2AuthenticationToken</code>)?"}],"answers":[{"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697299546,"creation_date":1697299546,"answer_id":77293549,"question_id":77290253,"body_markdown":"Did you set the securityHandler to the successHandler of oauth2Login?\r\n\r\n     @Bean\r\n     public SecurityFilterChain filterChain(HttpSecurity http,SecurityHandler securityHandler) throws Exception {\r\n            return http\r\n                    .csrf(AbstractHttpConfigurer::disable)\r\n                    .oauth2Login(c -&gt; c.successHandler(securityHandler))\r\n                    .authorizeHttpRequests(c -&gt; c.anyRequest().authenticated())\r\n                    .build();\r\n        }","title":"Replace Authentication object after successful authentication","body":"<p>Did you set the securityHandler to the successHandler of oauth2Login?</p>\n<pre><code> @Bean\n public SecurityFilterChain filterChain(HttpSecurity http,SecurityHandler securityHandler) throws Exception {\n        return http\n                .csrf(AbstractHttpConfigurer::disable)\n                .oauth2Login(c -&gt; c.successHandler(securityHandler))\n                .authorizeHttpRequests(c -&gt; c.anyRequest().authenticated())\n                .build();\n    }\n</code></pre>\n"}],"owner":{"account_id":3138894,"reputation":3547,"user_id":2654773,"accept_rate":96,"display_name":"eztam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77293549,"answer_count":1,"score":-1,"last_activity_date":1697299546,"creation_date":1697225857,"question_id":77290253,"body_markdown":"I have a Spring application that uses OAuth2. After a successful login, I can see a \r\n `OAuth2AuthenticationToken` in the users security context.\r\n\r\nI&#39;d like to replace this token by a different implementation of `Authentication`like PreAuthenticatedAuthenticationToken.\r\n\r\nHow can I do this?\r\nSo far I tried to replace the `Authentication` in the `SecurityContext` from an `AuthenticationSuccessHandler`. But I&#39;m still seeing an `OAuth2AuthenticationToken` after this code ran.\r\n \r\n\r\n\r\n    @Component\r\n    public class SecurityHandler implements AuthenticationSuccessHandler {\r\n\r\n     public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException  {\r\n          \r\n           PreAuthenticatedAuthenticationToken newToken = new PreAuthenticatedAuthenticationToken(&quot;test-user&quot;,&quot;pw&quot;);\r\n           token.setAuthenticated(true);\r\n\r\n           SecurityContext secContext = SecurityContextHolder.getContext();\r\n           secContext.setAuthentication(token);\r\n\r\n           HttpSession session = request.getSession(true);\r\n           session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, secContext);\r\n        }\r\n    }","title":"Replace Authentication object after successful authentication","body":"<p>I have a Spring application that uses OAuth2. After a successful login, I can see a\n<code>OAuth2AuthenticationToken</code> in the users security context.</p>\n<p>I'd like to replace this token by a different implementation of <code>Authentication</code>like PreAuthenticatedAuthenticationToken.</p>\n<p>How can I do this?\nSo far I tried to replace the <code>Authentication</code> in the <code>SecurityContext</code> from an <code>AuthenticationSuccessHandler</code>. But I'm still seeing an <code>OAuth2AuthenticationToken</code> after this code ran.</p>\n<pre><code>@Component\npublic class SecurityHandler implements AuthenticationSuccessHandler {\n\n public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException  {\n      \n       PreAuthenticatedAuthenticationToken newToken = new PreAuthenticatedAuthenticationToken(&quot;test-user&quot;,&quot;pw&quot;);\n       token.setAuthenticated(true);\n\n       SecurityContext secContext = SecurityContextHolder.getContext();\n       secContext.setAuthentication(token);\n\n       HttpSession session = request.getSession(true);\n       session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, secContext);\n    }\n}\n</code></pre>\n"},{"tags":["java","palindrome"],"comments":[{"owner":{"account_id":28943489,"reputation":100,"user_id":22169585,"display_name":"Jordan"},"score":2,"creation_date":1697294362,"post_id":77293208,"comment_id":136263197,"body_markdown":"You could have two versions of the initial string, one with the space and one without the string, and return the one with the space. As for your professor, I would save a couple versions over time and submit them all so they can see that you were the one who made the code with multiple changes over time.","body":"You could have two versions of the initial string, one with the space and one without the string, and return the one with the space. As for your professor, I would save a couple versions over time and submit them all so they can see that you were the one who made the code with multiple changes over time."},{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":1,"creation_date":1697294389,"post_id":77293208,"comment_id":136263203,"body_markdown":"Why not assign to a new variable after `replace` and work with that string?","body":"Why not assign to a new variable after <code>replace</code> and work with that string?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1697297166,"post_id":77293208,"comment_id":136263481,"body_markdown":"You could consider using the `String.equalsIgnoreCase` method for the comparison.","body":"You could consider using the <code>String.equalsIgnoreCase</code> method for the comparison."}],"answers":[{"tags":[],"owner":{"account_id":26642835,"reputation":1546,"user_id":20258214,"display_name":"nokla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697296148,"creation_date":1697295803,"answer_id":77293332,"question_id":77293208,"body_markdown":"You can use a third string variable to store to original/modified string:\r\n\r\n(See `sushi`)\r\n```java\r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n   \r\n   Scanner twice = new Scanner(System.in);\r\n   String sushi = twice.nextLine();\r\n   String ibasaw = &quot;&quot;;\r\n   String wasabi = sushi.replace(&quot; &quot;,&quot;&quot;);\r\n   \r\n   for(int i = wasabi.length()-1;i&gt;=0;i--)\r\n   {\r\n      ibasaw += wasabi.charAt(i);\r\n   }\r\n   if(wasabi.toLowerCase().equals(ibasaw.toLowerCase()))\r\n   {\r\n      System.out.println(&quot;palindrome: &quot; + sushi);\r\n   }\r\n   else\r\n   {\r\n      System.out.println(&quot;not a palindrome: &quot; + sushi);\r\n   }\r\n }\r\n}\r\n```\r\n\r\nIf you don&#39;t want to use another variable, you can also use `replace` when comparing the strings instead of saving it to variable:\r\n```\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n   \r\n   Scanner twice = new Scanner(System.in);\r\n   String wasabi = twice.nextLine();\r\n   String ibasaw = &quot;&quot;;\r\n   \r\n   for(int i = wasabi.length()-1;i&gt;=0;i--)\r\n   {\r\n      ibasaw += wasabi.charAt(i);\r\n   }\r\n   if(wasabi.toLowerCase().replace(&quot; &quot;, &quot;&quot;).equals(ibasaw.toLowerCase().replace(&quot; &quot;, &quot;&quot;)))\r\n   {\r\n      System.out.println(&quot;palindrome: &quot; + wasabi);\r\n   }\r\n   else\r\n   {\r\n      System.out.println(&quot;not a palindrome: &quot; + wasabi);\r\n   }\r\n }\r\n}\r\n```","title":"How to &quot;bring back&quot; whitespaces after using a line of code that ignores them? (Palindrome assignment)","body":"<p>You can use a third string variable to store to original/modified string:</p>\n<p>(See <code>sushi</code>)</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class LabProgram {\n   public static void main(String[] args) {\n   \n   Scanner twice = new Scanner(System.in);\n   String sushi = twice.nextLine();\n   String ibasaw = &quot;&quot;;\n   String wasabi = sushi.replace(&quot; &quot;,&quot;&quot;);\n   \n   for(int i = wasabi.length()-1;i&gt;=0;i--)\n   {\n      ibasaw += wasabi.charAt(i);\n   }\n   if(wasabi.toLowerCase().equals(ibasaw.toLowerCase()))\n   {\n      System.out.println(&quot;palindrome: &quot; + sushi);\n   }\n   else\n   {\n      System.out.println(&quot;not a palindrome: &quot; + sushi);\n   }\n }\n}\n</code></pre>\n<p>If you don't want to use another variable, you can also use <code>replace</code> when comparing the strings instead of saving it to variable:</p>\n<pre><code>public class LabProgram {\n   public static void main(String[] args) {\n   \n   Scanner twice = new Scanner(System.in);\n   String wasabi = twice.nextLine();\n   String ibasaw = &quot;&quot;;\n   \n   for(int i = wasabi.length()-1;i&gt;=0;i--)\n   {\n      ibasaw += wasabi.charAt(i);\n   }\n   if(wasabi.toLowerCase().replace(&quot; &quot;, &quot;&quot;).equals(ibasaw.toLowerCase().replace(&quot; &quot;, &quot;&quot;)))\n   {\n      System.out.println(&quot;palindrome: &quot; + wasabi);\n   }\n   else\n   {\n      System.out.println(&quot;not a palindrome: &quot; + wasabi);\n   }\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697298443,"creation_date":1697298443,"answer_id":77293495,"question_id":77293208,"body_markdown":"Save a copy of the value.\r\n\r\n```java\r\nScanner twice = new Scanner(System.in);\r\nString wasabi, copy;\r\nwasabi = (copy = twice.nextLine()).replace(&quot; &quot;,&quot;&quot;);\r\nString ibasaw = &quot;&quot;;\r\n\r\nfor (char c : wasabi.toCharArray())\r\n    ibasaw = c + ibasaw;\r\n\r\nif(!wasabi.equalsIgnoreCase(ibasaw))\r\n    System.out.print(&quot;not a &quot;);\r\nSystem.out.println(&quot;palindrome: &quot; + copy);\r\n```","title":"How to &quot;bring back&quot; whitespaces after using a line of code that ignores them? (Palindrome assignment)","body":"<p>Save a copy of the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner twice = new Scanner(System.in);\nString wasabi, copy;\nwasabi = (copy = twice.nextLine()).replace(&quot; &quot;,&quot;&quot;);\nString ibasaw = &quot;&quot;;\n\nfor (char c : wasabi.toCharArray())\n    ibasaw = c + ibasaw;\n\nif(!wasabi.equalsIgnoreCase(ibasaw))\n    System.out.print(&quot;not a &quot;);\nSystem.out.println(&quot;palindrome: &quot; + copy);\n</code></pre>\n"}],"owner":{"account_id":29671014,"reputation":3,"user_id":22740252,"display_name":"Rob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77293332,"answer_count":2,"score":0,"last_activity_date":1697298443,"creation_date":1697293735,"question_id":77293208,"body_markdown":"I&#39;m struggling to figure out exactly how I&#39;d be able to place spaces back into the output of my code. For example, if the palindrome is &quot;race car,&quot; I need to first ignore the spaces in that statement by using `userInput = userInput.replace(&quot; &quot;,&quot;&quot;);`, but then I need the program to still print &quot;palindrome: race car&quot; rather than &quot;racecar&quot;. Would anyone be able to troubleshoot this for me?\r\n(Ignore the weird names for my variable, my professor doesn&#39;t believe my validity in my coding and thinks I copy other people so I use these unique phrases/words to make him know I&#39;m not cheating.)\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n   \r\n   Scanner twice = new Scanner(System.in);\r\n   String wasabi = twice.nextLine();\r\n   String ibasaw = &quot;&quot;;\r\n   String[] split = wasabi.split(&quot; &quot;);\r\n   wasabi = wasabi.replace(&quot; &quot;,&quot;&quot;);\r\n   \r\n   for(int i = wasabi.length()-1;i&gt;=0;i--)\r\n   {\r\n      ibasaw=ibasaw+wasabi.charAt(i);\r\n   }\r\n   if(wasabi.toLowerCase().equals(ibasaw.toLowerCase()))\r\n   {\r\n      System.out.println(&quot;palindrome: &quot; + wasabi);\r\n   }\r\n   else\r\n   {\r\n      System.out.println(&quot;not a palindrome: &quot; + wasabi);\r\n   }\r\n }\r\n}\r\n\r\n```\r\n\r\nI tried inputs with spaces and String splitting but none of it worked.","title":"How to &quot;bring back&quot; whitespaces after using a line of code that ignores them? (Palindrome assignment)","body":"<p>I'm struggling to figure out exactly how I'd be able to place spaces back into the output of my code. For example, if the palindrome is &quot;race car,&quot; I need to first ignore the spaces in that statement by using <code>userInput = userInput.replace(&quot; &quot;,&quot;&quot;);</code>, but then I need the program to still print &quot;palindrome: race car&quot; rather than &quot;racecar&quot;. Would anyone be able to troubleshoot this for me?\n(Ignore the weird names for my variable, my professor doesn't believe my validity in my coding and thinks I copy other people so I use these unique phrases/words to make him know I'm not cheating.)</p>\n<pre><code>import java.util.Scanner;\n\npublic class LabProgram {\n   public static void main(String[] args) {\n   \n   Scanner twice = new Scanner(System.in);\n   String wasabi = twice.nextLine();\n   String ibasaw = &quot;&quot;;\n   String[] split = wasabi.split(&quot; &quot;);\n   wasabi = wasabi.replace(&quot; &quot;,&quot;&quot;);\n   \n   for(int i = wasabi.length()-1;i&gt;=0;i--)\n   {\n      ibasaw=ibasaw+wasabi.charAt(i);\n   }\n   if(wasabi.toLowerCase().equals(ibasaw.toLowerCase()))\n   {\n      System.out.println(&quot;palindrome: &quot; + wasabi);\n   }\n   else\n   {\n      System.out.println(&quot;not a palindrome: &quot; + wasabi);\n   }\n }\n}\n\n</code></pre>\n<p>I tried inputs with spaces and String splitting but none of it worked.</p>\n"},{"tags":["java","binary-search-tree"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":3,"creation_date":1697298311,"post_id":77293453,"comment_id":136263617,"body_markdown":"Many similar questions on SO. Not a good idea to `sleep` on the _Event Dispatch Thread_ (EDT). Consider using a [SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html).","body":"Many similar questions on SO. Not a good idea to <code>sleep</code> on the <i>Event Dispatch Thread</i> (EDT). Consider using a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">SwingWorker</a>."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":1,"creation_date":1697298990,"post_id":77293453,"comment_id":136263706,"body_markdown":"NB: don&#39;t use `System.out.println(ex.toString());` but use `ex.printStackTrace();` instead - but only (!) for developing and debugging purposes. *Never* use this in production code. (And use the `printStackTrace` also because it&#39;s spotted easier by tools and humans to be removed before going with code in production.)","body":"NB: don&#39;t use <code>System.out.println(ex.toString());</code> but use <code>ex.printStackTrace();</code> instead - but only (!) for developing and debugging purposes. <i>Never</i> use this in production code. (And use the <code>printStackTrace</code> also because it&#39;s spotted easier by tools and humans to be removed before going with code in production.)"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1697299403,"post_id":77293453,"comment_id":136263759,"body_markdown":"How is this exactly related to threading? It looks more to me that you want to find a way where you ensure that no parallel processing is done, but you want to serialize a calculation (one step of boolean search) with its visual representation _and_ slow it down in a way so a human can see changes.\nSo you actually should look how to ensure that your changes are drawn, before you send your thread to sleep.\nOr find a different way of visual presentation (maybe a kind of tree or table where each row represents a step in the search) where the steps are traceable even if they are drawn &quot;at once&quot;.","body":"How is this exactly related to threading? It looks more to me that you want to find a way where you ensure that no parallel processing is done, but you want to serialize a calculation (one step of boolean search) with its visual representation <i>and</i> slow it down in a way so a human can see changes. So you actually should look how to ensure that your changes are drawn, before you send your thread to sleep. Or find a different way of visual presentation (maybe a kind of tree or table where each row represents a step in the search) where the steps are traceable even if they are drawn &quot;at once&quot;."}],"owner":{"account_id":24070389,"reputation":1,"user_id":18046391,"display_name":"Kelvin Huynh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697297807,"creation_date":1697297807,"question_id":77293453,"body_markdown":"I&#39;m encountering issues with the threading in my project. As you can observe in the image, I&#39;m attempting to illustrate all the steps involved in reaching the desired number through a binary search. However, it appears to skip directly to the final part, even though I&#39;ve allocated 5 seconds for each step. \r\n\r\n\r\n```\r\nelse if (e.getSource() == startButton){\r\n                colorLabel(Integer.toString(arrayLabel[0]), Color.BLUE);\r\n                colorLabel(Integer.toString(arrayLabel[arrayLabel.length-1]), Color.BLUE);\r\n                BinarySearchAlgorithm(arrayLabel, 0, arrayLabel.length-1, 1);\r\n}\r\n\r\npublic void BinarySearchAlgorithm(int arr[], int l, int r, int x) {\r\n        int auxl=l, auxr=r, auxm;\r\n        while (l &lt;= r) {\r\n            int m = l + (r - l) / 2;\r\n            colorLabel(Integer.toString(arrayLabel[m]), Color.BLUE);\r\n            if (arr[m] == x) {\r\n                colorLabel(Integer.toString(arrayLabel[m]), Color.GREEN);\r\n                return;\r\n            }\r\n            try {\r\n                Thread.sleep(5000);\r\n            } catch (InterruptedException ex) {\r\n                System.out.println(ex.toString());\r\n            }\r\n            if (arr[m] &lt; x) {\r\n                l = m + 1;\r\n                colorLabel(Integer.toString(arrayLabel[auxl]), Color.BLACK);\r\n                colorLabel(Integer.toString(arrayLabel[l]), Color.BLUE);\r\n            }\r\n            else {\r\n                r = m - 1;\r\n                colorLabel(Integer.toString(arrayLabel[auxr]), Color.BLACK);\r\n                colorLabel(Integer.toString(arrayLabel[r]), Color.BLUE);\r\n            }\r\n            colorLabel(Integer.toString(arrayLabel[m]), Color.BLACK);\r\n        }\r\n    }\r\n```\r\n\r\n\r\nAnyone know what kind of this problem?","title":"Troubleshooting a Persistent Java Thread Issue","body":"<p>I'm encountering issues with the threading in my project. As you can observe in the image, I'm attempting to illustrate all the steps involved in reaching the desired number through a binary search. However, it appears to skip directly to the final part, even though I've allocated 5 seconds for each step.</p>\n<pre><code>else if (e.getSource() == startButton){\n                colorLabel(Integer.toString(arrayLabel[0]), Color.BLUE);\n                colorLabel(Integer.toString(arrayLabel[arrayLabel.length-1]), Color.BLUE);\n                BinarySearchAlgorithm(arrayLabel, 0, arrayLabel.length-1, 1);\n}\n\npublic void BinarySearchAlgorithm(int arr[], int l, int r, int x) {\n        int auxl=l, auxr=r, auxm;\n        while (l &lt;= r) {\n            int m = l + (r - l) / 2;\n            colorLabel(Integer.toString(arrayLabel[m]), Color.BLUE);\n            if (arr[m] == x) {\n                colorLabel(Integer.toString(arrayLabel[m]), Color.GREEN);\n                return;\n            }\n            try {\n                Thread.sleep(5000);\n            } catch (InterruptedException ex) {\n                System.out.println(ex.toString());\n            }\n            if (arr[m] &lt; x) {\n                l = m + 1;\n                colorLabel(Integer.toString(arrayLabel[auxl]), Color.BLACK);\n                colorLabel(Integer.toString(arrayLabel[l]), Color.BLUE);\n            }\n            else {\n                r = m - 1;\n                colorLabel(Integer.toString(arrayLabel[auxr]), Color.BLACK);\n                colorLabel(Integer.toString(arrayLabel[r]), Color.BLUE);\n            }\n            colorLabel(Integer.toString(arrayLabel[m]), Color.BLACK);\n        }\n    }\n</code></pre>\n<p>Anyone know what kind of this problem?</p>\n"},{"tags":["java","mariadb"],"comments":[{"owner":{"account_id":3428409,"reputation":18841,"user_id":2873538,"display_name":"Ajeet Shah"},"score":0,"creation_date":1466354717,"post_id":37909487,"comment_id":63271091,"body_markdown":"Did you try [this](http://stackoverflow.com/a/30238472/2873538)?","body":"Did you try <a href=\"http://stackoverflow.com/a/30238472/2873538\">this</a>?"},{"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"score":0,"creation_date":1466355875,"post_id":37909487,"comment_id":63271440,"body_markdown":"yes,i also use class.forName(org.mariadb.jdbc.Driver)","body":"yes,i also use class.forName(org.mariadb.jdbc.Driver)"},{"owner":{"account_id":3428409,"reputation":18841,"user_id":2873538,"display_name":"Ajeet Shah"},"score":0,"creation_date":1466356252,"post_id":37909487,"comment_id":63271566,"body_markdown":"Are the ports 8080 and 3306 free as discussed in [this](http://stackoverflow.com/a/30238472/2873538) post?","body":"Are the ports 8080 and 3306 free as discussed in <a href=\"http://stackoverflow.com/a/30238472/2873538\">this</a> post?"},{"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"score":0,"creation_date":1466356339,"post_id":37909487,"comment_id":63271589,"body_markdown":"Port 3306 is used to connect with mariadb as mysql.jdbc:mysql://localhost:3306/test","body":"Port 3306 is used to connect with mariadb as mysql.jdbc:mysql://localhost:3306/test"},{"owner":{"account_id":3428409,"reputation":18841,"user_id":2873538,"display_name":"Ajeet Shah"},"score":0,"creation_date":1466357139,"post_id":37909487,"comment_id":63271820,"body_markdown":"try to connect to `mysql` from command prompt: `mysql -u username -h localhost -P 3306 -p your_db_name`","body":"try to connect to <code>mysql</code> from command prompt: <code>mysql -u username -h localhost -P 3306 -p your_db_name</code>"},{"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"score":0,"creation_date":1466407624,"post_id":37909487,"comment_id":63284529,"body_markdown":"This i tried already the i got the prompt as ,Welcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 35\nServer version: 5.5.49-MariaDB-1ubuntu0.14.04.1 (Ubuntu)\n\nCopyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.\n\nType &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.\n\nMariaDB [(none)]&gt; CREATE DATABASE db;\nQuery OK, 1 row affected (0.00 sec)\n\nMariaDB [(none)]&gt; use db;\nDatabase changed","body":"This i tried already the i got the prompt as ,Welcome to the MariaDB monitor.  Commands end with ; or \\g. Your MariaDB connection id is 35 Server version: 5.5.49-MariaDB-1ubuntu0.14.04.1 (Ubuntu)  Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.  Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.  MariaDB [(none)]&gt; CREATE DATABASE db; Query OK, 1 row affected (0.00 sec)  MariaDB [(none)]&gt; use db; Database changed"},{"owner":{"account_id":1065971,"reputation":1683,"user_id":1066531,"accept_rate":57,"display_name":"Zymus"},"score":0,"creation_date":1466408585,"post_id":37909487,"comment_id":63285041,"body_markdown":"Don&#39;t you have to open the connection first?","body":"Don&#39;t you have to open the connection first?"},{"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"score":0,"creation_date":1466414264,"post_id":37909487,"comment_id":63288288,"body_markdown":"how can we open the connection","body":"how can we open the connection"},{"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"score":0,"creation_date":1466611663,"post_id":37909487,"comment_id":63392629,"body_markdown":"yes,i connected it using mysql -u username -h localhost -P 3306 -p your_db_name.But cant access through java program","body":"yes,i connected it using mysql -u username -h localhost -P 3306 -p your_db_name.But cant access through java program"}],"answers":[{"tags":[],"owner":{"account_id":8483215,"reputation":69,"user_id":6362305,"display_name":"Dungeon_master"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466355578,"creation_date":1466355578,"answer_id":37909676,"question_id":37909487,"body_markdown":"I think the problem is with TCP/IP port . Mariadb is not listening to the local host.\r\nYou should try : Configure mariadb to listen on localhost. \r\nIn the `/etc/my.cnf` config file, under the [mysqld] line, add the following:\r\n\r\n`bind-address = 127.10.230.440`\r\n\r\nOr try to disconnect the MYSQL database first.","title":"How can I connect to mariadb using java?","body":"<p>I think the problem is with TCP/IP port . Mariadb is not listening to the local host.\nYou should try : Configure mariadb to listen on localhost. \nIn the <code>/etc/my.cnf</code> config file, under the [mysqld] line, add the following:</p>\n\n<p><code>bind-address = 127.10.230.440</code></p>\n\n<p>Or try to disconnect the MYSQL database first.</p>\n"},{"tags":[],"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1518103919,"creation_date":1466407373,"answer_id":37916676,"question_id":37909487,"body_markdown":"Java MariaDB example:\r\n---\r\n\r\n    //STEP 1. Import required packages\r\n    package mariadb;\r\n    \r\n    import java.sql.*;\r\n    \r\n    public class Mariadb {\r\n        // JDBC driver name and database URL\r\n    \r\n        static final String JDBC_DRIVER = &quot;org.mariadb.jdbc.Driver&quot;;\r\n        static final String DB_URL = &quot;jdbc:mariadb://192.168.100.174/db&quot;;\r\n    \r\n        //  Database credentials\r\n        static final String USER = &quot;root&quot;;\r\n        static final String PASS = &quot;root&quot;;\r\n    \r\n        public static void main(String[] args) {\r\n            Connection conn = null;\r\n            Statement stmt = null;\r\n            try {\r\n                //STEP 2: Register JDBC driver\r\n                Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n    \r\n                //STEP 3: Open a connection\r\n                System.out.println(&quot;Connecting to a selected database...&quot;);\r\n                conn = DriverManager.getConnection(\r\n                        &quot;jdbc:mariadb://192.168.100.174/db&quot;, &quot;root&quot;, &quot;root&quot;);\r\n                System.out.println(&quot;Connected database successfully...&quot;);\r\n    \r\n                //STEP 4: Execute a query\r\n                System.out.println(&quot;Creating table in given database...&quot;);\r\n                stmt = conn.createStatement();\r\n    \r\n                String sql = &quot;CREATE TABLE REGISTRATION &quot;\r\n                        + &quot;(id INTEGER not NULL, &quot;\r\n                        + &quot; first VARCHAR(255), &quot;\r\n                        + &quot; last VARCHAR(255), &quot;\r\n                        + &quot; age INTEGER, &quot;\r\n                        + &quot; PRIMARY KEY ( id ))&quot;;\r\n    \r\n                stmt.executeUpdate(sql);\r\n                System.out.println(&quot;Created table in given database...&quot;);\r\n            } catch (SQLException se) {\r\n                //Handle errors for JDBC\r\n                se.printStackTrace();\r\n            } catch (Exception e) {\r\n                //Handle errors for Class.forName\r\n                e.printStackTrace();\r\n            } finally {\r\n                //finally block used to close resources\r\n                try {\r\n                    if (stmt != null) {\r\n                        conn.close();\r\n                    }\r\n                } catch (SQLException se) {\r\n                }// do nothing\r\n                try {\r\n                    if (conn != null) {\r\n                        conn.close();\r\n                    }\r\n                } catch (SQLException se) {\r\n                    se.printStackTrace();\r\n                }//end finally try\r\n            }//end try\r\n            System.out.println(&quot;Goodbye!&quot;);\r\n        }//end main\r\n    }//end JDBCExample\r\n\r\n\r\nI use this example.I change the bind address to 127.10.230.440. and i restart the server   sudo /etc/init.d/mysql start .\r\n\r\nList item\r\n","title":"How can I connect to mariadb using java?","body":"<h2>Java MariaDB example:</h2>\n\n<pre><code>//STEP 1. Import required packages\npackage mariadb;\n\nimport java.sql.*;\n\npublic class Mariadb {\n    // JDBC driver name and database URL\n\n    static final String JDBC_DRIVER = \"org.mariadb.jdbc.Driver\";\n    static final String DB_URL = \"jdbc:mariadb://192.168.100.174/db\";\n\n    //  Database credentials\n    static final String USER = \"root\";\n    static final String PASS = \"root\";\n\n    public static void main(String[] args) {\n        Connection conn = null;\n        Statement stmt = null;\n        try {\n            //STEP 2: Register JDBC driver\n            Class.forName(\"org.mariadb.jdbc.Driver\");\n\n            //STEP 3: Open a connection\n            System.out.println(\"Connecting to a selected database...\");\n            conn = DriverManager.getConnection(\n                    \"jdbc:mariadb://192.168.100.174/db\", \"root\", \"root\");\n            System.out.println(\"Connected database successfully...\");\n\n            //STEP 4: Execute a query\n            System.out.println(\"Creating table in given database...\");\n            stmt = conn.createStatement();\n\n            String sql = \"CREATE TABLE REGISTRATION \"\n                    + \"(id INTEGER not NULL, \"\n                    + \" first VARCHAR(255), \"\n                    + \" last VARCHAR(255), \"\n                    + \" age INTEGER, \"\n                    + \" PRIMARY KEY ( id ))\";\n\n            stmt.executeUpdate(sql);\n            System.out.println(\"Created table in given database...\");\n        } catch (SQLException se) {\n            //Handle errors for JDBC\n            se.printStackTrace();\n        } catch (Exception e) {\n            //Handle errors for Class.forName\n            e.printStackTrace();\n        } finally {\n            //finally block used to close resources\n            try {\n                if (stmt != null) {\n                    conn.close();\n                }\n            } catch (SQLException se) {\n            }// do nothing\n            try {\n                if (conn != null) {\n                    conn.close();\n                }\n            } catch (SQLException se) {\n                se.printStackTrace();\n            }//end finally try\n        }//end try\n        System.out.println(\"Goodbye!\");\n    }//end main\n}//end JDBCExample\n</code></pre>\n\n<p>I use this example.I change the bind address to 127.10.230.440. and i restart the server   sudo /etc/init.d/mysql start .</p>\n\n<p>List item</p>\n"},{"tags":[],"owner":{"account_id":15301813,"reputation":31,"user_id":11039936,"display_name":"Gaurav "},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549771940,"creation_date":1549771940,"answer_id":54613283,"question_id":37909487,"body_markdown":"    public class ConnectionDemo {\r\n    \tString userName,password,url,driver;\r\n    \tConnection con;\r\n    \tStatement st;\r\n    \t\r\n    \tpublic ConnectionDemo() {\r\n    \t\tuserName=&quot;root&quot;;\r\n    \t\tpassword=&quot;root&quot;;\r\n    \t\turl=&quot;jdbc:mariadb://localhost:3306/stud&quot;;\r\n    \t\tdriver=&quot;org.mariadb.jdbc.Driver&quot;;\r\n    \t\ttry {\r\n    \t\t\tClass.forName(driver);\r\n    \t\tcon=DriverManager.getConnection(url, userName, password);\r\n    \t\tst=con.createStatement();\r\n    \t\tSystem.out.println(&quot;Connection is successful&quot;);\r\n    \t\t} catch (Exception e) {\r\n    \t\t  e.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\t\r\n    \t}\r\n\r\n","title":"How can I connect to mariadb using java?","body":"<pre><code>public class ConnectionDemo {\n    String userName,password,url,driver;\n    Connection con;\n    Statement st;\n\n    public ConnectionDemo() {\n        userName=\"root\";\n        password=\"root\";\n        url=\"jdbc:mariadb://localhost:3306/stud\";\n        driver=\"org.mariadb.jdbc.Driver\";\n        try {\n            Class.forName(driver);\n        con=DriverManager.getConnection(url, userName, password);\n        st=con.createStatement();\n        System.out.println(\"Connection is successful\");\n        } catch (Exception e) {\n          e.printStackTrace();\n        }\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22353016,"reputation":1,"user_id":16570774,"display_name":"Gabriel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627804761,"creation_date":1627804761,"answer_id":68608542,"question_id":37909487,"body_markdown":"I had the same problem, the reason have been that I had the wrong driver. You need a mariadb-java-client-XXX.jar (NO Source version!) and add it to the classpath. With that it was work fine, I hope that I was able to help a bit.","title":"How can I connect to mariadb using java?","body":"<p>I had the same problem, the reason have been that I had the wrong driver. You need a mariadb-java-client-XXX.jar (NO Source version!) and add it to the classpath. With that it was work fine, I hope that I was able to help a bit.</p>\n"}],"owner":{"account_id":7506824,"reputation":547,"user_id":5703088,"accept_rate":67,"display_name":"ALEENA JOHN"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69631,"favorite_count":0,"down_vote_count":2,"up_vote_count":18,"accepted_answer_id":37916676,"answer_count":4,"score":16,"last_activity_date":1697297745,"creation_date":1466354230,"question_id":37909487,"body_markdown":"I&#39;ve used:\r\n\r\n    Connection  connection = DriverManager.getConnection(\r\n        &quot;jdbc:mysql://localhost:3306/test&quot;, &quot;username&quot;, &quot;password&quot;\r\n    );\r\n    Statement stmt = connection.createStatement();\r\n    stmt.executeUpdate(&quot;CREATE TABLE a (id int not null primary key, value varchar(20))&quot;);\r\n    stmt.close();\r\n    connection.close();\r\n\r\nbut it gives an error &quot;No route to host&quot;","title":"How can I connect to mariadb using java?","body":"<p>I've used:</p>\n\n<pre><code>Connection  connection = DriverManager.getConnection(\n    \"jdbc:mysql://localhost:3306/test\", \"username\", \"password\"\n);\nStatement stmt = connection.createStatement();\nstmt.executeUpdate(\"CREATE TABLE a (id int not null primary key, value varchar(20))\");\nstmt.close();\nconnection.close();\n</code></pre>\n\n<p>but it gives an error \"No route to host\"</p>\n"},{"tags":["java","android","response","okhttp"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1692988090,"post_id":76978427,"comment_id":135705202,"body_markdown":"The first step would be not to ignore all non RESULT_OK result situations and print all the data you get to understand what is going wrong.","body":"The first step would be not to ignore all non RESULT_OK result situations and print all the data you get to understand what is going wrong."},{"owner":{"account_id":26933067,"reputation":1,"user_id":20505138,"display_name":"Jakov Spirovski"},"score":0,"creation_date":1693065422,"post_id":76978427,"comment_id":135712076,"body_markdown":"Checked if the image bitmap is saved to data and it is. Tried to send the image as a base64 string and seeing if the request is sent, but the api request doesnt show in the logcat either.","body":"Checked if the image bitmap is saved to data and it is. Tried to send the image as a base64 string and seeing if the request is sent, but the api request doesnt show in the logcat either."}],"owner":{"account_id":26933067,"reputation":1,"user_id":20505138,"display_name":"Jakov Spirovski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697297490,"creation_date":1692976169,"question_id":76978427,"body_markdown":"I&#39;m having issues with getting a response from the MindeeAPI when sending a image to the server. First I have a camera intent which takes the image and then I convert it into a file, but I can&#39;t seem to get the JSON response neither in the `logcat` nor in a `textView`, what could be the problem?\r\n\r\nHere&#39;s the API class code:\r\n\r\n    public class MindeeApiManager {\r\n\r\n    public static void callMindeeAPI(File imageFile, String apiKey, Callback callback) {\r\n        OkHttpClient client = new OkHttpClient();\r\n\r\n        // Request Body\r\n        MediaType mediaType = MediaType.parse(&quot;multipart/form-data&quot;);\r\n        RequestBody requestBody = new MultipartBody.Builder()\r\n                .setType(MultipartBody.FORM)\r\n                .addFormDataPart(&quot;document&quot;, &quot;image.jpg&quot;, RequestBody.create(imageFile, MediaType.parse(&quot;image/jpeg&quot;)))\r\n                .build();\r\n\r\n        Request request = new Request.Builder()\r\n                .url(&quot;https://api.mindee.net/v1/products/mindee/expense_receipts/v5/predict&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Token &quot; + apiKey)\r\n                .post(requestBody)\r\n                .build();\r\n\r\n        // Execute the API call\r\n        client.newCall(request).enqueue(callback);\r\n    }\r\n\r\n\r\nCode from MainActivity:\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == RESULT_OK &amp;&amp; requestCode == REQUEST_IMAGE_CAPTURE) {\r\n            Bitmap imageBitmap = (Bitmap) Objects.requireNonNull(data.getExtras()).get(&quot;data&quot;);\r\n            assert imageBitmap != null;\r\n\r\n            //Convert bitmap to file\r\n            File imageFile = convertBitmapToFile(imageBitmap);\r\n\r\n            //API class call\r\n            MindeeApiManager.callMindeeAPI(imageFile, apiKey, new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n                    e.printStackTrace();\r\n                    Log.e(&quot;MindeeAPI&quot;, &quot;API call failed: &quot; + e.getMessage());\r\n                    txtItems.setText(e.getMessage());\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n                    final String responseBody = response.body().string();\r\n\r\n                    txtItems.setText(responseBody);\r\n                    Log.d(&quot;MindeeAPI&quot;, &quot;Response Code: &quot; + response.code());\r\n                    Log.d(&quot;MindeeAPI&quot;, &quot;Response Body: &quot; + responseBody);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private File convertBitmapToFile(Bitmap bitmap) {\r\n        File imageFile = null;\r\n        try {\r\n            //Creates a file in the cache directory\r\n            File cacheDir = getCacheDir();\r\n            imageFile = new File(cacheDir, &quot;temp_image.jpg&quot;);\r\n\r\n            //Compresses the bitmap and writes it to the file\r\n            FileOutputStream fileOutputStream = new FileOutputStream(imageFile);\r\n            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fileOutputStream);\r\n            fileOutputStream.flush();\r\n            fileOutputStream.close();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return imageFile;\r\n    }\r\n\r\n ","title":"Can&#39;t get a response from API using okhttp library","body":"<p>I'm having issues with getting a response from the MindeeAPI when sending a image to the server. First I have a camera intent which takes the image and then I convert it into a file, but I can't seem to get the JSON response neither in the <code>logcat</code> nor in a <code>textView</code>, what could be the problem?</p>\n<p>Here's the API class code:</p>\n<pre><code>public class MindeeApiManager {\n\npublic static void callMindeeAPI(File imageFile, String apiKey, Callback callback) {\n    OkHttpClient client = new OkHttpClient();\n\n    // Request Body\n    MediaType mediaType = MediaType.parse(&quot;multipart/form-data&quot;);\n    RequestBody requestBody = new MultipartBody.Builder()\n            .setType(MultipartBody.FORM)\n            .addFormDataPart(&quot;document&quot;, &quot;image.jpg&quot;, RequestBody.create(imageFile, MediaType.parse(&quot;image/jpeg&quot;)))\n            .build();\n\n    Request request = new Request.Builder()\n            .url(&quot;https://api.mindee.net/v1/products/mindee/expense_receipts/v5/predict&quot;)\n            .header(&quot;Authorization&quot;, &quot;Token &quot; + apiKey)\n            .post(requestBody)\n            .build();\n\n    // Execute the API call\n    client.newCall(request).enqueue(callback);\n}\n</code></pre>\n<p>Code from MainActivity:</p>\n<pre><code>@Override\nprotected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n    if (resultCode == RESULT_OK &amp;&amp; requestCode == REQUEST_IMAGE_CAPTURE) {\n        Bitmap imageBitmap = (Bitmap) Objects.requireNonNull(data.getExtras()).get(&quot;data&quot;);\n        assert imageBitmap != null;\n\n        //Convert bitmap to file\n        File imageFile = convertBitmapToFile(imageBitmap);\n\n        //API class call\n        MindeeApiManager.callMindeeAPI(imageFile, apiKey, new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n                e.printStackTrace();\n                Log.e(&quot;MindeeAPI&quot;, &quot;API call failed: &quot; + e.getMessage());\n                txtItems.setText(e.getMessage());\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                final String responseBody = response.body().string();\n\n                txtItems.setText(responseBody);\n                Log.d(&quot;MindeeAPI&quot;, &quot;Response Code: &quot; + response.code());\n                Log.d(&quot;MindeeAPI&quot;, &quot;Response Body: &quot; + responseBody);\n            }\n        });\n    }\n}\n\nprivate File convertBitmapToFile(Bitmap bitmap) {\n    File imageFile = null;\n    try {\n        //Creates a file in the cache directory\n        File cacheDir = getCacheDir();\n        imageFile = new File(cacheDir, &quot;temp_image.jpg&quot;);\n\n        //Compresses the bitmap and writes it to the file\n        FileOutputStream fileOutputStream = new FileOutputStream(imageFile);\n        bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fileOutputStream);\n        fileOutputStream.flush();\n        fileOutputStream.close();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return imageFile;\n}\n</code></pre>\n"},{"tags":["java","jwt","token"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1697300479,"post_id":77291914,"comment_id":136263898,"body_markdown":"Which provider in your Java code (which you claim does not use third-party libraries) is supposed to support the `AllowWeakRSAKey` algorithm? The [JCA/JCE](https://docs.oracle.com/en/java/javase/21/security/oracle-providers.html#GUID-F41EE1C9-DD6A-4BAB-8979-EB7654094029) providers do not have one (at least as far as I know). When I run the code I get a *NoSuchAlgorithmException: AllowWeakRSAKey Signature not available* exception. The analog to `RS256` is `SHA256withRSA`, with which your code generates a valid signed JWT, as can be checked e.g. on jwt.io.","body":"Which provider in your Java code (which you claim does not use third-party libraries) is supposed to support the <code>AllowWeakRSAKey</code> algorithm? The <a href=\"https://docs.oracle.com/en/java/javase/21/security/oracle-providers.html#GUID-F41EE1C9-DD6A-4BAB-8979-EB7654094029\" rel=\"nofollow noreferrer\">JCA/JCE</a> providers do not have one (at least as far as I know). When I run the code I get a <i>NoSuchAlgorithmException: AllowWeakRSAKey Signature not available</i> exception. The analog to <code>RS256</code> is <code>SHA256withRSA</code>, with which your code generates a valid signed JWT, as can be checked e.g. on jwt.io."},{"owner":{"account_id":285196,"reputation":663,"user_id":583726,"accept_rate":81,"display_name":"user583726"},"score":0,"creation_date":1697304138,"post_id":77291914,"comment_id":136264281,"body_markdown":"import com.nimbusds.jose.crypto.opts.AllowWeakRSAKey;\nimport com.nimbusds.jwt.SignedJWT;","body":"import com.nimbusds.jose.crypto.opts.AllowWeakRSAKey; import com.nimbusds.jwt.SignedJWT;"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1697307391,"post_id":77291914,"comment_id":136264662,"body_markdown":"I refer to the line `Signature signature = Signature.getInstance(&quot;AllowWeakRSAKey&quot;)` in the second code snippet. Even with the two imports from your last comment and the nimbus-jose-jwt.jar, a *NoSuchAlgorithmException: AllowWeakRSAKey Signature not available* is thrown showing that `AllowWeakRSAKey` is not supported. In contrast, the exception you posted is not reproducible on my machine. As already mentioned, try `SHA256withRSA` as algorithm, s. [The SunRsaSign Provider](https://docs.oracle.com/en/java/javase/21/security/oracle-providers.html#GUID-17E3589E-E4BA-4881-9B12-9880DD2D128D).","body":"I refer to the line <code>Signature signature = Signature.getInstance(&quot;AllowWeakRSAKey&quot;)</code> in the second code snippet. Even with the two imports from your last comment and the nimbus-jose-jwt.jar, a <i>NoSuchAlgorithmException: AllowWeakRSAKey Signature not available</i> is thrown showing that <code>AllowWeakRSAKey</code> is not supported. In contrast, the exception you posted is not reproducible on my machine. As already mentioned, try <code>SHA256withRSA</code> as algorithm, s. <a href=\"https://docs.oracle.com/en/java/javase/21/security/oracle-providers.html#GUID-17E3589E-E4BA-4881-9B12-9880DD2D128D\" rel=\"nofollow noreferrer\">The SunRsaSign Provider</a>."},{"owner":{"account_id":285196,"reputation":663,"user_id":583726,"accept_rate":81,"display_name":"user583726"},"score":0,"creation_date":1697476126,"post_id":77291914,"comment_id":136281845,"body_markdown":"Thanks for the guidance. Appreciate the help. I tried to replace the AllowWeakRSAKey with SHA256withRSA for the Signature Signatue = Signature.getInstance(&quot;AllowWeakRSAKey) part and getting &quot;invalid credentials error&quot; . by the way Here are all the imports. ........\nimport com.google.common.hash.Hashing;\nimport com.nimbusds.jose.JWSAlgorithm; and JWSHeader and JWSSigner;\nimport com.nimbusds.jose.JWSSignerOption;\nimport com.nimbusds.jose.crypto.RSASSASigner;\nimport com.nimbusds.jose.crypto.opts.AllowWeakRSAKey;\nimport com.nimbusds.jwt.SignedJWT;\nimport java.nio.charset.StandardCharsets;","body":"Thanks for the guidance. Appreciate the help. I tried to replace the AllowWeakRSAKey with SHA256withRSA for the Signature Signatue = Signature.getInstance(&quot;AllowWeakRSAKey) part and getting &quot;invalid credentials error&quot; . by the way Here are all the imports. ........ import com.google.common.hash.Hashing; import com.nimbusds.jose.JWSAlgorithm; and JWSHeader and JWSSigner; import com.nimbusds.jose.JWSSignerOption; import com.nimbusds.jose.crypto.RSASSASigner; import com.nimbusds.jose.crypto.opts.AllowWeakRSAKey; import com.nimbusds.jwt.SignedJWT; import java.nio.charset.StandardCharsets;"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1697478768,"post_id":77291914,"comment_id":136282320,"body_markdown":"I cannot reproduce the problem, see here online: https://www.jdoodle.com/ia/OAN. The token signed with the code (using `SHA256withRSA`) can be successfully verified with the exported public key on https://jwt.io/ (choose *RS256* as algorithm on jwt.io).","body":"I cannot reproduce the problem, see here online: <a href=\"https://www.jdoodle.com/ia/OAN\" rel=\"nofollow noreferrer\">jdoodle.com/ia/OAN</a>. The token signed with the code (using <code>SHA256withRSA</code>) can be successfully verified with the exported public key on <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">jwt.io</a> (choose <i>RS256</i> as algorithm on jwt.io)."},{"owner":{"account_id":285196,"reputation":663,"user_id":583726,"accept_rate":81,"display_name":"user583726"},"score":0,"creation_date":1697567078,"post_id":77291914,"comment_id":136295206,"body_markdown":"When i set it to SHA256withRSA, it&#39;s not working for me. So, even though it might be correct the ( second party with I am sending token ) is invalidating it.  I will keep you updated on this. Thanks for the help.","body":"When i set it to SHA256withRSA, it&#39;s not working for me. So, even though it might be correct the ( second party with I am sending token ) is invalidating it.  I will keep you updated on this. Thanks for the help."}],"answers":[{"tags":[],"owner":{"account_id":14320275,"reputation":1315,"user_id":10343888,"display_name":"fatih"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697295016,"creation_date":1697295016,"answer_id":77293284,"question_id":77291914,"body_markdown":"&gt; RSA is only able to encrypt data to a maximum amount equal to your key\r\n&gt; size (2048 bits = 256 bytes), minus any padding and header data (11\r\n&gt; bytes for padding).\r\n\r\nSo the number of maximum bytes:\r\n\r\n    max bytes = (key length in bits / 8 ) - 11\r\n\r\nAs a result, it is often not possible to encrypt files with `RSA` directly. If you want to encrypt more data, you can do something like:\r\n\r\n 1. Generate a 256-bit random key.\r\n 2. Encrypt your data with `AES-CBC` (or any others) with key.\r\n 3. Encrypt key with RSA.\r\n 4. Send both to other side.\r\n\r\n\r\nYou can also use another key-size, symmetric algorithm and cipher mode. But you should know that `RSA` is not made for the purpose you use it.","title":"Creating JWT using without nimbusds library","body":"<blockquote>\n<p>RSA is only able to encrypt data to a maximum amount equal to your key\nsize (2048 bits = 256 bytes), minus any padding and header data (11\nbytes for padding).</p>\n</blockquote>\n<p>So the number of maximum bytes:</p>\n<pre><code>max bytes = (key length in bits / 8 ) - 11\n</code></pre>\n<p>As a result, it is often not possible to encrypt files with <code>RSA</code> directly. If you want to encrypt more data, you can do something like:</p>\n<ol>\n<li>Generate a 256-bit random key.</li>\n<li>Encrypt your data with <code>AES-CBC</code> (or any others) with key.</li>\n<li>Encrypt key with RSA.</li>\n<li>Send both to other side.</li>\n</ol>\n<p>You can also use another key-size, symmetric algorithm and cipher mode. But you should know that <code>RSA</code> is not made for the purpose you use it.</p>\n"}],"owner":{"account_id":285196,"reputation":663,"user_id":583726,"accept_rate":81,"display_name":"user583726"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697295016,"creation_date":1697266895,"question_id":77291914,"body_markdown":"I am trying to re-write following code (which is using nimbusds library) and on latest version of JAVA.\r\n\r\n    public static String getClientJwtAssertion(String secureKey, PrivateKey privateKey) {\r\n        try {\r\n            Date now = new Date();\r\n            SignedJWT signedJWT = new SignedJWT((new JWSHeader.Builder(JWSAlgorithm.RS256)).keyID(getThumbprint(secureKey)).build(),\r\n                    (new com.nimbusds.jwt.JWTClaimsSet.Builder())\r\n                            .jwtID(UUID.randomUUID().toString())\r\n                            .subject(Constants.CLIENT_ID)\r\n                            .issuer(Constants.CLIENT_ID)\r\n                            .issueTime(new Date())\r\n                            .expirationTime(new Date(now.getTime() + Constants.EXPIRES_IN))\r\n                            .build());\r\n            Set&lt;JWSSignerOption&gt; options = Collections.singleton(AllowWeakRSAKey.getInstance());\r\n            JWSSigner rsaSigner = new RSASSASigner(privateKey, options);\r\n            signedJWT.sign(rsaSigner);\r\n            return signedJWT.serialize();\r\n\r\n\r\n\r\n\r\n        } catch (Exception e) {\r\n            \r\n            return null;\r\n        }\r\n    }\r\n\r\nI want to build same feature using JAVA library and not third party library. I have the code but it&#39;s not working and getting error from server regarding authentication. \r\n\r\n\r\nHere is my code but it&#39;s not working. Any pointers will be helpful. \r\n\r\n\r\n    public static String signJWTToken(Certificate certificate, PrivateKey privateKey) {\r\n        String header = &quot;{\\&quot;alg\\&quot;:\\&quot;RS256\\&quot;}&quot;;\r\n        String claimTemplate =  &quot;&#39;{&#39;\\&quot;jti\\&quot;: \\&quot;{0}\\&quot;, \\&quot;sub\\&quot;: \\&quot;{1}\\&quot;, \\&quot;aud\\&quot;: \\&quot;{2}\\&quot;, \\&quot;iss\\&quot;: \\&quot;{3}\\&quot;, \\&quot;iat\\&quot;: \\&quot;{4}\\&quot;, \\&quot;exp\\&quot;: \\&quot;{5}\\&quot;&#39;}&#39;&quot;;\r\n        StringBuilder token = new StringBuilder();\r\n        try {\r\n           token.append(Base64.encodeBase64URLSafeString(header.getBytes(StandardCharsets.UTF_8)));\r\n           token.append(&quot;.&quot;);\r\n\r\n           Date now = new Date();\r\n           String[] claimArray = new String[6];\r\n           claimArray[0] = UUID.randomUUID().toString();\r\n           claimArray[1] = Constants.CLIENT_ID;\r\n           claimArray[2] = Constants.ACCESS_TOKEN_URI;\r\n           claimArray[3] = Constants.CLIENT_ID;\r\n           claimArray[4] = Long.toString(now.getTime());\r\n           claimArray[5] = Long.toString(now.getTime() + Constants.EXPIRES_IN);\r\n\r\n            MessageFormat claims= new MessageFormat(claimTemplate);\r\n            // create payload and add to token\r\n            String payload = claims.format(claimArray);\r\n            token.append(Base64.encodeBase64URLSafeString(payload.getBytes(StandardCharsets.UTF_8)));\r\n\r\n            // Sign JWT header\r\n            Signature signature = Signature.getInstance(&quot;AllowWeakRSAKey&quot;);\r\n            signature.initSign(privateKey);\r\n            signature.update(token.toString().getBytes(StandardCharsets.UTF_8));\r\n            String signedPayload = Base64.encodeBase64URLSafeString((signature.sign()));\r\n\r\n            token.append(&quot;.&quot;);\r\n            token.append(signedPayload);\r\n\r\n        } catch (Exception e) {\r\n            new Throw Exception(e);\r\n        }\r\n\r\n\r\n        return token.toString();\r\n    }\r\n\r\nThe error is as follows :: \r\n\r\n    Caused by: javax.crypto.IllegalBlockSizeException: Data must not be longer than 245 bytes\r\n\tat java.base/com.sun.crypto.provider.RSACipher.doFinal(RSACipher.java:349)\r\n\tat java.base/com.sun.crypto.provider.RSACipher.engineDoFinal(RSACipher.java:406)\r\n\tat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2088)\r\n\tat java.base/java.security.Signature$CipherAdapter.engineSign(Signature.java:1529)\r\n\t... 4 common frames omitted\r\n23:36:59.867 ERROR TokenApplication - Error retrieving access token\r\norg.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: &quot;{&quot;error&quot;:&quot;invalid_client&quot;,&quot;e rror_description&quot;:&quot;MSIS9622: Client authentication failed. Please verify the credential provided for client authentication is valid.&quot;}&quot;\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)","title":"Creating JWT using without nimbusds library","body":"<p>I am trying to re-write following code (which is using nimbusds library) and on latest version of JAVA.</p>\n<pre><code>public static String getClientJwtAssertion(String secureKey, PrivateKey privateKey) {\n    try {\n        Date now = new Date();\n        SignedJWT signedJWT = new SignedJWT((new JWSHeader.Builder(JWSAlgorithm.RS256)).keyID(getThumbprint(secureKey)).build(),\n                (new com.nimbusds.jwt.JWTClaimsSet.Builder())\n                        .jwtID(UUID.randomUUID().toString())\n                        .subject(Constants.CLIENT_ID)\n                        .issuer(Constants.CLIENT_ID)\n                        .issueTime(new Date())\n                        .expirationTime(new Date(now.getTime() + Constants.EXPIRES_IN))\n                        .build());\n        Set&lt;JWSSignerOption&gt; options = Collections.singleton(AllowWeakRSAKey.getInstance());\n        JWSSigner rsaSigner = new RSASSASigner(privateKey, options);\n        signedJWT.sign(rsaSigner);\n        return signedJWT.serialize();\n\n\n\n\n    } catch (Exception e) {\n        \n        return null;\n    }\n}\n</code></pre>\n<p>I want to build same feature using JAVA library and not third party library. I have the code but it's not working and getting error from server regarding authentication.</p>\n<p>Here is my code but it's not working. Any pointers will be helpful.</p>\n<pre><code>public static String signJWTToken(Certificate certificate, PrivateKey privateKey) {\n    String header = &quot;{\\&quot;alg\\&quot;:\\&quot;RS256\\&quot;}&quot;;\n    String claimTemplate =  &quot;'{'\\&quot;jti\\&quot;: \\&quot;{0}\\&quot;, \\&quot;sub\\&quot;: \\&quot;{1}\\&quot;, \\&quot;aud\\&quot;: \\&quot;{2}\\&quot;, \\&quot;iss\\&quot;: \\&quot;{3}\\&quot;, \\&quot;iat\\&quot;: \\&quot;{4}\\&quot;, \\&quot;exp\\&quot;: \\&quot;{5}\\&quot;'}'&quot;;\n    StringBuilder token = new StringBuilder();\n    try {\n       token.append(Base64.encodeBase64URLSafeString(header.getBytes(StandardCharsets.UTF_8)));\n       token.append(&quot;.&quot;);\n\n       Date now = new Date();\n       String[] claimArray = new String[6];\n       claimArray[0] = UUID.randomUUID().toString();\n       claimArray[1] = Constants.CLIENT_ID;\n       claimArray[2] = Constants.ACCESS_TOKEN_URI;\n       claimArray[3] = Constants.CLIENT_ID;\n       claimArray[4] = Long.toString(now.getTime());\n       claimArray[5] = Long.toString(now.getTime() + Constants.EXPIRES_IN);\n\n        MessageFormat claims= new MessageFormat(claimTemplate);\n        // create payload and add to token\n        String payload = claims.format(claimArray);\n        token.append(Base64.encodeBase64URLSafeString(payload.getBytes(StandardCharsets.UTF_8)));\n\n        // Sign JWT header\n        Signature signature = Signature.getInstance(&quot;AllowWeakRSAKey&quot;);\n        signature.initSign(privateKey);\n        signature.update(token.toString().getBytes(StandardCharsets.UTF_8));\n        String signedPayload = Base64.encodeBase64URLSafeString((signature.sign()));\n\n        token.append(&quot;.&quot;);\n        token.append(signedPayload);\n\n    } catch (Exception e) {\n        new Throw Exception(e);\n    }\n\n\n    return token.toString();\n}\n</code></pre>\n<p>The error is as follows ::</p>\n<pre><code>Caused by: javax.crypto.IllegalBlockSizeException: Data must not be longer than 245 bytes\nat java.base/com.sun.crypto.provider.RSACipher.doFinal(RSACipher.java:349)\nat java.base/com.sun.crypto.provider.RSACipher.engineDoFinal(RSACipher.java:406)\nat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2088)\nat java.base/java.security.Signature$CipherAdapter.engineSign(Signature.java:1529)\n... 4 common frames omitted\n</code></pre>\n<p>23:36:59.867 ERROR TokenApplication - Error retrieving access token\norg.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: &quot;{&quot;error&quot;:&quot;invalid_client&quot;,&quot;e rror_description&quot;:&quot;MSIS9622: Client authentication failed. Please verify the credential provided for client authentication is valid.&quot;}&quot;\nat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:101)</p>\n"},{"tags":["java","multithreading","swing","sockets","server"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697241419,"post_id":77291063,"comment_id":136259762,"body_markdown":"Try closing your output streams.","body":"Try closing your output streams."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1697244502,"post_id":77291063,"comment_id":136259948,"body_markdown":"I&#39;d also close the `clientSocket` in the server if you&#39;re not going to continue to re-use it","body":"I&#39;d also close the <code>clientSocket</code> in the server if you&#39;re not going to continue to re-use it"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1697244849,"post_id":77291063,"comment_id":136259963,"body_markdown":"Your server presently loops accepting a connection, reading one item, sending one response, then looping to accept another connection. So try a read loop in the server. Presently you only have an accept loop.","body":"Your server presently loops accepting a connection, reading one item, sending one response, then looping to accept another connection. So try a read loop in the server. Presently you only have an accept loop."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697244871,"post_id":77291063,"comment_id":136259965,"body_markdown":"@MadProgrammer Closing the output stream will close the socket.","body":"@MadProgrammer Closing the output stream will close the socket."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1697245562,"post_id":77291063,"comment_id":136259999,"body_markdown":"@user207421 Won&#39;t closing the socket close both the streams?  Wouldn&#39;t that be, generally, a cleaner solution?","body":"@user207421 Won&#39;t closing the socket close both the streams?  Wouldn&#39;t that be, generally, a cleaner solution?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697266817,"post_id":77291063,"comment_id":136260970,"body_markdown":"@MadProgrammer It will close both the streams but it won&#39;t flush any buffered output stream. Closing that output stream closes the lot, with flush.","body":"@MadProgrammer It will close both the streams but it won&#39;t flush any buffered output stream. Closing that output stream closes the lot, with flush."},{"owner":{"account_id":17545214,"reputation":5,"user_id":12726651,"display_name":"Dabchinsky"},"score":0,"creation_date":1697268136,"post_id":77291063,"comment_id":136261044,"body_markdown":"@Max isn&#39;t the essence of using Sockets is to make a connection between two sockets and use it for a long time?","body":"@Max isn&#39;t the essence of using Sockets is to make a connection between two sockets and use it for a long time?"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697269004,"post_id":77291063,"comment_id":136261115,"body_markdown":"But you aren&#39;t using it for a long time. You&#39;re reading one request and sending one response. Next time around the loop you&#39;ve lost the `Socket` reference, so you can never use it again, so you&#39;ve leaked it. No virtue in that. Close it once you&#39;ve sent the final response, or got an EOS from the client","body":"But you aren&#39;t using it for a long time. You&#39;re reading one request and sending one response. Next time around the loop you&#39;ve lost the <code>Socket</code> reference, so you can never use it again, so you&#39;ve leaked it. No virtue in that. Close it once you&#39;ve sent the final response, or got an EOS from the client"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697273670,"post_id":77291421,"comment_id":136261438,"body_markdown":"The problem is at the server end, not the client end.","body":"The problem is at the server end, not the client end."},{"owner":{"account_id":18629822,"reputation":44,"user_id":13578029,"display_name":"Max"},"score":0,"creation_date":1697294597,"post_id":77291421,"comment_id":136263217,"body_markdown":"@user207421 I have revised my answer to hopefully be more helpful.","body":"@user207421 I have revised my answer to hopefully be more helpful."},{"owner":{"account_id":17545214,"reputation":5,"user_id":12726651,"display_name":"Dabchinsky"},"score":0,"creation_date":1697661406,"post_id":77291421,"comment_id":136309574,"body_markdown":"Thank you, I decided to make new socket connection on client side every time I need to send/receive data and it worked!","body":"Thank you, I decided to make new socket connection on client side every time I need to send/receive data and it worked!"}],"tags":[],"owner":{"account_id":18629822,"reputation":44,"user_id":13578029,"display_name":"Max"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697294801,"creation_date":1697250877,"answer_id":77291421,"question_id":77291063,"body_markdown":"As per the [documentation][1], accept() listens for a connection to be made to this socket and accepts it. The method blocks until a connection is made.\r\n\r\nYour current implementation looks like it is re-using the same connection for each request. Therefore, the server is blocking at the accept() method because the client is never making a new connection. \r\n\r\nI would suggest leveraging threading on the server. On the main thread listen for new connections. Once a connection is made, the accept() method will return a Socket instance. At this point create a new thread and pass in the socket reference. Have all of the request/response processing logic in the new thread.\r\n\r\n**This will allow you to read and write to sockets, while also listening for new connections to the server.**\r\n\r\n```\r\npublic void runServer() {\r\n    ServerSocket serverSocket = new ServerSocket(port);\r\n    System.out.println(&quot;Server started and listening &quot; + port);\r\n\r\n    while(true){\r\n        try {\r\n            Socket socket = serverSocket.accept();\r\n            Task task = new Task(socket);\r\n            (new Thread(task)).start();\r\n        } catch(IOException e){\r\n            // Handle \r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\npublic class Task implements Runnable {\r\n\r\n    private final Socket socket;\r\n\r\n    public Task(Socket socket) {\r\n        this.socket = socket;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        // Loop that reads from and writes to socket\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/net/ServerSocket.html#accept--","title":"Java Socket server accepts only one request and stops receiving data","body":"<p>As per the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/net/ServerSocket.html#accept--\" rel=\"nofollow noreferrer\">documentation</a>, accept() listens for a connection to be made to this socket and accepts it. The method blocks until a connection is made.</p>\n<p>Your current implementation looks like it is re-using the same connection for each request. Therefore, the server is blocking at the accept() method because the client is never making a new connection.</p>\n<p>I would suggest leveraging threading on the server. On the main thread listen for new connections. Once a connection is made, the accept() method will return a Socket instance. At this point create a new thread and pass in the socket reference. Have all of the request/response processing logic in the new thread.</p>\n<p><strong>This will allow you to read and write to sockets, while also listening for new connections to the server.</strong></p>\n<pre><code>public void runServer() {\n    ServerSocket serverSocket = new ServerSocket(port);\n    System.out.println(&quot;Server started and listening &quot; + port);\n\n    while(true){\n        try {\n            Socket socket = serverSocket.accept();\n            Task task = new Task(socket);\n            (new Thread(task)).start();\n        } catch(IOException e){\n            // Handle \n        }\n    }\n}\n</code></pre>\n<pre><code>public class Task implements Runnable {\n\n    private final Socket socket;\n\n    public Task(Socket socket) {\n        this.socket = socket;\n    }\n\n    @Override\n    public void run() {\n        // Loop that reads from and writes to socket\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":17545214,"reputation":5,"user_id":12726651,"display_name":"Dabchinsky"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291421,"answer_count":1,"score":0,"last_activity_date":1697294801,"creation_date":1697238997,"question_id":77291063,"body_markdown":"I am making a Client-Server Java Swing application where I need to send requests through ObjectOutputStream. I make one request from LoginFrame to check if login/password is correct, server receives data, makes manipulations with it and successfully sends answer back. But when I try to make another call to server, it just doesnt receive it, server kind of stops listening. \r\n\r\nServer: \r\n\r\n```\r\npublic void runServer() throws IOException, ClassNotFoundException {\r\n\r\n        ServerSocket serverSocket = new ServerSocket(port);\r\n        System.out.println(&quot;Server started and listening &quot; + port);\r\n        Model.getCountriesAndCities();\r\n        System.out.println(Model.getCountries()[0]);\r\n        System.out.println(Model.getCountriesMap());\r\n\r\n        for (int i = 0; i &lt; 50; i++) {\r\n            Socket clientSocket = serverSocket.accept();\r\n            System.out.println(&quot;serversocket accepted&quot;);\r\n            System.out.println(&quot;before oos&quot;);\r\n            ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\r\n            System.out.println(&quot;before ois&quot;);\r\n            ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\r\n            System.out.println(&quot;server is listening&quot;);\r\n\r\n            Map&lt;String, Object&gt; methodData = (Map&lt;String, Object&gt;) ois.readObject();\r\n            System.out.println(&quot;Server: data received&quot;);\r\n\r\n            String methodName = (String) methodData.get(&quot;method&quot;);\r\n            Object arguments = methodData.get(&quot;arguments&quot;);\r\n\r\n            Object result = invokeMethod(methodName, arguments);\r\n\r\n            oos.writeObject(result);\r\n            System.out.println(&quot;Server: data sent&quot;);\r\n            oos.flush();\r\n        }\r\n    }\r\n```\r\n\r\nClient methods:\r\n\r\n\r\n```\r\npublic static int checkUser(String login, String password, Client client) {\r\n        String query = &quot;SELECT EXISTS(SELECT * FROM users WHERE login = &#39;&quot; + login + &quot;&#39; and password = &#39;&quot; + password + &quot;&#39;) as isExist&quot;;\r\n        String methodName = &quot;CRUDUtils.checkUser&quot;;\r\n        try {\r\n            Map&lt;String, Object&gt; methodData = new HashMap&lt;&gt;();\r\n            methodData.put(&quot;method&quot;, methodName);\r\n            methodData.put(&quot;arguments&quot;, query);\r\n\r\n            client1.oos.writeObject(methodData);\r\n            System.out.println(&quot;Client: query sent&quot;);\r\n            client1.oos.flush();\r\n\r\n            int check = (Integer) client1.ois.readObject();\r\n            System.out.println(&quot;chekUser: answer received&quot;);\r\n            return check;\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n```\r\npublic static String[] getCountries(Client client) {\r\n        String query = &quot; &quot;;\r\n        String methodName = &quot;Model.getCountries&quot;;\r\n        ObjectOutputStream oos;\r\n        ObjectInputStream ois;\r\n        try {\r\n            Map&lt;String, Object&gt; methodData = new HashMap&lt;&gt;();\r\n            methodData.put(&quot;method&quot;, methodName);\r\n            methodData.put(&quot;arguments&quot;, query);\r\n\r\n            client1.oos.writeObject(methodData);\r\n            System.out.println(&quot;Client: query sent&quot;);\r\n            client1.oos.flush();\r\n\r\n            System.out.println(&quot;before ois&quot;);\r\n            String[] check = (String[]) client1.ois.readObject();\r\n            System.out.println(&quot;getCountries: answer received&quot;);\r\n            return check;\r\n        } catch (IOException | ClassNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\nI also have Client class to start socket and swing Frame:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        Client klientura = new Client();\r\n        try {\r\n            klientura.socket = new Socket(&quot;localhost&quot;, 4444);\r\n            klientura.oos = new ObjectOutputStream(klientura.socket.getOutputStream());\r\n            klientura.ois = new ObjectInputStream(klientura.socket.getInputStream());\r\n            System.out.println(&quot;client connected&quot;);\r\n            Control.client1 = klientura;\r\n            LoginFrame loginFrame = new LoginFrame(klientura);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nI tried to replace ObjectOutput and InputOutput, it didn&#39;t work. \r\nI tried to flush every oos after sending data, it didn&#39;t work.\r\nI tried to close every oos and ois after using them, it didn&#39;t work.\r\nI tried everything, thats why this code right now is a mess.\r\n\r\nMethod checkUser works just fine, but when it comes to run getCountries, the client process just stops on line \r\n`String[] check = (String[]) client1.ois.readObject();`\r\nThe last message in client console is &quot;before ois&quot;, it means that `client1.oos.writeObject(methodData)` is completed, but server doesnt respond to that. \r\nThe last message in server console is &quot;Server: data sent&quot;, it means that server sent data to checkUser method and stopped listening. ","title":"Java Socket server accepts only one request and stops receiving data","body":"<p>I am making a Client-Server Java Swing application where I need to send requests through ObjectOutputStream. I make one request from LoginFrame to check if login/password is correct, server receives data, makes manipulations with it and successfully sends answer back. But when I try to make another call to server, it just doesnt receive it, server kind of stops listening.</p>\n<p>Server:</p>\n<pre><code>public void runServer() throws IOException, ClassNotFoundException {\n\n        ServerSocket serverSocket = new ServerSocket(port);\n        System.out.println(&quot;Server started and listening &quot; + port);\n        Model.getCountriesAndCities();\n        System.out.println(Model.getCountries()[0]);\n        System.out.println(Model.getCountriesMap());\n\n        for (int i = 0; i &lt; 50; i++) {\n            Socket clientSocket = serverSocket.accept();\n            System.out.println(&quot;serversocket accepted&quot;);\n            System.out.println(&quot;before oos&quot;);\n            ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\n            System.out.println(&quot;before ois&quot;);\n            ObjectInputStream ois = new ObjectInputStream(clientSocket.getInputStream());\n            System.out.println(&quot;server is listening&quot;);\n\n            Map&lt;String, Object&gt; methodData = (Map&lt;String, Object&gt;) ois.readObject();\n            System.out.println(&quot;Server: data received&quot;);\n\n            String methodName = (String) methodData.get(&quot;method&quot;);\n            Object arguments = methodData.get(&quot;arguments&quot;);\n\n            Object result = invokeMethod(methodName, arguments);\n\n            oos.writeObject(result);\n            System.out.println(&quot;Server: data sent&quot;);\n            oos.flush();\n        }\n    }\n</code></pre>\n<p>Client methods:</p>\n<pre><code>public static int checkUser(String login, String password, Client client) {\n        String query = &quot;SELECT EXISTS(SELECT * FROM users WHERE login = '&quot; + login + &quot;' and password = '&quot; + password + &quot;') as isExist&quot;;\n        String methodName = &quot;CRUDUtils.checkUser&quot;;\n        try {\n            Map&lt;String, Object&gt; methodData = new HashMap&lt;&gt;();\n            methodData.put(&quot;method&quot;, methodName);\n            methodData.put(&quot;arguments&quot;, query);\n\n            client1.oos.writeObject(methodData);\n            System.out.println(&quot;Client: query sent&quot;);\n            client1.oos.flush();\n\n            int check = (Integer) client1.ois.readObject();\n            System.out.println(&quot;chekUser: answer received&quot;);\n            return check;\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (ClassNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<pre><code>public static String[] getCountries(Client client) {\n        String query = &quot; &quot;;\n        String methodName = &quot;Model.getCountries&quot;;\n        ObjectOutputStream oos;\n        ObjectInputStream ois;\n        try {\n            Map&lt;String, Object&gt; methodData = new HashMap&lt;&gt;();\n            methodData.put(&quot;method&quot;, methodName);\n            methodData.put(&quot;arguments&quot;, query);\n\n            client1.oos.writeObject(methodData);\n            System.out.println(&quot;Client: query sent&quot;);\n            client1.oos.flush();\n\n            System.out.println(&quot;before ois&quot;);\n            String[] check = (String[]) client1.ois.readObject();\n            System.out.println(&quot;getCountries: answer received&quot;);\n            return check;\n        } catch (IOException | ClassNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>I also have Client class to start socket and swing Frame:</p>\n<pre><code>public static void main(String[] args) {\n        Client klientura = new Client();\n        try {\n            klientura.socket = new Socket(&quot;localhost&quot;, 4444);\n            klientura.oos = new ObjectOutputStream(klientura.socket.getOutputStream());\n            klientura.ois = new ObjectInputStream(klientura.socket.getInputStream());\n            System.out.println(&quot;client connected&quot;);\n            Control.client1 = klientura;\n            LoginFrame loginFrame = new LoginFrame(klientura);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>I tried to replace ObjectOutput and InputOutput, it didn't work.\nI tried to flush every oos after sending data, it didn't work.\nI tried to close every oos and ois after using them, it didn't work.\nI tried everything, thats why this code right now is a mess.</p>\n<p>Method checkUser works just fine, but when it comes to run getCountries, the client process just stops on line\n<code>String[] check = (String[]) client1.ois.readObject();</code>\nThe last message in client console is &quot;before ois&quot;, it means that <code>client1.oos.writeObject(methodData)</code> is completed, but server doesnt respond to that.\nThe last message in server console is &quot;Server: data sent&quot;, it means that server sent data to checkUser method and stopped listening.</p>\n"},{"tags":["java","swing"],"answers":[{"comments":[{"owner":{"account_id":4129726,"reputation":61,"user_id":3387967,"accept_rate":100,"display_name":"Gor"},"score":0,"creation_date":1423871612,"post_id":28510685,"comment_id":45340355,"body_markdown":"you are right. Thanks!! I forgot to eliminate it after editing the code.","body":"you are right. Thanks!! I forgot to eliminate it after editing the code."}],"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1423871611,"creation_date":1423871298,"answer_id":28510685,"question_id":28510663,"body_markdown":"This is hurting you:\r\n\r\n    setLayout(null);\r\n\r\nWhen using `null` layouts, you the coder are completely responsible for specifying every component&#39;s position and size. You also end up with very rigid GUI&#39;s that are next to impossible to maintain or upgrade, and that *may* look good on one system and screen resolution, but which will likely look awful elsewhere. Also, as MadProgrammer would say, &quot;pixel perfect layouts are an illusion within modern ui design.&quot;  Solution, get rid of `setLayout(null)` and strive to avoid using `null` layouts.","title":"Add a ToolBar to Frame using Swing","body":"<p>This is hurting you:</p>\n\n<pre><code>setLayout(null);\n</code></pre>\n\n<p>When using <code>null</code> layouts, you the coder are completely responsible for specifying every component's position and size. You also end up with very rigid GUI's that are next to impossible to maintain or upgrade, and that <em>may</em> look good on one system and screen resolution, but which will likely look awful elsewhere. Also, as MadProgrammer would say, \"pixel perfect layouts are an illusion within modern ui design.\"  Solution, get rid of <code>setLayout(null)</code> and strive to avoid using <code>null</code> layouts.</p>\n"},{"tags":[],"owner":{"account_id":19005664,"reputation":43,"user_id":13872480,"display_name":"pbvelikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697294484,"creation_date":1697294484,"answer_id":77293253,"question_id":28510663,"body_markdown":"If you want to place control on a container with null layout - you have to set the bounds of the control first. For example:\r\n\r\n    panel.setBounds(x, y, width, height);\r\n\r\nOtherwise this control will not be placed on your JFrame.","title":"Add a ToolBar to Frame using Swing","body":"<p>If you want to place control on a container with null layout - you have to set the bounds of the control first. For example:</p>\n<pre><code>panel.setBounds(x, y, width, height);\n</code></pre>\n<p>Otherwise this control will not be placed on your JFrame.</p>\n"}],"owner":{"account_id":4129726,"reputation":61,"user_id":3387967,"accept_rate":100,"display_name":"Gor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":897,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":28510685,"answer_count":2,"score":1,"last_activity_date":1697294484,"creation_date":1423871172,"question_id":28510663,"body_markdown":"I&#39;m trying to make a frame and add to it a toolbar at the page start and a statusbar at the bottom, and a desktop where I can show internal frames. but I just get an empty frame. What I&#39;m doing wrong ?\r\n\r\nThanks.\r\n\r\n    public class AdminStart extends JFrame implements ActionListener{\r\n    \r\n    private JToolBar toolBar;\r\n    private JDesktopPane desktop;\r\n    private StatusBar statusBar;\r\n    private JPanel panel;\r\n    \r\n    //this is a class that i created and extends JToolBar\r\n    private ToolBarAdmin miToolBar;\r\n    \r\n    private String ID = null;\r\n    private String type = null;\r\n    private String state = null;\r\n    \r\n    public AdministradorInicio(String ID, String tipo, String estado){\r\n        \r\n        super(&quot;Start&quot;);\r\n        \r\n        setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        //setSize(JFrame.MAXIMIZED_HORIZ, JFrame.MAXIMIZED_VERT);\r\n        //setResizable(false);\r\n        setLayout(null);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \r\n        this.ID = ID;\r\n        this.tipo = type;\r\n        this.estado = state;\r\n        \r\n        toolBar = new JToolBar();\r\n        miToolBar = new ToolBarAdmin();\r\n        desktop = new JDesktopPane();\r\n        statusBar = new StatusBar();\r\n        panel = new JPanel();\r\n        \r\n        for(int i = 0; i &lt; miToolBar.toolBarTitles.length; i++){\r\n            miToolBar.boton[i].addActionListener(this);\r\n        }\r\n        \r\n        panel.setLayout(new BorderLayout());\r\n        \r\n        toolBar.setLayout(new FlowLayout(FlowLayout.LEFT));\r\n        toolBar.setFloatable(false);\r\n        toolBar.add(miToolBar);\r\n        \r\n        desktop.setBackground(Color.DARK_GRAY);\r\n        \r\n        panel.add(toolBar, BorderLayout.PAGE_START);\r\n        panel.add(desktop, BorderLayout.CENTER);\r\n        panel.add(statusBar, BorderLayout.PAGE_END);\r\n          \r\n        \r\n        add(panel);\r\n              \r\n        setVisible(true);     \r\n    }\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        \r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        new AdminStart(&quot;sdsd&quot;,&quot;sdsd&quot;,&quot;sdsd&quot;);\r\n    }\r\n    \r\n    }","title":"Add a ToolBar to Frame using Swing","body":"<p>I'm trying to make a frame and add to it a toolbar at the page start and a statusbar at the bottom, and a desktop where I can show internal frames. but I just get an empty frame. What I'm doing wrong ?</p>\n\n<p>Thanks.</p>\n\n<pre><code>public class AdminStart extends JFrame implements ActionListener{\n\nprivate JToolBar toolBar;\nprivate JDesktopPane desktop;\nprivate StatusBar statusBar;\nprivate JPanel panel;\n\n//this is a class that i created and extends JToolBar\nprivate ToolBarAdmin miToolBar;\n\nprivate String ID = null;\nprivate String type = null;\nprivate String state = null;\n\npublic AdministradorInicio(String ID, String tipo, String estado){\n\n    super(\"Start\");\n\n    setExtendedState(JFrame.MAXIMIZED_BOTH);\n    //setSize(JFrame.MAXIMIZED_HORIZ, JFrame.MAXIMIZED_VERT);\n    //setResizable(false);\n    setLayout(null);\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n    this.ID = ID;\n    this.tipo = type;\n    this.estado = state;\n\n    toolBar = new JToolBar();\n    miToolBar = new ToolBarAdmin();\n    desktop = new JDesktopPane();\n    statusBar = new StatusBar();\n    panel = new JPanel();\n\n    for(int i = 0; i &lt; miToolBar.toolBarTitles.length; i++){\n        miToolBar.boton[i].addActionListener(this);\n    }\n\n    panel.setLayout(new BorderLayout());\n\n    toolBar.setLayout(new FlowLayout(FlowLayout.LEFT));\n    toolBar.setFloatable(false);\n    toolBar.add(miToolBar);\n\n    desktop.setBackground(Color.DARK_GRAY);\n\n    panel.add(toolBar, BorderLayout.PAGE_START);\n    panel.add(desktop, BorderLayout.CENTER);\n    panel.add(statusBar, BorderLayout.PAGE_END);\n\n\n    add(panel);\n\n    setVisible(true);     \n}\n@Override\npublic void actionPerformed(ActionEvent e) {\n\n}\n\npublic static void main(String[] args) {\n    new AdminStart(\"sdsd\",\"sdsd\",\"sdsd\");\n}\n\n}\n</code></pre>\n"},{"tags":["java","jar","extract","minecraft"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1625760918,"post_id":68305117,"comment_id":120719404,"body_markdown":"There is nothing in your story suggests the size difference is the actual cause. JAR files are zip files, so depending on how or in what order, there might be minor differences in size. You need to compare the actual contents of both JARs to see what the problem might be. As an aside, hacking files like this is not for beginners. You are more likely to find help in a forum dedicated to Minecraft.","body":"There is nothing in your story suggests the size difference is the actual cause. JAR files are zip files, so depending on how or in what order, there might be minor differences in size. You need to compare the actual contents of both JARs to see what the problem might be. As an aside, hacking files like this is not for beginners. You are more likely to find help in a forum dedicated to Minecraft."},{"owner":{"account_id":11833808,"reputation":1152,"user_id":8659747,"display_name":"Kitswas"},"score":1,"creation_date":1625761177,"post_id":68305117,"comment_id":120719537,"body_markdown":"**Rule 1** for experimenting with computers: _Always **backup** your files beforehand._  \n\nDid you follow it? \nIf yes, compare the files to determine the differences.","body":"<b>Rule 1</b> for experimenting with computers: <i>Always <b>backup</b> your files beforehand.</i>    Did you follow it?  If yes, compare the files to determine the differences."},{"owner":{"account_id":21551160,"reputation":41,"user_id":16408275,"display_name":"Pa Dalton"},"score":0,"creation_date":1625765213,"post_id":68305117,"comment_id":120721096,"body_markdown":"Thanks for the advice! I already know that rule, I just waned to point out that  that I do not include `version.jar` into the new one. I backed it up somewhere else.","body":"Thanks for the advice! I already know that rule, I just waned to point out that  that I do not include <code>version.jar</code> into the new one. I backed it up somewhere else."}],"answers":[{"comments":[{"owner":{"account_id":21551160,"reputation":41,"user_id":16408275,"display_name":"Pa Dalton"},"score":1,"creation_date":1625773596,"post_id":68307818,"comment_id":120724148,"body_markdown":"p.s. I used this procedure to add custom recipes on `1.12.2.jar` working on MacOS.","body":"p.s. I used this procedure to add custom recipes on <code>1.12.2.jar</code> working on MacOS."}],"tags":[],"owner":{"account_id":21551160,"reputation":41,"user_id":16408275,"display_name":"Pa Dalton"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1625773530,"creation_date":1625773530,"answer_id":68307818,"question_id":68305117,"body_markdown":"Hello myself from the past!\r\n\r\nTo edit ```.jar``` files on a Mac without to extract and recreate you can do the following:\r\n- extract the whole ```version.jar``` on a new separate folder.\r\n```\r\ncd path_to_folder/TEST\r\nmkdir tmp\r\nmv version.jar tmp/version.jar\r\njar -xf tmp/version.jar\r\n```\r\n- Inside the ```tmp``` folder you can select the files you want to edit and bring them outside inside ```path_to_folder/TEST```.\r\n- delete the ```tmp``` folder.\r\n- Do the modifications you want into your freshly selected files.\r\n- To insert your modifications inside ```version.jar```.\r\n```\r\ncd path_to_folder/TEST\r\njar -uf version.jar freshly_selected_file\r\n```\r\n\r\nNow you can run your ```version.jar``` with your modifications.","title":"How to extract a .jar file and create a 100% identical new one","body":"<p>Hello myself from the past!</p>\n<p>To edit <code>.jar</code> files on a Mac without to extract and recreate you can do the following:</p>\n<ul>\n<li>extract the whole <code>version.jar</code> on a new separate folder.</li>\n</ul>\n<pre><code>cd path_to_folder/TEST\nmkdir tmp\nmv version.jar tmp/version.jar\njar -xf tmp/version.jar\n</code></pre>\n<ul>\n<li>Inside the <code>tmp</code> folder you can select the files you want to edit and bring them outside inside <code>path_to_folder/TEST</code>.</li>\n<li>delete the <code>tmp</code> folder.</li>\n<li>Do the modifications you want into your freshly selected files.</li>\n<li>To insert your modifications inside <code>version.jar</code>.</li>\n</ul>\n<pre><code>cd path_to_folder/TEST\njar -uf version.jar freshly_selected_file\n</code></pre>\n<p>Now you can run your <code>version.jar</code> with your modifications.</p>\n"}],"owner":{"account_id":21551160,"reputation":41,"user_id":16408275,"display_name":"Pa Dalton"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1693,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68307818,"answer_count":1,"score":1,"last_activity_date":1697294356,"creation_date":1625760389,"question_id":68305117,"body_markdown":"I was playing around with the minecraft version files when I read about modifying the ```version.jar``` file to modify your game. I began to try out stuff and got stuck almost immediately. \r\n\r\nI work on a Mac using the Terminal app.\r\n\r\nMy issue is the following:\\\r\nI start having the ```version.jar``` file into a ```TEST``` folder.\r\n- First I run ```cd path_to_folder/TEST```.\r\n- Then I run: ```jar -xf version.jar``` witch seems to extract the file filling the folder with ```.class``` files, some other files and some folders including the folder ```META-INF/MANIFEST.MF```.\r\n\r\nAt this point I try to recreate the ```version.jar``` file.\r\n\r\n- First I delete the original ```version.jar``` file which is still present in ```TEST``` using ```rm version.jar```.\r\n- I run ```jar -cmf META-INF/MANIFEST.MF 1.12.2_mod.jar * ``` witch creates a new ```version.jar``` file.\r\n\r\nNow I try to run it but it does not work.\r\nAnalyzing the dimension of both files (before and after), I don&#39;t get the same size: the original is ```10’180’113``` bytes and the new one ```10’195’006``` bites.\r\n\r\nHow can I resolve my issue?\r\n\r\nEDIT:\r\n\r\nBefore trying to use the terminal I used the native decompress tool of MacOS, then compressed it to zip and finally renamed the extention into ```.jar```. Doesn&#39;t work.\r\n\r\n\r\nSame result if I renamed first the ```.jar``` extention into ```.zip```, decompressed, compressed and finally renamed the extention. Doesn&#39;t work.\r\n\r\nI tried also to use ***Keka*** to compress and decompress zip files. Doesn&#39;t work.\r\n\r\nI could try to inject files into the ```version.jar``` file, but I&#39;ve had a hard time with the syntax of the command...\r\n\r\n","title":"How to extract a .jar file and create a 100% identical new one","body":"<p>I was playing around with the minecraft version files when I read about modifying the <code>version.jar</code> file to modify your game. I began to try out stuff and got stuck almost immediately.</p>\n<p>I work on a Mac using the Terminal app.</p>\n<p>My issue is the following:<br />\nI start having the <code>version.jar</code> file into a <code>TEST</code> folder.</p>\n<ul>\n<li>First I run <code>cd path_to_folder/TEST</code>.</li>\n<li>Then I run: <code>jar -xf version.jar</code> witch seems to extract the file filling the folder with <code>.class</code> files, some other files and some folders including the folder <code>META-INF/MANIFEST.MF</code>.</li>\n</ul>\n<p>At this point I try to recreate the <code>version.jar</code> file.</p>\n<ul>\n<li>First I delete the original <code>version.jar</code> file which is still present in <code>TEST</code> using <code>rm version.jar</code>.</li>\n<li>I run <code>jar -cmf META-INF/MANIFEST.MF 1.12.2_mod.jar * </code> witch creates a new <code>version.jar</code> file.</li>\n</ul>\n<p>Now I try to run it but it does not work.\nAnalyzing the dimension of both files (before and after), I don't get the same size: the original is <code>10’180’113</code> bytes and the new one <code>10’195’006</code> bites.</p>\n<p>How can I resolve my issue?</p>\n<p>EDIT:</p>\n<p>Before trying to use the terminal I used the native decompress tool of MacOS, then compressed it to zip and finally renamed the extention into <code>.jar</code>. Doesn't work.</p>\n<p>Same result if I renamed first the <code>.jar</code> extention into <code>.zip</code>, decompressed, compressed and finally renamed the extention. Doesn't work.</p>\n<p>I tried also to use <em><strong>Keka</strong></em> to compress and decompress zip files. Doesn't work.</p>\n<p>I could try to inject files into the <code>version.jar</code> file, but I've had a hard time with the syntax of the command...</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697293847,"creation_date":1697293847,"question_id":77293215,"body_markdown":"I Have a custom TextInputLayout which i&#39;m using inside my layout but for some reason i&#39;m getting some shapes which i don&#39;t know what do they come from, i have posted my code below and thank you for any help in advance . \r\n\r\n\r\n  * Custom CenteredHintTextInputEditText\r\n\r\n```\r\n\r\n class CenteredHintTextInputEditText @JvmOverloads constructor(\r\n    context: Context,\r\n    attrs: AttributeSet? = null,\r\n    defStyleAttr: Int = 0\r\n) : TextInputEditText(context, attrs, defStyleAttr) {\r\n    //region LifeCycle\r\n    @SuppressLint(&quot;MissingSuperCall&quot;)\r\n    override fun onAttachedToWindow() {\r\n        super.onAttachedToWindow()\r\n        textInputEditText.setOnFocusChangeListener { view, hasFocus -&gt;\r\n            updateHintPosition(hasFocus, !textInputEditText.text.isNullOrEmpty())\r\n            val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\r\n            if (hasFocus)\r\n                imm.showSoftInput(view, SHOW_IMPLICIT)\r\n        }\r\n        textInputEditText.addTextChangedListener {\r\n            updateHintPosition(true, !textInputEditText.text.isNullOrEmpty())\r\n        }\r\n        textInputEditText.viewTreeObserver\r\n                .addOnPreDrawListener(object : ViewTreeObserver.OnPreDrawListener {\r\n                    override fun onPreDraw(): Boolean {\r\n                        if ((textInputLayout?.height ?: 0) &gt; 0) {\r\n                            textInputLayout?.viewTreeObserver?.removeOnPreDrawListener(this)\r\n                            updateHintPosition(\r\n                                    textInputEditText.hasFocus(),\r\n                                    !textInputEditText.text.isNullOrEmpty()\r\n                            )\r\n                            return false\r\n                        }\r\n                        return true\r\n                    }\r\n                })\r\n    }\r\n    //endregion\r\n\r\n    //region Center hint\r\n    private var paddingBottomBackup: Int? = null\r\n    private var passwordToggleButtonPaddingBottomBackup: Float? = null\r\n    private val textInputEditText: TextInputEditText\r\n        get() {\r\n            return this\r\n        }\r\n    private val textInputLayout: TextInputLayout?\r\n        get() {\r\n            return if (parent is TextInputLayout) {\r\n                (parent as? TextInputLayout)\r\n            } else {\r\n                (parent?.parent as? TextInputLayout)\r\n            }\r\n        }\r\n    private val passwordToggleButton: View?\r\n        get() {\r\n            return (parent as? View)?.findViewById(com.google.android.material.R.id.password_toggle)\r\n        }\r\n\r\n    private fun updateHintPosition(hasFocus: Boolean, hasText: Boolean) {\r\n        if (paddingBottomBackup == null)\r\n            paddingBottomBackup = paddingBottom\r\n\r\n        val inputLayoutSpace = if ((hasFocus || hasText).not()) getTextInputLayoutTopSpace() else 0\r\n\r\n//        textInputEditText.setPadding(\r\n//                paddingLeft,\r\n//                paddingTop,\r\n//                paddingRight,\r\n//                inputLayoutSpace\r\n//        )\r\n\r\n        val button = passwordToggleButton\r\n        button?.let {\r\n            if (passwordToggleButtonPaddingBottomBackup == null) {\r\n                passwordToggleButtonPaddingBottomBackup = it.translationY\r\n            }\r\n\r\n            it.translationY = if (hasFocus || hasText) {\r\n                -getTextInputLayoutTopSpace().toFloat() * 0.50f\r\n            } else {\r\n                passwordToggleButtonPaddingBottomBackup ?: 0f\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun getTextInputLayoutTopSpace(): Int {\r\n        var currentView: View = textInputEditText\r\n        var space = 0\r\n        do {\r\n            space += currentView.top\r\n            currentView = currentView.parent as View\r\n        } while (currentView !is TextInputLayout)\r\n        return (space * 1.2).toInt()\r\n    }\r\n    //endregion\r\n}\r\n\r\n```\r\n\r\n * Xml Layout\r\n\r\n ```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    tools:context=&quot;com.borusan.mannesmann.pipeline.scene.main.MainActivity&quot;&gt;\r\n\r\n    &lt;data&gt;\r\n\r\n        &lt;variable\r\n            name=&quot;viewModel&quot;\r\n            type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginViewModel&quot; /&gt;\r\n\r\n        &lt;variable\r\n            name=&quot;directions&quot;\r\n            type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginDirections&quot; /&gt;\r\n\r\n        &lt;variable\r\n            name=&quot;callbacks&quot;\r\n            type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginCallbacks&quot; /&gt;\r\n\r\n    &lt;/data&gt;\r\n\r\n    &lt;com.borusan.mannesmann.pipeline.internal.view.RootFrameLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:progressVisibility=&quot;@{viewModel.isProgressVisible}&quot;\r\n        app:touchableInProgress=&quot;true&quot;&gt;\r\n        \r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n\r\n        &lt;androidx.core.widget.NestedScrollView\r\n            android:id=&quot;@+id/scroll_view_login&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;&gt;\r\n\r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:fillViewport=&quot;true&quot;&gt;\r\n\r\n                &lt;androidx.appcompat.widget.AppCompatTextView\r\n                    android:id=&quot;@+id/image_view_logo&quot;\r\n                    style=&quot;@style/TextField.Description.Grey&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginStart=&quot;@dimen/margin_login_desc&quot;\r\n                    android:layout_marginTop=&quot;@dimen/margin_large&quot;\r\n                    android:layout_marginEnd=&quot;@dimen/margin_login_desc&quot;\r\n                    android:gravity=&quot;center&quot;\r\n                    android:maxLines=&quot;2&quot;\r\n                    android:singleLine=&quot;false&quot;\r\n                    android:text=&quot;@string/label_login_if_registered&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n                &lt;com.google.android.material.textfield.TextInputLayout\r\n                    android:id=&quot;@+id/text_input_layout_name&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;@dimen/height_form_input&quot;\r\n                    android:layout_marginStart=&quot;@dimen/margin_large&quot;\r\n                    android:layout_marginEnd=&quot;@dimen/margin_large&quot;\r\n                    android:layout_marginTop=&quot;@dimen/margin_large&quot;\r\n                    android:padding=&quot;@dimen/margin_extra_small&quot;\r\n                    android:theme=&quot;@style/TextInputLayout&quot;\r\n                    app:hintTextAppearance=&quot;@style/HintText&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/image_view_logo&quot;\r\n                    app:isInputValid=&quot;@{ viewModel.usernameValid }&quot;&gt;\r\n\r\n                    &lt;com.borusan.mannesmann.pipeline.internal.view.CenteredHintTextInputEditText\r\n                        android:id=&quot;@+id/edit_text_name&quot;\r\n                        style=&quot;@style/InputFieldText.SingleLine.Text&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;match_parent&quot;\r\n                        android:hint=&quot;@string/login_hint_username&quot;\r\n                        android:text=&quot;@={ viewModel.username }&quot;\r\n                        tools:text=&quot;Ad&quot; /&gt;\r\n\r\n                &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n                &lt;com.google.android.material.textfield.TextInputLayout\r\n                    android:id=&quot;@+id/text_input_layout_password&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;@dimen/height_form_input&quot;\r\n                    android:layout_marginStart=&quot;@dimen/margin_large&quot;\r\n                    android:layout_marginEnd=&quot;@dimen/margin_large&quot;\r\n                    android:layout_marginTop=&quot;@dimen/margin_small&quot;\r\n                    android:padding=&quot;@dimen/margin_extra_small&quot;\r\n                    android:theme=&quot;@style/TextInputLayout&quot;\r\n                    app:hintTextAppearance=&quot;@style/HintText&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/text_input_layout_name&quot;\r\n                    app:passwordToggleEnabled=&quot;true&quot;\r\n                    app:passwordToggleTint=&quot;@color/black&quot;\r\n                    app:isInputValid=&quot;@{ viewModel.passwordValid }&quot;&gt;\r\n\r\n                    &lt;com.borusan.mannesmann.pipeline.internal.view.CenteredHintTextInputEditText\r\n                        android:id=&quot;@+id/edit_text_password&quot;\r\n                        style=&quot;@style/InputFieldText.SingleLine.Password&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;match_parent&quot;\r\n                        android:hint=&quot;@string/login_hint_password&quot;\r\n                        android:text=&quot;@={ viewModel.password }&quot;\r\n                        tools:text=&quot;123456&quot; /&gt;\r\n\r\n                &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n                &lt;androidx.appcompat.widget.AppCompatTextView\r\n                    android:id=&quot;@+id/label_forgot_password&quot;\r\n                    style=&quot;@style/TextField.HyperLink&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_margin=&quot;@dimen/margin_large&quot;\r\n                    android:drawableStart=&quot;@drawable/ic_password_gray&quot;\r\n                    android:drawablePadding=&quot;@dimen/margin_small&quot;\r\n                    android:text=&quot;@string/label_forgot_password&quot;\r\n                    android:onClick=&quot;@{() -&gt; callbacks.navigate(directions.toForgotPassword)}&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@id/text_input_layout_password&quot; /&gt;\r\n\r\n                &lt;androidx.appcompat.widget.AppCompatButton\r\n                    android:id=&quot;@+id/email_sign_in_button&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    app:layout_constraintWidth_percent=&quot;@dimen/button_min_width_percent&quot;\r\n                    android:layout_height=&quot;@dimen/height_login_button&quot;\r\n                    android:layout_gravity=&quot;end&quot;\r\n                    android:layout_marginTop=&quot;@dimen/margin_top_login_button&quot;\r\n                    android:layout_marginBottom=&quot;@dimen/margin_xxl&quot;\r\n                    android:enabled=&quot;@{viewModel.loginButtonStatus}&quot;\r\n                    android:onClick=&quot;@{ () -&gt; callbacks.login() }&quot;\r\n                    android:text=&quot;@string/login_sign_in&quot;\r\n                    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                    app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                    app:layout_constraintTop_toBottomOf=&quot;@+id/label_forgot_password&quot;/&gt;\r\n\r\n\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n        &lt;/androidx.core.widget.NestedScrollView&gt;\r\n\r\n            &lt;androidx.appcompat.widget.AppCompatTextView\r\n                android:id=&quot;@+id/label_continue_without_login&quot;\r\n                style=&quot;@style/TextField.HyperLink&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_margin=&quot;@dimen/margin_xxl&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:onClick=&quot;@{() -&gt; callbacks.navigate(directions.toHome)}&quot;\r\n                android:text=&quot;@string/label_continue_without_login&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/scroll_view_login&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n    &lt;/com.borusan.mannesmann.pipeline.internal.view.RootFrameLayout&gt;\r\n\r\n&lt;/layout&gt;\r\n\r\n ```\r\n\r\n * Xml style used for theme \r\n\r\n\r\n ```\r\n &lt;style name=&quot;TextInputLayout&quot; parent=&quot;Widget.MaterialComponents.TextInputLayout.OutlinedBox.Dense&quot;&gt;\r\n        &lt;item name=&quot;errorTextAppearance&quot;&gt;@style/ErrorText&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColor&quot;&gt;@color/dark_grey&lt;/item&gt;\r\n        &lt;item name=&quot;android:textColorHint&quot;&gt;@color/dark_grey&lt;/item&gt;\r\n        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/transparent&lt;/item&gt;\r\n        &lt;item name=&quot;android:background&quot;&gt;@drawable/background_text_input&lt;/item&gt;\r\n    &lt;/style&gt;\r\n\r\n\r\n ```\r\n \r\n * Image that shows the issue i&#39;m talking about \r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/I9riO.png","title":"Having some random shapes while creating a custom text input layout in android","body":"<p>I Have a custom TextInputLayout which i'm using inside my layout but for some reason i'm getting some shapes which i don't know what do they come from, i have posted my code below and thank you for any help in advance .</p>\n<ul>\n<li>Custom CenteredHintTextInputEditText</li>\n</ul>\n<pre><code>\n class CenteredHintTextInputEditText @JvmOverloads constructor(\n    context: Context,\n    attrs: AttributeSet? = null,\n    defStyleAttr: Int = 0\n) : TextInputEditText(context, attrs, defStyleAttr) {\n    //region LifeCycle\n    @SuppressLint(&quot;MissingSuperCall&quot;)\n    override fun onAttachedToWindow() {\n        super.onAttachedToWindow()\n        textInputEditText.setOnFocusChangeListener { view, hasFocus -&gt;\n            updateHintPosition(hasFocus, !textInputEditText.text.isNullOrEmpty())\n            val imm = context.getSystemService(Context.INPUT_METHOD_SERVICE) as InputMethodManager\n            if (hasFocus)\n                imm.showSoftInput(view, SHOW_IMPLICIT)\n        }\n        textInputEditText.addTextChangedListener {\n            updateHintPosition(true, !textInputEditText.text.isNullOrEmpty())\n        }\n        textInputEditText.viewTreeObserver\n                .addOnPreDrawListener(object : ViewTreeObserver.OnPreDrawListener {\n                    override fun onPreDraw(): Boolean {\n                        if ((textInputLayout?.height ?: 0) &gt; 0) {\n                            textInputLayout?.viewTreeObserver?.removeOnPreDrawListener(this)\n                            updateHintPosition(\n                                    textInputEditText.hasFocus(),\n                                    !textInputEditText.text.isNullOrEmpty()\n                            )\n                            return false\n                        }\n                        return true\n                    }\n                })\n    }\n    //endregion\n\n    //region Center hint\n    private var paddingBottomBackup: Int? = null\n    private var passwordToggleButtonPaddingBottomBackup: Float? = null\n    private val textInputEditText: TextInputEditText\n        get() {\n            return this\n        }\n    private val textInputLayout: TextInputLayout?\n        get() {\n            return if (parent is TextInputLayout) {\n                (parent as? TextInputLayout)\n            } else {\n                (parent?.parent as? TextInputLayout)\n            }\n        }\n    private val passwordToggleButton: View?\n        get() {\n            return (parent as? View)?.findViewById(com.google.android.material.R.id.password_toggle)\n        }\n\n    private fun updateHintPosition(hasFocus: Boolean, hasText: Boolean) {\n        if (paddingBottomBackup == null)\n            paddingBottomBackup = paddingBottom\n\n        val inputLayoutSpace = if ((hasFocus || hasText).not()) getTextInputLayoutTopSpace() else 0\n\n//        textInputEditText.setPadding(\n//                paddingLeft,\n//                paddingTop,\n//                paddingRight,\n//                inputLayoutSpace\n//        )\n\n        val button = passwordToggleButton\n        button?.let {\n            if (passwordToggleButtonPaddingBottomBackup == null) {\n                passwordToggleButtonPaddingBottomBackup = it.translationY\n            }\n\n            it.translationY = if (hasFocus || hasText) {\n                -getTextInputLayoutTopSpace().toFloat() * 0.50f\n            } else {\n                passwordToggleButtonPaddingBottomBackup ?: 0f\n            }\n        }\n    }\n\n    private fun getTextInputLayoutTopSpace(): Int {\n        var currentView: View = textInputEditText\n        var space = 0\n        do {\n            space += currentView.top\n            currentView = currentView.parent as View\n        } while (currentView !is TextInputLayout)\n        return (space * 1.2).toInt()\n    }\n    //endregion\n}\n\n</code></pre>\n<ul>\n<li>Xml Layout</li>\n</ul>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n   xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n   xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n   tools:context=&quot;com.borusan.mannesmann.pipeline.scene.main.MainActivity&quot;&gt;\n\n   &lt;data&gt;\n\n       &lt;variable\n           name=&quot;viewModel&quot;\n           type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginViewModel&quot; /&gt;\n\n       &lt;variable\n           name=&quot;directions&quot;\n           type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginDirections&quot; /&gt;\n\n       &lt;variable\n           name=&quot;callbacks&quot;\n           type=&quot;com.borusan.mannesmann.pipeline.scene.login.login.LoginCallbacks&quot; /&gt;\n\n   &lt;/data&gt;\n\n   &lt;com.borusan.mannesmann.pipeline.internal.view.RootFrameLayout\n       android:layout_width=&quot;match_parent&quot;\n       android:layout_height=&quot;match_parent&quot;\n       app:progressVisibility=&quot;@{viewModel.isProgressVisible}&quot;\n       app:touchableInProgress=&quot;true&quot;&gt;\n       \n       &lt;androidx.constraintlayout.widget.ConstraintLayout\n           android:layout_width=&quot;match_parent&quot;\n           android:layout_height=&quot;wrap_content&quot;&gt;\n\n       &lt;androidx.core.widget.NestedScrollView\n           android:id=&quot;@+id/scroll_view_login&quot;\n           android:layout_width=&quot;match_parent&quot;\n           android:layout_height=&quot;wrap_content&quot;\n           app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n           app:layout_constraintTop_toTopOf=&quot;parent&quot;\n           app:layout_constraintStart_toStartOf=&quot;parent&quot;\n           app:layout_constraintEnd_toEndOf=&quot;parent&quot;&gt;\n\n           &lt;androidx.constraintlayout.widget.ConstraintLayout\n               android:layout_width=&quot;match_parent&quot;\n               android:layout_height=&quot;match_parent&quot;\n               android:fillViewport=&quot;true&quot;&gt;\n\n               &lt;androidx.appcompat.widget.AppCompatTextView\n                   android:id=&quot;@+id/image_view_logo&quot;\n                   style=&quot;@style/TextField.Description.Grey&quot;\n                   android:layout_width=&quot;0dp&quot;\n                   android:layout_height=&quot;wrap_content&quot;\n                   android:layout_marginStart=&quot;@dimen/margin_login_desc&quot;\n                   android:layout_marginTop=&quot;@dimen/margin_large&quot;\n                   android:layout_marginEnd=&quot;@dimen/margin_login_desc&quot;\n                   android:gravity=&quot;center&quot;\n                   android:maxLines=&quot;2&quot;\n                   android:singleLine=&quot;false&quot;\n                   android:text=&quot;@string/label_login_if_registered&quot;\n                   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                   app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n                   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                   app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n               &lt;com.google.android.material.textfield.TextInputLayout\n                   android:id=&quot;@+id/text_input_layout_name&quot;\n                   android:layout_width=&quot;match_parent&quot;\n                   android:layout_height=&quot;@dimen/height_form_input&quot;\n                   android:layout_marginStart=&quot;@dimen/margin_large&quot;\n                   android:layout_marginEnd=&quot;@dimen/margin_large&quot;\n                   android:layout_marginTop=&quot;@dimen/margin_large&quot;\n                   android:padding=&quot;@dimen/margin_extra_small&quot;\n                   android:theme=&quot;@style/TextInputLayout&quot;\n                   app:hintTextAppearance=&quot;@style/HintText&quot;\n                   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                   app:layout_constraintTop_toBottomOf=&quot;@+id/image_view_logo&quot;\n                   app:isInputValid=&quot;@{ viewModel.usernameValid }&quot;&gt;\n\n                   &lt;com.borusan.mannesmann.pipeline.internal.view.CenteredHintTextInputEditText\n                       android:id=&quot;@+id/edit_text_name&quot;\n                       style=&quot;@style/InputFieldText.SingleLine.Text&quot;\n                       android:layout_width=&quot;match_parent&quot;\n                       android:layout_height=&quot;match_parent&quot;\n                       android:hint=&quot;@string/login_hint_username&quot;\n                       android:text=&quot;@={ viewModel.username }&quot;\n                       tools:text=&quot;Ad&quot; /&gt;\n\n               &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n               &lt;com.google.android.material.textfield.TextInputLayout\n                   android:id=&quot;@+id/text_input_layout_password&quot;\n                   android:layout_width=&quot;match_parent&quot;\n                   android:layout_height=&quot;@dimen/height_form_input&quot;\n                   android:layout_marginStart=&quot;@dimen/margin_large&quot;\n                   android:layout_marginEnd=&quot;@dimen/margin_large&quot;\n                   android:layout_marginTop=&quot;@dimen/margin_small&quot;\n                   android:padding=&quot;@dimen/margin_extra_small&quot;\n                   android:theme=&quot;@style/TextInputLayout&quot;\n                   app:hintTextAppearance=&quot;@style/HintText&quot;\n                   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                   app:layout_constraintTop_toBottomOf=&quot;@+id/text_input_layout_name&quot;\n                   app:passwordToggleEnabled=&quot;true&quot;\n                   app:passwordToggleTint=&quot;@color/black&quot;\n                   app:isInputValid=&quot;@{ viewModel.passwordValid }&quot;&gt;\n\n                   &lt;com.borusan.mannesmann.pipeline.internal.view.CenteredHintTextInputEditText\n                       android:id=&quot;@+id/edit_text_password&quot;\n                       style=&quot;@style/InputFieldText.SingleLine.Password&quot;\n                       android:layout_width=&quot;match_parent&quot;\n                       android:layout_height=&quot;match_parent&quot;\n                       android:hint=&quot;@string/login_hint_password&quot;\n                       android:text=&quot;@={ viewModel.password }&quot;\n                       tools:text=&quot;123456&quot; /&gt;\n\n               &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n               &lt;androidx.appcompat.widget.AppCompatTextView\n                   android:id=&quot;@+id/label_forgot_password&quot;\n                   style=&quot;@style/TextField.HyperLink&quot;\n                   android:layout_width=&quot;wrap_content&quot;\n                   android:layout_height=&quot;wrap_content&quot;\n                   android:layout_margin=&quot;@dimen/margin_large&quot;\n                   android:drawableStart=&quot;@drawable/ic_password_gray&quot;\n                   android:drawablePadding=&quot;@dimen/margin_small&quot;\n                   android:text=&quot;@string/label_forgot_password&quot;\n                   android:onClick=&quot;@{() -&gt; callbacks.navigate(directions.toForgotPassword)}&quot;\n                   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                   app:layout_constraintTop_toBottomOf=&quot;@id/text_input_layout_password&quot; /&gt;\n\n               &lt;androidx.appcompat.widget.AppCompatButton\n                   android:id=&quot;@+id/email_sign_in_button&quot;\n                   android:layout_width=&quot;0dp&quot;\n                   app:layout_constraintWidth_percent=&quot;@dimen/button_min_width_percent&quot;\n                   android:layout_height=&quot;@dimen/height_login_button&quot;\n                   android:layout_gravity=&quot;end&quot;\n                   android:layout_marginTop=&quot;@dimen/margin_top_login_button&quot;\n                   android:layout_marginBottom=&quot;@dimen/margin_xxl&quot;\n                   android:enabled=&quot;@{viewModel.loginButtonStatus}&quot;\n                   android:onClick=&quot;@{ () -&gt; callbacks.login() }&quot;\n                   android:text=&quot;@string/login_sign_in&quot;\n                   app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n                   app:layout_constraintStart_toStartOf=&quot;parent&quot;\n                   app:layout_constraintTop_toBottomOf=&quot;@+id/label_forgot_password&quot;/&gt;\n\n\n           &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n       &lt;/androidx.core.widget.NestedScrollView&gt;\n\n           &lt;androidx.appcompat.widget.AppCompatTextView\n               android:id=&quot;@+id/label_continue_without_login&quot;\n               style=&quot;@style/TextField.HyperLink&quot;\n               android:layout_width=&quot;match_parent&quot;\n               android:layout_height=&quot;wrap_content&quot;\n               android:layout_margin=&quot;@dimen/margin_xxl&quot;\n               android:gravity=&quot;center&quot;\n               android:onClick=&quot;@{() -&gt; callbacks.navigate(directions.toHome)}&quot;\n               android:text=&quot;@string/label_continue_without_login&quot;\n               app:layout_constraintTop_toBottomOf=&quot;@+id/scroll_view_login&quot;\n               app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n               app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\n\n       &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n   &lt;/com.borusan.mannesmann.pipeline.internal.view.RootFrameLayout&gt;\n\n&lt;/layout&gt;\n\n</code></pre>\n<ul>\n<li>Xml style used for theme</li>\n</ul>\n<pre><code>&lt;style name=&quot;TextInputLayout&quot; parent=&quot;Widget.MaterialComponents.TextInputLayout.OutlinedBox.Dense&quot;&gt;\n       &lt;item name=&quot;errorTextAppearance&quot;&gt;@style/ErrorText&lt;/item&gt;\n       &lt;item name=&quot;android:textColor&quot;&gt;@color/dark_grey&lt;/item&gt;\n       &lt;item name=&quot;android:textColorHint&quot;&gt;@color/dark_grey&lt;/item&gt;\n       &lt;item name=&quot;colorControlNormal&quot;&gt;@color/transparent&lt;/item&gt;\n       &lt;item name=&quot;android:background&quot;&gt;@drawable/background_text_input&lt;/item&gt;\n   &lt;/style&gt;\n\n\n</code></pre>\n<ul>\n<li>Image that shows the issue i'm talking about</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/I9riO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I9riO.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","servlets","http-status-code-500","nosuchmethod"],"comments":[{"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"score":1,"creation_date":1683988889,"post_id":76243059,"comment_id":134452502,"body_markdown":"The only thing that I can suggest is to change the line class hello extends HttpServlet{ to class Hello extends HttpServlet{  because that is the name of the file shown in project view.  I don&#39;t know that that change will make the error go away.","body":"The only thing that I can suggest is to change the line class hello extends HttpServlet{ to class Hello extends HttpServlet{  because that is the name of the file shown in project view.  I don&#39;t know that that change will make the error go away."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1683992297,"post_id":76243059,"comment_id":134452947,"body_markdown":"Don&#39;t show [screenshots of text](https://meta.stackoverflow.com/a/285557/12567365). Instead show the formatted text in your question. In your case, that console screenshot only shows the last few lines of the stack trace, anyway - making it less useful.","body":"Don&#39;t show <a href=\"https://meta.stackoverflow.com/a/285557/12567365\">screenshots of text</a>. Instead show the formatted text in your question. In your case, that console screenshot only shows the last few lines of the stack trace, anyway - making it less useful."},{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1683992752,"post_id":76243059,"comment_id":134452997,"body_markdown":"Follow the generally accepted Java [naming conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) - for example, class names start with an uppercase letter - so `class Hello` not `class hello` - as noted by @rickz already. This will help you to avoid some surprises and make your code more readable. (Please also consider indenting the Java and HTML in your question - again for readability).","body":"Follow the generally accepted Java <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">naming conventions</a> - for example, class names start with an uppercase letter - so <code>class Hello</code> not <code>class hello</code> - as noted by @rickz already. This will help you to avoid some surprises and make your code more readable. (Please also consider indenting the Java and HTML in your question - again for readability)."}],"answers":[{"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684037695,"creation_date":1684037695,"answer_id":76245779,"question_id":76243059,"body_markdown":"Your servlet class has no public, zero argument, constructor. It needs one, otherwise Tomcat can not instantiate it--exactly as the error output is telling you.","title":"Status 500 error instantiating servlet class caused by java.lang.NoSuchMethodException ronit.hello&lt;init&gt;","body":"<p>Your servlet class has no public, zero argument, constructor. It needs one, otherwise Tomcat can not instantiate it--exactly as the error output is telling you.</p>\n"}],"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76245779,"answer_count":1,"score":0,"last_activity_date":1697293836,"creation_date":1683985688,"question_id":76243059,"body_markdown":"I was executing a web project and it is throwing an error 500 error instatiating servlet class .\r\nI am using tomcat 9.0.71 and using web module 4.0 .\r\n\r\nThis is the error message on the screen.\r\n\r\n![This is the error page status 500](https://i.stack.imgur.com/3r2vn.png)\r\n\r\nThis is the HTML document\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;Insert title here&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h1&gt;This is a hello world&lt;/h1&gt;\r\n&lt;br&gt;\r\n&lt;form action =&quot;hello&quot; method=&quot;get&quot;&gt;\r\n&lt;input type=&quot;submit&quot;&gt;click to say hello world\r\n&lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\nThis is the servlet class\r\n\r\n\r\n\r\n```\r\npackage ronit;\r\nimport javax.servlet.http.*;\r\nimport javax.servlet.annotation.*;\r\nimport java.io.*;\r\n@WebServlet(&quot;/hello&quot;)\r\nclass hello extends HttpServlet{\r\n static final long serialVersionUID = 35335L;\r\npublic void doGet(HttpServletRequest req, HttpServletResponse res) {\r\n\r\ntry {\r\nPrintWriter p = res.getWriter();\r\n\r\np.println(&quot;Hello World&quot;);\r\n}catch(IOException e) {e.printStackTrace();}\r\n}}\r\n\r\n\r\n```\r\n\r\n\r\nThis is the deployment configuration in the server\r\n\r\n\r\n[This is the servlet view](https://i.stack.imgur.com/biPQV.png)\r\n\r\n\r\n\r\n[This is the console after execution](https://i.stack.imgur.com/DfgE4.png)\r\n\r\n[This is the project explorer view](https://i.stack.imgur.com/Z6TP9.png)\r\n\r\n\r\nI am using annotations instead of web.xml and deploying the file by right clicking on the project and run on server.","title":"Status 500 error instantiating servlet class caused by java.lang.NoSuchMethodException ronit.hello&lt;init&gt;","body":"<p>I was executing a web project and it is throwing an error 500 error instatiating servlet class .\nI am using tomcat 9.0.71 and using web module 4.0 .</p>\n<p>This is the error message on the screen.</p>\n<p><img src=\"https://i.stack.imgur.com/3r2vn.png\" alt=\"This is the error page status 500\" /></p>\n<p>This is the HTML document</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;This is a hello world&lt;/h1&gt;\n&lt;br&gt;\n&lt;form action =&quot;hello&quot; method=&quot;get&quot;&gt;\n&lt;input type=&quot;submit&quot;&gt;click to say hello world\n&lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>This is the servlet class</p>\n<pre><code>package ronit;\nimport javax.servlet.http.*;\nimport javax.servlet.annotation.*;\nimport java.io.*;\n@WebServlet(&quot;/hello&quot;)\nclass hello extends HttpServlet{\n static final long serialVersionUID = 35335L;\npublic void doGet(HttpServletRequest req, HttpServletResponse res) {\n\ntry {\nPrintWriter p = res.getWriter();\n\np.println(&quot;Hello World&quot;);\n}catch(IOException e) {e.printStackTrace();}\n}}\n\n\n</code></pre>\n<p>This is the deployment configuration in the server</p>\n<p><a href=\"https://i.stack.imgur.com/biPQV.png\" rel=\"nofollow noreferrer\">This is the servlet view</a></p>\n<p><a href=\"https://i.stack.imgur.com/DfgE4.png\" rel=\"nofollow noreferrer\">This is the console after execution</a></p>\n<p><a href=\"https://i.stack.imgur.com/Z6TP9.png\" rel=\"nofollow noreferrer\">This is the project explorer view</a></p>\n<p>I am using annotations instead of web.xml and deploying the file by right clicking on the project and run on server.</p>\n"},{"tags":["java","swing","intellij-idea","vlc","vlcj"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697325192,"post_id":77293135,"comment_id":136266108,"body_markdown":"`&quot;videos/WeatheringWithYou.mp4&quot;` is either a relative URL or a relative filename.  Either way, it depends on the [current directory](https://en.wikipedia.org/wiki/Working_directory) of the process, which is determined when the program is started.  Your program will be substantially more reliable if you use either an absolute path, or the [Class.getResource](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)) method.","body":"<code>&quot;videos&#47;WeatheringWithYou.mp4&quot;</code> is either a relative URL or a relative filename.  Either way, it depends on the <a href=\"https://en.wikipedia.org/wiki/Working_directory\" rel=\"nofollow noreferrer\">current directory</a> of the process, which is determined when the program is started.  Your program will be substantially more reliable if you use either an absolute path, or the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">Class.getResource</a> method."},{"owner":{"account_id":3101468,"reputation":3914,"user_id":2625478,"accept_rate":82,"display_name":"caprica"},"score":0,"creation_date":1697535406,"post_id":77293135,"comment_id":136289010,"body_markdown":"above comment is the right idea, at least initially put an absolute path to the file.","body":"above comment is the right idea, at least initially put an absolute path to the file."}],"owner":{"account_id":27596215,"reputation":1,"user_id":21408171,"display_name":"Nika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697292532,"creation_date":1697292532,"question_id":77293135,"body_markdown":"I&#39;m trying to play a video as a background with vclj, but it doesn&#39;t work, the screen appears black and now, I&#39;m sharing my two files, which are Main and Home.   \r\n  \r\nThe project is in intelliJ, I leave a repository on github as well.\r\n\r\nGithub: https://github.com/flowerNkl/VideoBackgroundVLCJ.git\r\n\r\nMain.java\r\n\r\n```\r\npackage org.main;\r\n\r\nimport com.formdev.flatlaf.fonts.roboto.FlatRobotoFont;\r\nimport com.formdev.flatlaf.themes.FlatMacDarkLaf;\r\nimport com.formdev.flatlaf.util.UIScale;\r\nimport org.forms.Home;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.WindowAdapter;\r\nimport java.awt.event.WindowEvent;\r\n\r\npublic class Main  extends JFrame {\r\n    private Home home;\r\n    public Main() {\r\n\r\n        init();\r\n    }\r\n\r\n    private void init(){\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        setUndecorated(false);\r\n        setSize(UIScale.scale(new Dimension(1365, 768)));\r\n        setLocationRelativeTo(null);\r\n        home = new Home();\r\n        setContentPane(home);\r\n\r\n        addWindowFocusListener(new WindowAdapter() {\r\n            @Override\r\n            public void windowActivated(WindowEvent e) {\r\n                home.play();\r\n            }\r\n\r\n            @Override\r\n            public void windowClosed(WindowEvent e) {\r\n                home.stop();\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        FlatRobotoFont.install();\r\n        FlatMacDarkLaf.setup();\r\n        UIManager.put(&quot;defaultFont&quot;, new Font(FlatRobotoFont.FAMILY, Font.PLAIN, 13));\r\n        EventQueue.invokeLater(() -&gt; new Main().setVisible(true));\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHome.java\r\n\r\n```\r\npackage org.forms;\r\n\r\nimport uk.co.caprica.vlcj.factory.MediaPlayerFactory;\r\nimport uk.co.caprica.vlcj.player.embedded.EmbeddedMediaPlayer;\r\n\r\nimport java.awt.*;\r\nimport javax.swing.*;\r\n\r\npublic class Home extends JPanel {\r\n    private MediaPlayerFactory factory;\r\n    private EmbeddedMediaPlayer mediaPlayer;\r\n    public Home() {\r\n        init();\r\n    }\r\n\r\n    private void init(){\r\n        factory = new MediaPlayerFactory();\r\n        mediaPlayer = factory.mediaPlayers().newEmbeddedMediaPlayer();\r\n        Canvas canvas = new Canvas();\r\n        mediaPlayer.videoSurface().set(factory.videoSurfaces().newVideoSurface(canvas));\r\n\r\n        setLayout(new BorderLayout());\r\n        add(canvas);\r\n    }\r\n\r\n    public void play(){\r\n        if(mediaPlayer.status().isPlaying()){\r\n            mediaPlayer.controls().stop();\r\n        }\r\n        mediaPlayer.media().play(&quot;videos/WeatheringWithYou.mp4&quot;);\r\n        mediaPlayer.controls().play();\r\n    }\r\n\r\n    public  void stop(){\r\n        mediaPlayer.controls().stop();\r\n        mediaPlayer.release();\r\n        factory.release();\r\n    }\r\n}\r\n```\r\n\r\nI already tried to move the videos folder to the project resources folder and it still doesn&#39;t work, I also have VLC installed on the PC.","title":"How can I play a video with vlcj in the background in JavaSwing?","body":"<p>I'm trying to play a video as a background with vclj, but it doesn't work, the screen appears black and now, I'm sharing my two files, which are Main and Home.</p>\n<p>The project is in intelliJ, I leave a repository on github as well.</p>\n<p>Github: <a href=\"https://github.com/flowerNkl/VideoBackgroundVLCJ.git\" rel=\"nofollow noreferrer\">https://github.com/flowerNkl/VideoBackgroundVLCJ.git</a></p>\n<p>Main.java</p>\n<pre><code>package org.main;\n\nimport com.formdev.flatlaf.fonts.roboto.FlatRobotoFont;\nimport com.formdev.flatlaf.themes.FlatMacDarkLaf;\nimport com.formdev.flatlaf.util.UIScale;\nimport org.forms.Home;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\n\npublic class Main  extends JFrame {\n    private Home home;\n    public Main() {\n\n        init();\n    }\n\n    private void init(){\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setUndecorated(false);\n        setSize(UIScale.scale(new Dimension(1365, 768)));\n        setLocationRelativeTo(null);\n        home = new Home();\n        setContentPane(home);\n\n        addWindowFocusListener(new WindowAdapter() {\n            @Override\n            public void windowActivated(WindowEvent e) {\n                home.play();\n            }\n\n            @Override\n            public void windowClosed(WindowEvent e) {\n                home.stop();\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        FlatRobotoFont.install();\n        FlatMacDarkLaf.setup();\n        UIManager.put(&quot;defaultFont&quot;, new Font(FlatRobotoFont.FAMILY, Font.PLAIN, 13));\n        EventQueue.invokeLater(() -&gt; new Main().setVisible(true));\n    }\n\n}\n\n</code></pre>\n<p>Home.java</p>\n<pre><code>package org.forms;\n\nimport uk.co.caprica.vlcj.factory.MediaPlayerFactory;\nimport uk.co.caprica.vlcj.player.embedded.EmbeddedMediaPlayer;\n\nimport java.awt.*;\nimport javax.swing.*;\n\npublic class Home extends JPanel {\n    private MediaPlayerFactory factory;\n    private EmbeddedMediaPlayer mediaPlayer;\n    public Home() {\n        init();\n    }\n\n    private void init(){\n        factory = new MediaPlayerFactory();\n        mediaPlayer = factory.mediaPlayers().newEmbeddedMediaPlayer();\n        Canvas canvas = new Canvas();\n        mediaPlayer.videoSurface().set(factory.videoSurfaces().newVideoSurface(canvas));\n\n        setLayout(new BorderLayout());\n        add(canvas);\n    }\n\n    public void play(){\n        if(mediaPlayer.status().isPlaying()){\n            mediaPlayer.controls().stop();\n        }\n        mediaPlayer.media().play(&quot;videos/WeatheringWithYou.mp4&quot;);\n        mediaPlayer.controls().play();\n    }\n\n    public  void stop(){\n        mediaPlayer.controls().stop();\n        mediaPlayer.release();\n        factory.release();\n    }\n}\n</code></pre>\n<p>I already tried to move the videos folder to the project resources folder and it still doesn't work, I also have VLC installed on the PC.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1697210438,"post_id":77286543,"comment_id":136255488,"body_markdown":"the feature was merged into the 5.8 version, wouldnt in be logical to assume that this feature did not exist before that? which means logacally again, that you cant do that pre 5.8?","body":"the feature was merged into the 5.8 version, wouldnt in be logical to assume that this feature did not exist before that? which means logacally again, that you cant do that pre 5.8?"}],"answers":[{"comments":[{"owner":{"account_id":3138894,"reputation":3547,"user_id":2654773,"accept_rate":96,"display_name":"eztam"},"score":0,"creation_date":1697220124,"post_id":77289237,"comment_id":136257369,"body_markdown":"This works at least partly. But the problem is, that `OAuth2ResourceServerConfigurer`creates and adds automatically another `OpaqueTokenAuthenticationProvider` on top. Do you know if it&#39;s possible to prevent this?","body":"This works at least partly. But the problem is, that <code>OAuth2ResourceServerConfigurer</code>creates and adds automatically another <code>OpaqueTokenAuthenticationProvider</code> on top. Do you know if it&#39;s possible to prevent this?"},{"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"score":0,"creation_date":1697292303,"post_id":77289237,"comment_id":136263001,"body_markdown":"@eztam yes,That&#39;s because we used http.oauth2ResourceServer(c-&gt;c.opaqueToken(Customizer.withDefaults())), which also caused an OpaqueTokenAuthenticationProvider to be created, but our custom priority is higher than this. If you don&#39;t want to create this OpaqueTokenAuthenticationProvider, maybe you can use the AuthenticationManagerResolver interface to directly return an AuthenticationManager to verify the token. I have edited the above code","body":"@eztam yes,That&#39;s because we used http.oauth2ResourceServer(c-&gt;c.opaqueToken(Customizer.withDe&zwnj;&#8203;faults())), which also caused an OpaqueTokenAuthenticationProvider to be created, but our custom priority is higher than this. If you don&#39;t want to create this OpaqueTokenAuthenticationProvider, maybe you can use the AuthenticationManagerResolver interface to directly return an AuthenticationManager to verify the token. I have edited the above code"}],"tags":[],"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697292412,"creation_date":1697213315,"answer_id":77289237,"question_id":77286543,"body_markdown":"you can use authenticationManagerResolver interface\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http,CustomAuthenticationManager customAuthenticationManager) throws Exception {\r\n            http.oauth2ResourceServer(c-&gt;c.authenticationManagerResolver(d -&gt; customAuthenticationManager));\r\n            return http.build();\r\n        }\r\n    \r\n        @Component\r\n        static class CustomAuthenticationManager implements AuthenticationManager{\r\n            private final Log logger = LogFactory.getLog(getClass());\r\n            private final OpaqueTokenIntrospector introspector;\r\n    \r\n            public CustomAuthenticationManager(OpaqueTokenIntrospector introspector) {\r\n                this.introspector = introspector;\r\n            }\r\n            @Override\r\n            public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n                BearerTokenAuthenticationToken bearer = (BearerTokenAuthenticationToken) authentication;\r\n                OAuth2AuthenticatedPrincipal principal = getOAuth2AuthenticatedPrincipal(bearer);\r\n                AbstractAuthenticationToken result = convert(principal, bearer.getToken());//here custom extract data\r\n                result.setDetails(bearer.getDetails());\r\n                this.logger.debug(&quot;Authenticated token&quot;);\r\n                return result;\r\n            }\r\n    \r\n            private OAuth2AuthenticatedPrincipal getOAuth2AuthenticatedPrincipal(BearerTokenAuthenticationToken bearer) {\r\n                try {\r\n                    return this.introspector.introspect(bearer.getToken());\r\n                }\r\n                catch (BadOpaqueTokenException failed) {\r\n                    this.logger.debug(&quot;Failed to authenticate since token was invalid&quot;);\r\n                    throw new InvalidBearerTokenException(failed.getMessage(), failed);\r\n                }\r\n                catch (OAuth2IntrospectionException failed) {\r\n                    throw new AuthenticationServiceException(failed.getMessage(), failed);\r\n                }\r\n            }\r\n    \r\n            private AbstractAuthenticationToken convert(OAuth2AuthenticatedPrincipal principal, String token) {\r\n                Instant iat = principal.getAttribute(OAuth2TokenIntrospectionClaimNames.IAT);\r\n                Instant exp = principal.getAttribute(OAuth2TokenIntrospectionClaimNames.EXP);\r\n                OAuth2AccessToken accessToken = new OAuth2AccessToken(OAuth2AccessToken.TokenType.BEARER, token, iat, exp);\r\n                return new BearerTokenAuthentication(principal, accessToken, principal.getAuthorities());\r\n            }\r\n    \r\n        }","title":"How to change Authentication implementation in spring-boot resource-server with opaque-token introspection?","body":"<p>you can use authenticationManagerResolver interface</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http,CustomAuthenticationManager customAuthenticationManager) throws Exception {\n        http.oauth2ResourceServer(c-&gt;c.authenticationManagerResolver(d -&gt; customAuthenticationManager));\n        return http.build();\n    }\n\n    @Component\n    static class CustomAuthenticationManager implements AuthenticationManager{\n        private final Log logger = LogFactory.getLog(getClass());\n        private final OpaqueTokenIntrospector introspector;\n\n        public CustomAuthenticationManager(OpaqueTokenIntrospector introspector) {\n            this.introspector = introspector;\n        }\n        @Override\n        public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n            BearerTokenAuthenticationToken bearer = (BearerTokenAuthenticationToken) authentication;\n            OAuth2AuthenticatedPrincipal principal = getOAuth2AuthenticatedPrincipal(bearer);\n            AbstractAuthenticationToken result = convert(principal, bearer.getToken());//here custom extract data\n            result.setDetails(bearer.getDetails());\n            this.logger.debug(&quot;Authenticated token&quot;);\n            return result;\n        }\n\n        private OAuth2AuthenticatedPrincipal getOAuth2AuthenticatedPrincipal(BearerTokenAuthenticationToken bearer) {\n            try {\n                return this.introspector.introspect(bearer.getToken());\n            }\n            catch (BadOpaqueTokenException failed) {\n                this.logger.debug(&quot;Failed to authenticate since token was invalid&quot;);\n                throw new InvalidBearerTokenException(failed.getMessage(), failed);\n            }\n            catch (OAuth2IntrospectionException failed) {\n                throw new AuthenticationServiceException(failed.getMessage(), failed);\n            }\n        }\n\n        private AbstractAuthenticationToken convert(OAuth2AuthenticatedPrincipal principal, String token) {\n            Instant iat = principal.getAttribute(OAuth2TokenIntrospectionClaimNames.IAT);\n            Instant exp = principal.getAttribute(OAuth2TokenIntrospectionClaimNames.EXP);\n            OAuth2AccessToken accessToken = new OAuth2AccessToken(OAuth2AccessToken.TokenType.BEARER, token, iat, exp);\n            return new BearerTokenAuthentication(principal, accessToken, principal.getAuthorities());\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":3138894,"reputation":3547,"user_id":2654773,"accept_rate":96,"display_name":"eztam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77289237,"answer_count":1,"score":0,"last_activity_date":1697292412,"creation_date":1697188852,"question_id":77286543,"body_markdown":"I have a spring-boot resource-server configured with opaque-token introspection.\r\n\r\nSpring security creates internally a `BearerTokenAuthentication` as a result of the authentication. How can I replace the `BearerTokenAuthentication` by any other implementation of `Authentication`?\r\n\r\n\r\nThe exact same question has been asked and answered already [here][1], for spring-security version &gt;= 5.8.\r\nHow can the same be achieved with spring-security version 5.7 or older?\r\n\r\n  [1]: https://stackoverflow.com/questions/73230717/how-to-change-authentication-implementation-in-spring-boot-resource-server-wit","title":"How to change Authentication implementation in spring-boot resource-server with opaque-token introspection?","body":"<p>I have a spring-boot resource-server configured with opaque-token introspection.</p>\n<p>Spring security creates internally a <code>BearerTokenAuthentication</code> as a result of the authentication. How can I replace the <code>BearerTokenAuthentication</code> by any other implementation of <code>Authentication</code>?</p>\n<p>The exact same question has been asked and answered already <a href=\"https://stackoverflow.com/questions/73230717/how-to-change-authentication-implementation-in-spring-boot-resource-server-wit\">here</a>, for spring-security version &gt;= 5.8.\nHow can the same be achieved with spring-security version 5.7 or older?</p>\n"},{"tags":["java","maven","dependencies","pom.xml","parent-pom"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":0,"creation_date":1697293557,"post_id":77292929,"comment_id":136263127,"body_markdown":"Does this answer your question? [Make a maven dependency provided based on active spring profile](https://stackoverflow.com/questions/42299263/make-a-maven-dependency-provided-based-on-active-spring-profile)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42299263/make-a-maven-dependency-provided-based-on-active-spring-profile\">Make a maven dependency provided based on active spring profile</a>"},{"owner":{"account_id":2993414,"reputation":12019,"user_id":2540471,"display_name":"Robert Scholte"},"score":1,"creation_date":1697305086,"post_id":77292929,"comment_id":136264376,"body_markdown":"if the packaging is pom, almost all the time you don&#39;t want to specify dependencies like this. Instead use `dependencyManagement` and let the projects using this parent decide if they want the dependency. This might also solve your original question.","body":"if the packaging is pom, almost all the time you don&#39;t want to specify dependencies like this. Instead use <code>dependencyManagement</code> and let the projects using this parent decide if they want the dependency. This might also solve your original question."},{"owner":{"account_id":5518953,"reputation":759,"user_id":4382623,"accept_rate":67,"display_name":"Praveen Kumar"},"score":0,"creation_date":1697354238,"post_id":77292929,"comment_id":136267494,"body_markdown":"Yeah, I know I could use dependencyManagement. I tried that first and it works well. But wanted to try if there any other solutions to it.","body":"Yeah, I know I could use dependencyManagement. I tried that first and it works well. But wanted to try if there any other solutions to it."}],"owner":{"account_id":5518953,"reputation":759,"user_id":4382623,"accept_rate":67,"display_name":"Praveen Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697289047,"creation_date":1697289047,"question_id":77292929,"body_markdown":"I am trying to set up a Parent pom for my services to easily manage dependencies. I have my parent pom like this,\r\n\r\n```\r\n&lt;project&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.12&lt;/version&gt;\r\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;groupId&gt;com.myapp&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myapp-common-parent-bom&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;name&gt;myapp-common-parent-bom&lt;/name&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;springboot.version&gt;2.7.12&lt;/springboot.version&gt;\r\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt; \r\n        &lt;swagger.version&gt;1.6.3&lt;/swagger.version&gt;\r\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAnd, I am using this as the parent in other services. Sample here,\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.myapp&lt;/groupId&gt;\r\n        &lt;artifactId&gt;myapp-common-parent-bom&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.myapp&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-service&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1&lt;/version&gt;\r\n    &lt;name&gt;my-service&lt;/name&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nNow, I would like to control the dependencies that I need to install in my service using a flag. Something like this `&lt;useLombok&gt;true&lt;/useLombok&gt;`. How can I do this?\r\n\r\nI tried this in the parent pom, but it din&#39;t work.\r\n```\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;!${useLombok}&lt;/optional&gt;\r\n            &lt;version&gt;1.18.20&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nSo, I am looking for help how I can achieve this.","title":"Skip maven dependencies based on a flag","body":"<p>I am trying to set up a Parent pom for my services to easily manage dependencies. I have my parent pom like this,</p>\n<pre><code>&lt;project&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.12&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.myapp&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp-common-parent-bom&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;name&gt;myapp-common-parent-bom&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;springboot.version&gt;2.7.12&lt;/springboot.version&gt;\n        &lt;spring-cloud.version&gt;2022.0.4&lt;/spring-cloud.version&gt; \n        &lt;swagger.version&gt;1.6.3&lt;/swagger.version&gt;\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;version&gt;${springboot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>And, I am using this as the parent in other services. Sample here,</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.myapp&lt;/groupId&gt;\n        &lt;artifactId&gt;myapp-common-parent-bom&lt;/artifactId&gt;\n        &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.myapp&lt;/groupId&gt;\n    &lt;artifactId&gt;my-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;name&gt;my-service&lt;/name&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Now, I would like to control the dependencies that I need to install in my service using a flag. Something like this <code>&lt;useLombok&gt;true&lt;/useLombok&gt;</code>. How can I do this?</p>\n<p>I tried this in the parent pom, but it din't work.</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;!${useLombok}&lt;/optional&gt;\n            &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>So, I am looking for help how I can achieve this.</p>\n"},{"tags":["java","mongodb","mongodb-query","updates"],"answers":[{"tags":[],"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697288834,"creation_date":1697288834,"answer_id":77292921,"question_id":77292160,"body_markdown":"I can&#39;t quite tell the extent of your question. But you do mention that you are looking for the direct MongoDB query to achieve and there is an error in the one that you have shared so that&#39;s what this answer will focus on.\r\n\r\nAs we can see in [this playground example](https://mongoplayground.net/p/6lT1xm0so24), the update doesn&#39;t actually do what is intended. It shows us that documents such as the following:\r\n\r\n```\r\n  {\r\n    _id: 2,\r\n    version: &quot;123&quot;\r\n  },\r\n```\r\n\r\nGet modified as follows:\r\n\r\n```\r\n  {\r\n    &quot;_id&quot;: 2,\r\n    &quot;version&quot;: {\r\n      &quot;$toLong&quot;: &quot;$version&quot;\r\n    }\r\n  },\r\n```\r\n\r\nThe literal translation of `version` to `{ &quot;$toLong&quot;: &quot;$version&quot; }` has to do with the semantics of the command as currently written. As outlined in [this answer](https://stackoverflow.com/questions/74078046/subdocument-merge-issue-when-mongodb-rust-driver-is-used/74080218#74080218) there are actually two different `$set` operators in MongoDB. You&#39;re currently using the update modifier, but since you&#39;re referencing another field you are going to need to use the aggregation stage instead. \r\n\r\nThe good news is that the conversion is quite simple, just wrap the second argument to the command in square brackets. In this case we want to change it from:\r\n\r\n```\r\ndb.collection.updateMany(\r\n  {version : {$type: &quot;string&quot;}}, \r\n  {$set: {version: {$toLong: &quot;$version&quot;}}}\r\n)\r\n```\r\n\r\nTo:\r\n\r\n```\r\ndb.collection.updateMany(\r\n  {version : {$type: &quot;string&quot;}}, \r\n  [ {$set: {version: {$toLong: &quot;$version&quot;}}} ]\r\n)\r\n```\r\n\r\nThis alternative syntax yields results in the following change to the sample document that we looked at earlier:\r\n\r\n```\r\n  {\r\n    &quot;_id&quot;: 2,\r\n    &quot;version&quot;: NumberLong(123)\r\n  },\r\n```\r\n\r\nSee how it works in [this other playground example](https://mongoplayground.net/p/2U0GJCWBxyY)\r\n","title":"updateMany while doing type change in mongoDB using Java","body":"<p>I can't quite tell the extent of your question. But you do mention that you are looking for the direct MongoDB query to achieve and there is an error in the one that you have shared so that's what this answer will focus on.</p>\n<p>As we can see in <a href=\"https://mongoplayground.net/p/6lT1xm0so24\" rel=\"nofollow noreferrer\">this playground example</a>, the update doesn't actually do what is intended. It shows us that documents such as the following:</p>\n<pre><code>  {\n    _id: 2,\n    version: &quot;123&quot;\n  },\n</code></pre>\n<p>Get modified as follows:</p>\n<pre><code>  {\n    &quot;_id&quot;: 2,\n    &quot;version&quot;: {\n      &quot;$toLong&quot;: &quot;$version&quot;\n    }\n  },\n</code></pre>\n<p>The literal translation of <code>version</code> to <code>{ &quot;$toLong&quot;: &quot;$version&quot; }</code> has to do with the semantics of the command as currently written. As outlined in <a href=\"https://stackoverflow.com/questions/74078046/subdocument-merge-issue-when-mongodb-rust-driver-is-used/74080218#74080218\">this answer</a> there are actually two different <code>$set</code> operators in MongoDB. You're currently using the update modifier, but since you're referencing another field you are going to need to use the aggregation stage instead.</p>\n<p>The good news is that the conversion is quite simple, just wrap the second argument to the command in square brackets. In this case we want to change it from:</p>\n<pre><code>db.collection.updateMany(\n  {version : {$type: &quot;string&quot;}}, \n  {$set: {version: {$toLong: &quot;$version&quot;}}}\n)\n</code></pre>\n<p>To:</p>\n<pre><code>db.collection.updateMany(\n  {version : {$type: &quot;string&quot;}}, \n  [ {$set: {version: {$toLong: &quot;$version&quot;}}} ]\n)\n</code></pre>\n<p>This alternative syntax yields results in the following change to the sample document that we looked at earlier:</p>\n<pre><code>  {\n    &quot;_id&quot;: 2,\n    &quot;version&quot;: NumberLong(123)\n  },\n</code></pre>\n<p>See how it works in <a href=\"https://mongoplayground.net/p/2U0GJCWBxyY\" rel=\"nofollow noreferrer\">this other playground example</a></p>\n"}],"owner":{"account_id":4006849,"reputation":3048,"user_id":3301316,"accept_rate":58,"display_name":"Jet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697288834,"creation_date":1697272904,"question_id":77292160,"body_markdown":"I have a use case to update data in a collection of mongoDB having avg size of 250kb.\r\nUse case: convert datatype from String to Long for a field version.\r\n\r\nI would like to do it in efficient way . Looking for options from Java and also through direct mongo queries.\r\n\r\nMongoQuery found:\r\n\r\n    db.collection.updateMany({version : {$type: &quot;string&quot;}}, {$set: {version: {$toLong: &quot;$version&quot;}}})\r\n\r\nTrying something like this below in java and not finding the version.\r\n\r\n    Bson filter = new Document(&quot;version&quot;, new Document(&quot;$type&quot;, &quot;string&quot;));\r\n    Bson newValue = new Document(&quot;version&quot;, *****);\r\n    Bson updateOperationDocument = new Document(&quot;$set&quot;, newValue);\r\n    collection.updateMany(filter, updateOperationDocument);\r\n\r\nHow to achieve this, not finding the right way.\r\n","title":"updateMany while doing type change in mongoDB using Java","body":"<p>I have a use case to update data in a collection of mongoDB having avg size of 250kb.\nUse case: convert datatype from String to Long for a field version.</p>\n<p>I would like to do it in efficient way . Looking for options from Java and also through direct mongo queries.</p>\n<p>MongoQuery found:</p>\n<pre><code>db.collection.updateMany({version : {$type: &quot;string&quot;}}, {$set: {version: {$toLong: &quot;$version&quot;}}})\n</code></pre>\n<p>Trying something like this below in java and not finding the version.</p>\n<pre><code>Bson filter = new Document(&quot;version&quot;, new Document(&quot;$type&quot;, &quot;string&quot;));\nBson newValue = new Document(&quot;version&quot;, *****);\nBson updateOperationDocument = new Document(&quot;$set&quot;, newValue);\ncollection.updateMany(filter, updateOperationDocument);\n</code></pre>\n<p>How to achieve this, not finding the right way.</p>\n"},{"tags":["java","encryption","digital-signature","pki","encryption-asymmetric"],"owner":{"account_id":29630756,"reputation":1,"user_id":22709244,"display_name":"juniorDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697288312,"creation_date":1697288282,"question_id":77292886,"body_markdown":"We have required to sign and encrypt request payloads. We already have accomplished for the signed payload. Now we need to encrypt that signed payload using the receiver systems public CA certificate.\r\n\r\nPlease help how can this steps be achieve in Java. What are libraries, packages and apis etc might be required? It would help to have sample code for reference.\r\n\r\nBelow is the sample of a encrypted payload. I have trimmed the namespaces in the sample to avoid issues posting here in SO.\r\n\r\nAny inputs is highly appreciated.\r\n\r\n```\r\n&lt;xenc:EncryptedData xmlns:xenc=&quot;xmlenc#&quot; Type=&quot;xmlenc#Element&quot;&gt;\r\n\t&lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#tripledes-cbc&quot;/&gt;\r\n\t&lt;ds:KeyInfo xmlns:ds=&quot;xmldsig#&quot;&gt;\r\n\t\t&lt;xenc:EncryptedKey&gt;\r\n\t\t\t&lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#rsa-1_5&quot;/&gt;\r\n\t\t\t&lt;xenc:CipherData&gt;\r\n\t\t\t\t&lt;xenc:CipherValue&gt;b44GKIzOikb.....&lt;/xenc:CipherValue&gt;\r\n\t\t\t&lt;/xenc:CipherData&gt;\r\n\t\t&lt;/xenc:EncryptedKey&gt;\r\n\t&lt;/ds:KeyInfo&gt;\r\n\t&lt;xenc:CipherData&gt;\r\n\t\t&lt;xenc:CipherValue&gt;CO+A40a3vGzo47S1vaM.....&lt;/xenc:CipherValue&gt;\r\n\t&lt;/xenc:CipherData&gt;\r\n&lt;/xenc:EncryptedData&gt;\r\n\r\n```\r\n","title":"Encrypt XML request payloads with receiver systems public certificate with Java","body":"<p>We have required to sign and encrypt request payloads. We already have accomplished for the signed payload. Now we need to encrypt that signed payload using the receiver systems public CA certificate.</p>\n<p>Please help how can this steps be achieve in Java. What are libraries, packages and apis etc might be required? It would help to have sample code for reference.</p>\n<p>Below is the sample of a encrypted payload. I have trimmed the namespaces in the sample to avoid issues posting here in SO.</p>\n<p>Any inputs is highly appreciated.</p>\n<pre><code>&lt;xenc:EncryptedData xmlns:xenc=&quot;xmlenc#&quot; Type=&quot;xmlenc#Element&quot;&gt;\n    &lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#tripledes-cbc&quot;/&gt;\n    &lt;ds:KeyInfo xmlns:ds=&quot;xmldsig#&quot;&gt;\n        &lt;xenc:EncryptedKey&gt;\n            &lt;xenc:EncryptionMethod Algorithm=&quot;xmlenc#rsa-1_5&quot;/&gt;\n            &lt;xenc:CipherData&gt;\n                &lt;xenc:CipherValue&gt;b44GKIzOikb.....&lt;/xenc:CipherValue&gt;\n            &lt;/xenc:CipherData&gt;\n        &lt;/xenc:EncryptedKey&gt;\n    &lt;/ds:KeyInfo&gt;\n    &lt;xenc:CipherData&gt;\n        &lt;xenc:CipherValue&gt;CO+A40a3vGzo47S1vaM.....&lt;/xenc:CipherValue&gt;\n    &lt;/xenc:CipherData&gt;\n&lt;/xenc:EncryptedData&gt;\n\n</code></pre>\n"},{"tags":["java","maven","gwt","compilation"],"comments":[{"owner":{"account_id":3407327,"reputation":405,"user_id":2858092,"display_name":"Luigi Polvani"},"score":1,"creation_date":1527788774,"post_id":50626578,"comment_id":88269930,"body_markdown":"https://gwt-maven-plugin.github.io/gwt-maven-plugin/\n\nThere are pretty good examples in the website, and an archetype project you can check out with maven","body":"<a href=\"https://gwt-maven-plugin.github.io/gwt-maven-plugin/\" rel=\"nofollow noreferrer\">gwt-maven-plugin.github.io/gwt-maven-plugin</a>  There are pretty good examples in the website, and an archetype project you can check out with maven"},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":0,"creation_date":1548800065,"post_id":50626578,"comment_id":95670845,"body_markdown":"I just tested the new one. Here is a step by step example: https://javagc.leponceau.org/2019/01/how-to-use-new-tbroyers-gwt-maven.html","body":"I just tested the new one. Here is a step by step example: <a href=\"https://javagc.leponceau.org/2019/01/how-to-use-new-tbroyers-gwt-maven.html\" rel=\"nofollow noreferrer\">javagc.leponceau.org/2019/01/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1181589,"reputation":3787,"user_id":1156412,"display_name":"El Hoss"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697288144,"creation_date":1527844903,"answer_id":50640114,"question_id":50626578,"body_markdown":"There are two GWT Maven plugins:\r\n\r\n* [mojo maven plugin][1] (aka. legacy plugin): not recommended anymore, but useful if you use a monolithic maven layout, i.e. projects including client and server code in the same module. Errai project usually uses this monolithic layout and therefore use this plugin.\r\n* [tbroyer maven plugin][3] (aka. new generation plugin): the recommended one! you must apply the multi-module layout.\r\n\r\nMore info about the tbroyer plugin (recommended one):\r\n\r\n* GitHub: [https://github.com/tbroyer/gwt-maven-plugin][3] \r\n* Documentation: [https://tbroyer.github.io/gwt-maven-plugin][2]\r\n* Multi-module layout archetypes (create new projects): [gwt-maven-archetypes][4]\r\n\r\nF.e.: here you find a lot of project based on that plugin:  [https://github.com/NaluKit/nalu-examples][5]\r\n\r\n\r\n  [1]: https://github.com/gwt-maven-plugin/gwt-maven-plugin\r\n  [2]: https://tbroyer.github.io/gwt-maven-plugin/index.html#\r\n  [3]: https://github.com/tbroyer/gwt-maven-plugin\r\n  [4]: https://github.com/tbroyer/gwt-maven-archetypes/\r\n  [5]: https://github.com/NaluKit/nalu-examples","title":"Compile gwt client side code to javascript with Maven","body":"<p>There are two GWT Maven plugins:</p>\n<ul>\n<li><a href=\"https://github.com/gwt-maven-plugin/gwt-maven-plugin\" rel=\"nofollow noreferrer\">mojo maven plugin</a> (aka. legacy plugin): not recommended anymore, but useful if you use a monolithic maven layout, i.e. projects including client and server code in the same module. Errai project usually uses this monolithic layout and therefore use this plugin.</li>\n<li><a href=\"https://github.com/tbroyer/gwt-maven-plugin\" rel=\"nofollow noreferrer\">tbroyer maven plugin</a> (aka. new generation plugin): the recommended one! you must apply the multi-module layout.</li>\n</ul>\n<p>More info about the tbroyer plugin (recommended one):</p>\n<ul>\n<li>GitHub: <a href=\"https://github.com/tbroyer/gwt-maven-plugin\" rel=\"nofollow noreferrer\">https://github.com/tbroyer/gwt-maven-plugin</a></li>\n<li>Documentation: <a href=\"https://tbroyer.github.io/gwt-maven-plugin/index.html#\" rel=\"nofollow noreferrer\">https://tbroyer.github.io/gwt-maven-plugin</a></li>\n<li>Multi-module layout archetypes (create new projects): <a href=\"https://github.com/tbroyer/gwt-maven-archetypes/\" rel=\"nofollow noreferrer\">gwt-maven-archetypes</a></li>\n</ul>\n<p>F.e.: here you find a lot of project based on that plugin:  <a href=\"https://github.com/NaluKit/nalu-examples\" rel=\"nofollow noreferrer\">https://github.com/NaluKit/nalu-examples</a></p>\n"}],"owner":{"account_id":9642367,"reputation":153,"user_id":7156202,"display_name":"nimour pristou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697288144,"creation_date":1527776541,"question_id":50626578,"body_markdown":"before I used **Ant** to builder my app where I compile a JAR (gwt-visualization) to javascript\r\n\r\n      &lt;target name=&quot;compileGWTClient&quot; description=&quot;Compile gwt client side code to javascript&quot;&gt;\r\n      \t&lt;echo message=&quot;=========== Build gwt&quot;/&gt;\r\n    \t&lt;java fork=&quot;yes&quot; failonerror=&quot;true&quot; maxmemory=&quot;512M&quot; classname=&quot;com.google.gwt.dev.GWTCompiler&quot; classpath=&quot;/src:../myproject/tools/lib/gwt-visualization.jar&quot;&gt;\r\n    \t  &lt;arg value=&quot;-out&quot;/&gt;\r\n    \t  &lt;arg value=&quot;build&quot;/&gt;\r\n          &lt;arg value=&quot;-style&quot;/&gt;\r\n          &lt;arg value=&quot;OBF&quot;/&gt;      \r\n    \t  &lt;arg value=&quot;org.compiere.gwt.Compiere&quot;/&gt;\r\n    \t&lt;/java&gt;\r\n       &lt;/target&gt;\r\n\r\nI want to do the same thing with **Maven**\r\n\r\nthx ","title":"Compile gwt client side code to javascript with Maven","body":"<p>before I used <strong>Ant</strong> to builder my app where I compile a JAR (gwt-visualization) to javascript</p>\n\n<pre><code>  &lt;target name=\"compileGWTClient\" description=\"Compile gwt client side code to javascript\"&gt;\n    &lt;echo message=\"=========== Build gwt\"/&gt;\n    &lt;java fork=\"yes\" failonerror=\"true\" maxmemory=\"512M\" classname=\"com.google.gwt.dev.GWTCompiler\" classpath=\"/src:../myproject/tools/lib/gwt-visualization.jar\"&gt;\n      &lt;arg value=\"-out\"/&gt;\n      &lt;arg value=\"build\"/&gt;\n      &lt;arg value=\"-style\"/&gt;\n      &lt;arg value=\"OBF\"/&gt;      \n      &lt;arg value=\"org.compiere.gwt.Compiere\"/&gt;\n    &lt;/java&gt;\n   &lt;/target&gt;\n</code></pre>\n\n<p>I want to do the same thing with <strong>Maven</strong></p>\n\n<p>thx </p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-security-oauth2"],"comments":[{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":0,"creation_date":1522930835,"post_id":49654143,"comment_id":86354770,"body_markdown":"I was little bit more descriptive with the issue. When I shifted from Spring security 4 to 5. I was getting first error and then I solved it by changing my password generator, It start giving me second error. And the error messages are diffrent. 1) Encoded password does not look like BCrypt and 2) java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null. Second issues it I am having currently.","body":"I was little bit more descriptive with the issue. When I shifted from Spring security 4 to 5. I was getting first error and then I solved it by changing my password generator, It start giving me second error. And the error messages are diffrent. 1) Encoded password does not look like BCrypt and 2) java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null. Second issues it I am having currently."},{"owner":{"account_id":6134396,"reputation":2472,"user_id":4783710,"accept_rate":51,"display_name":"KellyM"},"score":3,"creation_date":1522975581,"post_id":49654143,"comment_id":86378772,"body_markdown":"I believe the issue is with the client (not the individual user accounts). I, personally, was already encoding the user details, but not the client. Now, users of OAuth2 are expected to encode the *client* secret (as well as user passwords). Specifically, either set the `passwordEncoder` on the `ClientDetailsServiceConfigurer` or prefix the secret with {noop}. Hope that makes sense and helps somebody out.","body":"I believe the issue is with the client (not the individual user accounts). I, personally, was already encoding the user details, but not the client. Now, users of OAuth2 are expected to encode the <i>client</i> secret (as well as user passwords). Specifically, either set the <code>passwordEncoder</code> on the <code>ClientDetailsServiceConfigurer</code> or prefix the secret with {noop}. Hope that makes sense and helps somebody out."},{"owner":{"account_id":1613382,"reputation":3295,"user_id":1502439,"accept_rate":40,"display_name":"Janac Meena"},"score":0,"creation_date":1614368597,"post_id":49654143,"comment_id":117374124,"body_markdown":"This issue was resolved for me by running `mvn clean package`. Must&#39;ve been some issue with caching.","body":"This issue was resolved for me by running <code>mvn clean package</code>. Must&#39;ve been some issue with caching."}],"answers":[{"comments":[{"owner":{"account_id":9552046,"reputation":692,"user_id":7095884,"accept_rate":69,"display_name":"olivmir"},"score":0,"creation_date":1523275295,"post_id":49683417,"comment_id":86478543,"body_markdown":"see also [Password Matching](https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-matching) and [Password Storage Format](https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-storage-format) in Spring Security 5.0.0.RC1 Released remarks","body":"see also <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-matching\" rel=\"nofollow noreferrer\">Password Matching</a> and <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-storage-format\" rel=\"nofollow noreferrer\">Password Storage Format</a> in Spring Security 5.0.0.RC1 Released remarks"},{"owner":{"account_id":4856342,"reputation":181,"user_id":3917179,"display_name":"Troy Young"},"score":1,"creation_date":1546591260,"post_id":49683417,"comment_id":94906397,"body_markdown":"also can add the `secret(passwordEncoder.encode(&quot;secret&quot;))` by using the default password encoder.","body":"also can add the <code>secret(passwordEncoder.encode(&quot;secret&quot;))</code> by using the default password encoder."},{"owner":{"account_id":145939,"reputation":3382,"user_id":356083,"accept_rate":60,"display_name":"f.khantsis"},"score":3,"creation_date":1549757294,"post_id":49683417,"comment_id":96018417,"body_markdown":"what if I don&#39;t use a secret?","body":"what if I don&#39;t use a secret?"},{"owner":{"account_id":417086,"reputation":928,"user_id":792883,"accept_rate":33,"display_name":"bzhu"},"score":4,"creation_date":1598942681,"post_id":49683417,"comment_id":112611613,"body_markdown":"also: auth.inMemoryAuthentication()\n        .withUser(&quot;admin&quot;).roles(&quot;ADMIN&quot;).password(&quot;{noop}password&quot;);","body":"also: auth.inMemoryAuthentication()         .withUser(&quot;admin&quot;).roles(&quot;ADMIN&quot;).password(&quot;{noop}password&quot;)&zwnj;&#8203;;"},{"owner":{"account_id":1083037,"reputation":4332,"user_id":1079483,"accept_rate":64,"display_name":"Sebi"},"score":0,"creation_date":1638130466,"post_id":49683417,"comment_id":123999942,"body_markdown":"@bzhu what if I don&#39;t want to hardcode the future users that I don&#39;t know will register?","body":"@bzhu what if I don&#39;t want to hardcode the future users that I don&#39;t know will register?"}],"tags":[],"owner":{"account_id":11177216,"reputation":1733,"user_id":8202380,"display_name":"Edwin Diaz"},"comment_count":5,"down_vote_count":1,"up_vote_count":137,"is_accepted":true,"score":136,"last_activity_date":1523784780,"creation_date":1522973892,"answer_id":49683417,"question_id":49654143,"body_markdown":"When you are configuring the `ClientDetailsServiceConfigurer`, you have to also apply the new [password storage format](https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-storage-format) to the client secret.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    .secret(&quot;{noop}secret&quot;)\r\n\r\n","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>When you are configuring the <code>ClientDetailsServiceConfigurer</code>, you have to also apply the new <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-storage-format\" rel=\"noreferrer\">password storage format</a> to the client secret.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>.secret(\"{noop}secret\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":3,"creation_date":1523801114,"post_id":49829952,"comment_id":86700214,"body_markdown":"Hi, actually we can not use NoOpPasswordEncoder. As it is deprecated in new spring-security version. And as per the spring security documentation (https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding) even if we are using NoOpPasswordEncoder we must add {noop} as an id to password and secret. I believe this won&#39;t justify my question. The main problem with all the solution is that they are not mentioning that you need to add an ID to your secret too.","body":"Hi, actually we can not use NoOpPasswordEncoder. As it is deprecated in new spring-security version. And as per the spring security documentation (<a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding\" rel=\"nofollow noreferrer\">spring.io/blog/2017/11/01/&hellip;</a>) even if we are using NoOpPasswordEncoder we must add {noop} as an id to password and secret. I believe this won&#39;t justify my question. The main problem with all the solution is that they are not mentioning that you need to add an ID to your secret too."},{"owner":{"account_id":6144054,"reputation":2370,"user_id":4790497,"accept_rate":100,"display_name":"rocksteady"},"score":1,"creation_date":1523802943,"post_id":49829952,"comment_id":86700774,"body_markdown":"Yes, it is deprecated. My source tells so, also. If you just use `NoOpPasswordEncoder` - without `BCryptPasswordEncoder` - it works. I use spring boot `2.0.1.RELEASE`.","body":"Yes, it is deprecated. My source tells so, also. If you just use <code>NoOpPasswordEncoder</code> - without <code>BCryptPasswordEncoder</code> - it works. I use spring boot <code>2.0.1.RELEASE</code>."},{"owner":{"account_id":6144054,"reputation":2370,"user_id":4790497,"accept_rate":100,"display_name":"rocksteady"},"score":0,"creation_date":1523802985,"post_id":49829952,"comment_id":86700790,"body_markdown":"But, as I&#39;ve mentioned in the answer, this is no production scenario at all.","body":"But, as I&#39;ve mentioned in the answer, this is no production scenario at all."},{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":0,"creation_date":1523861621,"post_id":49829952,"comment_id":86716847,"body_markdown":"I am not getting why we should use a deprecated class even for Testing purpose?","body":"I am not getting why we should use a deprecated class even for Testing purpose?"},{"owner":{"account_id":6144054,"reputation":2370,"user_id":4790497,"accept_rate":100,"display_name":"rocksteady"},"score":0,"creation_date":1523862202,"post_id":49829952,"comment_id":86717146,"body_markdown":"Ok, you are completely right. I added this answer for every one who is just playing around and starts diving into the matter using an outdated tutorial, maybe. That&#39;s why I also mentioned the `BCryptPasswordEncoder`. I updated my answer.","body":"Ok, you are completely right. I added this answer for every one who is just playing around and starts diving into the matter using an outdated tutorial, maybe. That&#39;s why I also mentioned the <code>BCryptPasswordEncoder</code>. I updated my answer."},{"owner":{"account_id":5340830,"reputation":668,"user_id":4258006,"display_name":"Shiva kumar"},"score":0,"creation_date":1697517888,"post_id":49829952,"comment_id":136286316,"body_markdown":"@Jimmy, &quot;It is deprecated to indicate that this is a legacy implementation and using it is considered insecure&quot;","body":"@Jimmy, &quot;It is deprecated to indicate that this is a legacy implementation and using it is considered insecure&quot;"}],"tags":[],"owner":{"account_id":6144054,"reputation":2370,"user_id":4790497,"accept_rate":100,"display_name":"rocksteady"},"comment_count":6,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1523862272,"creation_date":1523698052,"answer_id":49829952,"question_id":49654143,"body_markdown":"For anyone facing the same issue and not in need of a secure solution - for testing and debugging mainly - in memory users can still be configured.\r\n\r\n**This is just for playing around - no real world scenario.**\r\n\r\n**The approach used below is deprecated.**\r\n\r\nThis is where I got it from:\r\n\r\n - [source](https://www.harinathk.com/spring/no-passwordencoder-mapped-id-null/)\r\n - [reference, also mentioned in the source above](https://docs.spring.io/spring-security/site/docs/5.0.0.BUILD-SNAPSHOT/reference/htmlsingle/#getting-started-experience)\r\n\r\n---\r\n\r\nWithin your `WebSecurityConfigurerAdapter` add the following:\r\n\r\n    @SuppressWarnings(&quot;deprecation&quot;)\r\n    @Bean\r\n    public static NoOpPasswordEncoder passwordEncoder() {\r\n    return (NoOpPasswordEncoder) NoOpPasswordEncoder.getInstance();\r\n    }\r\n\r\nHere, obviously, passwords are hashed, but still are available in memory.\r\n\r\n---\r\n\r\nOf course, you could also use a real `PasswordEncoder` like `BCryptPasswordEncoder` and prefix the password with the correct id:\r\n\r\n    // Create an encoder with strength 16\r\n    BCryptPasswordEncoder encoder = new BCryptPasswordEncoder(16);\r\n    String result = encoder.encode(&quot;myPassword&quot;);\r\n    assertTrue(encoder.matches(&quot;myPassword&quot;, result));","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>For anyone facing the same issue and not in need of a secure solution - for testing and debugging mainly - in memory users can still be configured.</p>\n\n<p><strong>This is just for playing around - no real world scenario.</strong></p>\n\n<p><strong>The approach used below is deprecated.</strong></p>\n\n<p>This is where I got it from:</p>\n\n<ul>\n<li><a href=\"https://www.harinathk.com/spring/no-passwordencoder-mapped-id-null/\" rel=\"noreferrer\">source</a></li>\n<li><a href=\"https://docs.spring.io/spring-security/site/docs/5.0.0.BUILD-SNAPSHOT/reference/htmlsingle/#getting-started-experience\" rel=\"noreferrer\">reference, also mentioned in the source above</a></li>\n</ul>\n\n<hr>\n\n<p>Within your <code>WebSecurityConfigurerAdapter</code> add the following:</p>\n\n<pre><code>@SuppressWarnings(\"deprecation\")\n@Bean\npublic static NoOpPasswordEncoder passwordEncoder() {\nreturn (NoOpPasswordEncoder) NoOpPasswordEncoder.getInstance();\n}\n</code></pre>\n\n<p>Here, obviously, passwords are hashed, but still are available in memory.</p>\n\n<hr>\n\n<p>Of course, you could also use a real <code>PasswordEncoder</code> like <code>BCryptPasswordEncoder</code> and prefix the password with the correct id:</p>\n\n<pre><code>// Create an encoder with strength 16\nBCryptPasswordEncoder encoder = new BCryptPasswordEncoder(16);\nString result = encoder.encode(\"myPassword\");\nassertTrue(encoder.matches(\"myPassword\", result));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9321584,"reputation":1230,"user_id":6920169,"accept_rate":75,"display_name":"Loki"},"score":4,"creation_date":1565950159,"post_id":56490819,"comment_id":101512022,"body_markdown":"Just want to use plain pass word...! Like no operation to be performed on that! \nI think so! ;)","body":"Just want to use plain pass word...! Like no operation to be performed on that!  I think so! ;)"}],"tags":[],"owner":{"account_id":9321584,"reputation":1230,"user_id":6920169,"accept_rate":75,"display_name":"Loki"},"comment_count":1,"down_vote_count":1,"up_vote_count":55,"is_accepted":false,"score":54,"last_activity_date":1559901167,"creation_date":1559896718,"answer_id":56490819,"question_id":49654143,"body_markdown":"Add `.password(&quot;{noop}password&quot;)` to Security config file.\r\n\r\nFor example :\r\n   \r\n\r\n    auth.inMemoryAuthentication()\r\n\t        .withUser(&quot;admin&quot;).roles(&quot;ADMIN&quot;).password(&quot;{noop}password&quot;);","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>Add <code>.password(\"{noop}password\")</code> to Security config file.</p>\n\n<p>For example :</p>\n\n<pre><code>auth.inMemoryAuthentication()\n        .withUser(\"admin\").roles(\"ADMIN\").password(\"{noop}password\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1544964,"reputation":1153,"user_id":1438692,"accept_rate":83,"display_name":"Vikky"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1565800338,"creation_date":1565800338,"answer_id":57498712,"question_id":49654143,"body_markdown":"Whenever Spring stores the password, it puts a prefix of encoder in the encoded passwords like bcrypt, scrypt, pbkdf2 etc.  so that when it is time to decode the password, it can use appropriate encoder to decode. if there is no prefix in the encoded password it uses defaultPasswordEncoderForMatches. You can view DelegatingPasswordEncoder.class&#39;s matches method to see how it works. so basically we need to set defaultPasswordEncoderForMatches by the following lines. \r\n\r\n    @Bean(name=&quot;myPasswordEncoder&quot;)\r\n    public PasswordEncoder getPasswordEncoder() {\r\n    \t\tDelegatingPasswordEncoder delPasswordEncoder=  (DelegatingPasswordEncoder)PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n    \t\tBCryptPasswordEncoder bcryptPasswordEncoder =new BCryptPasswordEncoder();\r\n\t\tdelPasswordEncoder.setDefaultPasswordEncoderForMatches(bcryptPasswordEncoder);\r\n\t\treturn delPasswordEncoder;\t\t\r\n\t}\r\n\r\nNow, you might also have to provide this encoder with DefaultPasswordEncoderForMatches to your authentication provider also. I did that with below lines in my config classes.  \r\n\r\n    @Bean\r\n    \t@Autowired\t\r\n    \tpublic DaoAuthenticationProvider getDaoAuthenticationProvider(@Qualifier(&quot;myPasswordEncoder&quot;) PasswordEncoder passwordEncoder, UserDetailsService userDetailsServiceJDBC) {\r\n    \t\tDaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n    \t\tdaoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\r\n    \t\tdaoAuthenticationProvider.setUserDetailsService(userDetailsServiceJDBC);\r\n    \t\treturn daoAuthenticationProvider;\r\n    \t}","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>Whenever Spring stores the password, it puts a prefix of encoder in the encoded passwords like bcrypt, scrypt, pbkdf2 etc.  so that when it is time to decode the password, it can use appropriate encoder to decode. if there is no prefix in the encoded password it uses defaultPasswordEncoderForMatches. You can view DelegatingPasswordEncoder.class's matches method to see how it works. so basically we need to set defaultPasswordEncoderForMatches by the following lines. </p>\n\n<pre><code>@Bean(name=\"myPasswordEncoder\")\npublic PasswordEncoder getPasswordEncoder() {\n        DelegatingPasswordEncoder delPasswordEncoder=  (DelegatingPasswordEncoder)PasswordEncoderFactories.createDelegatingPasswordEncoder();\n        BCryptPasswordEncoder bcryptPasswordEncoder =new BCryptPasswordEncoder();\n    delPasswordEncoder.setDefaultPasswordEncoderForMatches(bcryptPasswordEncoder);\n    return delPasswordEncoder;      \n}\n</code></pre>\n\n<p>Now, you might also have to provide this encoder with DefaultPasswordEncoderForMatches to your authentication provider also. I did that with below lines in my config classes.  </p>\n\n<pre><code>@Bean\n    @Autowired  \n    public DaoAuthenticationProvider getDaoAuthenticationProvider(@Qualifier(\"myPasswordEncoder\") PasswordEncoder passwordEncoder, UserDetailsService userDetailsServiceJDBC) {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\n        daoAuthenticationProvider.setUserDetailsService(userDetailsServiceJDBC);\n        return daoAuthenticationProvider;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5656391,"reputation":83,"user_id":4475441,"display_name":"CrownWangGuan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1579573340,"creation_date":1579573340,"answer_id":59833387,"question_id":49654143,"body_markdown":"Don&#39;t know if this will help anyone. My working WebSecurityConfigurer and OAuth2Config code as below:\r\n\r\n**OAuth2Config File:**\r\n\r\n    package com.crown.AuthenticationServer.security;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;\r\n    import org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;\r\n    import org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer;\r\n\r\n    @Configuration\r\n    public class OAuth2Config extends AuthorizationServerConfigurerAdapter {\r\n\r\n        @Autowired\r\n        private AuthenticationManager authenticationManager;\r\n\r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n\r\n        @Override\r\n        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\r\n            clients.inMemory()\r\n                .withClient(&quot;crown&quot;)\r\n                .secret(&quot;{noop}thisissecret&quot;)\r\n                .authorizedGrantTypes(&quot;refresh_token&quot;, &quot;password&quot;, &quot;client_credentials&quot;)\r\n                .scopes(&quot;webclient&quot;, &quot;mobileclient&quot;);\r\n        }\r\n\r\n        @Override\r\n        public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\r\n            endpoints\r\n                .authenticationManager(authenticationManager)\r\n                .userDetailsService(userDetailsService);\r\n        }\r\n    }\r\n\r\n**WebSecurityConfigurer:**\r\n\r\n    package com.crown.AuthenticationServer.security;\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.userdetails.User;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.factory.PasswordEncoderFactories;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\n\r\n\r\n    @Configuration\r\n    public class WebSecurityConfigurer extends WebSecurityConfigurerAdapter {\r\n\r\n        @Override\r\n        @Bean\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n\r\n        @Bean\r\n        @Override\r\n        public UserDetailsService userDetailsService() {\r\n\r\n            PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n\r\n            final User.UserBuilder userBuilder = User.builder().passwordEncoder(encoder::encode);\r\n            UserDetails user = userBuilder\r\n                .username(&quot;john.carnell&quot;)\r\n                .password(&quot;password&quot;)\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n\r\n            UserDetails admin = userBuilder\r\n                .username(&quot;william.woodward&quot;)\r\n                .password(&quot;password&quot;)\r\n                .roles(&quot;USER&quot;,&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n            return new InMemoryUserDetailsManager(user, admin);\r\n        }\r\n\r\n    }\r\n\r\nHere is the link to the project:\r\n[springboot-authorization-server-oauth2][1]\r\n\r\n\r\n  [1]: https://github.com/crownwangguan/springboot-authorization-server-oauth2","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>Don't know if this will help anyone. My working WebSecurityConfigurer and OAuth2Config code as below:</p>\n\n<p><strong>OAuth2Config File:</strong></p>\n\n<pre><code>package com.crown.AuthenticationServer.security;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.oauth2.config.annotation.configurers.ClientDetailsServiceConfigurer;\nimport org.springframework.security.oauth2.config.annotation.web.configuration.AuthorizationServerConfigurerAdapter;\nimport org.springframework.security.oauth2.config.annotation.web.configurers.AuthorizationServerEndpointsConfigurer;\n\n@Configuration\npublic class OAuth2Config extends AuthorizationServerConfigurerAdapter {\n\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n        clients.inMemory()\n            .withClient(\"crown\")\n            .secret(\"{noop}thisissecret\")\n            .authorizedGrantTypes(\"refresh_token\", \"password\", \"client_credentials\")\n            .scopes(\"webclient\", \"mobileclient\");\n    }\n\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        endpoints\n            .authenticationManager(authenticationManager)\n            .userDetailsService(userDetailsService);\n    }\n}\n</code></pre>\n\n<p><strong>WebSecurityConfigurer:</strong></p>\n\n<pre><code>package com.crown.AuthenticationServer.security;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.factory.PasswordEncoderFactories;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\n\n\n@Configuration\npublic class WebSecurityConfigurer extends WebSecurityConfigurerAdapter {\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    @Override\n    public UserDetailsService userDetailsService() {\n\n        PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();\n\n        final User.UserBuilder userBuilder = User.builder().passwordEncoder(encoder::encode);\n        UserDetails user = userBuilder\n            .username(\"john.carnell\")\n            .password(\"password\")\n            .roles(\"USER\")\n            .build();\n\n        UserDetails admin = userBuilder\n            .username(\"william.woodward\")\n            .password(\"password\")\n            .roles(\"USER\",\"ADMIN\")\n            .build();\n\n        return new InMemoryUserDetailsManager(user, admin);\n    }\n\n}\n</code></pre>\n\n<p>Here is the link to the project:\n<a href=\"https://github.com/crownwangguan/springboot-authorization-server-oauth2\" rel=\"nofollow noreferrer\">springboot-authorization-server-oauth2</a></p>\n"},{"comments":[{"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"score":0,"creation_date":1588909530,"post_id":61648976,"comment_id":109087803,"body_markdown":"That issue is because we need to have encryption type in client secret as well. As of now password is already appending encryption type on encrypted password.","body":"That issue is because we need to have encryption type in client secret as well. As of now password is already appending encryption type on encrypted password."},{"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"score":0,"creation_date":1638820754,"post_id":61648976,"comment_id":124184964,"body_markdown":"Correct link to the [documentation](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/DelegatingPasswordEncoder.html).","body":"Correct link to the <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/password/DelegatingPasswordEncoder.html\" rel=\"nofollow noreferrer\">documentation</a>."}],"tags":[],"owner":{"account_id":1346927,"reputation":2441,"user_id":1287477,"accept_rate":52,"display_name":"Continuity8"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1588819409,"creation_date":1588819409,"answer_id":61648976,"question_id":49654143,"body_markdown":"You can read [in the official Spring Security Documentation][1] that for the `DelegatingPasswordEncoder` the general format for a password is: **{id}encodedPassword**\r\n\r\n&gt; Such that id is an identifier used to look up which PasswordEncoder should be used and encodedPassword is the original encoded password for the selected PasswordEncoder. The id must be at the beginning of the password, start with { and end with }. **If the id cannot be found, the id will be null**. For example, the following might be a list of passwords encoded using different id. All of the original passwords are &quot;password&quot;.\r\n\r\nId examples are:\r\n\r\n&gt; {**bcrypt**}$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG \r\n{noop}password \r\n{**pbkdf2**}5d923b44a6d129f3ddf3e3c8d29412723dcbde72445e8ef6bf3b508fbf17fa4ed4d6b99ca763d8dc \r\n{**scrypt**}$e0801$8bWJaSu2IKSn9Z9kM+TPXfOc/9bdYSrN1oD9qfVThWEwdRTnO7re7Ei+fUZRJ68k9lTyuTeUp4of4g24hHnazw==$OAOec05+bXxvuu/1qZ6NUR+xQYvYv7BeL1QxwRpY5Pc=  \r\n{**sha256**}97cde38028ad898ebc02e690819fa220e88c62e0699403e94fff291cfffaf8410849f27605abcbc0 \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/reference/html5/#authentication-password-storage-dpe","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>You can read <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#authentication-password-storage-dpe\" rel=\"nofollow noreferrer\">in the official Spring Security Documentation</a> that for the <code>DelegatingPasswordEncoder</code> the general format for a password is: <strong>{id}encodedPassword</strong></p>\n\n<blockquote>\n  <p>Such that id is an identifier used to look up which PasswordEncoder should be used and encodedPassword is the original encoded password for the selected PasswordEncoder. The id must be at the beginning of the password, start with { and end with }. <strong>If the id cannot be found, the id will be null</strong>. For example, the following might be a list of passwords encoded using different id. All of the original passwords are \"password\".</p>\n</blockquote>\n\n<p>Id examples are:</p>\n\n<blockquote>\n  <p>{<strong>bcrypt</strong>}$2a$10$dXJ3SW6G7P50lGmMkkmwe.20cQQubK3.HZWzG3YB1tlRy.fqvM/BG \n  {noop}password \n  {<strong>pbkdf2</strong>}5d923b44a6d129f3ddf3e3c8d29412723dcbde72445e8ef6bf3b508fbf17fa4ed4d6b99ca763d8dc \n  {<strong>scrypt</strong>}$e0801$8bWJaSu2IKSn9Z9kM+TPXfOc/9bdYSrN1oD9qfVThWEwdRTnO7re7Ei+fUZRJ68k9lTyuTeUp4of4g24hHnazw==$OAOec05+bXxvuu/1qZ6NUR+xQYvYv7BeL1QxwRpY5Pc=<br>\n  {<strong>sha256</strong>}97cde38028ad898ebc02e690819fa220e88c62e0699403e94fff291cfffaf8410849f27605abcbc0 </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11574148,"reputation":399,"user_id":8480036,"display_name":"Ashish Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1589643660,"creation_date":1589643660,"answer_id":61839357,"question_id":49654143,"body_markdown":"If you are fetching the username and password from the database,\r\nyou can use below code to add NoOpPassword instance.\r\n\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n\t   auth.userDetailsService(adm).passwordEncoder(NoOpPasswordEncoder.getInstance());\r\n\t}\r\n\r\nWhere **adm** is a custom user object for my project which has getPassword() and getUsername() methods.\r\n\r\n\r\n\r\nAlso remember, to make a custom User POJO, you&#39;ll have to implement UserDetails interface and implements all of it&#39;s methods.\r\n\r\nHope this helps.\r\n\r\n","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>If you are fetching the username and password from the database,\nyou can use below code to add NoOpPassword instance.</p>\n\n<pre><code>protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n   auth.userDetailsService(adm).passwordEncoder(NoOpPasswordEncoder.getInstance());\n}\n</code></pre>\n\n<p>Where <strong>adm</strong> is a custom user object for my project which has getPassword() and getUsername() methods.</p>\n\n<p>Also remember, to make a custom User POJO, you'll have to implement UserDetails interface and implements all of it's methods.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1638825683,"creation_date":1638825683,"answer_id":70252112,"question_id":49654143,"body_markdown":"The `java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null&quot;` error message arises when upgrading from Spring Security 4 to 5. Please refer to this [Baeldung article](https://www.baeldung.com/spring-security-5-default-password-encoder) as for the complete explanation and possible solutions.","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>The <code>java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null&quot;</code> error message arises when upgrading from Spring Security 4 to 5. Please refer to this <a href=\"https://www.baeldung.com/spring-security-5-default-password-encoder\" rel=\"noreferrer\">Baeldung article</a> as for the complete explanation and possible solutions.</p>\n"},{"tags":[],"owner":{"account_id":8405479,"reputation":8659,"user_id":7098524,"accept_rate":0,"display_name":"eli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648330504,"creation_date":1648330504,"answer_id":71631997,"question_id":49654143,"body_markdown":"Spring Boot [official documentation][1] has provided a solution for this\r\n \r\n&gt;The easiest way to resolve the error is to switch to explicitly providing the PasswordEncoder that your passwords are encoded with. The easiest way to resolve it is to figure out how your passwords are currently being stored and explicitly provide the correct PasswordEncoder.\r\n \r\n&gt; If you are migrating from Spring Security 4.2.x you can revert to the previous behavior by exposing a NoOpPasswordEncoder bean.\r\n\r\n&gt; Alternatively, you can prefix all of your passwords with the correct id and continue to use DelegatingPasswordEncoder. For example, if you are using BCrypt, you would migrate ... [more][1]\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe-troubleshoot","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>Spring Boot <a href=\"https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe-troubleshoot\" rel=\"nofollow noreferrer\">official documentation</a> has provided a solution for this</p>\n<blockquote>\n<p>The easiest way to resolve the error is to switch to explicitly providing the PasswordEncoder that your passwords are encoded with. The easiest way to resolve it is to figure out how your passwords are currently being stored and explicitly provide the correct PasswordEncoder.</p>\n</blockquote>\n<blockquote>\n<p>If you are migrating from Spring Security 4.2.x you can revert to the previous behavior by exposing a NoOpPasswordEncoder bean.</p>\n</blockquote>\n<blockquote>\n<p>Alternatively, you can prefix all of your passwords with the correct id and continue to use DelegatingPasswordEncoder. For example, if you are using BCrypt, you would migrate ... <a href=\"https://docs.spring.io/spring-security/reference/features/authentication/password-storage.html#authentication-password-storage-dpe-troubleshoot\" rel=\"nofollow noreferrer\">more</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":18275146,"reputation":31,"user_id":13305122,"display_name":"Tharindu Nilakshana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662060344,"creation_date":1662060344,"answer_id":73574532,"question_id":49654143,"body_markdown":"    @Configuration\r\n    @EnableWebSecurity\r\n    public class AppSecurityConfig extends WebSecurityConfigurerAdapter{\r\n    \r\n    \t@Autowired\r\n    \tprivate UserDetailsService userDetailsService;\r\n    \t\r\n    \t\r\n    \t@Bean\r\n    \tpublic AuthenticationProvider authProvider() {\r\n    \t\t\r\n    \t\tDaoAuthenticationProvider provider =  new DaoAuthenticationProvider();\r\n    \t\tprovider.setUserDetailsService(userDetailsService);\r\n    \t\tprovider.setPasswordEncoder(NoOpPasswordEncoder.getInstance());\r\n    \t\t\r\n    \t\treturn provider;\r\n    \t}\r\n    \r\n    }\r\n\r\n&gt; adding the below two annotation is fixed that issue &lt;br&gt;\r\n **@Configuration\r\n @EnableWebSecurity**","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<pre><code>@Configuration\n@EnableWebSecurity\npublic class AppSecurityConfig extends WebSecurityConfigurerAdapter{\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n    \n    \n    @Bean\n    public AuthenticationProvider authProvider() {\n        \n        DaoAuthenticationProvider provider =  new DaoAuthenticationProvider();\n        provider.setUserDetailsService(userDetailsService);\n        provider.setPasswordEncoder(NoOpPasswordEncoder.getInstance());\n        \n        return provider;\n    }\n\n}\n</code></pre>\n<blockquote>\n<p>adding the below two annotation is fixed that issue <br>\n<strong>@Configuration\n@EnableWebSecurity</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":17607784,"reputation":141,"user_id":12776496,"display_name":"Mukendi Emmanuel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667293910,"creation_date":1667293910,"answer_id":74273676,"question_id":49654143,"body_markdown":"juste add this bean to an annoted @configuration class.\r\n\r\n    @Configuration\r\n    public class BootConfiguration {\r\n    \r\n        @Bean\r\n        @Primary\r\n        public PasswordEncoder passwordEncoder() {\r\n            return PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n        }\r\n    \r\n    }\r\n    \r\n\r\nnext go to your WebSecurity configuration class and call the password bean add it to authentication provider dont forgot set in your auth manager bean the authentication provider bean and final set the authentication manager bean in the SecurityFilterChain use the example below\r\n\r\n        @EnableWebSecurity\r\n        @Configuration\r\n        public class DefaultSecurityConfig {\r\n        \r\n            @Autowire\r\n            private PasswordEncoder passwordEncoder\r\n            \r\n        \r\n            @Bean\r\n            public DaoAuthenticationProvider authenticationProvider() {\r\n                    DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n                    authenticationProvider.setUserDetailsService(userManager);\r\n                    authenticationProvider.setPasswordEncoder(passwordEncoder);\r\n                    return authenticationProvider;\r\n                }\r\n    \r\n           @Bean\r\n            public AuthenticationManager authManager(HttpSecurity http) throws Exception {\r\n                AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class); \r\n    authenticationManagerBuilder.authenticationProvider(authenticationProvider();\r\n\r\n            return authenticationManagerBuilder.build();\r\n        }\r\n\r\n\r\n     @Bean\r\n     SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests(authorize -&gt; authorize\r\n              \r\n                .anyRequest().authenticated());\r\n        http.authenticationManager(authManager(http));\r\n        http.exceptionHandling(exceptions-&gt;exceptions\r\n                .accessDeniedHandler(accessDeniedHandler));\r\n        http.formLogin(formLogin-&gt; formLogin.loginPage(&quot;/login&quot;)\r\n                .permitAll());\r\n        http.logout(logout-&gt; logout\r\n                .permitAll()\r\n        return http.build();\r\n    }\r\n\r\n\r\n    }\r\n\r\n    \r\n\r\n","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>juste add this bean to an annoted @configuration class.</p>\n<pre><code>@Configuration\npublic class BootConfiguration {\n\n    @Bean\n    @Primary\n    public PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p>next go to your WebSecurity configuration class and call the password bean add it to authentication provider dont forgot set in your auth manager bean the authentication provider bean and final set the authentication manager bean in the SecurityFilterChain use the example below</p>\n<pre><code>    @EnableWebSecurity\n    @Configuration\n    public class DefaultSecurityConfig {\n    \n        @Autowire\n        private PasswordEncoder passwordEncoder\n        \n    \n        @Bean\n        public DaoAuthenticationProvider authenticationProvider() {\n                DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n                authenticationProvider.setUserDetailsService(userManager);\n                authenticationProvider.setPasswordEncoder(passwordEncoder);\n                return authenticationProvider;\n            }\n\n       @Bean\n        public AuthenticationManager authManager(HttpSecurity http) throws Exception {\n            AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class); \nauthenticationManagerBuilder.authenticationProvider(authenticationProvider();\n\n        return authenticationManagerBuilder.build();\n    }\n\n\n @Bean\n SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests(authorize -&gt; authorize\n          \n            .anyRequest().authenticated());\n    http.authenticationManager(authManager(http));\n    http.exceptionHandling(exceptions-&gt;exceptions\n            .accessDeniedHandler(accessDeniedHandler));\n    http.formLogin(formLogin-&gt; formLogin.loginPage(&quot;/login&quot;)\n            .permitAll());\n    http.logout(logout-&gt; logout\n            .permitAll()\n    return http.build();\n}\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13678477,"reputation":299,"user_id":9869394,"display_name":"Dinushika Rathnayake"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683398220,"creation_date":1683398220,"answer_id":76190519,"question_id":49654143,"body_markdown":"For xml configuration.\r\n\r\n    &lt;authentication-manager&gt;\r\n        &lt;authentication-provider&gt;\r\n            &lt;user-service&gt;\r\n                &lt;user name=&quot;admin&quot; password=&quot;{noop}1234&quot; authorities=&quot;ROLE_ADMIN&quot;/&gt;\r\n            &lt;/user-service&gt;\r\n        &lt;/authentication-provider&gt;\r\n    &lt;/authentication-manager&gt;","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>For xml configuration.</p>\n<pre><code>&lt;authentication-manager&gt;\n    &lt;authentication-provider&gt;\n        &lt;user-service&gt;\n            &lt;user name=&quot;admin&quot; password=&quot;{noop}1234&quot; authorities=&quot;ROLE_ADMIN&quot;/&gt;\n        &lt;/user-service&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697288100,"creation_date":1697288100,"answer_id":77292873,"question_id":49654143,"body_markdown":"# Spring 6 + 5\r\n\r\nI solved this by adding the password in the database in this pattern: \r\n\r\n    {bcrypt}$2a$10$BzKO.vroidCVIrZMbQaiYeeVO73VKlT19.vooBF2TzzNEBjNmL8nW\r\n\r\nand I also added this `@Bean`\r\n\r\n       @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<h1>Spring 6 + 5</h1>\n<p>I solved this by adding the password in the database in this pattern:</p>\n<pre><code>{bcrypt}$2a$10$BzKO.vroidCVIrZMbQaiYeeVO73VKlT19.vooBF2TzzNEBjNmL8nW\n</code></pre>\n<p>and I also added this <code>@Bean</code></p>\n<pre><code>   @Bean\n    public PasswordEncoder passwordEncoder(){\n        return new BCryptPasswordEncoder();\n    }\n</code></pre>\n"}],"owner":{"account_id":4771027,"reputation":1749,"user_id":3855773,"accept_rate":22,"display_name":"Jimmy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167916,"favorite_count":0,"down_vote_count":0,"up_vote_count":117,"accepted_answer_id":49683417,"answer_count":13,"score":117,"last_activity_date":1697288100,"creation_date":1522853512,"question_id":49654143,"body_markdown":"I am migrating from Spring Boot 1.4.9 to Spring Boot 2.0 and also to Spring Security 5 and I am trying to do authenticate via OAuth 2. But I am getting this error: \r\n\r\n&gt; java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null \r\n\r\nFrom the documentation of [Spring Security 5][1], I get to know that\r\nstorage format for password is changed.\r\n\r\nIn my current code I have created my password encoder bean as:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public BCryptPasswordEncoder passwordEncoder() {\r\n    \treturn new BCryptPasswordEncoder();\r\n    }\r\n\r\nHowever it was giving me below error: \r\n\r\n&gt; **Encoded password does not look like BCrypt**\r\n\r\n\r\nSo I update the encoder as per the [Spring Security 5][1] document to:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n     \treturn PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n    }\r\n\r\nNow if I can see password in database it is storing as \r\n\r\n    {bcrypt}$2a$10$LoV/3z36G86x6Gn101aekuz3q9d7yfBp3jFn7dzNN/AL5630FyUQ\r\n\r\nWith that 1st error gone and now when I am trying to do authentication I am getting below error:\r\n\r\n&gt; java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id &quot;null\r\n\r\nTo solve this issue I tried all the below questions from Stackoverflow:\r\n\r\n- https://stackoverflow.com/questions/46999940/spring-boot-passwordencoder-error?noredirect=1&amp;lq=1\r\n\r\n- https://stackoverflow.com/questions/26013251/spring-oauth2-password-encoder-is-not-set-in-daoauthenticationprovider \r\n\r\nHere is a question similar to mine but not answerd:\r\n\r\n- https://stackoverflow.com/questions/49236707/spring-security-5-password-migration\r\n\r\n  [1]: https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding\r\n\r\nNOTE: I am already storing encrypted password in database so no need to encode again in `UserDetailsService`.\r\n\r\nIn the [Spring security 5][1] documentation they suggested you can handle this exception using:\r\n\r\n&gt;  \r\n   DelegatingPasswordEncoder.setDefaultPasswordEncoderForMatches(PasswordEncoder)\r\n\r\nIf this is the fix then where should I put it? I have tried to put it in `PasswordEncoder` bean like below but it wasn&#39;t working: \r\n\r\n&lt;!--language: java --&gt;\r\n\r\n    DelegatingPasswordEncoder def = new DelegatingPasswordEncoder(idForEncode, encoders);\r\n\tdef.setDefaultPasswordEncoderForMatches(passwordEncoder);\r\n\r\n\r\n**MyWebSecurity class**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n        \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n        \treturn PasswordEncoderFactories.createDelegatingPasswordEncoder();\r\n        }\r\n    \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Override\r\n        public void configure(WebSecurity web) throws Exception {\r\n    \r\n            web\r\n                    .ignoring()\r\n                    .antMatchers(HttpMethod.OPTIONS)\r\n                    .antMatchers(&quot;/api/user/add&quot;);\r\n        }\r\n    \r\n        @Override\r\n        @Bean\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    }\r\n\r\n**MyOauth2 Configuration**\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    @Configuration\r\n    @EnableAuthorizationServer\r\n    protected static class AuthorizationServerConfiguration extends AuthorizationServerConfigurerAdapter {\r\n    \r\n        @Bean\r\n        public TokenStore tokenStore() {\r\n            return new InMemoryTokenStore();\r\n        }\r\n    \r\n        @Autowired\r\n        @Qualifier(&quot;authenticationManagerBean&quot;)\r\n        private AuthenticationManager authenticationManager;\r\n    \r\n        \r\n        @Bean\r\n        public TokenEnhancer tokenEnhancer() {\r\n            return new CustomTokenEnhancer();\r\n        }\r\n        \r\n        @Bean\r\n        public DefaultAccessTokenConverter accessTokenConverter() {\r\n            return new DefaultAccessTokenConverter();\r\n        }\r\n        \r\n        @Override\r\n        public void configure(AuthorizationServerEndpointsConfigurer endpoints)\r\n                throws Exception {\r\n            endpoints\r\n                    .tokenStore(tokenStore())\r\n                    .tokenEnhancer(tokenEnhancer())\r\n                    .accessTokenConverter(accessTokenConverter())\r\n                    .authenticationManager(authenticationManager);\r\n        }\r\n        \r\n        @Override\r\n        public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\r\n            clients\r\n                    .inMemory()\r\n                    .withClient(&quot;test&quot;)\r\n                    .scopes(&quot;read&quot;, &quot;write&quot;)\r\n                    .authorities(Roles.ADMIN.name(), Roles.USER.name())\r\n                    .authorizedGrantTypes(&quot;password&quot;, &quot;refresh_token&quot;)\r\n                    .secret(&quot;secret&quot;)\r\n                    .accessTokenValiditySeconds(1800);\r\n        }\r\n    }\r\n\r\nPlease guide me with this issue. I have spend hours to fix this but not able to fix.\r\n","title":"Spring Security 5 : There is no PasswordEncoder mapped for the id &quot;null&quot;","body":"<p>I am migrating from Spring Boot 1.4.9 to Spring Boot 2.0 and also to Spring Security 5 and I am trying to do authenticate via OAuth 2. But I am getting this error: </p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id \"null </p>\n</blockquote>\n\n<p>From the documentation of <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding\" rel=\"noreferrer\">Spring Security 5</a>, I get to know that\nstorage format for password is changed.</p>\n\n<p>In my current code I have created my password encoder bean as:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic BCryptPasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n\n<p>However it was giving me below error: </p>\n\n<blockquote>\n  <p><strong>Encoded password does not look like BCrypt</strong></p>\n</blockquote>\n\n<p>So I update the encoder as per the <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding\" rel=\"noreferrer\">Spring Security 5</a> document to:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic PasswordEncoder passwordEncoder() {\n    return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n}\n</code></pre>\n\n<p>Now if I can see password in database it is storing as </p>\n\n<pre><code>{bcrypt}$2a$10$LoV/3z36G86x6Gn101aekuz3q9d7yfBp3jFn7dzNN/AL5630FyUQ\n</code></pre>\n\n<p>With that 1st error gone and now when I am trying to do authentication I am getting below error:</p>\n\n<blockquote>\n  <p>java.lang.IllegalArgumentException: There is no PasswordEncoder mapped for the id \"null</p>\n</blockquote>\n\n<p>To solve this issue I tried all the below questions from Stackoverflow:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/46999940/spring-boot-passwordencoder-error?noredirect=1&amp;lq=1\">Spring Boot PasswordEncoder Error</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/26013251/spring-oauth2-password-encoder-is-not-set-in-daoauthenticationprovider\">Spring Oauth2. Password encoder is not set in DaoAuthenticationProvider</a> </p></li>\n</ul>\n\n<p>Here is a question similar to mine but not answerd:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/49236707/spring-security-5-password-migration\">Spring Security 5 - Password Migration</a></li>\n</ul>\n\n<p>NOTE: I am already storing encrypted password in database so no need to encode again in <code>UserDetailsService</code>.</p>\n\n<p>In the <a href=\"https://spring.io/blog/2017/11/01/spring-security-5-0-0-rc1-released#password-encoding\" rel=\"noreferrer\">Spring security 5</a> documentation they suggested you can handle this exception using:</p>\n\n<blockquote>\n  <p>DelegatingPasswordEncoder.setDefaultPasswordEncoderForMatches(PasswordEncoder)</p>\n</blockquote>\n\n<p>If this is the fix then where should I put it? I have tried to put it in <code>PasswordEncoder</code> bean like below but it wasn't working: </p>\n\n\n\n<pre><code>DelegatingPasswordEncoder def = new DelegatingPasswordEncoder(idForEncode, encoders);\ndef.setDefaultPasswordEncoderForMatches(passwordEncoder);\n</code></pre>\n\n<p><strong>MyWebSecurity class</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return PasswordEncoderFactories.createDelegatingPasswordEncoder();\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n\n        web\n                .ignoring()\n                .antMatchers(HttpMethod.OPTIONS)\n                .antMatchers(\"/api/user/add\");\n    }\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n</code></pre>\n\n<p><strong>MyOauth2 Configuration</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableAuthorizationServer\nprotected static class AuthorizationServerConfiguration extends AuthorizationServerConfigurerAdapter {\n\n    @Bean\n    public TokenStore tokenStore() {\n        return new InMemoryTokenStore();\n    }\n\n    @Autowired\n    @Qualifier(\"authenticationManagerBean\")\n    private AuthenticationManager authenticationManager;\n\n\n    @Bean\n    public TokenEnhancer tokenEnhancer() {\n        return new CustomTokenEnhancer();\n    }\n\n    @Bean\n    public DefaultAccessTokenConverter accessTokenConverter() {\n        return new DefaultAccessTokenConverter();\n    }\n\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints)\n            throws Exception {\n        endpoints\n                .tokenStore(tokenStore())\n                .tokenEnhancer(tokenEnhancer())\n                .accessTokenConverter(accessTokenConverter())\n                .authenticationManager(authenticationManager);\n    }\n\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n        clients\n                .inMemory()\n                .withClient(\"test\")\n                .scopes(\"read\", \"write\")\n                .authorities(Roles.ADMIN.name(), Roles.USER.name())\n                .authorizedGrantTypes(\"password\", \"refresh_token\")\n                .secret(\"secret\")\n                .accessTokenValiditySeconds(1800);\n    }\n}\n</code></pre>\n\n<p>Please guide me with this issue. I have spend hours to fix this but not able to fix.</p>\n"},{"tags":["java","database","postgresql","localhost","cloudflare"],"answers":[{"comments":[{"owner":{"account_id":29414317,"reputation":11,"user_id":22537498,"display_name":"Sinio"},"score":0,"creation_date":1697312732,"post_id":77292829,"comment_id":136265169,"body_markdown":"Hi thanks so much and you said &quot; I am not going to discuss how good is the idea of exposing the db to the internet....&quot;\nHow is it normaly done?\nlike how do apps do that?","body":"Hi thanks so much and you said &quot; I am not going to discuss how good is the idea of exposing the db to the internet....&quot; How is it normaly done? like how do apps do that?"}],"tags":[],"owner":{"account_id":16726010,"reputation":304,"user_id":12089615,"display_name":"lu4t"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697286931,"creation_date":1697286931,"answer_id":77292829,"question_id":77282753,"body_markdown":"You need to go through Access first, then you will be able to start a connection to your db. I am not going to discuss how good is the idea of exposing the db to the internet....\r\n\r\nWhen the CF daemon is started on the client side, you need to establish the tunnel:\r\n\r\n    cloudflared access tcp --hostname dbserver.urhost.com --url localhost:5432\r\n\r\n\r\n\r\nThis link should help: https://developers.cloudflare.com/cloudflare-one/applications/non-http/arbitrary-tcp/","title":"Cloudflare tunneling with Postgres","body":"<p>You need to go through Access first, then you will be able to start a connection to your db. I am not going to discuss how good is the idea of exposing the db to the internet....</p>\n<p>When the CF daemon is started on the client side, you need to establish the tunnel:</p>\n<pre><code>cloudflared access tcp --hostname dbserver.urhost.com --url localhost:5432\n</code></pre>\n<p>This link should help: <a href=\"https://developers.cloudflare.com/cloudflare-one/applications/non-http/arbitrary-tcp/\" rel=\"nofollow noreferrer\">https://developers.cloudflare.com/cloudflare-one/applications/non-http/arbitrary-tcp/</a></p>\n"}],"owner":{"account_id":29414317,"reputation":11,"user_id":22537498,"display_name":"Sinio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697286931,"creation_date":1697132274,"question_id":77282753,"body_markdown":"So i am working on mobile app using Java\r\nIt has to use Database (Postgres).\r\nI am using cloudflare to host everything ( The server of the database on the TCP and also the PGadmin4)\r\nThe Pgadmin works good but here comes the problem:\r\nI cannot use the server because when i host it then it will use the https protocol as url\r\nwhich is a problem because in order to use it in java or anything else it has to be in the form of:\r\njdbc:postgresql://dbserver.urhost.com:80/postgres\r\nand mine looks like this :\r\nhttps://dbserver.urhost.com.\r\n\r\nhere is an example of the tunneling iam use:\r\n[![enter image description here](https://i.stack.imgur.com/OzzGh.png)](https://i.stack.imgur.com/OzzGh.png)\r\nboth of them are running on a docker.\r\nAm i missunderstanding something ?\r\nand how can i do all of that?\r\n\r\n\r\nI tried everything i saw and nothing worked for me sadly","title":"Cloudflare tunneling with Postgres","body":"<p>So i am working on mobile app using Java\nIt has to use Database (Postgres).\nI am using cloudflare to host everything ( The server of the database on the TCP and also the PGadmin4)\nThe Pgadmin works good but here comes the problem:\nI cannot use the server because when i host it then it will use the https protocol as url\nwhich is a problem because in order to use it in java or anything else it has to be in the form of:\njdbc:postgresql://dbserver.urhost.com:80/postgres\nand mine looks like this :\n<a href=\"https://dbserver.urhost.com\" rel=\"nofollow noreferrer\">https://dbserver.urhost.com</a>.</p>\n<p>here is an example of the tunneling iam use:\n<a href=\"https://i.stack.imgur.com/OzzGh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OzzGh.png\" alt=\"enter image description here\" /></a>\nboth of them are running on a docker.\nAm i missunderstanding something ?\nand how can i do all of that?</p>\n<p>I tried everything i saw and nothing worked for me sadly</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697285818,"post_id":77292742,"comment_id":136262336,"body_markdown":"The exception comes with a stacktrace, that stacktrace shows all the method calls leading up to the exception. You use the stacktrace to find where in your code the error originates. Possibly you&#39;re passing a wrong (or a `null`) value and this then triggers an exception deeper in some library. Or possibly you&#39;re running into a bug in a library you use.","body":"The exception comes with a stacktrace, that stacktrace shows all the method calls leading up to the exception. You use the stacktrace to find where in your code the error originates. Possibly you&#39;re passing a wrong (or a <code>null</code>) value and this then triggers an exception deeper in some library. Or possibly you&#39;re running into a bug in a library you use."}],"owner":{"account_id":29670443,"reputation":1,"user_id":22739821,"display_name":"Lomilka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697285716,"answer_count":0,"score":0,"last_activity_date":1697285781,"creation_date":1697285034,"question_id":77292742,"body_markdown":"I am new to programming. I have an Android application - a video player (contains a lot of activity, so showing everything here is not an option). The question is: What does this error mean?\r\n\r\nI don&#39;t remember writing such a method (I did it using a video tutorial). But if I did write it, how do I find it among the heap of activity?\r\n\r\nI find it by searching, but this method is not used in the code I created, but in some system ones. The neural network says that I need to find a failure by setting a point in front of the place where this method is called. But the bottom line is that I have no idea where this call is happening! Help please.\r\n\r\nI tried to drive in the search (Ctrl+R), but nothing was found there. Another search found some code built into android studio, but it isn&#39;t in my code (the error is in my code, right? I&#39;m not even sure about that). I also tried to reboot everything that is possible. I didn&#39;t find the answer on the Internet.","title":"how to find out exactly where the error occurred (in what place) Cannot invoke &quot;org.w3c.dom.Node.getLocalName()&quot; because &quot;need&quot; is null","body":"<p>I am new to programming. I have an Android application - a video player (contains a lot of activity, so showing everything here is not an option). The question is: What does this error mean?</p>\n<p>I don't remember writing such a method (I did it using a video tutorial). But if I did write it, how do I find it among the heap of activity?</p>\n<p>I find it by searching, but this method is not used in the code I created, but in some system ones. The neural network says that I need to find a failure by setting a point in front of the place where this method is called. But the bottom line is that I have no idea where this call is happening! Help please.</p>\n<p>I tried to drive in the search (Ctrl+R), but nothing was found there. Another search found some code built into android studio, but it isn't in my code (the error is in my code, right? I'm not even sure about that). I also tried to reboot everything that is possible. I didn't find the answer on the Internet.</p>\n"},{"tags":["java","spring","spring-boot","remoteapi"],"owner":{"account_id":17650585,"reputation":1,"user_id":12811121,"display_name":"Vishal Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697284729,"creation_date":1697283959,"question_id":77292688,"body_markdown":"The issue I am facing that my data is successfully converted in JSON format but I am getting 500 invalid command \r\n\r\nI Have used Sout to show the console output for debugging\r\n\r\n&gt; Customer{first_name=&#39;jhon&#39;, last_name=&#39;smit&#39;, street=&#39;New Street&#39;, address=&#39;Wellington&#39;, city=&#39;NY&#39;, state=&#39;NY&#39;, email=&#39;jhonsmit@gmail.com&#39;, phone=&#39;2100989877&#39;}  \r\n&gt; [Authorization:&quot;Bearer dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM=&quot;, Content-Type:&quot;application/json&quot;]  \r\n&gt;{&quot;first_name&quot;:&quot;jhon&quot;,&quot;last_name&quot;:&quot;smit&quot;,&quot;street&quot;:&quot;New Street&quot;,&quot;address&quot;:&quot;Wellington&quot;,&quot;city&quot;:&quot;NY&quot;,&quot;state&quot;:&quot;NY&quot;,&quot;email&quot;:&quot;jhonsmit@gmail.com&quot;,&quot;phone&quot;:&quot;2100989877&quot;}  \r\n&gt;org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 500: &quot;&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;&lt;EOL&gt;Invalid Command&lt;EOL&gt;&quot;\r\n\t\r\n\r\n    @Service\r\n    public class CustomerCreatingService {\r\n        @Value(&quot;${auth.token}&quot;)\r\n        private String authToken;\r\n    \r\n        private final RestTemplate restTemplate;\r\n    \r\n        public CustomerCreatingService(RestTemplate restTemplate) {\r\n            this.restTemplate = restTemplate;\r\n        }\r\n    \r\n        public String createCustomer(String first_name, String last_name, String street, String address,\r\n                                     String city, String state, String email, String phone) {\r\n            // Construct the URL for API call\r\n            String url = &quot;https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp&quot;;\r\n    \r\n            // Set up headers\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.set(&quot;Authorization&quot;, &quot;Bearer &quot; + authToken);\r\n            headers.setContentType(MediaType.APPLICATION_JSON);\r\n            System.out.println(headers);\r\n    \r\n            // Body\r\n            Customer customer = new Customer(first_name, last_name, street, address, city, state, email, phone);\r\n            ObjectMapper mapper = new ObjectMapper();\r\n            String customerJson = &quot;&quot;;\r\n            try {\r\n                customerJson = mapper.writeValueAsString(customer);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return &quot;Error serializing customer: &quot; + e.getMessage();\r\n            }\r\n            HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(customerJson, headers);\r\n            System.out.println(entity.getBody());\r\n    \r\n            // Make the API call\r\n    \r\n    \r\n    \r\n            try {\r\n                ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.POST, entity, String.class);\r\n                System.out.println(response);\r\n                return &quot;Successfully Created&quot;;\r\n            } catch (Exception e) {\r\n                if (e instanceof HttpClientErrorException) {\r\n                    String responseBody = ((HttpClientErrorException) e).getResponseBodyAsString();\r\n                    System.out.println(&quot;API Response: &quot; + responseBody);\r\n                }\r\n                e.printStackTrace();\r\n                return &quot;Error: &quot; + e.getMessage();\r\n            }\r\n        }\r\n    }\r\n\r\n&gt;CustomerController class\r\n\r\n        package com.example.demo.controller;\r\n    \r\n    import com.example.demo.entity.Customer;\r\n    import com.example.demo.service.AuthService;\r\n    import com.example.demo.service.CustomerCreatingService;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.*;\r\n    import org.springframework.web.servlet.mvc.support.RedirectAttributes;\r\n    \r\n    @Controller\r\n    public class CustomerController {\r\n    \r\n        private final CustomerCreatingService customerCreatingService;\r\n    \r\n        @Autowired\r\n        public CustomerController(CustomerCreatingService customerCreatingService) {\r\n            this.customerCreatingService = customerCreatingService;\r\n        }\r\n    \r\n        @GetMapping(&quot;customer/create&quot;)\r\n        public String showCreateCustomerForm() {\r\n            return &quot;createCustomer&quot;;  // This should map to the HTML page for creating a customer\r\n        }\r\n    \r\n        @PostMapping(&quot;/create&quot;)\r\n        @ResponseBody\r\n        public String createCustomer(@ModelAttribute Customer customer) {\r\n            System.out.println(customer);\r\n            return customerCreatingService.createCustomer(customer.getFirst_name(),\r\n                    customer.getLast_name(),\r\n                    customer.getStreet(),\r\n                    customer.getAddress(),\r\n                    customer.getCity(),\r\n                    customer.getState(),\r\n                    customer.getEmail(),\r\n                    customer.getPhone());\r\n        }\r\n    }\r\n\r\n&gt;Customer class\r\n\r\n        package com.example.demo.entity;\r\n    \r\n    public class Customer {\r\n        private String first_name;\r\n        private String last_name;\r\n        private String street;\r\n        private String address;\r\n        private String city;\r\n        private String state;\r\n        private String email;\r\n        private String phone;\r\n    \r\n        // Constructor\r\n        public Customer() {\r\n        }\r\n    \r\n        public Customer(String first_name, String last_name, String street, String address,\r\n                        String city, String state, String email, String phone) {\r\n            this.first_name = first_name;\r\n            this.last_name = last_name;\r\n            this.street = street;\r\n            this.address = address;\r\n            this.city = city;\r\n            this.state = state;\r\n            this.email = email;\r\n            this.phone = phone;\r\n        }\r\n    \r\n        // Getters and setters\r\n        public String getFirst_name() {\r\n            return first_name;\r\n        }\r\n    \r\n        public void setFirst_name(String first_name) {\r\n            this.first_name = first_name;\r\n        }\r\n    \r\n        public String getLast_name() {\r\n            return last_name;\r\n        }\r\n    \r\n        public void setLast_name(String last_name) {\r\n            this.last_name = last_name;\r\n        }\r\n    \r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n    \r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n    \r\n        public String getAddress() {\r\n            return address;\r\n        }\r\n    \r\n        public void setAddress(String address) {\r\n            this.address = address;\r\n        }\r\n    \r\n        public String getCity() {\r\n            return city;\r\n        }\r\n    \r\n        public void setCity(String city) {\r\n            this.city = city;\r\n        }\r\n    \r\n        public String getState() {\r\n            return state;\r\n        }\r\n    \r\n        public void setState(String state) {\r\n            this.state = state;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        public String getPhone() {\r\n            return phone;\r\n        }\r\n    \r\n        public void setPhone(String phone) {\r\n            this.phone = phone;\r\n        }\r\n    \r\n        // Optionally, you can also override `toString()` method for debugging purposes\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Customer{&quot; +\r\n                    &quot;first_name=&#39;&quot; + first_name + &#39;\\&#39;&#39; +\r\n                    &quot;, last_name=&#39;&quot; + last_name + &#39;\\&#39;&#39; +\r\n                    &quot;, street=&#39;&quot; + street + &#39;\\&#39;&#39; +\r\n                    &quot;, address=&#39;&quot; + address + &#39;\\&#39;&#39; +\r\n                    &quot;, city=&#39;&quot; + city + &#39;\\&#39;&#39; +\r\n                    &quot;, state=&#39;&quot; + state + &#39;\\&#39;&#39; +\r\n                    &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                    &quot;, phone=&#39;&quot; + phone + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n&gt;Customer Html file\r\n\r\n   \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n     &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n      &lt;title&gt;Create Customer&lt;/title&gt;\r\n      &lt;link rel=&quot;stylesheet&quot; href=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;div class=&quot;container mt-5&quot;&gt;\r\n      &lt;h2&gt;Create Customer&lt;/h2&gt;\r\n      &lt;form action=&quot;/create&quot; method=&quot;post&quot;&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;first_name&quot;&gt;First Name*&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;first_name&quot; name=&quot;first_name&quot; required&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;last_name&quot;&gt;Last Name*&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;last_name&quot; name=&quot;last_name&quot; required&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;street&quot;&gt;Street&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;street&quot; name=&quot;street&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;address&quot;&gt;Address&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;address&quot; name=&quot;address&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;city&quot;&gt;City&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;city&quot; name=&quot;city&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;state&quot;&gt;State&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;state&quot; name=&quot;state&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;email&quot;&gt;Email&lt;/label&gt;\r\n          &lt;input type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;email&quot; name=&quot;email&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;form-group&quot;&gt;\r\n          &lt;label for=&quot;phone&quot;&gt;Phone&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;phone&quot; name=&quot;phone&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;\r\n      &lt;/form&gt;\r\n    &lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n  \r\n\r\n ","title":"External API POST Request &lt;EOL&gt; invalid command is showing | After form submit from front-end | Springboot","body":"<p>The issue I am facing that my data is successfully converted in JSON format but I am getting 500 invalid command</p>\n<p>I Have used Sout to show the console output for debugging</p>\n<blockquote>\n<p>Customer{first_name='jhon', last_name='smit', street='New Street', address='Wellington', city='NY', state='NY', email='jhonsmit@gmail.com', phone='2100989877'}<br />\n[Authorization:&quot;Bearer dGVzdEBzdW5iYXNlZGF0YS5jb206VGVzdEAxMjM=&quot;, Content-Type:&quot;application/json&quot;]<br />\n{&quot;first_name&quot;:&quot;jhon&quot;,&quot;last_name&quot;:&quot;smit&quot;,&quot;street&quot;:&quot;New Street&quot;,&quot;address&quot;:&quot;Wellington&quot;,&quot;city&quot;:&quot;NY&quot;,&quot;state&quot;:&quot;NY&quot;,&quot;email&quot;:&quot;jhonsmit@gmail.com&quot;,&quot;phone&quot;:&quot;2100989877&quot;}<br />\norg.springframework.web.client.HttpServerErrorException$InternalServerError: 500 500: &quot;&gt;Invalid Command&quot;</p>\n</blockquote>\n<pre><code>@Service\npublic class CustomerCreatingService {\n    @Value(&quot;${auth.token}&quot;)\n    private String authToken;\n\n    private final RestTemplate restTemplate;\n\n    public CustomerCreatingService(RestTemplate restTemplate) {\n        this.restTemplate = restTemplate;\n    }\n\n    public String createCustomer(String first_name, String last_name, String street, String address,\n                                 String city, String state, String email, String phone) {\n        // Construct the URL for API call\n        String url = &quot;https://qa2.sunbasedata.com/sunbase/portal/api/assignment.jsp&quot;;\n\n        // Set up headers\n        HttpHeaders headers = new HttpHeaders();\n        headers.set(&quot;Authorization&quot;, &quot;Bearer &quot; + authToken);\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        System.out.println(headers);\n\n        // Body\n        Customer customer = new Customer(first_name, last_name, street, address, city, state, email, phone);\n        ObjectMapper mapper = new ObjectMapper();\n        String customerJson = &quot;&quot;;\n        try {\n            customerJson = mapper.writeValueAsString(customer);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return &quot;Error serializing customer: &quot; + e.getMessage();\n        }\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(customerJson, headers);\n        System.out.println(entity.getBody());\n\n        // Make the API call\n\n\n\n        try {\n            ResponseEntity&lt;String&gt; response = restTemplate.exchange(url, HttpMethod.POST, entity, String.class);\n            System.out.println(response);\n            return &quot;Successfully Created&quot;;\n        } catch (Exception e) {\n            if (e instanceof HttpClientErrorException) {\n                String responseBody = ((HttpClientErrorException) e).getResponseBodyAsString();\n                System.out.println(&quot;API Response: &quot; + responseBody);\n            }\n            e.printStackTrace();\n            return &quot;Error: &quot; + e.getMessage();\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p>CustomerController class</p>\n</blockquote>\n<pre><code>    package com.example.demo.controller;\n\nimport com.example.demo.entity.Customer;\nimport com.example.demo.service.AuthService;\nimport com.example.demo.service.CustomerCreatingService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.servlet.mvc.support.RedirectAttributes;\n\n@Controller\npublic class CustomerController {\n\n    private final CustomerCreatingService customerCreatingService;\n\n    @Autowired\n    public CustomerController(CustomerCreatingService customerCreatingService) {\n        this.customerCreatingService = customerCreatingService;\n    }\n\n    @GetMapping(&quot;customer/create&quot;)\n    public String showCreateCustomerForm() {\n        return &quot;createCustomer&quot;;  // This should map to the HTML page for creating a customer\n    }\n\n    @PostMapping(&quot;/create&quot;)\n    @ResponseBody\n    public String createCustomer(@ModelAttribute Customer customer) {\n        System.out.println(customer);\n        return customerCreatingService.createCustomer(customer.getFirst_name(),\n                customer.getLast_name(),\n                customer.getStreet(),\n                customer.getAddress(),\n                customer.getCity(),\n                customer.getState(),\n                customer.getEmail(),\n                customer.getPhone());\n    }\n}\n</code></pre>\n<blockquote>\n<p>Customer class</p>\n</blockquote>\n<pre><code>    package com.example.demo.entity;\n\npublic class Customer {\n    private String first_name;\n    private String last_name;\n    private String street;\n    private String address;\n    private String city;\n    private String state;\n    private String email;\n    private String phone;\n\n    // Constructor\n    public Customer() {\n    }\n\n    public Customer(String first_name, String last_name, String street, String address,\n                    String city, String state, String email, String phone) {\n        this.first_name = first_name;\n        this.last_name = last_name;\n        this.street = street;\n        this.address = address;\n        this.city = city;\n        this.state = state;\n        this.email = email;\n        this.phone = phone;\n    }\n\n    // Getters and setters\n    public String getFirst_name() {\n        return first_name;\n    }\n\n    public void setFirst_name(String first_name) {\n        this.first_name = first_name;\n    }\n\n    public String getLast_name() {\n        return last_name;\n    }\n\n    public void setLast_name(String last_name) {\n        this.last_name = last_name;\n    }\n\n    public String getStreet() {\n        return street;\n    }\n\n    public void setStreet(String street) {\n        this.street = street;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n\n    public String getCity() {\n        return city;\n    }\n\n    public void setCity(String city) {\n        this.city = city;\n    }\n\n    public String getState() {\n        return state;\n    }\n\n    public void setState(String state) {\n        this.state = state;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPhone() {\n        return phone;\n    }\n\n    public void setPhone(String phone) {\n        this.phone = phone;\n    }\n\n    // Optionally, you can also override `toString()` method for debugging purposes\n    @Override\n    public String toString() {\n        return &quot;Customer{&quot; +\n                &quot;first_name='&quot; + first_name + '\\'' +\n                &quot;, last_name='&quot; + last_name + '\\'' +\n                &quot;, street='&quot; + street + '\\'' +\n                &quot;, address='&quot; + address + '\\'' +\n                &quot;, city='&quot; + city + '\\'' +\n                &quot;, state='&quot; + state + '\\'' +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, phone='&quot; + phone + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<blockquote>\n<p>Customer Html file</p>\n</blockquote>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Create Customer&lt;/title&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"container mt-5\"&gt;\n  &lt;h2&gt;Create Customer&lt;/h2&gt;\n  &lt;form action=\"/create\" method=\"post\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"first_name\"&gt;First Name*&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"first_name\" name=\"first_name\" required&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"last_name\"&gt;Last Name*&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"last_name\" name=\"last_name\" required&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"street\"&gt;Street&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"street\" name=\"street\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"address\"&gt;Address&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"address\" name=\"address\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"city\"&gt;City&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"city\" name=\"city\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"state\"&gt;State&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"state\" name=\"state\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"email\"&gt;Email&lt;/label&gt;\n      &lt;input type=\"email\" class=\"form-control\" id=\"email\" name=\"email\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label for=\"phone\"&gt;Phone&lt;/label&gt;\n      &lt;input type=\"text\" class=\"form-control\" id=\"phone\" name=\"phone\"&gt;\n    &lt;/div&gt;\n    &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","maven","java-platform-module-system","dnsjava"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697232622,"post_id":77290528,"comment_id":136259098,"body_markdown":"Your title is back to front.","body":"Your title is back to front."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697256643,"post_id":77290528,"comment_id":136260468,"body_markdown":"@user207421 I do not think so. I tried many other dependencies that works great to build the JPMS module, only DNSJava break the build of the JPMS module. So DNSJava is the stranger here, not JPMS.","body":"@user207421 I do not think so. I tried many other dependencies that works great to build the JPMS module, only DNSJava break the build of the JPMS module. So DNSJava is the stranger here, not JPMS."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697283304,"post_id":77290528,"comment_id":136262137,"body_markdown":"Your title says that JPMS is invalidated. That’s wrong by definition. A specification can’t be invalid. What you mean is that JPMS invalidates DNSJava.","body":"Your title says that JPMS is invalidated. That’s wrong by definition. A specification can’t be invalid. What you mean is that JPMS invalidates DNSJava."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697283668,"post_id":77290528,"comment_id":136262166,"body_markdown":"@user207421 That is totally correct. Would you mind be so kind to suggest a better title? Would you agree if I say `... invalidates JPMS compabtibility`?","body":"@user207421 That is totally correct. Would you mind be so kind to suggest a better title? Would you agree if I say <code>... invalidates JPMS compabtibility</code>?"}],"answers":[{"comments":[{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697282410,"post_id":77292527,"comment_id":136262063,"body_markdown":"I think I already used the latest version of DNSJava. Ill try 3.5.2","body":"I think I already used the latest version of DNSJava. Ill try 3.5.2"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1697282524,"post_id":77292527,"comment_id":136262074,"body_markdown":"@Grim Your question shows you&#39;re using 2.1.8. And the important detail when using 3.5.2 is to use the right module name: `org.dnsjava`.","body":"@Grim Your question shows you&#39;re using 2.1.8. And the important detail when using 3.5.2 is to use the right module name: <code>org.dnsjava</code>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1697282602,"post_id":77292527,"comment_id":136262078,"body_markdown":"Resource files in the root are not a problem, only classes are.","body":"Resource files in the root are not a problem, only classes are."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697282774,"post_id":77292527,"comment_id":136262090,"body_markdown":"Well, this was my first bet too, to take latest version of DNSJava. I tried both, 2.1.8 - wrote the question - and then took 3.5.2. But still faild and I did not update the question - See, I executed the eclipse-function for generate the `module-info.java` with version 2.1.8. Maybe I need repeat that for 3.5.2. Give me a moment please.","body":"Well, this was my first bet too, to take latest version of DNSJava. I tried both, 2.1.8 - wrote the question - and then took 3.5.2. But still faild and I did not update the question - See, I executed the eclipse-function for generate the <code>module-info.java</code> with version 2.1.8. Maybe I need repeat that for 3.5.2. Give me a moment please."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":1,"creation_date":1697282882,"post_id":77292527,"comment_id":136262102,"body_markdown":"Yes, that worked. I removed the `module-info.java` then updated to latest version of DNSJava and then recreated the `module-info.java`. Now the build works perfectly fine!! Thanks!","body":"Yes, that worked. I removed the <code>module-info.java</code> then updated to latest version of DNSJava and then recreated the <code>module-info.java</code>. Now the build works perfectly fine!! Thanks!"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697284441,"post_id":77292527,"comment_id":136262220,"body_markdown":"One last comment. I am using the package-name of xxx. That is a bad name for a package. DNSJava had this bad name also. I will use the common pattern for package-names in the future just like DNSJava do.","body":"One last comment. I am using the package-name of xxx. That is a bad name for a package. DNSJava had this bad name also. I will use the common pattern for package-names in the future just like DNSJava do."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697284707,"post_id":77292527,"comment_id":136262233,"body_markdown":"@Grim Yes, the general recommendation is to use the reverse DNS of your company or project domain as the root name of your packages (and module names). Though I would generally not recommend using _only_ the reverse domain name as a module name (nor the package name).","body":"@Grim Yes, the general recommendation is to use the reverse DNS of your company or project domain as the root name of your packages (and module names). Though I would generally not recommend using <i>only</i> the reverse domain name as a module name (nor the package name)."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697285428,"post_id":77292527,"comment_id":136262301,"body_markdown":"Yes, I remember an official recommendation. Also I have never seen the `www` subdomain in a package. Its very complex since my domain is `e-nexus.de` but my package is `de.e_nexus`.","body":"Yes, I remember an official recommendation. Also I have never seen the <code>www</code> subdomain in a package. Its very complex since my domain is <code>e-nexus.de</code> but my package is <code>de.e_nexus</code>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697285661,"post_id":77292527,"comment_id":136262326,"body_markdown":"@Grim Fundamentally, www is not part of your domain (it is a hostname that is in your domain). If your domain is `e-nexus.de`, the recommendation is to use module name `de.e_nexus.&lt;project-specific-name&gt;` The same goes for packages. The assumption is generally that you do not have a single project, nor a single module, so use the reverse domain as a namespace, and use more specific names per project.","body":"@Grim Fundamentally, www is not part of your domain (it is a hostname that is in your domain). If your domain is <code>e-nexus.de</code>, the recommendation is to use module name <code>de.e_nexus.&lt;project-specific-name&gt;</code> The same goes for packages. The assumption is generally that you do not have a single project, nor a single module, so use the reverse domain as a namespace, and use more specific names per project."},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1697286232,"post_id":77292527,"comment_id":136262374,"body_markdown":"Yes, hope a company does not name final.com or default.com or import.com because they are keywords and not allowed in the package name afaik.","body":"Yes, hope a company does not name final.com or default.com or import.com because they are keywords and not allowed in the package name afaik."}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":10,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697284400,"creation_date":1697280622,"answer_id":77292527,"question_id":77290528,"body_markdown":"The problem is that `dnsjava-2.1.8.jar` contains classes in the root of the JAR. This is not allowed for a modular JAR, so Java will not consider it a module. A module cannot have any classes in the unnamed package (other than `module-info.class`). As a result no module called `dnsjava` is present, leading to the error _&quot;module not found: dnsjava&quot;_.\r\n\r\nThis is also reported in your Maven output:\r\n\r\n&gt; [WARNING] Can&#39;t extract module name from dnsjava-2.1.8.jar: lookup.class found in top-level directory (unnamed package not allowed in module)\r\n\r\nHowever, the solution to your problem might be easy: upgrade to a newer version of dnsjava. For example, version 3.5.2 &amp;mdash; the latest version at this time &amp;mdash; declares an `Automatic-Module-Name` in its manifest, `org.dnsjava` (this seems to have been introduced in version 3.0.0), and does not contain any classes in its root.\r\n\r\nIn short:\r\n\r\n1. Upgrade to version 3.5.2\r\n2. Use `requires org.dnsjava;` instead of `requires dnsjava;` in `module-info.java`","title":"DNSJava 2.1.8 as dependency invalidates JPMS (Java 9 Platform Module System) compatibility","body":"<p>The problem is that <code>dnsjava-2.1.8.jar</code> contains classes in the root of the JAR. This is not allowed for a modular JAR, so Java will not consider it a module. A module cannot have any classes in the unnamed package (other than <code>module-info.class</code>). As a result no module called <code>dnsjava</code> is present, leading to the error <em>&quot;module not found: dnsjava&quot;</em>.</p>\n<p>This is also reported in your Maven output:</p>\n<blockquote>\n<p>[WARNING] Can't extract module name from dnsjava-2.1.8.jar: lookup.class found in top-level directory (unnamed package not allowed in module)</p>\n</blockquote>\n<p>However, the solution to your problem might be easy: upgrade to a newer version of dnsjava. For example, version 3.5.2 — the latest version at this time — declares an <code>Automatic-Module-Name</code> in its manifest, <code>org.dnsjava</code> (this seems to have been introduced in version 3.0.0), and does not contain any classes in its root.</p>\n<p>In short:</p>\n<ol>\n<li>Upgrade to version 3.5.2</li>\n<li>Use <code>requires org.dnsjava;</code> instead of <code>requires dnsjava;</code> in <code>module-info.java</code></li>\n</ol>\n"}],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77292527,"answer_count":1,"score":0,"last_activity_date":1697284400,"creation_date":1697229564,"question_id":77290528,"body_markdown":"There is a maven artifact called `xxx`:\r\n\r\nHaving this vanilla pom:\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\t\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t\t&lt;groupId&gt;aaa&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;xxx&lt;/artifactId&gt;\r\n\t\t&lt;properties&gt;\r\n\t\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t\t&lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n\t\t\t&lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n\t\t&lt;/properties&gt;\r\n\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;dnsjava&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;dnsjava&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.1.8&lt;/version&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/project&gt;\r\n\r\nAnd this java-class (Test):\r\n\r\n\tpackage xxx;\r\n\t\r\n\timport org.xbill.DNS.Lookup;\r\n\t\r\n\tpublic class Test {\r\n\t\tpublic static void main(final String[] args) {\r\n\t\t\tLookup.class.getSimpleName();\r\n\t\t}\r\n\t}\r\n\r\nNow, the artifact should be a module (Java 9 Platform Module System). So I ask eclipse to create that `module-info.java` \r\n\r\n[![enter image description here][2]][2]\r\n\r\nThis works fine so far. The `module-info.java` have this contents:\r\n\r\n\tmodule xxx {\r\n\t\texports xxx;\r\n\t\trequires dnsjava;\r\n\t}\r\n\r\nThen I try to build the jar using `mvn install`. But the Build faild. This is the output:\r\n\r\n\tgrim@main:~/workspace/xxx$ mvn install\r\n\t[INFO] Scanning for projects...\r\n\t[INFO] \r\n\t[INFO] ------------------------------&lt; aaa:xxx &gt;-------------------------------\r\n\t[INFO] Building xxx 0.0.1-SNAPSHOT\r\n\t[INFO]   from pom.xml\r\n\t[INFO] --------------------------------[ jar ]---------------------------------\r\n\t[INFO] \r\n\t[INFO] --- resources:3.3.0:resources (default-resources) @ xxx ---\r\n\t[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\r\n\t[INFO] skip non existing resourceDirectory /home/grim/workspace/xxx/src/main/resources\r\n\t[INFO] \r\n\t[INFO] --- compiler:3.10.1:compile (default-compile) @ xxx ---\r\n\t[WARNING] Can&#39;t extract module name from dnsjava-2.1.8.jar: lookup.class found in top-level directory (unnamed package not allowed in module)\r\n\t[INFO] Changes detected - recompiling the module!\r\n\t[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\r\n\t[INFO] Compiling 2 source files to /home/grim/workspace/xxx/target/classes\r\n\t[INFO] -------------------------------------------------------------\r\n\t[ERROR] COMPILATION ERROR : \r\n\t[INFO] -------------------------------------------------------------\r\n\t[ERROR] /home/grim/workspace/xxx/src/main/java/module-info.java:[4,18] module not found: dnsjava\r\n\t[INFO] 1 error\r\n\t[INFO] -------------------------------------------------------------\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] BUILD FAILURE\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[INFO] Total time:  0.278 s\r\n\t[INFO] Finished at: 2023-10-13T22:36:07+02:00\r\n\t[INFO] ------------------------------------------------------------------------\r\n\t[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project xxx: Compilation failure\r\n\t[ERROR] /home/grim/workspace/xxx/src/main/java/module-info.java:[4,18] module not found: dnsjava\r\n\t[ERROR] \r\n\t[ERROR] -&gt; [Help 1]\r\n\t[ERROR] \r\n\t[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n\t[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n\t[ERROR] \r\n\t[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n\t[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\tgrim@main:~/workspace/xxx$ \r\n\r\nAny ideas?\r\n\r\n  [1]: https://i.stack.imgur.com/OL6ge.png\r\n  [2]: https://i.stack.imgur.com/42Qam.png","title":"DNSJava 2.1.8 as dependency invalidates JPMS (Java 9 Platform Module System) compatibility","body":"<p>There is a maven artifact called <code>xxx</code>:</p>\n<p>Having this vanilla pom:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;aaa&lt;/groupId&gt;\n    &lt;artifactId&gt;xxx&lt;/artifactId&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;dnsjava&lt;/groupId&gt;\n            &lt;artifactId&gt;dnsjava&lt;/artifactId&gt;\n            &lt;version&gt;2.1.8&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>And this java-class (Test):</p>\n<pre><code>package xxx;\n\nimport org.xbill.DNS.Lookup;\n\npublic class Test {\n    public static void main(final String[] args) {\n        Lookup.class.getSimpleName();\n    }\n}\n</code></pre>\n<p>Now, the artifact should be a module (Java 9 Platform Module System). So I ask eclipse to create that <code>module-info.java</code></p>\n<p><a href=\"https://i.stack.imgur.com/42Qam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/42Qam.png\" alt=\"enter image description here\" /></a></p>\n<p>This works fine so far. The <code>module-info.java</code> have this contents:</p>\n<pre><code>module xxx {\n    exports xxx;\n    requires dnsjava;\n}\n</code></pre>\n<p>Then I try to build the jar using <code>mvn install</code>. But the Build faild. This is the output:</p>\n<pre><code>grim@main:~/workspace/xxx$ mvn install\n[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------------------&lt; aaa:xxx &gt;-------------------------------\n[INFO] Building xxx 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- resources:3.3.0:resources (default-resources) @ xxx ---\n[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!\n[INFO] skip non existing resourceDirectory /home/grim/workspace/xxx/src/main/resources\n[INFO] \n[INFO] --- compiler:3.10.1:compile (default-compile) @ xxx ---\n[WARNING] Can't extract module name from dnsjava-2.1.8.jar: lookup.class found in top-level directory (unnamed package not allowed in module)\n[INFO] Changes detected - recompiling the module!\n[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!\n[INFO] Compiling 2 source files to /home/grim/workspace/xxx/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /home/grim/workspace/xxx/src/main/java/module-info.java:[4,18] module not found: dnsjava\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.278 s\n[INFO] Finished at: 2023-10-13T22:36:07+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project xxx: Compilation failure\n[ERROR] /home/grim/workspace/xxx/src/main/java/module-info.java:[4,18] module not found: dnsjava\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\ngrim@main:~/workspace/xxx$ \n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","spring-boot","microservices"],"answers":[{"comments":[{"owner":{"display_name":"user5778069"},"score":0,"creation_date":1504980789,"post_id":46133689,"comment_id":79229650,"body_markdown":"oh, I think I dont have Eureka installed on my windows box ? Is that the problem ? Do I need to installed that ?","body":"oh, I think I dont have Eureka installed on my windows box ? Is that the problem ? Do I need to installed that ?"},{"owner":{"account_id":92002,"reputation":1383,"user_id":252344,"accept_rate":60,"display_name":"Faron"},"score":1,"creation_date":1504981512,"post_id":46133689,"comment_id":79229829,"body_markdown":"You probably do not need it for what you are doing. Just disable it so you do not see a message every 5 seconds. If you would like to learn more about Eureka, start here (https://spring.io/guides/gs/service-registration-and-discovery/)","body":"You probably do not need it for what you are doing. Just disable it so you do not see a message every 5 seconds. If you would like to learn more about Eureka, start here (<a href=\"https://spring.io/guides/gs/service-registration-and-discovery/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/service-registration-and-discovery</a>)"}],"tags":[],"owner":{"account_id":92002,"reputation":1383,"user_id":252344,"accept_rate":60,"display_name":"Faron"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1504980659,"creation_date":1504980659,"answer_id":46133689,"question_id":46131196,"body_markdown":"This particular message is just a warning. Your application is attempting to register with Eureka but Eureka is not responding. You can either start an instance of Eureka or disable the automatic registration by adding the following to your application.yml.\r\n\r\n    eureka:\r\n      client:\r\n        register-with-eureka: false\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>This particular message is just a warning. Your application is attempting to register with Eureka but Eureka is not responding. You can either start an instance of Eureka or disable the automatic registration by adding the following to your application.yml.</p>\n\n<pre><code>eureka:\n  client:\n    register-with-eureka: false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5189029,"reputation":216,"user_id":4314527,"display_name":"Ashish Kathait"},"comment_count":0,"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1517691176,"creation_date":1517689407,"answer_id":48601646,"question_id":46131196,"body_markdown":"You need to create Eureka Registry Server which is another microservice. It&#39;s main class incase of an SpringBoot application, should have @EnableEurekaServer annotation.\r\n\r\nThen in your Eureka Client you will have to mention the  Registry server URL in appliation.yml as below : \r\n\r\n    spring:\r\n      application:\r\n        name: stock-service\r\n    \r\n    server:\r\n      port: 8083\r\n    \r\n    \r\n    eureka:\r\n      client:\r\n        registerWithEureka: true\r\n        fetchRegistry: true\r\n        serviceUrl:\r\n          defaultZone: http://localhost:8084/eureka/\r\n      instance:\r\n        hostname: localhost\r\n\r\nwhere defaultzone should hold the value of your Eureka Registry.\r\n\r\nOnce you do all these configurations you need to Get the Eureka Registry microservice up and then you can get the Eureka client up. Once your Registry is up you will not face this exception.\r\n\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>You need to create Eureka Registry Server which is another microservice. It's main class incase of an SpringBoot application, should have @EnableEurekaServer annotation.</p>\n\n<p>Then in your Eureka Client you will have to mention the  Registry server URL in appliation.yml as below : </p>\n\n<pre><code>spring:\n  application:\n    name: stock-service\n\nserver:\n  port: 8083\n\n\neureka:\n  client:\n    registerWithEureka: true\n    fetchRegistry: true\n    serviceUrl:\n      defaultZone: http://localhost:8084/eureka/\n  instance:\n    hostname: localhost\n</code></pre>\n\n<p>where defaultzone should hold the value of your Eureka Registry.</p>\n\n<p>Once you do all these configurations you need to Get the Eureka Registry microservice up and then you can get the Eureka client up. Once your Registry is up you will not face this exception.</p>\n"},{"tags":[],"owner":{"account_id":9338237,"reputation":386,"user_id":6931836,"display_name":"stanlee"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1527622866,"creation_date":1527622866,"answer_id":50591790,"question_id":46131196,"body_markdown":"This is happening because it is trying to connect to any known server, so to stop that error, a known server is eureka server on port 8761 which is its default port, you will have to update the application.properties with following\r\n\r\n    server.port=8761\r\nTo avoid eureka from registering itself, you add this to the application.properties\r\n\r\n    eureka.client.register-with-eureka=false\r\nEnsure that EurekaServer is enabled, for example using spring boot you write the below on the main class.\r\n\r\n    @EnableEurekaServer\r\n\r\nPlease pardon me providing solution using .properties file but that is what i work with but .yml configurations shouldn&#39;t be too different.\r\n\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>This is happening because it is trying to connect to any known server, so to stop that error, a known server is eureka server on port 8761 which is its default port, you will have to update the application.properties with following</p>\n\n<pre><code>server.port=8761\n</code></pre>\n\n<p>To avoid eureka from registering itself, you add this to the application.properties</p>\n\n<pre><code>eureka.client.register-with-eureka=false\n</code></pre>\n\n<p>Ensure that EurekaServer is enabled, for example using spring boot you write the below on the main class.</p>\n\n<pre><code>@EnableEurekaServer\n</code></pre>\n\n<p>Please pardon me providing solution using .properties file but that is what i work with but .yml configurations shouldn't be too different.</p>\n"},{"comments":[{"owner":{"account_id":6839027,"reputation":4521,"user_id":5260008,"accept_rate":100,"display_name":"N00b Pr0grammer"},"score":0,"creation_date":1562750519,"post_id":50791132,"comment_id":100471824,"body_markdown":"This helped me resolve my problem, thanks for this @xuezhongyu01","body":"This helped me resolve my problem, thanks for this @xuezhongyu01"},{"owner":{"display_name":"user4739287"},"score":0,"creation_date":1566474113,"post_id":50791132,"comment_id":101672453,"body_markdown":"Thanks ... This is the correct answer ... ``eureka.client.fetch-registry=false`` included this line in my eureka microservice.","body":"Thanks ... This is the correct answer ... <code>eureka.client.fetch-registry=false</code> included this line in my eureka microservice."},{"owner":{"account_id":8038697,"reputation":325,"user_id":6061061,"display_name":"Blake Neal"},"score":9,"creation_date":1580843720,"post_id":50791132,"comment_id":106229136,"body_markdown":"Yeah, but this essentially makes this client unable to be discoverable. Is that ideal? Maybe for this case... For me, it was essentially: 1) start the `@EnableEurekaServer` app first; 2) Start any `@EurekaDiscoveryClient` apps afterward. This is mostly just a timing issue (tries to connect, fails, tries again, fails, tries again, succeeds)","body":"Yeah, but this essentially makes this client unable to be discoverable. Is that ideal? Maybe for this case... For me, it was essentially: 1) start the <code>@EnableEurekaServer</code> app first; 2) Start any <code>@EurekaDiscoveryClient</code> apps afterward. This is mostly just a timing issue (tries to connect, fails, tries again, fails, tries again, succeeds)"},{"owner":{"account_id":184227,"reputation":1077,"user_id":420131,"display_name":"theRiley"},"score":6,"creation_date":1589510999,"post_id":50791132,"comment_id":109330237,"body_markdown":"To clarify, the two properties above are used inside the eureka server, not the client.  This prevents the server from registering itself.","body":"To clarify, the two properties above are used inside the eureka server, not the client.  This prevents the server from registering itself."},{"owner":{"account_id":3170177,"reputation":147,"user_id":2679339,"display_name":"aatif"},"score":0,"creation_date":1623414852,"post_id":50791132,"comment_id":120079385,"body_markdown":"Thanks eureka.client.register-with-eureka=false resolved my issue.","body":"Thanks eureka.client.register-with-eureka=false resolved my issue."}],"tags":[],"owner":{"account_id":10236560,"reputation":1324,"user_id":8420428,"display_name":"keith5140"},"comment_count":5,"down_vote_count":2,"up_vote_count":110,"is_accepted":false,"score":108,"last_activity_date":1528695991,"creation_date":1528695991,"answer_id":50791132,"question_id":46131196,"body_markdown":"I find I have to add these two applications to the appllication.properties,it can work.Only one is not enough.\r\n\r\n    eureka.client.register-with-eureka=false\r\n\r\n    eureka.client.fetch-registry=false","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>I find I have to add these two applications to the appllication.properties,it can work.Only one is not enough.</p>\n\n<pre><code>eureka.client.register-with-eureka=false\n\neureka.client.fetch-registry=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16821101,"reputation":41,"user_id":12161547,"display_name":"itssaifurrehman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1570809054,"creation_date":1570809054,"answer_id":58344713,"question_id":46131196,"body_markdown":"Look for the filterType() in ZuulLoggingFiler.java. I had the same problem. Then i saw my filter was returning null. so I changed it to &quot;post&quot; and it worked.\r\n\r\n\t@Override\r\n\tpublic String filterType() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn &quot;post&quot;;\r\n\t}","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Look for the filterType() in ZuulLoggingFiler.java. I had the same problem. Then i saw my filter was returning null. so I changed it to \"post\" and it worked.</p>\n\n<pre><code>@Override\npublic String filterType() {\n    // TODO Auto-generated method stub\n    return \"post\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1474244,"reputation":982,"user_id":1385063,"accept_rate":0,"display_name":"Piyush Chaudhari"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1578220998,"creation_date":1578220998,"answer_id":59599038,"question_id":46131196,"body_markdown":"**If your eureka server is deployed/running without username and password use below properties.**\r\n\r\n    spring.application.name=Hello-World\r\n    eureka.client.serviceUrl.defaultZone=http://eurekaserver:password@localhost:9100/eureka\r\n    server.port=9200\r\n    eureka.client.fetch-registry=true\r\n\r\n    \r\n**If your eureka server is deployed/running with username and password use below properties.**\r\n\r\n\r\n    spring.application.name=Hello-World\r\n    eureka.client.serviceUrl.defaultZone=http://eurekaserverusername:eurekaserverpassword@localhost:9100/eureka\r\n    server.port=9200\r\n    eureka.client.fetch-registry=true","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p><strong>If your eureka server is deployed/running without username and password use below properties.</strong></p>\n\n<pre><code>spring.application.name=Hello-World\neureka.client.serviceUrl.defaultZone=http://eurekaserver:password@localhost:9100/eureka\nserver.port=9200\neureka.client.fetch-registry=true\n</code></pre>\n\n<p><strong>If your eureka server is deployed/running with username and password use below properties.</strong></p>\n\n<pre><code>spring.application.name=Hello-World\neureka.client.serviceUrl.defaultZone=http://eurekaserverusername:eurekaserverpassword@localhost:9100/eureka\nserver.port=9200\neureka.client.fetch-registry=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11593698,"reputation":79,"user_id":8493098,"display_name":"Srikanth Enjapuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1581859385,"creation_date":1581859385,"answer_id":60248927,"question_id":46131196,"body_markdown":"Check your URL and port number of eureka server \r\n provided in &quot;eureka.client.serviceUrl.defaultZone&quot; property.\r\n ","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Check your URL and port number of eureka server \n provided in \"eureka.client.serviceUrl.defaultZone\" property.</p>\n"},{"tags":[],"owner":{"account_id":6764866,"reputation":451,"user_id":5210164,"display_name":"Avinash Khadsan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585899150,"creation_date":1585899150,"answer_id":61007036,"question_id":46131196,"body_markdown":"for me its working after connecting to internet because it need to download some dependence first time.","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>for me its working after connecting to internet because it need to download some dependence first time.</p>\n"},{"comments":[{"owner":{"account_id":14901094,"reputation":642,"user_id":13989422,"display_name":"Morteza"},"score":0,"creation_date":1642197371,"post_id":61223499,"comment_id":125016093,"body_markdown":"Can you please tell us spring boot and spring cloud versions you have tried with? I have the same issue and the culprit is spring security.  I have tried your solution but no difference. I have already looked at docs and https://github.com/spring-cloud/spring-cloud-netflix/issues/2754. no difference. By the way my `spring-boot` version is: 2.5.2 and `spring-cloud` version is: 2020.0.3","body":"Can you please tell us spring boot and spring cloud versions you have tried with? I have the same issue and the culprit is spring security.  I have tried your solution but no difference. I have already looked at docs and <a href=\"https://github.com/spring-cloud/spring-cloud-netflix/issues/2754\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-netflix/issues/2754</a>. no difference. By the way my <code>spring-boot</code> version is: 2.5.2 and <code>spring-cloud</code> version is: 2020.0.3"},{"owner":{"account_id":1251757,"reputation":4861,"user_id":1212046,"accept_rate":38,"display_name":"Waqas Ahmed"},"score":0,"creation_date":1642398600,"post_id":61223499,"comment_id":125051112,"body_markdown":"@MortezaBandi my fixed solution was with spring-boot 2.2.6.RELEASE and spring-cloud Hoxton.SR3","body":"@MortezaBandi my fixed solution was with spring-boot 2.2.6.RELEASE and spring-cloud Hoxton.SR3"}],"tags":[],"owner":{"account_id":1251757,"reputation":4861,"user_id":1212046,"accept_rate":38,"display_name":"Waqas Ahmed"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1586935723,"creation_date":1586935723,"answer_id":61223499,"question_id":46131196,"body_markdown":"I was facing the same error when my Eureka client i.e microservice trying to register herself with Eureka Server.\r\n\r\n&gt; **Client registration eureka service failure registration failed Cannot execute request on any known server**\r\n\r\nThis error message comes because of following two possibilities.\r\n\r\n1) The defaultZone address is incorrect , either its misspelled or the space is missing after **:**.\r\n\r\n\r\n2) Spring security implemented on Eureka server require a valid CSRF token be sent with every request. Eureka clients will not generally possess a valid cross site request forgery (CSRF) token. So you will need to disable this requirement for the /eureka/** endpoints. \r\n\r\nAfter disabling the CSRF token with follwoing line of code my Eureka client successfully register them selves with Eureka Server.\r\n\r\n    @EnableWebSecurity\r\n    class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.csrf().ignoringAntMatchers(&quot;/eureka/**&quot;);\r\n            super.configure(http);\r\n        }\r\n    }\r\n\r\nAlso below is the link from spring docs.\r\n\r\n[https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_securing_the_eureka_server][1]\r\n\r\n\r\n  [1]: https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_securing_the_eureka_server","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>I was facing the same error when my Eureka client i.e microservice trying to register herself with Eureka Server.</p>\n\n<blockquote>\n  <p><strong>Client registration eureka service failure registration failed Cannot execute request on any known server</strong></p>\n</blockquote>\n\n<p>This error message comes because of following two possibilities.</p>\n\n<p>1) The defaultZone address is incorrect , either its misspelled or the space is missing after <strong>:</strong>.</p>\n\n<p>2) Spring security implemented on Eureka server require a valid CSRF token be sent with every request. Eureka clients will not generally possess a valid cross site request forgery (CSRF) token. So you will need to disable this requirement for the /eureka/** endpoints. </p>\n\n<p>After disabling the CSRF token with follwoing line of code my Eureka client successfully register them selves with Eureka Server.</p>\n\n<pre><code>@EnableWebSecurity\nclass WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().ignoringAntMatchers(\"/eureka/**\");\n        super.configure(http);\n    }\n}\n</code></pre>\n\n<p>Also below is the link from spring docs.</p>\n\n<p><a href=\"https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_securing_the_eureka_server\" rel=\"noreferrer\">https://cloud.spring.io/spring-cloud-static/Greenwich.SR2/single/spring-cloud.html#_securing_the_eureka_server</a></p>\n"},{"tags":[],"owner":{"account_id":1303659,"reputation":2036,"user_id":1253088,"display_name":"Vaibs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591457333,"creation_date":1591457333,"answer_id":62233920,"question_id":46131196,"body_markdown":"Similar error will be thrown when you have misspelled anything in the value of defaultZone. For ex: someone has misspelled eureka to euraka. Double check it.\r\n\r\n    defaultZone : http://localhost:8761/eureka\r\n\r\n ","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Similar error will be thrown when you have misspelled anything in the value of defaultZone. For ex: someone has misspelled eureka to euraka. Double check it.</p>\n\n<pre><code>defaultZone : http://localhost:8761/eureka\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10714452,"reputation":5430,"user_id":7885651,"display_name":"Muhammed Ozdogan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636532337,"creation_date":1619986710,"answer_id":67360773,"question_id":46131196,"body_markdown":"I got the same error. In my case, in the `application.properties` file of my client application I misspelled the `defaultZone` word. I wrote `default-zone` but it must be `defaultZone`.\r\n\r\n**Client App** `application.properties`:\r\n\r\n```properties\r\neureka.client.service-url.defaultZone=http://localhost:8030/eureka/\r\n```\r\n\r\nHostname and port may differ in your case.\r\n\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>I got the same error. In my case, in the <code>application.properties</code> file of my client application I misspelled the <code>defaultZone</code> word. I wrote <code>default-zone</code> but it must be <code>defaultZone</code>.</p>\n<p><strong>Client App</strong> <code>application.properties</code>:</p>\n<pre><code>eureka.client.service-url.defaultZone=http://localhost:8030/eureka/\n</code></pre>\n<p>Hostname and port may differ in your case.</p>\n"},{"tags":[],"owner":{"account_id":12444230,"reputation":549,"user_id":9061008,"display_name":"Dmitry Rakovets"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1656469809,"creation_date":1636514690,"answer_id":69907636,"question_id":46131196,"body_markdown":"Version for dependencies: \r\n\r\n* **Spring Boot**: `2.5.6`\r\n* **Spring Cloud**: `2020.0.4`\r\n\r\n## Eureka Server App\r\n\r\n### `application.yaml`\r\n\r\n```yaml\r\nserver:\r\n  port: 8010\r\neureka:\r\n  client:\r\n    fetch-registry: false\r\n    register-with-eureka: false\r\n    service-url:\r\n      defaultZone: http://localhost:8010/eureka\r\n```\r\n\r\n\r\n### `MyEurekaServerApplication.java`\r\n\r\n```java\r\n@EnableEurekaServer\r\n@SpringBootApplication\r\npublic class MyEurekaServerApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MyEurekaServerApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\n\r\n## Eureka Client App\r\n\r\n### `application.yaml`\r\n\r\n```yaml\r\neureka:\r\n  client:\r\n    service-url:\r\n      defaultZone: http://localhost:8010/eureka\r\n```\r\n\r\nIf you use `default-zone` instead of `defaultZone`, then the **Eureka Client App** throws an exception when registering on the **Eureka Server**.\r\n\r\n### `MyEurekaClientApplication.java`\r\n\r\n```java\r\n@EnableEurekaClient\r\n@SpringBootApplication\r\npublic class MyEurekaClientApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MyEurekaClientApplication.class, args);\r\n    }\r\n}\r\n```","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Version for dependencies:</p>\n<ul>\n<li><strong>Spring Boot</strong>: <code>2.5.6</code></li>\n<li><strong>Spring Cloud</strong>: <code>2020.0.4</code></li>\n</ul>\n<h2>Eureka Server App</h2>\n<h3><code>application.yaml</code></h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8010\neureka:\n  client:\n    fetch-registry: false\n    register-with-eureka: false\n    service-url:\n      defaultZone: http://localhost:8010/eureka\n</code></pre>\n<h3><code>MyEurekaServerApplication.java</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableEurekaServer\n@SpringBootApplication\npublic class MyEurekaServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyEurekaServerApplication.class, args);\n    }\n}\n</code></pre>\n<h2>Eureka Client App</h2>\n<h3><code>application.yaml</code></h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>eureka:\n  client:\n    service-url:\n      defaultZone: http://localhost:8010/eureka\n</code></pre>\n<p>If you use <code>default-zone</code> instead of <code>defaultZone</code>, then the <strong>Eureka Client App</strong> throws an exception when registering on the <strong>Eureka Server</strong>.</p>\n<h3><code>MyEurekaClientApplication.java</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableEurekaClient\n@SpringBootApplication\npublic class MyEurekaClientApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyEurekaClientApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3025723,"reputation":879,"user_id":3318097,"display_name":"Prashant K"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641736732,"creation_date":1641732975,"answer_id":70641471,"question_id":46131196,"body_markdown":"Adding the following lines in application.properties solved it:\r\n\r\n `server.port=8761`\r\n\r\n`eureka.client.register-with-eureka=false`\r\n\r\n`eureka.client.fetch-registry=false`\r\n\r\nThe first one is optional.\r\n\r\nThe other two properties are used to tell Eureka Server that &quot;Hey, you&#39;re the only Eureka Server in this context, don&#39;t try to find other Eureka Servers&quot;\r\n\r\nIf we don&#39;t mention these, our Eureka Server will try to find and register itself on other Eureka Servers and will eventually throw the Transport Exception.","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Adding the following lines in application.properties solved it:</p>\n<p><code>server.port=8761</code></p>\n<p><code>eureka.client.register-with-eureka=false</code></p>\n<p><code>eureka.client.fetch-registry=false</code></p>\n<p>The first one is optional.</p>\n<p>The other two properties are used to tell Eureka Server that &quot;Hey, you're the only Eureka Server in this context, don't try to find other Eureka Servers&quot;</p>\n<p>If we don't mention these, our Eureka Server will try to find and register itself on other Eureka Servers and will eventually throw the Transport Exception.</p>\n"},{"tags":[],"owner":{"account_id":18565415,"reputation":11,"user_id":13528484,"display_name":"neetu shaky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670489750,"creation_date":1670489750,"answer_id":74727711,"question_id":46131196,"body_markdown":"Try to add this property in your microservice which you want to connect with the naming server:\r\n\r\n    eureka.instance.hostname=localhost","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Try to add this property in your microservice which you want to connect with the naming server:</p>\n<pre><code>eureka.instance.hostname=localhost\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23020749,"reputation":302,"user_id":17141839,"display_name":"zordu-nickim-agzivi-sikm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675564408,"creation_date":1675564408,"answer_id":75349772,"question_id":46131196,"body_markdown":"Let&#39;s set aside the answers given above. Maybe you didn&#39;t get the server that has `@EnableEurekaServer`annotation program up. :)","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Let's set aside the answers given above. Maybe you didn't get the server that has <code>@EnableEurekaServer</code>annotation program up. :)</p>\n"},{"tags":[],"owner":{"account_id":5540613,"reputation":23,"user_id":10014838,"display_name":"nomaanhusain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677145669,"creation_date":1677145669,"answer_id":75543080,"question_id":46131196,"body_markdown":"Stater config is needed sometimes, to pom.xml add\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn application.properties add\r\n\r\n    spring.config.import=optional:configserver:http://localhost:8888","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>Stater config is needed sometimes, to pom.xml add</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In application.properties add</p>\n<pre><code>spring.config.import=optional:configserver:http://localhost:8888\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11207870,"reputation":25,"user_id":8222884,"display_name":"Alireza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681236745,"creation_date":1680778872,"answer_id":75948753,"question_id":46131196,"body_markdown":"For me, the issue was in my build.gradle file.\r\nI just removed this part from my build.gradle file:\r\n\r\n```\r\nallprojects {\r\n    repositories {\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\n```\r\n\r\n\r\nThen my gradle file changed to this:\r\n\r\n```\r\nbuildscript {\r\n    apply from:&quot;../dependencies.gradle&quot;\r\n    ext {\r\n        set(&#39;springBootVersion&#39;, &quot;2.1.8.RELEASE&quot;)\r\n        set(&#39;springCloudVersion&#39;,&quot;Greenwich.SR2&quot; )\r\n        set(&#39;springCloudServicesVersion&#39;, &quot;3.1.0.RELEASE&quot;)\r\n        set(&#39;springBootAdminVersion&#39;,&#39;2.1.6&#39;)\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:2.1.4.RELEASE&quot;)\r\n        classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.8.RELEASE&quot;\r\n    }\r\n}\r\n```\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>For me, the issue was in my build.gradle file.\nI just removed this part from my build.gradle file:</p>\n<pre><code>allprojects {\n    repositories {\n        maven { url 'https://jitpack.io' }\n    }\n}\n</code></pre>\n<p>Then my gradle file changed to this:</p>\n<pre><code>buildscript {\n    apply from:&quot;../dependencies.gradle&quot;\n    ext {\n        set('springBootVersion', &quot;2.1.8.RELEASE&quot;)\n        set('springCloudVersion',&quot;Greenwich.SR2&quot; )\n        set('springCloudServicesVersion', &quot;3.1.0.RELEASE&quot;)\n        set('springBootAdminVersion','2.1.6')\n    }\n    repositories {\n        mavenCentral()\n        maven { url 'https://jitpack.io' }\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:2.1.4.RELEASE&quot;)\n        classpath &quot;io.spring.gradle:dependency-management-plugin:1.0.8.RELEASE&quot;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11946150,"reputation":107,"user_id":8741299,"display_name":"prabhat kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693983560,"creation_date":1693983560,"answer_id":77049634,"question_id":46131196,"body_markdown":"use below property you can change ip based on yours\r\neureka.client.service-url.defaultZone: ${eureka_url:http://localhost:8761/eureka}","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>use below property you can change ip based on yours\neureka.client.service-url.defaultZone: ${eureka_url:http://localhost:8761/eureka}</p>\n"},{"tags":[],"owner":{"account_id":28533719,"reputation":1,"user_id":21840718,"display_name":"Naveen Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697283962,"creation_date":1697283962,"answer_id":77292689,"question_id":46131196,"body_markdown":"I was getting same error when I ran service registry project.\r\nBelow step fixed my issue and able to run project.\r\n-------------------------------------------------------------\r\nInstead of using below:\r\n\r\n    eureka.client.register-with-eureka=false\r\n    eureka.client.fetch-registry=false\r\n\r\n\r\n\r\nUse This in application.properties:-\r\n\r\n    eureka.client.registerWithEureka=false\r\n    eureka.client.fetchRegistry=false\r\n\r\n\r\n","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<h2>I was getting same error when I ran service registry project.\nBelow step fixed my issue and able to run project.</h2>\n<p>Instead of using below:</p>\n<pre><code>eureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\n</code></pre>\n<p>Use This in application.properties:-</p>\n<pre><code>eureka.client.registerWithEureka=false\neureka.client.fetchRegistry=false\n</code></pre>\n"}],"owner":{"display_name":"user5778069"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128162,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"answer_count":19,"score":47,"last_activity_date":1697283962,"creation_date":1504963577,"question_id":46131196,"body_markdown":"I am very new to the microservices and trying to run the code from link: https://dzone.com/articles/advanced-microservices-security-with-spring-and-oa . When I simply run the code I see the following error comes. \r\n\r\nWhat is the issue ?\r\n\r\n    com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\r\n    \tat com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030) [eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944) [eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1468) [eureka-client-1.4.12.jar:1.4.12]\r\n    \tat com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1435) [eureka-client-1.4.12.jar:1.4.12]\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.8.0_144]\r\n    \tat java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_144]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_144]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_144]\r\n    \tat java.lang.Thread.run(Unknown Source) [na:1.8.0_144]\r\n    \r\n    2017-09-09 18:53:11.909 ERROR 16268 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\r\n     \r\n\r\nI have not installed anything special on to the system. Please let me know what do I need to install? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8oWl2.png","title":"com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server","body":"<p>I am very new to the microservices and trying to run the code from link: <a href=\"https://dzone.com/articles/advanced-microservices-security-with-spring-and-oa\" rel=\"noreferrer\">https://dzone.com/articles/advanced-microservices-security-with-spring-and-oa</a> . When I simply run the code I see the following error comes. </p>\n\n<p>What is the issue ?</p>\n\n<pre><code>com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server\n    at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:111) ~[eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$6.execute(EurekaHttpClientDecorator.java:137) ~[eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.getApplications(EurekaHttpClientDecorator.java:134) ~[eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.DiscoveryClient.getAndStoreFullRegistry(DiscoveryClient.java:1030) [eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.DiscoveryClient.fetchRegistry(DiscoveryClient.java:944) [eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.DiscoveryClient.refreshRegistry(DiscoveryClient.java:1468) [eureka-client-1.4.12.jar:1.4.12]\n    at com.netflix.discovery.DiscoveryClient$CacheRefreshThread.run(DiscoveryClient.java:1435) [eureka-client-1.4.12.jar:1.4.12]\n    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.8.0_144]\n    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_144]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_144]\n    at java.lang.Thread.run(Unknown Source) [na:1.8.0_144]\n\n2017-09-09 18:53:11.909 ERROR 16268 --- [tbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\n</code></pre>\n\n<p>I have not installed anything special on to the system. Please let me know what do I need to install? </p>\n\n<p><a href=\"https://i.stack.imgur.com/8oWl2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8oWl2.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","android","zip","android-assets"],"answers":[{"comments":[{"owner":{"account_id":875403,"reputation":18440,"user_id":925151,"accept_rate":51,"display_name":"pleerock"},"score":1,"creation_date":1349947333,"post_id":6797908,"comment_id":17366677,"body_markdown":"but what if one file is 10kb and another one is 10mb and there are only two files in the archive?","body":"but what if one file is 10kb and another one is 10mb and there are only two files in the archive?"},{"owner":{"account_id":100211,"reputation":12068,"user_id":270265,"accept_rate":61,"display_name":"melbic"},"score":4,"creation_date":1394033861,"post_id":6797908,"comment_id":33705077,"body_markdown":"Won&#39;t work, because ZipInputStream doesn&#39;t have any method called getSize.","body":"Won&#39;t work, because ZipInputStream doesn&#39;t have any method called getSize."},{"owner":{"account_id":3568147,"reputation":1152,"user_id":2979171,"accept_rate":88,"display_name":"Alireza Sharifi"},"score":0,"creation_date":1576658429,"post_id":6797908,"comment_id":104966997,"body_markdown":"not sure about the `getSize()`  but great idea about setting progress based on file size, not the zip files counts. i was reading the whole zip two times and it will cost me a lot of time because i have map tiles and my zip has 130,000 files in it so, for reporting progress based on writing bytes is really efficient and faster. basicely double timing! thanks for the tip","body":"not sure about the <code>getSize()</code>  but great idea about setting progress based on file size, not the zip files counts. i was reading the whole zip two times and it will cost me a lot of time because i have map tiles and my zip has 130,000 files in it so, for reporting progress based on writing bytes is really efficient and faster. basicely double timing! thanks for the tip"}],"tags":[],"owner":{"account_id":51789,"reputation":631,"user_id":154755,"accept_rate":75,"display_name":"davorb"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1311388823,"creation_date":1311388823,"answer_id":6797908,"question_id":6795389,"body_markdown":"Your basic problem seems to be that you have to do `progressBar.setMax()` before you start reading the file, and you are setting the max based on the number of files.\r\n\r\nHave you thought about doing `progressBar.setMax(zin.getSize())` and then keeping track of how many bytes you&#39;ve written when you call `progressBar.setProgress()`, instead of how many files you&#39;ve read? This should solve your problem and will give you (imho) a more accurate progress bar.","title":"Android: Get Number of Files within Zip?","body":"<p>Your basic problem seems to be that you have to do <code>progressBar.setMax()</code> before you start reading the file, and you are setting the max based on the number of files.</p>\n\n<p>Have you thought about doing <code>progressBar.setMax(zin.getSize())</code> and then keeping track of how many bytes you've written when you call <code>progressBar.setProgress()</code>, instead of how many files you've read? This should solve your problem and will give you (imho) a more accurate progress bar.</p>\n"},{"tags":[],"owner":{"account_id":201896,"reputation":57765,"user_id":448625,"accept_rate":96,"display_name":"Caner"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1459866234,"creation_date":1311389881,"answer_id":6797957,"question_id":6795389,"body_markdown":"Use `ZipFile` API, There is a `size` method that returns the number of `ZipEntries` in the `ZipFile`. You can read from assets folder.\r\n\r\nexample:\r\n\r\n    int zipEntriesCount(String path) throws IOException {\r\n\r\n         ZipFile zf= new ZipFile(path);\r\n         return zf.size();\r\n    }","title":"Android: Get Number of Files within Zip?","body":"<p>Use <code>ZipFile</code> API, There is a <code>size</code> method that returns the number of <code>ZipEntries</code> in the <code>ZipFile</code>. You can read from assets folder.</p>\n\n<p>example:</p>\n\n<pre><code>int zipEntriesCount(String path) throws IOException {\n\n     ZipFile zf= new ZipFile(path);\n     return zf.size();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":242479,"reputation":3379,"user_id":514025,"accept_rate":43,"display_name":"Bill Yan"},"score":0,"creation_date":1638992137,"post_id":6819403,"comment_id":124237275,"body_markdown":"getting &quot; java.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed&quot; with this method","body":"getting &quot; java.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed&quot; with this method"}],"tags":[],"owner":{"account_id":802867,"reputation":261,"user_id":861996,"display_name":"Jack"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1311611746,"creation_date":1311611746,"answer_id":6819403,"question_id":6795389,"body_markdown":"Thanks for the answers. What I ended up doing using the: `AssetFileDescriptor` API to get the file size of the zip file and setting that as the `ProgessBar.setMax()` value. Then as I loop through the zip contents I increment the progress by using each entries file size. This works but the only concern I have is that the `AssetFileDescriptor.getLength()` value as well as the `ZipEntry.getSize()` values return a `long` value so I am forced to cast them to an integer before I can set the max and/or increment the `ProgessBar` so there is a slight possibility I might overload an integer value causing an exception but this is not likely because I do not anticipate my file sizes ever getting bigger than the max holding capacity of an integer.\r\n\r\n    ZipInputStream zin = new ZipInputStream(getAssets().open(\r\n    \t\t\t\t\t\t\t&quot;myFile.zip&quot;));\r\n    ZipEntry ze = null;\r\n    AssetFileDescriptor mydisc = getAssets().openFd(&quot;myFile.zip&quot;);\r\n    //Size of the zip package\r\n    long size = mydisc.getLength();\r\n    long increment = 0;\r\n    dialog.setMax((int) size);\r\n    while ((ze = zin.getNextEntry()) != null) {\r\n         increment += (int) ze.getSize();\r\n    \t progessBar.setProgess((int)increment);\r\n         //do more stuff..\r\n    }\r\n\r\nNot the best solution but it works.\r\n\r\nI&#39;m aware of the `ZipFile` API but it requires a string to be passed in but I am not sure what the path is to that directory or how to get it?","title":"Android: Get Number of Files within Zip?","body":"<p>Thanks for the answers. What I ended up doing using the: <code>AssetFileDescriptor</code> API to get the file size of the zip file and setting that as the <code>ProgessBar.setMax()</code> value. Then as I loop through the zip contents I increment the progress by using each entries file size. This works but the only concern I have is that the <code>AssetFileDescriptor.getLength()</code> value as well as the <code>ZipEntry.getSize()</code> values return a <code>long</code> value so I am forced to cast them to an integer before I can set the max and/or increment the <code>ProgessBar</code> so there is a slight possibility I might overload an integer value causing an exception but this is not likely because I do not anticipate my file sizes ever getting bigger than the max holding capacity of an integer.</p>\n\n<pre><code>ZipInputStream zin = new ZipInputStream(getAssets().open(\n                            \"myFile.zip\"));\nZipEntry ze = null;\nAssetFileDescriptor mydisc = getAssets().openFd(\"myFile.zip\");\n//Size of the zip package\nlong size = mydisc.getLength();\nlong increment = 0;\ndialog.setMax((int) size);\nwhile ((ze = zin.getNextEntry()) != null) {\n     increment += (int) ze.getSize();\n     progessBar.setProgess((int)increment);\n     //do more stuff..\n}\n</code></pre>\n\n<p>Not the best solution but it works.</p>\n\n<p>I'm aware of the <code>ZipFile</code> API but it requires a string to be passed in but I am not sure what the path is to that directory or how to get it?</p>\n"},{"tags":[],"owner":{"account_id":3568147,"reputation":1152,"user_id":2979171,"accept_rate":88,"display_name":"Alireza Sharifi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576668350,"creation_date":1576662592,"answer_id":59389344,"question_id":6795389,"body_markdown":"this is my solution based on @davorb idea which is to show progress based on file size and not content of zip file.\r\n\r\n\r\n    import android.content.Context;\r\n    import android.util.Log;\r\n    \r\n    import java.io.BufferedOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.util.zip.ZipEntry;\r\n    import java.util.zip.ZipInputStream;\r\n    \r\n    public class ZipUtility {\r\n        private final String TAG = &quot;Decompress&quot;;\r\n        private ZipExtractionCallback zipExtractionCallback;\r\n    \r\n        public ZipUtility(ZipExtractionCallback zipExtractionCallback) {\r\n            this.zipExtractionCallback = zipExtractionCallback;\r\n        }\r\n    //\r\n    //    private void unzipFromAssets(Context context, String zipFile, String destination) {\r\n    //        try {\r\n    //            if (destination == null || destination.length() == 0)\r\n    //                destination = context.getFilesDir().getAbsolutePath();\r\n    //            new File(destination).delete();\r\n    //            InputStream stream = context.getAssets().open(zipFile);\r\n    //            unzip(stream, destination);\r\n    ////            SharedPreferenceHelper.Write(context,\r\n    ////                    SharedPreferenceConst.SharedPreferenceName,\r\n    ////                    SharedPreferenceConst.MapExtracted,\r\n    ////                    &quot;1&quot;);\r\n    //        } catch (IOException e) {\r\n    //            e.printStackTrace();\r\n    //        }\r\n    //    }\r\n    \r\n        private boolean deleteDirectory(String file) /*throws IOException, InterruptedException */ {\r\n    \r\n            try {\r\n                if (new File(file).exists()) {\r\n                    String deleteCommand = &quot;rm -rf &quot; + file/*.getAbsolutePath()*/;\r\n                    Runtime runtime = Runtime.getRuntime();\r\n                    Process process = runtime.exec(deleteCommand);\r\n                    process.waitFor();\r\n                    return true;\r\n                }\r\n            } catch (Exception ignore) {\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    \r\n        public void unzipFromPath(Context context, String zipFilePath, String destination) {\r\n    \r\n            try {\r\n                if (destination == null || destination.length() == 0)\r\n                    destination = context.getFilesDir().getAbsolutePath();\r\n                zipExtractionCallback.progress(0, &quot;حذف فایل های قدیمی...&quot;);\r\n                deleteDirectory(destination + &quot;html&quot;);\r\n                unzip(zipFilePath, destination);\r\n                zipExtractionCallback.progress(0, &quot;حذف فایل اضافی...&quot;);\r\n                deleteDirectory(zipFilePath);\r\n            } catch (IOException e) {\r\n                zipExtractionCallback.error(&quot;خطا هنگام عملیات استخراج : &quot; + e.getMessage());\r\n                e.printStackTrace();\r\n            }\r\n            zipExtractionCallback.finish();\r\n        }\r\n    //\r\n    //    public static void unzip(String zipFile, String location) {\r\n    //        try {\r\n    //            FileInputStream fin = new FileInputStream(zipFile);\r\n    //            unzip(fin, location);\r\n    //        } catch (FileNotFoundException e) {\r\n    //            e.printStackTrace();\r\n    //        }\r\n    //\r\n    //    }\r\n    \r\n        private void unzip(String zipFilePath, String destination) throws IOException {\r\n            long size = new File(zipFilePath).length();\r\n            long decompressedSize = 0;\r\n            InputStream stream = new FileInputStream(new File(zipFilePath));\r\n            dirChecker(destination, &quot;&quot;);\r\n    //        int entries = 0;\r\n            int total = 0;\r\n            ZipInputStream zin = new ZipInputStream(stream);\r\n    \r\n    //        while ((zin.getNextEntry()) != null) {\r\n    //            if (entries % 100 == 0)\r\n    //                zipExtractionCallback.progress(0, &quot;در حال خواندن محتویات:&quot; + entries + &quot; فایل&quot;);\r\n    //            entries++;\r\n    //        }\r\n            zin.close();\r\n            stream = new FileInputStream(new File(zipFilePath));\r\n            int p = 0;\r\n            long totalBytes = 0;\r\n            int BUFFER_SIZE = 1024 * 10;\r\n            byte[] buffer = new byte[BUFFER_SIZE];\r\n            try {\r\n                zin = new ZipInputStream(stream);\r\n                ZipEntry ze = null;\r\n                while ((ze = zin.getNextEntry()) != null) {\r\n                    decompressedSize += ze.getSize();\r\n                    //Log.v(TAG, &quot;Unzipping &quot; + ze.getName());\r\n                    if (ze.isDirectory()) {\r\n                        dirChecker(destination, ze.getName());\r\n                    } else {\r\n                        File f = new File(destination, ze.getName());\r\n                        if (!f.exists()) {\r\n                            boolean success = f.createNewFile();\r\n                            if (!success) {\r\n                                //Log.w(TAG, &quot;Failed to create file &quot; + f.getName());\r\n                                continue;\r\n                            }\r\n                            FileOutputStream fout = new FileOutputStream(f);\r\n                            //BufferedOutputStream out = new BufferedOutputStream(fout);\r\n                            int count;\r\n                            while ((count = zin.read(buffer)) != -1) {\r\n                                fout.write(buffer, 0, count);\r\n                                //out.write(buffer, 0, count);\r\n                                totalBytes += count;\r\n                            }\r\n                            zin.closeEntry();\r\n                            fout.close();\r\n                        }\r\n                    }\r\n    //                int progress = 1 + (total++ * 100 / entries);\r\n                    if (size &lt; decompressedSize)\r\n                        size = decompressedSize;\r\n                    int progress = (int) ( (totalBytes * 100L / size));\r\n                    if (p &lt; progress)\r\n                        zipExtractionCallback.progress(progress, &quot;در حال استخراج از حالت فشرده:&quot;);\r\n                    p = progress;\r\n                }\r\n                zin.close();\r\n            } catch (Exception e) {\r\n                zipExtractionCallback.error(&quot;خطا هنگام عملیات استخراج : &quot; + e.getMessage());\r\n                Log.e(TAG, &quot;unzip&quot;, e);\r\n            }\r\n        }\r\n    \r\n        private void dirChecker(String destination, String dir) {\r\n            File f = new File(destination, dir);\r\n    \r\n            if (!f.isDirectory()) {\r\n                boolean success = f.mkdirs();\r\n                if (!success) {\r\n                    Log.w(TAG, &quot;Failed to create folder &quot; + f.getName());\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n        public interface ZipExtractionCallback {\r\n    \r\n            void progress(int progress, String status);\r\n    \r\n            void finish();\r\n    \r\n            void error(String error);\r\n        }\r\n    \r\n    }\r\n\r\n\r\nExample of using it : \r\n\r\n\r\n\r\n\r\n    private void ExtractMap(String zipFilePath,Context context) {\r\n\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n    \r\n                ZipUtility zipUtility = new ZipUtility(new ZipUtility.ZipExtractionCallback() {\r\n                    @Override\r\n                    public void progress(int progress, String status) {\r\n                        ((UpdateActivity) context).runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                 //todo handle ui\r\n                            }\r\n                        });\r\n                    }\r\n    \r\n                    @Override\r\n                    public void finish() {\r\n    \r\n                        ((UpdateActivity) context).runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                //todo handle ui\r\n                            }\r\n                        });\r\n    \r\n                    }\r\n    \r\n                    @Override\r\n                    public void error(String error) {\r\n                        ((UpdateActivity) context).runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                               //todo handle ui\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n    \r\n                zipUtility.unzipFromPath(context,\r\n                        zipFilePath,\r\n                        context.getFilesDir().getAbsolutePath() + File.separator);\r\n    \r\n    \r\n            }\r\n        }).start();\r\n    }\r\n\r\n","title":"Android: Get Number of Files within Zip?","body":"<p>this is my solution based on @davorb idea which is to show progress based on file size and not content of zip file.</p>\n\n<pre><code>import android.content.Context;\nimport android.util.Log;\n\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipInputStream;\n\npublic class ZipUtility {\n    private final String TAG = \"Decompress\";\n    private ZipExtractionCallback zipExtractionCallback;\n\n    public ZipUtility(ZipExtractionCallback zipExtractionCallback) {\n        this.zipExtractionCallback = zipExtractionCallback;\n    }\n//\n//    private void unzipFromAssets(Context context, String zipFile, String destination) {\n//        try {\n//            if (destination == null || destination.length() == 0)\n//                destination = context.getFilesDir().getAbsolutePath();\n//            new File(destination).delete();\n//            InputStream stream = context.getAssets().open(zipFile);\n//            unzip(stream, destination);\n////            SharedPreferenceHelper.Write(context,\n////                    SharedPreferenceConst.SharedPreferenceName,\n////                    SharedPreferenceConst.MapExtracted,\n////                    \"1\");\n//        } catch (IOException e) {\n//            e.printStackTrace();\n//        }\n//    }\n\n    private boolean deleteDirectory(String file) /*throws IOException, InterruptedException */ {\n\n        try {\n            if (new File(file).exists()) {\n                String deleteCommand = \"rm -rf \" + file/*.getAbsolutePath()*/;\n                Runtime runtime = Runtime.getRuntime();\n                Process process = runtime.exec(deleteCommand);\n                process.waitFor();\n                return true;\n            }\n        } catch (Exception ignore) {\n        }\n\n        return false;\n    }\n\n    public void unzipFromPath(Context context, String zipFilePath, String destination) {\n\n        try {\n            if (destination == null || destination.length() == 0)\n                destination = context.getFilesDir().getAbsolutePath();\n            zipExtractionCallback.progress(0, \"حذف فایل های قدیمی...\");\n            deleteDirectory(destination + \"html\");\n            unzip(zipFilePath, destination);\n            zipExtractionCallback.progress(0, \"حذف فایل اضافی...\");\n            deleteDirectory(zipFilePath);\n        } catch (IOException e) {\n            zipExtractionCallback.error(\"خطا هنگام عملیات استخراج : \" + e.getMessage());\n            e.printStackTrace();\n        }\n        zipExtractionCallback.finish();\n    }\n//\n//    public static void unzip(String zipFile, String location) {\n//        try {\n//            FileInputStream fin = new FileInputStream(zipFile);\n//            unzip(fin, location);\n//        } catch (FileNotFoundException e) {\n//            e.printStackTrace();\n//        }\n//\n//    }\n\n    private void unzip(String zipFilePath, String destination) throws IOException {\n        long size = new File(zipFilePath).length();\n        long decompressedSize = 0;\n        InputStream stream = new FileInputStream(new File(zipFilePath));\n        dirChecker(destination, \"\");\n//        int entries = 0;\n        int total = 0;\n        ZipInputStream zin = new ZipInputStream(stream);\n\n//        while ((zin.getNextEntry()) != null) {\n//            if (entries % 100 == 0)\n//                zipExtractionCallback.progress(0, \"در حال خواندن محتویات:\" + entries + \" فایل\");\n//            entries++;\n//        }\n        zin.close();\n        stream = new FileInputStream(new File(zipFilePath));\n        int p = 0;\n        long totalBytes = 0;\n        int BUFFER_SIZE = 1024 * 10;\n        byte[] buffer = new byte[BUFFER_SIZE];\n        try {\n            zin = new ZipInputStream(stream);\n            ZipEntry ze = null;\n            while ((ze = zin.getNextEntry()) != null) {\n                decompressedSize += ze.getSize();\n                //Log.v(TAG, \"Unzipping \" + ze.getName());\n                if (ze.isDirectory()) {\n                    dirChecker(destination, ze.getName());\n                } else {\n                    File f = new File(destination, ze.getName());\n                    if (!f.exists()) {\n                        boolean success = f.createNewFile();\n                        if (!success) {\n                            //Log.w(TAG, \"Failed to create file \" + f.getName());\n                            continue;\n                        }\n                        FileOutputStream fout = new FileOutputStream(f);\n                        //BufferedOutputStream out = new BufferedOutputStream(fout);\n                        int count;\n                        while ((count = zin.read(buffer)) != -1) {\n                            fout.write(buffer, 0, count);\n                            //out.write(buffer, 0, count);\n                            totalBytes += count;\n                        }\n                        zin.closeEntry();\n                        fout.close();\n                    }\n                }\n//                int progress = 1 + (total++ * 100 / entries);\n                if (size &lt; decompressedSize)\n                    size = decompressedSize;\n                int progress = (int) ( (totalBytes * 100L / size));\n                if (p &lt; progress)\n                    zipExtractionCallback.progress(progress, \"در حال استخراج از حالت فشرده:\");\n                p = progress;\n            }\n            zin.close();\n        } catch (Exception e) {\n            zipExtractionCallback.error(\"خطا هنگام عملیات استخراج : \" + e.getMessage());\n            Log.e(TAG, \"unzip\", e);\n        }\n    }\n\n    private void dirChecker(String destination, String dir) {\n        File f = new File(destination, dir);\n\n        if (!f.isDirectory()) {\n            boolean success = f.mkdirs();\n            if (!success) {\n                Log.w(TAG, \"Failed to create folder \" + f.getName());\n            }\n        }\n    }\n\n\n    public interface ZipExtractionCallback {\n\n        void progress(int progress, String status);\n\n        void finish();\n\n        void error(String error);\n    }\n\n}\n</code></pre>\n\n<p>Example of using it : </p>\n\n<pre><code>private void ExtractMap(String zipFilePath,Context context) {\n\n    new Thread(new Runnable() {\n        @Override\n        public void run() {\n\n            ZipUtility zipUtility = new ZipUtility(new ZipUtility.ZipExtractionCallback() {\n                @Override\n                public void progress(int progress, String status) {\n                    ((UpdateActivity) context).runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                             //todo handle ui\n                        }\n                    });\n                }\n\n                @Override\n                public void finish() {\n\n                    ((UpdateActivity) context).runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            //todo handle ui\n                        }\n                    });\n\n                }\n\n                @Override\n                public void error(String error) {\n                    ((UpdateActivity) context).runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                           //todo handle ui\n                        }\n                    });\n                }\n            });\n\n            zipUtility.unzipFromPath(context,\n                    zipFilePath,\n                    context.getFilesDir().getAbsolutePath() + File.separator);\n\n\n        }\n    }).start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9143565,"reputation":781,"user_id":6800637,"display_name":"AllanRibas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697283237,"creation_date":1697283237,"answer_id":77292654,"question_id":6795389,"body_markdown":"for lingala.zip4j [Zip4j][1]\r\n\r\n    val fileDescriptorPath = fileDescriptor(zipUri)\r\n\tval zipFile = ZipFile(fileDescriptorPath, password)\r\n\tzipFile.use {\r\n\t\tzipSize =  it.fileHeaders.size\r\n\t}\r\n\tfileDescriptorPath?.delete()\r\n\r\n\tprivate fun fileDescriptor(uri: Uri?): File? {\r\n\t\tif (uri == null) return null\r\n\t\tvar input: FileInputStream? = null\r\n\t\tvar output: FileOutputStream? = null\r\n\t\tval filePath: String = File(context.cacheDir, &quot;tmp.zip&quot;).absolutePath\r\n\t   return try {\r\n\t\t   val parcelFileDescriptor: ParcelFileDescriptor = context.contentResolver.openFileDescriptor(uri, &quot;r&quot;)!!\r\n\t\t   val fileDescriptor = parcelFileDescriptor.fileDescriptor\r\n\t\t\tinput = FileInputStream(fileDescriptor)\r\n\t\t\toutput = FileOutputStream(filePath)\r\n\t\t\tvar read: Int\r\n\t\t\tval bytes = ByteArray(1024)\r\n\t\t\twhile (input.read(bytes).also { read = it } != -1) {\r\n\t\t\t\toutput.write(bytes, 0, read)\r\n\t\t\t}\r\n\t\t\tparcelFileDescriptor.close()\r\n\t\t\tFile(filePath)\r\n\t\t} catch (ignored: IOException) {\r\n\t\t\tLog.v(&quot;pathFileDescriptor&quot;, &quot;IOException: ${ignored.message}&quot;)\r\n\t\t   null\r\n\t\t} finally {\r\n\t\t\tinput?.close()\r\n\t\t\toutput?.close()\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://github.com/srikanth-lingala/zip4j","title":"Android: Get Number of Files within Zip?","body":"<p>for lingala.zip4j <a href=\"https://github.com/srikanth-lingala/zip4j\" rel=\"nofollow noreferrer\">Zip4j</a></p>\n<pre><code>val fileDescriptorPath = fileDescriptor(zipUri)\nval zipFile = ZipFile(fileDescriptorPath, password)\nzipFile.use {\n    zipSize =  it.fileHeaders.size\n}\nfileDescriptorPath?.delete()\n\nprivate fun fileDescriptor(uri: Uri?): File? {\n    if (uri == null) return null\n    var input: FileInputStream? = null\n    var output: FileOutputStream? = null\n    val filePath: String = File(context.cacheDir, &quot;tmp.zip&quot;).absolutePath\n   return try {\n       val parcelFileDescriptor: ParcelFileDescriptor = context.contentResolver.openFileDescriptor(uri, &quot;r&quot;)!!\n       val fileDescriptor = parcelFileDescriptor.fileDescriptor\n        input = FileInputStream(fileDescriptor)\n        output = FileOutputStream(filePath)\n        var read: Int\n        val bytes = ByteArray(1024)\n        while (input.read(bytes).also { read = it } != -1) {\n            output.write(bytes, 0, read)\n        }\n        parcelFileDescriptor.close()\n        File(filePath)\n    } catch (ignored: IOException) {\n        Log.v(&quot;pathFileDescriptor&quot;, &quot;IOException: ${ignored.message}&quot;)\n       null\n    } finally {\n        input?.close()\n        output?.close()\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":786295,"reputation":121,"user_id":858592,"display_name":"Jack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7746,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":5,"score":12,"last_activity_date":1697283237,"creation_date":1311364623,"question_id":6795389,"body_markdown":"I have a question that seems easy but I cannot seem to get it to work properly. \r\n\r\nI have a zip file within my &#39;assets&#39; folder that I need to unzip and I have a `ProgessBar` in which I want to display to the user how the progress is going.\r\n\r\nI have everything working but I want to set the `ProgessBar` max value to be the number of files within the zip file. The number of files within this folder will sometimes change so I want the `ProgessBar` to be relative to how many files are contained within the zip.\r\n\r\nI&#39;m using the `ZipInputStream`-API but does not seem there is a way to get the number of files within the zip file. The only way I can of think of is doing this:\r\n   \r\n\r\n       ZipInputStream zin = new ZipInputStream(getAssets().open(\r\n        \t\t\t\t\t\t\t&quot;myFile.zip&quot;));\r\n       int numFiles = 0;\r\n       int increment = 0;\r\n       while (zin.getNextEntry() != null) {\r\n         numFiles++;\r\n        }\r\n        \r\n        ZipEntry ze = null;\r\n        //Set the Max..value here..\r\n        progessBar.setMax(numFiles); \t\t\t\t\r\n        while ((ze = zin.getNextEntry()) != null) {\r\n           increment++;\r\n           progessBar.setProgress(increment);\r\n        }\r\n\r\nThis works but having two while loops seems a bit redundant which are basically doing the same thing.\r\n\r\nI know that there is a `ZipFile`-API which has a `size()`-method, but it requires a path to the file and since my file is located within the &#39;assets&#39; folder I am pretty sure the only way to read from this directory is by streaming.\r\n\r\nIs there a way for me to accomplish this? ","title":"Android: Get Number of Files within Zip?","body":"<p>I have a question that seems easy but I cannot seem to get it to work properly. </p>\n\n<p>I have a zip file within my 'assets' folder that I need to unzip and I have a <code>ProgessBar</code> in which I want to display to the user how the progress is going.</p>\n\n<p>I have everything working but I want to set the <code>ProgessBar</code> max value to be the number of files within the zip file. The number of files within this folder will sometimes change so I want the <code>ProgessBar</code> to be relative to how many files are contained within the zip.</p>\n\n<p>I'm using the <code>ZipInputStream</code>-API but does not seem there is a way to get the number of files within the zip file. The only way I can of think of is doing this:</p>\n\n<pre><code>   ZipInputStream zin = new ZipInputStream(getAssets().open(\n                                \"myFile.zip\"));\n   int numFiles = 0;\n   int increment = 0;\n   while (zin.getNextEntry() != null) {\n     numFiles++;\n    }\n\n    ZipEntry ze = null;\n    //Set the Max..value here..\n    progessBar.setMax(numFiles);                \n    while ((ze = zin.getNextEntry()) != null) {\n       increment++;\n       progessBar.setProgress(increment);\n    }\n</code></pre>\n\n<p>This works but having two while loops seems a bit redundant which are basically doing the same thing.</p>\n\n<p>I know that there is a <code>ZipFile</code>-API which has a <code>size()</code>-method, but it requires a path to the file and since my file is located within the 'assets' folder I am pretty sure the only way to read from this directory is by streaming.</p>\n\n<p>Is there a way for me to accomplish this? </p>\n"},{"tags":["java","spring-boot","gradle"],"answers":[{"comments":[{"owner":{"account_id":314650,"reputation":1571,"user_id":745828,"display_name":"nabster"},"score":2,"creation_date":1668110321,"post_id":46940044,"comment_id":131333232,"body_markdown":"`executable` is outdated.\n`Could not set unknown property &#39;executable&#39; for extension &#39;springBoot&#39; of type org.springframework.boot.gradle.dsl.SpringBootExtension.`","body":"<code>executable</code> is outdated. <code>Could not set unknown property &#39;executable&#39; for extension &#39;springBoot&#39; of type org.springframework.boot.gradle.dsl.SpringBootExtension.</code>"}],"tags":[],"owner":{"account_id":8768212,"reputation":303,"user_id":6555917,"display_name":"GaneshSreeju"},"comment_count":1,"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1531738837,"creation_date":1508957623,"answer_id":46940044,"question_id":46939455,"body_markdown":"In spring boot you can directly create executable jar file by \r\n\r\n    springBoot { \r\n        executable = true \r\n    }\r\n\r\nPlease try\r\n\r\n    jar{\r\n        baseName = &#39;myapp&#39; \r\n        version = &#39;version&#39;\r\n    }\r\n\r\nIt will create jar with name myapp-version.jar\r\nDo ./myapp-version.jar from command line.it will execute\r\n\r\nRefer following link for more info. [https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>In spring boot you can directly create executable jar file by </p>\n\n<pre><code>springBoot { \n    executable = true \n}\n</code></pre>\n\n<p>Please try</p>\n\n<pre><code>jar{\n    baseName = 'myapp' \n    version = 'version'\n}\n</code></pre>\n\n<p>It will create jar with name myapp-version.jar\nDo ./myapp-version.jar from command line.it will execute</p>\n\n<p>Refer following link for more info. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/deployment-install.html</a></p>\n"},{"comments":[{"owner":{"account_id":9105378,"reputation":1601,"user_id":6776032,"accept_rate":76,"display_name":"sva605"},"score":0,"creation_date":1508959734,"post_id":46940361,"comment_id":80828435,"body_markdown":"I didn&#39;t know I had to use &#39;gradle build&#39; and was trying &#39;gradle jar&#39; instead. Now it works","body":"I didn&#39;t know I had to use &#39;gradle build&#39; and was trying &#39;gradle jar&#39; instead. Now it works"},{"owner":{"account_id":10382309,"reputation":88,"user_id":7656623,"display_name":"Somnath Singh"},"score":0,"creation_date":1601446197,"post_id":46940361,"comment_id":113406645,"body_markdown":"how to provide spring profile with gradle build command","body":"how to provide spring profile with gradle build command"}],"tags":[],"owner":{"account_id":7521034,"reputation":325,"user_id":5712900,"display_name":"moritz.krischke"},"comment_count":2,"down_vote_count":1,"up_vote_count":26,"is_accepted":true,"score":25,"last_activity_date":1508958726,"creation_date":1508958726,"answer_id":46940361,"question_id":46939455,"body_markdown":"I created a project with all the sources you provided. Running &quot;gradle build&quot; from terminal, switching to /build/libs and then running &quot;java -jar artifactname&quot; works just fine.\r\n\r\nHave you tried to clean and recompile? Which Version of Gradle are you using?","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>I created a project with all the sources you provided. Running \"gradle build\" from terminal, switching to /build/libs and then running \"java -jar artifactname\" works just fine.</p>\n\n<p>Have you tried to clean and recompile? Which Version of Gradle are you using?</p>\n"},{"comments":[{"owner":{"account_id":4569434,"reputation":281,"user_id":3709525,"display_name":"user3709525"},"score":0,"creation_date":1596828640,"post_id":52404325,"comment_id":111946811,"body_markdown":"Excellent! Thank you. i was trying out with 5.6.4(Oracle JDK 1.8) along with Lombok; and adding spring boot {} was creating an issue..But specifying bootJar  is working.","body":"Excellent! Thank you. i was trying out with 5.6.4(Oracle JDK 1.8) along with Lombok; and adding spring boot {} was creating an issue..But specifying bootJar  is working."},{"owner":{"account_id":2411246,"reputation":4423,"user_id":2106260,"accept_rate":25,"display_name":"Rajesh"},"score":0,"creation_date":1604942872,"post_id":52404325,"comment_id":114495384,"body_markdown":"Can you brief me about the command you are using to launch the jar file","body":"Can you brief me about the command you are using to launch the jar file"},{"owner":{"account_id":25798468,"reputation":74,"user_id":19541281,"display_name":"sbrajchuk"},"score":0,"creation_date":1700756955,"post_id":52404325,"comment_id":136696011,"body_markdown":"[link](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#building-executable-jars-and-wars)","body":"<a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#building-executable-jars-and-wars\" rel=\"nofollow noreferrer\">link</a>"}],"tags":[],"owner":{"account_id":2411246,"reputation":4423,"user_id":2106260,"accept_rate":25,"display_name":"Rajesh"},"comment_count":3,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1537354750,"creation_date":1537354750,"answer_id":52404325,"question_id":46939455,"body_markdown":"In Boot 2.x, the bootJar and bootWar tasks are responsible for packaging the application.\r\n\r\nThe bootJar task is responsible for creating the executable jar file. This is created automatically once the java plugin is applied.\r\n\r\nIn case the executable jar/war file is not generated run the below gradle task manually.\r\n\r\n    $./gradlew bootJar\r\n\r\nSimilarly, bootWar generates an executable war file and gets created once the war plugin is applied.\r\n\r\nWe can execute the bootWar task using:\r\n\r\n    $./gradlew bootWar\r\n\r\nNote that for Spring Boot 2.x, we need to use Gradle 4.0 or later.\r\n\r\n","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>In Boot 2.x, the bootJar and bootWar tasks are responsible for packaging the application.</p>\n\n<p>The bootJar task is responsible for creating the executable jar file. This is created automatically once the java plugin is applied.</p>\n\n<p>In case the executable jar/war file is not generated run the below gradle task manually.</p>\n\n<pre><code>$./gradlew bootJar\n</code></pre>\n\n<p>Similarly, bootWar generates an executable war file and gets created once the war plugin is applied.</p>\n\n<p>We can execute the bootWar task using:</p>\n\n<pre><code>$./gradlew bootWar\n</code></pre>\n\n<p>Note that for Spring Boot 2.x, we need to use Gradle 4.0 or later.</p>\n"},{"tags":[],"owner":{"account_id":8473574,"reputation":3686,"user_id":6355451,"display_name":"Santosh Kumar Arjunan"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1555431452,"creation_date":1555431452,"answer_id":55712572,"question_id":46939455,"body_markdown":"I just recently tried a Spring boot application with 2.1.4.Release with Gradle build.\r\n\r\nI ran the following command from the &lt;project&gt; directory in Windows CMD.\r\n\r\n    gradlew clean build\r\n\r\n(upon required JDK8 installed in the system), I was able to see the JAR generated under,\r\n\r\n    &lt;project-directory&gt;/build/libs/&lt;project-name-version.jar&gt;\r\n\r\nHope this helps though older question.\r\n\r\nReference:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O03ou.png","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>I just recently tried a Spring boot application with 2.1.4.Release with Gradle build.</p>\n\n<p>I ran the following command from the  directory in Windows CMD.</p>\n\n<pre><code>gradlew clean build\n</code></pre>\n\n<p>(upon required JDK8 installed in the system), I was able to see the JAR generated under,</p>\n\n<pre><code>&lt;project-directory&gt;/build/libs/&lt;project-name-version.jar&gt;\n</code></pre>\n\n<p>Hope this helps though older question.</p>\n\n<p>Reference:</p>\n\n<p><a href=\"https://i.stack.imgur.com/O03ou.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/O03ou.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1664709,"reputation":4045,"user_id":2397613,"accept_rate":86,"display_name":"ton"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607030180,"creation_date":1607030180,"answer_id":65134271,"question_id":46939455,"body_markdown":"My two cents.\r\n\r\nWhen using spring-boot if you want to customize the `MANIFEST.MF` file, you need to set the `bootJar` task, it won&#39;t work on the default `jar` task.\r\n```\r\nbootJar {\r\n    manifest {\r\n\tattributes &#39;Start-Class&#39;: &#39;com.baeldung.DemoApplication&#39;\r\n    }\r\n}\r\n```\r\n\r\n- https://www.baeldung.com/spring-boot-main-class","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>My two cents.</p>\n<p>When using spring-boot if you want to customize the <code>MANIFEST.MF</code> file, you need to set the <code>bootJar</code> task, it won't work on the default <code>jar</code> task.</p>\n<pre><code>bootJar {\n    manifest {\n    attributes 'Start-Class': 'com.baeldung.DemoApplication'\n    }\n}\n</code></pre>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-boot-main-class\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-main-class</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3227039,"reputation":551,"user_id":2723148,"display_name":"Tarkan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618599096,"creation_date":1618599096,"answer_id":67130713,"question_id":46939455,"body_markdown":"If you&#39;re trying to make your .jar file executable, for use such as in a systemd service. You&#39;ll have to edit the `bootJar` task and enable `launchScript`.\r\n\r\n`build.gradle`\r\n\r\n```groovy\r\nbootJar {\r\n    launchScript()\r\n}\r\n```\r\n\r\nor with Gradle Kotlin DSL `build.gradle.kts`\r\n```kts\r\ntasks {\r\n    bootJar {\r\n        launchScript()\r\n    }\r\n}\r\n```\r\n\r\nYou should now be able to run your project&#39;s .jar file as an executable.","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>If you're trying to make your .jar file executable, for use such as in a systemd service. You'll have to edit the <code>bootJar</code> task and enable <code>launchScript</code>.</p>\n<p><code>build.gradle</code></p>\n<pre><code>bootJar {\n    launchScript()\n}\n</code></pre>\n<p>or with Gradle Kotlin DSL <code>build.gradle.kts</code></p>\n<pre><code>tasks {\n    bootJar {\n        launchScript()\n    }\n}\n</code></pre>\n<p>You should now be able to run your project's .jar file as an executable.</p>\n"},{"tags":[],"owner":{"account_id":1502229,"reputation":2973,"user_id":1406510,"accept_rate":64,"display_name":"nanosoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697281881,"creation_date":1697281881,"answer_id":77292586,"question_id":46939455,"body_markdown":"For me clicking on &quot;jar&quot; under gradle tasks in intellij created jar under./build/libs/\r\n\r\n[![Click jar not bootJar][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IEpsl.png","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>For me clicking on &quot;jar&quot; under gradle tasks in intellij created jar under./build/libs/</p>\n<p><a href=\"https://i.stack.imgur.com/IEpsl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IEpsl.png\" alt=\"Click jar not bootJar\" /></a></p>\n"}],"owner":{"account_id":9105378,"reputation":1601,"user_id":6776032,"accept_rate":76,"display_name":"sva605"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108437,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":46940361,"answer_count":7,"score":46,"last_activity_date":1697281881,"creation_date":1508955444,"question_id":46939455,"body_markdown":"I&#39;m trying to build an executable jar in Spring Boot + Gradle project, but for now nothing works. Here is the simplest possible structure. Possibly, something is missing in Gradle configuration. \r\n\r\nGradle:\r\n\r\n    buildscript {\r\n        ext {\r\n            springBootVersion = &#39;1.5.8.RELEASE&#39;\r\n        }\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        }\r\n    }\r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = 1.8\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    jar {\r\n        manifest {\r\n            attributes &#39;Main-Class&#39;: &#39;com.example.demo.DemoApplication&#39;\r\n        }\r\n        from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\r\n    }\r\n    \r\n    dependencies {\r\n        compile(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    }\r\n\r\nMain config file:\r\n\r\n    @RestController\r\n    @SpringBootApplication\r\n    public class DemoApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(DemoApplication.class, args);\r\n        }\r\n    \r\n        @GetMapping(value = &quot;/&quot;)\r\n        public String index() {\r\n            return &quot;index&quot;;\r\n        }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhen I ran the jar file like java -jar 1.jar, I got this exception:\r\n\r\n    [main] ERROR org.springframework.boot.SpringApplication - Applicati\r\n    on startup failed\r\n    org.springframework.beans.factory.BeanDefinitionStoreException: Failed to proces\r\n    s import candidates for configuration class [com.example.demo.DemoApplication];\r\n    nested exception is java.lang.IllegalArgumentException: No auto configuration cl\r\n    asses found in META-INF/spring.factories. If you are using a custom packaging, m\r\n    ake sure that file is correct.\r\n            at org.springframework.context.annotation.ConfigurationClassParser.proce\r\n    ssDeferredImportSelectors(ConfigurationClassParser.java:556)\r\n            at org.springframework.context.annotation.ConfigurationClassParser.parse\r\n    (ConfigurationClassParser.java:185)\r\n            at org.springframework.context.annotation.ConfigurationClassPostProcesso\r\n    r.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:308)\r\n            at org.springframework.context.annotation.ConfigurationClassPostProcesso\r\n    r.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:228)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate\r\n    .invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.ja\r\n    va:272)\r\n            at org.springframework.context.support.PostProcessorRegistrationDelegate\r\n    .invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:92)\r\n            at org.springframework.context.support.AbstractApplicationContext.invoke\r\n    BeanFactoryPostProcessors(AbstractApplicationContext.java:687)\r\n            at org.springframework.context.support.AbstractApplicationContext.refres\r\n    h(AbstractApplicationContext.java:525)\r\n            at org.springframework.boot.context.embedded.EmbeddedWebApplicationConte\r\n    xt.refresh(EmbeddedWebApplicationContext.java:122)\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.\r\n    java:693)\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringAppli\r\n    cation.java:360)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java\r\n    :303)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java\r\n    :1118)\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java\r\n    :1107)\r\n            at com.example.demo.DemoApplication.main(DemoApplication.java:13)\r\n    Caused by: java.lang.IllegalArgumentException: No auto configuration classes fou\r\n    nd in META-INF/spring.factories. If you are using a custom packaging, make sure\r\n    that file is correct.\r\n            at org.springframework.util.Assert.notEmpty(Assert.java:277)\r\n            at org.springframework.boot.autoconfigure.AutoConfigurationImportSelecto\r\n    r.getCandidateConfigurations(AutoConfigurationImportSelector.java:153)\r\n            at org.springframework.boot.autoconfigure.AutoConfigurationImportSelecto\r\n    r.selectImports(AutoConfigurationImportSelector.java:95)\r\n            at org.springframework.context.annotation.ConfigurationClassParser.proce\r\n    ssDeferredImportSelectors(ConfigurationClassParser.java:547)\r\n            ... 14 common frames omitted\r\n\r\n\r\nWhat might be wrong?\r\n\r\n  [1]: https://i.stack.imgur.com/KnSer.png","title":"Spring Boot + Gradle: how to build executable jar","body":"<p>I'm trying to build an executable jar in Spring Boot + Gradle project, but for now nothing works. Here is the simplest possible structure. Possibly, something is missing in Gradle configuration. </p>\n\n<p>Gradle:</p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '1.5.8.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\napply plugin: 'java'\napply plugin: 'org.springframework.boot'\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\njar {\n    manifest {\n        attributes 'Main-Class': 'com.example.demo.DemoApplication'\n    }\n    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web')\n}\n</code></pre>\n\n<p>Main config file:</p>\n\n<pre><code>@RestController\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @GetMapping(value = \"/\")\n    public String index() {\n        return \"index\";\n    }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/KnSer.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KnSer.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I ran the jar file like java -jar 1.jar, I got this exception:</p>\n\n<pre><code>[main] ERROR org.springframework.boot.SpringApplication - Applicati\non startup failed\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to proces\ns import candidates for configuration class [com.example.demo.DemoApplication];\nnested exception is java.lang.IllegalArgumentException: No auto configuration cl\nasses found in META-INF/spring.factories. If you are using a custom packaging, m\nake sure that file is correct.\n        at org.springframework.context.annotation.ConfigurationClassParser.proce\nssDeferredImportSelectors(ConfigurationClassParser.java:556)\n        at org.springframework.context.annotation.ConfigurationClassParser.parse\n(ConfigurationClassParser.java:185)\n        at org.springframework.context.annotation.ConfigurationClassPostProcesso\nr.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:308)\n        at org.springframework.context.annotation.ConfigurationClassPostProcesso\nr.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:228)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate\n.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.ja\nva:272)\n        at org.springframework.context.support.PostProcessorRegistrationDelegate\n.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:92)\n        at org.springframework.context.support.AbstractApplicationContext.invoke\nBeanFactoryPostProcessors(AbstractApplicationContext.java:687)\n        at org.springframework.context.support.AbstractApplicationContext.refres\nh(AbstractApplicationContext.java:525)\n        at org.springframework.boot.context.embedded.EmbeddedWebApplicationConte\nxt.refresh(EmbeddedWebApplicationContext.java:122)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.\njava:693)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringAppli\ncation.java:360)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java\n:303)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java\n:1118)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java\n:1107)\n        at com.example.demo.DemoApplication.main(DemoApplication.java:13)\nCaused by: java.lang.IllegalArgumentException: No auto configuration classes fou\nnd in META-INF/spring.factories. If you are using a custom packaging, make sure\nthat file is correct.\n        at org.springframework.util.Assert.notEmpty(Assert.java:277)\n        at org.springframework.boot.autoconfigure.AutoConfigurationImportSelecto\nr.getCandidateConfigurations(AutoConfigurationImportSelector.java:153)\n        at org.springframework.boot.autoconfigure.AutoConfigurationImportSelecto\nr.selectImports(AutoConfigurationImportSelector.java:95)\n        at org.springframework.context.annotation.ConfigurationClassParser.proce\nssDeferredImportSelectors(ConfigurationClassParser.java:547)\n        ... 14 common frames omitted\n</code></pre>\n\n<p>What might be wrong?</p>\n"},{"tags":["android","java"],"comments":[{"owner":{"account_id":1058123,"reputation":541,"user_id":1060378,"accept_rate":90,"display_name":"schroeder"},"score":2,"creation_date":1697213987,"post_id":77290535,"comment_id":136258743,"body_markdown":"This sounds like a programming problem, not a security issue","body":"This sounds like a programming problem, not a security issue"},{"owner":{"account_id":2198623,"reputation":2127,"user_id":1943661,"accept_rate":69,"display_name":"Jose Ospina"},"score":0,"creation_date":1697214736,"post_id":77290535,"comment_id":136258744,"body_markdown":"As long as there is a solution to the programming question. Yes. My concern is that, maybe, Android security scheme purposely prevents this type of use of the KeyStore.","body":"As long as there is a solution to the programming question. Yes. My concern is that, maybe, Android security scheme purposely prevents this type of use of the KeyStore."}],"answers":[{"tags":[],"owner":{"account_id":2198623,"reputation":2127,"user_id":1943661,"accept_rate":69,"display_name":"Jose Ospina"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697281345,"creation_date":1697215620,"answer_id":77290536,"question_id":77290535,"body_markdown":"Found the answer [here](https://levelup.gitconnected.com/doing-aes-gcm-in-android-adventures-in-the-field-72617401269d) \r\n\r\nAndroid does support this flow, it&#39;s just not the default configuration. \r\n\r\nYou can change the `KeyGenParameterSpec.Builder` with `.setRandomizedEncryptionRequired(false)` to allow for it:\r\n\r\n\r\n```\r\nkeyGenerator.init(\r\n   KeyGenParameterSpec.Builder(\r\n      &quot;XMART&quot;,\r\n      KeyProperties.PURPOSE_ENCRYPT or KeyProperties.PURPOSE_DECRYPT\r\n   )\r\n      .setBlockModes(KeyProperties.BLOCK_MODE_CBC)\r\n      .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_PKCS7)\r\n      .setRandomizedEncryptionRequired(false)\r\n      .build()\r\n)\r\n```\r\n\r\n","title":"Deterministic App Secret using Android KeyStore","body":"<p>Found the answer <a href=\"https://levelup.gitconnected.com/doing-aes-gcm-in-android-adventures-in-the-field-72617401269d\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Android does support this flow, it's just not the default configuration.</p>\n<p>You can change the <code>KeyGenParameterSpec.Builder</code> with <code>.setRandomizedEncryptionRequired(false)</code> to allow for it:</p>\n<pre><code>keyGenerator.init(\n   KeyGenParameterSpec.Builder(\n      &quot;XMART&quot;,\n      KeyProperties.PURPOSE_ENCRYPT or KeyProperties.PURPOSE_DECRYPT\n   )\n      .setBlockModes(KeyProperties.BLOCK_MODE_CBC)\n      .setEncryptionPaddings(KeyProperties.ENCRYPTION_PADDING_PKCS7)\n      .setRandomizedEncryptionRequired(false)\n      .build()\n)\n</code></pre>\n"}],"owner":{"account_id":2198623,"reputation":2127,"user_id":1943661,"accept_rate":69,"display_name":"Jose Ospina"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697281345,"creation_date":1697212798,"question_id":77290535,"body_markdown":"**What I want**\r\n\r\nStore a deterministic secret key in the device that only my app can access. No need to back it up. Losing the phone, losing the key, is ok.\r\n\r\n**How I&#39;m trying to do it** \r\n\r\nI create an AES key in the KeyStore, use it to encrypt a known message (say the text &quot;MyAppName&quot;) and that will be my private key. I can then use this private key to sign stuff in my app.\r\n\r\n**The problem**\r\n\r\nThe encrypted value is always different, and so my private key is not deterministic, and android security won&#39;t let me set the IV to my own value to make it deterministic.\r\n\r\nI get \r\n```\r\njava.security.InvalidAlgorithmParameterException: Caller-provided IV not permitted\r\n```\r\n\r\n---\r\n\r\nThe alternative EC algorithm is non-deterministic by default. So I&#39;m starting to wonder if there is a way around this.","title":"Deterministic App Secret using Android KeyStore","body":"<p><strong>What I want</strong></p>\n<p>Store a deterministic secret key in the device that only my app can access. No need to back it up. Losing the phone, losing the key, is ok.</p>\n<p><strong>How I'm trying to do it</strong></p>\n<p>I create an AES key in the KeyStore, use it to encrypt a known message (say the text &quot;MyAppName&quot;) and that will be my private key. I can then use this private key to sign stuff in my app.</p>\n<p><strong>The problem</strong></p>\n<p>The encrypted value is always different, and so my private key is not deterministic, and android security won't let me set the IV to my own value to make it deterministic.</p>\n<p>I get</p>\n<pre><code>java.security.InvalidAlgorithmParameterException: Caller-provided IV not permitted\n</code></pre>\n<hr />\n<p>The alternative EC algorithm is non-deterministic by default. So I'm starting to wonder if there is a way around this.</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1697258955,"post_id":77291653,"comment_id":136260586,"body_markdown":"And do you have a question?","body":"And do you have a question?"},{"owner":{"account_id":17069028,"reputation":94,"user_id":12350325,"display_name":"bahman karami"},"score":0,"creation_date":1697261679,"post_id":77291653,"comment_id":136260700,"body_markdown":"You are checking if the list is empty, but you are not breaking the loop when it becomes empty. This means that you are trying to access the first element of an empty list.","body":"You are checking if the list is empty, but you are not breaking the loop when it becomes empty. This means that you are trying to access the first element of an empty list."}],"answers":[{"tags":[],"owner":{"account_id":29231004,"reputation":51,"user_id":22394700,"display_name":"Sky64Redstone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697262618,"creation_date":1697262618,"answer_id":77291767,"question_id":77291653,"body_markdown":"So, the problem ist, that your list is only 5 numbers long and you do the empty check only before the first Players turn.\r\n\r\nIn the last run of the while loop, the first player gets the last number and without a check, the second player asks for his number, but now the list is empty...\r\n\r\nTo fix this, you have to put a empty check before the second player gets his number:\r\n\r\n    System.out.println(list);\r\n    if (list.isEmpty()) {\r\n        break; // if the list is now empty break the loop\r\n    }\r\n    secondScore = list.get(i); // if the list was empty we can now be sure that the code interpret won&#39;t reach this here","title":"Deleting first index in list until it&#39;s empty","body":"<p>So, the problem ist, that your list is only 5 numbers long and you do the empty check only before the first Players turn.</p>\n<p>In the last run of the while loop, the first player gets the last number and without a check, the second player asks for his number, but now the list is empty...</p>\n<p>To fix this, you have to put a empty check before the second player gets his number:</p>\n<pre><code>System.out.println(list);\nif (list.isEmpty()) {\n    break; // if the list is now empty break the loop\n}\nsecondScore = list.get(i); // if the list was empty we can now be sure that the code interpret won't reach this here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29665612,"reputation":9,"user_id":22736223,"display_name":"Aswin Prasad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697263277,"creation_date":1697263277,"answer_id":77291797,"question_id":77291653,"body_markdown":"I&#39;ve found a solution,\r\n\r\n    import java.util.*;\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        \r\n        list.add(4);\r\n        list.add(2);\r\n        list.add(1);\r\n        list.add(4);\r\n        list.add(3);\r\n\t\t/*\r\n\t\tlist.add(6);\r\n\t\t\r\n\t\tif there are even no. of list items present then the loop get \r\n\t\tfinished before getting error, because having even values and each loop deletes 2 value is proportional.\r\n\t\t\r\n\t\t*/\r\n        \r\n        int firstScore = 0;\r\n        int secondScore = 0;\r\n        \r\n        int i = 0;\r\n        \r\n        int firstPlayer = 0;\r\n        int secondPlayer = 0;\r\n        \r\n        while (!list.isEmpty()) {\r\n            System.out.println(list);\r\n            firstScore = list.get(i);\r\n            list.remove(i);\r\n\r\n            System.out.println(firstScore);\r\n            \r\n            if (firstScore % 2 == 0) {\r\n                Collections.reverse(list);\r\n            }\r\n            \r\n            firstPlayer = firstScore + firstPlayer;\r\n            \r\n\t\t\tif(!list.isEmpty()) {\t//your code gets error because, try to access value in an empty list.\r\n\t\t\t\tSystem.out.println(list);\r\n\t\t\t\tsecondScore = list.get(i);\r\n\t\t\t\tlist.remove(i);\r\n\r\n\t\t\t\tSystem.out.println(secondScore);\r\n\t\t\t\t\r\n\t\t\t\tif (secondScore % 2 == 0) {\r\n\t\t\t\t\tCollections.reverse(list);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsecondPlayer = secondScore + secondPlayer;\r\n\t\t\t}\r\n        }\r\n        \r\n        System.out.println(firstPlayer - secondPlayer);\r\n    }\r\n\r\nFrom above code, the if condition added for second player is need to be checked because if the list contains odd number of values then the last element deleted by the first player then second cannot access any value.\r\n\r\nThank you..","title":"Deleting first index in list until it&#39;s empty","body":"<p>I've found a solution,</p>\n<pre><code>import java.util.*;\n\npublic static void main(String[] args) {\n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    \n    list.add(4);\n    list.add(2);\n    list.add(1);\n    list.add(4);\n    list.add(3);\n    /*\n    list.add(6);\n    \n    if there are even no. of list items present then the loop get \n    finished before getting error, because having even values and each loop deletes 2 value is proportional.\n    \n    */\n    \n    int firstScore = 0;\n    int secondScore = 0;\n    \n    int i = 0;\n    \n    int firstPlayer = 0;\n    int secondPlayer = 0;\n    \n    while (!list.isEmpty()) {\n        System.out.println(list);\n        firstScore = list.get(i);\n        list.remove(i);\n\n        System.out.println(firstScore);\n        \n        if (firstScore % 2 == 0) {\n            Collections.reverse(list);\n        }\n        \n        firstPlayer = firstScore + firstPlayer;\n        \n        if(!list.isEmpty()) {   //your code gets error because, try to access value in an empty list.\n            System.out.println(list);\n            secondScore = list.get(i);\n            list.remove(i);\n\n            System.out.println(secondScore);\n            \n            if (secondScore % 2 == 0) {\n                Collections.reverse(list);\n            }\n            \n            secondPlayer = secondScore + secondPlayer;\n        }\n    }\n    \n    System.out.println(firstPlayer - secondPlayer);\n}\n</code></pre>\n<p>From above code, the if condition added for second player is need to be checked because if the list contains odd number of values then the last element deleted by the first player then second cannot access any value.</p>\n<p>Thank you..</p>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697277427,"creation_date":1697277427,"answer_id":77292375,"question_id":77291653,"body_markdown":"In Java 21 and up you can easily do this using the methods inherited from `SequencedCollection`:\r\n```java\r\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n\r\nlist.add(4);\r\nlist.add(2);\r\nlist.add(1);\r\nlist.add(4);\r\nlist.add(3);\r\n\r\nint firstScore = 0;\r\nint secondScore = 0;\r\n\r\nint firstPlayer = 0;\r\nint secondPlayer = 0;\r\n\r\nwhile (!list.isEmpty()) {\r\n    System.out.println(list);\r\n    firstScore = list.removeFirst();\r\n\r\n    System.out.println(firstScore);\r\n\r\n    if (firstScore % 2 == 0) {\r\n        list = list.reversed();\r\n    }\r\n\r\n    firstPlayer = firstScore + firstPlayer;\r\n\r\n    if (!list.isEmpty()) {\r\n        System.out.println(list);\r\n        secondScore = list.removeFirst();\r\n\r\n        System.out.println(secondScore);\r\n\r\n        if (secondScore % 2 == 0) {\r\n            list = list.reversed();\r\n        }\r\n\r\n        secondPlayer = secondScore + secondPlayer;\r\n    }\r\n}\r\n\r\nSystem.out.println(firstPlayer - secondPlayer);\r\n```\r\nNote that I had to include the second empty check inside the loop, as observed by several others.","title":"Deleting first index in list until it&#39;s empty","body":"<p>In Java 21 and up you can easily do this using the methods inherited from <code>SequencedCollection</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n\nlist.add(4);\nlist.add(2);\nlist.add(1);\nlist.add(4);\nlist.add(3);\n\nint firstScore = 0;\nint secondScore = 0;\n\nint firstPlayer = 0;\nint secondPlayer = 0;\n\nwhile (!list.isEmpty()) {\n    System.out.println(list);\n    firstScore = list.removeFirst();\n\n    System.out.println(firstScore);\n\n    if (firstScore % 2 == 0) {\n        list = list.reversed();\n    }\n\n    firstPlayer = firstScore + firstPlayer;\n\n    if (!list.isEmpty()) {\n        System.out.println(list);\n        secondScore = list.removeFirst();\n\n        System.out.println(secondScore);\n\n        if (secondScore % 2 == 0) {\n            list = list.reversed();\n        }\n\n        secondPlayer = secondScore + secondPlayer;\n    }\n}\n\nSystem.out.println(firstPlayer - secondPlayer);\n</code></pre>\n<p>Note that I had to include the second empty check inside the loop, as observed by several others.</p>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697281006,"creation_date":1697281006,"answer_id":77292556,"question_id":77291653,"body_markdown":"It is usually best to process only one element of a [collection][1] in a loop. In the [`while`] loop in your code, you are processing two elements &amp;ndash; which is the cause of your problem as explained in the other answers.\r\n\r\nIn the below code, the [`while`] loop processes a single element and uses a &quot;flag&quot;, i.e. a boolean variable, to determine whose turn it is.\r\n\r\nNote that the below code requires minimum Java 21 as it uses [sequenced collections][2] which were first added in JDK 21.\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class Players2 {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(4, 2, 1, 4, 3));\r\n        int score1 = 0;\r\n        int score2 = 0;\r\n        System.out.println(&quot;list: &quot; + list);\r\n        System.out.println(&quot;score1 = &quot; + score1);\r\n        System.out.println(&quot;score2 = &quot; + score2);\r\n        boolean player1 = true;\r\n        while (!list.isEmpty()) {\r\n            int score = list.removeFirst();\r\n            if (player1) {\r\n                player1 = false;\r\n                score1 += score;\r\n            }\r\n            else {\r\n                player1 = true;\r\n                score2 += score;\r\n            }\r\n            if (score % 2 == 0) {\r\n                Collections.reverse(list);\r\n            }\r\n            System.out.println(&quot;list: &quot; + list);\r\n            System.out.println(&quot;score1 = &quot; + score1);\r\n            System.out.println(&quot;score2 = &quot; + score2);\r\n        }\r\n    }\r\n}\r\n```\r\nHere is the output when I run the above code:\r\n```none\r\nlist: [4, 2, 1, 4, 3]\r\nscore1 = 0\r\nscore2 = 0\r\nlist: [3, 4, 1, 2]\r\nscore1 = 4\r\nscore2 = 0\r\nlist: [4, 1, 2]\r\nscore1 = 4\r\nscore2 = 3\r\nlist: [2, 1]\r\nscore1 = 8\r\nscore2 = 3\r\nlist: [1]\r\nscore1 = 8\r\nscore2 = 5\r\nlist: []\r\nscore1 = 9\r\nscore2 = 5\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/collections/index.html\r\n  [2]: https://openjdk.org/jeps/431","title":"Deleting first index in list until it&#39;s empty","body":"<p>It is usually best to process only one element of a <a href=\"https://docs.oracle.com/javase/tutorial/collections/index.html\" rel=\"nofollow noreferrer\">collection</a> in a loop. In the [<code>while</code>] loop in your code, you are processing two elements – which is the cause of your problem as explained in the other answers.</p>\n<p>In the below code, the [<code>while</code>] loop processes a single element and uses a &quot;flag&quot;, i.e. a boolean variable, to determine whose turn it is.</p>\n<p>Note that the below code requires minimum Java 21 as it uses <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">sequenced collections</a> which were first added in JDK 21.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Players2 {\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(4, 2, 1, 4, 3));\n        int score1 = 0;\n        int score2 = 0;\n        System.out.println(&quot;list: &quot; + list);\n        System.out.println(&quot;score1 = &quot; + score1);\n        System.out.println(&quot;score2 = &quot; + score2);\n        boolean player1 = true;\n        while (!list.isEmpty()) {\n            int score = list.removeFirst();\n            if (player1) {\n                player1 = false;\n                score1 += score;\n            }\n            else {\n                player1 = true;\n                score2 += score;\n            }\n            if (score % 2 == 0) {\n                Collections.reverse(list);\n            }\n            System.out.println(&quot;list: &quot; + list);\n            System.out.println(&quot;score1 = &quot; + score1);\n            System.out.println(&quot;score2 = &quot; + score2);\n        }\n    }\n}\n</code></pre>\n<p>Here is the output when I run the above code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>list: [4, 2, 1, 4, 3]\nscore1 = 0\nscore2 = 0\nlist: [3, 4, 1, 2]\nscore1 = 4\nscore2 = 0\nlist: [4, 1, 2]\nscore1 = 4\nscore2 = 3\nlist: [2, 1]\nscore1 = 8\nscore2 = 3\nlist: [1]\nscore1 = 8\nscore2 = 5\nlist: []\nscore1 = 9\nscore2 = 5\n</code></pre>\n"}],"owner":{"account_id":8881040,"reputation":15,"user_id":6631153,"display_name":"patdybalski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291767,"answer_count":4,"score":0,"last_activity_date":1697281006,"creation_date":1697258792,"question_id":77291653,"body_markdown":"firstPlayer and secondPlayer alternate on getting score from the first index of the list.\r\n\r\nfirstPlayer gets index 0, then removes that value. if the value is an even number, the remaining list gets reverse.\r\n\r\nThen, secondPlayer does the same thing. But somehow getting an error on this part.\r\n\r\nEvery time each player gets a value, it&#39;s concatenating.\r\n\r\nIn the end, the difference of first and second player is calculated.\r\n\r\nThis is what I get:\r\n[![enter image description here][1]][1]\r\n\r\n```\r\nimport java.util.*;\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        \r\n        list.add(4);\r\n        list.add(2);\r\n        list.add(1);\r\n        list.add(4);\r\n        list.add(3);\r\n        \r\n        int firstScore = 0;\r\n        int secondScore = 0;\r\n        \r\n        int i = 0;\r\n        \r\n        int firstPlayer = 0;\r\n        int secondPlayer = 0;\r\n        \r\n        while (!list.isEmpty()) {\r\n            System.out.println(list);\r\n            firstScore = list.get(i);\r\n            list.remove(i);\r\n\r\n            System.out.println(firstScore);\r\n            \r\n            if (firstScore % 2 == 0) {\r\n                Collections.reverse(list);\r\n            }\r\n            \r\n            firstPlayer = firstScore + firstPlayer;\r\n            \r\n            System.out.println(list);\r\n            secondScore = list.get(i);    //this line gets an error but if there&#39;s no while loop, it works fine  \r\n            list.remove(i);\r\n\r\n            System.out.println(secondScore);\r\n            \r\n            if (secondScore % 2 == 0) {\r\n                Collections.reverse(list);\r\n            }\r\n            \r\n            secondPlayer = secondScore + secondPlayer;\r\n        }\r\n        \r\n        System.out.println(firstPlayer - secondPlayer);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DJti5.png","title":"Deleting first index in list until it&#39;s empty","body":"<p>firstPlayer and secondPlayer alternate on getting score from the first index of the list.</p>\n<p>firstPlayer gets index 0, then removes that value. if the value is an even number, the remaining list gets reverse.</p>\n<p>Then, secondPlayer does the same thing. But somehow getting an error on this part.</p>\n<p>Every time each player gets a value, it's concatenating.</p>\n<p>In the end, the difference of first and second player is calculated.</p>\n<p>This is what I get:\n<a href=\"https://i.stack.imgur.com/DJti5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DJti5.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.util.*;\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        \n        list.add(4);\n        list.add(2);\n        list.add(1);\n        list.add(4);\n        list.add(3);\n        \n        int firstScore = 0;\n        int secondScore = 0;\n        \n        int i = 0;\n        \n        int firstPlayer = 0;\n        int secondPlayer = 0;\n        \n        while (!list.isEmpty()) {\n            System.out.println(list);\n            firstScore = list.get(i);\n            list.remove(i);\n\n            System.out.println(firstScore);\n            \n            if (firstScore % 2 == 0) {\n                Collections.reverse(list);\n            }\n            \n            firstPlayer = firstScore + firstPlayer;\n            \n            System.out.println(list);\n            secondScore = list.get(i);    //this line gets an error but if there's no while loop, it works fine  \n            list.remove(i);\n\n            System.out.println(secondScore);\n            \n            if (secondScore % 2 == 0) {\n                Collections.reverse(list);\n            }\n            \n            secondPlayer = secondScore + secondPlayer;\n        }\n        \n        System.out.println(firstPlayer - secondPlayer);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-boot-security"],"answers":[{"comments":[{"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"score":0,"creation_date":1691059805,"post_id":76762264,"comment_id":135441772,"body_markdown":"Thank you. Solution is working as expected.","body":"Thank you. Solution is working as expected."}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690284536,"creation_date":1690284536,"answer_id":76762264,"question_id":76761567,"body_markdown":"From Spring Security 6 WebSecurityConfigurerAdapter was deprecated, and you need to have same little changes, for more details how to change [check it][1] and [Migration Guide][2]\r\n\r\nAnd about your problem what you have with:\r\n\r\n`protected void configure(HttpSecurity http) throws Exception ` \r\n\r\nYou should change it to:\r\n\r\n      @Bean\r\n      public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.sessionManagement(sessionAuthenticationStrategy -&gt;\r\n            sessionAuthenticationStrategy.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n        http.exceptionHandling(eH -&gt; eH.defaultAuthenticationEntryPointFor(\r\n            forbiddenEntryPoint(), PROTECTED_URLS\r\n        ));\r\n        http\r\n            .csrf(AbstractHttpConfigurer::disable);\r\n        http.authorizeHttpRequests(request -&gt;{\r\n          request.anyRequest().authenticated();\r\n        });\r\n        http.httpBasic(Customizer.withDefaults());\r\n        \r\n        return http.build();\r\n      };\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n  [2]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html","title":"Spring Security Configuration update for Springboot Version 3.x","body":"<p>From Spring Security 6 WebSecurityConfigurerAdapter was deprecated, and you need to have same little changes, for more details how to change <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">check it</a> and <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"nofollow noreferrer\">Migration Guide</a></p>\n<p>And about your problem what you have with:</p>\n<p><code>protected void configure(HttpSecurity http) throws Exception </code></p>\n<p>You should change it to:</p>\n<pre><code>  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http.sessionManagement(sessionAuthenticationStrategy -&gt;\n        sessionAuthenticationStrategy.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n    http.exceptionHandling(eH -&gt; eH.defaultAuthenticationEntryPointFor(\n        forbiddenEntryPoint(), PROTECTED_URLS\n    ));\n    http\n        .csrf(AbstractHttpConfigurer::disable);\n    http.authorizeHttpRequests(request -&gt;{\n      request.anyRequest().authenticated();\n    });\n    http.httpBasic(Customizer.withDefaults());\n    \n    return http.build();\n  };\n</code></pre>\n"},{"tags":[],"owner":{"account_id":263115,"reputation":16960,"user_id":548473,"display_name":"Grigory Kislin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697280693,"creation_date":1697280693,"answer_id":77292534,"question_id":76761567,"body_markdown":"It is also possible to declare `authenticationEntryPoint` at \r\n\r\n    .httpBasic(hbc -&gt; hbc.authenticationEntryPoint(authenticationEntryPoint))\r\n\r\nSee [How to fix Spring authorizeRequests is deprecated?](https://stackoverflow.com/a/76538979/548473)","title":"Spring Security Configuration update for Springboot Version 3.x","body":"<p>It is also possible to declare <code>authenticationEntryPoint</code> at</p>\n<pre><code>.httpBasic(hbc -&gt; hbc.authenticationEntryPoint(authenticationEntryPoint))\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/a/76538979/548473\">How to fix Spring authorizeRequests is deprecated?</a></p>\n"}],"owner":{"account_id":9782480,"reputation":57,"user_id":7249929,"display_name":"Nani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1533,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697280693,"creation_date":1690279254,"question_id":76761567,"body_markdown":"I am updating from Springboot 2.7.x to 3.1.x version and noticed that there is a change to the Security configuration.\r\nI followed the steps provided in the [Spring Security](https://www.baeldung.com/spring-boot-security-autoconfiguration) and facing issue converting below configuration to the latest that is supported in Springboot 3.1.x.\r\n\r\nCould someone please help with the new configuration. \r\n\r\n\r\nFacing issue rewriting below:\r\n```\r\n@Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.sessionManagement().sessionCreationPolicy(STATELESS).and().exceptionHandling()\r\n            .defaultAuthenticationEntryPointFor(forbiddenEntryPoint(), PROTECTED_URLS).and()\r\n            .csrf().disable().authorizeRequests()\r\n            .anyRequest().authenticated()\r\n            .and().httpBasic()\r\n            .authenticationEntryPoint(AuthenticationEntryPoint);\r\n  }\r\n```\r\n\r\n\r\nFull code:\r\n```\r\npackage test.config;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.AuthenticationEntryPoint;\r\nimport org.springframework.security.web.authentication.HttpStatusEntryPoint;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.NegatedRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\r\nimport org.springframework.security.web.util.matcher.RequestMatcher;\r\n\r\nimport static org.springframework.http.HttpStatus.FORBIDDEN;\r\nimport static org.springframework.security.config.http.SessionCreationPolicy.STATELESS;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private static final RequestMatcher PUBLIC_URLS = new OrRequestMatcher(new AntPathRequestMatcher(&quot;/public/**/**&quot;));\r\n    private static final RequestMatcher PROTECTED_URLS = new NegatedRequestMatcher(PUBLIC_URLS);\r\n    private final AuthenticationEntryPoint AuthenticationEntryPoint;\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    @Bean\r\n    private static AuthenticationEntryPoint forbiddenEntryPoint() {\r\n        return new HttpStatusEntryPoint(FORBIDDEN);\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) {\r\n        web.ignoring().requestMatchers(PUBLIC_URLS);\r\n        web.ignoring().antMatchers(&quot;/&quot;, &quot;/csrf&quot;, &quot;/configuration/ui&quot;, &quot;/webjars/**&quot;, &quot;/actuator&quot;, &quot;/actuator/*&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.sessionManagement().sessionCreationPolicy(STATELESS).and().exceptionHandling()\r\n                .defaultAuthenticationEntryPointFor(forbiddenEntryPoint(), PROTECTED_URLS).and()\r\n                .csrf().disable().authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and().httpBasic()\r\n                .authenticationEntryPoint(AuthenticationEntryPoint);\r\n    }\r\n\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.inMemoryAuthentication().withUser(&quot;userName&quot;).password(passwordEncoder.encode(&quot;passWord&quot;)).roles(&quot;Application&quot;);\r\n    }\r\n\t\r\n\t@Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n}\r\n```\r\n\r\nAlso tried solutions provided in the link: https://www.bezkoder.com/websecurityconfigureradapter-deprecated-spring-boot/","title":"Spring Security Configuration update for Springboot Version 3.x","body":"<p>I am updating from Springboot 2.7.x to 3.1.x version and noticed that there is a change to the Security configuration.\nI followed the steps provided in the <a href=\"https://www.baeldung.com/spring-boot-security-autoconfiguration\" rel=\"nofollow noreferrer\">Spring Security</a> and facing issue converting below configuration to the latest that is supported in Springboot 3.1.x.</p>\n<p>Could someone please help with the new configuration.</p>\n<p>Facing issue rewriting below:</p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.sessionManagement().sessionCreationPolicy(STATELESS).and().exceptionHandling()\n            .defaultAuthenticationEntryPointFor(forbiddenEntryPoint(), PROTECTED_URLS).and()\n            .csrf().disable().authorizeRequests()\n            .anyRequest().authenticated()\n            .and().httpBasic()\n            .authenticationEntryPoint(AuthenticationEntryPoint);\n  }\n</code></pre>\n<p>Full code:</p>\n<pre><code>package test.config;\n\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.security.web.authentication.HttpStatusEntryPoint;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.security.web.util.matcher.NegatedRequestMatcher;\nimport org.springframework.security.web.util.matcher.OrRequestMatcher;\nimport org.springframework.security.web.util.matcher.RequestMatcher;\n\nimport static org.springframework.http.HttpStatus.FORBIDDEN;\nimport static org.springframework.security.config.http.SessionCreationPolicy.STATELESS;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n@RequiredArgsConstructor\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private static final RequestMatcher PUBLIC_URLS = new OrRequestMatcher(new AntPathRequestMatcher(&quot;/public/**/**&quot;));\n    private static final RequestMatcher PROTECTED_URLS = new NegatedRequestMatcher(PUBLIC_URLS);\n    private final AuthenticationEntryPoint AuthenticationEntryPoint;\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    @Bean\n    private static AuthenticationEntryPoint forbiddenEntryPoint() {\n        return new HttpStatusEntryPoint(FORBIDDEN);\n    }\n\n    @Override\n    public void configure(WebSecurity web) {\n        web.ignoring().requestMatchers(PUBLIC_URLS);\n        web.ignoring().antMatchers(&quot;/&quot;, &quot;/csrf&quot;, &quot;/configuration/ui&quot;, &quot;/webjars/**&quot;, &quot;/actuator&quot;, &quot;/actuator/*&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.sessionManagement().sessionCreationPolicy(STATELESS).and().exceptionHandling()\n                .defaultAuthenticationEntryPointFor(forbiddenEntryPoint(), PROTECTED_URLS).and()\n                .csrf().disable().authorizeRequests()\n                .anyRequest().authenticated()\n                .and().httpBasic()\n                .authenticationEntryPoint(AuthenticationEntryPoint);\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication().withUser(&quot;userName&quot;).password(passwordEncoder.encode(&quot;passWord&quot;)).roles(&quot;Application&quot;);\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n}\n</code></pre>\n<p>Also tried solutions provided in the link: <a href=\"https://www.bezkoder.com/websecurityconfigureradapter-deprecated-spring-boot/\" rel=\"nofollow noreferrer\">https://www.bezkoder.com/websecurityconfigureradapter-deprecated-spring-boot/</a></p>\n"},{"tags":["java","sql","spring","jpa"],"answers":[{"comments":[{"owner":{"account_id":20683172,"reputation":81,"user_id":15186258,"display_name":"Natsuo"},"score":0,"creation_date":1640177852,"post_id":70449304,"comment_id":124533240,"body_markdown":"no, period dont belongs to any spicific section.","body":"no, period dont belongs to any spicific section."},{"owner":{"account_id":22615747,"reputation":124,"user_id":16795292,"display_name":"don"},"score":0,"creation_date":1640178374,"post_id":70449304,"comment_id":124533450,"body_markdown":"Ok, I&#39;ll edit the answer. Give me 5 min.","body":"Ok, I&#39;ll edit the answer. Give me 5 min."}],"tags":[],"owner":{"account_id":22615747,"reputation":124,"user_id":16795292,"display_name":"don"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640179245,"creation_date":1640177296,"answer_id":70449304,"question_id":70448812,"body_markdown":"To model the Many To Many relationship between Period and Section, you have 2 choices:\r\n\r\n 1. Use 2 Entities (Period, Section), and use the @ManyToMany annotation in one of these entities. This will autogenerate the Join Table which will have a composite primary key. This is not recommended.\r\n 2. Use 3 Entities, and this way you can think the &quot;ManyToMany&quot; as having two OneToMany relationships (1 Period - Many &quot;PeriodSection&quot; AND 1 Section - Many &quot;PeriodSection&quot;). This is recommended because this way you will have a PK and you can easily add more columns to the PeriodSection \r\n(** Note: instead of PeriodSection, the Entity and Table should have a meaninful name, but i&#39;ll leave that to you)\r\n\r\nUsing the second choice:\r\n\r\nPeriod:\r\n\r\n    @Entity\r\n    @Table(name = &quot;periods&quot;)\r\n    public class Period {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private Integer code;\r\n\r\n    private String name;\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;period&quot;, cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\r\n    private List&lt;PeriodSection&gt; periodSections;  // bad naming.\r\n\r\n    }\r\n\r\nPeriodSection:\r\n\r\n    @Entity\r\n    @Table(name = &quot;period_section&quot;)  // use a more meaningful name for the table and the entity\r\n    public class PeriodSection {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @ManyToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;period_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Period period;\r\n\r\n    @ManyToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;section_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Section section;\r\n\r\n    }\r\n\r\nSection:\r\n\r\n    @Entity\r\n    @Table(name = &quot;sections&quot;)\r\n    public class Section {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    private Integer version;\r\n\r\n    private String form;\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;section&quot;, cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\r\n    private List&lt;PeriodSection&gt; periodSections;  // bad naming.\r\n\r\n    }\r\n\r\nYou can play around with the fetch and cascade strategies, to check which is best for your app. \r\nHope this helped","title":"Create relationship between 2 tables JPA","body":"<p>To model the Many To Many relationship between Period and Section, you have 2 choices:</p>\n<ol>\n<li>Use 2 Entities (Period, Section), and use the @ManyToMany annotation in one of these entities. This will autogenerate the Join Table which will have a composite primary key. This is not recommended.</li>\n<li>Use 3 Entities, and this way you can think the &quot;ManyToMany&quot; as having two OneToMany relationships (1 Period - Many &quot;PeriodSection&quot; AND 1 Section - Many &quot;PeriodSection&quot;). This is recommended because this way you will have a PK and you can easily add more columns to the PeriodSection\n(** Note: instead of PeriodSection, the Entity and Table should have a meaninful name, but i'll leave that to you)</li>\n</ol>\n<p>Using the second choice:</p>\n<p>Period:</p>\n<pre><code>@Entity\n@Table(name = &quot;periods&quot;)\npublic class Period {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\nprivate Integer code;\n\nprivate String name;\n\n\n@OneToMany(mappedBy = &quot;period&quot;, cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\nprivate List&lt;PeriodSection&gt; periodSections;  // bad naming.\n\n}\n</code></pre>\n<p>PeriodSection:</p>\n<pre><code>@Entity\n@Table(name = &quot;period_section&quot;)  // use a more meaningful name for the table and the entity\npublic class PeriodSection {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n@ManyToOne(cascade = CascadeType.MERGE)\n@JoinColumn(name = &quot;period_id&quot;, referencedColumnName = &quot;id&quot;)\nprivate Period period;\n\n@ManyToOne(cascade = CascadeType.MERGE)\n@JoinColumn(name = &quot;section_id&quot;, referencedColumnName = &quot;id&quot;)\nprivate Section section;\n\n}\n</code></pre>\n<p>Section:</p>\n<pre><code>@Entity\n@Table(name = &quot;sections&quot;)\npublic class Section {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\nprivate Integer version;\n\nprivate String form;\n\n\n@OneToMany(mappedBy = &quot;section&quot;, cascade = CascadeType.MERGE, fetch = FetchType.LAZY)\nprivate List&lt;PeriodSection&gt; periodSections;  // bad naming.\n\n}\n</code></pre>\n<p>You can play around with the fetch and cascade strategies, to check which is best for your app.\nHope this helped</p>\n"}],"owner":{"account_id":20683172,"reputation":81,"user_id":15186258,"display_name":"Natsuo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70449304,"answer_count":1,"score":0,"last_activity_date":1697280466,"creation_date":1640174909,"question_id":70448812,"body_markdown":"Need help with setting up table relationships. \r\nSo, there are 2 entities - Section and Period. **1 Section has many Period**, but **1 Period do not belongs to any specific Section**.\r\nI implemented this relationship as follows: created an additional table SectionCodes with an external key on Section (more in diagram)\r\n\r\n[![diagram][1]][1]\r\n\r\nSection class:\r\n```\r\n@Entity\r\n@Table(name = &quot;section&quot;)\r\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id&quot;, nullable = false))\r\npublic class Section extends BaseEntity&lt;Integer&gt; {\r\n    private String form;\r\n    private Integer version;\r\n    private List&lt;SectionPeriod&gt; periodCodes;\r\n\r\n    @Column(name = &quot;form&quot;)\r\n    public String getForm() { return form; }\r\n    public void setForm(String form) { this.form = form;}\r\n\r\n    @Column(name = &quot;version&quot;)\r\n    public Integer version() { return version; }\r\n    public void setVersion(Integer version) { this.version = version; }\r\n\r\n    @OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    public List&lt;SectionPeriod&gt; getPeriodCodes() {\r\n        return periodCodes;\r\n    }\r\n    public void setPeriodCodes(List&lt;SectionPeriod&gt; periodCodes) {\r\n        this.periodCodes = periodCodes;\r\n    }\r\n}\r\n```\r\nSectionPeriod:\r\n```\r\n@Entity\r\n@Table(name=&quot;section_period&quot;)\r\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id&quot;, nullable = false))\r\npublic class SectionPeriod extends BaseEntity&lt;Integer&gt; {\r\n    private Integer periodCode;\r\n    private Section section;\r\n\r\n    @Column(name = &quot;period_code&quot;)\r\n    public Integer getPeriodCode() {\r\n        return periodCode;\r\n    }\r\n    public void setPeriodCode(Integer periodCode) {\r\n        this.periodCode = periodCode;\r\n    }\r\n\r\n    @ManyToOne()\r\n    @JoinColumn(name = &quot;section_id&quot;, referencedColumnName = &quot;id&quot;, nullable=false)\r\n    public Section getSection () {\r\n        return section;\r\n    }\r\n    public void setSection(Section section) {\r\n        this.section = section;\r\n    }\r\n}\r\n```\r\nThis works fine, but there is a problem - it turns out that every Section entity has a SectionPeriod list, and SectionPerid has a Section - so there is loop.\r\nIs there an easy way to perform this? Ideally, it should be just List of Period in Section class or at least Integer[] of periodCodes. \r\n\r\n  [1]: https://i.stack.imgur.com/olOyt.png","title":"Create relationship between 2 tables JPA","body":"<p>Need help with setting up table relationships.\nSo, there are 2 entities - Section and Period. <strong>1 Section has many Period</strong>, but <strong>1 Period do not belongs to any specific Section</strong>.\nI implemented this relationship as follows: created an additional table SectionCodes with an external key on Section (more in diagram)</p>\n<p><a href=\"https://i.stack.imgur.com/olOyt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/olOyt.png\" alt=\"diagram\" /></a></p>\n<p>Section class:</p>\n<pre><code>@Entity\n@Table(name = &quot;section&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id&quot;, nullable = false))\npublic class Section extends BaseEntity&lt;Integer&gt; {\n    private String form;\n    private Integer version;\n    private List&lt;SectionPeriod&gt; periodCodes;\n\n    @Column(name = &quot;form&quot;)\n    public String getForm() { return form; }\n    public void setForm(String form) { this.form = form;}\n\n    @Column(name = &quot;version&quot;)\n    public Integer version() { return version; }\n    public void setVersion(Integer version) { this.version = version; }\n\n    @OneToMany(mappedBy = &quot;section&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    public List&lt;SectionPeriod&gt; getPeriodCodes() {\n        return periodCodes;\n    }\n    public void setPeriodCodes(List&lt;SectionPeriod&gt; periodCodes) {\n        this.periodCodes = periodCodes;\n    }\n}\n</code></pre>\n<p>SectionPeriod:</p>\n<pre><code>@Entity\n@Table(name=&quot;section_period&quot;)\n@AttributeOverride(name = &quot;id&quot;, column = @Column(name = &quot;id&quot;, nullable = false))\npublic class SectionPeriod extends BaseEntity&lt;Integer&gt; {\n    private Integer periodCode;\n    private Section section;\n\n    @Column(name = &quot;period_code&quot;)\n    public Integer getPeriodCode() {\n        return periodCode;\n    }\n    public void setPeriodCode(Integer periodCode) {\n        this.periodCode = periodCode;\n    }\n\n    @ManyToOne()\n    @JoinColumn(name = &quot;section_id&quot;, referencedColumnName = &quot;id&quot;, nullable=false)\n    public Section getSection () {\n        return section;\n    }\n    public void setSection(Section section) {\n        this.section = section;\n    }\n}\n</code></pre>\n<p>This works fine, but there is a problem - it turns out that every Section entity has a SectionPeriod list, and SectionPerid has a Section - so there is loop.\nIs there an easy way to perform this? Ideally, it should be just List of Period in Section class or at least Integer[] of periodCodes.</p>\n"},{"tags":["java","spring","oracle","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":295859,"reputation":13588,"user_id":600486,"accept_rate":80,"display_name":"blurfus"},"score":0,"creation_date":1697261356,"post_id":77291716,"comment_id":136260681,"body_markdown":"the `limit` part is suspect - is that correct? - please copy the entire query and run it in your SQL client (toad or otherwise) and verify that its syntax is correct","body":"the <code>limit</code> part is suspect - is that correct? - please copy the entire query and run it in your SQL client (toad or otherwise) and verify that its syntax is correct"},{"owner":{"account_id":17069028,"reputation":94,"user_id":12350325,"display_name":"bahman karami"},"score":1,"creation_date":1697261953,"post_id":77291716,"comment_id":136260713,"body_markdown":"Oracle does not support the LIMIT clause in the UPDATE statement. You can use the LIMIT clause only in the SELECT statement to limit the number of rows returned by a query. To update a limited number of rows in Oracle, you need to use a subquery with the ROWNUM pseudocolumn.","body":"Oracle does not support the LIMIT clause in the UPDATE statement. You can use the LIMIT clause only in the SELECT statement to limit the number of rows returned by a query. To update a limited number of rows in Oracle, you need to use a subquery with the ROWNUM pseudocolumn."},{"owner":{"account_id":1635690,"reputation":150157,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1697279261,"post_id":77291716,"comment_id":136261837,"body_markdown":"@bahmankarami That is incorrect. You cannot use a `LIMIT` clause in any statements (including `SELECT`) as that syntax is not supported. Either filter using `ROWNUM` or, from Oracle 12, use `FETCH FIRST :limit ROWS ONLY`.","body":"@bahmankarami That is incorrect. You cannot use a <code>LIMIT</code> clause in any statements (including <code>SELECT</code>) as that syntax is not supported. Either filter using <code>ROWNUM</code> or, from Oracle 12, use <code>FETCH FIRST :limit ROWS ONLY</code>."}],"answers":[{"tags":[],"owner":{"account_id":9727934,"reputation":2489,"user_id":7214142,"display_name":"Yuriy Tsarkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697264291,"creation_date":1697264291,"answer_id":77291828,"question_id":77291716,"body_markdown":"I&#39;m sure that comments guys left below the question are fairly enough to get rid the problem. But I still decided write an answer as it could be useful for many people who have just begun diving into Spring.\r\n\r\nThe JPA, as well as any other superstructure over the native code, just gives us a bit simplifying and minimizes lots of routine. But it won&#39;t be able to do anything, that can&#39;t be done by itself. So in any case the first step should be to make sure, that you native code is completely correct and can be successfuly executed.\r\n\r\nWith all of this writing above, think of your goal, then write executable code in pl/sql Developer or whatever, test it, and only then put it into repository&#39;s query.","title":"Getting exception while running UPDATE JPA query for oracle data base through spring boot application","body":"<p>I'm sure that comments guys left below the question are fairly enough to get rid the problem. But I still decided write an answer as it could be useful for many people who have just begun diving into Spring.</p>\n<p>The JPA, as well as any other superstructure over the native code, just gives us a bit simplifying and minimizes lots of routine. But it won't be able to do anything, that can't be done by itself. So in any case the first step should be to make sure, that you native code is completely correct and can be successfuly executed.</p>\n<p>With all of this writing above, think of your goal, then write executable code in pl/sql Developer or whatever, test it, and only then put it into repository's query.</p>\n"},{"tags":[],"owner":{"account_id":1635690,"reputation":150157,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697278912,"creation_date":1697278912,"answer_id":77292461,"question_id":77291716,"body_markdown":"The `LIMIT` syntax is not supported in Oracle (in any DML statements, not just `UPDATE`s).\r\n\r\nYour query should just be:\r\n\r\n```lang-sql\r\nUPDATE NUMBER_POOL\r\nSET   STATUS      = :status,\r\n      CHANGE_DATE = :date\r\nWHERE RANGE_ID    = :id\r\nAND   STATUS      = 15\r\n```\r\n\r\nIf you only want to update the first few (randomly ordered) rows then use a `MERGE` statement with a `ROWNUM` filter (or, from Oracle 12, `FETCH FIRST :limit ROWS ONLY`):\r\n\r\n```lang-sql\r\nMERGE INTO number_pool dst\r\nUSING (\r\n  SELECT ROWID AS rid\r\n  FROM   number_pool\r\n  WHERE  range_id = :id\r\n  AND    status   = 15\r\n  AND    ROWNUM   &lt;= :limit\r\n) src\r\nON (src.rid = dst.ROWID)\r\nWHEN MATCHED THEN\r\n  UPDATE\r\n  SET status      = :status,\r\n      change_date = :date\r\n```\r\n\r\nor a correlated update:\r\n\r\n```lang-sql\r\nUPDATE number_pool\r\nSET   status      = :status,\r\n      change_date = :date\r\nWHERE ROWID IN (\r\n                 SELECT ROWID\r\n                 FROM   number_pool\r\n                 WHERE  range_id = :id\r\n                 AND    status   = 15\r\n                 AND    ROWNUM   &lt;= :limit\r\n               )\r\n```\r\n","title":"Getting exception while running UPDATE JPA query for oracle data base through spring boot application","body":"<p>The <code>LIMIT</code> syntax is not supported in Oracle (in any DML statements, not just <code>UPDATE</code>s).</p>\n<p>Your query should just be:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE NUMBER_POOL\nSET   STATUS      = :status,\n      CHANGE_DATE = :date\nWHERE RANGE_ID    = :id\nAND   STATUS      = 15\n</code></pre>\n<p>If you only want to update the first few (randomly ordered) rows then use a <code>MERGE</code> statement with a <code>ROWNUM</code> filter (or, from Oracle 12, <code>FETCH FIRST :limit ROWS ONLY</code>):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>MERGE INTO number_pool dst\nUSING (\n  SELECT ROWID AS rid\n  FROM   number_pool\n  WHERE  range_id = :id\n  AND    status   = 15\n  AND    ROWNUM   &lt;= :limit\n) src\nON (src.rid = dst.ROWID)\nWHEN MATCHED THEN\n  UPDATE\n  SET status      = :status,\n      change_date = :date\n</code></pre>\n<p>or a correlated update:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>UPDATE number_pool\nSET   status      = :status,\n      change_date = :date\nWHERE ROWID IN (\n                 SELECT ROWID\n                 FROM   number_pool\n                 WHERE  range_id = :id\n                 AND    status   = 15\n                 AND    ROWNUM   &lt;= :limit\n               )\n</code></pre>\n"}],"owner":{"account_id":29668766,"reputation":1,"user_id":22738557,"display_name":"Subramanya H L"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697279395,"creation_date":1697260932,"question_id":77291716,"body_markdown":"Hi I&#39;m using the below jpa query to update the records in to oracle data base. But getting the below error.\r\n\r\nJpa query:\r\n\r\n    @Transactional\r\n    \t@Modifying(clearAutomatically = true)\r\n    \t@Query(value = &quot;update NUMBER_POOL NP set NP.STATUS=:status , NP.CHANGE_DATE=:date where NP.RANGE_ID=:id and NP.STATUS= 15 LIMIT :limit &quot;,nativeQuery = true)\r\n    \tint approveMsisdnRange(@Param(&quot;id&quot;) Integer id, @Param(&quot;status&quot;) Integer status, @Param(&quot;date&quot;) Date date,@Param(&quot;limit&quot;) int limit);\r\n\r\n----------------------------------------------------------------------\r\nerror\r\n\r\n\r\n&gt; 2023-10-14 10:30:44.779  WARN 17204 --- [         task-2]\r\n&gt; o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 933, SQLState:\r\n&gt; 42000 2023-10-14 10:30:44.779 ERROR 17204 --- [         task-2]\r\n&gt; o.h.engine.jdbc.spi.SqlExceptionHelper   : ORA-00933: SQL command not\r\n&gt; properly ended\r\n&gt; \r\n&gt; 2023-10-14 10:30:44.818 ERROR 17204 --- [         task-2]\r\n&gt; .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception\r\n&gt; occurred invoking async method: public void\r\n&gt; com.sixdee.echelon.service.MsisdnManageServices.ApproveNumberPool(java.lang.Integer,java.lang.Long)\r\n&gt; \r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException: could\r\n&gt; not execute statement; SQL [n/a]; nested exception is\r\n&gt; org.hibernate.exception.SQLGrammarException: could not execute\r\n&gt; statement \tat\r\n&gt; org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)\r\n&gt; ~[spring-orm-5.3.9.jar:5.3.9] \tat\r\n&gt; org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n&gt; ~[spring-orm-5.3.9.jar:5.3.9] \tat\r\n&gt; org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\r\n&gt; ~[spring-orm-5.3.9.jar:5.3.9] \tat\r\n&gt; org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible\r\n\r\n-----------------------------\r\n\r\nAdding the snap of the error.\r\nPlease help us to resolve\r\n\r\n\r\nBy using a jpa query need to update the records in to oracle db from spring boot application.\r\nBelow is the jpa qiery\r\n\r\n\t@Transactional\r\n\t@Modifying(clearAutomatically = true)\r\n\t@Query(value = &quot;update NUMBER_POOL NP set NP.STATUS=:status , NP.CHANGE_DATE=:date where NP.RANGE_ID=:id and NP.STATUS= 15 LIMIT :limit &quot;,nativeQuery = true)\r\n\tint approveMsisdnRange(@Param(&quot;id&quot;) Integer id, @Param(&quot;status&quot;) Integer status, @Param(&quot;date&quot;) Date date,@Param(&quot;limit&quot;) int limit);\r\n","title":"Getting exception while running UPDATE JPA query for oracle data base through spring boot application","body":"<p>Hi I'm using the below jpa query to update the records in to oracle data base. But getting the below error.</p>\n<p>Jpa query:</p>\n<pre><code>@Transactional\n    @Modifying(clearAutomatically = true)\n    @Query(value = &quot;update NUMBER_POOL NP set NP.STATUS=:status , NP.CHANGE_DATE=:date where NP.RANGE_ID=:id and NP.STATUS= 15 LIMIT :limit &quot;,nativeQuery = true)\n    int approveMsisdnRange(@Param(&quot;id&quot;) Integer id, @Param(&quot;status&quot;) Integer status, @Param(&quot;date&quot;) Date date,@Param(&quot;limit&quot;) int limit);\n</code></pre>\n<hr />\n<p>error</p>\n<blockquote>\n<p>2023-10-14 10:30:44.779  WARN 17204 --- [         task-2]\no.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 933, SQLState:\n42000 2023-10-14 10:30:44.779 ERROR 17204 --- [         task-2]\no.h.engine.jdbc.spi.SqlExceptionHelper   : ORA-00933: SQL command not\nproperly ended</p>\n<p>2023-10-14 10:30:44.818 ERROR 17204 --- [         task-2]\n.a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception\noccurred invoking async method: public void\ncom.sixdee.echelon.service.MsisdnManageServices.ApproveNumberPool(java.lang.Integer,java.lang.Long)</p>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException: could\nnot execute statement; SQL [n/a]; nested exception is\norg.hibernate.exception.SQLGrammarException: could not execute\nstatement     at\norg.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:259)\n~[spring-orm-5.3.9.jar:5.3.9]     at\norg.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n~[spring-orm-5.3.9.jar:5.3.9]     at\norg.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\n~[spring-orm-5.3.9.jar:5.3.9]     at\norg.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible</p>\n</blockquote>\n<hr />\n<p>Adding the snap of the error.\nPlease help us to resolve</p>\n<p>By using a jpa query need to update the records in to oracle db from spring boot application.\nBelow is the jpa qiery</p>\n<pre><code>@Transactional\n@Modifying(clearAutomatically = true)\n@Query(value = &quot;update NUMBER_POOL NP set NP.STATUS=:status , NP.CHANGE_DATE=:date where NP.RANGE_ID=:id and NP.STATUS= 15 LIMIT :limit &quot;,nativeQuery = true)\nint approveMsisdnRange(@Param(&quot;id&quot;) Integer id, @Param(&quot;status&quot;) Integer status, @Param(&quot;date&quot;) Date date,@Param(&quot;limit&quot;) int limit);\n</code></pre>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697283305,"post_id":77291641,"comment_id":136262138,"body_markdown":"Seems like this question is the same as this [other question](https://stackoverflow.com/questions/77291839/java-using-jackson-json-library-to-loop-recursive-through-any-jsondata) that you posted. At least this question has more details. Any reason why you posted another question rather than [edit]ing this one? Please refer to: [What happens when the same user asks the same question twice?](https://meta.stackoverflow.com/questions/425393/what-happens-when-the-same-user-asks-the-same-question-twice)","body":"Seems like this question is the same as this <a href=\"https://stackoverflow.com/questions/77291839/java-using-jackson-json-library-to-loop-recursive-through-any-jsondata\">other question</a> that you posted. At least this question has more details. Any reason why you posted another question rather than <a href=\"https://stackoverflow.com/posts/77291641/edit\">edit</a>ing this one? Please refer to: <a href=\"https://meta.stackoverflow.com/questions/425393/what-happens-when-the-same-user-asks-the-same-question-twice\">What happens when the same user asks the same question twice?</a>"}],"answers":[{"comments":[{"owner":{"account_id":29668414,"reputation":1,"user_id":22738309,"display_name":"ananonymousenigma"},"score":0,"creation_date":1697263156,"post_id":77291662,"comment_id":136260774,"body_markdown":"Do you have an example of how to achieve the same with the Jackson library? Rather than org.Json?","body":"Do you have an example of how to achieve the same with the Jackson library? Rather than org.Json?"}],"tags":[],"owner":{"account_id":29646715,"reputation":26,"user_id":22721567,"display_name":"oakley"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697259097,"creation_date":1697259097,"answer_id":77291662,"question_id":77291641,"body_markdown":"This can be solved using standard recursive approach.\r\nWhere given entry is either a Object or Array of Objects.\r\n\r\nFollowing link has exact same problem statement as yours:\r\n\r\nhttps://stackoverflow.com/questions/70681496/java-using-jsonobject-to-loop-recursive-through-any-jsondata\r\n\r\nHope this helps. Thanks.","title":"How to use Jackson JSON library to print everything in a json file, including nested array objects with no key and with objects in the array?","body":"<p>This can be solved using standard recursive approach.\nWhere given entry is either a Object or Array of Objects.</p>\n<p>Following link has exact same problem statement as yours:</p>\n<p><a href=\"https://stackoverflow.com/questions/70681496/java-using-jsonobject-to-loop-recursive-through-any-jsondata\">java using JSONObject to loop recursive through any jsondata</a></p>\n<p>Hope this helps. Thanks.</p>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697277148,"creation_date":1697277148,"answer_id":77292364,"question_id":77291641,"body_markdown":"You can quite easily do this with a JSON parser:\r\n\r\n```java\r\nJsonParser parser = new JsonFactory().createParser(json);\r\nJsonToken token = parser.nextToken();\r\nwhile (token != null) {\r\n    switch (token) {\r\n        case VALUE_FALSE:\r\n        case VALUE_TRUE:\r\n            System.out.printf(&quot;\\&quot;%s\\&quot;: %b%n&quot;, parser.currentName(), parser.getBooleanValue());\r\n            break;\r\n        case VALUE_NULL:\r\n            System.out.printf(&quot;\\&quot;%s\\&quot;: null%n&quot;, parser.currentName());\r\n            break;\r\n        case VALUE_NUMBER_FLOAT:\r\n        case VALUE_NUMBER_INT:\r\n            System.out.printf(&quot;\\&quot;%s\\&quot;: %d%n&quot;, parser.currentName(), parser.getNumberValue());\r\n            break;\r\n        case VALUE_STRING:\r\n            System.out.printf(&quot;\\&quot;%s\\&quot;: \\&quot;%s\\&quot;%n&quot;, parser.currentName(), parser.getText());\r\n            break;\r\n        default:\r\n            // ignore\r\n            break;\r\n    }\r\n    token = parser.nextToken();\r\n}\r\n```\r\nThe parser has a method called `currentValue()` but that doesn&#39;t work in the above example, it always returns `null`.","title":"How to use Jackson JSON library to print everything in a json file, including nested array objects with no key and with objects in the array?","body":"<p>You can quite easily do this with a JSON parser:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonParser parser = new JsonFactory().createParser(json);\nJsonToken token = parser.nextToken();\nwhile (token != null) {\n    switch (token) {\n        case VALUE_FALSE:\n        case VALUE_TRUE:\n            System.out.printf(&quot;\\&quot;%s\\&quot;: %b%n&quot;, parser.currentName(), parser.getBooleanValue());\n            break;\n        case VALUE_NULL:\n            System.out.printf(&quot;\\&quot;%s\\&quot;: null%n&quot;, parser.currentName());\n            break;\n        case VALUE_NUMBER_FLOAT:\n        case VALUE_NUMBER_INT:\n            System.out.printf(&quot;\\&quot;%s\\&quot;: %d%n&quot;, parser.currentName(), parser.getNumberValue());\n            break;\n        case VALUE_STRING:\n            System.out.printf(&quot;\\&quot;%s\\&quot;: \\&quot;%s\\&quot;%n&quot;, parser.currentName(), parser.getText());\n            break;\n        default:\n            // ignore\n            break;\n    }\n    token = parser.nextToken();\n}\n</code></pre>\n<p>The parser has a method called <code>currentValue()</code> but that doesn't work in the above example, it always returns <code>null</code>.</p>\n"}],"owner":{"account_id":29668414,"reputation":1,"user_id":22738309,"display_name":"ananonymousenigma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697277148,"creation_date":1697258404,"question_id":77291641,"body_markdown":"I need to print everything in a JSON file using Jackson in Java. I am 90% of the way there. Here is my Json File:\r\n\r\n```\r\n{\r\n\t&quot;my-data&quot;: {\r\n\t\t&quot;phone-number&quot;: &quot;5555555555&quot;,\r\n\t\t&quot;userId&quot;: &quot;1234&quot;,\r\n\t\t&quot;version&quot;: &quot;2&quot;,\r\n\t\t&quot;more-data&quot;: {\r\n\t\t\t&quot;transaction-data&quot;: [\r\n\t\t\t\t{\r\n\t\t\t\t\t&quot;Merchant&quot;: &quot;Walmart&quot;,\r\n\t\t\t\t\t&quot;authorized&quot;: &quot;true&quot;,\r\n\t\t\t\t\t&quot;amount&quot;: &quot;7.50&quot;,\r\n\t\t\t\t\t&quot;is_card_expired&quot;: false,\r\n\t\t\t\t\t&quot;credit_limit&quot;: &quot;2000&quot;\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n I am able to print everything that has a key, but need help cleanly dealing with the array inside transaction-data. Notice that is an array with no key. Therefore, it is tricky to get inside, and my iterator (`Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; Iterator = node.fields()`) turns up empty. I cannot use `node.elements()`, because I need to get the key for everything, even if it is not something to print out. To print everything, my result should look something like\r\n\r\n```\r\n&quot;phone-number&quot;: &quot;5555555555&quot;\r\n&quot;userId&quot;: &quot;1234&quot;\r\n&quot;version&quot;: &quot;2&quot;\r\n&quot;Merchant&quot;: &quot;Walmart&quot;,\r\n&quot;authorized&quot;: &quot;true&quot;,\r\n&quot;amount&quot;: &quot;7.50&quot;,\r\n&quot;is_card_expired&quot;: false,\r\n&quot;credit_limit&quot;: &quot;2000&quot;\r\n\r\n```\r\n\r\nThe best I have been able to come up with is after declaring my interator, I check if it hasNext(), and if not, then I create another iterator of elements (`Iterator&lt;JsonNode&gt; iterator2 = node.elements();`). While that has next I recursively call my method on each of the nodes inside that. This works, but I am not sure this is the best solution. How would you cleanly iterate through/traverse my JSON file to hit each and every node, regardless of if it is an object, an array, or a value node, and regardless of whether or not a key exists (if a key does not exist then I need not print it out, I just need to enter that container and print out the items inside of it","title":"How to use Jackson JSON library to print everything in a json file, including nested array objects with no key and with objects in the array?","body":"<p>I need to print everything in a JSON file using Jackson in Java. I am 90% of the way there. Here is my Json File:</p>\n<pre><code>{\n    &quot;my-data&quot;: {\n        &quot;phone-number&quot;: &quot;5555555555&quot;,\n        &quot;userId&quot;: &quot;1234&quot;,\n        &quot;version&quot;: &quot;2&quot;,\n        &quot;more-data&quot;: {\n            &quot;transaction-data&quot;: [\n                {\n                    &quot;Merchant&quot;: &quot;Walmart&quot;,\n                    &quot;authorized&quot;: &quot;true&quot;,\n                    &quot;amount&quot;: &quot;7.50&quot;,\n                    &quot;is_card_expired&quot;: false,\n                    &quot;credit_limit&quot;: &quot;2000&quot;\n                }\n            ]\n        }\n    }\n}\n</code></pre>\n<p>I am able to print everything that has a key, but need help cleanly dealing with the array inside transaction-data. Notice that is an array with no key. Therefore, it is tricky to get inside, and my iterator (<code>Iterator&lt;Map.Entry&lt;String, JsonNode&gt;&gt; Iterator = node.fields()</code>) turns up empty. I cannot use <code>node.elements()</code>, because I need to get the key for everything, even if it is not something to print out. To print everything, my result should look something like</p>\n<pre><code>&quot;phone-number&quot;: &quot;5555555555&quot;\n&quot;userId&quot;: &quot;1234&quot;\n&quot;version&quot;: &quot;2&quot;\n&quot;Merchant&quot;: &quot;Walmart&quot;,\n&quot;authorized&quot;: &quot;true&quot;,\n&quot;amount&quot;: &quot;7.50&quot;,\n&quot;is_card_expired&quot;: false,\n&quot;credit_limit&quot;: &quot;2000&quot;\n\n</code></pre>\n<p>The best I have been able to come up with is after declaring my interator, I check if it hasNext(), and if not, then I create another iterator of elements (<code>Iterator&lt;JsonNode&gt; iterator2 = node.elements();</code>). While that has next I recursively call my method on each of the nodes inside that. This works, but I am not sure this is the best solution. How would you cleanly iterate through/traverse my JSON file to hit each and every node, regardless of if it is an object, an array, or a value node, and regardless of whether or not a key exists (if a key does not exist then I need not print it out, I just need to enter that container and print out the items inside of it</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"tags":[],"owner":{"account_id":1284143,"reputation":43090,"user_id":1237575,"accept_rate":96,"display_name":"Rafael Winterhalter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697276482,"creation_date":1697276482,"answer_id":77292338,"question_id":77281433,"body_markdown":"You can register your own bindings for such purposes. This allows you to resolve a value once and extract it again and again.\r\n\r\nThe issue is that an array or a list cannot be represented as a conpile time constant, that implies allocation on each access. Therefore it is hard to create a general purpose mechanism. ","title":"Byte Buddy: Dynamic field value","body":"<p>You can register your own bindings for such purposes. This allows you to resolve a value once and extract it again and again.</p>\n<p>The issue is that an array or a list cannot be represented as a conpile time constant, that implies allocation on each access. Therefore it is hard to create a general purpose mechanism.</p>\n"}],"owner":{"account_id":3984238,"reputation":61,"user_id":3285337,"display_name":"chelayel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77292338,"answer_count":1,"score":0,"last_activity_date":1697276482,"creation_date":1697120420,"question_id":77281433,"body_markdown":"I am working with byte buddy and I want to get values for all private fields in my intercepted class.\r\nI know that I can do something like this\r\n\r\n       public static boolean intercept(@Advice.FieldValue(&quot;fieldName&quot;) String fieldName)\r\n\r\nMy issue is that my interceptor works on multiple classes so the fields will vary.\r\nIs there a way to get all fields value for an intercepted class? Or maybe call the getter of those fields in my interceptor?\r\nThe reason why I&#39;m looking for @FieldValue is that I am using byte buddy on build time and I want to avoid having to use reflection on run time to get the field values or invoke the getter","title":"Byte Buddy: Dynamic field value","body":"<p>I am working with byte buddy and I want to get values for all private fields in my intercepted class.\nI know that I can do something like this</p>\n<pre><code>   public static boolean intercept(@Advice.FieldValue(&quot;fieldName&quot;) String fieldName)\n</code></pre>\n<p>My issue is that my interceptor works on multiple classes so the fields will vary.\nIs there a way to get all fields value for an intercepted class? Or maybe call the getter of those fields in my interceptor?\nThe reason why I'm looking for @FieldValue is that I am using byte buddy on build time and I want to avoid having to use reflection on run time to get the field values or invoke the getter</p>\n"},{"tags":["java","maven","javafx","properties-file"],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697265697,"creation_date":1697265697,"answer_id":77291878,"question_id":77291173,"body_markdown":"The answer to the question you linked links to the [Maven documentation that explains how to do this](https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)\r\n\r\n&gt; put those files into src/main/resources which should not filtered and the other files into src/main/resources-filtered\r\n\r\nSo the source for your filtered version properties should be under src/main/resources-filtered instead of src/main/resources (or any directory under that).\r\n\r\nYou also need to adjust the resources definition in the pom to match the names mentioned in this answer. The linked Maven documentation tells you how to do that, step by step.","title":"Maven filtered properties file","body":"<p>The answer to the question you linked links to the <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html\" rel=\"nofollow noreferrer\">Maven documentation that explains how to do this</a></p>\n<blockquote>\n<p>put those files into src/main/resources which should not filtered and the other files into src/main/resources-filtered</p>\n</blockquote>\n<p>So the source for your filtered version properties should be under src/main/resources-filtered instead of src/main/resources (or any directory under that).</p>\n<p>You also need to adjust the resources definition in the pom to match the names mentioned in this answer. The linked Maven documentation tells you how to do that, step by step.</p>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697276357,"creation_date":1697276357,"answer_id":77292330,"question_id":77291173,"body_markdown":"Right now the `versions` directory is included by both `&lt;resource&gt;` elements. That&#39;s why it shows up twice. It&#39;s also the reason why the file in `target/classes/versions` is unfiltered (processed by the first `&lt;resource&gt;` element) and the file in `target/classes` is filtered (processed by the second `&lt;resource&gt;` element).\r\n\r\nI haven&#39;t tried it, but if you exclude the `versions` folder from the first `&lt;resource&gt;` element you will probably get the result you want - only one copy of the version files in `target/classes` with filtering applied. If you instead want to put the files in `target/classes/versions`, read [jewelsea&#39;s answer][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77291878/1180351","title":"Maven filtered properties file","body":"<p>Right now the <code>versions</code> directory is included by both <code>&lt;resource&gt;</code> elements. That's why it shows up twice. It's also the reason why the file in <code>target/classes/versions</code> is unfiltered (processed by the first <code>&lt;resource&gt;</code> element) and the file in <code>target/classes</code> is filtered (processed by the second <code>&lt;resource&gt;</code> element).</p>\n<p>I haven't tried it, but if you exclude the <code>versions</code> folder from the first <code>&lt;resource&gt;</code> element you will probably get the result you want - only one copy of the version files in <code>target/classes</code> with filtering applied. If you instead want to put the files in <code>target/classes/versions</code>, read <a href=\"https://stackoverflow.com/a/77291878/1180351\">jewelsea's answer</a></p>\n"}],"owner":{"account_id":4459325,"reputation":1497,"user_id":3628679,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697276357,"creation_date":1697242040,"question_id":77291173,"body_markdown":"Hi I tried to get hold of the artifact version number from my pom.xml to use it in this typical about &amp;  license information window. In essence I implemented the accepted solution given in [https://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code][1], and in order to adress the concern, raised in one of the comments, about filtering the other resource files, I seperated the version information in one directory and all the rest, in the conventional location. In the pom file this looks like this:\r\n   \r\n\r\n     &lt;resources&gt;\r\n\t\t&lt;resource&gt;\r\n\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n\t\t&lt;/resource&gt;\t\r\n\t\t &lt;resource&gt;\r\n\t\t\t&lt;directory&gt;src/main/resources/versions&lt;/directory&gt;\r\n\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n\t\t\t&lt;includes&gt;\r\n        \t\t&lt;include&gt;**/version.properties&lt;/include&gt;\r\n    \t\t&lt;/includes&gt;\r\n\t\t&lt;/resource&gt;\t\r\n\t&lt;/resources&gt;\r\n\r\nI build this using `mvn clean javafx:run` from within Eclipse\r\n\r\nGood news: It works. \r\n\r\nBad news: With unintended side effects: Both, in my *target/classes* directory and in *target/classes/versions* I have the *version.properties* file. The one in *target/classes/versions* still contains the original `version=${project.version}` statement and the one in *target/classes* the expected `version=1.0.0`. So why do I complain? I only \r\n expected the one file in *target/versions* containing the `version=1.0.0` statement.\r\n\r\nCan somebody please explain why I get the two files in the target tree, and whether there is a cleaner way, such that I have, like now, one properties source file somewhere in the *src/main/resources* branch - without interferring with the other resource files - and **only one** resulting properties file somewhere in the target tree, having the pom artifact version id?\r\n\r\nThank you in advance.\r\n\r\nMaybe you need the entire pom?\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;de.aname&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;sifuSays&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;repositories&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;jcenter&lt;/id&gt;\r\n    \t\t\t&lt;name&gt;jcenter-bintray&lt;/name&gt;\r\n    \t\t\t&lt;url&gt;https://jcenter.bintray.com&lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \t&lt;/repositories&gt;\r\n    \r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;26.19.0&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;!-- JavaFX --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;19&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- JAXB API only --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.3&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Framegrabber to get image from movies --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javacv&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.5.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;ffmpeg-platform&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0-1.5.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;flandmark&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.07-1.5.5&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;!--https://mvnrepository.com/artifact/com.google.cloud/google-cloud-texttospeech --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;google-cloud-texttospeech&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n    \t\t\t&lt;/resource&gt;\t\r\n    \t\t\t &lt;resource&gt;\r\n        \t\t\t&lt;directory&gt;src/main/resources/versions&lt;/directory&gt;\r\n        \t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n        \t\t\t&lt;includes&gt;\r\n                \t\t&lt;include&gt;**/version.properties&lt;/include&gt;\r\n            \t\t&lt;/includes&gt;\r\n      \t\t\t&lt;/resource&gt;\t\r\n      \t\t&lt;/resources&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;11&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;11&lt;/target&gt;\r\n    \t\t\t\t\t&lt;release&gt;11&lt;/release&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;0.0.8&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;!-- Default configuration for running --&gt;\r\n    \t\t\t\t\t\t&lt;!-- Usage: mvn clean javafx:run --&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;default-cli&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;de.aname.sifuSays.App&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.3.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;archive&gt;\r\n    \t\t\t\t\t\t&lt;manifest&gt;\r\n    \t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;de.aname.sifuSays.AppLauncher&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/manifest&gt;\r\n    \t\t\t\t\t&lt;/archive&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;outputFile&gt;${dir}/${project.artifactId}.jar&lt;/outputFile&gt;\r\n    \t\t\t\t\t\t\t&lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\r\n    \t\t\t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;de.aname.sifuSays.AppLauncher&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code","title":"Maven filtered properties file","body":"<p>Hi I tried to get hold of the artifact version number from my pom.xml to use it in this typical about &amp;  license information window. In essence I implemented the accepted solution given in <a href=\"https://stackoverflow.com/questions/3697449/retrieve-version-from-maven-pom-xml-in-code\">Retrieve version from maven pom.xml in code</a>, and in order to adress the concern, raised in one of the comments, about filtering the other resource files, I seperated the version information in one directory and all the rest, in the conventional location. In the pom file this looks like this:</p>\n<pre><code> &lt;resources&gt;\n    &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n    &lt;/resource&gt; \n     &lt;resource&gt;\n        &lt;directory&gt;src/main/resources/versions&lt;/directory&gt;\n        &lt;filtering&gt;true&lt;/filtering&gt;\n        &lt;includes&gt;\n            &lt;include&gt;**/version.properties&lt;/include&gt;\n        &lt;/includes&gt;\n    &lt;/resource&gt; \n&lt;/resources&gt;\n</code></pre>\n<p>I build this using <code>mvn clean javafx:run</code> from within Eclipse</p>\n<p>Good news: It works.</p>\n<p>Bad news: With unintended side effects: Both, in my <em>target/classes</em> directory and in <em>target/classes/versions</em> I have the <em>version.properties</em> file. The one in <em>target/classes/versions</em> still contains the original <code>version=${project.version}</code> statement and the one in <em>target/classes</em> the expected <code>version=1.0.0</code>. So why do I complain? I only\nexpected the one file in <em>target/versions</em> containing the <code>version=1.0.0</code> statement.</p>\n<p>Can somebody please explain why I get the two files in the target tree, and whether there is a cleaner way, such that I have, like now, one properties source file somewhere in the <em>src/main/resources</em> branch - without interferring with the other resource files - and <strong>only one</strong> resulting properties file somewhere in the target tree, having the pom artifact version id?</p>\n<p>Thank you in advance.</p>\n<p>Maybe you need the entire pom?</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;de.aname&lt;/groupId&gt;\n    &lt;artifactId&gt;sifuSays&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;jcenter&lt;/id&gt;\n            &lt;name&gt;jcenter-bintray&lt;/name&gt;\n            &lt;url&gt;https://jcenter.bintray.com&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\n                &lt;version&gt;26.19.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- JavaFX --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;19&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- JAXB API only --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;4.0.3&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Framegrabber to get image from movies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;javacv&lt;/artifactId&gt;\n            &lt;version&gt;1.5.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;ffmpeg-platform&lt;/artifactId&gt;\n            &lt;version&gt;6.0-1.5.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;\n            &lt;artifactId&gt;flandmark&lt;/artifactId&gt;\n            &lt;version&gt;1.07-1.5.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!--https://mvnrepository.com/artifact/com.google.cloud/google-cloud-texttospeech --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;google-cloud-texttospeech&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/resources&lt;/directory&gt;\n            &lt;/resource&gt; \n             &lt;resource&gt;\n                &lt;directory&gt;src/main/resources/versions&lt;/directory&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/version.properties&lt;/include&gt;\n                &lt;/includes&gt;\n            &lt;/resource&gt; \n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;de.aname.sifuSays.App&lt;/mainClass&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;mainClass&gt;de.aname.sifuSays.AppLauncher&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.5.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputFile&gt;${dir}/${project.artifactId}.jar&lt;/outputFile&gt;\n                            &lt;createDependencyReducedPom&gt;false&lt;/createDependencyReducedPom&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;de.aname.sifuSays.AppLauncher&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","hibernate","jpa","quarkus","quarkus-panache"],"answers":[{"comments":[{"owner":{"account_id":28283190,"reputation":78,"user_id":21624524,"display_name":"renatompf"},"score":1,"creation_date":1697360905,"post_id":77292320,"comment_id":136268036,"body_markdown":"Thanks for the tip!\nAlthough I was not able to do `Panache.getSession()` and add to go with `Panache.getEntityManager()` but in the end worked just fine!\nThank you!","body":"Thanks for the tip! Although I was not able to do <code>Panache.getSession()</code> and add to go with <code>Panache.getEntityManager()</code> but in the end worked just fine! Thank you!"},{"owner":{"account_id":124590,"reputation":8425,"user_id":319773,"accept_rate":89,"display_name":"Bevor"},"score":0,"creation_date":1697787129,"post_id":77292320,"comment_id":136326025,"body_markdown":"@renatompf If this solution works for you, please mark this answer as accepted.","body":"@renatompf If this solution works for you, please mark this answer as accepted."}],"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697276159,"creation_date":1697276159,"answer_id":77292320,"question_id":77289998,"body_markdown":"Currently (Oct, 2023) it&#39;s not supported. [Here](https://github.com/quarkusio/quarkus/issues/34136) is the issue.\r\nYou can call Hibernate API directly like\r\n\r\n```java\r\nfinal var queryString = &quot;&quot;&quot;\r\n                            SELECT mc.* FROM my_class mc\r\n                            WHERE mc.id = :classId\r\n                        &quot;&quot;&quot;;\r\n\r\nreturn Panache.getSession()\r\n    .map(session -&gt; session.createNativeQuery(queryString, MyClass.class))\r\n    .map(query -&gt; query.setParameter(&quot;classId&quot;, id))\r\n    .map(query -&gt; query.setMaxResults(1))\r\n    .map(query -&gt; query.getResultStream().findFirst());\r\n}\r\n```","title":"NamedNativeQuery not defined in JPA entitty or one of its super classes","body":"<p>Currently (Oct, 2023) it's not supported. <a href=\"https://github.com/quarkusio/quarkus/issues/34136\" rel=\"nofollow noreferrer\">Here</a> is the issue.\nYou can call Hibernate API directly like</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var queryString = &quot;&quot;&quot;\n                            SELECT mc.* FROM my_class mc\n                            WHERE mc.id = :classId\n                        &quot;&quot;&quot;;\n\nreturn Panache.getSession()\n    .map(session -&gt; session.createNativeQuery(queryString, MyClass.class))\n    .map(query -&gt; query.setParameter(&quot;classId&quot;, id))\n    .map(query -&gt; query.setMaxResults(1))\n    .map(query -&gt; query.getResultStream().findFirst());\n}\n</code></pre>\n"}],"owner":{"account_id":28283190,"reputation":78,"user_id":21624524,"display_name":"renatompf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77292320,"answer_count":1,"score":0,"last_activity_date":1697276159,"creation_date":1697222109,"question_id":77289998,"body_markdown":"I&#39;m currently building an application Quarkus and when I try to use the @NativeNamedQuery my application throws an `PanacheQueryException` saying:\r\n\r\n`io.quarkus.panache.common.exception.PanacheQueryException: The named query &#39;ClassName.findUsingNamedNativeQuery&#39; must be defined on your JPA entity or one of its super classes.`\r\n\r\nThis is the code that I have:\r\n\r\n```java\r\n\r\n@ApplicationScoped\r\npublic class MyClassRepository implements PanacheRepositoryBase&lt;MyClass, UUID&gt; {\r\n\r\n    public Optional&lt;MyClass&gt; findUsingNamedNativeQuery(UUID classId){\r\n        return find(&quot;#MyClass.findUsingNamedNativeQuery&quot;, Parameters.with(&quot;classId&quot;,classId)).singleResultOptional();\r\n    }\r\n}\r\n```\r\nAnd this is my @NamedNativeQuery in My Class:\r\n\r\n```java\r\n\r\n@Entity\r\n@Table(name = &quot;my_class&quot;)\r\n@NamedNativeQueries({\r\n        @NamedNativeQuery(name = &quot;MyClass.findUsingNamedNativeQuery&quot;,\r\n        query = &quot;&quot;&quot;\r\n                    SELECT mc.* FROM my_class mc\r\n                    WHERE mc.id = :classId\r\n                &quot;&quot;&quot;,\r\n        resultClass = MyClass.class)\r\n})\r\npublic class MyClass{\r\n...\r\n}\r\n\r\n```\r\n\r\nThis is a very strange error that I&#39;ve never seen while programing in Spring or JakartaEE.\r\nBecause it is complaining that the named query is not defined in JPA Entity but it is... I used the same procedures I normally used while working with JakartaEE.\r\n\r\nDoes anyone know how to use @NamedNativeQuery in Quarkus, if it is really possible?\r\n","title":"NamedNativeQuery not defined in JPA entitty or one of its super classes","body":"<p>I'm currently building an application Quarkus and when I try to use the @NativeNamedQuery my application throws an <code>PanacheQueryException</code> saying:</p>\n<p><code>io.quarkus.panache.common.exception.PanacheQueryException: The named query 'ClassName.findUsingNamedNativeQuery' must be defined on your JPA entity or one of its super classes.</code></p>\n<p>This is the code that I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@ApplicationScoped\npublic class MyClassRepository implements PanacheRepositoryBase&lt;MyClass, UUID&gt; {\n\n    public Optional&lt;MyClass&gt; findUsingNamedNativeQuery(UUID classId){\n        return find(&quot;#MyClass.findUsingNamedNativeQuery&quot;, Parameters.with(&quot;classId&quot;,classId)).singleResultOptional();\n    }\n}\n</code></pre>\n<p>And this is my @NamedNativeQuery in My Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Entity\n@Table(name = &quot;my_class&quot;)\n@NamedNativeQueries({\n        @NamedNativeQuery(name = &quot;MyClass.findUsingNamedNativeQuery&quot;,\n        query = &quot;&quot;&quot;\n                    SELECT mc.* FROM my_class mc\n                    WHERE mc.id = :classId\n                &quot;&quot;&quot;,\n        resultClass = MyClass.class)\n})\npublic class MyClass{\n...\n}\n\n</code></pre>\n<p>This is a very strange error that I've never seen while programing in Spring or JakartaEE.\nBecause it is complaining that the named query is not defined in JPA Entity but it is... I used the same procedures I normally used while working with JakartaEE.</p>\n<p>Does anyone know how to use @NamedNativeQuery in Quarkus, if it is really possible?</p>\n"},{"tags":["java","time","formula"],"comments":[{"owner":{"account_id":2232270,"reputation":3823,"user_id":2351110,"display_name":"mattmess1221"},"score":1,"creation_date":1523992385,"post_id":49885747,"comment_id":86787653,"body_markdown":"If this isn&#39;t for an assignment, you should consider checking out the [Duration](https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html) class from java 8&#39;s time api. It has some helper methods for this.","body":"If this isn&#39;t for an assignment, you should consider checking out the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\">Duration</a> class from java 8&#39;s time api. It has some helper methods for this."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1523994250,"post_id":49885747,"comment_id":86788635,"body_markdown":"For the word usage, this isn’t a timestamp, it sounds more like a duration, an amount of time. A *timestamp* is information that identifies when an event occurred.","body":"For the word usage, this isn’t a timestamp, it sounds more like a duration, an amount of time. A <i>timestamp</i> is information that identifies when an event occurred."}],"answers":[{"tags":[],"owner":{"account_id":7260601,"reputation":1422,"user_id":6323834,"display_name":"Dhruv Sehgal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1523992423,"creation_date":1523992423,"answer_id":49885843,"question_id":49885747,"body_markdown":"    int timeToGrow = 1352364;\r\n    int secs = timeToGrow % 60;\r\n    int mins = (timeToGrow / 60) % 60;\r\n    int hours = ((timeToGrow / 60) / 60) % 24;\r\n    int days = (((timeToGrow / 60) / 60) / 24) % 7;\r\n    int weeks = (((timeToGrow/60)/60)/24)/7;\r\n    System.out.println(weeks + &quot; Weeks &quot;+ days + &quot; Days &quot; + hours + &quot; Hours &quot; + mins + &quot; Minutes &quot; + secs + &quot; Seconds.&quot;);\r\n","title":"How to convert a time in seconds to a full timestamp?","body":"<pre><code>int timeToGrow = 1352364;\nint secs = timeToGrow % 60;\nint mins = (timeToGrow / 60) % 60;\nint hours = ((timeToGrow / 60) / 60) % 24;\nint days = (((timeToGrow / 60) / 60) / 24) % 7;\nint weeks = (((timeToGrow/60)/60)/24)/7;\nSystem.out.println(weeks + \" Weeks \"+ days + \" Days \" + hours + \" Hours \" + mins + \" Minutes \" + secs + \" Seconds.\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1523994129,"post_id":49885850,"comment_id":86788581,"body_markdown":"Good answer. For Java 6 and 7 I’d prefer [the ThreeTen Backport](http://www.threeten.org/threetenbp/), the backport of `java.time`, over Joda-Time. For Java 5 Joda-Time is the right choice.","body":"Good answer. For Java 6 and 7 I’d prefer <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">the ThreeTen Backport</a>, the backport of <code>java.time</code>, over Joda-Time. For Java 5 Joda-Time is the right choice."},{"owner":{"account_id":11876864,"reputation":41,"user_id":8691675,"accept_rate":0,"display_name":"J Boonders"},"score":0,"creation_date":1524075244,"post_id":49885850,"comment_id":86828590,"body_markdown":"Thanks for the answer, however I am unsure of how to correctly use duration.","body":"Thanks for the answer, however I am unsure of how to correctly use duration."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1524083440,"post_id":49885850,"comment_id":86832967,"body_markdown":"@JBoonders For how to use `Duration`, I think the answer gives a nice demonstration. You may also visit [the Java date and time tutorial](https://docs.oracle.com/javase/tutorial/datetime/), in particular [the section on Period and Duration](https://docs.oracle.com/javase/tutorial/datetime/iso/period.html). And search the net. Finally [the `Duration` class documentation](https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html).","body":"@JBoonders For how to use <code>Duration</code>, I think the answer gives a nice demonstration. You may also visit <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">the Java date and time tutorial</a>, in particular <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/period.html\" rel=\"nofollow noreferrer\">the section on Period and Duration</a>. And search the net. Finally <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\">the <code>Duration</code> class documentation</a>."}],"tags":[],"owner":{"account_id":514136,"reputation":120958,"user_id":1593077,"accept_rate":49,"display_name":"einpoklum"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1697275126,"creation_date":1523992458,"answer_id":49885850,"question_id":49885747,"body_markdown":"This depends on which version of Java you&#39;re using.\r\n\r\n## Java 9 or later\r\n\r\nUse the [`Duration`][1] class as explained above; but with newer versions of Java, this class has methods for the proper remainders, and you can generate your string as follows:\r\n\r\n    System.out.println(\r\n        duration.toDaysPart() + &quot; days, &quot; +\r\n        duration.toHoursPart() + &quot; hours, &quot; +\r\n        duration.toMinutesPart() + &quot; minutes, &quot; + \r\n        duration.toSecondsPart() + &quot; seconds.&quot;\r\n    );\r\n\r\n... but this is without weeks. If you want weeks, get the days, set `final int DAYS_IN_A_WEEK = 7`, and use `days / DAYS_IN_A_WEEK` and ` days % DAYS_IN_A_WEEK`.\r\n\r\n## Java 8 or later\r\n\r\nYou could use the Java [`Duration`][1] class:\r\n\r\n     Duration duration = Duration.ofSeconds(1352364);\r\n\r\nits APIs has methods to get you the number of nanoseconds, seconds, hours, days, etc. For example:\r\n\r\n     System.out.println(duration.toDays() + &quot; days&quot;);\r\n\r\nTo get the remainders you could use the methods `.minusDays()`, `minusHours()`   and so on, or do something like:\r\n\r\n     final int HOURS_IN_A_DAY = 24;\r\n     System.out.println(duration.toHours() % HOURS_IN_A_DAY);\r\n\r\n\r\n## Java 7 or earlier\r\n\r\nIf you&#39;re working with earlier versions of Java, use the [backport of the newer-Java-versions `java.time` classes][2] (thanks @OleVV for the suggestion), or the [Joda Time classes][3] - both of these have a `Duration` class, and Joda has a `PeriodFormatter` class, as described in [this answer][4].\r\n\r\nIf you&#39;re using Java 5 or earlier, only Joda will work.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\r\n  [2]: http://www.threeten.org/threetenbp/\r\n  [3]: http://www.joda.org/joda-time/\r\n  [4]: https://stackoverflow.com/a/3471418/1593077","title":"How to convert a time in seconds to a full timestamp?","body":"<p>This depends on which version of Java you're using.</p>\n<h2>Java 9 or later</h2>\n<p>Use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a> class as explained above; but with newer versions of Java, this class has methods for the proper remainders, and you can generate your string as follows:</p>\n<pre><code>System.out.println(\n    duration.toDaysPart() + &quot; days, &quot; +\n    duration.toHoursPart() + &quot; hours, &quot; +\n    duration.toMinutesPart() + &quot; minutes, &quot; + \n    duration.toSecondsPart() + &quot; seconds.&quot;\n);\n</code></pre>\n<p>... but this is without weeks. If you want weeks, get the days, set <code>final int DAYS_IN_A_WEEK = 7</code>, and use <code>days / DAYS_IN_A_WEEK</code> and <code> days % DAYS_IN_A_WEEK</code>.</p>\n<h2>Java 8 or later</h2>\n<p>You could use the Java <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\"><code>Duration</code></a> class:</p>\n<pre><code> Duration duration = Duration.ofSeconds(1352364);\n</code></pre>\n<p>its APIs has methods to get you the number of nanoseconds, seconds, hours, days, etc. For example:</p>\n<pre><code> System.out.println(duration.toDays() + &quot; days&quot;);\n</code></pre>\n<p>To get the remainders you could use the methods <code>.minusDays()</code>, <code>minusHours()</code>   and so on, or do something like:</p>\n<pre><code> final int HOURS_IN_A_DAY = 24;\n System.out.println(duration.toHours() % HOURS_IN_A_DAY);\n</code></pre>\n<h2>Java 7 or earlier</h2>\n<p>If you're working with earlier versions of Java, use the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">backport of the newer-Java-versions <code>java.time</code> classes</a> (thanks @OleVV for the suggestion), or the <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda Time classes</a> - both of these have a <code>Duration</code> class, and Joda has a <code>PeriodFormatter</code> class, as described in <a href=\"https://stackoverflow.com/a/3471418/1593077\">this answer</a>.</p>\n<p>If you're using Java 5 or earlier, only Joda will work.</p>\n"}],"owner":{"account_id":11876864,"reputation":41,"user_id":8691675,"accept_rate":0,"display_name":"J Boonders"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":49885843,"answer_count":2,"score":0,"last_activity_date":1697275126,"creation_date":1523992110,"question_id":49885747,"body_markdown":"I am having trouble converting the time `1352364` in seconds to a time stamp format in &quot;Weeks, Days, Hours, Seconds, Minutes&quot;. Here is my code so far.\r\n\r\n    int timeToGrow = 1352364;\r\n        int secs = timeToGrow % 60;\r\n        int mins = (timeToGrow / 60) % 60;\r\n        int hours = (timeToGrow / 60) / 60;\r\n        int days = ((timeToGrow / 60) / 60) / 24;\r\n        int weeks = (((timeToGrow/60)/60)/24)/7;\r\n        \r\n        System.out.println(weeks + &quot; Weeks &quot;+ days + &quot; Days &quot; + hours + &quot; Hours &quot; + mins + &quot; Minutes &quot; + secs + &quot; Seconds.&quot;);\r\n\r\nThe code should print out `2 Weeks 1 Days 15 Hours 39 Minutes 24 Seconds`, but instead, in prints out `2 Weeks 15 Days 375 Hours 39 Minutes 24 Seconds.` I think I see the problem, however I am not sure how to fix it. Excuse my poor wording, but I think that the hours section includes the time in the days and the weeks section, unlike where the time is seperate, like in minutes and seconds (again, sorry Im not sure how to word it). How can I change the formulas to correctly display the correct timestamp? Thank you very much!\r\n\r\n","title":"How to convert a time in seconds to a full timestamp?","body":"<p>I am having trouble converting the time <code>1352364</code> in seconds to a time stamp format in \"Weeks, Days, Hours, Seconds, Minutes\". Here is my code so far.</p>\n\n<pre><code>int timeToGrow = 1352364;\n    int secs = timeToGrow % 60;\n    int mins = (timeToGrow / 60) % 60;\n    int hours = (timeToGrow / 60) / 60;\n    int days = ((timeToGrow / 60) / 60) / 24;\n    int weeks = (((timeToGrow/60)/60)/24)/7;\n\n    System.out.println(weeks + \" Weeks \"+ days + \" Days \" + hours + \" Hours \" + mins + \" Minutes \" + secs + \" Seconds.\");\n</code></pre>\n\n<p>The code should print out <code>2 Weeks 1 Days 15 Hours 39 Minutes 24 Seconds</code>, but instead, in prints out <code>2 Weeks 15 Days 375 Hours 39 Minutes 24 Seconds.</code> I think I see the problem, however I am not sure how to fix it. Excuse my poor wording, but I think that the hours section includes the time in the days and the weeks section, unlike where the time is seperate, like in minutes and seconds (again, sorry Im not sure how to word it). How can I change the formulas to correctly display the correct timestamp? Thank you very much!</p>\n"},{"tags":["java","android","android-layout","android-xml","android-dialog"],"comments":[{"owner":{"account_id":269807,"reputation":2559,"user_id":559379,"accept_rate":57,"display_name":"Prachi"},"score":0,"creation_date":1440744475,"post_id":32264876,"comment_id":52408747,"body_markdown":"Try dialogFragment... if you wont get solution","body":"Try dialogFragment... if you wont get solution"},{"owner":{"account_id":2849686,"reputation":6485,"user_id":2447152,"display_name":"Rustam"},"score":0,"creation_date":1440744506,"post_id":32264876,"comment_id":52408761,"body_markdown":"give fixed height with scrollview for textview","body":"give fixed height with scrollview for textview"},{"owner":{"account_id":1268658,"reputation":14001,"user_id":1225413,"accept_rate":80,"display_name":"Akhil Jain"},"score":0,"creation_date":1440745409,"post_id":32264876,"comment_id":52409239,"body_markdown":"@Prachi tried, but did not work. If you want can share the code. If you do want to take a closer look at it.","body":"@Prachi tried, but did not work. If you want can share the code. If you do want to take a closer look at it."},{"owner":{"account_id":1268658,"reputation":14001,"user_id":1225413,"accept_rate":80,"display_name":"Akhil Jain"},"score":0,"creation_date":1440745475,"post_id":32264876,"comment_id":52409276,"body_markdown":"@Rustam will try to do that now, but user will not know, that there is a scroll, unless configure the scrollbar visibility","body":"@Rustam will try to do that now, but user will not know, that there is a scroll, unless configure the scrollbar visibility"}],"answers":[{"tags":[],"owner":{"account_id":4523707,"reputation":6025,"user_id":3676184,"accept_rate":17,"display_name":"Pavya"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440744556,"creation_date":1440744556,"answer_id":32264953,"question_id":32264876,"body_markdown":"    &lt;LinearLayout\r\n                android:id=&quot;@+id/loutButton&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignParentBottom=&quot;true&quot;\r\n                android:layout_below=&quot;@+id/message&quot;\r\n                android:layout_centerHorizontal=&quot;true&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:orientation=&quot;horizontal&quot; &gt;\r\n\r\nremove `android:layout_alignParentBottom=&quot;true&quot;` from above code and check.","title":"Why is Android custom dialog coming fullscreen","body":"<pre><code>&lt;LinearLayout\n            android:id=\"@+id/loutButton\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:layout_alignParentBottom=\"true\"\n            android:layout_below=\"@+id/message\"\n            android:layout_centerHorizontal=\"true\"\n            android:layout_marginTop=\"5dp\"\n            android:orientation=\"horizontal\" &gt;\n</code></pre>\n\n<p>remove <code>android:layout_alignParentBottom=\"true\"</code> from above code and check.</p>\n"},{"comments":[{"owner":{"account_id":1268658,"reputation":14001,"user_id":1225413,"accept_rate":80,"display_name":"Akhil Jain"},"score":0,"creation_date":1440745654,"post_id":32264958,"comment_id":52409369,"body_markdown":"@Prachi...Thanks a lot.It works GREAT!.  Why is this happening, any idea?","body":"@Prachi...Thanks a lot.It works GREAT!.  Why is this happening, any idea?"},{"owner":{"account_id":269807,"reputation":2559,"user_id":559379,"accept_rate":57,"display_name":"Prachi"},"score":0,"creation_date":1440746773,"post_id":32264958,"comment_id":52409969,"body_markdown":"@AkhilJain no idea.... just come to know when i was stuck with similar issue.. better to user layout_gravity or relative layout...if you come across the real reason let me know :)","body":"@AkhilJain no idea.... just come to know when i was stuck with similar issue.. better to user layout_gravity or relative layout...if you come across the real reason let me know :)"},{"owner":{"account_id":1127417,"reputation":47697,"user_id":1114338,"accept_rate":100,"display_name":"M D"},"score":0,"creation_date":1440747257,"post_id":32264958,"comment_id":52410249,"body_markdown":"@Prachi I like your answer. Only 1 line. +1","body":"@Prachi I like your answer. Only 1 line. +1"}],"tags":[],"owner":{"account_id":269807,"reputation":2559,"user_id":559379,"accept_rate":57,"display_name":"Prachi"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1440744574,"creation_date":1440744574,"answer_id":32264958,"question_id":32264876,"body_markdown":"remove ` android:layout_alignParentBottom=&quot;true&quot;`line from linear layout","title":"Why is Android custom dialog coming fullscreen","body":"<p>remove <code>android:layout_alignParentBottom=\"true\"</code>line from linear layout</p>\n"},{"comments":[{"owner":{"account_id":1268658,"reputation":14001,"user_id":1225413,"accept_rate":80,"display_name":"Akhil Jain"},"score":0,"creation_date":1440746330,"post_id":32265298,"comment_id":52409718,"body_markdown":"thanks for your answer, think this through. How can possibly specify the exact height and width for content, it will vary on screen size and dimension. Also see Answer 5 in solutions already tried I have already implemented your solution  with `WRAP_CONTENT` and got nowhere.","body":"thanks for your answer, think this through. How can possibly specify the exact height and width for content, it will vary on screen size and dimension. Also see Answer 5 in solutions already tried I have already implemented your solution  with <code>WRAP_CONTENT</code> and got nowhere."}],"tags":[],"owner":{"account_id":3749907,"reputation":204,"user_id":3117640,"display_name":"leo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440745959,"creation_date":1440745959,"answer_id":32265298,"question_id":32264876,"body_markdown":"you can set this code in your dialog\r\n\r\n    DisplayMetrics displayMetrics = new DisplayMetrics();\r\n\tdialog.getWindow().getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n\tWindowManager.LayoutParams params = dialog.getWindow().getAttributes();\r\n\tparams.width = (the width you want to set);\r\n    params.height = (the height you want to set);\r\n","title":"Why is Android custom dialog coming fullscreen","body":"<p>you can set this code in your dialog</p>\n\n<pre><code>DisplayMetrics displayMetrics = new DisplayMetrics();\ndialog.getWindow().getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\nWindowManager.LayoutParams params = dialog.getWindow().getAttributes();\nparams.width = (the width you want to set);\nparams.height = (the height you want to set);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5315490,"reputation":1112,"user_id":4240534,"display_name":"goemic"},"score":0,"creation_date":1566896072,"post_id":32830896,"comment_id":101789361,"body_markdown":"The same behaviour occurs with ConstraintLayout. Even, if ConstraintLayout is the root element of a ListViewItemLayout O.o","body":"The same behaviour occurs with ConstraintLayout. Even, if ConstraintLayout is the root element of a ListViewItemLayout O.o"}],"tags":[],"owner":{"account_id":2466138,"reputation":2491,"user_id":2149195,"accept_rate":100,"display_name":"RBK"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1443471046,"creation_date":1443470717,"answer_id":32830896,"question_id":32264876,"body_markdown":"Ya, it happens with relativelayout.\r\nin its google [docs][1] clearly mention. \r\n\r\n&gt; Note that you cannot have a circular dependency between the size of\r\n&gt; the RelativeLayout and the position of its children. For example, you\r\n&gt; cannot have a RelativeLayout whose height is set to WRAP_CONTENT and a\r\n&gt; child set to ALIGN_PARENT_BOTTOM\r\n\r\nAs you are working with dialog you have to use linearlayout as per your requirement.\r\nIt will defiantly work for you.  \r\n\r\nfurther ideas may be not applicable for you, but I just mention it for reference\r\n \r\nyou can use java code for make fix size dialog,\r\nor you can set layout margin from layout params so that you can maintain responsiveness in different screen size.\r\nYou also can one thing,\r\nget size of screen \r\n\r\n    DisplayMetrics metrics = new DisplayMetrics();\r\n    getWindowManager().getDefaultDisplay().getMetrics(metrics);\r\n    int height = metrics.heightPixels;\r\n    int width = metrics.widthPixels; \r\n\r\nthan you can calculate your new dialog size and set it as @guobao&#39;s Answer\r\n\r\n    DisplayMetrics displayMetrics = new DisplayMetrics();\r\n    dialog.getWindow().getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\r\n    WindowManager.LayoutParams params = dialog.getWindow().getAttributes();\r\n    params.width = (new width);\r\n    params.height = (new height);\r\n\r\nask me if any further specification needed.\r\n\r\n  [1]: http://developer.android.com/reference/android/widget/RelativeLayout.html","title":"Why is Android custom dialog coming fullscreen","body":"<p>Ya, it happens with relativelayout.\nin its google <a href=\"http://developer.android.com/reference/android/widget/RelativeLayout.html\" rel=\"nofollow\">docs</a> clearly mention. </p>\n\n<blockquote>\n  <p>Note that you cannot have a circular dependency between the size of\n  the RelativeLayout and the position of its children. For example, you\n  cannot have a RelativeLayout whose height is set to WRAP_CONTENT and a\n  child set to ALIGN_PARENT_BOTTOM</p>\n</blockquote>\n\n<p>As you are working with dialog you have to use linearlayout as per your requirement.\nIt will defiantly work for you.  </p>\n\n<p>further ideas may be not applicable for you, but I just mention it for reference</p>\n\n<p>you can use java code for make fix size dialog,\nor you can set layout margin from layout params so that you can maintain responsiveness in different screen size.\nYou also can one thing,\nget size of screen </p>\n\n<pre><code>DisplayMetrics metrics = new DisplayMetrics();\ngetWindowManager().getDefaultDisplay().getMetrics(metrics);\nint height = metrics.heightPixels;\nint width = metrics.widthPixels; \n</code></pre>\n\n<p>than you can calculate your new dialog size and set it as @guobao's Answer</p>\n\n<pre><code>DisplayMetrics displayMetrics = new DisplayMetrics();\ndialog.getWindow().getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);\nWindowManager.LayoutParams params = dialog.getWindow().getAttributes();\nparams.width = (new width);\nparams.height = (new height);\n</code></pre>\n\n<p>ask me if any further specification needed.</p>\n"},{"tags":[],"owner":{"account_id":2062641,"reputation":13,"user_id":1838854,"display_name":"pedrovic90"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443473655,"creation_date":1443473655,"answer_id":32831648,"question_id":32264876,"body_markdown":"This was my approach when I faced the same problem.\r\n\r\nI extended DialogFragment (from support.v4 lib)\r\n\r\nAnd then inflate:\r\n\r\n    @Override\r\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n\r\n        LayoutInflater inflater = getActivity().getLayoutInflater();\r\n        final View view = inflater.inflate(R.layout.dialog_whatever, null);\r\n\r\n        builder.setView(view);\r\n        return builder.create();\r\n    }\r\n\r\nThis is the layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@drawable/rounded_corners&quot;\r\n        android:padding=&quot;20dp&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/confirm_dialog_text&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            android:textColor=&quot;@color/black&quot;\r\n            android:text=&quot;@string/are_you_sure_declining_whatever&quot;/&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_marginTop=&quot;20dp&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;right|bottom&quot;\r\n            android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/cancel_action&quot;\r\n                android:layout_marginRight=&quot;10dp&quot;\r\n                android:layout_width=&quot;fill_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:background=&quot;@color/transparent&quot;\r\n                android:text=&quot;@string/cancel&quot;\r\n                android:textColor=&quot;@color/accent_color&quot;/&gt;\r\n\r\n            &lt;Button\r\n                android:id=&quot;@+id/confirm_action&quot;\r\n                android:layout_width=&quot;fill_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:background=&quot;@color/transparent&quot;\r\n                android:textColor=&quot;@color/accent_color&quot;\r\n                android:text=&quot;@string/reject&quot;/&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\nThis approach also follows Material design guidelines!!\r\n\r\nHope this is of help to you\r\n\r\nBest regards,\r\n\r\npedrovic90","title":"Why is Android custom dialog coming fullscreen","body":"<p>This was my approach when I faced the same problem.</p>\n\n<p>I extended DialogFragment (from support.v4 lib)</p>\n\n<p>And then inflate:</p>\n\n<pre><code>@Override\npublic Dialog onCreateDialog(Bundle savedInstanceState) {\n    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n\n    LayoutInflater inflater = getActivity().getLayoutInflater();\n    final View view = inflater.inflate(R.layout.dialog_whatever, null);\n\n    builder.setView(view);\n    return builder.create();\n}\n</code></pre>\n\n<p>This is the layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"vertical\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@drawable/rounded_corners\"\n    android:padding=\"20dp\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/confirm_dialog_text\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:textSize=\"16sp\"\n        android:textColor=\"@color/black\"\n        android:text=\"@string/are_you_sure_declining_whatever\"/&gt;\n\n    &lt;LinearLayout\n        android:layout_marginTop=\"20dp\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"right|bottom\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;Button\n            android:id=\"@+id/cancel_action\"\n            android:layout_marginRight=\"10dp\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@color/transparent\"\n            android:text=\"@string/cancel\"\n            android:textColor=\"@color/accent_color\"/&gt;\n\n        &lt;Button\n            android:id=\"@+id/confirm_action\"\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:background=\"@color/transparent\"\n            android:textColor=\"@color/accent_color\"\n            android:text=\"@string/reject\"/&gt;\n\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p>This approach also follows Material design guidelines!!</p>\n\n<p>Hope this is of help to you</p>\n\n<p>Best regards,</p>\n\n<p>pedrovic90</p>\n"}],"owner":{"account_id":1268658,"reputation":14001,"user_id":1225413,"accept_rate":80,"display_name":"Akhil Jain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1780,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":32264958,"answer_count":5,"score":5,"last_activity_date":1697275052,"creation_date":1440744286,"question_id":32264876,"body_markdown":"I am trying to create custom dialog.\r\n\r\nBase Layout (I have also tried various modified layouts):\r\n  \r\n    &lt;RelativeLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; &gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/title&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignParentLeft=&quot;true&quot;\r\n                android:layout_alignParentRight=&quot;true&quot;\r\n                android:layout_alignParentTop=&quot;true&quot;\r\n                android:background=&quot;@color/dialogHeaderBackground&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:minHeight=&quot;@dimen/minHeightDialogTitle&quot;\r\n                android:text=&quot;&quot;\r\n                android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:id=&quot;@+id/message&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignParentLeft=&quot;true&quot;\r\n                android:layout_below=&quot;@+id/title&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:text=&quot;&quot; /&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/loutButton&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_alignParentBottom=&quot;true&quot;\r\n                android:layout_below=&quot;@+id/message&quot;\r\n                android:layout_centerHorizontal=&quot;true&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:orientation=&quot;horizontal&quot; &gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/btnNeutral&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/btnNegative&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;&quot; /&gt;\r\n    \r\n                &lt;Button\r\n                    android:id=&quot;@+id/btnPositive&quot;\r\n                    android:layout_width=&quot;0dp&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;&quot; /&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/RelativeLayout&gt;\r\n\r\nJava code:\r\n\r\n            Dialog dialog = new Dialog(this);\r\n    //\t\tDialog dialog = new Dialog(this,R.style.Theme_Dialog);\r\n    \t\tdialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n    \t\t\r\n    \t\tdialog.setContentView(R.layout.custom_dialog);\r\n    \t\t\r\n    \t\tButton btnPositive=(Button) dialog.findViewById(R.id.btnPositive);\r\n    \t\tButton btnNegative=(Button) dialog.findViewById(R.id.btnNegative);\r\n    \t\tButton btnNeutral=(Button) dialog.findViewById(R.id.btnNeutral);\r\n    \t\t\r\n    \t\tTextView txvTitle=(TextView)dialog.findViewById(R.id.title);\r\n    \t\tTextView txvMessage=(TextView)dialog.findViewById(R.id.message);\r\n            ...\r\n            so on and so forth\r\n\r\nI get following dialog, which is fullscreen, which I do not want:\r\n\r\n[![fullscreen dialog][1]][1]\r\n\r\nSolutions already tried, which give same results as above screenshot:\r\n\r\n 1. [Styles.xml configuration 1][2]  | [Implemented Pastebin code][3]\r\n 2. [Styles.xml configuration 2][4]  | [Implemented Pastebin code][5]\r\n 3. [The example provided in Android Dev Guide using AlertDialog.Builder][6] | [Implemented Java Code][7]\r\n 4. None of my underlying layout use `MATCH_PARENT` in height. As said in this Stack overflow [answer][8]\r\n 5. Also try to change window settings to `WRAP_CONTENT` for dialog based on answer [here][9] | [Implemented Java Code in Pastebin][10]\r\n 6. Have also tried to keep entire `RelativeLayout` inside a parent `LinearLayout`, see the **3rd comment in following [answer][11]**\r\n\r\n\r\n&lt;hr/&gt;\r\n\r\nThe only time I can get decent dialog is when specifying height for the XML layout, like this `android:layout_height=&quot;150dp&quot;`\r\n\r\n     &lt;RelativeLayout\r\n            xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;        \r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;150dp&quot; &gt;\r\n\r\nDialog when fixed height is specified:\r\n\r\n 1. The content/layout goes missing when message is bigger\r\n    [![more text in dialog message][12]][12]\r\n 2. When message is smaller, dialog is displayed bigger than required, see below OK button\r\n    [![less text is dialog message][13]][13] \r\n\r\nDon&#39;t suggest the above (specify fixed height) as solution as it is not efficient and not looking that good and also not dynamic, it&#39;s static.\r\n\r\nWhat to do specify,decent looking custom dialog which is customizable too?\r\n\r\n  [1]: http://i.stack.imgur.com/8DAYD.png\r\n  [2]: https://stackoverflow.com/a/6832791/1225413\r\n  [3]: http://pastebin.com/mucSq8TZ\r\n  [4]: https://stackoverflow.com/a/17484927/1225413\r\n  [5]: http://pastebin.com/12cVTyb5\r\n  [6]: http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout\r\n  [7]: http://pastebin.com/uhSstDDV\r\n  [8]: https://stackoverflow.com/a/4326912/1225413\r\n  [9]: https://stackoverflow.com/a/25381287/1225413\r\n  [10]: http://pastebin.com/H6yUggQk\r\n  [11]: https://stackoverflow.com/a/4325728/1225413\r\n  [12]: http://i.stack.imgur.com/4uvf7.png\r\n  [13]: http://i.stack.imgur.com/j1OUZ.png\r\n  [14]: http://meta.stackexchange.com/questions/107282/i-want-to-award-a-bounty-to-an-existing-answer-should-i-have-to-wait-24-hours","title":"Why is Android custom dialog coming fullscreen","body":"<p>I am trying to create custom dialog.</p>\n<p>Base Layout (I have also tried various modified layouts):</p>\n<pre><code>&lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot; &gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/title&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentLeft=&quot;true&quot;\n            android:layout_alignParentRight=&quot;true&quot;\n            android:layout_alignParentTop=&quot;true&quot;\n            android:background=&quot;@color/dialogHeaderBackground&quot;\n            android:gravity=&quot;center&quot;\n            android:minHeight=&quot;@dimen/minHeightDialogTitle&quot;\n            android:text=&quot;&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/message&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentLeft=&quot;true&quot;\n            android:layout_below=&quot;@+id/title&quot;\n            android:layout_marginTop=&quot;5dp&quot;\n            android:text=&quot;&quot; /&gt;\n\n        &lt;LinearLayout\n            android:id=&quot;@+id/loutButton&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:layout_below=&quot;@+id/message&quot;\n            android:layout_centerHorizontal=&quot;true&quot;\n            android:layout_marginTop=&quot;5dp&quot;\n            android:orientation=&quot;horizontal&quot; &gt;\n\n            &lt;Button\n                android:id=&quot;@+id/btnNeutral&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/btnNegative&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;&quot; /&gt;\n\n            &lt;Button\n                android:id=&quot;@+id/btnPositive&quot;\n                android:layout_width=&quot;0dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_weight=&quot;1&quot;\n                android:text=&quot;&quot; /&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/RelativeLayout&gt;\n</code></pre>\n<p>Java code:</p>\n<pre><code>        Dialog dialog = new Dialog(this);\n//      Dialog dialog = new Dialog(this,R.style.Theme_Dialog);\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        \n        dialog.setContentView(R.layout.custom_dialog);\n        \n        Button btnPositive=(Button) dialog.findViewById(R.id.btnPositive);\n        Button btnNegative=(Button) dialog.findViewById(R.id.btnNegative);\n        Button btnNeutral=(Button) dialog.findViewById(R.id.btnNeutral);\n        \n        TextView txvTitle=(TextView)dialog.findViewById(R.id.title);\n        TextView txvMessage=(TextView)dialog.findViewById(R.id.message);\n        ...\n        so on and so forth\n</code></pre>\n<p>I get following dialog, which is fullscreen, which I do not want:</p>\n<p><a href=\"https://i.stack.imgur.com/8DAYD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DAYD.png\" alt=\"fullscreen dialog\" /></a></p>\n<p>Solutions already tried, which give same results as above screenshot:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/a/6832791/1225413\">Styles.xml configuration 1</a>  | <a href=\"http://pastebin.com/mucSq8TZ\" rel=\"nofollow noreferrer\">Implemented Pastebin code</a></li>\n<li><a href=\"https://stackoverflow.com/a/17484927/1225413\">Styles.xml configuration 2</a>  | <a href=\"http://pastebin.com/12cVTyb5\" rel=\"nofollow noreferrer\">Implemented Pastebin code</a></li>\n<li><a href=\"http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout\" rel=\"nofollow noreferrer\">The example provided in Android Dev Guide using AlertDialog.Builder</a> | <a href=\"http://pastebin.com/uhSstDDV\" rel=\"nofollow noreferrer\">Implemented Java Code</a></li>\n<li>None of my underlying layout use <code>MATCH_PARENT</code> in height. As said in this Stack overflow <a href=\"https://stackoverflow.com/a/4326912/1225413\">answer</a></li>\n<li>Also try to change window settings to <code>WRAP_CONTENT</code> for dialog based on answer <a href=\"https://stackoverflow.com/a/25381287/1225413\">here</a> | <a href=\"http://pastebin.com/H6yUggQk\" rel=\"nofollow noreferrer\">Implemented Java Code in Pastebin</a></li>\n<li>Have also tried to keep entire <code>RelativeLayout</code> inside a parent <code>LinearLayout</code>, see the <strong>3rd comment in following <a href=\"https://stackoverflow.com/a/4325728/1225413\">answer</a></strong></li>\n</ol>\n<hr/>\n<p>The only time I can get decent dialog is when specifying height for the XML layout, like this <code>android:layout_height=&quot;150dp&quot;</code></p>\n<pre><code> &lt;RelativeLayout\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;        \n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;150dp&quot; &gt;\n</code></pre>\n<p>Dialog when fixed height is specified:</p>\n<ol>\n<li>The content/layout goes missing when message is bigger\n<a href=\"https://i.stack.imgur.com/4uvf7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4uvf7.png\" alt=\"more text in dialog message\" /></a></li>\n<li>When message is smaller, dialog is displayed bigger than required, see below OK button\n<a href=\"https://i.stack.imgur.com/j1OUZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j1OUZ.png\" alt=\"less text is dialog message\" /></a></li>\n</ol>\n<p>Don't suggest the above (specify fixed height) as solution as it is not efficient and not looking that good and also not dynamic, it's static.</p>\n<p>What to do specify,decent looking custom dialog which is customizable too?</p>\n"},{"tags":["java","elasticsearch","elasticsearch-rest-client"],"comments":[{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":0,"creation_date":1570188051,"post_id":58234784,"comment_id":102843906,"body_markdown":"If you had 20001 buckets you need to augment `search.max_buckets` higher than 20000.","body":"If you had 20001 buckets you need to augment <code>search.max_buckets</code> higher than 20000."},{"owner":{"account_id":1135800,"reputation":1186,"user_id":1120883,"accept_rate":44,"display_name":"nitin tyagi"},"score":0,"creation_date":1570643494,"post_id":58234784,"comment_id":102980829,"body_markdown":"@Val Thanks for the comment. Earlier it gives me error for 10000 bucket then i have increased it to 20000 then it gives me error for 20000 then i have increased it 50000 then it gives me error for 50000.","body":"@Val Thanks for the comment. Earlier it gives me error for 10000 bucket then i have increased it to 20000 then it gives me error for 20000 then i have increased it 50000 then it gives me error for 50000."},{"owner":{"account_id":5843921,"reputation":210875,"user_id":4604579,"display_name":"Val"},"score":1,"creation_date":1570644139,"post_id":58234784,"comment_id":102981104,"body_markdown":"I suggest you look into the [`composite` aggregation](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-composite-aggregation.html) instead of trying to retrieve all term buckets at once.","body":"I suggest you look into the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-composite-aggregation.html\" rel=\"nofollow noreferrer\"><code>composite</code> aggregation</a> instead of trying to retrieve all term buckets at once."},{"owner":{"account_id":1612111,"reputation":488,"user_id":1490760,"display_name":"mrDinkelman"},"score":0,"creation_date":1603438015,"post_id":58234784,"comment_id":114042792,"body_markdown":"I agreed with Val about composite aggregation usage. The next wizard https://plnkr.co/edit/iJSFP8eRrhC7l7Hx2XOL?p=preview&amp;preview might help you what type of aggregation suites best according to your needs.","body":"I agreed with Val about composite aggregation usage. The next wizard <a href=\"https://plnkr.co/edit/iJSFP8eRrhC7l7Hx2XOL?p=preview&amp;preview\" rel=\"nofollow noreferrer\">plnkr.co/edit/iJSFP8eRrhC7l7Hx2XOL?p=preview&amp;preview</a> might help you what type of aggregation suites best according to your needs."}],"answers":[{"tags":[],"owner":{"account_id":158927,"reputation":362,"user_id":377902,"display_name":"Abhiram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621291590,"creation_date":1621291590,"answer_id":67577884,"question_id":58234784,"body_markdown":"Incase you are using ES version 7.x.x then you can add `terminate_after` clause to your query to limit the number of buckets into which the data would be divided into. This happens mostly when the data your are trying to aggregate has a high degree of randomness.\r\n\r\nIf your data contains text then it would better to aggregate on `.keyword` field (assuming you are using default settings).\r\n\r\n```\r\nPOST your_index/_search\r\n{\r\n  &quot;from&quot;: 0,\r\n  &quot;query&quot;: {\r\n    &quot;match_all&quot;: {}\r\n  },\r\n  &quot;size&quot;: 0,\r\n  &quot;sort&quot;: [\r\n    {\r\n      &quot;your_target_field&quot;: {\r\n        &quot;order&quot;: &quot;desc&quot;\r\n      }\r\n    }\r\n  ],\r\n  &quot;terminate_after&quot;: 10000,\r\n  &quot;version&quot;: true,\r\n  &quot;aggs&quot;: {\r\n    &quot;title&quot;: {\r\n      &quot;terms&quot;: {\r\n        &quot;field&quot;: &quot;your_target_field.keyword&quot;,\r\n        &quot;size&quot;: 10000\r\n      }\r\n    }\r\n  }\r\n}\r\n``` ","title":"too_many_buckets_exception in elasticsearch","body":"<p>Incase you are using ES version 7.x.x then you can add <code>terminate_after</code> clause to your query to limit the number of buckets into which the data would be divided into. This happens mostly when the data your are trying to aggregate has a high degree of randomness.</p>\n<p>If your data contains text then it would better to aggregate on <code>.keyword</code> field (assuming you are using default settings).</p>\n<pre><code>POST your_index/_search\n{\n  &quot;from&quot;: 0,\n  &quot;query&quot;: {\n    &quot;match_all&quot;: {}\n  },\n  &quot;size&quot;: 0,\n  &quot;sort&quot;: [\n    {\n      &quot;your_target_field&quot;: {\n        &quot;order&quot;: &quot;desc&quot;\n      }\n    }\n  ],\n  &quot;terminate_after&quot;: 10000,\n  &quot;version&quot;: true,\n  &quot;aggs&quot;: {\n    &quot;title&quot;: {\n      &quot;terms&quot;: {\n        &quot;field&quot;: &quot;your_target_field.keyword&quot;,\n        &quot;size&quot;: 10000\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1135800,"reputation":1186,"user_id":1120883,"accept_rate":44,"display_name":"nitin tyagi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9557,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1697274310,"creation_date":1570185616,"question_id":58234784,"body_markdown":"I am facing an issue in ElasticSearch aggregation. We are using RestHighLevelClient for querying ElasticSearch in Java. \r\n\r\nException is -\r\n\r\n&gt; ElasticsearchStatusException[Elasticsearch exception\r\n&gt; [type=search_phase_execution_exception, reason=]]; nested:\r\n&gt; ElasticsearchException[Elasticsearch exception\r\n&gt; [type=too_many_buckets_exception, reason=Trying to create too many\r\n&gt; buckets. Must be less than or equal to: [20000] but was [20001]. This\r\n&gt; limit can be set by changing the [search.max_buckets] cluster level\r\n&gt; setting.]];\r\n\r\nI have changed search.max_buckets using a PUT request but still, I am facing this issue.\r\n\r\n&gt; PUT /_cluster/settings {   &quot;persistent&quot; : { \r\n&gt;     &quot;search.max_buckets&quot;:20000   }    }\r\n\r\nAs per our requirement first, we have to aggregate data on daily bases then hourly basis then ruleId basis. Aggregation would look like below level - \r\n\r\n    Day{\r\n    \t1:00[\r\n    \t   {\r\n    \t   ruleId : 1 ,\r\n    \t   count : 20\r\n    \t   },\r\n    \t   {\r\n    \t   ruleId : 2 ,\r\n    \t   count : 25\r\n    \t   }\r\n    \t],\r\n    \t2:00[\r\n    \t{\r\n    \t   ruleId : 1 ,\r\n    \t   count : 20\r\n    \t   },\r\n    \t   {\r\n    \t   ruleId : 2 ,\r\n    \t   count : 25\r\n    \t   }\r\n    \t]\r\n\r\nNow my code is - \r\n\r\n    \tfinal List&lt;DTO&gt; violationCaseMgmtDtos = new ArrayList&lt;&gt;();\r\n            try {\r\n                RangeQueryBuilder queryBuilders =\r\n                    (end_timestmp &gt; 0 ? customTimeRangeQueryBuilder(start_timestmp, end_timestmp, generationTime)\r\n                        : daysTimeRangeQueryBuilder(14, generationTime));\r\n    \r\n                BoolQueryBuilder boolQuery = new BoolQueryBuilder();\r\n                boolQuery.must(queryBuilders);\r\n                boolQuery.must(QueryBuilders.matchQuery(&quot;pvGroupBy&quot;, true));\r\n                boolQuery.must(QueryBuilders.matchQuery(&quot;pvInformation&quot;, false));\r\n                TopHitsAggregationBuilder topHitsAggregationBuilder =\r\n                    AggregationBuilders.topHits(&quot;topHits&quot;).docValueField(policyId).sort(generationTime, SortOrder.DESC);\r\n    \r\n                TermsAggregationBuilder termsAggregation = AggregationBuilders.terms(&quot;distinct&quot;).field(policyId).size(10000)\r\n                    .subAggregation(topHitsAggregationBuilder);\r\n    \r\n                DateHistogramAggregationBuilder timeHistogramAggregationBuilder =\r\n                    AggregationBuilders.dateHistogram(&quot;by_hour&quot;).field(&quot;eventDateTime&quot;)\r\n                        .fixedInterval(DateHistogramInterval.HOUR).subAggregation(termsAggregation);\r\n    \r\n                DateHistogramAggregationBuilder dateHistogramAggregationBuilder =\r\n                    AggregationBuilders.dateHistogram(&quot;by_day&quot;).field(&quot;eventDateTime&quot;)\r\n                        .fixedInterval(DateHistogramInterval.DAY).subAggregation(timeHistogramAggregationBuilder);\r\n    \r\n                SearchRequest searchRequest = new SearchRequest(violationDataModel);\r\n                SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\r\n                searchSourceBuilder.aggregation(dateHistogramAggregationBuilder);\r\n                searchSourceBuilder.query(boolQuery);\r\n                searchSourceBuilder.from(offset);\r\n                searchSourceBuilder.size(10000);\r\n                searchRequest.source(searchSourceBuilder);\r\n                SearchResponse searchResponse = null;\r\n    \r\n                searchResponse = restHighLevelClient.search(searchRequest, RequestOptions.DEFAULT);\r\n    \r\n                ParsedDateHistogram parsedDateHistogram = searchResponse.getAggregations().get(&quot;by_day&quot;);\r\n    \r\n                parsedDateHistogram.getBuckets().parallelStream().forEach(dayBucket -&gt; {\r\n    \r\n                     \r\n                    ParsedDateHistogram hourBasedData = dayBucket.getAggregations().get(&quot;by_hour&quot;);\r\n    \r\n                    hourBasedData.getBuckets().parallelStream().forEach(hourBucket -&gt; {\r\n    \r\n                        // TimeLine timeLine = new TimeLine();\r\n                        String dateTime = hourBucket.getKeyAsString();\r\n                        // long dateInLong = DateUtil.getMiliSecondFromStringDate(dateTime);\r\n                        // timeLine.setViolationEventTime(dateTime);\r\n    \r\n                        ParsedLongTerms distinctPolicys = hourBucket.getAggregations().get(&quot;distinct&quot;);\r\n                        distinctPolicys.getBuckets().parallelStream().forEach(policyBucket -&gt; {\r\n                            \r\n                            DTO violationCaseManagementDTO = new DTO();\r\n                            violationCaseManagementDTO.setDataAggregated(true);\r\n                            violationCaseManagementDTO.setEventDateTime(dateTime);\r\n                            violationCaseManagementDTO.setRuleId(Long.valueOf(policyBucket.getKey().toString()));\r\n    \r\n                            ParsedTopHits parsedTopHits = policyBucket.getAggregations().get(&quot;topHits&quot;);\r\n                            SearchHit[] searchHits = parsedTopHits.getHits().getHits();\r\n                            SearchHit searchHit = searchHits[0];\r\n    \r\n                            String source = searchHit.getSourceAsString();\r\n                            ViolationDataModel violationModel = null;\r\n                            try {\r\n                                violationModel = objectMapper.readValue(source, ViolationDataModel.class);\r\n                            } catch (Exception e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                            \r\n                            violationCaseManagementDTO.setRuleName(violationModel.getRuleName());\r\n                            violationCaseManagementDTO.setGenerationTime(violationModel.getGenerationTime());\r\n                            violationCaseManagementDTO.setPriority(violationModel.getPriority());\r\n                            violationCaseManagementDTO.setStatus(violationModel.getViolationStatus());\r\n                            violationCaseManagementDTO.setViolationId(violationModel.getId());\r\n                            violationCaseManagementDTO.setEntity(violationModel.getViolator());\r\n                            violationCaseManagementDTO.setViolationType(violationModel.getViolationEntityType());\r\n                            violationCaseManagementDTO.setIndicatorsOfAttack( (int)\r\n                                (policyBucket.getDocCount() * violationModel.getNoOfViolatedEvents()));\r\n                            violationCaseMgmtDtos.add(violationCaseManagementDTO);\r\n     \r\n                        });\r\n                      //  violationCaseMgmtDtos.sort((d1,d2) -&gt; d1.getEventDateTime().compareTo(d2.getEventDateTime()));\r\n                    });\r\n    \r\n                });\r\n                \r\n                List&lt;DTO&gt; realtimeViolation = findViolationWithoutGrouping(start_timestmp,  end_timestmp,  offset,  size);\r\n                realtimeViolation.stream().forEach(action -&gt; violationCaseMgmtDtos.add(action)); \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n           \r\n            if (Objects.nonNull(violationCaseMgmtDtos) &amp;&amp; violationCaseMgmtDtos.size() &gt; 0) {\r\n                return violationCaseMgmtDtos.stream()\r\n                    .filter(violationDto -&gt; Objects.nonNull(violationDto))\r\n                    .sorted((d1,d2) -&gt; d2.getEventDateTime().compareTo(d1.getEventDateTime()))\r\n                    .collect(Collectors.toList());\r\n            }\r\n            return violationCaseMgmtDtos;\r\n    }\r\n\r\nPlease help me to resolve this issue.","title":"too_many_buckets_exception in elasticsearch","body":"<p>I am facing an issue in ElasticSearch aggregation. We are using RestHighLevelClient for querying ElasticSearch in Java. </p>\n\n<p>Exception is -</p>\n\n<blockquote>\n  <p>ElasticsearchStatusException[Elasticsearch exception\n  [type=search_phase_execution_exception, reason=]]; nested:\n  ElasticsearchException[Elasticsearch exception\n  [type=too_many_buckets_exception, reason=Trying to create too many\n  buckets. Must be less than or equal to: [20000] but was [20001]. This\n  limit can be set by changing the [search.max_buckets] cluster level\n  setting.]];</p>\n</blockquote>\n\n<p>I have changed search.max_buckets using a PUT request but still, I am facing this issue.</p>\n\n<blockquote>\n  <p>PUT /_cluster/settings {   \"persistent\" : { \n      \"search.max_buckets\":20000   }    }</p>\n</blockquote>\n\n<p>As per our requirement first, we have to aggregate data on daily bases then hourly basis then ruleId basis. Aggregation would look like below level - </p>\n\n<pre><code>Day{\n    1:00[\n       {\n       ruleId : 1 ,\n       count : 20\n       },\n       {\n       ruleId : 2 ,\n       count : 25\n       }\n    ],\n    2:00[\n    {\n       ruleId : 1 ,\n       count : 20\n       },\n       {\n       ruleId : 2 ,\n       count : 25\n       }\n    ]\n</code></pre>\n\n<p>Now my code is - </p>\n\n<pre><code>    final List&lt;DTO&gt; violationCaseMgmtDtos = new ArrayList&lt;&gt;();\n        try {\n            RangeQueryBuilder queryBuilders =\n                (end_timestmp &gt; 0 ? customTimeRangeQueryBuilder(start_timestmp, end_timestmp, generationTime)\n                    : daysTimeRangeQueryBuilder(14, generationTime));\n\n            BoolQueryBuilder boolQuery = new BoolQueryBuilder();\n            boolQuery.must(queryBuilders);\n            boolQuery.must(QueryBuilders.matchQuery(\"pvGroupBy\", true));\n            boolQuery.must(QueryBuilders.matchQuery(\"pvInformation\", false));\n            TopHitsAggregationBuilder topHitsAggregationBuilder =\n                AggregationBuilders.topHits(\"topHits\").docValueField(policyId).sort(generationTime, SortOrder.DESC);\n\n            TermsAggregationBuilder termsAggregation = AggregationBuilders.terms(\"distinct\").field(policyId).size(10000)\n                .subAggregation(topHitsAggregationBuilder);\n\n            DateHistogramAggregationBuilder timeHistogramAggregationBuilder =\n                AggregationBuilders.dateHistogram(\"by_hour\").field(\"eventDateTime\")\n                    .fixedInterval(DateHistogramInterval.HOUR).subAggregation(termsAggregation);\n\n            DateHistogramAggregationBuilder dateHistogramAggregationBuilder =\n                AggregationBuilders.dateHistogram(\"by_day\").field(\"eventDateTime\")\n                    .fixedInterval(DateHistogramInterval.DAY).subAggregation(timeHistogramAggregationBuilder);\n\n            SearchRequest searchRequest = new SearchRequest(violationDataModel);\n            SearchSourceBuilder searchSourceBuilder = new SearchSourceBuilder();\n            searchSourceBuilder.aggregation(dateHistogramAggregationBuilder);\n            searchSourceBuilder.query(boolQuery);\n            searchSourceBuilder.from(offset);\n            searchSourceBuilder.size(10000);\n            searchRequest.source(searchSourceBuilder);\n            SearchResponse searchResponse = null;\n\n            searchResponse = restHighLevelClient.search(searchRequest, RequestOptions.DEFAULT);\n\n            ParsedDateHistogram parsedDateHistogram = searchResponse.getAggregations().get(\"by_day\");\n\n            parsedDateHistogram.getBuckets().parallelStream().forEach(dayBucket -&gt; {\n\n\n                ParsedDateHistogram hourBasedData = dayBucket.getAggregations().get(\"by_hour\");\n\n                hourBasedData.getBuckets().parallelStream().forEach(hourBucket -&gt; {\n\n                    // TimeLine timeLine = new TimeLine();\n                    String dateTime = hourBucket.getKeyAsString();\n                    // long dateInLong = DateUtil.getMiliSecondFromStringDate(dateTime);\n                    // timeLine.setViolationEventTime(dateTime);\n\n                    ParsedLongTerms distinctPolicys = hourBucket.getAggregations().get(\"distinct\");\n                    distinctPolicys.getBuckets().parallelStream().forEach(policyBucket -&gt; {\n\n                        DTO violationCaseManagementDTO = new DTO();\n                        violationCaseManagementDTO.setDataAggregated(true);\n                        violationCaseManagementDTO.setEventDateTime(dateTime);\n                        violationCaseManagementDTO.setRuleId(Long.valueOf(policyBucket.getKey().toString()));\n\n                        ParsedTopHits parsedTopHits = policyBucket.getAggregations().get(\"topHits\");\n                        SearchHit[] searchHits = parsedTopHits.getHits().getHits();\n                        SearchHit searchHit = searchHits[0];\n\n                        String source = searchHit.getSourceAsString();\n                        ViolationDataModel violationModel = null;\n                        try {\n                            violationModel = objectMapper.readValue(source, ViolationDataModel.class);\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                        }\n\n                        violationCaseManagementDTO.setRuleName(violationModel.getRuleName());\n                        violationCaseManagementDTO.setGenerationTime(violationModel.getGenerationTime());\n                        violationCaseManagementDTO.setPriority(violationModel.getPriority());\n                        violationCaseManagementDTO.setStatus(violationModel.getViolationStatus());\n                        violationCaseManagementDTO.setViolationId(violationModel.getId());\n                        violationCaseManagementDTO.setEntity(violationModel.getViolator());\n                        violationCaseManagementDTO.setViolationType(violationModel.getViolationEntityType());\n                        violationCaseManagementDTO.setIndicatorsOfAttack( (int)\n                            (policyBucket.getDocCount() * violationModel.getNoOfViolatedEvents()));\n                        violationCaseMgmtDtos.add(violationCaseManagementDTO);\n\n                    });\n                  //  violationCaseMgmtDtos.sort((d1,d2) -&gt; d1.getEventDateTime().compareTo(d2.getEventDateTime()));\n                });\n\n            });\n\n            List&lt;DTO&gt; realtimeViolation = findViolationWithoutGrouping(start_timestmp,  end_timestmp,  offset,  size);\n            realtimeViolation.stream().forEach(action -&gt; violationCaseMgmtDtos.add(action)); \n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        if (Objects.nonNull(violationCaseMgmtDtos) &amp;&amp; violationCaseMgmtDtos.size() &gt; 0) {\n            return violationCaseMgmtDtos.stream()\n                .filter(violationDto -&gt; Objects.nonNull(violationDto))\n                .sorted((d1,d2) -&gt; d2.getEventDateTime().compareTo(d1.getEventDateTime()))\n                .collect(Collectors.toList());\n        }\n        return violationCaseMgmtDtos;\n}\n</code></pre>\n\n<p>Please help me to resolve this issue.</p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"account_id":2498626,"reputation":2734,"user_id":2174382,"display_name":"guleryuz"},"score":0,"creation_date":1476003068,"post_id":39941533,"comment_id":67164244,"body_markdown":"`scene.setFill()` does the work","body":"<code>scene.setFill()</code> does the work"},{"owner":{"account_id":6410016,"reputation":7025,"user_id":4970079,"accept_rate":76,"display_name":"GOXR3PLUS"},"score":0,"creation_date":1476020977,"post_id":39941533,"comment_id":67168935,"body_markdown":"You have to set the stage initStyle to undecorated,then create the Basic Layout of your app.Lets assume using a BorderPane and in the top create the element you have in the image.The default header of the Stage is OS dependent,so you have to create your own.If you have a difficulty doing the above,a more detailed answer can be provided.","body":"You have to set the stage initStyle to undecorated,then create the Basic Layout of your app.Lets assume using a BorderPane and in the top create the element you have in the image.The default header of the Stage is OS dependent,so you have to create your own.If you have a difficulty doing the above,a more detailed answer can be provided."}],"answers":[{"comments":[{"owner":{"account_id":7324231,"reputation":1827,"user_id":5579160,"accept_rate":83,"display_name":"Philayyy"},"score":0,"creation_date":1476003063,"post_id":39941669,"comment_id":67164242,"body_markdown":"Thank you but I&#39;m more so looking for a way to set the colour of the stage header rather than the actual scene that goes inside the stage","body":"Thank you but I&#39;m more so looking for a way to set the colour of the stage header rather than the actual scene that goes inside the stage"},{"owner":{"account_id":2498626,"reputation":2734,"user_id":2174382,"display_name":"guleryuz"},"score":1,"creation_date":1476003275,"post_id":39941669,"comment_id":67164286,"body_markdown":"then you should find [this](http://stackoverflow.com/questions/11839199/custom-title-bar-in-javafx-2-0) and [this](http://stackoverflow.com/questions/11780115/moving-an-undecorated-stage-in-javafx-2) useful","body":"then you should find <a href=\"http://stackoverflow.com/questions/11839199/custom-title-bar-in-javafx-2-0\">this</a> and <a href=\"http://stackoverflow.com/questions/11780115/moving-an-undecorated-stage-in-javafx-2\">this</a> useful"}],"tags":[],"owner":{"account_id":3628866,"reputation":2363,"user_id":3025663,"accept_rate":58,"display_name":"Varin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476002675,"creation_date":1476002675,"answer_id":39941669,"question_id":39941533,"body_markdown":"I&#39;ve found this link, does this help?\r\n\r\nhttp://www.java2s.com/Code/Java/JavaFX/SetScenebackgroundcolorandsize.htm","title":"How to change the colour of the stage frame in javaFX?","body":"<p>I've found this link, does this help?</p>\n\n<p><a href=\"http://www.java2s.com/Code/Java/JavaFX/SetScenebackgroundcolorandsize.htm\" rel=\"nofollow\">http://www.java2s.com/Code/Java/JavaFX/SetScenebackgroundcolorandsize.htm</a></p>\n"},{"tags":[],"owner":{"account_id":9351069,"reputation":5,"user_id":6940746,"display_name":"Strs"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1476003595,"creation_date":1476003595,"answer_id":39941782,"question_id":39941533,"body_markdown":"Try using css:\r\n\r\n    .menu-bar {\r\n      -fx-background-color: derive(#FF1d1d,20%); // your color here\r\n    }\r\n\r\nExample of Layout:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.input.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;BorderPane prefHeight=&quot;400.0&quot; prefWidth=&quot;700.0&quot; stylesheets=&quot;@DarkTheme.css&quot; xmlns=&quot;http://javafx.com/javafx/8&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;ch.makery.address.view.RootLayoutController&quot;&gt;\r\n    &lt;top&gt;&lt;MenuBar BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n      &lt;menus&gt;\r\n        &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;File&quot;&gt;\r\n          &lt;items&gt;&lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleNew&quot; text=&quot;New&quot;&gt;\r\n    &lt;accelerator&gt;\r\n    &lt;KeyCodeCombination alt=&quot;UP&quot; code=&quot;N&quot; control=&quot;DOWN&quot; meta=&quot;UP&quot; shift=&quot;UP&quot; shortcut=&quot;UP&quot; /&gt;\r\n    &lt;/accelerator&gt;&lt;/MenuItem&gt;&lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleOpen&quot; text=&quot;Open...&quot;&gt;\r\n    &lt;accelerator&gt;\r\n    &lt;KeyCodeCombination alt=&quot;UP&quot; code=&quot;O&quot; control=&quot;DOWN&quot; meta=&quot;UP&quot; shift=&quot;UP&quot; shortcut=&quot;UP&quot; /&gt;\r\n    &lt;/accelerator&gt;&lt;/MenuItem&gt;\r\n            &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleSave&quot; text=&quot;Save&quot;&gt;\r\n    &lt;accelerator&gt;\r\n    &lt;KeyCodeCombination alt=&quot;UP&quot; code=&quot;S&quot; control=&quot;DOWN&quot; meta=&quot;UP&quot; shift=&quot;UP&quot; shortcut=&quot;UP&quot; /&gt;\r\n    &lt;/accelerator&gt;&lt;/MenuItem&gt;\r\n            &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleSaveAs&quot; text=&quot;Save As...&quot; /&gt;&lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleExit&quot; text=&quot;Exit&quot; /&gt;\r\n          &lt;/items&gt;\r\n        &lt;/Menu&gt;\r\n        &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;Statistics&quot;&gt;\r\n          &lt;items&gt;\r\n            &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleShowBirthdayStatistics&quot; text=&quot;Show Statistics&quot; /&gt;\r\n          &lt;/items&gt;\r\n        &lt;/Menu&gt;\r\n        &lt;Menu mnemonicParsing=&quot;false&quot; text=&quot;Help&quot;&gt;\r\n          &lt;items&gt;\r\n            &lt;MenuItem mnemonicParsing=&quot;false&quot; onAction=&quot;#handleAbout&quot; text=&quot;About&quot; /&gt;\r\n          &lt;/items&gt;\r\n        &lt;/Menu&gt;\r\n      &lt;/menus&gt;\r\n    &lt;/MenuBar&gt;\r\n    &lt;/top&gt;&lt;/BorderPane&gt;\r\n\r\n[Result][1]\r\n  [1]: https://i.stack.imgur.com/1Huby.png","title":"How to change the colour of the stage frame in javaFX?","body":"<p>Try using css:</p>\n\n<pre><code>.menu-bar {\n  -fx-background-color: derive(#FF1d1d,20%); // your color here\n}\n</code></pre>\n\n<p>Example of Layout:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.input.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;BorderPane prefHeight=\"400.0\" prefWidth=\"700.0\" stylesheets=\"@DarkTheme.css\" xmlns=\"http://javafx.com/javafx/8\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"ch.makery.address.view.RootLayoutController\"&gt;\n&lt;top&gt;&lt;MenuBar BorderPane.alignment=\"CENTER\"&gt;\n  &lt;menus&gt;\n    &lt;Menu mnemonicParsing=\"false\" text=\"File\"&gt;\n      &lt;items&gt;&lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleNew\" text=\"New\"&gt;\n&lt;accelerator&gt;\n&lt;KeyCodeCombination alt=\"UP\" code=\"N\" control=\"DOWN\" meta=\"UP\" shift=\"UP\" shortcut=\"UP\" /&gt;\n&lt;/accelerator&gt;&lt;/MenuItem&gt;&lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleOpen\" text=\"Open...\"&gt;\n&lt;accelerator&gt;\n&lt;KeyCodeCombination alt=\"UP\" code=\"O\" control=\"DOWN\" meta=\"UP\" shift=\"UP\" shortcut=\"UP\" /&gt;\n&lt;/accelerator&gt;&lt;/MenuItem&gt;\n        &lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleSave\" text=\"Save\"&gt;\n&lt;accelerator&gt;\n&lt;KeyCodeCombination alt=\"UP\" code=\"S\" control=\"DOWN\" meta=\"UP\" shift=\"UP\" shortcut=\"UP\" /&gt;\n&lt;/accelerator&gt;&lt;/MenuItem&gt;\n        &lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleSaveAs\" text=\"Save As...\" /&gt;&lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleExit\" text=\"Exit\" /&gt;\n      &lt;/items&gt;\n    &lt;/Menu&gt;\n    &lt;Menu mnemonicParsing=\"false\" text=\"Statistics\"&gt;\n      &lt;items&gt;\n        &lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleShowBirthdayStatistics\" text=\"Show Statistics\" /&gt;\n      &lt;/items&gt;\n    &lt;/Menu&gt;\n    &lt;Menu mnemonicParsing=\"false\" text=\"Help\"&gt;\n      &lt;items&gt;\n        &lt;MenuItem mnemonicParsing=\"false\" onAction=\"#handleAbout\" text=\"About\" /&gt;\n      &lt;/items&gt;\n    &lt;/Menu&gt;\n  &lt;/menus&gt;\n&lt;/MenuBar&gt;\n&lt;/top&gt;&lt;/BorderPane&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1Huby.png\" rel=\"nofollow\">Result</a></p>\n"}],"owner":{"account_id":7324231,"reputation":1827,"user_id":5579160,"accept_rate":83,"display_name":"Philayyy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13840,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1697274310,"creation_date":1476001580,"question_id":39941533,"body_markdown":"Pretty straight forward from the title. Is there any way to do this? The default is white, but it conflicts with my applications colour scheme. I was aiming for a window such as Spotify&#39;s\r\n\r\nAnd by window I mean the entire frame, see how the Icon in the top left-hand corner has the spotify logo and the background behind it&#39;s coloured? Same for the window controls on the left-hand side. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ZLqeA.png","title":"How to change the colour of the stage frame in javaFX?","body":"<p>Pretty straight forward from the title. Is there any way to do this? The default is white, but it conflicts with my applications colour scheme. I was aiming for a window such as Spotify's</p>\n\n<p>And by window I mean the entire frame, see how the Icon in the top left-hand corner has the spotify logo and the background behind it's coloured? Same for the window controls on the left-hand side. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZLqeA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZLqeA.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":14486365,"reputation":43,"user_id":10464162,"display_name":"Anon451"},"score":0,"creation_date":1542445637,"post_id":53349673,"comment_id":93577511,"body_markdown":"Sorry I should have clarified a bit more, I understand that this is whats causing the nullpointer exception, however the program shouldn&#39;t be able to take the ) operator into the opPriority method as it should be caught in line 19.","body":"Sorry I should have clarified a bit more, I understand that this is whats causing the nullpointer exception, however the program shouldn&#39;t be able to take the ) operator into the opPriority method as it should be caught in line 19."},{"owner":{"account_id":14486365,"reputation":43,"user_id":10464162,"display_name":"Anon451"},"score":0,"creation_date":1542446173,"post_id":53349673,"comment_id":93577626,"body_markdown":"This only happens when I use the DRY code to fill inFixEquation2, (I commented this in so you can see it better) if I use the non-DRY code then it works perfectly and even prints        \n\nConverted inFix equation to postFix =  [A, B, C, +, *]\npostFix answer should equal =         [A, B, C, +, *]","body":"This only happens when I use the DRY code to fill inFixEquation2, (I commented this in so you can see it better) if I use the non-DRY code then it works perfectly and even prints          Converted inFix equation to postFix =  [A, B, C, +, *] postFix answer should equal =         [A, B, C, +, *]"},{"owner":{"account_id":14575602,"reputation":2474,"user_id":10527550,"display_name":"Hong Tang"},"score":0,"creation_date":1542447191,"post_id":53349673,"comment_id":93577819,"body_markdown":"Ok, Make sense, i updated the answer, please take a look again.","body":"Ok, Make sense, i updated the answer, please take a look again."}],"tags":[],"owner":{"account_id":14575602,"reputation":2474,"user_id":10527550,"display_name":"Hong Tang"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1542447749,"creation_date":1542444688,"answer_id":53349673,"question_id":53349550,"body_markdown":"The `opPriority` map miss the `)` operator, you can set the `)` priority to 1, like:\r\n\r\n    Map&lt;String, Integer&gt; opPriority = new HashMap&lt;String, Integer&gt;() {\r\n        {\r\n            put(&quot;-&quot;, 1);\r\n            put(&quot;+&quot;, 2);\r\n            put(&quot;^&quot;, 3);\r\n            put(&quot;/&quot;, 4);\r\n            put(&quot;*&quot;, 5);\r\n            put(&quot;(&quot;, 1);\r\n            put(&quot;)&quot;, 1);\r\n        }\r\n    };\r\n\r\nThen the `EvaluatorTest` output like below:\r\n\r\n    Created inFix equation 1 = [A, *, (, B, +, C, )]\r\n    Created inFix equation 2 = [A, *, (, B, +, C, )]\r\n\r\n    Converted inFix equation to postFix = [A, *, B, C, +, ), (]\r\n    postFix answer should equal =         [A, B, C, +, *]\r\n\r\n**Updated**\r\n\r\nFor the `inFixEquation1` which run incorrect, it&#39;s caused by the way you compare two strings.\r\n\r\nFor string value compare, you should use `oneStr.equals(otherStr)` instead of `==`. The `==` means compare the string object reference instead of the string value. The correct way like below:\r\n\r\n    public static Deque&lt;String&gt; infixToPostfix(Deque &lt; String &gt; in) {\r\n        Deque &lt; String &gt; inFix = new ArrayDeque&lt; String &gt;(in );\r\n        Deque &lt; String &gt; postFix = new ArrayDeque &lt; &gt; ();\r\n        Stack&lt; String &gt; storedOperators = new Stack();\r\n        Set&lt; String &gt; allOperators = new HashSet&lt; &gt;\r\n            (Arrays.asList(&quot;*&quot;, &quot;/&quot;, &quot;%&quot;, &quot;+&quot;, &quot;-&quot;, &quot;)&quot;, &quot;(&quot;));\r\n\r\n        for (int i = 0; i &lt; in .size(); i++) {\r\n            if (!allOperators.contains(inFix.peek())) {\r\n                postFix.add(inFix.pop());\r\n            } else if (allOperators.contains(inFix.peek())) {\r\n                if (inFix.peek().equals(&quot;(&quot;) || storedOperators.size() == 0 &amp;&amp; !inFix.peek().equals( &quot;)&quot;)) {\r\n                    storedOperators.add(inFix.pop());\r\n                } else if (inFix.peek().equals(&quot;)&quot;)) {\r\n                    while (!storedOperators.peek().equals(&quot;(&quot;))\r\n                        postFix.add(storedOperators.pop());\r\n                    if (storedOperators.peek().equals(&quot;(&quot;))\r\n                        storedOperators.pop();\r\n                } else if (priorityCheck(inFix.peek(), storedOperators.peek())) {\r\n                    while (inFix.size() &gt; 0 &amp;&amp; storedOperators.size() &gt; 0 &amp;&amp; priorityCheck(inFix.peek(), storedOperators.peek()))\r\n                        postFix.add(storedOperators.pop());\r\n                    storedOperators.add(inFix.pop());\r\n                } else if (!priorityCheck(inFix.peek(), storedOperators.peek())) {\r\n                    storedOperators.add(inFix.pop());\r\n                }\r\n            }\r\n        }\r\n\r\n        for (int i = storedOperators.size(); i &gt; 0; i--)\r\n            postFix.add(storedOperators.pop());\r\n        return postFix;\r\n    }","title":"Filling ArrayDeques using string causing NullPointerException","body":"<p>The <code>opPriority</code> map miss the <code>)</code> operator, you can set the <code>)</code> priority to 1, like:</p>\n\n<pre><code>Map&lt;String, Integer&gt; opPriority = new HashMap&lt;String, Integer&gt;() {\n    {\n        put(\"-\", 1);\n        put(\"+\", 2);\n        put(\"^\", 3);\n        put(\"/\", 4);\n        put(\"*\", 5);\n        put(\"(\", 1);\n        put(\")\", 1);\n    }\n};\n</code></pre>\n\n<p>Then the <code>EvaluatorTest</code> output like below:</p>\n\n<pre><code>Created inFix equation 1 = [A, *, (, B, +, C, )]\nCreated inFix equation 2 = [A, *, (, B, +, C, )]\n\nConverted inFix equation to postFix = [A, *, B, C, +, ), (]\npostFix answer should equal =         [A, B, C, +, *]\n</code></pre>\n\n<p><strong>Updated</strong></p>\n\n<p>For the <code>inFixEquation1</code> which run incorrect, it's caused by the way you compare two strings.</p>\n\n<p>For string value compare, you should use <code>oneStr.equals(otherStr)</code> instead of <code>==</code>. The <code>==</code> means compare the string object reference instead of the string value. The correct way like below:</p>\n\n<pre><code>public static Deque&lt;String&gt; infixToPostfix(Deque &lt; String &gt; in) {\n    Deque &lt; String &gt; inFix = new ArrayDeque&lt; String &gt;(in );\n    Deque &lt; String &gt; postFix = new ArrayDeque &lt; &gt; ();\n    Stack&lt; String &gt; storedOperators = new Stack();\n    Set&lt; String &gt; allOperators = new HashSet&lt; &gt;\n        (Arrays.asList(\"*\", \"/\", \"%\", \"+\", \"-\", \")\", \"(\"));\n\n    for (int i = 0; i &lt; in .size(); i++) {\n        if (!allOperators.contains(inFix.peek())) {\n            postFix.add(inFix.pop());\n        } else if (allOperators.contains(inFix.peek())) {\n            if (inFix.peek().equals(\"(\") || storedOperators.size() == 0 &amp;&amp; !inFix.peek().equals( \")\")) {\n                storedOperators.add(inFix.pop());\n            } else if (inFix.peek().equals(\")\")) {\n                while (!storedOperators.peek().equals(\"(\"))\n                    postFix.add(storedOperators.pop());\n                if (storedOperators.peek().equals(\"(\"))\n                    storedOperators.pop();\n            } else if (priorityCheck(inFix.peek(), storedOperators.peek())) {\n                while (inFix.size() &gt; 0 &amp;&amp; storedOperators.size() &gt; 0 &amp;&amp; priorityCheck(inFix.peek(), storedOperators.peek()))\n                    postFix.add(storedOperators.pop());\n                storedOperators.add(inFix.pop());\n            } else if (!priorityCheck(inFix.peek(), storedOperators.peek())) {\n                storedOperators.add(inFix.pop());\n            }\n        }\n    }\n\n    for (int i = storedOperators.size(); i &gt; 0; i--)\n        postFix.add(storedOperators.pop());\n    return postFix;\n}\n</code></pre>\n"}],"owner":{"account_id":14486365,"reputation":43,"user_id":10464162,"display_name":"Anon451"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53349673,"answer_count":1,"score":1,"last_activity_date":1697273695,"creation_date":1542443305,"question_id":53349550,"body_markdown":"I&#39;m currently attempting to write an in-fix to post-fix calculator program and while I was attempting to clean redundant code up I found that depending on how I construct my ArrayDeque&#39;s, my program will react differently even though the arrays are similar in contents. I first filled my ArrayDeque using &quot;.add()&quot; repetitively which worked fine, but the I tried cleaning it up by using a string (So I could test equations a lot more efficiently) All of this is done in the testing class below. I also left some comments that may be useful for you.\r\n\r\n    import java.math.BigInteger;\r\n    import java.util.ArrayDeque;\r\n    import java.util.Deque;\r\n    \r\n    public class EvaluatorTest {\r\n        public static void main(String[] args) {\r\n            ArrayDeque &lt; String &gt; inFixEquation1 = new ArrayDeque &lt; &gt; ();\r\n            ArrayDeque &lt; String &gt; inFixEquation2 = new ArrayDeque &lt; &gt; ();\r\n\r\n            // Non DRY code: This for some reason doesnt work.\r\n            String equation = &quot;A*(B+C)&quot;;\r\n            int temp = equation.length();\r\n            for (int i = 0; i &lt; temp; i++) {\r\n                inFixEquation1.add(equation.substring(0, 1));\r\n                equation = equation.substring(1, equation.length());\r\n            }\r\n\r\n            // DRY code: While this does work.\r\n            inFixEquation2.add(&quot;A&quot;);\r\n            inFixEquation2.add(&quot;*&quot;);\r\n            inFixEquation2.add(&quot;(&quot;);\r\n            inFixEquation2.add(&quot;B&quot;);\r\n            inFixEquation2.add(&quot;+&quot;);\r\n            inFixEquation2.add(&quot;C&quot;);\r\n            inFixEquation2.add(&quot;)&quot;);\r\n\r\n            System.out.println(&quot;\\nCreated inFix equation 1 = &quot; + inFixEquation1);\r\n            System.out.println(&quot;Created inFix equation 2 = &quot; + inFixEquation2);\r\n\r\n            Deque &lt; String &gt; postFixEquation = Evaluator.infixToPostfix(inFixEquation1); // I switch between the first and second inFixEquations here jsut by changing inFixeEquation1 to inFixEquation2\r\n            System.out.println(&quot;\\nConverted inFix equation to postFix = &quot; + postFixEquation);\r\n            System.out.println(&quot;postFix answer should equal =         [A, B, C, +, *]&quot;);\r\n            BigInteger evaluated = Evaluator.evalPostfix(postFixEquation);\r\n            System.out.println(&quot;Evaulated postFix equation to BigInteger &quot; +\r\n                    &quot;value = &quot; + evaluated + &quot;\\n\\nProgram end.&quot;);\r\n        }\r\n    }\r\n\r\nI also apologize for the messy code, like I said, I was in the middle of cleaning the code up. The code below is the class that does the actual conversions.\r\n\r\n    import java.math.BigInteger;\r\n    import java.util.*;\r\n    \r\n    public class Evaluator {\r\n    \r\n        public static Deque &lt; String &gt; infixToPostfix(Deque &lt; String &gt; in ) {\r\n            Deque &lt; String &gt; inFix = new ArrayDeque &lt; String &gt; ( in ); \r\n            Deque &lt; String &gt; postFix = new ArrayDeque &lt; &gt; (); \r\n            Stack &lt; String &gt; storedOperators = new Stack(); \r\n            Set &lt; String &gt; allOperators = new HashSet &lt; &gt; \r\n                    (Arrays.asList(&quot;*&quot;, &quot;/&quot;, &quot;%&quot;, &quot;+&quot;, &quot;-&quot;, &quot;)&quot;, &quot;(&quot;)); \r\n\r\n            for (int i = 0; i &lt; in .size(); i++) {\r\n                if (!allOperators.contains(inFix.peek())) {\r\n                    postFix.add(inFix.pop());\r\n                } else if (allOperators.contains(inFix.peek())) { \r\n                    if (inFix.peek() == &quot;(&quot; || storedOperators.size() == 0 &amp;&amp; inFix.peek() != &quot;)&quot;) { \r\n                        storedOperators.add(inFix.pop()); \r\n                    } else if (inFix.peek() == &quot;)&quot;) { // The compiler seems to skip here when inFix.peek() equals &quot;)&quot; if I&#39;m using the first ArrayDeque but not the second.\r\n                        while (storedOperators.peek() != &quot;(&quot;)\r\n                            postFix.add(storedOperators.pop());\r\n                        if (storedOperators.peek() == &quot;(&quot;)\r\n                            storedOperators.pop();\r\n                    } else if (priorityCheck(inFix.peek(), storedOperators.peek())) {\r\n                        while (inFix.size() &gt; 0 &amp;&amp; storedOperators.size() &gt; 0 &amp;&amp; priorityCheck(inFix.peek(), storedOperators.peek()))\r\n                            postFix.add(storedOperators.pop()); \r\n                        storedOperators.add(inFix.pop());\r\n                    } else if (!priorityCheck(inFix.peek(), storedOperators.peek())) {\r\n                        storedOperators.add(inFix.pop());\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (int i = storedOperators.size(); i &gt; 0; i--)\r\n                postFix.add(storedOperators.pop());\r\n            return postFix;\r\n        }\r\n\r\n        public static boolean priorityCheck(String inFix, String auxOp) {\r\n            boolean answer = false;\r\n            Map &lt; String, Integer &gt; opPriority = new HashMap &lt; &gt; () {\r\n                {\r\n                    put(&quot;-&quot;, 1);\r\n                    put(&quot;+&quot;, 2);\r\n                    put(&quot;^&quot;, 3);\r\n                    put(&quot;/&quot;, 4);\r\n                    put(&quot;*&quot;, 5);\r\n                    put(&quot;(&quot;, 1);\r\n                }\r\n            };\r\n            if (opPriority.get(inFix) &lt; opPriority.get(auxOp))\r\n                answer = true;\r\n            return answer;\r\n        }\r\n    }\r\n\r\nSo if I run using the first ArrayDeque equation from the testing class I get this error while the second one will run fine, do you know why this is? I know where the null pointer is coming from and why it&#39;s coming from this specific place, but I guess I mainly want to know why my program is not catching the last &quot;)&quot; parenthesis at line 19 of my second class when it doesn&#39;t act this way when I manually build my ArrayDeque without a for-loop and string.\r\n\r\n```none\r\nCreated inFix equation 1 = [A, *, (, B, +, C, )]\r\nCreated inFix equation 2 = [A, *, (, B, +, C, )]\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n\tat Evaluator.priorityCheck(Evaluator.java:61)\r\n\tat Evaluator.infixToPostfix(Evaluator.java:25)\r\n\tat EvaluatorTest.main(EvaluatorTest.java:31)\r\n```","title":"Filling ArrayDeques using string causing NullPointerException","body":"<p>I'm currently attempting to write an in-fix to post-fix calculator program and while I was attempting to clean redundant code up I found that depending on how I construct my ArrayDeque's, my program will react differently even though the arrays are similar in contents. I first filled my ArrayDeque using &quot;.add()&quot; repetitively which worked fine, but the I tried cleaning it up by using a string (So I could test equations a lot more efficiently) All of this is done in the testing class below. I also left some comments that may be useful for you.</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.ArrayDeque;\nimport java.util.Deque;\n\npublic class EvaluatorTest {\n    public static void main(String[] args) {\n        ArrayDeque &lt; String &gt; inFixEquation1 = new ArrayDeque &lt; &gt; ();\n        ArrayDeque &lt; String &gt; inFixEquation2 = new ArrayDeque &lt; &gt; ();\n\n        // Non DRY code: This for some reason doesnt work.\n        String equation = &quot;A*(B+C)&quot;;\n        int temp = equation.length();\n        for (int i = 0; i &lt; temp; i++) {\n            inFixEquation1.add(equation.substring(0, 1));\n            equation = equation.substring(1, equation.length());\n        }\n\n        // DRY code: While this does work.\n        inFixEquation2.add(&quot;A&quot;);\n        inFixEquation2.add(&quot;*&quot;);\n        inFixEquation2.add(&quot;(&quot;);\n        inFixEquation2.add(&quot;B&quot;);\n        inFixEquation2.add(&quot;+&quot;);\n        inFixEquation2.add(&quot;C&quot;);\n        inFixEquation2.add(&quot;)&quot;);\n\n        System.out.println(&quot;\\nCreated inFix equation 1 = &quot; + inFixEquation1);\n        System.out.println(&quot;Created inFix equation 2 = &quot; + inFixEquation2);\n\n        Deque &lt; String &gt; postFixEquation = Evaluator.infixToPostfix(inFixEquation1); // I switch between the first and second inFixEquations here jsut by changing inFixeEquation1 to inFixEquation2\n        System.out.println(&quot;\\nConverted inFix equation to postFix = &quot; + postFixEquation);\n        System.out.println(&quot;postFix answer should equal =         [A, B, C, +, *]&quot;);\n        BigInteger evaluated = Evaluator.evalPostfix(postFixEquation);\n        System.out.println(&quot;Evaulated postFix equation to BigInteger &quot; +\n                &quot;value = &quot; + evaluated + &quot;\\n\\nProgram end.&quot;);\n    }\n}\n</code></pre>\n<p>I also apologize for the messy code, like I said, I was in the middle of cleaning the code up. The code below is the class that does the actual conversions.</p>\n<pre><code>import java.math.BigInteger;\nimport java.util.*;\n\npublic class Evaluator {\n\n    public static Deque &lt; String &gt; infixToPostfix(Deque &lt; String &gt; in ) {\n        Deque &lt; String &gt; inFix = new ArrayDeque &lt; String &gt; ( in ); \n        Deque &lt; String &gt; postFix = new ArrayDeque &lt; &gt; (); \n        Stack &lt; String &gt; storedOperators = new Stack(); \n        Set &lt; String &gt; allOperators = new HashSet &lt; &gt; \n                (Arrays.asList(&quot;*&quot;, &quot;/&quot;, &quot;%&quot;, &quot;+&quot;, &quot;-&quot;, &quot;)&quot;, &quot;(&quot;)); \n\n        for (int i = 0; i &lt; in .size(); i++) {\n            if (!allOperators.contains(inFix.peek())) {\n                postFix.add(inFix.pop());\n            } else if (allOperators.contains(inFix.peek())) { \n                if (inFix.peek() == &quot;(&quot; || storedOperators.size() == 0 &amp;&amp; inFix.peek() != &quot;)&quot;) { \n                    storedOperators.add(inFix.pop()); \n                } else if (inFix.peek() == &quot;)&quot;) { // The compiler seems to skip here when inFix.peek() equals &quot;)&quot; if I'm using the first ArrayDeque but not the second.\n                    while (storedOperators.peek() != &quot;(&quot;)\n                        postFix.add(storedOperators.pop());\n                    if (storedOperators.peek() == &quot;(&quot;)\n                        storedOperators.pop();\n                } else if (priorityCheck(inFix.peek(), storedOperators.peek())) {\n                    while (inFix.size() &gt; 0 &amp;&amp; storedOperators.size() &gt; 0 &amp;&amp; priorityCheck(inFix.peek(), storedOperators.peek()))\n                        postFix.add(storedOperators.pop()); \n                    storedOperators.add(inFix.pop());\n                } else if (!priorityCheck(inFix.peek(), storedOperators.peek())) {\n                    storedOperators.add(inFix.pop());\n                }\n            }\n        }\n\n        for (int i = storedOperators.size(); i &gt; 0; i--)\n            postFix.add(storedOperators.pop());\n        return postFix;\n    }\n\n    public static boolean priorityCheck(String inFix, String auxOp) {\n        boolean answer = false;\n        Map &lt; String, Integer &gt; opPriority = new HashMap &lt; &gt; () {\n            {\n                put(&quot;-&quot;, 1);\n                put(&quot;+&quot;, 2);\n                put(&quot;^&quot;, 3);\n                put(&quot;/&quot;, 4);\n                put(&quot;*&quot;, 5);\n                put(&quot;(&quot;, 1);\n            }\n        };\n        if (opPriority.get(inFix) &lt; opPriority.get(auxOp))\n            answer = true;\n        return answer;\n    }\n}\n</code></pre>\n<p>So if I run using the first ArrayDeque equation from the testing class I get this error while the second one will run fine, do you know why this is? I know where the null pointer is coming from and why it's coming from this specific place, but I guess I mainly want to know why my program is not catching the last &quot;)&quot; parenthesis at line 19 of my second class when it doesn't act this way when I manually build my ArrayDeque without a for-loop and string.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Created inFix equation 1 = [A, *, (, B, +, C, )]\nCreated inFix equation 2 = [A, *, (, B, +, C, )]\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at Evaluator.priorityCheck(Evaluator.java:61)\n    at Evaluator.infixToPostfix(Evaluator.java:25)\n    at EvaluatorTest.main(EvaluatorTest.java:31)\n</code></pre>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector","scylla"],"answers":[{"tags":[],"owner":{"account_id":378621,"reputation":2005,"user_id":9726075,"display_name":"Bartosz Konieczny"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1530529984,"creation_date":1530529984,"answer_id":51134876,"question_id":51134344,"body_markdown":"From Spark-Cassandra connector options (https://github.com/datastax/spark-cassandra-connector/blob/v2.3.0/spark-cassandra-connector/src/main/java/com/datastax/spark/connector/japi/RDDAndDStreamCommonJavaFunctions.java) you can set the TTL as:\r\n\r\n* constant value (`withConstantTTL`)\r\n* automatically resolved value (`withAutoTTL`)\r\n* column-based value (`withPerRowTTL`)\r\n\r\nIn your case you could try the last option and compute the TTL as a new column of the starting `Dataset` with the rule you provided in the question.\r\n\r\nFor use case you can see the test here: https://github.com/datastax/spark-cassandra-connector/blob/master/spark-cassandra-connector/src/it/scala/com/datastax/spark/connector/writer/TableWriterSpec.scala#L612","title":"Spark writing to Cassandra with varying TTL","body":"<p>From Spark-Cassandra connector options (<a href=\"https://github.com/datastax/spark-cassandra-connector/blob/v2.3.0/spark-cassandra-connector/src/main/java/com/datastax/spark/connector/japi/RDDAndDStreamCommonJavaFunctions.java\" rel=\"nofollow noreferrer\">https://github.com/datastax/spark-cassandra-connector/blob/v2.3.0/spark-cassandra-connector/src/main/java/com/datastax/spark/connector/japi/RDDAndDStreamCommonJavaFunctions.java</a>) you can set the TTL as:</p>\n\n<ul>\n<li>constant value (<code>withConstantTTL</code>)</li>\n<li>automatically resolved value (<code>withAutoTTL</code>)</li>\n<li>column-based value (<code>withPerRowTTL</code>)</li>\n</ul>\n\n<p>In your case you could try the last option and compute the TTL as a new column of the starting <code>Dataset</code> with the rule you provided in the question.</p>\n\n<p>For use case you can see the test here: <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/master/spark-cassandra-connector/src/it/scala/com/datastax/spark/connector/writer/TableWriterSpec.scala#L612\" rel=\"nofollow noreferrer\">https://github.com/datastax/spark-cassandra-connector/blob/master/spark-cassandra-connector/src/it/scala/com/datastax/spark/connector/writer/TableWriterSpec.scala#L612</a></p>\n"},{"tags":[],"owner":{"account_id":9963,"reputation":82992,"user_id":18627,"display_name":"Alex Ott"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697272730,"creation_date":1530539075,"answer_id":51137666,"question_id":51134344,"body_markdown":"Update: Support for [this functionality in the DataFrame API][1] has been available since Spark Cassandra Connector 3.0 which was released in May 2020.\r\n\r\nOld answer: \r\n\r\nFor DataFrame API there is no support for such functionality, yet... There is JIRA for it - https://datastax-oss.atlassian.net/browse/SPARKC-416, you can watch it to get notified when it&#39;s implemented...\r\n\r\nSo the only choice that you have is to use RDD API as described in the @bartosz25&#39;s answer...\r\n\r\n\r\n  [1]: https://github.com/datastax/spark-cassandra-connector/blob/master/doc/14_data_frames.md#ttl-and-writetime","title":"Spark writing to Cassandra with varying TTL","body":"<p>Update: Support for <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/master/doc/14_data_frames.md#ttl-and-writetime\" rel=\"nofollow noreferrer\">this functionality in the DataFrame API</a> has been available since Spark Cassandra Connector 3.0 which was released in May 2020.</p>\n<p>Old answer:</p>\n<p>For DataFrame API there is no support for such functionality, yet... There is JIRA for it - <a href=\"https://datastax-oss.atlassian.net/browse/SPARKC-416\" rel=\"nofollow noreferrer\">https://datastax-oss.atlassian.net/browse/SPARKC-416</a>, you can watch it to get notified when it's implemented...</p>\n<p>So the only choice that you have is to use RDD API as described in the @bartosz25's answer...</p>\n"}],"owner":{"account_id":3548811,"reputation":381,"user_id":2964132,"accept_rate":67,"display_name":"Yuval"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1727,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":51137666,"answer_count":2,"score":1,"last_activity_date":1697272730,"creation_date":1530528261,"question_id":51134344,"body_markdown":"In Java Spark, I have a dataframe that has a &#39;bucket_timestamp&#39; column, which represents the time of the bucket that the row belongs to.\r\n\r\nI want to write the dataframe to a Cassandra DB. The data must be written to the DB with TTL. The TTL should be depended on the bucket timestamp - where each row&#39;s TTL should be calculated as `ROW_TTL = CONST_TTL - (CurrentTime - bucket_timestamp)`, where `CONST_TTL` is a constant TTL that I configured.\r\n\r\nCurrently I am writing to Cassandra with spark using a constant TTL, with the following code:\r\n\r\n    df.write().format(&quot;org.apache.spark.sql.cassandra&quot;)\r\n                .options(new HashMap&lt;String, String&gt;() {\r\n                    {\r\n                        put(&quot;keyspace&quot;, &quot;key_space_name&quot;);\r\n                        put(&quot;table, &quot;table_name&quot;);\r\n                        put(&quot;spark.cassandra.output.ttl, Long.toString(CONST_TTL)); // Should be depended on bucket_timestamp column\r\n                    }\r\n                }).mode(SaveMode.Overwrite).save();\r\n\r\nOne possible way I thought about is - for each possible bucket_timestamp - filter the data according to timestamp, calculate the TTL and write filtered data to Cassandra. but this seems very non-efficient and not the spark way. Is there a way in Java Spark to provide a spark column as the TTL option, so that the TTL will differ for each row?\r\n\r\nSolution should be working with Java and dataset&lt; Row&gt;: I encountered some solutions for performing this with RDD in scala, but didn&#39;t find a solution for using Java and dataframe.\r\n\r\n\r\nThanks!","title":"Spark writing to Cassandra with varying TTL","body":"<p>In Java Spark, I have a dataframe that has a 'bucket_timestamp' column, which represents the time of the bucket that the row belongs to.</p>\n\n<p>I want to write the dataframe to a Cassandra DB. The data must be written to the DB with TTL. The TTL should be depended on the bucket timestamp - where each row's TTL should be calculated as <code>ROW_TTL = CONST_TTL - (CurrentTime - bucket_timestamp)</code>, where <code>CONST_TTL</code> is a constant TTL that I configured.</p>\n\n<p>Currently I am writing to Cassandra with spark using a constant TTL, with the following code:</p>\n\n<pre><code>df.write().format(\"org.apache.spark.sql.cassandra\")\n            .options(new HashMap&lt;String, String&gt;() {\n                {\n                    put(\"keyspace\", \"key_space_name\");\n                    put(\"table, \"table_name\");\n                    put(\"spark.cassandra.output.ttl, Long.toString(CONST_TTL)); // Should be depended on bucket_timestamp column\n                }\n            }).mode(SaveMode.Overwrite).save();\n</code></pre>\n\n<p>One possible way I thought about is - for each possible bucket_timestamp - filter the data according to timestamp, calculate the TTL and write filtered data to Cassandra. but this seems very non-efficient and not the spark way. Is there a way in Java Spark to provide a spark column as the TTL option, so that the TTL will differ for each row?</p>\n\n<p>Solution should be working with Java and dataset&lt; Row>: I encountered some solutions for performing this with RDD in scala, but didn't find a solution for using Java and dataframe.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","postgresql","hibernate","java-time"],"answers":[{"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1697109870,"post_id":77280068,"comment_id":136239789,"body_markdown":"jdbc.time_zone property must match with database timezone?","body":"jdbc.time_zone property must match with database timezone?"},{"owner":{"account_id":4181375,"reputation":5121,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1697111127,"post_id":77280068,"comment_id":136240015,"body_markdown":"@PaulMarcelinBejan definitely not, the feature was introduced in [HHH-10399](https://hibernate.atlassian.net/browse/HHH-10399), which clearly states that should be DB timezone.","body":"@PaulMarcelinBejan definitely not, the feature was introduced in <a href=\"https://hibernate.atlassian.net/browse/HHH-10399\" rel=\"nofollow noreferrer\">HHH-10399</a>, which clearly states that should be DB timezone."}],"tags":[],"owner":{"account_id":2179728,"reputation":73067,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697115679,"creation_date":1697109352,"answer_id":77280068,"question_id":77279800,"body_markdown":"[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) is an instantaneous point on the timeline. It is independent of a time zone and always provides a moment in UTC i.e. with a time zone offset of &quot;+00:00&quot;, typically displayed as `Z` (stands for Zulu).\r\n\r\nThe recommended practice is to keep the value of `jdbc.time_zone` as `UTC`\r\n\r\n    spring.jpa.properties.hibernate.jdbc.time_zone=UTC\r\n\r\nThere is a good tutorial [here](https://www.baeldung.com/mysql-jdbc-timezone-spring-boot) and here is what the [PostgreSQL documentation](https://www.postgresql.org/docs/current/datatype-datetime.html) says:\r\n\r\n&gt; For timestamp with time zone, the internally stored value is always in\r\n&gt; UTC (Universal Coordinated Time, traditionally known as Greenwich Mean\r\n&gt; Time, GMT).\r\n\r\nYou can always convert an `Instant` into other types e.g. `ZonedDateTime`, `OffsetDateTime` etc. for display purposes e.g.\r\n\r\n    Instant instant = Instant.now();\r\n    ZonedDateTime zdt = instant.atZone(ZoneId.of(&quot;Europe/Rome&quot;));\r\n    System.out.println(instant);\r\n    System.out.println(zdt);\r\n\r\n**Output from a sample run:**\r\n\r\n    2023-10-12T11:18:44.036798Z\r\n    2023-10-12T13:18:44.036798+02:00[Europe/Rome]\r\n\r\n[Online Demo](https://ideone.com/e65zuA)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n----\r\n&lt;sub&gt;Check [this answer](https://stackoverflow.com/a/67752047/10819573) and [this answer](https://stackoverflow.com/a/67505173/10819573) to learn how to use `java.time` API with JDBC.&lt;/sub&gt;","title":"Why Instant is not converted from UTC to timezone of PostgreSQL?","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> is an instantaneous point on the timeline. It is independent of a time zone and always provides a moment in UTC i.e. with a time zone offset of &quot;+00:00&quot;, typically displayed as <code>Z</code> (stands for Zulu).</p>\n<p>The recommended practice is to keep the value of <code>jdbc.time_zone</code> as <code>UTC</code></p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.time_zone=UTC\n</code></pre>\n<p>There is a good tutorial <a href=\"https://www.baeldung.com/mysql-jdbc-timezone-spring-boot\" rel=\"nofollow noreferrer\">here</a> and here is what the <a href=\"https://www.postgresql.org/docs/current/datatype-datetime.html\" rel=\"nofollow noreferrer\">PostgreSQL documentation</a> says:</p>\n<blockquote>\n<p>For timestamp with time zone, the internally stored value is always in\nUTC (Universal Coordinated Time, traditionally known as Greenwich Mean\nTime, GMT).</p>\n</blockquote>\n<p>You can always convert an <code>Instant</code> into other types e.g. <code>ZonedDateTime</code>, <code>OffsetDateTime</code> etc. for display purposes e.g.</p>\n<pre><code>Instant instant = Instant.now();\nZonedDateTime zdt = instant.atZone(ZoneId.of(&quot;Europe/Rome&quot;));\nSystem.out.println(instant);\nSystem.out.println(zdt);\n</code></pre>\n<p><strong>Output from a sample run:</strong></p>\n<pre><code>2023-10-12T11:18:44.036798Z\n2023-10-12T13:18:44.036798+02:00[Europe/Rome]\n</code></pre>\n<p><a href=\"https://ideone.com/e65zuA\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sub>Check <a href=\"https://stackoverflow.com/a/67752047/10819573\">this answer</a> and <a href=\"https://stackoverflow.com/a/67505173/10819573\">this answer</a> to learn how to use <code>java.time</code> API with JDBC.</sub></p>\n"},{"tags":[],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697271886,"creation_date":1697271886,"answer_id":77292113,"question_id":77279800,"body_markdown":"[PostgreSQL Time Stamps][1] \r\n\r\nIn a literal that has been determined to be **timestamp without time zone**, **PostgreSQL will silently ignore any time zone indication**. That is, the **resulting value** is derived from the date/time fields in the input value, and **is not adjusted for time zone**.\r\n\r\nA nice tutorial for the difference between timestamp (TIMESTAMP WITHOUT TIME ZONE) and timestampz (TIMESTAMP WITH TIME ZONE) with examples can be found at [postgresqltutorial][2]\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-DATETIME-INPUT-TIME-STAMPS\r\n  [2]: https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-timestamp/","title":"Why Instant is not converted from UTC to timezone of PostgreSQL?","body":"<p><a href=\"https://www.postgresql.org/docs/current/datatype-datetime.html#DATATYPE-DATETIME-INPUT-TIME-STAMPS\" rel=\"nofollow noreferrer\">PostgreSQL Time Stamps</a></p>\n<p>In a literal that has been determined to be <strong>timestamp without time zone</strong>, <strong>PostgreSQL will silently ignore any time zone indication</strong>. That is, the <strong>resulting value</strong> is derived from the date/time fields in the input value, and <strong>is not adjusted for time zone</strong>.</p>\n<p>A nice tutorial for the difference between timestamp (TIMESTAMP WITHOUT TIME ZONE) and timestampz (TIMESTAMP WITH TIME ZONE) with examples can be found at <a href=\"https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-timestamp/\" rel=\"nofollow noreferrer\">postgresqltutorial</a></p>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77292113,"answer_count":2,"score":1,"last_activity_date":1697271886,"creation_date":1697106553,"question_id":77279800,"body_markdown":"On my PostgreSQL, if I run the script:\r\n\r\n    show timezone;\r\n\r\nit returns \r\n\r\n    Europe/Rome\r\n\r\nso according to this, I have configured \r\n\r\n    spring.jpa.properties.hibernate.jdbc.time_zone: Europe/Rome\r\n\r\nI have a table TestPostgre with a column **datetime_using_instant** of **timestamp** data type.\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @SuperBuilder\r\n    @Entity\r\n    @Table(name = &quot;test_postgre&quot;)\r\n    public class TestPostgre {\r\n    \r\n        @Id\r\n        @Column(name = &quot;pk&quot;, nullable = false)\r\n        private String pk;\r\n        \r\n        @Column(name = &quot;datetime_using_instant&quot;, nullable = false)\r\n        private Instant dateTimeUsingInstant;\r\n        \r\n    }\r\n\r\nUsing JpaRepository:\r\n\r\n    @Repository\r\n    public interface TestPostgreRepository extends JpaRepository&lt;TestPostgre, String&gt; {\r\n        \r\n    }\r\n\r\nwhen saving a TestPostgre instance with dateTimeUsingInstant value of 2023-10-11T12:30:00Z, on PostgreSQL the value is still 2023-10-11 12:30:00.000, but between UTC and Europe/Rome there are 2 hours of offset.","title":"Why Instant is not converted from UTC to timezone of PostgreSQL?","body":"<p>On my PostgreSQL, if I run the script:</p>\n<pre><code>show timezone;\n</code></pre>\n<p>it returns</p>\n<pre><code>Europe/Rome\n</code></pre>\n<p>so according to this, I have configured</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.time_zone: Europe/Rome\n</code></pre>\n<p>I have a table TestPostgre with a column <strong>datetime_using_instant</strong> of <strong>timestamp</strong> data type.</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@SuperBuilder\n@Entity\n@Table(name = &quot;test_postgre&quot;)\npublic class TestPostgre {\n\n    @Id\n    @Column(name = &quot;pk&quot;, nullable = false)\n    private String pk;\n    \n    @Column(name = &quot;datetime_using_instant&quot;, nullable = false)\n    private Instant dateTimeUsingInstant;\n    \n}\n</code></pre>\n<p>Using JpaRepository:</p>\n<pre><code>@Repository\npublic interface TestPostgreRepository extends JpaRepository&lt;TestPostgre, String&gt; {\n    \n}\n</code></pre>\n<p>when saving a TestPostgre instance with dateTimeUsingInstant value of 2023-10-11T12:30:00Z, on PostgreSQL the value is still 2023-10-11 12:30:00.000, but between UTC and Europe/Rome there are 2 hours of offset.</p>\n"},{"tags":["java","mysql","hibernate","spring-mvc"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697216075,"post_id":77289469,"comment_id":136256674,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697218448,"creation_date":1697218448,"answer_id":77289700,"question_id":77289469,"body_markdown":"For me it look like hibernate is making the select.\r\n\r\nHibernate: `select login0_.username as username1_2_, login0_.id as id2_2_, login0_.password as password3_2_, login0_.role as role4_2_ from Login login0_ where login0_.role=? and login0_.username=?`\r\n\r\nAnd then for some reason it trigger procedure\r\nHibernate: `{call users_in_system(?,?,?,?)}`\r\n\r\nI think for this procedure you are getting: `Parameter number 1 is not an OUT parameter`\r\n\r\nInvestigate if you need this procedure and how you invoke it. I do not see to be called in the code. You can show the Entity class.\r\n","title":"ERROR: Parameter number 1 is not an OUT parameter while trying to login with credentials","body":"<p>For me it look like hibernate is making the select.</p>\n<p>Hibernate: <code>select login0_.username as username1_2_, login0_.id as id2_2_, login0_.password as password3_2_, login0_.role as role4_2_ from Login login0_ where login0_.role=? and login0_.username=?</code></p>\n<p>And then for some reason it trigger procedure\nHibernate: <code>{call users_in_system(?,?,?,?)}</code></p>\n<p>I think for this procedure you are getting: <code>Parameter number 1 is not an OUT parameter</code></p>\n<p>Investigate if you need this procedure and how you invoke it. I do not see to be called in the code. You can show the Entity class.</p>\n"}],"owner":{"account_id":28004134,"reputation":9,"user_id":21387829,"display_name":"Turaga Harini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697270926,"creation_date":1697215933,"question_id":77289469,"body_markdown":"I am trying to login to the application I gave the right credentials in Sql database but it is showing &quot;No such account exists, Please insert valid credentials&quot;. The login table in sql have four parameters id,role,username,password(which is bycrypted).The id and username have same values.\r\n![enter image description here](https://i.stack.imgur.com/40Dy5.png)\r\n\r\nThe error in console is:\r\n\r\n\r\n```\r\nHibernate: select login0_.username as username1_2_, login0_.id as id2_2_, login0_.password as password3_2_, login0_.role as role4_2_ from Login login0_ where login0_.role=? and login0_.username=?\r\nHibernate: {call users_in_system(?,?,?,?)}\r\nOct 13, 2023 9:29:34 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\nWARN: SQL Error: 0, SQLState: S1009\r\nOct 13, 2023 9:29:34 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\r\nERROR: Parameter number 1 is not an OUT parameter\r\n```\r\n\r\n\r\nLoginView.jsp\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; import=&quot;com.project.dao.LoginDao&quot; \r\n    pageEncoding=&quot;ISO-8859-1&quot; isELIgnored=&quot;false&quot;%&gt;\r\n     &lt;%! \r\n\tLoginDao infoLog= new LoginDao();\r\n    %&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n&lt;title&gt;User Log In&lt;/title&gt;\r\n\t\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t\r\n\t&lt;div class=&quot;signup-form&quot;&gt;\r\n    &lt;form action=&quot;dashboard.html&quot; method=&quot;post&quot; autocomplete=&quot;off&quot;&gt;\r\n\t\t&lt;h2&gt;Sign In&lt;/h2&gt;\r\n\t\t&lt;p&gt;Please fill in this form to access your account!&lt;/p&gt;\r\n\t\t&lt;hr&gt;\r\n\t\t\r\n\t\t&lt;div class=&quot;form-group&quot; style=&quot;color: red;&quot;&gt;\r\n\t\t\t&lt;%\t\r\n\t\t\ttry{\r\n\t\t\t\tString status=(String)request.getAttribute(&quot;status&quot;);\r\n\t\t\t\tinfoLog.logActivities(&quot;loginview: &quot;+status);\r\n\t\t\t\t\tif(status.equals(&quot;false&quot;))\r\n\t\t\t\t\t{  out.print(&quot;No such account exists. Please insert valid credentials&quot;);  }\r\n\t\t\t\t}\r\n\t\t\tcatch(Exception e)\r\n\t\t\t\t{infoLog.logActivities(&quot;loginview: &quot;+e);}\r\n\t\t\t%&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t\r\n\t    &lt;div class=&quot;form-group&quot;&gt;\r\n\t      &lt;label for=&quot;role&quot;&gt;Role&lt;/label&gt;\r\n\t      &lt;select class=&quot;form-control&quot; name=&quot;role&quot; id=&quot;exampleSelect1&quot;&gt;\r\n\t        &lt;option value=&quot;doctor&quot;&gt;Doctor&lt;/option&gt;\r\n\t        &lt;option value=&quot;receptionist&quot;&gt;Receptionist&lt;/option&gt;\r\n\t        &lt;option value=&quot;administrator&quot;&gt;Administrator&lt;/option&gt;\r\n\t      &lt;/select&gt;\r\n\t    &lt;/div&gt;\r\n\r\n\t\t&lt;div class=&quot;form-group&quot;&gt;\r\n\t      &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;\r\n\t      &lt;input type=&quot;text&quot; name=&quot;username&quot; class=&quot;form-control&quot; id=&quot;exampleInputEmail1&quot; aria-describedby=&quot;emailHelp&quot; placeholder=&quot;Username&quot;\r\n\t      required=&quot;required&quot;&gt;\r\n\t    &lt;/div&gt;\r\n\t    &lt;div class=&quot;form-group&quot;&gt;\r\n\t      &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;\r\n\t      &lt;input type=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control&quot; id=&quot;exampleInputPassword1&quot; placeholder=&quot;Password&quot;\r\n\t      required=&quot;required&quot;&gt;\r\n\t    &lt;/div&gt;\r\n\t    \r\n\t\t&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\r\n\t\t&lt;button type=&quot;reset&quot; class=&quot;btn btn-danger&quot;&gt;Clear&lt;/button&gt;\r\n\t    \r\n\t    \r\n &lt;/form&gt;\r\n &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nLoginController.java\r\n\r\n```\r\npackage com.project.controller;\r\n\r\nimport javax.servlet.http.*;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestMethod;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.servlet.ModelAndView;\r\nimport com.project.dao.LoginDao;\r\nimport com.project.entity.Login;\r\n\r\n@Controller\r\npublic class LoginController \r\n{\r\n\t@Autowired\r\n\tLoginDao dao;\r\n\t\r\n\t@Autowired\r\n\tPatientPrescriptionDao dao1;\r\n\t\r\n\t@Autowired\r\n\tUsersInSystemDao dao2;\r\n\t \r\n\t@RequestMapping(value=&quot;/login.html&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView view()\r\n\t{\r\n\t\ttry\r\n\t\t{\r\n\t\t\tModelAndView mv= new ModelAndView();\r\n\t\t\tmv.setViewName(&quot;LoginView&quot;);\r\n\t\t\tmv.addObject(&quot;status&quot;, &quot;true&quot;);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\tdao.logActivities(&quot;LoginController-view: &quot;+e);\t\r\n\t\t\tModelAndView mv= new ModelAndView();\r\n\t\t\tmv.setViewName(&quot;failure&quot;);\r\n\t\t\tmv.addObject(&quot;error&quot;,e);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t@RequestMapping(value=&quot;/dashboard.html&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView validate(@RequestParam(&quot;role&quot;)String role, @RequestParam(&quot;username&quot;)String username, @RequestParam(&quot;password&quot;)String password, HttpServletRequest request ) \r\n\t{\r\n\t\ttry {\r\n\t\t\t//validation code\r\n\t\t\tdao.logActivities(&quot;in LoginController-validate:got= &quot;+role+&quot; &quot;+username+&quot; &quot;+password);\r\n\t\t\tLogin l1=new Login(null,role, username, password);\r\n\t\t\t\r\n\t\t\tString userId=dao.validate(l1);\t//call to LoginDao\r\n\t\t\tdao.logActivities(&quot;returned to logincontroller-validate:got= &quot;+userId);\r\n\r\n\t\t\t\tif (!userId.equals(null))\r\n\t\t\t\t{\t\r\n\t\t\t\t\t//setting session\r\n\t\t\t\t\t HttpSession session= request.getSession();\r\n\t\t\t\t\t Login l=new Login(userId,l1.getRole(),l1.getUsername(),null);\r\n\t\t\t\t\t session.setAttribute(&quot;userInfo&quot;, l);\r\n\t\t\t\t\t dao.logActivities(session.getId());\r\n\t\t\t\t\t for(Integer i: dao2.getUsersInSystem()) {\r\n\t\t\t\t\t\t dao.logActivities(i.toString());\r\n\t\t\t\t\t }\r\n\t\t\t\t\t \t\t\t\t\t \r\n\t\t\t\t\t //display dashboard\r\n\t\t\t\t\tModelAndView mv= new ModelAndView();\t\t\t\t\r\n\t\t\t\t\tmv.setViewName(&quot;welcome&quot;);\r\n\t\t\t\t\tmv.addObject(&quot;prescriptionsCount&quot;, dao1.prescriptionPrintCount());  //for receptionist only\r\n\t\t\t\t\tmv.addObject(&quot;users_count&quot;, dao2.getUsersInSystem());  //for admin only\r\n\t\t\t\t\treturn mv;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{   throw new Exception();  }\r\n\t\t\t\t\r\n\t\t\t    }\r\n\t\t\tcatch(Exception e)\r\n\t\t\t{\r\n\t\t\t\tdao.logActivities(&quot;LoginController-validate: &quot;+e);\t\r\n\t\t\t\tModelAndView mv= new ModelAndView();\r\n\t\t\t\tmv.setViewName(&quot;LoginView&quot;);\r\n\t\t\t\tmv.addObject(&quot;status&quot;, &quot;false&quot;);\r\n\t\t\t\treturn mv;\r\n\t\t\t}\r\n\t} \r\n\t\r\n}\r\n\r\n```\r\n\r\nLoginDao.java\r\n\r\n```\r\npackage com.project.dao;\r\n\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.query.Query;\r\nimport org.mindrot.jbcrypt.BCrypt;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\nimport com.project.entity.Login;\r\n\r\n@Component\r\npublic class LoginDao \r\n{\r\n\t@Autowired\r\n\tprivate SessionFactory sf;\t//hibernate configuration in springMVC-servlet.xml file\r\n\t\r\n\t@Autowired\r\n\tLoginDao infoLog;\r\n\t\r\n\t//to manage transaction by itself\r\n\t@Transactional\r\n\tpublic String validate(Login l)\r\n\t{\r\n\t\ttry \r\n\t\t{\r\n\t\t\tinfoLog.logActivities(&quot;in logindao-validate:got= &quot;+l);\r\n\t\t\t\t\t\t\t\r\n\t\t\tSession session= sf.getCurrentSession();\r\n\t\t\tQuery q1=session.createQuery(&quot;from Login where role= :r AND username= :u&quot;);\r\n\t\t\tq1.setParameter(&quot;r&quot;, l.getRole());\r\n\t\t\tq1.setParameter(&quot;u&quot;, l.getUsername());\r\n\t\t\r\n\t\t\tLogin temp= (Login) q1.uniqueResult();\r\n\t\t\tboolean validUser=BCrypt.checkpw(l.getPassword(),temp.getPassword());\r\n\t\t\tinfoLog.logActivities(&quot;in logindao-validate:found= &quot;+&quot;i/p=&quot;+l.getPassword()+&quot;, db=&quot;+temp.getPassword()+&quot;, match= &quot;+validUser);\r\n\t\t\tif(!validUser)\r\n\t\t\t{ \r\n\t\t\t\tthrow new Exception(&quot;Password didn&#39;t matched&quot;); \r\n\t\t\t}\r\n\t\t\treturn temp.getId();\r\n\t\t}\r\n\t\tcatch(Exception e)\r\n\t\t{\r\n\t\t\tinfoLog.logActivities(&quot;in logindao-validate: &quot;+e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void logActivities(String s)\r\n\t{\r\n\t\t//System.out.println(&quot;@&quot;+s);\r\n\t}\r\n\t\r\n}\r\n\r\n```\r\nSpringMVC-servlet.xml\r\n\r\n```\r\n&lt;!-- to specify folder and extension for view files --&gt;\r\n\t&lt;bean\r\n\t\tclass=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n\t\t&lt;property name=&quot;prefix&quot;&gt;\r\n\t\t\t&lt;value&gt;/WEB-INF/view/&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t\t&lt;property name=&quot;suffix&quot;&gt;\r\n\t\t\t&lt;value&gt;.jsp&lt;/value&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\t\t\r\n\t\t\t\r\n&lt;!-- Hibernate configuration started\t --&gt;\r\n\r\n\t&lt;!-- properties for connection i.e. jdbc pooling ,datasource has database info --&gt;\r\n\t&lt;bean id=&quot;myDataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;&gt;\r\n\t\t&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;\r\n&lt;!-- \t\t&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; --&gt;\r\n\t\t&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/hospital&quot; /&gt;\r\n\t\t&lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;\r\n\t\t&lt;property name=&quot;password&quot; value=&quot;MY_DB_PASSWORD&quot; /&gt;\r\n\t\t\r\n\t\t&lt;property name=&quot;minPoolSize&quot; value=&quot;3&quot; /&gt;\r\n&lt;!-- \t\t&lt;property name=&quot;minPoolSize&quot; value=&quot;5&quot; /&gt;\tmin 5 connections --&gt;\r\n\t\t&lt;property name=&quot;maxPoolSize&quot; value=&quot;20&quot; /&gt;\r\n\t\t&lt;property name=&quot;maxIdleTime&quot; value=&quot;30000&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;!-- sessionFactory object  --&gt;\r\n\t&lt;!-- LocalSessionFactoryBean :gives object of sessionFactory --&gt;\r\n\t&lt;!-- dataSource :is the above bean id which specifies jdbc pooling properties --&gt;\r\n\t&lt;!-- packagesToScan :location (package) of all entity classes --&gt;\r\n\t&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n\t\t&lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n\t\t&lt;property name=&quot;packagesToScan&quot; value=&quot;com.project.entity&quot; /&gt;\t&lt;!--it specifies path to scan for annotated entity classes or &lt;property name=&quot;&quot;&gt; &lt;value&gt;&lt;/value&gt; &lt;/property&gt; --&gt;\r\n\t\t&lt;property name=&quot;hibernateProperties&quot;&gt;\r\n\t\t\t&lt;props&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;\t&lt;!-- language used to create queries for DB --&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\t&lt;!-- to see queries in console --&gt;\r\n\t\t\t\t&lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt; &lt;!--  action to be performed with database on start-up --&gt;\r\n\t\t\t&lt;/props&gt;\r\n\t\t&lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;!-- transactions will be done using annotations --&gt;\r\n\t&lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\r\n\t\t&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n\t\r\n\t&lt;tx:annotation-driven transaction-manager=&quot;myTransactionManager&quot; /&gt;\r\n\t\r\n\t&lt;!--  --&gt;\r\n\t&lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot; &gt;\r\n\t\t&lt;property name=&quot;maxUploadSize&quot; value=&quot;20971520&quot; /&gt; &lt;!-- 20mb --&gt;\r\n\t&lt;/bean&gt;\r\n\r\n&lt;/beans&gt;\r\n```","title":"ERROR: Parameter number 1 is not an OUT parameter while trying to login with credentials","body":"<p>I am trying to login to the application I gave the right credentials in Sql database but it is showing &quot;No such account exists, Please insert valid credentials&quot;. The login table in sql have four parameters id,role,username,password(which is bycrypted).The id and username have same values.\n<img src=\"https://i.stack.imgur.com/40Dy5.png\" alt=\"enter image description here\" /></p>\n<p>The error in console is:</p>\n<pre><code>Hibernate: select login0_.username as username1_2_, login0_.id as id2_2_, login0_.password as password3_2_, login0_.role as role4_2_ from Login login0_ where login0_.role=? and login0_.username=?\nHibernate: {call users_in_system(?,?,?,?)}\nOct 13, 2023 9:29:34 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nWARN: SQL Error: 0, SQLState: S1009\nOct 13, 2023 9:29:34 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions\nERROR: Parameter number 1 is not an OUT parameter\n</code></pre>\n<p>LoginView.jsp</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; import=&quot;com.project.dao.LoginDao&quot; \n    pageEncoding=&quot;ISO-8859-1&quot; isELIgnored=&quot;false&quot;%&gt;\n     &lt;%! \n    LoginDao infoLog= new LoginDao();\n    %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n&lt;title&gt;User Log In&lt;/title&gt;\n    \n&lt;/head&gt;\n&lt;body&gt;\n    \n    &lt;div class=&quot;signup-form&quot;&gt;\n    &lt;form action=&quot;dashboard.html&quot; method=&quot;post&quot; autocomplete=&quot;off&quot;&gt;\n        &lt;h2&gt;Sign In&lt;/h2&gt;\n        &lt;p&gt;Please fill in this form to access your account!&lt;/p&gt;\n        &lt;hr&gt;\n        \n        &lt;div class=&quot;form-group&quot; style=&quot;color: red;&quot;&gt;\n            &lt;%  \n            try{\n                String status=(String)request.getAttribute(&quot;status&quot;);\n                infoLog.logActivities(&quot;loginview: &quot;+status);\n                    if(status.equals(&quot;false&quot;))\n                    {  out.print(&quot;No such account exists. Please insert valid credentials&quot;);  }\n                }\n            catch(Exception e)\n                {infoLog.logActivities(&quot;loginview: &quot;+e);}\n            %&gt;\n        &lt;/div&gt;\n        \n        &lt;div class=&quot;form-group&quot;&gt;\n          &lt;label for=&quot;role&quot;&gt;Role&lt;/label&gt;\n          &lt;select class=&quot;form-control&quot; name=&quot;role&quot; id=&quot;exampleSelect1&quot;&gt;\n            &lt;option value=&quot;doctor&quot;&gt;Doctor&lt;/option&gt;\n            &lt;option value=&quot;receptionist&quot;&gt;Receptionist&lt;/option&gt;\n            &lt;option value=&quot;administrator&quot;&gt;Administrator&lt;/option&gt;\n          &lt;/select&gt;\n        &lt;/div&gt;\n\n        &lt;div class=&quot;form-group&quot;&gt;\n          &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;\n          &lt;input type=&quot;text&quot; name=&quot;username&quot; class=&quot;form-control&quot; id=&quot;exampleInputEmail1&quot; aria-describedby=&quot;emailHelp&quot; placeholder=&quot;Username&quot;\n          required=&quot;required&quot;&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;form-group&quot;&gt;\n          &lt;label for=&quot;password&quot;&gt;Password&lt;/label&gt;\n          &lt;input type=&quot;password&quot; name=&quot;password&quot; class=&quot;form-control&quot; id=&quot;exampleInputPassword1&quot; placeholder=&quot;Password&quot;\n          required=&quot;required&quot;&gt;\n        &lt;/div&gt;\n        \n        &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\n        &lt;button type=&quot;reset&quot; class=&quot;btn btn-danger&quot;&gt;Clear&lt;/button&gt;\n        \n        \n &lt;/form&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>LoginController.java</p>\n<pre><code>package com.project.controller;\n\nimport javax.servlet.http.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\nimport com.project.dao.LoginDao;\nimport com.project.entity.Login;\n\n@Controller\npublic class LoginController \n{\n    @Autowired\n    LoginDao dao;\n    \n    @Autowired\n    PatientPrescriptionDao dao1;\n    \n    @Autowired\n    UsersInSystemDao dao2;\n     \n    @RequestMapping(value=&quot;/login.html&quot;, method = RequestMethod.POST)\n    public ModelAndView view()\n    {\n        try\n        {\n            ModelAndView mv= new ModelAndView();\n            mv.setViewName(&quot;LoginView&quot;);\n            mv.addObject(&quot;status&quot;, &quot;true&quot;);\n            return mv;\n        }\n        catch(Exception e)\n        {\n            dao.logActivities(&quot;LoginController-view: &quot;+e);  \n            ModelAndView mv= new ModelAndView();\n            mv.setViewName(&quot;failure&quot;);\n            mv.addObject(&quot;error&quot;,e);\n            return mv;\n        }\n    }\n    \n    \n    @RequestMapping(value=&quot;/dashboard.html&quot;, method = RequestMethod.POST)\n    public ModelAndView validate(@RequestParam(&quot;role&quot;)String role, @RequestParam(&quot;username&quot;)String username, @RequestParam(&quot;password&quot;)String password, HttpServletRequest request ) \n    {\n        try {\n            //validation code\n            dao.logActivities(&quot;in LoginController-validate:got= &quot;+role+&quot; &quot;+username+&quot; &quot;+password);\n            Login l1=new Login(null,role, username, password);\n            \n            String userId=dao.validate(l1); //call to LoginDao\n            dao.logActivities(&quot;returned to logincontroller-validate:got= &quot;+userId);\n\n                if (!userId.equals(null))\n                {   \n                    //setting session\n                     HttpSession session= request.getSession();\n                     Login l=new Login(userId,l1.getRole(),l1.getUsername(),null);\n                     session.setAttribute(&quot;userInfo&quot;, l);\n                     dao.logActivities(session.getId());\n                     for(Integer i: dao2.getUsersInSystem()) {\n                         dao.logActivities(i.toString());\n                     }\n                                         \n                     //display dashboard\n                    ModelAndView mv= new ModelAndView();                \n                    mv.setViewName(&quot;welcome&quot;);\n                    mv.addObject(&quot;prescriptionsCount&quot;, dao1.prescriptionPrintCount());  //for receptionist only\n                    mv.addObject(&quot;users_count&quot;, dao2.getUsersInSystem());  //for admin only\n                    return mv;\n                }\n                else\n                {   throw new Exception();  }\n                \n                }\n            catch(Exception e)\n            {\n                dao.logActivities(&quot;LoginController-validate: &quot;+e);  \n                ModelAndView mv= new ModelAndView();\n                mv.setViewName(&quot;LoginView&quot;);\n                mv.addObject(&quot;status&quot;, &quot;false&quot;);\n                return mv;\n            }\n    } \n    \n}\n\n</code></pre>\n<p>LoginDao.java</p>\n<pre><code>package com.project.dao;\n\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.query.Query;\nimport org.mindrot.jbcrypt.BCrypt;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport com.project.entity.Login;\n\n@Component\npublic class LoginDao \n{\n    @Autowired\n    private SessionFactory sf;  //hibernate configuration in springMVC-servlet.xml file\n    \n    @Autowired\n    LoginDao infoLog;\n    \n    //to manage transaction by itself\n    @Transactional\n    public String validate(Login l)\n    {\n        try \n        {\n            infoLog.logActivities(&quot;in logindao-validate:got= &quot;+l);\n                            \n            Session session= sf.getCurrentSession();\n            Query q1=session.createQuery(&quot;from Login where role= :r AND username= :u&quot;);\n            q1.setParameter(&quot;r&quot;, l.getRole());\n            q1.setParameter(&quot;u&quot;, l.getUsername());\n        \n            Login temp= (Login) q1.uniqueResult();\n            boolean validUser=BCrypt.checkpw(l.getPassword(),temp.getPassword());\n            infoLog.logActivities(&quot;in logindao-validate:found= &quot;+&quot;i/p=&quot;+l.getPassword()+&quot;, db=&quot;+temp.getPassword()+&quot;, match= &quot;+validUser);\n            if(!validUser)\n            { \n                throw new Exception(&quot;Password didn't matched&quot;); \n            }\n            return temp.getId();\n        }\n        catch(Exception e)\n        {\n            infoLog.logActivities(&quot;in logindao-validate: &quot;+e);\n            return null;\n        }\n    }\n    \n    public void logActivities(String s)\n    {\n        //System.out.println(&quot;@&quot;+s);\n    }\n    \n}\n\n</code></pre>\n<p>SpringMVC-servlet.xml</p>\n<pre><code>&lt;!-- to specify folder and extension for view files --&gt;\n    &lt;bean\n        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        &lt;property name=&quot;prefix&quot;&gt;\n            &lt;value&gt;/WEB-INF/view/&lt;/value&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;suffix&quot;&gt;\n            &lt;value&gt;.jsp&lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n        \n            \n&lt;!-- Hibernate configuration started     --&gt;\n\n    &lt;!-- properties for connection i.e. jdbc pooling ,datasource has database info --&gt;\n    &lt;bean id=&quot;myDataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot; /&gt;\n&lt;!--        &lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt; --&gt;\n        &lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql://localhost:3306/hospital&quot; /&gt;\n        &lt;property name=&quot;user&quot; value=&quot;root&quot; /&gt;\n        &lt;property name=&quot;password&quot; value=&quot;MY_DB_PASSWORD&quot; /&gt;\n        \n        &lt;property name=&quot;minPoolSize&quot; value=&quot;3&quot; /&gt;\n&lt;!--        &lt;property name=&quot;minPoolSize&quot; value=&quot;5&quot; /&gt;   min 5 connections --&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;20&quot; /&gt;\n        &lt;property name=&quot;maxIdleTime&quot; value=&quot;30000&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;!-- sessionFactory object  --&gt;\n    &lt;!-- LocalSessionFactoryBean :gives object of sessionFactory --&gt;\n    &lt;!-- dataSource :is the above bean id which specifies jdbc pooling properties --&gt;\n    &lt;!-- packagesToScan :location (package) of all entity classes --&gt;\n    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.project.entity&quot; /&gt;   &lt;!--it specifies path to scan for annotated entity classes or &lt;property name=&quot;&quot;&gt; &lt;value&gt;&lt;/value&gt; &lt;/property&gt; --&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/prop&gt;  &lt;!-- language used to create queries for DB --&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;  &lt;!-- to see queries in console --&gt;\n                &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt; &lt;!--  action to be performed with database on start-up --&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;!-- transactions will be done using annotations --&gt;\n    &lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;&gt;\n        &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;tx:annotation-driven transaction-manager=&quot;myTransactionManager&quot; /&gt;\n    \n    &lt;!--  --&gt;\n    &lt;bean id=&quot;multipartResolver&quot; class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot; &gt;\n        &lt;property name=&quot;maxUploadSize&quot; value=&quot;20971520&quot; /&gt; &lt;!-- 20mb --&gt;\n    &lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":["java","audio"],"comments":[{"owner":{"account_id":2272320,"reputation":4472,"user_id":1999393,"display_name":"fmodos"},"score":0,"creation_date":1374172573,"post_id":17731274,"comment_id":25847715,"body_markdown":"is there any error exception or the sound just don&#39;t play?","body":"is there any error exception or the sound just don&#39;t play?"},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":1,"creation_date":1374172602,"post_id":17731274,"comment_id":25847735,"body_markdown":"If you&#39;re serious about game development then you should look into finding the right framework/library that will take care of the low level stuff for you (such as playing sounds). Once you find a framework that suits your needs, you can focus on actually creating your game instead of reinventing wheels.","body":"If you&#39;re serious about game development then you should look into finding the right framework/library that will take care of the low level stuff for you (such as playing sounds). Once you find a framework that suits your needs, you can focus on actually creating your game instead of reinventing wheels."},{"owner":{"account_id":1529569,"reputation":32719,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":0,"creation_date":1374172647,"post_id":17731274,"comment_id":25847761,"body_markdown":"@damo - Do you have any suggestions for a framework?","body":"@damo - Do you have any suggestions for a framework?"},{"owner":{"account_id":1842786,"reputation":11494,"user_id":1671856,"display_name":"DannyMo"},"score":1,"creation_date":1374172956,"post_id":17731274,"comment_id":25847920,"body_markdown":"It really depends on what you&#39;re trying to do and which platform(s) you&#39;re targeting. I use [libgdx](http://code.google.com/p/libgdx/) for Android games (though, it _is_ cross-platform). Using libgdx as an example, the framework doesn&#39;t require me to [put much effort into playing sounds](http://code.google.com/p/libgdx/wiki/AudioSound).","body":"It really depends on what you&#39;re trying to do and which platform(s) you&#39;re targeting. I use <a href=\"http://code.google.com/p/libgdx/\" rel=\"nofollow noreferrer\">libgdx</a> for Android games (though, it <i>is</i> cross-platform). Using libgdx as an example, the framework doesn&#39;t require me to <a href=\"http://code.google.com/p/libgdx/wiki/AudioSound\" rel=\"nofollow noreferrer\">put much effort into playing sounds</a>."},{"owner":{"account_id":968538,"reputation":593,"user_id":991538,"display_name":"LJ2"},"score":1,"creation_date":1374173074,"post_id":17731274,"comment_id":25847976,"body_markdown":"I&#39;m not trying to be a &quot;pain&quot;, and I&#39;m certainly not going to accuse you of &quot;making no effort&quot;, but I would highly recommend that you start off with some introductory Java material, such as Deitel&#39;s Java How to Program, so that you can have a better understanding of the code that you&#39;re looking at, and the basics of object oriented programming in general.\n\nTo actually answer your question, you&#39;ve created a method that will play a sound clip, but you don&#39;t actually call that method anywhere during the intialization or rendering of your menu.  You&#39;ll need to call it for it to actually execute.","body":"I&#39;m not trying to be a &quot;pain&quot;, and I&#39;m certainly not going to accuse you of &quot;making no effort&quot;, but I would highly recommend that you start off with some introductory Java material, such as Deitel&#39;s Java How to Program, so that you can have a better understanding of the code that you&#39;re looking at, and the basics of object oriented programming in general.  To actually answer your question, you&#39;ve created a method that will play a sound clip, but you don&#39;t actually call that method anywhere during the intialization or rendering of your menu.  You&#39;ll need to call it for it to actually execute."},{"owner":{"account_id":1529569,"reputation":32719,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":1,"creation_date":1374173471,"post_id":17731274,"comment_id":25848183,"body_markdown":"In addition to @LJ2&#39;s good advice, it&#39;s also good practice when you have a problem to create the simplest possible case to test your code. In this case, you could create a simple program that _only plays a sound_ when it&#39;s run, and that way you can test to make sure it works in the simple case before trying to figure out what&#39;s wrong in the larger case. (However, LJ2 already found your problem—you never call the `sound` method.)","body":"In addition to @LJ2&#39;s good advice, it&#39;s also good practice when you have a problem to create the simplest possible case to test your code. In this case, you could create a simple program that <i>only plays a sound</i> when it&#39;s run, and that way you can test to make sure it works in the simple case before trying to figure out what&#39;s wrong in the larger case. (However, LJ2 already found your problem—you never call the <code>sound</code> method.)"},{"owner":{"account_id":1529569,"reputation":32719,"user_id":1427124,"accept_rate":91,"display_name":"DaoWen"},"score":0,"creation_date":1374173519,"post_id":17731274,"comment_id":25848209,"body_markdown":"@LJ2 - You should post your comment as an answer. You did after all find the bug in his code (not calling `sound`).","body":"@LJ2 - You should post your comment as an answer. You did after all find the bug in his code (not calling <code>sound</code>)."},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374187698,"post_id":17731274,"comment_id":25854665,"body_markdown":"Actually I&#39;m afraid that&#39;s not a bug, i removed where i called it from because errors were produced, I&#39;m not that bad at java :P Good spot though","body":"Actually I&#39;m afraid that&#39;s not a bug, i removed where i called it from because errors were produced, I&#39;m not that bad at java :P Good spot though"},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374189195,"post_id":17731274,"comment_id":25855118,"body_markdown":"o yeah, also i always try to implement code i find in both a separate java program and within my game","body":"o yeah, also i always try to implement code i find in both a separate java program and within my game"}],"answers":[{"comments":[{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374188487,"post_id":17732060,"comment_id":25854900,"body_markdown":"Thank you for the response, I&#39;ve edited my code to implement what you&#39;ve given me and put it in the original question. I&#39;m afraid no sound is produced though, no errors are produced in run time but the IDE picks up on a few things when error checking which ill quote in comments on my code","body":"Thank you for the response, I&#39;ve edited my code to implement what you&#39;ve given me and put it in the original question. I&#39;m afraid no sound is produced though, no errors are produced in run time but the IDE picks up on a few things when error checking which ill quote in comments on my code"},{"owner":{"account_id":1943015,"reputation":1641,"user_id":1748746,"accept_rate":84,"display_name":"Anthony Raimondo"},"score":0,"creation_date":1374202620,"post_id":17732060,"comment_id":25858419,"body_markdown":"right the problem is your class needs to implements Runnable... public class Sound implements Runnable","body":"right the problem is your class needs to implements Runnable... public class Sound implements Runnable"},{"owner":{"account_id":1943015,"reputation":1641,"user_id":1748746,"accept_rate":84,"display_name":"Anthony Raimondo"},"score":0,"creation_date":1374202707,"post_id":17732060,"comment_id":25858437,"body_markdown":"the above code is a class on its own seperate from your class. Just create an instance of this class in main and call the &quot;playBackGround&quot; method","body":"the above code is a class on its own seperate from your class. Just create an instance of this class in main and call the &quot;playBackGround&quot; method"},{"owner":{"account_id":1943015,"reputation":1641,"user_id":1748746,"accept_rate":84,"display_name":"Anthony Raimondo"},"score":0,"creation_date":1374203270,"post_id":17732060,"comment_id":25858551,"body_markdown":"just to be clear you need to create a new java class file and copy past the above code into it.","body":"just to be clear you need to create a new java class file and copy past the above code into it."},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374238248,"post_id":17732060,"comment_id":25873944,"body_markdown":"I understood thanks :) I&#39;m having some problems still though, ill edit my question","body":"I understood thanks :) I&#39;m having some problems still though, ill edit my question"},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374239211,"post_id":17732060,"comment_id":25874646,"body_markdown":"Also I&#39;ve just noticed that your Sound class concatenates &quot;.wav&quot; onto the end of the string given. Fixing this by calling playBackGround(&quot;res/doxx&quot;) doesn&#39;t change the errors produced at all. Also line 45 where the error is pointed out (by the console) in the Sound class is the line &quot;this.inputStream = AudioSystem.getAudioInputStream(Sound.class.getResource(url));&quot;","body":"Also I&#39;ve just noticed that your Sound class concatenates &quot;.wav&quot; onto the end of the string given. Fixing this by calling playBackGround(&quot;res/doxx&quot;) doesn&#39;t change the errors produced at all. Also line 45 where the error is pointed out (by the console) in the Sound class is the line &quot;this.inputStream = AudioSystem.getAudioInputStream(Sound.class.getResource(url)&zwnj;&#8203;);&quot;"},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374239648,"post_id":17732060,"comment_id":25874906,"body_markdown":"Final point, these imports within the Sound class aren&#39;t used   &quot;import java.applet.Applet;\nimport java.applet.AudioClip;&quot; not that this sound affect anything but i thought i should make sure the whole picture is there","body":"Final point, these imports within the Sound class aren&#39;t used   &quot;import java.applet.Applet; import java.applet.AudioClip;&quot; not that this sound affect anything but i thought i should make sure the whole picture is there"},{"owner":{"account_id":1943015,"reputation":1641,"user_id":1748746,"accept_rate":84,"display_name":"Anthony Raimondo"},"score":0,"creation_date":1374254543,"post_id":17732060,"comment_id":25884380,"body_markdown":"this is odd, i dont get an error on line 45... but there were some imports not used. if there is an error on line 45 its maybe because your class name is not &quot;Sound&quot; because the code uses Sound.class.getResource(url) this is referring to the class that your in... Ex: MYClassName.class.getResource(url)","body":"this is odd, i dont get an error on line 45... but there were some imports not used. if there is an error on line 45 its maybe because your class name is not &quot;Sound&quot; because the code uses Sound.class.getResource(url) this is referring to the class that your in... Ex: MYClassName.class.getResource(url)"},{"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"score":0,"creation_date":1374490213,"post_id":17732060,"comment_id":25943280,"body_markdown":"Well its named Sound.java how could i make it Sound.class ? Or is that not what you&#39;re getting at? I thought those were compiled by eclipse","body":"Well its named Sound.java how could i make it Sound.class ? Or is that not what you&#39;re getting at? I thought those were compiled by eclipse"}],"tags":[],"owner":{"account_id":1943015,"reputation":1641,"user_id":1748746,"accept_rate":84,"display_name":"Anthony Raimondo"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374254156,"creation_date":1374174946,"answer_id":17732060,"question_id":17731274,"body_markdown":"    import javax.sound.sampled.AudioInputStream;\r\n    import javax.sound.sampled.AudioSystem;\r\n    import javax.sound.sampled.Clip;\r\n    import javax.sound.sampled.LineUnavailableException;\r\n    \r\n    public class Sound implements Runnable\r\n    {\r\n    \tprivate boolean running = false;\r\n    \tprivate Thread thread;\r\n    \t\r\n    \tpublic Sound()\r\n    \t{\r\n    \t\tthis.start();\r\n    \t}\r\n    \r\n        public void start()\r\n    \t{\r\n    \t\tif(running)\r\n    \t\t\treturn;\r\n    \t\tthis.thread = new Thread(this);\r\n    \t\tthis.running = true;\r\n    \t\tthis.thread.start();\r\n    \t}\r\n    \r\n    \t//\r\n    \tprivate boolean playSong = false;\r\n    \tprivate AudioInputStream inputStream;\r\n    \tprivate String url;\r\n    \tprivate Clip clip;\r\n    \r\n    \t@Override\r\n    \tpublic void run()\r\n    \t{\r\n    \t\twhile(running)\r\n    \t\t{\r\n    \t\t\tif(inputStream == null &amp;&amp; playSong)\r\n    \t\t\t{\r\n    \t\t\t\tthis.playSong = false;\r\n    \t\t\t\ttry\r\n    \t\t\t\t{\r\n    \t\t\t\t\tthis.inputStream = AudioSystem.getAudioInputStream(Sound.class.getResource(url));\r\n    \t\t\t\t\tthis.clip.open(inputStream);\r\n    \t\t\t\t\tthis.clip.loop(10);\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch(Exception e)\r\n    \t\t\t\t{\r\n    \t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void playBackGround(String string) // call to play .wav file\r\n    \t{\r\n    \t\tif(this.clip != null)\r\n    \t\t{\r\n    \t\t\tthis.clip.stop();\r\n    \t\t\tthis.clip.close();\r\n    \t\t}\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tthis.clip = AudioSystem.getClip();\r\n    \t\t}\r\n    \t\tcatch(LineUnavailableException e)\r\n    \t\t{\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\turl = string + &quot;.wav&quot;;\r\n    \t\tthis.playSong = true;\r\n    \t\tthis.inputStream = null;\r\n    \t}\r\n    \t\r\n    \tpublic void disposeSound()\r\n    \t{\r\n    \t\tif(this.clip != null)\r\n    \t\t{\r\n    \t\t\tthis.clip.stop();\r\n    \t\t\tthis.clip.close();\r\n    \t\t}\r\n    \t\tthis.clip = null;\r\n    \t\tthis.playSong = false;\r\n    \t\tthis.inputStream = null;\r\n    \t}\r\n    }\r\n","title":"implementing sound into a java game","body":"<pre><code>import javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.Clip;\nimport javax.sound.sampled.LineUnavailableException;\n\npublic class Sound implements Runnable\n{\n    private boolean running = false;\n    private Thread thread;\n\n    public Sound()\n    {\n        this.start();\n    }\n\n    public void start()\n    {\n        if(running)\n            return;\n        this.thread = new Thread(this);\n        this.running = true;\n        this.thread.start();\n    }\n\n    //\n    private boolean playSong = false;\n    private AudioInputStream inputStream;\n    private String url;\n    private Clip clip;\n\n    @Override\n    public void run()\n    {\n        while(running)\n        {\n            if(inputStream == null &amp;&amp; playSong)\n            {\n                this.playSong = false;\n                try\n                {\n                    this.inputStream = AudioSystem.getAudioInputStream(Sound.class.getResource(url));\n                    this.clip.open(inputStream);\n                    this.clip.loop(10);\n                }\n                catch(Exception e)\n                {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n    public void playBackGround(String string) // call to play .wav file\n    {\n        if(this.clip != null)\n        {\n            this.clip.stop();\n            this.clip.close();\n        }\n        try\n        {\n            this.clip = AudioSystem.getClip();\n        }\n        catch(LineUnavailableException e)\n        {\n            e.printStackTrace();\n        }\n        url = string + \".wav\";\n        this.playSong = true;\n        this.inputStream = null;\n    }\n\n    public void disposeSound()\n    {\n        if(this.clip != null)\n        {\n            this.clip.stop();\n            this.clip.close();\n        }\n        this.clip = null;\n        this.playSong = false;\n        this.inputStream = null;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":191443,"reputation":24997,"user_id":432021,"display_name":"Nikolay Shmyrev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391702586,"creation_date":1391701781,"answer_id":21607552,"question_id":17731274,"body_markdown":"This error occurs when you try to create an AudioInputStream from a null URL. Make sure that url is not null, make sure that you reference a correct file.\r\n\r\n","title":"implementing sound into a java game","body":"<p>This error occurs when you try to create an AudioInputStream from a null URL. Make sure that url is not null, make sure that you reference a correct file.</p>\n"}],"owner":{"account_id":3038883,"reputation":1829,"user_id":2576372,"accept_rate":80,"display_name":"Shardj"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10863,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697270840,"creation_date":1374172186,"question_id":17731274,"body_markdown":"I&#39;ve followed Buckys java game development with slick for the basic setup for the game and since then I&#39;ve taken it into my own hands. Currently I&#39;m just building the menu and its pretty much finished except i want to add sound to it. I&#39;ve been stuck on this for a week so its not like i haven&#39;t done any research for this, i just can&#39;t make it work. Now I&#39;ve found some code to do this which seems to make sense, how could i implement this or if you have a better idea for how to add some sound, appreciated.\r\n\r\n    import javax.sound.sampled.AudioInputStream;\r\n    import javax.sound.sampled.AudioSystem;\r\n    import javax.sound.sampled.Clip;\r\n\r\n    static String soundtrack = &quot;res/doxx.wav&quot;;\r\n\r\n    public void sound(String path){\r\n\t\t\r\n\t\ttry{\r\n\t\t\tAudioInputStream audio = AudioSystem.getAudioInputStream(Menu.class.getResource(path));\r\n\t\t\tClip clip = AudioSystem.getClip();\r\n\t\t\tclip.open(audio);\r\n\t\t\tclip.start();\r\n\t\t} catch (Exception e){\r\n\t\t\tSystem.out.println(&quot;check &quot;+path+&quot;\\n&quot;);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nedit: This code has been taken out of the program now, but feel free to post answers based on it\r\n\r\nThat&#39;s the code related to adding sound so far, here is the entirety of my menu class, its not to huge. To be honest you probably don&#39;t need to look at it in detail, its currently all based around graphics and two buttons (start and quit) which are spinning.\r\n\r\n    package javagame;\r\n\r\n    import org.lwjgl.input.Mouse;\r\n    import org.newdawn.slick.*;\r\n    import org.newdawn.slick.state.*;\r\n\r\n\r\n    public class Menu extends BasicGameState {\r\n\t\r\n\tdouble pi=3.14159265359;\r\n\tfloat beanPosY = 330;\r\n\tfloat beanPosX = 70;\r\n\tdouble gravity = 0.01;\r\n\tdouble angleStart=1.5*pi;\r\n\tdouble angleQuit=0.5*pi;\r\n\tint radius=120;\r\n\tint centerX=300;\r\n\tint centerY=160;\r\n\tfloat startPosX = (float) (centerX + Math.sin(angleStart)*radius);\r\n\tfloat startPosY = (float) (centerY + Math.cos(angleStart)*radius);\r\n\tfloat quitPosX = (float) (centerX + Math.sin(angleQuit)*radius);\r\n\tfloat quitPosY = (float) (centerY + Math.cos(angleQuit)*radius);\r\n\tdouble force = 0;\r\n\tpublic Menu(int state){\r\n\t}\r\n\t\r\n\tpublic void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\r\n\t\tSound music = new Sound();\r\n\t\tmusic.playBackGround(&quot;res/doxx.wav&quot;);\r\n\t}\r\n\t\r\n\tpublic void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{\t\t\r\n\t\tImage background = new Image(&quot;res/background640x480.fw.png&quot;);\r\n\t\tg.drawImage(background, 0, 0);\r\n\t\t\r\n\t\tImage start = new Image(&quot;res/Start100x100.fw.png&quot;);\r\n\t\tImage quit = new Image(&quot;res/quit100x100.fw.png&quot;);\r\n\t\tstart.draw(startPosX,startPosY);\r\n\t\tquit.draw(quitPosX,quitPosY);\r\n\t\t\r\n\t\tImage grass = new Image(&quot;res/grass640x150.fw.png&quot;);\r\n\t\tg.drawImage(grass,0,340);\r\n\t\t\r\n\t\tImage bean = new Image(&quot;res/bean.jpg&quot;);\r\n\t\tbean.draw(beanPosX, beanPosY);\r\n\t}\r\n\t\r\n\tpublic void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\r\n\t\tint posX = Mouse.getX();\r\n\t\tint posY = Mouse.getY();\r\n\t\tdouble constant=0.002*pi;\r\n\t\t\r\n\t\tstartPosX = (float) (centerX + Math.sin(angleStart)*radius);\r\n\t\tstartPosY = (float) (centerY + Math.cos(angleStart)*radius);\r\n\t\tquitPosX = (float) (centerX + Math.sin(angleQuit)*radius);\r\n\t\tquitPosY = (float) (centerY + Math.cos(angleQuit)*radius);\r\n\t\t\r\n\t\tangleStart+=constant;\r\n\t\tangleQuit+=constant;\r\n\t\tif (angleStart&gt;=2*pi){\r\n\t\t\tangleStart-=2*pi;\r\n\t\t}\r\n\t\tif (angleQuit&gt;=2*pi){\r\n\t\t\tangleQuit-=2*pi;\r\n\t\t}\r\n\t\t//button interactions\r\n\t\tmenuInteraction(posX,posY,sbg);\r\n\t\t\r\n\r\n\t\tif (beanPosY&gt;=330){\r\n\t\t\tforce=1;\r\n\t\t}\r\n\t\tbeanPosY-=force;\r\n\t\tforce-=gravity;\r\n\t}\r\n\t\r\n\tpublic int getID(){\r\n\t\treturn 0;\r\n\t}\r\n\t\r\n\tprivate void menuInteraction(int posX, int posY, StateBasedGame sbg){\r\n\t\t//play button\r\n\t\tfloat startXDist=posX-(startPosX+50);\r\n\t\tfloat startYDist=(480-posY)-(startPosY+50);\r\n\t\tfloat startDist=(float) Math.sqrt((startXDist*startXDist)+(startYDist*startYDist));\r\n\t\tif(startDist&lt;=50){\r\n\t\t\tif(Mouse.isButtonDown(0)){\r\n\t\t\t\tsbg.enterState(1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t//quit button\r\n\t\tfloat quitXDist=posX-(quitPosX+50);\r\n\t\tfloat quitYDist=(480-posY)-(quitPosY+50);\r\n\t\tfloat quitDist=(float) Math.sqrt((quitXDist*quitXDist)+(quitYDist*quitYDist));\r\n\t\tif(quitDist&lt;=50){\r\n\t\t\tif(Mouse.isButtonDown(0)){\r\n\t\t\t\tSystem.exit(0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nedit: The code above now creates an object within the &#39;init()&#39; method which calls upon the &#39;Sound&#39; class and its method &#39;playBackGround()&#39;. The code for the Sound class is given in the answer below from JavaNewb.\r\n\r\nedit: The errors produced by this code are as follows:\r\n\r\n    java.lang.NullPointerException\r\n\tat com.sun.media.sound.StandardMidiFileReader.getSequence(Unknown Source)\r\n\tat javax.sound.midi.MidiSystem.getSequence(Unknown Source)\r\n\tat com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)\r\n\tat javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)\r\n\tat javagame.Sound.run(Sound.java:45)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n\r\nFinal point, i have tried things such as the LWJGL libraries, i can&#39;t make sense of them. Also i realize how much I&#39;m asking as I&#39;m basically asking for someone to code this into my game which i wish i didn&#39;t have to do but i don&#39;t know how else to solve my problem without posting it on here.\r\n\r\nPS. Its not like i haven&#39;t tried to do this myself, so don&#39;t be a pain and say I&#39;ve made no effort","title":"implementing sound into a java game","body":"<p>I've followed Buckys java game development with slick for the basic setup for the game and since then I've taken it into my own hands. Currently I'm just building the menu and its pretty much finished except i want to add sound to it. I've been stuck on this for a week so its not like i haven't done any research for this, i just can't make it work. Now I've found some code to do this which seems to make sense, how could i implement this or if you have a better idea for how to add some sound, appreciated.</p>\n\n<pre><code>import javax.sound.sampled.AudioInputStream;\nimport javax.sound.sampled.AudioSystem;\nimport javax.sound.sampled.Clip;\n\nstatic String soundtrack = \"res/doxx.wav\";\n\npublic void sound(String path){\n\n    try{\n        AudioInputStream audio = AudioSystem.getAudioInputStream(Menu.class.getResource(path));\n        Clip clip = AudioSystem.getClip();\n        clip.open(audio);\n        clip.start();\n    } catch (Exception e){\n        System.out.println(\"check \"+path+\"\\n\");\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>edit: This code has been taken out of the program now, but feel free to post answers based on it</p>\n\n<p>That's the code related to adding sound so far, here is the entirety of my menu class, its not to huge. To be honest you probably don't need to look at it in detail, its currently all based around graphics and two buttons (start and quit) which are spinning.</p>\n\n<pre><code>package javagame;\n\nimport org.lwjgl.input.Mouse;\nimport org.newdawn.slick.*;\nimport org.newdawn.slick.state.*;\n\n\npublic class Menu extends BasicGameState {\n\ndouble pi=3.14159265359;\nfloat beanPosY = 330;\nfloat beanPosX = 70;\ndouble gravity = 0.01;\ndouble angleStart=1.5*pi;\ndouble angleQuit=0.5*pi;\nint radius=120;\nint centerX=300;\nint centerY=160;\nfloat startPosX = (float) (centerX + Math.sin(angleStart)*radius);\nfloat startPosY = (float) (centerY + Math.cos(angleStart)*radius);\nfloat quitPosX = (float) (centerX + Math.sin(angleQuit)*radius);\nfloat quitPosY = (float) (centerY + Math.cos(angleQuit)*radius);\ndouble force = 0;\npublic Menu(int state){\n}\n\npublic void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\n    Sound music = new Sound();\n    music.playBackGround(\"res/doxx.wav\");\n}\n\npublic void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{     \n    Image background = new Image(\"res/background640x480.fw.png\");\n    g.drawImage(background, 0, 0);\n\n    Image start = new Image(\"res/Start100x100.fw.png\");\n    Image quit = new Image(\"res/quit100x100.fw.png\");\n    start.draw(startPosX,startPosY);\n    quit.draw(quitPosX,quitPosY);\n\n    Image grass = new Image(\"res/grass640x150.fw.png\");\n    g.drawImage(grass,0,340);\n\n    Image bean = new Image(\"res/bean.jpg\");\n    bean.draw(beanPosX, beanPosY);\n}\n\npublic void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\n    int posX = Mouse.getX();\n    int posY = Mouse.getY();\n    double constant=0.002*pi;\n\n    startPosX = (float) (centerX + Math.sin(angleStart)*radius);\n    startPosY = (float) (centerY + Math.cos(angleStart)*radius);\n    quitPosX = (float) (centerX + Math.sin(angleQuit)*radius);\n    quitPosY = (float) (centerY + Math.cos(angleQuit)*radius);\n\n    angleStart+=constant;\n    angleQuit+=constant;\n    if (angleStart&gt;=2*pi){\n        angleStart-=2*pi;\n    }\n    if (angleQuit&gt;=2*pi){\n        angleQuit-=2*pi;\n    }\n    //button interactions\n    menuInteraction(posX,posY,sbg);\n\n\n    if (beanPosY&gt;=330){\n        force=1;\n    }\n    beanPosY-=force;\n    force-=gravity;\n}\n\npublic int getID(){\n    return 0;\n}\n\nprivate void menuInteraction(int posX, int posY, StateBasedGame sbg){\n    //play button\n    float startXDist=posX-(startPosX+50);\n    float startYDist=(480-posY)-(startPosY+50);\n    float startDist=(float) Math.sqrt((startXDist*startXDist)+(startYDist*startYDist));\n    if(startDist&lt;=50){\n        if(Mouse.isButtonDown(0)){\n            sbg.enterState(1);\n        }\n    }\n\n    //quit button\n    float quitXDist=posX-(quitPosX+50);\n    float quitYDist=(480-posY)-(quitPosY+50);\n    float quitDist=(float) Math.sqrt((quitXDist*quitXDist)+(quitYDist*quitYDist));\n    if(quitDist&lt;=50){\n        if(Mouse.isButtonDown(0)){\n            System.exit(0);\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>edit: The code above now creates an object within the 'init()' method which calls upon the 'Sound' class and its method 'playBackGround()'. The code for the Sound class is given in the answer below from JavaNewb.</p>\n\n<p>edit: The errors produced by this code are as follows:</p>\n\n<pre><code>java.lang.NullPointerException\nat com.sun.media.sound.StandardMidiFileReader.getSequence(Unknown Source)\nat javax.sound.midi.MidiSystem.getSequence(Unknown Source)\nat com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream(Unknown Source)\nat javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)\nat javagame.Sound.run(Sound.java:45)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>Final point, i have tried things such as the LWJGL libraries, i can't make sense of them. Also i realize how much I'm asking as I'm basically asking for someone to code this into my game which i wish i didn't have to do but i don't know how else to solve my problem without posting it on here.</p>\n\n<p>PS. Its not like i haven't tried to do this myself, so don't be a pain and say I've made no effort</p>\n"},{"tags":["java","android","flutter","dart","gradle"],"comments":[{"owner":{"account_id":19374975,"reputation":165,"user_id":14167431,"display_name":"Uvais"},"score":0,"creation_date":1674919513,"post_id":75267508,"comment_id":132818630,"body_markdown":"https://stackoverflow.com/questions/61930007/how-to-solve-execution-failed-for-task-appcompileflutterbuilddebug. Please follow this link","body":"<a href=\"https://stackoverflow.com/questions/61930007/how-to-solve-execution-failed-for-task-appcompileflutterbuilddebug\" title=\"how to solve execution failed for task appcompileflutterbuilddebug\">stackoverflow.com/questions/61930007/&hellip;</a>. Please follow this link"}],"answers":[{"tags":[],"owner":{"account_id":6013815,"reputation":3033,"user_id":4723365,"display_name":"aksyuma"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1675596022,"creation_date":1675596022,"answer_id":75351839,"question_id":75267508,"body_markdown":"Faced same exact error `impellerc stdout:...` when building my sample flutter on my mac laptop.\r\n\r\nI was able to resolve this error using the following steps below :\r\n\r\n 1. On your Mac, choose `Apple menu &gt; System Settings`. \r\n\r\n 2. Scroll and click `Privacy &amp; security`, then scroll down to `security` section. \r\n\r\n 3. Click the lock icon to unlock it,\r\n    then enter an administrator name and password. Select the sources\r\n    from which you’ll allow software to be installed: *There should be a\r\n    button that says &quot;Allow anyway&quot; which when clicked will prompt for administrator name and password. If not make sure you&#39;ve cancelled\r\n    the error dialog.*\r\n\r\n[![impellerc][1]][1]\r\n\r\n\r\nDev Environment:\r\n```\r\n------------------------------------------------------------\r\nFlutter       3.7.1\r\nGradle        7.6\r\nKotlin:       1.7.10\r\nGroovy:       3.0.13\r\nJVM:          17.0.6 (Homebrew 17.0.6+0)\r\nOS:           Mac OS X 13.0 aarch64\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FJGGE.png","title":"Execution failed for task :app:compileFlutterBuildDebug","body":"<p>Faced same exact error <code>impellerc stdout:...</code> when building my sample flutter on my mac laptop.</p>\n<p>I was able to resolve this error using the following steps below :</p>\n<ol>\n<li><p>On your Mac, choose <code>Apple menu &gt; System Settings</code>.</p>\n</li>\n<li><p>Scroll and click <code>Privacy &amp; security</code>, then scroll down to <code>security</code> section.</p>\n</li>\n<li><p>Click the lock icon to unlock it,\nthen enter an administrator name and password. Select the sources\nfrom which you’ll allow software to be installed: <em>There should be a\nbutton that says &quot;Allow anyway&quot; which when clicked will prompt for administrator name and password. If not make sure you've cancelled\nthe error dialog.</em></p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FJGGE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FJGGE.png\" alt=\"impellerc\" /></a></p>\n<p>Dev Environment:</p>\n<pre><code>------------------------------------------------------------\nFlutter       3.7.1\nGradle        7.6\nKotlin:       1.7.10\nGroovy:       3.0.13\nJVM:          17.0.6 (Homebrew 17.0.6+0)\nOS:           Mac OS X 13.0 aarch64\n</code></pre>\n"}],"owner":{"account_id":19786875,"reputation":23,"user_id":14490667,"display_name":"Elkhan Jafarov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1456,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697270242,"creation_date":1674907548,"question_id":75267508,"body_markdown":"Hi i don`t know what to do with this problem every time when i want to run my project \r\n\r\nthis Error:\r\n```\r\nLaunching lib\\main.dart on sdk gphone x86 arm in debug mode...\r\nRunning Gradle task &#39;assembleDebug&#39;...\r\nCould not write file to C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag.spirv\r\n\r\nTarget debug_android_application failed: ShaderCompilerException: Shader compilation of &quot;C:\\Users\\elkha\\flutter\\packages\\flutter\\lib\\src\\material\\shaders\\ink_sparkle.frag&quot; to &quot;C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag&quot; failed with exit code 1.\r\nimpellerc stdout:\r\n\r\nimpellerc stderr:\r\nCould not write file to C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag.spirv\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nScript &#39;C:\\Users\\elkha\\flutter\\packages\\flutter_tools\\gradle\\flutter.gradle&#39; line: 1151\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:compileFlutterBuildDebug&#39;.\r\n&gt; Process &#39;command &#39;C:\\Users\\elkha\\flutter\\bin\\flutter.bat&#39;&#39; finished with non-zero exit value 1\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 49s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n```\r\n\r\nMy build.gradle:\r\n```\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterRoot = localProperties.getProperty(&#39;flutter.sdk&#39;)\r\nif (flutterRoot == null) {\r\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\n\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\r\n\r\nandroid {\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_11\r\n        targetCompatibility JavaVersion.VERSION_11\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;11&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\n\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.elcode.crypto_list2&quot;\r\n        // You can update the following values to match your application needs.\r\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\r\n        minSdkVersion flutter.minSdkVersion\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            // TODO: Add your own signing config for the release build.\r\n            // Signing with the debug keys for now, so `flutter run --release` works.\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n```\r\nMy build.gradle2:\r\n```\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.5.30&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.2.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\nrootProject.buildDir = &#39;../build&#39;\r\nsubprojects {\r\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\r\n}\r\nsubprojects {\r\n    project.evaluationDependsOn(&#39;:app&#39;)\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n\r\n```\r\n\r\nsettings.gradle:\r\n```\r\ninclude &#39;:app&#39;\r\n\r\ndef localPropertiesFile = new File(rootProject.projectDir, &quot;local.properties&quot;)\r\ndef properties = new Properties()\r\n\r\nassert localPropertiesFile.exists()\r\nlocalPropertiesFile.withReader(&quot;UTF-8&quot;) { reader -&gt; properties.load(reader) }\r\n\r\ndef flutterSdkPath = properties.getProperty(&quot;flutter.sdk&quot;)\r\nassert flutterSdkPath != null, &quot;flutter.sdk not set in local.properties&quot;\r\napply from: &quot;$flutterSdkPath/packages/flutter_tools/gradle/app_plugin_loader.gradle&quot;\r\n\r\n```\r\n\r\ngradle.properties:\r\n```\r\norg.gradle.jvmargs=-Xmx1536M\r\nandroid.useAndroidX=true\r\nandroid.enableJetifier=true\r\nandroid.overridePathCheck=true\r\n\r\n```\r\n\r\n\r\nI run it in Andtoid Studio but in VS it gives me this two error it says that i need to update my jdk in gradle from 1.8 to 11 i search solution for this problem but i don`t found anything , i try to channge it in android studio Project Settings but in gradle settings there is not Gradle project stettings to change jdk, i try to change from build.gradle but it is not work.In stackoverflow i found one solution it say that i need to change my gradle version to older but it not work too.I use emulator and when i run it on chrome it works.Please help.","title":"Execution failed for task :app:compileFlutterBuildDebug","body":"<p>Hi i don`t know what to do with this problem every time when i want to run my project</p>\n<p>this Error:</p>\n<pre><code>Launching lib\\main.dart on sdk gphone x86 arm in debug mode...\nRunning Gradle task 'assembleDebug'...\nCould not write file to C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag.spirv\n\nTarget debug_android_application failed: ShaderCompilerException: Shader compilation of &quot;C:\\Users\\elkha\\flutter\\packages\\flutter\\lib\\src\\material\\shaders\\ink_sparkle.frag&quot; to &quot;C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag&quot; failed with exit code 1.\nimpellerc stdout:\n\nimpellerc stderr:\nCould not write file to C:\\Users\\elkha\\OneDrive\\Документы\\crypto_list2\\build\\app\\intermediates\\flutter\\debug\\flutter_assets\\shaders/ink_sparkle.frag.spirv\nFAILURE: Build failed with an exception.\n\n* Where:\nScript 'C:\\Users\\elkha\\flutter\\packages\\flutter_tools\\gradle\\flutter.gradle' line: 1151\n\n* What went wrong:\nExecution failed for task ':app:compileFlutterBuildDebug'.\n&gt; Process 'command 'C:\\Users\\elkha\\flutter\\bin\\flutter.bat'' finished with non-zero exit value 1\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 49s\nException: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>My build.gradle:</p>\n<pre><code>def localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterRoot = localProperties.getProperty('flutter.sdk')\nif (flutterRoot == null) {\n    throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;\n\nandroid {\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n\n    kotlinOptions {\n        jvmTarget = '11'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId &quot;com.elcode.crypto_list2&quot;\n        // You can update the following values to match your application needs.\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\n        minSdkVersion flutter.minSdkVersion\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            // TODO: Add your own signing config for the release build.\n            // Signing with the debug keys for now, so `flutter run --release` works.\n            signingConfig signingConfigs.debug\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n}\n</code></pre>\n<p>My build.gradle2:</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.5.30'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.2'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n}\nsubprojects {\n    project.evaluationDependsOn(':app')\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n\n</code></pre>\n<p>settings.gradle:</p>\n<pre><code>include ':app'\n\ndef localPropertiesFile = new File(rootProject.projectDir, &quot;local.properties&quot;)\ndef properties = new Properties()\n\nassert localPropertiesFile.exists()\nlocalPropertiesFile.withReader(&quot;UTF-8&quot;) { reader -&gt; properties.load(reader) }\n\ndef flutterSdkPath = properties.getProperty(&quot;flutter.sdk&quot;)\nassert flutterSdkPath != null, &quot;flutter.sdk not set in local.properties&quot;\napply from: &quot;$flutterSdkPath/packages/flutter_tools/gradle/app_plugin_loader.gradle&quot;\n\n</code></pre>\n<p>gradle.properties:</p>\n<pre><code>org.gradle.jvmargs=-Xmx1536M\nandroid.useAndroidX=true\nandroid.enableJetifier=true\nandroid.overridePathCheck=true\n\n</code></pre>\n<p>I run it in Andtoid Studio but in VS it gives me this two error it says that i need to update my jdk in gradle from 1.8 to 11 i search solution for this problem but i don`t found anything , i try to channge it in android studio Project Settings but in gradle settings there is not Gradle project stettings to change jdk, i try to change from build.gradle but it is not work.In stackoverflow i found one solution it say that i need to change my gradle version to older but it not work too.I use emulator and when i run it on chrome it works.Please help.</p>\n"},{"tags":["java","oracle","spring-boot","arabic","datastore"],"comments":[{"owner":{"account_id":5381866,"reputation":12874,"user_id":4286884,"accept_rate":50,"display_name":"SelVazi"},"score":1,"creation_date":1697203656,"post_id":77288096,"comment_id":136254058,"body_markdown":"Can you edit your question and  include the `INSERT` query and the table definition ?","body":"Can you edit your question and  include the <code>INSERT</code> query and the table definition ?"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":3,"creation_date":1697203791,"post_id":77288096,"comment_id":136254098,"body_markdown":"Also specify how do you check the inserted string: the `NLS_CHARACTERSET` is correct so, perhaps, you corrupt the string when you read/display it, not when you insert it.","body":"Also specify how do you check the inserted string: the <code>NLS_CHARACTERSET</code> is correct so, perhaps, you corrupt the string when you read/display it, not when you insert it."},{"owner":{"account_id":2086879,"reputation":283,"user_id":1857654,"accept_rate":73,"display_name":"user1857654"},"score":0,"creation_date":1697204681,"post_id":77288096,"comment_id":136254237,"body_markdown":"String arabicText = &quot;مصرف التجاري السوري&quot;;\nbyte[] bytes = arabicText.getBytes(StandardCharsets.UTF_8);","body":"String arabicText = &quot;مصرف التجاري السوري&quot;; byte[] bytes = arabicText.getBytes(StandardCharsets.UTF_8);"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1697205034,"post_id":77288096,"comment_id":136254312,"body_markdown":"What Java version are you using? What Oracle database version are you using? What platform is Java running on? What platform is Oracle running on? What JDBC driver are you using? Is the Java code running inside the database, as in a Java stored procedure? Or do you have a Java program that interacts with the database via JDBC?","body":"What Java version are you using? What Oracle database version are you using? What platform is Java running on? What platform is Oracle running on? What JDBC driver are you using? Is the Java code running inside the database, as in a Java stored procedure? Or do you have a Java program that interacts with the database via JDBC?"},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1697271649,"post_id":77288096,"comment_id":136261308,"body_markdown":"Stopping using `String.getBytes()` and and `String(byte[], Charset)` unless you are actually dealing with conversion from byte arrays to strings and vice versa. Unlike some other programming languages, you cannot choose the encoding for strings. Java does it for you. It&#39;s an implementation detail. All strings support the full Unicode character set. And there is no ambiguity whether the strings should be interpreted as character set X or Y. If a string conversion is needed, the Oracle driver will do it.","body":"Stopping using <code>String.getBytes()</code> and and <code>String(byte[], Charset)</code> unless you are actually dealing with conversion from byte arrays to strings and vice versa. Unlike some other programming languages, you cannot choose the encoding for strings. Java does it for you. It&#39;s an implementation detail. All strings support the full Unicode character set. And there is no ambiguity whether the strings should be interpreted as character set X or Y. If a string conversion is needed, the Oracle driver will do it."},{"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1697282214,"post_id":77288096,"comment_id":136262042,"body_markdown":"If it works on one system but not on others, they likely use different *default* encodings. Make sure you set an explicit encoding for Tomcat. Otherwise it might use the default one and interpret HTTP requests incorrectly. `String.getBytes()`, `String(byte[])` and similar methods without explicit character set are also problematic. They will take the *default* one, which differs from system to system. Search for them. In many cases, the best fix will be to remove them. Oracle is unlikely to be the issue. Tomcat, log files and console output are more likely the problem.","body":"If it works on one system but not on others, they likely use different <i>default</i> encodings. Make sure you set an explicit encoding for Tomcat. Otherwise it might use the default one and interpret HTTP requests incorrectly. <code>String.getBytes()</code>, <code>String(byte[])</code> and similar methods without explicit character set are also problematic. They will take the <i>default</i> one, which differs from system to system. Search for them. In many cases, the best fix will be to remove them. Oracle is unlikely to be the issue. Tomcat, log files and console output are more likely the problem."}],"answers":[{"comments":[{"owner":{"account_id":26195149,"reputation":3,"user_id":19876358,"display_name":"svb"},"score":0,"creation_date":1697274305,"post_id":77288310,"comment_id":136261471,"body_markdown":"Actually with embedded tomcat data is inserted into DB in proper arabic format.But when deployed at client side and also in local system with external tomcat it&#39;s stored in encoded which is incorrect.","body":"Actually with embedded tomcat data is inserted into DB in proper arabic format.But when deployed at client side and also in local system with external tomcat it&#39;s stored in encoded which is incorrect."}],"tags":[],"owner":{"account_id":14176255,"reputation":40,"user_id":10241414,"display_name":"Nakip Ali"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697224763,"creation_date":1697205103,"answer_id":77288310,"question_id":77288096,"body_markdown":"Firstly, check your **file encoding settings** in your IDE and make sure utf8 for avoiding like this characters *&quot;&#216;&#167;&#217;„&#217;…&#216;&#181;&#216;&#177;&#217;&#191; &#216;&#167;&#217;„&#216;&quot;* , here are hints for Intellij IDEA  :\r\n\r\n[Intellij IDEA - Jetbrains File Encodings][1]\r\n\r\n\r\nfor the eclipse , this link might be help for you : \r\n\r\n[eclipse][2]\r\n\r\n\r\nsecondly , please check NLS_CHARACTERSET parameter of your database or database settings. Here are the solutions that might be related your question \r\n\r\n[check NLS_CHARACTERSET -1][3]\r\n\r\n[check NLS_CHARACTERSET -2][4]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/settings-file-encodings.html\r\n  [2]: https://stackoverflow.com/questions/9180981/how-to-support-utf-8-encoding-in-eclipse\r\n  [3]: https://stackoverflow.com/questions/23610462/cant-insert-arabic-characters-into-oracle-database?rq=2\r\n  [4]: https://stackoverflow.com/questions/34188292/inserting-arabic-characters-in-oracle-11g#:~:text=In%20SQL%20Developer%20go%20to,default%2Fexisting%20language%20and%20territory.","title":"Unable to insert arabic character into oracle Database in proper arabic format","body":"<p>Firstly, check your <strong>file encoding settings</strong> in your IDE and make sure utf8 for avoiding like this characters <em>&quot;Ø§Ù„Ù…ØµØ±Ù¿ Ø§Ù„Ø&quot;</em> , here are hints for Intellij IDEA  :</p>\n<p><a href=\"https://www.jetbrains.com/help/idea/settings-file-encodings.html\" rel=\"nofollow noreferrer\">Intellij IDEA - Jetbrains File Encodings</a></p>\n<p>for the eclipse , this link might be help for you :</p>\n<p><a href=\"https://stackoverflow.com/questions/9180981/how-to-support-utf-8-encoding-in-eclipse\">eclipse</a></p>\n<p>secondly , please check NLS_CHARACTERSET parameter of your database or database settings. Here are the solutions that might be related your question</p>\n<p><a href=\"https://stackoverflow.com/questions/23610462/cant-insert-arabic-characters-into-oracle-database?rq=2\">check NLS_CHARACTERSET -1</a></p>\n<p><a href=\"https://stackoverflow.com/questions/34188292/inserting-arabic-characters-in-oracle-11g#:%7E:text=In%20SQL%20Developer%20go%20to,default%2Fexisting%20language%20and%20territory.\">check NLS_CHARACTERSET -2</a></p>\n"}],"owner":{"account_id":26195149,"reputation":3,"user_id":19876358,"display_name":"svb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697270223,"creation_date":1697203204,"question_id":77288096,"body_markdown":"I am inserting below data into table:\r\n\r\n`String arabicText = &quot;مصرف التجاري السوري&quot;`, it is stored as `&#216;&#167;&#217;„&#217;…&#216;&#181;&#216;&#177;&#217;&#191; &#216;&#167;&#217;„&#216;&#170;&#216;&#172;&#216;&#167;&#216;&#177;&#217;Š &#216;&#167;&#217;„&#216;&#179;` in *Oracle DB* which is wrong.\r\n\r\nIf data is inserted as `&#191;&#191;&#191;&#191;&#191;&#191; &#191;&#191;&#191;&#191;&#191;&#191;&#191; &#191;&#191;&#191;&#191;&#191;&#191;` then it will show  correct in DBever S/w.Data should not be encoded into `&#216;&#167;&#217;„&#217;…&#216;&#181;&#216;&#177;&#217;&#191; &#216;&#167;&#217;„&#216;&#170;&#216;&#172;&#216;&#167;&#216;&#177;&#217;Š &#216;&#167;&#217;„&#216;&#179;` this format.\r\n\r\nTried below code for the same:\r\n\r\nTry 1: \r\n\r\n    String arabicText = new String(arabicText.getBytes(), StandardCharsets.UTF_8);\r\n\r\nTry 2: \r\n\r\n    String arabicText = new String(messag.getBytes(&quot;UTF-8&quot;));\r\n\r\nTry 3: \r\n\r\n     String arabicText = new String(messag.getBytes(&quot;utf-8&quot;), &quot;utf-8&quot;);\r\n\r\nalso checked\r\n\r\n    SELECT value$ FROM sys.props$ WHERE name = &#39;NLS_CHARACTERSET&#39;;\r\n\r\n which is AL32UTF8","title":"Unable to insert arabic character into oracle Database in proper arabic format","body":"<p>I am inserting below data into table:</p>\n<p><code>String arabicText = &quot;مصرف التجاري السوري&quot;</code>, it is stored as <code>Ø§Ù„Ù…ØµØ±Ù¿ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø§Ù„Ø³</code> in <em>Oracle DB</em> which is wrong.</p>\n<p>If data is inserted as <code>¿¿¿¿¿¿ ¿¿¿¿¿¿¿ ¿¿¿¿¿¿</code> then it will show  correct in DBever S/w.Data should not be encoded into <code>Ø§Ù„Ù…ØµØ±Ù¿ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ Ø§Ù„Ø³</code> this format.</p>\n<p>Tried below code for the same:</p>\n<p>Try 1:</p>\n<pre><code>String arabicText = new String(arabicText.getBytes(), StandardCharsets.UTF_8);\n</code></pre>\n<p>Try 2:</p>\n<pre><code>String arabicText = new String(messag.getBytes(&quot;UTF-8&quot;));\n</code></pre>\n<p>Try 3:</p>\n<pre><code> String arabicText = new String(messag.getBytes(&quot;utf-8&quot;), &quot;utf-8&quot;);\n</code></pre>\n<p>also checked</p>\n<pre><code>SELECT value$ FROM sys.props$ WHERE name = 'NLS_CHARACTERSET';\n</code></pre>\n<p>which is AL32UTF8</p>\n"},{"tags":["java","methods","nosuchmethoderror"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1697180759,"post_id":77285684,"comment_id":136249950,"body_markdown":"Did you compile the source code correctly and without compile errors? This sounds like the compiled version of class `Game` is out of date on your computer.","body":"Did you compile the source code correctly and without compile errors? This sounds like the compiled version of class <code>Game</code> is out of date on your computer."},{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":1,"creation_date":1697180903,"post_id":77285684,"comment_id":136249964,"body_markdown":"Also by convention, the name of the classes should start with an upper-case letter, e.g `AdditionGame`","body":"Also by convention, the name of the classes should start with an upper-case letter, e.g <code>AdditionGame</code>"},{"owner":{"account_id":23093411,"reputation":258,"user_id":17203927,"display_name":"redwards"},"score":0,"creation_date":1697182079,"post_id":77285684,"comment_id":136250143,"body_markdown":"Correct.  Can&#39;t reproduce the NoSuchMethodError","body":"Correct.  Can&#39;t reproduce the NoSuchMethodError"}],"answers":[{"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":1,"creation_date":1697181050,"post_id":77285704,"comment_id":136249992,"body_markdown":"But the question is about an entirely different error: `NoSuchMethodError` and not `NoSuchElementException`.","body":"But the question is about an entirely different error: <code>NoSuchMethodError</code> and not <code>NoSuchElementException</code>."},{"owner":{"account_id":20468853,"reputation":523,"user_id":15019772,"display_name":"Jeevan ebi"},"score":0,"creation_date":1697181902,"post_id":77285704,"comment_id":136250118,"body_markdown":"@Jesper, thank for correcting, i have mentioned some other approach for the his requirement!","body":"@Jesper, thank for correcting, i have mentioned some other approach for the his requirement!"}],"tags":[],"owner":{"account_id":20468853,"reputation":523,"user_id":15019772,"display_name":"Jeevan ebi"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697181838,"creation_date":1697180979,"answer_id":77285704,"question_id":77285684,"body_markdown":"Here is the approch you can try : \r\n\r\n&gt; I expected the game to run 10 times round then print the users score\r\n\r\n    import java.util.Random;\r\n    import java.util.Scanner;\r\n    \r\n    public class AdditionGame {\r\n        public static void main(String[] args) {\r\n            Game game = new Game();\r\n            game.playGame();\r\n        }\r\n    }\r\n    \r\n    class Game {\r\n        int score = 0;\r\n    \r\n        public int generateNumber() {\r\n            Random random = new Random();\r\n            return random.nextInt(20) + 1;\r\n        }\r\n    \r\n        public void playGame() {\r\n            Scanner scanner = new Scanner(System.in);\r\n    \r\n            for (int i = 0; i &lt; 10; i++) {\r\n                int number1 = generateNumber();\r\n                int number2 = generateNumber();\r\n                int answer = number1 + number2;\r\n    \r\n                System.out.print(&quot;What is &quot; + number1 + &quot; + &quot; + number2 + &quot; : &quot;);\r\n                int userAnswer = scanner.nextInt();\r\n    \r\n                if (userAnswer == answer) {\r\n                    System.out.println(&quot;Correct Answer!&quot;);\r\n                    score++;\r\n                } else {\r\n                    System.out.println(&quot;Incorrect! The answer was: &quot; + answer);\r\n                }\r\n            }\r\n    \r\n            System.out.println(&quot;Congratulations! Your score was: &quot; + score);\r\n    \r\n            scanner.close();\r\n        }\r\n    }","title":"no such method error when running java file","body":"<p>Here is the approch you can try :</p>\n<blockquote>\n<p>I expected the game to run 10 times round then print the users score</p>\n</blockquote>\n<pre><code>import java.util.Random;\nimport java.util.Scanner;\n\npublic class AdditionGame {\n    public static void main(String[] args) {\n        Game game = new Game();\n        game.playGame();\n    }\n}\n\nclass Game {\n    int score = 0;\n\n    public int generateNumber() {\n        Random random = new Random();\n        return random.nextInt(20) + 1;\n    }\n\n    public void playGame() {\n        Scanner scanner = new Scanner(System.in);\n\n        for (int i = 0; i &lt; 10; i++) {\n            int number1 = generateNumber();\n            int number2 = generateNumber();\n            int answer = number1 + number2;\n\n            System.out.print(&quot;What is &quot; + number1 + &quot; + &quot; + number2 + &quot; : &quot;);\n            int userAnswer = scanner.nextInt();\n\n            if (userAnswer == answer) {\n                System.out.println(&quot;Correct Answer!&quot;);\n                score++;\n            } else {\n                System.out.println(&quot;Incorrect! The answer was: &quot; + answer);\n            }\n        }\n\n        System.out.println(&quot;Congratulations! Your score was: &quot; + score);\n\n        scanner.close();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29661997,"reputation":11,"user_id":22733350,"display_name":"dawsUTV"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697270032,"creation_date":1697180608,"question_id":77285684,"body_markdown":"I have been moving from python to java so still getting used to OOP. I tried to make a game that would generate 2 random numbers and the user would have to add them together. \r\n\r\nHowever when i run the game i get an unexpected error code: \r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: &#39;void\r\n&gt; Game.playGame()&#39;\r\n&gt;         at additionGame.main(additionGame.java:8)\r\n\r\nI have added my code below:\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.Random;\r\n\r\npublic class AdditionGame {\r\n    public static void main(String[] args){\r\n\r\n        Game gameObject = new Game();\r\n        gameObject.playGame();\r\n\r\n    }\r\n}\r\n\r\nclass Game {\r\n    int score = 0;\r\n\r\n    public int generateNumber(){\r\n        int number;\r\n        Random random = new Random();\r\n        number = random.nextInt(20)+1;\r\n        return number;\r\n    }\r\n\r\n    public void playGame(){\r\n        int i = 0;\r\n        while (i&lt;10){\r\n            int number1;\r\n            int number2;\r\n            int answer;\r\n            String userAnswerSTR;\r\n            int userAnswer;\r\n\r\n            i++;\r\n\r\n            number1 = generateNumber();\r\n            number2 = generateNumber();\r\n\r\n            answer = number1 + number2;\r\n\r\n            System.out.println(&quot;What is &quot; + number1 + &quot;+&quot; + number2 + &quot; :&quot;);\r\n            Scanner scannerObject = new Scanner(System.in);\r\n            userAnswerSTR = scannerObject.nextLine();\r\n            scannerObject.close();\r\n\r\n            userAnswer = Integer.parseInt(userAnswerSTR);\r\n\r\n            if (userAnswer == answer){\r\n                System.out.println(&quot;Correct Answer!&quot;);\r\n                score ++;\r\n            }\r\n\r\n            else {\r\n                System.out.println(&quot;Incorrect! The answer was: &quot; + answer);\r\n            }\r\n\r\n        }\r\n    System.out.println(&quot;Congratulations! Your score was: &quot; + score);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nI expected the game to run 10 times round then print the users score","title":"no such method error when running java file","body":"<p>I have been moving from python to java so still getting used to OOP. I tried to make a game that would generate 2 random numbers and the user would have to add them together.</p>\n<p>However when i run the game i get an unexpected error code:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: 'void\nGame.playGame()'\nat additionGame.main(additionGame.java:8)</p>\n</blockquote>\n<p>I have added my code below:</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Random;\n\npublic class AdditionGame {\n    public static void main(String[] args){\n\n        Game gameObject = new Game();\n        gameObject.playGame();\n\n    }\n}\n\nclass Game {\n    int score = 0;\n\n    public int generateNumber(){\n        int number;\n        Random random = new Random();\n        number = random.nextInt(20)+1;\n        return number;\n    }\n\n    public void playGame(){\n        int i = 0;\n        while (i&lt;10){\n            int number1;\n            int number2;\n            int answer;\n            String userAnswerSTR;\n            int userAnswer;\n\n            i++;\n\n            number1 = generateNumber();\n            number2 = generateNumber();\n\n            answer = number1 + number2;\n\n            System.out.println(&quot;What is &quot; + number1 + &quot;+&quot; + number2 + &quot; :&quot;);\n            Scanner scannerObject = new Scanner(System.in);\n            userAnswerSTR = scannerObject.nextLine();\n            scannerObject.close();\n\n            userAnswer = Integer.parseInt(userAnswerSTR);\n\n            if (userAnswer == answer){\n                System.out.println(&quot;Correct Answer!&quot;);\n                score ++;\n            }\n\n            else {\n                System.out.println(&quot;Incorrect! The answer was: &quot; + answer);\n            }\n\n        }\n    System.out.println(&quot;Congratulations! Your score was: &quot; + score);\n    }\n\n}\n</code></pre>\n<p>I expected the game to run 10 times round then print the users score</p>\n"},{"tags":["java","security","ssl","x509certificate"],"comments":[{"owner":{"account_id":1803342,"reputation":305,"user_id":1641086,"accept_rate":73,"display_name":"Chaitanya Gudala"},"score":0,"creation_date":1414423797,"post_id":9889669,"comment_id":41796939,"body_markdown":"I think that command works absolutely fine in java 1.6 or above","body":"I think that command works absolutely fine in java 1.6 or above"}],"answers":[{"comments":[{"owner":{"account_id":788920,"reputation":3452,"user_id":895429,"accept_rate":60,"display_name":"nikel"},"score":0,"creation_date":1332855222,"post_id":9890042,"comment_id":12615972,"body_markdown":"Well,It had a lot of such units,i just modified it to include one.It got successfully installed.:)","body":"Well,It had a lot of such units,i just modified it to include one.It got successfully installed.:)"},{"owner":{"account_id":299410,"reputation":1858,"user_id":605985,"accept_rate":55,"display_name":"Rengasami Ramanujam"},"score":1,"creation_date":1336655615,"post_id":9890042,"comment_id":13627746,"body_markdown":"Did you just add a BEGIN CERTIFICATE and END CERTIFICATE in between the entire data? I am also facing the same problem, can you please help me by saying what you did?","body":"Did you just add a BEGIN CERTIFICATE and END CERTIFICATE in between the entire data? I am also facing the same problem, can you please help me by saying what you did?"},{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":3,"creation_date":1336659593,"post_id":9890042,"comment_id":13629832,"body_markdown":"The lines should already be there. If they are not, your certificate is likely DER encoded (or invalid). To convert it do `openssl x509 -in mycert.der -inform DER -out myCert.pem -outform PEM`. To view and verify it `openssl -in myCert.pem -text`. The file must contain a single certificate.","body":"The lines should already be there. If they are not, your certificate is likely DER encoded (or invalid). To convert it do <code>openssl x509 -in mycert.der -inform DER -out myCert.pem -outform PEM</code>. To view and verify it <code>openssl -in myCert.pem -text</code>. The file must contain a single certificate."},{"owner":{"account_id":1085340,"reputation":9759,"user_id":1081173,"accept_rate":29,"display_name":"Stefan Seidel"},"score":19,"creation_date":1458121528,"post_id":9890042,"comment_id":59713364,"body_markdown":"The problem can also be that `keytool` can be a little oversensitive to spaces and line endings. I tried to import the _Let&#39;s Encrypt_ certificate, and it failed because of that, and I fixed the certificate format with `openssl x509 -in broken.pem -out correct.pem` and it imported `correct.pem` without problems.","body":"The problem can also be that <code>keytool</code> can be a little oversensitive to spaces and line endings. I tried to import the <i>Let&#39;s Encrypt</i> certificate, and it failed because of that, and I fixed the certificate format with <code>openssl x509 -in broken.pem -out correct.pem</code> and it imported <code>correct.pem</code> without problems."},{"owner":{"account_id":146539,"reputation":1246,"user_id":357033,"accept_rate":40,"display_name":"Deian"},"score":2,"creation_date":1559400879,"post_id":9890042,"comment_id":99412666,"body_markdown":"lower case x509 is important!","body":"lower case x509 is important!"},{"owner":{"account_id":181514,"reputation":9905,"user_id":415559,"accept_rate":73,"display_name":"barrypicker"},"score":0,"creation_date":1697142154,"post_id":9890042,"comment_id":136246236,"body_markdown":"@StefanSeidel - the use of `openssl x509 -in &lt;file&gt; -out &lt;file&gt;` is brilliant.  Good idea.","body":"@StefanSeidel - the use of <code>openssl x509 -in &lt;file&gt; -out &lt;file&gt;</code> is brilliant.  Good idea."}],"tags":[],"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"comment_count":6,"down_vote_count":0,"up_vote_count":61,"is_accepted":true,"score":61,"last_activity_date":1697269807,"creation_date":1332853254,"answer_id":9890042,"question_id":9889669,"body_markdown":"Does your cacerts.pem file hold a single certificate? Since it is a PEM, have a look at it (with a text editor), it should start with \r\n\r\n`-----BEGIN CERTIFICATE-----`\r\n\r\nand end with\r\n\r\n`-----END CERTIFICATE-----`\r\n\r\nFinally, to check it is not corrupted, get hold of openssl and print its details using\r\n\r\n`openssl x509 -in cacerts.pem -text`\r\n\r\n#### Edit\r\nAs mentioned by @stefan-seidel below, try having openssl &quot;regenerate&quot; it using \r\n\r\n`openssl x509 -in broken.pem -out correct.pem`\r\n","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>Does your cacerts.pem file hold a single certificate? Since it is a PEM, have a look at it (with a text editor), it should start with</p>\n<p><code>-----BEGIN CERTIFICATE-----</code></p>\n<p>and end with</p>\n<p><code>-----END CERTIFICATE-----</code></p>\n<p>Finally, to check it is not corrupted, get hold of openssl and print its details using</p>\n<p><code>openssl x509 -in cacerts.pem -text</code></p>\n<h4>Edit</h4>\n<p>As mentioned by @stefan-seidel below, try having openssl &quot;regenerate&quot; it using</p>\n<p><code>openssl x509 -in broken.pem -out correct.pem</code></p>\n"},{"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1549109472,"post_id":22028156,"comment_id":95791474,"body_markdown":"What the doc doesn&#39;t make clear is that when you `-importcert` to an existing privatekey entry it expects a &#39;cert reply&#39;, which can be either a single cert or a chain including a PKCS7 using `CertificateFactory.generateCertificates` (with s at end) but when you `-importcert` to a new trustedcert entry it expects only one cert and NOT PKCS7 using `generateCertificate` (no s). If you want to trust multiple certs in a chain (and the point of chaining is that you don&#39;t need to) you must import them individually to different aliases.","body":"What the doc doesn&#39;t make clear is that when you <code>-importcert</code> to an existing privatekey entry it expects a &#39;cert reply&#39;, which can be either a single cert or a chain including a PKCS7 using <code>CertificateFactory.generateCertificates</code> (with s at end) but when you <code>-importcert</code> to a new trustedcert entry it expects only one cert and NOT PKCS7 using <code>generateCertificate</code> (no s). If you want to trust multiple certs in a chain (and the point of chaining is that you don&#39;t need to) you must import them individually to different aliases."},{"owner":{"account_id":7300708,"reputation":161,"user_id":5563585,"display_name":"Noor Khan"},"score":0,"creation_date":1637982620,"post_id":22028156,"comment_id":123972997,"body_markdown":"I was also facing the issue of **keytool error: java.lang.Exception: Input not an X.509 certificate** I applied the above command on my pkcs12 certificate but changed -print_certs with -clcerts. One can see all pkcs12 commands with `openssl pkcs12 -help`.  command is: `openssl pkcs12 -clcerts -in certfile.p12 -out newcertfile.cer`  enter p12 cert password and then pass phrase for PEM.  Note: I copied p12 cert to another place and then generated .cer from that to avoid any risk to original cert.","body":"I was also facing the issue of <b>keytool error: java.lang.Exception: Input not an X.509 certificate</b> I applied the above command on my pkcs12 certificate but changed -print_certs with -clcerts. One can see all pkcs12 commands with <code>openssl pkcs12 -help</code>.  command is: <code>openssl pkcs12 -clcerts -in certfile.p12 -out newcertfile.cer</code>  enter p12 cert password and then pass phrase for PEM.  Note: I copied p12 cert to another place and then generated .cer from that to avoid any risk to original cert."}],"tags":[],"owner":{"account_id":3806992,"reputation":697,"user_id":3159132,"display_name":"superlazy"},"comment_count":2,"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1478775243,"creation_date":1393369466,"answer_id":22028156,"question_id":9889669,"body_markdown":"Many CAs will provide a cert in PKCS7 format.\r\n\r\nAccording to [Oracle documentation][1], the keytool commmand can handle  PKCS#7 but sometimes it fails\r\n\r\n&gt; The keytool command can import X.509 v1, v2, and v3 certificates, and\r\n&gt; PKCS#7 formatted certificate chains consisting of certificates of that\r\n&gt; type. The data to be imported must be provided either in binary\r\n&gt; encoding format or in printable encoding format (also known as Base64\r\n&gt; encoding) as defined by the Internet RFC 1421 standard. In the latter\r\n&gt; case, the encoding must be bounded at the beginning by a string that\r\n&gt; starts with -----BEGIN, and bounded at the end by a string that starts\r\n&gt; with -----END.\r\n\r\nIf the PKCS7 file can&#39;t be imported try to transform it from PKCS7 to X.509:\r\n\r\n    openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html#keytool_option_importcert","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>Many CAs will provide a cert in PKCS7 format.</p>\n\n<p>According to <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/keytool.html#keytool_option_importcert\">Oracle documentation</a>, the keytool commmand can handle  PKCS#7 but sometimes it fails</p>\n\n<blockquote>\n  <p>The keytool command can import X.509 v1, v2, and v3 certificates, and\n  PKCS#7 formatted certificate chains consisting of certificates of that\n  type. The data to be imported must be provided either in binary\n  encoding format or in printable encoding format (also known as Base64\n  encoding) as defined by the Internet RFC 1421 standard. In the latter\n  case, the encoding must be bounded at the beginning by a string that\n  starts with -----BEGIN, and bounded at the end by a string that starts\n  with -----END.</p>\n</blockquote>\n\n<p>If the PKCS7 file can't be imported try to transform it from PKCS7 to X.509:</p>\n\n<pre><code>openssl pkcs7 -print_certs -in certificate.p7b -out certificate.cer\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1346927,"reputation":2441,"user_id":1287477,"accept_rate":52,"display_name":"Continuity8"},"score":0,"creation_date":1505020203,"post_id":33884948,"comment_id":79237097,"body_markdown":"This was the issue for me also, I think because I copied the cert text directly out of the email from the certificate provider it left a space on the end of each line.","body":"This was the issue for me also, I think because I copied the cert text directly out of the email from the certificate provider it left a space on the end of each line."},{"owner":{"account_id":1856928,"reputation":11330,"user_id":1682294,"display_name":"SirDerpington"},"score":1,"creation_date":1588087624,"post_id":33884948,"comment_id":108762409,"body_markdown":"Jesus Christ. This actually saved me. Thank you!","body":"Jesus Christ. This actually saved me. Thank you!"},{"owner":{"account_id":149392,"reputation":23125,"user_id":361842,"accept_rate":87,"display_name":"JohnLBevan"},"score":0,"creation_date":1613727385,"post_id":33884948,"comment_id":117170738,"body_markdown":"To do this the easy way, if your text editor supports find/replace with regex (e.g. as Programmer&#39;s Notepad does), replace `\\s*[\\r\\n]+\\s*` with `\\n`.","body":"To do this the easy way, if your text editor supports find/replace with regex (e.g. as Programmer&#39;s Notepad does), replace <code>\\s*[\\r\\n]+\\s*</code> with <code>\\n</code>."}],"tags":[],"owner":{"account_id":3613650,"reputation":91,"user_id":3014088,"display_name":"XDanny322"},"comment_count":3,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1483715549,"creation_date":1448335727,"answer_id":33884948,"question_id":9889669,"body_markdown":"This seems like an old thread, but I&#39;ll add my experience here.  I tried to install a cert as well and got that error.  I then opened the cer file with a txt editor, and noticed that there is an extra space (character) at the end of each line. Removing those lines allowed me to import the cert.\r\n\r\nHope this is worth something to someone else.","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>This seems like an old thread, but I'll add my experience here.  I tried to install a cert as well and got that error.  I then opened the cer file with a txt editor, and noticed that there is an extra space (character) at the end of each line. Removing those lines allowed me to import the cert.</p>\n\n<p>Hope this is worth something to someone else.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1626160605,"creation_date":1543492676,"answer_id":53538542,"question_id":9889669,"body_markdown":"As the various other answers to this question show, there are many different possible causes for this error message.  The reason why it is happening to you may be totally different from the reasons why it is happening to me. And unfortunately, the error message is completely failing to point at the actual source of the problem, so it is completely unhelpful in troubleshooting. It is in fact entirely misleading.\r\n\r\nSo, instead of giving you yet one more from the myriad of possible causes of this error message, what I will do instead is show you how to troubleshoot this problem so as to find out what is causing it in your particular situation.\r\n\r\nAt work we commonly use the following two commands to enable some software to talk to various servers, for example to enable IntelliJ IDEA to talk to our internal maven repositories:\r\n\r\n    [Elevated]keytool \r\n        -printcert -rfc -sslserver maven.services.{our-company}.com:443 &gt; public.crt\r\n\r\n    [Elevated]keytool\r\n        -import -storepass changeit -noprompt -trustcacerts -alias services.{our-company}.com \r\n        -keystore lib\\security\\cacerts -file public.crt\r\n\r\nNow, what sometimes happens is that the `keytool -printcert` command is unable to do its job, either due to misconfiguration, or simply because of temporary connectivity issues, such as the firewall preventing it, the user forgot to start his VPN, whatever. It is a fact of life that this may happen. This is not actually the problem.\r\n\r\nThe problem is that when the stupid tool encounters such an error, it does not emit the error message to the standard error device, it emits it to the standard output device!\r\n\r\nSo here is what ends up happening:\r\n\r\n  - When you execute the first command, you don&#39;t see any error message, so you have no idea that it failed.  However, instead of a key, the `public.crt` file now contains an error message saying `keytool error: java.lang.Exception: No certificate from the SSL server`.\r\n  - When you execute the second command, it reads `public.crt` and it finds the text of the error message instead of a key in it, so it fails, saying `keytool error: java.lang.Exception: Input not an X.509 certificate`.\r\n\r\nBottom line is: after `keytool -printcert ... &gt; public.crt` always dump the contents of `public.crt` to make sure it is actually a key and not an error message before proceeding to run `keytool -import ... -file public.crt`\r\n","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>As the various other answers to this question show, there are many different possible causes for this error message.  The reason why it is happening to you may be totally different from the reasons why it is happening to me. And unfortunately, the error message is completely failing to point at the actual source of the problem, so it is completely unhelpful in troubleshooting. It is in fact entirely misleading.</p>\n<p>So, instead of giving you yet one more from the myriad of possible causes of this error message, what I will do instead is show you how to troubleshoot this problem so as to find out what is causing it in your particular situation.</p>\n<p>At work we commonly use the following two commands to enable some software to talk to various servers, for example to enable IntelliJ IDEA to talk to our internal maven repositories:</p>\n<pre><code>[Elevated]keytool \n    -printcert -rfc -sslserver maven.services.{our-company}.com:443 &gt; public.crt\n\n[Elevated]keytool\n    -import -storepass changeit -noprompt -trustcacerts -alias services.{our-company}.com \n    -keystore lib\\security\\cacerts -file public.crt\n</code></pre>\n<p>Now, what sometimes happens is that the <code>keytool -printcert</code> command is unable to do its job, either due to misconfiguration, or simply because of temporary connectivity issues, such as the firewall preventing it, the user forgot to start his VPN, whatever. It is a fact of life that this may happen. This is not actually the problem.</p>\n<p>The problem is that when the stupid tool encounters such an error, it does not emit the error message to the standard error device, it emits it to the standard output device!</p>\n<p>So here is what ends up happening:</p>\n<ul>\n<li>When you execute the first command, you don't see any error message, so you have no idea that it failed.  However, instead of a key, the <code>public.crt</code> file now contains an error message saying <code>keytool error: java.lang.Exception: No certificate from the SSL server</code>.</li>\n<li>When you execute the second command, it reads <code>public.crt</code> and it finds the text of the error message instead of a key in it, so it fails, saying <code>keytool error: java.lang.Exception: Input not an X.509 certificate</code>.</li>\n</ul>\n<p>Bottom line is: after <code>keytool -printcert ... &gt; public.crt</code> always dump the contents of <code>public.crt</code> to make sure it is actually a key and not an error message before proceeding to run <code>keytool -import ... -file public.crt</code></p>\n"},{"tags":[],"owner":{"account_id":1030865,"reputation":699,"user_id":6042456,"display_name":"LingYan Meng"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568022239,"creation_date":1568022239,"answer_id":57851494,"question_id":9889669,"body_markdown":"I changed 3 things and then it works:\r\n\r\n 1. There is a column of spaces, I removed them\r\n 2. Changed the line break from windows CRLF to linux LF\r\n 3. Removed the empty line at the end.","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>I changed 3 things and then it works:</p>\n\n<ol>\n<li>There is a column of spaces, I removed them</li>\n<li>Changed the line break from windows CRLF to linux LF</li>\n<li>Removed the empty line at the end.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10140499,"reputation":181,"user_id":7490418,"display_name":"Pawel Zentala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621855040,"creation_date":1621855040,"answer_id":67671149,"question_id":9889669,"body_markdown":"I had to remove spaces before the new line after `-----BEGIN CERTIFICATE-----`. ","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>I had to remove spaces before the new line after <code>-----BEGIN CERTIFICATE-----</code>.</p>\n"}],"owner":{"account_id":788920,"reputation":3452,"user_id":895429,"accept_rate":60,"display_name":"nikel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256775,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"accepted_answer_id":9890042,"answer_count":6,"score":61,"last_activity_date":1697269807,"creation_date":1332851915,"question_id":9889669,"body_markdown":"I am trying to Update the SSL certificate in accordance  with [this post][1] \r\n. \r\n\r\nI am noob in certificates, so i followed [this guide][2]. But, when i enter \r\n\r\n    keytool -keystore mycacerts -storepass changeit -importcert -file &quot;C:\\Users\\Noks\\Desktop\\cacerts.pem&quot; -v\r\n\r\nI get the error:\r\n\r\n    keytool error: java.lang.Exception: Input not an X.509 certificate\r\n    java.lang.Exception: Input not an X.509 certificate\r\n            at sun.security.tools.KeyTool.addTrustedCert(KeyTool.java:1913)\r\n            at sun.security.tools.KeyTool.doCommands(KeyTool.java:818)\r\n            at sun.security.tools.KeyTool.run(KeyTool.java:172)\r\n            at sun.security.tools.KeyTool.main(KeyTool.java:166)\r\n\r\nHow do i fix this?\r\n\r\n\r\n  [1]: https://dev.twitter.com/discussions/533\r\n  [2]: http://www.coderanch.com/t/436858/Security/Certificate-configure-it-cacerts-file","title":"Error Importing SSL certificate : Not an X.509 Certificate","body":"<p>I am trying to Update the SSL certificate in accordance  with <a href=\"https://dev.twitter.com/discussions/533\" rel=\"noreferrer\">this post</a> \n. </p>\n\n<p>I am noob in certificates, so i followed <a href=\"http://www.coderanch.com/t/436858/Security/Certificate-configure-it-cacerts-file\" rel=\"noreferrer\">this guide</a>. But, when i enter </p>\n\n<pre><code>keytool -keystore mycacerts -storepass changeit -importcert -file \"C:\\Users\\Noks\\Desktop\\cacerts.pem\" -v\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>keytool error: java.lang.Exception: Input not an X.509 certificate\njava.lang.Exception: Input not an X.509 certificate\n        at sun.security.tools.KeyTool.addTrustedCert(KeyTool.java:1913)\n        at sun.security.tools.KeyTool.doCommands(KeyTool.java:818)\n        at sun.security.tools.KeyTool.run(KeyTool.java:172)\n        at sun.security.tools.KeyTool.main(KeyTool.java:166)\n</code></pre>\n\n<p>How do i fix this?</p>\n"},{"tags":["java","sql","postgresql","jooq"],"comments":[{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1697114434,"post_id":77280635,"comment_id":136240665,"body_markdown":"This is probably quite vendor specific, so what RDBMS are you using? Also, why do you think that &quot;workaround&quot; isn&#39;t good enough?","body":"This is probably quite vendor specific, so what RDBMS are you using? Also, why do you think that &quot;workaround&quot; isn&#39;t good enough?"},{"owner":{"account_id":8201126,"reputation":2419,"user_id":6172447,"accept_rate":50,"display_name":"Tobias Marschall"},"score":0,"creation_date":1697115019,"post_id":77280635,"comment_id":136240807,"body_markdown":"I use Postgres. A perfect solution from my point of view would be to use `row(SelectField&lt;?&gt;... values)`. This would then have a similar syntax to raw SQL, and thus be more intuitive to recognize. However, I could not find a way to just import `row(SelectField&lt;?&gt;... values)` without importing the type safe row builders.","body":"I use Postgres. A perfect solution from my point of view would be to use <code>row(SelectField&lt;?&gt;... values)</code>. This would then have a similar syntax to raw SQL, and thus be more intuitive to recognize. However, I could not find a way to just import <code>row(SelectField&lt;?&gt;... values)</code> without importing the type safe row builders."},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1697116928,"post_id":77280635,"comment_id":136241261,"body_markdown":"Well, you could always add ~22 dummy parameters to get rid of type safety ;-)","body":"Well, you could always add ~22 dummy parameters to get rid of type safety ;-)"},{"owner":{"account_id":8201126,"reputation":2419,"user_id":6172447,"accept_rate":50,"display_name":"Tobias Marschall"},"score":0,"creation_date":1697137249,"post_id":77280635,"comment_id":136245489,"body_markdown":"I can also just build JSON instead of using row. JSON actually works like a charm for my use case. I was just curious whether I misunderstood the row constructor or not.","body":"I can also just build JSON instead of using row. JSON actually works like a charm for my use case. I was just curious whether I misunderstood the row constructor or not."}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697268430,"creation_date":1697268430,"answer_id":77291970,"question_id":77280635,"body_markdown":"The question seems to be &quot;how can I tell the compiler to prefer the varargs overload `row(SelectField...)` over the typed overloads such as `row(SelectField, SelectField)` in order to get rid of type safety.\r\n\r\nThere isn&#39;t really any better way than using `listOf()` or `*arrayOf()` (with the spread operator) in Kotlin, just like in Java you&#39;d have to use `List.of()` or `new SelectField[] { ... }` to tell the compiler to use the collection overloads, because varargs overloads are always deprioritised by the compilers if there&#39;s a more specific, applicable overload. Usually, this is the desired behaviour because usually, you *want* type safety.","title":"How to use rows of different cardinality with union","body":"<p>The question seems to be &quot;how can I tell the compiler to prefer the varargs overload <code>row(SelectField...)</code> over the typed overloads such as <code>row(SelectField, SelectField)</code> in order to get rid of type safety.</p>\n<p>There isn't really any better way than using <code>listOf()</code> or <code>*arrayOf()</code> (with the spread operator) in Kotlin, just like in Java you'd have to use <code>List.of()</code> or <code>new SelectField[] { ... }</code> to tell the compiler to use the collection overloads, because varargs overloads are always deprioritised by the compilers if there's a more specific, applicable overload. Usually, this is the desired behaviour because usually, you <em>want</em> type safety.</p>\n"}],"owner":{"account_id":8201126,"reputation":2419,"user_id":6172447,"accept_rate":50,"display_name":"Tobias Marschall"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77291970,"answer_count":1,"score":1,"last_activity_date":1697268430,"creation_date":1697114143,"question_id":77280635,"body_markdown":"How can I write the following SQL query in jOOQ?\r\n\r\n    select row (user1.&quot;surname&quot;, user1.&quot;id&quot;) from &quot;user&quot; as user1\r\n    union all\r\n    select row (user2.&quot;id&quot;) from &quot;user&quot; as user2\r\n\r\nDoing it like this does not compile, because the two rows are `Row2` and `Row1`, which are not the same type, obviously.\r\n\r\n    db.select(row(user1.SURNAME, user1.ID)).from(user1)\r\n    .unionAll(select(row(user2.ID)).from(user2))\r\n    .fetch()\r\n\r\nThe only workaround solution I found is using `row(Collection&lt;?&gt; values)`, however it seems like there must be a better way of doing it.\r\n\r\n    db.select(row(listOf(user1.SURNAME, user1.ID))).from(user1)\r\n    .unionAll(select(row(listOf(user2.ID))).from(user2))\r\n    .fetch()\r\n\r\n","title":"How to use rows of different cardinality with union","body":"<p>How can I write the following SQL query in jOOQ?</p>\n<pre><code>select row (user1.&quot;surname&quot;, user1.&quot;id&quot;) from &quot;user&quot; as user1\nunion all\nselect row (user2.&quot;id&quot;) from &quot;user&quot; as user2\n</code></pre>\n<p>Doing it like this does not compile, because the two rows are <code>Row2</code> and <code>Row1</code>, which are not the same type, obviously.</p>\n<pre><code>db.select(row(user1.SURNAME, user1.ID)).from(user1)\n.unionAll(select(row(user2.ID)).from(user2))\n.fetch()\n</code></pre>\n<p>The only workaround solution I found is using <code>row(Collection&lt;?&gt; values)</code>, however it seems like there must be a better way of doing it.</p>\n<pre><code>db.select(row(listOf(user1.SURNAME, user1.ID))).from(user1)\n.unionAll(select(row(listOf(user2.ID))).from(user2))\n.fetch()\n</code></pre>\n"},{"tags":["java","hibernate","jpa","jakarta-validation"],"answers":[{"comments":[{"owner":{"account_id":28401539,"reputation":15,"user_id":21726290,"display_name":"Giao Le Xuan"},"score":0,"creation_date":1697158638,"post_id":77281629,"comment_id":136247953,"body_markdown":"Even though you didn&#39;t point out the reason why the annotations don&#39;t work, I really appreciate your effort and surely I&#39;ll seriously considerate your preferences. The reason why I don&#39;t use a separate value for apartment name because I don&#39;t know much about database design and I thought the name can be use as an id, and for the name I could use @Transient or something similar, since I thought the less columns the better.","body":"Even though you didn&#39;t point out the reason why the annotations don&#39;t work, I really appreciate your effort and surely I&#39;ll seriously considerate your preferences. The reason why I don&#39;t use a separate value for apartment name because I don&#39;t know much about database design and I thought the name can be use as an id, and for the name I could use @Transient or something similar, since I thought the less columns the better."},{"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"score":0,"creation_date":1697216369,"post_id":77281629,"comment_id":136256724,"body_markdown":"Fair enough. I updated my answer. Let&#39;s try to make your validation working","body":"Fair enough. I updated my answer. Let&#39;s try to make your validation working"},{"owner":{"account_id":28401539,"reputation":15,"user_id":21726290,"display_name":"Giao Le Xuan"},"score":1,"creation_date":1697371740,"post_id":77281629,"comment_id":136269091,"body_markdown":"It worked. Thank you so much. It seems I&#39;ll have a lot of docs to read then. Honestly for a newcomer how can I know this without reading carefully the documentation. I admire your dedication.","body":"It worked. Thank you so much. It seems I&#39;ll have a lot of docs to read then. Honestly for a newcomer how can I know this without reading carefully the documentation. I admire your dedication."},{"owner":{"account_id":28401539,"reputation":15,"user_id":21726290,"display_name":"Giao Le Xuan"},"score":0,"creation_date":1697372835,"post_id":77281629,"comment_id":136269187,"body_markdown":"So in the end I guess that it&#39;s best to read the documentation in order to learn a new framework. I went through some Hibernate tutorials but didn&#39;t find anything about this.","body":"So in the end I guess that it&#39;s best to read the documentation in order to learn a new framework. I went through some Hibernate tutorials but didn&#39;t find anything about this."},{"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"score":0,"creation_date":1697386640,"post_id":77281629,"comment_id":136270695,"body_markdown":"Yes, happy to help! :)","body":"Yes, happy to help! :)"}],"tags":[],"owner":{"account_id":8049065,"reputation":804,"user_id":6068297,"display_name":"Level_Up"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697268041,"creation_date":1697121940,"answer_id":77281629,"question_id":77281250,"body_markdown":"I don&#39;t use Hibernate validations. I prefer much more to rely on the database. Please check how to create constraints on columns for your specific database. I think in your case is Mysql.\r\n\r\nFor your code:\r\n\r\nOK first think why you want to set id on Apartment from textfield? I think it is better if you generated it. You can add in Apartment additional field number or something similar. It is just good practice your users not to edit  ids from your records. \r\n\r\nYour Database is your source of data so it is the most important place to put constraints. You also can add constraint that the apartment number (the new column) should not be null in database. Then you will not save rows without ids and numbers.\r\n\r\nIn your code I would first check if the text fields actually have values and then the rest:\r\n\r\n    public class ResidentFormController {\r\n\r\n    ...............\r\n     \r\n       public void submitButtonOnAction() {\r\n\r\n          if (apartmentTextField.getText() == null || apartmentTextField.getText().trim().isEmpty()) {\r\n              Integer apartmentNumber = apartmentTextField.getText()\r\n              // 1. get the apartment from the db based on number\r\n              Query&lt;User&gt; query = session.createQuery(&quot;from Apartment a where a.number=:number&quot;, Apartment.class);\r\n              query.setParameter(&quot;number&quot;, apartmentNumber);\r\n              Apartment apartment = query.uniqueResult()\r\n\r\n             Apartment savedApartment;\r\n             // 2.  If null save the apartment in DB before using it\r\n              if(apartment == null)\r\n              {\r\n                 savedApartment = apartmentService.persist(new Apartment(apartmentNumber));\r\n              }\r\n              else\r\n              {\r\n                 savedApartment = apartment;\r\n              }\r\n              // 3. continue with your code\r\n              residentService.persist(new Resident(\r\n                   firstNameTextField.getText(),\r\n                   lastNameTextField.getText(),\r\n                   savedApartment\r\n              ));\r\n              SceneManager.switchScene(Scene.RESIDENT_LIST.getFileName());\r\n              \r\n          }\r\n          else { \r\n                 // return some error message field is empty\r\n          }\r\n    \r\n       }\r\n\r\n    }\r\n\r\n\r\n----------------------------------\r\nUpdate\r\n\r\nOk, I check this specification: https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createmodel\r\n\r\nAccording to it you need this dependency in your pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.expressly&lt;/groupId&gt;\r\n        &lt;artifactId&gt;expressly&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd also for the CDI:\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-validator-cdi&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nCan you please add it and check if the validation is working? \r\n","title":"Validation doesn&#39;t work on Hibernate Entity&#39;s fields","body":"<p>I don't use Hibernate validations. I prefer much more to rely on the database. Please check how to create constraints on columns for your specific database. I think in your case is Mysql.</p>\n<p>For your code:</p>\n<p>OK first think why you want to set id on Apartment from textfield? I think it is better if you generated it. You can add in Apartment additional field number or something similar. It is just good practice your users not to edit  ids from your records.</p>\n<p>Your Database is your source of data so it is the most important place to put constraints. You also can add constraint that the apartment number (the new column) should not be null in database. Then you will not save rows without ids and numbers.</p>\n<p>In your code I would first check if the text fields actually have values and then the rest:</p>\n<pre><code>public class ResidentFormController {\n\n...............\n \n   public void submitButtonOnAction() {\n\n      if (apartmentTextField.getText() == null || apartmentTextField.getText().trim().isEmpty()) {\n          Integer apartmentNumber = apartmentTextField.getText()\n          // 1. get the apartment from the db based on number\n          Query&lt;User&gt; query = session.createQuery(&quot;from Apartment a where a.number=:number&quot;, Apartment.class);\n          query.setParameter(&quot;number&quot;, apartmentNumber);\n          Apartment apartment = query.uniqueResult()\n\n         Apartment savedApartment;\n         // 2.  If null save the apartment in DB before using it\n          if(apartment == null)\n          {\n             savedApartment = apartmentService.persist(new Apartment(apartmentNumber));\n          }\n          else\n          {\n             savedApartment = apartment;\n          }\n          // 3. continue with your code\n          residentService.persist(new Resident(\n               firstNameTextField.getText(),\n               lastNameTextField.getText(),\n               savedApartment\n          ));\n          SceneManager.switchScene(Scene.RESIDENT_LIST.getFileName());\n          \n      }\n      else { \n             // return some error message field is empty\n      }\n\n   }\n\n}\n</code></pre>\n<hr />\n<p>Update</p>\n<p>Ok, I check this specification: <a href=\"https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createmodel\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#validator-gettingstarted-createmodel</a></p>\n<p>According to it you need this dependency in your pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.expressly&lt;/groupId&gt;\n    &lt;artifactId&gt;expressly&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And also for the CDI:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator-cdi&lt;/artifactId&gt;\n    &lt;version&gt;8.0.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Can you please add it and check if the validation is working?</p>\n"}],"owner":{"account_id":28401539,"reputation":15,"user_id":21726290,"display_name":"Giao Le Xuan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77281629,"answer_count":1,"score":1,"last_activity_date":1697268041,"creation_date":1697119045,"question_id":77281250,"body_markdown":"I&#39;m working on a project using JavaFX, Hibernate.\r\n\r\nI added constraints of not being empty to a String primary key but it doesn&#39;t perform any validation as I expected. It still accept an empty string as a valid input.\r\n\r\nI tried @NotEmpty, @NotBlank, @Size, @Pattern but it doesn&#39;t work. When I pass a null object to @NotNull, it still does the job. I&#39;m new to Hibernate and anything related to it so I guess I&#39;m missing basic knowledge.\r\n\r\nI also tried to search for making validation on Hibernate but I found solutions about Spring MVC, and some ways of making validation which I tried above. I find that Hibernate Validator contains many deprecated annotations and I&#39;m using Jakarta Validation, I don&#39;t know if it related to this.\r\n\r\nUpdate: I tried to set hibernate.hbmddl.auto to create-drop to recreate tables while I&#39;m modifying constraints but it doesn&#39;t work.\r\n\r\nHere is my code. I want the Apartment.id to be non-empty since every resident should live in an apartment.\r\n\r\nApartment.java\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@Entity\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Apartment {\r\n    @Id\r\n    @NotBlank\r\n    private String id;\r\n}\r\n```\r\n\r\nResident.java\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport jakarta.persistence.*;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Resident {\r\n    @Id\r\n    @GeneratedValue\r\n    private Integer id;\r\n\r\n    private String firstName;\r\n\r\n    private String lastName;\r\n\r\n    public Resident(String firstName, String lastName, Apartment apartment) {\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.apartment = apartment;\r\n    }\r\n\r\n    @ManyToOne\r\n    @JoinColumn(nullable = false)\r\n    private Apartment apartment;\r\n\r\n}\r\n```\r\n\r\nCode that using two entities\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.TextField;\r\n\r\npublic class ResidentFormController {\r\n\r\n    public TextField firstNameTextField;\r\n    public TextField lastNameTextField;\r\n    public TextField apartmentTextField;\r\n    public Button submitButton;\r\n\r\n    private ResidentService residentService;\r\n    private ApartmentService apartmentService;\r\n\r\n    @FXML\r\n    public void initialize() {\r\n        residentService = new ResidentService(new ResidentRepository());\r\n        apartmentService = new ApartmentService(new ApartmentRepository());\r\n    }\r\n\r\n    public void submitButtonOnAction() {\r\n        Apartment apartment = new Apartment(apartmentTextField.getText());\r\n        apartmentService.merge(apartment);\r\n        residentService.persist(new Resident(\r\n                firstNameTextField.getText(),\r\n                lastNameTextField.getText(),\r\n                apartment\r\n        ));\r\n        SceneManager.switchScene(Scene.RESIDENT_LIST.getFileName());\r\n    }\r\n}\r\n```\r\n\r\nI found this question https://stackoverflow.com/questions/4326030/validation-doesnt-work-on-entitymanager-merge\r\n\r\nand tried it as the following code, but still not working\r\n\r\n```\r\npublic void merge(T entity) {\r\n    HibernateUtility.getSessionFactory().inTransaction(session -&gt; {\r\n        session.merge(entity);\r\n        session.flush();\r\n    });\r\n}\r\n```\r\n\r\nHere is the GitHub repository: https://github.com/GiaoLe/demo\r\n\r\nIf there is any part of the code is impractical, it&#39;s nice to have some instructions or reference since I find so many obsolete tutorials on Hibernate.\r\n\r\nThank you so much for your time.","title":"Validation doesn&#39;t work on Hibernate Entity&#39;s fields","body":"<p>I'm working on a project using JavaFX, Hibernate.</p>\n<p>I added constraints of not being empty to a String primary key but it doesn't perform any validation as I expected. It still accept an empty string as a valid input.</p>\n<p>I tried @NotEmpty, @NotBlank, @Size, @Pattern but it doesn't work. When I pass a null object to @NotNull, it still does the job. I'm new to Hibernate and anything related to it so I guess I'm missing basic knowledge.</p>\n<p>I also tried to search for making validation on Hibernate but I found solutions about Spring MVC, and some ways of making validation which I tried above. I find that Hibernate Validator contains many deprecated annotations and I'm using Jakarta Validation, I don't know if it related to this.</p>\n<p>Update: I tried to set hibernate.hbmddl.auto to create-drop to recreate tables while I'm modifying constraints but it doesn't work.</p>\n<p>Here is my code. I want the Apartment.id to be non-empty since every resident should live in an apartment.</p>\n<p>Apartment.java</p>\n<pre><code>package com.example.demo;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.Id;\nimport jakarta.validation.constraints.NotBlank;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Apartment {\n    @Id\n    @NotBlank\n    private String id;\n}\n</code></pre>\n<p>Resident.java</p>\n<pre><code>package com.example.demo;\n\nimport jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Resident {\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    private String firstName;\n\n    private String lastName;\n\n    public Resident(String firstName, String lastName, Apartment apartment) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.apartment = apartment;\n    }\n\n    @ManyToOne\n    @JoinColumn(nullable = false)\n    private Apartment apartment;\n\n}\n</code></pre>\n<p>Code that using two entities</p>\n<pre><code>package com.example.demo;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TextField;\n\npublic class ResidentFormController {\n\n    public TextField firstNameTextField;\n    public TextField lastNameTextField;\n    public TextField apartmentTextField;\n    public Button submitButton;\n\n    private ResidentService residentService;\n    private ApartmentService apartmentService;\n\n    @FXML\n    public void initialize() {\n        residentService = new ResidentService(new ResidentRepository());\n        apartmentService = new ApartmentService(new ApartmentRepository());\n    }\n\n    public void submitButtonOnAction() {\n        Apartment apartment = new Apartment(apartmentTextField.getText());\n        apartmentService.merge(apartment);\n        residentService.persist(new Resident(\n                firstNameTextField.getText(),\n                lastNameTextField.getText(),\n                apartment\n        ));\n        SceneManager.switchScene(Scene.RESIDENT_LIST.getFileName());\n    }\n}\n</code></pre>\n<p>I found this question <a href=\"https://stackoverflow.com/questions/4326030/validation-doesnt-work-on-entitymanager-merge\">Validation doesn&#39;t work on EntityManager.merge()</a></p>\n<p>and tried it as the following code, but still not working</p>\n<pre><code>public void merge(T entity) {\n    HibernateUtility.getSessionFactory().inTransaction(session -&gt; {\n        session.merge(entity);\n        session.flush();\n    });\n}\n</code></pre>\n<p>Here is the GitHub repository: <a href=\"https://github.com/GiaoLe/demo\" rel=\"nofollow noreferrer\">https://github.com/GiaoLe/demo</a></p>\n<p>If there is any part of the code is impractical, it's nice to have some instructions or reference since I find so many obsolete tutorials on Hibernate.</p>\n<p>Thank you so much for your time.</p>\n"},{"tags":["java","multithreading"],"answers":[{"comments":[{"owner":{"account_id":8469968,"reputation":672,"user_id":9311364,"accept_rate":71,"display_name":"Ladu anand"},"score":0,"creation_date":1697266135,"post_id":77291842,"comment_id":136260925,"body_markdown":"Using isOddTurn as global volatile Boolean doesn&#39;t work , see the gist . Why is that . \nhttps://gist.github.com/Abhi-Codes/b34cd9b9e7c7b568c07b6bfff79c7b2b","body":"Using isOddTurn as global volatile Boolean doesn&#39;t work , see the gist . Why is that .  <a href=\"https://gist.github.com/Abhi-Codes/b34cd9b9e7c7b568c07b6bfff79c7b2b\" rel=\"nofollow noreferrer\">gist.github.com/Abhi-Codes/b34cd9b9e7c7b568c07b6bfff79c7b2b</a>"},{"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"score":1,"creation_date":1697267799,"post_id":77291842,"comment_id":136261029,"body_markdown":"Reworked the answer.","body":"Reworked the answer."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":3,"creation_date":1697271913,"post_id":77291842,"comment_id":136261327,"body_markdown":"The fact that `Boolean` objects are immutable is not a problem. The problem depends on whether or not the threads share the thing that they modify. Example 1 works because they modify the same, shared `AtomicBoolean` instance. Example 3 works, _despite the immutability of `Boolean`,_ because they modify the same, shared, class-level `Boolean` variable. Example 2 doesn&#39;t work because each thread modifies its own private variable.","body":"The fact that <code>Boolean</code> objects are immutable is not a problem. The problem depends on whether or not the threads share the thing that they modify. Example 1 works because they modify the same, shared <code>AtomicBoolean</code> instance. Example 3 works, <i>despite the immutability of <code>Boolean</code>,</i> because they modify the same, shared, class-level <code>Boolean</code> variable. Example 2 doesn&#39;t work because each thread modifies its own private variable."}],"tags":[],"owner":{"account_id":1281728,"reputation":73134,"user_id":1235698,"accept_rate":100,"display_name":"Marcin Orlowski"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697267609,"creation_date":1697264544,"answer_id":77291842,"question_id":77291819,"body_markdown":"The problem is the immutability of the `Boolean` class and how references are handled between the `OddPrinter` and `EvenPrinter` in your second snippet. When you pass `isOddTurn` to c&#39;tor of `OddPrinter` and `EvenPrinter`, each one receives its own copy of the reference to the `Boolean` object. When you later update `isOddTurn`, you are actually creating a new `Boolean` object and updating the reference in the current class, but the other class still holds the old reference, so the change is not visible. This does not happen when you use `AtomicBoolean`.\r\n\r\n&gt; If I make the isOddTurn variable as global Boolean instead of using it as instance variable in both threads, then it works fine.\r\n\r\nIn case of global (class-level) variable, a single reference to the `Boolean` object is shared among all instances of the `OddPrinter` and `EvenPrinter` classes. When one thread updates the value of `isOddTurn`, the change is visible to the other thread because they are both referencing the same object.","title":"JAVA Multithreading Boolean vs AtomicBoolean","body":"<p>The problem is the immutability of the <code>Boolean</code> class and how references are handled between the <code>OddPrinter</code> and <code>EvenPrinter</code> in your second snippet. When you pass <code>isOddTurn</code> to c'tor of <code>OddPrinter</code> and <code>EvenPrinter</code>, each one receives its own copy of the reference to the <code>Boolean</code> object. When you later update <code>isOddTurn</code>, you are actually creating a new <code>Boolean</code> object and updating the reference in the current class, but the other class still holds the old reference, so the change is not visible. This does not happen when you use <code>AtomicBoolean</code>.</p>\n<blockquote>\n<p>If I make the isOddTurn variable as global Boolean instead of using it as instance variable in both threads, then it works fine.</p>\n</blockquote>\n<p>In case of global (class-level) variable, a single reference to the <code>Boolean</code> object is shared among all instances of the <code>OddPrinter</code> and <code>EvenPrinter</code> classes. When one thread updates the value of <code>isOddTurn</code>, the change is visible to the other thread because they are both referencing the same object.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1697267969,"creation_date":1697267571,"answer_id":77291935,"question_id":77291819,"body_markdown":"#### Local Boolean\r\n\r\nThe problem with the second code is that each Thread has its own `Boolean` variable. This may be initialized with the same instance but if one thread changes its own variable, the other thread will not *see* that changed on its variable.\r\n\r\nBasically:\r\n````\r\nclass OddPrinter implements Runnable {\r\n    private Boolean isOddTurn; // (1)\r\n    ...\r\n    public void run() {\r\n        ...\r\n        isOddTurn = FALSE:  // changing only (1) (setting different instance)\r\n        ...\r\n}\r\n\r\nclass EvenPrinter implements Runnable {\r\n    private Boolean isOddTurn; // (2)\r\n    ...\r\n    public void run() {\r\n        ...\r\n        while (isOddTurn) {  // checking only (2), but (1) is changed by OddPrinter\r\n        ...\r\n}\r\n````\r\n\r\n-----\r\n\r\n##### AtomicBoolean\r\n\r\nThe first code is working since both threads are getting the same instance of `AtomicBoolean` and *only* changing its state `itsOddTurn.set(...)`, not assigning a new instance to the variable. So each thread is able to *see* the changes made by the other thread.\r\n\r\n-----\r\n\r\n##### Global Boolean\r\n\r\nThe third code, despite using `Boolean` as the first, is working since there is only one (global) variable being used to save the flag. So each thread is able to *see* the new instance assigned by the other thread.","title":"JAVA Multithreading Boolean vs AtomicBoolean","body":"<h4>Local Boolean</h4>\n<p>The problem with the second code is that each Thread has its own <code>Boolean</code> variable. This may be initialized with the same instance but if one thread changes its own variable, the other thread will not <em>see</em> that changed on its variable.</p>\n<p>Basically:</p>\n<pre><code>class OddPrinter implements Runnable {\n    private Boolean isOddTurn; // (1)\n    ...\n    public void run() {\n        ...\n        isOddTurn = FALSE:  // changing only (1) (setting different instance)\n        ...\n}\n\nclass EvenPrinter implements Runnable {\n    private Boolean isOddTurn; // (2)\n    ...\n    public void run() {\n        ...\n        while (isOddTurn) {  // checking only (2), but (1) is changed by OddPrinter\n        ...\n}\n</code></pre>\n<hr />\n<h5>AtomicBoolean</h5>\n<p>The first code is working since both threads are getting the same instance of <code>AtomicBoolean</code> and <em>only</em> changing its state <code>itsOddTurn.set(...)</code>, not assigning a new instance to the variable. So each thread is able to <em>see</em> the changes made by the other thread.</p>\n<hr />\n<h5>Global Boolean</h5>\n<p>The third code, despite using <code>Boolean</code> as the first, is working since there is only one (global) variable being used to save the flag. So each thread is able to <em>see</em> the new instance assigned by the other thread.</p>\n"}],"owner":{"account_id":8469968,"reputation":672,"user_id":9311364,"accept_rate":71,"display_name":"Ladu anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77291935,"answer_count":2,"score":0,"last_activity_date":1697267969,"creation_date":1697264082,"question_id":77291819,"body_markdown":"I am trying to print from 1 to 10 using two different threads. I have created two classes implementing Runnable : OddPrinter and EvenPrinter which uses a shared Object for synchronisation so that only one thread prints at a time. I am using a isOddTurn variable to determine which thread&#39;s turn is to print the number to maintain the order. I am confused why using AtomicBoolean as type of isOdd variable works but not Boolean . The confusion is because the business logic is wrapped inside synchronized so race conditions shouldn&#39;t exist. \r\n\r\n```\r\npublic class Test {\r\n\r\n    private static Object object = new Object();\r\n    private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\r\n\r\n    //private volatile Boolean isOddTurn = Boolean.TRUE;\r\n\r\n    public static void main(String[] args) {\r\n        Test test = new Test();\r\n        test.runDemo();\r\n    }\r\n\r\n    public void runDemo() {\r\n        OddPrinter oddPrinter = new OddPrinter(isOddTurn, object);\r\n        EvenPrinter evenPrinter = new EvenPrinter(isOddTurn, object);\r\n        new Thread(oddPrinter).start();\r\n        new Thread(evenPrinter).start();\r\n    }\r\n\r\n    class OddPrinter implements Runnable {\r\n\r\n        private int counter = 1;\r\n\r\n        private AtomicBoolean isOddTurn;\r\n\r\n        private Object object;\r\n\r\n        OddPrinter(AtomicBoolean isOddTurn, Object object) {\r\n            this.isOddTurn = isOddTurn;\r\n            this.object = object;\r\n            System.out.println(&quot;Odd&quot;);\r\n            System.out.println(this.isOddTurn.hashCode());\r\n            System.out.println(isOddTurn.hashCode());\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (!isOddTurn.get()) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn.set(false);\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class EvenPrinter implements Runnable {\r\n\r\n        private int counter = 2;\r\n\r\n        private Object object;\r\n        private AtomicBoolean isOddTurn;\r\n\r\n        EvenPrinter(AtomicBoolean isOddTurn, Object object) {\r\n            this.isOddTurn = isOddTurn;\r\n            this.object = object;\r\n            System.out.println(&quot;Evem&quot;);\r\n            System.out.println(this.isOddTurn.hashCode());\r\n            System.out.println(isOddTurn.hashCode());\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (isOddTurn.get()) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn.set(true);\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nUsing isOddTurn of type volatile Boolean, it doesn&#39;t print 1 to 10 and gets stuck after printing 1\r\n \r\n```\r\npublic class Test {\r\n\r\n    private static Object object = new Object();\r\n    //private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\r\n\r\n    private volatile Boolean isOddTurn = Boolean.TRUE;\r\n\r\n    public static void main(String[] args) {\r\n        Test test = new Test();\r\n        test.runDemo();\r\n    }\r\n\r\n    public void runDemo() {\r\n        OddPrinter oddPrinter = new OddPrinter(isOddTurn, object);\r\n        EvenPrinter evenPrinter = new EvenPrinter(isOddTurn, object);\r\n        new Thread(oddPrinter).start();\r\n        new Thread(evenPrinter).start();\r\n    }\r\n\r\n    class OddPrinter implements Runnable {\r\n\r\n        private int counter = 1;\r\n\r\n        private Boolean isOddTurn;\r\n\r\n        private Object object;\r\n\r\n        OddPrinter(Boolean isOddTurn, Object object) {\r\n            this.isOddTurn = isOddTurn;\r\n            this.object = object;\r\n            System.out.println(&quot;Odd&quot;);\r\n            System.out.println(this.isOddTurn.hashCode());\r\n            System.out.println(isOddTurn.hashCode());\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (!isOddTurn) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn=Boolean.FALSE;\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class EvenPrinter implements Runnable {\r\n\r\n        private int counter = 2;\r\n\r\n        private Object object;\r\n        private Boolean isOddTurn;\r\n\r\n        EvenPrinter(Boolean isOddTurn, Object object) {\r\n            this.isOddTurn = isOddTurn;\r\n            this.object = object;\r\n            System.out.println(&quot;Evem&quot;);\r\n            System.out.println(this.isOddTurn.hashCode());\r\n            System.out.println(isOddTurn.hashCode());\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (isOddTurn) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn=Boolean.TRUE;\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf I make the isOddTurn variable as global Boolean instead of using it as instance variable in both threads, then it works fine. \r\n\r\n```\r\npublic class Test {\r\n\r\n    private static Object object = new Object();\r\n    //private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\r\n\r\n    private Boolean isOddTurn = Boolean.TRUE;\r\n\r\n    public static void main(String[] args) {\r\n        Test test = new Test();\r\n        test.runDemo();\r\n    }\r\n\r\n    public void runDemo() {\r\n        OddPrinter oddPrinter = new OddPrinter(object);\r\n        EvenPrinter evenPrinter = new EvenPrinter(object);\r\n        new Thread(oddPrinter).start();\r\n        new Thread(evenPrinter).start();\r\n    }\r\n\r\n    class OddPrinter implements Runnable {\r\n\r\n        private int counter = 1;\r\n\r\n\r\n        private Object object;\r\n\r\n        OddPrinter(Object object) {\r\n\r\n            this.object = object;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (!isOddTurn) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn=Boolean.FALSE;\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    class EvenPrinter implements Runnable {\r\n\r\n        private int counter = 2;\r\n\r\n        private Object object;\r\n\r\n\r\n        EvenPrinter(Object object) {\r\n\r\n            this.object = object;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            synchronized (object) {\r\n                while (counter &lt;= 10) {\r\n                    while (isOddTurn) {\r\n                        try {\r\n                            object.wait();\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    }\r\n                    System.out.println(counter);\r\n                    counter += 2;\r\n                    isOddTurn=Boolean.TRUE;\r\n                    object.notify();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nWhat I am failing to understand in all three cases.  ","title":"JAVA Multithreading Boolean vs AtomicBoolean","body":"<p>I am trying to print from 1 to 10 using two different threads. I have created two classes implementing Runnable : OddPrinter and EvenPrinter which uses a shared Object for synchronisation so that only one thread prints at a time. I am using a isOddTurn variable to determine which thread's turn is to print the number to maintain the order. I am confused why using AtomicBoolean as type of isOdd variable works but not Boolean . The confusion is because the business logic is wrapped inside synchronized so race conditions shouldn't exist.</p>\n<pre><code>public class Test {\n\n    private static Object object = new Object();\n    private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\n\n    //private volatile Boolean isOddTurn = Boolean.TRUE;\n\n    public static void main(String[] args) {\n        Test test = new Test();\n        test.runDemo();\n    }\n\n    public void runDemo() {\n        OddPrinter oddPrinter = new OddPrinter(isOddTurn, object);\n        EvenPrinter evenPrinter = new EvenPrinter(isOddTurn, object);\n        new Thread(oddPrinter).start();\n        new Thread(evenPrinter).start();\n    }\n\n    class OddPrinter implements Runnable {\n\n        private int counter = 1;\n\n        private AtomicBoolean isOddTurn;\n\n        private Object object;\n\n        OddPrinter(AtomicBoolean isOddTurn, Object object) {\n            this.isOddTurn = isOddTurn;\n            this.object = object;\n            System.out.println(&quot;Odd&quot;);\n            System.out.println(this.isOddTurn.hashCode());\n            System.out.println(isOddTurn.hashCode());\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (!isOddTurn.get()) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn.set(false);\n                    object.notify();\n                }\n            }\n        }\n    }\n\n    class EvenPrinter implements Runnable {\n\n        private int counter = 2;\n\n        private Object object;\n        private AtomicBoolean isOddTurn;\n\n        EvenPrinter(AtomicBoolean isOddTurn, Object object) {\n            this.isOddTurn = isOddTurn;\n            this.object = object;\n            System.out.println(&quot;Evem&quot;);\n            System.out.println(this.isOddTurn.hashCode());\n            System.out.println(isOddTurn.hashCode());\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (isOddTurn.get()) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn.set(true);\n                    object.notify();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Using isOddTurn of type volatile Boolean, it doesn't print 1 to 10 and gets stuck after printing 1</p>\n<pre><code>public class Test {\n\n    private static Object object = new Object();\n    //private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\n\n    private volatile Boolean isOddTurn = Boolean.TRUE;\n\n    public static void main(String[] args) {\n        Test test = new Test();\n        test.runDemo();\n    }\n\n    public void runDemo() {\n        OddPrinter oddPrinter = new OddPrinter(isOddTurn, object);\n        EvenPrinter evenPrinter = new EvenPrinter(isOddTurn, object);\n        new Thread(oddPrinter).start();\n        new Thread(evenPrinter).start();\n    }\n\n    class OddPrinter implements Runnable {\n\n        private int counter = 1;\n\n        private Boolean isOddTurn;\n\n        private Object object;\n\n        OddPrinter(Boolean isOddTurn, Object object) {\n            this.isOddTurn = isOddTurn;\n            this.object = object;\n            System.out.println(&quot;Odd&quot;);\n            System.out.println(this.isOddTurn.hashCode());\n            System.out.println(isOddTurn.hashCode());\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (!isOddTurn) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn=Boolean.FALSE;\n                    object.notify();\n                }\n            }\n        }\n    }\n\n    class EvenPrinter implements Runnable {\n\n        private int counter = 2;\n\n        private Object object;\n        private Boolean isOddTurn;\n\n        EvenPrinter(Boolean isOddTurn, Object object) {\n            this.isOddTurn = isOddTurn;\n            this.object = object;\n            System.out.println(&quot;Evem&quot;);\n            System.out.println(this.isOddTurn.hashCode());\n            System.out.println(isOddTurn.hashCode());\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (isOddTurn) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn=Boolean.TRUE;\n                    object.notify();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>If I make the isOddTurn variable as global Boolean instead of using it as instance variable in both threads, then it works fine.</p>\n<pre><code>public class Test {\n\n    private static Object object = new Object();\n    //private static AtomicBoolean isOddTurn = new AtomicBoolean(true);\n\n    private Boolean isOddTurn = Boolean.TRUE;\n\n    public static void main(String[] args) {\n        Test test = new Test();\n        test.runDemo();\n    }\n\n    public void runDemo() {\n        OddPrinter oddPrinter = new OddPrinter(object);\n        EvenPrinter evenPrinter = new EvenPrinter(object);\n        new Thread(oddPrinter).start();\n        new Thread(evenPrinter).start();\n    }\n\n    class OddPrinter implements Runnable {\n\n        private int counter = 1;\n\n\n        private Object object;\n\n        OddPrinter(Object object) {\n\n            this.object = object;\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (!isOddTurn) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn=Boolean.FALSE;\n                    object.notify();\n                }\n            }\n        }\n    }\n\n    class EvenPrinter implements Runnable {\n\n        private int counter = 2;\n\n        private Object object;\n\n\n        EvenPrinter(Object object) {\n\n            this.object = object;\n        }\n\n        @Override\n        public void run() {\n            synchronized (object) {\n                while (counter &lt;= 10) {\n                    while (isOddTurn) {\n                        try {\n                            object.wait();\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                    System.out.println(counter);\n                    counter += 2;\n                    isOddTurn=Boolean.TRUE;\n                    object.notify();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>What I am failing to understand in all three cases.</p>\n"},{"tags":["java","active-directory"],"owner":{"account_id":22993198,"reputation":1,"user_id":17118381,"display_name":"Troy McClure_AT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697267956,"creation_date":1697267956,"question_id":77291955,"body_markdown":"I mainly ask, is it possible to estahblish a connection to AD,Kerberos to get user attrubutes without the need to provide username and password in a java programm. \r\n\r\n\r\nUsing username and password it works fine to request Attributes using Java.\r\nBut is it easy possible use a kerberoes ticket or a connection pool in any way?\r\nOtherwise i have to save the user password which im not very into it.\r\n\r\nThanks for your Time! \r\n","title":"Using current logged in user to request user Attributes fom Active Directory using Java","body":"<p>I mainly ask, is it possible to estahblish a connection to AD,Kerberos to get user attrubutes without the need to provide username and password in a java programm.</p>\n<p>Using username and password it works fine to request Attributes using Java.\nBut is it easy possible use a kerberoes ticket or a connection pool in any way?\nOtherwise i have to save the user password which im not very into it.</p>\n<p>Thanks for your Time!</p>\n"},{"tags":["java","spring-data-mongodb"],"answers":[{"comments":[{"owner":{"account_id":139966,"reputation":367,"user_id":345927,"accept_rate":62,"display_name":"MJM"},"score":0,"creation_date":1488950692,"post_id":42653433,"comment_id":72452697,"body_markdown":"Thanks Vipin.  Veerams answer below made me take another look at the JSON returned from Spring.  It&#39;s treating the Id field as a string instead of a UUID, so I suspect I need a custom converter to return it as a UUID instead.","body":"Thanks Vipin.  Veerams answer below made me take another look at the JSON returned from Spring.  It&#39;s treating the Id field as a string instead of a UUID, so I suspect I need a custom converter to return it as a UUID instead."}],"tags":[],"owner":{"account_id":2175723,"reputation":1433,"user_id":1926445,"accept_rate":20,"display_name":"Vipin Dubey"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488904257,"creation_date":1488904257,"answer_id":42653433,"question_id":42653171,"body_markdown":"Most probably your problem lies with _id field generated by MongoDB. Since you already have an id field in you class MongoDB will try to do several things to make use of it, if not it will assign it&#39;s own _id, take a look at below page\r\n\r\nhttp://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mapping-chapter.html\r\n\r\nGo to section **7.1.1 How the &#39;_id&#39; field is handled in the mapping layer**\r\n\r\nand see if it helps.","title":"Spring Data MongoDb findById not returning results","body":"<p>Most probably your problem lies with _id field generated by MongoDB. Since you already have an id field in you class MongoDB will try to do several things to make use of it, if not it will assign it's own _id, take a look at below page</p>\n\n<p><a href=\"http://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mapping-chapter.html\" rel=\"nofollow noreferrer\">http://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mapping-chapter.html</a></p>\n\n<p>Go to section <strong>7.1.1 How the '_id' field is handled in the mapping layer</strong></p>\n\n<p>and see if it helps.</p>\n"}],"owner":{"account_id":139966,"reputation":367,"user_id":345927,"accept_rate":62,"display_name":"MJM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11628,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697267250,"creation_date":1488903464,"question_id":42653171,"body_markdown":"I have a Snozberry object that looks like this:\r\n\r\n     {\r\n      &quot;id&quot;:&quot;3cbdb746-561d-4e21-82e0-b7cfcad3a094&quot;,\r\n      &quot;thingId&quot;:&quot;7cbfb7a6-763d-6ef1-271b-b2a0cfc2fa43&quot;,\r\n      &quot;stuffId&quot;:81,\r\n      &quot;bits&quot;:&quot;WooHoo&quot;\r\n     }\r\n\r\nJava class (constructor, getter &amp; setters omitted for brevity):\r\n\r\n    @Document(collection=&quot;Snozberry&quot;)\r\n    public class Snozberry {\r\n     @Id\r\n     private UUID id;\r\n     private UUID thingId;\r\n     private Long stuffId;\r\n     private String bits;\r\n    }\r\n\r\nThe repository looks like:\r\n\r\n    public interface SnozberryRepository extends MongoRepository&lt;Snozberry,UUID&gt;{\r\n     Snozberry findByThingId(UUID Id);\r\n     Snozberry findById(UUID id);\r\n    }\r\n\r\nIn the MongoDb collection, the _id &amp; thingId fields are defined as a UUID. I would like to return the document that matches the id value I pass in.\r\n\r\nI can return all objects using findAll() and I can return objects matching thingId by using the\r\n\r\n      Snozberry findByThingId(UUID id)\r\n     \r\nmethod defined in my repository, so I know it&#39;s talking to the DB ok, and that it can find (non Id) UUID fields ok.\r\n\r\nI&#39;ve tried the default\r\n \r\n    findOne(UUID.fromString(&quot;3cbdb746-561d-4e21-82e0-b7cfcad3a094&quot;)\r\nand i&#39;ve also called this method defined in the repository\r\n\r\n    Snozberry findById(UUID id)\r\n\r\nBut both of those return null.  What am I missing (feels like it&#39;s something that should be obvious).\r\n\r\nThanks\r\nM\r\n\r\n\r\n\r\n","title":"Spring Data MongoDb findById not returning results","body":"<p>I have a Snozberry object that looks like this:</p>\n\n<pre><code> {\n  \"id\":\"3cbdb746-561d-4e21-82e0-b7cfcad3a094\",\n  \"thingId\":\"7cbfb7a6-763d-6ef1-271b-b2a0cfc2fa43\",\n  \"stuffId\":81,\n  \"bits\":\"WooHoo\"\n }\n</code></pre>\n\n<p>Java class (constructor, getter &amp; setters omitted for brevity):</p>\n\n<pre><code>@Document(collection=\"Snozberry\")\npublic class Snozberry {\n @Id\n private UUID id;\n private UUID thingId;\n private Long stuffId;\n private String bits;\n}\n</code></pre>\n\n<p>The repository looks like:</p>\n\n<pre><code>public interface SnozberryRepository extends MongoRepository&lt;Snozberry,UUID&gt;{\n Snozberry findByThingId(UUID Id);\n Snozberry findById(UUID id);\n}\n</code></pre>\n\n<p>In the MongoDb collection, the _id &amp; thingId fields are defined as a UUID. I would like to return the document that matches the id value I pass in.</p>\n\n<p>I can return all objects using findAll() and I can return objects matching thingId by using the</p>\n\n<pre><code>  Snozberry findByThingId(UUID id)\n</code></pre>\n\n<p>method defined in my repository, so I know it's talking to the DB ok, and that it can find (non Id) UUID fields ok.</p>\n\n<p>I've tried the default</p>\n\n<pre><code>findOne(UUID.fromString(\"3cbdb746-561d-4e21-82e0-b7cfcad3a094\")\n</code></pre>\n\n<p>and i've also called this method defined in the repository</p>\n\n<pre><code>Snozberry findById(UUID id)\n</code></pre>\n\n<p>But both of those return null.  What am I missing (feels like it's something that should be obvious).</p>\n\n<p>Thanks\nM</p>\n"},{"tags":["java","spring","jms"],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564381,"user_id":70604,"display_name":"Pascal Thivent"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1271091402,"creation_date":1271091402,"answer_id":2623814,"question_id":2623542,"body_markdown":"Use a transacted session and indicate successful message processing  by invoking the `Session` class&#39;s `commit()` method.\r\n\r\nCheck the section [19.4.5. Processing messages within transactions][1] for the configuration. (you can use a `DefaultMessageListenerContainer`). Depending on what you&#39;re doing with the messages, you may need a JTA transaction manager.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/reference/jms.html#jms-tx-participation","title":"Keeping messages in queue in case of receiver crash","body":"<p>Use a transacted session and indicate successful message processing  by invoking the <code>Session</code> class's <code>commit()</code> method.</p>\n\n<p>Check the section <a href=\"http://static.springsource.org/spring/docs/2.5.x/reference/jms.html#jms-tx-participation\" rel=\"nofollow noreferrer\">19.4.5. Processing messages within transactions</a> for the configuration. (you can use a <code>DefaultMessageListenerContainer</code>). Depending on what you're doing with the messages, you may need a JTA transaction manager.</p>\n"},{"comments":[{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1272344059,"post_id":2657307,"comment_id":2744652,"body_markdown":"-1 because the conclusion drawn from this document is incorrect.  Yes, there is redelivery if the receive() or onMessage() call fails but this does not mean the receiver has had a chance to do something with the message.  If the receiver crashes at this point, the message is irretrievably lost which is what OP was trying to avoid.  However, using a transacted session and explicit commit calls as described in the other response does prevent such loss of messages if the receiver crashes.","body":"-1 because the conclusion drawn from this document is incorrect.  Yes, there is redelivery if the receive() or onMessage() call fails but this does not mean the receiver has had a chance to do something with the message.  If the receiver crashes at this point, the message is irretrievably lost which is what OP was trying to avoid.  However, using a transacted session and explicit commit calls as described in the other response does prevent such loss of messages if the receiver crashes."},{"owner":{"account_id":113608,"reputation":159,"user_id":299122,"display_name":"soody"},"score":0,"creation_date":1272548972,"post_id":2657307,"comment_id":2766164,"body_markdown":"So in nutshell the article is misleading? What is meaning of crash? if onMessage method does not return due to crash wouldn&#39;t the message will be re-delivered?","body":"So in nutshell the article is misleading? What is meaning of crash? if onMessage method does not return due to crash wouldn&#39;t the message will be re-delivered?"},{"owner":{"account_id":74767,"reputation":31622,"user_id":214668,"accept_rate":100,"display_name":"T.Rob"},"score":0,"creation_date":1276401769,"post_id":2657307,"comment_id":3100048,"body_markdown":"I&#39;m not saying the article is misleading, just that it doesn&#39;t apply to the original question.  All of the failures discussed in the article quote happen before the message is returned to the app.  OP wanted to delay message acknowledgment until after the message was returned and the app had processed it, as CLIENT_ACKNOWLEDGE is supposed to provide.  Setting Session.AUTO_ACKNOWLEDGE actually enforces the behavior OP was trying to prevent.","body":"I&#39;m not saying the article is misleading, just that it doesn&#39;t apply to the original question.  All of the failures discussed in the article quote happen before the message is returned to the app.  OP wanted to delay message acknowledgment until after the message was returned and the app had processed it, as CLIENT_ACKNOWLEDGE is supposed to provide.  Setting Session.AUTO_ACKNOWLEDGE actually enforces the behavior OP was trying to prevent."}],"tags":[],"owner":{"account_id":113608,"reputation":159,"user_id":299122,"display_name":"soody"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1271480593,"creation_date":1271480593,"answer_id":2657307,"question_id":2623542,"body_markdown":"or you can use Session.AUTO_ACKNOWLEDGE with nontransacted session,  see quote below from this [article][1]\r\n\r\n&gt; A message is automatically\r\n&gt; acknowledged when it successfully\r\n&gt; returns from the receive() method. If\r\n&gt; the receiver uses the MessageListener\r\n&gt; interface, the message is\r\n&gt; automatically acknowledged when it\r\n&gt; successfully returns from the\r\n&gt; onMessage() method. If a failure\r\n&gt; occurs while executing the receive()\r\n&gt; method or the onMessage() method, the\r\n&gt; message is automatically redelivered.\r\n&gt; The JMS provider carefully manages\r\n&gt; message redelivery and guarantees\r\n&gt; once-only delivery semantics.\r\n\r\n  [1]: http://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html?page=3","title":"Keeping messages in queue in case of receiver crash","body":"<p>or you can use Session.AUTO_ACKNOWLEDGE with nontransacted session,  see quote below from this <a href=\"http://www.javaworld.com/javaworld/jw-02-2002/jw-0315-jms.html?page=3\" rel=\"nofollow noreferrer\">article</a></p>\n\n<blockquote>\n  <p>A message is automatically\n  acknowledged when it successfully\n  returns from the receive() method. If\n  the receiver uses the MessageListener\n  interface, the message is\n  automatically acknowledged when it\n  successfully returns from the\n  onMessage() method. If a failure\n  occurs while executing the receive()\n  method or the onMessage() method, the\n  message is automatically redelivered.\n  The JMS provider carefully manages\n  message redelivery and guarantees\n  once-only delivery semantics.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":9625504,"reputation":270,"user_id":7145253,"display_name":"Priyank Agrawal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519982998,"creation_date":1519982998,"answer_id":49066253,"question_id":2623542,"body_markdown":"Spring message listener with Client_Acknowledge mode will acknowledge the message when the client calls message.acknowledge().\r\n \r\nHowever, if after successful execution of the message, the consumer does not find any acknowledgement from the client side, spring assumes the execution was successful and acknowledges the message.\r\n\r\nIf at any point of time, consumer got an exception while processing the message, spring listener needs to know some exception has occured in order to redeliver the message to the queue for another consumer thread to pick it up. If you&#39;re catching the exception, spring assumes everything was handled and execution was smooth and hence acknowledges the message.\r\n\r\nSpring message listener only allows to throw JMS exception from onMessage listener. Catching your custom exception and throwing a JMS exception from listener (after logging the error for future reference) will allow you to redeliver the message.","title":"Keeping messages in queue in case of receiver crash","body":"<p>Spring message listener with Client_Acknowledge mode will acknowledge the message when the client calls message.acknowledge().</p>\n\n<p>However, if after successful execution of the message, the consumer does not find any acknowledgement from the client side, spring assumes the execution was successful and acknowledges the message.</p>\n\n<p>If at any point of time, consumer got an exception while processing the message, spring listener needs to know some exception has occured in order to redeliver the message to the queue for another consumer thread to pick it up. If you're catching the exception, spring assumes everything was handled and execution was smooth and hence acknowledges the message.</p>\n\n<p>Spring message listener only allows to throw JMS exception from onMessage listener. Catching your custom exception and throwing a JMS exception from listener (after logging the error for future reference) will allow you to redeliver the message.</p>\n"}],"owner":{"account_id":604905,"reputation":41,"user_id":314701,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2965,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1697264343,"creation_date":1271088884,"question_id":2623542,"body_markdown":"We&#39;ve a Spring JMS message listener container for receiving messages asynchronously. Using DefaultMessageListenerContainer and in sessionTransacted mode. I understand being in sessionTransacted mode means in case of an exception the message will be put back into the queue. But how can I make sure the message won&#39;t be deleted from the queue even if the receiver (which is picked the message) crashes or just the machine running it looses power?\r\n\r\nAt first I thought CLIENT_ACKNOWLEDGE acknowledge mode should save me, but [apparently](http://jira.springframework.org/browse/SPR-3796) it&#39;s not the case, Spring calls .acknowledge() no matter what.\r\n\r\nSo here&#39;s my question, how can I guarantee the delivery? Using a custom MessageListenerContainer? Using a transaction manager?","title":"Keeping messages in queue in case of receiver crash","body":"<p>We've a Spring JMS message listener container for receiving messages asynchronously. Using DefaultMessageListenerContainer and in sessionTransacted mode. I understand being in sessionTransacted mode means in case of an exception the message will be put back into the queue. But how can I make sure the message won't be deleted from the queue even if the receiver (which is picked the message) crashes or just the machine running it looses power?</p>\n\n<p>At first I thought CLIENT_ACKNOWLEDGE acknowledge mode should save me, but <a href=\"http://jira.springframework.org/browse/SPR-3796\" rel=\"nofollow noreferrer\">apparently</a> it's not the case, Spring calls .acknowledge() no matter what.</p>\n\n<p>So here's my question, how can I guarantee the delivery? Using a custom MessageListenerContainer? Using a transaction manager?</p>\n"},{"tags":["java","arrays","divide","minmax"],"answers":[{"tags":[],"owner":{"account_id":12209596,"reputation":100,"user_id":8911724,"display_name":"Mohamed Ismail M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697263181,"creation_date":1697259495,"answer_id":77291675,"question_id":77291590,"body_markdown":"you have called the recursive findMinMax method but it never returned and assigned back. In recursive the previous method data to be processed in the current method data. Next this min1 &amp; max1 which are assigned zero , how about the second findMinMax called with same min max . there the logical mistakes happened. You have said its divide and conquer. In that sense you have divided into two groups lets say right and left form the left you have to find min &amp; max and from the right you have to find min and max from the output of both left and right you have to check which is min and max, thats the last if else condition , there the failure arise in your code.   \r\n\r\n    public class MinMaxDivideConquer {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the number of elements: &quot;);\r\n        int n = scanner.nextInt();\r\n        int[] arr = new int[n];\r\n        System.out.println(&quot;Enter the elements: &quot;);\r\n        for (int i = 0; i &lt; n; i++) {\r\n            arr[i] = scanner.nextInt();\r\n        }\r\n\r\n        // Initialize parameters using an array\r\n        int i = 0;\r\n        int j = n - 1;\r\n        int[] minMax = findMinMax(arr, i, j);\r\n        \r\n        System.out.println(&quot;Minimum: &quot; + minMax[0]);\r\n        System.out.println(&quot;Maximum: &quot; + minMax[1]);\r\n    }\r\n\r\n    public static int[] findMinMax(int[] arr, int i, int j) {\r\n        int[] result = new int[2]; // Array to hold min and max\r\n\r\n        if (i == j) {\r\n            result[0] = arr[i]; // Minimum\r\n            result[1] = arr[i]; // Maximum\r\n        } else if (i == j - 1) {\r\n            if (arr[i] &lt; arr[j]) {\r\n                result[0] = arr[i]; // Minimum\r\n                result[1] = arr[j]; // Maximum\r\n            } else {\r\n                result[0] = arr[j]; // Minimum\r\n                result[1] = arr[i]; // Maximum\r\n            }\r\n        } else {\r\n            int mid = (i + j) / 2;\r\n            int[] leftMinMax = findMinMax(arr, i, mid);\r\n            int[] rightMinMax = findMinMax(arr, mid + 1, j);\r\n\r\n            result[0] = Math.min(leftMinMax[0], rightMinMax[0]);\r\n            result[1] = Math.max(leftMinMax[1], rightMinMax[1]);\r\n        }\r\n\r\n        return result;\r\n    }\r\n}","title":"Can anyone help me to find error in this code","body":"<p>you have called the recursive findMinMax method but it never returned and assigned back. In recursive the previous method data to be processed in the current method data. Next this min1 &amp; max1 which are assigned zero , how about the second findMinMax called with same min max . there the logical mistakes happened. You have said its divide and conquer. In that sense you have divided into two groups lets say right and left form the left you have to find min &amp; max and from the right you have to find min and max from the output of both left and right you have to check which is min and max, thats the last if else condition , there the failure arise in your code.</p>\n<pre><code>public class MinMaxDivideConquer {\npublic static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    System.out.print(&quot;Enter the number of elements: &quot;);\n    int n = scanner.nextInt();\n    int[] arr = new int[n];\n    System.out.println(&quot;Enter the elements: &quot;);\n    for (int i = 0; i &lt; n; i++) {\n        arr[i] = scanner.nextInt();\n    }\n\n    // Initialize parameters using an array\n    int i = 0;\n    int j = n - 1;\n    int[] minMax = findMinMax(arr, i, j);\n    \n    System.out.println(&quot;Minimum: &quot; + minMax[0]);\n    System.out.println(&quot;Maximum: &quot; + minMax[1]);\n}\n\npublic static int[] findMinMax(int[] arr, int i, int j) {\n    int[] result = new int[2]; // Array to hold min and max\n\n    if (i == j) {\n        result[0] = arr[i]; // Minimum\n        result[1] = arr[i]; // Maximum\n    } else if (i == j - 1) {\n        if (arr[i] &lt; arr[j]) {\n            result[0] = arr[i]; // Minimum\n            result[1] = arr[j]; // Maximum\n        } else {\n            result[0] = arr[j]; // Minimum\n            result[1] = arr[i]; // Maximum\n        }\n    } else {\n        int mid = (i + j) / 2;\n        int[] leftMinMax = findMinMax(arr, i, mid);\n        int[] rightMinMax = findMinMax(arr, mid + 1, j);\n\n        result[0] = Math.min(leftMinMax[0], rightMinMax[0]);\n        result[1] = Math.max(leftMinMax[1], rightMinMax[1]);\n    }\n\n    return result;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":11179730,"reputation":11,"user_id":9711335,"display_name":"Md Turin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697262975,"creation_date":1697262975,"answer_id":77291782,"question_id":77291590,"body_markdown":"Lets break down the code,\r\n\r\n&gt; In Java, primitive types are passed by value, so modifying min and max\r\n&gt; within the findMinMax method won&#39;t reflect the changes in the calling\r\n&gt; method. Instead, you should return an array or an object that contains\r\n&gt; the minimum and maximum values.\r\n\r\nIn this line of code, max and min value are not reflecting outside the method.\r\n\r\n    if (i == j) {\r\n      min = max = arr[i];\r\n    }\r\n\r\nInstead of this, we can return the array.\r\n\r\n&gt; In the findMinMax method, you&#39;ve assigned min1 and max1 to 0, which is\r\n&gt; incorrect. These should be initialized to the respective values from\r\n&gt; the array.\r\n\r\nIn this block of code, min1 and max1 are not initialized properly.\r\n\r\n    else {\r\n      int mid = (i + j) / 2;\r\n      int min1 = 0;\r\n      int max1 = 0;\r\n      findMinMax(arr, i, mid, min, max);\r\n      findMinMax(arr, mid + 1, j, min1, max1);\r\n      if (min1 &lt; min) {\r\n        min = min1;\r\n      }\r\n      if (max1 &gt; max) {\r\n        max = max1;\r\n      }\r\n    }\r\n\r\nLast of all, we could optimized code slightly by removing this block, it can be handle by last else block of code.\r\n\r\n    else if (i == j - 1) {\r\n      if (arr[i] &lt; arr[j]) {\r\n        min = arr[i];\r\n        max = arr[j];\r\n      } else {\r\n        min = arr[j];\r\n        max = arr[i];\r\n      }\r\n    }\r\n\r\nSo our full code:\r\n\r\n    import java.util.Scanner;\r\n    public class MinMaxDivideConquer {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            System.out.print(&quot;Enter the number of elements: &quot;);\r\n            int n = scanner.nextInt();\r\n            int[] arr = new int[n];\r\n            System.out.println(&quot;Enter the elements: &quot;);\r\n            for (int i = 0; i &lt; n; i++) {\r\n                arr[i] = scanner.nextInt();\r\n            }\r\n            // Call the divide and conquer function\r\n            int[] result = findMinMax(arr, 0, n - 1);\r\n            System.out.println(&quot;Minimum: &quot; + result[0]);\r\n            System.out.println(&quot;Maximum: &quot; + result[1]);\r\n        }\r\n    \r\n        public static int[] findMinMax(int[] arr, int i, int j) {\r\n           int[] result = new int[2];\r\n           if (i == j) {\r\n               result[0] = arr[i]; \r\n               result[1] = arr[i];\r\n           } else {\r\n               int mid = (i + j) / 2;\r\n               int[] leftResult = findMinMax(arr, i, mid);\r\n               int[] rightResult = findMinMax(arr, mid + 1, j);\r\n               result[0] = Math.min(leftResult[0], rightResult[0]); // Minimum\r\n               result[1] = Math.max(leftResult[1], rightResult[1]); // Maximum\r\n           }\r\n           return result;\r\n        }\r\n    }","title":"Can anyone help me to find error in this code","body":"<p>Lets break down the code,</p>\n<blockquote>\n<p>In Java, primitive types are passed by value, so modifying min and max\nwithin the findMinMax method won't reflect the changes in the calling\nmethod. Instead, you should return an array or an object that contains\nthe minimum and maximum values.</p>\n</blockquote>\n<p>In this line of code, max and min value are not reflecting outside the method.</p>\n<pre><code>if (i == j) {\n  min = max = arr[i];\n}\n</code></pre>\n<p>Instead of this, we can return the array.</p>\n<blockquote>\n<p>In the findMinMax method, you've assigned min1 and max1 to 0, which is\nincorrect. These should be initialized to the respective values from\nthe array.</p>\n</blockquote>\n<p>In this block of code, min1 and max1 are not initialized properly.</p>\n<pre><code>else {\n  int mid = (i + j) / 2;\n  int min1 = 0;\n  int max1 = 0;\n  findMinMax(arr, i, mid, min, max);\n  findMinMax(arr, mid + 1, j, min1, max1);\n  if (min1 &lt; min) {\n    min = min1;\n  }\n  if (max1 &gt; max) {\n    max = max1;\n  }\n}\n</code></pre>\n<p>Last of all, we could optimized code slightly by removing this block, it can be handle by last else block of code.</p>\n<pre><code>else if (i == j - 1) {\n  if (arr[i] &lt; arr[j]) {\n    min = arr[i];\n    max = arr[j];\n  } else {\n    min = arr[j];\n    max = arr[i];\n  }\n}\n</code></pre>\n<p>So our full code:</p>\n<pre><code>import java.util.Scanner;\npublic class MinMaxDivideConquer {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Enter the number of elements: &quot;);\n        int n = scanner.nextInt();\n        int[] arr = new int[n];\n        System.out.println(&quot;Enter the elements: &quot;);\n        for (int i = 0; i &lt; n; i++) {\n            arr[i] = scanner.nextInt();\n        }\n        // Call the divide and conquer function\n        int[] result = findMinMax(arr, 0, n - 1);\n        System.out.println(&quot;Minimum: &quot; + result[0]);\n        System.out.println(&quot;Maximum: &quot; + result[1]);\n    }\n\n    public static int[] findMinMax(int[] arr, int i, int j) {\n       int[] result = new int[2];\n       if (i == j) {\n           result[0] = arr[i]; \n           result[1] = arr[i];\n       } else {\n           int mid = (i + j) / 2;\n           int[] leftResult = findMinMax(arr, i, mid);\n           int[] rightResult = findMinMax(arr, mid + 1, j);\n           result[0] = Math.min(leftResult[0], rightResult[0]); // Minimum\n           result[1] = Math.max(leftResult[1], rightResult[1]); // Maximum\n       }\n       return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29668498,"reputation":11,"user_id":22738367,"display_name":"Aridra "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1697263181,"creation_date":1697256476,"question_id":77291590,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class MinMaxDivideConquer {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the number of elements: &quot;);\r\n        int n = scanner.nextInt();\r\n        int[] arr = new int[n];\r\n        System.out.println(&quot;Enter the elements: &quot;);\r\n        for (int i = 0; i &lt; n; i++) {\r\n            arr[i] = scanner.nextInt();\r\n        }\r\n        // Initialize parameters\r\n        int i = 0;\r\n        int j = n - 1;\r\n        int min = arr[0];\r\n        int max = arr[0];\r\n        // Call the divide and conquer function\r\n        findMinMax(arr, i, j, min, max);\r\n        System.out.println(&quot;Minimum: &quot; + min);\r\n        System.out.println(&quot;Maximum: &quot; + max);\r\n    }\r\n\r\n    public static void findMinMax(int[] arr, int i, int j, int min, int max) {\r\n        if (i == j) {\r\n            min = max = arr[i];\r\n        } else if (i == j - 1) {\r\n            if (arr[i] &lt; arr[j]) {\r\n                min = arr[i];\r\n                max = arr[j];\r\n            } else {\r\n                min = arr[j];\r\n                max = arr[i];\r\n            }\r\n        } else {\r\n            int mid = (i + j) / 2;\r\n            int min1 = 0;\r\n            int max1 = 0;\r\n            findMinMax(arr, i, mid, min, max);\r\n            findMinMax(arr, mid + 1, j, min1, max1);\r\n            if (min1 &lt; min) {\r\n                min = min1;\r\n            }\r\n            if (max1 &gt; max) {\r\n                max = max1;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nUsing divide and conquer, I should get Max and min of the the array given by user but the first element is coming as Max and min.as the code should be basic and simple I am not using integer.min_value etc..,I couldn&#39;t find where the error was after these many trails .","title":"Can anyone help me to find error in this code","body":"<pre><code>import java.util.Scanner;\n\npublic class MinMaxDivideConquer {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Enter the number of elements: &quot;);\n        int n = scanner.nextInt();\n        int[] arr = new int[n];\n        System.out.println(&quot;Enter the elements: &quot;);\n        for (int i = 0; i &lt; n; i++) {\n            arr[i] = scanner.nextInt();\n        }\n        // Initialize parameters\n        int i = 0;\n        int j = n - 1;\n        int min = arr[0];\n        int max = arr[0];\n        // Call the divide and conquer function\n        findMinMax(arr, i, j, min, max);\n        System.out.println(&quot;Minimum: &quot; + min);\n        System.out.println(&quot;Maximum: &quot; + max);\n    }\n\n    public static void findMinMax(int[] arr, int i, int j, int min, int max) {\n        if (i == j) {\n            min = max = arr[i];\n        } else if (i == j - 1) {\n            if (arr[i] &lt; arr[j]) {\n                min = arr[i];\n                max = arr[j];\n            } else {\n                min = arr[j];\n                max = arr[i];\n            }\n        } else {\n            int mid = (i + j) / 2;\n            int min1 = 0;\n            int max1 = 0;\n            findMinMax(arr, i, mid, min, max);\n            findMinMax(arr, mid + 1, j, min1, max1);\n            if (min1 &lt; min) {\n                min = min1;\n            }\n            if (max1 &gt; max) {\n                max = max1;\n            }\n        }\n    }\n}\n</code></pre>\n<p>Using divide and conquer, I should get Max and min of the the array given by user but the first element is coming as Max and min.as the code should be basic and simple I am not using integer.min_value etc..,I couldn't find where the error was after these many trails .</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1697265771,"post_id":77291787,"comment_id":136260908,"body_markdown":"Perhaps you meant `gb[i].addMouseListener(this);`.","body":"Perhaps you meant <code>gb[i].addMouseListener(this);</code>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697289100,"post_id":77291787,"comment_id":136262652,"body_markdown":"Rather than asking _CharGPT_, maybe you should study a [tutorial](https://docs.oracle.com/javase/tutorial/uiswing/index.html)?","body":"Rather than asking <i>CharGPT</i>, maybe you should study a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">tutorial</a>?"}],"owner":{"account_id":27821306,"reputation":9,"user_id":21241622,"display_name":"FranciscoSegura88"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697263062,"creation_date":1697263062,"question_id":77291787,"body_markdown":"```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\n\r\npublic class game extends Frame implements MouseListener{\r\n//DECLARE\r\nMenuBar mb;\r\nMenu m1, m2, m3;\r\nMenuItem mi1, mi2, mi3, mi4;\r\nPanel gameBoard, header, footer; \r\nButton gb[]; \r\nLabel announcer, score;\r\n\r\n    game(){\r\n        //FRAME ATRIBUTES\r\n        super(&quot;TicTacToe&quot;);\r\n        setSize(500,500);\r\n        setVisible(true);\r\n        setResizable(false);\r\n        \r\n        //INITIALIZE\r\n        //MENUBAR\r\n         mb = new MenuBar ();\r\n         m1 = new Menu(&quot;Nuevo Juego&quot;);\r\n         m2 = new Menu(&quot;Opciones&quot;);\r\n         m3 = new Menu(&quot;Ayuda&quot;);\r\n         mi1 = new MenuItem(&quot;&quot;);\r\n         mi2 = new MenuItem(&quot;&quot;);\r\n         mi3 = new MenuItem(&quot;&quot;);\r\n         //PANEL\r\n         header= new Panel();\r\n         gameBoard = new Panel();\r\n         footer = new Panel();\r\n         announcer = new Label(&quot;Announcer:&quot;);\r\n         score = new Label(&quot;Score:&quot;);\r\n         //BUTTONS\r\n         gb = new Button[9];\r\n\r\n         //SETTING THE LAYOUTS TO ACCOMODATE THE GAME BOARD\r\n         gameBoard.setLayout(new GridLayout(3, 3));\r\n\r\n        //CLOSING WINDOW EVENT\r\n         this.addWindowListener(new WindowAdapter(){          \r\n          public void windowClosing(WindowEvent windowEvent){\r\n           System.exit(0);\r\n          }      \r\n         });\r\n         \r\n         //ADDING THE BUTTONS TO THE GAMEBOARD\r\n         for(int i = 0; i &lt; gb.length; i++){\r\n            gb[i] = new Button();\r\n            gameBoard.add(gb[i]);\r\n            gb[i] = addMouseListener(this); //For some reason this is wrong... \r\n         }\r\n\r\n     //ADD \r\n        setMenuBar(mb);\r\n        mb.add(m1);\r\n        mb.add(m2);\r\n        mb.add(m3);\r\n        header.add(score);\r\n        footer.add(announcer);\r\n\r\n    //ADD PANEL TO THE FRAME\r\n        add(gameBoard, BorderLayout.CENTER);\r\n        add(header, BorderLayout.NORTH);\r\n        add(footer, BorderLayout.SOUTH);\r\n\r\n    }\r\n    \r\n    //MOUSE EVENTS\r\n    public void mouseClicked(MouseEvent e){\r\n        //TESTING \r\n        if(e.getSource().equals(gb[0]))\r\n            System.out.println(&quot;Presionaste la casilla 1.&quot;);\r\n    }\r\n\r\n    public void mouseEntered(MouseEvent e){}\r\n    \r\n    public void mouseExited(MouseEvent e){}\r\n    \r\n    public void mousePressed(MouseEvent e){}\r\n    \r\n    public void mouseReleased(MouseEvent e){}\r\n\r\n    public static void main(String[] args){\r\n\r\n        game g = new game();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nI&#39;m trying to add a mouselistener to each buttons so they can react, but its giving me this issue: \r\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \r\n        Type mismatch: cannot convert from void to Button\r\n\r\nI honestly don&#39;t understand what&#39;s wrong with it, tried asking ChatGPT but kept saying that i should change &quot;gb[i] = addMouseListener(this);&quot; to &quot;gb[i] = addMouseListener(this);&quot;. Tried Google, no success. I feel like this error is going to be really easy to fix but I&#39;m not seeing it, so please someone make me open my eyes. Thanks!\r\n\r\nTried CHATGPT and Google. I&#39;m just trying to get this buttons to work to keep going with the game logic","title":"I&#39;m trying to add MouseListener to a Buttons array using a For loop, and is giving me a type mismatch error","body":"<pre><code>import java.awt.*;\nimport java.awt.event.*;\n\npublic class game extends Frame implements MouseListener{\n//DECLARE\nMenuBar mb;\nMenu m1, m2, m3;\nMenuItem mi1, mi2, mi3, mi4;\nPanel gameBoard, header, footer; \nButton gb[]; \nLabel announcer, score;\n\n    game(){\n        //FRAME ATRIBUTES\n        super(&quot;TicTacToe&quot;);\n        setSize(500,500);\n        setVisible(true);\n        setResizable(false);\n        \n        //INITIALIZE\n        //MENUBAR\n         mb = new MenuBar ();\n         m1 = new Menu(&quot;Nuevo Juego&quot;);\n         m2 = new Menu(&quot;Opciones&quot;);\n         m3 = new Menu(&quot;Ayuda&quot;);\n         mi1 = new MenuItem(&quot;&quot;);\n         mi2 = new MenuItem(&quot;&quot;);\n         mi3 = new MenuItem(&quot;&quot;);\n         //PANEL\n         header= new Panel();\n         gameBoard = new Panel();\n         footer = new Panel();\n         announcer = new Label(&quot;Announcer:&quot;);\n         score = new Label(&quot;Score:&quot;);\n         //BUTTONS\n         gb = new Button[9];\n\n         //SETTING THE LAYOUTS TO ACCOMODATE THE GAME BOARD\n         gameBoard.setLayout(new GridLayout(3, 3));\n\n        //CLOSING WINDOW EVENT\n         this.addWindowListener(new WindowAdapter(){          \n          public void windowClosing(WindowEvent windowEvent){\n           System.exit(0);\n          }      \n         });\n         \n         //ADDING THE BUTTONS TO THE GAMEBOARD\n         for(int i = 0; i &lt; gb.length; i++){\n            gb[i] = new Button();\n            gameBoard.add(gb[i]);\n            gb[i] = addMouseListener(this); //For some reason this is wrong... \n         }\n\n     //ADD \n        setMenuBar(mb);\n        mb.add(m1);\n        mb.add(m2);\n        mb.add(m3);\n        header.add(score);\n        footer.add(announcer);\n\n    //ADD PANEL TO THE FRAME\n        add(gameBoard, BorderLayout.CENTER);\n        add(header, BorderLayout.NORTH);\n        add(footer, BorderLayout.SOUTH);\n\n    }\n    \n    //MOUSE EVENTS\n    public void mouseClicked(MouseEvent e){\n        //TESTING \n        if(e.getSource().equals(gb[0]))\n            System.out.println(&quot;Presionaste la casilla 1.&quot;);\n    }\n\n    public void mouseEntered(MouseEvent e){}\n    \n    public void mouseExited(MouseEvent e){}\n    \n    public void mousePressed(MouseEvent e){}\n    \n    public void mouseReleased(MouseEvent e){}\n\n    public static void main(String[] args){\n\n        game g = new game();\n\n    }\n\n}\n</code></pre>\n<p>I'm trying to add a mouselistener to each buttons so they can react, but its giving me this issue:\nException in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem:\nType mismatch: cannot convert from void to Button</p>\n<p>I honestly don't understand what's wrong with it, tried asking ChatGPT but kept saying that i should change &quot;gb[i] = addMouseListener(this);&quot; to &quot;gb[i] = addMouseListener(this);&quot;. Tried Google, no success. I feel like this error is going to be really easy to fix but I'm not seeing it, so please someone make me open my eyes. Thanks!</p>\n<p>Tried CHATGPT and Google. I'm just trying to get this buttons to work to keep going with the game logic</p>\n"},{"tags":["java","spring-data-jpa","spring-data","jpa-2.0","specifications"],"answers":[{"tags":[],"owner":{"account_id":3193004,"reputation":2220,"user_id":2696865,"accept_rate":86,"display_name":"Laurent B"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483524748,"creation_date":1483524214,"answer_id":41461056,"question_id":41366007,"body_markdown":"Don&#39;t know if it helps.\r\n\r\nI had the same problem. The only way I could solve it was to use a subquery.\r\n\r\nFor instance this would resemble something like that : \r\n\r\n    JPASubQuery subquery = new JPASubQuery(); \r\n\tsubquery = subquery .from( /* tableB */);\r\n\tsubquery .where(/* conditions */);\r\n\r\nThen use i add the subquery to the predicate : \r\n\r\n\tpredicate.and(subquery.exists());\r\n\r\n\r\nNB : In my case it helped as i am extensively using Specifications. In most cases, the performance impact didn&#39;t seem that great.\r\n\r\n**EDIT :** \r\nI just realized that the former example worked only in my case as i&#39;m using `query-dsl`.\r\n\r\nIn your case, have a look at https://stackoverflow.com/questions/4483576/jpa-2-0-criteria-api-subqueries-in-expressions#4668015 to create a subquery and join it to your predicate conditions.\r\n\t\t\t\t","title":"Left Join in Spring Data JPA&#39;s Specification","body":"<p>Don't know if it helps.</p>\n\n<p>I had the same problem. The only way I could solve it was to use a subquery.</p>\n\n<p>For instance this would resemble something like that : </p>\n\n<pre><code>JPASubQuery subquery = new JPASubQuery(); \nsubquery = subquery .from( /* tableB */);\nsubquery .where(/* conditions */);\n</code></pre>\n\n<p>Then use i add the subquery to the predicate : </p>\n\n<pre><code>predicate.and(subquery.exists());\n</code></pre>\n\n<p>NB : In my case it helped as i am extensively using Specifications. In most cases, the performance impact didn't seem that great.</p>\n\n<p><strong>EDIT :</strong> \nI just realized that the former example worked only in my case as i'm using <code>query-dsl</code>.</p>\n\n<p>In your case, have a look at <a href=\"https://stackoverflow.com/questions/4483576/jpa-2-0-criteria-api-subqueries-in-expressions#4668015\">JPA 2.0, Criteria API, Subqueries, In Expressions</a> to create a subquery and join it to your predicate conditions.</p>\n"},{"tags":[],"owner":{"account_id":149142,"reputation":1772,"user_id":361414,"display_name":"Milanka"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1484131600,"creation_date":1484131600,"answer_id":41588766,"question_id":41366007,"body_markdown":"Specify join type:\r\n\r\n    town = &#39;%&#39; + StringUtils.lowerCase(town) + &#39;%&#39;;\r\n    return cb.or(\r\n        cb.like(cb.lower(root.join(&quot;billingAddress&quot;, JoinType.LEFT).get(&quot;town&quot;)), town),\r\n        cb.like(cb.lower(root.join(&quot;shippingAddress&quot;, JoinType.LEFT).get(&quot;town&quot;)), town));","title":"Left Join in Spring Data JPA&#39;s Specification","body":"<p>Specify join type:</p>\n\n<pre><code>town = '%' + StringUtils.lowerCase(town) + '%';\nreturn cb.or(\n    cb.like(cb.lower(root.join(\"billingAddress\", JoinType.LEFT).get(\"town\")), town),\n    cb.like(cb.lower(root.join(\"shippingAddress\", JoinType.LEFT).get(\"town\")), town));\n</code></pre>\n"}],"owner":{"account_id":337881,"reputation":2204,"user_id":666414,"accept_rate":50,"display_name":"maxxyme"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15675,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":41588766,"answer_count":2,"score":6,"last_activity_date":1697262905,"creation_date":1482942363,"question_id":41366007,"body_markdown":"Assume I&#39;m having the following class: (simplified to the extreme)\r\n\r\n\t@Entity\r\n\t@Table(name = &quot;USER&quot;)\r\n\tpublic class User {\r\n\t\r\n\t\t@OneToOne(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n\t\tprivate BillingAddress billingAddress;\r\n\t\r\n\t\t@OneToOne(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n\t\tprivate ShippingAddress shippingAddress; // This one CAN be null\r\n\t\r\n\t}\r\n\r\nand both ``*Address`` inherit from this abstract: (again, it&#39;s extra-simplified)\r\n\r\n\tpublic abstract class Address {\r\n\t\r\n\t\t@OneToOne(optional = false, fetch = FetchType.LAZY)\r\n\t\t@JoinColumn(name = &quot;USER_ID&quot;)\r\n\t\tprivate User user;\r\n\t\r\n\t\t@NotEmpty\r\n\t\t@Size(max = 32)\r\n\t\t@Column(name = &quot;ADDR_TOWN&quot;)\r\n\t\tprivate String town;\r\n\t\r\n\t }\r\n\r\nI tried the JPA Specifications, as explained by Spring&#39;s blog post:\r\n\r\n\t/**\r\n\t * User specifications.\r\n\t * \r\n\t * @see &lt;a href=&quot;https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl&quot;&gt;Advanced Spring Data JPA - Specifications and Querydsl&lt;/a&gt;\r\n\t */\r\n\tpublic class UserSpecifications {\r\n\t\tpublic static Specification&lt;User&gt; likeTown(String town) {\r\n\t\t\treturn new Specification&lt;User&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic Predicate toPredicate(Root&lt;User&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\r\n\t\t\t\t\treturn cb.like(cb.lower(root.get(&quot;billingAddress&quot;).get(&quot;town&quot;)), &#39;%&#39; + StringUtils.lowerCase(town) + &#39;%&#39;);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\r\nUsing this &quot;specification&quot; as follow:\r\n\r\n\tList&lt;User&gt; users = userRepository.findAll(UserSpecifications.likeTown(myTown));\r\n\r\nBut now, I also want to search the town for the shippingAddress, which might not exist.\r\nI tried combining both ``cb.like`` in a ``cb.or`` but it turned out the resulting SQL query had an INNER JOIN for the shippingAddress, which is incorrect because, as said above, it might be null, so I&#39;d like a LEFT JOIN.\r\n\r\nHow to do that?\r\n\r\nThanks.","title":"Left Join in Spring Data JPA&#39;s Specification","body":"<p>Assume I'm having the following class: (simplified to the extreme)</p>\n\n<pre><code>@Entity\n@Table(name = \"USER\")\npublic class User {\n\n    @OneToOne(mappedBy = \"user\", cascade = CascadeType.ALL)\n    private BillingAddress billingAddress;\n\n    @OneToOne(mappedBy = \"user\", cascade = CascadeType.ALL)\n    private ShippingAddress shippingAddress; // This one CAN be null\n\n}\n</code></pre>\n\n<p>and both <code>*Address</code> inherit from this abstract: (again, it's extra-simplified)</p>\n\n<pre><code>public abstract class Address {\n\n    @OneToOne(optional = false, fetch = FetchType.LAZY)\n    @JoinColumn(name = \"USER_ID\")\n    private User user;\n\n    @NotEmpty\n    @Size(max = 32)\n    @Column(name = \"ADDR_TOWN\")\n    private String town;\n\n }\n</code></pre>\n\n<p>I tried the JPA Specifications, as explained by Spring's blog post:</p>\n\n<pre><code>/**\n * User specifications.\n * \n * @see &lt;a href=\"https://spring.io/blog/2011/04/26/advanced-spring-data-jpa-specifications-and-querydsl\"&gt;Advanced Spring Data JPA - Specifications and Querydsl&lt;/a&gt;\n */\npublic class UserSpecifications {\n    public static Specification&lt;User&gt; likeTown(String town) {\n        return new Specification&lt;User&gt;() {\n            @Override\n            public Predicate toPredicate(Root&lt;User&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb) {\n                return cb.like(cb.lower(root.get(\"billingAddress\").get(\"town\")), '%' + StringUtils.lowerCase(town) + '%');\n            }\n        };\n    }\n</code></pre>\n\n<p>Using this \"specification\" as follow:</p>\n\n<pre><code>List&lt;User&gt; users = userRepository.findAll(UserSpecifications.likeTown(myTown));\n</code></pre>\n\n<p>But now, I also want to search the town for the shippingAddress, which might not exist.\nI tried combining both <code>cb.like</code> in a <code>cb.or</code> but it turned out the resulting SQL query had an INNER JOIN for the shippingAddress, which is incorrect because, as said above, it might be null, so I'd like a LEFT JOIN.</p>\n\n<p>How to do that?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","apache-zookeeper","dynamic-properties","spring-cloud-zookeeper"],"comments":[{"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"score":0,"creation_date":1697377651,"post_id":77291771,"comment_id":136269698,"body_markdown":"I solved it by adding ```spring.cloud.zookeeper.config.name=your-app-name``` in bootstrap.properties, it seems latest version of ```spring-cloud-starter-zookeeper-config``` required this to watch the config node ```/config/your-app-name```.","body":"I solved it by adding <code>spring.cloud.zookeeper.config.name=your-app-name</code> in bootstrap.properties, it seems latest version of <code>spring-cloud-starter-zookeeper-config</code> required this to watch the config node <code>&#47;config&#47;your-app-name</code>."}],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697262711,"creation_date":1697262711,"question_id":77291771,"body_markdown":"I my trying to implement the **dynamic property** refresh in **spring-boot** application. My config server here is **zookeeper**. But it seems, that there&#39;s some issue and without application re-start the values in the config files are not getting updated on runtime, whenever the zookeeper config node changes. \r\n\r\n\r\n\r\n**Bean** (This needs to be refresh without application start whenever the zookeeper node -&gt; prop.host gets updated):\r\n\r\n    @Data\r\n    @ConfigurationProperties(prefix = &quot;prop&quot;)\r\n    @Configuration\r\n    @RefreshScope\r\n    @Slf4j\r\n    public class AppProperties {\r\n    \r\n        @NotEmpty\r\n        private String host;\r\n    \r\n        @EventListener\r\n        public void onRefreshScopeRefreshed(final RefreshScopeRefreshedEvent event) {\r\n            log.info(&quot;Got refresh scope event HbaseProperties: {}&quot;, event);\r\n        }\r\n    }\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.company&lt;/groupId&gt;\r\n        &lt;artifactId&gt;wallet&lt;/artifactId&gt;\r\n        &lt;packaging&gt;pom&lt;/packaging&gt;\r\n        &lt;version&gt;1.12.15&lt;/version&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.10&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;modules&gt;\r\n            &lt;module&gt;web&lt;/module&gt;\r\n            &lt;module&gt;common&lt;/module&gt;\r\n            &lt;module&gt;dao&lt;/module&gt;\r\n            &lt;module&gt;scheduler&lt;/module&gt;\r\n            &lt;module&gt;reports&lt;/module&gt;\r\n        &lt;/modules&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;spring.retry&gt;1.2.4.RELEASE&lt;/spring.retry&gt;\r\n            &lt;lombok&gt;1.18.4&lt;/lombok&gt;\r\n            &lt;mysql&gt;8.0.13&lt;/mysql&gt;\r\n            &lt;common.lang&gt;3.8.1&lt;/common.lang&gt;\r\n            &lt;swagger&gt;2.9.2&lt;/swagger&gt;\r\n            &lt;aws&gt;1.12.262&lt;/aws&gt;\r\n            &lt;xcelite&gt;1.0.4&lt;/xcelite&gt;\r\n            &lt;jdbi&gt;2.78&lt;/jdbi&gt;\r\n            &lt;common.utils&gt;4.2.1-RELEASE&lt;/common.utils&gt;\r\n            &lt;log4j2.version&gt;2.17.0&lt;/log4j2.version&gt;\r\n            &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;${lombok}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;${common.lang}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.lmax&lt;/groupId&gt;\r\n                &lt;artifactId&gt;disruptor&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n                &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-zookeeper-config&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt;\r\n                &lt;artifactId&gt;zookeeper&lt;/artifactId&gt;\r\n                &lt;version&gt;3.6.0&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n                    &lt;exclusions&gt;\r\n                        &lt;exclusion&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                        &lt;/exclusion&gt;\r\n                    &lt;/exclusions&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring.retry}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                    &lt;optional&gt;true&lt;/optional&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;kafka-log4j-appender&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.0.0&lt;/version&gt;\r\n                    &lt;exclusions&gt;\r\n                        &lt;exclusion&gt;\r\n                            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n                        &lt;/exclusion&gt;\r\n                    &lt;/exclusions&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.jdbi&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jdbi&lt;/artifactId&gt;\r\n                    &lt;version&gt;${jdbi}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                    &lt;version&gt;${mysql}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n                    &lt;version&gt;${swagger}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n                    &lt;version&gt;${swagger}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\r\n                    &lt;version&gt;${aws}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n                    &lt;version&gt;${aws}&lt;/version&gt;\r\n                    &lt;exclusions&gt;\r\n                        &lt;exclusion&gt;\r\n                            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                        &lt;/exclusion&gt;\r\n                    &lt;/exclusions&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.ebay&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;xcelite&lt;/artifactId&gt;\r\n                    &lt;version&gt;${xcelite}&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hibernate-types-5&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;c3p0&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.9.1.2&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.7.3&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.3.2&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.0&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n                    &lt;type&gt;pom&lt;/type&gt;\r\n                    &lt;scope&gt;import&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;aws-java-sdk-sts&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.12.375&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.19.1&lt;/version&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.1.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                            &lt;version&gt;5.1.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n","title":"RefreshScope bean are not getting updated on zookeeper config node values changed","body":"<p>I my trying to implement the <strong>dynamic property</strong> refresh in <strong>spring-boot</strong> application. My config server here is <strong>zookeeper</strong>. But it seems, that there's some issue and without application re-start the values in the config files are not getting updated on runtime, whenever the zookeeper config node changes.</p>\n<p><strong>Bean</strong> (This needs to be refresh without application start whenever the zookeeper node -&gt; prop.host gets updated):</p>\n<pre><code>@Data\n@ConfigurationProperties(prefix = &quot;prop&quot;)\n@Configuration\n@RefreshScope\n@Slf4j\npublic class AppProperties {\n\n    @NotEmpty\n    private String host;\n\n    @EventListener\n    public void onRefreshScopeRefreshed(final RefreshScopeRefreshedEvent event) {\n        log.info(&quot;Got refresh scope event HbaseProperties: {}&quot;, event);\n    }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.company&lt;/groupId&gt;\n    &lt;artifactId&gt;wallet&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;1.12.15&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.10&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;modules&gt;\n        &lt;module&gt;web&lt;/module&gt;\n        &lt;module&gt;common&lt;/module&gt;\n        &lt;module&gt;dao&lt;/module&gt;\n        &lt;module&gt;scheduler&lt;/module&gt;\n        &lt;module&gt;reports&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;properties&gt;\n        &lt;spring.retry&gt;1.2.4.RELEASE&lt;/spring.retry&gt;\n        &lt;lombok&gt;1.18.4&lt;/lombok&gt;\n        &lt;mysql&gt;8.0.13&lt;/mysql&gt;\n        &lt;common.lang&gt;3.8.1&lt;/common.lang&gt;\n        &lt;swagger&gt;2.9.2&lt;/swagger&gt;\n        &lt;aws&gt;1.12.262&lt;/aws&gt;\n        &lt;xcelite&gt;1.0.4&lt;/xcelite&gt;\n        &lt;jdbi&gt;2.78&lt;/jdbi&gt;\n        &lt;common.utils&gt;4.2.1-RELEASE&lt;/common.utils&gt;\n        &lt;log4j2.version&gt;2.17.0&lt;/log4j2.version&gt;\n        &lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n    &lt;/properties&gt;\n\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;${common.lang}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.lmax&lt;/groupId&gt;\n            &lt;artifactId&gt;disruptor&lt;/artifactId&gt;\n            &lt;version&gt;3.3.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-zookeeper-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt;\n            &lt;artifactId&gt;zookeeper&lt;/artifactId&gt;\n            &lt;version&gt;3.6.0&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n            &lt;version&gt;3.8.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n            &lt;version&gt;2.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n                &lt;version&gt;${spring.retry}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n                &lt;optional&gt;true&lt;/optional&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n                &lt;artifactId&gt;kafka-log4j-appender&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0&lt;/version&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.jdbi&lt;/groupId&gt;\n                &lt;artifactId&gt;jdbi&lt;/artifactId&gt;\n                &lt;version&gt;${jdbi}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                &lt;version&gt;${mysql}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n                &lt;version&gt;${swagger}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n                &lt;version&gt;${swagger}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n                &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\n                &lt;version&gt;${aws}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n                &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n                &lt;version&gt;${aws}&lt;/version&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.ebay&lt;/groupId&gt;\n                &lt;artifactId&gt;xcelite&lt;/artifactId&gt;\n                &lt;version&gt;${xcelite}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.vladmihalcea&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-types-5&lt;/artifactId&gt;\n                &lt;version&gt;1.2.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;c3p0&lt;/groupId&gt;\n                &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n                &lt;version&gt;0.9.1.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n                &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n                &lt;version&gt;2.7.3&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n                &lt;version&gt;1.3.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n                &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n                &lt;version&gt;4.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n                &lt;artifactId&gt;aws-java-sdk-sts&lt;/artifactId&gt;\n                &lt;version&gt;1.12.375&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.19.1&lt;/version&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n                        &lt;artifactId&gt;junit-platform-surefire-provider&lt;/artifactId&gt;\n                        &lt;version&gt;1.1.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n                        &lt;version&gt;5.1.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","serialization"],"comments":[{"owner":{"account_id":8064739,"reputation":533,"user_id":6079278,"display_name":"vanillaSugar"},"score":0,"creation_date":1539430865,"post_id":52792493,"comment_id":92505542,"body_markdown":"Maybe if you would have implemented equals and hashcode it would not work","body":"Maybe if you would have implemented equals and hashcode it would not work"},{"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"score":0,"creation_date":1539431575,"post_id":52792493,"comment_id":92505712,"body_markdown":"@vanillaSugar Thanks, But it works still correctly when i have implemented equals and hashcode using the `name` field.","body":"@vanillaSugar Thanks, But it works still correctly when i have implemented equals and hashcode using the <code>name</code> field."},{"owner":{"account_id":8064739,"reputation":533,"user_id":6079278,"display_name":"vanillaSugar"},"score":0,"creation_date":1539431658,"post_id":52792493,"comment_id":92505732,"body_markdown":"And if on your leader parameter?","body":"And if on your leader parameter?"},{"owner":{"account_id":12295509,"reputation":455,"user_id":8971274,"display_name":"jker"},"score":0,"creation_date":1539432318,"post_id":52792493,"comment_id":92505908,"body_markdown":"I think, that [here](https://softwareengineering.stackexchange.com/questions/228848/how-does-java-handle-cyclic-data-references-when-serializing-an-object) is the answer for your question.","body":"I think, that <a href=\"https://softwareengineering.stackexchange.com/questions/228848/how-does-java-handle-cyclic-data-references-when-serializing-an-object\">here</a> is the answer for your question."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1697266794,"post_id":52792493,"comment_id":136260969,"body_markdown":"The answer to your question is to be found [Java Object Serialization Specification #1.2 Writing to an Object Stream](https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serial-arch.html#a4176)","body":"The answer to your question is to be found <a href=\"https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serial-arch.html#a4176\" rel=\"nofollow noreferrer\">Java Object Serialization Specification #1.2 Writing to an Object Stream</a>"}],"answers":[{"comments":[{"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"score":0,"creation_date":1539766142,"post_id":52793543,"comment_id":92617121,"body_markdown":"I don&#39;t call `reset()`, and I change the object, But the results are still correct，Why?","body":"I don&#39;t call <code>reset()</code>, and I change the object, But the results are still correct，Why?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1539795709,"post_id":52793543,"comment_id":92634752,"body_markdown":"@Cherokee are you changing it between sending it multiple times?","body":"@Cherokee are you changing it between sending it multiple times?"},{"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"score":0,"creation_date":1539845771,"post_id":52793543,"comment_id":92650527,"body_markdown":"It&#39;s my fault,As you said the results are incorrect.","body":"It&#39;s my fault,As you said the results are incorrect."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1539437973,"creation_date":1539437973,"answer_id":52793543,"question_id":52792493,"body_markdown":"Java Serialization uses an `IdentityHashMap` to map every reference it tries to serialize to an id. The first time it serializes an object it writes its contents and its id. After that, it writes just the id allowing circular references and one copy of an object no matter how many times it is referenced.\r\n\r\nThe downside is that if you keep the Object stream and don&#39;t call `reset()` it will retain every object you have ever sent resulting in memory usage increasing. Also if you change an object and send it again, the changes won&#39;t be apparent as it only sends the reference to the object again.\r\n","title":"How does java serialization solve circular reference problems?","body":"<p>Java Serialization uses an <code>IdentityHashMap</code> to map every reference it tries to serialize to an id. The first time it serializes an object it writes its contents and its id. After that, it writes just the id allowing circular references and one copy of an object no matter how many times it is referenced.</p>\n\n<p>The downside is that if you keep the Object stream and don't call <code>reset()</code> it will retain every object you have ever sent resulting in memory usage increasing. Also if you change an object and send it again, the changes won't be apparent as it only sends the reference to the object again.</p>\n"},{"comments":[{"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"score":0,"creation_date":1539693886,"post_id":52794005,"comment_id":92587583,"body_markdown":"Great explanation，But the first answer should be what I care most about.","body":"Great explanation，But the first answer should be what I care most about."}],"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539441251,"creation_date":1539441251,"answer_id":52794005,"question_id":52792493,"body_markdown":"There are two key things for circular references in Java Serialization: backreferences and construction nesting.\r\n\r\nJava Serialization performs a depth first traversal. Consider this example.\r\n\r\n    class Outer implements java.io.Serializable {\r\n        Inner inner;\r\n    }\r\n\r\nOne object contains another (assuming `inner` is non-null). The outer object starts to be written to the stream, in the middle of which the inner object is written, followed by the rest of the outer object. Likewise for reading. Java Serialization does not delay writing out the outer object until after the inner objects have been cleanly constructed. \r\n\r\nAn analogy to normal Java code would be constructing nested objects in the constructor of outer objects.\r\n\r\n        // Like Java Serialization\r\n        Outer() {\r\n            this.inner = new Inner();\r\n        }\r\n\r\nRather than constructing the nested objects and passing references to the constructor of the outer object.\r\n\r\n        // Not like Java Serialization\r\n        Outer(Inner inner) {\r\n            this.inner = inner;\r\n        }\r\n    }\r\n\r\n        ... new Outer(new Inner()) ...\r\n\r\nBackreferences are needed even if you just wanted a directed acyclic graph of objects. Consider a simple example.\r\n\r\n    class Foo implements java.io.Serializable {\r\n        Object a = new SerialBar();\r\n        Object b = a;\r\n    }\r\n\r\nWe should find for any deserialised instance `foo`, `foo.a == foo.b`. In order to achieve this serialisation checks to see if the stream has started serialised the reference before, and if so inserts a back reference rather than reserialising the object. The object is remembered as soon as it is constructed, but before either default field serialisation or `readObject`/`readExternal` has started.\r\n\r\nPutting those two things together, we see that a nested object can receive a reference an outer object. Note that the nested object sees a partially constructed outer object, with all the fun that entails.","title":"How does java serialization solve circular reference problems?","body":"<p>There are two key things for circular references in Java Serialization: backreferences and construction nesting.</p>\n\n<p>Java Serialization performs a depth first traversal. Consider this example.</p>\n\n<pre><code>class Outer implements java.io.Serializable {\n    Inner inner;\n}\n</code></pre>\n\n<p>One object contains another (assuming <code>inner</code> is non-null). The outer object starts to be written to the stream, in the middle of which the inner object is written, followed by the rest of the outer object. Likewise for reading. Java Serialization does not delay writing out the outer object until after the inner objects have been cleanly constructed. </p>\n\n<p>An analogy to normal Java code would be constructing nested objects in the constructor of outer objects.</p>\n\n<pre><code>    // Like Java Serialization\n    Outer() {\n        this.inner = new Inner();\n    }\n</code></pre>\n\n<p>Rather than constructing the nested objects and passing references to the constructor of the outer object.</p>\n\n<pre><code>    // Not like Java Serialization\n    Outer(Inner inner) {\n        this.inner = inner;\n    }\n}\n\n    ... new Outer(new Inner()) ...\n</code></pre>\n\n<p>Backreferences are needed even if you just wanted a directed acyclic graph of objects. Consider a simple example.</p>\n\n<pre><code>class Foo implements java.io.Serializable {\n    Object a = new SerialBar();\n    Object b = a;\n}\n</code></pre>\n\n<p>We should find for any deserialised instance <code>foo</code>, <code>foo.a == foo.b</code>. In order to achieve this serialisation checks to see if the stream has started serialised the reference before, and if so inserts a back reference rather than reserialising the object. The object is remembered as soon as it is constructed, but before either default field serialisation or <code>readObject</code>/<code>readExternal</code> has started.</p>\n\n<p>Putting those two things together, we see that a nested object can receive a reference an outer object. Note that the nested object sees a partially constructed outer object, with all the fun that entails.</p>\n"},{"tags":[],"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539765840,"creation_date":1539765840,"answer_id":52850693,"question_id":52792493,"body_markdown":"I found the answer in the book _&quot;Core Java&#174; Volume II—Advanced Features, Tenth Edition &quot;_ .In section 2.4 _&quot; Object Input/Output Streams and Serialization &quot;_ of this book, the description is:\r\n\r\n&gt; Behind the scenes, an ObjectOutputStream looks at all the fields of the objects and saves their contents. For example, when writing an Employee object, the name, date, and salary fields are written to the output stream.\r\n \r\n&gt; However, there is one important situation that we need to consider: What happens when one object is shared by several objects as part of its state? \r\n\r\n&gt; Saving such a network of objects is a challenge. Of course, we cannot save and restore the memory addresses for the secretary objects. When an object is reloaded, it will likely occupy a completely different memory address than it originally did. \r\n\r\n&gt; Instead, each object is saved with a serial number , hence the name object serialization\r\n for this mechanism. Here is the algorithm: \r\n\r\n&gt; 1. Associate a serial number with each object reference that you encounter (as shown in Figure 2.6). \r\n\r\n&gt; 2. When encountering an object reference for the first time, save the object data to the output stream. \r\n\r\n&gt; 3. If it has been saved previously, just write “same as the previously saved object with serial number x .” \r\n\r\n&gt; When reading back the objects, the procedure is reversed.\r\n\r\n&gt; 1. When an object is specified in an object input stream for the first time, construct it, initialize it with the stream data, and remember the association between the serial number and the object reference. \r\n\r\n&gt; 2. When the tag “same as the previously saved object with serial number x ” is encountered, retrieve the object reference for the sequence number. \r\n\r\nSo it is to serialize and deserialize an object graph in this way with JAVA.","title":"How does java serialization solve circular reference problems?","body":"<p>I found the answer in the book <em>\"Core Java® Volume II—Advanced Features, Tenth Edition \"</em> .In section 2.4 <em>\" Object Input/Output Streams and Serialization \"</em> of this book, the description is:</p>\n\n<blockquote>\n  <p>Behind the scenes, an ObjectOutputStream looks at all the fields of the objects and saves their contents. For example, when writing an Employee object, the name, date, and salary fields are written to the output stream.</p>\n  \n  <p>However, there is one important situation that we need to consider: What happens when one object is shared by several objects as part of its state? </p>\n  \n  <p>Saving such a network of objects is a challenge. Of course, we cannot save and restore the memory addresses for the secretary objects. When an object is reloaded, it will likely occupy a completely different memory address than it originally did. </p>\n  \n  <p>Instead, each object is saved with a serial number , hence the name object serialization\n   for this mechanism. Here is the algorithm: </p>\n  \n  <ol>\n  <li><p>Associate a serial number with each object reference that you encounter (as shown in Figure 2.6). </p></li>\n  <li><p>When encountering an object reference for the first time, save the object data to the output stream. </p></li>\n  <li><p>If it has been saved previously, just write “same as the previously saved object with serial number x .” </p></li>\n  </ol>\n  \n  <p>When reading back the objects, the procedure is reversed.</p>\n  \n  <ol>\n  <li><p>When an object is specified in an object input stream for the first time, construct it, initialize it with the stream data, and remember the association between the serial number and the object reference. </p></li>\n  <li><p>When the tag “same as the previously saved object with serial number x ” is encountered, retrieve the object reference for the sequence number. </p></li>\n  </ol>\n</blockquote>\n\n<p>So it is to serialize and deserialize an object graph in this way with JAVA.</p>\n"},{"tags":[],"owner":{"account_id":7172939,"reputation":2217,"user_id":5479869,"display_name":"chaokunyang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697260503,"creation_date":1697260503,"answer_id":77291702,"question_id":52792493,"body_markdown":"When jdk serialize an object, it store its objectref to IdentityHashMap, so next time jdk serialize this object, jkdk can write just a ref(an auto-growing id) for it, which avoid duplicate serialization. There ara similar mechanism used by https://github.com/alipay/fury , https://github.com/EsotericSoftware/kryo","title":"How does java serialization solve circular reference problems?","body":"<p>When jdk serialize an object, it store its objectref to IdentityHashMap, so next time jdk serialize this object, jkdk can write just a ref(an auto-growing id) for it, which avoid duplicate serialization. There ara similar mechanism used by <a href=\"https://github.com/alipay/fury\" rel=\"nofollow noreferrer\">https://github.com/alipay/fury</a> , <a href=\"https://github.com/EsotericSoftware/kryo\" rel=\"nofollow noreferrer\">https://github.com/EsotericSoftware/kryo</a></p>\n"}],"owner":{"account_id":8912557,"reputation":143,"user_id":6652192,"display_name":"Cherokee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":798,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":52793543,"answer_count":4,"score":1,"last_activity_date":1697260503,"creation_date":1539430508,"question_id":52792493,"body_markdown":"I did a serialization test with Java. I found that Java serialization can handle circular references properly. But how does Java serialization solve circular reference problems?\r\n\r\nThe following code works correctly:\r\n\r\n    public class SerializableTest {\r\n\r\n        static class Employee implements Serializable{\r\n\r\n            private static final long serialVersionUID = 1L;\r\n\r\n            String name;\r\n\r\n            int age;\r\n\r\n            Employee leader;\r\n\r\n            public void say(){\r\n                System.out.println(&quot;my name is &quot; + name + &quot;. and I&#39;m &quot; + age + &quot; years old.&quot;);\r\n            }\r\n\r\n        }\r\n\r\n        public static void main(String[] args) throws IOException, ClassNotFoundException {\r\n\r\n            ObjectOutput objectOutput = new ObjectOutputStream(new FileOutputStream(new File(&quot;tempPath&quot;)));\r\n\r\n            Employee employee = new Employee();\r\n            employee.name = &quot;Tom&quot;;\r\n            employee.age = 41;\r\n            employee.leader = employee;\r\n            employee.say();\r\n\r\n            objectOutput.writeObject(employee);\r\n\r\n            ObjectInput objectInput = new ObjectInputStream(new FileInputStream(new File(&quot;tempPath&quot;)));\r\n\r\n            Employee readEmployee = (Employee) objectInput.readObject();\r\n\r\n            readEmployee.say();\r\n            readEmployee.leader.say();\r\n        }\r\n    }\r\n","title":"How does java serialization solve circular reference problems?","body":"<p>I did a serialization test with Java. I found that Java serialization can handle circular references properly. But how does Java serialization solve circular reference problems?</p>\n\n<p>The following code works correctly:</p>\n\n<pre><code>public class SerializableTest {\n\n    static class Employee implements Serializable{\n\n        private static final long serialVersionUID = 1L;\n\n        String name;\n\n        int age;\n\n        Employee leader;\n\n        public void say(){\n            System.out.println(\"my name is \" + name + \". and I'm \" + age + \" years old.\");\n        }\n\n    }\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n\n        ObjectOutput objectOutput = new ObjectOutputStream(new FileOutputStream(new File(\"tempPath\")));\n\n        Employee employee = new Employee();\n        employee.name = \"Tom\";\n        employee.age = 41;\n        employee.leader = employee;\n        employee.say();\n\n        objectOutput.writeObject(employee);\n\n        ObjectInput objectInput = new ObjectInputStream(new FileInputStream(new File(\"tempPath\")));\n\n        Employee readEmployee = (Employee) objectInput.readObject();\n\n        readEmployee.say();\n        readEmployee.leader.say();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security","vaadin","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":219684,"reputation":37267,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":14,"creation_date":1453985590,"post_id":23648756,"comment_id":57846756,"body_markdown":"This still causes / to redirect to /login, and /login to serve a login form","body":"This still causes / to redirect to /login, and /login to serve a login form"},{"owner":{"account_id":102371,"reputation":460,"user_id":274825,"accept_rate":57,"display_name":"Krum"},"score":25,"creation_date":1525447309,"post_id":23648756,"comment_id":87373802,"body_markdown":"this has been deprecated.  noobdev now has the correct answer.","body":"this has been deprecated.  noobdev now has the correct answer."},{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":3,"creation_date":1673102182,"post_id":23648756,"comment_id":132424556,"body_markdown":"Not working in 2023","body":"Not working in 2023"}],"tags":[],"owner":{"account_id":4277851,"reputation":51792,"user_id":3498062,"display_name":"Andrei Stefan"},"comment_count":3,"down_vote_count":5,"up_vote_count":40,"is_accepted":true,"score":35,"last_activity_date":1400055263,"creation_date":1400054213,"answer_id":23648756,"question_id":23636368,"body_markdown":"The default security in Spring Boot is Basic. You could disable it by setting `security.basic.enabled=false`. More about this [here][1] and [here][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security\r\n  [2]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#common-application-properties","title":"How to disable spring-security login screen?","body":"<p>The default security in Spring Boot is Basic. You could disable it by setting <code>security.basic.enabled=false</code>. More about this <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-security\" rel=\"noreferrer\">here</a> and <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#common-application-properties\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":3725987,"reputation":71,"user_id":3099886,"display_name":"Dosi Bingov"},"score":0,"creation_date":1550742465,"post_id":46155567,"comment_id":96384452,"body_markdown":"I like your solution. Thanks!","body":"I like your solution. Thanks!"},{"owner":{"account_id":971267,"reputation":1259,"user_id":993802,"accept_rate":66,"display_name":"peekay"},"score":1,"creation_date":1554753960,"post_id":46155567,"comment_id":97860437,"body_markdown":"This config does not change anything as far as I can tell.  I thought that providing your own config took precedence over spring config?","body":"This config does not change anything as far as I can tell.  I thought that providing your own config took precedence over spring config?"},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":16,"creation_date":1570101892,"post_id":46155567,"comment_id":102812195,"body_markdown":"You can add `.formLogin().disable()` as well to remove the login screen","body":"You can add <code>.formLogin().disable()</code> as well to remove the login screen"},{"owner":{"account_id":6022505,"reputation":3558,"user_id":4729203,"accept_rate":88,"display_name":"wonsuc"},"score":0,"creation_date":1573482698,"post_id":46155567,"comment_id":103886527,"body_markdown":"This actually works on the current latest version of `Spring Boot 2.2.1.BUILD-SNAPSHOT`.","body":"This actually works on the current latest version of <code>Spring Boot 2.2.1.BUILD-SNAPSHOT</code>."},{"owner":{"account_id":7246645,"reputation":49,"user_id":5528325,"display_name":"user771"},"score":1,"creation_date":1599564451,"post_id":46155567,"comment_id":112806513,"body_markdown":"Ok if i use above solution, login page is gone. But still getting 403 from POST requests. Anyone know how to solve this ?","body":"Ok if i use above solution, login page is gone. But still getting 403 from POST requests. Anyone know how to solve this ?"},{"owner":{"account_id":18479864,"reputation":349,"user_id":13462325,"display_name":"Prashant S"},"score":0,"creation_date":1632768278,"post_id":46155567,"comment_id":122577582,"body_markdown":"Above did work only for GET http calls. For POST review my comments below","body":"Above did work only for GET http calls. For POST review my comments below"},{"owner":{"account_id":12519323,"reputation":179,"user_id":9111270,"display_name":"alexdefelipe"},"score":1,"creation_date":1658162845,"post_id":46155567,"comment_id":128977887,"body_markdown":"In version 5.7.0-M2, [the use of WebSecurityConfigurerAdapter has been deprecated](https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter). Now it should be done by registering a SecurityFilterChain component.","body":"In version 5.7.0-M2, <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">the use of WebSecurityConfigurerAdapter has been deprecated</a>. Now it should be done by registering a SecurityFilterChain component."}],"tags":[],"owner":{"account_id":5301780,"reputation":1233,"user_id":4233170,"display_name":"noobdev"},"comment_count":7,"down_vote_count":3,"up_vote_count":108,"is_accepted":false,"score":105,"last_activity_date":1505132124,"creation_date":1505132124,"answer_id":46155567,"question_id":23636368,"body_markdown":"you can use java based configuration like this : \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\t    @Override\r\n\t    protected void configure(HttpSecurity security) throws Exception\r\n\t    {\r\n\t\t security.httpBasic().disable();\r\n\t    }\r\n    }\r\nand restart your application if it&#39;s refresh automatically.","title":"How to disable spring-security login screen?","body":"<p>you can use java based configuration like this : </p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity security) throws Exception\n    {\n     security.httpBasic().disable();\n    }\n}\n</code></pre>\n\n<p>and restart your application if it's refresh automatically.</p>\n"},{"comments":[{"owner":{"account_id":1970166,"reputation":2148,"user_id":1769353,"accept_rate":88,"display_name":"Amir Kost"},"score":2,"creation_date":1540730081,"post_id":51908496,"comment_id":92963651,"body_markdown":"Disabling Spring Security is a bad solution. Applications should be secure!","body":"Disabling Spring Security is a bad solution. Applications should be secure!"},{"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"score":0,"creation_date":1540815752,"post_id":51908496,"comment_id":92990187,"body_markdown":"OP requests only to have certain classes available on the classpath, not to enable spring security. Spring Boot will enable Spring security automatically when it finds the jars on the classpath. My solution will make sure that this does not happen.","body":"OP requests only to have certain classes available on the classpath, not to enable spring security. Spring Boot will enable Spring security automatically when it finds the jars on the classpath. My solution will make sure that this does not happen."}],"tags":[],"owner":{"account_id":4154011,"reputation":826,"user_id":6113718,"accept_rate":75,"display_name":"Michiel Haisma"},"comment_count":2,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1534594127,"creation_date":1534594127,"answer_id":51908496,"question_id":23636368,"body_markdown":"Disable the default spring security by excluding it from the autoconfiguration. Add `SecurityAutoConfiguration.class` to the `exclude` property of the `@SpringBootApplication` annotation on your main class. Like follows:\r\n\r\n    @SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\r\n    public class MyApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(MyApplication.class, args);\r\n        }\r\n    }\r\n","title":"How to disable spring-security login screen?","body":"<p>Disable the default spring security by excluding it from the autoconfiguration. Add <code>SecurityAutoConfiguration.class</code> to the <code>exclude</code> property of the <code>@SpringBootApplication</code> annotation on your main class. Like follows:</p>\n\n<pre><code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\npublic class MyApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7708814,"reputation":24811,"user_id":5838902,"display_name":"Fangming"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1556598308,"creation_date":1556598308,"answer_id":55913967,"question_id":23636368,"body_markdown":"There seems to be a simpler solution.\r\n\r\nSimply put this annotationabove your main class or the same place as your `SpingBootApplication` annotation\r\n\r\n`@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class})`","title":"How to disable spring-security login screen?","body":"<p>There seems to be a simpler solution.</p>\n\n<p>Simply put this annotationabove your main class or the same place as your <code>SpingBootApplication</code> annotation</p>\n\n<p><code>@EnableAutoConfiguration(exclude = {org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration.class})</code></p>\n"},{"comments":[{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":1,"creation_date":1673102330,"post_id":56483549,"comment_id":132424588,"body_markdown":"It&#39;s a big NO. Not solving the issue, just introducing a dirty hack.","body":"It&#39;s a big NO. Not solving the issue, just introducing a dirty hack."}],"tags":[],"owner":{"account_id":16086079,"reputation":9,"user_id":11610753,"display_name":"Jefferson David Casta&#241;eda"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1559848572,"creation_date":1559847485,"answer_id":56483549,"question_id":23636368,"body_markdown":"If someone still needs the solution, put a method in the REST controller like this:\r\n```\r\n@RestController\r\npublic class myRestController{\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String redirectTo(){\r\n        return &quot;yourRedirectLink&quot;;\r\n    }\r\n    \r\n}\r\n```\r\nThis solution is very good to work with spring and react packed in a jar","title":"How to disable spring-security login screen?","body":"<p>If someone still needs the solution, put a method in the REST controller like this:</p>\n\n<pre><code>@RestController\npublic class myRestController{\n\n    @GetMapping(\"/login\")\n    public String redirectTo(){\n        return \"yourRedirectLink\";\n    }\n\n}\n</code></pre>\n\n<p>This solution is very good to work with spring and react packed in a jar</p>\n"},{"comments":[{"owner":{"account_id":3782313,"reputation":129,"user_id":5164808,"display_name":"Ashutosh Agrawal"},"score":2,"creation_date":1591618246,"post_id":57046306,"comment_id":110115024,"body_markdown":"When this JAVA syntax got changed?","body":"When this JAVA syntax got changed?"},{"owner":{"account_id":7544713,"reputation":179,"user_id":5728198,"display_name":"Amarnath Reddy Dornala"},"score":0,"creation_date":1613471712,"post_id":57046306,"comment_id":117078922,"body_markdown":"It&#39;s Kotlin syntax.","body":"It&#39;s Kotlin syntax."},{"owner":{"account_id":1024933,"reputation":703,"user_id":1034461,"display_name":"horvoje"},"score":1,"creation_date":1673101867,"post_id":57046306,"comment_id":132424487,"body_markdown":"This is not Java. Why do you push it here?","body":"This is not Java. Why do you push it here?"},{"owner":{"account_id":1448448,"reputation":685,"user_id":1366169,"accept_rate":80,"display_name":"Bernhard"},"score":0,"creation_date":1693755385,"post_id":57046306,"comment_id":135799392,"body_markdown":"Because the configuration is the same no matter if its java or kotlin?","body":"Because the configuration is the same no matter if its java or kotlin?"}],"tags":[],"owner":{"account_id":1998422,"reputation":3866,"user_id":1790045,"accept_rate":56,"display_name":"nilobarp"},"comment_count":4,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1563220098,"creation_date":1563220098,"answer_id":57046306,"question_id":23636368,"body_markdown":"To completely disable the login route use Spring Security configuration object\r\n\r\nThe following snippet uses `org.springframework.boot:2.1.6.RELEASE`\r\n\r\n```kotlin\r\n@Configuration\r\n@EnableWebSecurity\r\nclass SecurityConfig : WebSecurityConfigurerAdapter() {\r\n  override fun configure(security: HttpSecurity) {\r\n    super.configure(security)\r\n\r\n    security.httpBasic().disable()\r\n\r\n    security.cors().and().csrf().disable().authorizeRequests()\r\n      .anyRequest().authenticated()\r\n      .and().formLogin().disable() // &lt;-- this will disable the login route\r\n      .addFilter(JWTAuthorizationFilter(authenticationManager()))\r\n      .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n  }\r\n\r\n  @Bean\r\n  fun corsConfigurationSource(): CorsConfigurationSource {\r\n    val source = UrlBasedCorsConfigurationSource()\r\n    val config = CorsConfiguration().applyPermitDefaultValues()\r\n    config.addExposedHeader(&quot;Authorization&quot;)\r\n    source.registerCorsConfiguration(&quot;/**&quot;, config)\r\n    return source\r\n  }\r\n}\r\n```","title":"How to disable spring-security login screen?","body":"<p>To completely disable the login route use Spring Security configuration object</p>\n\n<p>The following snippet uses <code>org.springframework.boot:2.1.6.RELEASE</code></p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\nclass SecurityConfig : WebSecurityConfigurerAdapter() {\n  override fun configure(security: HttpSecurity) {\n    super.configure(security)\n\n    security.httpBasic().disable()\n\n    security.cors().and().csrf().disable().authorizeRequests()\n      .anyRequest().authenticated()\n      .and().formLogin().disable() // &lt;-- this will disable the login route\n      .addFilter(JWTAuthorizationFilter(authenticationManager()))\n      .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n  }\n\n  @Bean\n  fun corsConfigurationSource(): CorsConfigurationSource {\n    val source = UrlBasedCorsConfigurationSource()\n    val config = CorsConfiguration().applyPermitDefaultValues()\n    config.addExposedHeader(\"Authorization\")\n    source.registerCorsConfiguration(\"/**\", config)\n    return source\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5227441,"reputation":515,"user_id":4179039,"display_name":"Semir Umut Kurt"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1581934622,"creation_date":1576343390,"answer_id":59337338,"question_id":23636368,"body_markdown":"On the main spring-boot application class (the class which has @SpringBootApplication annotation)\r\n\r\n    @SpringBootApplication(exclude={SecurityAutoConfiguration.class})\r\n\r\n","title":"How to disable spring-security login screen?","body":"<p>On the main spring-boot application class (the class which has @SpringBootApplication annotation)</p>\n\n<pre><code>@SpringBootApplication(exclude={SecurityAutoConfiguration.class})\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"score":2,"creation_date":1639089874,"post_id":69351853,"comment_id":124267109,"body_markdown":"This worked as of   &#39;org.springframework.boot&#39; version &#39;2.3.4.RELEASE&#39;","body":"This worked as of   &#39;org.springframework.boot&#39; version &#39;2.3.4.RELEASE&#39;"}],"tags":[],"owner":{"account_id":18479864,"reputation":349,"user_id":13462325,"display_name":"Prashant S"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1632768453,"creation_date":1632768453,"answer_id":69351853,"question_id":23636368,"body_markdown":"This worked for me \r\n  \r\n\r\n                @Configuration\r\n                @EnableWebSecurity\r\n                public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n                    @Override\r\n                    protected void configure(HttpSecurity security) throws Exception\r\n                    {\r\n                     //security.httpBasic().disable(); // Did work only for GET     \r\n                     security.csrf().disable().authorizeRequests().anyRequest().permitAll(); // Works for GET, POST, PUT, DELETE\r\n                    }\r\n                }          \r\n\r\n  ","title":"How to disable spring-security login screen?","body":"<p>This worked for me</p>\n<pre><code>            @Configuration\n            @EnableWebSecurity\n            public class SecurityConfig extends WebSecurityConfigurerAdapter {\n                @Override\n                protected void configure(HttpSecurity security) throws Exception\n                {\n                 //security.httpBasic().disable(); // Did work only for GET     \n                 security.csrf().disable().authorizeRequests().anyRequest().permitAll(); // Works for GET, POST, PUT, DELETE\n                }\n            }          \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4514046,"reputation":749,"user_id":3669400,"display_name":"Randy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664705201,"creation_date":1639092744,"answer_id":70298042,"question_id":23636368,"body_markdown":"This is to help anyone else struggling to remove the default Spring Boot login screen and have some secured paths.  This worked for me with Spring Boot 2.3.4 and the spring-boot-security starter and this article: https://www.toptal.com/spring/spring-security-tutorial helped me.  This config allows a GET to /api/config-props and /actuator/health but requires auth  on any other actuator path or any other api path.  Then finally allows a GET for any other bit that might be served static content in /resources or /public etc.\r\n\r\n    @EnableWebSecurity\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n      @Override\r\n      protected void configure(HttpSecurity security) throws Exception {\r\n        // Enable CORS and disable CSRF\r\n        security = security.cors().and().csrf().disable();\r\n    \r\n        // Set session management to stateless\r\n        security = security\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and();\r\n    \r\n        // Set permissions on endpoints\r\n        security.authorizeRequests()\r\n                // Our public endpoints, secured endpoints and then open everything else that is static resource stuff\r\n                .antMatchers(HttpMethod.GET, &quot;/api/config-props&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\r\n                .antMatchers(&quot;/actuator**&quot;).authenticated()\r\n                .antMatchers(&quot;/api/**&quot;).authenticated()\r\n                .antMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll();\r\n      }\r\n    }","title":"How to disable spring-security login screen?","body":"<p>This is to help anyone else struggling to remove the default Spring Boot login screen and have some secured paths.  This worked for me with Spring Boot 2.3.4 and the spring-boot-security starter and this article: <a href=\"https://www.toptal.com/spring/spring-security-tutorial\" rel=\"nofollow noreferrer\">https://www.toptal.com/spring/spring-security-tutorial</a> helped me.  This config allows a GET to /api/config-props and /actuator/health but requires auth  on any other actuator path or any other api path.  Then finally allows a GET for any other bit that might be served static content in /resources or /public etc.</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n  @Override\n  protected void configure(HttpSecurity security) throws Exception {\n    // Enable CORS and disable CSRF\n    security = security.cors().and().csrf().disable();\n\n    // Set session management to stateless\n    security = security\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and();\n\n    // Set permissions on endpoints\n    security.authorizeRequests()\n            // Our public endpoints, secured endpoints and then open everything else that is static resource stuff\n            .antMatchers(HttpMethod.GET, &quot;/api/config-props&quot;).permitAll()\n            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()\n            .antMatchers(&quot;/actuator**&quot;).authenticated()\n            .antMatchers(&quot;/api/**&quot;).authenticated()\n            .antMatchers(HttpMethod.GET, &quot;/**&quot;).permitAll();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24308328,"reputation":9,"user_id":18250744,"display_name":"Shubham Freelancer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646719147,"creation_date":1646719147,"answer_id":71390629,"question_id":23636368,"body_markdown":"Just remove/comment out below Dependencies from your Project&#39;s POM.xml files:\r\n```\r\n    &lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\r\n```\r\nand\r\n\r\n```\r\n    &lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\r\n```","title":"How to disable spring-security login screen?","body":"<p>Just remove/comment out below Dependencies from your Project's POM.xml files:</p>\n<pre><code>    &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n</code></pre>\n<p>and</p>\n<pre><code>    &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;scope&gt;test&lt;/scope&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2349320,"reputation":135,"user_id":2058617,"display_name":"Saleem gagguturu"},"score":1,"creation_date":1689084700,"post_id":73081927,"comment_id":135161209,"body_markdown":"In Spring boot 3, you can do `http.httpBasic(AbstractHttpConfigurer::disable).build();`","body":"In Spring boot 3, you can do <code>http.httpBasic(AbstractHttpConfigurer::disable).build();</code>"}],"tags":[],"owner":{"account_id":18044751,"reputation":71,"user_id":13116044,"display_name":"Pouya"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1658817546,"creation_date":1658499913,"answer_id":73081927,"question_id":23636368,"body_markdown":"You can use this code in new versions of spring boot (3.0.0-m4) and reactive model ( webflux )\r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    public class SecurityConfig {\r\n       @Bean\r\n        public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .httpBasic().disable()\r\n                .build();\r\n    }\r\n    }\r\n","title":"How to disable spring-security login screen?","body":"<p>You can use this code in new versions of spring boot (3.0.0-m4) and reactive model ( webflux )</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfig {\n   @Bean\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n    return http\n            .httpBasic().disable()\n            .build();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26780346,"reputation":1,"user_id":20375285,"display_name":"Jean-Claude MBENG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669880459,"creation_date":1669500230,"answer_id":74585909,"question_id":23636368,"body_markdown":"This code perfectly worked for me, just add it to the main Class of your project\r\n\r\n    @SpringBootApplication(exclude = { SecurityAutoConfiguration.class })","title":"How to disable spring-security login screen?","body":"<p>This code perfectly worked for me, just add it to the main Class of your project</p>\n<pre><code>@SpringBootApplication(exclude = { SecurityAutoConfiguration.class })\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15401162,"reputation":395,"user_id":11110610,"display_name":"Himmels DJ"},"score":0,"creation_date":1674305387,"post_id":75064259,"comment_id":132688768,"body_markdown":"Where is this code implemented ?  And how does security.exceptionHandling().authenticationEntryPoint disables the login form ? Any links?","body":"Where is this code implemented ?  And how does security.exceptionHandling().authenticationEntryPoint disables the login form ? Any links?"}],"tags":[],"owner":{"account_id":19961933,"reputation":21,"user_id":14629312,"display_name":"martin195"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673310218,"creation_date":1673310218,"answer_id":75064259,"question_id":23636368,"body_markdown":"For me `.httpBasic().disable()` was not working, in browser, if unauthorised it still showed login form. \r\n\r\nWhat helped for me (webflux):\r\n\r\n    security.exceptionHandling().authenticationEntryPoint { exchange, ex -&gt;\r\n        exchange.response.statusCode = HttpStatus.UNAUTHORIZED\r\n    \texchange.response.setComplete()\r\n    }\r\nBehind the scene, `WWW-Authenticate` http header causes it, and Spring adds it in `HttpBasicServerAuthenticationEntryPoint` class.","title":"How to disable spring-security login screen?","body":"<p>For me <code>.httpBasic().disable()</code> was not working, in browser, if unauthorised it still showed login form.</p>\n<p>What helped for me (webflux):</p>\n<pre><code>security.exceptionHandling().authenticationEntryPoint { exchange, ex -&gt;\n    exchange.response.statusCode = HttpStatus.UNAUTHORIZED\n    exchange.response.setComplete()\n}\n</code></pre>\n<p>Behind the scene, <code>WWW-Authenticate</code> http header causes it, and Spring adds it in <code>HttpBasicServerAuthenticationEntryPoint</code> class.</p>\n"},{"tags":[],"owner":{"account_id":16731092,"reputation":45,"user_id":12093411,"display_name":"Suriya Ganesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674997577,"creation_date":1674997577,"answer_id":75275123,"question_id":23636368,"body_markdown":"Please note that the use of WebSecurityConfigurerAdapter has been deprecated in the recent Spring versions instead you should be using the SecurityFilterChain as per Spring Documentation \r\nhttps://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\r\n\r\nsharing the below code for the same\r\n\r\n``` \r\n    @Configuration\r\n    public class SecurityConfiguration {\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                .authorizeHttpRequests((authz) -&gt; authz\r\n                    .anyRequest().authenticated()\r\n                )\r\n                .httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n    \treturn (web) -&gt; web.ignoring().requestMatchers(&quot;/*&quot;);\r\n    }\r\n    }\r\n\r\n```\r\n\r\n\r\nIn the RequestMatchers I have allowed all endpoints without Spring Security whereas you can specify the only endpoints which needs to be exposed without Spring Security","title":"How to disable spring-security login screen?","body":"<p>Please note that the use of WebSecurityConfigurerAdapter has been deprecated in the recent Spring versions instead you should be using the SecurityFilterChain as per Spring Documentation\n<a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter</a></p>\n<p>sharing the below code for the same</p>\n<pre><code>    @Configuration\n    public class SecurityConfiguration {\n        @Bean\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n            http\n                .authorizeHttpRequests((authz) -&gt; authz\n                    .anyRequest().authenticated()\n                )\n                .httpBasic(withDefaults());\n            return http.build();\n        }\n    \n        @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/*&quot;);\n    }\n    }\n\n</code></pre>\n<p>In the RequestMatchers I have allowed all endpoints without Spring Security whereas you can specify the only endpoints which needs to be exposed without Spring Security</p>\n"},{"tags":[],"owner":{"account_id":8341024,"reputation":1015,"user_id":6266336,"accept_rate":38,"display_name":"Diana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683205071,"creation_date":1683205071,"answer_id":76173480,"question_id":23636368,"body_markdown":"# Without WebSecurityConfigurerAdapter\r\n\r\n**Kotlin**\r\n\r\n```\r\n@Configuration\r\nclass SecurityConfiguration {\r\n    @Bean\r\n    @Throws(Exception::class)\r\n    fun filterChain(http: HttpSecurity): SecurityFilterChain {\r\n        return http\r\n            .httpBasic().disable()\r\n            .build()\r\n    }\r\n}\r\n\r\n```","title":"How to disable spring-security login screen?","body":"<h1>Without WebSecurityConfigurerAdapter</h1>\n<p><strong>Kotlin</strong></p>\n<pre><code>@Configuration\nclass SecurityConfiguration {\n    @Bean\n    @Throws(Exception::class)\n    fun filterChain(http: HttpSecurity): SecurityFilterChain {\n        return http\n            .httpBasic().disable()\n            .build()\n    }\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4225724,"reputation":66,"user_id":3459299,"display_name":"Andr&#233; Jakobsson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690450850,"creation_date":1690450850,"answer_id":76778447,"question_id":23636368,"body_markdown":"Example that works using Spring 6, Boot 3, Java 17. \r\n\r\n```\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\r\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\r\nimport org.springframework.security.web.server.SecurityWebFilterChain;\r\n\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class WebConfig {\r\n    @Bean\r\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\r\n        return http\r\n                .httpBasic(ServerHttpSecurity.HttpBasicSpec::disable)\r\n                .build();\r\n    }\r\n}\r\n```\r\n\r\nAlso don&#39;t forget to add your required modules if you haven&#39;t already. \r\n\r\n```\r\n    requires spring.webflux;\r\n    requires spring.security.config;\r\n    requires spring.security.web;\r\n```\r\n\r\nYou should of course replace your basic HTTP authentication with something more secure.\r\n","title":"How to disable spring-security login screen?","body":"<p>Example that works using Spring 6, Boot 3, Java 17.</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.reactive.EnableWebFluxSecurity;\nimport org.springframework.security.config.web.server.ServerHttpSecurity;\nimport org.springframework.security.web.server.SecurityWebFilterChain;\n\n@Configuration\n@EnableWebFluxSecurity\npublic class WebConfig {\n    @Bean\n    public SecurityWebFilterChain filterChain(ServerHttpSecurity http) {\n        return http\n                .httpBasic(ServerHttpSecurity.HttpBasicSpec::disable)\n                .build();\n    }\n}\n</code></pre>\n<p>Also don't forget to add your required modules if you haven't already.</p>\n<pre><code>    requires spring.webflux;\n    requires spring.security.config;\n    requires spring.security.web;\n</code></pre>\n<p>You should of course replace your basic HTTP authentication with something more secure.</p>\n"},{"tags":[],"owner":{"account_id":7402185,"reputation":1651,"user_id":5632255,"accept_rate":88,"display_name":"Mehdi Rahimi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694848705,"creation_date":1694848705,"answer_id":77116756,"question_id":23636368,"body_markdown":"I&#39;m using Spring-Boot v3\r\n---------------------------\r\nand as *[Spring official blog][1]* said:\r\n\r\n&gt; In Spring Security 5.7.0-M2, `WebSecurityConfigurerAdapter` depricated.\r\n\r\nand `SecurityFilterChain` is recommended **So I created a configuration class as:**\r\n  \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            return http.authorizeHttpRequests((auth) -&gt; auth.anyRequest().permitAll()).build();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"How to disable spring-security login screen?","body":"<h2>I'm using Spring-Boot v3</h2>\n<p>and as <em><a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">Spring official blog</a></em> said:</p>\n<blockquote>\n<p>In Spring Security 5.7.0-M2, <code>WebSecurityConfigurerAdapter</code> depricated.</p>\n</blockquote>\n<p>and <code>SecurityFilterChain</code> is recommended <strong>So I created a configuration class as:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http.authorizeHttpRequests((auth) -&gt; auth.anyRequest().permitAll()).build();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29668709,"reputation":11,"user_id":22738518,"display_name":"Trung"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697259862,"creation_date":1697259862,"answer_id":77291688,"question_id":23636368,"body_markdown":"\r\n\r\n\r\n    @Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().antMatchers(&quot;/login&quot;);\r\n    }\r\n\r\n\r\nyou can use this to deny access to the /login URL, which will prevent the login page of spring security from loading.\r\nThe **WebSecurityCustomizer** is a callback interface that can be used to customize WebSecurity.\r\n[WebSecurityCustomizer][1]\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"How to disable spring-security login screen?","body":"<pre><code>@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; web.ignoring().antMatchers(&quot;/login&quot;);\n}\n</code></pre>\n<p>you can use this to deny access to the /login URL, which will prevent the login page of spring security from loading.\nThe <strong>WebSecurityCustomizer</strong> is a callback interface that can be used to customize WebSecurity.\n<a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">WebSecurityCustomizer</a></p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147522,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"accepted_answer_id":23648756,"answer_count":18,"score":63,"last_activity_date":1697259862,"creation_date":1399997352,"question_id":23636368,"body_markdown":"I&#39;m using `spring-boot-starter-security` dependency, to make use of several classes that come with `spring-security`. But as I want to integrate it in an existing `vaadin` application, I only want to make use of the classes, and not of the default login/auth screen of spring.\r\n\r\nHow can I disable this screen?\r\n\r\nI cannot make any configurations by extending `WebSecurityConfigurerAdapter` as my main entry class already `extends SpringBootServletInitializer`. Also, vaadin applications basically run on the same URL path all the time and use internal navigation.\r\n\r\n    @EnableAutoConfiguration\r\n    public class MyApp extends SpringBootServletInitializer { \r\n        \r\n        \t@Override\r\n        \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        \t\treturn application.sources(MyApp.class);\r\n        \t}\r\n        \t  \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSpringApplication.run(MyApp.class, args);\r\n        \t}\r\n    }\r\n\r\nSo, what could I do to disable the login screen, but though make use of spring security features?","title":"How to disable spring-security login screen?","body":"<p>I'm using <code>spring-boot-starter-security</code> dependency, to make use of several classes that come with <code>spring-security</code>. But as I want to integrate it in an existing <code>vaadin</code> application, I only want to make use of the classes, and not of the default login/auth screen of spring.</p>\n\n<p>How can I disable this screen?</p>\n\n<p>I cannot make any configurations by extending <code>WebSecurityConfigurerAdapter</code> as my main entry class already <code>extends SpringBootServletInitializer</code>. Also, vaadin applications basically run on the same URL path all the time and use internal navigation.</p>\n\n<pre><code>@EnableAutoConfiguration\npublic class MyApp extends SpringBootServletInitializer { \n\n        @Override\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n            return application.sources(MyApp.class);\n        }\n\n        public static void main(String[] args) {\n            SpringApplication.run(MyApp.class, args);\n        }\n}\n</code></pre>\n\n<p>So, what could I do to disable the login screen, but though make use of spring security features?</p>\n"},{"tags":["java","concurrency","parallel-processing","java-stream","completable-future"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":9,"creation_date":1570930633,"post_id":58359879,"comment_id":103072144,"body_markdown":"You can&#39;t. If this would be possible, you would know how many items each future would yield. What is possible is to turn it into a `CompletableFuture&lt;Stream&lt;Item&gt;&gt;`.","body":"You can&#39;t. If this would be possible, you would know how many items each future would yield. What is possible is to turn it into a <code>CompletableFuture&lt;Stream&lt;Item&gt;&gt;</code>."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695718337,"post_id":58359879,"comment_id":136058486,"body_markdown":"I have submitted a solution that meets the requirements listed. Please read it in its entirety, as it has some important details and unintuitive points.","body":"I have submitted a solution that meets the requirements listed. Please read it in its entirety, as it has some important details and unintuitive points."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1695787529,"post_id":58359879,"comment_id":136069486,"body_markdown":"As others have said, it&#39;s only possible if you know the list sizes in advance. Otherwise there&#39;s no way to know whether a given future is waiting on the current list or the next list in the source stream. Unless you&#39;re willing to wait on each list before proceeding to the next. Or if order doesn&#39;t matter at all, you can stream each list as it&#39;s returned.","body":"As others have said, it&#39;s only possible if you know the list sizes in advance. Otherwise there&#39;s no way to know whether a given future is waiting on the current list or the next list in the source stream. Unless you&#39;re willing to wait on each list before proceeding to the next. Or if order doesn&#39;t matter at all, you can stream each list as it&#39;s returned."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1696733287,"post_id":58359879,"comment_id":136190520,"body_markdown":"@AlexR So, what is the actual requirement? Do you want to see a coding approach in JDK 21?","body":"@AlexR So, what is the actual requirement? Do you want to see a coding approach in JDK 21?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696849762,"post_id":58359879,"comment_id":136201249,"body_markdown":"Do you need to retain the order of the elements (order within the list and/or order of the lists themselves)?","body":"Do you need to retain the order of the elements (order within the list and/or order of the lists themselves)?"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696868803,"post_id":58359879,"comment_id":136205144,"body_markdown":"@Holger no, I do not. The only order that matters is to be able to process the task results in completion order for the purpose of avoiding unnecessary blocking.","body":"@Holger no, I do not. The only order that matters is to be able to process the task results in completion order for the purpose of avoiding unnecessary blocking."}],"answers":[{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696728901,"post_id":58461457,"comment_id":136190310,"body_markdown":"I still don&#39;t understand this answer. I wonder if it might be easier to understand if it used `CompletableFuture&lt;List&lt;Integer&gt;&gt;` in place of `CompletableFuture&lt;List&lt;Object&gt;&gt;` and each `getDiceRoll()` had a random `sleep()` within it.","body":"I still don&#39;t understand this answer. I wonder if it might be easier to understand if it used <code>CompletableFuture&lt;List&lt;Integer&gt;&gt;</code> in place of <code>CompletableFuture&lt;List&lt;Object&gt;&gt;</code> and each <code>getDiceRoll()</code> had a random <code>sleep()</code> within it."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1696767393,"post_id":58461457,"comment_id":136192944,"body_markdown":"The dice roll is just for creating the `CompletableFuture&lt;List&lt;Object&gt;&gt;`. It has as many elements as the dice will roll. If a general method as you requested would exist, I could get the result of the dice roll without waiting for it.","body":"The dice roll is just for creating the <code>CompletableFuture&lt;List&lt;Object&gt;&gt;</code>. It has as many elements as the dice will roll. If a general method as you requested would exist, I could get the result of the dice roll without waiting for it."}],"tags":[],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571469827,"creation_date":1571469827,"answer_id":58461457,"question_id":58359879,"body_markdown":"As I wrote in my comment, this is impossible.\r\n\r\nConsider a some arbitrary service, which will return a `CompletableFuture&lt;Integer&gt;`:\r\n\r\n    CompletableFuture&lt;Integer&gt; getDiceRoll();\r\n\r\nI can now convert this `CompletableFuture&lt;Integer&gt;` to a `Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt;` without any problem:\r\n\r\n    Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt; futureList = Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])));\r\n\r\nLet&#39;s suppose there would be a general way to turn a `Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt;` into a `Stream&lt;CompletableFuture&lt;T&gt;&gt;`:\r\n\r\n    &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt; magic(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; arg);\r\n\r\nThen I can do the following:\r\n\r\n    int diceRoll = magic(Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])))).count();\r\n\r\nWait, what?  \r\nI am now able to get an arbitrary integer out of a `CompletableFuture`.\r\nWhich means, with some engineering effort I can get all the information out of a CompletableFuture - after all, memory is just some numbers.\r\n\r\nSo we have to conclude that a method like `magic` can not exist, without violating the time fabric.  \r\nAnd this is the answer: There is no such method, because it can not exist.","title":"How to flatten a list inside a stream of completable futures?","body":"<p>As I wrote in my comment, this is impossible.</p>\n\n<p>Consider a some arbitrary service, which will return a <code>CompletableFuture&lt;Integer&gt;</code>:</p>\n\n<pre><code>CompletableFuture&lt;Integer&gt; getDiceRoll();\n</code></pre>\n\n<p>I can now convert this <code>CompletableFuture&lt;Integer&gt;</code> to a <code>Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt;</code> without any problem:</p>\n\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Object&gt;&gt;&gt; futureList = Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])));\n</code></pre>\n\n<p>Let's suppose there would be a general way to turn a <code>Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt;</code> into a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code>:</p>\n\n<pre><code>&lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt; magic(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; arg);\n</code></pre>\n\n<p>Then I can do the following:</p>\n\n<pre><code>int diceRoll = magic(Stream.of(getDiceRoll().thenApply(n -&gt; List.of(new Object[n])))).count();\n</code></pre>\n\n<p>Wait, what?<br>\nI am now able to get an arbitrary integer out of a <code>CompletableFuture</code>.\nWhich means, with some engineering effort I can get all the information out of a CompletableFuture - after all, memory is just some numbers.</p>\n\n<p>So we have to conclude that a method like <code>magic</code> can not exist, without violating the time fabric.<br>\nAnd this is the answer: There is no such method, because it can not exist.</p>\n"},{"tags":[],"owner":{"account_id":21653617,"reputation":41,"user_id":15973811,"display_name":"Nishika"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1622459714,"creation_date":1621907655,"answer_id":67680771,"question_id":58359879,"body_markdown":"Agreed with Johannes Kuhn. You can&#39;t know Futures&#39;s state while it&#39;s still executing and thus can not convert from Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\r\nto Stream&lt;CompletableFuture&lt;Item&gt;&gt; .\r\n\r\n\r\nAlthough the output of stream can be merged using following piece of code - \r\n```java Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; ``` to ```java List&lt;Item&gt; ``` or\r\n\r\n```java List&lt;CompletableFuture&lt;List&lt;AuditRecord&gt;&gt;&gt; ``` to ```java List&lt;Item&gt; ```\r\n\r\n```java   \r\nList&lt;Item&gt; output = input.map(CompletableFuture::join).collect(toList()).stream()\r\n    .flatMap(Collection::stream).collect(toList());\r\n```\r\n\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Agreed with Johannes Kuhn. You can't know Futures's state while it's still executing and thus can not convert from Stream&lt;CompletableFuture&lt;List&gt;&gt;\nto Stream&lt;CompletableFuture&gt; .</p>\n<p>Although the output of stream can be merged using following piece of code -\n<code>java Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; </code> to <code>java List&lt;Item&gt; </code> or</p>\n<p><code>java List&lt;CompletableFuture&lt;List&lt;AuditRecord&gt;&gt;&gt; </code> to <code>java List&lt;Item&gt; </code></p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Item&gt; output = input.map(CompletableFuture::join).collect(toList()).stream()\n    .flatMap(Collection::stream).collect(toList());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1695785920,"post_id":77178436,"comment_id":136069373,"body_markdown":"Interesting response. We have some different assumptions at play here. Per the Java documentation, `CompletableFuture` _represents a future result of an asynchronous computation_. Your code uses a synthetic CompletableFuture that&#39;s not asynchronous at all. The original question is based on the premise that the `CompletableFuture`s run asynchronously, i.e. autonomously in some other thread(s), as afforded in the Java documentation. I&#39;ll clarify this in the question.","body":"Interesting response. We have some different assumptions at play here. Per the Java documentation, <code>CompletableFuture</code> <i>represents a future result of an asynchronous computation</i>. Your code uses a synthetic CompletableFuture that&#39;s not asynchronous at all. The original question is based on the premise that the <code>CompletableFuture</code>s run asynchronously, i.e. autonomously in some other thread(s), as afforded in the Java documentation. I&#39;ll clarify this in the question."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695788206,"post_id":77178436,"comment_id":136069522,"body_markdown":"@AlexR I&#39;m going to need more info than that. What part of my answer do you take issue with? Do you dislike the call to `CompletableFuture::completedFuture`? That can easily be swapped out with `CompletableFuture::supplyAsync` instead. Do you take issue with something else entirely?","body":"@AlexR I&#39;m going to need more info than that. What part of my answer do you take issue with? Do you dislike the call to <code>CompletableFuture::completedFuture</code>? That can easily be swapped out with <code>CompletableFuture::supplyAsync</code> instead. Do you take issue with something else entirely?"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":1,"creation_date":1695840529,"post_id":77178436,"comment_id":136079175,"body_markdown":"specifically your test-case does not contain any asynchronous processing, and so it does not demonstrate how to efficiently wait for a stream of lists of asynchronous processes to complete.","body":"specifically your test-case does not contain any asynchronous processing, and so it does not demonstrate how to efficiently wait for a stream of lists of asynchronous processes to complete."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844410,"post_id":77178436,"comment_id":136079798,"body_markdown":"@AlexR Oh that&#39;s incredibly easy. See where I put `sequential()`? Change that to parallel. It is now running asynchronously.","body":"@AlexR Oh that&#39;s incredibly easy. See where I put <code>sequential()</code>? Change that to parallel. It is now running asynchronously."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844528,"post_id":77178436,"comment_id":136079818,"body_markdown":"@AlexR Please note, making it asynchronous means that you will not get deterministic behaviour. So, it will not always iterate through only the elements it needs to. It will sometimes go a little further than expected, since it is running asynchronously, and thus, checking multiple other lists while checking the one it is currently on.","body":"@AlexR Please note, making it asynchronous means that you will not get deterministic behaviour. So, it will not always iterate through only the elements it needs to. It will sometimes go a little further than expected, since it is running asynchronously, and thus, checking multiple other lists while checking the one it is currently on."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1695844746,"post_id":77178436,"comment_id":136079851,"body_markdown":"I have edited my answer to include both of the changes @AlexR","body":"I have edited my answer to include both of the changes @AlexR"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1695938286,"post_id":77178436,"comment_id":136094104,"body_markdown":"Thank you. I need to review this code a little more carefully.","body":"Thank you. I need to review this code a little more carefully."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696530372,"post_id":77178436,"comment_id":136168561,"body_markdown":"I don&#39;t think this code is correct. I believe the way to prevent blocking would be to spawn a thread for each item in the List as each List becomes available, then have threads populate a queue which in turn is drained by another Stream.","body":"I don&#39;t think this code is correct. I believe the way to prevent blocking would be to spawn a thread for each item in the List as each List becomes available, then have threads populate a queue which in turn is drained by another Stream."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696545873,"post_id":77178436,"comment_id":136170853,"body_markdown":"@AlexR If you did that, you would actually be ***slower*** than my solution. What you have just described is essentially recreating what `Strem::parallel` does. `Stream::parallel` does something similar to what you described, but it uses a Spliterator, which allows it to make a judgement call over when you should and SHOULD NOT use parallelism. If you just indiscriminately threads to grab each element, you would lose performance.","body":"@AlexR If you did that, you would actually be <b><i>slower</i></b> than my solution. What you have just described is essentially recreating what <code>Strem::parallel</code> does. <code>Stream::parallel</code> does something similar to what you described, but it uses a Spliterator, which allows it to make a judgement call over when you should and SHOULD NOT use parallelism. If you just indiscriminately threads to grab each element, you would lose performance."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696545970,"post_id":77178436,"comment_id":136170859,"body_markdown":"Now, if you want to squeeze every drop of performance out of this (and the lists in question are MASSIVE), I could add a few more `Stream::parallel` calls, which would help recreate what you seem to want, but again, it does it conditionally, and only when it proves to itself that it would be beneficial to do so. I have updated my answer to include parallel calls wherever possible.","body":"Now, if you want to squeeze every drop of performance out of this (and the lists in question are MASSIVE), I could add a few more <code>Stream::parallel</code> calls, which would help recreate what you seem to want, but again, it does it conditionally, and only when it proves to itself that it would be beneficial to do so. I have updated my answer to include parallel calls wherever possible."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546239,"post_id":77178436,"comment_id":136170884,"body_markdown":"And even then, I actually have made my solution slower now in certain circumstances. If those sublists are small enough, then my decision to add a parallel call will actually make things slower than if I had done it sequentially. That conditional judgement call I talked about doesn&#39;t always get things right, so switching to all parallel like I just did should only ever be done when it is proven that it is faster. With performance tests.","body":"And even then, I actually have made my solution slower now in certain circumstances. If those sublists are small enough, then my decision to add a parallel call will actually make things slower than if I had done it sequentially. That conditional judgement call I talked about doesn&#39;t always get things right, so switching to all parallel like I just did should only ever be done when it is proven that it is faster. With performance tests."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546713,"post_id":77178436,"comment_id":136170912,"body_markdown":"The only reason we should ever use parallelism is if we can get a speed boost. If we do not get the speed boost over sequential, then parallelism does literally nothing good for you. So do not tie yourself to concepts such as blocking and non-blocking. Tie yourself to the reality of &quot;does this strategy speed up my performance or not?&quot; And it is ***ONLY WHEN YOU KNOW THE ANSWER TO THAT QUESTION*** should you then dig into the next question of &quot;Why?&quot; If you do not follow this order of operations, you run the risk of making false assumptions.","body":"The only reason we should ever use parallelism is if we can get a speed boost. If we do not get the speed boost over sequential, then parallelism does literally nothing good for you. So do not tie yourself to concepts such as blocking and non-blocking. Tie yourself to the reality of &quot;does this strategy speed up my performance or not?&quot; And it is <b><i>ONLY WHEN YOU KNOW THE ANSWER TO THAT QUESTION</i></b> should you then dig into the next question of &quot;Why?&quot; If you do not follow this order of operations, you run the risk of making false assumptions."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696546827,"post_id":77178436,"comment_id":136170920,"body_markdown":"But all that said, after adding all those parallel calls, my solution truly is now non-blocking, even if it is at the detriment of the performance in certain edge cases. I would really love to learn what use case led to you having such strange and contradictory requirements. This whole question may just be an XY problem -- https://en.wikipedia.org/wiki/XY_problem","body":"But all that said, after adding all those parallel calls, my solution truly is now non-blocking, even if it is at the detriment of the performance in certain edge cases. I would really love to learn what use case led to you having such strange and contradictory requirements. This whole question may just be an XY problem -- <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/XY_problem</a>"},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696699977,"post_id":77178436,"comment_id":136188087,"body_markdown":"This scenario came up in a project that I worked on 4 years ago, and I no longer have the details of the use-case. But I still think it was a valid question, and I decided to revisit it now that Java 21 has come out with the virtual threads feature which should make this possible. The answer from Nishika is the most insightful: &quot;_You can&#39;t know Futures&#39;s state while it&#39;s still executing_&quot; - and that&#39;s the path to a solution. If we can create a virtual thread to monitor the each Future, it becomes possible to know each Future&#39;s completion state just in time to drive a stream of completions.","body":"This scenario came up in a project that I worked on 4 years ago, and I no longer have the details of the use-case. But I still think it was a valid question, and I decided to revisit it now that Java 21 has come out with the virtual threads feature which should make this possible. The answer from Nishika is the most insightful: &quot;<i>You can&#39;t know Futures&#39;s state while it&#39;s still executing</i>&quot; - and that&#39;s the path to a solution. If we can create a virtual thread to monitor the each Future, it becomes possible to know each Future&#39;s completion state just in time to drive a stream of completions."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696700611,"post_id":77178436,"comment_id":136188135,"body_markdown":"Thanks again for the deep discussion on this. Please note that the commentary regarding the parallel solution being slower is really not applicable here, because I seem to have left out an important assumption: the asynchronous tasks which are referenced in the Stream of Lists are I/O-bound, not CPU-bound. Apologies for not making this clear initially. I&#39;ll add it as a clarification.","body":"Thanks again for the deep discussion on this. Please note that the commentary regarding the parallel solution being slower is really not applicable here, because I seem to have left out an important assumption: the asynchronous tasks which are referenced in the Stream of Lists are I/O-bound, not CPU-bound. Apologies for not making this clear initially. I&#39;ll add it as a clarification."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715391,"post_id":77178436,"comment_id":136189500,"body_markdown":"@AlexR Respectfully, that&#39;s pretty much the most important detail to leave out. It seems it really was an XY Problem. If that is true, then yes, you no longer care about speed at all, you care about ***throughput***. In that situation, a virtual thread per task makes sense. That is actually the officially suggested solution when you are willing to sacrifice speed in order to get throughput. Understanding that now, the question then becomes - ***how much*** speed are you willing to sacrifice to get throughput? Because, depending on the answer will decide which solution is best.","body":"@AlexR Respectfully, that&#39;s pretty much the most important detail to leave out. It seems it really was an XY Problem. If that is true, then yes, you no longer care about speed at all, you care about <b><i>throughput</i></b>. In that situation, a virtual thread per task makes sense. That is actually the officially suggested solution when you are willing to sacrifice speed in order to get throughput. Understanding that now, the question then becomes - <b><i>how much</i></b> speed are you willing to sacrifice to get throughput? Because, depending on the answer will decide which solution is best."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715600,"post_id":77178436,"comment_id":136189512,"body_markdown":"If you are 100% certain that you have enough memory, CPU, network bandwidth (and maybe disk space, depending on if you need to store some of it locally) to handle this task at its worst, then virtual thread per task makes the most sense. But, if any of the above becomes false, then you need to start making changes. For example, how frequently are these requests coming in? Is it possible to have 2 requests being processed simultaneously, or can they only occur 1 after the other? What about the concurrency? Do you have other tasks besides this use case running on the same machine?","body":"If you are 100% certain that you have enough memory, CPU, network bandwidth (and maybe disk space, depending on if you need to store some of it locally) to handle this task at its worst, then virtual thread per task makes the most sense. But, if any of the above becomes false, then you need to start making changes. For example, how frequently are these requests coming in? Is it possible to have 2 requests being processed simultaneously, or can they only occur 1 after the other? What about the concurrency? Do you have other tasks besides this use case running on the same machine?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696715788,"post_id":77178436,"comment_id":136189528,"body_markdown":"And don&#39;t forget about the actual task at hand. What are you actually doing? Are you trying to find the first occurrence of a certain something? Are you looking for a number of them? Is there a &quot;likely candidate&quot;? All of these are questions that would influence the answer. As a result, a question like yours would be a much better fit for Code Review Stack Exchange, with the full context and code provided. That way, someone can help critique the strengths and weaknesses of your current solution. A virtual thread per task is a good starting point, but it will likely need to be iterated upon.","body":"And don&#39;t forget about the actual task at hand. What are you actually doing? Are you trying to find the first occurrence of a certain something? Are you looking for a number of them? Is there a &quot;likely candidate&quot;? All of these are questions that would influence the answer. As a result, a question like yours would be a much better fit for Code Review Stack Exchange, with the full context and code provided. That way, someone can help critique the strengths and weaknesses of your current solution. A virtual thread per task is a good starting point, but it will likely need to be iterated upon."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696716357,"post_id":77178436,"comment_id":136189566,"body_markdown":"Neither speed or throughput were an original requirement. The question was _How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?_","body":"Neither speed or throughput were an original requirement. The question was <i>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</i>"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696716556,"post_id":77178436,"comment_id":136189583,"body_markdown":"@AlexR To be perfectly frank, your requirements were contradictory in and of themselves. You want a stream that does not block, and yet, you don&#39;t want to prematurely consume more items than necessary. Those are contradictory requirements. Either we must do some unnecessary work (firing off a virtual thread per task, even though some of the tasks are stream items we will end up not caring about) or we will block.","body":"@AlexR To be perfectly frank, your requirements were contradictory in and of themselves. You want a stream that does not block, and yet, you don&#39;t want to prematurely consume more items than necessary. Those are contradictory requirements. Either we must do some unnecessary work (firing off a virtual thread per task, even though some of the tasks are stream items we will end up not caring about) or we will block."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696716724,"post_id":77178436,"comment_id":136189593,"body_markdown":"That said, contradictory requirements are common on this site. So, the best I (and others answering) could come up with was that you wanted efficiency, and you thought that getting it via that Stream of futures was somehow faster. So, we all gave our best suggestions, but we all acknowledged that it still won&#39;t get you what you likely really want, at least, not as your question phrased it.","body":"That said, contradictory requirements are common on this site. So, the best I (and others answering) could come up with was that you wanted efficiency, and you thought that getting it via that Stream of futures was somehow faster. So, we all gave our best suggestions, but we all acknowledged that it still won&#39;t get you what you likely really want, at least, not as your question phrased it."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696727712,"post_id":77178436,"comment_id":136190259,"body_markdown":"Well then. The other two answers saying it&#39;s impossible may be correct. I&#39;ll study the long answer form Johannes Kuhn again to try to understand his reasoning.","body":"Well then. The other two answers saying it&#39;s impossible may be correct. I&#39;ll study the long answer form Johannes Kuhn again to try to understand his reasoning."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696727847,"post_id":77178436,"comment_id":136190270,"body_markdown":"@AlexR If it were me, I would make a brand new question with the necessary context, then ping the 2 others above, and let them know. You&#39;ll probably get an answer that better addresses your true goals. Also link it to me as well. Of course, if you are happy with any of the answers we provided, then that works too.","body":"@AlexR If it were me, I would make a brand new question with the necessary context, then ping the 2 others above, and let them know. You&#39;ll probably get an answer that better addresses your true goals. Also link it to me as well. Of course, if you are happy with any of the answers we provided, then that works too."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696727992,"post_id":77178436,"comment_id":136190276,"body_markdown":"TBH, I think the question shows a profound misunderstanding I had over how Streams work. In my mind at the time I asked, I should have been able to use a Stream of Futures in places where I really needed a Nonblocking Queue. A new question would not properly express this confusion, and would be a different question.","body":"TBH, I think the question shows a profound misunderstanding I had over how Streams work. In my mind at the time I asked, I should have been able to use a Stream of Futures in places where I really needed a Nonblocking Queue. A new question would not properly express this confusion, and would be a different question."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696730087,"post_id":77178436,"comment_id":136190379,"body_markdown":"@AlexR Oh by all means, remove the misunderstandings, and you get a different question. That&#39;s my point - it sounded like you might still have a question that none of our answers have addressed. If so, feel free to raise a new question.","body":"@AlexR Oh by all means, remove the misunderstandings, and you get a different question. That&#39;s my point - it sounded like you might still have a question that none of our answers have addressed. If so, feel free to raise a new question."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696730399,"post_id":77178436,"comment_id":136190403,"body_markdown":"Hi David, I think the original question deserves an answer. Either it&#39;s impossible, or the question has an incorrect premise, or there is a clever way (which I was attempting in my original code, please have a look at that again). I&#39;ve added +100 bounty points. Also think about this - if I remove the misunderstandings, there is no question left to ask, is there?","body":"Hi David, I think the original question deserves an answer. Either it&#39;s impossible, or the question has an incorrect premise, or there is a clever way (which I was attempting in my original code, please have a look at that again). I&#39;ve added +100 bounty points. Also think about this - if I remove the misunderstandings, there is no question left to ask, is there?"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696731149,"post_id":77178436,"comment_id":136190437,"body_markdown":"@AlexR Misunderstandings was not the right word for me to use, but I understand your point. Taking a look now.","body":"@AlexR Misunderstandings was not the right word for me to use, but I understand your point. Taking a look now."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696731383,"post_id":77178436,"comment_id":136190448,"body_markdown":"@AlexR LOL yes, I can answer this question. I never would have originally guessed that this is what your original question was asking. Rather than editing this answer, I&#39;ll simply submit a new answer.","body":"@AlexR LOL yes, I can answer this question. I never would have originally guessed that this is what your original question was asking. Rather than editing this answer, I&#39;ll simply submit a new answer."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696734506,"post_id":77178436,"comment_id":136190583,"body_markdown":"@AlexR I&#39;ll finish my answer tomorrow or something. But spoiler alert, now that I understand that this is your question, the answer is to use `ExecutorService::newVirtualThreadPerTask`. I&#39;ll go into more detail once I get a chance to finish this thing. Ideally tomorrow.","body":"@AlexR I&#39;ll finish my answer tomorrow or something. But spoiler alert, now that I understand that this is your question, the answer is to use <code>ExecutorService::newVirtualThreadPerTask</code>. I&#39;ll go into more detail once I get a chance to finish this thing. Ideally tomorrow."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1696798531,"post_id":77178436,"comment_id":136195992,"body_markdown":"&quot;_will IMMEDIATELY start computation_&quot; – Not really. The only stages that start an actual computation immediately, at least in the standard API, are `supplyAsync` and `runAsync`. You can have an entire chain/tree of stages all rooted with one built via `new CompletableFuture&lt;&gt;()` and nothing will actually happen until that root stage is completed &quot;manually&quot; (or some other stage in the chain/tree is completed, but that will only cause further computations in that stage&#39;s descendants, not any of its ancestors or stages in entirely separate branches).","body":"&quot;<i>will IMMEDIATELY start computation</i>&quot; – Not really. The only stages that start an actual computation immediately, at least in the standard API, are <code>supplyAsync</code> and <code>runAsync</code>. You can have an entire chain/tree of stages all rooted with one built via <code>new CompletableFuture&lt;&gt;()</code> and nothing will actually happen until that root stage is completed &quot;manually&quot; (or some other stage in the chain/tree is completed, but that will only cause further computations in that stage&#39;s descendants, not any of its ancestors or stages in entirely separate branches)."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696883800,"post_id":77178436,"comment_id":136207630,"body_markdown":"@Slaw touche. I&#39;m actually going to delete this answer because I think the other answers have captured what I wanted to say.","body":"@Slaw touche. I&#39;m actually going to delete this answer because I think the other answers have captured what I wanted to say."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":1,"creation_date":1696883872,"post_id":77178436,"comment_id":136207647,"body_markdown":"@AlexR The bounty has brought in a lot of new answers, some of which have already said what I wanted to. I&#39;ll delete my answer and encourage you to read through those.","body":"@AlexR The bounty has brought in a lot of new answers, some of which have already said what I wanted to. I&#39;ll delete my answer and encourage you to read through those."}],"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"comment_count":32,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696546059,"creation_date":1695718202,"answer_id":77178436,"question_id":58359879,"body_markdown":"&gt; I have this:\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;`\r\n&gt; \r\n&gt; how can I convert it to\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;Item&gt;&gt;`\r\n&gt; \r\n&gt; I looked into thenCompose but that solves a completely different problem which is also referred to as &quot;flattening&quot;.\r\n&gt; \r\n&gt; How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\nThis is absolutely possible, but long story short, it will save you no work, it will add overhead in ways that provide you no benefit, and will actually make your code slower in the long run. You will have accomplished nothing of value by doing this.\r\n\r\nThe reason for this is simple -- `CompletableFuture` operates on a [push-down design][1]. Meaning, the ***INSTANT*** you attempt to attach a chaining call (`thenApply`, `thenCompose`, etc) or a complete call (`get`, `join`, `complete`), `CompletableFuture` will IMMEDIATELY start computation. It may be easier to think of `CompletableFuture` to being eager evaluation the moment that you chain a follow-up function to it. Not every follow up function will trigger computation, but all of the useful ones will.\r\n\r\nWhat this means is that, the second you try to even touch (metaphorically) a `CompletableFuture`, you have triggered it to start computing. And this computation is &quot;necessary&quot;, so it still meets your requirements.\r\n\r\nI am happy to go into detail about why the function you wanted to call on the `CompletableFuture&lt;Item&gt;` would either be the same impact as just fetching from the `CompletableFuture&lt;List&lt;Item&gt;&gt;`, or would be even more expensive and slower for no benefit. Please tell me, then I will amend this answer and explain exactly why your desired function will not help you in any useful way, other than being the form that you like for whatever arbitrary reason.\r\n\r\nRegardless, if this is truly what you want, then here is how.\r\n\r\n```java\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.stream.Stream;\r\n\r\npublic class SOQ_20230926\r\n{\r\n\r\n   public static void main(String[] args) throws Exception\r\n   {\r\n   \r\n      record Item(int index) {}\r\n   \r\n      final Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; pointA =\r\n         create\r\n         (\r\n            List\r\n               .of\r\n               (\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(1), new Item(2), new Item(3)),\r\n                  List.of(new Item(4), new Item(5), new Item(6)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9)),\r\n                  List.of(new Item(7), new Item(8), new Item(9))\r\n               )\r\n         )\r\n         ;\r\n   \r\n      final Stream&lt;CompletableFuture&lt;Item&gt;&gt; pointZ = convert(pointA);\r\n   \r\n      final Item item =\r\n         pointZ\r\n            .parallel()\r\n            .map(CompletableFuture::join)\r\n            .filter(eachItem -&gt; eachItem.index() == 4)\r\n            .findFirst()\r\n            .orElseThrow()\r\n            ;\r\n   \r\n      System.out.println(item);\r\n   \r\n   }\r\n\r\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt; convert(final Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; pointA)\r\n   {\r\n   \r\n      return\r\n         pointA\r\n            .parallel()\r\n            .map\r\n            (\r\n               eachFuture -&gt;\r\n                  eachFuture\r\n                     .thenApply\r\n                     (\r\n                        batch -&gt;\r\n                           batch\r\n                              .parallelStream()\r\n                              .map(eachElement -&gt; CompletableFuture.supplyAsync(() -&gt; eachElement))\r\n                              .toList()\r\n                     )\r\n            )\r\n            .map(CompletableFuture::join)\r\n            .flatMap(List::stream)\r\n            ;\r\n   \r\n   }\r\n\r\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; create(final List&lt;List&lt;T&gt;&gt; lists)\r\n   {\r\n   \r\n      return\r\n         lists\r\n            .parallelStream()\r\n            .map\r\n            (\r\n               eachList -&gt;\r\n                  CompletableFuture\r\n                     .supplyAsync\r\n                     (\r\n                        () -&gt;\r\n                        {\r\n                        \r\n                           System.out.println(&quot;COMPUTATION WAS PERFORMED&quot;);\r\n                        \r\n                           return eachList;\r\n                        \r\n                        }\r\n                     )\r\n         \r\n            )\r\n            ;\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\nAnd here is the output.\r\n\r\n```\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nCOMPUTATION WAS PERFORMED\r\nItem[index=4]\r\n```\r\n\r\nAs you can see, the `Stream` &quot;stopped early&quot;, only doing the work necessary to find the `Item` it needed.\r\n\r\nIf it had done more work than needed, we would have seen all 54 lines of `COMPUTATION WAS PERFORMED`, but we only see 31, because that was all that was needed to find our value. The rest of the batches remained unopened because we found what we needed.\r\n\r\nThis should meet your 2 requirements. Those are the following.\r\n\r\n&gt; I have this:\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;`\r\n&gt; \r\n&gt; how can I convert it to\r\n&gt; \r\n&gt; `Stream&lt;CompletableFuture&lt;Item&gt;&gt;`\r\n\r\n\r\n&gt; How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\n  [1]: https://stackoverflow.com/a/38421639/10118965","title":"How to flatten a list inside a stream of completable futures?","body":"<blockquote>\n<p>I have this:</p>\n<p><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;</code></p>\n<p>how can I convert it to</p>\n<p><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;</code></p>\n<p>I looked into thenCompose but that solves a completely different problem which is also referred to as &quot;flattening&quot;.</p>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n</blockquote>\n<p>This is absolutely possible, but long story short, it will save you no work, it will add overhead in ways that provide you no benefit, and will actually make your code slower in the long run. You will have accomplished nothing of value by doing this.</p>\n<p>The reason for this is simple -- <code>CompletableFuture</code> operates on a <a href=\"https://stackoverflow.com/a/38421639/10118965\">push-down design</a>. Meaning, the <em><strong>INSTANT</strong></em> you attempt to attach a chaining call (<code>thenApply</code>, <code>thenCompose</code>, etc) or a complete call (<code>get</code>, <code>join</code>, <code>complete</code>), <code>CompletableFuture</code> will IMMEDIATELY start computation. It may be easier to think of <code>CompletableFuture</code> to being eager evaluation the moment that you chain a follow-up function to it. Not every follow up function will trigger computation, but all of the useful ones will.</p>\n<p>What this means is that, the second you try to even touch (metaphorically) a <code>CompletableFuture</code>, you have triggered it to start computing. And this computation is &quot;necessary&quot;, so it still meets your requirements.</p>\n<p>I am happy to go into detail about why the function you wanted to call on the <code>CompletableFuture&lt;Item&gt;</code> would either be the same impact as just fetching from the <code>CompletableFuture&lt;List&lt;Item&gt;&gt;</code>, or would be even more expensive and slower for no benefit. Please tell me, then I will amend this answer and explain exactly why your desired function will not help you in any useful way, other than being the form that you like for whatever arbitrary reason.</p>\n<p>Regardless, if this is truly what you want, then here is how.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport java.util.List;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.stream.Stream;\n\npublic class SOQ_20230926\n{\n\n   public static void main(String[] args) throws Exception\n   {\n   \n      record Item(int index) {}\n   \n      final Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; pointA =\n         create\n         (\n            List\n               .of\n               (\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(1), new Item(2), new Item(3)),\n                  List.of(new Item(4), new Item(5), new Item(6)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9)),\n                  List.of(new Item(7), new Item(8), new Item(9))\n               )\n         )\n         ;\n   \n      final Stream&lt;CompletableFuture&lt;Item&gt;&gt; pointZ = convert(pointA);\n   \n      final Item item =\n         pointZ\n            .parallel()\n            .map(CompletableFuture::join)\n            .filter(eachItem -&gt; eachItem.index() == 4)\n            .findFirst()\n            .orElseThrow()\n            ;\n   \n      System.out.println(item);\n   \n   }\n\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;T&gt;&gt; convert(final Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; pointA)\n   {\n   \n      return\n         pointA\n            .parallel()\n            .map\n            (\n               eachFuture -&gt;\n                  eachFuture\n                     .thenApply\n                     (\n                        batch -&gt;\n                           batch\n                              .parallelStream()\n                              .map(eachElement -&gt; CompletableFuture.supplyAsync(() -&gt; eachElement))\n                              .toList()\n                     )\n            )\n            .map(CompletableFuture::join)\n            .flatMap(List::stream)\n            ;\n   \n   }\n\n   private static &lt;T&gt; Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; create(final List&lt;List&lt;T&gt;&gt; lists)\n   {\n   \n      return\n         lists\n            .parallelStream()\n            .map\n            (\n               eachList -&gt;\n                  CompletableFuture\n                     .supplyAsync\n                     (\n                        () -&gt;\n                        {\n                        \n                           System.out.println(&quot;COMPUTATION WAS PERFORMED&quot;);\n                        \n                           return eachList;\n                        \n                        }\n                     )\n         \n            )\n            ;\n   \n   }\n\n}\n</code></pre>\n<p>And here is the output.</p>\n<pre><code>COMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nCOMPUTATION WAS PERFORMED\nItem[index=4]\n</code></pre>\n<p>As you can see, the <code>Stream</code> &quot;stopped early&quot;, only doing the work necessary to find the <code>Item</code> it needed.</p>\n<p>If it had done more work than needed, we would have seen all 54 lines of <code>COMPUTATION WAS PERFORMED</code>, but we only see 31, because that was all that was needed to find our value. The rest of the batches remained unopened because we found what we needed.</p>\n<p>This should meet your 2 requirements. Those are the following.</p>\n<blockquote>\n<p>I have this:</p>\n<p><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;</code></p>\n<p>how can I convert it to</p>\n<p><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;</code></p>\n</blockquote>\n<blockquote>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696821269,"post_id":77255485,"comment_id":136197411,"body_markdown":"Also, I think I see the flaw in my original code: the `queue.submit(() -&gt; ender.get());` probably executes before all the `thenApply()` consumers in the line above it.","body":"Also, I think I see the flaw in my original code: the <code>queue.submit(() -&gt; ender.get());</code> probably executes before all the <code>thenApply()</code> consumers in the line above it."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696834068,"post_id":77255485,"comment_id":136198497,"body_markdown":"I&#39;ve edited my answer. Let me know if it still helps. Also, if you wouldn&#39;t mind, I recommend deleting most (if not all) of your existing comments under this answer to clean it up a bit.","body":"I&#39;ve edited my answer. Let me know if it still helps. Also, if you wouldn&#39;t mind, I recommend deleting most (if not all) of your existing comments under this answer to clean it up a bit."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696836382,"post_id":77255485,"comment_id":136198858,"body_markdown":"Thanks. I deleted all outdated comments. I&#39;ll have to study your current code in more detail, especially considering it&#39;s so much more verbose than the pseudo-code at  https://stackoverflow.com/a/77256137/196032","body":"Thanks. I deleted all outdated comments. I&#39;ll have to study your current code in more detail, especially considering it&#39;s so much more verbose than the pseudo-code at  <a href=\"https://stackoverflow.com/a/77256137/196032\">stackoverflow.com/a/77256137/196032</a>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696837115,"post_id":77255485,"comment_id":136198982,"body_markdown":"Yeah, it might be a little overengineered. And some parts might be able to be simplified. Let me know if something needs clarifying. I also didn&#39;t spend too much time analyzing it or testing it, so let me know if you spot an issue as well.","body":"Yeah, it might be a little overengineered. And some parts might be able to be simplified. Let me know if something needs clarifying. I also didn&#39;t spend too much time analyzing it or testing it, so let me know if you spot an issue as well."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1696883215,"post_id":77255485,"comment_id":136207554,"body_markdown":"If and when you accept an answer, I suggest Holger&#39;s. Their solution is more elegant than mine (as expected).","body":"If and when you accept an answer, I suggest Holger&#39;s. Their solution is more elegant than mine (as expected)."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1696883640,"post_id":77255485,"comment_id":136207604,"body_markdown":"@Slaw Both of you have brought a lot of value to this site. We&#39;re blessed to have you both - neither one more than the other.","body":"@Slaw Both of you have brought a lot of value to this site. We&#39;re blessed to have you both - neither one more than the other."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1696888687,"post_id":77255485,"comment_id":136208192,"body_markdown":"@davidalayachew Thanks, I appreciate it. Though note I&#39;m not complaining nor disheartened. Always happy to see more elegant solutions. It&#39;s a great way to learn, and Holger is one of the top Java/JVM experts on this site.","body":"@davidalayachew Thanks, I appreciate it. Though note I&#39;m not complaining nor disheartened. Always happy to see more elegant solutions. It&#39;s a great way to learn, and Holger is one of the top Java/JVM experts on this site."}],"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697257837,"creation_date":1696802165,"answer_id":77255485,"question_id":58359879,"body_markdown":"# The Problem\r\n\r\nAs I understand it, your problem can be summarized by the following:\r\n\r\n1. You have multiple producers running concurrently. These producers are instances of `CompletableFuture`.\r\n\r\n    * In your case, you are getting these futures from a `Stream`, but the actual source of the futures doesn&#39;t seem critical, just so long as the source is a container that can be iterated in some way.\r\n\r\n2. You have a single consumer running concurrently with the producers. The consumer is a `Stream`.\r\n\r\n3. You want to stay within the stream API, at least from an external perspective. In other words, you want to map `Stream&lt;CompletableFuture&lt;T&gt;&gt;` (the producers) to `Stream&lt;T&gt;` (the consumer).\r\n\r\n4. You want to consume the result of a producer as soon as possible. No waiting to process a result because the consumer is blocked waiting for a different producer to complete.\r\n\r\nAt a fundamental level, the question seems to be how to stream the results from asynchronous computations without blocking on the futures themselves.\r\n\r\n\r\n---\r\n\r\n# Solution\r\n\r\nThe major hurdle to overcome here is that we don&#39;t know when a future will complete. That wouldn&#39;t matter much if you didn&#39;t care about processing results as soon as possible, because then you could just do:\r\n\r\n```java\r\nstream.map(CompletableFuture::join)\r\n```\r\n\r\nBut you do care about processing results as soon as possible, and the above will wait on a future even if another one has completed. To do what you want, we&#39;ll have to use an intermediate `BlockingQueue` that each future adds its result to when complete (without blocking). Then we need another _separate_ stream that reads from that queue until all results have been processed.\r\n\r\nHere&#39;s a slightly modified version of [Holger&#39;s solution][1] which:\r\n\r\n* Can work with any `CompletionStage` implementation.\r\n\r\n* Gives you the stage results directly instead of flattening them for you. If your results are lists, then you can just do `flatMap(List::stream)` when needed.\r\n\r\n    * As an aside, addressing the original question, I&#39;m of the opinion that if your results are lists, then wrapping each individual element of a list in its own `CompletableFuture` doesn&#39;t add much value. Especially since each future will have to be, by design, already completed (normally or exceptionally). If you want to launch asynchronous tasks for each element in a list, do that downstream. And if you want to handle exceptions, rather than crashing the stream on the first failure, then you can modify the below to expose the nested `Result` class (possibly modified itself) or handle the exceptions in the stages upstream (e.g., `exceptionally[Async]` or `handle[Async]` stages).\r\n\r\n* Implements splitting based on the result of calling `trySplit()` on the source `Spliterator`.\r\n\r\n**Note:** This replaces my old, inferior solution. You can look at the edit history to see the old solution if you want.\r\n&#160;\r\n```java\r\nimport java.util.Objects;\r\nimport java.util.Spliterator;\r\nimport java.util.concurrent.BlockingQueue;\r\nimport java.util.concurrent.CancellationException;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.CompletionException;\r\nimport java.util.concurrent.CompletionStage;\r\nimport java.util.concurrent.ExecutionException;\r\nimport java.util.concurrent.LinkedBlockingQueue;\r\nimport java.util.concurrent.atomic.AtomicLong;\r\nimport java.util.function.Consumer;\r\nimport java.util.stream.Stream;\r\nimport java.util.stream.StreamSupport;\r\n\r\npublic class WhenCompleteSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; streamResults(Iterable&lt;? extends CompletionStage&lt;T&gt;&gt; iterable) {\r\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(iterable.spliterator()), false);\r\n    }\r\n\r\n    public static &lt;T&gt; Stream&lt;T&gt; mapToResults(Stream&lt;? extends CompletionStage&lt;T&gt;&gt; stream) {\r\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(stream.spliterator()), false);\r\n    }\r\n\r\n    private final BlockingQueue&lt;Result&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n    private final AtomicLong pending = new AtomicLong();\r\n    private Result&lt;T&gt; immediate;\r\n\r\n    private final Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream;\r\n    private final long estimatedSize;\r\n\r\n    public WhenCompleteSpliterator(Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream) {\r\n        this.upstream = Objects.requireNonNull(upstream);\r\n        this.estimatedSize = upstream.estimateSize();\r\n    }\r\n\r\n    @Override\r\n    public long estimateSize() {\r\n        return estimatedSize;\r\n    }\r\n\r\n    @Override\r\n    public int characteristics() {\r\n        return 0; // No characteristics.\r\n    }\r\n\r\n    @Override\r\n    public Spliterator&lt;T&gt; trySplit() {\r\n        // Split based on upstream&#39;s ability to split.\r\n        var upstreamSplit = upstream.trySplit();\r\n        return upstreamSplit == null ? null : new WhenCompleteSpliterator&lt;&gt;(upstreamSplit);\r\n    }\r\n\r\n    @Override\r\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n        Objects.requireNonNull(action);\r\n\r\n        // Take from queue immediately if not empty.\r\n        if (takeFromQueue(false, action)) {\r\n            return true;\r\n        }\r\n\r\n        // Consume upstream stages until all consumed or an already-completed stage is encountered.\r\n        while (upstream.tryAdvance(this::consumeStage)) {\r\n            if (takeImmediate(action)) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        // Take from queue if not empty OR there are pending stages.\r\n        if (takeFromQueue(true, action)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private void consumeStage(CompletionStage&lt;T&gt; stage) {\r\n        var cf = stage instanceof CompletableFuture&lt;T&gt; self ? self : stage.toCompletableFuture();\r\n        if (cf.isDone()) {\r\n            try {\r\n                immediate = Result.ofSuccess(cf.join());\r\n            } catch (CompletionException | CancellationException ex) {\r\n                immediate = Result.ofFailure(ex);\r\n            }\r\n        } else {\r\n            pending.incrementAndGet();\r\n            stage.whenComplete((value, error) -&gt; {\r\n                queue.add(error == null ? Result.ofSuccess(value) : Result.ofFailure(error));\r\n                pending.decrementAndGet();\r\n            });\r\n        }\r\n    }\r\n\r\n    private boolean takeFromQueue(boolean waitForPending, Consumer&lt;? super T&gt; action) {\r\n        try {\r\n            if ((waitForPending &amp;&amp; pending.get() &gt; 0L) || !queue.isEmpty()) {\r\n                action.accept(queue.take().valueOrThrow());\r\n                return true;\r\n            }\r\n            return false;\r\n        } catch (InterruptedException ex) {\r\n            throw new CompletionException(&quot;Interrupted while waiting for upstream stage result.&quot;, ex);\r\n        }\r\n    }\r\n\r\n    private boolean takeImmediate(Consumer&lt;? super T&gt; action) {\r\n        var immediate = this.immediate;\r\n        if (immediate != null) {\r\n            this.immediate = null;\r\n            action.accept(immediate.valueOrThrow());\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private static class Result&lt;T&gt; {\r\n\r\n        static &lt;T&gt; Result&lt;T&gt; ofSuccess(T value) {\r\n            return new Result&lt;&gt;(value, null);\r\n        }\r\n\r\n        static &lt;T&gt; Result&lt;T&gt; ofFailure(Throwable error) {\r\n            assert error != null;\r\n            return new Result&lt;&gt;(null, error);\r\n        }\r\n\r\n        private final T value;\r\n        private final Throwable error;\r\n\r\n        private Result(T value, Throwable error) {\r\n            this.value = value;\r\n            this.error = error;\r\n        }\r\n\r\n        T valueOrThrow() {\r\n            if (error == null) {\r\n                return value;\r\n            } else {\r\n                var message = &quot;An upstream stage completed exceptionally.&quot;;\r\n                if (error instanceof CompletionException || error instanceof ExecutionException) {\r\n                    var cause = error.getCause();\r\n                    if (cause != null) {\r\n                        // Wrap exception in new CompletionException for stack trace purposes.\r\n                        throw new CompletionException(message, cause);\r\n                    }\r\n                }\r\n                // Wrap exception in new CompletionException for stack trace purposes.\r\n                throw new CompletionException(message, error);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd here&#39;s an example using the above:\r\n\r\n```java\r\nimport java.time.Clock;\r\nimport java.time.LocalTime;\r\nimport java.time.ZoneId;\r\nimport java.util.Random;\r\nimport java.util.concurrent.CompletableFuture;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        var clock = Clock.tickMillis(ZoneId.systemDefault());\r\n\r\n        var executor = Executors.newVirtualThreadPerTaskExecutor();\r\n        var futures = new Random().ints(5, 2, 30)\r\n                .mapToObj(seconds -&gt; CompletableFuture.supplyAsync(() -&gt; {\r\n                    try {\r\n                        System.out.printf(&quot;[%s] Beginning %,2d second sleep!%n&quot;, LocalTime.now(clock), seconds);\r\n                        Thread.sleep(seconds * 1000);\r\n                        return String.format(&quot;[%s] Slept for %,2d seconds!&quot;, LocalTime.now(clock), seconds);\r\n                    } catch (InterruptedException ex) {\r\n                        throw new RuntimeException(ex);\r\n                    }\r\n                }, executor));\r\n        WhenCompleteSpliterator.mapToResults(futures).forEach(System.out::println);\r\n        System.out.println(&quot;DONE!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNote the example uses a virtual thread pool simply to ensure all &quot;sleep tasks&quot; are started around the same time, regardless of how many there are. A &quot;normal&quot; cached thread pool could do the same job (though you&#39;d probably want to use daemon threads for the example).\r\n\r\nAnd example output:\r\n\r\n```none\r\n[22:07:24.134] Beginning 28 second sleep!\r\n[22:07:24.132] Beginning  4 second sleep!\r\n[22:07:24.134] Beginning 10 second sleep!\r\n[22:07:24.133] Beginning 20 second sleep!\r\n[22:07:24.133] Beginning  6 second sleep!\r\n[22:07:28.166] Slept for  4 seconds!\r\n[22:07:30.158] Slept for  6 seconds!\r\n[22:07:34.169] Slept for 10 seconds!\r\n[22:07:44.158] Slept for 20 seconds!\r\n[22:07:52.160] Slept for 28 seconds!\r\nDONE!\r\n```\r\n\r\n## Virtual Threads\r\n\r\nVirtual threads won&#39;t really help with the mapping from `Stream&lt;CompletableFuture&lt;T&gt;&gt;` to `Stream&lt;T&gt;`. Though since your background tasks are I/O bound, using a virtual thread pool to execute said background tasks _might_ be beneficial.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77260684/6395627\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<h1>The Problem</h1>\n<p>As I understand it, your problem can be summarized by the following:</p>\n<ol>\n<li><p>You have multiple producers running concurrently. These producers are instances of <code>CompletableFuture</code>.</p>\n<ul>\n<li>In your case, you are getting these futures from a <code>Stream</code>, but the actual source of the futures doesn't seem critical, just so long as the source is a container that can be iterated in some way.</li>\n</ul>\n</li>\n<li><p>You have a single consumer running concurrently with the producers. The consumer is a <code>Stream</code>.</p>\n</li>\n<li><p>You want to stay within the stream API, at least from an external perspective. In other words, you want to map <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> (the producers) to <code>Stream&lt;T&gt;</code> (the consumer).</p>\n</li>\n<li><p>You want to consume the result of a producer as soon as possible. No waiting to process a result because the consumer is blocked waiting for a different producer to complete.</p>\n</li>\n</ol>\n<p>At a fundamental level, the question seems to be how to stream the results from asynchronous computations without blocking on the futures themselves.</p>\n<hr />\n<h1>Solution</h1>\n<p>The major hurdle to overcome here is that we don't know when a future will complete. That wouldn't matter much if you didn't care about processing results as soon as possible, because then you could just do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>stream.map(CompletableFuture::join)\n</code></pre>\n<p>But you do care about processing results as soon as possible, and the above will wait on a future even if another one has completed. To do what you want, we'll have to use an intermediate <code>BlockingQueue</code> that each future adds its result to when complete (without blocking). Then we need another <em>separate</em> stream that reads from that queue until all results have been processed.</p>\n<p>Here's a slightly modified version of <a href=\"https://stackoverflow.com/a/77260684/6395627\">Holger's solution</a> which:</p>\n<ul>\n<li><p>Can work with any <code>CompletionStage</code> implementation.</p>\n</li>\n<li><p>Gives you the stage results directly instead of flattening them for you. If your results are lists, then you can just do <code>flatMap(List::stream)</code> when needed.</p>\n<ul>\n<li>As an aside, addressing the original question, I'm of the opinion that if your results are lists, then wrapping each individual element of a list in its own <code>CompletableFuture</code> doesn't add much value. Especially since each future will have to be, by design, already completed (normally or exceptionally). If you want to launch asynchronous tasks for each element in a list, do that downstream. And if you want to handle exceptions, rather than crashing the stream on the first failure, then you can modify the below to expose the nested <code>Result</code> class (possibly modified itself) or handle the exceptions in the stages upstream (e.g., <code>exceptionally[Async]</code> or <code>handle[Async]</code> stages).</li>\n</ul>\n</li>\n<li><p>Implements splitting based on the result of calling <code>trySplit()</code> on the source <code>Spliterator</code>.</p>\n</li>\n</ul>\n<p><strong>Note:</strong> This replaces my old, inferior solution. You can look at the edit history to see the old solution if you want.\n </p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Objects;\nimport java.util.Spliterator;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.CancellationException;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.CompletionException;\nimport java.util.concurrent.CompletionStage;\nimport java.util.concurrent.ExecutionException;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.atomic.AtomicLong;\nimport java.util.function.Consumer;\nimport java.util.stream.Stream;\nimport java.util.stream.StreamSupport;\n\npublic class WhenCompleteSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\n\n    public static &lt;T&gt; Stream&lt;T&gt; streamResults(Iterable&lt;? extends CompletionStage&lt;T&gt;&gt; iterable) {\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(iterable.spliterator()), false);\n    }\n\n    public static &lt;T&gt; Stream&lt;T&gt; mapToResults(Stream&lt;? extends CompletionStage&lt;T&gt;&gt; stream) {\n        return StreamSupport.stream(new WhenCompleteSpliterator&lt;&gt;(stream.spliterator()), false);\n    }\n\n    private final BlockingQueue&lt;Result&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n    private final AtomicLong pending = new AtomicLong();\n    private Result&lt;T&gt; immediate;\n\n    private final Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream;\n    private final long estimatedSize;\n\n    public WhenCompleteSpliterator(Spliterator&lt;? extends CompletionStage&lt;T&gt;&gt; upstream) {\n        this.upstream = Objects.requireNonNull(upstream);\n        this.estimatedSize = upstream.estimateSize();\n    }\n\n    @Override\n    public long estimateSize() {\n        return estimatedSize;\n    }\n\n    @Override\n    public int characteristics() {\n        return 0; // No characteristics.\n    }\n\n    @Override\n    public Spliterator&lt;T&gt; trySplit() {\n        // Split based on upstream's ability to split.\n        var upstreamSplit = upstream.trySplit();\n        return upstreamSplit == null ? null : new WhenCompleteSpliterator&lt;&gt;(upstreamSplit);\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n        Objects.requireNonNull(action);\n\n        // Take from queue immediately if not empty.\n        if (takeFromQueue(false, action)) {\n            return true;\n        }\n\n        // Consume upstream stages until all consumed or an already-completed stage is encountered.\n        while (upstream.tryAdvance(this::consumeStage)) {\n            if (takeImmediate(action)) {\n                return true;\n            }\n        }\n\n        // Take from queue if not empty OR there are pending stages.\n        if (takeFromQueue(true, action)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    private void consumeStage(CompletionStage&lt;T&gt; stage) {\n        var cf = stage instanceof CompletableFuture&lt;T&gt; self ? self : stage.toCompletableFuture();\n        if (cf.isDone()) {\n            try {\n                immediate = Result.ofSuccess(cf.join());\n            } catch (CompletionException | CancellationException ex) {\n                immediate = Result.ofFailure(ex);\n            }\n        } else {\n            pending.incrementAndGet();\n            stage.whenComplete((value, error) -&gt; {\n                queue.add(error == null ? Result.ofSuccess(value) : Result.ofFailure(error));\n                pending.decrementAndGet();\n            });\n        }\n    }\n\n    private boolean takeFromQueue(boolean waitForPending, Consumer&lt;? super T&gt; action) {\n        try {\n            if ((waitForPending &amp;&amp; pending.get() &gt; 0L) || !queue.isEmpty()) {\n                action.accept(queue.take().valueOrThrow());\n                return true;\n            }\n            return false;\n        } catch (InterruptedException ex) {\n            throw new CompletionException(&quot;Interrupted while waiting for upstream stage result.&quot;, ex);\n        }\n    }\n\n    private boolean takeImmediate(Consumer&lt;? super T&gt; action) {\n        var immediate = this.immediate;\n        if (immediate != null) {\n            this.immediate = null;\n            action.accept(immediate.valueOrThrow());\n            return true;\n        }\n        return false;\n    }\n\n    private static class Result&lt;T&gt; {\n\n        static &lt;T&gt; Result&lt;T&gt; ofSuccess(T value) {\n            return new Result&lt;&gt;(value, null);\n        }\n\n        static &lt;T&gt; Result&lt;T&gt; ofFailure(Throwable error) {\n            assert error != null;\n            return new Result&lt;&gt;(null, error);\n        }\n\n        private final T value;\n        private final Throwable error;\n\n        private Result(T value, Throwable error) {\n            this.value = value;\n            this.error = error;\n        }\n\n        T valueOrThrow() {\n            if (error == null) {\n                return value;\n            } else {\n                var message = &quot;An upstream stage completed exceptionally.&quot;;\n                if (error instanceof CompletionException || error instanceof ExecutionException) {\n                    var cause = error.getCause();\n                    if (cause != null) {\n                        // Wrap exception in new CompletionException for stack trace purposes.\n                        throw new CompletionException(message, cause);\n                    }\n                }\n                // Wrap exception in new CompletionException for stack trace purposes.\n                throw new CompletionException(message, error);\n            }\n        }\n    }\n}\n</code></pre>\n<p>And here's an example using the above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.Clock;\nimport java.time.LocalTime;\nimport java.time.ZoneId;\nimport java.util.Random;\nimport java.util.concurrent.CompletableFuture;\nimport java.util.concurrent.Executors;\n\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        var clock = Clock.tickMillis(ZoneId.systemDefault());\n\n        var executor = Executors.newVirtualThreadPerTaskExecutor();\n        var futures = new Random().ints(5, 2, 30)\n                .mapToObj(seconds -&gt; CompletableFuture.supplyAsync(() -&gt; {\n                    try {\n                        System.out.printf(&quot;[%s] Beginning %,2d second sleep!%n&quot;, LocalTime.now(clock), seconds);\n                        Thread.sleep(seconds * 1000);\n                        return String.format(&quot;[%s] Slept for %,2d seconds!&quot;, LocalTime.now(clock), seconds);\n                    } catch (InterruptedException ex) {\n                        throw new RuntimeException(ex);\n                    }\n                }, executor));\n        WhenCompleteSpliterator.mapToResults(futures).forEach(System.out::println);\n        System.out.println(&quot;DONE!&quot;);\n    }\n}\n</code></pre>\n<p>Note the example uses a virtual thread pool simply to ensure all &quot;sleep tasks&quot; are started around the same time, regardless of how many there are. A &quot;normal&quot; cached thread pool could do the same job (though you'd probably want to use daemon threads for the example).</p>\n<p>And example output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[22:07:24.134] Beginning 28 second sleep!\n[22:07:24.132] Beginning  4 second sleep!\n[22:07:24.134] Beginning 10 second sleep!\n[22:07:24.133] Beginning 20 second sleep!\n[22:07:24.133] Beginning  6 second sleep!\n[22:07:28.166] Slept for  4 seconds!\n[22:07:30.158] Slept for  6 seconds!\n[22:07:34.169] Slept for 10 seconds!\n[22:07:44.158] Slept for 20 seconds!\n[22:07:52.160] Slept for 28 seconds!\nDONE!\n</code></pre>\n<h2>Virtual Threads</h2>\n<p>Virtual threads won't really help with the mapping from <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> to <code>Stream&lt;T&gt;</code>. Though since your background tasks are I/O bound, using a virtual thread pool to execute said background tasks <em>might</em> be beneficial.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696849994,"post_id":77256137,"comment_id":136201301,"body_markdown":"This does not ensure that `queue.offer(EOL)` is done after the other `offer` calls. Further, `List.of()` might (and does in practice) return a shared object that may also occur as a normal result from one of the futures.","body":"This does not ensure that <code>queue.offer(EOL)</code> is done after the other <code>offer</code> calls. Further, <code>List.of()</code> might (and does in practice) return a shared object that may also occur as a normal result from one of the futures."},{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696869056,"post_id":77256137,"comment_id":136205190,"body_markdown":"Thanks, I made some fixes. Please note my own answer is not acceptable because it is pseudo-code that references things that don&#39;t exist.","body":"Thanks, I made some fixes. Please note my own answer is not acceptable because it is pseudo-code that references things that don&#39;t exist."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696873586,"post_id":77256137,"comment_id":136205994,"body_markdown":"Well, there’s [`takeWhile`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#takeWhile(java.util.function.Predicate)) which you can use instead of the non-existing `stopWhen`; you just have to negate the condition. The `blockUntilAllAcceptAsyncsHaveExecuted()` could be implemented using `CompletableFuture.allOf` but when you use `allOf`, you can chain a `whenComplete(x -&gt; queue.offer(EOL))` in the first place, then you don’t need a virtual thread. Still, it implies eagerly traversing the entire source stream which my answer’s solution avoids.","body":"Well, there’s <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#takeWhile(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>takeWhile</code></a> which you can use instead of the non-existing <code>stopWhen</code>; you just have to negate the condition. The <code>blockUntilAllAcceptAsyncsHaveExecuted()</code> could be implemented using <code>CompletableFuture.allOf</code> but when you use <code>allOf</code>, you can chain a <code>whenComplete(x -&gt; queue.offer(EOL))</code> in the first place, then you don’t need a virtual thread. Still, it implies eagerly traversing the entire source stream which my answer’s solution avoids."}],"tags":[],"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696868997,"creation_date":1696822231,"answer_id":77256137,"question_id":58359879,"body_markdown":"Here&#39;s some **pseudo-code** of what I&#39;m thinking now after conversation with @Slaw:\r\n\r\n    public class StreamTest {\r\n    \r\n        static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\r\n            List&lt;T&gt; EOL = new ArrayList&lt;&gt;();\r\n            BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n    \r\n            Thread thread = Thread.ofVirtual().start(() -&gt; {\r\n                stream.forEach(future -&gt; future.thenAcceptAsync(queue::offer));\r\n\r\n                // this pseudo-code method ensures EOL is not added prematurely\r\n                blockUntilAllAcceptAsyncsHaveExecuted();\r\n\r\n                queue.offer(EOL);\r\n            });\r\n    \r\n            return Stream.generate(() -&gt; {\r\n                        try {\r\n                            return queue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);\r\n                        } catch (InterruptedException e) {\r\n                            throw new RuntimeException(e);\r\n                        }\r\n                    })\r\n                    .stopWhen(i -&gt; i == EOL) // this method doesn&#39;t exist!\r\n                    .filter(i -&gt; i != EOL)\r\n                    .flatMap(List::stream);\r\n        }\r\n    }\r\n\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Here's some <strong>pseudo-code</strong> of what I'm thinking now after conversation with @Slaw:</p>\n<pre><code>public class StreamTest {\n\n    static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\n        List&lt;T&gt; EOL = new ArrayList&lt;&gt;();\n        BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n        Thread thread = Thread.ofVirtual().start(() -&gt; {\n            stream.forEach(future -&gt; future.thenAcceptAsync(queue::offer));\n\n            // this pseudo-code method ensures EOL is not added prematurely\n            blockUntilAllAcceptAsyncsHaveExecuted();\n\n            queue.offer(EOL);\n        });\n\n        return Stream.generate(() -&gt; {\n                    try {\n                        return queue.poll(Integer.MAX_VALUE, TimeUnit.SECONDS);\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                })\n                .stopWhen(i -&gt; i == EOL) // this method doesn't exist!\n                .filter(i -&gt; i != EOL)\n                .flatMap(List::stream);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696838286,"creation_date":1696838286,"answer_id":77257121,"question_id":58359879,"body_markdown":"This has been discussed, but I&#39;d still like to give my variation of Nishika&#39;s answer with a slight repositioning:\r\n\r\n```\r\nStream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; origStream = // ...\r\n// make streams out of the lists first\r\nfinal Stream&lt;CompletableFuture&lt;Stream&lt;Item&gt;&gt;&gt; streamFutures =\r\n             origStream.map(f -&gt; f.thenApply(Collection::stream));\r\n```\r\n\r\nThis makes it clearer that the actual item streams of the individual futures can only be retrieved when their completion stage is finished.\r\n\r\nAdditionally, you&#39;ll only be able to `flatMap` these streams by again waiting for the individual completion, ie `join`ing on the futures. So now you can just do:\r\n\r\n```\r\nfinal Stream&lt;Item&gt; itemStream = streamFutures.flatMap(CompletableFuture::join);\r\n```\r\n\r\nYou can make a `CompletableFuture` out of this:\r\n\r\n```\r\nfinal CompletableFuture&lt;Stream&lt;Item&gt;&gt; itemStreamFuture =\r\n                CompletableFuture.supplyAsync(() -&gt; streamFutures.flatMap(CompletableFuture::join));\r\n```\r\n\r\nbut you hardly gain any concurrency except the call isn&#39;t blocking. I&#39;d wager the `join`s themselves are handled concurrently if the stream is created as parallel.","title":"How to flatten a list inside a stream of completable futures?","body":"<p>This has been discussed, but I'd still like to give my variation of Nishika's answer with a slight repositioning:</p>\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt; origStream = // ...\n// make streams out of the lists first\nfinal Stream&lt;CompletableFuture&lt;Stream&lt;Item&gt;&gt;&gt; streamFutures =\n             origStream.map(f -&gt; f.thenApply(Collection::stream));\n</code></pre>\n<p>This makes it clearer that the actual item streams of the individual futures can only be retrieved when their completion stage is finished.</p>\n<p>Additionally, you'll only be able to <code>flatMap</code> these streams by again waiting for the individual completion, ie <code>join</code>ing on the futures. So now you can just do:</p>\n<pre><code>final Stream&lt;Item&gt; itemStream = streamFutures.flatMap(CompletableFuture::join);\n</code></pre>\n<p>You can make a <code>CompletableFuture</code> out of this:</p>\n<pre><code>final CompletableFuture&lt;Stream&lt;Item&gt;&gt; itemStreamFuture =\n                CompletableFuture.supplyAsync(() -&gt; streamFutures.flatMap(CompletableFuture::join));\n</code></pre>\n<p>but you hardly gain any concurrency except the call isn't blocking. I'd wager the <code>join</code>s themselves are handled concurrently if the stream is created as parallel.</p>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696869535,"post_id":77260398,"comment_id":136205274,"body_markdown":"Assume 3 futures that completes in 2, 5 and 10 seconds but processing takes an additional 4 seconds each. This code will complete in 22 seconds `(max(2,5,10) + 4*count([2,5,10])`, but the goal is to complete in 14 seconds `(max(2+4,5+4,10+4))`. Now if you add processing in a `thenAsync()` method, your solution would be pretty close, it&#39;s just missing a final step to return a `Stream`.","body":"Assume 3 futures that completes in 2, 5 and 10 seconds but processing takes an additional 4 seconds each. This code will complete in 22 seconds <code>(max(2,5,10) + 4*count([2,5,10])</code>, but the goal is to complete in 14 seconds <code>(max(2+4,5+4,10+4))</code>. Now if you add processing in a <code>thenAsync()</code> method, your solution would be pretty close, it&#39;s just missing a final step to return a <code>Stream</code>."},{"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"score":0,"creation_date":1696869701,"post_id":77260398,"comment_id":136205314,"body_markdown":"Nope blockingAnswer() completes in max of future delay, cause using countdown latch for blocking, try run it","body":"Nope blockingAnswer() completes in max of future delay, cause using countdown latch for blocking, try run it"},{"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"score":0,"creation_date":1696870070,"post_id":77260398,"comment_id":136205393,"body_markdown":"Hmm im not noticed &quot;processing each&quot;, so if each processing is 4 sec then you need 3 threads anyway for achieve a total time of 14","body":"Hmm im not noticed &quot;processing each&quot;, so if each processing is 4 sec then you need 3 threads anyway for achieve a total time of 14"}],"tags":[],"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696868582,"creation_date":1696868582,"answer_id":77260398,"question_id":58359879,"body_markdown":"In your update4 you say:  \r\n\r\n&gt; How can you take a Stream that&#39;s produced in arbitrary order, and re-order it into futures execution completion order, so that a flatMap() operation will not block unnecessaril  \r\n\r\nSuppose u have 3 futures that completes in 2, 5 and 10 seconds accordingly and u wants some `method` that returns an ordered by execution time stream, so in this way u have to wait until all futures are done (or fail) because until u dont know is future is done or fail u dont know how long was execution time.  \r\nYou can create ordered stream of results with blocking:\r\n```java\r\n    private static final ExecutorService executorService = Executors.newFixedThreadPool(15);\r\n    private static final ExecutorService consumerService = Executors.newFixedThreadPool(15);\r\n    private static final Random random = new Random();\r\n    private static final AtomicInteger ID = new AtomicInteger(0);\r\n    private static final List&lt;DelayedListSupplier&gt; completionOrder = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n    @RequiredArgsConstructor\r\n    @Getter\r\n    public static class DelayedListSupplier implements Supplier&lt;List&lt;String&gt;&gt; {\r\n        private final int delayMs;\r\n        private final int id;\r\n\r\n        @Override\r\n        public List&lt;String&gt; get() {\r\n            try {\r\n                if (random.nextInt(10) &lt; 2) {\r\n                    System.out.println(\r\n                            String.format(\r\n                                    &quot;Thread [%s]; Future %s FAILED.&quot;,\r\n                                    Thread.currentThread().getName(),\r\n                                    id\r\n                            )\r\n                    );\r\n                    throw new RuntimeException(&quot;Error!&quot; + id);\r\n                }\r\n                Thread.sleep(delayMs);\r\n                System.out.println(\r\n                        String.format(\r\n                                &quot;Thread [%s]; Future %s is completed.&quot;,\r\n                                Thread.currentThread().getName(),\r\n                                id\r\n                        )\r\n                );\r\n                //just for SOUT\r\n                completionOrder.add(this);\r\n                return List.of(&quot;Future&quot; + id);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        System.out.println(&quot;Start blocking&quot;);\r\n        blockingAnswer();\r\n        System.out.println(&quot;Start non blocking&quot;);\r\n        nonBlockingAnswer();\r\n        executorService.shutdown();\r\n        consumerService.awaitTermination(10, TimeUnit.SECONDS);\r\n        consumerService.shutdown();\r\n    }\r\n\r\n    private static void nonBlockingAnswer() {\r\n        List&lt;DelayedListSupplier&gt; delayedSuppliers = createDelayedSuppliers();\r\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futuresStream = getFutures(delayedSuppliers);\r\n        futuresStream.forEachOrdered(cf -&gt; {\r\n            cf.whenComplete((r,e) -&gt; {\r\n                if (e == null) {\r\n                    consumerService.execute(() -&gt; {\r\n                        //handle results here\r\n                        System.out.println(&quot;Recevied results from future&quot; + r.get(0));\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private static void blockingAnswer() throws InterruptedException {\r\n        //prepare futures\r\n        List&lt;DelayedListSupplier&gt; suppliers = createDelayedSuppliers();\r\n        //map them to CompletableFuture\r\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; cf = getFutures(suppliers);\r\n        List&lt;List&lt;String&gt;&gt; results = Collections.synchronizedList(new LinkedList&lt;&gt;());\r\n\r\n        //we need collect futures for using CountDownLatch\r\n        List&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futures = cf.collect(Collectors.toList());\r\n\r\n        int maxWaitTime = suppliers.stream()\r\n                .max(Comparator.comparing(DelayedListSupplier::getDelayMs))\r\n                .map(DelayedListSupplier::getDelayMs)\r\n                .orElseThrow();\r\n        long start = System.currentTimeMillis();\r\n        //for method exit we need to N futures completed or failed\r\n        CountDownLatch cdl = new CountDownLatch((int) futures.size());\r\n        futures.forEach(f -&gt; {\r\n            //add post-execution logic for each future\r\n            f.whenComplete((r, e) -&gt; {\r\n                cdl.countDown();\r\n                //if no exception this is actual result\r\n                if (e == null) {\r\n                    results.add(r);\r\n                }\r\n            });\r\n        });\r\n\r\n        //wait until each future will done or 1000 days\r\n        cdl.await(1000, TimeUnit.DAYS);\r\n        long end = System.currentTimeMillis();\r\n        System.out.println(\r\n                String.format(\r\n                        &quot;Execution time: %s ms; Max wait time: %s&quot;,\r\n                        end - start,\r\n                        maxWaitTime\r\n                )\r\n        );\r\n        System.out.println(&quot;Future Results: &quot; + completionOrder.stream().map(s -&gt; &quot;&quot; + s.getId()).collect(Collectors.joining(&quot;, &quot;)));\r\n\r\n        //our result stream here\r\n        Stream&lt;String&gt; resultStream = results.stream().flatMap(Collection::stream);\r\n        System.out.println(\r\n                String.format(\r\n                        &quot;FlatMap: %s&quot;,\r\n                        resultStream.collect(Collectors.joining(&quot;, &quot;))\r\n                )\r\n        );\r\n    }\r\n\r\n    private static List&lt;DelayedListSupplier&gt; createDelayedSuppliers() {\r\n        List&lt;DelayedListSupplier&gt; suppliers = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            suppliers.add(\r\n                    new DelayedListSupplier(\r\n                            (random.nextInt(6) + 1) * 1000,\r\n                            ID.incrementAndGet()\r\n                    )\r\n            );\r\n        }\r\n        return suppliers;\r\n    }\r\n\r\n    private static Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; getFutures(List&lt;DelayedListSupplier&gt; suppliers) {\r\n        return suppliers.stream()\r\n                .map(s -&gt; CompletableFuture.supplyAsync(s, executorService));\r\n    }\r\n```\r\n\r\nFor non blocking at all u have to use _Producer/Consumer_ pattern (see in method _nonBlockingAnswer_)\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>In your update4 you say:</p>\n<blockquote>\n<p>How can you take a Stream that's produced in arbitrary order, and re-order it into futures execution completion order, so that a flatMap() operation will not block unnecessaril</p>\n</blockquote>\n<p>Suppose u have 3 futures that completes in 2, 5 and 10 seconds accordingly and u wants some <code>method</code> that returns an ordered by execution time stream, so in this way u have to wait until all futures are done (or fail) because until u dont know is future is done or fail u dont know how long was execution time.<br />\nYou can create ordered stream of results with blocking:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static final ExecutorService executorService = Executors.newFixedThreadPool(15);\n    private static final ExecutorService consumerService = Executors.newFixedThreadPool(15);\n    private static final Random random = new Random();\n    private static final AtomicInteger ID = new AtomicInteger(0);\n    private static final List&lt;DelayedListSupplier&gt; completionOrder = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n    @RequiredArgsConstructor\n    @Getter\n    public static class DelayedListSupplier implements Supplier&lt;List&lt;String&gt;&gt; {\n        private final int delayMs;\n        private final int id;\n\n        @Override\n        public List&lt;String&gt; get() {\n            try {\n                if (random.nextInt(10) &lt; 2) {\n                    System.out.println(\n                            String.format(\n                                    &quot;Thread [%s]; Future %s FAILED.&quot;,\n                                    Thread.currentThread().getName(),\n                                    id\n                            )\n                    );\n                    throw new RuntimeException(&quot;Error!&quot; + id);\n                }\n                Thread.sleep(delayMs);\n                System.out.println(\n                        String.format(\n                                &quot;Thread [%s]; Future %s is completed.&quot;,\n                                Thread.currentThread().getName(),\n                                id\n                        )\n                );\n                //just for SOUT\n                completionOrder.add(this);\n                return List.of(&quot;Future&quot; + id);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(&quot;Start blocking&quot;);\n        blockingAnswer();\n        System.out.println(&quot;Start non blocking&quot;);\n        nonBlockingAnswer();\n        executorService.shutdown();\n        consumerService.awaitTermination(10, TimeUnit.SECONDS);\n        consumerService.shutdown();\n    }\n\n    private static void nonBlockingAnswer() {\n        List&lt;DelayedListSupplier&gt; delayedSuppliers = createDelayedSuppliers();\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futuresStream = getFutures(delayedSuppliers);\n        futuresStream.forEachOrdered(cf -&gt; {\n            cf.whenComplete((r,e) -&gt; {\n                if (e == null) {\n                    consumerService.execute(() -&gt; {\n                        //handle results here\n                        System.out.println(&quot;Recevied results from future&quot; + r.get(0));\n                    });\n                }\n            });\n        });\n    }\n\n    private static void blockingAnswer() throws InterruptedException {\n        //prepare futures\n        List&lt;DelayedListSupplier&gt; suppliers = createDelayedSuppliers();\n        //map them to CompletableFuture\n        Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; cf = getFutures(suppliers);\n        List&lt;List&lt;String&gt;&gt; results = Collections.synchronizedList(new LinkedList&lt;&gt;());\n\n        //we need collect futures for using CountDownLatch\n        List&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; futures = cf.collect(Collectors.toList());\n\n        int maxWaitTime = suppliers.stream()\n                .max(Comparator.comparing(DelayedListSupplier::getDelayMs))\n                .map(DelayedListSupplier::getDelayMs)\n                .orElseThrow();\n        long start = System.currentTimeMillis();\n        //for method exit we need to N futures completed or failed\n        CountDownLatch cdl = new CountDownLatch((int) futures.size());\n        futures.forEach(f -&gt; {\n            //add post-execution logic for each future\n            f.whenComplete((r, e) -&gt; {\n                cdl.countDown();\n                //if no exception this is actual result\n                if (e == null) {\n                    results.add(r);\n                }\n            });\n        });\n\n        //wait until each future will done or 1000 days\n        cdl.await(1000, TimeUnit.DAYS);\n        long end = System.currentTimeMillis();\n        System.out.println(\n                String.format(\n                        &quot;Execution time: %s ms; Max wait time: %s&quot;,\n                        end - start,\n                        maxWaitTime\n                )\n        );\n        System.out.println(&quot;Future Results: &quot; + completionOrder.stream().map(s -&gt; &quot;&quot; + s.getId()).collect(Collectors.joining(&quot;, &quot;)));\n\n        //our result stream here\n        Stream&lt;String&gt; resultStream = results.stream().flatMap(Collection::stream);\n        System.out.println(\n                String.format(\n                        &quot;FlatMap: %s&quot;,\n                        resultStream.collect(Collectors.joining(&quot;, &quot;))\n                )\n        );\n    }\n\n    private static List&lt;DelayedListSupplier&gt; createDelayedSuppliers() {\n        List&lt;DelayedListSupplier&gt; suppliers = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            suppliers.add(\n                    new DelayedListSupplier(\n                            (random.nextInt(6) + 1) * 1000,\n                            ID.incrementAndGet()\n                    )\n            );\n        }\n        return suppliers;\n    }\n\n    private static Stream&lt;CompletableFuture&lt;List&lt;String&gt;&gt;&gt; getFutures(List&lt;DelayedListSupplier&gt; suppliers) {\n        return suppliers.stream()\n                .map(s -&gt; CompletableFuture.supplyAsync(s, executorService));\n    }\n</code></pre>\n<p>For non blocking at all u have to use <em>Producer/Consumer</em> pattern (see in method <em>nonBlockingAnswer</em>)</p>\n"},{"comments":[{"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"score":0,"creation_date":1696896813,"post_id":77260684,"comment_id":136208832,"body_markdown":"Thanks, this is great! The way you modeled the states of New / Existing / Exhausted resolves an issue I encountered when thinking about a similar approach - it keeps the counter from reaching zero before the original stream ends. I wonder if the exception-handling can be simplified by returning a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` instead of `Stream&lt;T&gt;`, as `CompletableFuture` already contains a representation of exception states.","body":"Thanks, this is great! The way you modeled the states of New / Existing / Exhausted resolves an issue I encountered when thinking about a similar approach - it keeps the counter from reaching zero before the original stream ends. I wonder if the exception-handling can be simplified by returning a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> instead of <code>Stream&lt;T&gt;</code>, as <code>CompletableFuture</code> already contains a representation of exception states."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1696922027,"post_id":77260684,"comment_id":136210993,"body_markdown":"That’s possible but not a simplification. Since this is flattening lists, returning a `Stream&lt;CompletableFuture&lt;T&gt;&gt;` would imply wrapping each `T` in a new future. Only the failed futures would have a one-to-one relationship between source and result futures. Re counter, note that the code cares to queue items before decreasing and to recheck the queue after detecting zero which is important when the execution of both operations overlaps.","body":"That’s possible but not a simplification. Since this is flattening lists, returning a <code>Stream&lt;CompletableFuture&lt;T&gt;&gt;</code> would imply wrapping each <code>T</code> in a new future. Only the failed futures would have a one-to-one relationship between source and result futures. Re counter, note that the code cares to queue items before decreasing and to recheck the queue after detecting zero which is important when the execution of both operations overlaps."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1696874099,"creation_date":1696871715,"answer_id":77260684,"question_id":58359879,"body_markdown":"Here is a solution which not only avoids blocking, by preferring to process already completed futures, it even retains lazy processing of the original stream, as far as possible. As long as there are completed futures among the already encountered futures it will not advance in the source traversal.\r\n\r\nThis is best demonstrated by an example using an *infinite* source which still can complete in finite time (and quite fast due to the preference of completed futures).\r\n\r\n```java\r\nStream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = Stream.generate(\r\n    () -&gt; CompletableFuture.supplyAsync(\r\n        () -&gt; ThreadLocalRandom.current().ints(10, 0, 200).boxed().toList(),\r\n        CompletableFuture.delayedExecutor(\r\n            ThreadLocalRandom.current().nextLong(5), TimeUnit.SECONDS))\r\n);\r\nSystem.out.println(flattenResults(streamOfFutures)\r\n    .peek(System.out::println)\r\n    .anyMatch(i -&gt; i == 123)\r\n);\r\n```\r\n\r\nThe implementation will process already completed futures immediately on encounter. Only if the future has not been completed yet, a queuing action will be chained and the pending counter increased. Care must be taken to decrease the counter even on exceptional completion and to queue an item (an empty list), to unblock the consumer thread in case it’s taking an element right at this point. The exception will be propagated to the caller when encountered. Like with short-circuiting parallel streams, it’s possible to miss errors if the result is found before processing all elements.\r\n\r\nIf the terminal operation is short-circuiting and finishes without processing the entire stream, the counter is irrelevant and the operation will not wait for the completion of pending futures. Only when the source stream has been traversed completely, the counter becomes relevant for detecting when all futures have been completed.\r\n\r\n```java\r\nstatic &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\r\n    Spliterator&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; srcSp = stream.spliterator();\r\n    BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n\r\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;T&gt;(\r\n                                                 srcSp.estimateSize(), 0) {\r\n        final AtomicLong pending = new AtomicLong();\r\n        Spliterator&lt;T&gt; fromCurrentList;\r\n        Throwable failure;\r\n\r\n        @Override\r\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n            if(checkExisting(action)) return true;\r\n\r\n            while(srcSp.tryAdvance(this::checkNew)) {\r\n                if(checkExisting(action)) return true;\r\n            }\r\n\r\n            return checkAfterSourceExhausted(action);\r\n        }\r\n        private boolean checkExisting(Consumer&lt;? super T&gt; action) {\r\n            for(;;) {\r\n                var sp = fromCurrentList;\r\n                if(sp == null) {\r\n                    List&lt;T&gt; newList = queue.poll();\r\n                    if(newList == null) return false;\r\n                    fromCurrentList = sp = newList.spliterator();\r\n                }\r\n                if(sp.tryAdvance(action)) return true;\r\n                fromCurrentList = null;\r\n            }\r\n        }\r\n\r\n        private void checkNew(CompletableFuture&lt;List&lt;T&gt;&gt; f) {\r\n            if(f.isDone()) fromCurrentList = f.join().spliterator();\r\n            else {\r\n                pending.incrementAndGet();\r\n                f.whenComplete((r, t) -&gt; {\r\n                    if(t != null) {\r\n                        failure = t;\r\n                        r = List.of();\r\n                    }\r\n                    queue.offer(r);\r\n                    pending.decrementAndGet();\r\n                });\r\n            }\r\n        }\r\n\r\n        private boolean checkAfterSourceExhausted(Consumer&lt;? super T&gt; action) {\r\n            while(pending.get() != 0 || !queue.isEmpty()) {\r\n                checkFailure();\r\n                try {\r\n                    List&lt;T&gt; newList = queue.take();\r\n                    fromCurrentList = newList.spliterator();\r\n                    if(checkExisting(action)) return true;\r\n                } catch(InterruptedException ex) {\r\n                    throw new CompletionException(ex);\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        private void checkFailure() {\r\n            Throwable t = failure;\r\n            if(t != null) {\r\n                if(t instanceof RuntimeException rt) throw rt;\r\n                if(t instanceof Error e) throw e;\r\n                throw new CompletionException(t);\r\n            }\r\n        }\r\n    }, false);\r\n}\r\n```\r\n\r\n---\r\n\r\nYou may use something like\r\n\r\n```java\r\nStream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = IntStream.range(0, 10)\r\n    .mapToObj(i -&gt; \r\n      CompletableFuture.supplyAsync(\r\n        () -&gt; IntStream.range(i * 10, (i + 1) * 10).boxed().toList(),\r\n        CompletableFuture.delayedExecutor(10 - i, TimeUnit.SECONDS)));\r\n\r\nSystem.out.println(flattenResults(streamOfFutures)\r\n    .peek(System.out::println)\r\n    .anyMatch(i -&gt; i == 34)\r\n);\r\n```\r\n\r\nto visualize the “first completed, first processed”. Or change the terminal operation to\r\n\r\n```java\r\nflattenResults(streamOfFutures).forEach(System.out::println);\r\n```\r\n\r\nto demonstrate the completion of all futures is correctly recognized or\r\n\r\n```java\r\nif(flattenResults(streamOfFutures).count() != 100)\r\n    throw new AssertionError();\r\nelse\r\n    System.out.println(&quot;Success&quot;);\r\n```\r\n\r\nto have something which can be integrated into automated test.\r\n","title":"How to flatten a list inside a stream of completable futures?","body":"<p>Here is a solution which not only avoids blocking, by preferring to process already completed futures, it even retains lazy processing of the original stream, as far as possible. As long as there are completed futures among the already encountered futures it will not advance in the source traversal.</p>\n<p>This is best demonstrated by an example using an <em>infinite</em> source which still can complete in finite time (and quite fast due to the preference of completed futures).</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = Stream.generate(\n    () -&gt; CompletableFuture.supplyAsync(\n        () -&gt; ThreadLocalRandom.current().ints(10, 0, 200).boxed().toList(),\n        CompletableFuture.delayedExecutor(\n            ThreadLocalRandom.current().nextLong(5), TimeUnit.SECONDS))\n);\nSystem.out.println(flattenResults(streamOfFutures)\n    .peek(System.out::println)\n    .anyMatch(i -&gt; i == 123)\n);\n</code></pre>\n<p>The implementation will process already completed futures immediately on encounter. Only if the future has not been completed yet, a queuing action will be chained and the pending counter increased. Care must be taken to decrease the counter even on exceptional completion and to queue an item (an empty list), to unblock the consumer thread in case it’s taking an element right at this point. The exception will be propagated to the caller when encountered. Like with short-circuiting parallel streams, it’s possible to miss errors if the result is found before processing all elements.</p>\n<p>If the terminal operation is short-circuiting and finishes without processing the entire stream, the counter is irrelevant and the operation will not wait for the completion of pending futures. Only when the source stream has been traversed completely, the counter becomes relevant for detecting when all futures have been completed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;T&gt; Stream&lt;T&gt; flattenResults(Stream&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; stream) {\n    Spliterator&lt;CompletableFuture&lt;List&lt;T&gt;&gt;&gt; srcSp = stream.spliterator();\n    BlockingQueue&lt;List&lt;T&gt;&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n\n    return StreamSupport.stream(new Spliterators.AbstractSpliterator&lt;T&gt;(\n                                                 srcSp.estimateSize(), 0) {\n        final AtomicLong pending = new AtomicLong();\n        Spliterator&lt;T&gt; fromCurrentList;\n        Throwable failure;\n\n        @Override\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n            if(checkExisting(action)) return true;\n\n            while(srcSp.tryAdvance(this::checkNew)) {\n                if(checkExisting(action)) return true;\n            }\n\n            return checkAfterSourceExhausted(action);\n        }\n        private boolean checkExisting(Consumer&lt;? super T&gt; action) {\n            for(;;) {\n                var sp = fromCurrentList;\n                if(sp == null) {\n                    List&lt;T&gt; newList = queue.poll();\n                    if(newList == null) return false;\n                    fromCurrentList = sp = newList.spliterator();\n                }\n                if(sp.tryAdvance(action)) return true;\n                fromCurrentList = null;\n            }\n        }\n\n        private void checkNew(CompletableFuture&lt;List&lt;T&gt;&gt; f) {\n            if(f.isDone()) fromCurrentList = f.join().spliterator();\n            else {\n                pending.incrementAndGet();\n                f.whenComplete((r, t) -&gt; {\n                    if(t != null) {\n                        failure = t;\n                        r = List.of();\n                    }\n                    queue.offer(r);\n                    pending.decrementAndGet();\n                });\n            }\n        }\n\n        private boolean checkAfterSourceExhausted(Consumer&lt;? super T&gt; action) {\n            while(pending.get() != 0 || !queue.isEmpty()) {\n                checkFailure();\n                try {\n                    List&lt;T&gt; newList = queue.take();\n                    fromCurrentList = newList.spliterator();\n                    if(checkExisting(action)) return true;\n                } catch(InterruptedException ex) {\n                    throw new CompletionException(ex);\n                }\n            }\n            return false;\n        }\n\n        private void checkFailure() {\n            Throwable t = failure;\n            if(t != null) {\n                if(t instanceof RuntimeException rt) throw rt;\n                if(t instanceof Error e) throw e;\n                throw new CompletionException(t);\n            }\n        }\n    }, false);\n}\n</code></pre>\n<hr />\n<p>You may use something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;CompletableFuture&lt;List&lt;Integer&gt;&gt;&gt; streamOfFutures = IntStream.range(0, 10)\n    .mapToObj(i -&gt; \n      CompletableFuture.supplyAsync(\n        () -&gt; IntStream.range(i * 10, (i + 1) * 10).boxed().toList(),\n        CompletableFuture.delayedExecutor(10 - i, TimeUnit.SECONDS)));\n\nSystem.out.println(flattenResults(streamOfFutures)\n    .peek(System.out::println)\n    .anyMatch(i -&gt; i == 34)\n);\n</code></pre>\n<p>to visualize the “first completed, first processed”. Or change the terminal operation to</p>\n<pre class=\"lang-java prettyprint-override\"><code>flattenResults(streamOfFutures).forEach(System.out::println);\n</code></pre>\n<p>to demonstrate the completion of all futures is correctly recognized or</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(flattenResults(streamOfFutures).count() != 100)\n    throw new AssertionError();\nelse\n    System.out.println(&quot;Success&quot;);\n</code></pre>\n<p>to have something which can be integrated into automated test.</p>\n"}],"owner":{"account_id":66899,"reputation":11449,"user_id":196032,"accept_rate":49,"display_name":"Alex R"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1438,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"accepted_answer_id":77260684,"answer_count":8,"score":10,"last_activity_date":1697257837,"creation_date":1570929884,"question_id":58359879,"body_markdown":"I have this:\r\n\r\n    Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\r\n\r\nhow can I convert it to\r\n\r\n    Stream&lt;CompletableFuture&lt;Item&gt;&gt;\r\n\r\nWhere: the second stream is comprised of each and all the Items inside each of the lists in the first stream.\r\n\r\nI looked into `thenCompose` but that solves a completely different problem which is also referred to as &quot;flattening&quot;.\r\n\r\nHow can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?\r\n\r\nHere is my best attempt so far:\r\n\r\n\t\tExecutorService pool = Executors.newFixedThreadPool(PARALLELISM);\r\n\t\tStream&lt;CompletableFuture&lt;List&lt;IncomingItem&gt;&gt;&gt; reload = ... ;\r\n\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tCompletableFuture&lt;List&lt;IncomingItem&gt;&gt; allFutures[] = reload.toArray(CompletableFuture[]::new);\r\n\t\tCompletionService&lt;List&lt;IncomingItem&gt;&gt; queue = new ExecutorCompletionService&lt;&gt;(pool);\r\n\t\tfor(CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; item: allFutures) {\r\n\t\t\tqueue.submit(item::get);\r\n\t\t}\r\n\t\tList&lt;IncomingItem&gt; THE_END = new ArrayList&lt;IncomingItem&gt;();\r\n\t\tCompletableFuture&lt;List&lt;IncomingItem&gt;&gt; ender = CompletableFuture.allOf(allFutures).thenApply(whatever -&gt; {\r\n\t\t\tqueue.submit(() -&gt; THE_END);\r\n\t\t\treturn THE_END;\r\n\t\t});\r\n\t\tqueue.submit(() -&gt; ender.get());\r\n\t\tIterable&lt;List&lt;IncomingItem&gt;&gt; iter = () -&gt; new Iterator&lt;List&lt;IncomingItem&gt;&gt;() {\r\n\t\t\tboolean checkNext = true;\r\n\t\t\tList&lt;IncomingItem&gt; next = null;\r\n\t\t\t@Override\r\n\t\t\tpublic boolean hasNext() {\r\n\t\t\t\tif(checkNext) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tnext = queue.take().get();\r\n\t\t\t\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckNext = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(next == THE_END || next == null) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t@Override\r\n\t\t\tpublic List&lt;IncomingItem&gt; next() {\r\n\t\t\t\tif(checkNext) {\r\n\t\t\t\t\thasNext();\r\n\t\t\t\t}\r\n\t\t\t\tif(!hasNext()) {\r\n\t\t\t\t\tthrow new IllegalStateException();\r\n\t\t\t\t}\r\n\t\t\t\tcheckNext = true;\r\n\t\t\t\treturn next;\r\n\t\t\t}\r\n\t\t};\r\n\t\tStream&lt;IncomingItem&gt; flat = StreamSupport.stream(iter.spliterator(), false).flatMap(List::stream);\r\n\r\nThis works at first, unfortunately, it has a fatal bug: the resulting stream seems to terminate prematurely, before retrieving all the items.\r\n\r\n**2023 UPDATE**\r\n\r\nFour years later, I still have not chosen an answer, because both answers at the moment are saying this is &quot;impossible&quot;. That doesn&#39;t sound right. I&#39;m simply asking for an efficient way to take items that are completed in batches and be able to monitor their completion individually. Perhaps this is easier with Virtual Threads in Java 21? I no longer maintain this codebase but the question remains a great unsolved problem.\r\n\r\nUpdate#2: Clarification of assumptions\r\n\r\n`CompletableFuture` _represents a future result of an asynchronous computation_ according to https://www.geeksforgeeks.org/completablefuture-in-java/ ... interestingly the [JavaDocs][1] are not quite as clear.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\r\n\r\nUpdate#3:\r\n\r\nPerformance is not the focus of the question, only efficiency, in a specific sense: if task 1 takes T1 to complete and task 2 takes T2 to complete, then waiting for a total of `max(T1,T2)` time for completion is more efficient than waiting for `T1+T2` time. Then extend that to `N`-sized lists of tasks `T, U, V, ...`, and it probably looks something like `max(T1..Tn)+max(U1..Un)+max(V1..Vn)` or hopefully `max(T1..Vn)`. Assuming the same N for all lists here is only an explanatory simplification (really should be `I`, `J`, `K`...). In other words, please assume that the asynchronous tasks which are represented in the Stream of Lists are I/O bound, not CPU-bound. This can be simulated by inserting random `Thread.sleep()` if you wish to demonstrate something in code. Apologies for the sloppy notation - I have a background in Computer Science but it&#39;s been a while since I&#39;ve tried to formally describe a problem like this.\r\n\r\n**Update#4**\r\n\r\nBased on the answer from @Slaw, I can see that the core problem I was facing is the mismatch between *stream arrival order* (the order in which futures are provided through the `Stream`) and *future completion order* (the order in which each `CompletableFuture` completes execution and unlocks the `List` within it). So a **new revised TL;DR** for this question is: *How can you take a `Stream` that&#39;s produced in arbitrary order, and re-order it into futures execution completion order, so that a `flatMap()` operation will not block unnecessarily?*","title":"How to flatten a list inside a stream of completable futures?","body":"<p>I have this:</p>\n<pre><code>Stream&lt;CompletableFuture&lt;List&lt;Item&gt;&gt;&gt;\n</code></pre>\n<p>how can I convert it to</p>\n<pre><code>Stream&lt;CompletableFuture&lt;Item&gt;&gt;\n</code></pre>\n<p>Where: the second stream is comprised of each and all the Items inside each of the lists in the first stream.</p>\n<p>I looked into <code>thenCompose</code> but that solves a completely different problem which is also referred to as &quot;flattening&quot;.</p>\n<p>How can this be done efficiently, in a streaming fashion, without blocking or prematurely consuming more stream items than necessary?</p>\n<p>Here is my best attempt so far:</p>\n<pre><code>    ExecutorService pool = Executors.newFixedThreadPool(PARALLELISM);\n    Stream&lt;CompletableFuture&lt;List&lt;IncomingItem&gt;&gt;&gt; reload = ... ;\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; allFutures[] = reload.toArray(CompletableFuture[]::new);\n    CompletionService&lt;List&lt;IncomingItem&gt;&gt; queue = new ExecutorCompletionService&lt;&gt;(pool);\n    for(CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; item: allFutures) {\n        queue.submit(item::get);\n    }\n    List&lt;IncomingItem&gt; THE_END = new ArrayList&lt;IncomingItem&gt;();\n    CompletableFuture&lt;List&lt;IncomingItem&gt;&gt; ender = CompletableFuture.allOf(allFutures).thenApply(whatever -&gt; {\n        queue.submit(() -&gt; THE_END);\n        return THE_END;\n    });\n    queue.submit(() -&gt; ender.get());\n    Iterable&lt;List&lt;IncomingItem&gt;&gt; iter = () -&gt; new Iterator&lt;List&lt;IncomingItem&gt;&gt;() {\n        boolean checkNext = true;\n        List&lt;IncomingItem&gt; next = null;\n        @Override\n        public boolean hasNext() {\n            if(checkNext) {\n                try {\n                    next = queue.take().get();\n                } catch (InterruptedException | ExecutionException e) {\n                    throw new RuntimeException(e);\n                }\n                checkNext = false;\n            }\n            if(next == THE_END || next == null) {\n                return false;\n            }\n            else {\n                return true;\n            }\n        }\n        @Override\n        public List&lt;IncomingItem&gt; next() {\n            if(checkNext) {\n                hasNext();\n            }\n            if(!hasNext()) {\n                throw new IllegalStateException();\n            }\n            checkNext = true;\n            return next;\n        }\n    };\n    Stream&lt;IncomingItem&gt; flat = StreamSupport.stream(iter.spliterator(), false).flatMap(List::stream);\n</code></pre>\n<p>This works at first, unfortunately, it has a fatal bug: the resulting stream seems to terminate prematurely, before retrieving all the items.</p>\n<p><strong>2023 UPDATE</strong></p>\n<p>Four years later, I still have not chosen an answer, because both answers at the moment are saying this is &quot;impossible&quot;. That doesn't sound right. I'm simply asking for an efficient way to take items that are completed in batches and be able to monitor their completion individually. Perhaps this is easier with Virtual Threads in Java 21? I no longer maintain this codebase but the question remains a great unsolved problem.</p>\n<p>Update#2: Clarification of assumptions</p>\n<p><code>CompletableFuture</code> <em>represents a future result of an asynchronous computation</em> according to <a href=\"https://www.geeksforgeeks.org/completablefuture-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/completablefuture-in-java/</a> ... interestingly the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">JavaDocs</a> are not quite as clear.</p>\n<p>Update#3:</p>\n<p>Performance is not the focus of the question, only efficiency, in a specific sense: if task 1 takes T1 to complete and task 2 takes T2 to complete, then waiting for a total of <code>max(T1,T2)</code> time for completion is more efficient than waiting for <code>T1+T2</code> time. Then extend that to <code>N</code>-sized lists of tasks <code>T, U, V, ...</code>, and it probably looks something like <code>max(T1..Tn)+max(U1..Un)+max(V1..Vn)</code> or hopefully <code>max(T1..Vn)</code>. Assuming the same N for all lists here is only an explanatory simplification (really should be <code>I</code>, <code>J</code>, <code>K</code>...). In other words, please assume that the asynchronous tasks which are represented in the Stream of Lists are I/O bound, not CPU-bound. This can be simulated by inserting random <code>Thread.sleep()</code> if you wish to demonstrate something in code. Apologies for the sloppy notation - I have a background in Computer Science but it's been a while since I've tried to formally describe a problem like this.</p>\n<p><strong>Update#4</strong></p>\n<p>Based on the answer from @Slaw, I can see that the core problem I was facing is the mismatch between <em>stream arrival order</em> (the order in which futures are provided through the <code>Stream</code>) and <em>future completion order</em> (the order in which each <code>CompletableFuture</code> completes execution and unlocks the <code>List</code> within it). So a <strong>new revised TL;DR</strong> for this question is: <em>How can you take a <code>Stream</code> that's produced in arbitrary order, and re-order it into futures execution completion order, so that a <code>flatMap()</code> operation will not block unnecessarily?</em></p>\n"},{"tags":["java","json","spring","performance","coding-style"],"comments":[{"owner":{"account_id":11244318,"reputation":389,"user_id":8247530,"display_name":"Rifat Rubayatul Islam"},"score":1,"creation_date":1697282303,"post_id":77291509,"comment_id":136262052,"body_markdown":"Why not use a map like you are using to generate the `json` object using `gson`?","body":"Why not use a map like you are using to generate the <code>json</code> object using <code>gson</code>?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697468820,"post_id":77291509,"comment_id":136280561,"body_markdown":"First of all, this is not even valid Java code. You don’t see a difference between these variants as the surrounding code, most likely code sending requests over the network dominates the execution time. Even if you look at the string generation in isolation, the work hidden beneath the `JSONObject` outweighs your processing of the eight strings. If seven of these strings are constants, why don’t write the JSON string in the first place, `String result = &quot;&quot;&quot; { &quot;schema&quot;: &quot;dbtrial&quot;, &quot;tablename&quot; : &quot;mastercustomer&quot;, &quot;where&quot; : &quot;&quot;&quot; + json + &quot;&quot;&quot;, &quot;clause&quot;: &quot;sort=id,date_&amp;limit=10&quot; } &quot;&quot;&quot;;`","body":"First of all, this is not even valid Java code. You don’t see a difference between these variants as the surrounding code, most likely code sending requests over the network dominates the execution time. Even if you look at the string generation in isolation, the work hidden beneath the <code>JSONObject</code> outweighs your processing of the eight strings. If seven of these strings are constants, why don’t write the JSON string in the first place, <code>String result = &quot;&quot;&quot; { &quot;schema&quot;: &quot;dbtrial&quot;, &quot;tablename&quot; : &quot;mastercustomer&quot;, &quot;where&quot; : &quot;&quot;&quot; + json + &quot;&quot;&quot;, &quot;clause&quot;: &quot;sort=id,date_&amp;limit=10&quot; } &quot;&quot;&quot;;</code>"}],"answers":[{"tags":[],"owner":{"account_id":29374668,"reputation":1,"user_id":22506512,"display_name":"fasthosting"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697257259,"creation_date":1697257259,"answer_id":77291610,"question_id":77291509,"body_markdown":"Your attempt to use arrays for `keyParams` and `valueParams` is a good idea to make the code cleaner and more maintainable. However, there&#39;s a minor issue with the way you&#39;re initializing arrays in Java. Here&#39;s the corrected code:\r\n\r\n    import org.json.JSONObject;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            JSONObject tempParam = new JSONObject();\r\n            tempParam.put(&quot;custid&quot;, &quot;123&quot;);\r\n            String json = tempParam.toString();\r\n    \r\n            String[] keyParams = {&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;};\r\n            String[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\r\n    \r\n            String res = genJSON(keyParams, valueParams);\r\n            System.out.println(res);\r\n        }\r\n    \r\n        public static String genJSON(String[] keyParams, String[] valueParams) {\r\n            JSONObject objectMessage = new JSONObject();\r\n            for (int i = 0; i &lt; keyParams.length; i++) {\r\n                objectMessage.put(keyParams[i], valueParams[i]);\r\n            }\r\n    \r\n            return objectMessage.toString();\r\n        }\r\n    }\r\n\r\n\r\nThis code will work as expected, and it&#39;s a cleaner way to manage your `keyParams` and `valueParams`. The main advantage of using arrays is that it allows for better organization and readability of your code, especially if the number of parameters grows.\r\n","title":"How to generate JSON in Java with clean code","body":"<p>Your attempt to use arrays for <code>keyParams</code> and <code>valueParams</code> is a good idea to make the code cleaner and more maintainable. However, there's a minor issue with the way you're initializing arrays in Java. Here's the corrected code:</p>\n<pre><code>import org.json.JSONObject;\n\npublic class Main {\n    public static void main(String[] args) {\n        JSONObject tempParam = new JSONObject();\n        tempParam.put(&quot;custid&quot;, &quot;123&quot;);\n        String json = tempParam.toString();\n\n        String[] keyParams = {&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;};\n        String[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\n\n        String res = genJSON(keyParams, valueParams);\n        System.out.println(res);\n    }\n\n    public static String genJSON(String[] keyParams, String[] valueParams) {\n        JSONObject objectMessage = new JSONObject();\n        for (int i = 0; i &lt; keyParams.length; i++) {\n            objectMessage.put(keyParams[i], valueParams[i]);\n        }\n\n        return objectMessage.toString();\n    }\n}\n</code></pre>\n<p>This code will work as expected, and it's a cleaner way to manage your <code>keyParams</code> and <code>valueParams</code>. The main advantage of using arrays is that it allows for better organization and readability of your code, especially if the number of parameters grows.</p>\n"}],"owner":{"account_id":14055666,"reputation":15,"user_id":10153085,"display_name":"mr.Gondar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697257259,"creation_date":1697254053,"question_id":77291509,"body_markdown":"I have code like this:\r\n\r\n\r\n```\r\nMap&lt;String, Object&gt; tempParam = new HashMap&lt;&gt;();\r\ntempParam.put(&quot;custid&quot;, &quot;123&quot;);\r\njson = gson.toJson(tempParam);\r\n\r\nString keyParams = &quot;schema;tablename;where;clause&quot;;\r\nString valueParams = &quot;dbtrial;mastercustomer;&quot;+json+&quot;;sort=id,date_&amp;limit=10&quot;;\r\n\r\nString res = genJSON(keyParams, valueParams);\r\n\r\nfunction genJSON(String keyParams, String valueParams){\r\n\r\n\tString[] key = keyParams.split(&quot;;&quot;);\r\n\tString[] value = valueParams.split(&quot;;&quot;);\r\n\r\n\tJSONObject objectMessage = new JSONObject();\r\n\tfor(int i = 0 ; i &lt; key.length ; i++){\r\n\t\tobjectMessage.put(key[i], value[i]);\r\n\t}\r\n\r\n\treturn objectMessage.toString();\r\n\t\r\n}\r\n\r\n```\r\n\r\nMy concern is the way of writing with semicolon separators, then split, \r\nIs there another way that is simpler or more effective ? can we make it more dynamicly ?\r\nbecause the &quot;genJSON&quot; function will be used globally for various needs.\r\nat least I want clean code.\r\n\r\nI&#39;ve tried using arrays like this, but it doesn&#39;t seem to make much of a difference.\r\n\r\n\r\n```\r\nString[] keyParams = [&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;];\r\nString[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\r\n\r\nfunction genJSON(String[] keyParams, String[] valueParams){\r\n\r\n\tJSONObject objectMessage = new JSONObject();\r\n\tfor(int i = 0 ; i &lt; keyParams.length ; i++){\r\n\t\tobjectMessage.put(keyParams[i], valueParams[i]);\r\n\t}\r\n\r\n\treturn objectMessage.toString();\r\n}\r\n```\r\nDo you have any other thoughts or suggestions that might be better?\r\n\r\n\r\n\r\n\r\n*I used java 7*\r\n","title":"How to generate JSON in Java with clean code","body":"<p>I have code like this:</p>\n<pre><code>Map&lt;String, Object&gt; tempParam = new HashMap&lt;&gt;();\ntempParam.put(&quot;custid&quot;, &quot;123&quot;);\njson = gson.toJson(tempParam);\n\nString keyParams = &quot;schema;tablename;where;clause&quot;;\nString valueParams = &quot;dbtrial;mastercustomer;&quot;+json+&quot;;sort=id,date_&amp;limit=10&quot;;\n\nString res = genJSON(keyParams, valueParams);\n\nfunction genJSON(String keyParams, String valueParams){\n\n    String[] key = keyParams.split(&quot;;&quot;);\n    String[] value = valueParams.split(&quot;;&quot;);\n\n    JSONObject objectMessage = new JSONObject();\n    for(int i = 0 ; i &lt; key.length ; i++){\n        objectMessage.put(key[i], value[i]);\n    }\n\n    return objectMessage.toString();\n    \n}\n\n</code></pre>\n<p>My concern is the way of writing with semicolon separators, then split,\nIs there another way that is simpler or more effective ? can we make it more dynamicly ?\nbecause the &quot;genJSON&quot; function will be used globally for various needs.\nat least I want clean code.</p>\n<p>I've tried using arrays like this, but it doesn't seem to make much of a difference.</p>\n<pre><code>String[] keyParams = [&quot;schema&quot;, &quot;tablename&quot;, &quot;where&quot;, &quot;clause&quot;];\nString[] valueParams = {&quot;dbtrial&quot;, &quot;mastercustomer&quot;, json, &quot;sort=id,date_&amp;limit=10&quot;};\n\nfunction genJSON(String[] keyParams, String[] valueParams){\n\n    JSONObject objectMessage = new JSONObject();\n    for(int i = 0 ; i &lt; keyParams.length ; i++){\n        objectMessage.put(keyParams[i], valueParams[i]);\n    }\n\n    return objectMessage.toString();\n}\n</code></pre>\n<p>Do you have any other thoughts or suggestions that might be better?</p>\n<p><em>I used java 7</em></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9792,"page":125,"page_size":100}
