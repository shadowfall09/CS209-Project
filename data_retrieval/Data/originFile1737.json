{"items":[{"tags":["java","jsp","jsf","servlets","jsf-2"],"comments":[{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1640082253,"post_id":70433123,"comment_id":124505436,"body_markdown":"The 1st dupe explains the JSF approach and the 2nd dupe explains the &quot;plain vanilla&quot; JSP/Servlet approach.","body":"The 1st dupe explains the JSF approach and the 2nd dupe explains the &quot;plain vanilla&quot; JSP/Servlet approach."}],"answers":[{"tags":[],"owner":{"account_id":2789962,"reputation":354,"user_id":2400380,"accept_rate":40,"display_name":"Amir M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640079154,"creation_date":1640079154,"answer_id":70433233,"question_id":70433123,"body_markdown":"You can use context path.\r\n\r\nYou link will be like `href=${pageContext.request.contextPath}/about.jsp`.","title":"How to generate a link in JSP to JSP file located into WEB-INF folder","body":"<p>You can use context path.</p>\n<p>You link will be like <code>href=${pageContext.request.contextPath}/about.jsp</code>.</p>\n"}],"owner":{"account_id":21213800,"reputation":1,"user_id":15601829,"display_name":"Nassim Bendjillali"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640082153,"answer_count":1,"score":0,"last_activity_date":1640288650,"creation_date":1640078575,"question_id":70433123,"body_markdown":"I did : /WEB-INF/index.jsp.\r\nInto index.jsp, I have a links to another .jsp&#39;s files like about.jsp ...etc\r\nBut how to generate this link ?\r\nhref=&quot;about.jsp&quot; doesn&#39;t work, it is normal because folder WEB-INF is protected by tomcat. ","title":"How to generate a link in JSP to JSP file located into WEB-INF folder","body":"<p>I did : /WEB-INF/index.jsp.\nInto index.jsp, I have a links to another .jsp's files like about.jsp ...etc\nBut how to generate this link ?\nhref=&quot;about.jsp&quot; doesn't work, it is normal because folder WEB-INF is protected by tomcat.</p>\n"},{"tags":["java","arrays","performance","arraylist"],"comments":[{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":1,"creation_date":1640251042,"post_id":70458085,"comment_id":124551996,"body_markdown":"`List.removeIf` is available since Java 8. What java version are you using?","body":"<code>List.removeIf</code> is available since Java 8. What java version are you using?"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640287869,"creation_date":1640287869,"answer_id":70466637,"question_id":70458085,"body_markdown":"If the task is just **to find** the K-th largest element, nothing should be _removed_ from the list/array.\r\n\r\nJust sort the array and return the k-th value counting from the end:\r\n```java\r\npublic static int findKthLargest(int[] nums, int k) {\r\n    assert(k &gt; 0 &amp;&amp; k &lt; nums.length); // make sure k is valid\r\n    Arrays.sort(nums);\r\n    return nums[nums.length - k];\r\n}\r\n```","title":"Error with List.removeIf - Kth Largest Element in an Array","body":"<p>If the task is just <strong>to find</strong> the K-th largest element, nothing should be <em>removed</em> from the list/array.</p>\n<p>Just sort the array and return the k-th value counting from the end:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int findKthLargest(int[] nums, int k) {\n    assert(k &gt; 0 &amp;&amp; k &lt; nums.length); // make sure k is valid\n    Arrays.sort(nums);\n    return nums[nums.length - k];\n}\n</code></pre>\n"}],"owner":{"account_id":7262620,"reputation":301,"user_id":5538685,"display_name":"ZaneK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70466637,"answer_count":1,"score":0,"last_activity_date":1640287869,"creation_date":1640238126,"question_id":70458085,"body_markdown":"I am trying to find the Kth largest element in an array.\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\nclass Solution {\r\n    public int findKthLargest(int[] nums, int k) {\r\n        //List&lt;Integer&gt; list = Arrays.asList(nums); \r\n        List&lt;Integer&gt; list = IntStream.of(nums).boxed().collect(Collectors.toList());\r\n        int max = nums[0];\r\n\r\n        for(int x = 1; x&lt;=k; x++){\r\n            for(int y = 1; y&lt;list.size(); y++){\r\n                int temp;\r\n                if (nums[y] &gt; max) {\r\n                    max = nums[y];\r\n                    temp = max;\r\n                }\r\n            }\r\n        list.removeIf(value -&gt; value.equals(temp.valueOf()));\r\n        }\r\n    return max;\r\n    }\r\n}\r\n``` \r\n\r\nI am hit with the error:\r\n\r\nLine 20: error: cannot find symbol\r\n        list.removeIf(value -&gt; value.equals(temp.valueOf()));\r\n                                            ^\r\n  symbol:   variable temp\r\n  location: class Solution\r\n\r\n\r\nAnd if I move int temp in between the two for loop statements, I get this error.\r\n\r\nLine 21: error: int cannot be dereferenced\r\n        list.removeIf(value -&gt; value.equals(temp.valueOf()));\r\n                                                ^\r\n","title":"Error with List.removeIf - Kth Largest Element in an Array","body":"<p>I am trying to find the Kth largest element in an array.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\nclass Solution {\n    public int findKthLargest(int[] nums, int k) {\n        //List&lt;Integer&gt; list = Arrays.asList(nums); \n        List&lt;Integer&gt; list = IntStream.of(nums).boxed().collect(Collectors.toList());\n        int max = nums[0];\n\n        for(int x = 1; x&lt;=k; x++){\n            for(int y = 1; y&lt;list.size(); y++){\n                int temp;\n                if (nums[y] &gt; max) {\n                    max = nums[y];\n                    temp = max;\n                }\n            }\n        list.removeIf(value -&gt; value.equals(temp.valueOf()));\n        }\n    return max;\n    }\n}\n</code></pre>\n<p>I am hit with the error:</p>\n<p>Line 20: error: cannot find symbol\nlist.removeIf(value -&gt; value.equals(temp.valueOf()));\n^\nsymbol:   variable temp\nlocation: class Solution</p>\n<p>And if I move int temp in between the two for loop statements, I get this error.</p>\n<p>Line 21: error: int cannot be dereferenced\nlist.removeIf(value -&gt; value.equals(temp.valueOf()));\n^</p>\n"},{"tags":["java","android","sip"],"answers":[{"tags":[],"owner":{"account_id":1518837,"reputation":2588,"user_id":1419134,"display_name":"jcm"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1386943033,"creation_date":1386930179,"answer_id":20564060,"question_id":20563566,"body_markdown":"SIP is a transaction based protocol, this means, every negotiation process is a transaction (e.g. a basic registration process would imply sending a REISTER request and receive 200 OK response). I posted a small example in [this](https://stackoverflow.com/a/20443357/1419134) response.\r\n\r\nIN_PROGRESS error initially indicates that you tried to start a new transaction, in your scenario you&#39;re trying to send a REGISTER request, when client is already in another related one.\r\n\r\nA quite typical scenario is, in a fast logout/login, trying to register when unregistration process is still running (no 200 OK final response has been received).\r\n\r\nMain problem regarding Android&#39;s SIP implementation and this error code is that it&#39;s used when as generic error when processing a SIP request fails so, previous meaning loses its significance. \r\n\r\nBecause of previous problem you would need to check logcat to get more information (you should see something like &quot;~~~~~ SipSessionGroup:&lt;STATE&gt;: processing &lt;REQUEST&gt;&quot;) but, best way to handle this, would be working with different listeners provided by the stack.\r\n\r\nThe stack provides two listeners that can get registration errors: [SipRegistrationListener](https://developer.android.com/reference/android/net/sip/SipRegistrationListener.html) and [SipSession.Listener](https://developer.android.com/reference/android/net/sip/SipSession.Listener.html). Both provides [onRegistrationFailed](https://developer.android.com/reference/android/net/sip/SipRegistrationListener.html#onRegistrationFailed%28java.lang.String,%20int,%20java.lang.String%29) callback but, later one, also provides [onRegistrationTimeout](https://developer.android.com/reference/android/net/sip/SipSession.Listener.html#onRegistrationTimeout%28android.net.sip.SipSession%29), that can be quite helpful. Actually, you already used SipRegistrationListener in your code but I don&#39;t really get why you say that it should be set after `open` because `open` would try to automatically register and, if some error occurs, you won&#39;t be notified.\r\n\r\nOn the other hand, main problem with this listeners is that registration can fail because of several reason (you can check a list of different error responses [here](https://en.wikipedia.org/wiki/SIP_Responses#4xx.E2.80.94Client_Failure_Responses)) and current implementation only notifies of error codes &gt;= 500 (those are server and global failures) but not others like quite common 406. This is, in my opinion, an important bug in this stack. \r\n\r\n","title":"Sip Error while registration","body":"<p>SIP is a transaction based protocol, this means, every negotiation process is a transaction (e.g. a basic registration process would imply sending a REISTER request and receive 200 OK response). I posted a small example in <a href=\"https://stackoverflow.com/a/20443357/1419134\">this</a> response.</p>\n\n<p>IN_PROGRESS error initially indicates that you tried to start a new transaction, in your scenario you're trying to send a REGISTER request, when client is already in another related one.</p>\n\n<p>A quite typical scenario is, in a fast logout/login, trying to register when unregistration process is still running (no 200 OK final response has been received).</p>\n\n<p>Main problem regarding Android's SIP implementation and this error code is that it's used when as generic error when processing a SIP request fails so, previous meaning loses its significance. </p>\n\n<p>Because of previous problem you would need to check logcat to get more information (you should see something like \"~~~~~ SipSessionGroup:: processing \") but, best way to handle this, would be working with different listeners provided by the stack.</p>\n\n<p>The stack provides two listeners that can get registration errors: <a href=\"https://developer.android.com/reference/android/net/sip/SipRegistrationListener.html\" rel=\"nofollow noreferrer\">SipRegistrationListener</a> and <a href=\"https://developer.android.com/reference/android/net/sip/SipSession.Listener.html\" rel=\"nofollow noreferrer\">SipSession.Listener</a>. Both provides <a href=\"https://developer.android.com/reference/android/net/sip/SipRegistrationListener.html#onRegistrationFailed%28java.lang.String,%20int,%20java.lang.String%29\" rel=\"nofollow noreferrer\">onRegistrationFailed</a> callback but, later one, also provides <a href=\"https://developer.android.com/reference/android/net/sip/SipSession.Listener.html#onRegistrationTimeout%28android.net.sip.SipSession%29\" rel=\"nofollow noreferrer\">onRegistrationTimeout</a>, that can be quite helpful. Actually, you already used SipRegistrationListener in your code but I don't really get why you say that it should be set after <code>open</code> because <code>open</code> would try to automatically register and, if some error occurs, you won't be notified.</p>\n\n<p>On the other hand, main problem with this listeners is that registration can fail because of several reason (you can check a list of different error responses <a href=\"https://en.wikipedia.org/wiki/SIP_Responses#4xx.E2.80.94Client_Failure_Responses\" rel=\"nofollow noreferrer\">here</a>) and current implementation only notifies of error codes >= 500 (those are server and global failures) but not others like quite common 406. This is, in my opinion, an important bug in this stack. </p>\n"}],"owner":{"account_id":2654025,"reputation":941,"user_id":2295102,"accept_rate":71,"display_name":"Sneha Bansal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3608,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":20564060,"answer_count":1,"score":8,"last_activity_date":1640287639,"creation_date":1386928627,"question_id":20563566,"body_markdown":"I am using native methods of sip calling and it is working fine but some time it is giving registration error IN_PROGRESS (Error Code -9 ) .I have search in Sip Error codes but dint find any error code of this kind . Here is my code for sip registration .PLease tell me if any one have idea about this error please tell me .\r\n\r\n    import android.app.Activity;\r\n    import android.app.Notification;\r\n    import android.app.NotificationManager;\r\n    import android.app.PendingIntent;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.SharedPreferences;\r\n    import android.os.Bundle;\r\n    import android.preference.PreferenceManager;\r\n    import android.util.Log;\r\n    import android.view.*;\r\n    import android.net.sip.*;\r\n    import java.text.ParseException;\r\n    /**\r\n     * Handles all calling, receiving calls, and UI interaction in the WalkieTalkie app.\r\n     */\r\n    public class WalkieTalkieActivity extends Activity implements View.OnTouchListener {\r\n    \r\n        public String sipAddress = null;\r\n        public static SipManager manager = null;\r\n        public static SipProfile me = null;\r\n        public SipAudioCall call = null;\r\n        public SipErrorCode sipcode;\r\n        public SipException sipexeception;\r\n        public static WalkieTalkieActivity walkiy;\r\n    \r\n        public static WalkieTalkieActivity getInstance() {\r\n            if (walkiy == null) {\r\n                walkiy = new WalkieTalkieActivity();\r\n            }\r\n            return walkiy;\r\n        }\r\n    \r\n        @\r\n        Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\r\n            Log.e(&quot;onCreate&quot;, &quot;onCreate&quot;);\r\n            initializeManager(this);\r\n        }\r\n    \r\n        @\r\n        Override\r\n        public void onStart() {\r\n            super.onStart();\r\n            // When we get back from the preference setting Activity, assume\r\n            // settings have changed, and re-login with new auth info.\r\n        }\r\n    \r\n        @\r\n        Override\r\n        public void onDestroy() {\r\n    \r\n            super.onDestroy();\r\n            if (call != null) {\r\n                call.close();\r\n            }\r\n            closeLocalProfile();\r\n        }\r\n    \r\n        @\r\n        Override\r\n        protected void onResume() {\r\n            initializeManager(this);\r\n            super.onResume();\r\n        }\r\n    \r\n        public void initializeManager(Context ctx) {\r\n    \r\n            Log.e(&quot;inilitize&quot;, &quot;initialize manager&quot;);\r\n    \r\n            if (manager == null) {\r\n                manager = SipManager.newInstance(ctx);\r\n    \r\n            }\r\n            initializeLocalProfile(ctx);\r\n        }\r\n    \r\n        /**\r\n         * Logs you into your SIP provider, registering this device as the location to\r\n         * send SIP calls to for your SIP address.\r\n         */\r\n        public void initializeLocalProfile(final Context ctx) {\r\n            Log.e(&quot;inilitize&quot;, &quot;initialize profile&quot;);\r\n            if (manager == null) {\r\n    \r\n                Log.e(&quot;inilitize&quot;, &quot;return in profile&quot;);\r\n                updateStatus(&quot;we are unable to establish this feature on your device &quot;, ctx);\r\n                Log.e(&quot;Wifi state&quot;, &quot;&quot; + SipManager.isSipWifiOnly(ctx));\r\n                return;\r\n            }\r\n            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);\r\n            String username = prefs.getString(&quot;namePref&quot;, &quot;XYZ&quot;);\r\n            String domain = prefs.getString(&quot;domainPref&quot;, &quot;236.343.230.2&quot;);\r\n            String password = prefs.getString(&quot;passPref&quot;, &quot;XYZ&quot;);\r\n    \r\n            try {\r\n                Log.e(&quot;inilitize&quot;, &quot;building profile &quot;);\r\n                SipProfile.Builder builder = new SipProfile.Builder(username, domain);\r\n                builder.setPassword(password);\r\n                me = builder.build();\r\n                manager.open(me);\r\n    \r\n                Log.e(&quot;alredy registered1&quot;, &quot;&quot; + manager.isRegistered(me.getUriString()));\r\n                try {\r\n                    if (manager.isRegistered(me.getUriString())) {\r\n    \r\n                        Log.e(&quot;alredy registered2&quot;, &quot;&quot; + manager.isRegistered(me.getUriString()));\r\n                        updateStatus(&quot;Ready&quot;, ctx);\r\n                        return;\r\n                    }\r\n    \r\n                } catch (SipException e) {\r\n                    // TODO Auto-generated catch block\r\n                    closeLocalProfile();\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n                manager.setRegistrationListener(me.getUriString(), new SipRegistrationListener() {\r\n                    public void onRegistering(String localProfileUri) {\r\n    \r\n                        Log.e(&quot;Sip restration&quot;, &quot;Registering with SIP Server...&quot; + me.getUriString());\r\n                        updateStatus(&quot;Registering with SIP Server...&quot;, ctx);\r\n                    }\r\n    \r\n                    public void onRegistrationDone(String localProfileUri, long expiryTime) {\r\n                        Log.e(&quot;Sip restration&quot;, &quot;Ready&quot;);\r\n                        updateStatus(&quot;Ready&quot;, ctx);\r\n    \r\n                    }\r\n    \r\n                    public void onRegistrationFailed(String localProfileUri, int errorCode,\r\n                        String errorMessage) {\r\n                        Log.e(&quot;Error Code Registration &quot;, SipErrorCode.toString(errorCode) + &quot; &quot; + errorCode);\r\n                        updateStatus(SipErrorCode.toString(errorCode), ctx);\r\n                    }\r\n                });\r\n            } catch (ParseException pe) {\r\n                updateStatus(&quot;Connection Error.&quot;, ctx);\r\n            } catch (SipException se) {\r\n                updateStatus(&quot;Connection error.&quot;, ctx);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Closes out your local profile, freeing associated objects into memory\r\n         * and unregistering your device from the server.\r\n         */\r\n        public void closeLocalProfile() {\r\n            if (manager == null) {\r\n                return;\r\n            }\r\n            try {\r\n                if (me != null) {\r\n                    manager.unregister(me, new SipRegistrationListener() {\r\n    \r\n                        @\r\n                        Override\r\n                        public void onRegistrationFailed(String localProfileUri, int errorCode,\r\n                            String errorMessage) {\r\n                            // TODO Auto-generated method stub\r\n                            Log.e(&quot;unregister failed&quot;, &quot;unregister failed&quot;);\r\n    \r\n                        }\r\n    \r\n                        @\r\n                        Override\r\n                        public void onRegistrationDone(String localProfileUri, long expiryTime) {\r\n                            // TODO Auto-generated method stub\r\n                            Log.e(&quot;unregister done&quot;, &quot;unregister done&quot;);\r\n                        }\r\n    \r\n                        @\r\n                        Override\r\n                        public void onRegistering(String localProfileUri) {\r\n                            // TODO Auto-generated method stub\r\n                            Log.e(&quot;unregistering&quot;, &quot;unregistering&quot;);\r\n                        }\r\n                    });\r\n                    manager.close(me.getUriString());\r\n                }\r\n            } catch (Exception ee) {\r\n                Log.d(&quot;WalkieTalkieActivity/onDestroy&quot;, &quot;Failed to close local profile.&quot;, ee);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Make an outgoing call.\r\n         */\r\n        public void initiateCall(String number, final Context ctx, final View v) {\r\n    \r\n    \r\n            Log.d(&quot;Number&quot;, &quot;&quot; + number);\r\n            sipAddress = number;\r\n    \r\n            Log.e(&quot;initiating call&quot;, &quot;initiating call&quot;);\r\n            try {\r\n    \r\n    \r\n    \r\n                SipAudioCall.Listener listener = new SipAudioCall.Listener() {@\r\n                    Override\r\n                    public void onCallBusy(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;buzy&quot;, &quot;buzy&quot;);\r\n                        super.onCallBusy(call);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onCallHeld(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;held&quot;, &quot;held&quot;);\r\n                        super.onCallHeld(call);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onCalling(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;calling&quot;, &quot;calling&quot;);\r\n                        super.onCalling(call);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onChanged(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;changed&quot;, &quot;changed&quot;);\r\n                        super.onChanged(call);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onError(SipAudioCall call, int errorCode,\r\n                        String errorMessage) {\r\n                        // TODO Auto-generated method stub\r\n    \r\n                        Log.e(&quot;call error&quot;, &quot;error&quot; + SipErrorCode.toString(errorCode) + &quot; &quot; + errorCode);\r\n                        CallingScreen.fa.finish();\r\n                        super.onError(call, errorCode, errorMessage);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onReadyToCall(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;ready to call&quot;, &quot;ready to call &quot;);\r\n                        super.onReadyToCall(call);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onRinging(SipAudioCall call, SipProfile caller) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;ringing&quot;, &quot;ringing&quot;);\r\n    \r\n                        super.onRinging(call, caller);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onRingingBack(SipAudioCall call) {\r\n                        // TODO Auto-generated method stub\r\n                        Log.e(&quot;ringing back&quot;, &quot;ringing back&quot;);\r\n    \r\n                        super.onRingingBack(call);\r\n                    }\r\n    \r\n                    // Much of the client&#39;s interaction with the SIP Stack will\r\n                    // happen via listeners.  Even making an outgoing call, don&#39;t\r\n                    // forget to set up a listener to set things up once the call is established.\r\n                    @\r\n                    Override\r\n                    public void onCallEstablished(SipAudioCall call) {\r\n    \r\n                        Log.e(&quot;call established&quot;, &quot;call established&quot;);\r\n                        call.startAudio();\r\n                        updateTime(true, ctx);\r\n                    }\r\n    \r\n                    @\r\n                    Override\r\n                    public void onCallEnded(SipAudioCall call) {\r\n                        Log.e(&quot;call ended&quot;, &quot;call ended&quot;);\r\n    \r\n                        updateTime(false, ctx);\r\n                        CallingScreen.fa.finish();\r\n                    }\r\n                };\r\n    \r\n                Log.e(&quot;param 1 &quot;, &quot;&quot; + me.getUriString());\r\n                call = manager.makeAudioCall(me.getUriString(), sipAddress + &quot;@216.245.200.2:5060&quot;, listener, 30);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                Log.i(&quot;WalkieTalkieActivity/InitiateCall&quot;, &quot;Error when trying to close manager.&quot;, e);\r\n                if (me != null) {\r\n                    try {\r\n                        closeLocalProfile();\r\n                    } catch (Exception ee) {\r\n                        ee.printStackTrace();\r\n                        Log.i(&quot;WalkieTalkieActivity/InitiateCall&quot;,\r\n                            &quot;Error when trying to close manager.&quot;, ee);\r\n                        ee.printStackTrace();\r\n                    }\r\n                }\r\n                if (call != null) {\r\n                    call.close();\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n        public void updateStatus(final String status, final Context context) {\r\n            // Be a good citizen.  Make sure UI changes fire on the UI thread.\r\n            this.runOnUiThread(new Runnable() {\r\n                public void run() {\r\n                    generateNotification(context, status);\r\n    \r\n                }\r\n            });\r\n        }\r\n    \r\n        public void updateTime(final Boolean status, final Context context) {\r\n            // Be a good citizen.  Make sure UI changes fire on the UI thread.\r\n            this.runOnUiThread(new Runnable() {\r\n                public void run() {\r\n    \r\n                    if (status) {\r\n                        CallingScreen.fa.calling_screen_text.setVisibility(View.GONE);\r\n                        CallingScreen.fa.ch.setVisibility(View.VISIBLE);\r\n                        CallingScreen.fa.ch.start();\r\n                    } else {\r\n                        CallingScreen.fa.ch.stop();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n    \r\n        public void updateStatus(SipAudioCall call) {\r\n            String useName = call.getPeerProfile().getDisplayName();\r\n            if (useName == null) {\r\n                useName = call.getPeerProfile().getUserName();\r\n            }\r\n            //\t\tupdateStatus(useName + &quot;@&quot; + call.getPeerProfile().getSipDomain());\r\n        }\r\n    \r\n    \r\n        public boolean onTouch(View v, MotionEvent event) {\r\n            if (call == null) {\r\n                return false;\r\n            } else if (event.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; call != null &amp;&amp; call.isMuted()) {\r\n                call.toggleMute();\r\n            } else if (event.getAction() == MotionEvent.ACTION_UP &amp;&amp; !call.isMuted()) {\r\n                call.toggleMute();\r\n            }\r\n            return false;\r\n        }\r\n        public void speaker(Boolean state) {\r\n            if (call != null)\r\n                call.setSpeakerMode(state);\r\n        }\r\n    \r\n        public void endcall() {\r\n            if (call != null) {\r\n                try {\r\n                    call.endCall();\r\n                } catch (SipException se) {\r\n                    Log.d(&quot;WalkieTalkieActivity/onOptionsItemSelected&quot;,\r\n                        &quot;Error ending call.&quot;, se);\r\n                }\r\n                call.close();\r\n            }\r\n        }\r\n    \r\n        public static void generateNotification(Context context, String message) {\r\n            Log.e(&quot;inilitize&quot;, &quot;generate notification&quot;);\r\n            int icon = R.drawable.ic_launcher;\r\n            long when = System.currentTimeMillis();\r\n            NotificationManager notificationManager = (NotificationManager)\r\n            context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n            Notification notification = new Notification(icon, message, when);\r\n            String title = context.getString(R.string.app_name);\r\n            Intent notificationIntent = new Intent(context, Splash_screen.class);\r\n            // set intent so it does not start a new activity\r\n            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |\r\n                Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n            PendingIntent intent =\r\n                PendingIntent.getActivity(context, 0, notificationIntent, 0);\r\n            notification.setLatestEventInfo(context, title, message, intent);\r\n            notificationManager.notify(0, notification);\r\n        }\r\n    }","title":"Sip Error while registration","body":"<p>I am using native methods of sip calling and it is working fine but some time it is giving registration error IN_PROGRESS (Error Code -9 ) .I have search in Sip Error codes but dint find any error code of this kind . Here is my code for sip registration .PLease tell me if any one have idea about this error please tell me .</p>\n\n<pre><code>import android.app.Activity;\nimport android.app.Notification;\nimport android.app.NotificationManager;\nimport android.app.PendingIntent;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.preference.PreferenceManager;\nimport android.util.Log;\nimport android.view.*;\nimport android.net.sip.*;\nimport java.text.ParseException;\n/**\n * Handles all calling, receiving calls, and UI interaction in the WalkieTalkie app.\n */\npublic class WalkieTalkieActivity extends Activity implements View.OnTouchListener {\n\n    public String sipAddress = null;\n    public static SipManager manager = null;\n    public static SipProfile me = null;\n    public SipAudioCall call = null;\n    public SipErrorCode sipcode;\n    public SipException sipexeception;\n    public static WalkieTalkieActivity walkiy;\n\n    public static WalkieTalkieActivity getInstance() {\n        if (walkiy == null) {\n            walkiy = new WalkieTalkieActivity();\n        }\n        return walkiy;\n    }\n\n    @\n    Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);\n        Log.e(\"onCreate\", \"onCreate\");\n        initializeManager(this);\n    }\n\n    @\n    Override\n    public void onStart() {\n        super.onStart();\n        // When we get back from the preference setting Activity, assume\n        // settings have changed, and re-login with new auth info.\n    }\n\n    @\n    Override\n    public void onDestroy() {\n\n        super.onDestroy();\n        if (call != null) {\n            call.close();\n        }\n        closeLocalProfile();\n    }\n\n    @\n    Override\n    protected void onResume() {\n        initializeManager(this);\n        super.onResume();\n    }\n\n    public void initializeManager(Context ctx) {\n\n        Log.e(\"inilitize\", \"initialize manager\");\n\n        if (manager == null) {\n            manager = SipManager.newInstance(ctx);\n\n        }\n        initializeLocalProfile(ctx);\n    }\n\n    /**\n     * Logs you into your SIP provider, registering this device as the location to\n     * send SIP calls to for your SIP address.\n     */\n    public void initializeLocalProfile(final Context ctx) {\n        Log.e(\"inilitize\", \"initialize profile\");\n        if (manager == null) {\n\n            Log.e(\"inilitize\", \"return in profile\");\n            updateStatus(\"we are unable to establish this feature on your device \", ctx);\n            Log.e(\"Wifi state\", \"\" + SipManager.isSipWifiOnly(ctx));\n            return;\n        }\n        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);\n        String username = prefs.getString(\"namePref\", \"XYZ\");\n        String domain = prefs.getString(\"domainPref\", \"236.343.230.2\");\n        String password = prefs.getString(\"passPref\", \"XYZ\");\n\n        try {\n            Log.e(\"inilitize\", \"building profile \");\n            SipProfile.Builder builder = new SipProfile.Builder(username, domain);\n            builder.setPassword(password);\n            me = builder.build();\n            manager.open(me);\n\n            Log.e(\"alredy registered1\", \"\" + manager.isRegistered(me.getUriString()));\n            try {\n                if (manager.isRegistered(me.getUriString())) {\n\n                    Log.e(\"alredy registered2\", \"\" + manager.isRegistered(me.getUriString()));\n                    updateStatus(\"Ready\", ctx);\n                    return;\n                }\n\n            } catch (SipException e) {\n                // TODO Auto-generated catch block\n                closeLocalProfile();\n                e.printStackTrace();\n            }\n\n            manager.setRegistrationListener(me.getUriString(), new SipRegistrationListener() {\n                public void onRegistering(String localProfileUri) {\n\n                    Log.e(\"Sip restration\", \"Registering with SIP Server...\" + me.getUriString());\n                    updateStatus(\"Registering with SIP Server...\", ctx);\n                }\n\n                public void onRegistrationDone(String localProfileUri, long expiryTime) {\n                    Log.e(\"Sip restration\", \"Ready\");\n                    updateStatus(\"Ready\", ctx);\n\n                }\n\n                public void onRegistrationFailed(String localProfileUri, int errorCode,\n                    String errorMessage) {\n                    Log.e(\"Error Code Registration \", SipErrorCode.toString(errorCode) + \" \" + errorCode);\n                    updateStatus(SipErrorCode.toString(errorCode), ctx);\n                }\n            });\n        } catch (ParseException pe) {\n            updateStatus(\"Connection Error.\", ctx);\n        } catch (SipException se) {\n            updateStatus(\"Connection error.\", ctx);\n        }\n    }\n\n    /**\n     * Closes out your local profile, freeing associated objects into memory\n     * and unregistering your device from the server.\n     */\n    public void closeLocalProfile() {\n        if (manager == null) {\n            return;\n        }\n        try {\n            if (me != null) {\n                manager.unregister(me, new SipRegistrationListener() {\n\n                    @\n                    Override\n                    public void onRegistrationFailed(String localProfileUri, int errorCode,\n                        String errorMessage) {\n                        // TODO Auto-generated method stub\n                        Log.e(\"unregister failed\", \"unregister failed\");\n\n                    }\n\n                    @\n                    Override\n                    public void onRegistrationDone(String localProfileUri, long expiryTime) {\n                        // TODO Auto-generated method stub\n                        Log.e(\"unregister done\", \"unregister done\");\n                    }\n\n                    @\n                    Override\n                    public void onRegistering(String localProfileUri) {\n                        // TODO Auto-generated method stub\n                        Log.e(\"unregistering\", \"unregistering\");\n                    }\n                });\n                manager.close(me.getUriString());\n            }\n        } catch (Exception ee) {\n            Log.d(\"WalkieTalkieActivity/onDestroy\", \"Failed to close local profile.\", ee);\n        }\n    }\n\n    /**\n     * Make an outgoing call.\n     */\n    public void initiateCall(String number, final Context ctx, final View v) {\n\n\n        Log.d(\"Number\", \"\" + number);\n        sipAddress = number;\n\n        Log.e(\"initiating call\", \"initiating call\");\n        try {\n\n\n\n            SipAudioCall.Listener listener = new SipAudioCall.Listener() {@\n                Override\n                public void onCallBusy(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"buzy\", \"buzy\");\n                    super.onCallBusy(call);\n                }\n\n                @\n                Override\n                public void onCallHeld(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"held\", \"held\");\n                    super.onCallHeld(call);\n                }\n\n                @\n                Override\n                public void onCalling(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"calling\", \"calling\");\n                    super.onCalling(call);\n                }\n\n                @\n                Override\n                public void onChanged(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"changed\", \"changed\");\n                    super.onChanged(call);\n                }\n\n                @\n                Override\n                public void onError(SipAudioCall call, int errorCode,\n                    String errorMessage) {\n                    // TODO Auto-generated method stub\n\n                    Log.e(\"call error\", \"error\" + SipErrorCode.toString(errorCode) + \" \" + errorCode);\n                    CallingScreen.fa.finish();\n                    super.onError(call, errorCode, errorMessage);\n                }\n\n                @\n                Override\n                public void onReadyToCall(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"ready to call\", \"ready to call \");\n                    super.onReadyToCall(call);\n                }\n\n                @\n                Override\n                public void onRinging(SipAudioCall call, SipProfile caller) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"ringing\", \"ringing\");\n\n                    super.onRinging(call, caller);\n                }\n\n                @\n                Override\n                public void onRingingBack(SipAudioCall call) {\n                    // TODO Auto-generated method stub\n                    Log.e(\"ringing back\", \"ringing back\");\n\n                    super.onRingingBack(call);\n                }\n\n                // Much of the client's interaction with the SIP Stack will\n                // happen via listeners.  Even making an outgoing call, don't\n                // forget to set up a listener to set things up once the call is established.\n                @\n                Override\n                public void onCallEstablished(SipAudioCall call) {\n\n                    Log.e(\"call established\", \"call established\");\n                    call.startAudio();\n                    updateTime(true, ctx);\n                }\n\n                @\n                Override\n                public void onCallEnded(SipAudioCall call) {\n                    Log.e(\"call ended\", \"call ended\");\n\n                    updateTime(false, ctx);\n                    CallingScreen.fa.finish();\n                }\n            };\n\n            Log.e(\"param 1 \", \"\" + me.getUriString());\n            call = manager.makeAudioCall(me.getUriString(), sipAddress + \"@216.245.200.2:5060\", listener, 30);\n        } catch (Exception e) {\n            e.printStackTrace();\n            Log.i(\"WalkieTalkieActivity/InitiateCall\", \"Error when trying to close manager.\", e);\n            if (me != null) {\n                try {\n                    closeLocalProfile();\n                } catch (Exception ee) {\n                    ee.printStackTrace();\n                    Log.i(\"WalkieTalkieActivity/InitiateCall\",\n                        \"Error when trying to close manager.\", ee);\n                    ee.printStackTrace();\n                }\n            }\n            if (call != null) {\n                call.close();\n            }\n        }\n    }\n\n\n    public void updateStatus(final String status, final Context context) {\n        // Be a good citizen.  Make sure UI changes fire on the UI thread.\n        this.runOnUiThread(new Runnable() {\n            public void run() {\n                generateNotification(context, status);\n\n            }\n        });\n    }\n\n    public void updateTime(final Boolean status, final Context context) {\n        // Be a good citizen.  Make sure UI changes fire on the UI thread.\n        this.runOnUiThread(new Runnable() {\n            public void run() {\n\n                if (status) {\n                    CallingScreen.fa.calling_screen_text.setVisibility(View.GONE);\n                    CallingScreen.fa.ch.setVisibility(View.VISIBLE);\n                    CallingScreen.fa.ch.start();\n                } else {\n                    CallingScreen.fa.ch.stop();\n                }\n            }\n        });\n    }\n\n\n    public void updateStatus(SipAudioCall call) {\n        String useName = call.getPeerProfile().getDisplayName();\n        if (useName == null) {\n            useName = call.getPeerProfile().getUserName();\n        }\n        //      updateStatus(useName + \"@\" + call.getPeerProfile().getSipDomain());\n    }\n\n\n    public boolean onTouch(View v, MotionEvent event) {\n        if (call == null) {\n            return false;\n        } else if (event.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; call != null &amp;&amp; call.isMuted()) {\n            call.toggleMute();\n        } else if (event.getAction() == MotionEvent.ACTION_UP &amp;&amp; !call.isMuted()) {\n            call.toggleMute();\n        }\n        return false;\n    }\n    public void speaker(Boolean state) {\n        if (call != null)\n            call.setSpeakerMode(state);\n    }\n\n    public void endcall() {\n        if (call != null) {\n            try {\n                call.endCall();\n            } catch (SipException se) {\n                Log.d(\"WalkieTalkieActivity/onOptionsItemSelected\",\n                    \"Error ending call.\", se);\n            }\n            call.close();\n        }\n    }\n\n    public static void generateNotification(Context context, String message) {\n        Log.e(\"inilitize\", \"generate notification\");\n        int icon = R.drawable.ic_launcher;\n        long when = System.currentTimeMillis();\n        NotificationManager notificationManager = (NotificationManager)\n        context.getSystemService(Context.NOTIFICATION_SERVICE);\n        Notification notification = new Notification(icon, message, when);\n        String title = context.getString(R.string.app_name);\n        Intent notificationIntent = new Intent(context, Splash_screen.class);\n        // set intent so it does not start a new activity\n        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |\n            Intent.FLAG_ACTIVITY_SINGLE_TOP);\n        PendingIntent intent =\n            PendingIntent.getActivity(context, 0, notificationIntent, 0);\n        notification.setLatestEventInfo(context, title, message, intent);\n        notificationManager.notify(0, notification);\n    }\n}\n</code></pre>\n"},{"tags":["java","javafx","graalvm","gluonfx"],"answers":[{"tags":[],"owner":{"account_id":15772565,"reputation":165,"user_id":11381193,"display_name":"Ikaro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640257714,"creation_date":1640257714,"answer_id":70461284,"question_id":70460878,"body_markdown":"I&#39;ve found the solution by using the answer in this ticket:\r\n\r\nhttps://stackoverflow.com/questions/47533370/java-9-javafx-preloader\r\n\r\nReplaced:\r\n```LauncherImpl.LauncherImpl.launchApplication(MainView.class, MyPreloader.class, args)```\r\n\r\nby \r\n```\r\nSystem.setProperty(&quot;javafx.preloader&quot;, MyPreloader.class.getCanonicalName());\r\nApplication.launch(MainView.class, args);\r\n```","title":"JavaFX application does not compile well when using LauncherImpl instead Application","body":"<p>I've found the solution by using the answer in this ticket:</p>\n<p><a href=\"https://stackoverflow.com/questions/47533370/java-9-javafx-preloader\">Java 9 JavaFX Preloader</a></p>\n<p>Replaced:\n<code>LauncherImpl.LauncherImpl.launchApplication(MainView.class, MyPreloader.class, args)</code></p>\n<p>by</p>\n<pre><code>System.setProperty(&quot;javafx.preloader&quot;, MyPreloader.class.getCanonicalName());\nApplication.launch(MainView.class, args);\n</code></pre>\n"}],"owner":{"account_id":15772565,"reputation":165,"user_id":11381193,"display_name":"Ikaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640287024,"accepted_answer_id":70461284,"answer_count":1,"score":0,"last_activity_date":1640287049,"creation_date":1640255665,"question_id":70460878,"body_markdown":"I have a JavaFX application which compiles to native using GluonFx plugin.\r\nI want to add a Preloader to show when starting. I managed it by changing the initialization from:\r\n\r\n```Application.launch(MainView.class, args)``` to ```LauncherImpl.launchApplication(MainView.class, MyPreloader.class, args)```\r\n\r\nThe compilation process executes till the end with no errors, but the app doesn&#39;t boot.\r\nIf I try to run the agent (mvn gluonfx:runagent) I have the following error:\r\n```cannot access class com.sun.javafx.application.LauncherImpl (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.application to unnamed module ```\r\n\r\nSomeone knows how to solve this, or what other way can I use to load my Preloader?\r\n\r\nPS: Running from the IDE works. The problem is after compilation to native\r\n\r\nThanks in advance\r\n ","title":"JavaFX application does not compile well when using LauncherImpl instead Application","body":"<p>I have a JavaFX application which compiles to native using GluonFx plugin.\nI want to add a Preloader to show when starting. I managed it by changing the initialization from:</p>\n<p><code>Application.launch(MainView.class, args)</code> to <code>LauncherImpl.launchApplication(MainView.class, MyPreloader.class, args)</code></p>\n<p>The compilation process executes till the end with no errors, but the app doesn't boot.\nIf I try to run the agent (mvn gluonfx:runagent) I have the following error:\n<code>cannot access class com.sun.javafx.application.LauncherImpl (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.application to unnamed module </code></p>\n<p>Someone knows how to solve this, or what other way can I use to load my Preloader?</p>\n<p>PS: Running from the IDE works. The problem is after compilation to native</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","data-structures","hashmap"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1569877440,"post_id":58175165,"comment_id":102731213,"body_markdown":"Is there a reason you aren&#39;t using an actual database and an ORM like hibernate?","body":"Is there a reason you aren&#39;t using an actual database and an ORM like hibernate?"},{"owner":{"account_id":106185,"reputation":1126,"user_id":282956,"accept_rate":0,"display_name":"mavriksc"},"score":1,"creation_date":1569877465,"post_id":58175165,"comment_id":102731224,"body_markdown":"same as your filterByName just use `.findFirst()` instead of the collect may need to map to getValue.","body":"same as your filterByName just use <code>.findFirst()</code> instead of the collect may need to map to getValue."},{"owner":{"account_id":12947676,"reputation":236,"user_id":9361512,"display_name":"Zoran Jankov"},"score":0,"creation_date":1569878347,"post_id":58175165,"comment_id":102731535,"body_markdown":"Actual database will be implemented later but I wanted to make it so the whole database is in RAM locally, in every client application. This Object-relational mapping that you mentioned, is some thing that I heard for the first time now, I presume is the right thing to make this sort of database in the application?","body":"Actual database will be implemented later but I wanted to make it so the whole database is in RAM locally, in every client application. This Object-relational mapping that you mentioned, is some thing that I heard for the first time now, I presume is the right thing to make this sort of database in the application?"}],"answers":[{"tags":[],"owner":{"account_id":12276233,"reputation":1,"user_id":12132811,"display_name":"Wemy Felipe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571054361,"creation_date":1569877557,"answer_id":58175293,"question_id":58175165,"body_markdown":"If I understood you well, you need just to put an ID parameter in your class Clients. \nYou don&#39;t need to make a structure just for an identifier. ","title":"Organizing, implementing and querying data-structure classes in Java","body":"<p>If I understood you well, you need just to put an ID parameter in your class Clients. \nYou don't need to make a structure just for an identifier. </p>\n"},{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569878169,"creation_date":1569878169,"answer_id":58175405,"question_id":58175165,"body_markdown":"You should soften your logic:\r\n\r\n    public Map&lt;Integer, DeviceTypes&gt; filterByName(String text)\r\n        {\r\n            return  deviceTypesTable.entrySet().stream()\r\n                    .filter(deviceType-&gt;deviceType.getValue().getName().contains(text))\r\n                    .collect(Collectors.toMap(deviceType -&gt; deviceType.getKey(), deviceType -&gt; deviceType.getValue())); \r\n        }\r\n\r\nYou simply needs to pass a `Predicate&lt;DeviceType&gt;` instead of hard coding the logic using `.getName().contains(text)`:\r\n\r\n    public Map&lt;Integer, DeviceType&gt; filterBy(Predicate&lt;DeviceType&gt; predicate) { \r\n      Objects.requireNonNull(predicate, &quot;predicate&quot;);\r\n      return deviceTypesTable.entrySet().stream()\r\n               .filter(entry -&gt;  predicate.test(entry.getValue())\r\n               .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)); \r\n    }\r\n\r\nYou may alias it however:\r\n\r\n    public Map&lt;Integer, DeviceType&gt; filterByName(String name) {\r\n      Objects.requireNonNull(name, &quot;name&quot;);\r\n      return filterBy(dt -&gt; dt.getName().contains(name));\r\n    }\r\n\r\nSince you want a `DeviceType`, this give:\r\n\r\n    public Optional&lt;DeviceType&gt; findFirst(Predicate&lt;DeviceType&gt; predicate) { \r\n      Objects.requireNonNull(predicate, &quot;predicate&quot;);\r\n      return deviceTypesTable.values().stream()\r\n               .filter(predicate)\r\n               .findFirst();\r\n    }\r\n\r\nThe method will return the first `DeviceType` matching the predicate, for example:\r\n\r\n    allDevices.findFirst(dt -&gt; &quot;disk&quot;.equalsIgnoreCase(dt.name)).ifPresent(dt -&gt; {\r\n      System.out.println(&quot;deviceType: &quot; + dt);\r\n    });\r\n\r\n\r\n\r\n","title":"Organizing, implementing and querying data-structure classes in Java","body":"<p>You should soften your logic:</p>\n\n<pre><code>public Map&lt;Integer, DeviceTypes&gt; filterByName(String text)\n    {\n        return  deviceTypesTable.entrySet().stream()\n                .filter(deviceType-&gt;deviceType.getValue().getName().contains(text))\n                .collect(Collectors.toMap(deviceType -&gt; deviceType.getKey(), deviceType -&gt; deviceType.getValue())); \n    }\n</code></pre>\n\n<p>You simply needs to pass a <code>Predicate&lt;DeviceType&gt;</code> instead of hard coding the logic using <code>.getName().contains(text)</code>:</p>\n\n<pre><code>public Map&lt;Integer, DeviceType&gt; filterBy(Predicate&lt;DeviceType&gt; predicate) { \n  Objects.requireNonNull(predicate, \"predicate\");\n  return deviceTypesTable.entrySet().stream()\n           .filter(entry -&gt;  predicate.test(entry.getValue())\n           .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)); \n}\n</code></pre>\n\n<p>You may alias it however:</p>\n\n<pre><code>public Map&lt;Integer, DeviceType&gt; filterByName(String name) {\n  Objects.requireNonNull(name, \"name\");\n  return filterBy(dt -&gt; dt.getName().contains(name));\n}\n</code></pre>\n\n<p>Since you want a <code>DeviceType</code>, this give:</p>\n\n<pre><code>public Optional&lt;DeviceType&gt; findFirst(Predicate&lt;DeviceType&gt; predicate) { \n  Objects.requireNonNull(predicate, \"predicate\");\n  return deviceTypesTable.values().stream()\n           .filter(predicate)\n           .findFirst();\n}\n</code></pre>\n\n<p>The method will return the first <code>DeviceType</code> matching the predicate, for example:</p>\n\n<pre><code>allDevices.findFirst(dt -&gt; \"disk\".equalsIgnoreCase(dt.name)).ifPresent(dt -&gt; {\n  System.out.println(\"deviceType: \" + dt);\n});\n</code></pre>\n"}],"owner":{"account_id":12947676,"reputation":236,"user_id":9361512,"display_name":"Zoran Jankov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640286906,"creation_date":1569876788,"question_id":58175165,"body_markdown":"I am teaching my self to code in Java. I am a beginner but not totally clueless about programing. I have decided to make an application that tracks tickets, clients and devices for a computer repair shop. I have made a &quot;lot&quot; of code for that application, but as I said I am a beginner can I don know what is the &quot;right way&quot;(best, smartest and convenient) to implement the data-structure of the application.\r\n\r\nI decided to use custom data classes that are value objects in HashMap with integer keys, and that represent data tables that mirror data tables in databases. Am I doing it wrong?\r\n\r\n    \r\n    public class Clients\r\n    {\r\n    \tprivate String firstName;\r\n    \tprivate String lastName;\r\n    \tprivate String primePhoneNum;\r\n    \tprivate String secondPhoneNum;\r\n    \tprivate String email;\r\n    \tprivate String address;\r\n    \tprivate MarketingTypes marketing;\r\n    \r\n       //getters and setters\r\n    }\r\n\r\n    public HashMap&lt;Integer,Clients&gt; clientsTable = new HashMap&lt;Integer, Clients&gt;();\r\n\r\nI ran in to trouble when I tried to make search function that returns value object in a HashMap based on that object particular field value. For example:\r\n\r\n    public class SearchDeviceTypes\r\n    {\t\r\n    \tprivate Map&lt;Integer, DeviceTypes&gt; deviceTypesTable;\r\n    \t\r\n    \tpublic SearchDeviceTypes(Map&lt;Integer, DeviceTypes&gt; deviceTypesTable)\r\n    \t{\r\n    \t\tthis.deviceTypesTable = deviceTypesTable;\r\n    \t}\r\n    \t\r\n    \tpublic boolean isNameTaken(String name)\r\n    \t{\r\n    \t\treturn deviceTypesTable.entrySet().stream()\r\n    \t\t\t\t.anyMatch(deviceType-&gt;deviceType.getValue().getName().equals(name));\r\n    \t}\r\n    \t\r\n    \tpublic DeviceTypes getByID(int id)\r\n    \t{\r\n    \t\treturn deviceTypesTable.get(id);\r\n    \t}\r\n    \t\r\n    \tpublic Map&lt;Integer, DeviceTypes&gt; filterByName(String text)\r\n    \t{\r\n    \t\treturn  deviceTypesTable.entrySet().stream()\r\n    \t\t\t\t.filter(deviceType-&gt;deviceType.getValue().getName().contains(text))\r\n    \t\t\t\t.collect(Collectors.toMap(deviceType -&gt; deviceType.getKey(), deviceType -&gt; deviceType.getValue()));\t\r\n    \t}\r\n    \t\r\n    \tpublic DeviceTypes getByName(String name)\r\n    \t{\r\n    \t\t//How to implement this?\r\n    \t\treturn null;\r\n    \t}\r\n    }\r\n\r\nI would like to help me to learn how to implement this kind of data structure. Thank you in advance!","title":"Organizing, implementing and querying data-structure classes in Java","body":"<p>I am teaching my self to code in Java. I am a beginner but not totally clueless about programing. I have decided to make an application that tracks tickets, clients and devices for a computer repair shop. I have made a \"lot\" of code for that application, but as I said I am a beginner can I don know what is the \"right way\"(best, smartest and convenient) to implement the data-structure of the application.</p>\n\n<p>I decided to use custom data classes that are value objects in HashMap with integer keys, and that represent data tables that mirror data tables in databases. Am I doing it wrong?</p>\n\n<pre><code>public class Clients\n{\n    private String firstName;\n    private String lastName;\n    private String primePhoneNum;\n    private String secondPhoneNum;\n    private String email;\n    private String address;\n    private MarketingTypes marketing;\n\n   //getters and setters\n}\n\npublic HashMap&lt;Integer,Clients&gt; clientsTable = new HashMap&lt;Integer, Clients&gt;();\n</code></pre>\n\n<p>I ran in to trouble when I tried to make search function that returns value object in a HashMap based on that object particular field value. For example:</p>\n\n<pre><code>public class SearchDeviceTypes\n{   \n    private Map&lt;Integer, DeviceTypes&gt; deviceTypesTable;\n\n    public SearchDeviceTypes(Map&lt;Integer, DeviceTypes&gt; deviceTypesTable)\n    {\n        this.deviceTypesTable = deviceTypesTable;\n    }\n\n    public boolean isNameTaken(String name)\n    {\n        return deviceTypesTable.entrySet().stream()\n                .anyMatch(deviceType-&gt;deviceType.getValue().getName().equals(name));\n    }\n\n    public DeviceTypes getByID(int id)\n    {\n        return deviceTypesTable.get(id);\n    }\n\n    public Map&lt;Integer, DeviceTypes&gt; filterByName(String text)\n    {\n        return  deviceTypesTable.entrySet().stream()\n                .filter(deviceType-&gt;deviceType.getValue().getName().contains(text))\n                .collect(Collectors.toMap(deviceType -&gt; deviceType.getKey(), deviceType -&gt; deviceType.getValue())); \n    }\n\n    public DeviceTypes getByName(String name)\n    {\n        //How to implement this?\n        return null;\n    }\n}\n</code></pre>\n\n<p>I would like to help me to learn how to implement this kind of data structure. Thank you in advance!</p>\n"},{"tags":["java","android","json","api","file"],"comments":[{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1640283737,"post_id":70465993,"comment_id":124562797,"body_markdown":"&quot;I can&#39;t do that&quot;. How do you fail?","body":"&quot;I can&#39;t do that&quot;. How do you fail?"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1640284011,"post_id":70465993,"comment_id":124562866,"body_markdown":"What is the URL of the request?","body":"What is the URL of the request?"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1640284203,"post_id":70465993,"comment_id":124562916,"body_markdown":"Which line throws the exception?","body":"Which line throws the exception?"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1640284382,"post_id":70465993,"comment_id":124562967,"body_markdown":"Which line inside the method?","body":"Which line inside the method?"},{"owner":{"account_id":17080042,"reputation":11,"user_id":17750440,"display_name":"Bryan Yehuda"},"score":0,"creation_date":1640285032,"post_id":70465993,"comment_id":124563155,"body_markdown":"if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)","body":"if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)"}],"answers":[{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640286833,"creation_date":1640286833,"answer_id":70466502,"question_id":70465993,"body_markdown":"The problem is that you attempt to do it in your main thread.\r\n\r\nThis answer suggest the use of AsyncTask: https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception\r\n\r\nbut it&#39;s deprecated, so you will need to use `java.util.concurrent` instead.\r\n\r\nHere is an example of that: https://www.baeldung.com/java-util-concurrent\r\n\r\nTry sending your request that way and let me know about the results.","title":"How to download file from an URL inside a JSON in Android Studio","body":"<p>The problem is that you attempt to do it in your main thread.</p>\n<p>This answer suggest the use of AsyncTask: <a href=\"https://stackoverflow.com/questions/6343166/how-can-i-fix-android-os-networkonmainthreadexception\">How can I fix &#39;android.os.NetworkOnMainThreadException&#39;?</a></p>\n<p>but it's deprecated, so you will need to use <code>java.util.concurrent</code> instead.</p>\n<p>Here is an example of that: <a href=\"https://www.baeldung.com/java-util-concurrent\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-util-concurrent</a></p>\n<p>Try sending your request that way and let me know about the results.</p>\n"}],"owner":{"account_id":17080042,"reputation":11,"user_id":17750440,"display_name":"Bryan Yehuda"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":702,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1640286833,"creation_date":1640283421,"question_id":70465993,"body_markdown":"I have this API that sends out a response in JSON. I wanted to download the file from the URL that is included from the JSON response. How can I download this file in Android Studio using Java as the main language?\r\n\r\nI have been testing the method for DownloadFileFromUrl using a static link and I have found out that I can download the files I needed using this method. But when I&#39;m trying to fetch and parse the URL given by the JSON response, I got NetworkOnMainThreadException Error. Is there any way to fix this error or maybe a new and more efficient way to fetch and parse the URL?\r\n\r\nThe URL of the request is http://bryanyehuda.my.id/upload/file.php?apicall=getfiles   \r\nThe HTTPGetCall is the one that throws the NetworkOnMainThreadException Error on line:\r\n\r\n    if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)\r\n\r\nThis is the DownloadFile.java\r\n\r\n    \r\n    public class DownloadFile extends AppCompatActivity {\r\n    \r\n        ImageButton download;\r\n    String DOWNLOAD_URL = Endpoints.GET_FILE_URL;\r\n    private ProgressDialog pDialog;\r\n    public static final int progress_bar_type = 0;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_download_file);\r\n\r\n\r\n        download = (ImageButton) findViewById(R.id.downloadFile);\r\n        String result = null;\r\n        try {\r\n            result = HTTPGetCall(DOWNLOAD_URL);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        JSONObject obj = null;\r\n        try {\r\n            assert result != null;\r\n            obj = new JSONObject(result);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        String finalFileLink = null;\r\n        try {\r\n            assert obj != null;\r\n            finalFileLink = obj.getString(&quot;file&quot;);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        String finalFileLink1 = finalFileLink;\r\n        download.setOnClickListener(v -&gt; new DownloadFileFromURL().execute(finalFileLink1));\r\n    }\r\n\r\n    @Override\r\n    protected Dialog onCreateDialog(int id) {\r\n        if (id == progress_bar_type) {\r\n            pDialog = new ProgressDialog(this);\r\n            pDialog.setMessage(&quot;Downloading file. Please wait...&quot;);\r\n            pDialog.setIndeterminate(false);\r\n            pDialog.setMax(100);\r\n            pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);\r\n            pDialog.setCancelable(true);\r\n            pDialog.show();\r\n            return pDialog;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    protected String HTTPGetCall(String WebMethodURL) throws IOException {\r\n        StringBuilder response = new StringBuilder();\r\n        URL u = new URL(WebMethodURL);\r\n        HttpURLConnection conn = (HttpURLConnection) u.openConnection();\r\n\r\n        if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)\r\n        {\r\n            BufferedReader input = new BufferedReader(new InputStreamReader(conn.getInputStream()),8192);\r\n            String line;\r\n            while ((line = input.readLine()) != null)\r\n            {\r\n                response.append(line);\r\n            }\r\n            input.close();\r\n        }\r\n        return response.toString();\r\n    }\r\n\r\n    @SuppressLint(&quot;StaticFieldLeak&quot;)\r\n    class DownloadFileFromURL extends AsyncTask&lt;String, String, String&gt; {\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n            super.onPreExecute();\r\n            showDialog(progress_bar_type);\r\n        }\r\n\r\n        @Override\r\n        protected String doInBackground(String... f_url) {\r\n            int count;\r\n            try {\r\n                URL url = new URL(f_url[0]);\r\n                URLConnection connection = url.openConnection();\r\n                connection.connect();\r\n\r\n                int lenghtOfFile = connection.getContentLength();\r\n                InputStream input = new BufferedInputStream(url.openStream(), 8192);\r\n                OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory().toString() + &quot;/2011.pdf&quot;);\r\n\r\n                byte[] data = new byte[1024];\r\n                long total = 0;\r\n                while ((count = input.read(data)) != -1) {\r\n                    total += count;\r\n                    publishProgress(&quot;&quot; + (int) ((total * 100) / lenghtOfFile));\r\n                    output.write(data, 0, count);\r\n                }\r\n\r\n                output.flush();\r\n                output.close();\r\n                input.close();\r\n\r\n            } catch (Exception e) {\r\n                Log.e(&quot;Error: &quot;, e.getMessage());\r\n            }\r\n            return null;\r\n        }\r\n\r\n        protected void onProgressUpdate(String... progress) {\r\n            pDialog.setProgress(Integer.parseInt(progress[0]));\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(String file_url) {\r\n            dismissDialog(progress_bar_type);\r\n        }\r\n    }\r\n    }\r\n\r\nThis is the file.php\r\n\r\n    &lt;?php \r\n     \r\n     //Constants for database connection\r\n     define(&#39;DB_HOST&#39;,&#39;xxxxx&#39;);\r\n     define(&#39;DB_USER&#39;,&#39;xxxxx&#39;);\r\n     define(&#39;DB_PASS&#39;,&#39;xxxxx&#39;);\r\n     define(&#39;DB_NAME&#39;,&#39;xxxxx&#39;);\r\n     define(&#39;UPLOAD_PATH&#39;, &#39;xxxxx/&#39;);\r\n     \r\n     //connecting to database \r\n     $conn = new mysqli(DB_HOST,DB_USER,DB_PASS,DB_NAME) or die(&#39;Unable to connect&#39;);\r\n     $response = array();\r\n     if(isset($_GET[&#39;apicall&#39;])){\r\n     switch($_GET[&#39;apicall&#39;]){\r\n     \r\n     //if it is an upload call we will upload the file\r\n     case &#39;uploadfile&#39;:\r\n     \r\n     if(isset($_FILES[&#39;file&#39;][&#39;name&#39;]) &amp;&amp; isset($_POST[&#39;date&#39;])){\r\n     try{\r\n     move_uploaded_file($_FILES[&#39;file&#39;][&#39;tmp_name&#39;], UPLOAD_PATH . $_FILES[&#39;file&#39;][&#39;name&#39;]);\r\n     $stmt = $conn-&gt;prepare(&quot;INSERT INTO files (file, date) VALUES (?,?)&quot;);\r\n     $stmt-&gt;bind_param(&quot;ss&quot;, $_FILES[&#39;file&#39;][&#39;name&#39;],$_POST[&#39;date&#39;]);\r\n     if($stmt-&gt;execute()){\r\n     $response[&#39;error&#39;] = false;\r\n     $response[&#39;message&#39;] = &#39;File Sukses Terupload&#39;;\r\n     }else{\r\n     throw new Exception(&quot;Tidak Bisa Mengupload File&quot;);\r\n     }\r\n     }catch(Exception $e){\r\n     $response[&#39;error&#39;] = true;\r\n     $response[&#39;message&#39;] = &#39;Tidak Bisa Mengupload File&#39;;\r\n     }\r\n     \r\n     }else{\r\n     $response[&#39;error&#39;] = true;\r\n     $response[&#39;message&#39;] = &quot;Ada Parameter Yang Kurang&quot;;\r\n     }\r\n     break;\r\n     \r\n     //in this call we will fetch all the files \r\n     case &#39;getfiles&#39;:\r\n     \r\n     $server_ip = gethostbyname(gethostname());\r\n     $stmt = $conn-&gt;prepare(&quot;SELECT id, file, date FROM files ORDER BY id DESC LIMIT 0, 1&quot;);\r\n     $stmt-&gt;execute();\r\n     $stmt-&gt;bind_result($id, $file, $date);\r\n     $files = array();\r\n     \r\n     while($stmt-&gt;fetch()){\r\n     $temp = array();\r\n     $temp[&#39;id&#39;] = $id; \r\n     $temp[&#39;file&#39;] = &#39;http://&#39; . $server_ip . &#39;/upload/&#39;. UPLOAD_PATH . $file; \r\n     $temp[&#39;date&#39;] = $date; \r\n     \r\n     array_push($files, $temp);\r\n     }\r\n     \r\n     //pushing the array in response \r\n     $response[&#39;error&#39;] = false;\r\n     $response[&#39;files&#39;] = $files; \r\n     break; \r\n     \r\n     default: \r\n     $response[&#39;error&#39;] = true;\r\n     $response[&#39;message&#39;] = &#39;Invalid api call&#39;;\r\n     }\r\n     \r\n     }else{\r\n     header(&quot;HTTP/1.0 404 Not Found&quot;);\r\n     echo &quot;&lt;h1&gt;Connected&lt;/h1&gt;&quot;;\r\n     echo &quot;The Database Connection is Successful.&quot;;\r\n     exit();\r\n     }\r\n     \r\n     //displaying the response in json \r\n     header(&#39;Content-Type: application/json&#39;);\r\n     echo json_encode($response);\r\n     \r\n\r\n","title":"How to download file from an URL inside a JSON in Android Studio","body":"<p>I have this API that sends out a response in JSON. I wanted to download the file from the URL that is included from the JSON response. How can I download this file in Android Studio using Java as the main language?</p>\n<p>I have been testing the method for DownloadFileFromUrl using a static link and I have found out that I can download the files I needed using this method. But when I'm trying to fetch and parse the URL given by the JSON response, I got NetworkOnMainThreadException Error. Is there any way to fix this error or maybe a new and more efficient way to fetch and parse the URL?</p>\n<p>The URL of the request is <a href=\"http://bryanyehuda.my.id/upload/file.php?apicall=getfiles\" rel=\"nofollow noreferrer\">http://bryanyehuda.my.id/upload/file.php?apicall=getfiles</a><br />\nThe HTTPGetCall is the one that throws the NetworkOnMainThreadException Error on line:</p>\n<pre><code>if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)\n</code></pre>\n<p>This is the DownloadFile.java</p>\n<pre><code>public class DownloadFile extends AppCompatActivity {\n\n    ImageButton download;\nString DOWNLOAD_URL = Endpoints.GET_FILE_URL;\nprivate ProgressDialog pDialog;\npublic static final int progress_bar_type = 0;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_download_file);\n\n\n    download = (ImageButton) findViewById(R.id.downloadFile);\n    String result = null;\n    try {\n        result = HTTPGetCall(DOWNLOAD_URL);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    JSONObject obj = null;\n    try {\n        assert result != null;\n        obj = new JSONObject(result);\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n    String finalFileLink = null;\n    try {\n        assert obj != null;\n        finalFileLink = obj.getString(&quot;file&quot;);\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n    String finalFileLink1 = finalFileLink;\n    download.setOnClickListener(v -&gt; new DownloadFileFromURL().execute(finalFileLink1));\n}\n\n@Override\nprotected Dialog onCreateDialog(int id) {\n    if (id == progress_bar_type) {\n        pDialog = new ProgressDialog(this);\n        pDialog.setMessage(&quot;Downloading file. Please wait...&quot;);\n        pDialog.setIndeterminate(false);\n        pDialog.setMax(100);\n        pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);\n        pDialog.setCancelable(true);\n        pDialog.show();\n        return pDialog;\n    }\n    return null;\n}\n\nprotected String HTTPGetCall(String WebMethodURL) throws IOException {\n    StringBuilder response = new StringBuilder();\n    URL u = new URL(WebMethodURL);\n    HttpURLConnection conn = (HttpURLConnection) u.openConnection();\n\n    if (conn.getResponseCode() == HttpURLConnection.HTTP_OK)\n    {\n        BufferedReader input = new BufferedReader(new InputStreamReader(conn.getInputStream()),8192);\n        String line;\n        while ((line = input.readLine()) != null)\n        {\n            response.append(line);\n        }\n        input.close();\n    }\n    return response.toString();\n}\n\n@SuppressLint(&quot;StaticFieldLeak&quot;)\nclass DownloadFileFromURL extends AsyncTask&lt;String, String, String&gt; {\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n        showDialog(progress_bar_type);\n    }\n\n    @Override\n    protected String doInBackground(String... f_url) {\n        int count;\n        try {\n            URL url = new URL(f_url[0]);\n            URLConnection connection = url.openConnection();\n            connection.connect();\n\n            int lenghtOfFile = connection.getContentLength();\n            InputStream input = new BufferedInputStream(url.openStream(), 8192);\n            OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory().toString() + &quot;/2011.pdf&quot;);\n\n            byte[] data = new byte[1024];\n            long total = 0;\n            while ((count = input.read(data)) != -1) {\n                total += count;\n                publishProgress(&quot;&quot; + (int) ((total * 100) / lenghtOfFile));\n                output.write(data, 0, count);\n            }\n\n            output.flush();\n            output.close();\n            input.close();\n\n        } catch (Exception e) {\n            Log.e(&quot;Error: &quot;, e.getMessage());\n        }\n        return null;\n    }\n\n    protected void onProgressUpdate(String... progress) {\n        pDialog.setProgress(Integer.parseInt(progress[0]));\n    }\n\n    @Override\n    protected void onPostExecute(String file_url) {\n        dismissDialog(progress_bar_type);\n    }\n}\n}\n</code></pre>\n<p>This is the file.php</p>\n<pre><code>&lt;?php \n \n //Constants for database connection\n define('DB_HOST','xxxxx');\n define('DB_USER','xxxxx');\n define('DB_PASS','xxxxx');\n define('DB_NAME','xxxxx');\n define('UPLOAD_PATH', 'xxxxx/');\n \n //connecting to database \n $conn = new mysqli(DB_HOST,DB_USER,DB_PASS,DB_NAME) or die('Unable to connect');\n $response = array();\n if(isset($_GET['apicall'])){\n switch($_GET['apicall']){\n \n //if it is an upload call we will upload the file\n case 'uploadfile':\n \n if(isset($_FILES['file']['name']) &amp;&amp; isset($_POST['date'])){\n try{\n move_uploaded_file($_FILES['file']['tmp_name'], UPLOAD_PATH . $_FILES['file']['name']);\n $stmt = $conn-&gt;prepare(&quot;INSERT INTO files (file, date) VALUES (?,?)&quot;);\n $stmt-&gt;bind_param(&quot;ss&quot;, $_FILES['file']['name'],$_POST['date']);\n if($stmt-&gt;execute()){\n $response['error'] = false;\n $response['message'] = 'File Sukses Terupload';\n }else{\n throw new Exception(&quot;Tidak Bisa Mengupload File&quot;);\n }\n }catch(Exception $e){\n $response['error'] = true;\n $response['message'] = 'Tidak Bisa Mengupload File';\n }\n \n }else{\n $response['error'] = true;\n $response['message'] = &quot;Ada Parameter Yang Kurang&quot;;\n }\n break;\n \n //in this call we will fetch all the files \n case 'getfiles':\n \n $server_ip = gethostbyname(gethostname());\n $stmt = $conn-&gt;prepare(&quot;SELECT id, file, date FROM files ORDER BY id DESC LIMIT 0, 1&quot;);\n $stmt-&gt;execute();\n $stmt-&gt;bind_result($id, $file, $date);\n $files = array();\n \n while($stmt-&gt;fetch()){\n $temp = array();\n $temp['id'] = $id; \n $temp['file'] = 'http://' . $server_ip . '/upload/'. UPLOAD_PATH . $file; \n $temp['date'] = $date; \n \n array_push($files, $temp);\n }\n \n //pushing the array in response \n $response['error'] = false;\n $response['files'] = $files; \n break; \n \n default: \n $response['error'] = true;\n $response['message'] = 'Invalid api call';\n }\n \n }else{\n header(&quot;HTTP/1.0 404 Not Found&quot;);\n echo &quot;&lt;h1&gt;Connected&lt;/h1&gt;&quot;;\n echo &quot;The Database Connection is Successful.&quot;;\n exit();\n }\n \n //displaying the response in json \n header('Content-Type: application/json');\n echo json_encode($response);\n \n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1640286991,"post_id":70466496,"comment_id":124563673,"body_markdown":"There is no &quot;Java version 61&quot; (yet). You&#39;re confusing class file format versions and Java versions. They tend to have a [1-1 relationship though](https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers). The first warning is telling you that you&#39;re trying to read classes that were compiled with Java 17 (class file major version 61), but you&#39;re using something that can only parse up to Java 16 (class file major version 60). You probably need to run your build with Java 17.","body":"There is no &quot;Java version 61&quot; (yet). You&#39;re confusing class file format versions and Java versions. They tend to have a <a href=\"https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\">1-1 relationship though</a>. The first warning is telling you that you&#39;re trying to read classes that were compiled with Java 17 (class file major version 61), but you&#39;re using something that can only parse up to Java 16 (class file major version 60). You probably need to run your build with Java 17."},{"owner":{"account_id":15495695,"reputation":582,"user_id":14634210,"display_name":"The epic face 007"},"score":0,"creation_date":1640288060,"post_id":70466496,"comment_id":124563964,"body_markdown":"@JoachimSauer what can I do to manage different java version used by graddle? Is there an setting for intelliJ that can set that?","body":"@JoachimSauer what can I do to manage different java version used by graddle? Is there an setting for intelliJ that can set that?"}],"owner":{"account_id":15495695,"reputation":582,"user_id":14634210,"display_name":"The epic face 007"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640286806,"creation_date":1640286806,"question_id":70466496,"body_markdown":"Graddle fail to bulld when it execute the graddle command `:compileJava` in the root of my project directory. I expect to be able to use the `:compileJava` command without any error.\r\n```\r\n It is recommended that the compiler be upgraded.\r\nwarning: /Users/vincent/.gradle/caches/fabric-loom/1.18.1/net.fabricmc.yarn.1_18_1.1.18.1+build.8-v2/minecraft-mapped.jar(/com/mojang/blaze3d/systems/RenderSystem.class): major version 61 is newer than 60, the highest major version supported by this compiler.\r\n/Users/vincent/.gradle/caches/fabric-loom/1.18.1/net.fabricmc.yarn.1_18_1.1.18.1+build.8-v2/minecraft-mapped.jar(/com/mojang/blaze3d/systems/RenderSystem.class): major version 61 is newer than 60, the highest major version supported by this compiler.\r\n```\r\nI tried changing the `sourceCompatibility` and `targetCompatibility` variables in the `build.gradle` to this to see if it could upgrade the compiler. \r\n```gradle\r\n...\r\nsourceCompatibility = JavaVersion.VERSION_1_9\r\ntargetCompatibility = JavaVersion.VERSION_1_9\r\n...\r\n```\r\nI then then tried to set the compiler version to version 61 using the `JavaVersion.toVersion` method to set it to java 61 as it&#39;s what graddle tell me it should be.\r\n```gradle\r\n...\r\nsourceCompatibility = JavaVersion.toVersion(61)\r\ntargetCompatibility = JavaVersion.toVersion(61)\r\n...\r\n```\r\n\r\nIt didn&#39;t work since it gave me the following error mesasage. Here is the command output:\r\n```\r\n&gt; Task :compileJava FAILED\r\nDeprecated Loom APIs were used in this build, making it incompatible with future versions of Loom. Use Gradle warning modes to control the verbosity of the warnings.\r\n\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; error: invalid source release: 21\r\n\r\n* Try:\r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Exception is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:compileJava&#39;.\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:188)\r\n\tat org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:263)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:186)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:174)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:408)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:395)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:388)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:374)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\nCaused by: java.lang.IllegalArgumentException: error: invalid source release: 21\r\n\tat jdk.compiler/com.sun.tools.javac.main.Arguments.error(Arguments.java:910)\r\n\tat jdk.compiler/com.sun.tools.javac.main.Arguments.doProcessArgs(Arguments.java:383)\r\n\tat jdk.compiler/com.sun.tools.javac.main.Arguments.processArgs(Arguments.java:347)\r\n\tat jdk.compiler/com.sun.tools.javac.main.Arguments.init(Arguments.java:246)\r\n\tat jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:185)\r\n\tat jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:119)\r\n\tat jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)\r\n\tat org.gradle.api.internal.tasks.compile.JdkTools$DefaultIncrementalAwareCompiler.getTask(JdkTools.java:132)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.createCompileTask(JdkJavaCompiler.java:70)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:53)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\r\n\tat org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:231)\r\n\tat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:65)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:278)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:164)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:145)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\r\n\tat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n\tat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$2.run(ExecuteActionsTaskExecuter.java:506)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:56)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$run$1(DefaultBuildOperationExecutor.java:74)\r\n\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.runWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:45)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:74)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:491)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:474)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$300(ExecuteActionsTaskExecuter.java:106)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:271)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:249)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:83)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:37)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:47)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:47)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:37)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\r\n\tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:54)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:35)\r\n\tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)\r\n\tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:174)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:74)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:45)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:40)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:29)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:99)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:92)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:52)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:36)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:85)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:42)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:91)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:49)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:106)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:51)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:72)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:46)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:86)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:86)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:32)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n\tat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:43)\r\n\tat org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:31)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution$2.withWorkspace(ExecuteActionsTaskExecuter.java:284)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\r\n\tat org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:185)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:174)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:408)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:395)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:388)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:374)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n```\r\n","title":"&quot; It is recommended that the compiler be upgraded.&quot; Graddle error when executing the command :compileJava","body":"<p>Graddle fail to bulld when it execute the graddle command <code>:compileJava</code> in the root of my project directory. I expect to be able to use the <code>:compileJava</code> command without any error.</p>\n<pre><code> It is recommended that the compiler be upgraded.\nwarning: /Users/vincent/.gradle/caches/fabric-loom/1.18.1/net.fabricmc.yarn.1_18_1.1.18.1+build.8-v2/minecraft-mapped.jar(/com/mojang/blaze3d/systems/RenderSystem.class): major version 61 is newer than 60, the highest major version supported by this compiler.\n/Users/vincent/.gradle/caches/fabric-loom/1.18.1/net.fabricmc.yarn.1_18_1.1.18.1+build.8-v2/minecraft-mapped.jar(/com/mojang/blaze3d/systems/RenderSystem.class): major version 61 is newer than 60, the highest major version supported by this compiler.\n</code></pre>\n<p>I tried changing the <code>sourceCompatibility</code> and <code>targetCompatibility</code> variables in the <code>build.gradle</code> to this to see if it could upgrade the compiler.</p>\n<pre><code>...\nsourceCompatibility = JavaVersion.VERSION_1_9\ntargetCompatibility = JavaVersion.VERSION_1_9\n...\n</code></pre>\n<p>I then then tried to set the compiler version to version 61 using the <code>JavaVersion.toVersion</code> method to set it to java 61 as it's what graddle tell me it should be.</p>\n<pre><code>...\nsourceCompatibility = JavaVersion.toVersion(61)\ntargetCompatibility = JavaVersion.toVersion(61)\n...\n</code></pre>\n<p>It didn't work since it gave me the following error mesasage. Here is the command output:</p>\n<pre><code>&gt; Task :compileJava FAILED\nDeprecated Loom APIs were used in this build, making it incompatible with future versions of Loom. Use Gradle warning modes to control the verbosity of the warnings.\n\nExecution failed for task ':compileJava'.\n&gt; error: invalid source release: 21\n\n* Try:\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileJava'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:188)\n    at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:263)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:186)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:174)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:408)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:395)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:388)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:374)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\nCaused by: java.lang.IllegalArgumentException: error: invalid source release: 21\n    at jdk.compiler/com.sun.tools.javac.main.Arguments.error(Arguments.java:910)\n    at jdk.compiler/com.sun.tools.javac.main.Arguments.doProcessArgs(Arguments.java:383)\n    at jdk.compiler/com.sun.tools.javac.main.Arguments.processArgs(Arguments.java:347)\n    at jdk.compiler/com.sun.tools.javac.main.Arguments.init(Arguments.java:246)\n    at jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:185)\n    at jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:119)\n    at jdk.compiler/com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)\n    at org.gradle.api.internal.tasks.compile.JdkTools$DefaultIncrementalAwareCompiler.getTask(JdkTools.java:132)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.createCompileTask(JdkJavaCompiler.java:70)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:53)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\n    at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\n    at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\n    at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\n    at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\n    at org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)\n    at org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:231)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)\n    at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)\n    at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:65)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:51)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:278)\n    at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:164)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:145)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\n    at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n    at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$2.run(ExecuteActionsTaskExecuter.java:506)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:56)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$run$1(DefaultBuildOperationExecutor.java:74)\n    at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.runWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:45)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:74)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeAction(ExecuteActionsTaskExecuter.java:491)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:474)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.access$300(ExecuteActionsTaskExecuter.java:106)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.executeWithPreviousOutputFiles(ExecuteActionsTaskExecuter.java:271)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution.execute(ExecuteActionsTaskExecuter.java:249)\n    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:83)\n    at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:37)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:47)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:37)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:50)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\n    at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\n    at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\n    at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:54)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:35)\n    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)\n    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)\n    at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:174)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:74)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:45)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:40)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:29)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:99)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$0(SkipUpToDateStep.java:92)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:52)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:36)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:85)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:42)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:91)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:49)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:106)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:51)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:72)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:46)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.lambda$execute$2(SkipEmptyWorkStep.java:86)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:86)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:32)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n    at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:43)\n    at org.gradle.internal.execution.steps.LoadExecutionStateStep.execute(LoadExecutionStateStep.java:31)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter$TaskExecution$2.withWorkspace(ExecuteActionsTaskExecuter.java:284)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\n    at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:185)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:174)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:109)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:75)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$3.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:153)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:68)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:62)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.lambda$call$2(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.internal.operations.UnmanagedBuildOperationWrapper.callWithUnmanagedSupport(UnmanagedBuildOperationWrapper.java:54)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:79)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:408)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:395)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:388)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:374)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:127)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:191)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:182)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:124)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"score":0,"creation_date":1640286619,"post_id":70466376,"comment_id":124563560,"body_markdown":"Do the response conversion in a some other class like helper. Don&#39;t do it in the controller. To get page count and other page related stats are available in the page object response. Pick the required attributes from that page object and construct a new model based on your response and return it to controller.","body":"Do the response conversion in a some other class like helper. Don&#39;t do it in the controller. To get page count and other page related stats are available in the page object response. Pick the required attributes from that page object and construct a new model based on your response and return it to controller."},{"owner":{"account_id":22566541,"reputation":407,"user_id":16753477,"display_name":"Cleiton Freitas"},"score":0,"creation_date":1640288004,"post_id":70466376,"comment_id":124563950,"body_markdown":"this time I&#39;m going to use Jo&#227;o answer, but thanks for your help!","body":"this time I&#39;m going to use Jo&#227;o answer, but thanks for your help!"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640286682,"creation_date":1640286682,"answer_id":70466477,"question_id":70466376,"body_markdown":"You can do it easily with `Page.map()` method ([reference documentation][1]):\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;api/v1/customers&quot;)\r\n@RequiredArgsConstructor\r\npublic class CustomerController {\r\n\r\n    private final CustomerService customerService;\r\n\r\n    @GetMapping\r\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; findAll() {\r\n        return ResponseEntity.ok(customerService.findAll());\r\n    }\r\n\r\n    @GetMapping(&quot;/stats&quot;)\r\n    public ResponseEntity&lt;List&lt;CustomerStatsResponseDto&gt;&gt; customerStats() {\r\n        return ResponseEntity.ok(customerService.customerStats().stream()\r\n                .map(CustomerStatsResponseDto::new)\r\n                .collect(Collectors.toList()));\r\n    }\r\n\r\n    @GetMapping(&quot;/stats/pageable&quot;)\r\n    public ResponseEntity&lt;Page&lt;CustomerStatsResponseDto&gt;&gt; customerStatsPageable(Pageable pageable) {\r\n        return ResponseEntity.ok(customerService.customerStatsPageable()\r\n                .map(CustomerStatsResponseDto::new));\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html#map-java.util.function.Function-","title":"Stats in entity response DTO pageable","body":"<p>You can do it easily with <code>Page.map()</code> method (<a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html#map-java.util.function.Function-\" rel=\"nofollow noreferrer\">reference documentation</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;api/v1/customers&quot;)\n@RequiredArgsConstructor\npublic class CustomerController {\n\n    private final CustomerService customerService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; findAll() {\n        return ResponseEntity.ok(customerService.findAll());\n    }\n\n    @GetMapping(&quot;/stats&quot;)\n    public ResponseEntity&lt;List&lt;CustomerStatsResponseDto&gt;&gt; customerStats() {\n        return ResponseEntity.ok(customerService.customerStats().stream()\n                .map(CustomerStatsResponseDto::new)\n                .collect(Collectors.toList()));\n    }\n\n    @GetMapping(&quot;/stats/pageable&quot;)\n    public ResponseEntity&lt;Page&lt;CustomerStatsResponseDto&gt;&gt; customerStatsPageable(Pageable pageable) {\n        return ResponseEntity.ok(customerService.customerStatsPageable()\n                .map(CustomerStatsResponseDto::new));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22566541,"reputation":407,"user_id":16753477,"display_name":"Cleiton Freitas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":298,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70466477,"answer_count":1,"score":0,"last_activity_date":1640286682,"creation_date":1640286020,"question_id":70466376,"body_markdown":"I need to return a DTO response with the entity&#39;s statistics pageable.\r\n\r\n**Current response:**\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;name&quot;: &quot;Customer 1&quot;,\r\n            &quot;customerStats&quot;: {\r\n                &quot;totalAmount&quot;: 950.0,\r\n                &quot;countOrders&quot;: 3,\r\n                &quot;countOrdersPending&quot;: 1,\r\n                &quot;countOrdersCompleted&quot;: 2\r\n            }\r\n        },\r\n        {\r\n            &quot;id&quot;: 2,\r\n            &quot;name&quot;: &quot;Customer 2&quot;,\r\n            &quot;customerStats&quot;: {\r\n                &quot;totalAmount&quot;: 1867.5,\r\n                &quot;countOrders&quot;: 5,\r\n                &quot;countOrdersPending&quot;: 2,\r\n                &quot;countOrdersCompleted&quot;: 3\r\n            }\r\n        }\r\n    ]\r\n\r\n**Expected response:**\r\n\r\n    {\r\n        &quot;content&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;Customer 1&quot;,\r\n                &quot;customerStats&quot;: {\r\n                &quot;totalAmount&quot;: 950.0,\r\n                &quot;countOrders&quot;: 3,\r\n                &quot;countOrdersPending&quot;: 1,\r\n                &quot;countOrdersCompleted&quot;: 2\r\n            }\r\n            },\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;name&quot;: &quot;Customer 2&quot;,\r\n                &quot;customerStats&quot;: {\r\n                &quot;totalAmount&quot;: 1867.5,\r\n                &quot;countOrders&quot;: 5,\r\n                &quot;countOrdersPending&quot;: 2,\r\n                &quot;countOrdersCompleted&quot;: 3\r\n            }\r\n            }\r\n        ],\r\n        &quot;pageable&quot;: {\r\n            &quot;sort&quot;: {\r\n                &quot;empty&quot;: true,\r\n                &quot;sorted&quot;: false,\r\n                &quot;unsorted&quot;: true\r\n            },\r\n            &quot;offset&quot;: 0,\r\n            &quot;pageSize&quot;: 20,\r\n            &quot;pageNumber&quot;: 0,\r\n            &quot;paged&quot;: true,\r\n            &quot;unpaged&quot;: false\r\n        },\r\n        &quot;last&quot;: true,\r\n        &quot;totalElements&quot;: 2,\r\n        &quot;totalPages&quot;: 1,\r\n        &quot;size&quot;: 20,\r\n        &quot;number&quot;: 0,\r\n        &quot;sort&quot;: {\r\n            &quot;empty&quot;: true,\r\n            &quot;sorted&quot;: false,\r\n            &quot;unsorted&quot;: true\r\n        },\r\n        &quot;first&quot;: true,\r\n        &quot;numberOfElements&quot;: 2,\r\n        &quot;empty&quot;: false\r\n    }\r\n\r\nI still need to do the conversion in the controller, how do I do the conversion in the `CustomerController`?\r\n\r\nMy classes:\r\n\r\n**MODEL**\r\n\r\n***Customer*** \r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    import javax.persistence.*;\r\n    \r\n    @Entity\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;customers&quot;)\r\n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n    public class Customer {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n        private String name;\r\n    \r\n    }\r\n\r\n***Order***\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\n        import lombok.AllArgsConstructor;\r\n        import lombok.Builder;\r\n        import lombok.Data;\r\n        import lombok.NoArgsConstructor;\r\n        \r\n        import javax.persistence.*;\r\n        \r\n        @Entity\r\n        @Data\r\n        @Builder\r\n        @AllArgsConstructor\r\n        @NoArgsConstructor\r\n        @Table(name = &quot;orders&quot;)\r\n        @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n        public class Order {\r\n        \r\n            @Id\r\n            @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n            private Long id;\r\n        \r\n            @ManyToOne(fetch = FetchType.LAZY)\r\n            @JoinColumn(name = &quot;customer_id&quot;, nullable = false, foreignKey = @ForeignKey(name = &quot;fk_order_customer1&quot;))\r\n            private Customer customer;\r\n            private Double amount;\r\n        \r\n            @Enumerated(value = EnumType.STRING)\r\n            private OrderStatusType orderStatus;\r\n        \r\n        }\r\n\r\n***Enum***\r\n\r\n    public enum OrderStatusType {\r\n        PENDING,\r\n        COMPLETED\r\n    }\r\n\r\n**DTO**\r\n\r\n***CustomerStatsDto***\r\n\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    public class CustomerStatsDto {\r\n        private Double totalAmount;\r\n        private Long countOrders;\r\n        private Long countOrdersPending;\r\n        private Long countOrdersCompleted;\r\n    \r\n        public CustomerStatsDto(Double totalAmount, Long countOrders, Long countOrdersPending, Long countOrdersCompleted) {\r\n            this.totalAmount = totalAmount;\r\n            this.countOrders = countOrders;\r\n            this.countOrdersPending = countOrdersPending;\r\n            this.countOrdersCompleted = countOrdersCompleted;\r\n        }\r\n    }\r\n\r\n***CustomerStatsResponse***\r\n\r\n    public interface CustomerStatsResponse {\r\n        Long getId();\r\n        String getName();\r\n        Double getTotalAmount();\r\n        Long getCountOrders();\r\n        Long getCountOrdersPending();\r\n        Long getCountOrdersCompleted();\r\n    }\r\n\r\n***CustomerStatsResponseDto***\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class CustomerStatsResponseDto {\r\n    \r\n        private Long id;\r\n        private String name;\r\n        private CustomerStatsDto customerStats;\r\n    \r\n        public CustomerStatsResponseDto(CustomerStatsResponse customerStatsResponse) {\r\n            this.id = customerStatsResponse.getId();\r\n            this.name = customerStatsResponse.getName();\r\n            this.customerStats = new CustomerStatsDto(customerStatsResponse.getTotalAmount(), customerStatsResponse.getCountOrders(),\r\n                    customerStatsResponse.getCountOrdersPending(), customerStatsResponse.getCountOrdersCompleted());\r\n        }\r\n    }\r\n\r\n**REPOSITORY**\r\n\r\n***OrderRep***\r\n\r\n    import com.example.demo.model.Order;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    \r\n    public interface OrderRep extends JpaRepository&lt;Order, Long&gt; {\r\n    }\r\n\r\n***CustomerRep***\r\n\r\n    import com.example.demo.dto.CustomerStatsResponse;\r\n    import com.example.demo.model.Customer;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.Query;\r\n    \r\n    import java.util.List;\r\n    \r\n    public interface CustomerRep extends JpaRepository&lt;Customer, Long&gt; {\r\n    \r\n        @Query(value = &quot;SELECT c.id, c.name, &quot; +\r\n                &quot;SUM(o.amount) AS totalAmount, &quot; +\r\n                &quot;COUNT(o.id) AS countOrders, &quot; +\r\n                &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\r\n                &quot;WHERE ord.customer_id = c.id AND ord.order_status = &#39;PENDING&#39;) as countOrdersPending, &quot; +\r\n                &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\r\n                &quot;WHERE ord.customer_id = c.id AND ord.order_status = &#39;COMPLETED&#39;) as countOrdersCompleted &quot; +\r\n                &quot;FROM customers c &quot; +\r\n                &quot;INNER JOIN orders o ON c.id = o.customer_id &quot; +\r\n                &quot;GROUP BY c.id, c.name&quot;\r\n                , nativeQuery = true)\r\n        List&lt;CustomerStatsResponse&gt; customerStats();\r\n    \r\n        @Query(value = &quot;SELECT c.id, c.name, &quot; +\r\n                &quot;SUM(o.amount) AS totalAmount, &quot; +\r\n                &quot;COUNT(o.id) AS countOrders, &quot; +\r\n                &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\r\n                &quot;WHERE ord.customer_id = c.id AND ord.order_status = &#39;PENDING&#39;) as countOrdersPending, &quot; +\r\n                &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\r\n                &quot;WHERE ord.customer_id = c.id AND ord.order_status = &#39;COMPLETED&#39;) as countOrdersCompleted &quot; +\r\n                &quot;FROM customers c &quot; +\r\n                &quot;INNER JOIN orders o ON c.id = o.customer_id &quot; +\r\n                &quot;GROUP BY c.id, c.name&quot;\r\n                , nativeQuery = true)\r\n        Page&lt;CustomerStatsResponse&gt; customerStatsPageable(Pageable pageable);\r\n    \r\n    }\r\n\r\n**SERVICE**\r\n\r\n***CustomerService***\r\n\r\n    import com.example.demo.dto.CustomerStatsResponse;\r\n    import com.example.demo.model.Customer;\r\n    import com.example.demo.repository.CustomerRep;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import java.util.List;\r\n    \r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class CustomerService {\r\n    \r\n        private final CustomerRep customerRep;\r\n    \r\n        public List&lt;Customer&gt; findAll() {\r\n            return customerRep.findAll();\r\n        }\r\n    \r\n        public List&lt;CustomerStatsResponse&gt; customerStats() {\r\n            return customerRep.customerStats();\r\n        }\r\n    \r\n        public Page&lt;CustomerStatsResponse&gt; customerStatsPageable(Pageable pageable) {\r\n            return customerRep.customerStatsPageable(pageable);\r\n        }\r\n    \r\n    }\r\n\r\n**CONTROLLER**\r\n\r\n***CustomerController***\r\n\r\n    import com.example.demo.dto.CustomerStatsResponseDto;\r\n    import com.example.demo.model.Customer;\r\n    import com.example.demo.service.CustomerService;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;api/v1/customers&quot;)\r\n    @RequiredArgsConstructor\r\n    public class CustomerController {\r\n    \r\n        private final CustomerService customerService;\r\n    \r\n        @GetMapping\r\n        public ResponseEntity&lt;List&lt;Customer&gt;&gt; findAll() {\r\n            return ResponseEntity.ok(customerService.findAll());\r\n        }\r\n    \r\n        @GetMapping(&quot;/stats&quot;)\r\n        public ResponseEntity&lt;List&lt;CustomerStatsResponseDto&gt;&gt; customerStats() {\r\n            return ResponseEntity.ok(customerService.customerStats().stream()\r\n                    .map(customerStatsResponse -&gt; new CustomerStatsResponseDto(customerStatsResponse))\r\n                    .collect(Collectors.toList()));\r\n        }\r\n    \r\n        @GetMapping(&quot;/stats/pageable&quot;)\r\n        public ResponseEntity&lt;Page&lt;CustomerStatsResponseDto&gt;&gt; customerStatsPageable(Pageable pageable) {\r\n            //Return Customer Stats pageable\r\n            return null;\r\n        }\r\n    \r\n    }","title":"Stats in entity response DTO pageable","body":"<p>I need to return a DTO response with the entity's statistics pageable.</p>\n<p><strong>Current response:</strong></p>\n<pre><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;Customer 1&quot;,\n        &quot;customerStats&quot;: {\n            &quot;totalAmount&quot;: 950.0,\n            &quot;countOrders&quot;: 3,\n            &quot;countOrdersPending&quot;: 1,\n            &quot;countOrdersCompleted&quot;: 2\n        }\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;Customer 2&quot;,\n        &quot;customerStats&quot;: {\n            &quot;totalAmount&quot;: 1867.5,\n            &quot;countOrders&quot;: 5,\n            &quot;countOrdersPending&quot;: 2,\n            &quot;countOrdersCompleted&quot;: 3\n        }\n    }\n]\n</code></pre>\n<p><strong>Expected response:</strong></p>\n<pre><code>{\n    &quot;content&quot;: [\n        {\n            &quot;id&quot;: 1,\n            &quot;name&quot;: &quot;Customer 1&quot;,\n            &quot;customerStats&quot;: {\n            &quot;totalAmount&quot;: 950.0,\n            &quot;countOrders&quot;: 3,\n            &quot;countOrdersPending&quot;: 1,\n            &quot;countOrdersCompleted&quot;: 2\n        }\n        },\n        {\n            &quot;id&quot;: 2,\n            &quot;name&quot;: &quot;Customer 2&quot;,\n            &quot;customerStats&quot;: {\n            &quot;totalAmount&quot;: 1867.5,\n            &quot;countOrders&quot;: 5,\n            &quot;countOrdersPending&quot;: 2,\n            &quot;countOrdersCompleted&quot;: 3\n        }\n        }\n    ],\n    &quot;pageable&quot;: {\n        &quot;sort&quot;: {\n            &quot;empty&quot;: true,\n            &quot;sorted&quot;: false,\n            &quot;unsorted&quot;: true\n        },\n        &quot;offset&quot;: 0,\n        &quot;pageSize&quot;: 20,\n        &quot;pageNumber&quot;: 0,\n        &quot;paged&quot;: true,\n        &quot;unpaged&quot;: false\n    },\n    &quot;last&quot;: true,\n    &quot;totalElements&quot;: 2,\n    &quot;totalPages&quot;: 1,\n    &quot;size&quot;: 20,\n    &quot;number&quot;: 0,\n    &quot;sort&quot;: {\n        &quot;empty&quot;: true,\n        &quot;sorted&quot;: false,\n        &quot;unsorted&quot;: true\n    },\n    &quot;first&quot;: true,\n    &quot;numberOfElements&quot;: 2,\n    &quot;empty&quot;: false\n}\n</code></pre>\n<p>I still need to do the conversion in the controller, how do I do the conversion in the <code>CustomerController</code>?</p>\n<p>My classes:</p>\n<p><strong>MODEL</strong></p>\n<p><em><strong>Customer</strong></em></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\n\n@Entity\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;customers&quot;)\n@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\npublic class Customer {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String name;\n\n}\n</code></pre>\n<p><em><strong>Order</strong></em></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n    import lombok.AllArgsConstructor;\n    import lombok.Builder;\n    import lombok.Data;\n    import lombok.NoArgsConstructor;\n    \n    import javax.persistence.*;\n    \n    @Entity\n    @Data\n    @Builder\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @Table(name = &quot;orders&quot;)\n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\n    public class Order {\n    \n        @Id\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\n        private Long id;\n    \n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = &quot;customer_id&quot;, nullable = false, foreignKey = @ForeignKey(name = &quot;fk_order_customer1&quot;))\n        private Customer customer;\n        private Double amount;\n    \n        @Enumerated(value = EnumType.STRING)\n        private OrderStatusType orderStatus;\n    \n    }\n</code></pre>\n<p><em><strong>Enum</strong></em></p>\n<pre><code>public enum OrderStatusType {\n    PENDING,\n    COMPLETED\n}\n</code></pre>\n<p><strong>DTO</strong></p>\n<p><em><strong>CustomerStatsDto</strong></em></p>\n<pre><code>import lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Builder\n@NoArgsConstructor\npublic class CustomerStatsDto {\n    private Double totalAmount;\n    private Long countOrders;\n    private Long countOrdersPending;\n    private Long countOrdersCompleted;\n\n    public CustomerStatsDto(Double totalAmount, Long countOrders, Long countOrdersPending, Long countOrdersCompleted) {\n        this.totalAmount = totalAmount;\n        this.countOrders = countOrders;\n        this.countOrdersPending = countOrdersPending;\n        this.countOrdersCompleted = countOrdersCompleted;\n    }\n}\n</code></pre>\n<p><em><strong>CustomerStatsResponse</strong></em></p>\n<pre><code>public interface CustomerStatsResponse {\n    Long getId();\n    String getName();\n    Double getTotalAmount();\n    Long getCountOrders();\n    Long getCountOrdersPending();\n    Long getCountOrdersCompleted();\n}\n</code></pre>\n<p><em><strong>CustomerStatsResponseDto</strong></em></p>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class CustomerStatsResponseDto {\n\n    private Long id;\n    private String name;\n    private CustomerStatsDto customerStats;\n\n    public CustomerStatsResponseDto(CustomerStatsResponse customerStatsResponse) {\n        this.id = customerStatsResponse.getId();\n        this.name = customerStatsResponse.getName();\n        this.customerStats = new CustomerStatsDto(customerStatsResponse.getTotalAmount(), customerStatsResponse.getCountOrders(),\n                customerStatsResponse.getCountOrdersPending(), customerStatsResponse.getCountOrdersCompleted());\n    }\n}\n</code></pre>\n<p><strong>REPOSITORY</strong></p>\n<p><em><strong>OrderRep</strong></em></p>\n<pre><code>import com.example.demo.model.Order;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface OrderRep extends JpaRepository&lt;Order, Long&gt; {\n}\n</code></pre>\n<p><em><strong>CustomerRep</strong></em></p>\n<pre><code>import com.example.demo.dto.CustomerStatsResponse;\nimport com.example.demo.model.Customer;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\n\nimport java.util.List;\n\npublic interface CustomerRep extends JpaRepository&lt;Customer, Long&gt; {\n\n    @Query(value = &quot;SELECT c.id, c.name, &quot; +\n            &quot;SUM(o.amount) AS totalAmount, &quot; +\n            &quot;COUNT(o.id) AS countOrders, &quot; +\n            &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\n            &quot;WHERE ord.customer_id = c.id AND ord.order_status = 'PENDING') as countOrdersPending, &quot; +\n            &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\n            &quot;WHERE ord.customer_id = c.id AND ord.order_status = 'COMPLETED') as countOrdersCompleted &quot; +\n            &quot;FROM customers c &quot; +\n            &quot;INNER JOIN orders o ON c.id = o.customer_id &quot; +\n            &quot;GROUP BY c.id, c.name&quot;\n            , nativeQuery = true)\n    List&lt;CustomerStatsResponse&gt; customerStats();\n\n    @Query(value = &quot;SELECT c.id, c.name, &quot; +\n            &quot;SUM(o.amount) AS totalAmount, &quot; +\n            &quot;COUNT(o.id) AS countOrders, &quot; +\n            &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\n            &quot;WHERE ord.customer_id = c.id AND ord.order_status = 'PENDING') as countOrdersPending, &quot; +\n            &quot;(SELECT COUNT(ord.id) FROM orders ord &quot; +\n            &quot;WHERE ord.customer_id = c.id AND ord.order_status = 'COMPLETED') as countOrdersCompleted &quot; +\n            &quot;FROM customers c &quot; +\n            &quot;INNER JOIN orders o ON c.id = o.customer_id &quot; +\n            &quot;GROUP BY c.id, c.name&quot;\n            , nativeQuery = true)\n    Page&lt;CustomerStatsResponse&gt; customerStatsPageable(Pageable pageable);\n\n}\n</code></pre>\n<p><strong>SERVICE</strong></p>\n<p><em><strong>CustomerService</strong></em></p>\n<pre><code>import com.example.demo.dto.CustomerStatsResponse;\nimport com.example.demo.model.Customer;\nimport com.example.demo.repository.CustomerRep;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\n\n@Service\n@RequiredArgsConstructor\npublic class CustomerService {\n\n    private final CustomerRep customerRep;\n\n    public List&lt;Customer&gt; findAll() {\n        return customerRep.findAll();\n    }\n\n    public List&lt;CustomerStatsResponse&gt; customerStats() {\n        return customerRep.customerStats();\n    }\n\n    public Page&lt;CustomerStatsResponse&gt; customerStatsPageable(Pageable pageable) {\n        return customerRep.customerStatsPageable(pageable);\n    }\n\n}\n</code></pre>\n<p><strong>CONTROLLER</strong></p>\n<p><em><strong>CustomerController</strong></em></p>\n<pre><code>import com.example.demo.dto.CustomerStatsResponseDto;\nimport com.example.demo.model.Customer;\nimport com.example.demo.service.CustomerService;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@RestController\n@RequestMapping(&quot;api/v1/customers&quot;)\n@RequiredArgsConstructor\npublic class CustomerController {\n\n    private final CustomerService customerService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;Customer&gt;&gt; findAll() {\n        return ResponseEntity.ok(customerService.findAll());\n    }\n\n    @GetMapping(&quot;/stats&quot;)\n    public ResponseEntity&lt;List&lt;CustomerStatsResponseDto&gt;&gt; customerStats() {\n        return ResponseEntity.ok(customerService.customerStats().stream()\n                .map(customerStatsResponse -&gt; new CustomerStatsResponseDto(customerStatsResponse))\n                .collect(Collectors.toList()));\n    }\n\n    @GetMapping(&quot;/stats/pageable&quot;)\n    public ResponseEntity&lt;Page&lt;CustomerStatsResponseDto&gt;&gt; customerStatsPageable(Pageable pageable) {\n        //Return Customer Stats pageable\n        return null;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1640285926,"post_id":70466312,"comment_id":124563386,"body_markdown":"How do you load the image file? I&#39;m quite sure that Gradle does what it always does and includes the resource folder. Maybe your way of trying to load the image is the real problem.","body":"How do you load the image file? I&#39;m quite sure that Gradle does what it always does and includes the resource folder. Maybe your way of trying to load the image is the real problem."},{"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"score":0,"creation_date":1640286036,"post_id":70466312,"comment_id":124563416,"body_markdown":"@ThomasKl&#228;ger I load it by the path &quot;src/main/resources/image.png&quot;, when I run it without building into a jar it works perfectly.","body":"@ThomasKl&#228;ger I load it by the path &quot;src/main/resources/image.png&quot;, when I run it without building into a jar it works perfectly."},{"owner":{"account_id":1888690,"reputation":3005,"user_id":1707353,"accept_rate":91,"display_name":"Jeff Holt"},"score":0,"creation_date":1640286139,"post_id":70466312,"comment_id":124563442,"body_markdown":"To get resources placed in my jar file I specify this in my jar task: `from (buildDir) { include &#39;pattern&#39; }`.","body":"To get resources placed in my jar file I specify this in my jar task: <code>from (buildDir) { include &#39;pattern&#39; }</code>."},{"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"score":0,"creation_date":1640286247,"post_id":70466312,"comment_id":124563468,"body_markdown":"@JeffHolt I tried it this way: ```from(&#39;src/main&#39;) { include &#39;resources/*.png&#39; }``` without effect","body":"@JeffHolt I tried it this way: <code>from(&#39;src&#47;main&#39;) { include &#39;resources&#47;*.png&#39; }</code> without effect"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640286250,"post_id":70466312,"comment_id":124563470,"body_markdown":"What does &#39;.&#39; mean in file/path/directory context?? Correct! Current directory!;)","body":"What does &#39;.&#39; mean in file/path/directory context?? Correct! Current directory!;)"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1640286360,"post_id":70466312,"comment_id":124563502,"body_markdown":"To load a packaged resource you must not use the full path (&quot;src/main/resources/image.png&quot;) packaging it into the jar drops the first part of the path (&quot;src/main/resource&quot;), within the jar the path is only &quot;image.png&quot;","body":"To load a packaged resource you must not use the full path (&quot;src/main/resources/image.png&quot;) packaging it into the jar drops the first part of the path (&quot;src/main/resource&quot;), within the jar the path is only &quot;image.png&quot;"},{"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"score":0,"creation_date":1640286407,"post_id":70466312,"comment_id":124563510,"body_markdown":"@xerx593 after removing &#39;.&#39; before /src/main/resources I can tell you that it wasn&#39;t the case","body":"@xerx593 after removing &#39;.&#39; before /src/main/resources I can tell you that it wasn&#39;t the case"},{"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"score":0,"creation_date":1640286564,"post_id":70466312,"comment_id":124563546,"body_markdown":"@ThomasKl&#228;ger I tried to load it by &#39;./image.png&#39; and it still doesnt work.","body":"@ThomasKl&#228;ger I tried to load it by &#39;./image.png&#39; and it still doesnt work."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1640286764,"post_id":70466312,"comment_id":124563607,"body_markdown":"Do you really load the resource (as noted in https://stackoverflow.com/a/15749260: `InputStream is = MyTest.class.getResourceAsStream(&quot;/image.png&quot;);`) or are you trying to load it from the filesystem (`InputStream is = new FileInputStream(&quot;./image.png&quot;);`)? Because packaged resource do not exist in the filesystem, you cannot access them with `java.io.File` / `java.io.FileInputStream` and similar","body":"Do you really load the resource (as noted in <a href=\"https://stackoverflow.com/a/15749260\">stackoverflow.com/a/15749260</a>: <code>InputStream is = MyTest.class.getResourceAsStream(&quot;&#47;image.png&quot;);</code>) or are you trying to load it from the filesystem (<code>InputStream is = new FileInputStream(&quot;.&#47;image.png&quot;);</code>)? Because packaged resource do not exist in the filesystem, you cannot access them with <code>java.io.File</code> / <code>java.io.FileInputStream</code> and similar"},{"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"score":0,"creation_date":1640288161,"post_id":70466312,"comment_id":124563991,"body_markdown":"@ThomasKl&#228;ger I use this code and as arguments I give &quot;./&quot;, &quot;image.png&quot; ```InputStream inputStream = ImageLoader.class.getResourceAsStream(path + filename);``` It returns null","body":"@ThomasKl&#228;ger I use this code and as arguments I give &quot;./&quot;, &quot;image.png&quot; <code>InputStream inputStream = ImageLoader.class.getResourceAsStream(path + filename);</code> It returns null"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640288420,"post_id":70466312,"comment_id":124564072,"body_markdown":"`/` means root (*when* you are lucky..in windows, it will point to `C:\\`)..","body":"<code>&#47;</code> means root (<i>when</i> you are lucky..in windows, it will point to `C:`).."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1640290659,"post_id":70466312,"comment_id":124564615,"body_markdown":"If the image file is in the resources folder directly then the path must be &quot;/&quot; - using &quot;./&quot; will search it in the same directory as the `ImageLoader` class (i.e. if the `ImageLoader` class is in the com.example package using &quot;./image.png&quot; will search the image in the &quot;com/example&quot; resource folder.","body":"If the image file is in the resources folder directly then the path must be &quot;/&quot; - using &quot;./&quot; will search it in the same directory as the <code>ImageLoader</code> class (i.e. if the <code>ImageLoader</code> class is in the com.example package using &quot;./image.png&quot; will search the image in the &quot;com/example&quot; resource folder."}],"answers":[{"tags":[],"owner":{"account_id":9641139,"reputation":616,"user_id":7364381,"display_name":"Sukhmeet Sethi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640286598,"creation_date":1640286598,"answer_id":70466462,"question_id":70466312,"body_markdown":"May be you should try exclusively specifying the `include` in jar section of build.gradle\r\n\r\n```groovy\r\njar { \r\n\r\n// try adding this\r\n    from(&#39;src/main/resources&#39;) {\r\n       include &#39;**/*.*&#39;\r\n    }\r\n\r\n \r\n    manifest {  \r\n        attributes(  \r\n                &#39;Main-Class&#39;: &#39;skorupinski.xmass.Main&#39;  \r\n        )  \r\n    }  \r\n\r\n    baseName = &#39;hi&#39;\r\n}\r\n","title":"Gradle does not include resource folder to jar","body":"<p>May be you should try exclusively specifying the <code>include</code> in jar section of build.gradle</p>\n<pre><code>jar { \n\n// try adding this\n    from('src/main/resources') {\n       include '**/*.*'\n    }\n\n \n    manifest {  \n        attributes(  \n                'Main-Class': 'skorupinski.xmass.Main'  \n        )  \n    }  \n\n    baseName = 'hi'\n}\n</code></pre>\n"}],"owner":{"account_id":13062616,"reputation":11,"user_id":10582479,"display_name":"Mateusz Skorupiński"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4098,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640357459,"answer_count":1,"score":0,"last_activity_date":1640286598,"creation_date":1640285684,"question_id":70466312,"body_markdown":"I am having a little trouble building jar from gradle project. Namely gradle doesn&#39;t include my resource folder even though i have it specified in build.gradle as shown below:\r\n\r\n```\r\nplugins {\r\n    id &#39;application&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\napplication {\r\n    mainClass = &#39;skorupinski.xmass.Main&#39;\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs = [&#39;./src/main/java&#39;]\r\n        }\r\n        resources {\r\n            srcDirs = [&#39;./src/main/resources&#39;]\r\n        }\r\n    }\r\n}\r\n\r\njar {  \r\n    manifest {  \r\n        attributes(  \r\n                &#39;Main-Class&#39;: &#39;skorupinski.xmass.Main&#39;  \r\n        )  \r\n    }  \r\n\r\n    baseName = &#39;hi&#39;\r\n}\r\n\r\n```\r\n\r\nThere are images in the resource folder that I load into my java program. When I run the jar file it returns an error that it coudln&#39;t file the image file unless i put the jar in the same directory as src folder.\r\n\r\n\r\n[My file tree][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9M8Kq.png","title":"Gradle does not include resource folder to jar","body":"<p>I am having a little trouble building jar from gradle project. Namely gradle doesn't include my resource folder even though i have it specified in build.gradle as shown below:</p>\n<pre><code>plugins {\n    id 'application'\n}\n\nrepositories {\n    mavenCentral()\n}\n\napplication {\n    mainClass = 'skorupinski.xmass.Main'\n}\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['./src/main/java']\n        }\n        resources {\n            srcDirs = ['./src/main/resources']\n        }\n    }\n}\n\njar {  \n    manifest {  \n        attributes(  \n                'Main-Class': 'skorupinski.xmass.Main'  \n        )  \n    }  \n\n    baseName = 'hi'\n}\n\n</code></pre>\n<p>There are images in the resource folder that I load into my java program. When I run the jar file it returns an error that it coudln't file the image file unless i put the jar in the same directory as src folder.</p>\n<p><a href=\"https://i.stack.imgur.com/9M8Kq.png\" rel=\"nofollow noreferrer\">My file tree</a></p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1640278793,"post_id":70465012,"comment_id":124561332,"body_markdown":"WIth `buy.increaseAmount()` you increase the amount of the newly created purchase object, but not the one inside the map. Actually, you should not create a purchase object if there already is one in the map.","body":"WIth <code>buy.increaseAmount()</code> you increase the amount of the newly created purchase object, but not the one inside the map. Actually, you should not create a purchase object if there already is one in the map."}],"answers":[{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640279332,"creation_date":1640279332,"answer_id":70465308,"question_id":70465012,"body_markdown":"In your else black, you need to retrieve the Purchase object from the map.  Then call `increaseAmount` on the object retrieved.\r\n```\r\n    public void add(String product, int price) {\r\n        Purchases buy =  new Purchases(product, 1, price);\r\n        if(!basket.containsKey(product)) {   \r\n            basket.put(product, buy);\r\n        } else {\r\n            buy = basket.get(product);  &lt;--retrieve it \r\n            buy.increaseAmount();      &lt;--increment amount\r\n        }\r\n    }\r\n```","title":"Increasing value of an object if it&#39;s already in a map","body":"<p>In your else black, you need to retrieve the Purchase object from the map.  Then call <code>increaseAmount</code> on the object retrieved.</p>\n<pre><code>    public void add(String product, int price) {\n        Purchases buy =  new Purchases(product, 1, price);\n        if(!basket.containsKey(product)) {   \n            basket.put(product, buy);\n        } else {\n            buy = basket.get(product);  &lt;--retrieve it \n            buy.increaseAmount();      &lt;--increment amount\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9185667,"reputation":55,"user_id":6827990,"display_name":"Ramesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640279375,"creation_date":1640279375,"answer_id":70465322,"question_id":70465012,"body_markdown":"code is not adding purchase to map if key is already there, add map.put in else part \r\n\r\n    public void add(String product, int price) {      \r\n            Purchases buy =  new Purchases(product, 1, price);         \r\n            if(!basket.containsKey(product)) {                    \r\n                basket.put(product, buy);    \r\n            } else {              \r\n                buy.increaseAmount();      \r\n                basket.put(product, buy);        \r\n            }    \r\n    }","title":"Increasing value of an object if it&#39;s already in a map","body":"<p>code is not adding purchase to map if key is already there, add map.put in else part</p>\n<pre><code>public void add(String product, int price) {      \n        Purchases buy =  new Purchases(product, 1, price);         \n        if(!basket.containsKey(product)) {                    \n            basket.put(product, buy);    \n        } else {              \n            buy.increaseAmount();      \n            basket.put(product, buy);        \n        }    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640279531,"creation_date":1640279531,"answer_id":70465358,"question_id":70465012,"body_markdown":"&gt; `Purchases buy =  new Purchases(product, 1, price);`\r\n\r\nSee the `new`? You&#39;re making a __new__ object here, hence the name. You then increment the product count on this new object and promptly toss the only variable that refers to this new object (your `buy` variable) in the garbage, because that&#39;s what happens with all local variables when a method ends: The variable goes away. With that, nothing refers to this brand new Purchases instance and thus it&#39;ll eventually be garbage collected.\r\n\r\nYou want to query for the actual object that was made earlier and stored in that map, then increment the product count on that.\r\n\r\nIn your code, you make a new Purchases instance no matter what happens, and then map the given string to this newly created purchases object only if the string isn&#39;t already in your map. This is no good. You want to create a new purchases instance only if it isn&#39;t already in the map, otherwise you want to fetch the existing instance of Purchases.\r\n\r\nYou could do this:\r\n\r\n```java\r\nPurchases buy;\r\nif(!basket.containsKey(product)) {\r\n  basket.put(product, buy = new Purchases(product, 1, price));\r\n} else {\r\n  basket.get(product).increaseAmount();\r\n}\r\n```\r\n\r\nBut this is inefficient, &#39;ugly&#39; (kinda hard to maintain), and outright broken if this is a concurrent hashmap. Much better is to act-then-check instead:\r\n\r\n```java\r\nbasket\r\n  .computeIfAbsent(product, k -&gt; new Purchases(product, 0, price))\r\n  .increaseAmount();\r\n```\r\n\r\nThis code does just what it says: It will compute the requisite value, but only if there is no key/value mapping _yet_. So, IF `product` is in the map, you just get the Purchases instances associated with it and we move immediately on to `.increaseAmount()`. But if it is not, the code `new Purchases(product, 0, price)` is executed and whatever that resolves to is used as the value (So, it&#39;s like `.put(product, new Purchases(...))`, except the new part is only run if that item wasn&#39;t in the map already. There&#39;s a `k -&gt;` in there because [A] it&#39;s a closure, it&#39;s code that is sent to the `computeIfAbsent` method and is only actually run if needed, and [B] you get the key passed along. Here, not needed, you already have this (variable `product`), but you can imagine you invoked perhaps `basket.computeIfAbsent(some.complex().calculation(), ....`, that&#39;s why it&#39;s there.\r\n\r\nYou then call `increaseAmount()` on whatever you get. Hence why this code starts out with an amount of 0: Because it&#39;ll be increment to 1 immediately afterwards.\r\n","title":"Increasing value of an object if it&#39;s already in a map","body":"<blockquote>\n<p><code>Purchases buy =  new Purchases(product, 1, price);</code></p>\n</blockquote>\n<p>See the <code>new</code>? You're making a <strong>new</strong> object here, hence the name. You then increment the product count on this new object and promptly toss the only variable that refers to this new object (your <code>buy</code> variable) in the garbage, because that's what happens with all local variables when a method ends: The variable goes away. With that, nothing refers to this brand new Purchases instance and thus it'll eventually be garbage collected.</p>\n<p>You want to query for the actual object that was made earlier and stored in that map, then increment the product count on that.</p>\n<p>In your code, you make a new Purchases instance no matter what happens, and then map the given string to this newly created purchases object only if the string isn't already in your map. This is no good. You want to create a new purchases instance only if it isn't already in the map, otherwise you want to fetch the existing instance of Purchases.</p>\n<p>You could do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Purchases buy;\nif(!basket.containsKey(product)) {\n  basket.put(product, buy = new Purchases(product, 1, price));\n} else {\n  basket.get(product).increaseAmount();\n}\n</code></pre>\n<p>But this is inefficient, 'ugly' (kinda hard to maintain), and outright broken if this is a concurrent hashmap. Much better is to act-then-check instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>basket\n  .computeIfAbsent(product, k -&gt; new Purchases(product, 0, price))\n  .increaseAmount();\n</code></pre>\n<p>This code does just what it says: It will compute the requisite value, but only if there is no key/value mapping <em>yet</em>. So, IF <code>product</code> is in the map, you just get the Purchases instances associated with it and we move immediately on to <code>.increaseAmount()</code>. But if it is not, the code <code>new Purchases(product, 0, price)</code> is executed and whatever that resolves to is used as the value (So, it's like <code>.put(product, new Purchases(...))</code>, except the new part is only run if that item wasn't in the map already. There's a <code>k -&gt;</code> in there because [A] it's a closure, it's code that is sent to the <code>computeIfAbsent</code> method and is only actually run if needed, and [B] you get the key passed along. Here, not needed, you already have this (variable <code>product</code>), but you can imagine you invoked perhaps <code>basket.computeIfAbsent(some.complex().calculation(), ....</code>, that's why it's there.</p>\n<p>You then call <code>increaseAmount()</code> on whatever you get. Hence why this code starts out with an amount of 0: Because it'll be increment to 1 immediately afterwards.</p>\n"},{"tags":[],"owner":{"account_id":21480479,"reputation":150,"user_id":15827939,"display_name":"InSaNiTy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640280946,"creation_date":1640280946,"answer_id":70465590,"question_id":70465012,"body_markdown":"This is because you increase the ```amount``` in the new ```Purchases``` object which is not in the map.\r\n\r\n----\r\n\r\nLet&#39;s do code analysis:\r\n\r\n**[Map State] EMPTY**\r\n\r\nYou put one ```Purchases``` object with ```product```&#39;s name/key ```&quot;milk&quot;``` inside the map:\r\n\r\n```\r\npublic void add(String product, int price) {\r\n   Purchases buy =  new Purchases(product, 1, price);\r\n\r\n   if(!basket.containsKey(product)) {     \r\n      // Executed       \r\n      basket.put(product, buy);\r\n   } else {       \r\n      buy.increaseAmount();\r\n   }\r\n}\r\n```\r\n\r\nAs you probably know the code found in the if block is executed - Adds the object inside ```buy``` to the map.\r\n\r\n**[Map State] { &quot;milk&quot;, PurchasesObject1 }**\r\n\r\nNow you are trying again to put a **NEW** ```Purchases``` object whose ```product```&#39;s/key value is ```&quot;milk&quot;``` again into the map. As you probably know, the else block will be executed, Because ```Purchases``` object with key ```&quot;milk&quot;``` already exists in the map.\r\n\r\nWhat happens in the else block is that you increase the value of ```amount``` of the **NEW local object** you&#39;ve just created inside the method, which is not even in the map at all, so once the ```add()``` method finishes its execution, the object you&#39;ve created becomes garbage that needs to be collected by the garbage collector.\r\n\r\n----\r\n\r\n**Solution?**\r\n\r\nSure. Just retrieve the object with the same key and do what you wanted on it.\r\n\r\n```\r\npublic void add(String product, int price) {\r\n   Purchases buy =  new Purchases(product, 1, price);\r\n\r\n   if(!basket.containsKey(product)) {     \r\n      // Executed       \r\n      basket.put(product, buy);\r\n   } else {       \r\n      basket.get(product).increaseAmount();\r\n   }\r\n}\r\n```\r\n","title":"Increasing value of an object if it&#39;s already in a map","body":"<p>This is because you increase the <code>amount</code> in the new <code>Purchases</code> object which is not in the map.</p>\n<hr />\n<p>Let's do code analysis:</p>\n<p><strong>[Map State] EMPTY</strong></p>\n<p>You put one <code>Purchases</code> object with <code>product</code>'s name/key <code>&quot;milk&quot;</code> inside the map:</p>\n<pre><code>public void add(String product, int price) {\n   Purchases buy =  new Purchases(product, 1, price);\n\n   if(!basket.containsKey(product)) {     \n      // Executed       \n      basket.put(product, buy);\n   } else {       \n      buy.increaseAmount();\n   }\n}\n</code></pre>\n<p>As you probably know the code found in the if block is executed - Adds the object inside <code>buy</code> to the map.</p>\n<p><strong>[Map State] { &quot;milk&quot;, PurchasesObject1 }</strong></p>\n<p>Now you are trying again to put a <strong>NEW</strong> <code>Purchases</code> object whose <code>product</code>'s/key value is <code>&quot;milk&quot;</code> again into the map. As you probably know, the else block will be executed, Because <code>Purchases</code> object with key <code>&quot;milk&quot;</code> already exists in the map.</p>\n<p>What happens in the else block is that you increase the value of <code>amount</code> of the <strong>NEW local object</strong> you've just created inside the method, which is not even in the map at all, so once the <code>add()</code> method finishes its execution, the object you've created becomes garbage that needs to be collected by the garbage collector.</p>\n<hr />\n<p><strong>Solution?</strong></p>\n<p>Sure. Just retrieve the object with the same key and do what you wanted on it.</p>\n<pre><code>public void add(String product, int price) {\n   Purchases buy =  new Purchases(product, 1, price);\n\n   if(!basket.containsKey(product)) {     \n      // Executed       \n      basket.put(product, buy);\n   } else {       \n      basket.get(product).increaseAmount();\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":20645614,"reputation":41,"user_id":15157202,"display_name":"Slaven Stajić"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70465308,"answer_count":4,"score":0,"last_activity_date":1640286344,"creation_date":1640277706,"question_id":70465012,"body_markdown":"Every time when a product is added to shoppingBasket if its already in map basket it should increase it value amount by 1. But it doesn&#39;t for some reason. Is it because every time im adding a product to map i&#39;m creating a new purchases?  I can&#39;t figure it out.\r\n\r\n    public void add(String product, int price) {\r\n    \t\tPurchases buy =  new Purchases(product, 1, price);\r\n    \t\tif(!basket.containsKey(product)) {\r\n    \t\t\t\r\n    \t\t\tbasket.put(product, buy);\r\n    \t\t} else {\r\n    \t\t\t\r\n    \t\t\tbuy.increaseAmount();\r\n    \t\t}\r\n\r\n/\r\n\r\n    public void increaseAmount() {\r\n    \t\tthis.amount+= 1;\r\n    \t}\r\n/\r\n\r\n    public class Main {\r\n    \r\n    \t\r\n        public static void main(String[] args) {\r\n        \t\r\n        \t\r\n        \t   ShoppingBasket basket = new ShoppingBasket();\r\n               basket.add(&quot;milk&quot;, 3);\r\n               basket.print();\r\n               System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\r\n    \r\n               basket.add(&quot;buttermilk&quot;, 2);\r\n               basket.print();\r\n               System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\r\n    \r\n               basket.add(&quot;milk&quot;, 3);\r\n               basket.print();\r\n               System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\r\n    \r\n               basket.add(&quot;milk&quot;, 3);\r\n               basket.print();\r\n               System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\r\n                   \r\n                \r\n            }\r\n        }\r\n\r\n\r\n/\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class ShoppingBasket {\r\n    \tprivate Map&lt;String,Purchases&gt; basket;\r\n    \t\r\n    \t\r\n    \tpublic ShoppingBasket() {\r\n    \t\tthis.basket = new HashMap&lt;String,Purchases&gt;();\r\n    \t}\r\n    \t\r\n    \tpublic void add(String product, int price) {\r\n    \t\tPurchases buy =  new Purchases(product, 1, price);\r\n    \t\tif(!basket.containsKey(product)) {\r\n    \t\t\t\r\n    \t\t\tbasket.put(product, buy);\r\n    \t\t} else {\r\n    \t\t\t\r\n    \t\t\tbuy.increaseAmount();\r\n    \t\t}\r\n    \t\t\r\n    \t\r\n    \t}\r\n    \tpublic int price() {\r\n    \t\tint price = 0;\r\n    \t\tfor(Purchases item : basket.values()) {\r\n    \t\t\tprice += item.price();\r\n    \t\t}\r\n    \t\treturn price;\r\n    \t}\r\n    \t\r\n    \tpublic void print() {\r\n    \t\tMap&lt;String, Integer&gt; test = new HashMap&lt;String,Integer&gt;();\r\n    \t\tfor(Purchases item : basket.values()) {\r\n    \t\t\t\ttest.put(item.product(), item.amount());\r\n    \t\t}\r\n    \t\tfor(String key : test.keySet()) {\r\n    \t\t\tInteger value = test.get(key);\r\n    \t\t\t\r\n    \t\t\tString complete = key + &quot;: &quot; + value;\r\n    \t\t\tSystem.out.println(complete);\r\n    \t\t\t\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \r\n    \t}\r\n\r\n/\r\n\r\n    public class Purchases {\r\n    \tprivate String product;\r\n    \tprivate int amount;\r\n    \tprivate int unitPrice;\r\n    \r\n    \tpublic Purchases(String product,int amount, int unitPrice) {\r\n    \t\tthis.product = product;\r\n    \t\tthis.amount = amount;\r\n    \t\tthis.unitPrice = unitPrice;\r\n    \t}\r\n    \t\r\n    \tpublic int price() {\r\n    \t\treturn this.amount * this.unitPrice;\r\n    \t}\r\n    \tpublic void increaseAmount() {\r\n    \t\tthis.amount+= 1;\r\n    \t}\r\n    \t\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;&quot; + this.amount;\r\n    \t}\r\n    \t\r\n    \tpublic int amount() {\r\n    \t\treturn this.amount;\r\n    \t}\r\n    \t\r\n    \tpublic String product() {\r\n    \t\treturn this.product;\r\n    \t}\r\n    }\r\n\r\n","title":"Increasing value of an object if it&#39;s already in a map","body":"<p>Every time when a product is added to shoppingBasket if its already in map basket it should increase it value amount by 1. But it doesn't for some reason. Is it because every time im adding a product to map i'm creating a new purchases?  I can't figure it out.</p>\n<pre><code>public void add(String product, int price) {\n        Purchases buy =  new Purchases(product, 1, price);\n        if(!basket.containsKey(product)) {\n            \n            basket.put(product, buy);\n        } else {\n            \n            buy.increaseAmount();\n        }\n</code></pre>\n<p>/</p>\n<pre><code>public void increaseAmount() {\n        this.amount+= 1;\n    }\n</code></pre>\n<p>/</p>\n<pre><code>public class Main {\n\n    \n    public static void main(String[] args) {\n        \n        \n           ShoppingBasket basket = new ShoppingBasket();\n           basket.add(&quot;milk&quot;, 3);\n           basket.print();\n           System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\n\n           basket.add(&quot;buttermilk&quot;, 2);\n           basket.print();\n           System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\n\n           basket.add(&quot;milk&quot;, 3);\n           basket.print();\n           System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\n\n           basket.add(&quot;milk&quot;, 3);\n           basket.print();\n           System.out.println(&quot;basket price: &quot; + basket.price() +&quot;\\n&quot;);\n               \n            \n        }\n    }\n</code></pre>\n<p>/</p>\n<pre><code>import java.util.HashMap;\nimport java.util.Map;\n\npublic class ShoppingBasket {\n    private Map&lt;String,Purchases&gt; basket;\n    \n    \n    public ShoppingBasket() {\n        this.basket = new HashMap&lt;String,Purchases&gt;();\n    }\n    \n    public void add(String product, int price) {\n        Purchases buy =  new Purchases(product, 1, price);\n        if(!basket.containsKey(product)) {\n            \n            basket.put(product, buy);\n        } else {\n            \n            buy.increaseAmount();\n        }\n        \n    \n    }\n    public int price() {\n        int price = 0;\n        for(Purchases item : basket.values()) {\n            price += item.price();\n        }\n        return price;\n    }\n    \n    public void print() {\n        Map&lt;String, Integer&gt; test = new HashMap&lt;String,Integer&gt;();\n        for(Purchases item : basket.values()) {\n                test.put(item.product(), item.amount());\n        }\n        for(String key : test.keySet()) {\n            Integer value = test.get(key);\n            \n            String complete = key + &quot;: &quot; + value;\n            System.out.println(complete);\n            \n        }\n    }\n    \n    \n\n    }\n</code></pre>\n<p>/</p>\n<pre><code>public class Purchases {\n    private String product;\n    private int amount;\n    private int unitPrice;\n\n    public Purchases(String product,int amount, int unitPrice) {\n        this.product = product;\n        this.amount = amount;\n        this.unitPrice = unitPrice;\n    }\n    \n    public int price() {\n        return this.amount * this.unitPrice;\n    }\n    public void increaseAmount() {\n        this.amount+= 1;\n    }\n    \n    public String toString() {\n        return &quot;&quot; + this.amount;\n    }\n    \n    public int amount() {\n        return this.amount;\n    }\n    \n    public String product() {\n        return this.product;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","mobile","android-permissions","android-bluetooth"],"comments":[{"owner":{"account_id":22616962,"reputation":3155,"user_id":16796366,"display_name":"Nitish"},"score":1,"creation_date":1640253763,"post_id":70460295,"comment_id":124552903,"body_markdown":"`@RequiresApi(api = Build.VERSION_CODES.S)` - - Denotes that the annotated element should only be called on the given API level or higher. Your `checkPermissions()` method will only be called in android S(12), I don&#39;t think it will be called below that version. Maybe that&#39;s the version for it&#39;s not working","body":"<code>@RequiresApi(api = Build.VERSION_CODES.S)</code> - - Denotes that the annotated element should only be called on the given API level or higher. Your <code>checkPermissions()</code> method will only be called in android S(12), I don&#39;t think it will be called below that version. Maybe that&#39;s the version for it&#39;s not working"}],"answers":[{"tags":[],"owner":{"account_id":16353624,"reputation":1333,"user_id":11811412,"display_name":"Nicholas Obert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640286290,"creation_date":1640286290,"answer_id":70466412,"question_id":70460295,"body_markdown":"The issue was a stupid error of mine. I was using permissions not available on my testing Android device.  \r\nI solved this by using `BLUETOOTH_ADMIN` permission instead of `BLUETOOTH_ADVERTISE` and `BLUETOOTH_CONNECT`.","title":"Android permission request always denied","body":"<p>The issue was a stupid error of mine. I was using permissions not available on my testing Android device.<br />\nI solved this by using <code>BLUETOOTH_ADMIN</code> permission instead of <code>BLUETOOTH_ADVERTISE</code> and <code>BLUETOOTH_CONNECT</code>.</p>\n"}],"owner":{"account_id":16353624,"reputation":1333,"user_id":11811412,"display_name":"Nicholas Obert"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2591,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70466412,"answer_count":1,"score":1,"last_activity_date":1640286290,"creation_date":1640252827,"question_id":70460295,"body_markdown":"I&#39;m building an Android application using Java in Android Studio that requires Bluetooth permissions to operate.  \r\nMy issue is, every time I ask for the needed permissions, I get my request automatically denied. Moreover, no permission dialog shows up after making the request.\r\n\r\nThe permissions I&#39;m requesting are `BLUETOOTH_ADVERTISE`, `BLUETOOTH_CONNECT`, `BLUETOOTH`.\r\nHere&#39;s the manifest file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.myapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\r\n\r\n    &lt;uses-feature\r\n        android:name=&quot;android.hardware.bluetooth_le&quot;\r\n        android:required=&quot;true&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyApp&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\nHere is the `build.gradle` file. I don&#39;t know whether it is important, but I include it just to be sure.\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n    }\r\n\r\n    android {\r\n        compileSdk 31\r\n\r\n        defaultConfig {\r\n            applicationId &quot;com.example.myapp&quot;\r\n            minSdk 23\r\n            targetSdk 31\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n\r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), \r\n                &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n\r\n        implementation &#39;androidx.appcompat:appcompat:1.4.0&#39;\r\n        implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.2&#39;\r\n        implementation &quot;androidx.fragment:fragment:1.4.0&quot;\r\n        implementation &quot;androidx.activity:activity:1.4.0&quot;\r\n        testImplementation &#39;junit:junit:&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    }\r\n\r\n\r\nAnd here is the code that checks and asks for permission:\r\n\r\n    /*\r\n        Returns true if all the permissions are already granted.\r\n        Returns false if there are missing permissions.\r\n     */\r\n    @RequiresApi(api = Build.VERSION_CODES.S)\r\n    private boolean checkPermissions() {\r\n        System.out.println(&quot;Checking permissions&quot;);\r\n\r\n        ArrayList&lt;String&gt; permissions = new ArrayList&lt;&gt;();\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_ADVERTISE)\r\n            == PackageManager.PERMISSION_DENIED) {\r\n            permissions.add(Manifest.permission.BLUETOOTH_ADVERTISE);\r\n        }\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH)\r\n            == PackageManager.PERMISSION_DENIED) {\r\n            permissions.add(Manifest.permission.BLUETOOTH);\r\n        }\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT)\r\n            == PackageManager.PERMISSION_DENIED) {\r\n            permissions.add(Manifest.permission.BLUETOOTH_CONNECT);\r\n        }\r\n\r\n        if (permissions.size() != 0) {\r\n            System.out.println(&quot;Missing the following permissions: &quot; + permissions.toString());\r\n            requestPermissionLauncher.launch(permissions.toArray(new String[0]));\r\n            //ActivityCompat.requestPermissions(MainActivity.this, permissions.toArray(new String[0]), 0);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\nThis is the request permission launcher that is supposed to ask for permission:\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.S)\r\n    private final ActivityResultLauncher&lt;String[]&gt; requestPermissionLauncher =\r\n        registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), results -&gt; {\r\n            // Ensure all permissions have been granted\r\n            boolean isGranted = true;\r\n            for (boolean entry : results.values()) {\r\n                if (!entry) {\r\n                    isGranted = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isGranted) {\r\n                Toast.makeText(getApplicationContext(), &quot;Permissions Granted&quot;, Toast.LENGTH_SHORT).show();\r\n                System.out.println(&quot;Permission granted&quot;);\r\n            } else {\r\n                Toast.makeText(getApplicationContext(), &quot;Permissions Denied&quot;, Toast.LENGTH_SHORT).show();\r\n                System.out.println(&quot;Permission denied&quot;);\r\n                Toast.makeText(this, &quot;You need to grant all permissions to use this application&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        });\r\n\r\nI&#39;ve been trying to find a solution for days, but without any success. I&#39;ve read about instant apps not having access to determinate permissions, but I don&#39;t think that&#39;s my case: I&#39;m not building an instant app.  \r\nCould this issue be related to my Android device and API versions? My device is a Samsung Galaxy A5 2017 running Android version 8.0.0 (Oreo).  \r\nThanks for your time.\r\n","title":"Android permission request always denied","body":"<p>I'm building an Android application using Java in Android Studio that requires Bluetooth permissions to operate.<br />\nMy issue is, every time I ask for the needed permissions, I get my request automatically denied. Moreover, no permission dialog shows up after making the request.</p>\n<p>The permissions I'm requesting are <code>BLUETOOTH_ADVERTISE</code>, <code>BLUETOOTH_CONNECT</code>, <code>BLUETOOTH</code>.\nHere's the manifest file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\npackage=&quot;com.example.myapp&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n\n&lt;uses-feature\n    android:name=&quot;android.hardware.bluetooth_le&quot;\n    android:required=&quot;true&quot; /&gt;\n\n&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.MyApp&quot;&gt;\n    &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>Here is the <code>build.gradle</code> file. I don't know whether it is important, but I include it just to be sure.</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdk 31\n\n    defaultConfig {\n        applicationId &quot;com.example.myapp&quot;\n        minSdk 23\n        targetSdk 31\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), \n            'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.2'\n    implementation &quot;androidx.fragment:fragment:1.4.0&quot;\n    implementation &quot;androidx.activity:activity:1.4.0&quot;\n    testImplementation 'junit:junit:'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n<p>And here is the code that checks and asks for permission:</p>\n<pre><code>/*\n    Returns true if all the permissions are already granted.\n    Returns false if there are missing permissions.\n */\n@RequiresApi(api = Build.VERSION_CODES.S)\nprivate boolean checkPermissions() {\n    System.out.println(&quot;Checking permissions&quot;);\n\n    ArrayList&lt;String&gt; permissions = new ArrayList&lt;&gt;();\n\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_ADVERTISE)\n        == PackageManager.PERMISSION_DENIED) {\n        permissions.add(Manifest.permission.BLUETOOTH_ADVERTISE);\n    }\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH)\n        == PackageManager.PERMISSION_DENIED) {\n        permissions.add(Manifest.permission.BLUETOOTH);\n    }\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.BLUETOOTH_CONNECT)\n        == PackageManager.PERMISSION_DENIED) {\n        permissions.add(Manifest.permission.BLUETOOTH_CONNECT);\n    }\n\n    if (permissions.size() != 0) {\n        System.out.println(&quot;Missing the following permissions: &quot; + permissions.toString());\n        requestPermissionLauncher.launch(permissions.toArray(new String[0]));\n        //ActivityCompat.requestPermissions(MainActivity.this, permissions.toArray(new String[0]), 0);\n        return false;\n    }\n    return true;\n}\n</code></pre>\n<p>This is the request permission launcher that is supposed to ask for permission:</p>\n<pre><code>@RequiresApi(api = Build.VERSION_CODES.S)\nprivate final ActivityResultLauncher&lt;String[]&gt; requestPermissionLauncher =\n    registerForActivityResult(new ActivityResultContracts.RequestMultiplePermissions(), results -&gt; {\n        // Ensure all permissions have been granted\n        boolean isGranted = true;\n        for (boolean entry : results.values()) {\n            if (!entry) {\n                isGranted = false;\n                break;\n            }\n        }\n\n        if (isGranted) {\n            Toast.makeText(getApplicationContext(), &quot;Permissions Granted&quot;, Toast.LENGTH_SHORT).show();\n            System.out.println(&quot;Permission granted&quot;);\n        } else {\n            Toast.makeText(getApplicationContext(), &quot;Permissions Denied&quot;, Toast.LENGTH_SHORT).show();\n            System.out.println(&quot;Permission denied&quot;);\n            Toast.makeText(this, &quot;You need to grant all permissions to use this application&quot;, Toast.LENGTH_LONG).show();\n        }\n    });\n</code></pre>\n<p>I've been trying to find a solution for days, but without any success. I've read about instant apps not having access to determinate permissions, but I don't think that's my case: I'm not building an instant app.<br />\nCould this issue be related to my Android device and API versions? My device is a Samsung Galaxy A5 2017 running Android version 8.0.0 (Oreo).<br />\nThanks for your time.</p>\n"},{"tags":["java","arrays","list","arraylist","java-8"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1640285060,"post_id":70466218,"comment_id":124563162,"body_markdown":"How should we do this without iterating over the list? It is not possible.","body":"How should we do this without iterating over the list? It is not possible."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1640285126,"post_id":70466218,"comment_id":124563177,"body_markdown":"`contains` on a `List` *must* iterate the list.","body":"<code>contains</code> on a <code>List</code> <i>must</i> iterate the list."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640285189,"post_id":70466218,"comment_id":124563193,"body_markdown":"...until QuantumList... which will do it in constant time!;)","body":"...until QuantumList... which will do it in constant time!;)"},{"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"score":0,"creation_date":1640285222,"post_id":70466218,"comment_id":124563201,"body_markdown":"Does this answer your question? [How do I determine whether an array contains a particular value in Java?](https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1128723/how-do-i-determine-whether-an-array-contains-a-particular-value-in-java\">How do I determine whether an array contains a particular value in Java?</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1640285308,"post_id":70466218,"comment_id":124563219,"body_markdown":"@croakPedlar nope, not an exact dupe.","body":"@croakPedlar nope, not an exact dupe."},{"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"score":0,"creation_date":1640285341,"post_id":70466218,"comment_id":124563230,"body_markdown":"@Turing85 is this better? https://stackoverflow.com/questions/15824733/option-to-ignore-case-with-contains-method","body":"@Turing85 is this better? <a href=\"https://stackoverflow.com/questions/15824733/option-to-ignore-case-with-contains-method\" title=\"option to ignore case with contains method\">stackoverflow.com/questions/15824733/&hellip;</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1640285470,"post_id":70466218,"comment_id":124563261,"body_markdown":"@croakPedlar wrt. behaviour: mostly yes (except for the ignore cases part). Problem is that the question - as OP asked - is not solvable. We have to iterate over the list one way or another to determine the desired result.","body":"@croakPedlar wrt. behaviour: mostly yes (except for the ignore cases part). Problem is that the question - as OP asked - is not solvable. We have to iterate over the list one way or another to determine the desired result."},{"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"score":0,"creation_date":1640285689,"post_id":70466218,"comment_id":124563323,"body_markdown":"@Turing85 I was making an assumption that by &quot;not wanting to iterate&quot; they mean not wanting to do a loop? Fair that I shouldn&#39;t be making assumptions. OP 2 things. 1. Do these links help you? 2. With your example, do you need to ignore case?","body":"@Turing85 I was making an assumption that by &quot;not wanting to iterate&quot; they mean not wanting to do a loop? Fair that I shouldn&#39;t be making assumptions. OP 2 things. 1. Do these links help you? 2. With your example, do you need to ignore case?"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640286283,"creation_date":1640286283,"answer_id":70466411,"question_id":70466218,"body_markdown":"&gt; _expected output for list.contains(&quot;sales&quot;); //true_\r\n\r\nThis is cannot be done with standard JDK implementation of `List`/`ArrayList`.\r\n\r\nSimilarly, the input list needs to be iterated one way or another to check if any of its String entries contains the given substring, whether each entry is checked separately (in a loop or a stream) or whether all the entries are joined in a bigger string (using `List::toString` or `String::join/ String::valueOf`, etc.)\r\n\r\nAssuming that the implicit iteration is not counted as &quot;iteration&quot;, one of the possible solutions would be just to check if the list string representation contains the string:\r\n```java\r\nlist.toString().toLowerCase().contains(&quot;sales&quot;) // -&gt; true\r\n```\r\nAnother solution is to use `String::matches` (however, the search string needs to be surrounded with `&quot;.*&quot;` when building the regex pattern):\r\n```java\r\nlist.toString().matches(&quot;(?i).*sales.*&quot;); // -&gt; true\r\n```","title":"Check if a list contains an substring from a list of strings without iterating the list","body":"<blockquote>\n<p><em>expected output for list.contains(&quot;sales&quot;); //true</em></p>\n</blockquote>\n<p>This is cannot be done with standard JDK implementation of <code>List</code>/<code>ArrayList</code>.</p>\n<p>Similarly, the input list needs to be iterated one way or another to check if any of its String entries contains the given substring, whether each entry is checked separately (in a loop or a stream) or whether all the entries are joined in a bigger string (using <code>List::toString</code> or <code>String::join/ String::valueOf</code>, etc.)</p>\n<p>Assuming that the implicit iteration is not counted as &quot;iteration&quot;, one of the possible solutions would be just to check if the list string representation contains the string:</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.toString().toLowerCase().contains(&quot;sales&quot;) // -&gt; true\n</code></pre>\n<p>Another solution is to use <code>String::matches</code> (however, the search string needs to be surrounded with <code>&quot;.*&quot;</code> when building the regex pattern):</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.toString().matches(&quot;(?i).*sales.*&quot;); // -&gt; true\n</code></pre>\n"}],"owner":{"account_id":14986305,"reputation":7,"user_id":10818772,"display_name":"Amol"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640286283,"creation_date":1640284939,"question_id":70466218,"body_markdown":"        List list = new ArrayList();\r\n        list.add(&quot;adminGroup&quot;);\r\n        list.add(&quot;customerGroup&quot;);\r\n        list.add(&quot;masterSalesGroup&quot;);\r\n        System.out.println(list); //[&quot;adminGroup&quot;,&quot;customerGroup&quot;,&quot;masterSalesGroup&quot;]\r\n        list.contains(&quot;sales&quot;); //false\r\n    \r\n    expected output for list.contains(&quot;sales&quot;); //true\r\n\r\nI want to check whether list contains &quot;sales&quot;.\r\nI need true if any list element contains &quot;sales&quot; word. \r\n","title":"Check if a list contains an substring from a list of strings without iterating the list","body":"<pre><code>    List list = new ArrayList();\n    list.add(&quot;adminGroup&quot;);\n    list.add(&quot;customerGroup&quot;);\n    list.add(&quot;masterSalesGroup&quot;);\n    System.out.println(list); //[&quot;adminGroup&quot;,&quot;customerGroup&quot;,&quot;masterSalesGroup&quot;]\n    list.contains(&quot;sales&quot;); //false\n\nexpected output for list.contains(&quot;sales&quot;); //true\n</code></pre>\n<p>I want to check whether list contains &quot;sales&quot;.\nI need true if any list element contains &quot;sales&quot; word.</p>\n"},{"tags":["java","android","ios","zooming"],"answers":[{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1405820920,"creation_date":1405820920,"answer_id":24846580,"question_id":24846459,"body_markdown":"If it helps, the midpoint between the two fingers is easy to calculate:\r\n\r\n    midX = (fingerA.getX() + fingerB.getX()) / 2;\r\n    midY = (fingerA.getY() + fingerB.getY()) / 2;\r\n\r\nSo, assuming I understand your question, I&#39;m thinking you want to center your scaling transform on that point.","title":"Math behind pinching on touch screen devices","body":"<p>If it helps, the midpoint between the two fingers is easy to calculate:</p>\n\n<pre><code>midX = (fingerA.getX() + fingerB.getX()) / 2;\nmidY = (fingerA.getY() + fingerB.getY()) / 2;\n</code></pre>\n\n<p>So, assuming I understand your question, I'm thinking you want to center your scaling transform on that point.</p>\n"},{"tags":[],"owner":{"account_id":8148643,"reputation":151,"user_id":6136489,"display_name":"Nicolas Mafra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640286107,"creation_date":1640286107,"answer_id":70466389,"question_id":24846459,"body_markdown":"A pinch has information for zoom, rotating and translating, but you just need information for translation. So, use dx and dy of current and last midpoint and increment camera position.","title":"Math behind pinching on touch screen devices","body":"<p>A pinch has information for zoom, rotating and translating, but you just need information for translation. So, use dx and dy of current and last midpoint and increment camera position.</p>\n"}],"owner":{"account_id":1978904,"reputation":1527,"user_id":1775989,"accept_rate":88,"display_name":"sgtHale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640286107,"creation_date":1405819072,"question_id":24846459,"body_markdown":"I can&#39;t find tutorials or help anywhere since I am not quiet sure how to word it but basically I am implemmenting my own pinch function on my Galaxy S4 for a game. The game finds the change in distance between 2 fingers and scales a 2d picture. However, I have trouble understanding the math behind it as to scale the picture *but keep the same position where it is being pinched*.\r\n\r\nAs of now the scale factor works starting at 1.0f for normal but I don&#39;t know by how much to move the position of the camera.\r\n\r\n    Finger fingerA = engine.getHand().getFinger( 0 );\r\n    Finger fingerB = engine.getHand().getFinger( 1 );\r\n    float dx1 = fingerA.getX()-fingerB.getX();\r\n    float dy1 = fingerA.getY()-fingerB.getY();\r\n    float currentFingerDistance = (float)Math.sqrt( dx1*dx1+dy1*dy1 );\r\n    \r\n    //Get a ratio change for zoom\r\n    float change = currentFingerDistance/lastFingerDistance;\r\n   \tzoom *= change;\r\n\r\n    //What do I do for the position?\r\n    //camX += \r\n    //camY +=\r\n    \r\nThe screen coordinates of the fingers are known and so are the dimensions of the screen.","title":"Math behind pinching on touch screen devices","body":"<p>I can't find tutorials or help anywhere since I am not quiet sure how to word it but basically I am implemmenting my own pinch function on my Galaxy S4 for a game. The game finds the change in distance between 2 fingers and scales a 2d picture. However, I have trouble understanding the math behind it as to scale the picture <em>but keep the same position where it is being pinched</em>.</p>\n\n<p>As of now the scale factor works starting at 1.0f for normal but I don't know by how much to move the position of the camera.</p>\n\n<pre><code>Finger fingerA = engine.getHand().getFinger( 0 );\nFinger fingerB = engine.getHand().getFinger( 1 );\nfloat dx1 = fingerA.getX()-fingerB.getX();\nfloat dy1 = fingerA.getY()-fingerB.getY();\nfloat currentFingerDistance = (float)Math.sqrt( dx1*dx1+dy1*dy1 );\n\n//Get a ratio change for zoom\nfloat change = currentFingerDistance/lastFingerDistance;\nzoom *= change;\n\n//What do I do for the position?\n//camX += \n//camY +=\n</code></pre>\n\n<p>The screen coordinates of the fingers are known and so are the dimensions of the screen.</p>\n"},{"tags":["java","arrays","audio","byte","java-audio"],"comments":[{"owner":{"account_id":7405785,"reputation":2672,"user_id":5634769,"display_name":"gpasch"},"score":0,"creation_date":1632888153,"post_id":69360921,"comment_id":122611147,"body_markdown":"I would do a bit of checking because this &quot;App&quot; that works so fine maybe is sending me a bunch of garbage - then I would check the formats the reeived and the desired - there is a thing in AudioSystem - are they as you say? I&#39;m not sure about that! - then I would proceed to manual labor!!","body":"I would do a bit of checking because this &quot;App&quot; that works so fine maybe is sending me a bunch of garbage - then I would check the formats the reeived and the desired - there is a thing in AudioSystem - are they as you say? I&#39;m not sure about that! - then I would proceed to manual labor!!"},{"owner":{"account_id":16899495,"reputation":191,"user_id":12221284,"display_name":"moeux"},"score":0,"creation_date":1632924666,"post_id":69360921,"comment_id":122625064,"body_markdown":"@gpasch Could you elaborate please? What &quot;thing&quot; in `AudioSystem`? To check the formats? What manual labor?","body":"@gpasch Could you elaborate please? What &quot;thing&quot; in <code>AudioSystem</code>? To check the formats? What manual labor?"}],"answers":[{"tags":[],"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1632933428,"creation_date":1632868669,"answer_id":69369155,"question_id":69360921,"body_markdown":"Signed PCM is certainly supported. The problem is that 48000 fps is not. I think the highest frame rate supported by Java directly is 44100.\r\n\r\nAs to what course of action to take, I&#39;m not sure what to recommend. Maybe there are libraries that can be employed? It is certainly possible to do the conversions manually with the byte data directly, where you enforce the expected data formats.\r\n\r\nI can write a bit more about the conversion process itself (assembling bytes into PCM, manipulating the PCM, creating bytes from PCM), if requested. Is the VOSK expecting 48000 fps also?\r\n\r\n****\r\n\r\nGoing from stereo to mono is a matter of literally taking the sum of the left and right PCM values. It is common to add a step to ensure the range is not exceeded. (16-bit range if PCM is coded as normalized floats = -1 to 1, range if PCM is coded as shorts = -32768 to 32767.) \r\n\r\nFollowing code fragment is an example of taking a single PCM value (signed float, normalized to range between -1 and 1) and generating two bytes (16-bits) in little endian order. The array *buffer* is of type `float` and holds the PCM values. The array *audioBytes* is of type `byte`. \r\n\r\n\tbuffer[i] *= 32767;\r\n\t\t\t\r\n\taudioBytes[i*2] = (byte) buffer[i];\r\n\taudioBytes[i*2 + 1] = (byte)((int)buffer[i] &gt;&gt; 8 );\r\n\r\nTo make it big endian, just swap the indexes of `audioBytes`, or the operations `(byte) buffer[i]` and `(byte)((int)buffer[i] &gt;&gt; 8 )`. This code is from the class [AudioCue][1], a class that I wrote that functions as an enhanced `Clip`. See lines 1391-1394.\r\n\r\nI think you can extrapolate the reverse process (converting incoming bytes to PCM). But here is an example of doing this, from the code lines 391-393. In this case *temp* is a `float` array that will hold the PCM values that are calculated from the byte stream. In my code, the value will soon be divided by 32767f to make it normalized. (line 400)\r\n\r\n\ttemp[clipIdx++] = ( buffer[bufferIdx++] &amp; 0xff ) | ( buffer[bufferIdx++] &lt;&lt; 8 ) ;\r\n\r\nFor big endian, you would reverse the order of `&amp; 0xff` and `&lt;&lt; 8`. \r\n\r\nHow you iterate through the structures is up to your personal preference. IDK that I&#39;ve picked the optimal methods here. For your situation, I&#39;d be tempted to hold the PCM value in a `short` (ranging from -32768 to 32767) instead of normalizing to -1 to 1 floats. Normalizing makes more sense if you are engaged in processing audio data from multiple sources. But the only processing you are going to do is add the left and right PCM together to get your mono value. It&#39;s good, by the way, after summing left and right, to ensure the numerical range isn&#39;t exceeded--as that can create some pretty harsh distortion.\r\n\r\n\r\n  [1]: https://github.com/philfrei/AudioCue/blob/master/src/main/java/com/adonax/audiocue/AudioCue.java","title":"How to turn a PCM byte array into little-endian and mono?","body":"<p>Signed PCM is certainly supported. The problem is that 48000 fps is not. I think the highest frame rate supported by Java directly is 44100.</p>\n<p>As to what course of action to take, I'm not sure what to recommend. Maybe there are libraries that can be employed? It is certainly possible to do the conversions manually with the byte data directly, where you enforce the expected data formats.</p>\n<p>I can write a bit more about the conversion process itself (assembling bytes into PCM, manipulating the PCM, creating bytes from PCM), if requested. Is the VOSK expecting 48000 fps also?</p>\n<hr />\n<p>Going from stereo to mono is a matter of literally taking the sum of the left and right PCM values. It is common to add a step to ensure the range is not exceeded. (16-bit range if PCM is coded as normalized floats = -1 to 1, range if PCM is coded as shorts = -32768 to 32767.)</p>\n<p>Following code fragment is an example of taking a single PCM value (signed float, normalized to range between -1 and 1) and generating two bytes (16-bits) in little endian order. The array <em>buffer</em> is of type <code>float</code> and holds the PCM values. The array <em>audioBytes</em> is of type <code>byte</code>.</p>\n<pre><code>buffer[i] *= 32767;\n        \naudioBytes[i*2] = (byte) buffer[i];\naudioBytes[i*2 + 1] = (byte)((int)buffer[i] &gt;&gt; 8 );\n</code></pre>\n<p>To make it big endian, just swap the indexes of <code>audioBytes</code>, or the operations <code>(byte) buffer[i]</code> and <code>(byte)((int)buffer[i] &gt;&gt; 8 )</code>. This code is from the class <a href=\"https://github.com/philfrei/AudioCue/blob/master/src/main/java/com/adonax/audiocue/AudioCue.java\" rel=\"nofollow noreferrer\">AudioCue</a>, a class that I wrote that functions as an enhanced <code>Clip</code>. See lines 1391-1394.</p>\n<p>I think you can extrapolate the reverse process (converting incoming bytes to PCM). But here is an example of doing this, from the code lines 391-393. In this case <em>temp</em> is a <code>float</code> array that will hold the PCM values that are calculated from the byte stream. In my code, the value will soon be divided by 32767f to make it normalized. (line 400)</p>\n<pre><code>temp[clipIdx++] = ( buffer[bufferIdx++] &amp; 0xff ) | ( buffer[bufferIdx++] &lt;&lt; 8 ) ;\n</code></pre>\n<p>For big endian, you would reverse the order of <code>&amp; 0xff</code> and <code>&lt;&lt; 8</code>.</p>\n<p>How you iterate through the structures is up to your personal preference. IDK that I've picked the optimal methods here. For your situation, I'd be tempted to hold the PCM value in a <code>short</code> (ranging from -32768 to 32767) instead of normalizing to -1 to 1 floats. Normalizing makes more sense if you are engaged in processing audio data from multiple sources. But the only processing you are going to do is add the left and right PCM together to get your mono value. It's good, by the way, after summing left and right, to ensure the numerical range isn't exceeded--as that can create some pretty harsh distortion.</p>\n"},{"tags":[],"owner":{"account_id":22153365,"reputation":36,"user_id":16401568,"display_name":"Aaron Walker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640285998,"creation_date":1640285998,"answer_id":70466369,"question_id":69360921,"body_markdown":"I had this same problem and found this [stackoverflow][1] post that converts the raw pcm byte array into an audio input stream.\r\n\r\nI assume you&#39;re using [Java Discord API (JDA)][2], so here&#39;s my initial code I have for the &#39;handleUserAudio()&#39; function that utilizes vosk, and the code in the link I provided above:\r\n\r\n                    // Define audio format that vosk uses\r\n                AudioFormat target = new AudioFormat(\r\n                        16000, 16, 1, true, false);\r\n    \r\n                try {\r\n                    byte[] data = userAudio.getAudioData(1.0f);\r\n                    // Create audio stream that uses the target format and the byte array input stream from discord\r\n                    AudioInputStream inputStream = AudioSystem.getAudioInputStream(target,\r\n                            new AudioInputStream(\r\n                                    new ByteArrayInputStream(data), AudioReceiveHandler.OUTPUT_FORMAT, data.length));\r\n    \r\n                    // This is what was used before\r\n    //                InputStream inputStream = new ByteArrayInputStream(data);\r\n    \r\n                    int nbytes;\r\n                    byte[] b = new byte[4096];\r\n                    while ((nbytes = inputStream.read(b)) &gt;= 0) {\r\n                        if (recognizer.acceptWaveForm(b, nbytes)) {\r\n                            System.out.println(recognizer.getResult());\r\n                        } else {\r\n                            System.out.println(recognizer.getPartialResult());\r\n                        }\r\n                    }\r\n    //                queue.add(data);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n\r\nThis works thus far, however, it throws everything into the &#39;.getPartialResult()&#39; method of the recognizer, but at least vosk is understanding the audio coming from the discord bot.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/47879925/converting-raw-pcm-data-to-riff-wav#:~:text=So%2C%20there%27s%20actual,works%20pretty%20well%3A\r\n  [2]: https://github.com/DV8FromTheWorld/JDA","title":"How to turn a PCM byte array into little-endian and mono?","body":"<p>I had this same problem and found this <a href=\"https://stackoverflow.com/questions/47879925/converting-raw-pcm-data-to-riff-wav#:%7E:text=So%2C%20there%27s%20actual,works%20pretty%20well%3A\">stackoverflow</a> post that converts the raw pcm byte array into an audio input stream.</p>\n<p>I assume you're using <a href=\"https://github.com/DV8FromTheWorld/JDA\" rel=\"nofollow noreferrer\">Java Discord API (JDA)</a>, so here's my initial code I have for the 'handleUserAudio()' function that utilizes vosk, and the code in the link I provided above:</p>\n<pre><code>                // Define audio format that vosk uses\n            AudioFormat target = new AudioFormat(\n                    16000, 16, 1, true, false);\n\n            try {\n                byte[] data = userAudio.getAudioData(1.0f);\n                // Create audio stream that uses the target format and the byte array input stream from discord\n                AudioInputStream inputStream = AudioSystem.getAudioInputStream(target,\n                        new AudioInputStream(\n                                new ByteArrayInputStream(data), AudioReceiveHandler.OUTPUT_FORMAT, data.length));\n\n                // This is what was used before\n//                InputStream inputStream = new ByteArrayInputStream(data);\n\n                int nbytes;\n                byte[] b = new byte[4096];\n                while ((nbytes = inputStream.read(b)) &gt;= 0) {\n                    if (recognizer.acceptWaveForm(b, nbytes)) {\n                        System.out.println(recognizer.getResult());\n                    } else {\n                        System.out.println(recognizer.getPartialResult());\n                    }\n                }\n//                queue.add(data);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n</code></pre>\n<p>This works thus far, however, it throws everything into the '.getPartialResult()' method of the recognizer, but at least vosk is understanding the audio coming from the discord bot.</p>\n"}],"owner":{"account_id":16899495,"reputation":191,"user_id":12221284,"display_name":"moeux"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70466369,"answer_count":2,"score":2,"last_activity_date":1640285998,"creation_date":1632828616,"question_id":69360921,"body_markdown":"I&#39;m trying to feed audio from an online communication app into the Vosk speech recognition API.\r\n\r\nThe audio comes in form of a byte array and with this audio format `PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian`.\r\nIn order to be able to process it with Vosk, it needs to be `mono` and `little-endian`.\r\n\r\nThis is my current attempt:\r\n```java\r\n        byte[] audioData = userAudio.getAudioData(1);\r\n        short[] convertedAudio = new short[audioData.length / 2];\r\n        ByteBuffer buffer = ByteBuffer.allocate(convertedAudio.length * Short.BYTES);\r\n        \r\n        // Convert to mono, I don&#39;t think I did it right though\r\n        int j = 0;\r\n        for (int i = 0; i &lt; audioData.length; i += 2)\r\n            convertedAudio[j++] = (short) (audioData[i] &lt;&lt; 8 | audioData[i + 1] &amp; 0xFF);\r\n\r\n        // Convert to little endian\r\n        buffer.order(ByteOrder.BIG_ENDIAN);\r\n        for (short s : convertedAudio)\r\n            buffer.putShort(s);\r\n        buffer.order(ByteOrder.LITTLE_ENDIAN);\r\n        buffer.rewind();\r\n\r\n        for (int i = 0; i &lt; convertedAudio.length; i++)\r\n            convertedAudio[i] = buffer.getShort();\r\n\r\n        queue.add(convertedAudio);\r\n```","title":"How to turn a PCM byte array into little-endian and mono?","body":"<p>I'm trying to feed audio from an online communication app into the Vosk speech recognition API.</p>\n<p>The audio comes in form of a byte array and with this audio format <code>PCM_SIGNED 48000.0 Hz, 16 bit, stereo, 4 bytes/frame, big-endian</code>.\nIn order to be able to process it with Vosk, it needs to be <code>mono</code> and <code>little-endian</code>.</p>\n<p>This is my current attempt:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        byte[] audioData = userAudio.getAudioData(1);\n        short[] convertedAudio = new short[audioData.length / 2];\n        ByteBuffer buffer = ByteBuffer.allocate(convertedAudio.length * Short.BYTES);\n        \n        // Convert to mono, I don't think I did it right though\n        int j = 0;\n        for (int i = 0; i &lt; audioData.length; i += 2)\n            convertedAudio[j++] = (short) (audioData[i] &lt;&lt; 8 | audioData[i + 1] &amp; 0xFF);\n\n        // Convert to little endian\n        buffer.order(ByteOrder.BIG_ENDIAN);\n        for (short s : convertedAudio)\n            buffer.putShort(s);\n        buffer.order(ByteOrder.LITTLE_ENDIAN);\n        buffer.rewind();\n\n        for (int i = 0; i &lt; convertedAudio.length; i++)\n            convertedAudio[i] = buffer.getShort();\n\n        queue.add(convertedAudio);\n</code></pre>\n"},{"tags":["java","android","android-studio","android-viewbinding"],"comments":[{"owner":{"account_id":4168148,"reputation":1387,"user_id":3416642,"display_name":"Sachin"},"score":0,"creation_date":1627626234,"post_id":68586270,"comment_id":121210716,"body_markdown":"Maybe you need to update the Gradle plugin. Faced such kinds of issues due to Gradle plugin on lower AS","body":"Maybe you need to update the Gradle plugin. Faced such kinds of issues due to Gradle plugin on lower AS"},{"owner":{"account_id":4283273,"reputation":12073,"user_id":3501958,"accept_rate":89,"display_name":"hata"},"score":0,"creation_date":1627626832,"post_id":68586270,"comment_id":121210884,"body_markdown":"@Sachin I think Gradle plugin is recent: `classpath &quot;com.android.tools.build:gradle:7.0.0&quot;`","body":"@Sachin I think Gradle plugin is recent: <code>classpath &quot;com.android.tools.build:gradle:7.0.0&quot;</code>"},{"owner":{"account_id":1570860,"reputation":384,"user_id":1458576,"accept_rate":50,"display_name":"ieselisra"},"score":0,"creation_date":1633854306,"post_id":68586270,"comment_id":122867304,"body_markdown":"Still happening today -.-\n\nThe project can be built and launched on a physical device but it show the annoying red message.","body":"Still happening today -.-  The project can be built and launched on a physical device but it show the annoying red message."},{"owner":{"account_id":4283273,"reputation":12073,"user_id":3501958,"accept_rate":89,"display_name":"hata"},"score":0,"creation_date":1639070933,"post_id":68586270,"comment_id":124260763,"body_markdown":"This bug is not fixed yet with Patch 4 (Gradle 7.0.4).","body":"This bug is not fixed yet with Patch 4 (Gradle 7.0.4)."}],"answers":[{"tags":[],"owner":{"account_id":19593832,"reputation":1,"user_id":14340300,"display_name":"Muhammad Mubashar Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627647037,"creation_date":1627630589,"answer_id":68587128,"question_id":68586270,"body_markdown":"remove the import line from your project and import it again by pressing Alt+Enter then inform  me\r\n\r\n\r\n    import com.myapplication.databinding.ActivityMainBinding;\r\n    \r\n    public class MainActivity extends AppCompatActivity {   \r\n    \r\n    ActivityMainBinding binding;\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n    \r\n            binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n            View view = binding.getRoot();\r\n            setContentView(view);\r\n    \r\n    }\r\n    \r\n    }","title":"ViewBinding with Java11, AndroidStudio always shows error (but runs without any problem)","body":"<p>remove the import line from your project and import it again by pressing Alt+Enter then inform  me</p>\n<pre><code>import com.myapplication.databinding.ActivityMainBinding;\n\npublic class MainActivity extends AppCompatActivity {   \n\nActivityMainBinding binding;\nprotected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        View view = binding.getRoot();\n        setContentView(view);\n\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5966678,"reputation":3016,"user_id":4690298,"display_name":"Amjad Alwareh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627738409,"creation_date":1627738409,"answer_id":68602617,"question_id":68586270,"body_markdown":"I had this issue, and I did the following:\r\n\r\n - Run the gradle updater\r\n&lt;br&gt;&lt;strong&gt;OR&lt;/strong&gt;&lt;br&gt;\r\n - open the terminal and run `gradlew help --scan`, it will generate a report that tells will what you should edit before migrate to `Gradle 7.0`\r\n - open your `gradle.properties` and `distributionUrl` to `https\\://services.gradle.org/distributions/gradle-7.0.2-bin.zip`\r\n - Go to your `Project build.gradle` and set the classpath to `com.android.tools.build:gradle:7.0.0`.\r\n - Sync with Gradle FIles and rebuild your project.","title":"ViewBinding with Java11, AndroidStudio always shows error (but runs without any problem)","body":"<p>I had this issue, and I did the following:</p>\n<ul>\n<li>Run the gradle updater\n<br><strong>OR</strong><br></li>\n<li>open the terminal and run <code>gradlew help --scan</code>, it will generate a report that tells will what you should edit before migrate to <code>Gradle 7.0</code></li>\n<li>open your <code>gradle.properties</code> and <code>distributionUrl</code> to <code>https\\://services.gradle.org/distributions/gradle-7.0.2-bin.zip</code></li>\n<li>Go to your <code>Project build.gradle</code> and set the classpath to <code>com.android.tools.build:gradle:7.0.0</code>.</li>\n<li>Sync with Gradle FIles and rebuild your project.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2522056,"reputation":176,"user_id":2192228,"display_name":"Teralser"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1628677161,"creation_date":1628677161,"answer_id":68740130,"question_id":68586270,"body_markdown":"As google&#39;s support answered: This issue has been fixed and landed in BB canary 8. It is specific to Java 11.","title":"ViewBinding with Java11, AndroidStudio always shows error (but runs without any problem)","body":"<p>As google's support answered: This issue has been fixed and landed in BB canary 8. It is specific to Java 11.</p>\n"}],"owner":{"account_id":4283273,"reputation":12073,"user_id":3501958,"accept_rate":89,"display_name":"hata"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2661,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":68740130,"answer_count":3,"score":7,"last_activity_date":1640285574,"creation_date":1627625901,"question_id":68586270,"body_markdown":"I notice that with Java8 there is no problem with viewBinding in AndroidStudio (Arctic Fox).\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    buildFeatures {\r\n        viewBinding true\r\n    }\r\n\r\nHowever, once I set `compileOptions` to `JavaVersion.VERSION_11`, AndroidStudio always falsely shows viewBiding(s) errors though it can compile and run with no problem.\r\n\r\nI tested this with a fresh new project in AndroidStudio ArcticFox. It suggests to import the class. After imported, it says *Package not found*:\r\n\r\n[![screenshot 1][1]][1]\r\n\r\n[![screenshot 2][2]][2]\r\n\r\nIs this AndroidStudio&#39;s bug, or are there any misconfiguration about Java compiler setting in my AndroidStudio?\r\n\r\nAll I did something particular was `JavaVersion.VERSION_11`.\r\n\r\n  [1]: https://i.stack.imgur.com/76arF.png\r\n  [2]: https://i.stack.imgur.com/K7X0h.png","title":"ViewBinding with Java11, AndroidStudio always shows error (but runs without any problem)","body":"<p>I notice that with Java8 there is no problem with viewBinding in AndroidStudio (Arctic Fox).</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\nbuildFeatures {\n    viewBinding true\n}\n</code></pre>\n<p>However, once I set <code>compileOptions</code> to <code>JavaVersion.VERSION_11</code>, AndroidStudio always falsely shows viewBiding(s) errors though it can compile and run with no problem.</p>\n<p>I tested this with a fresh new project in AndroidStudio ArcticFox. It suggests to import the class. After imported, it says <em>Package not found</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/76arF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/76arF.png\" alt=\"screenshot 1\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/K7X0h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K7X0h.png\" alt=\"screenshot 2\" /></a></p>\n<p>Is this AndroidStudio's bug, or are there any misconfiguration about Java compiler setting in my AndroidStudio?</p>\n<p>All I did something particular was <code>JavaVersion.VERSION_11</code>.</p>\n"},{"tags":["java","netbeans","netbeans-platform"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640285859,"post_id":70466255,"comment_id":124563370,"body_markdown":"https://stackoverflow.com/questions/69309296/the-specified-jdk-version-is-2724-0-0-0-0-while-the-maximum-is-500-0-0-0-0#comment123818752_69309564","body":"<a href=\"https://stackoverflow.com/questions/69309296/the-specified-jdk-version-is-2724-0-0-0-0-while-the-maximum-is-500-0-0-0-0#comment123818752_69309564\" title=\"the specified jdk version is 2724 0 0 0 0 while the maximum is 500 0 0 0 0%23comment123818752_69309564\">stackoverflow.com/questions/69309296/&hellip;</a>"},{"owner":{"account_id":18703359,"reputation":11,"user_id":17750594,"display_name":"The Dovahkiin"},"score":1,"creation_date":1640286996,"post_id":70466255,"comment_id":124563675,"body_markdown":"@xerx593 yes it did thank you very much","body":"@xerx593 yes it did thank you very much"}],"owner":{"account_id":18703359,"reputation":11,"user_id":17750594,"display_name":"The Dovahkiin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1640287212,"answer_count":0,"score":1,"last_activity_date":1640285522,"creation_date":1640285190,"question_id":70466255,"body_markdown":"I have been facing this problem for a while and it started getting frustrating, as you see in the picture ![enter image description here][1] it says &quot;the specific jdk folder contains  version 2727.0.0.0.0&quot; while maximum is &quot;500.0.0.0.0&quot; and I don&#39;t get it I installed the latest NetBeans IDE and the latest jdk which is jdk.17 and I get this problem, can anyone help?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tsqq8.png","title":"Can&#39;t install Netbeans 12.6 with jdk.17","body":"<p>I have been facing this problem for a while and it started getting frustrating, as you see in the picture <img src=\"https://i.stack.imgur.com/Tsqq8.png\" alt=\"enter image description here\" /> it says &quot;the specific jdk folder contains  version 2727.0.0.0.0&quot; while maximum is &quot;500.0.0.0.0&quot; and I don't get it I installed the latest NetBeans IDE and the latest jdk which is jdk.17 and I get this problem, can anyone help?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":5,"creation_date":1640285566,"post_id":70466292,"comment_id":124563292,"body_markdown":"`||` is a shortcircuit logical-or. We need an shortcircuit logical-and `&amp;&amp;` in this case. As an aside: a statement cannot return anything.","body":"<code>||</code> is a shortcircuit logical-or. We need an shortcircuit logical-and <code>&amp;&amp;</code> in this case. As an aside: a statement cannot return anything."},{"owner":{"account_id":14257717,"reputation":15,"user_id":10299475,"display_name":"Selim &#214;zbay"},"score":0,"creation_date":1640285705,"post_id":70466292,"comment_id":124563327,"body_markdown":"Ahh. great. Thanks.","body":"Ahh. great. Thanks."}],"owner":{"account_id":14257717,"reputation":15,"user_id":10299475,"display_name":"Selim &#214;zbay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640286031,"answer_count":0,"score":0,"last_activity_date":1640285503,"creation_date":1640285503,"question_id":70466292,"body_markdown":"Firts codes works well..\r\nBut second codes gives error as:\r\n**java.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean java.lang.String.equals(java.lang.Object)&#39; on a null object reference**\r\n\r\n*Working Code:*\r\n\r\n    String dnt = model.getDonut;\r\n         if (dnt != null) {\r\n                if (!dnt.equals(&quot;&quot;)) {\r\n          //Do sth\r\n                    }\r\n                }\r\n\r\n\r\n*Not Working Code:*\r\n\r\n    String dnt = model.getDonut;\r\n         if (dnt != null || !dnt.equals(&quot;&quot;)) {\r\n          //Do sth\r\n                }","title":"If Stament returns null","body":"<p>Firts codes works well..\nBut second codes gives error as:\n<strong>java.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.equals(java.lang.Object)' on a null object reference</strong></p>\n<p><em>Working Code:</em></p>\n<pre><code>String dnt = model.getDonut;\n     if (dnt != null) {\n            if (!dnt.equals(&quot;&quot;)) {\n      //Do sth\n                }\n            }\n</code></pre>\n<p><em>Not Working Code:</em></p>\n<pre><code>String dnt = model.getDonut;\n     if (dnt != null || !dnt.equals(&quot;&quot;)) {\n      //Do sth\n            }\n</code></pre>\n"},{"tags":["java","android","inputstream"],"comments":[{"owner":{"account_id":51914,"reputation":67901,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"score":0,"creation_date":1305716746,"post_id":6043634,"comment_id":6991465,"body_markdown":"What kind of filter do you need? What do you have so far? What are the TODO&#39;s?","body":"What kind of filter do you need? What do you have so far? What are the TODO&#39;s?"}],"answers":[{"tags":[],"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598839230,"creation_date":1305717091,"answer_id":6043742,"question_id":6043634,"body_markdown":"Not quite a ready rolled one, but [this][1] might be of interest. There is a `TeeOutputStream` implementation in the examples.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20120712104011/http://java.sun.com/developer/technicalArticles/Streams/WritingIOSC/index.html","title":"Is there a simple “tee” filter for Java input streams?","body":"<p>Not quite a ready rolled one, but <a href=\"https://web.archive.org/web/20120712104011/http://java.sun.com/developer/technicalArticles/Streams/WritingIOSC/index.html\" rel=\"nofollow noreferrer\">this</a> might be of interest. There is a <code>TeeOutputStream</code> implementation in the examples.</p>\n"},{"tags":[],"owner":{"account_id":242330,"reputation":10725,"user_id":513769,"accept_rate":75,"display_name":"stevevls"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1412263351,"creation_date":1305717091,"answer_id":6043744,"question_id":6043634,"body_markdown":"[Commons IO][1] to the rescue!  Check out [TeeInputStream][2] and [TeeOutputStream][3].\r\n\r\n\r\n  [1]: http://commons.apache.org/io/\r\n  [2]: http://commons.apache.org/io/javadocs/api-1.4/org/apache/commons/io/input/TeeInputStream.html\r\n  [3]: http://commons.apache.org/io/javadocs/api-1.4/org/apache/commons/io/output/TeeOutputStream.html","title":"Is there a simple “tee” filter for Java input streams?","body":"<p><a href=\"http://commons.apache.org/io/\" rel=\"nofollow noreferrer\">Commons IO</a> to the rescue!  Check out <a href=\"http://commons.apache.org/io/javadocs/api-1.4/org/apache/commons/io/input/TeeInputStream.html\" rel=\"nofollow noreferrer\">TeeInputStream</a> and <a href=\"http://commons.apache.org/io/javadocs/api-1.4/org/apache/commons/io/output/TeeOutputStream.html\" rel=\"nofollow noreferrer\">TeeOutputStream</a>.</p>\n"},{"tags":[],"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1305724102,"creation_date":1305724102,"answer_id":6045189,"question_id":6043634,"body_markdown":"Thanks for all the pointer. Here a copy of the class I created to solve my problem:\r\n\r\n    /**\r\n     * &lt;p&gt;\r\n     * Tee-Filters a Reader into an Writer.\r\n     * &lt;/p&gt;\r\n     * \r\n     * @author &quot;Martin Krischik&quot; &lt;martin.krischik@noser.com&gt;\r\n     * @version 1.0 $Revision: 1046 $\r\n     * @since 1.0\r\n     */\r\n    public class TeeReader\r\n       extends\r\n          java.io.Reader\r\n    {\r\n       /**\r\n        * &lt;p&gt;\r\n        * Reader to read from\r\n        * &lt;/p&gt;\r\n        */\r\n       private final java.io.Reader in;\r\n       /**\r\n        * &lt;p&gt;\r\n        * Tee output to which read date is written before beeing passed on.\r\n        * &lt;/p&gt;\r\n        */\r\n       private final java.io.Writer tee;\r\n    \r\n       /**\r\n        * &lt;p&gt;\r\n        * create new filter.\r\n        * &lt;/p&gt;\r\n        * \r\n        * @param in\r\n        *           Reader to read from\r\n        * @param tee\r\n        *           Tee output to which read date is written before beeing passed\r\n        *           on.\r\n        */\r\n       public TeeReader (final java.io.Reader in, final java.io.Writer tee)\r\n       {\r\n          this.in = in;\r\n          this.tee = tee;\r\n       } // TeeReader\r\n    \r\n       /**\r\n        * &lt;p&gt;\r\n        * Close the stream. Once a stream has been closed, further read(), ready(),\r\n        * mark(), or reset() invocations will throw an IOException. Closing a\r\n        * previously-closed stream, however, has no effect.\r\n        * &lt;/p&gt;\r\n        * \r\n        * @throws java.io.IOException\r\n        * @see java.io.Reader#close()\r\n        */\r\n       @Override\r\n       public void close ()\r\n          throws java.io.IOException\r\n       {\r\n          this.in.close ();\r\n       } // close\r\n    \r\n       /**\r\n        * &lt;p&gt;\r\n        * Reads characters into a portion of an array. This method will block until\r\n        * some input is available, an I/O error occurs, or the end of the stream is\r\n        * reached.\r\n        * &lt;/p&gt;\r\n        * \r\n        * @param cbuf\r\n        *           Destination buffer\r\n        * @param off\r\n        *           Offset at which to start storing characters\r\n        * @param len\r\n        *           Maximum number of characters to read\r\n        * @return The number of characters read, or -1 if the end of the stream has\r\n        *         been reached Throws:\r\n        * @throws java.io.IOException\r\n        * @see java.io.Reader#read(char[], int, int)\r\n        */\r\n       @Override\r\n       public int read (final char [] cbuf, final int off, final int len)\r\n          throws java.io.IOException\r\n       {\r\n          final int retval = this.in.read (cbuf, off, len);\r\n    \r\n          if (retval &gt;= 0)\r\n          {\r\n             this.tee.write (cbuf, off, len);\r\n          }\r\n          else\r\n          {\r\n             this.tee.close ();\r\n          } // if\r\n    \r\n          return retval;\r\n       } // read\r\n    } // TeeReader\r\n\r\n\r\n","title":"Is there a simple “tee” filter for Java input streams?","body":"<p>Thanks for all the pointer. Here a copy of the class I created to solve my problem:</p>\n\n<pre><code>/**\n * &lt;p&gt;\n * Tee-Filters a Reader into an Writer.\n * &lt;/p&gt;\n * \n * @author \"Martin Krischik\" &lt;martin.krischik@noser.com&gt;\n * @version 1.0 $Revision: 1046 $\n * @since 1.0\n */\npublic class TeeReader\n   extends\n      java.io.Reader\n{\n   /**\n    * &lt;p&gt;\n    * Reader to read from\n    * &lt;/p&gt;\n    */\n   private final java.io.Reader in;\n   /**\n    * &lt;p&gt;\n    * Tee output to which read date is written before beeing passed on.\n    * &lt;/p&gt;\n    */\n   private final java.io.Writer tee;\n\n   /**\n    * &lt;p&gt;\n    * create new filter.\n    * &lt;/p&gt;\n    * \n    * @param in\n    *           Reader to read from\n    * @param tee\n    *           Tee output to which read date is written before beeing passed\n    *           on.\n    */\n   public TeeReader (final java.io.Reader in, final java.io.Writer tee)\n   {\n      this.in = in;\n      this.tee = tee;\n   } // TeeReader\n\n   /**\n    * &lt;p&gt;\n    * Close the stream. Once a stream has been closed, further read(), ready(),\n    * mark(), or reset() invocations will throw an IOException. Closing a\n    * previously-closed stream, however, has no effect.\n    * &lt;/p&gt;\n    * \n    * @throws java.io.IOException\n    * @see java.io.Reader#close()\n    */\n   @Override\n   public void close ()\n      throws java.io.IOException\n   {\n      this.in.close ();\n   } // close\n\n   /**\n    * &lt;p&gt;\n    * Reads characters into a portion of an array. This method will block until\n    * some input is available, an I/O error occurs, or the end of the stream is\n    * reached.\n    * &lt;/p&gt;\n    * \n    * @param cbuf\n    *           Destination buffer\n    * @param off\n    *           Offset at which to start storing characters\n    * @param len\n    *           Maximum number of characters to read\n    * @return The number of characters read, or -1 if the end of the stream has\n    *         been reached Throws:\n    * @throws java.io.IOException\n    * @see java.io.Reader#read(char[], int, int)\n    */\n   @Override\n   public int read (final char [] cbuf, final int off, final int len)\n      throws java.io.IOException\n   {\n      final int retval = this.in.read (cbuf, off, len);\n\n      if (retval &gt;= 0)\n      {\n         this.tee.write (cbuf, off, len);\n      }\n      else\n      {\n         this.tee.close ();\n      } // if\n\n      return retval;\n   } // read\n} // TeeReader\n</code></pre>\n"},{"tags":[],"owner":{"account_id":199137,"reputation":3373,"user_id":444234,"accept_rate":75,"display_name":"android.weasel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352994182,"creation_date":1352994182,"answer_id":13401010,"question_id":6043634,"body_markdown":"Here&#39;s a trivial output stream version (without exception handling):\r\n\r\n       public class TeeOutputStream extends OutputStream\r\n       {\r\n               private OutputStream[] streams;\r\n\r\n               public TeeOutputStream(final OutputStream ... streams)\r\n               {\r\n                       this.streams = streams;\r\n               }\r\n\r\n               @Override\r\n               public void close() throws IOException\r\n               {\r\n                       for (OutputStream stream : streams)\r\n                       {\r\n                               stream.close();\r\n                       }\r\n               }\r\n\r\n               @Override\r\n               public void flush() throws IOException\r\n               {\r\n                       for (OutputStream stream : streams)\r\n                       {\r\n                               stream.flush();\r\n                       }\r\n\r\n               }\r\n\r\n               @Override\r\n               public void write(final byte[] buffer) throws IOException\r\n               {\r\n                       for (OutputStream stream : streams)\r\n                       {\r\n                               stream.write(buffer);\r\n                       }\r\n\r\n               }\r\n\r\n               @Override\r\n               public void write(final byte[] buffer, final int offset, final int count) throws IOException\r\n               {\r\n                       for (OutputStream stream : streams)\r\n                       {\r\n                               stream.write(buffer, offset, count);\r\n                       }\r\n\r\n               }\r\n\r\n               @Override\r\n               public void write(final int i) throws IOException\r\n               {\r\n                       for (OutputStream stream : streams)\r\n                       {\r\n                               stream.write(i);\r\n                       }\r\n               }\r\n       }\r\n","title":"Is there a simple “tee” filter for Java input streams?","body":"<p>Here's a trivial output stream version (without exception handling):</p>\n\n<pre><code>   public class TeeOutputStream extends OutputStream\n   {\n           private OutputStream[] streams;\n\n           public TeeOutputStream(final OutputStream ... streams)\n           {\n                   this.streams = streams;\n           }\n\n           @Override\n           public void close() throws IOException\n           {\n                   for (OutputStream stream : streams)\n                   {\n                           stream.close();\n                   }\n           }\n\n           @Override\n           public void flush() throws IOException\n           {\n                   for (OutputStream stream : streams)\n                   {\n                           stream.flush();\n                   }\n\n           }\n\n           @Override\n           public void write(final byte[] buffer) throws IOException\n           {\n                   for (OutputStream stream : streams)\n                   {\n                           stream.write(buffer);\n                   }\n\n           }\n\n           @Override\n           public void write(final byte[] buffer, final int offset, final int count) throws IOException\n           {\n                   for (OutputStream stream : streams)\n                   {\n                           stream.write(buffer, offset, count);\n                   }\n\n           }\n\n           @Override\n           public void write(final int i) throws IOException\n           {\n                   for (OutputStream stream : streams)\n                   {\n                           stream.write(i);\n                   }\n           }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2306835,"reputation":1104,"user_id":2025948,"display_name":"Charles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364000635,"creation_date":1364000635,"answer_id":15582190,"question_id":6043634,"body_markdown":"I had the same problem. I wanted to be able to see what the Xml parser is getting so I could debug the server-side scripts. Ideally, you want to send the Xml to both the Xml parser and LogCat. You can use the enclosed clss InputStreamIntercept to do that. Just run the input stream through it:\r\n\r\n\r\n    final java.io.InputStream content = \r\n              new InputStreamIntercept(responseEntity.getContent());\r\n\r\nHere is the class:\r\n\r\n    import java.io.FilterInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    \r\n    import android.util.Log;\r\n    \r\n    /**\r\n     * This custom stream filter can intercept data being\r\n     * sent to another stream and send it to LogCat. It is \r\n     * useful as a way to tell what is being sent to an\r\n     * Xml parser.\r\n     */\r\n    public class InputStreamIntercept extends FilterInputStream {\r\n        \r\n        /**\r\n         * The string we build from data we input.\r\n         */\r\n        private StringBuilder sb = new StringBuilder();\r\n    \r\n        /**\r\n         * Constructor.\r\n         * @param in the stream we are intercepting\r\n         */\r\n        public InputStreamIntercept(InputStream in) {\r\n            super(in);\r\n        }\r\n    \r\n        /**\r\n         * Intercept read() and store the character for output\r\n         * @returns -1 if nothing read or the character read\r\n         */\r\n        @Override\r\n        public int read() throws IOException {\r\n            int ret = super.read();\r\n            if(ret &gt;= 0) {\r\n                newChar((byte)ret);\r\n            }\r\n            return ret;\r\n        }\r\n    \r\n        /**\r\n         * Intercept read and output the content to Log.i.\r\n         */\r\n        @Override\r\n        public int read(byte[] buffer, int offset, int count) throws IOException {\r\n            int ret = super.read(buffer, offset, count);\r\n            for(int i=0;  i&lt;ret;  i++) {\r\n                newChar(buffer[i]);\r\n            }\r\n            return ret;\r\n        }\r\n        \r\n        \r\n        /**\r\n         * Handle a new character. We output whenever we get a newline\r\n         * @param ch\r\n         */\r\n        private void newChar(byte ch) {\r\n            if(ch == 10) {\r\n                String str = sb.toString();\r\n                if(str.equals(&quot;&quot;)) {\r\n                    Log.i(&quot;debug&quot;, &quot;--blank line--&quot;);\r\n                } else {\r\n                    Log.i(&quot;debug&quot;, str);\r\n                }\r\n                \r\n                sb = new StringBuilder();\r\n            } else if(ch == 13) {\r\n                // Skip this character\r\n            } else {\r\n                sb.append((char)ch);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Close the stream\r\n         */\r\n        @Override\r\n        public void close() throws IOException {\r\n            super.close();\r\n            if(sb.length() &gt; 0) {\r\n                Log.i(&quot;debug&quot;, sb.toString());\r\n            }\r\n        }\r\n    \r\n    }","title":"Is there a simple “tee” filter for Java input streams?","body":"<p>I had the same problem. I wanted to be able to see what the Xml parser is getting so I could debug the server-side scripts. Ideally, you want to send the Xml to both the Xml parser and LogCat. You can use the enclosed clss InputStreamIntercept to do that. Just run the input stream through it:</p>\n\n<pre><code>final java.io.InputStream content = \n          new InputStreamIntercept(responseEntity.getContent());\n</code></pre>\n\n<p>Here is the class:</p>\n\n<pre><code>import java.io.FilterInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\n\nimport android.util.Log;\n\n/**\n * This custom stream filter can intercept data being\n * sent to another stream and send it to LogCat. It is \n * useful as a way to tell what is being sent to an\n * Xml parser.\n */\npublic class InputStreamIntercept extends FilterInputStream {\n\n    /**\n     * The string we build from data we input.\n     */\n    private StringBuilder sb = new StringBuilder();\n\n    /**\n     * Constructor.\n     * @param in the stream we are intercepting\n     */\n    public InputStreamIntercept(InputStream in) {\n        super(in);\n    }\n\n    /**\n     * Intercept read() and store the character for output\n     * @returns -1 if nothing read or the character read\n     */\n    @Override\n    public int read() throws IOException {\n        int ret = super.read();\n        if(ret &gt;= 0) {\n            newChar((byte)ret);\n        }\n        return ret;\n    }\n\n    /**\n     * Intercept read and output the content to Log.i.\n     */\n    @Override\n    public int read(byte[] buffer, int offset, int count) throws IOException {\n        int ret = super.read(buffer, offset, count);\n        for(int i=0;  i&lt;ret;  i++) {\n            newChar(buffer[i]);\n        }\n        return ret;\n    }\n\n\n    /**\n     * Handle a new character. We output whenever we get a newline\n     * @param ch\n     */\n    private void newChar(byte ch) {\n        if(ch == 10) {\n            String str = sb.toString();\n            if(str.equals(\"\")) {\n                Log.i(\"debug\", \"--blank line--\");\n            } else {\n                Log.i(\"debug\", str);\n            }\n\n            sb = new StringBuilder();\n        } else if(ch == 13) {\n            // Skip this character\n        } else {\n            sb.append((char)ch);\n        }\n    }\n\n    /**\n     * Close the stream\n     */\n    @Override\n    public void close() throws IOException {\n        super.close();\n        if(sb.length() &gt; 0) {\n            Log.i(\"debug\", sb.toString());\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":137113,"reputation":11637,"user_id":341091,"accept_rate":75,"display_name":"Martin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5658,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":6043742,"answer_count":5,"score":6,"last_activity_date":1640285269,"creation_date":1305716566,"question_id":6043634,"body_markdown":"For debugging purposes I would like to dump the content of an input stream into a file while it is processed. The stream is parsed by `org.xml.sax.XMLReader` which will consume the data.\r\n\r\nI would gess one need a filter to archive this and before writing one my self I wanted to ask if there is a ready made version already.\r\n\r\nI work on Android.\r\n\r\n**What I have:**\r\n\r\n```lang-java\r\nfinal org.apache.http.HttpEntity responseEntity = response.getEntity ();\r\nfinal java.io.InputStream content = responseEntity.getContent ();\r\nfinal java.io.InputStreamReader contentReader =\r\n   new java.io.InputStreamReader (content, &quot;UTF-8&quot;);\r\n```\r\n\r\nSo I have an `java.io.InputStream` and an `InputStreamReader`.","title":"Is there a simple “tee” filter for Java input streams?","body":"<p>For debugging purposes I would like to dump the content of an input stream into a file while it is processed. The stream is parsed by <code>org.xml.sax.XMLReader</code> which will consume the data.</p>\n<p>I would gess one need a filter to archive this and before writing one my self I wanted to ask if there is a ready made version already.</p>\n<p>I work on Android.</p>\n<p><strong>What I have:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>final org.apache.http.HttpEntity responseEntity = response.getEntity ();\nfinal java.io.InputStream content = responseEntity.getContent ();\nfinal java.io.InputStreamReader contentReader =\n   new java.io.InputStreamReader (content, &quot;UTF-8&quot;);\n</code></pre>\n<p>So I have an <code>java.io.InputStream</code> and an <code>InputStreamReader</code>.</p>\n"},{"tags":["java","spring-boot","authentication","jwt","authorization"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1640284424,"post_id":70466123,"comment_id":124562979,"body_markdown":"We can use a distributed caching layer. Prime candidates are [memcached (`memcached.org`)](https://memcached.org/) and [redis (`redis.io`)](https://redis.io/).","body":"We can use a distributed caching layer. Prime candidates are <a href=\"https://memcached.org/\" rel=\"nofollow noreferrer\">memcached (<code>memcached.org</code>)</a> and <a href=\"https://redis.io/\" rel=\"nofollow noreferrer\">redis (<code>redis.io</code>)</a>."},{"owner":{"account_id":9706811,"reputation":2870,"user_id":7200018,"display_name":"GnanaJeyam"},"score":0,"creation_date":1640287141,"post_id":70466123,"comment_id":124563718,"body_markdown":"Go for redis and store the invalidate tokens.","body":"Go for redis and store the invalidate tokens."},{"owner":{"account_id":992738,"reputation":408,"user_id":1009540,"display_name":"BarbetNL"},"score":0,"creation_date":1640304480,"post_id":70466123,"comment_id":124567371,"body_markdown":"The distrubed chaching layer is good, but also consider the design of your application. It looks like you&#39;re trying to mix the session/cookie based approach with a jwt based approach. Session based authentication is stateful, jwt based approach is designed to me stateless. As soon as a valid jwt is produced, that user can approach for the lifetime of that jwt (and refresh if needed). Blacklisting is then only needed when for example a monitoring tool finds suspicious activity. Don&#39;t blacklist all logged out tokens, but let them expire. Also let a job cleanup your blacklist for expired jwts.","body":"The distrubed chaching layer is good, but also consider the design of your application. It looks like you&#39;re trying to mix the session/cookie based approach with a jwt based approach. Session based authentication is stateful, jwt based approach is designed to me stateless. As soon as a valid jwt is produced, that user can approach for the lifetime of that jwt (and refresh if needed). Blacklisting is then only needed when for example a monitoring tool finds suspicious activity. Don&#39;t blacklist all logged out tokens, but let them expire. Also let a job cleanup your blacklist for expired jwts."}],"owner":{"account_id":10729847,"reputation":29,"user_id":7896299,"display_name":"Suman kumar Singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1066,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640284341,"creation_date":1640284256,"question_id":70466123,"body_markdown":"How to Invalidate JWT token on logout , springboot API running on multiple nodes in Azure for scalability.\r\n\r\nMaintaining JWT token in memory blacklist on logout event will fail if we increase the nodes on azure to scale it up  \r\ncase: if we blacklist token on one node but request comes on another node with that blacklisted JWT token , then blacklisting will not work  \r\ncase2: of in memory blacklist object size grows bigger it may cause Memory related issue\r\n\r\nplease suggest working approach","title":"How to Invalidate JWT token on logout , spring boot API running on multiple nodes in Azure for scalability a","body":"<p>How to Invalidate JWT token on logout , springboot API running on multiple nodes in Azure for scalability.</p>\n<p>Maintaining JWT token in memory blacklist on logout event will fail if we increase the nodes on azure to scale it up<br />\ncase: if we blacklist token on one node but request comes on another node with that blacklisted JWT token , then blacklisting will not work<br />\ncase2: of in memory blacklist object size grows bigger it may cause Memory related issue</p>\n<p>please suggest working approach</p>\n"},{"tags":["java","android","database","api","sqlite"],"answers":[{"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640284266,"creation_date":1640284266,"answer_id":70466127,"question_id":70465410,"body_markdown":"You could use a http library for retrieving responses from api calls I recommend `OkHttp`. https://square.github.io/okhttp/\r\n\r\nYou will receive a response body from the API call as a string and everything else should be the same as your posted code after you have the string.\r\n\r\n\r\n    OkHttpClient client = new OkHttpClient();\r\n    \r\n    String run(String url) throws IOException {\r\n      Request request = new Request.Builder()\r\n          .url(url)\r\n          .build();\r\n    \r\n      try (Response response = client.newCall(request).execute()) {\r\n        return response.body().string();\r\n      }\r\n    }\r\n    //HERE\r\n    run(&quot;https://www.metaweather.com/api/location/search/?query=paris&quot;)\r\n\r\n","title":"How to store online JSON API in SQLite","body":"<p>You could use a http library for retrieving responses from api calls I recommend <code>OkHttp</code>. <a href=\"https://square.github.io/okhttp/\" rel=\"nofollow noreferrer\">https://square.github.io/okhttp/</a></p>\n<p>You will receive a response body from the API call as a string and everything else should be the same as your posted code after you have the string.</p>\n<pre><code>OkHttpClient client = new OkHttpClient();\n\nString run(String url) throws IOException {\n  Request request = new Request.Builder()\n      .url(url)\n      .build();\n\n  try (Response response = client.newCall(request).execute()) {\n    return response.body().string();\n  }\n}\n//HERE\nrun(&quot;https://www.metaweather.com/api/location/search/?query=paris&quot;)\n</code></pre>\n"}],"owner":{"account_id":20630008,"reputation":71,"user_id":15145256,"display_name":"Yurty123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640284266,"creation_date":1640279828,"question_id":70465410,"body_markdown":"So I&#39;m trying to develop this app which stores weather details into a sqlite database with Android Studio. I&#39;m currently watching a tutorial on how to store json data to an SQLite Database, but this is for reading from a JSON file. \r\n\r\n    private String readJsonDataFromFile() throws IOException {\r\n\r\n        InputStream inputStream = null;\r\n        StringBuilder builder = new StringBuilder();\r\n\r\n        try {\r\n            String jsonDataString = null;\r\n            inputStream = mResources.openRawResource(R.raw.menu_item);\r\n            BufferedReader bufferedReader = new BufferedReader(\r\n                    new InputStreamReader(inputStream, &quot;UTF-8&quot;));\r\n            while ((jsonDataString = bufferedReader.readLine()) != null) {\r\n                builder.append(jsonDataString);\r\n            }\r\n        } finally {\r\n            if (inputStream != null) {\r\n                inputStream.close();\r\n            }\r\n        }\r\n\r\n        return new String(builder);\r\n    }\r\n    }\r\n\r\nFor example he is reading in a JSON file called menu_item. How would I implement the code above to work if I wanted to use it to store data from a MetaWeather api, for ex: https://www.metaweather.com/api/location/search/?query=paris \r\n\r\n","title":"How to store online JSON API in SQLite","body":"<p>So I'm trying to develop this app which stores weather details into a sqlite database with Android Studio. I'm currently watching a tutorial on how to store json data to an SQLite Database, but this is for reading from a JSON file.</p>\n<pre><code>private String readJsonDataFromFile() throws IOException {\n\n    InputStream inputStream = null;\n    StringBuilder builder = new StringBuilder();\n\n    try {\n        String jsonDataString = null;\n        inputStream = mResources.openRawResource(R.raw.menu_item);\n        BufferedReader bufferedReader = new BufferedReader(\n                new InputStreamReader(inputStream, &quot;UTF-8&quot;));\n        while ((jsonDataString = bufferedReader.readLine()) != null) {\n            builder.append(jsonDataString);\n        }\n    } finally {\n        if (inputStream != null) {\n            inputStream.close();\n        }\n    }\n\n    return new String(builder);\n}\n}\n</code></pre>\n<p>For example he is reading in a JSON file called menu_item. How would I implement the code above to work if I wanted to use it to store data from a MetaWeather api, for ex: <a href=\"https://www.metaweather.com/api/location/search/?query=paris\" rel=\"nofollow noreferrer\">https://www.metaweather.com/api/location/search/?query=paris</a></p>\n"},{"tags":["java","jar","download","inputstream"],"answers":[{"tags":[],"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1522781262,"creation_date":1522781262,"answer_id":49637155,"question_id":49635169,"body_markdown":"Unfortunately `java.util.jar.JarFile` and `java.util.zip.ZipFile` only operate on a `File`. \r\n\r\nFurthermore the part that actually reads the file is implemented in native. Therefore overriding the class and redirecting the implementation to a `byte[]` or any other sort of buffer does not seem to be feasible from my point of view.","title":"Create JarFile from InputStream","body":"<p>Unfortunately <code>java.util.jar.JarFile</code> and <code>java.util.zip.ZipFile</code> only operate on a <code>File</code>. </p>\n\n<p>Furthermore the part that actually reads the file is implemented in native. Therefore overriding the class and redirecting the implementation to a <code>byte[]</code> or any other sort of buffer does not seem to be feasible from my point of view.</p>\n"}],"owner":{"account_id":12543815,"reputation":25,"user_id":9127897,"display_name":"Richee Nektar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1159,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":49637155,"answer_count":1,"score":2,"last_activity_date":1640283550,"creation_date":1522773730,"question_id":49635169,"body_markdown":"I want to read a JarFile, from the Internet, to the ram and handle it as a JarFile.\r\nIs there a way to convert a JarInputStream to a JarFile or a byte[] into a JarFile, without first saving it?\r\n\r\nplid is 55283\r\n\r\n    public static void update() throws Exception {\r\n\t\t\r\n\t\tHttpURLConnection conn = (HttpURLConnection) new URL(&quot;https://api.spiget.org/v2/resources/&quot; + plid).openConnection();\r\n\t\tJSONObject info = (JSONObject) new JSONParser().parse(new InputStreamReader(conn.getInputStream()));\r\n\t\tlong dwlid = Long.parseLong( ((JSONObject) ((JSONArray) info.get(&quot;versions&quot;)).get(0)).get(&quot;id&quot;).toString() );\r\n\t\tString dwl = String.format(&quot;https://api.spiget.org/v2/resources/{0}/versions/{1}/download&quot;, plid, dwlid);\r\n\t\t\r\n\t\tconn = (HttpURLConnection) new URL(dwl).openConnection();\r\n\t\tconn.setRequestProperty(&quot;user-agent&quot;, Core.useragent);\r\n\t\tconn = f(conn);\r\n\t\t\r\n\t\tInputStream in = conn.getInputStream();\r\n\t\tJarInputStream jis = new JarInputStream(in);\r\n\t\tJarFile jf = new Jar\r\n\t\t\r\n\t\t\r\n\t}","title":"Create JarFile from InputStream","body":"<p>I want to read a JarFile, from the Internet, to the ram and handle it as a JarFile.\nIs there a way to convert a JarInputStream to a JarFile or a byte[] into a JarFile, without first saving it?</p>\n\n<p>plid is 55283</p>\n\n<pre><code>public static void update() throws Exception {\n\n    HttpURLConnection conn = (HttpURLConnection) new URL(\"https://api.spiget.org/v2/resources/\" + plid).openConnection();\n    JSONObject info = (JSONObject) new JSONParser().parse(new InputStreamReader(conn.getInputStream()));\n    long dwlid = Long.parseLong( ((JSONObject) ((JSONArray) info.get(\"versions\")).get(0)).get(\"id\").toString() );\n    String dwl = String.format(\"https://api.spiget.org/v2/resources/{0}/versions/{1}/download\", plid, dwlid);\n\n    conn = (HttpURLConnection) new URL(dwl).openConnection();\n    conn.setRequestProperty(\"user-agent\", Core.useragent);\n    conn = f(conn);\n\n    InputStream in = conn.getInputStream();\n    JarInputStream jis = new JarInputStream(in);\n    JarFile jf = new Jar\n\n\n}\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":0,"creation_date":1317231972,"post_id":7587270,"comment_id":9202239,"body_markdown":"Is this an old system that you&#39;re bringing up to speed?","body":"Is this an old system that you&#39;re bringing up to speed?"}],"answers":[{"tags":[],"owner":{"account_id":938680,"reputation":1568,"user_id":967154,"accept_rate":88,"display_name":"Robert Louis Murphy"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1317232918,"creation_date":1317232918,"answer_id":7587478,"question_id":7587270,"body_markdown":"Replace:\r\n\r\n    localParams = new Hashtable();\r\n\r\nWith:\r\n\r\n    localParams = new Hashtable&lt;String,String&gt;();\r\n\r\nI assume you have a global variable like the following:\r\n\r\n    private Hashtable localParams;\r\n\r\nReplace that with:\r\n\r\n    private Hashtable&lt;String,String&gt; localParams;\r\n\r\nIf you make the changes I suggested the warnings will go away but you will also have to replace all of your Object with String;","title":"warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable localParams.put(name, values);","body":"<p>Replace:</p>\n\n<pre><code>localParams = new Hashtable();\n</code></pre>\n\n<p>With:</p>\n\n<pre><code>localParams = new Hashtable&lt;String,String&gt;();\n</code></pre>\n\n<p>I assume you have a global variable like the following:</p>\n\n<pre><code>private Hashtable localParams;\n</code></pre>\n\n<p>Replace that with:</p>\n\n<pre><code>private Hashtable&lt;String,String&gt; localParams;\n</code></pre>\n\n<p>If you make the changes I suggested the warnings will go away but you will also have to replace all of your Object with String;</p>\n"},{"tags":[],"owner":{"account_id":17330117,"reputation":3251,"user_id":12553450,"display_name":"Mafei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640283263,"creation_date":1640283263,"answer_id":70465961,"question_id":7587270,"body_markdown":"General thing is that you have to mention which type will represent the object that you are going to create. just think you have a lot of cars. you are going to meet someone. that person knows every car you have. but he doesn&#39;t know by which one you are coming this time. then he can&#39;t identify you at once when you coming. but if you had mentioned by which car you are coming earlier, he can easily identify you from far away also.  ","title":"warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable localParams.put(name, values);","body":"<p>General thing is that you have to mention which type will represent the object that you are going to create. just think you have a lot of cars. you are going to meet someone. that person knows every car you have. but he doesn't know by which one you are coming this time. then he can't identify you at once when you coming. but if you had mentioned by which car you are coming earlier, he can easily identify you from far away also.</p>\n"}],"owner":{"account_id":941628,"reputation":311,"user_id":969606,"display_name":"majda88"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23552,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":2,"score":12,"last_activity_date":1640283263,"creation_date":1317231507,"question_id":7587270,"body_markdown":"I have got 2 warning:\r\n-- The First is : \r\n\r\n    HELPDESKGESTION2\\src\\java\\glpi\\filter\\LoginFilter.java:289: warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable\r\n                        localParams.put(key, value);\r\n                                       ^\r\n\r\n--The Second is :\r\n\r\n    HELPDESKGESTION2\\src\\java\\glpi\\filter\\LoginFilter.java:292: warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable\r\n                localParams.put(name, values);\r\n                               ^\r\n\r\nThe Code ho generate this warnings is : \r\n\r\n\tpublic void setParameter(String name, String []values) {\r\n\t    if (debug) System.out.println(&quot;LoginFilter::setParameter(&quot; + name + &quot;=&quot; + values + &quot;)&quot; + &quot; localParams = &quot;+ localParams);\r\n\t    \r\n\t    if (localParams == null) {\r\n\t\tlocalParams = new Hashtable();\r\n\t\t// Copy the parameters from the underlying request.\r\n\t\tMap wrappedParams = getRequest().getParameterMap();\r\n\t\tSet keySet = wrappedParams.keySet();\r\n\t\tfor (Iterator it = keySet.iterator(); it.hasNext(); ) {\r\n\t\t    Object key = it.next();\r\n\t\t    Object value = wrappedParams.get(key);\r\n\t\t    localParams.put(key, value);\r\n\t\t}\r\n\t    }\r\n\t    localParams.put(name, values);\r\n\t}","title":"warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable localParams.put(name, values);","body":"<p>I have got 2 warning:\n-- The First is : </p>\n\n<pre><code>HELPDESKGESTION2\\src\\java\\glpi\\filter\\LoginFilter.java:289: warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable\n                    localParams.put(key, value);\n                                   ^\n</code></pre>\n\n<p>--The Second is :</p>\n\n<pre><code>HELPDESKGESTION2\\src\\java\\glpi\\filter\\LoginFilter.java:292: warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable\n            localParams.put(name, values);\n                           ^\n</code></pre>\n\n<p>The Code ho generate this warnings is : </p>\n\n<pre><code>public void setParameter(String name, String []values) {\n    if (debug) System.out.println(\"LoginFilter::setParameter(\" + name + \"=\" + values + \")\" + \" localParams = \"+ localParams);\n\n    if (localParams == null) {\n    localParams = new Hashtable();\n    // Copy the parameters from the underlying request.\n    Map wrappedParams = getRequest().getParameterMap();\n    Set keySet = wrappedParams.keySet();\n    for (Iterator it = keySet.iterator(); it.hasNext(); ) {\n        Object key = it.next();\n        Object value = wrappedParams.get(key);\n        localParams.put(key, value);\n    }\n    }\n    localParams.put(name, values);\n}\n</code></pre>\n"},{"tags":["java","android","sqlite","android-cursor"],"answers":[{"tags":[],"owner":{"account_id":274883,"reputation":5504,"user_id":567390,"accept_rate":89,"display_name":"Todd Davies"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1320183768,"creation_date":1320183768,"answer_id":7973301,"question_id":7973120,"body_markdown":"No, As it says in the link below, if you close the database, the cursor becomes invalid.\r\n\r\nhttps://stackoverflow.com/questions/6513440/will-cursor-be-still-alive-after-database-is-closed","title":"Android - Can SQLite Cursor&#39;s be used after closing the database?","body":"<p>No, As it says in the link below, if you close the database, the cursor becomes invalid.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6513440/will-cursor-be-still-alive-after-database-is-closed\">Will cursor be still alive after database is closed?</a></p>\n"},{"tags":[],"owner":{"account_id":268428,"reputation":50179,"user_id":557179,"accept_rate":100,"display_name":"Nikola Despotoski"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1320183918,"creation_date":1320183918,"answer_id":7973328,"question_id":7973120,"body_markdown":"&gt; First of all, correct me if I&#39;m wrong, but if you close a database\r\n&gt; connection, you can&#39;t use the Cursor you got from it, correct?\r\n\r\nCorrect.\r\n\r\n&gt; So is it there any way to use the Cursor after closing the database?\r\n\r\nI don&#39;t think so. I always closed the database when I&#39;m done with the Cursor, even if I pass the cursor to another Cursor object. \r\n\r\n&gt;  Like is there any way to pass it elsewhere and use it kinda like an\r\n&gt; object?\r\n\r\nCreate method that will `return cursorobject;` and use the method wherever you need it. (Also create method that will close db after you are done)\r\n\r\n&gt; Or do you always have to leave the database connection open until you\r\n&gt; are done with the cursor?\r\n\r\nOtherwise the cursor will screw up.","title":"Android - Can SQLite Cursor&#39;s be used after closing the database?","body":"<blockquote>\n  <p>First of all, correct me if I'm wrong, but if you close a database\n  connection, you can't use the Cursor you got from it, correct?</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>So is it there any way to use the Cursor after closing the database?</p>\n</blockquote>\n\n<p>I don't think so. I always closed the database when I'm done with the Cursor, even if I pass the cursor to another Cursor object. </p>\n\n<blockquote>\n  <p>Like is there any way to pass it elsewhere and use it kinda like an\n  object?</p>\n</blockquote>\n\n<p>Create method that will <code>return cursorobject;</code> and use the method wherever you need it. (Also create method that will close db after you are done)</p>\n\n<blockquote>\n  <p>Or do you always have to leave the database connection open until you\n  are done with the cursor?</p>\n</blockquote>\n\n<p>Otherwise the cursor will screw up.</p>\n"},{"tags":[],"owner":{"account_id":519129,"reputation":1845,"user_id":1030641,"display_name":"Trenton D. Adams"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1321418822,"creation_date":1320988128,"answer_id":8089944,"question_id":7973120,"body_markdown":"I used `cursor.moveToLast()`, and it allowed me to use the cursor for iteration after database closure.  I have no idea if this is intentional.\r\n\r\nHowever, it seems that the intended use of the open helper framework, is to open the db on activity start, and close it when the Activity is destroyed.\r\n\r\nIn an AsyncTask from within onCreate()...\r\n\r\n    new StartupTask().execute();\r\n\r\nThe AsyncTask Thread.sleep() below is just to give enough time to show the dialog so that you can see it work.  Obviously take that out when you&#39;re done playing. ;)\r\n\r\n    private class StartupTask extends AsyncTask\r\n    {\r\n\r\n        private ProgressDialog progressDialog;\r\n\r\n        @Override\r\n        protected Object doInBackground(final Object... objects)\r\n        {\r\n            openHelperRef.getWritableDatabase();\r\n            try\r\n            {\r\n                Thread.sleep(5000);\r\n            }\r\n            catch (InterruptedException e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        protected void onPreExecute()\r\n        {\r\n            super.onPreExecute();\r\n            runOnUiThread(new Runnable()\r\n            {\r\n                public void run()\r\n                {\r\n                    progressDialog = ProgressDialog.show(\r\n                        MyActivity.this, &quot;Title&quot;,\r\n                        &quot;Opening/Upgrading the database, please wait&quot;, true);\r\n                }\r\n            });\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(Object object)\r\n        {\r\n            super.onPostExecute(object);\r\n            progressDialog.dismiss();\r\n        }\r\n\r\n    }\r\n\r\nin onDestroy()...\r\n    openHelper.close();\r\n\r\nOtherwise, you will not be able to use android SimpleCursorAdapter, or anything like that.  Of course the andriod docs are very lacking in this regard.  But, remember, getWriteableDatabase() always returns the same cached reference, every single time, unless you closed it.  So, if you go closing that reference willy-nilly, background threads and what not, that are using the same database, WILL die.","title":"Android - Can SQLite Cursor&#39;s be used after closing the database?","body":"<p>I used <code>cursor.moveToLast()</code>, and it allowed me to use the cursor for iteration after database closure.  I have no idea if this is intentional.</p>\n\n<p>However, it seems that the intended use of the open helper framework, is to open the db on activity start, and close it when the Activity is destroyed.</p>\n\n<p>In an AsyncTask from within onCreate()...</p>\n\n<pre><code>new StartupTask().execute();\n</code></pre>\n\n<p>The AsyncTask Thread.sleep() below is just to give enough time to show the dialog so that you can see it work.  Obviously take that out when you're done playing. ;)</p>\n\n<pre><code>private class StartupTask extends AsyncTask\n{\n\n    private ProgressDialog progressDialog;\n\n    @Override\n    protected Object doInBackground(final Object... objects)\n    {\n        openHelperRef.getWritableDatabase();\n        try\n        {\n            Thread.sleep(5000);\n        }\n        catch (InterruptedException e)\n        {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    @Override\n    protected void onPreExecute()\n    {\n        super.onPreExecute();\n        runOnUiThread(new Runnable()\n        {\n            public void run()\n            {\n                progressDialog = ProgressDialog.show(\n                    MyActivity.this, \"Title\",\n                    \"Opening/Upgrading the database, please wait\", true);\n            }\n        });\n    }\n\n    @Override\n    protected void onPostExecute(Object object)\n    {\n        super.onPostExecute(object);\n        progressDialog.dismiss();\n    }\n\n}\n</code></pre>\n\n<p>in onDestroy()...\n    openHelper.close();</p>\n\n<p>Otherwise, you will not be able to use android SimpleCursorAdapter, or anything like that.  Of course the andriod docs are very lacking in this regard.  But, remember, getWriteableDatabase() always returns the same cached reference, every single time, unless you closed it.  So, if you go closing that reference willy-nilly, background threads and what not, that are using the same database, WILL die.</p>\n"}],"owner":{"account_id":57536,"reputation":89154,"user_id":172350,"accept_rate":69,"display_name":"Jake Wilson"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8112,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":7973301,"answer_count":3,"score":15,"last_activity_date":1640282293,"creation_date":1320182737,"question_id":7973120,"body_markdown":"First of all, correct me if I&#39;m wrong, but if you close a database connection, you can&#39;t use the Cursor you got from it, correct?\r\n\r\n    db.open();\r\n    Cursor c = db.query(true, &quot;MyTable&quot;, columns, null, null, null, null, null, null);\r\n    db.close();\r\n\r\n    // The Cursor is empty now because the db was closed...\r\n    c.moveToNext();\r\n    Log.v(TAG, c.toString(0));\r\n\r\nSo is it there any way to use the Cursor after closing the database? Like is there any way to pass it elsewhere and use it kinda like an object? Or do you always have to leave the database connection open until you are done with the cursor?","title":"Android - Can SQLite Cursor&#39;s be used after closing the database?","body":"<p>First of all, correct me if I'm wrong, but if you close a database connection, you can't use the Cursor you got from it, correct?</p>\n\n<pre><code>db.open();\nCursor c = db.query(true, \"MyTable\", columns, null, null, null, null, null, null);\ndb.close();\n\n// The Cursor is empty now because the db was closed...\nc.moveToNext();\nLog.v(TAG, c.toString(0));\n</code></pre>\n\n<p>So is it there any way to use the Cursor after closing the database? Like is there any way to pass it elsewhere and use it kinda like an object? Or do you always have to leave the database connection open until you are done with the cursor?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1639672508,"post_id":70381742,"comment_id":124414432,"body_markdown":"Why are you using `PrefereceFragment` inside another `Fragment`?","body":"Why are you using <code>PrefereceFragment</code> inside another <code>Fragment</code>?"},{"owner":{"account_id":17156495,"reputation":49,"user_id":12417251,"display_name":"traccy00"},"score":0,"creation_date":1639715977,"post_id":70381742,"comment_id":124425163,"body_markdown":"@cmak becasue I want to use preferences for Settings, and all other is Fragment, I need to use PreferenceFragment inside SettingFragment.","body":"@cmak becasue I want to use preferences for Settings, and all other is Fragment, I need to use PreferenceFragment inside SettingFragment."}],"answers":[{"tags":[],"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640282007,"creation_date":1640282007,"answer_id":70465758,"question_id":70381742,"body_markdown":"You should use `PreferenceFragmentCompat`, if using `androidx` libraries\r\n\r\n```\r\npublic class SettingsFragment extends PreferenceFragmentCompat {\r\n    @Override\r\n    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\r\n        setPreferencesFromResource(R.xml.preferences, rootKey);\r\n    }\r\n}\r\n```\r\nand a parent `Fragment` is not required if it&#39;s only a single screen, instead use the Preference Fragment directly.","title":"Preference Fragment overlaps BottomNavigationView","body":"<p>You should use <code>PreferenceFragmentCompat</code>, if using <code>androidx</code> libraries</p>\n<pre><code>public class SettingsFragment extends PreferenceFragmentCompat {\n    @Override\n    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n        setPreferencesFromResource(R.xml.preferences, rootKey);\n    }\n}\n</code></pre>\n<p>and a parent <code>Fragment</code> is not required if it's only a single screen, instead use the Preference Fragment directly.</p>\n"}],"owner":{"account_id":17156495,"reputation":49,"user_id":12417251,"display_name":"traccy00"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640282007,"creation_date":1639669041,"question_id":70381742,"body_markdown":"I have 4 fragment, the last fragment is Setting Fragment using Preference Fragment:\r\n\r\n    public class SettingFragment extends Fragment {\r\n    \r\n       ...\r\n    \r\n        @Override\r\n        public void onActivityCreated(Bundle savedInstanceState) {\r\n            super.onActivityCreated(savedInstanceState);\r\n            getActivity().getFragmentManager().beginTransaction()\r\n                    .replace(android.R.id.content, new MyPreferenceFragment())\r\n                    .commit();\r\n        }\r\n    \r\n       ...\r\n    \r\n        public static class MyPreferenceFragment extends PreferenceFragment {\r\n    \r\n            public MyPreferenceFragment(){}\r\n    \r\n            @Override\r\n            public void onCreate(@Nullable Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                addPreferencesFromResource(R.xml.preferences);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n**My problem**\r\nWith first 3 fragments, bottom navigation bar still work\r\nBut in last fragment is Setting Fragment, my fragment view overlaps my bottomNavigationView. I can not click to bottomNavigationView anymore. It relizes the click to item in fragmentView\r\n\r\n[![Problem with fragment and bottomNavigtaionView][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CYBJr.jpg\r\n\r\nHow can I fix it?","title":"Preference Fragment overlaps BottomNavigationView","body":"<p>I have 4 fragment, the last fragment is Setting Fragment using Preference Fragment:</p>\n<pre><code>public class SettingFragment extends Fragment {\n\n   ...\n\n    @Override\n    public void onActivityCreated(Bundle savedInstanceState) {\n        super.onActivityCreated(savedInstanceState);\n        getActivity().getFragmentManager().beginTransaction()\n                .replace(android.R.id.content, new MyPreferenceFragment())\n                .commit();\n    }\n\n   ...\n\n    public static class MyPreferenceFragment extends PreferenceFragment {\n\n        public MyPreferenceFragment(){}\n\n        @Override\n        public void onCreate(@Nullable Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            addPreferencesFromResource(R.xml.preferences);\n        }\n    }\n\n}\n</code></pre>\n<p><strong>My problem</strong>\nWith first 3 fragments, bottom navigation bar still work\nBut in last fragment is Setting Fragment, my fragment view overlaps my bottomNavigationView. I can not click to bottomNavigationView anymore. It relizes the click to item in fragmentView</p>\n<p><a href=\"https://i.stack.imgur.com/CYBJr.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CYBJr.jpg\" alt=\"Problem with fragment and bottomNavigtaionView\" /></a></p>\n<p>How can I fix it?</p>\n"},{"tags":["java","performance","audio","garbage-collection"],"answers":[{"tags":[],"owner":{"account_id":269837,"reputation":1002,"user_id":559426,"display_name":"Highland Mark"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1295634356,"creation_date":1295634356,"answer_id":4762378,"question_id":4762300,"body_markdown":"This implies that too many objects objects are being promoted out of eden space as the main GC shouldn&#39;t have to be dealing with much. You could increase the ratio of space given to the new generations with -XX:NewRatio. Try 10 and move up.   \r\nBetter still, investigate how you can reduce the scope over which objects in your program remain referenced.","title":"Tuning GC for Java audio application","body":"<p>This implies that too many objects objects are being promoted out of eden space as the main GC shouldn't have to be dealing with much. You could increase the ratio of space given to the new generations with -XX:NewRatio. Try 10 and move up.<br>\nBetter still, investigate how you can reduce the scope over which objects in your program remain referenced.</p>\n"},{"tags":[],"owner":{"account_id":263812,"reputation":7348,"user_id":549641,"display_name":"jmg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295634685,"creation_date":1295634685,"answer_id":4762427,"question_id":4762300,"body_markdown":"Ok, in short you have a non-functional requirement on a system which is not specified to meet this requirement. The &quot;right&quot; answer would be to use a real-time capable JVM implementation. But most are expensive, and I assume you would accept a 99,9% percent correct solution.\r\n\r\nThe first think, you should do is to find a way to measure this interrupts. Otherwise, any experiment to compare different garbage collectors is doomed to be unreliable.\r\n\r\nAfter this introducing statement, let&#39;s come to your problem: \r\n\r\nYou said the garbage collector is introducing pauses in the sound play back. Your options are:\r\n\r\n1. Improve the garbage collector by using more appropriate options.\r\n2. Generate less garbage.\r\n3. Periodically call the garbage collector, but this may very well lead to the opposite effect. You have to measure!\r\n4. Use latency hiding techniques to reduce the influence of pauses induced by the garbage collector.\r\n\r\nTo wrap up: If you really want to get rid of that problem, (1) find a way to measure it, (2) do experiments, (3) find the root cause, (4) solve the root cause, and (5) measure that you&#39;ve really solved it.","title":"Tuning GC for Java audio application","body":"<p>Ok, in short you have a non-functional requirement on a system which is not specified to meet this requirement. The \"right\" answer would be to use a real-time capable JVM implementation. But most are expensive, and I assume you would accept a 99,9% percent correct solution.</p>\n\n<p>The first think, you should do is to find a way to measure this interrupts. Otherwise, any experiment to compare different garbage collectors is doomed to be unreliable.</p>\n\n<p>After this introducing statement, let's come to your problem: </p>\n\n<p>You said the garbage collector is introducing pauses in the sound play back. Your options are:</p>\n\n<ol>\n<li>Improve the garbage collector by using more appropriate options.</li>\n<li>Generate less garbage.</li>\n<li>Periodically call the garbage collector, but this may very well lead to the opposite effect. You have to measure!</li>\n<li>Use latency hiding techniques to reduce the influence of pauses induced by the garbage collector.</li>\n</ol>\n\n<p>To wrap up: If you really want to get rid of that problem, (1) find a way to measure it, (2) do experiments, (3) find the root cause, (4) solve the root cause, and (5) measure that you've really solved it.</p>\n"},{"tags":[],"owner":{"account_id":42255,"reputation":8377,"user_id":123054,"accept_rate":83,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1640281200,"creation_date":1295687531,"answer_id":4767048,"question_id":4762300,"body_markdown":"The log you provide is too small to provide real analysis but it says that it spent 200ms doing v little as the old gen is basically full. This means your heap is too small or you have a memory leak. There is not much you can do to tune the GC algorithm in this situation. Therefore the rest of this reply is about how you can get more information out of the app and/or how to tune GC once you have eliminated the memory leak or have a bigger heap. \r\n\r\nTo a large extent, low pause means doing all you can to keep the collections as young collections only. \r\n\r\nYou really need to log exactly when you start and finish writing and then correlate that with the STW pauses that occur in the JVM during that period otherwise you really have no idea what might be causing the issue or how severe the issue really is.\r\n\r\nThings I&#39;d do immediately;\r\n\r\n 1. change your logging so that you output a single line easily parseable by a script (perhaps starttime,endtime,duration) \r\n 2. add the PrintGCApplicationStoppedTime and PrintGCApplicationConcurrentTime switches so that you get a record of **every** STW pause and not just GC events\r\n 3. use the latest JVM (i.e. [6u23][1]) as there have been a lot of improvements to hotspot over the last year or two so there point using an older one \r\n 4. You don&#39;t say if you&#39;re memory constrained but I&#39;d definitely increase the heap size if you can, 40M is pretty small so you don&#39;t have much space to play with\r\n 5. Run the app with [visualgc][2] connected, it&#39;s gives a more comprehensive view on what is going on IMO as you have all the different views up at one time\r\n\r\nThe key thing is determine where you&#39;re running out of space and why. The answer to that likely lies in what the allocation pattern of your app is like, is it generating a load of short lived objects such that you&#39;re burning through your tiny eden really quickly? is the tenuring threshold too high such that you&#39;re ping ponging objects through the survivor spaces before they get tenured anyway and thus forcing frequent tenured gcs (slow)? \r\n\r\nA few other things to bear in mind... \r\n\r\n - iCMS (incremental) was intended for use on 1 or 2 core machines, does that describe your machine? how many cores do you have? you may just want to drop that option\r\n - CMS does have a single threaded phase (init mark), this might be hurting you\r\n - CMS typically prefers a bigger heap than other collectors, yours is pretty small\r\n\r\n\r\n**Edit after visualgc graph added to question**\r\nSince you&#39;re memory constrained then you need to make best use of the space you have, the only way to do this is going to be through repeated benchmarking... ideally with a repeatable test.\r\n\r\n - you can use `-Xmn` to specify set the size of the young generation, the remainder will be given to tenured.\r\n - you might want to tune your use of the survivor spaces so that you let them get fuller before they&#39;re swapped and to let objects live there for longer before they get tenured \r\n   - `-XX:TargetSurvivorRatio=90` sets it so a survivor space needs to be 90% full before it is copied, obviously there is a trade off here between the cost of copying and using the space\r\n   - use `-XX:+PrintTenuringDistribution` to show the size of each space and how things are, you can also see this in visualgc\r\n   - use `-XX:+MaxTenuringThreshold` to specify how many times an object can survive a young collection (be copied from 1 survivor space to another) before it is tenured, e.g. if you know you only get short lived garbage or stuff that lives forever then setting this to 1 is sensible\r\n - you need to understand what is triggering the tenured collections and might consider taking action to make it trigger later \r\n   - for CMS this may involve tweaking `-XX:CMSInitiatingOccupancyFraction=&lt;value&gt;`, e.g. set to 80 and it will trigger CMS at 80% occupancy of tenured (NB: this is be a bad thing to get wrong so you may prefer to let hotspot manage this; set it too small and it collects too often killing performance, set it too big and it may trigger too late causing an unscheduled full collection with correspondingly long pause time\r\n - if it really is old collections that are hurting you and you need low pause then use CMS and ParNew\r\n\r\nFinally get a profiler and work out where the garbage is coming from, you might find it is easier to control the rate at which garbage is generated then pouring effort into the black hole that can be GC tuning! \r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n  [2]: https://www.oracle.com/java/technologies/visual-garbage-collection-monitoring-tool.html","title":"Tuning GC for Java audio application","body":"<p>The log you provide is too small to provide real analysis but it says that it spent 200ms doing v little as the old gen is basically full. This means your heap is too small or you have a memory leak. There is not much you can do to tune the GC algorithm in this situation. Therefore the rest of this reply is about how you can get more information out of the app and/or how to tune GC once you have eliminated the memory leak or have a bigger heap.</p>\n<p>To a large extent, low pause means doing all you can to keep the collections as young collections only.</p>\n<p>You really need to log exactly when you start and finish writing and then correlate that with the STW pauses that occur in the JVM during that period otherwise you really have no idea what might be causing the issue or how severe the issue really is.</p>\n<p>Things I'd do immediately;</p>\n<ol>\n<li>change your logging so that you output a single line easily parseable by a script (perhaps starttime,endtime,duration)</li>\n<li>add the PrintGCApplicationStoppedTime and PrintGCApplicationConcurrentTime switches so that you get a record of <strong>every</strong> STW pause and not just GC events</li>\n<li>use the latest JVM (i.e. <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">6u23</a>) as there have been a lot of improvements to hotspot over the last year or two so there point using an older one</li>\n<li>You don't say if you're memory constrained but I'd definitely increase the heap size if you can, 40M is pretty small so you don't have much space to play with</li>\n<li>Run the app with <a href=\"https://www.oracle.com/java/technologies/visual-garbage-collection-monitoring-tool.html\" rel=\"nofollow noreferrer\">visualgc</a> connected, it's gives a more comprehensive view on what is going on IMO as you have all the different views up at one time</li>\n</ol>\n<p>The key thing is determine where you're running out of space and why. The answer to that likely lies in what the allocation pattern of your app is like, is it generating a load of short lived objects such that you're burning through your tiny eden really quickly? is the tenuring threshold too high such that you're ping ponging objects through the survivor spaces before they get tenured anyway and thus forcing frequent tenured gcs (slow)?</p>\n<p>A few other things to bear in mind...</p>\n<ul>\n<li>iCMS (incremental) was intended for use on 1 or 2 core machines, does that describe your machine? how many cores do you have? you may just want to drop that option</li>\n<li>CMS does have a single threaded phase (init mark), this might be hurting you</li>\n<li>CMS typically prefers a bigger heap than other collectors, yours is pretty small</li>\n</ul>\n<p><strong>Edit after visualgc graph added to question</strong>\nSince you're memory constrained then you need to make best use of the space you have, the only way to do this is going to be through repeated benchmarking... ideally with a repeatable test.</p>\n<ul>\n<li>you can use <code>-Xmn</code> to specify set the size of the young generation, the remainder will be given to tenured.</li>\n<li>you might want to tune your use of the survivor spaces so that you let them get fuller before they're swapped and to let objects live there for longer before they get tenured\n<ul>\n<li><code>-XX:TargetSurvivorRatio=90</code> sets it so a survivor space needs to be 90% full before it is copied, obviously there is a trade off here between the cost of copying and using the space</li>\n<li>use <code>-XX:+PrintTenuringDistribution</code> to show the size of each space and how things are, you can also see this in visualgc</li>\n<li>use <code>-XX:+MaxTenuringThreshold</code> to specify how many times an object can survive a young collection (be copied from 1 survivor space to another) before it is tenured, e.g. if you know you only get short lived garbage or stuff that lives forever then setting this to 1 is sensible</li>\n</ul>\n</li>\n<li>you need to understand what is triggering the tenured collections and might consider taking action to make it trigger later\n<ul>\n<li>for CMS this may involve tweaking <code>-XX:CMSInitiatingOccupancyFraction=&lt;value&gt;</code>, e.g. set to 80 and it will trigger CMS at 80% occupancy of tenured (NB: this is be a bad thing to get wrong so you may prefer to let hotspot manage this; set it too small and it collects too often killing performance, set it too big and it may trigger too late causing an unscheduled full collection with correspondingly long pause time</li>\n</ul>\n</li>\n<li>if it really is old collections that are hurting you and you need low pause then use CMS and ParNew</li>\n</ul>\n<p>Finally get a profiler and work out where the garbage is coming from, you might find it is easier to control the rate at which garbage is generated then pouring effort into the black hole that can be GC tuning!</p>\n"},{"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1346953127,"creation_date":1346953127,"answer_id":12305504,"question_id":4762300,"body_markdown":"I know this is an old question and the OP probably isn&#39;t even interested anymore, but it bothers me that these lines were in his config:\r\n\r\n    -XX:MaxHeapFreeRatio=10\r\n    -XX:MinHeapFreeRatio=10 \r\n\r\nTo me this means that his VM will attempt to CONSTANTLY request memory from the system or free it--I&#39;m pretty sure there has to be a gap between these two numbers.\r\n\r\nAlso, for anyone else trying to do a realtime java system, the trick is to allocate ALL your objects up front and then never allocate anything else.\r\n\r\nIt can be tricky, but it&#39;s not impossible by a long shot--turn on -verbose:gc and just remove &quot;New&quot;s and other things that allocate memory until you don&#39;t see any gcs at all.\r\n\r\nIn a GUI, by the way, this means pre-creating all your GUI elements and never freeing them, just hiding and showing.  It also means no string manipulation (use StringBuffers and string constants only--this is the most difficult thing to solve because so many system calls rely on strings)","title":"Tuning GC for Java audio application","body":"<p>I know this is an old question and the OP probably isn't even interested anymore, but it bothers me that these lines were in his config:</p>\n\n<pre><code>-XX:MaxHeapFreeRatio=10\n-XX:MinHeapFreeRatio=10 \n</code></pre>\n\n<p>To me this means that his VM will attempt to CONSTANTLY request memory from the system or free it--I'm pretty sure there has to be a gap between these two numbers.</p>\n\n<p>Also, for anyone else trying to do a realtime java system, the trick is to allocate ALL your objects up front and then never allocate anything else.</p>\n\n<p>It can be tricky, but it's not impossible by a long shot--turn on -verbose:gc and just remove \"New\"s and other things that allocate memory until you don't see any gcs at all.</p>\n\n<p>In a GUI, by the way, this means pre-creating all your GUI elements and never freeing them, just hiding and showing.  It also means no string manipulation (use StringBuffers and string constants only--this is the most difficult thing to solve because so many system calls rely on strings)</p>\n"}],"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2257,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":4767048,"answer_count":4,"score":7,"last_activity_date":1640281200,"creation_date":1295633789,"question_id":4762300,"body_markdown":"I&#39;ve noticed that when playing audio in java, MarkSweepCompact stage in gc is too long and results in short periods of silence, which is unacceptable. So I need to use a low pause gc. I&#39;ve tried Parallel and CMS, they seem to work better because I suppose the pause is shorter and they don&#39;t do full collection as often as the default one.\r\n\r\nSo far I&#39;ve tested my program with the following options for ParallelGC:\r\n\r\n    -XX:+UseParallelGC \r\n    -XX:MaxGCPauseMillis=70\r\n\r\nand for ConcurrentMarkSweep:\r\n\r\n    -XX:+UseConcMarkSweepGC\r\n    -XX:+CMSIncrementalMode\r\n    -XX:+CMSIncrementalPacing\r\n\r\nI also tried G1GC, but it&#39;s still experimental in java 6. Options for both modes:\r\n\r\n    -Xms15m\r\n    -Xmx40m\r\n    -XX:+UnlockExperimentalVMOptions\r\n    -XX:+CMSClassUnloadingEnabled\r\n    -XX:+TieredCompilation\r\n    -XX:+AggressiveOpts\r\n    -XX:+UseAdaptiveSizePolicy\r\n    -Dsun.java2d.noddraw=false\r\n    -Dswing.aatext=true\r\n    -XX:MaxPermSize=25m\r\n    -XX:MaxHeapFreeRatio=10\r\n    -XX:MinHeapFreeRatio=10\r\n\r\nWhich GC is better in this situation? Can any of these settings be optimized for best CPU performance and minimal memory usage as well?\r\n\r\n**EDIT** To recognize the pause I record time to write audio data to the output line, usually it&#39;s between 92 to 120 ms (I&#39;m writing 16384 bytes = ~92ms), ad when Full GC is run, it&#39;s 200+ ms:\r\n\r\n    65.424: [Full GC (System) [PSYoungGen: 872K-&gt;0K(2432K)] [PSOldGen: 12475K-&gt;12905K(16960K)] 13348K-&gt;12905K(19392K) [PSPermGen: 15051K-&gt;15051K(22272K)], 0.2145081 secs] [Times: user=0.20 sys=0.00, real=0.21 secs] \r\n    Was writing 16384 bytes, time to write 263 ms\r\n\r\n**EDIT2** Allocation pattern for my app is the following: it loads bunch of objects at startup, then it starts playing and I guess most of the objects after that are allocated by the gui, because staring/pausing the audio doesn&#39;t change the GC graph much. This is what visualgc shows with parallel gc:\r\n![alt text][1]\r\n\r\nThe graph starts at startup and I start playback. Labeled are\r\n\r\n1) sound delay and full gc, I think it increased Old size:\r\n\r\n    101.646: [Full GC [PSYoungGen: 64K-&gt;0K(6848K)] [PSOldGen: 15792K-&gt;12773K(19328K)] 15856K-&gt;12773K(26176K) [PSPermGen: 15042K-&gt;14898K(23808K)], 0.2411479 secs] [Times: user=0.19 sys=0.00, real=0.24 secs]\r\n\r\n2) I open the app window and pause playback. Nothing really changes, a bit later it increases eden size.\r\n\r\n3) I open the windows and start playback again.\r\n\r\nSo I need to increase allocated Old Gen size? How do I do that? I&#39;m running with -XX:NewRatio=10 and -XX:NewSize=10m\r\n\r\n\r\nThank you.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/CEJgH.png","title":"Tuning GC for Java audio application","body":"<p>I've noticed that when playing audio in java, MarkSweepCompact stage in gc is too long and results in short periods of silence, which is unacceptable. So I need to use a low pause gc. I've tried Parallel and CMS, they seem to work better because I suppose the pause is shorter and they don't do full collection as often as the default one.</p>\n\n<p>So far I've tested my program with the following options for ParallelGC:</p>\n\n<pre><code>-XX:+UseParallelGC \n-XX:MaxGCPauseMillis=70\n</code></pre>\n\n<p>and for ConcurrentMarkSweep:</p>\n\n<pre><code>-XX:+UseConcMarkSweepGC\n-XX:+CMSIncrementalMode\n-XX:+CMSIncrementalPacing\n</code></pre>\n\n<p>I also tried G1GC, but it's still experimental in java 6. Options for both modes:</p>\n\n<pre><code>-Xms15m\n-Xmx40m\n-XX:+UnlockExperimentalVMOptions\n-XX:+CMSClassUnloadingEnabled\n-XX:+TieredCompilation\n-XX:+AggressiveOpts\n-XX:+UseAdaptiveSizePolicy\n-Dsun.java2d.noddraw=false\n-Dswing.aatext=true\n-XX:MaxPermSize=25m\n-XX:MaxHeapFreeRatio=10\n-XX:MinHeapFreeRatio=10\n</code></pre>\n\n<p>Which GC is better in this situation? Can any of these settings be optimized for best CPU performance and minimal memory usage as well?</p>\n\n<p><strong>EDIT</strong> To recognize the pause I record time to write audio data to the output line, usually it's between 92 to 120 ms (I'm writing 16384 bytes = ~92ms), ad when Full GC is run, it's 200+ ms:</p>\n\n<pre><code>65.424: [Full GC (System) [PSYoungGen: 872K-&gt;0K(2432K)] [PSOldGen: 12475K-&gt;12905K(16960K)] 13348K-&gt;12905K(19392K) [PSPermGen: 15051K-&gt;15051K(22272K)], 0.2145081 secs] [Times: user=0.20 sys=0.00, real=0.21 secs] \nWas writing 16384 bytes, time to write 263 ms\n</code></pre>\n\n<p><strong>EDIT2</strong> Allocation pattern for my app is the following: it loads bunch of objects at startup, then it starts playing and I guess most of the objects after that are allocated by the gui, because staring/pausing the audio doesn't change the GC graph much. This is what visualgc shows with parallel gc:\n<img src=\"https://i.stack.imgur.com/CEJgH.png\" alt=\"alt text\"></p>\n\n<p>The graph starts at startup and I start playback. Labeled are</p>\n\n<p>1) sound delay and full gc, I think it increased Old size:</p>\n\n<pre><code>101.646: [Full GC [PSYoungGen: 64K-&gt;0K(6848K)] [PSOldGen: 15792K-&gt;12773K(19328K)] 15856K-&gt;12773K(26176K) [PSPermGen: 15042K-&gt;14898K(23808K)], 0.2411479 secs] [Times: user=0.19 sys=0.00, real=0.24 secs]\n</code></pre>\n\n<p>2) I open the app window and pause playback. Nothing really changes, a bit later it increases eden size.</p>\n\n<p>3) I open the windows and start playback again.</p>\n\n<p>So I need to increase allocated Old Gen size? How do I do that? I'm running with -XX:NewRatio=10 and -XX:NewSize=10m</p>\n\n<p>Thank you.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":6403632,"reputation":21,"user_id":4965557,"display_name":"rbncruise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640279242,"creation_date":1640279242,"answer_id":70465294,"question_id":70464929,"body_markdown":"OK - so I have fixed the problem by editing the names of the getters and setters in the Receipt class to be identical to the variable names. I&#39;m not sure why this workd but it did:\r\n\r\n    import com.google.firebase.Timestamp;\r\n\r\n    public class Receipt {\r\n        private String companyId, purchaseId, storeId, value;\r\n        Timestamp timestamp;\r\n\r\n        public Receipt() {\r\n        }\r\n\r\n        public Receipt(String companyId, String purchaseId, String storeId, Timestamp timestamp, String value) {\r\n            this.companyId = companyId;\r\n            this.purchaseId = purchaseId;\r\n            this.storeId = storeId;\r\n            this.timestamp = timestamp;\r\n            this.value = value;\r\n        }\r\n        \r\n        // updated from getCompany()\r\n        public String getCompanyId() {\r\n            return companyId;\r\n        }\r\n        \r\n        // updated from setCompany(String companyId)\r\n        public void setCompanyId(String companyId) {\r\n            this.companyId = companyId;\r\n        }\r\n\r\n        // updated from getPurchase()\r\n        public String getPurchaseId() {\r\n            return purchaseId;\r\n        }\r\n\r\n        // updated from setPurchase(String purchaseId)\r\n        public void setPurchaseId(String purchaseId) {\r\n            this.purchaseId = purchaseId;\r\n        }\r\n\r\n        // updated from setStore()\r\n        public String getStoreId() {\r\n            return storeId;\r\n        }\r\n\r\n        // updated from setStore(String storeId)\r\n        public void setStoreId(String storeId) {\r\n            this.storeId = storeId;\r\n        }\r\n\r\n        public Timestamp getTimestamp() {\r\n            return timestamp;\r\n        }\r\n\r\n        public void setTimestamp(Timestamp timestamp) {\r\n            this.timestamp = timestamp;\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n\r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n    }","title":"Why are some Firestore document values null when called from a FirestoreRecyclerAdapter? (No setter/field for ... found on class)","body":"<p>OK - so I have fixed the problem by editing the names of the getters and setters in the Receipt class to be identical to the variable names. I'm not sure why this workd but it did:</p>\n<pre><code>import com.google.firebase.Timestamp;\n\npublic class Receipt {\n    private String companyId, purchaseId, storeId, value;\n    Timestamp timestamp;\n\n    public Receipt() {\n    }\n\n    public Receipt(String companyId, String purchaseId, String storeId, Timestamp timestamp, String value) {\n        this.companyId = companyId;\n        this.purchaseId = purchaseId;\n        this.storeId = storeId;\n        this.timestamp = timestamp;\n        this.value = value;\n    }\n    \n    // updated from getCompany()\n    public String getCompanyId() {\n        return companyId;\n    }\n    \n    // updated from setCompany(String companyId)\n    public void setCompanyId(String companyId) {\n        this.companyId = companyId;\n    }\n\n    // updated from getPurchase()\n    public String getPurchaseId() {\n        return purchaseId;\n    }\n\n    // updated from setPurchase(String purchaseId)\n    public void setPurchaseId(String purchaseId) {\n        this.purchaseId = purchaseId;\n    }\n\n    // updated from setStore()\n    public String getStoreId() {\n        return storeId;\n    }\n\n    // updated from setStore(String storeId)\n    public void setStoreId(String storeId) {\n        this.storeId = storeId;\n    }\n\n    public Timestamp getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(Timestamp timestamp) {\n        this.timestamp = timestamp;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":6403632,"reputation":21,"user_id":4965557,"display_name":"rbncruise"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640280517,"creation_date":1640277287,"question_id":70464929,"body_markdown":"I have a Firestore collection of purchases, with document values for companyId, storeId, value, timestamp, and purchaseId. I am trying to call these in a FirestoreRecyclerAdapter in order to display a list of receipts. \r\n\r\nMy problem is that some of the document values (companyId, storId, purchaseId) are returning null, while some (timestamp, value) are returning the value as required. \r\n\r\nThe log says that for these values that return null, there is no setter/field for it on the class Receipt. I&#39;ve been trying to find answers for this on Stackexchange but I can&#39;t find one that is relevant. The closest I have found is that the class type the value is initiated in the class Receipt doesn&#39;t match the type from the database, but I double checked and they are strings in both cases.\r\n\r\nAny help with this would be much appreciated!\r\n\r\nHere is the Firestore structure:\r\n\r\n![Firestore Image][1]\r\n\r\nI have a Receipt class:\r\n\r\n    import com.google.firebase.Timestamp;\r\n\r\n    public class Receipt {\r\n        private String companyId, purchaseId, storeId, value;\r\n        Timestamp timestamp;\r\n\r\n        public Receipt() {\r\n        }\r\n\r\n        public Receipt(String companyId, String purchaseId, String storeId, Timestamp timestamp, String value) {\r\n            this.companyId = companyId;\r\n            this.purchaseId = purchaseId;\r\n            this.storeId = storeId;\r\n            this.timestamp = timestamp;\r\n            this.value = value;\r\n        }\r\n\r\n        public String getCompany() {\r\n            return companyId;\r\n        }\r\n\r\n        public void setCompany(String companyId) {\r\n            this.companyId = companyId;\r\n        }\r\n\r\n        public String getPurchase() {\r\n            return purchaseId;\r\n        }\r\n\r\n        public void setPurchase(String purchaseId) {\r\n            this.purchaseId = purchaseId;\r\n        }\r\n\r\n        public String getStore() {\r\n            return storeId;\r\n        }\r\n    \r\n        public void setStore(String storeId) {\r\n            this.storeId = storeId;\r\n        }\r\n\r\n        public Timestamp getTimestamp() {\r\n            return timestamp;\r\n        }\r\n\r\n        public void setTimestamp(Timestamp timestamp) {\r\n            this.timestamp = timestamp;\r\n        }\r\n\r\n        public String getValue() {\r\n            return value;\r\n        }\r\n\r\n        public void setValue(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n    }\r\n\r\nThere is a DisplayReceiptsViewHolder:\r\n\r\n    import android.view.View;\r\n    import android.widget.AdapterView;\r\n    import android.widget.Button;\r\n    import android.widget.ImageButton;\r\n    import android.widget.TextView;\r\n\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n\r\n    import com.dummies.rbncr.tapaidhscanner4.R;\r\n \r\n    public class DisplayReceiptsViewHolder extends RecyclerView.ViewHolder implements \r\n    View.OnClickListener {\r\n        public TextView date, company, amount;\r\n        public Button viewReceiptButton;\r\n        private AdapterView.OnItemClickListener itemClickListener;\r\n\r\n        public DisplayReceiptsViewHolder(View itemView){\r\n            super(itemView);\r\n            date = itemView.findViewById(R.id.receipt_list_date_tv);\r\n            company = itemView.findViewById(R.id.receipt_list_company_tv);\r\n            amount = itemView.findViewById(R.id.receipt_list_amount_tv);\r\n            viewReceiptButton = itemView.findViewById(R.id.view_receipt_list_btn);\r\n        }\r\n        @Override\r\n        public void onClick(View v) {\r\n            //itemClickListener.onItemClick(v, v, getAdapterPosition(), false);\r\n        }\r\n\r\n        public void setItemClickListener(AdapterView.OnItemClickListener itemClickListener) {\r\n            this.itemClickListener = itemClickListener;\r\n        }\r\n    }\r\n\r\nAnd then in the DisplayReceiptsActivity I am just retrieving the values for now and logging them to the console:\r\n\r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.recyclerview.widget.LinearLayoutManager;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n\r\n    import android.annotation.SuppressLint;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n\r\n    import com.dummies.rbncr.tapaidhscanner4.Models.Receipt;\r\n    import com.dummies.rbncr.tapaidhscanner4.ViewHolders.DisplayReceiptsViewHolder;\r\n    import com.firebase.ui.firestore.FirestoreRecyclerAdapter;\r\n    import com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\n    import com.google.firebase.Timestamp;\r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    import com.google.firebase.auth.FirebaseUser;\r\n    import com.google.firebase.firestore.FirebaseFirestore;\r\n    import com.google.firebase.firestore.Query;\r\n\r\n\r\n    public class DisplayReceiptsActivity extends AppCompatActivity {\r\n        private RecyclerView recyclerView;\r\n        FirestoreRecyclerAdapter&lt;Receipt, DisplayReceiptsViewHolder&gt; receiptAdapter;\r\n\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_display_receipts);\r\n\r\n            recyclerView = findViewById(R.id.display_receipt_list);\r\n\r\n            RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(this);\r\n            recyclerView.setLayoutManager(layoutManager);\r\n\r\n            Query receiptsQuery = FirebaseFirestore.getInstance()\r\n                    .collection(&quot;Users&quot;)\r\n                    .document(currentUser.getUid())\r\n                    .collection(&quot;Purchases&quot;);\r\n\r\n            FirestoreRecyclerOptions&lt;Receipt&gt; receiptOptions = new FirestoreRecyclerOptions.Builder&lt;Receipt&gt;()\r\n                    .setQuery(receiptsQuery, Receipt.class)\r\n                    .build();\r\n\r\n            receiptAdapter = new FirestoreRecyclerAdapter&lt;Receipt, DisplayReceiptsViewHolder&gt;(receiptOptions) {\r\n                @SuppressLint(&quot;SetTextI18n&quot;)\r\n                @Override\r\n                protected void onBindViewHolder(@NonNull DisplayReceiptsViewHolder displayReceiptsViewHolder,\r\n                                            int i,\r\n                                            @NonNull Receipt receipt) {\r\n\r\n                    String company = receipt.getCompany();\r\n                    displayReceiptsViewHolder.company.setText(company);\r\n                    Log.d(&quot;TESTING&quot;, &quot;Company = &quot; + company);\r\n    \r\n                    String purchaseId = receipt.getPurchase();\r\n                    Log.d(&quot;TESTING&quot;, &quot;Purchase = &quot; + purchaseId);\r\n\r\n                    String storeId = receipt.getStore();\r\n                    Log.d(&quot;TESTING&quot;, &quot;Store = &quot; + storeId);\r\n\r\n                    Timestamp timestamp = receipt.getTimestamp();\r\n                    displayReceiptsViewHolder.date.setText(timestamp.toString());\r\n                    Log.d(&quot;TESTING&quot;, &quot;Timestamp = &quot; + timestamp);\r\n\r\n                    String value = receipt.getValue();\r\n                    displayReceiptsViewHolder.amount.setText(value);\r\n                    Log.d(&quot;TESTING&quot;, &quot;Value = &quot; + value);\r\n                }\r\n\r\n                @NonNull\r\n                @Override\r\n                public DisplayReceiptsViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n                    View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.receipt_list_item,\r\n                        parent,\r\n                        false);\r\n                    return new DisplayReceiptsViewHolder(view);\r\n                }\r\n            };\r\n        }\r\n\r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            recyclerView.setAdapter(receiptAdapter);\r\n            receiptAdapter.startListening();\r\n        }\r\n\r\n        @Override\r\n        protected void onStop() {\r\n            super.onStop();\r\n            receiptAdapter.stopListening();\r\n        }\r\n\r\n        public void returnHome(View view) {\r\n            Intent intent = new Intent(DisplayReceiptsActivity.this, ShopHomeActivity.class);\r\n            startActivity(intent);\r\n        }\r\n\r\n        @Override\r\n        public void onBackPressed(){\r\n            Intent intent = new Intent(DisplayReceiptsActivity.this, ShopHomeActivity.class);\r\n            startActivity(intent);\r\n        }\r\n\r\n    }\r\n\r\nHere is a copy of the log:\r\n\r\n    2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for companyId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for purchaseId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for storeId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Company = null\r\n    2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Purchase = null\r\n    2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Store = null\r\n    2021-12-23 15:48:56.332 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Timestamp = Timestamp(seconds=1640270467, nanoseconds=629000000)\r\n    2021-12-23 15:48:56.332 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Value = 0.75\r\n    2021-12-23 15:48:56.358 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for companyId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.358 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for purchaseId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.359 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for storeId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\r\n    2021-12-23 15:48:56.359 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Company = null\r\n    2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Purchase = null\r\n    2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Store = null\r\n    2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Timestamp = Timestamp(seconds=1640273317, nanoseconds=835000000)\r\n    2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Value = 0.75\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6OLCe.png","title":"Why are some Firestore document values null when called from a FirestoreRecyclerAdapter? (No setter/field for ... found on class)","body":"<p>I have a Firestore collection of purchases, with document values for companyId, storeId, value, timestamp, and purchaseId. I am trying to call these in a FirestoreRecyclerAdapter in order to display a list of receipts.</p>\n<p>My problem is that some of the document values (companyId, storId, purchaseId) are returning null, while some (timestamp, value) are returning the value as required.</p>\n<p>The log says that for these values that return null, there is no setter/field for it on the class Receipt. I've been trying to find answers for this on Stackexchange but I can't find one that is relevant. The closest I have found is that the class type the value is initiated in the class Receipt doesn't match the type from the database, but I double checked and they are strings in both cases.</p>\n<p>Any help with this would be much appreciated!</p>\n<p>Here is the Firestore structure:</p>\n<p><img src=\"https://i.stack.imgur.com/6OLCe.png\" alt=\"Firestore Image\" /></p>\n<p>I have a Receipt class:</p>\n<pre><code>import com.google.firebase.Timestamp;\n\npublic class Receipt {\n    private String companyId, purchaseId, storeId, value;\n    Timestamp timestamp;\n\n    public Receipt() {\n    }\n\n    public Receipt(String companyId, String purchaseId, String storeId, Timestamp timestamp, String value) {\n        this.companyId = companyId;\n        this.purchaseId = purchaseId;\n        this.storeId = storeId;\n        this.timestamp = timestamp;\n        this.value = value;\n    }\n\n    public String getCompany() {\n        return companyId;\n    }\n\n    public void setCompany(String companyId) {\n        this.companyId = companyId;\n    }\n\n    public String getPurchase() {\n        return purchaseId;\n    }\n\n    public void setPurchase(String purchaseId) {\n        this.purchaseId = purchaseId;\n    }\n\n    public String getStore() {\n        return storeId;\n    }\n\n    public void setStore(String storeId) {\n        this.storeId = storeId;\n    }\n\n    public Timestamp getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(Timestamp timestamp) {\n        this.timestamp = timestamp;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n}\n</code></pre>\n<p>There is a DisplayReceiptsViewHolder:</p>\n<pre><code>import android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.Button;\nimport android.widget.ImageButton;\nimport android.widget.TextView;\n\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport com.dummies.rbncr.tapaidhscanner4.R;\n\npublic class DisplayReceiptsViewHolder extends RecyclerView.ViewHolder implements \nView.OnClickListener {\n    public TextView date, company, amount;\n    public Button viewReceiptButton;\n    private AdapterView.OnItemClickListener itemClickListener;\n\n    public DisplayReceiptsViewHolder(View itemView){\n        super(itemView);\n        date = itemView.findViewById(R.id.receipt_list_date_tv);\n        company = itemView.findViewById(R.id.receipt_list_company_tv);\n        amount = itemView.findViewById(R.id.receipt_list_amount_tv);\n        viewReceiptButton = itemView.findViewById(R.id.view_receipt_list_btn);\n    }\n    @Override\n    public void onClick(View v) {\n        //itemClickListener.onItemClick(v, v, getAdapterPosition(), false);\n    }\n\n    public void setItemClickListener(AdapterView.OnItemClickListener itemClickListener) {\n        this.itemClickListener = itemClickListener;\n    }\n}\n</code></pre>\n<p>And then in the DisplayReceiptsActivity I am just retrieving the values for now and logging them to the console:</p>\n<pre><code>import androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\n\nimport com.dummies.rbncr.tapaidhscanner4.Models.Receipt;\nimport com.dummies.rbncr.tapaidhscanner4.ViewHolders.DisplayReceiptsViewHolder;\nimport com.firebase.ui.firestore.FirestoreRecyclerAdapter;\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\nimport com.google.firebase.Timestamp;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.Query;\n\n\npublic class DisplayReceiptsActivity extends AppCompatActivity {\n    private RecyclerView recyclerView;\n    FirestoreRecyclerAdapter&lt;Receipt, DisplayReceiptsViewHolder&gt; receiptAdapter;\n\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\n    FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_display_receipts);\n\n        recyclerView = findViewById(R.id.display_receipt_list);\n\n        RecyclerView.LayoutManager layoutManager = new LinearLayoutManager(this);\n        recyclerView.setLayoutManager(layoutManager);\n\n        Query receiptsQuery = FirebaseFirestore.getInstance()\n                .collection(&quot;Users&quot;)\n                .document(currentUser.getUid())\n                .collection(&quot;Purchases&quot;);\n\n        FirestoreRecyclerOptions&lt;Receipt&gt; receiptOptions = new FirestoreRecyclerOptions.Builder&lt;Receipt&gt;()\n                .setQuery(receiptsQuery, Receipt.class)\n                .build();\n\n        receiptAdapter = new FirestoreRecyclerAdapter&lt;Receipt, DisplayReceiptsViewHolder&gt;(receiptOptions) {\n            @SuppressLint(&quot;SetTextI18n&quot;)\n            @Override\n            protected void onBindViewHolder(@NonNull DisplayReceiptsViewHolder displayReceiptsViewHolder,\n                                        int i,\n                                        @NonNull Receipt receipt) {\n\n                String company = receipt.getCompany();\n                displayReceiptsViewHolder.company.setText(company);\n                Log.d(&quot;TESTING&quot;, &quot;Company = &quot; + company);\n\n                String purchaseId = receipt.getPurchase();\n                Log.d(&quot;TESTING&quot;, &quot;Purchase = &quot; + purchaseId);\n\n                String storeId = receipt.getStore();\n                Log.d(&quot;TESTING&quot;, &quot;Store = &quot; + storeId);\n\n                Timestamp timestamp = receipt.getTimestamp();\n                displayReceiptsViewHolder.date.setText(timestamp.toString());\n                Log.d(&quot;TESTING&quot;, &quot;Timestamp = &quot; + timestamp);\n\n                String value = receipt.getValue();\n                displayReceiptsViewHolder.amount.setText(value);\n                Log.d(&quot;TESTING&quot;, &quot;Value = &quot; + value);\n            }\n\n            @NonNull\n            @Override\n            public DisplayReceiptsViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n                View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.receipt_list_item,\n                    parent,\n                    false);\n                return new DisplayReceiptsViewHolder(view);\n            }\n        };\n    }\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        recyclerView.setAdapter(receiptAdapter);\n        receiptAdapter.startListening();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        receiptAdapter.stopListening();\n    }\n\n    public void returnHome(View view) {\n        Intent intent = new Intent(DisplayReceiptsActivity.this, ShopHomeActivity.class);\n        startActivity(intent);\n    }\n\n    @Override\n    public void onBackPressed(){\n        Intent intent = new Intent(DisplayReceiptsActivity.this, ShopHomeActivity.class);\n        startActivity(intent);\n    }\n\n}\n</code></pre>\n<p>Here is a copy of the log:</p>\n<pre><code>2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for companyId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for purchaseId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.330 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for storeId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Company = null\n2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Purchase = null\n2021-12-23 15:48:56.331 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Store = null\n2021-12-23 15:48:56.332 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Timestamp = Timestamp(seconds=1640270467, nanoseconds=629000000)\n2021-12-23 15:48:56.332 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Value = 0.75\n2021-12-23 15:48:56.358 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for companyId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.358 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for purchaseId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.359 2462-2462/com.dummies.rbncr.tapaidhscanner4 W/Firestore: (24.0.0) [CustomClassMapper]: No setter/field for storeId found on class com.dummies.rbncr.tapaidhscanner4.Models.Receipt\n2021-12-23 15:48:56.359 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Company = null\n2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Purchase = null\n2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Store = null\n2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Timestamp = Timestamp(seconds=1640273317, nanoseconds=835000000)\n2021-12-23 15:48:56.360 2462-2462/com.dummies.rbncr.tapaidhscanner4 D/TESTING: Value = 0.75\n</code></pre>\n"},{"tags":["java","arrays","stack-overflow"],"comments":[{"owner":{"account_id":1083854,"reputation":13775,"user_id":1080064,"accept_rate":43,"display_name":"tkausl"},"score":4,"creation_date":1547591249,"post_id":54207760,"comment_id":95242147,"body_markdown":"`I&#39;m very confused because the mathematical meaning of the two of them is the same.` no it&#39;s not.","body":"<code>I&#39;m very confused because the mathematical meaning of the two of them is the same.</code> no it&#39;s not."},{"owner":{"display_name":"user330315"},"score":3,"creation_date":1547591250,"post_id":54207760,"comment_id":95242148,"body_markdown":"Please [edit] your question and show us the complete code of your method. Not just one line ([edit] your question, do not put code in comments)","body":"Please <a href=\"https://stackoverflow.com/posts/54207760/edit\">edit</a> your question and show us the complete code of your method. Not just one line (<a href=\"https://stackoverflow.com/posts/54207760/edit\">edit</a> your question, do not put code in comments)"},{"owner":{"account_id":3980402,"reputation":12987,"user_id":3282436,"accept_rate":79,"display_name":"0x5453"},"score":3,"creation_date":1547591394,"post_id":54207760,"comment_id":95242201,"body_markdown":"Just to be clear, what you are talking about is *integer overflow*, not a *stack overflow*.  If you are receiving a `StackOverflowError`, then your problem is somewhere else.","body":"Just to be clear, what you are talking about is <i>integer overflow</i>, not a <i>stack overflow</i>.  If you are receiving a <code>StackOverflowError</code>, then your problem is somewhere else."},{"owner":{"account_id":9165235,"reputation":15414,"user_id":6815131,"display_name":"Joe C"},"score":0,"creation_date":1547591404,"post_id":54207760,"comment_id":95242204,"body_markdown":"That line, on its own, will not cause a `StackOverflowError`.","body":"That line, on its own, will not cause a <code>StackOverflowError</code>."},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1547591548,"post_id":54207760,"comment_id":95242268,"body_markdown":"Why are you not satisfied with the answers to the question you linked to?","body":"Why are you not satisfied with the answers to the question you linked to?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1547591830,"post_id":54207760,"comment_id":95242366,"body_markdown":"No, it is a `StackOverflowError`.  It&#39;s because integer division on negative numbers rounds towards zero.  So when you get to `right = 1 + left`, then `mid` comes out the same as `right`.  Depending on how the REST of your code handles this, you might recurse endlessly.  Now - if you show ALL of your code (not just one line), somebody might be able to suggest a fix.","body":"No, it is a <code>StackOverflowError</code>.  It&#39;s because integer division on negative numbers rounds towards zero.  So when you get to <code>right = 1 + left</code>, then <code>mid</code> comes out the same as <code>right</code>.  Depending on how the REST of your code handles this, you might recurse endlessly.  Now - if you show ALL of your code (not just one line), somebody might be able to suggest a fix."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1547591974,"post_id":54207760,"comment_id":95242418,"body_markdown":"@PM77-1 presumably because the linked question is about Integer overflows, but OP is getting a Stack overflow, which is entirely different.","body":"@PM77-1 presumably because the linked question is about Integer overflows, but OP is getting a Stack overflow, which is entirely different."},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1547592103,"post_id":54207760,"comment_id":95242461,"body_markdown":"@tkausl They _are_ equal mathematically. Both shorten to `int mid = (left + right) / 2`.","body":"@tkausl They <i>are</i> equal mathematically. Both shorten to <code>int mid = (left + right) &#47; 2</code>."},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1547592335,"post_id":54207760,"comment_id":95242540,"body_markdown":"@DawoodibnKareem Thanks for your response, I just uploaded the entire code.","body":"@DawoodibnKareem Thanks for your response, I just uploaded the entire code."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1547592349,"post_id":54207760,"comment_id":95242544,"body_markdown":"@marstran, No they are NOT mathematically equal.  If `left = 0` and `right = 1`, then `(left - right)/2 + right` is `1` and `left + (right - left) / 2` is `0`.","body":"@marstran, No they are NOT mathematically equal.  If <code>left = 0</code> and <code>right = 1</code>, then <code>(left - right)&#47;2 + right</code> is <code>1</code> and <code>left + (right - left) &#47; 2</code> is <code>0</code>."},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1547592406,"post_id":54207760,"comment_id":95242563,"body_markdown":"@tkausl Thank you","body":"@tkausl Thank you"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1547592569,"post_id":54207760,"comment_id":95242617,"body_markdown":"(Note, to avoid the integer overflow for positive signed integers you should write it as `int mid = (left+right) &gt;&gt;&gt; 1;`. Josh Bloch has written about this in relation to the collections library (binary search I guess, and/or sorts). Integer overflows are often the underlying cause of buffer overflows (typically caught in Java) including stack buffer overflows (not Java), but can manifest in other ways. Dealing with integer overflows with &quot;big integers&quot; is not fun.)","body":"(Note, to avoid the integer overflow for positive signed integers you should write it as <code>int mid = (left+right) &gt;&gt;&gt; 1;</code>. Josh Bloch has written about this in relation to the collections library (binary search I guess, and/or sorts). Integer overflows are often the underlying cause of buffer overflows (typically caught in Java) including stack buffer overflows (not Java), but can manifest in other ways. Dealing with integer overflows with &quot;big integers&quot; is not fun.)"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1547592580,"post_id":54207760,"comment_id":95242622,"body_markdown":"And `(left + right) / 2` is different again, because of the integer overflow problem, as explained in the linked question.","body":"And <code>(left + right) &#47; 2</code> is different again, because of the integer overflow problem, as explained in the linked question."},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":1,"creation_date":1547592689,"post_id":54207760,"comment_id":95242659,"body_markdown":"@DawoodibnKareem Calculate that again. `(left - right) / 2 + right` = `(0 - 1) / 2 + 1` = `0.5 + 1` = `0.5`. And `left + (right - left) / 2` = `0 + (1 - 0) / 2` = `1 / 2` = `0.5`. So _mathematically_, they are equal. With integer arithmetic however...","body":"@DawoodibnKareem Calculate that again. <code>(left - right) &#47; 2 + right</code> = <code>(0 - 1) &#47; 2 + 1</code> = <code>0.5 + 1</code> = <code>0.5</code>. And <code>left + (right - left) &#47; 2</code> = <code>0 + (1 - 0) &#47; 2</code> = <code>1 &#47; 2</code> = <code>0.5</code>. So <i>mathematically</i>, they are equal. With integer arithmetic however..."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1547592775,"post_id":54207760,"comment_id":95242693,"body_markdown":"Yeah, OP is doing integer arithmetic.  `1 / 2` is NOT `0.5` in Java.","body":"Yeah, OP is doing integer arithmetic.  <code>1 &#47; 2</code> is NOT <code>0.5</code> in Java."},{"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"score":0,"creation_date":1547592810,"post_id":54207760,"comment_id":95242707,"body_markdown":"@DawoodibnKareem That&#39;s why I specified _mathematically_....","body":"@DawoodibnKareem That&#39;s why I specified <i>mathematically</i>...."},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1547592882,"post_id":54207760,"comment_id":95242728,"body_markdown":"@DawoodibnKareem Thank you Kareem, that&#39;s helpful.","body":"@DawoodibnKareem Thank you Kareem, that&#39;s helpful."},{"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"score":0,"creation_date":1547592918,"post_id":54207760,"comment_id":95242739,"body_markdown":"@marstran Thank you, I guess I should read some materials about integer overflow.","body":"@marstran Thank you, I guess I should read some materials about integer overflow."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1547593408,"post_id":54207760,"comment_id":95242882,"body_markdown":"The integer overflow only becomes relevant when `left` or `right` get over a billion.  If you&#39;ve got an array with a billion elements, you&#39;re likely to have other problems.  So the advice about NOT writing `(left + right)/2`, while technically correct, is not particularly useful in the &quot;real world&quot;.","body":"The integer overflow only becomes relevant when <code>left</code> or <code>right</code> get over a billion.  If you&#39;ve got an array with a billion elements, you&#39;re likely to have other problems.  So the advice about NOT writing <code>(left + right)&#47;2</code>, while technically correct, is not particularly useful in the &quot;real world&quot;."}],"answers":[{"tags":[],"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1547592944,"creation_date":1547592944,"answer_id":54208031,"question_id":54207760,"body_markdown":"As you run this, sooner or later, it&#39;s likely that `left` will be one less than `right` - for example, maybe `left = 3` and `right = 4`.\r\n\r\nIn that case, `(left - right) / 2` and `(right - left) / 2` both evaluate to `0`, since integer division rounds towards zero.  So, if you have\r\n\r\n    int mid = (left - right)/2 + right;\r\n    sort(array, helper, left, mid);\r\n\r\nwithin your call to `sort(array, helper, left, right)`, then you&#39;re repeating a call with the exact same values.  This causes infinite recursion - a `StackOverflowError`.\r\n\r\nBut when you have\r\n\r\n    int mid = left + (right - left)/2;\r\n    sort(array, helper, left, mid); \r\n\r\nthen you&#39;re repeating a call with different values, so the recursion has a chance to end.","title":"Why &quot;int mid = (left - right)/2 + right&quot; will cause stack overflow?","body":"<p>As you run this, sooner or later, it's likely that <code>left</code> will be one less than <code>right</code> - for example, maybe <code>left = 3</code> and <code>right = 4</code>.</p>\n\n<p>In that case, <code>(left - right) / 2</code> and <code>(right - left) / 2</code> both evaluate to <code>0</code>, since integer division rounds towards zero.  So, if you have</p>\n\n<pre><code>int mid = (left - right)/2 + right;\nsort(array, helper, left, mid);\n</code></pre>\n\n<p>within your call to <code>sort(array, helper, left, right)</code>, then you're repeating a call with the exact same values.  This causes infinite recursion - a <code>StackOverflowError</code>.</p>\n\n<p>But when you have</p>\n\n<pre><code>int mid = left + (right - left)/2;\nsort(array, helper, left, mid); \n</code></pre>\n\n<p>then you're repeating a call with different values, so the recursion has a chance to end.</p>\n"},{"tags":[],"owner":{"account_id":18377134,"reputation":1,"user_id":13385984,"display_name":"Tam Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640279807,"creation_date":1640279807,"answer_id":70465406,"question_id":54207760,"body_markdown":"Initially, you have `left &lt; right`. And, of course, `right - left &gt; 0`, and furthermore `left + (right - left) = right` (follows from basic algebra).\r\n\r\nAnd consequently `left + (right - left) / 2 &lt;= right`. So no overflow can happen since every step of the operation is bounded by the value of right.","title":"Why &quot;int mid = (left - right)/2 + right&quot; will cause stack overflow?","body":"<p>Initially, you have <code>left &lt; right</code>. And, of course, <code>right - left &gt; 0</code>, and furthermore <code>left + (right - left) = right</code> (follows from basic algebra).</p>\n<p>And consequently <code>left + (right - left) / 2 &lt;= right</code>. So no overflow can happen since every step of the operation is bounded by the value of right.</p>\n"}],"owner":{"account_id":12190203,"reputation":444,"user_id":8898054,"display_name":"Meilan"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1031,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"accepted_answer_id":54208031,"answer_count":2,"score":-4,"last_activity_date":1640279807,"creation_date":1547591146,"question_id":54207760,"body_markdown":"I wrote the code of merge sort today, and I meet a StackOverFlow error when I run `int mid = (left - right)/2 + right;`. But when I use `int mid = left + (right - left) / 2;` everything is fine. I&#39;m very confused because the mathematical meaning of the two of them is the same(if it&#39;s not, why?).\r\n\r\nI have seen this question but I&#39;m not sure it answers this problem.\r\n&lt;https://stackoverflow.com/questions/27167943/why-leftright-left-2-will-not-overflow&gt;\r\n\r\nHere&#39;s my code，I am sorry that I did not upload the code before.\r\n\r\n    import java.util.Arrays;\r\n\r\n    public class Solution {\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tint[] array = {3,5,1,2,4,8};\r\n\t\t\tint[] result = mergeSort(array);\r\n\t\t\tSystem.out.println(Arrays.toString(result));\r\n\t\t}\r\n\t\r\n\t\tpublic static int[] mergeSort(int[] array) {\r\n\t\t\tif (array == null || array.length &lt;= 1) {\r\n\t\t\t\treturn array;\r\n\t\t\t}\r\n\t\t\tint[] helper = new int[array.length];\r\n\t\t\tsort(array, helper, 0, array.length - 1);\r\n\t\t\treturn array;\r\n\t\t}\r\n\r\n\t\tpublic static void sort(int[] array, int[] helper, int left, int right) {\r\n\t\t\tif (left &gt;= right) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tint mid = (left - right)/2 + right;\r\n\t\t\t//int mid = left + (right - left) / 2;\r\n\t\t\tsort(array, helper, left, mid);\r\n\t\t\tsort(array, helper, mid + 1, right);\r\n\r\n\t\t\tcombine(array, helper, left, mid, right);\r\n\t\t}\r\n\r\n\t\tpublic static void combine(int[] array, int[] helper, int left, int mid, int right) {\r\n\t\t\tfor (int i = left; i &lt;= right; i++) {\r\n\t\t\t\thelper[i] = array[i];\r\n\t\t\t}\r\n\r\n\t\t\tint leftIndex = left;\r\n\t\t\tint rightIndex = mid + 1;\r\n\t\t\twhile (leftIndex &lt;= mid &amp;&amp; rightIndex &lt;= right) {\r\n\t\t\t\tif (helper[leftIndex] &lt;= helper[rightIndex]) {\r\n\t\t\t\t\tarray[left] = helper[leftIndex];\r\n\t\t\t\t\tleft++;\r\n\t\t\t\t\tleftIndex++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarray[left] = helper[rightIndex];\r\n\t\t\t\t\tleft++;\r\n\t\t\t\t\trightIndex++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile (leftIndex &lt;= mid) {\r\n\t\t\t\tarray[left] = helper[leftIndex];\r\n\t\t\t\tleft++;\r\n\t\t\t\tleftIndex++;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n","title":"Why &quot;int mid = (left - right)/2 + right&quot; will cause stack overflow?","body":"<p>I wrote the code of merge sort today, and I meet a StackOverFlow error when I run <code>int mid = (left - right)/2 + right;</code>. But when I use <code>int mid = left + (right - left) / 2;</code> everything is fine. I'm very confused because the mathematical meaning of the two of them is the same(if it's not, why?).</p>\n\n<p>I have seen this question but I'm not sure it answers this problem.\n<a href=\"https://stackoverflow.com/questions/27167943/why-leftright-left-2-will-not-overflow\">why left+(right-left)/2 will not overflow?</a></p>\n\n<p>Here's my code，I am sorry that I did not upload the code before.</p>\n\n<pre><code>import java.util.Arrays;\n\npublic class Solution {\n    public static void main(String[] args) {\n        int[] array = {3,5,1,2,4,8};\n        int[] result = mergeSort(array);\n        System.out.println(Arrays.toString(result));\n    }\n\n    public static int[] mergeSort(int[] array) {\n        if (array == null || array.length &lt;= 1) {\n            return array;\n        }\n        int[] helper = new int[array.length];\n        sort(array, helper, 0, array.length - 1);\n        return array;\n    }\n\n    public static void sort(int[] array, int[] helper, int left, int right) {\n        if (left &gt;= right) {\n            return;\n        }\n        int mid = (left - right)/2 + right;\n        //int mid = left + (right - left) / 2;\n        sort(array, helper, left, mid);\n        sort(array, helper, mid + 1, right);\n\n        combine(array, helper, left, mid, right);\n    }\n\n    public static void combine(int[] array, int[] helper, int left, int mid, int right) {\n        for (int i = left; i &lt;= right; i++) {\n            helper[i] = array[i];\n        }\n\n        int leftIndex = left;\n        int rightIndex = mid + 1;\n        while (leftIndex &lt;= mid &amp;&amp; rightIndex &lt;= right) {\n            if (helper[leftIndex] &lt;= helper[rightIndex]) {\n                array[left] = helper[leftIndex];\n                left++;\n                leftIndex++;\n            } else {\n                array[left] = helper[rightIndex];\n                left++;\n                rightIndex++;\n            }\n        }\n\n        while (leftIndex &lt;= mid) {\n            array[left] = helper[leftIndex];\n            left++;\n            leftIndex++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","caffeine-cache"],"answers":[{"tags":[],"owner":{"account_id":12657811,"reputation":27,"user_id":9199774,"display_name":"Marcos Oleiro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640279787,"creation_date":1640279787,"answer_id":70465405,"question_id":70463979,"body_markdown":"Found a solution:\r\n\r\nCreate a classe that implements HandlerInterceptor and use preHandle method.\r\n\r\n    @Component\r\n    public class CheckHeaderInterceptor implements HandlerInterceptor {\r\n\r\n\t  @Override\r\n\t  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\r\n\t\t\tthrows Exception {\r\n\t\t\r\n      // validate what you want, on error return false\r\n      // if everything its ok, return true\r\n\t  }\r\n    }\r\n\r\nThen register the handler with:\r\n\r\n    public class WebMvcConfig implements WebMvcConfigurer {\r\n\r\n\t@Autowired\r\n\tprivate CheckHeaderInterceptor interceptor;\r\n\t\r\n\t@Override\r\n\tpublic void addInterceptors(InterceptorRegistry registry) {\r\n\t    registry.addInterceptor(interceptor).addPathPatterns(&quot;url that you wannna use handler&quot;);\r\n\t }\r\n    }","title":"Spring boot + Caffeine cache + Check header","body":"<p>Found a solution:</p>\n<p>Create a classe that implements HandlerInterceptor and use preHandle method.</p>\n<pre><code>@Component\npublic class CheckHeaderInterceptor implements HandlerInterceptor {\n\n  @Override\n  public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n        throws Exception {\n    \n  // validate what you want, on error return false\n  // if everything its ok, return true\n  }\n}\n</code></pre>\n<p>Then register the handler with:</p>\n<pre><code>public class WebMvcConfig implements WebMvcConfigurer {\n\n@Autowired\nprivate CheckHeaderInterceptor interceptor;\n\n@Override\npublic void addInterceptors(InterceptorRegistry registry) {\n    registry.addInterceptor(interceptor).addPathPatterns(&quot;url that you wannna use handler&quot;);\n }\n}\n</code></pre>\n"}],"owner":{"account_id":12657811,"reputation":27,"user_id":9199774,"display_name":"Marcos Oleiro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70465405,"answer_count":1,"score":1,"last_activity_date":1640279787,"creation_date":1640272394,"question_id":70463979,"body_markdown":"i&#39;m trying to use cache (caffeine) with Spring boot and im having a problem. I need to check the header &quot;header-name&quot; in every call but application is caching it so after first request with the right header, dont matter what header i send and the application will not check it and is just returning data from the cache, is there anyway that i can force spring to check header and then get data from cache?\r\n\r\n     @GetMapping(&quot;/request-a&quot;)\r\n     @Cacheable(cacheNames = &quot;cachename&quot;, key = &quot;#root.methodName&quot;)\r\n     public ResponseEntity&lt;?&gt; makeRequest(@RequestHeader(&quot;header-name&quot;) String headerName) {\r\n    \r\n    \r\n        this.authConfig.headerCheck(headerName);\r\n\r\n        /*\r\n        code\r\n        */    \r\n     }\r\n\r\nI already used header &quot;Cache-Control:no-cache&quot; and didnt resolve my problem.\r\n\r\nThanks in advance.\r\n\r\nEdit1: method &quot;headerCheck&quot; just check if its equal to another String  or not null.","title":"Spring boot + Caffeine cache + Check header","body":"<p>i'm trying to use cache (caffeine) with Spring boot and im having a problem. I need to check the header &quot;header-name&quot; in every call but application is caching it so after first request with the right header, dont matter what header i send and the application will not check it and is just returning data from the cache, is there anyway that i can force spring to check header and then get data from cache?</p>\n<pre><code> @GetMapping(&quot;/request-a&quot;)\n @Cacheable(cacheNames = &quot;cachename&quot;, key = &quot;#root.methodName&quot;)\n public ResponseEntity&lt;?&gt; makeRequest(@RequestHeader(&quot;header-name&quot;) String headerName) {\n\n\n    this.authConfig.headerCheck(headerName);\n\n    /*\n    code\n    */    \n }\n</code></pre>\n<p>I already used header &quot;Cache-Control:no-cache&quot; and didnt resolve my problem.</p>\n<p>Thanks in advance.</p>\n<p>Edit1: method &quot;headerCheck&quot; just check if its equal to another String  or not null.</p>\n"},{"tags":["python","java","html","selenium","flexbox"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1640251162,"post_id":70459859,"comment_id":124552036,"body_markdown":"have you tried to add some wait / delay before executing those actions? Not implicit wait but explicit wait of element visibility or just a dummy pause to make sure the page is 100% completely loaded?","body":"have you tried to add some wait / delay before executing those actions? Not implicit wait but explicit wait of element visibility or just a dummy pause to make sure the page is 100% completely loaded?"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1640251332,"post_id":70459859,"comment_id":124552103,"body_markdown":"Yes. I tried but didn&#39;t added in question.","body":"Yes. I tried but didn&#39;t added in question."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1640251543,"post_id":70459859,"comment_id":124552186,"body_markdown":"And this didn&#39;t resolve the issue at all?","body":"And this didn&#39;t resolve the issue at all?"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1640251611,"post_id":70459859,"comment_id":124552202,"body_markdown":"Exactly. You can see the reference links what I added in question.","body":"Exactly. You can see the reference links what I added in question."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":1,"creation_date":1640251727,"post_id":70459859,"comment_id":124552240,"body_markdown":"OK, I see, just wanted to be completely sure. That&#39;s an interesting question!","body":"OK, I see, just wanted to be completely sure. That&#39;s an interesting question!"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":1,"creation_date":1640256067,"post_id":70459859,"comment_id":124553734,"body_markdown":"Incase you wish to reduce the scope of the question to a specific usecase instead of 2 usecases, I would like to attempt to answer :) (currently don&#39;t have a IDE for Java, so answer would be Python based)","body":"Incase you wish to reduce the scope of the question to a specific usecase instead of 2 usecases, I would like to attempt to answer :) (currently don&#39;t have a IDE for Java, so answer would be Python based)"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1640257675,"post_id":70459859,"comment_id":124554299,"body_markdown":"Sure @DebanjanB. Any use case is fine for me and I would like to know way of approach to solve this.","body":"Sure @DebanjanB. Any use case is fine for me and I would like to know way of approach to solve this."},{"owner":{"account_id":6946971,"reputation":10284,"user_id":5331061,"accept_rate":75,"display_name":"Gurmanjot Singh"},"score":0,"creation_date":1640267345,"post_id":70459859,"comment_id":124557350,"body_markdown":"@NandanA In your Example 1, your code does enter a value but that value disappears quickly as it is not a valid Address/Neighbourhood(this is how the application is designed). That editbox require you to not only enter a value but also select an appropriate option suggested by the app based on the value entered","body":"@NandanA In your Example 1, your code does enter a value but that value disappears quickly as it is not a valid Address/Neighbourhood(this is how the application is designed). That editbox require you to not only enter a value but also select an appropriate option suggested by the app based on the value entered"},{"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"score":0,"creation_date":1640267496,"post_id":70459859,"comment_id":124557381,"body_markdown":"@GurmanjotSingh Have you tried manually by entering same text? It is not disappearing. It is disappearing when you clicked outside of the textbox. Just now I checked. Thanks!","body":"@GurmanjotSingh Have you tried manually by entering same text? It is not disappearing. It is disappearing when you clicked outside of the textbox. Just now I checked. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":6946971,"reputation":10284,"user_id":5331061,"accept_rate":75,"display_name":"Gurmanjot Singh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640279406,"creation_date":1640274920,"answer_id":70464501,"question_id":70459859,"body_markdown":"**Solution to Example 1**\r\n\r\nIf you load the website, you will observe that the text above the search editbox  initially looks like:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter sometime, the same element&#39;s text gets changed to:\r\n[![enter image description here][2]][2]\r\n\r\nOnly after this happens, try performing the sendkeys operation. Note that you don&#39;t have to perform the sendkeys operation on the element with id = &#39;search-input&#39;. You first need to click on that element and then another element(cssSelector -&gt; `div[role=&#39;combobox&#39;] [placeholder=&#39;Search by address, Neighbourhood, MLS #&#39;]`) becomes visible on which you have to perform the sendkeys operation.\r\n\r\nPlease refer the code below for the same(tested on chrome, edge and firefox).\r\n\r\n    package usecase;\r\n    \r\n    import java.time.Duration;\r\n    import java.util.regex.Pattern;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.support.ui.ExpectedConditions;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class Flexcase {\r\n    \tpublic static WebDriver driver;\r\n    \tprivate static final int maxtime = 20;\r\n    \r\n    \t/**\r\n    \t * Creating a custom findElement method that uses Explicit wait and waits for an\r\n    \t * element to be clickable\r\n    \t */\r\n    \tpublic static WebElement findElement(By by) {\r\n    \t\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(maxtime));\r\n    \t\treturn wait.until(ExpectedConditions.elementToBeClickable(by));\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Waits for an element to contain a text matched by the given pattern(regex)\r\n    \t */\r\n    \tpublic static Boolean doesElementContainTextPattern(By by, String pattern) {\r\n    \t\tWebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(maxtime));\r\n    \t\treturn wait.until(ExpectedConditions.textMatches(by, Pattern.compile(pattern)));\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tdriver.get(&quot;https://condos.ca/&quot;);\r\n    \t\t// Waiting for the text to achieve a specific pattern - Search followed by 1+\r\n    \t\t// occurrences of either digits or commas followed by 0+ occurrences of any\r\n    \t\t// character that is not a newline character followed by the word Listings\r\n    \t\tif (doesElementContainTextPattern(By.className(&quot;dPFjpJ&quot;), &quot;Search [\\\\d,]+.*Listings&quot;)) {\r\n    \t\t\tfindElement(By.id(&quot;search-input&quot;)).click();\r\n    \t\t\tfindElement(By.cssSelector(&quot;div[role=&#39;combobox&#39;] [placeholder=&#39;Search by address, Neighbourhood, MLS #&#39;]&quot;))\r\n    \t\t\t\t\t.sendKeys(&quot;Test&quot;);\r\n    \t\t}\r\n    \r\n    \t\tThread.sleep(10000); // Pls let me see what&#39;s happening on the screen\r\n    \t\tdriver.quit();\r\n    \t}\r\n    }\r\n\r\n**Demo:**\r\n[![enter image description here][3]][3]\r\n\r\n**Solution for Example 2**\r\n\r\nInstead of using javascriptexecutor, I have used the Actions class to build a composite action made up by following actions:\r\n - move the mouse to leftmost position of the slider by finding the slider width in pixels\r\n - move the mouse to the desired position on the slider proportiante to the percentage value passed\r\n\r\n**Code:**(sliding accuracy can be improved)\r\n\r\n    package usecase;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.interactions.Actions;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class Slider {\r\n    \r\n    \tpublic static WebDriver driver;\r\n    \r\n    \tpublic static void moveSliderToPosition(By by, int percentage) throws InterruptedException {\r\n    \t\tWebElement slider = driver.findElement(by);\r\n    \t\tActions builder = new Actions(driver);\r\n    \t\tbuilder.moveToElement(slider, (int) (-slider.getRect().width / 2), 0) // move to the leftmost position of the\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// element\r\n    \t\t\t\t.moveByOffset((int) (percentage * slider.getRect().width / 100), 0) // move the cursor by an offset\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// proportionate to the value passed\r\n    \t\t\t\t.click().build().perform();\r\n    \t\tThread.sleep(3000); // let me see what has happened on the screen\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\tWebDriverManager.chromedriver().setup();\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tdriver.get(&quot;https://demoqa.com/slider&quot;);\r\n    \t\tBy slider = By.cssSelector(&quot;input.range-slider&quot;);\r\n    \t\tmoveSliderToPosition(slider, 47);\r\n    \t\tmoveSliderToPosition(slider, 83);\r\n    \t\tmoveSliderToPosition(slider, 35);\r\n    \t\tdriver.quit();\r\n    \t}\r\n    }\r\n\r\n**Demo:**\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1ljVX.png\r\n  [2]: https://i.stack.imgur.com/89tHs.png\r\n  [3]: https://i.stack.imgur.com/s3q1Z.gif\r\n  [4]: https://i.stack.imgur.com/WOYqK.gif","title":"Unable to perform any actions on elements which were located under flexbox","body":"<p><strong>Solution to Example 1</strong></p>\n<p>If you load the website, you will observe that the text above the search editbox  initially looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/1ljVX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1ljVX.png\" alt=\"enter image description here\" /></a></p>\n<p>After sometime, the same element's text gets changed to:\n<a href=\"https://i.stack.imgur.com/89tHs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/89tHs.png\" alt=\"enter image description here\" /></a></p>\n<p>Only after this happens, try performing the sendkeys operation. Note that you don't have to perform the sendkeys operation on the element with id = 'search-input'. You first need to click on that element and then another element(cssSelector -&gt; <code>div[role='combobox'] [placeholder='Search by address, Neighbourhood, MLS #']</code>) becomes visible on which you have to perform the sendkeys operation.</p>\n<p>Please refer the code below for the same(tested on chrome, edge and firefox).</p>\n<pre><code>package usecase;\n\nimport java.time.Duration;\nimport java.util.regex.Pattern;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class Flexcase {\n    public static WebDriver driver;\n    private static final int maxtime = 20;\n\n    /**\n     * Creating a custom findElement method that uses Explicit wait and waits for an\n     * element to be clickable\n     */\n    public static WebElement findElement(By by) {\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(maxtime));\n        return wait.until(ExpectedConditions.elementToBeClickable(by));\n    }\n\n    /**\n     * Waits for an element to contain a text matched by the given pattern(regex)\n     */\n    public static Boolean doesElementContainTextPattern(By by, String pattern) {\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(maxtime));\n        return wait.until(ExpectedConditions.textMatches(by, Pattern.compile(pattern)));\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://condos.ca/&quot;);\n        // Waiting for the text to achieve a specific pattern - Search followed by 1+\n        // occurrences of either digits or commas followed by 0+ occurrences of any\n        // character that is not a newline character followed by the word Listings\n        if (doesElementContainTextPattern(By.className(&quot;dPFjpJ&quot;), &quot;Search [\\\\d,]+.*Listings&quot;)) {\n            findElement(By.id(&quot;search-input&quot;)).click();\n            findElement(By.cssSelector(&quot;div[role='combobox'] [placeholder='Search by address, Neighbourhood, MLS #']&quot;))\n                    .sendKeys(&quot;Test&quot;);\n        }\n\n        Thread.sleep(10000); // Pls let me see what's happening on the screen\n        driver.quit();\n    }\n}\n</code></pre>\n<p><strong>Demo:</strong>\n<a href=\"https://i.stack.imgur.com/s3q1Z.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s3q1Z.gif\" alt=\"enter image description here\" /></a></p>\n<p><strong>Solution for Example 2</strong></p>\n<p>Instead of using javascriptexecutor, I have used the Actions class to build a composite action made up by following actions:</p>\n<ul>\n<li>move the mouse to leftmost position of the slider by finding the slider width in pixels</li>\n<li>move the mouse to the desired position on the slider proportiante to the percentage value passed</li>\n</ul>\n<p><strong>Code:</strong>(sliding accuracy can be improved)</p>\n<pre><code>package usecase;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.interactions.Actions;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class Slider {\n\n    public static WebDriver driver;\n\n    public static void moveSliderToPosition(By by, int percentage) throws InterruptedException {\n        WebElement slider = driver.findElement(by);\n        Actions builder = new Actions(driver);\n        builder.moveToElement(slider, (int) (-slider.getRect().width / 2), 0) // move to the leftmost position of the\n                                                                                // element\n                .moveByOffset((int) (percentage * slider.getRect().width / 100), 0) // move the cursor by an offset\n                                                                                    // proportionate to the value passed\n                .click().build().perform();\n        Thread.sleep(3000); // let me see what has happened on the screen\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        WebDriverManager.chromedriver().setup();\n        driver = new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://demoqa.com/slider&quot;);\n        By slider = By.cssSelector(&quot;input.range-slider&quot;);\n        moveSliderToPosition(slider, 47);\n        moveSliderToPosition(slider, 83);\n        moveSliderToPosition(slider, 35);\n        driver.quit();\n    }\n}\n</code></pre>\n<p><strong>Demo:</strong>\n<a href=\"https://i.stack.imgur.com/WOYqK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WOYqK.gif\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1161,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":1,"score":8,"last_activity_date":1640279406,"creation_date":1640250577,"question_id":70459859,"body_markdown":"`Selenium` is able to `findElement` which were located under &lt;kbd&gt;flex&lt;/kbd&gt; box but not able to perform any actions on those elements. Below I am providing couple of sample websites for detailed understanding,\r\n\r\n----------------------\r\n\r\n### Example#1: ###\r\n\r\n**Website**: https://condos.ca/\r\n\r\n**&lt;kbd&gt;HTML&lt;/kbd&gt; snippet**:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n&lt;div class=&quot;styles___SearchField-sc-ntshwn-1 azZjo&quot;&gt;\r\n   &lt;div class=&quot;styles___SiteSearch-sc-ntshwn-3 bvlPAF&quot;&gt;\r\n      &lt;div class=&quot;styles___InputIcon-sc-ntshwn-4 eAuylQ&quot;&gt;\r\n         &lt;svg viewBox=&quot;0 0 59.93 60&quot; class=&quot;styles___Svg-sc-14upfal-0 frvNPk svg-icon&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; style=&quot;width: 20px; height: 20px;&quot;&gt;\r\n            &lt;path d=&quot;M59.23,55.73L44.33,40.81a25,25,0,1,0-3.53,3.54L55.7,59.27A2.5,2.5,0,1,0,59.23,55.73ZM5,25A20,20,0,1,1,25,45,20,20,0,0,1,5,25Z&quot; transform=&quot;translate(-0.03)&quot;&gt;&lt;/path&gt;\r\n         &lt;/svg&gt;\r\n      &lt;/div&gt;\r\n      &lt;input aria-label=&quot;Search by address, Neighbourhood, MLS #&quot; placeholder=&quot;Search by address, Neighbourhood, MLS #&quot; id=&quot;search-input&quot;&gt;\r\n   &lt;/div&gt;\r\n   &lt;div class=&quot;styles___GetLocationContainer-sc-ntshwn-5 cCBUUE&quot;&gt;\r\n      &lt;button target=&quot;_blank&quot; name=&quot;search nearby button&quot; class=&quot;styles___AppButton-sc-5pk18n-0 jXQNUT styles___SearchNearby-sc-ntshwn-6 dYpkAS&quot; id=&quot;&quot;&gt;\r\n         &lt;svg viewBox=&quot;0 0 20 20&quot; class=&quot;styles___Svg-sc-14upfal-0 frvNPk svg-icon&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; style=&quot;width: 22px; height: 22px;&quot;&gt;\r\n            &lt;path d=&quot;M10,17.49c-4.19-0.02-7.57-3.39-7.55-7.53c0.02-4.14,3.42-7.48,7.61-7.47c4.18,0.02,7.56,3.37,7.55,7.51C17.6,14.15,14.19,17.5,10,17.49C10,17.49,10,17.49,10,17.49z M10,3.48C6.37,3.5,3.43,6.43,3.45,10.02c0.02,3.59,2.98,6.5,6.61,6.48c3.62-0.02,6.54-2.92,6.55-6.5c0-3.6-2.95-6.52-6.59-6.52C10.01,3.48,10.01,3.48,10,3.48z&quot;&gt;&lt;/path&gt;\r\n            &lt;path d=&quot;M10,3.48c-0.28,0-0.5-0.22-0.5-0.49V0.49C9.5,0.22,9.72,0,10,0s0.5,0.22,0.5,0.49v2.49C10.5,3.26,10.28,3.48,10,3.48z&quot;&gt;&lt;/path&gt;\r\n            &lt;path d=&quot;M10,20c-0.28,0-0.5-0.22-0.5-0.49v-2.51c0-0.27,0.22-0.49,0.5-0.49s0.5,0.22,0.5,0.49v2.51C10.5,19.78,10.28,20,10,20z&quot;&gt;&lt;/path&gt;\r\n            &lt;path d=&quot;M19.54,10.48h-2.43c-0.28,0-0.5-0.22-0.5-0.49c0-0.27,0.22-0.49,0.5-0.49h2.43c0.28,0,0.5,0.22,0.5,0.49C20.04,10.26,19.82,10.48,19.54,10.48z&quot;&gt;&lt;/path&gt;\r\n            &lt;path d=&quot;M3,10.49H0.46c-0.28,0-0.5-0.22-0.5-0.49c0-0.27,0.22-0.49,0.5-0.49H3c0.28,0,0.5,0.22,0.5,0.49C3.5,10.27,3.28,10.49,3,10.49z&quot;&gt;&lt;/path&gt;\r\n            &lt;path d=&quot;M10,13.49c-1.95-0.02-3.52-1.61-3.5-3.54c0.02-1.93,1.62-3.48,3.58-3.46c1.94,0.02,3.51,1.59,3.5,3.51c-0.01,1.94-1.61,3.5-3.57,3.49C10.01,13.49,10,13.49,10,13.49z M10,7.48C8.6,7.5,7.48,8.64,7.5,10.03c0.02,1.39,1.18,2.49,2.58,2.47c1.38-0.02,2.49-1.13,2.5-2.5c0-1.39-1.14-2.52-2.55-2.52C10.02,7.48,10.01,7.48,10,7.48z&quot;&gt;&lt;/path&gt;\r\n         &lt;/svg&gt;\r\n      &lt;/button&gt;\r\n   &lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n**Code**:\r\n```\r\ndriver.get(&quot;https://condos.ca&quot;);\r\ndriver.findElement(By.xpath(&quot;//input[@id=&#39;search-input&#39;]&quot;)).sendKeys(&quot;test&quot;);\r\n ```\r\n**Result**: Step is being executed without throwing any errors but text was not entered.\r\n\r\n----\r\n### Example#2: ###\r\n\r\n**Website**: https://demoqa.com/slider\r\n\r\n**&lt;kbd&gt;HTML&lt;/kbd&gt; snippet**:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n&lt;div id=&quot;sliderContainer&quot; class=&quot;form-group row&quot;&gt;\r\n   &lt;div class=&quot;col-9&quot;&gt;\r\n      &lt;span class=&quot;range-slider__wrap&quot;&gt;\r\n         &lt;input type=&quot;range&quot; class=&quot;range-slider range-slider--primary&quot; min=&quot;0&quot; max=&quot;100&quot; value=&quot;25&quot; style=&quot;--value:25;&quot;&gt;\r\n         &lt;div class=&quot;range-slider__tooltip range-slider__tooltip--auto range-slider__tooltip--bottom&quot; style=&quot;left: calc(25% + 5px);&quot;&gt;\r\n            &lt;div class=&quot;range-slider__tooltip__label&quot;&gt;25&lt;/div&gt;\r\n            &lt;div class=&quot;range-slider__tooltip__arrow&quot;&gt;&lt;/div&gt;\r\n         &lt;/div&gt;\r\n      &lt;/span&gt;\r\n   &lt;/div&gt;\r\n   &lt;div class=&quot;col-3&quot;&gt;&lt;input id=&quot;sliderValue&quot; class=&quot;form-control&quot; value=&quot;25&quot;&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n**Code**:\r\n```\r\ndriver.get(&quot;https://demoqa.com/slider&quot;);\r\nJavascriptExecutor executor = (JavascriptExecutor) driver;\r\nWebElement slider = driver.findElement(By.xpath(&quot;//input[@type=&#39;range&#39;]&quot;));\r\nSystem.out.println(&quot;Cuurent value: &quot; + slider.getAttribute(&quot;value&quot;));\r\nexecutor.executeScript(&quot;arguments[0].setAttribute(&#39;value&#39;, &#39; 30 &#39;)&quot;, slider);\r\n ```\r\n**Result**: Printed attribute value but didn&#39;t set the new value.\r\n\r\n----\r\n\r\nFew SO questions and blogs are suggesting to use **Selenium flex api** to automate these these type of applications but I can see a pre-requiste to install flex plugin for eclipse and I cannot find that. Also, these post are little old (5 years old). \r\n\r\n- ***How to handle these elements?***\r\n- ***Is there any new way to do this?***\r\n\r\n**References**:\r\n\r\n- *https://stackoverflow.com/questions/14619798/is-selenium-automation-tool-supports-flex-applications*\r\n- *https://www.linkedin.com/pulse/automating-flex-application-selenium-webdriver-himanshu-tewari/*\r\n","title":"Unable to perform any actions on elements which were located under flexbox","body":"<p><code>Selenium</code> is able to <code>findElement</code> which were located under <kbd>flex</kbd> box but not able to perform any actions on those elements. Below I am providing couple of sample websites for detailed understanding,</p>\n<hr />\n<h3>Example#1:</h3>\n<p><strong>Website</strong>: <a href=\"https://condos.ca/\" rel=\"nofollow noreferrer\">https://condos.ca/</a></p>\n<p><strong><kbd>HTML</kbd> snippet</strong>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"styles___SearchField-sc-ntshwn-1 azZjo\"&gt;\n   &lt;div class=\"styles___SiteSearch-sc-ntshwn-3 bvlPAF\"&gt;\n  &lt;div class=\"styles___InputIcon-sc-ntshwn-4 eAuylQ\"&gt;\n     &lt;svg viewBox=\"0 0 59.93 60\" class=\"styles___Svg-sc-14upfal-0 frvNPk svg-icon\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"width: 20px; height: 20px;\"&gt;\n        &lt;path d=\"M59.23,55.73L44.33,40.81a25,25,0,1,0-3.53,3.54L55.7,59.27A2.5,2.5,0,1,0,59.23,55.73ZM5,25A20,20,0,1,1,25,45,20,20,0,0,1,5,25Z\" transform=\"translate(-0.03)\"&gt;&lt;/path&gt;\n     &lt;/svg&gt;\n  &lt;/div&gt;\n  &lt;input aria-label=\"Search by address, Neighbourhood, MLS #\" placeholder=\"Search by address, Neighbourhood, MLS #\" id=\"search-input\"&gt;\n   &lt;/div&gt;\n   &lt;div class=\"styles___GetLocationContainer-sc-ntshwn-5 cCBUUE\"&gt;\n  &lt;button target=\"_blank\" name=\"search nearby button\" class=\"styles___AppButton-sc-5pk18n-0 jXQNUT styles___SearchNearby-sc-ntshwn-6 dYpkAS\" id=\"\"&gt;\n     &lt;svg viewBox=\"0 0 20 20\" class=\"styles___Svg-sc-14upfal-0 frvNPk svg-icon\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"width: 22px; height: 22px;\"&gt;\n        &lt;path d=\"M10,17.49c-4.19-0.02-7.57-3.39-7.55-7.53c0.02-4.14,3.42-7.48,7.61-7.47c4.18,0.02,7.56,3.37,7.55,7.51C17.6,14.15,14.19,17.5,10,17.49C10,17.49,10,17.49,10,17.49z M10,3.48C6.37,3.5,3.43,6.43,3.45,10.02c0.02,3.59,2.98,6.5,6.61,6.48c3.62-0.02,6.54-2.92,6.55-6.5c0-3.6-2.95-6.52-6.59-6.52C10.01,3.48,10.01,3.48,10,3.48z\"&gt;&lt;/path&gt;\n        &lt;path d=\"M10,3.48c-0.28,0-0.5-0.22-0.5-0.49V0.49C9.5,0.22,9.72,0,10,0s0.5,0.22,0.5,0.49v2.49C10.5,3.26,10.28,3.48,10,3.48z\"&gt;&lt;/path&gt;\n        &lt;path d=\"M10,20c-0.28,0-0.5-0.22-0.5-0.49v-2.51c0-0.27,0.22-0.49,0.5-0.49s0.5,0.22,0.5,0.49v2.51C10.5,19.78,10.28,20,10,20z\"&gt;&lt;/path&gt;\n        &lt;path d=\"M19.54,10.48h-2.43c-0.28,0-0.5-0.22-0.5-0.49c0-0.27,0.22-0.49,0.5-0.49h2.43c0.28,0,0.5,0.22,0.5,0.49C20.04,10.26,19.82,10.48,19.54,10.48z\"&gt;&lt;/path&gt;\n        &lt;path d=\"M3,10.49H0.46c-0.28,0-0.5-0.22-0.5-0.49c0-0.27,0.22-0.49,0.5-0.49H3c0.28,0,0.5,0.22,0.5,0.49C3.5,10.27,3.28,10.49,3,10.49z\"&gt;&lt;/path&gt;\n        &lt;path d=\"M10,13.49c-1.95-0.02-3.52-1.61-3.5-3.54c0.02-1.93,1.62-3.48,3.58-3.46c1.94,0.02,3.51,1.59,3.5,3.51c-0.01,1.94-1.61,3.5-3.57,3.49C10.01,13.49,10,13.49,10,13.49z M10,7.48C8.6,7.5,7.48,8.64,7.5,10.03c0.02,1.39,1.18,2.49,2.58,2.47c1.38-0.02,2.49-1.13,2.5-2.5c0-1.39-1.14-2.52-2.55-2.52C10.02,7.48,10.01,7.48,10,7.48z\"&gt;&lt;/path&gt;\n     &lt;/svg&gt;\n  &lt;/button&gt;\n   &lt;/div&gt;\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Code</strong>:</p>\n<pre><code>driver.get(&quot;https://condos.ca&quot;);\ndriver.findElement(By.xpath(&quot;//input[@id='search-input']&quot;)).sendKeys(&quot;test&quot;);\n</code></pre>\n<p><strong>Result</strong>: Step is being executed without throwing any errors but text was not entered.</p>\n<hr />\n<h3>Example#2:</h3>\n<p><strong>Website</strong>: <a href=\"https://demoqa.com/slider\" rel=\"nofollow noreferrer\">https://demoqa.com/slider</a></p>\n<p><strong><kbd>HTML</kbd> snippet</strong>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"sliderContainer\" class=\"form-group row\"&gt;\n   &lt;div class=\"col-9\"&gt;\n  &lt;span class=\"range-slider__wrap\"&gt;\n     &lt;input type=\"range\" class=\"range-slider range-slider--primary\" min=\"0\" max=\"100\" value=\"25\" style=\"--value:25;\"&gt;\n     &lt;div class=\"range-slider__tooltip range-slider__tooltip--auto range-slider__tooltip--bottom\" style=\"left: calc(25% + 5px);\"&gt;\n        &lt;div class=\"range-slider__tooltip__label\"&gt;25&lt;/div&gt;\n        &lt;div class=\"range-slider__tooltip__arrow\"&gt;&lt;/div&gt;\n     &lt;/div&gt;\n  &lt;/span&gt;\n   &lt;/div&gt;\n   &lt;div class=\"col-3\"&gt;&lt;input id=\"sliderValue\" class=\"form-control\" value=\"25\"&gt;&lt;/div&gt;\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Code</strong>:</p>\n<pre><code>driver.get(&quot;https://demoqa.com/slider&quot;);\nJavascriptExecutor executor = (JavascriptExecutor) driver;\nWebElement slider = driver.findElement(By.xpath(&quot;//input[@type='range']&quot;));\nSystem.out.println(&quot;Cuurent value: &quot; + slider.getAttribute(&quot;value&quot;));\nexecutor.executeScript(&quot;arguments[0].setAttribute('value', ' 30 ')&quot;, slider);\n</code></pre>\n<p><strong>Result</strong>: Printed attribute value but didn't set the new value.</p>\n<hr />\n<p>Few SO questions and blogs are suggesting to use <strong>Selenium flex api</strong> to automate these these type of applications but I can see a pre-requiste to install flex plugin for eclipse and I cannot find that. Also, these post are little old (5 years old).</p>\n<ul>\n<li><em><strong>How to handle these elements?</strong></em></li>\n<li><em><strong>Is there any new way to do this?</strong></em></li>\n</ul>\n<p><strong>References</strong>:</p>\n<ul>\n<li><em><a href=\"https://stackoverflow.com/questions/14619798/is-selenium-automation-tool-supports-flex-applications\">Is selenium automation tool supports flex applications?</a></em></li>\n<li><em><a href=\"https://www.linkedin.com/pulse/automating-flex-application-selenium-webdriver-himanshu-tewari/\" rel=\"nofollow noreferrer\">https://www.linkedin.com/pulse/automating-flex-application-selenium-webdriver-himanshu-tewari/</a></em></li>\n</ul>\n"},{"tags":["java","aem","sling"],"comments":[{"owner":{"account_id":4456321,"reputation":310,"user_id":3626491,"accept_rate":83,"display_name":"mkovacek"},"score":0,"creation_date":1640267358,"post_id":70384076,"comment_id":124557352,"body_markdown":"It really depends, but you can in component A inject currentPage and then get content resource (if it&#39;s the fixed path) from component B and get props (getValueMap) or adapt the resource to your sling model.\nIf it&#39;s not a fixed path then you can &quot;search&quot; for the resource type of component B inside the page","body":"It really depends, but you can in component A inject currentPage and then get content resource (if it&#39;s the fixed path) from component B and get props (getValueMap) or adapt the resource to your sling model. If it&#39;s not a fixed path then you can &quot;search&quot; for the resource type of component B inside the page"}],"answers":[{"tags":[],"owner":{"account_id":19456522,"reputation":133,"user_id":14231735,"display_name":"SathwikaRao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640279384,"creation_date":1640279384,"answer_id":70465327,"question_id":70384076,"body_markdown":"    @PostConstruct\r\n    protected void init() {\r\n        // ArrayList&lt;Resource&gt; childList = new ArrayList&lt;Resource&gt;();\r\n        Resource childResource = resource.getParent();\r\n        if (childResource != null) {\r\n            Iterator&lt;Resource&gt; children = childResource.listChildren();\r\n            while (children.hasNext()) {\r\n                Resource child = children.next();\r\n                String parentNodeName = child.getName();\r\n                if (parentNodeName.equals(&quot;component-a&quot;)) {\r\n                    // childList.add(child); \r\n                    title = child.getValueMap().get(&quot;headline&quot;, &quot;headline value&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nAssigned Component A property(**headline**) value to Component B property(**title**)","title":"How to access the properties of a component from another component which lies on same page? AEM Java Sling","body":"<pre><code>@PostConstruct\nprotected void init() {\n    // ArrayList&lt;Resource&gt; childList = new ArrayList&lt;Resource&gt;();\n    Resource childResource = resource.getParent();\n    if (childResource != null) {\n        Iterator&lt;Resource&gt; children = childResource.listChildren();\n        while (children.hasNext()) {\n            Resource child = children.next();\n            String parentNodeName = child.getName();\n            if (parentNodeName.equals(&quot;component-a&quot;)) {\n                // childList.add(child); \n                title = child.getValueMap().get(&quot;headline&quot;, &quot;headline value&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Assigned Component A property(<strong>headline</strong>) value to Component B property(<strong>title</strong>)</p>\n"}],"owner":{"account_id":19456522,"reputation":133,"user_id":14231735,"display_name":"SathwikaRao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70465327,"answer_count":1,"score":0,"last_activity_date":1640279384,"creation_date":1639680010,"question_id":70384076,"body_markdown":"Assume We have component A and Component B on Home page of AEM instance.\r\nI want Component A properties value on Component B in sling java class.\r\n\r\nCan you please provide some code to explain your answer. It would be easy for me to understand","title":"How to access the properties of a component from another component which lies on same page? AEM Java Sling","body":"<p>Assume We have component A and Component B on Home page of AEM instance.\nI want Component A properties value on Component B in sling java class.</p>\n<p>Can you please provide some code to explain your answer. It would be easy for me to understand</p>\n"},{"tags":["java","jna"],"comments":[{"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":0,"creation_date":1345047279,"post_id":11972952,"comment_id":15959685,"body_markdown":"All `assert...()` methods have return type `void`, so they can&#39;t be used in `if` statements.","body":"All <code>assert...()</code> methods have return type <code>void</code>, so they can&#39;t be used in <code>if</code> statements."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1345047282,"post_id":11972952,"comment_id":15959688,"body_markdown":"What are you trying to achieve?","body":"What are you trying to achieve?"}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1345047257,"creation_date":1345047257,"answer_id":11972995,"question_id":11972952,"body_markdown":"You just call `assertEquals(expected, actual)` - if `expected.equals(actual)`, the test continues to the next line (and pass when it reaches the last line), if the condition is false, the test fails.\r\n\r\nNo need for additional if / else.","title":"assertTrue/assertFalse if statements","body":"<p>You just call <code>assertEquals(expected, actual)</code> - if <code>expected.equals(actual)</code>, the test continues to the next line (and pass when it reaches the last line), if the condition is false, the test fails.</p>\n\n<p>No need for additional if / else.</p>\n"}],"owner":{"account_id":1566072,"reputation":215,"user_id":1454847,"accept_rate":89,"display_name":"jerhynsoen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6881,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":11972995,"answer_count":1,"score":0,"last_activity_date":1640279369,"creation_date":1345047053,"question_id":11972952,"body_markdown":"How can you use assertTrue and assertFalse in if statements? Just throwing in if statement in front does not work, gives me a syntax error, but it was worth a shot. I tried to make it a string and check value with value.equals() but assert gives an error saying you cannot convert to a string.\r\n\r\n    public class JNAWinRegTest extends TestCase {\r\n    \r\n        public static void main(String[] args) { \r\n    \r\n    \ttry { assertEquals(&quot;Windows 7 Professional&quot;, Advapi32Util.registryGetStringValue(WinReg.HKEY_LOCAL_MACHINE, \r\n    \t\t\t&quot;SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion&quot;, &quot;ProductName&quot;));\r\n    \t    if(True) ){\r\n    \t    \tSystem.out.println(&quot;True&quot;);\r\n    \t    }else{\r\n    \t    \tif(False) ){\r\n    \t\t    \tSystem.out.println(&quot;False&quot;);\t\r\n    \t    \t}\r\n    \t    }\r\n    \t} catch (IllegalArgumentException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t} catch (IllegalAccessException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t} catch (InvocationTargetException e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}                                              \r\n         \t}  \r\n        }","title":"assertTrue/assertFalse if statements","body":"<p>How can you use assertTrue and assertFalse in if statements? Just throwing in if statement in front does not work, gives me a syntax error, but it was worth a shot. I tried to make it a string and check value with value.equals() but assert gives an error saying you cannot convert to a string.</p>\n\n<pre><code>public class JNAWinRegTest extends TestCase {\n\n    public static void main(String[] args) { \n\n    try { assertEquals(\"Windows 7 Professional\", Advapi32Util.registryGetStringValue(WinReg.HKEY_LOCAL_MACHINE, \n            \"SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\", \"ProductName\"));\n        if(True) ){\n            System.out.println(\"True\");\n        }else{\n            if(False) ){\n                System.out.println(\"False\");    \n            }\n        }\n    } catch (IllegalArgumentException e) {\n                e.printStackTrace();\n    } catch (IllegalAccessException e) {\n                e.printStackTrace();\n    } catch (InvocationTargetException e) {\n                e.printStackTrace();\n            }                                              \n        }  \n    }\n</code></pre>\n"},{"tags":["java","interface","ioexception","ice"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1640279014,"post_id":70465001,"comment_id":124561411,"body_markdown":"&quot;some issues with exceptions in interfaces&quot; is incredibly vague. Can you be more specific? What **exact** error messages do you get ([edit] your question to include them).","body":"&quot;some issues with exceptions in interfaces&quot; is incredibly vague. Can you be more specific? What <b>exact</b> error messages do you get (<a href=\"https://stackoverflow.com/posts/70465001/edit\">edit</a> your question to include them)."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1641066667,"post_id":70465001,"comment_id":124715381,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":21489011,"reputation":1,"user_id":15835109,"display_name":"Panda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640279050,"creation_date":1640277644,"question_id":70465001,"body_markdown":"I&#39;m trying to make an Java Ice code and i have some issues with exceptions in interfaces (with IOException). I write in the slice &quot;.ice&quot; \r\n\r\n```\r\nmodule Demo {\r\n\t\r\n\t\r\n\t\r\n\t\tstruct Pedido{\r\n\t\tstring nombre;\r\n\t\tstring comanda;\r\n\t\tstring direccion;\r\n\t\tstring tarjeta;\r\n\t};\r\n\t\r\n\tinterface Fichero {\r\n\t\tstring getNombre(Pedido p);\r\n\t\tstring getComanda(Pedido p);\r\n\t\tstring getDireccion(Pedido p);\r\n\t\tstring getTarjeta (Pedido p);\r\n\t\tstring descifrado(string tarjeta);\r\n\t\tvoid escribirFichero(Pedido p) ;\r\n\t\t\r\n\t};\r\n\t\r\n\t\r\n\r\n\tinterface Pedidos {\r\n\t\tfloat getPrecioTotal(Pedido p);\r\n\t\tfloat getPrecio(string item);\r\n\t\tvoid devolverPrecio(Pedido p, out float res);\r\n\t};\r\n};\r\n```\r\n\r\nIn the interface fichero, I have problems of exceptions IOException.\r\n\r\nWhat can i do?","title":"Java Ice and IOException","body":"<p>I'm trying to make an Java Ice code and i have some issues with exceptions in interfaces (with IOException). I write in the slice &quot;.ice&quot;</p>\n<pre><code>module Demo {\n    \n    \n    \n        struct Pedido{\n        string nombre;\n        string comanda;\n        string direccion;\n        string tarjeta;\n    };\n    \n    interface Fichero {\n        string getNombre(Pedido p);\n        string getComanda(Pedido p);\n        string getDireccion(Pedido p);\n        string getTarjeta (Pedido p);\n        string descifrado(string tarjeta);\n        void escribirFichero(Pedido p) ;\n        \n    };\n    \n    \n\n    interface Pedidos {\n        float getPrecioTotal(Pedido p);\n        float getPrecio(string item);\n        void devolverPrecio(Pedido p, out float res);\n    };\n};\n</code></pre>\n<p>In the interface fichero, I have problems of exceptions IOException.</p>\n<p>What can i do?</p>\n"},{"tags":["java","ssl","https","kotlin"],"comments":[{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":1,"creation_date":1513121594,"post_id":47783200,"comment_id":82527919,"body_markdown":"You will need to import your keystore into your jvm runtime. A self signed certificate will just give you a warning in the browser that you will have to trust that signed cert yourself. I have seen this be a massive issue in enterprise environments with companies having security policies which prevent this.","body":"You will need to import your keystore into your jvm runtime. A self signed certificate will just give you a warning in the browser that you will have to trust that signed cert yourself. I have seen this be a massive issue in enterprise environments with companies having security policies which prevent this."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1513121786,"post_id":47783200,"comment_id":82527968,"body_markdown":"Why? What is the point of HTTPS to the localhost?","body":"Why? What is the point of HTTPS to the localhost?"},{"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"score":0,"creation_date":1513123453,"post_id":47783200,"comment_id":82528437,"body_markdown":"@ejp I would like to load a HTML file from a SSL-protected web server that (optionally) includes a javascript file served locally.  When I attempted to serve the js file from a non-SSL http://localhost/thefile.js the browser correctly blocked it.","body":"@ejp I would like to load a HTML file from a SSL-protected web server that (optionally) includes a javascript file served locally.  When I attempted to serve the js file from a non-SSL <a href=\"http://localhost/thefile.js\" rel=\"nofollow noreferrer\">localhost/thefile.js</a> the browser correctly blocked it."},{"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"score":0,"creation_date":1513123517,"post_id":47783200,"comment_id":82528453,"body_markdown":"@Snickers3192 drat!  I was afraid of that.  I was hoping that &quot;localhost&quot; got a pass with the error, but if not... bummer.","body":"@Snickers3192 drat!  I was afraid of that.  I was hoping that &quot;localhost&quot; got a pass with the error, but if not... bummer."},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1513123862,"post_id":47783200,"comment_id":82528543,"body_markdown":"Like @EJP says there isn&#39;t any point of ssl within localhost, but I&#39;ve seen it for testing purposes because of policies or politics. Pretty much to get around it you just put a proxy in front which goes Browser-&gt;HTTP-&gt;Proxy-&gt;HTTPS-&gt;Server, if you need to.","body":"Like @EJP says there isn&#39;t any point of ssl within localhost, but I&#39;ve seen it for testing purposes because of policies or politics. Pretty much to get around it you just put a proxy in front which goes Browser-&gt;HTTP-&gt;Proxy-&gt;HTTPS-&gt;Server, if you need to."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1513129927,"post_id":47783200,"comment_id":82530092,"body_markdown":"@Snickers3192 - .... except that you 1) need to use a real IP for the proxy and 2) provide it with a real cert, and 3) bind, open ports, etc to allow the proxy to talk to the &quot;minimal&quot; server.","body":"@Snickers3192 - .... except that you 1) need to use a real IP for the proxy and 2) provide it with a real cert, and 3) bind, open ports, etc to allow the proxy to talk to the &quot;minimal&quot; server."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550125006,"creation_date":1513132182,"answer_id":47784605,"question_id":47783200,"body_markdown":"There are two common approaches to getting a secure connection between a client (browser) and server via HTTPS:\r\n\r\n  1. You can obtain SSL certificate for the server that is signed by a Root Certification Authority (CA) that is trusted by the user&#39;s web browser by default.\r\n\r\n  2. You can generate a self-signed SSL certificate, and have the user import it into their web browser as a trusted cert.\r\n\r\nWhat you have done so far seems to be to generate a server-side keystore with a self-signed cert in it and (more or less) configured the Kotlin server to use it.  The problem is the client (browser).  There is no safe way to get the browser to trust the self-signed cert without the involvement of the user or the user&#39;s sysadmin.  (Safe ... as in safe for the user!)\r\n\r\nAnd no legitimate CA should ever issue an SSL cert for &quot;localhost&quot;; e.g. https://www.ssl2buy.com/wiki/how-to-get-ssl-certificate-for-web-applications-that-runs-on-localhost\r\n\r\nImpasse.\r\n\r\nOK, so lets step back. The purpose of using HTTPS / SSL is to ensure that:\r\n\r\n  1. The user&#39;s web browser is talking to the correct server, and not some other server that is impersonating it.\r\n\r\n  2. The connection between the browser and the server is encrypted so that no third party can snoop on the traffic.\r\n\r\nBut you are trying to do this for a `localhost` connection.  The `localhost` IP address is a loopback address.  Unless the OS kernel is compromised, you are guaranteed that network packets sent via a loopback connection will not leave the host.\r\n\r\n  1. You can dismiss the &quot;impersonation&quot; problem.  Assuming that the user&#39;s machine has not been compromised, nobody else can launch a &quot;fake&quot; server on the user&#39;s machine.\r\n\r\n  2. You can dismiss the  &quot;snooping&quot; problem.  Assuming that the user&#39;s machine has not been compromised:\r\n\r\n     - The packets won&#39;t go off-host, so they can&#39;t be snooped on any &quot;external&quot; networks.\r\n     - The only person who can &quot;snoop&quot; the packets on the loopback network is the user him / herself.\r\n\r\nSo, the solution is simple.  Use &quot;http&quot; for your &quot;localhost&quot; connection.  It should be secure ... assuming that the user&#39;s machine has not been compromised. \r\n\r\nNote: if the user&#39;s machine *has been compromised*, then the bad guys have other ways to intercept the traffic that SSL won&#39;t protect against.\r\n","title":"java https://localhost (SSL) - possible without installing certs on client?","body":"<p>There are two common approaches to getting a secure connection between a client (browser) and server via HTTPS:</p>\n\n<ol>\n<li><p>You can obtain SSL certificate for the server that is signed by a Root Certification Authority (CA) that is trusted by the user's web browser by default.</p></li>\n<li><p>You can generate a self-signed SSL certificate, and have the user import it into their web browser as a trusted cert.</p></li>\n</ol>\n\n<p>What you have done so far seems to be to generate a server-side keystore with a self-signed cert in it and (more or less) configured the Kotlin server to use it.  The problem is the client (browser).  There is no safe way to get the browser to trust the self-signed cert without the involvement of the user or the user's sysadmin.  (Safe ... as in safe for the user!)</p>\n\n<p>And no legitimate CA should ever issue an SSL cert for \"localhost\"; e.g. <a href=\"https://www.ssl2buy.com/wiki/how-to-get-ssl-certificate-for-web-applications-that-runs-on-localhost\" rel=\"nofollow noreferrer\">https://www.ssl2buy.com/wiki/how-to-get-ssl-certificate-for-web-applications-that-runs-on-localhost</a></p>\n\n<p>Impasse.</p>\n\n<p>OK, so lets step back. The purpose of using HTTPS / SSL is to ensure that:</p>\n\n<ol>\n<li><p>The user's web browser is talking to the correct server, and not some other server that is impersonating it.</p></li>\n<li><p>The connection between the browser and the server is encrypted so that no third party can snoop on the traffic.</p></li>\n</ol>\n\n<p>But you are trying to do this for a <code>localhost</code> connection.  The <code>localhost</code> IP address is a loopback address.  Unless the OS kernel is compromised, you are guaranteed that network packets sent via a loopback connection will not leave the host.</p>\n\n<ol>\n<li><p>You can dismiss the \"impersonation\" problem.  Assuming that the user's machine has not been compromised, nobody else can launch a \"fake\" server on the user's machine.</p></li>\n<li><p>You can dismiss the  \"snooping\" problem.  Assuming that the user's machine has not been compromised:</p>\n\n<ul>\n<li>The packets won't go off-host, so they can't be snooped on any \"external\" networks.</li>\n<li>The only person who can \"snoop\" the packets on the loopback network is the user him / herself.</li>\n</ul></li>\n</ol>\n\n<p>So, the solution is simple.  Use \"http\" for your \"localhost\" connection.  It should be secure ... assuming that the user's machine has not been compromised. </p>\n\n<p>Note: if the user's machine <em>has been compromised</em>, then the bad guys have other ways to intercept the traffic that SSL won't protect against.</p>\n"},{"tags":[],"owner":{"account_id":8141216,"reputation":89,"user_id":6131315,"display_name":"clement_at_openindoor.io"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640278634,"creation_date":1640278634,"answer_id":70465194,"question_id":47783200,"body_markdown":"Another specific case:\r\n\r\nI&#39;m facing a web app from https that would load local data at http://localhost\r\n\r\nSafari web browser blocks because of unsecure communication (http) in a secure flow (https).\r\n\r\nThis behavour could be discussed, but in that case self signed certificate for localhost would help., even with a warning from Safari browser.","title":"java https://localhost (SSL) - possible without installing certs on client?","body":"<p>Another specific case:</p>\n<p>I'm facing a web app from https that would load local data at http://localhost</p>\n<p>Safari web browser blocks because of unsecure communication (http) in a secure flow (https).</p>\n<p>This behavour could be discussed, but in that case self signed certificate for localhost would help., even with a warning from Safari browser.</p>\n"}],"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5217,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1640278634,"creation_date":1513121082,"question_id":47783200,"body_markdown":"After reading the following, I&#39;m still stuck on making the barest-minimum **https**://localhost stand-alone install-free webserver java app.  It needs to be library-free, use Java 8, and accept connections from the browser without first installing any special client certs.  I&#39;m unclear if this is **at all possible with self-signed certs** because it only has to work for &quot;localhost&quot;.\r\n\r\n - https://stackoverflow.com/questions/30498206/how-make-ssl-server-socket-support-both-http-https-in-java\r\n - https://stackoverflow.com/questions/24172449/my-simple-java-https-server-only-works-for-localhost\r\n - https://stackoverflow.com/questions/2308479/simple-java-https-server\r\n\r\n\r\nSo far I&#39;ve generated some key files using\r\n\r\n    openssl genrsa -aes128 -out privkey.pem 2048  # makes privkey.pem\r\n    openssl req -new -x509 -key privkey.pem # makes cert.crt\r\n\r\nand I&#39;ve cobbled together the bare minimum Kotlin setup function\r\n\r\n    private fun ssl():SSLServerSocketFactory {\r\n        val password = &quot;MYPASSWORD&quot;.toCharArray()\r\n        val kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;)\r\n        val tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;)\r\n        val sslContext = SSLContext.getInstance(&quot;TLS&quot;)\r\n\r\n        // initialise the keystore\r\n        KeyStore.getInstance(&quot;JKS&quot;).let { ks-&gt;\r\n            FileInputStream(&quot;lig.keystore&quot;).use {\r\n                ks.load(it, password)\r\n            }\r\n            kmf.init(ks, password)\r\n            tmf.init(ks)\r\n        }\r\n\r\n        // setup the HTTPS context and parameters\r\n        sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null)\r\n        return sslContext.serverSocketFactory\r\n    }\r\n    ssl().createServerSocket().use { serverSocket -&gt;\r\n                serverSocket.reuseAddress = true\r\n                serverSocket.bind(InetSocketAddress(port))\r\n                logger.info { &quot;WebServer ready and listening on ${serverSocket.localPort}&quot; }\r\n\r\n\r\nBut I&#39;m having trouble how to finish it off: Do I need to make a `lig.keystore` file?  Can this even be done without installing certs on the client&#39;s browser?","title":"java https://localhost (SSL) - possible without installing certs on client?","body":"<p>After reading the following, I'm still stuck on making the barest-minimum <strong>https</strong>://localhost stand-alone install-free webserver java app.  It needs to be library-free, use Java 8, and accept connections from the browser without first installing any special client certs.  I'm unclear if this is <strong>at all possible with self-signed certs</strong> because it only has to work for \"localhost\".</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/30498206/how-make-ssl-server-socket-support-both-http-https-in-java\">How make SSL server socket support both http &amp; https in java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24172449/my-simple-java-https-server-only-works-for-localhost\">My simple java HTTPS server only works for localhost</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2308479/simple-java-https-server\">Simple Java HTTPS server</a></li>\n</ul>\n\n<p>So far I've generated some key files using</p>\n\n<pre><code>openssl genrsa -aes128 -out privkey.pem 2048  # makes privkey.pem\nopenssl req -new -x509 -key privkey.pem # makes cert.crt\n</code></pre>\n\n<p>and I've cobbled together the bare minimum Kotlin setup function</p>\n\n<pre><code>private fun ssl():SSLServerSocketFactory {\n    val password = \"MYPASSWORD\".toCharArray()\n    val kmf = KeyManagerFactory.getInstance(\"SunX509\")\n    val tmf = TrustManagerFactory.getInstance(\"SunX509\")\n    val sslContext = SSLContext.getInstance(\"TLS\")\n\n    // initialise the keystore\n    KeyStore.getInstance(\"JKS\").let { ks-&gt;\n        FileInputStream(\"lig.keystore\").use {\n            ks.load(it, password)\n        }\n        kmf.init(ks, password)\n        tmf.init(ks)\n    }\n\n    // setup the HTTPS context and parameters\n    sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null)\n    return sslContext.serverSocketFactory\n}\nssl().createServerSocket().use { serverSocket -&gt;\n            serverSocket.reuseAddress = true\n            serverSocket.bind(InetSocketAddress(port))\n            logger.info { \"WebServer ready and listening on ${serverSocket.localPort}\" }\n</code></pre>\n\n<p>But I'm having trouble how to finish it off: Do I need to make a <code>lig.keystore</code> file?  Can this even be done without installing certs on the client's browser?</p>\n"},{"tags":["java","string","parsing","split"],"comments":[{"owner":{"account_id":20521686,"reputation":165,"user_id":15061122,"display_name":"Cameron Grande"},"score":0,"creation_date":1640117287,"post_id":70441033,"comment_id":124518684,"body_markdown":"What do you plan on doing with these? If you just need to get these as Strings you could use Arrays.asList(s.split(&quot; &quot;));  which would leave you with a list of Strings.  Also, you may need to use special regex to split on all spaces, such as s.split(&quot;\\\\s+&quot;);","body":"What do you plan on doing with these? If you just need to get these as Strings you could use Arrays.asList(s.split(&quot; &quot;));  which would leave you with a list of Strings.  Also, you may need to use special regex to split on all spaces, such as s.split(&quot;\\\\s+&quot;);"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1640117366,"post_id":70441033,"comment_id":124518700,"body_markdown":"Do you actually have strings or do you have some other data to read first, like a file or a network data stream?","body":"Do you actually have strings or do you have some other data to read first, like a file or a network data stream?"},{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":1,"creation_date":1640117748,"post_id":70441033,"comment_id":124518808,"body_markdown":"If you&#39;re reading input you could use a Scanner, with `next()`, `nextInt()` etc.","body":"If you&#39;re reading input you could use a Scanner, with <code>next()</code>, <code>nextInt()</code> etc."},{"owner":{"account_id":20749731,"reputation":510,"user_id":15237549,"display_name":"Captain Hatteras"},"score":0,"creation_date":1640117842,"post_id":70441033,"comment_id":124518842,"body_markdown":"@CameronGrande I need these as their actual type, i.e., String, String, double, int.","body":"@CameronGrande I need these as their actual type, i.e., String, String, double, int."},{"owner":{"account_id":20749731,"reputation":510,"user_id":15237549,"display_name":"Captain Hatteras"},"score":0,"creation_date":1640117876,"post_id":70441033,"comment_id":124518850,"body_markdown":"@markspace Yes, I am working with strings. I am not the one in control of where I am getting them from.","body":"@markspace Yes, I am working with strings. I am not the one in control of where I am getting them from."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1640117887,"post_id":70441033,"comment_id":124518854,"body_markdown":"C(+) is so elegant! :) ...but java so typesafe! :-))^^ Generally in java/on large scale (in c surely also more efficient) I would recommend with regex!  But when you say &quot;many different inputs&quot; ..i think of more structured (csv/json/fixed width, library-based) solution","body":"C(+) is so elegant! :) ...but java so typesafe! :-))^^ Generally in java/on large scale (in c surely also more efficient) I would recommend with regex!  But when you say &quot;many different inputs&quot; ..i think of more structured (csv/json/fixed width, library-based) solution"},{"owner":{"account_id":20749731,"reputation":510,"user_id":15237549,"display_name":"Captain Hatteras"},"score":0,"creation_date":1640117895,"post_id":70441033,"comment_id":124518859,"body_markdown":"@khelwood see my comment to markspace.","body":"@khelwood see my comment to markspace."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1640118249,"post_id":70441033,"comment_id":124518963,"body_markdown":"[Scanner](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html) can take a `String` as input.","body":"<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Scanner.html\" rel=\"nofollow noreferrer\">Scanner</a> can take a <code>String</code> as input."},{"owner":{"account_id":20749731,"reputation":510,"user_id":15237549,"display_name":"Captain Hatteras"},"score":0,"creation_date":1640118281,"post_id":70441033,"comment_id":124518978,"body_markdown":"@Kayaman Interesting! Thank you!","body":"@Kayaman Interesting! Thank you!"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1640119798,"post_id":70441033,"comment_id":124519401,"body_markdown":"[see also (split() vs Scanner vs Tokenizer)](https://stackoverflow.com/q/691184/592355)","body":"<a href=\"https://stackoverflow.com/q/691184/592355\">see also (split() vs Scanner vs Tokenizer)</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1640119888,"post_id":70441033,"comment_id":124519418,"body_markdown":"+1 for: [&quot;One important difference is that both String.split() and Scanner can produce empty strings but StringTokenizer never does it.&quot;](https://stackoverflow.com/a/36775514/592355)","body":"+1 for: <a href=\"https://stackoverflow.com/a/36775514/592355\">&quot;One important difference is that both String.split() and Scanner can produce empty strings but StringTokenizer never does it.&quot;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640119754,"creation_date":1640119754,"answer_id":70441448,"question_id":70441033,"body_markdown":"As it has been mentioned in the comments, if this is coming from keyboard (or really from an input stream) you could use `Scanner` class to do so. However, from input sources other than keyboard, I will not use `Scanner` but some other method to parse strings. For example, if reading lines from a file, you may want to use a `Reader` instead. For this answer, I will assume the input source is the keyboard.\r\n\r\nUsing Scanner to get the input\r\n-------------\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n    System.out.print(&quot;Provide your input: &quot;);\r\n    String input = scanner.nextLine();\r\n    input.close();\r\n\r\n\r\nBreak the String into tokens\r\n----------------------------\r\nHere you have a few options. One is to break down the string into substring by splitting the input using white space as a delimeter:\r\n\r\n    String[] words = input.split(&quot;\\\\s&quot;);\r\n\r\nIf the order of these substrings is guaranteed, you can assign them directly to the variables (not the most elegant solution - but readable)\r\n\r\n    String first = words[0];\r\n    String second = words[1];\r\n    double third = words[2];\r\n    int fourth = words[3];\r\n\r\nAlternatively, you can extract the substrings directly by using `String#substring(int)` and/or `String#substring(int, int)` methods and test whether or not the obtained substring is a number (double or int), or just simply a string.","title":"Java How to Read Data From a String (stringstream equivalent)","body":"<p>As it has been mentioned in the comments, if this is coming from keyboard (or really from an input stream) you could use <code>Scanner</code> class to do so. However, from input sources other than keyboard, I will not use <code>Scanner</code> but some other method to parse strings. For example, if reading lines from a file, you may want to use a <code>Reader</code> instead. For this answer, I will assume the input source is the keyboard.</p>\n<h2>Using Scanner to get the input</h2>\n<pre><code>Scanner scanner = new Scanner(System.in);\nSystem.out.print(&quot;Provide your input: &quot;);\nString input = scanner.nextLine();\ninput.close();\n</code></pre>\n<h2>Break the String into tokens</h2>\n<p>Here you have a few options. One is to break down the string into substring by splitting the input using white space as a delimeter:</p>\n<pre><code>String[] words = input.split(&quot;\\\\s&quot;);\n</code></pre>\n<p>If the order of these substrings is guaranteed, you can assign them directly to the variables (not the most elegant solution - but readable)</p>\n<pre><code>String first = words[0];\nString second = words[1];\ndouble third = words[2];\nint fourth = words[3];\n</code></pre>\n<p>Alternatively, you can extract the substrings directly by using <code>String#substring(int)</code> and/or <code>String#substring(int, int)</code> methods and test whether or not the obtained substring is a number (double or int), or just simply a string.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640119859,"creation_date":1640119859,"answer_id":70441460,"question_id":70441033,"body_markdown":"Try it like this.  Scanner&#39;s constructor can take a string as a data source. \r\n```\r\nScanner scan = new Scanner(&quot;12 34 55 88&quot;);\r\nwhile (scan.hasNext()) {\r\n   System.out.println(scan.nextInt());\t\r\n}\r\n```\r\nprints\r\n```\r\n12\r\n34\r\n55\r\n88","title":"Java How to Read Data From a String (stringstream equivalent)","body":"<p>Try it like this.  Scanner's constructor can take a string as a data source.</p>\n<pre><code>Scanner scan = new Scanner(&quot;12 34 55 88&quot;);\nwhile (scan.hasNext()) {\n   System.out.println(scan.nextInt());  \n}\n</code></pre>\n<p>prints</p>\n<pre><code>12\n34\n55\n88\n</code></pre>\n"}],"owner":{"account_id":20749731,"reputation":510,"user_id":15237549,"display_name":"Captain Hatteras"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1640178621,"accepted_answer_id":70441460,"answer_count":2,"score":1,"last_activity_date":1640278559,"creation_date":1640117056,"question_id":70441033,"body_markdown":"Let&#39;s say I have a String (call it s) with the following format:\r\n\r\n    [String] [String] [double] [int]\r\nfor example,\r\n&quot;YES james 3.5 2&quot;\r\nI would like to read this data into separate variables (a String, a String, a double, and an int)\r\n\r\nNote that I come from a C++ background. In C++, I would do something like the following:\r\n\r\n    std::istringstream iss{s};   // create a stream to the string\r\n    \r\n    std::string first, second; \r\n    double third = 0.0;\r\n    int fourth = 0;\r\n    iss &gt;&gt; first &gt;&gt; second &gt;&gt; third &gt;&gt; fourth;  // read data\r\nIn Java, I came up with the following code:\r\n\r\n    String[] sa = s.split(&quot; &quot;);\r\n    \t    \r\n\tString first = sa[0], second = sa[1];\r\n\tdouble third = Double.parseDouble(sa[2]);\r\n\tint fourth = Integer.parseInt(sa[3]);\r\nHowever, I will have to do this to many different inputs, so I would like to use the most efficient and fastest way of doing this. \r\n\r\n**Questions:**\r\n\r\n - Is there any more efficient/faster way of doing this? Perhaps a cleaner way? \r\n\r\n\r\n","title":"Java How to Read Data From a String (stringstream equivalent)","body":"<p>Let's say I have a String (call it s) with the following format:</p>\n<pre><code>[String] [String] [double] [int]\n</code></pre>\n<p>for example,\n&quot;YES james 3.5 2&quot;\nI would like to read this data into separate variables (a String, a String, a double, and an int)</p>\n<p>Note that I come from a C++ background. In C++, I would do something like the following:</p>\n<pre><code>std::istringstream iss{s};   // create a stream to the string\n\nstd::string first, second; \ndouble third = 0.0;\nint fourth = 0;\niss &gt;&gt; first &gt;&gt; second &gt;&gt; third &gt;&gt; fourth;  // read data\n</code></pre>\n<p>In Java, I came up with the following code:</p>\n<pre><code>String[] sa = s.split(&quot; &quot;);\n        \nString first = sa[0], second = sa[1];\ndouble third = Double.parseDouble(sa[2]);\nint fourth = Integer.parseInt(sa[3]);\n</code></pre>\n<p>However, I will have to do this to many different inputs, so I would like to use the most efficient and fastest way of doing this.</p>\n<p><strong>Questions:</strong></p>\n<ul>\n<li>Is there any more efficient/faster way of doing this? Perhaps a cleaner way?</li>\n</ul>\n"},{"tags":["java","intellij-idea","junit5","junit-jupiter"],"comments":[{"owner":{"account_id":2887220,"reputation":2184,"user_id":2476774,"display_name":"Afaq Ahmed Khan"},"score":0,"creation_date":1538457367,"post_id":52602351,"comment_id":92138889,"body_markdown":"could you show output results of junit","body":"could you show output results of junit"},{"owner":{"account_id":3532912,"reputation":537,"user_id":2951931,"accept_rate":50,"display_name":"Team"},"score":0,"creation_date":1538457591,"post_id":52602351,"comment_id":92138933,"body_markdown":"@afaq I have edited and attached the screen caption of Event log into my post.","body":"@afaq I have edited and attached the screen caption of Event log into my post."},{"owner":{"account_id":4708838,"reputation":3351,"user_id":3810024,"accept_rate":94,"display_name":"shinjw"},"score":0,"creation_date":1538460442,"post_id":52602351,"comment_id":92139689,"body_markdown":"Always gotta make sure.... did you build/make your changes?","body":"Always gotta make sure.... did you build/make your changes?"},{"owner":{"account_id":3532912,"reputation":537,"user_id":2951931,"accept_rate":50,"display_name":"Team"},"score":0,"creation_date":1538460728,"post_id":52602351,"comment_id":92139772,"body_markdown":"I don&#39;t understand. Can you please clarify what you mean? I&#39;m a newbie ^^&quot;. @shinjw","body":"I don&#39;t understand. Can you please clarify what you mean? I&#39;m a newbie ^^&quot;. @shinjw"},{"owner":{"account_id":4708838,"reputation":3351,"user_id":3810024,"accept_rate":94,"display_name":"shinjw"},"score":0,"creation_date":1538460954,"post_id":52602351,"comment_id":92139854,"body_markdown":"`Ctrl+F9`. Sometimes your latest changes does not make it to Runtime depending on how you have your IntelliJ set up.","body":"<code>Ctrl+F9</code>. Sometimes your latest changes does not make it to Runtime depending on how you have your IntelliJ set up."},{"owner":{"account_id":3532912,"reputation":537,"user_id":2951931,"accept_rate":50,"display_name":"Team"},"score":0,"creation_date":1538461232,"post_id":52602351,"comment_id":92139940,"body_markdown":"@shinjw i tried it, it still passed the test.","body":"@shinjw i tried it, it still passed the test."},{"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"score":5,"creation_date":1538468023,"post_id":52602351,"comment_id":92142940,"body_markdown":"When telling IntelliJ to execute a single test, it will always execute it - regardless of whether it is disabled or not. If executing the entire class, disabled tests _shouldn&#39;t_ be run, but maybe you discovered a bug for the case that the test class only contains a single test method. Try adding a second method and execute them individually as well as the class. If this turns out to be a bug, report it.","body":"When telling IntelliJ to execute a single test, it will always execute it - regardless of whether it is disabled or not. If executing the entire class, disabled tests <i>shouldn&#39;t</i> be run, but maybe you discovered a bug for the case that the test class only contains a single test method. Try adding a second method and execute them individually as well as the class. If this turns out to be a bug, report it."},{"owner":{"account_id":3532912,"reputation":537,"user_id":2951931,"accept_rate":50,"display_name":"Team"},"score":0,"creation_date":1538546366,"post_id":52602351,"comment_id":92174772,"body_markdown":"I tried to run it for 3 tests the result is the same, the system don&#39;t ignore a test. How can i report this bug to IntelliJ? just writing them an email?","body":"I tried to run it for 3 tests the result is the same, the system don&#39;t ignore a test. How can i report this bug to IntelliJ? just writing them an email?"}],"answers":[{"tags":[],"owner":{"account_id":10199714,"reputation":822,"user_id":7530402,"display_name":"staszko032"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1538491916,"creation_date":1538491916,"answer_id":52610934,"question_id":52602351,"body_markdown":"@Nicolai answer is 100% correct, IntelliJ will execute test if you force it to be executed by IntelliJ.\r\n\r\nHowever, if you want to enable `@Disabled` annotation in build management system, remember about surefire plugin ([details][1]). If it is missing, annotation will not work.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/52054577/disabled-is-not-working-in-junit5/52056043#52056043","title":"JUnit 5 Disabled is ignored?","body":"<p>@Nicolai answer is 100% correct, IntelliJ will execute test if you force it to be executed by IntelliJ.</p>\n\n<p>However, if you want to enable <code>@Disabled</code> annotation in build management system, remember about surefire plugin (<a href=\"https://stackoverflow.com/questions/52054577/disabled-is-not-working-in-junit5/52056043#52056043\">details</a>). If it is missing, annotation will not work.</p>\n"},{"tags":[],"owner":{"account_id":4859907,"reputation":345,"user_id":3919856,"accept_rate":69,"display_name":"Tony Falabella"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1571325632,"creation_date":1571259639,"answer_id":58421650,"question_id":52602351,"body_markdown":"I think this may be a bug with Maven SureFire Plugin where if you have a class with a single `@Test` and it&#39;s also `@Disabled` it still tries to run it.  I&#39;ve tried on maven-surefire-plugin:2.22.0, 2.22.2, and 3.0.0-M3 and all seem to have the issue.  \r\n\r\nTicket opened with Apache Maven team:\r\n\r\nhttps://issues.apache.org/jira/browse/SUREFIRE-1700?filter=-2\r\n\r\nTickets opened with JetBrains:\r\n\r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399720-IDEA-2019-2-2-Ultimate-Edition-ignores-Disabled-for-JUnit5-tests-having-a-single-Test-method\r\n\r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399760-IDEA-2019-2-2-Ultimate-Edition-requires-junit-vintage-engine-for-Maven-package-using-only-JUnit5\r\n","title":"JUnit 5 Disabled is ignored?","body":"<p>I think this may be a bug with Maven SureFire Plugin where if you have a class with a single <code>@Test</code> and it's also <code>@Disabled</code> it still tries to run it.  I've tried on maven-surefire-plugin:2.22.0, 2.22.2, and 3.0.0-M3 and all seem to have the issue.  </p>\n\n<p>Ticket opened with Apache Maven team:</p>\n\n<p><a href=\"https://issues.apache.org/jira/browse/SUREFIRE-1700?filter=-2\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SUREFIRE-1700?filter=-2</a></p>\n\n<p>Tickets opened with JetBrains:</p>\n\n<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399720-IDEA-2019-2-2-Ultimate-Edition-ignores-Disabled-for-JUnit5-tests-having-a-single-Test-method\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399720-IDEA-2019-2-2-Ultimate-Edition-ignores-Disabled-for-JUnit5-tests-having-a-single-Test-method</a></p>\n\n<p><a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399760-IDEA-2019-2-2-Ultimate-Edition-requires-junit-vintage-engine-for-Maven-package-using-only-JUnit5\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006399760-IDEA-2019-2-2-Ultimate-Edition-requires-junit-vintage-engine-for-Maven-package-using-only-JUnit5</a></p>\n"},{"tags":[],"owner":{"account_id":3277032,"reputation":1073,"user_id":2758738,"display_name":"tibor17"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572104783,"creation_date":1572104783,"answer_id":58572287,"question_id":52602351,"body_markdown":"@Tony Falabella\r\n\r\nIn the Jira I replied to you with a hint. Please use the latest snapshot version **3.0.0-SNAPSHOT** and let me know about this issue. This snapshot version can be found on Apache Nexus repository. Please provide us with your feedback asap during the development of the plugin and try to use snapshot version because this avoids new issues:\r\n\r\n    &lt;pluginRepository&gt;\r\n      &lt;id&gt;surefire-snapshot&lt;/id&gt;\r\n      &lt;name&gt;surefire-snapshot&lt;/name&gt;\r\n      &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\r\n      &lt;snapshots&gt;\r\n        &lt;enabled&gt;true&lt;/enabled&gt;\r\n      &lt;/snapshots&gt;\r\n     &lt;/pluginRepository&gt;\r\n    ...\r\n    &lt;build&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nIn Jira I found that you use \r\n\r\n    &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\r\n\r\nPlease do not use it. It is not related to you. It is related to usages by Surefire/Failsafe and IDEs only.","title":"JUnit 5 Disabled is ignored?","body":"<p>@Tony Falabella</p>\n\n<p>In the Jira I replied to you with a hint. Please use the latest snapshot version <strong>3.0.0-SNAPSHOT</strong> and let me know about this issue. This snapshot version can be found on Apache Nexus repository. Please provide us with your feedback asap during the development of the plugin and try to use snapshot version because this avoids new issues:</p>\n\n<pre><code>&lt;pluginRepository&gt;\n  &lt;id&gt;surefire-snapshot&lt;/id&gt;\n  &lt;name&gt;surefire-snapshot&lt;/name&gt;\n  &lt;url&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/url&gt;\n  &lt;snapshots&gt;\n    &lt;enabled&gt;true&lt;/enabled&gt;\n  &lt;/snapshots&gt;\n &lt;/pluginRepository&gt;\n...\n&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>In Jira I found that you use </p>\n\n<pre><code>&lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n</code></pre>\n\n<p>Please do not use it. It is not related to you. It is related to usages by Surefire/Failsafe and IDEs only.</p>\n"},{"tags":[],"owner":{"account_id":408478,"reputation":358,"user_id":779173,"display_name":"Greg Allen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640278247,"creation_date":1640278247,"answer_id":70465113,"question_id":52602351,"body_markdown":"With JUnit 5.8.2 and maven surefire 2.22.2 I see this issue also\r\n\r\nNB. only test methods whose name starts &quot;test...&quot; seem to be affected for me. If your test methods have a different name I can&#39;t reproduce the issue. Hence workaround is to rename the test method to not start &quot;test...&quot;","title":"JUnit 5 Disabled is ignored?","body":"<p>With JUnit 5.8.2 and maven surefire 2.22.2 I see this issue also</p>\n<p>NB. only test methods whose name starts &quot;test...&quot; seem to be affected for me. If your test methods have a different name I can't reproduce the issue. Hence workaround is to rename the test method to not start &quot;test...&quot;</p>\n"}],"owner":{"account_id":3532912,"reputation":537,"user_id":2951931,"accept_rate":50,"display_name":"Team"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12536,"favorite_count":0,"down_vote_count":1,"up_vote_count":14,"answer_count":4,"score":13,"last_activity_date":1640278247,"creation_date":1538457010,"question_id":52602351,"body_markdown":"I&#39;m using JUnit 5 with IntelliJ IDEA Community Edition version 2018.\r\n\r\nMy code is simple:\r\n\r\n    import org.junit.jupiter.api.Assertions;\r\n    import org.junit.jupiter.api.Disabled;\r\n    import org.junit.jupiter.api.Test;\r\n    import static org.junit.jupiter.api.Assertions.*;\r\n\r\n    class CalculatorTest {\r\n\r\n        @Disabled\r\n        @Test\r\n        void addTwoZeroNumerators(){\r\n        int[] resultExpected = {0,0};\r\n        assertArrayEquals(resultExpected, Calculator.calculate(0,0,0,1));\r\n    }\r\n\r\nI use `@Disabled`. But when I run the test, the Event log still report 1 test passed. Can someone tell me what&#39;s wrong with this? I want the system to Ignore this test.\r\n\r\nHere is the caption of the log section:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TYRRy.png","title":"JUnit 5 Disabled is ignored?","body":"<p>I'm using JUnit 5 with IntelliJ IDEA Community Edition version 2018.</p>\n\n<p>My code is simple:</p>\n\n<pre><code>import org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Disabled;\nimport org.junit.jupiter.api.Test;\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass CalculatorTest {\n\n    @Disabled\n    @Test\n    void addTwoZeroNumerators(){\n    int[] resultExpected = {0,0};\n    assertArrayEquals(resultExpected, Calculator.calculate(0,0,0,1));\n}\n</code></pre>\n\n<p>I use <code>@Disabled</code>. But when I run the test, the Event log still report 1 test passed. Can someone tell me what's wrong with this? I want the system to Ignore this test.</p>\n\n<p>Here is the caption of the log section:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TYRRy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TYRRy.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4223167,"reputation":125,"user_id":3457432,"display_name":"Sebasti&#225;n V&#225;squez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640274912,"creation_date":1640274912,"answer_id":70464498,"question_id":70464256,"body_markdown":"What about 2 blocks of code for each case?\r\n\r\n    Student student = studentRepository.findById(dt.getStudentId());\r\n    if(student == null){\r\n      Student newStudent = new Student();\r\n      //add data\r\n      newStudent.save();\r\n    } else {\r\n      student.setFirstName(dt.getFirstName());\r\n      student.setLastName(dt.getLastName ());\r\n      student.setPhone(dt.getPhone());\r\n      student.setAddress(dt.getAddress());\r\n      student.update();\r\n    }","title":"Java code is running select and update query for every data","body":"<p>What about 2 blocks of code for each case?</p>\n<pre><code>Student student = studentRepository.findById(dt.getStudentId());\nif(student == null){\n  Student newStudent = new Student();\n  //add data\n  newStudent.save();\n} else {\n  student.setFirstName(dt.getFirstName());\n  student.setLastName(dt.getLastName ());\n  student.setPhone(dt.getPhone());\n  student.setAddress(dt.getAddress());\n  student.update();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6950003,"reputation":1952,"user_id":5332914,"accept_rate":75,"display_name":"user404"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640278185,"creation_date":1640278185,"answer_id":70465100,"question_id":70464256,"body_markdown":"You can follow what @fladdimir mentioned. Or, here is my suggestion[will not provide any code, leaving up to you]:\r\n 1. filter objects which are old ones[contains id as I can see from your code]  and news ones in two separate lists\r\n 2. List all ids\r\n 3. use `id &lt;--&gt; object` as keyValue in a map\r\n 4. Query all the objects with idList you got using `IN` clause\r\n 5. Now, set value as you are doing in your 2nd code block from the map, add them in a list\r\n 6. merge this list with new objectList\r\n 7. save them altogether with saveAll(your_merged_list)\r\n\r\nI am not saying this is the optimized way, but at least you can reduce load on your db.","title":"Java code is running select and update query for every data","body":"<p>You can follow what @fladdimir mentioned. Or, here is my suggestion[will not provide any code, leaving up to you]:</p>\n<ol>\n<li>filter objects which are old ones[contains id as I can see from your code]  and news ones in two separate lists</li>\n<li>List all ids</li>\n<li>use <code>id &lt;--&gt; object</code> as keyValue in a map</li>\n<li>Query all the objects with idList you got using <code>IN</code> clause</li>\n<li>Now, set value as you are doing in your 2nd code block from the map, add them in a list</li>\n<li>merge this list with new objectList</li>\n<li>save them altogether with saveAll(your_merged_list)</li>\n</ol>\n<p>I am not saying this is the optimized way, but at least you can reduce load on your db.</p>\n"}],"owner":{"account_id":20628016,"reputation":89,"user_id":15143409,"display_name":"Kumar_Maddy "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640278185,"creation_date":1640273696,"question_id":70464256,"body_markdown":"I am writing a Java code in Spring JPA which can add or update a data when saveData function is called. what I am trying to do is that if data is new it gets added as a new record in the database or else it will be updated. \r\n\r\n```\r\npublic void saveData(List&lt;StudentTable&gt; studentTableList){  \r\n\r\n    List&lt; StudentTable &gt; data= new ArrayList&lt;&gt;();\r\n\r\n    for(StudentTable dt: studentTableList){\r\n        if(dt.getStudentId() ==null) {\r\n            data.add(dt);\r\n\r\n        }else{\r\n            studentRepository.findById(dt.getStudentId()).map(\r\n                    student-&gt;{\r\n                        student.setFirstName(dt.getFirstName());\r\n                        student.setLastName(dt.getLastName ());\r\n                        student.setPhone(dt.getPhone());\r\n                        student.setAddress(dt.getAddress());\r\n\r\n                        return data.add(student);\r\n                    });\r\n        }\r\n        studentRepository.saveAll(data);\r\n        data.clear();\r\n    }\r\n}\r\n```\r\n\r\nWhile this code is working fine I see performance issues as my entries grow. I see that update and select queries are run for each row of the table which is slowing down the performance. \r\n\r\nI want to know if there is any way to run queries only for those rows which are updated or added on a single post request or to improve the performance?\r\n","title":"Java code is running select and update query for every data","body":"<p>I am writing a Java code in Spring JPA which can add or update a data when saveData function is called. what I am trying to do is that if data is new it gets added as a new record in the database or else it will be updated.</p>\n<pre><code>public void saveData(List&lt;StudentTable&gt; studentTableList){  \n\n    List&lt; StudentTable &gt; data= new ArrayList&lt;&gt;();\n\n    for(StudentTable dt: studentTableList){\n        if(dt.getStudentId() ==null) {\n            data.add(dt);\n\n        }else{\n            studentRepository.findById(dt.getStudentId()).map(\n                    student-&gt;{\n                        student.setFirstName(dt.getFirstName());\n                        student.setLastName(dt.getLastName ());\n                        student.setPhone(dt.getPhone());\n                        student.setAddress(dt.getAddress());\n\n                        return data.add(student);\n                    });\n        }\n        studentRepository.saveAll(data);\n        data.clear();\n    }\n}\n</code></pre>\n<p>While this code is working fine I see performance issues as my entries grow. I see that update and select queries are run for each row of the table which is slowing down the performance.</p>\n<p>I want to know if there is any way to run queries only for those rows which are updated or added on a single post request or to improve the performance?</p>\n"},{"tags":["java","spring-boot","hibernate","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":18098038,"reputation":1240,"user_id":13156126,"display_name":"fladdimir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640277613,"creation_date":1640277613,"answer_id":70464995,"question_id":70464767,"body_markdown":"Try using Springs TransactionTemplate:\r\nhttps://docs.spring.io/spring-framework/docs/3.0.0.M4/reference/html/ch10s06.html\r\n\r\nIf your use case is (that) simple, Springs declarative transaction management should also let you achieve the behavior you ask for:\r\nhttps://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch11s05.html\r\n\r\n\r\n\r\n","title":"How to use EntityManager/Hibernate Transaction with @KafkaHandler","body":"<p>Try using Springs TransactionTemplate:\n<a href=\"https://docs.spring.io/spring-framework/docs/3.0.0.M4/reference/html/ch10s06.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/3.0.0.M4/reference/html/ch10s06.html</a></p>\n<p>If your use case is (that) simple, Springs declarative transaction management should also let you achieve the behavior you ask for:\n<a href=\"https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch11s05.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch11s05.html</a></p>\n"}],"owner":{"account_id":7193224,"reputation":634,"user_id":5492826,"accept_rate":25,"display_name":"emrekgn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":599,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70464995,"answer_count":1,"score":0,"last_activity_date":1640277613,"creation_date":1640276371,"question_id":70464767,"body_markdown":"Let&#39;s say I have a `@KafkaListener` class with a `@KafkaHandler` method inside that processes any received messages and does some DB operations. \r\n\r\nI want to have fine-grained control over how and when to commit (or rollback) the database changes (i.e. manually manage the DB transaction) in this class. The consumed message offset can be committed regardless of the DB transaction result.\r\n\r\nHere is a simplified version of what I have:\r\n\r\n```java\r\n@Service\r\n@RequiredArgsConstructor\r\n@KafkaListener(\r\n    topics = &quot;${kafka.topic.foo}&quot;,\r\n    groupId = &quot;${spring.kafka.consumer.group-id-foo}&quot;,\r\n    containerFactory = &quot;kafkaListenerContainerFactoryFoo&quot;)\r\npublic class FooMessageConsumer {\r\n\r\n  // ...\r\n  private final EntityManager entityManager;\r\n\r\n  @KafkaHandler\r\n  public void handleMessage(FooMessage msg) {\r\n    // ...\r\n    handleDBOperations(msg);\r\n    // ...\r\n  }\r\n\r\n  void handleDBOperations(msg) {\r\n    try {\r\n      entityManager.getTransaction().begin();\r\n\r\n      // ...\r\n\r\n      entityManager.getTransaction().commit();\r\n    } catch (Exception e) {\r\n      log.error(e.getLocalizedMessage(), e);\r\n      entityManager.getTransaction().rollback();\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nWhen a message is received and `entityManager.getTransaction().begin();` is invoked, this results in an exception: \r\n```\r\njava.lang.IllegalStateException: Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead\r\n```\r\nWhy am I not allowed to create a transaction here?\r\n\r\nAnd if I remove `EntityManager` and add `@Transactional` annotations to methods with DB operations (though this is not exactly what I want), then it results in another exception:\r\n```\r\nTransactionRequiredException Executing an update/delete query\r\n```\r\nIt seems like it completely ignores the annotation. Is this somehow related to Kafka consumer having its own transaction management?\r\n\r\nIn short, what am I doing wrong here and how can I manage DB transactions in a `@KafkaHandler` method? \r\n\r\nAny help is appreciated.\r\nThanks in advance.","title":"How to use EntityManager/Hibernate Transaction with @KafkaHandler","body":"<p>Let's say I have a <code>@KafkaListener</code> class with a <code>@KafkaHandler</code> method inside that processes any received messages and does some DB operations.</p>\n<p>I want to have fine-grained control over how and when to commit (or rollback) the database changes (i.e. manually manage the DB transaction) in this class. The consumed message offset can be committed regardless of the DB transaction result.</p>\n<p>Here is a simplified version of what I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\n@KafkaListener(\n    topics = &quot;${kafka.topic.foo}&quot;,\n    groupId = &quot;${spring.kafka.consumer.group-id-foo}&quot;,\n    containerFactory = &quot;kafkaListenerContainerFactoryFoo&quot;)\npublic class FooMessageConsumer {\n\n  // ...\n  private final EntityManager entityManager;\n\n  @KafkaHandler\n  public void handleMessage(FooMessage msg) {\n    // ...\n    handleDBOperations(msg);\n    // ...\n  }\n\n  void handleDBOperations(msg) {\n    try {\n      entityManager.getTransaction().begin();\n\n      // ...\n\n      entityManager.getTransaction().commit();\n    } catch (Exception e) {\n      log.error(e.getLocalizedMessage(), e);\n      entityManager.getTransaction().rollback();\n    }\n  }\n\n}\n</code></pre>\n<p>When a message is received and <code>entityManager.getTransaction().begin();</code> is invoked, this results in an exception:</p>\n<pre><code>java.lang.IllegalStateException: Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT instead\n</code></pre>\n<p>Why am I not allowed to create a transaction here?</p>\n<p>And if I remove <code>EntityManager</code> and add <code>@Transactional</code> annotations to methods with DB operations (though this is not exactly what I want), then it results in another exception:</p>\n<pre><code>TransactionRequiredException Executing an update/delete query\n</code></pre>\n<p>It seems like it completely ignores the annotation. Is this somehow related to Kafka consumer having its own transaction management?</p>\n<p>In short, what am I doing wrong here and how can I manage DB transactions in a <code>@KafkaHandler</code> method?</p>\n<p>Any help is appreciated.\nThanks in advance.</p>\n"},{"tags":["java","sorting","printing","comparator","priority-queue"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":4,"creation_date":1420574991,"post_id":27806315,"comment_id":44021768,"body_markdown":"@LuiggiMendoza: `toString` uses the iterator to display all objects.","body":"@LuiggiMendoza: <code>toString</code> uses the iterator to display all objects."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":2,"creation_date":1420575056,"post_id":27806315,"comment_id":44021786,"body_markdown":"@LuiggiMendoza From what I see in the code of AbstractCollection, toString uses an iterator, so it should print the elements in the order of traversal. That&#39;s the implementation of toString used by PriorityQueue (at least in Java 6).","body":"@LuiggiMendoza From what I see in the code of AbstractCollection, toString uses an iterator, so it should print the elements in the order of traversal. That&#39;s the implementation of toString used by PriorityQueue (at least in Java 6)."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":5,"creation_date":1420575165,"post_id":27806315,"comment_id":44021832,"body_markdown":"The Doc says: `The Iterator provided in method iterator() is not guaranteed to traverse the elements of the priority queue in any particular order.`","body":"The Doc says: <code>The Iterator provided in method iterator() is not guaranteed to traverse the elements of the priority queue in any particular order.</code>"},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":2,"creation_date":1420575225,"post_id":27806315,"comment_id":44021873,"body_markdown":"@Eran the iterator can&#39;t do that, it is a heap. You can&#39;t have it sorted without actually modifying the collection.","body":"@Eran the iterator can&#39;t do that, it is a heap. You can&#39;t have it sorted without actually modifying the collection."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":3,"creation_date":1420575318,"post_id":27806315,"comment_id":44021920,"body_markdown":"If you want a structure that will return the elements in order without altering the structure, use a `TreeSet` instead of a `PriorityQueue`.","body":"If you want a structure that will return the elements in order without altering the structure, use a <code>TreeSet</code> instead of a <code>PriorityQueue</code>."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1420575364,"post_id":27806315,"comment_id":44021946,"body_markdown":"@loolooo I am not sure `PriorityQueue` is best suited here. Consider a simple List and Collections.sort using your comparator, or maybe a `TreeSet`","body":"@loolooo I am not sure <code>PriorityQueue</code> is best suited here. Consider a simple List and Collections.sort using your comparator, or maybe a <code>TreeSet</code>"}],"answers":[{"tags":[],"owner":{"account_id":1806558,"reputation":4512,"user_id":1643558,"accept_rate":73,"display_name":"tgkprog"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1420575213,"creation_date":1420574792,"answer_id":27806345,"question_id":27806315,"body_markdown":"You want lower frequency to go higher so :\r\n\r\n      public int compare(TreeNodeHuffman p1, TreeNodeHuffman p2) {\r\n              if (p1.frequency &lt; p2.frequency) return 1;\r\n              if (p1.frequency &gt; p2.frequency) return -1;\r\n              return 0;\r\n          }    \r\n       }\r\n\r\nIf you want to test it, send it to a single threaded pool and see the order of jobs being processed instead of to string or iterator. as doc says at http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#iterator%28%29 :\r\n\r\n&gt; Returns an iterator over the elements in this queue. The iterator does not return the elements in any particular order.\r\n\r\n\r\nCan see http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29 for a quick single threaded pool to test this.","title":"Why does PriorityQueue.toString return the wrong element order?","body":"<p>You want lower frequency to go higher so :</p>\n\n<pre><code>  public int compare(TreeNodeHuffman p1, TreeNodeHuffman p2) {\n          if (p1.frequency &lt; p2.frequency) return 1;\n          if (p1.frequency &gt; p2.frequency) return -1;\n          return 0;\n      }    \n   }\n</code></pre>\n\n<p>If you want to test it, send it to a single threaded pool and see the order of jobs being processed instead of to string or iterator. as doc says at <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#iterator%28%29\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#iterator%28%29</a> :</p>\n\n<blockquote>\n  <p>Returns an iterator over the elements in this queue. The iterator does not return the elements in any particular order.</p>\n</blockquote>\n\n<p>Can see <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29</a> for a quick single threaded pool to test this.</p>\n"},{"tags":[],"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1420575065,"creation_date":1420575065,"answer_id":27806421,"question_id":27806315,"body_markdown":"You need to poll the items from the `PriorityQueue` one by one. `toString` doesn&#39;t do that.\r\n\r\nSo instead of your `System.out.println(queue);` do this:\r\n\r\n    while(!queue.isEmpty()) {\r\n       System.out.println(queue.poll());\r\n    }\r\n\r\nThe reason is that the `PriorityQueue` is never completely sorted internally, lookup how a heap works for more detail. Polling items from it fixes the heap during the calls, thus it should output the elements in sorted order.","title":"Why does PriorityQueue.toString return the wrong element order?","body":"<p>You need to poll the items from the <code>PriorityQueue</code> one by one. <code>toString</code> doesn't do that.</p>\n\n<p>So instead of your <code>System.out.println(queue);</code> do this:</p>\n\n<pre><code>while(!queue.isEmpty()) {\n   System.out.println(queue.poll());\n}\n</code></pre>\n\n<p>The reason is that the <code>PriorityQueue</code> is never completely sorted internally, lookup how a heap works for more detail. Polling items from it fixes the heap during the calls, thus it should output the elements in sorted order.</p>\n"},{"tags":[],"owner":{"display_name":"user2770375"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1420577225,"creation_date":1420577225,"answer_id":27806903,"question_id":27806315,"body_markdown":"The `System.out.println(queue)` is printing the queue unsorted. If you want to print the queue real order follow the below code which use poll to get the elements from the queue top to bottom:\r\n\r\n    TreeNodeHuffman tn = null;\r\n        do{\r\n            tn = queue.poll();\r\n            if(tn!=null){\r\n                System.out.print(tn.key+&quot;,&quot;);\r\n            }\r\n        }while(tn != null);\r\n\r\nand you shall see this output as expected:\r\n\r\n&gt; z,q,x,j,k,v,b,p,y,g,f,w,m,u,c,l,d,r,h,s,a,i,o,a,t,e,","title":"Why does PriorityQueue.toString return the wrong element order?","body":"<p>The <code>System.out.println(queue)</code> is printing the queue unsorted. If you want to print the queue real order follow the below code which use poll to get the elements from the queue top to bottom:</p>\n\n<pre><code>TreeNodeHuffman tn = null;\n    do{\n        tn = queue.poll();\n        if(tn!=null){\n            System.out.print(tn.key+\",\");\n        }\n    }while(tn != null);\n</code></pre>\n\n<p>and you shall see this output as expected:</p>\n\n<blockquote>\n  <p>z,q,x,j,k,v,b,p,y,g,f,w,m,u,c,l,d,r,h,s,a,i,o,a,t,e,</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1580007,"reputation":13268,"user_id":1465553,"accept_rate":68,"display_name":"Saurav Sahu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536997677,"creation_date":1534946530,"answer_id":51968633,"question_id":27806315,"body_markdown":"@Thomas answer works. \r\n\r\nMy approach is to produce same result **without actually emptying the queue** . So, instead I created a wrapper over the `PriorityQueue`, and implemented `next()` and `hasNext()` for it. Also, to exactly simulate the priority queue behavior, `extend AbstractQueue` and  **delegate** calls to methods like `offer`, `peek`, `poll` and `size` through PriorityQueue object.\r\n\r\n    priorityQueueObject.methodName()\r\n\r\nDisclaimer: This does cost copying the whole queue into a list and doing the sorting over it.\r\n\r\n    public class MyPriorityQueue&lt;E extends Comparable&lt;T&gt;, T&gt; extends AbstractQueue&lt;E&gt; {\r\n        Integer arrOfInts[] = { 11, 7, 15, 10, 2, 1, 4, 5, 7, 2, 18, 1, 19};\r\n    \tPriorityQueue&lt;E&gt; pq = new PriorityQueue&lt;&gt;();\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tMyPriorityQueue mpq = new MyPriorityQueue&lt;&gt;();\r\n    \t\tmpq.addAll(Arrays.asList(arrOfInts));\r\n    \r\n    \t\t//Using iterator\r\n    \t\tIterator it = mpq.iterator();\r\n    \t\tSystem.out.println(&quot;The internal priority queue:&quot;  + mpq.pq);\r\n    \t\tSystem.out.println(&quot;Using Iterator:&quot;);\r\n    \t\twhile(it.hasNext()) {\r\n    \t\t\tSystem.out.print(it.next() + &quot;, &quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;\\nUsing simple system out println:&quot;);\r\n    \t\tSystem.out.println(mpq);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Using foreach: &quot;);\r\n    \t\tfor(Object o : mpq) {\r\n    \t\t\tSystem.out.print(o + &quot;, &quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic boolean offer(E arg0) {\r\n    \t\treturn pq.offer(arg0);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E peek() {\r\n    \t\treturn pq.peek();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic E poll() {\r\n    \t\treturn pq.poll();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Iterator&lt;E&gt; iterator() {\r\n    \t\tArrayList&lt;E&gt; list = new ArrayList(Arrays.asList(pq.toArray()));\r\n    \t\tCollections.sort(list, null);\r\n    \t\treturn new Iterator&lt;E&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean hasNext() {\r\n    \t\t\t\treturn !list.isEmpty();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic E next() {\r\n    \t\t\t\tassert (hasNext());\r\n    \t\t\t\treturn list.remove(0);\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int size() {\r\n    \t\treturn pq.size();\r\n    \t}\r\n    }\r\n\r\n\r\nprints:\r\n\r\n    The internal priority queue:[1, 2, 1, 7, 5, 2, 4, 11, 7, 10, 18, 15, 19]\r\n    Using Iterator:\r\n    1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19, \r\n    Using simple system out println:\r\n    [1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19]\r\n    Using foreach: \r\n    1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19, \r\n\r\n","title":"Why does PriorityQueue.toString return the wrong element order?","body":"<p>@Thomas answer works. </p>\n\n<p>My approach is to produce same result <strong>without actually emptying the queue</strong> . So, instead I created a wrapper over the <code>PriorityQueue</code>, and implemented <code>next()</code> and <code>hasNext()</code> for it. Also, to exactly simulate the priority queue behavior, <code>extend AbstractQueue</code> and  <strong>delegate</strong> calls to methods like <code>offer</code>, <code>peek</code>, <code>poll</code> and <code>size</code> through PriorityQueue object.</p>\n\n<pre><code>priorityQueueObject.methodName()\n</code></pre>\n\n<p>Disclaimer: This does cost copying the whole queue into a list and doing the sorting over it.</p>\n\n<pre><code>public class MyPriorityQueue&lt;E extends Comparable&lt;T&gt;, T&gt; extends AbstractQueue&lt;E&gt; {\n    Integer arrOfInts[] = { 11, 7, 15, 10, 2, 1, 4, 5, 7, 2, 18, 1, 19};\n    PriorityQueue&lt;E&gt; pq = new PriorityQueue&lt;&gt;();\n\n    public static void main(String[] args) {\n        MyPriorityQueue mpq = new MyPriorityQueue&lt;&gt;();\n        mpq.addAll(Arrays.asList(arrOfInts));\n\n        //Using iterator\n        Iterator it = mpq.iterator();\n        System.out.println(\"The internal priority queue:\"  + mpq.pq);\n        System.out.println(\"Using Iterator:\");\n        while(it.hasNext()) {\n            System.out.print(it.next() + \", \");\n        }\n\n        System.out.println(\"\\nUsing simple system out println:\");\n        System.out.println(mpq);\n\n        System.out.println(\"Using foreach: \");\n        for(Object o : mpq) {\n            System.out.print(o + \", \");\n        }\n    }\n\n    @Override\n    public boolean offer(E arg0) {\n        return pq.offer(arg0);\n    }\n\n    @Override\n    public E peek() {\n        return pq.peek();\n    }\n\n    @Override\n    public E poll() {\n        return pq.poll();\n    }\n\n    @Override\n    public Iterator&lt;E&gt; iterator() {\n        ArrayList&lt;E&gt; list = new ArrayList(Arrays.asList(pq.toArray()));\n        Collections.sort(list, null);\n        return new Iterator&lt;E&gt;() {\n            @Override\n            public boolean hasNext() {\n                return !list.isEmpty();\n            }\n\n            @Override\n            public E next() {\n                assert (hasNext());\n                return list.remove(0);\n            }\n        };\n    }\n\n    @Override\n    public int size() {\n        return pq.size();\n    }\n}\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>The internal priority queue:[1, 2, 1, 7, 5, 2, 4, 11, 7, 10, 18, 15, 19]\nUsing Iterator:\n1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19, \nUsing simple system out println:\n[1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19]\nUsing foreach: \n1, 1, 2, 2, 4, 5, 7, 7, 10, 11, 15, 18, 19, \n</code></pre>\n"}],"owner":{"account_id":4499288,"reputation":181,"user_id":3658277,"display_name":"loolooo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5552,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"closed_date":1640283501,"accepted_answer_id":27806421,"answer_count":4,"score":16,"last_activity_date":1640277243,"creation_date":1420574659,"question_id":27806315,"body_markdown":"I am trying to make a priority queue in java with the nodes with the lowest frequency in priority. However, my comparator is not working and the output is very weird. I believe I need to change my comparator but I am not sure how to change it. \r\nHere is my code: \r\n\r\n    public class HuffmanComparator implements Comparator&lt;TreeNodeHuffman&gt; {\r\n\t    public int compare(TreeNodeHuffman p1, TreeNodeHuffman p2) {\r\n\t    \tif (p1.frequency &lt; p2.frequency) return -1;\r\n\t        if (p1.frequency &gt; p2.frequency) return 1;\r\n\t        return 0;\r\n\t    }    \r\n\t}\r\n\r\n    public class TreeNodeHuffman {\r\n    public static void main(String[] args) {\t\r\n\t\tHuffmanComparator compare = new HuffmanComparator();\r\n\t\tTreeNodeHuffman e = new TreeNodeHuffman(&#39;e&#39;, 12702);\r\n\t\tTreeNodeHuffman t = new TreeNodeHuffman(&#39;t&#39;, 9056);\r\n\t\tTreeNodeHuffman a = new TreeNodeHuffman(&#39;a&#39;, 8167);\r\n\t\tTreeNodeHuffman o = new TreeNodeHuffman(&#39;o&#39;, 7507);\r\n\t\tTreeNodeHuffman i = new TreeNodeHuffman(&#39;i&#39;, 6966);\r\n\t\tTreeNodeHuffman n = new TreeNodeHuffman(&#39;a&#39;, 6749);\r\n\t\tTreeNodeHuffman s = new TreeNodeHuffman(&#39;s&#39;, 6327);\r\n\t\tTreeNodeHuffman h = new TreeNodeHuffman(&#39;h&#39;, 6094);\r\n\t\tTreeNodeHuffman r = new TreeNodeHuffman(&#39;r&#39;, 5987);\r\n\t\tTreeNodeHuffman d = new TreeNodeHuffman(&#39;d&#39;, 4253);\r\n\t\tTreeNodeHuffman l = new TreeNodeHuffman(&#39;l&#39;, 4025);\r\n\t\tTreeNodeHuffman c = new TreeNodeHuffman(&#39;c&#39;, 2782);\r\n\t\tTreeNodeHuffman u = new TreeNodeHuffman(&#39;u&#39;, 2758);\r\n\t\tTreeNodeHuffman m = new TreeNodeHuffman(&#39;m&#39;, 2406);\r\n\t\tTreeNodeHuffman w = new TreeNodeHuffman(&#39;w&#39;, 2360);\r\n\t\tTreeNodeHuffman f = new TreeNodeHuffman(&#39;f&#39;, 2228);\r\n\t\tTreeNodeHuffman g = new TreeNodeHuffman(&#39;g&#39;, 2015);\r\n\t\tTreeNodeHuffman y = new TreeNodeHuffman(&#39;y&#39;, 1974);\r\n\t\tTreeNodeHuffman p = new TreeNodeHuffman(&#39;p&#39;, 1929);\r\n\t\tTreeNodeHuffman b = new TreeNodeHuffman(&#39;b&#39;, 1492);\r\n\t\tTreeNodeHuffman v = new TreeNodeHuffman(&#39;v&#39;, 978);\r\n\t\tTreeNodeHuffman k = new TreeNodeHuffman(&#39;k&#39;, 772);\r\n\t\tTreeNodeHuffman j = new TreeNodeHuffman(&#39;j&#39;, 153);\r\n\t\tTreeNodeHuffman x = new TreeNodeHuffman(&#39;x&#39;, 150);\r\n\t\tTreeNodeHuffman q = new TreeNodeHuffman(&#39;q&#39;, 95);\r\n\t\tTreeNodeHuffman z = new TreeNodeHuffman(&#39;z&#39;, 74);\r\n\t\tPriorityQueue&lt;TreeNodeHuffman&gt; queue = new PriorityQueue&lt;TreeNodeHuffman&gt;(26, compare);\r\n\t\tqueue.add(e);\r\n\t\tqueue.add(t);\r\n\t\tqueue.add(a);\r\n\t\tqueue.add(o);\r\n\t\tqueue.add(i);\r\n\t\tqueue.add(n);\r\n\t\tqueue.add(s);\r\n\t\tqueue.add(h);\r\n\t\tqueue.add(r);\r\n\t\tqueue.add(d);\r\n\t\tqueue.add(l);\r\n\t\tqueue.add(c);\r\n\t\tqueue.add(u);\r\n\t\tqueue.add(m);\r\n\t\tqueue.add(w);\r\n\t\tqueue.add(f);\r\n\t\tqueue.add(g);\r\n\t\tqueue.add(y);\r\n\t\tqueue.add(p);\r\n\t\tqueue.add(b);\r\n\t\tqueue.add(v);\r\n\t\tqueue.add(k);\r\n\t\tqueue.add(j);\r\n\t\tqueue.add(x);\r\n\t\tqueue.add(q);\r\n\t\tqueue.add(z);\r\n\t\tSystem.out.println(queue);\r\n\t}\r\n    }\r\nThe output is as follows:\r\n[z, k, q, g, v, x, u, d, f, y, b, m, j, i, c, e, s, o, w, a, r, h, p, t, l, a].\r\n\r\nHowever, the output should be [z, q, x, j, k, v, b........].\r\n","title":"Why does PriorityQueue.toString return the wrong element order?","body":"<p>I am trying to make a priority queue in java with the nodes with the lowest frequency in priority. However, my comparator is not working and the output is very weird. I believe I need to change my comparator but I am not sure how to change it.\nHere is my code:</p>\n<pre><code>public class HuffmanComparator implements Comparator&lt;TreeNodeHuffman&gt; {\n    public int compare(TreeNodeHuffman p1, TreeNodeHuffman p2) {\n        if (p1.frequency &lt; p2.frequency) return -1;\n        if (p1.frequency &gt; p2.frequency) return 1;\n        return 0;\n    }    \n}\n\npublic class TreeNodeHuffman {\npublic static void main(String[] args) {    \n    HuffmanComparator compare = new HuffmanComparator();\n    TreeNodeHuffman e = new TreeNodeHuffman('e', 12702);\n    TreeNodeHuffman t = new TreeNodeHuffman('t', 9056);\n    TreeNodeHuffman a = new TreeNodeHuffman('a', 8167);\n    TreeNodeHuffman o = new TreeNodeHuffman('o', 7507);\n    TreeNodeHuffman i = new TreeNodeHuffman('i', 6966);\n    TreeNodeHuffman n = new TreeNodeHuffman('a', 6749);\n    TreeNodeHuffman s = new TreeNodeHuffman('s', 6327);\n    TreeNodeHuffman h = new TreeNodeHuffman('h', 6094);\n    TreeNodeHuffman r = new TreeNodeHuffman('r', 5987);\n    TreeNodeHuffman d = new TreeNodeHuffman('d', 4253);\n    TreeNodeHuffman l = new TreeNodeHuffman('l', 4025);\n    TreeNodeHuffman c = new TreeNodeHuffman('c', 2782);\n    TreeNodeHuffman u = new TreeNodeHuffman('u', 2758);\n    TreeNodeHuffman m = new TreeNodeHuffman('m', 2406);\n    TreeNodeHuffman w = new TreeNodeHuffman('w', 2360);\n    TreeNodeHuffman f = new TreeNodeHuffman('f', 2228);\n    TreeNodeHuffman g = new TreeNodeHuffman('g', 2015);\n    TreeNodeHuffman y = new TreeNodeHuffman('y', 1974);\n    TreeNodeHuffman p = new TreeNodeHuffman('p', 1929);\n    TreeNodeHuffman b = new TreeNodeHuffman('b', 1492);\n    TreeNodeHuffman v = new TreeNodeHuffman('v', 978);\n    TreeNodeHuffman k = new TreeNodeHuffman('k', 772);\n    TreeNodeHuffman j = new TreeNodeHuffman('j', 153);\n    TreeNodeHuffman x = new TreeNodeHuffman('x', 150);\n    TreeNodeHuffman q = new TreeNodeHuffman('q', 95);\n    TreeNodeHuffman z = new TreeNodeHuffman('z', 74);\n    PriorityQueue&lt;TreeNodeHuffman&gt; queue = new PriorityQueue&lt;TreeNodeHuffman&gt;(26, compare);\n    queue.add(e);\n    queue.add(t);\n    queue.add(a);\n    queue.add(o);\n    queue.add(i);\n    queue.add(n);\n    queue.add(s);\n    queue.add(h);\n    queue.add(r);\n    queue.add(d);\n    queue.add(l);\n    queue.add(c);\n    queue.add(u);\n    queue.add(m);\n    queue.add(w);\n    queue.add(f);\n    queue.add(g);\n    queue.add(y);\n    queue.add(p);\n    queue.add(b);\n    queue.add(v);\n    queue.add(k);\n    queue.add(j);\n    queue.add(x);\n    queue.add(q);\n    queue.add(z);\n    System.out.println(queue);\n}\n}\n</code></pre>\n<p>The output is as follows:\n[z, k, q, g, v, x, u, d, f, y, b, m, j, i, c, e, s, o, w, a, r, h, p, t, l, a].</p>\n<p>However, the output should be [z, q, x, j, k, v, b........].</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1640271452,"post_id":70463732,"comment_id":124558828,"body_markdown":"Have you tried to set `clean install` at the end of the command? `mvn -f ../&lt;some-path&gt;/pom.xml -Pear -DskipTests clean install`","body":"Have you tried to set <code>clean install</code> at the end of the command? <code>mvn -f ..&#47;&lt;some-path&gt;&#47;pom.xml -Pear -DskipTests clean install</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640271709,"post_id":70463732,"comment_id":124558915,"body_markdown":"is the profile available/visible/known to `/&lt;some-path&gt;/pom.xml` ? otherwise maven console should output: `[WARNING] The requested profile &quot;ear&quot; could not...`, if the profile is properly applied, it should also be visible in the logs...","body":"is the profile available/visible/known to <code>&#47;&lt;some-path&gt;&#47;pom.xml</code> ? otherwise maven console should output: <code>[WARNING] The requested profile &quot;ear&quot; could not...</code>, if the profile is properly applied, it should also be visible in the logs..."},{"owner":{"account_id":22565,"reputation":11004,"user_id":55794,"accept_rate":54,"display_name":"emeraldjava"},"score":0,"creation_date":1640271756,"post_id":70463732,"comment_id":124558935,"body_markdown":"I think you need a space between -P and the profile you want to run. The command should work, so are you 100% sure the file is being picked up. Add -X to the command you&#39;ll get more detail.","body":"I think you need a space between -P and the profile you want to run. The command should work, so are you 100% sure the file is being picked up. Add -X to the command you&#39;ll get more detail."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640271895,"post_id":70463732,"comment_id":124558991,"body_markdown":"is there reason why you call maven via `../..` instead of moving into the appropriate directory ?","body":"is there reason why you call maven via <code>..&#47;..</code> instead of moving into the appropriate directory ?"},{"owner":{"account_id":20279529,"reputation":107,"user_id":16368673,"display_name":"Saltuk Kezer"},"score":0,"creation_date":1640272036,"post_id":70463732,"comment_id":124559050,"body_markdown":"So the actual thing is that i&#39;m trying to execute the mvn clean install from a folder that is a subfolder of the project folder. But it doesn&#39;t work like i&#39;m trying it. If i navigate to the project folder it works (without the -f). The command is also working, the profile is just not getting applied. xerx593 I&#39;m not getting an error, Turing85 didn&#39;t help, emeraldjava I will try the -X","body":"So the actual thing is that i&#39;m trying to execute the mvn clean install from a folder that is a subfolder of the project folder. But it doesn&#39;t work like i&#39;m trying it. If i navigate to the project folder it works (without the -f). The command is also working, the profile is just not getting applied. xerx593 I&#39;m not getting an error, Turing85 didn&#39;t help, emeraldjava I will try the -X"},{"owner":{"account_id":20279529,"reputation":107,"user_id":16368673,"display_name":"Saltuk Kezer"},"score":0,"creation_date":1640272059,"post_id":70463732,"comment_id":124559056,"body_markdown":"@khmarbaise I&#39;m trying to running it via an automated script that is in a subfolder of the project","body":"@khmarbaise I&#39;m trying to running it via an automated script that is in a subfolder of the project"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1640272213,"post_id":70463732,"comment_id":124559115,"body_markdown":"The command looks(*is*) ok! If you don&#39;t get [WARNING], then profile is applied! (your assumptions/expectations/observations could be wrong, or some ( thing/profile) interferes..?)","body":"The command looks(<i>is</i>) ok! If you don&#39;t get [WARNING], then profile is applied! (your assumptions/expectations/observations could be wrong, or some ( thing/profile) interferes..?)"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272412,"post_id":70463732,"comment_id":124559195,"body_markdown":"What do you mean by running within a subfolder ? First get it working on plain command line and afterwards automate it...","body":"What do you mean by running within a subfolder ? First get it working on plain command line and afterwards automate it..."}],"answers":[{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640273086,"creation_date":1640273086,"answer_id":70464117,"question_id":70463732,"body_markdown":"I think maybe -f doesn&#39;t work as you think it does. See this answer: https://stackoverflow.com/questions/6478536/how-to-run-maven-from-another-directory-without-cd-to-project-dir\r\n\r\nIf your project uses relative pom locations, this breaks.\r\n\r\nSee also: https://maven.apache.org/plugin-developers/common-bugs.html#Resolving_Relative_Paths","title":"Maven file and profile at the same time not working?","body":"<p>I think maybe -f doesn't work as you think it does. See this answer: <a href=\"https://stackoverflow.com/questions/6478536/how-to-run-maven-from-another-directory-without-cd-to-project-dir\">How to run Maven from another directory (without cd to project dir)?</a></p>\n<p>If your project uses relative pom locations, this breaks.</p>\n<p>See also: <a href=\"https://maven.apache.org/plugin-developers/common-bugs.html#Resolving_Relative_Paths\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugin-developers/common-bugs.html#Resolving_Relative_Paths</a></p>\n"},{"tags":[],"owner":{"account_id":20279529,"reputation":107,"user_id":16368673,"display_name":"Saltuk Kezer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640277220,"creation_date":1640277220,"answer_id":70464915,"question_id":70463732,"body_markdown":"````\r\ncd ..\r\ncall mvn -DskipTests -Pear clean install\r\ncd &lt;some-path&gt;\r\n````\r\n\r\nI did it like this now and it works. Thanks for @Adriaan Koster for the hint with the relative poms. That seems to have been it. And maybe i should use absolute paths instead :)","title":"Maven file and profile at the same time not working?","body":"<pre><code>cd ..\ncall mvn -DskipTests -Pear clean install\ncd &lt;some-path&gt;\n</code></pre>\n<p>I did it like this now and it works. Thanks for @Adriaan Koster for the hint with the relative poms. That seems to have been it. And maybe i should use absolute paths instead :)</p>\n"}],"owner":{"account_id":20279529,"reputation":107,"user_id":16368673,"display_name":"Saltuk Kezer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640277220,"creation_date":1640271086,"question_id":70463732,"body_markdown":"I&#39;m trying to execute a maven command like the following:\r\n\r\n```\r\nmvn clean install -f ../&lt;some-path&gt;/pom.xml -Pear -DskipTests\r\n```\r\n\r\nFor some reason this command is not working correctly. The profile is not getting applied. What is the problem here?","title":"Maven file and profile at the same time not working?","body":"<p>I'm trying to execute a maven command like the following:</p>\n<pre><code>mvn clean install -f ../&lt;some-path&gt;/pom.xml -Pear -DskipTests\n</code></pre>\n<p>For some reason this command is not working correctly. The profile is not getting applied. What is the problem here?</p>\n"},{"tags":["java","android","xml","xml-parsing"],"comments":[{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":1,"creation_date":1640276587,"post_id":70464482,"comment_id":124560583,"body_markdown":"There may be at most one XML declaration in an XML document, and if present, it must appear at the very top of the document -- no visible or invisible characters are allowed to be before it.  See duplicate link for further details.","body":"There may be at most one XML declaration in an XML document, and if present, it must appear at the very top of the document -- no visible or invisible characters are allowed to be before it.  See duplicate link for further details."},{"owner":{"account_id":22140465,"reputation":61,"user_id":16759752,"display_name":"Md Anik"},"score":1,"creation_date":1640276947,"post_id":70464482,"comment_id":124560695,"body_markdown":"thanks,there was a space before &lt;?xml....","body":"thanks,there was a space before &lt;?xml...."},{"owner":{"account_id":109492,"reputation":107225,"user_id":290085,"display_name":"kjhughes"},"score":1,"creation_date":1640277218,"post_id":70464482,"comment_id":124560773,"body_markdown":"You&#39;re welcome.  Feel free to upvote the question and answer at the duplicate link to show they helped.  (You now have voting privileges as you&#39;ve reached 15 rep.)","body":"You&#39;re welcome.  Feel free to upvote the question and answer at the duplicate link to show they helped.  (You now have voting privileges as you&#39;ve reached 15 rep.)"}],"owner":{"account_id":22140465,"reputation":61,"user_id":16759752,"display_name":"Md Anik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1640276451,"answer_count":0,"score":0,"last_activity_date":1640277165,"creation_date":1640274859,"question_id":70464482,"body_markdown":"I am getting this error suddenly as the title says.. I am stuck.. What&#39;s the meaning of this error and are there any possible solutions there?\r\nCode:\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;fill_parent&quot;\r\n    android:layout_height=&quot;fill_parent&quot;\r\n    android:background=&quot;@color/white&quot;\r\n    android:gravity=&quot;center&quot;\r\n    android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/Edit_Text_1&quot;\r\n        android:layout_width=&quot;140dp&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:hint=&quot;@string/Edit_Text_1_Hint&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        android:textStyle=&quot;bold&quot;\r\n        android:backgroundTint=&quot;@color/purple_500&quot;&gt;\r\n    &lt;/EditText&gt;\r\n\r\n    &lt;EditText\r\n        android:id=&quot;@+id/Edit_Text_2&quot;\r\n        android:layout_width=&quot;140dp&quot;\r\n        android:layout_height=&quot;50dp&quot;\r\n        android:hint=&quot;@string/Edit_Text_2_Hint&quot;\r\n        android:textSize=&quot;20sp&quot;\r\n        android:textStyle=&quot;bold&quot;\r\n        android:textColor=&quot;@color/black&quot;\r\n        android:backgroundTint=&quot;@color/purple_500&quot;&gt;\r\n    &lt;/EditText&gt;\r\n\r\n     &lt;/LinearLayout&gt;\r\n","title":"Error: XML declaration should precede all document content","body":"<p>I am getting this error suddenly as the title says.. I am stuck.. What's the meaning of this error and are there any possible solutions there?\nCode:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:layout_width=&quot;fill_parent&quot;\nandroid:layout_height=&quot;fill_parent&quot;\nandroid:background=&quot;@color/white&quot;\nandroid:gravity=&quot;center&quot;\nandroid:orientation=&quot;horizontal&quot;&gt;\n\n&lt;EditText\n    android:id=&quot;@+id/Edit_Text_1&quot;\n    android:layout_width=&quot;140dp&quot;\n    android:layout_height=&quot;50dp&quot;\n    android:hint=&quot;@string/Edit_Text_1_Hint&quot;\n    android:textSize=&quot;20sp&quot;\n    android:textStyle=&quot;bold&quot;\n    android:backgroundTint=&quot;@color/purple_500&quot;&gt;\n&lt;/EditText&gt;\n\n&lt;EditText\n    android:id=&quot;@+id/Edit_Text_2&quot;\n    android:layout_width=&quot;140dp&quot;\n    android:layout_height=&quot;50dp&quot;\n    android:hint=&quot;@string/Edit_Text_2_Hint&quot;\n    android:textSize=&quot;20sp&quot;\n    android:textStyle=&quot;bold&quot;\n    android:textColor=&quot;@color/black&quot;\n    android:backgroundTint=&quot;@color/purple_500&quot;&gt;\n&lt;/EditText&gt;\n\n &lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","database-schema","h2","auto-generate"],"comments":[{"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"score":0,"creation_date":1494242366,"post_id":43846284,"comment_id":74728196,"body_markdown":"try with this http://localhost:8082/h2-console and use this as the jdbl url to connect  jdbc:h2:mem:testdb","body":"try with this <a href=\"http://localhost:8082/h2-console\" rel=\"nofollow noreferrer\">localhost:8082/h2-console</a> and use this as the jdbl url to connect  jdbc:h2:mem:testdb"}],"answers":[{"tags":[],"owner":{"account_id":5728153,"reputation":872,"user_id":4524563,"display_name":"fiskra"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1494244003,"creation_date":1494244003,"answer_id":43846845,"question_id":43846284,"body_markdown":"If you want to see your tables on h2 console in your application, you don&#39;t need to install &quot;Console Application&quot;. You just need to **enable** to see visually and also set your datasource url in `application.properties` . It seems like that:\r\n\r\n    spring.datasource.url=jdbc:h2:mem:nprensen;(or if you have already a ds you should write that url)\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/console  // this is the path for h2 console:localhost:8080/console","title":"Visualizing an embedded H2 database","body":"<p>If you want to see your tables on h2 console in your application, you don't need to install \"Console Application\". You just need to <strong>enable</strong> to see visually and also set your datasource url in <code>application.properties</code> . It seems like that:</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:mem:nprensen;(or if you have already a ds you should write that url)\nspring.h2.console.enabled=true\nspring.h2.console.path=/console  // this is the path for h2 console:localhost:8080/console\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14316556,"reputation":15,"user_id":10341178,"display_name":"Mowrish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640276811,"creation_date":1638261428,"answer_id":70166414,"question_id":43846284,"body_markdown":"Please add the following dependency you can serve http requests. In that way, you can send a http request to access h2 console from your browser.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Visualizing an embedded H2 database","body":"<p>Please add the following dependency you can serve http requests. In that way, you can send a http request to access h2 console from your browser.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":7826717,"reputation":3033,"user_id":5961990,"accept_rate":29,"display_name":"garci560"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3337,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640276811,"creation_date":1494242238,"question_id":43846284,"body_markdown":"I&#39;m trying to configure and use a H2 embedded DB with Spring Boot. I&#39;m using the code provided in [the doc][1]:\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        return new EmbeddedDatabase db = new EmbeddedDatabaseBuilder()\r\n        .generateUniqueName(true)\r\n        .setType(H2)\r\n        .setScriptEncoding(&quot;UTF-8&quot;)\r\n        .ignoreFailedDrops(true)\r\n        // .addScript(&quot;schema.sql&quot;) Omit, auto-generate\r\n        .build();\r\n    }\r\n\r\nThe application works fine, I can create and retrieve data, but I would like to visually see it. I&#39;ve installed the [H2 Console Application][2], but I&#39;m not sure how to connect to the in-memory instance. I go to http://localhost:8082 and then, under JDBC URL I input when I get from the [connection&#39;s metadata][3] (I&#39;ve tried with auto-generated and manually specified names), but the H2 Console Application seems to be connected to an empty schema. My tables don&#39;t appear there, only the information schema, and I can&#39;t `SELECT` from my tables either, they just don&#39;t exist here.\r\n\r\nWhat&#39;s going on, what DB am I connecting to? How can I connect to my embedded DB?\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/embedded/EmbeddedDatabaseBuilder.html\r\n  [2]: http://www.h2database.com/html/quickstart.html\r\n  [3]: https://stackoverflow.com/questions/10607196/how-to-get-database-metadata-from-entity-manager","title":"Visualizing an embedded H2 database","body":"<p>I'm trying to configure and use a H2 embedded DB with Spring Boot. I'm using the code provided in <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/embedded/EmbeddedDatabaseBuilder.html\" rel=\"nofollow noreferrer\">the doc</a>:</p>\n\n<pre><code>@Bean\npublic DataSource dataSource() {\n    return new EmbeddedDatabase db = new EmbeddedDatabaseBuilder()\n    .generateUniqueName(true)\n    .setType(H2)\n    .setScriptEncoding(\"UTF-8\")\n    .ignoreFailedDrops(true)\n    // .addScript(\"schema.sql\") Omit, auto-generate\n    .build();\n}\n</code></pre>\n\n<p>The application works fine, I can create and retrieve data, but I would like to visually see it. I've installed the <a href=\"http://www.h2database.com/html/quickstart.html\" rel=\"nofollow noreferrer\">H2 Console Application</a>, but I'm not sure how to connect to the in-memory instance. I go to <a href=\"http://localhost:8082\" rel=\"nofollow noreferrer\">http://localhost:8082</a> and then, under JDBC URL I input when I get from the <a href=\"https://stackoverflow.com/questions/10607196/how-to-get-database-metadata-from-entity-manager\">connection's metadata</a> (I've tried with auto-generated and manually specified names), but the H2 Console Application seems to be connected to an empty schema. My tables don't appear there, only the information schema, and I can't <code>SELECT</code> from my tables either, they just don't exist here.</p>\n\n<p>What's going on, what DB am I connecting to? How can I connect to my embedded DB?</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":23005124,"reputation":11,"user_id":17128535,"display_name":"SaQie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640276804,"creation_date":1640276804,"question_id":70464852,"body_markdown":"application.property:\r\n\r\n      jpa:\r\n    properties:\r\n      hibernate:\r\n        order_inserts: true\r\n        order_updates: true\r\n        batch_versioned_data: true\r\n        jdbc:\r\n          batch_size: 10\r\n    database: postgresql\r\n    hibernate:\r\n      ddl-auto: create-drop\r\nlogging:\r\n  level:\r\n    org:\r\n      hibernate:\r\n        SQL: DEBUG\r\n\r\n\r\nEntity Product class:\r\n\r\n    public class Product {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private Long id;\r\n    private String name;\r\n    private String description;\r\n    private LocalDateTime createdDate;\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    private List&lt;ProductPrice&gt; pricesList;\r\n    @ManyToOne\r\n    private User user;\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    private List&lt;ProductLink&gt; productLinks;\r\n\r\n    public Product(String name, String description, LocalDateTime createdDate, User user) {\r\n        this.name = name;\r\n        this.description = description;\r\n        this.createdDate = createdDate;\r\n        this.user = user;\r\n    }\r\n}\r\n\r\nEntity ProductLink class:\r\n\r\n    public class ProductLink {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private Long id;\r\n    private String link;\r\n    @ManyToOne\r\n    private Product product;\r\n\r\n    public ProductLink(String link, Product product){\r\n        this.product = product;\r\n        this.link = link;\r\n    }\r\n}\r\n\r\nEntity ProductPrice class:\r\n\r\n    public class ProductPrice {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private Long id;\r\n    private String storeName;\r\n    private String price;\r\n    private LocalDateTime updatedDate;\r\n    @ManyToOne\r\n    private Product product;\r\n\r\n    public ProductPrice(String storeName, String price, LocalDateTime updatedDate, Product product) {\r\n        this.product = product;\r\n        this.storeName = storeName;\r\n        this.price = price;\r\n        this.updatedDate = updatedDate;\r\n    }\r\n}\r\n\r\nRepository, same for the other\r\n\r\n        @Repository\r\n    public interface ProductLinkRepository extends JpaRepository&lt;ProductLink, Long&gt; {\r\n    }\r\n\r\n\r\nI want to use Hibernate batch insert, but that doesn&#39;t Work, i only have multiple insert query in console (One insert for one ProductLink, ProductPrice)\r\n\r\nSave method:\r\n\r\n            Product product = new Product(productDto.getName(), productDto.getDescription(), LocalDateTime.now(), user);\r\n        Product save = productRepository.save(product);\r\n        List&lt;ProductLink&gt; productLinks = new ArrayList&lt;&gt;();\r\n        List&lt;ProductPrice&gt; pricesList = new ArrayList&lt;&gt;();\r\n        for (ProductLinksDto productLink : productDto.getProductLinks()) {\r\n            if (!productLink.getLink().isEmpty()) {\r\n                URL url = new URL(productLink.getLink());\r\n                storeParser = new StoreParser(url);\r\n                productLinks.add(new ProductLink(productLink.getLink(), save));\r\n                pricesList.add(new ProductPrice(url.getHost(), storeParser.getPrice(), LocalDateTime.now(), save));\r\n            }\r\n        }\r\n\r\n        productPriceRepository.saveAll(pricesList);\r\n        productLinkRepository.saveAll(productLinks);\r\n\r\n\r\n","title":"Spring boot Hibernate batch insert","body":"<p>application.property:</p>\n<pre><code>  jpa:\nproperties:\n  hibernate:\n    order_inserts: true\n    order_updates: true\n    batch_versioned_data: true\n    jdbc:\n      batch_size: 10\ndatabase: postgresql\nhibernate:\n  ddl-auto: create-drop\n</code></pre>\n<p>logging:\nlevel:\norg:\nhibernate:\nSQL: DEBUG</p>\n<p>Entity Product class:</p>\n<pre><code>public class Product {\n\n@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE)\nprivate Long id;\nprivate String name;\nprivate String description;\nprivate LocalDateTime createdDate;\n@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;product_id&quot;)\nprivate List&lt;ProductPrice&gt; pricesList;\n@ManyToOne\nprivate User user;\n@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;product_id&quot;)\nprivate List&lt;ProductLink&gt; productLinks;\n\npublic Product(String name, String description, LocalDateTime createdDate, User user) {\n    this.name = name;\n    this.description = description;\n    this.createdDate = createdDate;\n    this.user = user;\n}\n</code></pre>\n<p>}</p>\n<p>Entity ProductLink class:</p>\n<pre><code>public class ProductLink {\n\n@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE)\nprivate Long id;\nprivate String link;\n@ManyToOne\nprivate Product product;\n\npublic ProductLink(String link, Product product){\n    this.product = product;\n    this.link = link;\n}\n</code></pre>\n<p>}</p>\n<p>Entity ProductPrice class:</p>\n<pre><code>public class ProductPrice {\n\n@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE)\nprivate Long id;\nprivate String storeName;\nprivate String price;\nprivate LocalDateTime updatedDate;\n@ManyToOne\nprivate Product product;\n\npublic ProductPrice(String storeName, String price, LocalDateTime updatedDate, Product product) {\n    this.product = product;\n    this.storeName = storeName;\n    this.price = price;\n    this.updatedDate = updatedDate;\n}\n</code></pre>\n<p>}</p>\n<p>Repository, same for the other</p>\n<pre><code>    @Repository\npublic interface ProductLinkRepository extends JpaRepository&lt;ProductLink, Long&gt; {\n}\n</code></pre>\n<p>I want to use Hibernate batch insert, but that doesn't Work, i only have multiple insert query in console (One insert for one ProductLink, ProductPrice)</p>\n<p>Save method:</p>\n<pre><code>        Product product = new Product(productDto.getName(), productDto.getDescription(), LocalDateTime.now(), user);\n    Product save = productRepository.save(product);\n    List&lt;ProductLink&gt; productLinks = new ArrayList&lt;&gt;();\n    List&lt;ProductPrice&gt; pricesList = new ArrayList&lt;&gt;();\n    for (ProductLinksDto productLink : productDto.getProductLinks()) {\n        if (!productLink.getLink().isEmpty()) {\n            URL url = new URL(productLink.getLink());\n            storeParser = new StoreParser(url);\n            productLinks.add(new ProductLink(productLink.getLink(), save));\n            pricesList.add(new ProductPrice(url.getHost(), storeParser.getPrice(), LocalDateTime.now(), save));\n        }\n    }\n\n    productPriceRepository.saveAll(pricesList);\n    productLinkRepository.saveAll(productLinks);\n</code></pre>\n"},{"tags":["java","c#","android","accessibilityservice","mouse-coordinates"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1576458197,"post_id":59278085,"comment_id":104894826,"body_markdown":"TeamViewer is not using the accessibility framework, most likely. They have special deals with device manufacturers, which is why their product is not available for all devices.","body":"TeamViewer is not using the accessibility framework, most likely. They have special deals with device manufacturers, which is why their product is not available for all devices."},{"owner":{"account_id":3967563,"reputation":1,"user_id":17564313,"display_name":"FLASHCODER"},"score":0,"creation_date":1576460377,"post_id":59278085,"comment_id":104895170,"body_markdown":"@CommonsWare thank you. But i think that [`StrokeDescription.continueStroke()`](https://developer.android.com/reference/android/accessibilityservice/GestureDescription.StrokeDescription.html#continueStroke(android.graphics.Path,%20long,%20long,%20boolean)) can be a probable solution. See section **Continued gestures** [here](https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html).","body":"@CommonsWare thank you. But i think that <a href=\"https://developer.android.com/reference/android/accessibilityservice/GestureDescription.StrokeDescription.html#continueStroke(android.graphics.Path,%20long,%20long,%20boolean)\" rel=\"nofollow noreferrer\"><code>StrokeDescription.continueStroke()</code></a> can be a probable solution. See section <b>Continued gestures</b> <a href=\"https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":5230454,"reputation":1891,"user_id":4180984,"accept_rate":69,"display_name":"Greggz"},"score":2,"creation_date":1576581763,"post_id":59278085,"comment_id":104938966,"body_markdown":"Regarding your first aproach. `pictureBox1_MouseDown` must not send the the coordinates. It should only store the initial coordinates, and then on `pictureBox1_MouseUp` you send them, because that marks the end of the mouse movement","body":"Regarding your first aproach. <code>pictureBox1_MouseDown</code> must not send the the coordinates. It should only store the initial coordinates, and then on <code>pictureBox1_MouseUp</code> you send them, because that marks the end of the mouse movement"}],"answers":[{"tags":[],"owner":{"account_id":17247722,"reputation":328,"user_id":12488560,"display_name":"JaFizz"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1576850932,"creation_date":1576805015,"answer_id":59418830,"question_id":59278085,"body_markdown":"Have you tried to use [AutoIt][1] scripting?\r\n\r\n\r\nYou can save coordinates within specific windows/screens.\r\nYou can hold mouseclick pressed while drawing the pattern.\r\n\r\nI also have some example code / scripts for you if you want them!\r\n\r\n&lt;br&gt;\r\n\r\nEDIT:\r\n\r\nAccording to [this tutorial][2] you can use Auto-IT on C#.\r\n\r\n**Follow these steps:**\r\n\r\n 1. Install Auto-IT\r\n 2. Add Auto-IT as reference in reference manager (AutoItX3.dll)\r\n 3. Then import library that you added with: `Using AutoItX3Lib;`\r\n 4. Make new AutoItX3 object called &#39;auto&#39;: `AutoItX3 auto = new AutoItX3();`\r\n 5. You can now execute Auto It commands.\r\n\r\nThis is the complete example for executing a mouseclick:\r\n\r\n    Using AutoItX3Lib;\r\n    AutoItX3 auto = new AutoItX3();\r\n    auto.MouseClick(&quot;left&quot;, 78, 1133, 1, 35)\r\n\r\n&lt;br&gt;\r\n\r\nWith the `AutoIt Window Info Tool` you can check the coordinates you want to use.\r\n\r\nPlease note there are differences between mouse coordinates modes:\r\n\r\nfor example: `auto.AutoItSetOption(&quot;MouseCoordMode&quot;, 1)` will use absolute screen coordinates. See source [here][3].\r\n\r\n\r\n&lt;br&gt;\r\n\r\nFor holding the mouseclick down, you can check [MouseDown Function][4]\r\n\r\n\r\n  [1]: https://www.autoitscript.com/site/\r\n  [2]: https://www.youtube.com/watch?v=wZQMlmMCR_I\r\n  [3]: https://www.autoitscript.com/wiki/MouseCoordMode\r\n  [4]: https://www.autoitscript.com/autoit3/docs/functions/MouseDown.htm","title":"How perform a drag (based in X,Y mouse coordinates) on Android using AccessibilityService?","body":"<p>Have you tried to use <a href=\"https://www.autoitscript.com/site/\" rel=\"nofollow noreferrer\">AutoIt</a> scripting?</p>\n\n<p>You can save coordinates within specific windows/screens.\nYou can hold mouseclick pressed while drawing the pattern.</p>\n\n<p>I also have some example code / scripts for you if you want them!</p>\n\n<p><br></p>\n\n<p>EDIT:</p>\n\n<p>According to <a href=\"https://www.youtube.com/watch?v=wZQMlmMCR_I\" rel=\"nofollow noreferrer\">this tutorial</a> you can use Auto-IT on C#.</p>\n\n<p><strong>Follow these steps:</strong></p>\n\n<ol>\n<li>Install Auto-IT</li>\n<li>Add Auto-IT as reference in reference manager (AutoItX3.dll)</li>\n<li>Then import library that you added with: <code>Using AutoItX3Lib;</code></li>\n<li>Make new AutoItX3 object called 'auto': <code>AutoItX3 auto = new AutoItX3();</code></li>\n<li>You can now execute Auto It commands.</li>\n</ol>\n\n<p>This is the complete example for executing a mouseclick:</p>\n\n<pre><code>Using AutoItX3Lib;\nAutoItX3 auto = new AutoItX3();\nauto.MouseClick(\"left\", 78, 1133, 1, 35)\n</code></pre>\n\n<p><br></p>\n\n<p>With the <code>AutoIt Window Info Tool</code> you can check the coordinates you want to use.</p>\n\n<p>Please note there are differences between mouse coordinates modes:</p>\n\n<p>for example: <code>auto.AutoItSetOption(\"MouseCoordMode\", 1)</code> will use absolute screen coordinates. See source <a href=\"https://www.autoitscript.com/wiki/MouseCoordMode\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><br></p>\n\n<p>For holding the mouseclick down, you can check <a href=\"https://www.autoitscript.com/autoit3/docs/functions/MouseDown.htm\" rel=\"nofollow noreferrer\">MouseDown Function</a></p>\n"},{"tags":[],"owner":{"account_id":3967563,"reputation":1,"user_id":17564313,"display_name":"FLASHCODER"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1577839050,"creation_date":1577839050,"answer_id":59549337,"question_id":59278085,"body_markdown":"Here is a example of a solution based on **Edit 3** of question.\r\n\r\n\r\n----------\r\n\r\n\r\nC# Windows Froms Application &quot;*formMain.cs*&quot;:\r\n\r\n    using System.Net.Sockets;\r\n    \r\n    private List&lt;Point&gt; lstPoints;\r\n    \r\n    private void pictureBox1_MouseDown(object sender, MouseEventArgs e) \r\n    {\r\n        if (e.Button == MouseButtons.Left)\r\n        {\r\n            lstPoints = new List&lt;Point&gt;();\r\n            lstPoints.Add(new Point(e.X, e.Y));\r\n        }\r\n    }\r\n    \r\n    private void PictureBox1_MouseMove(object sender, MouseEventArgs e)\r\n    {\r\n        if (e.Button == MouseButtons.Left)\r\n        {\r\n            lstPoints.Add(new Point(e.X, e.Y));\r\n        }\r\n    }\r\n    \r\n    private void PictureBox1_MouseUp(object sender, MouseEventArgs e)\r\n    {\r\n        lstPoints.Add(new Point(e.X, e.Y));\r\n    \r\n        StringBuilder sb = new StringBuilder();\r\n    \r\n        foreach (Point obj in lstPoints)\r\n        {\r\n            sb.Append(Convert.ToString(obj) + &quot;:&quot;);\r\n        }\r\n    \r\n        serverSocket.Send(&quot;MDRAWEVENT&quot; + sb.ToString() + Environment.NewLine);\r\n    }\r\n\r\nandroid service &quot;*SocketBackground.java*&quot;:\r\n\r\n    import java.net.Socket;\r\n    \r\n    String xline;\r\n    \r\n    while (clientSocket.isConnected()) {\r\n    \r\n        BufferedReader xreader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream(), StandardCharsets.UTF_8));\r\n    \r\n        if (xreader.ready()) {\r\n    \r\n            while ((xline = xreader.readLine()) != null) {\r\n                    xline = xline.trim();\r\n    \r\n                if (xline != null &amp;&amp; !xline.trim().isEmpty()) {\r\n    \r\n                    if (xline.contains(&quot;MDRAWEVENT&quot;)) {\r\n    \r\n                        String coordinates = xline.replace(&quot;MDRAWEVENT&quot;, &quot;&quot;);\r\n                        String[] tokens = coordinates.split(Pattern.quote(&quot;:&quot;));\r\n    \t\t\t\t\tPoint[] moviments = new Point[tokens.length];\r\n    \r\n                        for (int i = 0; i &lt; tokens.length; i++) {\r\n    \t\t\t\t\t   String[] coordinates = tokens[i].replace(&quot;{&quot;, &quot;&quot;).replace(&quot;}&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n    \r\n    \t\t\t\t\t   int x = Integer.parseInt(coordinates[0].split(&quot;=&quot;)[1]);\r\n    \t\t\t\t\t   int y = Integer.parseInt(coordinates[1].split(&quot;=&quot;)[1]);\r\n    \r\n    \t\t\t\t\t   moviments[i] = new Point(x, y);\r\n                        }\r\n    \r\n                        MyAccessibilityService.instance.mouseDraw(moviments, 2000);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nandroid [`AccessibilityService`](https://developer.android.com/reference/android/accessibilityservice/AccessibilityService) &quot;*MyAccessibilityService.java*&quot;:\r\n\r\n    public void mouseDraw(Point[] segments, int time) {\r\n    \tif (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n    \r\n    \t\tPath path = new Path();\r\n    \t\tpath.moveTo(segments[0].x, segments[0].y);\r\n    \r\n    \t\tfor (int i = 1; i &lt; segments.length; i++) {\r\n    \r\n    \t\t\tpath.lineTo(segments[i].x, segments[i].y);\r\n    \r\n    \t\t\tGestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\r\n    \r\n    \t\t\tdispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onCompleted(GestureDescription gestureDescription) {\r\n    \t\t\t\t\tsuper.onCompleted(gestureDescription);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void onCancelled(GestureDescription gestureDescription) {\r\n    \t\t\t\t\tsuper.onCancelled(gestureDescription);\r\n    \t\t\t\t}\r\n    \t\t\t}, null);\r\n    \t\t}\r\n    \t}\r\n    }","title":"How perform a drag (based in X,Y mouse coordinates) on Android using AccessibilityService?","body":"<p>Here is a example of a solution based on <strong>Edit 3</strong> of question.</p>\n\n<hr>\n\n<p>C# Windows Froms Application \"<em>formMain.cs</em>\":</p>\n\n<pre><code>using System.Net.Sockets;\n\nprivate List&lt;Point&gt; lstPoints;\n\nprivate void pictureBox1_MouseDown(object sender, MouseEventArgs e) \n{\n    if (e.Button == MouseButtons.Left)\n    {\n        lstPoints = new List&lt;Point&gt;();\n        lstPoints.Add(new Point(e.X, e.Y));\n    }\n}\n\nprivate void PictureBox1_MouseMove(object sender, MouseEventArgs e)\n{\n    if (e.Button == MouseButtons.Left)\n    {\n        lstPoints.Add(new Point(e.X, e.Y));\n    }\n}\n\nprivate void PictureBox1_MouseUp(object sender, MouseEventArgs e)\n{\n    lstPoints.Add(new Point(e.X, e.Y));\n\n    StringBuilder sb = new StringBuilder();\n\n    foreach (Point obj in lstPoints)\n    {\n        sb.Append(Convert.ToString(obj) + \":\");\n    }\n\n    serverSocket.Send(\"MDRAWEVENT\" + sb.ToString() + Environment.NewLine);\n}\n</code></pre>\n\n<p>android service \"<em>SocketBackground.java</em>\":</p>\n\n<pre><code>import java.net.Socket;\n\nString xline;\n\nwhile (clientSocket.isConnected()) {\n\n    BufferedReader xreader = new BufferedReader(new InputStreamReader(clientSocket.getInputStream(), StandardCharsets.UTF_8));\n\n    if (xreader.ready()) {\n\n        while ((xline = xreader.readLine()) != null) {\n                xline = xline.trim();\n\n            if (xline != null &amp;&amp; !xline.trim().isEmpty()) {\n\n                if (xline.contains(\"MDRAWEVENT\")) {\n\n                    String coordinates = xline.replace(\"MDRAWEVENT\", \"\");\n                    String[] tokens = coordinates.split(Pattern.quote(\":\"));\n                    Point[] moviments = new Point[tokens.length];\n\n                    for (int i = 0; i &lt; tokens.length; i++) {\n                       String[] coordinates = tokens[i].replace(\"{\", \"\").replace(\"}\", \"\").split(\",\");\n\n                       int x = Integer.parseInt(coordinates[0].split(\"=\")[1]);\n                       int y = Integer.parseInt(coordinates[1].split(\"=\")[1]);\n\n                       moviments[i] = new Point(x, y);\n                    }\n\n                    MyAccessibilityService.instance.mouseDraw(moviments, 2000);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>android <a href=\"https://developer.android.com/reference/android/accessibilityservice/AccessibilityService\" rel=\"nofollow noreferrer\"><code>AccessibilityService</code></a> \"<em>MyAccessibilityService.java</em>\":</p>\n\n<pre><code>public void mouseDraw(Point[] segments, int time) {\n    if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n\n        Path path = new Path();\n        path.moveTo(segments[0].x, segments[0].y);\n\n        for (int i = 1; i &lt; segments.length; i++) {\n\n            path.lineTo(segments[i].x, segments[i].y);\n\n            GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\n\n            dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\n\n                @Override\n                public void onCompleted(GestureDescription gestureDescription) {\n                    super.onCompleted(gestureDescription);\n                }\n\n                @Override\n                public void onCancelled(GestureDescription gestureDescription) {\n                    super.onCancelled(gestureDescription);\n                }\n            }, null);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22378344,"reputation":11,"user_id":16768979,"display_name":"he1ex-tG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640276287,"creation_date":1640276287,"answer_id":70464753,"question_id":59278085,"body_markdown":"Sorry, bro, but code below is awful like my English:\r\n\r\n    public void mouseDraw(Point[] segments, int time) {\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n    \r\n            Path path = new Path();\r\n            path.moveTo(segments[0].x, segments[0].y);\r\n    \r\n            for (int i = 1; i &lt; segments.length; i++) {\r\n    \r\n                path.lineTo(segments[i].x, segments[i].y);\r\n    \r\n                GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\r\n    \r\n                dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\r\n    \r\n                    @Override\r\n                    public void onCompleted(GestureDescription gestureDescription) {\r\n                        super.onCompleted(gestureDescription);\r\n                    }\r\n    \r\n                    @Override\r\n                    public void onCancelled(GestureDescription gestureDescription) {\r\n                        super.onCancelled(gestureDescription);\r\n                    }\r\n                }, null);\r\n            }\r\n        }\r\n    }\r\n\r\nHere program call dispatchGesture `segments.length-1` times but only last gesture will be completed because each gesure is canceled by next. From official [documentation][1]: Any gestures currently in progress, whether from the user, this service, or another service, will be cancelled.\r\n\r\nRight:\r\n\r\n    public void mouseDraw(Point[] segments, int time) {\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n            Path path = new Path();\r\n            path.moveTo(segments[0].x, segments[0].y);\r\n            for (int i = 1; i &lt; segments.length; i++) {\r\n                path.lineTo(segments[i].x, segments[i].y);\r\n            }\r\n            GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\r\n            dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\r\n                @Override\r\n                public void onCompleted(GestureDescription gestureDescription) {\r\n                    super.onCompleted(gestureDescription);\r\n                }\r\n                @Override\r\n                public void onCancelled(GestureDescription gestureDescription) {\r\n                    super.onCancelled(gestureDescription);\r\n                }\r\n            }, null);\r\n        }\r\n    }\r\n\r\nHere we build `Path` as first and then use `dispatchGesture` one time. \r\n\r\nIf you need await each dispatched gesture then use `Semaphore`, for example, like that (**Kotlin**):\r\n\r\n        val sem = Semaphore(0, true)\r\n        for (i in 1 until segments.size) {\r\n            path.lineTo(segments.get(i).x.toFloat(), segments.get(i).y.toFloat())\r\n            val sd = GestureDescription.StrokeDescription(path, 0, 1500)\r\n            dispatchGesture(\r\n                    GestureDescription.Builder().addStroke(sd).build(),\r\n                    object : GestureResultCallback() {\r\n                        override fun onCancelled(gestureDescription: GestureDescription?) {\r\n                            super.onCancelled(gestureDescription)\r\n                            sem.release()\r\n                        }\r\n                        override fun onCompleted(gestureDescription: GestureDescription?) {\r\n                            super.onCompleted(gestureDescription)\r\n                            sem.release()\r\n                        }\r\n                    },\r\n                    null\r\n            )\r\n            sem.acquire()\r\n        }\r\n\r\n  [1]: https://developer.android.com/reference/android/accessibilityservice/AccessibilityService?hl=Es-419#dispatchGesture(android.accessibilityservice.GestureDescription,%20android.accessibilityservice.AccessibilityService.GestureResultCallback,%20android.os.Handler)","title":"How perform a drag (based in X,Y mouse coordinates) on Android using AccessibilityService?","body":"<p>Sorry, bro, but code below is awful like my English:</p>\n<pre><code>public void mouseDraw(Point[] segments, int time) {\n    if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n\n        Path path = new Path();\n        path.moveTo(segments[0].x, segments[0].y);\n\n        for (int i = 1; i &lt; segments.length; i++) {\n\n            path.lineTo(segments[i].x, segments[i].y);\n\n            GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\n\n            dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\n\n                @Override\n                public void onCompleted(GestureDescription gestureDescription) {\n                    super.onCompleted(gestureDescription);\n                }\n\n                @Override\n                public void onCancelled(GestureDescription gestureDescription) {\n                    super.onCancelled(gestureDescription);\n                }\n            }, null);\n        }\n    }\n}\n</code></pre>\n<p>Here program call dispatchGesture <code>segments.length-1</code> times but only last gesture will be completed because each gesure is canceled by next. From official <a href=\"https://developer.android.com/reference/android/accessibilityservice/AccessibilityService?hl=Es-419#dispatchGesture(android.accessibilityservice.GestureDescription,%20android.accessibilityservice.AccessibilityService.GestureResultCallback,%20android.os.Handler)\" rel=\"nofollow noreferrer\">documentation</a>: Any gestures currently in progress, whether from the user, this service, or another service, will be cancelled.</p>\n<p>Right:</p>\n<pre><code>public void mouseDraw(Point[] segments, int time) {\n    if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n        Path path = new Path();\n        path.moveTo(segments[0].x, segments[0].y);\n        for (int i = 1; i &lt; segments.length; i++) {\n            path.lineTo(segments[i].x, segments[i].y);\n        }\n        GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, time);\n        dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback() {\n            @Override\n            public void onCompleted(GestureDescription gestureDescription) {\n                super.onCompleted(gestureDescription);\n            }\n            @Override\n            public void onCancelled(GestureDescription gestureDescription) {\n                super.onCancelled(gestureDescription);\n            }\n        }, null);\n    }\n}\n</code></pre>\n<p>Here we build <code>Path</code> as first and then use <code>dispatchGesture</code> one time.</p>\n<p>If you need await each dispatched gesture then use <code>Semaphore</code>, for example, like that (<strong>Kotlin</strong>):</p>\n<pre><code>    val sem = Semaphore(0, true)\n    for (i in 1 until segments.size) {\n        path.lineTo(segments.get(i).x.toFloat(), segments.get(i).y.toFloat())\n        val sd = GestureDescription.StrokeDescription(path, 0, 1500)\n        dispatchGesture(\n                GestureDescription.Builder().addStroke(sd).build(),\n                object : GestureResultCallback() {\n                    override fun onCancelled(gestureDescription: GestureDescription?) {\n                        super.onCancelled(gestureDescription)\n                        sem.release()\n                    }\n                    override fun onCompleted(gestureDescription: GestureDescription?) {\n                        super.onCompleted(gestureDescription)\n                        sem.release()\n                    }\n                },\n                null\n        )\n        sem.acquire()\n    }\n</code></pre>\n"}],"owner":{"account_id":3967563,"reputation":1,"user_id":17564313,"display_name":"FLASHCODER"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4005,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":59549337,"answer_count":3,"score":44,"last_activity_date":1640276287,"creation_date":1576031470,"question_id":59278085,"body_markdown":"I want know how to perform a drag on android based in X, Y mouse coordinates? consider as two simple examples, the Team Viewer/QuickSupport drawing the &quot;password pattern&quot; on remote smartphone and the Pen of Windows Paint respectively.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAll that i&#39;m able of make is [simulate touch](https://stackoverflow.com/a/51706446/9708179) (with `dispatchGesture()` and also `AccessibilityNodeInfo.ACTION_CLICK`).\r\n\r\nI found these relevants links, but not know if they can be useful:\r\n\r\n - [Perform swipe on screen using AccessibilityService](https://stackoverflow.com/a/44448362/9708179)\r\n - [**Example 1**](https://www.programcreek.com/java-api-examples/index.php?api=android.accessibilityservice.GestureDescription)\r\n - [**Continued gestures**](https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html)\r\n\r\nBelow is my working code that is used to send mouse coordinates (inside of `PictureBox` control) to remote phone and simulate touch.\r\n\r\n**Windows Forms Application:**\r\n\r\n    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)\r\n    {\r\n    \tforeach (ListViewItem item in lvConnections.SelectedItems)\r\n    \t{\r\n            // Remote screen resolution\r\n    \t\tstring[] tokens = item.SubItems[5].Text.Split(&#39;x&#39;); // Ex: 1080x1920\r\n    \r\n    \t\tint xClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width);\r\n    \t\tint yClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\r\n    \r\n    \t\tClient client = (Client)item.Tag;\r\n    \r\n    \t\tif (e.Button == MouseButtons.Left)\r\n    \t\t\tclient.sock.Send(Encoding.UTF8.GetBytes(&quot;TOUCH&quot; + xClick + &quot;&lt;|&gt;&quot; + yClick + Environment.NewLine));\r\n    \t}\r\n    }\r\n\r\n\r\n----------\r\n\r\n**Edit:**\r\n\r\nMy last attempt was a &quot;swipe screen&quot; using mouse coordinates (C# Windows Forms Application) and a custom android routine (with reference to code of &quot;swipe screen&quot; linked above), respectively:\r\n\r\n    private Point mdownPoint = new Point();\r\n    \r\n    private void pictureBox1_MouseDown(object sender, MouseEventArgs e)\r\n    {\r\n    \tforeach (ListViewItem item in lvConnections.SelectedItems)\r\n    \t{\r\n    \t\t// Remote screen resolution\r\n    \t\tstring[] tokens = item.SubItems[5].Text.Split(&#39;x&#39;); // Ex: 1080x1920\r\n    \r\n    \t\tClient client = (Client)item.Tag;\r\n    \r\n    \t\tif (e.Button == MouseButtons.Left)\r\n    \t\t{\r\n    \t\t\txClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width); \r\n    \t\t\tyClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\r\n    \r\n    \t\t\t// Saving start position:\r\n    \t\t\t\r\n    \t\t\tmdownPoint.X = xClick; \r\n    \t\t\tmdownPoint.Y = yClick; \r\n    \r\n    \t\t\tclient.sock.Send(Encoding.UTF8.GetBytes(&quot;TOUCH&quot; + xClick + &quot;&lt;|&gt;&quot; + yClick + Environment.NewLine));\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    private void PictureBox1_MouseMove(object sender, MouseEventArgs e)\r\n    {\r\n    \tforeach (ListViewItem item in lvConnections.SelectedItems)\r\n    \t{\r\n    \t\t// Remote screen resolution\r\n    \t\tstring[] tokens = item.SubItems[5].Text.Split(&#39;x&#39;); // Ex: 1080x1920\r\n    \r\n    \t\tClient client = (Client)item.Tag;\r\n    \r\n    \t\tif (e.Button == MouseButtons.Left)\r\n    \t\t{\r\n    \t\t\txClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width);\r\n    \t\t\tyClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\r\n    \r\n    \t\t\tclient.sock.Send(Encoding.UTF8.GetBytes(&quot;MOUSESWIPESCREEN&quot; + mdownPoint.X + &quot;&lt;|&gt;&quot; + mdownPoint.Y + &quot;&lt;|&gt;&quot; + xClick + &quot;&lt;|&gt;&quot; + yClick + Environment.NewLine));\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nandroid *AccessibilityService*:\r\n\r\n    public void Swipe(int x1, int y1, int x2, int y2, int time) {\r\n    \r\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\r\n    \tSystem.out.println(&quot; ======= Swipe =======&quot;);\r\n    \r\n    \tGestureDescription.Builder gestureBuilder = new GestureDescription.Builder();\r\n    \tPath path = new Path();\r\n    \tpath.moveTo(x1, y1);\r\n    \tpath.lineTo(x2, y2);\r\n    \r\n    \tgestureBuilder.addStroke(new GestureDescription.StrokeDescription(path, 100, time));\r\n    \tdispatchGesture(gestureBuilder.build(), new GestureResultCallback() {\r\n    \t\t@Override\r\n    \t\tpublic void onCompleted(GestureDescription gestureDescription) {\r\n    \t\t\tSystem.out.println(&quot;SWIPE Gesture Completed :D&quot;);\r\n    \t\t\tsuper.onCompleted(gestureDescription);\r\n    \t\t}\r\n    \t}, null);\r\n    }\r\n    \r\n    }\r\n\r\nthat produces the following result (but still not is able to draw &quot;pattern password&quot; like TeamViewer for example). But like said on comment below, I think that with a similar approach this can be achieved using [Continued gestures](https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html) probably. Any suggestions in this direction will be welcome.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n----------\r\n\r\n**Edit 2:**\r\n\r\nDefinitely, the solution is [continued gestures](https://developer.android.com/reference/android/accessibilityservice/GestureDescription.StrokeDescription#continueStroke(android.graphics.Path,%20long,%20long,%20boolean)) like said on previous **Edit**.\r\n\r\n - [**Simulating joystick movement using AccessibilityService**](https://stackoverflow.com/questions/57195814/simulating-joystick-movement-using-accessibilityservice)\r\n - [**Why the continueStroke function is not work**](https://stackoverflow.com/questions/56389826/why-the-continuestroke-function-is-not-work)\r\n\r\nAnd below is a supposed fixed code that i found [here](http://www.mysql5.com/thread-496-1-1.html) =&gt;\r\n\r\n*android AccessibilityService:*\r\n\r\n    // Simulates an L-shaped drag path: 200 pixels right, then 200 pixels down.\r\n    Path path = new Path();\r\n    path.moveTo(200,200);\r\n    path.lineTo(400,200);\r\n    \r\n    final GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, 500, true);\r\n    \r\n    // The starting point of the second path must match\r\n    // the ending point of the first path.\r\n    Path path2 = new Path();\r\n    path2.moveTo(400,200);\r\n    path2.lineTo(400,400);\r\n    \r\n    final GestureDescription.StrokeDescription sd2 = sd.continueStroke(path2, 0, 500, false); // 0.5 second\r\n    \r\n    HongBaoService.mService.dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback(){\r\n    \r\n    @Override\r\n    public void onCompleted(GestureDescription gestureDescription){\r\n    super.onCompleted(gestureDescription);\r\n    HongBaoService.mService.dispatchGesture(new GestureDescription.Builder().addStroke(sd2).build(),null,null);\r\n    }\r\n    \r\n    @Override\r\n    public void onCancelled(GestureDescription gestureDescription){\r\n    super.onCancelled(gestureDescription);\r\n    }\r\n    },null);\r\n\r\nThen, my doubt is: **how send correctly mouse coordinates for code above, of the way that can perform drag to any direction?** Some idea?\r\n\r\n\r\n----------\r\n\r\n**Edit 3:**\r\n\r\nI found two routines that are used to perform drag, but they are using [UiAutomation](http://developer.android.com/reference/android/app/UiAutomation.html) + [`injectInputEvent()`](https://stackoverflow.com/questions/23159265/how-to-inject-click-event-with-android-uiautomation-injectinputevent). AFAIK, injection of event works only in a system app like said [here](https://stackoverflow.com/a/33443102/9708179) and [here](https://gist.github.com/oneyoung/a14c99856c3984263734) and i not want it.\r\n\r\nThis are routines found:\r\n\r\n - [public boolean swipe(int downX, int downY, int upX, int upY, int steps, boolean drag)](https://github.com/USC-NSL/PUMA/blob/2545e58b22f421f387a52f73fa893cf7716bab3c/src/nsl/stg/uiautomator/core/MyInteractionController.java#L403)\r\n - [public boolean swipe(Point[] segments, int segmentSteps)](https://github.com/USC-NSL/PUMA/blob/2545e58b22f421f387a52f73fa893cf7716bab3c/src/nsl/stg/uiautomator/core/MyInteractionController.java#L442)\r\n\r\nThen to achieve my goal, i think that 2rd routine is more appropriated to use (following the logic, excluding event injection) with code showed on **Edit 2** and send all points of `pictureBox1_MouseDown` and `pictureBox1_MouseMove` (C# Windows Forms Application) respectively to fill `Point[]` dynamically and on `pictureBox1_MouseUp` send cmd to execute the routine and use this array filled. If you have a idea to 1st routine, let me know :D.\r\n\r\nIf after read this **Edit** you have a possible solution, show me in a answer please, while i will try and test this idea.\r\n\r\n  [1]: https://i.stack.imgur.com/i5oDk.gif\r\n  [2]: https://i.stack.imgur.com/Pn3b0.jpg\r\n  [3]: https://i.stack.imgur.com/7gDiC.gif\r\n  [4]: https://i.stack.imgur.com/QvgOs.gif","title":"How perform a drag (based in X,Y mouse coordinates) on Android using AccessibilityService?","body":"<p>I want know how to perform a drag on android based in X, Y mouse coordinates? consider as two simple examples, the Team Viewer/QuickSupport drawing the \"password pattern\" on remote smartphone and the Pen of Windows Paint respectively.</p>\n\n<p><a href=\"https://i.stack.imgur.com/i5oDk.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/i5oDk.gif\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Pn3b0.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Pn3b0.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>All that i'm able of make is <a href=\"https://stackoverflow.com/a/51706446/9708179\">simulate touch</a> (with <code>dispatchGesture()</code> and also <code>AccessibilityNodeInfo.ACTION_CLICK</code>).</p>\n\n<p>I found these relevants links, but not know if they can be useful:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/44448362/9708179\">Perform swipe on screen using AccessibilityService</a></li>\n<li><a href=\"https://www.programcreek.com/java-api-examples/index.php?api=android.accessibilityservice.GestureDescription\" rel=\"noreferrer\"><strong>Example 1</strong></a></li>\n<li><a href=\"https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html\" rel=\"noreferrer\"><strong>Continued gestures</strong></a></li>\n</ul>\n\n<p>Below is my working code that is used to send mouse coordinates (inside of <code>PictureBox</code> control) to remote phone and simulate touch.</p>\n\n<p><strong>Windows Forms Application:</strong></p>\n\n<pre><code>private void pictureBox1_MouseDown(object sender, MouseEventArgs e)\n{\n    foreach (ListViewItem item in lvConnections.SelectedItems)\n    {\n        // Remote screen resolution\n        string[] tokens = item.SubItems[5].Text.Split('x'); // Ex: 1080x1920\n\n        int xClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width);\n        int yClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\n\n        Client client = (Client)item.Tag;\n\n        if (e.Button == MouseButtons.Left)\n            client.sock.Send(Encoding.UTF8.GetBytes(\"TOUCH\" + xClick + \"&lt;|&gt;\" + yClick + Environment.NewLine));\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>My last attempt was a \"swipe screen\" using mouse coordinates (C# Windows Forms Application) and a custom android routine (with reference to code of \"swipe screen\" linked above), respectively:</p>\n\n<pre><code>private Point mdownPoint = new Point();\n\nprivate void pictureBox1_MouseDown(object sender, MouseEventArgs e)\n{\n    foreach (ListViewItem item in lvConnections.SelectedItems)\n    {\n        // Remote screen resolution\n        string[] tokens = item.SubItems[5].Text.Split('x'); // Ex: 1080x1920\n\n        Client client = (Client)item.Tag;\n\n        if (e.Button == MouseButtons.Left)\n        {\n            xClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width); \n            yClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\n\n            // Saving start position:\n\n            mdownPoint.X = xClick; \n            mdownPoint.Y = yClick; \n\n            client.sock.Send(Encoding.UTF8.GetBytes(\"TOUCH\" + xClick + \"&lt;|&gt;\" + yClick + Environment.NewLine));\n        }\n    }\n}\n\nprivate void PictureBox1_MouseMove(object sender, MouseEventArgs e)\n{\n    foreach (ListViewItem item in lvConnections.SelectedItems)\n    {\n        // Remote screen resolution\n        string[] tokens = item.SubItems[5].Text.Split('x'); // Ex: 1080x1920\n\n        Client client = (Client)item.Tag;\n\n        if (e.Button == MouseButtons.Left)\n        {\n            xClick = (e.X * int.Parse(tokens[0].ToString())) / (pictureBox1.Size.Width);\n            yClick = (e.Y * int.Parse(tokens[1].ToString())) / (pictureBox1.Size.Height);\n\n            client.sock.Send(Encoding.UTF8.GetBytes(\"MOUSESWIPESCREEN\" + mdownPoint.X + \"&lt;|&gt;\" + mdownPoint.Y + \"&lt;|&gt;\" + xClick + \"&lt;|&gt;\" + yClick + Environment.NewLine));\n        }\n    }\n}\n</code></pre>\n\n<p>android <em>AccessibilityService</em>:</p>\n\n<pre><code>public void Swipe(int x1, int y1, int x2, int y2, int time) {\n\nif (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n    System.out.println(\" ======= Swipe =======\");\n\n    GestureDescription.Builder gestureBuilder = new GestureDescription.Builder();\n    Path path = new Path();\n    path.moveTo(x1, y1);\n    path.lineTo(x2, y2);\n\n    gestureBuilder.addStroke(new GestureDescription.StrokeDescription(path, 100, time));\n    dispatchGesture(gestureBuilder.build(), new GestureResultCallback() {\n        @Override\n        public void onCompleted(GestureDescription gestureDescription) {\n            System.out.println(\"SWIPE Gesture Completed :D\");\n            super.onCompleted(gestureDescription);\n        }\n    }, null);\n}\n\n}\n</code></pre>\n\n<p>that produces the following result (but still not is able to draw \"pattern password\" like TeamViewer for example). But like said on comment below, I think that with a similar approach this can be achieved using <a href=\"https://eventandtech.blogspot.com/p/fingerprint-gestures-accessibility.html\" rel=\"noreferrer\">Continued gestures</a> probably. Any suggestions in this direction will be welcome.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7gDiC.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7gDiC.gif\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QvgOs.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QvgOs.gif\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>Definitely, the solution is <a href=\"https://developer.android.com/reference/android/accessibilityservice/GestureDescription.StrokeDescription#continueStroke(android.graphics.Path,%20long,%20long,%20boolean)\" rel=\"noreferrer\">continued gestures</a> like said on previous <strong>Edit</strong>.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/57195814/simulating-joystick-movement-using-accessibilityservice\"><strong>Simulating joystick movement using AccessibilityService</strong></a></li>\n<li><a href=\"https://stackoverflow.com/questions/56389826/why-the-continuestroke-function-is-not-work\"><strong>Why the continueStroke function is not work</strong></a></li>\n</ul>\n\n<p>And below is a supposed fixed code that i found <a href=\"http://www.mysql5.com/thread-496-1-1.html\" rel=\"noreferrer\">here</a> =></p>\n\n<p><em>android AccessibilityService:</em></p>\n\n<pre><code>// Simulates an L-shaped drag path: 200 pixels right, then 200 pixels down.\nPath path = new Path();\npath.moveTo(200,200);\npath.lineTo(400,200);\n\nfinal GestureDescription.StrokeDescription sd = new GestureDescription.StrokeDescription(path, 0, 500, true);\n\n// The starting point of the second path must match\n// the ending point of the first path.\nPath path2 = new Path();\npath2.moveTo(400,200);\npath2.lineTo(400,400);\n\nfinal GestureDescription.StrokeDescription sd2 = sd.continueStroke(path2, 0, 500, false); // 0.5 second\n\nHongBaoService.mService.dispatchGesture(new GestureDescription.Builder().addStroke(sd).build(), new AccessibilityService.GestureResultCallback(){\n\n@Override\npublic void onCompleted(GestureDescription gestureDescription){\nsuper.onCompleted(gestureDescription);\nHongBaoService.mService.dispatchGesture(new GestureDescription.Builder().addStroke(sd2).build(),null,null);\n}\n\n@Override\npublic void onCancelled(GestureDescription gestureDescription){\nsuper.onCancelled(gestureDescription);\n}\n},null);\n</code></pre>\n\n<p>Then, my doubt is: <strong>how send correctly mouse coordinates for code above, of the way that can perform drag to any direction?</strong> Some idea?</p>\n\n<hr>\n\n<p><strong>Edit 3:</strong></p>\n\n<p>I found two routines that are used to perform drag, but they are using <a href=\"http://developer.android.com/reference/android/app/UiAutomation.html\" rel=\"noreferrer\">UiAutomation</a> + <a href=\"https://stackoverflow.com/questions/23159265/how-to-inject-click-event-with-android-uiautomation-injectinputevent\"><code>injectInputEvent()</code></a>. AFAIK, injection of event works only in a system app like said <a href=\"https://stackoverflow.com/a/33443102/9708179\">here</a> and <a href=\"https://gist.github.com/oneyoung/a14c99856c3984263734\" rel=\"noreferrer\">here</a> and i not want it.</p>\n\n<p>This are routines found:</p>\n\n<ul>\n<li><a href=\"https://github.com/USC-NSL/PUMA/blob/2545e58b22f421f387a52f73fa893cf7716bab3c/src/nsl/stg/uiautomator/core/MyInteractionController.java#L403\" rel=\"noreferrer\">public boolean swipe(int downX, int downY, int upX, int upY, int steps, boolean drag)</a></li>\n<li><a href=\"https://github.com/USC-NSL/PUMA/blob/2545e58b22f421f387a52f73fa893cf7716bab3c/src/nsl/stg/uiautomator/core/MyInteractionController.java#L442\" rel=\"noreferrer\">public boolean swipe(Point[] segments, int segmentSteps)</a></li>\n</ul>\n\n<p>Then to achieve my goal, i think that 2rd routine is more appropriated to use (following the logic, excluding event injection) with code showed on <strong>Edit 2</strong> and send all points of <code>pictureBox1_MouseDown</code> and <code>pictureBox1_MouseMove</code> (C# Windows Forms Application) respectively to fill <code>Point[]</code> dynamically and on <code>pictureBox1_MouseUp</code> send cmd to execute the routine and use this array filled. If you have a idea to 1st routine, let me know :D.</p>\n\n<p>If after read this <strong>Edit</strong> you have a possible solution, show me in a answer please, while i will try and test this idea.</p>\n"},{"tags":["java","apache-poi","xlsx"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1640257413,"post_id":70460068,"comment_id":124554211,"body_markdown":"And please show a complete example as I have done in https://stackoverflow.com/questions/60887605/java-how-to-create-a-pivot-with-apache-poi/60891686#60891686.","body":"And please show a complete example as I have done in <a href=\"https://stackoverflow.com/questions/60887605/java-how-to-create-a-pivot-with-apache-poi/60891686#60891686\" title=\"java how to create a pivot with apache poi\">stackoverflow.com/questions/60887605/&hellip;</a>."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1640260306,"post_id":70460068,"comment_id":124555084,"body_markdown":"Thank you for the response and sorry I forgot to add headers in question, I have updated my question. but still it didn&#39;t worked.","body":"Thank you for the response and sorry I forgot to add headers in question, I have updated my question. but still it didn&#39;t worked."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1640263445,"post_id":70460068,"comment_id":124556064,"body_markdown":"I am using poi 4.1.2","body":"I am using poi 4.1.2"},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1640263692,"post_id":70460068,"comment_id":124556144,"body_markdown":"what dose it shows for blank value in pivot?","body":"what dose it shows for blank value in pivot?"},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1640264538,"post_id":70460068,"comment_id":124556413,"body_markdown":"Strange then why it&#39;s not working in my scenario, let me debug more in that case. thanks for the help","body":"Strange then why it&#39;s not working in my scenario, let me debug more in that case. thanks for the help"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1640264892,"post_id":70460068,"comment_id":124556526,"body_markdown":"Do a `System.out.println(areaReference);` after creating the `AreaReference`. What does it print? If you have empty cells in the sheet after the column Header3, then the area reference points to columns without field names. That could lead to that issue.","body":"Do a <code>System.out.println(areaReference);</code> after creating the <code>AreaReference</code>. What does it print? If you have empty cells in the sheet after the column Header3, then the area reference points to columns without field names. That could lead to that issue."},{"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"score":0,"creation_date":1640267621,"post_id":70460068,"comment_id":124557424,"body_markdown":"HI, I have updated inputs for which it is not working","body":"HI, I have updated inputs for which it is not working"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1640268207,"post_id":70460068,"comment_id":124557637,"body_markdown":"*Argh* Pivot table takes values case insensitive. So to determine unique items a `java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);` is needed.","body":"<i>Argh</i> Pivot table takes values case insensitive. So to determine unique items a <code>java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);</code> is needed."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640276214,"creation_date":1640276214,"answer_id":70464737,"question_id":70460068,"body_markdown":"The aim of the `addRowLabel` method, which seems to be from my answer https://stackoverflow.com/questions/60887605/java-how-to-create-a-pivot-with-apache-poi/60891686#60891686, is to correct `apache poi`, which creates as much items for each pivot field as rows are in the pivot table data range. But it should be as much items as unique items are in pivot field data column.\r\n\r\nTo get the unique items per column a `java.util.TreeSet` is used as this cannot contain duplicate elements.\r\n\r\nBut `Excel` pivot table takes the values case insensitive. So `11 KD` and `11 kd` are the same value for `Excel` pivot tables. Thats why `String.CASE_INSENSITIVE_ORDER` needs to be used as `Comparator` while creating the `java.util.TreeSet`.\r\n\r\nDo changing:\r\n\r\n    ...\r\n    java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n    ...\r\n\r\ninto\r\n\r\n    ...\r\n    java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n    ...\r\n\r\nand it should work.\r\n\r\n","title":"Apache poi not allowing blank values for pivot creation","body":"<p>The aim of the <code>addRowLabel</code> method, which seems to be from my answer <a href=\"https://stackoverflow.com/questions/60887605/java-how-to-create-a-pivot-with-apache-poi/60891686#60891686\">java: How to create a pivot with apache poi?</a>, is to correct <code>apache poi</code>, which creates as much items for each pivot field as rows are in the pivot table data range. But it should be as much items as unique items are in pivot field data column.</p>\n<p>To get the unique items per column a <code>java.util.TreeSet</code> is used as this cannot contain duplicate elements.</p>\n<p>But <code>Excel</code> pivot table takes the values case insensitive. So <code>11 KD</code> and <code>11 kd</code> are the same value for <code>Excel</code> pivot tables. Thats why <code>String.CASE_INSENSITIVE_ORDER</code> needs to be used as <code>Comparator</code> while creating the <code>java.util.TreeSet</code>.</p>\n<p>Do changing:</p>\n<pre><code>...\njava.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n...\n</code></pre>\n<p>into</p>\n<pre><code>...\njava.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n...\n</code></pre>\n<p>and it should work.</p>\n"}],"owner":{"account_id":4224410,"reputation":638,"user_id":3458271,"display_name":"user3458271"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70464737,"answer_count":1,"score":0,"last_activity_date":1640276214,"creation_date":1640251620,"question_id":70460068,"body_markdown":"I am trying to create a pivot table using apache poi for normal values it is working fine but if there is null or blank values xlsx file gets repaired and pivot gets removed on opening it.\r\n\r\nHere is my code:\r\n\r\n    static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \r\n\r\n\t\t  DataFormatter formatter = new DataFormatter(java.util.Locale.US);\r\n\t\t  //apache poi creates as much fields for each as rows are in the pivot table data range\r\n\t\t  pivotTable.addRowLabel(column);\r\n\r\n\t\t  java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n\t\t  for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n\t\t\t  if (dataSheet.getRow(r).getCell(column) != null &amp;&amp; dataSheet.getRow(r).getCell(column).getCellType() != CellType.BLANK) {\r\n\t\t\t\t  uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\r\n\t\t\t  } else {\r\n\r\n\t\t\t\t  uniqueItems.add(&quot;&quot;);\r\n\t\t\t  }\r\n\t\t  }\r\n\r\n\t\t  CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\r\n\t\t  int i = 0;\r\n\t\t  for (String item : uniqueItems) {\r\n\t\t   //take the items as numbered items\r\n\t\t   ctPivotField.getItems().getItemArray(i).unsetT();\r\n\t\t   ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n\t\t   //build a cache definition which has shared elements for those items \r\n\t\t   pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column).getSharedItems().addNewS().setV(item);\r\n\t\t   i++;\r\n\t\t  }\r\n\r\n\t\t  //set pivot field settings\r\n\t\t  ctPivotField.setOutline(false); // no outline format\r\n\t\t  ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\r\n\r\n\t\t  if (ctPivotField.getDefaultSubtotal()) i++; \r\n\t\t  for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n\t\t   ctPivotField.getItems().removeItem(k);\r\n\t\t  }\r\n\t\t  ctPivotField.getItems().setCount(i);\r\n\r\n\t\t }\r\n\r\nThis method is used for adding rows and below code is to start execution:\r\n\r\n     public static void secondway( ) throws IOException {\r\n\t\t\t try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;/opt/source.xlsx&quot;)); \r\n\t\t\t\t       FileOutputStream fileout = new FileOutputStream(&quot;/opt/ExcelResult.xlsx&quot;) ) {\r\n\r\n\t\t\t\t   XSSFSheet dataSheet = workbook.getSheetAt(0);\r\n\t\t\t\t   XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n\t\t\t\t   \r\n\t\t\t\t   int firstRow = dataSheet.getFirstRowNum();\r\n\t\t\t\t   int lastRow = dataSheet.getLastRowNum();\r\n\t\t\t\t   int firstCol = dataSheet.getRow(0).getFirstCellNum();\r\n\t\t\t\t   int lastCol = dataSheet.getRow(0).getLastCellNum();\r\n\t\t\t\t   CellReference topLeft = new CellReference(firstRow, firstCol);\r\n\t\t\t\t   CellReference botRight = new CellReference(lastRow, lastCol - 1);\r\n\r\n\t\t\t\t   AreaReference areaReference = new AreaReference(topLeft,botRight, SpreadsheetVersion.EXCEL2007);\r\n\r\n\t\t\t\t   XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\r\n\r\n\t\t\t\t   addRowLabel(pivotTable, dataSheet, areaReference, 0);\r\n\t\t\t\t   addRowLabel(pivotTable, dataSheet, areaReference, 2);\r\n\t\t\t\t   \r\n\t\t\t\t   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, &quot;test&quot;);\r\n\r\n\t\t\t\t   workbook.write(fileout);\r\n\t\t\t \r\n\t\t\t \r\n\t\t\t }\r\n\t\t }\r\n\r\nI  am not sure what is wrong am I doing or how to support blank values. Please help.\r\n\r\nInput that I am using:\r\n\r\n[![!\\[enter image description here][1]][1]\r\n\r\n\r\nWhile opening shows below error and removes piivot:\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PsBjb.png\r\n  [2]: https://i.stack.imgur.com/zjebe.png","title":"Apache poi not allowing blank values for pivot creation","body":"<p>I am trying to create a pivot table using apache poi for normal values it is working fine but if there is null or blank values xlsx file gets repaired and pivot gets removed on opening it.</p>\n<p>Here is my code:</p>\n<pre><code>static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \n\n      DataFormatter formatter = new DataFormatter(java.util.Locale.US);\n      //apache poi creates as much fields for each as rows are in the pivot table data range\n      pivotTable.addRowLabel(column);\n\n      java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n      for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n          if (dataSheet.getRow(r).getCell(column) != null &amp;&amp; dataSheet.getRow(r).getCell(column).getCellType() != CellType.BLANK) {\n              uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\n          } else {\n\n              uniqueItems.add(&quot;&quot;);\n          }\n      }\n\n      CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\n      int i = 0;\n      for (String item : uniqueItems) {\n       //take the items as numbered items\n       ctPivotField.getItems().getItemArray(i).unsetT();\n       ctPivotField.getItems().getItemArray(i).setX((long)i);\n       //build a cache definition which has shared elements for those items \n       pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column).getSharedItems().addNewS().setV(item);\n       i++;\n      }\n\n      //set pivot field settings\n      ctPivotField.setOutline(false); // no outline format\n      ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\n\n      if (ctPivotField.getDefaultSubtotal()) i++; \n      for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n       ctPivotField.getItems().removeItem(k);\n      }\n      ctPivotField.getItems().setCount(i);\n\n     }\n</code></pre>\n<p>This method is used for adding rows and below code is to start execution:</p>\n<pre><code> public static void secondway( ) throws IOException {\n         try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;/opt/source.xlsx&quot;)); \n                   FileOutputStream fileout = new FileOutputStream(&quot;/opt/ExcelResult.xlsx&quot;) ) {\n\n               XSSFSheet dataSheet = workbook.getSheetAt(0);\n               XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n               \n               int firstRow = dataSheet.getFirstRowNum();\n               int lastRow = dataSheet.getLastRowNum();\n               int firstCol = dataSheet.getRow(0).getFirstCellNum();\n               int lastCol = dataSheet.getRow(0).getLastCellNum();\n               CellReference topLeft = new CellReference(firstRow, firstCol);\n               CellReference botRight = new CellReference(lastRow, lastCol - 1);\n\n               AreaReference areaReference = new AreaReference(topLeft,botRight, SpreadsheetVersion.EXCEL2007);\n\n               XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\n\n               addRowLabel(pivotTable, dataSheet, areaReference, 0);\n               addRowLabel(pivotTable, dataSheet, areaReference, 2);\n               \n               pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, &quot;test&quot;);\n\n               workbook.write(fileout);\n         \n         \n         }\n     }\n</code></pre>\n<p>I  am not sure what is wrong am I doing or how to support blank values. Please help.</p>\n<p>Input that I am using:</p>\n<p><a href=\"https://i.stack.imgur.com/PsBjb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PsBjb.png\" alt=\"![enter image description here\" /></a></p>\n<p>While opening shows below error and removes piivot:\n<a href=\"https://i.stack.imgur.com/zjebe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zjebe.png\" alt=\"enter image description here\" /></a></p>\n<p>[![enter image description here][3]][3]</p>\n"},{"tags":["java","maven","unit-testing","junit","continuous-integration"],"comments":[{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1640290621,"post_id":70464610,"comment_id":124564606,"body_markdown":"https://www.baeldung.com/maven-logging -&gt; `mvn test -q`","body":"<a href=\"https://www.baeldung.com/maven-logging\" rel=\"nofollow noreferrer\">baeldung.com/maven-logging</a> -&gt; <code>mvn test -q</code>"},{"owner":{"account_id":3691099,"reputation":3239,"user_id":3073656,"accept_rate":69,"display_name":"daltonfury42"},"score":0,"creation_date":1640409840,"post_id":70464610,"comment_id":124584242,"body_markdown":"@TimothyTruckle This will not completely suppress the output from passing test cases. If 1000 tests ran and 1001th test failed, I want only the 1001th test&#39;s stdout/err to be present in the log.","body":"@TimothyTruckle This will not completely suppress the output from passing test cases. If 1000 tests ran and 1001th test failed, I want only the 1001th test&#39;s stdout/err to be present in the log."},{"owner":{"account_id":5543,"reputation":25609,"user_id":8976,"accept_rate":100,"display_name":"EricSchaefer"},"score":0,"creation_date":1640411034,"post_id":70464610,"comment_id":124584313,"body_markdown":"Why do your tests have so much output anyway? A passing test should never have to print anything anyway and a failing test should tell you what failed by itself, without looking at additionl output.","body":"Why do your tests have so much output anyway? A passing test should never have to print anything anyway and a failing test should tell you what failed by itself, without looking at additionl output."},{"owner":{"account_id":3691099,"reputation":3239,"user_id":3073656,"accept_rate":69,"display_name":"daltonfury42"},"score":0,"creation_date":1640496899,"post_id":70464610,"comment_id":124595025,"body_markdown":"@EricSchaefer Badly written tests, unfortunately. :/\n\nBut also the classes under test has a lot of log lines. We test negative paths which would print stack traces. They all together makes the output very verbose.","body":"@EricSchaefer Badly written tests, unfortunately. :/  But also the classes under test has a lot of log lines. We test negative paths which would print stack traces. They all together makes the output very verbose."}],"owner":{"account_id":3691099,"reputation":3239,"user_id":3073656,"accept_rate":69,"display_name":"daltonfury42"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":564,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640275419,"creation_date":1640275419,"question_id":70464610,"body_markdown":"We have a lot of tests running as part of our CI, and tests do print a lot of text output to stdout/err.\r\n\r\nThe output is becoming too large (~20 MB in size) to be viewed on the UI, and the team now has to download it to their system and open it. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nWe use maven and junit is the test runner. Can I somehow configure `mvn test` to print the stdout only for test case failures?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d87Xh.png","title":"How to make JUnit tests print output only for failed test cases?","body":"<p>We have a lot of tests running as part of our CI, and tests do print a lot of text output to stdout/err.</p>\n<p>The output is becoming too large (~20 MB in size) to be viewed on the UI, and the team now has to download it to their system and open it.</p>\n<p><a href=\"https://i.stack.imgur.com/d87Xh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d87Xh.png\" alt=\"enter image description here\" /></a></p>\n<p>We use maven and junit is the test runner. Can I somehow configure <code>mvn test</code> to print the stdout only for test case failures?</p>\n"},{"tags":["javascript","java","android","react-native"],"comments":[{"owner":{"account_id":1214097,"reputation":175,"user_id":1182033,"accept_rate":57,"display_name":"Jay Chung"},"score":0,"creation_date":1499781701,"post_id":44918130,"comment_id":77047425,"body_markdown":"Did you instantiate your mReactInstanceManager?","body":"Did you instantiate your mReactInstanceManager?"},{"owner":{"account_id":11258025,"reputation":21,"user_id":8257117,"display_name":"Allen L."},"score":0,"creation_date":1499846860,"post_id":44918130,"comment_id":77077251,"body_markdown":"Yes I did use mReactInstanceManager","body":"Yes I did use mReactInstanceManager"}],"answers":[{"tags":[],"owner":{"account_id":12215683,"reputation":598,"user_id":8916217,"display_name":"Sher Mi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640275405,"creation_date":1640275405,"answer_id":70464608,"question_id":44918130,"body_markdown":"You probably forgot to add \r\n``` implements DefaultHardwareBackBtnHandler ```\r\n\r\n```\r\npublic class MyReactActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {\r\n...\r\n}\r\n```\r\n\r\n","title":"React Activity OnHostPause/OnHostResume methods throw errors in Android Studio","body":"<p>You probably forgot to add\n<code>implements DefaultHardwareBackBtnHandler</code></p>\n<pre><code>public class MyReactActivity extends AppCompatActivity implements DefaultHardwareBackBtnHandler {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":11258025,"reputation":21,"user_id":8257117,"display_name":"Allen L."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":992,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1640275405,"creation_date":1499234711,"question_id":44918130,"body_markdown":"OnHostPause and onHostResume are methods that I saw in the Facebook React-Native tutorial for Integration with Existing Apps section. However, when I tried to use the sample code they gave me it is throwing an error at the methods OnHostPause/OnHostResume/OnHost.... Does anyone know why it is doing this and what methods I should be calling instead?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IYQLb.png","title":"React Activity OnHostPause/OnHostResume methods throw errors in Android Studio","body":"<p>OnHostPause and onHostResume are methods that I saw in the Facebook React-Native tutorial for Integration with Existing Apps section. However, when I tried to use the sample code they gave me it is throwing an error at the methods OnHostPause/OnHostResume/OnHost.... Does anyone know why it is doing this and what methods I should be calling instead?</p>\n\n<p><a href=\"https://i.stack.imgur.com/IYQLb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IYQLb.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring-boot","log4j2"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":4,"creation_date":1640183455,"post_id":70450611,"comment_id":124535530,"body_markdown":"Note: if you think they have a bug in their code, you should probably write up a defect on their issue tracker.","body":"Note: if you think they have a bug in their code, you should probably write up a defect on their issue tracker."},{"owner":{"account_id":7178634,"reputation":55168,"user_id":5483526,"display_name":"Matt Timmermans"},"score":1,"creation_date":1640183970,"post_id":70450611,"comment_id":124535754,"body_markdown":"Is there a question?","body":"Is there a question?"},{"owner":{"account_id":17490217,"reputation":161,"user_id":12682515,"display_name":"Faisal Khan"},"score":0,"creation_date":1640185146,"post_id":70450611,"comment_id":124536225,"body_markdown":"Can the issue that I mentioned attribute to a deadlock?","body":"Can the issue that I mentioned attribute to a deadlock?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1640185233,"post_id":70450611,"comment_id":124536263,"body_markdown":"If you know what the problem is, then 1) submit a bug report with the fix, and 2) build and use a patched version until they merge your patch and release it.","body":"If you know what the problem is, then 1) submit a bug report with the fix, and 2) build and use a patched version until they merge your patch and release it."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1640185401,"post_id":70450611,"comment_id":124536328,"body_markdown":"*&quot;Can the issue that I mentioned attribute to a deadlock?&quot;* - I don&#39;t know how we can know that.  We don&#39;t have access to the thread dumps that lead to you concluding that this was the possible cause.  But if you think the bug you have found is the cause ... try fixing it and seeing if the deadlock recurs.","body":"<i>&quot;Can the issue that I mentioned attribute to a deadlock?&quot;</i> - I don&#39;t know how we can know that.  We don&#39;t have access to the thread dumps that lead to you concluding that this was the possible cause.  But if you think the bug you have found is the cause ... try fixing it and seeing if the deadlock recurs."},{"owner":{"account_id":17490217,"reputation":161,"user_id":12682515,"display_name":"Faisal Khan"},"score":0,"creation_date":1640186251,"post_id":70450611,"comment_id":124536692,"body_markdown":"Thanks! I updated the question with thread dumps. And submitted a bug report https://issues.apache.org/jira/browse/LOG4J2-3274","body":"Thanks! I updated the question with thread dumps. And submitted a bug report <a href=\"https://issues.apache.org/jira/browse/LOG4J2-3274\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/LOG4J2-3274</a>"},{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1640186307,"post_id":70450611,"comment_id":124536725,"body_markdown":"If possible revert it to the previous version and remove JNDILookUp class from the jar.","body":"If possible revert it to the previous version and remove JNDILookUp class from the jar."}],"answers":[{"tags":[],"owner":{"account_id":17490217,"reputation":161,"user_id":12682515,"display_name":"Faisal Khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640275390,"creation_date":1640275390,"answer_id":70464607,"question_id":70450611,"body_markdown":"Found my answer in this thread https://developer.jboss.org/thread/241453.\r\nIt is a log4j/jboss configuration issue. The fix is to either exclude jboss logging subsystem from jboss deployment configuration or get rid of the console appender. Thanks to Ralph Goers from Log4J team for guiding me towards the jboss thread.\r\n\r\nI have closed the issue that I raised to https://issues.apache.org/jira/browse/LOG4J2-3274. The code snippet that I shared in this question was from log4j-1.2 compatibility adapter which doesn&#39;t has any impact in my code because I am already using the latest api version.","title":"Log4j2 deadlock","body":"<p>Found my answer in this thread <a href=\"https://developer.jboss.org/thread/241453\" rel=\"nofollow noreferrer\">https://developer.jboss.org/thread/241453</a>.\nIt is a log4j/jboss configuration issue. The fix is to either exclude jboss logging subsystem from jboss deployment configuration or get rid of the console appender. Thanks to Ralph Goers from Log4J team for guiding me towards the jboss thread.</p>\n<p>I have closed the issue that I raised to <a href=\"https://issues.apache.org/jira/browse/LOG4J2-3274\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/LOG4J2-3274</a>. The code snippet that I shared in this question was from log4j-1.2 compatibility adapter which doesn't has any impact in my code because I am already using the latest api version.</p>\n"}],"owner":{"account_id":17490217,"reputation":161,"user_id":12682515,"display_name":"Faisal Khan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1083,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70464607,"answer_count":1,"score":4,"last_activity_date":1640275390,"creation_date":1640183345,"question_id":70450611,"body_markdown":"My application is a sprint boot application that uses log4j2 and runs in a Wildfly server. After the zero day attak, we upgraded to the latest log4j2 version(2.16). But after the log4j upgrade, my application stops working once in a while. And when I looked at the threaddumps, I found that there is a deadlock created by log4j. \r\nHere is my log4j configuration. It was working fine before the upgrade.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;Configuration&gt;\r\n    \r\n        &lt;Properties&gt;\r\n            &lt;Property name=&quot;LOGDIR&quot;&gt;${sys:jboss.server.log.dir}/application&lt;/Property&gt;\r\n            &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d %-5p [%-8.8t] %-25.25c{1} | [%X{correlationId}] %m%n&lt;/Property&gt;\r\n        &lt;/Properties&gt;\r\n    \r\n        &lt;Appenders&gt;\r\n    \r\n            &lt;Console name=&quot;SYSOUT&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\r\n            &lt;/Console&gt;\r\n    \r\n            &lt;RollingFile name=&quot;CSL&quot; fileName=&quot;${LOGDIR}/csl.log&quot;\r\n                         filePattern=&quot;${LOGDIR}/csl.%d{yyyy-MM-dd}.log.gz&quot; ignoreExceptions=&quot;false&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n                &lt;DefaultRolloverStrategy&gt;\r\n                    &lt;Delete basePath=&quot;${LOGDIR}&quot; maxDepth=&quot;1&quot;&gt;\r\n                        &lt;IfAny&gt;\r\n                            &lt;IfFileName glob=&quot;csl*.log.gz&quot; /&gt;\r\n                            &lt;IfFileName glob=&quot;access_log*.log&quot; /&gt;\r\n                        &lt;/IfAny&gt;\r\n                        &lt;IfLastModified age=&quot;7d&quot; /&gt;\r\n                    &lt;/Delete&gt;\r\n                &lt;/DefaultRolloverStrategy&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n            &lt;RollingFile name=&quot;OTR&quot; fileName=&quot;${LOGDIR}/otr.log&quot;\r\n                         filePattern=&quot;${LOGDIR}/otr.%d{yyyy-MM-dd}.log.gz&quot; ignoreExceptions=&quot;true&quot;\r\n                         bufferedIO=&quot;true&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\r\n                &lt;Policies&gt;\r\n                    &lt;TimeBasedTriggeringPolicy/&gt;\r\n                &lt;/Policies&gt;\r\n                &lt;DefaultRolloverStrategy&gt;\r\n                    &lt;Delete basePath=&quot;${LOGDIR}&quot; maxDepth=&quot;1&quot;&gt;\r\n                        &lt;IfFileName glob=&quot;otr*.log.gz&quot; /&gt;\r\n                        &lt;IfLastModified age=&quot;23d&quot; /&gt;\r\n                    &lt;/Delete&gt;\r\n                &lt;/DefaultRolloverStrategy&gt;\r\n            &lt;/RollingFile&gt;\r\n    \r\n        &lt;/Appenders&gt;\r\n    \r\n        &lt;Loggers&gt;\r\n            &lt;Logger name=&quot;org.apache.catalina.startup.DigesterFactory&quot; level=&quot;error&quot; /&gt;\r\n            &lt;Logger name=&quot;org.apache.catalina.util.LifecycleBase&quot; level=&quot;error&quot; /&gt;\r\n            &lt;Logger name=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; level=&quot;warn&quot; /&gt;\r\n            &lt;logger name=&quot;org.apache.sshd.common.util.SecurityUtils&quot; level=&quot;warn&quot;/&gt;\r\n            &lt;Logger name=&quot;org.apache.tomcat.util.net.NioSelectorPool&quot; level=&quot;warn&quot; /&gt;\r\n            &lt;Logger name=&quot;org.eclipse.jetty.util.component.AbstractLifeCycle&quot; level=&quot;error&quot; /&gt;\r\n            &lt;Logger name=&quot;org.hibernate.validator.internal.util.Version&quot; level=&quot;warn&quot; /&gt;\r\n            &lt;logger name=&quot;org.springframework.boot.actuate.endpoint.jmx&quot; level=&quot;warn&quot;/&gt;\r\n    \r\n            &lt;logger name=&quot;org.springframework&quot; level=&quot;info&quot;/&gt;\r\n            &lt;logger name=&quot;org.springframework.aop.framework&quot; level=&quot;warn&quot;/&gt;\r\n            &lt;logger name=&quot;org.apache.jasper.servlet.JspServlet&quot; level=&quot;trace&quot;/&gt;\r\n            &lt;logger name=&quot;com.zaxxer.hikari.pool.HikariPool&quot; level=&quot;debug&quot;/&gt;\r\n            &lt;logger name=&quot;com.google.code.ssm.spring.SSMCache&quot; level=&quot;warn&quot;/&gt;\r\n    \r\n            &lt;logger name=&quot;com.faskan&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\r\n                &lt;appender-ref ref=&quot;OTR&quot; /&gt;\r\n                &lt;appender-ref ref=&quot;CSL&quot; /&gt;\r\n            &lt;/logger&gt;\r\n    \r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;CSL&quot;/&gt;\r\n                &lt;AppenderRef ref=&quot;SYSOUT&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    \r\n    &lt;/Configuration&gt;\r\n\r\nWhen analysing this issue, I came through a possible defect in log4j code. Not sure if that can result in a deadlock.\r\n\r\n**Log4J possible bug** -\r\nAs per the release notes, there was a fix to **Enable immediate flush on RollingFileAppender when buffered i/o is not enabled. (LOG4J2-3114)**. But the code just does the opposite in RollingFileAppenderBuilder.\r\n\r\n    private Appender createAppender(final String name, final Log4j1Configuration config, final Layout layout,\r\n                final Filter filter, final boolean bufferedIo, boolean immediateFlush, final String fileName,\r\n                final String level, final String maxSize, final String maxBackups) {\r\n            org.apache.logging.log4j.core.Layout&lt;?&gt; fileLayout = null;\r\n            if (bufferedIo) {\r\n                immediateFlush = true;\r\n            }\r\n    ...\r\nIt should have been `if(!bufferedIo) { immediateFlush = true; }`. And one of my appender explicitly sets bufferedIo value to true. I know that log4j does a bufferedio by default and it is not necessary to set this flag explicitly. But unfortunately the code that I am working on is a legacy code and the configuration was working fine before the upgrade.\r\n\r\n**Threaddump**\r\n&quot;default task-128&quot; #450 prio=5 os_prio=0 tid=0x00007f31f80cf800 nid=0x14c8 waiting for monitor entry [0x00007f31a7d88000]\r\n   java.lang.Thread.State: BLOCKED (on object monitor)\r\n\tat org.apache.logging.log4j.core.appender.OutputStreamManager.writeBytes(OutputStreamManager.java:352)\r\n\t- waiting to lock &lt;0x00000000c0e70eb0&gt; (a org.apache.logging.log4j.core.appender.OutputStreamManager)\r\n\tat org.apache.logging.log4j.core.layout.TextEncoderHelper.writeEncodedText(TextEncoderHelper.java:96)\r\n\tat org.apache.logging.log4j.core.layout.TextEncoderHelper.encodeText(TextEncoderHelper.java:65)\r\n\tat org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:68)\r\n\tat org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:32)\r\n\tat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:228)\r\n\tat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:60)\r\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.directEncodeEvent(AbstractOutputStreamAppender.java:197)\r\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.tryAppend(AbstractOutputStreamAppender.java:190)\r\n\tat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:181)\r\n\tat org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:161)\r\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:134)\r\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:125)\r\n\tat org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:89)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:542)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:500)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:483)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.logParent(LoggerConfig.java:533)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:502)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:483)\r\n\tat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:388)\r\n\tat org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:63)\r\n\tat org.apache.logging.log4j.core.Logger.logMessage(Logger.java:153)\r\n\tat org.apache.logging.slf4j.Log4jLogger.log(Log4jLogger.java:376)\r\n\tat org.apache.commons.logging.impl.SLF4JLocationAwareLog.error(SLF4JLocationAwareLog.java:203)\r\n\tat org.springframework.boot.web.support.ErrorPageFilter.handleCommittedResponse(ErrorPageFilter.java:225)","title":"Log4j2 deadlock","body":"<p>My application is a sprint boot application that uses log4j2 and runs in a Wildfly server. After the zero day attak, we upgraded to the latest log4j2 version(2.16). But after the log4j upgrade, my application stops working once in a while. And when I looked at the threaddumps, I found that there is a deadlock created by log4j.\nHere is my log4j configuration. It was working fine before the upgrade.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;Configuration&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;LOGDIR&quot;&gt;${sys:jboss.server.log.dir}/application&lt;/Property&gt;\n        &lt;Property name=&quot;FILE_LOG_PATTERN&quot;&gt;%d %-5p [%-8.8t] %-25.25c{1} | [%X{correlationId}] %m%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n\n        &lt;Console name=&quot;SYSOUT&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;CSL&quot; fileName=&quot;${LOGDIR}/csl.log&quot;\n                     filePattern=&quot;${LOGDIR}/csl.%d{yyyy-MM-dd}.log.gz&quot; ignoreExceptions=&quot;false&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy&gt;\n                &lt;Delete basePath=&quot;${LOGDIR}&quot; maxDepth=&quot;1&quot;&gt;\n                    &lt;IfAny&gt;\n                        &lt;IfFileName glob=&quot;csl*.log.gz&quot; /&gt;\n                        &lt;IfFileName glob=&quot;access_log*.log&quot; /&gt;\n                    &lt;/IfAny&gt;\n                    &lt;IfLastModified age=&quot;7d&quot; /&gt;\n                &lt;/Delete&gt;\n            &lt;/DefaultRolloverStrategy&gt;\n        &lt;/RollingFile&gt;\n\n        &lt;RollingFile name=&quot;OTR&quot; fileName=&quot;${LOGDIR}/otr.log&quot;\n                     filePattern=&quot;${LOGDIR}/otr.%d{yyyy-MM-dd}.log.gz&quot; ignoreExceptions=&quot;true&quot;\n                     bufferedIO=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${FILE_LOG_PATTERN}&quot;/&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy/&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy&gt;\n                &lt;Delete basePath=&quot;${LOGDIR}&quot; maxDepth=&quot;1&quot;&gt;\n                    &lt;IfFileName glob=&quot;otr*.log.gz&quot; /&gt;\n                    &lt;IfLastModified age=&quot;23d&quot; /&gt;\n                &lt;/Delete&gt;\n            &lt;/DefaultRolloverStrategy&gt;\n        &lt;/RollingFile&gt;\n\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;org.apache.catalina.startup.DigesterFactory&quot; level=&quot;error&quot; /&gt;\n        &lt;Logger name=&quot;org.apache.catalina.util.LifecycleBase&quot; level=&quot;error&quot; /&gt;\n        &lt;Logger name=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; level=&quot;warn&quot; /&gt;\n        &lt;logger name=&quot;org.apache.sshd.common.util.SecurityUtils&quot; level=&quot;warn&quot;/&gt;\n        &lt;Logger name=&quot;org.apache.tomcat.util.net.NioSelectorPool&quot; level=&quot;warn&quot; /&gt;\n        &lt;Logger name=&quot;org.eclipse.jetty.util.component.AbstractLifeCycle&quot; level=&quot;error&quot; /&gt;\n        &lt;Logger name=&quot;org.hibernate.validator.internal.util.Version&quot; level=&quot;warn&quot; /&gt;\n        &lt;logger name=&quot;org.springframework.boot.actuate.endpoint.jmx&quot; level=&quot;warn&quot;/&gt;\n\n        &lt;logger name=&quot;org.springframework&quot; level=&quot;info&quot;/&gt;\n        &lt;logger name=&quot;org.springframework.aop.framework&quot; level=&quot;warn&quot;/&gt;\n        &lt;logger name=&quot;org.apache.jasper.servlet.JspServlet&quot; level=&quot;trace&quot;/&gt;\n        &lt;logger name=&quot;com.zaxxer.hikari.pool.HikariPool&quot; level=&quot;debug&quot;/&gt;\n        &lt;logger name=&quot;com.google.code.ssm.spring.SSMCache&quot; level=&quot;warn&quot;/&gt;\n\n        &lt;logger name=&quot;com.faskan&quot; level=&quot;info&quot; additivity=&quot;false&quot;&gt;\n            &lt;appender-ref ref=&quot;OTR&quot; /&gt;\n            &lt;appender-ref ref=&quot;CSL&quot; /&gt;\n        &lt;/logger&gt;\n\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;CSL&quot;/&gt;\n            &lt;AppenderRef ref=&quot;SYSOUT&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n\n&lt;/Configuration&gt;\n</code></pre>\n<p>When analysing this issue, I came through a possible defect in log4j code. Not sure if that can result in a deadlock.</p>\n<p><strong>Log4J possible bug</strong> -\nAs per the release notes, there was a fix to <strong>Enable immediate flush on RollingFileAppender when buffered i/o is not enabled. (LOG4J2-3114)</strong>. But the code just does the opposite in RollingFileAppenderBuilder.</p>\n<pre><code>private Appender createAppender(final String name, final Log4j1Configuration config, final Layout layout,\n            final Filter filter, final boolean bufferedIo, boolean immediateFlush, final String fileName,\n            final String level, final String maxSize, final String maxBackups) {\n        org.apache.logging.log4j.core.Layout&lt;?&gt; fileLayout = null;\n        if (bufferedIo) {\n            immediateFlush = true;\n        }\n...\n</code></pre>\n<p>It should have been <code>if(!bufferedIo) { immediateFlush = true; }</code>. And one of my appender explicitly sets bufferedIo value to true. I know that log4j does a bufferedio by default and it is not necessary to set this flag explicitly. But unfortunately the code that I am working on is a legacy code and the configuration was working fine before the upgrade.</p>\n<p><strong>Threaddump</strong>\n&quot;default task-128&quot; #450 prio=5 os_prio=0 tid=0x00007f31f80cf800 nid=0x14c8 waiting for monitor entry [0x00007f31a7d88000]\njava.lang.Thread.State: BLOCKED (on object monitor)\nat org.apache.logging.log4j.core.appender.OutputStreamManager.writeBytes(OutputStreamManager.java:352)\n- waiting to lock &lt;0x00000000c0e70eb0&gt; (a org.apache.logging.log4j.core.appender.OutputStreamManager)\nat org.apache.logging.log4j.core.layout.TextEncoderHelper.writeEncodedText(TextEncoderHelper.java:96)\nat org.apache.logging.log4j.core.layout.TextEncoderHelper.encodeText(TextEncoderHelper.java:65)\nat org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:68)\nat org.apache.logging.log4j.core.layout.StringBuilderEncoder.encode(StringBuilderEncoder.java:32)\nat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:228)\nat org.apache.logging.log4j.core.layout.PatternLayout.encode(PatternLayout.java:60)\nat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.directEncodeEvent(AbstractOutputStreamAppender.java:197)\nat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.tryAppend(AbstractOutputStreamAppender.java:190)\nat org.apache.logging.log4j.core.appender.AbstractOutputStreamAppender.append(AbstractOutputStreamAppender.java:181)\nat org.apache.logging.log4j.core.config.AppenderControl.tryCallAppender(AppenderControl.java:161)\nat org.apache.logging.log4j.core.config.AppenderControl.callAppender0(AppenderControl.java:134)\nat org.apache.logging.log4j.core.config.AppenderControl.callAppenderPreventRecursion(AppenderControl.java:125)\nat org.apache.logging.log4j.core.config.AppenderControl.callAppender(AppenderControl.java:89)\nat org.apache.logging.log4j.core.config.LoggerConfig.callAppenders(LoggerConfig.java:542)\nat org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:500)\nat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:483)\nat org.apache.logging.log4j.core.config.LoggerConfig.logParent(LoggerConfig.java:533)\nat org.apache.logging.log4j.core.config.LoggerConfig.processLogEvent(LoggerConfig.java:502)\nat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:483)\nat org.apache.logging.log4j.core.config.LoggerConfig.log(LoggerConfig.java:388)\nat org.apache.logging.log4j.core.config.AwaitCompletionReliabilityStrategy.log(AwaitCompletionReliabilityStrategy.java:63)\nat org.apache.logging.log4j.core.Logger.logMessage(Logger.java:153)\nat org.apache.logging.slf4j.Log4jLogger.log(Log4jLogger.java:376)\nat org.apache.commons.logging.impl.SLF4JLocationAwareLog.error(SLF4JLocationAwareLog.java:203)\nat org.springframework.boot.web.support.ErrorPageFilter.handleCommittedResponse(ErrorPageFilter.java:225)</p>\n"},{"tags":["java","maven","static-analysis"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":1,"creation_date":1595348599,"post_id":63018251,"comment_id":111441054,"body_markdown":"1. Repositories are usually not defined in the POM, but in the `settings.xml`. 2. To determine whether a property is used or not would mean to look inside the plugin code. 3. Maybe this could be done 4. How do you know if a version is non-breaking? If you want to avoid major upgrades, there a parameter for that.","body":"1. Repositories are usually not defined in the POM, but in the <code>settings.xml</code>. 2. To determine whether a property is used or not would mean to look inside the plugin code. 3. Maybe this could be done 4. How do you know if a version is non-breaking? If you want to avoid major upgrades, there a parameter for that."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1595404922,"post_id":63018251,"comment_id":111459189,"body_markdown":"Maven itself warns you about certain mistakes. When you let your project build do you see some? An upgrade to maven 3.5 or so also helped because you get colored output... Eclipse gives you basic info when your pom has some redundant stuff inside. But I don&#39;t know anything to the extend what you describe/want...","body":"Maven itself warns you about certain mistakes. When you let your project build do you see some? An upgrade to maven 3.5 or so also helped because you get colored output... Eclipse gives you basic info when your pom has some redundant stuff inside. But I don&#39;t know anything to the extend what you describe/want..."}],"answers":[{"tags":[],"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1595442136,"creation_date":1595442136,"answer_id":63040800,"question_id":63018251,"body_markdown":"Sounds like there isn&#39;t a pom.xml linter like jshint.com that I can paste my pom into and get advice out.","title":"How to analyze a Maven pom.xml for mistakes (a pom linter for redundant or ignored properties?)","body":"<p>Sounds like there isn't a pom.xml linter like jshint.com that I can paste my pom into and get advice out.</p>\n"},{"tags":[],"owner":{"account_id":14658894,"reputation":261,"user_id":10586727,"display_name":"Henrique Prange"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640275192,"creation_date":1640275192,"answer_id":70464555,"question_id":63018251,"body_markdown":"For a simple static analysis of your `pom.xml`, you can use the [lint-maven-plugin](https://github.com/lewisd32/lint-maven-plugin).\r\n\r\n1. Add the following to your `pom.xml`:\r\n\r\n```xml\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;com.lewisd&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lint-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.11&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n  &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\n2. Run the `lint:check` goal to check your `pom.xml` for violations.\r\n\r\n```shell\r\n$ mvn lint:check\r\n```\r\n\r\nThe plugin will report any violations in your `pom.xml` as demonstrated below.\r\n\r\n```\r\n[INFO] --- lint-maven-plugin:0.0.11:check (default-cli) @ maven-sample ---\r\n[INFO] Writing summary report\r\n[INFO] [LINT] Completed with 3 violations\r\n[INFO] [LINT] OSSDevelopersSectionRule: missing &lt;developers/&gt; section : 0:0 : /Users/jdoe/workspace/maven-sample/pom.xml\r\n[INFO] [LINT] OSSInceptionYearRule: missing &lt;inceptionYear/&gt; information : 0:0 : /Users/jdoe/workspace/maven-sample/pom.xml\r\n[INFO] [LINT] GAVOrder: Found &#39;name&#39; but was expecting &#39;packaging&#39; : 19:8 : /Users/jdoe/workspace/maven-sample/pom.xml\r\n```\r\n\r\nYou can see a list of available rules by running the `lint:list` goal.","title":"How to analyze a Maven pom.xml for mistakes (a pom linter for redundant or ignored properties?)","body":"<p>For a simple static analysis of your <code>pom.xml</code>, you can use the <a href=\"https://github.com/lewisd32/lint-maven-plugin\" rel=\"nofollow noreferrer\">lint-maven-plugin</a>.</p>\n<ol>\n<li>Add the following to your <code>pom.xml</code>:</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;com.lewisd&lt;/groupId&gt;\n      &lt;artifactId&gt;lint-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;0.0.11&lt;/version&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Run the <code>lint:check</code> goal to check your <code>pom.xml</code> for violations.</li>\n</ol>\n<pre class=\"lang-sh prettyprint-override\"><code>$ mvn lint:check\n</code></pre>\n<p>The plugin will report any violations in your <code>pom.xml</code> as demonstrated below.</p>\n<pre><code>[INFO] --- lint-maven-plugin:0.0.11:check (default-cli) @ maven-sample ---\n[INFO] Writing summary report\n[INFO] [LINT] Completed with 3 violations\n[INFO] [LINT] OSSDevelopersSectionRule: missing &lt;developers/&gt; section : 0:0 : /Users/jdoe/workspace/maven-sample/pom.xml\n[INFO] [LINT] OSSInceptionYearRule: missing &lt;inceptionYear/&gt; information : 0:0 : /Users/jdoe/workspace/maven-sample/pom.xml\n[INFO] [LINT] GAVOrder: Found 'name' but was expecting 'packaging' : 19:8 : /Users/jdoe/workspace/maven-sample/pom.xml\n</code></pre>\n<p>You can see a list of available rules by running the <code>lint:list</code> goal.</p>\n"}],"owner":{"account_id":1131963,"reputation":5224,"user_id":1117848,"accept_rate":73,"display_name":"Benjamin H"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":937,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1640275192,"creation_date":1595346513,"question_id":63018251,"body_markdown":"My `pom.xml` is messy, having collected cruft over time.  Is there any automated way to &quot;clean up&quot; a pom?  Like a linter but for maven.\r\n\r\nIn IntelliJ I can run `Analyze &gt; Inspect Code` and get a list of unused functions, silly iterators, and probable bugs.  I think I&#39;m looking for the same thing for my pom\r\n\r\n1. Unused repositories, pluginRepositories\r\n2. Unused properties\r\n3. properties that collide with settings specified within the plugin\r\n4. Dependencies with more recent versions (`mvn versions:display-dependency-updates` works, but doesn&#39;t restrict to non-breaking version updates)\r\n","title":"How to analyze a Maven pom.xml for mistakes (a pom linter for redundant or ignored properties?)","body":"<p>My <code>pom.xml</code> is messy, having collected cruft over time.  Is there any automated way to &quot;clean up&quot; a pom?  Like a linter but for maven.</p>\n<p>In IntelliJ I can run <code>Analyze &gt; Inspect Code</code> and get a list of unused functions, silly iterators, and probable bugs.  I think I'm looking for the same thing for my pom</p>\n<ol>\n<li>Unused repositories, pluginRepositories</li>\n<li>Unused properties</li>\n<li>properties that collide with settings specified within the plugin</li>\n<li>Dependencies with more recent versions (<code>mvn versions:display-dependency-updates</code> works, but doesn't restrict to non-breaking version updates)</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","unit-testing","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":14013147,"reputation":21,"user_id":10590696,"display_name":"Stgr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640275155,"creation_date":1640275155,"answer_id":70464548,"question_id":70461891,"body_markdown":"I&#39;ve solved this. The problem was that I wasn&#39;t instantiating my Mocks object. I&#39;ve also provided a mock of the nested mapper to the EventMapperImpl in the before method:\r\n\r\n```\r\n    @ExtendWith(SpringExtension.class)\r\npublic class EventMapperTest {\r\n\r\n    private Mocks mocks;\r\n\r\n    private EventMapper eventMapper;\r\n\r\n    @Mock\r\n    private EventCategoryMapper eventCategoryMapper;\r\n\r\n    @BeforeEach\r\n    void before() {\r\n        eventMapper = new EventMapperImpl(eventCategoryMapper);\r\n        mocks = new Mocks();\r\n    }\r\n    \r\n    @Test\r\n    @DisplayName(&quot;Should return an Event from an EventMO&quot;)\r\n    void shouldReturnEventfromEventMO() {\r\n\r\n        when(eventCategoryMapper.fromEventCategoryMO(any(EventCategoryMO.class))).thenReturn(mocks.getEventCategory());\r\n        var event = eventMapper.fromEventMO(mocks.getEventMO());\r\n\r\n        assertEquals(event.getId(), 123L);\r\n\r\n\r\n    }\r\n```","title":"Is there any way to unit test a Mapstruct with nested Mapper?","body":"<p>I've solved this. The problem was that I wasn't instantiating my Mocks object. I've also provided a mock of the nested mapper to the EventMapperImpl in the before method:</p>\n<pre><code>    @ExtendWith(SpringExtension.class)\npublic class EventMapperTest {\n\n    private Mocks mocks;\n\n    private EventMapper eventMapper;\n\n    @Mock\n    private EventCategoryMapper eventCategoryMapper;\n\n    @BeforeEach\n    void before() {\n        eventMapper = new EventMapperImpl(eventCategoryMapper);\n        mocks = new Mocks();\n    }\n    \n    @Test\n    @DisplayName(&quot;Should return an Event from an EventMO&quot;)\n    void shouldReturnEventfromEventMO() {\n\n        when(eventCategoryMapper.fromEventCategoryMO(any(EventCategoryMO.class))).thenReturn(mocks.getEventCategory());\n        var event = eventMapper.fromEventMO(mocks.getEventMO());\n\n        assertEquals(event.getId(), 123L);\n\n\n    }\n</code></pre>\n"}],"owner":{"account_id":14013147,"reputation":21,"user_id":10590696,"display_name":"Stgr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1105,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70464548,"answer_count":1,"score":2,"last_activity_date":1640275155,"creation_date":1640260893,"question_id":70461891,"body_markdown":"I&#39;m trying to unit test a Mapstruct nested mapper as follows:\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;, uses = EventCategoryMapper.class, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\r\npublic interface EventMapper {\r\n\r\n    \r\n    Event fromEventMO(EventMO eventMO);\r\n\r\n    EventMO toEventMO(Event event);\r\n\r\n    default Optional&lt;Event&gt; fromOptionalEventMO(Optional&lt;EventMO&gt; optionalEventMO) {\r\n        \r\n        return (optionalEventMO.isEmpty()) ? Optional.empty() : Optional.of(fromEventMO(optionalEventMO.get()));\r\n        \r\n    }\r\n    \r\n}\r\n```\r\n\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\r\npublic interface EventCategoryMapper {\r\n\r\n    \r\n    EventCategory fromEventCategoryMO(EventCategoryMO eventCategoryMO);\r\n\r\n    EventCategoryMO toEventCategoryMO(EventCategory eventCategory);\r\n\r\n    default String fromPriorityMO(PriorityMO priority) {\r\n        return (priority.getPriority()==null) ? null : priority.getPriority();\r\n    }\r\n\r\n```\r\n\r\nI&#39;m trying to test the EventMapper:\r\n\r\n```\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = {EventMapper.class, EventCategoryMapper.class, EventMapperImpl.class, EventCategoryMapperImpl.class})\r\npublic class EventMapperTest {\r\n\r\n    private Mocks mocks; //This object contains the mocked objects that should be mapped.\r\n\r\n    @Autowired\r\n    private EventMapper eventMapper;\r\n\r\n    @Test\r\n    @DisplayName(&quot;Should return an Event from an EventMO&quot;)\r\n    void shouldReturnEventfromEventMO() {\r\n        \r\n        var event = eventMapper.fromEventMO(mocks.getEventMO());\r\n\r\n        assertEquals(event.getId(), 123L);\r\n\r\n\r\n    }\r\n```\r\nBut it keeps failing with:\r\n\r\n&gt; Error creating bean with name &#39;eventMapper&#39;: Instantiation of bean\r\n&gt; failed; nested exception is\r\n&gt; org.springframework.beans.BeanInstantiationException: Failed to\r\n&gt; instantiate\r\n&gt; [com.mycompany.cna.projects.fishmarket.back.events.repositories.mappers.event.EventMapper]:\r\n&gt; Specified class is an interface\r\n\r\nI&#39;ve already tried instantiating the mapper with Mapper.getMapper(EventMapper.class) and it returned a NullPointerException.\r\n\r\nWhat should I do to achieve unit testing on those kind of mappers?","title":"Is there any way to unit test a Mapstruct with nested Mapper?","body":"<p>I'm trying to unit test a Mapstruct nested mapper as follows:</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;, uses = EventCategoryMapper.class, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\npublic interface EventMapper {\n\n    \n    Event fromEventMO(EventMO eventMO);\n\n    EventMO toEventMO(Event event);\n\n    default Optional&lt;Event&gt; fromOptionalEventMO(Optional&lt;EventMO&gt; optionalEventMO) {\n        \n        return (optionalEventMO.isEmpty()) ? Optional.empty() : Optional.of(fromEventMO(optionalEventMO.get()));\n        \n    }\n    \n}\n</code></pre>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;, injectionStrategy = InjectionStrategy.CONSTRUCTOR)\npublic interface EventCategoryMapper {\n\n    \n    EventCategory fromEventCategoryMO(EventCategoryMO eventCategoryMO);\n\n    EventCategoryMO toEventCategoryMO(EventCategory eventCategory);\n\n    default String fromPriorityMO(PriorityMO priority) {\n        return (priority.getPriority()==null) ? null : priority.getPriority();\n    }\n\n</code></pre>\n<p>I'm trying to test the EventMapper:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {EventMapper.class, EventCategoryMapper.class, EventMapperImpl.class, EventCategoryMapperImpl.class})\npublic class EventMapperTest {\n\n    private Mocks mocks; //This object contains the mocked objects that should be mapped.\n\n    @Autowired\n    private EventMapper eventMapper;\n\n    @Test\n    @DisplayName(&quot;Should return an Event from an EventMO&quot;)\n    void shouldReturnEventfromEventMO() {\n        \n        var event = eventMapper.fromEventMO(mocks.getEventMO());\n\n        assertEquals(event.getId(), 123L);\n\n\n    }\n</code></pre>\n<p>But it keeps failing with:</p>\n<blockquote>\n<p>Error creating bean with name 'eventMapper': Instantiation of bean\nfailed; nested exception is\norg.springframework.beans.BeanInstantiationException: Failed to\ninstantiate\n[com.mycompany.cna.projects.fishmarket.back.events.repositories.mappers.event.EventMapper]:\nSpecified class is an interface</p>\n</blockquote>\n<p>I've already tried instantiating the mapper with Mapper.getMapper(EventMapper.class) and it returned a NullPointerException.</p>\n<p>What should I do to achieve unit testing on those kind of mappers?</p>\n"},{"tags":["java","logging","log4j","java.util.logging"],"answers":[{"tags":[],"owner":{"account_id":1167427,"reputation":24341,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1400936078,"creation_date":1400896521,"answer_id":23840577,"question_id":23839530,"body_markdown":"The standard way of configuring log4j is to create *log4j.xml* in the root of the classpath.  Here are contents of that file configured for JULAppender:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    &lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;\r\n    &lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;\r\n        &lt;appender name=&quot;jul&quot; class=&quot;org.apache.log4j.JulAppender&quot;&gt; \r\n            &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt; \r\n                &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d %-5p %c - %m%n &quot;/&gt; \r\n            &lt;/layout&gt; \r\n        &lt;/appender&gt; \r\n        &lt;root&gt; \r\n            &lt;priority value=&quot;all&quot; /&gt; \r\n            &lt;appender-ref ref=&quot;jul&quot; /&gt; \r\n        &lt;/root&gt;  \r\n    &lt;/log4j:configuration&gt;\r\n","title":"How do I configure log4j to send log events to java.util.logging using JULAppender?","body":"<p>The standard way of configuring log4j is to create <em>log4j.xml</em> in the root of the classpath.  Here are contents of that file configured for JULAppender:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\"&gt;\n&lt;log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\"&gt;\n    &lt;appender name=\"jul\" class=\"org.apache.log4j.JulAppender\"&gt; \n        &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt; \n            &lt;param name=\"ConversionPattern\" value=\"%d %-5p %c - %m%n \"/&gt; \n        &lt;/layout&gt; \n    &lt;/appender&gt; \n    &lt;root&gt; \n        &lt;priority value=\"all\" /&gt; \n        &lt;appender-ref ref=\"jul\" /&gt; \n    &lt;/root&gt;  \n&lt;/log4j:configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":908040,"reputation":2157,"user_id":942536,"display_name":"Zach-M"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1603609806,"creation_date":1421657173,"answer_id":28020760,"question_id":23839530,"body_markdown":"The implementation of [JULAppender][1] (which, btw, is available for download [here][2]), is very old now (from 2008), and targets JDK 1.4 and log4j version 1.2.15.\r\n\r\nIf you work with log4j version 2.0 (and above), an easy solution would be to have all messages logged with log4j&#39;s [SLF4J appender][3], which, in turn, is set to use `java.util.logging` as its underlying implementation.\r\n\r\nIf you use maven simply include the following in your `&lt;dependencies&gt;` paragraph:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you don&#39;t use maven in your project, just download (from maven website) and include the following 3 jars in your CLASSPATH to get the same effect (in addition to `log4j-api-2.0.jar`):\r\n\r\n- `log4j-to-slf4j-2.0.jar`\r\n- `1slf4j-jdk14-1.7.7.jar`\r\n- `slf4j-api-1.7.7.jar`\r\n\r\n\r\n  [1]: http://people.apache.org/~psmith/logging.apache.org/sandbox/jul-log4j-bridge/apidocs/org/apache/log4j/jul/JULAppender.html\r\n  [2]: http://people.apache.org/~psmith/logging.apache.org/repo/org/apache/logging/apache-jul-log4j-bridge/\r\n  [3]: http://logging.apache.org/log4j/2.0/log4j-to-slf4j/index.html\r\n","title":"How do I configure log4j to send log events to java.util.logging using JULAppender?","body":"<p>The implementation of <a href=\"http://people.apache.org/%7Epsmith/logging.apache.org/sandbox/jul-log4j-bridge/apidocs/org/apache/log4j/jul/JULAppender.html\" rel=\"nofollow noreferrer\">JULAppender</a> (which, btw, is available for download <a href=\"http://people.apache.org/%7Epsmith/logging.apache.org/repo/org/apache/logging/apache-jul-log4j-bridge/\" rel=\"nofollow noreferrer\">here</a>), is very old now (from 2008), and targets JDK 1.4 and log4j version 1.2.15.</p>\n<p>If you work with log4j version 2.0 (and above), an easy solution would be to have all messages logged with log4j's <a href=\"http://logging.apache.org/log4j/2.0/log4j-to-slf4j/index.html\" rel=\"nofollow noreferrer\">SLF4J appender</a>, which, in turn, is set to use <code>java.util.logging</code> as its underlying implementation.</p>\n<p>If you use maven simply include the following in your <code>&lt;dependencies&gt;</code> paragraph:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;2.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n    &lt;version&gt;1.7.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you don't use maven in your project, just download (from maven website) and include the following 3 jars in your CLASSPATH to get the same effect (in addition to <code>log4j-api-2.0.jar</code>):</p>\n<ul>\n<li><code>log4j-to-slf4j-2.0.jar</code></li>\n<li><code>1slf4j-jdk14-1.7.7.jar</code></li>\n<li><code>slf4j-api-1.7.7.jar</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":185100,"reputation":3489,"user_id":421602,"accept_rate":40,"display_name":"vorburger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640275146,"creation_date":1640275146,"answer_id":70464546,"question_id":23839530,"body_markdown":"https://issues.apache.org/jira/browse/LOG4J2-3282 proposes the creation of a (TBD) `log4j-to-jul` Bridge.","title":"How do I configure log4j to send log events to java.util.logging using JULAppender?","body":"<p><a href=\"https://issues.apache.org/jira/browse/LOG4J2-3282\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/LOG4J2-3282</a> proposes the creation of a (TBD) <code>log4j-to-jul</code> Bridge.</p>\n"}],"owner":{"account_id":1167427,"reputation":24341,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2488,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23840577,"answer_count":3,"score":2,"last_activity_date":1640275146,"creation_date":1400886408,"question_id":23839530,"body_markdown":"I am familiar with the java.util.logging (JUL) framework, I use it extensively.   Recently, I started using a library that does its logging through log4j.    When I start my application I now get the following printed on the console:\r\n\r\n    log4j:WARN No appenders could be found for logger (com.example.thirdparty.Library).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n\r\nIt appears that log4j has a solution for this: [JULAppender](http://people.apache.org/~psmith/logging.apache.org/sandbox/jul-log4j-bridge/apidocs/org/apache/log4j/jul/JULAppender.html) which will send everything logged with log4j to the logging framework that I use.\r\n\r\nI can&#39;t find any examples that show me how to configure log4j to use this appender.","title":"How do I configure log4j to send log events to java.util.logging using JULAppender?","body":"<p>I am familiar with the java.util.logging (JUL) framework, I use it extensively.   Recently, I started using a library that does its logging through log4j.    When I start my application I now get the following printed on the console:</p>\n\n<pre><code>log4j:WARN No appenders could be found for logger (com.example.thirdparty.Library).\nlog4j:WARN Please initialize the log4j system properly.\n</code></pre>\n\n<p>It appears that log4j has a solution for this: <a href=\"http://people.apache.org/~psmith/logging.apache.org/sandbox/jul-log4j-bridge/apidocs/org/apache/log4j/jul/JULAppender.html\" rel=\"nofollow\">JULAppender</a> which will send everything logged with log4j to the logging framework that I use.</p>\n\n<p>I can't find any examples that show me how to configure log4j to use this appender.</p>\n"},{"tags":["java","android","listview","simplecursoradapter"],"answers":[{"tags":[],"owner":{"account_id":283185,"reputation":33449,"user_id":580556,"accept_rate":80,"display_name":"Will Tate"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1300117244,"creation_date":1300117244,"answer_id":5300871,"question_id":5300787,"body_markdown":"Will,\r\n\r\nI&#39;ve actually implemented something incredibly similar to what you are looking for.  Here is my implementation.\r\n\r\n\r\n    import android.content.Context;\r\n    import android.content.SharedPreferences;\r\n    import android.content.res.Resources;\r\n    import android.database.Cursor;\r\n    import android.preference.PreferenceManager;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.CursorAdapter;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    \r\n    public class ItemAdapter extends CursorAdapter {\r\n    \tprivate LayoutInflater mLayoutInflater;\r\n    \tprivate Context mContext;\r\n    \tpublic ItemAdapter(Context context, Cursor c) {\r\n    \t\tsuper(context, c);\r\n    \t\tmContext = context;\r\n    \t\tmLayoutInflater = LayoutInflater.from(context); \r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tpublic View newView(Context context, Cursor cursor, ViewGroup parent) {\r\n    \t\tView v = mLayoutInflater.inflate(R.layout.items_row, parent, false);\r\n    \t\treturn v;\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * @author will\r\n    \t * \r\n    \t * @param\tv\r\n    \t * \t\t\tThe view in which the elements we set up here will be displayed.\r\n    \t * \r\n    \t * @param\tcontext\r\n    \t * \t\t\tThe running context where this ListView adapter will be active.\r\n    \t * \r\n    \t * @param\tc\r\n    \t * \t\t\tThe Cursor containing the query results we will display.\r\n    \t */\r\n    \t\r\n    \t@Override\r\n    \tpublic void bindView(View v, Context context, Cursor c) {\r\n    \t\tString title = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_TITLE));\r\n    \t\tString date = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_DATE));\r\n    \t\tString imagePath = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_IMG));\r\n    \t\tint deletion = c.getInt(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_DELETION));\r\n    \t\tint priority = c.getInt(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_PRIORITY));\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Next set the title of the entry.\r\n    \t\t */\r\n    \t\t\r\n    \t\tTextView title_text = (TextView) v.findViewById(R.id.item_text);\r\n    \t\tif (title_text != null) {\r\n    \t\t\ttitle_text.setText(title);\r\n    \t\t}\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Set Date\r\n    \t\t */\r\n    \t\t\r\n    \t\tTextView date_text = (TextView) v.findViewById(R.id.item_date);\r\n    \t\tif (date_text != null) {\r\n    \t\t\tdate_text.setText(date);\r\n    \t\t}\t\t\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Decide if we should display the paper clip icon denoting image attachment\r\n    \t\t */\r\n    \t\t\r\n    \t\tImageView item_image = (ImageView) v.findViewById(R.id.item_attachment);\r\n    \t\titem_image.setVisibility(ImageView.INVISIBLE);\r\n    \t\tif (imagePath != null &amp;&amp; imagePath.length() != 0 &amp;&amp; item_image != null) {\r\n    \t\t\titem_image.setVisibility(ImageView.VISIBLE);\r\n    \t\t}\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * Decide if we should display the deletion indicator\r\n    \t\t */\r\n    \t\tImageView del_image = (ImageView) v.findViewById(R.id.item_deletion);\r\n    \t\tdel_image.setVisibility(ImageView.INVISIBLE);\r\n    \t\tif (deletion == 1) {\r\n    \t\t\tdel_image.setVisibility(ImageView.VISIBLE);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nXML just incase...\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    \tandroid:layout_width=&quot;fill_parent&quot;\r\n    \tandroid:layout_height=&quot;wrap_content&quot;\r\n    \tandroid:orientation=&quot;horizontal&quot;\r\n    \tandroid:background=&quot;@drawable/list_bg&quot;&gt;\r\n    \r\n    \t&lt;LinearLayout\r\n    \t\tandroid:layout_width=&quot;wrap_content&quot;\r\n    \t\tandroid:layout_height=&quot;wrap_content&quot;\r\n    \t\tandroid:orientation=&quot;vertical&quot;&gt;\r\n    \t\t\r\n    \t\t&lt;TextView android:id=&quot;@+id/item_text&quot;\r\n        \t\tandroid:layout_width=&quot;200dp&quot;\r\n        \t\tandroid:layout_height=&quot;wrap_content&quot;\r\n        \t\tandroid:lines=&quot;1&quot;\r\n        \t\tandroid:scrollHorizontally=&quot;true&quot;\r\n        \t\tandroid:ellipsize=&quot;end&quot;\r\n        \t\tandroid:paddingLeft=&quot;2sp&quot;\r\n        \t\tandroid:paddingTop=&quot;2sp&quot;\r\n       \t\t\tandroid:textSize=&quot;18sp&quot;\r\n        \t\tandroid:textStyle=&quot;bold&quot;\r\n        \t\tandroid:shadowColor=&quot;#90909090&quot;\r\n        \t\tandroid:shadowDx=&quot;1.0&quot;\r\n        \t\tandroid:shadowDy=&quot;1.0&quot;\r\n        \t\tandroid:shadowRadius=&quot;1.0&quot;/&gt;\r\n        \t\t\r\n        \t&lt;TextView android:id=&quot;@+id/item_date&quot;\r\n        \t\tandroid:layout_width=&quot;wrap_content&quot;\r\n        \t\tandroid:layout_height=&quot;wrap_content&quot;\r\n        \t\tandroid:textSize=&quot;12sp&quot;\r\n        \t\tandroid:textColor=&quot;#FF808080&quot;\r\n        \t\tandroid:paddingLeft=&quot;2sp&quot;\r\n        \t\tandroid:paddingTop=&quot;2sp&quot;/&gt;\r\n        &lt;/LinearLayout&gt;\r\n        \r\n        &lt;ImageView android:id=&quot;@+id/item_deletion&quot;\r\n        \tandroid:layout_width=&quot;wrap_content&quot;\r\n        \tandroid:layout_height=&quot;wrap_content&quot;\r\n        \tandroid:src=&quot;@drawable/deletion&quot;\r\n        \tandroid:visibility=&quot;invisible&quot;\r\n        \tandroid:layout_centerVertical=&quot;true&quot;\r\n        \tandroid:layout_alignParentRight=&quot;true&quot;\r\n        \tandroid:paddingRight=&quot;5sp&quot;/&gt;\r\n        \t\r\n        &lt;ImageView android:id=&quot;@+id/item_attachment&quot;\r\n        \tandroid:layout_width=&quot;wrap_content&quot;\r\n        \tandroid:layout_height=&quot;wrap_content&quot;\r\n        \tandroid:src=&quot;@drawable/attachment&quot;\r\n        \tandroid:visibility=&quot;invisible&quot;\r\n        \tandroid:layout_centerVertical=&quot;true&quot;\r\n        \tandroid:layout_toLeftOf=&quot;@id/item_deletion&quot;/&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nThis displays two rows of text and up to 2 images to the right of the text depending on certain conditions.\r\n\r\nI hope this can give you a basis to work from!\r\n\r\nGood luck :]\r\n","title":"how do i create a custom cursor adapter for a listview for use with images and text?","body":"<p>Will,</p>\n\n<p>I've actually implemented something incredibly similar to what you are looking for.  Here is my implementation.</p>\n\n<pre><code>import android.content.Context;\nimport android.content.SharedPreferences;\nimport android.content.res.Resources;\nimport android.database.Cursor;\nimport android.preference.PreferenceManager;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.CursorAdapter;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\n\npublic class ItemAdapter extends CursorAdapter {\n    private LayoutInflater mLayoutInflater;\n    private Context mContext;\n    public ItemAdapter(Context context, Cursor c) {\n        super(context, c);\n        mContext = context;\n        mLayoutInflater = LayoutInflater.from(context); \n    }\n\n    @Override\n    public View newView(Context context, Cursor cursor, ViewGroup parent) {\n        View v = mLayoutInflater.inflate(R.layout.items_row, parent, false);\n        return v;\n    }\n\n    /**\n     * @author will\n     * \n     * @param   v\n     *          The view in which the elements we set up here will be displayed.\n     * \n     * @param   context\n     *          The running context where this ListView adapter will be active.\n     * \n     * @param   c\n     *          The Cursor containing the query results we will display.\n     */\n\n    @Override\n    public void bindView(View v, Context context, Cursor c) {\n        String title = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_TITLE));\n        String date = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_DATE));\n        String imagePath = c.getString(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_IMG));\n        int deletion = c.getInt(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_DELETION));\n        int priority = c.getInt(c.getColumnIndexOrThrow(ItemDbAdapter.KEY_PRIORITY));\n\n        /**\n         * Next set the title of the entry.\n         */\n\n        TextView title_text = (TextView) v.findViewById(R.id.item_text);\n        if (title_text != null) {\n            title_text.setText(title);\n        }\n\n        /**\n         * Set Date\n         */\n\n        TextView date_text = (TextView) v.findViewById(R.id.item_date);\n        if (date_text != null) {\n            date_text.setText(date);\n        }       \n\n        /**\n         * Decide if we should display the paper clip icon denoting image attachment\n         */\n\n        ImageView item_image = (ImageView) v.findViewById(R.id.item_attachment);\n        item_image.setVisibility(ImageView.INVISIBLE);\n        if (imagePath != null &amp;&amp; imagePath.length() != 0 &amp;&amp; item_image != null) {\n            item_image.setVisibility(ImageView.VISIBLE);\n        }\n\n        /**\n         * Decide if we should display the deletion indicator\n         */\n        ImageView del_image = (ImageView) v.findViewById(R.id.item_deletion);\n        del_image.setVisibility(ImageView.INVISIBLE);\n        if (deletion == 1) {\n            del_image.setVisibility(ImageView.VISIBLE);\n        }\n    }\n}\n</code></pre>\n\n<p>XML just incase...</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\"\n    android:orientation=\"horizontal\"\n    android:background=\"@drawable/list_bg\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:orientation=\"vertical\"&gt;\n\n        &lt;TextView android:id=\"@+id/item_text\"\n            android:layout_width=\"200dp\"\n            android:layout_height=\"wrap_content\"\n            android:lines=\"1\"\n            android:scrollHorizontally=\"true\"\n            android:ellipsize=\"end\"\n            android:paddingLeft=\"2sp\"\n            android:paddingTop=\"2sp\"\n            android:textSize=\"18sp\"\n            android:textStyle=\"bold\"\n            android:shadowColor=\"#90909090\"\n            android:shadowDx=\"1.0\"\n            android:shadowDy=\"1.0\"\n            android:shadowRadius=\"1.0\"/&gt;\n\n        &lt;TextView android:id=\"@+id/item_date\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:textSize=\"12sp\"\n            android:textColor=\"#FF808080\"\n            android:paddingLeft=\"2sp\"\n            android:paddingTop=\"2sp\"/&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;ImageView android:id=\"@+id/item_deletion\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/deletion\"\n        android:visibility=\"invisible\"\n        android:layout_centerVertical=\"true\"\n        android:layout_alignParentRight=\"true\"\n        android:paddingRight=\"5sp\"/&gt;\n\n    &lt;ImageView android:id=\"@+id/item_attachment\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/attachment\"\n        android:visibility=\"invisible\"\n        android:layout_centerVertical=\"true\"\n        android:layout_toLeftOf=\"@id/item_deletion\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>This displays two rows of text and up to 2 images to the right of the text depending on certain conditions.</p>\n\n<p>I hope this can give you a basis to work from!</p>\n\n<p>Good luck :]</p>\n"},{"tags":[],"owner":{"account_id":255495,"reputation":5919,"user_id":535590,"accept_rate":80,"display_name":"jbranchaud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1300117259,"creation_date":1300117259,"answer_id":5300879,"question_id":5300787,"body_markdown":"Here is a great [tutorial][1] that I have used before to help with my custom list adapters. It sounds like it is doing the exact same thing you want to do. The tutorial shows how to build a custom list adapter with an image and two lines of text.\r\n\r\n\r\n  [1]: http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/","title":"how do i create a custom cursor adapter for a listview for use with images and text?","body":"<p>Here is a great <a href=\"http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/\" rel=\"nofollow\">tutorial</a> that I have used before to help with my custom list adapters. It sounds like it is doing the exact same thing you want to do. The tutorial shows how to build a custom list adapter with an image and two lines of text.</p>\n"},{"tags":[],"owner":{"account_id":129700,"reputation":44876,"user_id":328445,"accept_rate":100,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343838396,"creation_date":1300117330,"answer_id":5300894,"question_id":5300787,"body_markdown":"Adding images and text is not specific to `CursorAdapter`; you use the same technique for any kind of adapter. You can create a layout for your row and inflate it inside your `getView` method. The **APIDemos** sample project, contained in the Android SDK `android-sdk-PLATFORM/samples/android-XY/ApiDemos` folder, does what you want. You can find the row definitons in  `list_item_icon_text.xml`. Here is copy of file content (w/o the license).\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:orientation=&quot;horizontal&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;ImageView android:id=&quot;@+id/icon&quot;\r\n            android:layout_width=&quot;48dip&quot;\r\n            android:layout_height=&quot;48dip&quot; /&gt;\r\n    \r\n        &lt;TextView android:id=&quot;@+id/text&quot;\r\n            android:layout_gravity=&quot;center_vertical&quot;\r\n            android:layout_width=&quot;0dip&quot;\r\n            android:layout_weight=&quot;1.0&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;","title":"how do i create a custom cursor adapter for a listview for use with images and text?","body":"<p>Adding images and text is not specific to <code>CursorAdapter</code>; you use the same technique for any kind of adapter. You can create a layout for your row and inflate it inside your <code>getView</code> method. The <strong>APIDemos</strong> sample project, contained in the Android SDK <code>android-sdk-PLATFORM/samples/android-XY/ApiDemos</code> folder, does what you want. You can find the row definitons in  <code>list_item_icon_text.xml</code>. Here is copy of file content (w/o the license).</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:orientation=\"horizontal\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;ImageView android:id=\"@+id/icon\"\n        android:layout_width=\"48dip\"\n        android:layout_height=\"48dip\" /&gt;\n\n    &lt;TextView android:id=\"@+id/text\"\n        android:layout_gravity=\"center_vertical\"\n        android:layout_width=\"0dip\"\n        android:layout_weight=\"1.0\"\n        android:layout_height=\"wrap_content\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":331432,"reputation":3297,"user_id":656094,"accept_rate":40,"display_name":"Panthro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1300118710,"creation_date":1300118710,"answer_id":5301187,"question_id":5300787,"body_markdown":"Check what I have done:\r\nBTW: `CheckpointsView.getImageResId()` returns a valid drawable reference\r\n    \r\n    public class CheckpointCursorAdapter extends ResourceCursorAdapter {\r\n    \r\n    \tprivate int layoutType = 0;\r\n    \tpublic static final int BLOTTER = 1;\r\n    \tpublic static final int DAY = 2;\r\n    \tpublic static final int MONTH = 3;\r\n    \tpublic static final int OVERVIEW = 4;\r\n    \tpublic static final int LAYOUT_ID = R.layout.checkpoint_row;\r\n    \r\n    \tpublic CheckpointCursorAdapter(Context context, int layoutType, Cursor cursor) {\r\n    \t\tsuper(context, LAYOUT_ID, cursor);\r\n    \t\tthis.layoutType = layoutType;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic View newView(Context context, Cursor cur, ViewGroup parent) {\r\n    \t\tLayoutInflater li = (LayoutInflater) context\r\n    \t\t\t\t.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \t\treturn li.inflate(LAYOUT_ID, parent, false);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void bindView(View view, Context context, Cursor cursor) {\r\n    \r\n    \t\tTextView tvListText = (TextView) view.findViewById(R.id.txtCheckPoint);\r\n    \t\tDate dt = new Date(cursor.getLong(cursor.getColumnIndex(DatabaseHelper.KEY_CHECKPOINT)));\r\n    \t\tswitch (layoutType) {\r\n    \t\t\tcase BLOTTER:\r\n    \t\t\t\ttvListText.setText(dt.toLocaleString());\r\n    \t\t\t\t((ImageView) view.findViewById(R.id.imgCheckpointInOut))\r\n    \t\t\t\t\t\t.setImageResource(CheckpointsView.getImageResId(cursor.getCount()\r\n    \t\t\t\t\t\t\t\t- cursor.getPosition()));\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase DAY:\r\n    \t\t\t\ttvListText.setText(new SimpleDateFormat(&quot;HH:mm:ss&quot;).format(dt));\r\n    \t\t\t\t((ImageView) view.findViewById(R.id.imgCheckpointInOut))\r\n    \t\t\t\t\t\t.setImageResource(CheckpointsView.getImageResId(cursor.getPosition() + 1));\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase MONTH:\r\n    \t\t\t\ttvListText.setText(new SimpleDateFormat(&quot;MMM dd HH:mm:ss&quot;).format(dt));\r\n    \t\t\t\t((ImageView) view.findViewById(R.id.imgCheckpointInOut))\r\n    \t\t\t\t\t\t.setImageResource(CheckpointsView.getImageResId(cursor.getPosition() + 1));\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase OVERVIEW:\r\n    \t\t\t\tbreak;\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd the XML just in case\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\tandroid:layout_width=&quot;fill_parent&quot; android:layout_height=&quot;wrap_content&quot;\r\n\tandroid:orientation=&quot;horizontal&quot;&gt;\r\n\r\n\t&lt;TextView android:id=&quot;@+id/txtCheckPoint&quot;\r\n\t\tandroid:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot;\r\n\t\tandroid:textSize=&quot;20dp&quot; android:padding=&quot;8dp&quot; android:textStyle=&quot;bold&quot;&gt;\r\n\t&lt;/TextView&gt;\r\n\t&lt;LinearLayout android:layout_width=&quot;fill_parent&quot;\r\n\t\tandroid:layout_height=&quot;wrap_content&quot; android:orientation=&quot;horizontal&quot;\r\n\t\tandroid:gravity=&quot;right&quot; android:layout_weight=&quot;1&quot;\r\n\t\tandroid:layout_marginRight=&quot;8px&quot;&gt;\r\n\t\t&lt;TextView android:id=&quot;@+id/txtTotalHours&quot;\r\n\t\tandroid:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot;\r\n\t\tandroid:textSize=&quot;20dp&quot; android:padding=&quot;8dp&quot; android:paddingRight=&quot;12dp&quot;&gt;\r\n\t&lt;/TextView&gt;\r\n\t\t&lt;TextView android:id=&quot;@+id/txtHourBalanceRow&quot;\r\n\t\t\tandroid:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot;\r\n\t\t\tandroid:textSize=&quot;12dp&quot; android:padding=&quot;8dp&quot;&gt;\r\n\t\t&lt;/TextView&gt;\r\n\t\t&lt;ImageView android:id=&quot;@+id/imgCheckpointInOut&quot;\r\n\t\t\tandroid:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot;\r\n\t\t\tandroid:src=&quot;@drawable/black_clock&quot; /&gt;\r\n\t&lt;/LinearLayout&gt;\r\n&lt;/LinearLayout&gt;\r\n\r\nYou can check the whole code at:\r\n[http://code.google.com/p/droidtimesheet/][1]\r\n\r\n\r\n  [1]: http://code.google.com/p/droidtimesheet/","title":"how do i create a custom cursor adapter for a listview for use with images and text?","body":"<p>Check what I have done:\nBTW: <code>CheckpointsView.getImageResId()</code> returns a valid drawable reference</p>\n\n<pre><code>public class CheckpointCursorAdapter extends ResourceCursorAdapter {\n\n    private int layoutType = 0;\n    public static final int BLOTTER = 1;\n    public static final int DAY = 2;\n    public static final int MONTH = 3;\n    public static final int OVERVIEW = 4;\n    public static final int LAYOUT_ID = R.layout.checkpoint_row;\n\n    public CheckpointCursorAdapter(Context context, int layoutType, Cursor cursor) {\n        super(context, LAYOUT_ID, cursor);\n        this.layoutType = layoutType;\n    }\n\n    @Override\n    public View newView(Context context, Cursor cur, ViewGroup parent) {\n        LayoutInflater li = (LayoutInflater) context\n                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        return li.inflate(LAYOUT_ID, parent, false);\n    }\n\n    @Override\n    public void bindView(View view, Context context, Cursor cursor) {\n\n        TextView tvListText = (TextView) view.findViewById(R.id.txtCheckPoint);\n        Date dt = new Date(cursor.getLong(cursor.getColumnIndex(DatabaseHelper.KEY_CHECKPOINT)));\n        switch (layoutType) {\n            case BLOTTER:\n                tvListText.setText(dt.toLocaleString());\n                ((ImageView) view.findViewById(R.id.imgCheckpointInOut))\n                        .setImageResource(CheckpointsView.getImageResId(cursor.getCount()\n                                - cursor.getPosition()));\n                break;\n            case DAY:\n                tvListText.setText(new SimpleDateFormat(\"HH:mm:ss\").format(dt));\n                ((ImageView) view.findViewById(R.id.imgCheckpointInOut))\n                        .setImageResource(CheckpointsView.getImageResId(cursor.getPosition() + 1));\n                break;\n            case MONTH:\n                tvListText.setText(new SimpleDateFormat(\"MMM dd HH:mm:ss\").format(dt));\n                ((ImageView) view.findViewById(R.id.imgCheckpointInOut))\n                        .setImageResource(CheckpointsView.getImageResId(cursor.getPosition() + 1));\n                break;\n            case OVERVIEW:\n                break;\n        }\n    }\n\n}\n</code></pre>\n\n<p>And the XML just in case</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;TextView android:id=\"@+id/txtCheckPoint\"\n    android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"\n    android:textSize=\"20dp\" android:padding=\"8dp\" android:textStyle=\"bold\"&gt;\n&lt;/TextView&gt;\n&lt;LinearLayout android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\" android:orientation=\"horizontal\"\n    android:gravity=\"right\" android:layout_weight=\"1\"\n    android:layout_marginRight=\"8px\"&gt;\n    &lt;TextView android:id=\"@+id/txtTotalHours\"\n    android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"\n    android:textSize=\"20dp\" android:padding=\"8dp\" android:paddingRight=\"12dp\"&gt;\n&lt;/TextView&gt;\n    &lt;TextView android:id=\"@+id/txtHourBalanceRow\"\n        android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"\n        android:textSize=\"12dp\" android:padding=\"8dp\"&gt;\n    &lt;/TextView&gt;\n    &lt;ImageView android:id=\"@+id/imgCheckpointInOut\"\n        android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"\n        android:src=\"@drawable/black_clock\" /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>You can check the whole code at:\n<a href=\"http://code.google.com/p/droidtimesheet/\" rel=\"nofollow\">http://code.google.com/p/droidtimesheet/</a></p>\n"}],"owner":{"account_id":329076,"reputation":2375,"user_id":652393,"accept_rate":54,"display_name":"waa1990"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21171,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":5300871,"answer_count":4,"score":17,"last_activity_date":1640275093,"creation_date":1300116881,"question_id":5300787,"body_markdown":"Hi want to create a custom cursor adapter so I can display an image with 2 lines of text.\r\nI have had some trouble understanding the custom cursor adapters but I do not understand how to add an imageview to be filled from the path in my database.","title":"how do i create a custom cursor adapter for a listview for use with images and text?","body":"<p>Hi want to create a custom cursor adapter so I can display an image with 2 lines of text.\nI have had some trouble understanding the custom cursor adapters but I do not understand how to add an imageview to be filled from the path in my database.</p>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":7532544,"reputation":914,"user_id":5720118,"accept_rate":92,"display_name":"Binyamin Regev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640275041,"creation_date":1640274382,"answer_id":70464391,"question_id":70463997,"body_markdown":"Did you try looking on the [Apache Log4J 2 Documentation][1] website?\r\n\r\nThere&#39;s the GitHub [apache / logging-log4j2][2] where you have a section detailing the [Usage][3] with code snippets.\r\n\r\nPlease, keep in mind the security vulnerabilities issues discovered in Log4j 2. Recommended you upgrade to Log4j 2.3.1 (for Java 6), 2.12.3 (for Java 7), or 2.17.0 (for Java 8 and later). As recommended also in ***Apache Log4j 2*** website.\r\nThere are also answers on ***StackOverflow*** like this one [log4j2 -version 2.5 - How to Configure log4j2 using a java.util.properties object][4]\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/\r\n  [2]: https://github.com/apache/logging-log4j2\r\n  [3]: https://github.com/apache/logging-log4j2#usage\r\n  [4]: https://stackoverflow.com/questions/39846838/log4j2-version-2-5-how-to-configure-log4j2-using-a-java-util-properties-objec","title":"How to configure log4j2 from Properties object?","body":"<p>Did you try looking on the <a href=\"https://logging.apache.org/log4j/2.x/\" rel=\"nofollow noreferrer\">Apache Log4J 2 Documentation</a> website?</p>\n<p>There's the GitHub <a href=\"https://github.com/apache/logging-log4j2\" rel=\"nofollow noreferrer\">apache / logging-log4j2</a> where you have a section detailing the <a href=\"https://github.com/apache/logging-log4j2#usage\" rel=\"nofollow noreferrer\">Usage</a> with code snippets.</p>\n<p>Please, keep in mind the security vulnerabilities issues discovered in Log4j 2. Recommended you upgrade to Log4j 2.3.1 (for Java 6), 2.12.3 (for Java 7), or 2.17.0 (for Java 8 and later). As recommended also in <em><strong>Apache Log4j 2</strong></em> website.\nThere are also answers on <em><strong>StackOverflow</strong></em> like this one <a href=\"https://stackoverflow.com/questions/39846838/log4j2-version-2-5-how-to-configure-log4j2-using-a-java-util-properties-objec\">log4j2 -version 2.5 - How to Configure log4j2 using a java.util.properties object</a></p>\n"}],"owner":{"account_id":23729796,"reputation":11,"user_id":17749215,"display_name":"pafewedu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":747,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1640275041,"creation_date":1640272473,"question_id":70463997,"body_markdown":"Can log4j2 be initialized from Properties object (no properties file)? This was supported in old log4j 1.2.x (see code below), but I didn&#39;t find how to implement this with new log4j2.\r\n```\r\nProperties props = new Properties();\r\n// ...set some properties\r\nPropertyConfigurator.configure(props);\r\n```\r\n\r\n","title":"How to configure log4j2 from Properties object?","body":"<p>Can log4j2 be initialized from Properties object (no properties file)? This was supported in old log4j 1.2.x (see code below), but I didn't find how to implement this with new log4j2.</p>\n<pre><code>Properties props = new Properties();\n// ...set some properties\nPropertyConfigurator.configure(props);\n</code></pre>\n"},{"tags":["java","android","sqlite","android-cursor"],"answers":[{"tags":[],"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1344547765,"creation_date":1344547765,"answer_id":11892209,"question_id":11892159,"body_markdown":"If you do not close the cursor then you will have issues accessing your data in your database because while the database is open, it is not accessible should something happen like the Activity is paused or otherwise. Specifically, this problem can be alleviated if you let the Activity manage it.","title":"android disadvantages of not closing cursor","body":"<p>If you do not close the cursor then you will have issues accessing your data in your database because while the database is open, it is not accessible should something happen like the Activity is paused or otherwise. Specifically, this problem can be alleviated if you let the Activity manage it.</p>\n"},{"tags":[],"owner":{"account_id":72830,"reputation":14738,"user_id":210070,"accept_rate":100,"display_name":"Tyler Treat"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1344548148,"creation_date":1344548148,"answer_id":11892290,"question_id":11892159,"body_markdown":"Closing a `Cursor` will avoid any potential memory leaks, so **YES** they should always be closed when no longer used.","title":"android disadvantages of not closing cursor","body":"<p>Closing a <code>Cursor</code> will avoid any potential memory leaks, so <strong>YES</strong> they should always be closed when no longer used.</p>\n"},{"tags":[],"owner":{"account_id":140915,"reputation":16183,"user_id":347565,"accept_rate":100,"display_name":"Matthieu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1344550544,"creation_date":1344550544,"answer_id":11892769,"question_id":11892159,"body_markdown":"Cursor is only an interface. A lot depends on the implementation, what specific class that implements that interface you are using...\r\n\r\nIn the case of SQLiteCursor, there are quite a few things getting cleaned-up (this is from Froyo):\r\n\r\n    @Override\r\n    public void close() {\r\n        super.close();\r\n        deactivateCommon();\r\n        mQuery.close();\r\n        mDriver.cursorClosed();\r\n    }\r\n\r\nNot closing your Cursor, the data should still be consistent, but you are going to leak memory...","title":"android disadvantages of not closing cursor","body":"<p>Cursor is only an interface. A lot depends on the implementation, what specific class that implements that interface you are using...</p>\n\n<p>In the case of SQLiteCursor, there are quite a few things getting cleaned-up (this is from Froyo):</p>\n\n<pre><code>@Override\npublic void close() {\n    super.close();\n    deactivateCommon();\n    mQuery.close();\n    mDriver.cursorClosed();\n}\n</code></pre>\n\n<p>Not closing your Cursor, the data should still be consistent, but you are going to leak memory...</p>\n"},{"tags":[],"owner":{"account_id":208465,"reputation":3409,"user_id":458968,"accept_rate":75,"display_name":"you786"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1344552402,"creation_date":1344552402,"answer_id":11893092,"question_id":11892159,"body_markdown":"I don&#39;t think you&#39;ll see many issues from forgetting to close one cursor. The issue (and this applies to almost any memory leak) is that if you keep doing it over and over again, eventually something bad will happen.\r\n\r\nFor example, I wrote an app that uploads data from a device&#39;s SQLite DB to a server. If I didn&#39;t close the cursor each time I was done reading and writing from the database, eventually I would run into out-of-memory errors and various other issues.\r\n\r\n","title":"android disadvantages of not closing cursor","body":"<p>I don't think you'll see many issues from forgetting to close one cursor. The issue (and this applies to almost any memory leak) is that if you keep doing it over and over again, eventually something bad will happen.</p>\n\n<p>For example, I wrote an app that uploads data from a device's SQLite DB to a server. If I didn't close the cursor each time I was done reading and writing from the database, eventually I would run into out-of-memory errors and various other issues.</p>\n"}],"owner":{"account_id":1498991,"reputation":1832,"user_id":1404257,"accept_rate":43,"display_name":"Haris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4163,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":4,"score":18,"last_activity_date":1640274439,"creation_date":1344547494,"question_id":11892159,"body_markdown":"I have some questions regarding `Cursor`.\r\n\r\nI want to know what are the disadvantages of not closing a `Cursor`?\r\n\r\nIt deallocates resources, but what resources are deallocated?\r\n\r\nIf we do not close the `Cursor`? What will be the consequences and to what extent? \r\n\r\nNot closing a `Cursor` does not affect `Activity` a bit, but it gives error in a log cat.","title":"android disadvantages of not closing cursor","body":"<p>I have some questions regarding <code>Cursor</code>.</p>\n\n<p>I want to know what are the disadvantages of not closing a <code>Cursor</code>?</p>\n\n<p>It deallocates resources, but what resources are deallocated?</p>\n\n<p>If we do not close the <code>Cursor</code>? What will be the consequences and to what extent? </p>\n\n<p>Not closing a <code>Cursor</code> does not affect <code>Activity</code> a bit, but it gives error in a log cat.</p>\n"},{"tags":["java","android","android-fragments","android-activity","android-listadapter"],"comments":[{"owner":{"account_id":10370180,"reputation":252,"user_id":10661296,"display_name":"HussainAbbas"},"score":1,"creation_date":1590790261,"post_id":62095266,"comment_id":109824810,"body_markdown":"can you please add the code where are you calling this functions..","body":"can you please add the code where are you calling this functions.."},{"owner":{"account_id":18663001,"reputation":55,"user_id":13603740,"display_name":"ldjsa"},"score":0,"creation_date":1590791093,"post_id":62095266,"comment_id":109825031,"body_markdown":"I dont really understand, shoudnt they be called when i click on a group in my list? Im sorry im new to programming.","body":"I dont really understand, shoudnt they be called when i click on a group in my list? Im sorry im new to programming."},{"owner":{"account_id":12601494,"reputation":4078,"user_id":9164071,"display_name":"Themelis"},"score":0,"creation_date":1590792257,"post_id":62095266,"comment_id":109825323,"body_markdown":"Adding the activity and the fragment code would help.","body":"Adding the activity and the fragment code would help."}],"answers":[{"tags":[],"owner":{"account_id":7894011,"reputation":1575,"user_id":6086532,"display_name":"artenson.art98"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590810327,"creation_date":1590810327,"answer_id":62097549,"question_id":62095266,"body_markdown":"The one in `FragmentB` will not fire, since you are only communicating with the activity from fragment A.\r\n\r\nIn your activity do something like this:\r\n```\r\nOverride\r\n    public String onGroupSelected(String groupName) {\r\n        System.out.println(&quot;in onGroup  in Activity&quot;);\r\n        FragmentB frag = //find your fragment using fragment manager\r\n        frag.onGroupSelected(groupName);\r\n        return groupName;\r\n    } \r\n```\r\nThis is how you call methods inside fragment from an activity","title":"Android Listener working in activity but not in fragment","body":"<p>The one in <code>FragmentB</code> will not fire, since you are only communicating with the activity from fragment A.</p>\n\n<p>In your activity do something like this:</p>\n\n<pre><code>Override\n    public String onGroupSelected(String groupName) {\n        System.out.println(\"in onGroup  in Activity\");\n        FragmentB frag = //find your fragment using fragment manager\n        frag.onGroupSelected(groupName);\n        return groupName;\n    } \n</code></pre>\n\n<p>This is how you call methods inside fragment from an activity</p>\n"},{"tags":[],"owner":{"account_id":16858265,"reputation":121,"user_id":12189679,"display_name":"Sahar Asadian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640274215,"creation_date":1640274215,"answer_id":70464353,"question_id":62095266,"body_markdown":"It is a little late to answer but I found a way that works for me.\r\nAs listener will first get by activity, you can define destination fragment in the Main activity and then call a method in the destination fragment and do what you want:    \r\n    In the main Activity listener\r\n\r\n    DestinationFragment fragment = (DestinationFragment) getSupportFragmentManager().findFragmentById(R.id.destination_fragment);\r\n    fragment.sampleListener(bundle);\r\n\r\nIn the destination fragment define sampleListener and write your code.","title":"Android Listener working in activity but not in fragment","body":"<p>It is a little late to answer but I found a way that works for me.\nAs listener will first get by activity, you can define destination fragment in the Main activity and then call a method in the destination fragment and do what you want:<br />\nIn the main Activity listener</p>\n<pre><code>DestinationFragment fragment = (DestinationFragment) getSupportFragmentManager().findFragmentById(R.id.destination_fragment);\nfragment.sampleListener(bundle);\n</code></pre>\n<p>In the destination fragment define sampleListener and write your code.</p>\n"}],"owner":{"account_id":18663001,"reputation":55,"user_id":13603740,"display_name":"ldjsa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1640274215,"creation_date":1590789908,"question_id":62095266,"body_markdown":"I have an activity and two fragments. Im trying to get a clicked item from an arraylist. In my fragmentA I have a interface: \r\n```\r\npublic interface GroupListener {\r\n        public String onGroupSelected(String groupName);\r\n}\r\n```\r\nand \r\n```\r\n    @Override\r\n    public void onAttach(@NonNull Context context) {\r\n        super.onAttach(context);\r\n\r\n        try {\r\n            groupListener = (GroupListener) context;\r\n        } catch (ClassCastException e)\r\n        { \r\n            throw new ClassCastException(context.toString() + &quot; must implement the interface&quot; +\r\n                    &quot;called GroupListener!&quot;);\r\n        }\r\n    }\r\n```\r\nThis gets the postion from an item clicked in a list :\r\n\r\n```  @Override\r\n    public void onListItemClick(@NonNull ListView l, @NonNull View v, int position, long id) {\r\n        groupListener.onGroupSelected((String) getListAdapter().getItem(position));\r\n    }\r\n```\r\nI then have the listner in my activity and in fragmentB which looks the same:\r\n```\r\n   @Override\r\n    public String onGroupSelected(String groupName) {\r\n        System.out.println(&quot;in onGroup  in Activity&quot;);\r\n        return groupName;\r\n    } \r\n```\r\n```\r\n   @Override\r\n    public String onGroupSelected(String groupName) {\r\n        System.out.println(&quot;in onGroup  in fragmentB&quot;);\r\n        return groupName;\r\n    } \r\n```\r\nBut when i click an item only the listener in my activity is activated, not the one in my fragment. What is it that im missing?\r\n","title":"Android Listener working in activity but not in fragment","body":"<p>I have an activity and two fragments. Im trying to get a clicked item from an arraylist. In my fragmentA I have a interface: </p>\n\n<pre><code>public interface GroupListener {\n        public String onGroupSelected(String groupName);\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>    @Override\n    public void onAttach(@NonNull Context context) {\n        super.onAttach(context);\n\n        try {\n            groupListener = (GroupListener) context;\n        } catch (ClassCastException e)\n        { \n            throw new ClassCastException(context.toString() + \" must implement the interface\" +\n                    \"called GroupListener!\");\n        }\n    }\n</code></pre>\n\n<p>This gets the postion from an item clicked in a list :</p>\n\n<pre><code>    public void onListItemClick(@NonNull ListView l, @NonNull View v, int position, long id) {\n        groupListener.onGroupSelected((String) getListAdapter().getItem(position));\n    }\n</code></pre>\n\n<p>I then have the listner in my activity and in fragmentB which looks the same:</p>\n\n<pre><code>   @Override\n    public String onGroupSelected(String groupName) {\n        System.out.println(\"in onGroup  in Activity\");\n        return groupName;\n    } \n</code></pre>\n\n<pre><code>   @Override\n    public String onGroupSelected(String groupName) {\n        System.out.println(\"in onGroup  in fragmentB\");\n        return groupName;\n    } \n</code></pre>\n\n<p>But when i click an item only the listener in my activity is activated, not the one in my fragment. What is it that im missing?</p>\n"},{"tags":["java","oracle","jdbc","resultset","database-cursor"],"comments":[{"owner":{"account_id":10683,"reputation":2847,"user_id":20297,"display_name":"Oliver Michels"},"score":1,"creation_date":1270132357,"post_id":2560350,"comment_id":2564264,"body_markdown":"Are you refering to &quot;ORA-01000: maximum open cursors exceeded&quot;? If so, see http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:685336504294 for an explanation.","body":"Are you refering to &quot;ORA-01000: maximum open cursors exceeded&quot;? If so, see <a href=\"http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:685336504294\" rel=\"nofollow noreferrer\">asktom.oracle.com/pls/asktom/&hellip;</a> for an explanation."},{"owner":{"account_id":109471,"reputation":4792,"user_id":290050,"accept_rate":87,"display_name":"Vladimir"},"score":0,"creation_date":1270234009,"post_id":2560350,"comment_id":2573352,"body_markdown":"@Oliver Michels that looks helpful. Could you add it as an answer?","body":"@Oliver Michels that looks helpful. Could you add it as an answer?"},{"owner":{"account_id":10683,"reputation":2847,"user_id":20297,"display_name":"Oliver Michels"},"score":0,"creation_date":1270539733,"post_id":2560350,"comment_id":2590391,"body_markdown":"It tried to write a short summary. Best Regards.","body":"It tried to write a short summary. Best Regards."},{"owner":{"account_id":8605400,"reputation":11,"user_id":6445696,"display_name":"ABDAOUI Wahbi"},"score":0,"creation_date":1482829591,"post_id":2560350,"comment_id":71548640,"body_markdown":"An antivirus is Running on Database Server?\nIf antivirus is necessary on your database server (which is not a good practice - as many have pointed out), atleast have an exclusion in the scanning of database files and database server binaries.","body":"An antivirus is Running on Database Server? If antivirus is necessary on your database server (which is not a good practice - as many have pointed out), atleast have an exclusion in the scanning of database files and database server binaries."}],"answers":[{"tags":[],"owner":{"account_id":3047,"reputation":7731,"user_id":4311,"accept_rate":100,"display_name":"Doug Porter"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1385157294,"creation_date":1270126327,"answer_id":2560415,"question_id":2560350,"body_markdown":"Normally you would put the close statements for your ResultSet and Statement into a `finally` block to ensure that they are called even if an exception occurs (could be the issue you are having here).  In your current code, if a SQLException occurs then the two close( ) method calls will never occur and cursors would be left open.\r\n\r\nAlso what query are you using in Oracle to see the count of open cursors?\r\n\r\n**Edit:**  \r\nThat code should be closing the cursor.  If it isn&#39;t then you should be able to see a 1 to 1 correlation of calling your method and the cursor count going up by 1.  Be sure there isn&#39;t some unexpected process that is causing the cursor count to go up.\r\n\r\nIf you have the privileges, you can run this query against the database to see the open cursor count by sid to see if maybe it is some other process that is increasing the cursors and not yours specifically.  It will pull back any with more than 10 cursors open, you can raise this to filter out the noise or narrow it specifically by username or osuser:\r\n\r\n    select oc.sid,\r\n           count(*) numCur,\r\n           s.username username,\r\n           s.osuser osuser,\r\n           oc.sql_text,\r\n           s.program\r\n      from v$open_cursor oc,\r\n           v$session s\r\n     where s.sid = oc.sid\r\n    group by oc.sid, \r\n             oc.sql_text, \r\n             s.username, \r\n             s.osuser, \r\n             s.program\r\n    having count(*) &gt; 10\r\n    order by oc.sid;\r\n\r\nAnother query that may be helpful, in case multiple sid&#39;s are using the same query string so the above does not reveal the offender well:\r\n\r\n     select oc.sql_text, count(*) \r\n       from v$open_cursor oc \r\n       group by oc.sql_text \r\n       having count(*) &gt; 10 \r\n       order by count(*) desc;","title":"Oracle doesn&#39;t remove cursors after closing result set","body":"<p>Normally you would put the close statements for your ResultSet and Statement into a <code>finally</code> block to ensure that they are called even if an exception occurs (could be the issue you are having here).  In your current code, if a SQLException occurs then the two close( ) method calls will never occur and cursors would be left open.</p>\n\n<p>Also what query are you using in Oracle to see the count of open cursors?</p>\n\n<p><strong>Edit:</strong><br>\nThat code should be closing the cursor.  If it isn't then you should be able to see a 1 to 1 correlation of calling your method and the cursor count going up by 1.  Be sure there isn't some unexpected process that is causing the cursor count to go up.</p>\n\n<p>If you have the privileges, you can run this query against the database to see the open cursor count by sid to see if maybe it is some other process that is increasing the cursors and not yours specifically.  It will pull back any with more than 10 cursors open, you can raise this to filter out the noise or narrow it specifically by username or osuser:</p>\n\n<pre><code>select oc.sid,\n       count(*) numCur,\n       s.username username,\n       s.osuser osuser,\n       oc.sql_text,\n       s.program\n  from v$open_cursor oc,\n       v$session s\n where s.sid = oc.sid\ngroup by oc.sid, \n         oc.sql_text, \n         s.username, \n         s.osuser, \n         s.program\nhaving count(*) &gt; 10\norder by oc.sid;\n</code></pre>\n\n<p>Another query that may be helpful, in case multiple sid's are using the same query string so the above does not reveal the offender well:</p>\n\n<pre><code> select oc.sql_text, count(*) \n   from v$open_cursor oc \n   group by oc.sql_text \n   having count(*) &gt; 10 \n   order by count(*) desc;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1270126404,"creation_date":1270126404,"answer_id":2560424,"question_id":2560350,"body_markdown":"The correct way to do it is to close every resource in a finally block in its own try/catch block.  I usually use a static utility class like this: \r\n\r\n    public class DatabaseUtils\r\n    {\r\n        public static void close(Connection connection)\r\n        {\r\n            try\r\n            {\r\n                if (connection != null)\r\n                {\r\n                    connection.close();\r\n                }\r\n            }\r\n            catch (SQLException e)\r\n            {\r\n                // log exception here.\r\n            }\r\n        }\r\n\r\n        // similar methods for ResultSet and Statement\r\n    }\r\n\r\nSo I&#39;d write your code like this: \r\n\r\n    public IngisObject[] select(String query, String idColumnName, String[] columns) {\r\n\r\n    Vector&lt;IngisObject&gt; objects = new Vector&lt;IngisObject&gt;();\r\n\r\n    Connection con = null;\r\n    Statement stmt = null;\r\n    ResultSet rs = null;\r\n    \r\n    try \r\n    {\r\n        connection = connection();\r\n        stmt = con.createStatement();\r\n    \r\n        // This is a SQL injection attack waiting to happen; I&#39;d recommend PreparedStatemen\r\n        String sql = query;\r\n        rs =stmt.executeQuery(sql);//oracle increases cursors count here\r\n        while(rs.next()) \r\n        {\r\n           IngisObject o = new IngisObject(&quot;New Result&quot;);\r\n           o.setIdColumnName(idColumnName);            \r\n           o.setDatabase(this);\r\n           for(String column: columns) o.attrs().put(column, rs.getObject(column));\r\n           objects.add(o);\r\n        }\r\n    \r\n    } \r\n    catch (SQLException ex) \r\n    {\r\n        System.out.println(query);\r\n        ex.printStackTrace();\r\n    }\r\n    finally\r\n    {\r\n        DatabaseUtils.close(rs);\r\n        DatabaseUtils.close(stmt);\r\n        DatabaseUtils.close(con);\r\n    }\r\n\r\n","title":"Oracle doesn&#39;t remove cursors after closing result set","body":"<p>The correct way to do it is to close every resource in a finally block in its own try/catch block.  I usually use a static utility class like this: </p>\n\n<pre><code>public class DatabaseUtils\n{\n    public static void close(Connection connection)\n    {\n        try\n        {\n            if (connection != null)\n            {\n                connection.close();\n            }\n        }\n        catch (SQLException e)\n        {\n            // log exception here.\n        }\n    }\n\n    // similar methods for ResultSet and Statement\n}\n</code></pre>\n\n<p>So I'd write your code like this: </p>\n\n<pre><code>public IngisObject[] select(String query, String idColumnName, String[] columns) {\n\nVector&lt;IngisObject&gt; objects = new Vector&lt;IngisObject&gt;();\n\nConnection con = null;\nStatement stmt = null;\nResultSet rs = null;\n\ntry \n{\n    connection = connection();\n    stmt = con.createStatement();\n\n    // This is a SQL injection attack waiting to happen; I'd recommend PreparedStatemen\n    String sql = query;\n    rs =stmt.executeQuery(sql);//oracle increases cursors count here\n    while(rs.next()) \n    {\n       IngisObject o = new IngisObject(\"New Result\");\n       o.setIdColumnName(idColumnName);            \n       o.setDatabase(this);\n       for(String column: columns) o.attrs().put(column, rs.getObject(column));\n       objects.add(o);\n    }\n\n} \ncatch (SQLException ex) \n{\n    System.out.println(query);\n    ex.printStackTrace();\n}\nfinally\n{\n    DatabaseUtils.close(rs);\n    DatabaseUtils.close(stmt);\n    DatabaseUtils.close(con);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10683,"reputation":2847,"user_id":20297,"display_name":"Oliver Michels"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1270539180,"creation_date":1270539180,"answer_id":2583309,"question_id":2560350,"body_markdown":"The init.ora parameter `open_cursors` defines the maximum of opened cursors a session can have at once. It has a default value of 50. If the application exceeds this number the error &quot;ORA-01000: maximum open cursors exceeded&quot; is raised. \r\n\r\nTherefore it&#39;s mandatory to close the JDBC resources when they are not needed any longer, in particular java.sql.ResultSet and java.sql.Statement. If they are not closed, the application has a resource leak.\r\n\r\nIn case of reusing the Connection object, you must be aware of the fact that the opened oracle cursors are kept open and in use as long the connection exists *and* the transaction has not ended. When the application commits, the opened cursors are released.\r\n\r\nTherefore as an application designer you need to know a rough estimation of the needed open cursors for your most complex transaction.\r\n\r\nThe difficulty lies in the inability of oracle&#39;s internal parameter views (v$open_cursor, v$sesstat, et. al.) to show the difference between opened cursors, which are reusable and opened cursors, which are still blocked (not reusable!) by an unclosed ResulSet or Statement. If you close all Statement and ResultSet objects in your finally block, your application is perfectly fine.\r\n\r\nAdjusting the init.ora parameter works like this (our application needs 800 cursors at a maximum)\r\n\r\n    ALTER SYSTEM SET open_cursors = 800 SCOPE=BOTH;\r\n\r\n\r\n\r\n \r\n\r\n","title":"Oracle doesn&#39;t remove cursors after closing result set","body":"<p>The init.ora parameter <code>open_cursors</code> defines the maximum of opened cursors a session can have at once. It has a default value of 50. If the application exceeds this number the error \"ORA-01000: maximum open cursors exceeded\" is raised. </p>\n\n<p>Therefore it's mandatory to close the JDBC resources when they are not needed any longer, in particular java.sql.ResultSet and java.sql.Statement. If they are not closed, the application has a resource leak.</p>\n\n<p>In case of reusing the Connection object, you must be aware of the fact that the opened oracle cursors are kept open and in use as long the connection exists <em>and</em> the transaction has not ended. When the application commits, the opened cursors are released.</p>\n\n<p>Therefore as an application designer you need to know a rough estimation of the needed open cursors for your most complex transaction.</p>\n\n<p>The difficulty lies in the inability of oracle's internal parameter views (v$open_cursor, v$sesstat, et. al.) to show the difference between opened cursors, which are reusable and opened cursors, which are still blocked (not reusable!) by an unclosed ResulSet or Statement. If you close all Statement and ResultSet objects in your finally block, your application is perfectly fine.</p>\n\n<p>Adjusting the init.ora parameter works like this (our application needs 800 cursors at a maximum)</p>\n\n<pre><code>ALTER SYSTEM SET open_cursors = 800 SCOPE=BOTH;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":152633,"reputation":48303,"user_id":367285,"accept_rate":81,"display_name":"FrVaBe"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1340263123,"creation_date":1340120258,"answer_id":11104479,"question_id":2560350,"body_markdown":"I just had the same problem and found that - if you **do not close the connection** (because you will maybe reuse it later on) - you at least have to do a [connection.rollback()][1] or [connection.commit()][2] to free the open cursors togehther with closing the ResultSet and Statements.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#rollback\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#commit","title":"Oracle doesn&#39;t remove cursors after closing result set","body":"<p>I just had the same problem and found that - if you <strong>do not close the connection</strong> (because you will maybe reuse it later on) - you at least have to do a <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#rollback\" rel=\"noreferrer\">connection.rollback()</a> or <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#commit\" rel=\"noreferrer\">connection.commit()</a> to free the open cursors togehther with closing the ResultSet and Statements.</p>\n"}],"owner":{"account_id":109471,"reputation":4792,"user_id":290050,"accept_rate":87,"display_name":"Vladimir"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77978,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2583309,"answer_count":4,"score":18,"last_activity_date":1640273890,"creation_date":1270125807,"question_id":2560350,"body_markdown":"Note: we reuse single connection.\r\n\r\n\r\n    ************************************************\r\n    public Connection connection() {        \r\n        try {\r\n            if ((connection == null) || (connection.isClosed()))\r\n            {\r\n                if (connection!=null)\r\n                    log.severe(&quot;Connection was closed !&quot;);\r\n                connection = DriverManager.getConnection(jdbcURL, username, password);\r\n            }\r\n        } catch (SQLException e) {\r\n            log.severe(&quot;can&#39;t connect: &quot; + e.getMessage());\r\n        }\r\n        return connection;        \r\n    }\r\n    **************************************************\r\n    \r\n    public IngisObject[] select(String query, String idColumnName, String[] columns) {\r\n        Connection con = connection();\r\n    \r\n        Vector&lt;IngisObject&gt; objects = new Vector&lt;IngisObject&gt;();\r\n        try {\r\n            Statement stmt = con.createStatement();\r\n        \r\n            String sql = query;\r\n            ResultSet rs =stmt.executeQuery(sql);//oracle increases cursors count here\r\n            while(rs.next()) {\r\n                IngisObject o = new IngisObject(&quot;New Result&quot;);\r\n                o.setIdColumnName(idColumnName);            \r\n                o.setDatabase(this);\r\n                for(String column: columns)\r\n                    o.attrs().put(column, rs.getObject(column));\r\n                objects.add(o);\r\n            }\r\n        \r\n            rs.close();// oracle don&#39;t decrease cursor count here, while it&#39;s expected\r\n            stmt.close();\r\n        } \r\n        catch (SQLException ex) {\r\n            System.out.println(query);\r\n            ex.printStackTrace();\r\n        }\r\n\r\n","title":"Oracle doesn&#39;t remove cursors after closing result set","body":"<p>Note: we reuse single connection.</p>\n\n<pre><code>************************************************\npublic Connection connection() {        \n    try {\n        if ((connection == null) || (connection.isClosed()))\n        {\n            if (connection!=null)\n                log.severe(\"Connection was closed !\");\n            connection = DriverManager.getConnection(jdbcURL, username, password);\n        }\n    } catch (SQLException e) {\n        log.severe(\"can't connect: \" + e.getMessage());\n    }\n    return connection;        \n}\n**************************************************\n\npublic IngisObject[] select(String query, String idColumnName, String[] columns) {\n    Connection con = connection();\n\n    Vector&lt;IngisObject&gt; objects = new Vector&lt;IngisObject&gt;();\n    try {\n        Statement stmt = con.createStatement();\n\n        String sql = query;\n        ResultSet rs =stmt.executeQuery(sql);//oracle increases cursors count here\n        while(rs.next()) {\n            IngisObject o = new IngisObject(\"New Result\");\n            o.setIdColumnName(idColumnName);            \n            o.setDatabase(this);\n            for(String column: columns)\n                o.attrs().put(column, rs.getObject(column));\n            objects.add(o);\n        }\n\n        rs.close();// oracle don't decrease cursor count here, while it's expected\n        stmt.close();\n    } \n    catch (SQLException ex) {\n        System.out.println(query);\n        ex.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1640246961,"post_id":70459184,"comment_id":124550872,"body_markdown":"Changing to a stream for this case is unlikely to improve performance. In that case it is better to just stick with the simpler and more readable variant with the for-each loop.","body":"Changing to a stream for this case is unlikely to improve performance. In that case it is better to just stick with the simpler and more readable variant with the for-each loop."}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640246965,"creation_date":1640246965,"answer_id":70459314,"question_id":70459184,"body_markdown":"&gt; But now to improve performance, I am trying to use Stream.reduce()\r\n\r\n[Stream does not improve performance][1], the main idea using stream is [benefit from functional programming][2]. If you want to improve performance, please do proper [benchmarking][3].\r\nAnyway, you can simplify the stream as below.\r\n```java\r\nLong amount = myClassList.stream()\r\n                  .mapToLong(m -&gt; m.getAmount() == null ? 0L : m.getAmount()).sum();\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22658322/java-8-performance-of-streams-vs-collections\r\n  [2]: https://stackoverflow.com/questions/44180101/in-java-what-are-the-advantages-of-streams-over-loops\r\n  [3]: https://antoniogoncalves.org/2015/01/15/micro-benchmarking-with-jmh-measure-dont-guess/","title":"Reducing ArrayList&lt;MyClass&gt; using MyClass attributes","body":"<blockquote>\n<p>But now to improve performance, I am trying to use Stream.reduce()</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/22658322/java-8-performance-of-streams-vs-collections\">Stream does not improve performance</a>, the main idea using stream is <a href=\"https://stackoverflow.com/questions/44180101/in-java-what-are-the-advantages-of-streams-over-loops\">benefit from functional programming</a>. If you want to improve performance, please do proper <a href=\"https://antoniogoncalves.org/2015/01/15/micro-benchmarking-with-jmh-measure-dont-guess/\" rel=\"nofollow noreferrer\">benchmarking</a>.\nAnyway, you can simplify the stream as below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Long amount = myClassList.stream()\n                  .mapToLong(m -&gt; m.getAmount() == null ? 0L : m.getAmount()).sum();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":943073,"reputation":2042,"user_id":1245234,"accept_rate":63,"display_name":"Sandeep Tiwari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640273749,"creation_date":1640273749,"answer_id":70464271,"question_id":70459184,"body_markdown":"You can also use reduce as like below:\r\n\r\n    Long amount = myClassList.stream()\r\n                .filter(m -&gt; m.getAmount() != null)\r\n                .mapToLong(Product::getAmount)\r\n                .reduce(0, Long::sum);","title":"Reducing ArrayList&lt;MyClass&gt; using MyClass attributes","body":"<p>You can also use reduce as like below:</p>\n<pre><code>Long amount = myClassList.stream()\n            .filter(m -&gt; m.getAmount() != null)\n            .mapToLong(Product::getAmount)\n            .reduce(0, Long::sum);\n</code></pre>\n"}],"owner":{"account_id":18727069,"reputation":184,"user_id":13653441,"display_name":"Zhe Sheng Lim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70459314,"answer_count":2,"score":1,"last_activity_date":1640273749,"creation_date":1640246178,"question_id":70459184,"body_markdown":"I have a class, `MyClass`, like this:\r\n```\r\npublic class MyClass() {\r\n  String name;\r\n  Long amount;\r\n\r\n  public MyClass() {\r\n    // No arguments constructor\r\n  }\r\n\r\n  public Long getAmount() {\r\n    return this.amount;\r\n  }\r\n}\r\n```\r\nIf I want to get the sum of `amount` in an ArrayList of MyClass items, usually I would do this: \r\n```\r\n// assuming ArrayList&lt;MyClass&gt; myClassList\r\nLong amount = 0L;\r\nfor (MyClass x : myClassList) {\r\n  amount += x.getAmount();\r\n}\r\n```\r\nBut now to improve performance, I am trying to use `Stream.reduce()`. My approach:\r\n```\r\n// assuming ArrayList&lt;MyClass&gt; myClassList\r\n// reduce all MyClass items to a single MyClass item that holds the total amount\r\nLong amount = myClassList.stream().reduce(new MyClass(), \r\n(curr, next) -&gt; {\r\n  Long currAmount = curr.getAmount() != null ? curr.getAmount() : 0L;  // subtotal\r\n  Long nextAmount = next.getAmount() != null ? next.getAmount() : 0L;  // next value to add\r\n  curr.setAmount(currAmount + nextAmount);  // next subtotal\r\n  return curr;\r\n}).getAmount();\r\n```\r\n\r\nIs there a better way to do so? And how would the reduction be affected if `currAmount` or `nextAmount` is null?","title":"Reducing ArrayList&lt;MyClass&gt; using MyClass attributes","body":"<p>I have a class, <code>MyClass</code>, like this:</p>\n<pre><code>public class MyClass() {\n  String name;\n  Long amount;\n\n  public MyClass() {\n    // No arguments constructor\n  }\n\n  public Long getAmount() {\n    return this.amount;\n  }\n}\n</code></pre>\n<p>If I want to get the sum of <code>amount</code> in an ArrayList of MyClass items, usually I would do this:</p>\n<pre><code>// assuming ArrayList&lt;MyClass&gt; myClassList\nLong amount = 0L;\nfor (MyClass x : myClassList) {\n  amount += x.getAmount();\n}\n</code></pre>\n<p>But now to improve performance, I am trying to use <code>Stream.reduce()</code>. My approach:</p>\n<pre><code>// assuming ArrayList&lt;MyClass&gt; myClassList\n// reduce all MyClass items to a single MyClass item that holds the total amount\nLong amount = myClassList.stream().reduce(new MyClass(), \n(curr, next) -&gt; {\n  Long currAmount = curr.getAmount() != null ? curr.getAmount() : 0L;  // subtotal\n  Long nextAmount = next.getAmount() != null ? next.getAmount() : 0L;  // next value to add\n  curr.setAmount(currAmount + nextAmount);  // next subtotal\n  return curr;\n}).getAmount();\n</code></pre>\n<p>Is there a better way to do so? And how would the reduction be affected if <code>currAmount</code> or <code>nextAmount</code> is null?</p>\n"},{"tags":["java","android","kotlin","gradle"],"comments":[{"owner":{"account_id":1530613,"reputation":779,"user_id":3252261,"display_name":"user3252261"},"score":0,"creation_date":1635870925,"post_id":68656691,"comment_id":123405953,"body_markdown":"Have you ever found a solution?","body":"Have you ever found a solution?"}],"answers":[{"tags":[],"owner":{"account_id":23725780,"reputation":21,"user_id":17745698,"display_name":"Hernan Serrano"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640273739,"creation_date":1640237480,"answer_id":70458020,"question_id":68656691,"body_markdown":"    buildscript {\r\n    ext.kotlin_version = &#39;1.2.51&#39;\r\n    ext.serialization_version = &#39;0.5.1&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &quot;https://dl.bintray.com/kotlin/kotlinx/&quot; }\r\n    }\r\n\r\nChange the url of maven by: https://dl.bintray.com/kotlin/kotlinx/","title":"Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1","body":"<pre><code>buildscript {\next.kotlin_version = '1.2.51'\next.serialization_version = '0.5.1'\nrepositories {\n    google()\n    mavenCentral()\n    maven { url &quot;https://dl.bintray.com/kotlin/kotlinx/&quot; }\n}\n</code></pre>\n<p>Change the url of maven by: <a href=\"https://dl.bintray.com/kotlin/kotlinx/\" rel=\"nofollow noreferrer\">https://dl.bintray.com/kotlin/kotlinx/</a></p>\n"}],"owner":{"account_id":4354019,"reputation":81,"user_id":3553284,"display_name":"javier4mar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1758,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640273739,"creation_date":1628103419,"question_id":68656691,"body_markdown":"I have some problems with the android project, when I try to sync project with Gradle files, the console log, display this error\r\n\r\n\r\n```FAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nA problem occurred configuring root project &#39;GlobalApp&#39;.\r\n&gt; Could not resolve all artifacts for configuration &#39;:classpath.\r\n   &gt; Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1.\r\n     Required by:\r\n         project :\r\n      &gt; Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1.\r\n         &gt; Could not get resource &#39;https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom&#39;.\r\n            &gt; Could not GET &#39;https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom&#39;. Received status code 403 from server: Forbidden\r\n```\r\n\r\nAnd actually when I try to load de URL , https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom the response is a 403 \r\n\r\n\r\nI don&#39;t know if exist another repository or how to fix this?\r\n\r\n\r\n\r\nThey are my build.gradle files\r\n\r\n``` // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    ext.kotlin_version = &#39;1.2.51&#39;\r\n    ext.serialization_version = &#39;0.5.1&#39;\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n        maven { url &quot;https://kotlin.bintray.com/kotlinx&quot; }\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:3.2.1&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        classpath &quot;org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:$serialization_version&quot;\r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n ```\r\n\r\n``` apply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply plugin: &#39;kotlin-android-extensions&#39;\r\napply plugin: &#39;kotlinx-serialization&#39;\r\n\r\nandroid {\r\n    compileSdkVersion 28\r\n    buildToolsVersion &#39;28.0.3&#39;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.sisvol.app.globalappkcr&quot;\r\n        minSdkVersion 21\r\n        targetSdkVersion 28\r\n        versionCode 1\r\n        versionName &#39;2.39.0&#39;\r\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\r\n        setProperty(&quot;archivesBaseName&quot;, &quot;GlobalApp-JSM-ST8050B-$versionName&quot;)\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n}\r\n\r\ncompileKotlin {\r\n    kotlinOptions.jvmTarget = &quot;1.8&quot;\r\n}\r\ncompileTestKotlin {\r\n    kotlinOptions.jvmTarget = &quot;1.8&quot;\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&quot;\r\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-runtime:$serialization_version&quot;\r\n    //implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n    implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;\r\n    implementation &#39;com.android.support:exifinterface:28.0.0&#39;\r\n    implementation &#39;com.android.support.constraint:constraint-layout:1.1.3&#39;\r\n    testImplementation &#39;junit:junit:4.12&#39;\r\n    androidTestImplementation &#39;com.android.support.test:runner:1.0.2&#39;\r\n    androidTestImplementation &#39;com.android.support.test.espresso:espresso-core:3.0.2&#39;\r\n    implementation &#39;com.android.support:design:28.0.0&#39;\r\n    implementation &#39;com.android.volley:volley:1.1.1&#39;\r\n    implementation &#39;com.android.support:recyclerview-v7:28.0.0&#39;\r\n    implementation &#39;com.squareup.picasso:picasso:2.71828&#39;\r\n    implementation files(&#39;libs/core-3.2.1.jar&#39;)\r\n    implementation files(&#39;libs/top-usdk-service-1.0.2.jar&#39;)\r\n}\r\n ``\r\n\r\n\r\n","title":"Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1","body":"<p>I have some problems with the android project, when I try to sync project with Gradle files, the console log, display this error</p>\n<pre><code>\n* What went wrong:\nA problem occurred configuring root project 'GlobalApp'.\n&gt; Could not resolve all artifacts for configuration ':classpath.\n   &gt; Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1.\n     Required by:\n         project :\n      &gt; Could not resolve org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:0.5.1.\n         &gt; Could not get resource 'https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom'.\n            &gt; Could not GET 'https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom'. Received status code 403 from server: Forbidden\n</code></pre>\n<p>And actually when I try to load de URL , <a href=\"https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom\" rel=\"nofollow noreferrer\">https://kotlin.bintray.com/kotlinx/org/jetbrains/kotlinx/kotlinx-gradle-serialization-plugin/0.5.1/kotlinx-gradle-serialization-plugin-0.5.1.pom</a> the response is a 403</p>\n<p>I don't know if exist another repository or how to fix this?</p>\n<p>They are my build.gradle files</p>\n<pre><code>\nbuildscript {\n    ext.kotlin_version = '1.2.51'\n    ext.serialization_version = '0.5.1'\n    repositories {\n        google()\n        mavenCentral()\n        maven { url &quot;https://kotlin.bintray.com/kotlinx&quot; }\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.2.1'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n        classpath &quot;org.jetbrains.kotlinx:kotlinx-gradle-serialization-plugin:$serialization_version&quot;\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<pre><code>apply plugin: 'kotlin-android'\napply plugin: 'kotlin-android-extensions'\napply plugin: 'kotlinx-serialization'\n\nandroid {\n    compileSdkVersion 28\n    buildToolsVersion '28.0.3'\n\n    defaultConfig {\n        applicationId &quot;com.sisvol.app.globalappkcr&quot;\n        minSdkVersion 21\n        targetSdkVersion 28\n        versionCode 1\n        versionName '2.39.0'\n        testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;\n        setProperty(&quot;archivesBaseName&quot;, &quot;GlobalApp-JSM-ST8050B-$versionName&quot;)\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n}\n\ncompileKotlin {\n    kotlinOptions.jvmTarget = &quot;1.8&quot;\n}\ncompileTestKotlin {\n    kotlinOptions.jvmTarget = &quot;1.8&quot;\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&quot;\n    implementation &quot;org.jetbrains.kotlinx:kotlinx-serialization-runtime:$serialization_version&quot;\n    //implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.android.support:appcompat-v7:28.0.0'\n    implementation 'com.android.support:exifinterface:28.0.0'\n    implementation 'com.android.support.constraint:constraint-layout:1.1.3'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'com.android.support.test:runner:1.0.2'\n    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'\n    implementation 'com.android.support:design:28.0.0'\n    implementation 'com.android.volley:volley:1.1.1'\n    implementation 'com.android.support:recyclerview-v7:28.0.0'\n    implementation 'com.squareup.picasso:picasso:2.71828'\n    implementation files('libs/core-3.2.1.jar')\n    implementation files('libs/top-usdk-service-1.0.2.jar')\n}\n ``\n\n\n</code></pre>\n"},{"tags":["java","spring","maven","docker","spring-boot"],"comments":[{"owner":{"account_id":3150070,"reputation":10126,"user_id":2663692,"accept_rate":32,"display_name":"Tal Avissar"},"score":0,"creation_date":1505839472,"post_id":44667063,"comment_id":79573631,"body_markdown":"great solved the problem i have been working for hours!","body":"great solved the problem i have been working for hours!"}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1498110339,"creation_date":1498024925,"answer_id":44667944,"question_id":44667063,"body_markdown":"Set an environment property to override the `eureka.client.serviceUrl.defaultZone` to match the service name in your docker compose file.\r\n\r\n    eureka-server:\r\n      image: rosenthal/eureka-server\r\n      ports:\r\n       - &quot;8761:8761&quot;\r\n    user-registration:\r\n      image: rosenthal/user-registration\r\n      ports:\r\n       - &quot;9000:9000&quot;\r\n      environment:\r\n       - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://eureka-server:8761/eureka\r\n\r\nThis will override the property from the packaged `application.properties`. \r\n\r\n**NOTE:** As mentioned in the comments you don&#39;t need the `links` section in the compose file. I removed is as such. See https://docs.docker.com/compose/networking/ for info on that.","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p>Set an environment property to override the <code>eureka.client.serviceUrl.defaultZone</code> to match the service name in your docker compose file.</p>\n\n<pre><code>eureka-server:\n  image: rosenthal/eureka-server\n  ports:\n   - \"8761:8761\"\nuser-registration:\n  image: rosenthal/user-registration\n  ports:\n   - \"9000:9000\"\n  environment:\n   - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://eureka-server:8761/eureka\n</code></pre>\n\n<p>This will override the property from the packaged <code>application.properties</code>. </p>\n\n<p><strong>NOTE:</strong> As mentioned in the comments you don't need the <code>links</code> section in the compose file. I removed is as such. See <a href=\"https://docs.docker.com/compose/networking/\" rel=\"noreferrer\">https://docs.docker.com/compose/networking/</a> for info on that.</p>\n"},{"tags":[],"owner":{"account_id":1235468,"reputation":31121,"user_id":1199132,"accept_rate":83,"display_name":"Aritz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1498120236,"creation_date":1498120236,"answer_id":44694167,"question_id":44667063,"body_markdown":"If useful for you, that&#39;s in some way how I configure it for my production environment (docker-compose file version 2):\r\n\r\n    version: &#39;2&#39;\r\n    services:\r\n      eureka-server:\r\n        image: rosenthal/eureka-server\r\n        expose:\r\n        - &quot;8761&quot;\r\n      user-registration:\r\n        image: rosenthal/user-registration\r\n        container_name: user-registration\r\n    \tports:\r\n    \t- &quot;9000:8080&quot;\r\n        environment:\r\n          server.port: 8080\r\n          eureka.client.enabled: &#39;true&#39;\r\n          eureka.host: eureka-server\r\n          eureka.instance.preferIpAddress: &#39;true&#39;\r\n\r\nFrom the [docs][1] that&#39;s what `expose` does:\r\n\r\n&gt; Expose ports without publishing them to the host machine - they’ll only be accessible to linked services. Only the internal port can be specified.\r\n\r\nAs you&#39;ve got everything in the same network, containers can see each other with no links between them.\r\n\r\n**SIDE NOTE**\r\n\r\nKeep in mind that with this configuration port 9000 will be publicly accessible at the host machine, and mapped to the 8080 port of the user-registration container.\r\n\r\n\r\n  [1]: https://docs.docker.com/compose/compose-file/#service-configuration-reference\r\n","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p>If useful for you, that's in some way how I configure it for my production environment (docker-compose file version 2):</p>\n\n<pre><code>version: '2'\nservices:\n  eureka-server:\n    image: rosenthal/eureka-server\n    expose:\n    - \"8761\"\n  user-registration:\n    image: rosenthal/user-registration\n    container_name: user-registration\n    ports:\n    - \"9000:8080\"\n    environment:\n      server.port: 8080\n      eureka.client.enabled: 'true'\n      eureka.host: eureka-server\n      eureka.instance.preferIpAddress: 'true'\n</code></pre>\n\n<p>From the <a href=\"https://docs.docker.com/compose/compose-file/#service-configuration-reference\" rel=\"nofollow noreferrer\">docs</a> that's what <code>expose</code> does:</p>\n\n<blockquote>\n  <p>Expose ports without publishing them to the host machine - they’ll only be accessible to linked services. Only the internal port can be specified.</p>\n</blockquote>\n\n<p>As you've got everything in the same network, containers can see each other with no links between them.</p>\n\n<p><strong>SIDE NOTE</strong></p>\n\n<p>Keep in mind that with this configuration port 9000 will be publicly accessible at the host machine, and mapped to the 8080 port of the user-registration container.</p>\n"},{"tags":[],"owner":{"account_id":14838023,"reputation":49,"user_id":10715514,"display_name":"Gagan Gowda"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1552285636,"creation_date":1552285636,"answer_id":55096271,"question_id":44667063,"body_markdown":"i had the same issue and i tried everything but it did not work.\r\n after 2 weeks of trial and error then i tried to remove all the dependency from the repository and then i made sure that i have the same netflix client, server and Zuul dependency in all of them.\r\n\r\nand then i used the above solutions after which it worked for me.\r\n\r\nalso be aware that u need to start the Services with docker compose only then it will work or else if u start them independently then they will all start in their on containers and will not register with the service registry. hope this helps","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p>i had the same issue and i tried everything but it did not work.\n after 2 weeks of trial and error then i tried to remove all the dependency from the repository and then i made sure that i have the same netflix client, server and Zuul dependency in all of them.</p>\n\n<p>and then i used the above solutions after which it worked for me.</p>\n\n<p>also be aware that u need to start the Services with docker compose only then it will work or else if u start them independently then they will all start in their on containers and will not register with the service registry. hope this helps</p>\n"},{"tags":[],"owner":{"account_id":1500413,"reputation":320,"user_id":1405280,"accept_rate":80,"display_name":"Tanbir Ahmed"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1640273728,"creation_date":1622169561,"answer_id":67732182,"question_id":44667063,"body_markdown":"**UPDATE:**\r\n\r\nIt looks like for the newer versions of spring-boot (in my case `2.4.5`) this solution does not work. The `EUREKA_CLIENT_SERVICEURL_DEFAULTZONE` property is not picked up automatically. There is a permanent issue with camelcasing which creates an inconsistency. `EUREKA_CLIENT_SERVICEURL_DEFAULTZONE` is not converted to `eureka.client.serviceUrl.defaultZone`. It&#39;s converted to `eureka.client.serviceurl.defaultzone`. Please look at this [Github Issue for spring-cloud-netflix][1] for more details. They cannot change the parameter now as this will break backward compatibility. Here is the code that finally worked for me\r\n\r\n       discovery:\r\n         container_name: discovery\r\n         build: .\r\n         ports:\r\n           - &quot;8761:8761&quot;\r\n\r\n       user-registration:\r\n         container_name: user-registration\r\n         build: .\r\n         ports:\r\n           - &quot;8080:8080&quot;\r\n         environment:\r\n           SPRING_APPLICATION_JSON: &#39;{&quot;eureka&quot;:{&quot;client&quot;:{&quot;serviceUrl&quot;:{&quot;defaultZone&quot;:&quot;http://discovery:8761/eureka&quot;}}}}&#39;\r\n\r\nFor only this property to set through environment variable you have to user `SPRING_APPLICATION_JSON`. It&#39;s ugly but it works.\r\n\r\n  [1]: https://github.com/spring-cloud/spring-cloud-netflix/issues/2541","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p><strong>UPDATE:</strong></p>\n<p>It looks like for the newer versions of spring-boot (in my case <code>2.4.5</code>) this solution does not work. The <code>EUREKA_CLIENT_SERVICEURL_DEFAULTZONE</code> property is not picked up automatically. There is a permanent issue with camelcasing which creates an inconsistency. <code>EUREKA_CLIENT_SERVICEURL_DEFAULTZONE</code> is not converted to <code>eureka.client.serviceUrl.defaultZone</code>. It's converted to <code>eureka.client.serviceurl.defaultzone</code>. Please look at this <a href=\"https://github.com/spring-cloud/spring-cloud-netflix/issues/2541\" rel=\"nofollow noreferrer\">Github Issue for spring-cloud-netflix</a> for more details. They cannot change the parameter now as this will break backward compatibility. Here is the code that finally worked for me</p>\n<pre><code>   discovery:\n     container_name: discovery\n     build: .\n     ports:\n       - &quot;8761:8761&quot;\n\n   user-registration:\n     container_name: user-registration\n     build: .\n     ports:\n       - &quot;8080:8080&quot;\n     environment:\n       SPRING_APPLICATION_JSON: '{&quot;eureka&quot;:{&quot;client&quot;:{&quot;serviceUrl&quot;:{&quot;defaultZone&quot;:&quot;http://discovery:8761/eureka&quot;}}}}'\n</code></pre>\n<p>For only this property to set through environment variable you have to user <code>SPRING_APPLICATION_JSON</code>. It's ugly but it works.</p>\n"},{"tags":[],"owner":{"account_id":15387763,"reputation":221,"user_id":11101414,"display_name":"tigersoft"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637648164,"creation_date":1637648164,"answer_id":70076185,"question_id":44667063,"body_markdown":"As an alternative to @Tanbir Sagar solution this was the one that worked for me:\r\n\r\n    discovery:\r\n      container_name: discovery\r\n      build: .\r\n      ports:\r\n        - &quot;8761:8761&quot;\r\n\r\n    user-registration:\r\n      container_name: user-registration\r\n      build: .\r\n      ports:\r\n        - &quot;8080:8080&quot;\r\n      environment:\r\n        eureka.client.serviceUrl.defaultZone: http://discovery:8761/eureka\r\n\r\nTested with Spring Boot `2.5.6` and Docker Compose `3`.\r\n ","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p>As an alternative to @Tanbir Sagar solution this was the one that worked for me:</p>\n<pre><code>discovery:\n  container_name: discovery\n  build: .\n  ports:\n    - &quot;8761:8761&quot;\n\nuser-registration:\n  container_name: user-registration\n  build: .\n  ports:\n    - &quot;8080:8080&quot;\n  environment:\n    eureka.client.serviceUrl.defaultZone: http://discovery:8761/eureka\n</code></pre>\n<p>Tested with Spring Boot <code>2.5.6</code> and Docker Compose <code>3</code>.</p>\n"}],"owner":{"account_id":6755145,"reputation":775,"user_id":5203863,"accept_rate":81,"display_name":"rosenthal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14026,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":44694167,"answer_count":5,"score":6,"last_activity_date":1640273728,"creation_date":1498020563,"question_id":44667063,"body_markdown":"I have a very simple demo of using Spring Boot + Docker Compose + Eureka. \r\n\r\nMy server runs on port 8671 with the following application properties:\r\n\r\n    server:\r\n      port: 8761\r\n    eureka:\r\n      instance:\r\n        prefer-ip-address: true\r\n      client:\r\n        registerWithEureka: false\r\n        fetchRegistry: false\r\n      server:\r\n        waitTimeInMsWhenSyncEmpty: 0\r\n\r\n  My Eureka client runs on port 9000 with the following application properties:\r\n\r\n\r\n    server:\r\n      port: 9000\r\n    spring:\r\n      application:\r\n        name: user-registration\r\n    eureka:\r\n      client:\r\n        registerWithEureka: true\r\n        fetchRegistry: true\r\n        serviceUrl:\r\n          defaultZone: http://localhost:8761/eureka/\r\n      instance:\r\n        prefer-ip-address: true\r\n\r\nWhen I start up my docker.compose file in the parent maven project, this is the contents of my docker-compose file:\r\n \r\n    eureka-server:\r\n      image: rosenthal/eureka-server\r\n    ports:\r\n       - &quot;8761:8761&quot;\r\n    user-registration:\r\n      image: rosenthal/user-registration\r\n      ports:\r\n       - &quot;9000:9000&quot;\r\n      links:\r\n       - eureka-server\r\n\r\nWhen I run my application by first starting the eureka server, following by the client via \r\n\r\n    mvn spring-boot:run \r\n\r\nThe server successfully registers my client (I call it user-registration).\r\n\r\nWhen I run my application through docker-compose, the client fails to register with the following output:\r\n    \r\n     DiscoveryClient_USER-REGISTRATION/0fd640cbc3ba:user-registration:9000: \r\n     registering service...\r\n     user-registration_1  | 2017-06-21 04:36:05.120 ERROR 1 --- [nfoReplicator-0]        \r\n     c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\r\n     user-registration_1  | \r\n     user-registration_1  | com.sun.jersey.api.client.ClientHandlerException: \r\n     java.net.ConnectException: Connection refused (Connection refused)\r\n\r\nMy first assumption was that running docker-compose ran into a race condition on waiting for the server to start, but my eureka client seems to have a heartbeat trying to call home to the server it&#39;s configured with. This means it&#39;s just not able to find the Eureka server I have registered (and is running, I can navigate to it on localhost:8671).\r\n\r\nWhat am I missing here? Everything runs fine running locally with spring-boot starting up with it&#39;s own embedded tomcat containers. As soon as I start to do it with docker-compose, it doesn&#39;t want to work.\r\n\r\n\r\n## EDIT ##\r\nI realized my problem, I believe. So docker doesn&#39;t run on localhost, it runs on the public IP it is assigned when I start up docker. Navigating to this ip + port shows my service running for Eureka Server. The client still doesn&#39;t register.\r\n\r\nSO, I made changes to the application.yml file for my eureka client to:\r\n\r\n    serviceUrl:\r\n      defaultZone: http://192.168.59.103:8761/eureka/\r\n\r\nThat IP is the one my docker daemon is running under. Now, it misses the first registration when I do docker-compose, but the second heartbeat picks up my client. \r\n\r\nHow can I ensure the client waits until the server is FULLY up? I used the proper docker &quot;links&quot; field in my docket compose file, but it didn&#39;t work as I hoped. Additionally, how can I see the defaultZone file to be my DOCKER_HOST IP?\r\n\r\n## Final result ##\r\nThe resulting docker-compose file that got everything working for me was:\r\n\r\n    eureka-server:\r\n      image: thorrism/eureka-server\r\n      ports:\r\n       - &quot;8761:8761&quot;\r\n    user-registration:\r\n      image: thorrism/user-registration\r\n      ports:\r\n       - &quot;9000:9000&quot;\r\n      links:\r\n       - eureka-server\r\n      environment:\r\n        EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://eureka-server:8761/eureka","title":"Docker and Eureka with Spring Boot failing to register clients","body":"<p>I have a very simple demo of using Spring Boot + Docker Compose + Eureka. </p>\n\n<p>My server runs on port 8671 with the following application properties:</p>\n\n<pre><code>server:\n  port: 8761\neureka:\n  instance:\n    prefer-ip-address: true\n  client:\n    registerWithEureka: false\n    fetchRegistry: false\n  server:\n    waitTimeInMsWhenSyncEmpty: 0\n</code></pre>\n\n<p>My Eureka client runs on port 9000 with the following application properties:</p>\n\n<pre><code>server:\n  port: 9000\nspring:\n  application:\n    name: user-registration\neureka:\n  client:\n    registerWithEureka: true\n    fetchRegistry: true\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/\n  instance:\n    prefer-ip-address: true\n</code></pre>\n\n<p>When I start up my docker.compose file in the parent maven project, this is the contents of my docker-compose file:</p>\n\n<pre><code>eureka-server:\n  image: rosenthal/eureka-server\nports:\n   - \"8761:8761\"\nuser-registration:\n  image: rosenthal/user-registration\n  ports:\n   - \"9000:9000\"\n  links:\n   - eureka-server\n</code></pre>\n\n<p>When I run my application by first starting the eureka server, following by the client via </p>\n\n<pre><code>mvn spring-boot:run \n</code></pre>\n\n<p>The server successfully registers my client (I call it user-registration).</p>\n\n<p>When I run my application through docker-compose, the client fails to register with the following output:</p>\n\n<pre><code> DiscoveryClient_USER-REGISTRATION/0fd640cbc3ba:user-registration:9000: \n registering service...\n user-registration_1  | 2017-06-21 04:36:05.120 ERROR 1 --- [nfoReplicator-0]        \n c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error\n user-registration_1  | \n user-registration_1  | com.sun.jersey.api.client.ClientHandlerException: \n java.net.ConnectException: Connection refused (Connection refused)\n</code></pre>\n\n<p>My first assumption was that running docker-compose ran into a race condition on waiting for the server to start, but my eureka client seems to have a heartbeat trying to call home to the server it's configured with. This means it's just not able to find the Eureka server I have registered (and is running, I can navigate to it on localhost:8671).</p>\n\n<p>What am I missing here? Everything runs fine running locally with spring-boot starting up with it's own embedded tomcat containers. As soon as I start to do it with docker-compose, it doesn't want to work.</p>\n\n<h2>EDIT</h2>\n\n<p>I realized my problem, I believe. So docker doesn't run on localhost, it runs on the public IP it is assigned when I start up docker. Navigating to this ip + port shows my service running for Eureka Server. The client still doesn't register.</p>\n\n<p>SO, I made changes to the application.yml file for my eureka client to:</p>\n\n<pre><code>serviceUrl:\n  defaultZone: http://192.168.59.103:8761/eureka/\n</code></pre>\n\n<p>That IP is the one my docker daemon is running under. Now, it misses the first registration when I do docker-compose, but the second heartbeat picks up my client. </p>\n\n<p>How can I ensure the client waits until the server is FULLY up? I used the proper docker \"links\" field in my docket compose file, but it didn't work as I hoped. Additionally, how can I see the defaultZone file to be my DOCKER_HOST IP?</p>\n\n<h2>Final result</h2>\n\n<p>The resulting docker-compose file that got everything working for me was:</p>\n\n<pre><code>eureka-server:\n  image: thorrism/eureka-server\n  ports:\n   - \"8761:8761\"\nuser-registration:\n  image: thorrism/user-registration\n  ports:\n   - \"9000:9000\"\n  links:\n   - eureka-server\n  environment:\n    EUREKA_CLIENT_SERVICEURL_DEFAULTZONE: http://eureka-server:8761/eureka\n</code></pre>\n"},{"tags":["java","java-8","garbage-collection"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1640240517,"post_id":70458298,"comment_id":124549266,"body_markdown":"In sone JRE&#39;s System.gc() is a no-op so it won&#39;t change a thing  if your JRE is one of them. It&#39;s also likely that the JRE already has been trying to do a gc before the exception is thrown.","body":"In sone JRE&#39;s System.gc() is a no-op so it won&#39;t change a thing  if your JRE is one of them. It&#39;s also likely that the JRE already has been trying to do a gc before the exception is thrown."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1640263548,"post_id":70458298,"comment_id":124556100,"body_markdown":"This is a special case as the garbage collector does not track the native memory but the native buffer’s cleanup depends on the garbage collector detecting the unreachability of the frontend `ByteBuffer`.","body":"This is a special case as the garbage collector does not track the native memory but the native buffer’s cleanup depends on the garbage collector detecting the unreachability of the frontend <code>ByteBuffer</code>."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640240702,"creation_date":1640240344,"answer_id":70458351,"question_id":70458298,"body_markdown":"In the give example, the problem is insufficient memory. Thus, running the garbage collector to free up memory might remedy this. But the call to [`System.gc()`][SystemApi] is only a suggestion to the JVM. It is not guaranteed that that the garbage collector frees any memory through this call. \r\n\r\nSo this approach is somewhat of a heuristic.\r\n\r\n[SystemApi]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.html#gc()","title":"Is the System.gc() call in sun.nio.ch.FileChannelImpl a bad case?","body":"<p>In the give example, the problem is insufficient memory. Thus, running the garbage collector to free up memory might remedy this. But the call to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.html#gc()\" rel=\"nofollow noreferrer\"><code>System.gc()</code></a> is only a suggestion to the JVM. It is not guaranteed that that the garbage collector frees any memory through this call.</p>\n<p>So this approach is somewhat of a heuristic.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1640273689,"creation_date":1640273689,"answer_id":70464253,"question_id":70458298,"body_markdown":"When an object allocation fails with an `OutOfMemoryError`, the garbage collector did already try its best to reclaim memory of unused objects or expanding the heap. So calling `System.gc()` after catching `OutOfMemoryError` would be pointless.\r\n\r\nA special case is the situation when the garbage collector repeatedly did reclaim a tiny amount of memory, so the application could proceed, but have to perform another garbage collection right on the next allocation. Some garbage collectors throw an `OutOfMemoryError` with the message &quot;GC Overhead Limit Exceeded&quot; when they detect that the application spent more than 98% of the CPU time for garbage collection. In this situation, calling `System.gc()` would be counter productive, as then, the application spends even more time in garbage collection plus creating and processing `OutOfMemoryError`s.\r\n\r\n---\r\n\r\nThe `FileChannelImpl`’s case is different. `map0` may fail due to insufficient native memory or, in case of 32 bit systems, when running out of address space. In these cases, the heap memory manager did not produce the `OutOfMemoryError` and it is possible that the garbage collector didn’t run. But to reclaim native memory or address space, the associated `ByteBuffer` instances must get garbage collected, so their cleaner can run. This is a rare corner case where calling `System.gc();` makes sense.\r\n\r\nIt’s still fragile, as `System.gc();` is not guaranteed to collect all objects or to run the garbage collector at all. [JEP&#160;383] is supposed to solve this, by providing better control over the lifetime of native allocations.\r\n\r\n[JEP&#160;383]: https://openjdk.java.net/jeps/383","title":"Is the System.gc() call in sun.nio.ch.FileChannelImpl a bad case?","body":"<p>When an object allocation fails with an <code>OutOfMemoryError</code>, the garbage collector did already try its best to reclaim memory of unused objects or expanding the heap. So calling <code>System.gc()</code> after catching <code>OutOfMemoryError</code> would be pointless.</p>\n<p>A special case is the situation when the garbage collector repeatedly did reclaim a tiny amount of memory, so the application could proceed, but have to perform another garbage collection right on the next allocation. Some garbage collectors throw an <code>OutOfMemoryError</code> with the message &quot;GC Overhead Limit Exceeded&quot; when they detect that the application spent more than 98% of the CPU time for garbage collection. In this situation, calling <code>System.gc()</code> would be counter productive, as then, the application spends even more time in garbage collection plus creating and processing <code>OutOfMemoryError</code>s.</p>\n<hr />\n<p>The <code>FileChannelImpl</code>’s case is different. <code>map0</code> may fail due to insufficient native memory or, in case of 32 bit systems, when running out of address space. In these cases, the heap memory manager did not produce the <code>OutOfMemoryError</code> and it is possible that the garbage collector didn’t run. But to reclaim native memory or address space, the associated <code>ByteBuffer</code> instances must get garbage collected, so their cleaner can run. This is a rare corner case where calling <code>System.gc();</code> makes sense.</p>\n<p>It’s still fragile, as <code>System.gc();</code> is not guaranteed to collect all objects or to run the garbage collector at all. <a href=\"https://openjdk.java.net/jeps/383\" rel=\"nofollow noreferrer\">JEP 383</a> is supposed to solve this, by providing better control over the lifetime of native allocations.</p>\n"}],"owner":{"account_id":7909307,"reputation":409,"user_id":5973816,"display_name":"Poison"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":70464253,"answer_count":2,"score":3,"last_activity_date":1640273689,"creation_date":1640239988,"question_id":70458298,"body_markdown":"```java\r\ntry {\r\n    // If no exception was thrown from map0, the address is valid\r\n    addr = map0(imode, mapPosition, mapSize);\r\n} catch (OutOfMemoryError x) {\r\n    // An OutOfMemoryError may indicate that we&#39;ve exhausted memory\r\n    // so force gc and re-attempt map\r\n    System.gc();\r\n    try {\r\n        Thread.sleep(100);\r\n    } catch (InterruptedException y) {\r\n        Thread.currentThread().interrupt();\r\n    }\r\n    try {\r\n        addr = map0(imode, mapPosition, mapSize);\r\n    } catch (OutOfMemoryError y) {\r\n        // After a second OOME, fail\r\n        throw new IOException(&quot;Map failed&quot;, y);\r\n    }\r\n}\r\n```\r\n\r\nFrom [jdk/FileChannelImpl.java at jdk8-b120](https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/sun/nio/ch/FileChannelImpl.java#L882).\r\n\r\nDoes this help with exception recovery?","title":"Is the System.gc() call in sun.nio.ch.FileChannelImpl a bad case?","body":"<pre class=\"lang-java prettyprint-override\"><code>try {\n    // If no exception was thrown from map0, the address is valid\n    addr = map0(imode, mapPosition, mapSize);\n} catch (OutOfMemoryError x) {\n    // An OutOfMemoryError may indicate that we've exhausted memory\n    // so force gc and re-attempt map\n    System.gc();\n    try {\n        Thread.sleep(100);\n    } catch (InterruptedException y) {\n        Thread.currentThread().interrupt();\n    }\n    try {\n        addr = map0(imode, mapPosition, mapSize);\n    } catch (OutOfMemoryError y) {\n        // After a second OOME, fail\n        throw new IOException(&quot;Map failed&quot;, y);\n    }\n}\n</code></pre>\n<p>From <a href=\"https://github.com/openjdk/jdk/blob/jdk8-b120/jdk/src/share/classes/sun/nio/ch/FileChannelImpl.java#L882\" rel=\"nofollow noreferrer\">jdk/FileChannelImpl.java at jdk8-b120</a>.</p>\n<p>Does this help with exception recovery?</p>\n"},{"tags":["java","android","okhttp"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1640274327,"post_id":70464190,"comment_id":124559808,"body_markdown":"&quot;OkHttp&#39;s request body require static parameters&quot; - why?","body":"&quot;OkHttp&#39;s request body require static parameters&quot; - why?"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1640277378,"post_id":70464190,"comment_id":124560843,"body_markdown":"Your [mcve] should show your OkHttp-related code and explain what you mean by static parameters.","body":"Your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> should show your OkHttp-related code and explain what you mean by static parameters."},{"owner":{"account_id":23503146,"reputation":11,"user_id":17552772,"display_name":"nubm3rcy"},"score":0,"creation_date":1640349832,"post_id":70464190,"comment_id":124574992,"body_markdown":"It might seem that the OkHttp module is not the problem, I don&#39;t know whether MainActivity class is. However, when I tried to switch the login function to another class, the problem was still there.","body":"It might seem that the OkHttp module is not the problem, I don&#39;t know whether MainActivity class is. However, when I tried to switch the login function to another class, the problem was still there."}],"owner":{"account_id":23503146,"reputation":11,"user_id":17552772,"display_name":"nubm3rcy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1640273471,"creation_date":1640273471,"question_id":70464190,"body_markdown":"I&#39;m planning to make API requests in my application. Though, OkHttp&#39;s request body require static parameters, but the params I&#39;m trying to fit in is not static.\r\nHere is the code of the non-static string I want to add as parameter:\r\n```\r\npublic String HWID(){\r\n        if (!initial_run()) {\r\n            return const_HWID;\r\n        } else {\r\n            String manufacturer = Build.MANUFACTURER;\r\n            String unique = UUID.randomUUID().toString();\r\n            return manufacturer.charAt(0) + &quot;-&quot; + unique;\r\n        }\r\n    }\r\n```\r\nThe initial_run boolean is also non-static as it requires some of the File components:\r\n```\r\npublic boolean initial_run(){\r\n        if (file.exists()) return false;\r\n        else{\r\n            try {\r\n                FileOutputStream fos;\r\n                fos = context.openFileOutput(&quot;/storage/emulated/0/Download/content.txt&quot;, Context.MODE_PRIVATE);\r\n                fos.write(HWID().getBytes(StandardCharsets.UTF_8));\r\n                fos.close();\r\n                const_HWID = HWID();\r\n            }\r\n            catch (IOException e){\r\n                e.printStackTrace();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n```\r\nI appreciate any answer that may help me out.","title":"Is there anyway to make OkHttp request not static?","body":"<p>I'm planning to make API requests in my application. Though, OkHttp's request body require static parameters, but the params I'm trying to fit in is not static.\nHere is the code of the non-static string I want to add as parameter:</p>\n<pre><code>public String HWID(){\n        if (!initial_run()) {\n            return const_HWID;\n        } else {\n            String manufacturer = Build.MANUFACTURER;\n            String unique = UUID.randomUUID().toString();\n            return manufacturer.charAt(0) + &quot;-&quot; + unique;\n        }\n    }\n</code></pre>\n<p>The initial_run boolean is also non-static as it requires some of the File components:</p>\n<pre><code>public boolean initial_run(){\n        if (file.exists()) return false;\n        else{\n            try {\n                FileOutputStream fos;\n                fos = context.openFileOutput(&quot;/storage/emulated/0/Download/content.txt&quot;, Context.MODE_PRIVATE);\n                fos.write(HWID().getBytes(StandardCharsets.UTF_8));\n                fos.close();\n                const_HWID = HWID();\n            }\n            catch (IOException e){\n                e.printStackTrace();\n            }\n            return true;\n        }\n    }\n</code></pre>\n<p>I appreciate any answer that may help me out.</p>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2256668,"reputation":590,"user_id":1987724,"accept_rate":63,"display_name":"Fam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640273458,"creation_date":1640273126,"answer_id":70464126,"question_id":70207362,"body_markdown":"I figured it out with some help from a professional acquaintance. The trick was to grab the static security context which allows you to get ahold of the current authentication. Then, getting the `uid` claim I was looking for was trivial.\r\n\r\nI used a Baeldung article to help me scaffold the `HandlerMethodArgumentResolver`: https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver\r\n\r\nAnd here is what I did in the `resolveArgument` method:\r\n\r\n    @Override\r\n    public Object resolveArgument(\r\n        MethodParameter parameter,\r\n        ModelAndViewContainer mavContainer,\r\n        NativeWebRequest webRequest,\r\n        WebDataBinderFactory binderFactory)\r\n        throws Exception {\r\n      final var auth = (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\r\n      final var token = auth.getToken();\r\n      if (token.hasClaim(&quot;uid&quot;)) {\r\n        return token.getClaimAsString(&quot;uid&quot;);\r\n      } else {\r\n        return null;\r\n      }\r\n    }","title":"How do I get a JwtAuthenticationToken for my HandlerMethodArgumentResolver from the request&#39;s Authorization header?","body":"<p>I figured it out with some help from a professional acquaintance. The trick was to grab the static security context which allows you to get ahold of the current authentication. Then, getting the <code>uid</code> claim I was looking for was trivial.</p>\n<p>I used a Baeldung article to help me scaffold the <code>HandlerMethodArgumentResolver</code>: <a href=\"https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver</a></p>\n<p>And here is what I did in the <code>resolveArgument</code> method:</p>\n<pre><code>@Override\npublic Object resolveArgument(\n    MethodParameter parameter,\n    ModelAndViewContainer mavContainer,\n    NativeWebRequest webRequest,\n    WebDataBinderFactory binderFactory)\n    throws Exception {\n  final var auth = (JwtAuthenticationToken) SecurityContextHolder.getContext().getAuthentication();\n  final var token = auth.getToken();\n  if (token.hasClaim(&quot;uid&quot;)) {\n    return token.getClaimAsString(&quot;uid&quot;);\n  } else {\n    return null;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2256668,"reputation":590,"user_id":1987724,"accept_rate":63,"display_name":"Fam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2880,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70464126,"answer_count":1,"score":0,"last_activity_date":1640273458,"creation_date":1638484925,"question_id":70207362,"body_markdown":"I have a Spring Boot application that requires a `JwtAuthenticationToken` passed in a HTTP `Authorization` header. The header itself provides a bearer token; Spring is doing some magic that I am currently unaware of to convert that bearer token string into a `JwtAuthenticationToken`. I have some code that extracts the user id from the token, which is used to locate the correct resources on the server.\r\n```java\r\nprivate String getUidFromToken(JwtAuthenticationToken token) {\r\n  // this is placeholder code to demonstrate what I&#39;m doing with the token\r\n}\r\n\r\npublic ResponseEntity&lt;String&gt; getUserProfile(JwtAuthenticationToken token) {\r\n  String uid = getUidFromToken(token);\r\n  // rest of the code\r\n}\r\n```\r\nSince I require these tokens in a couple of different places, I decided to look into moving the `getUidFromToken` code into a `HandlerMethodArgumentResolver`. The trouble I&#39;m having is that I need a `JwtAuthenticationToken`, but I only get the bearer token from the `Authorization` header as a string.\r\n\r\nIs it possible for me to get that `JwtAuthenticationToken` instead of a string?","title":"How do I get a JwtAuthenticationToken for my HandlerMethodArgumentResolver from the request&#39;s Authorization header?","body":"<p>I have a Spring Boot application that requires a <code>JwtAuthenticationToken</code> passed in a HTTP <code>Authorization</code> header. The header itself provides a bearer token; Spring is doing some magic that I am currently unaware of to convert that bearer token string into a <code>JwtAuthenticationToken</code>. I have some code that extracts the user id from the token, which is used to locate the correct resources on the server.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private String getUidFromToken(JwtAuthenticationToken token) {\n  // this is placeholder code to demonstrate what I'm doing with the token\n}\n\npublic ResponseEntity&lt;String&gt; getUserProfile(JwtAuthenticationToken token) {\n  String uid = getUidFromToken(token);\n  // rest of the code\n}\n</code></pre>\n<p>Since I require these tokens in a couple of different places, I decided to look into moving the <code>getUidFromToken</code> code into a <code>HandlerMethodArgumentResolver</code>. The trouble I'm having is that I need a <code>JwtAuthenticationToken</code>, but I only get the bearer token from the <code>Authorization</code> header as a string.</p>\n<p>Is it possible for me to get that <code>JwtAuthenticationToken</code> instead of a string?</p>\n"},{"tags":["java","apache-camel"],"comments":[{"owner":{"account_id":11715536,"reputation":4839,"user_id":8576169,"display_name":"Bedla"},"score":0,"creation_date":1534020832,"post_id":51798550,"comment_id":90563416,"body_markdown":"Make sure, you have upgraded `camel-http4` dependency to version `2.22.0`. All components must be always imported with same version as `camel-core`.","body":"Make sure, you have upgraded <code>camel-http4</code> dependency to version <code>2.22.0</code>. All components must be always imported with same version as <code>camel-core</code>."},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1534055601,"post_id":51798550,"comment_id":90568144,"body_markdown":"Yes all components are for same version. In Karaf, once you add camel repository of a specific version, all components will also be installed for the same version. It was a fresh Karaf installation with no Camel features, then I installed 2.22.0","body":"Yes all components are for same version. In Karaf, once you add camel repository of a specific version, all components will also be installed for the same version. It was a fresh Karaf installation with no Camel features, then I installed 2.22.0"},{"owner":{"account_id":176018,"reputation":56316,"user_id":406429,"display_name":"Claus Ibsen"},"score":0,"creation_date":1534176788,"post_id":51798550,"comment_id":90607378,"body_markdown":"We fixed a bug on 2.22.0 that goes into 2.22.1 about issue in toD. You can use recipientList as workaround.","body":"We fixed a bug on 2.22.0 that goes into 2.22.1 about issue in toD. You can use recipientList as workaround."},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1534275763,"post_id":51798550,"comment_id":90650661,"body_markdown":"Thank you Claus! appreciate it. Using recipientList at the moment. Will take 2.22.1 when its out.","body":"Thank you Claus! appreciate it. Using recipientList at the moment. Will take 2.22.1 when its out."},{"owner":{"account_id":241879,"reputation":10776,"user_id":512993,"accept_rate":90,"display_name":"Ho&#224;ng Long"},"score":0,"creation_date":1540528912,"post_id":51798550,"comment_id":92907222,"body_markdown":"Hi praveenp, we have the same problem. How did you solve it without ToD?","body":"Hi praveenp, we have the same problem. How did you solve it without ToD?"},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1540634683,"post_id":51798550,"comment_id":92943865,"body_markdown":"You need to use reciepientList. Check the question, I have given example for using recipientList instead of toD. Even though I have shown constant header in the above example, you can set any header dynamically and use that in the https4:// url in the recipientLIst.","body":"You need to use reciepientList. Check the question, I have given example for using recipientList instead of toD. Even though I have shown constant header in the above example, you can set any header dynamically and use that in the https4:// url in the recipientLIst."},{"owner":{"account_id":4202695,"reputation":517,"user_id":3442423,"accept_rate":62,"display_name":"&#216;ystein W."},"score":0,"creation_date":1545222014,"post_id":51798550,"comment_id":94549555,"body_markdown":"Sorry about the late comment, but this is still an issue in 2.23. Did you not add the fix in 2.23, @ClausIbsen","body":"Sorry about the late comment, but this is still an issue in 2.23. Did you not add the fix in 2.23, @ClausIbsen"},{"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"score":0,"creation_date":1564772221,"post_id":51798550,"comment_id":101154051,"body_markdown":"After searching through code, I can see that catalog feature was added sometime after 2.16, and toD seems to be dependent on catalog to load properties from json for the http component. Even though I have not tried this yet, this problem should be solved by installing the camel-catalog feature in osgi container like karaf, or by including it in the maven dependencies like any other camel component. I am unable to find any documentation of this dependency, all I could find was a small section in the camel tooling here: [link](https://camel.apache.org/tools.html)","body":"After searching through code, I can see that catalog feature was added sometime after 2.16, and toD seems to be dependent on catalog to load properties from json for the http component. Even though I have not tried this yet, this problem should be solved by installing the camel-catalog feature in osgi container like karaf, or by including it in the maven dependencies like any other camel component. I am unable to find any documentation of this dependency, all I could find was a small section in the camel tooling here: <a href=\"https://camel.apache.org/tools.html\" rel=\"nofollow noreferrer\">link</a>"}],"answers":[{"tags":[],"owner":{"account_id":11978386,"reputation":1,"user_id":8764897,"display_name":"Massimiliano Fatticcioni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640272770,"creation_date":1640272770,"answer_id":70464064,"question_id":51798550,"body_markdown":"I solved this problem by putting the component inside a header that I used in the toD.\r\nExample:\r\n\r\n    &lt;route&gt;\r\n        &lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n        &lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n            &lt;constant&gt;https4://localhost:9090/&lt;/constant&gt;\r\n        &lt;/setHeader&gt;\r\n        &lt;toD uri=&quot;${headers.SMSURI}&quot; /&gt;\r\n    &lt;/route&gt;","title":"camel-http4 2.22 - toD not working","body":"<p>I solved this problem by putting the component inside a header that I used in the toD.\nExample:</p>\n<pre><code>&lt;route&gt;\n    &lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\n    &lt;setHeader headerName=&quot;SMSURI&quot;&gt;\n        &lt;constant&gt;https4://localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;toD uri=&quot;${headers.SMSURI}&quot; /&gt;\n&lt;/route&gt;\n</code></pre>\n"}],"owner":{"account_id":5824285,"reputation":41,"user_id":4591254,"display_name":"praveenp"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2151,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1640272770,"creation_date":1533981759,"question_id":51798550,"body_markdown":"The camel dynamic uri in dynamic route (toD) seem to have stopped working for me after migrating to 2.22.0 (from 2.16.5). The test route that demonstrates the issue:\r\n\r\n    &lt;route&gt;\r\n    \t&lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n    \t&lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n    \t\t&lt;constant&gt;localhost:9090/&lt;/constant&gt;\r\n    \t&lt;/setHeader&gt;\r\n    \t&lt;toD uri=&quot;https4://${header.SMSURI}?throwExceptionOnFailure=false&quot;/&gt;\r\n    &lt;/route&gt;\r\n\r\nAnd I get the following exception:\r\n\r\n    2018-08-11T14:41:07,770 | INFO  | Camel (testContext) thread #27 - timer://foo | route5                           | 160 - org.apache.camel.camel-core - 2.22.0 | java.lang.IllegalArgumentException: Cannot find endpoint with scheme https4\r\n    \tat org.apache.camel.runtimecatalog.AbstractCamelCatalog.endpointProperties(AbstractCamelCatalog.java:529)\r\n    \tat org.apache.camel.http.common.HttpSendDynamicAware.prepare(HttpSendDynamicAware.java:57)\r\n    \tat org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:118)\r\n    \tat org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)\r\n    \tat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\r\n    \tat org.apache.camel.processor.Pipeline.process(Pipeline.java:138)\r\n    \tat org.apache.camel.processor.Pipeline.process(Pipeline.java:101)\r\n    \tat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\r\n    \tat org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:197)\r\n    \tat org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:79)\r\n    \tat java.util.TimerThread.mainLoop(Timer.java:555)\r\n    \tat java.util.TimerThread.run(Timer.java:505)\r\n\r\n\r\nI know there are two alternative ways for dynamic uri, one is to set Exchange.HTTP_URI and then use the static route &#39;to&#39; with an arbitrary url, the second one is to use reciepientList. However, I do not like the first option of using &#39;to&#39;, as I need to set an arbitrary url. I am currently using the second option, receipientList something like this (Note that setHeader is used here only for demo. The url is dynamically retrieved and set in a processor class in my project):\r\n\r\n    &lt;route&gt;\r\n    \t&lt;from uri=&quot;timer://foo?fixedRate=true&amp;amp;period=1000&quot;/&gt;\r\n    \t&lt;setHeader headerName=&quot;SMSURI&quot;&gt;\r\n    \t\t&lt;constant&gt;localhost:9090/&lt;/constant&gt;\r\n    \t&lt;/setHeader&gt;\r\n    \t&lt;recipientList&gt;\r\n    \t\t&lt;simple&gt;https4://${header.SMSURI}?throwExceptionOnFailure=false&lt;/simple&gt;\r\n    \t&lt;/recipientList&gt;\r\n    &lt;/route&gt;\r\n\r\nand this works. However, I really liked the toD option.\r\n\r\nAlso, camel website says:\r\n\r\n&gt; Dynamic To - out of the box\r\n&gt; \r\n&gt; From Camel 2.16 onwards there is a new &lt;toD&gt; which is a dynamic to.\r\n&gt; See more details at Message Endpoint.\r\n\r\n[http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html][1]\r\n\r\nCan any one help me understand whether the support has been removed for toD with http4? Or this is a bug?\r\n\r\nPS: I am running this from within a Karaf 4.2 container inside OSGI bundle, using blueprint xml.\r\n\r\n\r\n  [1]: http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html","title":"camel-http4 2.22 - toD not working","body":"<p>The camel dynamic uri in dynamic route (toD) seem to have stopped working for me after migrating to 2.22.0 (from 2.16.5). The test route that demonstrates the issue:</p>\n\n<pre><code>&lt;route&gt;\n    &lt;from uri=\"timer://foo?fixedRate=true&amp;amp;period=1000\"/&gt;\n    &lt;setHeader headerName=\"SMSURI\"&gt;\n        &lt;constant&gt;localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;toD uri=\"https4://${header.SMSURI}?throwExceptionOnFailure=false\"/&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>And I get the following exception:</p>\n\n<pre><code>2018-08-11T14:41:07,770 | INFO  | Camel (testContext) thread #27 - timer://foo | route5                           | 160 - org.apache.camel.camel-core - 2.22.0 | java.lang.IllegalArgumentException: Cannot find endpoint with scheme https4\n    at org.apache.camel.runtimecatalog.AbstractCamelCatalog.endpointProperties(AbstractCamelCatalog.java:529)\n    at org.apache.camel.http.common.HttpSendDynamicAware.prepare(HttpSendDynamicAware.java:57)\n    at org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:118)\n    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:138)\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:101)\n    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\n    at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:197)\n    at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:79)\n    at java.util.TimerThread.mainLoop(Timer.java:555)\n    at java.util.TimerThread.run(Timer.java:505)\n</code></pre>\n\n<p>I know there are two alternative ways for dynamic uri, one is to set Exchange.HTTP_URI and then use the static route 'to' with an arbitrary url, the second one is to use reciepientList. However, I do not like the first option of using 'to', as I need to set an arbitrary url. I am currently using the second option, receipientList something like this (Note that setHeader is used here only for demo. The url is dynamically retrieved and set in a processor class in my project):</p>\n\n<pre><code>&lt;route&gt;\n    &lt;from uri=\"timer://foo?fixedRate=true&amp;amp;period=1000\"/&gt;\n    &lt;setHeader headerName=\"SMSURI\"&gt;\n        &lt;constant&gt;localhost:9090/&lt;/constant&gt;\n    &lt;/setHeader&gt;\n    &lt;recipientList&gt;\n        &lt;simple&gt;https4://${header.SMSURI}?throwExceptionOnFailure=false&lt;/simple&gt;\n    &lt;/recipientList&gt;\n&lt;/route&gt;\n</code></pre>\n\n<p>and this works. However, I really liked the toD option.</p>\n\n<p>Also, camel website says:</p>\n\n<blockquote>\n  <p>Dynamic To - out of the box</p>\n  \n  <p>From Camel 2.16 onwards there is a new  which is a dynamic to.\n  See more details at Message Endpoint.</p>\n</blockquote>\n\n<p><a href=\"http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html\" rel=\"nofollow noreferrer\">http://camel.apache.org/how-to-use-a-dynamic-uri-in-to.html</a></p>\n\n<p>Can any one help me understand whether the support has been removed for toD with http4? Or this is a bug?</p>\n\n<p>PS: I am running this from within a Karaf 4.2 container inside OSGI bundle, using blueprint xml.</p>\n"},{"tags":["java","spring","spring-boot","gradle","log4j"],"answers":[{"tags":[],"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640272477,"creation_date":1640272477,"answer_id":70463998,"question_id":70457498,"body_markdown":"Spring Boot does not have a dependency on the potentially vulnerable `log4j-core`. Only on the log4j artifacts `log4j-to-slf4j` and `log4j-api` which are not affected by the recent CVEs:\r\n\r\nhttps://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\r\n\r\nFurthermore, Spring Boot 2.6.2 pulls in the latest releases of both logback (1.2.9) and log4j (2.17.0), which contain fixes for the recently published CVEs:\r\n\r\nhttps://github.com/spring-projects/spring-boot/releases/tag/v2.6.2","title":"I use Springboot. spring-boot-starter-data-jpa depends on log4j. Is it vulnerable?","body":"<p>Spring Boot does not have a dependency on the potentially vulnerable <code>log4j-core</code>. Only on the log4j artifacts <code>log4j-to-slf4j</code> and <code>log4j-api</code> which are not affected by the recent CVEs:</p>\n<p><a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot</a></p>\n<p>Furthermore, Spring Boot 2.6.2 pulls in the latest releases of both logback (1.2.9) and log4j (2.17.0), which contain fixes for the recently published CVEs:</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.6.2\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/releases/tag/v2.6.2</a></p>\n"}],"owner":{"account_id":19191072,"reputation":135,"user_id":14020792,"display_name":"vr_min_chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":301,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1640272477,"creation_date":1640231832,"question_id":70457498,"body_markdown":"Thank you.\r\n\r\nI use Springboot and gradle.\r\nspring-boot-starter-data-jpa depends on log4j.\r\nIs it vulnerable?\r\n\r\nbuild.gradle\r\n```\r\ndependencies {\r\n    compile(&#39;org.springframework.boot:spring-boot-starter-data-jpa:2.6.2&#39;)\r\n}\r\n```\r\n\r\n\r\nI haven&#39;t changed the log output settings in application.properties.\r\n\r\nIf it&#39;s not vulnerable, I want that source.","title":"I use Springboot. spring-boot-starter-data-jpa depends on log4j. Is it vulnerable?","body":"<p>Thank you.</p>\n<p>I use Springboot and gradle.\nspring-boot-starter-data-jpa depends on log4j.\nIs it vulnerable?</p>\n<p>build.gradle</p>\n<pre><code>dependencies {\n    compile('org.springframework.boot:spring-boot-starter-data-jpa:2.6.2')\n}\n</code></pre>\n<p>I haven't changed the log output settings in application.properties.</p>\n<p>If it's not vulnerable, I want that source.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","jpa-2.0","one-to-one"],"comments":[{"owner":{"account_id":10976667,"reputation":1238,"user_id":8065149,"accept_rate":88,"display_name":"cjnash"},"score":0,"creation_date":1639940423,"post_id":70414424,"comment_id":124470927,"body_markdown":"your `Output` there - how are you serializing the data into that object? or is that just a json return from your select statement.","body":"your <code>Output</code> there - how are you serializing the data into that object? or is that just a json return from your select statement."},{"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"score":0,"creation_date":1639943227,"post_id":70414424,"comment_id":124471588,"body_markdown":"@cjnash   It&#39;s the output from my rest controller. from postman.","body":"@cjnash   It&#39;s the output from my rest controller. from postman."},{"owner":{"account_id":10976667,"reputation":1238,"user_id":8065149,"accept_rate":88,"display_name":"cjnash"},"score":0,"creation_date":1639943631,"post_id":70414424,"comment_id":124471689,"body_markdown":"Just a thought here, maybe when the object is getting serialized, the getter() is being called, thus triggering the load. You could check this by debugging and checking what the query returns vs what you are returning via rest.\nI could be wrong though.","body":"Just a thought here, maybe when the object is getting serialized, the getter() is being called, thus triggering the load. You could check this by debugging and checking what the query returns vs what you are returning via rest. I could be wrong though."},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1640207724,"post_id":70414424,"comment_id":124543782,"body_markdown":"Don&#39;t get your question - what did you expect? Jackson will access the property and this causes the association to load. Did you expect something else? What exactly? Also, where are your `@Transactional`?","body":"Don&#39;t get your question - what did you expect? Jackson will access the property and this causes the association to load. Did you expect something else? What exactly? Also, where are your <code>@Transactional</code>?"}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640250855,"creation_date":1639949614,"answer_id":70415506,"question_id":70414424,"body_markdown":"I thought I had the answer about this question, thinking it was just Jackson calling the getter during serialization for response object and that had as a result the fetch of the lazy property but it seems that this is not the case!!\r\n\r\nThis question was a good reason to dig and learn something strange from documentation.\r\n\r\nThe most common ORM vendor is hibernate. So if you read the documentation on hibernate it clearly states that **EAGER type is a must conform** for Hibernate, **but the LAZY fetch type is just a hint that hibernate may or may not follow** **!!**\r\n\r\nFrom the [hibernate doc][1]\r\n\r\n&gt; fetch - FetchType \r\n&gt;\r\n&gt; (defaults to EAGER) Defines whether this attribute\r\n&gt; should be fetched eagerly or lazily. **JPA says that EAGER is a\r\n&gt; requirement to the provider (Hibernate) that the value should be\r\n&gt; fetched when the owner is fetched, while LAZY is merely a hint that\r\n&gt; the value is fetched when the attribute is accessed**. **Hibernate ignores\r\n&gt; this setting for basic types unless you are using bytecode\r\n&gt; enhancement**. See the Bytecode Enhancement for additional information\r\n&gt; on fetching and on bytecode enhancement.\r\n\r\nAlso according to the doc,  you have to follow at least for now the bytecode enhancment in order for lazy loading to work\r\n\r\n&gt; As a hopefully temporary legacy hold-over, it is currently required\r\n&gt; that all lazy singular associations (many-to-one and one-to-one) also\r\n&gt; include **@LazyToOne(LazyToOneOption.NO_PROXY)**. The plan is to relax\r\n&gt; that requirement later.\r\n\r\nAlso according to [hibernate performance enhancement doc][2] you also need a configuration property for hibernate, so in a Spring Boot App, please also include the following in your application.yml or properties file.\r\n\r\n    hibernate.enhancer.enableLazyInitialization = true\r\n\r\nAfter you include this property, your entity must be updated to \r\n\r\n    @Entity\r\n    public class User extends AbstractEntity implements Serializable{\r\n    \r\n        // Other fields related to user entity go here ..\r\n    \r\n        @LazyToOne(LazyToOneOption.NO_PROXY)  &lt;------\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n        private Account account;\r\n    }\r\n\r\n    @Entity\r\n    public class Account extends AbstractEntity implements Serializable{\r\n    \r\n        // fields like account#, balance etc goes here..\r\n    \r\n        @LazyToOne(LazyToOneOption.NO_PROXY) &lt;-----\r\n        @OneToOne (fetch = FetchType.LAZY)\r\n        private User user;\r\n    \r\n    }\r\n\r\nAll these are needed just for hibernate to enable the lazy loading functionality. \r\n\r\nThen you would still see it in your response, because Jackson would call the getter method while serializing so it will force hibernate to fetch the value. So you also need to inform jackson to not use this getter during serialization.\r\n\r\nSo you must also update\r\n\r\n      @Entity\r\n      public class User extends AbstractEntity implements Serializable{\r\n    \r\n        @JsonIgnore &lt;--------\r\n        @JsonProperty(access =  JsonProperty.Access.WRITE_ONLY) &lt;-------\r\n        @LazyToOne(LazyToOneOption.NO_PROXY) \r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n        private Account account; \r\n\r\nHopefully after all this should you be able to not see the account response because of lazy loading.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#basic-column-annotation\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>I thought I had the answer about this question, thinking it was just Jackson calling the getter during serialization for response object and that had as a result the fetch of the lazy property but it seems that this is not the case!!</p>\n<p>This question was a good reason to dig and learn something strange from documentation.</p>\n<p>The most common ORM vendor is hibernate. So if you read the documentation on hibernate it clearly states that <strong>EAGER type is a must conform</strong> for Hibernate, <strong>but the LAZY fetch type is just a hint that hibernate may or may not follow</strong> <strong>!!</strong></p>\n<p>From the <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#basic-column-annotation\" rel=\"nofollow noreferrer\">hibernate doc</a></p>\n<blockquote>\n<p>fetch - FetchType</p>\n<p>(defaults to EAGER) Defines whether this attribute\nshould be fetched eagerly or lazily. <strong>JPA says that EAGER is a\nrequirement to the provider (Hibernate) that the value should be\nfetched when the owner is fetched, while LAZY is merely a hint that\nthe value is fetched when the attribute is accessed</strong>. <strong>Hibernate ignores\nthis setting for basic types unless you are using bytecode\nenhancement</strong>. See the Bytecode Enhancement for additional information\non fetching and on bytecode enhancement.</p>\n</blockquote>\n<p>Also according to the doc,  you have to follow at least for now the bytecode enhancment in order for lazy loading to work</p>\n<blockquote>\n<p>As a hopefully temporary legacy hold-over, it is currently required\nthat all lazy singular associations (many-to-one and one-to-one) also\ninclude <strong>@LazyToOne(LazyToOneOption.NO_PROXY)</strong>. The plan is to relax\nthat requirement later.</p>\n</blockquote>\n<p>Also according to <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement\" rel=\"nofollow noreferrer\">hibernate performance enhancement doc</a> you also need a configuration property for hibernate, so in a Spring Boot App, please also include the following in your application.yml or properties file.</p>\n<pre><code>hibernate.enhancer.enableLazyInitialization = true\n</code></pre>\n<p>After you include this property, your entity must be updated to</p>\n<pre><code>@Entity\npublic class User extends AbstractEntity implements Serializable{\n\n    // Other fields related to user entity go here ..\n\n    @LazyToOne(LazyToOneOption.NO_PROXY)  &lt;------\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account;\n}\n\n@Entity\npublic class Account extends AbstractEntity implements Serializable{\n\n    // fields like account#, balance etc goes here..\n\n    @LazyToOne(LazyToOneOption.NO_PROXY) &lt;-----\n    @OneToOne (fetch = FetchType.LAZY)\n    private User user;\n\n}\n</code></pre>\n<p>All these are needed just for hibernate to enable the lazy loading functionality.</p>\n<p>Then you would still see it in your response, because Jackson would call the getter method while serializing so it will force hibernate to fetch the value. So you also need to inform jackson to not use this getter during serialization.</p>\n<p>So you must also update</p>\n<pre><code>  @Entity\n  public class User extends AbstractEntity implements Serializable{\n\n    @JsonIgnore &lt;--------\n    @JsonProperty(access =  JsonProperty.Access.WRITE_ONLY) &lt;-------\n    @LazyToOne(LazyToOneOption.NO_PROXY) \n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account; \n</code></pre>\n<p>Hopefully after all this should you be able to not see the account response because of lazy loading.</p>\n"},{"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640272099,"creation_date":1640208126,"answer_id":70455238,"question_id":70414424,"body_markdown":"It&#39;s unfortunate that the question is misleading and it takes many comments to find out what you&#39;re asking. Finally I understand - you see the field in JSON and you don&#39;t want to. This is a purely Jackson-related question and Hibernate has nothing to do with it.\r\n\r\nThere are several ways you can take:\r\n\r\n### Use DTO\r\n\r\nThere&#39;s a good reason we don&#39;t use our Entities as part of JSON serialization - exactly because it&#39;s rare that they satisfy our JSON requirements. \r\n\r\nSo instead we create a special DTO class which maps exactly how we need it for a particular endpoint. We convert our Entity to the DTO (and it will not include `account` field) and then serialize DTO.\r\n\r\n### Using Jackson Views\r\n\r\nJackson has a notion of a [JsonView][1] - it lets you map the same object differently depending on the view that you request. This way you can make `account` field invisible to that particular endpoint.\r\n\r\n### Ignore properties\r\n\r\nAs was already hinted in the other response - you can `@JsonIgnore` the property or rid of its visibility or making it deserialize-only with WRITE_ONLY.\r\n\r\n### Jackson Hibernate module\r\n\r\nJackson has &quot;plugins&quot; specific for Hibernate: [jackson-datatype-hibernate][2]. They allow to be configured to ignore lazy fields and not initialize them. In such case Jackson will serialize null ([HibernateXModule.Feature][3]).\r\n\r\nThis is probably the worst option of all because you really don&#39;t want to tie how you optimize your work with DB and your presentation layer.\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonView.html\r\n  [2]: https://github.com/FasterXML/jackson-datatype-hibernate\r\n  [3]: http://fasterxml.github.io/jackson-datatype-hibernate/javadoc/h5/2.13/com/fasterxml/jackson/datatype/hibernate5/Hibernate5Module.Feature.html","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>It's unfortunate that the question is misleading and it takes many comments to find out what you're asking. Finally I understand - you see the field in JSON and you don't want to. This is a purely Jackson-related question and Hibernate has nothing to do with it.</p>\n<p>There are several ways you can take:</p>\n<h3>Use DTO</h3>\n<p>There's a good reason we don't use our Entities as part of JSON serialization - exactly because it's rare that they satisfy our JSON requirements.</p>\n<p>So instead we create a special DTO class which maps exactly how we need it for a particular endpoint. We convert our Entity to the DTO (and it will not include <code>account</code> field) and then serialize DTO.</p>\n<h3>Using Jackson Views</h3>\n<p>Jackson has a notion of a <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonView.html\" rel=\"nofollow noreferrer\">JsonView</a> - it lets you map the same object differently depending on the view that you request. This way you can make <code>account</code> field invisible to that particular endpoint.</p>\n<h3>Ignore properties</h3>\n<p>As was already hinted in the other response - you can <code>@JsonIgnore</code> the property or rid of its visibility or making it deserialize-only with WRITE_ONLY.</p>\n<h3>Jackson Hibernate module</h3>\n<p>Jackson has &quot;plugins&quot; specific for Hibernate: <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">jackson-datatype-hibernate</a>. They allow to be configured to ignore lazy fields and not initialize them. In such case Jackson will serialize null (<a href=\"http://fasterxml.github.io/jackson-datatype-hibernate/javadoc/h5/2.13/com/fasterxml/jackson/datatype/hibernate5/Hibernate5Module.Feature.html\" rel=\"nofollow noreferrer\">HibernateXModule.Feature</a>).</p>\n<p>This is probably the worst option of all because you really don't want to tie how you optimize your work with DB and your presentation layer.</p>\n"}],"owner":{"account_id":5449054,"reputation":1020,"user_id":4334502,"accept_rate":30,"display_name":"ever alian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2267,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1640272099,"creation_date":1639940043,"question_id":70414424,"body_markdown":"I&#39;m using JPA2 and Springboot2X. Trying to define a simple one-to-one relationship in `User` and `Account` tables.\r\n`User` is the parent while `Account` is the child. The relationship is from parent to child. Followed [this][1].\r\n\r\n`User` table has a column `account_no` to hold the account number which is the primary key of the `Account` table. So `User` holds the foreign key.\r\n\r\n    @Entity\r\n    public class Account extends AbstractEntity implements Serializable{\r\n\r\n        // fields like account#, balance etc goes here..\r\n\r\n        @OneToOne (fetch = FetchType.LAZY)\r\n\t    private User user;\r\n\t\r\n    }\r\n\r\n    @Entity\r\n    public class User extends AbstractEntity implements Serializable{\r\n\r\n        // Other fields related to user entity go here ..\r\n\r\n        @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\r\n\t    private Account account;\r\n    }\r\n\r\n\r\nSaving is working properly. But when I fetch a user ( `User user =  userRp.findByUserID(userid);`), I get data from both tables. My question is when I define `fetch = FetchType.LAZY` why the account table data is fetching? I only want the user data to be in the output as when I run the select query in the `User` table.\r\n\r\nOutput : \r\n\r\n        {\r\n        &quot;id&quot;: 1,\r\n        &quot;userID&quot;: &quot;xxxxx&quot;,\r\n        &quot;firstName&quot;: &quot;Dsd&quot;,\r\n        &quot;llastName&quot;: &quot;cccc&quot;,\r\n        &quot;email&quot;: &quot;danqsaa@brown&quot;,\r\n        &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n        &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n        &quot;account&quot;: {\r\n            &quot;id&quot;: 2,           \r\n            &quot;accountNo&quot;: 6848982326,\r\n            &quot;balance&quot;: 4000.0,\r\n            &quot;creationUser&quot;: &quot;xxx&quot;,\r\n            &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n            &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\r\n            &quot;transactions&quot;: []\r\n        }\r\n    }\r\nDB output\r\n[![enter image description here][2]][2]\r\n\r\n[![enter image description here][3]][3]\r\n-----\r\nAdded below RestController, Service, and Repo details.\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        @GetMapping(&quot;/users/{userID}&quot;)\r\n        \tpublic ResponseEntity&lt;Object&gt; getUser(@PathVariable(&quot;userID&quot;) String userID){\r\n        \t\t       return new ResponseEntity&lt;&gt;(userServiceImpl.getUserByID(userID), HttpStatus.OK)); \r\n        \t}\r\n    }\r\n\r\n    @Service\r\n    public class UserService {\r\n    \r\n     // injected user repo\r\n    public User getUserByID(String userID){\r\n    \t\treturn  userRepo.findByUserID(userID);\t\t\r\n    \t}\r\n    }\r\n\r\n    public interface UsersRepository extends CrudRepository&lt;User, String&gt; {\r\n         User findByUserID(String userID);\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/8214973/which-way-should-a-foreign-key-go-in-a-one-to-one-relationship\r\n  [2]: https://i.stack.imgur.com/8DXNJ.png\r\n  [3]: https://i.stack.imgur.com/gJvpM.png\r\n\r\n","title":"FetchType.LAZY not working for @OneToOne relation","body":"<p>I'm using JPA2 and Springboot2X. Trying to define a simple one-to-one relationship in <code>User</code> and <code>Account</code> tables.\n<code>User</code> is the parent while <code>Account</code> is the child. The relationship is from parent to child. Followed <a href=\"https://stackoverflow.com/questions/8214973/which-way-should-a-foreign-key-go-in-a-one-to-one-relationship\">this</a>.</p>\n<p><code>User</code> table has a column <code>account_no</code> to hold the account number which is the primary key of the <code>Account</code> table. So <code>User</code> holds the foreign key.</p>\n<pre><code>@Entity\npublic class Account extends AbstractEntity implements Serializable{\n\n    // fields like account#, balance etc goes here..\n\n    @OneToOne (fetch = FetchType.LAZY)\n    private User user;\n\n}\n\n@Entity\npublic class User extends AbstractEntity implements Serializable{\n\n    // Other fields related to user entity go here ..\n\n    @OneToOne(cascade = CascadeType.ALL, fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;account_no&quot;, referencedColumnName = &quot;account_number&quot;)\n    private Account account;\n}\n</code></pre>\n<p>Saving is working properly. But when I fetch a user ( <code>User user =  userRp.findByUserID(userid);</code>), I get data from both tables. My question is when I define <code>fetch = FetchType.LAZY</code> why the account table data is fetching? I only want the user data to be in the output as when I run the select query in the <code>User</code> table.</p>\n<p>Output :</p>\n<pre><code>    {\n    &quot;id&quot;: 1,\n    &quot;userID&quot;: &quot;xxxxx&quot;,\n    &quot;firstName&quot;: &quot;Dsd&quot;,\n    &quot;llastName&quot;: &quot;cccc&quot;,\n    &quot;email&quot;: &quot;danqsaa@brown&quot;,\n    &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\n    &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\n    &quot;account&quot;: {\n        &quot;id&quot;: 2,           \n        &quot;accountNo&quot;: 6848982326,\n        &quot;balance&quot;: 4000.0,\n        &quot;creationUser&quot;: &quot;xxx&quot;,\n        &quot;creation_date&quot;: &quot;2021-12-19 19:41&quot;,\n        &quot;modified_date&quot;: &quot;2021-12-19 19:41&quot;,\n        &quot;transactions&quot;: []\n    }\n}\n</code></pre>\n<p>DB output\n<a href=\"https://i.stack.imgur.com/8DXNJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DXNJ.png\" alt=\"enter image description here\" /></a></p>\n<h2><a href=\"https://i.stack.imgur.com/gJvpM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gJvpM.png\" alt=\"enter image description here\" /></a></h2>\n<p>Added below RestController, Service, and Repo details.</p>\n<pre><code>@RestController\npublic class UserController {\n\n    @GetMapping(&quot;/users/{userID}&quot;)\n        public ResponseEntity&lt;Object&gt; getUser(@PathVariable(&quot;userID&quot;) String userID){\n                   return new ResponseEntity&lt;&gt;(userServiceImpl.getUserByID(userID), HttpStatus.OK)); \n        }\n}\n\n@Service\npublic class UserService {\n\n // injected user repo\npublic User getUserByID(String userID){\n        return  userRepo.findByUserID(userID);      \n    }\n}\n\npublic interface UsersRepository extends CrudRepository&lt;User, String&gt; {\n     User findByUserID(String userID);\n}\n</code></pre>\n"},{"tags":["java","java-stream","gremlin","graph-databases","tinkerpop"],"comments":[{"owner":{"account_id":7115613,"reputation":14979,"user_id":5442034,"display_name":"Kelvin Lawrence"},"score":0,"creation_date":1640193639,"post_id":70452707,"comment_id":124539545,"body_markdown":"Have you tried using `toList()` rather than `iterate()` ? The `iterate` terminal step includes an implicit `none` step and therefore does not return any result to the caller. Here is a related question. https://stackoverflow.com/questions/59024185/tinkerpop-gremlin-python-next-vs-iterate","body":"Have you tried using <code>toList()</code> rather than <code>iterate()</code> ? The <code>iterate</code> terminal step includes an implicit <code>none</code> step and therefore does not return any result to the caller. Here is a related question. <a href=\"https://stackoverflow.com/questions/59024185/tinkerpop-gremlin-python-next-vs-iterate\" title=\"tinkerpop gremlin python next vs iterate\">stackoverflow.com/questions/59024185/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640193964,"creation_date":1640193964,"answer_id":70452874,"question_id":70452707,"body_markdown":"When you call `iterate()` it returns a `GraphTraversal` and you can then call `toStream()` on that, but it will always be empty. You should omit the `iterate()` if you intend to return values to your `Stream`. In short, simply  do `values().toStream()`.","title":"Convert GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; into Java8 stream","body":"<p>When you call <code>iterate()</code> it returns a <code>GraphTraversal</code> and you can then call <code>toStream()</code> on that, but it will always be empty. You should omit the <code>iterate()</code> if you intend to return values to your <code>Stream</code>. In short, simply  do <code>values().toStream()</code>.</p>\n"}],"owner":{"account_id":8621268,"reputation":953,"user_id":6456107,"display_name":"Alter"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70452874,"answer_count":1,"score":0,"last_activity_date":1640271314,"creation_date":1640193181,"question_id":70452707,"body_markdown":"I have a result of a query to `graphDB` which returns `GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; values`. By using the default methods `values.iterate().toStream()` it should return a Stream of `Stream&lt;Map&lt;Object, List&gt;&gt;` which I can handle as a Java8 stream, but for some reason, it does not work, repeat, by using the default methods from gemlin API to get the stream. \r\n\r\nNote: By using a `while` I can iterate over it, that&#39;s fine, but I need to do some more complex operations that will be simplified by using `Java8 Streams`, but, as I said, is not working, even using `tinkerpop` default methods. Any idea?\r\n\r\nThere are no errors, but the stream is empty for some reason.","title":"Convert GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; into Java8 stream","body":"<p>I have a result of a query to <code>graphDB</code> which returns <code>GraphTraversal&lt;Vertex, Map&lt;Object, List&gt;&gt; values</code>. By using the default methods <code>values.iterate().toStream()</code> it should return a Stream of <code>Stream&lt;Map&lt;Object, List&gt;&gt;</code> which I can handle as a Java8 stream, but for some reason, it does not work, repeat, by using the default methods from gemlin API to get the stream.</p>\n<p>Note: By using a <code>while</code> I can iterate over it, that's fine, but I need to do some more complex operations that will be simplified by using <code>Java8 Streams</code>, but, as I said, is not working, even using <code>tinkerpop</code> default methods. Any idea?</p>\n<p>There are no errors, but the stream is empty for some reason.</p>\n"},{"tags":["java","spring-boot","spring-profiles"],"comments":[{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1571238426,"post_id":58416384,"comment_id":103175756,"body_markdown":"Can you try `spring.profiles.active=dev`?","body":"Can you try <code>spring.profiles.active=dev</code>?"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571238538,"post_id":58416384,"comment_id":103175835,"body_markdown":"@HasanCanSaral Are you meaning that add `spring.profile.active=dev` in `application-dev.properties` ?","body":"@HasanCanSaral Are you meaning that add <code>spring.profile.active=dev</code> in <code>application-dev.properties</code> ?"},{"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"score":0,"creation_date":1571238580,"post_id":58416384,"comment_id":103175859,"body_markdown":"Yes. It is working as expected. If you had `spring.profiles.active=someOtherProfile` you would have the `someOtherProfile` activated. If you have nothing, by `spring.profiles.default` you set your fallback to `dev`.","body":"Yes. It is working as expected. If you had <code>spring.profiles.active=someOtherProfile</code> you would have the <code>someOtherProfile</code> activated. If you have nothing, by <code>spring.profiles.default</code> you set your fallback to <code>dev</code>."},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571238769,"post_id":58416384,"comment_id":103175975,"body_markdown":"@HasanCanSaral So, I didn&#39;t set up *any active profile*. and I would expect `dev` will be activate. Because default profile is `dev`","body":"@HasanCanSaral So, I didn&#39;t set up <i>any active profile</i>. and I would expect <code>dev</code> will be activate. Because default profile is <code>dev</code>"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571239920,"post_id":58416384,"comment_id":103176631,"body_markdown":"@Antoniossss I can&#39;t say Dev is activated. Dev is set up as default. \nAnd if there is no activated profile, default profile might be activated. But it is not.\nIt&#39;s a problem","body":"@Antoniossss I can&#39;t say Dev is activated. Dev is set up as default.  And if there is no activated profile, default profile might be activated. But it is not. It&#39;s a problem"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1571239922,"post_id":58416384,"comment_id":103176633,"body_markdown":"change `spring.profiles.default= dev`  to `spring.profiles.default=dev` ?? Idk should work just like that imho.","body":"change <code>spring.profiles.default= dev</code>  to <code>spring.profiles.default=dev</code> ?? Idk should work just like that imho."},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571239984,"post_id":58416384,"comment_id":103176667,"body_markdown":"@Antoniossss still doesn&#39;t work :-l ...","body":"@Antoniossss still doesn&#39;t work :-l ..."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571241491,"post_id":58416384,"comment_id":103177466,"body_markdown":"can you point me to docs where do you find this property `spring.profile.default ` ? @MinwooKang","body":"can you point me to docs where do you find this property <code>spring.profile.default </code> ? @MinwooKang"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571241916,"post_id":58416384,"comment_id":103177646,"body_markdown":"@Deadpool Actually I was following this article(https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond), but give me some time to find from docs.","body":"@Deadpool Actually I was following this article(<a href=\"https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\" rel=\"nofollow noreferrer\">javacodegeeks.com/2019/07/&hellip;</a>), but give me some time to find from docs."},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571242003,"post_id":58416384,"comment_id":103177690,"body_markdown":"I don&#39;t think spring has that property, you need to use `spring.profiles.active` @MinwooKang https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","body":"I don&#39;t think spring has that property, you need to use <code>spring.profiles.active</code> @MinwooKang <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":1,"creation_date":1571251356,"post_id":58416384,"comment_id":103181903,"body_markdown":"It is/was a bug - https://github.com/spring-projects/spring-boot/issues/1219","body":"It is/was a bug - <a href=\"https://github.com/spring-projects/spring-boot/issues/1219\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/1219</a>"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571271114,"post_id":58416384,"comment_id":103188530,"body_markdown":"@Deadpool FYI : http://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default","body":"@Deadpool FYI : <a href=\"http://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/4.2.0.RELEASE/&hellip;</a>"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571271272,"post_id":58416384,"comment_id":103188557,"body_markdown":"it is new thing to know @MinwooKang thanks","body":"it is new thing to know @MinwooKang thanks"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1571271466,"post_id":58416384,"comment_id":103188599,"body_markdown":"so you have set this property `spring.profile.default = dev` in application.properties? or how are you passing it to spring application? @MinwooKang","body":"so you have set this property <code>spring.profile.default = dev</code> in application.properties? or how are you passing it to spring application? @MinwooKang"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571272003,"post_id":58416384,"comment_id":103188705,"body_markdown":"Yes I have set this property to change default profiles. But It didn&#39;t work what I expected.\n\nBut I&#39;ve found out how to change default profile. I will update in description","body":"Yes I have set this property to change default profiles. But It didn&#39;t work what I expected.  But I&#39;ve found out how to change default profile. I will update in description"},{"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"score":0,"creation_date":1571272614,"post_id":58416384,"comment_id":103188833,"body_markdown":"@Deadpool Yes that&#39;s the answer what I want :) Thanks","body":"@Deadpool Yes that&#39;s the answer what I want :) Thanks"}],"answers":[{"tags":[],"owner":{"account_id":7112771,"reputation":6072,"user_id":5440084,"display_name":"Haagenti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571239358,"creation_date":1571238528,"answer_id":58416501,"question_id":58416384,"body_markdown":"You have only configured the default profile.\r\nYou need to set an active profile like `spring.profiles.active=dev`\r\nin your app properties. For injecting current active profile, \r\n\r\n    @Value(&quot;${spring.profiles.active}&quot;)\r\n    private String currentActiveEnv;","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>You have only configured the default profile.\nYou need to set an active profile like <code>spring.profiles.active=dev</code>\nin your app properties. For injecting current active profile, </p>\n\n<pre><code>@Value(\"${spring.profiles.active}\")\nprivate String currentActiveEnv;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":533485,"reputation":2992,"user_id":903885,"accept_rate":87,"display_name":"Hasan Can Saral"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571238689,"creation_date":1571238689,"answer_id":58416545,"question_id":58416384,"body_markdown":"You set your default profile fallback to `dev` with `spring.profiles.default=dev`. If you had `spring.profiles.active=someOtherProfile`, you would have `someOtherProfile` activated.\r\n\r\n&gt; 2019-10-16 23:17:02.926 INFO 64099 --- [ main]\r\n&gt; c.e.s.SpringbootdemoappApplication : No active profile set, falling\r\n&gt; back to default profiles: dev\r\n\r\nThis log says that `dev` profile is the active one, since you don&#39;t have any explicit profile activated.","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>You set your default profile fallback to <code>dev</code> with <code>spring.profiles.default=dev</code>. If you had <code>spring.profiles.active=someOtherProfile</code>, you would have <code>someOtherProfile</code> activated.</p>\n\n<blockquote>\n  <p>2019-10-16 23:17:02.926 INFO 64099 --- [ main]\n  c.e.s.SpringbootdemoappApplication : No active profile set, falling\n  back to default profiles: dev</p>\n</blockquote>\n\n<p>This log says that <code>dev</code> profile is the active one, since you don't have any explicit profile activated.</p>\n"},{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1571272268,"creation_date":1571272268,"answer_id":58423307,"question_id":58416384,"body_markdown":"The problem is you are passing this properties after application is loaded, you need to provide this property while application is booting up\r\n\r\n**Pass it as JVM args**\r\n\r\n    java -jar -Dspring.profiles.default=dev myproject.jar\r\n\r\n**Pass as environment variable**\r\n\r\n    java -jar myproject.jar --spring.profiles.default=dev\r\n\r\n**System variable**\r\n\r\n    SPRING_PROFILES_DEFAULT=dev","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>The problem is you are passing this properties after application is loaded, you need to provide this property while application is booting up</p>\n\n<p><strong>Pass it as JVM args</strong></p>\n\n<pre><code>java -jar -Dspring.profiles.default=dev myproject.jar\n</code></pre>\n\n<p><strong>Pass as environment variable</strong></p>\n\n<pre><code>java -jar myproject.jar --spring.profiles.default=dev\n</code></pre>\n\n<p><strong>System variable</strong></p>\n\n<pre><code>SPRING_PROFILES_DEFAULT=dev\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1649239,"reputation":51,"user_id":1520139,"display_name":"Subhash Gaikwad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640271063,"creation_date":1640271063,"answer_id":70463728,"question_id":58416384,"body_markdown":"Please go through with following link -\r\n\r\nhttps://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f\r\n\r\nthat guy has explained well \r\n\r\nand to verify the or command for generate the build follow the following command \r\n\r\n&gt; `mvn -Ppreprod package -DskipTests clean verify`","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p>Please go through with following link -</p>\n<p><a href=\"https://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f\" rel=\"nofollow noreferrer\">https://medium.com/@khandkesoham7/profiling-with-spring-boot-408b33f8a25f</a></p>\n<p>that guy has explained well</p>\n<p>and to verify the or command for generate the build follow the following command</p>\n<blockquote>\n<p><code>mvn -Ppreprod package -DskipTests clean verify</code></p>\n</blockquote>\n"}],"owner":{"account_id":9188179,"reputation":75,"user_id":9346490,"display_name":"Minwoo Kang"},"comment_count":16,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21278,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":58423307,"answer_count":4,"score":5,"last_activity_date":1640271063,"creation_date":1571238131,"question_id":58416384,"body_markdown":"**FYI : I swear there is no activating profile configuration such as -D or run configuration**\r\n\r\n\r\n#Goal#\r\n  When application is booted up without any activating profile, the `dev` profile is activated as a default.\r\n\r\n#Problem#\r\n\r\nI&#39;ve set `spring.profile.default = dev` , and I would expect that the dev profile is activated. But it is not.\r\n\r\n\r\n\r\n#What I did#\r\n`Run Environment`\r\n\r\nSpring-Boot-version : 2.1.2 Release\r\n\r\n`What I&#39;m referred`\r\n\r\n1) How to use profiles in Spring Boot Application - \r\nhttps://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\r\n\r\n\r\n\r\n**Here&#39;s Code What I did**\r\n\r\n\r\n\r\n`/resources/application.properties`\r\n```\r\nspring.profiles.default= dev\r\n\r\napplication.environment=This is a &quot;Default&quot; Environment\r\n```\r\n\r\n\r\n`/resources/application-dev.properties`\r\n```\r\napplication.environment=This is a &quot;dev&quot; Environment\r\nserver.port= 8082\r\n```\r\n\r\n\r\n`/ProfileController.java`\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1&quot;)\r\npublic class ProfileController {\r\n\r\n    @Value(&quot;${application.environment}&quot;)\r\n    private String applicationEnv;\r\n\r\n    @GetMapping\r\n    public String getApplicationEnv(){\r\n        return applicationEnv;\r\n    }\r\n}\r\n```\r\n\r\n#Result#\r\n\r\nlocalhost/v1 =&gt; This is a &quot;Default&quot; Environment\r\n\r\nAnd \r\n\r\nI&#39;ve found out the default profile is set up as `dev` correctly.\r\n\r\nThis is my spring-boot log.\r\n&gt;2019-10-16 23:17:02.926  INFO 64099 --- [           main] c.e.s.SpringbootdemoappApplication       : No active profile set, falling back to default profiles: dev\r\n\r\n#Add another log for server port#\r\n\r\n&gt;2019-10-17 00:25:03.837  INFO 68318 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8083 (http)\r\n\r\nThe reason that I add is it doesn&#39;t seem a problem related with Injection.\r\n\r\n\r\n\r\n#Time to Close this question#\r\n\r\nThe first goal that I want to achieve is change default profile.\r\nFrom spring docs(https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default), default profile can be changed as setting `spring.profiles.default` in `application.properties`.\r\n\r\nBut it seems kind of bug (Thanks @Antoniossss). Even if I&#39;ve set that in `application.properties` and the console showed `No active profile set, falling back to default profiles: dev`.\r\nHowever still `dev` profile wasn&#39;t activated.\r\n\r\nThe thing that I&#39;ve found out is **changing default profile should be done before loading application.properties**.\r\n\r\nIt means if changing default profile is described in `application.properties`, it&#39;s too late.(IDK why though, I can&#39;t figure out because there are so many layers in Spring ...)\r\nIf d&#233;faut profile is set up using `-Dspring.default.profile = dev` , it&#39;s working properly. \r\n\r\nFrom https://github.com/spring-projects/spring-boot/issues/1219:\r\n\r\n&gt;You can&#39;t change the default profile by declaring it in a config file. It has to be in place before the config files are read.\r\n\r\n","title":"spring boot not loading default profile while using spring.profile.default in application.properties","body":"<p><strong>FYI : I swear there is no activating profile configuration such as -D or run configuration</strong></p>\n\n<h1>Goal</h1>\n\n<p>When application is booted up without any activating profile, the <code>dev</code> profile is activated as a default.</p>\n\n<h1>Problem</h1>\n\n<p>I've set <code>spring.profile.default = dev</code> , and I would expect that the dev profile is activated. But it is not.</p>\n\n<h1>What I did</h1>\n\n<p><code>Run Environment</code></p>\n\n<p>Spring-Boot-version : 2.1.2 Release</p>\n\n<p><code>What I'm referred</code></p>\n\n<p>1) How to use profiles in Spring Boot Application - \n<a href=\"https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond\" rel=\"nofollow noreferrer\">https://www.javacodegeeks.com/2019/07/profiles-spring-boot-application.html#respond</a></p>\n\n<p><strong>Here's Code What I did</strong></p>\n\n<p><code>/resources/application.properties</code></p>\n\n<pre><code>spring.profiles.default= dev\n\napplication.environment=This is a \"Default\" Environment\n</code></pre>\n\n<p><code>/resources/application-dev.properties</code></p>\n\n<pre><code>application.environment=This is a \"dev\" Environment\nserver.port= 8082\n</code></pre>\n\n<p><code>/ProfileController.java</code></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/v1\")\npublic class ProfileController {\n\n    @Value(\"${application.environment}\")\n    private String applicationEnv;\n\n    @GetMapping\n    public String getApplicationEnv(){\n        return applicationEnv;\n    }\n}\n</code></pre>\n\n<h1>Result</h1>\n\n<p>localhost/v1 => This is a \"Default\" Environment</p>\n\n<p>And </p>\n\n<p>I've found out the default profile is set up as <code>dev</code> correctly.</p>\n\n<p>This is my spring-boot log.</p>\n\n<blockquote>\n  <p>2019-10-16 23:17:02.926  INFO 64099 --- [           main] c.e.s.SpringbootdemoappApplication       : No active profile set, falling back to default profiles: dev</p>\n</blockquote>\n\n<h1>Add another log for server port</h1>\n\n<blockquote>\n  <p>2019-10-17 00:25:03.837  INFO 68318 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8083 (http)</p>\n</blockquote>\n\n<p>The reason that I add is it doesn't seem a problem related with Injection.</p>\n\n<h1>Time to Close this question</h1>\n\n<p>The first goal that I want to achieve is change default profile.\nFrom spring docs(<a href=\"https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/4.2.0.RELEASE/spring-framework-reference/htmlsingle/#beans-definition-profiles-default</a>), default profile can be changed as setting <code>spring.profiles.default</code> in <code>application.properties</code>.</p>\n\n<p>But it seems kind of bug (Thanks @Antoniossss). Even if I've set that in <code>application.properties</code> and the console showed <code>No active profile set, falling back to default profiles: dev</code>.\nHowever still <code>dev</code> profile wasn't activated.</p>\n\n<p>The thing that I've found out is <strong>changing default profile should be done before loading application.properties</strong>.</p>\n\n<p>It means if changing default profile is described in <code>application.properties</code>, it's too late.(IDK why though, I can't figure out because there are so many layers in Spring ...)\nIf défaut profile is set up using <code>-Dspring.default.profile = dev</code> , it's working properly. </p>\n\n<p>From <a href=\"https://github.com/spring-projects/spring-boot/issues/1219\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/1219</a>:</p>\n\n<blockquote>\n  <p>You can't change the default profile by declaring it in a config file. It has to be in place before the config files are read.</p>\n</blockquote>\n"},{"tags":["java","swing","jtextfield","jcombobox"],"comments":[{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640261804,"post_id":70460744,"comment_id":124555521,"body_markdown":"That does not help. That method lets you edit the textfield, but only with text that is already in the drop-down, which is exactly my problem. My combobox is already set as editable.","body":"That does not help. That method lets you edit the textfield, but only with text that is already in the drop-down, which is exactly my problem. My combobox is already set as editable."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1640269839,"post_id":70460744,"comment_id":124558245,"body_markdown":"Perhaps what you really need is an [auto-complete JTextField](http://www.java2s.com/Code/Java/Swing-JFC/AutocompleteTextField.htm).  It&#39;s hard to tell without your editing your question to include a [mre].","body":"Perhaps what you really need is an <a href=\"http://www.java2s.com/Code/Java/Swing-JFC/AutocompleteTextField.htm\" rel=\"nofollow noreferrer\">auto-complete JTextField</a>.  It&#39;s hard to tell without your editing your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640271270,"post_id":70460744,"comment_id":124558757,"body_markdown":"See my edited post. Does that still contain the dropdown feature?","body":"See my edited post. Does that still contain the dropdown feature?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1640271726,"post_id":70460744,"comment_id":124558921,"body_markdown":"Okay, why are the search results in a `JComboBox`?  What happens when a user selects one of the search results?  It seems to me like you need a separate `JTextField` and a non-editable `JComboBox`.","body":"Okay, why are the search results in a <code>JComboBox</code>?  What happens when a user selects one of the search results?  It seems to me like you need a separate <code>JTextField</code> and a non-editable <code>JComboBox</code>."},{"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"score":0,"creation_date":1640272662,"post_id":70460744,"comment_id":124559275,"body_markdown":"Because I wanted the dropdown feature which doesn&#39;t come with a `JTextField `, but using a separate `JTextField` and a non-editable `JComboBox` sounds like a good idea. I will try that!","body":"Because I wanted the dropdown feature which doesn&#39;t come with a <code>JTextField </code>, but using a separate <code>JTextField</code> and a non-editable <code>JComboBox</code> sounds like a good idea. I will try that!"}],"owner":{"account_id":18453936,"reputation":23,"user_id":17419233,"display_name":"Bigggie"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640270972,"creation_date":1640254972,"question_id":70460744,"body_markdown":"I want to be able to type anything in a JComboBox, even input that does not already exist in the dropdown. I need this because I need the drop-down suggestion feature. I have an api that provides me with some data(search results), when searching for a key word I need suggestions in a drop-down which I have managed with a custom model, but the JComboBox only lets me write input that already exists in the drop-down? How can I make it so the combobox allows all input?\r\n\r\nEdit:\r\n\r\nTo clarify what I want my program to do: I type in some word in a search bar and click search. Through a connection to my api it searches if there are any matching results. If there are I want it to display those in a dropdown list. So it is not as if there are any fixed alternatives to choose from in the combobox, like color, country etc, but instead you search and then the alternatives pop up. Something like this without including too many details:\r\n```\r\nJPanel panel = new JPanel();\r\nJButton search = new JButton(&quot;Search&quot;);\r\nJComboBox list = new JComboBox();\r\nAutoCompleteDecorator.decorate(list);\r\nlist.setEditable(true);\r\npanel.add(search);\r\npanel.add(list);\r\n\r\nsearch.addActionListener(e-&gt;{\r\n            //connects to api, reads input in searchbar, searches for the input in api\r\n\t\t\tArrayList&lt;String&gt; name = //list of all matching results from api\r\n\t\t\tlist.setModel(new ComboBoxModel(name));\r\n\t\t});\r\n```\r\nBut this doesn&#39;t work because the combobox doesnt let me write whatever I want in the field, it only lets my write words that already are stored in the combobox, which in my case is none to begin with. I have made sure that the other parts (the model, api) work, so it is just that I want the text field to be &quot;more editable&quot;.\r\n","title":"How to type anything in JComboBox","body":"<p>I want to be able to type anything in a JComboBox, even input that does not already exist in the dropdown. I need this because I need the drop-down suggestion feature. I have an api that provides me with some data(search results), when searching for a key word I need suggestions in a drop-down which I have managed with a custom model, but the JComboBox only lets me write input that already exists in the drop-down? How can I make it so the combobox allows all input?</p>\n<p>Edit:</p>\n<p>To clarify what I want my program to do: I type in some word in a search bar and click search. Through a connection to my api it searches if there are any matching results. If there are I want it to display those in a dropdown list. So it is not as if there are any fixed alternatives to choose from in the combobox, like color, country etc, but instead you search and then the alternatives pop up. Something like this without including too many details:</p>\n<pre><code>JPanel panel = new JPanel();\nJButton search = new JButton(&quot;Search&quot;);\nJComboBox list = new JComboBox();\nAutoCompleteDecorator.decorate(list);\nlist.setEditable(true);\npanel.add(search);\npanel.add(list);\n\nsearch.addActionListener(e-&gt;{\n            //connects to api, reads input in searchbar, searches for the input in api\n            ArrayList&lt;String&gt; name = //list of all matching results from api\n            list.setModel(new ComboBoxModel(name));\n        });\n</code></pre>\n<p>But this doesn't work because the combobox doesnt let me write whatever I want in the field, it only lets my write words that already are stored in the combobox, which in my case is none to begin with. I have made sure that the other parts (the model, api) work, so it is just that I want the text field to be &quot;more editable&quot;.</p>\n"},{"tags":["java","sql","insert","syntax-error"],"comments":[{"owner":{"account_id":21706727,"reputation":1201,"user_id":16019058,"display_name":"Shmiel"},"score":0,"creation_date":1640270245,"post_id":70463560,"comment_id":124558370,"body_markdown":"`mysql` or `sql-server`?","body":"<code>mysql</code> or <code>sql-server</code>?"},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1640270333,"post_id":70463560,"comment_id":124558406,"body_markdown":"Or perhaps PostgeSQL (based on the lines `String protocol = &quot;jdbc:postgresql://&quot;;` and `------ Testing PostgreSQL JDBC Connection ------`... Tag properly, don&#39;t just spam them","body":"Or perhaps PostgeSQL (based on the lines <code>String protocol = &quot;jdbc:postgresql:&#47;&#47;&quot;;</code> and <code>------ Testing PostgreSQL JDBC Connection ------</code>... Tag properly, don&#39;t just spam them"},{"owner":{"account_id":2312068,"reputation":90341,"user_id":2029983,"display_name":"Thom A"},"score":0,"creation_date":1640270354,"post_id":70463560,"comment_id":124558414,"body_markdown":"`boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);` also looks dangerously open to injection attacks.","body":"<code>boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);</code> also looks dangerously open to injection attacks."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1640270569,"post_id":70463560,"comment_id":124558489,"body_markdown":"Just a note. Though it perfectly doable, real world apps rarely create and drop tables on the fly. Data is too valuable to lose it by a typo.","body":"Just a note. Though it perfectly doable, real world apps rarely create and drop tables on the fly. Data is too valuable to lose it by a typo."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640270704,"creation_date":1640270704,"answer_id":70463671,"question_id":70463560,"body_markdown":"__This code is a security vulnerability__. Specifically, SQL injection. This is not how you do it.\r\n\r\nThe correct way also solves your problem in passing. Thus, solution: Do it the correct way, solves all your problems.\r\n\r\nCorrect way:\r\n\r\n```java\r\nPreparedStatement ps = con.prepareStatement(&quot;INSERT INTO &quot; + table + &quot; VALUES (?, ?, ?, ?)&quot;);\r\nps.setString(1, values[0]);\r\nps.setString(2, values[1]);\r\nps.setString(3, values[2]);\r\nps.setString(4, values[3]);\r\nps.executeUpdate();\r\n```\r\n\r\n","title":"having trouble inserting values into table with syntax error","body":"<p><strong>This code is a security vulnerability</strong>. Specifically, SQL injection. This is not how you do it.</p>\n<p>The correct way also solves your problem in passing. Thus, solution: Do it the correct way, solves all your problems.</p>\n<p>Correct way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PreparedStatement ps = con.prepareStatement(&quot;INSERT INTO &quot; + table + &quot; VALUES (?, ?, ?, ?)&quot;);\nps.setString(1, values[0]);\nps.setString(2, values[1]);\nps.setString(3, values[2]);\nps.setString(4, values[3]);\nps.executeUpdate();\n</code></pre>\n"}],"owner":{"account_id":23729720,"reputation":5,"user_id":17749152,"display_name":"Dramus17"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70463671,"answer_count":1,"score":-1,"last_activity_date":1640270704,"creation_date":1640270174,"question_id":70463560,"body_markdown":"Everytime at around &quot;composedLine = String.format(&quot;%s, %s, %s, %s, %s&quot;, composedLine,\r\n\t\t\t\t values[0], values[1], values[2], values[3]);&quot;\r\nit produces &quot;INSERT INTO airport VALUES (, ABR, Aberdeen Regional Airport, Aberdeen&quot;\r\n\r\ninstead of &quot;INSERT INTO airport VALUES (ABR, Aberdeen Regional Airport, Aberdeen&quot;\r\n\r\nwhich causes a syntax error when I use executeupdate due to the &quot;,&quot; before the ABR.\r\n\r\n\r\n    import java.io.*;\r\n    import java.sql.*;\r\n    import java.util.*;\r\n    \r\n    public class UsaDelayFlight {\r\n    \t\r\n    \r\n    \r\n    \t\t\r\n    \t\r\n    \r\n        public static Connection connectToDatabase(String user, String password, String database) {\r\n        \t\tSystem.out.println(&quot;------ Testing PostgreSQL JDBC Connection ------&quot;);\r\n        \t\tConnection connection = null;\r\n        \t\ttry {\r\n        \t\t\tString protocol = &quot;jdbc:postgresql://&quot;;\r\n        \t\t\tString dbName = &quot;&quot;;\r\n        \t\t\tString fullURL = protocol + database + dbName + user;\r\n        \t\t\tconnection = DriverManager.getConnection(fullURL, user, password);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\tString errorMsg = e.getMessage();\r\n        \t\t\tif (errorMsg.contains(&quot;authentication failed&quot;)) {\r\n        \t\t\t\tSystem.out.println(&quot;ERROR: \\tDatabase password is incorrect. Have you changed the password string above?&quot;);\r\n        \t\t\t\tSystem.out.println(&quot;\\n\\tMake sure you are NOT using your university password.\\n&quot;\r\n        \t\t\t\t\t\t+ &quot;\\tYou need to use the password that was emailed to you!&quot;);\r\n        \t\t\t} else {\r\n        \t\t\t\tSystem.out.println(&quot;Connection failed! Check output console.&quot;);\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\treturn connection;\r\n        \t}\r\n        \t\r\n        \tpublic static void dropTable(Connection connection, String table) throws SQLException  {\r\n        \t\tStatement st = null;\r\n        \t\ttry {\r\n        \t\tst = connection.createStatement();\r\n        \t\tboolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\tst.close();\r\n        \t}\r\n        \t\r\n        \tpublic static void createTable(Connection connection, String tableDescription) throws SQLException  {\r\n        \t\tStatement st = null;\r\n        \t\ttry {\r\n        \t\tst = connection.createStatement();\r\n        \t\tboolean result = st.execute(&quot;CREATE TABLE IF NOT EXISTS &quot; + tableDescription);\r\n        \t\t} catch (SQLException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t\t}\r\n        \t\tst.close();\r\n        \t}\r\n        \t\r\n        \tpublic static ResultSet executeQuery(Connection connection, String query) {\r\n        \t\t System.out.println(&quot;DEBUG: Executing query...&quot;);\r\n        \t\t try {\r\n        \t\t Statement st = connection.createStatement();\r\n        \t\t ResultSet rs = st.executeQuery(query);\r\n        \t\t return rs;\r\n        \t\t } catch (SQLException e) {\r\n        \t\t e.printStackTrace();\r\n        \t\t return null;\r\n        \t\t }\r\n        \t\t }\r\n        \t\r\n        \tpublic static int insertIntoTableFromFile(Connection connection, String table, \r\n        \t\t\tString filename) {\r\n        \t\tint numRows = 0;\r\n        \t\tString currentLine = null;\r\n        \t\ttry {\r\n        \t\tBufferedReader br = new BufferedReader(new FileReader(filename));\r\n        \t\tStatement st = connection.createStatement();\r\n        \t\t// Read in each line of the file until we reach the end.\r\n        \t\twhile ((currentLine = br.readLine()) != null) {\r\n        \t\tString[] values = currentLine.split(&quot;,&quot;);\r\n        \t\tSystem.out.println(Arrays.toString(values));\r\n        \t\tString composedLine = &quot;INSERT INTO &quot; + table + &quot; VALUES (&quot;;\r\n        \t\t//String r = String.format(&quot;formatted values are %s&quot;, composedLine);\r\n        \t\tcomposedLine = String.format(&quot;%s, %s, %s, %s&quot;, composedLine,\r\n        \t\t\t\t values[0], values[1], values[2], values[3]);\r\n        \t\tSystem.out.println(composedLine);\r\n        \t\t //. . .\r\n        \t\t// Finally, execute the entire composed line.\r\n        \t\tnumRows = st.executeUpdate(composedLine);\r\n        \t\t}\r\n        \t\t} catch (Exception e) {\r\n        \t\te.printStackTrace();\r\n        \t\t}\r\n        \t\treturn numRows;\r\n        \t}\r\n        \t\r\n        \t\r\n        \t\t\r\n        \t\t// NOTE: You will need to change some variables from START to END.\r\n        \t\t\tpublic static void main(String[] argv) throws SQLException {\r\n        \t\t\t\t// START\r\n        \t\t\t\t// Enter your username.\r\n        \t\t\t\tString user = &quot;&quot;;\r\n        \t\t\t\t// Enter your database password, NOT your university password.\r\n        \t\t\t\tString password = &quot;&quot;;\r\n        \t\t\t\t\r\n        \t\t\t\t/** IMPORTANT: If you are using NoMachine, you can leave this as it is.\r\n        \t\t\t\t * \r\n        \t\t\t \t *  Otherwise, if you are using your OWN COMPUTER with TUNNELLING:\r\n        \t\t\t \t * \t\t1) Delete the original database string and \r\n        \t\t\t \t * \t\t2) Remove the &#39;//&#39; in front of the second database string.\r\n        \t\t\t \t */\r\n        \t\t\t\tString database = &quot;&quot;;\r\n        \t\t\t\t//String database = &quot;&quot;;\r\n        \t\t\t\t// END\r\n        \t\t\t\t\r\n        \t\t\t\tConnection connection = connectToDatabase(user, password, database);\r\n        \t\t\t\tif (connection != null) {\r\n        \t\t\t\t\tSystem.out.println(&quot;SUCCESS: You made it!&quot;\r\n        \t\t\t\t\t\t\t+ &quot;\\n\\t You can now take control of your database!\\n&quot;);\r\n        \t\t\t\t} else {\r\n        \t\t\t\t\tSystem.out.println(&quot;ERROR: \\tFailed to make connection!&quot;);\r\n        \t\t\t\t\tSystem.exit(1);\r\n        \t\t\t\t}\r\n        \t\t\t\t// Now we&#39;re ready to use the DB. You may add your code below this line.\r\n        \t\t\t\tcreateTable(connection, &quot;delayedFlights (ID_of_Delayed_Flight varchar(15) not null, Month varchar(10), &quot;\r\n        \t\t\t\t\t\t+ &quot;DayofMonth int, DayofWeek int, DepTime timestamp, ScheduledDepTime timestamp, ArrTime int,&quot;\r\n        \t\t\t\t\t\t+ &quot;ScheduledArrTime timestamp, UniqueCarrier varchar(15) not null, FlightNum int, ActualFlightTime timestamp,&quot;\r\n        \t\t\t\t\t\t+ &quot;scheduledFlightTime timestamp, AirTime timestamp, ArrDelay timestamp, DepDelay timestamp, Orig varchar(15),&quot;\r\n        \t\t\t\t\t\t+ &quot;Dest varchar(15), Distance int, primary key (ID_of_Delayed_Flight), unique (UniqueCarrier));&quot;);\r\n        \t\t\t\t\r\n        \t\t\t\tcreateTable(connection, &quot;airport (airportCode varchar(15) not null, &quot;\r\n        \t\t\t\t\t\t+ &quot;airportName varchar(15), City varchar(15), State varchar(15), primary key (airportCode));&quot;);\r\n        \t\t\t\t\r\n        \t\t\t\tinsertIntoTableFromFile(connection, &quot;airport&quot;, &quot;airport&quot;);\r\n        \t\t\t\tString query = &quot;SELECT * FROM delayedFlights;&quot;;\r\n        \t\t\t\t ResultSet rs = executeQuery(connection, query);\r\n        \t\t\t\t try {\r\n        \t\t\t\t while (rs.next()) {\r\n        \t\t\t\t System.out.println(rs.getString(1)+&quot; &quot;+rs.getString(2)+&quot; &quot;+rs.getString(3));\r\n        \t\t\t\t }\r\n        \t\t\t\t } catch (SQLException e) {\r\n        \t\t\t\te.printStackTrace();\r\n        \t\t\t\t }\r\n        \t\t\t\t rs.close();\r\n        \t\t\t}\r\n        \t\t\t\r\n        \r\n        }\r\n\r\n","title":"having trouble inserting values into table with syntax error","body":"<p>Everytime at around &quot;composedLine = String.format(&quot;%s, %s, %s, %s, %s&quot;, composedLine,\nvalues[0], values[1], values[2], values[3]);&quot;\nit produces &quot;INSERT INTO airport VALUES (, ABR, Aberdeen Regional Airport, Aberdeen&quot;</p>\n<p>instead of &quot;INSERT INTO airport VALUES (ABR, Aberdeen Regional Airport, Aberdeen&quot;</p>\n<p>which causes a syntax error when I use executeupdate due to the &quot;,&quot; before the ABR.</p>\n<pre><code>import java.io.*;\nimport java.sql.*;\nimport java.util.*;\n\npublic class UsaDelayFlight {\n    \n\n\n        \n    \n\n    public static Connection connectToDatabase(String user, String password, String database) {\n            System.out.println(&quot;------ Testing PostgreSQL JDBC Connection ------&quot;);\n            Connection connection = null;\n            try {\n                String protocol = &quot;jdbc:postgresql://&quot;;\n                String dbName = &quot;&quot;;\n                String fullURL = protocol + database + dbName + user;\n                connection = DriverManager.getConnection(fullURL, user, password);\n            } catch (SQLException e) {\n                String errorMsg = e.getMessage();\n                if (errorMsg.contains(&quot;authentication failed&quot;)) {\n                    System.out.println(&quot;ERROR: \\tDatabase password is incorrect. Have you changed the password string above?&quot;);\n                    System.out.println(&quot;\\n\\tMake sure you are NOT using your university password.\\n&quot;\n                            + &quot;\\tYou need to use the password that was emailed to you!&quot;);\n                } else {\n                    System.out.println(&quot;Connection failed! Check output console.&quot;);\n                    e.printStackTrace();\n                }\n            }\n            return connection;\n        }\n        \n        public static void dropTable(Connection connection, String table) throws SQLException  {\n            Statement st = null;\n            try {\n            st = connection.createStatement();\n            boolean result = st.execute(&quot;DROP TABLE IF EXISTS &quot; + table);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            st.close();\n        }\n        \n        public static void createTable(Connection connection, String tableDescription) throws SQLException  {\n            Statement st = null;\n            try {\n            st = connection.createStatement();\n            boolean result = st.execute(&quot;CREATE TABLE IF NOT EXISTS &quot; + tableDescription);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            st.close();\n        }\n        \n        public static ResultSet executeQuery(Connection connection, String query) {\n             System.out.println(&quot;DEBUG: Executing query...&quot;);\n             try {\n             Statement st = connection.createStatement();\n             ResultSet rs = st.executeQuery(query);\n             return rs;\n             } catch (SQLException e) {\n             e.printStackTrace();\n             return null;\n             }\n             }\n        \n        public static int insertIntoTableFromFile(Connection connection, String table, \n                String filename) {\n            int numRows = 0;\n            String currentLine = null;\n            try {\n            BufferedReader br = new BufferedReader(new FileReader(filename));\n            Statement st = connection.createStatement();\n            // Read in each line of the file until we reach the end.\n            while ((currentLine = br.readLine()) != null) {\n            String[] values = currentLine.split(&quot;,&quot;);\n            System.out.println(Arrays.toString(values));\n            String composedLine = &quot;INSERT INTO &quot; + table + &quot; VALUES (&quot;;\n            //String r = String.format(&quot;formatted values are %s&quot;, composedLine);\n            composedLine = String.format(&quot;%s, %s, %s, %s&quot;, composedLine,\n                     values[0], values[1], values[2], values[3]);\n            System.out.println(composedLine);\n             //. . .\n            // Finally, execute the entire composed line.\n            numRows = st.executeUpdate(composedLine);\n            }\n            } catch (Exception e) {\n            e.printStackTrace();\n            }\n            return numRows;\n        }\n        \n        \n            \n            // NOTE: You will need to change some variables from START to END.\n                public static void main(String[] argv) throws SQLException {\n                    // START\n                    // Enter your username.\n                    String user = &quot;&quot;;\n                    // Enter your database password, NOT your university password.\n                    String password = &quot;&quot;;\n                    \n                    /** IMPORTANT: If you are using NoMachine, you can leave this as it is.\n                     * \n                     *  Otherwise, if you are using your OWN COMPUTER with TUNNELLING:\n                     *      1) Delete the original database string and \n                     *      2) Remove the '//' in front of the second database string.\n                     */\n                    String database = &quot;&quot;;\n                    //String database = &quot;&quot;;\n                    // END\n                    \n                    Connection connection = connectToDatabase(user, password, database);\n                    if (connection != null) {\n                        System.out.println(&quot;SUCCESS: You made it!&quot;\n                                + &quot;\\n\\t You can now take control of your database!\\n&quot;);\n                    } else {\n                        System.out.println(&quot;ERROR: \\tFailed to make connection!&quot;);\n                        System.exit(1);\n                    }\n                    // Now we're ready to use the DB. You may add your code below this line.\n                    createTable(connection, &quot;delayedFlights (ID_of_Delayed_Flight varchar(15) not null, Month varchar(10), &quot;\n                            + &quot;DayofMonth int, DayofWeek int, DepTime timestamp, ScheduledDepTime timestamp, ArrTime int,&quot;\n                            + &quot;ScheduledArrTime timestamp, UniqueCarrier varchar(15) not null, FlightNum int, ActualFlightTime timestamp,&quot;\n                            + &quot;scheduledFlightTime timestamp, AirTime timestamp, ArrDelay timestamp, DepDelay timestamp, Orig varchar(15),&quot;\n                            + &quot;Dest varchar(15), Distance int, primary key (ID_of_Delayed_Flight), unique (UniqueCarrier));&quot;);\n                    \n                    createTable(connection, &quot;airport (airportCode varchar(15) not null, &quot;\n                            + &quot;airportName varchar(15), City varchar(15), State varchar(15), primary key (airportCode));&quot;);\n                    \n                    insertIntoTableFromFile(connection, &quot;airport&quot;, &quot;airport&quot;);\n                    String query = &quot;SELECT * FROM delayedFlights;&quot;;\n                     ResultSet rs = executeQuery(connection, query);\n                     try {\n                     while (rs.next()) {\n                     System.out.println(rs.getString(1)+&quot; &quot;+rs.getString(2)+&quot; &quot;+rs.getString(3));\n                     }\n                     } catch (SQLException e) {\n                    e.printStackTrace();\n                     }\n                     rs.close();\n                }\n                \n    \n    }\n</code></pre>\n"},{"tags":["java","spring","http","servlets"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1640271718,"post_id":70463664,"comment_id":124558919,"body_markdown":"Is there a specific reason why you return a `HttpEntity`? I would have expected an `ResponseEntity&lt;String&gt;` or just a `String` as return-type.","body":"Is there a specific reason why you return a <code>HttpEntity</code>? I would have expected an <code>ResponseEntity&lt;String&gt;</code> or just a <code>String</code> as return-type."},{"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"score":0,"creation_date":1640273395,"post_id":70463664,"comment_id":124559498,"body_markdown":"When I return just a String I don&#39;t get the formatting I want. Do you know how can I return a String formatting \\n and \\t?","body":"When I return just a String I don&#39;t get the formatting I want. Do you know how can I return a String formatting \\n and \\t?"},{"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"score":0,"creation_date":1640273611,"post_id":70463664,"comment_id":124559567,"body_markdown":"I get this response instead of formatting the string correctly&quot;(\\n\\tNOT (\\n\\t\\t(\\n\\t\\t\\t&quot;","body":"I get this response instead of formatting the string correctly&quot;(\\n\\tNOT (\\n\\t\\t(\\n\\t\\t\\t&quot;"}],"owner":{"account_id":20484624,"reputation":51,"user_id":15032086,"display_name":"Facundo Humphreys"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1640270663,"creation_date":1640270663,"question_id":70463664,"body_markdown":"I&#39;m trying to return a formatted string from a endpoint with spring, with the following code\r\n```\r\nprivate static class Json\r\n            implements Serializable {\r\n        private final String value;\r\n\r\n        public Json(String value) {\r\n            this.value = value;\r\n        }\r\n\r\n        public String getValue() {\r\n            return this.value;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return &quot;Json{&quot; +\r\n                    &quot;value=&#39;&quot; + value + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n    @RequestMapping(value = &quot;/description&quot;, method = RequestMethod.GET)\r\n    public HttpEntity&lt;String&gt; retrieveDescription() {\r\n\r\n        String text = this.retrieveDescription();\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setContentType(MediaType.TEXT_PLAIN);\r\n\r\n        return new HttpEntity&lt;String&gt;(text, headers);\r\n    }\r\n```\r\nBut when I execute the request I get the following error\r\n\r\n&gt; No converter for [class java.lang.String] with preset Content-Type &#39;text/plain&#39;\r\n\r\nI&#39;ve tried returning the Json class but still the same problem\r\nAny idea how to solve it?","title":"No converter for [class java.lang.String] with preset Content-Type &#39;text/plain&#39;","body":"<p>I'm trying to return a formatted string from a endpoint with spring, with the following code</p>\n<pre><code>private static class Json\n            implements Serializable {\n        private final String value;\n\n        public Json(String value) {\n            this.value = value;\n        }\n\n        public String getValue() {\n            return this.value;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;Json{&quot; +\n                    &quot;value='&quot; + value + '\\'' +\n                    '}';\n        }\n    }\n    @RequestMapping(value = &quot;/description&quot;, method = RequestMethod.GET)\n    public HttpEntity&lt;String&gt; retrieveDescription() {\n\n        String text = this.retrieveDescription();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.TEXT_PLAIN);\n\n        return new HttpEntity&lt;String&gt;(text, headers);\n    }\n</code></pre>\n<p>But when I execute the request I get the following error</p>\n<blockquote>\n<p>No converter for [class java.lang.String] with preset Content-Type 'text/plain'</p>\n</blockquote>\n<p>I've tried returning the Json class but still the same problem\nAny idea how to solve it?</p>\n"},{"tags":["java","spring-boot","maven","windows-subsystem-for-linux"],"comments":[{"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"score":0,"creation_date":1640272076,"post_id":70463640,"comment_id":124559070,"body_markdown":"I&#39;m not sure but isn&#39;t the version of the `spring-boot-maven-plugin` plugin different in both cases? Additionally, it looks like the `profiles` element can only accept a string (optionally delimiting multiple values by comma) whilst your `pom.xml` snippet looks like you&#39;ve moved the Maven profiles section right into the plugin configuration which is illegal.","body":"I&#39;m not sure but isn&#39;t the version of the <code>spring-boot-maven-plugin</code> plugin different in both cases? Additionally, it looks like the <code>profiles</code> element can only accept a string (optionally delimiting multiple values by comma) whilst your <code>pom.xml</code> snippet looks like you&#39;ve moved the Maven profiles section right into the plugin configuration which is illegal."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272090,"post_id":70463640,"comment_id":124559075,"body_markdown":"The issue looks like a problem with the Maven package in Ubuntu distro...  see https://stackoverflow.com/a/67482132/296328 second why are you combining Maven Profiles with spring boot profiles?","body":"The issue looks like a problem with the Maven package in Ubuntu distro...  see <a href=\"https://stackoverflow.com/a/67482132/296328\">stackoverflow.com/a/67482132/296328</a> second why are you combining Maven Profiles with spring boot profiles?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272162,"post_id":70463640,"comment_id":124559097,"body_markdown":"You should first check if your build is working without any issue on plain command line via `mvn clean package` afterwards I would check the issue warning about guice ....","body":"You should first check if your build is working without any issue on plain command line via <code>mvn clean package</code> afterwards I would check the issue warning about guice ...."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1640272345,"post_id":70463640,"comment_id":124559177,"body_markdown":"The configuration for the profiles for spring-boot-maven-plugin is wrong: See details here: https://docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-profiles","body":"The configuration for the profiles for spring-boot-maven-plugin is wrong: See details here: <a href=\"https://docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference/htmlsingle/#goals-run-parameters-details-profiles\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/2.6.2/maven-plugin/reference&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":14088365,"reputation":169,"user_id":10177536,"display_name":"Raissa Correia"},"score":0,"creation_date":1640272593,"post_id":70463640,"comment_id":124559255,"body_markdown":"mvn clean package fails during test run i&#39;ll check your link, but this configuration is wrong but was working just fine outside wsl","body":"mvn clean package fails during test run i&#39;ll check your link, but this configuration is wrong but was working just fine outside wsl"}],"owner":{"account_id":14088365,"reputation":169,"user_id":10177536,"display_name":"Raissa Correia"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640270533,"creation_date":1640270533,"question_id":70463640,"body_markdown":"I was working in a spring boot project on a Ubuntu 20.04 installed in dual boot and everything was fine. Now I pulled the repo in a Ubuntu 20.04 running on WSL(windows 11) and now the project fails to build. \r\nI build with the command: `mvn spring-boot:run -Dspring.profiles.active=dev`\r\nThe error is: \r\n\r\n```\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/usr/share/maven/lib/guice.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] -------------------&lt; com.robocup.olimpo:olimpo-api &gt;--------------------\r\n[INFO] Building olimpo-api 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.6.1:run (default-cli) &gt; test-compile @ olimpo-api &gt;&gt;&gt;\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ olimpo-api ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n[INFO] Copying 3 resources\r\n[INFO] Copying 0 resource\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ olimpo-api ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ olimpo-api ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n[INFO] skip non existing resourceDirectory /home/raicorreia/olimposystem/API/src/test/resources\r\n[INFO]\r\n[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ olimpo-api ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO]\r\n[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.6.1:run (default-cli) &lt; test-compile @ olimpo-api &lt;&lt;&lt;\r\n[INFO]\r\n[INFO]\r\n[INFO] --- spring-boot-maven-plugin:2.6.1:run (default-cli) @ olimpo-api ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.250 s\r\n[INFO] Finished at: 2021-12-23T11:24:23-03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:run (default-cli) on project olimpo-api: Unable to parse configuration of mojo org.springframework.boot:spring-boot-maven-plugin:2.6.1:run for parameter profiles: Basic element &#39;profile&#39; must not contain child elements -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginConfigurationException\r\n```\r\n\r\nWhat I think is causing this is the profiles configuration on pom.xml, which was fine in Ubuntu 20.04 fully installed and fails in WSL.\r\nApache Maven version: 3.6.3(on both)\r\nJava JDK Version: 11.0.3(on normal ubuntu) and 11.0.13(on wsl ubuntu)\r\n\r\nI wroten this pom.xml based on this tutorial, I don&#39;t know if there&#39;s a better way of doing it, to have 3 application.properties file for dev, test and prod https://www.baeldung.com/maven-profiles\r\n\r\nAny idea why is this happening?\r\n\r\n```\r\n&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;profiles&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;dev&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t\t&lt;activation&gt;\r\n\t\t\t\t\t\t\t\t&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n\t\t\t\t\t\t\t&lt;/activation&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;test&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;test&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t\t&lt;profile&gt;\r\n\t\t\t\t\t\t\t&lt;id&gt;prod&lt;/id&gt;\r\n\t\t\t\t\t\t\t&lt;properties&gt;\r\n\t\t\t\t\t\t\t\t&lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\r\n\t\t\t\t\t\t\t&lt;/properties&gt;\r\n\t\t\t\t\t\t&lt;/profile&gt;\r\n\t\t\t\t\t&lt;/profiles&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```","title":"Maven Build Profile Issue on Ubuntu WSL","body":"<p>I was working in a spring boot project on a Ubuntu 20.04 installed in dual boot and everything was fine. Now I pulled the repo in a Ubuntu 20.04 running on WSL(windows 11) and now the project fails to build.\nI build with the command: <code>mvn spring-boot:run -Dspring.profiles.active=dev</code>\nThe error is:</p>\n<pre><code>WARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/usr/share/maven/lib/guice.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------&lt; com.robocup.olimpo:olimpo-api &gt;--------------------\n[INFO] Building olimpo-api 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; spring-boot-maven-plugin:2.6.1:run (default-cli) &gt; test-compile @ olimpo-api &gt;&gt;&gt;\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ olimpo-api ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 3 resources\n[INFO] Copying 0 resource\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ olimpo-api ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:testResources (default-testResources) @ olimpo-api ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] skip non existing resourceDirectory /home/raicorreia/olimposystem/API/src/test/resources\n[INFO]\n[INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ olimpo-api ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO]\n[INFO] &lt;&lt;&lt; spring-boot-maven-plugin:2.6.1:run (default-cli) &lt; test-compile @ olimpo-api &lt;&lt;&lt;\n[INFO]\n[INFO]\n[INFO] --- spring-boot-maven-plugin:2.6.1:run (default-cli) @ olimpo-api ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.250 s\n[INFO] Finished at: 2021-12-23T11:24:23-03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.6.1:run (default-cli) on project olimpo-api: Unable to parse configuration of mojo org.springframework.boot:spring-boot-maven-plugin:2.6.1:run for parameter profiles: Basic element 'profile' must not contain child elements -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginConfigurationException\n</code></pre>\n<p>What I think is causing this is the profiles configuration on pom.xml, which was fine in Ubuntu 20.04 fully installed and fails in WSL.\nApache Maven version: 3.6.3(on both)\nJava JDK Version: 11.0.3(on normal ubuntu) and 11.0.13(on wsl ubuntu)</p>\n<p>I wroten this pom.xml based on this tutorial, I don't know if there's a better way of doing it, to have 3 application.properties file for dev, test and prod <a href=\"https://www.baeldung.com/maven-profiles\" rel=\"nofollow noreferrer\">https://www.baeldung.com/maven-profiles</a></p>\n<p>Any idea why is this happening?</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;profiles&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;dev&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;dev&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                            &lt;activation&gt;\n                                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n                            &lt;/activation&gt;\n                        &lt;/profile&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;test&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;test&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                        &lt;/profile&gt;\n                        &lt;profile&gt;\n                            &lt;id&gt;prod&lt;/id&gt;\n                            &lt;properties&gt;\n                                &lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\n                            &lt;/properties&gt;\n                        &lt;/profile&gt;\n                    &lt;/profiles&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","scala","apache-spark","jdbc","databricks"],"comments":[{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":0,"creation_date":1640227440,"post_id":70443584,"comment_id":124547389,"body_markdown":"Is the extra parentheses before Spark a typo? It’s just a detail…","body":"Is the extra parentheses before Spark a typo? It’s just a detail…"},{"owner":{"account_id":21307719,"reputation":263,"user_id":15682659,"display_name":"SanjanaSanju"},"score":0,"creation_date":1640270381,"post_id":70443584,"comment_id":124558423,"body_markdown":"Its just a typo. Thank you.","body":"Its just a typo. Thank you."}],"answers":[{"tags":[],"owner":{"account_id":5915437,"reputation":2214,"user_id":4659530,"accept_rate":60,"display_name":"Rahul Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640141223,"creation_date":1640141223,"answer_id":70443737,"question_id":70443584,"body_markdown":"The certificate used by your host is not trusted by java.\r\n\r\nSolution 1 (Easy, not recommended)\r\n\r\nDisabled certificate checking and always trust the certificate provided by server.\r\n\r\nAdd `trustServerCertificate` property.\r\n\r\n```\r\nval df = (spark\r\n  .read\r\n  .format(&quot;jdbc&quot;)\r\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\r\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\r\n  .option(&quot;user&quot;, &lt;username&gt;)\r\n  .option(&quot;password&quot;, &lt;password&gt;)\r\n  .option(&quot;ssl&quot;, True)\r\n  .option(&quot;trustServerCertificate&quot;, True)\r\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\r\n .load()\r\n```\r\n\r\nSolution 2 (Difficult, Recommended)\r\n\r\nGet the certificate and store it in the trusted store of your system.\r\n\r\nRead more about it here\r\n\r\n- https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/\r\n- https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\r\n","title":"Unable to connect to a database using JDBC within Spark with Scala","body":"<p>The certificate used by your host is not trusted by java.</p>\n<p>Solution 1 (Easy, not recommended)</p>\n<p>Disabled certificate checking and always trust the certificate provided by server.</p>\n<p>Add <code>trustServerCertificate</code> property.</p>\n<pre><code>val df = (spark\n  .read\n  .format(&quot;jdbc&quot;)\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\n  .option(&quot;user&quot;, &lt;username&gt;)\n  .option(&quot;password&quot;, &lt;password&gt;)\n  .option(&quot;ssl&quot;, True)\n  .option(&quot;trustServerCertificate&quot;, True)\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\n .load()\n</code></pre>\n<p>Solution 2 (Difficult, Recommended)</p>\n<p>Get the certificate and store it in the trusted store of your system.</p>\n<p>Read more about it here</p>\n<ul>\n<li><a href=\"https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/\" rel=\"nofollow noreferrer\">https://magicmonster.com/kb/prg/java/ssl/pkix_path_building_failed/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\">&quot;PKIX path building failed&quot; and &quot;unable to find valid certification path to requested target&quot;</a></li>\n</ul>\n"}],"owner":{"account_id":21307719,"reputation":263,"user_id":15682659,"display_name":"SanjanaSanju"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1996,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70443737,"answer_count":1,"score":1,"last_activity_date":1640270360,"creation_date":1640139687,"question_id":70443584,"body_markdown":"I’m trying to read data from JDBC in Spark Scala. Below is the code written in Databricks.\r\n\r\n    val df = spark\r\n      .read\r\n      .format(&quot;jdbc&quot;)\r\n      .option(&quot;url&quot;, &lt;connection-string&gt;)\r\n      .option(&quot;dbtable&quot;, &lt;table-name&gt;)\r\n      .option(&quot;user&quot;, &lt;username&gt;)\r\n      .option(&quot;password&quot;, &lt;password&gt;)\r\n      .option(&quot;ssl&quot;, True)\r\n      .option(&quot;sslmode&quot;, &quot;require&quot;)\r\n     .load()\r\n\r\nI’m getting the following error message:\r\n\r\n    java.sql.SQLNonTransientConnectionException: Could not connect to 10.6.8.86:3306 : PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\nCould someone please let me know how to resolve this issue.","title":"Unable to connect to a database using JDBC within Spark with Scala","body":"<p>I’m trying to read data from JDBC in Spark Scala. Below is the code written in Databricks.</p>\n<pre><code>val df = spark\n  .read\n  .format(&quot;jdbc&quot;)\n  .option(&quot;url&quot;, &lt;connection-string&gt;)\n  .option(&quot;dbtable&quot;, &lt;table-name&gt;)\n  .option(&quot;user&quot;, &lt;username&gt;)\n  .option(&quot;password&quot;, &lt;password&gt;)\n  .option(&quot;ssl&quot;, True)\n  .option(&quot;sslmode&quot;, &quot;require&quot;)\n .load()\n</code></pre>\n<p>I’m getting the following error message:</p>\n<pre><code>java.sql.SQLNonTransientConnectionException: Could not connect to 10.6.8.86:3306 : PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n</code></pre>\n<p>Could someone please let me know how to resolve this issue.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1640270027,"post_id":70463340,"comment_id":124558301,"body_markdown":"null point in mregistration. Make sure that the resource id is same as the xml file","body":"null point in mregistration. Make sure that the resource id is same as the xml file"},{"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"score":0,"creation_date":1640276092,"post_id":70463340,"comment_id":124560420,"body_markdown":"corrected it. Still app is crashing","body":"corrected it. Still app is crashing"},{"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"score":0,"creation_date":1640276294,"post_id":70463340,"comment_id":124560496,"body_markdown":"@MuhammadAsad Still app is crashing.\n2021-12-23 21:40:18.282 31676-1375/com.ishita.snapchatfilter W/libEGL: EGLNativeWindowType 0x6ffbf26010 disconnect failed\n2021-12-23 21:40:28.238 31676-31676/com.ishita.snapchatfilter W/BiChannelGoogleApi: [FirebaseAuth: ] getGoogleApiForMethod() returned Gms: com.google.firebase.auth.api.internal.zzak@dc65f0c                                           2021-12-23 21:40:28.246 31676-31676/com.ishita.snapchatfilter E/AndroidRuntime: FATAL EXCEPTION:","body":"@MuhammadAsad Still app is crashing. 2021-12-23 21:40:18.282 31676-1375/com.ishita.snapchatfilter W/libEGL: EGLNativeWindowType 0x6ffbf26010 disconnect failed 2021-12-23 21:40:28.238 31676-31676/com.ishita.snapchatfilter W/BiChannelGoogleApi: [FirebaseAuth: ] getGoogleApiForMethod() returned Gms: com.google.firebase.auth.api.internal.zzak@dc65f0c                                           2021-12-23 21:40:28.246 31676-31676/com.ishita.snapchatfilter E/AndroidRuntime: FATAL EXCEPTION:"},{"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"score":0,"creation_date":1640283579,"post_id":70463340,"comment_id":124562744,"body_markdown":"add full screen shot of error","body":"add full screen shot of error"}],"owner":{"account_id":23729531,"reputation":1,"user_id":17749002,"display_name":"Ishita Amod"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1640269539,"answer_count":0,"score":0,"last_activity_date":1640270305,"creation_date":1640269021,"question_id":70463340,"body_markdown":"I used Firebase for the database and authentication. And whenever I click on Login Button or Registration button, the app crashes every time. I think I am not able to connect my app with Firebase that&#39;s why this error is showing. \r\nPlease help someone.\r\n\r\nI have added the codes and the error snippet below.\r\n\r\n**RegistrationActivity.java**\r\n\r\n\r\n \r\n\r\n        public class RegistrationActivity extends AppCompatActivity {\r\n         Button mregistration;\r\n            EditText memail,mpass,mname;\r\n     FirebaseAuth mauth;\r\n    FirebaseAuth.AuthStateListener firebaseAuthStateListener;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_registration);\r\n\r\n        firebaseAuthStateListener= firebaseAuth -&gt; {\r\n\r\n            FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\r\n            //security purpose\r\n            if(user!=null)\r\n            {\r\n                Intent intent=new Intent(getApplication(),MainActivity.class);\r\n                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        };\r\n\r\n        mauth=FirebaseAuth.getInstance();\r\n\r\n        mregistration=findViewById(R.id.registration);\r\n        mname=findViewById(R.id.name);\r\n        memail=findViewById(R.id.emailid);\r\n        mpass=findViewById(R.id.password);\r\n\r\n        mregistration.setOnClickListener(v -&gt; {\r\n            final String name= mname.getText().toString();\r\n            final String email= memail.getText().toString();\r\n            final String pass= mpass.getText().toString();\r\n            mauth.createUserWithEmailAndPassword(email,pass).addOnCompleteListener((Executor) getApplication(), task -&gt; {\r\n\r\n                if(!task.isSuccessful())\r\n                {\r\n                    Toast.makeText(getApplication(), &quot;Sign in ERROR&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                else{\r\n                    String userId= Objects.requireNonNull(mauth.getCurrentUser()).getUid();\r\n                    DatabaseReference currentUserDb= FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).child(userId);\r\n\r\n                    Map userInfo=new HashMap&lt;&gt;();\r\n                    userInfo.put(&quot;email&quot;,email);\r\n                    userInfo.put(&quot;name&quot;,name);\r\n                    userInfo.put(&quot;profileImageUrl&quot;,&quot;default&quot;);\r\n\r\n                    currentUserDb.updateChildren(userInfo);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    protected void onStart() {\r\n        super.onStart();\r\n        mauth.addAuthStateListener(firebaseAuthStateListener);\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        mauth.removeAuthStateListener(firebaseAuthStateListener);\r\n    }\r\n\r\n\r\n**BUILD GRADLE**\r\n\r\n        plugins {\r\n    id &#39;com.android.application&#39;}\r\n\r\n\r\n        android {\r\n    compileSdkVersion 30\r\n    buildToolsVersion &quot;30.0.3&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.ishita.snapchatfilter&quot;\r\n        minSdkVersion 28\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }}\r\n\r\n\r\n\r\n\r\n    dependencies {\r\n        implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.0&#39;\r\n    testImplementation &#39;junit:junit:4.+&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-bom:29.0.3&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:18.0.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:18.0.0&#39;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n**ERROR I GET:**        \r\n    \r\n\r\n        E/AndroidRuntime: FATAL EXCEPTION: main\r\n        Process: com.ishita.snapchatfilter, PID: 29152\r\n        java.lang.RuntimeException: Unable to start activity \r\n         \r\n       ComponentInfo{com.ishita.snapchatfilter/com.ishita.snapchatfilter.RegistrationActivity}: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3797)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)\r\n            at android.os.Looper.loop(Looper.java:246)\r\n            at android.app.ActivityThread.main(ActivityThread.java:8528)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n         Caused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)&#39; on a null object reference\r\n            at com.ishita.snapchatfilter.RegistrationActivity.onCreate(RegistrationActivity.java:58)\r\n            at android.app.Activity.performCreate(Activity.java:8207)\r\n            at android.app.Activity.performCreate(Activity.java:8191)\r\n            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\r\n            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3770)\r\n            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)&#160;\r\n            at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)&#160;\r\n            at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)&#160;\r\n            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)&#160;\r\n            at android.os.Handler.dispatchMessage(Handler.java:106)&#160;\r\n            at android.os.Looper.loop(Looper.java:246)&#160;\r\n            at android.app.ActivityThread.main(ActivityThread.java:8528)&#160;\r\n            at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)&#160;\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)&#160;\r\n    I/Process: Sending signal. PID: 29152 SIG: 9\r\n\r\n","title":"My app keeps Stopping , whenever i click on Login button (used Firebase)","body":"<p>I used Firebase for the database and authentication. And whenever I click on Login Button or Registration button, the app crashes every time. I think I am not able to connect my app with Firebase that's why this error is showing.\nPlease help someone.</p>\n<p>I have added the codes and the error snippet below.</p>\n<p><strong>RegistrationActivity.java</strong></p>\n<pre><code>    public class RegistrationActivity extends AppCompatActivity {\n     Button mregistration;\n        EditText memail,mpass,mname;\n FirebaseAuth mauth;\nFirebaseAuth.AuthStateListener firebaseAuthStateListener;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_registration);\n\n    firebaseAuthStateListener= firebaseAuth -&gt; {\n\n        FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\n        //security purpose\n        if(user!=null)\n        {\n            Intent intent=new Intent(getApplication(),MainActivity.class);\n            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n            startActivity(intent);\n            finish();\n        }\n    };\n\n    mauth=FirebaseAuth.getInstance();\n\n    mregistration=findViewById(R.id.registration);\n    mname=findViewById(R.id.name);\n    memail=findViewById(R.id.emailid);\n    mpass=findViewById(R.id.password);\n\n    mregistration.setOnClickListener(v -&gt; {\n        final String name= mname.getText().toString();\n        final String email= memail.getText().toString();\n        final String pass= mpass.getText().toString();\n        mauth.createUserWithEmailAndPassword(email,pass).addOnCompleteListener((Executor) getApplication(), task -&gt; {\n\n            if(!task.isSuccessful())\n            {\n                Toast.makeText(getApplication(), &quot;Sign in ERROR&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else{\n                String userId= Objects.requireNonNull(mauth.getCurrentUser()).getUid();\n                DatabaseReference currentUserDb= FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;).child(userId);\n\n                Map userInfo=new HashMap&lt;&gt;();\n                userInfo.put(&quot;email&quot;,email);\n                userInfo.put(&quot;name&quot;,name);\n                userInfo.put(&quot;profileImageUrl&quot;,&quot;default&quot;);\n\n                currentUserDb.updateChildren(userInfo);\n            }\n        });\n    });\n}\n\nprotected void onStart() {\n    super.onStart();\n    mauth.addAuthStateListener(firebaseAuthStateListener);\n}\n\n@Override\nprotected void onStop() {\n    super.onStop();\n    mauth.removeAuthStateListener(firebaseAuthStateListener);\n}\n</code></pre>\n<p><strong>BUILD GRADLE</strong></p>\n<pre><code>    plugins {\nid 'com.android.application'}\n\n\n    android {\ncompileSdkVersion 30\nbuildToolsVersion &quot;30.0.3&quot;\n\ndefaultConfig {\n    applicationId &quot;com.ishita.snapchatfilter&quot;\n    minSdkVersion 28\n    targetSdkVersion 30\n    versionCode 1\n    versionName &quot;1.0&quot;\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}}\n\n\n\n\ndependencies {\n    implementation 'androidx.appcompat:appcompat:1.3.1'\nimplementation 'com.google.android.material:material:1.4.0'\nimplementation 'androidx.constraintlayout:constraintlayout:2.1.0'\ntestImplementation 'junit:junit:4.+'\nandroidTestImplementation 'androidx.test.ext:junit:1.1.3'\nandroidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n\nimplementation 'com.google.firebase:firebase-bom:29.0.3'\nimplementation 'com.google.firebase:firebase-auth'\nimplementation 'com.google.firebase:firebase-auth:18.0.0'\nimplementation 'com.google.firebase:firebase-database:18.0.0'\n</code></pre>\n<p>}</p>\n<p><strong>ERROR I GET:</strong></p>\n<pre><code>    E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.ishita.snapchatfilter, PID: 29152\n    java.lang.RuntimeException: Unable to start activity \n     \n   ComponentInfo{com.ishita.snapchatfilter/com.ishita.snapchatfilter.RegistrationActivity}: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3797)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973)\n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85)\n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loop(Looper.java:246)\n        at android.app.ActivityThread.main(ActivityThread.java:8528)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n     Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.Button.setOnClickListener(android.view.View$OnClickListener)' on a null object reference\n        at com.ishita.snapchatfilter.RegistrationActivity.onCreate(RegistrationActivity.java:58)\n        at android.app.Activity.performCreate(Activity.java:8207)\n        at android.app.Activity.performCreate(Activity.java:8191)\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1309)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3770)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3973) \n        at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:85) \n        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135) \n        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loop(Looper.java:246) \n        at android.app.ActivityThread.main(ActivityThread.java:8528) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130) \nI/Process: Sending signal. PID: 29152 SIG: 9\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit4"],"comments":[{"owner":{"account_id":2818342,"reputation":299856,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1396013698,"post_id":22714359,"comment_id":34613432,"body_markdown":"Can you show your mocking attempt?","body":"Can you show your mocking attempt?"},{"owner":{"account_id":2176261,"reputation":580,"user_id":1926895,"accept_rate":64,"display_name":"Vivek"},"score":0,"creation_date":1396014645,"post_id":22714359,"comment_id":34614116,"body_markdown":"i changed post again . see insertSumIntoDB(request.getAttribute(&quot;sum&quot;)) this is actually insertSumintoDb(null) , cuz i haven&#39;t given behaviour for request.getAttribute(&quot;sum&quot;);","body":"i changed post again . see insertSumIntoDB(request.getAttribute(&quot;sum&quot;)) this is actually insertSumintoDb(null) , cuz i haven&#39;t given behaviour for request.getAttribute(&quot;sum&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":323343,"reputation":1410,"user_id":643302,"accept_rate":100,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640269992,"creation_date":1396014249,"answer_id":22714581,"question_id":22714359,"body_markdown":"Mockito supports real partial mocks: [Real partial mocks (Since 1.8.0)](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#16)\r\n\r\nI think it fits your needs","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>Mockito supports real partial mocks: <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#16\" rel=\"nofollow noreferrer\">Real partial mocks (Since 1.8.0)</a></p>\n<p>I think it fits your needs</p>\n"},{"tags":[],"owner":{"account_id":1361840,"reputation":1104,"user_id":1299049,"accept_rate":100,"display_name":"m c"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1452781821,"creation_date":1432120440,"answer_id":30348029,"question_id":22714359,"body_markdown":"Spring&#39;s [MockHttpServletRequest][1] and [MockHttpServletResponse][2] are useful for that purpose. E.g.\r\n\r\n        MockHttpServletRequest request = new MockHttpServletRequest();\r\n        MockHttpServletResponse response = new MockHttpServletResponse();\r\n        request.addHeader(HttpHeaders.HOST, &quot;myhost.com&quot;);\r\n        request.setLocalPort(PORT_VALID); // e.g. 8081\r\n        request.setRemoteAddr(REQUEST_IP); // e.g. 127.0.0.1\r\nthen I can call *myclass.method(request, response, ...)* and check whether some attribute has been correctly set into the request, e.g.\r\n\r\n        MyBean attr = (MyBean) request.getAttribute(ATTRIBUTE_NAME));\r\n        // do my Assert.* stuff with &#39;attr&#39;\r\n\r\nMockHttpServletRequest and MockHttpServletResponse work fine where *mock(HttpServletRequest.class)* fails, for instance where you need to get back the real content of a request attribute which has been previously set within your business logic.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletRequest.html\r\n  [2]: http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletResponse.html","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>Spring's <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletRequest.html\" rel=\"noreferrer\">MockHttpServletRequest</a> and <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/MockHttpServletResponse.html\" rel=\"noreferrer\">MockHttpServletResponse</a> are useful for that purpose. E.g.</p>\n\n<pre><code>    MockHttpServletRequest request = new MockHttpServletRequest();\n    MockHttpServletResponse response = new MockHttpServletResponse();\n    request.addHeader(HttpHeaders.HOST, \"myhost.com\");\n    request.setLocalPort(PORT_VALID); // e.g. 8081\n    request.setRemoteAddr(REQUEST_IP); // e.g. 127.0.0.1\n</code></pre>\n\n<p>then I can call <em>myclass.method(request, response, ...)</em> and check whether some attribute has been correctly set into the request, e.g.</p>\n\n<pre><code>    MyBean attr = (MyBean) request.getAttribute(ATTRIBUTE_NAME));\n    // do my Assert.* stuff with 'attr'\n</code></pre>\n\n<p>MockHttpServletRequest and MockHttpServletResponse work fine where <em>mock(HttpServletRequest.class)</em> fails, for instance where you need to get back the real content of a request attribute which has been previously set within your business logic.</p>\n"},{"tags":[],"owner":{"account_id":1136625,"reputation":3087,"user_id":1121571,"accept_rate":61,"display_name":"Aure77"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1433836900,"creation_date":1433836900,"answer_id":30726246,"question_id":22714359,"body_markdown":"You need to store attributes into a collection :\r\n\r\n\t// Collection to store attributes keys/values\r\n\tfinal Map&lt;String, Object&gt; attributes = new ConcurrentHashMap&lt;String, Object&gt;();\t\t\r\n\r\n\t// Mock setAttribute\r\n\tMockito.doAnswer(new Answer&lt;Void&gt;() {\r\n\t\t@Override\r\n\t\tpublic Void answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\tString key = invocation.getArgumentAt(0, String.class);\r\n\t\t\tObject value = invocation.getArgumentAt(1, Object.class);\r\n\t\t\tattributes.put(key, value);\r\n\t\t\tSystem.out.println(&quot;put attribute key=&quot;+key+&quot;, value=&quot;+value);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}).when(request).setAttribute(Mockito.anyString(), Mockito.anyObject());\r\n\r\n\t// Mock getAttribute\r\n\tMockito.doAnswer(new Answer&lt;Object&gt;() {\r\n\t\t@Override\r\n\t\tpublic Object answer(InvocationOnMock invocation) throws Throwable {\r\n\t\t\tString key = invocation.getArgumentAt(0, String.class);\r\n\t\t\tObject value = attributes.get(key);\r\n\t\t\tSystem.out.println(&quot;get attribute value for key=&quot;+key+&quot; : &quot;+value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}).when(request).getAttribute(Mockito.anyString());","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>You need to store attributes into a collection :</p>\n\n<pre><code>// Collection to store attributes keys/values\nfinal Map&lt;String, Object&gt; attributes = new ConcurrentHashMap&lt;String, Object&gt;();     \n\n// Mock setAttribute\nMockito.doAnswer(new Answer&lt;Void&gt;() {\n    @Override\n    public Void answer(InvocationOnMock invocation) throws Throwable {\n        String key = invocation.getArgumentAt(0, String.class);\n        Object value = invocation.getArgumentAt(1, Object.class);\n        attributes.put(key, value);\n        System.out.println(\"put attribute key=\"+key+\", value=\"+value);\n        return null;\n    }\n}).when(request).setAttribute(Mockito.anyString(), Mockito.anyObject());\n\n// Mock getAttribute\nMockito.doAnswer(new Answer&lt;Object&gt;() {\n    @Override\n    public Object answer(InvocationOnMock invocation) throws Throwable {\n        String key = invocation.getArgumentAt(0, String.class);\n        Object value = attributes.get(key);\n        System.out.println(\"get attribute value for key=\"+key+\" : \"+value);\n        return value;\n    }\n}).when(request).getAttribute(Mockito.anyString());\n</code></pre>\n"}],"owner":{"account_id":2176261,"reputation":580,"user_id":1926895,"accept_rate":64,"display_name":"Vivek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47137,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":30726246,"answer_count":3,"score":11,"last_activity_date":1640269992,"creation_date":1396013596,"question_id":22714359,"body_markdown":"i am mocking a HttpServletRequest , in servlet call there are new values getting set in request because using same request we are dispaching request to some jsp so request object is used as a input object to servlet as well as output for next page.\r\n\r\ni mocked all input parameters , but for all request.setAttribute() , my code is doing nothing as it&#39;s a mocked class , say if i have \r\n\r\n    request.setAttribute(a,&quot;10&quot;)\r\n    System.out.println(&quot;a = &quot; + request.getAttribute(&quot;a&quot;));\r\n\r\ni get null cuz i haven&#39;t given any behavious for Request.getAttribute(&quot;a&quot;) , and i can&#39;t , it&#39;s my response for next page , so that explain i need 2 behaviour my request object thus partial mocking , and i am unable to spy or do any partial mocking on it so far.  any ideas?\r\n\r\nCode : \r\n     \r\n     //Testcase\r\n       Myservlet.java\r\n    public void doPost(request,response)\r\n        {\r\n             String a = request.getAttribute(&quot;a&quot;);\r\n             String b = request.getAttribute(&quot;b&quot;);\r\n             int sum = Integer.parseInt(a) + Integer.parseInt(b);\r\n             request.setAttribute(&quot;sum&quot;,sum);\r\n             //well in this example i can use sum what i calculated but in real senario i can&#39;t , i have to use request.getAttribute(&quot;sum&quot;)\r\n             insertSumIntoDB(request.getAttribute(&quot;sum&quot;));\r\n        }\r\n        }\r\n\r\n\r\n\r\n      //testMyservlet.java\r\n       @test\r\n    public void testServlet()\r\n     {\r\n     HttpServletRequest request = mock(HttpServletRequest.class);\r\n         HttpServletResponse response = mock(HttpServletResponse.class);\r\n    when(request.getAttribute(a)).thenReturn(&quot;10&quot;);\r\n    when(request.getAttribute(b)).thenReturn(&quot;20&quot;);\r\n    new Myservlet(request,response);\r\n    }","title":"How to partially mock HttpServletRequest using Mockito","body":"<p>i am mocking a HttpServletRequest , in servlet call there are new values getting set in request because using same request we are dispaching request to some jsp so request object is used as a input object to servlet as well as output for next page.</p>\n\n<p>i mocked all input parameters , but for all request.setAttribute() , my code is doing nothing as it's a mocked class , say if i have </p>\n\n<pre><code>request.setAttribute(a,\"10\")\nSystem.out.println(\"a = \" + request.getAttribute(\"a\"));\n</code></pre>\n\n<p>i get null cuz i haven't given any behavious for Request.getAttribute(\"a\") , and i can't , it's my response for next page , so that explain i need 2 behaviour my request object thus partial mocking , and i am unable to spy or do any partial mocking on it so far.  any ideas?</p>\n\n<p>Code : </p>\n\n<pre><code> //Testcase\n   Myservlet.java\npublic void doPost(request,response)\n    {\n         String a = request.getAttribute(\"a\");\n         String b = request.getAttribute(\"b\");\n         int sum = Integer.parseInt(a) + Integer.parseInt(b);\n         request.setAttribute(\"sum\",sum);\n         //well in this example i can use sum what i calculated but in real senario i can't , i have to use request.getAttribute(\"sum\")\n         insertSumIntoDB(request.getAttribute(\"sum\"));\n    }\n    }\n\n\n\n  //testMyservlet.java\n   @test\npublic void testServlet()\n {\n HttpServletRequest request = mock(HttpServletRequest.class);\n     HttpServletResponse response = mock(HttpServletResponse.class);\nwhen(request.getAttribute(a)).thenReturn(\"10\");\nwhen(request.getAttribute(b)).thenReturn(\"20\");\nnew Myservlet(request,response);\n}\n</code></pre>\n"},{"tags":["java","jsp","servlets","backend"],"comments":[{"owner":{"account_id":137890,"reputation":8718,"user_id":995052,"accept_rate":56,"display_name":"Kris"},"score":0,"creation_date":1640164625,"post_id":70446657,"comment_id":124528480,"body_markdown":"Learn a little about java packages, imports and method calls.  ??","body":"Learn a little about java packages, imports and method calls.  ??"},{"owner":{"account_id":22886030,"reputation":1849,"user_id":17026900,"display_name":"Oussama ZAGHDOUD"},"score":0,"creation_date":1640164704,"post_id":70446657,"comment_id":124528518,"body_markdown":"What do you mean by &quot;external function&quot; ? try to put your code to clarify the question","body":"What do you mean by &quot;external function&quot; ? try to put your code to clarify the question"}],"owner":{"account_id":21290364,"reputation":146,"user_id":15667462,"display_name":"Osama A. Abdelnasser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1640269925,"creation_date":1640164375,"question_id":70446657,"body_markdown":"I am working on a web application using java and I need to use external function in the main servlet function, they are in the same file I don&#39;t know how. \r\nI will use the function multiple times so what should I do?\r\n\r\nfor example assume that my servlet is like this\r\nI want to execute say() inside main servlet function processRequest() and I tried this.say() and calling an object from servlet class\r\n\r\n    public void say(){\r\n            System.out.println(&quot;say called &lt;br&gt;&quot;);\r\n        }\r\n\r\n    protected void processRequest(HttpServletRequest request, HttpServletResponse response)\r\n            throws ServletException, IOException, ClassNotFoundException, SQLException {\r\n\r\n        response.setContentType(&quot;text/html;charset=UTF-8&quot;);\r\n        try (PrintWriter out = response.getWriter()) {\r\n            /* TODO output your page here. You may use following sample code. */\r\n            out.println(&quot;&lt;!DOCTYPE html&gt;&quot;);\r\n            out.println(&quot;&lt;html&gt;&quot;);\r\n            out.println(&quot;&lt;head&gt;&quot;);\r\n            out.println(&quot;&lt;title&gt;Inventory Control&lt;/title&gt;&quot;);            \r\n            out.println(&quot;&lt;/head&gt;&quot;);\r\n            out.println(&quot;&lt;body&gt;&quot;);\r\n            say();\r\n            this.say();\r\n            InventoryController inven =new InventoryController();\r\n            inven.say();\r\n            out.println(&quot;&lt;/body&gt;&quot;);\r\n            out.println(&quot;&lt;/html&gt;&quot;);\r\n        }\r\n    }","title":"how to use functions in the main servlet function","body":"<p>I am working on a web application using java and I need to use external function in the main servlet function, they are in the same file I don't know how.\nI will use the function multiple times so what should I do?</p>\n<p>for example assume that my servlet is like this\nI want to execute say() inside main servlet function processRequest() and I tried this.say() and calling an object from servlet class</p>\n<pre><code>public void say(){\n        System.out.println(&quot;say called &lt;br&gt;&quot;);\n    }\n\nprotected void processRequest(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException, ClassNotFoundException, SQLException {\n\n    response.setContentType(&quot;text/html;charset=UTF-8&quot;);\n    try (PrintWriter out = response.getWriter()) {\n        /* TODO output your page here. You may use following sample code. */\n        out.println(&quot;&lt;!DOCTYPE html&gt;&quot;);\n        out.println(&quot;&lt;html&gt;&quot;);\n        out.println(&quot;&lt;head&gt;&quot;);\n        out.println(&quot;&lt;title&gt;Inventory Control&lt;/title&gt;&quot;);            \n        out.println(&quot;&lt;/head&gt;&quot;);\n        out.println(&quot;&lt;body&gt;&quot;);\n        say();\n        this.say();\n        InventoryController inven =new InventoryController();\n        inven.say();\n        out.println(&quot;&lt;/body&gt;&quot;);\n        out.println(&quot;&lt;/html&gt;&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","xml","kotlin"],"answers":[{"tags":[],"owner":{"account_id":19182934,"reputation":74,"user_id":14014255,"display_name":"Bao Dinh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640269902,"creation_date":1640269902,"answer_id":70463505,"question_id":70462754,"body_markdown":"Since on android 10 or higher, u cant access to clipboard otherwise its will return null","title":"Clipboard does not work and return null(Android/Java)","body":"<p>Since on android 10 or higher, u cant access to clipboard otherwise its will return null</p>\n"}],"owner":{"account_id":19182934,"reputation":74,"user_id":14014255,"display_name":"Bao Dinh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70463505,"answer_count":1,"score":1,"last_activity_date":1640269902,"creation_date":1640265916,"question_id":70462754,"body_markdown":"Im making a program that everytime you click a button, it will show what text do you copy in the TextView \\\r\nBut it return null  when I call (ClipboardManager)getSystemService(CLIPBOARD_SERVICE); \\\r\nI already copy some available text (&quot;ABC&quot;) but its not work \\\r\n**I don&#39;t know if clipboard need any user permission? In my manifest I don&#39;t write anything about permission** \\\r\nPlease help me \\\r\n\r\nHere is my code:\r\n\r\n      ClipboardManager clipBoard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);\r\n\r\n    Button predictButton = (Button) mFloatingView.findViewById(R.id.predict);\r\n    predictButton.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n            Log.i(&quot;CLICK&quot;,&quot;work&quot;);\r\n            if (clipBoard != null &amp;&amp; clipBoard.getPrimaryClip() != null &amp;&amp; clipBoard.getPrimaryClip().getItemCount() &gt; 0) {\r\n                Log.i(&quot;CLIPBOARD&quot;,&quot;work&quot;);\r\n                ClipData clipData = clipBoard.getPrimaryClip();\r\n                ClipData.Item item = clipData.getItemAt(0);\r\n                String text = item.getText().toString();\r\n\r\n                final TextView textViewToChange = (TextView) mFloatingView.findViewById(R.id.predict_text);\r\n                textViewToChange.setText(text);\r\n            }\r\n        }\r\n    });\r\n\r\nAnd here is my log:\r\n\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\r\n    I/CLICK: work\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 0\r\n    I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\r\n    I/CLICK: work","title":"Clipboard does not work and return null(Android/Java)","body":"<p>Im making a program that everytime you click a button, it will show what text do you copy in the TextView <br />\nBut it return null  when I call (ClipboardManager)getSystemService(CLIPBOARD_SERVICE); <br />\nI already copy some available text (&quot;ABC&quot;) but its not work <br />\n<strong>I don't know if clipboard need any user permission? In my manifest I don't write anything about permission</strong> <br />\nPlease help me \\</p>\n<p>Here is my code:</p>\n<pre><code>  ClipboardManager clipBoard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);\n\nButton predictButton = (Button) mFloatingView.findViewById(R.id.predict);\npredictButton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        Log.i(&quot;CLICK&quot;,&quot;work&quot;);\n        if (clipBoard != null &amp;&amp; clipBoard.getPrimaryClip() != null &amp;&amp; clipBoard.getPrimaryClip().getItemCount() &gt; 0) {\n            Log.i(&quot;CLIPBOARD&quot;,&quot;work&quot;);\n            ClipData clipData = clipBoard.getPrimaryClip();\n            ClipData.Item item = clipData.getItemAt(0);\n            String text = item.getText().toString();\n\n            final TextView textViewToChange = (TextView) mFloatingView.findViewById(R.id.predict_text);\n            textViewToChange.setText(text);\n        }\n    }\n});\n</code></pre>\n<p>And here is my log:</p>\n<pre><code>I/ViewRootImpl@748418f[]: ViewPostIme pointer 1\nI/CLICK: work\nI/ViewRootImpl@748418f[]: ViewPostIme pointer 0\nI/ViewRootImpl@748418f[]: ViewPostIme pointer 1\nI/CLICK: work\n</code></pre>\n"},{"tags":["java","android","sqlite","android-studio","android-permissions"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1640269233,"post_id":70463341,"comment_id":124558013,"body_markdown":"https://commonsware.com/blog/2020/08/08/uri-access-lifetime-still-shorter-than-you-might-think.html","body":"<a href=\"https://commonsware.com/blog/2020/08/08/uri-access-lifetime-still-shorter-than-you-might-think.html\" rel=\"nofollow noreferrer\">commonsware.com/blog/2020/08/08/&hellip;</a>"},{"owner":{"account_id":23016474,"reputation":162,"user_id":17138169,"display_name":"wafaa sisalem"},"score":0,"creation_date":1640271313,"post_id":70463341,"comment_id":124558769,"body_markdown":"Thank you so much I wasted my time on this problem and finally, now I know the solution. Thank you again.","body":"Thank you so much I wasted my time on this problem and finally, now I know the solution. Thank you again."}],"answers":[{"tags":[],"owner":{"account_id":19044113,"reputation":704,"user_id":13903584,"display_name":"Muhammad Asad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640269795,"creation_date":1640269795,"answer_id":70463481,"question_id":70463341,"body_markdown":"store image URI in sqlite is very bad idea. if the path is delete then your app does not retrieve the image. So if you want to store image in sqlite then convert your image in byte[] and store this byte[] in sqlite in a BLOB column. when you retrieve BOLB then convert byte[] to image and show into image view.\r\n\r\nif you don&#39;t understand how to store then see this link:\r\n\r\nhttps://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html\r\n","title":"Get Image Uri from from SQLITE Android","body":"<p>store image URI in sqlite is very bad idea. if the path is delete then your app does not retrieve the image. So if you want to store image in sqlite then convert your image in byte[] and store this byte[] in sqlite in a BLOB column. when you retrieve BOLB then convert byte[] to image and show into image view.</p>\n<p>if you don't understand how to store then see this link:</p>\n<p><a href=\"https://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html\" rel=\"nofollow noreferrer\">https://abhiandroid.com/database/add-retrieve-image-sqlite-database-example-android-studio.html</a></p>\n"}],"owner":{"account_id":23016474,"reputation":162,"user_id":17138169,"display_name":"wafaa sisalem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640269795,"creation_date":1640269026,"question_id":70463341,"body_markdown":"I have a problem with displaying the photo by getting the URI from SQLite.\r\nI picked up an image from gallery using these lines:\r\n\r\n     Intent intent = new Intent();\r\n        intent.setType(&quot;image/*&quot;);\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        someActivityResultLauncher.launch(intent);\r\n\r\nthen I received the intent like this in `onActivityResult`:\r\n\r\n     Intent data = result.getData();\r\n     imageUri = data.getData();\r\n     circleImageView.setImageURI(imageUri);\r\n\r\nThe image is displayed well in ImageView and there is no problem. But when I stored it in SQLite as String using toString method like this: `imageUri.toString()`.\r\nI got this string from SQLite then parsed it to URI again and tried to display it with imageView put this problem appeared:\r\n\r\n    Permission Denial: opening provider com.miui.gallery.provider.GalleryOpenProvider from ProcessRecord{35f7837 4773:com.example.booklibrary/u0a538} (pid=4773, uid=10538) that is not exported from UID 10096\r\n\r\nwhat is the problem here, and why I could display the image before storing it and could not display it again after getting it from SQLite! ","title":"Get Image Uri from from SQLITE Android","body":"<p>I have a problem with displaying the photo by getting the URI from SQLite.\nI picked up an image from gallery using these lines:</p>\n<pre><code> Intent intent = new Intent();\n    intent.setType(&quot;image/*&quot;);\n    intent.setAction(Intent.ACTION_GET_CONTENT);\n    someActivityResultLauncher.launch(intent);\n</code></pre>\n<p>then I received the intent like this in <code>onActivityResult</code>:</p>\n<pre><code> Intent data = result.getData();\n imageUri = data.getData();\n circleImageView.setImageURI(imageUri);\n</code></pre>\n<p>The image is displayed well in ImageView and there is no problem. But when I stored it in SQLite as String using toString method like this: <code>imageUri.toString()</code>.\nI got this string from SQLite then parsed it to URI again and tried to display it with imageView put this problem appeared:</p>\n<pre><code>Permission Denial: opening provider com.miui.gallery.provider.GalleryOpenProvider from ProcessRecord{35f7837 4773:com.example.booklibrary/u0a538} (pid=4773, uid=10538) that is not exported from UID 10096\n</code></pre>\n<p>what is the problem here, and why I could display the image before storing it and could not display it again after getting it from SQLite!</p>\n"},{"tags":["java","eclipse","enums"],"comments":[{"owner":{"account_id":10263065,"reputation":2310,"user_id":7573818,"display_name":"Jeremy Grand"},"score":0,"creation_date":1492533673,"post_id":43477718,"comment_id":74010836,"body_markdown":"You can search manually for references (ctrl+shift+G) on every constant.","body":"You can search manually for references (ctrl+shift+G) on every constant."},{"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"score":0,"creation_date":1492533807,"post_id":43477718,"comment_id":74010904,"body_markdown":"But I have many classes with many constants so it will be quite difficult to do on every field","body":"But I have many classes with many constants so it will be quite difficult to do on every field"},{"owner":{"account_id":10263065,"reputation":2310,"user_id":7573818,"display_name":"Jeremy Grand"},"score":0,"creation_date":1492534253,"post_id":43477718,"comment_id":74011220,"body_markdown":"I know, that why I didn&#39;t post that as an answer. I don&#39;t have any viable answer for that. Maybe using a code analyzer like Sonar ?","body":"I know, that why I didn&#39;t post that as an answer. I don&#39;t have any viable answer for that. Maybe using a code analyzer like Sonar ?"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1492534557,"post_id":43477718,"comment_id":74011389,"body_markdown":"Are you absolutely sure none of your clients depend on your enum values though? If that is the case, in addition to Jeremy suggestion, I can suggest to remove all values from enum, and then add them back until project compiles again.","body":"Are you absolutely sure none of your clients depend on your enum values though? If that is the case, in addition to Jeremy suggestion, I can suggest to remove all values from enum, and then add them back until project compiles again."},{"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"score":0,"creation_date":1492534850,"post_id":43477718,"comment_id":74011574,"body_markdown":"Yes, but with many classes and constants it will be a very long process.","body":"Yes, but with many classes and constants it will be a very long process."},{"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"score":0,"creation_date":1492592350,"post_id":43477718,"comment_id":74036745,"body_markdown":"It might be a little easier to do this manually using keyboard shortcuts. With the cursor at an enum constant declaration: Open call hierarchy view on that constant (Ctrl+Alt+H); activate editor again (I have bound Ctrl+E for this); navigate to next constant declaration (Ctrl+Shift+Down).","body":"It might be a little easier to do this manually using keyboard shortcuts. With the cursor at an enum constant declaration: Open call hierarchy view on that constant (Ctrl+Alt+H); activate editor again (I have bound Ctrl+E for this); navigate to next constant declaration (Ctrl+Shift+Down)."}],"answers":[{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492537965,"creation_date":1492534467,"answer_id":43478007,"question_id":43477718,"body_markdown":"Eclipse doesn&#39;t do cross-file analysis like this by default, it only warns for unused fields in the same file.\r\n\r\nBut there are plug-ins that do cross-file analysis.\r\n\r\nThe [Unnecessary Code Detector][page] is such a plug-in.\r\n\r\nDisclaimer: I haven&#39;t used this tool myself, but it looks very promising. [The homepage says][enum] it can detect unused enum constants.\r\n\r\nScreen shot:\r\n\r\n[![Unnecessary Code Detector screen shot][1]][1]\r\n\r\n[page]: http://www.ucdetector.org/\r\n[enum]: http://www.ucdetector.org/reports/UCDetectorReport.html\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eUES5.png","title":"Find unused constants in enum class automatically","body":"<p>Eclipse doesn't do cross-file analysis like this by default, it only warns for unused fields in the same file.</p>\n\n<p>But there are plug-ins that do cross-file analysis.</p>\n\n<p>The <a href=\"http://www.ucdetector.org/\" rel=\"nofollow noreferrer\">Unnecessary Code Detector</a> is such a plug-in.</p>\n\n<p>Disclaimer: I haven't used this tool myself, but it looks very promising. <a href=\"http://www.ucdetector.org/reports/UCDetectorReport.html\" rel=\"nofollow noreferrer\">The homepage says</a> it can detect unused enum constants.</p>\n\n<p>Screen shot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eUES5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eUES5.png\" alt=\"Unnecessary Code Detector screen shot\"></a></p>\n"},{"tags":[],"owner":{"account_id":23729554,"reputation":11,"user_id":17749026,"display_name":"UweZ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640268755,"creation_date":1640268292,"answer_id":70463202,"question_id":43477718,"body_markdown":"Open one enum in &quot;Package Explorer&quot; and click down until you see the constants of this enum. Mark all constants (inside the Package Explorer!) by clicking the first constant, then hold SHIFT key and click the last constant. Now, right click on the marked constants and choose *&quot;Open Call Hierarchy Ctrl+Alt+H&quot;*. \r\n\r\nA &quot;Call Hierarchy&quot; window should open with all marked enums and their use. Enums without call hierarchy information are not used.","title":"Find unused constants in enum class automatically","body":"<p>Open one enum in &quot;Package Explorer&quot; and click down until you see the constants of this enum. Mark all constants (inside the Package Explorer!) by clicking the first constant, then hold SHIFT key and click the last constant. Now, right click on the marked constants and choose <em>&quot;Open Call Hierarchy Ctrl+Alt+H&quot;</em>.</p>\n<p>A &quot;Call Hierarchy&quot; window should open with all marked enums and their use. Enums without call hierarchy information are not used.</p>\n"}],"owner":{"account_id":2497273,"reputation":483,"user_id":2173372,"accept_rate":14,"display_name":"user2173372"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1165,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1640268755,"creation_date":1492533500,"question_id":43477718,"body_markdown":"I have many enum classes in my project which have many constants. Is there a way to find all the constants which are not used anywhere automatically in all the classes in Eclipse?\r\n\r\nFor example:\r\n\r\n    public enum Day {\r\n\t    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY\r\n    }\r\n\r\n    public enum Color {\r\n\t    RED, BLUE,GREEN, YELLOW\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\t\tSystem.out.println(Day.FRIDAY);\r\n\t\tSystem.out.println(Color.GREEN);\r\n\t}\r\n\r\nI want to find all the constants which are not used in my project automatically.\r\nSo here all days except `FRIDAY` and all colors except `GREEN` should be removed.\r\n\r\nNote: Can&#39;t use third party plugins for Eclipse.","title":"Find unused constants in enum class automatically","body":"<p>I have many enum classes in my project which have many constants. Is there a way to find all the constants which are not used anywhere automatically in all the classes in Eclipse?</p>\n\n<p>For example:</p>\n\n<pre><code>public enum Day {\n    SUNDAY, MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY\n}\n\npublic enum Color {\n    RED, BLUE,GREEN, YELLOW\n}\n\npublic static void main(String[] args) {\n    System.out.println(Day.FRIDAY);\n    System.out.println(Color.GREEN);\n}\n</code></pre>\n\n<p>I want to find all the constants which are not used in my project automatically.\nSo here all days except <code>FRIDAY</code> and all colors except <code>GREEN</code> should be removed.</p>\n\n<p>Note: Can't use third party plugins for Eclipse.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"score":2,"creation_date":1293167718,"post_id":4524347,"comment_id":4955799,"body_markdown":"what do you mean &quot;it will not work&quot;?  Computer reboots, I assume?","body":"what do you mean &quot;it will not work&quot;?  Computer reboots, I assume?"},{"owner":{"account_id":209966,"reputation":893,"user_id":461316,"accept_rate":61,"display_name":"user461316"},"score":1,"creation_date":1293167848,"post_id":4524347,"comment_id":4955807,"body_markdown":"By &quot;it will not work&quot;, I mean it does not remove it at all. It ignores it.","body":"By &quot;it will not work&quot;, I mean it does not remove it at all. It ignores it."},{"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"score":0,"creation_date":1293168030,"post_id":4524347,"comment_id":4955816,"body_markdown":"Can you put your code a bit more detailed? A little bit more code..","body":"Can you put your code a bit more detailed? A little bit more code.."},{"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"score":0,"creation_date":1293168355,"post_id":4524347,"comment_id":4955843,"body_markdown":"so how do you know it doesn&#39;t remove it?","body":"so how do you know it doesn&#39;t remove it?"}],"answers":[{"tags":[],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"down_vote_count":0,"up_vote_count":93,"is_accepted":true,"score":93,"last_activity_date":1293168314,"creation_date":1293168314,"answer_id":4524406,"question_id":4524347,"body_markdown":"The problem is you are passing an Integer to the remove method, and not an int. When you pass an Integer, it assumes that the Integer itself is what you are trying to remove, not the value at that index. Compare the methods\r\n\r\n    remove(Object o)\r\n    remove(int i)\r\n\r\nso do:\r\n\r\n    int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    someArrayList.remove(keyLocation);","title":"Java ArrayList.remove() problem","body":"<p>The problem is you are passing an Integer to the remove method, and not an int. When you pass an Integer, it assumes that the Integer itself is what you are trying to remove, not the value at that index. Compare the methods</p>\n\n<pre><code>remove(Object o)\nremove(int i)\n</code></pre>\n\n<p>so do:</p>\n\n<pre><code>int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\nsomeArrayList.remove(keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293168343,"creation_date":1293168343,"answer_id":4524410,"question_id":4524347,"body_markdown":" \r\n\r\n        int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex)); //Use a primitive int\r\n        someArrayList.remove(keyLocation);\r\n\r\n\r\n","title":"Java ArrayList.remove() problem","body":"<pre><code>    int keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex)); //Use a primitive int\n    someArrayList.remove(keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2047,"reputation":8017,"user_id":2819,"accept_rate":67,"display_name":"Yuval"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1293168465,"creation_date":1293168465,"answer_id":4524417,"question_id":4524347,"body_markdown":"The `List` interface has two `remove()` methods, one that receives an `Object` (and tries to remove this object from the list) and another that receives an `int` (and tries to remove the object whose index is the given int).\r\n\r\nUsually, giving a method an `Integer` parameter results in auto-unboxing, or automatic transform to a primitive `int`. In this case, the compiler will not attempt auto-unboxing, because there&#39;s a perfectly good method there that receives `Object`, and `Integer instanceof Object`... I&#39;m guessing your list is not `List&lt;Integer&gt;`, which is why it fails spectacularly.\r\n\r\nAdding an int to your `Integer` forces auto-unboxing, and the addition results in an `int` - perfect for the other `remove()` method.","title":"Java ArrayList.remove() problem","body":"<p>The <code>List</code> interface has two <code>remove()</code> methods, one that receives an <code>Object</code> (and tries to remove this object from the list) and another that receives an <code>int</code> (and tries to remove the object whose index is the given int).</p>\n\n<p>Usually, giving a method an <code>Integer</code> parameter results in auto-unboxing, or automatic transform to a primitive <code>int</code>. In this case, the compiler will not attempt auto-unboxing, because there's a perfectly good method there that receives <code>Object</code>, and <code>Integer instanceof Object</code>... I'm guessing your list is not <code>List&lt;Integer&gt;</code>, which is why it fails spectacularly.</p>\n\n<p>Adding an int to your <code>Integer</code> forces auto-unboxing, and the addition results in an <code>int</code> - perfect for the other <code>remove()</code> method.</p>\n"},{"tags":[],"owner":{"display_name":"user467871"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1293178596,"creation_date":1293178596,"answer_id":4525096,"question_id":4524347,"body_markdown":"Here is short description :\r\n \r\n    remove(Object o) // remove object\r\n    remove(int index) // remove the object in that index\r\n\r\nif you write `.remove(5)` compiler understands it as a primitive type so as a **index** and remove `index(5).` If you want to remove object you should write `.remove(new Integer(5))`","title":"Java ArrayList.remove() problem","body":"<p>Here is short description :</p>\n\n<pre><code>remove(Object o) // remove object\nremove(int index) // remove the object in that index\n</code></pre>\n\n<p>if you write <code>.remove(5)</code> compiler understands it as a primitive type so as a <strong>index</strong> and remove <code>index(5).</code> If you want to remove object you should write <code>.remove(new Integer(5))</code></p>\n"},{"tags":[],"owner":{"account_id":3644795,"reputation":31,"user_id":3038083,"display_name":"SomeDude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390247651,"creation_date":1390247651,"answer_id":21242933,"question_id":4524347,"body_markdown":"Or you could just do:\r\n \r\n     someArrayList.remove(keyLocation + 0);","title":"Java ArrayList.remove() problem","body":"<p>Or you could just do:</p>\n\n<pre><code> someArrayList.remove(keyLocation + 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9104387,"reputation":336,"user_id":7054483,"accept_rate":100,"display_name":"Yasser Jarouf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508867268,"creation_date":1508864795,"answer_id":46916235,"question_id":4524347,"body_markdown":"You can call this instead of creating an *int*\r\n\r\n    someArrayList.remove(integerKeyLocation.intValue());","title":"Java ArrayList.remove() problem","body":"<p>You can call this instead of creating an <em>int</em></p>\n\n<pre><code>someArrayList.remove(integerKeyLocation.intValue());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1650790,"reputation":654,"user_id":1521453,"accept_rate":67,"display_name":"Vikrant Goel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564046656,"creation_date":1564046656,"answer_id":57198556,"question_id":4524347,"body_markdown":"If you look at `ArrayList` JavaDoc, you&#39;ll find this declaration.\r\n\r\n    public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\r\n    {\r\n        public E remove(int index){\r\n        .\r\n        .\r\n        .\r\n    }\r\n\r\n`Integer` is different than `int`. Does the following make sense?\r\n\r\n    someArrayList.remove((int)keyLocation);\r\n","title":"Java ArrayList.remove() problem","body":"<p>If you look at <code>ArrayList</code> JavaDoc, you'll find this declaration.</p>\n\n<pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\n{\n    public E remove(int index){\n    .\n    .\n    .\n}\n</code></pre>\n\n<p><code>Integer</code> is different than <code>int</code>. Does the following make sense?</p>\n\n<pre><code>someArrayList.remove((int)keyLocation);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640268685,"creation_date":1640268685,"answer_id":70463276,"question_id":4524347,"body_markdown":"To make it more clear let&#39;s understand with an example. Don&#39;t read again if you get confused on the first read!!\r\n\r\nThink, this is the list (`&lt;object&gt;`) I have:\r\n\r\n    one\r\n    two\r\n    four\r\n    five\r\n    six\r\n\r\n**int**\r\n\r\n    int x = 3;\r\n    remove(x);   //this will remove &quot;five&quot;\r\n\r\n**Integer**\r\n\r\n    Integer x = 3;\r\n    remove(x);   //this will remove nothing\r\n\r\n**String**\r\n\r\n    String x = &quot;three&quot;\r\n    remove(x);   //this will remove nothing (as &quot;three&quot; is not there)\r\n\r\n","title":"Java ArrayList.remove() problem","body":"<p>To make it more clear let's understand with an example. Don't read again if you get confused on the first read!!</p>\n<p>Think, this is the list (<code>&lt;object&gt;</code>) I have:</p>\n<pre><code>one\ntwo\nfour\nfive\nsix\n</code></pre>\n<p><strong>int</strong></p>\n<pre><code>int x = 3;\nremove(x);   //this will remove &quot;five&quot;\n</code></pre>\n<p><strong>Integer</strong></p>\n<pre><code>Integer x = 3;\nremove(x);   //this will remove nothing\n</code></pre>\n<p><strong>String</strong></p>\n<pre><code>String x = &quot;three&quot;\nremove(x);   //this will remove nothing (as &quot;three&quot; is not there)\n</code></pre>\n"}],"owner":{"account_id":209966,"reputation":893,"user_id":461316,"accept_rate":61,"display_name":"user461316"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53135,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":4524406,"answer_count":8,"score":22,"last_activity_date":1640268685,"creation_date":1293167418,"question_id":4524347,"body_markdown":"This is part of my code.\r\n\r\n\r\n    Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    someArrayList.remove(keyLocation);\r\n\r\nSo what I am doing here is I assign keyLocation(the first occurence of a string in the reducedFD arrayList). But when I want to remove from someArrayList the item with that keyLocation, it will not work. \r\n\r\nIf I input manually:\r\n\r\n    someArrayList.remove(0); //Let&#39;s say 0 is the actual keyLocation\r\n\r\nThis actually works.\r\n\r\nWhat is weird is THAT THE FOLLOWING CODE ALSO WORKS:\r\n\r\n    someArrayList.remove(keyLocation + 1);\r\n\r\nAny hints?\r\n\r\nHere is the main loop:\r\n\r\n    for (int KEYindex = 0; KEYindex &lt; KeyPlus.size(); KEYindex++){\r\n   \r\n     Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\r\n    \r\n    if (reducedFD.contains(KeyPlus.get(KEYindex))){\r\n     \r\n     KeyPlus.add(reducedFD.get(keyLocation+1));\r\n     CheckedAttributesPlus.add(KeyPlus.get(KEYindex));\r\n     reducedFD.remove(keyLocation);\r\n     \r\n    }\r\n    }","title":"Java ArrayList.remove() problem","body":"<p>This is part of my code.</p>\n\n<pre><code>Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\nsomeArrayList.remove(keyLocation);\n</code></pre>\n\n<p>So what I am doing here is I assign keyLocation(the first occurence of a string in the reducedFD arrayList). But when I want to remove from someArrayList the item with that keyLocation, it will not work. </p>\n\n<p>If I input manually:</p>\n\n<pre><code>someArrayList.remove(0); //Let's say 0 is the actual keyLocation\n</code></pre>\n\n<p>This actually works.</p>\n\n<p>What is weird is THAT THE FOLLOWING CODE ALSO WORKS:</p>\n\n<pre><code>someArrayList.remove(keyLocation + 1);\n</code></pre>\n\n<p>Any hints?</p>\n\n<p>Here is the main loop:</p>\n\n<pre><code>for (int KEYindex = 0; KEYindex &lt; KeyPlus.size(); KEYindex++){\n\n Integer keyLocation = reducedFD.indexOf(KeyPlus.get(KEYindex));\n\nif (reducedFD.contains(KeyPlus.get(KEYindex))){\n\n KeyPlus.add(reducedFD.get(keyLocation+1));\n CheckedAttributesPlus.add(KeyPlus.get(KEYindex));\n reducedFD.remove(keyLocation);\n\n}\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1569509461,"post_id":58119428,"comment_id":102627885,"body_markdown":"So you basically want to filter the names and only display a given value?","body":"So you basically want to filter the names and only display a given value?"},{"owner":{"account_id":16773645,"reputation":33,"user_id":12125527,"display_name":"yesh"},"score":0,"creation_date":1569566645,"post_id":58119428,"comment_id":102645492,"body_markdown":"yes @XtremeBaumer","body":"yes @XtremeBaumer"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640268681,"creation_date":1569599597,"answer_id":58137844,"question_id":58119428,"body_markdown":"The pivot table creation in `apache poi` is only rudimentary until now.\r\n\r\n`Apache poi` adds as much pivot field items of type &quot;default&quot; (`&lt;item t=&quot;default&quot;/&gt;`)  as rows are in the data source. This is because they don&#39;t want have a look at the data and so they are assuming as much different values as rows are in the data source. This is fine because Excel will rebuild its pivot cache while opening. \r\n\r\nBut if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\r\n\r\nSo we need at least as much items as we want preselect being numbered items: `&lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...`. And we must build a cache definition which has shared elements for those items.\r\n\r\nTo fulfill that requirement we need determine the unique labels all over the rows in data source. Then for each unique label take the item as numbered item. Then build a cache definition which has shared elements for those items. Then set all not wanted items hidden.\r\n\r\nLet&#39;s have a complete example which creates what you have shown in your question&#39;s pictures. Your code in your question is incomplete, so I had must predict what data you have as data source. Please try avoiding that in further questions and always provide [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). Else you will not get answers further.\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTablePercentAndFilter {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (Workbook workbook = new XSSFWorkbook(); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ooxml-pivottable.xlsx&quot;) ) {\r\n    \r\n       Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n       Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n    \r\n       setCellData(dataSheet);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n       \r\n       XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\r\n    \r\n       pivotTable.addRowLabel(0);\r\n     \r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\r\n    \r\n       pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(\r\n        org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\r\n       DataFormat dataformat = workbook.createDataFormat();\r\n       short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\r\n       pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\r\n    \r\n       /*   \r\n       Apache poi adds 5 pivot field items of type &quot;default&quot; (&lt;item t=&quot;default&quot;/&gt;) for each row label here. \r\n       This is because there are 5 rows (A1:D5) and, because they don&#39;t want have a look at the data, \r\n       they are assuming max 5 different values. \r\n       This is fine because Excel will rebuild its pivot cache while opening. \r\n    \r\n       But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\r\n    \r\n       So we need at least as much items as we want preselect being numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...\r\n       And we must build a cache definition which has shared elements for those items.\r\n    \r\n       To fulfill that we need determine the unique labels in column. \r\n       Then for each unique label take the item as numbered item. \r\n       Then build a cache definition which has shared elements for those items. \r\n       Then set all not wanted items hidden.\r\n       */\r\n    \r\n       //determine unique labels in column 0\r\n       java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(dataSheet.getRow(r).getCell(areaReference.getFirstCell().getCol()).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;\r\n        pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).unsetT();\r\n        pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;Jack&quot;/&gt;&lt;s v=&quot;Jane&quot;/&gt;&lt;s v=&quot;Tarzan&quot;/&gt;&lt;s v=&quot;Terk&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(0)\r\n        .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       //Now we can predefinite a filter.\r\n       //If the need is selecting multiple items, first MultipleItemSelectionAllowed needs to be set.\r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).setMultipleItemSelectionAllowed(true);\r\n       //Then set H(idden) true for all items which not shall be selected. All except &quot;Jane&quot; in this case.\r\n       i = 0;\r\n       for (String item : uniqueItems) {\r\n        if (!&quot;Jane&quot;.equals(item))\r\n         pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setH(true);\r\n        i++;\r\n       }\r\n    \r\n       workbook.write(fileout);\r\n      }\r\n     }\r\n    \r\n     static void setCellData(Sheet sheet) {\r\n      Row row;\r\n      Cell cell;\r\n      Object[][] data = new Object[][]{\r\n       new Object[]{&quot;Names&quot;, &quot;Values&quot;, &quot;ColC&quot;, &quot;ColD&quot;},\r\n       new Object[]{&quot;Jane&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Tarzan&quot;, 5d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Terk&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\r\n       new Object[]{&quot;Jack&quot;, 10d, &quot;?&quot;, &quot;?&quot;}\r\n      };\r\n      for (int r = 0; r &lt; data.length; r++) {\r\n       row = sheet.createRow(r);\r\n       Object[] rowData = data[r];\r\n       for (int c = 0; c &lt; rowData.length; c++) {\r\n        cell = row.createCell(c);\r\n        if (rowData[c] instanceof String) {\r\n         cell.setCellValue((String)rowData[c]);\r\n        } else if (rowData[c] instanceof Double) {\r\n         cell.setCellValue((Double)rowData[c]);\r\n        }\r\n       }\r\n      }\r\n     }\r\n    }","title":"How to set default value for row labels in pivot table using poi","body":"<p>The pivot table creation in <code>apache poi</code> is only rudimentary until now.</p>\n<p><code>Apache poi</code> adds as much pivot field items of type &quot;default&quot; (<code>&lt;item t=&quot;default&quot;/&gt;</code>)  as rows are in the data source. This is because they don't want have a look at the data and so they are assuming as much different values as rows are in the data source. This is fine because Excel will rebuild its pivot cache while opening.</p>\n<p>But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.</p>\n<p>So we need at least as much items as we want preselect being numbered items: <code>&lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...</code>. And we must build a cache definition which has shared elements for those items.</p>\n<p>To fulfill that requirement we need determine the unique labels all over the rows in data source. Then for each unique label take the item as numbered item. Then build a cache definition which has shared elements for those items. Then set all not wanted items hidden.</p>\n<p>Let's have a complete example which creates what you have shown in your question's pictures. Your code in your question is incomplete, so I had must predict what data you have as data source. Please try avoiding that in further questions and always provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Else you will not get answers further.</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.ss.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTablePercentAndFilter {\n\n public static void main(String[] args) throws Exception {\n\n  try (Workbook workbook = new XSSFWorkbook(); \n       FileOutputStream fileout = new FileOutputStream(&quot;ooxml-pivottable.xlsx&quot;) ) {\n\n   Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n   Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n   setCellData(dataSheet);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n   \n   XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\n\n   pivotTable.addRowLabel(0);\n \n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\n\n   pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(\n    org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\n   DataFormat dataformat = workbook.createDataFormat();\n   short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\n   pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\n\n   /*   \n   Apache poi adds 5 pivot field items of type &quot;default&quot; (&lt;item t=&quot;default&quot;/&gt;) for each row label here. \n   This is because there are 5 rows (A1:D5) and, because they don't want have a look at the data, \n   they are assuming max 5 different values. \n   This is fine because Excel will rebuild its pivot cache while opening. \n\n   But if we want preselect items, then this is not fine. Then we must know what items there are that can be preselected.\n\n   So we need at least as much items as we want preselect being numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;...\n   And we must build a cache definition which has shared elements for those items.\n\n   To fulfill that we need determine the unique labels in column. \n   Then for each unique label take the item as numbered item. \n   Then build a cache definition which has shared elements for those items. \n   Then set all not wanted items hidden.\n   */\n\n   //determine unique labels in column 0\n   java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(dataSheet.getRow(r).getCell(areaReference.getFirstCell().getCol()).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;&lt;item x=&quot;2&quot;/&gt;\n    pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).unsetT();\n    pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;Jack&quot;/&gt;&lt;s v=&quot;Jane&quot;/&gt;&lt;s v=&quot;Tarzan&quot;/&gt;&lt;s v=&quot;Terk&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(0)\n    .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   //Now we can predefinite a filter.\n   //If the need is selecting multiple items, first MultipleItemSelectionAllowed needs to be set.\n   pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).setMultipleItemSelectionAllowed(true);\n   //Then set H(idden) true for all items which not shall be selected. All except &quot;Jane&quot; in this case.\n   i = 0;\n   for (String item : uniqueItems) {\n    if (!&quot;Jane&quot;.equals(item))\n     pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(0).getItems().getItemArray(i).setH(true);\n    i++;\n   }\n\n   workbook.write(fileout);\n  }\n }\n\n static void setCellData(Sheet sheet) {\n  Row row;\n  Cell cell;\n  Object[][] data = new Object[][]{\n   new Object[]{&quot;Names&quot;, &quot;Values&quot;, &quot;ColC&quot;, &quot;ColD&quot;},\n   new Object[]{&quot;Jane&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Tarzan&quot;, 5d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Terk&quot;, 10d, &quot;?&quot;, &quot;?&quot;},\n   new Object[]{&quot;Jack&quot;, 10d, &quot;?&quot;, &quot;?&quot;}\n  };\n  for (int r = 0; r &lt; data.length; r++) {\n   row = sheet.createRow(r);\n   Object[] rowData = data[r];\n   for (int c = 0; c &lt; rowData.length; c++) {\n    cell = row.createCell(c);\n    if (rowData[c] instanceof String) {\n     cell.setCellValue((String)rowData[c]);\n    } else if (rowData[c] instanceof Double) {\n     cell.setCellValue((Double)rowData[c]);\n    }\n   }\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":16773645,"reputation":33,"user_id":12125527,"display_name":"yesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":926,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58137844,"answer_count":1,"score":0,"last_activity_date":1640268681,"creation_date":1569509316,"question_id":58119428,"body_markdown":"I am working with excel reports. I need to generate pivot table with some particular field as default value in row labels rather selecting all fields. I am using apache POI.\r\n\r\n[This what I am getting automatically when I load excel sheet][1]\r\n\r\n\r\n[This is what I need][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/338lU.png\r\n  [2]: https://i.stack.imgur.com/2YALU.png\r\n\r\n    AreaReference source = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n\t\t    CellReference position = new CellReference(10,0);\r\n\t\t   \r\n\t\t     XSSFPivotTable pivotTable = sheet1.createPivotTable(source, position,wb.getSheet(&quot;1econtent&quot;));\r\n\t\t    \r\n\t\t     pivotTable.addReportFilter(2);\r\n\t\t     pivotTable.addRowLabel(0);\r\n\t\t\t     \r\n\t\t\t pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\r\n\t\t\t pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,&quot;% of value&quot;);\r\n\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\r\n\t\t\t DataFormat dataformat = wb.createDataFormat();\r\n\t\t\t short numFmtId = dataformat.getFormat(&quot;0.00%&quot;);\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId);\t\r\n\t\t\t pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleMedium10&quot;);\r\n\t\r\n\r\nI tried many ways but I didn&#39;t find any answer. \r\n","title":"How to set default value for row labels in pivot table using poi","body":"<p>I am working with excel reports. I need to generate pivot table with some particular field as default value in row labels rather selecting all fields. I am using apache POI.</p>\n\n<p><a href=\"https://i.stack.imgur.com/338lU.png\" rel=\"nofollow noreferrer\">This what I am getting automatically when I load excel sheet</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2YALU.png\" rel=\"nofollow noreferrer\">This is what I need</a></p>\n\n<pre><code>AreaReference source = new AreaReference(\"A1:D5\", SpreadsheetVersion.EXCEL2007);\n        CellReference position = new CellReference(10,0);\n\n         XSSFPivotTable pivotTable = sheet1.createPivotTable(source, position,wb.getSheet(\"1econtent\"));\n\n         pivotTable.addReportFilter(2);\n         pivotTable.addRowLabel(0);\n\n         pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1);\n         pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1,\"% of value\");\n\n         pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setShowDataAs(org.openxmlformats.schemas.spreadsheetml.x2006.main.STShowDataAs.PERCENT_OF_COL);\n         DataFormat dataformat = wb.createDataFormat();\n         short numFmtId = dataformat.getFormat(\"0.00%\");\n         pivotTable.getCTPivotTableDefinition().getDataFields().getDataFieldArray(1).setNumFmtId(numFmtId); \n         pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"PivotStyleMedium10\");\n</code></pre>\n\n<p>I tried many ways but I didn't find any answer. </p>\n"},{"tags":["java","apache-poi","pivot-table"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1572016320,"post_id":58560484,"comment_id":103441404,"body_markdown":"We need a [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). Using your provided code, nobody can reproduce your issue without having the data in your Excel sheet. Nobody, at least not I, will creating that sheet manually by guessing the data. So please provide code which creates the data also. And please provide **complete** code. Possible helpers should be able copy-&gt;paste-&gt;compile-&gt;run that provided code.","body":"We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Using your provided code, nobody can reproduce your issue without having the data in your Excel sheet. Nobody, at least not I, will creating that sheet manually by guessing the data. So please provide code which creates the data also. And please provide <b>complete</b> code. Possible helpers should be able copy-&gt;paste-&gt;compile-&gt;run that provided code."},{"owner":{"account_id":16920792,"reputation":3,"user_id":12237662,"display_name":"Rohit"},"score":0,"creation_date":1572020158,"post_id":58560484,"comment_id":103443263,"body_markdown":"HI Axel, Added the updated code which contains excel data as well.","body":"HI Axel, Added the updated code which contains excel data as well."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640268594,"creation_date":1572026755,"answer_id":58563597,"question_id":58560484,"body_markdown":"The problem is how you are building the pivot table definition and the pivot cache definition. This must be done because `apache poi` creates as much fields for each row label as rows are in the pivot table data range. This is wrong when special settings shall be made for pivot fields. You try to do that, but you do it wrong.\r\n\r\nI cannot go into detail where exactly you go wrong because  that would be too much effort. But what needs to be done is:\r\n\r\nFor each column which is row label:\r\n\r\n - Determine unique labels in that column. This is necessary to build\r\n   the cache.\r\n\r\nThen build pivot table and cache.\r\n\r\nFor each unique label:\r\n\r\n - Build pivot field item as numbered item. \r\n - Build a cache definition which has a shared element for this label.\r\n\r\nThen remove further items from pivot table definition. But leave **one** default element there, if there should be subtotals. If not, then not.\r\n\r\nComplete example:\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    class TestPivotTables {\r\n     public static void main(String[] args) throws IOException{\r\n      Workbook wb = new XSSFWorkbook();\r\n      String[][] data = new String[][]{\r\n       {&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \r\n       {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\r\n       {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},\r\n       {&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}\r\n      };\r\n    \r\n      XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n      XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n      for(String[] dataRow : data){\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(String dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        cell.setCellValue(dataCell);\r\n       }\r\n      }\r\n    \r\n      AreaReference areaReference = new AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable = pivot.createPivotTable(areaReference, new CellReference(&quot;A4&quot;), sheet);\r\n    \r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(2);\r\n      iterList.add(1);\r\n    \r\n      for (Integer j : iterList) {\r\n    \r\n       //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n       pivotTable.addRowLabel(j);\r\n    \r\n       //determine unique labels in column j\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       \r\n       //build pivot table and cache\r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;BLUE&quot;/&gt;&lt;s v=&quot;RED&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\r\n         .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       ctPivotField.setAutoShow(false);\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       //ctPivotField.setSubtotalTop(false);\r\n       //ctPivotField.setSubtotalCaption(null);\r\n       ctPivotField.setCompact(false);\r\n    \r\n       //remove further items\r\n       if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n       \r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\r\n    \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    }\r\n\r\n","title":"Getting Exception when reorder RowLabel when hiding the Subtotal -Apache POI","body":"<p>The problem is how you are building the pivot table definition and the pivot cache definition. This must be done because <code>apache poi</code> creates as much fields for each row label as rows are in the pivot table data range. This is wrong when special settings shall be made for pivot fields. You try to do that, but you do it wrong.</p>\n<p>I cannot go into detail where exactly you go wrong because  that would be too much effort. But what needs to be done is:</p>\n<p>For each column which is row label:</p>\n<ul>\n<li>Determine unique labels in that column. This is necessary to build\nthe cache.</li>\n</ul>\n<p>Then build pivot table and cache.</p>\n<p>For each unique label:</p>\n<ul>\n<li>Build pivot field item as numbered item.</li>\n<li>Build a cache definition which has a shared element for this label.</li>\n</ul>\n<p>Then remove further items from pivot table definition. But leave <strong>one</strong> default element there, if there should be subtotals. If not, then not.</p>\n<p>Complete example:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\nclass TestPivotTables {\n public static void main(String[] args) throws IOException{\n  Workbook wb = new XSSFWorkbook();\n  String[][] data = new String[][]{\n   {&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \n   {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\n   {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},\n   {&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}\n  };\n\n  XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\n  XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\n  for(String[] dataRow : data){\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(String dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    cell.setCellValue(dataCell);\n   }\n  }\n\n  AreaReference areaReference = new AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable = pivot.createPivotTable(areaReference, new CellReference(&quot;A4&quot;), sheet);\n\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(2);\n  iterList.add(1);\n\n  for (Integer j : iterList) {\n\n   //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n   pivotTable.addRowLabel(j);\n\n   //determine unique labels in column j\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   \n   //build pivot table and cache\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;BLUE&quot;/&gt;&lt;s v=&quot;RED&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\n     .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   ctPivotField.setAutoShow(false);\n   ctPivotField.setDefaultSubtotal(false);\n   //ctPivotField.setSubtotalTop(false);\n   //ctPivotField.setSubtotalCaption(null);\n   ctPivotField.setCompact(false);\n\n   //remove further items\n   if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n   \n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\n\n  FileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n}\n</code></pre>\n"}],"owner":{"account_id":16920792,"reputation":3,"user_id":12237662,"display_name":"Rohit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58563597,"answer_count":1,"score":0,"last_activity_date":1640268594,"creation_date":1572013722,"question_id":58560484,"body_markdown":"As per below code i dont want to add addRowLabel(1) but need addRowLabel(2) . After running the application and open the pivot table its giving exception but if you add addRowLabel(1)(currently commented) its working as expected. This is happening after adding the logic to hide Subtotal. Is this is the expected behaviour of apache POI or It can be fixed?\r\n  Please find the  code below. \r\nNote: This issue comes when hiding subtotal. \r\n\r\n      package com.test.pivottables;\r\n      import org.apache.poi.xssf.usermodel.*;\r\n      import org.apache.poi.ss.usermodel.*;\r\n       import org.apache.poi.ss.util.*;\r\n         import org.apache.poi.ss.*;\r\n       import java.io.*;\r\n       import java.util.ArrayList;\r\n      import java.util.HashSet;\r\n       import java.util.Iterator;\r\n     import java.util.List;\r\n     import java.util.Set;\r\n      import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n     class TestPivotTables {\r\n      public static void main(String[] args) throws IOException{\r\n\t\tWorkbook wb = new XSSFWorkbook();\r\n\t\tString[][] data = new String[][]{{&quot;STATUS&quot;,&quot;PASSED&quot;,&quot;DATA&quot;,&quot;VALUE&quot;}, \r\n      {&quot;BLUE&quot;,&quot;Y&quot;,&quot;TTT&quot;,&quot;20&quot;},\r\n     {&quot;RED&quot;,&quot;N&quot;,&quot;UUU&quot;,&quot;10&quot;},{&quot;BLUE&quot;,&quot;N&quot;,&quot;PPP&quot;,&quot;30&quot;}};\r\n\r\n\t\tXSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n\t\tXSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n\t\tfor(String[] dataRow : data){\r\n\t\t\tXSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n\t\t\tfor(String dataCell : dataRow){\r\n\t\t\t\tXSSFCell cell = \r\n            row.createCell(row.getPhysicalNumberOfCells());\r\n\t\t\t\tcell.setCellValue(dataCell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tXSSFTable table = sheet.createTable();    \r\n\t\tCTTable cttable = table.getCTTable();\r\n\t\ttable.setDisplayName(&quot;table&quot;);\r\n\t\tcttable.setRef(&quot;A1:D4&quot;);\r\n\t\tcttable.setId(1);\r\n\r\n\t\tCTTableColumns columns = cttable.addNewTableColumns();\r\n\t\tcolumns.setCount(3);\r\n\r\n\t\tint i = 1;\r\n\t\tfor (String colName : data[0]){\r\n\t\t\tCTTableColumn column = columns.addNewTableColumn();\r\n\t\t\tcolumn.setId(++i);\r\n\t\t\tcolumn.setName(colName);      \r\n\t\t}\r\n\r\n\t\tXSSFPivotTable pivotTable =  pivot.createPivotTable(new \r\n     AreaReference(&quot;A1:D4&quot;, SpreadsheetVersion.EXCEL2007),\r\n    new CellReference(&quot;A4&quot;), sheet);\r\n\r\n\t\tpivotTable.addRowLabel(0);\r\n\t\tpivotTable.addRowLabel(2);\r\n\t\t//pivotTable.addRowLabel(1);\r\n\r\n\t\tList&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n\t\titerList.add(0);\r\n\t\titerList.add(2);\r\n\t\t//iterList.add(1);\r\n\t\tpivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;Colour&quot;);\r\n       for (int j=0;j&lt;iterList.size();j++) {\r\n\t\t\tCTPivotField ctPivotField = \r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().\r\n      getPivotFieldList().get(iterList.get(j));\r\n\t\t\tfor (i = 0; i &lt; sheet.getLastRowNum()-1; i++) {\r\n\t\t\t\tif(ctPivotField.getItems().getItemArray(i)!=null) {\r\n\t\t\t\t\tctPivotField.getItems().getItemArray(i).unsetT();\r\n\t\t\t\t\tctPivotField.getItems().getItemArray(i).setX((long)i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (i = sheet.getLastRowNum(); i &gt; sheet.getLastRowNum()-2; i--) \r\n      {\r\n\t\t\t\tif(ctPivotField.getItems().getItemArray(i)!=null) {\r\n\t\t\t\t\tctPivotField.getItems().removeItem(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tctPivotField.getItems().setCount(2);\r\n\r\n\t\t\tSet&lt;String&gt; collection = new HashSet&lt;String&gt;();\r\n\t\t\tint ctr = 0;\r\n\t\t\tRow row = null;\r\n\t\t\tCell cell = null;\r\n\t\t\tboolean isNull = false;\r\n\t\t\tdo{\r\n\t\t\t\ttry{\r\n\t\t\t\t\trow = sheet.getRow(ctr);\r\n\t\t\t\t\tcell = row.getCell(0);\r\n\t\t\t\t\tcollection.add(cell.toString());\r\n\t\t\t\t\tctr++;\r\n\t\t\t\t} catch(Exception e) {\r\n\t\t\t\t\tisNull = true;\r\n\t\t\t\t}\r\n\t\t\t}while(isNull!=true);\r\n\t\t\tif(collection!=null &amp;&amp; collection.size()&gt;0) {\r\n\t\t\t\tIterator value = collection.iterator(); \r\n\t\t\t\twhile (value.hasNext()) { \r\n\t\t\t\t\tpivotTable.getPivotCacheDefinition().\r\n      getCTPivotCacheDefinition().getCacheFields().\r\n      getCacheFieldList().get(j).getSharedItems().addNewS().\r\n      setV(value.next().toString()); \r\n\t\t\t\t} \r\n\t\t\t}\r\n\t\t\tctPivotField.setAutoShow(false);\r\n\t\t\tctPivotField.setDefaultSubtotal(false);\r\n\t\t\tctPivotField.setSubtotalTop(false);\r\n\t\t\tctPivotField.setSubtotalCaption(null);\r\n\t\t\tctPivotField.setCompact(false);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;----end---&quot;);\r\n\t\tpivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, &quot;test&quot;);\r\n\r\n\t\tFileOutputStream fileOut = new FileOutputStream(&quot;pivotsample1.xlsx&quot;);\r\n\t\twb.write(fileOut);\r\n\t\twb.close();\r\n\r\n\t}}","title":"Getting Exception when reorder RowLabel when hiding the Subtotal -Apache POI","body":"<p>As per below code i dont want to add addRowLabel(1) but need addRowLabel(2) . After running the application and open the pivot table its giving exception but if you add addRowLabel(1)(currently commented) its working as expected. This is happening after adding the logic to hide Subtotal. Is this is the expected behaviour of apache POI or It can be fixed?\n  Please find the  code below. \nNote: This issue comes when hiding subtotal. </p>\n\n<pre><code>  package com.test.pivottables;\n  import org.apache.poi.xssf.usermodel.*;\n  import org.apache.poi.ss.usermodel.*;\n   import org.apache.poi.ss.util.*;\n     import org.apache.poi.ss.*;\n   import java.io.*;\n   import java.util.ArrayList;\n  import java.util.HashSet;\n   import java.util.Iterator;\n import java.util.List;\n import java.util.Set;\n  import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n class TestPivotTables {\n  public static void main(String[] args) throws IOException{\n    Workbook wb = new XSSFWorkbook();\n    String[][] data = new String[][]{{\"STATUS\",\"PASSED\",\"DATA\",\"VALUE\"}, \n  {\"BLUE\",\"Y\",\"TTT\",\"20\"},\n {\"RED\",\"N\",\"UUU\",\"10\"},{\"BLUE\",\"N\",\"PPP\",\"30\"}};\n\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\n    for(String[] dataRow : data){\n        XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n        for(String dataCell : dataRow){\n            XSSFCell cell = \n        row.createCell(row.getPhysicalNumberOfCells());\n            cell.setCellValue(dataCell);\n        }\n    }\n\n    XSSFTable table = sheet.createTable();    \n    CTTable cttable = table.getCTTable();\n    table.setDisplayName(\"table\");\n    cttable.setRef(\"A1:D4\");\n    cttable.setId(1);\n\n    CTTableColumns columns = cttable.addNewTableColumns();\n    columns.setCount(3);\n\n    int i = 1;\n    for (String colName : data[0]){\n        CTTableColumn column = columns.addNewTableColumn();\n        column.setId(++i);\n        column.setName(colName);      \n    }\n\n    XSSFPivotTable pivotTable =  pivot.createPivotTable(new \n AreaReference(\"A1:D4\", SpreadsheetVersion.EXCEL2007),\nnew CellReference(\"A4\"), sheet);\n\n    pivotTable.addRowLabel(0);\n    pivotTable.addRowLabel(2);\n    //pivotTable.addRowLabel(1);\n\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n    iterList.add(0);\n    iterList.add(2);\n    //iterList.add(1);\n    pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"Colour\");\n   for (int j=0;j&lt;iterList.size();j++) {\n        CTPivotField ctPivotField = \n   pivotTable.getCTPivotTableDefinition().getPivotFields().\n  getPivotFieldList().get(iterList.get(j));\n        for (i = 0; i &lt; sheet.getLastRowNum()-1; i++) {\n            if(ctPivotField.getItems().getItemArray(i)!=null) {\n                ctPivotField.getItems().getItemArray(i).unsetT();\n                ctPivotField.getItems().getItemArray(i).setX((long)i);\n            }\n        }\n        for (i = sheet.getLastRowNum(); i &gt; sheet.getLastRowNum()-2; i--) \n  {\n            if(ctPivotField.getItems().getItemArray(i)!=null) {\n                ctPivotField.getItems().removeItem(i);\n            }\n        }\n        ctPivotField.getItems().setCount(2);\n\n        Set&lt;String&gt; collection = new HashSet&lt;String&gt;();\n        int ctr = 0;\n        Row row = null;\n        Cell cell = null;\n        boolean isNull = false;\n        do{\n            try{\n                row = sheet.getRow(ctr);\n                cell = row.getCell(0);\n                collection.add(cell.toString());\n                ctr++;\n            } catch(Exception e) {\n                isNull = true;\n            }\n        }while(isNull!=true);\n        if(collection!=null &amp;&amp; collection.size()&gt;0) {\n            Iterator value = collection.iterator(); \n            while (value.hasNext()) { \n                pivotTable.getPivotCacheDefinition().\n  getCTPivotCacheDefinition().getCacheFields().\n  getCacheFieldList().get(j).getSharedItems().addNewS().\n  setV(value.next().toString()); \n            } \n        }\n        ctPivotField.setAutoShow(false);\n        ctPivotField.setDefaultSubtotal(false);\n        ctPivotField.setSubtotalTop(false);\n        ctPivotField.setSubtotalCaption(null);\n        ctPivotField.setCompact(false);\n    }\n    System.out.println(\"----end---\");\n    pivotTable.addColumnLabel(DataConsolidateFunction.COUNT, 3, \"test\");\n\n    FileOutputStream fileOut = new FileOutputStream(\"pivotsample1.xlsx\");\n    wb.write(fileOut);\n    wb.close();\n\n}}\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":20620422,"reputation":61,"user_id":15137572,"display_name":"tw_ob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640268559,"creation_date":1640268559,"answer_id":70463249,"question_id":70459073,"body_markdown":"I should have created org.springframework.context.support.ConversionServiceFactoryBean\r\nand generated a String to Type converter class","title":"spring failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.reflect.Type&#39;","body":"<p>I should have created org.springframework.context.support.ConversionServiceFactoryBean\nand generated a String to Type converter class</p>\n"}],"owner":{"account_id":20620422,"reputation":61,"user_id":15137572,"display_name":"tw_ob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640268559,"creation_date":1640245408,"question_id":70459073,"body_markdown":"I am using a library that has this bean defied:\r\n```\r\n&lt;bean id=&quot;campaignCpcCacheClientFactory&quot; class=&quot;com.mycompany.infra.cache.folsom.MemcachedClientFactory&quot; factory-method=&quot;createClientFactory&quot; lazy-init=&quot;true&quot;&gt;\r\n    &lt;constructor-arg name=&quot;clientType&quot; value=&quot;JSON&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;cacheName&quot; value=&quot;CampaignCpcCache&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;keyTranslator&quot;&gt;\r\n      &lt;bean class=&quot;com.mycompany.cpc.cachekey.CpcFeaturesCacheKeyTranslator&quot;&gt;\r\n        &lt;constructor-arg value=&quot;CampaignCPC&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    &lt;/constructor-arg&gt;\r\n    &lt;constructor-arg name=&quot;valueType&quot; value=&quot;com.mycompany.cpc.CampaignCpc&quot;/&gt;\r\n    &lt;constructor-arg name=&quot;expirationSeconds&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.ttl_seconds}&quot;/&gt;\r\n    &lt;property name=&quot;consulClusterName&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.cluster.name}&quot;/&gt;\r\n    &lt;property name=&quot;targetsRefreshPeriod&quot; value=&quot;10000&quot;/&gt;\r\n  &lt;/bean&gt;\r\n```\r\n\r\nwhen I inject this bean as a constructor arg to my own object (on xml)\r\nthis crushes on startup, saying:\r\n\r\nFailed to create that bean. could not convert factory method argument value of type [java.lang.String] to required type [java.lang.reflect.Type].Unsatisfied dependency expressed through constructor argument with index 3 of type [java.lang.reflect.Type]\r\nno matching editors or conversion strategy found\r\n\r\nArg#3 is com.mycompany.cpc.CampaignCpc which is a class on the same dependency module.\r\n\r\nOther modules at the same project use that bean and don&#39;t have any trouble loading. ","title":"spring failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.reflect.Type&#39;","body":"<p>I am using a library that has this bean defied:</p>\n<pre><code>&lt;bean id=&quot;campaignCpcCacheClientFactory&quot; class=&quot;com.mycompany.infra.cache.folsom.MemcachedClientFactory&quot; factory-method=&quot;createClientFactory&quot; lazy-init=&quot;true&quot;&gt;\n    &lt;constructor-arg name=&quot;clientType&quot; value=&quot;JSON&quot;/&gt;\n    &lt;constructor-arg name=&quot;cacheName&quot; value=&quot;CampaignCpcCache&quot;/&gt;\n    &lt;constructor-arg name=&quot;keyTranslator&quot;&gt;\n      &lt;bean class=&quot;com.mycompany.cpc.cachekey.CpcFeaturesCacheKeyTranslator&quot;&gt;\n        &lt;constructor-arg value=&quot;CampaignCPC&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/constructor-arg&gt;\n    &lt;constructor-arg name=&quot;valueType&quot; value=&quot;com.mycompany.cpc.CampaignCpc&quot;/&gt;\n    &lt;constructor-arg name=&quot;expirationSeconds&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.ttl_seconds}&quot;/&gt;\n    &lt;property name=&quot;consulClusterName&quot; value=&quot;${com.mycompany.cpcfeatures.memcache.cluster.name}&quot;/&gt;\n    &lt;property name=&quot;targetsRefreshPeriod&quot; value=&quot;10000&quot;/&gt;\n  &lt;/bean&gt;\n</code></pre>\n<p>when I inject this bean as a constructor arg to my own object (on xml)\nthis crushes on startup, saying:</p>\n<p>Failed to create that bean. could not convert factory method argument value of type [java.lang.String] to required type [java.lang.reflect.Type].Unsatisfied dependency expressed through constructor argument with index 3 of type [java.lang.reflect.Type]\nno matching editors or conversion strategy found</p>\n<p>Arg#3 is com.mycompany.cpc.CampaignCpc which is a class on the same dependency module.</p>\n<p>Other modules at the same project use that bean and don't have any trouble loading.</p>\n"},{"tags":["javascript","java","apache-poi","pivot-table"],"comments":[{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1573739225,"post_id":58848489,"comment_id":103987767,"body_markdown":"Hi All, Can we achieve the &quot;Repeat All Items Label&quot; from apache POI.","body":"Hi All, Can we achieve the &quot;Repeat All Items Label&quot; from apache POI."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640268536,"creation_date":1574015776,"answer_id":58903846,"question_id":58848489,"body_markdown":"The &quot;Repeat All Items Label&quot; setting for pivot tables was implemented after the `Office Open XML` was published. That&#39;s why it is not part of it. It uses special extended `XML` from name space `x14`. But `apache poi` only provides `Office Open XML`.\r\n\r\nSo if we want using extended `XML` from name space `x14`, we need doing that on low `XML` level.\r\n\r\nFirst we need setting updated pivot table version to 6 instead of 3.\r\n\r\nThen we need set `&lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt;` for each `CTPivotField`. This is the &quot;Repeat All Items Label&quot; setting.\r\n\r\nComplete example which extends your showed code:\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    public class TestPivotTable {\r\n     public static void main(String[] args) throws Exception {\r\n      Workbook wb = new XSSFWorkbook();\r\n      Object[][] data = new Object[][]{\r\n       {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\r\n      };\r\n    \r\n      XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n      XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n      for(Object[] dataRow : data){\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(Object dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        if (dataCell instanceof String) {\r\n         cell.setCellValue((String)dataCell);\r\n        } else if (dataCell instanceof Double) {\r\n         cell.setCellValue((Double)dataCell);\r\n        }\r\n       }\r\n      }\r\n    \r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(1);\r\n      iterList.add(2);\r\n      iterList.add(3);\r\n      iterList.add(4);\r\n      iterList.add(5);\r\n      iterList.add(6);\r\n    \r\n      //set updated pivot table version to 6\r\n      //necessary to make extended pivot table setting available\r\n      pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n    \r\n      for (Integer j : iterList) {\r\n    \r\n       //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n       pivotTable.addRowLabel(j);\r\n    \r\n       //determine unique labels in column j\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n       }\r\n       System.out.println(uniqueItems);\r\n       \r\n       //build pivot table and cache\r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        //build a cache definition which has shared elements for those items \r\n        //&lt;sharedItems&gt;&lt;s v=&quot;TOM&quot;/&gt;&lt;s v=&quot;HARRY&quot;/&gt;&lt;/sharedItems&gt;\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\r\n         .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n    \r\n       //ctPivotField.setAutoShow(false);\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       //ctPivotField.setSubtotalTop(false);\r\n       //ctPivotField.setSubtotalCaption(null);\r\n       //ctPivotField.setCompact(false);\r\n       ctPivotField.setOutline(false);\r\n    \r\n       //remove further items\r\n       if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n    \r\n       //set &lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt; for each CTPivotField\r\n       //this is the &quot;Repeat All Items Label&quot; setting\r\n       CTExtensionList extList = ctPivotField.addNewExtLst();\r\n       CTExtension ext = extList.addNewExt();\r\n       String extXML = \r\n          &quot;&lt;x14:pivotField&quot;\r\n        + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&quot;\r\n        + &quot; fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;;\r\n       org.apache.xmlbeans.XmlObject xlmObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n       ext.set(xlmObject);\r\n       ext.setUri(&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}&quot;);  \r\n       \r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n    \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    }\r\n\r\nNote: I have removed the `XSSFTable` creation from your code since it is not necessary and is done wrong and leads to a corrupted `Excel` file if done as you have done it.\r\n","title":"How to Repeat All Labels in PIVOT Table- Apache POI","body":"<p>The &quot;Repeat All Items Label&quot; setting for pivot tables was implemented after the <code>Office Open XML</code> was published. That's why it is not part of it. It uses special extended <code>XML</code> from name space <code>x14</code>. But <code>apache poi</code> only provides <code>Office Open XML</code>.</p>\n<p>So if we want using extended <code>XML</code> from name space <code>x14</code>, we need doing that on low <code>XML</code> level.</p>\n<p>First we need setting updated pivot table version to 6 instead of 3.</p>\n<p>Then we need set <code>&lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt;</code> for each <code>CTPivotField</code>. This is the &quot;Repeat All Items Label&quot; setting.</p>\n<p>Complete example which extends your showed code:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class TestPivotTable {\n public static void main(String[] args) throws Exception {\n  Workbook wb = new XSSFWorkbook();\n  Object[][] data = new Object[][]{\n   {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\n  };\n\n  XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\n  XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\n  for(Object[] dataRow : data){\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(Object dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    if (dataCell instanceof String) {\n     cell.setCellValue((String)dataCell);\n    } else if (dataCell instanceof Double) {\n     cell.setCellValue((Double)dataCell);\n    }\n   }\n  }\n\n  AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(1);\n  iterList.add(2);\n  iterList.add(3);\n  iterList.add(4);\n  iterList.add(5);\n  iterList.add(6);\n\n  //set updated pivot table version to 6\n  //necessary to make extended pivot table setting available\n  pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n  for (Integer j : iterList) {\n\n   //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n   pivotTable.addRowLabel(j);\n\n   //determine unique labels in column j\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n   }\n   System.out.println(uniqueItems);\n   \n   //build pivot table and cache\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    //build a cache definition which has shared elements for those items \n    //&lt;sharedItems&gt;&lt;s v=&quot;TOM&quot;/&gt;&lt;s v=&quot;HARRY&quot;/&gt;&lt;/sharedItems&gt;\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(j)\n     .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n\n   //ctPivotField.setAutoShow(false);\n   ctPivotField.setDefaultSubtotal(false);\n   //ctPivotField.setSubtotalTop(false);\n   //ctPivotField.setSubtotalCaption(null);\n   //ctPivotField.setCompact(false);\n   ctPivotField.setOutline(false);\n\n   //remove further items\n   if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n\n   //set &lt;x14:pivotField fillDownLabels=&quot;1&quot;/&gt; for each CTPivotField\n   //this is the &quot;Repeat All Items Label&quot; setting\n   CTExtensionList extList = ctPivotField.addNewExtLst();\n   CTExtension ext = extList.addNewExt();\n   String extXML = \n      &quot;&lt;x14:pivotField&quot;\n    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&quot;\n    + &quot; fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;;\n   org.apache.xmlbeans.XmlObject xlmObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n   ext.set(xlmObject);\n   ext.setUri(&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}&quot;);  \n   \n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\n\n  FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n}\n</code></pre>\n<p>Note: I have removed the <code>XSSFTable</code> creation from your code since it is not necessary and is done wrong and leads to a corrupted <code>Excel</code> file if done as you have done it.</p>\n"}],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":688,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58903846,"answer_count":1,"score":0,"last_activity_date":1640268536,"creation_date":1573698307,"question_id":58848489,"body_markdown":"How to achieve the Repeat All items in Pivot table as per below screen shot and also need to know how we can get that drop down icon across all columns. now drop down icon showing only at the first column.\r\nIs Repeat All Items is achievable in Apache POI?.\r\n\r\nbelow is the code.\r\n\r\nOutput which i am getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\noutput which i need:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n     public class TestPivotTable\r\n     {\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n        Workbook wb = new XSSFWorkbook();\r\n        String[][] data = new String[][]{{&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n     {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,&quot;7,80,936.58&quot;},\r\n            {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,&quot;136.28&quot;},\r\n            {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,&quot;191468.21&quot;},\r\n            {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,&quot;10.11&quot;}};\r\n\r\n        XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n        XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n        for(String[] dataRow : data){\r\n            XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n            for(String dataCell : dataRow){\r\n                XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n                cell.setCellValue(dataCell);\r\n            }\r\n        }\r\n        XSSFTable table = sheet.createTable();    \r\n        CTTable cttable = table.getCTTable();\r\n        table.setDisplayName(&quot;table&quot;);\r\n        cttable.setRef(&quot;A1:D4&quot;);\r\n        cttable.setId(1);\r\n\r\n        CTTableColumns columns = cttable.addNewTableColumns();\r\n        columns.setCount(3);\r\n\r\n        int g = 1;\r\n        for (String colName : data[0]){\r\n            CTTableColumn column = columns.addNewTableColumn();\r\n            column.setId(++g);\r\n            column.setName(colName);      \r\n        }\r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + \r\n      1),SpreadsheetVersion.EXCEL2007);\r\n      FileOutputStream fileOut=null;\r\n      try {\r\n        XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), \r\n      sheet);\r\n\r\n        pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n\r\n        List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n\r\n        iterList.add(0);\r\n        iterList.add(1);\r\n        iterList.add(2);\r\n        iterList.add(3);\r\n        iterList.add(4);\r\n        iterList.add(5);\r\n        iterList.add(6);\r\n\r\n        for (Integer j : iterList) {\r\n\r\n            pivotTable.addRowLabel(j);\r\n            TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n            for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \r\n       areaReference.getLastCell().getRow()+1; r++) {\r\n                uniqueItems.add(sheet.getRow(r).getCell(j).toString());\r\n            }\r\n            System.out.println(uniqueItems);\r\n            CTPivotField ctPivotField = \r\n       pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n            int i = 0;\r\n            for (String item : uniqueItems) {\r\n                ctPivotField.getItems().getItemArray(i).unsetT();\r\n                ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n\r\n\r\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().\r\n     getCacheFieldArray(j)\r\n                .getSharedItems().addNewS().setV(item);\r\n                i++;\r\n            }\r\n           // ctPivotField.setAutoShow(false);\r\n            ctPivotField.setDefaultSubtotal(false);\r\n             ctPivotField.setOutline(false);\r\n           // ctPivotField.setCompact(false);\r\n           // ctPivotField.setSubtotalTop(true);\r\n            if (ctPivotField.getDefaultSubtotal()) i++; \r\n            for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n                ctPivotField.getItems().removeItem(k);\r\n            }\r\n            ctPivotField.getItems().setCount(i);\r\n\r\n        }\r\n\r\n        System.out.println(&quot;----end---&quot;);\r\n\r\n        pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n\r\n        fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n        wb.write(fileOut);\r\n    }catch(Exception e) {\r\n        System.out.println(&quot;Exception While Creating Pivot Table&quot;+e);\r\n    }finally {\r\n        fileOut.close();\r\n        wb.close();\r\n    }\r\n\r\n    }\r\n   }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r7hKc.png\r\n  [2]: https://i.stack.imgur.com/wFkjc.png","title":"How to Repeat All Labels in PIVOT Table- Apache POI","body":"<p>How to achieve the Repeat All items in Pivot table as per below screen shot and also need to know how we can get that drop down icon across all columns. now drop down icon showing only at the first column.\nIs Repeat All Items is achievable in Apache POI?.</p>\n\n<p>below is the code.</p>\n\n<p>Output which i am getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/r7hKc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r7hKc.png\" alt=\"enter image description here\"></a></p>\n\n<p>output which i need:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wFkjc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wFkjc.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code> public class TestPivotTable\n {\npublic static void main(String[] args) throws Exception\n{\n    Workbook wb = new XSSFWorkbook();\n    String[][] data = new String[][]{{\"AAA\",\"BBB\",\"CCC\",\"DDD\",\"EEE\",\"FFF\",\"GGG\",\"HHH\"}, \n {\"TOM\",\"DUMMY\",\"VAL\",\"1001683\",\"Description1\",\"27/04/2017\",\"CAT\",\"7,80,936.58\"},\n        {\"TOM\",\"DUMMY\",\"VAL\",\"1001695\",\"Description2\",\"27/04/2017\",\"CAT\",\"136.28\"},\n        {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001692\",\"Description3\",\"03/05/2017\",\"CAT1\",\"191468.21\"},\n        {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001698\",\"Description4\",\"04/05/2017\",\"CAT1\",\"10.11\"}};\n\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\n    for(String[] dataRow : data){\n        XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n        for(String dataCell : dataRow){\n            XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n            cell.setCellValue(dataCell);\n        }\n    }\n    XSSFTable table = sheet.createTable();    \n    CTTable cttable = table.getCTTable();\n    table.setDisplayName(\"table\");\n    cttable.setRef(\"A1:D4\");\n    cttable.setId(1);\n\n    CTTableColumns columns = cttable.addNewTableColumns();\n    columns.setCount(3);\n\n    int g = 1;\n    for (String colName : data[0]){\n        CTTableColumn column = columns.addNewTableColumn();\n        column.setId(++g);\n        column.setName(colName);      \n    }\n  AreaReference areaReference = new AreaReference(\"A1:H\"+ (sheet.getLastRowNum() + \n  1),SpreadsheetVersion.EXCEL2007);\n  FileOutputStream fileOut=null;\n  try {\n    XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(\"A1\"), \n  sheet);\n\n    pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"AAA\");\n\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n\n    iterList.add(0);\n    iterList.add(1);\n    iterList.add(2);\n    iterList.add(3);\n    iterList.add(4);\n    iterList.add(5);\n    iterList.add(6);\n\n    for (Integer j : iterList) {\n\n        pivotTable.addRowLabel(j);\n        TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n        for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \n   areaReference.getLastCell().getRow()+1; r++) {\n            uniqueItems.add(sheet.getRow(r).getCell(j).toString());\n        }\n        System.out.println(uniqueItems);\n        CTPivotField ctPivotField = \n   pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n        int i = 0;\n        for (String item : uniqueItems) {\n            ctPivotField.getItems().getItemArray(i).unsetT();\n            ctPivotField.getItems().getItemArray(i).setX((long)i);\n\n\npivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().\n getCacheFieldArray(j)\n            .getSharedItems().addNewS().setV(item);\n            i++;\n        }\n       // ctPivotField.setAutoShow(false);\n        ctPivotField.setDefaultSubtotal(false);\n         ctPivotField.setOutline(false);\n       // ctPivotField.setCompact(false);\n       // ctPivotField.setSubtotalTop(true);\n        if (ctPivotField.getDefaultSubtotal()) i++; \n        for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n            ctPivotField.getItems().removeItem(k);\n        }\n        ctPivotField.getItems().setCount(i);\n\n    }\n\n    System.out.println(\"----end---\");\n\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, \"SUM\");\n\n    fileOut = new FileOutputStream(\"newoutputfile.xlsx\");\n    wb.write(fileOut);\n}catch(Exception e) {\n    System.out.println(\"Exception While Creating Pivot Table\"+e);\n}finally {\n    fileOut.close();\n    wb.close();\n}\n\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","apache-poi","pivot","pivot-table"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1574857775,"post_id":59070187,"comment_id":104378484,"body_markdown":"Have you tried to use `CellStyle`s? https://stackoverflow.com/questions/38874115/java-apache-poi-how-to-set-background-color-and-borders-at-same-time","body":"Have you tried to use <code>CellStyle</code>s? <a href=\"https://stackoverflow.com/questions/38874115/java-apache-poi-how-to-set-background-color-and-borders-at-same-time\" title=\"java apache poi how to set background color and borders at same time\">stackoverflow.com/questions/38874115/&hellip;</a>"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1574858514,"post_id":59070187,"comment_id":104378924,"body_markdown":"See https://stackoverflow.com/questions/56609207/how-to-change-the-pivot-table-style-from-default-blue-to-other-colors-using-apac/56609527#56609527. Best match of your wants might be \n`pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);`","body":"See <a href=\"https://stackoverflow.com/questions/56609207/how-to-change-the-pivot-table-style-from-default-blue-to-other-colors-using-apac/56609527#56609527\" title=\"how to change the pivot table style from default blue to other colors using apac\">stackoverflow.com/questions/56609207/&hellip;</a>. Best match of your wants might be  <code>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInf&zwnj;&#8203;o().setName(&quot;PivotSt&zwnj;&#8203;yleDark7&quot;);</code>"},{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1574858780,"post_id":59070187,"comment_id":104379061,"body_markdown":"Hi Axel, i tried above but it not matching the requirement. i need to have only header and Grand Total should be Dark Green. is there any ways to achieve it.","body":"Hi Axel, i tried above but it not matching the requirement. i need to have only header and Grand Total should be Dark Green. is there any ways to achieve it."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1574859959,"post_id":59070187,"comment_id":104379703,"body_markdown":"As said in my linked answer, names of possible named styles can be got from Excels GUI in `PivotTable Tools` tab - `Design`. Other default pivot table styles are not present. They would must be created then.","body":"As said in my linked answer, names of possible named styles can be got from Excels GUI in <code>PivotTable Tools</code> tab - <code>Design</code>. Other default pivot table styles are not present. They would must be created then."},{"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"score":0,"creation_date":1574907833,"post_id":59070187,"comment_id":104398556,"body_markdown":"Thank You Axel, Currently i am using pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleLight21&quot;); which is light green . As of now i am ok with this color combination.","body":"Thank You Axel, Currently i am using pivotTable.getCTPivotTableDefinition().getPivotTableStyleInf&zwnj;&#8203;o().setName(&quot;PivotSt&zwnj;&#8203;yleLight21&quot;); which is light green . As of now i am ok with this color combination."}],"answers":[{"tags":[],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574908503,"creation_date":1574908503,"answer_id":59080987,"question_id":59070187,"body_markdown":"To achieve the required o/p we can use \r\n\r\npivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleLight21&quot;); which is light green. In this case only header and grand total row will have light green background. Currently its satisfies my requirement.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iCEvO.png","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>To achieve the required o/p we can use </p>\n\n<p>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"PivotStyleLight21\"); which is light green. In this case only header and grand total row will have light green background. Currently its satisfies my requirement.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iCEvO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iCEvO.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640268491,"creation_date":1574933950,"answer_id":59085731,"question_id":59070187,"body_markdown":"In `Excel` pivot tables are styled using special named pivot table styles. The names of possible named styles can be got from `Excel`&#39;s `GUI` in `PivotTable Tools` tab - `Design`. To set a style use:\r\n\r\n    pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\r\n\r\nwhere `PivotStyleDark7` is the name of the named style.\r\n\r\nIf none of the default styles fulfill the requirements, then new named styles must be created. In `Excel`&#39;s `GUI` this is possible by creating a new pivot table style and format some of the given table style types, for example: header row, totals row, ...\r\n\r\nIf that shall be done using `apache poi`, then in [StylesTable](https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/model/StylesTable.html) a new table style must be created. There for each table style type a table style element must point to a predefined `dxf` having the format.\r\n\r\n    ...\r\n      // create a new custom pivot table style\r\n      // create dxf for each needed table style type\r\n      STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\r\n      CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\r\n      STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\r\n      CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\r\n      STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\r\n      CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\r\n      STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\r\n      CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\r\n      // map table style types to dxf\r\n      Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\r\n      typeStyles.put(headerRow, headerRowDxf);\r\n      typeStyles.put(totalRow, totalRowDxf);\r\n      typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\r\n      typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\r\n      // \r\n      createPivotTableStyle(((XSSFWorkbook)wb).getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\r\n      pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\r\n    ...\r\n___________________________________\r\n\r\n    ...\r\n     static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\r\n      CTDxf dxf = CTDxf.Factory.newInstance();\r\n      CTFont font = dxf.addNewFont();\r\n      if (fontBold) font.addNewB();\r\n      if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\r\n      if (fillRGB != null) {\r\n       CTFill fill = dxf.addNewFill();\r\n       fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\r\n      }\r\n      return dxf;\r\n     }\r\n    \r\n     static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\r\n    \r\n      // get or create table styles\r\n      CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\r\n      if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\r\n    \r\n      // add table style named as styleName\r\n      CTTableStyle tableStyle = tableStyles.addNewTableStyle();\r\n      tableStyle.setName(styleName);\r\n    \r\n      // set TableStyleType styles: TableStyleType -&gt; dxf\r\n      for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\r\n        STTableStyleType.Enum type = entry.getKey();\r\n        CTDxf typeDxf = entry.getValue();\r\n        int dxfId = stylesTable.putDxf(typeDxf);\r\n        CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\r\n        tableStyleElement.setDxfId(dxfId-1);\r\n        tableStyleElement.setType(type);\r\n      }\r\n     }\r\n    ...\r\n\r\n____________________________\r\n\r\nComplete Example:\r\n\r\n\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.xssf.model.StylesTable;\r\n    \r\n    import org.apache.poi.ss.usermodel.DataConsolidateFunction;\r\n    import org.apache.poi.ss.usermodel.DataFormatter;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    \r\n    import java.io.FileOutputStream;\r\n    \r\n    import java.util.*;\r\n    \r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n    \r\n    public class Testpivot8 {\r\n     public static void main(String[] args) throws Exception {\r\n      DataFormatter formatter = new DataFormatter(Locale.US);\r\n      XSSFWorkbook wb = new XSSFWorkbook();\r\n      XSSFCellStyle dateStyle = wb.createCellStyle();\r\n      dateStyle.setDataFormat(wb.createDataFormat().getFormat(&quot;mm/dd/yyyy&quot;));\r\n    \r\n      Object[][] data = new Object[][]{\r\n       {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001683,&quot;Description1&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,780936.58},\r\n       {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001695,&quot;Description2&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,136.28},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001692,&quot;Description3&quot;,new GregorianCalendar(2017, 4, 3),&quot;CAT1&quot;,191468.21},\r\n       {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001698,&quot;Description4&quot;,new GregorianCalendar(2017, 4, 4),&quot;CAT1&quot;,10.11}\r\n      };\r\n    \r\n      XSSFSheet sheet = wb.createSheet(&quot;data&quot;);\r\n      for(Object[] dataRow : data) {\r\n       XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n       for(Object dataCell : dataRow){\r\n        XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n        if (dataCell instanceof String) {\r\n         cell.setCellValue((String)dataCell);\r\n        } else if (dataCell instanceof Double) {\r\n         cell.setCellValue((Double)dataCell);\r\n        } else if (dataCell instanceof Integer) {\r\n         cell.setCellValue((Integer)dataCell);\r\n        } else if (dataCell instanceof GregorianCalendar) {\r\n         cell.setCellValue((GregorianCalendar)dataCell);\r\n         cell.setCellStyle(dateStyle);\r\n        }\r\n       }\r\n      }\r\n    \r\n      XSSFSheet pivot = wb.createSheet(&quot;summary&quot;);\r\n      int rowCount = data.length;\r\n      int colCount = data[0].length;\r\n      AreaReference areaReference = new AreaReference(new CellReference(&quot;A1&quot;), new CellReference(rowCount-1, colCount-1), SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\r\n      pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n    \r\n      List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n      iterList.add(0);\r\n      iterList.add(1);\r\n      iterList.add(2);\r\n      iterList.add(3);\r\n      iterList.add(4);\r\n      iterList.add(5);\r\n      iterList.add(6);\r\n    \r\n      pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n    \r\n      for (Integer j : iterList) {\r\n       pivotTable.addRowLabel(j);\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n        uniqueItems.add(formatter.formatCellValue(sheet.getRow(r).getCell(j)));\r\n       }\r\n    \r\n       System.out.println(uniqueItems);\r\n    \r\n       CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n       int i = 0;\r\n       for (String item : uniqueItems) {\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n        ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\r\n         .getCacheFieldArray(j).getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n       ctPivotField.setDefaultSubtotal(false);\r\n       ctPivotField.setOutline(false);\r\n    \r\n       if (ctPivotField.getDefaultSubtotal()) i++; \r\n       for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n        ctPivotField.getItems().removeItem(k);\r\n       }\r\n       ctPivotField.getItems().setCount(i);\r\n    \r\n       CTExtensionList extList = ctPivotField.addNewExtLst();\r\n       String extXML = \r\n          &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\r\n        + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\r\n        + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\r\n        + &quot;&lt;/ext&gt;&quot;;\r\n       org.apache.xmlbeans.XmlObject xlmObject = \r\n       org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n       extList.set(xlmObject);\r\n      }\r\n    \r\n      System.out.println(&quot;----end---&quot;);\r\n    \r\n      pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n    \r\n      // create a new custom pivot table style\r\n      // create dxf for each needed table style type\r\n      STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\r\n      CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\r\n      STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\r\n      CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\r\n      STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\r\n      CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\r\n      STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\r\n      CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\r\n      // map table style types to dxf\r\n      Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\r\n      typeStyles.put(headerRow, headerRowDxf);\r\n      typeStyles.put(totalRow, totalRowDxf);\r\n      typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\r\n      typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\r\n      // \r\n      createPivotTableStyle(wb.getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\r\n      pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\r\n    \r\n      sheet.setSelected(false);\r\n      wb.setActiveSheet(wb.getSheetIndex(pivot));\r\n     \r\n      FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n      wb.write(fileOut);\r\n      fileOut.close();\r\n      wb.close();\r\n     }\r\n    \r\n     static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\r\n      CTDxf dxf = CTDxf.Factory.newInstance();\r\n      CTFont font = dxf.addNewFont();\r\n      if (fontBold) font.addNewB();\r\n      if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\r\n      if (fillRGB != null) {\r\n       CTFill fill = dxf.addNewFill();\r\n       fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\r\n      }\r\n      return dxf;\r\n     }\r\n    \r\n     static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\r\n    \r\n      // get or create table styles\r\n      CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\r\n      if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\r\n    \r\n      // add table style named as styleName\r\n      CTTableStyle tableStyle = tableStyles.addNewTableStyle();\r\n      tableStyle.setName(styleName);\r\n    \r\n      // set TableStyleType styles: TableStyleType -&gt; dxf\r\n      for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\r\n        STTableStyleType.Enum type = entry.getKey();\r\n        CTDxf typeDxf = entry.getValue();\r\n        int dxfId = stylesTable.putDxf(typeDxf);\r\n        CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\r\n        tableStyleElement.setDxfId(dxfId-1);\r\n        tableStyleElement.setType(type);\r\n      }\r\n     }\r\n    }","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>In <code>Excel</code> pivot tables are styled using special named pivot table styles. The names of possible named styles can be got from <code>Excel</code>'s <code>GUI</code> in <code>PivotTable Tools</code> tab - <code>Design</code>. To set a style use:</p>\n<pre><code>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\n</code></pre>\n<p>where <code>PivotStyleDark7</code> is the name of the named style.</p>\n<p>If none of the default styles fulfill the requirements, then new named styles must be created. In <code>Excel</code>'s <code>GUI</code> this is possible by creating a new pivot table style and format some of the given table style types, for example: header row, totals row, ...</p>\n<p>If that shall be done using <code>apache poi</code>, then in <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xssf/model/StylesTable.html\" rel=\"nofollow noreferrer\">StylesTable</a> a new table style must be created. There for each table style type a table style element must point to a predefined <code>dxf</code> having the format.</p>\n<pre><code>...\n  // create a new custom pivot table style\n  // create dxf for each needed table style type\n  STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\n  CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\n  STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\n  CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)0, (byte)80, (byte)0});\n  STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\n  CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\n  STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\n  CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\n  // map table style types to dxf\n  Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\n  typeStyles.put(headerRow, headerRowDxf);\n  typeStyles.put(totalRow, totalRowDxf);\n  typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\n  typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\n  // \n  createPivotTableStyle(((XSSFWorkbook)wb).getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\n  pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\n...\n</code></pre>\n<hr />\n<pre><code>...\n static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\n  CTDxf dxf = CTDxf.Factory.newInstance();\n  CTFont font = dxf.addNewFont();\n  if (fontBold) font.addNewB();\n  if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\n  if (fillRGB != null) {\n   CTFill fill = dxf.addNewFill();\n   fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\n  }\n  return dxf;\n }\n\n static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\n\n  // get or create table styles\n  CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\n  if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\n\n  // add table style named as styleName\n  CTTableStyle tableStyle = tableStyles.addNewTableStyle();\n  tableStyle.setName(styleName);\n\n  // set TableStyleType styles: TableStyleType -&gt; dxf\n  for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\n    STTableStyleType.Enum type = entry.getKey();\n    CTDxf typeDxf = entry.getValue();\n    int dxfId = stylesTable.putDxf(typeDxf);\n    CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\n    tableStyleElement.setDxfId(dxfId-1);\n    tableStyleElement.setType(type);\n  }\n }\n...\n</code></pre>\n<hr />\n<p>Complete Example:</p>\n<pre><code>import org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.xssf.model.StylesTable;\n\nimport org.apache.poi.ss.usermodel.DataConsolidateFunction;\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.ss.SpreadsheetVersion;\n\nimport java.io.FileOutputStream;\n\nimport java.util.*;\n\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class Testpivot8 {\n public static void main(String[] args) throws Exception {\n  DataFormatter formatter = new DataFormatter(Locale.US);\n  XSSFWorkbook wb = new XSSFWorkbook();\n  XSSFCellStyle dateStyle = wb.createCellStyle();\n  dateStyle.setDataFormat(wb.createDataFormat().getFormat(&quot;mm/dd/yyyy&quot;));\n\n  Object[][] data = new Object[][]{\n   {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001683,&quot;Description1&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,780936.58},\n   {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,1001695,&quot;Description2&quot;,new GregorianCalendar(2017, 3, 27),&quot;CAT&quot;,136.28},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001692,&quot;Description3&quot;,new GregorianCalendar(2017, 4, 3),&quot;CAT1&quot;,191468.21},\n   {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,1001698,&quot;Description4&quot;,new GregorianCalendar(2017, 4, 4),&quot;CAT1&quot;,10.11}\n  };\n\n  XSSFSheet sheet = wb.createSheet(&quot;data&quot;);\n  for(Object[] dataRow : data) {\n   XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n   for(Object dataCell : dataRow){\n    XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\n    if (dataCell instanceof String) {\n     cell.setCellValue((String)dataCell);\n    } else if (dataCell instanceof Double) {\n     cell.setCellValue((Double)dataCell);\n    } else if (dataCell instanceof Integer) {\n     cell.setCellValue((Integer)dataCell);\n    } else if (dataCell instanceof GregorianCalendar) {\n     cell.setCellValue((GregorianCalendar)dataCell);\n     cell.setCellStyle(dateStyle);\n    }\n   }\n  }\n\n  XSSFSheet pivot = wb.createSheet(&quot;summary&quot;);\n  int rowCount = data.length;\n  int colCount = data[0].length;\n  AreaReference areaReference = new AreaReference(new CellReference(&quot;A1&quot;), new CellReference(rowCount-1, colCount-1), SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), sheet);\n  pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\n\n  List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\n  iterList.add(0);\n  iterList.add(1);\n  iterList.add(2);\n  iterList.add(3);\n  iterList.add(4);\n  iterList.add(5);\n  iterList.add(6);\n\n  pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n  for (Integer j : iterList) {\n   pivotTable.addRowLabel(j);\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n    uniqueItems.add(formatter.formatCellValue(sheet.getRow(r).getCell(j)));\n   }\n\n   System.out.println(uniqueItems);\n\n   CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n   int i = 0;\n   for (String item : uniqueItems) {\n    ctPivotField.getItems().getItemArray(i).unsetT();\n    ctPivotField.getItems().getItemArray(i).setX((long)i);\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\n     .getCacheFieldArray(j).getSharedItems().addNewS().setV(item);\n    i++;\n   }\n   ctPivotField.setDefaultSubtotal(false);\n   ctPivotField.setOutline(false);\n\n   if (ctPivotField.getDefaultSubtotal()) i++; \n   for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n    ctPivotField.getItems().removeItem(k);\n   }\n   ctPivotField.getItems().setCount(i);\n\n   CTExtensionList extList = ctPivotField.addNewExtLst();\n   String extXML = \n      &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\n    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\n    + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\n    + &quot;&lt;/ext&gt;&quot;;\n   org.apache.xmlbeans.XmlObject xlmObject = \n   org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n   extList.set(xlmObject);\n  }\n\n  System.out.println(&quot;----end---&quot;);\n\n  pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\n\n  // create a new custom pivot table style\n  // create dxf for each needed table style type\n  STTableStyleType.Enum headerRow = STTableStyleType.HEADER_ROW;\n  CTDxf headerRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\n  STTableStyleType.Enum totalRow = STTableStyleType.TOTAL_ROW;\n  CTDxf totalRowDxf = createDxf(true, new byte[] {(byte)255, (byte)255, (byte)255}, new byte[] {(byte)4, (byte)123, (byte)91});\n  STTableStyleType.Enum firstRowSubheading = STTableStyleType.FIRST_ROW_SUBHEADING;\n  CTDxf firstRowSubheadingDxf = createDxf(true, null, null);\n  STTableStyleType.Enum secondRowSubheading = STTableStyleType.SECOND_ROW_SUBHEADING;\n  CTDxf secondRowSubheadingDxf = createDxf(true, null, null);\n  // map table style types to dxf\n  Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles = new HashMap&lt;STTableStyleType.Enum, CTDxf&gt;();\n  typeStyles.put(headerRow, headerRowDxf);\n  typeStyles.put(totalRow, totalRowDxf);\n  typeStyles.put(firstRowSubheading, firstRowSubheadingDxf);\n  typeStyles.put(secondRowSubheading, secondRowSubheadingDxf);\n  // \n  createPivotTableStyle(wb.getStylesSource(), &quot;CustomPivotStyle1&quot;, typeStyles);\n  pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;CustomPivotStyle1&quot;);\n\n  sheet.setSelected(false);\n  wb.setActiveSheet(wb.getSheetIndex(pivot));\n \n  FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\n  wb.write(fileOut);\n  fileOut.close();\n  wb.close();\n }\n\n static CTDxf createDxf(boolean fontBold, byte[] fontRGB, byte[] fillRGB) {\n  CTDxf dxf = CTDxf.Factory.newInstance();\n  CTFont font = dxf.addNewFont();\n  if (fontBold) font.addNewB();\n  if (fontRGB != null) font.addNewColor().setRgb(fontRGB);\n  if (fillRGB != null) {\n   CTFill fill = dxf.addNewFill();\n   fill.addNewPatternFill().addNewBgColor().setRgb(fillRGB);\n  }\n  return dxf;\n }\n\n static void createPivotTableStyle(StylesTable stylesTable, String styleName, Map&lt;STTableStyleType.Enum, CTDxf&gt; typeStyles) {\n\n  // get or create table styles\n  CTTableStyles tableStyles = stylesTable.getCTStylesheet().getTableStyles();\n  if (tableStyles == null) tableStyles = stylesTable.getCTStylesheet().addNewTableStyles();\n\n  // add table style named as styleName\n  CTTableStyle tableStyle = tableStyles.addNewTableStyle();\n  tableStyle.setName(styleName);\n\n  // set TableStyleType styles: TableStyleType -&gt; dxf\n  for (Map.Entry&lt;STTableStyleType.Enum, CTDxf&gt; entry : typeStyles.entrySet()) {\n    STTableStyleType.Enum type = entry.getKey();\n    CTDxf typeDxf = entry.getValue();\n    int dxfId = stylesTable.putDxf(typeDxf);\n    CTTableStyleElement tableStyleElement = tableStyle.addNewTableStyleElement();\n    tableStyleElement.setDxfId(dxfId-1);\n    tableStyleElement.setType(type);\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":17089866,"reputation":55,"user_id":12366270,"display_name":"Vijay"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1164,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59085731,"answer_count":2,"score":1,"last_activity_date":1640268491,"creation_date":1574857472,"question_id":59070187,"body_markdown":"How to Change the Default Header Background color in PIVOT Table, currently its coming blue. Currently i am changing the background color from Blue to Green. But facing difficulty in achieve it. \r\n\r\nI am used  below syntax by setting various pivot style in setName, but not find the exact colour of green. I need little more darker green which shown in expected output(which is lighter green). Please let me know how can i achieve it.\r\n\r\npivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;&quot;);\r\n\r\nOutput which i am getting:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nBelow is the Output which i Want but green color should be little more darker than below (Please refer below Test Color Tab):\r\n\r\n[![enter image description here][2]][2]\r\n\r\nGreen color combination which i want.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nBelow is the code:\r\n\r\n    package com.test.pivottables;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.ss.*;\r\n    import java.io.*;\r\n    import java.util.ArrayList;\r\n    import java.util.TreeSet;\r\n    import java.util.List;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\r\n\r\n    public class Testpivot8{\r\n     public static void main(String[] args) throws Exception {\r\n      Workbook wb = new XSSFWorkbook();\r\n      Object[][] data = new Object[][]{\r\n     {&quot;AAA&quot;,&quot;BBB&quot;,&quot;CCC&quot;,&quot;DDD&quot;,&quot;EEE&quot;,&quot;FFF&quot;,&quot;GGG&quot;,&quot;HHH&quot;}, \r\n      {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001683&quot;,&quot;Description1&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,780936.58},\r\n     {&quot;TOM&quot;,&quot;DUMMY&quot;,&quot;VAL&quot;,&quot;1001695&quot;,&quot;Description2&quot;,&quot;27/04/2017&quot;,&quot;CAT&quot;,136.28},\r\n     {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001692&quot;,&quot;Description3&quot;,&quot;03/05/2017&quot;,&quot;CAT1&quot;,191468.21},\r\n     {&quot;HARRY&quot;,&quot;DUMMY1&quot;,&quot;VAL1&quot;,&quot;1001698&quot;,&quot;Description4&quot;,&quot;04/05/2017&quot;,&quot;CAT1&quot;,10.11}\r\n      };\r\n\r\n    XSSFSheet sheet = (XSSFSheet) wb.createSheet(&quot;data&quot;);\r\n    XSSFSheet pivot = (XSSFSheet) wb.createSheet(&quot;summary&quot;);\r\n    for(Object[] dataRow : data){\r\n     XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\r\n     for(Object dataCell : dataRow){\r\n     XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\r\n    if (dataCell instanceof String) {\r\n     cell.setCellValue((String)dataCell);\r\n    } else if (dataCell instanceof Double) {\r\n     cell.setCellValue((Double)dataCell);\r\n    }\r\n     }\r\n    }\r\n\r\n      AreaReference areaReference = new AreaReference(&quot;A1:H&quot;+ (sheet.getLastRowNum() + 1), \r\n        SpreadsheetVersion.EXCEL2007);\r\n      XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), \r\n      sheet);\r\n     pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(&quot;AAA&quot;);\r\n\r\n    List&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\r\n    iterList.add(0);\r\n    iterList.add(1);\r\n     iterList.add(2);\r\n    iterList.add(3);\r\n    iterList.add(4);\r\n     iterList.add(5);\r\n     iterList.add(6);\r\n\r\n  \r\n    pivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \r\n\r\n     for (Integer j : iterList) {\r\n\r\n\r\n       pivotTable.addRowLabel(j);\r\n       TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\r\n       for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \r\n       areaReference.getLastCell().getRow()+1; r++) {\r\n       uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\r\n      }\r\n      System.out.println(uniqueItems);\r\n      CTPivotField ctPivotField = \r\n      pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\r\n     int i = 0;\r\n       for (String item : uniqueItems) {\r\n        ctPivotField.getItems().getItemArray(i).unsetT();\r\n       ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n        pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\r\n      .getCacheFieldArray(j)\r\n       .getSharedItems().addNewS().setV(item);\r\n        i++;\r\n       }\r\n            ctPivotField.setDefaultSubtotal(false);\r\n \r\n   \r\n             ctPivotField.setOutline(false);\r\n\r\n   \r\n        if (ctPivotField.getDefaultSubtotal()) i++; \r\n             for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n             ctPivotField.getItems().removeItem(k);\r\n            }\r\n           ctPivotField.getItems().setCount(i);\r\n\r\n  \r\n               CTExtensionList extList = ctPivotField.addNewExtLst();\r\n            String extXML = \r\n           &quot;&lt;ext uri=\\&quot;{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\&quot;&quot;\r\n           + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\r\n        + &quot;&lt;x14:pivotField fillDownLabels=\\&quot;1\\&quot;/&gt;&quot;\r\n         + &quot;&lt;/ext&gt;&quot;;\r\n            org.apache.xmlbeans.XmlObject xlmObject = \r\n         org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\r\n              extList.set(xlmObject);\r\n\r\n         }\r\n\r\n            System.out.println(&quot;----end---&quot;);\r\n\r\n           pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, &quot;SUM&quot;);\r\n\r\n          FileOutputStream fileOut = new FileOutputStream(&quot;newoutputfile.xlsx&quot;);\r\n             wb.write(fileOut);\r\n               fileOut.close();\r\n              wb.close();\r\n              }\r\n        }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dsN1E.png\r\n  [2]: https://i.stack.imgur.com/YXWWd.png\r\n  [3]: https://i.stack.imgur.com/KB1oe.png","title":"How to Change the Default Header Background color in PIVOT Table","body":"<p>How to Change the Default Header Background color in PIVOT Table, currently its coming blue. Currently i am changing the background color from Blue to Green. But facing difficulty in achieve it. </p>\n\n<p>I am used  below syntax by setting various pivot style in setName, but not find the exact colour of green. I need little more darker green which shown in expected output(which is lighter green). Please let me know how can i achieve it.</p>\n\n<p>pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(\"\");</p>\n\n<p>Output which i am getting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dsN1E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dsN1E.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the Output which i Want but green color should be little more darker than below (Please refer below Test Color Tab):</p>\n\n<p><a href=\"https://i.stack.imgur.com/YXWWd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YXWWd.png\" alt=\"enter image description here\"></a></p>\n\n<p>Green color combination which i want.</p>\n\n<p><a href=\"https://i.stack.imgur.com/KB1oe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KB1oe.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the code:</p>\n\n<pre><code>package com.test.pivottables;\nimport org.apache.poi.xssf.usermodel.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.ss.*;\nimport java.io.*;\nimport java.util.ArrayList;\nimport java.util.TreeSet;\nimport java.util.List;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.*;\n\npublic class Testpivot8{\n public static void main(String[] args) throws Exception {\n  Workbook wb = new XSSFWorkbook();\n  Object[][] data = new Object[][]{\n {\"AAA\",\"BBB\",\"CCC\",\"DDD\",\"EEE\",\"FFF\",\"GGG\",\"HHH\"}, \n  {\"TOM\",\"DUMMY\",\"VAL\",\"1001683\",\"Description1\",\"27/04/2017\",\"CAT\",780936.58},\n {\"TOM\",\"DUMMY\",\"VAL\",\"1001695\",\"Description2\",\"27/04/2017\",\"CAT\",136.28},\n {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001692\",\"Description3\",\"03/05/2017\",\"CAT1\",191468.21},\n {\"HARRY\",\"DUMMY1\",\"VAL1\",\"1001698\",\"Description4\",\"04/05/2017\",\"CAT1\",10.11}\n  };\n\nXSSFSheet sheet = (XSSFSheet) wb.createSheet(\"data\");\nXSSFSheet pivot = (XSSFSheet) wb.createSheet(\"summary\");\nfor(Object[] dataRow : data){\n XSSFRow row = sheet.createRow(sheet.getPhysicalNumberOfRows());\n for(Object dataCell : dataRow){\n XSSFCell cell = row.createCell(row.getPhysicalNumberOfCells());\nif (dataCell instanceof String) {\n cell.setCellValue((String)dataCell);\n} else if (dataCell instanceof Double) {\n cell.setCellValue((Double)dataCell);\n}\n }\n}\n\n  AreaReference areaReference = new AreaReference(\"A1:H\"+ (sheet.getLastRowNum() + 1), \n    SpreadsheetVersion.EXCEL2007);\n  XSSFPivotTable pivotTable =  pivot.createPivotTable(areaReference, new CellReference(\"A1\"), \n  sheet);\n pivotTable.getCTPivotTableDefinition().setRowHeaderCaption(\"AAA\");\n\nList&lt;Integer&gt; iterList = new ArrayList&lt;Integer&gt;();\niterList.add(0);\niterList.add(1);\n iterList.add(2);\niterList.add(3);\niterList.add(4);\n iterList.add(5);\n iterList.add(6);\n\n\npivotTable.getCTPivotTableDefinition().setUpdatedVersion((short)6); \n\n for (Integer j : iterList) {\n\n\n   pivotTable.addRowLabel(j);\n   TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;();\n   for (int r = areaReference.getFirstCell().getRow()+1; r &lt; \n   areaReference.getLastCell().getRow()+1; r++) {\n   uniqueItems.add(sheet.getRow(r).getCell(j).getStringCellValue());\n  }\n  System.out.println(uniqueItems);\n  CTPivotField ctPivotField = \n  pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(j);\n int i = 0;\n   for (String item : uniqueItems) {\n    ctPivotField.getItems().getItemArray(i).unsetT();\n   ctPivotField.getItems().getItemArray(i).setX((long)i);\n    pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields()\n  .getCacheFieldArray(j)\n   .getSharedItems().addNewS().setV(item);\n    i++;\n   }\n        ctPivotField.setDefaultSubtotal(false);\n\n\n         ctPivotField.setOutline(false);\n\n\n    if (ctPivotField.getDefaultSubtotal()) i++; \n         for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n         ctPivotField.getItems().removeItem(k);\n        }\n       ctPivotField.getItems().setCount(i);\n\n\n           CTExtensionList extList = ctPivotField.addNewExtLst();\n        String extXML = \n       \"&lt;ext uri=\\\"{2946ED86-A175-432a-8AC1-64E0C546D7DE}\\\"\"\n       + \" xmlns:x14=\\\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\\"&gt;\"\n    + \"&lt;x14:pivotField fillDownLabels=\\\"1\\\"/&gt;\"\n     + \"&lt;/ext&gt;\";\n        org.apache.xmlbeans.XmlObject xlmObject = \n     org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\n          extList.set(xlmObject);\n\n     }\n\n        System.out.println(\"----end---\");\n\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 7, \"SUM\");\n\n      FileOutputStream fileOut = new FileOutputStream(\"newoutputfile.xlsx\");\n         wb.write(fileOut);\n           fileOut.close();\n          wb.close();\n          }\n    }\n</code></pre>\n"},{"tags":["java","mongodb","codec","mongo-java-driver"],"answers":[{"tags":[],"owner":{"account_id":962967,"reputation":3773,"user_id":986903,"display_name":"jyemin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1567344491,"creation_date":1567344491,"answer_id":57746382,"question_id":57664079,"body_markdown":"It&#39;s tricky to write correct and efficient POJO Codec implementations by hand.  In this case the problem is that the DocumentCodec that you instantiate within the CardCodec is not configured with a CodecRegistry that contains the ItemCodec, so it is unable to find the ItemCodec. \r\n\r\nThere are ways that you can fix your Codec implementations, but I&#39;m not clear why you want to roll your own when the driver has a general solution for this.  See [POJO Support][1] for details.\r\n\r\nSimply create your CodecRegistry like this:\r\n\r\n            CodecRegistry codecRegistry = CodecRegistries.fromRegistries(\r\n                MongoClientSettings.getDefaultCodecRegistry(),\r\n                CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build())\r\n        );\r\n\r\n\r\n  [1]: http://mongodb.github.io/mongo-java-driver/3.11/bson/pojos/","title":"Can&#39;t find a codec for my class (CodecConfigurationException)","body":"<p>It's tricky to write correct and efficient POJO Codec implementations by hand.  In this case the problem is that the DocumentCodec that you instantiate within the CardCodec is not configured with a CodecRegistry that contains the ItemCodec, so it is unable to find the ItemCodec. </p>\n\n<p>There are ways that you can fix your Codec implementations, but I'm not clear why you want to roll your own when the driver has a general solution for this.  See <a href=\"http://mongodb.github.io/mongo-java-driver/3.11/bson/pojos/\" rel=\"nofollow noreferrer\">POJO Support</a> for details.</p>\n\n<p>Simply create your CodecRegistry like this:</p>\n\n<pre><code>        CodecRegistry codecRegistry = CodecRegistries.fromRegistries(\n            MongoClientSettings.getDefaultCodecRegistry(),\n            CodecRegistries.fromProviders(PojoCodecProvider.builder().automatic(true).build())\n    );\n</code></pre>\n"}],"owner":{"account_id":5868667,"reputation":56,"user_id":4621678,"display_name":"Tarc&#237;sio Rosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13662,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640268440,"creation_date":1566848786,"question_id":57664079,"body_markdown":"I need to save a java object in mongodb database. This object has an other object into it. When I try to save, I receive the error message on console:\r\n\r\n    org.bson.codecs.configuration.CodecConfigurationException: Can&#39;t find a codec for class Item.\r\n\r\nThe problem is that I created the codec for class Item, but, it can&#39;t work even registering it. See the classes for best understanding.\r\n\r\n\r\n\r\nModels\r\n\r\n```\r\npublic class Card(){\r\n\r\n  public Card(){\r\n   itens = new ArrayList&lt;Item&gt;()\r\n  }\r\n  String id;\r\n  String description;\r\n  List&lt;Item&gt; itens;\r\n  .\r\n  .\r\n  .\r\n\r\n}\r\n```\r\n```\r\npublic class Item(){\r\n\r\n  String id;\r\n  String name; \r\n  .\r\n  .\r\n  .\r\n\r\n}\r\n```\r\nCardCodec\r\n\r\n```\r\npublic class CardCodec implements CollectibleCodec&lt;Card&gt;{\r\n  private final Codec&lt;Document&gt; documentCodec;\r\n\r\n  public CardCodec() {\t\t\r\n    this.documentCodec = new DocumentCodec();\r\n  }\r\n\r\n  @Override\r\n  public void encode(BsonWriter writer, Card card, EncoderContext encoderContext) {\r\n  Document cardDoc = new Document();\r\n    String id = card.getId();\r\n    String description = card.getDescription();  \r\n    List&lt;Item&gt; itens = card.getItens();\r\n\r\n    if(id != null) {\r\n        cardDoc.put(&quot;_id&quot;, new ObjectId(id));\r\n    }\r\n    if(description != null){\r\n        cardDoc.put(&quot;description&quot;, card.getDescription);\r\n    }\r\n    if(Itens != null){\r\n        cardDoc.put(&quot;itens&quot;, card.getItens());\r\n    }\r\n    this.documentCodec.encode(writer, cardDoc, encoderContext);\r\n  }\r\n\r\n    @Override\r\n    public Class&lt;Card&gt; getEncoderClass() {\t\t\r\n        return Card.class;\r\n    }\r\n\r\n    @Override\r\n    public Card decode(BsonReader reader, DecoderContext decoderContext) {\r\n        Document cardDoc = this.documentCodec.decode(reader, decoderContext);\r\n        Card card=  new Card();\r\n\r\n        card.setId(cardDoc .getObjectId(&quot;_id&quot;).toHexString());\r\n        card.setDescription(cardDoc .getString(&quot;description&quot;));\r\n\r\n        List&lt;Document&gt; itensDoc =  cardDoc.getList(&quot;itens&quot;, Document.class);\r\n        List&lt;Item&gt; itens = new ItemConverter().convertToListItem(itensDoc);\r\n        card.setItens(itens);\r\n        return card;\r\n    }\r\n\r\n    @Override\r\n    public Card generateIdIfAbsentFromDocument(Card card) {\r\n\t\r\n        if( !documentHasId(card) ) {\r\n\t    card.setId(new ObjectId().toHexString());\r\n        }\r\n\t\t\r\n        return card;\r\n\t\t\r\n    }\r\n\r\n    @Override\r\n    public boolean documentHasId(Card card) {\t\t\r\n        return null != card.getId();\r\n    }\r\n\r\n    @Override\r\n    public BsonValue getDocumentId(Card card) {\r\n        if(!documentHasId(card)) {\r\n            throw new IllegalStateException(&quot;Esse documento n&#227;o tem um _id&quot;);\r\n        }\r\n        return new BsonString(card.getId());\r\n    }\r\n\r\n}\r\n```\r\nConverter\r\n```\r\npublic class ItemConverter {\r\n\r\n\tpublic Item convert(Document doc) {\r\n\t\tItem item = new Item();\r\n\t\tString id = doc.getObjectId(&quot;_id&quot;).toHexString();\r\n\t\tString description = doc.getString(&quot;description&quot;);\r\n\t\titem.setId(id);\r\n\t\titem.setName(description);\r\n\t\treturn item;\r\n\t}\r\n\r\n    public List&lt;Item&gt; convertToListItem(List&lt;Document&gt; ItensDocs){\t\t\r\n        List&lt;Item&gt; itens = new ArrayList&lt;Item&gt;();\t\r\n        if(ItensDocs== null) {\r\n           return Collections.emptyList();\r\n        }\r\n        for(Document doc: ItensDocs) {\t\t\t \r\n           itens.add( this.convert(doc) );\r\n        }\r\n        return itens;\r\n    }\r\n\r\n}\r\n```\r\nItemCodec\r\n```\r\npublic class ItemCodec implements CollectibleCodec&lt;Item&gt;{\r\n    private final Codec&lt;Document&gt; documentCodec;\r\n\t\r\n    public ItemCodec() {\t\r\n        this.documentCodec = new DocumentCodec();\r\n    }\r\n\r\n    @Override\r\n    public void encode(BsonWriter writer, Item value, EncoderContext encoderContext) {\r\n        Document itemDoc = new Document();\r\n\t\t\r\n        String id = value.getId();\r\n        String name = value.getName();\r\n\r\n        if(id != null) {\r\n            itemDoc.put(&quot;_id&quot;, new ObjectId(id));\r\n        }\r\n        if(name != null) {\r\n            itemDoc.put(&quot;name&quot;, value.getName());\r\n        }\r\n\r\n        documentCodec.encode(writer, itemDoc, encoderContext);\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Item&gt; getEncoderClass() {\t\t\r\n        return Item.class;\r\n    }\r\n\r\n    @Override\r\n    public Item decode(BsonReader reader, DecoderContext decoderContext) {\t\t\r\n        Document document = documentCodec.decode(reader, decoderContext);\t\t\r\n        return new ItemConverter().convert(document);\r\n    }\r\n\r\n    @Override\r\n    public Item generateIdIfAbsentFromDocument(Item item) {\r\n        if(!this.documentHasId(item)) {\r\n            item.setId(new ObjectId().toHexString());\t\t\t\r\n        }\r\n        return item;\t\t\r\n    }\r\n\r\n    @Override\r\n    public boolean documentHasId(Item item) {\t\t\r\n        return null != item.getId();\r\n    }\r\n\r\n    @Override\r\n    public BsonValue getDocumentId(Item item) {\r\n        if(!documentHasId(item)) {\r\n            throw new IllegalStateException(&quot;Esse documento n&#227;o tem um _id&quot;);\r\n        }\r\n\t\r\n        return new BsonString(item.getId());\r\n\t\t\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nNow, how I registry the codecs\r\n```\r\n...\r\n    CardCodec cardCodec = new CardCodec();\r\n    ItemCodec itemCodec = new ItemCodec();\r\n  \r\n    this.codecRegistry = CodecRegistries.fromRegistries(\r\n\t\t\t\tMongoClientSettings.getDefaultCodecRegistry(),\r\n\t\t\t\tCodecRegistries.fromCodecs(cardCodec, itemCodec)\r\n    );\r\n\r\nthis.cardCollection = this.mongoDatabase.getCollection(&quot;cards&quot;, Card.class).withCodecRegistry(this.codecRegistry);\r\n...\r\n```\r\n\r\nWhen I try to execute an insert:\r\n\r\n    this.cardCollection.insertOne(card);\r\n\r\nI receive: \r\n\r\n    org.bson.codecs.configuration.CodecConfigurationException","title":"Can&#39;t find a codec for my class (CodecConfigurationException)","body":"<p>I need to save a java object in mongodb database. This object has an other object into it. When I try to save, I receive the error message on console:</p>\n\n<pre><code>org.bson.codecs.configuration.CodecConfigurationException: Can't find a codec for class Item.\n</code></pre>\n\n<p>The problem is that I created the codec for class Item, but, it can't work even registering it. See the classes for best understanding.</p>\n\n<p>Models</p>\n\n<pre><code>public class Card(){\n\n  public Card(){\n   itens = new ArrayList&lt;Item&gt;()\n  }\n  String id;\n  String description;\n  List&lt;Item&gt; itens;\n  .\n  .\n  .\n\n}\n</code></pre>\n\n<pre><code>public class Item(){\n\n  String id;\n  String name; \n  .\n  .\n  .\n\n}\n</code></pre>\n\n<p>CardCodec</p>\n\n<pre><code>public class CardCodec implements CollectibleCodec&lt;Card&gt;{\n  private final Codec&lt;Document&gt; documentCodec;\n\n  public CardCodec() {      \n    this.documentCodec = new DocumentCodec();\n  }\n\n  @Override\n  public void encode(BsonWriter writer, Card card, EncoderContext encoderContext) {\n  Document cardDoc = new Document();\n    String id = card.getId();\n    String description = card.getDescription();  \n    List&lt;Item&gt; itens = card.getItens();\n\n    if(id != null) {\n        cardDoc.put(\"_id\", new ObjectId(id));\n    }\n    if(description != null){\n        cardDoc.put(\"description\", card.getDescription);\n    }\n    if(Itens != null){\n        cardDoc.put(\"itens\", card.getItens());\n    }\n    this.documentCodec.encode(writer, cardDoc, encoderContext);\n  }\n\n    @Override\n    public Class&lt;Card&gt; getEncoderClass() {      \n        return Card.class;\n    }\n\n    @Override\n    public Card decode(BsonReader reader, DecoderContext decoderContext) {\n        Document cardDoc = this.documentCodec.decode(reader, decoderContext);\n        Card card=  new Card();\n\n        card.setId(cardDoc .getObjectId(\"_id\").toHexString());\n        card.setDescription(cardDoc .getString(\"description\"));\n\n        List&lt;Document&gt; itensDoc =  cardDoc.getList(\"itens\", Document.class);\n        List&lt;Item&gt; itens = new ItemConverter().convertToListItem(itensDoc);\n        card.setItens(itens);\n        return card;\n    }\n\n    @Override\n    public Card generateIdIfAbsentFromDocument(Card card) {\n\n        if( !documentHasId(card) ) {\n        card.setId(new ObjectId().toHexString());\n        }\n\n        return card;\n\n    }\n\n    @Override\n    public boolean documentHasId(Card card) {       \n        return null != card.getId();\n    }\n\n    @Override\n    public BsonValue getDocumentId(Card card) {\n        if(!documentHasId(card)) {\n            throw new IllegalStateException(\"Esse documento não tem um _id\");\n        }\n        return new BsonString(card.getId());\n    }\n\n}\n</code></pre>\n\n<p>Converter</p>\n\n<pre><code>public class ItemConverter {\n\n    public Item convert(Document doc) {\n        Item item = new Item();\n        String id = doc.getObjectId(\"_id\").toHexString();\n        String description = doc.getString(\"description\");\n        item.setId(id);\n        item.setName(description);\n        return item;\n    }\n\n    public List&lt;Item&gt; convertToListItem(List&lt;Document&gt; ItensDocs){      \n        List&lt;Item&gt; itens = new ArrayList&lt;Item&gt;();   \n        if(ItensDocs== null) {\n           return Collections.emptyList();\n        }\n        for(Document doc: ItensDocs) {           \n           itens.add( this.convert(doc) );\n        }\n        return itens;\n    }\n\n}\n</code></pre>\n\n<p>ItemCodec</p>\n\n<pre><code>public class ItemCodec implements CollectibleCodec&lt;Item&gt;{\n    private final Codec&lt;Document&gt; documentCodec;\n\n    public ItemCodec() {    \n        this.documentCodec = new DocumentCodec();\n    }\n\n    @Override\n    public void encode(BsonWriter writer, Item value, EncoderContext encoderContext) {\n        Document itemDoc = new Document();\n\n        String id = value.getId();\n        String name = value.getName();\n\n        if(id != null) {\n            itemDoc.put(\"_id\", new ObjectId(id));\n        }\n        if(name != null) {\n            itemDoc.put(\"name\", value.getName());\n        }\n\n        documentCodec.encode(writer, itemDoc, encoderContext);\n    }\n\n    @Override\n    public Class&lt;Item&gt; getEncoderClass() {      \n        return Item.class;\n    }\n\n    @Override\n    public Item decode(BsonReader reader, DecoderContext decoderContext) {      \n        Document document = documentCodec.decode(reader, decoderContext);       \n        return new ItemConverter().convert(document);\n    }\n\n    @Override\n    public Item generateIdIfAbsentFromDocument(Item item) {\n        if(!this.documentHasId(item)) {\n            item.setId(new ObjectId().toHexString());           \n        }\n        return item;        \n    }\n\n    @Override\n    public boolean documentHasId(Item item) {       \n        return null != item.getId();\n    }\n\n    @Override\n    public BsonValue getDocumentId(Item item) {\n        if(!documentHasId(item)) {\n            throw new IllegalStateException(\"Esse documento não tem um _id\");\n        }\n\n        return new BsonString(item.getId());\n\n    }\n\n\n}\n</code></pre>\n\n<p>Now, how I registry the codecs</p>\n\n<pre><code>...\n    CardCodec cardCodec = new CardCodec();\n    ItemCodec itemCodec = new ItemCodec();\n\n    this.codecRegistry = CodecRegistries.fromRegistries(\n                MongoClientSettings.getDefaultCodecRegistry(),\n                CodecRegistries.fromCodecs(cardCodec, itemCodec)\n    );\n\nthis.cardCollection = this.mongoDatabase.getCollection(\"cards\", Card.class).withCodecRegistry(this.codecRegistry);\n...\n</code></pre>\n\n<p>When I try to execute an insert:</p>\n\n<pre><code>this.cardCollection.insertOne(card);\n</code></pre>\n\n<p>I receive: </p>\n\n<pre><code>org.bson.codecs.configuration.CodecConfigurationException\n</code></pre>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1637487688,"post_id":70053325,"comment_id":123834818,"body_markdown":"`getCompo` and `getSimp` ? `getPieceCompo` and `getPieceSimp` ? That doesn&#39;t seem to be a hard problem","body":"<code>getCompo</code> and <code>getSimp</code> ? <code>getPieceCompo</code> and <code>getPieceSimp</code> ? That doesn&#39;t seem to be a hard problem"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1637487701,"post_id":70053325,"comment_id":123834821,"body_markdown":"This is not posssible in Java. The return type is not part of the method signature. Therefore, we cannot have two method with same name and same (in this case: empty) parameter list, but different return types.","body":"This is not posssible in Java. The return type is not part of the method signature. Therefore, we cannot have two method with same name and same (in this case: empty) parameter list, but different return types."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640268430,"creation_date":1637488209,"answer_id":70053402,"question_id":70053325,"body_markdown":"As per [JLS, &#167;8.4.2][JLS_8_4_2]:\r\n\r\n&gt; ...\r\n&gt;\r\n&gt; The signature of a method `m1` is a subsignature of the signature of a method `m2` if either:\r\n&gt;\r\n&gt; - `m2` has the same signature as `m1`, or\r\n&gt; - the signature of `m1` is the same as the erasure ([&#167;4.6][JLS_4_6]) of the signature of `m2`.\r\n&gt;\r\n&gt; Two method signatures `m1` and `m2` are *override-equivalent* iff either `m1` is a subsignature of `m2` or `m2` is a subsignature of `m1`.\r\n&gt;\r\n&gt; **It is a compile-time error to declare two methods with override-equivalent signatures in a class.**\r\n&gt;\r\n&gt; ...\r\n\r\nThis means that methods `public Composee getPiece()` and `Simple getPiece()` are override-equivalent. Since those two methods are in the same class, the compiler generates a compile-time error.\r\n\r\nAs was pointed out by [azro][azro] in the [comments][azroComment], we can instead write two separate getters `Composee getComposee()` and `Simple getSimple()`.\r\n\r\nIf `Simple` and `Composee` have a common supertype (e.g. `Piece`), we can write `Piece getPiece()` instead.\r\n\r\n\r\n[JLS_8_4_2]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\r\n[JLS_4_6]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.6\r\n[azro]: https://stackoverflow.com/users/7212686/azro\r\n[azroComment]: https://stackoverflow.com/questions/70053325/same-java-getter-for-different-types#comment123834818_70053325","title":"Same java getter for different types","body":"<p>As per <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\" rel=\"nofollow noreferrer\">JLS, §8.4.2</a>:</p>\n<blockquote>\n<p>...</p>\n<p>The signature of a method <code>m1</code> is a subsignature of the signature of a method <code>m2</code> if either:</p>\n<ul>\n<li><code>m2</code> has the same signature as <code>m1</code>, or</li>\n<li>the signature of <code>m1</code> is the same as the erasure (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-4.html#jls-4.6\" rel=\"nofollow noreferrer\">§4.6</a>) of the signature of <code>m2</code>.</li>\n</ul>\n<p>Two method signatures <code>m1</code> and <code>m2</code> are <em>override-equivalent</em> iff either <code>m1</code> is a subsignature of <code>m2</code> or <code>m2</code> is a subsignature of <code>m1</code>.</p>\n<p><strong>It is a compile-time error to declare two methods with override-equivalent signatures in a class.</strong></p>\n<p>...</p>\n</blockquote>\n<p>This means that methods <code>public Composee getPiece()</code> and <code>Simple getPiece()</code> are override-equivalent. Since those two methods are in the same class, the compiler generates a compile-time error.</p>\n<p>As was pointed out by <a href=\"https://stackoverflow.com/users/7212686/azro\">azro</a> in the <a href=\"https://stackoverflow.com/questions/70053325/same-java-getter-for-different-types#comment123834818_70053325\">comments</a>, we can instead write two separate getters <code>Composee getComposee()</code> and <code>Simple getSimple()</code>.</p>\n<p>If <code>Simple</code> and <code>Composee</code> have a common supertype (e.g. <code>Piece</code>), we can write <code>Piece getPiece()</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":20034051,"reputation":11,"user_id":14686188,"display_name":"Necrosis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637490471,"creation_date":1637490471,"answer_id":70053668,"question_id":70053325,"body_markdown":"Try this maybe:\r\n\r\n    public class Composant&lt;T&gt;{\r\n        private final int quantite;\r\n        private final T comp;\r\n\r\n        public Composant(T comp,int quantite) throws BadTypeException {\r\n            if(!(comp instanceof Composee) || !(comp instanceof Simple)) throw new BadTypeException(&quot;Can&#39;t create Composant with \\&quot;&quot; + comp.getClass().getName() + &quot;\\&quot; type object!&quot;);\r\n            this.comp = comp;\r\n            this.quantite = quantite;\r\n        }\r\n\r\n        public T getPiece(){\r\n            return this.comp;\r\n        }\r\n\r\n        public int getQuantite(){\r\n            return this.quantite;\r\n        }\r\n    }\r\n\r\nException is:\r\n\r\n    //  If you don&#39;t want to catch exception, change it to &quot;RuntimeException&quot;\r\n    class BadTypeException extends Exception{\r\n        public BadTypeException(String message){\r\n            super(message);\r\n        }\r\n    }\r\n\r\n\r\nAnd create like this:\r\n\r\n        try {\r\n            new Composant&lt;Composee&gt;(new Composee(),4);\r\n        } catch (BadTypeException e) {\r\n            e.printStackTrace();\r\n        }","title":"Same java getter for different types","body":"<p>Try this maybe:</p>\n<pre><code>public class Composant&lt;T&gt;{\n    private final int quantite;\n    private final T comp;\n\n    public Composant(T comp,int quantite) throws BadTypeException {\n        if(!(comp instanceof Composee) || !(comp instanceof Simple)) throw new BadTypeException(&quot;Can't create Composant with \\&quot;&quot; + comp.getClass().getName() + &quot;\\&quot; type object!&quot;);\n        this.comp = comp;\n        this.quantite = quantite;\n    }\n\n    public T getPiece(){\n        return this.comp;\n    }\n\n    public int getQuantite(){\n        return this.quantite;\n    }\n}\n</code></pre>\n<p>Exception is:</p>\n<pre><code>//  If you don't want to catch exception, change it to &quot;RuntimeException&quot;\nclass BadTypeException extends Exception{\n    public BadTypeException(String message){\n        super(message);\n    }\n}\n</code></pre>\n<p>And create like this:</p>\n<pre><code>    try {\n        new Composant&lt;Composee&gt;(new Composee(),4);\n    } catch (BadTypeException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"display_name":"user13911186"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":271,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1640268430,"creation_date":1637487497,"question_id":70053325,"body_markdown":"I need to write a java method to get specific information from an object. However, the object can either be of type A or of type B. Here is the part of my code :\r\n\r\n    class Composant{\r\n\r\n    int quantit&#233;;\r\n    static Composee pieceCompo;\r\n    static Simple pieceSimp;\r\n\r\n    public Composant(Composee piece, int nombre){\r\n        pieceCompo = piece;\r\n        quantit&#233; = nombre;\r\n    }\r\n\r\n    public Composant(Simple piece, int nombre){\r\n        pieceSimp = piece;\r\n        quantit&#233; = nombre;\r\n    }\r\n    public Composee getPiece(){\r\n        return pieceCompo;\r\n    }\r\n    public Simple getPiece(){\r\n        return pieceSimp;\r\n    }\r\n    public int getQuantite(){\r\n        return quantit&#233;;\r\n    }}\r\n\r\n\r\nWhen I write it like that it raises an error saying &quot;Duplicate method&quot;. How can I get this to work?","title":"Same java getter for different types","body":"<p>I need to write a java method to get specific information from an object. However, the object can either be of type A or of type B. Here is the part of my code :</p>\n<pre><code>class Composant{\n\nint quantité;\nstatic Composee pieceCompo;\nstatic Simple pieceSimp;\n\npublic Composant(Composee piece, int nombre){\n    pieceCompo = piece;\n    quantité = nombre;\n}\n\npublic Composant(Simple piece, int nombre){\n    pieceSimp = piece;\n    quantité = nombre;\n}\npublic Composee getPiece(){\n    return pieceCompo;\n}\npublic Simple getPiece(){\n    return pieceSimp;\n}\npublic int getQuantite(){\n    return quantité;\n}}\n</code></pre>\n<p>When I write it like that it raises an error saying &quot;Duplicate method&quot;. How can I get this to work?</p>\n"},{"tags":["java","excel","apache-poi","pivot-table"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640268277,"creation_date":1585332105,"answer_id":60891686,"question_id":60887605,"body_markdown":"`Apache poi` has only rudimentary support for creating pivot tables. It only creates default pivot tables but is not able creating special settings without falling back to the underlying `ooxml-schemas` classes.\r\n\r\nFor your data source the following code creates what `apache poi` supports by default:\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileInputStream;\r\n    \r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTableDefault {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\r\n    \r\n       XSSFSheet dataSheet = workbook.getSheetAt(0);\r\n       XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n    \r\n       XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\r\n    \r\n       pivotTable.addRowLabel(2);\r\n       pivotTable.addRowLabel(3);\r\n       pivotTable.addRowLabel(0);\r\n       pivotTable.addRowLabel(1);\r\n    \r\n       workbook.write(fileout);\r\n    \r\n      }\r\n    \r\n     }\r\n    }\r\n\r\nThis creates a pivot table in outline format, which is the default.\r\n\r\nIf you wants creating a pivot table which is not in outline format and is not showing subtotals for each field, we need using the underlying `ooxml-schemas` classes. We need creating the correct pivot table field items. And we need to build a cache definition which has shared elements for those items. See also https://stackoverflow.com/questions/37305976/apache-poi-xssfpivottable-setdefaultsubtotal/40480654#40480654.\r\n\r\nThe following code should create the pivot table you wants from your data source:\r\n\r\n    import java.io.FileOutputStream;\r\n    import java.io.FileInputStream;\r\n    \r\n    import org.apache.poi.ss.SpreadsheetVersion;\r\n    import org.apache.poi.ss.util.AreaReference;\r\n    import org.apache.poi.ss.util.CellReference;\r\n    import org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField;\r\n    import org.apache.poi.ss.usermodel.DataFormatter;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTable {\r\n    \r\n     static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \r\n    \r\n      DataFormatter formatter = new DataFormatter(java.util.Locale.US);\r\n      //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\r\n      pivotTable.addRowLabel(column);\r\n    \r\n      //determine unique labels in column\r\n      java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\r\n      for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\r\n       uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\r\n      }\r\n      //System.out.println(uniqueItems);\r\n    \r\n      //build pivot table and cache\r\n      CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\r\n      int i = 0;\r\n      for (String item : uniqueItems) {\r\n       //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\r\n       ctPivotField.getItems().getItemArray(i).unsetT();\r\n       ctPivotField.getItems().getItemArray(i).setX((long)i);\r\n       //build a cache definition which has shared elements for those items \r\n       pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column)\r\n        .getSharedItems().addNewS().setV(item);\r\n       i++;\r\n      }\r\n    \r\n      //set pivot field settings\r\n      ctPivotField.setOutline(false); // no outline format\r\n      ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\r\n    \r\n      //remove further items\r\n      if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\r\n      for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\r\n       ctPivotField.getItems().removeItem(k);\r\n      }\r\n      ctPivotField.getItems().setCount(i);\r\n    \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\r\n    \r\n       XSSFSheet dataSheet = workbook.getSheetAt(0);\r\n       XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n    \r\n       AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\r\n    \r\n       XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\r\n    \r\n       addRowLabel(pivotTable, dataSheet, areaReference, 2);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 3);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 0);\r\n       addRowLabel(pivotTable, dataSheet, areaReference, 1);\r\n    \r\n       workbook.write(fileout);\r\n    \r\n      }\r\n    \r\n     }\r\n    }\r\n\r\nThis code is tested using current `apache poi 4.1.2` and needs the full jar of all of the schemas `ooxml-schemas-1.4.jar` (lower versions for older releases) as mentioned in [apache poi FAQ-N10025](https://poi.apache.org/help/faq.html#faq-N10025). ","title":"java: How to create a pivot with apache poi?","body":"<p><code>Apache poi</code> has only rudimentary support for creating pivot tables. It only creates default pivot tables but is not able creating special settings without falling back to the underlying <code>ooxml-schemas</code> classes.</p>\n<p>For your data source the following code creates what <code>apache poi</code> supports by default:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.FileInputStream;\n\nimport org.apache.poi.ss.SpreadsheetVersion;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTableDefault {\n\n public static void main(String[] args) throws Exception {\n\n  try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \n       FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\n\n   XSSFSheet dataSheet = workbook.getSheetAt(0);\n   XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n\n   XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\n\n   pivotTable.addRowLabel(2);\n   pivotTable.addRowLabel(3);\n   pivotTable.addRowLabel(0);\n   pivotTable.addRowLabel(1);\n\n   workbook.write(fileout);\n\n  }\n\n }\n}\n</code></pre>\n<p>This creates a pivot table in outline format, which is the default.</p>\n<p>If you wants creating a pivot table which is not in outline format and is not showing subtotals for each field, we need using the underlying <code>ooxml-schemas</code> classes. We need creating the correct pivot table field items. And we need to build a cache definition which has shared elements for those items. See also <a href=\"https://stackoverflow.com/questions/37305976/apache-poi-xssfpivottable-setdefaultsubtotal/40480654#40480654\">Apache POI XSSFPivotTable setDefaultSubtotal</a>.</p>\n<p>The following code should create the pivot table you wants from your data source:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.FileInputStream;\n\nimport org.apache.poi.ss.SpreadsheetVersion;\nimport org.apache.poi.ss.util.AreaReference;\nimport org.apache.poi.ss.util.CellReference;\nimport org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField;\nimport org.apache.poi.ss.usermodel.DataFormatter;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTable {\n\n static void addRowLabel(XSSFPivotTable pivotTable, XSSFSheet dataSheet, AreaReference areaReference, int column) { \n\n  DataFormatter formatter = new DataFormatter(java.util.Locale.US);\n  //create row label - apache poi creates as much fields for each as rows are in the pivot table data range\n  pivotTable.addRowLabel(column);\n\n  //determine unique labels in column\n  java.util.TreeSet&lt;String&gt; uniqueItems = new java.util.TreeSet&lt;String&gt;(String.CASE_INSENSITIVE_ORDER);\n  for (int r = areaReference.getFirstCell().getRow()+1; r &lt; areaReference.getLastCell().getRow()+1; r++) {\n   uniqueItems.add(formatter.formatCellValue(dataSheet.getRow(r).getCell(column)));\n  }\n  //System.out.println(uniqueItems);\n\n  //build pivot table and cache\n  CTPivotField ctPivotField = pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldArray(column);\n  int i = 0;\n  for (String item : uniqueItems) {\n   //take the items as numbered items: &lt;item x=&quot;0&quot;/&gt;&lt;item x=&quot;1&quot;/&gt;\n   ctPivotField.getItems().getItemArray(i).unsetT();\n   ctPivotField.getItems().getItemArray(i).setX((long)i);\n   //build a cache definition which has shared elements for those items \n   pivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields().getCacheFieldArray(column)\n    .getSharedItems().addNewS().setV(item);\n   i++;\n  }\n\n  //set pivot field settings\n  ctPivotField.setOutline(false); // no outline format\n  ctPivotField.setDefaultSubtotal(false); // no subtotals for this field\n\n  //remove further items\n  if (ctPivotField.getDefaultSubtotal()) i++; //let one default item be if there shall be subtotals\n  for (int k = ctPivotField.getItems().getItemList().size()-1; k &gt;= i; k--) {\n   ctPivotField.getItems().removeItem(k);\n  }\n  ctPivotField.getItems().setCount(i);\n\n }\n\n public static void main(String[] args) throws Exception {\n\n  try (XSSFWorkbook workbook = new XSSFWorkbook(new FileInputStream(&quot;ExcelSource.xlsx&quot;)); \n       FileOutputStream fileout = new FileOutputStream(&quot;ExcelResult.xlsx&quot;) ) {\n\n   XSSFSheet dataSheet = workbook.getSheetAt(0);\n   XSSFSheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n\n   AreaReference areaReference = new AreaReference(&quot;A1:D5&quot;, SpreadsheetVersion.EXCEL2007);\n\n   XSSFPivotTable pivotTable = pivotSheet.createPivotTable(areaReference, new CellReference(&quot;A1&quot;), dataSheet);\n\n   addRowLabel(pivotTable, dataSheet, areaReference, 2);\n   addRowLabel(pivotTable, dataSheet, areaReference, 3);\n   addRowLabel(pivotTable, dataSheet, areaReference, 0);\n   addRowLabel(pivotTable, dataSheet, areaReference, 1);\n\n   workbook.write(fileout);\n\n  }\n\n }\n}\n</code></pre>\n<p>This code is tested using current <code>apache poi 4.1.2</code> and needs the full jar of all of the schemas <code>ooxml-schemas-1.4.jar</code> (lower versions for older releases) as mentioned in <a href=\"https://poi.apache.org/help/faq.html#faq-N10025\" rel=\"nofollow noreferrer\">apache poi FAQ-N10025</a>.</p>\n"}],"owner":{"account_id":18044137,"reputation":5,"user_id":13115560,"display_name":"regis_studios"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640268277,"creation_date":1585317809,"question_id":60887605,"body_markdown":"    \r\nI&#39;m trying to create an Excel Pivot with apache poi, but I dont really understand how to create the format that I want. I use this code to create, but I get empty values:\r\n\r\n    XSSFPivotTable pivotTable = sheet.createPivotTable(aref, pos);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, colNames[2]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, colNames[3]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 0, colNames[0]);\r\n    pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, colNames[1]);\r\n\r\nMy data looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand I want it to look like this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHow do I achieve that? \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/koiB5.png\r\n  [2]: https://i.stack.imgur.com/CPnxC.png","title":"java: How to create a pivot with apache poi?","body":"<p>I'm trying to create an Excel Pivot with apache poi, but I dont really understand how to create the format that I want. I use this code to create, but I get empty values:</p>\n\n<pre><code>XSSFPivotTable pivotTable = sheet.createPivotTable(aref, pos);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, colNames[2]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, colNames[3]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 0, colNames[0]);\npivotTable.addColumnLabel(DataConsolidateFunction.SUM, 1, colNames[1]);\n</code></pre>\n\n<p>My data looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/koiB5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/koiB5.png\" alt=\"enter image description here\"></a></p>\n\n<p>and I want it to look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPnxC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPnxC.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I achieve that? </p>\n"},{"tags":["java","jaxb","apache-beam","apache-beam-io"],"answers":[{"tags":[],"owner":{"account_id":14798284,"reputation":1363,"user_id":10687325,"display_name":"Alexey Romanenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1589979383,"creation_date":1589979383,"answer_id":61913699,"question_id":61822778,"body_markdown":"Your XML file doesn&#39;t correspond to `XmlIO` options that you define in your pipeline - you need to have a root element that includes your records (books). One of the solutions could be something like this:\r\n\r\n```\r\nPCollection&lt;Book&gt; output = pipeline.apply(\r\n        XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n            .withRootElement(&quot;books&quot;)\r\n            .withRecordElement(&quot;book&quot;)\r\n            .withRecordClass(Book.class));\r\n```\r\n\r\nand XML file should look like this:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;books&gt;\r\n    &lt;book&gt;\r\n        &lt;name&gt;Harrypotter&lt;/name&gt;\r\n    &lt;/book&gt;\r\n&lt;/books&gt;\r\n```","title":"Reading an xml file in apache beam using XmlIo","body":"<p>Your XML file doesn't correspond to <code>XmlIO</code> options that you define in your pipeline - you need to have a root element that includes your records (books). One of the solutions could be something like this:</p>\n\n<pre><code>PCollection&lt;Book&gt; output = pipeline.apply(\n        XmlIO.&lt;Book&gt;read().from(\"sample.xml\")\n            .withRootElement(\"books\")\n            .withRecordElement(\"book\")\n            .withRecordClass(Book.class));\n</code></pre>\n\n<p>and XML file should look like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;books&gt;\n    &lt;book&gt;\n        &lt;name&gt;Harrypotter&lt;/name&gt;\n    &lt;/book&gt;\n&lt;/books&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19255478,"reputation":8414,"user_id":14072498,"display_name":"Roar S."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640267731,"creation_date":1640266546,"answer_id":70462862,"question_id":61822778,"body_markdown":"Just adding runnable version from question for pipeline noobs, like myself, when using newer versions of beam-sdks-java-core (2.31.0)\r\n\r\n```\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.xml.XmlIO;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.transforms.DoFn;\r\nimport org.apache.beam.sdk.transforms.ParDo;\r\n\r\npublic class BookStore {\r\n    public static void main(String[] args) {\r\n\r\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\r\n\r\n        pipeline\r\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n                        .withRootElement(&quot;books&quot;)\r\n                        .withRecordElement(&quot;book&quot;)\r\n                        .withRecordClass(Book.class))\r\n                .apply(ParDo.of(new DoFn&lt;Book, String&gt;() {\r\n\r\n                    @ProcessElement\r\n                    public void processElement(\r\n                            @Element Book element, OutputReceiver&lt;String&gt; receiver) {\r\n\r\n                        System.out.println(&quot;Xml data: &quot; + element.getName());\r\n                        receiver.output(element.getName());\r\n                    }\r\n                }));\r\n\r\n        pipeline.run();\r\n    }\r\n}\r\n```\r\n\r\nAlternative solution:\r\n```\r\nimport org.apache.beam.sdk.Pipeline;\r\nimport org.apache.beam.sdk.io.xml.XmlIO;\r\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\r\nimport org.apache.beam.sdk.transforms.MapElements;\r\nimport org.apache.beam.sdk.values.TypeDescriptors;\r\n\r\npublic class BookStore {\r\n    public static void main(String[] args) {\r\n\r\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\r\n\r\n        pipeline\r\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n                        .withRootElement(&quot;books&quot;)\r\n                        .withRecordElement(&quot;book&quot;)\r\n                        .withRecordClass(Book.class))\r\n                .apply(MapElements.into(TypeDescriptors.strings())\r\n                        .via((Book book) -&gt; {\r\n                            System.out.println(&quot;Xml data: &quot; + book.getName());\r\n                            return book.getName();\r\n                        }));\r\n\r\n        pipeline.run();\r\n    }\r\n}\r\n\r\n```","title":"Reading an xml file in apache beam using XmlIo","body":"<p>Just adding runnable version from question for pipeline noobs, like myself, when using newer versions of beam-sdks-java-core (2.31.0)</p>\n<pre><code>import org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.xml.XmlIO;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.ParDo;\n\npublic class BookStore {\n    public static void main(String[] args) {\n\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\n\n        pipeline\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\n                        .withRootElement(&quot;books&quot;)\n                        .withRecordElement(&quot;book&quot;)\n                        .withRecordClass(Book.class))\n                .apply(ParDo.of(new DoFn&lt;Book, String&gt;() {\n\n                    @ProcessElement\n                    public void processElement(\n                            @Element Book element, OutputReceiver&lt;String&gt; receiver) {\n\n                        System.out.println(&quot;Xml data: &quot; + element.getName());\n                        receiver.output(element.getName());\n                    }\n                }));\n\n        pipeline.run();\n    }\n}\n</code></pre>\n<p>Alternative solution:</p>\n<pre><code>import org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.xml.XmlIO;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.transforms.MapElements;\nimport org.apache.beam.sdk.values.TypeDescriptors;\n\npublic class BookStore {\n    public static void main(String[] args) {\n\n        var pipeline = Pipeline.create(PipelineOptionsFactory.create());\n\n        pipeline\n                .apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\n                        .withRootElement(&quot;books&quot;)\n                        .withRecordElement(&quot;book&quot;)\n                        .withRecordClass(Book.class))\n                .apply(MapElements.into(TypeDescriptors.strings())\n                        .via((Book book) -&gt; {\n                            System.out.println(&quot;Xml data: &quot; + book.getName());\n                            return book.getName();\n                        }));\n\n        pipeline.run();\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":18234154,"reputation":83,"user_id":13272516,"display_name":"Spiriter_rider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1522,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":61913699,"answer_count":2,"score":2,"last_activity_date":1640267731,"creation_date":1589556380,"question_id":61822778,"body_markdown":"problem  statement:\r\n i am  trying  to   read  and  print contents of  an  xml  file  in  beam  using  direct  runner\r\n here  is  the  code  snippet:\r\n\r\n```\r\n public  class  BookStore{\r\n\r\n public  static  void  main  (string  args[]){\r\n\r\n BookOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().as(BookOptions .class); \r\n\r\n Pipeline pipeline = Pipeline.create(options);\r\n\r\n PCollection&lt;Book&gt; output = pipeline.apply(XmlIO.&lt;Book&gt;read().from(&quot;sample.xml&quot;)\r\n\t\t\t     .withRootElement(&quot;book&quot;) \r\n\t\t\t     .withRecordElement(&quot;name&quot;)\r\n\t\t\t     .withRecordClass(Book.class));  \r\n\r\n\t\t output.apply(ParDo.of(new DoFn&lt;Book,String&gt;(){\r\n             @ProcessElement \r\n             public void processElement(ProcessContext c)\r\n             {\r\n                 System.out.println(&quot;xml  data &quot;+c.element().getname());    \r\n             }\r\n          }));\r\n pipeline.run();\r\n}\r\n}\r\n```\r\n\r\nmy  pojo class:\r\n\r\n```\r\n\r\n@XmlRootElement(name = &quot;book&quot;)\r\n@XmlType(propOrder = {&quot;name&quot;})\r\npublic class Book{\r\n \r\n\tprivate String name;\r\n    @XmlElement(name = &quot;name&quot;)\r\n\tpublic String getName ()\r\n\t{\r\n\treturn name;\r\n\t}\r\n\r\n\tpublic void setName (String name)\r\n\t{\r\n\tthis.name = name;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\treturn &quot;ClassPojo [name= &quot;+name+&quot;]&quot;;\r\n\t}\r\n \r\n}\r\n```\r\n\r\nmy  sample.xml  file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; \r\n&lt;book&gt;\r\n   &lt;name&gt;Harrypotter&lt;/name&gt;\r\n&lt;/book&gt;\r\n ```\r\n\r\nwhen  i  execute  the  above  code  using  direct  runner  i  am  getting  output  of  &quot;name&quot;  as  null\r\n\r\ncan somebody  guide  me  on  this.\r\n\r\nis  there  any  example  i  can  refer  into....?","title":"Reading an xml file in apache beam using XmlIo","body":"<p>problem  statement:\n i am  trying  to   read  and  print contents of  an  xml  file  in  beam  using  direct  runner\n here  is  the  code  snippet:</p>\n\n<pre><code> public  class  BookStore{\n\n public  static  void  main  (string  args[]){\n\n BookOptions options = PipelineOptionsFactory.fromArgs(args).withValidation().as(BookOptions .class); \n\n Pipeline pipeline = Pipeline.create(options);\n\n PCollection&lt;Book&gt; output = pipeline.apply(XmlIO.&lt;Book&gt;read().from(\"sample.xml\")\n                 .withRootElement(\"book\") \n                 .withRecordElement(\"name\")\n                 .withRecordClass(Book.class));  \n\n         output.apply(ParDo.of(new DoFn&lt;Book,String&gt;(){\n             @ProcessElement \n             public void processElement(ProcessContext c)\n             {\n                 System.out.println(\"xml  data \"+c.element().getname());    \n             }\n          }));\n pipeline.run();\n}\n}\n</code></pre>\n\n<p>my  pojo class:</p>\n\n<pre><code>\n@XmlRootElement(name = \"book\")\n@XmlType(propOrder = {\"name\"})\npublic class Book{\n\n    private String name;\n    @XmlElement(name = \"name\")\n    public String getName ()\n    {\n    return name;\n    }\n\n    public void setName (String name)\n    {\n    this.name = name;\n    }\n\n    @Override\n    public String toString()\n    {\n    return \"ClassPojo [name= \"+name+\"]\";\n    }\n\n}\n</code></pre>\n\n<p>my  sample.xml  file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; \n&lt;book&gt;\n   &lt;name&gt;Harrypotter&lt;/name&gt;\n&lt;/book&gt;\n</code></pre>\n\n<p>when  i  execute  the  above  code  using  direct  runner  i  am  getting  output  of  \"name\"  as  null</p>\n\n<p>can somebody  guide  me  on  this.</p>\n\n<p>is  there  any  example  i  can  refer  into....?</p>\n"},{"tags":["java","kotlin","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640267517,"creation_date":1640267517,"answer_id":70463056,"question_id":70460269,"body_markdown":"&gt; No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;\r\n\r\nThe request even doesn&#39;t reach your server. That exception is thrown from here in the `RestTemplate.doWithRequest()`:\r\n\r\n\tString message = &quot;No HttpMessageConverter for &quot; + requestBodyClass.getName();\r\n\tif (requestContentType != null) {\r\n\t\tmessage += &quot; and content type \\&quot;&quot; + requestContentType + &quot;\\&quot;&quot;;\r\n\t}\r\n\tthrow new RestClientException(message);\r\n\r\nYou need to be sure what to do with that `com.abs.retrieveclientid.request.TransactionType` in the request payload.  Perhaps you need to transform it more exactly into just a `clientId`, or convert it into a `Map` for form data in the request body. May even convert it into a JSON...\r\n\r\nWe just don&#39;t know what is your service contract. Please, clarify editing your question.","title":"Spring Integration org.springframework.web.client.RestClientException: No HttpMessageConverter","body":"<blockquote>\n<p>No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;</p>\n</blockquote>\n<p>The request even doesn't reach your server. That exception is thrown from here in the <code>RestTemplate.doWithRequest()</code>:</p>\n<pre><code>String message = &quot;No HttpMessageConverter for &quot; + requestBodyClass.getName();\nif (requestContentType != null) {\n    message += &quot; and content type \\&quot;&quot; + requestContentType + &quot;\\&quot;&quot;;\n}\nthrow new RestClientException(message);\n</code></pre>\n<p>You need to be sure what to do with that <code>com.abs.retrieveclientid.request.TransactionType</code> in the request payload.  Perhaps you need to transform it more exactly into just a <code>clientId</code>, or convert it into a <code>Map</code> for form data in the request body. May even convert it into a JSON...</p>\n<p>We just don't know what is your service contract. Please, clarify editing your question.</p>\n"}],"owner":{"account_id":23727084,"reputation":1,"user_id":17746840,"display_name":"starrrk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267517,"creation_date":1640252718,"question_id":70460269,"body_markdown":"I keep getting the below exception in my Spring Integration project:\r\n\r\n    HTTP request execution failed for URI [http://localhost:9502/clients/clientId] in the [bean &#39;retrieveClientIdConfigurationFlow.http:outbound-gateway#0&#39; for component &#39;retrieveClientIdConfigurationFlow.org.springframework.integration.config.ConsumerEndpointFactoryBean#2&#39;; defined in: &#39;class path resource [com/abs/integration/services/RetrieveClientIDConfiguration.class]&#39;; from source: &#39;bean method retrieveClientIdConfigurationFlow&#39;]; nested exception is org.springframework.web.client.RestClientException: No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;here\r\n\r\nMy bean looks like this:\r\n\r\n    @Bean\r\n    fun retrieveClientIdConfigurationFlow(\r\n        xmlRequestTransformer: XmlRequestTransformer,\r\n        xmlResponseTransformer: XmlResponseTransformer,\r\n        responseTransformer: ResponseTransformer\r\n    ): IntegrationFlow =\r\n        IntegrationFlows\r\n            .from(INPUT_CHANNEL)\r\n            .transform(xmlRequestTransformer)\r\n            .handle(\r\n                Http.outboundGateway(&quot;http://localhost:9502/clients/clientId&quot;)\r\n                    .httpMethod(HttpMethod.POST)\r\n                    .expectedResponseType(String::class.java)\r\n            )\r\n            .transform(Transformers.fromJson(ClientId::class.java))\r\n            .transform(responseTransformer)\r\n            .transform(xmlResponseTransformer)\r\n            .channel(OUTPUT_CHANNEL)\r\n            .get()\r\n\r\nI receive request XML file, after which I make call to retrieve clientId which should be used to generate response XML. \r\n\r\nIt seems that clientId is not even created when executing hanlde method ( no increase in DB). When trying endpoint in postman, id is generated and content type is &quot;application/json&quot;.\r\n\r\n\r\nI have tried message converters, but none of them worked. Any suggestion would be very appreciated.","title":"Spring Integration org.springframework.web.client.RestClientException: No HttpMessageConverter","body":"<p>I keep getting the below exception in my Spring Integration project:</p>\n<pre><code>HTTP request execution failed for URI [http://localhost:9502/clients/clientId] in the [bean 'retrieveClientIdConfigurationFlow.http:outbound-gateway#0' for component 'retrieveClientIdConfigurationFlow.org.springframework.integration.config.ConsumerEndpointFactoryBean#2'; defined in: 'class path resource [com/abs/integration/services/RetrieveClientIDConfiguration.class]'; from source: 'bean method retrieveClientIdConfigurationFlow']; nested exception is org.springframework.web.client.RestClientException: No HttpMessageConverter for com.abs.retrieveclientid.request.TransactionType and content type &quot;application/x-java-serialized-object&quot;here\n</code></pre>\n<p>My bean looks like this:</p>\n<pre><code>@Bean\nfun retrieveClientIdConfigurationFlow(\n    xmlRequestTransformer: XmlRequestTransformer,\n    xmlResponseTransformer: XmlResponseTransformer,\n    responseTransformer: ResponseTransformer\n): IntegrationFlow =\n    IntegrationFlows\n        .from(INPUT_CHANNEL)\n        .transform(xmlRequestTransformer)\n        .handle(\n            Http.outboundGateway(&quot;http://localhost:9502/clients/clientId&quot;)\n                .httpMethod(HttpMethod.POST)\n                .expectedResponseType(String::class.java)\n        )\n        .transform(Transformers.fromJson(ClientId::class.java))\n        .transform(responseTransformer)\n        .transform(xmlResponseTransformer)\n        .channel(OUTPUT_CHANNEL)\n        .get()\n</code></pre>\n<p>I receive request XML file, after which I make call to retrieve clientId which should be used to generate response XML.</p>\n<p>It seems that clientId is not even created when executing hanlde method ( no increase in DB). When trying endpoint in postman, id is generated and content type is &quot;application/json&quot;.</p>\n<p>I have tried message converters, but none of them worked. Any suggestion would be very appreciated.</p>\n"},{"tags":["java","nullpointerexception","sonarqube","nullable","sonarlint"],"comments":[{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1640095366,"post_id":70436347,"comment_id":124510301,"body_markdown":"Well, at least, two subsequent calls to `getBody()` *could* return different results if the resulting `ResponseVO` is mutable and some other thread changes its value. That&#39;s not possible if you store it in a local variable first. However, I do not know whether this is the reason why SonarLint issues a warning here.","body":"Well, at least, two subsequent calls to <code>getBody()</code> <i>could</i> return different results if the resulting <code>ResponseVO</code> is mutable and some other thread changes its value. That&#39;s not possible if you store it in a local variable first. However, I do not know whether this is the reason why SonarLint issues a warning here."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":0,"creation_date":1640095747,"post_id":70436347,"comment_id":124510474,"body_markdown":"@MCEmperor I don&#39;t think it&#39;s related for HttpEntity&#39;s `private final T body`","body":"@MCEmperor I don&#39;t think it&#39;s related for HttpEntity&#39;s <code>private final T body</code>"},{"owner":{"account_id":155325,"reputation":2979,"user_id":371917,"accept_rate":80,"display_name":"Peet Brits"},"score":0,"creation_date":1664527390,"post_id":70436347,"comment_id":130496833,"body_markdown":"Another way this can trigger: `MyClass debug = null; if (debug?.Buffer?.Length &gt; 0) return debug.Buffer[0];` -- assuming MyClass has a byte[] Buffer property.","body":"Another way this can trigger: <code>MyClass debug = null; if (debug?.Buffer?.Length &gt; 0) return debug.Buffer[0];</code> -- assuming MyClass has a byte[] Buffer property."},{"owner":{"account_id":155325,"reputation":2979,"user_id":371917,"accept_rate":80,"display_name":"Peet Brits"},"score":1,"creation_date":1664530245,"post_id":70436347,"comment_id":130497818,"body_markdown":"I also logged an issue: https://github.com/SonarSource/sonar-dotnet/issues/6149","body":"I also logged an issue: <a href=\"https://github.com/SonarSource/sonar-dotnet/issues/6149\" rel=\"nofollow noreferrer\">github.com/SonarSource/sonar-dotnet/issues/6149</a>"}],"answers":[{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1640267314,"creation_date":1640267314,"answer_id":70463022,"question_id":70436347,"body_markdown":"Raised a [false-positive][1] in Sonar community and answered by @DamienUrruty\r\n\r\n&gt;indeed it looks like a false-positive. That said it might make the rule more complex to support this case\r\n\r\n[1]:https://community.sonarsource.com/t/sonarlint-wrong-nullpointerexception-warning-s2259-when-reusing-responseentity/55510","title":"Sonarlint false positive NullPointer warning (S2259) when using ResponseEntity","body":"<p>Raised a <a href=\"https://community.sonarsource.com/t/sonarlint-wrong-nullpointerexception-warning-s2259-when-reusing-responseentity/55510\" rel=\"nofollow noreferrer\">false-positive</a> in Sonar community and answered by @DamienUrruty</p>\n<blockquote>\n<p>indeed it looks like a false-positive. That said it might make the rule more complex to support this case</p>\n</blockquote>\n"}],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1734,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70463022,"answer_count":1,"score":1,"last_activity_date":1640267375,"creation_date":1640093691,"question_id":70436347,"body_markdown":"For general restTemplate operation,as :\r\n\r\n    ResponseEntity&lt;ResponseVO&gt; response = restTemplate.postForEntity(url, entity, ResponseVO.class);\r\n    if (response.getBody() != null) {\r\n        String url = response.getBody().getUrl();\r\n\r\nI&#39;m getting wrong sonar warning when reusing the `ResponseEntity`:\r\n\r\n    A &quot;NullPointerException&quot; could be thrown; &quot;getBody()&quot; can return null. sonarlint(java:S2259)\r\n\r\nAlso if I refactor and introduce a variable no warning appears:\r\n\r\n    ResponseVO body = response.getBody();\r\n    if (body != null) {\r\n        String url = body.getUrl();\r\n\r\nI don&#39;t need to add `response != null`, if added there&#39;s a different (ok) warning:\r\n\r\n    Remove this expression which always evaluates to &quot;true&quot; [+3 locations]sonarlint(java:S2589)\r\n\r\nIs it SonarLint bug? why it warns about NullPointerException?\r\n\r\nI suspect it&#39;s related to HttpEntity `@Nullable` definition  \r\n\r\n\t@Nullable\r\n\tpublic T getBody() {\r\n\r\nI didn&#39;t find similar issue in [jira.sonarsource][1]\r\n\r\n[1]:https://jira.sonarsource.com/browse/SONARJAVA-1889?filter=-4&amp;jql=text%20~%20%22java%3AS2259%22%20order%20by%20created%20DESC\r\n","title":"Sonarlint false positive NullPointer warning (S2259) when using ResponseEntity","body":"<p>For general restTemplate operation,as :</p>\n<pre><code>ResponseEntity&lt;ResponseVO&gt; response = restTemplate.postForEntity(url, entity, ResponseVO.class);\nif (response.getBody() != null) {\n    String url = response.getBody().getUrl();\n</code></pre>\n<p>I'm getting wrong sonar warning when reusing the <code>ResponseEntity</code>:</p>\n<pre><code>A &quot;NullPointerException&quot; could be thrown; &quot;getBody()&quot; can return null. sonarlint(java:S2259)\n</code></pre>\n<p>Also if I refactor and introduce a variable no warning appears:</p>\n<pre><code>ResponseVO body = response.getBody();\nif (body != null) {\n    String url = body.getUrl();\n</code></pre>\n<p>I don't need to add <code>response != null</code>, if added there's a different (ok) warning:</p>\n<pre><code>Remove this expression which always evaluates to &quot;true&quot; [+3 locations]sonarlint(java:S2589)\n</code></pre>\n<p>Is it SonarLint bug? why it warns about NullPointerException?</p>\n<p>I suspect it's related to HttpEntity <code>@Nullable</code> definition</p>\n<pre><code>@Nullable\npublic T getBody() {\n</code></pre>\n<p>I didn't find similar issue in <a href=\"https://jira.sonarsource.com/browse/SONARJAVA-1889?filter=-4&amp;jql=text%20%7E%20%22java%3AS2259%22%20order%20by%20created%20DESC\" rel=\"nofollow noreferrer\">jira.sonarsource</a></p>\n"},{"tags":["java","spring","rest","cucumber","cucumber-java"],"answers":[{"tags":[],"owner":{"account_id":10489136,"reputation":2762,"user_id":7731623,"display_name":"Nandan A"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640267346,"creation_date":1640156233,"answer_id":70445288,"question_id":70443480,"body_markdown":"Updated the solution based on `M.P. Korstanje` comment.\r\nYou can skip tests by using `Assume`. The below is the one of the approach,\r\n\r\n**Code**:\r\n\r\n```\r\npublic class stepDef {\r\n\tstatic HashMap&lt;String, String&gt; conditions;\r\n\tstatic {\r\n\t\tconditions = new HashMap&lt;String, String&gt;();\r\n\t}\r\n\t\r\n\t@Before\r\n\tpublic void beforeTest(Scenario scenario) {\r\n\t\tif (conditions.containsKey(&quot;result&quot;) &amp;&amp; conditions.get(&quot;result&quot;).equalsIgnoreCase(&quot;false&quot;)) {\r\n\t\t\tSystem.out.println(&quot;************************Test not executed.************************&quot;);\r\n\t\t\tAssume.assumeTrue(false);\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;************************Started************************&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t@After\r\n\tpublic void afterTest(Scenario scenario) {\r\n\t\tif (scenario.isFailed()) {\r\n\t\t\tconditions.put(&quot;result&quot;, &quot;false&quot;);\r\n\t\t}\r\n\t\tSystem.out.println(&quot;************************Completed************************&quot;);\r\n\t}\r\n}\r\n```\r\n**Output**:\r\n\r\n```\r\n@Test\r\nScenario Outline: Test scenario                                                                                            \r\n************************Started************************\r\n//Result\r\n************************Completed************************\r\n\r\n@Test\r\nScenario Outline: decision                            \r\n************************Test not executed.************************\r\n    org.junit.AssumptionViolatedException: got: &lt;false&gt;, expected: is &lt;true&gt;\r\n\tat org.junit.Assume.assumeThat(Assume.java:106)\r\n\tat org.junit.Assume.assumeTrue(Assume.java:50)\r\n\tat cucumberStep.stepDef.beforeTest(stepDef.java:69)\r\n************************Completed************************\r\n```\r\n\r\n**Report**:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eLmdn.png","title":"How to quit test execution using cucumber hooks","body":"<p>Updated the solution based on <code>M.P. Korstanje</code> comment.\nYou can skip tests by using <code>Assume</code>. The below is the one of the approach,</p>\n<p><strong>Code</strong>:</p>\n<pre><code>public class stepDef {\n    static HashMap&lt;String, String&gt; conditions;\n    static {\n        conditions = new HashMap&lt;String, String&gt;();\n    }\n    \n    @Before\n    public void beforeTest(Scenario scenario) {\n        if (conditions.containsKey(&quot;result&quot;) &amp;&amp; conditions.get(&quot;result&quot;).equalsIgnoreCase(&quot;false&quot;)) {\n            System.out.println(&quot;************************Test not executed.************************&quot;);\n            Assume.assumeTrue(false);\n        } else {\n            System.out.println(&quot;************************Started************************&quot;);\n        }\n    }\n\n    @After\n    public void afterTest(Scenario scenario) {\n        if (scenario.isFailed()) {\n            conditions.put(&quot;result&quot;, &quot;false&quot;);\n        }\n        System.out.println(&quot;************************Completed************************&quot;);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>@Test\nScenario Outline: Test scenario                                                                                            \n************************Started************************\n//Result\n************************Completed************************\n\n@Test\nScenario Outline: decision                            \n************************Test not executed.************************\n    org.junit.AssumptionViolatedException: got: &lt;false&gt;, expected: is &lt;true&gt;\n    at org.junit.Assume.assumeThat(Assume.java:106)\n    at org.junit.Assume.assumeTrue(Assume.java:50)\n    at cucumberStep.stepDef.beforeTest(stepDef.java:69)\n************************Completed************************\n</code></pre>\n<p><strong>Report</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/eLmdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eLmdn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9931091,"reputation":85,"user_id":7351030,"display_name":"syed naveed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":848,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267346,"creation_date":1640138720,"question_id":70443480,"body_markdown":"i have gone through various post but couldn&#39;t find a easy solution to quit cucumber test execution if one of the my API Test fails. I want to use `@After` hook to quit the test execution if one of the condition fails. For example if my `result()` return `false` i don&#39;t want to execute remaining test. Is there a easy way such as \r\n```\r\nif(result() == false){ \r\n   cucumber.quit();\r\n}\r\n```\r\n     \r\nI am using rest assured with gradle for my API Automation. ","title":"How to quit test execution using cucumber hooks","body":"<p>i have gone through various post but couldn't find a easy solution to quit cucumber test execution if one of the my API Test fails. I want to use <code>@After</code> hook to quit the test execution if one of the condition fails. For example if my <code>result()</code> return <code>false</code> i don't want to execute remaining test. Is there a easy way such as</p>\n<pre><code>if(result() == false){ \n   cucumber.quit();\n}\n</code></pre>\n<p>I am using rest assured with gradle for my API Automation.</p>\n"},{"tags":["java","kerberos","spring-security-kerberos","jgss"],"comments":[{"owner":{"account_id":7319797,"reputation":409,"user_id":5576171,"display_name":"Elena Oblomova"},"score":0,"creation_date":1450258264,"post_id":34306386,"comment_id":56358149,"body_markdown":"Please, show the code you use to establish the context","body":"Please, show the code you use to establish the context"},{"owner":{"account_id":6451300,"reputation":1733,"user_id":4998135,"accept_rate":95,"display_name":"Nico"},"score":1,"creation_date":1479459670,"post_id":34306386,"comment_id":68575979,"body_markdown":"I know this is an old thread but I recently had the exact same issue and in my case it was a problem with the spn.\n\nI called my service and then typed `klist` in cmd to search for my service. after I found it I saw something like this: HTTP/service.domain.com@DOMAIN.COM. What you have to do is verify that a SPN for this is created. Create an service account and create the spn with `setspn -a HTTP/service.domain.com domain\\serviceAccout` and after that create a keytab with `ktab -k FILE:your_filename.ktab -a HTTP/service.domain.com domain\\password_of_service_account`.","body":"I know this is an old thread but I recently had the exact same issue and in my case it was a problem with the spn.  I called my service and then typed <code>klist</code> in cmd to search for my service. after I found it I saw something like this: HTTP/service.domain.com@DOMAIN.COM. What you have to do is verify that a SPN for this is created. Create an service account and create the spn with <code>setspn -a HTTP&#47;service.domain.com domain\\serviceAccout</code> and after that create a keytab with <code>ktab -k FILE:your_filename.ktab -a HTTP&#47;service.domain.com domain\\password_of_service_account</code>."}],"answers":[{"tags":[],"owner":{"account_id":7319797,"reputation":409,"user_id":5576171,"display_name":"Elena Oblomova"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1450259491,"creation_date":1450259491,"answer_id":34308710,"question_id":34306386,"body_markdown":"It seems that the context is not fully established when you are trying to get SrcName. It seems to be the reason for ScrName to be null. According to https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html, acceptSecContext() generates a token and if it&#39;s not null, this token should be sent to the peer.\r\nAfter the call acceptSecContext() you should check if isEstablished() returns false. If it&#39;s so, \r\n\r\n&gt;  If this method returns false it indicates that a token is needed from its peer in order to continue the context establishment phase. A return value of true signals that the local end of the context is established. This may still require that a token be sent to the peer, if one is produced by GSS-API. During the context establishment phase, the isProtReady() method may be called to determine if the context can be used for the per-message operations. This allows applications to use per-message operations on contexts which aren&#39;t fully established.\r\n\r\nThe same is explained in more details in the tutorial http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html:\r\n\r\n&gt; The acceptSecContext method may in turn return a token. If it does, the acceptor should send that token to the initiator, which should then call initSecContext again and pass it this token. Each time initSecContext or acceptSecContext returns a token, the application that called the method should send the token to its peer and that peer should pass the token to its appropriate method (acceptSecContext or initSecContext). This continues until the context is fully established (which is the case when the context&#39;s isEstablished method returns true).\r\n","title":"GSSContext with null SrcName","body":"<p>It seems that the context is not fully established when you are trying to get SrcName. It seems to be the reason for ScrName to be null. According to <a href=\"https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html\" rel=\"nofollow\">https://www-01.ibm.com/support/knowledgecenter/SSYKE2_7.0.0/com.ibm.java.security.api.doc/jgss/org/ietf/jgss/GSSContext.html</a>, acceptSecContext() generates a token and if it's not null, this token should be sent to the peer.\nAfter the call acceptSecContext() you should check if isEstablished() returns false. If it's so, </p>\n\n<blockquote>\n  <p>If this method returns false it indicates that a token is needed from its peer in order to continue the context establishment phase. A return value of true signals that the local end of the context is established. This may still require that a token be sent to the peer, if one is produced by GSS-API. During the context establishment phase, the isProtReady() method may be called to determine if the context can be used for the per-message operations. This allows applications to use per-message operations on contexts which aren't fully established.</p>\n</blockquote>\n\n<p>The same is explained in more details in the tutorial <a href=\"http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html\" rel=\"nofollow\">http://www.cs.mun.ca/java-api-1.5/guide/security/jgss/tutorials/BasicClientServer.html</a>:</p>\n\n<blockquote>\n  <p>The acceptSecContext method may in turn return a token. If it does, the acceptor should send that token to the initiator, which should then call initSecContext again and pass it this token. Each time initSecContext or acceptSecContext returns a token, the application that called the method should send the token to its peer and that peer should pass the token to its appropriate method (acceptSecContext or initSecContext). This continues until the context is fully established (which is the case when the context's isEstablished method returns true).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1048391,"reputation":3074,"user_id":1052899,"display_name":"Fabiano Tarlao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1507383183,"creation_date":1502883177,"answer_id":45712445,"question_id":34306386,"body_markdown":"I faced the same `Checksum failed` error when implementing my GSSAPI socket demo that is a modification of the Oracle GSSAPI [tutorial][1] code.\r\nI executed my code on a Linux machine enrolled into a FreeIPA kerberos realm.\r\nI have used the vanilla `krb5.conf` file of my Linux system. No constraints on ticket `etype` are there:\r\n\r\n    ...\r\n    [libdefaults]\r\n      default_realm = AUTHDEMO.IT\r\n      dns_lookup_realm = true\r\n      dns_lookup_kdc = true\r\n      rdns = false\r\n      ticket_lifetime = 24h\r\n      forwardable = true\r\n      udp_preference_limit = 0 \r\n    ...\r\n\r\nThe FreeIPA realm default is to use type 18 tickets (AES-256).\r\n\r\nAbout my application, it has this policy file configured:\r\n\r\n    grant CodeBase &quot;file:./app.jar&quot; {\r\n            permission java.security.AllPermission;\r\n    };\r\n    \r\n    grant CodeBase &quot;file:./app.jar&quot; \r\n    \tPrincipal javax.security.auth.kerberos.KerberosPrincipal \r\n    \t\t&quot;servicename@AUTHDEMO.IT&quot; {\r\n    \r\n    \tpermission java.net.SocketPermission &quot;*&quot;, &quot;accept&quot;;\r\n    \r\n    \tpermission javax.security.auth.kerberos.ServicePermission\r\n    \t\t&quot;servicename@AUTHDEMO.IT&quot;, &quot;accept&quot;;\r\n    };\r\n\r\n    \r\nWhen executing the application I got this error on the acceptor side:\r\n\r\n&gt; GSSException: Failure unspecified at GSS-API level (Mechanism level:\r\n&gt; Encryption type AES256CTS mode with HMAC SHA1-96 is not\r\n&gt; supported/enabled)\r\n\r\nIn my case the error arises in the GSS acceptor side. In my application I generate the Jaas configuration programmatically (I&#39;ll refer at this as *DConfig*) and I don&#39;t use a config file.\r\nThe first solution, I found, is to use config files instead of DConfig and the problem disappeared, it worked fine.\r\nThe temporary solution, Jaas Config file:\r\n\r\n    DemoServer {\r\n      com.sun.security.auth.module.Krb5LoginModule required\r\n       principal=&quot;servicename@AUTHDEMO.IT&quot;\r\n       storeKey=true\r\n       debug=true; #not mandatory\r\n    };\r\n\r\n\r\nWith this configuration, no problem arises on the acceptor side and the application were able to check the service ticket validity and accept the connection.\r\n\r\nI asked myself.. **WHY?**\r\n\r\nI checked differences in the Subject(s) acquired with the two configurations. In the working case, with the config file, the subject contains, into the private credentials, both the password hashes credentials and the principal TGT ticket.\r\nWith DConfig, I obtain a Subject with only password hashes but there is no principal TGT ticket in private credentials.\r\n\r\n**My fix**\r\n\r\nDConfig contains the same settings of the configuration file and the other options are the replica of `Krb5LoginModule` defaults, at first I cannot see a reason for the misbehaviour.\r\n\r\nSetting `isInitiator = true`, into the acceptor side DConfig, solved the issue. `isInitiator = true has forced the persistence of TGT ticket into the subject.\r\n\r\nWith this workaround the  error has disappeared with no change into the system krb5.conf.\r\n\r\nMy cent is... after Jaas login, let&#39;s check your subject private credentials for lacking creds (You need the service principal TGT into your acceptor side subject!) and in case try to set `isInitiator = true` to the acceptor side too.\r\n\r\nRegards\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/ClientServer.html","title":"GSSContext with null SrcName","body":"<p>I faced the same <code>Checksum failed</code> error when implementing my GSSAPI socket demo that is a modification of the Oracle GSSAPI <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/ClientServer.html\" rel=\"nofollow noreferrer\">tutorial</a> code.\nI executed my code on a Linux machine enrolled into a FreeIPA kerberos realm.\nI have used the vanilla <code>krb5.conf</code> file of my Linux system. No constraints on ticket <code>etype</code> are there:</p>\n\n<pre><code>...\n[libdefaults]\n  default_realm = AUTHDEMO.IT\n  dns_lookup_realm = true\n  dns_lookup_kdc = true\n  rdns = false\n  ticket_lifetime = 24h\n  forwardable = true\n  udp_preference_limit = 0 \n...\n</code></pre>\n\n<p>The FreeIPA realm default is to use type 18 tickets (AES-256).</p>\n\n<p>About my application, it has this policy file configured:</p>\n\n<pre><code>grant CodeBase \"file:./app.jar\" {\n        permission java.security.AllPermission;\n};\n\ngrant CodeBase \"file:./app.jar\" \n    Principal javax.security.auth.kerberos.KerberosPrincipal \n        \"servicename@AUTHDEMO.IT\" {\n\n    permission java.net.SocketPermission \"*\", \"accept\";\n\n    permission javax.security.auth.kerberos.ServicePermission\n        \"servicename@AUTHDEMO.IT\", \"accept\";\n};\n</code></pre>\n\n<p>When executing the application I got this error on the acceptor side:</p>\n\n<blockquote>\n  <p>GSSException: Failure unspecified at GSS-API level (Mechanism level:\n  Encryption type AES256CTS mode with HMAC SHA1-96 is not\n  supported/enabled)</p>\n</blockquote>\n\n<p>In my case the error arises in the GSS acceptor side. In my application I generate the Jaas configuration programmatically (I'll refer at this as <em>DConfig</em>) and I don't use a config file.\nThe first solution, I found, is to use config files instead of DConfig and the problem disappeared, it worked fine.\nThe temporary solution, Jaas Config file:</p>\n\n<pre><code>DemoServer {\n  com.sun.security.auth.module.Krb5LoginModule required\n   principal=\"servicename@AUTHDEMO.IT\"\n   storeKey=true\n   debug=true; #not mandatory\n};\n</code></pre>\n\n<p>With this configuration, no problem arises on the acceptor side and the application were able to check the service ticket validity and accept the connection.</p>\n\n<p>I asked myself.. <strong>WHY?</strong></p>\n\n<p>I checked differences in the Subject(s) acquired with the two configurations. In the working case, with the config file, the subject contains, into the private credentials, both the password hashes credentials and the principal TGT ticket.\nWith DConfig, I obtain a Subject with only password hashes but there is no principal TGT ticket in private credentials.</p>\n\n<p><strong>My fix</strong></p>\n\n<p>DConfig contains the same settings of the configuration file and the other options are the replica of <code>Krb5LoginModule</code> defaults, at first I cannot see a reason for the misbehaviour.</p>\n\n<p>Setting <code>isInitiator = true</code>, into the acceptor side DConfig, solved the issue. `isInitiator = true has forced the persistence of TGT ticket into the subject.</p>\n\n<p>With this workaround the  error has disappeared with no change into the system krb5.conf.</p>\n\n<p>My cent is... after Jaas login, let's check your subject private credentials for lacking creds (You need the service principal TGT into your acceptor side subject!) and in case try to set <code>isInitiator = true</code> to the acceptor side too.</p>\n\n<p>Regards</p>\n"}],"owner":{"account_id":1809759,"reputation":2549,"user_id":1646082,"accept_rate":80,"display_name":"Vartlok"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6168,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1640267251,"creation_date":1450251608,"question_id":34306386,"body_markdown":"I&#39;m working a web appliaction with SSO based on the Windows domain login, for this purpose I have chosen to validate Kerberos tickets. But now I&#39;m facing a problem for which I can&#39;t find a solution. I manage to validate a ticket without exceptions, but when I&#39;m trying to get the userName, `NullPointerException` is thrown, because the username is `null` and I don&#39;t know where is problem. \r\n\r\n**Why is user name null if I don&#39;t get any exception during the validation?**\r\n\r\nHow I get userName:\r\n`String clientName = gssContext.getSrcName().toString();`\r\n\r\nI create my client based on this:\r\n\r\nhttps://stackoverflow.com/questions/25289231/using-gssmanager-to-validate-a-kerberos-ticket\r\n\r\nhttps://stackoverflow.com/questions/370878/how-to-obtain-a-kerberos-service-ticket-via-gss-api\r\n\r\nhttp://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html\r\n\r\n**Update 1:**\r\n\r\nHow I setup content, just copy-paste form here https://stackoverflow.com/a/25450862/1646082:\r\n\r\n    final Oid spnegoOid = new Oid(&quot;1.3.6.1.5.5.2&quot;);\r\n\r\n    GSSManager gssmgr = GSSManager.getInstance();\r\n\r\n    // tell the GSSManager the Kerberos name of the service\r\n    GSSName serviceName = gssmgr.createName(this.servicePrincipal, GSSName.NT_USER_NAME);\r\n\r\n    // get the service&#39;s credentials. note that this run() method was called by Subject.doAs(),\r\n    // so the service&#39;s credentials (Service Principal Name and password) are already\r\n    // available in the Subject\r\n    GSSCredential serviceCredentials = gssmgr.createCredential(serviceName,\r\n            GSSCredential.INDEFINITE_LIFETIME, spnegoOid, GSSCredential.ACCEPT_ONLY);\r\n\r\n    // create a security context for decrypting the service ticket\r\n    GSSContext gssContext = gssmgr.createContext(serviceCredentials);\r\n\r\n    // decrypt the service ticket\r\n    System.out.println(&quot;Entering accpetSecContext...&quot;);\r\n    System.out.println( new String (Base64.encodeBase64( gssContext.acceptSecContext(this.kerberosTicket, 0,\r\n            this.kerberosTicket.length) ) ));\r\n\r\n    // get the client name from the decrypted service ticket\r\n    // note that Active Directory created the service ticket, so we can trust it\r\n    String clientName = gssContext.getSrcName().toString();\r\n\r\n\r\n**Update 2:**\r\n\r\nIf I setup spring security based on this https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension i also got the same error:\r\n\r\n&gt;  java.lang.NullPointerException \tat\r\n&gt; org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)\r\n&gt; \tat\r\n&gt; org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:125)\r\n&gt; \tat java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; javax.security.auth.Subject.doAs(Subject.java:422)\r\n\r\n    private static class KerberosValidateAction implements PrivilegedExceptionAction&lt;String&gt; {\r\n        byte[] kerberosTicket;\r\n\r\n        public KerberosValidateAction(byte[] kerberosTicket) {\r\n            this.kerberosTicket = kerberosTicket;\r\n        }\r\n\r\n        @Override\r\n        public String run() throws Exception {\r\n            GSSContext context = GSSManager.getInstance().createContext((GSSCredential) null);\r\n            context.acceptSecContext(kerberosTicket, 0, kerberosTicket.length);\r\n            String user = context.getSrcName().toString(); // ERROR!\r\n            context.dispose();\r\n            return user;\r\n        }\r\n\r\n    }\r\n\r\n**Update 3:**\r\n\r\nAlso tried change Java version from 1.8 to 1.7 as suggested here https://stackoverflow.com/questions/29747565/domain-authentication-with-kerberos-fails. No result.\r\n\r\n**Update 4:**\r\n\r\nFirst of all. Don&#39;t user Java 1.8 b40 and b45, both of them are broken. And don&#39;t test it on local PC, it doesn&#39;t work(I don&#39;t know why).\r\n\r\nAfter changing on newest(b65) Java version, I got exception about encription(Cannot find key of appropriate type to decrypt AP REP - AES256 ...). This I have fixed by Java Cryptography Extension (JCE) for Java 1.8 and re-create keytab with `/crypto AES256-SHA1` after all this i got exception:\r\n\r\n&gt; GSSException: Failure unspecified at GSS-API level (Mechanism level:\r\n&gt; Checksum failed) at\r\n&gt; sun.security.jgss.krb5.Krb5Context.acceptSecContext(Unknown Source) at\r\n&gt; sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\r\n&gt; sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\r\n&gt; GssServer$GssServerAction.run(GssServer.java:159) \r\n&gt; ... 4 more \r\n&gt; Caused by: KrbException: Checksum failed at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\r\n&gt; Source) at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\r\n&gt; Source) at sun.security.krb5.EncryptedData.decrypt(Unknown Source) at\r\n&gt; sun.security.krb5.KrbApReq.authenticate(Unknown Source) at\r\n&gt; sun.security.krb5.KrbApReq.&lt;init&gt;(Unknown Source) at\r\n&gt; sun.security.jgss.krb5.InitSecContextToken.&lt;init&gt;(Unknown Source)\r\n&gt; ... 8 more \r\n&gt; Caused by: java.security.GeneralSecurityException: Checksum\r\n&gt; failed at\r\n&gt; sun.security.krb5.internal.crypto.dk.ArcFourCrypto.decrypt(Unknown\r\n&gt; Source) at\r\n&gt; sun.security.krb5.internal.crypto.ArcFourHmac.decrypt(Unknown Source)\r\n&gt; ... 14 more\r\n\r\nI tried [this tutorial][1] and other way to create keytabfile, but i still don&#39;t have solution.\r\n\r\n\r\n  [1]: https://dmdaa.wordpress.com/2010/03/13/kerberos-setup-and-jaas-configuration-for-running-sun-jgss-tutorial-against-ad/","title":"GSSContext with null SrcName","body":"<p>I'm working a web appliaction with SSO based on the Windows domain login, for this purpose I have chosen to validate Kerberos tickets. But now I'm facing a problem for which I can't find a solution. I manage to validate a ticket without exceptions, but when I'm trying to get the userName, <code>NullPointerException</code> is thrown, because the username is <code>null</code> and I don't know where is problem. </p>\n\n<p><strong>Why is user name null if I don't get any exception during the validation?</strong></p>\n\n<p>How I get userName:\n<code>String clientName = gssContext.getSrcName().toString();</code></p>\n\n<p>I create my client based on this:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25289231/using-gssmanager-to-validate-a-kerberos-ticket\">Using GSSManager to validate a Kerberos ticket</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/370878/how-to-obtain-a-kerberos-service-ticket-via-gss-api\">How to obtain a kerberos service ticket via GSS-API?</a></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/single-signon.html</a></p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>How I setup content, just copy-paste form here <a href=\"https://stackoverflow.com/a/25450862/1646082\">https://stackoverflow.com/a/25450862/1646082</a>:</p>\n\n<pre><code>final Oid spnegoOid = new Oid(\"1.3.6.1.5.5.2\");\n\nGSSManager gssmgr = GSSManager.getInstance();\n\n// tell the GSSManager the Kerberos name of the service\nGSSName serviceName = gssmgr.createName(this.servicePrincipal, GSSName.NT_USER_NAME);\n\n// get the service's credentials. note that this run() method was called by Subject.doAs(),\n// so the service's credentials (Service Principal Name and password) are already\n// available in the Subject\nGSSCredential serviceCredentials = gssmgr.createCredential(serviceName,\n        GSSCredential.INDEFINITE_LIFETIME, spnegoOid, GSSCredential.ACCEPT_ONLY);\n\n// create a security context for decrypting the service ticket\nGSSContext gssContext = gssmgr.createContext(serviceCredentials);\n\n// decrypt the service ticket\nSystem.out.println(\"Entering accpetSecContext...\");\nSystem.out.println( new String (Base64.encodeBase64( gssContext.acceptSecContext(this.kerberosTicket, 0,\n        this.kerberosTicket.length) ) ));\n\n// get the client name from the decrypted service ticket\n// note that Active Directory created the service ticket, so we can trust it\nString clientName = gssContext.getSrcName().toString();\n</code></pre>\n\n<p><strong>Update 2:</strong></p>\n\n<p>If I setup spring security based on this <a href=\"https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension\" rel=\"nofollow noreferrer\">https://spring.io/blog/2009/09/28/spring-security-kerberos-spnego-extension</a> i also got the same error:</p>\n\n<blockquote>\n  <p>java.lang.NullPointerException   at\n  org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:136)\n    at\n  org.springframework.security.extensions.kerberos.SunJaasKerberosTicketValidator$KerberosValidateAction.run(SunJaasKerberosTicketValidator.java:125)\n    at java.security.AccessController.doPrivileged(Native Method)   at\n  javax.security.auth.Subject.doAs(Subject.java:422)</p>\n</blockquote>\n\n<pre><code>private static class KerberosValidateAction implements PrivilegedExceptionAction&lt;String&gt; {\n    byte[] kerberosTicket;\n\n    public KerberosValidateAction(byte[] kerberosTicket) {\n        this.kerberosTicket = kerberosTicket;\n    }\n\n    @Override\n    public String run() throws Exception {\n        GSSContext context = GSSManager.getInstance().createContext((GSSCredential) null);\n        context.acceptSecContext(kerberosTicket, 0, kerberosTicket.length);\n        String user = context.getSrcName().toString(); // ERROR!\n        context.dispose();\n        return user;\n    }\n\n}\n</code></pre>\n\n<p><strong>Update 3:</strong></p>\n\n<p>Also tried change Java version from 1.8 to 1.7 as suggested here <a href=\"https://stackoverflow.com/questions/29747565/domain-authentication-with-kerberos-fails\">Domain authentication with Kerberos fails</a>. No result.</p>\n\n<p><strong>Update 4:</strong></p>\n\n<p>First of all. Don't user Java 1.8 b40 and b45, both of them are broken. And don't test it on local PC, it doesn't work(I don't know why).</p>\n\n<p>After changing on newest(b65) Java version, I got exception about encription(Cannot find key of appropriate type to decrypt AP REP - AES256 ...). This I have fixed by Java Cryptography Extension (JCE) for Java 1.8 and re-create keytab with <code>/crypto AES256-SHA1</code> after all this i got exception:</p>\n\n<blockquote>\n  <p>GSSException: Failure unspecified at GSS-API level (Mechanism level:\n  Checksum failed) at\n  sun.security.jgss.krb5.Krb5Context.acceptSecContext(Unknown Source) at\n  sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\n  sun.security.jgss.GSSContextImpl.acceptSecContext(Unknown Source) at\n  GssServer$GssServerAction.run(GssServer.java:159) \n  ... 4 more \n  Caused by: KrbException: Checksum failed at\n  sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\n  Source) at\n  sun.security.krb5.internal.crypto.ArcFourHmacEType.decrypt(Unknown\n  Source) at sun.security.krb5.EncryptedData.decrypt(Unknown Source) at\n  sun.security.krb5.KrbApReq.authenticate(Unknown Source) at\n  sun.security.krb5.KrbApReq.(Unknown Source) at\n  sun.security.jgss.krb5.InitSecContextToken.(Unknown Source)\n  ... 8 more \n  Caused by: java.security.GeneralSecurityException: Checksum\n  failed at\n  sun.security.krb5.internal.crypto.dk.ArcFourCrypto.decrypt(Unknown\n  Source) at\n  sun.security.krb5.internal.crypto.ArcFourHmac.decrypt(Unknown Source)\n  ... 14 more</p>\n</blockquote>\n\n<p>I tried <a href=\"https://dmdaa.wordpress.com/2010/03/13/kerberos-setup-and-jaas-configuration-for-running-sun-jgss-tutorial-against-ad/\" rel=\"nofollow noreferrer\">this tutorial</a> and other way to create keytabfile, but i still don't have solution.</p>\n"},{"tags":["java","hibernate","null","sql-order-by"],"answers":[{"tags":[],"owner":{"account_id":100168,"reputation":2211,"user_id":270157,"display_name":"Goibniu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1284109733,"creation_date":1284109733,"answer_id":3683409,"question_id":3683174,"body_markdown":"[There appears to be a change request/bug ticket open for this][1]\r\n\r\n\r\n  [1]: http://opensource.atlassian.com/projects/hibernate/browse/HHH-465","title":"Hibernate order by with nulls last","body":"<p><a href=\"http://opensource.atlassian.com/projects/hibernate/browse/HHH-465\" rel=\"nofollow noreferrer\">There appears to be a change request/bug ticket open for this</a></p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":17,"is_accepted":true,"score":16,"last_activity_date":1415649842,"creation_date":1284113002,"answer_id":3683734,"question_id":3683174,"body_markdown":"Given that [HHH-465][1] is not fixed and is not going to get fixed in a near future for the reasons given by Steve Ebersole, your best option would be to use the `CustomNullsFirstInterceptor` attached to the issue either globally or specifically to alter the SQL statement. \r\n\r\nI&#39;m posting it below for the readers (credits to Emilio Dolce):\r\n\r\n    public class CustomNullsFirstInterceptor extends EmptyInterceptor {\r\n    \t\r\n    \tprivate static final long serialVersionUID = -3156853534261313031L;\r\n    \t\r\n    \tprivate static final String ORDER_BY_TOKEN = &quot;order by&quot;;\r\n    \r\n    \tpublic String onPrepareStatement(String sql) {\r\n    \t\t\r\n    \t\tint orderByStart = sql.toLowerCase().indexOf(ORDER_BY_TOKEN);\r\n    \t\tif (orderByStart == -1) {\r\n    \t\t\treturn super.onPrepareStatement(sql);\r\n    \t\t}\r\n    \t\torderByStart += ORDER_BY_TOKEN.length() + 1;\r\n    \t\tint orderByEnd = sql.indexOf(&quot;)&quot;, orderByStart);\r\n    \t\tif (orderByEnd == -1) {\r\n    \t\t\torderByEnd = sql.indexOf(&quot; UNION &quot;, orderByStart);\r\n    \t\t\tif (orderByEnd == -1) {\r\n    \t\t\t\torderByEnd = sql.length();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tString orderByContent = sql.substring(orderByStart, orderByEnd);\r\n    \t\tString[] orderByNames = orderByContent.split(&quot;\\\\,&quot;);\r\n    \t\tfor (int i=0; i&lt;orderByNames.length; i++) {\r\n    \t\t\tif (orderByNames[i].trim().length() &gt; 0) {\r\n    \t\t\t\tif (orderByNames[i].trim().toLowerCase().endsWith(&quot;desc&quot;)) {\r\n    \t\t\t\t\torderByNames[i] += &quot; NULLS LAST&quot;;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\torderByNames[i] += &quot; NULLS FIRST&quot;;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\torderByContent = StringUtils.join(orderByNames, &quot;,&quot;);\r\n    \t\tsql = sql.substring(0, orderByStart) + orderByContent + sql.substring(orderByEnd); \r\n    \t\treturn super.onPrepareStatement(sql);\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n    \r\n    \r\n [1]: https://hibernate.atlassian.net/browse/HHH-465","title":"Hibernate order by with nulls last","body":"<p>Given that <a href=\"https://hibernate.atlassian.net/browse/HHH-465\" rel=\"noreferrer\">HHH-465</a> is not fixed and is not going to get fixed in a near future for the reasons given by Steve Ebersole, your best option would be to use the <code>CustomNullsFirstInterceptor</code> attached to the issue either globally or specifically to alter the SQL statement. </p>\n\n<p>I'm posting it below for the readers (credits to Emilio Dolce):</p>\n\n<pre><code>public class CustomNullsFirstInterceptor extends EmptyInterceptor {\n\n    private static final long serialVersionUID = -3156853534261313031L;\n\n    private static final String ORDER_BY_TOKEN = \"order by\";\n\n    public String onPrepareStatement(String sql) {\n\n        int orderByStart = sql.toLowerCase().indexOf(ORDER_BY_TOKEN);\n        if (orderByStart == -1) {\n            return super.onPrepareStatement(sql);\n        }\n        orderByStart += ORDER_BY_TOKEN.length() + 1;\n        int orderByEnd = sql.indexOf(\")\", orderByStart);\n        if (orderByEnd == -1) {\n            orderByEnd = sql.indexOf(\" UNION \", orderByStart);\n            if (orderByEnd == -1) {\n                orderByEnd = sql.length();\n            }\n        }\n        String orderByContent = sql.substring(orderByStart, orderByEnd);\n        String[] orderByNames = orderByContent.split(\"\\\\,\");\n        for (int i=0; i&lt;orderByNames.length; i++) {\n            if (orderByNames[i].trim().length() &gt; 0) {\n                if (orderByNames[i].trim().toLowerCase().endsWith(\"desc\")) {\n                    orderByNames[i] += \" NULLS LAST\";\n                } else {\n                    orderByNames[i] += \" NULLS FIRST\";\n                }\n            }\n        }\n        orderByContent = StringUtils.join(orderByNames, \",\");\n        sql = sql.substring(0, orderByStart) + orderByContent + sql.substring(orderByEnd); \n        return super.onPrepareStatement(sql);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21606,"reputation":4485,"user_id":52629,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1386720209,"creation_date":1374165476,"answer_id":17729276,"question_id":3683174,"body_markdown":"Here&#39;s my update to the class by (Pascal Thivent):\r\n\r\n    for (int i = 0; i &lt; orderByNames.length; i++) {\r\n        if (orderByNames[i].trim().length() &gt; 0) {\r\n            String orderName = orderByNames[i].trim().toLowerCase();\r\n            if (orderName.contains(&quot;desc&quot;)) {\r\n                orderByNames[i] = orderName.replace(&quot;desc&quot;, &quot;desc NULLS LAST&quot;);\r\n            } else {\r\n                orderByNames[i] = orderName.replace(&quot;asc&quot;, &quot;asc NULLS FIRST&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThis fixes the problem: \r\n\r\n&gt; This breaks if sql has limit/offset after order by – Sathish Apr 1 &#39;11 at 14:52 \r\n\r\nAlso here&#39;s how you can use this within JPA (hibernate):\r\n\r\n\r\n    Session session = entityManager.unwrap(Session.class);\r\n    Session nullsSortingProperlySession = null;\r\n    try {\r\n        // perform a query guaranteeing that nulls will sort last\r\n        nullsSortingProperlySession = session.getSessionFactory().withOptions()\r\n            .interceptor(new GuaranteeNullsFirstInterceptor())\r\n            .openSession();\r\n    } finally {\r\n        // release the session, or the db connections will spiral\r\n        try {\r\n            if (nullsSortingProperlySession != null) {\r\n                nullsSortingProperlySession.close();\r\n            }\r\n        } catch (Exception e) {\r\n            logger.error(&quot;Error closing session&quot;, e);\r\n        }\r\n    }\r\n\r\nI&#39;ve tested this on postgres and it fixes the &#39;nulls are higher than non-nulls&#39; issue that we were having.","title":"Hibernate order by with nulls last","body":"<p>Here's my update to the class by (Pascal Thivent):</p>\n\n<pre><code>for (int i = 0; i &lt; orderByNames.length; i++) {\n    if (orderByNames[i].trim().length() &gt; 0) {\n        String orderName = orderByNames[i].trim().toLowerCase();\n        if (orderName.contains(\"desc\")) {\n            orderByNames[i] = orderName.replace(\"desc\", \"desc NULLS LAST\");\n        } else {\n            orderByNames[i] = orderName.replace(\"asc\", \"asc NULLS FIRST\");\n        }\n    }\n}\n</code></pre>\n\n<p>This fixes the problem: </p>\n\n<blockquote>\n  <p>This breaks if sql has limit/offset after order by – Sathish Apr 1 '11 at 14:52 </p>\n</blockquote>\n\n<p>Also here's how you can use this within JPA (hibernate):</p>\n\n<pre><code>Session session = entityManager.unwrap(Session.class);\nSession nullsSortingProperlySession = null;\ntry {\n    // perform a query guaranteeing that nulls will sort last\n    nullsSortingProperlySession = session.getSessionFactory().withOptions()\n        .interceptor(new GuaranteeNullsFirstInterceptor())\n        .openSession();\n} finally {\n    // release the session, or the db connections will spiral\n    try {\n        if (nullsSortingProperlySession != null) {\n            nullsSortingProperlySession.close();\n        }\n    } catch (Exception e) {\n        logger.error(\"Error closing session\", e);\n    }\n}\n</code></pre>\n\n<p>I've tested this on postgres and it fixes the 'nulls are higher than non-nulls' issue that we were having.</p>\n"},{"tags":[],"owner":{"account_id":1172329,"reputation":81,"user_id":1149229,"display_name":"Gennady Nikolaev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1394179666,"creation_date":1394179666,"answer_id":22244751,"question_id":3683174,"body_markdown":"Another variant, if you create SQL on the fly and don&#39;t use Criteria API:\r\n\r\nORDER BY COALESCE(&lt;column_name&gt;,&#39;0&#39;) [ASC|DESC]\r\n\r\nThis works either for varchar or numeric columns. ","title":"Hibernate order by with nulls last","body":"<p>Another variant, if you create SQL on the fly and don't use Criteria API:</p>\n\n<p>ORDER BY COALESCE(,'0') [ASC|DESC]</p>\n\n<p>This works either for varchar or numeric columns. </p>\n"},{"tags":[],"owner":{"account_id":2590176,"reputation":1914,"user_id":2245051,"accept_rate":50,"display_name":"Jos&#233; Andias"},"down_vote_count":0,"up_vote_count":62,"is_accepted":false,"score":62,"last_activity_date":1411380100,"creation_date":1395863994,"answer_id":22671795,"question_id":3683174,"body_markdown":"This feature has been implemented during Hibernate 4.2.x and 4.3.x releases as previously mentioned.\r\n\r\nIt can be used as for example:\r\n\r\n    Criteria criteria = ...;\r\n    criteria.addOrder( Order.desc( &quot;name&quot; ).nulls(NullPrecedence.FIRST) );\r\n\r\nHibernate v4.3 javadocs are less omissive [here][1].\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/criterion/Order.html#nulls%28org.hibernate.NullPrecedence%29","title":"Hibernate order by with nulls last","body":"<p>This feature has been implemented during Hibernate 4.2.x and 4.3.x releases as previously mentioned.</p>\n\n<p>It can be used as for example:</p>\n\n<pre><code>Criteria criteria = ...;\ncriteria.addOrder( Order.desc( \"name\" ).nulls(NullPrecedence.FIRST) );\n</code></pre>\n\n<p>Hibernate v4.3 javadocs are less omissive <a href=\"http://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/criterion/Order.html#nulls%28org.hibernate.NullPrecedence%29\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":5056706,"reputation":4366,"user_id":4059755,"display_name":"uwolfer"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1500409800,"creation_date":1500409800,"answer_id":45176501,"question_id":3683174,"body_markdown":"You can configure &quot;nulls first&quot; / &quot;nulls last&quot; in hibernate properties so it will be picked up by any criteria call by default: `hibernate.order_by.default_null_ordering=last` (or `=first`).\r\n\r\nSee [this hibernate commit][1] for details.\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/commit/add6aea6c64bf375a5b2bad7655c5914f1a48b48","title":"Hibernate order by with nulls last","body":"<p>You can configure \"nulls first\" / \"nulls last\" in hibernate properties so it will be picked up by any criteria call by default: <code>hibernate.order_by.default_null_ordering=last</code> (or <code>=first</code>).</p>\n\n<p>See <a href=\"https://github.com/hibernate/hibernate-orm/commit/add6aea6c64bf375a5b2bad7655c5914f1a48b48\" rel=\"noreferrer\">this hibernate commit</a> for details.</p>\n"},{"tags":[],"owner":{"account_id":1788251,"reputation":182,"user_id":1629196,"display_name":"Asraf Uddin Ahmed"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1592375502,"creation_date":1592375185,"answer_id":62422696,"question_id":3683174,"body_markdown":"We can create **Pageable** object with following **Sort** parameter: \r\n\r\n    JpaSort.unsafe(Sort.Direction.ASC, &quot;ISNULL(column_name), (column_name)&quot;)\r\n\r\nWe can prepare HQL as well:\r\n\r\n    String hql = &quot;FROM EntityName e ORDER BY e.columnName NULLS LAST&quot;;","title":"Hibernate order by with nulls last","body":"<p>We can create <strong>Pageable</strong> object with following <strong>Sort</strong> parameter: </p>\n\n<pre><code>JpaSort.unsafe(Sort.Direction.ASC, \"ISNULL(column_name), (column_name)\")\n</code></pre>\n\n<p>We can prepare HQL as well:</p>\n\n<pre><code>String hql = \"FROM EntityName e ORDER BY e.columnName NULLS LAST\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2969131,"reputation":340,"user_id":2521628,"display_name":"Jan Cizmar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1640267164,"creation_date":1640267164,"answer_id":70462998,"question_id":3683174,"body_markdown":"For future travellers... I solved this by overriding the Hibernate dialect. I needed to add null first for asc and null last for desc by default in CriteriaQuery, which is for some reason not supported. (It&#39;s supported in legacy CriteriaAPI)\r\n```\r\npackage io.tolgee.dialects.postgres\r\n\r\nimport org.hibernate.NullPrecedence\r\nimport org.hibernate.dialect.PostgreSQL10Dialect\r\n\r\n@Suppress(&quot;unused&quot;)\r\nclass CustomPostgreSQLDialect : PostgreSQL10Dialect() {\r\n\r\n  override fun renderOrderByElement(expression: String?, collation: String?, order: String?, nulls: NullPrecedence?): String {\r\n    if (nulls == NullPrecedence.NONE) {\r\n      if (order == &quot;asc&quot;) {\r\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.FIRST)\r\n      }\r\n      if (order == &quot;desc&quot;) {\r\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.LAST)\r\n      }\r\n    }\r\n    return super.renderOrderByElement(expression, collation, order, nulls)\r\n  }\r\n}\r\n","title":"Hibernate order by with nulls last","body":"<p>For future travellers... I solved this by overriding the Hibernate dialect. I needed to add null first for asc and null last for desc by default in CriteriaQuery, which is for some reason not supported. (It's supported in legacy CriteriaAPI)</p>\n<pre><code>package io.tolgee.dialects.postgres\n\nimport org.hibernate.NullPrecedence\nimport org.hibernate.dialect.PostgreSQL10Dialect\n\n@Suppress(&quot;unused&quot;)\nclass CustomPostgreSQLDialect : PostgreSQL10Dialect() {\n\n  override fun renderOrderByElement(expression: String?, collation: String?, order: String?, nulls: NullPrecedence?): String {\n    if (nulls == NullPrecedence.NONE) {\n      if (order == &quot;asc&quot;) {\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.FIRST)\n      }\n      if (order == &quot;desc&quot;) {\n        return super.renderOrderByElement(expression, collation, order, NullPrecedence.LAST)\n      }\n    }\n    return super.renderOrderByElement(expression, collation, order, nulls)\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":23724,"reputation":13660,"user_id":59666,"accept_rate":76,"display_name":"mgamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39799,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":3683734,"answer_count":8,"score":38,"last_activity_date":1640267164,"creation_date":1284107424,"question_id":3683174,"body_markdown":"Hibernate used with PostgreSQL DB while ordering desc by a column puts null values higher than not null ones.\r\n\r\nSQL99 standard offers keyword &quot;NULLS LAST&quot; to declare that null values should be put lower than not nulls.\r\n\r\nCan &quot;NULLS LAST&quot; behaviour be achieved using Hibernate&#39;s Criteria API?","title":"Hibernate order by with nulls last","body":"<p>Hibernate used with PostgreSQL DB while ordering desc by a column puts null values higher than not null ones.</p>\n\n<p>SQL99 standard offers keyword \"NULLS LAST\" to declare that null values should be put lower than not nulls.</p>\n\n<p>Can \"NULLS LAST\" behaviour be achieved using Hibernate's Criteria API?</p>\n"},{"tags":["java","unit-testing","junit","spring-data-jpa","mockito"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174289,"post_id":70448681,"comment_id":124531929,"body_markdown":"how did you mock agencyRepository?","body":"how did you mock agencyRepository?"},{"owner":{"account_id":2818342,"reputation":299856,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1640174389,"post_id":70448681,"comment_id":124531969,"body_markdown":"Can you share how `agencyRepository` is mocked, and how (if?) it&#39;s then injected to the `agencyService`?","body":"Can you share how <code>agencyRepository</code> is mocked, and how (if?) it&#39;s then injected to the <code>agencyService</code>?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174741,"post_id":70448681,"comment_id":124532090,"body_markdown":"have you debugged your test?","body":"have you debugged your test?"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640174838,"post_id":70448681,"comment_id":124532124,"body_markdown":"yes, it fails on the last line, on the assertEquals(). This is what I&#39;m getting: `at com.project.AgencyServiceTest.get(AgencyServiceTest.java:108)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)`","body":"yes, it fails on the last line, on the assertEquals(). This is what I&#39;m getting: <code>at com.project.AgencyServiceTest.get(AgencyServiceTest.java:108&zwnj;&#8203;) \tat java.base&#47;java.util.ArrayList.forEach(ArrayList.java:1541) \tat java.base&#47;java.util.ArrayList.forEach(ArrayList.java:1541)</code>"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640174878,"post_id":70448681,"comment_id":124532143,"body_markdown":"have you checked whether repo.findAll() actually returns the result you expect?","body":"have you checked whether repo.findAll() actually returns the result you expect?"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640174986,"post_id":70448681,"comment_id":124532182,"body_markdown":"yes, I&#39;ve tested it in Postman, the method works just fine","body":"yes, I&#39;ve tested it in Postman, the method works just fine"},{"owner":{"account_id":1560426,"reputation":8053,"user_id":1450401,"accept_rate":61,"display_name":"edwin"},"score":0,"creation_date":1640175104,"post_id":70448681,"comment_id":124532228,"body_markdown":"&#39;existingAgencies&#39; used to mock method call is an empty List, that&#39;s the reason you assert fails, you had initialize that but it doesn&#39;t have any items","body":"&#39;existingAgencies&#39; used to mock method call is an empty List, that&#39;s the reason you assert fails, you had initialize that but it doesn&#39;t have any items"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1640175988,"post_id":70448681,"comment_id":124532552,"body_markdown":"@Alessia I meant during your test, which is why I asked you if you had debugged","body":"@Alessia I meant during your test, which is why I asked you if you had debugged"},{"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"score":0,"creation_date":1640182270,"post_id":70448681,"comment_id":124535047,"body_markdown":"Yes, I have, and the result of repo.findAll() is ok","body":"Yes, I have, and the result of repo.findAll() is ok"}],"answers":[{"tags":[],"owner":{"account_id":1560426,"reputation":8053,"user_id":1450401,"accept_rate":61,"display_name":"edwin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640262027,"creation_date":1640175376,"answer_id":70448905,"question_id":70448681,"body_markdown":"if i understand your code coreectly\r\n`agencyRepository.findAll()` return `List&lt;Agency&gt;`\r\n`agencyService.getAll()` return  `List&lt;AgencyDto&gt;`\r\n\r\n\r\n\r\nIssue is here\r\n      \r\n      List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n      when(agencyRepository.findAll()).thenReturn(existingAgencies);\r\n\r\nyour mock returns an empty list, you need to add items to list\r\n\r\neg:\r\n    \r\n    List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n    existingAgencies.add(agencyObjectInDB1);\r\n    existingAgencies.add(agencyObjectInDB2);\r\n    existingAgencies.add(agencyObjectInDB3);\r\n    //Mock repo call\r\n    when(agencyRepository.findAll()).thenReturn(existingAgencies);  \r\n    \r\n    //I assume Here inside getAll() , agencyRepository.findAll() is invoked\r\n    //getAll() converts Agency to AgencyDto\r\n    List&lt;AgencyDto&gt; result = agencyService.getAll();\r\n\r\n    // assert against pre-pepared list \r\n    assertEquals(agencies, result);\r\n\r\n\r\n\r\n","title":"JUnit test to retrieve all entities fails with actual result &#39;[]&#39;","body":"<p>if i understand your code coreectly\n<code>agencyRepository.findAll()</code> return <code>List&lt;Agency&gt;</code>\n<code>agencyService.getAll()</code> return  <code>List&lt;AgencyDto&gt;</code></p>\n<p>Issue is here</p>\n<pre><code>  List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\n  when(agencyRepository.findAll()).thenReturn(existingAgencies);\n</code></pre>\n<p>your mock returns an empty list, you need to add items to list</p>\n<p>eg:</p>\n<pre><code>List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\nexistingAgencies.add(agencyObjectInDB1);\nexistingAgencies.add(agencyObjectInDB2);\nexistingAgencies.add(agencyObjectInDB3);\n//Mock repo call\nwhen(agencyRepository.findAll()).thenReturn(existingAgencies);  \n\n//I assume Here inside getAll() , agencyRepository.findAll() is invoked\n//getAll() converts Agency to AgencyDto\nList&lt;AgencyDto&gt; result = agencyService.getAll();\n\n// assert against pre-pepared list \nassertEquals(agencies, result);\n</code></pre>\n"}],"owner":{"account_id":20683043,"reputation":35,"user_id":15186159,"display_name":"Alessia"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1640267126,"creation_date":1640174163,"question_id":70448681,"body_markdown":"I am trying to test my method for getting back all entities that exist in my db. I am using JUnit and Mockito. I have no experience with testing so far and this is how far I&#39;ve got:\r\nThis is my method from the agency service to get back all entities, using the findAll() function of JpaRepository:\r\n```\r\n      public List&lt;AgencyDto&gt; getAll() {\r\n        return repo.findAll().stream().map(agency -&gt; mapper.mapToDto(agency)).collect(Collectors.toList());\r\n    }\r\n\r\n```\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class AgencyServiceTest {\r\n\r\n    @Mock\r\n    private AgencyRepository agencyRepository;\r\n\r\n\r\n    @InjectMocks\r\n    private AgencyService agencyService;\r\n\r\n    @Test\r\n    void getAgencies() {\r\n      \r\n        List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\r\n        Agency agency1 = new Agency();\r\n        Agency agency2 = new Agency();\r\n\r\n        existingAgencies.add(agency1);\r\n        existingAgencies.add(agency2);\r\n\r\n        when(agencyRepository.findAll()).thenReturn(existingAgencies);\r\n\r\n        List&lt;AgencyDto&gt; result = agencyService.getAll();\r\n\r\n        assertEquals(existingAgencies, result);\r\n    }\r\n}\r\n```\r\nWhen running the test, the value for expected seems ok, but the value for actual is an empty array:\r\n```\r\nExpected :[com.project.DTOs.AgencyDto@245a26e1, com.project.DTOs.AgencyDto@4d63b624, com.project.DTOs.AgencyDto@466cf502]\r\nActual   :[]\r\n```\r\nIs this not the right way to test get() methods? Am I doing something wrong when setting the actual result?","title":"JUnit test to retrieve all entities fails with actual result &#39;[]&#39;","body":"<p>I am trying to test my method for getting back all entities that exist in my db. I am using JUnit and Mockito. I have no experience with testing so far and this is how far I've got:\nThis is my method from the agency service to get back all entities, using the findAll() function of JpaRepository:</p>\n<pre><code>      public List&lt;AgencyDto&gt; getAll() {\n        return repo.findAll().stream().map(agency -&gt; mapper.mapToDto(agency)).collect(Collectors.toList());\n    }\n\n</code></pre>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class AgencyServiceTest {\n\n    @Mock\n    private AgencyRepository agencyRepository;\n\n\n    @InjectMocks\n    private AgencyService agencyService;\n\n    @Test\n    void getAgencies() {\n      \n        List&lt;Agency&gt; existingAgencies = new ArrayList&lt;Agency&gt;();\n        Agency agency1 = new Agency();\n        Agency agency2 = new Agency();\n\n        existingAgencies.add(agency1);\n        existingAgencies.add(agency2);\n\n        when(agencyRepository.findAll()).thenReturn(existingAgencies);\n\n        List&lt;AgencyDto&gt; result = agencyService.getAll();\n\n        assertEquals(existingAgencies, result);\n    }\n}\n</code></pre>\n<p>When running the test, the value for expected seems ok, but the value for actual is an empty array:</p>\n<pre><code>Expected :[com.project.DTOs.AgencyDto@245a26e1, com.project.DTOs.AgencyDto@4d63b624, com.project.DTOs.AgencyDto@466cf502]\nActual   :[]\n</code></pre>\n<p>Is this not the right way to test get() methods? Am I doing something wrong when setting the actual result?</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"score":0,"creation_date":1640263631,"post_id":70462251,"comment_id":124556129,"body_markdown":"What is `httpServletRequest` in the last assert? Shouldn&#39;t it be `request`?","body":"What is <code>httpServletRequest</code> in the last assert? Shouldn&#39;t it be <code>request</code>?"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1640264341,"post_id":70462251,"comment_id":124556343,"body_markdown":"You stub methods on system under test with `when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);`. I find it strange that it does not throw - is it a SpyBean?","body":"You stub methods on system under test with <code>when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);</code>. I find it strange that it does not throw - is it a SpyBean?"},{"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"score":0,"creation_date":1640266880,"post_id":70462251,"comment_id":124557201,"body_markdown":"Yes, thank you. You&#39;re both right. I had two objects for the HttpRequest and the one called request was actually annotated with atMockBean instead of atMock. Using only the @Mock one fixed the issue.","body":"Yes, thank you. You&#39;re both right. I had two objects for the HttpRequest and the one called request was actually annotated with atMockBean instead of atMock. Using only the @Mock one fixed the issue."}],"answers":[{"tags":[],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1640267004,"creation_date":1640267004,"answer_id":70462959,"question_id":70462251,"body_markdown":"I was using the wrong object under the assertion. The @httpRequest is annotated with @MockBean, whereas request uses @Mock, which is what I should be using for this scenario.","title":"Mock return value for cookie.getValue() using Mockito","body":"<p>I was using the wrong object under the assertion. The @httpRequest is annotated with @MockBean, whereas request uses @Mock, which is what I should be using for this scenario.</p>\n"}],"owner":{"account_id":8915876,"reputation":3560,"user_id":6654475,"accept_rate":100,"display_name":"Francislainy Campos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70462959,"answer_count":1,"score":0,"last_activity_date":1640267004,"creation_date":1640263120,"question_id":70462251,"body_markdown":"I&#39;m trying to test the getCookieByName method which is used by another method. However, not sure I&#39;m doing this correctly as it seems the method is being called multiple times and it sets the value the first attempt but then is empty on the last call. I think maybe the order for the mock calls may be wrong or some of them may not be needed, but if I remove any of what I still get other errors, so not sure what I&#39;m actually doing wrong.\r\n\r\n    @Service\r\n    public class CookieSessionUtils {\r\n\r\n    private static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\r\n\r\n\r\n    public boolean verifyState(HttpServletRequest request, String state) {\r\n\r\n        String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \r\n\r\n        if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public String getCookieByName(HttpServletRequest request, String cookieName) {\r\n        try {\r\n            Cookie[] cookies = request.getCookies();\r\n            if (cookies != null) {\r\n                for (Cookie cookie : cookies) {\r\n                    if (cookie.getName().equals(cookieName)) {\r\n                        return cookie.getValue();\r\n                    }\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\r\n            log.error(&quot;Error on Cookie &quot; + e.getMessage());\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n\r\nThese are my test and mock calls as well as the two times getCookieByName() is being called within the same method.\r\n\r\n    @Autowired\r\n    private CookieSessionUtils cookieSessionUtils;\r\n\r\n    @Mock\r\n    private HttpServletRequest request;\r\n\r\n       @Test\r\n    public void testVerifyStateWhenCookieNameStartsWithY() {\r\n\r\n        Cookie mockCookie = Mockito.mock(Cookie.class);\r\n        when(mockCookie.getName()).thenReturn(&quot;viaductLocalAmp&quot;);\r\n        when(mockCookie.getValue()).thenReturn(&quot;viaductLocalAmp&quot;);\r\n\r\n        when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\r\n\r\n        when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\r\n\r\n        assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2neyE.png\r\n  [2]: https://i.stack.imgur.com/hzPpS.png","title":"Mock return value for cookie.getValue() using Mockito","body":"<p>I'm trying to test the getCookieByName method which is used by another method. However, not sure I'm doing this correctly as it seems the method is being called multiple times and it sets the value the first attempt but then is empty on the last call. I think maybe the order for the mock calls may be wrong or some of them may not be needed, but if I remove any of what I still get other errors, so not sure what I'm actually doing wrong.</p>\n<pre><code>@Service\npublic class CookieSessionUtils {\n\nprivate static final String VIADUCT_LOCAL_AMP = &quot;viaductLocalAmp&quot;; // Value to be changed when the test runs to test the &quot;if Y&quot; scenario.\n\n\npublic boolean verifyState(HttpServletRequest request, String state) {\n\n    String viaductLocalAmp = getCookieByName(request, VIADUCT_LOCAL_AMP); \n\n    if (viaductLocalAmp.equalsIgnoreCase(&quot;Y&quot;)) {\n        return true;\n    }\n\n    return false;\n}\n\npublic String getCookieByName(HttpServletRequest request, String cookieName) {\n    try {\n        Cookie[] cookies = request.getCookies();\n        if (cookies != null) {\n            for (Cookie cookie : cookies) {\n                if (cookie.getName().equals(cookieName)) {\n                    return cookie.getValue();\n                }\n            }\n        }\n    } catch (Exception e) {\n        ExceptionLogger.logDetailedError(&quot;CookieSessionUtils.getCookieByName&quot;, e);\n        log.error(&quot;Error on Cookie &quot; + e.getMessage());\n    }\n    return &quot;&quot;;\n}\n</code></pre>\n<p>These are my test and mock calls as well as the two times getCookieByName() is being called within the same method.</p>\n<pre><code>@Autowired\nprivate CookieSessionUtils cookieSessionUtils;\n\n@Mock\nprivate HttpServletRequest request;\n\n   @Test\npublic void testVerifyStateWhenCookieNameStartsWithY() {\n\n    Cookie mockCookie = Mockito.mock(Cookie.class);\n    when(mockCookie.getName()).thenReturn(&quot;viaductLocalAmp&quot;);\n    when(mockCookie.getValue()).thenReturn(&quot;viaductLocalAmp&quot;);\n\n    when(request.getCookies()).thenReturn(new Cookie[]{mockCookie});\n\n    when(cookieSessionUtils.getCookieByName(request, &quot;viaductLocalAmp&quot;)).thenReturn(&quot;Y&quot;);\n\n    assertTrue(cookieSessionUtils.verifyState(httpServletRequest, &quot;viaductLocalAmp&quot;));\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2neyE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2neyE.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hzPpS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hzPpS.png\" alt=\"enter image description here\" /></a></p>\n<p>Thank you.</p>\n"},{"tags":["java","log4j","log4j2"],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1640266958,"creation_date":1639247583,"answer_id":70317974,"question_id":70317913,"body_markdown":"We should upgrade log4j to version `2.17.0` (available at [`mvnrepository.com`][mavenLog4J]). [As per the security notes (`logging.apache.org`)][log4J2.15patchnotes], the vulnerability is fixed in `2.15.0`. There are, however, two other vulnerabilities in `2.15.0`, which were patched in `2.16.0` and `2.17.0` respectively. \r\n\r\nThe security notes also list actions to mitigate the exploit if upgrading is (currently) not an option:\r\n\r\n&gt; Mitigation: In releases &gt;=2.10, this behavior can be mitigated by setting either the system property `log4j2.formatMsgNoLookups` or the environment variable `LOG4J_FORMAT_MSG_NO_LOOKUPS` to `true`. For releases from 2.0-beta9 to 2.10.0, the mitigation is to remove the `JndiLookup` class from the classpath: `zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class`.\r\n\r\nIf we are using `spring-boot-starter-logging` with no additional configuration, we are not affected. For details, see the [spring-boot infromation on the issue (`spring.io`)][springLog4J].\r\n\r\nSimilarly, we are not affected when we are using quarkus, as long as we do not add the `log4j` dependency explicitly. See [the corresponding github issue (`github.com`)][quarkusGithubIssueLog4J]\r\n\r\n[mavenLog4J]: https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.15.0\r\n\r\n[log4J2.15patchnotes]: https://logging.apache.org/log4j/2.x/security.html\r\n\r\n[springLog4J]: https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\r\n\r\n[quarkusGithubIssueLog4j]: https://github.com/quarkusio/quarkus/discussions/22108","title":"How to patch Log4j2 0-day exploit","body":"<p>We should upgrade log4j to version <code>2.17.0</code> (available at <a href=\"https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/2.15.0\" rel=\"nofollow noreferrer\"><code>mvnrepository.com</code></a>). <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">As per the security notes (<code>logging.apache.org</code>)</a>, the vulnerability is fixed in <code>2.15.0</code>. There are, however, two other vulnerabilities in <code>2.15.0</code>, which were patched in <code>2.16.0</code> and <code>2.17.0</code> respectively.</p>\n<p>The security notes also list actions to mitigate the exploit if upgrading is (currently) not an option:</p>\n<blockquote>\n<p>Mitigation: In releases &gt;=2.10, this behavior can be mitigated by setting either the system property <code>log4j2.formatMsgNoLookups</code> or the environment variable <code>LOG4J_FORMAT_MSG_NO_LOOKUPS</code> to <code>true</code>. For releases from 2.0-beta9 to 2.10.0, the mitigation is to remove the <code>JndiLookup</code> class from the classpath: <code>zip -q -d log4j-core-*.jar org/apache/logging/log4j/core/lookup/JndiLookup.class</code>.</p>\n</blockquote>\n<p>If we are using <code>spring-boot-starter-logging</code> with no additional configuration, we are not affected. For details, see the <a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" rel=\"nofollow noreferrer\">spring-boot infromation on the issue (<code>spring.io</code>)</a>.</p>\n<p>Similarly, we are not affected when we are using quarkus, as long as we do not add the <code>log4j</code> dependency explicitly. See <a href=\"https://github.com/quarkusio/quarkus/discussions/22108\" rel=\"nofollow noreferrer\">the corresponding github issue (<code>github.com</code>)</a></p>\n"}],"owner":{"account_id":19165831,"reputation":639,"user_id":14000568,"display_name":"deirdreamuel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":796,"favorite_count":0,"down_vote_count":4,"up_vote_count":3,"accepted_answer_id":70317974,"answer_count":1,"score":-1,"last_activity_date":1640266958,"creation_date":1639247158,"question_id":70317913,"body_markdown":"We are using Java for one of our services which uses log4j2 library. As of December 10, 2021, an exploit was found to execute remote code for Java using log4j2. I am wondering what is the best way to address this? Is it suitable to just use another Java logging library instead? Or is there a configuration for log4j2 so that we won’t have to go through all that trouble changing the logging library?","title":"How to patch Log4j2 0-day exploit","body":"<p>We are using Java for one of our services which uses log4j2 library. As of December 10, 2021, an exploit was found to execute remote code for Java using log4j2. I am wondering what is the best way to address this? Is it suitable to just use another Java logging library instead? Or is there a configuration for log4j2 so that we won’t have to go through all that trouble changing the logging library?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1640267877,"post_id":70461895,"comment_id":124557514,"body_markdown":"how about reading the api doc of stage/window as a first step ;) If applying what you learned from isn&#39;t working as you expect it, next step is to provide a [mcve] demonstrating the problem. BTW: you loading snippet looks fishy - assuming that MainController is-a class that&#39;s loaded with its fields/handlers injected via fxml. If that assumption is wrong, you might consider naming it to someting other than xxController to not confuse the readers :)","body":"how about reading the api doc of stage/window as a first step ;) If applying what you learned from isn&#39;t working as you expect it, next step is to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. BTW: you loading snippet looks fishy - assuming that MainController is-a class that&#39;s loaded with its fields/handlers injected via fxml. If that assumption is wrong, you might consider naming it to someting other than xxController to not confuse the readers :)"},{"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"score":0,"creation_date":1640272940,"post_id":70461895,"comment_id":124559358,"body_markdown":"@kleopatra - thanks for your feedback - i&#39;m in the early stages with Java &amp; my JavaFX skills are only a few weeks old. For sure you&#39;re right RTMF but i was not able to find a solution by the given information from school / docs. c0der was gently enough to show me that there is a way to detect changes by adding a listener to stageProps which is nice becaus i did not realized that before. And yes the Controller got its fields injected by fxml - yes the FXML tag was missing in this stage of dev but was added some minutes ago ;-) - Thanks for your feedback!","body":"@kleopatra - thanks for your feedback - i&#39;m in the early stages with Java &amp; my JavaFX skills are only a few weeks old. For sure you&#39;re right RTMF but i was not able to find a solution by the given information from school / docs. c0der was gently enough to show me that there is a way to detect changes by adding a listener to stageProps which is nice becaus i did not realized that before. And yes the Controller got its fields injected by fxml - yes the FXML tag was missing in this stage of dev but was added some minutes ago ;-) - Thanks for your feedback!"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1640286711,"post_id":70461895,"comment_id":124563592,"body_markdown":"About `MainController`: You&#39;re creating your own instance and then calling a method on it. That should not work as you expect. If you&#39;re using `fx:controller` in the FXML file then the `FXMLLoader` will instantiate `MainController` for you, via reflection. Thus, the instance of `MainController` that you created is not the same instance which had its fields injected and such. If you want access to the controller instance created by the `FXMLLoader`, then create an **instance** of `FXMLLoader` and use the **instance** `load` method, followed by the `getController()` method.","body":"About <code>MainController</code>: You&#39;re creating your own instance and then calling a method on it. That should not work as you expect. If you&#39;re using <code>fx:controller</code> in the FXML file then the <code>FXMLLoader</code> will instantiate <code>MainController</code> for you, via reflection. Thus, the instance of <code>MainController</code> that you created is not the same instance which had its fields injected and such. If you want access to the controller instance created by the <code>FXMLLoader</code>, then create an <b>instance</b> of <code>FXMLLoader</code> and use the <b>instance</b> <code>load</code> method, followed by the <code>getController()</code> method."},{"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"score":0,"creation_date":1640339925,"post_id":70461895,"comment_id":124572660,"body_markdown":"oh! Thanks @Slaw i missed that completely - it still works in this stage of dev but you&#39;re totally right i will get into problems. I have to rework this part.","body":"oh! Thanks @Slaw i missed that completely - it still works in this stage of dev but you&#39;re totally right i will get into problems. I have to rework this part."}],"answers":[{"tags":[],"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1640266877,"creation_date":1640266877,"answer_id":70462936,"question_id":70461895,"body_markdown":"Listen to `stage.fullScreenProperty()` and respond to changes: \r\n\r\n    stage.fullScreenProperty().addListener((ChangeListener) (obs,oldValue,newValue) -&gt; \r\n                                              {/*TODO respond to changes in full screen */;});","title":"JavaFX Java17 - exit Fullscreen Event","body":"<p>Listen to <code>stage.fullScreenProperty()</code> and respond to changes:</p>\n<pre><code>stage.fullScreenProperty().addListener((ChangeListener) (obs,oldValue,newValue) -&gt; \n                                          {/*TODO respond to changes in full screen */;});\n</code></pre>\n"}],"owner":{"account_id":5992289,"reputation":483,"user_id":4708062,"accept_rate":100,"display_name":"Marco"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":226,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70462936,"answer_count":1,"score":0,"last_activity_date":1640266877,"creation_date":1640260938,"question_id":70461895,"body_markdown":"I have added a custom toolbar (where my window actions are placed) to my application. So far everything works well. Related to the window handling I&#39;m searching for a possibility to handle the &quot;fullscreen got closed&quot; event. Scenario:\r\nApp starts in windowed mode -&gt; user clicks on (custom) toolbar button to get into fullscreen. The Toolbar will now be set its visibility to false. The users now exits fullscreen mode via button (native macOS Button to exit fullscreen) --&gt; I need now to react for this (to set the toolbar to visible again) but cannot find a way how to do it.\r\n\r\nmain.java\r\n\r\n    MainController mc = new MainController();\r\n    Parent root = FXMLLoader.load(getClass().getResource(&quot;welcome-view.fxml&quot;));\r\n    stage.initStyle(StageStyle.TRANSPARENT);\r\n    mc.doSwitchScenes(stage, root);\r\n    stage.show();\r\n\r\nMainController.java\r\n\r\n    ...\r\n    private String title = &quot;Project Apollo&quot;;\r\n    private Color fillColor = TRANSPARENT;\r\n    private int minWidth = 800;\r\n    private int minHeight = 600;\r\n    ...\r\n    \r\n    public void btnMinimize(MouseEvent mouseEvent) {\r\n        Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\r\n        // is stage minimizable into task bar. (true | false)\r\n        stage.setIconified(true);\r\n    };\r\n\r\n    public void btnCloseApp(MouseEvent mouseEvent) {\r\n        Platform.exit();\r\n        System.exit(0);\r\n    }\r\n\r\n    public void btnFullscreen(MouseEvent mouseEvent) {\r\n        Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\r\n        stage.setFullScreen(true);\r\n        Scene actualScene = ((Node)mouseEvent.getSource()).getScene();\r\n        Parent hbc = (Parent) actualScene.lookup(&quot;#headerBarContainer&quot;);\r\n\r\n        if(hbc != null){\r\n            hbc.setVisible(false);\r\n        }\r\n        System.out.println(&quot;clicked FS&quot;);\r\n\r\n    }\r\n    ...\r\n\r\nThe point is that at least on MacOS the window has its native os control to exit fullscreen - is it possible to target this event or at least the change of the stage size maybe?","title":"JavaFX Java17 - exit Fullscreen Event","body":"<p>I have added a custom toolbar (where my window actions are placed) to my application. So far everything works well. Related to the window handling I'm searching for a possibility to handle the &quot;fullscreen got closed&quot; event. Scenario:\nApp starts in windowed mode -&gt; user clicks on (custom) toolbar button to get into fullscreen. The Toolbar will now be set its visibility to false. The users now exits fullscreen mode via button (native macOS Button to exit fullscreen) --&gt; I need now to react for this (to set the toolbar to visible again) but cannot find a way how to do it.</p>\n<p>main.java</p>\n<pre><code>MainController mc = new MainController();\nParent root = FXMLLoader.load(getClass().getResource(&quot;welcome-view.fxml&quot;));\nstage.initStyle(StageStyle.TRANSPARENT);\nmc.doSwitchScenes(stage, root);\nstage.show();\n</code></pre>\n<p>MainController.java</p>\n<pre><code>...\nprivate String title = &quot;Project Apollo&quot;;\nprivate Color fillColor = TRANSPARENT;\nprivate int minWidth = 800;\nprivate int minHeight = 600;\n...\n\npublic void btnMinimize(MouseEvent mouseEvent) {\n    Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\n    // is stage minimizable into task bar. (true | false)\n    stage.setIconified(true);\n};\n\npublic void btnCloseApp(MouseEvent mouseEvent) {\n    Platform.exit();\n    System.exit(0);\n}\n\npublic void btnFullscreen(MouseEvent mouseEvent) {\n    Stage stage = (Stage)((Circle)mouseEvent.getSource()).getScene().getWindow();\n    stage.setFullScreen(true);\n    Scene actualScene = ((Node)mouseEvent.getSource()).getScene();\n    Parent hbc = (Parent) actualScene.lookup(&quot;#headerBarContainer&quot;);\n\n    if(hbc != null){\n        hbc.setVisible(false);\n    }\n    System.out.println(&quot;clicked FS&quot;);\n\n}\n...\n</code></pre>\n<p>The point is that at least on MacOS the window has its native os control to exit fullscreen - is it possible to target this event or at least the change of the stage size maybe?</p>\n"},{"tags":["c#","java","crc32"],"comments":[{"owner":{"account_id":235632,"reputation":9499,"user_id":502575,"accept_rate":100,"display_name":"Stefan P."},"score":0,"creation_date":1351416288,"post_id":13107665,"comment_id":17817558,"body_markdown":"Have you look at this http://stackoverflow.com/questions/4344190/java-crc32-not-the-same-as-crc-from-c-sharp","body":"Have you look at this <a href=\"http://stackoverflow.com/questions/4344190/java-crc32-not-the-same-as-crc-from-c-sharp\" title=\"java crc32 not the same as crc from c sharp\">stackoverflow.com/questions/4344190/&hellip;</a>"},{"owner":{"account_id":358449,"reputation":42107,"user_id":699224,"accept_rate":67,"display_name":"DNA"},"score":3,"creation_date":1351416300,"post_id":13107665,"comment_id":17817560,"body_markdown":"Difficult to say without seeing your code. Maybe you are ending up with Strings with different underlying binary representations or character encodings, so they look the same but checksum differently.","body":"Difficult to say without seeing your code. Maybe you are ending up with Strings with different underlying binary representations or character encodings, so they look the same but checksum differently."},{"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"score":1,"creation_date":1351416717,"post_id":13107665,"comment_id":17817619,"body_markdown":"How do you compute? With witch library or self-made functions? Algorithm matters!","body":"How do you compute? With witch library or self-made functions? Algorithm matters!"},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":3,"creation_date":1351416938,"post_id":13107665,"comment_id":17817656,"body_markdown":"CRC is calculated over a sequence of bytes and not over a string. If you use a different encoding to transform a string to a sequence of bytes the result will be different. So please post your encoding related code.","body":"CRC is calculated over a sequence of bytes and not over a string. If you use a different encoding to transform a string to a sequence of bytes the result will be different. So please post your encoding related code."},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417041,"post_id":13107665,"comment_id":17817665,"body_markdown":"@StefanP. Yeah, I have looked this code. But didn&#39;t get my answer.","body":"@StefanP. Yeah, I have looked this code. But didn&#39;t get my answer."},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417091,"post_id":13107665,"comment_id":17817670,"body_markdown":"@Dims I have inherited HashAlgorithm class of C#","body":"@Dims I have inherited HashAlgorithm class of C#"},{"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"score":0,"creation_date":1351417171,"post_id":13107665,"comment_id":17817682,"body_markdown":"@CodesInChaos I used ASCII encoding to generate bytes-\n\nCrc32 crc32 = new Crc32();\n\t\t\tcrc32.ComputeHash(Encoding.ASCII.GetBytes(msgText));","body":"@CodesInChaos I used ASCII encoding to generate bytes-  Crc32 crc32 = new Crc32(); \t\t\tcrc32.ComputeHash(Encoding.ASCII.GetBytes(msgText));"},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":1,"creation_date":1351417260,"post_id":13107665,"comment_id":17817697,"body_markdown":"Post sufficient code to answer the question.","body":"Post sufficient code to answer the question."},{"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"score":1,"creation_date":1351417601,"post_id":13107665,"comment_id":17817742,"body_markdown":"I believe the bug in in the Java code, not the C# code.","body":"I believe the bug in in the Java code, not the C# code."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1351459255,"post_id":13107665,"comment_id":17827430,"body_markdown":"It depends first of all on whether both languages are using the same CRC polynomial and initial value. Have you investigated that?  The Java CRC32 calculation is documented. What parameters is your home-grown C# code using?","body":"It depends first of all on whether both languages are using the same CRC polynomial and initial value. Have you investigated that?  The Java CRC32 calculation is documented. What parameters is your home-grown C# code using?"}],"answers":[{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1351416740,"creation_date":1351416740,"answer_id":13107713,"question_id":13107665,"body_markdown":"Without delving into any detail, the problem can be related to Java&#39;s lack of unsigned integer types. The problem could happen at the `int` level, but also at the `byte` level. This is one avenue of investigation.","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>Without delving into any detail, the problem can be related to Java's lack of unsigned integer types. The problem could happen at the <code>int</code> level, but also at the <code>byte</code> level. This is one avenue of investigation.</p>\n"},{"tags":[],"owner":{"account_id":199923,"reputation":106976,"user_id":445517,"accept_rate":43,"display_name":"CodesInChaos"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1351417157,"creation_date":1351417157,"answer_id":13107751,"question_id":13107665,"body_markdown":"CRC32 is calculated over a sequence of bytes and not over a string. So to calculate CRC32 you need to transform the string into bytes first. If you use a different encoding to transform a string to a sequence of bytes the result will be different.\r\n\r\nThus you need to use the same encoding on both sides. I recommend using UTF-8 without BOM.","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>CRC32 is calculated over a sequence of bytes and not over a string. So to calculate CRC32 you need to transform the string into bytes first. If you use a different encoding to transform a string to a sequence of bytes the result will be different.</p>\n\n<p>Thus you need to use the same encoding on both sides. I recommend using UTF-8 without BOM.</p>\n"},{"tags":[],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1351423377,"creation_date":1351423377,"answer_id":13108387,"question_id":13107665,"body_markdown":"I have calculated CRC32 with Java and got the same you got in C#. I.e. `CRC32(43HLV109520DAP10072la19z6)=2947932745 `. This means that either they have a bug in java, or you have a bug during transmission.\r\n\r\nCode follows.\r\n\r\nI suggest you try to send simple data to java application, like zeros or ones, and try to deduce how do they compute CRC.\r\n\r\n    public static void main(String[] args) {\r\n\t\t\r\n\t\tCRC32 crc32 = new CRC32();\r\n\t\t\r\n\t\tString data = &quot;43HLV109520DAP10072la19z6&quot;;\r\n\t\t\r\n\t\tString[] cs = new String[] {&quot;utf8&quot; /*, &quot;cp1252&quot;, &quot;cp866&quot; */};\r\n\t\tbyte[] array;\r\n\t\tbyte b;\r\n\t\t\r\n\t\tfor(int i=0; i&lt;cs.length; ++i) {\r\n\t\t\r\n\t\t\tarray = data.getBytes(Charset.forName(cs[i]));\r\n\t\t\t\r\n\t\t\tcrc32.reset();\r\n\t\t\tcrc32.update(array);\r\n\t\t\t\r\n\t\t\tSystem.out.println(String.format(&quot;%s: %d&quot;, cs[i], crc32.getValue()));\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tfor(int j=0; j&lt;array.length/2; j++) {\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[array.length-1-i];\r\n\t\t\t\tarray[array.length-1-i] = b;\r\n\t\t\t}\r\n\t\t\t*/\r\n\t\t\t\r\n\t\t\tfor(int j=0; j&lt;array.length; j+=2) {\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[i+2];\r\n\t\t\t\tarray[i+1] = b;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcrc32.reset();\r\n\t\t\tcrc32.update(array);\r\n\t\t\t\r\n\t\t\tSystem.out.println(String.format(&quot;of modified: %d&quot;, crc32.getValue()));\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n**UPDATE**\r\n\r\nEndiannes reverse also not help\r\n\r\n            for(int j=0; j&lt;array.length; j+=4) {\r\n\t\t\t\t\r\n\t\t\t\tb = array[i];\r\n\t\t\t\tarray[i] = array[i+3];\r\n\t\t\t\tarray[i+3] = b;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tb = array[i+1];\r\n\t\t\t\tarray[i+1] = array[i+2];\r\n\t\t\t\tarray[i+2] = b;\r\n\t\t\t}","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>I have calculated CRC32 with Java and got the same you got in C#. I.e. <code>CRC32(43HLV109520DAP10072la19z6)=2947932745</code>. This means that either they have a bug in java, or you have a bug during transmission.</p>\n\n<p>Code follows.</p>\n\n<p>I suggest you try to send simple data to java application, like zeros or ones, and try to deduce how do they compute CRC.</p>\n\n<pre><code>public static void main(String[] args) {\n\n    CRC32 crc32 = new CRC32();\n\n    String data = \"43HLV109520DAP10072la19z6\";\n\n    String[] cs = new String[] {\"utf8\" /*, \"cp1252\", \"cp866\" */};\n    byte[] array;\n    byte b;\n\n    for(int i=0; i&lt;cs.length; ++i) {\n\n        array = data.getBytes(Charset.forName(cs[i]));\n\n        crc32.reset();\n        crc32.update(array);\n\n        System.out.println(String.format(\"%s: %d\", cs[i], crc32.getValue()));\n\n        /*\n        for(int j=0; j&lt;array.length/2; j++) {\n            b = array[i];\n            array[i] = array[array.length-1-i];\n            array[array.length-1-i] = b;\n        }\n        */\n\n        for(int j=0; j&lt;array.length; j+=2) {\n            b = array[i];\n            array[i] = array[i+2];\n            array[i+1] = b;\n        }\n\n        crc32.reset();\n        crc32.update(array);\n\n        System.out.println(String.format(\"of modified: %d\", crc32.getValue()));\n    }\n\n\n\n\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Endiannes reverse also not help</p>\n\n<pre><code>        for(int j=0; j&lt;array.length; j+=4) {\n\n            b = array[i];\n            array[i] = array[i+3];\n            array[i+3] = b;\n\n\n            b = array[i+1];\n            array[i+1] = array[i+2];\n            array[i+2] = b;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6156960,"reputation":126,"user_id":4799639,"display_name":"dilipkumar katre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640266579,"creation_date":1640260444,"answer_id":70461815,"question_id":13107665,"body_markdown":"CRC is calculated over a sequence of bytes and not over a string.\r\nWhichever CRC in java looks different due unavailability of Unsigned int in java.\r\n\r\nConvert calculated Int CRC into Hex String and take last 2 Bytes (length 4)\r\n\r\nThat is your actual CRC unsigned Int.\r\n\r\n    String hexCrc = Integer.toHexString(crcCalculated);\r\n    hexCrc = hexCrc.substring(hexCrc.length()-4);\r\n\r\ncompare hex CRC of c# and Java both should be same.\r\n\r\n","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>CRC is calculated over a sequence of bytes and not over a string.\nWhichever CRC in java looks different due unavailability of Unsigned int in java.</p>\n<p>Convert calculated Int CRC into Hex String and take last 2 Bytes (length 4)</p>\n<p>That is your actual CRC unsigned Int.</p>\n<pre><code>String hexCrc = Integer.toHexString(crcCalculated);\nhexCrc = hexCrc.substring(hexCrc.length()-4);\n</code></pre>\n<p>compare hex CRC of c# and Java both should be same.</p>\n"}],"owner":{"account_id":1985062,"reputation":920,"user_id":1780538,"accept_rate":60,"display_name":"user1780538"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5267,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":13108387,"answer_count":4,"score":5,"last_activity_date":1640266579,"creation_date":1351416157,"question_id":13107665,"body_markdown":"I have to calculate CRC32 checksum for a string in C# and send it to an external application.\r\n\r\nOn the other end they will calculate it using Java.\r\n\r\nBut my checksum does not match on the their end.\r\n\r\n\r\ne.g. CRC32 checksum of the following string\r\n43HLV109520DAP10072la19z6\r\n\r\nis 1269993351 on their end.\r\n\r\nAnd 2947932745 at my end using C#\r\n\r\n\r\nPlease tell me what&#39;s going wrong in my code.\r\n\r\nI am using this 0xffffffff default seed and following crc table\r\n\r\n\r\n    readonly static uint[] CRCTable = new uint[] {\r\n                0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\r\n                0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\r\n                0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\r\n                0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\r\n                0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\r\n                0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\r\n                0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\r\n                0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\r\n                0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\r\n                0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\r\n                0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\r\n                0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\r\n                0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\r\n                0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\r\n                0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\r\n                0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\r\n                0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\r\n                0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\r\n                0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\r\n                0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\r\n                0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\r\n                0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\r\n                0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\r\n                0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\r\n                0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\r\n                0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\r\n                0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\r\n                0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\r\n                0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\r\n                0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\r\n                0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\r\n                0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\r\n                0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\r\n                0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\r\n                0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\r\n                0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\r\n                0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\r\n                0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\r\n                0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\r\n                0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\r\n                0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\r\n                0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\r\n                0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\r\n                0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\r\n                0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\r\n                0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\r\n                0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\r\n                0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\r\n                0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\r\n                0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\r\n                0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\r\n                0x2D02EF8D\r\n            };\r\n\r\n","title":"Is there any difference in calculating CRC32 checksum in C# and Java?","body":"<p>I have to calculate CRC32 checksum for a string in C# and send it to an external application.</p>\n\n<p>On the other end they will calculate it using Java.</p>\n\n<p>But my checksum does not match on the their end.</p>\n\n<p>e.g. CRC32 checksum of the following string\n43HLV109520DAP10072la19z6</p>\n\n<p>is 1269993351 on their end.</p>\n\n<p>And 2947932745 at my end using C#</p>\n\n<p>Please tell me what's going wrong in my code.</p>\n\n<p>I am using this 0xffffffff default seed and following crc table</p>\n\n<pre><code>readonly static uint[] CRCTable = new uint[] {\n            0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n            0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n            0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n            0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n            0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n            0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n            0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n            0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n            0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n            0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n            0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n            0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n            0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n            0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n            0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n            0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n            0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n            0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n            0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n            0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n            0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n            0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n            0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n            0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n            0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n            0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n            0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n            0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n            0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n            0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n            0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n            0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n            0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n            0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n            0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n            0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n            0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n            0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n            0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n            0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n            0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n            0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n            0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n            0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n            0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n            0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n            0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n            0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n            0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n            0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n            0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n            0x2D02EF8D\n        };\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":933696,"reputation":995,"user_id":963038,"accept_rate":75,"display_name":"Md. Tahmid Mozaffar"},"score":0,"creation_date":1602966321,"post_id":64406926,"comment_id":113888695,"body_markdown":"Check this. This should work. https://stackoverflow.com/a/55881654/963038","body":"Check this. This should work. <a href=\"https://stackoverflow.com/a/55881654/963038\">stackoverflow.com/a/55881654/963038</a>"}],"answers":[{"tags":[],"owner":{"account_id":20955321,"reputation":221,"user_id":15395983,"display_name":"Manav Adhyaru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640266254,"creation_date":1640266254,"answer_id":70462814,"question_id":64406926,"body_markdown":"After initialising the view add this **yourPager.setUserInputEnabled(false);**\r\nI face same issue by adding this line i am able to perform longClickAction on viewPager","title":"How to add click/long click listener to ViewPager2","body":"<p>After initialising the view add this <strong>yourPager.setUserInputEnabled(false);</strong>\nI face same issue by adding this line i am able to perform longClickAction on viewPager</p>\n"}],"owner":{"account_id":9575852,"reputation":42,"user_id":13684332,"display_name":"Paprika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":420,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1640266254,"creation_date":1602965917,"question_id":64406926,"body_markdown":"I moved from `ViewPager` to `ViewPager2`. Since there&#39;s no way to set a clickable callback to `ViewPager2` or extend it to be clickable, I did this:\r\n\r\n\r\n    public class ViewPagerFragment extends Fragment {\r\n        ViewPager2 viewPagerTop;\r\n        ViewPager2Adapter viewPager2TopAdapter;\r\n        ClickableListener topClickableListener;\r\n    \r\n        public interface ClickableListener {\r\n            public void on(int position);\r\n            public boolean onLong(int position);\r\n        }\r\n    \r\n        public void setOnClickTop(ClickableListener clickableListener) {\r\n            topClickableListener = clickableListener;\r\n        }\r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            View view = inflater.inflate(R.layout.fragment_view_pager, container, false);\r\n            viewPagerTop = view.findViewById(R.id.viewPagerTop);\r\n    \r\n            viewPagerTop.setOnLongClickListener(v -&gt; {\r\n                Log.d(&quot;AAA&quot;, &quot;long clicked!&quot;);\r\n                int position = viewPagerTop.getCurrentItem();\r\n                return topClickableListener.onLong(position);\r\n            });\r\n            viewPagerTop.setOnClickListener(v -&gt; {\r\n                Log.d(&quot;AAA&quot;, &quot;clicked!&quot;);\r\n                int position = viewPagerTop.getCurrentItem();\r\n                topClickableListener.on(position);\r\n            });\r\n\r\nbut it won&#39;t work. I see nothing on log.","title":"How to add click/long click listener to ViewPager2","body":"<p>I moved from <code>ViewPager</code> to <code>ViewPager2</code>. Since there's no way to set a clickable callback to <code>ViewPager2</code> or extend it to be clickable, I did this:</p>\n<pre><code>public class ViewPagerFragment extends Fragment {\n    ViewPager2 viewPagerTop;\n    ViewPager2Adapter viewPager2TopAdapter;\n    ClickableListener topClickableListener;\n\n    public interface ClickableListener {\n        public void on(int position);\n        public boolean onLong(int position);\n    }\n\n    public void setOnClickTop(ClickableListener clickableListener) {\n        topClickableListener = clickableListener;\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_view_pager, container, false);\n        viewPagerTop = view.findViewById(R.id.viewPagerTop);\n\n        viewPagerTop.setOnLongClickListener(v -&gt; {\n            Log.d(&quot;AAA&quot;, &quot;long clicked!&quot;);\n            int position = viewPagerTop.getCurrentItem();\n            return topClickableListener.onLong(position);\n        });\n        viewPagerTop.setOnClickListener(v -&gt; {\n            Log.d(&quot;AAA&quot;, &quot;clicked!&quot;);\n            int position = viewPagerTop.getCurrentItem();\n            topClickableListener.on(position);\n        });\n</code></pre>\n<p>but it won't work. I see nothing on log.</p>\n"},{"tags":["java","c++"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1416252301,"post_id":26980349,"comment_id":42494817,"body_markdown":"Use the [Javadocs](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html).  You seek `indexOf` with an extra `int` argument.","body":"Use the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">Javadocs</a>.  You seek <code>indexOf</code> with an extra <code>int</code> argument."},{"owner":{"account_id":398383,"reputation":12130,"user_id":763029,"accept_rate":88,"display_name":"Caffeinated"},"score":1,"creation_date":1416252379,"post_id":26980349,"comment_id":42494860,"body_markdown":"indexOf - http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCAQFjAA&amp;url=http%3A%2F%2Fwww.tutorialspoint.com%2Fjava%2Fjava_string_indexof.htm&amp;ei=0UtqVKj8BIS0yAS_tYHgBQ&amp;usg=AFQjCNFiQz60cf8NfeC7rHjF8k8E99Ra1g&amp;sig2=_YR1DV3DysNQaAWWwvWRUA&amp;bvm=bv.79142246,d.aWw","body":"indexOf - <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CCAQFjAA&amp;url=http%3A%2F%2Fwww.tutorialspoint.com%2Fjava%2Fjava_string_indexof.htm&amp;ei=0UtqVKj8BIS0yAS_tYHgBQ&amp;usg=AFQjCNFiQz60cf8NfeC7rHjF8k8E99Ra1g&amp;sig2=_YR1DV3DysNQaAWWwvWRUA&amp;bvm=bv.79142246,d.aWw\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"},{"owner":{"account_id":1821777,"reputation":6462,"user_id":1655674,"display_name":"Dave Doknjas"},"score":0,"creation_date":1416254097,"post_id":26980349,"comment_id":42495739,"body_markdown":"In addition to using &#39;indexOf&#39;, string::npos is defined in C++ as the integer constant -1.","body":"In addition to using &#39;indexOf&#39;, string::npos is defined in C++ as the integer constant -1."}],"answers":[{"tags":[],"owner":{"account_id":4343376,"reputation":1165,"user_id":3546071,"display_name":"haley"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416252508,"creation_date":1416252508,"answer_id":26980420,"question_id":26980349,"body_markdown":"you can use str.indexOf(&#39;some string&#39;, indexToStartLooking); which will find the first occurrence of &quot;some string&quot; after the int in the second parameter and will return an int. ","title":"str.find() equivalent in java?","body":"<p>you can use str.indexOf('some string', indexToStartLooking); which will find the first occurrence of \"some string\" after the int in the second parameter and will return an int. </p>\n"},{"tags":[],"owner":{"account_id":2120733,"reputation":444,"user_id":1884030,"accept_rate":100,"display_name":"techguy18985"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416253104,"creation_date":1416253104,"answer_id":26980565,"question_id":26980349,"body_markdown":"Try using Java&#39;s Pattern and Matcher. Those classes involve regex pattern matching. It is very easy. Search here for other existing posts on that subject.","title":"str.find() equivalent in java?","body":"<p>Try using Java's Pattern and Matcher. Those classes involve regex pattern matching. It is very easy. Search here for other existing posts on that subject.</p>\n"}],"owner":{"account_id":4878585,"reputation":89,"user_id":3932977,"accept_rate":67,"display_name":"Will"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2423,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640266207,"creation_date":1416252274,"question_id":26980349,"body_markdown":"Hi I&#39;m trying to learn java so I&#39;m converting my working c++ code to java. But I&#39;m unsure about how to proceed with str.find(). Is there an equivalent of this in java? What I want to happen is I look for the first occurrence of a string in another string after the first comma not integer. I know of indexOf() and indexLastOf but they will only produce the fist and last occurrences.          \r\n\r\n    void found() {\r\n        int count = 1;\r\n    \tsize_t find = str.find(&#39;,&#39;); \r\n            while (find != string::npos) {\r\n                count++;\r\n                find = str.find(&#39;,&#39;, find + 1);\r\n        \t}\r\n         }\r\n    };\r\n","title":"str.find() equivalent in java?","body":"<p>Hi I'm trying to learn java so I'm converting my working c++ code to java. But I'm unsure about how to proceed with str.find(). Is there an equivalent of this in java? What I want to happen is I look for the first occurrence of a string in another string after the first comma not integer. I know of indexOf() and indexLastOf but they will only produce the fist and last occurrences.          </p>\n\n<pre><code>void found() {\n    int count = 1;\n    size_t find = str.find(','); \n        while (find != string::npos) {\n            count++;\n            find = str.find(',', find + 1);\n        }\n     }\n};\n</code></pre>\n"},{"tags":["java","arraylist","set","setter"],"comments":[{"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"score":0,"creation_date":1557948976,"post_id":56156453,"comment_id":98942074,"body_markdown":"You&#39;re just creating a new `Contact` object that&#39;s only in scope within the method. It looks like you&#39;re shadowing a variable","body":"You&#39;re just creating a new <code>Contact</code> object that&#39;s only in scope within the method. It looks like you&#39;re shadowing a variable"},{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":0,"creation_date":1557949190,"post_id":56156453,"comment_id":98942158,"body_markdown":"Use `currentContact = contact;` so that the returned object reference is the one in the list.","body":"Use <code>currentContact = contact;</code> so that the returned object reference is the one in the list."},{"owner":{"display_name":"user9664805"},"score":0,"creation_date":1557949514,"post_id":56156453,"comment_id":98942283,"body_markdown":"Everything works, thanks!","body":"Everything works, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":9749460,"reputation":683,"user_id":7228218,"display_name":"Islam Hassan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557949278,"creation_date":1557949278,"answer_id":56156544,"question_id":56156453,"body_markdown":"Your findContact() method is not returning a reference to a Contact object in the ArrayList, instead you are creating a new object with a copy of the data and then returning it.\r\n\r\nChange it as follows and your first approach should work:\r\n\r\n    public Contact findContact(String name) {\r\n\r\n        Contact currentContact = null;\r\n\r\n        for (Contact contact : contacts) {\r\n            if (contact.getName().equals(name)) {\r\n                currentContact = contact;\r\n                break;\r\n            }\r\n        }\r\n\r\n        return currentContact;\r\n    }","title":"Why setter methods don&#39;t update Object?","body":"<p>Your findContact() method is not returning a reference to a Contact object in the ArrayList, instead you are creating a new object with a copy of the data and then returning it.</p>\n\n<p>Change it as follows and your first approach should work:</p>\n\n<pre><code>public Contact findContact(String name) {\n\n    Contact currentContact = null;\n\n    for (Contact contact : contacts) {\n        if (contact.getName().equals(name)) {\n            currentContact = contact;\n            break;\n        }\n    }\n\n    return currentContact;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23726981,"reputation":1,"user_id":17746748,"display_name":"Kuldip Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640265914,"creation_date":1640248228,"answer_id":70459491,"question_id":56156453,"body_markdown":"Complete solution by using different class Name..\r\nAbove solutions doesn&#39;t Continued old Data..\r\n```java\r\nSystem.out.println(&quot;Enter Id OF student&quot;);\r\nString inputId = sc.next();\r\nfor(Student std : list ) {\r\n   if(std.getId().equals(inputId)){\r\n     Student newdata = std;\r\n     System.out.println(&quot;Enter New Marks and Phone Number:&quot;);\r\n     Student update = new Student(newdata.getId(),newdata.getCourse(),sc.nextDouble(),sc.next(),newdata.getEmail());\r\n     list.set(list.indexOf(newdata), update);\r\n         break;\r\n  }\r\n}\r\n```","title":"Why setter methods don&#39;t update Object?","body":"<p>Complete solution by using different class Name..\nAbove solutions doesn't Continued old Data..</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Enter Id OF student&quot;);\nString inputId = sc.next();\nfor(Student std : list ) {\n   if(std.getId().equals(inputId)){\n     Student newdata = std;\n     System.out.println(&quot;Enter New Marks and Phone Number:&quot;);\n     Student update = new Student(newdata.getId(),newdata.getCourse(),sc.nextDouble(),sc.next(),newdata.getEmail());\n     list.set(list.indexOf(newdata), update);\n         break;\n  }\n}\n</code></pre>\n"}],"owner":{"display_name":"user9664805"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1640265914,"creation_date":1557948728,"question_id":56156453,"body_markdown":"I want to update the Contact object, which has 2 fields - name &amp; phoneNumber.\nUnfortunately I don&#39;t know why setter methods don&#39;t work. \n\nFirstly I tried with the ```#1``` version of updateContact() method - code below. \nI think that it may have something with updating reference of an object, not the object itself? I&#39;m not sure. \n\nIf anybody could explain me that, why the code with setters doesn&#39;t work... - I mean it updates the &#39;contact&#39; within the function, but doesn&#39;t update contact in the ArrayList - contacts.\n\nThe ```#2``` method works, but I&#39;m not sure if it&#39;s a good idea/solution - well, it works... but I think that with setters it should work as well.  \n\n# 1\n```\n    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        System.out.print(&quot;Enter new name: &quot;);\n        contact.setName(scanner.nextLine());\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        contact.setPhoneNumber(scanner.nextLine());\n    }\n```\n# 2\n```\n    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        String replaceName;\n        String replaceNumber;\n\n        System.out.print(&quot;Enter new name: &quot;);\n        replaceName = scanner.nextLine();\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        replaceNumber = scanner.nextLine();\n\n        Contact replace = new Contact(replaceName, replaceNumber);\n\n        contacts.set(contacts.indexOf(contact), replace);\n    }\n```\nfindContact method\n```\n    public Contact findContact(String name) {\n\n        Contact currentContact = null;\n\n        for (Contact contact : contacts) {\n            if (contact.getName().equals(name)) {\n                currentContact = new Contact(name, contact.getPhoneNumber());\n            }\n        }\n\n        return currentContact;\n    }\n```\n\nThanks for help in advance.","title":"Why setter methods don&#39;t update Object?","body":"<p>I want to update the Contact object, which has 2 fields - name &amp; phoneNumber.\nUnfortunately I don't know why setter methods don't work.</p>\n<p>Firstly I tried with the <code>#1</code> version of updateContact() method - code below.\nI think that it may have something with updating reference of an object, not the object itself? I'm not sure.</p>\n<p>If anybody could explain me that, why the code with setters doesn't work... - I mean it updates the 'contact' within the function, but doesn't update contact in the ArrayList - contacts.</p>\n<p>The <code>#2</code> method works, but I'm not sure if it's a good idea/solution - well, it works... but I think that with setters it should work as well.</p>\n<h1>1</h1>\n<pre><code>    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        System.out.print(&quot;Enter new name: &quot;);\n        contact.setName(scanner.nextLine());\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        contact.setPhoneNumber(scanner.nextLine());\n    }\n</code></pre>\n<h1>2</h1>\n<pre><code>    public void updateContact(String name) {\n\n        Contact contact = findContact(name);\n\n        String replaceName;\n        String replaceNumber;\n\n        System.out.print(&quot;Enter new name: &quot;);\n        replaceName = scanner.nextLine();\n\n        System.out.print(&quot;Enter new phone number (9 numbers): &quot;);\n        replaceNumber = scanner.nextLine();\n\n        Contact replace = new Contact(replaceName, replaceNumber);\n\n        contacts.set(contacts.indexOf(contact), replace);\n    }\n</code></pre>\n<p>findContact method</p>\n<pre><code>    public Contact findContact(String name) {\n\n        Contact currentContact = null;\n\n        for (Contact contact : contacts) {\n            if (contact.getName().equals(name)) {\n                currentContact = new Contact(name, contact.getPhoneNumber());\n            }\n        }\n\n        return currentContact;\n    }\n</code></pre>\n<p>Thanks for help in advance.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8255,"page":1737,"page_size":100}
