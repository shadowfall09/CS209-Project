{"items":[{"tags":["java","open-telemetry","aws-xray"],"comments":[{"owner":{"account_id":11152648,"reputation":267,"user_id":8185365,"display_name":"William Armiros"},"score":0,"creation_date":1665759559,"post_id":73957707,"comment_id":130780344,"body_markdown":"Hello - this may be an issue with the AWS SDK instrumentation. The instrumentation should pass in trace context as an [SQS system message attribute](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-metadata.html#sqs-message-system-attributes) for it to be recognized downstream. Please open an issue here to describe this bug: https://github.com/open-telemetry/opentelemetry-java-instrumentation/","body":"Hello - this may be an issue with the AWS SDK instrumentation. The instrumentation should pass in trace context as an <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-metadata.html#sqs-message-system-attributes\" rel=\"nofollow noreferrer\">SQS system message attribute</a> for it to be recognized downstream. Please open an issue here to describe this bug: <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation</a>"},{"owner":{"account_id":26528435,"reputation":21,"user_id":20161040,"display_name":"Russell Jacobs"},"score":0,"creation_date":1667299182,"post_id":73957707,"comment_id":131130434,"body_markdown":"https://github.com/aws-observability/aws-otel-java-instrumentation/issues/244. It is already a message attribute. Basically this is a general with SQS. The instrumentation should automatically extracts the SQS trace context into a span per message received","body":"<a href=\"https://github.com/aws-observability/aws-otel-java-instrumentation/issues/244\" rel=\"nofollow noreferrer\">github.com/aws-observability/aws-otel-java-instrumentation/&hellip;</a>&zwnj;&#8203;. It is already a message attribute. Basically this is a general with SQS. The instrumentation should automatically extracts the SQS trace context into a span per message received"}],"answers":[{"tags":[],"owner":{"account_id":28023588,"reputation":11,"user_id":21691066,"display_name":"Ilia Beliaev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697793307,"creation_date":1697629497,"answer_id":77316001,"question_id":73957707,"body_markdown":"With a current state of opentelemetry library (1.31.0) from my (somewhat limited) understanding, the attributes are correctly propagated to SQS queue when `otel.instrumentation.aws-sdk.experimental-use-propagator-for-messaging` property is specified (or an `OTEL_INSTRUMENTATION_AWS_SDK_EXPERIMENTAL_USE_PROPAGATOR_FOR_MESSAGING` env variable).\r\n\r\nHowever, when they are read from the SQS message attributes on the receiving side, a context with trace values is created and immediately closed without wrapping the actual message handling (see [code on GitHub][1]):\r\n```java\r\n  private static void createConsumerSpan(\r\n      Message message,\r\n      SdkHttpResponse httpResponse,\r\n      ExecutionAttributes executionAttributes,\r\n      TracingExecutionInterceptor config) {\r\n\r\n    io.opentelemetry.context.Context parentContext = io.opentelemetry.context.Context.root();\r\n\r\n    TextMapPropagator messagingPropagator = config.getMessagingPropagator();\r\n    if (messagingPropagator != null) {\r\n      parentContext =\r\n          SqsParentContext.ofMessageAttributes(message.messageAttributes(), messagingPropagator);\r\n    }\r\n\r\n    if (config.shouldUseXrayPropagator()\r\n        &amp;&amp; parentContext == io.opentelemetry.context.Context.root()) {\r\n      parentContext = SqsParentContext.ofSystemAttributes(message.attributesAsStrings());\r\n    }\r\n\r\n    Instrumenter&lt;ExecutionAttributes, SdkHttpResponse&gt; consumerInstrumenter =\r\n        config.getConsumerInstrumenter();\r\n    if (consumerInstrumenter.shouldStart(parentContext, executionAttributes)) {\r\n      io.opentelemetry.context.Context context =\r\n          consumerInstrumenter.start(parentContext, executionAttributes);\r\n\r\n      // TODO: Even if we keep HTTP attributes (see afterMarshalling), does it make sense here\r\n      //  per-message?\r\n      // TODO: Should we really create root spans if we can&#39;t extract anything, or should we attach\r\n      //  to the current context?\r\n      consumerInstrumenter.end(context, executionAttributes, httpResponse, null);\r\n    }\r\n  }\r\n```\r\nAs a far as I see, that&#39;s done like this because AWS SQS SDK pulls messages in batches (even if you set it to a batch size of 1 it will still be a list).\r\nYou would need to setup manual span creation from remote parent in a place of message handling. Something like this should work (example written in kotlin, should be similar for java):\r\n```kotlin\r\nimport software.amazon.awssdk.services.sqs.model.Message\r\n\r\n    val tracer: Tracer\r\n\r\n    fun handle(\r\n        message: Message,\r\n        block: (Message) -&gt; Unit,\r\n    ) {\r\n        val span = createSpan(message)\r\n        try {\r\n            span.makeCurrent().use { block(message) }\r\n        } catch (e: Throwable) {\r\n            span.recordException(e)\r\n            throw e\r\n        } finally {\r\n            span.end()\r\n        }\r\n    }\r\n\r\n   fun createSpan(message: Message): Span {\r\n        // Example uses b3multi headers, change to what is used in your case\r\n        val traceId = message.messageAttributes()[&quot;X-B3-TraceId&quot;]?.stringValue()\r\n        val spanId = message.messageAttributes()[&quot;X-B3-SpanId&quot;]?.stringValue()\r\n        val isSampled = message.messageAttributes().getOrDefault(&quot;X-B3-Sampled&quot;, &quot;false&quot;)\r\n            .let { it == &quot;true&quot; || it == &quot;1&quot; }\r\n        val traceFlags = if (isSampled) TraceFlags.getSampled() else TraceFlags.getDefault()\r\n        return if (traceId != null &amp;&amp; spanId != null) {\r\n            tracer.spanBuilder(&quot;span-name&quot;)\r\n                .setParent(\r\n                    Context.current().with(\r\n                        Span.wrap(\r\n                            SpanContext.createFromRemoteParent(\r\n                                traceId,\r\n                                spanId,\r\n                                traceFlags,\r\n                                TraceState.getDefault(),\r\n                            ),\r\n                        ),\r\n                    ),\r\n                ).startSpan()\r\n        } else {\r\n            Span.current()\r\n        }\r\n    }\r\n```\r\n**EDIT:** it seems like propagation with SqsTemplate (in case of spring) doesn&#39;t work reliably, because for the first request a queue url is fetched and then in an async manner the actual send request is done.\r\n\r\n\r\n  [1]: https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/v1.31.0/instrumentation/aws-sdk/aws-sdk-2.2/library/src/main/java/io/opentelemetry/instrumentation/awssdk/v2_2/SqsImpl.java#L88","title":"How do I propagate SQS calls with OpenTelemetry auto-instrumentation","body":"<p>With a current state of opentelemetry library (1.31.0) from my (somewhat limited) understanding, the attributes are correctly propagated to SQS queue when <code>otel.instrumentation.aws-sdk.experimental-use-propagator-for-messaging</code> property is specified (or an <code>OTEL_INSTRUMENTATION_AWS_SDK_EXPERIMENTAL_USE_PROPAGATOR_FOR_MESSAGING</code> env variable).</p>\n<p>However, when they are read from the SQS message attributes on the receiving side, a context with trace values is created and immediately closed without wrapping the actual message handling (see <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/blob/v1.31.0/instrumentation/aws-sdk/aws-sdk-2.2/library/src/main/java/io/opentelemetry/instrumentation/awssdk/v2_2/SqsImpl.java#L88\" rel=\"nofollow noreferrer\">code on GitHub</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static void createConsumerSpan(\n      Message message,\n      SdkHttpResponse httpResponse,\n      ExecutionAttributes executionAttributes,\n      TracingExecutionInterceptor config) {\n\n    io.opentelemetry.context.Context parentContext = io.opentelemetry.context.Context.root();\n\n    TextMapPropagator messagingPropagator = config.getMessagingPropagator();\n    if (messagingPropagator != null) {\n      parentContext =\n          SqsParentContext.ofMessageAttributes(message.messageAttributes(), messagingPropagator);\n    }\n\n    if (config.shouldUseXrayPropagator()\n        &amp;&amp; parentContext == io.opentelemetry.context.Context.root()) {\n      parentContext = SqsParentContext.ofSystemAttributes(message.attributesAsStrings());\n    }\n\n    Instrumenter&lt;ExecutionAttributes, SdkHttpResponse&gt; consumerInstrumenter =\n        config.getConsumerInstrumenter();\n    if (consumerInstrumenter.shouldStart(parentContext, executionAttributes)) {\n      io.opentelemetry.context.Context context =\n          consumerInstrumenter.start(parentContext, executionAttributes);\n\n      // TODO: Even if we keep HTTP attributes (see afterMarshalling), does it make sense here\n      //  per-message?\n      // TODO: Should we really create root spans if we can't extract anything, or should we attach\n      //  to the current context?\n      consumerInstrumenter.end(context, executionAttributes, httpResponse, null);\n    }\n  }\n</code></pre>\n<p>As a far as I see, that's done like this because AWS SQS SDK pulls messages in batches (even if you set it to a batch size of 1 it will still be a list).\nYou would need to setup manual span creation from remote parent in a place of message handling. Something like this should work (example written in kotlin, should be similar for java):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import software.amazon.awssdk.services.sqs.model.Message\n\n    val tracer: Tracer\n\n    fun handle(\n        message: Message,\n        block: (Message) -&gt; Unit,\n    ) {\n        val span = createSpan(message)\n        try {\n            span.makeCurrent().use { block(message) }\n        } catch (e: Throwable) {\n            span.recordException(e)\n            throw e\n        } finally {\n            span.end()\n        }\n    }\n\n   fun createSpan(message: Message): Span {\n        // Example uses b3multi headers, change to what is used in your case\n        val traceId = message.messageAttributes()[&quot;X-B3-TraceId&quot;]?.stringValue()\n        val spanId = message.messageAttributes()[&quot;X-B3-SpanId&quot;]?.stringValue()\n        val isSampled = message.messageAttributes().getOrDefault(&quot;X-B3-Sampled&quot;, &quot;false&quot;)\n            .let { it == &quot;true&quot; || it == &quot;1&quot; }\n        val traceFlags = if (isSampled) TraceFlags.getSampled() else TraceFlags.getDefault()\n        return if (traceId != null &amp;&amp; spanId != null) {\n            tracer.spanBuilder(&quot;span-name&quot;)\n                .setParent(\n                    Context.current().with(\n                        Span.wrap(\n                            SpanContext.createFromRemoteParent(\n                                traceId,\n                                spanId,\n                                traceFlags,\n                                TraceState.getDefault(),\n                            ),\n                        ),\n                    ),\n                ).startSpan()\n        } else {\n            Span.current()\n        }\n    }\n</code></pre>\n<p><strong>EDIT:</strong> it seems like propagation with SqsTemplate (in case of spring) doesn't work reliably, because for the first request a queue url is fetched and then in an async manner the actual send request is done.</p>\n"}],"owner":{"account_id":26528435,"reputation":21,"user_id":20161040,"display_name":"Russell Jacobs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1697793307,"creation_date":1664958445,"question_id":73957707,"body_markdown":"I&#39;ve done the necessary sidecar setup in CloudFormation for the collector and added the following to my docker file for my Java applications deployed in AWS ECS (obviously replacing myservice with relevant name):\r\n\r\n```\r\nENV OTEL_SERVICE_NAME=&quot;MyService&quot;\r\nENV OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://localhost:4317&quot;\r\nENV OTEL_PROPAGATORS=&quot;tracecontext,baggage,xray&quot;\r\n\r\nCMD java -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0 -javaagent:aws-opentelemetry-agent.jar -jar myservice-1.0.jar\r\n```\r\n\r\nTraces for calls to synchronous endpoints work fantastically but traces do not seem to be propagated across SQS calls. \r\n\r\nAny ideas?","title":"How do I propagate SQS calls with OpenTelemetry auto-instrumentation","body":"<p>I've done the necessary sidecar setup in CloudFormation for the collector and added the following to my docker file for my Java applications deployed in AWS ECS (obviously replacing myservice with relevant name):</p>\n<pre><code>ENV OTEL_SERVICE_NAME=&quot;MyService&quot;\nENV OTEL_EXPORTER_OTLP_ENDPOINT=&quot;http://localhost:4317&quot;\nENV OTEL_PROPAGATORS=&quot;tracecontext,baggage,xray&quot;\n\nCMD java -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0 -javaagent:aws-opentelemetry-agent.jar -jar myservice-1.0.jar\n</code></pre>\n<p>Traces for calls to synchronous endpoints work fantastically but traces do not seem to be propagated across SQS calls.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","google-maps","permissions","location"],"comments":[{"owner":{"account_id":11283090,"reputation":7449,"user_id":8274756,"display_name":"Tamir Abutbul"},"score":0,"creation_date":1563467484,"post_id":57098852,"comment_id":100719260,"body_markdown":"Check [this](https://github.com/googlesamples/easypermissions)","body":"Check <a href=\"https://github.com/googlesamples/easypermissions\" rel=\"nofollow noreferrer\">this</a>"}],"answers":[{"tags":[],"owner":{"account_id":16342666,"reputation":109,"user_id":11803223,"display_name":"Andino Inyang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563470200,"creation_date":1563467836,"answer_id":57099143,"question_id":57098852,"body_markdown":"\r\n    if (ContextCompat.checkSelfPermission(thisActivity,\r\n            Manifest.permission.READ_CONTACTS)\r\n            != PackageManager.PERMISSION_GRANTED) {\r\n    \r\n        // Permission is not granted\r\n        // Should we show an explanation?\r\n        if (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,\r\n                Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n\r\n        } else {\r\n            ActivityCompat.requestPermissions(thisActivity,\r\n                    new String[]{Manifest.permission.ACCESS_COARSE_LOCATION});\r\n        }\r\n    } else {\r\n        // Permission has already been granted\r\n    }","title":"How to ask for location permission in Android?","body":"<pre><code>if (ContextCompat.checkSelfPermission(thisActivity,\n        Manifest.permission.READ_CONTACTS)\n        != PackageManager.PERMISSION_GRANTED) {\n\n    // Permission is not granted\n    // Should we show an explanation?\n    if (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,\n            Manifest.permission.ACCESS_FINE_LOCATION)) {\n\n    } else {\n        ActivityCompat.requestPermissions(thisActivity,\n                new String[]{Manifest.permission.ACCESS_COARSE_LOCATION});\n    }\n} else {\n    // Permission has already been granted\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11276487,"reputation":305,"user_id":8270400,"display_name":"Ajith Ramesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697793153,"creation_date":1563469321,"answer_id":57099478,"question_id":57098852,"body_markdown":"From API level 23 (Android 6.0 Marshmallow) we need to ask Run-time permission from the user-end. You can do this in two steps.\r\n\r\n1) Add these two permissions in ```AndroidManifest.xml``` file.\r\n\r\n```&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;```\r\n\r\n```&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;```\r\n\r\nExample:\r\n```\r\n&lt;manifest xlmns:android...&gt;\r\n ...\r\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt; \r\n &lt;application ...\r\n&lt;/manifest&gt;\r\n```\r\n\r\n2) Put this code block inside class where you need to get current location\r\n  ```void CheckUserPermsions(){\r\n      if ( Build.VERSION.SDK_INT &gt;= 23){\r\n                if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=\r\n                            PackageManager.PERMISSION_GRANTED  ){\r\n                     requestPermissions(new String[]{\r\n                                        android.Manifest.permission.ACCESS_FINE_LOCATION},\r\n                                REQUEST_CODE_ASK_PERMISSIONS);\r\n                        return ;\r\n                    }\r\n                }\r\n\r\n                getLocation();\r\n              \r\n    }\r\n    //get access to location permission\r\n    final private int REQUEST_CODE_ASK_PERMISSIONS = 123;\r\n\r\n\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n        switch (requestCode) {\r\n            case REQUEST_CODE_ASK_PERMISSIONS:\r\n                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    getLocation();\r\n                } else {\r\n                    // Permission Denied\r\n                    Toast.makeText( this,&quot;your message&quot; , Toast.LENGTH_SHORT)\r\n                            .show();\r\n                }\r\n                break;\r\n            default:\r\n                super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        }\r\n    }\r\n\r\n//Get location\r\n  public  void getLocation(){\r\n  \t    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\r\n  \t        Location myLocation=locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\r\n                if (myLocation == null) \r\n                {\r\n                    myLocation = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);\r\n\r\n                }\r\n    }\r\n```","title":"How to ask for location permission in Android?","body":"<p>From API level 23 (Android 6.0 Marshmallow) we need to ask Run-time permission from the user-end. You can do this in two steps.</p>\n<ol>\n<li>Add these two permissions in <code>AndroidManifest.xml</code> file.</li>\n</ol>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;</code></p>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;</code></p>\n<p>Example:</p>\n<pre><code>&lt;manifest xlmns:android...&gt;\n ...\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt; \n &lt;application ...\n&lt;/manifest&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Put this code block inside class where you need to get current location</li>\n</ol>\n<pre><code>    if ( Build.VERSION.SDK_INT &gt;= 23){\n              if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) !=\n                          PackageManager.PERMISSION_GRANTED  ){\n                   requestPermissions(new String[]{\n                                      android.Manifest.permission.ACCESS_FINE_LOCATION},\n                              REQUEST_CODE_ASK_PERMISSIONS);\n                      return ;\n                  }\n              }\n\n              getLocation();\n            \n  }\n  //get access to location permission\n  final private int REQUEST_CODE_ASK_PERMISSIONS = 123;\n\n\n\n  @Override\n  public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n      switch (requestCode) {\n          case REQUEST_CODE_ASK_PERMISSIONS:\n              if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                  getLocation();\n              } else {\n                  // Permission Denied\n                  Toast.makeText( this,&quot;your message&quot; , Toast.LENGTH_SHORT)\n                          .show();\n              }\n              break;\n          default:\n              super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n      }\n  }\n\n//Get location\npublic  void getLocation(){\n      LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);\n          Location myLocation=locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\n              if (myLocation == null) \n              {\n                  myLocation = locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);\n\n              }\n  }\n</code></pre>\n"}],"owner":{"account_id":15781516,"reputation":43,"user_id":11387753,"display_name":"stefan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13129,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57099478,"answer_count":2,"score":4,"last_activity_date":1697793153,"creation_date":1563466640,"question_id":57098852,"body_markdown":"I have tried so many codes and solutions but none of them worked. I want to ask the user for permission and get the pop-up window. Even though I used the code the window won&#39;t show? I think the code can get changed but I don&#39;t know exactly where to place it. Also, I&#39;m new to Android Studio\r\n\r\n```java\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n\r\n\r\n    private GoogleMap mMap;\r\n    private LatLngBounds PODGORICA = new LatLngBounds(\r\n            new LatLng(42.400334, 19.227705), new LatLng(42.470269, 19.323107));\r\n\r\n    private DrawerLayout mDrawerLayout;\r\n    private ActionBarDrawerToggle mToggle;\r\n\r\n\r\n    private static final String TAG = &quot;MapActivity&quot;;\r\n\r\n    LocationManager locationManager;\r\n    String provider;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawerLayout);\r\n        mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, R.string.open, R.string.close);\r\n\r\n        mDrawerLayout.addDrawerListener(mToggle);\r\n        mToggle.syncState();\r\n\r\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\r\n\r\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\r\n        mapFragment.getMapAsync(this);\r\n\r\n\r\n        Button btnQR = (Button) findViewById(R.id.skener);\r\n\r\n\r\n        btnQR.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(MainActivity.this, Main2Activity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                requestPermissions(new String[]{Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.INTERNET}\r\n                        ,10);\r\n            }\r\n            return;\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        if (mToggle.onOptionsItemSelected(item)) {\r\n            return true;\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onMapReady(GoogleMap googleMap) {\r\n\r\n\r\n        mMap = googleMap;\r\n\r\n        mMap.setLatLngBoundsForCameraTarget(PODGORICA);\r\n        mMap.setMinZoomPreference(5.0f);\r\n        mMap.setMaxZoomPreference(25.0f);\r\n\r\n        CameraPosition cameraPosition = new CameraPosition.Builder()\r\n                .target(new LatLng(42.441332, 19.262953))\r\n                .zoom(15)\r\n                .bearing(0)\r\n                //.tilt(45)\r\n                .build();\r\n        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\r\n\r\n\r\n\r\n     //   mMap.setMyLocationEnabled(true);\r\n\r\n    }\r\n\r\n```\r\n\r\nI even tried codes from Googles official page but got same result...","title":"How to ask for location permission in Android?","body":"<p>I have tried so many codes and solutions but none of them worked. I want to ask the user for permission and get the pop-up window. Even though I used the code the window won't show? I think the code can get changed but I don't know exactly where to place it. Also, I'm new to Android Studio</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>\n\npublic class MainActivity extends AppCompatActivity implements OnMapReadyCallback {\n\n\n    private GoogleMap mMap;\n    private LatLngBounds PODGORICA = new LatLngBounds(\n            new LatLng(42.400334, 19.227705), new LatLng(42.470269, 19.323107));\n\n    private DrawerLayout mDrawerLayout;\n    private ActionBarDrawerToggle mToggle;\n\n\n    private static final String TAG = \"MapActivity\";\n\n    LocationManager locationManager;\n    String provider;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        mDrawerLayout = (DrawerLayout) findViewById(R.id.drawerLayout);\n        mToggle = new ActionBarDrawerToggle(this, mDrawerLayout, R.string.open, R.string.close);\n\n        mDrawerLayout.addDrawerListener(mToggle);\n        mToggle.syncState();\n\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n\n        // Obtain the SupportMapFragment and get notified when the map is ready to be used.\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\n        mapFragment.getMapAsync(this);\n\n\n        Button btnQR = (Button) findViewById(R.id.skener);\n\n\n        btnQR.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(MainActivity.this, Main2Activity.class);\n                startActivity(intent);\n            }\n        });\n\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n                requestPermissions(new String[]{Manifest.permission.ACCESS_COARSE_LOCATION,Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.INTERNET}\n                        ,10);\n            }\n            return;\n        }\n\n\n    }\n\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        if (mToggle.onOptionsItemSelected(item)) {\n            return true;\n        }\n        return super.onOptionsItemSelected(item);\n    }\n\n\n    @Override\n    public void onMapReady(GoogleMap googleMap) {\n\n\n        mMap = googleMap;\n\n        mMap.setLatLngBoundsForCameraTarget(PODGORICA);\n        mMap.setMinZoomPreference(5.0f);\n        mMap.setMaxZoomPreference(25.0f);\n\n        CameraPosition cameraPosition = new CameraPosition.Builder()\n                .target(new LatLng(42.441332, 19.262953))\n                .zoom(15)\n                .bearing(0)\n                //.tilt(45)\n                .build();\n        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n\n\n\n     //   mMap.setMyLocationEnabled(true);\n\n    }\n\n</code></pre>\n\n<p>I even tried codes from Googles official page but got same result...</p>\n"},{"tags":["java","java-8","base64","deprecated","java-11"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1591269554,"post_id":62193303,"comment_id":109994700,"body_markdown":"You could always build your own JVM from the OpenJDK sources.   A more practical approach may be to say to the 3rd-party &quot;fix your buggy library to work on Java 11 ... or I stop paying for support&quot;.  People should not write their code to depend on internal classes.  Sun / Oracle said it was a bad idea.  There were always alternatives.","body":"You could always build your own JVM from the OpenJDK sources.   A more practical approach may be to say to the 3rd-party &quot;fix your buggy library to work on Java 11 ... or I stop paying for support&quot;.  People should not write their code to depend on internal classes.  Sun / Oracle said it was a bad idea.  There were always alternatives."}],"answers":[{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1591369923,"creation_date":1591369923,"answer_id":62218609,"question_id":62193303,"body_markdown":"One possible solution to this is you use `--patch-module` argument (if you are flexible in changing your command line). You will need to create a JAR with two class files `BASE64Encoder.class` and `CharacterEncoder.class` inside:\r\n\r\n    base64.jar\r\n        sun\r\n            misc\r\n                BASE64Encoder.class\r\n                CharacterEncoder.class\r\n\r\nThen you can run your application using the following options:\r\n\r\n    java --patch-module jdk.unsupported=base64.jar ...\r\n\r\n`--patch-module` will augment the `jdk.unsupported` module with two new classes so now you can use them at runtime.\r\n","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>One possible solution to this is you use <code>--patch-module</code> argument (if you are flexible in changing your command line). You will need to create a JAR with two class files <code>BASE64Encoder.class</code> and <code>CharacterEncoder.class</code> inside:</p>\n\n<pre><code>base64.jar\n    sun\n        misc\n            BASE64Encoder.class\n            CharacterEncoder.class\n</code></pre>\n\n<p>Then you can run your application using the following options:</p>\n\n<pre><code>java --patch-module jdk.unsupported=base64.jar ...\n</code></pre>\n\n<p><code>--patch-module</code> will augment the <code>jdk.unsupported</code> module with two new classes so now you can use them at runtime.</p>\n"},{"tags":[],"owner":{"account_id":4422,"reputation":7797,"user_id":6629,"accept_rate":75,"display_name":"Kinjal Dixit"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1636293510,"creation_date":1636293510,"answer_id":69873095,"question_id":62193303,"body_markdown":"The JDK 11 replacement for sun.misc.BASE64Encoder and sun.miscBASE64Decoder is [java.util.Base64.Encoder](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Encoder.html) and [java.util.Base64.Decoder](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Decoder.html).\r\n\r\nTypical code in JDK 1.8 would look like:\r\n\r\n    String encoded = new BASE64Encoder().encode(bBytes);\r\n    byte[] decoded = new BASE64Decoder().decodeBuffer(encoded);\r\n\r\nThe JDK 11 replacements which would generate identical values are:\r\n\r\n    import java.util.Base64;\r\n    // ...\r\n    String encoded = Base64.getEncoder().encodeToString(bBytes);\r\n    byte[] decoded = Base64.getDecoder().decode(encoded);\r\n\r\n","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>The JDK 11 replacement for sun.misc.BASE64Encoder and sun.miscBASE64Decoder is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Encoder.html\" rel=\"noreferrer\">java.util.Base64.Encoder</a> and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Base64.Decoder.html\" rel=\"noreferrer\">java.util.Base64.Decoder</a>.</p>\n<p>Typical code in JDK 1.8 would look like:</p>\n<pre><code>String encoded = new BASE64Encoder().encode(bBytes);\nbyte[] decoded = new BASE64Decoder().decodeBuffer(encoded);\n</code></pre>\n<p>The JDK 11 replacements which would generate identical values are:</p>\n<pre><code>import java.util.Base64;\n// ...\nString encoded = Base64.getEncoder().encodeToString(bBytes);\nbyte[] decoded = Base64.getDecoder().decode(encoded);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":223320,"reputation":31,"user_id":2655840,"display_name":"CormacM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697792986,"creation_date":1697501737,"answer_id":77305555,"question_id":62193303,"body_markdown":"I was getting the same error trying to run Spring 5 on Java 11. I can&#39;t upgrade to Spring 6 since my company hasn&#39;t certified Java 17 yet (another story).\r\n\r\nThe answer from ZhekaKozlov worked for me, although I had to add `sun/misc/CharacterEncoder.class` to my patch jar.\r\nAlso worth noting that adding my `base64.jar` to the classpath had no effect - I had to use the patch-module argument.","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>I was getting the same error trying to run Spring 5 on Java 11. I can't upgrade to Spring 6 since my company hasn't certified Java 17 yet (another story).</p>\n<p>The answer from ZhekaKozlov worked for me, although I had to add <code>sun/misc/CharacterEncoder.class</code> to my patch jar.\nAlso worth noting that adding my <code>base64.jar</code> to the classpath had no effect - I had to use the patch-module argument.</p>\n"},{"tags":[],"owner":{"account_id":223320,"reputation":31,"user_id":2655840,"display_name":"CormacM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697501906,"creation_date":1697501906,"answer_id":77305565,"question_id":62193303,"body_markdown":"I was getting the same error trying to run Spring 5 on Java 11. I can&#39;t upgrade to Spring 6 since my company hasn&#39;t certified Java 17 yet (another story).\r\nThe answer from ZhekaKozlov worked for me, although I had to add sun/misc/CEStreamExhausted.class to my patch jar (I got all the sun classes from rt.jar)\r\nAlso worth noting that adding my base64.jar to the classpath had no effect - I had to use the patch-module argument.","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>I was getting the same error trying to run Spring 5 on Java 11. I can't upgrade to Spring 6 since my company hasn't certified Java 17 yet (another story).\nThe answer from ZhekaKozlov worked for me, although I had to add sun/misc/CEStreamExhausted.class to my patch jar (I got all the sun classes from rt.jar)\nAlso worth noting that adding my base64.jar to the classpath had no effect - I had to use the patch-module argument.</p>\n"}],"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24637,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1697792986,"creation_date":1591269431,"question_id":62193303,"body_markdown":"This question is not a duplicate of [java.lang.NoClassDefFoundError: sun/misc/BASE64Encoder][1].\r\n\r\nI am trying to update the Java Version (to 11) in my app and one of the libraries in my app uses `sun.misc.BASE64Encoder` class, so I inevitably get this exception:\r\n\r\n```\r\nCaused by: java.lang.ClassNotFoundException: sun.misc.BASE64Encoder\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n```\r\n\r\nNow, the way to solve would be to use `java.util.Base64` or apache commons as the other answers suggest. However, the problem is, this library belongs to a third party and I don&#39;t have the source code for it. There doesn&#39;t seem to be a new version that is not using these classes. So, to work around this issue, I did the following:\r\n\r\n * Created package `sun.misc`\r\n * Copied both `BASE64Encoder` and `CharacterEncoder` classes in this package\r\n\r\nBut now, I get a compilation error saying `The package sun.misc conflicts with a package accessible from another module: jdk.unsupported`.\r\n\r\nIs there any way to get around this error? If not, can I add a `jar` to the dependencies that contains these classes? I am just trying to make sure these classes are available to that third party library at runtime (either via my own source code or via a jar that bundles these classes in).\r\n\r\n  [1]: https://stackoverflow.com/questions/29692146/java-lang-noclassdeffounderror-sun-misc-base64encoder","title":"Java 11 : Patch sun.misc.BASE64Encoder","body":"<p>This question is not a duplicate of <a href=\"https://stackoverflow.com/questions/29692146/java-lang-noclassdeffounderror-sun-misc-base64encoder\">java.lang.NoClassDefFoundError: sun/misc/BASE64Encoder</a>.</p>\n\n<p>I am trying to update the Java Version (to 11) in my app and one of the libraries in my app uses <code>sun.misc.BASE64Encoder</code> class, so I inevitably get this exception:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: sun.misc.BASE64Encoder\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n</code></pre>\n\n<p>Now, the way to solve would be to use <code>java.util.Base64</code> or apache commons as the other answers suggest. However, the problem is, this library belongs to a third party and I don't have the source code for it. There doesn't seem to be a new version that is not using these classes. So, to work around this issue, I did the following:</p>\n\n<ul>\n<li>Created package <code>sun.misc</code></li>\n<li>Copied both <code>BASE64Encoder</code> and <code>CharacterEncoder</code> classes in this package</li>\n</ul>\n\n<p>But now, I get a compilation error saying <code>The package sun.misc conflicts with a package accessible from another module: jdk.unsupported</code>.</p>\n\n<p>Is there any way to get around this error? If not, can I add a <code>jar</code> to the dependencies that contains these classes? I am just trying to make sure these classes are available to that third party library at runtime (either via my own source code or via a jar that bundles these classes in).</p>\n"},{"tags":["java","android","android-layout","android-softkeyboard","android-scrollview"],"comments":[{"owner":{"account_id":162140,"reputation":29525,"user_id":383414,"accept_rate":85,"display_name":"Richard Le Mesurier"},"score":2,"creation_date":1448610569,"post_id":15343355,"comment_id":55663107,"body_markdown":"for Android 5, check out this related post: [Android - adjust scrollview when keyboard is up for android 5.0 (lollipop)](http://stackoverflow.com/questions/27167176/android-adjust-scrollview-when-keyboard-is-up-for-android-5-0-lollipop)","body":"for Android 5, check out this related post: <a href=\"http://stackoverflow.com/questions/27167176/android-adjust-scrollview-when-keyboard-is-up-for-android-5-0-lollipop\">Android - adjust scrollview when keyboard is up for android 5.0 (lollipop)</a>"}],"answers":[{"tags":[],"owner":{"account_id":1677144,"reputation":5507,"user_id":1542395,"accept_rate":91,"display_name":"Xander"},"down_vote_count":1,"up_vote_count":39,"is_accepted":true,"score":38,"last_activity_date":1363376322,"creation_date":1363376322,"answer_id":15440786,"question_id":15343355,"body_markdown":"Okay, apparently the ScrollView&#39;s `android:layout_height` mustn&#39;t be set to `wrap_content`. I set it to `match_parent` and set the `android:layout_above` to the button on the bottom of the page.\r\n\r\nDon&#39;t ask me why, but this fixed the issue.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>Okay, apparently the ScrollView's <code>android:layout_height</code> mustn't be set to <code>wrap_content</code>. I set it to <code>match_parent</code> and set the <code>android:layout_above</code> to the button on the bottom of the page.</p>\n\n<p>Don't ask me why, but this fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":1010929,"reputation":2899,"user_id":1023517,"accept_rate":80,"display_name":"Ciprian"},"down_vote_count":4,"up_vote_count":72,"is_accepted":false,"score":68,"last_activity_date":1423649452,"creation_date":1376302486,"answer_id":18184481,"question_id":15343355,"body_markdown":"I had the same problem and I checked my activity in the manifest, and the reason why it wasn&#39;t working is because I didn&#39;t use this property:   \r\n     \r\n    android:windowSoftInputMode=&quot;adjustResize&quot;\r\n\r\nNow it works great and no need to do additional anchors.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>I had the same problem and I checked my activity in the manifest, and the reason why it wasn't working is because I didn't use this property:   </p>\n\n<pre><code>android:windowSoftInputMode=\"adjustResize\"\n</code></pre>\n\n<p>Now it works great and no need to do additional anchors.</p>\n"},{"tags":[],"owner":{"account_id":3032294,"reputation":2742,"user_id":2571060,"display_name":"Rajesh Hegde"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1460618780,"creation_date":1416221719,"answer_id":26971069,"question_id":15343355,"body_markdown":"Add `android:windowSoftInputMode=&quot;stateHidden|adjustResize&quot;` to your &lt;activity&gt; tag in AndroidManifest.xml file. This will cause the screen to be resized to the left over space after the soft keyboard is shown. So, you will be able to scroll easily.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>Add <code>android:windowSoftInputMode=\"stateHidden|adjustResize\"</code> to your  tag in AndroidManifest.xml file. This will cause the screen to be resized to the left over space after the soft keyboard is shown. So, you will be able to scroll easily.</p>\n"},{"tags":[],"owner":{"account_id":2158156,"reputation":5218,"user_id":1912919,"accept_rate":67,"display_name":"gtsouk"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1423131538,"creation_date":1423131538,"answer_id":28341373,"question_id":15343355,"body_markdown":"My problem was with a HorizontalScrollView. In my case I had to set HorizontalScrollView to:\r\n\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n\r\nAnd remove:\r\n\r\n     android:layout_above=&quot;@+id/closeButton&quot;\r\n     android:layout_below=&quot;@+id/logo&quot;\r\n\r\nIn the AndroidManifest.xml the activity is set to:\r\n\r\n    android:windowSoftInputMode=&quot;&quot;\r\n\r\nI hope this helps anyone comming across this weird bug.\r\n","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>My problem was with a HorizontalScrollView. In my case I had to set HorizontalScrollView to:</p>\n\n<pre><code>android:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\n</code></pre>\n\n<p>And remove:</p>\n\n<pre><code> android:layout_above=\"@+id/closeButton\"\n android:layout_below=\"@+id/logo\"\n</code></pre>\n\n<p>In the AndroidManifest.xml the activity is set to:</p>\n\n<pre><code>android:windowSoftInputMode=\"\"\n</code></pre>\n\n<p>I hope this helps anyone comming across this weird bug.</p>\n"},{"tags":[],"owner":{"account_id":11113050,"reputation":1,"user_id":8158116,"display_name":"Martino Christanto"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1499661040,"creation_date":1499661040,"answer_id":45003799,"question_id":15343355,"body_markdown":"Try to set ScrollView as your parent layout. It works like charm for me!","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>Try to set ScrollView as your parent layout. It works like charm for me!</p>\n"},{"tags":[],"owner":{"account_id":1093315,"reputation":2714,"user_id":1087449,"accept_rate":29,"display_name":"giorgos.nl"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1505206190,"creation_date":1505206190,"answer_id":46171933,"question_id":15343355,"body_markdown":"In my case, nothing of the above worked.\r\n\r\nI had `item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;` in my theme. And it was fixed by setting `android:fitsSystemWindows=&quot;true&quot;` in the parent layout where is my scrollview.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>In my case, nothing of the above worked.</p>\n\n<p>I had <code>item name=\"android:windowTranslucentStatus\"&gt;true&lt;/item&gt;</code> in my theme. And it was fixed by setting <code>android:fitsSystemWindows=\"true\"</code> in the parent layout where is my scrollview.</p>\n"},{"tags":[],"owner":{"account_id":11037893,"reputation":1,"user_id":8106959,"display_name":"Sufi Ammar Sahb"},"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1524415625,"creation_date":1524415625,"answer_id":49968389,"question_id":15343355,"body_markdown":"    &lt;activity \r\n        android:windowSoftInputMode=&quot;adjustResize&quot;\r\n    &gt;\r\n\r\n**try this In android manifest** ..","title":"Android: ScrollView not scrolling with keyboard out","body":"<pre><code>&lt;activity \n    android:windowSoftInputMode=\"adjustResize\"\n&gt;\n</code></pre>\n\n<p><strong>try this In android manifest</strong> ..</p>\n"},{"tags":[],"owner":{"account_id":12998669,"reputation":151,"user_id":9395435,"display_name":"Nur Hidayah Roslee"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1565922894,"creation_date":1565922894,"answer_id":57518303,"question_id":15343355,"body_markdown":"In my case any of the solution above does not work until I **REMOVE** \r\n\r\n`getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);`\r\n\r\nin my activity, I use that code to get a full screen display. Maybe for certain cases, try to remove any setup of full screen to make any of the above solution works.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>In my case any of the solution above does not work until I <strong>REMOVE</strong> </p>\n\n<p><code>getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);</code></p>\n\n<p>in my activity, I use that code to get a full screen display. Maybe for certain cases, try to remove any setup of full screen to make any of the above solution works.</p>\n"},{"tags":[],"owner":{"account_id":8652943,"reputation":22446,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1580102432,"creation_date":1580102432,"answer_id":59925468,"question_id":15343355,"body_markdown":"In my case I had to **Remove** the following property from my style to make it work .\r\n\r\n    &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>In my case I had to <strong>Remove</strong> the following property from my style to make it work .</p>\n\n<pre><code>&lt;item name=\"android:windowFullscreen\"&gt;true&lt;/item&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4960780,"reputation":61,"user_id":10417396,"display_name":"Jeetesh Surana"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1594187057,"creation_date":1594186124,"answer_id":62788119,"question_id":15343355,"body_markdown":"If your First Fragment Scroll perfectly and the second fragment did not scroll then you should use the second fragment replace and do below things \r\n\r\n1.Add in ScrollView\r\n\r\n    android:fillViewport=&quot;true&quot;\r\n    android:fitsSystemWindows=&quot;true&quot;\r\n\r\n2.Add in Manifest \r\n\r\n    android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot;\r\n\r\nIf you add fragment then my suggestion is you need to Replace the Fragment\r\n\r\n\r\n\r\n\r\n","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>If your First Fragment Scroll perfectly and the second fragment did not scroll then you should use the second fragment replace and do below things</p>\n<p>1.Add in ScrollView</p>\n<pre><code>android:fillViewport=&quot;true&quot;\nandroid:fitsSystemWindows=&quot;true&quot;\n</code></pre>\n<p>2.Add in Manifest</p>\n<pre><code>android:windowSoftInputMode=&quot;adjustResize|stateVisible&quot;\n</code></pre>\n<p>If you add fragment then my suggestion is you need to Replace the Fragment</p>\n"},{"tags":[],"owner":{"account_id":19105750,"reputation":471,"user_id":13952938,"display_name":"sbenati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595070129,"creation_date":1595070129,"answer_id":62967761,"question_id":15343355,"body_markdown":"In my case, what solved this was setting a missing constraint in the Bottom. My ScrollView had top, right, and left constraints, but no bottom one. After restricting it from all sides, it started to overlap the above textview, which prompted me to try putting the height to 0dp, and that seemed to solve the problem.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>In my case, what solved this was setting a missing constraint in the Bottom. My ScrollView had top, right, and left constraints, but no bottom one. After restricting it from all sides, it started to overlap the above textview, which prompted me to try putting the height to 0dp, and that seemed to solve the problem.</p>\n"},{"tags":[],"owner":{"account_id":29714757,"reputation":1,"user_id":22773528,"display_name":"Hariom Tyagi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697792594,"creation_date":1697792150,"answer_id":77329581,"question_id":15343355,"body_markdown":"I&#39;m facing the same problem.\r\n\r\nBefore changing\r\n\r\n    android:windowSoftInputMode=&quot;adjustResize|adjustPan&quot;\r\n\r\nAfter changing\r\n\r\n    android:windowSoftInputMode=&quot;adjustResize&quot;\r\n\r\nNow it works fine and no need to do additional anchors.","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>I'm facing the same problem.</p>\n<p>Before changing</p>\n<pre><code>android:windowSoftInputMode=&quot;adjustResize|adjustPan&quot;\n</code></pre>\n<p>After changing</p>\n<pre><code>android:windowSoftInputMode=&quot;adjustResize&quot;\n</code></pre>\n<p>Now it works fine and no need to do additional anchors.</p>\n"}],"owner":{"account_id":1677144,"reputation":5507,"user_id":1542395,"accept_rate":91,"display_name":"Xander"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80281,"favorite_count":0,"down_vote_count":0,"up_vote_count":58,"accepted_answer_id":15440786,"answer_count":12,"score":58,"last_activity_date":1697792594,"creation_date":1363018363,"question_id":15343355,"body_markdown":"I&#39;ve got a layout with some views, from which one is an EditText. The layout easily fits on one page, BUT, when the soft keyboard is out, the layout doesn&#39;t scroll.\r\nHere&#39;s a recap of my layout:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;@drawable/background&quot; &gt;\r\n    \r\n        &lt;ScrollView\r\n            android:id=&quot;@+id/ScrollView1&quot;\r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentTop=&quot;true&quot; &gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;vertical&quot; &gt;\r\n    \r\n                &lt;CheckBox/&gt;\r\n    \r\n                &lt;TextView/&gt;\r\n    \r\n                &lt;LinearLayout&gt;\r\n                    &lt;EditText&gt;\r\n                        &lt;requestFocus /&gt;\r\n                    &lt;/EditText&gt;\r\n                &lt;/LinearLayout&gt;\r\n    \r\n                &lt;TextView/&gt;\r\n    \r\n                &lt;LinearLayout&gt;\r\n                    &lt;Spinner/&gt;\r\n                &lt;/LinearLayout&gt;\r\n    \r\n            &lt;/LinearLayout&gt;\r\n    \r\n        &lt;/ScrollView&gt;\r\n    \r\n        &lt;Button\r\n            android:layout_alignParentBottom=&quot;true&quot; /&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\nAnd in my manifest I have declared the attribute:\r\n\r\n    android:windowSoftInputMode=&quot;adjustResize|stateHidden&quot;\r\n\r\nDoes anyone know why it doesn&#39;t work and how to make sure it does work?","title":"Android: ScrollView not scrolling with keyboard out","body":"<p>I've got a layout with some views, from which one is an EditText. The layout easily fits on one page, BUT, when the soft keyboard is out, the layout doesn't scroll.\nHere's a recap of my layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@drawable/background&quot; &gt;\n\n    &lt;ScrollView\n        android:id=&quot;@+id/ScrollView1&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentTop=&quot;true&quot; &gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot; &gt;\n\n            &lt;CheckBox/&gt;\n\n            &lt;TextView/&gt;\n\n            &lt;LinearLayout&gt;\n                &lt;EditText&gt;\n                    &lt;requestFocus /&gt;\n                &lt;/EditText&gt;\n            &lt;/LinearLayout&gt;\n\n            &lt;TextView/&gt;\n\n            &lt;LinearLayout&gt;\n                &lt;Spinner/&gt;\n            &lt;/LinearLayout&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/ScrollView&gt;\n\n    &lt;Button\n        android:layout_alignParentBottom=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>And in my manifest I have declared the attribute:</p>\n<pre><code>android:windowSoftInputMode=&quot;adjustResize|stateHidden&quot;\n</code></pre>\n<p>Does anyone know why it doesn't work and how to make sure it does work?</p>\n"},{"tags":["java","java-17","java-platform-module-system"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1697799066,"post_id":77329020,"comment_id":136328142,"body_markdown":"Your description is confusing. Are you talking about your program or about someone else’s program?","body":"Your description is confusing. Are you talking about your program or about someone else’s program?"},{"owner":{"account_id":2002545,"reputation":832,"user_id":1793217,"display_name":"ngong"},"score":0,"creation_date":1697819034,"post_id":77329020,"comment_id":136331899,"body_markdown":"Holger, I am talking about &quot;My JPMS program&quot;, that is based on several Java modules, that I have not created, e.g. JGiven.\n\nPutting maven-shade-plugin in pom.xml, I got an interesting [install output](https://paste.fo/raw/6336f81bbae0). Seems to list all JPMS problems in the used modules.","body":"Holger, I am talking about &quot;My JPMS program&quot;, that is based on several Java modules, that I have not created, e.g. JGiven.  Putting maven-shade-plugin in pom.xml, I got an interesting <a href=\"https://paste.fo/raw/6336f81bbae0\" rel=\"nofollow noreferrer\">install output</a>. Seems to list all JPMS problems in the used modules."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1697884583,"post_id":77329020,"comment_id":136337427,"body_markdown":"The restriction that a package must belong to a single module without ambiguity, is fundamental. If your modular program works fine with the modules it requires, then all those modules must obey this restriction already. Your reason why you suddenly throw ten thousand jar files into the module path, is incomprehensible. Non-modular software still works as intended when being provided through the classpath. And software with split packages obviously is non-modular.","body":"The restriction that a package must belong to a single module without ambiguity, is fundamental. If your modular program works fine with the modules it requires, then all those modules must obey this restriction already. Your reason why you suddenly throw ten thousand jar files into the module path, is incomprehensible. Non-modular software still works as intended when being provided through the classpath. And software with split packages obviously is non-modular."}],"owner":{"account_id":2002545,"reputation":832,"user_id":1793217,"display_name":"ngong"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697792556,"creation_date":1697786550,"question_id":77329020,"body_markdown":"This question has been asked here several times. But I did not find a usable answer so far (for years now). As I am doing small Java-17 programs using big jar files, I am wondering whether JPMS is the right way to go. That means whether Java is the right language for small programs.\r\n\r\nMy **actual problem**:\r\n\r\nMy JPMS programs work from within Eclipse and m2e. That is fine in most cases. But sometimes I have to distribute my program.\r\n\r\nDue to module dependencies on a service provider starting the program from batch, it needs a module-path. This seems to be incompatible with exporting the program from Eclipse as a Runnable JAR File. Hence, I am trying to put all jars in one lib folder and start the main module. But I got an **error**:\r\n```\r\njava -p target/lib -m my-module-package/my-module-package.Main some parameters\r\nError occurred during initialization of boot layer\r\njava.lang.module.ResolutionException: Modules com.tngtech.junit.dataprovider.junit4 and com.tngtech.junit.dataprovider.core export package com.tngtech.junit.dataprovider.resolver to module commons.logging\r\n```\r\nIn my Java-17 program, I am refering to my utility module. That module is tested using JGiven and refers to a dataprovider:\r\n```\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.tngtech.jgiven&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jgiven-junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.tngtech.junit.dataprovider&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit4-dataprovider&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.10&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nBoth module jar files seem to host the package ``com.tngtech.junit.dataprovider.resolver`` what causes the error.\r\n\r\nThe only advice I found so for resolving that error is to contact the module owners.\r\n\r\nAnd I expect, when I have solved that one error I will face the next ResolutionException.\r\n\r\nIs there any quick general solution? E.g. how to specify to use only the first package found and ignore the others? Or: How to repack the dependent modules jar file without the conflicting package and offer that jar file to Maven?","title":"JPMS and foreign JAR files often lead to ResolutionException","body":"<p>This question has been asked here several times. But I did not find a usable answer so far (for years now). As I am doing small Java-17 programs using big jar files, I am wondering whether JPMS is the right way to go. That means whether Java is the right language for small programs.</p>\n<p>My <strong>actual problem</strong>:</p>\n<p>My JPMS programs work from within Eclipse and m2e. That is fine in most cases. But sometimes I have to distribute my program.</p>\n<p>Due to module dependencies on a service provider starting the program from batch, it needs a module-path. This seems to be incompatible with exporting the program from Eclipse as a Runnable JAR File. Hence, I am trying to put all jars in one lib folder and start the main module. But I got an <strong>error</strong>:</p>\n<pre><code>java -p target/lib -m my-module-package/my-module-package.Main some parameters\nError occurred during initialization of boot layer\njava.lang.module.ResolutionException: Modules com.tngtech.junit.dataprovider.junit4 and com.tngtech.junit.dataprovider.core export package com.tngtech.junit.dataprovider.resolver to module commons.logging\n</code></pre>\n<p>In my Java-17 program, I am refering to my utility module. That module is tested using JGiven and refers to a dataprovider:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.tngtech.jgiven&lt;/groupId&gt;\n            &lt;artifactId&gt;jgiven-junit&lt;/artifactId&gt;\n            &lt;version&gt;1.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.tngtech.junit.dataprovider&lt;/groupId&gt;\n            &lt;artifactId&gt;junit4-dataprovider&lt;/artifactId&gt;\n            &lt;version&gt;2.10&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Both module jar files seem to host the package <code>com.tngtech.junit.dataprovider.resolver</code> what causes the error.</p>\n<p>The only advice I found so for resolving that error is to contact the module owners.</p>\n<p>And I expect, when I have solved that one error I will face the next ResolutionException.</p>\n<p>Is there any quick general solution? E.g. how to specify to use only the first package found and ignore the others? Or: How to repack the dependent modules jar file without the conflicting package and offer that jar file to Maven?</p>\n"},{"tags":["java","spring-boot","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697792246,"creation_date":1697792246,"answer_id":77329594,"question_id":77329386,"body_markdown":"Type inference unfortunately does not go deeper than 1 level. That means that type inference tries to get the actual type of `T` when calling `logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))` from its argument. That&#39;s so generic that no proper type can be inferred, and therefore object is used.\r\n\r\nTwo ways to get around this:\r\n1. Tell the method what the generic type should be:\r\n```java\r\nreturn ClassWhereLogBeforeIsDefined.&lt;ServerSentEvent&lt;MyObject&gt;&gt;logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\r\n```\r\n\r\n2. Tell the lambda what the generic type should be:\r\n```java\r\nreturn logBefore((ServerSentEvent&lt;MyObject&gt; r) -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\r\n```","title":"How to generify Reactor function?","body":"<p>Type inference unfortunately does not go deeper than 1 level. That means that type inference tries to get the actual type of <code>T</code> when calling <code>logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))</code> from its argument. That's so generic that no proper type can be inferred, and therefore object is used.</p>\n<p>Two ways to get around this:</p>\n<ol>\n<li>Tell the method what the generic type should be:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>return ClassWhereLogBeforeIsDefined.&lt;ServerSentEvent&lt;MyObject&gt;&gt;logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\n</code></pre>\n<ol start=\"2\">\n<li>Tell the lambda what the generic type should be:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>return logBefore((ServerSentEvent&lt;MyObject&gt; r) -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\n</code></pre>\n"}],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77329594,"answer_count":1,"score":0,"last_activity_date":1697792246,"creation_date":1697790327,"question_id":77329386,"body_markdown":"I have the following static function to log some info before another flux is called.\r\n\r\n\r\n    public static Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt; logBefore(Consumer&lt;ServerSentEvent&lt;MyObject&gt;&gt; consumer) {\r\n         return Flux.&lt;ServerSentEvent&lt;MyObject&gt;&gt;empty()\r\n                .doOnEach(logOnComplete(consumer));\r\n    }\r\n\r\nI call the function as follows:\r\n    \r\n    public Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt; myMethod(@Valid @RequestBody MyRequest request) {\r\n\r\n       return logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\r\n           .switchIfEmpty(client.retrieveData(request));\r\n    }\r\n\r\nHow to generify this function? I have tried something as follows:\r\n\r\n    public static &lt;T&gt; Flux&lt;T&gt; logBefore(Consumer&lt;T&gt; consumer) {\r\n        return Flux.&lt;T&gt;empty()\r\n                .doOnEach(logOnComplete(consumer));\r\n    }\r\n\r\nHowever, the compiler is complaining.\r\n\r\n    Required type:Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt;\r\n    Provided:Flux&lt;Object&gt;","title":"How to generify Reactor function?","body":"<p>I have the following static function to log some info before another flux is called.</p>\n<pre><code>public static Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt; logBefore(Consumer&lt;ServerSentEvent&lt;MyObject&gt;&gt; consumer) {\n     return Flux.&lt;ServerSentEvent&lt;MyObject&gt;&gt;empty()\n            .doOnEach(logOnComplete(consumer));\n}\n</code></pre>\n<p>I call the function as follows:</p>\n<pre><code>public Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt; myMethod(@Valid @RequestBody MyRequest request) {\n\n   return logBefore(r -&gt; log.info(&quot;[Enter] myMethod() called.&quot;))\n       .switchIfEmpty(client.retrieveData(request));\n}\n</code></pre>\n<p>How to generify this function? I have tried something as follows:</p>\n<pre><code>public static &lt;T&gt; Flux&lt;T&gt; logBefore(Consumer&lt;T&gt; consumer) {\n    return Flux.&lt;T&gt;empty()\n            .doOnEach(logOnComplete(consumer));\n}\n</code></pre>\n<p>However, the compiler is complaining.</p>\n<pre><code>Required type:Flux&lt;ServerSentEvent&lt;MyObject&gt;&gt;\nProvided:Flux&lt;Object&gt;\n</code></pre>\n"},{"tags":["java","maven","pac4j"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697650377,"post_id":77310587,"comment_id":136307824,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":1608505,"reputation":2459,"user_id":1488073,"display_name":"jleleu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697613514,"creation_date":1697613514,"answer_id":77314202,"question_id":77310587,"body_markdown":"Some classes (`Pac4jProducer` and `HttpServletResponseProducer`) are meant to use CDI and produces pac4j beans.\r\n\r\nWhat is your application server? Can you copy/paste the full stack trace?","title":"Getting while capturing file using bat file in java","body":"<p>Some classes (<code>Pac4jProducer</code> and <code>HttpServletResponseProducer</code>) are meant to use CDI and produces pac4j beans.</p>\n<p>What is your application server? Can you copy/paste the full stack trace?</p>\n"}],"owner":{"account_id":28955839,"reputation":1,"user_id":22179419,"display_name":"vivek204"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697791923,"creation_date":1697558835,"question_id":77310587,"body_markdown":"javax.enterprise.inject.UnsatisfiedResolutionException: Api type [javax.servlet.http.HttpServletRequest] is not found with the qualifiers\r\nQualifiers: [@javax.enterprise.inject.Default()]\r\nfor injection into Method Injection Point, method name :  getWebContext, Bean Owner : [WebContext, WebBeansType:PRODUCERMETHOD, Name:null, API Types:[java.lang.Object,org.pac4j.core.context.WebContext], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any], Producer Method: org.pac4j.core.context.WebContext org.pac4j.jee.util.Pac4jProducer.getWebContext(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)]\r\nwe are getting above error while we capturing file using java \r\n`\r\n```\r\n&lt;dependency&gt;\r\n&lt;groupId&gt;org.pac4j&lt;/groupId&gt;\r\n&lt;artifactId&gt;javaee-pac4j&lt;/artifactId&gt;\r\n&lt;version&gt;7.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;`\r\n```\r\ncausing issue due to this above library. we cannot remove we have implement oidc using pac4j jar.\r\n\r\nhelp us to resolve this issue.","title":"Getting while capturing file using bat file in java","body":"<p>javax.enterprise.inject.UnsatisfiedResolutionException: Api type [javax.servlet.http.HttpServletRequest] is not found with the qualifiers\nQualifiers: [@javax.enterprise.inject.Default()]\nfor injection into Method Injection Point, method name :  getWebContext, Bean Owner : [WebContext, WebBeansType:PRODUCERMETHOD, Name:null, API Types:[java.lang.Object,org.pac4j.core.context.WebContext], Qualifiers:[javax.enterprise.inject.Default,javax.enterprise.inject.Any], Producer Method: org.pac4j.core.context.WebContext org.pac4j.jee.util.Pac4jProducer.getWebContext(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)]\nwe are getting above error while we capturing file using java\n`</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.pac4j&lt;/groupId&gt;\n&lt;artifactId&gt;javaee-pac4j&lt;/artifactId&gt;\n&lt;version&gt;7.1.0&lt;/version&gt;\n&lt;/dependency&gt;`\n</code></pre>\n<p>causing issue due to this above library. we cannot remove we have implement oidc using pac4j jar.</p>\n<p>help us to resolve this issue.</p>\n"},{"tags":["java","mysql","sql","spring-jdbc"],"comments":[{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1643741002,"post_id":70945527,"comment_id":125418843,"body_markdown":"Send two separate queries","body":"Send two separate queries"},{"owner":{"account_id":16934693,"reputation":11,"user_id":12248006,"display_name":"Sasqe"},"score":0,"creation_date":1643741495,"post_id":70945527,"comment_id":125419002,"body_markdown":"could you elaborate? the second table (transactions) is a child table of the first table (blockchain). It has a foreign key constraint. This happens when i try to execute the second query seperatley from the first one in phpMyAdmin: #1452 - Cannot add or update a child row: a foreign key constraint fails","body":"could you elaborate? the second table (transactions) is a child table of the first table (blockchain). It has a foreign key constraint. This happens when i try to execute the second query seperatley from the first one in phpMyAdmin: #1452 - Cannot add or update a child row: a foreign key constraint fails"}],"answers":[{"tags":[],"owner":{"account_id":23246470,"reputation":541,"user_id":17335001,"display_name":"nquincampoix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643817375,"creation_date":1643816565,"answer_id":70958533,"question_id":70945527,"body_markdown":"Multiple queries in one JDBC statement are not enabled by default in MySQL. This could explain the difference between your program and PHPMyAdmin.  \r\nHave you tried to add `?rewriteBatchedStatements=true` to your database url ?","title":"java.sql.BatchUpdateException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version","body":"<p>Multiple queries in one JDBC statement are not enabled by default in MySQL. This could explain the difference between your program and PHPMyAdmin.<br />\nHave you tried to add <code>?rewriteBatchedStatements=true</code> to your database url ?</p>\n"}],"owner":{"account_id":16934693,"reputation":11,"user_id":12248006,"display_name":"Sasqe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1392,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697791497,"creation_date":1643739369,"question_id":70945527,"body_markdown":"I&#39;m trying to insert into multiple tables with Spring JDBC. using prepared statements. My code looks like this: \r\n```\r\n\r\n\t\ttry (Connection connection = DriverManager.getConnection(databaseURL, user, password)) {\r\n\t\t\tconnection.setAutoCommit(false);\r\n\t\t}\r\n\t\t\tString sql = &quot;&quot; \r\n\t\t\t+ &quot;INSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES (?,?,?,?,?);&quot;;\r\n\t\t\tsql = sql + &quot; INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),?,?,?,?,?);&quot;; \r\n\t\t\tSystem.out.println(sql);\r\n\t\t// INSERT INTO BLOCKCHAIN\r\n\t\t\ttry \r\n\t\t\t{\r\n\t\t\t\t  PreparedStatement preparedStatement = connection.prepareStatement(sql);\r\n\t\t\t\t  preparedStatement.setString(1, newBlock.getHash());\r\n\t\t\t\t  preparedStatement.setString(2, newBlock.getPreviousHash()); \r\n\t\t\t\t  preparedStatement.setString(3, newBlock.getMerkleRoot());\r\n\t\t\t\t  preparedStatement.setLong(4, newBlock.getTimeStamp());\r\n\t\t\t\t  preparedStatement.setInt(5, newBlock.getNonce());\r\n\t\t\t\t  System.out.println(&quot;ADDING BATCH&quot;);\r\n\t\t\t\t\r\n\r\n\t\t\t\t  Iterator&lt;Transaction&gt; iterator1 = newBlock.getTransactions().iterator();\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  Transaction t = iterator1.next();\r\n\t\t\t\t\t  preparedStatement.setString(6, t.getTransactionId()); System.out.println(&quot;batched index 6&quot;);\r\n\t\t\t\t\t  //ENCODE\r\n\t\t\t\t\t  byte[] senderEncoded = t.sender.getEncoded(); // sender&#39;s encoded bytes\r\n\t\t\t\t\t  byte[] recipientEncoded = t.reciepient.getEncoded(); // Recipient&#39;s encoded algorithm\r\n\t\t\t\t\t  preparedStatement.setBytes(7, senderEncoded); System.out.println(&quot;batched index 7&quot;);\r\n\t\t\t\t\t  preparedStatement.setBytes(8, recipientEncoded); System.out.println(&quot;batched index 8&quot;);\r\n\t\t\t\t\t  preparedStatement.setFloat(9, t.getValue()); System.out.println(&quot;batched index 9&quot;);\r\n\t\t\t\t\t  preparedStatement.setBytes(10, t.getSignature()); System.out.println(&quot;batched index 10&quot;);\r\n\t\t\t\t     preparedStatement.addBatch();\r\n\t\t\t\t     System.out.println(preparedStatement);\r\n\r\n\t\t\t\t  int[] rows = preparedStatement.executeBatch();\r\n\t\t\t\t  \r\n\t\t\t\t  for (int i = 0; i &lt; rows.length; i++)\r\n\t\t\t\t  {\r\n\t\t\t\t\t  if (rows[i] == -2)\r\n\t\t\t\t\t\t  System.out.println(&quot;Execution &quot; + i + &quot; :: Unknown number of rows updated&quot;);\r\n\t\t\t\t\t  else\r\n\t\t\t\t\t\t  System.out.println(&quot;Exeuction &quot; + i + &quot;Successful: &quot; + rows[i] + &quot;rows updated&quot;);\r\n\t\t\t\t  }\r\n\t\t\t\t  connection.commit();\r\n\t        \r\n\t        } catch (BatchUpdateException ex) {\r\n\t            ex.printStackTrace();\r\n\t        }\r\n```\r\nWhen printing the prepared statement to the console before executing it, the SQL string looks like this:\r\n```\r\nINSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES (&#39;0008dfa469e73add5bc5467e316c5afde0e7275cec3b78a3632a37b268af9650&#39;,&#39;0&#39;,&#39;0&#39;,1643737357842,7996); INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),&#39;0&#39;,x&#39;3049301306072A8648CE3D020106082A8648CE3D0301010332000407E06E5EB43505FC4710C7062AAB63C38FC0916FD0D9937609F4DC12F52D5F2F537D6E782BCED7D4A26E7CE3CF578148&#39;,x&#39;3049301306072A8648CE3D020106082A8648CE3D030101033200042952CB58969E6B355B6392C1915B4591EDA46DC4109F23C078BB7674BB5312A0FF79BD40294F4E1C601F895DC5C0BCEA&#39;,100.0,x&#39;30360219009A59457CBA7868476416E270F63B6BC941A79F767200BAB8021900A3700F617C6F64D78D2FEFB19366AE7037883E05D23ADF51&#39;);\r\n```\r\nCopying this SQL String into phpmyadmin and executing it produces no errors :\r\n[Screenshot of the query being executed in PHPMyAdmin][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XPwmL.png\r\n\r\nIn the IDE, the complete error looks like this:\r\n```\r\ncom.mysql.cj.jdbc.ClientPreparedStatement: INSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES (&#39;0008dfa469e73add5bc5467e316c5afde0e7275cec3b78a3632a37b268af9650&#39;,&#39;0&#39;,&#39;0&#39;,1643737357842,7996); INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),&#39;0&#39;,x&#39;3049301306072A8648CE3D020106082A8648CE3D0301010332000407E06E5EB43505FC4710C7062AAB63C38FC0916FD0D9937609F4DC12F52D5F2F537D6E782BCED7D4A26E7CE3CF578148&#39;,x&#39;3049301306072A8648CE3D020106082A8648CE3D030101033200042952CB58969E6B355B6392C1915B4591EDA46DC4109F23C078BB7674BB5312A0FF79BD40294F4E1C601F895DC5C0BCEA&#39;,100.0,x&#39;30360219009A59457CBA7868476416E270F63B6BC941A79F767200BAB8021900A3700F617C6F64D78D2FEFB19366AE7037883E05D23ADF51&#39;);\r\njava.sql.BatchUpdateException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `&#39; at line 1\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n\tat com.mysql.cj.util.Util.handleNewInstance(Util.java:192)\r\n\tat com.mysql.cj.util.Util.getInstance(Util.java:167)\r\n\tat com.mysql.cj.util.Util.getInstance(Util.java:174)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:224)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:853)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:435)\r\n\tat com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:796)\r\n\tat com.gcu.controller.rainfall.addBlock(rainfall.java:318)\r\n\tat com.gcu.controller.rainfall.main(rainfall.java:106)\r\nCaused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `&#39; at line 1\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092)\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:832)\r\n\t... 4 more\r\n```\r\nWhat could the error possibly be? There&#39;s no syntax errors as when I copy the SQL string into PHPMyAdmin it works with no issue. Is this a bug within the IDE?","title":"java.sql.BatchUpdateException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version","body":"<p>I'm trying to insert into multiple tables with Spring JDBC. using prepared statements. My code looks like this:</p>\n<pre><code>\n        try (Connection connection = DriverManager.getConnection(databaseURL, user, password)) {\n            connection.setAutoCommit(false);\n        }\n            String sql = &quot;&quot; \n            + &quot;INSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES (?,?,?,?,?);&quot;;\n            sql = sql + &quot; INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),?,?,?,?,?);&quot;; \n            System.out.println(sql);\n        // INSERT INTO BLOCKCHAIN\n            try \n            {\n                  PreparedStatement preparedStatement = connection.prepareStatement(sql);\n                  preparedStatement.setString(1, newBlock.getHash());\n                  preparedStatement.setString(2, newBlock.getPreviousHash()); \n                  preparedStatement.setString(3, newBlock.getMerkleRoot());\n                  preparedStatement.setLong(4, newBlock.getTimeStamp());\n                  preparedStatement.setInt(5, newBlock.getNonce());\n                  System.out.println(&quot;ADDING BATCH&quot;);\n                \n\n                  Iterator&lt;Transaction&gt; iterator1 = newBlock.getTransactions().iterator();\n                      \n                      Transaction t = iterator1.next();\n                      preparedStatement.setString(6, t.getTransactionId()); System.out.println(&quot;batched index 6&quot;);\n                      //ENCODE\n                      byte[] senderEncoded = t.sender.getEncoded(); // sender's encoded bytes\n                      byte[] recipientEncoded = t.reciepient.getEncoded(); // Recipient's encoded algorithm\n                      preparedStatement.setBytes(7, senderEncoded); System.out.println(&quot;batched index 7&quot;);\n                      preparedStatement.setBytes(8, recipientEncoded); System.out.println(&quot;batched index 8&quot;);\n                      preparedStatement.setFloat(9, t.getValue()); System.out.println(&quot;batched index 9&quot;);\n                      preparedStatement.setBytes(10, t.getSignature()); System.out.println(&quot;batched index 10&quot;);\n                     preparedStatement.addBatch();\n                     System.out.println(preparedStatement);\n\n                  int[] rows = preparedStatement.executeBatch();\n                  \n                  for (int i = 0; i &lt; rows.length; i++)\n                  {\n                      if (rows[i] == -2)\n                          System.out.println(&quot;Execution &quot; + i + &quot; :: Unknown number of rows updated&quot;);\n                      else\n                          System.out.println(&quot;Exeuction &quot; + i + &quot;Successful: &quot; + rows[i] + &quot;rows updated&quot;);\n                  }\n                  connection.commit();\n            \n            } catch (BatchUpdateException ex) {\n                ex.printStackTrace();\n            }\n</code></pre>\n<p>When printing the prepared statement to the console before executing it, the SQL string looks like this:</p>\n<pre><code>INSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES ('0008dfa469e73add5bc5467e316c5afde0e7275cec3b78a3632a37b268af9650','0','0',1643737357842,7996); INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),'0',x'3049301306072A8648CE3D020106082A8648CE3D0301010332000407E06E5EB43505FC4710C7062AAB63C38FC0916FD0D9937609F4DC12F52D5F2F537D6E782BCED7D4A26E7CE3CF578148',x'3049301306072A8648CE3D020106082A8648CE3D030101033200042952CB58969E6B355B6392C1915B4591EDA46DC4109F23C078BB7674BB5312A0FF79BD40294F4E1C601F895DC5C0BCEA',100.0,x'30360219009A59457CBA7868476416E270F63B6BC941A79F767200BAB8021900A3700F617C6F64D78D2FEFB19366AE7037883E05D23ADF51');\n</code></pre>\n<p>Copying this SQL String into phpmyadmin and executing it produces no errors :\n<a href=\"https://i.stack.imgur.com/XPwmL.png\" rel=\"nofollow noreferrer\">Screenshot of the query being executed in PHPMyAdmin</a></p>\n<p>In the IDE, the complete error looks like this:</p>\n<pre><code>com.mysql.cj.jdbc.ClientPreparedStatement: INSERT INTO `blockchain`(`hash`, `previousHash`, `merkleRoot`, `timestamp`, `nonce`) VALUES ('0008dfa469e73add5bc5467e316c5afde0e7275cec3b78a3632a37b268af9650','0','0',1643737357842,7996); INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `value`, `signature`) VALUES (LAST_INSERT_ID(),'0',x'3049301306072A8648CE3D020106082A8648CE3D0301010332000407E06E5EB43505FC4710C7062AAB63C38FC0916FD0D9937609F4DC12F52D5F2F537D6E782BCED7D4A26E7CE3CF578148',x'3049301306072A8648CE3D020106082A8648CE3D030101033200042952CB58969E6B355B6392C1915B4591EDA46DC4109F23C078BB7674BB5312A0FF79BD40294F4E1C601F895DC5C0BCEA',100.0,x'30360219009A59457CBA7868476416E270F63B6BC941A79F767200BAB8021900A3700F617C6F64D78D2FEFB19366AE7037883E05D23ADF51');\njava.sql.BatchUpdateException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `' at line 1\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at com.mysql.cj.util.Util.handleNewInstance(Util.java:192)\n    at com.mysql.cj.util.Util.getInstance(Util.java:167)\n    at com.mysql.cj.util.Util.getInstance(Util.java:174)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:224)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:853)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:435)\n    at com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:796)\n    at com.gcu.controller.rainfall.addBlock(rainfall.java:318)\n    at com.gcu.controller.rainfall.main(rainfall.java:106)\nCaused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'INSERT INTO `transactions`(`block_id`, `transactionID`, `sender`, `recipient`, `' at line 1\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:832)\n    ... 4 more\n</code></pre>\n<p>What could the error possibly be? There's no syntax errors as when I copy the SQL string into PHPMyAdmin it works with no issue. Is this a bug within the IDE?</p>\n"},{"tags":["java","multithreading","concurrency","completable-future"],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1655551796,"creation_date":1501532156,"answer_id":45424567,"question_id":45424454,"body_markdown":"As is explained in the [javadoc](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html)\r\n\r\n&gt; All async methods without an explicit Executor argument are performed\r\n&gt; using the ForkJoinPool.commonPool() (unless it does not support a\r\n&gt; parallelism level of at least two, in which case, a new Thread is\r\n&gt; created to run each task).\r\n\r\nSo a threadpool is used, either implicitly (unless you have a single core machine in which case the threads aren&#39;t pooled) or explicitly. In your case you would get to control the amount of threads used by using an explicit `Executor` (e.g. [ThreadPoolExecutor](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html)) with the amount of threads you want (most likely a lot less than 1000).\r\n\r\nThe calls cannot share a single thread (the calling thread), as Java doesn&#39;t have the [capability](https://stackoverflow.com/questions/16539245/java-equivalent-of-c-sharp-async-await) for what people these days understand by asynchronous due to the popular async/await paradigm (i.e. the fictional &quot;truly asynchronous&quot; term - synchronous vs. asynchronous is independent of threads, but asynchronicity can be implemented with threads, as it is done in `CompletableFuture`).\r\n\r\nWith the [HttpClient](https://www.baeldung.com/java-9-http-client) introduced in Java 11 (as incubator module in 9), it&#39;s possible to perform asynchronous requests with a threadpool using `CompletableFuture`s in the &quot;standard&quot; way. If you&#39;re looking to minimize the thread count, you&#39;ll have to switch to reactive programming and use something like [Spring&#39;s WebClient](https://www.baeldung.com/spring-5-webclient) for the requests.","title":"CompletableFuture multi-threaded, single thread concurrent, or both?","body":"<p>As is explained in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">javadoc</a></p>\n<blockquote>\n<p>All async methods without an explicit Executor argument are performed\nusing the ForkJoinPool.commonPool() (unless it does not support a\nparallelism level of at least two, in which case, a new Thread is\ncreated to run each task).</p>\n</blockquote>\n<p>So a threadpool is used, either implicitly (unless you have a single core machine in which case the threads aren't pooled) or explicitly. In your case you would get to control the amount of threads used by using an explicit <code>Executor</code> (e.g. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a>) with the amount of threads you want (most likely a lot less than 1000).</p>\n<p>The calls cannot share a single thread (the calling thread), as Java doesn't have the <a href=\"https://stackoverflow.com/questions/16539245/java-equivalent-of-c-sharp-async-await\">capability</a> for what people these days understand by asynchronous due to the popular async/await paradigm (i.e. the fictional &quot;truly asynchronous&quot; term - synchronous vs. asynchronous is independent of threads, but asynchronicity can be implemented with threads, as it is done in <code>CompletableFuture</code>).</p>\n<p>With the <a href=\"https://www.baeldung.com/java-9-http-client\" rel=\"nofollow noreferrer\">HttpClient</a> introduced in Java 11 (as incubator module in 9), it's possible to perform asynchronous requests with a threadpool using <code>CompletableFuture</code>s in the &quot;standard&quot; way. If you're looking to minimize the thread count, you'll have to switch to reactive programming and use something like <a href=\"https://www.baeldung.com/spring-5-webclient\" rel=\"nofollow noreferrer\">Spring's WebClient</a> for the requests.</p>\n"},{"tags":[],"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1501532228,"creation_date":1501532228,"answer_id":45424581,"question_id":45424454,"body_markdown":"If you schedule your computation without specifying a thread-pool, the `fork-join` common pool would be used, otherwise you can specify your own `Executor` to `supplyAsync` and choose a size that fits your need.","title":"CompletableFuture multi-threaded, single thread concurrent, or both?","body":"<p>If you schedule your computation without specifying a thread-pool, the <code>fork-join</code> common pool would be used, otherwise you can specify your own <code>Executor</code> to <code>supplyAsync</code> and choose a size that fits your need.</p>\n"},{"tags":[],"owner":{"account_id":29707176,"reputation":1,"user_id":22767745,"display_name":"blabla-yy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697790729,"creation_date":1697790729,"answer_id":77329424,"question_id":45424454,"body_markdown":"As mentioned above, if you need a single thread to execute all asynchronous tasks, you need to use Executors.newSingleThreadExecutor() and specify this Executor instance in all required Executors.\r\nIf you don&#39;t want to create a thread, but use the current thread, you can try my repository https://github.com/blabla-yy/CurrentThreadExecutor. There is a demo of HttpClient in the README. All request processing is executed on the main thread, and no threads are created during operation.","title":"CompletableFuture multi-threaded, single thread concurrent, or both?","body":"<p>As mentioned above, if you need a single thread to execute all asynchronous tasks, you need to use Executors.newSingleThreadExecutor() and specify this Executor instance in all required Executors.\nIf you don't want to create a thread, but use the current thread, you can try my repository <a href=\"https://github.com/blabla-yy/CurrentThreadExecutor\" rel=\"nofollow noreferrer\">https://github.com/blabla-yy/CurrentThreadExecutor</a>. There is a demo of HttpClient in the README. All request processing is executed on the main thread, and no threads are created during operation.</p>\n"}],"owner":{"account_id":2211363,"reputation":1015,"user_id":2804747,"accept_rate":86,"display_name":"lorenzocastillo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7655,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":45424567,"answer_count":3,"score":11,"last_activity_date":1697790729,"creation_date":1501531642,"question_id":45424454,"body_markdown":"I just started looking into Java&#39;s [CompletableFuture][1] and a little bit confused on whether this is truly asynchronous (i.e running on one thread concurrently) or spanning multiple threads (Parallel). \r\n\r\nFor example, suppose I&#39;d like to make 1000 different service calls. Suppose further that each service call can be made asynchronously. When using CompletableFuture, will the JVM make 1000 separate threads (assuming the JVM allows for this many threads), or execute all of these requests in one thread? Or is it doing a bit of both? Using some threads to execute those requests asynchronously?\r\n\r\nWhat I want to do is something like this (in Python):\r\nhttps://pawelmhm.github.io/asyncio/python/aiohttp/2016/04/22/asyncio-aiohttp.html\n\n**is there a way to execute multiple requests/operations on the same thread in Java asynchronously?**\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html","title":"CompletableFuture multi-threaded, single thread concurrent, or both?","body":"<p>I just started looking into Java's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html\" rel=\"noreferrer\">CompletableFuture</a> and a little bit confused on whether this is truly asynchronous (i.e running on one thread concurrently) or spanning multiple threads (Parallel). </p>\n\n<p>For example, suppose I'd like to make 1000 different service calls. Suppose further that each service call can be made asynchronously. When using CompletableFuture, will the JVM make 1000 separate threads (assuming the JVM allows for this many threads), or execute all of these requests in one thread? Or is it doing a bit of both? Using some threads to execute those requests asynchronously?</p>\n\n<p>What I want to do is something like this (in Python):\n<a href=\"https://pawelmhm.github.io/asyncio/python/aiohttp/2016/04/22/asyncio-aiohttp.html\" rel=\"noreferrer\">https://pawelmhm.github.io/asyncio/python/aiohttp/2016/04/22/asyncio-aiohttp.html</a></p>\n\n<p><strong>is there a way to execute multiple requests/operations on the same thread in Java asynchronously?</strong></p>\n"},{"tags":["java","scheduled-tasks","windows-task-scheduler"],"comments":[{"owner":{"account_id":7679118,"reputation":6230,"user_id":5818889,"accept_rate":83,"display_name":"glee8e"},"score":0,"creation_date":1481109636,"post_id":41015796,"comment_id":69239387,"body_markdown":"Start all those UI-ed apps by creating a new run once and immediately task. This should do the job.","body":"Start all those UI-ed apps by creating a new run once and immediately task. This should do the job."},{"owner":{"account_id":483595,"reputation":7038,"user_id":898763,"accept_rate":71,"display_name":"amaidment"},"score":0,"creation_date":1481115220,"post_id":41015796,"comment_id":69242996,"body_markdown":"@glee8e - could you elaborate on what you are suggesting? You seem pretty confident that you&#39;re recommending a viable solution, but it&#39;s not clear to me what you are suggesting or how it solves the problem.","body":"@glee8e - could you elaborate on what you are suggesting? You seem pretty confident that you&#39;re recommending a viable solution, but it&#39;s not clear to me what you are suggesting or how it solves the problem."},{"owner":{"account_id":7679118,"reputation":6230,"user_id":5818889,"accept_rate":83,"display_name":"glee8e"},"score":0,"creation_date":1481248575,"post_id":41015796,"comment_id":69311298,"body_markdown":"I had mistaken some: I believe UI-ed apps are not to be started if user is logout. So I give the solution: create a task that will start processes in interactive mode and be run a few seconds later. But if you want UI-ed apps to be started even when user is logged out, well, I have no idea for that. My apologies.","body":"I had mistaken some: I believe UI-ed apps are not to be started if user is logout. So I give the solution: create a task that will start processes in interactive mode and be run a few seconds later. But if you want UI-ed apps to be started even when user is logged out, well, I have no idea for that. My apologies."}],"answers":[{"tags":[],"owner":{"account_id":483595,"reputation":7038,"user_id":898763,"accept_rate":71,"display_name":"amaidment"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1697790488,"creation_date":1483463689,"answer_id":41448850,"question_id":41015796,"body_markdown":"The workaround I found was to stop using Task Scheduler, and create a script to start my application and add a shortcut to that script in the Start Menu &gt; Programs &gt; Startup folder.\r\n\r\nCredit to this article on [HowToGeek][1]:\r\n\r\n&gt; On Windows 7 and earlier versions of Windows, the Start menu contained a “Startup” folder to make this easy.\r\n&gt;\r\n&gt; This folder is no longer as easily accessible on Windows 8, 8.1, and 10, but it’s still accessible. To access it, press Windows Key + R, type “shell:startup” into the Run dialog, and press Enter.\r\n&gt;\r\n&gt; Shortcuts you add to the “shell:startup” folder will only launch when you log in with your user account. If you’d like a shortcut to launch itself whenever any user logs in, type “shell:common startup” into the Run dialog instead.\r\n\r\nSince I want my application to start on system startup, rather than user login, I used the “shell:common startup” link.\r\n\r\nApplications started in this way - or in my case, applications started by applications started in this way - are visible and/or interactive via their UIs.\r\n\r\n[1]: http://www.howtogeek.com/228467/how-to-make-a-program-run-at-startup-on-any-computer/","title":"Running visible applications, using Java ProcessBuilder, from a process started by TaskScheduler","body":"<p>The workaround I found was to stop using Task Scheduler, and create a script to start my application and add a shortcut to that script in the Start Menu &gt; Programs &gt; Startup folder.</p>\n<p>Credit to this article on <a href=\"http://www.howtogeek.com/228467/how-to-make-a-program-run-at-startup-on-any-computer/\" rel=\"nofollow noreferrer\">HowToGeek</a>:</p>\n<blockquote>\n<p>On Windows 7 and earlier versions of Windows, the Start menu contained a “Startup” folder to make this easy.</p>\n<p>This folder is no longer as easily accessible on Windows 8, 8.1, and 10, but it’s still accessible. To access it, press Windows Key + R, type “shell:startup” into the Run dialog, and press Enter.</p>\n<p>Shortcuts you add to the “shell:startup” folder will only launch when you log in with your user account. If you’d like a shortcut to launch itself whenever any user logs in, type “shell:common startup” into the Run dialog instead.</p>\n</blockquote>\n<p>Since I want my application to start on system startup, rather than user login, I used the “shell:common startup” link.</p>\n<p>Applications started in this way - or in my case, applications started by applications started in this way - are visible and/or interactive via their UIs.</p>\n"}],"owner":{"account_id":483595,"reputation":7038,"user_id":898763,"accept_rate":71,"display_name":"amaidment"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5124,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":41448850,"answer_count":1,"score":6,"last_activity_date":1697790488,"creation_date":1481108705,"question_id":41015796,"body_markdown":"When starting tasks via Task Scheduler in recent versions of Windows, if the task is &quot;run whether user is logged on or not&quot;, then the task will not run interactively - i.e. it will not start a UI.\r\n\r\nFor reference, this is according to [Microsoft][1], and has been highlighted in this [SuperUser question][2] and this [StackOverflow question][3]:\r\n\r\n&gt; You can specify that a task should run even if the account under which the task is scheduled to run is not logged on when the task is triggered. To do this, select the radio button labeled Run whether user is logged on or not . If this radio button is selected, tasks will not run interactively. To make a task run interactively, select the Run only when user is logged on radio button.\r\n\r\nHowever, my problem is derivative of this.\r\n\r\n - The task started by TaskScheduler is a Java client application which\r\n   can be instructed to run processes - these are run via ProcessBuilder\r\n   in the client application. As such, it is okay that this client\r\n   application is hidden / does not start a UI - indeed, there is no UI.\r\n   \r\n - However, if the client application is started via TaskScheduler to &#39;run whether user is logged on or not&#39; as above, then any processes that are started by ProcessBuilder in the client application are also unable to run interactively / unable to show a UI. This is a problem, as some of the processes started by the client are UI applications.\r\n\r\nI&#39;m not sure why this would be the case, but really I&#39;m trying to work out if there is a work around - e.g. some environment variables or properties that could be added to get a visible process started by the (invisible) client.\r\n\r\nAny thoughts?\r\n\r\n  [1]: https://technet.microsoft.com/en-us/library/cc722152.aspx\r\n  [2]: https://superuser.com/questions/78359/why-is-windows-7-scheduled-task-running-hiddenhttp://\r\n  [3]: https://stackoverflow.com/questions/39736810/task-scheduler-cant-show-gui-of-the-application-after-logout-and-login-run-whehttp://","title":"Running visible applications, using Java ProcessBuilder, from a process started by TaskScheduler","body":"<p>When starting tasks via Task Scheduler in recent versions of Windows, if the task is &quot;run whether user is logged on or not&quot;, then the task will not run interactively - i.e. it will not start a UI.</p>\n<p>For reference, this is according to <a href=\"https://technet.microsoft.com/en-us/library/cc722152.aspx\" rel=\"nofollow noreferrer\">Microsoft</a>, and has been highlighted in this <a href=\"https://superuser.com/questions/78359/why-is-windows-7-scheduled-task-running-hiddenhttp://\">SuperUser question</a> and this <a href=\"https://stackoverflow.com/questions/39736810/task-scheduler-cant-show-gui-of-the-application-after-logout-and-login-run-whehttp://\">StackOverflow question</a>:</p>\n<blockquote>\n<p>You can specify that a task should run even if the account under which the task is scheduled to run is not logged on when the task is triggered. To do this, select the radio button labeled Run whether user is logged on or not . If this radio button is selected, tasks will not run interactively. To make a task run interactively, select the Run only when user is logged on radio button.</p>\n</blockquote>\n<p>However, my problem is derivative of this.</p>\n<ul>\n<li><p>The task started by TaskScheduler is a Java client application which\ncan be instructed to run processes - these are run via ProcessBuilder\nin the client application. As such, it is okay that this client\napplication is hidden / does not start a UI - indeed, there is no UI.</p>\n</li>\n<li><p>However, if the client application is started via TaskScheduler to 'run whether user is logged on or not' as above, then any processes that are started by ProcessBuilder in the client application are also unable to run interactively / unable to show a UI. This is a problem, as some of the processes started by the client are UI applications.</p>\n</li>\n</ul>\n<p>I'm not sure why this would be the case, but really I'm trying to work out if there is a work around - e.g. some environment variables or properties that could be added to get a visible process started by the (invisible) client.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","caching","infinispan"],"comments":[{"owner":{"account_id":20161220,"reputation":25,"user_id":14786231,"display_name":"Tolstov Maxim"},"score":0,"creation_date":1697696826,"post_id":77318303,"comment_id":136312791,"body_markdown":"The reason is described here https://stackoverflow.com/questions/77318303/infinispan-cache-entities-are-lost-in-production","body":"The reason is described here <a href=\"https://stackoverflow.com/questions/77318303/infinispan-cache-entities-are-lost-in-production\" title=\"infinispan cache entities are lost in production\">stackoverflow.com/questions/77318303/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":20161220,"reputation":25,"user_id":14786231,"display_name":"Tolstov Maxim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697789879,"creation_date":1697789879,"answer_id":77329341,"question_id":77318303,"body_markdown":"Solution is to use\r\n\r\n    Cache#putForExternalRead\r\n\r\nto prevent cache on other nodes from invalidation after `Cache#put`","title":"Infinispan cache entities are lost in production","body":"<p>Solution is to use</p>\n<pre><code>Cache#putForExternalRead\n</code></pre>\n<p>to prevent cache on other nodes from invalidation after <code>Cache#put</code></p>\n"}],"owner":{"account_id":20161220,"reputation":25,"user_id":14786231,"display_name":"Tolstov Maxim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":77329341,"answer_count":1,"score":-2,"last_activity_date":1697789879,"creation_date":1697648495,"question_id":77318303,"body_markdown":"We have infinispan cache with config (CustomCacheMaxCount is 100000):\r\n    `new ConfigurationBuilder().clustering()\r\n                .partitionHandling().mergePolicy(MergePolicy.REMOVE_ALL)\r\n                .clustering()\r\n                .cacheMode(CacheMode.INVALIDATION_SYNC)\r\n                .statistics().enable()\r\n                .memory()\r\n                .maxCount(cacheSettingsHolder.getCustomCacheMaxCount())\r\n                .whenFull(EvictionStrategy.REMOVE)`\r\nAfter the last redeployment with some updates we noticed too slow responses. We found out that infinispan does not work properly. \r\nWe have no evictions and cluster partitioning.\r\n[![enter image description here](https://i.stack.imgur.com/yxCLT.png)](https://i.stack.imgur.com/yxCLT.png)\r\nBut we have more misses than hits\r\n[![enter image description here](https://i.stack.imgur.com/7DYHd.png)](https://i.stack.imgur.com/7DYHd.png)\r\nAnd cache size is changing. Growing and decreasing, although it shouldn&#39;t decrease because there wasn&#39;t any eviction. While L2 cache works just fine. \r\n[![enter image description here](https://i.stack.imgur.com/iCIgI.png)](https://i.stack.imgur.com/iCIgI.png)\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAny ideas how to find the reason of this behavior and stop this cache from losing entries?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ao47Q.png","title":"Infinispan cache entities are lost in production","body":"<p>We have infinispan cache with config (CustomCacheMaxCount is 100000):\n<code>new ConfigurationBuilder().clustering() .partitionHandling().mergePolicy(MergePolicy.REMOVE_ALL) .clustering() .cacheMode(CacheMode.INVALIDATION_SYNC) .statistics().enable() .memory() .maxCount(cacheSettingsHolder.getCustomCacheMaxCount()) .whenFull(EvictionStrategy.REMOVE)</code>\nAfter the last redeployment with some updates we noticed too slow responses. We found out that infinispan does not work properly.\nWe have no evictions and cluster partitioning.\n<a href=\"https://i.stack.imgur.com/yxCLT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yxCLT.png\" alt=\"enter image description here\" /></a>\nBut we have more misses than hits\n<a href=\"https://i.stack.imgur.com/7DYHd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7DYHd.png\" alt=\"enter image description here\" /></a>\nAnd cache size is changing. Growing and decreasing, although it shouldn't decrease because there wasn't any eviction. While L2 cache works just fine.\n<a href=\"https://i.stack.imgur.com/iCIgI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iCIgI.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/ao47Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ao47Q.png\" alt=\"enter image description here\" /></a></p>\n<p>Any ideas how to find the reason of this behavior and stop this cache from losing entries?</p>\n"},{"tags":["java","android","android-studio","mp3"],"comments":[{"owner":{"account_id":3359942,"reputation":4710,"user_id":2821954,"display_name":"Andrew T."},"score":0,"creation_date":1697789638,"post_id":77328949,"comment_id":136326426,"body_markdown":"Could you provide the code that you wrote?","body":"Could you provide the code that you wrote?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1697798787,"post_id":77328949,"comment_id":136328086,"body_markdown":"&quot;But I have set the correct file path and everything&quot; -- there is no &quot;file path&quot; to a app&#39;s resource on a phone. You might consider editing your question to include a [mcve].","body":"&quot;But I have set the correct file path and everything&quot; -- there is no &quot;file path&quot; to a app&#39;s resource on a phone. You might consider editing your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":24845353,"reputation":1,"user_id":18722939,"display_name":"Shashank2002"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697789601,"creation_date":1697785784,"question_id":77328949,"body_markdown":"So, I am trying to do an ASR by sending a .mp3 file to the API provided. I am running normally in a Python script and it is working quite fine and giving me the perfect response. But now I am trying to do the same in Android Studio and using Java for that. I have created a `raw` directory in the `res` directory of my project. So this is how the .mp3 file is saved - `res/raw/yes.mp3` - `yes.mp3` is the name of the file. But then, after I write the code, I get this output: \r\n\r\n&gt; {&quot;reason&quot;:&quot;&#39;NoneType&#39; object has no attribute &#39;filename&#39;&quot;, &quot;status&quot;: &quot;failure&quot;}\r\n\r\nBut I have set the correct file path and everything. So, I think there might be some error in how I am associating the .mp3 file. I have associated it with Text, and Archive, and ignored it, but every time the same error. So, with what do I associate the .mp3 file?","title":"What file type do we need to associate a .wav or .mp3 file in Android Studio?","body":"<p>So, I am trying to do an ASR by sending a .mp3 file to the API provided. I am running normally in a Python script and it is working quite fine and giving me the perfect response. But now I am trying to do the same in Android Studio and using Java for that. I have created a <code>raw</code> directory in the <code>res</code> directory of my project. So this is how the .mp3 file is saved - <code>res/raw/yes.mp3</code> - <code>yes.mp3</code> is the name of the file. But then, after I write the code, I get this output:</p>\n<blockquote>\n<p>{&quot;reason&quot;:&quot;'NoneType' object has no attribute 'filename'&quot;, &quot;status&quot;: &quot;failure&quot;}</p>\n</blockquote>\n<p>But I have set the correct file path and everything. So, I think there might be some error in how I am associating the .mp3 file. I have associated it with Text, and Archive, and ignored it, but every time the same error. So, with what do I associate the .mp3 file?</p>\n"},{"tags":["java","stack-overflow","pdfbox"],"comments":[{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1697548555,"post_id":77309255,"comment_id":136291630,"body_markdown":"That stack trace doesn&#39;t look like a full track. Can you provide the full stack trace of the error and the error description from the trace?","body":"That stack trace doesn&#39;t look like a full track. Can you provide the full stack trace of the error and the error description from the trace?"},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697549023,"post_id":77309255,"comment_id":136291752,"body_markdown":"@M.Rizzo I&#39;ve added the full stack, hope that helps.","body":"@M.Rizzo I&#39;ve added the full stack, hope that helps."},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1697550681,"post_id":77309255,"comment_id":136292109,"body_markdown":"What version of PDFBox are you currently using?","body":"What version of PDFBox are you currently using?"},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697553480,"post_id":77309255,"comment_id":136292724,"body_markdown":"@M.Rizzo I&#39;m using org.apache.pdfbox version 3.0.0","body":"@M.Rizzo I&#39;m using org.apache.pdfbox version 3.0.0"},{"owner":{"account_id":8148968,"reputation":1793,"user_id":6136697,"display_name":"M. Rizzo"},"score":0,"creation_date":1697563310,"post_id":77309255,"comment_id":136294613,"body_markdown":"I thought this may an issue with the COSDictionary and handling page recursion between parent and children, but that issue was addressed in 3.0.0.  I&#39;m not sure what the cause could be here.","body":"I thought this may an issue with the COSDictionary and handling page recursion between parent and children, but that issue was addressed in 3.0.0.  I&#39;m not sure what the cause could be here."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1697615575,"post_id":77309255,"comment_id":136300616,"body_markdown":"Please share the source file","body":"Please share the source file"},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697618417,"post_id":77309255,"comment_id":136301155,"body_markdown":"@TilmanHausherr I solved the issue by avoiding the step of copying pages from the original document into a new `PDDocument`. Instead, I&#39;m directly using the `PDDocument` I&#39;ve loaded from my file, and this works perfectly fine. But now there is an issue with reusing the `PDDocument`, I would need an approach to clone it and then make the changes.","body":"@TilmanHausherr I solved the issue by avoiding the step of copying pages from the original document into a new <code>PDDocument</code>. Instead, I&#39;m directly using the <code>PDDocument</code> I&#39;ve loaded from my file, and this works perfectly fine. But now there is an issue with reusing the <code>PDDocument</code>, I would need an approach to clone it and then make the changes."},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697619896,"post_id":77309255,"comment_id":136301462,"body_markdown":"@TilmanHausherr I&#39;ve provided my solution, but the approach is not very straigh forward. Hope you have some suggestions for improvment. Thanks in advance.","body":"@TilmanHausherr I&#39;ve provided my solution, but the approach is not very straigh forward. Hope you have some suggestions for improvment. Thanks in advance."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1697630936,"post_id":77309255,"comment_id":136303598,"body_markdown":"I don&#39;t see a problem in your code. Btw there&#39;s a nasty bug in 3.0.0, call `targetDoc.getDocument().setHighestXRefObjectNumber(sourceDoc.getDocument().getHighestXRefObjectNumber());` or save with the uncompressed option. https://issues.apache.org/jira/browse/PDFBOX-5696 Also make sure not to close the source document before you&#39;ve saved all the destination documents.","body":"I don&#39;t see a problem in your code. Btw there&#39;s a nasty bug in 3.0.0, call <code>targetDoc.getDocument().setHighestXRefObjectNumber(sourceDoc&zwnj;&#8203;.getDocument().getHi&zwnj;&#8203;ghestXRefObjectNumbe&zwnj;&#8203;r());</code> or save with the uncompressed option. <a href=\"https://issues.apache.org/jira/browse/PDFBOX-5696\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/PDFBOX-5696</a> Also make sure not to close the source document before you&#39;ve saved all the destination documents."},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697636105,"post_id":77309255,"comment_id":136304801,"body_markdown":"@TilmanHausherr Thank you for your assistance! I&#39;m pleased to inform you that it&#39;s working as expected with PDFBox v2.0.29.","body":"@TilmanHausherr Thank you for your assistance! I&#39;m pleased to inform you that it&#39;s working as expected with PDFBox v2.0.29."},{"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"score":0,"creation_date":1697637573,"post_id":77309255,"comment_id":136305135,"body_markdown":"@TilmanHausherr The resolved issue suggests it should be fixed in v3.0.1, but there&#39;s no stable release available for maven at the moment. I really need some functionality from v3. Do you have any information on a release date or any temporary workarounds?","body":"@TilmanHausherr The resolved issue suggests it should be fixed in v3.0.1, but there&#39;s no stable release available for maven at the moment. I really need some functionality from v3. Do you have any information on a release date or any temporary workarounds?"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1697637735,"post_id":77309255,"comment_id":136305179,"body_markdown":"Please don&#39;t post solutions in a **question**, post them as an **answer**. Also make sure your question actually asks a question.","body":"Please don&#39;t post solutions in a <b>question</b>, post them as an <b>answer</b>. Also make sure your question actually asks a question."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1697696221,"post_id":77309255,"comment_id":136312704,"body_markdown":"You can try a snapshot: https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.1-SNAPSHOT/ However the fixed issue wasn&#39;t about a stack overflow.","body":"You can try a snapshot: <a href=\"https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.1-SNAPSHOT/\" rel=\"nofollow noreferrer\">repository.apache.org/content/groups/snapshots/org/apache/&hellip;</a> However the fixed issue wasn&#39;t about a stack overflow."}],"answers":[{"tags":[],"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697789414,"creation_date":1697638243,"answer_id":77317119,"question_id":77309255,"body_markdown":"# Solution 1\r\nThe problem seems to be on `pdfbox`&#39;s side so here just a workaround for version 3.0.0\r\n\r\n```java\r\nprivate PDDocument split(Range range) {\r\n\tPDDocument pdDocument = new PDDocument();\r\n\t\r\n\tfor (PDPage pdPage : pdfModel.getPDDocument().getPages()) {\r\n\t\tpdDocument.addPage(pdPage);\r\n\t}\r\n\t\r\n    int fromPage = range.getFrom();\r\n    int toPage = range.getTo();\r\n    \r\n    int pageCount = pdDocument.getNumberOfPages();\r\n\r\n    if (fromPage &gt; 0 &amp;&amp; toPage &gt; 0 &amp;&amp; pageCount &gt;= fromPage &amp;&amp; pageCount &lt; toPage) {\r\n        logger.warning(this, &quot;Invalid page range for splitting.&quot;);\r\n        return null;\r\n    }\r\n    \r\n    System.out.println(&quot;Page count: &quot; + pdDocument.getNumberOfPages());\r\n            \r\n    for (int n = pageCount - 1; n &gt;= toPage; n--) {\r\n        pdDocument.removePage(n);\r\n    }\r\n    \r\n    for (int n = fromPage -2; n &gt;= 0; n--) {\r\n        pdDocument.removePage(n);\r\n    }\r\n\t\r\n\treturn pdDocument;\r\n}\r\n```\r\n\r\n# Solution 2\r\n\r\nUse `org.apache.pdfbox` version &gt; `3.0.0` or a later version `3.0.1` and above hopfully [this issue](https://issues.apache.org/jira/browse/PDFBOX-5696) resolves the bug.","title":"PDFBox v3.0.0 StackOverflowError when splitting PDF file","body":"<h1>Solution 1</h1>\n<p>The problem seems to be on <code>pdfbox</code>'s side so here just a workaround for version 3.0.0</p>\n<pre class=\"lang-java prettyprint-override\"><code>private PDDocument split(Range range) {\n    PDDocument pdDocument = new PDDocument();\n    \n    for (PDPage pdPage : pdfModel.getPDDocument().getPages()) {\n        pdDocument.addPage(pdPage);\n    }\n    \n    int fromPage = range.getFrom();\n    int toPage = range.getTo();\n    \n    int pageCount = pdDocument.getNumberOfPages();\n\n    if (fromPage &gt; 0 &amp;&amp; toPage &gt; 0 &amp;&amp; pageCount &gt;= fromPage &amp;&amp; pageCount &lt; toPage) {\n        logger.warning(this, &quot;Invalid page range for splitting.&quot;);\n        return null;\n    }\n    \n    System.out.println(&quot;Page count: &quot; + pdDocument.getNumberOfPages());\n            \n    for (int n = pageCount - 1; n &gt;= toPage; n--) {\n        pdDocument.removePage(n);\n    }\n    \n    for (int n = fromPage -2; n &gt;= 0; n--) {\n        pdDocument.removePage(n);\n    }\n    \n    return pdDocument;\n}\n</code></pre>\n<h1>Solution 2</h1>\n<p>Use <code>org.apache.pdfbox</code> version &gt; <code>3.0.0</code> or a later version <code>3.0.1</code> and above hopfully <a href=\"https://issues.apache.org/jira/browse/PDFBOX-5696\" rel=\"nofollow noreferrer\">this issue</a> resolves the bug.</p>\n"}],"owner":{"account_id":28267143,"reputation":89,"user_id":21610914,"display_name":"malz"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77317119,"answer_count":1,"score":0,"last_activity_date":1697789414,"creation_date":1697547984,"question_id":77309255,"body_markdown":"I have a Java class `Split` that is responsible for splitting PDF files into multiple parts based on page ranges. The class uses PDFBox for this purpose. Additionally, I have a `PDFModel` class to manage the resulting PDF files and a `Range` class to specify page ranges.\r\n\r\nHere&#39;s the `Split` class:\r\n\r\n```java\r\npublic class Split{\r\n    private Logger logger;\r\n    private File inputFile;\r\n    private PDFModel pdfModel;\r\n    private File outputDirectory;\r\n\r\n    public Split(Logger logger, File inputFile, File outputDirectory) {\r\n        // Constructor logic...\r\n    }\r\n\r\n    /**\r\n\t * Splits a PDF file based on a list of page ranges and saves the resulting partial PDFs.\r\n\t *\r\n\t * @param ranges A list of page ranges specifying which pages to split from the input PDF.\r\n\t * @return An ArrayList of PDFModel objects representing the resulting partial PDFs.\r\n\t */\r\n\tpublic ArrayList&lt;PDFModel&gt; splitByRanges(ArrayList&lt;Range&gt; ranges){\r\n\t\tArrayList&lt;PDFModel&gt; results = new ArrayList&lt;&gt;();\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; ranges.size(); i++) {\r\n\t\t\tPDDocument partial = split(ranges.get(i));\r\n\t\t\t\r\n\t\t\tif(partial == null) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tFile outputFile = new File(Paths.get(outputDirectory.getAbsolutePath(), &quot;file_&quot; + i + &quot;.pdf&quot;).toString());\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tpartial.save(outputFile);\r\n\t\t\t\tresults.add(new PDFModel(outputFile, partial));\r\n\t\t\t\t\r\n\t\t        logger.info(this, &quot;Successfully splitted &#39;&quot; + inputFile + &quot;&#39; from page &quot; + ranges.get(i).getFrom() + &quot; to &quot; + ranges.get(i).getTo() + &quot; into &#39;&quot; + outputFile.getAbsolutePath() + &quot;&#39;&quot;);  \r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate PDDocument split(Range range) {\r\n        PDDocument result = new PDDocument();\r\n\r\n        int fromPage = range.getFrom();\r\n        int toPage = range.getTo();\r\n        \r\n\t\t // Get the PDPageTree from the PDDocument\r\n        PDPageTree pdPageTree = pdfModel.getPDDocument().getPages();\r\n        \r\n        if (fromPage &lt;= 0 || toPage &lt;= 0 || fromPage &gt; toPage || toPage &gt; pdPageTree.getCount()) {\r\n            logger.warning(this, &quot;Invalid page range for splitting.&quot;);\r\n            return null;\r\n        }\r\n        \r\n        for (int i = range.getFrom() -1; i &lt; range.getTo(); i++) {\r\n        \tresult.addPage(pdPageTree.get(i));\r\n\t\t}\r\n\t\t\r\n\t\treturn result;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe `org.apache.pdfbox.multipdf.Splitter` does the same but doesn&#39;t work either.\r\n\r\n```java\r\nprivate PDDocument split(Range range) {\r\n\tint fromPage = range.getFrom();\r\n\tint toPage = range.getTo() ;\r\n\r\n\tPDDocument pddocument = pdfModel.getPDDocument();\r\n\r\n\tSplitter splitter = new Splitter();\r\n\r\n\tsplitter.setStartPage(fromPage);\r\n\tsplitter.setEndPage(toPage);\r\n\tsplitter.setSplitAtPage(toPage - fromPage +1 );\r\n\r\n\tList&lt;PDDocument&gt; lst = null;\r\n\t\r\n\ttry {\r\n\t\tlst = splitter.split(pddocument);\r\n\t} catch (IOException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\n\treturn lst.get(0);\r\n}\r\n```\r\n\r\nThe `PDFModel` class:\r\n```java\r\npublic class PDFModel {\r\n    private File file;\r\n    private PDDocument pdDocument;\r\n    private ArrayList&lt;PDFImage&gt; images;\r\n    private ArrayList&lt;String&gt; pages;\r\n\r\n    public PDFModel(File file, PDDocument pdDocument) {\r\n        // Constructor logic...\r\n    }\r\n}\r\n```\r\n\r\nThe `Range` class:\r\n```java\r\npublic class Range {\r\n    private int from;\r\n    private int to;\r\n\r\n    public Range(int from, int to) {\r\n        // Constructor logic...\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m trying to use this `Split` class to split a PDF file into multiple parts using the following code:\r\n\r\nThis throws an error:\r\n```java\r\nSplitter splitter = new Splitter(logger, inputFile, outputDirectory);\r\nsplitter.splitByRanges(new ArrayList&lt;Range&gt;(Arrays.asList(new Range(1, 7), new Range(8, 9), new Range(10, 11)));\r\n```\r\n\r\nAnd this works perfectly fine (not for `org.apache.pdfbox.multipdf.Splitter`):\r\n```java\r\nSplitter splitter = new Splitter(logger, inputFile, outputDirectory);\r\nsplitter.splitByRanges(new ArrayList&lt;Range&gt;(Arrays.asList(new Range(1, 8), new Range(10, 12), new Range(14, 16)));\r\n```\r\n\r\nHowever, I&#39;m encountering the following StackOverflowError:\r\n```\r\nException in thread &quot;main&quot; java.lang.StackOverflowError\r\n\tat java.base/java.util.HashMap.tableSizeFor(HashMap.java:378)\r\n\tat java.base/java.util.HashMap.&lt;init&gt;(HashMap.java:455)\r\n\tat java.base/java.util.LinkedHashMap.&lt;init&gt;(LinkedHashMap.java:439)\r\n\tat java.base/java.util.HashSet.&lt;init&gt;(HashSet.java:171)\r\n\tat java.base/java.util.LinkedHashSet.&lt;init&gt;(LinkedHashSet.java:167)\r\n\tat org.apache.pdfbox.util.SmallMap.entrySet(SmallMap.java:384)\r\n\tat org.apache.pdfbox.cos.COSDictionary.entrySet(COSDictionary.java:1232)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSDictionary(COSWriterObjectStream.java:338)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:232)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSDictionary(COSWriterObjectStream.java:343)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:232)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSArray(COSWriterObjectStream.java:321)\r\n\tat org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:228)\r\n```\r\n\r\n## Question \r\nHow can I resolve this StackOverflow error? ","title":"PDFBox v3.0.0 StackOverflowError when splitting PDF file","body":"<p>I have a Java class <code>Split</code> that is responsible for splitting PDF files into multiple parts based on page ranges. The class uses PDFBox for this purpose. Additionally, I have a <code>PDFModel</code> class to manage the resulting PDF files and a <code>Range</code> class to specify page ranges.</p>\n<p>Here's the <code>Split</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Split{\n    private Logger logger;\n    private File inputFile;\n    private PDFModel pdfModel;\n    private File outputDirectory;\n\n    public Split(Logger logger, File inputFile, File outputDirectory) {\n        // Constructor logic...\n    }\n\n    /**\n     * Splits a PDF file based on a list of page ranges and saves the resulting partial PDFs.\n     *\n     * @param ranges A list of page ranges specifying which pages to split from the input PDF.\n     * @return An ArrayList of PDFModel objects representing the resulting partial PDFs.\n     */\n    public ArrayList&lt;PDFModel&gt; splitByRanges(ArrayList&lt;Range&gt; ranges){\n        ArrayList&lt;PDFModel&gt; results = new ArrayList&lt;&gt;();\n        \n        for (int i = 0; i &lt; ranges.size(); i++) {\n            PDDocument partial = split(ranges.get(i));\n            \n            if(partial == null) {\n                continue;\n            }\n            \n            File outputFile = new File(Paths.get(outputDirectory.getAbsolutePath(), &quot;file_&quot; + i + &quot;.pdf&quot;).toString());\n            \n            try {\n                partial.save(outputFile);\n                results.add(new PDFModel(outputFile, partial));\n                \n                logger.info(this, &quot;Successfully splitted '&quot; + inputFile + &quot;' from page &quot; + ranges.get(i).getFrom() + &quot; to &quot; + ranges.get(i).getTo() + &quot; into '&quot; + outputFile.getAbsolutePath() + &quot;'&quot;);  \n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        \n        return results;\n    }\n\n    private PDDocument split(Range range) {\n        PDDocument result = new PDDocument();\n\n        int fromPage = range.getFrom();\n        int toPage = range.getTo();\n        \n         // Get the PDPageTree from the PDDocument\n        PDPageTree pdPageTree = pdfModel.getPDDocument().getPages();\n        \n        if (fromPage &lt;= 0 || toPage &lt;= 0 || fromPage &gt; toPage || toPage &gt; pdPageTree.getCount()) {\n            logger.warning(this, &quot;Invalid page range for splitting.&quot;);\n            return null;\n        }\n        \n        for (int i = range.getFrom() -1; i &lt; range.getTo(); i++) {\n            result.addPage(pdPageTree.get(i));\n        }\n        \n        return result;\n    }\n\n}\n</code></pre>\n<p>The <code>org.apache.pdfbox.multipdf.Splitter</code> does the same but doesn't work either.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private PDDocument split(Range range) {\n    int fromPage = range.getFrom();\n    int toPage = range.getTo() ;\n\n    PDDocument pddocument = pdfModel.getPDDocument();\n\n    Splitter splitter = new Splitter();\n\n    splitter.setStartPage(fromPage);\n    splitter.setEndPage(toPage);\n    splitter.setSplitAtPage(toPage - fromPage +1 );\n\n    List&lt;PDDocument&gt; lst = null;\n    \n    try {\n        lst = splitter.split(pddocument);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return lst.get(0);\n}\n</code></pre>\n<p>The <code>PDFModel</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PDFModel {\n    private File file;\n    private PDDocument pdDocument;\n    private ArrayList&lt;PDFImage&gt; images;\n    private ArrayList&lt;String&gt; pages;\n\n    public PDFModel(File file, PDDocument pdDocument) {\n        // Constructor logic...\n    }\n}\n</code></pre>\n<p>The <code>Range</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Range {\n    private int from;\n    private int to;\n\n    public Range(int from, int to) {\n        // Constructor logic...\n    }\n}\n</code></pre>\n<p>I'm trying to use this <code>Split</code> class to split a PDF file into multiple parts using the following code:</p>\n<p>This throws an error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Splitter splitter = new Splitter(logger, inputFile, outputDirectory);\nsplitter.splitByRanges(new ArrayList&lt;Range&gt;(Arrays.asList(new Range(1, 7), new Range(8, 9), new Range(10, 11)));\n</code></pre>\n<p>And this works perfectly fine (not for <code>org.apache.pdfbox.multipdf.Splitter</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Splitter splitter = new Splitter(logger, inputFile, outputDirectory);\nsplitter.splitByRanges(new ArrayList&lt;Range&gt;(Arrays.asList(new Range(1, 8), new Range(10, 12), new Range(14, 16)));\n</code></pre>\n<p>However, I'm encountering the following StackOverflowError:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError\n    at java.base/java.util.HashMap.tableSizeFor(HashMap.java:378)\n    at java.base/java.util.HashMap.&lt;init&gt;(HashMap.java:455)\n    at java.base/java.util.LinkedHashMap.&lt;init&gt;(LinkedHashMap.java:439)\n    at java.base/java.util.HashSet.&lt;init&gt;(HashSet.java:171)\n    at java.base/java.util.LinkedHashSet.&lt;init&gt;(LinkedHashSet.java:167)\n    at org.apache.pdfbox.util.SmallMap.entrySet(SmallMap.java:384)\n    at org.apache.pdfbox.cos.COSDictionary.entrySet(COSDictionary.java:1232)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSDictionary(COSWriterObjectStream.java:338)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:232)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSDictionary(COSWriterObjectStream.java:343)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:232)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeCOSArray(COSWriterObjectStream.java:321)\n    at org.apache.pdfbox.pdfwriter.compress.COSWriterObjectStream.writeObject(COSWriterObjectStream.java:228)\n</code></pre>\n<h2>Question</h2>\n<p>How can I resolve this StackOverflow error?</p>\n"},{"tags":["java","spring","maven"],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697104907,"creation_date":1697104907,"answer_id":77279605,"question_id":77279512,"body_markdown":"Move each implementation of `distributed-lock` to a separated Maven module so that applications can declare a dependency only on the modules they really want to use.  In the application avoid that explicit import of the configuration classes of the 3 implementations of `distributed-lock`: you can use [`@ComponentScan`][1] or [`@Autoconfiguration`][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/AutoConfiguration.html","title":"How to make a Spring lib project dynamically enable classes according to user dependencies","body":"<p>Move each implementation of <code>distributed-lock</code> to a separated Maven module so that applications can declare a dependency only on the modules they really want to use.  In the application avoid that explicit import of the configuration classes of the 3 implementations of <code>distributed-lock</code>: you can use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html\" rel=\"nofollow noreferrer\"><code>@ComponentScan</code></a> or <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/AutoConfiguration.html\" rel=\"nofollow noreferrer\"><code>@Autoconfiguration</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697789382,"creation_date":1697789382,"answer_id":77329290,"question_id":77279512,"body_markdown":"Finally I got the answer!\r\n\r\nIt&#39;s really amazing for me when I lack the knowledge, please look [ConditionalOnClass][1]\r\n\r\nThis document said `A Class value can be safely specified on @Configuration classes as the annotation metadata is parsed by using ASM before the class is loaded`, that&#39;s means I can dynamicly declare beans wrapped by an Configuration Class, like this\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\r\n  &lt;optional&gt;true&lt;/optional&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nHere I declare the spring-cloud-gateway&#39;s starter as a dependency, cause it&#39;s really heavy, and my lib only have one Class that implement GlobalFilter as an optional component, which means only user&#39;s project depends on spring-cloud-gateway, it will do work.\r\n\r\n```java\r\npublic class MyGlobalFilter implements GlobalFilter {\r\n    // ......\r\n}\r\npublic class MyLibAutoConfiguration {\r\n    // omit other beans\r\n\r\n    // this will cause error when lacks of spring-cloud-gateway\r\n    @Bean\r\n    @ConditionalOnClass(GlobalFilter.class)\r\n    public MyGlobalFilter myGlobalFilter() {\r\n        return new MyGlobalFilter();\r\n    }\r\n}\r\n```\r\nThe code above will cause error when user&#39;s project depends on this lib but exclude spring-cloud-gateway. Cause Spring scaned this method and cannot found the class GlobalFitler implemented by MyGlobalFilter\r\n```java\r\npublic class MyGlobalFilter implements GlobalFilter {\r\n    // ......\r\n}\r\npublic class MyLibAutoConfiguration {\r\n    // omit other beans\r\n\r\n    // this will work well whether depends on spring-cloud-gateway or not\r\n    @Configuration\r\n    @ConditionalOnClass(GlobalFilter.class)\r\n    public class MyLibGatewayAutoConfiguration {\r\n        @Bean\r\n        public MyGlobalFilter myGlobalFilter() {\r\n            return new MyGlobalFilter();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo the conclusion comes out, if a project is a big mess, Classes where should belong to different modules were placed in the same one, now you can use the Configuration(class and @annotation) to wrap the beans, and then they can be dynamically loaded by users&#39; dependency enviroment\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnClass.html","title":"How to make a Spring lib project dynamically enable classes according to user dependencies","body":"<p>Finally I got the answer!</p>\n<p>It's really amazing for me when I lack the knowledge, please look <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnClass.html\" rel=\"nofollow noreferrer\">ConditionalOnClass</a></p>\n<p>This document said <code>A Class value can be safely specified on @Configuration classes as the annotation metadata is parsed by using ASM before the class is loaded</code>, that's means I can dynamicly declare beans wrapped by an Configuration Class, like this</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n  &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Here I declare the spring-cloud-gateway's starter as a dependency, cause it's really heavy, and my lib only have one Class that implement GlobalFilter as an optional component, which means only user's project depends on spring-cloud-gateway, it will do work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyGlobalFilter implements GlobalFilter {\n    // ......\n}\npublic class MyLibAutoConfiguration {\n    // omit other beans\n\n    // this will cause error when lacks of spring-cloud-gateway\n    @Bean\n    @ConditionalOnClass(GlobalFilter.class)\n    public MyGlobalFilter myGlobalFilter() {\n        return new MyGlobalFilter();\n    }\n}\n</code></pre>\n<p>The code above will cause error when user's project depends on this lib but exclude spring-cloud-gateway. Cause Spring scaned this method and cannot found the class GlobalFitler implemented by MyGlobalFilter</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyGlobalFilter implements GlobalFilter {\n    // ......\n}\npublic class MyLibAutoConfiguration {\n    // omit other beans\n\n    // this will work well whether depends on spring-cloud-gateway or not\n    @Configuration\n    @ConditionalOnClass(GlobalFilter.class)\n    public class MyLibGatewayAutoConfiguration {\n        @Bean\n        public MyGlobalFilter myGlobalFilter() {\n            return new MyGlobalFilter();\n        }\n    }\n}\n</code></pre>\n<p>So the conclusion comes out, if a project is a big mess, Classes where should belong to different modules were placed in the same one, now you can use the Configuration(class and @annotation) to wrap the beans, and then they can be dynamically loaded by users' dependency enviroment</p>\n"}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77329290,"answer_count":2,"score":0,"last_activity_date":1697789382,"creation_date":1697104108,"question_id":77279512,"body_markdown":"I want to start with an example to show my real problem, here is\r\n\r\n---\r\n\r\nThis is a small project of distributed-lock, its purpose is to configure distributed-lock through properties file, and when using it, you don&#39;t need to considered its impl\r\n\r\nYou can config distributed-lock properties file like this\r\n\r\n```yaml\r\ndlock:\r\n  list: # this is a Map List\r\n    - namespace: redis-dlock-1\r\n      type: redis\r\n      config: # the config includes specific impl properties, here is redisson\r\n        ...\r\n    - namespace: db-dlock-1\r\n      type: database\r\n      config: # here is database config\r\n        ...\r\n    - namespace: zk-dlock-1\r\n      type: zookeeper\r\n      config: # here is curator config\r\n        ...\r\n    ...\r\n```\r\n\r\nWhen using distributed-lock in project, you just need import the dependency, create a config file, and using Annotation or API in project like this\r\n\r\n```\r\n// this is a user method\r\n@DistributedLock(namespace=&quot;redis-dlock-1&quot;, tryWait=3000, fair=false)\r\npublic void invoke(Object[] params) {\r\n  ......\r\n}\r\n\r\npublic void invoke(Object[] params) {\r\n  DLock lock = DLockSupport.getDLock(/* namespace = */ &quot;db-dlock-1&quot;, /* fair = */false);\r\n  ......\r\n  if (lock.tryLock(3000)) {\r\n    ...... // do bussiness\r\n    lock.unlock(); \r\n  }\r\n  ......\r\n}\r\n```\r\n\r\nIt&#39;s easy to make and use, but as I mentioned, there are 3 impl of distributed-lock: `database, zookeeper, redis`, and to avoid user actively choose its impl, they are in the same project `com.example.dlock:distributed-lock`\r\n\r\n```txt\r\ndistributed-lock\r\n     |\r\n    impl\r\n       |\r\n      redis\r\n      zookeeper\r\n      database\r\n\r\n```\r\n\r\nBut I found a question, even though my project almost only use redis impl, importing distributed-lock will also lead to import database and zookeeper dependencies, that&#39;s I don&#39;t want to see\r\n\r\nIn another word, I want to make the lib&#39;s impl effective only when its basic dependencies has been imported by user project. That&#39;s mean, if there is only redisson(redis), then zookeeper and database is invalid, if there have redisson(redis) and database, then using zookeeper is invalid, if env has all impl dependencies, then you can use any impl of distributed-lock\r\n\r\nMy configuration design is like this:\r\n\r\n```java\r\n@Configuration\r\n@Import(RedisDLockConfiguration.class, \r\n        ZookeeperDLockConfiguration.class, \r\n        DatabaseDLockConfiguration.class)\r\npublic class DLockAutoConfiguration { }\r\n\r\n@ConditionalOnClass({RedisTemplate.class, RedissonClient.class})\r\n@EnableConfigurationProperties(RedisDLockProperties.class)\r\npublic class RedisDLockConfiguration {\r\n    ......\r\n}\r\n\r\n@ConditionalOnClass({Zookeeper.class, CuratorFramework.class})\r\n@EnableConfigurationProperties(ZookeeperDLockProperties.class)&#160;\r\npublic class ZookeeperDLockConfiguration {\r\n    ......\r\n}\r\n\r\n@ConditionalOnClass({JdbcTemplate.class, Connection.class})\r\n@EnableConfigurationProperties(DatabaseDLockProperties.class)\r\npublic class DatabaseDLockConfiguration {\r\n    ......\r\n}\r\n```\r\n\r\nSo in my assign, if user classpath contains RedisTemplate.class, RedissonClient.class, then redis-dlock will be enabled, same as database and zookeeper, `instead if user lack some class, and it should be ignored and ok, but actually i got missing class error`\r\n\r\n---\r\n\r\nMy real problem just like this example, i succeed an old spring-cloud lib system and ordered to upgrade to 2021.0.X, the system source code in a ordinary module contains a ZuulFilter, so I replaced it to GlobalFilter of springcloud-gateway, I thought it would enabled at gateway-imported enviroment and disable in ordinary env, but I was wrong, it imported a lot of classes and beans of gateway, that was too heavy to accept\r\n\r\nIs there any solution to make the goal?","title":"How to make a Spring lib project dynamically enable classes according to user dependencies","body":"<p>I want to start with an example to show my real problem, here is</p>\n<hr />\n<p>This is a small project of distributed-lock, its purpose is to configure distributed-lock through properties file, and when using it, you don't need to considered its impl</p>\n<p>You can config distributed-lock properties file like this</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>dlock:\n  list: # this is a Map List\n    - namespace: redis-dlock-1\n      type: redis\n      config: # the config includes specific impl properties, here is redisson\n        ...\n    - namespace: db-dlock-1\n      type: database\n      config: # here is database config\n        ...\n    - namespace: zk-dlock-1\n      type: zookeeper\n      config: # here is curator config\n        ...\n    ...\n</code></pre>\n<p>When using distributed-lock in project, you just need import the dependency, create a config file, and using Annotation or API in project like this</p>\n<pre><code>// this is a user method\n@DistributedLock(namespace=&quot;redis-dlock-1&quot;, tryWait=3000, fair=false)\npublic void invoke(Object[] params) {\n  ......\n}\n\npublic void invoke(Object[] params) {\n  DLock lock = DLockSupport.getDLock(/* namespace = */ &quot;db-dlock-1&quot;, /* fair = */false);\n  ......\n  if (lock.tryLock(3000)) {\n    ...... // do bussiness\n    lock.unlock(); \n  }\n  ......\n}\n</code></pre>\n<p>It's easy to make and use, but as I mentioned, there are 3 impl of distributed-lock: <code>database, zookeeper, redis</code>, and to avoid user actively choose its impl, they are in the same project <code>com.example.dlock:distributed-lock</code></p>\n<pre><code>distributed-lock\n     |\n    impl\n       |\n      redis\n      zookeeper\n      database\n\n</code></pre>\n<p>But I found a question, even though my project almost only use redis impl, importing distributed-lock will also lead to import database and zookeeper dependencies, that's I don't want to see</p>\n<p>In another word, I want to make the lib's impl effective only when its basic dependencies has been imported by user project. That's mean, if there is only redisson(redis), then zookeeper and database is invalid, if there have redisson(redis) and database, then using zookeeper is invalid, if env has all impl dependencies, then you can use any impl of distributed-lock</p>\n<p>My configuration design is like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Import(RedisDLockConfiguration.class, \n        ZookeeperDLockConfiguration.class, \n        DatabaseDLockConfiguration.class)\npublic class DLockAutoConfiguration { }\n\n@ConditionalOnClass({RedisTemplate.class, RedissonClient.class})\n@EnableConfigurationProperties(RedisDLockProperties.class)\npublic class RedisDLockConfiguration {\n    ......\n}\n\n@ConditionalOnClass({Zookeeper.class, CuratorFramework.class})\n@EnableConfigurationProperties(ZookeeperDLockProperties.class) \npublic class ZookeeperDLockConfiguration {\n    ......\n}\n\n@ConditionalOnClass({JdbcTemplate.class, Connection.class})\n@EnableConfigurationProperties(DatabaseDLockProperties.class)\npublic class DatabaseDLockConfiguration {\n    ......\n}\n</code></pre>\n<p>So in my assign, if user classpath contains RedisTemplate.class, RedissonClient.class, then redis-dlock will be enabled, same as database and zookeeper, <code>instead if user lack some class, and it should be ignored and ok, but actually i got missing class error</code></p>\n<hr />\n<p>My real problem just like this example, i succeed an old spring-cloud lib system and ordered to upgrade to 2021.0.X, the system source code in a ordinary module contains a ZuulFilter, so I replaced it to GlobalFilter of springcloud-gateway, I thought it would enabled at gateway-imported enviroment and disable in ordinary env, but I was wrong, it imported a lot of classes and beans of gateway, that was too heavy to accept</p>\n<p>Is there any solution to make the goal?</p>\n"},{"tags":["java","java-8"],"answers":[{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":124,"is_accepted":true,"score":124,"last_activity_date":1492611006,"creation_date":1401337198,"answer_id":23925631,"question_id":23925315,"body_markdown":"Try:\r\n\r\n     Map&lt;Integer, Long&gt; counters = persons.stream()\r\n         .collect(Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \r\n             Collectors.counting()));","title":"Count int occurrences with Java8","body":"<p>Try:</p>\n\n<pre><code> Map&lt;Integer, Long&gt; counters = persons.stream()\n     .collect(Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \n         Collectors.counting()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7426798,"reputation":161,"user_id":5649020,"display_name":"itohro"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455909883,"creation_date":1455890705,"answer_id":35507206,"question_id":23925315,"body_markdown":"With [Eclipse Collections][1] (formerly [GS Collections][2]), you can make use of a data structure called `Bag` that can hold the number of occurrences of each element.\r\n\r\nUsing `IntBag`, the following will work:\r\n\r\n    MutableList&lt;Person&gt; personsEC = ListAdapter.adapt(persons);\r\n    IntBag intBag = personsEC.collectInt(person -&gt; person.getBirthDay().getMonthValue()).toBag();\r\n\r\n    intBag.forEachWithOccurrences((month, count) -&gt; System.out.println(&quot;Count of month:&quot; + month + &quot; is &quot; + count));\r\n\r\nIf you want to make use of an array to keep track of the count, you can combine with the `Arrays.setAll()` approach [Brian][3] pointed out in another answer. \r\n\r\n    int[] monthCounter  = new int[12];\r\n    MutableList&lt;Person&gt; personsEC = ListAdapter.adapt(persons);\r\n    IntBag bag = personsEC.collectInt(person -&gt; person.getBirthDay().getMonthValue()).toBag();\r\n    Arrays.setAll(monthCounter, bag::occurrencesOf);\r\n    System.out.println(IntLists.immutable.with(monthCounter));\r\n\r\nThis code will also work with Java 5 – 7 if you use anonymous inner classes instead of lambdas.\r\n\r\n**Note: I am a committer for Eclipse Collections**\r\n\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://github.com/goldmansachs/gs-collections\r\n  [3]: https://stackoverflow.com/users/3553087/brian-goetz","title":"Count int occurrences with Java8","body":"<p>With <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\">Eclipse Collections</a> (formerly <a href=\"https://github.com/goldmansachs/gs-collections\" rel=\"nofollow noreferrer\">GS Collections</a>), you can make use of a data structure called <code>Bag</code> that can hold the number of occurrences of each element.</p>\n\n<p>Using <code>IntBag</code>, the following will work:</p>\n\n<pre><code>MutableList&lt;Person&gt; personsEC = ListAdapter.adapt(persons);\nIntBag intBag = personsEC.collectInt(person -&gt; person.getBirthDay().getMonthValue()).toBag();\n\nintBag.forEachWithOccurrences((month, count) -&gt; System.out.println(\"Count of month:\" + month + \" is \" + count));\n</code></pre>\n\n<p>If you want to make use of an array to keep track of the count, you can combine with the <code>Arrays.setAll()</code> approach <a href=\"https://stackoverflow.com/users/3553087/brian-goetz\">Brian</a> pointed out in another answer. </p>\n\n<pre><code>int[] monthCounter  = new int[12];\nMutableList&lt;Person&gt; personsEC = ListAdapter.adapt(persons);\nIntBag bag = personsEC.collectInt(person -&gt; person.getBirthDay().getMonthValue()).toBag();\nArrays.setAll(monthCounter, bag::occurrencesOf);\nSystem.out.println(IntLists.immutable.with(monthCounter));\n</code></pre>\n\n<p>This code will also work with Java 5 – 7 if you use anonymous inner classes instead of lambdas.</p>\n\n<p><strong>Note: I am a committer for Eclipse Collections</strong></p>\n"},{"tags":[],"owner":{"account_id":706402,"reputation":1052,"user_id":610874,"display_name":"Huy Le"},"down_vote_count":5,"up_vote_count":0,"is_accepted":false,"score":-5,"last_activity_date":1498021812,"creation_date":1498021812,"answer_id":44667259,"question_id":23925315,"body_markdown":"    int size = persons.stream().count()","title":"Count int occurrences with Java8","body":"<pre><code>int size = persons.stream().count()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14632743,"reputation":73,"user_id":10567980,"display_name":"avigaild"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540667766,"creation_date":1540667766,"answer_id":53025445,"question_id":23925315,"body_markdown":"If you would like to get Integer to Integer map, you can do the following.\r\n\r\n    Map&lt;Integer, Integer&gt; counters = persons.stream()\r\n        .collect(Collectors.groupingBy(\r\n            p -&gt; p.getBirthday().getMonthValue(),\r\n            Collectors.reducing(0, e -&gt; 1, Integer::sum)));","title":"Count int occurrences with Java8","body":"<p>If you would like to get Integer to Integer map, you can do the following.</p>\n\n<pre><code>Map&lt;Integer, Integer&gt; counters = persons.stream()\n    .collect(Collectors.groupingBy(\n        p -&gt; p.getBirthday().getMonthValue(),\n        Collectors.reducing(0, e -&gt; 1, Integer::sum)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4754852,"reputation":705,"user_id":3843853,"accept_rate":33,"display_name":"Arjun Nagathankandy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544013678,"creation_date":1544013230,"answer_id":53632462,"question_id":23925315,"body_markdown":"Already answered. Small Suggestion from my side inorder to eliminate **null** pointer exception\r\nie  From the stream null will throw **java.lang.UnsupportedOperationException**, **java.lang.NullPointerException** \r\n\r\n    Map&lt;Integer, Long&gt; birthdayCount = persons.stream()\r\n                                        .filter(Objects::nonNull) // filter out null object\r\n                                        .filter(p-&gt;Objects.nonNull(p.getBirthday())) // filter out null birthdays\r\n                                        .collect(Collectors.groupingBy(p -&gt; \r\n                                                     p.getBirthday().getMonthValue(), \r\n                                                     Collectors.counting()));","title":"Count int occurrences with Java8","body":"<p>Already answered. Small Suggestion from my side inorder to eliminate <strong>null</strong> pointer exception\nie  From the stream null will throw <strong>java.lang.UnsupportedOperationException</strong>, <strong>java.lang.NullPointerException</strong> </p>\n\n<pre><code>Map&lt;Integer, Long&gt; birthdayCount = persons.stream()\n                                    .filter(Objects::nonNull) // filter out null object\n                                    .filter(p-&gt;Objects.nonNull(p.getBirthday())) // filter out null birthdays\n                                    .collect(Collectors.groupingBy(p -&gt; \n                                                 p.getBirthday().getMonthValue(), \n                                                 Collectors.counting()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":35665,"reputation":17726,"user_id":101095,"accept_rate":94,"display_name":"Cuga"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1562775726,"creation_date":1562775726,"answer_id":56974911,"question_id":23925315,"body_markdown":"There&#39;s a few variations this could take.  \r\n\r\nYou can use `Collectors.summingInt()` to use `Integer` instead of the `Long` in the count.\r\n\r\nIf you wanted to skip the primitive `int` array, you could store the counts directly to a `List` in one iteration.\r\n\r\n**Count the birth months as Integers**\r\n\r\n\tMap&lt;Integer, Integer&gt; monthsToCounts = \r\n\t\t\tpeople.stream().collect(\r\n\t\t\t\t\tCollectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \r\n\t\t\t\t\tCollectors.summingInt(a -&gt; 1)));\r\n\r\n**Store the birth months in a 0-based array**\r\n\r\n\tint[] monthCounter = new int[12];\r\n\tpeople.stream().collect(Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \r\n\t\t\t                Collectors.summingInt(a -&gt; 1)))\r\n\t\t\t\t\t\t\t.forEach((month, count) -&gt; monthCounter[month-1]=count);\r\n\r\n**Skip the array and directly store the values to a list**\r\n\r\n\tList&lt;Integer&gt; counts = people.stream().collect(\r\n\t\t\tCollectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \r\n            Collectors.summingInt(a -&gt; 1)))\r\n\t\t\t.values().stream().collect(Collectors.toList());\r\n\r\n","title":"Count int occurrences with Java8","body":"<p>There's a few variations this could take.  </p>\n\n<p>You can use <code>Collectors.summingInt()</code> to use <code>Integer</code> instead of the <code>Long</code> in the count.</p>\n\n<p>If you wanted to skip the primitive <code>int</code> array, you could store the counts directly to a <code>List</code> in one iteration.</p>\n\n<p><strong>Count the birth months as Integers</strong></p>\n\n<pre><code>Map&lt;Integer, Integer&gt; monthsToCounts = \n        people.stream().collect(\n                Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \n                Collectors.summingInt(a -&gt; 1)));\n</code></pre>\n\n<p><strong>Store the birth months in a 0-based array</strong></p>\n\n<pre><code>int[] monthCounter = new int[12];\npeople.stream().collect(Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \n                        Collectors.summingInt(a -&gt; 1)))\n                        .forEach((month, count) -&gt; monthCounter[month-1]=count);\n</code></pre>\n\n<p><strong>Skip the array and directly store the values to a list</strong></p>\n\n<pre><code>List&lt;Integer&gt; counts = people.stream().collect(\n        Collectors.groupingBy(p -&gt; p.getBirthday().getMonthValue(), \n        Collectors.summingInt(a -&gt; 1)))\n        .values().stream().collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":2287731,"reputation":925,"user_id":2011375,"accept_rate":44,"display_name":"Du_"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63081,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":23925631,"answer_count":6,"score":57,"last_activity_date":1697789247,"creation_date":1401334564,"question_id":23925315,"body_markdown":"Is there a better way to count int occurrences with Java8\r\n\r\n    int[] monthCounter = new int[12];\r\n    persons.stream().forEach(person -&gt; monthCounter[person.getBirthday().getMonthValue() - 1]++);","title":"Count int occurrences with Java8","body":"<p>Is there a better way to count int occurrences with Java8</p>\n\n<pre><code>int[] monthCounter = new int[12];\npersons.stream().forEach(person -&gt; monthCounter[person.getBirthday().getMonthValue() - 1]++);\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1697789327,"post_id":77329259,"comment_id":136326366,"body_markdown":"`3 * 1024 * 1024 * 1024L` is less than 10GB.","body":"<code>3 * 1024 * 1024 * 1024L</code> is less than 10GB."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697789371,"post_id":77329259,"comment_id":136326374,"body_markdown":"How much memory did you assign to the JVM when you started it up (via the _java_ command)? I very much doubt that the default amount is sufficient. Refer to the documentation for the [java command](https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html).","body":"How much memory did you assign to the JVM when you started it up (via the <i>java</i> command)? I very much doubt that the default amount is sufficient. Refer to the documentation for the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">java command</a>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697818434,"post_id":77329259,"comment_id":136331803,"body_markdown":"Don’t use MemorySegment unless you are interacting with native libraries.  Just use [FileChannel.map](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/channels/FileChannel.html#map(java.nio.channels.FileChannel.MapMode,long,long)).  For example, `float f = FileChannel.open(Path.of(pathString)).map(FileChannel.MapMode.READ_ONLY, 3 * 1024 * 1024 * 1024L, Float.BYTES).getFloat();`","body":"Don’t use MemorySegment unless you are interacting with native libraries.  Just use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/channels/FileChannel.html#map(java.nio.channels.FileChannel.MapMode,long,long)\" rel=\"nofollow noreferrer\">FileChannel.map</a>.  For example, <code>float f = FileChannel.open(Path.of(pathString)).map(FileChannel.MapMod&zwnj;&#8203;e.READ_ONLY, 3 * 1024 * 1024 * 1024L, Float.BYTES).getFloat();</code>"},{"owner":{"account_id":9287961,"reputation":115,"user_id":6897210,"display_name":"Calvin_Z"},"score":0,"creation_date":1698026311,"post_id":77329259,"comment_id":136348872,"body_markdown":"@VGR FileChannel.map maybe not big enough. There is a 2G limit.","body":"@VGR FileChannel.map maybe not big enough. There is a 2G limit."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1698035960,"post_id":77329259,"comment_id":136349448,"body_markdown":"Yes, but I’m guessing you don’t have to map the entire file all at once.","body":"Yes, but I’m guessing you don’t have to map the entire file all at once."}],"owner":{"account_id":9287961,"reputation":115,"user_id":6897210,"display_name":"Calvin_Z"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697789090,"creation_date":1697789090,"question_id":77329259,"body_markdown":"I&#39;m using Java 17.0.6, and trying to work with `MemorySegment`. The code is like:\r\n\r\n    FileInputStream inputStream = new FileInputStream(pathString);\r\n    FileChannel fileChannel = inputStream.getChannel();\r\n    long totalSize = fileChannel.size();\r\n    ResourceScope resourceScope = ResourceScope.newConfinedScope();\r\n    MemorySegment memorySegment = MemorySegment.mapFile(Path.of(pathString), 0, totalSize, FileChannel.MapMode.READ_ONLY, resourceScope);\r\n    float f = MemoryAccess.getFloatAtOffset(memorySegment, 3 * 1024 * 1024 * 1024L);\r\n    System.out.println(f);\r\nThe file I&#39;m trying to read is bigger than 10GB. \r\n\r\nWhen I run the code, I got error like:\r\n\r\n    #\r\n    # A fatal error has been detected by the Java Runtime Environment:\r\n    #\r\n    #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ff929c14e18, pid=9304, tid=9920\r\n    #\r\n    # JRE version: Java(TM) SE Runtime Environment (17.0.6+9) (build 17.0.6+9-LTS-190)\r\n    # Java VM: Java HotSpot(TM) 64-Bit Server VM (17.0.6+9-LTS-190, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)\r\n    # Problematic frame:\r\n    # V  [jvm.dll+0x7a4e18]\r\n    #\r\n    # No core dump will be written. Minidumps are not enabled by default on client versions of Windows\r\n    #\r\nIs this a bug of Java?","title":"Having trouble with Java MemorySegment","body":"<p>I'm using Java 17.0.6, and trying to work with <code>MemorySegment</code>. The code is like:</p>\n<pre><code>FileInputStream inputStream = new FileInputStream(pathString);\nFileChannel fileChannel = inputStream.getChannel();\nlong totalSize = fileChannel.size();\nResourceScope resourceScope = ResourceScope.newConfinedScope();\nMemorySegment memorySegment = MemorySegment.mapFile(Path.of(pathString), 0, totalSize, FileChannel.MapMode.READ_ONLY, resourceScope);\nfloat f = MemoryAccess.getFloatAtOffset(memorySegment, 3 * 1024 * 1024 * 1024L);\nSystem.out.println(f);\n</code></pre>\n<p>The file I'm trying to read is bigger than 10GB.</p>\n<p>When I run the code, I got error like:</p>\n<pre><code>#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00007ff929c14e18, pid=9304, tid=9920\n#\n# JRE version: Java(TM) SE Runtime Environment (17.0.6+9) (build 17.0.6+9-LTS-190)\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (17.0.6+9-LTS-190, mixed mode, sharing, tiered, compressed oops, compressed class ptrs, g1 gc, windows-amd64)\n# Problematic frame:\n# V  [jvm.dll+0x7a4e18]\n#\n# No core dump will be written. Minidumps are not enabled by default on client versions of Windows\n#\n</code></pre>\n<p>Is this a bug of Java?</p>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":2,"creation_date":1697789679,"post_id":77329090,"comment_id":136326431,"body_markdown":"Your class provides no possibility to inject mocks, only real classes are used. So you cannot have used `doReturn` on this method, because you do not have access to the object instance from the outside, thus it cannot have been a mock object. You probably tried to do it like described in https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test – the answers suggest how to restructure your code to allow testing.","body":"Your class provides no possibility to inject mocks, only real classes are used. So you cannot have used <code>doReturn</code> on this method, because you do not have access to the object instance from the outside, thus it cannot have been a mock object. You probably tried to do it like described in <a href=\"https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test\" title=\"why are my mocked methods not called when executing a unit test\">stackoverflow.com/questions/74027324/&hellip;</a> – the answers suggest how to restructure your code to allow testing."},{"owner":{"account_id":1034502,"reputation":1373,"user_id":1042151,"accept_rate":25,"display_name":"tom"},"score":0,"creation_date":1697940091,"post_id":77329090,"comment_id":136342020,"body_markdown":"You need to tell the `Service` class what `DBLayer` you are using. As written you are not allowing the Service to replace the DBLayer. One idea is to add a constructor to Service to specify the (mock) DBLayer instance.","body":"You need to tell the <code>Service</code> class what <code>DBLayer</code> you are using. As written you are not allowing the Service to replace the DBLayer. One idea is to add a constructor to Service to specify the (mock) DBLayer instance."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697788494,"creation_date":1697788494,"answer_id":77329207,"question_id":77329090,"body_markdown":"The method getUpdateDate() is part of your service method. \r\n\r\nYou can not test a method X and define your test like &quot;oh I want to test X, and X executes A, but I just ignore A&quot;. \r\n\r\nIf you want to test your service method, you must either test getUpdateDate() too, OR mock getUpdateDate(), so that it returns a defined value. ","title":"How to ignore a method being actually getting called in junit mocking","body":"<p>The method getUpdateDate() is part of your service method.</p>\n<p>You can not test a method X and define your test like &quot;oh I want to test X, and X executes A, but I just ignore A&quot;.</p>\n<p>If you want to test your service method, you must either test getUpdateDate() too, OR mock getUpdateDate(), so that it returns a defined value.</p>\n"}],"owner":{"account_id":29714169,"reputation":1,"user_id":22773059,"display_name":"Palash Bajpai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697788494,"creation_date":1697787389,"question_id":77329090,"body_markdown":"```\r\npublic class DBLayer{\r\n\r\n    public Calendar getUpdateDate(long id){\r\n        //database logic\r\n        return date;\r\n    }\r\n}\r\n\r\n\r\npublic class Service{\r\n    private DBLayer dbLayer = new DBLayer();\r\n\r\n    public int methodA(){\r\n        Calendar updateDate = dbLayer.getUpdateDate(101L);\r\n        //some logic\r\n    }\r\n\r\n}\r\n```\r\n\r\nI want to write junit test for Service class methodA but don&#39;t want getUpdateDate to be called. By spying it or mocking it, this getUpdate is also getting called. \r\n\r\n\r\nI tried suggestion of using spy with Mockito.doReturn(), but then also getUpdateDate was getting called. How can I just ignore that being called at all.\r\nOr should I use any other framwork (except PowerMock) to get this feature, where it can treat this DBLayer class as blackBox and ignore method being called actually.","title":"How to ignore a method being actually getting called in junit mocking","body":"<pre><code>public class DBLayer{\n\n    public Calendar getUpdateDate(long id){\n        //database logic\n        return date;\n    }\n}\n\n\npublic class Service{\n    private DBLayer dbLayer = new DBLayer();\n\n    public int methodA(){\n        Calendar updateDate = dbLayer.getUpdateDate(101L);\n        //some logic\n    }\n\n}\n</code></pre>\n<p>I want to write junit test for Service class methodA but don't want getUpdateDate to be called. By spying it or mocking it, this getUpdate is also getting called.</p>\n<p>I tried suggestion of using spy with Mockito.doReturn(), but then also getUpdateDate was getting called. How can I just ignore that being called at all.\nOr should I use any other framwork (except PowerMock) to get this feature, where it can treat this DBLayer class as blackBox and ignore method being called actually.</p>\n"},{"tags":["java","spring-mvc","ws"],"answers":[{"tags":[],"owner":{"account_id":29705941,"reputation":1,"user_id":22766775,"display_name":"Steven Linus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697788208,"creation_date":1697788208,"answer_id":77329176,"question_id":77328645,"body_markdown":"i am so stupid!\r\n\r\nwhen use header &#39;Sec-Websocket-Protocol&#39;, the server must send back the same header.....","title":"WebSocket connections cannot be established on edge or chrome but only on safari. what is wrong with my browser?","body":"<p>i am so stupid!</p>\n<p>when use header 'Sec-Websocket-Protocol', the server must send back the same header.....</p>\n"}],"owner":{"account_id":29705941,"reputation":1,"user_id":22766775,"display_name":"Steven Linus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697788208,"creation_date":1697781959,"question_id":77328645,"body_markdown":"java code with spring boot starter websocket\r\n`\r\n    @Configuration\r\n    @EnableWebSocket\r\n    public class WsConfig implements WebSocketConfigurer {\r\n        @Autowired\r\n        UserWsHandler userWsHandler;\r\n        @Autowired\r\n        UserHandlerShakeHandler userHandlerShakeHandler;\r\n        @Override\r\n        public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n            registry.addHandler(userWsHandler,&quot;/loginWs&quot;)\r\n                                     .setAllowedOriginPatterns(&quot;*&quot;);\r\n        }\r\n`\r\njs \r\n`.   const ws = new WebSocket(&quot;ws://10.12.36.178:8080/loginWs&quot;)    `\r\n\r\ni got a EOFException when use chrome or edge.\r\n\r\n\r\n\r\nIs something wrong with my code or my browser settings？\r\n\r\nappreciates～","title":"WebSocket connections cannot be established on edge or chrome but only on safari. what is wrong with my browser?","body":"<p>java code with spring boot starter websocket\n<code>@Configuration @EnableWebSocket public class WsConfig implements WebSocketConfigurer { @Autowired UserWsHandler userWsHandler; @Autowired UserHandlerShakeHandler userHandlerShakeHandler; @Override public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) { registry.addHandler(userWsHandler,&quot;/loginWs&quot;) .setAllowedOriginPatterns(&quot;*&quot;); }</code>\njs\n<code>.   const ws = new WebSocket(&quot;ws://10.12.36.178:8080/loginWs&quot;)    </code></p>\n<p>i got a EOFException when use chrome or edge.</p>\n<p>Is something wrong with my code or my browser settings？</p>\n<p>appreciates～</p>\n"},{"tags":["java","cmd","java-8","javac"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1697783721,"post_id":77328734,"comment_id":136325428,"body_markdown":"Use the full path to your java installation, so something like `C:\\Program Files\\jdk8\\bin\\java --version` or whatever the correct path is where you installed java 8","body":"Use the full path to your java installation, so something like <code>C:\\Program Files\\jdk8\\bin\\java --version</code> or whatever the correct path is where you installed java 8"},{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":1,"creation_date":1697783801,"post_id":77328734,"comment_id":136325437,"body_markdown":"_Due to my assignment, I need jdk8 version_ Set your JAVA_HOME to point to Jdk 8.","body":"<i>Due to my assignment, I need jdk8 version</i> Set your JAVA_HOME to point to Jdk 8."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1697784021,"post_id":77328734,"comment_id":136325463,"body_markdown":"Not only the `JAVA_HOME` but also the `PATH`.","body":"Not only the <code>JAVA_HOME</code> but also the <code>PATH</code>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1697784030,"post_id":77328734,"comment_id":136325466,"body_markdown":"@PradeepSimha that doesn&#39;t help if you&#39;re running java from the command line. It will still run what&#39;s in the `PATH`","body":"@PradeepSimha that doesn&#39;t help if you&#39;re running java from the command line. It will still run what&#39;s in the <code>PATH</code>"},{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":0,"creation_date":1697784397,"post_id":77328734,"comment_id":136325530,"body_markdown":"@FedericoklezCulloca Yup my bad I missed it, yes PATH variable also.","body":"@FedericoklezCulloca Yup my bad I missed it, yes PATH variable also."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1697784678,"post_id":77328734,"comment_id":136325567,"body_markdown":"This is standard Operation System problem, more precisely from the used Command Line program. Usually (most versions) the system search the executables, if not using absolute path, in the directories given in the `PATH` environment variable. The first found executable will be executed. `java --version` or `javac --version` does **not** show all existing installations, it *only* shows the version being executed. (`JAVA_HOME` is **not** used by Java itself, some *external* tools use it instead of relying on the `PATH`)","body":"This is standard Operation System problem, more precisely from the used Command Line program. Usually (most versions) the system search the executables, if not using absolute path, in the directories given in the <code>PATH</code> environment variable. The first found executable will be executed. <code>java --version</code> or <code>javac --version</code> does <b>not</b> show all existing installations, it <i>only</i> shows the version being executed. (<code>JAVA_HOME</code> is <b>not</b> used by Java itself, some <i>external</i> tools use it instead of relying on the <code>PATH</code>)"}],"answers":[{"tags":[],"owner":{"account_id":16297526,"reputation":193,"user_id":11769408,"display_name":"Geoffrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697787375,"creation_date":1697784798,"answer_id":77328842,"question_id":77328734,"body_markdown":"You&#39;re going to have big headaches if you try to handle multiple java versions manually. The best option is to delegate this to a third party tool, quite some already exists to overcome the issue. The best one and recommended by several frameworks (https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started.installing.cli.sdkman) is sdkman:\r\n\r\nhttps://sdkman.io/\r\n\r\nFollow windows installation:\r\nhttps://sdkman.io/install#:~:text=Windows%20installation\r\n\r\n\r\nThen do:\r\n\r\n    sdk list java\r\n\r\nYou will see something like:\r\n\r\n    ================================================================================\r\n     Vendor        | Use | Version      | Dist    | Status     | Identifier\r\n    --------------------------------------------------------------------------------\r\n     Corretto      |     | 21           | amzn    |            | 21-amzn             \r\n                   |     | 21.0.1       | amzn    |            | 21.0.1-amzn         \r\n                   |     | 20.0.2       | amzn    |            | 20.0.2-amzn         \r\n                   |     | 20.0.1       | amzn    |            | 20.0.1-amzn         \r\n                   |     | 17.0.9       | amzn    |            | 17.0.9-amzn         \r\n                   |     | 17.0.8       | amzn    |            | 17.0.8-amzn         \r\n                   | &gt;&gt;&gt; | 17.0.7       | amzn    | installed  | 17.0.7-amzn         \r\n                   |     | 11.0.21      | amzn    |            | 11.0.21-amzn        \r\n                   |     | 11.0.20      | amzn    |            | 11.0.20-amzn        \r\n                   |     | 11.0.19      | amzn    |            | 11.0.19-amzn        \r\n                   |     | 11.0.18      | amzn    | local only | 11.0.18-amzn        \r\n                   |     | 8.0.392      | amzn    |            | 8.0.392-amzn        \r\n                   |     | 8.0.382      | amzn    |            | 8.0.382-amzn        \r\n                   |     | 8.0.372      | amzn    | installed  | 8.0.372-amzn        \r\n\r\nInstall what you need with:\r\n\r\n    sdk install java 20.0.2-amzn\r\n\r\nThen switch among versions with:\r\n\r\n    sdk use java 20.0.2-amzn\r\n","title":"Command Line shows only jdk 20 version of java, not others","body":"<p>You're going to have big headaches if you try to handle multiple java versions manually. The best option is to delegate this to a third party tool, quite some already exists to overcome the issue. The best one and recommended by several frameworks (<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started.installing.cli.sdkman\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#getting-started.installing.cli.sdkman</a>) is sdkman:</p>\n<p><a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">https://sdkman.io/</a></p>\n<p>Follow windows installation:\n<a href=\"https://sdkman.io/install#:%7E:text=Windows%20installation\" rel=\"nofollow noreferrer\">https://sdkman.io/install#:~:text=Windows%20installation</a></p>\n<p>Then do:</p>\n<pre><code>sdk list java\n</code></pre>\n<p>You will see something like:</p>\n<pre><code>================================================================================\n Vendor        | Use | Version      | Dist    | Status     | Identifier\n--------------------------------------------------------------------------------\n Corretto      |     | 21           | amzn    |            | 21-amzn             \n               |     | 21.0.1       | amzn    |            | 21.0.1-amzn         \n               |     | 20.0.2       | amzn    |            | 20.0.2-amzn         \n               |     | 20.0.1       | amzn    |            | 20.0.1-amzn         \n               |     | 17.0.9       | amzn    |            | 17.0.9-amzn         \n               |     | 17.0.8       | amzn    |            | 17.0.8-amzn         \n               | &gt;&gt;&gt; | 17.0.7       | amzn    | installed  | 17.0.7-amzn         \n               |     | 11.0.21      | amzn    |            | 11.0.21-amzn        \n               |     | 11.0.20      | amzn    |            | 11.0.20-amzn        \n               |     | 11.0.19      | amzn    |            | 11.0.19-amzn        \n               |     | 11.0.18      | amzn    | local only | 11.0.18-amzn        \n               |     | 8.0.392      | amzn    |            | 8.0.392-amzn        \n               |     | 8.0.382      | amzn    |            | 8.0.382-amzn        \n               |     | 8.0.372      | amzn    | installed  | 8.0.372-amzn        \n</code></pre>\n<p>Install what you need with:</p>\n<pre><code>sdk install java 20.0.2-amzn\n</code></pre>\n<p>Then switch among versions with:</p>\n<pre><code>sdk use java 20.0.2-amzn\n</code></pre>\n"}],"owner":{"account_id":29256387,"reputation":11,"user_id":22414497,"display_name":"Gulnara Azizova"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1697821946,"answer_count":1,"score":-1,"last_activity_date":1697787375,"creation_date":1697783392,"question_id":77328734,"body_markdown":"I want to see the list of all jdk versions available in my system. However, when I type in java and javac version to the cmd line, it gives me only jdk 20 version. How can I do an implementation to see other jdk versions as well in the list?\r\n\r\n\r\n\r\n    C:\\Users\\USER&gt;java --version\r\n    java 20 2023-03-21\r\n    Java(TM) SE Runtime Environment (build 20+36-2344)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)\r\n    \r\n    C:\\Users\\USER&gt;javac --version\r\n    javac 20\r\n    \r\n    C:\\Users\\USER&gt;\r\n\r\nI just typed `java --version` and `javac --version` commands to see jdk versions exist in my computer. Due to my assignment, I need jdk8 version. How can solve the problem in order to see the version I need?","title":"Command Line shows only jdk 20 version of java, not others","body":"<p>I want to see the list of all jdk versions available in my system. However, when I type in java and javac version to the cmd line, it gives me only jdk 20 version. How can I do an implementation to see other jdk versions as well in the list?</p>\n<pre><code>C:\\Users\\USER&gt;java --version\njava 20 2023-03-21\nJava(TM) SE Runtime Environment (build 20+36-2344)\nJava HotSpot(TM) 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)\n\nC:\\Users\\USER&gt;javac --version\njavac 20\n\nC:\\Users\\USER&gt;\n</code></pre>\n<p>I just typed <code>java --version</code> and <code>javac --version</code> commands to see jdk versions exist in my computer. Due to my assignment, I need jdk8 version. How can solve the problem in order to see the version I need?</p>\n"},{"tags":["java","hibernate","hibernate-6.x"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1684844380,"post_id":76314412,"comment_id":134573824,"body_markdown":"Have you checked the [`SQLExtractor`](https://github.com/vladmihalcea/hypersistence-utils/blob/20e64bb04257364db3446148d7ad6fe8739579a6/hypersistence-utils-hibernate-62/src/main/java/io/hypersistence/utils/hibernate/query/SQLExtractor.java) from [this article](https://vladmihalcea.com/get-sql-from-jpql-or-criteria/)? It has a hibernate 6 as well as 6.2 version.","body":"Have you checked the <a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/20e64bb04257364db3446148d7ad6fe8739579a6/hypersistence-utils-hibernate-62/src/main/java/io/hypersistence/utils/hibernate/query/SQLExtractor.java\" rel=\"nofollow noreferrer\"><code>SQLExtractor</code></a> from <a href=\"https://vladmihalcea.com/get-sql-from-jpql-or-criteria/\" rel=\"nofollow noreferrer\">this article</a>? It has a hibernate 6 as well as 6.2 version."},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1684902123,"post_id":76314412,"comment_id":134583505,"body_markdown":"Yes. `SQLExtractor` uses reflection to call `Query.getQueryString()` which does not work for CriteriaQuery in hibernate 6. Added `SQLExtractor` to the negative list.","body":"Yes. <code>SQLExtractor</code> uses reflection to call <code>Query.getQueryString()</code> which does not work for CriteriaQuery in hibernate 6. Added <code>SQLExtractor</code> to the negative list."},{"owner":{"account_id":5659371,"reputation":2152,"user_id":4477463,"accept_rate":22,"display_name":"Egor"},"score":0,"creation_date":1691162297,"post_id":76314412,"comment_id":135459116,"body_markdown":"Hello @BetaRide, could you please share the solution if you managed to find it?","body":"Hello @BetaRide, could you please share the solution if you managed to find it?"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":2,"creation_date":1691386939,"post_id":76314412,"comment_id":135479089,"body_markdown":"Nothing to share so far :-(.","body":"Nothing to share so far :-(."}],"answers":[{"tags":[],"owner":{"account_id":18467,"reputation":6637,"user_id":42344,"accept_rate":60,"display_name":"jonathan.cone"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695398166,"creation_date":1695398166,"answer_id":77159125,"question_id":76314412,"body_markdown":"This was an intentional design decision by the Hibernate team in version 6 as Hibernate moved to the [semantic query model][1].  I did find a workaround to do this in the following code. It&#39;s worth noting that the format of the HQL this method returns has changed slightly since Hibernate 5:\r\n\r\n    QuerySqmImpl&lt;?&gt; unwrap = entityManager.createQuery(query).unwrap(QuerySqmImpl.class);\r\n    String queryString = unwrap.getSqmStatement().toHqlString();\r\n\r\nYou can see some discussion around this in the [Hibernate JIRA ticket][2] for this issue as well.\r\n\r\n\r\n  [1]: https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\r\n  [2]: https://hibernate.atlassian.net/browse/HHH-15389","title":"How to get SQL from Hibernate Criteria API in Hibernate 6?","body":"<p>This was an intentional design decision by the Hibernate team in version 6 as Hibernate moved to the <a href=\"https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\" rel=\"nofollow noreferrer\">semantic query model</a>.  I did find a workaround to do this in the following code. It's worth noting that the format of the HQL this method returns has changed slightly since Hibernate 5:</p>\n<pre><code>QuerySqmImpl&lt;?&gt; unwrap = entityManager.createQuery(query).unwrap(QuerySqmImpl.class);\nString queryString = unwrap.getSqmStatement().toHqlString();\n</code></pre>\n<p>You can see some discussion around this in the <a href=\"https://hibernate.atlassian.net/browse/HHH-15389\" rel=\"nofollow noreferrer\">Hibernate JIRA ticket</a> for this issue as well.</p>\n"},{"tags":[],"owner":{"account_id":6890459,"reputation":61,"user_id":5294163,"display_name":"Buks van der Lingen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697787005,"creation_date":1697787005,"answer_id":77329056,"question_id":76314412,"body_markdown":"Library changed for SQLExtractor: [https://github.com/vladmihalcea/hypersistence-utils][1]\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hypersistence-utils-hibernate-62&lt;/artifactId&gt;\r\n            &lt;version&gt;3.6.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://github.com/vladmihalcea/hypersistence-utils","title":"How to get SQL from Hibernate Criteria API in Hibernate 6?","body":"<p>Library changed for SQLExtractor: <a href=\"https://github.com/vladmihalcea/hypersistence-utils\" rel=\"nofollow noreferrer\">https://github.com/vladmihalcea/hypersistence-utils</a></p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hypersistence-utils-hibernate-62&lt;/artifactId&gt;\n        &lt;version&gt;3.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":438,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":77159125,"answer_count":2,"score":6,"last_activity_date":1697787005,"creation_date":1684842482,"question_id":76314412,"body_markdown":"I&#39;d like to get the sql string from a [CriteriaQuery][1] using Hibernate 6.\r\n\r\n - [Query.getQueryString()][2] does no longer work in Hibernate 6 for `CriteriaQuery`.\r\n - `SQLExtractor.from()` dos not work either because it just uses reflection to call [Query.getQueryString()][2]\r\n - https://stackoverflow.com/questions/554481/how-to-get-sql-from-hibernate-criteria-api-not-for-logging#3888873 only works for hibernate versions up to 5.\r\n - logging the sql statements is not enough in my use case. I need to store them in a string for processing.\r\n\r\nAny ideas?\r\n\r\n  [1]: https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/criteria/criteriaquery\r\n  [2]: https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/query/Query.html#getQueryString()","title":"How to get SQL from Hibernate Criteria API in Hibernate 6?","body":"<p>I'd like to get the sql string from a <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/criteria/criteriaquery\" rel=\"noreferrer\">CriteriaQuery</a> using Hibernate 6.</p>\n<ul>\n<li><a href=\"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/query/Query.html#getQueryString()\" rel=\"noreferrer\">Query.getQueryString()</a> does no longer work in Hibernate 6 for <code>CriteriaQuery</code>.</li>\n<li><code>SQLExtractor.from()</code> dos not work either because it just uses reflection to call <a href=\"https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/query/Query.html#getQueryString()\" rel=\"noreferrer\">Query.getQueryString()</a></li>\n<li><a href=\"https://stackoverflow.com/questions/554481/how-to-get-sql-from-hibernate-criteria-api-not-for-logging#3888873\">How to get SQL from Hibernate Criteria API (*not* for logging)</a> only works for hibernate versions up to 5.</li>\n<li>logging the sql statements is not enough in my use case. I need to store them in a string for processing.</li>\n</ul>\n<p>Any ideas?</p>\n"},{"tags":["java","logging","audit"],"answers":[{"tags":[],"owner":{"account_id":77568,"reputation":484,"user_id":221300,"display_name":"Nate"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1269263322,"creation_date":1269263322,"answer_id":2492383,"question_id":2492362,"body_markdown":"Audit implies active review of the logging, IMHO.  Can&#39;t have audit without logging, but you can have logging without audit.","title":"Difference in Auditing and Logging?","body":"<p>Audit implies active review of the logging, IMHO.  Can't have audit without logging, but you can have logging without audit.</p>\n"},{"tags":[],"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"down_vote_count":4,"up_vote_count":43,"is_accepted":false,"score":39,"last_activity_date":1269263326,"creation_date":1269263326,"answer_id":2492385,"question_id":2492362,"body_markdown":"The difference is more in usage than in technique.\r\n\r\nAuditing is used to answer the question &quot;Who did what?&quot; and possibly why. Logging is more focussed on what&#39;s happening.","title":"Difference in Auditing and Logging?","body":"<p>The difference is more in usage than in technique.</p>\n\n<p>Auditing is used to answer the question \"Who did what?\" and possibly why. Logging is more focussed on what's happening.</p>\n"},{"tags":[],"owner":{"account_id":13508,"reputation":30347,"user_id":27198,"accept_rate":72,"display_name":"Itay Maman"},"down_vote_count":0,"up_vote_count":98,"is_accepted":true,"score":98,"last_activity_date":1269264891,"creation_date":1269263448,"answer_id":2492401,"question_id":2492362,"body_markdown":"Logging typically means the recording of implementation level events that happen as the program is running (methods get called, objects are created, etc.). As such it focuses on things that interest programmers\r\n\r\n\r\nAuditing is about recording domain-level events: a transaction is created, a user is performing an action, etc. In certain types of application (Banking) there is a legal obligation to record such events.\r\n","title":"Difference in Auditing and Logging?","body":"<p>Logging typically means the recording of implementation level events that happen as the program is running (methods get called, objects are created, etc.). As such it focuses on things that interest programmers</p>\n\n<p>Auditing is about recording domain-level events: a transaction is created, a user is performing an action, etc. In certain types of application (Banking) there is a legal obligation to record such events.</p>\n"},{"tags":[],"owner":{"account_id":28214,"reputation":305260,"user_id":75170,"accept_rate":72,"display_name":"John Feminella"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1269263551,"creation_date":1269263551,"answer_id":2492417,"question_id":2492362,"body_markdown":"They&#39;re significantly different. Logging is simply the abstract task of recording data about events that take place in a system. If you are recording any information at all, you&#39;re logging.\r\n\r\nAuditing, however, is more complex. Auditing is the practice of inspecting logs for the purpose of verifying that the system is in a desirable state or to answer questions about how the system arrived at a particular state. One way of doing auditing is by reviewing logs, of course, but you can do audits without logs (as a simple example, you could ask a user directly whether they were responsible for a particular change). That&#39;s not a great idea, because logging is typically such a cheap operation that alternatives don&#39;t need to be considered.","title":"Difference in Auditing and Logging?","body":"<p>They're significantly different. Logging is simply the abstract task of recording data about events that take place in a system. If you are recording any information at all, you're logging.</p>\n\n<p>Auditing, however, is more complex. Auditing is the practice of inspecting logs for the purpose of verifying that the system is in a desirable state or to answer questions about how the system arrived at a particular state. One way of doing auditing is by reviewing logs, of course, but you can do audits without logs (as a simple example, you could ask a user directly whether they were responsible for a particular change). That's not a great idea, because logging is typically such a cheap operation that alternatives don't need to be considered.</p>\n"},{"tags":[],"owner":{"account_id":107337,"reputation":1,"user_id":285465,"accept_rate":80,"display_name":"TomTom"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1545294918,"creation_date":1269263598,"answer_id":2492423,"question_id":2492362,"body_markdown":"There is a technical issue in that Auditing often has legal requirements. Also, Auditing is often done within the application, as in: there is a user interface to see who changed what because users / compliance department may need to check it. Also, Auditing may have legal requirements (write out to WORM media once so it cannot be manipulated, keep data for x years).\r\n\r\nAn example: I have a trading application. All changes to orders are audited - you have the OrderStatus, and the OrderStatusHistory. This is not technical - and the history is part of the application interface.\r\n\r\nLogging is purely technical. It is totally ok to turn it off at times, or to have admins extract the log files.","title":"Difference in Auditing and Logging?","body":"<p>There is a technical issue in that Auditing often has legal requirements. Also, Auditing is often done within the application, as in: there is a user interface to see who changed what because users / compliance department may need to check it. Also, Auditing may have legal requirements (write out to WORM media once so it cannot be manipulated, keep data for x years).</p>\n\n<p>An example: I have a trading application. All changes to orders are audited - you have the OrderStatus, and the OrderStatusHistory. This is not technical - and the history is part of the application interface.</p>\n\n<p>Logging is purely technical. It is totally ok to turn it off at times, or to have admins extract the log files.</p>\n"},{"tags":[],"owner":{"account_id":14744,"reputation":13116,"user_id":30594,"accept_rate":82,"display_name":"Ramesh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1545295045,"creation_date":1269264191,"answer_id":2492492,"question_id":2492362,"body_markdown":"I see Audit logs as information required by Business to ascertain some action happened on the specific date and time by this user for this user. It has a business value attached to it, which will let you verify what happened. Generally, Audit logs are archived for historical and compliance purpose.\r\n\r\nNormal logging, on the other hand, logs information required by technology partner to understand what happened or how the system behaved during a specific event. It can contain method signature, what values are passed as input, and what values are as passed as output, and if there was an exception, more information about the exception etc. These information are not required by the business and can be turned off or the details which are logged can be reduced based on the needs. These information basically assist development or support teams to debug the system.","title":"Difference in Auditing and Logging?","body":"<p>I see Audit logs as information required by Business to ascertain some action happened on the specific date and time by this user for this user. It has a business value attached to it, which will let you verify what happened. Generally, Audit logs are archived for historical and compliance purpose.</p>\n\n<p>Normal logging, on the other hand, logs information required by technology partner to understand what happened or how the system behaved during a specific event. It can contain method signature, what values are passed as input, and what values are as passed as output, and if there was an exception, more information about the exception etc. These information are not required by the business and can be turned off or the details which are logged can be reduced based on the needs. These information basically assist development or support teams to debug the system.</p>\n"},{"tags":[],"owner":{"display_name":"user2146545"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1389271049,"creation_date":1389271049,"answer_id":21020491,"question_id":2492362,"body_markdown":"Audit Trail is a unperishable records of transaction while Logs in the other hand used to detect errors and there is a certain time that a log file will be present","title":"Difference in Auditing and Logging?","body":"<p>Audit Trail is a unperishable records of transaction while Logs in the other hand used to detect errors and there is a certain time that a log file will be present</p>\n"},{"tags":[],"owner":{"account_id":13311094,"reputation":159,"user_id":9609300,"display_name":"siddartha kamble"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1528224457,"creation_date":1528218864,"answer_id":50705585,"question_id":2492362,"body_markdown":"**Logging** is tracing the flow of in which class which method called let us we have A,B,C methods with deffrent classes In X class A methods is called to Y class B method,and B method is called to Y class c method ..like this  traces the flow of control\r\n    \r\n**Auditing** will track the activities of user.  We have to write logic and then system will automatically insert/save the data int the audit table.\r\n\r\nLet&#39;s take a login.jsp in that we can enter the user name and password then hit the login page then control goes to logic servlet page inside the service method will called and inside write the logic like\r\n\r\n    httpsession session=reg.getsession();\r\n    session.setAttribute(&quot;userId&quot;,uid);\r\n\r\ni.e in the database we have take columns as\r\n\r\n    created_by \r\n    created_date\r\n    last_modified_by\r\n    last_modified_dt","title":"Difference in Auditing and Logging?","body":"<p><strong>Logging</strong> is tracing the flow of in which class which method called let us we have A,B,C methods with deffrent classes In X class A methods is called to Y class B method,and B method is called to Y class c method ..like this  traces the flow of control</p>\n\n<p><strong>Auditing</strong> will track the activities of user.  We have to write logic and then system will automatically insert/save the data int the audit table.</p>\n\n<p>Let's take a login.jsp in that we can enter the user name and password then hit the login page then control goes to logic servlet page inside the service method will called and inside write the logic like</p>\n\n<pre><code>httpsession session=reg.getsession();\nsession.setAttribute(\"userId\",uid);\n</code></pre>\n\n<p>i.e in the database we have take columns as</p>\n\n<pre><code>created_by \ncreated_date\nlast_modified_by\nlast_modified_dt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2352447,"reputation":15739,"user_id":2060966,"accept_rate":83,"display_name":"marsze"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1629885655,"creation_date":1629885319,"answer_id":68920682,"question_id":2492362,"body_markdown":"**Auditing**\r\n\r\n* Business level events\r\n* Information for users and clients\r\n* Who did what, when\r\n* Often required legally or by the client contract\r\n* Usually kept indefinitely or at least for legally specified period\r\n\r\nExamples:\r\n\r\n&gt;2021-01-01T08:45:21 User 4711 accessed record 0815  \r\n&gt;2021-02-02T12:13:45 Received new invoice with guid f456-87D2-...\r\n\r\n**Logging**\r\n\r\n* Program level events\r\n* Information for developers and support\r\n* What happend, incl debug informations\r\n* Required for maintenance or debugging purposes\r\n* Often deleted after a short time\r\n\r\nExamples:\r\n\r\n&gt;2021-01-01T08:45:21 Method Foo.Bar() sending request of 46kb to https://...  \r\n&gt;2021-02-02T12:13:45 Starting listener with id 4711 on server server01.mydomain","title":"Difference in Auditing and Logging?","body":"<p><strong>Auditing</strong></p>\n<ul>\n<li>Business level events</li>\n<li>Information for users and clients</li>\n<li>Who did what, when</li>\n<li>Often required legally or by the client contract</li>\n<li>Usually kept indefinitely or at least for legally specified period</li>\n</ul>\n<p>Examples:</p>\n<blockquote>\n<p>2021-01-01T08:45:21 User 4711 accessed record 0815<br />\n2021-02-02T12:13:45 Received new invoice with guid f456-87D2-...</p>\n</blockquote>\n<p><strong>Logging</strong></p>\n<ul>\n<li>Program level events</li>\n<li>Information for developers and support</li>\n<li>What happend, incl debug informations</li>\n<li>Required for maintenance or debugging purposes</li>\n<li>Often deleted after a short time</li>\n</ul>\n<p>Examples:</p>\n<blockquote>\n<p>2021-01-01T08:45:21 Method Foo.Bar() sending request of 46kb to https://...<br />\n2021-02-02T12:13:45 Starting listener with id 4711 on server server01.mydomain</p>\n</blockquote>\n"}],"owner":{"account_id":87077,"reputation":25964,"user_id":241717,"accept_rate":73,"display_name":"GuruKulki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44296,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":2492401,"answer_count":9,"score":74,"last_activity_date":1697786750,"creation_date":1269263092,"question_id":2492362,"body_markdown":"I have been coming across these two words more often but i didn&#39;t see much difference in these? I mean want to know are they used interchangeably or there are some differences in those two?\r\nThanks.","title":"Difference in Auditing and Logging?","body":"<p>I have been coming across these two words more often but i didn't see much difference in these? I mean want to know are they used interchangeably or there are some differences in those two?\nThanks.</p>\n"},{"tags":["java","docker","keycloak","keycloak-services","keycloak-rest-api"],"owner":{"account_id":1492110,"reputation":855,"user_id":1398979,"accept_rate":12,"display_name":"Bhaskar Dabhi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697786641,"creation_date":1697786641,"question_id":77329032,"body_markdown":"Following is my docker file:\r\n\r\n    version: &#39;3&#39;\r\n    volumes:\r\n      mysql_data:\r\n        driver: local\r\n    services:\r\n      keycloak:\r\n        image: &#39;quay.io/keycloak/keycloak:legacy&#39;\r\n        restart: always\r\n        environment:\r\n          DB_VENDOR: MYSQL\r\n          DB_ADDR: localhost\r\n          DB_DATABASE: keycloak\r\n          DB_USER: root\r\n          DB_PASSWORD: mypassword\r\n          KEYCLOAK_USER: admin\r\n          KEYCLOAK_PASSWORD: myadminpassword\r\n          JAVA_OPTS_APPEND: &#39;-Dkeycloak.profile.feature.token_exchange=enabled -Dkeycloak.profile.feature.admin_fine_grained_authz=enabled&#39;\r\n        ports:\r\n          - &#39;8181:8080&#39;\r\n        expose:\r\n          - &#39;80&#39;\r\n        extra_hosts:\r\n          - &#39;host.docker.internal:host-gateway&#39;\r\n\r\nWhen running this docker, it is starting but then keep restart with following errors:\r\n\r\n    07:16:33,781 WARN  [org.jboss.jca.core.connectionmanager.pool.strategy.OnePool] (ServerService Thread Pool -- 69) IJ000604: Throwable while attempting to get a new connection: null: javax.resource.ResourceException: IJ031084: Unable to create connection\r\n    \tat org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createLocalManagedConnection(LocalManagedConnectionFactory.java:364)\r\n    \tat org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:371)\r\n    \tat org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:287)\r\n    \tat org.jboss.ironjacamar.impl@1.5.3.Final//org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedDequeManagedConnectionPool.createConnectionEventListener(SemaphoreConcurrentLinkedDequeManagedConnectionPool.java:1328)\r\n    \tat org.jboss.ironjacamar.impl@1.5.3.Final//org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedDequeManagedConnectionPool.getConnection(SemaphoreConcurrentLinkedDequeManagedConnectionPool.java:505)\r\n    \t\r\n    Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    \tat com.mysql.jdbc@8.0.22//com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\r\n    \t... 60 more\r\n    Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \t... 64 more\r\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\r\n    \tat java.base/java.net.PlainSocketImpl.socketConnect(Native Method)\r\n    \tat java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:412)\r\n    \t... 67 more\r\n    \r\n    07:16:33,784 FATAL [org.keycloak.services] (ServerService Thread Pool -- 69) Error during startup: java.lang.RuntimeException: Failed to connect to database\r\n    \tat org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.DefaultJpaConnectionProviderFactory.getConnection(DefaultJpaConnectionProviderFactory.java:420)\r\n    \tat org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.updater.liquibase.lock.LiquibaseDBLockProvider.lazyInit(LiquibaseDBLockProvider.java:65)\r\n    \tat org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.updater.liquibase.lock.LiquibaseDBLockProvider.lambda$waitForLock$2(LiquibaseDBLockProvider.java:96)\r\n    \tat org.keycloak.keycloak-server-spi-private@19.0.3//org.keycloak.models.utils.KeycloakModelUtils.suspendJtaTransaction(KeycloakModelUtils.java:751)\r\n    \r\n    07:16:33,787 INFO  [org.jboss.as.server] (Thread-1) WFLYSRV0220: Server shutdown has been requested via an OS signal\r\n    07:16:33,799 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) WFLYJCA0010: Unbound data source [java:jboss/datasources/KeycloakDS]\r\n    07:16:33,800 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]\r\n    07:16:33,802 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0008: Undertow HTTPS listener https suspending\r\n    07:16:33,807 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 0.0.0.0:8443\r\n    07:16:33,808 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) WFLYJCA0019: Stopped Driver service with driver-name = mysql\r\n    07:16:33,811 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 58) ISPN000080: Disconnecting JGroups channel `ejb`\r\n    07:16:33,813 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 65) ISPN000080: Disconnecting JGroups channel `ejb`\r\n    07:16:33,814 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 59) ISPN000080: Disconnecting JGroups channel `ejb`\r\n    07:16:33,956 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,958 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.filters.KeycloakSecurityHeadersFilter from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002200: Adding class resource org.keycloak.services.resources.ThemeResource from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.error.KcUnrecognizedPropertyExceptionHandler from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.error.KeycloakErrorHandler from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002200: Adding class resource org.keycloak.services.resources.JsResource from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.RealmsResource from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.WelcomeResource from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002210: Adding provider singleton org.keycloak.services.util.ObjectMapperResolver from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.RobotsResource from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.admin.AdminRoot from Application class org.keycloak.services.resources.KeycloakApplication\r\n    07:16:34,012 INFO  [org.hibernate.validator.internal.util.Version] (ServerService Thread Pool -- 69) HV000001: Hibernate Validator 6.0.23.Final\r\n    07:16:34,023 INFO  [org.jboss.resteasy.plugins.validation.i18n] (ServerService Thread Pool -- 69) RESTEASY008550: Unable to find CDI supporting ValidatorFactory. Using default ValidatorFactory\r\n    07:16:34,097 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 69) WFLYUT0021: Registered web context: &#39;/auth&#39; for server &#39;default-server&#39;\r\n    07:16:34,099 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 69) WFLYUT0022: Unregistered web context: &#39;/auth&#39; from server &#39;default-server&#39;\r\n    07:16:34,101 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0008: Undertow AJP listener ajp suspending\r\n    07:16:34,101 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]\r\n    07:16:34,101 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0007: Undertow AJP listener ajp stopped, was bound to 0.0.0.0:8009\r\n    07:16:34,102 INFO  [org.jboss.modcluster] (ServerService Thread Pool -- 69) MODCLUSTER000002: Initiating mod_cluster shutdown\r\n    07:16:34,105 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) WFLYJCA0019: Stopped Driver service with driver-name = h2\r\n    07:16:34,106 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending\r\n    07:16:34,106 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 0.0.0.0:8080\r\n    07:16:34,108 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 58) WFLYCLINF0003: Stopped http-remoting-connector cache from ejb container\r\n    07:16:34,111 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 58) ISPN000080: Disconnecting JGroups channel `ejb`\r\n    07:16:34,116 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0019: Host default-host stopping\r\n    07:16:34,117 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0004: Undertow 2.2.17.Final stopping\r\n    07:16:34,123 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment keycloak-server.war (runtime-name: keycloak-server.war) in 334ms\r\n    07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 57) WFLYCLINF0003: Stopped authorization cache from keycloak container\r\n    07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 58) WFLYCLINF0003: Stopped keys cache from keycloak container\r\n    07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 66) WFLYCLINF0003: Stopped users cache from keycloak container\r\n    07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 64) WFLYCLINF0003: Stopped realms cache from keycloak container\r\n    07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 56) WFLYCLINF0003: Stopped offlineSessions cache from keycloak container\r\n    07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 60) WFLYCLINF0003: Stopped authenticationSessions cache from keycloak container\r\n    07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 63) WFLYCLINF0003: Stopped clientSessions cache from keycloak container\r\n    07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 68) WFLYCLINF0003: Stopped loginFailures cache from keycloak container\r\n    07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 62) WFLYCLINF0003: Stopped actionTokens cache from keycloak container\r\n    07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 59) WFLYCLINF0003: Stopped work cache from keycloak container\r\n    07:16:34,138 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 65) WFLYCLINF0003: Stopped offlineClientSessions cache from keycloak container\r\n    07:16:34,138 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 69) WFLYCLINF0003: Stopped sessions cache from keycloak container\r\n    07:16:34,141 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 69) ISPN000080: Disconnecting JGroups channel `ejb`\r\n    07:16:34,150 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([(&quot;subsystem&quot; =&gt; &quot;metrics&quot;)]): java.lang.NullPointerException\r\n    \tat org.wildfly.extension.metrics@26.1.1.Final//org.wildfly.extension.metrics.MetricsSubsystemAdd$2.execute(MetricsSubsystemAdd.java:91)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:559)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:572)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:534)\r\n    \tat org.jboss.as.server@18.1.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:470)\r\n    \tat org.jboss.as.server@18.1.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:414)\r\n    \tat org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:473)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n    \r\n    07:16:34,156 ERROR [org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0022: Deploy of deployment &quot;keycloak-server.war&quot; was rolled back with no failure message\r\n    07:16:34,176 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0050: Keycloak 19.0.3 (WildFly Core 18.1.1.Final) stopped in 386ms\r\n    User with username &#39;admin&#39; already added to &#39;/opt/jboss/keycloak/standalone/configuration/keycloak-add-user.json&#39;\r\n    Oct 20, 2023 7:17:09 AM org.keycloak.common.crypto.CryptoIntegration detectProvider\r\n    INFO: Detected crypto provider: org.keycloak.crypto.def.DefaultCryptoProvider\r\n    User with username &#39;admin&#39; already added to &#39;/opt/jboss/keycloak/standalone/configuration/keycloak-add-user.json&#39;\r\n\r\n\r\nI have checked the DB credentials and it is working fine. Other docker using the same credential is able to connect to db.\r\n\r\nalso even after the DB connection failure in the docker, it is continuing to the next step and failing with &quot;`: Operation (&quot;add&quot;) failed - address: ([(&quot;subsystem&quot; =&gt; &quot;metrics&quot;)]): java.lang.NullPointerException`&quot;\r\n\r\nCan anyone let me know what could be the issue? I am struggling for last 2 days. \r\n\r\nThanks","title":"Not able to setup the keycloak using Docker","body":"<p>Following is my docker file:</p>\n<pre><code>version: '3'\nvolumes:\n  mysql_data:\n    driver: local\nservices:\n  keycloak:\n    image: 'quay.io/keycloak/keycloak:legacy'\n    restart: always\n    environment:\n      DB_VENDOR: MYSQL\n      DB_ADDR: localhost\n      DB_DATABASE: keycloak\n      DB_USER: root\n      DB_PASSWORD: mypassword\n      KEYCLOAK_USER: admin\n      KEYCLOAK_PASSWORD: myadminpassword\n      JAVA_OPTS_APPEND: '-Dkeycloak.profile.feature.token_exchange=enabled -Dkeycloak.profile.feature.admin_fine_grained_authz=enabled'\n    ports:\n      - '8181:8080'\n    expose:\n      - '80'\n    extra_hosts:\n      - 'host.docker.internal:host-gateway'\n</code></pre>\n<p>When running this docker, it is starting but then keep restart with following errors:</p>\n<pre><code>07:16:33,781 WARN  [org.jboss.jca.core.connectionmanager.pool.strategy.OnePool] (ServerService Thread Pool -- 69) IJ000604: Throwable while attempting to get a new connection: null: javax.resource.ResourceException: IJ031084: Unable to create connection\n    at org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createLocalManagedConnection(LocalManagedConnectionFactory.java:364)\n    at org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:371)\n    at org.jboss.ironjacamar.jdbcadapters@1.5.3.Final//org.jboss.jca.adapters.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:287)\n    at org.jboss.ironjacamar.impl@1.5.3.Final//org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedDequeManagedConnectionPool.createConnectionEventListener(SemaphoreConcurrentLinkedDequeManagedConnectionPool.java:1328)\n    at org.jboss.ironjacamar.impl@1.5.3.Final//org.jboss.jca.core.connectionmanager.pool.mcp.SemaphoreConcurrentLinkedDequeManagedConnectionPool.getConnection(SemaphoreConcurrentLinkedDequeManagedConnectionPool.java:505)\n    \nCaused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.jdbc@8.0.22//com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174)\n    ... 60 more\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    ... 64 more\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n    at java.base/java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.base/java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:412)\n    ... 67 more\n\n07:16:33,784 FATAL [org.keycloak.services] (ServerService Thread Pool -- 69) Error during startup: java.lang.RuntimeException: Failed to connect to database\n    at org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.DefaultJpaConnectionProviderFactory.getConnection(DefaultJpaConnectionProviderFactory.java:420)\n    at org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.updater.liquibase.lock.LiquibaseDBLockProvider.lazyInit(LiquibaseDBLockProvider.java:65)\n    at org.keycloak.keycloak-model-jpa@19.0.3//org.keycloak.connections.jpa.updater.liquibase.lock.LiquibaseDBLockProvider.lambda$waitForLock$2(LiquibaseDBLockProvider.java:96)\n    at org.keycloak.keycloak-server-spi-private@19.0.3//org.keycloak.models.utils.KeycloakModelUtils.suspendJtaTransaction(KeycloakModelUtils.java:751)\n\n07:16:33,787 INFO  [org.jboss.as.server] (Thread-1) WFLYSRV0220: Server shutdown has been requested via an OS signal\n07:16:33,799 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) WFLYJCA0010: Unbound data source [java:jboss/datasources/KeycloakDS]\n07:16:33,800 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) WFLYMAIL0002: Unbound mail session [java:jboss/mail/Default]\n07:16:33,802 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0008: Undertow HTTPS listener https suspending\n07:16:33,807 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-7) WFLYUT0007: Undertow HTTPS listener https stopped, was bound to 0.0.0.0:8443\n07:16:33,808 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-4) WFLYJCA0019: Stopped Driver service with driver-name = mysql\n07:16:33,811 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 58) ISPN000080: Disconnecting JGroups channel `ejb`\n07:16:33,813 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 65) ISPN000080: Disconnecting JGroups channel `ejb`\n07:16:33,814 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 59) ISPN000080: Disconnecting JGroups channel `ejb`\n07:16:33,956 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002225: Deploying javax.ws.rs.core.Application: class org.keycloak.services.resources.KeycloakApplication\n07:16:33,958 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.filters.KeycloakSecurityHeadersFilter from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002200: Adding class resource org.keycloak.services.resources.ThemeResource from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.error.KcUnrecognizedPropertyExceptionHandler from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002205: Adding provider class org.keycloak.services.error.KeycloakErrorHandler from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002200: Adding class resource org.keycloak.services.resources.JsResource from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.RealmsResource from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.WelcomeResource from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002210: Adding provider singleton org.keycloak.services.util.ObjectMapperResolver from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.RobotsResource from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:33,959 INFO  [org.jboss.resteasy.resteasy_jaxrs.i18n] (ServerService Thread Pool -- 69) RESTEASY002220: Adding singleton resource org.keycloak.services.resources.admin.AdminRoot from Application class org.keycloak.services.resources.KeycloakApplication\n07:16:34,012 INFO  [org.hibernate.validator.internal.util.Version] (ServerService Thread Pool -- 69) HV000001: Hibernate Validator 6.0.23.Final\n07:16:34,023 INFO  [org.jboss.resteasy.plugins.validation.i18n] (ServerService Thread Pool -- 69) RESTEASY008550: Unable to find CDI supporting ValidatorFactory. Using default ValidatorFactory\n07:16:34,097 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 69) WFLYUT0021: Registered web context: '/auth' for server 'default-server'\n07:16:34,099 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 69) WFLYUT0022: Unregistered web context: '/auth' from server 'default-server'\n07:16:34,101 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0008: Undertow AJP listener ajp suspending\n07:16:34,101 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0010: Unbound data source [java:jboss/datasources/ExampleDS]\n07:16:34,101 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0007: Undertow AJP listener ajp stopped, was bound to 0.0.0.0:8009\n07:16:34,102 INFO  [org.jboss.modcluster] (ServerService Thread Pool -- 69) MODCLUSTER000002: Initiating mod_cluster shutdown\n07:16:34,105 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-7) WFLYJCA0019: Stopped Driver service with driver-name = h2\n07:16:34,106 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0008: Undertow HTTP listener default suspending\n07:16:34,106 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0007: Undertow HTTP listener default stopped, was bound to 0.0.0.0:8080\n07:16:34,108 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 58) WFLYCLINF0003: Stopped http-remoting-connector cache from ejb container\n07:16:34,111 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 58) ISPN000080: Disconnecting JGroups channel `ejb`\n07:16:34,116 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-5) WFLYUT0019: Host default-host stopping\n07:16:34,117 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0004: Undertow 2.2.17.Final stopping\n07:16:34,123 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-4) WFLYSRV0028: Stopped deployment keycloak-server.war (runtime-name: keycloak-server.war) in 334ms\n07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 57) WFLYCLINF0003: Stopped authorization cache from keycloak container\n07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 58) WFLYCLINF0003: Stopped keys cache from keycloak container\n07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 66) WFLYCLINF0003: Stopped users cache from keycloak container\n07:16:34,128 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 64) WFLYCLINF0003: Stopped realms cache from keycloak container\n07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 56) WFLYCLINF0003: Stopped offlineSessions cache from keycloak container\n07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 60) WFLYCLINF0003: Stopped authenticationSessions cache from keycloak container\n07:16:34,136 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 63) WFLYCLINF0003: Stopped clientSessions cache from keycloak container\n07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 68) WFLYCLINF0003: Stopped loginFailures cache from keycloak container\n07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 62) WFLYCLINF0003: Stopped actionTokens cache from keycloak container\n07:16:34,137 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 59) WFLYCLINF0003: Stopped work cache from keycloak container\n07:16:34,138 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 65) WFLYCLINF0003: Stopped offlineClientSessions cache from keycloak container\n07:16:34,138 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 69) WFLYCLINF0003: Stopped sessions cache from keycloak container\n07:16:34,141 INFO  [org.infinispan.CLUSTER] (ServerService Thread Pool -- 69) ISPN000080: Disconnecting JGroups channel `ejb`\n07:16:34,150 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([(&quot;subsystem&quot; =&gt; &quot;metrics&quot;)]): java.lang.NullPointerException\n    at org.wildfly.extension.metrics@26.1.1.Final//org.wildfly.extension.metrics.MetricsSubsystemAdd$2.execute(MetricsSubsystemAdd.java:91)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.ModelControllerImpl.boot(ModelControllerImpl.java:559)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:572)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:534)\n    at org.jboss.as.server@18.1.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:470)\n    at org.jboss.as.server@18.1.1.Final//org.jboss.as.server.ServerService.boot(ServerService.java:414)\n    at org.jboss.as.controller@18.1.1.Final//org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:473)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n\n07:16:34,156 ERROR [org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0022: Deploy of deployment &quot;keycloak-server.war&quot; was rolled back with no failure message\n07:16:34,176 INFO  [org.jboss.as] (MSC service thread 1-3) WFLYSRV0050: Keycloak 19.0.3 (WildFly Core 18.1.1.Final) stopped in 386ms\nUser with username 'admin' already added to '/opt/jboss/keycloak/standalone/configuration/keycloak-add-user.json'\nOct 20, 2023 7:17:09 AM org.keycloak.common.crypto.CryptoIntegration detectProvider\nINFO: Detected crypto provider: org.keycloak.crypto.def.DefaultCryptoProvider\nUser with username 'admin' already added to '/opt/jboss/keycloak/standalone/configuration/keycloak-add-user.json'\n</code></pre>\n<p>I have checked the DB credentials and it is working fine. Other docker using the same credential is able to connect to db.</p>\n<p>also even after the DB connection failure in the docker, it is continuing to the next step and failing with &quot;<code>: Operation (&quot;add&quot;) failed - address: ([(&quot;subsystem&quot; =&gt; &quot;metrics&quot;)]): java.lang.NullPointerException</code>&quot;</p>\n<p>Can anyone let me know what could be the issue? I am struggling for last 2 days.</p>\n<p>Thanks</p>\n"},{"tags":["java","class","program-entry-point"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":76,"creation_date":1375845673,"post_id":18093928,"comment_id":26486084,"body_markdown":"Please note that this is a &quot;self-answer&quot; question that is intended to be a generic reference Q&amp;A for new Java users. I could not find an existing Q&amp;A that covers this adequately (IMO).","body":"Please note that this is a &quot;self-answer&quot; question that is intended to be a generic reference Q&amp;A for new Java users. I could not find an existing Q&amp;A that covers this adequately (IMO)."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":13,"up_vote_count":1633,"is_accepted":true,"score":1620,"last_activity_date":1697786492,"creation_date":1375844566,"answer_id":18093929,"question_id":18093928,"body_markdown":"The `java &lt;class-name&gt;` command syntax\r\n--------------------------------------\r\n\r\nFirst of all, you need to understand the correct way to launch a program using the `java` (or `javaw`) command.\r\n\r\nThe normal syntax&lt;sup&gt;1&lt;/sup&gt; is this:\r\n\r\n        java [ &lt;options&gt; ] &lt;class-name&gt; [&lt;arg&gt; ...]\r\n\r\nwhere `&lt;option&gt;` is a command line option (starting with a &quot;-&quot; character), `&lt;class-name&gt;` is a fully qualified Java class name, and `&lt;arg&gt;` is an arbitrary command line argument that gets passed to your application.  \r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - There are some other syntaxes which are described near the end of this answer.&lt;/sup&gt;\r\n\r\nThe fully qualified name (FQN) for the class is conventionally written as you would in Java source code; e.g.\r\n\r\n        packagename.packagename2.packagename3.ClassName\r\n\r\nHowever some versions of the `java` command allow you to use slashes instead of periods; e.g.\r\n\r\n        packagename/packagename2/packagename3/ClassName\r\n\r\nwhich (confusingly) looks like a file pathname, but isn&#39;t one.  Note that the term *fully qualified name* is standard Java terminology ... not something I just made up to confuse you :-)\r\n\r\nHere is an example of what a `java` command should look like:\r\n\r\n        java -Xmx100m com.acme.example.ListUsers fred joe bert\r\n\r\nThe above is going to cause the `java` command to do the following:\r\n\r\n  1.  Search for the compiled version of the `com.acme.example.ListUsers` class.\r\n  2.  Load the class.\r\n  3.  Check that the class has a `main` method with *signature*, *return type* and *modifiers* given by `public static void main(String[])`.  (Note, the method argument&#39;s name is **NOT** part of the signature.)\r\n  4.  Call that method passing it the command line arguments (&quot;fred&quot;, &quot;joe&quot;, &quot;bert&quot;) as a `String[]`.\r\n\r\nReasons why Java cannot find the class\r\n--------------------------------------\r\n\r\nWhen you get the message &quot;Could not find or load main class ...&quot;, that means that the first step has failed.  The `java` command was not able to find the class.  And indeed, the &quot;...&quot; in the message will be the *fully qualified class name* that `java` is looking for. \r\n\r\nSo why might it be unable to find the class?  \r\n\r\nReason #1 - you made a mistake with the classname argument\r\n----------------------------------------------------------\r\n\r\nThe first likely cause is that you may have provided the wrong class name.  (Or ... the right class name, but in the wrong form.)   Considering the example above, here are a variety of **wrong ways** to specify the class name:\r\n\r\n  - Example #1 - a simple class name:\r\n        \r\n        java ListUser\r\n\r\n    When the class is declared in a package such as `com.acme.example`, then you must use the full classname *including* the package name in the `java` command; e.g. \r\n\r\n        java com.acme.example.ListUser\r\n\r\n  - Example #2 - a filename or pathname rather than a class name:\r\n\r\n        java ListUser.class\r\n        java com/acme/example/ListUser.class\r\n\r\n  - Example #3 - a class name with the casing incorrect:\r\n\r\n        java com.acme.example.listuser\r\n\r\n  - Example #4 - a typo\r\n\r\n        java com.acme.example.mistuser\r\n\r\n  - Example #5 - a source filename (except for Java 11 or later; see below)\r\n\r\n        java ListUser.java\r\n\r\n  - Example #6 - you forgot the class name entirely\r\n\r\n        java lots of arguments\r\n\r\nReason #2 - the application&#39;s classpath is incorrectly specified\r\n-----------------------------------------------------------------\r\n\r\nThe second likely cause is that the class name is correct, but that the `java` command cannot find the class.  To understand this, you need to understand the concept of the &quot;classpath&quot;.  This is explained *well* by the Oracle documentation:\r\n\r\n - [The `java` command documentation][1]\r\n - [Setting the Classpath][2]. \r\n - The Java Tutorial - [PATH and CLASSPATH][3]\r\n\r\nSo ... if you have specified the class name correctly, the next thing to check is that you have specified the classpath correctly:\r\n\r\n 1. Read the three documents linked above.  (Yes ... READ them!  It is important that a Java programmer *understands* at least the basics of how the Java classpath mechanisms works.)\r\n 2. Look at command line and / or the CLASSPATH environment variable that is in effect when you run the `java` command.  Check that the directory names and JAR file names are correct.\r\n 3. If there are *relative* pathnames in the classpath, check that they resolve correctly ... from the current directory that is in effect when you run the `java` command.\r\n 4. Check that the class (mentioned in the error message) can be located on the *effective* classpath.\r\n 5. Note that the classpath syntax is *different* for Windows versus Linux and Mac OS. (The classpath separator is `;` on Windows and `:` on the others.  If you use the wrong separator for your platform, you won&#39;t get an explicit error message.  Instead, you will get a nonexistent file or directory on the path that will be silently ignored.)\r\n\r\nReason #2a - the wrong directory is on the classpath\r\n----------------------------------------------------\r\n\r\nWhen you put a directory on the classpath, it notionally corresponds to the root of the qualified name space.  Classes are located in the directory structure beneath that root, *by mapping the fully qualified name to a pathname*.  So for example, if &quot;/usr/local/acme/classes&quot; is on the class path, then when the JVM looks for a class called `com.acme.example.Foon`, it will look for a &quot;.class&quot; file with this pathname:\r\n\r\n      /usr/local/acme/classes/com/acme/example/Foon.class\r\n\r\nIf you had put &quot;/usr/local/acme/classes/com/acme/example&quot; on the classpath, then the JVM wouldn&#39;t be able to find the class.\r\n\r\nReason #2b - the subdirectory path doesn&#39;t match the FQN\r\n--------------------------------------------------------\r\n\r\nIf your classes FQN is `com.acme.example.Foon`, then the JVM is going to look for &quot;Foon.class&quot; in the directory &quot;com/acme/example&quot;:\r\n\r\n  - If your directory structure doesn&#39;t match the package naming as per the pattern above, the JVM won&#39;t find your class.\r\n\r\n  - If you attempt *rename* a class by moving it, that will fail as well ... but the exception stacktrace will be different.  It is liable to say something like this:\r\n\r\n        Caused by: java.lang.NoClassDefFoundError: &lt;path&gt; (wrong name: &lt;name&gt;)\r\n\r\n     because the FQN in the class file doesn&#39;t match what the class loader is expecting to find.\r\n\r\nTo give a concrete example, supposing that:\r\n\r\n- you want to run `com.acme.example.Foon` class,\r\n- the full file path is `/usr/local/acme/classes/com/acme/example/Foon.class`,\r\n- your current working directory is `/usr/local/acme/classes/com/acme/example/`,\r\n\r\nthen:\r\n\r\n&lt;!-- language: lang-bash --&gt;\r\n\r\n    # wrong, FQN is needed\r\n    java Foon\r\n\r\n    # wrong, there is no `com/acme/example` folder in the current working directory\r\n    java com.acme.example.Foon\r\n\r\n    # wrong, similar to above\r\n    java -classpath . com.acme.example.Foon\r\n\r\n    # fine; relative classpath set\r\n    java -classpath ../../.. com.acme.example.Foon\r\n\r\n    # fine; absolute classpath set\r\n    java -classpath /usr/local/acme/classes com.acme.example.Foon\r\n\r\nNotes:\r\n\r\n  - The `-classpath` option can be shortened to `-cp` in most Java releases.  Check the respective manual entries for `java`, `javac` and so on.\r\n  - Think carefully when choosing between absolute and relative pathnames in classpaths.  Remember that a relative pathname may &quot;break&quot; if the current directory changes.  \r\n\r\nReason #2c - dependencies missing from the classpath\r\n----------------------------------------------------\r\n\r\nThe classpath needs to include all of the *other* (non-system) classes that your application depends on.  (The system classes are located automatically, and you rarely need to concern yourself with this.)  For the main class to load correctly, the JVM needs to find:\r\n    \r\n  - the class itself.\r\n  - all classes and interfaces in the superclass hierarchy (e.g. see https://stackoverflow.com/questions/42880748)\r\n  - all classes and interfaces that are referred to by means of variable or variable declarations, or method call or field access expressions.\r\n\r\n(Note: the JLS and JVM specifications allow some scope for a JVM to load classes &quot;lazily&quot;, and this can affect when a classloader exception is thrown.)\r\n\r\nReason #3 - the class has been declared in the wrong package\r\n------------------------------------------------------------\r\n\r\nIt occasionally happens that someone puts a source code file into the\r\nthe wrong folder in their source code tree, or they leave out the `package` declaration.  If you do this in an IDE, the IDE&#39;s compiler will tell you about this immediately.  Similarly if you use a decent Java build tool, the tool will run `javac` in a way that will detect the problem.  However, if you build your Java code by hand, you can do it in such a way that the compiler doesn&#39;t notice the problem, and the resulting &quot;.class&quot; file is not in the place that you expect it to be.\r\n\r\nStill can&#39;t find the problem?\r\n-----------------------------\r\n\r\nThere lots of things to check, and it is easy to miss something.  Try adding the `-Xdiag` option to the `java` command line (as the first thing after `java`).  It will output various things about class loading, and this may offer you clues as to what the real problem is.\r\n\r\nAlso, consider possible problems caused by copying and pasting invisible or non-ASCII characters from websites, documents and so on.  And consider &quot;homoglyphs&quot;, where two letters or symbols look the same ... but aren&#39;t.\r\n\r\nYou may run into this problem if you have invalid or incorrect signatures in `META-INF/*.SF`. You can try opening up the .jar in your favorite ZIP editor, and removing files from `META-INF` until all you have is your `MANIFEST.MF`.  However this is NOT RECOMMENDED in general.  (The invalid signature may be the result of someone having injected malware into the original signed JAR file.  If you erase the invalid signature, you are in infecting your application with the malware!)  The recommended approach is to get hold of JAR files with valid signatures, or rebuild them from the (authentic) original source code. \r\n\r\nFinally, you can apparently run into this problem if there is a syntax error in the `MANIFEST.MF` file (see https://stackoverflow.com/a/67145190/139985).\r\n\r\n------------------------\r\n\r\nAlternative syntaxes for `java`\r\n----------------------\r\n\r\nThere are three alternative syntaxes for the launching Java programs using the `java command`.\r\n\r\n 1) The syntax used for launching an &quot;executable&quot; JAR file is as follows:\r\n\r\n        java [ &lt;options&gt; ] -jar &lt;jar-file-name&gt; [&lt;arg&gt; ...]\r\n\r\n    e.g.\r\n\r\n        java -Xmx100m -jar /usr/local/acme-example/listuser.jar fred\r\n\r\n    The name of the entry-point class (i.e. `com.acme.example.ListUser`) and the classpath are specified in the MANIFEST of the JAR file. *Anything you specify as a classpath on the command line is ignored* with this syntax: only the `Class-Path` entry in the Manifest is used (and, transitively, those in any JAR files referenced by this entry). Note also that URLs in this `Class-Path` are *relative* to the location of the JAR it is contained in.\r\n\r\n 2) The syntax for launching an application from a module (Java 9 and later) is as follows:\r\n\r\n        java [ &lt;options&gt; ] --module &lt;module&gt;[/&lt;mainclass&gt;] [&lt;arg&gt; ...]\r\n\r\n    The name of the entrypoint class is either defined by the `&lt;module&gt;` itself, or is given by the optional `&lt;mainclass&gt;`.\r\n\r\n 3) From Java 11 onwards, you can use the `java` command to compile and run a single source code file using the following syntax:\r\n\r\n        java [ &lt;options&gt; ] &lt;sourcefile&gt; [&lt;arg&gt; ...]\r\n\r\n    where `&lt;sourcefile&gt;` is (typically) a file with the suffix &quot;.java&quot;.\r\n\r\nFor more details, please refer to the official documentation for the `java` command for the Java release that you are using.\r\n      \r\n\r\n--------------------\r\n\r\nIDEs\r\n----\r\n\r\nA typical Java IDE has support for running Java applications in the IDE JVM itself or in a child JVM.  These are *generally* immune from this particular exception, because the IDE uses its own mechanisms to construct the runtime classpath, identify the main class and create the `java` command line.\r\n\r\nHowever it is still possible for this exception to occur, if you do things behind the back of the IDE.  For example, if you have previously set up an Application Launcher for your Java app in Eclipse, and you then moved the JAR file containing the &quot;main&quot; class to a different place in the file system *without telling Eclipse*, Eclipse would unwittingly launch the JVM with an incorrect classpath.\r\n\r\nIn short, if you get this problem in an IDE, check for things like stale IDE state, broken project references or broken launcher configurations.\r\n\r\nIt is also possible for an IDE to simply get confused.  IDE&#39;s are hugely complicated pieces of software comprising many interacting parts.  Many of these parts adopt various caching strategies in order to make the IDE as a whole responsive.  These can sometimes go wrong, and one possible symptom is problems when launching applications.  If you suspect this could be happening, it is worth trying other things like restarting your IDE, rebuilding the project and so on.\r\n\r\n------------------------------\r\n\r\n\r\nOther References\r\n----------------\r\n\r\n  - From the Oracle Java Tutorials - [Common Problems (and Their Solutions)][4]\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html\r\n  [3]: http://docs.oracle.com/javase/tutorial/essential/environment/paths.html\r\n  [4]: http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<h2>The <code>java &lt;class-name&gt;</code> command syntax</h2>\n<p>First of all, you need to understand the correct way to launch a program using the <code>java</code> (or <code>javaw</code>) command.</p>\n<p>The normal syntax<sup>1</sup> is this:</p>\n<pre><code>    java [ &lt;options&gt; ] &lt;class-name&gt; [&lt;arg&gt; ...]\n</code></pre>\n<p>where <code>&lt;option&gt;</code> is a command line option (starting with a &quot;-&quot; character), <code>&lt;class-name&gt;</code> is a fully qualified Java class name, and <code>&lt;arg&gt;</code> is an arbitrary command line argument that gets passed to your application.</p>\n<hr />\n<p><sup>1 - There are some other syntaxes which are described near the end of this answer.</sup></p>\n<p>The fully qualified name (FQN) for the class is conventionally written as you would in Java source code; e.g.</p>\n<pre><code>    packagename.packagename2.packagename3.ClassName\n</code></pre>\n<p>However some versions of the <code>java</code> command allow you to use slashes instead of periods; e.g.</p>\n<pre><code>    packagename/packagename2/packagename3/ClassName\n</code></pre>\n<p>which (confusingly) looks like a file pathname, but isn't one.  Note that the term <em>fully qualified name</em> is standard Java terminology ... not something I just made up to confuse you :-)</p>\n<p>Here is an example of what a <code>java</code> command should look like:</p>\n<pre><code>    java -Xmx100m com.acme.example.ListUsers fred joe bert\n</code></pre>\n<p>The above is going to cause the <code>java</code> command to do the following:</p>\n<ol>\n<li>Search for the compiled version of the <code>com.acme.example.ListUsers</code> class.</li>\n<li>Load the class.</li>\n<li>Check that the class has a <code>main</code> method with <em>signature</em>, <em>return type</em> and <em>modifiers</em> given by <code>public static void main(String[])</code>.  (Note, the method argument's name is <strong>NOT</strong> part of the signature.)</li>\n<li>Call that method passing it the command line arguments (&quot;fred&quot;, &quot;joe&quot;, &quot;bert&quot;) as a <code>String[]</code>.</li>\n</ol>\n<h2>Reasons why Java cannot find the class</h2>\n<p>When you get the message &quot;Could not find or load main class ...&quot;, that means that the first step has failed.  The <code>java</code> command was not able to find the class.  And indeed, the &quot;...&quot; in the message will be the <em>fully qualified class name</em> that <code>java</code> is looking for.</p>\n<p>So why might it be unable to find the class?</p>\n<h2>Reason #1 - you made a mistake with the classname argument</h2>\n<p>The first likely cause is that you may have provided the wrong class name.  (Or ... the right class name, but in the wrong form.)   Considering the example above, here are a variety of <strong>wrong ways</strong> to specify the class name:</p>\n<ul>\n<li><p>Example #1 - a simple class name:</p>\n<pre><code>java ListUser\n</code></pre>\n<p>When the class is declared in a package such as <code>com.acme.example</code>, then you must use the full classname <em>including</em> the package name in the <code>java</code> command; e.g.</p>\n<pre><code>java com.acme.example.ListUser\n</code></pre>\n</li>\n<li><p>Example #2 - a filename or pathname rather than a class name:</p>\n<pre><code>java ListUser.class\njava com/acme/example/ListUser.class\n</code></pre>\n</li>\n<li><p>Example #3 - a class name with the casing incorrect:</p>\n<pre><code>java com.acme.example.listuser\n</code></pre>\n</li>\n<li><p>Example #4 - a typo</p>\n<pre><code>java com.acme.example.mistuser\n</code></pre>\n</li>\n<li><p>Example #5 - a source filename (except for Java 11 or later; see below)</p>\n<pre><code>java ListUser.java\n</code></pre>\n</li>\n<li><p>Example #6 - you forgot the class name entirely</p>\n<pre><code>java lots of arguments\n</code></pre>\n</li>\n</ul>\n<h2>Reason #2 - the application's classpath is incorrectly specified</h2>\n<p>The second likely cause is that the class name is correct, but that the <code>java</code> command cannot find the class.  To understand this, you need to understand the concept of the &quot;classpath&quot;.  This is explained <em>well</em> by the Oracle documentation:</p>\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"noreferrer\">The <code>java</code> command documentation</a></li>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html\" rel=\"noreferrer\">Setting the Classpath</a>.</li>\n<li>The Java Tutorial - <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/paths.html\" rel=\"noreferrer\">PATH and CLASSPATH</a></li>\n</ul>\n<p>So ... if you have specified the class name correctly, the next thing to check is that you have specified the classpath correctly:</p>\n<ol>\n<li>Read the three documents linked above.  (Yes ... READ them!  It is important that a Java programmer <em>understands</em> at least the basics of how the Java classpath mechanisms works.)</li>\n<li>Look at command line and / or the CLASSPATH environment variable that is in effect when you run the <code>java</code> command.  Check that the directory names and JAR file names are correct.</li>\n<li>If there are <em>relative</em> pathnames in the classpath, check that they resolve correctly ... from the current directory that is in effect when you run the <code>java</code> command.</li>\n<li>Check that the class (mentioned in the error message) can be located on the <em>effective</em> classpath.</li>\n<li>Note that the classpath syntax is <em>different</em> for Windows versus Linux and Mac OS. (The classpath separator is <code>;</code> on Windows and <code>:</code> on the others.  If you use the wrong separator for your platform, you won't get an explicit error message.  Instead, you will get a nonexistent file or directory on the path that will be silently ignored.)</li>\n</ol>\n<h2>Reason #2a - the wrong directory is on the classpath</h2>\n<p>When you put a directory on the classpath, it notionally corresponds to the root of the qualified name space.  Classes are located in the directory structure beneath that root, <em>by mapping the fully qualified name to a pathname</em>.  So for example, if &quot;/usr/local/acme/classes&quot; is on the class path, then when the JVM looks for a class called <code>com.acme.example.Foon</code>, it will look for a &quot;.class&quot; file with this pathname:</p>\n<pre><code>  /usr/local/acme/classes/com/acme/example/Foon.class\n</code></pre>\n<p>If you had put &quot;/usr/local/acme/classes/com/acme/example&quot; on the classpath, then the JVM wouldn't be able to find the class.</p>\n<h2>Reason #2b - the subdirectory path doesn't match the FQN</h2>\n<p>If your classes FQN is <code>com.acme.example.Foon</code>, then the JVM is going to look for &quot;Foon.class&quot; in the directory &quot;com/acme/example&quot;:</p>\n<ul>\n<li><p>If your directory structure doesn't match the package naming as per the pattern above, the JVM won't find your class.</p>\n</li>\n<li><p>If you attempt <em>rename</em> a class by moving it, that will fail as well ... but the exception stacktrace will be different.  It is liable to say something like this:</p>\n<pre><code>Caused by: java.lang.NoClassDefFoundError: &lt;path&gt; (wrong name: &lt;name&gt;)\n</code></pre>\n<p>because the FQN in the class file doesn't match what the class loader is expecting to find.</p>\n</li>\n</ul>\n<p>To give a concrete example, supposing that:</p>\n<ul>\n<li>you want to run <code>com.acme.example.Foon</code> class,</li>\n<li>the full file path is <code>/usr/local/acme/classes/com/acme/example/Foon.class</code>,</li>\n<li>your current working directory is <code>/usr/local/acme/classes/com/acme/example/</code>,</li>\n</ul>\n<p>then:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># wrong, FQN is needed\njava Foon\n\n# wrong, there is no `com/acme/example` folder in the current working directory\njava com.acme.example.Foon\n\n# wrong, similar to above\njava -classpath . com.acme.example.Foon\n\n# fine; relative classpath set\njava -classpath ../../.. com.acme.example.Foon\n\n# fine; absolute classpath set\njava -classpath /usr/local/acme/classes com.acme.example.Foon\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>The <code>-classpath</code> option can be shortened to <code>-cp</code> in most Java releases.  Check the respective manual entries for <code>java</code>, <code>javac</code> and so on.</li>\n<li>Think carefully when choosing between absolute and relative pathnames in classpaths.  Remember that a relative pathname may &quot;break&quot; if the current directory changes.</li>\n</ul>\n<h2>Reason #2c - dependencies missing from the classpath</h2>\n<p>The classpath needs to include all of the <em>other</em> (non-system) classes that your application depends on.  (The system classes are located automatically, and you rarely need to concern yourself with this.)  For the main class to load correctly, the JVM needs to find:</p>\n<ul>\n<li>the class itself.</li>\n<li>all classes and interfaces in the superclass hierarchy (e.g. see <a href=\"https://stackoverflow.com/questions/42880748\">Java class is present in classpath but startup fails with Error: Could not find or load main class</a>)</li>\n<li>all classes and interfaces that are referred to by means of variable or variable declarations, or method call or field access expressions.</li>\n</ul>\n<p>(Note: the JLS and JVM specifications allow some scope for a JVM to load classes &quot;lazily&quot;, and this can affect when a classloader exception is thrown.)</p>\n<h2>Reason #3 - the class has been declared in the wrong package</h2>\n<p>It occasionally happens that someone puts a source code file into the\nthe wrong folder in their source code tree, or they leave out the <code>package</code> declaration.  If you do this in an IDE, the IDE's compiler will tell you about this immediately.  Similarly if you use a decent Java build tool, the tool will run <code>javac</code> in a way that will detect the problem.  However, if you build your Java code by hand, you can do it in such a way that the compiler doesn't notice the problem, and the resulting &quot;.class&quot; file is not in the place that you expect it to be.</p>\n<h2>Still can't find the problem?</h2>\n<p>There lots of things to check, and it is easy to miss something.  Try adding the <code>-Xdiag</code> option to the <code>java</code> command line (as the first thing after <code>java</code>).  It will output various things about class loading, and this may offer you clues as to what the real problem is.</p>\n<p>Also, consider possible problems caused by copying and pasting invisible or non-ASCII characters from websites, documents and so on.  And consider &quot;homoglyphs&quot;, where two letters or symbols look the same ... but aren't.</p>\n<p>You may run into this problem if you have invalid or incorrect signatures in <code>META-INF/*.SF</code>. You can try opening up the .jar in your favorite ZIP editor, and removing files from <code>META-INF</code> until all you have is your <code>MANIFEST.MF</code>.  However this is NOT RECOMMENDED in general.  (The invalid signature may be the result of someone having injected malware into the original signed JAR file.  If you erase the invalid signature, you are in infecting your application with the malware!)  The recommended approach is to get hold of JAR files with valid signatures, or rebuild them from the (authentic) original source code.</p>\n<p>Finally, you can apparently run into this problem if there is a syntax error in the <code>MANIFEST.MF</code> file (see <a href=\"https://stackoverflow.com/a/67145190/139985\">https://stackoverflow.com/a/67145190/139985</a>).</p>\n<hr />\n<h2>Alternative syntaxes for <code>java</code></h2>\n<p>There are three alternative syntaxes for the launching Java programs using the <code>java command</code>.</p>\n<ol>\n<li><p>The syntax used for launching an &quot;executable&quot; JAR file is as follows:</p>\n<pre><code>java [ &lt;options&gt; ] -jar &lt;jar-file-name&gt; [&lt;arg&gt; ...]\n</code></pre>\n<p>e.g.</p>\n<pre><code>java -Xmx100m -jar /usr/local/acme-example/listuser.jar fred\n</code></pre>\n<p>The name of the entry-point class (i.e. <code>com.acme.example.ListUser</code>) and the classpath are specified in the MANIFEST of the JAR file. <em>Anything you specify as a classpath on the command line is ignored</em> with this syntax: only the <code>Class-Path</code> entry in the Manifest is used (and, transitively, those in any JAR files referenced by this entry). Note also that URLs in this <code>Class-Path</code> are <em>relative</em> to the location of the JAR it is contained in.</p>\n</li>\n<li><p>The syntax for launching an application from a module (Java 9 and later) is as follows:</p>\n<pre><code>java [ &lt;options&gt; ] --module &lt;module&gt;[/&lt;mainclass&gt;] [&lt;arg&gt; ...]\n</code></pre>\n<p>The name of the entrypoint class is either defined by the <code>&lt;module&gt;</code> itself, or is given by the optional <code>&lt;mainclass&gt;</code>.</p>\n</li>\n<li><p>From Java 11 onwards, you can use the <code>java</code> command to compile and run a single source code file using the following syntax:</p>\n<pre><code>java [ &lt;options&gt; ] &lt;sourcefile&gt; [&lt;arg&gt; ...]\n</code></pre>\n<p>where <code>&lt;sourcefile&gt;</code> is (typically) a file with the suffix &quot;.java&quot;.</p>\n</li>\n</ol>\n<p>For more details, please refer to the official documentation for the <code>java</code> command for the Java release that you are using.</p>\n<hr />\n<h2>IDEs</h2>\n<p>A typical Java IDE has support for running Java applications in the IDE JVM itself or in a child JVM.  These are <em>generally</em> immune from this particular exception, because the IDE uses its own mechanisms to construct the runtime classpath, identify the main class and create the <code>java</code> command line.</p>\n<p>However it is still possible for this exception to occur, if you do things behind the back of the IDE.  For example, if you have previously set up an Application Launcher for your Java app in Eclipse, and you then moved the JAR file containing the &quot;main&quot; class to a different place in the file system <em>without telling Eclipse</em>, Eclipse would unwittingly launch the JVM with an incorrect classpath.</p>\n<p>In short, if you get this problem in an IDE, check for things like stale IDE state, broken project references or broken launcher configurations.</p>\n<p>It is also possible for an IDE to simply get confused.  IDE's are hugely complicated pieces of software comprising many interacting parts.  Many of these parts adopt various caching strategies in order to make the IDE as a whole responsive.  These can sometimes go wrong, and one possible symptom is problems when launching applications.  If you suspect this could be happening, it is worth trying other things like restarting your IDE, rebuilding the project and so on.</p>\n<hr />\n<h2>Other References</h2>\n<ul>\n<li>From the Oracle Java Tutorials - <a href=\"http://docs.oracle.com/javase/tutorial/getStarted/problems/index.html\" rel=\"noreferrer\">Common Problems (and Their Solutions)</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1949626,"reputation":13702,"user_id":1754020,"accept_rate":87,"display_name":"Eddie Martinez"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1484412561,"creation_date":1383329096,"answer_id":19732627,"question_id":18093928,"body_markdown":"Sometimes what might be causing the issue has nothing to do with the main class, and I had to find this out the hard way. It was a referenced library that I moved, and it gave me the:\r\n\r\n&gt; Could not find or load main class xxx Linux\r\n\r\nI just deleted that reference, added it again, and it worked fine again.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Sometimes what might be causing the issue has nothing to do with the main class, and I had to find this out the hard way. It was a referenced library that I moved, and it gave me the:</p>\n\n<blockquote>\n  <p>Could not find or load main class xxx Linux</p>\n</blockquote>\n\n<p>I just deleted that reference, added it again, and it worked fine again.</p>\n"},{"tags":[],"owner":{"account_id":3670344,"reputation":73,"user_id":3057713,"display_name":"arun"},"down_vote_count":4,"up_vote_count":8,"is_accepted":false,"score":4,"last_activity_date":1385994814,"creation_date":1385993143,"answer_id":20330193,"question_id":18093928,"body_markdown":"First set the path using this command;\r\n\r\n    set path=&quot;paste the set path address&quot;\r\n\r\nThen you need to load the program. Type &quot;cd (folder name)&quot; in the stored drive and compile it. For Example, if my program stored on the D drive, type &quot;D:&quot; press enter and type &quot; cd (folder name)&quot;.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>First set the path using this command;</p>\n\n<pre><code>set path=\"paste the set path address\"\n</code></pre>\n\n<p>Then you need to load the program. Type \"cd (folder name)\" in the stored drive and compile it. For Example, if my program stored on the D drive, type \"D:\" press enter and type \" cd (folder name)\".</p>\n"},{"tags":[],"owner":{"account_id":294134,"reputation":9678,"user_id":597858,"accept_rate":85,"display_name":"KawaiKx"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1643827563,"creation_date":1394584677,"answer_id":22339676,"question_id":18093928,"body_markdown":"In my case, the error appeared because I had supplied the source file name instead of the class name. \r\n\r\nWe need to supply the class name containing the main method to the interpreter.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In my case, the error appeared because I had supplied the source file name instead of the class name.</p>\n<p>We need to supply the class name containing the main method to the interpreter.</p>\n"},{"tags":[],"owner":{"account_id":4165150,"reputation":3628,"user_id":3414257,"accept_rate":80,"display_name":"panoet"},"down_vote_count":4,"up_vote_count":305,"is_accepted":false,"score":301,"last_activity_date":1504533984,"creation_date":1400670395,"answer_id":23781433,"question_id":18093928,"body_markdown":"If your source code name is HelloWorld.java, your compiled code will be `HelloWorld.class`.\r\n\r\nYou will get that error if you call it using:\r\n\r\n    java HelloWorld.class\r\n\r\nInstead, use this:\r\n\r\n    java HelloWorld\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>If your source code name is HelloWorld.java, your compiled code will be <code>HelloWorld.class</code>.</p>\n\n<p>You will get that error if you call it using:</p>\n\n<pre><code>java HelloWorld.class\n</code></pre>\n\n<p>Instead, use this:</p>\n\n<pre><code>java HelloWorld\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1807234,"reputation":1381,"user_id":1644096,"accept_rate":100,"display_name":"Celebes"},"down_vote_count":2,"up_vote_count":45,"is_accepted":false,"score":43,"last_activity_date":1643827615,"creation_date":1404299505,"answer_id":24529636,"question_id":18093928,"body_markdown":"Specifying the classpath on the command line helped me. For example:\r\n\r\n1. Create a new folder, `C:\\temp`\r\n\r\n2. Create file Temp.java in `C:\\temp`, with the following class in it:\r\n\r\n        public class Temp {\r\n            public static void main(String args[]) {\r\n                System.out.println(args[0]);\r\n            }\r\n        }\r\n\r\n3. Open a command line in folder `C:\\temp`, and write the following command to compile the Temp class:\r\n\r\n        javac Temp.java\r\n\r\n4. Run the compiled Java class, adding the `-classpath` option to let JRE know where to find the class:\r\n\r\n        java -classpath C:\\temp Temp Hello!\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Specifying the classpath on the command line helped me. For example:</p>\n<ol>\n<li><p>Create a new folder, <code>C:\\temp</code></p>\n</li>\n<li><p>Create file Temp.java in <code>C:\\temp</code>, with the following class in it:</p>\n<pre><code> public class Temp {\n     public static void main(String args[]) {\n         System.out.println(args[0]);\n     }\n }\n</code></pre>\n</li>\n<li><p>Open a command line in folder <code>C:\\temp</code>, and write the following command to compile the Temp class:</p>\n<pre><code> javac Temp.java\n</code></pre>\n</li>\n<li><p>Run the compiled Java class, adding the <code>-classpath</code> option to let JRE know where to find the class:</p>\n<pre><code> java -classpath C:\\temp Temp Hello!\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":296370,"reputation":3367,"user_id":601288,"accept_rate":89,"display_name":"M-Razavi"},"down_vote_count":3,"up_vote_count":119,"is_accepted":false,"score":116,"last_activity_date":1643880230,"creation_date":1414411652,"answer_id":26587225,"question_id":18093928,"body_markdown":"With keyword &#39;package&#39;\r\n------------\r\n\r\n**If you have a `package` keyword in your source code (the main class is defined in a package)**, you should run it over the hierarchical directory, using the full name of the class (`packageName.MainClassName`).\r\n\r\nAssume there is a source code file (Main.java):\r\n\r\n    package com.test;\r\n\r\n    public class Main {\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;salam 2nya\\n&quot;);\r\n        }\r\n    }\r\n\r\nFor running this code, you should place `Main.Class` in the package like directory:\r\n\r\n&gt; C:\\Users\\workspace\\testapp\\com\\test\\Main.Java\r\n\r\nThen change the current directory of the terminal to the root directory of the project:\r\n\r\n    cd C:\\Users\\workspace\\testapp\r\n\r\nAnd finally, run the code:\r\n\r\n    java com.test.Main\r\n\r\n---------\r\n\r\nWithout keyword &#39;package&#39;\r\n---------------\r\n\r\nIf you don&#39;t have any package on your source code name maybe you are wrong with the wrong command. Assume that your Java file name is `Main.java`, after compile:\r\n\r\n    javac Main.java\r\n\r\nyour compiled code will be `Main.class`\r\n\r\nYou will get that error if you call it using:\r\n\r\n    java Main.class\r\n\r\nInstead, use this:\r\n\r\n    java Main\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<h2>With keyword 'package'</h2>\n<p><strong>If you have a <code>package</code> keyword in your source code (the main class is defined in a package)</strong>, you should run it over the hierarchical directory, using the full name of the class (<code>packageName.MainClassName</code>).</p>\n<p>Assume there is a source code file (Main.java):</p>\n<pre><code>package com.test;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;salam 2nya\\n&quot;);\n    }\n}\n</code></pre>\n<p>For running this code, you should place <code>Main.Class</code> in the package like directory:</p>\n<blockquote>\n<p>C:\\Users\\workspace\\testapp\\com\\test\\Main.Java</p>\n</blockquote>\n<p>Then change the current directory of the terminal to the root directory of the project:</p>\n<pre><code>cd C:\\Users\\workspace\\testapp\n</code></pre>\n<p>And finally, run the code:</p>\n<pre><code>java com.test.Main\n</code></pre>\n<hr />\n<h2>Without keyword 'package'</h2>\n<p>If you don't have any package on your source code name maybe you are wrong with the wrong command. Assume that your Java file name is <code>Main.java</code>, after compile:</p>\n<pre><code>javac Main.java\n</code></pre>\n<p>your compiled code will be <code>Main.class</code></p>\n<p>You will get that error if you call it using:</p>\n<pre><code>java Main.class\n</code></pre>\n<p>Instead, use this:</p>\n<pre><code>java Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3911684,"reputation":2653,"user_id":3236818,"accept_rate":50,"display_name":"tharinduwijewardane"},"down_vote_count":2,"up_vote_count":179,"is_accepted":false,"score":177,"last_activity_date":1643830393,"creation_date":1425612027,"answer_id":28891834,"question_id":18093928,"body_markdown":"**If your classes are in packages** then you have to `cd` to the root directory of your project and run using the fully qualified name of the class (packageName.MainClassName).\r\n\r\nExample:\r\n\r\nMy classes are in here:\r\n\r\n    D:\\project\\com\\cse\\\r\n\r\nThe fully qualified name of my main class is:\r\n\r\n    com.cse.Main\r\n\r\nSo I `cd` back to the root project directory:\r\n\r\n    D:\\project\r\n\r\nThen issue the `java` command:\r\n\r\n    java com.cse.Main\r\n\r\n&lt;sub&gt;This answer is for rescuing newbie Java programmers from the frustration caused by a common mistake. I recommend you read the accepted answer for more in depth knowledge about the Java classpath.&lt;/sub&gt;\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p><strong>If your classes are in packages</strong> then you have to <code>cd</code> to the root directory of your project and run using the fully qualified name of the class (packageName.MainClassName).</p>\n<p>Example:</p>\n<p>My classes are in here:</p>\n<pre><code>D:\\project\\com\\cse\\\n</code></pre>\n<p>The fully qualified name of my main class is:</p>\n<pre><code>com.cse.Main\n</code></pre>\n<p>So I <code>cd</code> back to the root project directory:</p>\n<pre><code>D:\\project\n</code></pre>\n<p>Then issue the <code>java</code> command:</p>\n<pre><code>java com.cse.Main\n</code></pre>\n<p><sub>This answer is for rescuing newbie Java programmers from the frustration caused by a common mistake. I recommend you read the accepted answer for more in depth knowledge about the Java classpath.</sub></p>\n"},{"tags":[],"owner":{"account_id":4072081,"reputation":429,"user_id":3344751,"accept_rate":75,"display_name":"Nathan Williams"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1484412934,"creation_date":1435651004,"answer_id":31132651,"question_id":18093928,"body_markdown":"In this instance you have:\r\n\r\n&gt; Could not find or load main class **?classpath**\r\n\r\nIt&#39;s because you are using &quot;-classpath&quot;, but the dash is not the same dash used by `java` on the command prompt. I had this issue copying and pasting from [Notepad][1] to cmd.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Notepad_%28software%29\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In this instance you have:</p>\n\n<blockquote>\n  <p>Could not find or load main class <strong>?classpath</strong></p>\n</blockquote>\n\n<p>It's because you are using \"-classpath\", but the dash is not the same dash used by <code>java</code> on the command prompt. I had this issue copying and pasting from <a href=\"http://en.wikipedia.org/wiki/Notepad_%28software%29\" rel=\"noreferrer\">Notepad</a> to cmd.</p>\n"},{"tags":[],"owner":{"account_id":4356593,"reputation":5306,"user_id":3555000,"accept_rate":68,"display_name":"Enamul Hassan"},"down_vote_count":1,"up_vote_count":64,"is_accepted":false,"score":63,"last_activity_date":1484413012,"creation_date":1440140301,"answer_id":32134203,"question_id":18093928,"body_markdown":"When the same code works on one PC, but it shows the error in another, the best solution I have ever found is compiling like the following:\r\n\r\n    javac HelloWorld.java\r\n    java -cp . HelloWorld\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>When the same code works on one PC, but it shows the error in another, the best solution I have ever found is compiling like the following:</p>\n\n<pre><code>javac HelloWorld.java\njava -cp . HelloWorld\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3744260,"reputation":365,"user_id":3113303,"display_name":"mathewbruens"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1643828143,"creation_date":1441173507,"answer_id":32345614,"question_id":18093928,"body_markdown":"I thought that I was somehow setting my classpath incorrectly, but the problem was that I typed:  \r\n\r\n    java -cp C:/java/MyClasses C:/java/MyClasses/utilities/myapp/Cool  \r\n\r\ninstead of:   \r\n\r\n    java -cp C:/java/MyClasses utilities/myapp/Cool   \r\n\r\nI thought the meaning of fully qualified meant to include the full path name instead of the full package name.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I thought that I was somehow setting my classpath incorrectly, but the problem was that I typed:</p>\n<pre><code>java -cp C:/java/MyClasses C:/java/MyClasses/utilities/myapp/Cool  \n</code></pre>\n<p>instead of:</p>\n<pre><code>java -cp C:/java/MyClasses utilities/myapp/Cool   \n</code></pre>\n<p>I thought the meaning of fully qualified meant to include the full path name instead of the full package name.</p>\n"},{"tags":[],"owner":{"account_id":251649,"reputation":11484,"user_id":529187,"accept_rate":34,"display_name":"Devs love ZenUML"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1643828192,"creation_date":1442453713,"answer_id":32621286,"question_id":18093928,"body_markdown":"According to the error message (&quot;Could not find or load main class&quot;), there are two categories of problems:\r\n\r\n 1. The Main class could not be **found**\r\n 2. The Main class could not be **loaded** (this case is not fully discussed in the accepted answer)\r\n\r\nThe Main class could not be **found** when there is **a typo or wrong syntax in the fully qualified class name** or it **does not exist in the provided classpath**.\r\n\r\nThe Main class could not be **loaded** when **the class cannot be initiated**. Typically the main class extends another class and that class does not exist in the provided classpath.\r\n\r\nFor example:\r\n\r\n```lang-java\r\npublic class YourMain extends org.apache.camel.spring.Main\r\n```\r\n\r\nIf camel-spring is not included, this error will be reported.\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>According to the error message (&quot;Could not find or load main class&quot;), there are two categories of problems:</p>\n<ol>\n<li>The Main class could not be <strong>found</strong></li>\n<li>The Main class could not be <strong>loaded</strong> (this case is not fully discussed in the accepted answer)</li>\n</ol>\n<p>The Main class could not be <strong>found</strong> when there is <strong>a typo or wrong syntax in the fully qualified class name</strong> or it <strong>does not exist in the provided classpath</strong>.</p>\n<p>The Main class could not be <strong>loaded</strong> when <strong>the class cannot be initiated</strong>. Typically the main class extends another class and that class does not exist in the provided classpath.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class YourMain extends org.apache.camel.spring.Main\n</code></pre>\n<p>If camel-spring is not included, this error will be reported.</p>\n"},{"tags":[],"owner":{"account_id":6929555,"reputation":79,"user_id":5319459,"display_name":"Anandaraja Ravi"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1643828512,"creation_date":1442545261,"answer_id":32643138,"question_id":18093928,"body_markdown":"In Java, when you sometimes run the JVM from the command line using the Java interpreter executable and are trying to start a program from a class file with `public static void main` (PSVM), you might run into the below error even though the classpath parameter to the JVM is accurate and the class file is present on the classpath:\r\n\r\n&gt; Error: main class not found or loaded\r\n\r\nThis happens if the class file with PSVM could not be loaded. One possible reason for that is that the class may be implementing an interface or extending another class that is not on the classpath. Normally if a class is not on the classpath, the error thrown indicates as such. But, if the class in use is extended or implemented, Java is unable to load the class itself.\r\n\r\nReference: https://www.computingnotes.net/java/error-main-class-not-found-or-loaded/\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In Java, when you sometimes run the JVM from the command line using the Java interpreter executable and are trying to start a program from a class file with <code>public static void main</code> (PSVM), you might run into the below error even though the classpath parameter to the JVM is accurate and the class file is present on the classpath:</p>\n<blockquote>\n<p>Error: main class not found or loaded</p>\n</blockquote>\n<p>This happens if the class file with PSVM could not be loaded. One possible reason for that is that the class may be implementing an interface or extending another class that is not on the classpath. Normally if a class is not on the classpath, the error thrown indicates as such. But, if the class in use is extended or implemented, Java is unable to load the class itself.</p>\n<p>Reference: <a href=\"https://www.computingnotes.net/java/error-main-class-not-found-or-loaded/\" rel=\"nofollow noreferrer\">https://www.computingnotes.net/java/error-main-class-not-found-or-loaded/</a></p>\n"},{"tags":[],"owner":{"account_id":1185299,"reputation":7276,"user_id":1159404,"accept_rate":75,"display_name":"Nenad Bulatović"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1484939553,"creation_date":1445721497,"answer_id":33323463,"question_id":18093928,"body_markdown":"On Windows put `.;` at the CLASSPATH value in the beginning.\r\n\r\nThe . (dot) means &quot;look in the current directory&quot;. This is a permanent solution.\r\n\r\nAlso you can set it &quot;one time&quot; with set `CLASSPATH=%CLASSPATH%;.`. This will last as long as your cmd window is open.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>On Windows put <code>.;</code> at the CLASSPATH value in the beginning.</p>\n\n<p>The . (dot) means \"look in the current directory\". This is a permanent solution.</p>\n\n<p>Also you can set it \"one time\" with set <code>CLASSPATH=%CLASSPATH%;.</code>. This will last as long as your cmd window is open.</p>\n"},{"tags":[],"owner":{"account_id":311542,"reputation":16271,"user_id":625189,"accept_rate":92,"display_name":"Jaanus"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643828653,"creation_date":1450102467,"answer_id":34269156,"question_id":18093928,"body_markdown":"I got this error after doing `mvn eclipse:eclipse`. This messed up my `.classpath` file a little bit.\r\n\r\nI had to change the lines in `.classpath` from\r\n\r\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/java&quot; including=&quot;**/*.java&quot;/&gt;\r\n    &lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/resources&quot; excluding=&quot;**/*.java&quot;/&gt;\r\n\r\nto \r\n\r\n\t&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/java&quot; output=&quot;target/classes&quot; /&gt;\r\n\t&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/resources&quot; excluding=&quot;**&quot;  output=&quot;target/classes&quot; /&gt;","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I got this error after doing <code>mvn eclipse:eclipse</code>. This messed up my <code>.classpath</code> file a little bit.</p>\n<p>I had to change the lines in <code>.classpath</code> from</p>\n<pre><code>&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/java&quot; including=&quot;**/*.java&quot;/&gt;\n&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/resources&quot; excluding=&quot;**/*.java&quot;/&gt;\n</code></pre>\n<p>to</p>\n<pre><code>&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/java&quot; output=&quot;target/classes&quot; /&gt;\n&lt;classpathentry kind=&quot;src&quot; path=&quot;src/main/resources&quot; excluding=&quot;**&quot;  output=&quot;target/classes&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1289016,"reputation":697,"user_id":1781376,"accept_rate":88,"display_name":"GuiRitter"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1643828828,"creation_date":1451175976,"answer_id":34476542,"question_id":18093928,"body_markdown":"This is a specific case:\r\n\r\nWindows (tested with [Windows 7][1]) doesn&#39;t accept special characters (like `&#225;`) in class and package names. Linux does, though.\r\n\r\nI found this out when I built a `.jar` in [NetBeans][2] and tried to run it in command line. It ran in NetBeans, but not on the  command line.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Windows_7\r\n  [2]: https://en.wikipedia.org/wiki/NetBeans\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>This is a specific case:</p>\n<p>Windows (tested with <a href=\"https://en.wikipedia.org/wiki/Windows_7\" rel=\"nofollow noreferrer\">Windows 7</a>) doesn't accept special characters (like <code>á</code>) in class and package names. Linux does, though.</p>\n<p>I found this out when I built a <code>.jar</code> in <a href=\"https://en.wikipedia.org/wiki/NetBeans\" rel=\"nofollow noreferrer\">NetBeans</a> and tried to run it in command line. It ran in NetBeans, but not on the  command line.</p>\n"},{"tags":[],"owner":{"account_id":934735,"reputation":23556,"user_id":963881,"accept_rate":83,"display_name":"syntagma"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1643828934,"creation_date":1452939991,"answer_id":34825877,"question_id":18093928,"body_markdown":"What fixed the problem in my case was:\r\n\r\nRight click on the project/class you want to run, and then *Run As* &amp;rarr; *Run Configurations*. Then you should either fix your existing configuration or add a new one in the following way:\r\n\r\nOpen the *Classpath* tab, click on the *Advanced...* button, and then add **`bin` folder** of your project.\r\n\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>What fixed the problem in my case was:</p>\n<p>Right click on the project/class you want to run, and then <em>Run As</em> → <em>Run Configurations</em>. Then you should either fix your existing configuration or add a new one in the following way:</p>\n<p>Open the <em>Classpath</em> tab, click on the <em>Advanced...</em> button, and then add <strong><code>bin</code> folder</strong> of your project.</p>\n"},{"tags":[],"owner":{"account_id":4491344,"reputation":544,"user_id":3652368,"accept_rate":100,"display_name":"Anus Kaleem"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1484939769,"creation_date":1465059891,"answer_id":37632877,"question_id":18093928,"body_markdown":"I was unable to solve this problem with the solutions stated here (although the answer stated has, no doubt, cleared my concepts). I faced this problem two times and each time I have tried different solutions (in the Eclipse IDE).\r\n \r\n - Firstly, I have come across with multiple `main` methods in different classes of my project. So, I had deleted the `main` method from subsequent classes.\r\n - Secondly, I tried following solution:\r\n  1. Right click on my main project directory.\r\n  2. Head to source then clean up and stick with the default settings and on Finish. After some background tasks you will be directed to your main project directory. \r\n  3. After that I close my project, reopen it, and boom, I finally solved my problem.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I was unable to solve this problem with the solutions stated here (although the answer stated has, no doubt, cleared my concepts). I faced this problem two times and each time I have tried different solutions (in the Eclipse IDE).</p>\n\n<ul>\n<li>Firstly, I have come across with multiple <code>main</code> methods in different classes of my project. So, I had deleted the <code>main</code> method from subsequent classes.</li>\n<li>Secondly, I tried following solution:\n\n<ol>\n<li>Right click on my main project directory.</li>\n<li>Head to source then clean up and stick with the default settings and on Finish. After some background tasks you will be directed to your main project directory. </li>\n<li>After that I close my project, reopen it, and boom, I finally solved my problem.</li>\n</ol></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5481720,"reputation":2613,"user_id":4357947,"accept_rate":81,"display_name":"Marco V"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1643828985,"creation_date":1465989232,"answer_id":37833840,"question_id":18093928,"body_markdown":"You really need to do this from the `src` folder. There you type the following command line:\r\n\r\n```lang-none\r\n[name of the package].[Class Name] [arguments]\r\n```\r\n\r\nLet&#39;s say your class is called `CommandLine.class`, and the code looks like this:\r\n\r\n    package com.tutorialspoint.java;\r\n\r\n        /**\r\n         * Created by mda21185 on 15-6-2016.\r\n         */\r\n\r\n        public class CommandLine {\r\n            public static void main(String args[]){\r\n                for(int i=0; i&lt;args.length; i++){\r\n                    System.out.println(&quot;args[&quot; + i + &quot;]: &quot; + args[i]);\r\n                }\r\n            }\r\n        }\r\n\r\nThen you should `cd` to the src folder and the command you need to run would look like this:\r\n\r\n```lang-none\r\njava com.tutorialspoint.java.CommandLine this is a command line 200 -100\r\n```\r\n\r\nAnd the output on the command line would be:\r\n\r\n```lang-none\r\nargs[0]: this\r\nargs[1]: is\r\nargs[2]: a\r\nargs[3]: command\r\nargs[4]: line\r\nargs[5]: 200\r\nargs[6]: -100\r\n```\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>You really need to do this from the <code>src</code> folder. There you type the following command line:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[name of the package].[Class Name] [arguments]\n</code></pre>\n<p>Let's say your class is called <code>CommandLine.class</code>, and the code looks like this:</p>\n<pre><code>package com.tutorialspoint.java;\n\n    /**\n     * Created by mda21185 on 15-6-2016.\n     */\n\n    public class CommandLine {\n        public static void main(String args[]){\n            for(int i=0; i&lt;args.length; i++){\n                System.out.println(&quot;args[&quot; + i + &quot;]: &quot; + args[i]);\n            }\n        }\n    }\n</code></pre>\n<p>Then you should <code>cd</code> to the src folder and the command you need to run would look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java com.tutorialspoint.java.CommandLine this is a command line 200 -100\n</code></pre>\n<p>And the output on the command line would be:</p>\n<pre class=\"lang-none prettyprint-override\"><code>args[0]: this\nargs[1]: is\nargs[2]: a\nargs[3]: command\nargs[4]: line\nargs[5]: 200\nargs[6]: -100\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1517959094,"creation_date":1472026406,"answer_id":39117892,"question_id":18093928,"body_markdown":"Try **-Xdiag**.\r\n\r\n[Steve C&#39;s answer][1] covers the possible cases nicely, but sometimes to determine whether the class could not be *found* or *loaded* might not be that easy. Use ``java -Xdiag`` (since JDK&amp;nbsp;7). This prints out a nice stacktrace which provides a hint to what the message ``Could not find or load main class`` message means.\r\n\r\nFor instance, it can point you to other classes used by the main class that could not be found and prevented the main class to be loaded.\r\n\r\n  [1]: https://stackoverflow.com/a/18093929/1026104\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Try <strong>-Xdiag</strong>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/18093929/1026104\">Steve C's answer</a> covers the possible cases nicely, but sometimes to determine whether the class could not be <em>found</em> or <em>loaded</em> might not be that easy. Use <code>java -Xdiag</code> (since JDK&nbsp;7). This prints out a nice stacktrace which provides a hint to what the message <code>Could not find or load main class</code> message means.</p>\n\n<p>For instance, it can point you to other classes used by the main class that could not be found and prevented the main class to be loaded.</p>\n"},{"tags":[],"owner":{"account_id":477825,"reputation":510,"user_id":889534,"display_name":"Yamahar1sp"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1491733852,"creation_date":1474529726,"answer_id":39632977,"question_id":18093928,"body_markdown":"I had such an error in this case:\r\n\r\n    java -cp lib.jar com.mypackage.Main\r\n\r\nIt works with `;` for Windows and `:` for Unix:\r\n\r\n    java -cp lib.jar; com.mypackage.Main\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I had such an error in this case:</p>\n\n<pre><code>java -cp lib.jar com.mypackage.Main\n</code></pre>\n\n<p>It works with <code>;</code> for Windows and <code>:</code> for Unix:</p>\n\n<pre><code>java -cp lib.jar; com.mypackage.Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":215504,"reputation":52462,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1484940293,"creation_date":1475597284,"answer_id":39857059,"question_id":18093928,"body_markdown":"All answers here are directed towards Windows users it seems. For Mac, the classpath separator is `:`, not `;`. As an error setting the classpath using `;` is not thrown then this can be a difficult to discover if coming from Windows to Mac.\r\n\r\nHere is corresponding Mac command:\r\n\r\n    java -classpath &quot;.:./lib/*&quot; com.test.MyClass\r\n\r\nWhere in this example the package is `com.test` and a `lib` folder is also to be included on classpath.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>All answers here are directed towards Windows users it seems. For Mac, the classpath separator is <code>:</code>, not <code>;</code>. As an error setting the classpath using <code>;</code> is not thrown then this can be a difficult to discover if coming from Windows to Mac.</p>\n\n<p>Here is corresponding Mac command:</p>\n\n<pre><code>java -classpath \".:./lib/*\" com.test.MyClass\n</code></pre>\n\n<p>Where in this example the package is <code>com.test</code> and a <code>lib</code> folder is also to be included on classpath.</p>\n"},{"tags":[],"owner":{"account_id":1590710,"reputation":56,"user_id":1474081,"display_name":"Rahul Raghuvanshi"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1643829239,"creation_date":1486473928,"answer_id":42091055,"question_id":18093928,"body_markdown":"For a database connection I was getting this one. I just added the following in the class path:\r\n\r\n```lang-none\r\nexport CLASSPATH=&lt;path&gt;/db2jcc4.jar:**./**\r\n```\r\n\r\nHere I appended **./** in last so that my class also get identified while loading.\r\n\r\nNow just run:\r\n\r\n```lang-none\r\njava ConnectionExample &lt;args&gt;\r\n```\r\n\r\nIt worked perfectly fine.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>For a database connection I was getting this one. I just added the following in the class path:</p>\n<pre class=\"lang-none prettyprint-override\"><code>export CLASSPATH=&lt;path&gt;/db2jcc4.jar:**./**\n</code></pre>\n<p>Here I appended <strong>./</strong> in last so that my class also get identified while loading.</p>\n<p>Now just run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java ConnectionExample &lt;args&gt;\n</code></pre>\n<p>It worked perfectly fine.</p>\n"},{"tags":[],"owner":{"account_id":3115649,"reputation":7472,"user_id":2656614,"accept_rate":92,"display_name":"Addison"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1487833184,"creation_date":1487833184,"answer_id":42409027,"question_id":18093928,"body_markdown":"Seems like when I had this problem, it was unique.\r\n\r\nOnce I removed the package declaration at the top of the file, it worked perfectly.\r\n\r\nAside from doing that, there didn&#39;t seem to be any way to run a simple HelloWorld.java on my machine, regardless of the folder the compilation happened in, the CLASSPATH or PATH, parameters or folder called from.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Seems like when I had this problem, it was unique.</p>\n\n<p>Once I removed the package declaration at the top of the file, it worked perfectly.</p>\n\n<p>Aside from doing that, there didn't seem to be any way to run a simple HelloWorld.java on my machine, regardless of the folder the compilation happened in, the CLASSPATH or PATH, parameters or folder called from.</p>\n"},{"tags":[],"owner":{"account_id":411444,"reputation":2070,"user_id":783890,"accept_rate":67,"display_name":"shaILU"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1517961346,"creation_date":1487836285,"answer_id":42409923,"question_id":18093928,"body_markdown":"Use this command:\r\n\r\n    java -cp . [PACKAGE.]CLASSNAME\r\n\r\nExample: If your classname is Hello.class created from Hello.java then use the below command:\r\n\r\n    java -cp . Hello\r\n\r\nIf your file Hello.java is inside package com.demo then use the below command\r\n\r\n    java -cp . com.demo.Hello\r\n\r\nWith JDK 8 many times it happens that the class file is present in the same folder, but the `java` command expects classpath and for this reason we add **`-cp .`** to take the current folder as reference for classpath.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Use this command:</p>\n\n<pre><code>java -cp . [PACKAGE.]CLASSNAME\n</code></pre>\n\n<p>Example: If your classname is Hello.class created from Hello.java then use the below command:</p>\n\n<pre><code>java -cp . Hello\n</code></pre>\n\n<p>If your file Hello.java is inside package com.demo then use the below command</p>\n\n<pre><code>java -cp . com.demo.Hello\n</code></pre>\n\n<p>With JDK 8 many times it happens that the class file is present in the same folder, but the <code>java</code> command expects classpath and for this reason we add <strong><code>-cp .</code></strong> to take the current folder as reference for classpath.</p>\n"},{"tags":[],"owner":{"account_id":1122367,"reputation":15418,"user_id":1110437,"accept_rate":71,"display_name":"developer747"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1643829776,"creation_date":1490563049,"answer_id":43034653,"question_id":18093928,"body_markdown":"[![Enter image description here][1]][1]\r\n\r\n**Class file location:**         C:\\test\\com\\company\r\n\r\n**File Name:**                   Main.class\r\n\r\n**Fully qualified class name:**  com.company.Main\r\n\r\n**Command line command:**  \r\n\r\n```lang-none\r\njava  -classpath &quot;C:\\test&quot; com.company.Main\r\n```\r\n\r\nNote here that class path does *not* include *\\com\\company*.\r\n\r\n  [1]: https://i.stack.imgur.com/eegzM.png","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p><a href=\"https://i.stack.imgur.com/eegzM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eegzM.png\" alt=\"Enter image description here\" /></a></p>\n<p><strong>Class file location:</strong>         C:\\test\\com\\company</p>\n<p><strong>File Name:</strong>                   Main.class</p>\n<p><strong>Fully qualified class name:</strong>  com.company.Main</p>\n<p><strong>Command line command:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java  -classpath &quot;C:\\test&quot; com.company.Main\n</code></pre>\n<p>Note here that class path does <em>not</em> include <em>\\com\\company</em>.</p>\n"},{"tags":[],"owner":{"display_name":"user6419437"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1516581037,"creation_date":1494605522,"answer_id":43942211,"question_id":18093928,"body_markdown":"By default, Java uses `.`, the current working directory, as the default `CLASSPATH`. What this means is that when you type a command at the prompt e.g. `java MyClass`, the command is interpreted as if you had type `java -cp . MyClass`. Did you see that dot between `-cp` and `MyClass`? (**cp** is short for the longer **classpath** option)\r\n\r\nThis is sufficient for most cases and things seems to work just fine until at some time you try to add a directory to your `CLASSPATH`. In most cases when programmers need to do this, they just run a command like `set CLASSPATH=path\\to\\some\\dir`. This command creates a new environment variable called `CLASSPATH` having the value `path\\to\\some\\dir` or replaces its value with `path\\to\\some\\dir` if `CLASSPATH` was already set before.\r\n\r\nWhen this is done, you now have a `CLASSPATH` environment variable and Java no longer uses its default classpath (`.`) but the one you&#39;ve set. So the next day you open your editor, write some java program, `cd` to the directory where you saved it, compile it, and try to run it with the command `java MyClass`, and you are greeted with a nice output: _**Could not find or load main class ...**_ (If your commands were working well before and you are now getting this output, then this might be the case for you).\r\n\r\nWhat happens is that when you run the command `java MyClass`, Java searches for the class file named `MyClass` in the directory or directories that you have set in your `CLASSPATH` and not your current working directory so it doesn&#39;t find your class file there and hence complains.\r\n\r\nWhat you need to do is add `.` to your class path again which can be done with the command `set CLASSPATH=%CLASSPATH%;.` (notice the dot after the semicolon). In plain english this command says &quot;Pick what was initially the value of `CLASSPATH` (`%CLASSPATH%`), add `.` to it (`;.`) and assign the result back to `CLASSPATH`&quot;.\r\n\r\nAnd *voila*, you are once again able to use your command `java MyClass` as usual.\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>By default, Java uses <code>.</code>, the current working directory, as the default <code>CLASSPATH</code>. What this means is that when you type a command at the prompt e.g. <code>java MyClass</code>, the command is interpreted as if you had type <code>java -cp . MyClass</code>. Did you see that dot between <code>-cp</code> and <code>MyClass</code>? (<strong>cp</strong> is short for the longer <strong>classpath</strong> option)</p>\n\n<p>This is sufficient for most cases and things seems to work just fine until at some time you try to add a directory to your <code>CLASSPATH</code>. In most cases when programmers need to do this, they just run a command like <code>set CLASSPATH=path\\to\\some\\dir</code>. This command creates a new environment variable called <code>CLASSPATH</code> having the value <code>path\\to\\some\\dir</code> or replaces its value with <code>path\\to\\some\\dir</code> if <code>CLASSPATH</code> was already set before.</p>\n\n<p>When this is done, you now have a <code>CLASSPATH</code> environment variable and Java no longer uses its default classpath (<code>.</code>) but the one you've set. So the next day you open your editor, write some java program, <code>cd</code> to the directory where you saved it, compile it, and try to run it with the command <code>java MyClass</code>, and you are greeted with a nice output: <em><strong>Could not find or load main class ...</strong></em> (If your commands were working well before and you are now getting this output, then this might be the case for you).</p>\n\n<p>What happens is that when you run the command <code>java MyClass</code>, Java searches for the class file named <code>MyClass</code> in the directory or directories that you have set in your <code>CLASSPATH</code> and not your current working directory so it doesn't find your class file there and hence complains.</p>\n\n<p>What you need to do is add <code>.</code> to your class path again which can be done with the command <code>set CLASSPATH=%CLASSPATH%;.</code> (notice the dot after the semicolon). In plain english this command says \"Pick what was initially the value of <code>CLASSPATH</code> (<code>%CLASSPATH%</code>), add <code>.</code> to it (<code>;.</code>) and assign the result back to <code>CLASSPATH</code>\".</p>\n\n<p>And <em>voila</em>, you are once again able to use your command <code>java MyClass</code> as usual.</p>\n"},{"tags":[],"owner":{"account_id":366651,"reputation":415,"user_id":712316,"display_name":"Chezzwizz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1495354478,"creation_date":1495354148,"answer_id":44094607,"question_id":18093928,"body_markdown":"When running the `java` with the `-cp` option as advertised in Windows PowerShell you may get an error that looks something like:\r\n\r\n    The term `ClassName` is not recognized as the name of a cmdlet, function, script ...\r\n\r\nIn order to for PowerShell to accept the command, the arguments of the `-cp` option must be contained in quotes as in:\r\n\r\n    java -cp &#39;someDependency.jar;.&#39; ClassName\r\n\r\nForming the command this way should allow Java process the classpath arguments correctly.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>When running the <code>java</code> with the <code>-cp</code> option as advertised in Windows PowerShell you may get an error that looks something like:</p>\n\n<pre><code>The term `ClassName` is not recognized as the name of a cmdlet, function, script ...\n</code></pre>\n\n<p>In order to for PowerShell to accept the command, the arguments of the <code>-cp</code> option must be contained in quotes as in:</p>\n\n<pre><code>java -cp 'someDependency.jar;.' ClassName\n</code></pre>\n\n<p>Forming the command this way should allow Java process the classpath arguments correctly.</p>\n"},{"tags":[],"owner":{"account_id":5233958,"reputation":1601,"user_id":4183221,"accept_rate":68,"display_name":"Ramesh Pareek"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1517961208,"creation_date":1496313361,"answer_id":44305241,"question_id":18093928,"body_markdown":"This might help you if your case is specifically like mine:  as a beginner I also ran into this problem when I tried to run a Java program.\r\n\r\nI compiled it like this:\r\n\r\n    javac HelloWorld.java\r\n\r\nAnd I tried to run also with the same extension:\r\n\r\n    java Helloworld.java\r\n\r\nWhen I removed the `.java` and rewrote the command like `java HelloWorld`, the program ran perfectly. :)\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>This might help you if your case is specifically like mine:  as a beginner I also ran into this problem when I tried to run a Java program.</p>\n\n<p>I compiled it like this:</p>\n\n<pre><code>javac HelloWorld.java\n</code></pre>\n\n<p>And I tried to run also with the same extension:</p>\n\n<pre><code>java Helloworld.java\n</code></pre>\n\n<p>When I removed the <code>.java</code> and rewrote the command like <code>java HelloWorld</code>, the program ran perfectly. :)</p>\n"},{"tags":[],"owner":{"account_id":371004,"reputation":5445,"user_id":719278,"accept_rate":75,"display_name":"Junchen Liu"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1517961136,"creation_date":1497543548,"answer_id":44572412,"question_id":18093928,"body_markdown":"If you use [Maven][1] to build the JAR file, please make sure to specify the main class in the pom.xml file:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;class name us.com.test.abc.MyMainClass&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Apache_Maven\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>If you use <a href=\"http://en.wikipedia.org/wiki/Apache_Maven\" rel=\"noreferrer\">Maven</a> to build the JAR file, please make sure to specify the main class in the pom.xml file:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifest&gt;\n                        &lt;mainClass&gt;class name us.com.test.abc.MyMainClass&lt;/mainClass&gt;\n                    &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7450446,"reputation":69,"user_id":5665419,"accept_rate":75,"display_name":"lor"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1503080970,"creation_date":1503080970,"answer_id":45762954,"question_id":18093928,"body_markdown":"Sometimes, in some online compilers that you might have tried you will get this error if you don&#39;t write `public class [Classname]` but just `class [Classname]`. ","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Sometimes, in some online compilers that you might have tried you will get this error if you don't write <code>public class [Classname]</code> but just <code>class [Classname]</code>. </p>\n"},{"tags":[],"owner":{"account_id":4323208,"reputation":2481,"user_id":3530707,"display_name":"julianm"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1517961001,"creation_date":1503375739,"answer_id":45808870,"question_id":18093928,"body_markdown":"In the context of IDE development (Eclipse, NetBeans or whatever) you have to configure your project properties to have a main class, so that your IDE knows where the main class is located to be executed when you hit &quot;Play&quot;.\r\n\r\n1. Right click your project, then *Properties*\r\n2. Go to the Run category and select your Main Class\r\n3. Hit the &lt;kbd&gt;Run&lt;/kbd&gt; button.\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/YmWDA.png\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In the context of IDE development (Eclipse, NetBeans or whatever) you have to configure your project properties to have a main class, so that your IDE knows where the main class is located to be executed when you hit \"Play\".</p>\n\n<ol>\n<li>Right click your project, then <em>Properties</em></li>\n<li>Go to the Run category and select your Main Class</li>\n<li>Hit the <kbd>Run</kbd> button.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/YmWDA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YmWDA.png\" alt=\"Enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":5228097,"reputation":124,"user_id":4179474,"display_name":"Howard007"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1514318115,"creation_date":1514318115,"answer_id":47983150,"question_id":18093928,"body_markdown":"In my case, I got the error because I had mixed UPPER- and lower-case package names on a Windows 7 system.  Changing the package names to all lower case resolved the issue.\r\nNote also that in this scenario, I got no error compiling the .java file into a .class file; it just wouldn&#39;t run from the same (sub-sub-sub-) directory.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In my case, I got the error because I had mixed UPPER- and lower-case package names on a Windows 7 system.  Changing the package names to all lower case resolved the issue.\nNote also that in this scenario, I got no error compiling the .java file into a .class file; it just wouldn't run from the same (sub-sub-sub-) directory.</p>\n"},{"tags":[],"owner":{"account_id":6008296,"reputation":350,"user_id":4719470,"display_name":"Boogie"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1517959423,"creation_date":1515103296,"answer_id":48104223,"question_id":18093928,"body_markdown":"## Solving &quot;Could not Load main class error&quot; ##\r\n\r\nAfter reading all the answers, I noticed most didn&#39;t work for me. So I did some research and here is what I got. Only try this if step 1 doesn&#39;t work.\r\n\r\n 1. Try to install JRE 32 or 64. If it doesn&#39;t work,\r\n 2. Open go to **C:\\Program Files (x86)\\Java** or **C:\\Program Files\\Java**\r\n    - **i.** open the `jdk` folder and then the `bin` folder.\r\n   - **ii.** Copy the path and add it to environment variables. Make sure you separate variables with a semi-colon, `;`. For example, &quot;**C:\\Yargato\\bin;C:\\java\\bin;**&quot;. If you don&#39;t, it will cause more errors.\r\n\r\n  - **iii.** Go to the `jre` folder and open its `bin` folder.\r\n   - **iv.** Here search for **rt.jar file**. Mine is:\r\n\r\n       &gt; **C:\\Program Files (x86)\\Java\\jre1.8.0_73\\lib\\rt.jar**\r\n    Copy and under environment variable and search for the classpath variable\r\n    and paste it there.\r\n   - **v.** Now restart cmd and try running again. The error will disappear.\r\n  - **vi.** I will post a link to my YouTube video tutorial.\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<h2>Solving \"Could not Load main class error\"</h2>\n\n<p>After reading all the answers, I noticed most didn't work for me. So I did some research and here is what I got. Only try this if step 1 doesn't work.</p>\n\n<ol>\n<li>Try to install JRE 32 or 64. If it doesn't work,</li>\n<li><p>Open go to <strong>C:\\Program Files (x86)\\Java</strong> or <strong>C:\\Program Files\\Java</strong></p>\n\n<ul>\n<li><strong>i.</strong> open the <code>jdk</code> folder and then the <code>bin</code> folder.</li>\n<li><p><strong>ii.</strong> Copy the path and add it to environment variables. Make sure you separate variables with a semi-colon, <code>;</code>. For example, \"<strong>C:\\Yargato\\bin;C:\\java\\bin;</strong>\". If you don't, it will cause more errors.</p></li>\n<li><p><strong>iii.</strong> Go to the <code>jre</code> folder and open its <code>bin</code> folder.</p></li>\n<li><p><strong>iv.</strong> Here search for <strong>rt.jar file</strong>. Mine is:</p>\n\n<blockquote>\n  <p><strong>C:\\Program Files (x86)\\Java\\jre1.8.0_73\\lib\\rt.jar</strong>\n  Copy and under environment variable and search for the classpath variable\n  and paste it there.</p>\n</blockquote></li>\n<li><strong>v.</strong> Now restart cmd and try running again. The error will disappear.</li>\n<li><strong>vi.</strong> I will post a link to my YouTube video tutorial.</li>\n</ul></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":402428,"reputation":4635,"user_id":769581,"display_name":"khichar.anil"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1643829062,"creation_date":1516997713,"answer_id":48468912,"question_id":18093928,"body_markdown":"I also faced similar errors while testing a Java MongoDB JDBC connection. I think it&#39;s good to summarize my final solution in short so that in the future anybody can directly look into the two commands and are good to proceed further.\r\n\r\nAssume you are in the directory where your Java file and external dependencies (JAR files) exist.\r\n\r\n**Compile:**\r\n\r\n```lang-none\r\njavac -cp mongo-java-driver-3.4.1.jar JavaMongoDBConnection.java\r\n```\r\n\r\n - **-cp** - classpath argument; pass all the dependent JAR files one by one\r\n - *.java - This is the Java class file which has main method.\r\nsdsd\r\n\r\n**Run:**\r\n\r\n```lang-none\r\njava -cp mongo-java-driver-3.4.1.jar: JavaMongoDBConnection\r\n```\r\n\r\n - Please do observe the colon (Unix) / comma (Windows) after all the dependency JAR files end\r\n - At the end, observe the main class name without any extension (no .class or .java)\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I also faced similar errors while testing a Java MongoDB JDBC connection. I think it's good to summarize my final solution in short so that in the future anybody can directly look into the two commands and are good to proceed further.</p>\n<p>Assume you are in the directory where your Java file and external dependencies (JAR files) exist.</p>\n<p><strong>Compile:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>javac -cp mongo-java-driver-3.4.1.jar JavaMongoDBConnection.java\n</code></pre>\n<ul>\n<li><strong>-cp</strong> - classpath argument; pass all the dependent JAR files one by one</li>\n<li>*.java - This is the Java class file which has main method.\nsdsd</li>\n</ul>\n<p><strong>Run:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java -cp mongo-java-driver-3.4.1.jar: JavaMongoDBConnection\n</code></pre>\n<ul>\n<li>Please do observe the colon (Unix) / comma (Windows) after all the dependency JAR files end</li>\n<li>At the end, observe the main class name without any extension (no .class or .java)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":935751,"reputation":566,"user_id":964698,"display_name":"MiniSu"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1568315193,"creation_date":1529238165,"answer_id":50896595,"question_id":18093928,"body_markdown":"In my case I just change the JRE in Eclipse.\r\n\r\nPlease find the attached screen shot:\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/xiIMd.jpg\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In my case I just change the JRE in Eclipse.</p>\n\n<p>Please find the attached screen shot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xiIMd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xiIMd.jpg\" alt=\"Enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568317938,"creation_date":1532372424,"answer_id":51485565,"question_id":18093928,"body_markdown":"I had a weird one:\r\n\r\n&gt; Error: Could not find or load main class mypackage.App\r\n\r\nIt turned out I had a reference to [POM][1] (parent) coded up in my project&#39;s `pom.xml` file (my project&#39;s `pom.xml` was pointing to a parent `pom.xml`) and the `relativePath` was off/wrong.\r\n\r\nBelow is a partial of my project&#39;s `pom.xml` file:\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;myGroupId&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pom-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;relativePath&gt;../badPathHere/pom.xml&lt;/relativePath&gt;\r\n    &lt;/parent&gt;\r\n\r\nOnce I resolved the POM relativePath, the error went away.\r\n\r\nGo figure.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I had a weird one:</p>\n\n<blockquote>\n  <p>Error: Could not find or load main class mypackage.App</p>\n</blockquote>\n\n<p>It turned out I had a reference to <a href=\"https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> (parent) coded up in my project's <code>pom.xml</code> file (my project's <code>pom.xml</code> was pointing to a parent <code>pom.xml</code>) and the <code>relativePath</code> was off/wrong.</p>\n\n<p>Below is a partial of my project's <code>pom.xml</code> file:</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;myGroupId&lt;/groupId&gt;\n    &lt;artifactId&gt;pom-parent&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;relativePath&gt;../badPathHere/pom.xml&lt;/relativePath&gt;\n&lt;/parent&gt;\n</code></pre>\n\n<p>Once I resolved the POM relativePath, the error went away.</p>\n\n<p>Go figure.</p>\n"},{"tags":[],"owner":{"account_id":174340,"reputation":562,"user_id":403639,"accept_rate":77,"display_name":"Manish Shukla"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1568315006,"creation_date":1537074720,"answer_id":52351137,"question_id":18093928,"body_markdown":"Answering with respect to an external library -\r\n\r\nCompile:\r\n\r\n    javac -cp ./&lt;external lib jar&gt;: &lt;program-name&gt;.java\r\n\r\nExecute:\r\n\r\n    java -cp ./&lt;external lib jar&gt;: &lt;program-name&gt;\r\n\r\nThe above scheme works well in OS&amp;nbsp;X and Linux systems. Notice the `:` in the classpath.\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Answering with respect to an external library -</p>\n\n<p>Compile:</p>\n\n<pre><code>javac -cp ./&lt;external lib jar&gt;: &lt;program-name&gt;.java\n</code></pre>\n\n<p>Execute:</p>\n\n<pre><code>java -cp ./&lt;external lib jar&gt;: &lt;program-name&gt;\n</code></pre>\n\n<p>The above scheme works well in OS&nbsp;X and Linux systems. Notice the <code>:</code> in the classpath.</p>\n"},{"tags":[],"owner":{"account_id":2405743,"reputation":807,"user_id":2102275,"accept_rate":60,"display_name":"Tunde Pizzle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568314837,"creation_date":1537368739,"answer_id":52408699,"question_id":18093928,"body_markdown":"If this issue is Eclipse-related:\r\n\r\nTry adding the project to your class path.\r\n\r\nSee the below image:\r\n\r\n[![Enter image description here][1]][1]\r\n\r\nThis method worked for me.\r\n\r\n  [1]: https://i.stack.imgur.com/eejWj.png\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>If this issue is Eclipse-related:</p>\n\n<p>Try adding the project to your class path.</p>\n\n<p>See the below image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/eejWj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eejWj.png\" alt=\"Enter image description here\"></a></p>\n\n<p>This method worked for me.</p>\n"},{"tags":[],"owner":{"account_id":288449,"reputation":5745,"user_id":588867,"accept_rate":50,"display_name":"biocyberman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568314734,"creation_date":1537965215,"answer_id":52517873,"question_id":18093928,"body_markdown":"All right, there are many answers already, but no one mentioned the case where file permissions can be the culprit.\r\n\r\nWhen running, a user may not have access to the JAR  file or one of the directories of the path. For example, consider:\r\n\r\nJar file in  `/dir1/dir2/dir3/myjar.jar` \r\n\r\nUser1 who owns the JAR file may do:\r\n\r\n    # Running as User1\r\n    cd /dir1/dir2/dir3/\r\n    chmod +r myjar.jar\r\n\r\nBut it still doesn&#39;t work:\r\n\r\n    # Running as User2\r\n    java -cp &quot;/dir1/dir2/dir3:/dir1/dir2/javalibs&quot; MyProgram\r\n    Error: Could not find or load main class MyProgram\r\n\r\nThis is because the running user (User2) does not have access to dir1, dir2, or javalibs or dir3. It may drive someone nuts when User1 can see the files, and can access to them, but the error still happens for User2.\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>All right, there are many answers already, but no one mentioned the case where file permissions can be the culprit.</p>\n\n<p>When running, a user may not have access to the JAR  file or one of the directories of the path. For example, consider:</p>\n\n<p>Jar file in  <code>/dir1/dir2/dir3/myjar.jar</code> </p>\n\n<p>User1 who owns the JAR file may do:</p>\n\n<pre><code># Running as User1\ncd /dir1/dir2/dir3/\nchmod +r myjar.jar\n</code></pre>\n\n<p>But it still doesn't work:</p>\n\n<pre><code># Running as User2\njava -cp \"/dir1/dir2/dir3:/dir1/dir2/javalibs\" MyProgram\nError: Could not find or load main class MyProgram\n</code></pre>\n\n<p>This is because the running user (User2) does not have access to dir1, dir2, or javalibs or dir3. It may drive someone nuts when User1 can see the files, and can access to them, but the error still happens for User2.</p>\n"},{"tags":[],"owner":{"account_id":7689131,"reputation":99,"user_id":5825962,"display_name":"suneelpervaiz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1568314650,"creation_date":1546604825,"answer_id":54038965,"question_id":18093928,"body_markdown":"Right click the project.\r\n\r\n 1. Select &quot;Open module settings&quot;\r\n 2. Mark the `src` folder as &quot;sources&quot;\r\n 3. Go to edit configurations, and then select your main class\r\n 4. Click &lt;kbd&gt;OK&lt;/kbd&gt; or the &lt;kbd&gt;Apply&lt;/kbd&gt; button\r\n\r\nThis worked for me.\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Right click the project.</p>\n\n<ol>\n<li>Select \"Open module settings\"</li>\n<li>Mark the <code>src</code> folder as \"sources\"</li>\n<li>Go to edit configurations, and then select your main class</li>\n<li>Click <kbd>OK</kbd> or the <kbd>Apply</kbd> button</li>\n</ol>\n\n<p>This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":3343918,"reputation":776,"user_id":2809468,"display_name":"Omid Mohebbi"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1568314577,"creation_date":1552889964,"answer_id":55215561,"question_id":18093928,"body_markdown":"I had same problem and finally found my mistake :)\r\nI used this command for compiling and it worked correctly:\r\n\r\n    javac -cp &quot;/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar&quot; qrcode.java\r\n\r\nBut this command did not work for me (I could not find or load the main class, `qrcode`):\r\n\r\n    java -cp &quot;/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar&quot; qrcode\r\n\r\nFinally I just added the &#39;:&#39; character at end of the classpath and the problem was solved:\r\n\r\n    java -cp &quot;/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar:&quot; qrcode\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I had same problem and finally found my mistake :)\nI used this command for compiling and it worked correctly:</p>\n\n<pre><code>javac -cp \"/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar\" qrcode.java\n</code></pre>\n\n<p>But this command did not work for me (I could not find or load the main class, <code>qrcode</code>):</p>\n\n<pre><code>java -cp \"/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar\" qrcode\n</code></pre>\n\n<p>Finally I just added the ':' character at end of the classpath and the problem was solved:</p>\n\n<pre><code>java -cp \"/home/omidmohebbi/AAAATest/jars/core-1.7.jar:/home/omidmohebbi/AAAATest/jars/javase-1.7.jar:/home/omidmohebbi/AAAATest/jars/qrgen-1.2.jar:\" qrcode\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7726333,"reputation":1273,"user_id":5850848,"display_name":"S Krishna"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1568314499,"creation_date":1561272033,"answer_id":56721632,"question_id":18093928,"body_markdown":"**If it&#39;s a [Maven][1] project**:\r\n\r\n 1. Go to the POM file.\r\n 2. Remove all the dependencies.\r\n 3. Save the POM file.\r\n 4. Again import only the necessary dependencies. \r\n 5. Save the POM file.\r\n\r\nThe issue should go away.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Apache_Maven\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p><strong>If it's a <a href=\"http://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a> project</strong>:</p>\n\n<ol>\n<li>Go to the POM file.</li>\n<li>Remove all the dependencies.</li>\n<li>Save the POM file.</li>\n<li>Again import only the necessary dependencies. </li>\n<li>Save the POM file.</li>\n</ol>\n\n<p>The issue should go away.</p>\n"},{"tags":[],"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568314312,"creation_date":1562800329,"answer_id":56979714,"question_id":18093928,"body_markdown":"This happened to me too. In my case, it only happened when a `HttpServlet` class was present in source code (IntelliJ IDEA didn&#39;t give a compile time error; the servlet package got imported just fine, however at run time there was this `main class` error).\r\n\r\nI managed to solve it. I went to menu *File* &amp;rarr; *Project Structure...*:\r\n\r\n[![Enter image description here][1]][1]\r\n\r\nThen to *Modules*:\r\n\r\n[![Enter image description here][2]][2]\r\n\r\nThere was a *Provided* scope near the servlet module. I changed it to *Compile*:\r\n\r\n[![Enter image description here][3]][3]\r\n\r\nAnd it worked!\r\n\r\n  [1]: https://i.stack.imgur.com/FwYTi.png\r\n  [2]: https://i.stack.imgur.com/VqiC9.png\r\n  [3]: https://i.stack.imgur.com/TFZEO.png\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>This happened to me too. In my case, it only happened when a <code>HttpServlet</code> class was present in source code (IntelliJ IDEA didn't give a compile time error; the servlet package got imported just fine, however at run time there was this <code>main class</code> error).</p>\n\n<p>I managed to solve it. I went to menu <em>File</em> &rarr; <em>Project Structure...</em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FwYTi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FwYTi.png\" alt=\"Enter image description here\"></a></p>\n\n<p>Then to <em>Modules</em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VqiC9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VqiC9.png\" alt=\"Enter image description here\"></a></p>\n\n<p>There was a <em>Provided</em> scope near the servlet module. I changed it to <em>Compile</em>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TFZEO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TFZEO.png\" alt=\"Enter image description here\"></a></p>\n\n<p>And it worked!</p>\n"},{"tags":[],"owner":{"account_id":908908,"reputation":111,"user_id":943217,"display_name":"Nikolay Valtchanov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574798883,"creation_date":1574798883,"answer_id":59058646,"question_id":18093928,"body_markdown":"Here&#39;s another issue that took me a bit of time: The command line class path param doesn&#39;t behave as you&#39;d expect. I&#39;m on MacOS calling the CLI directly, and I&#39;m including two jars in the call.\r\n\r\nFor example, both of these were confusing the tool about the name of the main class:\r\n\r\nThis one because the asterisk was causing it to parse the args incorrectly:\r\n\r\n`java -cp path/to/jars/* com.mypackage.Main`\r\n\r\nAnd this one because -- I&#39;m not sure why:\r\n\r\n`java -cp &quot;*.jar&quot; com.mypackage.Main`\r\n\r\nThis worked:\r\n\r\n`java -cp &quot;path/to/jars/*&quot; com.mypackage.Main`\r\n\r\nListing the two jars explicitly also worked:\r\n\r\n`java -cp path/to/jars/jar1.jar:path/to/jars/jar2.jar com.mypackage.Main`","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Here's another issue that took me a bit of time: The command line class path param doesn't behave as you'd expect. I'm on MacOS calling the CLI directly, and I'm including two jars in the call.</p>\n\n<p>For example, both of these were confusing the tool about the name of the main class:</p>\n\n<p>This one because the asterisk was causing it to parse the args incorrectly:</p>\n\n<p><code>java -cp path/to/jars/* com.mypackage.Main</code></p>\n\n<p>And this one because -- I'm not sure why:</p>\n\n<p><code>java -cp \"*.jar\" com.mypackage.Main</code></p>\n\n<p>This worked:</p>\n\n<p><code>java -cp \"path/to/jars/*\" com.mypackage.Main</code></p>\n\n<p>Listing the two jars explicitly also worked:</p>\n\n<p><code>java -cp path/to/jars/jar1.jar:path/to/jars/jar2.jar com.mypackage.Main</code></p>\n"},{"tags":[],"owner":{"account_id":10359554,"reputation":119,"user_id":7640451,"display_name":"Ryan Luo Xu"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1589111301,"creation_date":1589111301,"answer_id":61711451,"question_id":18093928,"body_markdown":"I got this issue for my demo program created in IntelliJ.\r\n\r\nThere are two key points to solve it:\r\n\r\n 1. the package name of program\r\n 2. the current working dir of the terminal/cmd prompt \r\n\r\nmy demo program:\r\n\r\n```\r\npackage io.rlx.tij.c2;\r\n\r\npublic class Ex10 {\r\n    public static void main(String[] args) {\r\n        // do something\r\n    }\r\n}\r\n```\r\n\r\nthe path of source code: \r\n```\r\n../projectRoot/src/main/java/io/rlx/tij/c2/Ex10.java\r\n```\r\n\r\n 1. go to `java` dir: `cd ../projectRoot/src/main/java`\r\n 2. compile to class: `javac ./io/rlx/tij/c2/Ex10.java`\r\n 3. run program: `java io.rlx.tij.c2.Ex10`\r\n\r\nif I run program in `../projectRoot/src/main/java/io/rlx/tij/c2` or I run it without package name, I will get this error: `Error: Could not find or load main class`.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I got this issue for my demo program created in IntelliJ.</p>\n\n<p>There are two key points to solve it:</p>\n\n<ol>\n<li>the package name of program</li>\n<li>the current working dir of the terminal/cmd prompt </li>\n</ol>\n\n<p>my demo program:</p>\n\n<pre><code>package io.rlx.tij.c2;\n\npublic class Ex10 {\n    public static void main(String[] args) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>the path of source code: </p>\n\n<pre><code>../projectRoot/src/main/java/io/rlx/tij/c2/Ex10.java\n</code></pre>\n\n<ol>\n<li>go to <code>java</code> dir: <code>cd ../projectRoot/src/main/java</code></li>\n<li>compile to class: <code>javac ./io/rlx/tij/c2/Ex10.java</code></li>\n<li>run program: <code>java io.rlx.tij.c2.Ex10</code></li>\n</ol>\n\n<p>if I run program in <code>../projectRoot/src/main/java/io/rlx/tij/c2</code> or I run it without package name, I will get this error: <code>Error: Could not find or load main class</code>.</p>\n"},{"tags":[],"owner":{"account_id":16241595,"reputation":87,"user_id":11727767,"display_name":"Hayk Kerobyan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591389155,"creation_date":1591389155,"answer_id":62223705,"question_id":18093928,"body_markdown":"If you use IntelliJ and get the error while running the main method from the IDE, just make sure your class is located in ```java``` package, not in ```kotlin```[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ez1zF.png","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>If you use IntelliJ and get the error while running the main method from the IDE, just make sure your class is located in <code>java</code> package, not in <code>kotlin</code><a href=\"https://i.stack.imgur.com/ez1zF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ez1zF.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":13945822,"reputation":291,"user_id":10070611,"display_name":"Vitaliy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594729857,"creation_date":1594729857,"answer_id":62895260,"question_id":18093928,"body_markdown":"One more scenario that got me scratch my head, and I found no reference to it herein, is:\r\n\r\n\r\n    package com.me\r\n    Public class Awesome extends AwesomeLibObject {\r\n        ....\r\n        public static void main(String[] argv) {\r\n\t\t     System.out.println(&quot;YESS0&quot;);\r\n        }\r\n    }\r\n\r\nWhere AwesomeLibObject is a class defined in an external lib.\r\nI got the same confusing error message for it:\r\n \r\n`Error: Could not find or load main class com.Awesome` \r\n\r\nThe resolution is simple: the external lib must be in classpath as well!","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>One more scenario that got me scratch my head, and I found no reference to it herein, is:</p>\n<pre><code>package com.me\nPublic class Awesome extends AwesomeLibObject {\n    ....\n    public static void main(String[] argv) {\n         System.out.println(&quot;YESS0&quot;);\n    }\n}\n</code></pre>\n<p>Where AwesomeLibObject is a class defined in an external lib.\nI got the same confusing error message for it:</p>\n<p><code>Error: Could not find or load main class com.Awesome</code></p>\n<p>The resolution is simple: the external lib must be in classpath as well!</p>\n"},{"tags":[],"owner":{"account_id":14389869,"reputation":61,"user_id":10394741,"display_name":"Vishv Shroff"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1600311698,"creation_date":1600310953,"answer_id":63930549,"question_id":18093928,"body_markdown":"After searching for 2 days I found this solution and this works. It is pretty weird but it works for me.\r\n\r\n    package javaapplication3;\r\n    public class JavaApplication3 {\r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n        // TODO code application logic here\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n    \r\n}\r\n\r\nthis is my program i want to run that locates at C:\\Java Projects\\JavaApplication3\\src\\javaapplication3\r\n\r\nNow open cmd on this location and compile program using this command\r\n\r\n    javac JavaApplication3.java\r\n\r\nAfter compiling navigate one directory down i.e. C:\\Java Projects\\JavaApplication3\\src\r\n\r\nnow run following command to execute program \r\n\r\n    java javaapplication3.JavaApplication3\r\n\r\n  ","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>After searching for 2 days I found this solution and this works. It is pretty weird but it works for me.</p>\n<pre><code>package javaapplication3;\npublic class JavaApplication3 {\n\n/**\n * @param args the command line arguments\n */\npublic static void main(String[] args) {\n    // TODO code application logic here\n    System.out.println(&quot;Hello&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>this is my program i want to run that locates at C:\\Java Projects\\JavaApplication3\\src\\javaapplication3</p>\n<p>Now open cmd on this location and compile program using this command</p>\n<pre><code>javac JavaApplication3.java\n</code></pre>\n<p>After compiling navigate one directory down i.e. C:\\Java Projects\\JavaApplication3\\src</p>\n<p>now run following command to execute program</p>\n<pre><code>java javaapplication3.JavaApplication3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2628131,"reputation":873,"user_id":2274744,"display_name":"Ted"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1600520630,"creation_date":1600520117,"answer_id":63969042,"question_id":18093928,"body_markdown":"**Scenario:** using command prompt(**CMD** in Windows) for **compile** and **run** a simple &#39;java&#39; program which have only &#39;**Main.java**&#39; file, with specified &#39;**package main**&#39;.\r\n\r\n   ***Source file path :***\r\n                      \r\n\r\n&gt; some-project-name-folder\\src\\main\\Main.java\r\n\r\n  ***Destination folder :***\r\n\r\n&gt; some-project-name-folder\\dest\r\n\r\n  ***Destination file path (folder &#39;\\main&#39; and file &#39;\\Main.class&#39; will be produced by &#39;javac&#39;) :***\r\n\t\t              \r\n\r\n&gt; some-project-name-folder\\dest\\main\\Main.class\r\n\r\n**Main.java** is as follow :\r\n\r\n\tpackage main;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello world&quot;);\r\n        }\r\n    }\r\n\r\n**Compilation :**\r\n\r\n    // &#39;javac&#39; compiler will produce &#39;Main.class&#39; in the &#39;dest\\main&#39; folder.\r\n\t// &#39;main&#39; folder is created because in the source file(in our case: &#39;Main.java&#39;) is\r\n\t// specified &#39;package main&#39;.\r\n\t\r\n    javac -d ./dest ./src/main/Main.java\r\n\r\n\r\n**Run compiled file (in our case: &#39;Main.class&#39;) :**\r\n\r\n\t// &#39;-cp&#39;(is the same as &#39;-classpath&#39;)\r\n\t// &#39;./dest&#39;(means destination folder, where resides compiled &#39;Main.class&#39;).\r\n\t// &#39;main.Main&#39;(means &#39;package&#39; &#39;main&#39;, which contains class &#39;Main&#39;(&#39;Main.class&#39;))\r\n\t// WARNING: when run &#39;java&#39; class, MUST NOT type extension &#39;.class&#39;\r\n    //          after &#39;class name\r\n\t//          (in our case: &#39;main.Main&#39;(&lt;package&gt;.&lt;class-name&gt;) WITHOUT extension \r\n    //           &#39;.class&#39;).\r\n\r\n\tjava -cp ./dest main.Main\r\n\r\n    // Hello world","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p><strong>Scenario:</strong> using command prompt(<strong>CMD</strong> in Windows) for <strong>compile</strong> and <strong>run</strong> a simple 'java' program which have only '<strong>Main.java</strong>' file, with specified '<strong>package main</strong>'.</p>\n<p><em><strong>Source file path :</strong></em></p>\n<blockquote>\n<p>some-project-name-folder\\src\\main\\Main.java</p>\n</blockquote>\n<p><em><strong>Destination folder :</strong></em></p>\n<blockquote>\n<p>some-project-name-folder\\dest</p>\n</blockquote>\n<p><em><strong>Destination file path (folder '\\main' and file '\\Main.class' will be produced by 'javac') :</strong></em></p>\n<blockquote>\n<p>some-project-name-folder\\dest\\main\\Main.class</p>\n</blockquote>\n<p><strong>Main.java</strong> is as follow :</p>\n<pre><code>package main;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello world&quot;);\n    }\n}\n</code></pre>\n<p><strong>Compilation :</strong></p>\n<pre><code>// 'javac' compiler will produce 'Main.class' in the 'dest\\main' folder.\n// 'main' folder is created because in the source file(in our case: 'Main.java') is\n// specified 'package main'.\n\njavac -d ./dest ./src/main/Main.java\n</code></pre>\n<p><strong>Run compiled file (in our case: 'Main.class') :</strong></p>\n<pre><code>// '-cp'(is the same as '-classpath')\n// './dest'(means destination folder, where resides compiled 'Main.class').\n// 'main.Main'(means 'package' 'main', which contains class 'Main'('Main.class'))\n// WARNING: when run 'java' class, MUST NOT type extension '.class'\n//          after 'class name\n//          (in our case: 'main.Main'(&lt;package&gt;.&lt;class-name&gt;) WITHOUT extension \n//           '.class').\n\njava -cp ./dest main.Main\n\n// Hello world\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615151,"reputation":7343,"user_id":5108695,"display_name":"Dupinder Singh"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1604511507,"creation_date":1604511507,"answer_id":64685060,"question_id":18093928,"body_markdown":"[Java Version: 11]\r\n\r\nIf you are using Java 11 then you don&#39;t need to compile and run your java file.\r\n\r\nJust run like\r\n\r\n`Java ClassName.java` \r\n\r\nExample:\r\n\r\n\r\n    \r\n    class abc{ \r\n    \tpublic static void main(String[] args){\r\n    \t\tSystem.out.println(&quot;hello Jarvis &quot;);\t\r\n    \t}\r\n    }\r\n\r\nNow Run the command \r\n\r\n    java abc.java\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MKrnv.png","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>[Java Version: 11]</p>\n<p>If you are using Java 11 then you don't need to compile and run your java file.</p>\n<p>Just run like</p>\n<p><code>Java ClassName.java</code></p>\n<p>Example:</p>\n<pre><code>class abc{ \n    public static void main(String[] args){\n        System.out.println(&quot;hello Jarvis &quot;);    \n    }\n}\n</code></pre>\n<p>Now Run the command</p>\n<pre><code>java abc.java\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/MKrnv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MKrnv.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8629822,"reputation":392,"user_id":6461839,"display_name":"leonidaa"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643844997,"creation_date":1609149130,"answer_id":65475747,"question_id":18093928,"body_markdown":"Reason #2 - the application&#39;s classpath is incorrectly specified. Read the three documents linked previously. (Yes ... *read* them! It is important that a Java programmer understands at least the basics of how the Java classpath mechanisms works.) I want to add this documentation to this very good post from above.\r\n\r\nJDK Tools and Utilities     General    General Information (file structure, classpath, how classes are found, changes) Enhancements (enhancements in JDK 7) Standard JDK Tools and Utilities\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/index.html\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/findingclasses.html\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html\r\n\r\nHow the Java Launcher Finds Classes Understanding the class path and package names\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html\r\n\r\nClassLoader in Java The Java ClassLoader is a part of the Java Runtime Environment that dynamically loads Java classes into the Java Virtual Machine. The Java run time system does not need to know about files and file systems because of classloaders.\r\n\r\nJava classes aren’t loaded into memory all at once, but when required by an application. At this point, the Java ClassLoader is called by the JRE and these ClassLoaders load classes into memory dynamically.\r\n\r\nhttps://en.wikipedia.org/wiki/Java_Classloader\r\n\r\nhttps://www.geeksforgeeks.org/classloader-in-java/\r\n\r\nhttps://en.wikipedia.org/wiki/Java_virtual_machine\r\n\r\n\r\n[![Enter image description here][1]][1]\r\n\r\n[![Enter image description here][2]][2]\r\n\r\n[![Enter image description here][3]][3]\r\n\r\n  [1]: https://i.stack.imgur.com/VlGLG.png\r\n  [2]: https://i.stack.imgur.com/WnlrO.png\r\n  [3]: https://i.stack.imgur.com/yJCPt.png\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Reason #2 - the application's classpath is incorrectly specified. Read the three documents linked previously. (Yes ... <em>read</em> them! It is important that a Java programmer understands at least the basics of how the Java classpath mechanisms works.) I want to add this documentation to this very good post from above.</p>\n<p>JDK Tools and Utilities     General    General Information (file structure, classpath, how classes are found, changes) Enhancements (enhancements in JDK 7) Standard JDK Tools and Utilities</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/index.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/tools/index.html</a></p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/findingclasses.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/tools/findingclasses.html</a></p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html</a></p>\n<p>How the Java Launcher Finds Classes Understanding the class path and package names</p>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/technotes/tools/solaris/javac.html</a></p>\n<p>ClassLoader in Java The Java ClassLoader is a part of the Java Runtime Environment that dynamically loads Java classes into the Java Virtual Machine. The Java run time system does not need to know about files and file systems because of classloaders.</p>\n<p>Java classes aren’t loaded into memory all at once, but when required by an application. At this point, the Java ClassLoader is called by the JRE and these ClassLoaders load classes into memory dynamically.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Java_Classloader\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Java_Classloader</a></p>\n<p><a href=\"https://www.geeksforgeeks.org/classloader-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/classloader-in-java/</a></p>\n<p><a href=\"https://en.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Java_virtual_machine</a></p>\n<p><a href=\"https://i.stack.imgur.com/VlGLG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VlGLG.png\" alt=\"Enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/WnlrO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WnlrO.png\" alt=\"Enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/yJCPt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yJCPt.png\" alt=\"Enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8629822,"reputation":392,"user_id":6461839,"display_name":"leonidaa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643833016,"creation_date":1609175538,"answer_id":65481342,"question_id":18093928,"body_markdown":" - In [IntelliJ IDEA][1], check your *global* libraries* and *local libraries*\r\n - Check in the libraries version file *pom.xml*, Maybe it is an old library\r\n - They are so many possibilities mentioned in the previous answers that need to be tried too\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n\r\n\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<ul>\n<li>In <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a>, check your <em>global</em> libraries* and <em>local libraries</em></li>\n<li>Check in the libraries version file <em>pom.xml</em>, Maybe it is an old library</li>\n<li>They are so many possibilities mentioned in the previous answers that need to be tried too</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2367173,"reputation":97,"user_id":2072661,"display_name":"Shardayyy"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1643830253,"creation_date":1610485133,"answer_id":65691950,"question_id":18093928,"body_markdown":"This is how I solved my issue.\r\n\r\nI noticed if you are including jar files with your compilation, adding the current directory (./) to the classpath helps.\r\n\r\n```lang-none\r\njavac -cp &quot;abc.jar;efg.jar&quot; MyClass.java\r\njava -cp &quot;abc.jar;efg.jar&quot; MyClass\r\n```\r\n\r\nvs.\r\n\r\n```lang-none\r\njavac -cp &quot;**./**;abc.jar;efg.jar&quot; MyClass.java&lt;br&gt;\r\njava -cp &quot;**./**;abc.jar;efg.jar&quot; MyClass\r\n```\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>This is how I solved my issue.</p>\n<p>I noticed if you are including jar files with your compilation, adding the current directory (./) to the classpath helps.</p>\n<pre class=\"lang-none prettyprint-override\"><code>javac -cp &quot;abc.jar;efg.jar&quot; MyClass.java\njava -cp &quot;abc.jar;efg.jar&quot; MyClass\n</code></pre>\n<p>vs.</p>\n<pre class=\"lang-none prettyprint-override\"><code>javac -cp &quot;**./**;abc.jar;efg.jar&quot; MyClass.java&lt;br&gt;\njava -cp &quot;**./**;abc.jar;efg.jar&quot; MyClass\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1202593,"reputation":9569,"user_id":1173495,"accept_rate":46,"display_name":"SANN3"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1612373517,"creation_date":1612373517,"answer_id":66032687,"question_id":18093928,"body_markdown":"Excluding the following files solved the problem.\r\n\r\nMETA-INF/*.SF\r\n\r\nMETA-INF/*.DSA\r\n\r\nMETA-INF/*.RSA\r\n\r\nAdded the following code in `build.gradle`\r\n\r\n    jar {\r\n        from {\r\n            configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }\r\n        }\r\n        {\r\n            exclude &quot;META-INF/*.SF&quot;\r\n            exclude &quot;META-INF/*.DSA&quot;\r\n            exclude &quot;META-INF/*.RSA&quot;\r\n        }\r\n        manifest {\r\n            attributes(\r\n                    &#39;Main-Class&#39;: &#39;mainclass&#39;\r\n            )\r\n        }\r\n    }","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Excluding the following files solved the problem.</p>\n<p>META-INF/*.SF</p>\n<p>META-INF/*.DSA</p>\n<p>META-INF/*.RSA</p>\n<p>Added the following code in <code>build.gradle</code></p>\n<pre><code>jar {\n    from {\n        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }\n    }\n    {\n        exclude &quot;META-INF/*.SF&quot;\n        exclude &quot;META-INF/*.DSA&quot;\n        exclude &quot;META-INF/*.RSA&quot;\n    }\n    manifest {\n        attributes(\n                'Main-Class': 'mainclass'\n        )\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12232652,"reputation":4004,"user_id":8930395,"display_name":"LOrD_ARaGOrN"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1643829433,"creation_date":1632129997,"answer_id":69252032,"question_id":18093928,"body_markdown":"I came one level up. So, now the *HelloWorld.class* file is in *hello\\HelloWorld.class* and I ran the below command. Where *cp* is classpath and `.` means check in current directory only.\r\n\r\n    java -cp . hello.HelloWorld\r\n\r\nOutput\r\n\r\n    Hello world!\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>I came one level up. So, now the <em>HelloWorld.class</em> file is in <em>hello\\HelloWorld.class</em> and I ran the below command. Where <em>cp</em> is classpath and <code>.</code> means check in current directory only.</p>\n<pre><code>java -cp . hello.HelloWorld\n</code></pre>\n<p>Output</p>\n<pre><code>Hello world!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22335295,"reputation":9,"user_id":16555987,"display_name":"Juliano Soder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643829713,"creation_date":1639427029,"answer_id":70340493,"question_id":18093928,"body_markdown":"The simplest way you can fix it is by redownloading the [Maven][1] Apache here: https://maven.apache.org/download.cgi\r\n\r\nThan you set your path again:\r\n\r\n [![Enter image description here][2]][2]\r\n\r\n### System variable\r\n\r\nPut the path there where you set your Apache Maven folder like: *C:\\Program Files\\apache-maven-3.8.4\\bin*\r\n\r\n[![Enter image description here][3]][3]\r\n\r\nRestart the terminal or IDE, and it should work.\r\n\r\nIt always works for me.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [2]: https://i.stack.imgur.com/wPpMi.png\r\n  [3]: https://i.stack.imgur.com/Gtf2U.png\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>The simplest way you can fix it is by redownloading the <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a> Apache here: <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">https://maven.apache.org/download.cgi</a></p>\n<p>Than you set your path again:</p>\n<p><a href=\"https://i.stack.imgur.com/wPpMi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wPpMi.png\" alt=\"Enter image description here\" /></a></p>\n<h3>System variable</h3>\n<p>Put the path there where you set your Apache Maven folder like: <em>C:\\Program Files\\apache-maven-3.8.4\\bin</em></p>\n<p><a href=\"https://i.stack.imgur.com/Gtf2U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gtf2U.png\" alt=\"Enter image description here\" /></a></p>\n<p>Restart the terminal or IDE, and it should work.</p>\n<p>It always works for me.</p>\n"},{"tags":[],"owner":{"account_id":23649881,"reputation":141,"user_id":17678908,"display_name":"TheWaterWave222"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1642986731,"creation_date":1642986731,"answer_id":70827992,"question_id":18093928,"body_markdown":"It basically means that there isn&#39;t a static ```main(String[] args)``` method. It should resolve it automatically. If it doesn&#39;t, something was screwed when the program was either made (it doesn&#39;t have a main method) or when the program was packaged (incorrect manifest information.)\r\n\r\nThis works\r\n```\r\npublic class Hello {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n}\r\n```\r\nThis doesn&#39;t work\r\n```\r\npublic class Hello {\r\n    public Hello() {\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n}\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>It basically means that there isn't a static <code>main(String[] args)</code> method. It should resolve it automatically. If it doesn't, something was screwed when the program was either made (it doesn't have a main method) or when the program was packaged (incorrect manifest information.)</p>\n<p>This works</p>\n<pre><code>public class Hello {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n<p>This doesn't work</p>\n<pre><code>public class Hello {\n    public Hello() {\n        System.out.println(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22104620,"reputation":87,"user_id":16360534,"display_name":"ritu mansata"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1643829934,"creation_date":1643703044,"answer_id":70937285,"question_id":18093928,"body_markdown":"If your package name is *javatpoint* and the package name is *com.javatpoint* and the class name is *AnotherOne*, then compile your class like this type:\r\n\r\n```lang-none\r\ncd C:\\Users\\JAY GURUDEV\\eclipse-workspace\\javatpoint\\src\\com\\javatpoint\r\njavac AnotherOne.java\r\n```\r\n\r\nAnd run this class using\r\n\r\n```lang-none\r\ncd C:\\Users\\JAY GURUDEV\\eclipse-workspace\\javatpoint\\src\r\njava com.javatpoint.AnotherOne\r\n```\r\n\r\n(Here the package name should be excluded.)\r\n\r\n\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>If your package name is <em>javatpoint</em> and the package name is <em>com.javatpoint</em> and the class name is <em>AnotherOne</em>, then compile your class like this type:</p>\n<pre class=\"lang-none prettyprint-override\"><code>cd C:\\Users\\JAY GURUDEV\\eclipse-workspace\\javatpoint\\src\\com\\javatpoint\njavac AnotherOne.java\n</code></pre>\n<p>And run this class using</p>\n<pre class=\"lang-none prettyprint-override\"><code>cd C:\\Users\\JAY GURUDEV\\eclipse-workspace\\javatpoint\\src\njava com.javatpoint.AnotherOne\n</code></pre>\n<p>(Here the package name should be excluded.)</p>\n"},{"tags":[],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654955144,"creation_date":1654955144,"answer_id":72584868,"question_id":18093928,"body_markdown":"In `Intellij IDE` select `run/debug&gt;&gt;edit configuration` and then select proper `JDK` for build and run menu.\r\n\r\n","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In <code>Intellij IDE</code> select <code>run/debug&gt;&gt;edit configuration</code> and then select proper <code>JDK</code> for build and run menu.</p>\n"},{"tags":[],"owner":{"account_id":15955644,"reputation":347,"user_id":11513875,"display_name":"Abdur Rehman"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1654973044,"creation_date":1654973044,"answer_id":72587035,"question_id":18093928,"body_markdown":"For a new version of Java which is Java18 up to until 2022.\r\nYou have to only write the **package** keyword and the folder name in which you have the java extension file and semicolon, like below:\r\n    \r\n`package JavaProgramming;`\r\n\r\nbecause I have the hello.java file in the JavaProgramming file.\r\n**Note:** Never give the space while writing folder names for java. Like *Java Programming* you have to keep it like; *JavaProgramming*, etc;\r\n\r\nThe whole code structure of a simple hello world is given below:\r\n\r\n    package JavaProgramming;\r\n\r\n    public class hello {\r\n      public static void main(String[] args) {\r\n         System.out.println(&quot;Hello java after long time&quot;);\r\n          }\r\n        }","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>For a new version of Java which is Java18 up to until 2022.\nYou have to only write the <strong>package</strong> keyword and the folder name in which you have the java extension file and semicolon, like below:</p>\n<p><code>package JavaProgramming;</code></p>\n<p>because I have the hello.java file in the JavaProgramming file.\n<strong>Note:</strong> Never give the space while writing folder names for java. Like <em>Java Programming</em> you have to keep it like; <em>JavaProgramming</em>, etc;</p>\n<p>The whole code structure of a simple hello world is given below:</p>\n<pre><code>package JavaProgramming;\n\npublic class hello {\n  public static void main(String[] args) {\n     System.out.println(&quot;Hello java after long time&quot;);\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":343034,"reputation":59,"user_id":674506,"display_name":"Uldis Barbans"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1685820675,"creation_date":1685820675,"answer_id":76397736,"question_id":18093928,"body_markdown":"Among all the answers so far, I lacked someone to call out this gross pitfall with regard to correct specification of application&#39;s classpath:\r\n\r\n**If your application and your dependencies are packaged as jars on the filesystem, and you try to run it using the `java [options] &lt;mainclass&gt;` variant, then supplying directory name(s) in CLASSPATH is not enough! You have to add the `/*` wildcard!**\r\n\r\n[Documentation](https://docs.oracle.com/en/java/javase/19/docs/specs/man/java.html) is kind of elusive on this:\r\n\r\n&gt; If the class path option isn&#39;t used and [CLASSPATH] isn&#39;t set, then the user class path consists of the current directory (.).\r\n&gt; \r\n&gt; ...\r\n\r\nThis sentence would make you presume that running `java com.acme.example.Gerbera` with *all the needed jars in your current directory* would surely work by default. Alas, it doesn&#39;t. You need to read a bit further in the documentation. What you need to do is `CLASSPATH=./* java com.acme.example.Gerbera`, or alternatively enumerate all the .jar filenames literally, with the appropriate separator.","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>Among all the answers so far, I lacked someone to call out this gross pitfall with regard to correct specification of application's classpath:</p>\n<p><strong>If your application and your dependencies are packaged as jars on the filesystem, and you try to run it using the <code>java [options] &lt;mainclass&gt;</code> variant, then supplying directory name(s) in CLASSPATH is not enough! You have to add the <code>/*</code> wildcard!</strong></p>\n<p><a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">Documentation</a> is kind of elusive on this:</p>\n<blockquote>\n<p>If the class path option isn't used and [CLASSPATH] isn't set, then the user class path consists of the current directory (.).</p>\n<p>...</p>\n</blockquote>\n<p>This sentence would make you presume that running <code>java com.acme.example.Gerbera</code> with <em>all the needed jars in your current directory</em> would surely work by default. Alas, it doesn't. You need to read a bit further in the documentation. What you need to do is <code>CLASSPATH=./* java com.acme.example.Gerbera</code>, or alternatively enumerate all the .jar filenames literally, with the appropriate separator.</p>\n"},{"tags":[],"owner":{"account_id":2543653,"reputation":1780,"user_id":2208909,"display_name":"Feng Zhang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689620404,"creation_date":1689620404,"answer_id":76707386,"question_id":18093928,"body_markdown":"In my case, my class was referring a file which was opened outside Eclipse. So it could not regenerate class on recompiling. Need to make sure all issues in &quot;Problems&quot; tab are cleared out. ","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>In my case, my class was referring a file which was opened outside Eclipse. So it could not regenerate class on recompiling. Need to make sure all issues in &quot;Problems&quot; tab are cleared out.</p>\n"},{"tags":[],"owner":{"account_id":6683250,"reputation":115,"user_id":5155570,"display_name":"Gayathri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695211649,"creation_date":1695211649,"answer_id":77142265,"question_id":18093928,"body_markdown":"For Java 17, I had to ensure one of the classes in a module atleast had a main method. Simply adding the main method fixed it for me","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>For Java 17, I had to ensure one of the classes in a module atleast had a main method. Simply adding the main method fixed it for me</p>\n"}],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4343658,"favorite_count":0,"down_vote_count":17,"up_vote_count":1901,"accepted_answer_id":18093929,"answer_count":64,"score":1884,"last_activity_date":1697786492,"creation_date":1375844566,"question_id":18093928,"body_markdown":"A common problem that new Java developers experience is that their programs fail to run with the error message:  `Could not find or load main class ...`\r\n\r\nWhat does this mean, what causes it, and how should you fix it?","title":"What does &quot;Could not find or load main class&quot; mean?","body":"<p>A common problem that new Java developers experience is that their programs fail to run with the error message:  <code>Could not find or load main class ...</code></p>\n\n<p>What does this mean, what causes it, and how should you fix it?</p>\n"},{"tags":["java","spring-boot","eclipse","spring-security","backend"],"comments":[{"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"score":0,"creation_date":1690877863,"post_id":76809698,"comment_id":135410760,"body_markdown":"I am using a youtube tutorial to learn spring security.  If anyone could tell me about other resources to stay updated with the latest version of spring security it would be  appreciable thanks for reading my question","body":"I am using a youtube tutorial to learn spring security.  If anyone could tell me about other resources to stay updated with the latest version of spring security it would be  appreciable thanks for reading my question"},{"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"score":0,"creation_date":1690877903,"post_id":76809698,"comment_id":135410770,"body_markdown":"I am unable to understand what are mvc and non-mvc patterns if anyone could explain it to me it would be a great  deal","body":"I am unable to understand what are mvc and non-mvc patterns if anyone could explain it to me it would be a great  deal"},{"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"score":0,"creation_date":1690881044,"post_id":76809698,"comment_id":135411457,"body_markdown":"Thank you for editing James it would be better if you could provide some help","body":"Thank you for editing James it would be better if you could provide some help"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":2,"creation_date":1690889457,"post_id":76809698,"comment_id":135413190,"body_markdown":"this solves your problem https://spring.io/security/cve-2023-34035","body":"this solves your problem <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"nofollow noreferrer\">spring.io/security/cve-2023-34035</a>"},{"owner":{"account_id":7115123,"reputation":77,"user_id":5441709,"display_name":"Raster R"},"score":0,"creation_date":1691040518,"post_id":76809698,"comment_id":135437470,"body_markdown":"@Toerktumlare is correct but the answer can be elaborated more","body":"@Toerktumlare is correct but the answer can be elaborated more"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1691053250,"post_id":76809698,"comment_id":135440337,"body_markdown":"One thing that is wrong with your configuration is that you have `auth.anyRequest().authenticated();` twice. Basically the first one already renders everything after that useless. This line has to come last not as the first, as the rules are consulted in the order they are defined in .","body":"One thing that is wrong with your configuration is that you have <code>auth.anyRequest().authenticated();</code> twice. Basically the first one already renders everything after that useless. This line has to come last not as the first, as the rules are consulted in the order they are defined in ."}],"answers":[{"tags":[],"owner":{"account_id":26311197,"reputation":101,"user_id":19974684,"display_name":"Raghu"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1695463691,"creation_date":1691041227,"answer_id":76825159,"question_id":76809698,"body_markdown":"For now there are two options recommended by https://spring.io/security/cve-2023-34035  \r\n\r\n**First Option:**   \r\nDid a small very simple poc war web application in tomcat.\r\nDebugged  this method -\r\n\r\norg.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(HttpMethod method, String... patterns)\r\n\r\nStudied https://spring.io/security/cve-2023-34035\r\n\r\nJust before the below lines in above mentioned method I examined what was in the registrations object.\r\n\r\n        \r\nAssert.isTrue(registrations.size() == 1, &quot;This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).&quot;);\r\n\r\nFound it to be registrations of\r\n\r\n\r\n    org.apache.catalina.servlets.DefaultServlet against &quot;default&quot;\r\n    org.apache.jasper.servlet.JspServlet against &quot;jsp&quot;\r\n    org.springframework.web.servlet.DispatcherServlet against &quot;dispatcher&quot;\r\n\r\nIn https://spring.io/security/cve-2023-34035 they mention\r\n&quot;Sometimes these extra servlets are not needed. For example, some servlet containers will add a DefaultServlet that DispatcherServlet effectively replaces. In many cases, such a servlet can be removed from your container&#39;s global configuration&quot;.\r\n\r\nWhat they are saying is that we should edit apache-tomcat-10.1.10\\conf\\web.xml.\r\n\r\nWe should comment out the registrations in that web.xml for org.apache.catalina.servlets.DefaultServlet,\r\norg.apache.jasper.servlet.JspServlet.\r\nWe should also remove the mapping entries in same web.xml\r\n\r\nFor other servlet containers we can consider similar concepts.\r\n\r\n**Second Option:**  \r\nThe other option is to do what they also suggested in &quot;For an example mitigation, please see the following Spring Security sample application and the corresponding diff.&quot; https://spring.io/security/cve-2023-34035 namely follow https://github.com/spring-projects/spring-security-samples/commit/4e3bec904a5467db28ea33e25ac9d90524b53d66\r\n\r\nIn other words the example they give is\r\nReplace :\r\n\r\n        .requestMatchers(&quot;/login&quot;, &quot;/resources/**&quot;).permitAll()   \r\n\r\nwith   \r\n\r\n        .requestMatchers(mvc.pattern(&quot;/login&quot;),\r\n             mvc.pattern(&quot;/resources/**&quot;)).permitAll()  \r\n\r\nIn a web application you would usually use mvc matcher as shown here.\r\nYou can also use ant matcher - there is a little risk in using ant matchers as explained here- https://stackoverflow.com/questions/50536292/difference-between-antmatcher-and-mvcmatcher . **Using ant matcher is best avoided unless you are willing to do necessary testing if you start using it.** In complex scenarios can use regexmatchers also - use it only if needed (not in this scenario where you just want to solve this current issue). \r\n\r\nRegarding how to achieve mvc.pattern() itself here are the steps.  Declare a bean as below somewhere. \r\n```    \r\n@Bean\r\n\tMvcRequestMatcher.Builder mvc(HandlerMappingIntrospector introspector) {\r\n\t    return new MvcRequestMatcher.Builder(introspector);\r\n\t} \r\n```\r\n\r\nIn your security configurations just autowire it like so:  \r\n``` \r\n@Autowired\r\n\tMvcRequestMatcher.Builder mvc;\r\n``` \r\n\r\n**Decision Point:**  \r\n\r\nIf you want to retain original code try editing the server&#39;s (not project&#39;s) web.xml-or similar configuration if not tomcat - but some other servlet container , to eliminate the extra servlets that come by default in servlet containers.  \r\nIf you are willing to change code try the second option.  \r\n\r\n *Also Note:*\r\n\r\n Sometimes if its legacy code and you are using DispatcherServlet methods in your code you will have to eliminate that to use first option or else settle for second option.\r\n\r\nHope this helps\r\n\r\n**Adding more new information**:   \r\n\r\nIn fact if you further migrate from spring-boot-starter-parent:3.1.2 to spring-boot-starter-parent:3.1.3 the messages are even clearer.\r\nIt says the problem:\r\nthere is more than one mappable servlet in your servlet context: {org.apache.jasper.servlet.JspServlet=[*.jspx, *.jsp], org.springframework.web.servlet.DispatcherServlet=[/]}.\r\n\r\nAnd that is why following https://spring.io/security/cve-2023-34035 one option is to just disable the default and jsp related servlets. Useful if you dont want to change code but are fine with changing server configuration.\r\n\r\nThe second option if you go the code change route was always clearly logged.\r\n&quot;For each MvcRequestMatcher, call MvcRequestMatcher#setServletPath to indicate the servlet path.&quot; Only as &quot;otherwise&quot; they mention AntMatchers\r\n\r\nI will repeat avoid AntMatcher because of its dangers when using web applications for this migration purpose if you go for second option.  \r\n\r\n\r\n","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>For now there are two options recommended by <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">https://spring.io/security/cve-2023-34035</a></p>\n<p><strong>First Option:</strong><br />\nDid a small very simple poc war web application in tomcat.\nDebugged  this method -</p>\n<p>org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(HttpMethod method, String... patterns)</p>\n<p>Studied <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">https://spring.io/security/cve-2023-34035</a></p>\n<p>Just before the below lines in above mentioned method I examined what was in the registrations object.</p>\n<p>Assert.isTrue(registrations.size() == 1, &quot;This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).&quot;);</p>\n<p>Found it to be registrations of</p>\n<pre><code>org.apache.catalina.servlets.DefaultServlet against &quot;default&quot;\norg.apache.jasper.servlet.JspServlet against &quot;jsp&quot;\norg.springframework.web.servlet.DispatcherServlet against &quot;dispatcher&quot;\n</code></pre>\n<p>In <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">https://spring.io/security/cve-2023-34035</a> they mention\n&quot;Sometimes these extra servlets are not needed. For example, some servlet containers will add a DefaultServlet that DispatcherServlet effectively replaces. In many cases, such a servlet can be removed from your container's global configuration&quot;.</p>\n<p>What they are saying is that we should edit apache-tomcat-10.1.10\\conf\\web.xml.</p>\n<p>We should comment out the registrations in that web.xml for org.apache.catalina.servlets.DefaultServlet,\norg.apache.jasper.servlet.JspServlet.\nWe should also remove the mapping entries in same web.xml</p>\n<p>For other servlet containers we can consider similar concepts.</p>\n<p><strong>Second Option:</strong><br />\nThe other option is to do what they also suggested in &quot;For an example mitigation, please see the following Spring Security sample application and the corresponding diff.&quot; <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">https://spring.io/security/cve-2023-34035</a> namely follow <a href=\"https://github.com/spring-projects/spring-security-samples/commit/4e3bec904a5467db28ea33e25ac9d90524b53d66\" rel=\"noreferrer\">https://github.com/spring-projects/spring-security-samples/commit/4e3bec904a5467db28ea33e25ac9d90524b53d66</a></p>\n<p>In other words the example they give is\nReplace :</p>\n<pre><code>    .requestMatchers(&quot;/login&quot;, &quot;/resources/**&quot;).permitAll()   \n</code></pre>\n<p>with</p>\n<pre><code>    .requestMatchers(mvc.pattern(&quot;/login&quot;),\n         mvc.pattern(&quot;/resources/**&quot;)).permitAll()  \n</code></pre>\n<p>In a web application you would usually use mvc matcher as shown here.\nYou can also use ant matcher - there is a little risk in using ant matchers as explained here- <a href=\"https://stackoverflow.com/questions/50536292/difference-between-antmatcher-and-mvcmatcher\">Difference between antMatcher and mvcMatcher</a> . <strong>Using ant matcher is best avoided unless you are willing to do necessary testing if you start using it.</strong> In complex scenarios can use regexmatchers also - use it only if needed (not in this scenario where you just want to solve this current issue).</p>\n<p>Regarding how to achieve mvc.pattern() itself here are the steps.  Declare a bean as below somewhere.</p>\n<pre><code>@Bean\n    MvcRequestMatcher.Builder mvc(HandlerMappingIntrospector introspector) {\n        return new MvcRequestMatcher.Builder(introspector);\n    } \n</code></pre>\n<p>In your security configurations just autowire it like so:</p>\n<pre><code>@Autowired\n    MvcRequestMatcher.Builder mvc;\n</code></pre>\n<p><strong>Decision Point:</strong></p>\n<p>If you want to retain original code try editing the server's (not project's) web.xml-or similar configuration if not tomcat - but some other servlet container , to eliminate the extra servlets that come by default in servlet containers.<br />\nIf you are willing to change code try the second option.</p>\n<p><em>Also Note:</em></p>\n<p>Sometimes if its legacy code and you are using DispatcherServlet methods in your code you will have to eliminate that to use first option or else settle for second option.</p>\n<p>Hope this helps</p>\n<p><strong>Adding more new information</strong>:</p>\n<p>In fact if you further migrate from spring-boot-starter-parent:3.1.2 to spring-boot-starter-parent:3.1.3 the messages are even clearer.\nIt says the problem:\nthere is more than one mappable servlet in your servlet context: {org.apache.jasper.servlet.JspServlet=[*.jspx, *.jsp], org.springframework.web.servlet.DispatcherServlet=[/]}.</p>\n<p>And that is why following <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">https://spring.io/security/cve-2023-34035</a> one option is to just disable the default and jsp related servlets. Useful if you dont want to change code but are fine with changing server configuration.</p>\n<p>The second option if you go the code change route was always clearly logged.\n&quot;For each MvcRequestMatcher, call MvcRequestMatcher#setServletPath to indicate the servlet path.&quot; Only as &quot;otherwise&quot; they mention AntMatchers</p>\n<p>I will repeat avoid AntMatcher because of its dangers when using web applications for this migration purpose if you go for second option.</p>\n"},{"tags":[],"owner":{"account_id":1052502,"reputation":3122,"user_id":1056042,"accept_rate":61,"display_name":"Arshad Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691207376,"creation_date":1691207376,"answer_id":76840071,"question_id":76809698,"body_markdown":"There is small configuration which will prevent us from:\r\n\r\n    This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).\r\n\r\nerror. \r\nIt is clearly mentoined at [Configuration Migrations\r\n][1]\r\n\r\n&gt; If you are having problem with the new `requestMatchers` methods, you can always switch back to the `RequestMatcher` implementation that you were using. For example, if you still want to use `AntPathRequestMatcher` and `RegexRequestMatcher` implementations, you can use the `requestMatchers` method that accepts a `RequestMatcher` instance:\r\n\r\nOkay! In the context of your issue mentoined in the code above you should try to add `antMatcher(pattern)` as parameter to `requestMatchers()` as shown below:\r\n\r\n    @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            return http.csrf(csrf -&gt; csrf.disable())\r\n               .authorizeHttpRequests(auth -&gt; {\r\n                auth.anyRequest().authenticated();\r\n                auth.requestMatchers(antMatcher(&quot;/auth/**&quot;)).permitAll();\r\n                auth.anyRequest().authenticated();\r\n            }).httpBasic().and().build();\r\n        }\r\n\r\nHope it will solve your issue.\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\r\n","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>There is small configuration which will prevent us from:</p>\n<pre><code>This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).\n</code></pre>\n<p>error.\nIt is clearly mentoined at <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"nofollow noreferrer\">Configuration Migrations\n</a></p>\n<blockquote>\n<p>If you are having problem with the new <code>requestMatchers</code> methods, you can always switch back to the <code>RequestMatcher</code> implementation that you were using. For example, if you still want to use <code>AntPathRequestMatcher</code> and <code>RegexRequestMatcher</code> implementations, you can use the <code>requestMatchers</code> method that accepts a <code>RequestMatcher</code> instance:</p>\n</blockquote>\n<p>Okay! In the context of your issue mentoined in the code above you should try to add <code>antMatcher(pattern)</code> as parameter to <code>requestMatchers()</code> as shown below:</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http.csrf(csrf -&gt; csrf.disable())\n           .authorizeHttpRequests(auth -&gt; {\n            auth.anyRequest().authenticated();\n            auth.requestMatchers(antMatcher(&quot;/auth/**&quot;)).permitAll();\n            auth.anyRequest().authenticated();\n        }).httpBasic().and().build();\n    }\n</code></pre>\n<p>Hope it will solve your issue.</p>\n"},{"tags":[],"owner":{"account_id":28758112,"reputation":401,"user_id":22024689,"display_name":"Iman Hosseinzadeh"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1692260874,"creation_date":1692260874,"answer_id":76919712,"question_id":76809698,"body_markdown":"A migration occurred due to vulnerability [CVE-2023-34035][1].\r\n\r\nIn the event that you get an error like the following:\r\n\r\n&gt; This method cannot decide whether these patterns are Spring MVC\r\n&gt; patterns or not. If this endpoint is a Spring MVC endpoint, please use\r\n&gt; `requestMatchers(MvcRequestMatcher)`; otherwise, please use\r\n&gt; `requestMatchers(AntPathRequestMatcher)`.\r\n\r\nYou should use **a complete RequestMatcher**.\r\n\r\nFor example, if an application has a servlet deployed to /my-servlet/* and is authorizing that traffic like so:\r\n\r\n    @Bean\r\n    SecurityFilterChain appSecurity(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeHttpRequests((authorize) -&gt; authorize\r\n                .requestMatchers(&quot;/my-servlet/**&quot;).hasRole(&quot;USER&quot;)\r\n                .requestMatchers(&quot;/spring-mvc-controller/**&quot;).hasRole(&quot;USER&quot;)\r\n                .anyRequest().authenticated()\r\n            )\r\n            // ...\r\n        return http.build();\r\n    }\r\n\r\nthen, the application should instead do the following:\r\n\r\n    import static org.springframework.security.web.util.matcher.AntPathRequestMatcher.antMatcher;\r\n    \r\n    @Bean\r\n    MvcRequestMatcher.Builder mvc(HandlerMappingIntrospector introspector) {\r\n    \treturn new MvcRequestMatcher.Builder(introspector);\r\n    }\r\n    \r\n    @Bean\r\n    SecurityFilterChain appSecurity(HttpSecurity http, MvcRequestMatcher.Builder mvc) throws Exception {\r\n        http\r\n            .authorizeHttpRequests((authorize) -&gt; authorize\r\n                .requestMatchers(antMatcher(&quot;/my-servlet/*&quot;)).hasRole(&quot;USER&quot;)\r\n                .requestMatchers(mvc.pattern(&quot;/spring-mvc-controller/**&quot;)).hasRole(&quot;USER&quot;)\r\n                .anyRequest().authenticated()\r\n            )\r\n            // ...\r\n        return http.build();\r\n    }\r\n\r\n\r\nFor more details read this repository offered by Spring: [cve-2023-34035-mitigations][2]\r\n\r\n\r\n  [1]: https://spring.io/security/cve-2023-34035\r\n  [2]: https://github.com/jzheaux/cve-2023-34035-mitigations","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>A migration occurred due to vulnerability <a href=\"https://spring.io/security/cve-2023-34035\" rel=\"noreferrer\">CVE-2023-34035</a>.</p>\n<p>In the event that you get an error like the following:</p>\n<blockquote>\n<p>This method cannot decide whether these patterns are Spring MVC\npatterns or not. If this endpoint is a Spring MVC endpoint, please use\n<code>requestMatchers(MvcRequestMatcher)</code>; otherwise, please use\n<code>requestMatchers(AntPathRequestMatcher)</code>.</p>\n</blockquote>\n<p>You should use <strong>a complete RequestMatcher</strong>.</p>\n<p>For example, if an application has a servlet deployed to /my-servlet/* and is authorizing that traffic like so:</p>\n<pre><code>@Bean\nSecurityFilterChain appSecurity(HttpSecurity http) throws Exception {\n    http\n        .authorizeHttpRequests((authorize) -&gt; authorize\n            .requestMatchers(&quot;/my-servlet/**&quot;).hasRole(&quot;USER&quot;)\n            .requestMatchers(&quot;/spring-mvc-controller/**&quot;).hasRole(&quot;USER&quot;)\n            .anyRequest().authenticated()\n        )\n        // ...\n    return http.build();\n}\n</code></pre>\n<p>then, the application should instead do the following:</p>\n<pre><code>import static org.springframework.security.web.util.matcher.AntPathRequestMatcher.antMatcher;\n\n@Bean\nMvcRequestMatcher.Builder mvc(HandlerMappingIntrospector introspector) {\n    return new MvcRequestMatcher.Builder(introspector);\n}\n\n@Bean\nSecurityFilterChain appSecurity(HttpSecurity http, MvcRequestMatcher.Builder mvc) throws Exception {\n    http\n        .authorizeHttpRequests((authorize) -&gt; authorize\n            .requestMatchers(antMatcher(&quot;/my-servlet/*&quot;)).hasRole(&quot;USER&quot;)\n            .requestMatchers(mvc.pattern(&quot;/spring-mvc-controller/**&quot;)).hasRole(&quot;USER&quot;)\n            .anyRequest().authenticated()\n        )\n        // ...\n    return http.build();\n}\n</code></pre>\n<p>For more details read this repository offered by Spring: <a href=\"https://github.com/jzheaux/cve-2023-34035-mitigations\" rel=\"noreferrer\">cve-2023-34035-mitigations</a></p>\n"},{"tags":[],"owner":{"account_id":11993302,"reputation":31,"user_id":8775691,"display_name":"Sanjit Shrestha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694363448,"creation_date":1694363448,"answer_id":77077000,"question_id":76809698,"body_markdown":"The above issue was resolved with the below method:\r\n\r\n    String[] unSecuredPaths = new String[]{\r\n                &quot;/validate&quot;,\r\n                &quot;/&quot;}\r\n    \r\n        private AntPathRequestMatcher[] getAntPathRequestMatchers() {\r\n                AntPathRequestMatcher[] requestMatchers = new AntPathRequestMatcher[unSecuredPaths.length];\r\n                for (int i = 0; i &lt; unSecuredPaths.length; i++) {\r\n                    requestMatchers[i] = new AntPathRequestMatcher(unSecuredPaths[i]);\r\n                }\r\n                return requestMatchers;\r\n            }\r\n        \r\n    @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            contentSecurityConfig(http);\r\n    \r\n            AntPathRequestMatcher[] requestMatchers = getAntPathRequestMatchers();\r\n            http.authorizeHttpRequests(authorize -&gt; authorize\r\n                            .requestMatchers(**requestMatchers**).permitAll()\r\n                            .anyRequest().authenticated()).httpBasic(withDefaults());\r\n            return http.build();\r\n        }\r\n\r\nFor MvcRequestMatcher, replace AntPathRequestMatcher with MvcRequestMatcher, exact solutions should work.\r\n","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>The above issue was resolved with the below method:</p>\n<pre><code>String[] unSecuredPaths = new String[]{\n            &quot;/validate&quot;,\n            &quot;/&quot;}\n\n    private AntPathRequestMatcher[] getAntPathRequestMatchers() {\n            AntPathRequestMatcher[] requestMatchers = new AntPathRequestMatcher[unSecuredPaths.length];\n            for (int i = 0; i &lt; unSecuredPaths.length; i++) {\n                requestMatchers[i] = new AntPathRequestMatcher(unSecuredPaths[i]);\n            }\n            return requestMatchers;\n        }\n    \n@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        contentSecurityConfig(http);\n\n        AntPathRequestMatcher[] requestMatchers = getAntPathRequestMatchers();\n        http.authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(**requestMatchers**).permitAll()\n                        .anyRequest().authenticated()).httpBasic(withDefaults());\n        return http.build();\n    }\n</code></pre>\n<p>For MvcRequestMatcher, replace AntPathRequestMatcher with MvcRequestMatcher, exact solutions should work.</p>\n"},{"tags":[],"owner":{"account_id":5411899,"reputation":372,"user_id":4308371,"display_name":"Krishnakumar R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696514515,"creation_date":1696514515,"answer_id":77237857,"question_id":76809698,"body_markdown":"I had similar problems when trying to setup OAuth2 resource server. I was using h2 for my REST data store. So it was complaining \r\n\r\n&gt; there is more than one mappable servlet in your servlet context:\r\n&gt; {org.h2.server.web.JakartaWebServlet=[/h2-console/*],\r\n&gt; org.springframework.web.servlet.DispatcherServlet=[/]}.\r\n \r\nBelow is the config I used to solve it. Ignore the OAuth2 parts in the code. Hope this helps.\r\n\r\n   \r\n\r\n    @Bean\r\n        public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\r\n            http.authorizeHttpRequests(authorizeRequests -&gt;\r\n                            authorizeRequests\r\n                                    .requestMatchers(antMatcher((&quot;/h2-console/**&quot;)))\r\n                                    .permitAll()\r\n    \r\n                                    .requestMatchers(antMatcher(&quot;/api/posts&quot;), antMatcher(HttpMethod.POST))\r\n                                    .hasAuthority(&quot;SCOPE_createBlogPost&quot;)\r\n    \r\n                                    .requestMatchers(antMatcher(&quot;/api/posts&quot;), antMatcher(HttpMethod.DELETE))\r\n                                    .hasAuthority(&quot;SCOPE_deleteBlogPost&quot;)\r\n    \r\n                                    .anyRequest()\r\n                                    .authenticated())\r\n                    .headers(headersConfigurer -&gt; headersConfigurer.frameOptions(HeadersConfigurer.FrameOptionsConfig::disable))\r\n                    .csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.ignoringRequestMatchers(antMatcher(&quot;/h2-console/**&quot;)))\r\n                    .oauth2ResourceServer(oAuth2ResourceServerConfigurer -&gt;\r\n                            oAuth2ResourceServerConfigurer.jwt(withDefaults()));\r\n    \r\n            return http.build();\r\n        }\r\n\r\n","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>I had similar problems when trying to setup OAuth2 resource server. I was using h2 for my REST data store. So it was complaining</p>\n<blockquote>\n<p>there is more than one mappable servlet in your servlet context:\n{org.h2.server.web.JakartaWebServlet=[/h2-console/*],\norg.springframework.web.servlet.DispatcherServlet=[/]}.</p>\n</blockquote>\n<p>Below is the config I used to solve it. Ignore the OAuth2 parts in the code. Hope this helps.</p>\n<pre><code>@Bean\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests(authorizeRequests -&gt;\n                        authorizeRequests\n                                .requestMatchers(antMatcher((&quot;/h2-console/**&quot;)))\n                                .permitAll()\n\n                                .requestMatchers(antMatcher(&quot;/api/posts&quot;), antMatcher(HttpMethod.POST))\n                                .hasAuthority(&quot;SCOPE_createBlogPost&quot;)\n\n                                .requestMatchers(antMatcher(&quot;/api/posts&quot;), antMatcher(HttpMethod.DELETE))\n                                .hasAuthority(&quot;SCOPE_deleteBlogPost&quot;)\n\n                                .anyRequest()\n                                .authenticated())\n                .headers(headersConfigurer -&gt; headersConfigurer.frameOptions(HeadersConfigurer.FrameOptionsConfig::disable))\n                .csrf(httpSecurityCsrfConfigurer -&gt; httpSecurityCsrfConfigurer.ignoringRequestMatchers(antMatcher(&quot;/h2-console/**&quot;)))\n                .oauth2ResourceServer(oAuth2ResourceServerConfigurer -&gt;\n                        oAuth2ResourceServerConfigurer.jwt(withDefaults()));\n\n        return http.build();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15201666,"reputation":1,"user_id":10969479,"display_name":"sakthi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697766455,"creation_date":1697595707,"answer_id":77313143,"question_id":76809698,"body_markdown":"\r\nThis method cannot decide whether these patterns are Spring MVC patterns or not.\r\n\r\nIf this endpoint is a Spring MVC endpoint, please use `requestMatchers(MvcRequestMatcher)`; otherwise, please use `requestMatchers(AntPathRequestMatcher)`.\r\n\r\nMy usage as below:\r\n\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n    \r\n    @Bean\r\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \treturn http\r\n    \t\t\t.csrf(csrf -&gt; csrf.ignoringRequestMatchers(AntPathRequestMatcher.antMatcher(&quot;/h2-console/**&quot;)))\r\n    \t\t\t.authorizeHttpRequests(requests -&gt; requests.requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/h2-console/**&quot;)).permitAll())\r\n    \t\t\t.authorizeHttpRequests(requests -&gt; requests.anyRequest().authenticated())\r\n    \t\t\t.headers(headers -&gt; headers.frameOptions().sameOrigin())\r\n    \t\t\t.formLogin(withDefaults())\r\n    \t\t\t.build();\r\n    }","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>This method cannot decide whether these patterns are Spring MVC patterns or not.</p>\n<p>If this endpoint is a Spring MVC endpoint, please use <code>requestMatchers(MvcRequestMatcher)</code>; otherwise, please use <code>requestMatchers(AntPathRequestMatcher)</code>.</p>\n<p>My usage as below:</p>\n<pre><code>import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\n@Bean\nSecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http\n            .csrf(csrf -&gt; csrf.ignoringRequestMatchers(AntPathRequestMatcher.antMatcher(&quot;/h2-console/**&quot;)))\n            .authorizeHttpRequests(requests -&gt; requests.requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/h2-console/**&quot;)).permitAll())\n            .authorizeHttpRequests(requests -&gt; requests.anyRequest().authenticated())\n            .headers(headers -&gt; headers.frameOptions().sameOrigin())\n            .formLogin(withDefaults())\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10427139,"reputation":139,"user_id":7688028,"display_name":"Tạ Anh T&#250;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697692809,"creation_date":1697692809,"answer_id":77321133,"question_id":76809698,"body_markdown":"I got the same error when using spring security with h2 database. I tried to disable the h2-console, or switch to MySQL, the error is gone.\r\n\r\nSo I think this error is related to h2 database, currently I don&#39;t have any solution for this h2 database. I&#39;m using MySQL instead","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>I got the same error when using spring security with h2 database. I tried to disable the h2-console, or switch to MySQL, the error is gone.</p>\n<p>So I think this error is related to h2 database, currently I don't have any solution for this h2 database. I'm using MySQL instead</p>\n"},{"tags":[],"owner":{"account_id":207741,"reputation":573,"user_id":457788,"accept_rate":44,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697785933,"creation_date":1697785933,"answer_id":77328962,"question_id":76809698,"body_markdown":"I was able to resolve the ambiguity by wrapping the string patterns with matchers.\r\n\r\nBefore:\r\n\r\n    http\r\n        .authorizeHttpRequests()\r\n            .requestMatchers(&quot;/dashboard/run/**&quot;).authenticated()\r\n            .requestMatchers(&quot;/editor/**&quot;).authenticated()\r\n            .requestMatchers(&quot;/**&quot;).permitAll()\r\n\r\nAfter:\r\n\r\n    http\r\n        .authorizeHttpRequests()\r\n            .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/dashboard/run/**&quot;)).authenticated()\r\n            .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/editor/**&quot;)).authenticated()\r\n            .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/**&quot;)).permitAll()","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>I was able to resolve the ambiguity by wrapping the string patterns with matchers.</p>\n<p>Before:</p>\n<pre><code>http\n    .authorizeHttpRequests()\n        .requestMatchers(&quot;/dashboard/run/**&quot;).authenticated()\n        .requestMatchers(&quot;/editor/**&quot;).authenticated()\n        .requestMatchers(&quot;/**&quot;).permitAll()\n</code></pre>\n<p>After:</p>\n<pre><code>http\n    .authorizeHttpRequests()\n        .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/dashboard/run/**&quot;)).authenticated()\n        .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/editor/**&quot;)).authenticated()\n        .requestMatchers(AntPathRequestMatcher.antMatcher(&quot;/**&quot;)).permitAll()\n</code></pre>\n"}],"owner":{"account_id":28557723,"reputation":423,"user_id":21861720,"display_name":"Ronit Pandey"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20814,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":8,"score":27,"last_activity_date":1697785933,"creation_date":1690877781,"question_id":76809698,"body_markdown":"When I try to run an application it fails to start and throws this exception. \r\n\r\n&gt; This method cannot decide whether these patterns are Spring MVC\r\n&gt; patterns or not. If this endpoint is a Spring MVC endpoint, please use\r\n&gt; requestMatchers(MvcRequestMatcher); otherwise, please use\r\n&gt; requestMatchers(AntPathRequestMatcher).\r\n\r\nI am new to Spring Security. Please help me solve this error.\r\n\r\nThis is my spring security configuration class\r\n\r\n```java\r\npackage com.ronit.SpringSecurityTutorial.configuration;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.ProviderManager;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfiguration {\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tAuthenticationManager authManager(UserDetailsService detailsService) {\r\n\t\tDaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\r\n\t\tdaoProvider.setUserDetailsService(detailsService);\r\n\t\treturn new ProviderManager(daoProvider);\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;removal&quot;)\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http.csrf(csrf -&gt; csrf.disable()).authorizeHttpRequests(auth -&gt; {\r\n\t\t\tauth.anyRequest().authenticated();\r\n\t\t\tauth.requestMatchers(&quot;/auth/**&quot;).permitAll();\r\n\t\t\tauth.anyRequest().authenticated();\r\n\t\t}).httpBasic().and().build();\r\n\t}\r\n}\r\n```\r\n\r\nThis is the spring boot application \r\n\r\n\r\n```java\r\npackage com.ronit.SpringSecurityTutorial;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\nimport org.springframework.boot.CommandLineRunner;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\n\r\nimport com.ronit.SpringSecurityTutorial.models.ApplicationUser;\r\nimport com.ronit.SpringSecurityTutorial.models.Role;\r\nimport com.ronit.SpringSecurityTutorial.repository.RoleRepository;\r\nimport com.ronit.SpringSecurityTutorial.repository.UserRepository;\r\n\r\n@SpringBootApplication\r\npublic class SpringSecurityTutorialApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(SpringSecurityTutorialApplication.class,args);\r\n\t}\r\n\r\n\t@Bean\r\n\tCommandLineRunner run(RoleRepository roleRepository, UserRepository userRepository,\r\n\t\t\tPasswordEncoder passwordEncoder) {\r\n\t\treturn args -&gt; {\r\n\t\t\tif (roleRepository.findByAuthority(&quot;ADMIN&quot;).isPresent())\r\n\t\t\t\treturn;\r\n\t\t\tRole adminRole = roleRepository.save(new Role(&quot;ADMIN&quot;));\r\n\t\t\troleRepository.save(new Role(&quot;USER&quot;));\r\n\r\n\t\t\tSet&lt;Role&gt; roles = new HashSet&lt;&gt;();\r\n\t\t\troles.add(adminRole);\r\n\t\t\tApplicationUser admin = new \r\n\t\t\tApplicationUser(1, &quot;Admin&quot;, passwordEncoder.encode(&quot;Password&quot;), roles);\r\n\t\t\tuserRepository.save(admin);\r\n\t\t};\r\n\t}\r\n}\r\n```\r\n\r\nThese are the dependencies in pom.xml\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t&lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nThere is no configuration related to security in application.properties file.\r\n\r\nI searched this on Google and found some Stack Overflow pages, but none of them were using similar configuration to mine.\r\n\r\nI have watched an online tutorial and made this. I followed each step correctly, but my configuration is not working.\r\n\r\nThe application is stopped and terminated straight away. \r\n\r\nI am using Spring Boot 3 and Spring Security 6 in my application.","title":"Spring security method cannot decide pattern is MVC or not Spring Boot application exception","body":"<p>When I try to run an application it fails to start and throws this exception.</p>\n<blockquote>\n<p>This method cannot decide whether these patterns are Spring MVC\npatterns or not. If this endpoint is a Spring MVC endpoint, please use\nrequestMatchers(MvcRequestMatcher); otherwise, please use\nrequestMatchers(AntPathRequestMatcher).</p>\n</blockquote>\n<p>I am new to Spring Security. Please help me solve this error.</p>\n<p>This is my spring security configuration class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.ronit.SpringSecurityTutorial.configuration;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.ProviderManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfiguration {\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    AuthenticationManager authManager(UserDetailsService detailsService) {\n        DaoAuthenticationProvider daoProvider = new DaoAuthenticationProvider();\n        daoProvider.setUserDetailsService(detailsService);\n        return new ProviderManager(daoProvider);\n    }\n\n    @SuppressWarnings(&quot;removal&quot;)\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http.csrf(csrf -&gt; csrf.disable()).authorizeHttpRequests(auth -&gt; {\n            auth.anyRequest().authenticated();\n            auth.requestMatchers(&quot;/auth/**&quot;).permitAll();\n            auth.anyRequest().authenticated();\n        }).httpBasic().and().build();\n    }\n}\n</code></pre>\n<p>This is the spring boot application</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.ronit.SpringSecurityTutorial;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.security.crypto.password.PasswordEncoder;\n\nimport com.ronit.SpringSecurityTutorial.models.ApplicationUser;\nimport com.ronit.SpringSecurityTutorial.models.Role;\nimport com.ronit.SpringSecurityTutorial.repository.RoleRepository;\nimport com.ronit.SpringSecurityTutorial.repository.UserRepository;\n\n@SpringBootApplication\npublic class SpringSecurityTutorialApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringSecurityTutorialApplication.class,args);\n    }\n\n    @Bean\n    CommandLineRunner run(RoleRepository roleRepository, UserRepository userRepository,\n            PasswordEncoder passwordEncoder) {\n        return args -&gt; {\n            if (roleRepository.findByAuthority(&quot;ADMIN&quot;).isPresent())\n                return;\n            Role adminRole = roleRepository.save(new Role(&quot;ADMIN&quot;));\n            roleRepository.save(new Role(&quot;USER&quot;));\n\n            Set&lt;Role&gt; roles = new HashSet&lt;&gt;();\n            roles.add(adminRole);\n            ApplicationUser admin = new \n            ApplicationUser(1, &quot;Admin&quot;, passwordEncoder.encode(&quot;Password&quot;), roles);\n            userRepository.save(admin);\n        };\n    }\n}\n</code></pre>\n<p>These are the dependencies in pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>There is no configuration related to security in application.properties file.</p>\n<p>I searched this on Google and found some Stack Overflow pages, but none of them were using similar configuration to mine.</p>\n<p>I have watched an online tutorial and made this. I followed each step correctly, but my configuration is not working.</p>\n<p>The application is stopped and terminated straight away.</p>\n<p>I am using Spring Boot 3 and Spring Security 6 in my application.</p>\n"},{"tags":["java","spring-boot","kotlin","gradle","java-21"],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697785792,"creation_date":1697785792,"answer_id":77328950,"question_id":77325148,"body_markdown":"As far as I understood Gradle&#39;s compatibility matrix, you should be able to compile Java 21 applications with Gradle already but using you need a different JVM for running Gradle. You should be able to do this by configuring your `PATH` with Java 20 (or 17) and setting your `JAVA_HOME` to a Java 21-JDK.\r\n\r\nIn general, if you want to use features from Java 19 or 20, you shouldn&#39;t use a source compatibility of 20. However, there aren&#39;t many features that were finalized in these releases.\r\n\r\nSince many vendors (including the Oracle build of OpenJDK and the free version of OracleJDK) stopped supporting Java 20, you might rather want to use Java 17 as your source compatibility level instead of 20.","title":"JDK21 with sourceCompatibility = 20","body":"<p>As far as I understood Gradle's compatibility matrix, you should be able to compile Java 21 applications with Gradle already but using you need a different JVM for running Gradle. You should be able to do this by configuring your <code>PATH</code> with Java 20 (or 17) and setting your <code>JAVA_HOME</code> to a Java 21-JDK.</p>\n<p>In general, if you want to use features from Java 19 or 20, you shouldn't use a source compatibility of 20. However, there aren't many features that were finalized in these releases.</p>\n<p>Since many vendors (including the Oracle build of OpenJDK and the free version of OracleJDK) stopped supporting Java 20, you might rather want to use Java 17 as your source compatibility level instead of 20.</p>\n"}],"owner":{"account_id":2801342,"reputation":9,"user_id":2409535,"display_name":"gmrosa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697785792,"creation_date":1697729164,"question_id":77325148,"body_markdown":"I&#39;m working on a gradle spring-boot hybrid project (Kava + Kotlin). \r\nDue compatibility reasons there is not yet a version for Kotlin 21. \r\nWould it be recommended to use JDK21 with target 20? \r\nSince JDK17 and JDK21 are LTS, in this case does it make any difference which version of the language I will use within it?\r\n\r\nI would like to know if it is recommended to use version 20 with JDK21, or if it would be better to use version 17 and wait for the release of 21.","title":"JDK21 with sourceCompatibility = 20","body":"<p>I'm working on a gradle spring-boot hybrid project (Kava + Kotlin).\nDue compatibility reasons there is not yet a version for Kotlin 21.\nWould it be recommended to use JDK21 with target 20?\nSince JDK17 and JDK21 are LTS, in this case does it make any difference which version of the language I will use within it?</p>\n<p>I would like to know if it is recommended to use version 20 with JDK21, or if it would be better to use version 17 and wait for the release of 21.</p>\n"},{"tags":["java","spring-boot","active-directory","spring-security-ldap"],"comments":[{"owner":{"account_id":8834151,"reputation":131,"user_id":6599119,"display_name":"Michael Manley"},"score":0,"creation_date":1697547365,"post_id":75852671,"comment_id":136291372,"body_markdown":"Any luck on finding any answers on this? I know someone that&#39;s run into something similar...","body":"Any luck on finding any answers on this? I know someone that&#39;s run into something similar..."}],"answers":[{"tags":[],"owner":{"account_id":19885630,"reputation":21,"user_id":14568656,"display_name":"mrnst"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697785543,"creation_date":1697785543,"answer_id":77328917,"question_id":75852671,"body_markdown":"Recently, we had the same error message from one of our Spring Boot applications, which is connected to AD with a very similar setup. The error only occured for one special user, and the password was correct.\r\n\r\nWe observed that the problem was caused by a special character (German &quot;umlaut&quot;) in the password. Changing the password and removing the umlaut fixed the problem.","title":"Spring Boot: LDAP Error: error code 49 - 80090308: LdapErr: DSID-0C090439, comment: AcceptSecurityContext error, data 52e","body":"<p>Recently, we had the same error message from one of our Spring Boot applications, which is connected to AD with a very similar setup. The error only occured for one special user, and the password was correct.</p>\n<p>We observed that the problem was caused by a special character (German &quot;umlaut&quot;) in the password. Changing the password and removing the umlaut fixed the problem.</p>\n"}],"owner":{"account_id":25483250,"reputation":11,"user_id":19279172,"display_name":"Sascha Heimann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1787,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697785543,"creation_date":1679898434,"question_id":75852671,"body_markdown":"I have a Spring Boot Webapplication which is working with dao authentication like a charm. But i want to implement active directory authentication too.\r\n\r\nFor testing purposes I&#39;ve modified my SecurityConfig like that:\r\n\r\n    package com.sheimann.demoapp.config;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.authentication.AuthenticationManager;\r\n    import org.springframework.security.authentication.AuthenticationProvider;\r\n    import org.springframework.security.authentication.ProviderManager;\r\n    import org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    import com.sheimann.demoapp.service.UserServiceImpl;\r\n    \r\n    \r\n    /**\r\n     * The Class WebSecurityConfig.\r\n     */\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig {\r\n    \r\n        /** The success handler. */\r\n        @Autowired\r\n        private CustomLoginSucessHandler sucessHandler;\r\n        \r\n        @Autowired\r\n        private CustomLoginFailureHandler failureHandler;\r\n    \r\n        /**\r\n         * User details service.\r\n         *\r\n         * @return the user details service\r\n         */\r\n        @Bean\r\n        UserDetailsService userDetailsService() {\r\n            return new UserServiceImpl();\r\n        }\r\n    \r\n        /**\r\n         * Password encoder.\r\n         *\r\n         * @return the b crypt password encoder\r\n         */\r\n        @Bean\r\n        BCryptPasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        /**\r\n         * Authentication provider.\r\n         *\r\n         * @return the dao authentication provider\r\n         */\r\n        @Bean\r\n        DaoAuthenticationProvider authenticationProvider() {\r\n            DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n            authProvider.setUserDetailsService(userDetailsService());\r\n            authProvider.setPasswordEncoder(passwordEncoder());\r\n            return authProvider;\r\n        }\r\n    \r\n        @Bean\r\n        public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\r\n        \r\n            ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider = \r\n            new ActiveDirectoryLdapAuthenticationProvider( &quot;mydomainName.com&quot;, &quot;ldap://mydcipaddress:389&quot;, &quot;dc=my,dc=domain,dc=com&quot;);\r\n        \r\n            // to parse AD failed credentails error message due to account - expiry,lock, credentialis - expiry,lock\r\n            activeDirectoryLdapAuthenticationProvider.setConvertSubErrorCodesToExceptions(true); \r\n            activeDirectoryLdapAuthenticationProvider.setUseAuthenticationRequestCredentials(true);\r\n            activeDirectoryLdapAuthenticationProvider.setSearchFilter(&quot;(&amp;(objectClass=user)(sAMAccountName={0}))&quot;);\r\n            \r\n            return activeDirectoryLdapAuthenticationProvider;\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager() throws Exception {\r\n            return new ProviderManager(List.of(activeDirectoryLdapAuthenticationProvider()));\r\n        }\r\n     \r\n       \t/**\r\n         * Filter chain.\r\n         *\r\n         * @param http the http\r\n         * @return the security filter chain\r\n         * @throws Exception the exception\r\n         */\r\n        @Bean\r\n        SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http.authorizeHttpRequests()\r\n                    // URL matching for accessibility\r\n                    .requestMatchers(&quot;/datatables/**&quot;,\r\n                            &quot;/css/**&quot;,\r\n                            &quot;/js/**&quot;,\r\n                            &quot;/webjars/**&quot;,\r\n                            &quot;/app.js&quot;,\r\n                            &quot;/app.css&quot;,\r\n                            &quot;/just-validate/**&quot;,\r\n                            &quot;/bootstrap-icons/**&quot;,\r\n                            &quot;/bootstrap/**&quot;,\r\n                            &quot;/popperjs/**&quot;,\r\n                            &quot;/select2-bootstrap-5-theme-1.3.0/**&quot;,\r\n                            &quot;/select2-4.1.0-rc.0/**&quot;,\r\n                            &quot;/jquery/**&quot;,\r\n                            &quot;/*.p12&quot;,\r\n                            &quot;/login&quot;,\r\n                            &quot;/register&quot;,\r\n                            &quot;/resetPw1&quot;,\r\n                            &quot;/resetPw2&quot;,\r\n                            &quot;/error&quot;,\r\n                            &quot;/logout&quot;,\r\n                            &quot;/images/**&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/admin/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\r\n                    .requestMatchers(&quot;/user/**&quot;).authenticated()\r\n                    .anyRequest().authenticated()\r\n                    .and()                \r\n                    // form login\r\n                    .csrf((csrf) -&gt; csrf.disable())\r\n                    .formLogin(login -&gt; login\r\n                            .loginPage(&quot;/login&quot;)\r\n                            .failureHandler(failureHandler)\r\n                            .successHandler(sucessHandler)\r\n                            .usernameParameter(&quot;email&quot;)\r\n                            .passwordParameter(&quot;password&quot;))\r\n                    // logout\r\n                    .logout(logout -&gt; logout\r\n                            .logoutSuccessUrl(&quot;/login?res=logoutSuccess&quot;))\r\n                    .exceptionHandling(handling -&gt; handling\r\n                            .accessDeniedPage(&quot;/access-denied&quot;))\r\n                    .authenticationManager(authenticationManager());\r\n                    \r\n            // session\r\n            /*\r\n             * .and()\r\n             * .sessionManagement()\r\n             * .invalidSessionUrl(&quot;/login?res=sst&quot;);\r\n             */\r\n            //http.authenticationProvider(authenticationProvider());\r\n            http.headers(headers -&gt; headers.frameOptions().sameOrigin());\r\n            return http.build();\r\n        } \r\n    \r\n    }\r\n\r\nAs it seems, due to adding the activeDirectoryLdapAuthenticationProvider and set the AuthenticationManager to use the activeDirectoryLdapAuthenticationProvider as only provider, my application is using this provider.\r\n\r\nWehn i try to login, my application is throwing the following error:\r\n\r\n    Caused by: javax.naming.AuthenticationException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C090439, comment: AcceptSecurityContext error, data 52e, v4563]\r\n\r\nas i&#39;ve searched the whole internet already (it feels like that), i know that 52e means: Username found but password invalid / wrong.\r\n\r\nThe problem is, that is not the truth! I&#39;ve tested my account on several ldap / active directory clients and the account is working 100%!\r\n\r\nHopefully someone is here that can put me in the right direction...\r\n\r\nMany Thanks And happy coding...\r\n\r\nSascha","title":"Spring Boot: LDAP Error: error code 49 - 80090308: LdapErr: DSID-0C090439, comment: AcceptSecurityContext error, data 52e","body":"<p>I have a Spring Boot Webapplication which is working with dao authentication like a charm. But i want to implement active directory authentication too.</p>\n<p>For testing purposes I've modified my SecurityConfig like that:</p>\n<pre><code>package com.sheimann.demoapp.config;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.AuthenticationProvider;\nimport org.springframework.security.authentication.ProviderManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider;\nimport org.springframework.security.web.SecurityFilterChain;\n\nimport com.sheimann.demoapp.service.UserServiceImpl;\n\n\n/**\n * The Class WebSecurityConfig.\n */\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    /** The success handler. */\n    @Autowired\n    private CustomLoginSucessHandler sucessHandler;\n    \n    @Autowired\n    private CustomLoginFailureHandler failureHandler;\n\n    /**\n     * User details service.\n     *\n     * @return the user details service\n     */\n    @Bean\n    UserDetailsService userDetailsService() {\n        return new UserServiceImpl();\n    }\n\n    /**\n     * Password encoder.\n     *\n     * @return the b crypt password encoder\n     */\n    @Bean\n    BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    /**\n     * Authentication provider.\n     *\n     * @return the dao authentication provider\n     */\n    @Bean\n    DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService());\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {\n    \n        ActiveDirectoryLdapAuthenticationProvider activeDirectoryLdapAuthenticationProvider = \n        new ActiveDirectoryLdapAuthenticationProvider( &quot;mydomainName.com&quot;, &quot;ldap://mydcipaddress:389&quot;, &quot;dc=my,dc=domain,dc=com&quot;);\n    \n        // to parse AD failed credentails error message due to account - expiry,lock, credentialis - expiry,lock\n        activeDirectoryLdapAuthenticationProvider.setConvertSubErrorCodesToExceptions(true); \n        activeDirectoryLdapAuthenticationProvider.setUseAuthenticationRequestCredentials(true);\n        activeDirectoryLdapAuthenticationProvider.setSearchFilter(&quot;(&amp;(objectClass=user)(sAMAccountName={0}))&quot;);\n        \n        return activeDirectoryLdapAuthenticationProvider;\n    }\n\n\n    @Bean\n    public AuthenticationManager authenticationManager() throws Exception {\n        return new ProviderManager(List.of(activeDirectoryLdapAuthenticationProvider()));\n    }\n \n    /**\n     * Filter chain.\n     *\n     * @param http the http\n     * @return the security filter chain\n     * @throws Exception the exception\n     */\n    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                // URL matching for accessibility\n                .requestMatchers(&quot;/datatables/**&quot;,\n                        &quot;/css/**&quot;,\n                        &quot;/js/**&quot;,\n                        &quot;/webjars/**&quot;,\n                        &quot;/app.js&quot;,\n                        &quot;/app.css&quot;,\n                        &quot;/just-validate/**&quot;,\n                        &quot;/bootstrap-icons/**&quot;,\n                        &quot;/bootstrap/**&quot;,\n                        &quot;/popperjs/**&quot;,\n                        &quot;/select2-bootstrap-5-theme-1.3.0/**&quot;,\n                        &quot;/select2-4.1.0-rc.0/**&quot;,\n                        &quot;/jquery/**&quot;,\n                        &quot;/*.p12&quot;,\n                        &quot;/login&quot;,\n                        &quot;/register&quot;,\n                        &quot;/resetPw1&quot;,\n                        &quot;/resetPw2&quot;,\n                        &quot;/error&quot;,\n                        &quot;/logout&quot;,\n                        &quot;/images/**&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/admin/**&quot;).hasAnyAuthority(&quot;ADMIN&quot;)\n                .requestMatchers(&quot;/user/**&quot;).authenticated()\n                .anyRequest().authenticated()\n                .and()                \n                // form login\n                .csrf((csrf) -&gt; csrf.disable())\n                .formLogin(login -&gt; login\n                        .loginPage(&quot;/login&quot;)\n                        .failureHandler(failureHandler)\n                        .successHandler(sucessHandler)\n                        .usernameParameter(&quot;email&quot;)\n                        .passwordParameter(&quot;password&quot;))\n                // logout\n                .logout(logout -&gt; logout\n                        .logoutSuccessUrl(&quot;/login?res=logoutSuccess&quot;))\n                .exceptionHandling(handling -&gt; handling\n                        .accessDeniedPage(&quot;/access-denied&quot;))\n                .authenticationManager(authenticationManager());\n                \n        // session\n        /*\n         * .and()\n         * .sessionManagement()\n         * .invalidSessionUrl(&quot;/login?res=sst&quot;);\n         */\n        //http.authenticationProvider(authenticationProvider());\n        http.headers(headers -&gt; headers.frameOptions().sameOrigin());\n        return http.build();\n    } \n\n}\n</code></pre>\n<p>As it seems, due to adding the activeDirectoryLdapAuthenticationProvider and set the AuthenticationManager to use the activeDirectoryLdapAuthenticationProvider as only provider, my application is using this provider.</p>\n<p>Wehn i try to login, my application is throwing the following error:</p>\n<pre><code>Caused by: javax.naming.AuthenticationException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C090439, comment: AcceptSecurityContext error, data 52e, v4563]\n</code></pre>\n<p>as i've searched the whole internet already (it feels like that), i know that 52e means: Username found but password invalid / wrong.</p>\n<p>The problem is, that is not the truth! I've tested my account on several ldap / active directory clients and the account is working 100%!</p>\n<p>Hopefully someone is here that can put me in the right direction...</p>\n<p>Many Thanks And happy coding...</p>\n<p>Sascha</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":4,"creation_date":1697735045,"post_id":77325617,"comment_id":136320284,"body_markdown":"Database or resource files. This certainly has nothing to do with [tag:oop].","body":"Database or resource files. This certainly has nothing to do with <a href=\"https://stackoverflow.com/questions/tagged/oop\">oop</a>."},{"owner":{"account_id":5508017,"reputation":5986,"user_id":4375327,"accept_rate":76,"display_name":"Amessihel"},"score":1,"creation_date":1697735393,"post_id":77325617,"comment_id":136320350,"body_markdown":"Why do you want to make it all &quot;static&quot;?","body":"Why do you want to make it all &quot;static&quot;?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1697742241,"post_id":77325617,"comment_id":136321510,"body_markdown":"_[SQLite](https://www.sqlite.org/index.html)_ databases are very fast.","body":"<i><a href=\"https://www.sqlite.org/index.html\" rel=\"nofollow noreferrer\">SQLite</a></i> databases are very fast."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697748498,"post_id":77325617,"comment_id":136322373,"body_markdown":"Database.  Don’t try to keep it all in memory.","body":"Database.  Don’t try to keep it all in memory."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697779728,"creation_date":1697754130,"answer_id":77327359,"question_id":77325617,"body_markdown":"If by “static” you mean the `static` keyword in Java, as in `static final` constants… don&#39;t do that. \r\n\r\nYou *could* do that. But as the Comments say, an alternative approach is likely wiser. \r\n\r\nOne issue is that `static` data in Java, once loaded is forever loaded. You cannot purge any static members of a class after that class loads. \r\n\r\nAnother issue is that any change to your verb data means recompiling your app. That seems silly just to fix a typo. \r\n\r\nInstead, load your data as needed from an external source. For any one use of your app, your user is unlikely to need every form of every conjugation of every verb. \r\n\r\nI would suggest you start by loading from simple text files. Later, you may  (or may not) decide that a database is better, such as [H2 Database Engine][1]. \r\n\r\n\r\n----------\r\n\r\n\r\nYou may want to learn about the common “Repository” idiom in Java where you separate the code needing the data from the code fetching the data. \r\n\r\n - The code needing data calls upon an interface. \r\n - The code fetching the data is in a class implementing that interface. \r\n\r\nSo you can start with an implementation class for accessing files. Later you can try an alternative implementation class for accessing a database. You can swap between these implementations without altering the code that needs the data. \r\n\r\nAnother benefit: This approach facilitates testing by enabling dummy implementation classes with a bit of hard-coded data. Indeed, you may want to start your work with such a dummy-data implementation, to get your app going to work out details of your user-interface.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/H2_(database)","title":"What is the best way to manage a large amount of static data in Java?","body":"<p>If by “static” you mean the <code>static</code> keyword in Java, as in <code>static final</code> constants… don't do that.</p>\n<p>You <em>could</em> do that. But as the Comments say, an alternative approach is likely wiser.</p>\n<p>One issue is that <code>static</code> data in Java, once loaded is forever loaded. You cannot purge any static members of a class after that class loads.</p>\n<p>Another issue is that any change to your verb data means recompiling your app. That seems silly just to fix a typo.</p>\n<p>Instead, load your data as needed from an external source. For any one use of your app, your user is unlikely to need every form of every conjugation of every verb.</p>\n<p>I would suggest you start by loading from simple text files. Later, you may  (or may not) decide that a database is better, such as <a href=\"https://en.wikipedia.org/wiki/H2_(database)\" rel=\"nofollow noreferrer\">H2 Database Engine</a>.</p>\n<hr />\n<p>You may want to learn about the common “Repository” idiom in Java where you separate the code needing the data from the code fetching the data.</p>\n<ul>\n<li>The code needing data calls upon an interface.</li>\n<li>The code fetching the data is in a class implementing that interface.</li>\n</ul>\n<p>So you can start with an implementation class for accessing files. Later you can try an alternative implementation class for accessing a database. You can swap between these implementations without altering the code that needs the data.</p>\n<p>Another benefit: This approach facilitates testing by enabling dummy implementation classes with a bit of hard-coded data. Indeed, you may want to start your work with such a dummy-data implementation, to get your app going to work out details of your user-interface.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697756926,"creation_date":1697756926,"answer_id":77327481,"question_id":77325617,"body_markdown":"Database is overkill - it&#39;s essentially static data that will eventually stabilise. You don&#39;t need the headache of DB code, where it will reside, how to back it up, etc.\r\n\r\nStore the word information in a resource file in the repo if your project, include it in your jar file and load it at start up.\r\n\r\nThe amount of data is actually small - 100K words tops, and of those only some are verbs, and of those only some are irregular. Design your data to minimise its size.\r\n\r\nChoose whatever format is easiest for you to read and edit. Good options are CSV, JSON and YAML - all choices are good.","title":"What is the best way to manage a large amount of static data in Java?","body":"<p>Database is overkill - it's essentially static data that will eventually stabilise. You don't need the headache of DB code, where it will reside, how to back it up, etc.</p>\n<p>Store the word information in a resource file in the repo if your project, include it in your jar file and load it at start up.</p>\n<p>The amount of data is actually small - 100K words tops, and of those only some are verbs, and of those only some are irregular. Design your data to minimise its size.</p>\n<p>Choose whatever format is easiest for you to read and edit. Good options are CSV, JSON and YAML - all choices are good.</p>\n"},{"tags":[],"owner":{"account_id":22506547,"reputation":965,"user_id":16702058,"display_name":"Hi computer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697785434,"creation_date":1697785108,"answer_id":77328873,"question_id":77325617,"body_markdown":"I often run into these situations, that when I design some code structure, I don\\`t know where to start. Whether to create a whole bunch of interfaces or super classes or not. \r\n\r\nI tried to use oop for this situation, but it will end up with a lot of classes, I think you should leave oop to end.\r\n\r\nFrom experience, I recommend &quot;starting from very small things&quot;.\r\n\r\n1. put them in static fields in a class like you said, and after some time you may find a more suitable way, whether to loading them once from file, DB or some other approaches seems fine.\r\n2. use `enums` like below, this example where I split some verbs into two categories may not suit your case.\r\n\r\n```\r\nenum BeBeedBeenVerbs {\r\n\r\n    IS(&quot;is&quot;, &quot;was&quot;, &quot;been&quot;),\r\n    ARE(&quot;are&quot;, &quot;were&quot;, &quot;been&quot;),\r\n    WAS(&quot;is&quot;, &quot;was&quot;, &quot;been&quot;),\r\n    WERE(&quot;are&quot;, &quot;were&quot;, &quot;been&quot;),\r\n    ;\r\n\r\n    private String be;\r\n    private String beed;\r\n    private String been;\r\n\r\n    BeBeedBeenVerbs(String be, String beed, String been) {\r\n        this.be = be;\r\n        this.beed = beed;\r\n        this.been = been;\r\n    }\r\n}\r\n\r\nenum BeBeedVerbsEnum {\r\n    HAVE(&quot;have&quot;, &quot;had&quot;),\r\n    HAS(&quot;has&quot;, &quot;had&quot;),\r\n    HAD(&quot;have&quot;, &quot;had&quot;),\r\n    ;\r\n\r\n    private String be;\r\n    private String beed;\r\n\r\n    BeBeedVerbsEnum(String be, String beed) {\r\n        this.be = be;\r\n        this.beed = beed;\r\n    }\r\n}\r\n```","title":"What is the best way to manage a large amount of static data in Java?","body":"<p>I often run into these situations, that when I design some code structure, I don`t know where to start. Whether to create a whole bunch of interfaces or super classes or not.</p>\n<p>I tried to use oop for this situation, but it will end up with a lot of classes, I think you should leave oop to end.</p>\n<p>From experience, I recommend &quot;starting from very small things&quot;.</p>\n<ol>\n<li>put them in static fields in a class like you said, and after some time you may find a more suitable way, whether to loading them once from file, DB or some other approaches seems fine.</li>\n<li>use <code>enums</code> like below, this example where I split some verbs into two categories may not suit your case.</li>\n</ol>\n<pre><code>enum BeBeedBeenVerbs {\n\n    IS(&quot;is&quot;, &quot;was&quot;, &quot;been&quot;),\n    ARE(&quot;are&quot;, &quot;were&quot;, &quot;been&quot;),\n    WAS(&quot;is&quot;, &quot;was&quot;, &quot;been&quot;),\n    WERE(&quot;are&quot;, &quot;were&quot;, &quot;been&quot;),\n    ;\n\n    private String be;\n    private String beed;\n    private String been;\n\n    BeBeedBeenVerbs(String be, String beed, String been) {\n        this.be = be;\n        this.beed = beed;\n        this.been = been;\n    }\n}\n\nenum BeBeedVerbsEnum {\n    HAVE(&quot;have&quot;, &quot;had&quot;),\n    HAS(&quot;has&quot;, &quot;had&quot;),\n    HAD(&quot;have&quot;, &quot;had&quot;),\n    ;\n\n    private String be;\n    private String beed;\n\n    BeBeedVerbsEnum(String be, String beed) {\n        this.be = be;\n        this.beed = beed;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29710159,"reputation":19,"user_id":22770035,"display_name":"KillerToaster"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1697789665,"accepted_answer_id":77327359,"answer_count":3,"score":-1,"last_activity_date":1697785434,"creation_date":1697733296,"question_id":77325617,"body_markdown":"I am beginning work on a side project and I am trying to outline the structure of the program I am writing. The basic concept is a GUI application for quizzing on spanish verb conjugations. I want it to function kind of like this website:(https://www.magistrula.com/latin/charts?cap=adv&amp;quiz=decl&amp;mac=essMac)\r\n\r\nIn Spanish, there are many irregular verbs and stem changes that would make it difficult to have a list of infinitives and then generate all the forms automatically. Ultimately, there will be hundreds of verbs many of which have unique forms. I would like each word to have every form saved statically. Should I use a JSON file, a database, or many static classes? I am unsure.\r\n\r\nMy first thought was to create many static classes, but I feel that wold be creating far more work for myself than necessary. Everything in this project should be local and run without a network connection.","title":"What is the best way to manage a large amount of static data in Java?","body":"<p>I am beginning work on a side project and I am trying to outline the structure of the program I am writing. The basic concept is a GUI application for quizzing on spanish verb conjugations. I want it to function kind of like this website:(<a href=\"https://www.magistrula.com/latin/charts?cap=adv&amp;quiz=decl&amp;mac=essMac\" rel=\"nofollow noreferrer\">https://www.magistrula.com/latin/charts?cap=adv&amp;quiz=decl&amp;mac=essMac</a>)</p>\n<p>In Spanish, there are many irregular verbs and stem changes that would make it difficult to have a list of infinitives and then generate all the forms automatically. Ultimately, there will be hundreds of verbs many of which have unique forms. I would like each word to have every form saved statically. Should I use a JSON file, a database, or many static classes? I am unsure.</p>\n<p>My first thought was to create many static classes, but I feel that wold be creating far more work for myself than necessary. Everything in this project should be local and run without a network connection.</p>\n"},{"tags":["java","spring","spring-mvc","configuration","spring-boot"],"comments":[{"owner":{"account_id":6113017,"reputation":2809,"user_id":4768873,"display_name":"Rob Baily"},"score":0,"creation_date":1469385104,"post_id":38553929,"comment_id":64501743,"body_markdown":"That looks like it should be correct as mine is set up this way and I do not need to refer to static.  I am using Freemarker templates of which some have Angular and it works.  Can you share the POM file for your project?","body":"That looks like it should be correct as mine is set up this way and I do not need to refer to static.  I am using Freemarker templates of which some have Angular and it works.  Can you share the POM file for your project?"},{"owner":{"account_id":4191169,"reputation":909,"user_id":3433752,"accept_rate":50,"display_name":"sensitive_piece_of_horseflesh"},"score":0,"creation_date":1469415229,"post_id":38553929,"comment_id":64509082,"body_markdown":"yea sure , edit done to show the pom file, @RobBaily please check !!","body":"yea sure , edit done to show the pom file, @RobBaily please check !!"},{"owner":{"account_id":2033016,"reputation":4216,"user_id":1816151,"accept_rate":85,"display_name":"AchillesVan"},"score":0,"creation_date":1469441497,"post_id":38553929,"comment_id":64520006,"body_markdown":"please show your  InternalResourceViewResolver (xml or java)","body":"please show your  InternalResourceViewResolver (xml or java)"},{"owner":{"account_id":2033016,"reputation":4216,"user_id":1816151,"accept_rate":85,"display_name":"AchillesVan"},"score":0,"creation_date":1469441790,"post_id":38553929,"comment_id":64520177,"body_markdown":"This topic might be interesting for you : http://stackoverflow.com/questions/29953245/configure-viewresolver-with-spring-boot-and-annotations-gives-no-mapping-found-f","body":"This topic might be interesting for you : <a href=\"http://stackoverflow.com/questions/29953245/configure-viewresolver-with-spring-boot-and-annotations-gives-no-mapping-found-f\" title=\"configure viewresolver with spring boot and annotations gives no mapping found f\">stackoverflow.com/questions/29953245/&hellip;</a>"},{"owner":{"account_id":4191169,"reputation":909,"user_id":3433752,"accept_rate":50,"display_name":"sensitive_piece_of_horseflesh"},"score":0,"creation_date":1469511902,"post_id":38553929,"comment_id":64552370,"body_markdown":"@Georgesvanhoutte thanks a lot, it was helpful, but as I answered , just extending the WebMvcAutoConfiguration class helped and I did not have to give any view resolver or create any new controller.","body":"@Georgesvanhoutte thanks a lot, it was helpful, but as I answered , just extending the WebMvcAutoConfiguration class helped and I did not have to give any view resolver or create any new controller."}],"answers":[{"tags":[],"owner":{"account_id":6752840,"reputation":2432,"user_id":5202340,"accept_rate":70,"display_name":"Lazar Lazarov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469431109,"creation_date":1469431109,"answer_id":38561767,"question_id":38553929,"body_markdown":"I see you are using thymeleaf so try to access your resources like this : \r\n\r\n    &lt;script th:src=&quot;@{/js/socket.io/socket.io.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{/js/moment.min.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{/js/demoApp.js}&quot;&gt;&lt;/script&gt;\r\n\r\nAlso and if this does not work can you add your index.html.","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>I see you are using thymeleaf so try to access your resources like this : </p>\n\n<pre><code>&lt;script th:src=\"@{/js/socket.io/socket.io.js}\"&gt;&lt;/script&gt;\n&lt;script th:src=\"@{/js/moment.min.js}\"&gt;&lt;/script&gt;\n&lt;script th:src=\"@{/js/demoApp.js}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Also and if this does not work can you add your index.html.</p>\n"},{"tags":[],"owner":{"account_id":4191169,"reputation":909,"user_id":3433752,"accept_rate":50,"display_name":"sensitive_piece_of_horseflesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1469440793,"creation_date":1469440793,"answer_id":38564741,"question_id":38553929,"body_markdown":"I have found the problem , everything was correct but :\r\n1) I was not extending my Application class from WebMvcAutoConfiguration.\r\n\r\n    @SpringBootApplication\r\n    @EnableWebMvc\r\n    public class HLACUIApplication extends WebMvcAutoConfiguration {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(HLACUIApplication.class, args);\r\n    \t}\r\n    \t\r\n    }\r\nThis is how the application class should be.\r\n\r\n2) I don&#39;t need to use templates folder because I am using angularjs and not thymeleaf. I have put everything in static folder.\r\n","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>I have found the problem , everything was correct but :\n1) I was not extending my Application class from WebMvcAutoConfiguration.</p>\n\n<pre><code>@SpringBootApplication\n@EnableWebMvc\npublic class HLACUIApplication extends WebMvcAutoConfiguration {\n\n    public static void main(String[] args) {\n        SpringApplication.run(HLACUIApplication.class, args);\n    }\n\n}\n</code></pre>\n\n<p>This is how the application class should be.</p>\n\n<p>2) I don't need to use templates folder because I am using angularjs and not thymeleaf. I have put everything in static folder.</p>\n"},{"tags":[],"owner":{"account_id":7410845,"reputation":727,"user_id":5638209,"display_name":"Yanish Pradhananga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557939386,"creation_date":1503325019,"answer_id":45799387,"question_id":38553929,"body_markdown":"I was facing the same issue. I think you are having `html` code like below:\r\n    \r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n        &lt;head&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot; /&gt;\r\n        &lt;title&gt;Insert title here&lt;/title&gt;\r\n    \r\n        &lt;!-- Main Styles --&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bar.css&quot; /&gt;\r\n        &lt;script src=&quot;/js/foo.js&quot;&gt;&lt;/script&gt;\r\n    \r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;div&gt;Welcome to Foo!&lt;/div&gt;\r\n        &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    \r\n    \r\nI solved the problem by adding `type=&quot;text/javascript&quot;` to the `&lt;script&gt;` element. In `Spring Boot` applications it&#39;s required to define `type=&quot;text/javascript&quot;`, otherwise it&#39;s not going to load.\r\n\r\nThe solution for your example would look like this:\r\n    \r\n        &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n        &lt;head&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot; /&gt;\r\n        &lt;title&gt;Insert title here&lt;/title&gt;\r\n    \r\n        &lt;!-- Main Styles --&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/bar.css&quot; /&gt;\r\n        &lt;script type=&quot;text/javascript&quot; src=&quot;/js/foo.js&quot;&gt;&lt;/script&gt;\r\n    \r\n        &lt;/head&gt;\r\n        &lt;body&gt;\r\n            &lt;div&gt;Welcome to Foo!&lt;/div&gt;\r\n        &lt;/body&gt;\r\n        &lt;/html&gt;\r\n\r\n","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>I was facing the same issue. I think you are having <code>html</code> code like below:</p>\n\n<pre><code>&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n    &lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" /&gt;\n    &lt;title&gt;Insert title here&lt;/title&gt;\n\n    &lt;!-- Main Styles --&gt;\n    &lt;link rel=\"stylesheet\" href=\"/css/bar.css\" /&gt;\n    &lt;script src=\"/js/foo.js\"&gt;&lt;/script&gt;\n\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div&gt;Welcome to Foo!&lt;/div&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>I solved the problem by adding <code>type=\"text/javascript\"</code> to the <code>&lt;script&gt;</code> element. In <code>Spring Boot</code> applications it's required to define <code>type=\"text/javascript\"</code>, otherwise it's not going to load.</p>\n\n<p>The solution for your example would look like this:</p>\n\n<pre><code>    &lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n    &lt;head&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\" /&gt;\n    &lt;title&gt;Insert title here&lt;/title&gt;\n\n    &lt;!-- Main Styles --&gt;\n    &lt;link rel=\"stylesheet\" href=\"/css/bar.css\" /&gt;\n    &lt;script type=\"text/javascript\" src=\"/js/foo.js\"&gt;&lt;/script&gt;\n\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;div&gt;Welcome to Foo!&lt;/div&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6728339,"reputation":1,"user_id":5185580,"display_name":"Janusz S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536929203,"creation_date":1536929203,"answer_id":52332347,"question_id":38553929,"body_markdown":"In my case with thymeleaf, helped when I skipped &#39;/&#39; before &#39;js&#39;.\r\n\r\nExample, instead of\r\n\r\n    &lt;script src=&quot;/js/demoApp.js&quot;&gt;&lt;/script&gt;\r\n\r\nI&#39;ve put\r\n \r\n    &lt;script src=&quot;js/demoApp.js&quot;&gt;&lt;/script&gt;","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>In my case with thymeleaf, helped when I skipped '/' before 'js'.</p>\n\n<p>Example, instead of</p>\n\n<pre><code>&lt;script src=\"/js/demoApp.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I've put</p>\n\n<pre><code>&lt;script src=\"js/demoApp.js\"&gt;&lt;/script&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19672887,"reputation":1,"user_id":14401753,"display_name":"sit918"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622097452,"creation_date":1622055228,"answer_id":67711090,"question_id":38553929,"body_markdown":"If you are using `Eclipse IDE` right click on Project Properties/Project Facets\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/55tUc.png","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>If you are using <code>Eclipse IDE</code> right click on Project Properties/Project Facets</p>\n"}],"owner":{"account_id":4191169,"reputation":909,"user_id":3433752,"accept_rate":50,"display_name":"sensitive_piece_of_horseflesh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11339,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1697785240,"creation_date":1469375707,"question_id":38553929,"body_markdown":"I am using spring boot and was trying to host HTML pages that use angular js.\r\nMy folder structure is :[![My Folder Structure][1]][1] \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/ac2Yz.png\r\n\r\nI referred to a lot of other question on SO and even spring.io guide on spring boot and what I understood was that we are supposed to keep our html templates in templates folder and all the .css, images, .js files in static folder. I have done the same, but whenever the page loads , only the html is rendered and browser get 404 for all .css and .js files.\r\n\r\nI have include .css and .js in my HTML in the following manner :\r\n\r\n    &lt;script src=&quot;/js/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;/js/moment.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;/js/demoApp.js&quot;&gt;&lt;/script&gt;\r\n\r\nI tried all the combinations like :\r\nsrc=&quot;../static/js/socket.io/socket.io.js&quot; or src=&quot;js/socket.io/socket.io.js&quot;\r\nbut always I am getting 404 for these files, in the browser.\r\n\r\nI checked the spring boot logs and this is what it says :\r\n\r\n    2016-07-24 21:08:05 WARN  PageNotFound:1139 - No mapping found for HTTP request with URI [/js/demoApp.js] in DispatcherServlet with name &#39;dispatcherServlet&#39;\r\n    2016-07-24 21:08:05 DEBUG DispatcherServlet:997 - Successfully completed request\r\n\r\nI am unable to understand how to solve the issue, please help !!!\r\n\r\nNote : I have not written view resolver code because according to my understanding spring boot automatically picks up static content from static folder. Please correct me if I am wrong.\r\n\r\nEdit : Adding my pom file :\r\n\r\n        &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.5.RELEASE&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;exclusions&gt;\r\n    \t\t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;/exclusion&gt;\r\n    \t\t\t&lt;/exclusions&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!--Alexa Dependencies --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.directory.studio&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;org.apache.commons.io&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.amazon.alexa&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;alexa-skills-kit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aws-java-sdk-dynamodb&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.9.40&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;verbose&gt;true&lt;/verbose&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n    \t\t\t\t\t&lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\n","title":"spring-boot 404 error in serving .js, .css files to html templates","body":"<p>I am using spring boot and was trying to host HTML pages that use angular js.\nMy folder structure is :<a href=\"https://i.stack.imgur.com/ac2Yz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ac2Yz.png\" alt=\"My Folder Structure\"></a> </p>\n\n<p>I referred to a lot of other question on SO and even spring.io guide on spring boot and what I understood was that we are supposed to keep our html templates in templates folder and all the .css, images, .js files in static folder. I have done the same, but whenever the page loads , only the html is rendered and browser get 404 for all .css and .js files.</p>\n\n<p>I have include .css and .js in my HTML in the following manner :</p>\n\n<pre><code>&lt;script src=\"/js/socket.io/socket.io.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/js/moment.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"/js/demoApp.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>I tried all the combinations like :\nsrc=\"../static/js/socket.io/socket.io.js\" or src=\"js/socket.io/socket.io.js\"\nbut always I am getting 404 for these files, in the browser.</p>\n\n<p>I checked the spring boot logs and this is what it says :</p>\n\n<pre><code>2016-07-24 21:08:05 WARN  PageNotFound:1139 - No mapping found for HTTP request with URI [/js/demoApp.js] in DispatcherServlet with name 'dispatcherServlet'\n2016-07-24 21:08:05 DEBUG DispatcherServlet:997 - Successfully completed request\n</code></pre>\n\n<p>I am unable to understand how to solve the issue, please help !!!</p>\n\n<p>Note : I have not written view resolver code because according to my understanding spring boot automatically picks up static content from static folder. Please correct me if I am wrong.</p>\n\n<p>Edit : Adding my pom file :</p>\n\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.5.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--Alexa Dependencies --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.directory.studio&lt;/groupId&gt;\n            &lt;artifactId&gt;org.apache.commons.io&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazon.alexa&lt;/groupId&gt;\n            &lt;artifactId&gt;alexa-skills-kit&lt;/artifactId&gt;\n            &lt;version&gt;1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-dynamodb&lt;/artifactId&gt;\n            &lt;version&gt;1.9.40&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;verbose&gt;true&lt;/verbose&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","metrics","micrometer"],"comments":[{"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1698089655,"post_id":77328856,"comment_id":136358666,"body_markdown":"The version you are using is very old and not supported anymore. You can instrument your redis client using a Timer.","body":"The version you are using is very old and not supported anymore. You can instrument your redis client using a Timer."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1698114403,"post_id":77328856,"comment_id":136361250,"body_markdown":"Hi @JonatanIvanov thank you for your comment. Could you help to provide more infomation? &quot;The version you are using is very old...&quot; you mean redisson or spring boot? &quot;You can instrument your redis client...&quot; can you provide me a snip of code?","body":"Hi @JonatanIvanov thank you for your comment. Could you help to provide more infomation? &quot;The version you are using is very old...&quot; you mean redisson or spring boot? &quot;You can instrument your redis client...&quot; can you provide me a snip of code?"},{"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1698198761,"post_id":77328856,"comment_id":136373781,"body_markdown":"I meant Boot: https://spring.io/projects/spring-boot#support also, I forgot that instrumentation is available starting from Redison 3.21.0: https://github.com/redisson/redisson/issues/4976 you will need Spring Boot 3 for that.","body":"I meant Boot: <a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\">spring.io/projects/spring-boot#support</a> also, I forgot that instrumentation is available starting from Redison 3.21.0: <a href=\"https://github.com/redisson/redisson/issues/4976\" rel=\"nofollow noreferrer\">github.com/redisson/redisson/issues/4976</a> you will need Spring Boot 3 for that."},{"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"score":0,"creation_date":1698204103,"post_id":77328856,"comment_id":136374159,"body_markdown":"I still cannot get your point about instrumentation. How Observation API give me the distribution of the redis cluster? I want to get some thing like: 1k request to instance 1, 900 to instance 2 and 0 to instance 3 since instance 3 was not running\n\nPlease help to provide some code snip. Thank you","body":"I still cannot get your point about instrumentation. How Observation API give me the distribution of the redis cluster? I want to get some thing like: 1k request to instance 1, 900 to instance 2 and 0 to instance 3 since instance 3 was not running  Please help to provide some code snip. Thank you"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697784908,"creation_date":1697784908,"question_id":77328856,"body_markdown":"We have a redis cluster containing multiple redis instances. We also have a spring boot app that read from/write to this cluster. Now we want to use micrometer/prometheus/grafana to capture operation distribution metrics of the cluster (for example, this cluster have 3 instances and the counter metrics should show me 1k request to instance 1, 900 to instance 2 and 0 to instance 3 since instance 3 was not running).\r\n\r\nI would like to get your idea how to archive this requirement. Please help!\r\n\r\n    Spring boot version: 2.3.9-RELEASE\r\n    Redisson version: 3.15.0","title":"How to capture distribution metrics of the redis cluster?","body":"<p>We have a redis cluster containing multiple redis instances. We also have a spring boot app that read from/write to this cluster. Now we want to use micrometer/prometheus/grafana to capture operation distribution metrics of the cluster (for example, this cluster have 3 instances and the counter metrics should show me 1k request to instance 1, 900 to instance 2 and 0 to instance 3 since instance 3 was not running).</p>\n<p>I would like to get your idea how to archive this requirement. Please help!</p>\n<pre><code>Spring boot version: 2.3.9-RELEASE\nRedisson version: 3.15.0\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634212855,"creation_date":1634212855,"answer_id":69570324,"question_id":69570229,"body_markdown":"You can simply use the `org.springframework.core.io.buffer.DataBuffer#asByteBuffer()`:\r\n\r\n    Flux&lt;java.nio.ByteBuffer&gt; buffers = filePart.content()\r\n        .map(DataBuffer::asByteBuffer);\r\n\r\n  ","title":"Convert Flux&lt;DataBuffer&gt; into Flux&lt;ByteBuffer&gt;","body":"<p>You can simply use the <code>org.springframework.core.io.buffer.DataBuffer#asByteBuffer()</code>:</p>\n<pre><code>Flux&lt;java.nio.ByteBuffer&gt; buffers = filePart.content()\n    .map(DataBuffer::asByteBuffer);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697784530,"creation_date":1685692766,"answer_id":76388223,"question_id":69570229,"body_markdown":"The [`asByteBuffer()`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/buffer/DataBuffer.html#asByteBuffer()) method mentioned in the [answer of tmarwen](https://stackoverflow.com/a/69570324/1915448) is deprecated **since Spring Boot 3.x** (and Spring framework 6.x). The following deprecation warning is added:\r\n\r\n&gt; **Deprecated.**&lt;br /&gt;\r\n&gt; *as of 6.0, in favor of `toByteBuffer(ByteBuffer)`, `readableByteBuffers()`, or `writableByteBuffers()`.*\r\n\r\nIf you&#39;re using the `DataBuffer` to upload a file, `readableByteBuffers()` can be used. This method returns an `Iterator&lt;ByteBuffer&gt;` so you can use it with `Flux.fromIterable()`:\r\n\r\n```java\r\nFlux&lt;ByteBuffer&gt; byteBuffers = filePart\r\n    .content()\r\n    // The `flatMapSequential` is important for larger buffers to preserve order\r\n    . flatMapSequential(dataBuffer -&gt; Flux.fromIterable(dataBuffer::readableByteBuffers));\r\n```\r\n\r\n**IMPORTANT**: The `readableByteBuffers()` method was added in Spring Boot 3.0.3 (Spring framework 6.0.5) while the deprecation warning is present since Spring Boot 3.0.0 (Spring framework 6.0.0). This means you have to upgrade your project to at least Spring Boot 3.0.3 to make this work.","title":"Convert Flux&lt;DataBuffer&gt; into Flux&lt;ByteBuffer&gt;","body":"<p>The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/buffer/DataBuffer.html#asByteBuffer()\" rel=\"nofollow noreferrer\"><code>asByteBuffer()</code></a> method mentioned in the <a href=\"https://stackoverflow.com/a/69570324/1915448\">answer of tmarwen</a> is deprecated <strong>since Spring Boot 3.x</strong> (and Spring framework 6.x). The following deprecation warning is added:</p>\n<blockquote>\n<p><strong>Deprecated.</strong><br />\n<em>as of 6.0, in favor of <code>toByteBuffer(ByteBuffer)</code>, <code>readableByteBuffers()</code>, or <code>writableByteBuffers()</code>.</em></p>\n</blockquote>\n<p>If you're using the <code>DataBuffer</code> to upload a file, <code>readableByteBuffers()</code> can be used. This method returns an <code>Iterator&lt;ByteBuffer&gt;</code> so you can use it with <code>Flux.fromIterable()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Flux&lt;ByteBuffer&gt; byteBuffers = filePart\n    .content()\n    // The `flatMapSequential` is important for larger buffers to preserve order\n    . flatMapSequential(dataBuffer -&gt; Flux.fromIterable(dataBuffer::readableByteBuffers));\n</code></pre>\n<p><strong>IMPORTANT</strong>: The <code>readableByteBuffers()</code> method was added in Spring Boot 3.0.3 (Spring framework 6.0.5) while the deprecation warning is present since Spring Boot 3.0.0 (Spring framework 6.0.0). This means you have to upgrade your project to at least Spring Boot 3.0.3 to make this work.</p>\n"}],"owner":{"account_id":4567927,"reputation":5819,"user_id":3708462,"accept_rate":57,"display_name":"Emdadul Sawon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2907,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69570324,"answer_count":2,"score":0,"last_activity_date":1697784530,"creation_date":1634212436,"question_id":69570229,"body_markdown":"I am working on spring webflux file upload. From the controller I want to upload the file on amazon S3 bucket. So in the controller I received following object \r\n\r\n    org.springframework.http.codec.multipart.FilePart\r\nAnd from the `FilePart.content()` I can get\r\n\r\n    reactor.core.publisher.Flux&lt;org.springframework.core.io.buffer.DataBuffer&gt;\r\nMy question is how can I convert this `Flux&lt;DataBuffer&gt;` into `Flux&lt;ByteBuffer&gt;`. I mean into the following object\r\n\r\n    Flux&lt;java.nio.ByteBuffer&gt;\r\n\r\n","title":"Convert Flux&lt;DataBuffer&gt; into Flux&lt;ByteBuffer&gt;","body":"<p>I am working on spring webflux file upload. From the controller I want to upload the file on amazon S3 bucket. So in the controller I received following object</p>\n<pre><code>org.springframework.http.codec.multipart.FilePart\n</code></pre>\n<p>And from the <code>FilePart.content()</code> I can get</p>\n<pre><code>reactor.core.publisher.Flux&lt;org.springframework.core.io.buffer.DataBuffer&gt;\n</code></pre>\n<p>My question is how can I convert this <code>Flux&lt;DataBuffer&gt;</code> into <code>Flux&lt;ByteBuffer&gt;</code>. I mean into the following object</p>\n<pre><code>Flux&lt;java.nio.ByteBuffer&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1697786074,"post_id":77328777,"comment_id":136325832,"body_markdown":"You have way to much (and conflicting) dependencies, you are trying to outsmart Spring Boot dependency management, tip don&#39;t do that. Remove the `javax.mail` and `javax.activation` dependencies, those are incompatible, remove the `hibernate-core` and `jakarta.persistence` dependency that is already included in `spring-boot-starter-data-jpa`. Remove the version for the various `spring-boot-starter-` dependencies that have it, remove `jackson-datatype-jsr310` and `jakarta.servlet` as well. There are probably more as you have the `javax.persistence` import instead of `jakarta.persistence`.","body":"You have way to much (and conflicting) dependencies, you are trying to outsmart Spring Boot dependency management, tip don&#39;t do that. Remove the <code>javax.mail</code> and <code>javax.activation</code> dependencies, those are incompatible, remove the <code>hibernate-core</code> and <code>jakarta.persistence</code> dependency that is already included in <code>spring-boot-starter-data-jpa</code>. Remove the version for the various <code>spring-boot-starter-</code> dependencies that have it, remove <code>jackson-datatype-jsr310</code> and <code>jakarta.servlet</code> as well. There are probably more as you have the <code>javax.persistence</code> import instead of <code>jakarta.persistence</code>."},{"owner":{"account_id":17520974,"reputation":1,"user_id":12707034,"display_name":"Sistem Suciu"},"score":0,"creation_date":1697787304,"post_id":77328777,"comment_id":136326057,"body_markdown":"Made all those changes, still inserts the row in the db, but now I get a different error: `&quot;Unable to resolve name [org.hibernate.dialect.PostgreSQL9Dialect] as strategy [org.hibernate.dialect.Dialect]. Caused by .ClassLoadingException: Unable to load class [org.hibernate.dialect.PostgreSQL9Dialect]. Failed to initialize JPA EntityManagerFactory: Unable to create requested service JdbcEnvironment due to: Unable to resolve name PostgreSQL9Dialect as strategy org.hibernate.dialect.Dialect`","body":"Made all those changes, still inserts the row in the db, but now I get a different error: <code>&quot;Unable to resolve name [org.hibernate.dialect.PostgreSQL9Dialect] as strategy [org.hibernate.dialect.Dialect]. Caused by .ClassLoadingException: Unable to load class [org.hibernate.dialect.PostgreSQL9Dialect]. Failed to initialize JPA EntityManagerFactory: Unable to create requested service JdbcEnvironment due to: Unable to resolve name PostgreSQL9Dialect as strategy org.hibernate.dialect.Dialect</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1697787831,"post_id":77328777,"comment_id":136326139,"body_markdown":"Because that class doesn&#39;t exist anymore. Are &quot;following&quot; some tutorial and decided to use newer dependencies? Use `org.hibernate.dialect.PostgreSQLDialect` instead.","body":"Because that class doesn&#39;t exist anymore. Are &quot;following&quot; some tutorial and decided to use newer dependencies? Use <code>org.hibernate.dialect.PostgreSQLDialect</code> instead."}],"owner":{"account_id":17520974,"reputation":1,"user_id":12707034,"display_name":"Sistem Suciu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697784161,"creation_date":1697783986,"question_id":77328777,"body_markdown":"I&#39;m using Springboot version 3.1.0 with Hibernate version 6.1.0 and jakarta persistence api 3.1.0.\r\n\r\nI&#39;m using PostgresSQL.\r\n\r\nWhen I run the code it creates the mitarbeiter and inserts the rows that I give him, but I have the following error: &quot;Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider&quot;, caused by &quot;java.lang.IncompatibleClassChangeError: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider&quot;\r\n\r\n**application-local.yaml** looks like this:\r\n\r\n\r\n```\r\ncom:\r\n  example:\r\n    cors:\r\n      allowed-origins:\r\n        - &quot;http://localhost:8080&quot;\r\n        - &quot;http://localhost:4200&quot;\r\n\r\nspring:\r\n  datasource:\r\n    url: jdbc:postgresql://localhost:5432/postgres?useSSL=false\r\n    username: postgres\r\n    password:\r\n  liquibase:\r\n    change-log: classpath:db/changelog/db.changelog-master.yaml\r\n    enabled: true\r\n  jpa:\r\n    database-platform: org.hibernate.dialect.PostgreSQL9Dialect\r\n\r\n```\r\n\r\n**pom.xml**:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\t\t xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;accessing-data-jpa-complete&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.classgraph&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;classgraph&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.8.70&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- ElasticSearch-Anbindung per Hibernate Search --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.search&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-search-mapper-orm&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.search&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-search-backend-elasticsearch&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- OpenAPI / Swagger --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-data-rest&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- JWT Authentication --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Liquibase --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.19.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Datenbank-Treiber --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Lombok --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.16&lt;/version&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Passwortqualit&#228;tspr&#252;fungen --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.passay&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;passay&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Export nach Word --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;docx4j-JAXB-ReferenceImpl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;11.2.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;docx4j-ImportXHTML&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.2.1&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.docx4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;docx4j-samples-resources&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- OWASP Java HTML Sanitizer --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.googlecode.owasp-java-html-sanitizer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;owasp-java-html-sanitizer&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;20200713.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Tests --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Microsoft Graph API --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;microsoft-graph&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.10.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;microsoft-graph-auth&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- JavaX Mail / Activation--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.mail&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mail&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**Mitarbeiter.java**:\r\n\r\n```\r\npackage com.example.accessingdatajpa;\r\n\r\nimport lombok.Getter;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.Setter;\r\nimport org.hibernate.search.mapper.pojo.mapping.definition.annotation.*;\r\nimport org.springframework.context.annotation.Bean;\r\n\r\nimport javax.persistence.*;\r\n\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = &quot;mitarbeiter&quot;)\r\npublic class Mitarbeiter {\r\n\r\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;mitarbeiterSeqGen&quot;)\r\n  @SequenceGenerator(sequenceName = &quot;mitarbeiter_seq&quot;, name = &quot;mitarbeiterSeqGen&quot;,\r\n      allocationSize = 1)\r\n  @Column(name = &quot;mitarbeiter_id&quot;)\r\n  @Id\r\n  private Long id;\r\n\r\n  @Column(name = &quot;email&quot;, unique = true)\r\n  @KeywordField\r\n  private String email;\r\n\r\n  @Column(name = &quot;vorname&quot;)\r\n  @FullTextField(analyzer = &quot;german&quot;)\r\n  private String vorname;\r\n\r\n  @Column(name = &quot;nachname&quot;)\r\n  @FullTextField(analyzer = &quot;german&quot;)\r\n  private String nachname;\r\n\r\n  public Mitarbeiter(Long id, String vorname, String nachname) {\r\n    this.id = id;\r\n    this.vorname = vorname;\r\n    this.nachname = nachname;\r\n\r\n  }\r\n}\r\n\r\n```\r\nAccessingDataJpaApplication.java:\r\n\r\n```\r\npackage com.example.accessingdatajpa;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class AccessingDataJpaApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AccessingDataJpaApplication.class);\r\n\t}}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n**Detailed error**:\r\n\r\n```\r\n2023-10-20T09:30:09.235+03:00  INFO 18304 --- [           main] c.e.a.AccessingDataJpaApplication        : Starting AccessingDataJpaApplication using Java 17.0.8.1 with PID 18304 (C:\\Profilmanager\\gs-accessing-data-jpa\\complete\\target\\classes started by VladSuciu in C:\\Profilmanager\\gs-accessing-data-jpa\\complete)\r\n2023-10-20T09:30:09.241+03:00  INFO 18304 --- [           main] c.e.a.AccessingDataJpaApplication        : The following 1 profile is active: &quot;local&quot;\r\n2023-10-20T09:30:10.642+03:00  INFO 18304 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-10-20T09:30:10.704+03:00  INFO 18304 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 1 JPA repository interfaces.\r\n2023-10-20T09:30:11.906+03:00  INFO 18304 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-10-20T09:30:11.919+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-10-20T09:30:11.919+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\r\n2023-10-20T09:30:12.083+03:00  INFO 18304 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-10-20T09:30:12.086+03:00  INFO 18304 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2778 ms\r\n2023-10-20T09:30:12.481+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-10-20T09:30:12.822+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@55222ee9\r\n2023-10-20T09:30:12.823+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-10-20T09:30:12.989+03:00  INFO 18304 --- [           main] liquibase.database                       : Set default schema name to public\r\n2023-10-20T09:30:13.407+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.415+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.421+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.426+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.434+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.437+03:00  INFO 18304 --- [           main] liquibase.lockservice                    : Successfully acquired change log lock\r\n2023-10-20T09:30:13.464+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Creating database history table with name: public.databasechangelog\r\n2023-10-20T09:30:13.474+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.479+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Reading from public.databasechangelog\r\n2023-10-20T09:30:13.482+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.486+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::1::\r\n2023-10-20T09:30:13.531+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Sequence mitarbeiter_seq created\r\n2023-10-20T09:30:13.534+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::1:: ran successfully in 9ms\r\n2023-10-20T09:30:13.538+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.540+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::2::\r\n2023-10-20T09:30:13.554+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Table mitarbeiter created\r\n2023-10-20T09:30:13.557+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::2:: ran successfully in 15ms\r\n2023-10-20T09:30:13.559+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::3::\r\n2023-10-20T09:30:13.573+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Unique constraint added to mitarbeiter(email)\r\n2023-10-20T09:30:13.577+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::3::ran successfully in 15ms\r\n2023-10-20T09:30:13.579+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\nRunning Changeset: classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::1::\r\n2023-10-20T09:30:13.588+03:00  INFO 18304 --- [           main] liquibase.changelog                      : New row inserted into mitarbeiter\r\n2023-10-20T09:30:13.591+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::1:: ran successfully in 9ms\r\n2023-10-20T09:30:13.594+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\nRunning Changeset: classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::2:\r\n2023-10-20T09:30:13.603+03:00  INFO 18304 --- [           main] liquibase.changelog                      : New row inserted into mitarbeiter\r\n2023-10-20T09:30:13.607+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::2::ran successfully in 8ms\r\n2023-10-20T09:30:13.610+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.613+03:00  INFO 18304 --- [           main] liquibase                                : Update command completed successfully.\r\n2023-10-20T09:30:13.619+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\r\n2023-10-20T09:30:13.623+03:00  INFO 18304 --- [           main] liquibase.lockservice                    : Successfully released change log lock\r\n2023-10-20T09:30:13.755+03:00  WARN 18304 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\r\n2023-10-20T09:30:13.756+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-10-20T09:30:13.764+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-10-20T09:30:13.772+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-10-20T09:30:13.790+03:00  INFO 18304 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-10-20T09:30:13.831+03:00 ERROR 18304 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-6.0.9.jar:6.0.9]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.9.jar:6.0.9]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.9.jar:6.0.9]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1305) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1294) ~[spring-boot-3.1.0.jar:3.1.0]\r\n\tat com.example.accessingdatajpa.AccessingDataJpaApplication.main(AccessingDataJpaApplication.java:10) ~[classes/:na]\r\nCaused by: java.lang.IncompatibleClassChangeError: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.9.jar:6.0.9]\r\n\t... 16 common frames omitted\r\n\r\n\r\nProcess finished with exit code 1\r\n```\r\n","title":"Error creating bean entityManagerFactory: SpringHibernateJpaPersistenceProvider does not implement jakarta.persistence.spi.PersistenceProvider","body":"<p>I'm using Springboot version 3.1.0 with Hibernate version 6.1.0 and jakarta persistence api 3.1.0.</p>\n<p>I'm using PostgresSQL.</p>\n<p>When I run the code it creates the mitarbeiter and inserts the rows that I give him, but I have the following error: &quot;Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider&quot;, caused by &quot;java.lang.IncompatibleClassChangeError: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider&quot;</p>\n<p><strong>application-local.yaml</strong> looks like this:</p>\n<pre><code>com:\n  example:\n    cors:\n      allowed-origins:\n        - &quot;http://localhost:8080&quot;\n        - &quot;http://localhost:4200&quot;\n\nspring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/postgres?useSSL=false\n    username: postgres\n    password:\n  liquibase:\n    change-log: classpath:db/changelog/db.changelog-master.yaml\n    enabled: true\n  jpa:\n    database-platform: org.hibernate.dialect.PostgreSQL9Dialect\n\n</code></pre>\n<p><strong>pom.xml</strong>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;accessing-data-jpa-complete&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.classgraph&lt;/groupId&gt;\n            &lt;artifactId&gt;classgraph&lt;/artifactId&gt;\n            &lt;version&gt;4.8.70&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ElasticSearch-Anbindung per Hibernate Search --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.search&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-search-mapper-orm&lt;/artifactId&gt;\n            &lt;version&gt;6.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.search&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-search-backend-elasticsearch&lt;/artifactId&gt;\n            &lt;version&gt;6.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;6.1.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OpenAPI / Swagger --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.4.8&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-data-rest&lt;/artifactId&gt;\n            &lt;version&gt;1.4.8&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JWT Authentication --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Liquibase --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;4.19.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Datenbank-Treiber --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.16&lt;/version&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Passwortqualitätsprüfungen --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.passay&lt;/groupId&gt;\n            &lt;artifactId&gt;passay&lt;/artifactId&gt;\n            &lt;version&gt;1.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Export nach Word --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n            &lt;artifactId&gt;docx4j-JAXB-ReferenceImpl&lt;/artifactId&gt;\n            &lt;version&gt;11.2.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n            &lt;artifactId&gt;docx4j-ImportXHTML&lt;/artifactId&gt;\n            &lt;version&gt;8.2.1&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.docx4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;docx4j-samples-resources&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OWASP Java HTML Sanitizer --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.googlecode.owasp-java-html-sanitizer&lt;/groupId&gt;\n            &lt;artifactId&gt;owasp-java-html-sanitizer&lt;/artifactId&gt;\n            &lt;version&gt;20200713.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Tests --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Microsoft Graph API --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\n            &lt;artifactId&gt;microsoft-graph&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\n            &lt;artifactId&gt;microsoft-graph-auth&lt;/artifactId&gt;\n            &lt;version&gt;0.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JavaX Mail / Activation--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;mail&lt;/artifactId&gt;\n            &lt;version&gt;1.4.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>Mitarbeiter.java</strong>:</p>\n<pre><code>package com.example.accessingdatajpa;\n\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport org.hibernate.search.mapper.pojo.mapping.definition.annotation.*;\nimport org.springframework.context.annotation.Bean;\n\nimport javax.persistence.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;mitarbeiter&quot;)\npublic class Mitarbeiter {\n\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;mitarbeiterSeqGen&quot;)\n  @SequenceGenerator(sequenceName = &quot;mitarbeiter_seq&quot;, name = &quot;mitarbeiterSeqGen&quot;,\n      allocationSize = 1)\n  @Column(name = &quot;mitarbeiter_id&quot;)\n  @Id\n  private Long id;\n\n  @Column(name = &quot;email&quot;, unique = true)\n  @KeywordField\n  private String email;\n\n  @Column(name = &quot;vorname&quot;)\n  @FullTextField(analyzer = &quot;german&quot;)\n  private String vorname;\n\n  @Column(name = &quot;nachname&quot;)\n  @FullTextField(analyzer = &quot;german&quot;)\n  private String nachname;\n\n  public Mitarbeiter(Long id, String vorname, String nachname) {\n    this.id = id;\n    this.vorname = vorname;\n    this.nachname = nachname;\n\n  }\n}\n\n</code></pre>\n<p>AccessingDataJpaApplication.java:</p>\n<pre><code>package com.example.accessingdatajpa;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class AccessingDataJpaApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AccessingDataJpaApplication.class);\n    }}\n\n</code></pre>\n<p><strong>Detailed error</strong>:</p>\n<pre><code>2023-10-20T09:30:09.235+03:00  INFO 18304 --- [           main] c.e.a.AccessingDataJpaApplication        : Starting AccessingDataJpaApplication using Java 17.0.8.1 with PID 18304 (C:\\Profilmanager\\gs-accessing-data-jpa\\complete\\target\\classes started by VladSuciu in C:\\Profilmanager\\gs-accessing-data-jpa\\complete)\n2023-10-20T09:30:09.241+03:00  INFO 18304 --- [           main] c.e.a.AccessingDataJpaApplication        : The following 1 profile is active: &quot;local&quot;\n2023-10-20T09:30:10.642+03:00  INFO 18304 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-10-20T09:30:10.704+03:00  INFO 18304 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 49 ms. Found 1 JPA repository interfaces.\n2023-10-20T09:30:11.906+03:00  INFO 18304 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-10-20T09:30:11.919+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-10-20T09:30:11.919+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\n2023-10-20T09:30:12.083+03:00  INFO 18304 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-10-20T09:30:12.086+03:00  INFO 18304 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2778 ms\n2023-10-20T09:30:12.481+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-10-20T09:30:12.822+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@55222ee9\n2023-10-20T09:30:12.823+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-10-20T09:30:12.989+03:00  INFO 18304 --- [           main] liquibase.database                       : Set default schema name to public\n2023-10-20T09:30:13.407+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.415+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.421+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.426+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.434+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.437+03:00  INFO 18304 --- [           main] liquibase.lockservice                    : Successfully acquired change log lock\n2023-10-20T09:30:13.464+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Creating database history table with name: public.databasechangelog\n2023-10-20T09:30:13.474+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.479+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Reading from public.databasechangelog\n2023-10-20T09:30:13.482+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.486+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::1::\n2023-10-20T09:30:13.531+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Sequence mitarbeiter_seq created\n2023-10-20T09:30:13.534+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::1:: ran successfully in 9ms\n2023-10-20T09:30:13.538+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.540+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::2::\n2023-10-20T09:30:13.554+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Table mitarbeiter created\n2023-10-20T09:30:13.557+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::2:: ran successfully in 15ms\n2023-10-20T09:30:13.559+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\nRunning Changeset: classpath*:db/changelog/changes/00001-initial-database.yaml::3::\n2023-10-20T09:30:13.573+03:00  INFO 18304 --- [           main] liquibase.changelog                      : Unique constraint added to mitarbeiter(email)\n2023-10-20T09:30:13.577+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00001-initial-database.yaml::3::ran successfully in 15ms\n2023-10-20T09:30:13.579+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\nRunning Changeset: classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::1::\n2023-10-20T09:30:13.588+03:00  INFO 18304 --- [           main] liquibase.changelog                      : New row inserted into mitarbeiter\n2023-10-20T09:30:13.591+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::1:: ran successfully in 9ms\n2023-10-20T09:30:13.594+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\nRunning Changeset: classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::2:\n2023-10-20T09:30:13.603+03:00  INFO 18304 --- [           main] liquibase.changelog                      : New row inserted into mitarbeiter\n2023-10-20T09:30:13.607+03:00  INFO 18304 --- [           main] liquibase.changelog                      : ChangeSet classpath*:db/changelog/changes/00006-initial-data-mitarbeiter.yaml::2::ran successfully in 8ms\n2023-10-20T09:30:13.610+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.613+03:00  INFO 18304 --- [           main] liquibase                                : Update command completed successfully.\n2023-10-20T09:30:13.619+03:00  INFO 18304 --- [           main] liquibase.executor                       : Changelog query completed.\n2023-10-20T09:30:13.623+03:00  INFO 18304 --- [           main] liquibase.lockservice                    : Successfully released change log lock\n2023-10-20T09:30:13.755+03:00  WARN 18304 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\n2023-10-20T09:30:13.756+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-10-20T09:30:13.764+03:00  INFO 18304 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-10-20T09:30:13.772+03:00  INFO 18304 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-10-20T09:30:13.790+03:00  INFO 18304 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-10-20T09:30:13.831+03:00 ERROR 18304 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156) ~[spring-context-6.0.9.jar:6.0.9]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.9.jar:6.0.9]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.9.jar:6.0.9]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1305) ~[spring-boot-3.1.0.jar:3.1.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1294) ~[spring-boot-3.1.0.jar:3.1.0]\n    at com.example.accessingdatajpa.AccessingDataJpaApplication.main(AccessingDataJpaApplication.java:10) ~[classes/:na]\nCaused by: java.lang.IncompatibleClassChangeError: Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.9.jar:6.0.9]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.9.jar:6.0.9]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.9.jar:6.0.9]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816) ~[spring-beans-6.0.9.jar:6.0.9]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.9.jar:6.0.9]\n    ... 16 common frames omitted\n\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","apache-poi","xdocreport"],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697783850,"creation_date":1697690147,"answer_id":77320986,"question_id":77311809,"body_markdown":"From your code I guess you are using very old versions of XDocReport and Apache POI. So I suggest update to more current versions.\r\n\r\nCurrent XDocReport  version 2.0.4 provides the `ImageManager` `Base64EmbedImgManager` already. So no special `Base64ImageExtractor` needed.\r\n\r\nFollowing works for me.\r\n\r\n    import java.io.*;\r\n    \r\n    //needed jars: xdocreport-2.0.4.jar, \r\n    import fr.opensagres.poi.xwpf.converter.xhtml.XHTMLConverter;\r\n    import fr.opensagres.poi.xwpf.converter.xhtml.XHTMLOptions;\r\n    import fr.opensagres.poi.xwpf.converter.xhtml.Base64EmbedImgManager ;\r\n    \r\n    //needed jars: all apache poi dependencies of poi-ooxml version 5.2.3\r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    \r\n    public class DOCXToXHTMLXDocReport {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      String docPath = &quot;./WordDocument.docx&quot;;\r\n      String htmlPath = &quot;./WordDocument.html&quot;;\r\n    \r\n      XWPFDocument document = new XWPFDocument(new FileInputStream(docPath));\r\n    \r\n      XHTMLOptions options = XHTMLOptions.create().setImageManager(new Base64EmbedImgManager());\r\n      \r\n      FileOutputStream out = new FileOutputStream(htmlPath);\r\n      XHTMLConverter.getInstance().convert(document, out, options);\r\n    \r\n      out.close();      \r\n      document.close();    \r\n    \r\n      java.awt.Desktop.getDesktop().browse(new File(htmlPath).toPath().toRealPath(java.nio.file.LinkOption.NOFOLLOW_LINKS).toUri());  \r\n     \r\n     }\r\n    }\r\n\r\n\r\nAfter upgrading your versions, you should test again. And and if you have problems with Unicode in `WordDocument.docx`, the you should provide an example `WordDocument.docx` which produces those problems. That will make your problem reproducible for others.\r\n_________________________________________________\r\n\r\nFound the Unicode problem. [fr.opensagres.poi.xwpf.converter.xhtml.SimpleContentHandler](https://github.com/opensagres/xdocreport/blob/master/thirdparties-extension/fr.opensagres.poi.xwpf.converter.xhtml/src/main/java/fr/opensagres/poi/xwpf/converter/xhtml/SimpleContentHandler.java) uses [String.getBytes](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#getBytes--) without explicit `Charset`. That &quot;Encodes this String into a sequence of bytes using the **platform&#39;s default charset**, storing the result into a new byte array.&quot;.\r\n\r\nSo it depends on platform&#39;s default charset whether Unicode will be handled correctly. If the platform is Windows and no other charset is set via environment variables, the platform&#39;s default charset is windows-1252. That, of course cannot handle Unicode.\r\n\r\nYou can check via:\r\n\r\n    System.out.println(&quot;Default Charset=&quot; + java.nio.charset.Charset.defaultCharset());\t \r\n\r\nFor how to set UTF-8 the platform&#39;s default charset for Windows, please see https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding?answertab=scoredesc#tab-top.\r\n\r\nFor me, starting the class `DOCXToXHTMLXDocReport` via\r\n\r\n    java -Dfile.encoding=UTF-8 ... DOCXToXHTMLXDocReport\r\n\r\nproduces the correct Unicode results in HTML in Windows platform too.\r\n\r\n\r\n\r\n","title":"Convert .doc with utf-8 to html using xdocreport","body":"<p>From your code I guess you are using very old versions of XDocReport and Apache POI. So I suggest update to more current versions.</p>\n<p>Current XDocReport  version 2.0.4 provides the <code>ImageManager</code> <code>Base64EmbedImgManager</code> already. So no special <code>Base64ImageExtractor</code> needed.</p>\n<p>Following works for me.</p>\n<pre><code>import java.io.*;\n\n//needed jars: xdocreport-2.0.4.jar, \nimport fr.opensagres.poi.xwpf.converter.xhtml.XHTMLConverter;\nimport fr.opensagres.poi.xwpf.converter.xhtml.XHTMLOptions;\nimport fr.opensagres.poi.xwpf.converter.xhtml.Base64EmbedImgManager ;\n\n//needed jars: all apache poi dependencies of poi-ooxml version 5.2.3\nimport org.apache.poi.xwpf.usermodel.*;\n\npublic class DOCXToXHTMLXDocReport {\n\n public static void main(String[] args) throws Exception {\n\n  String docPath = &quot;./WordDocument.docx&quot;;\n  String htmlPath = &quot;./WordDocument.html&quot;;\n\n  XWPFDocument document = new XWPFDocument(new FileInputStream(docPath));\n\n  XHTMLOptions options = XHTMLOptions.create().setImageManager(new Base64EmbedImgManager());\n  \n  FileOutputStream out = new FileOutputStream(htmlPath);\n  XHTMLConverter.getInstance().convert(document, out, options);\n\n  out.close();      \n  document.close();    \n\n  java.awt.Desktop.getDesktop().browse(new File(htmlPath).toPath().toRealPath(java.nio.file.LinkOption.NOFOLLOW_LINKS).toUri());  \n \n }\n}\n</code></pre>\n<p>After upgrading your versions, you should test again. And and if you have problems with Unicode in <code>WordDocument.docx</code>, the you should provide an example <code>WordDocument.docx</code> which produces those problems. That will make your problem reproducible for others.</p>\n<hr />\n<p>Found the Unicode problem. <a href=\"https://github.com/opensagres/xdocreport/blob/master/thirdparties-extension/fr.opensagres.poi.xwpf.converter.xhtml/src/main/java/fr/opensagres/poi/xwpf/converter/xhtml/SimpleContentHandler.java\" rel=\"nofollow noreferrer\">fr.opensagres.poi.xwpf.converter.xhtml.SimpleContentHandler</a> uses <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#getBytes--\" rel=\"nofollow noreferrer\">String.getBytes</a> without explicit <code>Charset</code>. That &quot;Encodes this String into a sequence of bytes using the <strong>platform's default charset</strong>, storing the result into a new byte array.&quot;.</p>\n<p>So it depends on platform's default charset whether Unicode will be handled correctly. If the platform is Windows and no other charset is set via environment variables, the platform's default charset is windows-1252. That, of course cannot handle Unicode.</p>\n<p>You can check via:</p>\n<pre><code>System.out.println(&quot;Default Charset=&quot; + java.nio.charset.Charset.defaultCharset());  \n</code></pre>\n<p>For how to set UTF-8 the platform's default charset for Windows, please see <a href=\"https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding?answertab=scoredesc#tab-top\">Setting the default Java character encoding</a>.</p>\n<p>For me, starting the class <code>DOCXToXHTMLXDocReport</code> via</p>\n<pre><code>java -Dfile.encoding=UTF-8 ... DOCXToXHTMLXDocReport\n</code></pre>\n<p>produces the correct Unicode results in HTML in Windows platform too.</p>\n"}],"owner":{"account_id":29010361,"reputation":11,"user_id":22221997,"display_name":"Pla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697783850,"creation_date":1697571512,"question_id":77311809,"body_markdown":"I am converting doc file to html using the following code:\r\n   \r\n```\r\n   public static byte[] generateHTMLFromDoc(byte[] docBytes) {\r\n        try(ByteArrayInputStream inputStream = new ByteArrayInputStream(docBytes);\r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\r\n            XWPFDocument document = new XWPFDocument(inputStream);\r\n            XHTMLOptions options = XHTMLOptions.create();\r\n            Base64ImageExtractor imageExtractor = new Base64ImageExtractor();\r\n            options.setExtractor(imageExtractor);\r\n            options.URIResolver(imageExtractor);\r\n            XHTMLConverter.getInstance().convert(document, outputStream, options);\r\n            return outputStream.toByteArray();\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n```\r\n\r\nBut my file include utf-8 so it will dislay like ??? such as: m?c l?c\r\nPlease help me how to add utf-8 into options\r\n\r\nI tried to add\r\n\r\n```\r\noptions.setEncoding(&quot;UTF-8&quot;);\r\n```\r\n\r\nbut there is no setEncoding for XHTMLOptions","title":"Convert .doc with utf-8 to html using xdocreport","body":"<p>I am converting doc file to html using the following code:</p>\n<pre><code>   public static byte[] generateHTMLFromDoc(byte[] docBytes) {\n        try(ByteArrayInputStream inputStream = new ByteArrayInputStream(docBytes);\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {\n            XWPFDocument document = new XWPFDocument(inputStream);\n            XHTMLOptions options = XHTMLOptions.create();\n            Base64ImageExtractor imageExtractor = new Base64ImageExtractor();\n            options.setExtractor(imageExtractor);\n            options.URIResolver(imageExtractor);\n            XHTMLConverter.getInstance().convert(document, outputStream, options);\n            return outputStream.toByteArray();\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n<p>But my file include utf-8 so it will dislay like ??? such as: m?c l?c\nPlease help me how to add utf-8 into options</p>\n<p>I tried to add</p>\n<pre><code>options.setEncoding(&quot;UTF-8&quot;);\n</code></pre>\n<p>but there is no setEncoding for XHTMLOptions</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1697781709,"post_id":77328605,"comment_id":136325209,"body_markdown":"You can have your own mapping file. Either a properties file or a JSON file. That file can have mappings between the fields in the incoming file and the fields in your POJO. That mapping file would be outside your deployment, a kind of data file. It could be a file OR it could be env variables or AWS Parameter Store or something if you are using cloud. Only that data needs to be changed when incoming file&#39;s field names change. No deploment needed. No change in your code.","body":"You can have your own mapping file. Either a properties file or a JSON file. That file can have mappings between the fields in the incoming file and the fields in your POJO. That mapping file would be outside your deployment, a kind of data file. It could be a file OR it could be env variables or AWS Parameter Store or something if you are using cloud. Only that data needs to be changed when incoming file&#39;s field names change. No deploment needed. No change in your code."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1697783059,"post_id":77328605,"comment_id":136325353,"body_markdown":"Forgot to mention. If something like this is not readily available, you can use Java Reflection APIs to dynamically call setters on your POJO.","body":"Forgot to mention. If something like this is not readily available, you can use Java Reflection APIs to dynamically call setters on your POJO."},{"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"score":0,"creation_date":1697783975,"post_id":77328605,"comment_id":136325462,"body_markdown":"Your JSON is a single level map to String.  Define your POJO with one element as type `Map&lt;String, String&gt;` can do the job.","body":"Your JSON is a single level map to String.  Define your POJO with one element as type <code>Map&lt;String, String&gt;</code> can do the job."}],"answers":[{"tags":[],"owner":{"account_id":16297526,"reputation":193,"user_id":11769408,"display_name":"Geoffrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697783198,"creation_date":1697783198,"answer_id":77328724,"question_id":77328605,"body_markdown":"It seems that you do a conceptual misunderstanding:\r\n\r\n&gt; Since it is a file and not an API, we are unsure when the fields may change in the future.\r\n\r\nYou try to bypass the API concepts by using files directly. But you still not avoid the core problem:\r\n\r\n&gt; If in the future, they change &#39;CUSTOMERID&#39; to &#39;MEMBERID,&#39; then my code would fail.\r\n\r\nThe API concepts are made to overcome this issue. So a correct approach would be to abandon file transfert and generate a API definition with DTO based on your Json file  (use open API / swagger editor).\r\n\r\nThis is gonna be the `V1`, then when you change from `CUSTOMERID`&#39; to &#39;`MEMBERID`, it&#39;s gonna be a `V2`. You just need to write the implementation for both cases.\r\n\r\n","title":"How can I map json data dynamically so that my code won&#39;t break?","body":"<p>It seems that you do a conceptual misunderstanding:</p>\n<blockquote>\n<p>Since it is a file and not an API, we are unsure when the fields may change in the future.</p>\n</blockquote>\n<p>You try to bypass the API concepts by using files directly. But you still not avoid the core problem:</p>\n<blockquote>\n<p>If in the future, they change 'CUSTOMERID' to 'MEMBERID,' then my code would fail.</p>\n</blockquote>\n<p>The API concepts are made to overcome this issue. So a correct approach would be to abandon file transfert and generate a API definition with DTO based on your Json file  (use open API / swagger editor).</p>\n<p>This is gonna be the <code>V1</code>, then when you change from <code>CUSTOMERID</code>' to '<code>MEMBERID</code>, it's gonna be a <code>V2</code>. You just need to write the implementation for both cases.</p>\n"}],"owner":{"account_id":20354547,"reputation":29,"user_id":14930379,"display_name":"NotACat"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1697783198,"creation_date":1697781347,"question_id":77328605,"body_markdown":"The problem is this: I am receiving a file from a vendor that is in JSON format. Currently, I have a POJO class that contains mappings for the JSON fields. Since it is a file and not an API, we are unsure when the fields may change in the future. \r\n\r\nSample JSON: { &quot;CUSTOMERID&quot;: &quot;123456&quot;, &quot;firstName&quot;: &quot;test1&quot;, &quot;middleName&quot;: &quot;&quot;, &quot;lastName&quot;: &quot;last2&quot;, &quot;suffix&quot;: &quot;Mr.&quot;, &quot;fullName&quot;: &quot; John&quot;, &quot;companyName&quot;: &quot;IT&quot;, &quot;SSN&quot;: &quot;&quot; }\r\n\r\nIf in the future, they change &#39;CUSTOMERID&#39; to &#39;MEMBERID,&#39; then my code would fail. How can I overcome this?&quot;","title":"How can I map json data dynamically so that my code won&#39;t break?","body":"<p>The problem is this: I am receiving a file from a vendor that is in JSON format. Currently, I have a POJO class that contains mappings for the JSON fields. Since it is a file and not an API, we are unsure when the fields may change in the future.</p>\n<p>Sample JSON: { &quot;CUSTOMERID&quot;: &quot;123456&quot;, &quot;firstName&quot;: &quot;test1&quot;, &quot;middleName&quot;: &quot;&quot;, &quot;lastName&quot;: &quot;last2&quot;, &quot;suffix&quot;: &quot;Mr.&quot;, &quot;fullName&quot;: &quot; John&quot;, &quot;companyName&quot;: &quot;IT&quot;, &quot;SSN&quot;: &quot;&quot; }</p>\n<p>If in the future, they change 'CUSTOMERID' to 'MEMBERID,' then my code would fail. How can I overcome this?&quot;</p>\n"},{"tags":["java","spring-boot","apache-kafka","kafka-consumer-api"],"owner":{"account_id":29713610,"reputation":1,"user_id":22772620,"display_name":"Manzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697782812,"creation_date":1697782812,"question_id":77328698,"body_markdown":"I want to stop my consumer from running infinitely and also change topic name and group id in a loop and run my consumer. How can I proceed to do this?\r\n\r\nI was experimenting if I could use currentLag() function and compare the difference between current offset and endoffset and make the consumer exit if the difference were to be zero but I couldn&#39;t succeed.","title":"How to stop an infinite consumer in a java project?","body":"<p>I want to stop my consumer from running infinitely and also change topic name and group id in a loop and run my consumer. How can I proceed to do this?</p>\n<p>I was experimenting if I could use currentLag() function and compare the difference between current offset and endoffset and make the consumer exit if the difference were to be zero but I couldn't succeed.</p>\n"},{"tags":["java","jakarta-ee","ejb","jndi","ejb-2.x"],"answers":[{"tags":[],"owner":{"account_id":277571,"reputation":1676,"user_id":571653,"accept_rate":68,"display_name":"abhihello123"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343135389,"creation_date":1343135389,"answer_id":11631583,"question_id":11625954,"body_markdown":"The problem was the binding.xmi file was not getting included. Included that and it worked.","title":"Local EJB Bean Not Found using Indirect JNDI which was working earlier","body":"<p>The problem was the binding.xmi file was not getting included. Included that and it worked.</p>\n"}],"owner":{"account_id":277571,"reputation":1676,"user_id":571653,"accept_rate":68,"display_name":"abhihello123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697781800,"creation_date":1343114366,"question_id":11625954,"body_markdown":"I am using EJB 2.1 in a separate module in a multi-module Maven Application. I am using indirect JNDI (ie. using java:comp/env/ Not used it much). Also I am using EJB 2.1 for the first time. But since this is only a local simple EJB so not much problem.\r\nThe wiered bit about it is that it was working but suddenly without having changed any part relevant to it, it has stopped working now and I am getting NameNotFoundException. The things are done correctly as it was working. I am pretty sure about it.\r\nFirst my code,\r\n\r\n**ejb-jar.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;ejb-jar id=&quot;ejb-jar_ID&quot; version=&quot;2.1&quot; xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd&quot;&gt;\r\n    \t&lt;display-name&gt;sr-g0a-ejb&lt;/display-name&gt;\r\n    \t&lt;enterprise-beans&gt;\r\n    \t\t&lt;session id=&quot;CreateAclService&quot;&gt;\r\n    \t\t\t&lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\r\n    \t\t\t&lt;local-home&gt;com.sre.g0a.CreateAclServiceLocalHome&lt;/local-home&gt;\r\n    \t\t\t&lt;local&gt;com.sre.g0a.CreateAclServiceLocal&lt;/local&gt;\r\n    \t\t\t&lt;ejb-class&gt;com.sre.g0a.CreateAclServiceBean&lt;/ejb-class&gt;\r\n    \t\t\t&lt;session-type&gt;Stateless&lt;/session-type&gt;\r\n    \t\t\t&lt;transaction-type&gt;Container&lt;/transaction-type&gt;\r\n    \t\t\t&lt;security-identity&gt;\r\n    \t\t\t\t&lt;description&gt;&lt;/description&gt;\r\n    \t\t\t\t&lt;run-as&gt;\r\n    \t\t\t\t\t&lt;description&gt;&lt;/description&gt;\r\n    \t\t\t\t\t&lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\r\n    \t\t\t\t&lt;/run-as&gt;\r\n    \t\t\t&lt;/security-identity&gt;\r\n    \t\t&lt;/session&gt;\r\n    \t&lt;/enterprise-beans&gt;\r\n    \t&lt;assembly-descriptor&gt;\r\n    \t\t&lt;security-role&gt;\r\n    \t\t\t&lt;description&gt;\r\n    \t\t\tACL_TECH_USER&lt;/description&gt;\r\n    \t\t\t&lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\r\n    \t\t&lt;/security-role&gt;\r\n    \t\t&lt;method-permission&gt;\r\n    \t\t\t&lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\r\n    \t\t\t&lt;method&gt;\r\n    \t\t\t\t&lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\r\n    \t\t\t\t&lt;method-intf&gt;Local&lt;/method-intf&gt;\r\n    \t\t\t\t&lt;method-name&gt;createAclRole&lt;/method-name&gt;\r\n    \t\t\t\t&lt;method-params&gt;\r\n    \t\t\t\t\t&lt;method-param&gt;com.sre.edms.bsc.types.EDMSAcl&lt;/method-param&gt;\r\n    \t\t\t\t\t&lt;method-param&gt;com.sre.edms.bsc.ids.EDMSDocumentID&lt;/method-param&gt;\r\n    \t\t\t\t&lt;/method-params&gt;\r\n    \t\t\t&lt;/method&gt;\r\n    \t\t&lt;/method-permission&gt;\r\n    \t\t&lt;container-transaction&gt;\r\n    \t\t\t&lt;method&gt;\r\n    \t\t\t\t&lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\r\n    \t\t\t\t&lt;method-name&gt;*&lt;/method-name&gt;\r\n    \t\t\t&lt;/method&gt;\r\n    \t\t\t&lt;trans-attribute&gt;NotSupported&lt;/trans-attribute&gt;\r\n    \t\t&lt;/container-transaction&gt;\r\n    \t&lt;/assembly-descriptor&gt;\r\n    &lt;/ejb-jar&gt;\r\n\r\n\r\n**The Snippet from the web module** (on the server) where from I am accessing the EJB method.\r\n\r\n\t\tHashtable&lt;String, String&gt; hashTable = new Hashtable&lt;String, String&gt;();\r\n\t\thashTable.put(Context.INITIAL_CONTEXT_FACTORY,\r\n\t\t&quot;com.ibm.websphere.naming.WsnInitialContextFactory&quot;);\r\n\t\t//hashTable.put(Context.PROVIDER_URL, &quot;corbaloc:iiop:localhost:9080&quot;);\r\n\t\tContext initialContext;\r\n\t\ttry {\r\n\t\t\tinitialContext = new InitialContext(hashTable);\r\n\t\t\tCreateAclServiceLocalHome home = (CreateAclServiceLocalHome) initialContext\r\n\t\t\t.lookup(&quot;java:comp/env/ejb/CreateAclService&quot;);\r\n\t\t\t//.lookup(&quot;ejblocal:ejb/CreateAclServiceLocal&quot;);\r\n\t\t\tCreateAclServiceLocal service = home.create();\r\n\t\t\teDMSAcl = service.createAclRole(eDMSAcl, edmsDocumentID);\r\n\t\t} catch (NamingException ne) {\r\n\t\t\tLOGGER.log(Level.WARNING, &quot;NamingException Occured&quot;, ne);\r\n\t\t\tthrow new GEMException(&quot;Failed to create ACL. NamingException Occured&quot;);\r\n\t\t} catch (CreateException ce) {\r\n\t\t\tLOGGER.log(Level.WARNING, &quot;CreateException Occured&quot;, ce);\r\n\t\t\tthrow new GEMException(&quot;Failed to create ACL&quot;);\r\n\t\t} catch (BscServiceException be) {\r\n\t\t\tLOGGER.log(Level.WARNING, &quot;BscServiceException Occured&quot;, be);\r\n\t\t\tthrow new GEMException(&quot;Failed to create ACL&quot;);\r\n\t\t}\r\n\r\n\r\n**Snippet from my web.xml** which shows the ejb-ref tag\r\n\r\n\t&lt;ejb-local-ref id=&quot;EJBLocalRef_1343037878938&quot;&gt;\r\n\t\t&lt;description&gt;\r\n\t\t&lt;/description&gt;\r\n\t\t&lt;ejb-ref-name&gt;ejb/CreateAclService&lt;/ejb-ref-name&gt;\r\n\t\t&lt;ejb-ref-type&gt;Session&lt;/ejb-ref-type&gt;\r\n\t\t&lt;local-home&gt;com.sre.g0a.CreateAclServiceLocalHome&lt;/local-home&gt;\r\n\t\t&lt;local&gt;com.sre.g0a.CreateAclServiceLocal&lt;/local&gt;\r\n\t\t&lt;ejb-link&gt;sr-g0a-ejb.jar#CreateAclService&lt;/ejb-link&gt;\r\n\t&lt;/ejb-local-ref&gt;\r\n\r\nNow the stacktrace of my Exception (NamingNotFoundException)\r\n\r\n    [7/24/12 12:34:26:629 IST] 00001720 GEMEBesUtil   W   NamingException Occured\r\n                                     com.ibm.websphere.naming.CannotInstantiateObjectException: A NameNotFoundException occurred on an indirect lookup on the name java:comp/env/ejb/CreateAclService. The name java:comp/env/ejb/CreateAclService maps to a JNDI name in deployment descriptor bindings for the application performing the JNDI lookup. Make sure that the JNDI name mapping in the deployment descriptor binding is correct. If the JNDI name mapping is correct, make sure the target resource can be resolved with the specified name relative to the default initial context.  [Root exception is javax.naming.NameNotFoundException: Name ejb not found in context &quot;ejblocal:&quot;.]\r\n    \tat com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:1081)\r\n    \tat com.ibm.ws.naming.urlbase.UrlContextHelper.processBoundObjectForLookup(UrlContextHelper.java:181)\r\n    \tat com.ibm.ws.naming.java.javaURLContextRoot.processBoundObjectForLookup(javaURLContextRoot.java:850)\r\n    \tat com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1454)\r\n    \tat com.ibm.ws.naming.java.javaURLContextImpl.lookupExt(javaURLContextImpl.java:477)\r\n    \tat com.ibm.ws.naming.java.javaURLContextRoot.lookupExt(javaURLContextRoot.java:485)\r\n    \tat com.ibm.ws.naming.java.javaURLContextRoot.lookup(javaURLContextRoot.java:370)\r\n    \tat org.apache.aries.jndi.DelegateContext.lookup(DelegateContext.java:161)\r\n    \tat javax.naming.InitialContext.lookup(InitialContext.java:436)\r\n    \tat com.sre.g0a.server.util.GEMEBesUtil.createEDMSAcl(GEMEBesUtil.java:250)\r\n    \tat com.sre.g0a.server.util.GEMEBesUtil.formSrGemDocForCreation(GEMEBesUtil.java:180)\r\n    \tat com.sre.g0a.server.services.ImportComponentServiceImpl.createDocument(ImportComponentServiceImpl.java:65)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:611)\r\n    \tat com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)\r\n    \tat com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:551)\r\n    \tat com.sre.g0a.server.integration.GWTSpringController.processCall(GWTSpringController.java:57)\r\n    \tat com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)\r\n    \tat com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:595)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\r\n    \tat com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)\r\n    \tat com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)\r\n    \tat com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)\r\n    \tat com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)\r\n    \tat com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)\r\n    \tat com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)\r\n    \tat com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)\r\n    \tat com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)\r\n    \tat com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)\r\n    \tat com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)\r\n    \tat com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)\r\n    \tat com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)\r\n    \tat com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)\r\n    \tat com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)\r\n    \tat com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)\r\n    \tat com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\r\n    \tat com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\r\n    \tat com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\r\n    \tat com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\r\n    \tat com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\r\n    \tat com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\r\n    \tat com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)\r\n    Caused by: javax.naming.NameNotFoundException: Name ejb not found in context &quot;ejblocal:&quot;.\r\n    \tat com.ibm.ws.naming.ipbase.NameSpace.getParentCtxInternal(NameSpace.java:1969)\r\n    \tat com.ibm.ws.naming.ipbase.NameSpace.retrieveBinding(NameSpace.java:1376)\r\n    \tat com.ibm.ws.naming.ipbase.NameSpace.lookupInternal(NameSpace.java:1219)\r\n    \tat com.ibm.ws.naming.ipbase.NameSpace.lookup(NameSpace.java:1141)\r\n    \tat com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1436)\r\n    \tat com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1425)\r\n    \tat com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1475)\r\n    \tat com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory$1.run(IndirectJndiLookupObjectFactory.java:373)\r\n    \tat com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)\r\n    \tat com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory.getObjectInstanceExt(IndirectJndiLookupObjectFactory.java:223)\r\n    \tat com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:990)\r\n    \t... 44 more\r\n\r\n\r\n","title":"Local EJB Bean Not Found using Indirect JNDI which was working earlier","body":"<p>I am using EJB 2.1 in a separate module in a multi-module Maven Application. I am using indirect JNDI (ie. using java:comp/env/ Not used it much). Also I am using EJB 2.1 for the first time. But since this is only a local simple EJB so not much problem.\nThe wiered bit about it is that it was working but suddenly without having changed any part relevant to it, it has stopped working now and I am getting NameNotFoundException. The things are done correctly as it was working. I am pretty sure about it.\nFirst my code,</p>\n\n<p><strong>ejb-jar.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ejb-jar id=\"ejb-jar_ID\" version=\"2.1\" xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd\"&gt;\n    &lt;display-name&gt;sr-g0a-ejb&lt;/display-name&gt;\n    &lt;enterprise-beans&gt;\n        &lt;session id=\"CreateAclService\"&gt;\n            &lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\n            &lt;local-home&gt;com.sre.g0a.CreateAclServiceLocalHome&lt;/local-home&gt;\n            &lt;local&gt;com.sre.g0a.CreateAclServiceLocal&lt;/local&gt;\n            &lt;ejb-class&gt;com.sre.g0a.CreateAclServiceBean&lt;/ejb-class&gt;\n            &lt;session-type&gt;Stateless&lt;/session-type&gt;\n            &lt;transaction-type&gt;Container&lt;/transaction-type&gt;\n            &lt;security-identity&gt;\n                &lt;description&gt;&lt;/description&gt;\n                &lt;run-as&gt;\n                    &lt;description&gt;&lt;/description&gt;\n                    &lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\n                &lt;/run-as&gt;\n            &lt;/security-identity&gt;\n        &lt;/session&gt;\n    &lt;/enterprise-beans&gt;\n    &lt;assembly-descriptor&gt;\n        &lt;security-role&gt;\n            &lt;description&gt;\n            ACL_TECH_USER&lt;/description&gt;\n            &lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\n        &lt;/security-role&gt;\n        &lt;method-permission&gt;\n            &lt;role-name&gt;ACL_TECH_USER&lt;/role-name&gt;\n            &lt;method&gt;\n                &lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\n                &lt;method-intf&gt;Local&lt;/method-intf&gt;\n                &lt;method-name&gt;createAclRole&lt;/method-name&gt;\n                &lt;method-params&gt;\n                    &lt;method-param&gt;com.sre.edms.bsc.types.EDMSAcl&lt;/method-param&gt;\n                    &lt;method-param&gt;com.sre.edms.bsc.ids.EDMSDocumentID&lt;/method-param&gt;\n                &lt;/method-params&gt;\n            &lt;/method&gt;\n        &lt;/method-permission&gt;\n        &lt;container-transaction&gt;\n            &lt;method&gt;\n                &lt;ejb-name&gt;CreateAclService&lt;/ejb-name&gt;\n                &lt;method-name&gt;*&lt;/method-name&gt;\n            &lt;/method&gt;\n            &lt;trans-attribute&gt;NotSupported&lt;/trans-attribute&gt;\n        &lt;/container-transaction&gt;\n    &lt;/assembly-descriptor&gt;\n&lt;/ejb-jar&gt;\n</code></pre>\n\n<p><strong>The Snippet from the web module</strong> (on the server) where from I am accessing the EJB method.</p>\n\n<pre><code>    Hashtable&lt;String, String&gt; hashTable = new Hashtable&lt;String, String&gt;();\n    hashTable.put(Context.INITIAL_CONTEXT_FACTORY,\n    \"com.ibm.websphere.naming.WsnInitialContextFactory\");\n    //hashTable.put(Context.PROVIDER_URL, \"corbaloc:iiop:localhost:9080\");\n    Context initialContext;\n    try {\n        initialContext = new InitialContext(hashTable);\n        CreateAclServiceLocalHome home = (CreateAclServiceLocalHome) initialContext\n        .lookup(\"java:comp/env/ejb/CreateAclService\");\n        //.lookup(\"ejblocal:ejb/CreateAclServiceLocal\");\n        CreateAclServiceLocal service = home.create();\n        eDMSAcl = service.createAclRole(eDMSAcl, edmsDocumentID);\n    } catch (NamingException ne) {\n        LOGGER.log(Level.WARNING, \"NamingException Occured\", ne);\n        throw new GEMException(\"Failed to create ACL. NamingException Occured\");\n    } catch (CreateException ce) {\n        LOGGER.log(Level.WARNING, \"CreateException Occured\", ce);\n        throw new GEMException(\"Failed to create ACL\");\n    } catch (BscServiceException be) {\n        LOGGER.log(Level.WARNING, \"BscServiceException Occured\", be);\n        throw new GEMException(\"Failed to create ACL\");\n    }\n</code></pre>\n\n<p><strong>Snippet from my web.xml</strong> which shows the ejb-ref tag</p>\n\n<pre><code>&lt;ejb-local-ref id=\"EJBLocalRef_1343037878938\"&gt;\n    &lt;description&gt;\n    &lt;/description&gt;\n    &lt;ejb-ref-name&gt;ejb/CreateAclService&lt;/ejb-ref-name&gt;\n    &lt;ejb-ref-type&gt;Session&lt;/ejb-ref-type&gt;\n    &lt;local-home&gt;com.sre.g0a.CreateAclServiceLocalHome&lt;/local-home&gt;\n    &lt;local&gt;com.sre.g0a.CreateAclServiceLocal&lt;/local&gt;\n    &lt;ejb-link&gt;sr-g0a-ejb.jar#CreateAclService&lt;/ejb-link&gt;\n&lt;/ejb-local-ref&gt;\n</code></pre>\n\n<p>Now the stacktrace of my Exception (NamingNotFoundException)</p>\n\n<pre><code>[7/24/12 12:34:26:629 IST] 00001720 GEMEBesUtil   W   NamingException Occured\n                                 com.ibm.websphere.naming.CannotInstantiateObjectException: A NameNotFoundException occurred on an indirect lookup on the name java:comp/env/ejb/CreateAclService. The name java:comp/env/ejb/CreateAclService maps to a JNDI name in deployment descriptor bindings for the application performing the JNDI lookup. Make sure that the JNDI name mapping in the deployment descriptor binding is correct. If the JNDI name mapping is correct, make sure the target resource can be resolved with the specified name relative to the default initial context.  [Root exception is javax.naming.NameNotFoundException: Name ejb not found in context \"ejblocal:\".]\n    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:1081)\n    at com.ibm.ws.naming.urlbase.UrlContextHelper.processBoundObjectForLookup(UrlContextHelper.java:181)\n    at com.ibm.ws.naming.java.javaURLContextRoot.processBoundObjectForLookup(javaURLContextRoot.java:850)\n    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1454)\n    at com.ibm.ws.naming.java.javaURLContextImpl.lookupExt(javaURLContextImpl.java:477)\n    at com.ibm.ws.naming.java.javaURLContextRoot.lookupExt(javaURLContextRoot.java:485)\n    at com.ibm.ws.naming.java.javaURLContextRoot.lookup(javaURLContextRoot.java:370)\n    at org.apache.aries.jndi.DelegateContext.lookup(DelegateContext.java:161)\n    at javax.naming.InitialContext.lookup(InitialContext.java:436)\n    at com.sre.g0a.server.util.GEMEBesUtil.createEDMSAcl(GEMEBesUtil.java:250)\n    at com.sre.g0a.server.util.GEMEBesUtil.formSrGemDocForCreation(GEMEBesUtil.java:180)\n    at com.sre.g0a.server.services.ImportComponentServiceImpl.createDocument(ImportComponentServiceImpl.java:65)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n    at java.lang.reflect.Method.invoke(Method.java:611)\n    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)\n    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:551)\n    at com.sre.g0a.server.integration.GWTSpringController.processCall(GWTSpringController.java:57)\n    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)\n    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:595)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)\n    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)\n    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)\n    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)\n    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)\n    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)\n    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)\n    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)\n    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)\n    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)\n    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)\n    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)\n    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\n    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\n    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\n    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\n    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\n    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\n    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659)\nCaused by: javax.naming.NameNotFoundException: Name ejb not found in context \"ejblocal:\".\n    at com.ibm.ws.naming.ipbase.NameSpace.getParentCtxInternal(NameSpace.java:1969)\n    at com.ibm.ws.naming.ipbase.NameSpace.retrieveBinding(NameSpace.java:1376)\n    at com.ibm.ws.naming.ipbase.NameSpace.lookupInternal(NameSpace.java:1219)\n    at com.ibm.ws.naming.ipbase.NameSpace.lookup(NameSpace.java:1141)\n    at com.ibm.ws.naming.urlbase.UrlContextImpl.lookupExt(UrlContextImpl.java:1436)\n    at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1425)\n    at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1475)\n    at com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory$1.run(IndirectJndiLookupObjectFactory.java:373)\n    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)\n    at com.ibm.ws.naming.util.IndirectJndiLookupObjectFactory.getObjectInstanceExt(IndirectJndiLookupObjectFactory.java:223)\n    at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:990)\n    ... 44 more\n</code></pre>\n"},{"tags":["java","android","onkeydown","onkeyup"],"owner":{"account_id":29713543,"reputation":1,"user_id":22772564,"display_name":"Joshua"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697780685,"creation_date":1697780685,"question_id":77328562,"body_markdown":"Pressing down or holding down &#39;T&#39; results in the &quot;T UP&quot; log statement being executed repeatedly, as opposed to only when the key is released, which should not be the intended behavior. Help appreciated!\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n    @Override\r\n    public boolean dispatchKeyEvent(KeyEvent event) {\r\n        if (event.getAction() == KeyEvent.ACTION_UP &amp;&amp;\r\n                event.getKeyCode() == KeyEvent.KEYCODE_T) {\r\n            Log.d(&quot;KEYACTION&quot;, &quot;T UP&quot;);\r\n        }\r\n\r\n        return false;\r\n    }\r\n}```\r\n\r\n\r\nI originally tried using both the onKeyDown and onKeyUp overrides independently, and the issue became apparent. Using dispatchKey was the alternative solution but has also not worked properly.","title":"Android studio onKeyUp getting called when key is down and/or held down","body":"<p>Pressing down or holding down 'T' results in the &quot;T UP&quot; log statement being executed repeatedly, as opposed to only when the key is released, which should not be the intended behavior. Help appreciated!</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public boolean dispatchKeyEvent(KeyEvent event) {\n        if (event.getAction() == KeyEvent.ACTION_UP &amp;&amp;\n                event.getKeyCode() == KeyEvent.KEYCODE_T) {\n            Log.d(&quot;KEYACTION&quot;, &quot;T UP&quot;);\n        }\n\n        return false;\n    }\n}```\n\n\nI originally tried using both the onKeyDown and onKeyUp overrides independently, and the issue became apparent. Using dispatchKey was the alternative solution but has also not worked properly.\n</code></pre>\n"},{"tags":["java","testng","appium-android","extentreports"],"answers":[{"tags":[],"owner":{"account_id":4046845,"reputation":148,"user_id":3327823,"display_name":"Rakesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552411392,"creation_date":1552411392,"answer_id":55127355,"question_id":55124234,"body_markdown":"Instead of @Test(testName = “ The test name is the test”) \nUse  @Test(Description = “ The test name is the test”)\n\nAnd \nUse this below line.\n\nExtentTest child = parenttest.get().createNode(method.getDescription().getName());\n\nThis works!!","title":"Use test name rather than method name for extent reporter","body":"<p>Instead of @Test(testName = “ The test name is the test”) \nUse  @Test(Description = “ The test name is the test”)</p>\n\n<p>And \nUse this below line.</p>\n\n<p>ExtentTest child = parenttest.get().createNode(method.getDescription().getName());</p>\n\n<p>This works!!</p>\n"},{"tags":[],"owner":{"account_id":8136065,"reputation":31,"user_id":6127649,"accept_rate":60,"display_name":"Jaideep Bahadur Srivastava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697779454,"creation_date":1697779454,"answer_id":77328482,"question_id":55124234,"body_markdown":"In the TestListener, i am changing the name of the test method with the parameters which has data fetched from csv at run time \r\n\r\n\t\r\n\r\n    public void onTestStart(ITestResult result) {\r\n    //\t\tSystem.out.println((&quot;*** Running Test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\r\n    //\t\tExtentTestManager.startTest(result.getMethod().getMethodName());\r\n    \t\tSystem.out.println((&quot;*** Running Test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\r\n    \t\tString methodName = result.getMethod().getMethodName();\r\n    \t\tObject[] parameters = result.getParameters();\r\n    \t\tif(result.getMethod().getMethodName().equalsIgnoreCase(&quot;DbEnvSet&quot;)||result.getMethod().getMethodName().equalsIgnoreCase(&quot;closeDbConnections&quot;)){\r\n    \t\t}else{\r\n    \t\t\tif (parameters != null &amp;&amp; parameters.length &gt; 0) {\r\n    \t\t\t\tmethodName = &quot;Method : &quot; + parameters[0].toString() ;\r\n    \t\t\t\tExtentTestManager.startTest(methodName);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\tthis.testStatus = \tnew TestStatus();\r\n    \t}\r\n\r\nI am using Dataprovider and reading the data from a csv file \r\n\r\n      @Test(dependsOnMethods = { &quot;DbEnvSet&quot; }, dataProvider = &quot;ReadRecords&quot;, dataProviderClass = RecordsDataProvider.class)\r\n        @Parameters({&quot;environment&quot;,&quot;dbUserName&quot;,&quot;dbPassword&quot;})\r\n        //,String TransactionTime,String SessionID,String TypeOfScenario,String Amount\r\n        public void End2EndScenario(String Number,String scenario,String error) throws Exception {\r\n    }\r\n\r\nHere Number,scenario and error are the values which are being read from csv [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qOmoL.png\r\n\r\n","title":"Use test name rather than method name for extent reporter","body":"<p>In the TestListener, i am changing the name of the test method with the parameters which has data fetched from csv at run time</p>\n<pre><code>public void onTestStart(ITestResult result) {\n//      System.out.println((&quot;*** Running Test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\n//      ExtentTestManager.startTest(result.getMethod().getMethodName());\n        System.out.println((&quot;*** Running Test method &quot; + result.getMethod().getMethodName() + &quot;...&quot;));\n        String methodName = result.getMethod().getMethodName();\n        Object[] parameters = result.getParameters();\n        if(result.getMethod().getMethodName().equalsIgnoreCase(&quot;DbEnvSet&quot;)||result.getMethod().getMethodName().equalsIgnoreCase(&quot;closeDbConnections&quot;)){\n        }else{\n            if (parameters != null &amp;&amp; parameters.length &gt; 0) {\n                methodName = &quot;Method : &quot; + parameters[0].toString() ;\n                ExtentTestManager.startTest(methodName);\n            }\n\n        }\n        this.testStatus =   new TestStatus();\n    }\n</code></pre>\n<p>I am using Dataprovider and reading the data from a csv file</p>\n<pre><code>  @Test(dependsOnMethods = { &quot;DbEnvSet&quot; }, dataProvider = &quot;ReadRecords&quot;, dataProviderClass = RecordsDataProvider.class)\n    @Parameters({&quot;environment&quot;,&quot;dbUserName&quot;,&quot;dbPassword&quot;})\n    //,String TransactionTime,String SessionID,String TypeOfScenario,String Amount\n    public void End2EndScenario(String Number,String scenario,String error) throws Exception {\n}\n</code></pre>\n<p>Here Number,scenario and error are the values which are being read from csv <a href=\"https://i.stack.imgur.com/qOmoL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qOmoL.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":14854671,"reputation":217,"user_id":10727547,"display_name":"Tom Cockram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":764,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697779454,"creation_date":1552401765,"question_id":55124234,"body_markdown":"I want to use the test name I&#39;m giving the report rather than the method name.\r\n\r\nThis is where I am naming the test.\r\n\r\n    @Test(testName = &quot;The test name is test&quot;, retryAnalyzer = RetryAnalyzer.class)\r\n\r\nThis is the before method where I am getting the test name\r\n\r\n     @BeforeMethod\r\n    public synchronized void beforeMethod(Method method) {\r\n        ExtentTest child = parentTest.get().createNode(method.getName());\r\n        test.set(child);\r\n\r\nI would like the before method to read the test name at the start of the test.\r\n\r\nThanks","title":"Use test name rather than method name for extent reporter","body":"<p>I want to use the test name I'm giving the report rather than the method name.</p>\n\n<p>This is where I am naming the test.</p>\n\n<pre><code>@Test(testName = \"The test name is test\", retryAnalyzer = RetryAnalyzer.class)\n</code></pre>\n\n<p>This is the before method where I am getting the test name</p>\n\n<pre><code> @BeforeMethod\npublic synchronized void beforeMethod(Method method) {\n    ExtentTest child = parentTest.get().createNode(method.getName());\n    test.set(child);\n</code></pre>\n\n<p>I would like the before method to read the test name at the start of the test.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","spring","postgresql","transactions"],"comments":[{"owner":{"account_id":6396751,"reputation":500,"user_id":4960846,"display_name":"Loop"},"score":0,"creation_date":1697784838,"post_id":77328448,"comment_id":136325593,"body_markdown":"The deletBatch call inside the deleteSendEvents will definitely NOT create a new Transaktion because there is no way for the class proxy to intercept this call. As for testing you could debug it and check if every result you except is already in the database. In these cases, I find using the TransactionTemplate - the annotations uses that class as well - more concise","body":"The deletBatch call inside the deleteSendEvents will definitely NOT create a new Transaktion because there is no way for the class proxy to intercept this call. As for testing you could debug it and check if every result you except is already in the database. In these cases, I find using the TransactionTemplate - the annotations uses that class as well - more concise"},{"owner":{"account_id":15892628,"reputation":89,"user_id":11467296,"display_name":"Vasilis Iak"},"score":0,"creation_date":1697788085,"post_id":77328448,"comment_id":136326178,"body_markdown":"@Loop in simple terms, I can understand that this will not create new Transaction, since the call comes from the same class with the same transaction manager. Does that mean that it will not create multiple locks to the database as well?","body":"@Loop in simple terms, I can understand that this will not create new Transaction, since the call comes from the same class with the same transaction manager. Does that mean that it will not create multiple locks to the database as well?"},{"owner":{"account_id":6396751,"reputation":500,"user_id":4960846,"display_name":"Loop"},"score":0,"creation_date":1698739389,"post_id":77328448,"comment_id":136440166,"body_markdown":"It won&#39;t. And if you need multiple Transactions, you should use the propagation level &quot;REQUIRES_NEW&quot; or something similar. The default behavior of the transactional annotation will either use the existing transaction from the calling thread or create a new one if there is no active transaction available.","body":"It won&#39;t. And if you need multiple Transactions, you should use the propagation level &quot;REQUIRES_NEW&quot; or something similar. The default behavior of the transactional annotation will either use the existing transaction from the calling thread or create a new one if there is no active transaction available."}],"owner":{"account_id":15892628,"reputation":89,"user_id":11467296,"display_name":"Vasilis Iak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1697778816,"creation_date":1697778816,"question_id":77328448,"body_markdown":"I have a @Transactional Service class EventsService and a function that deletes some events according to their state. The implementation looks like this:\r\n\r\n```\r\n@Service\r\n@Transactional(&quot;transactionManager&quot;)\r\npublic class EventsService {\r\n\r\n  @Autowired private EventsRepository eventsRepository;\r\n  \r\n  public int deleteSentEvents() {\r\n\tString state = &quot;SENT&quot;;\r\n\tint deletionLimit = 10000;\r\n    Pageable page = Pageable.ofSize(1000);\r\n    Page&lt;Events&gt; eventsPage = null;\r\n    do {\r\n      eventsPage =\r\n          eventsRepository.findEventsByState(state, page); eventsRepository.deleteInBatch(eventsPage.getContent().stream().map(Events::getId).toList());\r\n      deletedTotal += eventsPage.getNumberOfElements();\r\n    } while (eventsPage.hasNext() &amp;&amp; deletedTotal &lt; deletionLimit);\r\n    return deletedTotal;\r\n  }\r\n```  \r\n I want to move the deletion part outside of this function and have multiple smaller transactions created for each page, in order not to lock all the rows at once for bigger time. So, I changed the code like this:\r\n```\r\n public int deleteSentEvents() {\r\n\tString state = &quot;SENT&quot;;\r\n\tint deletionLimit = 10000;\r\n    Pageable page = Pageable.ofSize(1000);\r\n    Page&lt;Events&gt; eventsPage = null;\r\n    do {\r\n      eventsPage =\r\n          eventsRepository.findEventsByState(state, page);\r\n      deleteBatch(eventsPage);\r\n      deletedTotal += eventsPage.getNumberOfElements();\r\n    } while (eventsPage.hasNext() &amp;&amp; deletedTotal &lt; deletionLimit);\r\n    return deletedTotal;\r\n  }\r\n  \r\n @Transactional(&quot;transactionManager&quot;)\r\n  public void deleteBatch(Page&lt;Events&gt; eventsPage) { eventsRepository.deleteInBatch(eventsPage.getContent().stream().map(Events::getId).toList());\r\n  }\r\n ``` \r\nIs there a way to verify that this change creates multiple smaller locks to the database, and multiple transactions as well? I am using postgreSQL and tried to query the pg_catalog.pg_locks table, but that didn&#39;t help.","title":"Do multiple @Transactions cause multiple database locks in Postgres?","body":"<p>I have a @Transactional Service class EventsService and a function that deletes some events according to their state. The implementation looks like this:</p>\n<pre><code>@Service\n@Transactional(&quot;transactionManager&quot;)\npublic class EventsService {\n\n  @Autowired private EventsRepository eventsRepository;\n  \n  public int deleteSentEvents() {\n    String state = &quot;SENT&quot;;\n    int deletionLimit = 10000;\n    Pageable page = Pageable.ofSize(1000);\n    Page&lt;Events&gt; eventsPage = null;\n    do {\n      eventsPage =\n          eventsRepository.findEventsByState(state, page); eventsRepository.deleteInBatch(eventsPage.getContent().stream().map(Events::getId).toList());\n      deletedTotal += eventsPage.getNumberOfElements();\n    } while (eventsPage.hasNext() &amp;&amp; deletedTotal &lt; deletionLimit);\n    return deletedTotal;\n  }\n</code></pre>\n<p>I want to move the deletion part outside of this function and have multiple smaller transactions created for each page, in order not to lock all the rows at once for bigger time. So, I changed the code like this:</p>\n<pre><code> public int deleteSentEvents() {\n    String state = &quot;SENT&quot;;\n    int deletionLimit = 10000;\n    Pageable page = Pageable.ofSize(1000);\n    Page&lt;Events&gt; eventsPage = null;\n    do {\n      eventsPage =\n          eventsRepository.findEventsByState(state, page);\n      deleteBatch(eventsPage);\n      deletedTotal += eventsPage.getNumberOfElements();\n    } while (eventsPage.hasNext() &amp;&amp; deletedTotal &lt; deletionLimit);\n    return deletedTotal;\n  }\n  \n @Transactional(&quot;transactionManager&quot;)\n  public void deleteBatch(Page&lt;Events&gt; eventsPage) { eventsRepository.deleteInBatch(eventsPage.getContent().stream().map(Events::getId).toList());\n  }\n</code></pre>\n<p>Is there a way to verify that this change creates multiple smaller locks to the database, and multiple transactions as well? I am using postgreSQL and tried to query the pg_catalog.pg_locks table, but that didn't help.</p>\n"},{"tags":["java","mysql","database","maven","javafx"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":4,"creation_date":1696927542,"post_id":77264170,"comment_id":136211924,"body_markdown":"I suggest reading [What is a stack trace, and how can I use it to debug my application errors?](https://stackoverflow.com/q/3988788/685806)","body":"I suggest reading <a href=\"https://stackoverflow.com/q/3988788/685806\">What is a stack trace, and how can I use it to debug my application errors?</a>"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":4,"creation_date":1696930730,"post_id":77264170,"comment_id":136212449,"body_markdown":"Probably your `R.getProperties` method is returning null, meaning the resource you are looking up can’t be found. You should not be looking up a resource using a file separator as the resource might be in a jar, not a file. The use of the context classloader is strange. Follow the [guide for looking up resources for JavaFX apps](https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other) (including the troubleshooting section).","body":"Probably your <code>R.getProperties</code> method is returning null, meaning the resource you are looking up can’t be found. You should not be looking up a resource using a file separator as the resource might be in a jar, not a file. The use of the context classloader is strange. Follow the <a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\">guide for looking up resources for JavaFX apps</a> (including the troubleshooting section)."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697778794,"creation_date":1697778794,"answer_id":77328446,"question_id":77264170,"body_markdown":"\r\nCaused by: java.lang.NullPointerException: inStream parameter is null\r\n\r\n...\r\n\r\nat com.bioguardian.bioguardian/com.bioguardian.bioguardian.HerbDAO.conectar(HerbDAO.java:20)\r\n\r\nat com.bioguardian.bioguardian/com.bioguardian.bioguardian.AppCtrl.&lt;init&gt;(AppCtrl.java:70)\r\n\r\n...\r\n\r\nYou need to learn how to read a stacktrace.","title":"My javafx app throws an error when trying to connect with the database","body":"<p>Caused by: java.lang.NullPointerException: inStream parameter is null</p>\n<p>...</p>\n<p>at com.bioguardian.bioguardian/com.bioguardian.bioguardian.HerbDAO.conectar(HerbDAO.java:20)</p>\n<p>at com.bioguardian.bioguardian/com.bioguardian.bioguardian.AppCtrl.(AppCtrl.java:70)</p>\n<p>...</p>\n<p>You need to learn how to read a stacktrace.</p>\n"}],"owner":{"account_id":21001758,"reputation":11,"user_id":15432416,"display_name":"HoneyPot"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697778794,"creation_date":1696927216,"question_id":77264170,"body_markdown":"Good day, people. I&#39;ve come to crash into an error that I can&#39;t find solution for yet, so I really need your help.\r\n\r\nThe program is as it follows: A desktop app made with Javafx (Maven) and Scenebuilder, that will allow the user to add, modify and erase different plants that will later be stored in a database to be shown as a list in a different screen.\r\n\r\nNow the problem comes when I try to start the connection. The error is the following:\r\n\r\n```Exception in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:118)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:580)\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1135)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\r\nCaused by: javafx.fxml.LoadException: \r\n/F:/2DAM/BioGuardian/BioGuardian/target/classes/com/bioguardian/bioguardian/main.fxml:15\r\n\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:944)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:981)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:755)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2808)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2634)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\r\n\tat com.bioguardian.bioguardian/com.bioguardian.bioguardian.App.start(App.java:16)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n\tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n\t... 1 more\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:72)\r\n\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:939)\r\n\t... 17 more\r\nCaused by: java.lang.NullPointerException: inStream parameter is null\r\n\tat java.base/java.util.Objects.requireNonNull(Objects.java:259)\r\n\tat java.base/java.util.Properties.load(Properties.java:408)\r\n\tat com.bioguardian.bioguardian/com.bioguardian.bioguardian.HerbDAO.conectar(HerbDAO.java:20)\r\n\tat com.bioguardian.bioguardian/com.bioguardian.bioguardian.AppCtrl.&lt;init&gt;(AppCtrl.java:70)\r\n\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)\r\n\t... 20 more\r\nException running application com.bioguardian.bioguardian.App\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nThe files that error call out are these:\r\n\r\nR: \r\n```\r\npackage com.bioguardian.bioguardian.util;\r\n\r\nimport java.io.File;\r\nimport java.io.InputStream;\r\nimport java.net.URL;\r\n\r\npublic class R {\r\n    public static InputStream getImage(String name) {\r\n        return Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;images&quot; + File.separator + name);\r\n    }\r\n\r\n    public static InputStream getProperties(String name) {\r\n        return Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;configuration&quot; + File.separator + name);\r\n    }\r\n\r\n    public static URL getUI(String name) {\r\n        return Thread.currentThread().getContextClassLoader().getResource(&quot;bioguardian&quot; + File.separator + name);\r\n    }\r\n}\r\n```\r\n\r\nHerbDAO:\r\n\r\n```\r\nprivate Connection conexion;\r\n    //Con esta funci&#243;n cogemos los datos de database.properties y los usamos para\r\n    //generar la conexi&#243;n sin tener que andar haciendolo a mano\r\n    public void conectar() throws ClassNotFoundException, SQLException, IOException {\r\n        Properties configuration = new Properties();\r\n        configuration.load(R.getProperties(&quot;database.properties&quot;)); //This is the line that provokes the error\r\n        String host = configuration.getProperty(&quot;host&quot;);\r\n        String port = configuration.getProperty(&quot;port&quot;);\r\n        String name = configuration.getProperty(&quot;name&quot;);\r\n        String username = configuration.getProperty(&quot;username&quot;);\r\n        String password = configuration.getProperty(&quot;password&quot;);\r\n\r\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n        conexion = DriverManager.getConnection(&quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + name + &quot;?serverTimezone=UTC&quot;,\r\n                username, password);\r\n    }\r\n```\r\n\r\nAnd AppCtrl:\r\n\r\n```\r\nprivate final HerbDAO herbDAO;\r\n\r\n    public AppCtrl(){\r\n        //Arrancamos conexion con la BBDD\r\n        herbDAO = new HerbDAO();\r\n        try{\r\n            herbDAO.conectar();\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (ClassNotFoundException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        System.out.println(System.getProperty(&quot;user.home&quot;));\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI have tried deleting and making it from scratch. Without these functions, the app works but of course, doesn&#39;t has a Database connection. I have also tried to change R&#39;s definition for the database.properties, but it didn&#39;t work either.\r\n\r\nI simply cannot understand what kind of problem can these functions be provoking, so I would thank any available help.\r\n\r\nThanks in advance!!","title":"My javafx app throws an error when trying to connect with the database","body":"<p>Good day, people. I've come to crash into an error that I can't find solution for yet, so I really need your help.</p>\n<p>The program is as it follows: A desktop app made with Javafx (Maven) and Scenebuilder, that will allow the user to add, modify and erase different plants that will later be stored in a database to be shown as a list in a different screen.</p>\n<p>Now the problem comes when I try to start the connection. The error is the following:</p>\n<pre><code>java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:118)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1135)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n    at java.base/java.lang.Thread.run(Thread.java:1583)\nCaused by: javafx.fxml.LoadException: \n/F:/2DAM/BioGuardian/BioGuardian/target/classes/com/bioguardian/bioguardian/main.fxml:15\n\n    at javafx.fxml/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\n    at javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:944)\n    at javafx.fxml/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:981)\n    at javafx.fxml/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\n    at javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:755)\n    at javafx.fxml/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2808)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2634)\n    at javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\n    at javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\n    at com.bioguardian.bioguardian/com.bioguardian.bioguardian.App.start(App.java:16)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n    at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n    at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    ... 1 more\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:72)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:502)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:486)\n    at javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:939)\n    ... 17 more\nCaused by: java.lang.NullPointerException: inStream parameter is null\n    at java.base/java.util.Objects.requireNonNull(Objects.java:259)\n    at java.base/java.util.Properties.load(Properties.java:408)\n    at com.bioguardian.bioguardian/com.bioguardian.bioguardian.HerbDAO.conectar(HerbDAO.java:20)\n    at com.bioguardian.bioguardian/com.bioguardian.bioguardian.AppCtrl.&lt;init&gt;(AppCtrl.java:70)\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:62)\n    ... 20 more\nException running application com.bioguardian.bioguardian.App\n\nProcess finished with exit code 1\n</code></pre>\n<p>The files that error call out are these:</p>\n<p>R:</p>\n<pre><code>package com.bioguardian.bioguardian.util;\n\nimport java.io.File;\nimport java.io.InputStream;\nimport java.net.URL;\n\npublic class R {\n    public static InputStream getImage(String name) {\n        return Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;images&quot; + File.separator + name);\n    }\n\n    public static InputStream getProperties(String name) {\n        return Thread.currentThread().getContextClassLoader().getResourceAsStream(&quot;configuration&quot; + File.separator + name);\n    }\n\n    public static URL getUI(String name) {\n        return Thread.currentThread().getContextClassLoader().getResource(&quot;bioguardian&quot; + File.separator + name);\n    }\n}\n</code></pre>\n<p>HerbDAO:</p>\n<pre><code>private Connection conexion;\n    //Con esta función cogemos los datos de database.properties y los usamos para\n    //generar la conexión sin tener que andar haciendolo a mano\n    public void conectar() throws ClassNotFoundException, SQLException, IOException {\n        Properties configuration = new Properties();\n        configuration.load(R.getProperties(&quot;database.properties&quot;)); //This is the line that provokes the error\n        String host = configuration.getProperty(&quot;host&quot;);\n        String port = configuration.getProperty(&quot;port&quot;);\n        String name = configuration.getProperty(&quot;name&quot;);\n        String username = configuration.getProperty(&quot;username&quot;);\n        String password = configuration.getProperty(&quot;password&quot;);\n\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        conexion = DriverManager.getConnection(&quot;jdbc:mysql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + name + &quot;?serverTimezone=UTC&quot;,\n                username, password);\n    }\n</code></pre>\n<p>And AppCtrl:</p>\n<pre><code>private final HerbDAO herbDAO;\n\n    public AppCtrl(){\n        //Arrancamos conexion con la BBDD\n        herbDAO = new HerbDAO();\n        try{\n            herbDAO.conectar();\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (ClassNotFoundException e) {\n            throw new RuntimeException(e);\n        }\n        System.out.println(System.getProperty(&quot;user.home&quot;));\n    }\n</code></pre>\n<p>I have tried deleting and making it from scratch. Without these functions, the app works but of course, doesn't has a Database connection. I have also tried to change R's definition for the database.properties, but it didn't work either.</p>\n<p>I simply cannot understand what kind of problem can these functions be provoking, so I would thank any available help.</p>\n<p>Thanks in advance!!</p>\n"},{"tags":["java","sockets","ubuntu","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1697778470,"creation_date":1574839937,"answer_id":59065157,"question_id":59046111,"body_markdown":"Apache Commons Net `FTPClient` defaults to the FTP *active* mode. The active mode hardly ever works these days due to ubiquitous firewalls and NATs (for details, see my article on [FTP active/passive connection modes](https://winscp.net/eng/docs/ftp_modes)).\r\n\r\nTo switch `FTPClient` to the *passive* mode, call [`FTPClient.enterLocalPassiveMode`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#enterLocalPassiveMode()) somewhere _after_ `FTPClient.connect`:\r\n\r\n```\r\nftpClient.connect(host);\r\nftpClient.login(login, password);\r\nftpClient.enterLocalPassiveMode();\r\n```","title":"SocketException: Connection reset while FTP upload","body":"<p>Apache Commons Net <code>FTPClient</code> defaults to the FTP <em>active</em> mode. The active mode hardly ever works these days due to ubiquitous firewalls and NATs (for details, see my article on <a href=\"https://winscp.net/eng/docs/ftp_modes\" rel=\"nofollow noreferrer\">FTP active/passive connection modes</a>).</p>\n<p>To switch <code>FTPClient</code> to the <em>passive</em> mode, call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#enterLocalPassiveMode()\" rel=\"nofollow noreferrer\"><code>FTPClient.enterLocalPassiveMode</code></a> somewhere <em>after</em> <code>FTPClient.connect</code>:</p>\n<pre><code>ftpClient.connect(host);\nftpClient.login(login, password);\nftpClient.enterLocalPassiveMode();\n</code></pre>\n"}],"owner":{"account_id":5909904,"reputation":2554,"user_id":4650497,"accept_rate":88,"display_name":"Krzysztof Majewski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2981,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59065157,"answer_count":1,"score":3,"last_activity_date":1697778470,"creation_date":1574754776,"question_id":59046111,"body_markdown":"I am trying to upload a file to an FTP server.  \r\nThis is my code:\r\n\r\n    FTPClient ftpClient = new FTPClient();\r\n    try {\r\n        List&lt;PoiCmsRule&gt; appPois = getAllRules();\r\n        try (FileWriter writer = new FileWriter(backupFile)) {\r\n            new Gson().toJson(backupData, writer);\r\n        }\r\n        try (FileInputStream fis = new FileInputStream(backupFile)) {\r\n            ftpClient.connect(host);\r\n            ftpClient.login(login, password);\r\n            ftpClient.storeFile(&quot;backup.json&quot;, fis);\r\n            ftpClient.logout();\r\n        }\r\n    } catch (Exception e) {\r\n        log.error(e.getMessage(), e);\r\n    } finally {\r\n        try {\r\n            ftpClient.disconnect();\r\n        } catch (IOException e) {\r\n            log.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\nAnd it works perfectly fine when I run this on localhost. But when I run in on server I get this exception:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Caused by: java.net.SocketException: Connection reset\r\n    \tat java.base/java.net.SocketInputStream.read(SocketInputStream.java:186)\r\n    \tat java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)\r\n    \tat java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\r\n    \tat java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\r\n\r\nI think it indicates I might have some problems with the firewall or proxy.\r\n\r\nThis is a Spring Boot app run on the Ubuntu server with Nginx as a proxy.\r\n\r\nHow can I find what is causing this exception?\r\n\r\n---\r\n\r\nLogs from a successful connection with command-line `ftp` in passive mode:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    ubuntu@ip-server:~$ ftp -p -d my_host\r\n    Connected to my_host\r\n    220 FTP-Server\r\n    ftp: setsockopt: Bad file descriptor\r\n    Name (my_host): username\r\n    ---&gt; USER username\r\n    331 Please specify the password.\r\n    Password:\r\n    ---&gt; PASS XXXX\r\n    230 Login successful.\r\n    ---&gt; SYST\r\n    215 UNIX Type: L8\r\n    Remote system type is UNIX.\r\n    Using binary mode to transfer files.\r\n    ftp&gt; ls\r\n    ftp: setsockopt (ignored): Permission denied\r\n    ---&gt; PASV\r\n    227 Entering Passive Mode (153,92,207,128,127,65)\r\n    ---&gt; LIST\r\n    150 Here comes the directory listing.\r\n    // file list\r\n    226 Directory send OK.\r\n    ftp&gt;","title":"SocketException: Connection reset while FTP upload","body":"<p>I am trying to upload a file to an FTP server.<br>\nThis is my code:</p>\n\n<pre><code>FTPClient ftpClient = new FTPClient();\ntry {\n    List&lt;PoiCmsRule&gt; appPois = getAllRules();\n    try (FileWriter writer = new FileWriter(backupFile)) {\n        new Gson().toJson(backupData, writer);\n    }\n    try (FileInputStream fis = new FileInputStream(backupFile)) {\n        ftpClient.connect(host);\n        ftpClient.login(login, password);\n        ftpClient.storeFile(\"backup.json\", fis);\n        ftpClient.logout();\n    }\n} catch (Exception e) {\n    log.error(e.getMessage(), e);\n} finally {\n    try {\n        ftpClient.disconnect();\n    } catch (IOException e) {\n        log.error(e.getMessage(), e);\n    }\n}\n</code></pre>\n\n<p>And it works perfectly fine when I run this on localhost. But when I run in on server I get this exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: java.net.SocketException: Connection reset\n    at java.base/java.net.SocketInputStream.read(SocketInputStream.java:186)\n    at java.base/java.net.SocketInputStream.read(SocketInputStream.java:140)\n    at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:284)\n    at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:326)\n</code></pre>\n\n<p>I think it indicates I might have some problems with the firewall or proxy.</p>\n\n<p>This is a Spring Boot app run on the Ubuntu server with Nginx as a proxy.</p>\n\n<p>How can I find what is causing this exception?</p>\n\n<hr>\n\n<p>Logs from a successful connection with command-line <code>ftp</code> in passive mode:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ubuntu@ip-server:~$ ftp -p -d my_host\nConnected to my_host\n220 FTP-Server\nftp: setsockopt: Bad file descriptor\nName (my_host): username\n---&gt; USER username\n331 Please specify the password.\nPassword:\n---&gt; PASS XXXX\n230 Login successful.\n---&gt; SYST\n215 UNIX Type: L8\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp&gt; ls\nftp: setsockopt (ignored): Permission denied\n---&gt; PASV\n227 Entering Passive Mode (153,92,207,128,127,65)\n---&gt; LIST\n150 Here comes the directory listing.\n// file list\n226 Directory send OK.\nftp&gt;\n</code></pre>\n"},{"tags":["java","ftp"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697778457,"creation_date":1517210765,"answer_id":48496320,"question_id":48494771,"body_markdown":"Use `easyFTP.getFtpClient()` to get an underlying instance of Apache [`FTPClient` class](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html). And call [`enterLocalPassiveMode()`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#enterLocalPassiveMode()) on that:\r\n\r\n    ftp.getFtpClient().enterLocalPassiveMode();\r\n\r\n---\r\n\r\n*Though I do not really see the point of using `easyFTP`. It adds hardly anything to `FTPClient` functionality. Use `FTPClient` directly.*","title":"FTP passive mode with easyFTP","body":"<p>Use <code>easyFTP.getFtpClient()</code> to get an underlying instance of Apache <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html\" rel=\"nofollow noreferrer\"><code>FTPClient</code> class</a>. And call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#enterLocalPassiveMode()\" rel=\"nofollow noreferrer\"><code>enterLocalPassiveMode()</code></a> on that:</p>\n<pre><code>ftp.getFtpClient().enterLocalPassiveMode();\n</code></pre>\n<hr />\n<p><em>Though I do not really see the point of using <code>easyFTP</code>. It adds hardly anything to <code>FTPClient</code> functionality. Use <code>FTPClient</code> directly.</em></p>\n"}],"owner":{"account_id":11493783,"reputation":51,"user_id":8423817,"display_name":"pere plop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697778457,"creation_date":1517202820,"question_id":48494771,"body_markdown":"I am using [easyFTP][1] for upload file in android.this liberty  for transfer use active mode now want use passive mode but don&#39;t find passive mode\r\n\r\n    ftp = new easyFTP();\r\n    ftp.connect(&quot;ip&quot;, &quot;user&quot;, &quot;pass&quot;);\r\n                \r\n\r\n  [1]: https://github.com/linkindrew/easyFTP","title":"FTP passive mode with easyFTP","body":"<p>I am using <a href=\"https://github.com/linkindrew/easyFTP\" rel=\"nofollow noreferrer\">easyFTP</a> for upload file in android.this liberty  for transfer use active mode now want use passive mode but don't find passive mode</p>\n\n<pre><code>ftp = new easyFTP();\nftp.connect(\"ip\", \"user\", \"pass\");\n</code></pre>\n"},{"tags":["java","ftp","ftp-client","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":2332280,"reputation":2091,"user_id":2140633,"accept_rate":75,"display_name":"Udith Gunaratna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569844014,"creation_date":1569844014,"answer_id":58167293,"question_id":58167086,"body_markdown":"According to the [documentation of the `FTPClient.retrieveFileStream()` method][1],\r\n\r\n&gt; You must close the InputStream when you finish reading from it. The InputStream itself will take care of closing the parent data connection socket upon being closed.\r\n\r\nWhen you close the stream, your client connection will be closed too. So instead of using the same client over and over, you need to create a new client connection for each file.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)","title":"Reading multiple files in loop from FTP server using Apache Commons Net FTPClient","body":"<p>According to the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)\" rel=\"nofollow noreferrer\">documentation of the <code>FTPClient.retrieveFileStream()</code> method</a>,</p>\n\n<blockquote>\n  <p>You must close the InputStream when you finish reading from it. The InputStream itself will take care of closing the parent data connection socket upon being closed.</p>\n</blockquote>\n\n<p>When you close the stream, your client connection will be closed too. So instead of using the same client over and over, you need to create a new client connection for each file.</p>\n"},{"tags":[],"owner":{"account_id":12209596,"reputation":100,"user_id":8911724,"display_name":"Mohamed Ismail M"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1569844258,"creation_date":1569844258,"answer_id":58167361,"question_id":58167086,"body_markdown":" 1. I didn&#39;t see the output stream is not properly closed. \r\n 2. finalBytes is o bytes?\r\n 3. where you defined the buffer variable?\r\n\r\nplease log the path so that we can see the path is correct or not. I guess the stream which is not properly closed makes the issue\r\n\r\n ","title":"Reading multiple files in loop from FTP server using Apache Commons Net FTPClient","body":"<ol>\n<li>I didn't see the output stream is not properly closed. </li>\n<li>finalBytes is o bytes?</li>\n<li>where you defined the buffer variable?</li>\n</ol>\n\n<p>please log the path so that we can see the path is correct or not. I guess the stream which is not properly closed makes the issue</p>\n"},{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697778433,"creation_date":1569844358,"answer_id":58167390,"question_id":58167086,"body_markdown":"You have to call [`FTPClient.completePendingCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()) and close the input stream, as the documentation for [`FTPClient.retrieveFileStream`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)) says:\r\n\r\n&gt; Returns an InputStream from which a named file from the server\r\n can be read.  If the current file type is ASCII, the returned\r\n InputStream will convert line separators in the file to\r\n the local representation.  You must close the InputStream when you\r\n finish reading from it.  The InputStream itself will take care of\r\n closing the parent data connection socket upon being closed.\r\n&gt;\r\n&gt; &lt;b&gt;To finalize the file transfer you must call [`completePendingCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()) and\r\n check its return value to verify success.&lt;/b&gt;\r\n If this is not done, subsequent commands may behave unexpectedly.\r\n\r\n---\r\n\r\n```\r\ninStream = client.retrieveFileStream(path);\r\ntry {\r\n    while ((len = inStream.read(buffer)) != -1) {\r\n        // write bytes from the buffer into output stream\r\n        os.write(buffer, 0, len);\r\n    }\r\n    finalBytes = os.toByteArray();\r\n} finally {\r\n    inStream.close()\r\n    if (!client.completePendingCommand()) {\r\n        // error\r\n    }\r\n}\r\n```\r\n\r\n---\r\n\r\n*Btw, there are better ways for copying from `InputStream` to `OutputStream`:*  \r\n*https://stackoverflow.com/q/43157/850848*\r\n","title":"Reading multiple files in loop from FTP server using Apache Commons Net FTPClient","body":"<p>You have to call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()\" rel=\"nofollow noreferrer\"><code>FTPClient.completePendingCommand</code></a> and close the input stream, as the documentation for <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFileStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.retrieveFileStream</code></a> says:</p>\n<blockquote>\n<p>Returns an InputStream from which a named file from the server\ncan be read.  If the current file type is ASCII, the returned\nInputStream will convert line separators in the file to\nthe local representation.  You must close the InputStream when you\nfinish reading from it.  The InputStream itself will take care of\nclosing the parent data connection socket upon being closed.</p>\n<p><b>To finalize the file transfer you must call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()\" rel=\"nofollow noreferrer\"><code>completePendingCommand</code></a> and\ncheck its return value to verify success.</b>\nIf this is not done, subsequent commands may behave unexpectedly.</p>\n</blockquote>\n<hr />\n<pre><code>inStream = client.retrieveFileStream(path);\ntry {\n    while ((len = inStream.read(buffer)) != -1) {\n        // write bytes from the buffer into output stream\n        os.write(buffer, 0, len);\n    }\n    finalBytes = os.toByteArray();\n} finally {\n    inStream.close()\n    if (!client.completePendingCommand()) {\n        // error\n    }\n}\n</code></pre>\n<hr />\n<p><em>Btw, there are better ways for copying from <code>InputStream</code> to <code>OutputStream</code>:</em><br />\n<em><a href=\"https://stackoverflow.com/q/43157/850848\">Easy way to write contents of a Java InputStream to an OutputStream</a></em></p>\n"}],"owner":{"account_id":6911888,"reputation":161,"user_id":5307407,"accept_rate":70,"display_name":"Nitin Rathod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1455,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1697778433,"creation_date":1569843211,"question_id":58167086,"body_markdown":"I have list of files that needs to be read from FTP server.\r\nI have a method `readFile(String path, FTPClient client)` which reads and prints the file.\r\n\r\n    public byte[] readFile(String path,FTPClient client){\r\n        InputStream inStream = null;\r\n\t\tByteArrayOutputStream os = null;\r\n        byte[] finalBytes = new byte[0];\r\n\t\t\t\tint reply;\r\n        int len;\r\n        byte[] buffer = new byte[1024];\r\n        try{\r\n\t\t\tos = new ByteArrayOutputStream();\r\n\t\t\tinStream = client.retrieveFileStream(path);\r\n\t\t\treply = client.getReplyCode();\r\n\t\t\tlog.warn(&quot;In getFTPfilebytes() :: Reply code -&quot;+reply);\r\n\t\t\t\r\n\t\t\twhile ((len = inStream.read(buffer)) != -1) {\r\n\t\t\t\t\t\t// write bytes from the buffer into output stream\r\n\t\t\t\t\t\tos.write(buffer, 0, len);\r\n\t\t\t\t\t}\r\n\t\t\tfinalBytes = os.toByteArray();\r\n        \r\n        if(inStream == null){\r\n\t\t\tthrow new Exception(&quot;File not found&quot;);\r\n\t\t}\r\n\t\t\r\n        inStream.close();\r\n\t\t}catch(Exception e){\r\n\t\t\r\n\t\t}finally{\r\n\t\t\ttry{ inStream.close();} catch(Exception e){}\r\n\t\t}\r\n\t\treturn finalBytes;\r\n\r\n    }\r\n\t\r\nI am calling above method in loop of list which contains strings of file path.\r\n\r\nIssue - In loop only first file is getting read properly. Afterwards, it does not read file and throws an exception. `inStream` gives NULL for second iteration/second file. Also while iterating first file reply code after `retrieveFileStream` is *&quot;125(Data connection already open; transfer starting.)*&quot;\r\n\r\nIn second iteration it gives *&quot;200 (The requested action has been successfully completed.)&quot;*\r\n\r\nI am not able to understand what is wrong here.\r\nHave not closing `inputstream` connection properly? ","title":"Reading multiple files in loop from FTP server using Apache Commons Net FTPClient","body":"<p>I have list of files that needs to be read from FTP server.\nI have a method <code>readFile(String path, FTPClient client)</code> which reads and prints the file.</p>\n\n<pre><code>public byte[] readFile(String path,FTPClient client){\n    InputStream inStream = null;\n    ByteArrayOutputStream os = null;\n    byte[] finalBytes = new byte[0];\n            int reply;\n    int len;\n    byte[] buffer = new byte[1024];\n    try{\n        os = new ByteArrayOutputStream();\n        inStream = client.retrieveFileStream(path);\n        reply = client.getReplyCode();\n        log.warn(\"In getFTPfilebytes() :: Reply code -\"+reply);\n\n        while ((len = inStream.read(buffer)) != -1) {\n                    // write bytes from the buffer into output stream\n                    os.write(buffer, 0, len);\n                }\n        finalBytes = os.toByteArray();\n\n    if(inStream == null){\n        throw new Exception(\"File not found\");\n    }\n\n    inStream.close();\n    }catch(Exception e){\n\n    }finally{\n        try{ inStream.close();} catch(Exception e){}\n    }\n    return finalBytes;\n\n}\n</code></pre>\n\n<p>I am calling above method in loop of list which contains strings of file path.</p>\n\n<p>Issue - In loop only first file is getting read properly. Afterwards, it does not read file and throws an exception. <code>inStream</code> gives NULL for second iteration/second file. Also while iterating first file reply code after <code>retrieveFileStream</code> is <em>\"125(Data connection already open; transfer starting.)</em>\"</p>\n\n<p>In second iteration it gives <em>\"200 (The requested action has been successfully completed.)\"</em></p>\n\n<p>I am not able to understand what is wrong here.\nHave not closing <code>inputstream</code> connection properly? </p>\n"},{"tags":["java","unit-testing","junit","mocking","mockito"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1697782325,"post_id":77328433,"comment_id":136325282,"body_markdown":"Well ... The error message is very clear. You are not calling `when` on a mock method. You are calling it on a normal object method. Annotating a variable with `@Mock` will have Mockito create a mock object for you. But you are creating your own in the setup method. Remove that.","body":"Well ... The error message is very clear. You are not calling <code>when</code> on a mock method. You are calling it on a normal object method. Annotating a variable with <code>@Mock</code> will have Mockito create a mock object for you. But you are creating your own in the setup method. Remove that."},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1697789828,"post_id":77328433,"comment_id":136326455,"body_markdown":"Well, it&#39;s not a mock: `apiClientUtilsMock = new ApiClientUtils(new ApiClientTimeoutConfiguration());` – you are assigning a regular instance and overwriting the reference to the injected `@Mock`. There&#39;s a dupe question","body":"Well, it&#39;s not a mock: <code>apiClientUtilsMock = new ApiClientUtils(new ApiClientTimeoutConfiguration());</code> – you are assigning a regular instance and overwriting the reference to the injected <code>@Mock</code>. There&#39;s a dupe question"},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1697789891,"post_id":77328433,"comment_id":136326466,"body_markdown":"Also, you must not mix `@Mock` (Mockito) and `@MockBean` (Spring Boot). MockitoExtension does not know about `MockBean`","body":"Also, you must not mix <code>@Mock</code> (Mockito) and <code>@MockBean</code> (Spring Boot). MockitoExtension does not know about <code>MockBean</code>"}],"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1697884101,"answer_count":0,"score":0,"last_activity_date":1697778407,"creation_date":1697778407,"question_id":77328433,"body_markdown":"I have looked at many SO questions and answers on this error and tried the solutions specified, but had no luck so far. So the issue is &quot;when() requires an argument which has to be &#39;a method call on a mock&quot;. I cant figure out what is wrong.Below is my test class :\r\n\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class CustomerDaoConfigurationTest {\r\n    \r\n        private CustomerDaoConfiguration customerDaoConfiguration;\r\n    \r\n        private CustomerApiProperties properties;\r\n        @Mock\r\n        private ApiClientUtils apiClientUtilsMock;\r\n        @MockBean\r\n        private ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\r\n    \r\n    \r\n        @BeforeEach\r\n        void setup() {\r\n            apiClientUtilsMock = new ApiClientUtils(new ApiClientTimeoutConfiguration());\r\n    \r\n            properties = new CustomerApiProperties();\r\n            properties.setBaseUrl(&quot;MockBaseUrl&quot;);\r\n            properties.setOauth(new OAuthProperties(&quot;token-url&quot;, &quot;client-id&quot;, &quot;client-secret&quot;));\r\n    \r\n            customerDaoConfiguration = new CustomerDaoConfiguration(properties, apiClientUtilsMock, apiClientTimeoutConfiguration);\r\n    \r\n        }\r\n    \r\n        @Test\r\n        void shouldCreateValidRestTemplateWhenPropertiesAreProvided() {\r\n    \r\n            ClientCredentialsResourceDetails clientCredentialsResourceDetails = new ClientCredentialsResourceDetails();\r\n            clientCredentialsResourceDetails.setClientSecret(&quot;client-secret&quot;);\r\n            clientCredentialsResourceDetails.setClientId(&quot;client-id&quot;);\r\n            clientCredentialsResourceDetails.setTokenName(&quot;token-name&quot;);\r\n            clientCredentialsResourceDetails.setAccessTokenUri(&quot;token-url&quot;);\r\n    \r\n            OAuthProperties oauth = properties.getOauth();\r\n    \r\n            List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\r\n            messageConverters.add(new JsonApiHttpMessageConverter(new ResourceConverter(), new ObjectMapper()));\r\n    \r\n            when(apiClientUtilsMock.createClientCredentialsResourceDetails(oauth)).thenReturn(clientCredentialsResourceDetails);\r\n    \r\n            RestTemplate createdRestTemplate = customerDaoConfiguration.customerRestTemplate(new SimpleClientHttpRequestFactory(), messageConverters);\r\n    \r\n            assertThat(createdRestTemplate.getMessageConverters().size(), is(1));\r\n            HttpMessageConverter&lt;?&gt; messageConverter = createdRestTemplate.getMessageConverters().get(0);\r\n            assertThat(messageConverter, is(instanceOf(JsonApiHttpMessageConverter.class)));\r\n    \r\n        }\r\n    }\r\n\r\nI get the exception on this line : \r\n\r\n    when(apiClientUtilsMock.createClientCredentialsResourceDetails(oauth)).thenReturn(clientCredentialsResourceDetails);\r\n\r\nI am not mocking a final/prvate method.\r\nThe class I am testing is :\r\n\r\n  \r\n\r\n      @RequiredArgsConstructor\r\n        @Import(CustomerApiProperties.class)\r\n        @Configuration\r\n        public class CustomerDaoConfiguration {\r\n        \r\n            private final CustomerApiProperties properties;\r\n            private final ApiClientUtils apiClientUtils;\r\n            private final ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\r\n        \r\n        \r\n            @Bean\r\n            public RestTemplate customerRestTemplate(ClientHttpRequestFactory clientHttpRequestFactory, List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters) {\r\n                ClientCredentialsResourceDetails resourceDetails = apiClientUtils.createClientCredentialsResourceDetails(properties.getOauth());\r\n                return new RestTemplateBuilder()\r\n                        .requestFactory(() -&gt; clientHttpRequestFactory)\r\n                        .rootUri(properties.getBaseUrl())\r\n                        .messageConverters(messageConverters)\r\n                        .setReadTimeout(Duration.ofMillis(apiClientTimeoutConfiguration.getReadTimeout()))\r\n                        .setConnectTimeout(Duration.ofMillis(apiClientTimeoutConfiguration.getConnectTimeout()))\r\n                        .configure(new OAuth2RestTemplate(resourceDetails));\r\n            }\r\n        }\r\n\r\nAnd also\r\n    \r\n    @RequiredArgsConstructor\r\n    @Component\r\n    public class ApiClientUtils {\r\n    \r\n        private final ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\r\n    \r\n        public ClientCredentialsResourceDetails createClientCredentialsResourceDetails(OAuthProperties oauth) {\r\n            ClientCredentialsResourceDetails resourceDetails = new ClientCredentialsResourceDetails();\r\n            resourceDetails.setAccessTokenUri(oauth.getTokenUrl());\r\n            resourceDetails.setClientId(oauth.getClientId());\r\n            resourceDetails.setClientSecret(oauth.getClientSecret());\r\n            return resourceDetails;\r\n        }\r\n    \r\n    }","title":"Error when running unit test with mock - &quot;when() requires an argument which has to be &#39;a method call on a mock&quot;","body":"<p>I have looked at many SO questions and answers on this error and tried the solutions specified, but had no luck so far. So the issue is &quot;when() requires an argument which has to be 'a method call on a mock&quot;. I cant figure out what is wrong.Below is my test class :</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass CustomerDaoConfigurationTest {\n\n    private CustomerDaoConfiguration customerDaoConfiguration;\n\n    private CustomerApiProperties properties;\n    @Mock\n    private ApiClientUtils apiClientUtilsMock;\n    @MockBean\n    private ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\n\n\n    @BeforeEach\n    void setup() {\n        apiClientUtilsMock = new ApiClientUtils(new ApiClientTimeoutConfiguration());\n\n        properties = new CustomerApiProperties();\n        properties.setBaseUrl(&quot;MockBaseUrl&quot;);\n        properties.setOauth(new OAuthProperties(&quot;token-url&quot;, &quot;client-id&quot;, &quot;client-secret&quot;));\n\n        customerDaoConfiguration = new CustomerDaoConfiguration(properties, apiClientUtilsMock, apiClientTimeoutConfiguration);\n\n    }\n\n    @Test\n    void shouldCreateValidRestTemplateWhenPropertiesAreProvided() {\n\n        ClientCredentialsResourceDetails clientCredentialsResourceDetails = new ClientCredentialsResourceDetails();\n        clientCredentialsResourceDetails.setClientSecret(&quot;client-secret&quot;);\n        clientCredentialsResourceDetails.setClientId(&quot;client-id&quot;);\n        clientCredentialsResourceDetails.setTokenName(&quot;token-name&quot;);\n        clientCredentialsResourceDetails.setAccessTokenUri(&quot;token-url&quot;);\n\n        OAuthProperties oauth = properties.getOauth();\n\n        List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;&gt;();\n        messageConverters.add(new JsonApiHttpMessageConverter(new ResourceConverter(), new ObjectMapper()));\n\n        when(apiClientUtilsMock.createClientCredentialsResourceDetails(oauth)).thenReturn(clientCredentialsResourceDetails);\n\n        RestTemplate createdRestTemplate = customerDaoConfiguration.customerRestTemplate(new SimpleClientHttpRequestFactory(), messageConverters);\n\n        assertThat(createdRestTemplate.getMessageConverters().size(), is(1));\n        HttpMessageConverter&lt;?&gt; messageConverter = createdRestTemplate.getMessageConverters().get(0);\n        assertThat(messageConverter, is(instanceOf(JsonApiHttpMessageConverter.class)));\n\n    }\n}\n</code></pre>\n<p>I get the exception on this line :</p>\n<pre><code>when(apiClientUtilsMock.createClientCredentialsResourceDetails(oauth)).thenReturn(clientCredentialsResourceDetails);\n</code></pre>\n<p>I am not mocking a final/prvate method.\nThe class I am testing is :</p>\n<pre><code>  @RequiredArgsConstructor\n    @Import(CustomerApiProperties.class)\n    @Configuration\n    public class CustomerDaoConfiguration {\n    \n        private final CustomerApiProperties properties;\n        private final ApiClientUtils apiClientUtils;\n        private final ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\n    \n    \n        @Bean\n        public RestTemplate customerRestTemplate(ClientHttpRequestFactory clientHttpRequestFactory, List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters) {\n            ClientCredentialsResourceDetails resourceDetails = apiClientUtils.createClientCredentialsResourceDetails(properties.getOauth());\n            return new RestTemplateBuilder()\n                    .requestFactory(() -&gt; clientHttpRequestFactory)\n                    .rootUri(properties.getBaseUrl())\n                    .messageConverters(messageConverters)\n                    .setReadTimeout(Duration.ofMillis(apiClientTimeoutConfiguration.getReadTimeout()))\n                    .setConnectTimeout(Duration.ofMillis(apiClientTimeoutConfiguration.getConnectTimeout()))\n                    .configure(new OAuth2RestTemplate(resourceDetails));\n        }\n    }\n</code></pre>\n<p>And also</p>\n<pre><code>@RequiredArgsConstructor\n@Component\npublic class ApiClientUtils {\n\n    private final ApiClientTimeoutConfiguration apiClientTimeoutConfiguration;\n\n    public ClientCredentialsResourceDetails createClientCredentialsResourceDetails(OAuthProperties oauth) {\n        ClientCredentialsResourceDetails resourceDetails = new ClientCredentialsResourceDetails();\n        resourceDetails.setAccessTokenUri(oauth.getTokenUrl());\n        resourceDetails.setClientId(oauth.getClientId());\n        resourceDetails.setClientSecret(oauth.getClientSecret());\n        return resourceDetails;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","ftp","upload","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697778359,"creation_date":1604605251,"answer_id":64704244,"question_id":64692492,"body_markdown":"A file upload initiated by [`FTPClient.storeFileStream` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)) has to be finished by closing the stream and calling [`FTPClient.completePendingCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()):\r\n\r\n&gt; You must close the OutputStream when you finish writing to it. The OutputStream itself will take care of closing the parent data connection socket upon being closed.\r\n&gt;\r\n&gt; **To finalize the file transfer you must call [`completePendingCommand`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()) and check its return value to verify success.** If this is not done, subsequent commands may behave unexpectedly.","title":"Files uploaded using Apache Common Net FTPClient.storeFileStream are corrupted","body":"<p>A file upload initiated by <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFileStream</code> method</a> has to be finished by closing the stream and calling <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()\" rel=\"nofollow noreferrer\"><code>FTPClient.completePendingCommand</code></a>:</p>\n<blockquote>\n<p>You must close the OutputStream when you finish writing to it. The OutputStream itself will take care of closing the parent data connection socket upon being closed.</p>\n<p><strong>To finalize the file transfer you must call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#completePendingCommand()\" rel=\"nofollow noreferrer\"><code>completePendingCommand</code></a> and check its return value to verify success.</strong> If this is not done, subsequent commands may behave unexpectedly.</p>\n</blockquote>\n"}],"owner":{"account_id":12092279,"reputation":25,"user_id":8837793,"display_name":"Selvi Manafov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64704244,"answer_count":1,"score":1,"last_activity_date":1697778359,"creation_date":1604559554,"question_id":64692492,"body_markdown":"I wrote a code for compressing database file (.zip) and uploading to an FTP server. When I download that from server, files are corrupted. What can be the reason for that?\r\n\r\nCode:\r\n```        \r\nFTPClient ftpClient = new FTPClient();      \r\n\r\nftpClient.connect(server, port);\r\nftpClient.login(user, pass);\r\nftpClient.enterLocalPassiveMode();\r\n\r\nftpClient.setFileType(FTP.BINARY_FILE_TYPE);                 \r\n  \r\nDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy.MM.dd&quot;);  \r\nLocalDateTime now = LocalDateTime.now(); \r\nString currentDate = dtf.format(now);\r\n         \r\nString srcFilename = file;\r\n\r\nString remoteFile = &quot;STORE_&quot; + currentDate + &quot;.zip&quot;;\r\n       \r\ntry {\r\n    byte[] buffer = new byte[1024];\r\n    OutputStream fos = ftpClient.storeFileStream(remoteFile);\r\n    try (ZipOutputStream zos = new ZipOutputStream(fos)) {\r\n        File srcFile = new File(srcFilename);\r\n        try (FileInputStream fis = new FileInputStream(srcFile)) {\r\n            zos.putNextEntry(new ZipEntry(srcFile.getName()));\r\n            int length;\r\n            while ((length = fis.read(buffer)) &gt; 0) {\r\n                zos.write(buffer, 0, length);\r\n            }\r\n            zos.closeEntry();\r\n        }\r\n    }\r\n}\r\ncatch (IOException ioe) {\r\n    System.out.println(&quot;Error creating zip file&quot; + ioe);\r\n}\r\n\r\nif (ftpClient.isConnected()) {\r\n        ftpClient.logout();\r\n        ftpClient.disconnect();\r\n}\r\n```  ","title":"Files uploaded using Apache Common Net FTPClient.storeFileStream are corrupted","body":"<p>I wrote a code for compressing database file (.zip) and uploading to an FTP server. When I download that from server, files are corrupted. What can be the reason for that?</p>\n<p>Code:</p>\n<pre><code>FTPClient ftpClient = new FTPClient();      \n\nftpClient.connect(server, port);\nftpClient.login(user, pass);\nftpClient.enterLocalPassiveMode();\n\nftpClient.setFileType(FTP.BINARY_FILE_TYPE);                 \n  \nDateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy.MM.dd&quot;);  \nLocalDateTime now = LocalDateTime.now(); \nString currentDate = dtf.format(now);\n         \nString srcFilename = file;\n\nString remoteFile = &quot;STORE_&quot; + currentDate + &quot;.zip&quot;;\n       \ntry {\n    byte[] buffer = new byte[1024];\n    OutputStream fos = ftpClient.storeFileStream(remoteFile);\n    try (ZipOutputStream zos = new ZipOutputStream(fos)) {\n        File srcFile = new File(srcFilename);\n        try (FileInputStream fis = new FileInputStream(srcFile)) {\n            zos.putNextEntry(new ZipEntry(srcFile.getName()));\n            int length;\n            while ((length = fis.read(buffer)) &gt; 0) {\n                zos.write(buffer, 0, length);\n            }\n            zos.closeEntry();\n        }\n    }\n}\ncatch (IOException ioe) {\n    System.out.println(&quot;Error creating zip file&quot; + ioe);\n}\n\nif (ftpClient.isConnected()) {\n        ftpClient.logout();\n        ftpClient.disconnect();\n}\n</code></pre>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697778324,"creation_date":1587734815,"answer_id":61409505,"question_id":61383488,"body_markdown":"For me your code works, so I do not know why it does not for you.\r\n\r\nAnyway, as the [`FTPClient.storeFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)) works you – You can use that with an in-memory stream, like this:\r\n\r\n```\r\nInputStream is = new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8));\r\nftpClient.storeFile(filename, is);\r\n```\r\n\r\n---\r\n\r\nThe answer to your original question is here:  \r\nhttps://stackoverflow.com/q/31550862/850848\r\n\r\n---\r\n\r\n*Btw, I&#39;m pretty sure the documentation is wrong. It is ok to call [`FTPClient.storeFileStream`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)) when the file does not exist.*\r\n\r\n","title":"Apache FTPClient: Write text from memory to file on FTP server","body":"<p>For me your code works, so I do not know why it does not for you.</p>\n<p>Anyway, as the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code></a> works you – You can use that with an in-memory stream, like this:</p>\n<pre><code>InputStream is = new ByteArrayInputStream(text.getBytes(StandardCharsets.UTF_8));\nftpClient.storeFile(filename, is);\n</code></pre>\n<hr />\n<p>The answer to your original question is here:<br />\n<a href=\"https://stackoverflow.com/q/31550862/850848\">Apache Commons FTP storeFileStream returns null</a></p>\n<hr />\n<p><em>Btw, I'm pretty sure the documentation is wrong. It is ok to call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFileStream(java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFileStream</code></a> when the file does not exist.</em></p>\n"},{"tags":[],"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588063417,"creation_date":1588063417,"answer_id":61476090,"question_id":61383488,"body_markdown":"As MartinPrikryl already mentioned in the comments, don&#39;t call `enterRemotePassiveMode`, it was the reason `OutputStream os` was `null` every time.\r\n\r\nWhat I did to fix the problem (file was created but not written to):\r\n\r\n 1. I removed the `BufferedReader` as it&#39;s not necessary.\r\n 2. The `text` I use looked okay but it is worth checking that it&#39;s still okay right before sending. This is because building a lot in Android Studio (I&#39;ve also experienced this in other IDEs) can get variables &quot;stuck&quot; with their old value, which can be fixed by cleaning the project and/or restarting Android Studio.\r\n\r\nThe working code:\r\n\r\n    login(); //logs in and leaves the connection open\r\n    ftpClient.enterLocalPassiveMode();\r\n    \r\n    if(ftpClient.changeWorkingDirectory(folder)) {\r\n        OutputStream os = ftpClient.storeFileStream(File.separator+filename);\r\n        OutputStreamWriter osw = new OutputStreamWriter(os,StandardCharsets.UTF_8);\r\n        osw.write(text);\r\n        osw.close(); //Better use this in a &quot;finally&quot;\r\n    \r\n        if(ftpClient.completePendingCommand()) {\r\n            //Success!\r\n        } else {\r\n            //Failed\r\n        }\r\n    } else {\r\n        //Show error because folder doesn&#39;t exist\r\n    }\r\n\r\nThe first paragraph inside the `if` can also be replaced by MartinPrikryl&#39;s code (`storeFile` instead of `storeFileStream`).","title":"Apache FTPClient: Write text from memory to file on FTP server","body":"<p>As MartinPrikryl already mentioned in the comments, don't call <code>enterRemotePassiveMode</code>, it was the reason <code>OutputStream os</code> was <code>null</code> every time.</p>\n\n<p>What I did to fix the problem (file was created but not written to):</p>\n\n<ol>\n<li>I removed the <code>BufferedReader</code> as it's not necessary.</li>\n<li>The <code>text</code> I use looked okay but it is worth checking that it's still okay right before sending. This is because building a lot in Android Studio (I've also experienced this in other IDEs) can get variables \"stuck\" with their old value, which can be fixed by cleaning the project and/or restarting Android Studio.</li>\n</ol>\n\n<p>The working code:</p>\n\n<pre><code>login(); //logs in and leaves the connection open\nftpClient.enterLocalPassiveMode();\n\nif(ftpClient.changeWorkingDirectory(folder)) {\n    OutputStream os = ftpClient.storeFileStream(File.separator+filename);\n    OutputStreamWriter osw = new OutputStreamWriter(os,StandardCharsets.UTF_8);\n    osw.write(text);\n    osw.close(); //Better use this in a \"finally\"\n\n    if(ftpClient.completePendingCommand()) {\n        //Success!\n    } else {\n        //Failed\n    }\n} else {\n    //Show error because folder doesn't exist\n}\n</code></pre>\n\n<p>The first paragraph inside the <code>if</code> can also be replaced by MartinPrikryl's code (<code>storeFile</code> instead of <code>storeFileStream</code>).</p>\n"}],"owner":{"account_id":2294271,"reputation":1861,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697778324,"creation_date":1587633157,"question_id":61383488,"body_markdown":"My Android app (min API 24, target API 27, Java 8) uses Apache&#39;s `FTPClient` to connect to an FTP server. At the moment I&#39;m trying to write some text to a file on the server (the file doesn&#39;t exist on the phone!) but failing:\r\n\r\n    login(); //logs in and leaves the connection open\r\n    ftpClient.enterLocalPassiveMode();\r\n    \r\n    if(ftpClient.changeWorkingDirectory(folder)) {\r\n        OutputStream os = ftpClient.storeFileStream(File.separator+filename);\r\n        BufferedWriter bw = new BufferedWriter((new OutputStreamWriter(os,StandardCharsets.UTF_8)));\r\n        bw.write(text);\r\n        bw.close();\r\n    \r\n        if(ftpClient.completePendingCommand()) {\r\n            //Success!\r\n        } else {\r\n            //Failed\r\n        }\r\n    } else {\r\n        //Show error because folder doesn&#39;t exist\r\n    }\r\n\r\nThe file usually doesn&#39;t already exist on the server and, while it is created, it&#39;s always empty.\r\n\r\nThe log for it:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    CWD \r\n    250 CWD command successful.\r\n    PWD\r\n    257 &quot;/&quot; is current directory.\r\n    PASV\r\n    227 Entering Passive Mode ([IP here]).\r\n    STOR /blabla9.txt\r\n    125 Data connection already open; Transfer starting.\r\n    226 Transfer complete. [called because of &quot;completePendingCommand()&quot;]\r\n\r\n**Question:** How do I write text to a file using the library, creating a new file beforehand (if necessary)?\r\n\r\n---\r\n\r\n***Edit:*** Instead I also tried to save the text to External Storage, then upload the whole file:\r\n\r\n    login(); //logs in and leaves the connection open\r\n    ftpClient.enterLocalPassiveMode();\r\n    \r\n    if(ftpClient.changeWorkingDirectory(folder)) {\r\n        ftpClient.setFileType(FTP.ASCII_FILE_TYPE);\r\n        BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file));\r\n        boolean result = ftpClient.storeFile(filename, bis);\r\n        bis.close();\r\n    \r\n        if(result) {\r\n            //Success!\r\n        } else {\r\n            //Failed\r\n        }\r\n    } else {\r\n        //Show error because folder doesn&#39;t exist\r\n    }\r\n\r\n\r\nThis works but it&#39;s only a temporary solution because it requires writing the file to External Storage first, then deleting it again after the upload.\r\n\r\nThe log for this version:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    CWD \r\n    250 CWD command successful.\r\n    PWD\r\n    257 &quot;/&quot; is current directory.\r\n    TYPE A\r\n    200 Type set to A.\r\n    PASV\r\n    227 Entering Passive Mode ([IP here]).\r\n    STOR blabla11.txt\r\n    125 Data connection already open; Transfer starting.\r\n    226 Transfer complete.","title":"Apache FTPClient: Write text from memory to file on FTP server","body":"<p>My Android app (min API 24, target API 27, Java 8) uses Apache's <code>FTPClient</code> to connect to an FTP server. At the moment I'm trying to write some text to a file on the server (the file doesn't exist on the phone!) but failing:</p>\n\n<pre><code>login(); //logs in and leaves the connection open\nftpClient.enterLocalPassiveMode();\n\nif(ftpClient.changeWorkingDirectory(folder)) {\n    OutputStream os = ftpClient.storeFileStream(File.separator+filename);\n    BufferedWriter bw = new BufferedWriter((new OutputStreamWriter(os,StandardCharsets.UTF_8)));\n    bw.write(text);\n    bw.close();\n\n    if(ftpClient.completePendingCommand()) {\n        //Success!\n    } else {\n        //Failed\n    }\n} else {\n    //Show error because folder doesn't exist\n}\n</code></pre>\n\n<p>The file usually doesn't already exist on the server and, while it is created, it's always empty.</p>\n\n<p>The log for it:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>CWD \n250 CWD command successful.\nPWD\n257 \"/\" is current directory.\nPASV\n227 Entering Passive Mode ([IP here]).\nSTOR /blabla9.txt\n125 Data connection already open; Transfer starting.\n226 Transfer complete. [called because of \"completePendingCommand()\"]\n</code></pre>\n\n<p><strong>Question:</strong> How do I write text to a file using the library, creating a new file beforehand (if necessary)?</p>\n\n<hr>\n\n<p><strong><em>Edit:</em></strong> Instead I also tried to save the text to External Storage, then upload the whole file:</p>\n\n<pre><code>login(); //logs in and leaves the connection open\nftpClient.enterLocalPassiveMode();\n\nif(ftpClient.changeWorkingDirectory(folder)) {\n    ftpClient.setFileType(FTP.ASCII_FILE_TYPE);\n    BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file));\n    boolean result = ftpClient.storeFile(filename, bis);\n    bis.close();\n\n    if(result) {\n        //Success!\n    } else {\n        //Failed\n    }\n} else {\n    //Show error because folder doesn't exist\n}\n</code></pre>\n\n<p>This works but it's only a temporary solution because it requires writing the file to External Storage first, then deleting it again after the upload.</p>\n\n<p>The log for this version:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>CWD \n250 CWD command successful.\nPWD\n257 \"/\" is current directory.\nTYPE A\n200 Type set to A.\nPASV\n227 Entering Passive Mode ([IP here]).\nSTOR blabla11.txt\n125 Data connection already open; Transfer starting.\n226 Transfer complete.\n</code></pre>\n"},{"tags":["java","ftp","upload","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697778282,"creation_date":1586968162,"answer_id":61233789,"question_id":61231580,"body_markdown":"You seem to be using Apache Commons Net [`FTPClient`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html).\r\n\r\nIt actually does not even have a direct way to upload a *physical file*. Its [`FTPClient.storeFile` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)) only accepts [`InputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html) interface.\r\n\r\nNormally you would use `FileInputStream` to refer to a physical file:  \r\nhttps://stackoverflow.com/q/6527664/850848\r\n\r\nWhile you want to to use `ByteArrayInputStream`:  \r\nhttps://stackoverflow.com/q/1802123/850848\r\n\r\n```\r\nInputStream inputStream = new ByteArrayInputStream(bytes);\r\nftpClient.storeFile(remotePath, inputStream);\r\n```\r\n","title":"Uploading byte array to FTP in Java","body":"<p>You seem to be using Apache Commons Net <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html\" rel=\"nofollow noreferrer\"><code>FTPClient</code></a>.</p>\n<p>It actually does not even have a direct way to upload a <em>physical file</em>. Its <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code> method</a> only accepts <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html\" rel=\"nofollow noreferrer\"><code>InputStream</code></a> interface.</p>\n<p>Normally you would use <code>FileInputStream</code> to refer to a physical file:<br />\n<a href=\"https://stackoverflow.com/q/6527664/850848\">How do you upload a file to an FTP server?</a></p>\n<p>While you want to to use <code>ByteArrayInputStream</code>:<br />\n<a href=\"https://stackoverflow.com/q/1802123/850848\">Can we convert a byte array into an InputStream in Java?</a></p>\n<pre><code>InputStream inputStream = new ByteArrayInputStream(bytes);\nftpClient.storeFile(remotePath, inputStream);\n</code></pre>\n"}],"owner":{"account_id":18010380,"reputation":81,"user_id":13090210,"display_name":"letMeThink"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1832,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61233789,"answer_count":1,"score":1,"last_activity_date":1697778282,"creation_date":1586961737,"question_id":61231580,"body_markdown":"My goal is to be able to upload files to FTP server, I have researched a bit and saw the way how to upload a file if the file is already stored locally, I have a function that returns `byte[]` so I am wondering how to send that file to FTP server if it file exist in memory.\r\n\r\n    private void connect() throws IOException {\r\n        FTPClient ftpClient = new FTPClient();\r\n        ftpClient.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out)));\r\n        ftpClient.connect(ftp.getServer(), ftp.getPort());\r\n        int reply = ftpClient.getReplyCode();\r\n        if (!FTPReply.isPositiveCompletion(reply)) {\r\n            ftpClient.disconnect();\r\n            throw new RuntimeException(&quot;Could not connect to FTP Server&quot;);\r\n        } else {\r\n            ftpClient.login(ftp.getUser(), ftp.getPassword());\r\n        }\r\n    }\r\n","title":"Uploading byte array to FTP in Java","body":"<p>My goal is to be able to upload files to FTP server, I have researched a bit and saw the way how to upload a file if the file is already stored locally, I have a function that returns <code>byte[]</code> so I am wondering how to send that file to FTP server if it file exist in memory.</p>\n\n<pre><code>private void connect() throws IOException {\n    FTPClient ftpClient = new FTPClient();\n    ftpClient.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out)));\n    ftpClient.connect(ftp.getServer(), ftp.getPort());\n    int reply = ftpClient.getReplyCode();\n    if (!FTPReply.isPositiveCompletion(reply)) {\n        ftpClient.disconnect();\n        throw new RuntimeException(\"Could not connect to FTP Server\");\n    } else {\n        ftpClient.login(ftp.getUser(), ftp.getPassword());\n    }\n}\n</code></pre>\n"},{"tags":["java","ftp","ftp-client"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697778259,"creation_date":1571117035,"answer_id":58387726,"question_id":58381956,"body_markdown":"The first argument of [`FTPClient.storeFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)) is:\r\n\r\n&gt; `remote` - The name to give the remote file.\r\n\r\nI do not think that `&quot;c:\\\\upload\\\\folderA\\\\subfolderB\\\\2019-10-14-20.11.54.111.fileName.dat&quot;` is a valid remote path of your FTP server. Use the path you see when you login with your FTP client.","title":"FTPClient connection timeout while trying to upload file","body":"<p>The first argument of <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code></a> is:</p>\n<blockquote>\n<p><code>remote</code> - The name to give the remote file.</p>\n</blockquote>\n<p>I do not think that <code>&quot;c:\\\\upload\\\\folderA\\\\subfolderB\\\\2019-10-14-20.11.54.111.fileName.dat&quot;</code> is a valid remote path of your FTP server. Use the path you see when you login with your FTP client.</p>\n"}],"owner":{"account_id":3987289,"reputation":1949,"user_id":3287486,"accept_rate":42,"display_name":"breaktop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2490,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":58387726,"answer_count":1,"score":0,"last_activity_date":1697778259,"creation_date":1571076258,"question_id":58381956,"body_markdown":"I am using `org.apache.commons.net.ftp.FTPClient` to upload files to a Windows FTP server.\r\n\r\nI am having issues uploading files to the FTP server (also files with no content). I am getting `Connection timed out (Connection timed out)`.\r\n\r\nStrangely I am able to create folders.\r\n\r\nHere is what my code looks like:\r\n\r\n```\r\npublic FtpClient getFtpClient() throws ConnectException {\r\n    FTPClient ftpClient = new FTPClient();\r\n    try {\r\n\r\n        ftpClient.connect(&quot;localhost&quot;, 21);\r\n        ftpClient.enterLocalPassiveMode();\r\n\r\n        ftpClient.login(&quot;username&quot;, &quot;password&quot;);\r\n\r\n        final int loginResponse = ftpClient.getReplyCode();\r\n\r\n        if (!FTPReply.isPositiveCompletion(loginResponse)) {\r\n            ftpClient.disconnect();\r\n        }\r\n        \r\n        ftpClient.setFileType(BINARY_FILE_TYPE);\r\n\r\n        ftpClient.setRemoteVerificationEnabled(false);\r\n\r\n    } catch (final IOException e) {}\r\n    \r\n    return ftpClient;\r\n}\r\n\r\n\r\nprivate void connectAndSend(String message) throws FileTransferException {\r\n    try ((final FTPClient ftpClient = getFtpClient())) {\r\n        // code to create dir if they do not exist goes here\r\n        final ByteArrayInputStream inputStream = new ByteArrayInputStream(message.getBytes());\r\n      ftpClient.storeFile(&quot;c:\\\\upload\\\\folderA\\\\subfolderB\\\\2019-10-14-20.11.54.111.fileName.dat&quot;, inputStream);\r\n    } catch (IOException e) {}\r\n}\r\n```\r\n\r\nWhy is it that I am able to create the folder but when I try to upload a file I get `Connection timed out (Connection timed out)`.\r\n\r\nI&#39;ve tried with and without `ftpClient.enterLocalPassiveMode();` and no luck.\r\n\r\nI have also tryied to put files into the FTP server using FTP client on the same machine as the java program with not luck.\r\n\r\nI was able to upload the same file to the FTP server using FileZilla (located on a separate machine). \r\n\r\nThe Java program is in a docker image running in EC2 instance. FileZilla is running on a Windows machine. \r\n\r\nUPDATE:\r\n\r\nHere is the logs from the java program that&#39;s attempting to put files into FTP server.\r\n\r\n```\r\n2019-10-15 13:19:57.017 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : File built for dest D:\\FTP\\FolderOne\\FolderTwo\\FolderThree\r\nPASV\r\n530 Please login with USER and PASS.\r\nUSER *******\r\n331 Password required\r\nPASS *******\r\n230 User logged in.\r\n2019-10-15 13:19:57.048 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpClient : Logged into FTP Server\r\nTYPE I\r\n200 Type set to I.\r\nCWD D:\\\r\n550 The parameter is incorrect.\r\n2019-10-15 13:19:57.050 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder D:\\ does not exist. Creating folder D:\\\r\nMKD D:\\\r\n550 The parameter is incorrect.\r\nCWD FTP\r\n250 CWD command successful.\r\n2019-10-15 13:19:57.052 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FTP exist. Do nothing\r\nCWD FolderOne\r\n250 CWD command successful.\r\n2019-10-15 13:19:57.053 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderOne exist. Do nothing\r\nCWD FolderTwo\r\n250 CWD command successful.\r\n2019-10-15 13:19:57.054 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderTwo exist. Do nothing\r\nCWD FolderThree\r\n250 CWD command successful.\r\n2019-10-15 13:19:57.055 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderThree exist. Do nothing\r\n2019-10-15 13:19:57.058 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : uploading to pre.env.co.uk:21 D:\\FTP\\FolderOne\\FolderTwo\\FolderThree\\2019-10-15-14.19.57.169751.fileName.dat as username\r\nPASV\r\n227 Entering Passive Mode (10,128,5,21,213,99).\r\n2019-10-15 13:22:07.746 ERROR 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : FAILED uploading to pre.env.co.uk:21\r\n||AI021|20191014|181439|8160394620251766|||81|4074|DATA|ADAT|||DATA|1111111|111111|11111111111|||11|1111|DATA|ADAT|.|DATA||||DATA|94|816035||||802||15|004|||||N|N|DATA||||||||||||||||||704721919||||DATA|0|||DATA|||||||||DATA||||DATA|11|11111||||111||111|1111|||||1|1|1111||||||||||||||||||704721919||||DATA|0|||DATA||||||||\r\nas username.\r\n{}\r\njava.net.ConnectException: Connection timed out (Connection timed out)\r\n```\r\n\r\nHere are the logs from FTP client running on the same machine as the Java program\r\n\r\n```\r\nroot@955a11ba6126:/usr/src/ftp# ftp -d -p dmx01.pre.examplecloud.co.uk\r\nConnected to dmx01.pre.examplecloud.co.uk.\r\n220 Microsoft FTP Service\r\nftp: setsockopt: Bad file descriptor\r\nName (dmx01.pre.examplecloud.co.uk:root): dmx01-ftp\r\n---&gt; USER dmx01-ftp\r\n331 Password required\r\nPassword:\r\n---&gt; PASS XXXX\r\n230 User logged in.\r\n---&gt; SYST\r\n215 Windows_NT\r\nRemote system type is Windows_NT.\r\nftp&gt; cd FTP\r\n---&gt; CWD FTP\r\n250 CWD command successful.\r\nftp&gt; put cat\r\nlocal: cat remote: cat\r\nftp: setsockopt (ignored): Permission denied\r\n---&gt; PASV\r\n227 Entering Passive Mode (10,128,5,21,219,253).\r\nftp: connect: Connection timed out\r\nftp&gt; put cat\r\nlocal: cat remote: cat\r\nftp: setsockopt (ignored): Permission denied\r\n---&gt; PASV\r\n421 Service not available, remote server has closed connection\r\nPassive mode refused.\r\nftp&gt; \r\n```\r\n\r\nWhy is it that the java program and the FTP client can&#39;t put files into the FTP server. The java program and the FTP client are running on the same machine.","title":"FTPClient connection timeout while trying to upload file","body":"<p>I am using <code>org.apache.commons.net.ftp.FTPClient</code> to upload files to a Windows FTP server.</p>\n\n<p>I am having issues uploading files to the FTP server (also files with no content). I am getting <code>Connection timed out (Connection timed out)</code>.</p>\n\n<p>Strangely I am able to create folders.</p>\n\n<p>Here is what my code looks like:</p>\n\n<pre><code>public FtpClient getFtpClient() throws ConnectException {\n    FTPClient ftpClient = new FTPClient();\n    try {\n\n        ftpClient.connect(\"localhost\", 21);\n        ftpClient.enterLocalPassiveMode();\n\n        ftpClient.login(\"username\", \"password\");\n\n        final int loginResponse = ftpClient.getReplyCode();\n\n        if (!FTPReply.isPositiveCompletion(loginResponse)) {\n            ftpClient.disconnect();\n        }\n\n        ftpClient.setFileType(BINARY_FILE_TYPE);\n\n        ftpClient.setRemoteVerificationEnabled(false);\n\n    } catch (final IOException e) {}\n\n    return ftpClient;\n}\n\n\nprivate void connectAndSend(String message) throws FileTransferException {\n    try ((final FTPClient ftpClient = getFtpClient())) {\n        // code to create dir if they do not exist goes here\n        final ByteArrayInputStream inputStream = new ByteArrayInputStream(message.getBytes());\n      ftpClient.storeFile(\"c:\\\\upload\\\\folderA\\\\subfolderB\\\\2019-10-14-20.11.54.111.fileName.dat\", inputStream);\n    } catch (IOException e) {}\n}\n</code></pre>\n\n<p>Why is it that I am able to create the folder but when I try to upload a file I get <code>Connection timed out (Connection timed out)</code>.</p>\n\n<p>I've tried with and without <code>ftpClient.enterLocalPassiveMode();</code> and no luck.</p>\n\n<p>I have also tryied to put files into the FTP server using FTP client on the same machine as the java program with not luck.</p>\n\n<p>I was able to upload the same file to the FTP server using FileZilla (located on a separate machine). </p>\n\n<p>The Java program is in a docker image running in EC2 instance. FileZilla is running on a Windows machine. </p>\n\n<p>UPDATE:</p>\n\n<p>Here is the logs from the java program that's attempting to put files into FTP server.</p>\n\n<pre><code>2019-10-15 13:19:57.017 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : File built for dest D:\\FTP\\FolderOne\\FolderTwo\\FolderThree\nPASV\n530 Please login with USER and PASS.\nUSER *******\n331 Password required\nPASS *******\n230 User logged in.\n2019-10-15 13:19:57.048 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpClient : Logged into FTP Server\nTYPE I\n200 Type set to I.\nCWD D:\\\n550 The parameter is incorrect.\n2019-10-15 13:19:57.050 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder D:\\ does not exist. Creating folder D:\\\nMKD D:\\\n550 The parameter is incorrect.\nCWD FTP\n250 CWD command successful.\n2019-10-15 13:19:57.052 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FTP exist. Do nothing\nCWD FolderOne\n250 CWD command successful.\n2019-10-15 13:19:57.053 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderOne exist. Do nothing\nCWD FolderTwo\n250 CWD command successful.\n2019-10-15 13:19:57.054 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderTwo exist. Do nothing\nCWD FolderThree\n250 CWD command successful.\n2019-10-15 13:19:57.055 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : Folder FolderThree exist. Do nothing\n2019-10-15 13:19:57.058 INFO 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : uploading to pre.env.co.uk:21 D:\\FTP\\FolderOne\\FolderTwo\\FolderThree\\2019-10-15-14.19.57.169751.fileName.dat as username\nPASV\n227 Entering Passive Mode (10,128,5,21,213,99).\n2019-10-15 13:22:07.746 ERROR 1 --- [ask-scheduler-3] u.c.h.g.a.service.ftp.FtpSender : FAILED uploading to pre.env.co.uk:21\n||AI021|20191014|181439|8160394620251766|||81|4074|DATA|ADAT|||DATA|1111111|111111|11111111111|||11|1111|DATA|ADAT|.|DATA||||DATA|94|816035||||802||15|004|||||N|N|DATA||||||||||||||||||704721919||||DATA|0|||DATA|||||||||DATA||||DATA|11|11111||||111||111|1111|||||1|1|1111||||||||||||||||||704721919||||DATA|0|||DATA||||||||\nas username.\n{}\njava.net.ConnectException: Connection timed out (Connection timed out)\n</code></pre>\n\n<p>Here are the logs from FTP client running on the same machine as the Java program</p>\n\n<pre><code>root@955a11ba6126:/usr/src/ftp# ftp -d -p dmx01.pre.examplecloud.co.uk\nConnected to dmx01.pre.examplecloud.co.uk.\n220 Microsoft FTP Service\nftp: setsockopt: Bad file descriptor\nName (dmx01.pre.examplecloud.co.uk:root): dmx01-ftp\n---&gt; USER dmx01-ftp\n331 Password required\nPassword:\n---&gt; PASS XXXX\n230 User logged in.\n---&gt; SYST\n215 Windows_NT\nRemote system type is Windows_NT.\nftp&gt; cd FTP\n---&gt; CWD FTP\n250 CWD command successful.\nftp&gt; put cat\nlocal: cat remote: cat\nftp: setsockopt (ignored): Permission denied\n---&gt; PASV\n227 Entering Passive Mode (10,128,5,21,219,253).\nftp: connect: Connection timed out\nftp&gt; put cat\nlocal: cat remote: cat\nftp: setsockopt (ignored): Permission denied\n---&gt; PASV\n421 Service not available, remote server has closed connection\nPassive mode refused.\nftp&gt; \n</code></pre>\n\n<p>Why is it that the java program and the FTP client can't put files into the FTP server. The java program and the FTP client are running on the same machine.</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697778235,"creation_date":1508265806,"answer_id":46797106,"question_id":46796695,"body_markdown":"The first argument of [`FTPClient.storeFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)) is a **path** to file to store the uploaded data to, not an **HTTP URL**.\r\n\r\nWhat that path is, depends on how your FTP server is configured.\r\n\r\nIt can be an absolute path like:\r\n\r\n    link = &quot;/home/user/public_html/image/ayri.jpg&quot;;\r\n\r\nOr if the `user` account is chrooted, it can be:\r\n\r\n    link = &quot;/public_html/image/ayri.jpg&quot;;\r\n\r\nOr something completely different. See https://stackoverflow.com/q/46417961/850848 (an opposite problem, but the answer will give you an idea anyway).\r\n\r\n*(In any case, obviously the name of variable `link` is wrong, it should be `path`.)*","title":"FTP upload does not work Android","body":"<p>The first argument of <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code></a> is a <strong>path</strong> to file to store the uploaded data to, not an <strong>HTTP URL</strong>.</p>\n<p>What that path is, depends on how your FTP server is configured.</p>\n<p>It can be an absolute path like:</p>\n<pre><code>link = &quot;/home/user/public_html/image/ayri.jpg&quot;;\n</code></pre>\n<p>Or if the <code>user</code> account is chrooted, it can be:</p>\n<pre><code>link = &quot;/public_html/image/ayri.jpg&quot;;\n</code></pre>\n<p>Or something completely different. See <a href=\"https://stackoverflow.com/q/46417961/850848\">How to get HTTP URL of file uploaded to FTP server</a> (an opposite problem, but the answer will give you an idea anyway).</p>\n<p><em>(In any case, obviously the name of variable <code>link</code> is wrong, it should be <code>path</code>.)</em></p>\n"},{"tags":[],"owner":{"account_id":10775315,"reputation":75,"user_id":7927581,"accept_rate":50,"display_name":"Adam Harmand"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1509384842,"creation_date":1509384842,"answer_id":47021114,"question_id":46796695,"body_markdown":"So i&#39;ve found myself the answer, for those of you who will encounter this problem, first for **POST** or **UPLOADING** files, always use Asynctask, if not it will never work. And just check that in your application you have permission for file management, you can see in settings -&gt; Application -&gt; Your app -&gt; Permission -&gt; Storage check yes. And that&#39;s it.\r\n\r\nThank you stackoverflow for helping ! ","title":"FTP upload does not work Android","body":"<p>So i've found myself the answer, for those of you who will encounter this problem, first for <strong>POST</strong> or <strong>UPLOADING</strong> files, always use Asynctask, if not it will never work. And just check that in your application you have permission for file management, you can see in settings -> Application -> Your app -> Permission -> Storage check yes. And that's it.</p>\n\n<p>Thank you stackoverflow for helping ! </p>\n"}],"owner":{"account_id":10775315,"reputation":75,"user_id":7927581,"accept_rate":50,"display_name":"Adam Harmand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":947,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":47021114,"answer_count":2,"score":-1,"last_activity_date":1697778235,"creation_date":1508264331,"question_id":46796695,"body_markdown":"I am trying to upload a picture from a Samsung to an FTP server using the Apache `FTPClient`. But it does not seem to work. I don&#39;t know why, the code is fine. I am trying to choose an image to upload it on the server, the `selectedImage` variable is the complete path of the picture file.\r\n\r\n    FTPClient ftpClient = new FTPClient();\r\n    ftpClient.connect(InetAddress.getByName(&quot;ftpserver&quot;));\r\n    ftpClient.login(&quot;user&quot;, &quot;password&quot;);\r\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n\r\n    FileInputStream buffIn = null;\r\n    buffIn = new FileInputStream(new File(getRealPathFromURI(selectedImage)));\r\n    ftpClient.enterLocalPassiveMode();\r\n    link = &quot;http://ftpname/home/user/public_html/image/ayri.jpg&quot;;\r\n    ftpClient.storeFile(link, buffIn);\r\n    buffIn.close();\r\n    ftpClient.logout();\r\n    ftpClient.disconnect();\r\n\r\n","title":"FTP upload does not work Android","body":"<p>I am trying to upload a picture from a Samsung to an FTP server using the Apache <code>FTPClient</code>. But it does not seem to work. I don't know why, the code is fine. I am trying to choose an image to upload it on the server, the <code>selectedImage</code> variable is the complete path of the picture file.</p>\n\n<pre><code>FTPClient ftpClient = new FTPClient();\nftpClient.connect(InetAddress.getByName(\"ftpserver\"));\nftpClient.login(\"user\", \"password\");\nftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n\nFileInputStream buffIn = null;\nbuffIn = new FileInputStream(new File(getRealPathFromURI(selectedImage)));\nftpClient.enterLocalPassiveMode();\nlink = \"http://ftpname/home/user/public_html/image/ayri.jpg\";\nftpClient.storeFile(link, buffIn);\nbuffIn.close();\nftpClient.logout();\nftpClient.disconnect();\n</code></pre>\n"},{"tags":["java","android","kotlin","ftp"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697778208,"creation_date":1597563283,"answer_id":63434326,"question_id":63353792,"body_markdown":"Use [`FTPClient.setRestartOffset`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setRestartOffset(long)) to tell the server to start the download from place, where the transfer was interrupted before.","title":"Android How to retry downloading automatically from where it left if internet connection goes away using FTP protocol","body":"<p>Use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setRestartOffset(long)\" rel=\"nofollow noreferrer\"><code>FTPClient.setRestartOffset</code></a> to tell the server to start the download from place, where the transfer was interrupted before.</p>\n"}],"owner":{"account_id":8718049,"reputation":1192,"user_id":6521990,"display_name":"Tarun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697778208,"creation_date":1597132228,"question_id":63353792,"body_markdown":"**Below Is the code for downloading file using FTP in android. It is working fine but in case internet goes off during download, it doesn&#39;t retry.\r\nI want it should automatically retry whenever internet comes back and should start downloading from there, where it left. Please help me.** \r\n\r\n\r\n     public static void downloadFile(Context context) {\r\n            FTPClient client = new FTPClient();\r\n            FileOutputStream fos = null;\r\n            try {\r\n                client.connect(&quot;test.rebex.net&quot;);\r\n                client.login(&quot;demo&quot;, &quot;password&quot;);\r\n                String filename = &quot;ftpp.png&quot;;\r\n                 String filePath = context.getFilesDir().getPath() + filename;\r\n                fos = new FileOutputStream(filePath);\r\n                client.retrieveFile(&quot;/pub/example/&quot; + &quot;KeyGenerator.png&quot;, fos);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (fos != null) {\r\n                        fos.close();\r\n                    }\r\n                    client.disconnect();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n            }\r\n    \r\n        }","title":"Android How to retry downloading automatically from where it left if internet connection goes away using FTP protocol","body":"<p><strong>Below Is the code for downloading file using FTP in android. It is working fine but in case internet goes off during download, it doesn't retry.\nI want it should automatically retry whenever internet comes back and should start downloading from there, where it left. Please help me.</strong></p>\n<pre><code> public static void downloadFile(Context context) {\n        FTPClient client = new FTPClient();\n        FileOutputStream fos = null;\n        try {\n            client.connect(&quot;test.rebex.net&quot;);\n            client.login(&quot;demo&quot;, &quot;password&quot;);\n            String filename = &quot;ftpp.png&quot;;\n             String filePath = context.getFilesDir().getPath() + filename;\n            fos = new FileOutputStream(filePath);\n            client.retrieveFile(&quot;/pub/example/&quot; + &quot;KeyGenerator.png&quot;, fos);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (fos != null) {\n                    fos.close();\n                }\n                client.disconnect();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","ftp","inputstream","apache-commons-net","randomaccessfile"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697778169,"creation_date":1560498188,"answer_id":56593644,"question_id":56591712,"body_markdown":"If you want to starting reading the remote file from a certain offset, use [`FTPClient.setRestartOffset`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setRestartOffset(long)). The FTP server needs to support `REST` command (most do).\r\n\r\n    ftp.setRestartOffset(offset);\r\n    InputStream in = ftp.retrieveFileStream(remote_file_name);\r\n    // Now you can read as many bytes as you need from &#39;in&#39;\r\n\r\nIf you do not want to read the file to the end, and you want to reuse the connection for other operations, you need to call [`FTPClient.abort`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#abort()).\r\n\r\n---\r\n\r\n*(You cannot convert `InputStream` to `RandomAccessFile`, nor use `RandomAccessFile` anyhow with files on FTP server)*","title":"Can you access files on the remote FTP server with RandomAccessFile?","body":"<p>If you want to starting reading the remote file from a certain offset, use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setRestartOffset(long)\" rel=\"nofollow noreferrer\"><code>FTPClient.setRestartOffset</code></a>. The FTP server needs to support <code>REST</code> command (most do).</p>\n<pre><code>ftp.setRestartOffset(offset);\nInputStream in = ftp.retrieveFileStream(remote_file_name);\n// Now you can read as many bytes as you need from 'in'\n</code></pre>\n<p>If you do not want to read the file to the end, and you want to reuse the connection for other operations, you need to call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#abort()\" rel=\"nofollow noreferrer\"><code>FTPClient.abort</code></a>.</p>\n<hr />\n<p><em>(You cannot convert <code>InputStream</code> to <code>RandomAccessFile</code>, nor use <code>RandomAccessFile</code> anyhow with files on FTP server)</em></p>\n"}],"owner":{"account_id":15993722,"reputation":67,"user_id":11542190,"display_name":"mgjang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":647,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":56593644,"answer_count":1,"score":1,"last_activity_date":1697778169,"creation_date":1560489088,"question_id":56591712,"body_markdown":"I&#39;m trying to read the file on the FTP remote-server using Apache Commons Net library.\r\n\r\n`retrieveFileStream` returns `InputStream` and put it in `BufferedReader`.\r\n\r\nBut, I want to use `RandomAccessFile` (to use the `seek()` method).\r\n\r\nI want to get `Inputstream` as a `RandomAccessFile`.\r\n\r\nIs it possible?\r\n\r\n    FTPClient ftp = new FTPClient();\r\n    InputStream in = ftp.retrieveFileStream(remote_file_name);\r\n    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(in, &quot;UTF-8&quot;));","title":"Can you access files on the remote FTP server with RandomAccessFile?","body":"<p>I'm trying to read the file on the FTP remote-server using Apache Commons Net library.</p>\n\n<p><code>retrieveFileStream</code> returns <code>InputStream</code> and put it in <code>BufferedReader</code>.</p>\n\n<p>But, I want to use <code>RandomAccessFile</code> (to use the <code>seek()</code> method).</p>\n\n<p>I want to get <code>Inputstream</code> as a <code>RandomAccessFile</code>.</p>\n\n<p>Is it possible?</p>\n\n<pre><code>FTPClient ftp = new FTPClient();\nInputStream in = ftp.retrieveFileStream(remote_file_name);\nBufferedReader bufferedReader = new BufferedReader(new InputStreamReader(in, \"UTF-8\"));\n</code></pre>\n"},{"tags":["java","proxy","ftp","ftps","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697778118,"creation_date":1644247301,"answer_id":71020998,"question_id":71005836,"body_markdown":"I do not know your network/proxy setup, so I cannot really explain the behaviour of `FTPClient`. Your server seems to return IP address of the proxy in the `PASV` response. The default NAT resolver of `FTPClient` decides that the address is wrong (is it a local network host address?) and choses to use original FTP server&#39;s address instead.\r\n\r\nWhile WinSCP does not do that and connects to the IP that the server returned.\r\n\r\nTo avoid the NAT resolver from messing with the address, use [`FTPClient.setPassiveNatWorkaround`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setPassiveNatWorkaround(boolean)) (though that&#39;s deprecated):\r\n\r\n```\r\nftpClient.setPassiveNatWorkaround(false);\r\n```\r\n\r\nor equivalent [`FTPClient.setPassiveNatWorkaroundStrategy`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setPassiveNatWorkaroundStrategy(org.apache.commons.net.ftp.FTPClient.HostnameResolver)):\r\n\r\n```\r\nftpClient.setPassiveNatWorkaroundStrategy(null);\r\n```\r\n","title":"FTPS data connection with TLS/SSL via proxy fails with log entry &quot;Replacing PASV mode reply address &lt;PROXY_IP&gt; with &lt;FTPS_IP&gt;&quot;","body":"<p>I do not know your network/proxy setup, so I cannot really explain the behaviour of <code>FTPClient</code>. Your server seems to return IP address of the proxy in the <code>PASV</code> response. The default NAT resolver of <code>FTPClient</code> decides that the address is wrong (is it a local network host address?) and choses to use original FTP server's address instead.</p>\n<p>While WinSCP does not do that and connects to the IP that the server returned.</p>\n<p>To avoid the NAT resolver from messing with the address, use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setPassiveNatWorkaround(boolean)\" rel=\"nofollow noreferrer\"><code>FTPClient.setPassiveNatWorkaround</code></a> (though that's deprecated):</p>\n<pre><code>ftpClient.setPassiveNatWorkaround(false);\n</code></pre>\n<p>or equivalent <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setPassiveNatWorkaroundStrategy(org.apache.commons.net.ftp.FTPClient.HostnameResolver)\" rel=\"nofollow noreferrer\"><code>FTPClient.setPassiveNatWorkaroundStrategy</code></a>:</p>\n<pre><code>ftpClient.setPassiveNatWorkaroundStrategy(null);\n</code></pre>\n"}],"owner":{"account_id":11665884,"reputation":25,"user_id":8542627,"display_name":"Hijas Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1198,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71020998,"answer_count":1,"score":1,"last_activity_date":1697778118,"creation_date":1644140056,"question_id":71005836,"body_markdown":"I have an issue while connecting to a FTPS server with TLS/SSL Implicit encryption via PROXY.\r\n\r\nI am following the custom Apache FTPS Client (commons-net-3.8.0) solution provided from https://stackoverflow.com/questions/30871840/java-ftps-client-through-http-proxy\r\n\r\nMy server connection is working, but unable to list or file transfer, getting below error:\r\n\r\n&gt; 425 Can&#39;t open data connection for transfer of &quot;\\&lt;REMOVED_FOR_SECURITY\\&gt;&quot;\r\n\r\nData connection / File transfer is working fine from Windows WinSCP and Linux LFTP.\r\n\r\nWinSCP Log:\r\n```none\r\n2022-02-06 16:25:04.874 --------------------------------------------------------------------------\r\n2022-02-06 16:25:04.876 WinSCP Version 5.15.5 (Build 9925) (OS 10.0.19042 - Windows 10 Enterprise)\r\n2022-02-06 16:25:04.877 Configuration: C:\\Users\\&lt;LOGIN_SER&gt;\\AppData\\Roaming\\WinSCP.ini\r\n2022-02-06 16:25:04.879 Log level: Normal\r\n2022-02-06 16:25:04.879 Local account: HBEU\\&lt;LOGIN_SER&gt;\r\n2022-02-06 16:25:04.879 Working directory: C:\\Program Files\\WinSCP-5.15.5\r\n2022-02-06 16:25:04.879 Process ID: 16452\r\n2022-02-06 16:25:04.883 Command-line: C:\\Program Files\\WinSCP-5.15.5\\WinSCP.exe\r\n2022-02-06 16:25:04.885 Time zone: Current: GMT+3 (Arab Standard Time), No DST\r\n2022-02-06 16:25:04.885 Login time: Sunday, February 6, 2022 4:25:04 PM\r\n2022-02-06 16:25:04.885 --------------------------------------------------------------------------\r\n2022-02-06 16:25:04.885 Session name: FTPS TEST (Site)\r\n2022-02-06 16:25:04.885 Host name: &lt;FTPS_HOST_NAME&gt; (Port: &lt;FTPS_PORT&gt;)\r\n2022-02-06 16:25:04.885 User name: &lt;FTPS_USER_NAME&gt; (Password: No, Key file: No, Passphrase: No)\r\n2022-02-06 16:25:04.885 Transfer Protocol: FTP\r\n2022-02-06 16:25:04.885 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\r\n2022-02-06 16:25:04.885 Disable Nagle: No\r\n2022-02-06 16:25:04.885 Proxy: HTTP\r\n2022-02-06 16:25:04.885 HostName: &lt;PROXY_HOST_NAME&gt; (Port: &lt;PROXY_PORT&gt;); Username: ; Passwd: No\r\n2022-02-06 16:25:04.885 Send buffer: 262144\r\n2022-02-06 16:25:04.885 UTF: Auto\r\n2022-02-06 16:25:04.885 FTPS: Implicit TLS/SSL [Client certificate: No]\r\n2022-02-06 16:25:04.885 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\r\n2022-02-06 16:25:04.885 Session reuse: Yes\r\n2022-02-06 16:25:04.885 TLS/SSL versions: TLSv1.0-TLSv1.2\r\n2022-02-06 16:25:04.885 Local directory: &lt;LOCAL_DIRECTORY&gt;, Remote directory: &lt;REMOTE_DIRECTORY&gt;, Update: Yes, Cache: Yes\r\n2022-02-06 16:25:04.885 Cache directory changes: Yes, Permanent: Yes\r\n2022-02-06 16:25:04.885 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \r\n2022-02-06 16:25:04.885 Timezone offset: 0h 0m\r\n2022-02-06 16:25:04.885 --------------------------------------------------------------------------\r\n2022-02-06 16:25:04.953 Connecting to &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt; ...\r\n2022-02-06 16:25:04.953 HTTP proxy command: CONNECT &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT HTTP/1.1\r\n2022-02-06 16:25:04.953 Host: &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt;\r\n2022-02-06 16:25:04.989 Connection with proxy established, performing handshake...\r\n2022-02-06 16:25:04.989 HTTP proxy response: HTTP/1.1 200 Connection established\r\n2022-02-06 16:25:04.989 HTTP proxy headers: \r\n2022-02-06 16:25:04.989 Connected with &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt;, negotiating TLS connection...\r\n2022-02-06 16:25:05.038 Verifying certificate for &quot;&quot; with fingerprint &lt;REMOVED_FOR_SECURITY&gt; and 20 failures\r\n2022-02-06 16:25:05.038 Certificate common name &quot;*.&lt;FTPS_DOMAIN_NAME&gt;&quot; matches hostname\r\n2022-02-06 16:25:05.138 Certificate verified against Windows certificate store\r\n2022-02-06 16:25:05.138 Using TLSv1.2, cipher TLSv1/SSLv3: ECDHE-RSA-AES256-GCM-SHA384, 2048 bit RSA, ECDHE-RSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AESGCM(256) Mac=AEAD\r\n2022-02-06 16:25:05.191 TLS connection established. Waiting for welcome message...\r\n2022-02-06 16:25:05.191 220 SIJIL FTP\r\n2022-02-06 16:25:05.191 USER &lt;FTPS_USER_NAME&gt;\r\n2022-02-06 16:25:05.191 331 Password required for &lt;FTPS_USER_NAME&gt;\r\n2022-02-06 16:25:06.977 PASS *************\r\n2022-02-06 16:25:07.013 230 Logged on\r\n2022-02-06 16:25:07.013 SYST\r\n2022-02-06 16:25:07.049 215 UNIX emulated by FileZilla\r\n2022-02-06 16:25:07.049 FEAT\r\n2022-02-06 16:25:07.085 211-Features:\r\n2022-02-06 16:25:07.085  MDTM\r\n2022-02-06 16:25:07.086  REST STREAM\r\n2022-02-06 16:25:07.086  SIZE\r\n2022-02-06 16:25:07.086  MLST type*;size*;modify*;\r\n2022-02-06 16:25:07.086  MLSD\r\n2022-02-06 16:25:07.086  AUTH SSL\r\n2022-02-06 16:25:07.086  AUTH TLS\r\n2022-02-06 16:25:07.086  PROT\r\n2022-02-06 16:25:07.088  PBSZ\r\n2022-02-06 16:25:07.088  UTF8\r\n2022-02-06 16:25:07.088  CLNT\r\n2022-02-06 16:25:07.088  MFMT\r\n2022-02-06 16:25:07.088  EPSV\r\n2022-02-06 16:25:07.088  EPRT\r\n2022-02-06 16:25:07.088 211 End\r\n2022-02-06 16:25:07.088 CLNT WinSCP-release-5.15.5\r\n2022-02-06 16:25:07.122 200 Don&#39;t care\r\n2022-02-06 16:25:07.123 OPTS UTF8 ON\r\n2022-02-06 16:25:07.159 202 UTF8 mode is always enabled. No need to send this command.\r\n2022-02-06 16:25:07.160 PBSZ 0\r\n2022-02-06 16:25:07.198 200 PBSZ=0\r\n2022-02-06 16:25:07.199 PROT P\r\n2022-02-06 16:25:07.235 200 Protection level set to P\r\n2022-02-06 16:25:07.248 Connected\r\n2022-02-06 16:25:07.248 --------------------------------------------------------------------------\r\n2022-02-06 16:25:07.248 Using FTP protocol.\r\n2022-02-06 16:25:07.250 Doing startup conversation with host.\r\n2022-02-06 16:25:07.264 PWD\r\n2022-02-06 16:25:07.303 257 &quot;/&quot; is current directory.\r\n2022-02-06 16:25:07.303 Changing directory to &quot;&lt;REMOTE_DIRECTORY&gt;&quot;.\r\n2022-02-06 16:25:07.303 CWD &lt;REMOTE_DIRECTORY&gt;\r\n2022-02-06 16:25:07.340 250 CWD successful. &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\r\n2022-02-06 16:25:07.340 Getting current directory name.\r\n2022-02-06 16:25:07.341 PWD\r\n2022-02-06 16:25:07.384 257 &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\r\n2022-02-06 16:25:07.458 Retrieving directory listing...\r\n2022-02-06 16:25:07.458 TYPE A\r\n2022-02-06 16:25:07.493 200 Type set to A\r\n2022-02-06 16:25:07.493 PASV\r\n2022-02-06 16:25:07.530 227 Entering Passive Mode (&lt;REMOVED_FOR_SECURITY&gt;)\r\n2022-02-06 16:25:07.530 Error retrieving server address, cannot test if address is routable\r\n2022-02-06 16:25:07.530 MLSD\r\n2022-02-06 16:25:07.530 Connecting to &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt; ...\r\n2022-02-06 16:25:07.534 HTTP proxy command: CONNECT &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt; HTTP/1.1\r\n2022-02-06 16:25:07.534 Host: &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt;\r\n2022-02-06 16:25:07.534 Connection with proxy established, performing handshake...\r\n2022-02-06 16:25:07.586 HTTP proxy response: HTTP/1.1 200 Connection established\r\n2022-02-06 16:25:07.587 HTTP proxy headers: \r\n2022-02-06 16:25:07.608 Session ID reused\r\n2022-02-06 16:25:07.610 Using TLSv1.2, cipher TLSv1/SSLv3: ECDHE-RSA-AES256-GCM-SHA384, 2048 bit RSA, ECDHE-RSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AESGCM(256) Mac=AEAD\r\n2022-02-06 16:25:07.610 TLS connection established\r\n2022-02-06 16:25:07.619 150 Opening data channel for directory listing of &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\r\n2022-02-06 16:25:07.620 226 Successfully transferred &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\r\n2022-02-06 16:25:07.630 Data connection closed\r\n2022-02-06 16:25:07.631 type=file;modify=20220203072851;size=21; test.txt\r\n2022-02-06 16:25:07.631 type=file;modify=20220203072851;size=21; test_1.txt\r\n2022-02-06 16:25:07.631 Directory listing successful\r\n2022-02-06 16:25:07.632 ..;D;0;1899-12-30T03:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n2022-02-06 16:25:07.632 test.txt;-;21;2022-02-03T07:28:51.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n2022-02-06 16:25:07.632 test_1.txt;-;21;2022-02-03T07:28:51.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n2022-02-06 16:25:07.659 Startup conversation with host finished.\r\n```\r\n\r\nApache Log:\r\n```none\r\n220 SIJIL FTP\r\nUSER *******\r\n331 Password required for &lt;FTPS_USER_NAME&gt;\r\nPASS *******\r\n230 Logged on\r\nPBSZ 0\r\n200 PBSZ=0\r\nPROT P\r\n200 Protection level set to P\r\nPWD\r\n257 &quot;/&quot; is current directory.\r\n/\r\nCWD &lt;REMOTE_DIRECTORY&gt;\r\n250 CWD successful. &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\r\nPWD\r\n257 &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\r\n&lt;REMOTE_DIRECTORY&gt;\r\nPASV\r\n227 Entering Passive Mode (&lt;REMOVED_FOR_SECURITY&gt;)\r\n[Replacing PASV mode reply address &lt;PROXY_IP&gt; with &lt;FTPS_IP&gt;]\r\nMLSD\r\n425 Can&#39;t open data connection for transfer of &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\r\nList size: 0\r\nQUIT\r\n221 Goodbye\r\n```\r\n","title":"FTPS data connection with TLS/SSL via proxy fails with log entry &quot;Replacing PASV mode reply address &lt;PROXY_IP&gt; with &lt;FTPS_IP&gt;&quot;","body":"<p>I have an issue while connecting to a FTPS server with TLS/SSL Implicit encryption via PROXY.</p>\n<p>I am following the custom Apache FTPS Client (commons-net-3.8.0) solution provided from <a href=\"https://stackoverflow.com/questions/30871840/java-ftps-client-through-http-proxy\">Java FTPS client through HTTP proxy</a></p>\n<p>My server connection is working, but unable to list or file transfer, getting below error:</p>\n<blockquote>\n<p>425 Can't open data connection for transfer of &quot;&lt;REMOVED_FOR_SECURITY&gt;&quot;</p>\n</blockquote>\n<p>Data connection / File transfer is working fine from Windows WinSCP and Linux LFTP.</p>\n<p>WinSCP Log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2022-02-06 16:25:04.874 --------------------------------------------------------------------------\n2022-02-06 16:25:04.876 WinSCP Version 5.15.5 (Build 9925) (OS 10.0.19042 - Windows 10 Enterprise)\n2022-02-06 16:25:04.877 Configuration: C:\\Users\\&lt;LOGIN_SER&gt;\\AppData\\Roaming\\WinSCP.ini\n2022-02-06 16:25:04.879 Log level: Normal\n2022-02-06 16:25:04.879 Local account: HBEU\\&lt;LOGIN_SER&gt;\n2022-02-06 16:25:04.879 Working directory: C:\\Program Files\\WinSCP-5.15.5\n2022-02-06 16:25:04.879 Process ID: 16452\n2022-02-06 16:25:04.883 Command-line: C:\\Program Files\\WinSCP-5.15.5\\WinSCP.exe\n2022-02-06 16:25:04.885 Time zone: Current: GMT+3 (Arab Standard Time), No DST\n2022-02-06 16:25:04.885 Login time: Sunday, February 6, 2022 4:25:04 PM\n2022-02-06 16:25:04.885 --------------------------------------------------------------------------\n2022-02-06 16:25:04.885 Session name: FTPS TEST (Site)\n2022-02-06 16:25:04.885 Host name: &lt;FTPS_HOST_NAME&gt; (Port: &lt;FTPS_PORT&gt;)\n2022-02-06 16:25:04.885 User name: &lt;FTPS_USER_NAME&gt; (Password: No, Key file: No, Passphrase: No)\n2022-02-06 16:25:04.885 Transfer Protocol: FTP\n2022-02-06 16:25:04.885 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\n2022-02-06 16:25:04.885 Disable Nagle: No\n2022-02-06 16:25:04.885 Proxy: HTTP\n2022-02-06 16:25:04.885 HostName: &lt;PROXY_HOST_NAME&gt; (Port: &lt;PROXY_PORT&gt;); Username: ; Passwd: No\n2022-02-06 16:25:04.885 Send buffer: 262144\n2022-02-06 16:25:04.885 UTF: Auto\n2022-02-06 16:25:04.885 FTPS: Implicit TLS/SSL [Client certificate: No]\n2022-02-06 16:25:04.885 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\n2022-02-06 16:25:04.885 Session reuse: Yes\n2022-02-06 16:25:04.885 TLS/SSL versions: TLSv1.0-TLSv1.2\n2022-02-06 16:25:04.885 Local directory: &lt;LOCAL_DIRECTORY&gt;, Remote directory: &lt;REMOTE_DIRECTORY&gt;, Update: Yes, Cache: Yes\n2022-02-06 16:25:04.885 Cache directory changes: Yes, Permanent: Yes\n2022-02-06 16:25:04.885 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \n2022-02-06 16:25:04.885 Timezone offset: 0h 0m\n2022-02-06 16:25:04.885 --------------------------------------------------------------------------\n2022-02-06 16:25:04.953 Connecting to &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt; ...\n2022-02-06 16:25:04.953 HTTP proxy command: CONNECT &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT HTTP/1.1\n2022-02-06 16:25:04.953 Host: &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt;\n2022-02-06 16:25:04.989 Connection with proxy established, performing handshake...\n2022-02-06 16:25:04.989 HTTP proxy response: HTTP/1.1 200 Connection established\n2022-02-06 16:25:04.989 HTTP proxy headers: \n2022-02-06 16:25:04.989 Connected with &lt;FTPS_HOST_NAME&gt;:&lt;FTPS_PORT&gt;, negotiating TLS connection...\n2022-02-06 16:25:05.038 Verifying certificate for &quot;&quot; with fingerprint &lt;REMOVED_FOR_SECURITY&gt; and 20 failures\n2022-02-06 16:25:05.038 Certificate common name &quot;*.&lt;FTPS_DOMAIN_NAME&gt;&quot; matches hostname\n2022-02-06 16:25:05.138 Certificate verified against Windows certificate store\n2022-02-06 16:25:05.138 Using TLSv1.2, cipher TLSv1/SSLv3: ECDHE-RSA-AES256-GCM-SHA384, 2048 bit RSA, ECDHE-RSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AESGCM(256) Mac=AEAD\n2022-02-06 16:25:05.191 TLS connection established. Waiting for welcome message...\n2022-02-06 16:25:05.191 220 SIJIL FTP\n2022-02-06 16:25:05.191 USER &lt;FTPS_USER_NAME&gt;\n2022-02-06 16:25:05.191 331 Password required for &lt;FTPS_USER_NAME&gt;\n2022-02-06 16:25:06.977 PASS *************\n2022-02-06 16:25:07.013 230 Logged on\n2022-02-06 16:25:07.013 SYST\n2022-02-06 16:25:07.049 215 UNIX emulated by FileZilla\n2022-02-06 16:25:07.049 FEAT\n2022-02-06 16:25:07.085 211-Features:\n2022-02-06 16:25:07.085  MDTM\n2022-02-06 16:25:07.086  REST STREAM\n2022-02-06 16:25:07.086  SIZE\n2022-02-06 16:25:07.086  MLST type*;size*;modify*;\n2022-02-06 16:25:07.086  MLSD\n2022-02-06 16:25:07.086  AUTH SSL\n2022-02-06 16:25:07.086  AUTH TLS\n2022-02-06 16:25:07.086  PROT\n2022-02-06 16:25:07.088  PBSZ\n2022-02-06 16:25:07.088  UTF8\n2022-02-06 16:25:07.088  CLNT\n2022-02-06 16:25:07.088  MFMT\n2022-02-06 16:25:07.088  EPSV\n2022-02-06 16:25:07.088  EPRT\n2022-02-06 16:25:07.088 211 End\n2022-02-06 16:25:07.088 CLNT WinSCP-release-5.15.5\n2022-02-06 16:25:07.122 200 Don't care\n2022-02-06 16:25:07.123 OPTS UTF8 ON\n2022-02-06 16:25:07.159 202 UTF8 mode is always enabled. No need to send this command.\n2022-02-06 16:25:07.160 PBSZ 0\n2022-02-06 16:25:07.198 200 PBSZ=0\n2022-02-06 16:25:07.199 PROT P\n2022-02-06 16:25:07.235 200 Protection level set to P\n2022-02-06 16:25:07.248 Connected\n2022-02-06 16:25:07.248 --------------------------------------------------------------------------\n2022-02-06 16:25:07.248 Using FTP protocol.\n2022-02-06 16:25:07.250 Doing startup conversation with host.\n2022-02-06 16:25:07.264 PWD\n2022-02-06 16:25:07.303 257 &quot;/&quot; is current directory.\n2022-02-06 16:25:07.303 Changing directory to &quot;&lt;REMOTE_DIRECTORY&gt;&quot;.\n2022-02-06 16:25:07.303 CWD &lt;REMOTE_DIRECTORY&gt;\n2022-02-06 16:25:07.340 250 CWD successful. &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\n2022-02-06 16:25:07.340 Getting current directory name.\n2022-02-06 16:25:07.341 PWD\n2022-02-06 16:25:07.384 257 &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\n2022-02-06 16:25:07.458 Retrieving directory listing...\n2022-02-06 16:25:07.458 TYPE A\n2022-02-06 16:25:07.493 200 Type set to A\n2022-02-06 16:25:07.493 PASV\n2022-02-06 16:25:07.530 227 Entering Passive Mode (&lt;REMOVED_FOR_SECURITY&gt;)\n2022-02-06 16:25:07.530 Error retrieving server address, cannot test if address is routable\n2022-02-06 16:25:07.530 MLSD\n2022-02-06 16:25:07.530 Connecting to &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt; ...\n2022-02-06 16:25:07.534 HTTP proxy command: CONNECT &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt; HTTP/1.1\n2022-02-06 16:25:07.534 Host: &lt;PROXY_IP&gt;:&lt;PROXY_DYNAMIC_PORT&gt;\n2022-02-06 16:25:07.534 Connection with proxy established, performing handshake...\n2022-02-06 16:25:07.586 HTTP proxy response: HTTP/1.1 200 Connection established\n2022-02-06 16:25:07.587 HTTP proxy headers: \n2022-02-06 16:25:07.608 Session ID reused\n2022-02-06 16:25:07.610 Using TLSv1.2, cipher TLSv1/SSLv3: ECDHE-RSA-AES256-GCM-SHA384, 2048 bit RSA, ECDHE-RSA-AES256-GCM-SHA384 TLSv1.2 Kx=ECDH     Au=RSA  Enc=AESGCM(256) Mac=AEAD\n2022-02-06 16:25:07.610 TLS connection established\n2022-02-06 16:25:07.619 150 Opening data channel for directory listing of &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\n2022-02-06 16:25:07.620 226 Successfully transferred &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\n2022-02-06 16:25:07.630 Data connection closed\n2022-02-06 16:25:07.631 type=file;modify=20220203072851;size=21; test.txt\n2022-02-06 16:25:07.631 type=file;modify=20220203072851;size=21; test_1.txt\n2022-02-06 16:25:07.631 Directory listing successful\n2022-02-06 16:25:07.632 ..;D;0;1899-12-30T03:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\n2022-02-06 16:25:07.632 test.txt;-;21;2022-02-03T07:28:51.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\n2022-02-06 16:25:07.632 test_1.txt;-;21;2022-02-03T07:28:51.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\n2022-02-06 16:25:07.659 Startup conversation with host finished.\n</code></pre>\n<p>Apache Log:</p>\n<pre class=\"lang-none prettyprint-override\"><code>220 SIJIL FTP\nUSER *******\n331 Password required for &lt;FTPS_USER_NAME&gt;\nPASS *******\n230 Logged on\nPBSZ 0\n200 PBSZ=0\nPROT P\n200 Protection level set to P\nPWD\n257 &quot;/&quot; is current directory.\n/\nCWD &lt;REMOTE_DIRECTORY&gt;\n250 CWD successful. &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\nPWD\n257 &quot;&lt;REMOTE_DIRECTORY&gt;&quot; is current directory.\n&lt;REMOTE_DIRECTORY&gt;\nPASV\n227 Entering Passive Mode (&lt;REMOVED_FOR_SECURITY&gt;)\n[Replacing PASV mode reply address &lt;PROXY_IP&gt; with &lt;FTPS_IP&gt;]\nMLSD\n425 Can't open data connection for transfer of &quot;&lt;REMOTE_DIRECTORY&gt;&quot;\nList size: 0\nQUIT\n221 Goodbye\n</code></pre>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1697778018,"creation_date":1459493079,"answer_id":36349700,"question_id":36349361,"body_markdown":"You call the [`FTPClient.setFileType` method](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileType(int)) too early.\r\n\r\nAt least the [ProFTPD](http://www.proftpd.org/) or FileZilla FTP servers reset the default transfer mode after the authentication ([`FTPClient.login`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String))).\r\n\r\nMove the `.setFileType` call after the `.login`.\r\n","title":"Apache Java FTP client does not switch to binary transfer mode on some servers","body":"<p>You call the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileType(int)\" rel=\"nofollow noreferrer\"><code>FTPClient.setFileType</code> method</a> too early.</p>\n<p>At least the <a href=\"http://www.proftpd.org/\" rel=\"nofollow noreferrer\">ProFTPD</a> or FileZilla FTP servers reset the default transfer mode after the authentication (<a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.login</code></a>).</p>\n<p>Move the <code>.setFileType</code> call after the <code>.login</code>.</p>\n"}],"owner":{"account_id":161805,"reputation":2518,"user_id":382854,"accept_rate":60,"display_name":"mesnicka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2058,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36349700,"answer_count":1,"score":1,"last_activity_date":1697778018,"creation_date":1459491669,"question_id":36349361,"body_markdown":"I&#39;m using org.apache.commons.net.ftp library to work with FTP servers. I use about 5 FTP servers and one of them doesn&#39;t work properly (for me). For uploading files I also use method `ftpClient.setFileType(FTP.BINARY_FILE_TYPE)`, but on this server the size of the uploaded file is not the same as on my local HDD. It is usually MP3 files and when I try to play uploaded MP3 there is some buzz.\r\nI suspects that FTP server has wrong configuration, but the company which takes care of this server would be very unlikely to do some changes.\r\nOne more very important note: when I use Total Commander or WinSCP to upload file, the uploaded file is correct with same size.\r\n\r\nHere is my code:\r\n\r\n    public class FtpConnection {\r\n        String FTP_SERVER;\r\n        String FTP_USER;\r\n        String FTP_PASSWORD;\r\n        int FTP_PORT;\r\n        FTPClient ftpClient;\r\n        int attempts = 3;\r\n        long FILE_SIZE;\r\n              \r\n        public FtpConnection() {\r\n            FTP_SERVER = StradaAd.FTP_SERVER;\r\n            FTP_USER = StradaAd.FTP_USER;\r\n            FTP_PASSWORD = StradaAd.FTP_PASSWORD;\r\n            FTP_PORT = StradaAd.FTP_PORT;\r\n            \r\n            ftpClient = new FTPClient();\r\n            \r\n            ftpClient.setCopyStreamListener(streamListener);\r\n            \r\n            ftpClient.setBufferSize(1024 * 1024 * 1024);\r\n            ftpClient.setConnectTimeout(240000);\r\n            ftpClient.setDataTimeout(240000);\r\n            try {\r\n                ftpClient.connect(FTP_SERVER, FTP_PORT);\r\n                ftpClient.setControlKeepAliveTimeout(300);\r\n                ftpClient.enterLocalPassiveMode();\r\n                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n                \r\n                int replyCode = ftpClient.getReplyCode();\r\n                if (!FTPReply.isPositiveCompletion(replyCode)) {\r\n                    StradaAd.errorArea.append(&quot;Operation failed. Server reply code: &quot; + replyCode);\r\n                    return;\r\n                }\r\n                boolean success = ftpClient.login(FTP_USER, FTP_PASSWORD);\r\n                \r\n                if (!success) {\r\n                    //unsuccess\r\n                }\r\n            } catch (IOException ex) {\r\n              //error\r\n            }\r\n        }\r\n          \r\n        public boolean uploadFile(File source, String destination, String chain) {\r\n            try {\r\n                FILE_SIZE = source.length();\r\n                \r\n                ftpClient.cwd(&quot;//&quot; + chain + &quot;/REKLAMY/&quot;);\r\n                \r\n                for(int i=0;i&lt;attempts;i++) {\r\n                    ftpClient.storeFile(destination, new FileInputStream(source));\r\n                  \r\n                    for(FTPFile f : ftpClient.listFiles()) {\r\n                        if(f.getName().equals(destination) &amp;&amp; f.getSize() == source.length())\r\n                            return true;\r\n                    }\r\n                }\r\n                return false;\r\n            } catch (IOException ex) {\r\n                Logger.getLogger(FtpConnection.class.getName()).log(Level.SEVERE, null, ex);\r\n                return false;\r\n            }\r\n        }    \r\n    }\r\n\r\nDo someone know the solution how to change this code or set this FTP server to have the same size uploaded file?\r\nThanks in advance for any help.","title":"Apache Java FTP client does not switch to binary transfer mode on some servers","body":"<p>I'm using org.apache.commons.net.ftp library to work with FTP servers. I use about 5 FTP servers and one of them doesn't work properly (for me). For uploading files I also use method <code>ftpClient.setFileType(FTP.BINARY_FILE_TYPE)</code>, but on this server the size of the uploaded file is not the same as on my local HDD. It is usually MP3 files and when I try to play uploaded MP3 there is some buzz.\nI suspects that FTP server has wrong configuration, but the company which takes care of this server would be very unlikely to do some changes.\nOne more very important note: when I use Total Commander or WinSCP to upload file, the uploaded file is correct with same size.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>public class FtpConnection {\n    String FTP_SERVER;\n    String FTP_USER;\n    String FTP_PASSWORD;\n    int FTP_PORT;\n    FTPClient ftpClient;\n    int attempts = 3;\n    long FILE_SIZE;\n\n    public FtpConnection() {\n        FTP_SERVER = StradaAd.FTP_SERVER;\n        FTP_USER = StradaAd.FTP_USER;\n        FTP_PASSWORD = StradaAd.FTP_PASSWORD;\n        FTP_PORT = StradaAd.FTP_PORT;\n\n        ftpClient = new FTPClient();\n\n        ftpClient.setCopyStreamListener(streamListener);\n\n        ftpClient.setBufferSize(1024 * 1024 * 1024);\n        ftpClient.setConnectTimeout(240000);\n        ftpClient.setDataTimeout(240000);\n        try {\n            ftpClient.connect(FTP_SERVER, FTP_PORT);\n            ftpClient.setControlKeepAliveTimeout(300);\n            ftpClient.enterLocalPassiveMode();\n            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n\n            int replyCode = ftpClient.getReplyCode();\n            if (!FTPReply.isPositiveCompletion(replyCode)) {\n                StradaAd.errorArea.append(\"Operation failed. Server reply code: \" + replyCode);\n                return;\n            }\n            boolean success = ftpClient.login(FTP_USER, FTP_PASSWORD);\n\n            if (!success) {\n                //unsuccess\n            }\n        } catch (IOException ex) {\n          //error\n        }\n    }\n\n    public boolean uploadFile(File source, String destination, String chain) {\n        try {\n            FILE_SIZE = source.length();\n\n            ftpClient.cwd(\"//\" + chain + \"/REKLAMY/\");\n\n            for(int i=0;i&lt;attempts;i++) {\n                ftpClient.storeFile(destination, new FileInputStream(source));\n\n                for(FTPFile f : ftpClient.listFiles()) {\n                    if(f.getName().equals(destination) &amp;&amp; f.getSize() == source.length())\n                        return true;\n                }\n            }\n            return false;\n        } catch (IOException ex) {\n            Logger.getLogger(FtpConnection.class.getName()).log(Level.SEVERE, null, ex);\n            return false;\n        }\n    }    \n}\n</code></pre>\n\n<p>Do someone know the solution how to change this code or set this FTP server to have the same size uploaded file?\nThanks in advance for any help.</p>\n"},{"tags":["java","ftp","sftp","jsch","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1697777988,"creation_date":1568368791,"answer_id":57921452,"question_id":57920774,"body_markdown":"First of all, it is not clear from your question, whether you are aware that JSch and Apache Commons Net `FtpClient` each use completely different and unrelated protocols. JSch is an SSH/SFTP client, while `FtpClient` is an FTP client.\r\n\r\n---\r\n\r\nJSch uses an SFTP protocol version 3.\r\n\r\nIn the SFTP protocol version 3, there are no transfer modes. Or in other words, there is only the *binary* transfer mode.\r\n\r\nAnd even if JSch used a newer version of SFTP protocol, which supports the *ascii* mode, the *binary* mode is the default anyway in SFTP.\r\n\r\n*So you do not have to do anything.*\r\n\r\nThis is in a contrast to the FTP protocol, which defaults to the *ascii* mode. So you have explicitly switch to the *binary* mode with FTP (using the [`FTPClient.setFileType`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileType(int)) in case of the Apache Commons Net).\r\n\r\n---\r\n\r\nAs for the [`FTPClient.setFileTransferMode`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileTransferMode(int)) &amp;ndash; Your FTP code is wrong. The method accepts one of the `*_TRANSFER_MODE` constants. Never the `*_FILE_TYPE`. If you use `BINARY_FILE_TYPE`, it results in sending an invalid `MODE I` command to the server. Which for sure fails, and consequently has no effect at all. Check the method result code, it for sure returns `false`.\r\n\r\nRemove the call from your FTP code. There is no need to call `FTPClient.setFileTransferMode`. Apache Commons Net supports only the default &quot;stream&quot; mode anyway (and most FTP servers do not support any other mode either).\r\n\r\n---\r\n\r\nNote the confusion in the names. The ascii/binary are commonly indeed called &quot;transfer modes&quot;. But in FTP protocol specification (section 3.1.1 of [RFC 959](https://datatracker.ietf.org/doc/html/rfc959)), they are actually called &quot;data types&quot; and are governed using `TYPE` command.\r\n\r\nWhile what FTP specification calls &quot;transmission modes&quot;, governed by `MODE` command (section 3.4), are completely different kind of modes: stream/block/compressed. They are hardly ever set or even mentioned.\r\n\r\nAs Apache Commons Net `FtpClient` confusingly names the method for setting &quot;transmission mode&quot; `.setFileTransferMode`, it frequently leads to the mistakes like you did &amp;ndash; People incorrectly try to use `FTPClient.setFileTransferMode` to switch between the binary/ascii *&quot;data types&quot;*.","title":"How to set file type and file transfer mode in JSch?","body":"<p>First of all, it is not clear from your question, whether you are aware that JSch and Apache Commons Net <code>FtpClient</code> each use completely different and unrelated protocols. JSch is an SSH/SFTP client, while <code>FtpClient</code> is an FTP client.</p>\n<hr />\n<p>JSch uses an SFTP protocol version 3.</p>\n<p>In the SFTP protocol version 3, there are no transfer modes. Or in other words, there is only the <em>binary</em> transfer mode.</p>\n<p>And even if JSch used a newer version of SFTP protocol, which supports the <em>ascii</em> mode, the <em>binary</em> mode is the default anyway in SFTP.</p>\n<p><em>So you do not have to do anything.</em></p>\n<p>This is in a contrast to the FTP protocol, which defaults to the <em>ascii</em> mode. So you have explicitly switch to the <em>binary</em> mode with FTP (using the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileType(int)\" rel=\"nofollow noreferrer\"><code>FTPClient.setFileType</code></a> in case of the Apache Commons Net).</p>\n<hr />\n<p>As for the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setFileTransferMode(int)\" rel=\"nofollow noreferrer\"><code>FTPClient.setFileTransferMode</code></a> – Your FTP code is wrong. The method accepts one of the <code>*_TRANSFER_MODE</code> constants. Never the <code>*_FILE_TYPE</code>. If you use <code>BINARY_FILE_TYPE</code>, it results in sending an invalid <code>MODE I</code> command to the server. Which for sure fails, and consequently has no effect at all. Check the method result code, it for sure returns <code>false</code>.</p>\n<p>Remove the call from your FTP code. There is no need to call <code>FTPClient.setFileTransferMode</code>. Apache Commons Net supports only the default &quot;stream&quot; mode anyway (and most FTP servers do not support any other mode either).</p>\n<hr />\n<p>Note the confusion in the names. The ascii/binary are commonly indeed called &quot;transfer modes&quot;. But in FTP protocol specification (section 3.1.1 of <a href=\"https://datatracker.ietf.org/doc/html/rfc959\" rel=\"nofollow noreferrer\">RFC 959</a>), they are actually called &quot;data types&quot; and are governed using <code>TYPE</code> command.</p>\n<p>While what FTP specification calls &quot;transmission modes&quot;, governed by <code>MODE</code> command (section 3.4), are completely different kind of modes: stream/block/compressed. They are hardly ever set or even mentioned.</p>\n<p>As Apache Commons Net <code>FtpClient</code> confusingly names the method for setting &quot;transmission mode&quot; <code>.setFileTransferMode</code>, it frequently leads to the mistakes like you did – People incorrectly try to use <code>FTPClient.setFileTransferMode</code> to switch between the binary/ascii <em>&quot;data types&quot;</em>.</p>\n"}],"owner":{"account_id":15192407,"reputation":163,"user_id":10979419,"display_name":"Ivan Karotki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3508,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57921452,"answer_count":1,"score":3,"last_activity_date":1697777988,"creation_date":1568366477,"question_id":57920774,"body_markdown":"I used Apache Common Net `FTPClient` and had setup my `ftpClient` with methods shown below before upload file.\r\n\r\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n    ftpClient.setFileTransferMode(FTP.BINARY_FILE_TYPE);\r\n\r\nNow I try to use JSch. Is there same setting needed before file uploading and how they looks like? Thanks.","title":"How to set file type and file transfer mode in JSch?","body":"<p>I used Apache Common Net <code>FTPClient</code> and had setup my <code>ftpClient</code> with methods shown below before upload file.</p>\n\n<pre><code>ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\nftpClient.setFileTransferMode(FTP.BINARY_FILE_TYPE);\n</code></pre>\n\n<p>Now I try to use JSch. Is there same setting needed before file uploading and how they looks like? Thanks.</p>\n"},{"tags":["java","ftp","ftp-client","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697777943,"creation_date":1551705532,"answer_id":54984155,"question_id":54974080,"body_markdown":"You may need to use UTF-8 encoding. First thing to try is to call [`FTPClient.setAutodetectUTF8`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setAutodetectUTF8(boolean)):\r\n\r\n    ftpClient.setAutodetectUTF8(true);\r\n\r\n(call that before connecting)\r\n\r\nThat should fix the problem your question is about.\r\n\r\n---\r\n\r\nOnce you resolve the file name issue, you will need to fix transfer mode issue. You are transferring binary files (PDF) in text mode.\r\n\r\nYou need to use binary mode:\r\n\r\n    ftpClient.setFileType(FTP.BINARY_FILE_TYPE);","title":"Can&#39;t download files with Arabic name with Java FTP client","body":"<p>You may need to use UTF-8 encoding. First thing to try is to call <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#setAutodetectUTF8(boolean)\" rel=\"nofollow noreferrer\"><code>FTPClient.setAutodetectUTF8</code></a>:</p>\n<pre><code>ftpClient.setAutodetectUTF8(true);\n</code></pre>\n<p>(call that before connecting)</p>\n<p>That should fix the problem your question is about.</p>\n<hr />\n<p>Once you resolve the file name issue, you will need to fix transfer mode issue. You are transferring binary files (PDF) in text mode.</p>\n<p>You need to use binary mode:</p>\n<pre><code>ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n</code></pre>\n"}],"owner":{"account_id":1138589,"reputation":391,"user_id":1123111,"display_name":"osfar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":907,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":54984155,"answer_count":1,"score":2,"last_activity_date":1697777943,"creation_date":1551649733,"question_id":54974080,"body_markdown":"I have Java code that connects to an FTP server and downloads files.\r\nIf the file name contains Arabic letters, then it always fails to download.\r\nBut if it&#39;s English, it downloads successfully.\r\n\r\nThis is my code.  \r\nIf the path is like this then it fails to download:\r\n\r\n\r\n    String actualFileLocation =\r\n        &quot;/RelatedDocumentUploads\\\\...\\\\2017-S2\\\\تقرير الربع الرابع تقرير 2017 (006)senton(18-01-2017).pdf&quot; ;\r\n\r\nBut if it&#39;s like the following it works fine:\r\n\r\n    String actualFileLocation =\r\n        &quot;/RelatedDocumentUploads\\\\...\\\\2017-S2\\\\RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG&quot; ;\r\n\r\nThe rest of the code:\r\n\r\n\tint index = actualFileLocation.lastIndexOf(&quot;\\\\&quot;);\r\n\tint extIndex = actualFileLocation.lastIndexOf(&quot;.&quot;);\r\n\tString fileName = actualFileLocation.substring(index + 1, extIndex);\r\n\tString extensn = actualFileLocation.substring(extIndex, actualFileLocation.length());\r\n\tFile parent = new File(System.getProperty(&quot;java.io.tmpdir&quot;));\r\n\tFile tempFile = new File(parent, fileName + extensn);\r\n\ttempFile.createNewFile();\r\n\tOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(tempFile));\r\n\tboolean success = ftpClient.retrieveFile(actualFileLocation, outputStream);\r\n\r\nFTP client is from type : `public class org.apache.commons.net.ftp.FTPClient`\r\n\r\nWhat&#39;s is wrong with my code?\r\n\r\nThis is the output of the of the log:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    PASV\r\n    227 Entering Passive Mode (10,110,103,31,215,6)\r\n    RETR /RelatedDocumentUploads\\Entities\\RCJY\\KPI\\Documents\\RCJY.O5.K2\\Supporting Document\\2017-S2\\تقرير الربع الرابع تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\r\n    550 File not found\r\n\r\n\r\nAnd this is the log from WinSCP client, which downloads the file successfully:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    . 2019-03-04 17:47:22.289 --------------------------------------------------------------------------\r\n    . 2019-03-04 17:47:22.290 WinSCP Version 5.13.7 (Build 9125) (OS 6.1.7601 Service Pack 1 - Windows 7 Professional)\r\n    . 2019-03-04 17:47:22.290 Configuration: HKCU\\Software\\Martin Prikryl\\WinSCP 2\\\r\n    . 2019-03-04 17:47:22.290 Log level: Normal\r\n    . 2019-03-04 17:47:22.290 Local account: MyPC-EG\\PCHome\r\n    . 2019-03-04 17:47:22.290 Working directory: C:\\Program Files (x86)\\WinSCP\r\n    . 2019-03-04 17:47:22.290 Process ID: 13160\r\n    . 2019-03-04 17:47:22.291 Command-line: &quot;C:\\Program Files (x86)\\WinSCP\\WinSCP.exe&quot; \r\n    . 2019-03-04 17:47:22.291 Time zone: Current: GMT+2 (Egypt Standard Time), No DST\r\n    . 2019-03-04 17:47:22.291 Login time: Monday, March 04, 2019 5:47:22 PM\r\n    . 2019-03-04 17:47:22.291 --------------------------------------------------------------------------\r\n    . 2019-03-04 17:47:22.291 Session name: user@10.110.111.111 (Ad-Hoc site)\r\n    . 2019-03-04 17:47:22.291 Host name: 10.110.111.111 (Port: 21)\r\n    . 2019-03-04 17:47:22.291 User name: user (Password: No, Key file: No, Passphrase: No)\r\n    . 2019-03-04 17:47:22.291 Transfer Protocol: FTP\r\n    . 2019-03-04 17:47:22.291 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\r\n    . 2019-03-04 17:47:22.292 Disable Nagle: No\r\n    . 2019-03-04 17:47:22.292 Proxy: None\r\n    . 2019-03-04 17:47:22.292 Send buffer: 262144\r\n    . 2019-03-04 17:47:22.292 UTF: Auto\r\n    . 2019-03-04 17:47:22.292 FTPS: None [Client certificate: No]\r\n    . 2019-03-04 17:47:22.292 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\r\n    . 2019-03-04 17:47:22.292 Local directory: default, Remote directory: home, Update: Yes, Cache: Yes\r\n    . 2019-03-04 17:47:22.292 Cache directory changes: Yes, Permanent: Yes\r\n    . 2019-03-04 17:47:22.292 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \r\n    . 2019-03-04 17:47:22.292 Timezone offset: 0h 0m\r\n    . 2019-03-04 17:47:22.292 --------------------------------------------------------------------------\r\n    . 2019-03-04 17:47:22.354 Connecting to 10.110.103.31 ...\r\n    . 2019-03-04 17:47:22.804 Connected with 10.110.103.31. Waiting for welcome message...\r\n    &lt; 2019-03-04 17:47:23.286 220-FileZilla Server 0.9.60 beta\r\n    &lt; 2019-03-04 17:47:23.286 220-\r\n    &lt; 2019-03-04 17:47:23.286 220 EMP FTP\r\n    &gt; 2019-03-04 17:47:23.286 USER user\r\n    &lt; 2019-03-04 17:47:23.780 331 Password required for user\r\n    &gt; 2019-03-04 17:47:29.603 PASS **********\r\n    &lt; 2019-03-04 17:47:30.092 230 Logged on\r\n    &gt; 2019-03-04 17:47:30.093 SYST\r\n    &lt; 2019-03-04 17:47:30.585 215 UNIX emulated by FileZilla\r\n    &gt; 2019-03-04 17:47:30.585 FEAT\r\n    &lt; 2019-03-04 17:47:31.078 211-Features:\r\n    &lt; 2019-03-04 17:47:31.078  MDTM\r\n    &lt; 2019-03-04 17:47:31.078  REST STREAM\r\n    &lt; 2019-03-04 17:47:31.078  SIZE\r\n    &lt; 2019-03-04 17:47:31.078  MLST type*;size*;modify*;\r\n    &lt; 2019-03-04 17:47:31.078  MLSD\r\n    &lt; 2019-03-04 17:47:31.078  UTF8\r\n    &lt; 2019-03-04 17:47:31.078  CLNT\r\n    &lt; 2019-03-04 17:47:31.078  MFMT\r\n    &lt; 2019-03-04 17:47:31.078  EPSV\r\n    &lt; 2019-03-04 17:47:31.078  EPRT\r\n    &lt; 2019-03-04 17:47:31.079 211 End\r\n    &gt; 2019-03-04 17:47:31.088 CLNT WinSCP-release-5.13.7\r\n    &lt; 2019-03-04 17:47:31.578 200 Don&#39;t care\r\n    &gt; 2019-03-04 17:47:31.578 OPTS UTF8 ON\r\n    &lt; 2019-03-04 17:47:32.067 202 UTF8 mode is always enabled. No need to send this command.\r\n    . 2019-03-04 17:47:32.090 Connected\r\n    . 2019-03-04 17:47:32.090 --------------------------------------------------------------------------\r\n    . 2019-03-04 17:47:32.091 Using FTP protocol.\r\n    . 2019-03-04 17:47:32.091 Doing startup conversation with host.\r\n    &gt; 2019-03-04 17:47:32.107 PWD\r\n    &lt; 2019-03-04 17:47:32.601 257 &quot;/&quot; is current directory.\r\n    . 2019-03-04 17:47:32.601 Getting current directory name.\r\n    . 2019-03-04 17:47:32.629 Retrieving directory listing...\r\n    &gt; 2019-03-04 17:47:32.629 TYPE A\r\n    &lt; 2019-03-04 17:47:33.120 200 Type set to A\r\n    &gt; 2019-03-04 17:47:33.121 PASV\r\n    &lt; 2019-03-04 17:47:33.588 227 Entering Passive Mode (10,110,103,31,193,94)\r\n    &gt; 2019-03-04 17:47:33.589 MLSD\r\n    . 2019-03-04 17:47:33.589 Connecting to 10.110.111.111:49502 ...\r\n    &lt; 2019-03-04 17:47:34.544 150 Opening data channel for directory listing of &quot;/&quot;\r\n    . 2019-03-04 17:47:34.545 Data connection closed\r\n    . 2019-03-04 17:47:34.546 type=dir;modify=20190224133717; RelatedDocumentUploads\r\n    . 2019-03-04 17:47:34.546 type=dir;modify=20190217090137; RelatedDocumentUploads_UAT\r\n    &lt; 2019-03-04 17:47:34.555 226 Successfully transferred &quot;/&quot;\r\n    . 2019-03-04 17:47:34.555 Directory listing successful\r\n    . 2019-03-04 17:47:34.556 ..;D;0;1899-12-30T02:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:34.556 RelatedDocumentUploads;D;0;2019-02-24T13:37:17.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:34.556 RelatedDocumentUploads_UAT;D;0;2019-02-17T09:01:37.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:34.594 Startup conversation with host finished.\r\n    . 2019-03-04 17:47:53.904 Changing directory to &quot;/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2\\Supporting Document\\&quot;.\r\n    &gt; 2019-03-04 17:47:53.912 CWD /RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2\\Supporting Document\\\r\n    &lt; 2019-03-04 17:47:54.398 250 CWD successful. &quot;/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\ddddRCJY.O5.K2/Supporting Document&quot; is current directory.\r\n    . 2019-03-04 17:47:54.399 Getting current directory name.\r\n    &gt; 2019-03-04 17:47:54.399 PWD\r\n    &lt; 2019-03-04 17:47:54.893 257 &quot;/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2/Supporting Document&quot; is current directory.\r\n    . 2019-03-04 17:47:54.894 Retrieving directory listing...\r\n    &gt; 2019-03-04 17:47:54.894 TYPE A\r\n    &lt; 2019-03-04 17:47:55.383 200 Type set to A\r\n    &gt; 2019-03-04 17:47:55.384 PASV\r\n    &lt; 2019-03-04 17:47:55.878 227 Entering Passive Mode (10,110,103,31,194,79)\r\n    &gt; 2019-03-04 17:47:55.878 MLSD\r\n    . 2019-03-04 17:47:55.878 Connecting to 10.111.111.111:49743 ...\r\n    . 2019-03-04 17:47:56.855 Data connection closed\r\n    &lt; 2019-03-04 17:47:56.855 150 Opening data channel for directory listing of &quot;/RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document&quot;\r\n    &lt; 2019-03-04 17:47:56.855 226 Successfully transferred &quot;/RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document&quot;\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2016-S1\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2016-S2\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20190224134557; 2017-S1\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20190224134557; 2017-S2\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20190224134600; 2018-S1\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20190224134600; 2018-S2\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2019-S1\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2019-S2\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2020-S1\r\n    . 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2020-S2\r\n    . 2019-03-04 17:47:56.856 Directory listing successful\r\n    . 2019-03-04 17:47:56.857 ..;D;0;1899-12-30T02:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2016-S1;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2016-S2;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2017-S1;D;0;2019-02-24T13:45:57.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2017-S2;D;0;2019-02-24T13:45:57.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2018-S1;D;0;2019-02-24T13:46:00.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.857 2018-S2;D;0;2019-02-24T13:46:00.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.858 2019-S1;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.858 2019-S2;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.858 2020-S1;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:56.858 2020-S2;D;0;2018-10-25T07:31:48.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:47:59.134 Changing directory to &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2&quot;.\r\n    &gt; 2019-03-04 17:47:59.139 CWD /RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document/2016-S2\r\n    &lt; 2019-03-04 17:47:59.627 250 CWD successful. &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2&quot; is current directory.\r\n    . 2019-03-04 17:47:59.627 Getting current directory name.\r\n    &gt; 2019-03-04 17:47:59.628 PWD\r\n    &lt; 2019-03-04 17:48:00.123 257 &quot;/RelatedDocumentUploads/aaaa/bbb/cccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2&quot; is current directory.\r\n    . 2019-03-04 17:48:00.124 Retrieving directory listing...\r\n    &gt; 2019-03-04 17:48:00.124 TYPE A\r\n    &lt; 2019-03-04 17:48:00.617 200 Type set to A\r\n    &gt; 2019-03-04 17:48:00.618 PASV\r\n    &lt; 2019-03-04 17:48:01.113 227 Entering Passive Mode (10,110,103,31,215,238)\r\n    &gt; 2019-03-04 17:48:01.113 MLSD\r\n    . 2019-03-04 17:48:01.113 Connecting to 10.110.103.31:55278 ...\r\n    . 2019-03-04 17:48:02.095 Data connection closed\r\n    &lt; 2019-03-04 17:48:02.096 150 Opening data channel for directory listing of &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2&quot;\r\n    &lt; 2019-03-04 17:48:02.096 226 Successfully transferred &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2&quot;\r\n    . 2019-03-04 17:48:02.096 &lt;Empty directory listing&gt;\r\n    . 2019-03-04 17:48:02.096 Directory listing successful\r\n    . 2019-03-04 17:48:02.096 ..;D;0;1899-12-30T02:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:06.055 Cached directory change via &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2&quot; to &quot;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2&quot;.\r\n    . 2019-03-04 17:48:06.055 Getting current directory name.\r\n    . 2019-03-04 17:48:06.061 Retrieving directory listing...\r\n    &gt; 2019-03-04 17:48:06.061 CWD /RelatedDocumentUploads/aaa/bbb/ccc/dddd/RCJY.O5.K2/Supporting Document/2017-S2\r\n    &lt; 2019-03-04 17:48:06.553 250 CWD successful. &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2&quot; is current directory.\r\n    &gt; 2019-03-04 17:48:06.553 PWD\r\n    &lt; 2019-03-04 17:48:07.047 257 &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2&quot; is current directory.\r\n    &gt; 2019-03-04 17:48:07.048 TYPE A\r\n    &lt; 2019-03-04 17:48:07.539 200 Type set to A\r\n    &gt; 2019-03-04 17:48:07.539 PASV\r\n    &lt; 2019-03-04 17:48:08.034 227 Entering Passive Mode (10,110,103,31,206,23)\r\n    &gt; 2019-03-04 17:48:08.034 MLSD\r\n    . 2019-03-04 17:48:08.034 Connecting to 10.110.103.31:52759 ...\r\n    &lt; 2019-03-04 17:48:11.885 150 Opening data channel for directory listing of &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2&quot;\r\n    . 2019-03-04 17:48:11.885 Data connection closed\r\n    . 2019-03-04 17:48:11.885 type=file;modify=20180116032646;size=56290; RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG\r\n    . 2019-03-04 17:48:11.885 type=file;modify=20180116032658;size=304601; RCJY O5.K2 -D6(Q4) 2017-Doc 2.pdf\r\n    . 2019-03-04 17:48:11.885 type=dir;modify=20190224134558; &#216;&#167;&#217;„&#216;&#172;&#216;&#168;&#217;Š&#217;„ &#217;ˆ&#216;&#177;&#216;&#163;&#216;&#179; &#216;&#167;&#217;„&#216;&#174;&#217;Š&#216;&#177;\r\n    . 2019-03-04 17:48:11.886 type=file;modify=20180118145415;size=1223036; &#216;&#170;&#217;‚&#216;&#177;&#217;Š&#216;&#177; &#216;&#167;&#217;„&#216;&#177;&#216;&#168;&#216;&#185; &#216;&#167;&#217;„&#216;&#177;&#216;&#167;&#216;&#168;&#216;&#185; &#217;„&#217;…&#216;&#164;&#216;&#180;&#216;&#177;&#216;&#167;&#216;&#170; &#216;&#167;&#217;„&#217;‡&#217;Š&#216;&#166;&#216;&#169; &#216;&#167;&#217;„&#217;…&#217;„&#217;ƒ&#217;Š&#216;&#169; &#217;„&#217;„&#216;&#172;&#216;&#168;&#217;Š&#217;„ &#217;ˆ&#217;Š&#217;†&#216;&#168;&#216;&#185; 2017 (006)senton(18-01-2017).pdf\r\n    &lt; 2019-03-04 17:48:11.886 226 Successfully transferred &quot;/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2&quot;\r\n    . 2019-03-04 17:48:11.886 Directory listing successful\r\n    . 2019-03-04 17:48:11.886 ..;D;0;1899-12-30T02:00:00.000Z;0;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:11.886 RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG;-;56290;2018-01-16T03:26:46.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:11.886 RCJY O5.K2 -D6(Q4) 2017-Doc 2.pdf;-;304601;2018-01-16T03:26:58.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:11.886 علم علم علم علم;D;0;2019-02-24T13:45:58.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:11.887 التقرير التقرير التقرير التقرير القريري2017 (006)senton(18-01-2017).pdf;-;1223036;2018-01-18T14:54:15.000Z;3;&quot;&quot; [0];&quot;&quot; [0];---------;0\r\n    . 2019-03-04 17:48:20.443 Copying 1 files/directories to local directory &quot;C:\\Users\\yser\\Documents\\&quot; - total size: 1,223,036\r\n    . 2019-03-04 17:48:20.443   PrTime: Yes; PrRO: No; Rght: rw-r--r--; PrR: No (No); FnCs: N; RIC: 0100; Resume: S (102400); CalcS: Yes; Mask: *.*\r\n    . 2019-03-04 17:48:20.443   TM: B; ClAr: No; RemEOF: No; RemBOM: No; CPS: 0; NewerOnly: No; InclM: ; ResumeL: 0\r\n    . 2019-03-04 17:48:20.443   AscM: *.*html; *.htm; *.txt; *.php; *.php3; *.cgi; *.c; *.cpp; *.h; *.pas; *.bas; *.tex; *.pl; *.js; .htaccess; *.xtml; *.css; *.cfg; *.ini; *.sh; *.xml\r\n    . 2019-03-04 17:48:20.443 File: &#39;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير2017 (006)senton(18-01-2017).pdf&#39; [2018-01-18T14:54:15.000Z] [1223036]\r\n    . 2019-03-04 17:48:20.447 Copying &quot;/RelatedDocumentUploads/aaa/bbb/ccc/dddd/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&quot; to local directory started.\r\n    . 2019-03-04 17:48:20.448 Binary transfer mode selected.\r\n    . 2019-03-04 17:48:20.448 Starting download of /RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\r\n    . 2019-03-04 17:48:20.449 Asking user:\r\n    . 2019-03-04 17:48:20.449 **Overwrite local file &#39;تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&#39;?**\r\n    . 2019-03-04 17:48:20.449 \r\n    . 2019-03-04 17:48:20.449 Destination directory already contains file &#39;تقرير تقرير تقرير تقرير تقرير2017 (006)senton(18-01-2017).pdf&#39;.\r\n    . 2019-03-04 17:48:20.449 Choose, if you want to overwrite the file or skip this transfer and keep existing file.\r\n    . 2019-03-04 17:48:20.449  \r\n    . 2019-03-04 17:48:20.449 New:      \t1,223,036 bytes, 1/18/2018 4:54:15 PM\r\n    . 2019-03-04 17:48:20.449 Existing: \t1,223,036 bytes, 1/18/2018 4:54:15 PM ()\r\n    &gt; 2019-03-04 17:48:21.721 TYPE I\r\n    &lt; 2019-03-04 17:48:22.207 200 Type set to I\r\n    &gt; 2019-03-04 17:48:22.207 PASV\r\n    &lt; 2019-03-04 17:48:22.702 227 Entering Passive Mode (10,110,103,31,236,137)\r\n    &gt; 2019-03-04 17:48:22.712 RETR تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\r\n    . 2019-03-04 17:48:22.712 Connecting to 10.110.103.31:60553 ...\r\n    &lt; 2019-03-04 17:48:24.082 150 Opening data channel for file download from server of &quot;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&quot;\r\n    . 2019-03-04 17:48:30.748 Data connection closed\r\n    &lt; 2019-03-04 17:48:30.748 226 Successfully transferred &quot;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&quot;\r\n    . 2019-03-04 17:48:30.748 Preserving timestamp [2018-01-18T14:54:15.000Z]\r\n    . 2019-03-04 17:48:30.750 Download successful\r\n    . 2019-03-04 17:48:30.750 Transfer done: &#39;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&#39; =&gt; &#39;C:\\Users\\osmohame\\Documents\\تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&#39; [1223036]\r\n    . 2019-03-04 17:48:30.766 Copying finished: Transferred: 1,223,036, Elapsed: 0:00:10, CPS: 182,733/s\r\n    . 2019-03-04 17:48:37.731 Disconnected from server\r\n\r\nAnd this is the code that initializes the connection to the FTP server:\r\n\r\n    logger.info(&quot;Creating the ftp connection using the details&quot;);\r\n    String ftpServerAddress = wccInstanceDetails.get(&quot;ftpServer&quot;);\r\n    String ftpPort = wccInstanceDetails.get(&quot;ftpPort&quot;);\r\n    String ftpUserName = wccInstanceDetails.get(&quot;ftpUser&quot;);\r\n    String ftpPassword = wccInstanceDetails.get(&quot;ftppassword&quot;);\r\n    FTPClient ftpClient = new FTPClient();\r\n    try {\r\n    \t//added here\r\n    \tftpClient.setAutodetectUTF8(true);\r\n    \t\r\n    \tftpClient.connect(ftpServerAddress, Integer.parseInt(ftpPort));\r\n    \tftpClient.login(ftpUserName, ftpPassword);\r\n    \tftpClient.enterLocalPassiveMode();\r\n    \tftpClient.setFileType(FTP.ASCII_FILE_TYPE);\r\n    } catch (IOException ex) {\r\n    \tlogger.error(&quot;Error occurs while creating the FTP connection : &quot; + ex.getMessage());\r\n    }\r\n    return ftpClient;\r\n\r\n---\r\n\r\nAfter adding the `setautodetectUTF(true)`, the output is changed, but the file is downloaded corrupted:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    2019-03-04 16:05:10 INFO  FtpConnection:17 - Creating the ftp connection using the details\r\n    2019-03-04 16:05:10 INFO  FtpConnection:19 - 10.110.103.31\r\n    2019-03-04 16:05:10 INFO  FtpConnection:21 - 21\r\n    2019-03-04 16:05:10 INFO  FtpConnection:38 - true\r\n    220-FileZilla Server 0.9.60 beta\r\n    220-\r\n    220 EMP FTP\r\n    FEAT\r\n    211-Features:\r\n     MDTM\r\n     REST STREAM\r\n     SIZE\r\n     MLST type*;size*;modify*;\r\n     MLSD\r\n     UTF8\r\n     CLNT\r\n     MFMT\r\n     EPSV\r\n     EPRT\r\n    211 End\r\n    USER *******\r\n    331 Password required for epmftp\r\n    PASS *******\r\n    230 Logged on\r\n    TYPE A\r\n    200 Type set to A\r\n    PASV\r\n    227 Entering Passive Mode (10,110,103,31,224,65)\r\n    RETR /RelatedDocumentUploads\\Entities\\RCJY\\KPI\\Documents\\RCJY.O5.K2\\Supporting Document\\2017-S2\\تقرير تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\r\n    150 Opening data channel for file download from server of &quot;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf&quot;\r\n    226 Successfully transferred &quot;/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير الربع الرابع لمؤشرات تقرير تقرير تقرير (006)senton(18-01-2017).pdf&quot;\r\n\r\n\r\n","title":"Can&#39;t download files with Arabic name with Java FTP client","body":"<p>I have Java code that connects to an FTP server and downloads files.\nIf the file name contains Arabic letters, then it always fails to download.\nBut if it's English, it downloads successfully.</p>\n\n<p>This is my code.<br>\nIf the path is like this then it fails to download:</p>\n\n<pre><code>String actualFileLocation =\n    \"/RelatedDocumentUploads\\\\...\\\\2017-S2\\\\تقرير الربع الرابع تقرير 2017 (006)senton(18-01-2017).pdf\" ;\n</code></pre>\n\n<p>But if it's like the following it works fine:</p>\n\n<pre><code>String actualFileLocation =\n    \"/RelatedDocumentUploads\\\\...\\\\2017-S2\\\\RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG\" ;\n</code></pre>\n\n<p>The rest of the code:</p>\n\n<pre><code>int index = actualFileLocation.lastIndexOf(\"\\\\\");\nint extIndex = actualFileLocation.lastIndexOf(\".\");\nString fileName = actualFileLocation.substring(index + 1, extIndex);\nString extensn = actualFileLocation.substring(extIndex, actualFileLocation.length());\nFile parent = new File(System.getProperty(\"java.io.tmpdir\"));\nFile tempFile = new File(parent, fileName + extensn);\ntempFile.createNewFile();\nOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(tempFile));\nboolean success = ftpClient.retrieveFile(actualFileLocation, outputStream);\n</code></pre>\n\n<p>FTP client is from type : <code>public class org.apache.commons.net.ftp.FTPClient</code></p>\n\n<p>What's is wrong with my code?</p>\n\n<p>This is the output of the of the log:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>PASV\n227 Entering Passive Mode (10,110,103,31,215,6)\nRETR /RelatedDocumentUploads\\Entities\\RCJY\\KPI\\Documents\\RCJY.O5.K2\\Supporting Document\\2017-S2\\تقرير الربع الرابع تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\n550 File not found\n</code></pre>\n\n<p>And this is the log from WinSCP client, which downloads the file successfully:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>. 2019-03-04 17:47:22.289 --------------------------------------------------------------------------\n. 2019-03-04 17:47:22.290 WinSCP Version 5.13.7 (Build 9125) (OS 6.1.7601 Service Pack 1 - Windows 7 Professional)\n. 2019-03-04 17:47:22.290 Configuration: HKCU\\Software\\Martin Prikryl\\WinSCP 2\\\n. 2019-03-04 17:47:22.290 Log level: Normal\n. 2019-03-04 17:47:22.290 Local account: MyPC-EG\\PCHome\n. 2019-03-04 17:47:22.290 Working directory: C:\\Program Files (x86)\\WinSCP\n. 2019-03-04 17:47:22.290 Process ID: 13160\n. 2019-03-04 17:47:22.291 Command-line: \"C:\\Program Files (x86)\\WinSCP\\WinSCP.exe\" \n. 2019-03-04 17:47:22.291 Time zone: Current: GMT+2 (Egypt Standard Time), No DST\n. 2019-03-04 17:47:22.291 Login time: Monday, March 04, 2019 5:47:22 PM\n. 2019-03-04 17:47:22.291 --------------------------------------------------------------------------\n. 2019-03-04 17:47:22.291 Session name: user@10.110.111.111 (Ad-Hoc site)\n. 2019-03-04 17:47:22.291 Host name: 10.110.111.111 (Port: 21)\n. 2019-03-04 17:47:22.291 User name: user (Password: No, Key file: No, Passphrase: No)\n. 2019-03-04 17:47:22.291 Transfer Protocol: FTP\n. 2019-03-04 17:47:22.291 Ping type: Dummy, Ping interval: 30 sec; Timeout: 15 sec\n. 2019-03-04 17:47:22.292 Disable Nagle: No\n. 2019-03-04 17:47:22.292 Proxy: None\n. 2019-03-04 17:47:22.292 Send buffer: 262144\n. 2019-03-04 17:47:22.292 UTF: Auto\n. 2019-03-04 17:47:22.292 FTPS: None [Client certificate: No]\n. 2019-03-04 17:47:22.292 FTP: Passive: Yes [Force IP: Auto]; MLSD: Auto [List all: Auto]; HOST: Auto\n. 2019-03-04 17:47:22.292 Local directory: default, Remote directory: home, Update: Yes, Cache: Yes\n. 2019-03-04 17:47:22.292 Cache directory changes: Yes, Permanent: Yes\n. 2019-03-04 17:47:22.292 Recycle bin: Delete to: No, Overwritten to: No, Bin path: \n. 2019-03-04 17:47:22.292 Timezone offset: 0h 0m\n. 2019-03-04 17:47:22.292 --------------------------------------------------------------------------\n. 2019-03-04 17:47:22.354 Connecting to 10.110.103.31 ...\n. 2019-03-04 17:47:22.804 Connected with 10.110.103.31. Waiting for welcome message...\n&lt; 2019-03-04 17:47:23.286 220-FileZilla Server 0.9.60 beta\n&lt; 2019-03-04 17:47:23.286 220-\n&lt; 2019-03-04 17:47:23.286 220 EMP FTP\n&gt; 2019-03-04 17:47:23.286 USER user\n&lt; 2019-03-04 17:47:23.780 331 Password required for user\n&gt; 2019-03-04 17:47:29.603 PASS **********\n&lt; 2019-03-04 17:47:30.092 230 Logged on\n&gt; 2019-03-04 17:47:30.093 SYST\n&lt; 2019-03-04 17:47:30.585 215 UNIX emulated by FileZilla\n&gt; 2019-03-04 17:47:30.585 FEAT\n&lt; 2019-03-04 17:47:31.078 211-Features:\n&lt; 2019-03-04 17:47:31.078  MDTM\n&lt; 2019-03-04 17:47:31.078  REST STREAM\n&lt; 2019-03-04 17:47:31.078  SIZE\n&lt; 2019-03-04 17:47:31.078  MLST type*;size*;modify*;\n&lt; 2019-03-04 17:47:31.078  MLSD\n&lt; 2019-03-04 17:47:31.078  UTF8\n&lt; 2019-03-04 17:47:31.078  CLNT\n&lt; 2019-03-04 17:47:31.078  MFMT\n&lt; 2019-03-04 17:47:31.078  EPSV\n&lt; 2019-03-04 17:47:31.078  EPRT\n&lt; 2019-03-04 17:47:31.079 211 End\n&gt; 2019-03-04 17:47:31.088 CLNT WinSCP-release-5.13.7\n&lt; 2019-03-04 17:47:31.578 200 Don't care\n&gt; 2019-03-04 17:47:31.578 OPTS UTF8 ON\n&lt; 2019-03-04 17:47:32.067 202 UTF8 mode is always enabled. No need to send this command.\n. 2019-03-04 17:47:32.090 Connected\n. 2019-03-04 17:47:32.090 --------------------------------------------------------------------------\n. 2019-03-04 17:47:32.091 Using FTP protocol.\n. 2019-03-04 17:47:32.091 Doing startup conversation with host.\n&gt; 2019-03-04 17:47:32.107 PWD\n&lt; 2019-03-04 17:47:32.601 257 \"/\" is current directory.\n. 2019-03-04 17:47:32.601 Getting current directory name.\n. 2019-03-04 17:47:32.629 Retrieving directory listing...\n&gt; 2019-03-04 17:47:32.629 TYPE A\n&lt; 2019-03-04 17:47:33.120 200 Type set to A\n&gt; 2019-03-04 17:47:33.121 PASV\n&lt; 2019-03-04 17:47:33.588 227 Entering Passive Mode (10,110,103,31,193,94)\n&gt; 2019-03-04 17:47:33.589 MLSD\n. 2019-03-04 17:47:33.589 Connecting to 10.110.111.111:49502 ...\n&lt; 2019-03-04 17:47:34.544 150 Opening data channel for directory listing of \"/\"\n. 2019-03-04 17:47:34.545 Data connection closed\n. 2019-03-04 17:47:34.546 type=dir;modify=20190224133717; RelatedDocumentUploads\n. 2019-03-04 17:47:34.546 type=dir;modify=20190217090137; RelatedDocumentUploads_UAT\n&lt; 2019-03-04 17:47:34.555 226 Successfully transferred \"/\"\n. 2019-03-04 17:47:34.555 Directory listing successful\n. 2019-03-04 17:47:34.556 ..;D;0;1899-12-30T02:00:00.000Z;0;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:34.556 RelatedDocumentUploads;D;0;2019-02-24T13:37:17.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:34.556 RelatedDocumentUploads_UAT;D;0;2019-02-17T09:01:37.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:34.594 Startup conversation with host finished.\n. 2019-03-04 17:47:53.904 Changing directory to \"/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2\\Supporting Document\\\".\n&gt; 2019-03-04 17:47:53.912 CWD /RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2\\Supporting Document\\\n&lt; 2019-03-04 17:47:54.398 250 CWD successful. \"/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\ddddRCJY.O5.K2/Supporting Document\" is current directory.\n. 2019-03-04 17:47:54.399 Getting current directory name.\n&gt; 2019-03-04 17:47:54.399 PWD\n&lt; 2019-03-04 17:47:54.893 257 \"/RelatedDocumentUploads\\aaaa\\bbbb\\cccc\\dddd\\RCJY.O5.K2/Supporting Document\" is current directory.\n. 2019-03-04 17:47:54.894 Retrieving directory listing...\n&gt; 2019-03-04 17:47:54.894 TYPE A\n&lt; 2019-03-04 17:47:55.383 200 Type set to A\n&gt; 2019-03-04 17:47:55.384 PASV\n&lt; 2019-03-04 17:47:55.878 227 Entering Passive Mode (10,110,103,31,194,79)\n&gt; 2019-03-04 17:47:55.878 MLSD\n. 2019-03-04 17:47:55.878 Connecting to 10.111.111.111:49743 ...\n. 2019-03-04 17:47:56.855 Data connection closed\n&lt; 2019-03-04 17:47:56.855 150 Opening data channel for directory listing of \"/RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document\"\n&lt; 2019-03-04 17:47:56.855 226 Successfully transferred \"/RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document\"\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2016-S1\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2016-S2\n. 2019-03-04 17:47:56.856 type=dir;modify=20190224134557; 2017-S1\n. 2019-03-04 17:47:56.856 type=dir;modify=20190224134557; 2017-S2\n. 2019-03-04 17:47:56.856 type=dir;modify=20190224134600; 2018-S1\n. 2019-03-04 17:47:56.856 type=dir;modify=20190224134600; 2018-S2\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2019-S1\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2019-S2\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2020-S1\n. 2019-03-04 17:47:56.856 type=dir;modify=20181025073148; 2020-S2\n. 2019-03-04 17:47:56.856 Directory listing successful\n. 2019-03-04 17:47:56.857 ..;D;0;1899-12-30T02:00:00.000Z;0;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2016-S1;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2016-S2;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2017-S1;D;0;2019-02-24T13:45:57.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2017-S2;D;0;2019-02-24T13:45:57.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2018-S1;D;0;2019-02-24T13:46:00.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.857 2018-S2;D;0;2019-02-24T13:46:00.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.858 2019-S1;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.858 2019-S2;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.858 2020-S1;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:56.858 2020-S2;D;0;2018-10-25T07:31:48.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:47:59.134 Changing directory to \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2\".\n&gt; 2019-03-04 17:47:59.139 CWD /RelatedDocumentUploads/aaaa/bbbb/cccc/dddd/RCJY.O5.K2/Supporting Document/2016-S2\n&lt; 2019-03-04 17:47:59.627 250 CWD successful. \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2\" is current directory.\n. 2019-03-04 17:47:59.627 Getting current directory name.\n&gt; 2019-03-04 17:47:59.628 PWD\n&lt; 2019-03-04 17:48:00.123 257 \"/RelatedDocumentUploads/aaaa/bbb/cccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2\" is current directory.\n. 2019-03-04 17:48:00.124 Retrieving directory listing...\n&gt; 2019-03-04 17:48:00.124 TYPE A\n&lt; 2019-03-04 17:48:00.617 200 Type set to A\n&gt; 2019-03-04 17:48:00.618 PASV\n&lt; 2019-03-04 17:48:01.113 227 Entering Passive Mode (10,110,103,31,215,238)\n&gt; 2019-03-04 17:48:01.113 MLSD\n. 2019-03-04 17:48:01.113 Connecting to 10.110.103.31:55278 ...\n. 2019-03-04 17:48:02.095 Data connection closed\n&lt; 2019-03-04 17:48:02.096 150 Opening data channel for directory listing of \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2\"\n&lt; 2019-03-04 17:48:02.096 226 Successfully transferred \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2016-S2\"\n. 2019-03-04 17:48:02.096 &lt;Empty directory listing&gt;\n. 2019-03-04 17:48:02.096 Directory listing successful\n. 2019-03-04 17:48:02.096 ..;D;0;1899-12-30T02:00:00.000Z;0;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:06.055 Cached directory change via \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2\" to \"/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2\".\n. 2019-03-04 17:48:06.055 Getting current directory name.\n. 2019-03-04 17:48:06.061 Retrieving directory listing...\n&gt; 2019-03-04 17:48:06.061 CWD /RelatedDocumentUploads/aaa/bbb/ccc/dddd/RCJY.O5.K2/Supporting Document/2017-S2\n&lt; 2019-03-04 17:48:06.553 250 CWD successful. \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2\" is current directory.\n&gt; 2019-03-04 17:48:06.553 PWD\n&lt; 2019-03-04 17:48:07.047 257 \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2\" is current directory.\n&gt; 2019-03-04 17:48:07.048 TYPE A\n&lt; 2019-03-04 17:48:07.539 200 Type set to A\n&gt; 2019-03-04 17:48:07.539 PASV\n&lt; 2019-03-04 17:48:08.034 227 Entering Passive Mode (10,110,103,31,206,23)\n&gt; 2019-03-04 17:48:08.034 MLSD\n. 2019-03-04 17:48:08.034 Connecting to 10.110.103.31:52759 ...\n&lt; 2019-03-04 17:48:11.885 150 Opening data channel for directory listing of \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2\"\n. 2019-03-04 17:48:11.885 Data connection closed\n. 2019-03-04 17:48:11.885 type=file;modify=20180116032646;size=56290; RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG\n. 2019-03-04 17:48:11.885 type=file;modify=20180116032658;size=304601; RCJY O5.K2 -D6(Q4) 2017-Doc 2.pdf\n. 2019-03-04 17:48:11.885 type=dir;modify=20190224134558; Ø§Ù„Ø¬Ø¨ÙŠÙ„ ÙˆØ±Ø£Ø³ Ø§Ù„Ø®ÙŠØ±\n. 2019-03-04 17:48:11.886 type=file;modify=20180118145415;size=1223036; ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ù„Ù„Ø¬Ø¨ÙŠÙ„ ÙˆÙŠÙ†Ø¨Ø¹ 2017 (006)senton(18-01-2017).pdf\n&lt; 2019-03-04 17:48:11.886 226 Successfully transferred \"/RelatedDocumentUploads/aaa/bbb/ccc/ddd/RCJY.O5.K2/Supporting Document/2017-S2\"\n. 2019-03-04 17:48:11.886 Directory listing successful\n. 2019-03-04 17:48:11.886 ..;D;0;1899-12-30T02:00:00.000Z;0;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:11.886 RCJY O5.K2 -D6(Q4) 2017-Doc 1.JPG;-;56290;2018-01-16T03:26:46.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:11.886 RCJY O5.K2 -D6(Q4) 2017-Doc 2.pdf;-;304601;2018-01-16T03:26:58.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:11.886 علم علم علم علم;D;0;2019-02-24T13:45:58.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:11.887 التقرير التقرير التقرير التقرير القريري2017 (006)senton(18-01-2017).pdf;-;1223036;2018-01-18T14:54:15.000Z;3;\"\" [0];\"\" [0];---------;0\n. 2019-03-04 17:48:20.443 Copying 1 files/directories to local directory \"C:\\Users\\yser\\Documents\\\" - total size: 1,223,036\n. 2019-03-04 17:48:20.443   PrTime: Yes; PrRO: No; Rght: rw-r--r--; PrR: No (No); FnCs: N; RIC: 0100; Resume: S (102400); CalcS: Yes; Mask: *.*\n. 2019-03-04 17:48:20.443   TM: B; ClAr: No; RemEOF: No; RemBOM: No; CPS: 0; NewerOnly: No; InclM: ; ResumeL: 0\n. 2019-03-04 17:48:20.443   AscM: *.*html; *.htm; *.txt; *.php; *.php3; *.cgi; *.c; *.cpp; *.h; *.pas; *.bas; *.tex; *.pl; *.js; .htaccess; *.xtml; *.css; *.cfg; *.ini; *.sh; *.xml\n. 2019-03-04 17:48:20.443 File: '/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير2017 (006)senton(18-01-2017).pdf' [2018-01-18T14:54:15.000Z] [1223036]\n. 2019-03-04 17:48:20.447 Copying \"/RelatedDocumentUploads/aaa/bbb/ccc/dddd/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\" to local directory started.\n. 2019-03-04 17:48:20.448 Binary transfer mode selected.\n. 2019-03-04 17:48:20.448 Starting download of /RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\n. 2019-03-04 17:48:20.449 Asking user:\n. 2019-03-04 17:48:20.449 **Overwrite local file 'تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf'?**\n. 2019-03-04 17:48:20.449 \n. 2019-03-04 17:48:20.449 Destination directory already contains file 'تقرير تقرير تقرير تقرير تقرير2017 (006)senton(18-01-2017).pdf'.\n. 2019-03-04 17:48:20.449 Choose, if you want to overwrite the file or skip this transfer and keep existing file.\n. 2019-03-04 17:48:20.449  \n. 2019-03-04 17:48:20.449 New:          1,223,036 bytes, 1/18/2018 4:54:15 PM\n. 2019-03-04 17:48:20.449 Existing:     1,223,036 bytes, 1/18/2018 4:54:15 PM ()\n&gt; 2019-03-04 17:48:21.721 TYPE I\n&lt; 2019-03-04 17:48:22.207 200 Type set to I\n&gt; 2019-03-04 17:48:22.207 PASV\n&lt; 2019-03-04 17:48:22.702 227 Entering Passive Mode (10,110,103,31,236,137)\n&gt; 2019-03-04 17:48:22.712 RETR تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\n. 2019-03-04 17:48:22.712 Connecting to 10.110.103.31:60553 ...\n&lt; 2019-03-04 17:48:24.082 150 Opening data channel for file download from server of \"/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\"\n. 2019-03-04 17:48:30.748 Data connection closed\n&lt; 2019-03-04 17:48:30.748 226 Successfully transferred \"/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\"\n. 2019-03-04 17:48:30.748 Preserving timestamp [2018-01-18T14:54:15.000Z]\n. 2019-03-04 17:48:30.750 Download successful\n. 2019-03-04 17:48:30.750 Transfer done: '/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf' =&gt; 'C:\\Users\\osmohame\\Documents\\تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf' [1223036]\n. 2019-03-04 17:48:30.766 Copying finished: Transferred: 1,223,036, Elapsed: 0:00:10, CPS: 182,733/s\n. 2019-03-04 17:48:37.731 Disconnected from server\n</code></pre>\n\n<p>And this is the code that initializes the connection to the FTP server:</p>\n\n<pre><code>logger.info(\"Creating the ftp connection using the details\");\nString ftpServerAddress = wccInstanceDetails.get(\"ftpServer\");\nString ftpPort = wccInstanceDetails.get(\"ftpPort\");\nString ftpUserName = wccInstanceDetails.get(\"ftpUser\");\nString ftpPassword = wccInstanceDetails.get(\"ftppassword\");\nFTPClient ftpClient = new FTPClient();\ntry {\n    //added here\n    ftpClient.setAutodetectUTF8(true);\n\n    ftpClient.connect(ftpServerAddress, Integer.parseInt(ftpPort));\n    ftpClient.login(ftpUserName, ftpPassword);\n    ftpClient.enterLocalPassiveMode();\n    ftpClient.setFileType(FTP.ASCII_FILE_TYPE);\n} catch (IOException ex) {\n    logger.error(\"Error occurs while creating the FTP connection : \" + ex.getMessage());\n}\nreturn ftpClient;\n</code></pre>\n\n<hr>\n\n<p>After adding the <code>setautodetectUTF(true)</code>, the output is changed, but the file is downloaded corrupted:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2019-03-04 16:05:10 INFO  FtpConnection:17 - Creating the ftp connection using the details\n2019-03-04 16:05:10 INFO  FtpConnection:19 - 10.110.103.31\n2019-03-04 16:05:10 INFO  FtpConnection:21 - 21\n2019-03-04 16:05:10 INFO  FtpConnection:38 - true\n220-FileZilla Server 0.9.60 beta\n220-\n220 EMP FTP\nFEAT\n211-Features:\n MDTM\n REST STREAM\n SIZE\n MLST type*;size*;modify*;\n MLSD\n UTF8\n CLNT\n MFMT\n EPSV\n EPRT\n211 End\nUSER *******\n331 Password required for epmftp\nPASS *******\n230 Logged on\nTYPE A\n200 Type set to A\nPASV\n227 Entering Passive Mode (10,110,103,31,224,65)\nRETR /RelatedDocumentUploads\\Entities\\RCJY\\KPI\\Documents\\RCJY.O5.K2\\Supporting Document\\2017-S2\\تقرير تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\n150 Opening data channel for file download from server of \"/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير تقرير تقرير تقرير تقرير تقرير 2017 (006)senton(18-01-2017).pdf\"\n226 Successfully transferred \"/RelatedDocumentUploads/Entities/RCJY/KPI/Documents/RCJY.O5.K2/Supporting Document/2017-S2/تقرير الربع الرابع لمؤشرات تقرير تقرير تقرير (006)senton(18-01-2017).pdf\"\n</code></pre>\n"},{"tags":["java","amazon-s3","lifecycle"],"owner":{"account_id":22215405,"reputation":1,"user_id":16453929,"display_name":"Vinayak Prabhutendolkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697777669,"creation_date":1697777483,"question_id":77328397,"body_markdown":"how to abort all incomplete multipart uploads for a bucket\r\n\r\nSo, as a context, I am using an AmazinS3 client with multipart upload to the upload files under a directory every day. Now want to add a bucketLifecycle policy to abort failed multipart uploads.\r\n\r\nI have tried to do the same with the below piece of code but it throws an error saying &quot;abortincompletemultipartupload rules are not supported.&quot; \r\n\r\nAlso, I cannot add a lifecycle policy through CLI or any command. Need to handle through code only\r\n```\r\nAbortIncompleteMultipartUplaod abort = new AbortIncompleteMultipartUplaod();\r\nabort.setDaysAfterInitialtion(1);\r\n\r\nBucketLifecycleConfiguration.Rule rule1 = new BucketLifecycleConfiguration.Rule()\r\n                .withId(&quot;delete failed uplaod&quot;)\r\n                .withPrefix(&quot;&quot;)\r\n                .withStatus(BucketLifecycleConfiguration.ENABLED)\r\n                .withAbortIncompleteMultipartUpload(abort);\r\n\r\nBucketLifecycleConfiguration configuration = new BucketLifecycleConfiguration()\r\n                .withRules(Arrays.asList(rule1));\r\n\r\n//creation of S3 client\r\n\r\ns3Client.setBucketLifecycleConfiguration(bucketName, configuration);\r\n\r\n```\r\n","title":"how to abort all incomplete multipart uploads for a bucket in SDK : java","body":"<p>how to abort all incomplete multipart uploads for a bucket</p>\n<p>So, as a context, I am using an AmazinS3 client with multipart upload to the upload files under a directory every day. Now want to add a bucketLifecycle policy to abort failed multipart uploads.</p>\n<p>I have tried to do the same with the below piece of code but it throws an error saying &quot;abortincompletemultipartupload rules are not supported.&quot;</p>\n<p>Also, I cannot add a lifecycle policy through CLI or any command. Need to handle through code only</p>\n<pre><code>AbortIncompleteMultipartUplaod abort = new AbortIncompleteMultipartUplaod();\nabort.setDaysAfterInitialtion(1);\n\nBucketLifecycleConfiguration.Rule rule1 = new BucketLifecycleConfiguration.Rule()\n                .withId(&quot;delete failed uplaod&quot;)\n                .withPrefix(&quot;&quot;)\n                .withStatus(BucketLifecycleConfiguration.ENABLED)\n                .withAbortIncompleteMultipartUpload(abort);\n\nBucketLifecycleConfiguration configuration = new BucketLifecycleConfiguration()\n                .withRules(Arrays.asList(rule1));\n\n//creation of S3 client\n\ns3Client.setBucketLifecycleConfiguration(bucketName, configuration);\n\n</code></pre>\n"},{"tags":["java","python","regex"],"comments":[{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1464807756,"post_id":37576721,"comment_id":62640562,"body_markdown":"Why do you want to ignore lines like `String blub = &quot;...&quot;; // this blub means something`?","body":"Why do you want to ignore lines like <code>String blub = &quot;...&quot;; &#47;&#47; this blub means something</code>?"},{"owner":{"account_id":6614711,"reputation":29121,"user_id":5108418,"accept_rate":72,"display_name":"Tamas Hegedus"},"score":2,"creation_date":1464807863,"post_id":37576721,"comment_id":62640605,"body_markdown":"Where do you have that url that is matched? That is indeed a comment if pasted in a Java source. The solution is not to restrict comments to the beginning of the file, but to do proper parsing. In some rare cases it can be sufficient to only handle this special case, but it looks like your case is rather complex, with urls and stuff. Could you please clarify the requirements?","body":"Where do you have that url that is matched? That is indeed a comment if pasted in a Java source. The solution is not to restrict comments to the beginning of the file, but to do proper parsing. In some rare cases it can be sufficient to only handle this special case, but it looks like your case is rather complex, with urls and stuff. Could you please clarify the requirements?"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1464808120,"post_id":37576721,"comment_id":62640725,"body_markdown":"&quot;Chop down a tree using screwdriver&quot;","body":"&quot;Chop down a tree using screwdriver&quot;"},{"owner":{"account_id":5663170,"reputation":89,"user_id":4480167,"accept_rate":74,"display_name":"stumped221"},"score":0,"creation_date":1464808441,"post_id":37576721,"comment_id":62640875,"body_markdown":"I&#39;m open to suggestions.. but I think we can all agree that &quot;http://regexr.com/foo.html?q=bar&quot; is NOT a valid Java comment?","body":"I&#39;m open to suggestions.. but I think we can all agree that &quot;<a href=\"http://regexr.com/foo.html?q=bar\" rel=\"nofollow noreferrer\">regexr.com/foo.html?q=bar</a>&quot; is NOT a valid Java comment?"},{"owner":{"account_id":5663170,"reputation":89,"user_id":4480167,"accept_rate":74,"display_name":"stumped221"},"score":0,"creation_date":1464808773,"post_id":37576721,"comment_id":62641035,"body_markdown":"Tamas Hegedus I have a huge pile of unstructured data.  It could literally be anything.. but I need to do the best I can at getting all the java comments out of the text.","body":"Tamas Hegedus I have a huge pile of unstructured data.  It could literally be anything.. but I need to do the best I can at getting all the java comments out of the text."},{"owner":{"account_id":3068514,"reputation":3740,"user_id":2599709,"accept_rate":69,"display_name":"Chrispresso"},"score":0,"creation_date":1464809913,"post_id":37576721,"comment_id":62641642,"body_markdown":"@stumped221 `((?:/\\*.*?\\*/)|(?:\\s*//.*(?:\\n)?))` This works for the most part, but for the urls such as `http://google.com` it would match `google.com` as a comment, how would you like to handle that?. I&#39;m making the assumption that `single line comments` can come at the end of the line, if this is not expected let me know and I&#39;ll change that and it will work","body":"@stumped221 <code>((?:&#47;\\*.*?\\*&#47;)|(?:\\s*&#47;&#47;.*(?:\\n)?))</code> This works for the most part, but for the urls such as <code>http:&#47;&#47;google.com</code> it would match <code>google.com</code> as a comment, how would you like to handle that?. I&#39;m making the assumption that <code>single line comments</code> can come at the end of the line, if this is not expected let me know and I&#39;ll change that and it will work"},{"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"score":1,"creation_date":1464810681,"post_id":37576721,"comment_id":62642054,"body_markdown":"Doing this reliably is not possible with a single regex.","body":"Doing this reliably is not possible with a single regex."}],"answers":[{"tags":[],"owner":{"account_id":1265583,"reputation":40647,"user_id":1222951,"accept_rate":88,"display_name":"Aran-Fey"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1464870051,"creation_date":1464810055,"answer_id":37577433,"question_id":37576721,"body_markdown":"You can try this pattern:\r\n\r\n    (?ms)^[^&#39;&quot;\\n]*?(?:(?:&quot;(?:\\\\.|[^&quot;])*&quot;|&#39;\\\\?.&#39;)[^&#39;&quot;\\n]*?)*((?:(?://[^\\n]*|/\\*.*?\\*/)[ \\t]*)+)\r\n\r\nThis captures comments in group 1, but only if the comment is not inside a string. [Demo.](https://regex101.com/r/cQ8kX9/6)\r\n\r\n\r\n----------\r\n\r\nBreakdown:\r\n\r\n    (?ms)                 multiline flag, makes ^ match at the start of a line\r\n                          singleline flag makes . match newlines\r\n    ^                     start of line\r\n    [^&#39;&quot;\\n]*?             match anything but &quot; or &#39; or newline\r\n    (?:                   then, any number strings:\r\n        (?:\r\n            &quot;             start with a quote...\r\n            (?:           ...followed by any number of...\r\n                \\\\.       ...a backslash and the escaped character\r\n            |             or\r\n                [^&quot;]      any character other than &quot;\r\n            )*\r\n            &quot;             ...and finally the closing quote\r\n        |                 or...\r\n            &#39;\\\\?.&#39;        a single character in single quotes, possibly escaped\r\n        )\r\n        [^&#39;&quot;\\n]*?         and everything up to the next string or newline\r\n    )*\r\n    (                     finally, capture (any number of) comments:\r\n        (?:\r\n            (?:           either...\r\n                //[^\\n]*  a single line comment\r\n            |             or\r\n                /\\*.*?\\*/ a multiline comment\r\n            )\r\n            [ \\t]*        and any subsequent comments if only separated by whitespace\r\n        )+\r\n    )","title":"Find java comments (multi and single line) using regex","body":"<p>You can try this pattern:</p>\n\n<pre><code>(?ms)^[^'\"\\n]*?(?:(?:\"(?:\\\\.|[^\"])*\"|'\\\\?.')[^'\"\\n]*?)*((?:(?://[^\\n]*|/\\*.*?\\*/)[ \\t]*)+)\n</code></pre>\n\n<p>This captures comments in group 1, but only if the comment is not inside a string. <a href=\"https://regex101.com/r/cQ8kX9/6\" rel=\"nofollow\">Demo.</a></p>\n\n<hr>\n\n<p>Breakdown:</p>\n\n<pre><code>(?ms)                 multiline flag, makes ^ match at the start of a line\n                      singleline flag makes . match newlines\n^                     start of line\n[^'\"\\n]*?             match anything but \" or ' or newline\n(?:                   then, any number strings:\n    (?:\n        \"             start with a quote...\n        (?:           ...followed by any number of...\n            \\\\.       ...a backslash and the escaped character\n        |             or\n            [^\"]      any character other than \"\n        )*\n        \"             ...and finally the closing quote\n    |                 or...\n        '\\\\?.'        a single character in single quotes, possibly escaped\n    )\n    [^'\"\\n]*?         and everything up to the next string or newline\n)*\n(                     finally, capture (any number of) comments:\n    (?:\n        (?:           either...\n            //[^\\n]*  a single line comment\n        |             or\n            /\\*.*?\\*/ a multiline comment\n        )\n        [ \\t]*        and any subsequent comments if only separated by whitespace\n    )+\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4831287,"reputation":11388,"user_id":3899431,"display_name":"Luis Colorado"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464869006,"creation_date":1464868281,"answer_id":37591082,"question_id":37576721,"body_markdown":"The regex you are looking for is one that allows the comment beginning (`//` or `/*`) to appear anywhere except in each of the regexps that result in tokens that can contain those substrings inside.  If you look at the [lexical structure of java language][1], you&#39;ll see that the only lexical element that can contain a `//` or a `/*` inside is the string literal, so to match a comment inside a string you have to match all the string (for not having a string literal **before** your match that happens to begin a string literal --- and contain your comment inside)\n\nSo, the string _before_ your comment should be composed of any valid string that don&#39;t begin a string literal (without ending) and so, it can be rounded by any number of string literals with any string that doesn&#39;t form a string literal in between.  If you consider a string literal, it should be matched by the following:\n\n    \\&quot;()*\\&quot;\n\nand the inside of the parenthesis must be filled with something that cannot be a `\\n`, a single `&quot;`, a single `\\`, and also not a unicode literal `\\uxxxx` that results in a valid `&quot;` (java forbids to use normal java characters to be encoded as unicode sequences, so this last case doesn&#39;t apply) but can be a escaped `\\\\` or a escaped `\\&quot;`, so this leads to\n\n    \\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;\n\nand this can be repeated any number of times optionaly, and preceded of any character not being a `&quot;` (that should begin the last part considered):\n\n    ([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*\n\nwell, the previous part to our valid string should be matched by this string, and then comes the comment string, it can be any of two forms:\n\n    \\/\\/[^\\n]*$\n\nor\n\n    /\\*([^\\*]|\\*[^\\/])*\\*\\/\n\n(this is, a slash, an asterisk (escaped), and any number of things that can be: either something different than a `*` or `*` followed by something not a `/`, to finally reach a `*/` sequence)\n\nThese can be grouped in an alternative group, as in:\n\n    (\\/\\/[^\\n]*\\n|\\/\\*([^\\*]|\\*[^\\/])*\\*\\/)\n\nfinally, our expression shows:\n\n    ^([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*(\\/\\/[^\\n]*|\\/\\*([^\\*]|\\*[^/])*\\*\\/)\n\nBut you should be careful that your matched comment begins not at the beginning, but in the 4th group (in the mark of the 4th left parenthesis) and the regexp should match the string from the beginning, see [demo][2]\n\n# Note\n\nThink you are matching not only the comment, but the text before.  This makes the result match to be composed of what is before the matching you want and the matched.  Also think that if you try this regexp with several comments in sequence, it will match only the last, as we have not covered the case of a  `/* ... /* .... */` sequence (the comment is also something that can be embedded into a comment, but considering also this case will make you hate regexps forever.  The correct way to cope with this problem is to write a `lex/flex` specification to get the java tokens and you&#39;ll only get them, but this is out of scope in this explanation.  See an probably valid example [here][3].\n\n\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html\n  [2]: https://regex101.com/r/gV3uM4/1\n  [3]: https://regex101.com/r/gV3uM4/3","title":"Find java comments (multi and single line) using regex","body":"<p>The regex you are looking for is one that allows the comment beginning (<code>//</code> or <code>/*</code>) to appear anywhere except in each of the regexps that result in tokens that can contain those substrings inside.  If you look at the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html\" rel=\"nofollow noreferrer\">lexical structure of java language</a>, you'll see that the only lexical element that can contain a <code>//</code> or a <code>/*</code> inside is the string literal, so to match a comment inside a string you have to match all the string (for not having a string literal <strong>before</strong> your match that happens to begin a string literal --- and contain your comment inside)</p>\n<p>So, the string <em>before</em> your comment should be composed of any valid string that don't begin a string literal (without ending) and so, it can be rounded by any number of string literals with any string that doesn't form a string literal in between.  If you consider a string literal, it should be matched by the following:</p>\n<pre><code>\\&quot;()*\\&quot;\n</code></pre>\n<p>and the inside of the parenthesis must be filled with something that cannot be a <code>\\n</code>, a single <code>&quot;</code>, a single <code>\\</code>, and also not a unicode literal <code>\\uxxxx</code> that results in a valid <code>&quot;</code> (java forbids to use normal java characters to be encoded as unicode sequences, so this last case doesn't apply) but can be a escaped <code>\\\\</code> or a escaped <code>\\&quot;</code>, so this leads to</p>\n<pre><code>\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;\n</code></pre>\n<p>and this can be repeated any number of times optionaly, and preceded of any character not being a <code>&quot;</code> (that should begin the last part considered):</p>\n<pre><code>([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*\n</code></pre>\n<p>well, the previous part to our valid string should be matched by this string, and then comes the comment string, it can be any of two forms:</p>\n<pre><code>\\/\\/[^\\n]*$\n</code></pre>\n<p>or</p>\n<pre><code>/\\*([^\\*]|\\*[^\\/])*\\*\\/\n</code></pre>\n<p>(this is, a slash, an asterisk (escaped), and any number of things that can be: either something different than a <code>*</code> or <code>*</code> followed by something not a <code>/</code>, to finally reach a <code>*/</code> sequence)</p>\n<p>These can be grouped in an alternative group, as in:</p>\n<pre><code>(\\/\\/[^\\n]*\\n|\\/\\*([^\\*]|\\*[^\\/])*\\*\\/)\n</code></pre>\n<p>finally, our expression shows:</p>\n<pre><code>^([^\\\\&quot;](\\&quot;([^\\\\\\&quot;\\n]|\\\\.)*\\&quot;)?)*(\\/\\/[^\\n]*|\\/\\*([^\\*]|\\*[^/])*\\*\\/)\n</code></pre>\n<p>But you should be careful that your matched comment begins not at the beginning, but in the 4th group (in the mark of the 4th left parenthesis) and the regexp should match the string from the beginning, see <a href=\"https://regex101.com/r/gV3uM4/1\" rel=\"nofollow noreferrer\">demo</a></p>\n<h1>Note</h1>\n<p>Think you are matching not only the comment, but the text before.  This makes the result match to be composed of what is before the matching you want and the matched.  Also think that if you try this regexp with several comments in sequence, it will match only the last, as we have not covered the case of a  <code>/* ... /* .... */</code> sequence (the comment is also something that can be embedded into a comment, but considering also this case will make you hate regexps forever.  The correct way to cope with this problem is to write a <code>lex/flex</code> specification to get the java tokens and you'll only get them, but this is out of scope in this explanation.  See an probably valid example <a href=\"https://regex101.com/r/gV3uM4/3\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":965009,"reputation":3109,"user_id":988591,"accept_rate":70,"display_name":"red-o-alf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697777299,"creation_date":1697775600,"answer_id":77328313,"question_id":37576721,"body_markdown":"## REGEXP FOR SINGLE &amp; MULTI-LINE COMMENTS ( JS / C / C# / JAVA / etc... )\r\n### Tested in VS Codium and at https://regex101.com\r\n\r\n    \\/\\*[\\s\\S\\n]*?\\*\\/|\\/\\/.*$\r\n\r\n  \r\n#### This will correctly match:\r\n\r\n\r\n      // single line comments\r\n\r\n      /**\r\n       * multi\r\n       * line\r\n       * comments\r\n       * // including nested inline comments \r\n       * and without tripping on URL slashes (https://www.example.com)\r\n       */\r\n\r\n      /* single line comments written using multi-line delimiters */\r\n\r\n      // /* single line comments written using MLDs and within a regular single line comment */\r\n\r\n\r\n##### It can also be useful to prefix the regexp with two additional ` *` (one at the beginning and one after the | ) which will also select all horizontal white-spaces preceding both single and multi-line comments:\r\n\r\n     *\\/\\*[\\s\\S\\n]*?\\*\\/| *\\/\\/.*$\r\n\r\n    will_select_this_area_as_well_together_with // the content of a deeply nested comment\r\n\r\n  This can come handy when you have to do some external work on the comments (e.g. translating them). By copying the spaces too, when you&#39;ll paste the comments back in the code you can be sure they&#39;ll slide back into their original position (column-wise).\r\n  \r\n  That said, in order to avoid errors and make those additional sections more clear, it should be also possible to rewrite it using `[[:space:]]*` like so:\r\n\r\n    [[:space:]]*\\/\\*[\\s\\S\\n]*?\\*\\/|[[:space:]]*\\/\\/.*$\r\n\r\n  however it seems that unfortunately VS Code/Codium do not support this syntax yet, so I&#39;m sticking with the ` *` form.\r\n\r\n  Hope it helps!\r\n\r\n###### Note: if you are testing this on https://regex101.com/ make sure to set the `g` and `m` flags using the switch located after the &quot;hard coded&quot; `/` at the end of the expression. \r\n","title":"Find java comments (multi and single line) using regex","body":"<h2>REGEXP FOR SINGLE &amp; MULTI-LINE COMMENTS ( JS / C / C# / JAVA / etc... )</h2>\n<h3>Tested in VS Codium and at <a href=\"https://regex101.com\" rel=\"nofollow noreferrer\">https://regex101.com</a></h3>\n<pre><code>\\/\\*[\\s\\S\\n]*?\\*\\/|\\/\\/.*$\n</code></pre>\n<h4>This will correctly match:</h4>\n<pre><code>  // single line comments\n\n  /**\n   * multi\n   * line\n   * comments\n   * // including nested inline comments \n   * and without tripping on URL slashes (https://www.example.com)\n   */\n\n  /* single line comments written using multi-line delimiters */\n\n  // /* single line comments written using MLDs and within a regular single line comment */\n</code></pre>\n<h5>It can also be useful to prefix the regexp with two additional <code> *</code> (one at the beginning and one after the | ) which will also select all horizontal white-spaces preceding both single and multi-line comments:</h5>\n<pre><code> *\\/\\*[\\s\\S\\n]*?\\*\\/| *\\/\\/.*$\n\nwill_select_this_area_as_well_together_with // the content of a deeply nested comment\n</code></pre>\n<p>This can come handy when you have to do some external work on the comments (e.g. translating them). By copying the spaces too, when you'll paste the comments back in the code you can be sure they'll slide back into their original position (column-wise).</p>\n<p>That said, in order to avoid errors and make those additional sections more clear, it should be also possible to rewrite it using <code>[[:space:]]*</code> like so:</p>\n<pre><code>[[:space:]]*\\/\\*[\\s\\S\\n]*?\\*\\/|[[:space:]]*\\/\\/.*$\n</code></pre>\n<p>however it seems that unfortunately VS Code/Codium do not support this syntax yet, so I'm sticking with the <code> *</code> form.</p>\n<p>Hope it helps!</p>\n<h6>Note: if you are testing this on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> make sure to set the <code>g</code> and <code>m</code> flags using the switch located after the &quot;hard coded&quot; <code>/</code> at the end of the expression.</h6>\n"}],"owner":{"account_id":5663170,"reputation":89,"user_id":4480167,"accept_rate":74,"display_name":"stumped221"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":464,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697777299,"creation_date":1464807467,"question_id":37576721,"body_markdown":"I found the following regex online at http://regexlib.com/\r\n\r\n    (\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)\r\n\r\nIt seems to work well for the following matches:\r\n\r\n    // Compute the exam average score for the midterm exam\r\n    \r\n    /**\r\n    * The HelloWorld program implements an application that\r\n    */\r\n\r\nBUT it also tends to match \r\n\r\n    http://regexr.com/foo.html?q=bar\r\n\r\nat least starting at the `//`\r\n\r\nI&#39;m new to regex and a total infant, but I read that if you put a caret at the beginning it forces the match to start at the beginning of the line, however this doesn&#39;t seem to work on RegExr.  \r\n\r\nI&#39;m using the following:\r\n\r\n    ^(\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)$\r\n","title":"Find java comments (multi and single line) using regex","body":"<p>I found the following regex online at <a href=\"http://regexlib.com/\" rel=\"nofollow\">http://regexlib.com/</a></p>\n\n<pre><code>(\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)\n</code></pre>\n\n<p>It seems to work well for the following matches:</p>\n\n<pre><code>// Compute the exam average score for the midterm exam\n\n/**\n* The HelloWorld program implements an application that\n*/\n</code></pre>\n\n<p>BUT it also tends to match </p>\n\n<pre><code>http://regexr.com/foo.html?q=bar\n</code></pre>\n\n<p>at least starting at the <code>//</code></p>\n\n<p>I'm new to regex and a total infant, but I read that if you put a caret at the beginning it forces the match to start at the beginning of the line, however this doesn't seem to work on RegExr.  </p>\n\n<p>I'm using the following:</p>\n\n<pre><code>^(\\/\\*(\\s*|.*?)*\\*\\/)|(\\/\\/.*)$\n</code></pre>\n"},{"tags":["java","math"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":4,"creation_date":1697768169,"post_id":77327972,"comment_id":136324251,"body_markdown":"Not sure why you apparently think &#39;get(0.5)&#39; will return the only entry, whose key is 1.0.  Floating point may be imprecise, but not **that** imprecise!","body":"Not sure why you apparently think &#39;get(0.5)&#39; will return the only entry, whose key is 1.0.  Floating point may be imprecise, but not <b>that</b> imprecise!"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1697768395,"post_id":77327972,"comment_id":136324277,"body_markdown":"But maybe a NavigableMap would do the job for you. You can use floorEntry and/or ceilingEntry, and then decide if the key is &#39;close enough&#39;.","body":"But maybe a NavigableMap would do the job for you. You can use floorEntry and/or ceilingEntry, and then decide if the key is &#39;close enough&#39;."},{"owner":{"account_id":25013336,"reputation":45,"user_id":19228365,"display_name":"John Smith"},"score":0,"creation_date":1697768396,"post_id":77327972,"comment_id":136324278,"body_markdown":"Whoops typo, but I have gotten null in my program with the right value, and I&#39;ve read that it&#39;s not a good idea for the reasons mentioned.","body":"Whoops typo, but I have gotten null in my program with the right value, and I&#39;ve read that it&#39;s not a good idea for the reasons mentioned."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1697768710,"post_id":77327972,"comment_id":136324294,"body_markdown":"You could try rounding the key to *n* decimals before lookup. Or search the map. Or use BigDecimal. It really depends on what your requirements are.","body":"You could try rounding the key to <i>n</i> decimals before lookup. Or search the map. Or use BigDecimal. It really depends on what your requirements are."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1697768779,"post_id":77327972,"comment_id":136324299,"body_markdown":"See also: https://stackoverflow.com/questions/9482988/find-the-closest-answer-in-hashmap","body":"See also: <a href=\"https://stackoverflow.com/questions/9482988/find-the-closest-answer-in-hashmap\" title=\"find the closest answer in hashmap\">stackoverflow.com/questions/9482988/&hellip;</a>"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1697768981,"post_id":77327972,"comment_id":136324305,"body_markdown":"A Java Map is probably not a good type to represent a mathematical function because of those reasons.","body":"A Java Map is probably not a good type to represent a mathematical function because of those reasons."},{"owner":{"account_id":25013336,"reputation":45,"user_id":19228365,"display_name":"John Smith"},"score":0,"creation_date":1697769480,"post_id":77327972,"comment_id":136324329,"body_markdown":"@shmosel Thanks for that suggestion, I might look into BigDecimal, but I&#39;ll probably use the closest n decimals. NavigableMap also looks promising.","body":"@shmosel Thanks for that suggestion, I might look into BigDecimal, but I&#39;ll probably use the closest n decimals. NavigableMap also looks promising."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1697776393,"post_id":77327972,"comment_id":136324795,"body_markdown":"Why does it have to be a map? Is an actual method not an option? (And why not?)","body":"Why does it have to be a map? Is an actual method not an option? (And why not?)"},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":0,"creation_date":1697777659,"post_id":77327972,"comment_id":136324885,"body_markdown":"If  you want the map to represent a step function defined everywhere on the x axis, then the `NavigableMap` (like `TreeMap`) idea of @ArfurNarf is definitely a way to go.  If you won&#39;t add or delete items after initial creation, a simple sorted array and binary search (for least not less than or greatest not greater than) will accomplish the same thing.","body":"If  you want the map to represent a step function defined everywhere on the x axis, then the <code>NavigableMap</code> (like <code>TreeMap</code>) idea of @ArfurNarf is definitely a way to go.  If you won&#39;t add or delete items after initial creation, a simple sorted array and binary search (for least not less than or greatest not greater than) will accomplish the same thing."},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":1,"creation_date":1697785636,"post_id":77327972,"comment_id":136325742,"body_markdown":"if your data is continuous you might use bilinear or bicubic interpolation instead of hash map","body":"if your data is continuous you might use bilinear or bicubic interpolation instead of hash map"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697775122,"creation_date":1697775122,"answer_id":77328289,"question_id":77327972,"body_markdown":"&gt; _&quot;... I could get null when trying to access a value because of floating point imprecision. For this reason, it&#39;s not wise to use floating point values as the key to a map. ...&quot;_\r\n\r\nUse the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class.\r\n\r\n```java\r\nclass DoubleMap extends HashMap&lt;BigDecimal, Double&gt; {\r\n    Double put(String k, Double v) {\r\n        return super.put(new BigDecimal(k), v);\r\n    }\r\n\r\n    Double get(String k) {\r\n        for (Entry&lt;BigDecimal, Double&gt; e : entrySet())\r\n            if (e.getKey().toPlainString().equals(k))\r\n                return e.getValue();\r\n        return null;\r\n    }\r\n}\r\nDoubleMap map = new DoubleMap();\r\nmap.put(&quot;1.23&quot;, 4.56);\r\n```","title":"How to get map values from a float","body":"<blockquote>\n<p><em>&quot;... I could get null when trying to access a value because of floating point imprecision. For this reason, it's not wise to use floating point values as the key to a map. ...&quot;</em></p>\n</blockquote>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DoubleMap extends HashMap&lt;BigDecimal, Double&gt; {\n    Double put(String k, Double v) {\n        return super.put(new BigDecimal(k), v);\n    }\n\n    Double get(String k) {\n        for (Entry&lt;BigDecimal, Double&gt; e : entrySet())\n            if (e.getKey().toPlainString().equals(k))\n                return e.getValue();\n        return null;\n    }\n}\nDoubleMap map = new DoubleMap();\nmap.put(&quot;1.23&quot;, 4.56);\n</code></pre>\n"}],"owner":{"account_id":25013336,"reputation":45,"user_id":19228365,"display_name":"John Smith"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697775122,"creation_date":1697767903,"question_id":77327972,"body_markdown":"I have a map that I want to use like a mathematical function on the real line, i.e. I give it a floating point value, it returns a floating point value.\r\n\r\nIf had something like this:\r\n\r\n```\r\nMap&lt;Double, Double&gt; map = new HashMap&lt;&gt;();\r\n```\r\nI could get null when trying to access a value because of floating point imprecision. For this reason, it&#39;s not wise to use floating point values as the key to a map.\r\n\r\nWhat&#39;s the best way to achieve my goal? I need to have a map of (x, y) values that allows me to get a y value from an x value. I suppose there&#39;s some other data type or something that doesn&#39;t allow imprecision?\r\n\r\nAll answers are appreciated thanks.","title":"How to get map values from a float","body":"<p>I have a map that I want to use like a mathematical function on the real line, i.e. I give it a floating point value, it returns a floating point value.</p>\n<p>If had something like this:</p>\n<pre><code>Map&lt;Double, Double&gt; map = new HashMap&lt;&gt;();\n</code></pre>\n<p>I could get null when trying to access a value because of floating point imprecision. For this reason, it's not wise to use floating point values as the key to a map.</p>\n<p>What's the best way to achieve my goal? I need to have a map of (x, y) values that allows me to get a y value from an x value. I suppose there's some other data type or something that doesn't allow imprecision?</p>\n<p>All answers are appreciated thanks.</p>\n"},{"tags":["java","eclipse","jar"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1697755140,"post_id":77327375,"comment_id":136323148,"body_markdown":"Show us `Comparison`. Especially show us `logResults`. I&#39;m *tempted* to [close as a duplicate](https://stackoverflow.com/q/218384/2970947).","body":"Show us <code>Comparison</code>. Especially show us <code>logResults</code>. I&#39;m <i>tempted</i> to <a href=\"https://stackoverflow.com/q/218384/2970947\">close as a duplicate</a>."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1697755435,"post_id":77327375,"comment_id":136323182,"body_markdown":"The README in https://github.com/Microsoft/mssql-jdbc mentions a number of dependencies that don&#39;t seem to be on your command line. Are you using something like Maven that provides them to Eclipse?","body":"The README in <a href=\"https://github.com/Microsoft/mssql-jdbc\" rel=\"nofollow noreferrer\">github.com/Microsoft/mssql-jdbc</a> mentions a number of dependencies that don&#39;t seem to be on your command line. Are you using something like Maven that provides them to Eclipse?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697756543,"post_id":77327375,"comment_id":136323292,"body_markdown":"Line numbers on the code please. How are we supposed to know which lines correspond to the stacktrace?","body":"Line numbers on the code please. How are we supposed to know which lines correspond to the stacktrace?"},{"owner":{"account_id":4423771,"reputation":141,"user_id":3602820,"accept_rate":83,"display_name":"patricio2626"},"score":0,"creation_date":1697757731,"post_id":77327375,"comment_id":136323413,"body_markdown":"@ElliottFrisch This is inside of the logResults() function, but I suppose I can include the entire class.  I&#39;ve been scolded here before for doing that. nitind: what do you mean?  Works fine in Eclipse and is not Mavenized.  aled: you have the System.out.println lines for where the code stops execution, but I suppose I could include them.","body":"@ElliottFrisch This is inside of the logResults() function, but I suppose I can include the entire class.  I&#39;ve been scolded here before for doing that. nitind: what do you mean?  Works fine in Eclipse and is not Mavenized.  aled: you have the System.out.println lines for where the code stops execution, but I suppose I could include them."},{"owner":{"account_id":4423771,"reputation":141,"user_id":3602820,"accept_rate":83,"display_name":"patricio2626"},"score":0,"creation_date":1697758093,"post_id":77327375,"comment_id":136323449,"body_markdown":"Edited to show all of logResults() and to indicate that 449 is con.close()","body":"Edited to show all of logResults() and to indicate that 449 is con.close()"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697772726,"post_id":77327375,"comment_id":136324561,"body_markdown":"Something is missing in the command line execution that makes it work in Eclipse. Probably some dependency.","body":"Something is missing in the command line execution that makes it work in Eclipse. Probably some dependency."},{"owner":{"account_id":4423771,"reputation":141,"user_id":3602820,"accept_rate":83,"display_name":"patricio2626"},"score":0,"creation_date":1697773955,"post_id":77327375,"comment_id":136324645,"body_markdown":"@aled you weren&#39;t too far off with thinking about dependencies.  I&#39;ll solve this question momentarily and you&#39;ll see more detail (JDBC JAR file was incorrect version).","body":"@aled you weren&#39;t too far off with thinking about dependencies.  I&#39;ll solve this question momentarily and you&#39;ll see more detail (JDBC JAR file was incorrect version)."}],"answers":[{"tags":[],"owner":{"account_id":4423771,"reputation":141,"user_id":3602820,"accept_rate":83,"display_name":"patricio2626"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697774159,"creation_date":1697774159,"answer_id":77328241,"question_id":77327375,"body_markdown":"Hope this helps someone in the future.  I removed the finally block and then the exception came as:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/microsoft/sqlserver/jdbc/SQLServerDriver has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n```\r\n\r\nI forgot that I had downgraded my compiler compliance version in my Eclipse project due to a lower version of Java on our production box.  Strange behavior of the driver and certainly left me scratching my head, and it wasn&#39;t apparent until removing that finally block.  Going to use the JRE8 version of the MSSQL JDBC driver now.  ","title":"Works in Eclipse, not in JAR file - Class.forName() seemingly not throwing Exception, but code immediately transfers to finally block","body":"<p>Hope this helps someone in the future.  I removed the finally block and then the exception came as:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/microsoft/sqlserver/jdbc/SQLServerDriver has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n</code></pre>\n<p>I forgot that I had downgraded my compiler compliance version in my Eclipse project due to a lower version of Java on our production box.  Strange behavior of the driver and certainly left me scratching my head, and it wasn't apparent until removing that finally block.  Going to use the JRE8 version of the MSSQL JDBC driver now.</p>\n"}],"owner":{"account_id":4423771,"reputation":141,"user_id":3602820,"accept_rate":83,"display_name":"patricio2626"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1697774159,"creation_date":1697754575,"question_id":77327375,"body_markdown":"First, this works in Eclipse but not when running the generated JAR file.  It doesn&#39;t seem to generate any exception when the JAR is run, but rather, the code execution stops at the Class.forName() call and immediately transfers to the finally block.  You can see this in the System.out.println() calls (or lack thereof). \r\n\r\nOutput in Eclipse:\r\n\r\n*Finding class...\r\nGetting connection for log population...\r\nGot connection for log population...\r\nIn finally block...\r\nFinished.*\r\n\r\nOutput when JAR file is run:\r\n\r\n```\r\nC:\\me\\myProgram&gt;java -cp MyJar.jar;mssql-jdbc-12.4.0.jre11.jar com.me.myProgram.Main\r\nFinding class...\r\nIn finally block...\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n        at com.me.myProgram.logResults(Comparison.java:449)\r\n        at com.me.myProgram.run(Comparison.java:547)\r\n        at com.me.myProgram.Main.main(Main.java:13)\r\n```\r\n\r\nI know it&#39;s not an issue with the class not being found (or at least really doesn&#39;t look like it) because if I change to Class.forName(&quot;com.microsoft.sqlserver.jdbc.blahblah&quot;); then I get:\r\n\r\n```\r\nD:\\me\\myProgram&gt;java -cp MyJar.jar;mssql-jdbc-12.4.0.jre11.jar com.me.myProgram.Main\r\nFinding class...\r\ncom.microsoft.sqlserver.jdbc.SQLServerDrive\r\njava.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDrive\r\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n        at java.lang.Class.forName0(Native Method)\r\n        at java.lang.Class.forName(Class.java:264)\r\n        at com.me.myProgram.Comparison.logResults(Comparison.java:392)\r\n        at com.me.myProgram.Comparison.run(Comparison.java:547)\r\n        at com.me.myProgram.Main.main(Main.java:13)\r\nIn finally block...\r\nException in thread &quot;main&quot; java.lang.NullPointerException\r\n        at com.me.myProgram.Comparison.logResults(Comparison.java:449)\r\n        at com.me.myProgram.Comparison.run(Comparison.java:547)\r\n        at com.me.myProgram.Main.main(Main.java:13)\r\n```\r\n\r\nCode  (line 449 is con.close()):\r\n\r\n```\r\npublic void logResults(){\r\n\t\tConnection con = null;\t\t\r\n\t\tBoolean success = isJobRowCountMatch &amp;&amp; isEntryCountMatch &amp;&amp; isExtractCountMatch &amp;&amp; (isDeltaPresent || isFullPresent);\r\n\t\tString informationalString = getInformationalString(), issueString = getIssueString(), badEntriesString = \r\n\t\t\t\tgetBadEntriesString();\r\n\t\ttry {\t\t\t\r\n\t\t\tSystem.out.println(&quot;Finding class...&quot;);\r\n\t\t\tClass.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\r\n\t\t\tSystem.out.println(&quot;Getting connection for log population...&quot;);\r\n\t\t\tfw.write(&quot;Getting connection for log population...&quot; + System.lineSeparator());\r\n\t\t\tcon = DriverManager.getConnection(connectionString);\r\n\t\t\tSystem.out.println(&quot;Got connection for log population...&quot;);\r\n\t\t\tPreparedStatement st = con.prepareStatement(logPreparedStatement);\r\n\t\t\tjava.sql.Timestamp ts = Timestamp.valueOf(d);\r\n\t\t\tst.setTimestamp(1, ts);\r\n\t\t\tst.setBoolean(2, success);\r\n\t\t\tst.setNString(3, informationalString);\r\n\t\t\tst.setNString(4, issueString);\r\n\t\t\tst.setNString(5, badEntriesString);\r\n\t\t\tfw.write(&quot;Inserting log entry...&quot; + System.lineSeparator());\r\n\t\t\tif(outputLogFile.createNewFile() || outputLogFile.exists()) {\r\n\t\t\t\tfw.write(&quot;Job timestamp: &quot; + month + &quot;-&quot; + day + \r\n\t\t\t\t\t\t&quot;-&quot; + year + &quot; &quot; + hour + &quot;:&quot; + minute + &quot;:&quot; + second + System.getProperty(&quot;line.separator&quot;));\r\n\t\t\t\tfw.write(&quot;Informational entries: &quot; + informationalString + System.getProperty(&quot;line.separator&quot;));\r\n\t\t\t\tfw.write(&quot;Issue entries: &quot; + issueString + System.getProperty(&quot;line.separator&quot;));\r\n\t\t\t\tfw.write(&quot;Non-matching list entries: &quot; + badEntriesString + System.getProperty(&quot;line.separator&quot;));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow new RuntimeException(&quot;Can&#39;t create log file &quot; + outputLogFile.getAbsolutePath());\r\n\t\t\t}\r\n\t\t\tint resultCount = st.executeUpdate();\r\n\t\t\tif(resultCount == 0) {\r\n\t\t\t\tthrow new RuntimeException(&quot;Log entry couldn&#39;t be inserted to the database for some reason.&quot;);\r\n\t\t\t}\r\n\t\t\tfw.write(&quot;Log entry inserted.&quot; + System.lineSeparator());\r\n\t\t}\r\n\t\tcatch(Exception e) {\r\n\t\t\tSystem.out.println(e.getMessage());\r\n\t\t\tthrow new RuntimeException(&quot;Problem inserting log entry into database: &quot; + e.getMessage());\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tSystem.out.println(&quot;In finally block...&quot;);\r\n\t\t\ttry {\r\n\t\t\t\tcon.close();  //NPE happens here\r\n\t\t\t}\r\n\t\t\tcatch(java.sql.SQLException sqle) {\t\t\t\t\r\n\t\t\t\tsqle.printStackTrace();\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\t\r\n\tprivate void loadProps() {\r\n\t\tjava.util.Properties props = null;\r\n\t\ttry{\r\n\t\t\tFile dir = new File(AccuityComparison.class.getProtectionDomain().getCodeSource().getLocation().\r\n\t\t\t\t\tgetPath());\r\n\t\t\t\r\n\t\t\tjava.io.InputStream stream = new java.io.FileInputStream(\r\n\t\t\t\t\tdir.getParentFile().getAbsolutePath() + File.separator + &quot;config.properties&quot;);\r\n\t\t\tprops = new java.util.Properties();\r\n\t\t\tprops.load(stream);\r\n\t\t\tstream.close();\r\n\t\t}\r\n\t\tcatch(java.io.FileNotFoundException fnfe) {\r\n\t\t\tfnfe.printStackTrace();\r\n\t\t\ttry {\r\n\t\t\t\tfw.write(fnfe.getMessage());\r\n\t\t\t\tfw.close();\r\n\t\t\t}\r\n\t\t\tcatch(java.io.IOException ioe) {\r\n\t\t\t\tioe.printStackTrace();\r\n\t\t\t}\r\n\t\t\tthrow new RuntimeException(&quot;Could not find properties file \\&quot;config.properties\\&quot;: &quot; +\r\n\t\t\t\t\tfnfe.getMessage());\r\n\t\t}\r\n\t\tcatch(java.io.IOException ioe) {\r\n\t\t\tioe.printStackTrace();\r\n\t\t\ttry {\r\n\t\t\t\tfw.write(ioe.getMessage());\r\n\t\t\t\tfw.close();\r\n\t\t\t}\r\n\t\t\tcatch(java.io.IOException ioe2) {\r\n\t\t\t\tioe2.printStackTrace();\r\n\t\t\t}\r\n\t\t\tthrow new RuntimeException(&quot;Unable to read from properties file \\&quot;config.properties\\&quot;: &quot; +\r\n\t\t\t\t\tioe.getMessage());\r\n\t\t}\r\n\t\tlogPreparedStatement = props.getProperty(&quot;logPreparedStatement&quot;);\r\n\t\textractSummaryDir = props.getProperty(&quot;extractSummaryDir&quot;);\r\n\t\tarchiveDir = props.getProperty(&quot;archiveDir&quot;);\r\n\t\tconnectionString = props.getProperty(&quot;connectionString&quot;);\r\n\t\tjobCountQueryDelta = props.getProperty(&quot;jobCountQueryDelta&quot;);\r\n\t\tjobCountQueryFull = props.getProperty(&quot;jobCountQueryFull&quot;);\r\n\t\tdbEntryCountQueryFull = props.getProperty(&quot;dbEntryCountQueryFull&quot;);\r\n\t\tdbEntryCountQueryDelta = props.getProperty(&quot;dbEntryCountQueryDelta&quot;);\r\n\t\tdbEntriesQueryFull = props.getProperty(&quot;dbEntriesQueryFull&quot;);\r\n\t\tdbEntriesQueryDelta = props.getProperty(&quot;dbEntriesQueryDelta&quot;);\t\r\n\t\tdbConnStringPwd = new String(Base64.getDecoder().decode(props.getProperty(&quot;connectionStringPwd&quot;)), StandardCharsets.UTF_8);\r\n\t\tconnectionString += dbConnStringPwd;\r\n\t\tSystem.out.println(&quot;Conn string = &quot; + connectionString);\r\n\t};\r\n\t\r\n\tpublic void run(){\r\n\t\tLong start = System.currentTimeMillis();\r\n\t\tSystem.out.println(&quot;Starting...&quot;);\r\n\t\ttry{\r\n\t\t\tfw = new java.io.FileWriter(outputLogFile);\t\t\t\r\n\t\t\tfw.write(&quot;Thread starting...&quot; + System.lineSeparator());\r\n\t\t\tloadProps();\r\n\t\t\tfullFile = new java.io.File(archiveDir + &quot;Full_&quot; + month + &quot;-&quot; + day + &quot;-&quot; + year + &quot;.xml&quot;);\r\n\t\t\tdeltaFile = new java.io.File(archiveDir + &quot;Delta_&quot; + month + &quot;-&quot; + day + &quot;-&quot; + year + &quot;.xml&quot;);\r\n\t\t\tif(fullFile.exists()) {\r\n\t\t\t\tisFullPresent = true;\r\n\t\t\t\ttype = &quot;Full&quot;;\r\n\t\t\t\tpopulateSetFromListFile();\r\n\t\t\t\trunCount();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tfw.write(&quot;Full file: &quot; + fullFile + &quot; not present.&quot; + System.lineSeparator());\r\n\t\t\t\tinformational.add(&quot;Full list file not present.&quot;);\r\n\t\t\t}\r\n\t\t\tlistSet.clear();\r\n\t\t\tif(deltaFile.exists()) {\r\n\t\t\t\tisDeltaPresent = true;\r\n\t\t\t\ttype = &quot;Delta&quot;;\r\n\t\t\t\tpopulateSetFromListFile();\r\n\t\t\t\trunCount();\r\n\t\t\t}\t\t\r\n\t\t\telse {\r\n\t\t\t\tfw.write(&quot;Delta file: &quot; + deltaFile + &quot; not present.&quot; + System.lineSeparator());\r\n\t\t\t\tinformational.add(&quot;Delta list file not present.&quot;);\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t\tString exceptionText = (!isJobRowCountMatch ? &quot;There is a count mismatch between the list file (&quot; +\tlistSet.size() + &quot;)&quot; + \r\n\t\t\t\t\t&quot; and the job row count in WLF_JOBS_log (&quot; + jobRowCount + &quot;).  &quot; : &quot;&quot;) + \r\n\t\t\t\t\t(!isExtractCountMatch ? &quot; There is a mismatch between the list entries (&quot; + listSet.size() + \r\n\t\t\t\t\t\t&quot;) and the extract summary file count (&quot; + extractCount + &quot;).  &quot;: &quot;&quot;) +\r\n\t\t\t\t\t(!isEntryCountMatch ? &quot; There is a mistmatch between the filtered list entries (&quot; + filteredListCount +  \r\n\t\t\t\t\t&quot;) and the database entry count in WLF_LATEST_LIST_ENTRIES (&quot; + dbEntryCount + &quot;).  &quot; : &quot;&quot; + \r\n\t\t\t\t\t(badEntries.size() &gt; 0 ? &quot;One or more list entries does not seem to be fully intact.&quot; : &quot;&quot;));\r\n\t\t\tif(exceptionText.length() &gt; 0 &amp;&amp; (isDeltaPresent || isFullPresent))\r\n\t\t\t\tissues.add(exceptionText);\r\n\t\t\tlogResults();\t\t\t\t\t\r\n\t\t\tfw.write(&quot;Program finished.&quot; + System.lineSeparator() + &quot;Program executed in &quot; + (System.currentTimeMillis() - start) + &quot; milliseconds.&quot;);\r\n\t\t\tfw.close();\r\n\t\t\tif((isDeltaPresent || isFullPresent) &amp;&amp; (!isJobRowCountMatch || !isExtractCountMatch || !isEntryCountMatch || (badEntries.size() &gt; 0)))\r\n\t\t\t\tthrow new RuntimeException(exceptionText);\r\n\t\t}\r\n\t\tcatch(java.io.IOException ioe) {\r\n\t\t\tSystem.out.println(ioe.getMessage());\r\n\t\t\tioe.printStackTrace();\r\n\t\t\ttry {\r\n\t\t\t\tfw.write(ioe.getMessage());\r\n\t\t\t\tfw.close();\r\n\t\t\t}\r\n\t\t\tcatch(java.io.IOException ioe2) {\r\n\t\t\t\tioe2.printStackTrace();\r\n\t\t\t}\r\n\t\t}\t\t\t\r\n\t\tSystem.out.println(&quot;Finished.&quot;);\r\n\t}\t\r\n}\r\n\r\n```\r\n\r\n\r\nThoughts?","title":"Works in Eclipse, not in JAR file - Class.forName() seemingly not throwing Exception, but code immediately transfers to finally block","body":"<p>First, this works in Eclipse but not when running the generated JAR file.  It doesn't seem to generate any exception when the JAR is run, but rather, the code execution stops at the Class.forName() call and immediately transfers to the finally block.  You can see this in the System.out.println() calls (or lack thereof).</p>\n<p>Output in Eclipse:</p>\n<p><em>Finding class...\nGetting connection for log population...\nGot connection for log population...\nIn finally block...\nFinished.</em></p>\n<p>Output when JAR file is run:</p>\n<pre><code>C:\\me\\myProgram&gt;java -cp MyJar.jar;mssql-jdbc-12.4.0.jre11.jar com.me.myProgram.Main\nFinding class...\nIn finally block...\nException in thread &quot;main&quot; java.lang.NullPointerException\n        at com.me.myProgram.logResults(Comparison.java:449)\n        at com.me.myProgram.run(Comparison.java:547)\n        at com.me.myProgram.Main.main(Main.java:13)\n</code></pre>\n<p>I know it's not an issue with the class not being found (or at least really doesn't look like it) because if I change to Class.forName(&quot;com.microsoft.sqlserver.jdbc.blahblah&quot;); then I get:</p>\n<pre><code>D:\\me\\myProgram&gt;java -cp MyJar.jar;mssql-jdbc-12.4.0.jre11.jar com.me.myProgram.Main\nFinding class...\ncom.microsoft.sqlserver.jdbc.SQLServerDrive\njava.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDrive\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:264)\n        at com.me.myProgram.Comparison.logResults(Comparison.java:392)\n        at com.me.myProgram.Comparison.run(Comparison.java:547)\n        at com.me.myProgram.Main.main(Main.java:13)\nIn finally block...\nException in thread &quot;main&quot; java.lang.NullPointerException\n        at com.me.myProgram.Comparison.logResults(Comparison.java:449)\n        at com.me.myProgram.Comparison.run(Comparison.java:547)\n        at com.me.myProgram.Main.main(Main.java:13)\n</code></pre>\n<p>Code  (line 449 is con.close()):</p>\n<pre><code>public void logResults(){\n        Connection con = null;      \n        Boolean success = isJobRowCountMatch &amp;&amp; isEntryCountMatch &amp;&amp; isExtractCountMatch &amp;&amp; (isDeltaPresent || isFullPresent);\n        String informationalString = getInformationalString(), issueString = getIssueString(), badEntriesString = \n                getBadEntriesString();\n        try {           \n            System.out.println(&quot;Finding class...&quot;);\n            Class.forName(&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;);\n            System.out.println(&quot;Getting connection for log population...&quot;);\n            fw.write(&quot;Getting connection for log population...&quot; + System.lineSeparator());\n            con = DriverManager.getConnection(connectionString);\n            System.out.println(&quot;Got connection for log population...&quot;);\n            PreparedStatement st = con.prepareStatement(logPreparedStatement);\n            java.sql.Timestamp ts = Timestamp.valueOf(d);\n            st.setTimestamp(1, ts);\n            st.setBoolean(2, success);\n            st.setNString(3, informationalString);\n            st.setNString(4, issueString);\n            st.setNString(5, badEntriesString);\n            fw.write(&quot;Inserting log entry...&quot; + System.lineSeparator());\n            if(outputLogFile.createNewFile() || outputLogFile.exists()) {\n                fw.write(&quot;Job timestamp: &quot; + month + &quot;-&quot; + day + \n                        &quot;-&quot; + year + &quot; &quot; + hour + &quot;:&quot; + minute + &quot;:&quot; + second + System.getProperty(&quot;line.separator&quot;));\n                fw.write(&quot;Informational entries: &quot; + informationalString + System.getProperty(&quot;line.separator&quot;));\n                fw.write(&quot;Issue entries: &quot; + issueString + System.getProperty(&quot;line.separator&quot;));\n                fw.write(&quot;Non-matching list entries: &quot; + badEntriesString + System.getProperty(&quot;line.separator&quot;));\n            }\n            else {\n                throw new RuntimeException(&quot;Can't create log file &quot; + outputLogFile.getAbsolutePath());\n            }\n            int resultCount = st.executeUpdate();\n            if(resultCount == 0) {\n                throw new RuntimeException(&quot;Log entry couldn't be inserted to the database for some reason.&quot;);\n            }\n            fw.write(&quot;Log entry inserted.&quot; + System.lineSeparator());\n        }\n        catch(Exception e) {\n            System.out.println(e.getMessage());\n            throw new RuntimeException(&quot;Problem inserting log entry into database: &quot; + e.getMessage());\n        }\n        finally {\n            System.out.println(&quot;In finally block...&quot;);\n            try {\n                con.close();  //NPE happens here\n            }\n            catch(java.sql.SQLException sqle) {             \n                sqle.printStackTrace();\n            }\n        }       \n    }\n    \n    private void loadProps() {\n        java.util.Properties props = null;\n        try{\n            File dir = new File(AccuityComparison.class.getProtectionDomain().getCodeSource().getLocation().\n                    getPath());\n            \n            java.io.InputStream stream = new java.io.FileInputStream(\n                    dir.getParentFile().getAbsolutePath() + File.separator + &quot;config.properties&quot;);\n            props = new java.util.Properties();\n            props.load(stream);\n            stream.close();\n        }\n        catch(java.io.FileNotFoundException fnfe) {\n            fnfe.printStackTrace();\n            try {\n                fw.write(fnfe.getMessage());\n                fw.close();\n            }\n            catch(java.io.IOException ioe) {\n                ioe.printStackTrace();\n            }\n            throw new RuntimeException(&quot;Could not find properties file \\&quot;config.properties\\&quot;: &quot; +\n                    fnfe.getMessage());\n        }\n        catch(java.io.IOException ioe) {\n            ioe.printStackTrace();\n            try {\n                fw.write(ioe.getMessage());\n                fw.close();\n            }\n            catch(java.io.IOException ioe2) {\n                ioe2.printStackTrace();\n            }\n            throw new RuntimeException(&quot;Unable to read from properties file \\&quot;config.properties\\&quot;: &quot; +\n                    ioe.getMessage());\n        }\n        logPreparedStatement = props.getProperty(&quot;logPreparedStatement&quot;);\n        extractSummaryDir = props.getProperty(&quot;extractSummaryDir&quot;);\n        archiveDir = props.getProperty(&quot;archiveDir&quot;);\n        connectionString = props.getProperty(&quot;connectionString&quot;);\n        jobCountQueryDelta = props.getProperty(&quot;jobCountQueryDelta&quot;);\n        jobCountQueryFull = props.getProperty(&quot;jobCountQueryFull&quot;);\n        dbEntryCountQueryFull = props.getProperty(&quot;dbEntryCountQueryFull&quot;);\n        dbEntryCountQueryDelta = props.getProperty(&quot;dbEntryCountQueryDelta&quot;);\n        dbEntriesQueryFull = props.getProperty(&quot;dbEntriesQueryFull&quot;);\n        dbEntriesQueryDelta = props.getProperty(&quot;dbEntriesQueryDelta&quot;); \n        dbConnStringPwd = new String(Base64.getDecoder().decode(props.getProperty(&quot;connectionStringPwd&quot;)), StandardCharsets.UTF_8);\n        connectionString += dbConnStringPwd;\n        System.out.println(&quot;Conn string = &quot; + connectionString);\n    };\n    \n    public void run(){\n        Long start = System.currentTimeMillis();\n        System.out.println(&quot;Starting...&quot;);\n        try{\n            fw = new java.io.FileWriter(outputLogFile);         \n            fw.write(&quot;Thread starting...&quot; + System.lineSeparator());\n            loadProps();\n            fullFile = new java.io.File(archiveDir + &quot;Full_&quot; + month + &quot;-&quot; + day + &quot;-&quot; + year + &quot;.xml&quot;);\n            deltaFile = new java.io.File(archiveDir + &quot;Delta_&quot; + month + &quot;-&quot; + day + &quot;-&quot; + year + &quot;.xml&quot;);\n            if(fullFile.exists()) {\n                isFullPresent = true;\n                type = &quot;Full&quot;;\n                populateSetFromListFile();\n                runCount();\n            }\n            else {\n                fw.write(&quot;Full file: &quot; + fullFile + &quot; not present.&quot; + System.lineSeparator());\n                informational.add(&quot;Full list file not present.&quot;);\n            }\n            listSet.clear();\n            if(deltaFile.exists()) {\n                isDeltaPresent = true;\n                type = &quot;Delta&quot;;\n                populateSetFromListFile();\n                runCount();\n            }       \n            else {\n                fw.write(&quot;Delta file: &quot; + deltaFile + &quot; not present.&quot; + System.lineSeparator());\n                informational.add(&quot;Delta list file not present.&quot;);\n            }                       \n            String exceptionText = (!isJobRowCountMatch ? &quot;There is a count mismatch between the list file (&quot; + listSet.size() + &quot;)&quot; + \n                    &quot; and the job row count in WLF_JOBS_log (&quot; + jobRowCount + &quot;).  &quot; : &quot;&quot;) + \n                    (!isExtractCountMatch ? &quot; There is a mismatch between the list entries (&quot; + listSet.size() + \n                        &quot;) and the extract summary file count (&quot; + extractCount + &quot;).  &quot;: &quot;&quot;) +\n                    (!isEntryCountMatch ? &quot; There is a mistmatch between the filtered list entries (&quot; + filteredListCount +  \n                    &quot;) and the database entry count in WLF_LATEST_LIST_ENTRIES (&quot; + dbEntryCount + &quot;).  &quot; : &quot;&quot; + \n                    (badEntries.size() &gt; 0 ? &quot;One or more list entries does not seem to be fully intact.&quot; : &quot;&quot;));\n            if(exceptionText.length() &gt; 0 &amp;&amp; (isDeltaPresent || isFullPresent))\n                issues.add(exceptionText);\n            logResults();                   \n            fw.write(&quot;Program finished.&quot; + System.lineSeparator() + &quot;Program executed in &quot; + (System.currentTimeMillis() - start) + &quot; milliseconds.&quot;);\n            fw.close();\n            if((isDeltaPresent || isFullPresent) &amp;&amp; (!isJobRowCountMatch || !isExtractCountMatch || !isEntryCountMatch || (badEntries.size() &gt; 0)))\n                throw new RuntimeException(exceptionText);\n        }\n        catch(java.io.IOException ioe) {\n            System.out.println(ioe.getMessage());\n            ioe.printStackTrace();\n            try {\n                fw.write(ioe.getMessage());\n                fw.close();\n            }\n            catch(java.io.IOException ioe2) {\n                ioe2.printStackTrace();\n            }\n        }           \n        System.out.println(&quot;Finished.&quot;);\n    }   \n}\n\n</code></pre>\n<p>Thoughts?</p>\n"},{"tags":["java","validation","spring-boot","soapui"],"comments":[{"owner":{"account_id":1424899,"reputation":4365,"user_id":1348691,"accept_rate":67,"display_name":"Tiina"},"score":2,"creation_date":1517797755,"post_id":48614773,"comment_id":84227222,"body_markdown":"`@NotBlank` is for text only, not integer. Try to start from the simplest, with only one field for validation like `@NotBlank String foo;` if that works, move on to other more complicated ones like `@Pattern`","body":"<code>@NotBlank</code> is for text only, not integer. Try to start from the simplest, with only one field for validation like <code>@NotBlank String foo;</code> if that works, move on to other more complicated ones like <code>@Pattern</code>"},{"owner":{"account_id":8582646,"reputation":446,"user_id":6429769,"display_name":"Rishabh Ryber"},"score":0,"creation_date":1636687026,"post_id":48614773,"comment_id":123628920,"body_markdown":"In my case I forgot to add @Valid tag in Controller","body":"In my case I forgot to add @Valid tag in Controller"}],"answers":[{"tags":[],"owner":{"account_id":3599794,"reputation":2621,"user_id":3003337,"accept_rate":88,"display_name":"surya"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1517798415,"creation_date":1517795776,"answer_id":48614909,"question_id":48614773,"body_markdown":"First you dont need to have @Valid annotation for those class variables in UpdatePrintContracts . You can delete them.\r\n\r\nTo trigger validation of a @Controller input, simply annotate the input argument as @Valid or @Validated: \r\n\r\n    @RequestMapping(value=PATH_PRINT_CONTRACTS, method=RequestMethod.POST)\r\n    public ResponseEntity&lt;?&gt; printContracts(@Valid @RequestBody  final UpdatePrintContracts updatePrintContracts) throws Exception {\r\n\r\n[Refer here][1] for full understanding of validating models in spring boot.\r\n\r\nAnd If you want to check that a string contains only specific characters, you must add anchors (^ for beginning of the string, $ for end of the string) to be sure that your pattern matches all the string.Curly brackets are only to write a quantity,\r\n\r\n    @Pattern(regexp = &quot;^[\\\\p{Alnum}]{1,32}$&quot;)\r\n\r\nLastly i assume you have following jars in your classpath, \r\n\r\n.validation-api.jar (contains the abstract API and the annotation scanner)\r\n \r\n.hibernate-validator.jar (contains the concrete implementation)\r\n\r\n  [1]: https://spring.io/guides/gs/validating-form-input/","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>First you dont need to have @Valid annotation for those class variables in UpdatePrintContracts . You can delete them.</p>\n\n<p>To trigger validation of a @Controller input, simply annotate the input argument as @Valid or @Validated: </p>\n\n<pre><code>@RequestMapping(value=PATH_PRINT_CONTRACTS, method=RequestMethod.POST)\npublic ResponseEntity&lt;?&gt; printContracts(@Valid @RequestBody  final UpdatePrintContracts updatePrintContracts) throws Exception {\n</code></pre>\n\n<p><a href=\"https://spring.io/guides/gs/validating-form-input/\" rel=\"noreferrer\">Refer here</a> for full understanding of validating models in spring boot.</p>\n\n<p>And If you want to check that a string contains only specific characters, you must add anchors (^ for beginning of the string, $ for end of the string) to be sure that your pattern matches all the string.Curly brackets are only to write a quantity,</p>\n\n<pre><code>@Pattern(regexp = \"^[\\\\p{Alnum}]{1,32}$\")\n</code></pre>\n\n<p>Lastly i assume you have following jars in your classpath, </p>\n\n<p>.validation-api.jar (contains the abstract API and the annotation scanner)</p>\n\n<p>.hibernate-validator.jar (contains the concrete implementation)</p>\n"},{"tags":[],"owner":{"account_id":3620019,"reputation":5311,"user_id":3019006,"accept_rate":68,"display_name":"Deb"},"down_vote_count":0,"up_vote_count":129,"is_accepted":false,"score":129,"last_activity_date":1590315391,"creation_date":1590315391,"answer_id":61984478,"question_id":48614773,"body_markdown":"If you are facing this problem in latest version of spring boot (2.3.0) make sure to add the following dependency:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Observation:**\r\nIn earlier version of Spring Boot (1.4.7), `javax.validation` used to work out of the box. But, after upgrading to latest version, annotations broke. Adding the following dependency alone doesn&#39;t work:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\nBecause this provides JSR Specification but not the implementation. You can also use `hibernate-validator` instead of `spring-boot-starter-validation`. ","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>If you are facing this problem in latest version of spring boot (2.3.0) make sure to add the following dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p><strong>Observation:</strong>\nIn earlier version of Spring Boot (1.4.7), <code>javax.validation</code> used to work out of the box. But, after upgrading to latest version, annotations broke. Adding the following dependency alone doesn't work:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Because this provides JSR Specification but not the implementation. You can also use <code>hibernate-validator</code> instead of <code>spring-boot-starter-validation</code>. </p>\n"},{"tags":[],"owner":{"account_id":19963121,"reputation":331,"user_id":14630243,"display_name":"Arjun Gautam"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1606290802,"creation_date":1606290802,"answer_id":65000501,"question_id":48614773,"body_markdown":"I was using This dependency of validation in spring boot and didn&#39;t work ,\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n    &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\nI replaced it with spring-boot-starter-validation and it worked .\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot- \r\n    starter-validation --&gt;\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;version&gt;2.4.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n\r\n\r\n\r\n","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>I was using This dependency of validation in spring boot and didn't work ,</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;javax.validation&lt;/groupId&gt;\n&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n&lt;version&gt;2.0.1.Final&lt;/version&gt;\n</code></pre>\n\n<p>I replaced it with spring-boot-starter-validation and it worked .</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot- \nstarter-validation --&gt;\n&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;version&gt;2.4.0&lt;/version&gt;\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":14393661,"reputation":574,"user_id":10397635,"display_name":"Thanny"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1609586083,"creation_date":1609586083,"answer_id":65538482,"question_id":48614773,"body_markdown":"For Anyone who is getting this issue with **2.0.1.Final**:\r\n\r\nIn all SpringBoot versions above 2.2, **Validations starter is not a part of web starter anymore**\r\n\r\n[Check Notes here][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\r\n\r\nSo, all you have to do is add this dependency in your build.gradle/pom file\r\n\r\nGRADLE:\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n\r\nMAVEN\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n     &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>For Anyone who is getting this issue with <strong>2.0.1.Final</strong>:</p>\n<p>In all SpringBoot versions above 2.2, <strong>Validations starter is not a part of web starter anymore</strong></p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\" rel=\"noreferrer\">Check Notes here</a></p>\n<p>So, all you have to do is add this dependency in your build.gradle/pom file</p>\n<p>GRADLE:</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-validation'\n</code></pre>\n<p>MAVEN</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20747718,"reputation":125,"user_id":15235962,"display_name":"CodeLearner"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1625228680,"creation_date":1625228680,"answer_id":68225160,"question_id":48614773,"body_markdown":"this is for anyone here who still has the same issue after following the steps mentioned above. I had to restart my IDE (IntelliJ) for the changes to take effect.","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>this is for anyone here who still has the same issue after following the steps mentioned above. I had to restart my IDE (IntelliJ) for the changes to take effect.</p>\n"},{"tags":[],"owner":{"account_id":8986718,"reputation":2467,"user_id":6700081,"accept_rate":73,"display_name":"firstpostcommenter"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1627334215,"creation_date":1627334215,"answer_id":68536417,"question_id":48614773,"body_markdown":"I faced the same error.\r\n\r\nI had to use the below 2 dependencies alone:\r\n\r\n          &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n\r\nAnd use `@Validated` annotation(import org.springframework.validation.annotation.Validated) on rest controller level and `@Valid` annotation at method argument level(import javax.validation.Valid)\r\n\r\nIf there are any other extra dependencies like `javax.validation.validation-api`, `org.hibernate.hibernate-validator`, etc then the validations stopped working for me. So make sure that you remove these dependencies from pom.xml","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>I faced the same error.</p>\n<p>I had to use the below 2 dependencies alone:</p>\n<pre><code>      &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And use <code>@Validated</code> annotation(import org.springframework.validation.annotation.Validated) on rest controller level and <code>@Valid</code> annotation at method argument level(import javax.validation.Valid)</p>\n<p>If there are any other extra dependencies like <code>javax.validation.validation-api</code>, <code>org.hibernate.hibernate-validator</code>, etc then the validations stopped working for me. So make sure that you remove these dependencies from pom.xml</p>\n"},{"tags":[],"owner":{"account_id":13893649,"reputation":733,"user_id":10807253,"display_name":"tensor"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1633072715,"creation_date":1633072715,"answer_id":69401963,"question_id":48614773,"body_markdown":"My problem solved by this.\r\nWhen we use classes inside classes that also need validations so `@Valid` needs to be annotated to all in that case.\r\n[Link for more details][1]\r\n\r\n\r\n  [1]: https://medium.com/javarevisited/are-you-using-valid-and-validated-annotations-wrong-b4a35ac1bca4","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>My problem solved by this.\nWhen we use classes inside classes that also need validations so <code>@Valid</code> needs to be annotated to all in that case.\n<a href=\"https://medium.com/javarevisited/are-you-using-valid-and-validated-annotations-wrong-b4a35ac1bca4\" rel=\"noreferrer\">Link for more details</a></p>\n"},{"tags":[],"owner":{"account_id":13782778,"reputation":935,"user_id":9947525,"display_name":"Fazal Haroon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674765162,"creation_date":1663929903,"answer_id":73826566,"question_id":48614773,"body_markdown":"You have to add this dependency in pom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**Note:** SNAPSHOT, M1, M2, M3, and M4 releases typically WORK IN PROGRESS. The Spring team is still working on them, Recommend NOT using them.","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>You have to add this dependency in pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Note:</strong> SNAPSHOT, M1, M2, M3, and M4 releases typically WORK IN PROGRESS. The Spring team is still working on them, Recommend NOT using them.</p>\n"},{"tags":[],"owner":{"account_id":12387567,"reputation":67,"user_id":9030570,"display_name":"Jewel"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1664249589,"creation_date":1664249589,"answer_id":73862049,"question_id":48614773,"body_markdown":"**Step-1: Add these two dependency in the pom.xml file**\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n**Step-2: Create a Custom Exception class like this**\r\n\r\n    package com.bjit.salon.auth.service.exceptions;\r\n\r\n\r\n    import org.springframework.context.support.DefaultMessageSourceResolvable;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.MethodArgumentNotValidException;\r\n    import org.springframework.web.bind.annotation.ControllerAdvice;\r\n    import org.springframework.web.bind.annotation.ExceptionHandler;\r\n    import org.springframework.web.bind.annotation.ResponseBody;\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n\r\n    @ControllerAdvice\r\n    public class AnynameApplicationException {\r\n\r\n        @ExceptionHandler(MethodArgumentNotValidException.class)\r\n        @ResponseBody\r\n        public ResponseEntity&lt;List&lt;String&gt;&gt; processUnmergeException(final \r\n    MethodArgumentNotValidException ex) {\r\n\r\n            List&lt;String&gt; list = ex.getBindingResult().getAllErrors().stream()\r\n                    .map(DefaultMessageSourceResolvable::getDefaultMessage)\r\n                    .collect(Collectors.toList());\r\n\r\n            return new ResponseEntity&lt;&gt;(list, HttpStatus.BAD_REQUEST);\r\n        }\r\n    }\r\n\r\n**Step-3: Add @Valid annotation to the method arguments like this way**\r\n\r\n    public ResponseEntity&lt;?&gt; registerAccount(@Valid @RequestBody UserRegisterDto \r\n          registerDto) {\r\n           \r\n        // rest of the codes\r\n    }\r\n\r\n","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p><strong>Step-1: Add these two dependency in the pom.xml file</strong></p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p><strong>Step-2: Create a Custom Exception class like this</strong></p>\n<pre><code>package com.bjit.salon.auth.service.exceptions;\n\n\nimport org.springframework.context.support.DefaultMessageSourceResolvable;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@ControllerAdvice\npublic class AnynameApplicationException {\n\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    @ResponseBody\n    public ResponseEntity&lt;List&lt;String&gt;&gt; processUnmergeException(final \nMethodArgumentNotValidException ex) {\n\n        List&lt;String&gt; list = ex.getBindingResult().getAllErrors().stream()\n                .map(DefaultMessageSourceResolvable::getDefaultMessage)\n                .collect(Collectors.toList());\n\n        return new ResponseEntity&lt;&gt;(list, HttpStatus.BAD_REQUEST);\n    }\n}\n</code></pre>\n<p><strong>Step-3: Add @Valid annotation to the method arguments like this way</strong></p>\n<pre><code>public ResponseEntity&lt;?&gt; registerAccount(@Valid @RequestBody UserRegisterDto \n      registerDto) {\n       \n    // rest of the codes\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8202001,"reputation":189,"user_id":6173055,"display_name":"Adarsh R Jayan"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1672859198,"creation_date":1672859198,"answer_id":75010119,"question_id":48614773,"body_markdown":"Make sure to use @Valid annotation before @RequestBody\r\n\r\nFor newer versions of spring boot ensure all validation annotation are picked from `jakarta.validation.*` package and not `javax.validation.*`. As the annotations are named same in both.","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>Make sure to use @Valid annotation before @RequestBody</p>\n<p>For newer versions of spring boot ensure all validation annotation are picked from <code>jakarta.validation.*</code> package and not <code>javax.validation.*</code>. As the annotations are named same in both.</p>\n"},{"tags":[],"owner":{"account_id":13060675,"reputation":1,"user_id":9437977,"display_name":"Ankush Pal"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674762590,"creation_date":1674762405,"answer_id":75250959,"question_id":48614773,"body_markdown":"You can use @NotEmpty will check for both blank and null values.\r\nAdd @Valid to your RestContoller class methods","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>You can use @NotEmpty will check for both blank and null values.\nAdd @Valid to your RestContoller class methods</p>\n"},{"tags":[],"owner":{"account_id":25138546,"reputation":11,"user_id":18985083,"display_name":"abhishekkumarXD"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685882124,"creation_date":1685881959,"answer_id":76400436,"question_id":48614773,"body_markdown":"Add this dependency to your **pom.xml** file and **@NotBlank, @NotNull, @Valid**, etc. should work fine.\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>Add this dependency to your <strong>pom.xml</strong> file and <strong>@NotBlank, @NotNull, @Valid</strong>, etc. should work fine.</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687862240,"creation_date":1687862240,"answer_id":76564007,"question_id":48614773,"body_markdown":"For anyone like me using spring boot 3.X.\r\n\r\nAfter the jackarta update you have to include extra config in order for the request body validation to work. (The field validation was working just fine even without extra config)\r\n\r\nAt the end all I needed was\r\n\r\n    @Configuration\r\n    public class ValidationConfiguration {\r\n    \r\n        @Bean\r\n        public LocalValidatorFactoryBean validator() {\r\n            return new LocalValidatorFactoryBean();\r\n        }\r\n    }\r\n\r\nand     `implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;`\r\n\r\nit is recommended to use the spring boot maven/gradle plugin so there are no version discrepencies \r\n","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>For anyone like me using spring boot 3.X.</p>\n<p>After the jackarta update you have to include extra config in order for the request body validation to work. (The field validation was working just fine even without extra config)</p>\n<p>At the end all I needed was</p>\n<pre><code>@Configuration\npublic class ValidationConfiguration {\n\n    @Bean\n    public LocalValidatorFactoryBean validator() {\n        return new LocalValidatorFactoryBean();\n    }\n}\n</code></pre>\n<p>and     <code>implementation 'org.springframework.boot:spring-boot-starter-validation'</code></p>\n<p>it is recommended to use the spring boot maven/gradle plugin so there are no version discrepencies</p>\n"},{"tags":[],"owner":{"account_id":8574402,"reputation":105,"user_id":6424090,"display_name":"Bashar ALkaddah"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1691503196,"creation_date":1691503196,"answer_id":76860281,"question_id":48614773,"body_markdown":"If you are using spring version &gt; 3\r\n\r\nand using Kotlin you should add @field:Annotation \r\n\r\nex: \r\n\r\n    @field:NotEmpty\r\n    @field:NotNull\r\n    @field:NotBlank(message = &quot;Email is required&quot;)\r\n    @field:Email(message = &quot;Please provide a valid email&quot;)\r\n    val email: String,\r\n    @field:NotEmpty\r\n    @field:NotNull\r\n    @field:NotBlank(message = &quot;Password is required&quot;)\r\n    val password: String,","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>If you are using spring version &gt; 3</p>\n<p>and using Kotlin you should add @field:Annotation</p>\n<p>ex:</p>\n<pre><code>@field:NotEmpty\n@field:NotNull\n@field:NotBlank(message = &quot;Email is required&quot;)\n@field:Email(message = &quot;Please provide a valid email&quot;)\nval email: String,\n@field:NotEmpty\n@field:NotNull\n@field:NotBlank(message = &quot;Password is required&quot;)\nval password: String,\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5089458,"reputation":364,"user_id":4082981,"display_name":"salerokada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692762959,"creation_date":1692762959,"answer_id":76958171,"question_id":48614773,"body_markdown":"Same problem with entities in my Kotlin Spring boot 3.x application.&lt;br&gt;\r\nSolved by adding `spring-boot-starter-validation` dependency and adding anotation `@field:NotBlank` (or `@field:NotNull`, `@field:NotEmpty`) on fields.","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>Same problem with entities in my Kotlin Spring boot 3.x application.<br>\nSolved by adding <code>spring-boot-starter-validation</code> dependency and adding anotation <code>@field:NotBlank</code> (or <code>@field:NotNull</code>, <code>@field:NotEmpty</code>) on fields.</p>\n"},{"tags":[],"owner":{"account_id":22750345,"reputation":9,"user_id":16910588,"display_name":"Adrian M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693048235,"creation_date":1693048206,"answer_id":76982702,"question_id":48614773,"body_markdown":"I had same problem\r\nFor me adding:\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\nunder the spring-boot-starter-web dependency solved problem.\r\nTo be sure you should generate dependency directly with Validation form start spring io. It&#39;s worth mentioning that **order of dependencies in pom file is crucial**","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>I had same problem\nFor me adding:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>under the spring-boot-starter-web dependency solved problem.\nTo be sure you should generate dependency directly with Validation form start spring io. It's worth mentioning that <strong>order of dependencies in pom file is crucial</strong></p>\n"},{"tags":[],"owner":{"account_id":11417863,"reputation":1016,"user_id":8370216,"display_name":"Abhijith mogaveera"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1697773377,"creation_date":1696343965,"answer_id":77223275,"question_id":48614773,"body_markdown":"* This answer is in &lt;h1&gt;&lt;B&gt;kotlin&lt;/B&gt;&lt;/h1&gt; you can also refer this for java syntext is highly similar\r\n* Create a exception handler \r\n* &lt;B&gt;Tip&lt;/b&gt;: check console for exception class \r\nto log error message in console add this line to &lt;B&gt;application.properties&lt;/B&gt;\r\n```kotlin\r\nserver.error.include-message =  always\r\n```\r\n```kotlin \r\nimport org.springframework.http.HttpStatus\r\nimport org.springframework.http.ResponseEntity\r\nimport org.springframework.stereotype.Component\r\nimport org.springframework.validation.FieldError\r\nimport org.springframework.validation.ObjectError\r\nimport org.springframework.web.bind.MethodArgumentNotValidException\r\nimport org.springframework.web.bind.annotation.ControllerAdvice\r\nimport org.springframework.web.bind.annotation.ExceptionHandler\r\nimport org.springframework.web.bind.annotation.ResponseBody\r\nimport org.springframework.web.bind.annotation.ResponseStatus\r\nimport java.util.function.Consumer\r\n\r\n@ControllerAdvice\r\nclass MethodArgumentNotValidExceptionHandler {\r\n    @ExceptionHandler(MethodArgumentNotValidException::class)\r\n    @ResponseBody\r\n    fun handleValidationExceptions(ex: MethodArgumentNotValidException): ResponseEntity&lt;Map&lt;String, String?&gt;&gt; {\r\n        val errors: MutableMap&lt;String, String?&gt; = HashMap()\r\n        ex.bindingResult.allErrors.forEach(Consumer { error: ObjectError -&gt;\r\n            val fieldName = (error as FieldError).field\r\n            val errorMessage = error.getDefaultMessage()\r\n            errors[fieldName] = errorMessage\r\n        })\r\n        println(errors)\r\n        return ResponseEntity.badRequest().body(errors)\r\n    }\r\n}\r\n\r\n```\r\n* use jakarta validation instead of java x in am using spring 3+\r\n```groove\r\n    implementation (&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\r\n```\r\n\r\n* if your are using kotlin target annotation to fields\r\n```kotlin\r\nimport jakarta.persistence.*\r\nimport jakarta.validation.constraints.Email\r\nimport jakarta.validation.constraints.NotBlank\r\nimport jakarta.validation.constraints.Pattern\r\nimport org.springframework.security.core.GrantedAuthority\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority\r\nimport org.springframework.security.core.userdetails.UserDetails\r\n\r\n@Entity\r\n@Table(name = &quot;_user&quot;)\r\ndata class User(\r\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    var id: Int? = null,\r\n    @field:NotBlank var firstName: String = &quot;&quot;,\r\n    @field:NotBlank var lastName: String = &quot;&quot;,\r\n    @field:Email @Column(unique = true) var email: String = &quot;&quot;,\r\n    @field:Column(unique = true, name = &quot;password&quot;)\r\n    @field:NotBlank private var _password: String = &quot;&quot;,\r\n) \r\n```\r\n* in your router class use @Validated annotation\r\n```kotiln\r\nimport jakarta.validation.Valid\r\n```\r\n```kotlin\r\n\r\n    @PostMapping(&quot;/login&quot;)\r\n    fun login(\r\n        @Validated @RequestBody reqBody: User,\r\n    ): ResponseEntity&lt;String&gt;? {\r\n        return ResponseEntity.ok(\r\n            accountService.login(\r\n                email = reqBody.email,\r\n                password = reqBody.password\r\n            ).bind()\r\n        )\r\n        \r\n    }\r\n```","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<ul>\n<li>This answer is in <h1><B>kotlin</B></h1> you can also refer this for java syntext is highly similar</li>\n<li>Create a exception handler</li>\n<li><B>Tip</b>: check console for exception class\nto log error message in console add this line to <B>application.properties</B></li>\n</ul>\n<pre class=\"lang-kotlin prettyprint-override\"><code>server.error.include-message =  always\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.springframework.http.HttpStatus\nimport org.springframework.http.ResponseEntity\nimport org.springframework.stereotype.Component\nimport org.springframework.validation.FieldError\nimport org.springframework.validation.ObjectError\nimport org.springframework.web.bind.MethodArgumentNotValidException\nimport org.springframework.web.bind.annotation.ControllerAdvice\nimport org.springframework.web.bind.annotation.ExceptionHandler\nimport org.springframework.web.bind.annotation.ResponseBody\nimport org.springframework.web.bind.annotation.ResponseStatus\nimport java.util.function.Consumer\n\n@ControllerAdvice\nclass MethodArgumentNotValidExceptionHandler {\n    @ExceptionHandler(MethodArgumentNotValidException::class)\n    @ResponseBody\n    fun handleValidationExceptions(ex: MethodArgumentNotValidException): ResponseEntity&lt;Map&lt;String, String?&gt;&gt; {\n        val errors: MutableMap&lt;String, String?&gt; = HashMap()\n        ex.bindingResult.allErrors.forEach(Consumer { error: ObjectError -&gt;\n            val fieldName = (error as FieldError).field\n            val errorMessage = error.getDefaultMessage()\n            errors[fieldName] = errorMessage\n        })\n        println(errors)\n        return ResponseEntity.badRequest().body(errors)\n    }\n}\n\n</code></pre>\n<ul>\n<li>use jakarta validation instead of java x in am using spring 3+</li>\n</ul>\n<pre><code>    implementation (&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\n</code></pre>\n<ul>\n<li>if your are using kotlin target annotation to fields</li>\n</ul>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import jakarta.persistence.*\nimport jakarta.validation.constraints.Email\nimport jakarta.validation.constraints.NotBlank\nimport jakarta.validation.constraints.Pattern\nimport org.springframework.security.core.GrantedAuthority\nimport org.springframework.security.core.authority.SimpleGrantedAuthority\nimport org.springframework.security.core.userdetails.UserDetails\n\n@Entity\n@Table(name = &quot;_user&quot;)\ndata class User(\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    var id: Int? = null,\n    @field:NotBlank var firstName: String = &quot;&quot;,\n    @field:NotBlank var lastName: String = &quot;&quot;,\n    @field:Email @Column(unique = true) var email: String = &quot;&quot;,\n    @field:Column(unique = true, name = &quot;password&quot;)\n    @field:NotBlank private var _password: String = &quot;&quot;,\n) \n</code></pre>\n<ul>\n<li>in your router class use @Validated annotation</li>\n</ul>\n<pre><code>import jakarta.validation.Valid\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>\n    @PostMapping(&quot;/login&quot;)\n    fun login(\n        @Validated @RequestBody reqBody: User,\n    ): ResponseEntity&lt;String&gt;? {\n        return ResponseEntity.ok(\n            accountService.login(\n                email = reqBody.email,\n                password = reqBody.password\n            ).bind()\n        )\n        \n    }\n</code></pre>\n"}],"owner":{"account_id":10356917,"reputation":1187,"user_id":7638553,"accept_rate":64,"display_name":"Poonkodi Sivapragasam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140844,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":48614909,"answer_count":17,"score":66,"last_activity_date":1697773377,"creation_date":1517794226,"question_id":48614773,"body_markdown":"Given below is my main controller from which I am calling the **getPDFDetails** method.\r\n\r\n    @RequestMapping(value=PATH_PRINT_CONTRACTS, method=RequestMethod.POST)\r\n    \tpublic ResponseEntity&lt;?&gt; printContracts(@RequestBody final UpdatePrintContracts updatePrintContracts) throws Exception {\r\n    \t\r\n    \t\tSystem.out.println(&quot;contracts value is &quot;+ updatePrintContracts);\r\n    \t\t\r\n    \t\tInteger cancellationReasons = service.getPDFDetails(updatePrintContracts);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;success!&quot;);\r\n    \t\t\r\n    \t\treturn ResponseEntity.ok(cancellationReasons);\r\n    \t}\t\r\n\r\nBelow is the **UpdatePrintContracts** class where I have defined all the variables with validation annotations and corresponding getter/setter methods.\r\n\r\n\r\n    public class UpdatePrintContracts {\r\n    \t\r\n    \t@Valid\r\n    \t@NotBlank\r\n    \t@Pattern(regexp = &quot;\\\\p{Alnum}{1,30}&quot;)\r\n    \tString isReprint;\r\n    \t\r\n    \t@Valid\r\n    \t@NotBlank\r\n    \tInteger dealerId;\r\n    \t\r\n    \t@Valid\r\n    \t@NotBlank\r\n    \t@Pattern(regexp = &quot;\\\\p{Alnum}{1,30}&quot;)\r\n    \tString includeSignatureCoordinates;\r\n    \t\r\n    \t@Valid\r\n    \t@NotBlank\r\n    \tjava.util.List&lt;Integer&gt; contractNumbers;\r\n    \r\n    \tpublic String getIsReprint() {\r\n    \t\treturn isReprint;\r\n    \t}\r\n    \r\n    \tpublic void setIsReprint(String isReprint) {\r\n    \t\tthis.isReprint = isReprint;\r\n    \t}\r\n    \r\n    \tpublic Integer getDealerId() {\r\n    \t\treturn dealerId;\r\n    \t}\r\n    \r\n    \tpublic void setDealerId(Integer dealerId) {\r\n    \t\tthis.dealerId = dealerId;\r\n    \t}\r\n    \r\n    \tpublic String getIncludeSignatureCoordinates() {\r\n    \t\treturn includeSignatureCoordinates;\r\n    \t}\r\n    \r\n    \tpublic void setIncludeSignatureCoordinates(String includeSignatureCoordinates) {\r\n    \t\tthis.includeSignatureCoordinates = includeSignatureCoordinates;\r\n    \t}\r\n    \r\n    \tpublic java.util.List&lt;Integer&gt; getContractNumbers() {\r\n    \t\treturn contractNumbers;\r\n    \t}\r\n    \r\n    \tpublic void setContractNumbers(java.util.List&lt;Integer&gt; contractNumbers) {\r\n    \t\tthis.contractNumbers = contractNumbers;\r\n    \t}\r\n    \t\r\n    }\r\n\r\nI am trying to run the application as a Spring Boot app by right clicking on the project (Run As) and passing blank values for variables **isReprint** and **includeSignatureCoordinates** through Soap UI. However the validation doesn&#39;t seem to work and is not throwing any validation error in Soap UI. What am I missing? Any help is appreciated!\r\n\r\n","title":"Spring boot validation annotations @Valid and @NotBlank not working","body":"<p>Given below is my main controller from which I am calling the <strong>getPDFDetails</strong> method.</p>\n<pre><code>@RequestMapping(value=PATH_PRINT_CONTRACTS, method=RequestMethod.POST)\n    public ResponseEntity&lt;?&gt; printContracts(@RequestBody final UpdatePrintContracts updatePrintContracts) throws Exception {\n    \n        System.out.println(&quot;contracts value is &quot;+ updatePrintContracts);\n        \n        Integer cancellationReasons = service.getPDFDetails(updatePrintContracts);\n        \n        System.out.println(&quot;success!&quot;);\n        \n        return ResponseEntity.ok(cancellationReasons);\n    }   \n</code></pre>\n<p>Below is the <strong>UpdatePrintContracts</strong> class where I have defined all the variables with validation annotations and corresponding getter/setter methods.</p>\n<pre><code>public class UpdatePrintContracts {\n    \n    @Valid\n    @NotBlank\n    @Pattern(regexp = &quot;\\\\p{Alnum}{1,30}&quot;)\n    String isReprint;\n    \n    @Valid\n    @NotBlank\n    Integer dealerId;\n    \n    @Valid\n    @NotBlank\n    @Pattern(regexp = &quot;\\\\p{Alnum}{1,30}&quot;)\n    String includeSignatureCoordinates;\n    \n    @Valid\n    @NotBlank\n    java.util.List&lt;Integer&gt; contractNumbers;\n\n    public String getIsReprint() {\n        return isReprint;\n    }\n\n    public void setIsReprint(String isReprint) {\n        this.isReprint = isReprint;\n    }\n\n    public Integer getDealerId() {\n        return dealerId;\n    }\n\n    public void setDealerId(Integer dealerId) {\n        this.dealerId = dealerId;\n    }\n\n    public String getIncludeSignatureCoordinates() {\n        return includeSignatureCoordinates;\n    }\n\n    public void setIncludeSignatureCoordinates(String includeSignatureCoordinates) {\n        this.includeSignatureCoordinates = includeSignatureCoordinates;\n    }\n\n    public java.util.List&lt;Integer&gt; getContractNumbers() {\n        return contractNumbers;\n    }\n\n    public void setContractNumbers(java.util.List&lt;Integer&gt; contractNumbers) {\n        this.contractNumbers = contractNumbers;\n    }\n    \n}\n</code></pre>\n<p>I am trying to run the application as a Spring Boot app by right clicking on the project (Run As) and passing blank values for variables <strong>isReprint</strong> and <strong>includeSignatureCoordinates</strong> through Soap UI. However the validation doesn't seem to work and is not throwing any validation error in Soap UI. What am I missing? Any help is appreciated!</p>\n"},{"tags":["java","enums","static","enum-map"],"comments":[{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":2,"creation_date":1621442605,"post_id":67607416,"comment_id":119499203,"body_markdown":"second one is a big anti-pattern and your first one does not initialize an `EnumMap`, but a `Map` (immutable one)","body":"second one is a big anti-pattern and your first one does not initialize an <code>EnumMap</code>, but a <code>Map</code> (immutable one)"}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621442794,"creation_date":1621442794,"answer_id":67607485,"question_id":67607416,"body_markdown":"do it in a static block:\r\n\r\n\r\n    private static final EnumMap&lt;....&gt; yourMap = ...\r\n\r\n    static {\r\n       yourMap.put(....);\r\n       yourMap.put(....)\r\n    }\r\n\r\nThere will be ways to do this rather differently (but they don&#39;t exist in the API yet), via `Constant Dynamic`. ","title":"What is the best way to statically initialize an EnumMap in Java","body":"<p>do it in a static block:</p>\n<pre><code>private static final EnumMap&lt;....&gt; yourMap = ...\n\nstatic {\n   yourMap.put(....);\n   yourMap.put(....)\n}\n</code></pre>\n<p>There will be ways to do this rather differently (but they don't exist in the API yet), via <code>Constant Dynamic</code>.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621445310,"creation_date":1621445310,"answer_id":67608112,"question_id":67607416,"body_markdown":"Do it in a method:\r\n\r\n```\r\nprivate static final EnumMap&lt;....&gt; yourMap = yourMapMethod();\r\n\r\nprivate static EnumMap&lt;....&gt; yourMapMethod() {\r\n   EnumMap&lt;....&gt; yourMap = ...\r\n   yourMap.put(....);\r\n   yourMap.put(....);\r\n   return yourMap;\r\n}\r\n```","title":"What is the best way to statically initialize an EnumMap in Java","body":"<p>Do it in a method:</p>\n<pre><code>private static final EnumMap&lt;....&gt; yourMap = yourMapMethod();\n\nprivate static EnumMap&lt;....&gt; yourMapMethod() {\n   EnumMap&lt;....&gt; yourMap = ...\n   yourMap.put(....);\n   yourMap.put(....);\n   return yourMap;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1621512381,"creation_date":1621511320,"answer_id":67619750,"question_id":67607416,"body_markdown":"A neat way to setup EnumMap is to define all the values in-line using `Map.of` or `Map.ofEntries` but note that this allocates a Map before the EnumMap constructor:\r\n\r\n    private static final EnumMap&lt;YourEnum,String&gt; A = new EnumMap&lt;&gt;(Map.of(\r\n            YourEnum.ONE, &quot;Value1&quot;,\r\n            YourEnum.TWO, &quot;Value2&quot;\r\n    ));\r\n\r\n    // Use Map.ofEntries for enums with more than 10 values:\r\n    private static final EnumMap&lt;YourEnum,String&gt; B = new EnumMap&lt;&gt;(Map.ofEntries(\r\n            Map.entry(YourEnum.ONE, &quot;Value1&quot;),\r\n            Map.entry(YourEnum.TWO, &quot;Value2&quot;)\r\n    ));\r\n\r\n\r\nIf wanting public access then wrap as unmodifiable Map (which is backed by EnumMap) or just pass back `Map.of` directly (but is not using an EnumMap).\r\n\r\n    public static final Map&lt;YourEnum,String&gt; C = Collections.unmodifiableMap(B);\r\n","title":"What is the best way to statically initialize an EnumMap in Java","body":"<p>A neat way to setup EnumMap is to define all the values in-line using <code>Map.of</code> or <code>Map.ofEntries</code> but note that this allocates a Map before the EnumMap constructor:</p>\n<pre><code>private static final EnumMap&lt;YourEnum,String&gt; A = new EnumMap&lt;&gt;(Map.of(\n        YourEnum.ONE, &quot;Value1&quot;,\n        YourEnum.TWO, &quot;Value2&quot;\n));\n\n// Use Map.ofEntries for enums with more than 10 values:\nprivate static final EnumMap&lt;YourEnum,String&gt; B = new EnumMap&lt;&gt;(Map.ofEntries(\n        Map.entry(YourEnum.ONE, &quot;Value1&quot;),\n        Map.entry(YourEnum.TWO, &quot;Value2&quot;)\n));\n</code></pre>\n<p>If wanting public access then wrap as unmodifiable Map (which is backed by EnumMap) or just pass back <code>Map.of</code> directly (but is not using an EnumMap).</p>\n<pre><code>public static final Map&lt;YourEnum,String&gt; C = Collections.unmodifiableMap(B);\n</code></pre>\n"}],"owner":{"account_id":3074142,"reputation":991,"user_id":2603985,"accept_rate":41,"display_name":"javaguy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10153,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":67619750,"answer_count":3,"score":9,"last_activity_date":1697773255,"creation_date":1621442518,"question_id":67607416,"body_markdown":"I need to statically initialize an EnumMap. I know two ways. \r\n\r\n1. Using of() method of Map\r\n\r\n\t```java\r\n    private static final Map&lt;&lt;EnumKey&gt;, &lt;Value&gt;&gt; TEST_MAP = Map.of(ENUM_CONST1, &quot;Value1&quot;, ENUM_CONST2, &quot;Value2&quot;);\r\n\t```\r\n\r\n2.  Using double brace initialization\r\n\r\n\r\n\t```java\r\n    private static final Map&lt;&lt;EnumKey&gt;, &lt;Value&gt;&gt; TEST_MAP = new EnumMap&lt;&gt;(EnumKey.class) {\r\n        {\r\n            put(ENUM_CONST1, &quot;Value1&quot;);\r\n            put(ENUM_CONST2, &quot;Value2&quot;);\r\n         }\r\n    };\r\n\t```\r\n\r\n\r\nIs there any other cleaner and more efficient way?","title":"What is the best way to statically initialize an EnumMap in Java","body":"<p>I need to statically initialize an EnumMap. I know two ways.</p>\n<ol>\n<li><p>Using of() method of Map</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Map&lt;&lt;EnumKey&gt;, &lt;Value&gt;&gt; TEST_MAP = Map.of(ENUM_CONST1, &quot;Value1&quot;, ENUM_CONST2, &quot;Value2&quot;);\n</code></pre>\n</li>\n<li><p>Using double brace initialization</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Map&lt;&lt;EnumKey&gt;, &lt;Value&gt;&gt; TEST_MAP = new EnumMap&lt;&gt;(EnumKey.class) {\n    {\n        put(ENUM_CONST1, &quot;Value1&quot;);\n        put(ENUM_CONST2, &quot;Value2&quot;);\n     }\n};\n</code></pre>\n</li>\n</ol>\n<p>Is there any other cleaner and more efficient way?</p>\n"},{"tags":["java","hibernate","character-encoding"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1697773074,"post_id":77327954,"comment_id":136324582,"body_markdown":"Try `hibernate.connection.CharSet=GBK` and `hibernate.connection.characterEncoding=GBK` and maybe `hibernate.connection.useUnicode=true`","body":"Try <code>hibernate.connection.CharSet=GBK</code> and <code>hibernate.connection.characterEncoding=GBK</code> and maybe <code>hibernate.connection.useUnicode=true</code>"},{"owner":{"account_id":29712605,"reputation":31,"user_id":22771863,"display_name":"陈泰成"},"score":0,"creation_date":1697780290,"post_id":77327954,"comment_id":136325057,"body_markdown":"Thanks for your advice. I tried it and it was not useful.","body":"Thanks for your advice. I tried it and it was not useful."},{"owner":{"account_id":3277167,"reputation":8773,"user_id":2758823,"display_name":"Giacomo Catenazzi"},"score":0,"creation_date":1697789034,"post_id":77327954,"comment_id":136326317,"body_markdown":"Consoles have often problems. UTF-8 encoding is &quot;modern&quot;, but not supported by all consoles. Fonts creates problems (consoles expect monospacing, but then we have the double spacing characters which are not consistently handled). Etc.  If it is possible: save to a log file, and use an editor (possibly one which notice updates on the files). Else: a true terminal (outside JetBrain) is better then &quot;build-in&quot; terminal/wrapper, which do much magic, but so it fails often (e.g. if you print &quot;...&quot; or something that may seems a prompt. PS: fill a bug report to them.","body":"Consoles have often problems. UTF-8 encoding is &quot;modern&quot;, but not supported by all consoles. Fonts creates problems (consoles expect monospacing, but then we have the double spacing characters which are not consistently handled). Etc.  If it is possible: save to a log file, and use an editor (possibly one which notice updates on the files). Else: a true terminal (outside JetBrain) is better then &quot;build-in&quot; terminal/wrapper, which do much magic, but so it fails often (e.g. if you print &quot;...&quot; or something that may seems a prompt. PS: fill a bug report to them."}],"owner":{"account_id":29712605,"reputation":31,"user_id":22771863,"display_name":"陈泰成"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1697773114,"creation_date":1697767420,"question_id":77327954,"body_markdown":"After I started a SpringMVC project in JetBrain IDEA, some of the console information appeared as Chinese garbled characters, as shown in the screen shot below:\r\n\r\n[![Stack trace][1]][1]\r\n\r\nHere is that stack trace in text form:\r\n\r\n```\r\nCaused by: com.microsoft.sqlserver.jdbc.SQLServerException: 鏁版嵁搴撲腑宸插瓨鍦ㄥ悕涓� &#39;Pro_Plan&#39; 鐨勫璞&#176;��\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:792) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:689) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:662) ~[sqljdbc4-4.0.jar:?]\r\n\tat com.alibaba.druid.filter.FilterChainImpl.statement_execute(FilterChainImpl.java:2993) ~[druid-1.2.20.jar:?]\r\n\tat com.alibaba.druid.filter.FilterAdapter.statement_execute(FilterAdapter.java:2483) ~[druid-1.2.20.jar:?]\r\n\tat com.alibaba.druid.filter.FilterEventAdapter.statement_execute(FilterEventAdapter.java:182) ~[druid-1.2.20.jar:?]\r\n\tat com.alibaba.druid.filter.FilterChainImpl.statement_execute(FilterChainImpl.java:2991) ~[druid-1.2.20.jar:?]\r\n\tat com.alibaba.druid.proxy.jdbc.StatementProxyImpl.execute(StatementProxyImpl.java:143) ~[druid-1.2.20.jar:?]\r\n\tat com.alibaba.druid.pool.DruidPooledStatement.execute(DruidPooledStatement.java:635) ~[druid-1.2.20.jar:?]\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\r\n\t... 77 more\r\n```\r\n\r\nThe operating system is WIN 11, the encoding is GBK, and the project startup container is Tomcat. Because the default encoding of Notepad is GBK, I configured the output encoding format in logging.properties as GBK.\r\n\r\nHow can I make this information appear properly?\r\n\r\nI tried to change the file encoding configration of IDEA, but the project could not be started because some of the packages referenced by the project require UTF-8 encoding as a whole. So I keep UTF-8 in the encoding configuration of IDEA.\r\n\r\nI also tried to change the output encoding format in logging.properties as UTF-8 for Tomcat. It seemed not useful after I restarted my project and caused new problem that other Chinese info which had appeared normally also became garbled. So I restored the output encoding format to GBK and must keep console encoding format using GBK as the same reason.\r\n\r\nIt seems that logging information about Hibernate operating when staring project used UTF-8 so it could not appear properly in GBK-encoded console. But why did the other Chinese logging info appear properly ? They also use the UTF-8 encoding.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MEDtT.png","title":"how can I fix this &quot;Chinese garbled character&quot; problem?","body":"<p>After I started a SpringMVC project in JetBrain IDEA, some of the console information appeared as Chinese garbled characters, as shown in the screen shot below:</p>\n<p><a href=\"https://i.stack.imgur.com/MEDtT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MEDtT.png\" alt=\"Stack trace\" /></a></p>\n<p>Here is that stack trace in text form:</p>\n<pre><code>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: 鏁版嵁搴撲腑宸插瓨鍦ㄥ悕涓� 'Pro_Plan' 鐨勫璞°��\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:792) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:689) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155) ~[sqljdbc4-4.0.jar:?]\n    at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:662) ~[sqljdbc4-4.0.jar:?]\n    at com.alibaba.druid.filter.FilterChainImpl.statement_execute(FilterChainImpl.java:2993) ~[druid-1.2.20.jar:?]\n    at com.alibaba.druid.filter.FilterAdapter.statement_execute(FilterAdapter.java:2483) ~[druid-1.2.20.jar:?]\n    at com.alibaba.druid.filter.FilterEventAdapter.statement_execute(FilterEventAdapter.java:182) ~[druid-1.2.20.jar:?]\n    at com.alibaba.druid.filter.FilterChainImpl.statement_execute(FilterChainImpl.java:2991) ~[druid-1.2.20.jar:?]\n    at com.alibaba.druid.proxy.jdbc.StatementProxyImpl.execute(StatementProxyImpl.java:143) ~[druid-1.2.20.jar:?]\n    at com.alibaba.druid.pool.DruidPooledStatement.execute(DruidPooledStatement.java:635) ~[druid-1.2.20.jar:?]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54) ~[hibernate-core-5.6.11.Final.jar:5.6.11.Final]\n    ... 77 more\n</code></pre>\n<p>The operating system is WIN 11, the encoding is GBK, and the project startup container is Tomcat. Because the default encoding of Notepad is GBK, I configured the output encoding format in logging.properties as GBK.</p>\n<p>How can I make this information appear properly?</p>\n<p>I tried to change the file encoding configration of IDEA, but the project could not be started because some of the packages referenced by the project require UTF-8 encoding as a whole. So I keep UTF-8 in the encoding configuration of IDEA.</p>\n<p>I also tried to change the output encoding format in logging.properties as UTF-8 for Tomcat. It seemed not useful after I restarted my project and caused new problem that other Chinese info which had appeared normally also became garbled. So I restored the output encoding format to GBK and must keep console encoding format using GBK as the same reason.</p>\n<p>It seems that logging information about Hibernate operating when staring project used UTF-8 so it could not appear properly in GBK-encoded console. But why did the other Chinese logging info appear properly ? They also use the UTF-8 encoding.</p>\n"},{"tags":["java","wso2","mediator","chatsdk","wso2-esb"],"answers":[{"tags":[],"owner":{"account_id":5428195,"reputation":41,"user_id":4319870,"display_name":"irham iqbal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527834722,"creation_date":1527834722,"answer_id":50637358,"question_id":50636196,"body_markdown":"You can call your sdk from the class mediator and do the implementation when your going to deploy the mediator on wso2 you need to copy the sdk jar along with the mediator jar to WSO2_HOME/repository/components/lib","title":"I need to call chat sdk from wso2 class mediator","body":"<p>You can call your sdk from the class mediator and do the implementation when your going to deploy the mediator on wso2 you need to copy the sdk jar along with the mediator jar to WSO2_HOME/repository/components/lib</p>\n"},{"tags":[],"owner":{"account_id":27980254,"reputation":1,"user_id":21368132,"display_name":"Atchaya Jayabal"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1697772266,"creation_date":1697772266,"answer_id":77328164,"question_id":50636196,"body_markdown":"To call a compiled Chat SDK in an Android app, there are a few steps:\r\n\r\nAdd the SDK as a Gradle dependency in your app&#39;s build.gradle file. For example:\r\n\r\n\r\n    implementation &#39;chat.sdk:firebase-app:[latest-version]&#39;\r\n\r\nMake sure your app inherits from the Chat SDK theme in your styles.xml file:\r\n    &lt;style name=&quot;AppTheme&quot; parent=&quot;ChatSDKTheme&quot;&gt;\r\n\r\nIn your Android app, call the methods and classes from the Chat SDK.The exact implementation will depend on the SDK and your app&#39;s\r\n   requirements.\r\n\r\nWhen deploying to WSO2, copy the Chat SDK jar file along with your app&#39;s jar file to the WSO2_HOME/repository/components/lib folder.\r\n\r\nTo call the Chat SDK from a WSO2 class mediator, implement the logic in the mediator class and call the Chat SDK classes and methods from within that class.\r\n\r\nYou may need to install additional libraries to resolve dependencies issues, as mentioned in one of the Stack Overflow answers.\r\n\r\nThat&#39;s the basic process to add a compiled Chat SDK to your Android app and call it from within WSO2. The GitBook documentation provides more details on adding the Chat SDK to a project. ","title":"I need to call chat sdk from wso2 class mediator","body":"<p>To call a compiled Chat SDK in an Android app, there are a few steps:</p>\n<p>Add the SDK as a Gradle dependency in your app's build.gradle file. For example:</p>\n<pre><code>implementation 'chat.sdk:firebase-app:[latest-version]'\n</code></pre>\n<p>Make sure your app inherits from the Chat SDK theme in your styles.xml file:\n</p>\n<p>In your Android app, call the methods and classes from the Chat SDK.The exact implementation will depend on the SDK and your app's\nrequirements.</p>\n<p>When deploying to WSO2, copy the Chat SDK jar file along with your app's jar file to the WSO2_HOME/repository/components/lib folder.</p>\n<p>To call the Chat SDK from a WSO2 class mediator, implement the logic in the mediator class and call the Chat SDK classes and methods from within that class.</p>\n<p>You may need to install additional libraries to resolve dependencies issues, as mentioned in one of the Stack Overflow answers.</p>\n<p>That's the basic process to add a compiled Chat SDK to your Android app and call it from within WSO2. The GitBook documentation provides more details on adding the Chat SDK to a project.</p>\n"}],"owner":{"account_id":13691599,"reputation":1,"user_id":9879242,"display_name":"Aisha Raghavanbadal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697772266,"creation_date":1527828040,"question_id":50636196,"body_markdown":"I have compiled chat sdk in android studio ,it is working fine but I need to add it to my app as an extension so how could I call chat sdk into wso2 . ","title":"I need to call chat sdk from wso2 class mediator","body":"<p>I have compiled chat sdk in android studio ,it is working fine but I need to add it to my app as an extension so how could I call chat sdk into wso2 . </p>\n"},{"tags":["java","sftp","jsch"],"answers":[{"tags":[],"owner":{"account_id":12824873,"reputation":165,"user_id":9278319,"display_name":"greatFritz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697770681,"creation_date":1697770681,"answer_id":77328094,"question_id":77319573,"body_markdown":"Thank you so much [dave_tompson_085][1] and [Rob Spoor][2]. I looked at my dependency build.gradle and noticed that for some reason another one of my modules included the jcraft.jsch 0.1.54 library in the build.gradle. I removed that and now I am able to make an sftp connection. \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2868801/dave-thompson-085\r\n  [2]: https://stackoverflow.com/users/1180351/rob-spoor","title":"Connection to SFTP using Jsch throwing NullPointer","body":"<p>Thank you so much <a href=\"https://stackoverflow.com/users/2868801/dave-thompson-085\">dave_tompson_085</a> and <a href=\"https://stackoverflow.com/users/1180351/rob-spoor\">Rob Spoor</a>. I looked at my dependency build.gradle and noticed that for some reason another one of my modules included the jcraft.jsch 0.1.54 library in the build.gradle. I removed that and now I am able to make an sftp connection.</p>\n"}],"owner":{"account_id":12824873,"reputation":165,"user_id":9278319,"display_name":"greatFritz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697770681,"creation_date":1697662880,"question_id":77319573,"body_markdown":"I am writing a basic application using jsch to try and connect with an AWS SFTP server.\r\n\r\nI am using jsch version \r\n`implementation group: &#39;com.github.mwiede&#39;, name: &#39;jsch&#39;, version: &#39;0.2.11&#39;`\r\n\r\nWhen I try to make a connection it gets disconnected immediately after a handshake and my console shows this error code.\r\n```\r\ncom.jcraft.jsch.JSchException: java.lang.NullPointerException\r\n    at com.jcraft.jsch.Session.receive_kexinit(Session.java:605)\r\n```\r\n\r\nWith this simple connection code\r\n```\r\ntry{\r\n    Security.insertProviderAt(new BouncyCastleProvider(), 1);\r\n\r\n    Hashtable&lt;String, String&gt; config = new Hashtable&lt;&gt;();\r\n    config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\r\n    JSch sch = new JSch();\r\n    JSch.setConfig(config);\r\n    JSch.setLogger(new TestLogger(logger));\r\n\r\n    JSch.setConfig(&quot;kex&quot;, &quot;diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256&quot;);\r\n    JSch.setConfig(&quot;mac.s2c&quot;, &quot;hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com&quot;);\r\n    JSch.setConfig(&quot;mac.c2s&quot;, &quot;hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com&quot;);\r\n\r\n    JSch.setConfig(&quot;enable_server_sig_algs&quot;, &quot;yes&quot;);\r\n    JSch.setConfig(&quot;prefer_known_host_key_types&quot;, &quot;yes&quot;);\r\n    JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, &quot;ssh-rsa&quot;);\r\n\r\n    Session session = sch.getSession(username, hostname, 22);\r\n\r\n    system.print.out.ln(&quot;Opening session for SFTP&quot;);\r\n    sch.addIdentity(rsaKey);\r\n\r\n    System.print.out.ln(&quot;Attempting to connect&quot;);\r\n    session.connect(60 * 1000);\r\n\r\n}catch (Exception e){\r\n    System.print.out.ln(&quot;Error: &quot; + e);\r\n}\r\n```\r\nAnd below is the info of what is happening during the connection\r\n``` \r\n\r\nAttempting to connect\r\nINFO | Connecting to HOSTNAME port PORT\r\nINFO | Connection established\r\nINFO | Remote version string: SSH-2.0-AWS_SFTP_1.1\r\nINFO | Local version string: SSH-2.0-JSCH-0.1.54\r\nINFO | CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256\r\nCheckKexes: diffie-hellman-group14-sha1,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521\r\nCheckSignatures: ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\r\nINFO | SSH_MSG_KEXINIT sent\r\nINFO | SSH_MSG_KEXINIT received\r\nINFO | kex: server: diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\r\nINFO | kex: server: rsa-sha2-512,rsa-sha2-256,ssh-rsa\r\nINFO | kex: server: aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr\r\nINFO | kex: server: aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr\r\nINFO | kex: server: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\r\nINFO | kex: server: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\r\nINFO | kex: server: none,zlib@openssh.com\r\nINFO | kex: server: none,zlib@openssh.com\r\nINFO | kex: server: \r\nINFO | kex: server: \r\nINFO | kex: client: diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\r\nINFO | kex: client: ssh-rsa,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\r\nINFO | kex: client: aes192-ctr\r\nINFO | kex: client: aes192-ctr\r\nINFO | kex: client: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\r\nINFO | kex: client: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\r\nINFO | kex: client: none\r\nINFO | kex: client: none\r\nINFO | kex: client: \r\nINFO | kex: client: \r\nINFO | kex: server-&gt;client aes192-ctr hmac-sha2-256-etm@openssh.com none\r\nINFO | kex: client-&gt;server aes192-ctr hmac-sha2-256-etm@openssh.com none\r\nINFO | Disconnecting from HOSTNAME port PORT\r\n```\r\n","title":"Connection to SFTP using Jsch throwing NullPointer","body":"<p>I am writing a basic application using jsch to try and connect with an AWS SFTP server.</p>\n<p>I am using jsch version\n<code>implementation group: 'com.github.mwiede', name: 'jsch', version: '0.2.11'</code></p>\n<p>When I try to make a connection it gets disconnected immediately after a handshake and my console shows this error code.</p>\n<pre><code>com.jcraft.jsch.JSchException: java.lang.NullPointerException\n    at com.jcraft.jsch.Session.receive_kexinit(Session.java:605)\n</code></pre>\n<p>With this simple connection code</p>\n<pre><code>try{\n    Security.insertProviderAt(new BouncyCastleProvider(), 1);\n\n    Hashtable&lt;String, String&gt; config = new Hashtable&lt;&gt;();\n    config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n\n    JSch sch = new JSch();\n    JSch.setConfig(config);\n    JSch.setLogger(new TestLogger(logger));\n\n    JSch.setConfig(&quot;kex&quot;, &quot;diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256&quot;);\n    JSch.setConfig(&quot;mac.s2c&quot;, &quot;hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com&quot;);\n    JSch.setConfig(&quot;mac.c2s&quot;, &quot;hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com&quot;);\n\n    JSch.setConfig(&quot;enable_server_sig_algs&quot;, &quot;yes&quot;);\n    JSch.setConfig(&quot;prefer_known_host_key_types&quot;, &quot;yes&quot;);\n    JSch.setConfig(&quot;PubkeyAcceptedAlgorithms&quot;, &quot;ssh-rsa&quot;);\n\n    Session session = sch.getSession(username, hostname, 22);\n\n    system.print.out.ln(&quot;Opening session for SFTP&quot;);\n    sch.addIdentity(rsaKey);\n\n    System.print.out.ln(&quot;Attempting to connect&quot;);\n    session.connect(60 * 1000);\n\n}catch (Exception e){\n    System.print.out.ln(&quot;Error: &quot; + e);\n}\n</code></pre>\n<p>And below is the info of what is happening during the connection</p>\n<pre><code>\nAttempting to connect\nINFO | Connecting to HOSTNAME port PORT\nINFO | Connection established\nINFO | Remote version string: SSH-2.0-AWS_SFTP_1.1\nINFO | Local version string: SSH-2.0-JSCH-0.1.54\nINFO | CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256\nCheckKexes: diffie-hellman-group14-sha1,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521\nCheckSignatures: ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\nINFO | SSH_MSG_KEXINIT sent\nINFO | SSH_MSG_KEXINIT received\nINFO | kex: server: diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\nINFO | kex: server: rsa-sha2-512,rsa-sha2-256,ssh-rsa\nINFO | kex: server: aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr\nINFO | kex: server: aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr\nINFO | kex: server: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\nINFO | kex: server: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\nINFO | kex: server: none,zlib@openssh.com\nINFO | kex: server: none,zlib@openssh.com\nINFO | kex: server: \nINFO | kex: server: \nINFO | kex: client: diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256\nINFO | kex: client: ssh-rsa,ssh-dss,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521\nINFO | kex: client: aes192-ctr\nINFO | kex: client: aes192-ctr\nINFO | kex: client: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\nINFO | kex: client: hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com\nINFO | kex: client: none\nINFO | kex: client: none\nINFO | kex: client: \nINFO | kex: client: \nINFO | kex: server-&gt;client aes192-ctr hmac-sha2-256-etm@openssh.com none\nINFO | kex: client-&gt;server aes192-ctr hmac-sha2-256-etm@openssh.com none\nINFO | Disconnecting from HOSTNAME port PORT\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-acm"],"comments":[{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1697764276,"post_id":77327746,"comment_id":136323932,"body_markdown":"Evidently the certificate does *not* have two domains, instead it has all these domains: `sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com, *.sqs.ap-southeast-2.vpce.amazonaws.com` and the URL you used matches none of them","body":"Evidently the certificate does <i>not</i> have two domains, instead it has all these domains: <code>sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com, *.sqs.ap-southeast-2.vpce.amazonaws.com</code> and the URL you used matches none of them"},{"owner":{"account_id":23829556,"reputation":55,"user_id":17836028,"display_name":"YusufDoc"},"score":0,"creation_date":1697783497,"post_id":77327746,"comment_id":136325404,"body_markdown":"@PresidentJamesK.Polk When creating the certificate, I entered domain names [test.domain.dev, *.test.domain.dev] and the application is doing POST to https://test.domain.dev\n\nIt is working fine when I do a curl from an ec2 box but the application which is in the same vpc and subnet is getting the error.\n\nDo you mean to say I have to add amazonaws domains in the certificate?","body":"@PresidentJamesK.Polk When creating the certificate, I entered domain names [test.domain.dev, *.test.domain.dev] and the application is doing POST to <a href=\"https://test.domain.dev\" rel=\"nofollow noreferrer\">test.domain.dev</a>  It is working fine when I do a curl from an ec2 box but the application which is in the same vpc and subnet is getting the error.  Do you mean to say I have to add amazonaws domains in the certificate?"}],"owner":{"account_id":23829556,"reputation":55,"user_id":17836028,"display_name":"YusufDoc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697766385,"creation_date":1697762532,"question_id":77327746,"body_markdown":"I am trying to test using a private certificate on a network load balancer issued through AWS Private CA.\r\n\r\nIt is a cross account setup. The app is calling a VPC endpoint (same account as app) which is linked to an endpoint service (different account). The endpoint service is behind a network load balancer. I have installed the private certificate on the NLB. The certificate has 2 domains listed which are used as private dns names for the endpoint and endpoint service.\r\n\r\nI have created a custom jks truststore which holds the root certificate and created a custom web client to use https.\r\n\r\nWhen the application is calling the private dns url, I see this error in the logs\r\n\r\n```\r\n&quot;stack_trace&quot;: &quot;j.n.s.SSLPeerUnverifiedException: Certificate for &lt;private dns name&gt; doesn&#39;t match any of the subject alternative names [sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com,*.sqs.ap-southeast-2.vpce.amazonaws.com]\\\r\n\\tato.a.h.c.h.s.DefaultHostnameVerifier.matchDNSName(DefaultHostnameVerifer.java:165\\\r\n\\tato.a.h.c.h.s.DefaultHostnameVerifier.verify(DefaultHostnameVerifier.java:120)\\\r\n\\tato.a.h.c.h.s.TlsSessionValidator.verifySession(TlsSessionValidator.java:113)\\\r\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.verifySession(SSLConnectionSocketFactory.java:340)\\\r\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.verifyHostname(SSLConnectionSocketFactory.java:329)\\\r\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.executeHandshake(SSLConnectionSocketFactory.java:304)\\\r\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:275)\\\r\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:251)\\\r\n\\tato.a.h.c.h.i.i.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:181)\\\r\n\\tato.a.h.c.h.i.i.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:447)\\\r\n\\tato.a.h.c.h.i.c.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:162)\\\r\n\\tato.a.h.c.h.i.c.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:172)\\\r\n\\tat o.a.h.c.h.i.c.ConnectExec.execute(ConnectExec.java:142)\\\r\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\r\n\\tat o.a.h.c.h.i.c.ProtocolExec.execute(ProtocolExec.java:192)\\\r\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\r\n\\tato.a.h.c.h.i.c.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:96)\\\r\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\r\n\\tato.a.h.c.h.i.c.ContentCompressionExec.execute(ContentCompressionExec.java:152)\\\r\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\r\n\\tat o.a.h.c.h.i.c.RedirectExec.execute(RedirectExec.java:115)\\\r\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement....\\&quot;\r\n}\r\n```\r\n\r\nI am confused as to why it is giving me error for\r\n```[sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com, *.sqs.ap-southeast-2.vpce.amazonaws.com]```\r\n\r\nAnyone know what this error means and how to resolve this?\r\n\r\nThanks","title":"Error when using custom truststore in java","body":"<p>I am trying to test using a private certificate on a network load balancer issued through AWS Private CA.</p>\n<p>It is a cross account setup. The app is calling a VPC endpoint (same account as app) which is linked to an endpoint service (different account). The endpoint service is behind a network load balancer. I have installed the private certificate on the NLB. The certificate has 2 domains listed which are used as private dns names for the endpoint and endpoint service.</p>\n<p>I have created a custom jks truststore which holds the root certificate and created a custom web client to use https.</p>\n<p>When the application is calling the private dns url, I see this error in the logs</p>\n<pre><code>&quot;stack_trace&quot;: &quot;j.n.s.SSLPeerUnverifiedException: Certificate for &lt;private dns name&gt; doesn't match any of the subject alternative names [sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com,*.sqs.ap-southeast-2.vpce.amazonaws.com]\\\n\\tato.a.h.c.h.s.DefaultHostnameVerifier.matchDNSName(DefaultHostnameVerifer.java:165\\\n\\tato.a.h.c.h.s.DefaultHostnameVerifier.verify(DefaultHostnameVerifier.java:120)\\\n\\tato.a.h.c.h.s.TlsSessionValidator.verifySession(TlsSessionValidator.java:113)\\\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.verifySession(SSLConnectionSocketFactory.java:340)\\\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.verifyHostname(SSLConnectionSocketFactory.java:329)\\\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.executeHandshake(SSLConnectionSocketFactory.java:304)\\\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:275)\\\n\\tato.a.h.c.h.s.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:251)\\\n\\tato.a.h.c.h.i.i.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:181)\\\n\\tato.a.h.c.h.i.i.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:447)\\\n\\tato.a.h.c.h.i.c.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:162)\\\n\\tato.a.h.c.h.i.c.InternalExecRuntime.connectEndpoint(InternalExecRuntime.java:172)\\\n\\tat o.a.h.c.h.i.c.ConnectExec.execute(ConnectExec.java:142)\\\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\n\\tat o.a.h.c.h.i.c.ProtocolExec.execute(ProtocolExec.java:192)\\\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\n\\tato.a.h.c.h.i.c.HttpRequestRetryExec.execute(HttpRequestRetryExec.java:96)\\\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\n\\tato.a.h.c.h.i.c.ContentCompressionExec.execute(ContentCompressionExec.java:152)\\\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement.java:51)\\\n\\tat o.a.h.c.h.i.c.RedirectExec.execute(RedirectExec.java:115)\\\n\\tato.a.h.c.h.i.c.ExecChainElement.execute(ExecChainElement....\\&quot;\n}\n</code></pre>\n<p>I am confused as to why it is giving me error for\n<code>[sqs.ap-southeast-2.amazonaws.com, ap-southeast-2.queue.amazonaws.com, *.sqs.ap-southeast-2.vpce.amazonaws.com]</code></p>\n<p>Anyone know what this error means and how to resolve this?</p>\n<p>Thanks</p>\n"},{"tags":["java","intellij-idea","target"],"comments":[{"owner":{"account_id":1069033,"reputation":27720,"user_id":1068746,"accept_rate":57,"display_name":"guy mograbi"},"score":4,"creation_date":1353998546,"post_id":4904052,"comment_id":18608411,"body_markdown":"The answer you were given is correct but not full. Intellij replace C with J if the source file is not under a defined src folder or if the file is too big. I explain [Intellij Icons](http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CCwQFjAA&amp;url=http%3A%2F%2Fblog.mograbi.info%2F2011%2F05%2Fintellij-j-is-shown-instead-of-c.html&amp;ei=BGC0UMmgGcbotQb734H4AQ&amp;usg=AFQjCNFZQBEUJPL1XehFkUaJH41wrsuKjQ) in my blogpost.","body":"The answer you were given is correct but not full. Intellij replace C with J if the source file is not under a defined src folder or if the file is too big. I explain <a href=\"http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CCwQFjAA&amp;url=http%3A%2F%2Fblog.mograbi.info%2F2011%2F05%2Fintellij-j-is-shown-instead-of-c.html&amp;ei=BGC0UMmgGcbotQb734H4AQ&amp;usg=AFQjCNFZQBEUJPL1XehFkUaJH41wrsuKjQ\" rel=\"nofollow noreferrer\">Intellij Icons</a> in my blogpost."},{"owner":{"account_id":38330,"reputation":15203,"user_id":109941,"accept_rate":91,"display_name":"Jim G."},"score":0,"creation_date":1463486654,"post_id":4904052,"comment_id":62076624,"body_markdown":"Possible duplicate of [intellij icon over project files](http://stackoverflow.com/questions/2728333/intellij-icon-over-project-files)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/2728333/intellij-icon-over-project-files\">intellij icon over project files</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user146043"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1296863633,"creation_date":1296863633,"answer_id":4904069,"question_id":4904052,"body_markdown":"It means those files aren&#39;t part of the project settings.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>It means those files aren't part of the project settings.</p>\n"},{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":184,"is_accepted":false,"score":184,"last_activity_date":1499079225,"creation_date":1296864384,"answer_id":4904137,"question_id":4904052,"body_markdown":"You need to specify the source dir\r\n\r\n    File&gt; Project Structure &gt; Modules\r\n\r\nclick the directory and click the Sources button\r\n\r\nIt&#39;s weird because usually it&#39;s done automatically. Maybe it&#39;s better if you recreate the project again.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>You need to specify the source dir</p>\n\n<pre><code>File&gt; Project Structure &gt; Modules\n</code></pre>\n\n<p>click the directory and click the Sources button</p>\n\n<p>It's weird because usually it's done automatically. Maybe it's better if you recreate the project again.</p>\n"},{"tags":[],"owner":{"account_id":1589034,"reputation":549,"user_id":1472783,"display_name":"Hari Palappetty"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1394349701,"creation_date":1394349701,"answer_id":22279492,"question_id":4904052,"body_markdown":"This situation happens when the IDE looks for src folder, and it cannot find it in the path.\r\nSelect the project root (F4 in windows) &gt; Go to Modules on Side Tab &gt; Select Sources &gt; Select appropriate folder with source files in it&gt; Click on the blue sources folder icon (for adding sources) &gt; Click on Green Test Sources folder ( to add Unit test folders).","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>This situation happens when the IDE looks for src folder, and it cannot find it in the path.\nSelect the project root (F4 in windows) > Go to Modules on Side Tab > Select Sources > Select appropriate folder with source files in it> Click on the blue sources folder icon (for adding sources) > Click on Green Test Sources folder ( to add Unit test folders).</p>\n"},{"tags":[],"owner":{"account_id":1360035,"reputation":7094,"user_id":1297578,"accept_rate":82,"display_name":"Shoham"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1417443938,"creation_date":1417443938,"answer_id":27230470,"question_id":4904052,"body_markdown":"I downloaded a project from github with .idea folder.\r\nAfter deleting that folder, everything was ok.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>I downloaded a project from github with .idea folder.\nAfter deleting that folder, everything was ok.</p>\n"},{"tags":[],"owner":{"account_id":1050037,"reputation":337,"user_id":2467938,"display_name":"crazyGuy"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1454510483,"creation_date":1448446544,"answer_id":33913756,"question_id":4904052,"body_markdown":"Find all IntelliJ (v15) symbols over here: https://www.jetbrains.com/idea/help/symbols.html\r\n\r\nThis site states that this icon stands for &quot;Java class located out of the source root. Refer to the section Configuring Content Roots for details.&quot;","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Find all IntelliJ (v15) symbols over here: <a href=\"https://www.jetbrains.com/idea/help/symbols.html\" rel=\"nofollow\">https://www.jetbrains.com/idea/help/symbols.html</a></p>\n\n<p>This site states that this icon stands for \"Java class located out of the source root. Refer to the section Configuring Content Roots for details.\"</p>\n"},{"tags":[],"owner":{"account_id":6173909,"reputation":86,"user_id":4811443,"display_name":"Homilzio Trovoada Santos"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1697765598,"creation_date":1452071879,"answer_id":34629407,"question_id":4904052,"body_markdown":"Press **F4** at the **project root** and select the root source pressing the source button.\r\nIt **resolved** my problem!\r\n","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Press <strong>F4</strong> at the <strong>project root</strong> and select the root source pressing the source button.\nIt <strong>resolved</strong> my problem!</p>\n"},{"tags":[],"owner":{"account_id":1195219,"reputation":1031,"user_id":1167110,"display_name":"Djalas"},"down_vote_count":0,"up_vote_count":66,"is_accepted":false,"score":66,"last_activity_date":1454510152,"creation_date":1454510152,"answer_id":35179894,"question_id":4904052,"body_markdown":"If it is a maven project \r\n\r\n 1. right click on the pom.xml\r\n 2. Add As Maven Project\r\n\r\nThanks","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>If it is a maven project </p>\n\n<ol>\n<li>right click on the pom.xml</li>\n<li>Add As Maven Project</li>\n</ol>\n\n<p>Thanks</p>\n"},{"tags":[],"owner":{"account_id":6366133,"reputation":1,"user_id":4940074,"display_name":"Mukund BS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464703102,"creation_date":1464703102,"answer_id":37547818,"question_id":4904052,"body_markdown":"mark the java folder as source root.It will solve.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>mark the java folder as source root.It will solve.</p>\n"},{"tags":[],"owner":{"account_id":131612,"reputation":785,"user_id":1370283,"display_name":"Dunfield"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1496163915,"creation_date":1496163915,"answer_id":44268046,"question_id":4904052,"body_markdown":"Another option if you&#39;re using Flavors in Android Studio:\r\n\r\nClick Build -&gt; Select Build Variant. \r\n\r\nIn the list click the variant you&#39;re working in and it will turn green and the others will have the red J.\r\n\r\n","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Another option if you're using Flavors in Android Studio:</p>\n\n<p>Click Build -> Select Build Variant. </p>\n\n<p>In the list click the variant you're working in and it will turn green and the others will have the red J.</p>\n"},{"tags":[],"owner":{"account_id":5091902,"reputation":1271,"user_id":4084697,"display_name":"Eric Green"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1531337023,"creation_date":1512130279,"answer_id":47593148,"question_id":4904052,"body_markdown":"The first answer from irreputable above that starts out with &quot;you need to specify the source dir&quot; is correct, but I don&#39;t see him telling you the easy way to do so.\r\n\r\nSimply right click on the java sources folder (&quot;java&quot; under src/main/java if it is a Maven project for example) and select Mark Directory As &gt; Sources Root (see screenshot below).\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/clMWS.png","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>The first answer from irreputable above that starts out with \"you need to specify the source dir\" is correct, but I don't see him telling you the easy way to do so.</p>\n\n<p>Simply right click on the java sources folder (\"java\" under src/main/java if it is a Maven project for example) and select Mark Directory As > Sources Root (see screenshot below).</p>\n\n<p><a href=\"https://i.stack.imgur.com/clMWS.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/clMWS.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":9120957,"reputation":109,"user_id":6786381,"display_name":"Max"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531890545,"creation_date":1531890545,"answer_id":51393966,"question_id":4904052,"body_markdown":"Maybe your project has not been as android project by android studio, please make sure that plugin &#39;android support&#39; has been enabled（Android Studio Preferences -&gt; Plugins -&gt; Select Android Support）","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Maybe your project has not been as android project by android studio, please make sure that plugin 'android support' has been enabled（Android Studio Preferences -> Plugins -> Select Android Support）</p>\n"},{"tags":[],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1556466151,"creation_date":1556466151,"answer_id":55891882,"question_id":4904052,"body_markdown":"As mentioned earlier, \r\n\r\n 1. right click on the pom.xml\r\n\r\n[![enter image description here][1]][1]\r\n\r\n 2. Add As Maven Project\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PJIhM.png\r\n  [2]: https://i.stack.imgur.com/i1PmQ.png","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>As mentioned earlier, </p>\n\n<ol>\n<li>right click on the pom.xml</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/PJIhM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PJIhM.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>Add As Maven Project</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/i1PmQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i1PmQ.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":1638171,"reputation":206,"user_id":1511116,"display_name":"Ramakant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560867853,"creation_date":1560867853,"answer_id":56651331,"question_id":4904052,"body_markdown":"Close Android Studio and delete .idea and .gradle folder from project structure and start Studio again.\r\n","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Close Android Studio and delete .idea and .gradle folder from project structure and start Studio again.</p>\n"},{"tags":[],"owner":{"account_id":4043874,"reputation":105,"user_id":3325776,"display_name":"user3325776"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569531794,"creation_date":1569531794,"answer_id":58124754,"question_id":4904052,"body_markdown":"It means your Java source files aren&#39;t part of the project. \r\n\r\nIf the suggestions mentioned here don&#39;t resolve the issue, you may have hit a rare bug like I did. Researching the exceptions found in [the log](https://intellij-support.jetbrains.com/hc/en-us/articles/207241085) helped me. In my case, disabling the &quot;Plugin DevKit&quot;, deleting the .idea directory, and reimporting the project worked.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>It means your Java source files aren't part of the project. </p>\n\n<p>If the suggestions mentioned here don't resolve the issue, you may have hit a rare bug like I did. Researching the exceptions found in <a href=\"https://intellij-support.jetbrains.com/hc/en-us/articles/207241085\" rel=\"nofollow noreferrer\">the log</a> helped me. In my case, disabling the \"Plugin DevKit\", deleting the .idea directory, and reimporting the project worked.</p>\n"},{"tags":[],"owner":{"account_id":15987282,"reputation":71,"user_id":11537324,"display_name":"Das_J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577093858,"creation_date":1577093858,"answer_id":59453002,"question_id":4904052,"body_markdown":"Actually this can happens because of two reason. \r\n\r\n1. Your project not getting/ Updating your dependencies. Go to your terminal and enter **mvn clean install**. Or right click on pom.xml and click Add as Mevan Project. \r\n\r\n2. Check your jdk has set properly to the project.","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Actually this can happens because of two reason. </p>\n\n<ol>\n<li><p>Your project not getting/ Updating your dependencies. Go to your terminal and enter <strong>mvn clean install</strong>. Or right click on pom.xml and click Add as Mevan Project. </p></li>\n<li><p>Check your jdk has set properly to the project.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16716031,"reputation":1,"user_id":12082098,"display_name":"Ray Rojas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578588766,"creation_date":1578588766,"answer_id":59668728,"question_id":4904052,"body_markdown":"This is what worked for me\r\n\r\n1. Press File from the toolbar\r\n2. Press Sync Project with Gradle Files","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>This is what worked for me</p>\n\n<ol>\n<li>Press File from the toolbar</li>\n<li>Press Sync Project with Gradle Files</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":7073674,"reputation":51,"user_id":5414485,"display_name":"sandamal wijeweera"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1587104894,"creation_date":1587104894,"answer_id":61265369,"question_id":4904052,"body_markdown":"First mark the directory as the source root.\r\nThen go to the pom excel and right click on it.\r\nselect add as maven project .\r\n","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>First mark the directory as the source root.\nThen go to the pom excel and right click on it.\nselect add as maven project .</p>\n"},{"tags":[],"owner":{"account_id":14698755,"reputation":11,"user_id":10615404,"display_name":"Spillz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594319365,"creation_date":1594319365,"answer_id":62821394,"question_id":4904052,"body_markdown":"This was killing me as I had the same issue. I just going over old projects. Really redoing old lessons from class to get more practice. The repos just have compatibility issues. So I import the project. Then add the source like others state. Then close the project. Delete the .idea directory in the root and re-import project. ","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>This was killing me as I had the same issue. I just going over old projects. Really redoing old lessons from class to get more practice. The repos just have compatibility issues. So I import the project. Then add the source like others state. Then close the project. Delete the .idea directory in the root and re-import project.</p>\n"},{"tags":[],"owner":{"account_id":13712267,"reputation":33,"user_id":12083479,"display_name":"Soma Kundu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599166974,"creation_date":1599132749,"answer_id":63722757,"question_id":4904052,"body_markdown":"For a gradle project &quot;./gradlew --stop&quot; will help to resolve the problem when the source directory is correctly specified and project is properly synced. ","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>For a gradle project &quot;./gradlew --stop&quot; will help to resolve the problem when the source directory is correctly specified and project is properly synced.</p>\n"},{"tags":[],"owner":{"account_id":10158490,"reputation":150,"user_id":7502769,"display_name":"KESHAV KUMAR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689860459,"creation_date":1689860459,"answer_id":76730499,"question_id":4904052,"body_markdown":"I used Repair IDE on file and it worked. I did this for every file which has j icon. Check screenshot. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fJg4G.png","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>I used Repair IDE on file and it worked. I did this for every file which has j icon. Check screenshot.</p>\n<p><a href=\"https://i.stack.imgur.com/fJg4G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fJg4G.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":67925,"reputation":7613,"user_id":198473,"accept_rate":74,"display_name":"TERACytE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179844,"favorite_count":0,"down_vote_count":0,"up_vote_count":150,"answer_count":20,"score":150,"last_activity_date":1697765598,"creation_date":1296863475,"question_id":4904052,"body_markdown":"Under the target folder in IntelliJ for a Java project I created, I have a few java source files in the package.  Beside each file the &#39;J&#39; icon has a red circle with a line through it.\r\n\r\nWhat does that mean?  How do I fix it?\r\n","title":"What does this symbol mean in IntelliJ? (red circle on bottom-left corner of file name, with &#39;J&#39; in it)","body":"<p>Under the target folder in IntelliJ for a Java project I created, I have a few java source files in the package.  Beside each file the 'J' icon has a red circle with a line through it.</p>\n\n<p>What does that mean?  How do I fix it?</p>\n"},{"tags":["java","ssl-certificate","google-kubernetes-engine","keytool","truststore"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1697778539,"post_id":77327799,"comment_id":136324939,"body_markdown":"No end-entity cert is ever directly _signed_ by a public root CA like Digicert G2; that&#39;s been prohibited for decades. It can very well be _chained under_ that root, and if the server provides the chain/intermediate(s) as required, the Digicert G2 root has been in the default Java truststore since 2016, so it&#39;s very unlikely you would ever have needed to add anything anywhere. Unless your code overrides the default, but you&#39;ll have to look at the code for that.","body":"No end-entity cert is ever directly <i>signed</i> by a public root CA like Digicert G2; that&#39;s been prohibited for decades. It can very well be <i>chained under</i> that root, and if the server provides the chain/intermediate(s) as required, the Digicert G2 root has been in the default Java truststore since 2016, so it&#39;s very unlikely you would ever have needed to add anything anywhere. Unless your code overrides the default, but you&#39;ll have to look at the code for that."},{"owner":{"account_id":29712404,"reputation":1,"user_id":22771714,"display_name":"Tioluwa"},"score":0,"creation_date":1697789064,"post_id":77327799,"comment_id":136326321,"body_markdown":"@dave_thompson_085 it&#39;s issued by Thawte TLS RSA CA G1. Like i mentioned the client&#39;s certificate expired and other users complained about the issue. But we were notified that it&#39;s now renewed, and i confirmed it is, but my app keeps throwing this error in the cloud deployment env.","body":"@dave_thompson_085 it&#39;s issued by Thawte TLS RSA CA G1. Like i mentioned the client&#39;s certificate expired and other users complained about the issue. But we were notified that it&#39;s now renewed, and i confirmed it is, but my app keeps throwing this error in the cloud deployment env."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1697937730,"post_id":77327799,"comment_id":136341925,"body_markdown":"Thawte is one of several brands now owned by Digicert (previously independent then Verisign then Symantec) and as I said Digicert G2 root has been trusted for many years, so it&#39;s either the code or (didn&#39;t occur to me last time) configuration settings or environment affecting it -- for example if it&#39;s Windows and Java is installed under %programfiles*% (as is the Oracle default) data you try to update may disappear due to security features.","body":"Thawte is one of several brands now owned by Digicert (previously independent then Verisign then Symantec) and as I said Digicert G2 root has been trusted for many years, so it&#39;s either the code or (didn&#39;t occur to me last time) configuration settings or environment affecting it -- for example if it&#39;s Windows and Java is installed under %programfiles*% (as is the Oracle default) data you try to update may disappear due to security features."},{"owner":{"account_id":7248598,"reputation":11598,"user_id":5529712,"display_name":"Gari Singh"},"score":0,"creation_date":1697963258,"post_id":77327799,"comment_id":136343264,"body_markdown":"Did you actually rebuild the container image for your app and included the certificate(s) in the trust store for the app in the container image?","body":"Did you actually rebuild the container image for your app and included the certificate(s) in the trust store for the app in the container image?"},{"owner":{"account_id":29712404,"reputation":1,"user_id":22771714,"display_name":"Tioluwa"},"score":0,"creation_date":1697997045,"post_id":77327799,"comment_id":136346511,"body_markdown":"@dave_thompson_085,i was able to add the new certificate on my local machine. the problem is the devOps team deploy the app, after after deployment try to use the keytool to update the key in the pod. but this doesn&#39;t seem to work.","body":"@dave_thompson_085,i was able to add the new certificate on my local machine. the problem is the devOps team deploy the app, after after deployment try to use the keytool to update the key in the pod. but this doesn&#39;t seem to work."},{"owner":{"account_id":29712404,"reputation":1,"user_id":22771714,"display_name":"Tioluwa"},"score":0,"creation_date":1697997153,"post_id":77327799,"comment_id":136346526,"body_markdown":"@GariSingh, the image was rebuilt, deployed and started. Afterwards devOps attempted to use keytool to install the new certificate, which seemed to work without any error, but still Java throws certificate exception shows above.","body":"@GariSingh, the image was rebuilt, deployed and started. Afterwards devOps attempted to use keytool to install the new certificate, which seemed to work without any error, but still Java throws certificate exception shows above."}],"owner":{"account_id":29712404,"reputation":1,"user_id":22771714,"display_name":"Tioluwa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":253,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697763788,"creation_date":1697763788,"question_id":77327799,"body_markdown":"I’ve been working on a project that uses Java HttpClient on Java 17 to communicate with an api amongst other things.\r\nThe project is deployed to GKE and running fine.\r\n\r\nFew days ago the client’s SSL certificate expired and I started getting\r\n\r\n```\r\nPKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.\r\n```\r\n\r\nmore from the stack trace reads:\r\n\r\n```\r\nsun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\nat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\r\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\r\n... 28 common frames omitted\r\nCausing: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\r\nat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\r\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:285)\r\nat java.base/sun.security.validator.Validator.validate(Validator.java:264)\r\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:144)\r\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:632)\r\n... 23 common frames omitted\r\nCausing: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\nat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\r\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\r\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\r\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\r\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\r\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\r\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\r\nat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\r\nat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480)\r\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1277)\r\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1264)\r\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1209)\r\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.lambda$executeTasks$3(SSLFlowDelegate.java:1118)\r\nat java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:157)\r\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.executeTasks(SSLFlowDelegate.java:1113)\r\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.doHandshake(SSLFlowDelegate.java:1079)\r\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate$Reader.processData(SSLFlowDelegate.java:484)\r\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate$Reader$ReaderDownstreamPusher.run(SSLFlowDelegate.java:268)\r\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)\r\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)\r\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$TryEndDeferredCompleter.complete(SequentialScheduler.java:347)\r\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:151)\r\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)\r\n... 3 common frames omitted\r\nCausing: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\nat java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:578)\r\nat java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:123)\r\n... 12 common frames omitted\r\nCausing: com.libs.card_payment_client.exception.PaymentClientException: Failed to process payment: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\nat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\r\nat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\r\nat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\r\nat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\r\nat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n```\r\n\r\nThis continued even after they renewed their certificate. By the way the certificate is signed by DigiCert Global Root G2\r\n\r\nOn my local MAC I resolved the issue by downloading the new certificate and using key tool to add it to my trust store using the command.\r\n\r\n```\r\nsudo keytool -import -alias qa_interswitch_certificate -file qa.interswitchng.com.cer -keystore /Library/Java/JavaVirtualMachines/amazon-corretto-17.jdk/Contents/Home/lib/security/cacerts\r\n```\r\n\r\nHowever, on redeploying the application to GKE with some other updates, the error doesn’t go away on the remote machine.\r\n\r\nI informed our devOps team and they also used keytool to add the new certificate but the error still persists. I&#39;m not much of a devOps guy, but i gave the devOps team the exact command i used to resolve it on my local machine but still getting the same error on the server.\r\n\r\nHow can I resolve this issue on the remote pods?","title":"How to fix &quot;unable to find valid certification path to requested target&quot; in Java application running on GKS after certificate expired and was renewed","body":"<p>I’ve been working on a project that uses Java HttpClient on Java 17 to communicate with an api amongst other things.\nThe project is deployed to GKE and running fine.</p>\n<p>Few days ago the client’s SSL certificate expired and I started getting</p>\n<pre><code>PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.\n</code></pre>\n<p>more from the stack trace reads:</p>\n<pre><code>sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\nat java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\nat java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\n... 28 common frames omitted\nCausing: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\nat java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:285)\nat java.base/sun.security.validator.Validator.validate(Validator.java:264)\nat java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:144)\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:632)\n... 23 common frames omitted\nCausing: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\nat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\nat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\nat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\nat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:480)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1277)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask$DelegatedAction.run(SSLEngineImpl.java:1264)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\nat java.base/sun.security.ssl.SSLEngineImpl$DelegatedTask.run(SSLEngineImpl.java:1209)\nat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.lambda$executeTasks$3(SSLFlowDelegate.java:1118)\nat java.net.http/jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(HttpClientImpl.java:157)\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.executeTasks(SSLFlowDelegate.java:1113)\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate.doHandshake(SSLFlowDelegate.java:1079)\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate$Reader.processData(SSLFlowDelegate.java:484)\nat java.net.http/jdk.internal.net.http.common.SSLFlowDelegate$Reader$ReaderDownstreamPusher.run(SSLFlowDelegate.java:268)\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$TryEndDeferredCompleter.complete(SequentialScheduler.java:347)\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:151)\nat java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)\n... 3 common frames omitted\nCausing: javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:578)\nat java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:123)\n... 12 common frames omitted\nCausing: com.libs.card_payment_client.exception.PaymentClientException: Failed to process payment: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\nat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\nat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\nat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\nat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\nat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n</code></pre>\n<p>This continued even after they renewed their certificate. By the way the certificate is signed by DigiCert Global Root G2</p>\n<p>On my local MAC I resolved the issue by downloading the new certificate and using key tool to add it to my trust store using the command.</p>\n<pre><code>sudo keytool -import -alias qa_interswitch_certificate -file qa.interswitchng.com.cer -keystore /Library/Java/JavaVirtualMachines/amazon-corretto-17.jdk/Contents/Home/lib/security/cacerts\n</code></pre>\n<p>However, on redeploying the application to GKE with some other updates, the error doesn’t go away on the remote machine.</p>\n<p>I informed our devOps team and they also used keytool to add the new certificate but the error still persists. I'm not much of a devOps guy, but i gave the devOps team the exact command i used to resolve it on my local machine but still getting the same error on the server.</p>\n<p>How can I resolve this issue on the remote pods?</p>\n"},{"tags":["java","jdbc","mysql-connector"],"comments":[{"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"score":3,"creation_date":1373014193,"post_id":17484764,"comment_id":25411427,"body_markdown":"Is the driver jar in your classpath ?","body":"Is the driver jar in your classpath ?"},{"owner":{"account_id":263142,"reputation":9391,"user_id":548526,"accept_rate":70,"display_name":"Siddharth"},"score":0,"creation_date":1373022642,"post_id":17484764,"comment_id":25415960,"body_markdown":"ensure that you have synchronized on your getInstance()","body":"ensure that you have synchronized on your getInstance()"},{"owner":{"account_id":216107,"reputation":32723,"user_id":471136,"accept_rate":77,"display_name":"pathikrit"},"score":0,"creation_date":1477258748,"post_id":17484764,"comment_id":67680639,"body_markdown":"Possible duplicate of [ClassNotFoundException com.mysql.jdbc.Driver](http://stackoverflow.com/questions/1585811/classnotfoundexception-com-mysql-jdbc-driver)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/1585811/classnotfoundexception-com-mysql-jdbc-driver\">ClassNotFoundException com.mysql.jdbc.Driver</a>"},{"owner":{"account_id":8312398,"reputation":2283,"user_id":6255817,"display_name":"codingbruh"},"score":1,"creation_date":1496387018,"post_id":17484764,"comment_id":75650437,"body_markdown":"You need to paste the jar file into your webserver&#39;s lib directory, if you are getting the error in runtime. whereas, if you are getting the error on compile time add the jar in build path.","body":"You need to paste the jar file into your webserver&#39;s lib directory, if you are getting the error in runtime. whereas, if you are getting the error on compile time add the jar in build path."}],"answers":[{"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1373018430,"creation_date":1373014272,"answer_id":17484813,"question_id":17484764,"body_markdown":"You will have to include driver jar for MySQL [MySQL Connector Jar][1] in your classpath.\r\n\r\nIf you are using Eclipse:\r\n[How to add dependent libraries in Eclipse][2]\r\n\r\nIf you are using command line include the path to the driver jar using the -cp parameter of java.\r\n\r\n    java -cp C:\\lib\\* Main\r\n\r\n\r\n  [1]: http://www.mysql.com/downloads/connector/j/\r\n  [2]: http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>You will have to include driver jar for MySQL <a href=\"http://www.mysql.com/downloads/connector/j/\">MySQL Connector Jar</a> in your classpath.</p>\n\n<p>If you are using Eclipse:\n<a href=\"http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29\">How to add dependent libraries in Eclipse</a></p>\n\n<p>If you are using command line include the path to the driver jar using the -cp parameter of java.</p>\n\n<pre><code>java -cp C:\\lib\\* Main\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1299032,"reputation":5308,"user_id":1249325,"accept_rate":50,"display_name":"KhAn SaAb"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1516350860,"creation_date":1373014316,"answer_id":17484824,"question_id":17484764,"body_markdown":"check for jar`(mysql-connector-java-bin)` in your classpath [download from here][1]\r\n\r\n\r\n  [1]: https://code.google.com/p/find-ur-pal/downloads/detail?name=mysql-connector-java-5.1.18-bin.jar&amp;can=2&amp;q=","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>check for jar<code>(mysql-connector-java-bin)</code> in your classpath <a href=\"https://code.google.com/p/find-ur-pal/downloads/detail?name=mysql-connector-java-5.1.18-bin.jar&amp;can=2&amp;q=\" rel=\"noreferrer\">download from here</a></p>\n"},{"tags":[],"owner":{"account_id":2157141,"reputation":6635,"user_id":1912085,"accept_rate":75,"display_name":"R9J"},"down_vote_count":0,"up_vote_count":152,"is_accepted":false,"score":152,"last_activity_date":1472635544,"creation_date":1373014831,"answer_id":17484982,"question_id":17484764,"body_markdown":"It seems the **mysql connectivity library is not included** in the project. Solve the problem following one of the proposed solutions:\r\n\r\n - **MAVEN PROJECTS SOLUTION**\r\n\r\nAdd the mysql-connector dependency to the pom.xml project file:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.39&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nHere you are all the versions: https://mvnrepository.com/artifact/mysql/mysql-connector-java\r\n\r\n\r\n - **ALL PROJECTS SOLUTION**\r\n\r\nAdd the jar library manually to the project.\r\n\r\n**Right Click the project -- &gt; build path -- &gt; configure build path**\r\n\r\nIn `Libraries Tab` **press** `Add External Jar` and `Select` your jar.\r\n\r\nYou can find zip for mysql-connector [here][1]\r\n\r\n - ***Explanation:***\r\n\r\nWhen building the project, java throws you an exception because a file (the com.mysql.jdbc.Driver class) from the mysql connectivity library is not found. The solution is adding the library to the project, and java will find the com.mysql.jdbc.Driver \r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://dev.mysql.com/downloads/connector/j/5.0.html","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>It seems the <strong>mysql connectivity library is not included</strong> in the project. Solve the problem following one of the proposed solutions:</p>\n\n<ul>\n<li><strong>MAVEN PROJECTS SOLUTION</strong></li>\n</ul>\n\n<p>Add the mysql-connector dependency to the pom.xml project file:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;5.1.39&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Here you are all the versions: <a href=\"https://mvnrepository.com/artifact/mysql/mysql-connector-java\">https://mvnrepository.com/artifact/mysql/mysql-connector-java</a></p>\n\n<ul>\n<li><strong>ALL PROJECTS SOLUTION</strong></li>\n</ul>\n\n<p>Add the jar library manually to the project.</p>\n\n<p><strong>Right Click the project -- > build path -- > configure build path</strong></p>\n\n<p>In <code>Libraries Tab</code> <strong>press</strong> <code>Add External Jar</code> and <code>Select</code> your jar.</p>\n\n<p>You can find zip for mysql-connector <a href=\"http://dev.mysql.com/downloads/connector/j/5.0.html\">here</a></p>\n\n<ul>\n<li><strong><em>Explanation:</em></strong></li>\n</ul>\n\n<p>When building the project, java throws you an exception because a file (the com.mysql.jdbc.Driver class) from the mysql connectivity library is not found. The solution is adding the library to the project, and java will find the com.mysql.jdbc.Driver </p>\n"},{"tags":[],"owner":{"account_id":1628006,"reputation":1827,"user_id":1503080,"accept_rate":40,"display_name":"Asad"},"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1373021813,"creation_date":1373021813,"answer_id":17487254,"question_id":17484764,"body_markdown":"If you got the error in your IDE(compile-time error), you need to add your mysql-connector jar file to your libs and add this to your referenced library of project too.\r\n\r\nIf you get this error when you are running it, then probably its because you have not included mysql-connector JAR file to your webserver&#39;s lib folder.\r\n\r\nAdd `mysql-connector-java-5.1.25-bin.jar` to your classpath and also to your webserver&#39;s lib directory. Tomcat lib path is given as an example `Tomcat 6.0\\lib`","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>If you got the error in your IDE(compile-time error), you need to add your mysql-connector jar file to your libs and add this to your referenced library of project too.</p>\n\n<p>If you get this error when you are running it, then probably its because you have not included mysql-connector JAR file to your webserver's lib folder.</p>\n\n<p>Add <code>mysql-connector-java-5.1.25-bin.jar</code> to your classpath and also to your webserver's lib directory. Tomcat lib path is given as an example <code>Tomcat 6.0\\lib</code></p>\n"},{"tags":[],"owner":{"account_id":3352915,"reputation":7185,"user_id":2816571,"accept_rate":89,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387425960,"creation_date":1387425960,"answer_id":20673251,"question_id":17484764,"body_markdown":"Trivial as it may seem in my case netbeans version maven project 7.2.1 was different.  There is a folder in the project called dependencies.  Right click and then it brings up a popup window where you can search for packages.  In the query area put \r\n\r\n    mysql-connector\r\n\r\nIt will bring up the matches (it seems it does this against some repository).  Double click then install.\r\n","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>Trivial as it may seem in my case netbeans version maven project 7.2.1 was different.  There is a folder in the project called dependencies.  Right click and then it brings up a popup window where you can search for packages.  In the query area put </p>\n\n<pre><code>mysql-connector\n</code></pre>\n\n<p>It will bring up the matches (it seems it does this against some repository).  Double click then install.</p>\n"},{"tags":[],"owner":{"account_id":4164801,"reputation":111,"user_id":3413982,"display_name":"MilesWeb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394692695,"creation_date":1394692695,"answer_id":22370918,"question_id":17484764,"body_markdown":"It is because the WEB-INF folder does not exist at the location in the sub directory in the error. You either compile the application to use the WEB-INF folder under public_html OR copy the WEB-INF folder in sub folder as in the error above.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>It is because the WEB-INF folder does not exist at the location in the sub directory in the error. You either compile the application to use the WEB-INF folder under public_html OR copy the WEB-INF folder in sub folder as in the error above.</p>\n"},{"tags":[],"owner":{"account_id":4295333,"reputation":314,"user_id":3510548,"accept_rate":50,"display_name":"Kika_Fortez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1398448203,"creation_date":1398448203,"answer_id":23299787,"question_id":17484764,"body_markdown":"In the project into the folder Libraries--&gt;right click --&gt; Add Library --&gt; Mysqlconnector 5.1","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>In the project into the folder Libraries-->right click --> Add Library --> Mysqlconnector 5.1</p>\n"},{"tags":[],"owner":{"account_id":3249102,"reputation":91,"user_id":2739891,"display_name":"Sathish SR"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1408703461,"creation_date":1408702879,"answer_id":25444767,"question_id":17484764,"body_markdown":"\r\nJDBC API mostly consists of interfaces which work independently of any database. A database specific driver is required for each database which implements the JDBC API.\r\n\r\n\r\nFirst download the MySQL connector jar from www.mysql.com, then:\r\n\r\n`Right Click the project -- &gt; build path -- &gt; configure build path`\r\n\r\nIn the libraries tab press `Add External Jar` and select your jar.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>JDBC API mostly consists of interfaces which work independently of any database. A database specific driver is required for each database which implements the JDBC API.</p>\n\n<p>First download the MySQL connector jar from www.mysql.com, then:</p>\n\n<p><code>Right Click the project -- &gt; build path -- &gt; configure build path</code></p>\n\n<p>In the libraries tab press <code>Add External Jar</code> and select your jar.</p>\n"},{"tags":[],"owner":{"account_id":3063427,"reputation":2288,"user_id":2595642,"accept_rate":43,"display_name":"shikjohari"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1415683991,"creation_date":1415683991,"answer_id":26858214,"question_id":17484764,"body_markdown":"The driver connector is not in your build path. Configure the build path and point it to the &#39;mysql-connector-java-5.1.25-bin.jar&#39; (check the version which you are using). Alternatively you can use maven :D","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>The driver connector is not in your build path. Configure the build path and point it to the 'mysql-connector-java-5.1.25-bin.jar' (check the version which you are using). Alternatively you can use maven :D</p>\n"},{"tags":[],"owner":{"account_id":3079492,"reputation":1027,"user_id":2608063,"accept_rate":94,"display_name":"tomtomssi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1456897954,"creation_date":1424433781,"answer_id":28628540,"question_id":17484764,"body_markdown":"For Maven based projects you need a dependency.\n\r\n \n\n    &lt;dependency&gt;\n         \t&lt;groupId&gt;mysql&lt;/groupId&gt;\n    \t    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n         \t&lt;version&gt;5.1.38&lt;/version&gt;\n    &lt;/dependency&gt;\n\n","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>For Maven based projects you need a dependency.</p>\n\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.38&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1479852949,"creation_date":1426080502,"answer_id":28987883,"question_id":17484764,"body_markdown":"For [Gradle][1]-based projects you need a dependency on [MySQL Java Connector][2]:\r\n\r\n    dependencies {\r\n        compile &#39;mysql:mysql-connector-java:6.0.+&#39;\r\n    }\r\n\r\n  [1]: http://gradle.org/\r\n  [2]: http://mvnrepository.com/artifact/mysql/mysql-connector-java\r\n","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>For <a href=\"http://gradle.org/\" rel=\"noreferrer\">Gradle</a>-based projects you need a dependency on <a href=\"http://mvnrepository.com/artifact/mysql/mysql-connector-java\" rel=\"noreferrer\">MySQL Java Connector</a>:</p>\n\n<pre><code>dependencies {\n    compile 'mysql:mysql-connector-java:6.0.+'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3913235,"reputation":2862,"user_id":3237899,"accept_rate":73,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458952947,"creation_date":1458952947,"answer_id":36230299,"question_id":17484764,"body_markdown":"The exception can also occur because of the class path not being defined.\r\n\r\nAfter hours of research and literally going through hundreds of pages, the problem was that the class path of the library was not defined.\r\n\r\nSet the class path as follows in your windows machine \r\n\r\n    set classpath=path\\to\\your\\jdbc\\jar\\file;.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>The exception can also occur because of the class path not being defined.</p>\n\n<p>After hours of research and literally going through hundreds of pages, the problem was that the class path of the library was not defined.</p>\n\n<p>Set the class path as follows in your windows machine </p>\n\n<pre><code>set classpath=path\\to\\your\\jdbc\\jar\\file;.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6838496,"reputation":2450,"user_id":5259625,"accept_rate":56,"display_name":"Gen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466686807,"creation_date":1466686807,"answer_id":37992404,"question_id":17484764,"body_markdown":"I Understood your problem add this dependency in your pom.xml your problem will be solved,\r\n\r\n\r\nhttps://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.38\r\n","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>I Understood your problem add this dependency in your pom.xml your problem will be solved,</p>\n\n<p><a href=\"https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.38\" rel=\"nofollow\">https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.1.38</a></p>\n"},{"tags":[],"owner":{"account_id":4639843,"reputation":1283,"user_id":3760024,"display_name":"Santosh Kadam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486498283,"creation_date":1486498283,"answer_id":42099054,"question_id":17484764,"body_markdown":"If you are using tomcat then along with project directory you should also copy the database connector jar file to tomcat/lib. this worked for me","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>If you are using tomcat then along with project directory you should also copy the database connector jar file to tomcat/lib. this worked for me</p>\n"},{"tags":[],"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532199729,"creation_date":1532199729,"answer_id":51459226,"question_id":17484764,"body_markdown":"For IntelliJ Idea, go to your project structure (File, Project Structure), and add the mysql connector .jar file to your global library. Once there, right click on it and chose &#39;Add to Modules&#39;. Hit Apply / OK and you should be good to go.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>For IntelliJ Idea, go to your project structure (File, Project Structure), and add the mysql connector .jar file to your global library. Once there, right click on it and chose 'Add to Modules'. Hit Apply / OK and you should be good to go.</p>\n"},{"tags":[],"owner":{"account_id":7105431,"reputation":2516,"user_id":5435216,"display_name":"Tahir Hussain Mir"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1551583962,"creation_date":1544525869,"answer_id":53722642,"question_id":17484764,"body_markdown":"Every one has written an answer but I am still surprised that nobody actually answered it by using the best simple way.\n&lt;br&gt; The people answer that include the jar file. But, the error will still occur. \n\n&gt; The reason for that is, the jar is not deployed when the project is run. So, what we need to do is, tell the IDE to deploy this jar also.\n\nThe people here has answered so many times that put that  jar file in the lib folder of WEB-INF. That seems okay, but why do it manually. There is simple way. Check the below steps:\n\n&gt; Step 1: If you haven&#39;t referenced the jar file into the project then, reference it like this.\n&gt;\n&gt; Right click on the project and go to the project properties.\nThen, go to the java build path, then add external jar file via that.\n\n***But this will still not solve the problem because adding the external jar via build path only helps in compiling the classes, and the jar will not be deployed when you run the project.*** For that follow this step\n\n&gt; Right click on the project and go to the project properties.\nThen, go to the **Deployment Assembly** then press **Add** , then go to the **java build path entries** and add your libraries whether it is jstl, mysql or any other jar file. add them to deployment.\nBelow are the two pictures which display it.\n\n[![Before Adding][1]][1]\n\n[![After Adding][2]][2] \n\n\n  [1]: https://i.stack.imgur.com/MuhHu.jpg\n  [2]: https://i.stack.imgur.com/pFC3X.jpg","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>Every one has written an answer but I am still surprised that nobody actually answered it by using the best simple way.\n<br> The people answer that include the jar file. But, the error will still occur.</p>\n<blockquote>\n<p>The reason for that is, the jar is not deployed when the project is run. So, what we need to do is, tell the IDE to deploy this jar also.</p>\n</blockquote>\n<p>The people here has answered so many times that put that  jar file in the lib folder of WEB-INF. That seems okay, but why do it manually. There is simple way. Check the below steps:</p>\n<blockquote>\n<p>Step 1: If you haven't referenced the jar file into the project then, reference it like this.</p>\n<p>Right click on the project and go to the project properties.\nThen, go to the java build path, then add external jar file via that.</p>\n</blockquote>\n<p><em><strong>But this will still not solve the problem because adding the external jar via build path only helps in compiling the classes, and the jar will not be deployed when you run the project.</strong></em> For that follow this step</p>\n<blockquote>\n<p>Right click on the project and go to the project properties.\nThen, go to the <strong>Deployment Assembly</strong> then press <strong>Add</strong> , then go to the <strong>java build path entries</strong> and add your libraries whether it is jstl, mysql or any other jar file. add them to deployment.\nBelow are the two pictures which display it.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/MuhHu.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/MuhHu.jpg\" alt=\"Before Adding\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/pFC3X.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pFC3X.jpg\" alt=\"After Adding\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6963138,"reputation":1150,"user_id":5342009,"display_name":"london_utku"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629231489,"creation_date":1575714286,"answer_id":59225029,"question_id":17484764,"body_markdown":"This needs to be used as of 2021\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.21&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>This needs to be used as of 2021</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.21&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":311131,"reputation":782,"user_id":624533,"accept_rate":100,"display_name":"Sudhakar Krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582698247,"creation_date":1582698247,"answer_id":60407937,"question_id":17484764,"body_markdown":"I&#39;m developing a simple JavaFX11 application with SQLite Database in **Eclipse IDE**. To generate report I added Jasper jars. Suddenly it throws **&quot;THIS&quot;** error.\r\n\r\n    java.lang.ClassNotFoundException: com.mysql.jdbc.Driver\r\n\r\nIt was running good (BEFORE THIS ADDITION). But suddenly!\r\n\r\nI&#39;m not using maven or other managers for this simple application. I&#39;m adding jars manually.\r\n\r\nI created &quot;User Library&quot; and added my jars from external folders. \r\n\r\n**PROBLEM OCCURING AREA:**\r\nMy &quot;User Library&quot; are marked as system library. I just removed the marking. Now its not a system library. &quot;NOW MY PROJECT WORKING GOOD&quot;.\r\n\r\n**DEBUG MYSELF: Tried other things:**\r\nAT RUN CONFIGURATION: Try, removing library and add jars one-by-one and see. - here you have to delete all jars one by one, there is no select all and remove in eclipse right now in run configuration. So the error messages changes form one jars to another.\r\n\r\nHope this helps someone.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>I'm developing a simple JavaFX11 application with SQLite Database in <strong>Eclipse IDE</strong>. To generate report I added Jasper jars. Suddenly it throws <strong>\"THIS\"</strong> error.</p>\n\n<pre><code>java.lang.ClassNotFoundException: com.mysql.jdbc.Driver\n</code></pre>\n\n<p>It was running good (BEFORE THIS ADDITION). But suddenly!</p>\n\n<p>I'm not using maven or other managers for this simple application. I'm adding jars manually.</p>\n\n<p>I created \"User Library\" and added my jars from external folders. </p>\n\n<p><strong>PROBLEM OCCURING AREA:</strong>\nMy \"User Library\" are marked as system library. I just removed the marking. Now its not a system library. \"NOW MY PROJECT WORKING GOOD\".</p>\n\n<p><strong>DEBUG MYSELF: Tried other things:</strong>\nAT RUN CONFIGURATION: Try, removing library and add jars one-by-one and see. - here you have to delete all jars one by one, there is no select all and remove in eclipse right now in run configuration. So the error messages changes form one jars to another.</p>\n\n<p>Hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":13746341,"reputation":449,"user_id":9919896,"display_name":"Suraj Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1606389671,"creation_date":1606389671,"answer_id":65021095,"question_id":17484764,"body_markdown":"    I was also facing the same problem\r\n\r\n&gt; Download **mysql-connector-java** jar file\r\n&gt; \r\n&gt; paste it in the `C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib`\r\n&gt; \r\n&gt; **Hope this work for you also !!**","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<pre><code>I was also facing the same problem\n</code></pre>\n<blockquote>\n<p>Download <strong>mysql-connector-java</strong> jar file</p>\n<p>paste it in the <code>C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\lib</code></p>\n<p><strong>Hope this work for you also !!</strong></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11418021,"reputation":4780,"user_id":8370334,"display_name":"Abd Abughazaleh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646226487,"creation_date":1646226487,"answer_id":71323246,"question_id":17484764,"body_markdown":"# Finally \r\n\r\nI solved by two steps : \r\n\r\n1 - add the below to pom.xml\r\n  \r\n\r\n      &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;version&gt;5.0.8&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n2 - Download jar file from this URL:https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.0.8 \r\nafter that put it in your `tomcat/lib` folder. \r\n","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<h1>Finally</h1>\n<p>I solved by two steps :</p>\n<p>1 - add the below to pom.xml</p>\n<pre><code>  &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.0.8&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>2 - Download jar file from this URL:<a href=\"https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.0.8\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/mysql/mysql-connector-java/5.0.8</a>\nafter that put it in your <code>tomcat/lib</code> folder.</p>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651597254,"creation_date":1651597254,"answer_id":72102934,"question_id":17484764,"body_markdown":"I was having the same issue. I was using intellijj IDE for creating the MySQL connection.\r\n\r\nSteps to fix it:\r\n\r\n 1. Download: mysql-connector.jar( I used 8.0.29).\r\n 2. Go to &quot;file--&gt;project structure --&gt;Libraries--&gt;Click on plus button and select java and select the jar file you downloaded in step 1&quot;.\r\n[![enter image description here][1]][1]\r\n \r\n 3. Check the jar file is showing under &quot;External Libraries directory&quot;\r\n\r\n\r\n[![enter image description here][2]][2]\r\n 4. Now try to create the connection. It will work.\r\n\r\nI used this code for creating MySQL connection:\r\n\r\n    void createConnection() throws SQLException, ClassNotFoundException {\r\n        Connection connection=null;\r\n        try {\r\n\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n              connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/candelete&quot;\r\n                    ,&quot;root&quot;,&quot;&quot;);\r\n            System.out.println(&quot;Connection created&quot;);\r\n            System.out.println(&quot;hashcode is: &quot;+connection.hashCode());\r\n        }\r\n        finally {\r\n            System.out.println(&quot;here&quot;);\r\n            System.out.println(&quot;hashcode is: &quot;+connection.hashCode());\r\n            connection.close();\r\n            System.out.println(&quot;hashcode now: &quot;+connection.hashCode());\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/un53M.png\r\n  [2]: https://i.stack.imgur.com/I8gct.png","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>I was having the same issue. I was using intellijj IDE for creating the MySQL connection.</p>\n<p>Steps to fix it:</p>\n<ol>\n<li><p>Download: mysql-connector.jar( I used 8.0.29).</p>\n</li>\n<li><p>Go to &quot;file--&gt;project structure --&gt;Libraries--&gt;Click on plus button and select java and select the jar file you downloaded in step 1&quot;.\n<a href=\"https://i.stack.imgur.com/un53M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/un53M.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Check the jar file is showing under &quot;External Libraries directory&quot;</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/I8gct.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I8gct.png\" alt=\"enter image description here\" /></a>\n4. Now try to create the connection. It will work.</p>\n<p>I used this code for creating MySQL connection:</p>\n<pre><code>void createConnection() throws SQLException, ClassNotFoundException {\n    Connection connection=null;\n    try {\n\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n          connection= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/candelete&quot;\n                ,&quot;root&quot;,&quot;&quot;);\n        System.out.println(&quot;Connection created&quot;);\n        System.out.println(&quot;hashcode is: &quot;+connection.hashCode());\n    }\n    finally {\n        System.out.println(&quot;here&quot;);\n        System.out.println(&quot;hashcode is: &quot;+connection.hashCode());\n        connection.close();\n        System.out.println(&quot;hashcode now: &quot;+connection.hashCode());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6683250,"reputation":115,"user_id":5155570,"display_name":"Gayathri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697760894,"creation_date":1697760894,"answer_id":77327685,"question_id":17484764,"body_markdown":"I just had to do a maven reload in my Intellij. I figured this out when I checked the maven dependencies inside Intellij and found that they were not reflecting my latest pom changes.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>I just had to do a maven reload in my Intellij. I figured this out when I checked the maven dependencies inside Intellij and found that they were not reflecting my latest pom changes.</p>\n"}],"owner":{"account_id":3005911,"reputation":1237,"user_id":2550472,"accept_rate":0,"display_name":"atikul hussain"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":636246,"favorite_count":0,"down_vote_count":0,"up_vote_count":116,"answer_count":22,"score":116,"last_activity_date":1697760894,"creation_date":1373014123,"question_id":17484764,"body_markdown":"What is wrong with the code there are lots of error while debugging. I am writing a code for a singleton class to connect with the database MySQL.\r\n\r\nHere is my code\r\n    \r\n    package com.glomindz.mercuri.util;\r\n    import java.sql.Connection;\r\n    import java.sql.Driver;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n\r\n    public class MySingleTon {\r\n        String url = &quot;jdbc:mysql://localhost:3306/&quot;;\r\n        String dbName = &quot;test&quot;;\r\n        String driver = &quot;com.mysql.jdbc.Driver&quot;;\r\n        String userName = &quot;root&quot;;\r\n        String password = &quot;&quot;;\r\n\r\n        private static MySingleTon myObj;\t\r\n        private Connection Con ;\r\n        private MySingleTon() {\r\n        \tSystem.out.println(&quot;Hello&quot;);\r\n        \tCon= createConnection();\r\n        }\r\n        \r\n        @SuppressWarnings(&quot;rawtypes&quot;)\r\n        public Connection createConnection() {\r\n        \tConnection connection = null;\r\n        \ttry {\r\n        \t\t// Load the JDBC driver\r\n        \t\tClass driver_class = Class.forName(driver);\r\n        \t\tDriver driver = (Driver) driver_class.newInstance();\r\n        \t\tDriverManager.registerDriver(driver);\r\n        \t\tconnection = DriverManager.getConnection(url + dbName);\r\n        \t} catch (ClassNotFoundException e) {\r\n        \t\te.printStackTrace();\r\n        \t} catch (SQLException e) {\r\n        \t\te.printStackTrace();\r\n        \t} catch (IllegalAccessException e) {\r\n        \t\te.printStackTrace();\r\n        \t} catch (InstantiationException e) {\r\n        \t\te.printStackTrace();\r\n        \t}\r\n        \treturn connection;\r\n        }\r\n        \r\n        /**\r\n         * Create a static method to get instance.\r\n         */\r\n        public static MySingleTon getInstance() {\r\n        \tif (myObj == null) {\r\n        \t\tmyObj = new MySingleTon();\r\n        \t}\r\n        \treturn myObj;\r\n        }\r\n        \r\n        public static void main(String a[]) {\r\n        \tMySingleTon st = MySingleTon.getInstance();\r\n        }\r\n    }\r\n\r\nI am new to java. Please help.","title":"java.lang.ClassNotFoundException: com.mysql.jdbc.Driver MySQLConnector/J","body":"<p>What is wrong with the code there are lots of error while debugging. I am writing a code for a singleton class to connect with the database MySQL.</p>\n<p>Here is my code</p>\n<pre><code>package com.glomindz.mercuri.util;\nimport java.sql.Connection;\nimport java.sql.Driver;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class MySingleTon {\n    String url = &quot;jdbc:mysql://localhost:3306/&quot;;\n    String dbName = &quot;test&quot;;\n    String driver = &quot;com.mysql.jdbc.Driver&quot;;\n    String userName = &quot;root&quot;;\n    String password = &quot;&quot;;\n\n    private static MySingleTon myObj;   \n    private Connection Con ;\n    private MySingleTon() {\n        System.out.println(&quot;Hello&quot;);\n        Con= createConnection();\n    }\n    \n    @SuppressWarnings(&quot;rawtypes&quot;)\n    public Connection createConnection() {\n        Connection connection = null;\n        try {\n            // Load the JDBC driver\n            Class driver_class = Class.forName(driver);\n            Driver driver = (Driver) driver_class.newInstance();\n            DriverManager.registerDriver(driver);\n            connection = DriverManager.getConnection(url + dbName);\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } catch (IllegalAccessException e) {\n            e.printStackTrace();\n        } catch (InstantiationException e) {\n            e.printStackTrace();\n        }\n        return connection;\n    }\n    \n    /**\n     * Create a static method to get instance.\n     */\n    public static MySingleTon getInstance() {\n        if (myObj == null) {\n            myObj = new MySingleTon();\n        }\n        return myObj;\n    }\n    \n    public static void main(String a[]) {\n        MySingleTon st = MySingleTon.getInstance();\n    }\n}\n</code></pre>\n<p>I am new to java. Please help.</p>\n"},{"tags":["java","hibernate","serialization","jackson","spring-data-rest"],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3155,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":0,"score":5,"last_activity_date":1697759434,"creation_date":1487777681,"question_id":42395831,"body_markdown":"While using Jackson&#39;s [Hibernate4Module][1] to deal with the serialization issues when dealing with a lazily loaded proxy in a Spring Data Rest project.\r\n\r\nIn general it solves the issue of Jackson trying to serialise uninitialized proxies however one side effect is that the JSON output differs:\r\n\r\n**Fetched directly: api/cases/5400**\r\n\r\n    {\r\n       &quot;id&quot;: 5400,\r\n       &quot;practiceReference&quot;: &quot;DWPYI9&quot;\r\n    }\r\n\r\n**Fetched via a lazily loaded @ManyToOne: api/submissions/11901/parentCase**\r\n\r\n    {\r\n       &quot;content&quot;: {\r\n          &quot;id&quot;: 5400,\r\n          &quot;practiceReference&quot;: &quot;DWPYI9&quot;\r\n       }\r\n    }\r\n\r\n**Fetched via a non-lazily loaded @ManyToOne: api/submissions/11901/parentCase**\r\n    \r\n    {\r\n       &quot;id&quot;: 5400,\r\n       &quot;practiceReference&quot;: &quot;DWPYI9&quot;\r\n    }\r\n\r\nAs can be seen in the above, the JSON representation differs when serializing a lazy `@ManyToOne` association: the entity is wrapped in the `content` node. \r\n\r\nIf the association is non-Lazy then the same representation is written regardless of the path.\r\n\r\n**Is there a reason for this and can the additional &quot;content&quot; node somehow be prevented?**\r\n\r\n---\r\n\r\n**UPDATE FEB/2017:**\r\n\r\nI have found the same (deleted) question here: \r\n\r\nhttps://stackoverflow.com/questions/33194554/two-different-resulting-jsons-when-serializing-lazy-objects-and-simple-objects\r\n\r\nWhich is referenced from [this github issue][2]. Also, it is reported [here][3], so seems like a known issue:\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-datatype-hibernate\r\n  [2]: https://github.com/FasterXML/jackson-datatype-hibernate/issues/77\r\n  [3]: https://github.com/FasterXML/jackson-datatype-hibernate/issues/97","title":"Why serialized entity is wrapped with `content` when using Lazy `@ManyToOne`?","body":"<p>While using Jackson's <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">Hibernate4Module</a> to deal with the serialization issues when dealing with a lazily loaded proxy in a Spring Data Rest project.</p>\n<p>In general it solves the issue of Jackson trying to serialise uninitialized proxies however one side effect is that the JSON output differs:</p>\n<p><strong>Fetched directly: api/cases/5400</strong></p>\n<pre><code>{\n   &quot;id&quot;: 5400,\n   &quot;practiceReference&quot;: &quot;DWPYI9&quot;\n}\n</code></pre>\n<p><strong>Fetched via a lazily loaded @ManyToOne: api/submissions/11901/parentCase</strong></p>\n<pre><code>{\n   &quot;content&quot;: {\n      &quot;id&quot;: 5400,\n      &quot;practiceReference&quot;: &quot;DWPYI9&quot;\n   }\n}\n</code></pre>\n<p><strong>Fetched via a non-lazily loaded @ManyToOne: api/submissions/11901/parentCase</strong></p>\n<pre><code>{\n   &quot;id&quot;: 5400,\n   &quot;practiceReference&quot;: &quot;DWPYI9&quot;\n}\n</code></pre>\n<p>As can be seen in the above, the JSON representation differs when serializing a lazy <code>@ManyToOne</code> association: the entity is wrapped in the <code>content</code> node.</p>\n<p>If the association is non-Lazy then the same representation is written regardless of the path.</p>\n<p><strong>Is there a reason for this and can the additional &quot;content&quot; node somehow be prevented?</strong></p>\n<hr />\n<p><strong>UPDATE FEB/2017:</strong></p>\n<p>I have found the same (deleted) question here:</p>\n<p><a href=\"https://stackoverflow.com/questions/33194554/two-different-resulting-jsons-when-serializing-lazy-objects-and-simple-objects\">https://stackoverflow.com/questions/33194554/two-different-resulting-jsons-when-serializing-lazy-objects-and-simple-objects</a></p>\n<p>Which is referenced from <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate/issues/77\" rel=\"nofollow noreferrer\">this github issue</a>. Also, it is reported <a href=\"https://github.com/FasterXML/jackson-datatype-hibernate/issues/97\" rel=\"nofollow noreferrer\">here</a>, so seems like a known issue:</p>\n"},{"tags":["java","logging","slf4j","line-breaks"],"comments":[{"owner":{"account_id":11811552,"reputation":1,"user_id":8642884,"display_name":"user8642884"},"score":0,"creation_date":1505923671,"post_id":35702342,"comment_id":79614647,"body_markdown":"**&lt;B&gt;Add #\\n instead of \\n&lt;/B&gt;** https://stackoverflow.com/questions/15254304/how-do-you-insert-a-newline-in-message-body-of-mule-logger-component","body":"<b>&lt;B&gt;Add #\\n instead of \\n&lt;/B&gt;</b> <a href=\"https://stackoverflow.com/questions/15254304/how-do-you-insert-a-newline-in-message-body-of-mule-logger-component\" title=\"how do you insert a newline in message body of mule logger component\">stackoverflow.com/questions/15254304/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":1,"up_vote_count":51,"is_accepted":true,"score":50,"last_activity_date":1697757243,"creation_date":1456756876,"answer_id":35702355,"question_id":35702342,"body_markdown":"Simply add `\\n` at the end of the string to log.\r\n\r\n```java\r\nLOGGER.info(&quot;Person&#39;s name is  {} .\\n&quot;, person.getName());\r\n```\r\n\r\nIf you are in a windows environment use `\\r\\n`\r\n\r\n --- \r\n**OS independet solution:**\r\n \r\nTo get the right value of new line if you don&#39;t know the end operating system of your application, you can use `System.lineSeperator()` or with &lt; JDK 7 `System.getProperty(&quot;line.separator&quot;)` \r\n\r\n```java\r\nLOGGER.info(&quot;Person&#39;s name is  {} .{}&quot;, person.getName(), System.lineSeparator());\r\n```\r\n","title":"How do I add a line break / blank line after my LOG statement?","body":"<p>Simply add <code>\\n</code> at the end of the string to log.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LOGGER.info(&quot;Person's name is  {} .\\n&quot;, person.getName());\n</code></pre>\n<p>If you are in a windows environment use <code>\\r\\n</code></p>\n<hr />\n<p><strong>OS independet solution:</strong></p>\n<p>To get the right value of new line if you don't know the end operating system of your application, you can use <code>System.lineSeperator()</code> or with &lt; JDK 7 <code>System.getProperty(&quot;line.separator&quot;)</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>LOGGER.info(&quot;Person's name is  {} .{}&quot;, person.getName(), System.lineSeparator());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1904635,"reputation":3069,"user_id":1719755,"accept_rate":70,"display_name":"lordkain"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1456757042,"creation_date":1456757042,"answer_id":35702420,"question_id":35702342,"body_markdown":"dont use `\\n` character, but ask the System what is the newline propery. could be different in linuxor windows or..\r\n\r\nso use\r\n\r\n    System.lineSeparator();\r\n\r\nor before java 7 use\r\n\r\n    System.getProperty(&quot;line.separator&quot;);\r\n","title":"How do I add a line break / blank line after my LOG statement?","body":"<p>dont use <code>\\n</code> character, but ask the System what is the newline propery. could be different in linuxor windows or..</p>\n\n<p>so use</p>\n\n<pre><code>System.lineSeparator();\n</code></pre>\n\n<p>or before java 7 use</p>\n\n<pre><code>System.getProperty(\"line.separator\");\n</code></pre>\n"}],"owner":{"account_id":7247220,"reputation":7104,"user_id":5528751,"accept_rate":96,"display_name":"java123999"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66928,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":35702355,"answer_count":2,"score":40,"last_activity_date":1697757243,"creation_date":1456756821,"question_id":35702342,"body_markdown":"I want to add a blank line after my `LOG` statement in order to make my logs more *separated* and *readable*. \r\n\r\nHow do I do this?\r\n\r\n**Current statement:**\r\n\r\n     LOGGER.info(&quot;Person&#39;s name is  {} .&quot;, person.getName());\r\n\r\nNote that I don&#39;t want to do this after *every* statement, just for certain statements. ","title":"How do I add a line break / blank line after my LOG statement?","body":"<p>I want to add a blank line after my <code>LOG</code> statement in order to make my logs more <em>separated</em> and <em>readable</em>. </p>\n\n<p>How do I do this?</p>\n\n<p><strong>Current statement:</strong></p>\n\n<pre><code> LOGGER.info(\"Person's name is  {} .\", person.getName());\n</code></pre>\n\n<p>Note that I don't want to do this after <em>every</em> statement, just for certain statements. </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2549152,"reputation":2083,"user_id":2213309,"accept_rate":67,"display_name":"flappix"},"score":1,"creation_date":1697754620,"post_id":77327348,"comment_id":136323095,"body_markdown":"Replace the space with one or more tabs ```System.out.print(&quot;\\t&quot; + numbers[i]);```","body":"Replace the space with one or more tabs <code>System.out.print(&quot;\\t&quot; + numbers[i]);</code>"},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":1,"creation_date":1697754756,"post_id":77327348,"comment_id":136323115,"body_markdown":"[This](https://stackoverflow.com/a/22541145/6650475) should help get started.  It becomes a little more complicated if for example one of the columns does not have a three digit number and you want to have min space between the columns.","body":"<a href=\"https://stackoverflow.com/a/22541145/6650475\">This</a> should help get started.  It becomes a little more complicated if for example one of the columns does not have a three digit number and you want to have min space between the columns."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697756907,"creation_date":1697754693,"answer_id":77327382,"question_id":77327348,"body_markdown":"Use the _[printf](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...))_ method.\\\r\nThe _[Formatter](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html)_ class _JavaDoc_ has a list of _format-specifiers_ and other _syntax_.\r\n\r\n```java\r\nSystem.out.printf(&quot;%5d&quot;, numbers[i]);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nArray Contents:\r\n   16  114   26   59  177   67   61  105    1  190\r\n   22   85  123   42   67   20  189  167   69  175\r\n  194   39  135   28   54    8   68   94  107  134\r\n  194   95   51  172   86   92  181  134  165   92\r\n  118   74   14  179   75   99  183  115  178   55\r\n\r\nThe largest number is 194 at array index 20\r\nThe lowest number is 1 at array index 8\r\n```\r\n\r\nAlternately, you may want a dynamic width.\\\r\nFor that, you&#39;ll need to first find the value with the most digits.\r\n\r\nYou can use a _loop_.\r\n\r\n```java\r\nint m = String.valueOf(numbers[0]).length();\r\nfor (int i = 1, v, n = numbers.length; i &lt; n; i++)\r\n    if ((v = String.valueOf(numbers[i]).length()) &gt; m)\r\n        m = v;\r\n```\r\n\r\nOr, a _stream_.\r\n\r\n```java\r\nint m = IntStream.of(numbers)\r\n                 .map(x -&gt; String.valueOf(x).length())\r\n                 .max()\r\n                 .getAsInt();\r\n```\r\n\r\nThen, build the _format_ string.\\\r\nI&#39;m using _+1_ to create a space between the values.\r\n\r\n```java\r\nSystem.out.printf((&quot;%&quot; + (m + 1) + &quot;d&quot;), numbers[i]);\r\n```\r\n\r\nHere is a re-factor.\r\n\r\n```java\r\nString s;\r\n// Create an array of type integer and size 50\r\n// Populate the array with randomly generated numbers between 0 and 199\r\nint i, v, numbers[] = new Random().ints(50, 0, 200).toArray(),\r\n    n = numbers.length;\r\n\r\n// Display the array contents in groups of 10 numbers per line\r\nSystem.out.println(&quot;Array Contents:&quot;);\r\nint m = String.valueOf(numbers[0]).length();\r\nfor (i = 1; i &lt; n; i++)\r\n    if ((v = String.valueOf(numbers[i]).length()) &gt; m) m = v;\r\ns = &quot;%&quot; + (m + 1) + &quot;d&quot;;\r\nfor (i = 0; i &lt; n; i++) {\r\n    System.out.printf(s, numbers[i]);\r\n    if ((i + 1) % 10 == 0)\r\n        System.out.println(); // Move to the next line after every 10 numbers\r\n}\r\n\r\n// Search the array to find the highest and lowest numbers and their location\r\nint max = numbers[0], min = numbers[0], maxIndex = 0, minIndex = 0;\r\n\r\nfor (i = 1; i &lt; n; i++)\r\n    if (numbers[i] &gt; max) max = numbers[maxIndex = i];\r\n    else if (numbers[i] &lt; min) min = numbers[minIndex = i];\r\n\r\n// Display the highest and lowest numbers and their positions in the array\r\nSystem.out.println(&quot;\\nThe largest number is &quot; + max + &quot; at array index &quot; + maxIndex);\r\nSystem.out.println(&quot;The lowest number is &quot; + min + &quot; at array index &quot; + minIndex);\r\n```","title":"In my Java code of an array index, what do I do to format the output of the columns of numbers to line up with each-other?","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">printf</a></em> method.<br />\nThe <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Formatter</a></em> class <em>JavaDoc</em> has a list of <em>format-specifiers</em> and other <em>syntax</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%5d&quot;, numbers[i]);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Array Contents:\n   16  114   26   59  177   67   61  105    1  190\n   22   85  123   42   67   20  189  167   69  175\n  194   39  135   28   54    8   68   94  107  134\n  194   95   51  172   86   92  181  134  165   92\n  118   74   14  179   75   99  183  115  178   55\n\nThe largest number is 194 at array index 20\nThe lowest number is 1 at array index 8\n</code></pre>\n<p>Alternately, you may want a dynamic width.<br />\nFor that, you'll need to first find the value with the most digits.</p>\n<p>You can use a <em>loop</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int m = String.valueOf(numbers[0]).length();\nfor (int i = 1, v, n = numbers.length; i &lt; n; i++)\n    if ((v = String.valueOf(numbers[i]).length()) &gt; m)\n        m = v;\n</code></pre>\n<p>Or, a <em>stream</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int m = IntStream.of(numbers)\n                 .map(x -&gt; String.valueOf(x).length())\n                 .max()\n                 .getAsInt();\n</code></pre>\n<p>Then, build the <em>format</em> string.<br />\nI'm using <em>+1</em> to create a space between the values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf((&quot;%&quot; + (m + 1) + &quot;d&quot;), numbers[i]);\n</code></pre>\n<p>Here is a re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s;\n// Create an array of type integer and size 50\n// Populate the array with randomly generated numbers between 0 and 199\nint i, v, numbers[] = new Random().ints(50, 0, 200).toArray(),\n    n = numbers.length;\n\n// Display the array contents in groups of 10 numbers per line\nSystem.out.println(&quot;Array Contents:&quot;);\nint m = String.valueOf(numbers[0]).length();\nfor (i = 1; i &lt; n; i++)\n    if ((v = String.valueOf(numbers[i]).length()) &gt; m) m = v;\ns = &quot;%&quot; + (m + 1) + &quot;d&quot;;\nfor (i = 0; i &lt; n; i++) {\n    System.out.printf(s, numbers[i]);\n    if ((i + 1) % 10 == 0)\n        System.out.println(); // Move to the next line after every 10 numbers\n}\n\n// Search the array to find the highest and lowest numbers and their location\nint max = numbers[0], min = numbers[0], maxIndex = 0, minIndex = 0;\n\nfor (i = 1; i &lt; n; i++)\n    if (numbers[i] &gt; max) max = numbers[maxIndex = i];\n    else if (numbers[i] &lt; min) min = numbers[minIndex = i];\n\n// Display the highest and lowest numbers and their positions in the array\nSystem.out.println(&quot;\\nThe largest number is &quot; + max + &quot; at array index &quot; + maxIndex);\nSystem.out.println(&quot;The lowest number is &quot; + min + &quot; at array index &quot; + minIndex);\n</code></pre>\n"}],"owner":{"account_id":29559260,"reputation":1,"user_id":22654187,"display_name":"Raleigh Brecht"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697756907,"creation_date":1697753845,"question_id":77327348,"body_markdown":"The code below displays these results:\r\n```\r\nArray Contents:\r\n 175 4 123 53 96 145 181 158 193 154\r\n 85 6 131 60 27 119 79 115 178 98\r\n 68 78 190 178 18 99 8 162 94 105\r\n 169 74 92 134 139 96 64 38 71 111\r\n 189 156 36 49 162 191 39 65 150 193\r\n\r\nThe largest number is 193 at array index 8\r\nThe lowest number is 4 at array index 1\r\n```\r\nThe output I want my code to display:\r\n```\r\nArray Contents:\r\n 175   4 123  53  96 145 181 158 193 154\r\n  85   6 131  60  27 119  79 115 178  98\r\n  68  78 190 178  18  99   8 162  94 105\r\n 169  74  92 134 139  96  64  38  71 111\r\n 189 156  36  49 162 191  39  65 150 193\r\n\r\nThe largest number is 193 at array index 8\r\nThe lowest number is 4 at array index 1\r\n```\r\nMy code:\r\n```\r\n/*This program generates 50 random numbers between 0 and 200 printing 10\r\nnumbers in 10 lines, plus finds the smallest and largest array index*/\r\nimport java.util.Scanner;\r\n\r\npublic class ArrayOperations {\r\n    public static void main(String[] args) {\r\n        // Create an array of type integer and size 50\r\n        int[] numbers = new int[50];\r\n\r\n        // Populate the array with randomly generated numbers between 0 and 199\r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            numbers[i] = (int)(Math.random() * 200);\r\n        }\r\n\r\n        // Display the array contents in groups of 10 numbers per line\r\n        System.out.println(&quot;Array Contents:&quot;);\r\n        for (int i = 0; i &lt; numbers.length; i++) {\r\n            System.out.print(&quot; &quot; + numbers[i]);\r\n            if ((i + 1) % 10 == 0) {\r\n                System.out.println(); // Move to the next line after every 10 numbers\r\n            }\r\n        }\r\n\r\n        // Search the array to find the highest and lowest numbers and their location\r\n        int max = numbers[0];\r\n        int min = numbers[0];\r\n        int maxIndex = 0;\r\n        int minIndex = 0;\r\n\r\n        for (int i = 1; i &lt; numbers.length; i++) {\r\n            if (numbers[i] &gt; max) {\r\n                max = numbers[i];\r\n                maxIndex = i;\r\n            }\r\n            if (numbers[i] &lt; min) {\r\n                min = numbers[i];\r\n                minIndex = i;\r\n            }\r\n        }\r\n\r\n        // Display the highest and lowest numbers and their positions in the array\r\n        System.out.println(&quot;\\nThe largest number is &quot; + max + &quot; at array index &quot; + maxIndex);\r\n        System.out.println(&quot;The lowest number is &quot; + min + &quot; at array index &quot; + minIndex);\r\n    }\r\n}\r\n```\r\nI have tried reformatting the line System.out.print(&quot; &quot; + numbers[i]); many times, used the System.out.printf() format only to get a compile error, and even tried System.out.print(&quot;/t&quot; + numbers[i]); with spaces and moving the text in the parenthesis around again and again. Nothing came close to what I want. I would be grateful for how someone&#39;s assistance, please.","title":"In my Java code of an array index, what do I do to format the output of the columns of numbers to line up with each-other?","body":"<p>The code below displays these results:</p>\n<pre><code>Array Contents:\n 175 4 123 53 96 145 181 158 193 154\n 85 6 131 60 27 119 79 115 178 98\n 68 78 190 178 18 99 8 162 94 105\n 169 74 92 134 139 96 64 38 71 111\n 189 156 36 49 162 191 39 65 150 193\n\nThe largest number is 193 at array index 8\nThe lowest number is 4 at array index 1\n</code></pre>\n<p>The output I want my code to display:</p>\n<pre><code>Array Contents:\n 175   4 123  53  96 145 181 158 193 154\n  85   6 131  60  27 119  79 115 178  98\n  68  78 190 178  18  99   8 162  94 105\n 169  74  92 134 139  96  64  38  71 111\n 189 156  36  49 162 191  39  65 150 193\n\nThe largest number is 193 at array index 8\nThe lowest number is 4 at array index 1\n</code></pre>\n<p>My code:</p>\n<pre><code>/*This program generates 50 random numbers between 0 and 200 printing 10\nnumbers in 10 lines, plus finds the smallest and largest array index*/\nimport java.util.Scanner;\n\npublic class ArrayOperations {\n    public static void main(String[] args) {\n        // Create an array of type integer and size 50\n        int[] numbers = new int[50];\n\n        // Populate the array with randomly generated numbers between 0 and 199\n        for (int i = 0; i &lt; numbers.length; i++) {\n            numbers[i] = (int)(Math.random() * 200);\n        }\n\n        // Display the array contents in groups of 10 numbers per line\n        System.out.println(&quot;Array Contents:&quot;);\n        for (int i = 0; i &lt; numbers.length; i++) {\n            System.out.print(&quot; &quot; + numbers[i]);\n            if ((i + 1) % 10 == 0) {\n                System.out.println(); // Move to the next line after every 10 numbers\n            }\n        }\n\n        // Search the array to find the highest and lowest numbers and their location\n        int max = numbers[0];\n        int min = numbers[0];\n        int maxIndex = 0;\n        int minIndex = 0;\n\n        for (int i = 1; i &lt; numbers.length; i++) {\n            if (numbers[i] &gt; max) {\n                max = numbers[i];\n                maxIndex = i;\n            }\n            if (numbers[i] &lt; min) {\n                min = numbers[i];\n                minIndex = i;\n            }\n        }\n\n        // Display the highest and lowest numbers and their positions in the array\n        System.out.println(&quot;\\nThe largest number is &quot; + max + &quot; at array index &quot; + maxIndex);\n        System.out.println(&quot;The lowest number is &quot; + min + &quot; at array index &quot; + minIndex);\n    }\n}\n</code></pre>\n<p>I have tried reformatting the line System.out.print(&quot; &quot; + numbers[i]); many times, used the System.out.printf() format only to get a compile error, and even tried System.out.print(&quot;/t&quot; + numbers[i]); with spaces and moving the text in the parenthesis around again and again. Nothing came close to what I want. I would be grateful for how someone's assistance, please.</p>\n"},{"tags":["java","excel","apache-poi"],"comments":[{"owner":{"account_id":889699,"reputation":3308,"user_id":928224,"accept_rate":93,"display_name":"WolfLink"},"score":1,"creation_date":1410323368,"post_id":25757299,"comment_id":40277480,"body_markdown":"Are you exporting to excel, or opening an excel file?  Either way, if you can use .csv files (which excel supports), it will make your life a lot easier.","body":"Are you exporting to excel, or opening an excel file?  Either way, if you can use .csv files (which excel supports), it will make your life a lot easier."},{"owner":{"account_id":4981538,"reputation":1,"user_id":4006329,"display_name":"Danny"},"score":0,"creation_date":1410323580,"post_id":25757299,"comment_id":40277517,"body_markdown":"@WolfLink Yes , its importing.","body":"@WolfLink Yes , its importing."}],"answers":[{"tags":[],"owner":{"account_id":310816,"reputation":9919,"user_id":624003,"display_name":"Sankumarsingh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1410339691,"creation_date":1410332112,"answer_id":25759088,"question_id":25757299,"body_markdown":"Suppose you want to know header no of 5th Column then you have cell no 5. Take cell of row 1 and 5th Column by. \r\n\r\n     Cell cell = Sheet1.getRow(0).getCell(5);\r\n\r\nnow take a string \r\n\r\n     String cellNumber = cell.getReference(); \r\n\r\nIt will give you `E1`. I have given you an idea of using `cell.getReference();` you can use it by many ways to get the desired result.","title":"get Excel Sheet Column Name of a Chosen Cell using Java","body":"<p>Suppose you want to know header no of 5th Column then you have cell no 5. Take cell of row 1 and 5th Column by. </p>\n\n<pre><code> Cell cell = Sheet1.getRow(0).getCell(5);\n</code></pre>\n\n<p>now take a string </p>\n\n<pre><code> String cellNumber = cell.getReference(); \n</code></pre>\n\n<p>It will give you <code>E1</code>. I have given you an idea of using <code>cell.getReference();</code> you can use it by many ways to get the desired result.</p>\n"},{"tags":[],"owner":{"account_id":8943658,"reputation":11,"user_id":6671851,"display_name":"Yang"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1470228903,"creation_date":1470219858,"answer_id":38740909,"question_id":25757299,"body_markdown":"I found the following API will work:\r\n      CellReference.convertNumToColString(5)\r\nwill return &quot;F&quot;","title":"get Excel Sheet Column Name of a Chosen Cell using Java","body":"<p>I found the following API will work:\n      CellReference.convertNumToColString(5)\nwill return \"F\"</p>\n"},{"tags":[],"owner":{"account_id":7786675,"reputation":610,"user_id":5891226,"accept_rate":20,"display_name":"Chetan Bhagat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485254441,"creation_date":1485237958,"answer_id":41821096,"question_id":25757299,"body_markdown":"   I got this answer usefull..\r\n\r\n      int lastcell=spreadsheet.getRow(0).getLastCellNum();\r\n      //Non empty Last cell Number or index return\r\n\r\n      for(int i=0;i&lt;=lastcell;i++)\r\n      {\r\n          try\r\n          {\r\n              System.out.println(CellReference.convertNumToColString(i));\r\n          }catch(Exception e)\r\n          {}\r\n      }\r\n\r\nstatic \r\n\r\n          Cell cell = spreadsheet.getRow(0).getCell(2);\r\n\t      tmp=64+cell.getColumnIndex();\r\n\t\t  //convert ascii code to character\r\n\t      System.out.println(Character.toString((char)tmp));\r\n\r\nVisit Full Describe : https://stackoverflow.com/questions/8202319/get-columns-names-in-excel-file-using-apache-poi/41821007#41821007","title":"get Excel Sheet Column Name of a Chosen Cell using Java","body":"<p>I got this answer usefull..</p>\n\n<pre><code>  int lastcell=spreadsheet.getRow(0).getLastCellNum();\n  //Non empty Last cell Number or index return\n\n  for(int i=0;i&lt;=lastcell;i++)\n  {\n      try\n      {\n          System.out.println(CellReference.convertNumToColString(i));\n      }catch(Exception e)\n      {}\n  }\n</code></pre>\n\n<p>static </p>\n\n<pre><code>      Cell cell = spreadsheet.getRow(0).getCell(2);\n      tmp=64+cell.getColumnIndex();\n      //convert ascii code to character\n      System.out.println(Character.toString((char)tmp));\n</code></pre>\n\n<p>Visit Full Describe : <a href=\"https://stackoverflow.com/questions/8202319/get-columns-names-in-excel-file-using-apache-poi/41821007#41821007\">Get columns&#39; names in Excel file using Apache POI</a></p>\n"}],"owner":{"account_id":4981538,"reputation":1,"user_id":4006329,"display_name":"Danny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8913,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697756810,"creation_date":1410323270,"question_id":25757299,"body_markdown":"I&#39;ve a problem with **importing** excel sheet data to work with Java. I&#39;ve a Table that look likes the following.\r\n\r\n\r\n---------\r\n\r\nImage    |     Name         |    Order\r\n\r\n----------\r\n\r\n1011V    |      Holly       |     ON-10121\r\n\r\n----------\r\n\r\n\r\nAs you can see, I&#39;ve column Headings , \r\n\r\n - Image\r\n - Name\r\n - Order\r\n\r\nI want to get the Column Name like A , B  or C in Excel, given that I&#39;ve provided the Column Headings ( Cell Values ) Image , Name or Order.\r\n\r\nFor Example Something like :- getExcelColumnName(&quot;Image&quot;) , getExcelColumnName(&lt;cell value&gt;)","title":"get Excel Sheet Column Name of a Chosen Cell using Java","body":"<p>I've a problem with <strong>importing</strong> excel sheet data to work with Java. I've a Table that look likes the following.</p>\n\n<hr>\n\n<p>Image    |     Name         |    Order</p>\n\n<hr>\n\n<p>1011V    |      Holly       |     ON-10121</p>\n\n<hr>\n\n<p>As you can see, I've column Headings , </p>\n\n<ul>\n<li>Image</li>\n<li>Name</li>\n<li>Order</li>\n</ul>\n\n<p>I want to get the Column Name like A , B  or C in Excel, given that I've provided the Column Headings ( Cell Values ) Image , Name or Order.</p>\n\n<p>For Example Something like :- getExcelColumnName(\"Image\") , getExcelColumnName()</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1672281039,"creation_date":1672277990,"answer_id":74946511,"question_id":74946324,"body_markdown":"I&#39;m afraid that never supposed to work before - you are modifying list of boolean expressions forming the predicate, and according to [javadoc](https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/criteria/predicate#getExpressions()) such modification does not affect resulting query:\r\n\r\n&gt; Return the top-level conjuncts or disjuncts of the predicate. Returns empty list if there are no top-level conjuncts or disjuncts of the predicate. **Modifications to the list do not affect the query**.\r\n\r\n[Previous implementation of CompoundPredicate](https://github.com/hibernate/hibernate-orm/blob/5.6/hibernate-core/src/main/java/org/hibernate/query/criteria/internal/predicate/CompoundPredicate.java#L95) didn&#39;t follow JPA contract, mentioned above:\r\n\r\n```java\r\n\t@Override\r\n\tpublic List&lt;Expression&lt;Boolean&gt;&gt; getExpressions() {\r\n\t\treturn expressions;\r\n\t}\r\n```\r\n\r\nNow [it does](https://github.com/hibernate/hibernate-orm/blob/37042f9b7702a833a14c2018adf9304c5e16a653/hibernate-core/src/main/java/org/hibernate/query/sqm/tree/predicate/SqmJunctionPredicate.java#L87):\r\n\r\n```\r\n\t@Override\r\n\tpublic List&lt;Expression&lt;Boolean&gt;&gt; getExpressions() {\r\n\t\treturn new ArrayList&lt;&gt;( predicates );\r\n\t}\r\n```\r\n\r\n\r\n----------\r\n\r\nUPD. The correct implementation should look like:\r\n\r\n```\r\n        @NotNull\r\n        @Override\r\n        public Predicate toPredicate(@NotNull Root&lt;Role&gt; root,\r\n                                     @NotNull CriteriaQuery&lt;?&gt; query,\r\n                                     @NotNull CriteriaBuilder builder) {\r\n\r\n            List&lt;Predicate&gt; exps = new ArrayList&lt;&gt;;\r\n\r\n            filter.getTitle().ifPresent(title -&gt;\r\n                    exps.add(builder.like(builder.lower(root.get(&quot;title&quot;)), SqlUtils.toLikeLower(title))));\r\n\r\n            return builder.and(exps.toArray(new Predicate[0]));\r\n        }\r\n```","title":"Spring Boot 3 JPA Specification not filtering with jakarta","body":"<p>I'm afraid that never supposed to work before - you are modifying list of boolean expressions forming the predicate, and according to <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/criteria/predicate#getExpressions()\" rel=\"nofollow noreferrer\">javadoc</a> such modification does not affect resulting query:</p>\n<blockquote>\n<p>Return the top-level conjuncts or disjuncts of the predicate. Returns empty list if there are no top-level conjuncts or disjuncts of the predicate. <strong>Modifications to the list do not affect the query</strong>.</p>\n</blockquote>\n<p><a href=\"https://github.com/hibernate/hibernate-orm/blob/5.6/hibernate-core/src/main/java/org/hibernate/query/criteria/internal/predicate/CompoundPredicate.java#L95\" rel=\"nofollow noreferrer\">Previous implementation of CompoundPredicate</a> didn't follow JPA contract, mentioned above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public List&lt;Expression&lt;Boolean&gt;&gt; getExpressions() {\n        return expressions;\n    }\n</code></pre>\n<p>Now <a href=\"https://github.com/hibernate/hibernate-orm/blob/37042f9b7702a833a14c2018adf9304c5e16a653/hibernate-core/src/main/java/org/hibernate/query/sqm/tree/predicate/SqmJunctionPredicate.java#L87\" rel=\"nofollow noreferrer\">it does</a>:</p>\n<pre><code>    @Override\n    public List&lt;Expression&lt;Boolean&gt;&gt; getExpressions() {\n        return new ArrayList&lt;&gt;( predicates );\n    }\n</code></pre>\n<hr />\n<p>UPD. The correct implementation should look like:</p>\n<pre><code>        @NotNull\n        @Override\n        public Predicate toPredicate(@NotNull Root&lt;Role&gt; root,\n                                     @NotNull CriteriaQuery&lt;?&gt; query,\n                                     @NotNull CriteriaBuilder builder) {\n\n            List&lt;Predicate&gt; exps = new ArrayList&lt;&gt;;\n\n            filter.getTitle().ifPresent(title -&gt;\n                    exps.add(builder.like(builder.lower(root.get(&quot;title&quot;)), SqlUtils.toLikeLower(title))));\n\n            return builder.and(exps.toArray(new Predicate[0]));\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2815103,"reputation":484,"user_id":2420411,"accept_rate":48,"display_name":"Vasanth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697755247,"creation_date":1697726477,"answer_id":77324761,"question_id":74946324,"body_markdown":"\r\nJDK 1.8 with Spring boot 2.x.x code    \r\n\r\n Using javax.persistence\r\n   \r\n\r\n    predicate.getExpressions().add(criteriaBuilder.equal(criteriaBuilder.lower(root.get(&quot;employeeName&quot;)), ((String) employeeName).toLowerCase()));\r\n\r\n\r\nJDK17 with Spring Boot 3.x.x code \r\nUsing jakarta.persistence\r\n\r\n\r\n \r\n\r\n    List&lt;Predicate&gt; predicatesList = new ArrayList&lt;&gt;();\r\n        if(StringUtils.isNoneBlank(employeeName)) {\r\n        \t    \tpredicatesList.add(criteriaBuilder.equal(criteriaBuilder.lower(root.get(&quot;employeeName&quot;)),employeeName.toLowerCase()));\r\n        \t    }\r\n        \t\treturn criteriaBuilder.and(predicatesList.toArray(new Predicate[predicatesList.size()]));\r\n\r\n work out for me.\t\r\n","title":"Spring Boot 3 JPA Specification not filtering with jakarta","body":"<p>JDK 1.8 with Spring boot 2.x.x code</p>\n<p>Using javax.persistence</p>\n<pre><code>predicate.getExpressions().add(criteriaBuilder.equal(criteriaBuilder.lower(root.get(&quot;employeeName&quot;)), ((String) employeeName).toLowerCase()));\n</code></pre>\n<p>JDK17 with Spring Boot 3.x.x code\nUsing jakarta.persistence</p>\n<pre><code>List&lt;Predicate&gt; predicatesList = new ArrayList&lt;&gt;();\n    if(StringUtils.isNoneBlank(employeeName)) {\n                predicatesList.add(criteriaBuilder.equal(criteriaBuilder.lower(root.get(&quot;employeeName&quot;)),employeeName.toLowerCase()));\n            }\n            return criteriaBuilder.and(predicatesList.toArray(new Predicate[predicatesList.size()]));\n</code></pre>\n<p>work out for me.</p>\n"}],"owner":{"account_id":9472564,"reputation":2041,"user_id":7548062,"accept_rate":76,"display_name":"Pavel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2381,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":74946511,"answer_count":2,"score":2,"last_activity_date":1697755247,"creation_date":1672275440,"question_id":74946324,"body_markdown":"I&#39;m moving to SpringBoot 3.0.1. After the update and replacing all `javax.persistence` with `jakarta.persistence` all filters which based on `org.springframework.data.jpa.domain.Specification` doesn&#39;t work, no error just not filtering.\r\n\r\nExample entity:\r\n\r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.FetchType;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.ManyToMany;\r\n    import jakarta.persistence.Table;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    import java.util.List;\r\n    import java.util.Objects;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @Builder\r\n    @ToString\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Table(name = &quot;roles&quot;)\r\n    public class Role {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(name = &quot;system_name&quot;)\r\n        private String systemName;\r\n    \r\n        @Column(name = &quot;title&quot;)\r\n        private String title;\r\n    \r\n        @ManyToMany(mappedBy = &quot;roles&quot;, fetch = FetchType.LAZY)\r\n        @ToString.Exclude\r\n        private List&lt;User&gt; users;\r\n    \r\n        // equals hashcode\r\n    }\r\n\r\nRepository and Specification implementation:\r\n\r\n    import jakarta.persistence.criteria.CriteriaBuilder;\r\n    import jakarta.persistence.criteria.CriteriaQuery;\r\n    import jakarta.persistence.criteria.Expression;\r\n    import jakarta.persistence.criteria.Predicate;\r\n    import jakarta.persistence.criteria.Root;\r\n    import my.package.model.Role;\r\n    import my.package.repository.filter.RoleFilter;\r\n    import my.package.util.SqlUtils;\r\n    import org.jetbrains.annotations.NotNull;\r\n    import org.springframework.data.jpa.domain.Specification;\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.data.jpa.repository.JpaSpecificationExecutor;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    \r\n    import java.util.List;\r\n    \r\n    @Repository\r\n    public interface RoleRepository extends JpaRepository&lt;Role, Long&gt;, JpaSpecificationExecutor&lt;Role&gt; {\r\n    \r\n        record RoleSpecification(@NotNull RoleFilter filter) implements Specification&lt;Role&gt; {\r\n    \r\n            @NotNull\r\n            @Override\r\n            public Predicate toPredicate(@NotNull Root&lt;Role&gt; root,\r\n                                         @NotNull CriteriaQuery&lt;?&gt; query,\r\n                                         @NotNull CriteriaBuilder builder) {\r\n    \r\n                Predicate predicate = builder.conjunction();\r\n                List&lt;Expression&lt;Boolean&gt;&gt; exps = predicate.getExpressions();\r\n    \r\n                filter.getTitle().ifPresent(title -&gt;\r\n                        exps.add(builder.like(builder.lower(root.get(&quot;title&quot;)), SqlUtils.toLikeLower(title))));\r\n    \r\n                return predicate;\r\n            }\r\n        }\r\n    }\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class RoleFilter {\r\n    \r\n        private String title;\r\n    \r\n        public Optional&lt;String&gt; getTitle() {\r\n            return Objects.isNull(title) || title.isEmpty() ? Optional.empty() : Optional.of(title);\r\n        }\r\n    \r\n    }\r\n\r\nAnd usage:\r\n\r\n    import static org.springframework.data.jpa.domain.Specification.where;\r\n    \r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class RoleServiceImpl implements RoleService {\r\n    \r\n        private final RoleRepository roleRepository;\r\n    \r\n        @Override\r\n        public List&lt;Role&gt; list() {\r\n            RoleFilter filter = new RoleFilter();\r\n            filter.setTitle(&quot;test&quot;);\r\n            return roleRepository.findAll(where(new RoleSpecification(filter)));\r\n        }\r\n    }\r\n\r\nAnd hibernate generate this strange query:\r\n\r\n\r\n    select\r\n        g1_0.id,\r\n        g1_0.created_at,\r\n        g1_0.is_hidden,\r\n        g1_0.title \r\n    from\r\n        groups g1_0 \r\n    where\r\n        1=1 \r\n    order by\r\n        g1_0.id desc offset ? rows fetch first ? rows only\r\n\r\n\r\nNothing about `title` in `WHERE` statement.\r\n\r\nbuild.gradle\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;3.0.1&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.0.14.RELEASE&#39;\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    ext {\r\n        jupiterVersion = &#39;5.9.1&#39;\r\n        lombokVersion = &#39;1.18.24&#39;\r\n        openApiVersion = &#39;1.6.14&#39;\r\n        mapstructVersion = &#39;1.5.3.Final&#39;\r\n        lombokMapstructBindingVersion = &quot;0.2.0&quot;\r\n    }\r\n    \r\n    group = &#39;my.package&#39;\r\n    version = &#39;1.0&#39;\r\n    \r\n    configurations {\r\n        compileOnly {\r\n            extendsFrom annotationProcessor\r\n        }\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-batch&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        implementation &quot;org.springdoc:springdoc-openapi-ui:${openApiVersion}&quot;\r\n        implementation &quot;org.mapstruct:mapstruct:${mapstructVersion}&quot;\r\n        implementation &#39;com.google.guava:guava:31.1-jre&#39;\r\n        implementation &#39;net.minidev:json-smart:2.4.8&#39;\r\n        implementation &#39;io.nats:jnats:2.16.5&#39;\r\n        implementation &#39;io.jsonwebtoken:jjwt:0.9.1&#39;\r\n        implementation &#39;javax.xml.bind:jaxb-api:2.3.1&#39;\r\n        implementation &#39;org.flywaydb:flyway-core:9.10.1&#39;\r\n        implementation &#39;org.jetbrains:annotations:23.1.0&#39;\r\n        compileOnly &quot;org.projectlombok:lombok:${lombokVersion}&quot;\r\n        runtimeOnly &#39;com.h2database:h2:2.1.214&#39;\r\n        runtimeOnly &#39;org.postgresql:postgresql:42.5.1&#39;\r\n        annotationProcessor &quot;org.projectlombok:lombok:${lombokVersion}&quot;\r\n        annotationProcessor &quot;org.projectlombok:lombok-mapstruct-binding:${lombokMapstructBindingVersion}&quot;\r\n        annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n        annotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstructVersion}&quot;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n        testImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n        testImplementation &#39;org.springframework.batch:spring-batch-test&#39;\r\n        testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${jupiterVersion}&quot;\r\n        testImplementation &quot;org.junit.jupiter:junit-jupiter-engine:${jupiterVersion}&quot;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:${jupiterVersion}&#39;\r\n        testRuntimeOnly &#39;org.junit.vintage:junit-vintage-engine:5.8.1&#39;\r\n        testCompileOnly &#39;junit:junit:4.12&#39;\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n        useJUnitPlatform()\r\n    }\r\n\r\nNo errors, no exceptions, no warnings, just ignore all conditions.\r\nWhy does it&#39;s happening and how to fix it?","title":"Spring Boot 3 JPA Specification not filtering with jakarta","body":"<p>I'm moving to SpringBoot 3.0.1. After the update and replacing all <code>javax.persistence</code> with <code>jakarta.persistence</code> all filters which based on <code>org.springframework.data.jpa.domain.Specification</code> doesn't work, no error just not filtering.</p>\n<p>Example entity:</p>\n<pre><code>import jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\nimport lombok.ToString;\n\nimport java.util.List;\nimport java.util.Objects;\n\n@Getter\n@Setter\n@Entity\n@Builder\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = &quot;roles&quot;)\npublic class Role {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;system_name&quot;)\n    private String systemName;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @ManyToMany(mappedBy = &quot;roles&quot;, fetch = FetchType.LAZY)\n    @ToString.Exclude\n    private List&lt;User&gt; users;\n\n    // equals hashcode\n}\n</code></pre>\n<p>Repository and Specification implementation:</p>\n<pre><code>import jakarta.persistence.criteria.CriteriaBuilder;\nimport jakarta.persistence.criteria.CriteriaQuery;\nimport jakarta.persistence.criteria.Expression;\nimport jakarta.persistence.criteria.Predicate;\nimport jakarta.persistence.criteria.Root;\nimport my.package.model.Role;\nimport my.package.repository.filter.RoleFilter;\nimport my.package.util.SqlUtils;\nimport org.jetbrains.annotations.NotNull;\nimport org.springframework.data.jpa.domain.Specification;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.JpaSpecificationExecutor;\nimport org.springframework.stereotype.Repository;\n\n\nimport java.util.List;\n\n@Repository\npublic interface RoleRepository extends JpaRepository&lt;Role, Long&gt;, JpaSpecificationExecutor&lt;Role&gt; {\n\n    record RoleSpecification(@NotNull RoleFilter filter) implements Specification&lt;Role&gt; {\n\n        @NotNull\n        @Override\n        public Predicate toPredicate(@NotNull Root&lt;Role&gt; root,\n                                     @NotNull CriteriaQuery&lt;?&gt; query,\n                                     @NotNull CriteriaBuilder builder) {\n\n            Predicate predicate = builder.conjunction();\n            List&lt;Expression&lt;Boolean&gt;&gt; exps = predicate.getExpressions();\n\n            filter.getTitle().ifPresent(title -&gt;\n                    exps.add(builder.like(builder.lower(root.get(&quot;title&quot;)), SqlUtils.toLikeLower(title))));\n\n            return predicate;\n        }\n    }\n}\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class RoleFilter {\n\n    private String title;\n\n    public Optional&lt;String&gt; getTitle() {\n        return Objects.isNull(title) || title.isEmpty() ? Optional.empty() : Optional.of(title);\n    }\n\n}\n</code></pre>\n<p>And usage:</p>\n<pre><code>import static org.springframework.data.jpa.domain.Specification.where;\n\n@Service\n@RequiredArgsConstructor\npublic class RoleServiceImpl implements RoleService {\n\n    private final RoleRepository roleRepository;\n\n    @Override\n    public List&lt;Role&gt; list() {\n        RoleFilter filter = new RoleFilter();\n        filter.setTitle(&quot;test&quot;);\n        return roleRepository.findAll(where(new RoleSpecification(filter)));\n    }\n}\n</code></pre>\n<p>And hibernate generate this strange query:</p>\n<pre><code>select\n    g1_0.id,\n    g1_0.created_at,\n    g1_0.is_hidden,\n    g1_0.title \nfrom\n    groups g1_0 \nwhere\n    1=1 \norder by\n    g1_0.id desc offset ? rows fetch first ? rows only\n</code></pre>\n<p>Nothing about <code>title</code> in <code>WHERE</code> statement.</p>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '3.0.1'\n    id 'io.spring.dependency-management' version '1.0.14.RELEASE'\n    id 'java'\n}\n\next {\n    jupiterVersion = '5.9.1'\n    lombokVersion = '1.18.24'\n    openApiVersion = '1.6.14'\n    mapstructVersion = '1.5.3.Final'\n    lombokMapstructBindingVersion = &quot;0.2.0&quot;\n}\n\ngroup = 'my.package'\nversion = '1.0'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-batch'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation &quot;org.springdoc:springdoc-openapi-ui:${openApiVersion}&quot;\n    implementation &quot;org.mapstruct:mapstruct:${mapstructVersion}&quot;\n    implementation 'com.google.guava:guava:31.1-jre'\n    implementation 'net.minidev:json-smart:2.4.8'\n    implementation 'io.nats:jnats:2.16.5'\n    implementation 'io.jsonwebtoken:jjwt:0.9.1'\n    implementation 'javax.xml.bind:jaxb-api:2.3.1'\n    implementation 'org.flywaydb:flyway-core:9.10.1'\n    implementation 'org.jetbrains:annotations:23.1.0'\n    compileOnly &quot;org.projectlombok:lombok:${lombokVersion}&quot;\n    runtimeOnly 'com.h2database:h2:2.1.214'\n    runtimeOnly 'org.postgresql:postgresql:42.5.1'\n    annotationProcessor &quot;org.projectlombok:lombok:${lombokVersion}&quot;\n    annotationProcessor &quot;org.projectlombok:lombok-mapstruct-binding:${lombokMapstructBindingVersion}&quot;\n    annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n    annotationProcessor &quot;org.mapstruct:mapstruct-processor:${mapstructVersion}&quot;\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    testImplementation 'org.springframework.batch:spring-batch-test'\n    testImplementation &quot;org.junit.jupiter:junit-jupiter-api:${jupiterVersion}&quot;\n    testImplementation &quot;org.junit.jupiter:junit-jupiter-engine:${jupiterVersion}&quot;\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:${jupiterVersion}'\n    testRuntimeOnly 'org.junit.vintage:junit-vintage-engine:5.8.1'\n    testCompileOnly 'junit:junit:4.12'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>No errors, no exceptions, no warnings, just ignore all conditions.\nWhy does it's happening and how to fix it?</p>\n"},{"tags":["java","email","smtp","jakarta-mail","smtp-auth"],"comments":[{"owner":{"account_id":372117,"reputation":2909,"user_id":1486762,"accept_rate":47,"display_name":"Bilbo Baggins"},"score":0,"creation_date":1404797917,"post_id":24623976,"comment_id":38162033,"body_markdown":"check your username and password values. are they correct?","body":"check your username and password values. are they correct?"},{"owner":{"account_id":4715544,"reputation":1,"user_id":3814788,"display_name":"Hari"},"score":0,"creation_date":1404798508,"post_id":24623976,"comment_id":38162256,"body_markdown":"Dear @SamwiseGamgee Username and password are correct i directly login to the port 172.23.5.10 (company mail server) in browser with this and outlook also configured with this IP and username ,password.","body":"Dear @SamwiseGamgee Username and password are correct i directly login to the port 172.23.5.10 (company mail server) in browser with this and outlook also configured with this IP and username ,password."},{"owner":{"account_id":1032936,"reputation":29659,"user_id":1040885,"display_name":"Bill Shannon"},"score":0,"creation_date":1404801101,"post_id":24623976,"comment_id":38163235,"body_markdown":"Examine the [protocol trace](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug) for more clues as to why the server is rejecting your username and password.  You might have to set the &quot;mail.debug.auth&quot; property to &quot;true&quot; to get the full protocol trace.  Be careful not to post it here because it might expose your password.","body":"Examine the <a href=\"http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug\" rel=\"nofollow noreferrer\">protocol trace</a> for more clues as to why the server is rejecting your username and password.  You might have to set the &quot;mail.debug.auth&quot; property to &quot;true&quot; to get the full protocol trace.  Be careful not to post it here because it might expose your password."}],"answers":[{"tags":[],"owner":{"account_id":1583666,"reputation":3389,"user_id":1468481,"accept_rate":96,"display_name":"Mr.Chowdary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404800783,"creation_date":1404800344,"answer_id":24624917,"question_id":24623976,"body_markdown":"You must add `mail.smtp.ssl` and `mail.smtp.sender.address` properties..\r\n`mail.smtp.sender.address` is same as `from` property.\r\n It must work..it is working as expected for me..\r\nHope it helps  \r\n\r\nIf it doesn&#39;t solve your problem, just share the exception stack trace of  caused by.. ","title":"javax.mail.sendfailedexception: Sending failed; nested exception is: class javax.mail.authenticationfailedexception at send","body":"<p>You must add <code>mail.smtp.ssl</code> and <code>mail.smtp.sender.address</code> properties..\n<code>mail.smtp.sender.address</code> is same as <code>from</code> property.\n It must work..it is working as expected for me..\nHope it helps  </p>\n\n<p>If it doesn't solve your problem, just share the exception stack trace of  caused by.. </p>\n"},{"tags":[],"owner":{"account_id":2918073,"reputation":1130,"user_id":2500882,"display_name":"Nadav Finish"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1416172401,"creation_date":1416167558,"answer_id":26961357,"question_id":24623976,"body_markdown":"You can switch to an app made by Google such as Gmail to access your account (recommended) or change your [settings](https://www.google.com/settings/security/lesssecureapps) so that your [account is no longer protected by modern security standards](https://support.google.com/accounts/answer/6010255).","title":"javax.mail.sendfailedexception: Sending failed; nested exception is: class javax.mail.authenticationfailedexception at send","body":"<p>You can switch to an app made by Google such as Gmail to access your account (recommended) or change your <a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow\">settings</a> so that your <a href=\"https://support.google.com/accounts/answer/6010255\" rel=\"nofollow\">account is no longer protected by modern security standards</a>.</p>\n"}],"owner":{"account_id":4715544,"reputation":1,"user_id":3814788,"display_name":"Hari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8619,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1697753085,"creation_date":1404795236,"question_id":24623976,"body_markdown":"I am new to java mail, I want to sent a mail with attachments so i like to create a test mail with sample codes from internet but i am getting\r\n\r\n    javax.mail.sendfailedexception: sending failed;\r\n    nested exception is: class javax.mail.authenticationfailedexception \r\n    at javax.mail.transport.send0(Transport.java.218)\r\n    at javax.mail.transport.send(Transport.java.80)\r\n\r\nI tried with different authentication but i failed \r\n\r\n    import java.util.*;\r\n    import javax.mail.*;\r\n    import javax.mail.internet.*;\r\n    import javax.activation.*;\r\n    \r\n    public class SendEmail\r\n    {\r\n       public static void main(String [] args)\r\n       {\r\n          \r\n          // Recipient&#39;s email ID needs to be mentioned.\r\n          String to = &quot;hari@gmail.com&quot;;\r\n    \r\n          // Sender&#39;s email My Office mail server\r\n          String from = &quot;hari8750@access.co.in&quot;;\r\n          String pass = &quot;Password&quot;;\r\n          String host = &quot;172.23.5.10&quot;;\r\n          String port = &quot;25&quot;;\r\n    \r\n          // Get system properties\r\n          Properties properties = System.getProperties();\r\n    \r\n          // Setup mail server\r\n          properties.setProperty(&quot;mail.smtp.host&quot;, host);\r\n          properties.setProperty(&quot;mail.smtp.port&quot;, port);\r\n          properties.setProperty(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\r\n    \r\n          // Get the default Session object.\r\n          Session session = Session.getInstance(properties,new MailAuthentication(from,pass));\r\n    \r\n          try{\r\n             // Create a default MimeMessage object.\r\n             MimeMessage message = new MimeMessage(session);\r\n    \r\n             // Set From: header field of the header.\r\n             message.setFrom(new InternetAddress(from));\r\n    \r\n             // Set To: header field of the header.\r\n             message.addRecipient(Message.RecipientType.TO,\r\n                                      new InternetAddress(to));\r\n    \r\n             // Set Subject: header field\r\n             message.setSubject(&quot;Test Mail&quot;);\r\n    \r\n             // Create the message part \r\n             BodyPart messageBodyPart = new MimeBodyPart();\r\n    \r\n             // Fill the message\r\n             messageBodyPart.setText(&quot;Test Mail Success Hari&quot;);\r\n             \r\n             // Create a multipar message\r\n             Multipart multipart = new MimeMultipart();\r\n    \r\n             // Set text message part\r\n             multipart.addBodyPart(messageBodyPart);\r\n    \r\n             // Send the complete message parts\r\n             message.setContent(multipart );\r\n    \r\n             // Send message\r\n             Transport.send(message);\r\n             System.out.println(&quot;Sent message successfully....&quot;);\r\n          }catch (MessagingException mex) {\r\n             mex.printStackTrace();\r\n          }\r\n       }\r\n    }\r\n    \r\n    import javax.mail.*\r\n    public class MailAuthentication extends Authentication\r\n    {\r\n    \r\n    \tString _user;\r\n    \tString _pass;\r\n    \tpublic GMailAuthenticator (String username, String password)\r\n    \t{\r\n    \t\tsuper();\r\n    \t\tthis._user = username;\r\n    \t\tthis._pass = password;\r\n    \t}\r\n    \tpublic PasswordAuthentication getPasswordAuthentication()\r\n    \t{\r\n    \t\treturn new PasswordAuthentication(_user, _pass);\r\n    \t}\r\n    }\r\n\r\n\r\ni also tried with \r\n\r\n    Session session = Session.getInstance(props,\r\n    \t\t  new javax.mail.Authenticator() {\r\n    \t\t\tprotected PasswordAuthentication getPasswordAuthentication() {\r\n    \t\t\t\treturn new PasswordAuthentication(username, password);\r\n    \t\t\t}\r\n    \t\t  });\r\n\r\nand \r\n\r\n    Session session = Session.getDefaultInstance(properties);\r\n\r\nand \r\n\r\n    Session session = Session.getDefaultInstance(properties);\r\n\r\nbut i am getting the same error.\r\n\r\nKindly help me to solve this out\r\n\r\nI am using Windows PC like java environment variables is there any steps for SMTP ??\r\n\r\nThanks in Advance.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"javax.mail.sendfailedexception: Sending failed; nested exception is: class javax.mail.authenticationfailedexception at send","body":"<p>I am new to java mail, I want to sent a mail with attachments so i like to create a test mail with sample codes from internet but i am getting</p>\n\n<pre><code>javax.mail.sendfailedexception: sending failed;\nnested exception is: class javax.mail.authenticationfailedexception \nat javax.mail.transport.send0(Transport.java.218)\nat javax.mail.transport.send(Transport.java.80)\n</code></pre>\n\n<p>I tried with different authentication but i failed </p>\n\n<pre><code>import java.util.*;\nimport javax.mail.*;\nimport javax.mail.internet.*;\nimport javax.activation.*;\n\npublic class SendEmail\n{\n   public static void main(String [] args)\n   {\n\n      // Recipient's email ID needs to be mentioned.\n      String to = \"hari@gmail.com\";\n\n      // Sender's email My Office mail server\n      String from = \"hari8750@access.co.in\";\n      String pass = \"Password\";\n      String host = \"172.23.5.10\";\n      String port = \"25\";\n\n      // Get system properties\n      Properties properties = System.getProperties();\n\n      // Setup mail server\n      properties.setProperty(\"mail.smtp.host\", host);\n      properties.setProperty(\"mail.smtp.port\", port);\n      properties.setProperty(\"mail.smtp.auth\", \"true\");\n\n      // Get the default Session object.\n      Session session = Session.getInstance(properties,new MailAuthentication(from,pass));\n\n      try{\n         // Create a default MimeMessage object.\n         MimeMessage message = new MimeMessage(session);\n\n         // Set From: header field of the header.\n         message.setFrom(new InternetAddress(from));\n\n         // Set To: header field of the header.\n         message.addRecipient(Message.RecipientType.TO,\n                                  new InternetAddress(to));\n\n         // Set Subject: header field\n         message.setSubject(\"Test Mail\");\n\n         // Create the message part \n         BodyPart messageBodyPart = new MimeBodyPart();\n\n         // Fill the message\n         messageBodyPart.setText(\"Test Mail Success Hari\");\n\n         // Create a multipar message\n         Multipart multipart = new MimeMultipart();\n\n         // Set text message part\n         multipart.addBodyPart(messageBodyPart);\n\n         // Send the complete message parts\n         message.setContent(multipart );\n\n         // Send message\n         Transport.send(message);\n         System.out.println(\"Sent message successfully....\");\n      }catch (MessagingException mex) {\n         mex.printStackTrace();\n      }\n   }\n}\n\nimport javax.mail.*\npublic class MailAuthentication extends Authentication\n{\n\n    String _user;\n    String _pass;\n    public GMailAuthenticator (String username, String password)\n    {\n        super();\n        this._user = username;\n        this._pass = password;\n    }\n    public PasswordAuthentication getPasswordAuthentication()\n    {\n        return new PasswordAuthentication(_user, _pass);\n    }\n}\n</code></pre>\n\n<p>i also tried with </p>\n\n<pre><code>Session session = Session.getInstance(props,\n          new javax.mail.Authenticator() {\n            protected PasswordAuthentication getPasswordAuthentication() {\n                return new PasswordAuthentication(username, password);\n            }\n          });\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Session session = Session.getDefaultInstance(properties);\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Session session = Session.getDefaultInstance(properties);\n</code></pre>\n\n<p>but i am getting the same error.</p>\n\n<p>Kindly help me to solve this out</p>\n\n<p>I am using Windows PC like java environment variables is there any steps for SMTP ??</p>\n\n<p>Thanks in Advance.</p>\n"},{"tags":["java","java-8","completable-future"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":18,"creation_date":1501779496,"post_id":45490316,"comment_id":77942023,"body_markdown":"`get()` requires you to catch checked exceptions. You should notice the difference when you change from `get()` to `join()`, as you will imediately get a compiler error saying that neither `InterruptedException` nor `ExecutionException` are thrown in the `try` block.","body":"<code>get()</code> requires you to catch checked exceptions. You should notice the difference when you change from <code>get()</code> to <code>join()</code>, as you will imediately get a compiler error saying that neither <code>InterruptedException</code> nor <code>ExecutionException</code> are thrown in the <code>try</code> block."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":9,"creation_date":1501782534,"post_id":45490316,"comment_id":77943909,"body_markdown":"@holi-java: `join()` can not get interrupted.","body":"@holi-java: <code>join()</code> can not get interrupted."},{"owner":{"account_id":10312640,"reputation":29929,"user_id":7607923,"accept_rate":83,"display_name":"holi-java"},"score":0,"creation_date":1501787684,"post_id":45490316,"comment_id":77946857,"body_markdown":"@Holger yes, sir. I found I can&#39;t interrupt the task.","body":"@Holger yes, sir. I found I can&#39;t interrupt the task."},{"owner":{"account_id":8706767,"reputation":1881,"user_id":6514464,"display_name":"Nomeswaran"},"score":0,"creation_date":1501817208,"post_id":45490316,"comment_id":77956590,"body_markdown":"@Holger, Thank you for reply and you are correct, get expects checked exception and join method not. But both are waiting for complete the all the future and I would like know whcih one I should use and why?","body":"@Holger, Thank you for reply and you are correct, get expects checked exception and join method not. But both are waiting for complete the all the future and I would like know whcih one I should use and why?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":16,"creation_date":1502029560,"post_id":45490316,"comment_id":78025956,"body_markdown":"Well `get` exists, because `CompletableFuture` implements the `Future` interface which mandates it. `join()` most likely has been introduced, to avoid needing to catch checked exceptions in lambda expressions when combining futures. In all other use cases, feel free to use whatever you prefer.","body":"Well <code>get</code> exists, because <code>CompletableFuture</code> implements the <code>Future</code> interface which mandates it. <code>join()</code> most likely has been introduced, to avoid needing to catch checked exceptions in lambda expressions when combining futures. In all other use cases, feel free to use whatever you prefer."},{"owner":{"account_id":910649,"reputation":1776,"user_id":944600,"accept_rate":58,"display_name":"Shailesh Vaishampayan"},"score":3,"creation_date":1504221672,"post_id":45490316,"comment_id":78942913,"body_markdown":"Does it really make sense to use join or get as both block on the thread. Can&#39;t we instead make this asynchronous by using other composition methods to create a chain of asynchronous functions.ofvourse it depends on functionality. But in case of e.g. a service method in spring called by controller method returning completeable future it makes more sense to not call get or join in service method at all .does it?","body":"Does it really make sense to use join or get as both block on the thread. Can&#39;t we instead make this asynchronous by using other composition methods to create a chain of asynchronous functions.ofvourse it depends on functionality. But in case of e.g. a service method in spring called by controller method returning completeable future it makes more sense to not call get or join in service method at all .does it?"}],"answers":[{"tags":[],"owner":{"account_id":12332742,"reputation":1901,"user_id":8998112,"display_name":"Dawid Wr&#243;blewski"},"down_vote_count":0,"up_vote_count":190,"is_accepted":false,"score":190,"last_activity_date":1628860211,"creation_date":1511471036,"answer_id":47463228,"question_id":45490316,"body_markdown":"The only difference is how methods throw exceptions. `get()` is declared in `Future` interface as:\r\n\r\n    V get() throws InterruptedException, ExecutionException;\r\n\r\nThe exceptions are both **checked** exceptions which means they need to be handled in your code. As you can see in your code, an automatic code generator in your IDE asked to create try-catch block on your behalf.\r\n\r\n    try {\r\n      CompletableFuture.allOf(fanoutRequestList).get() \r\n    } catch (InterruptedException | ExecutionException e) {\r\n      // TODO Auto-generated catch block\r\n      e.printStackTrace();\r\n    }\r\n\r\nThe `join()` method doesn&#39;t throw **checked** exceptions.\r\n\r\n    public T join()\r\n\r\nInstead it throws **unchecked** `CompletionException`. So you do not need a try-catch block and instead you can fully harness `exceptionally()` method when using the disscused `List&lt;String&gt; process` function\r\n\r\n    CompletableFuture&lt;List&lt;String&gt;&gt; cf = CompletableFuture\r\n        .supplyAsync(this::process)\r\n        .exceptionally(this::getFallbackListOfStrings) // Here you can catch e.g. {@code join}&#39;s CompletionException\r\n        .thenAccept(this::processFurther);\r\n\r\nYou can find both `get()` and `join()` implementation [here][1].\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/CompletableFuture.java","title":"CompletableFuture&lt;T&gt; class: join() vs get()","body":"<p>The only difference is how methods throw exceptions. <code>get()</code> is declared in <code>Future</code> interface as:</p>\n<pre><code>V get() throws InterruptedException, ExecutionException;\n</code></pre>\n<p>The exceptions are both <strong>checked</strong> exceptions which means they need to be handled in your code. As you can see in your code, an automatic code generator in your IDE asked to create try-catch block on your behalf.</p>\n<pre><code>try {\n  CompletableFuture.allOf(fanoutRequestList).get() \n} catch (InterruptedException | ExecutionException e) {\n  // TODO Auto-generated catch block\n  e.printStackTrace();\n}\n</code></pre>\n<p>The <code>join()</code> method doesn't throw <strong>checked</strong> exceptions.</p>\n<pre><code>public T join()\n</code></pre>\n<p>Instead it throws <strong>unchecked</strong> <code>CompletionException</code>. So you do not need a try-catch block and instead you can fully harness <code>exceptionally()</code> method when using the disscused <code>List&lt;String&gt; process</code> function</p>\n<pre><code>CompletableFuture&lt;List&lt;String&gt;&gt; cf = CompletableFuture\n    .supplyAsync(this::process)\n    .exceptionally(this::getFallbackListOfStrings) // Here you can catch e.g. {@code join}'s CompletionException\n    .thenAccept(this::processFurther);\n</code></pre>\n<p>You can find both <code>get()</code> and <code>join()</code> implementation <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/concurrent/CompletableFuture.java\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":23027967,"reputation":531,"user_id":17147888,"display_name":"Praj"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1639027391,"creation_date":1638985822,"answer_id":70279538,"question_id":45490316,"body_markdown":"In addition to the answer provided by Dawid, the get method is available in two flavors: \r\n\r\n    get()\r\n    get(Long timeout, TimeUnit timeUnit) \r\n\r\nThe second **get** takes wait time as an argument and waits for at most the provided wait time. \r\n\r\n    try {\r\n        System.out.println(cf.get(1000, TimeUnit.MILLISECONDS));\r\n    } catch (InterruptedException | ExecutionException | TimeoutException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n\r\nYou can refer to [this documentation][1] for more information.\r\n\r\n1. join()&#160;is defined in&#160;CompletableFuture&#160;whereas&#160;get()&#160;comes from interface&#160;Future\r\n2. join()&#160;throws unchecked exception whereas&#160;get()&#160;throws checked exceptions\r\n3. You can interrupt get()&#160;and then throws an&#160;InterruptedException\r\n4. get() method allows to specify the maximum wait time\r\n \r\n\r\n\r\n  [1]: https://tedblob.com/completablefuture-join-vs-get/","title":"CompletableFuture&lt;T&gt; class: join() vs get()","body":"<p>In addition to the answer provided by Dawid, the get method is available in two flavors:</p>\n<pre><code>get()\nget(Long timeout, TimeUnit timeUnit) \n</code></pre>\n<p>The second <strong>get</strong> takes wait time as an argument and waits for at most the provided wait time.</p>\n<pre><code>try {\n    System.out.println(cf.get(1000, TimeUnit.MILLISECONDS));\n} catch (InterruptedException | ExecutionException | TimeoutException ex) {\n    ex.printStackTrace();\n}\n</code></pre>\n<p>You can refer to <a href=\"https://tedblob.com/completablefuture-join-vs-get/\" rel=\"noreferrer\">this documentation</a> for more information.</p>\n<ol>\n<li>join() is defined in CompletableFuture whereas get() comes from interface Future</li>\n<li>join() throws unchecked exception whereas get() throws checked exceptions</li>\n<li>You can interrupt get() and then throws an InterruptedException</li>\n<li>get() method allows to specify the maximum wait time</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697752407,"creation_date":1697752407,"answer_id":77327286,"question_id":45490316,"body_markdown":"The other answers talk about &quot;one of the methods uses checked exceptions; the other does not&quot;, which is true, but misses some of the subtleties.\r\n\r\nBased upon reading the [documentation][1], let me try to break it down succinctly:\r\n\r\n* If the underlying task producing the value throws an exception, both [`get()`][2] and [`join()`][3] will throw a &quot;wrapper exception&quot; containing the thrown exception. In the case of `get()`, the wrapper exception will be an `ExecutionException`, which is a checked exception; in the case of `join()`, it will be a `CompletionException`, which is an unchecked exception. In either case, the wrapped exception (originating in the underlying task) will be the same.\r\n* It appears the `join()` _cannot_ throw an `InterruptedException`; see [CompletableFuture join vs get differences][4] for sample code.\r\n* Either method can throw a `CancellationException`.\r\n\r\nTo summarize, `join()` is a &quot;simplified&quot; form of `get()` that doesn&#39;t throw `InterruptedException`, and returns its value in an unchecked `CompletionException`. If you use instead `get()`, you&#39;ll be forced not only to catch an `ExecutionException` (which will contain the same wrapped exception as `CompletionException` would), but also catch `InterruptedException`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#get()\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#join()\r\n  [4]: https://tedblob.com/completablefuture-join-vs-get/","title":"CompletableFuture&lt;T&gt; class: join() vs get()","body":"<p>The other answers talk about &quot;one of the methods uses checked exceptions; the other does not&quot;, which is true, but misses some of the subtleties.</p>\n<p>Based upon reading the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html\" rel=\"nofollow noreferrer\">documentation</a>, let me try to break it down succinctly:</p>\n<ul>\n<li>If the underlying task producing the value throws an exception, both <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#get()\" rel=\"nofollow noreferrer\"><code>get()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/CompletableFuture.html#join()\" rel=\"nofollow noreferrer\"><code>join()</code></a> will throw a &quot;wrapper exception&quot; containing the thrown exception. In the case of <code>get()</code>, the wrapper exception will be an <code>ExecutionException</code>, which is a checked exception; in the case of <code>join()</code>, it will be a <code>CompletionException</code>, which is an unchecked exception. In either case, the wrapped exception (originating in the underlying task) will be the same.</li>\n<li>It appears the <code>join()</code> <em>cannot</em> throw an <code>InterruptedException</code>; see <a href=\"https://tedblob.com/completablefuture-join-vs-get/\" rel=\"nofollow noreferrer\">CompletableFuture join vs get differences</a> for sample code.</li>\n<li>Either method can throw a <code>CancellationException</code>.</li>\n</ul>\n<p>To summarize, <code>join()</code> is a &quot;simplified&quot; form of <code>get()</code> that doesn't throw <code>InterruptedException</code>, and returns its value in an unchecked <code>CompletionException</code>. If you use instead <code>get()</code>, you'll be forced not only to catch an <code>ExecutionException</code> (which will contain the same wrapped exception as <code>CompletionException</code> would), but also catch <code>InterruptedException</code>.</p>\n"}],"owner":{"account_id":8706767,"reputation":1881,"user_id":6514464,"display_name":"Nomeswaran"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101139,"favorite_count":0,"down_vote_count":0,"up_vote_count":187,"answer_count":3,"score":187,"last_activity_date":1697752407,"creation_date":1501779063,"question_id":45490316,"body_markdown":"What is the difference between the `get()` and `join()` methods of the `CompletableFuture&lt;T&gt;` class?\r\n\r\nBelow is the my code:\r\n\r\n\tList&lt;String&gt; process() {\r\n\r\n\t\tList&lt;String&gt; messages = Arrays.asList(&quot;Msg1&quot;, &quot;Msg2&quot;, &quot;Msg3&quot;, &quot;Msg4&quot;, &quot;Msg5&quot;, &quot;Msg6&quot;, &quot;Msg7&quot;, &quot;Msg8&quot;, &quot;Msg9&quot;,\r\n\t\t\t\t&quot;Msg10&quot;, &quot;Msg11&quot;, &quot;Msg12&quot;);\r\n\t\tMessageService messageService = new MessageService();\r\n\t\tExecutorService executor = Executors.newFixedThreadPool(4);\r\n\r\n\t\tList&lt;String&gt; mapResult = new ArrayList&lt;&gt;();\r\n\r\n\t\tCompletableFuture&lt;?&gt;[] fanoutRequestList = new CompletableFuture[messages.size()];\r\n\t\tint count = 0;\r\n\t\tfor (String msg : messages) {\r\n\t\t\tCompletableFuture&lt;?&gt; future = CompletableFuture\r\n\t\t\t\t\t.supplyAsync(() -&gt; messageService.sendNotification(msg), executor).exceptionally(ex -&gt; &quot;Error&quot;)\r\n\t\t\t\t\t.thenAccept(mapResult::add);\r\n\r\n\t\t\tfanoutRequestList[count++] = future;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tCompletableFuture.allOf(fanoutRequestList).get();\r\n          //CompletableFuture.allOf(fanoutRequestList).join();\r\n\t\t} catch (InterruptedException | ExecutionException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\treturn mapResult.stream().filter(s -&gt; !s.equalsIgnoreCase(&quot;Error&quot;)).collect(Collectors.toList());\r\n\t}\r\n\r\n\r\nI have tried with both methods but I see no difference in result. ","title":"CompletableFuture&lt;T&gt; class: join() vs get()","body":"<p>What is the difference between the <code>get()</code> and <code>join()</code> methods of the <code>CompletableFuture&lt;T&gt;</code> class?</p>\n<p>Below is the my code:</p>\n<pre><code>List&lt;String&gt; process() {\n\n    List&lt;String&gt; messages = Arrays.asList(&quot;Msg1&quot;, &quot;Msg2&quot;, &quot;Msg3&quot;, &quot;Msg4&quot;, &quot;Msg5&quot;, &quot;Msg6&quot;, &quot;Msg7&quot;, &quot;Msg8&quot;, &quot;Msg9&quot;,\n            &quot;Msg10&quot;, &quot;Msg11&quot;, &quot;Msg12&quot;);\n    MessageService messageService = new MessageService();\n    ExecutorService executor = Executors.newFixedThreadPool(4);\n\n    List&lt;String&gt; mapResult = new ArrayList&lt;&gt;();\n\n    CompletableFuture&lt;?&gt;[] fanoutRequestList = new CompletableFuture[messages.size()];\n    int count = 0;\n    for (String msg : messages) {\n        CompletableFuture&lt;?&gt; future = CompletableFuture\n                .supplyAsync(() -&gt; messageService.sendNotification(msg), executor).exceptionally(ex -&gt; &quot;Error&quot;)\n                .thenAccept(mapResult::add);\n\n        fanoutRequestList[count++] = future;\n    }\n\n    try {\n        CompletableFuture.allOf(fanoutRequestList).get();\n      //CompletableFuture.allOf(fanoutRequestList).join();\n    } catch (InterruptedException | ExecutionException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    return mapResult.stream().filter(s -&gt; !s.equalsIgnoreCase(&quot;Error&quot;)).collect(Collectors.toList());\n}\n</code></pre>\n<p>I have tried with both methods but I see no difference in result.</p>\n"},{"tags":["java","android","android-recyclerview","android-videoview"],"owner":{"account_id":18144463,"reputation":390,"user_id":13197940,"display_name":"Daniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697750700,"creation_date":1697750700,"question_id":77327180,"body_markdown":"A VideoView, I played in a RecyclerView.ViewHolder, does not play. Here my source code:\r\n\r\n```\r\nif (holder instanceof VideoViewHolder) {\r\n            VideoViewHolder itemViewHolder = (VideoViewHolder) holder;\r\n            dateTextView = itemViewHolder.item.tvTime;\r\n            contentTextView = itemViewHolder.item.tvText;\r\n            btnShowMore = itemViewHolder.item.btnShowMore;\r\n\r\n            if (mode == MODE_NORMAL) {\r\n                String videoUrl = newsMessage.getVideo();\r\n\r\n                if (videoUrl != null) {\r\n                    itemViewHolder.item.btnPlay.setVisibility(View.GONE);\r\n                    itemViewHolder.item.btnPause.setVisibility(View.GONE);\r\n\r\n                    // Set the video URI\r\n                    itemViewHolder.item.videoView.setVideoURI(Uri.parse(videoUrl));\r\n\r\n                    // Handle video loading error\r\n                    itemViewHolder.item.videoView.setOnErrorListener((mediaPlayer, i, i1) -&gt; {\r\n                        itemViewHolder.item.containerVideo.setVisibility(View.GONE);\r\n                        itemViewHolder.item.containerError.setVisibility(View.VISIBLE);\r\n\r\n                        return true;\r\n                    });\r\n\r\n                    // Update UI when playback is ready\r\n                    itemViewHolder.item.videoView.setOnPreparedListener(mp -&gt; {\r\n                        itemViewHolder.item.videoProgressBar.setVisibility(View.GONE);\r\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\r\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\r\n\r\n                        itemViewHolder.item.videoView.start();\r\n                        itemViewHolder.item.videoView.pause();\r\n                    });\r\n\r\n                    // Update UI when when playback completed\r\n                    itemViewHolder.item.videoView.setOnCompletionListener(mp -&gt; {\r\n                        itemViewHolder.videoPlaying = false;\r\n\r\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\r\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\r\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\r\n                    });\r\n\r\n                    // Start playback when play button is pressed\r\n                    itemViewHolder.item.btnPlay.setOnClickListener(v -&gt; {\r\n                        itemViewHolder.item.videoView.start();\r\n                        itemViewHolder.videoPlaying = true;\r\n\r\n                        itemViewHolder.item.btnPlay.setVisibility(View.GONE);\r\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\r\n                        itemViewHolder.item.videoOverlay.setVisibility(View.GONE);\r\n                    });\r\n\r\n                    // Stop playback when pause button is pressed\r\n                    itemViewHolder.item.btnPause.setOnClickListener(v -&gt; {\r\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\r\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\r\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\r\n\r\n                        itemViewHolder.item.videoView.pause();\r\n                        itemViewHolder.videoPlaying = false;\r\n                    });\r\n\r\n                    // Show play or pause button (depending on playback state) when touching the video view\r\n                    itemViewHolder.item.videoView.setOnClickListener(v -&gt; {\r\n                        if (itemViewHolder.videoPlaying) {\r\n                            if (itemViewHolder.item.btnPause.getVisibility() == View.GONE) {\r\n                                itemViewHolder.item.btnPause.setVisibility(View.VISIBLE);\r\n                                itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\r\n                            } else {\r\n                                itemViewHolder.item.btnPause.setVisibility(View.GONE);\r\n                                itemViewHolder.item.videoOverlay.setVisibility(View.GONE);\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    itemViewHolder.item.containerVideo.setVisibility(View.VISIBLE);\r\n                    itemViewHolder.item.containerError.setVisibility(View.GONE);\r\n                } else {\r\n                    itemViewHolder.item.containerVideo.setVisibility(View.GONE);\r\n                    itemViewHolder.item.containerError.setVisibility(View.VISIBLE);\r\n                }\r\n            } else {\r\n                itemViewHolder.item.containerVideo.setVisibility(View.GONE);\r\n                itemViewHolder.item.containerError.setVisibility(View.GONE);\r\n            }\r\n        }\r\n```\r\n\r\nThe problem is, that I also have another ReyclerView in which the video plays. The URL is not broken, and returns HTTP 200. I have been searching for a solution for hours. Any ideas where the problem is? I really have no Idea anymore.","title":"VideoView in RecyclerView Adapter does not play","body":"<p>A VideoView, I played in a RecyclerView.ViewHolder, does not play. Here my source code:</p>\n<pre><code>if (holder instanceof VideoViewHolder) {\n            VideoViewHolder itemViewHolder = (VideoViewHolder) holder;\n            dateTextView = itemViewHolder.item.tvTime;\n            contentTextView = itemViewHolder.item.tvText;\n            btnShowMore = itemViewHolder.item.btnShowMore;\n\n            if (mode == MODE_NORMAL) {\n                String videoUrl = newsMessage.getVideo();\n\n                if (videoUrl != null) {\n                    itemViewHolder.item.btnPlay.setVisibility(View.GONE);\n                    itemViewHolder.item.btnPause.setVisibility(View.GONE);\n\n                    // Set the video URI\n                    itemViewHolder.item.videoView.setVideoURI(Uri.parse(videoUrl));\n\n                    // Handle video loading error\n                    itemViewHolder.item.videoView.setOnErrorListener((mediaPlayer, i, i1) -&gt; {\n                        itemViewHolder.item.containerVideo.setVisibility(View.GONE);\n                        itemViewHolder.item.containerError.setVisibility(View.VISIBLE);\n\n                        return true;\n                    });\n\n                    // Update UI when playback is ready\n                    itemViewHolder.item.videoView.setOnPreparedListener(mp -&gt; {\n                        itemViewHolder.item.videoProgressBar.setVisibility(View.GONE);\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\n\n                        itemViewHolder.item.videoView.start();\n                        itemViewHolder.item.videoView.pause();\n                    });\n\n                    // Update UI when when playback completed\n                    itemViewHolder.item.videoView.setOnCompletionListener(mp -&gt; {\n                        itemViewHolder.videoPlaying = false;\n\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\n                    });\n\n                    // Start playback when play button is pressed\n                    itemViewHolder.item.btnPlay.setOnClickListener(v -&gt; {\n                        itemViewHolder.item.videoView.start();\n                        itemViewHolder.videoPlaying = true;\n\n                        itemViewHolder.item.btnPlay.setVisibility(View.GONE);\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\n                        itemViewHolder.item.videoOverlay.setVisibility(View.GONE);\n                    });\n\n                    // Stop playback when pause button is pressed\n                    itemViewHolder.item.btnPause.setOnClickListener(v -&gt; {\n                        itemViewHolder.item.btnPause.setVisibility(View.GONE);\n                        itemViewHolder.item.btnPlay.setVisibility(View.VISIBLE);\n                        itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\n\n                        itemViewHolder.item.videoView.pause();\n                        itemViewHolder.videoPlaying = false;\n                    });\n\n                    // Show play or pause button (depending on playback state) when touching the video view\n                    itemViewHolder.item.videoView.setOnClickListener(v -&gt; {\n                        if (itemViewHolder.videoPlaying) {\n                            if (itemViewHolder.item.btnPause.getVisibility() == View.GONE) {\n                                itemViewHolder.item.btnPause.setVisibility(View.VISIBLE);\n                                itemViewHolder.item.videoOverlay.setVisibility(View.VISIBLE);\n                            } else {\n                                itemViewHolder.item.btnPause.setVisibility(View.GONE);\n                                itemViewHolder.item.videoOverlay.setVisibility(View.GONE);\n                            }\n                        }\n                    });\n\n                    itemViewHolder.item.containerVideo.setVisibility(View.VISIBLE);\n                    itemViewHolder.item.containerError.setVisibility(View.GONE);\n                } else {\n                    itemViewHolder.item.containerVideo.setVisibility(View.GONE);\n                    itemViewHolder.item.containerError.setVisibility(View.VISIBLE);\n                }\n            } else {\n                itemViewHolder.item.containerVideo.setVisibility(View.GONE);\n                itemViewHolder.item.containerError.setVisibility(View.GONE);\n            }\n        }\n</code></pre>\n<p>The problem is, that I also have another ReyclerView in which the video plays. The URL is not broken, and returns HTTP 200. I have been searching for a solution for hours. Any ideas where the problem is? I really have no Idea anymore.</p>\n"},{"tags":["java","java-threads","android-thread","android-threading"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1697739467,"post_id":77325919,"comment_id":136321055,"body_markdown":"Please [edit] your question to include your source code as a working [mcve], which can be compiled and tested by others.","body":"Please <a href=\"https://stackoverflow.com/posts/77325919/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":2,"creation_date":1697743472,"post_id":77325919,"comment_id":136321681,"body_markdown":"From this Baeldung [article](https://www.baeldung.com/java-synchronized#:~:text=When%20we%20use%20a%20synchronized,them%20at%20the%20same%20time.) :  _all synchronized blocks of the same object can have only one thread executing them at the same time_  So the current thread is already in a synchronized method, and the new thread cannot execute the other synchronized method since it&#39;s the same object.","body":"From this Baeldung <a href=\"https://www.baeldung.com/java-synchronized#:~:text=When%20we%20use%20a%20synchronized,them%20at%20the%20same%20time.\" rel=\"nofollow noreferrer\">article</a> :  <i>all synchronized blocks of the same object can have only one thread executing them at the same time</i>  So the current thread is already in a synchronized method, and the new thread cannot execute the other synchronized method since it&#39;s the same object."},{"owner":{"account_id":145567,"reputation":17881,"user_id":355456,"accept_rate":70,"display_name":"Hong"},"score":0,"creation_date":1697745508,"post_id":77325919,"comment_id":136321967,"body_markdown":"@Progman I edited the code so that the two methods can be copied to any class and fooMethod can be called anywhere to reproduce this.","body":"@Progman I edited the code so that the two methods can be copied to any class and fooMethod can be called anywhere to reproduce this."},{"owner":{"account_id":145567,"reputation":17881,"user_id":355456,"accept_rate":70,"display_name":"Hong"},"score":0,"creation_date":1697745686,"post_id":77325919,"comment_id":136321987,"body_markdown":"@AndrewS That makes sense. Could you turn your comment into an answer for me to accept?","body":"@AndrewS That makes sense. Could you turn your comment into an answer for me to accept?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1697747564,"post_id":77325919,"comment_id":136322249,"body_markdown":"@Hong The problem is not reproducible. Please edit your question to include the source code where the `dummyMethod()` is called once immediately and then called additional nine times after your `fooMethod()` method has finished.","body":"@Hong The problem is not reproducible. Please edit your question to include the source code where the <code>dummyMethod()</code> is called once immediately and then called additional nine times after your <code>fooMethod()</code> method has finished."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":2,"creation_date":1697748048,"post_id":77325919,"comment_id":136322317,"body_markdown":"The crux here is that synchronizing on the same object twice in the *same* thread is a no-op (the inner `synchronized` block just knows not to do anything). But synchronizing on the same object in a brand new thread requires blocking.","body":"The crux here is that synchronizing on the same object twice in the <i>same</i> thread is a no-op (the inner <code>synchronized</code> block just knows not to do anything). But synchronizing on the same object in a brand new thread requires blocking."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1697749420,"post_id":77325919,"comment_id":136322509,"body_markdown":"@Progman Thank you! I was really starting to doubt my sanity looking at OP&#39;s code and wondering how it&#39;s possibly logging immediately in the second block.","body":"@Progman Thank you! I was really starting to doubt my sanity looking at OP&#39;s code and wondering how it&#39;s possibly logging immediately in the second block."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697750608,"creation_date":1697745863,"answer_id":77326781,"question_id":77325919,"body_markdown":"[Caveat: I am not an expert on Java concurrency.]\r\n\r\nI made a complete self-contained version of your code.\r\n\r\nThis code uses [`CopyOnWriteArrayList`][1] as a thread-safe log.\r\n\r\n```java\r\npackage work.basil.example.threading;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.SequencedCollection;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\n\r\npublic class App\r\n{\r\n    private SequencedCollection &lt; String &gt; log = new CopyOnWriteArrayList &lt;&gt; ( );  // Thread-safe `List` implementation.\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        this.log.add ( &quot;info | demo start | &quot; + Instant.now ( ) );\r\n//        this.fooMethod ( );\r\n        this.fooMethodThreaded ();\r\n        this.log.add ( &quot;info | demo end | &quot; + Instant.now ( ) );\r\n        log.forEach ( System.out :: println );\r\n    }\r\n\r\n    private synchronized void dummyMethod ( )\r\n    {\r\n        this.log.add ( &quot;debug | do nothing in dummyMethod() | &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private synchronized void fooMethod ( )\r\n    {\r\n        for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\r\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        this.log.add ( &quot;debug | fooMethod() finished | &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private synchronized void fooMethodThreaded ( )\r\n    {\r\n        new Thread ( ( ) -&gt;\r\n        {\r\n            for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\r\n        } ).start ( );\r\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        this.log.add ( &quot;debug | fooMethodThreaded() finished | &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\ninfo | demo start | 2023-10-19T19:42:38.662271Z\r\ndebug | fooMethodThreaded() finished | 2023-10-19T19:42:48.708631Z\r\ninfo | demo end | 2023-10-19T19:42:48.709687Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.714712Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715071Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715137Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715205Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715264Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715321Z\r\n```\r\n\r\nExamine the timestamps. Notice that after the demo starts nothing gets logged for a full ten seconds. Why the wait? We have to look at a few facts.\r\n\r\nBe aware that our two methods, `dummyMethod` &amp; `fooMethodThreaded`, are both instance methods on the same class, `App`, and both are declared as `synchronized`. Synchronized methods on the same class will synchronize on the whole instance, not on each method separately. So, synchronized methods on the same object will block each other; only one can run at a time. See [*Java synchronized method lock on object, or method?*](https://stackoverflow.com/q/3047564/642706).\r\n\r\nAdd the fact noted in the [Comment by Andrew S][2]: \r\n\r\n&gt; all synchronized blocks of the same object can have only one thread executing them at the same time\r\n\r\nYou have an instance of `App` running in the main thread. There we run the `fooMethodThreaded` method. That `synchronized` method gets a lock on our one and only `App` instance. Then we spawn a thread to run the other method `dummyMethod` on the same single instance of `App`. \r\n\r\nAt this point, we now we have a lock conflict. The `fooMethodThreaded` already holds the lock on our instance of `App` named `app`. So when the other method  `dummyMethod`, being `synchronized`, tries to obtain the same lock on the same `app` object, it finds the lock already taken. So the `dummyMethod` blocks, waiting for that lock to release.\r\n\r\nAnd so we sit waiting. Meanwhile, the original thread that holds the lock on the singular `App` instance named `app` is sleeping. That main thread sleeps for ten seconds. At the end of that ten seconds, the `fooMethodThreaded` method of our `app` instance exits. The lock on `app` then releases, as the synchronized method exited.\r\n\r\nWith the original lock released, then we see a cascade of log entries as the background thread performs its work, with successive calls to `dummyMethod` able to access the lock on `app` each time. \r\n\r\nNotice that we do *not* see ten entries in the log for &quot;do nothing in dummyMethod()&quot;. That is because our `main` method has moved on to its `log.forEach` *before* the background thread has completed. \r\n\r\n## Solution\r\n\r\nIf you truly wanted to perform this task ten times on background thread(s), I would suggest something like the code seen below. \r\n\r\nIf you want to limit the running of our ten tasks to only ten at a time, use something other than `synchronized` on the method. We have learned that having two methods on the same class using `synchronized` will block each other. That dual-method-blocking is not our goal. So use another approach to locking. One approach is to synchronize on a separate object *within* the method rather than synchronize *on* the method. See [this Answer](https://stackoverflow.com/a/5483385/642706) on the Question, [*Other way to synchronize method*](https://stackoverflow.com/q/5482981/642706). I would prefer using an explicit approach as shown in [this Answer](https://stackoverflow.com/a/5483028/642706) on that same Question. See also another Question, [*can synchronized at method level be replaced by Lock?*](https://stackoverflow.com/q/39983070/642706).\r\n\r\nIn modern Java, we rarely address `Thread` directly. Instead, use the Executors framework added to Java 5. \r\n\r\nTake advantage of the fact that `ExecutorService` recently became `AutoCloseable`. So we can use it in try-with-resources syntax.\r\n\r\nIf your task is not CPU-bound, that is, if it does some blocking, use [virtual threads][3].\r\n\r\n```java\r\nprivate void fooMethodWithExecutorService ( )\r\n{\r\n    this.onlyTenTasksAtATimeLock.lock ( );\r\n    try\r\n    {\r\n        try (\r\n                ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor ( ) ;\r\n        )\r\n        {\r\n            int countTaskExecutions = 10;\r\n            for ( int index = 0 ; index &lt; countTaskExecutions ; index++ )\r\n            {\r\n                executorService.submit ( this :: dummyMethod );\r\n            }\r\n        }\r\n    }\r\n    finally\r\n    {\r\n        this.onlyTenTasksAtATimeLock.unlock ( );\r\n    }\r\n}\r\n```\r\n\r\nWith this approach, we see the demo start and end at the very start and the very end. And we see each and every desired execution of our task make its entry in the log.\r\n\r\n```none\r\ninfo | demo start | 2023-10-19T21:19:42.158048Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.165986Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166079Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166119Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166210Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166234Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166268Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166294Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166318Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166334Z\r\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166370Z\r\ninfo | demo end | 2023-10-19T21:19:42.166437Z\r\n```\r\n\r\nComplete app code:\r\n\r\n```java\r\npackage work.basil.example.threading;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.SequencedCollection;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\npublic class App\r\n{\r\n    private final SequencedCollection &lt; String &gt; log = new CopyOnWriteArrayList &lt;&gt; ( );  // Thread-safe `List` implementation.\r\n    private final Lock onlyTenTasksAtATimeLock = new ReentrantLock ( );\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        this.log.add ( &quot;info | demo start | &quot; + Instant.now ( ) );\r\n//        this.fooMethod ( );\r\n//        this.fooMethodThreaded ();\r\n        this.fooMethodWithExecutorService ( );\r\n        this.log.add ( &quot;info | demo end | &quot; + Instant.now ( ) );\r\n        log.forEach ( System.out :: println );\r\n    }\r\n\r\n    private void fooMethodWithExecutorService ( )\r\n    {\r\n        this.onlyTenTasksAtATimeLock.lock ( );\r\n        try\r\n        {\r\n            try (\r\n                    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor ( ) ;\r\n            )\r\n            {\r\n                int countTaskExecutions = 10;\r\n                for ( int index = 0 ; index &lt; countTaskExecutions ; index++ )\r\n                {\r\n                    executorService.submit ( this :: dummyMethod );\r\n                }\r\n            }\r\n        }\r\n        finally\r\n        {\r\n            this.onlyTenTasksAtATimeLock.unlock ( );\r\n        }\r\n    }\r\n\r\n    private synchronized void dummyMethod ( )\r\n    {\r\n        this.log.add ( &quot;debug | do nothing in dummyMethod() | &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private synchronized void fooMethod ( )\r\n    {\r\n        for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\r\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        this.log.add ( &quot;debug | fooMethod() finished | &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private synchronized void fooMethodThreaded ( )\r\n    {\r\n        new Thread ( ( ) -&gt;\r\n        {\r\n            for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\r\n        } ).start ( );\r\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        this.log.add ( &quot;debug | fooMethodThreaded() finished | &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html#add(E)\r\n  [2]: https://stackoverflow.com/questions/77325919/call-a-synchronized-method-with-a-new-thread-in-a-synchronized-method#comment136321681_77325919\r\n  [3]: https://openjdk.org/jeps/444","title":"Call a synchronized method with a new thread in a synchronized method","body":"<p>[Caveat: I am not an expert on Java concurrency.]</p>\n<p>I made a complete self-contained version of your code.</p>\n<p>This code uses <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/CopyOnWriteArrayList.html#add(E)\" rel=\"nofollow noreferrer\"><code>CopyOnWriteArrayList</code></a> as a thread-safe log.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.threading;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.SequencedCollection;\nimport java.util.concurrent.CopyOnWriteArrayList;\n\npublic class App\n{\n    private SequencedCollection &lt; String &gt; log = new CopyOnWriteArrayList &lt;&gt; ( );  // Thread-safe `List` implementation.\n\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        this.log.add ( &quot;info | demo start | &quot; + Instant.now ( ) );\n//        this.fooMethod ( );\n        this.fooMethodThreaded ();\n        this.log.add ( &quot;info | demo end | &quot; + Instant.now ( ) );\n        log.forEach ( System.out :: println );\n    }\n\n    private synchronized void dummyMethod ( )\n    {\n        this.log.add ( &quot;debug | do nothing in dummyMethod() | &quot; + Instant.now ( ) );\n    }\n\n    private synchronized void fooMethod ( )\n    {\n        for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        this.log.add ( &quot;debug | fooMethod() finished | &quot; + Instant.now ( ) );\n    }\n\n    private synchronized void fooMethodThreaded ( )\n    {\n        new Thread ( ( ) -&gt;\n        {\n            for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\n        } ).start ( );\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        this.log.add ( &quot;debug | fooMethodThreaded() finished | &quot; + Instant.now ( ) );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>info | demo start | 2023-10-19T19:42:38.662271Z\ndebug | fooMethodThreaded() finished | 2023-10-19T19:42:48.708631Z\ninfo | demo end | 2023-10-19T19:42:48.709687Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.714712Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715071Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715137Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715205Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715264Z\ndebug | do nothing in dummyMethod() | 2023-10-19T19:42:48.715321Z\n</code></pre>\n<p>Examine the timestamps. Notice that after the demo starts nothing gets logged for a full ten seconds. Why the wait? We have to look at a few facts.</p>\n<p>Be aware that our two methods, <code>dummyMethod</code> &amp; <code>fooMethodThreaded</code>, are both instance methods on the same class, <code>App</code>, and both are declared as <code>synchronized</code>. Synchronized methods on the same class will synchronize on the whole instance, not on each method separately. So, synchronized methods on the same object will block each other; only one can run at a time. See <a href=\"https://stackoverflow.com/q/3047564/642706\"><em>Java synchronized method lock on object, or method?</em></a>.</p>\n<p>Add the fact noted in the <a href=\"https://stackoverflow.com/questions/77325919/call-a-synchronized-method-with-a-new-thread-in-a-synchronized-method#comment136321681_77325919\">Comment by Andrew S</a>:</p>\n<blockquote>\n<p>all synchronized blocks of the same object can have only one thread executing them at the same time</p>\n</blockquote>\n<p>You have an instance of <code>App</code> running in the main thread. There we run the <code>fooMethodThreaded</code> method. That <code>synchronized</code> method gets a lock on our one and only <code>App</code> instance. Then we spawn a thread to run the other method <code>dummyMethod</code> on the same single instance of <code>App</code>.</p>\n<p>At this point, we now we have a lock conflict. The <code>fooMethodThreaded</code> already holds the lock on our instance of <code>App</code> named <code>app</code>. So when the other method  <code>dummyMethod</code>, being <code>synchronized</code>, tries to obtain the same lock on the same <code>app</code> object, it finds the lock already taken. So the <code>dummyMethod</code> blocks, waiting for that lock to release.</p>\n<p>And so we sit waiting. Meanwhile, the original thread that holds the lock on the singular <code>App</code> instance named <code>app</code> is sleeping. That main thread sleeps for ten seconds. At the end of that ten seconds, the <code>fooMethodThreaded</code> method of our <code>app</code> instance exits. The lock on <code>app</code> then releases, as the synchronized method exited.</p>\n<p>With the original lock released, then we see a cascade of log entries as the background thread performs its work, with successive calls to <code>dummyMethod</code> able to access the lock on <code>app</code> each time.</p>\n<p>Notice that we do <em>not</em> see ten entries in the log for &quot;do nothing in dummyMethod()&quot;. That is because our <code>main</code> method has moved on to its <code>log.forEach</code> <em>before</em> the background thread has completed.</p>\n<h2>Solution</h2>\n<p>If you truly wanted to perform this task ten times on background thread(s), I would suggest something like the code seen below.</p>\n<p>If you want to limit the running of our ten tasks to only ten at a time, use something other than <code>synchronized</code> on the method. We have learned that having two methods on the same class using <code>synchronized</code> will block each other. That dual-method-blocking is not our goal. So use another approach to locking. One approach is to synchronize on a separate object <em>within</em> the method rather than synchronize <em>on</em> the method. See <a href=\"https://stackoverflow.com/a/5483385/642706\">this Answer</a> on the Question, <a href=\"https://stackoverflow.com/q/5482981/642706\"><em>Other way to synchronize method</em></a>. I would prefer using an explicit approach as shown in <a href=\"https://stackoverflow.com/a/5483028/642706\">this Answer</a> on that same Question. See also another Question, <a href=\"https://stackoverflow.com/q/39983070/642706\"><em>can synchronized at method level be replaced by Lock?</em></a>.</p>\n<p>In modern Java, we rarely address <code>Thread</code> directly. Instead, use the Executors framework added to Java 5.</p>\n<p>Take advantage of the fact that <code>ExecutorService</code> recently became <code>AutoCloseable</code>. So we can use it in try-with-resources syntax.</p>\n<p>If your task is not CPU-bound, that is, if it does some blocking, use <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void fooMethodWithExecutorService ( )\n{\n    this.onlyTenTasksAtATimeLock.lock ( );\n    try\n    {\n        try (\n                ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor ( ) ;\n        )\n        {\n            int countTaskExecutions = 10;\n            for ( int index = 0 ; index &lt; countTaskExecutions ; index++ )\n            {\n                executorService.submit ( this :: dummyMethod );\n            }\n        }\n    }\n    finally\n    {\n        this.onlyTenTasksAtATimeLock.unlock ( );\n    }\n}\n</code></pre>\n<p>With this approach, we see the demo start and end at the very start and the very end. And we see each and every desired execution of our task make its entry in the log.</p>\n<pre class=\"lang-none prettyprint-override\"><code>info | demo start | 2023-10-19T21:19:42.158048Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.165986Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166079Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166119Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166210Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166234Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166268Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166294Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166318Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166334Z\ndebug | do nothing in dummyMethod() | 2023-10-19T21:19:42.166370Z\ninfo | demo end | 2023-10-19T21:19:42.166437Z\n</code></pre>\n<p>Complete app code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.threading;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.SequencedCollection;\nimport java.util.concurrent.CopyOnWriteArrayList;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.locks.Lock;\nimport java.util.concurrent.locks.ReentrantLock;\n\npublic class App\n{\n    private final SequencedCollection &lt; String &gt; log = new CopyOnWriteArrayList &lt;&gt; ( );  // Thread-safe `List` implementation.\n    private final Lock onlyTenTasksAtATimeLock = new ReentrantLock ( );\n\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        this.log.add ( &quot;info | demo start | &quot; + Instant.now ( ) );\n//        this.fooMethod ( );\n//        this.fooMethodThreaded ();\n        this.fooMethodWithExecutorService ( );\n        this.log.add ( &quot;info | demo end | &quot; + Instant.now ( ) );\n        log.forEach ( System.out :: println );\n    }\n\n    private void fooMethodWithExecutorService ( )\n    {\n        this.onlyTenTasksAtATimeLock.lock ( );\n        try\n        {\n            try (\n                    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor ( ) ;\n            )\n            {\n                int countTaskExecutions = 10;\n                for ( int index = 0 ; index &lt; countTaskExecutions ; index++ )\n                {\n                    executorService.submit ( this :: dummyMethod );\n                }\n            }\n        }\n        finally\n        {\n            this.onlyTenTasksAtATimeLock.unlock ( );\n        }\n    }\n\n    private synchronized void dummyMethod ( )\n    {\n        this.log.add ( &quot;debug | do nothing in dummyMethod() | &quot; + Instant.now ( ) );\n    }\n\n    private synchronized void fooMethod ( )\n    {\n        for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        this.log.add ( &quot;debug | fooMethod() finished | &quot; + Instant.now ( ) );\n    }\n\n    private synchronized void fooMethodThreaded ( )\n    {\n        new Thread ( ( ) -&gt;\n        {\n            for ( int i = 0 ; i &lt; 10 ; i++ ) dummyMethod ( );\n        } ).start ( );\n        try { Thread.sleep ( Duration.ofSeconds ( 10 ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        this.log.add ( &quot;debug | fooMethodThreaded() finished | &quot; + Instant.now ( ) );\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697746163,"creation_date":1697746163,"answer_id":77326801,"question_id":77325919,"body_markdown":"From my comment - \r\n\r\nFrom this Baeldung [article](https://www.baeldung.com/java-synchronized#:~:text=When%20we%20use%20a%20synchronized,them%20at%20the%20same%20time.): \r\n_all synchronized blocks of the same object can have only one thread executing them at the same time_\r\n\r\n So the current thread is already in a synchronized method, and the new thread cannot immediately execute `dummyMethod()` since it&#39;s the same object.\r\n\r\nSlight mod to the original code, showing use of a new instance does allow the new Thread to immediately run `dummyMethod()`:\r\n\r\n    package sandbox;\r\n    \r\n    public class SyncTest {\r\n    \r\n        public static void main(String[] args) throws InterruptedException {\r\n            var test = new SyncTest();\r\n            test.fooMethod();\r\n        }\r\n    \r\n        private synchronized void dummyMethod() {\r\n            System.out.println(&quot;do nothing in dummyMethod()&quot;);\r\n        }\r\n    \r\n        private synchronized void fooMethod() throws InterruptedException {\r\n            var t = new SyncTest(); // new instance will have its own monitor\r\n            new Thread(() -&gt; {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    t.dummyMethod();\r\n                }\r\n            }).start();\r\n    \r\n            Thread.sleep(10000);\r\n            System.out.println(&quot;fooMethod() finished&quot;);\r\n        }\r\n    }\r\n\r\n","title":"Call a synchronized method with a new thread in a synchronized method","body":"<p>From my comment -</p>\n<p>From this Baeldung <a href=\"https://www.baeldung.com/java-synchronized#:%7E:text=When%20we%20use%20a%20synchronized,them%20at%20the%20same%20time.\" rel=\"nofollow noreferrer\">article</a>:\n<em>all synchronized blocks of the same object can have only one thread executing them at the same time</em></p>\n<p>So the current thread is already in a synchronized method, and the new thread cannot immediately execute <code>dummyMethod()</code> since it's the same object.</p>\n<p>Slight mod to the original code, showing use of a new instance does allow the new Thread to immediately run <code>dummyMethod()</code>:</p>\n<pre><code>package sandbox;\n\npublic class SyncTest {\n\n    public static void main(String[] args) throws InterruptedException {\n        var test = new SyncTest();\n        test.fooMethod();\n    }\n\n    private synchronized void dummyMethod() {\n        System.out.println(&quot;do nothing in dummyMethod()&quot;);\n    }\n\n    private synchronized void fooMethod() throws InterruptedException {\n        var t = new SyncTest(); // new instance will have its own monitor\n        new Thread(() -&gt; {\n            for (int i = 0; i &lt; 10; i++) {\n                t.dummyMethod();\n            }\n        }).start();\n\n        Thread.sleep(10000);\n        System.out.println(&quot;fooMethod() finished&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":145567,"reputation":17881,"user_id":355456,"accept_rate":70,"display_name":"Hong"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77326801,"answer_count":2,"score":1,"last_activity_date":1697750608,"creation_date":1697736479,"question_id":77325919,"body_markdown":"We have a task to perform, `dummyMethod`.\r\n\r\n    private synchronized void dummyMethod(){\r\n        Log.d(&quot;debug&quot;, &quot;do nothing in dummyMethod()&quot;)\r\n    }\r\n\r\nWe run that task several times.\r\n\r\n    private synchronized void fooMethod() throws InterruptedException{\r\n        \r\n        for (int i = 0; i &lt; 10; i++){\r\n            dummyMethod();\r\n        }\r\n       \r\n       Thread.sleep(10000)\r\n       Log.d(&quot;debug&quot;, &quot;fooMethod() finished&quot;)\r\n    }\r\n\r\nWith the above code synchronized `dummyMethod()` is executed 10 times immediately. \r\n\r\nHowever, with the following code, `dummyMethod()` is called only once immediately, and only after `fooMethod()` is finished did it get finished and executed 9 more times. \r\n\r\n    private synchronized void fooMethod() throws InterruptedException{\r\n        \r\n     new Thread(()-&gt;{\r\n        for (int i = 0; i &lt; 10; i++){\r\n            dummyMethod();\r\n        }\r\n     }).start();\r\n       \r\n       Thread.sleep(10000)\r\n       Log.d(&quot;debug&quot;, &quot;fooMethod() finished&quot;)\r\n    }\r\n\r\nIn this case, logcat shows:\r\n\r\n    Long monitor contention with owner main (18077) at void ...fooMethod()(MainActivity.java:1106) waiters=0 in void ...MainActivity.dummyMethod() for 10.001s\r\n\r\nI thought it would not block with a new thread in the latter case. Could anyone shed some light on this? How can a synchronized method run another synchronized method multiple times asynchronously in a new thread?","title":"Call a synchronized method with a new thread in a synchronized method","body":"<p>We have a task to perform, <code>dummyMethod</code>.</p>\n<pre><code>private synchronized void dummyMethod(){\n    Log.d(&quot;debug&quot;, &quot;do nothing in dummyMethod()&quot;)\n}\n</code></pre>\n<p>We run that task several times.</p>\n<pre><code>private synchronized void fooMethod() throws InterruptedException{\n    \n    for (int i = 0; i &lt; 10; i++){\n        dummyMethod();\n    }\n   \n   Thread.sleep(10000)\n   Log.d(&quot;debug&quot;, &quot;fooMethod() finished&quot;)\n}\n</code></pre>\n<p>With the above code synchronized <code>dummyMethod()</code> is executed 10 times immediately.</p>\n<p>However, with the following code, <code>dummyMethod()</code> is called only once immediately, and only after <code>fooMethod()</code> is finished did it get finished and executed 9 more times.</p>\n<pre><code>private synchronized void fooMethod() throws InterruptedException{\n    \n new Thread(()-&gt;{\n    for (int i = 0; i &lt; 10; i++){\n        dummyMethod();\n    }\n }).start();\n   \n   Thread.sleep(10000)\n   Log.d(&quot;debug&quot;, &quot;fooMethod() finished&quot;)\n}\n</code></pre>\n<p>In this case, logcat shows:</p>\n<pre><code>Long monitor contention with owner main (18077) at void ...fooMethod()(MainActivity.java:1106) waiters=0 in void ...MainActivity.dummyMethod() for 10.001s\n</code></pre>\n<p>I thought it would not block with a new thread in the latter case. Could anyone shed some light on this? How can a synchronized method run another synchronized method multiple times asynchronously in a new thread?</p>\n"},{"tags":["java","user-interface","javafx","tabs","drag-and-drop"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1694424153,"post_id":77075467,"comment_id":135884379,"body_markdown":"Drag and drop is a different question from your title. Oracle provide a [tutorial](https://docs.oracle.com/javase/8/javafx/events-tutorial/drag-drop.htm) for the operation. You have to code the logic based on  events, there is no “label type” for such a thing.  Ask a new specific question if you have more questions.","body":"Drag and drop is a different question from your title. Oracle provide a <a href=\"https://docs.oracle.com/javase/8/javafx/events-tutorial/drag-drop.htm\" rel=\"nofollow noreferrer\">tutorial</a> for the operation. You have to code the logic based on  events, there is no “label type” for such a thing.  Ask a new specific question if you have more questions."}],"answers":[{"tags":[],"owner":{"account_id":26506655,"reputation":110,"user_id":20142712,"display_name":"not_a_nerd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1697380222,"creation_date":1694360250,"answer_id":77076788,"question_id":77075467,"body_markdown":"**Content:**\r\n============\r\n1. Adding several items into a `TabPane`\r\n2. Moving elements across the `UI` with the mouse\r\n\r\n**1. Several Items into Tab Pane**\r\n-------------------\r\n\r\nIf you want to insert several GUI components to a `titled pane`, you could create a separate LayoutContainer that contains all your desired GUI components and subsequently add it to your TitledPane using `setContent(LayoutContainer)`. Choose the layout that matches your desired design.\r\n\r\nExample: Creating several components using a `VBox` for a simple design\r\n\r\n    TitledPane pane = new TitledPane();\r\n    pane.setText(&quot;Test TitledPane&quot;);\r\n    \t\t\t\r\n    VBox box = new VBox(20);\r\n    box.getChildren().addAll(new Label(&quot;I am a Label&quot;), new Button(&quot;I am a button&quot;), new CheckBox(&quot;Click me&quot;));\r\n    \t\t\t\r\n    pane.setContent(box); //add the VBox with the elements to the Tab\r\n    \t\t\t\r\n    \t\t\t\r\n    Scene scene = new Scene(pane,500, 500);    scene.getStylesheets().add(getClass().getResource(&quot;application.css&quot;).toExternalForm());\r\n\r\n\r\nThat&#39;s the result: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nNow if you&#39;d like your GUI to look more user-friendly, sophisticated and modern, you can still add more Layout Containers containing more components to the `Pane` by adding the Containers to other Containers. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5UtHe.png\r\n\r\n\r\n**2. Drag element across the screen**\r\n----------\r\n\r\nIn this example, I added just a `label` to the `TabPane`. Using this code, you can move the label as you wish across the entire `tab`.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.Tab;\r\n    import javafx.scene.control.TabPane;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.Pane;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class Main extends Application {\r\n    \r\n        private double xOffset = 0;\r\n        private double yOffset = 0;\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    \r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            primaryStage.setTitle(&quot;Draggable Tab with Label Example&quot;);\r\n    \r\n            TabPane tabPane = new TabPane();\r\n    \r\n            // Create a tab with a label\r\n            Tab tab = new Tab(&quot;Draggable Tab&quot;);\r\n            Pane tabContent = new Pane();\r\n    \r\n            Label label = new Label(&quot;Drag me&quot;);\r\n            label.setStyle(&quot;-fx-background-color: lightblue; -fx-padding: 10px;&quot;);\r\n    \r\n            tabContent.getChildren().add(label);\r\n            tab.setContent(tabContent);\r\n            \r\n            tabPane.getTabs().add(tab);\r\n    \r\n            Scene scene = new Scene(tabPane, 400, 300);\r\n    \r\n            label.setOnMousePressed(this::onMousePressed);\r\n            label.setOnMouseDragged(this::onMouseDragged);\r\n            label.setOnMouseReleased(this::onMouseReleased);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n    \r\n        private void onMousePressed(MouseEvent event) {\r\n            xOffset = event.getSceneX() - ((Label) event.getSource()).getLayoutX();\r\n            yOffset = event.getSceneY() - ((Label) event.getSource()).getLayoutY();\r\n        }\r\n    \r\n        private void onMouseDragged(MouseEvent event) {\r\n            double x = event.getSceneX() - xOffset;\r\n            double y = event.getSceneY() - yOffset;\r\n    \r\n            Label label = (Label) event.getSource();\r\n            label.setLayoutX(x);\r\n            label.setLayoutY(y);\r\n        }\r\n    \r\n        private void onMouseReleased(MouseEvent event) {\r\n            // Optionally, you can add cleanup code here\r\n        }\r\n    }\r\n\r\n\r\nYou can apply this code to other elements by assigning the respective methods to your desired element. ","title":"Dynamically insert several entries into TitledPane?","body":"<h1><strong>Content:</strong></h1>\n<ol>\n<li>Adding several items into a <code>TabPane</code></li>\n<li>Moving elements across the <code>UI</code> with the mouse</li>\n</ol>\n<h2><strong>1. Several Items into Tab Pane</strong></h2>\n<p>If you want to insert several GUI components to a <code>titled pane</code>, you could create a separate LayoutContainer that contains all your desired GUI components and subsequently add it to your TitledPane using <code>setContent(LayoutContainer)</code>. Choose the layout that matches your desired design.</p>\n<p>Example: Creating several components using a <code>VBox</code> for a simple design</p>\n<pre><code>TitledPane pane = new TitledPane();\npane.setText(&quot;Test TitledPane&quot;);\n            \nVBox box = new VBox(20);\nbox.getChildren().addAll(new Label(&quot;I am a Label&quot;), new Button(&quot;I am a button&quot;), new CheckBox(&quot;Click me&quot;));\n            \npane.setContent(box); //add the VBox with the elements to the Tab\n            \n            \nScene scene = new Scene(pane,500, 500);    scene.getStylesheets().add(getClass().getResource(&quot;application.css&quot;).toExternalForm());\n</code></pre>\n<p>That's the result:</p>\n<p><a href=\"https://i.stack.imgur.com/5UtHe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5UtHe.png\" alt=\"enter image description here\" /></a></p>\n<p>Now if you'd like your GUI to look more user-friendly, sophisticated and modern, you can still add more Layout Containers containing more components to the <code>Pane</code> by adding the Containers to other Containers.</p>\n<h2><strong>2. Drag element across the screen</strong></h2>\n<p>In this example, I added just a <code>label</code> to the <code>TabPane</code>. Using this code, you can move the label as you wish across the entire <code>tab</code>.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.Tab;\nimport javafx.scene.control.TabPane;\nimport javafx.scene.input.MouseEvent;\nimport javafx.scene.layout.Pane;\nimport javafx.stage.Stage;\n\npublic class Main extends Application {\n\n    private double xOffset = 0;\n    private double yOffset = 0;\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setTitle(&quot;Draggable Tab with Label Example&quot;);\n\n        TabPane tabPane = new TabPane();\n\n        // Create a tab with a label\n        Tab tab = new Tab(&quot;Draggable Tab&quot;);\n        Pane tabContent = new Pane();\n\n        Label label = new Label(&quot;Drag me&quot;);\n        label.setStyle(&quot;-fx-background-color: lightblue; -fx-padding: 10px;&quot;);\n\n        tabContent.getChildren().add(label);\n        tab.setContent(tabContent);\n        \n        tabPane.getTabs().add(tab);\n\n        Scene scene = new Scene(tabPane, 400, 300);\n\n        label.setOnMousePressed(this::onMousePressed);\n        label.setOnMouseDragged(this::onMouseDragged);\n        label.setOnMouseReleased(this::onMouseReleased);\n\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void onMousePressed(MouseEvent event) {\n        xOffset = event.getSceneX() - ((Label) event.getSource()).getLayoutX();\n        yOffset = event.getSceneY() - ((Label) event.getSource()).getLayoutY();\n    }\n\n    private void onMouseDragged(MouseEvent event) {\n        double x = event.getSceneX() - xOffset;\n        double y = event.getSceneY() - yOffset;\n\n        Label label = (Label) event.getSource();\n        label.setLayoutX(x);\n        label.setLayoutY(y);\n    }\n\n    private void onMouseReleased(MouseEvent event) {\n        // Optionally, you can add cleanup code here\n    }\n}\n</code></pre>\n<p>You can apply this code to other elements by assigning the respective methods to your desired element.</p>\n"}],"owner":{"account_id":16903554,"reputation":509,"user_id":12224591,"display_name":"Runsva"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77076788,"answer_count":1,"score":0,"last_activity_date":1697750573,"creation_date":1694337303,"question_id":77075467,"body_markdown":"I&#39;m attempting to insert several draggable entries into an `Accordion`&#39;s `TitledPane` in JavaFX.\r\n\r\nThere is a class function `setContent` of the `TitledPane` class that I can call in Java, and I can provide it something like a `Label` to it, which will result in the single label being displayed as the single entry of the `TitledPane`, as such:\r\n\r\n```\r\ntitledPane.setText(&quot;Test TitledPane&quot;);\r\ntitledPane.setContent(new Label(&quot;Test Label&quot;));`\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHowever, I&#39;m looking to insert several entries into the `TitledPane`, not just one. \r\n\r\nEvery single tutorial on `TitledPane` and `Accordion` I saw only show how to create them with initial permanent values, and not how to dynamically insert values into them as needed.\r\n\r\nHow would I go about inserting several values into a `TitledPane` dynamically using Java? What label type would I need to make these entries in order to allow them to be draggable by the user&#39;s cursor?\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/92xn1l.png","title":"Dynamically insert several entries into TitledPane?","body":"<p>I'm attempting to insert several draggable entries into an <code>Accordion</code>'s <code>TitledPane</code> in JavaFX.</p>\n<p>There is a class function <code>setContent</code> of the <code>TitledPane</code> class that I can call in Java, and I can provide it something like a <code>Label</code> to it, which will result in the single label being displayed as the single entry of the <code>TitledPane</code>, as such:</p>\n<pre><code>titledPane.setText(&quot;Test TitledPane&quot;);\ntitledPane.setContent(new Label(&quot;Test Label&quot;));`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/92xn1l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/92xn1l.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I'm looking to insert several entries into the <code>TitledPane</code>, not just one.</p>\n<p>Every single tutorial on <code>TitledPane</code> and <code>Accordion</code> I saw only show how to create them with initial permanent values, and not how to dynamically insert values into them as needed.</p>\n<p>How would I go about inserting several values into a <code>TitledPane</code> dynamically using Java? What label type would I need to make these entries in order to allow them to be draggable by the user's cursor?</p>\n"},{"tags":["java","spring-boot","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":11845367,"reputation":1,"user_id":8668018,"display_name":"Maratib Ali Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1697750294,"creation_date":1697750243,"answer_id":77327152,"question_id":77327049,"body_markdown":"Finally, I have found the following solution which works for me :-\r\n\r\n```javascript\r\n// Add the following to your settings.json\r\n&quot;java.test.config&quot;: {\r\n        &quot;vmArgs&quot;: [\r\n            &quot;-Xshare:off&quot;\r\n        ]\r\n    },\r\n```","title":"VSCode OpenJDK 64-Bit Server VM warning","body":"<p>Finally, I have found the following solution which works for me :-</p>\n<pre class=\"lang-js prettyprint-override\"><code>// Add the following to your settings.json\n&quot;java.test.config&quot;: {\n        &quot;vmArgs&quot;: [\n            &quot;-Xshare:off&quot;\n        ]\n    },\n</code></pre>\n"}],"owner":{"account_id":11845367,"reputation":1,"user_id":8668018,"display_name":"Maratib Ali Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77327152,"answer_count":1,"score":-1,"last_activity_date":1697750294,"creation_date":1697748955,"question_id":77327049,"body_markdown":"After upgrading my spring boot project to 3.1.5, I am having this issue during test runs in debug console :-\r\n\r\n```\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\n```\r\n\r\nany help?\r\n\r\nTrying to add _JAVA_OPTIONS: -Xmx6G ","title":"VSCode OpenJDK 64-Bit Server VM warning","body":"<p>After upgrading my spring boot project to 3.1.5, I am having this issue during test runs in debug console :-</p>\n<pre><code>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n</code></pre>\n<p>any help?</p>\n<p>Trying to add _JAVA_OPTIONS: -Xmx6G</p>\n"},{"tags":["java","android","ionic-framework","compilation","sdk"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1697759744,"post_id":77327134,"comment_id":136323597,"body_markdown":"Umm ... why Java 19?   That is end-of-life!!  Better to use Java 17 LTS or Java 21 LTS.","body":"Umm ... why Java 19?   That is end-of-life!!  Better to use Java 17 LTS or Java 21 LTS."},{"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"score":0,"creation_date":1697794808,"post_id":77327134,"comment_id":136327384,"body_markdown":"You use Ionic? RIP. Good luck. Tip: Do not edit the generated apk directly.","body":"You use Ionic? RIP. Good luck. Tip: Do not edit the generated apk directly."}],"owner":{"account_id":26621894,"reputation":1,"user_id":20240558,"display_name":"Alfonsoo_gallardo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697750003,"creation_date":1697750003,"question_id":77327134,"body_markdown":"I&#39;m compiling my Ionic app on Android. I&#39;m encountering this error when compiling the app.\r\nThe Java version being used is 19.0.2 and the Gradle version is 7.4.2.\r\nI&#39;ve checked all compileSdkVersions, and they are all set to 33, the targetSdkVersion is 33, and the minSdkVersion is 28.\r\n\r\nConsole error:\r\nIn order to compile Java 9+ source, please set compileSdkVersion to 30 or above\r\n\r\n\r\n\r\n\r\nI would really appreciate your help, as I can&#39;t find the solution on the net either. And I have tried all the solutions I have found on the net.\r\nThanks","title":"&quot;In order to compile Java 9+ source, please set compileSdkVersion to 30 or above&quot;. My CompileSdkVersion = 33","body":"<p>I'm compiling my Ionic app on Android. I'm encountering this error when compiling the app.\nThe Java version being used is 19.0.2 and the Gradle version is 7.4.2.\nI've checked all compileSdkVersions, and they are all set to 33, the targetSdkVersion is 33, and the minSdkVersion is 28.</p>\n<p>Console error:\nIn order to compile Java 9+ source, please set compileSdkVersion to 30 or above</p>\n<p>I would really appreciate your help, as I can't find the solution on the net either. And I have tried all the solutions I have found on the net.\nThanks</p>\n"},{"tags":["java","java.util.logging"],"comments":[{"owner":{"account_id":5162774,"reputation":1440,"user_id":4133874,"accept_rate":100,"display_name":"Sagar Chilukuri"},"score":1,"creation_date":1559212107,"post_id":56376223,"comment_id":99353686,"body_markdown":"Please check if it is a permission issue for file creation.","body":"Please check if it is a permission issue for file creation."}],"answers":[{"tags":[],"owner":{"account_id":7591556,"reputation":1915,"user_id":5759072,"display_name":"Matthew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559213804,"creation_date":1559212885,"answer_id":56376660,"question_id":56376223,"body_markdown":"I&#39;ve tried to execute your code and get the following output in both the console and file:\r\n\r\n```\r\nMay 30, 2019 12:35:11 PM io.yooksi.Main main\r\nINFO: This is a test.\r\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger info\r\nINFO: This is an info message\r\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger warning\r\nWARNING: This is a warning\r\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger severe\r\nSEVERE: This is a sever error message\r\n```\r\n\r\nThis means that your code is not at fault, so you can try the following things:\r\n\r\n- Make sure that the following code properly outputs to console:\r\n\r\n    ```java\r\n    Logger logger = Logger.getLogger(&quot;test&quot;);\r\n    logger.info(&quot;This is a test.&quot;);\r\n    ```\r\n- Make sure that the file is not in *read-only* state.\r\n- Try manually writing to file using either `FileWriter` or `PrintWriter`.\r\n\r\nIf the first test fails to print anything to console then read the following document where you can find a list of common reasons why `Java` logger fails to works and concrete steps how to resolve them *(at least the one related to configuration)*:\r\n\r\n[Why is my Java Logging not working][1]\r\n\r\n\r\n  [1]: https://www.forward.com.au/javaProgramming/javaGuiTips/javaLoggingDebugging.html","title":"Java util Logger not writing to file","body":"<p>I've tried to execute your code and get the following output in both the console and file:</p>\n\n<pre><code>May 30, 2019 12:35:11 PM io.yooksi.Main main\nINFO: This is a test.\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger info\nINFO: This is an info message\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger warning\nWARNING: This is a warning\nMay 30, 2019 12:35:11 PM io.yooksi.FsLogger severe\nSEVERE: This is a sever error message\n</code></pre>\n\n<p>This means that your code is not at fault, so you can try the following things:</p>\n\n<ul>\n<li><p>Make sure that the following code properly outputs to console:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Logger logger = Logger.getLogger(\"test\");\nlogger.info(\"This is a test.\");\n</code></pre></li>\n<li>Make sure that the file is not in <em>read-only</em> state.</li>\n<li>Try manually writing to file using either <code>FileWriter</code> or <code>PrintWriter</code>.</li>\n</ul>\n\n<p>If the first test fails to print anything to console then read the following document where you can find a list of common reasons why <code>Java</code> logger fails to works and concrete steps how to resolve them <em>(at least the one related to configuration)</em>:</p>\n\n<p><a href=\"https://www.forward.com.au/javaProgramming/javaGuiTips/javaLoggingDebugging.html\" rel=\"nofollow noreferrer\">Why is my Java Logging not working</a></p>\n"},{"tags":[],"owner":{"account_id":2826194,"reputation":10795,"user_id":2428802,"display_name":"jmehrens"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697749166,"creation_date":1559226851,"answer_id":56380338,"question_id":56376223,"body_markdown":"From the code you are using a relative path of `Logs/LogFsForensics.log`  This means that if the current working directory of the process changes the path will be invalid.  When that happens the [FileHandler will create a file in the default location][1].  Use an absolute path or specify one of the [FileHandler special components][2]. For example:\r\n\r\n`/Logs/LogFsForensics.log` as absolute path or `%h/Logs/LogFsForensics.log` as relative from home directory.\r\n\r\n\r\n\r\nYou can modify the test program from [Logging not showing][3] to print the logger tree and and handlers. It is possible the levels are not set correctly or the handler was not installed.  \r\n\r\nLooking at the code, I would think that you want `getInstance` to be synchronized so you never attempt to create more than one handler.\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-6244047\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/FileHandler.html\r\n  [3]: https://stackoverflow.com/questions/44882648/logging-not-showing","title":"Java util Logger not writing to file","body":"<p>From the code you are using a relative path of <code>Logs/LogFsForensics.log</code>  This means that if the current working directory of the process changes the path will be invalid.  When that happens the <a href=\"https://bugs.openjdk.java.net/browse/JDK-6244047\" rel=\"nofollow noreferrer\">FileHandler will create a file in the default location</a>.  Use an absolute path or specify one of the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/FileHandler.html\" rel=\"nofollow noreferrer\">FileHandler special components</a>. For example:</p>\n<p><code>/Logs/LogFsForensics.log</code> as absolute path or <code>%h/Logs/LogFsForensics.log</code> as relative from home directory.</p>\n<p>You can modify the test program from <a href=\"https://stackoverflow.com/questions/44882648/logging-not-showing\">Logging not showing</a> to print the logger tree and and handlers. It is possible the levels are not set correctly or the handler was not installed.</p>\n<p>Looking at the code, I would think that you want <code>getInstance</code> to be synchronized so you never attempt to create more than one handler.</p>\n"}],"owner":{"account_id":11278502,"reputation":25,"user_id":8271844,"display_name":"Julian G. M."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4603,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1697749166,"creation_date":1559211339,"question_id":56376223,"body_markdown":"I have written a silly Logger for my application. It writes into a log file info, warning and severe messages. It worked perfectly some time ago, but suddenly, it stopped working for no aparent reason. \r\nIt keeps creating the log file if it does not exist, but no content is written. \r\nI can&#39;t find why it is not working now. I would thank some help.\r\n\r\nDebugging with my IDE, I realise that messages are passed correctly to logger, and logger.info() is being executed.\r\n```\r\npublic class FsLogger {\r\n\t\r\n\tprivate static FsLogger instance;\r\n\t\r\n\tprivate final String filename = &quot;Logs/LogFsForensics.log&quot;;\r\n\tprivate final String loggerName = &quot;FsLogger&quot;;\r\n\tprivate static Logger logger;\t\r\n        private FileHandler fh;\r\n        private final int limit = 1024*10000; //10 MB\r\n        private SimpleFormatter sf;\r\n\t\r\n\tprivate FsLogger() {\r\n\t\tlogger =  Logger.getLogger(loggerName);\r\n\t\t\r\n\t\tsf = new SimpleFormatter();\r\n\t\ttry {\r\n\t\t\tfh = new FileHandler(filename, limit, 1, true);\r\n\t\t\tsf = new SimpleFormatter();\r\n\t\t\tfh.setFormatter(sf);\r\n\t\t\t\r\n\t\t\tlogger.addHandler(fh);\r\n\t\t} catch (SecurityException | IOException e) {\t\t\t\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static FsLogger getInstance() {\r\n\t\tif(instance == null) {\r\n\t\t\tinstance = new FsLogger();\r\n\t\t}\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\tpublic void info(String message) {\r\n\t\tlogger.info(message);\r\n\t}\r\n\t\r\n\tpublic void warning(String message) {\r\n\t\tlogger.warning(message);\t\t\r\n\t}\r\n\t\r\n\tpublic void severe(String message) {\r\n\t\tlogger.severe(message);\r\n\t}\r\n```\r\nExample of a logger call:\r\n```\r\nprivate FsLogger logger = FsLogger.getInstance();\r\nlogger.severe(e1.getMessage());\r\n```","title":"Java util Logger not writing to file","body":"<p>I have written a silly Logger for my application. It writes into a log file info, warning and severe messages. It worked perfectly some time ago, but suddenly, it stopped working for no aparent reason. \nIt keeps creating the log file if it does not exist, but no content is written. \nI can't find why it is not working now. I would thank some help.</p>\n\n<p>Debugging with my IDE, I realise that messages are passed correctly to logger, and logger.info() is being executed.</p>\n\n<pre><code>public class FsLogger {\n\n    private static FsLogger instance;\n\n    private final String filename = \"Logs/LogFsForensics.log\";\n    private final String loggerName = \"FsLogger\";\n    private static Logger logger;   \n        private FileHandler fh;\n        private final int limit = 1024*10000; //10 MB\n        private SimpleFormatter sf;\n\n    private FsLogger() {\n        logger =  Logger.getLogger(loggerName);\n\n        sf = new SimpleFormatter();\n        try {\n            fh = new FileHandler(filename, limit, 1, true);\n            sf = new SimpleFormatter();\n            fh.setFormatter(sf);\n\n            logger.addHandler(fh);\n        } catch (SecurityException | IOException e) {           \n            e.printStackTrace();\n        }\n    }\n\n    public static FsLogger getInstance() {\n        if(instance == null) {\n            instance = new FsLogger();\n        }\n        return instance;\n    }\n\n    public void info(String message) {\n        logger.info(message);\n    }\n\n    public void warning(String message) {\n        logger.warning(message);        \n    }\n\n    public void severe(String message) {\n        logger.severe(message);\n    }\n</code></pre>\n\n<p>Example of a logger call:</p>\n\n<pre><code>private FsLogger logger = FsLogger.getInstance();\nlogger.severe(e1.getMessage());\n</code></pre>\n"},{"tags":["python","java","get"],"comments":[{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1697748316,"post_id":77326873,"comment_id":136322351,"body_markdown":"How? -&gt; &quot;I store my contacts in the URL&quot;","body":"How? -&gt; &quot;I store my contacts in the URL&quot;"},{"owner":{"account_id":28799667,"reputation":3,"user_id":22056935,"display_name":"YANIX"},"score":0,"creation_date":1697749809,"post_id":77326873,"comment_id":136322571,"body_markdown":"@LMC `        HttpURLConnectionExample connection = new HttpURLConnectionExample();\n        String tmp = readContacts(getApplicationContext());\n        String contacts = tmp + end;\n        tmp = URLEncoder.encode(contacts, &quot;utf-8&quot;); `                     \ntmp variable, which is also used in void sendGET","body":"@LMC `        HttpURLConnectionExample connection = new HttpURLConnectionExample();         String tmp = readContacts(getApplicationContext());         String contacts = tmp + end;         tmp = URLEncoder.encode(contacts, &quot;utf-8&quot;); `                      tmp variable, which is also used in void sendGET"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1697750041,"post_id":77326873,"comment_id":136322607,"body_markdown":"so url is something like `host/path?key=val&amp;key=val`? Still unclear. Questions are expected to provide a [mcve]","body":"so url is something like <code>host&#47;path?key=val&amp;key=val</code>? Still unclear. Questions are expected to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":28799667,"reputation":3,"user_id":22056935,"display_name":"YANIX"},"score":0,"creation_date":1697750638,"post_id":77326873,"comment_id":136322665,"body_markdown":"my variable tmp contains +%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%B0+*525%23%0A                                                                                                     its Russian language sorry(","body":"my variable tmp contains +%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%B&zwnj;&#8203;0+*525%23%0A                                                                                                     its Russian language sorry("}],"owner":{"account_id":28799667,"reputation":3,"user_id":22056935,"display_name":"YANIX"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697748227,"creation_date":1697746959,"question_id":77326873,"body_markdown":"I&#39;m writing a service in Java. Which sends a get request to the server. I store the URL of my contacts in it (I hope)\r\n \r\n```\r\npublic static void sendGET(**String tmp**) throws IOException {\r\n        URL obj = new URL(GET_URL);\r\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\r\n        con.setReadTimeout(5000);\r\n        con.setConnectTimeout(5000);\r\n        con.setRequestMethod(&quot;GET&quot;);\r\n}\r\n```\r\n\r\nAlso I have a Python server,\r\n\r\n\r\n```python    \r\nfrom http.server import BaseHTTPRequestHandler, HTTPServer\r\nfrom urllib.parse import urlparse\r\n\r\nhostName = &quot;192.168.31.225&quot;\r\nserverPort = 8080\r\n\r\nclass MyServer(BaseHTTPRequestHandler):\r\n    def do_GET(self):\r\n        self.send_response(200)\r\n        print(self.requestline)\r\n        self.send_header(&quot;Content-type&quot;, &quot;text/html&quot;)\r\n        self.end_headers()\r\n        self.wfile.write(bytes(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;https://pythonbasics.org&lt;/title&gt;&lt;/head&gt;&quot;, &quot;utf-8&quot;))\r\n        self.wfile.write(bytes(&quot;&lt;p&gt;Request: %s&lt;/p&gt;&quot; % self.path, &quot;utf-8&quot;))\r\n        self.wfile.write(bytes(&quot;&lt;body&gt;&quot;, &quot;utf-8&quot;))\r\n        self.wfile.write(bytes(&quot;&lt;p&gt;This is an example web server.&lt;/p&gt;&quot;, &quot;utf-8&quot;))\r\n        self.wfile.write(bytes(&quot;&lt;/body&gt;&lt;/html&gt;&quot;, &quot;utf-8&quot;))\r\n\r\n\r\n    def do_POST(self):\r\n        self.send_response(200)\r\n        content_len = int(self.headers.get(&#39;Content-Length&#39;))\r\n        post_body = self.rfile.read(content_len)\r\n        self.pars_args(post_body)\r\n\r\n    def pars_args(self,msg):\r\n        msg = msg.decode(&#39;UTF-8&#39;)\r\n        msg.split(&#39;\\n&#39;)\r\n        print(msg)\r\n```\r\n\r\n\r\nI would really like pars_args to return at least something from def do_GET. I know that in Get in Java I store my contacts in the URL. But I’m not smart enough to see them in Python on the Server :((\r\n\r\npars_args was now set for Post requests...\r\n\r\n\r\nI know that I need to decode the data back in order to output it in print(msg) or at least in a Get request so that it appears on my server, for example, but I just can’t get the data\r\n\r\nI tried to rewrite pars_args for do_GET but it didn’t work... I don’t understand\r\n\r\n\r\nI took the get request code from [here][1] \r\n\r\n\r\n  [1]: https://www.8host.com/blog/otpravka-http-zaprosov-get-i-post-v-java/","title":"How to get information from a Get-Request","body":"<p>I'm writing a service in Java. Which sends a get request to the server. I store the URL of my contacts in it (I hope)</p>\n<pre><code>public static void sendGET(**String tmp**) throws IOException {\n        URL obj = new URL(GET_URL);\n        HttpURLConnection con = (HttpURLConnection) obj.openConnection();\n        con.setReadTimeout(5000);\n        con.setConnectTimeout(5000);\n        con.setRequestMethod(&quot;GET&quot;);\n}\n</code></pre>\n<p>Also I have a Python server,</p>\n<pre class=\"lang-py prettyprint-override\"><code>from http.server import BaseHTTPRequestHandler, HTTPServer\nfrom urllib.parse import urlparse\n\nhostName = &quot;192.168.31.225&quot;\nserverPort = 8080\n\nclass MyServer(BaseHTTPRequestHandler):\n    def do_GET(self):\n        self.send_response(200)\n        print(self.requestline)\n        self.send_header(&quot;Content-type&quot;, &quot;text/html&quot;)\n        self.end_headers()\n        self.wfile.write(bytes(&quot;&lt;html&gt;&lt;head&gt;&lt;title&gt;https://pythonbasics.org&lt;/title&gt;&lt;/head&gt;&quot;, &quot;utf-8&quot;))\n        self.wfile.write(bytes(&quot;&lt;p&gt;Request: %s&lt;/p&gt;&quot; % self.path, &quot;utf-8&quot;))\n        self.wfile.write(bytes(&quot;&lt;body&gt;&quot;, &quot;utf-8&quot;))\n        self.wfile.write(bytes(&quot;&lt;p&gt;This is an example web server.&lt;/p&gt;&quot;, &quot;utf-8&quot;))\n        self.wfile.write(bytes(&quot;&lt;/body&gt;&lt;/html&gt;&quot;, &quot;utf-8&quot;))\n\n\n    def do_POST(self):\n        self.send_response(200)\n        content_len = int(self.headers.get('Content-Length'))\n        post_body = self.rfile.read(content_len)\n        self.pars_args(post_body)\n\n    def pars_args(self,msg):\n        msg = msg.decode('UTF-8')\n        msg.split('\\n')\n        print(msg)\n</code></pre>\n<p>I would really like pars_args to return at least something from def do_GET. I know that in Get in Java I store my contacts in the URL. But I’m not smart enough to see them in Python on the Server :((</p>\n<p>pars_args was now set for Post requests...</p>\n<p>I know that I need to decode the data back in order to output it in print(msg) or at least in a Get request so that it appears on my server, for example, but I just can’t get the data</p>\n<p>I tried to rewrite pars_args for do_GET but it didn’t work... I don’t understand</p>\n<p>I took the get request code from <a href=\"https://www.8host.com/blog/otpravka-http-zaprosov-get-i-post-v-java/\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1697727986,"post_id":77324839,"comment_id":136318804,"body_markdown":"Does this answer your question? [Scanner is skipping nextLine() after using next() or nextFoo()?](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"}],"answers":[{"tags":[],"owner":{"account_id":4113392,"reputation":5800,"user_id":3375670,"accept_rate":88,"display_name":"Robert Kock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697728085,"creation_date":1697728085,"answer_id":77324999,"question_id":77324839,"body_markdown":"You initialized &lt;code&gt;small&lt;/code&gt; as an empty string.  \r\nAny non-empty string will be greater than that one. You therefore never re-assign small.\r\n\r\nYou might try this:\r\n\r\n    if (small.isEmpty() || (word.compareTo(small) &lt; 0))\r\n      small = word;\r\n    if (large.isEmpty() || (word.compareTo(large) &gt; 0))\r\n      large = word;\r\n\r\n","title":"Why is while(scan.hasNext()) skipping if statement?","body":"<p>You initialized <code>small</code> as an empty string.<br />\nAny non-empty string will be greater than that one. You therefore never re-assign small.</p>\n<p>You might try this:</p>\n<pre><code>if (small.isEmpty() || (word.compareTo(small) &lt; 0))\n  small = word;\nif (large.isEmpty() || (word.compareTo(large) &gt; 0))\n  large = word;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28021555,"reputation":11,"user_id":21402271,"display_name":"emily"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697728890,"creation_date":1697728890,"answer_id":77325111,"question_id":77324839,"body_markdown":"Checking if `small` and `larg` are empty is necessary to handle the scenario where these variables haven&#39;t been assigned any values yet. If they are empty, it means no words have been assigned to them, and the current word should be assigned to them without considering lexicographical comparisons.\r\n\r\n    while (scan.hasNext()) {\r\n            String word = scan.next();\r\n            if (!word.equalsIgnoreCase(&quot;stop&quot;)) {\r\n                if (small.isEmpty() || word.compareTo(small) &lt; 0) {\r\n                    small = word;\r\n                }\r\n                if (larg.isEmpty() || word.compareTo(larg) &gt; 0) {\r\n                    larg = word;\r\n                }\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\nChanging the code to this will give the following result:\r\n\r\n    First word will be: animal\r\n    Last word will be: grapes","title":"Why is while(scan.hasNext()) skipping if statement?","body":"<p>Checking if <code>small</code> and <code>larg</code> are empty is necessary to handle the scenario where these variables haven't been assigned any values yet. If they are empty, it means no words have been assigned to them, and the current word should be assigned to them without considering lexicographical comparisons.</p>\n<pre><code>while (scan.hasNext()) {\n        String word = scan.next();\n        if (!word.equalsIgnoreCase(&quot;stop&quot;)) {\n            if (small.isEmpty() || word.compareTo(small) &lt; 0) {\n                small = word;\n            }\n            if (larg.isEmpty() || word.compareTo(larg) &gt; 0) {\n                larg = word;\n            }\n        } else {\n            break;\n        }\n    }\n</code></pre>\n<p>Changing the code to this will give the following result:</p>\n<pre><code>First word will be: animal\nLast word will be: grapes\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697748010,"creation_date":1697735503,"answer_id":77325815,"question_id":77324839,"body_markdown":"&gt; _&#39;... it should be printing   `pw.println(&quot;First word will be: &quot; + small);` but it will only print &quot;First word will be: &quot; and does not print small however it will print  `pw.println(&quot;Last word will be: &quot; + larg);` ...&#39;_\r\n\r\nThis is because the following condition is never met, since _small_ is empty.\r\n\r\n```java\r\nif (word.compareTo(small) &lt; 0) small = word\r\n```\r\n\r\nCheck _small_ first.\r\n\r\n```java\r\nif (small.isEmpty() || word.compareTo(small) &lt; 0) small = word\r\n```\r\n\r\nAdditionally, you need to use _[next](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next())_, rather than _nextLine_.\r\n\r\n```java\r\nString word = scan.next()\r\n```\r\n\r\nHere are some recommendations for your code.\r\n\r\nUse a _[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) statement_ for the _PrintWriter_ and _Scanner_ objects.\r\n\r\nAnd, you are using _&quot;[append mode](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/FileWriter.html#%3Cinit%3E(java.io.File,boolean))&quot;_, for _FileWriter_.&amp;nbsp; This is for appending data to existing files.\\\r\nThis is uncorrelated to the _[append](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/Writer.html#append(java.lang.CharSequence))_ method.\r\n\r\n```java\r\nnew FileWriter(&quot;celsius.txt&quot;, true)\r\n```\r\n\r\nHere is a re-factor.\r\n\r\n```java\r\ntry (PrintWriter w = new PrintWriter(&quot;temperature.txt&quot;)) {\r\n    w.println(&quot;82.5\\n30\\n92\\n78\\n32\\n98.8\\n-1\\nbanana\\ngrapes\\nanimal\\nStop\\n45&quot;);\r\n}\r\ntry (PrintWriter w = new PrintWriter(new FileWriter(&quot;celsius.txt&quot;))) {\r\n    try (Scanner in = new Scanner(new File(&quot;temperature.txt&quot;))) {\r\n        double v;\r\n        String s, first = null, last = null;\r\n        while (in.hasNext())\r\n            if ((v = in.nextDouble()) == -1) break;\r\n            else w.printf(&quot;%.2f%n&quot;, (v - 32) * 5 / 9);\r\n        while (in.hasNext())\r\n            if ((s = in.next()).equalsIgnoreCase(&quot;stop&quot;)) break;\r\n            else if (first == null || s.compareTo(first) &lt; 0) first = s;\r\n            else if (last == null || s.compareTo(last) &gt; 0) last = s;\r\n        w.println(&quot;First word will be: &quot; + first);\r\n        w.println(&quot;Last word will be: &quot; + last);\r\n        while (in.hasNext())\r\n            if ((v = in.nextDouble()) &gt;= 1 &amp;&amp; v &lt;= 50) {\r\n                while (v &lt;= 59) w.print((v * v++) + &quot;, &quot;);\r\n                w.print(++v * v);\r\n            }\r\n    }\r\n}\r\ntry (Scanner in = new Scanner(new File(&quot;celsius.txt&quot;))) {\r\n    while (in.hasNextLine()) System.out.println(in.nextLine());\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n28.06\r\n-1.11\r\n33.33\r\n25.56\r\n0.00\r\n37.11\r\nFirst word will be: animal\r\nLast word will be: grapes\r\n2025.0, 2116.0, 2209.0, 2304.0, 2401.0, 2500.0, 2601.0, 2704.0, 2809.0, 2916.0, 3025.0, 3136.0, 3249.0, 3364.0, 3481.0, 3721.0\r\n```","title":"Why is while(scan.hasNext()) skipping if statement?","body":"<blockquote>\n<p><em>'... it should be printing   <code>pw.println(&quot;First word will be: &quot; + small);</code> but it will only print &quot;First word will be: &quot; and does not print small however it will print  <code>pw.println(&quot;Last word will be: &quot; + larg);</code> ...'</em></p>\n</blockquote>\n<p>This is because the following condition is never met, since <em>small</em> is empty.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (word.compareTo(small) &lt; 0) small = word\n</code></pre>\n<p>Check <em>small</em> first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (small.isEmpty() || word.compareTo(small) &lt; 0) small = word\n</code></pre>\n<p>Additionally, you need to use <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next()\" rel=\"nofollow noreferrer\">next</a></em>, rather than <em>nextLine</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String word = scan.next()\n</code></pre>\n<p>Here are some recommendations for your code.</p>\n<p>Use a <em><a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a> statement</em> for the <em>PrintWriter</em> and <em>Scanner</em> objects.</p>\n<p>And, you are using <em>&quot;<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/FileWriter.html#%3Cinit%3E(java.io.File,boolean)\" rel=\"nofollow noreferrer\">append mode</a>&quot;</em>, for <em>FileWriter</em>.  This is for appending data to existing files.<br />\nThis is uncorrelated to the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/io/Writer.html#append(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">append</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>new FileWriter(&quot;celsius.txt&quot;, true)\n</code></pre>\n<p>Here is a re-factor.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (PrintWriter w = new PrintWriter(&quot;temperature.txt&quot;)) {\n    w.println(&quot;82.5\\n30\\n92\\n78\\n32\\n98.8\\n-1\\nbanana\\ngrapes\\nanimal\\nStop\\n45&quot;);\n}\ntry (PrintWriter w = new PrintWriter(new FileWriter(&quot;celsius.txt&quot;))) {\n    try (Scanner in = new Scanner(new File(&quot;temperature.txt&quot;))) {\n        double v;\n        String s, first = null, last = null;\n        while (in.hasNext())\n            if ((v = in.nextDouble()) == -1) break;\n            else w.printf(&quot;%.2f%n&quot;, (v - 32) * 5 / 9);\n        while (in.hasNext())\n            if ((s = in.next()).equalsIgnoreCase(&quot;stop&quot;)) break;\n            else if (first == null || s.compareTo(first) &lt; 0) first = s;\n            else if (last == null || s.compareTo(last) &gt; 0) last = s;\n        w.println(&quot;First word will be: &quot; + first);\n        w.println(&quot;Last word will be: &quot; + last);\n        while (in.hasNext())\n            if ((v = in.nextDouble()) &gt;= 1 &amp;&amp; v &lt;= 50) {\n                while (v &lt;= 59) w.print((v * v++) + &quot;, &quot;);\n                w.print(++v * v);\n            }\n    }\n}\ntry (Scanner in = new Scanner(new File(&quot;celsius.txt&quot;))) {\n    while (in.hasNextLine()) System.out.println(in.nextLine());\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>28.06\n-1.11\n33.33\n25.56\n0.00\n37.11\nFirst word will be: animal\nLast word will be: grapes\n2025.0, 2116.0, 2209.0, 2304.0, 2401.0, 2500.0, 2601.0, 2704.0, 2809.0, 2916.0, 3025.0, 3136.0, 3249.0, 3364.0, 3481.0, 3721.0\n</code></pre>\n"}],"owner":{"account_id":29557403,"reputation":1,"user_id":22652769,"display_name":"ciggy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1697748010,"creation_date":1697727069,"question_id":77324839,"body_markdown":"\r\nMy code seems like it is going from my second `while(scan.hasNext())` to  `if(word.compareTo(larg)&gt;0)` and skipping over   `if(word.compareTo(small) &lt; 0)` it should be printing   `pw.println(&quot;First word will be: &quot; + small);` but it will only print &quot;First word will be: &quot; and does not print small however it will print  `pw.println(&quot;Last word will be: &quot; + larg);`\r\n\r\n```java\r\npublic static void main(String[] args) throws IOException {\r\n    PrintWriter createFile = new PrintWriter(&quot;temperature.txt&quot;);\r\n\r\n    createFile.println(&quot;82.5\\n30\\n92\\n78\\n32\\n98.8\\n-1\\nbanana\\ngrapes\\nanimal\\nStop\\n45&quot;);\r\n\r\n    createFile.close();\r\n\r\n    Scanner key = new Scanner(System.in);\r\n\r\n    float c;\r\n    String cel;\r\n    String stop = &quot;Stop&quot;;\r\n\r\n    String small = &quot;&quot;;\r\n    String larg = &quot;&quot;;\r\n    File f = new File(&quot;temperature.txt&quot;);\r\n    Scanner scan = new Scanner(f);\r\n    FileWriter fw = new FileWriter(&quot;celsius.txt&quot;, true);\r\n    PrintWriter pw = new PrintWriter(fw);\r\n    while (scan.hasNext()) {\r\n        float can = scan.nextFloat();\r\n        if (can == (-1)) {\r\n            break;\r\n        } else\r\n            c = (can - 32) * 5 / 9;\r\n        cel = String.format(&quot;%.2f&quot;, +c);\r\n        pw.println(cel);\r\n    }\r\n\r\n    while (scan.hasNext()) {\r\n        String word = scan.nextLine();\r\n        if (!word.equalsIgnoreCase(&quot;stop&quot;)) {\r\n            if (word.compareTo(small) &lt; 0) {\r\n                small = word;\r\n            }\r\n            if (word.compareTo(larg) &gt; 0) {\r\n                larg = word;\r\n            }\r\n        } else\r\n            break;\r\n    }\r\n\r\n    pw.println(&quot;First word will be: &quot; + small);\r\n    pw.println(&quot;Last word will be: &quot; + larg);\r\n    \r\n    while (scan.hasNext()) {\r\n        double num = scan.nextDouble();\r\n\r\n        if (num &gt;= 1 &amp;&amp; num &lt;= 50) {\r\n            while (num &lt;= 59) {\r\n                pw.print(Math.pow(num, 2) + &quot;, &quot;);\r\n                num++;\r\n            }\r\n            num++;\r\n            pw.print(Math.pow(num, 2));\r\n        }\r\n    }\r\n    pw.close();\r\n    \r\n    Scanner input = new Scanner(new File(&quot;celsius.txt&quot;));\r\n\r\n    while (input.hasNext())\r\n        System.out.println(input.nextLine());\r\n    // TODO code application logic here\r\n}\r\n```","title":"Why is while(scan.hasNext()) skipping if statement?","body":"<p>My code seems like it is going from my second <code>while(scan.hasNext())</code> to  <code>if(word.compareTo(larg)&gt;0)</code> and skipping over   <code>if(word.compareTo(small) &lt; 0)</code> it should be printing   <code>pw.println(&quot;First word will be: &quot; + small);</code> but it will only print &quot;First word will be: &quot; and does not print small however it will print  <code>pw.println(&quot;Last word will be: &quot; + larg);</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws IOException {\n    PrintWriter createFile = new PrintWriter(&quot;temperature.txt&quot;);\n\n    createFile.println(&quot;82.5\\n30\\n92\\n78\\n32\\n98.8\\n-1\\nbanana\\ngrapes\\nanimal\\nStop\\n45&quot;);\n\n    createFile.close();\n\n    Scanner key = new Scanner(System.in);\n\n    float c;\n    String cel;\n    String stop = &quot;Stop&quot;;\n\n    String small = &quot;&quot;;\n    String larg = &quot;&quot;;\n    File f = new File(&quot;temperature.txt&quot;);\n    Scanner scan = new Scanner(f);\n    FileWriter fw = new FileWriter(&quot;celsius.txt&quot;, true);\n    PrintWriter pw = new PrintWriter(fw);\n    while (scan.hasNext()) {\n        float can = scan.nextFloat();\n        if (can == (-1)) {\n            break;\n        } else\n            c = (can - 32) * 5 / 9;\n        cel = String.format(&quot;%.2f&quot;, +c);\n        pw.println(cel);\n    }\n\n    while (scan.hasNext()) {\n        String word = scan.nextLine();\n        if (!word.equalsIgnoreCase(&quot;stop&quot;)) {\n            if (word.compareTo(small) &lt; 0) {\n                small = word;\n            }\n            if (word.compareTo(larg) &gt; 0) {\n                larg = word;\n            }\n        } else\n            break;\n    }\n\n    pw.println(&quot;First word will be: &quot; + small);\n    pw.println(&quot;Last word will be: &quot; + larg);\n    \n    while (scan.hasNext()) {\n        double num = scan.nextDouble();\n\n        if (num &gt;= 1 &amp;&amp; num &lt;= 50) {\n            while (num &lt;= 59) {\n                pw.print(Math.pow(num, 2) + &quot;, &quot;);\n                num++;\n            }\n            num++;\n            pw.print(Math.pow(num, 2));\n        }\n    }\n    pw.close();\n    \n    Scanner input = new Scanner(new File(&quot;celsius.txt&quot;));\n\n    while (input.hasNext())\n        System.out.println(input.nextLine());\n    // TODO code application logic here\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-cloud-config"],"comments":[{"owner":{"account_id":1022874,"reputation":33518,"user_id":1032785,"accept_rate":50,"display_name":"jordanm"},"score":0,"creation_date":1697751501,"post_id":77326951,"comment_id":136322756,"body_markdown":"If you&#39;re using spring v3, the setup is a little different now https://docs.awspring.io/spring-cloud-aws/docs/3.0.0/reference/html/index.html#loading-external-configuration-2. Your current setup looks right at a glance for spring v2.","body":"If you&#39;re using spring v3, the setup is a little different now <a href=\"https://docs.awspring.io/spring-cloud-aws/docs/3.0.0/reference/html/index.html#loading-external-configuration-2\" rel=\"nofollow noreferrer\">docs.awspring.io/spring-cloud-aws/docs/3.0.0/reference/html/&zwnj;&#8203;&hellip;</a>. Your current setup looks right at a glance for spring v2."},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1697753096,"post_id":77326951,"comment_id":136322937,"body_markdown":"Why not use the Offiical AWS SDK For Java V2 Secret manager API within a Spring Boot project. It works fine.","body":"Why not use the Offiical AWS SDK For Java V2 Secret manager API within a Spring Boot project. It works fine."},{"owner":{"account_id":1442071,"reputation":8707,"user_id":1361901,"display_name":"Joseph Larson"},"score":0,"creation_date":1697818874,"post_id":77326951,"comment_id":136331877,"body_markdown":"I think I have version issues. The starter project used spring boot 3.1.5, which may not be supported by some of the other tools needed. I&#39;ve tried 2.7.x, but I&#39;m not getting any further.","body":"I think I have version issues. The starter project used spring boot 3.1.5, which may not be supported by some of the other tools needed. I&#39;ve tried 2.7.x, but I&#39;m not getting any further."}],"owner":{"account_id":1442071,"reputation":8707,"user_id":1361901,"display_name":"Joseph Larson"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697747745,"creation_date":1697747745,"question_id":77326951,"body_markdown":"I&#39;m trying to configure a Spring Cloud Config Server to use either AWS Secrets Manager or Parameter Store. I&#39;ve been hitting brick wall after brick wall.\r\n\r\nThis is my latest `pom.xml`:\r\n\r\n     &lt;dependencies&gt;\r\n        &lt;!-- Config server --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        ... a bunch of stuff that doesn&#39;t matter ...\r\n        &lt;!-- AWS - fairly sure I don&#39;t want all of these --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aws-sdk-java&lt;/artifactId&gt;\r\n            &lt;version&gt;2.20.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-aws-secrets-manager-config&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-aws-secrets-manager-config&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n     &lt;dependencies&gt;\r\n\r\nAnd my application.yml:\r\n\r\n    server:\r\n      port: 8888\r\n    \r\n    spring:\r\n      profiles:\r\n        active: aws-secretsmanager\r\n      cloud:\r\n        config:\r\n          server:\r\n            aws-secretsmanager:\r\n              region: us-west-1\r\n              default-label: latest\r\n\r\nAnd this is lengthy, but it&#39;s what happens when I run it:\r\n\r\n    2023-10-19T15:23:54.915-05:00  INFO 54547 --- [           main] c.t.s.SpringCloudConfigServerApplication : Starting SpringCloudConfigServerApplication using Java 17.0.8 with PID 54547 (/Users/jpl/Work/Research/SpringCloudConfigServer/target/classes started by jpl in /Users/jpl/Work/Research/SpringCloudConfigServer)\r\n    2023-10-19T15:23:54.916-05:00  INFO 54547 --- [           main] c.t.s.SpringCloudConfigServerApplication : The following 1 profile is active: &quot;aws-secretsmanager&quot;\r\n    2023-10-19T15:23:55.281-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-19T15:23:55.281-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\r\n    2023-10-19T15:23:55.288-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.\r\n    2023-10-19T15:23:55.294-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-19T15:23:55.295-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.\r\n    2023-10-19T15:23:55.298-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 0 ms. Found 0 Redis repository interfaces.\r\n    2023-10-19T15:23:55.386-05:00  INFO 54547 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=50679c0d-1bc9-3d1c-bef4-1fae13e98217\r\n    2023-10-19T15:23:55.549-05:00  INFO 54547 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8888 (http)\r\n    2023-10-19T15:23:55.552-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-10-19T15:23:55.552-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.13]\r\n    2023-10-19T15:23:55.593-05:00  INFO 54547 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-10-19T15:23:55.594-05:00  INFO 54547 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 657 ms\r\n    2023-10-19T15:23:55.775-05:00  WARN 54547 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n    2023-10-19T15:23:55.777-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    2023-10-19T15:23:55.785-05:00  INFO 54547 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger :\r\n    \r\n    Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n    2023-10-19T15:23:55.795-05:00 ERROR 54547 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :\r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n        If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n        If you have database settings to be loaded from a particular profile you may need to activate it (the profiles aws-secretsmanager are currently active).\r\n    \r\n    \r\n    Process finished with exit code 1\r\n\r\nI&#39;m not even close to getting this to work, and I still haven&#39;t gotten to the point of being able to specify my AWS credentials.\r\n\r\nI&#39;m using IntelliJ, which is pretty good helping me write my application.yml file, but it flat out doesn&#39;t recognize anything related to specifying AWS credentials. I don&#39;t know if I just don&#39;t have the right dependencies or what is wrong.\r\n\r\nDoes anyone have an actual working application that uses AWS anything with Spring Cloud Config?\r\n\r\n\r\n","title":"Spring Cloud Config with AWS Secrets Manager or Parameter Store","body":"<p>I'm trying to configure a Spring Cloud Config Server to use either AWS Secrets Manager or Parameter Store. I've been hitting brick wall after brick wall.</p>\n<p>This is my latest <code>pom.xml</code>:</p>\n<pre><code> &lt;dependencies&gt;\n    &lt;!-- Config server --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    ... a bunch of stuff that doesn't matter ...\n    &lt;!-- AWS - fairly sure I don't want all of these --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n        &lt;artifactId&gt;aws-sdk-java&lt;/artifactId&gt;\n        &lt;version&gt;2.20.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-aws-secrets-manager-config&lt;/artifactId&gt;\n        &lt;version&gt;2.4.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.awspring.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-aws-secrets-manager-config&lt;/artifactId&gt;\n        &lt;version&gt;2.4.4&lt;/version&gt;\n    &lt;/dependency&gt;\n &lt;dependencies&gt;\n</code></pre>\n<p>And my application.yml:</p>\n<pre><code>server:\n  port: 8888\n\nspring:\n  profiles:\n    active: aws-secretsmanager\n  cloud:\n    config:\n      server:\n        aws-secretsmanager:\n          region: us-west-1\n          default-label: latest\n</code></pre>\n<p>And this is lengthy, but it's what happens when I run it:</p>\n<pre><code>2023-10-19T15:23:54.915-05:00  INFO 54547 --- [           main] c.t.s.SpringCloudConfigServerApplication : Starting SpringCloudConfigServerApplication using Java 17.0.8 with PID 54547 (/Users/jpl/Work/Research/SpringCloudConfigServer/target/classes started by jpl in /Users/jpl/Work/Research/SpringCloudConfigServer)\n2023-10-19T15:23:54.916-05:00  INFO 54547 --- [           main] c.t.s.SpringCloudConfigServerApplication : The following 1 profile is active: &quot;aws-secretsmanager&quot;\n2023-10-19T15:23:55.281-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-19T15:23:55.281-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n2023-10-19T15:23:55.288-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.\n2023-10-19T15:23:55.294-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-19T15:23:55.295-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.\n2023-10-19T15:23:55.298-05:00  INFO 54547 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 0 ms. Found 0 Redis repository interfaces.\n2023-10-19T15:23:55.386-05:00  INFO 54547 --- [           main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=50679c0d-1bc9-3d1c-bef4-1fae13e98217\n2023-10-19T15:23:55.549-05:00  INFO 54547 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8888 (http)\n2023-10-19T15:23:55.552-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-10-19T15:23:55.552-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.13]\n2023-10-19T15:23:55.593-05:00  INFO 54547 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-10-19T15:23:55.594-05:00  INFO 54547 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 657 ms\n2023-10-19T15:23:55.775-05:00  WARN 54547 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2023-10-19T15:23:55.777-05:00  INFO 54547 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-10-19T15:23:55.785-05:00  INFO 54547 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger :\n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-10-19T15:23:55.795-05:00 ERROR 54547 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   :\n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (the profiles aws-secretsmanager are currently active).\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>I'm not even close to getting this to work, and I still haven't gotten to the point of being able to specify my AWS credentials.</p>\n<p>I'm using IntelliJ, which is pretty good helping me write my application.yml file, but it flat out doesn't recognize anything related to specifying AWS credentials. I don't know if I just don't have the right dependencies or what is wrong.</p>\n<p>Does anyone have an actual working application that uses AWS anything with Spring Cloud Config?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":2229513,"reputation":5172,"user_id":1967484,"display_name":"Deadron"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697747341,"creation_date":1697747341,"answer_id":77326904,"question_id":76956047,"body_markdown":"Just don&#39;t map the field if its null. \r\n\r\n\r\n    if (orgPatient.getDob() != null) updatedUser.setDob(orgPatient.getDob());\r\nYour other option is to make the Dob field required and return a 400 response if its null.","title":"Getting a null error while hitting Update API for the field I dont need to change AND how to pass multiple REQUEST BODY?","body":"<p>Just don't map the field if its null.</p>\n<pre><code>if (orgPatient.getDob() != null) updatedUser.setDob(orgPatient.getDob());\n</code></pre>\n<p>Your other option is to make the Dob field required and return a 400 response if its null.</p>\n"}],"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697747341,"creation_date":1692729396,"question_id":76956047,"body_markdown":"I&#39;m getting field DOB cant be null while hitting update API, but I don&#39;t want to update DOB so not passing it in payload on Postman. Still getting this error. DOB field is set to NOT NULL in database, but its a update API.\r\n\r\nAND\r\n\r\nI am sending 2 @RequestBody in Controller Function, how can I send  in single?  \r\n\r\nERROR\r\n```\r\njava.sql.SQLIntegrityConstraintViolationException: Column &#39;dob&#39; cannot be null\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1040) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1350) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1025) ~[mysql-connector-java-8.0.26.jar:8.0.26]\r\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na].............\r\n```\r\n\r\n**Service Code**   \r\nI have two two different tables and model class, **orgPatient and PatientContact**, and I have to update in both tables accordingly. \r\n```\r\npublic String updateColumn(String PatientId, OrgPatient orgPatient,PatientContact patientContact) {\r\n\r\n            Patient existPatient = PatientRepository.findByPatientId(PatientId);\r\n        \r\n        if (existPatient != null) {\r\n         \r\n\r\n            OrgPatient updatedUser = orgPatientRepository.findByOrgPatientId(PatientId);\r\n    PatientContact updatedContactUser = patientContactRepository.findByPatientId(PatientId);\r\n          \r\n\r\n            if (patientOrgId != null) {\r\n                updatedUser.setFirstName(orgPatient.getFirstName());\r\n                updatedUser.setMiddleName(orgPatient.getMiddleName());\r\n                updatedUser.setLastName(orgPatient.getLastName());\r\n                updatedUser.setDob(orgPatient.getDob());\r\n                updatedUser.setGender(orgPatient.getGender());\r\n         \r\n\r\n                updatedContactUser.setContactNumberType(patientContact.getContactNumberType());\r\n                updatedContactUser.setContactNumer(patientContact.getContactNumer());\r\n                updatedContactUser.setContactAreaCode(patientContact.getContactAreaCode());\r\n\r\n                orgPatientRepository.save(updatedUser);\r\n                patientContactRepository.save(updatedContactUser);\r\n                return &quot;updated&quot;;\r\n            } \r\n        }\r\n\r\n```\r\n\r\nController Class\r\n```\r\n@PutMapping(value=&quot;/update/{PatientId}&quot;)\r\n    public ResponseEntity&lt;String&gt; updateOrg(@PathVariable String PatientId,\r\n                                            @RequestBody OrgPatient orgPatient,\r\n                                            @RequestBody PatientContact patientContact) {\r\n\r\n        String ans=  updateOrgPatientService.updateOrgColumn(PatientId,orgPatient,patientContact);\r\n     \r\n       return ResponseEntity.ok(ans);\r\n    }\r\n```","title":"Getting a null error while hitting Update API for the field I dont need to change AND how to pass multiple REQUEST BODY?","body":"<p>I'm getting field DOB cant be null while hitting update API, but I don't want to update DOB so not passing it in payload on Postman. Still getting this error. DOB field is set to NOT NULL in database, but its a update API.</p>\n<p>AND</p>\n<p>I am sending 2 @RequestBody in Controller Function, how can I send  in single?</p>\n<p>ERROR</p>\n<pre><code>java.sql.SQLIntegrityConstraintViolationException: Column 'dob' cannot be null\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1092) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1040) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1350) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:1025) ~[mysql-connector-java-8.0.26.jar:8.0.26]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na].............\n</code></pre>\n<p><strong>Service Code</strong><br />\nI have two two different tables and model class, <strong>orgPatient and PatientContact</strong>, and I have to update in both tables accordingly.</p>\n<pre><code>public String updateColumn(String PatientId, OrgPatient orgPatient,PatientContact patientContact) {\n\n            Patient existPatient = PatientRepository.findByPatientId(PatientId);\n        \n        if (existPatient != null) {\n         \n\n            OrgPatient updatedUser = orgPatientRepository.findByOrgPatientId(PatientId);\n    PatientContact updatedContactUser = patientContactRepository.findByPatientId(PatientId);\n          \n\n            if (patientOrgId != null) {\n                updatedUser.setFirstName(orgPatient.getFirstName());\n                updatedUser.setMiddleName(orgPatient.getMiddleName());\n                updatedUser.setLastName(orgPatient.getLastName());\n                updatedUser.setDob(orgPatient.getDob());\n                updatedUser.setGender(orgPatient.getGender());\n         \n\n                updatedContactUser.setContactNumberType(patientContact.getContactNumberType());\n                updatedContactUser.setContactNumer(patientContact.getContactNumer());\n                updatedContactUser.setContactAreaCode(patientContact.getContactAreaCode());\n\n                orgPatientRepository.save(updatedUser);\n                patientContactRepository.save(updatedContactUser);\n                return &quot;updated&quot;;\n            } \n        }\n\n</code></pre>\n<p>Controller Class</p>\n<pre><code>@PutMapping(value=&quot;/update/{PatientId}&quot;)\n    public ResponseEntity&lt;String&gt; updateOrg(@PathVariable String PatientId,\n                                            @RequestBody OrgPatient orgPatient,\n                                            @RequestBody PatientContact patientContact) {\n\n        String ans=  updateOrgPatientService.updateOrgColumn(PatientId,orgPatient,patientContact);\n     \n       return ResponseEntity.ok(ans);\n    }\n</code></pre>\n"},{"tags":["java","gradle","javafx","build.gradle"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1697746592,"post_id":77326715,"comment_id":136322096,"body_markdown":"[Documentation on the build-scan plugin](https://plugins.gradle.org/plugin/com.gradle.build-scan), and [user manual](https://docs.gradle.com/enterprise/gradle-plugin/).  From the user manual, setting this plugin up to work correctly looks complicated and is out of my area of expertise.","body":"<a href=\"https://plugins.gradle.org/plugin/com.gradle.build-scan\" rel=\"nofollow noreferrer\">Documentation on the build-scan plugin</a>, and <a href=\"https://docs.gradle.com/enterprise/gradle-plugin/\" rel=\"nofollow noreferrer\">user manual</a>.  From the user manual, setting this plugin up to work correctly looks complicated and is out of my area of expertise."}],"owner":{"account_id":19720332,"reputation":9,"user_id":14438815,"display_name":"Harshraj Singh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697746674,"creation_date":1697745292,"question_id":77326715,"body_markdown":"**here is my build.gradle file**\r\n\r\n\r\n```\r\nimport org.apache.tools.ant.taskdefs.condition.Os\r\n\r\n\r\n\r\nbuildscript {\r\n    dependencies {\r\n        classpath group: &#39;de.dynamicfiles.projects.gradle.plugins&#39;, name: &#39;javafx-gradle-plugin&#39;, version: &#39;8.8.2&#39;\r\n        classpath &quot;com.gradle:build-scan-plugin:1.11&quot;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n}\r\n\r\n\r\napply plugin: &quot;com.gradle.build-scan&quot;\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;idea&#39;\r\napply plugin: &#39;application&#39;\r\napply plugin: &#39;javafx-gradle-plugin&#39;\r\napply plugin: &#39;war&#39; // for build excludes\r\n\r\n\r\nsourceSets {\r\n    main {\r\n        resources {\r\n            exclude &#39;Outputs/**&#39;\r\n        }\r\n    }\r\n}\r\n\r\n//jar.enabled = false\r\nsourceCompatibility = 1.8\r\ntargetCompatibility = 1.8\r\nmainClassName = &quot;Main&quot;\r\n\r\nrepositories{\r\n    //maven { url &quot;https://oss.sonatype.org/content/repositories/snapshots&quot; }\r\n    mavenCentral()\r\n}\r\n\r\njar {\r\n    zip64 = true\r\n}\r\n\r\next {\r\n\r\n    if (Os.isFamily(Os.FAMILY_UNIX)) {\r\n        os = &#39;linux&#39;\r\n    }\r\n    if (Os.isFamily(Os.FAMILY_MAC)) {\r\n        os = &#39;macosx&#39;\r\n    }\r\n    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\r\n        os = &#39;windows&#39;\r\n    }\r\n    arch = System.getProperty(&quot;os.arch&quot;)\r\n\r\n    if(arch == &#39;amd64&#39;){\r\n        arch = &#39;x86_64&#39;\r\n    }\r\n    opencvBinaryClassifer = os+&#39;-&#39;+arch\r\n\r\n}\r\n\r\ndependencies {\r\n\r\n    // Local libraries\r\n    compile fileTree(&#39;lib&#39;)\r\n\r\n    // General\r\n    compile group: &#39;colt&#39;, name: &#39;colt&#39;, version: &#39;1.2.0&#39;\r\n    compile group: &#39;com.google.guava&#39;, name: &#39;guava&#39;, version: &#39;23.3-jre&#39;\r\n    compile group: &#39;org.apache.commons&#39;, name: &#39;commons-io&#39;, version: &#39;1.3.2&#39;\r\n\r\n    // Tesseract - ocr\r\n    compile group: &#39;org.bytedeco.javacpp-presets&#39;, name: &#39;tesseract&#39;, version: &#39;3.04.01-1.3&#39;\r\n    compile group: &#39;org.bytedeco.javacpp-presets&#39;, name: &#39;tesseract&#39;, version: &#39;3.04.01-1.3&#39;, classifier: opencvBinaryClassifer\r\n    compile group: &#39;org.bytedeco.javacpp-presets&#39;, name: &#39;leptonica&#39;, version: &#39;1.73-1.3&#39;, classifier: opencvBinaryClassifer\r\n    compile group: &#39;org.languagetool&#39;, name: &#39;language-en&#39;, version: &#39;3.8&#39;\r\n\r\n    // Testing\r\n    testCompile group: &#39;org.loadui&#39;, name: &#39;testFx&#39;, version: &#39;3.1.2&#39;\r\n    testCompile group: &#39;org.testfx&#39;, name: &#39;testfx-core&#39;, version: &#39;4.0.8-alpha&#39;\r\n    compile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;\r\n}\r\n\r\ntest {\r\n    testLogging.showStandardStreams = true\r\n}\r\n\r\njfx{\r\n    verbose = true\r\n    appName = &quot;VideoText Extractor&quot;\r\n    mainClass = &#39;Main&#39;\r\n    vendor = &#39;Nikiforos Archakis&#39;\r\n    //bundler = &#39;windows.app&#39;\r\n//    bundleArguments = [\r\n//            &#39;runtime&#39;: &#39;C:\\\\Program Files\\\\Java\\\\jdk1.8.0_144\\\\jre&#39;\r\n//    ]\r\n}\r\n```\r\n\r\nam trying to run this application and getting error\r\n1. i tried changing the gradle to version 11 in settinng.\r\n2. tried uncomment this *apply plugin: &quot;com.gradle.build-scan&quot;*\r\n\r\n\r\n\r\n\r\n- [**This is the error am getting***your text*]An exception occurred applying plugin request [id: &#39;com.gradle.build-scan&#39;, version: &#39;3.15.1&#39;]\r\n&gt; Failed to apply plugin &#39;com.gradle.build-scan&#39;.\r\n   &gt; The build scan plugin is not compatible with this version of Gradle.\r\n\r\n\r\n**am trying to run a old java applicaion but unable to run it. he apllication is quite old. \r\nPlease assist.**","title":"Failed to apply plugin &#39;com.gradle.build-scan&#39;","body":"<p><strong>here is my build.gradle file</strong></p>\n<pre><code>import org.apache.tools.ant.taskdefs.condition.Os\n\n\n\nbuildscript {\n    dependencies {\n        classpath group: 'de.dynamicfiles.projects.gradle.plugins', name: 'javafx-gradle-plugin', version: '8.8.2'\n        classpath &quot;com.gradle:build-scan-plugin:1.11&quot;\n    }\n    repositories {\n        mavenCentral()\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n}\n\n\napply plugin: &quot;com.gradle.build-scan&quot;\napply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'application'\napply plugin: 'javafx-gradle-plugin'\napply plugin: 'war' // for build excludes\n\n\nsourceSets {\n    main {\n        resources {\n            exclude 'Outputs/**'\n        }\n    }\n}\n\n//jar.enabled = false\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\nmainClassName = &quot;Main&quot;\n\nrepositories{\n    //maven { url &quot;https://oss.sonatype.org/content/repositories/snapshots&quot; }\n    mavenCentral()\n}\n\njar {\n    zip64 = true\n}\n\next {\n\n    if (Os.isFamily(Os.FAMILY_UNIX)) {\n        os = 'linux'\n    }\n    if (Os.isFamily(Os.FAMILY_MAC)) {\n        os = 'macosx'\n    }\n    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n        os = 'windows'\n    }\n    arch = System.getProperty(&quot;os.arch&quot;)\n\n    if(arch == 'amd64'){\n        arch = 'x86_64'\n    }\n    opencvBinaryClassifer = os+'-'+arch\n\n}\n\ndependencies {\n\n    // Local libraries\n    compile fileTree('lib')\n\n    // General\n    compile group: 'colt', name: 'colt', version: '1.2.0'\n    compile group: 'com.google.guava', name: 'guava', version: '23.3-jre'\n    compile group: 'org.apache.commons', name: 'commons-io', version: '1.3.2'\n\n    // Tesseract - ocr\n    compile group: 'org.bytedeco.javacpp-presets', name: 'tesseract', version: '3.04.01-1.3'\n    compile group: 'org.bytedeco.javacpp-presets', name: 'tesseract', version: '3.04.01-1.3', classifier: opencvBinaryClassifer\n    compile group: 'org.bytedeco.javacpp-presets', name: 'leptonica', version: '1.73-1.3', classifier: opencvBinaryClassifer\n    compile group: 'org.languagetool', name: 'language-en', version: '3.8'\n\n    // Testing\n    testCompile group: 'org.loadui', name: 'testFx', version: '3.1.2'\n    testCompile group: 'org.testfx', name: 'testfx-core', version: '4.0.8-alpha'\n    compile group: 'junit', name: 'junit', version: '4.12'\n}\n\ntest {\n    testLogging.showStandardStreams = true\n}\n\njfx{\n    verbose = true\n    appName = &quot;VideoText Extractor&quot;\n    mainClass = 'Main'\n    vendor = 'Nikiforos Archakis'\n    //bundler = 'windows.app'\n//    bundleArguments = [\n//            'runtime': 'C:\\\\Program Files\\\\Java\\\\jdk1.8.0_144\\\\jre'\n//    ]\n}\n</code></pre>\n<p>am trying to run this application and getting error</p>\n<ol>\n<li>i tried changing the gradle to version 11 in settinng.</li>\n<li>tried uncomment this <em>apply plugin: &quot;com.gradle.build-scan&quot;</em></li>\n</ol>\n<ul>\n<li>[<strong>This is the error am getting</strong><em>your text</em>]An exception occurred applying plugin request [id: 'com.gradle.build-scan', version: '3.15.1']</li>\n</ul>\n<blockquote>\n<p>Failed to apply plugin 'com.gradle.build-scan'.\nThe build scan plugin is not compatible with this version of Gradle.</p>\n</blockquote>\n<p><strong>am trying to run a old java applicaion but unable to run it. he apllication is quite old.\nPlease assist.</strong></p>\n"},{"tags":["java","telegram","telegram-bot"],"comments":[{"owner":{"account_id":6313442,"reputation":36281,"user_id":5625547,"display_name":"0stone0"},"score":0,"creation_date":1697794941,"post_id":77326619,"comment_id":136327407,"body_markdown":"You left your **Private Bot Token** in your code. You should revoke it **ASAP** by talking to the [@BotFather](https://t.me/BotFather). People might abuse the token.","body":"You left your <b>Private Bot Token</b> in your code. You should revoke it <b>ASAP</b> by talking to the <a href=\"https://t.me/BotFather\" rel=\"nofollow noreferrer\">@BotFather</a>. People might abuse the token."},{"owner":{"account_id":29663428,"reputation":11,"user_id":22734519,"display_name":"Jackie Chan"},"score":0,"creation_date":1697829084,"post_id":77326619,"comment_id":136333398,"body_markdown":"Not scary. This is temporary for the test. Thank you for your attention.","body":"Not scary. This is temporary for the test. Thank you for your attention."}],"owner":{"account_id":29663428,"reputation":11,"user_id":22734519,"display_name":"Jackie Chan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697746593,"creation_date":1697744268,"question_id":77326619,"body_markdown":"\r\n\r\n\r\nI send photos to the group\r\n\r\n\r\n\t\tpublic void executeImages() {\r\n\r\n\t\t        InputMediaPhoto photo1 = new InputMediaPhoto();\r\n\t\t        photo1.setMedia(new File(&quot;image.jpg&quot;), &quot;image.jpg&quot;);\r\n\t\t        photo1.setCaption(&quot;Hello World&quot;);\r\n\r\n\t\t        InputMediaPhoto photo2 = new InputMediaPhoto();\r\n\t\t        photo2.setMedia(new File(&quot;image2.jpg&quot;), &quot;image2.jpg&quot;);\r\n\t\t        \r\n\t\t        // ......... And 8 more photos\r\n\r\n\r\n\t\t        List&lt;InputMedia&gt; mediaItems = new ArrayList&lt;&gt;();\r\n\t\t        mediaItems.add(photo1);\r\n\t\t        mediaItems.add(photo2);\r\n\r\n\t\t        SendMediaGroup sendMediaGroup = new SendMediaGroup();\r\n\t\t        sendMediaGroup.setChatId(&quot;1234&quot;);\r\n\t\t        sendMediaGroup.setMedias(mediaItems);\r\n\r\n\t\t        Message response = execute(sendMediaGroup);\r\n\t\t        System.out.println(response);\r\n\r\n\t\t}\r\n\r\n\r\nafter which I receive a response\r\n\r\n\t\t......\r\n\t\t&quot;photo=&quot;[\r\n\t\t   PhotoSize(fileId=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA3MAAzAE,\r\n\t\t   fileUniqueId=AQADCdIxG8qriUl4,\r\n\t\t   width=90,\r\n\t\t   height=90,\r\n\t\t   fileSize=2673,\r\n\t\t   &quot;filePath=null)&quot;,\r\n\t\t   PhotoSize(fileId=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA20AAzAE,\r\n\t\t   fileUniqueId=AQADCdIxG8qriUly,\r\n\t\t   width=225,\r\n\t\t   height=225,\r\n\t\t   fileSize=14378,\r\n\t\t   &quot;filePath=null)&quot;\r\n\t\t]\r\n\t\t......\r\n\r\nPlease tell me how can I use this answer to get all the links to the photos?\r\n\r\nI tried using this method, https://stackoverflow.com/questions/43649537/how-can-i-get-file-path-of-telegram-bot  but it doesn&#39;t work.\r\n\r\n\r\n\r\n\r\n\t\tI use\r\n\t\thttps://api.telegram.org/file/bot5882468685:AAH3QIsQt3849xI-yKMJ_MV7QcN8XK7e32Q/getFile?file_id=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA3MAAzAE\r\n\r\n\t\treturn\r\n\t\t{&quot;ok&quot;:false,&quot;error_code&quot;:404,&quot;description&quot;:&quot;Not Found&quot;}","title":"Java Telegram Bot - How to get links to photos?","body":"<p>I send photos to the group</p>\n<pre><code>    public void executeImages() {\n\n            InputMediaPhoto photo1 = new InputMediaPhoto();\n            photo1.setMedia(new File(&quot;image.jpg&quot;), &quot;image.jpg&quot;);\n            photo1.setCaption(&quot;Hello World&quot;);\n\n            InputMediaPhoto photo2 = new InputMediaPhoto();\n            photo2.setMedia(new File(&quot;image2.jpg&quot;), &quot;image2.jpg&quot;);\n            \n            // ......... And 8 more photos\n\n\n            List&lt;InputMedia&gt; mediaItems = new ArrayList&lt;&gt;();\n            mediaItems.add(photo1);\n            mediaItems.add(photo2);\n\n            SendMediaGroup sendMediaGroup = new SendMediaGroup();\n            sendMediaGroup.setChatId(&quot;1234&quot;);\n            sendMediaGroup.setMedias(mediaItems);\n\n            Message response = execute(sendMediaGroup);\n            System.out.println(response);\n\n    }\n</code></pre>\n<p>after which I receive a response</p>\n<pre><code>    ......\n    &quot;photo=&quot;[\n       PhotoSize(fileId=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA3MAAzAE,\n       fileUniqueId=AQADCdIxG8qriUl4,\n       width=90,\n       height=90,\n       fileSize=2673,\n       &quot;filePath=null)&quot;,\n       PhotoSize(fileId=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA20AAzAE,\n       fileUniqueId=AQADCdIxG8qriUly,\n       width=225,\n       height=225,\n       fileSize=14378,\n       &quot;filePath=null)&quot;\n    ]\n    ......\n</code></pre>\n<p>Please tell me how can I use this answer to get all the links to the photos?</p>\n<p>I tried using this method, <a href=\"https://stackoverflow.com/questions/43649537/how-can-i-get-file-path-of-telegram-bot\">How can i get file_path of telegram bot</a>  but it doesn't work.</p>\n<pre><code>    I use\n    https://api.telegram.org/file/bot5882468685:AAH3QIsQt3849xI-yKMJ_MV7QcN8XK7e32Q/getFile?file_id=AgACAgIAAx0EdU4tbQACArplMYIf1aguPWCCTyJtJdyDtv22SwACCdIxG8qriUmXo4IzUpGK7wEAAwIAA3MAAzAE\n\n    return\n    {&quot;ok&quot;:false,&quot;error_code&quot;:404,&quot;description&quot;:&quot;Not Found&quot;}\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":0,"creation_date":1697659109,"post_id":77318820,"comment_id":136309179,"body_markdown":"Run Gradle with `--stacktrace` or `--debug` options to get more information. As it is, your question has almost no information that can help solve the problem. The error seems to be a C++ problem somehow?!","body":"Run Gradle with <code>--stacktrace</code> or <code>--debug</code> options to get more information. As it is, your question has almost no information that can help solve the problem. The error seems to be a C++ problem somehow?!"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697660065,"post_id":77318820,"comment_id":136309353,"body_markdown":"Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example).","body":"Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"score":0,"creation_date":1697739020,"post_id":77318820,"comment_id":136320973,"body_markdown":"@Renato I was updated my post","body":"@Renato I was updated my post"}],"owner":{"account_id":9162277,"reputation":14688,"user_id":6813231,"accept_rate":56,"display_name":"Alexei"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697746507,"creation_date":1697654121,"question_id":77318820,"body_markdown":"    Linux Mint 21\r\n    Java 8\r\n    Gradle 7.3\r\n\r\nI try to run my java app like this, but rise error:\r\n\r\n     ./gradlew app:run\r\n\r\n    \r\n    malloc(): mismatching next-&gt;prev_size (unsorted)\r\n    \r\n    &gt; Task :app:run FAILED\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:app:run&#39;.\r\n    &gt; Process &#39;command &#39;/home/alexei/.sdkman/candidates/java/jdk1.8.0_381/bin/java&#39;&#39; finished with non-zero exit value 134\r\n    \r\n    * Try:\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n    \r\n    * Exception is:\r\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:app:run&#39;.\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:145)\r\n            at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:143)\r\n            at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)\r\n            at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n            at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n            at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n            at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n            at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n            at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n            at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n            at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n            at org.gradle.api.internal.\r\n\r\n\r\n","title":"Gradle: malloc(): mismatching next-&gt;prev_size (unsorted)","body":"<pre><code>Linux Mint 21\nJava 8\nGradle 7.3\n</code></pre>\n<p>I try to run my java app like this, but rise error:</p>\n<pre><code> ./gradlew app:run\n\n\nmalloc(): mismatching next-&gt;prev_size (unsorted)\n\n&gt; Task :app:run FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:run'.\n&gt; Process 'command '/home/alexei/.sdkman/candidates/java/jdk1.8.0_381/bin/java'' finished with non-zero exit value 134\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:run'.\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:145)\n        at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:143)\n        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:131)\n        at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n        at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n        at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n        at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n        at org.gradle.api.internal.\n</code></pre>\n"},{"tags":["java","qgis","mapsforge"],"owner":{"account_id":28692518,"reputation":1,"user_id":21971460,"display_name":"quadrixxx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697745938,"creation_date":1697745938,"question_id":77326786,"body_markdown":"I got a mapsforge/vtm file with extension *.map. How do i open this file in qgis, and can i?\r\n\r\nI saw through all the internet, but did not find needed information. Tried to convert this file by any means. Was looking for the qgis module, that could help me. Nothing worked.","title":"Is there any way to open .map file in QGIS?","body":"<p>I got a mapsforge/vtm file with extension *.map. How do i open this file in qgis, and can i?</p>\n<p>I saw through all the internet, but did not find needed information. Tried to convert this file by any means. Was looking for the qgis module, that could help me. Nothing worked.</p>\n"},{"tags":["java","eclipse","macos","jvm"],"comments":[{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1410332900,"post_id":25753966,"comment_id":40280805,"body_markdown":"Make sure you are using the 64 bit version of Mac Eclipse","body":"Make sure you are using the 64 bit version of Mac Eclipse"},{"owner":{"account_id":1333279,"reputation":6465,"user_id":1276636,"accept_rate":62,"display_name":"Sufian"},"score":0,"creation_date":1415188443,"post_id":25753966,"comment_id":42095090,"body_markdown":"For me installing Eclipse Mars fixed it for me. I don&#39;t think it was anything to do with the 32 or 64bits since my Activity Monitor (yes I&#39;m on OSX) didn&#39;t say x32 against Eclipse. +1 for @greg-449 however.","body":"For me installing Eclipse Mars fixed it for me. I don&#39;t think it was anything to do with the 32 or 64bits since my Activity Monitor (yes I&#39;m on OSX) didn&#39;t say x32 against Eclipse. +1 for @greg-449 however."},{"owner":{"account_id":3657924,"reputation":1867,"user_id":3048431,"display_name":"Oguz"},"score":0,"creation_date":1576052973,"post_id":25753966,"comment_id":104769304,"body_markdown":"You can find a detailed explanation here https://stackoverflow.com/questions/24589932/mac-os-jdk1-7-and-1-8-does-not-contain-the-jni-createjavavm-symbol/25869530","body":"You can find a detailed explanation here <a href=\"https://stackoverflow.com/questions/24589932/mac-os-jdk1-7-and-1-8-does-not-contain-the-jni-createjavavm-symbol/25869530\" title=\"mac os jdk1 7 and 1 8 does not contain the jni createjavavm symbol\">stackoverflow.com/questions/24589932/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2447495,"reputation":2749,"user_id":2134453,"display_name":"Rajeev Sampath"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1446466310,"creation_date":1446466310,"answer_id":33477302,"question_id":25753966,"body_markdown":"If you are installing eclipse with the Eclipse installer, this can happen when the installer is not pointed to the correct jvm location. &lt;br&gt;\r\nYou can correct it as follows. &lt;br&gt;&lt;br&gt;\r\n1. Right click the installer file and select &#39;show package contents&#39;&lt;br&gt;\r\n2. Go to Contents and open Info.plist&lt;br&gt;\r\n3. At the bottom of this file, you&#39;ll see a commented section with the tag `&lt;string&gt;-vm&lt;/string&gt;` with some paths. You can set the correct JAVA_HOME path there and uncomment that section. (running `echo $JAVA_HOME` in console will get you the current setting)\r\n","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>If you are installing eclipse with the Eclipse installer, this can happen when the installer is not pointed to the correct jvm location. <br>\nYou can correct it as follows. <br><br>\n1. Right click the installer file and select 'show package contents'<br>\n2. Go to Contents and open Info.plist<br>\n3. At the bottom of this file, you'll see a commented section with the tag <code>&lt;string&gt;-vm&lt;/string&gt;</code> with some paths. You can set the correct JAVA_HOME path there and uncomment that section. (running <code>echo $JAVA_HOME</code> in console will get you the current setting)</p>\n"},{"tags":[],"owner":{"account_id":182529,"reputation":6991,"user_id":417291,"accept_rate":71,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577059795,"creation_date":1576958456,"answer_id":59439447,"question_id":25753966,"body_markdown":"There are several important details that I found during the latest Eclipse installation on Mac OS\r\n\r\n - Info.plist is really locked.  I unlocked it using a command line and\r\n   then  &quot;chmod 666 Info.plist&quot;. \r\n - The versions of the vm string in the Info.plist are specific for the JDK. I was not able to make this work with JDK 13.  So, I used my version of Java 8: \r\n\r\n/Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home/bin/java\r\n\r\n - appeared important: JAVA_HOME should exactly correspond to what you have in Info.plist\r\n\r\nTo unlock Info.plist you need to extract Eclipse Installer.app from the dmg file. Then the following commands from the directory containing  Eclipse Installer.app :\r\n\r\n    cd &quot;Eclipse Installer.app&quot;/Contents\r\n    chmod 666 Info.plist \r\n\r\n","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>There are several important details that I found during the latest Eclipse installation on Mac OS</p>\n\n<ul>\n<li>Info.plist is really locked.  I unlocked it using a command line and\nthen  \"chmod 666 Info.plist\". </li>\n<li>The versions of the vm string in the Info.plist are specific for the JDK. I was not able to make this work with JDK 13.  So, I used my version of Java 8: </li>\n</ul>\n\n<p>/Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home/bin/java</p>\n\n<ul>\n<li>appeared important: JAVA_HOME should exactly correspond to what you have in Info.plist</li>\n</ul>\n\n<p>To unlock Info.plist you need to extract Eclipse Installer.app from the dmg file. Then the following commands from the directory containing  Eclipse Installer.app :</p>\n\n<pre><code>cd \"Eclipse Installer.app\"/Contents\nchmod 666 Info.plist \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2180804,"reputation":381,"user_id":2188316,"accept_rate":86,"display_name":"wnm3"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1579186455,"creation_date":1579186455,"answer_id":59772254,"question_id":25753966,"body_markdown":"In my case, I&#39;d had several jdk&#39;s installed as shown when running the command:\r\n```\r\n/usr/libexec/java_home -V\r\n```\r\nand the installer was complaining about the Java JDK 11 not having what it needed. Since I&#39;d backed off using 11 in favor of 8 I was okay removing this JDK from my system using the command:\r\n```\r\ncd /Library/Java/JavaVirtualMachines\r\nsudo rm -fr jdk-11.0.1.jdk\r\n```\r\nthis made my jdk1.8.0_221.jdk the most current jdk and the installer worked fine.\r\n\r\nYou could probably mv the jdk-11.0.1.jdk to another location to get Eclipse installed using a different jdk version and then move it back.","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>In my case, I'd had several jdk's installed as shown when running the command:</p>\n\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n\n<p>and the installer was complaining about the Java JDK 11 not having what it needed. Since I'd backed off using 11 in favor of 8 I was okay removing this JDK from my system using the command:</p>\n\n<pre><code>cd /Library/Java/JavaVirtualMachines\nsudo rm -fr jdk-11.0.1.jdk\n</code></pre>\n\n<p>this made my jdk1.8.0_221.jdk the most current jdk and the installer worked fine.</p>\n\n<p>You could probably mv the jdk-11.0.1.jdk to another location to get Eclipse installed using a different jdk version and then move it back.</p>\n"},{"tags":[],"owner":{"account_id":4194095,"reputation":9,"user_id":3435910,"display_name":"TomaszZ."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581551378,"creation_date":1581548543,"answer_id":60198152,"question_id":25753966,"body_markdown":"I have run into this problem and ended up switching to a newer build of openjdk 13.0.2 by pointing eclipse to it directly in info.plist to resolve the issue. It did not work with build build 12.0.2+8. The build 12.0.2+10 addressed the issue.\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk-12.0.2.openjdk/Contents/Home/bin\r\n    mychine1:bin$ ./java -version\r\n    openjdk version &quot;12.0.2&quot; 2019-07-16\r\n    OpenJDK Runtime Environment (build 12.0.2+10)\r\n    OpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode, sharing)","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I have run into this problem and ended up switching to a newer build of openjdk 13.0.2 by pointing eclipse to it directly in info.plist to resolve the issue. It did not work with build build 12.0.2+8. The build 12.0.2+10 addressed the issue.</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk-12.0.2.openjdk/Contents/Home/bin\nmychine1:bin$ ./java -version\nopenjdk version \"12.0.2\" 2019-07-16\nOpenJDK Runtime Environment (build 12.0.2+10)\nOpenJDK 64-Bit Server VM (build 12.0.2+10, mixed mode, sharing)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18803121,"reputation":61,"user_id":13713036,"display_name":"mypseudonym"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592838651,"creation_date":1592837831,"answer_id":62517341,"question_id":25753966,"body_markdown":"I got different errors with different Java versions (all varieties of java 11).\r\n\r\nFor me, it started with-\r\n&gt; “jdk-11.0.1.jdk” cannot be opened because the developer cannot be\r\n&gt; verified.\r\n\r\nI tried to make this work and once I got past this error, I hit-\r\n&gt; The JVM shared library does not contain the JNI_CreateJavaVM symbol.\r\n\r\nThen I tried with another java 11, and ran into-\r\n&gt; failed to create java virtual machine\r\n\r\nHere&#39;re the different versions I have-\r\n\r\n&gt; **/usr/libexec/java_home -V**\r\n&gt; \r\n&gt; Matching Java Virtual Machines (4):\r\n&gt;\r\n&gt;     11.0.5, x86_64:\t&quot;AdoptOpenJDK 11&quot;\t/Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home\r\n&gt;     11.0.4, x86_64:\t&quot;OpenJDK 11.0.4&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.0.4+11/Contents/Home\r\n&gt;     11.0.1, x86_64:\t&quot;OpenJDK 11.0.1&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home\r\n&gt;     1.8.0_161, x86_64:\t&quot;Java SE 8&quot;\t/Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home\r\n\r\nI had another variant of java 11 too that you don&#39;t see in the list above as I removed it.\r\n\r\nWhat finally worked for me- **OpenJDK 11.0.4.**\r\n&gt;     11.0.4, x86_64:\t&quot;OpenJDK 11.0.4&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.0.4+11/Contents/Home\r\nI also re-installed Eclipse (2019-12 vers) using Eclipse Installer on Mac. That&#39;s how I had installed it earlier too, but it hadn&#39;t worked with other java 11&#39;s.\r\nNote-\r\n\r\n - 1.8 worked as well, but my project needs 11.\r\n - For the *Failed to create the Java Virtual Machine* problem, there&#39;s a solution around libjli.dylib mentioned in this link- https://www.eclipse.org/forums/index.php?t=msg&amp;th=1102885&amp;goto=1823113&amp;#msg_1823113. It did not work for me. I tried many other solutions suggested in this link and in various SO pages as well, but none of those worked on my Macbook.","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I got different errors with different Java versions (all varieties of java 11).</p>\n<p>For me, it started with-</p>\n<blockquote>\n<p>“jdk-11.0.1.jdk” cannot be opened because the developer cannot be\nverified.</p>\n</blockquote>\n<p>I tried to make this work and once I got past this error, I hit-</p>\n<blockquote>\n<p>The JVM shared library does not contain the JNI_CreateJavaVM symbol.</p>\n</blockquote>\n<p>Then I tried with another java 11, and ran into-</p>\n<blockquote>\n<p>failed to create java virtual machine</p>\n</blockquote>\n<p>Here're the different versions I have-</p>\n<blockquote>\n<p><strong>/usr/libexec/java_home -V</strong></p>\n<p>Matching Java Virtual Machines (4):</p>\n<pre><code>11.0.5, x86_64:   &quot;AdoptOpenJDK 11&quot;   /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home\n11.0.4, x86_64:   &quot;OpenJDK 11.0.4&quot;    /Library/Java/JavaVirtualMachines/jdk-11.0.4+11/Contents/Home\n11.0.1, x86_64:   &quot;OpenJDK 11.0.1&quot;    /Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home\n1.8.0_161, x86_64:    &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_161.jdk/Contents/Home\n</code></pre>\n</blockquote>\n<p>I had another variant of java 11 too that you don't see in the list above as I removed it.</p>\n<p>What finally worked for me- <strong>OpenJDK 11.0.4.</strong></p>\n<blockquote>\n<pre><code>11.0.4, x86_64:   &quot;OpenJDK 11.0.4&quot;    /Library/Java/JavaVirtualMachines/jdk-11.0.4+11/Contents/Home\n</code></pre>\n</blockquote>\n<p>I also re-installed Eclipse (2019-12 vers) using Eclipse Installer on Mac. That's how I had installed it earlier too, but it hadn't worked with other java 11's.\nNote-</p>\n<ul>\n<li>1.8 worked as well, but my project needs 11.</li>\n<li>For the <em>Failed to create the Java Virtual Machine</em> problem, there's a solution around libjli.dylib mentioned in this link- <a href=\"https://www.eclipse.org/forums/index.php?t=msg&amp;th=1102885&amp;goto=1823113&amp;#msg_1823113\" rel=\"nofollow noreferrer\">https://www.eclipse.org/forums/index.php?t=msg&amp;th=1102885&amp;goto=1823113&amp;#msg_1823113</a>. It did not work for me. I tried many other solutions suggested in this link and in various SO pages as well, but none of those worked on my Macbook.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3489231,"reputation":1064,"user_id":2919326,"display_name":"aaroncarsonart"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1621617655,"creation_date":1621617655,"answer_id":67641340,"question_id":25753966,"body_markdown":"I encountered this issue while attempting to install Eclipse IDE for Eclipse Committers, version 2021-03 (4.19.0) on macOS 11.2.3 on my MacBook Air (M1, 2020). I was using the [Azul arm64 JDK][1]. This issue was solved by installing the [OpenJDK x64][2] and updating the following file:\r\n\r\n```\r\nEclipse.app/Contents/Info.plist\r\n````\r\n\r\nto point to OpenJDK as per the instructions in [Rajeev Sampath&#39;s answer][3].  I&#39;m assuming the issue was from using an arm64 compiled JDK with Eclipse which currently only for x64.\r\n\r\n  [1]: https://www.azul.com/downloads/?version=java-16-sts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk\r\n  [2]: https://jdk.java.net/16/\r\n  [3]: https://stackoverflow.com/a/33477302/2919326","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I encountered this issue while attempting to install Eclipse IDE for Eclipse Committers, version 2021-03 (4.19.0) on macOS 11.2.3 on my MacBook Air (M1, 2020). I was using the <a href=\"https://www.azul.com/downloads/?version=java-16-sts&amp;os=macos&amp;architecture=arm-64-bit&amp;package=jdk\" rel=\"noreferrer\">Azul arm64 JDK</a>. This issue was solved by installing the <a href=\"https://jdk.java.net/16/\" rel=\"noreferrer\">OpenJDK x64</a> and updating the following file:</p>\n<pre><code>Eclipse.app/Contents/Info.plist\n</code></pre>\n<p>to point to OpenJDK as per the instructions in <a href=\"https://stackoverflow.com/a/33477302/2919326\">Rajeev Sampath's answer</a>.  I'm assuming the issue was from using an arm64 compiled JDK with Eclipse which currently only for x64.</p>\n"},{"tags":[],"owner":{"account_id":1665330,"reputation":1259,"user_id":1532857,"accept_rate":0,"display_name":"Chandra"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622843777,"creation_date":1622843777,"answer_id":67844407,"question_id":25753966,"body_markdown":"In my case, i have java 11 only installed, to solve the problem i have installed java 8 and set the java 8 in the JAVA_HOME then it started workin.","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>In my case, i have java 11 only installed, to solve the problem i have installed java 8 and set the java 8 in the JAVA_HOME then it started workin.</p>\n"},{"tags":[],"owner":{"account_id":11597202,"reputation":1,"user_id":8495588,"display_name":"Rishindra Mani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634554696,"creation_date":1634554696,"answer_id":69614865,"question_id":25753966,"body_markdown":"Try replacing libjli.dylib with openjdk11.dylib. Works like a charm!","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>Try replacing libjli.dylib with openjdk11.dylib. Works like a charm!</p>\n"},{"tags":[],"owner":{"account_id":2733661,"reputation":2717,"user_id":2356808,"accept_rate":60,"display_name":"Fay007"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1636304770,"creation_date":1636304770,"answer_id":69874704,"question_id":25753966,"body_markdown":"I have installed eclipse through Homebrew after the issue. Changing the info.plist was causing file corrupted error. Just use the script and that‘s it:\r\nhttps://formulae.brew.sh/cask/eclipse-java\r\n\r\nDiscalimer: I have also installed Temurin-17.0.1 using brew.","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I have installed eclipse through Homebrew after the issue. Changing the info.plist was causing file corrupted error. Just use the script and that‘s it:\n<a href=\"https://formulae.brew.sh/cask/eclipse-java\" rel=\"nofollow noreferrer\">https://formulae.brew.sh/cask/eclipse-java</a></p>\n<p>Discalimer: I have also installed Temurin-17.0.1 using brew.</p>\n"},{"tags":[],"owner":{"account_id":24734915,"reputation":31,"user_id":18622415,"display_name":"The Sith Lord"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648569436,"creation_date":1648569436,"answer_id":71665235,"question_id":25753966,"body_markdown":"I just downloaded the Intel based Java instead of ARM x64 and it worked.\r\nI think the problem is that Eclipse is not running natively so it needs a Intel based Java version","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I just downloaded the Intel based Java instead of ARM x64 and it worked.\nI think the problem is that Eclipse is not running natively so it needs a Intel based Java version</p>\n"},{"tags":[],"owner":{"account_id":4317054,"reputation":682,"user_id":3526573,"display_name":"david"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655909166,"creation_date":1655909166,"answer_id":72717653,"question_id":25753966,"body_markdown":"This happened to me running a x86 version of Eclipse on an M1 (arm64) Mac with an arm64 version of the JDK.\r\n\r\nOnce changing to the proper arm64 version of Eclipse the problem was solved.","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>This happened to me running a x86 version of Eclipse on an M1 (arm64) Mac with an arm64 version of the JDK.</p>\n<p>Once changing to the proper arm64 version of Eclipse the problem was solved.</p>\n"},{"tags":[],"owner":{"account_id":2115059,"reputation":101,"user_id":1879564,"accept_rate":60,"display_name":"Amir Baron"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1663852536,"creation_date":1663852536,"answer_id":73815333,"question_id":25753966,"body_markdown":"The solution that worked for me is to open the app from a shell instead of double clicking on it.\r\nrun `open /Applications/&lt;name&gt;` in the shell. \r\nConfiguration:\r\nApple m1\r\nopen jdk 18\r\neclipse for arm","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>The solution that worked for me is to open the app from a shell instead of double clicking on it.\nrun <code>open /Applications/&lt;name&gt;</code> in the shell.\nConfiguration:\nApple m1\nopen jdk 18\neclipse for arm</p>\n"},{"tags":[],"owner":{"account_id":969049,"reputation":2634,"user_id":991954,"display_name":"n1k1ch"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1670339482,"creation_date":1666788683,"answer_id":74208102,"question_id":25753966,"body_markdown":"If someone is struggling with this in 2022, the following download helped me:\r\n\r\nhttps://adoptium.net/temurin/releases/?version=16\r\n\r\nAnd `-vm` in `***.app/Contents/Info.plist` should be\r\n```\r\n&lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Library/Java/JavaVirtualMachines/temurin-16.jdk/Contents/Home/bin/java&lt;/string&gt;\r\n```\r\n\r\nI&#39;m on MacOS Monterey 12.5.1, Apple M1 Pro, my problem was with [Apache Directory Studio](https://directory.apache.org/studio/) - when trying to run it I was getting:\r\n```\r\nthe jvm shared library does not contain JNI_CreateJavaVM symbol\r\n```","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>If someone is struggling with this in 2022, the following download helped me:</p>\n<p><a href=\"https://adoptium.net/temurin/releases/?version=16\" rel=\"noreferrer\">https://adoptium.net/temurin/releases/?version=16</a></p>\n<p>And <code>-vm</code> in <code>***.app/Contents/Info.plist</code> should be</p>\n<pre><code>&lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Library/Java/JavaVirtualMachines/temurin-16.jdk/Contents/Home/bin/java&lt;/string&gt;\n</code></pre>\n<p>I'm on MacOS Monterey 12.5.1, Apple M1 Pro, my problem was with <a href=\"https://directory.apache.org/studio/\" rel=\"noreferrer\">Apache Directory Studio</a> - when trying to run it I was getting:</p>\n<pre><code>the jvm shared library does not contain JNI_CreateJavaVM symbol\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1018994,"reputation":2197,"user_id":1029912,"display_name":"psuzzi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1667562293,"creation_date":1667562293,"answer_id":74316533,"question_id":25753966,"body_markdown":"If somebody has the same problem with a recent version of Eclipse (2021 and above), then the problem is that your Eclipse application is x86 and you have a JVM that is ARM (Apple Silicon). \r\n\r\nTo solve the issue, in my case, I downloaded an x86 version of Java 11, and then I edited the info.plist file to point at that x86 (Intel) JVM. \r\n\r\nSo, in my case I downloaded https://adoptium.net/temurin/releases?version=11 \r\n\r\n[![Download x86 (Intel) version of JDK][1]][1]\r\n\r\n\r\nAnd then I added the following key to the info.plist\r\n\r\n    &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home/bin/java&lt;/string&gt;\r\n\r\n\r\n[![Edit info.plist by setting the location of the Intel JDK][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/775HF.png\r\n  [2]: https://i.stack.imgur.com/DqdFK.png","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>If somebody has the same problem with a recent version of Eclipse (2021 and above), then the problem is that your Eclipse application is x86 and you have a JVM that is ARM (Apple Silicon).</p>\n<p>To solve the issue, in my case, I downloaded an x86 version of Java 11, and then I edited the info.plist file to point at that x86 (Intel) JVM.</p>\n<p>So, in my case I downloaded <a href=\"https://adoptium.net/temurin/releases?version=11\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases?version=11</a></p>\n<p><a href=\"https://i.stack.imgur.com/775HF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/775HF.png\" alt=\"Download x86 (Intel) version of JDK\" /></a></p>\n<p>And then I added the following key to the info.plist</p>\n<pre><code>&lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Library/Java/JavaVirtualMachines/temurin-11.jdk/Contents/Home/bin/java&lt;/string&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/DqdFK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DqdFK.png\" alt=\"Edit info.plist by setting the location of the Intel JDK\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6634642,"reputation":896,"user_id":5122135,"display_name":"Milad"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1672922644,"creation_date":1672922644,"answer_id":75018586,"question_id":25753966,"body_markdown":"For anyone who, like me, needs to know **exactly where** to add this information, here it goes. First of all, understand where `java` is - in my case it is something like this (I use [asdf][1] but never mind that):\r\n\r\n    ~$ asdf where java\r\n    /Users/your.username/.asdf/installs/java/liberica-17.0.2+9\r\n\r\nTherefore, the string that MAT needs to know is &quot;/Users/your.username/.asdf/installs/java/liberica-17.0.2+9/bin/java&quot;. This is the string I add to MAT&#39;s .plist file:\r\n\r\n        ...\r\n        &lt;key&gt;Eclipse&lt;/key&gt;\r\n    \t\t\r\n        &lt;array&gt;\r\n          \t\t\t\r\n          &lt;string&gt;-keyring&lt;/string&gt;\r\n          &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\r\n    \r\n          &lt;string&gt;-vm&lt;/string&gt;\r\n          &lt;string&gt;/Users/your.username/.asdf/installs/java/liberica-17.0.2+9/bin/java&lt;/string&gt;      \t\t\r\n        &lt;/array&gt;\r\n        \r\n        &lt;key&gt;CFBundleDisplayName&lt;/key&gt;\r\n        &lt;string&gt;MemoryAnalyzer&lt;/string&gt;\r\n    \r\n      &lt;/dict&gt;\r\n    \r\n    &lt;/plist&gt;\r\n\r\nFor contrast, these were the original contents of the file:\r\n\r\n        ...\r\n        &lt;key&gt;Eclipse&lt;/key&gt;\r\n        \t\t\r\n        &lt;array&gt;\r\n          \t\t\t\r\n          &lt;string&gt;-keyring&lt;/string&gt;\r\n          &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\r\n          \t\t\r\n        &lt;/array&gt;\r\n        \r\n        &lt;key&gt;CFBundleDisplayName&lt;/key&gt;\r\n        &lt;string&gt;MemoryAnalyzer&lt;/string&gt;\r\n      &lt;/dict&gt;\r\n      \r\n    &lt;/plist&gt;\r\n\r\n\r\nJust for information, I am using a Mac with M1 architecture.\r\n\r\n  [1]: https://asdf-vm.com","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>For anyone who, like me, needs to know <strong>exactly where</strong> to add this information, here it goes. First of all, understand where <code>java</code> is - in my case it is something like this (I use <a href=\"https://asdf-vm.com\" rel=\"noreferrer\">asdf</a> but never mind that):</p>\n<pre><code>~$ asdf where java\n/Users/your.username/.asdf/installs/java/liberica-17.0.2+9\n</code></pre>\n<p>Therefore, the string that MAT needs to know is &quot;/Users/your.username/.asdf/installs/java/liberica-17.0.2+9/bin/java&quot;. This is the string I add to MAT's .plist file:</p>\n<pre><code>    ...\n    &lt;key&gt;Eclipse&lt;/key&gt;\n        \n    &lt;array&gt;\n                \n      &lt;string&gt;-keyring&lt;/string&gt;\n      &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\n\n      &lt;string&gt;-vm&lt;/string&gt;\n      &lt;string&gt;/Users/your.username/.asdf/installs/java/liberica-17.0.2+9/bin/java&lt;/string&gt;              \n    &lt;/array&gt;\n    \n    &lt;key&gt;CFBundleDisplayName&lt;/key&gt;\n    &lt;string&gt;MemoryAnalyzer&lt;/string&gt;\n\n  &lt;/dict&gt;\n\n&lt;/plist&gt;\n</code></pre>\n<p>For contrast, these were the original contents of the file:</p>\n<pre><code>    ...\n    &lt;key&gt;Eclipse&lt;/key&gt;\n            \n    &lt;array&gt;\n                \n      &lt;string&gt;-keyring&lt;/string&gt;\n      &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\n            \n    &lt;/array&gt;\n    \n    &lt;key&gt;CFBundleDisplayName&lt;/key&gt;\n    &lt;string&gt;MemoryAnalyzer&lt;/string&gt;\n  &lt;/dict&gt;\n  \n&lt;/plist&gt;\n</code></pre>\n<p>Just for information, I am using a Mac with M1 architecture.</p>\n"},{"tags":[],"owner":{"account_id":2530090,"reputation":79,"user_id":2198569,"display_name":"Kushan Menake"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690093237,"creation_date":1690093237,"answer_id":76746867,"question_id":25753966,"body_markdown":"I got the same error on macOS Ventura 13.4.1 on macbook M1. Following combination has resolved the issue.\r\n\r\nApache Directory version : ApacheDirectoryStudio-2.0.0.v20210717-M17\r\n[Link to download][1] \r\n\r\n\r\nJava Version : jdk-17.0.8+7\r\n[Link to Download][2]\r\n\r\n\r\n**How to use the specific version of java**\r\n\r\nUpdate the Info.plist \r\nFile Location : \r\n\r\n&gt; /Applications/ApacheDirectoryStudio.app/Contents/Info.plist\r\n\r\n        &lt;array&gt;\r\n      \t\t\t\r\n      &lt;!-- to use a specific Java version (instead of the platform&#39;s default) uncomment one of the following options,\r\n\t\t\t\t\tor add a VM found via $/usr/libexec/java_home -V --&gt;\r\n      &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Users/XXXXXXXX/dev/app/jdk-17.0.8+7/Contents/Home/bin/java&lt;/string&gt;\r\n      &lt;string&gt;-keyring&lt;/string&gt;\r\n      &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\r\n      \t\t\r\n    &lt;/array&gt;\r\n\r\n  [1]: https://dlcdn.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-macosx.cocoa.x86_64.dmg\r\n  [2]: https://adoptium.net/temurin/releases/?version=17","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>I got the same error on macOS Ventura 13.4.1 on macbook M1. Following combination has resolved the issue.</p>\n<p>Apache Directory version : ApacheDirectoryStudio-2.0.0.v20210717-M17\n<a href=\"https://dlcdn.apache.org/directory/studio/2.0.0.v20210717-M17/ApacheDirectoryStudio-2.0.0.v20210717-M17-macosx.cocoa.x86_64.dmg\" rel=\"nofollow noreferrer\">Link to download</a></p>\n<p>Java Version : jdk-17.0.8+7\n<a href=\"https://adoptium.net/temurin/releases/?version=17\" rel=\"nofollow noreferrer\">Link to Download</a></p>\n<p><strong>How to use the specific version of java</strong></p>\n<p>Update the Info.plist\nFile Location :</p>\n<blockquote>\n<p>/Applications/ApacheDirectoryStudio.app/Contents/Info.plist</p>\n</blockquote>\n<pre><code>    &lt;array&gt;\n            \n  &lt;!-- to use a specific Java version (instead of the platform's default) uncomment one of the following options,\n                or add a VM found via $/usr/libexec/java_home -V --&gt;\n  &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Users/XXXXXXXX/dev/app/jdk-17.0.8+7/Contents/Home/bin/java&lt;/string&gt;\n  &lt;string&gt;-keyring&lt;/string&gt;\n  &lt;string&gt;~/.eclipse_keyring&lt;/string&gt;\n        \n&lt;/array&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2084596,"reputation":1166,"user_id":1855840,"display_name":"ranma2913"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697745212,"creation_date":1697745212,"answer_id":77326702,"question_id":25753966,"body_markdown":"Thanks to all the tips. For me the problem was aarch64 (Apple M1 Chipset) JVM doesn&#39;t work with ApacheDirectoryStudio. It must be the x64 build of the JVM. I downloaded the JVM from https://adoptium.net/temurin/releases/?os=mac&amp;arch=x64. \r\n\r\nUpdated the /Applications/ApacheDirectoryStudio.app/Contents/Eclipse/ApacheDirectoryStudio.ini file like:\r\n\r\n```\r\n###\r\n#Uncomment_to_configure_Java_version_to_use\r\n#https://directory.apache.org/studio/faqs.html#how-to-set-the-java-vm-to-use\r\n-vm\r\n/Applications/Java/jdk-21+35-jre/Contents/Home/bin/java\r\n-vmargs\r\n-Dosgi.requiredJavaVersion=11\r\n###\r\n```","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>Thanks to all the tips. For me the problem was aarch64 (Apple M1 Chipset) JVM doesn't work with ApacheDirectoryStudio. It must be the x64 build of the JVM. I downloaded the JVM from <a href=\"https://adoptium.net/temurin/releases/?os=mac&amp;arch=x64\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases/?os=mac&amp;arch=x64</a>.</p>\n<p>Updated the /Applications/ApacheDirectoryStudio.app/Contents/Eclipse/ApacheDirectoryStudio.ini file like:</p>\n<pre><code>###\n#Uncomment_to_configure_Java_version_to_use\n#https://directory.apache.org/studio/faqs.html#how-to-set-the-java-vm-to-use\n-vm\n/Applications/Java/jdk-21+35-jre/Contents/Home/bin/java\n-vmargs\n-Dosgi.requiredJavaVersion=11\n###\n</code></pre>\n"}],"owner":{"account_id":5007235,"reputation":521,"user_id":4024540,"display_name":"Ray Lang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67636,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"answer_count":17,"score":52,"last_activity_date":1697745212,"creation_date":1410298866,"question_id":25753966,"body_markdown":"Eclipse 4.4.0 on Mac OSX 10.9, JVM 8 gives an alert when I try to run it:\r\n\r\n&quot;The JVM shared library &quot;/Library/Java/JavaVirtualMachine/jdk1.8.0_20.jdk/Contents/Home/bin/.../jre/lib/server/libjvm.dylib&quot; does not contain the JNI_CreateJavaVM symbol&quot;\r\n\r\nThe application does not start.\r\n\r\nI edited the Info.plist per Shan&#39;s instructions of 8/25, but I still get the same error.\r\n\r\nI&#39;ve also downloaded &amp; installed Java from Apple&#39;s web site, but I still get the same error.\r\n\r\nthanks for the help.\r\n","title":"Eclipse: JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>Eclipse 4.4.0 on Mac OSX 10.9, JVM 8 gives an alert when I try to run it:</p>\n\n<p>\"The JVM shared library \"/Library/Java/JavaVirtualMachine/jdk1.8.0_20.jdk/Contents/Home/bin/.../jre/lib/server/libjvm.dylib\" does not contain the JNI_CreateJavaVM symbol\"</p>\n\n<p>The application does not start.</p>\n\n<p>I edited the Info.plist per Shan's instructions of 8/25, but I still get the same error.</p>\n\n<p>I've also downloaded &amp; installed Java from Apple's web site, but I still get the same error.</p>\n\n<p>thanks for the help.</p>\n"},{"tags":["java","android","installation","version","project"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1697743124,"post_id":77326269,"comment_id":136321634,"body_markdown":"Do you have API 34 downloaded in your SDK Manager?","body":"Do you have API 34 downloaded in your SDK Manager?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1697744800,"post_id":77326269,"comment_id":136321860,"body_markdown":"You don&#39;t need a UI simply change the value in Gradle config file.","body":"You don&#39;t need a UI simply change the value in Gradle config file."}],"owner":{"account_id":27119206,"reputation":1,"user_id":20663108,"display_name":"Rajat Singh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1697744980,"creation_date":1697740153,"question_id":77326269,"body_markdown":"In my android studio, I am unable to change my compile sdk version from 33 to 34. It doesn&#39;t show 34 option on compile sdk versions in program structure:\r\n[![enter image description here](https://i.stack.imgur.com/kWqcY.png)](https://i.stack.imgur.com/kWqcY.png)\r\n","title":"unable to change my compile sdk version from 33 to 34","body":"<p>In my android studio, I am unable to change my compile sdk version from 33 to 34. It doesn't show 34 option on compile sdk versions in program structure:\n<a href=\"https://i.stack.imgur.com/kWqcY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kWqcY.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["javascript","java","authentication","grails","extjs"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1697726311,"post_id":77324641,"comment_id":136318437,"body_markdown":"You&#39;ve got to set SameSite:None on your session cookie. I did this in PHP","body":"You&#39;ve got to set SameSite:None on your session cookie. I did this in PHP"}],"answers":[{"tags":[],"owner":{"account_id":29114412,"reputation":19,"user_id":22303452,"display_name":"Aisu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697744545,"creation_date":1697744545,"answer_id":77326651,"question_id":77324641,"body_markdown":"To implement a shared session and JWT authentication across multiple applications (App A and App B) using different domains, you need to consider the following aspects:\r\n\r\nSingle Sign-On (SSO): Implement a Single Sign-On solution that allows users to log in once and access multiple applications without having to re-enter their credentials. This typically involves using a centralized authentication server.\r\n\r\nCross-Domain Authentication: As the applications are on different domains, you need to address Cross-Origin Resource Sharing (CORS) issues. Ensure that the authentication server and the applications are configured to handle CORS properly.\r\n\r\nHere&#39;s a high-level approach to achieve this:\r\n\r\nAuthentication Server:\r\n\r\nCreate a separate authentication server (or use an existing one) that handles user authentication and JWT token issuance.\r\nConfigure this server to issue JWT tokens with a shared secret and a common signing key.\r\nLogin Flow:\r\n\r\nUser logs in to App A or App B.\r\nThe frontend of App A or App B sends a request to the authentication server to authenticate the user and obtain a JWT token.\r\nThe authentication server verifies the user&#39;s credentials, creates a JWT token, and returns it to the frontend of App A or App B.\r\nStore the JWT token in a secure HTTP-only cookie or use a secure storage mechanism like local storage.\r\nCross-Domain Authentication:\r\n\r\nEnsure that the CORS settings on the authentication server allow requests from the domains of App A and App B.\r\nYou might need to implement mechanisms like JSONP or Cross-Origin Resource Sharing (CORS) to facilitate communication between different domains.\r\nToken Sharing:\r\n\r\nThe JWT token can be shared between App A and App B as long as they have the same signing key. This means they can validate the token independently without making additional requests to the authentication server.\r\nWhenever App A or App B needs to perform an action on behalf of the user, they can check the JWT token for permissions and authentication. This is a stateless way to verify the user&#39;s identity.\r\nSingle Logout:\r\n\r\nImplement a Single Logout mechanism if you want to log the user out of both applications when they log out of one. This typically involves notifying the authentication server to invalidate the user&#39;s session.\r\nJWT Payload:\r\n\r\nYour JWT payload should contain user-specific information along with claims necessary for authentication and authorization.\r\nBe cautious about the claims stored in the JWT, as they will be readable on the client side.\r\nSecurity Considerations:\r\n\r\nEnsure that you follow security best practices, such as using secure cookies, implementing proper token validation, and securing the JWT signing key.\r\nRegularly rotate the JWT signing keys for enhanced security.\r\nLogging and Monitoring:\r\n\r\nImplement comprehensive logging and monitoring to keep track of authentication and authorization events and detect any suspicious activities.\r\nUser Experience:\r\n\r\nMake sure the user experience is smooth, with appropriate error handling for login and session management.\r\nKeep in mind that implementing a shared session and authentication across different domains can be complex and requires a robust understanding of authentication and security practices. Additionally, it&#39;s essential to consider regulatory and compliance requirements, such as GDPR, when handling user data across multiple applications.\r\n","title":"Cross Domain Session","body":"<p>To implement a shared session and JWT authentication across multiple applications (App A and App B) using different domains, you need to consider the following aspects:</p>\n<p>Single Sign-On (SSO): Implement a Single Sign-On solution that allows users to log in once and access multiple applications without having to re-enter their credentials. This typically involves using a centralized authentication server.</p>\n<p>Cross-Domain Authentication: As the applications are on different domains, you need to address Cross-Origin Resource Sharing (CORS) issues. Ensure that the authentication server and the applications are configured to handle CORS properly.</p>\n<p>Here's a high-level approach to achieve this:</p>\n<p>Authentication Server:</p>\n<p>Create a separate authentication server (or use an existing one) that handles user authentication and JWT token issuance.\nConfigure this server to issue JWT tokens with a shared secret and a common signing key.\nLogin Flow:</p>\n<p>User logs in to App A or App B.\nThe frontend of App A or App B sends a request to the authentication server to authenticate the user and obtain a JWT token.\nThe authentication server verifies the user's credentials, creates a JWT token, and returns it to the frontend of App A or App B.\nStore the JWT token in a secure HTTP-only cookie or use a secure storage mechanism like local storage.\nCross-Domain Authentication:</p>\n<p>Ensure that the CORS settings on the authentication server allow requests from the domains of App A and App B.\nYou might need to implement mechanisms like JSONP or Cross-Origin Resource Sharing (CORS) to facilitate communication between different domains.\nToken Sharing:</p>\n<p>The JWT token can be shared between App A and App B as long as they have the same signing key. This means they can validate the token independently without making additional requests to the authentication server.\nWhenever App A or App B needs to perform an action on behalf of the user, they can check the JWT token for permissions and authentication. This is a stateless way to verify the user's identity.\nSingle Logout:</p>\n<p>Implement a Single Logout mechanism if you want to log the user out of both applications when they log out of one. This typically involves notifying the authentication server to invalidate the user's session.\nJWT Payload:</p>\n<p>Your JWT payload should contain user-specific information along with claims necessary for authentication and authorization.\nBe cautious about the claims stored in the JWT, as they will be readable on the client side.\nSecurity Considerations:</p>\n<p>Ensure that you follow security best practices, such as using secure cookies, implementing proper token validation, and securing the JWT signing key.\nRegularly rotate the JWT signing keys for enhanced security.\nLogging and Monitoring:</p>\n<p>Implement comprehensive logging and monitoring to keep track of authentication and authorization events and detect any suspicious activities.\nUser Experience:</p>\n<p>Make sure the user experience is smooth, with appropriate error handling for login and session management.\nKeep in mind that implementing a shared session and authentication across different domains can be complex and requires a robust understanding of authentication and security practices. Additionally, it's essential to consider regulatory and compliance requirements, such as GDPR, when handling user data across multiple applications.</p>\n"}],"owner":{"account_id":14426950,"reputation":3,"user_id":10426962,"display_name":"Jo&#227;o G. Hartmann"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697744545,"creation_date":1697725591,"question_id":77324641,"body_markdown":"The projects of the company I work for are being changed, the names are App A, App B, App C and App D. One of this changes is the login and session.\r\n\r\nTwo applications (A and B) has the same database, this means user has one login/pass for both. Often these applications are used in parallel.\r\n\r\nI have an API for login, which returns a jwt, but one active token is allowed at a time.\r\n\r\nThen I was asked to make the login flow work for Apps A and B, using the same JWT to maintain a single session.\r\n\r\nOne problem I encountered is that the projects were not necessarily in the same domain.\r\n\r\nThe questions are:\r\n\r\n1. What is the correct way to make this work? Following good security practices.\r\n2. Where can the token be stored? To be accessible by both applications (is this possible?).\r\n\r\n---\r\nThe actual flow:\r\n\r\n* The user enters credentials into the form.\r\n* Request to the backend API.\r\n* Request to the login API.\r\n* Response with read-only session information (daysToExpirePass, ttl, name, login, tokenCreatedDate, email and token).\r\n* Only the token (signing) is sent in each request to the backend API to check permissions, the other information is just for other things like warnings, all the logic is in the backend.\r\n* This information is stored in session storage.\r\n\r\n---\r\n\r\nTechnologies:\r\n- ExtJS 7.6.0 - frontend\r\n- Grails 5.2.2 and Java 11 - backend\r\n- Internal Logic for Authentication.\r\n\r\n---\r\n\r\nJWT payload structure example:\r\n```json\r\n{\r\n  &quot;sub&quot;: &quot;&lt;user&gt;&quot;,\r\n  &quot;RANDOM_VALUE&quot;: &quot;&lt;uuid&gt;&quot;,\r\n  &quot;jti&quot;: &quot;&lt;uuid&gt;&quot;\r\n}\r\n```\r\n","title":"Cross Domain Session","body":"<p>The projects of the company I work for are being changed, the names are App A, App B, App C and App D. One of this changes is the login and session.</p>\n<p>Two applications (A and B) has the same database, this means user has one login/pass for both. Often these applications are used in parallel.</p>\n<p>I have an API for login, which returns a jwt, but one active token is allowed at a time.</p>\n<p>Then I was asked to make the login flow work for Apps A and B, using the same JWT to maintain a single session.</p>\n<p>One problem I encountered is that the projects were not necessarily in the same domain.</p>\n<p>The questions are:</p>\n<ol>\n<li>What is the correct way to make this work? Following good security practices.</li>\n<li>Where can the token be stored? To be accessible by both applications (is this possible?).</li>\n</ol>\n<hr />\n<p>The actual flow:</p>\n<ul>\n<li>The user enters credentials into the form.</li>\n<li>Request to the backend API.</li>\n<li>Request to the login API.</li>\n<li>Response with read-only session information (daysToExpirePass, ttl, name, login, tokenCreatedDate, email and token).</li>\n<li>Only the token (signing) is sent in each request to the backend API to check permissions, the other information is just for other things like warnings, all the logic is in the backend.</li>\n<li>This information is stored in session storage.</li>\n</ul>\n<hr />\n<p>Technologies:</p>\n<ul>\n<li>ExtJS 7.6.0 - frontend</li>\n<li>Grails 5.2.2 and Java 11 - backend</li>\n<li>Internal Logic for Authentication.</li>\n</ul>\n<hr />\n<p>JWT payload structure example:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sub&quot;: &quot;&lt;user&gt;&quot;,\n  &quot;RANDOM_VALUE&quot;: &quot;&lt;uuid&gt;&quot;,\n  &quot;jti&quot;: &quot;&lt;uuid&gt;&quot;\n}\n</code></pre>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1686095335,"post_id":76418295,"comment_id":134751456,"body_markdown":"Use a factory class with a `create` method which creates the object, and mock the factory in your tests.","body":"Use a factory class with a <code>create</code> method which creates the object, and mock the factory in your tests."},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1686117163,"post_id":76418295,"comment_id":134753243,"body_markdown":"What&#39;s the implementation of your constructor?","body":"What&#39;s the implementation of your constructor?"},{"owner":{"account_id":1706750,"reputation":171,"user_id":1565675,"display_name":"Karsten Spang"},"score":0,"creation_date":1697727009,"post_id":76418295,"comment_id":136318588,"body_markdown":"@knittl It is not my constructor. I want construction of some third party class to throw an exception.","body":"@knittl It is not my constructor. I want construction of some third party class to throw an exception."}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697744118,"creation_date":1697744118,"answer_id":77326606,"question_id":76418295,"body_markdown":"&gt; Don&#39;t mock a type you don&#39;t own! [[src]](https://github.com/mockito/mockito/wiki/How-to-write-good-tests#dont-mock-a-type-you-dont-own)\r\n\r\nYou are trying to mock the constructor of an external class. Instead, change your code to use a factory instead which calls the constructor. You can then easily stub the factory method to throw the exception.\r\n\r\nSo going from a direct constructor call:\r\n\r\n```\r\nclass YourClass {\r\n  method() {\r\n    final SomeClass obj = new SomeClass();\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\nrefactor the code to create the instance via a factory. Java 8+ makes this an easy task by leveraging method refs and lambdas:\r\n\r\n```\r\nclass YourClass {\r\n  @VisibleForTesting\r\n  Supplier&lt;SomeClass&gt; makeSomeClass = SomeClass::new;\r\n  method() {\r\n    final SomeClass obj = makeSomeClass.get();\r\n    // ...\r\n  }\r\n}\r\n\r\nclass YourClassTest {\r\n  @Test\r\n  void test() {\r\n    final YourClass yourObj = new YourClass();\r\n    yourObj.makeSomeClass = () -&gt; {\r\n      throw new RuntimeException();\r\n    };\r\n\r\n    assertThatCode(() -&gt; yourObj.method())\r\n        .isInstanceOf(RuntimeException.class);\r\n  }\r\n}\r\n```\r\n\r\nYou don&#39;t even need Mockito :)","title":"How to mock a constructor throwing an exception in Mockitio","body":"<blockquote>\n<p>Don't mock a type you don't own! <a href=\"https://github.com/mockito/mockito/wiki/How-to-write-good-tests#dont-mock-a-type-you-dont-own\" rel=\"nofollow noreferrer\">[src]</a></p>\n</blockquote>\n<p>You are trying to mock the constructor of an external class. Instead, change your code to use a factory instead which calls the constructor. You can then easily stub the factory method to throw the exception.</p>\n<p>So going from a direct constructor call:</p>\n<pre><code>class YourClass {\n  method() {\n    final SomeClass obj = new SomeClass();\n    // ...\n  }\n}\n</code></pre>\n<p>refactor the code to create the instance via a factory. Java 8+ makes this an easy task by leveraging method refs and lambdas:</p>\n<pre><code>class YourClass {\n  @VisibleForTesting\n  Supplier&lt;SomeClass&gt; makeSomeClass = SomeClass::new;\n  method() {\n    final SomeClass obj = makeSomeClass.get();\n    // ...\n  }\n}\n\nclass YourClassTest {\n  @Test\n  void test() {\n    final YourClass yourObj = new YourClass();\n    yourObj.makeSomeClass = () -&gt; {\n      throw new RuntimeException();\n    };\n\n    assertThatCode(() -&gt; yourObj.method())\n        .isInstanceOf(RuntimeException.class);\n  }\n}\n</code></pre>\n<p>You don't even need Mockito :)</p>\n"}],"owner":{"account_id":1706750,"reputation":171,"user_id":1565675,"display_name":"Karsten Spang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":300,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697744310,"creation_date":1686084009,"question_id":76418295,"body_markdown":"I am trying to use Mockito to mock throwing an exception in a constructor. I would prefer not using PowerMock (I know how to do that). This is basically what I want to do, using Junit 5:\r\n```\r\n@Test\r\nvoid exceptionAtConstruction() {\r\n    final RuntimeException ex = new RuntimeException();\r\n    try (MockedConstruction&lt;SomeClass&gt; mocked = \r\n        Mockito.mockConstruction(SomeClass.class))\r\n    {\r\n        when(??).thenThrow(ex);\r\n        assertThrows(RuntimeException.class,()-&gt;new SomeClass());\r\n    }\r\n}\r\n```\r\nI have not been able to find out what to substitute for &quot;??&quot;. The obvious would have been `mocked.constructed()`, but that turned out to be something entirely different.\r\n\r\nThe closest I have got so far is the workaround\r\n```\r\n@Test\r\nvoid exceptionAtConstruction() {\r\n    final RuntimeException ex = new RuntimeException();\r\n    try (MockedConstruction&lt;SomeClass&gt; someMock =  mockConstruction(SomeClass.class,\r\n        new MockedConstruction.MockInitializer&lt;SomeClass&gt;(){\r\n            @Override\r\n            public void prepare(SomeClass mocked,MockedConstruction.Context context){\r\n                throw ex;\r\n            }\r\n        }))\r\n    {\r\n        assertThrows(RuntimeException.class,()-&gt;new SomeClass());\r\n    }\r\n}\r\n```\r\nHere I get an exception which has my expected exception as the second level cause.","title":"How to mock a constructor throwing an exception in Mockitio","body":"<p>I am trying to use Mockito to mock throwing an exception in a constructor. I would prefer not using PowerMock (I know how to do that). This is basically what I want to do, using Junit 5:</p>\n<pre><code>@Test\nvoid exceptionAtConstruction() {\n    final RuntimeException ex = new RuntimeException();\n    try (MockedConstruction&lt;SomeClass&gt; mocked = \n        Mockito.mockConstruction(SomeClass.class))\n    {\n        when(??).thenThrow(ex);\n        assertThrows(RuntimeException.class,()-&gt;new SomeClass());\n    }\n}\n</code></pre>\n<p>I have not been able to find out what to substitute for &quot;??&quot;. The obvious would have been <code>mocked.constructed()</code>, but that turned out to be something entirely different.</p>\n<p>The closest I have got so far is the workaround</p>\n<pre><code>@Test\nvoid exceptionAtConstruction() {\n    final RuntimeException ex = new RuntimeException();\n    try (MockedConstruction&lt;SomeClass&gt; someMock =  mockConstruction(SomeClass.class,\n        new MockedConstruction.MockInitializer&lt;SomeClass&gt;(){\n            @Override\n            public void prepare(SomeClass mocked,MockedConstruction.Context context){\n                throw ex;\n            }\n        }))\n    {\n        assertThrows(RuntimeException.class,()-&gt;new SomeClass());\n    }\n}\n</code></pre>\n<p>Here I get an exception which has my expected exception as the second level cause.</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1697638082,"post_id":77317086,"comment_id":136305261,"body_markdown":"Could you show the test?  What value do you want to get from `getTypeB()`?  What value are you getting now?","body":"Could you show the test?  What value do you want to get from <code>getTypeB()</code>?  What value are you getting now?"},{"owner":{"account_id":17558425,"reputation":66,"user_id":12737404,"display_name":"h_a_l_a_s"},"score":3,"creation_date":1697638205,"post_id":77317086,"comment_id":136305288,"body_markdown":"Please provide some code snipped from both classes and test case","body":"Please provide some code snipped from both classes and test case"},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1698575111,"post_id":77317086,"comment_id":136420672,"body_markdown":"Welcome to Stack Overflow!\nPlease take the [tour](/tour), have a look around, and read through the [help center](/help), in particular How do [I ask a good question?](/help/how-to-ask) and [What topics can I ask about here?](/help/on-topic).\nFrom that second link: &quot;Questions asking for homework help must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it.&quot;\neven if it is no homework.\nPlease add  a [Minimal, Complete, and Verifiable example](/help/mcve).","body":"Welcome to Stack Overflow! Please take the <a href=\"/tour\">tour</a>, have a look around, and read through the <a href=\"/help\">help center</a>, in particular How do <a href=\"/help/how-to-ask\">I ask a good question?</a> and <a href=\"/help/on-topic\">What topics can I ask about here?</a>. From that second link: &quot;Questions asking for homework help must include a summary of the work you&#39;ve done so far to solve the problem, and a description of the difficulty you are having solving it.&quot; even if it is no homework. Please add  a <a href=\"/help/mcve\">Minimal, Complete, and Verifiable example</a>."},{"owner":{"account_id":9443335,"reputation":15252,"user_id":7023245,"accept_rate":25,"display_name":"Timothy Truckle"},"score":0,"creation_date":1698575485,"post_id":77317086,"comment_id":136420691,"body_markdown":"You should rethink your design. In Java (like in any OO language) we distinguish between *business classes* (classes that contain actual logic) and *value objects/data transfer objects*, classes that only contain data and (almost) no logic. The point here is, that business classes should not have getters since they violate the **information hiding principle** (one of the most important OOP-rules) and value objects (as well as any `Collection`s) should not be mocked.","body":"You should rethink your design. In Java (like in any OO language) we distinguish between <i>business classes</i> (classes that contain actual logic) and <i>value objects/data transfer objects</i>, classes that only contain data and (almost) no logic. The point here is, that business classes should not have getters since they violate the <b>information hiding principle</b> (one of the most important OOP-rules) and value objects (as well as any <code>Collection</code>s) should not be mocked."}],"answers":[{"tags":[],"owner":{"account_id":1798188,"reputation":103,"user_id":1637118,"display_name":"Timur Celikel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697744090,"creation_date":1697640779,"answer_id":77317431,"question_id":77317086,"body_markdown":"This may not be the cleanest way but you need to make sure each object you are referencing is also mocked. You can do that by building out your mocked a object with Mockito&#39;s when() method. \r\n\r\nYou should be able to do something like the following in your test:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class AClassTest {\r\n\r\n        @Mock\r\n        private AClass a;\r\n\r\n        @Mock\r\n        private TypeA typeA;\r\n\r\n        @Mock\r\n        private TypeB typeB;\r\n\r\n        @Autowired\r\n        private YourController yourController;\r\n\r\n        @Test\r\n        void testControllerInSomeWay() {\r\n\r\n            when(typeA.getTypeB()).thenReturn(typeB);\r\n            when(a.getTypeA()).thenReturn(typeA);\r\n\r\n            yourController.useAClassInSomeWay(a);\r\n        }\r\n    }","title":"How to mock a.getTypeA().getTypeB();","body":"<p>This may not be the cleanest way but you need to make sure each object you are referencing is also mocked. You can do that by building out your mocked a object with Mockito's when() method.</p>\n<p>You should be able to do something like the following in your test:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class AClassTest {\n\n    @Mock\n    private AClass a;\n\n    @Mock\n    private TypeA typeA;\n\n    @Mock\n    private TypeB typeB;\n\n    @Autowired\n    private YourController yourController;\n\n    @Test\n    void testControllerInSomeWay() {\n\n        when(typeA.getTypeB()).thenReturn(typeB);\n        when(a.getTypeA()).thenReturn(typeA);\n\n        yourController.useAClassInSomeWay(a);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23835755,"reputation":11,"user_id":17841502,"display_name":"Samadhan Ghagare"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1697744090,"creation_date":1697638021,"question_id":77317086,"body_markdown":"AClass a=new AClass() ;\r\na.getTypeA().getTypeB();\r\n\r\nI have used mocked constructor to mock AClass method but how to mock getTypeB(); method \r\n\r\nI am able to mock class A but for class b it&#39;s calling real method. \r\nMethod getTypeB() has TypeB class.   ","title":"How to mock a.getTypeA().getTypeB();","body":"<p>AClass a=new AClass() ;\na.getTypeA().getTypeB();</p>\n<p>I have used mocked constructor to mock AClass method but how to mock getTypeB(); method</p>\n<p>I am able to mock class A but for class b it's calling real method.\nMethod getTypeB() has TypeB class.</p>\n"},{"tags":["java","discord","discord-jda"],"answers":[{"tags":[],"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697734134,"creation_date":1697734134,"answer_id":77325697,"question_id":77325675,"body_markdown":"You can use [openPrivateChannelById](https://docs.jda.wiki/net/dv8tion/jda/api/JDA.html#openPrivateChannelById(long)):\r\n\r\n```java\r\njda.openPrivateChannelById(recipientUserId).queue(channel -&gt; {\r\n  User user = channel.getUser();\r\n  channel.sendMessage(messageContent).queue();\r\n  System.out.printf(&quot;Message has been sent to %#s successfully\\n&quot;, user);\r\n});\r\n```","title":"How to send a private message to a user by user id","body":"<p>You can use <a href=\"https://docs.jda.wiki/net/dv8tion/jda/api/JDA.html#openPrivateChannelById(long)\" rel=\"nofollow noreferrer\">openPrivateChannelById</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>jda.openPrivateChannelById(recipientUserId).queue(channel -&gt; {\n  User user = channel.getUser();\n  channel.sendMessage(messageContent).queue();\n  System.out.printf(&quot;Message has been sent to %#s successfully\\n&quot;, user);\n});\n</code></pre>\n"}],"owner":{"account_id":29704415,"reputation":23,"user_id":22765623,"display_name":"RTX"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77325697,"answer_count":1,"score":1,"last_activity_date":1697743664,"creation_date":1697733907,"question_id":77325675,"body_markdown":"I was trying to code a bot that dms people, but I wasn&#39;t able to find user by their id.\r\n\r\n```java\r\npackage me.rtx4090;\r\nimport net.dv8tion.jda.api.JDA;\r\nimport net.dv8tion.jda.api.JDABuilder;\r\nimport net.dv8tion.jda.api.events.guild.GuildReadyEvent;\r\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\r\nimport net.dv8tion.jda.api.entities.User;\r\n\r\npublic class Main extends ListenerAdapter {\r\n    private JDA jda;\r\n\r\n    public Main() {\r\n        String botToken = &quot;(censored)&quot;;\r\n        jda = JDABuilder.createDefault(botToken).addEventListeners(this).build();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new Main();\r\n    }\r\n\r\n    @Override\r\n    public void onGuildReady(GuildReadyEvent event) {\r\n        System.out.println(&quot;All members in the guild &quot; + event.getGuild().getName() + &quot; have been downloaded.&quot;);\r\n\r\n        sendPrivateMessage();\r\n    }\r\n\r\n    private void sendPrivateMessage() {\r\n        String recipientUserId = &quot;(censored)&quot;; \r\n        String messageContent = &quot;L&quot;;\r\n\r\n        User recipient = jda.getUserById(recipientUserId);\r\n        System.out.println(recipient);\r\n\r\n        if (recipient != null) {\r\n            recipient.openPrivateChannel().queue(privateChannel -&gt; {\r\n                privateChannel.sendMessage(messageContent).queue();\r\n                System.out.println(&quot;Message has been sent to &quot; + recipient.getAsTag() + &quot; successfully&quot;);\r\n            });\r\n        } else {\r\n            System.out.println(&quot;Can&#39;t find the user. Please make sure you&#39;ve used the correct ID&quot;);\r\n        }\r\n    }\r\n}\r\n```","title":"How to send a private message to a user by user id","body":"<p>I was trying to code a bot that dms people, but I wasn't able to find user by their id.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package me.rtx4090;\nimport net.dv8tion.jda.api.JDA;\nimport net.dv8tion.jda.api.JDABuilder;\nimport net.dv8tion.jda.api.events.guild.GuildReadyEvent;\nimport net.dv8tion.jda.api.hooks.ListenerAdapter;\nimport net.dv8tion.jda.api.entities.User;\n\npublic class Main extends ListenerAdapter {\n    private JDA jda;\n\n    public Main() {\n        String botToken = &quot;(censored)&quot;;\n        jda = JDABuilder.createDefault(botToken).addEventListeners(this).build();\n    }\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    @Override\n    public void onGuildReady(GuildReadyEvent event) {\n        System.out.println(&quot;All members in the guild &quot; + event.getGuild().getName() + &quot; have been downloaded.&quot;);\n\n        sendPrivateMessage();\n    }\n\n    private void sendPrivateMessage() {\n        String recipientUserId = &quot;(censored)&quot;; \n        String messageContent = &quot;L&quot;;\n\n        User recipient = jda.getUserById(recipientUserId);\n        System.out.println(recipient);\n\n        if (recipient != null) {\n            recipient.openPrivateChannel().queue(privateChannel -&gt; {\n                privateChannel.sendMessage(messageContent).queue();\n                System.out.println(&quot;Message has been sent to &quot; + recipient.getAsTag() + &quot; successfully&quot;);\n            });\n        } else {\n            System.out.println(&quot;Can't find the user. Please make sure you've used the correct ID&quot;);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1534166323,"post_id":51823194,"comment_id":90600690,"body_markdown":"There are many variations, but most of them leverage `OptionalLong.isPresent()` to distinguish between the empty and non-empty cases.","body":"There are many variations, but most of them leverage <code>OptionalLong.isPresent()</code> to distinguish between the empty and non-empty cases."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":6,"creation_date":1534166662,"post_id":51823194,"comment_id":90600897,"body_markdown":"the question is why doesn&#39;t `OptionalLong` have no `map/filter` etc","body":"the question is why doesn&#39;t <code>OptionalLong</code> have no <code>map&#47;filter</code> etc"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":6,"creation_date":1534167567,"post_id":51823194,"comment_id":90601484,"body_markdown":"`api.setHeight(…)` should not expect an `Optional&lt;Long&gt;` as argument type. Then you will not have such problems.","body":"<code>api.setHeight(…)</code> should not expect an <code>Optional&lt;Long&gt;</code> as argument type. Then you will not have such problems."},{"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"score":0,"creation_date":1534167779,"post_id":51823194,"comment_id":90601625,"body_markdown":"@Holger In some cases it cannot easily be avoided (i.e. if `Long` is the value of a type argument of a generic method)","body":"@Holger In some cases it cannot easily be avoided (i.e. if <code>Long</code> is the value of a type argument of a generic method)"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":11,"creation_date":1534168180,"post_id":51823194,"comment_id":90601909,"body_markdown":"Just don’t use `Optional` as parameter at all, whether generic or not. It&#39;s horrible to read. What does it mean to call `setHeight` with an empty optional argument? Do nothing? Then, don’t call it at all. `secondScreenHeight.ifPresent(api::setHeight)` makes much more sense.","body":"Just don’t use <code>Optional</code> as parameter at all, whether generic or not. It&#39;s horrible to read. What does it mean to call <code>setHeight</code> with an empty optional argument? Do nothing? Then, don’t call it at all. <code>secondScreenHeight.ifPresent(api::setHeight)</code> makes much more sense."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":2,"creation_date":1534178227,"post_id":51823194,"comment_id":90608086,"body_markdown":"To add to what Holger already pointed out, this is what IntelliJ would suggest you as well... *...Optional was designed to provide a limited mechanism for library method return types where there needed to be a clear way to represent &quot;no result&quot;. Using a field with type java.util.Optional is also problematic if the class needs to be Serializable, [which java.util.Optional is not.](https://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc)*","body":"To add to what Holger already pointed out, this is what IntelliJ would suggest you as well... <i>...Optional was designed to provide a limited mechanism for library method return types where there needed to be a clear way to represent &quot;no result&quot;. Using a field with type java.util.Optional is also problematic if the class needs to be Serializable, <a href=\"https://stackoverflow.com/questions/24547673/why-java-util-optional-is-not-serializable-how-to-serialize-the-object-with-suc\">which java.util.Optional is not.</a></i>"},{"owner":{"account_id":11583471,"reputation":17797,"user_id":8486518,"display_name":"Mạnh Quyết Nguyễn"},"score":6,"creation_date":1534679605,"post_id":51823194,"comment_id":90784490,"body_markdown":"Why a bounty is opened here? The question received good answers","body":"Why a bounty is opened here? The question received good answers"}],"answers":[{"tags":[],"owner":{"account_id":5071195,"reputation":4549,"user_id":4069913,"accept_rate":22,"display_name":"Orest Savchak"},"down_vote_count":3,"up_vote_count":13,"is_accepted":true,"score":10,"last_activity_date":1534166454,"creation_date":1534166143,"answer_id":51823277,"question_id":51823194,"body_markdown":"I don&#39;t know simpler solutions but this will do what you need. \r\n\r\n    OptionalLong secondScreenHeight = OptionalLong.of(32l);\r\n    Optional&lt;Long&gt; optional = secondScreenHeight.isPresent() \r\n        ? Optional.of(secondSceenHeight.getAsLong()) \r\n        : Optional.empty();\r\n    api.setHeight(optional);","title":"How to map an OptionalLong to an Optional&lt;Long&gt;?","body":"<p>I don't know simpler solutions but this will do what you need. </p>\n\n<pre><code>OptionalLong secondScreenHeight = OptionalLong.of(32l);\nOptional&lt;Long&gt; optional = secondScreenHeight.isPresent() \n    ? Optional.of(secondSceenHeight.getAsLong()) \n    : Optional.empty();\napi.setHeight(optional);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1534166204,"creation_date":1534166204,"answer_id":51823295,"question_id":51823194,"body_markdown":"This should work.  \r\n\r\n    Optional&lt;Long&gt; returnValue = Optional.empty();\r\n    if(secondScreenHeight.isPresent()) {\r\n          returnValue = Optional.of(secondScreenHeight.getAsLong());\r\n    }\r\n\r\n","title":"How to map an OptionalLong to an Optional&lt;Long&gt;?","body":"<p>This should work.  </p>\n\n<pre><code>Optional&lt;Long&gt; returnValue = Optional.empty();\nif(secondScreenHeight.isPresent()) {\n      returnValue = Optional.of(secondScreenHeight.getAsLong());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5168089,"reputation":26671,"user_id":4137489,"accept_rate":100,"display_name":"marstran"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1534166455,"creation_date":1534166455,"answer_id":51823370,"question_id":51823194,"body_markdown":"You could do this:\r\n\r\n    final OptionalLong optionalLong = OptionalLong.of(5);\r\n\r\n    final Optional&lt;Long&gt; optional = Optional.of(optionalLong)\r\n                .filter(OptionalLong::isPresent)\r\n                .map(OptionalLong::getAsLong);","title":"How to map an OptionalLong to an Optional&lt;Long&gt;?","body":"<p>You could do this:</p>\n\n<pre><code>final OptionalLong optionalLong = OptionalLong.of(5);\n\nfinal Optional&lt;Long&gt; optional = Optional.of(optionalLong)\n            .filter(OptionalLong::isPresent)\n            .map(OptionalLong::getAsLong);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2004139,"reputation":10783,"user_id":1794485,"display_name":"df778899"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1534705285,"creation_date":1534704614,"answer_id":51920830,"question_id":51823194,"body_markdown":"One more possibility, though only from JDK 9 is via the new `OptionalLong.stream()` method, which returns a `LongStream`.  This can then be boxed to a `Stream&lt;Long&gt;`:\r\n\r\n\tOptionalLong optionalLong = OptionalLong.of(32);\r\n\tOptional&lt;Long&gt; optional = optionalLong.stream().boxed().findFirst();\r\n\r\nWith JDK 8 something similar can be done, by stepping out to the [Streams][1] utility class in Guava:\r\n\r\n\tOptional&lt;Long&gt; optional = Streams.stream(optionalLong).boxed().findFirst();\r\n\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#stream-java.util.OptionalLong-","title":"How to map an OptionalLong to an Optional&lt;Long&gt;?","body":"<p>One more possibility, though only from JDK 9 is via the new <code>OptionalLong.stream()</code> method, which returns a <code>LongStream</code>.  This can then be boxed to a <code>Stream&lt;Long&gt;</code>:</p>\n\n<pre><code>OptionalLong optionalLong = OptionalLong.of(32);\nOptional&lt;Long&gt; optional = optionalLong.stream().boxed().findFirst();\n</code></pre>\n\n<p>With JDK 8 something similar can be done, by stepping out to the <a href=\"https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#stream-java.util.OptionalLong-\" rel=\"noreferrer\">Streams</a> utility class in Guava:</p>\n\n<pre><code>Optional&lt;Long&gt; optional = Streams.stream(optionalLong).boxed().findFirst();\n</code></pre>\n"}],"owner":{"account_id":219730,"reputation":20703,"user_id":476791,"accept_rate":67,"display_name":"slartidan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10235,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":51823277,"answer_count":4,"score":19,"last_activity_date":1697742795,"creation_date":1534165869,"question_id":51823194,"body_markdown":"I have an instance of  `OptionalLong`. But one of my libraries requires an `Optional&lt;Long&gt;` as a parameter.\r\n\r\nHow can I convert my `OptionalLong` into an `Optional&lt;Long&gt;`?\r\n\r\nI was dreaming about something like this:\r\n\r\n    OptionalLong secondScreenHeight = OptionalLong.of(32l); // or: OptionalLong.empty()\r\n    api.setHeight(secondScreenHeight.mapToRegularOptional()); // .mapToRegularOptional does not exist","title":"How to map an OptionalLong to an Optional&lt;Long&gt;?","body":"<p>I have an instance of  <code>OptionalLong</code>. But one of my libraries requires an <code>Optional&lt;Long&gt;</code> as a parameter.</p>\n<p>How can I convert my <code>OptionalLong</code> into an <code>Optional&lt;Long&gt;</code>?</p>\n<p>I was dreaming about something like this:</p>\n<pre><code>OptionalLong secondScreenHeight = OptionalLong.of(32l); // or: OptionalLong.empty()\napi.setHeight(secondScreenHeight.mapToRegularOptional()); // .mapToRegularOptional does not exist\n</code></pre>\n"},{"tags":["java","graphics","3d","raytracing","ppm"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1697724019,"post_id":77323769,"comment_id":136317928,"body_markdown":"Please read [Why is &quot;Can someone help me?&quot; not an actual question?](https://meta.stackoverflow.com/a/284237/721855).","body":"Please read <a href=\"https://meta.stackoverflow.com/a/284237/721855\">Why is &quot;Can someone help me?&quot; not an actual question?</a>."},{"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"score":0,"creation_date":1697786055,"post_id":77323769,"comment_id":136325827,"body_markdown":"your ray computation is susspicious I would expect screen pixel position in camera local coordinates as ray origin and (the same point - camera focal point) as ray direction instead of what you are doing.  See: [simple GLSL back raytracer](https://stackoverflow.com/a/45140313/2521214) inspect the vertex shader. ... Your code is not commented at all, you did not describe your geometry and coordinate system used ... How do your know for sure that your ray trace and image output is OK if you do not have any output?","body":"your ray computation is susspicious I would expect screen pixel position in camera local coordinates as ray origin and (the same point - camera focal point) as ray direction instead of what you are doing.  See: <a href=\"https://stackoverflow.com/a/45140313/2521214\">simple GLSL back raytracer</a> inspect the vertex shader. ... Your code is not commented at all, you did not describe your geometry and coordinate system used ... How do your know for sure that your ray trace and image output is OK if you do not have any output?"}],"answers":[{"tags":[],"owner":{"account_id":29114412,"reputation":19,"user_id":22303452,"display_name":"Aisu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697742643,"creation_date":1697742643,"answer_id":77326483,"question_id":77323769,"body_markdown":"Your code appears to be an attempt at implementing a simple ray tracer, but there are some issues that need to be addressed for it to work correctly. I&#39;ll help you identify and fix these issues:\r\n\r\n1. Ray Class: In the Ray class, you have a method at(double t, Vector d2) that attempts to compute a new vector at a given t value. However, it appears that you are trying to mutate the Direction field of the Ray class, which is incorrect. Instead, you should create a new Ray instance with the updated origin and direction. Here&#39;s a corrected at method:\r\n\r\n    Ray at(double t, Vector d2) {\r\n        Vector newDirection = Vector.GetDirection(d2);\r\n        Vector newOrigin = Vector.AddVector(origin, Vector.MultiplyScalar(newDirection, t));\r\n        return new Ray(newOrigin, newDirection);\r\n    }\r\n\r\n2. Intersect Method: The intersects method seems to be a static method in your code, but it should be defined within the Sphere class, as it operates on Sphere objects. Move the intersects method into the Sphere class.\r\n\r\n    if (discriminant &lt; 0.0) {\r\n        return false;\r\n    } else if (discriminant == 0.0) {\r\n        t0 = t1 = -0.5 * b / a;\r\n    } else {\r\n        if (b &gt; 0) {\r\n            q = -0.5 * (b + Math.sqrt(discriminant));\r\n        } else {\r\n            q = -0.5 * (b - Math.sqrt(discriminant));\r\n        }\r\n        t0 = q / a;\r\n        t1 = c / q;\r\n    }\r\n    \r\n    if (t0 &lt; 0 &amp;&amp; t1 &lt; 0) {\r\n        return false;\r\n    }\r\n    \r\n    return true;\r\n\r\n4. Looping Issue: In your main method, the variable number is used as an incrementing factor, but it is not required. You should increment number within the loop, not beforehand.\r\n\r\n5. PPM File Generation: You mentioned that the PPM code is working, but it&#39;s not included in the provided code. Ensure that the code to write the PPM file is functioning correctly, and make sure you save the file with the correct extension (.ppm).\r\n\r\nWith these corrections and after making sure the rest of your code (including the Vector and Sphere classes) is implemented correctly, your ray tracer should be able to render a circle to a PPM file. Additionally, you may want to consider using a proper development environment or IDE, as it can assist you in debugging and writing cleaner code.\r\n\r\n","title":"A simple java raytracer doesn&#39;t work and i have no idea why","body":"<p>Your code appears to be an attempt at implementing a simple ray tracer, but there are some issues that need to be addressed for it to work correctly. I'll help you identify and fix these issues:</p>\n<ol>\n<li><p>Ray Class: In the Ray class, you have a method at(double t, Vector d2) that attempts to compute a new vector at a given t value. However, it appears that you are trying to mutate the Direction field of the Ray class, which is incorrect. Instead, you should create a new Ray instance with the updated origin and direction. Here's a corrected at method:</p>\n<p>Ray at(double t, Vector d2) {\nVector newDirection = Vector.GetDirection(d2);\nVector newOrigin = Vector.AddVector(origin, Vector.MultiplyScalar(newDirection, t));\nreturn new Ray(newOrigin, newDirection);\n}</p>\n</li>\n<li><p>Intersect Method: The intersects method seems to be a static method in your code, but it should be defined within the Sphere class, as it operates on Sphere objects. Move the intersects method into the Sphere class.</p>\n<p>if (discriminant &lt; 0.0) {\nreturn false;\n} else if (discriminant == 0.0) {\nt0 = t1 = -0.5 * b / a;\n} else {\nif (b &gt; 0) {\nq = -0.5 * (b + Math.sqrt(discriminant));\n} else {\nq = -0.5 * (b - Math.sqrt(discriminant));\n}\nt0 = q / a;\nt1 = c / q;\n}</p>\n<p>if (t0 &lt; 0 &amp;&amp; t1 &lt; 0) {\nreturn false;\n}</p>\n<p>return true;</p>\n</li>\n<li><p>Looping Issue: In your main method, the variable number is used as an incrementing factor, but it is not required. You should increment number within the loop, not beforehand.</p>\n</li>\n<li><p>PPM File Generation: You mentioned that the PPM code is working, but it's not included in the provided code. Ensure that the code to write the PPM file is functioning correctly, and make sure you save the file with the correct extension (.ppm).</p>\n</li>\n</ol>\n<p>With these corrections and after making sure the rest of your code (including the Vector and Sphere classes) is implemented correctly, your ray tracer should be able to render a circle to a PPM file. Additionally, you may want to consider using a proper development environment or IDE, as it can assist you in debugging and writing cleaner code.</p>\n"}],"owner":{"account_id":28243763,"reputation":1,"user_id":21591153,"display_name":"heapunderflow25"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697742643,"creation_date":1697718561,"question_id":77323769,"body_markdown":"I&#39;m trying to write a simplest raytracer that will just output a circle to a PPM file yet i&#39;m getting nothing.Problem is not with the PPM code and is with the ray code.I&#39;m bad at math so i really don&#39;t know where the problem is and would appreciate if somebody could help me as i really have no idea what i&#39;m doing wrong.\r\n\r\n\r\nHere is the code:\r\n```\r\npublic class Main {\r\n    static  int WITDH = 200;\r\n    static  int HEIGHT = 200;\r\n\r\n    public static void main(String[] args) {\r\n        Sphere Ball = new Sphere(0, 0, -1 ,1);\r\n        Vector Camera = new Vector(0, 0, -1);\r\n\r\n\r\n        int [][] Pic = new int[200][200];\r\n\r\n\r\n\r\n        int number=0;\r\n\r\n        for (int y = 0;y&lt;HEIGHT;y++) {\r\n            for (int x = 0; x &lt; WITDH; x++) {\r\n            number++;\r\n\r\n\r\n\r\n                Ray test = new Ray(Camera);\r\n                double first=0.5*(WITDH-x)/(double)WITDH;\r\n                double second=0.5*(HEIGHT-y)/(double)HEIGHT;\r\n                Vector direc=new Vector(first,second,-1.0);\r\n                test.at(number,direc);\r\n\r\n                if (Sphere.intersects(test, Ball) == true) {\r\n                Pic[y][x]=0;\r\n\r\n                } else if(Sphere.intersects(test,Ball) == false) {\r\n                    Pic[y][x]=1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n}\r\n}\r\n```\r\n\r\n```\r\nstatic Boolean intersects(Ray ray, Sphere Shape) {\r\n\r\n\r\n        Vector Origin = ray.origin;\r\n        Vector center = Shape.Pozicija;\r\n        double discrimant;\r\n\r\n\r\n\r\n        Vector L = Vector.SubtractVector(Origin, center);\r\n        double a = Vector.ReturnDotProduct(ray.Direction, ray.Direction);\r\n        double b = 2.0 * Vector.ReturnDotProduct(L, ray.Direction);\r\n        double c = Vector.ReturnDotProduct(L, L) - (Shape.radius * Shape.radius);\r\n        double t0=0.0;\r\n        double t1=0.0;\r\n\r\n\r\n        discrimant = (b * b) - (4.0 * a * c);\r\n        double q;\r\n        if(discrimant&lt;0.0){\r\n            return false;\r\n        }else if(discrimant==0.0){\r\n            t0=t1=-0.5*b/a;\r\n        }else {\r\n            if(b&gt;0) {\r\n\r\n                q = -0.5*(b+Math.sqrt(discrimant));\r\n\r\n\r\n\r\n            }else{\r\n                q = -0.5*(b-Math.sqrt(discrimant));\r\n            }\r\n            t0=q/a;\r\n            t1=c/q;\r\n\r\n        }\r\n        if(t0&gt;t1){\r\n            double t3;\r\n            t3=t1;\r\n            t0=t1;\r\n            t1=t3;\r\n        }\r\n\r\n        if (t0 &lt; 0) {\r\n            t0 = t1;\r\n            if (t0 &lt; 0) {\r\n                return false;\r\n            }\r\n\r\n\r\n        }\r\n        System.out.println(t0+t1);\r\n        return true;\r\n    }\r\n```\r\n\r\n\r\n```\r\nVector at(double t,Vector d2){\r\n        Vector d1=new Vector(0,0,0);\r\n        if(t==0){\r\n            d1=Direction;\r\n        }else if(t&gt;0){\r\n            d1=Vector.GetDirection(d2);\r\n        }\r\n        return Vector.AddVector(origin,Vector.MultiplyScalar(d1,t));\r\n    }\r\n```\r\n","title":"A simple java raytracer doesn&#39;t work and i have no idea why","body":"<p>I'm trying to write a simplest raytracer that will just output a circle to a PPM file yet i'm getting nothing.Problem is not with the PPM code and is with the ray code.I'm bad at math so i really don't know where the problem is and would appreciate if somebody could help me as i really have no idea what i'm doing wrong.</p>\n<p>Here is the code:</p>\n<pre><code>public class Main {\n    static  int WITDH = 200;\n    static  int HEIGHT = 200;\n\n    public static void main(String[] args) {\n        Sphere Ball = new Sphere(0, 0, -1 ,1);\n        Vector Camera = new Vector(0, 0, -1);\n\n\n        int [][] Pic = new int[200][200];\n\n\n\n        int number=0;\n\n        for (int y = 0;y&lt;HEIGHT;y++) {\n            for (int x = 0; x &lt; WITDH; x++) {\n            number++;\n\n\n\n                Ray test = new Ray(Camera);\n                double first=0.5*(WITDH-x)/(double)WITDH;\n                double second=0.5*(HEIGHT-y)/(double)HEIGHT;\n                Vector direc=new Vector(first,second,-1.0);\n                test.at(number,direc);\n\n                if (Sphere.intersects(test, Ball) == true) {\n                Pic[y][x]=0;\n\n                } else if(Sphere.intersects(test,Ball) == false) {\n                    Pic[y][x]=1;\n\n                }\n\n            }\n\n        }\n\n}\n}\n</code></pre>\n<pre><code>static Boolean intersects(Ray ray, Sphere Shape) {\n\n\n        Vector Origin = ray.origin;\n        Vector center = Shape.Pozicija;\n        double discrimant;\n\n\n\n        Vector L = Vector.SubtractVector(Origin, center);\n        double a = Vector.ReturnDotProduct(ray.Direction, ray.Direction);\n        double b = 2.0 * Vector.ReturnDotProduct(L, ray.Direction);\n        double c = Vector.ReturnDotProduct(L, L) - (Shape.radius * Shape.radius);\n        double t0=0.0;\n        double t1=0.0;\n\n\n        discrimant = (b * b) - (4.0 * a * c);\n        double q;\n        if(discrimant&lt;0.0){\n            return false;\n        }else if(discrimant==0.0){\n            t0=t1=-0.5*b/a;\n        }else {\n            if(b&gt;0) {\n\n                q = -0.5*(b+Math.sqrt(discrimant));\n\n\n\n            }else{\n                q = -0.5*(b-Math.sqrt(discrimant));\n            }\n            t0=q/a;\n            t1=c/q;\n\n        }\n        if(t0&gt;t1){\n            double t3;\n            t3=t1;\n            t0=t1;\n            t1=t3;\n        }\n\n        if (t0 &lt; 0) {\n            t0 = t1;\n            if (t0 &lt; 0) {\n                return false;\n            }\n\n\n        }\n        System.out.println(t0+t1);\n        return true;\n    }\n</code></pre>\n<pre><code>Vector at(double t,Vector d2){\n        Vector d1=new Vector(0,0,0);\n        if(t==0){\n            d1=Direction;\n        }else if(t&gt;0){\n            d1=Vector.GetDirection(d2);\n        }\n        return Vector.AddVector(origin,Vector.MultiplyScalar(d1,t));\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka","audit-logging"],"comments":[{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":1,"creation_date":1697725698,"post_id":77323854,"comment_id":136318312,"body_markdown":"the db choice totally depends on for how long you need to store these logs and size of audit log record. if its very simple structure then you can go with sql , if its complex json like structure go with no-sql obviously but choice of DB is again depends on cost that you want to spend and how important these audit logs are.\n\nyou can also dump these audit logs to some file system , compress it at end of day and upload it to some cold storage like S3 or Azur Blob","body":"the db choice totally depends on for how long you need to store these logs and size of audit log record. if its very simple structure then you can go with sql , if its complex json like structure go with no-sql obviously but choice of DB is again depends on cost that you want to spend and how important these audit logs are.  you can also dump these audit logs to some file system , compress it at end of day and upload it to some cold storage like S3 or Azur Blob"},{"owner":{"account_id":2735704,"reputation":65,"user_id":2358438,"display_name":"MrLinjak"},"score":0,"creation_date":1697727056,"post_id":77323854,"comment_id":136318599,"body_markdown":"@prasannajoshi\n\nThe thing is that I&#39;m looking for a way to sidestep the need for a database entirely. S3 and Azur Blob sound nice, I would however prefer an offline solution that is stored locally.","body":"@prasannajoshi  The thing is that I&#39;m looking for a way to sidestep the need for a database entirely. S3 and Azur Blob sound nice, I would however prefer an offline solution that is stored locally."},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":2,"creation_date":1697727892,"post_id":77323854,"comment_id":136318789,"body_markdown":"so you can just compress them and store it in some local storage as well but question is who is going to review/use these audit logs and whether they will need any interface/UI or some tool to view it ? based on these questions your storage requirement will changes and also it depends where your server is sitting ?  on cloud or some on-prim/dedicated cluster and if it can connect to any local storage seamlessly ...","body":"so you can just compress them and store it in some local storage as well but question is who is going to review/use these audit logs and whether they will need any interface/UI or some tool to view it ? based on these questions your storage requirement will changes and also it depends where your server is sitting ?  on cloud or some on-prim/dedicated cluster and if it can connect to any local storage seamlessly ..."},{"owner":{"account_id":2735704,"reputation":65,"user_id":2358438,"display_name":"MrLinjak"},"score":0,"creation_date":1697747572,"post_id":77323854,"comment_id":136322253,"body_markdown":"@prasannajoshi The service will be running on our machines, this is what I mean by &quot;local&quot;. So ideally it is some small DB-like system that doesn&#39;t offer the full functionality of SQL and no-SQL databases but is good enough for storing simple audit logs, and doesn&#39;t come with overhead and maintenance costs of traditional databases. \n\nDue to relative simplicity of this data I would assume that querying it and getting data back in say json format would be readable enough. I also assume that it is possible to export it to txt/xls.","body":"@prasannajoshi The service will be running on our machines, this is what I mean by &quot;local&quot;. So ideally it is some small DB-like system that doesn&#39;t offer the full functionality of SQL and no-SQL databases but is good enough for storing simple audit logs, and doesn&#39;t come with overhead and maintenance costs of traditional databases.   Due to relative simplicity of this data I would assume that querying it and getting data back in say json format would be readable enough. I also assume that it is possible to export it to txt/xls."},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1697795901,"post_id":77323854,"comment_id":136327589,"body_markdown":"not sure if its local then are you even care much , just dump to any file format and use editor or ms office","body":"not sure if its local then are you even care much , just dump to any file format and use editor or ms office"}],"answers":[{"tags":[],"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697720211,"creation_date":1697720211,"answer_id":77323962,"question_id":77323854,"body_markdown":"According to it&#39;s [home page][1] kafka is for\r\n\r\n&gt; data pipelines, streaming analytics, data integration, and mission-critical applications\r\n\r\nBut you stated that an important functionality of your application is persistent storage of structured data. So it&#39;s highly doubtable whether kafka is a good long term fit for this purpose if that purpose isn&#39;t advocated by kafka itself.\r\n\r\nAlso keep in mind that there is probably more to your application than just the use cases. Maybe at some point reporting functionality is required. Than you are probably way better of leveraging a reporting product that probably a lot of people already know or have worked with than reinventing all of that on top of kafka (even though streaming analytics is a use case for kafka, but it probably is way lesser known than for example an sql reporting tool).\r\n\r\n\r\n  [1]: https://kafka.apache.org","title":"Alternative to DBs for storing audit logs?","body":"<p>According to it's <a href=\"https://kafka.apache.org\" rel=\"nofollow noreferrer\">home page</a> kafka is for</p>\n<blockquote>\n<p>data pipelines, streaming analytics, data integration, and mission-critical applications</p>\n</blockquote>\n<p>But you stated that an important functionality of your application is persistent storage of structured data. So it's highly doubtable whether kafka is a good long term fit for this purpose if that purpose isn't advocated by kafka itself.</p>\n<p>Also keep in mind that there is probably more to your application than just the use cases. Maybe at some point reporting functionality is required. Than you are probably way better of leveraging a reporting product that probably a lot of people already know or have worked with than reinventing all of that on top of kafka (even though streaming analytics is a use case for kafka, but it probably is way lesser known than for example an sql reporting tool).</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1697742495,"creation_date":1697742495,"answer_id":77326468,"question_id":77323854,"body_markdown":"&gt; original proposal was to create this system using an SQL database\r\n\r\nUse both? Kafka Connect can write to JDBC databases from Kafka topics. This way, you don&#39;t need to write JDBC Clients within your Java code, and non-Java clients can also send data to the same Kafka topic since the protocol is generic TCP, not specific to your database. \r\n\r\nIf that SQL database doesn&#39;t work, you can still consume the same Kafka topic to a different system (Elasticsearch works great for log analysis, as does HDFS or S3 for larger datasets). Since you mention &quot;offline&quot; systems, then MinIO is a self-hosted, S3 compatible option.","title":"Alternative to DBs for storing audit logs?","body":"<blockquote>\n<p>original proposal was to create this system using an SQL database</p>\n</blockquote>\n<p>Use both? Kafka Connect can write to JDBC databases from Kafka topics. This way, you don't need to write JDBC Clients within your Java code, and non-Java clients can also send data to the same Kafka topic since the protocol is generic TCP, not specific to your database.</p>\n<p>If that SQL database doesn't work, you can still consume the same Kafka topic to a different system (Elasticsearch works great for log analysis, as does HDFS or S3 for larger datasets). Since you mention &quot;offline&quot; systems, then MinIO is a self-hosted, S3 compatible option.</p>\n"}],"owner":{"account_id":2735704,"reputation":65,"user_id":2358438,"display_name":"MrLinjak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77326468,"answer_count":2,"score":-1,"last_activity_date":1697742495,"creation_date":1697719320,"question_id":77323854,"body_markdown":"I&#39;m currently developing a system that is used for generating verification codes. The system authenticates a user, sends them a code, stores it locally, then at some later point receives the code from the user, after which point the code is spent and deleted from the system\r\n\r\nThe original proposal was to create this system using an SQL database, however this use case just screams Kafka, and since these codes have a very short duration (they expire in 30 seconds, which means that they must be spent almost immediately) it only makes sense to have producers and consumers that create and consume events that hold these codes.\r\n\r\nHowever, the issue is that all events must be logged, i.e. upon code consumption/expiration something must be written in the audit log. Also, any attempt to use an invalid code must be logged as well. It seems like a waste to have a fully fledged database and then use it to have one AUDIT_LOG table in it.\r\n\r\nSince we&#39;re using Spring boot we&#39;d like to use some plug-and-play solution that can be easily interfaced with. I&#39;ve seen suggestions of using Kafka itself to store audit logs, but we need long term persistence and Kafka doesn&#39;t seem ideal for that. Using a no-SQL DBs was also suggested, and I&#39;ve seen some promising append-only solutions.\r\n\r\nDo you folks have anything to recommend here?","title":"Alternative to DBs for storing audit logs?","body":"<p>I'm currently developing a system that is used for generating verification codes. The system authenticates a user, sends them a code, stores it locally, then at some later point receives the code from the user, after which point the code is spent and deleted from the system</p>\n<p>The original proposal was to create this system using an SQL database, however this use case just screams Kafka, and since these codes have a very short duration (they expire in 30 seconds, which means that they must be spent almost immediately) it only makes sense to have producers and consumers that create and consume events that hold these codes.</p>\n<p>However, the issue is that all events must be logged, i.e. upon code consumption/expiration something must be written in the audit log. Also, any attempt to use an invalid code must be logged as well. It seems like a waste to have a fully fledged database and then use it to have one AUDIT_LOG table in it.</p>\n<p>Since we're using Spring boot we'd like to use some plug-and-play solution that can be easily interfaced with. I've seen suggestions of using Kafka itself to store audit logs, but we need long term persistence and Kafka doesn't seem ideal for that. Using a no-SQL DBs was also suggested, and I've seen some promising append-only solutions.</p>\n<p>Do you folks have anything to recommend here?</p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1560243362,"creation_date":1560243362,"answer_id":56539984,"question_id":56538390,"body_markdown":"This is currently not possible using the AdminClient. However there is a KIP in progress, [KIP-455][1], that will add that functionality soon.\r\n\r\nAt the moment, the recommended way to change the replication factor of a topic is to use the `kafka-reassign-partitions.sh` tool, see this [section][2] in the docs.\r\n\r\n\r\n  [1]: https://cwiki.apache.org/confluence/display/KAFKA/KIP-455%3A+Create+an+Administrative+API+for+Replica+Reassignment\r\n  [2]: http://kafka.apache.org/documentation/#basic_ops_increase_replication_factor","title":"Is it possible to change the replication factor of an existing kafka topic using java?","body":"<p>This is currently not possible using the AdminClient. However there is a KIP in progress, <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-455%3A+Create+an+Administrative+API+for+Replica+Reassignment\" rel=\"nofollow noreferrer\">KIP-455</a>, that will add that functionality soon.</p>\n\n<p>At the moment, the recommended way to change the replication factor of a topic is to use the <code>kafka-reassign-partitions.sh</code> tool, see this <a href=\"http://kafka.apache.org/documentation/#basic_ops_increase_replication_factor\" rel=\"nofollow noreferrer\">section</a> in the docs.</p>\n"},{"tags":[],"owner":{"account_id":29561671,"reputation":1,"user_id":22656048,"display_name":"Oleksandr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695975282,"creation_date":1695975282,"answer_id":77200369,"question_id":56538390,"body_markdown":"If you use Kafka API in java try this:\r\n\r\n*`admin.alterPartitionReassignments(reassignmentsMap);`*\r\n\r\nFor more information look at here: https://javadoc.io/static/org.apache.kafka/kafka-clients/3.5.1/org/apache/kafka/clients/admin/AdminClient.html","title":"Is it possible to change the replication factor of an existing kafka topic using java?","body":"<p>If you use Kafka API in java try this:</p>\n<p><em><code>admin.alterPartitionReassignments(reassignmentsMap);</code></em></p>\n<p>For more information look at here: <a href=\"https://javadoc.io/static/org.apache.kafka/kafka-clients/3.5.1/org/apache/kafka/clients/admin/AdminClient.html\" rel=\"nofollow noreferrer\">https://javadoc.io/static/org.apache.kafka/kafka-clients/3.5.1/org/apache/kafka/clients/admin/AdminClient.html</a></p>\n"}],"owner":{"account_id":16111398,"reputation":75,"user_id":11629531,"display_name":"Naman Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6228,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":56539984,"answer_count":2,"score":4,"last_activity_date":1697742202,"creation_date":1560237287,"question_id":56538390,"body_markdown":"I am using AdminClient to alter other configurations of existing kafka topic. But I cannot find a method to change the replication factor of the topic. Is there any way that I can change the replication factor using java?","title":"Is it possible to change the replication factor of an existing kafka topic using java?","body":"<p>I am using AdminClient to alter other configurations of existing kafka topic. But I cannot find a method to change the replication factor of the topic. Is there any way that I can change the replication factor using java?</p>\n"},{"tags":["java","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":12799902,"reputation":5994,"user_id":9261558,"display_name":"Mazlum Tosun"},"score":0,"creation_date":1663851322,"post_id":73811292,"comment_id":130339841,"body_markdown":"I am not sure it&#39;s possible, because `Beam` and `Dataflow` distribute the computation in parallel ? The line numbers can&#39;t be added directly in the CSV lines ?","body":"I am not sure it&#39;s possible, because <code>Beam</code> and <code>Dataflow</code> distribute the computation in parallel ? The line numbers can&#39;t be added directly in the CSV lines ?"},{"owner":{"account_id":15286502,"reputation":9,"user_id":11029385,"display_name":"Naman Kumar"},"score":0,"creation_date":1663854921,"post_id":73811292,"comment_id":130341368,"body_markdown":"okay but can we maintain our own counter so that I can use it in the place of lineNumber","body":"okay but can we maintain our own counter so that I can use it in the place of lineNumber"}],"answers":[{"tags":[],"owner":{"account_id":8693535,"reputation":126,"user_id":6505742,"display_name":"roizaig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697741950,"creation_date":1697741950,"answer_id":77326422,"question_id":73811292,"body_markdown":"Try this approach:\r\n\r\n 1. Using Beam transform TextIo.Read() to read the file.\r\n 2. Count using Count.globally(), producing a PCollection of type Long with single element - the count.\r\n 3. Use MapElement.via with a custom function to print the count to std out.\r\n\r\n    package com.roizaig.beam.example;\r\n    \r\n    import org.apache.beam.sdk.Pipeline;\r\n    \r\n    import org.apache.beam.sdk.io.TextIO;\r\n    \r\n    import org.apache.beam.sdk.options.PipelineOptions;\r\n    \r\n    import org.apache.beam.sdk.options.PipelineOptionsFactory;\r\n    \r\n    import org.apache.beam.sdk.transforms.*;\r\n    \r\n    import org.apache.beam.sdk.values.PCollection;\r\n    \r\n    public class ReadingFile {\r\n    \r\n        private static class PrintElementFn extends DoFn&lt;String, Void&gt; {\r\n    \r\n            @ProcessElement\r\n            public void processElement(@Element String input) {\r\n                System.out.println(input);\r\n            }\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            PipelineOptions options = PipelineOptionsFactory\r\n                    .fromArgs(args)\r\n                    .create();\r\n            Pipeline p = Pipeline.create(options);\r\n    \r\n            PCollection&lt;String&gt; lines = p\r\n                    .apply(\r\n                            &quot;ReadMyFile&quot;,\r\n                            TextIO.read().from(&quot;src/main/resources/king-lear_TXT_FolgerShakespeare.txt&quot;)\r\n                    );\r\n    \r\n    \r\n            PCollection&lt;Long&gt; counter = lines.apply(Count.&lt;String&gt;globally());\r\n            counter.apply(MapElements.via(new SimpleFunction&lt;Long, Long&gt;() {\r\n                @Override\r\n                public Long apply(Long input) {\r\n                    System.out.println(&quot;Count is: &quot; + input);\r\n                    return input;\r\n                }\r\n            }));\r\n    \r\n            p.run().waitUntilFinish();\r\n        }\r\n    }","title":"How to get line number of the file in apache beam dataflow?","body":"<p>Try this approach:</p>\n<ol>\n<li><p>Using Beam transform TextIo.Read() to read the file.</p>\n</li>\n<li><p>Count using Count.globally(), producing a PCollection of type Long with single element - the count.</p>\n</li>\n<li><p>Use MapElement.via with a custom function to print the count to std out.</p>\n<p>package com.roizaig.beam.example;</p>\n<p>import org.apache.beam.sdk.Pipeline;</p>\n<p>import org.apache.beam.sdk.io.TextIO;</p>\n<p>import org.apache.beam.sdk.options.PipelineOptions;</p>\n<p>import org.apache.beam.sdk.options.PipelineOptionsFactory;</p>\n<p>import org.apache.beam.sdk.transforms.*;</p>\n<p>import org.apache.beam.sdk.values.PCollection;</p>\n<p>public class ReadingFile {</p>\n<pre><code>private static class PrintElementFn extends DoFn&lt;String, Void&gt; {\n\n    @ProcessElement\n    public void processElement(@Element String input) {\n        System.out.println(input);\n    }\n\n}\n\npublic static void main(String[] args) {\n    PipelineOptions options = PipelineOptionsFactory\n            .fromArgs(args)\n            .create();\n    Pipeline p = Pipeline.create(options);\n\n    PCollection&lt;String&gt; lines = p\n            .apply(\n                    &quot;ReadMyFile&quot;,\n                    TextIO.read().from(&quot;src/main/resources/king-lear_TXT_FolgerShakespeare.txt&quot;)\n            );\n\n\n    PCollection&lt;Long&gt; counter = lines.apply(Count.&lt;String&gt;globally());\n    counter.apply(MapElements.via(new SimpleFunction&lt;Long, Long&gt;() {\n        @Override\n        public Long apply(Long input) {\n            System.out.println(&quot;Count is: &quot; + input);\n            return input;\n        }\n    }));\n\n    p.run().waitUntilFinish();\n}\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n"}],"owner":{"account_id":15286502,"reputation":9,"user_id":11029385,"display_name":"Naman Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1697741950,"creation_date":1663834240,"question_id":73811292,"body_markdown":"I&#39;m reading a file using **TextIO.read()** how can I get the line number of the file Or how to maintain our own distributed counter so that I can access the last value and set into the pojo.\r\n\r\nEg: File looks like\r\n\r\n    TRANSACTION_ID|CLIENT_ID|PRODUCT_CODE \r\n    123|1001|2001\r\n    124|1002|2002\r\n\r\nAfter reading this content I have one transform which parse into Java pojo class and if you see the pojo one field is **lineNumber** and then same pojo I&#39;m inserting into database.\r\n\r\n```java\r\nclass BatchData {\r\n   private Integer transactionId;\r\n   private Integer clientId;\r\n   private Integer productCode;\r\n   private Integer lineNumber;\r\n}\r\n```\r\n\r\nDo we have any way to get the line number directly.\r\n\r\nWhat I tried but didn&#39;t work.\r\n\r\n1. First I tried to create my own custom counter using locking and while parsing the file into POJO then I&#39;m calling this **getAndInc()** method.\r\n\r\n```java\r\npublic class CustomizedCounter implements Serializable {\r\n    private static final long serialVersionUID = 368687587598L;\r\n\r\n    private static int counter = 0;\r\n    private final ReentrantLock lock = new ReentrantLock();\r\n    \r\n    public int getAndInc() {\r\n       lock.lock();\r\n       try {\r\n           counter++;\r\n       } finally {\r\n         lock.unlock();\r\n       }\r\n      return counter;\r\n    }\r\n \r\n}\r\n```\r\n\r\nThis didn&#39;t work with big file when there are multiple workers.\r\n\r\n2. Then I though to use the Metrics counter which is provided by the apache beam but we can only use it for maintaining the counter not the actual **lineNumber** of the file. But my requirement will be fine even if I successfully able to maintain the distributed counter. I took the ref. of below doc which provides 3 types of counter but I can&#39;t able to access the last value of the counter at the runtime.\r\n\r\n[https://beam.apache.org/documentation/programming-guide/#metrics][1]\r\n","title":"How to get line number of the file in apache beam dataflow?","body":"<p>I'm reading a file using <strong>TextIO.read()</strong> how can I get the line number of the file Or how to maintain our own distributed counter so that I can access the last value and set into the pojo.</p>\n<p>Eg: File looks like</p>\n<pre><code>TRANSACTION_ID|CLIENT_ID|PRODUCT_CODE \n123|1001|2001\n124|1002|2002\n</code></pre>\n<p>After reading this content I have one transform which parse into Java pojo class and if you see the pojo one field is <strong>lineNumber</strong> and then same pojo I'm inserting into database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BatchData {\n   private Integer transactionId;\n   private Integer clientId;\n   private Integer productCode;\n   private Integer lineNumber;\n}\n</code></pre>\n<p>Do we have any way to get the line number directly.</p>\n<p>What I tried but didn't work.</p>\n<ol>\n<li>First I tried to create my own custom counter using locking and while parsing the file into POJO then I'm calling this <strong>getAndInc()</strong> method.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomizedCounter implements Serializable {\n    private static final long serialVersionUID = 368687587598L;\n\n    private static int counter = 0;\n    private final ReentrantLock lock = new ReentrantLock();\n    \n    public int getAndInc() {\n       lock.lock();\n       try {\n           counter++;\n       } finally {\n         lock.unlock();\n       }\n      return counter;\n    }\n \n}\n</code></pre>\n<p>This didn't work with big file when there are multiple workers.</p>\n<ol start=\"2\">\n<li>Then I though to use the Metrics counter which is provided by the apache beam but we can only use it for maintaining the counter not the actual <strong>lineNumber</strong> of the file. But my requirement will be fine even if I successfully able to maintain the distributed counter. I took the ref. of below doc which provides 3 types of counter but I can't able to access the last value of the counter at the runtime.</li>\n</ol>\n<p>[https://beam.apache.org/documentation/programming-guide/#metrics][1]</p>\n"},{"tags":["java","multithreading","try-catch","infinite-loop","throwable"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":3,"creation_date":1697717470,"post_id":77323481,"comment_id":136316536,"body_markdown":"You should listen to sonar, generally you can&#39;t recover from `Error` and it&#39;s subclasses. How do you handle `OutOfMemoryError` in a meaningful way,  for example?","body":"You should listen to sonar, generally you can&#39;t recover from <code>Error</code> and it&#39;s subclasses. How do you handle <code>OutOfMemoryError</code> in a meaningful way,  for example?"},{"owner":{"account_id":3750738,"reputation":1,"user_id":3118286,"display_name":"Bora Ciner"},"score":0,"creation_date":1697791263,"post_id":77323481,"comment_id":136326727,"body_markdown":"I know what sonarcube says, Is there any way to do it in compliant way?","body":"I know what sonarcube says, Is there any way to do it in compliant way?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1698049243,"post_id":77323481,"comment_id":136351092,"body_markdown":"The compliant way is to not catch `Throwable`s. Or you can use `@SuppressWarnings(&quot;sonar code&quot;)` to suppress the check, if you are **very** confident in your handling.","body":"The compliant way is to not catch <code>Throwable</code>s. Or you can use <code>@SuppressWarnings(&quot;sonar code&quot;)</code> to suppress the check, if you are <b>very</b> confident in your handling."}],"answers":[{"tags":[],"owner":{"account_id":29114412,"reputation":19,"user_id":22303452,"display_name":"Aisu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697740713,"creation_date":1697740713,"answer_id":77326314,"question_id":77323481,"body_markdown":"Here&#39;s an example of how to catch and rethrow exceptions to comply with the rule:\r\n\r\n    public class MyRunnable implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                // Your thread logic here\r\n            } catch (Exception e) {\r\n                // Handle specific exceptions if needed\r\n                // Rethrow as unchecked exception or wrap and rethrow\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to make a java Thread unstoppable without catching Throwable","body":"<p>Here's an example of how to catch and rethrow exceptions to comply with the rule:</p>\n<pre><code>public class MyRunnable implements Runnable {\n    @Override\n    public void run() {\n        try {\n            // Your thread logic here\n        } catch (Exception e) {\n            // Handle specific exceptions if needed\n            // Rethrow as unchecked exception or wrap and rethrow\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3750738,"reputation":1,"user_id":3118286,"display_name":"Bora Ciner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1697740713,"creation_date":1697715895,"question_id":77323481,"body_markdown":"I want to make a thread unstoppable for some reason, what is the sonarcube compliant solution?\r\nI have to catch Throwable but.\r\n\r\nIt says:\r\nCatch Exception instead of Throwable.\r\nThrowable and Error should not be caught\r\n\r\nI cannot only catch Exceptions","title":"How to make a java Thread unstoppable without catching Throwable","body":"<p>I want to make a thread unstoppable for some reason, what is the sonarcube compliant solution?\nI have to catch Throwable but.</p>\n<p>It says:\nCatch Exception instead of Throwable.\nThrowable and Error should not be caught</p>\n<p>I cannot only catch Exceptions</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9920,"page":112,"page_size":100}
